(self.webpackChunkassistant_panel=self.webpackChunkassistant_panel||[]).push([[792],{3:(pi,qe,Y)=>{"use strict";var Z={};Y.r(Z),Y.d(Z,{CompositeArrayBuffer:()=>md,browserFiles:()=>Hat,browserHTTPRequest:()=>Zat,concatenateArrayBuffers:()=>kfe,copyModel:()=>gat,decodeWeights:()=>Cfe,decodeWeightsStream:()=>Tfe,encodeWeights:()=>Iz,fromMemory:()=>Jat,fromMemorySync:()=>epe,getLoadHandlers:()=>sat,getModelArtifactsForJSON:()=>Nz,getModelArtifactsForJSONSync:()=>Afe,getModelArtifactsInfoForJSON:()=>oE,getSaveHandlers:()=>Ofe,getWeightSpecs:()=>Fz,http:()=>Qz,isHTTPScheme:()=>Zz,listModels:()=>mat,loadWeights:()=>qat,moveModel:()=>bat,registerLoadRouter:()=>iat,registerSaveRouter:()=>nat,removeModel:()=>_at,weightsLoaderFactory:()=>Yfe,withSaveHandler:()=>elt,withSaveHandlerSync:()=>tlt});var ye={};Y.r(ye),Y.d(ye,{assertParamsValid:()=>i7,computeFlatOffset:()=>o7,computeOutShape:()=>s7,getNormalizedAxes:()=>clt,isSliceContinous:()=>r7,maskToAxes:()=>llt,parseSliceParams:()=>eN,sliceInfo:()=>a7,startForAxis:()=>hpe,startIndicesWithElidedDims:()=>cpe,stopForAxis:()=>fpe,stopIndicesWithElidedDims:()=>upe,stridesForAxis:()=>dpe,stridesWithElidedDims:()=>ope});var pe={};Y.r(pe),Y.d(pe,{conv2d:()=>hme,depthwiseConv2d:()=>Mht,matMul:()=>q7});var ue={};Y.r(ue),Y.d(ue,{collectGatherOpShapeInfo:()=>S9,computeOutShape:()=>qme,segOpComputeOptimalWindowSize:()=>Wme});var ee={};Y.r(ee),Y.d(ee,{ERF_A1:()=>l9,ERF_A2:()=>c9,ERF_A3:()=>u9,ERF_A4:()=>d9,ERF_A5:()=>h9,ERF_P:()=>a9,PARALLELIZE_THRESHOLD:()=>n9,RowPartitionType:()=>gh,SELU_SCALE:()=>IN,SELU_SCALEALPHA:()=>TN,applyActivation:()=>CN,assertAndGetBroadcastShape:()=>fi,assertAxesAreInnerMostDims:()=>ya,assertParamsConsistent:()=>t9,assignToTypedArray:()=>Mme,axesAreInnerMostDims:()=>b7,calculateShapes:()=>Ug,checkEinsumDimSizes:()=>g9,checkPadOnDimRoundingMode:()=>Ja,combineLocations:()=>Vpe,combineRaggedTensorToTensorShapes:()=>Cme,complexWithEvenIndex:()=>kme,complexWithOddIndex:()=>Dme,computeConv2DInfo:()=>Jo,computeConv3DInfo:()=>rm,computeDefaultPad:()=>c7,computeDilation2DInfo:()=>aE,computeOptimalWindowSize:()=>EN,computeOutAndReduceShapes:()=>ea,computeOutShape:()=>_h,computePool2DInfo:()=>gu,computePool3DInfo:()=>kf,convertConv2DDataFormat:()=>Df,decodeEinsumEquation:()=>m9,eitherStridesOrDilationsAreOne:()=>va,expandShapeToKeepDim:()=>Yr,exponent:()=>Ome,exponents:()=>Ame,fromStringArrayToUint8:()=>Kme,fromUint8ToStringArray:()=>Of,getAxesPermutation:()=>Nr,getBroadcastDims:()=>v1,getComplexWithIndex:()=>f9,getEinsumComputePath:()=>b9,getEinsumPermutation:()=>_9,getFusedBiasGradient:()=>SN,getFusedDyActivation:()=>wN,getImageCenter:()=>i9,getInnerMostAxes:()=>Zr,getPermuted:()=>SE,getRaggedRank:()=>Eme,getReductionAxes:()=>Oo,getReshaped:()=>wE,getReshapedPermuted:()=>CE,getRowPartitionTypesHelper:()=>xme,getSliceBeginCoords:()=>s9,getSliceSize:()=>r9,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>Fme,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>Lme,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>Pme,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>Vme,getSparseReshapeInputOutputMismatchErrorMessage:()=>Ume,getSparseReshapeInputOutputMultipleErrorMessage:()=>zme,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>$me,getSparseReshapeNegativeOutputDimErrorMessage:()=>Bme,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>Hme,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>w9,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>Gme,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>jme,getUndoAxesPermutation:()=>lm,isIdentityPermutation:()=>v9,log:()=>fot,mergeRealAndImagArrays:()=>Af,prepareAndValidate:()=>o9,prepareSplitSize:()=>y9,segment_util:()=>ue,shouldFuse:()=>xN,slice_util:()=>ye,splitRealAndImagArrays:()=>Ime,stridesOrDilationsArePositive:()=>Fg,tupleValuesAreOne:()=>om,upcastType:()=>nc,validateDefaultValueShape:()=>Tme,validateInput:()=>$7,validateUpdateShape:()=>rme,warn:()=>Lc});var Q={};Y.r(Q),Y.d(Q,{json:()=>ybt});var q={};Y.r(q),Y.d(q,{json:()=>wbt});var F={};Y.r(F),Y.d(F,{json:()=>Sbt});var x={};Y.r(x),Y.d(x,{json:()=>Cbt});var I={};Y.r(I),Y.d(I,{json:()=>xbt});var $={};Y.r($),Y.d($,{json:()=>Ebt});var N={};Y.r(N),Y.d(N,{json:()=>Tbt});var O={};Y.r(O),Y.d(O,{json:()=>Ibt});var k={};Y.r(k),Y.d(k,{json:()=>kbt});var A={};Y.r(A),Y.d(A,{json:()=>Dbt});var V={};Y.r(V),Y.d(V,{json:()=>Mbt});var R={};Y.r(R),Y.d(R,{json:()=>Abt});var j={};Y.r(j),Y.d(j,{json:()=>Obt});var ce={};Y.r(ce),Y.d(ce,{json:()=>Nbt});var ie={};Y.r(ie),Y.d(ie,{json:()=>Rbt});var se={};Y.r(se),Y.d(se,{json:()=>Fbt});var _e={};Y.r(_e),Y.d(_e,{json:()=>Lbt});var J={};Y.r(J),Y.d(J,{json:()=>Pbt});var G={};Y.r(G),Y.d(G,{json:()=>$bt});var U={};Y.r(U),Y.d(U,{OP_SCOPE_SUFFIX:()=>yfe,abs:()=>Ao,acos:()=>mpe,acosh:()=>_pe,add:()=>kt,addN:()=>mlt,all:()=>l7,any:()=>tN,argMax:()=>y1,argMin:()=>gpe,asin:()=>bpe,asinh:()=>vpe,atan:()=>ype,atan2:()=>wpe,atanh:()=>Spe,avgPool:()=>nN,avgPool3d:()=>Cpe,basicLSTMCell:()=>$lt,batchNorm:()=>uE,batchNorm2d:()=>xpe,batchNorm3d:()=>Epe,batchNorm4d:()=>Tpe,batchToSpaceND:()=>iN,bincount:()=>Ipe,bitwiseAnd:()=>qlt,booleanMaskAsync:()=>uht,broadcastArgs:()=>Xlt,broadcastTo:()=>S1,buffer:()=>xi,cast:()=>Ht,ceil:()=>kpe,clipByValue:()=>ic,clone:()=>xf,complex:()=>em,concat:()=>Xr,concat1d:()=>Dpe,concat2d:()=>Mpe,concat3d:()=>Ape,concat4d:()=>Ope,conv1d:()=>d7,conv2d:()=>am,conv2dTranspose:()=>f7,conv3d:()=>Npe,conv3dTranspose:()=>Fpe,cos:()=>sN,cosh:()=>p7,cosineWindow:()=>j7,cumprod:()=>rN,cumsum:()=>m7,denseBincount:()=>_7,depthToSpace:()=>Lpe,depthwiseConv2d:()=>dE,diag:()=>bct,dilation2d:()=>Ppe,div:()=>vn,divNoNan:()=>$pe,dot:()=>Bpe,dropout:()=>ume,einsum:()=>C1,elu:()=>hE,enclosingPowerOfTwo:()=>dme,ensureShape:()=>Ict,equal:()=>_d,erf:()=>g7,euclideanNorm:()=>Upe,exp:()=>sc,expandDims:()=>Ra,expm1:()=>Gpe,eye:()=>v7,fft:()=>vN,fill:()=>b1,floor:()=>mE,floorDiv:()=>Hz,fused:()=>pe,gather:()=>_E,gatherND:()=>yht,greater:()=>rc,greaterEqual:()=>cm,ifft:()=>yE,imag:()=>oN,image:()=>Su,inTopKAsync:()=>xht,irfft:()=>L7,isFinite:()=>jpe,isInf:()=>Hpe,isNaN:()=>Wpe,leakyRelu:()=>aN,less:()=>gE,lessEqual:()=>Pg,linalg:()=>wme,linspace:()=>Yct,localResponseNormalization:()=>qpe,log:()=>Bc,log1p:()=>lN,logSigmoid:()=>Kpe,logSoftmax:()=>y7,logSumExp:()=>cN,logicalAnd:()=>ph,logicalNot:()=>uN,logicalOr:()=>w7,logicalXor:()=>Xpe,losses:()=>lpt,lowerBound:()=>uut,matMul:()=>Ui,max:()=>bu,maxPool:()=>hN,maxPool3d:()=>Ype,maxPoolWithArgmax:()=>mut,maximum:()=>If,mean:()=>Gr,meshgrid:()=>gut,min:()=>fE,minimum:()=>$g,mirrorPad:()=>Zpe,mod:()=>Qpe,moments:()=>fN,movingAverage:()=>fht,mul:()=>Be,multiRNNCell:()=>Cut,multinomial:()=>Eut,neg:()=>gr,norm:()=>pE,notEqual:()=>E1,oneHot:()=>C7,ones:()=>oc,onesLike:()=>Vc,op:()=>Oe,outerProduct:()=>Mut,pad:()=>um,pad1d:()=>Nut,pad2d:()=>Fut,pad3d:()=>Put,pad4d:()=>But,pool:()=>Jpe,pow:()=>Tf,prelu:()=>mN,print:()=>Vfe,prod:()=>eme,raggedGather:()=>qut,raggedRange:()=>Xut,raggedTensorToTensor:()=>Zut,rand:()=>Jut,randomGamma:()=>odt,randomNormal:()=>T7,randomStandardNormal:()=>cdt,randomUniform:()=>Bg,randomUniformInt:()=>hdt,range:()=>I1,real:()=>bE,reciprocal:()=>tme,relu:()=>mh,relu6:()=>I7,reshape:()=>Ge,reverse:()=>yu,reverse1d:()=>vdt,reverse2d:()=>wdt,reverse3d:()=>Cdt,reverse4d:()=>Edt,rfft:()=>yN,round:()=>k7,rsqrt:()=>D7,scalar:()=>En,scatterND:()=>mht,searchSorted:()=>S7,selu:()=>M7,separableConv2d:()=>A7,setdiff1dAsync:()=>Adt,sigmoid:()=>fh,sign:()=>nme,signal:()=>apt,sin:()=>N7,sinh:()=>R7,slice:()=>is,slice1d:()=>_N,slice2d:()=>F7,slice3d:()=>gN,slice4d:()=>vE,softmax:()=>bN,softplus:()=>x1,spaceToBatchND:()=>pN,sparse:()=>cpt,sparseToDense:()=>bht,spectral:()=>opt,split:()=>ac,sqrt:()=>ba,square:()=>tr,squaredDifference:()=>P7,squeeze:()=>Vg,stack:()=>Tl,step:()=>k1,stridedSlice:()=>ime,string:()=>upt,sub:()=>tn,sum:()=>_n,tan:()=>sme,tanh:()=>Lg,tensor:()=>$c,tensor1d:()=>Fa,tensor2d:()=>zg,tensor3d:()=>tpe,tensor4d:()=>Zdt,tensor5d:()=>Qdt,tensor6d:()=>Jdt,tensorScatterUpdate:()=>tht,tile:()=>vu,topk:()=>ome,transpose:()=>ss,truncatedNormal:()=>B7,unique:()=>ame,unsortedSegmentSum:()=>V7,unstack:()=>wu,upperBound:()=>aht,variable:()=>lme,where:()=>Na,whereAsync:()=>cme,zeros:()=>No,zerosLike:()=>ns});var B={};function ae(t,n){return Object.is(t,n)}Y.r(B),Y.d(B,{mx:()=>ube,XI:()=>LU,Nk:()=>_be,f6:()=>gbe,ct:()=>cbe,YG:()=>bbe,hH:()=>vbe,z3:()=>Sbe,sG:()=>xbe,uM:()=>Tbe,vS:()=>Dbe,qB:()=>Mbe,GG:()=>Abe,lg:()=>Nbe,rq:()=>Obe,cu:()=>Fbe,WR:()=>Rbe,GE:()=>Lbe,px:()=>Pbe,jC:()=>$be,He:()=>Vbe,hE:()=>zbe,BF:()=>PU,Dk:()=>Gbe,cl:()=>jbe,_B:()=>Kbe,ub:()=>Ybe,_f:()=>Qbe,Ku:()=>tve,qy:()=>nve,Zy:()=>ive,bu:()=>Jg,zv:()=>gyt,dH:()=>hbe,HS:()=>mbe,yH:()=>rve,l3:()=>ove,z9:()=>GU,x6:()=>jCt,_m:()=>ave,eW:()=>lve,GK:()=>cve,SP:()=>uve,yr:()=>dve,dl:()=>Ibe,Dw:()=>hve,xT:()=>pve,_X:()=>RU,wz:()=>_ve});let ve=null,Ue=!1,je=1;const dt=Symbol("SIGNAL");function Ae(t){const n=ve;return ve=t,n}const De={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ze(t){if(Ue)throw new Error("");if(null===ve)return;ve.consumerOnSignalRead(t);const n=ve.nextProducerIndex++;Tr(ve),n<ve.producerNode.length&&ve.producerNode[n]!==t&&po(ve)&&cs(ve.producerNode[n],ve.producerIndexOfThis[n]),ve.producerNode[n]!==t&&(ve.producerNode[n]=t,ve.producerIndexOfThis[n]=po(ve)?Hi(t,ve,n):0),ve.producerLastReadVersion[n]=t.version}function we(t){if((!po(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==je)){if(!t.producerMustRecompute(t)&&!Xn(t))return t.dirty=!1,void(t.lastCleanEpoch=je);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=je}}function Ke(t){if(void 0===t.liveConsumerNode)return;const n=Ue;Ue=!0;try{for(const e of t.liveConsumerNode)e.dirty||ct(e)}finally{Ue=n}}function lt(){return!1!==ve?.consumerAllowSignalWrites}function ct(t){t.dirty=!0,Ke(t),t.consumerMarkedDirty?.(t)}function It(t){return t&&(t.nextProducerIndex=0),Ae(t)}function on(t,n){if(Ae(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(po(t))for(let e=t.nextProducerIndex;e<t.producerNode.length;e++)cs(t.producerNode[e],t.producerIndexOfThis[e]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Xn(t){Tr(t);for(let n=0;n<t.producerNode.length;n++){const e=t.producerNode[n],i=t.producerLastReadVersion[n];if(i!==e.version||(we(e),i!==e.version))return!0}return!1}function ci(t){if(Tr(t),po(t))for(let n=0;n<t.producerNode.length;n++)cs(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Hi(t,n,e){if(yt(t),0===t.liveConsumerNode.length&&Ct(t))for(let i=0;i<t.producerNode.length;i++)t.producerIndexOfThis[i]=Hi(t.producerNode[i],t,i);return t.liveConsumerIndexOfThis.push(e),t.liveConsumerNode.push(n)-1}function cs(t,n){if(yt(t),1===t.liveConsumerNode.length&&Ct(t))for(let i=0;i<t.producerNode.length;i++)cs(t.producerNode[i],t.producerIndexOfThis[i]);const e=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[e],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[e],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const i=t.liveConsumerIndexOfThis[n],s=t.liveConsumerNode[n];Tr(s),s.producerIndexOfThis[i]=n}}function po(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Tr(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function yt(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Ct(t){return void 0!==t.producerNode}function Yt(t){const n=Object.create(Ai);n.computation=t;const e=()=>{if(we(n),Ze(n),n.value===gi)throw n.error;return n.value};return e[dt]=n,e}const en=Symbol("UNSET"),Nt=Symbol("COMPUTING"),gi=Symbol("ERRORED"),Ai={...De,value:en,dirty:!0,error:null,equal:ae,producerMustRecompute:t=>t.value===en||t.value===Nt,producerRecomputeValue(t){if(t.value===Nt)throw new Error("Detected cycle in computations.");const n=t.value;t.value=Nt;const e=It(t);let i;try{i=t.computation()}catch(s){i=gi,t.error=s}finally{on(t,e)}n!==en&&n!==gi&&i!==gi&&t.equal(n,i)?t.value=n:(t.value=i,t.version++)}};let sl=function Vi(){throw new Error};function qc(){sl()}let ub=null;function Oj(t,n){lt()||qc(),t.equal(t.value,n)||(t.value=n,function Fwe(t){t.version++,function Ye(){je++}(),Ke(t),ub?.()}(t))}const Rwe={...De,equal:ae,value:void 0};const aF=()=>{},Pwe={...De,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{null!==t.schedule&&t.schedule(t.ref)},hasRun:!1,cleanupFn:aF};function p0(t){return"function"==typeof t}let lF=!1;const Fu={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const n=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+n.stack)}else lF&&console.log("RxJS: Back to a better error behavior. Thank you. <3");lF=t},get useDeprecatedSynchronousErrorHandling(){return lF}};function db(t){setTimeout(()=>{throw t},0)}const pT={closed:!0,next(t){},error(t){if(Fu.useDeprecatedSynchronousErrorHandling)throw t;db(t)},complete(){}},Fm=Array.isArray||(t=>t&&"number"==typeof t.length);function cF(t){return null!==t&&"object"==typeof t}const mT=(()=>{function t(n){return Error.call(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((e,i)=>`${i+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n,this}return t.prototype=Object.create(Error.prototype),t})();class Tn{constructor(n){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,n&&(this._ctorUnsubscribe=!0,this._unsubscribe=n)}unsubscribe(){let n;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:i,_unsubscribe:s,_subscriptions:r}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof Tn)e.remove(this);else if(null!==e)for(let o=0;o<e.length;++o)e[o].remove(this);if(p0(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(o){n=o instanceof mT?Nj(o.errors):[o]}}if(Fm(r)){let o=-1,a=r.length;for(;++o<a;){const l=r[o];if(cF(l))try{l.unsubscribe()}catch(c){n=n||[],c instanceof mT?n=n.concat(Nj(c.errors)):n.push(c)}}}if(n)throw new mT(n)}add(n){let e=n;if(!n)return Tn.EMPTY;switch(typeof n){case"function":e=new Tn(n);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof Tn)){const r=e;e=new Tn,e._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+n+" added to Subscription.")}let{_parentOrParents:i}=e;if(null===i)e._parentOrParents=this;else if(i instanceof Tn){if(i===this)return e;e._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return e;i.push(this)}const s=this._subscriptions;return null===s?this._subscriptions=[e]:s.push(e),e}remove(n){const e=this._subscriptions;if(e){const i=e.indexOf(n);-1!==i&&e.splice(i,1)}}}var t;function Nj(t){return t.reduce((n,e)=>n.concat(e instanceof mT?e.errors:e),[])}Tn.EMPTY=((t=new Tn).closed=!0,t);const _T="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class Ji extends Tn{constructor(n,e,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=pT;break;case 1:if(!n){this.destination=pT;break}if("object"==typeof n){n instanceof Ji?(this.syncErrorThrowable=n.syncErrorThrowable,this.destination=n,n.add(this)):(this.syncErrorThrowable=!0,this.destination=new Rj(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new Rj(this,n,e,i)}}[_T](){return this}static create(n,e,i){const s=new Ji(n,e,i);return s.syncErrorThrowable=!1,s}next(n){this.isStopped||this._next(n)}error(n){this.isStopped||(this.isStopped=!0,this._error(n))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(n){this.destination.next(n)}_error(n){this.destination.error(n),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:n}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=n,this}}class Rj extends Ji{constructor(n,e,i,s){super(),this._parentSubscriber=n;let r,o=this;p0(e)?r=e:e&&(r=e.next,i=e.error,s=e.complete,e!==pT&&(o=Object.create(e),p0(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=r,this._error=i,this._complete=s}next(n){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;Fu.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,n)&&this.unsubscribe():this.__tryOrUnsub(this._next,n)}}error(n){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:i}=Fu;if(this._error)i&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,n),this.unsubscribe()):(this.__tryOrUnsub(this._error,n),this.unsubscribe());else if(e.syncErrorThrowable)i?(e.syncErrorValue=n,e.syncErrorThrown=!0):db(n),this.unsubscribe();else{if(this.unsubscribe(),i)throw n;db(n)}}}complete(){if(!this.isStopped){const{_parentSubscriber:n}=this;if(this._complete){const e=()=>this._complete.call(this._context);Fu.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?(this.__tryOrSetError(n,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(n,e){try{n.call(this._context,e)}catch(i){if(this.unsubscribe(),Fu.useDeprecatedSynchronousErrorHandling)throw i;db(i)}}__tryOrSetError(n,e,i){if(!Fu.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,i)}catch(s){return Fu.useDeprecatedSynchronousErrorHandling?(n.syncErrorValue=s,n.syncErrorThrown=!0,!0):(db(s),!0)}return!1}_unsubscribe(){const{_parentSubscriber:n}=this;this._context=null,this._parentSubscriber=null,n.unsubscribe()}}const m0="function"==typeof Symbol&&Symbol.observable||"@@observable";function gT(t){return t}function Fj(t){return 0===t.length?gT:1===t.length?t[0]:function(e){return t.reduce((i,s)=>s(i),e)}}let es=(()=>{class t{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,s){const{operator:r}=this,o=function Bwe(t,n,e){if(t){if(t instanceof Ji)return t;if(t[_T])return t[_T]()}return t||n||e?new Ji(t,n,e):new Ji(pT)}(e,i,s);if(o.add(r?r.call(o,this.source):this.source||Fu.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),Fu.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){Fu.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=i),function $we(t){for(;t;){const{closed:n,destination:e,isStopped:i}=t;if(n||i)return!1;t=e&&e instanceof Ji?e:null}return!0}(e)?e.error(i):console.warn(i)}}forEach(e,i){return new(i=Lj(i))((s,r)=>{let o;o=this.subscribe(a=>{try{e(a)}catch(l){r(l),o&&o.unsubscribe()}},r,s)})}_subscribe(e){const{source:i}=this;return i&&i.subscribe(e)}[m0](){return this}pipe(...e){return 0===e.length?this:Fj(e)(this)}toPromise(e){return new(e=Lj(e))((i,s)=>{let r;this.subscribe(o=>r=o,o=>s(o),()=>i(r))})}}return t.create=n=>new t(n),t})();function Lj(t){if(t||(t=Fu.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const Lm=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class Pj extends Tn{constructor(n,e){super(),this.subject=n,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const n=this.subject,e=n.observers;if(this.subject=null,!e||0===e.length||n.isStopped||n.closed)return;const i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}class $j extends Ji{constructor(n){super(n),this.destination=n}}let Pt=(()=>{class t extends es{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[_T](){return new $j(this)}lift(e){const i=new uF(this,this);return i.operator=e,i}next(e){if(this.closed)throw new Lm;if(!this.isStopped){const{observers:i}=this,s=i.length,r=i.slice();for(let o=0;o<s;o++)r[o].next(e)}}error(e){if(this.closed)throw new Lm;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:i}=this,s=i.length,r=i.slice();for(let o=0;o<s;o++)r[o].error(e);this.observers.length=0}complete(){if(this.closed)throw new Lm;this.isStopped=!0;const{observers:e}=this,i=e.length,s=e.slice();for(let r=0;r<i;r++)s[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new Lm;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new Lm;return this.hasError?(e.error(this.thrownError),Tn.EMPTY):this.isStopped?(e.complete(),Tn.EMPTY):(this.observers.push(e),new Pj(this,e))}asObservable(){const e=new es;return e.source=this,e}}return t.create=(n,e)=>new uF(n,e),t})();class uF extends Pt{constructor(n,e){super(),this.destination=n,this.source=e}next(n){const{destination:e}=this;e&&e.next&&e.next(n)}error(n){const{destination:e}=this;e&&e.error&&this.destination.error(n)}complete(){const{destination:n}=this;n&&n.complete&&this.destination.complete()}_subscribe(n){const{source:e}=this;return e?this.source.subscribe(n):Tn.EMPTY}}class Mt extends Pt{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return e&&!e.closed&&n.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Lm;return this._value}next(n){super.next(this._value=n)}}function ze(t,n){return function(i){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new zwe(t,n))}}class zwe{constructor(n,e){this.project=n,this.thisArg=e}call(n,e){return e.subscribe(new Uwe(n,this.project,this.thisArg))}}class Uwe extends Ji{constructor(n,e,i){super(n),this.project=e,this.count=0,this.thisArg=i||this}_next(n){let e;try{e=this.project.call(this.thisArg,n,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const iH="https://g.co/ng/security#xss";class ot extends Error{constructor(n,e){super(function hb(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,e)),this.code=n}}function Oh(t){return{toString:t}.toString()}const pb="__parameters__";function _b(t,n,e){return Oh(()=>{const i=function bF(t){return function(...e){if(t){const i=t(...e);for(const s in i)this[s]=i[s]}}}(n);function s(...r){if(this instanceof s)return i.apply(this,r),this;const o=new s(...r);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(pb)?l[pb]:Object.defineProperty(l,pb,{value:[]})[pb];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return e&&(s.prototype=Object.create(e.prototype)),s.prototype.ngMetadataName=t,s.annotationCls=s,s})}const sr=globalThis;function zs(t){for(let n in t)if(t[n]===zs)return n;throw Error("Could not find renamed property on target object.")}function GSe(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function Vo(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Vo).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function vF(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const jSe=zs({__forward_ref__:zs});function Cn(t){return t.__forward_ref__=Cn,t.toString=function(){return Vo(this())},t}function Yn(t){return ST(t)?t():t}function ST(t){return"function"==typeof t&&t.hasOwnProperty(jSe)&&t.__forward_ref__===Cn}function Uf(t,n,e){t!=n&&function Bn(t,n,e,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${e} ${i} ${n} <=Actual]`))}(e,t,n,"==")}function ut(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function kn(t){return{providers:t.providers||[],imports:t.imports||[]}}function CT(t){return aH(t,ET)||aH(t,lH)}function aH(t,n){return t.hasOwnProperty(n)?t[n]:null}function xT(t){return t&&(t.hasOwnProperty(yF)||t.hasOwnProperty(YSe))?t[yF]:null}const ET=zs({\u0275prov:zs}),yF=zs({\u0275inj:zs}),lH=zs({ngInjectableDef:zs}),YSe=zs({ngInjectorDef:zs});class st{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ut({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function EF(t){return t&&!!t.\u0275providers}const g0=zs({\u0275cmp:zs}),TF=zs({\u0275dir:zs}),IF=zs({\u0275pipe:zs}),uH=zs({\u0275mod:zs}),Nh=zs({\u0275fac:zs}),b0=zs({__NG_ELEMENT_ID__:zs}),dH=zs({__NG_ENV_ID__:zs});function di(t){return"string"==typeof t?t:null==t?"":String(t)}function kF(t,n){throw new ot(-201,!1)}var Wi=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Wi||{});let DF;function hH(){return DF}function Ol(t){const n=DF;return DF=t,n}function fH(t,n,e){const i=CT(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&Wi.Optional?null:void 0!==n?n:void kF()}const v0={},MF="__NG_DI_FLAG__",TT="ngTempTokenPath",nCe=/\n/gm,pH="__source";let gb;function Gf(t){const n=gb;return gb=t,n}function rCe(t,n=Wi.Default){if(void 0===gb)throw new ot(-203,!1);return null===gb?fH(t,void 0,n):gb.get(t,n&Wi.Optional?null:void 0,n)}function Re(t,n=Wi.Default){return(hH()||rCe)(Yn(t),n)}function Je(t,n=Wi.Default){return Re(t,IT(n))}function IT(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function AF(t){const n=[];for(let e=0;e<t.length;e++){const i=Yn(t[e]);if(Array.isArray(i)){if(0===i.length)throw new ot(900,!1);let s,r=Wi.Default;for(let o=0;o<i.length;o++){const a=i[o],l=oCe(a);"number"==typeof l?-1===l?s=a.token:r|=l:s=a}n.push(Re(s,r))}else n.push(Re(i))}return n}function y0(t,n){return t[MF]=n,t.prototype[MF]=n,t}function oCe(t){return t[MF]}const _H=y0(_b("Inject",t=>({token:t})),-1),Id=y0(_b("Optional"),8),Rh=y0(_b("SkipSelf"),4);function $m(t,n){return t.hasOwnProperty(Nh)?t[Nh]:null}function bb(t,n){t.forEach(e=>Array.isArray(e)?bb(e,n):n(e))}function gH(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function kT(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function mc(t,n,e){let i=vb(t,n);return i>=0?t[1|i]=e:(i=~i,function bH(t,n,e,i){let s=t.length;if(s==n)t.push(e,i);else if(1===s)t.push(i,t[0]),t[0]=e;else{for(s--,t.push(t[s-1],t[s]);s>n;)t[s]=t[s-2],s--;t[n]=e,t[n+1]=i}}(t,i,n,e)),i}function NF(t,n){const e=vb(t,n);if(e>=0)return t[1|e]}function vb(t,n){return function vH(t,n,e){let i=0,s=t.length>>e;for(;s!==i;){const r=i+(s-i>>1),o=t[r<<e];if(n===o)return r<<e;o>n?s=r:i=r+1}return~(s<<e)}(t,n,1)}const kd={},_s=[],Lu=new st(""),yH=new st("",-1),RF=new st("");class MT{get(n,e=v0){if(e===v0){const i=new Error(`NullInjectorError: No provider for ${Vo(n)}!`);throw i.name="NullInjectorError",i}return e}}var AT=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(AT||{}),Pu=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Pu||{}),jf=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(jf||{});function hCe(t,n,e){let i=t.length;for(;;){const s=t.indexOf(n,e);if(-1===s)return s;if(0===s||t.charCodeAt(s-1)<=32){const r=n.length;if(s+r===i||t.charCodeAt(s+r)<=32)return s}e=s+1}}function FF(t,n,e){let i=0;for(;i<e.length;){const s=e[i];if("number"==typeof s){if(0!==s)break;i++;const r=e[i++],o=e[i++],a=e[i++];t.setAttribute(n,o,a,r)}else{const r=s,o=e[++i];SH(r)?t.setProperty(n,r,o):t.setAttribute(n,r,o),i++}}return i}function wH(t){return 3===t||4===t||6===t}function SH(t){return 64===t.charCodeAt(0)}function w0(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){const s=n[i];"number"==typeof s?e=s:0===e||CH(t,e,s,null,-1===e||2===e?n[++i]:null)}}return t}function CH(t,n,e,i,s){let r=0,o=t.length;if(-1===n)o=-1;else for(;r<t.length;){const a=t[r++];if("number"==typeof a){if(a===n){o=-1;break}if(a>n){o=r-1;break}}}for(;r<t.length;){const a=t[r];if("number"==typeof a)break;if(a===e){if(null===i)return void(null!==s&&(t[r+1]=s));if(i===t[r+1])return void(t[r+2]=s)}r++,null!==i&&r++,null!==s&&r++}-1!==o&&(t.splice(o,0,n),r=o+1),t.splice(r++,0,e),null!==i&&t.splice(r++,0,i),null!==s&&t.splice(r++,0,s)}const xH="ng-template";function fCe(t,n,e,i){let s=0;if(i){for(;s<n.length&&"string"==typeof n[s];s+=2)if("class"===n[s]&&-1!==hCe(n[s+1].toLowerCase(),e,0))return!0}else if(LF(t))return!1;if(s=n.indexOf(1,s),s>-1){let r;for(;++s<n.length&&"string"==typeof(r=n[s]);)if(r.toLowerCase()===e)return!0}return!1}function LF(t){return 4===t.type&&t.value!==xH}function pCe(t,n,e){return n===(4!==t.type||e?t.value:xH)}function mCe(t,n,e){let i=4;const s=t.attrs,r=null!==s?function bCe(t){for(let n=0;n<t.length;n++)if(wH(t[n]))return n;return t.length}(s):0;let o=!1;for(let a=0;a<n.length;a++){const l=n[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!pCe(t,l,e)||""===l&&1===n.length){if($u(i))return!1;o=!0}}else if(8&i){if(null===s||!fCe(t,s,l,e)){if($u(i))return!1;o=!0}}else{const c=n[++a],u=_Ce(l,s,LF(t),e);if(-1===u){if($u(i))return!1;o=!0;continue}if(""!==c){let d;if(d=u>r?"":s[u+1].toLowerCase(),2&i&&c!==d){if($u(i))return!1;o=!0}}}}else{if(!o&&!$u(i)&&!$u(l))return!1;if(o&&$u(l))continue;o=!1,i=l|1&i}}return $u(i)||o}function $u(t){return!(1&t)}function _Ce(t,n,e,i){if(null===n)return-1;let s=0;if(i||!e){let r=!1;for(;s<n.length;){const o=n[s];if(o===t)return s;if(3===o||6===o)r=!0;else{if(1===o||2===o){let a=n[++s];for(;"string"==typeof a;)a=n[++s];continue}if(4===o)break;if(0===o){s+=4;continue}}s+=r?1:2}return-1}return function vCe(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const i=t[e];if("number"==typeof i)return-1;if(i===n)return e;e++}return-1}(n,t)}function EH(t,n,e=!1){for(let i=0;i<n.length;i++)if(mCe(t,n[i],e))return!0;return!1}function yCe(t,n){e:for(let e=0;e<n.length;e++){const i=n[e];if(t.length===i.length){for(let s=0;s<t.length;s++)if(t[s]!==i[s])continue e;return!0}}return!1}function TH(t,n){return t?":not("+n.trim()+")":n}function wCe(t){let n=t[0],e=1,i=2,s="",r=!1;for(;e<t.length;){let o=t[e];if("string"==typeof o)if(2&i){const a=t[++e];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?s+="."+o:4&i&&(s+=" "+o);else""!==s&&!$u(o)&&(n+=TH(r,s),s=""),i=o,r=r||!$u(i);e++}return""!==s&&(n+=TH(r,s)),n}function Qe(t){return Oh(()=>{const n=kH(t),e={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===AT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Pu.Emulated,styles:t.styles||_s,_:null,schemas:t.schemas||null,tView:null,id:""};DH(e);const i=t.dependencies;return e.directiveDefs=OT(i,!1),e.pipeDefs=OT(i,!0),e.id=function ICe(t){let n=0;const e=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const s of e)n=Math.imul(31,n)+s.charCodeAt(0)|0;return n+=2147483648,"c"+n}(e),e})}function xCe(t){return zi(t)||zo(t)}function ECe(t){return null!==t}function Mn(t){return Oh(()=>({type:t.type,bootstrap:t.bootstrap||_s,declarations:t.declarations||_s,imports:t.imports||_s,exports:t.exports||_s,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function IH(t,n){if(null==t)return kd;const e={};for(const i in t)if(t.hasOwnProperty(i)){const s=t[i];let r,o,a=jf.None;Array.isArray(s)?(a=s[0],r=s[1],o=s[2]??r):(r=s,o=s),n?(e[r]=a!==jf.None?[i,a]:i,n[r]=o):e[r]=i}return e}function pt(t){return Oh(()=>{const n=kH(t);return DH(n),n})}function rr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function zi(t){return t[g0]||null}function zo(t){return t[TF]||null}function xa(t){return t[IF]||null}function Ua(t,n){const e=t[uH]||null;if(!e&&!0===n)throw new Error(`Type ${Vo(t)} does not have '\u0275mod' property.`);return e}function kH(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||kd,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||_s,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:IH(t.inputs,n),outputs:IH(t.outputs),debugInfo:null}}function DH(t){t.features?.forEach(n=>n(t))}function OT(t,n){if(!t)return null;const e=n?xa:xCe;return()=>("function"==typeof t?t():t).map(i=>e(i)).filter(ECe)}function yb(t){return{\u0275providers:t}}function kCe(...t){return{\u0275providers:PF(0,t),\u0275fromNgModule:!0}}function PF(t,...n){const e=[],i=new Set;let s;const r=o=>{e.push(o)};return bb(n,o=>{const a=o;NT(a,r,[],i)&&(s||=[],s.push(a))}),void 0!==s&&MH(s,r),e}function MH(t,n){for(let e=0;e<t.length;e++){const{ngModule:i,providers:s}=t[e];$F(s,r=>{n(r,i)})}}function NT(t,n,e,i){if(!(t=Yn(t)))return!1;let s=null,r=xT(t);const o=!r&&zi(t);if(r||o){if(o&&!o.standalone)return!1;s=t}else{const l=t.ngModule;if(r=xT(l),!r)return!1;s=l}const a=i.has(s);if(o){if(a)return!1;if(i.add(s),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)NT(c,n,e,i)}}else{if(!r)return!1;{if(null!=r.imports&&!a){let c;i.add(s);try{bb(r.imports,u=>{NT(u,n,e,i)&&(c||=[],c.push(u))})}finally{}void 0!==c&&MH(c,n)}if(!a){const c=$m(s)||(()=>new s);n({provide:s,useFactory:c,deps:_s},s),n({provide:RF,useValue:s,multi:!0},s),n({provide:Lu,useValue:()=>Re(s),multi:!0},s)}const l=r.providers;if(null!=l&&!a){const c=t;$F(l,u=>{n(u,c)})}}}return s!==t&&void 0!==t.providers}function $F(t,n){for(let e of t)EF(e)&&(e=e.\u0275providers),Array.isArray(e)?$F(e,n):n(e)}const DCe=zs({provide:String,useValue:zs});function BF(t){return null!==t&&"object"==typeof t&&DCe in t}function Bm(t){return"function"==typeof t}const VF=new st(""),RT={},ACe={};let zF;function FT(){return void 0===zF&&(zF=new MT),zF}class Ga{}class wb extends Ga{get destroyed(){return this._destroyed}constructor(n,e,i,s){super(),this.parent=e,this.source=i,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,GF(n,o=>this.processProvider(o)),this.records.set(yH,Sb(void 0,this)),s.has("environment")&&this.records.set(Ga,Sb(void 0,this));const r=this.records.get(VF);null!=r&&"string"==typeof r.value&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(RF,_s,Wi.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const n=Ae(null);try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ae(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const e=Gf(this),i=Ol(void 0);try{return n()}finally{Gf(e),Ol(i)}}get(n,e=v0,i=Wi.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(dH))return n[dH](this);i=IT(i);const r=Gf(this),o=Ol(void 0);try{if(!(i&Wi.SkipSelf)){let l=this.records.get(n);if(void 0===l){const c=function LCe(t){return"function"==typeof t||"object"==typeof t&&t instanceof st}(n)&&CT(n);l=c&&this.injectableDefInScope(c)?Sb(UF(n),RT):null,this.records.set(n,l)}if(null!=l)return this.hydrate(n,l)}return(i&Wi.Self?FT():this.parent).get(n,e=i&Wi.Optional&&e===v0?null:e)}catch(a){if("NullInjectorError"===a.name){if((a[TT]=a[TT]||[]).unshift(Vo(n)),r)throw a;return function aCe(t,n,e,i){const s=t[TT];throw n[pH]&&s.unshift(n[pH]),t.message=function lCe(t,n,e,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let s=Vo(n);if(Array.isArray(n))s=n.map(Vo).join(" -> ");else if("object"==typeof n){let r=[];for(let o in n)if(n.hasOwnProperty(o)){let a=n[o];r.push(o+":"+("string"==typeof a?JSON.stringify(a):Vo(a)))}s=`{${r.join(", ")}}`}return`${e}${i?"("+i+")":""}[${s}]: ${t.replace(nCe,"\n  ")}`}("\n"+t.message,s,e,i),t.ngTokenPath=s,t[TT]=null,t}(a,n,"R3InjectorError",this.source)}throw a}finally{Ol(o),Gf(r)}}resolveInjectorInitializers(){const n=Ae(null),e=Gf(this),i=Ol(void 0);try{const r=this.get(Lu,_s,Wi.Self);for(const o of r)o()}finally{Gf(e),Ol(i),Ae(n)}}toString(){const n=[],e=this.records;for(const i of e.keys())n.push(Vo(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ot(205,!1)}processProvider(n){let e=Bm(n=Yn(n))?n:Yn(n&&n.provide);const i=function NCe(t){return BF(t)?Sb(void 0,t.useValue):Sb(NH(t),RT)}(n);if(!Bm(n)&&!0===n.multi){let s=this.records.get(e);s||(s=Sb(void 0,RT,!0),s.factory=()=>AF(s.multi),this.records.set(e,s)),e=n,s.multi.push(n)}this.records.set(e,i)}hydrate(n,e){const i=Ae(null);try{return e.value===RT&&(e.value=ACe,e.value=e.factory()),"object"==typeof e.value&&e.value&&function FCe(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{Ae(i)}}injectableDefInScope(n){if(!n.providedIn)return!1;const e=Yn(n.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){const e=this._onDestroyHooks.indexOf(n);-1!==e&&this._onDestroyHooks.splice(e,1)}}function UF(t){const n=CT(t),e=null!==n?n.factory:$m(t);if(null!==e)return e;if(t instanceof st)throw new ot(204,!1);if(t instanceof Function)return function OCe(t){if(t.length>0)throw new ot(204,!1);const e=function XSe(t){return t&&(t[ET]||t[lH])||null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new ot(204,!1)}function NH(t,n,e){let i;if(Bm(t)){const s=Yn(t);return $m(s)||UF(s)}if(BF(t))i=()=>Yn(t.useValue);else if(function OH(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...AF(t.deps||[]));else if(function AH(t){return!(!t||!t.useExisting)}(t))i=()=>Re(Yn(t.useExisting));else{const s=Yn(t&&(t.useClass||t.provide));if(!function RCe(t){return!!t.deps}(t))return $m(s)||UF(s);i=()=>new s(...AF(t.deps))}return i}function Sb(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function GF(t,n){for(const e of t)Array.isArray(e)?GF(e,n):e&&EF(e)?GF(e.\u0275providers,n):n(e)}function Bu(t,n){t instanceof wb&&t.assertNotDestroyed();const i=Gf(t),s=Ol(void 0);try{return n()}finally{Gf(i),Ol(s)}}function RH(){return void 0!==hH()||null!=function sCe(){return gb}()}function LT(t){if(!RH())throw new ot(-203,!1)}const Ir=0,Vt=1,An=2,_o=3,Vu=4,Ea=5,rl=6,xb=7,fr=8,go=9,Dd=10,Jn=11,C0=12,LH=13,Eb=14,kr=15,Vm=16,Tb=17,Fh=18,Ib=19,PH=20,Wf=21,$T=22,Kc=23,wn=25,HF=1,Md=7,kb=9,to=10;var VT=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(VT||{});function sa(t){return Array.isArray(t)&&"object"==typeof t[HF]}function ja(t){return Array.isArray(t)&&!0===t[HF]}function WF(t){return!!(4&t.flags)}function zm(t){return t.componentOffset>-1}function zT(t){return!(1&~t.flags)}function zu(t){return!!t.template}function E0(t){return!!(512&t[An])}class XCe{constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function zH(t,n,e,i){null!==n?n.applyValueToInputSignal(n,i):t[e]=i}function On(){return UH}function UH(t){return t.type.prototype.ngOnChanges&&(t.setInput=ZCe),YCe}function YCe(){const t=jH(this),n=t?.current;if(n){const e=t.previous;if(e===kd)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function ZCe(t,n,e,i,s){const r=this.declaredInputs[i],o=jH(t)||function QCe(t,n){return t[GH]=n}(t,{previous:kd,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[r];a[r]=new XCe(c&&c.currentValue,e,l===kd),zH(t,n,s,e)}On.ngInherit=!0;const GH="__ngSimpleChanges__";function jH(t){return t[GH]||null}const Ad=function(t,n,e){},HH="svg";function gs(t){for(;Array.isArray(t);)t=t[Ir];return t}function T0(t,n){return gs(n[t])}function ol(t,n){return gs(n[t.index])}function I0(t,n){return t.data[n]}function Um(t,n){return t[n]}function _c(t,n){const e=n[t];return sa(e)?e:e[Ir]}function ZF(t){return!(128&~t[An])}function Xc(t,n){return null==n?null:t[n]}function qH(t){t[Tb]=0}function KH(t){1024&t[An]||(t[An]|=1024,ZF(t)&&UT(t))}function k0(t){return!!(9216&t[An]||t[Kc]?.dirty)}function QF(t){t[Dd].changeDetectionScheduler?.notify(7),64&t[An]&&(t[An]|=1024),k0(t)&&UT(t)}function UT(t){t[Dd].changeDetectionScheduler?.notify(0);let n=Lh(t);for(;null!==n&&!(8192&n[An])&&(n[An]|=8192,ZF(n));)n=Lh(n)}function GT(t,n){if(!(256&~t[An]))throw new ot(911,!1);null===t[Wf]&&(t[Wf]=[]),t[Wf].push(n)}function Lh(t){const n=t[_o];return ja(n)?n[_o]:n}const ei={lFrame:aW(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let YH=!1;function ZH(){return ei.bindingsEnabled}function Gm(){return null!==ei.skipHydrationRootTNode}function ft(){return ei.lFrame.lView}function Oi(){return ei.lFrame.tView}function re(t){return ei.lFrame.contextLView=t,t[fr]}function oe(t){return ei.lFrame.contextLView=null,t}function Us(){let t=QH();for(;null!==t&&64===t.type;)t=t.parent;return t}function QH(){return ei.lFrame.currentTNode}function D0(){const t=ei.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function Uu(t,n){const e=ei.lFrame;e.currentTNode=t,e.isParent=n}function tL(){return ei.lFrame.isParent}function nL(){ei.lFrame.isParent=!1}function tW(){return YH}function nW(t){YH=t}function al(){const t=ei.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function Ph(){return ei.lFrame.bindingIndex}function Gu(){return ei.lFrame.bindingIndex++}function $h(t){const n=ei.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function sW(t){ei.lFrame.inI18n=t}function hxe(t,n){const e=ei.lFrame;e.bindingIndex=e.bindingRootIndex=t,iL(n)}function iL(t){ei.lFrame.currentDirectiveIndex=t}function sL(t){const n=ei.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}function rL(){return ei.lFrame.currentQueryIndex}function HT(t){ei.lFrame.currentQueryIndex=t}function pxe(t){const n=t[Vt];return 2===n.type?n.declTNode:1===n.type?t[Ea]:null}function rW(t,n,e){if(e&Wi.SkipSelf){let s=n,r=t;for(;!(s=s.parent,null!==s||e&Wi.Host||(s=pxe(r),null===s||(r=r[Eb],10&s.type))););if(null===s)return!1;n=s,t=r}const i=ei.lFrame=oW();return i.currentTNode=n,i.lView=t,!0}function oL(t){const n=oW(),e=t[Vt];ei.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function oW(){const t=ei.lFrame,n=null===t?null:t.child;return null===n?aW(t):n}function aW(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function lW(){const t=ei.lFrame;return ei.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const cW=lW;function aL(){const t=lW();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ta(){return ei.lFrame.selectedIndex}function jm(t){ei.lFrame.selectedIndex=t}function pr(){const t=ei.lFrame;return I0(t.tView,t.selectedIndex)}function ra(){ei.lFrame.currentNamespace=HH}function qf(){!function gxe(){ei.lFrame.currentNamespace=null}()}let dW=!0;function M0(){return dW}function Od(t){dW=t}function WT(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){const r=t.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=r;o&&(t.contentHooks??=[]).push(-e,o),a&&((t.contentHooks??=[]).push(e,a),(t.contentCheckHooks??=[]).push(e,a)),l&&(t.viewHooks??=[]).push(-e,l),c&&((t.viewHooks??=[]).push(e,c),(t.viewCheckHooks??=[]).push(e,c)),null!=u&&(t.destroyHooks??=[]).push(e,u)}}function qT(t,n,e){hW(t,n,3,e)}function KT(t,n,e,i){(3&t[An])===e&&hW(t,n,e,i)}function lL(t,n){let e=t[An];(3&e)===n&&(e&=16383,e+=1,t[An]=e)}function hW(t,n,e,i){const r=i??-1,o=n.length-1;let a=0;for(let l=void 0!==i?65535&t[Tb]:0;l<o;l++)if("number"==typeof n[l+1]){if(a=n[l],null!=i&&a>=i)break}else n[l]<0&&(t[Tb]+=65536),(a<r||-1==r)&&(vxe(t,e,n,l),t[Tb]=(4294901760&t[Tb])+l+2),l++}function fW(t,n){Ad(4,t,n);const e=Ae(null);try{n.call(t)}finally{Ae(e),Ad(5,t,n)}}function vxe(t,n,e,i){const s=e[i]<0,r=e[i+1],a=t[s?-e[i]:e[i]];s?t[An]>>14<t[Tb]>>16&&(3&t[An])===n&&(t[An]+=16384,fW(a,r)):fW(a,r)}const Db=-1;class A0{constructor(n,e,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}const uL={};class Hm{constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,i){i=IT(i);const s=this.injector.get(n,uL,i);return s!==uL||e===uL?s:this.parentInjector.get(n,e,i)}}function dL(t){return t!==Db}function O0(t){return 32767&t}function N0(t,n){let e=function Cxe(t){return t>>16}(t),i=n;for(;e>0;)i=i[Eb],e--;return i}let hL=!0;function XT(t){const n=hL;return hL=t,n}const mW=255,_W=5;let Exe=0;const Nd={};function YT(t,n){const e=gW(t,n);if(-1!==e)return e;const i=n[Vt];i.firstCreatePass&&(t.injectorIndex=n.length,fL(i.data,t),fL(n,null),fL(i.blueprint,null));const s=ZT(t,n),r=t.injectorIndex;if(dL(s)){const o=O0(s),a=N0(s,n),l=a[Vt].data;for(let c=0;c<8;c++)n[r+c]=a[o+c]|l[o+c]}return n[r+8]=s,r}function fL(t,n){t.push(0,0,0,0,0,0,0,0,n)}function gW(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function ZT(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,i=null,s=n;for(;null!==s;){if(i=xW(s),null===i)return Db;if(e++,s=s[Eb],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return Db}function pL(t,n,e){!function Txe(t,n,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(b0)&&(i=e[b0]),null==i&&(i=e[b0]=Exe++);const s=i&mW;n.data[t+(s>>_W)]|=1<<s}(t,n,e)}function bW(t,n,e){if(e&Wi.Optional||void 0!==t)return t;kF()}function vW(t,n,e,i){if(e&Wi.Optional&&void 0===i&&(i=null),!(e&(Wi.Self|Wi.Host))){const s=t[go],r=Ol(void 0);try{return s?s.get(n,i,e&Wi.Optional):fH(n,i,e&Wi.Optional)}finally{Ol(r)}}return bW(i,0,e)}function yW(t,n,e,i=Wi.Default,s){if(null!==t){if(2048&n[An]&&!(i&Wi.Self)){const o=function Axe(t,n,e,i,s){let r=t,o=n;for(;null!==r&&null!==o&&2048&o[An]&&!(512&o[An]);){const a=wW(r,o,e,i|Wi.Self,Nd);if(a!==Nd)return a;let l=r.parent;if(!l){const c=o[PH];if(c){const u=c.get(e,Nd,i);if(u!==Nd)return u}l=xW(o),o=o[Eb]}r=l}return s}(t,n,e,i,Nd);if(o!==Nd)return o}const r=wW(t,n,e,i,Nd);if(r!==Nd)return r}return vW(n,e,i,s)}function wW(t,n,e,i,s){const r=function Dxe(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(b0)?t[b0]:void 0;return"number"==typeof n?n>=0?n&mW:Mxe:n}(e);if("function"==typeof r){if(!rW(n,t,i))return i&Wi.Host?bW(s,0,i):vW(n,e,i,s);try{let o;if(o=r(i),null!=o||i&Wi.Optional)return o;kF()}finally{cW()}}else if("number"==typeof r){let o=null,a=gW(t,n),l=Db,c=i&Wi.Host?n[kr][Ea]:null;for((-1===a||i&Wi.SkipSelf)&&(l=-1===a?ZT(t,n):n[a+8],l!==Db&&CW(i,!1)?(o=n[Vt],a=O0(l),n=N0(l,n)):a=-1);-1!==a;){const u=n[Vt];if(SW(r,a,u.data)){const d=kxe(a,n,e,o,i,c);if(d!==Nd)return d}l=n[a+8],l!==Db&&CW(i,n[Vt].data[a+8]===c)&&SW(r,a,n)?(o=u,a=O0(l),n=N0(l,n)):a=-1}}return s}function kxe(t,n,e,i,s,r){const o=n[Vt],a=o.data[t+8],u=QT(a,o,e,null==i?zm(a)&&hL:i!=o&&!!(3&a.type),s&Wi.Host&&r===a);return null!==u?Wm(n,o,u,a):Nd}function QT(t,n,e,i,s){const r=t.providerIndexes,o=n.data,a=1048575&r,l=t.directiveStart,u=r>>20,h=s?a+u:t.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=o[f];if(f<l&&e===p||f>=l&&p.type===e)return f}if(s){const f=o[l];if(f&&zu(f)&&f.type===e)return l}return null}function Wm(t,n,e,i){let s=t[e];const r=n.data;if(function yxe(t){return t instanceof A0}(s)){const o=s;o.resolving&&function JSe(t,n){throw n&&n.join(" > "),new ot(-200,t)}(function Es(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():di(t)}(r[e]));const a=XT(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Ol(o.injectImpl):null;rW(t,i,Wi.Default);try{s=t[e]=o.factory(void 0,r,t,i),n.firstCreatePass&&e>=i.directiveStart&&function bxe(t,n,e){const{ngOnChanges:i,ngOnInit:s,ngDoCheck:r}=n.type.prototype;if(i){const o=UH(n);(e.preOrderHooks??=[]).push(t,o),(e.preOrderCheckHooks??=[]).push(t,o)}s&&(e.preOrderHooks??=[]).push(0-t,s),r&&((e.preOrderHooks??=[]).push(t,r),(e.preOrderCheckHooks??=[]).push(t,r))}(e,r[e],n)}finally{null!==c&&Ol(c),XT(a),o.resolving=!1,cW()}}return s}function SW(t,n,e){return!!(e[n+(t>>_W)]&1<<t)}function CW(t,n){return!(t&Wi.Self||t&Wi.Host&&n)}class Go{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return yW(this._tNode,this._lView,n,IT(i),e)}}function Mxe(){return new Go(Us(),ft())}function Pn(t){return Oh(()=>{const n=t.prototype.constructor,e=n[Nh]||mL(n),i=Object.prototype;let s=Object.getPrototypeOf(t.prototype).constructor;for(;s&&s!==i;){const r=s[Nh]||mL(s);if(r&&r!==e)return r;s=Object.getPrototypeOf(s)}return r=>new r})}function mL(t){return ST(t)?()=>{const n=mL(Yn(t));return n&&n()}:$m(t)}function xW(t){const n=t[Vt],e=n.type;return 2===e?n.declTNode:1===e?t[Ea]:null}function ll(t){return function Ixe(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const i=e.length;let s=0;for(;s<i;){const r=e[s];if(wH(r))break;if(0===r)s+=2;else if("number"==typeof r)for(s++;s<i&&"string"==typeof e[s];)s++;else{if(r===n)return e[s+1];s+=2}}}return null}(Us(),t)}function DW(t,n=null,e=null,i){const s=MW(t,n,e,i);return s.resolveInjectorInitializers(),s}function MW(t,n=null,e=null,i,s=new Set){const r=[e||_s,kCe(t)];return i=i||("object"==typeof t?void 0:Vo(t)),new wb(r,n||FT(),i||null,s)}class ti{static#e=this.THROW_IF_NOT_FOUND=v0;static#t=this.NULL=new MT;static create(n,e){if(Array.isArray(n))return DW({name:""},e,n,"");{const i=n.name??"";return DW({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=ut({token:ti,providedIn:"any",factory:()=>Re(yH)});static#i=this.__NG_ELEMENT_ID__=-1}new st("").__NG_ELEMENT_ID__=t=>{const n=Us();if(null===n)throw new ot(204,!1);if(2&n.type)return n.value;if(t&Wi.Optional)return null;throw new ot(204,!1)};function gL(t){return t.ngOriginalError}class gc{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&gL(n);for(;e&&gL(e);)e=gL(e);return e||null}}const OW=new st("",{providedIn:"root",factory:()=>Je(gc).handleError.bind(void 0)});let R0=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=zxe;static#t=this.__NG_ENV_ID__=e=>e}return t})();class Vxe extends R0{constructor(n){super(),this._lView=n}onDestroy(n){return GT(this._lView,n),()=>function JF(t,n){if(null===t[Wf])return;const e=t[Wf].indexOf(n);-1!==e&&t[Wf].splice(e,1)}(this._lView,n)}}function zxe(){return new Vxe(ft())}function Uxe(){return Ob(Us(),ft())}function Ob(t,n){return new Bt(ol(t,n))}let Bt=(()=>{class t{constructor(e){this.nativeElement=e}static#e=this.__NG_ELEMENT_ID__=Uxe}return t})();function RW(t){return t instanceof Bt?t.nativeElement:t}let Bh=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Mt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new t})}return t})();const it=class Gxe extends Pt{constructor(n=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=n,RH()&&(this.destroyRef=Je(R0,{optional:!0})??void 0,this.pendingTasks=Je(Bh,{optional:!0})??void 0)}emit(n){const e=Ae(null);try{super.next(n)}finally{Ae(e)}}subscribe(n,e,i){let s=n,r=e||(()=>null),o=i;if(n&&"object"==typeof n){const l=n;s=l.next?.bind(l),r=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(r=this.wrapInTimeout(r),s&&(s=this.wrapInTimeout(s)),o&&(o=this.wrapInTimeout(o)));const a=super.subscribe({next:s,error:r,complete:o});return n instanceof Tn&&n.add(a),a}wrapInTimeout(n){return e=>{const i=this.pendingTasks?.add();setTimeout(()=>{n(e),void 0!==i&&this.pendingTasks?.remove(i)})}}};function jxe(){return this._results[Symbol.iterator]()}class qm{static#e=Symbol.iterator;get changes(){return this._changes??=new it}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const e=qm.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=jxe)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){this.dirty=!1;const i=function Nl(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function dCe(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let s=t[i],r=n[i];if(e&&(s=e(s),r=e(r)),r!==s)return!1}return!0}(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function e2(t){return!(128&~t.flags)}const bL=new Map;let Wxe=0;const n2="__ngContext__";function Ha(t,n){sa(n)?(t[n2]=n[Ib],function Kxe(t){bL.set(t[Ib],t)}(n)):t[n2]=n}function jW(t){return WW(t[C0])}function HW(t){return WW(t[Vu])}function WW(t){for(;null!==t&&!ja(t);)t=t[Vu];return t}let yL;function Kf(){if(void 0!==yL)return yL;if(typeof document<"u")return document;throw new ot(210,!1)}const Km=new st("",{providedIn:"root",factory:()=>hEe}),hEe="ng",eq=new st(""),ju=new st("",{providedIn:"platform",factory:()=>"unknown"}),jo=new st(""),wL=new st("",{providedIn:"root",factory:()=>Kf().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let tq=()=>null;function kL(t,n,e=!1){return tq(t,n,e)}const cq=new st("",{providedIn:"root",factory:()=>!1});let h2,f2;function Lb(t){return function NL(){if(void 0===h2&&(h2=null,sr.trustedTypes))try{h2=sr.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return h2}()?.createHTML(t)||t}function hq(t){return function RL(){if(void 0===f2&&(f2=null,sr.trustedTypes))try{f2=sr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return f2}()?.createHTML(t)||t}class Xm{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${iH})`}}class TEe extends Xm{getTypeName(){return"HTML"}}class IEe extends Xm{getTypeName(){return"Style"}}class kEe extends Xm{getTypeName(){return"Script"}}class DEe extends Xm{getTypeName(){return"URL"}}class MEe extends Xm{getTypeName(){return"ResourceURL"}}function bc(t){return t instanceof Xm?t.changingThisBreaksApplicationSecurity:t}function Rd(t,n){const e=function AEe(t){return t instanceof Xm&&t.getTypeName()||null}(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${iH})`)}return e===n}function mq(t){const n=new $Ee(t);return function BEe(){try{return!!(new window.DOMParser).parseFromString(Lb(""),"text/html")}catch{return!1}}()?new PEe(n):n}class PEe{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(Lb(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch{return null}}}class $Ee{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const e=this.inertDocument.createElement("template");return e.innerHTML=Lb(n),e}}const VEe=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function p2(t){return(t=String(t)).match(VEe)?t:"unsafe:"+t}function Vh(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function U0(...t){const n={};for(const e of t)for(const i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}const _q=Vh("area,br,col,hr,img,wbr"),gq=Vh("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),bq=Vh("rp,rt"),FL=U0(_q,U0(gq,Vh("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),U0(bq,Vh("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),U0(bq,gq)),LL=Vh("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),vq=U0(LL,Vh("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Vh("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),zEe=Vh("script,style,template");class UEe{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,i=!0,s=[];for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)s.push(e),e=HEe(e);else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=jEe(e);if(r){e=r;break}e=s.pop()}return this.buf.join("")}startElement(n){const e=yq(n).toLowerCase();if(!FL.hasOwnProperty(e))return this.sanitizedSomething=!0,!zEe.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=n.attributes;for(let s=0;s<i.length;s++){const r=i.item(s),o=r.name,a=o.toLowerCase();if(!vq.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=r.value;LL[a]&&(l=p2(l)),this.buf.push(" ",o,'="',Sq(l),'"')}return this.buf.push(">"),!0}endElement(n){const e=yq(n).toLowerCase();FL.hasOwnProperty(e)&&!_q.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(Sq(n))}}function jEe(t){const n=t.nextSibling;if(n&&t!==n.previousSibling)throw wq(n);return n}function HEe(t){const n=t.firstChild;if(n&&function GEe(t,n){return(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(t,n))throw wq(n);return n}function yq(t){const n=t.nodeName;return"string"==typeof n?n:"FORM"}function wq(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}const WEe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,qEe=/([^\#-~ |!])/g;function Sq(t){return t.replace(/&/g,"&amp;").replace(WEe,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(qEe,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let m2;function Cq(t,n){let e=null;try{m2=m2||mq(t);let i=n?String(n):"";e=m2.getInertBodyElement(i);let s=5,r=i;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,i=r,r=e.innerHTML,e=m2.getInertBodyElement(i)}while(i!==r);return Lb((new UEe).sanitizeChildren(PL(e)||e))}finally{if(e){const i=PL(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function PL(t){return"content"in t&&function KEe(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Yc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Yc||{});function Zc(t){const n=G0();return n?hq(n.sanitize(Yc.HTML,t)||""):Rd(t,"HTML")?hq(bc(t)):Cq(Kf(),di(t))}function Ia(t){const n=G0();return n?n.sanitize(Yc.URL,t)||"":Rd(t,"URL")?bc(t):p2(di(t))}function G0(){const t=ft();return t&&t[Dd].sanitizer}const eTe=/^>|^->|<!--|-->|--!>|<!-$/g,tTe=/(<|>)/g,nTe="\u200b$1\u200b";function vc(t){return t.ownerDocument.defaultView}function yc(t){return t instanceof Function?t():t}function Fl(t){return"browser"===(t??Je(ti)).get(ju)}var Xf=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Xf||{});let zL;function UL(t,n){return zL(t,n)}function $b(t,n,e,i,s){if(null!=i){let r,o=!1;ja(i)?r=i:sa(i)&&(o=!0,i=i[Ir]);const a=gs(i);0===t&&null!==e?null==s?$q(n,e,a):Ym(n,e,a,s||null,!0):1===t&&null!==e?Ym(n,e,a,s||null,!0):2===t?H0(n,a,o):3===t&&n.destroyNode(a),null!=r&&function wTe(t,n,e,i,s){const r=e[Md];r!==gs(e)&&$b(n,t,i,r,s);for(let a=to;a<e.length;a++){const l=e[a];S2(l[Vt],l,t,n,i,r)}}(n,t,r,e,s)}}function GL(t,n){return t.createText(n)}function Rq(t,n,e){t.setValue(n,e)}function jL(t,n){return t.createComment(function Tq(t){return t.replace(eTe,n=>n.replace(tTe,nTe))}(n))}function b2(t,n,e){return t.createElement(n,e)}function Fq(t,n){n[Dd].changeDetectionScheduler?.notify(8),S2(t,n,n[Jn],2,null,null)}function Lq(t,n){const e=t[kb],i=n[_o];(sa(i)||n[kr]!==i[_o][kr])&&(t[An]|=VT.HasTransplantedViews),null===e?t[kb]=[n]:e.push(n)}function HL(t,n){const e=t[kb],i=e.indexOf(n);e.splice(i,1)}function j0(t,n){if(t.length<=to)return;const e=to+n,i=t[e];if(i){const s=i[Vm];null!==s&&s!==t&&HL(s,i),n>0&&(t[e-1][Vu]=i[Vu]);const r=kT(t,to+n);!function hTe(t,n){Fq(t,n),n[Ir]=null,n[Ea]=null}(i[Vt],i);const o=r[Fh];null!==o&&o.detachView(r[Vt]),i[_o]=null,i[Vu]=null,i[An]&=-129}return i}function v2(t,n){if(!(256&n[An])){const e=n[Jn];e.destroyNode&&S2(t,n,e,3,null,null),function pTe(t){let n=t[C0];if(!n)return WL(t[Vt],t);for(;n;){let e=null;if(sa(n))e=n[C0];else{const i=n[to];i&&(e=i)}if(!e){for(;n&&!n[Vu]&&n!==t;)sa(n)&&WL(n[Vt],n),n=n[_o];null===n&&(n=t),sa(n)&&WL(n[Vt],n),e=n&&n[Vu]}n=e}}(n)}}function WL(t,n){if(256&n[An])return;const e=Ae(null);try{n[An]&=-129,n[An]|=256,n[Kc]&&ci(n[Kc]),function gTe(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let i=0;i<e.length;i+=2){const s=n[e[i]];if(!(s instanceof A0)){const r=e[i+1];if(Array.isArray(r))for(let o=0;o<r.length;o+=2){const a=s[r[o]],l=r[o+1];Ad(4,a,l);try{l.call(a)}finally{Ad(5,a,l)}}else{Ad(4,s,r);try{r.call(s)}finally{Ad(5,s,r)}}}}}(t,n),function _Te(t,n){const e=t.cleanup,i=n[xb];if(null!==e)for(let r=0;r<e.length-1;r+=2)if("string"==typeof e[r]){const o=e[r+3];o>=0?i[o]():i[-o].unsubscribe(),r+=2}else e[r].call(i[e[r+1]]);null!==i&&(n[xb]=null);const s=n[Wf];if(null!==s){n[Wf]=null;for(let r=0;r<s.length;r++)(0,s[r])()}}(t,n),1===n[Vt].type&&n[Jn].destroy();const i=n[Vm];if(null!==i&&ja(n[_o])){i!==n[_o]&&HL(i,n);const s=n[Fh];null!==s&&s.detachView(t)}!function Xxe(t){bL.delete(t[Ib])}(n)}finally{Ae(e)}}function qL(t,n,e){return Pq(t,n.parent,e)}function Pq(t,n,e){let i=n;for(;null!==i&&168&i.type;)i=(n=i).parent;if(null===i)return e[Ir];{const{componentOffset:s}=i;if(s>-1){const{encapsulation:r}=t.data[i.directiveStart+s];if(r===Pu.None||r===Pu.Emulated)return null}return ol(i,e)}}function Ym(t,n,e,i,s){t.insertBefore(n,e,i,s)}function $q(t,n,e){t.appendChild(n,e)}function Bq(t,n,e,i,s){null!==i?Ym(t,n,e,i,s):$q(t,n,e)}function y2(t,n){return t.parentNode(n)}function Vq(t,n,e){return Uq(t,n,e)}function zq(t,n,e){return 40&t.type?ol(t,e):null}let KL,Uq=zq;function Gq(t,n){Uq=t,KL=n}function w2(t,n,e,i){const s=qL(t,i,n),r=n[Jn],a=Vq(i.parent||n[Ea],i,n);if(null!=s)if(Array.isArray(e))for(let l=0;l<e.length;l++)Bq(r,s,e[l],a,!1);else Bq(r,s,e,a,!1);void 0!==KL&&KL(r,i,n,e,s)}function Bb(t,n){if(null!==n){const e=n.type;if(3&e)return ol(n,t);if(4&e)return XL(-1,t[n.index]);if(8&e){const i=n.child;if(null!==i)return Bb(t,i);{const s=t[n.index];return ja(s)?XL(-1,s):gs(s)}}if(32&e)return UL(n,t)()||gs(t[n.index]);{const i=jq(t,n);return null!==i?Array.isArray(i)?i[0]:Bb(Lh(t[kr]),i):Bb(t,n.next)}}return null}function jq(t,n){return null!==n?t[kr][Ea].projection[n.projection]:null}function XL(t,n){const e=to+t+1;if(e<n.length){const i=n[e],s=i[Vt].firstChild;if(null!==s)return Bb(i,s)}return n[Md]}function H0(t,n,e){const i=y2(t,n);i&&function bTe(t,n,e,i){t.removeChild(n,e,i)}(t,i,n,e)}function YL(t,n,e,i,s,r,o){for(;null!=e;){if(128===e.type){e=e.next;continue}const a=i[e.index],l=e.type;if(o&&0===n&&(a&&Ha(gs(a),i),e.flags|=2),32&~e.flags)if(8&l)YL(t,n,e.child,i,s,r,!1),$b(n,t,s,a,r);else if(32&l){const c=UL(e,i);let u;for(;u=c();)$b(n,t,s,u,r);$b(n,t,s,a,r)}else 16&l?Wq(t,n,i,e,s,r):$b(n,t,s,a,r);e=o?e.projectionNext:e.next}}function S2(t,n,e,i,s,r){YL(e,i,t.firstChild,n,s,r,!1)}function Wq(t,n,e,i,s,r){const o=e[kr],l=o[Ea].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)$b(n,t,s,l[c],r);else{let c=l;const u=o[_o];e2(i)&&(c.flags|=128),YL(t,n,c,u,s,r,!0)}}function qq(t,n,e){""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function Kq(t,n,e){const{mergedAttrs:i,classes:s,styles:r}=e;null!==i&&FF(t,n,i),null!==s&&qq(t,n,s),null!==r&&function CTe(t,n,e){t.setAttribute(n,"style",e)}(t,n,r)}const hi={};function b(t=1){Xq(Oi(),ft(),Ta()+t,!1)}function Xq(t,n,e,i){if(!i)if(3&~n[An]){const r=t.preOrderHooks;null!==r&&KT(n,r,0,e)}else{const r=t.preOrderCheckHooks;null!==r&&qT(n,r,e)}jm(e)}function D(t,n=Wi.Default){const e=ft();return null===e?Re(t,n):yW(Us(),e,Yn(t),n)}function W0(){throw new Error("invalid")}function Yq(t,n,e,i,s,r){const o=Ae(null);try{let a=null;s&jf.SignalBased&&(a=n[i][dt]),null!==a&&void 0!==a.transformFn&&(r=a.transformFn(r)),s&jf.HasDecoratorInputTransform&&(r=t.inputTransforms[i].call(n,r)),null!==t.setInput?t.setInput(n,a,r,e,i):zH(n,a,i,r)}finally{Ae(o)}}function C2(t,n,e,i,s,r,o,a,l,c,u){const d=n.blueprint.slice();return d[Ir]=s,d[An]=204|i,(null!==c||t&&2048&t[An])&&(d[An]|=2048),qH(d),d[_o]=d[Eb]=t,d[fr]=e,d[Dd]=o||t&&t[Dd],d[Jn]=a||t&&t[Jn],d[go]=l||t&&t[go]||null,d[Ea]=r,d[Ib]=function qxe(){return Wxe++}(),d[rl]=u,d[PH]=c,d[kr]=2==n.type?t[kr]:d,d}function Zm(t,n,e,i,s){let r=t.data[n];if(null===r)r=ZL(t,n,e,i,s),function dxe(){return ei.lFrame.inI18n}()&&(r.flags|=32);else if(64&r.type){r.type=e,r.value=i,r.attrs=s;const o=D0();r.injectorIndex=null===o?-1:o.injectorIndex}return Uu(r,!0),r}function ZL(t,n,e,i,s){const r=QH(),o=tL(),l=t.data[n]=function ATe(t,n,e,i,s,r){let o=n?n.injectorIndex:-1,a=0;return Gm()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:s,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?r:r&&r.parent,e,n,i,s);return null===t.firstChild&&(t.firstChild=l),null!==r&&(o?null==r.child&&null!==l.parent&&(r.child=l):null===r.next&&(r.next=l,l.prev=r)),l}function q0(t,n,e,i){if(0===e)return-1;const s=n.length;for(let r=0;r<e;r++)n.push(i),t.blueprint.push(i),t.data.push(null);return s}function Zq(t,n,e,i,s){const r=Ta(),o=2&i;try{jm(-1),o&&n.length>wn&&Xq(t,n,wn,!1),Ad(o?2:0,s),e(i,s)}finally{jm(r),Ad(o?3:1,s)}}function QL(t,n,e){if(WF(n)){const i=Ae(null);try{const r=n.directiveEnd;for(let o=n.directiveStart;o<r;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,e[o],o)}}finally{Ae(i)}}}function JL(t,n,e){ZH()&&(function $Te(t,n,e,i){const s=e.directiveStart,r=e.directiveEnd;zm(e)&&function HTe(t,n,e){const i=ol(n,t),s=Qq(e);let o=16;e.signals?o=4096:e.onPush&&(o=64);const a=x2(t,C2(t,s,null,o,i,n,null,t[Dd].rendererFactory.createRenderer(i,e),null,null,null));t[n.index]=a}(n,e,t.data[s+e.componentOffset]),t.firstCreatePass||YT(e,n),Ha(i,n);const o=e.initialInputs;for(let a=s;a<r;a++){const l=t.data[a],c=Wm(n,t,a,e);Ha(c,n),null!==o&&WTe(0,a-s,c,l,0,o),zu(l)&&(_c(e.index,n)[fr]=Wm(n,t,a,e))}}(t,n,e,ol(e,n)),!(64&~e.flags)&&iK(t,n,e))}function e3(t,n,e=ol){const i=n.localNames;if(null!==i){let s=n.index+1;for(let r=0;r<i.length;r+=2){const o=i[r+1],a=-1===o?e(n,t):t[o];t[s++]=a}}}function Qq(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=t3(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function t3(t,n,e,i,s,r,o,a,l,c,u){const d=wn+i,h=d+s,f=function ETe(t,n){const e=[];for(let i=0;i<n;i++)e.push(i<t?null:hi);return e}(d,h),p="function"==typeof c?c():c;return f[Vt]={type:t,blueprint:f,template:e,queries:null,viewQuery:a,declTNode:n,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof r?r():r,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}let Jq=()=>null;function eK(t,n,e,i,s){for(let r in n){if(!n.hasOwnProperty(r))continue;const o=n[r];if(void 0===o)continue;i??={};let a,l=jf.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=r;if(null!==s){if(!s.hasOwnProperty(r))continue;c=s[r]}0===t?tK(i,e,c,a,l):tK(i,e,c,a)}return i}function tK(t,n,e,i,s){let r;t.hasOwnProperty(e)?(r=t[e]).push(n,i):r=t[e]=[n,i],void 0!==s&&r.push(s)}function Ll(t,n,e,i,s,r,o,a){const l=ol(n,e);let u,c=n.inputs;!a&&null!=c&&(u=c[i])?(a3(t,e,u,i,s),zm(n)&&function RTe(t,n){const e=_c(n,t);16&e[An]||(e[An]|=64)}(e,n.index)):3&n.type&&(i=function NTe(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),s=null!=o?o(s,n.value||"",i):s,r.setProperty(l,i,s))}function n3(t,n,e,i){if(ZH()){const s=null===i?null:{"":-1},r=function VTe(t,n){const e=t.directiveRegistry;let i=null,s=null;if(e)for(let r=0;r<e.length;r++){const o=e[r];if(EH(n,o.selectors,!1))if(i||(i=[]),zu(o))if(null!==o.findHostDirectiveDefs){const a=[];s=s||new Map,o.findHostDirectiveDefs(o,a,s),i.unshift(...a,o),s3(t,n,a.length)}else i.unshift(o),s3(t,n,0);else s=s||new Map,o.findHostDirectiveDefs?.(o,i,s),i.push(o)}return null===i?null:[i,s]}(t,e);let o,a;null===r?o=a=null:[o,a]=r,null!==o&&nK(t,n,e,o,s,a),s&&function zTe(t,n,e){if(n){const i=t.localNames=[];for(let s=0;s<n.length;s+=2){const r=e[n[s+1]];if(null==r)throw new ot(-301,!1);i.push(n[s],r)}}}(e,i,s)}e.mergedAttrs=w0(e.mergedAttrs,e.attrs)}function nK(t,n,e,i,s,r){for(let c=0;c<i.length;c++)pL(YT(e,n),t,i[c].type);!function GTe(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}(e,t.data.length,i.length);for(let c=0;c<i.length;c++){const u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=q0(t,n,i.length,null);for(let c=0;c<i.length;c++){const u=i[c];e.mergedAttrs=w0(e.mergedAttrs,u.hostAttrs),jTe(t,e,n,l,u),UTe(l,u,s),null!==u.contentQueries&&(e.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}!function OTe(t,n,e){const s=n.directiveEnd,r=t.data,o=n.attrs,a=[];let l=null,c=null;for(let u=n.directiveStart;u<s;u++){const d=r[u],h=e?e.get(d):null,p=h?h.outputs:null;l=eK(0,d.inputs,u,l,h?h.inputs:null),c=eK(1,d.outputs,u,c,p);const g=null===l||null===o||LF(n)?null:qTe(l,u,o);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(n.flags|=8),l.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=a,n.inputs=l,n.outputs=c}(t,e,r)}function iK(t,n,e){const i=e.directiveStart,s=e.directiveEnd,r=e.index,o=function fxe(){return ei.lFrame.currentDirectiveIndex}();try{jm(r);for(let a=i;a<s;a++){const l=t.data[a],c=n[a];iL(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&BTe(l,c)}}finally{jm(-1),iL(o)}}function BTe(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function s3(t,n,e){n.componentOffset=e,(t.components??=[]).push(n.index)}function UTe(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;zu(n)&&(e[""]=t)}}function jTe(t,n,e,i,s){t.data[i]=s;const r=s.factory||(s.factory=$m(s.type)),o=new A0(r,zu(s),D);t.blueprint[i]=o,e[i]=o,function LTe(t,n,e,i,s){const r=s.hostBindings;if(r){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~n.index;(function PTe(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(o)!=a&&o.push(a),o.push(e,i,r)}}(t,n,i,q0(t,e,s.hostVars,hi),s)}function r3(t,n,e,i,s,r,o){if(null==r)t.removeAttribute(n,s,e);else{const a=null==o?di(r):o(r,i||"",s);t.setAttribute(n,s,a,e)}}function WTe(t,n,e,i,s,r){const o=r[n];if(null!==o)for(let a=0;a<o.length;)Yq(i,e,o[a++],o[a++],o[a++],o[a++])}function qTe(t,n,e){let i=null,s=0;for(;s<e.length;){const r=e[s];if(0!==r)if(5!==r){if("number"==typeof r)break;if(t.hasOwnProperty(r)){null===i&&(i=[]);const o=t[r];for(let a=0;a<o.length;a+=3)if(o[a]===n){i.push(r,o[a+1],o[a+2],e[s+1]);break}}s+=2}else s+=2;else s+=4}return i}function sK(t,n,e,i){return[t,!0,0,n,null,i,null,e,null,null]}function rK(t,n){const e=t.contentQueries;if(null!==e){const i=Ae(null);try{for(let s=0;s<e.length;s+=2){const o=e[s+1];if(-1!==o){const a=t.data[o];HT(e[s]),a.contentQueries(2,n[o],o)}}}finally{Ae(i)}}}function x2(t,n){return t[C0]?t[LH][Vu]=n:t[C0]=n,t[LH]=n,n}function o3(t,n,e){HT(0);const i=Ae(null);try{n(t,e)}finally{Ae(i)}}function oK(t){return t[xb]??=[]}function aK(t){return t.cleanup??=[]}function lK(t,n,e){return(null===t||zu(t))&&(e=function YF(t){for(;Array.isArray(t);){if("object"==typeof t[HF])return t;t=t[Ir]}return null}(e[n.index])),e[Jn]}function E2(t,n){const e=t[go],i=e?e.get(gc,null):null;i&&i.handleError(n)}function a3(t,n,e,i,s){for(let r=0;r<e.length;){const o=e[r++],a=e[r++],l=e[r++];Yq(t.data[o],n[o],i,a,l,s)}}function zh(t,n,e){const i=T0(n,t);Rq(t[Jn],i,e)}function KTe(t,n){const e=_c(n,t),i=e[Vt];!function XTe(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])}(i,e);const s=e[Ir];null!==s&&null===e[rl]&&(e[rl]=kL(s,e[go])),l3(i,e,e[fr])}function l3(t,n,e){oL(n);try{const i=t.viewQuery;null!==i&&o3(1,i,e);const s=t.template;null!==s&&Zq(t,n,s,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),n[Fh]?.finishViewCreation(t),t.staticContentQueries&&rK(t,n),t.staticViewQueries&&o3(2,t.viewQuery,e);const r=t.components;null!==r&&function YTe(t,n){for(let e=0;e<n.length;e++)KTe(t,n[e])}(n,r)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[An]&=-5,aL()}}function Vb(t,n,e,i){const s=Ae(null);try{const r=n.tView,l=C2(t,r,e,4096&t[An]?4096:16,null,n,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null);l[Vm]=t[n.index];const u=t[Fh];return null!==u&&(l[Fh]=u.createEmbeddedView(r)),l3(r,l,e),l}finally{Ae(s)}}function cK(t,n){const e=to+n;if(e<t.length)return t[e]}function Qm(t,n){return!n||null===n.firstChild||e2(t)}function zb(t,n,e,i=!0){const s=n[Vt];if(function mTe(t,n,e,i){const s=to+i,r=e.length;i>0&&(e[s-1][Vu]=n),i<r-to?(n[Vu]=e[s],gH(e,to+i,n)):(e.push(n),n[Vu]=null),n[_o]=e;const o=n[Vm];null!==o&&e!==o&&Lq(o,n);const a=n[Fh];null!==a&&a.insertView(t),QF(n),n[An]|=128}(s,n,t,e),i){const o=XL(e,t),a=n[Jn],l=y2(a,t[Md]);null!==l&&function fTe(t,n,e,i,s,r){i[Ir]=s,i[Ea]=n,S2(t,i,e,1,s,r)}(s,t[Ea],a,n,l,o)}const r=n[rl];null!==r&&null!==r.firstChild&&(r.firstChild=null)}function c3(t,n){const e=j0(t,n);return void 0!==e&&v2(e[Vt],e),e}function K0(t,n,e,i,s=!1){for(;null!==e;){if(128===e.type){e=s?e.projectionNext:e.next;continue}const r=n[e.index];null!==r&&i.push(gs(r)),ja(r)&&uK(r,i);const o=e.type;if(8&o)K0(t,n,e.child,i);else if(32&o){const a=UL(e,n);let l;for(;l=a();)i.push(l)}else if(16&o){const a=jq(n,e);if(Array.isArray(a))i.push(...a);else{const l=Lh(n[kr]);K0(l[Vt],l,a,i,!0)}}e=s?e.projectionNext:e.next}return i}function uK(t,n){for(let e=to;e<t.length;e++){const i=t[e],s=i[Vt].firstChild;null!==s&&K0(i[Vt],i,s,n)}t[Md]!==t[Ir]&&n.push(t[Md])}let dK=[];const e2e={...De,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{UT(t.lView)},consumerOnSignalRead(){this.lView[Kc]=this}},n2e={...De,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let n=Lh(t.lView);for(;n&&!hK(n[Vt]);)n=Lh(n);n&&KH(n)},consumerOnSignalRead(){this.lView[Kc]=this}};function hK(t){return 2!==t.type}const i2e=100;function T2(t,n=!0,e=0){const i=t[Dd],s=i.rendererFactory;s.begin?.();try{!function s2e(t,n){const e=tW();try{nW(!0),u3(t,n);let i=0;for(;k0(t);){if(i===i2e)throw new ot(103,!1);i++,u3(t,1)}}finally{nW(e)}}(t,e)}catch(o){throw n&&E2(t,o),o}finally{s.end?.(),i.inlineEffectRunner?.flush()}}function r2e(t,n,e,i){const s=n[An];if(!(256&~s))return;n[Dd].inlineEffectRunner?.flush(),oL(n);let a=!0,l=null,c=null;hK(t)?(c=function ZTe(t){return t[Kc]??function QTe(t){const n=dK.pop()??Object.create(e2e);return n.lView=t,n}(t)}(n),l=It(c)):null===function ke(){return ve}()?(a=!1,c=function t2e(t){const n=t[Kc]??Object.create(n2e);return n.lView=t,n}(n),l=It(c)):n[Kc]&&(ci(n[Kc]),n[Kc]=null);try{qH(n),function iW(t){return ei.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&Zq(t,n,e,2,i);const u=!(3&~s);if(u){const f=t.preOrderCheckHooks;null!==f&&qT(n,f,null)}else{const f=t.preOrderHooks;null!==f&&KT(n,f,0,null),lL(n,0)}if(function o2e(t){for(let n=jW(t);null!==n;n=HW(n)){if(!(n[An]&VT.HasTransplantedViews))continue;const e=n[kb];for(let i=0;i<e.length;i++)KH(e[i])}}(n),pK(n,0),null!==t.contentQueries&&rK(t,n),u){const f=t.contentCheckHooks;null!==f&&qT(n,f)}else{const f=t.contentHooks;null!==f&&KT(n,f,1),lL(n,1)}!function xTe(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const s=e[i];if(s<0)jm(~s);else{const r=s,o=e[++i],a=e[++i];hxe(o,r),a(2,n[r])}}}finally{jm(-1)}}(t,n);const d=t.components;null!==d&&_K(n,d,0);const h=t.viewQuery;if(null!==h&&o3(2,h,i),u){const f=t.viewCheckHooks;null!==f&&qT(n,f)}else{const f=t.viewHooks;null!==f&&KT(n,f,2),lL(n,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[$T]){for(const f of n[$T])f();n[$T]=null}n[An]&=-73}catch(u){throw UT(n),u}finally{null!==c&&(on(c,l),a&&function JTe(t){t.lView[Kc]!==t&&(t.lView=null,dK.push(t))}(c)),aL()}}function pK(t,n){for(let e=jW(t);null!==e;e=HW(e))for(let i=to;i<e.length;i++)mK(e[i],n)}function a2e(t,n,e){mK(_c(n,t),e)}function mK(t,n){ZF(t)&&u3(t,n)}function u3(t,n){const i=t[Vt],s=t[An],r=t[Kc];let o=!!(0===n&&16&s);if(o||=!!(64&s&&0===n),o||=!!(1024&s),o||=!(!r?.dirty||!Xn(r)),o||=!1,r&&(r.dirty=!1),t[An]&=-9217,o)r2e(i,t,i.template,t[fr]);else if(8192&s){pK(t,1);const a=i.components;null!==a&&_K(t,a,1)}}function _K(t,n,e){for(let i=0;i<n.length;i++)a2e(t,n[i],e)}function X0(t,n){const e=tW()?64:1088;for(t[Dd].changeDetectionScheduler?.notify(n);t;){t[An]|=e;const i=Lh(t);if(E0(t)&&!i)return t;t=i}return null}class Y0{get rootNodes(){const n=this._lView,e=n[Vt];return K0(e,n,e.firstChild,[])}constructor(n,e,i=!0){this._lView=n,this._cdRefInjectingView=e,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[fr]}set context(n){this._lView[fr]=n}get destroyed(){return!(256&~this._lView[An])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[_o];if(ja(n)){const e=n[8],i=e?e.indexOf(this):-1;i>-1&&(j0(n,i),kT(e,i))}this._attachedToViewContainer=!1}v2(this._lView[Vt],this._lView)}onDestroy(n){GT(this._lView,n)}markForCheck(){X0(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[An]&=-129}reattach(){QF(this._lView),this._lView[An]|=128}detectChanges(){this._lView[An]|=1024,T2(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ot(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const n=E0(this._lView),e=this._lView[Vm];null!==e&&!n&&HL(e,this._lView),Fq(this._lView[Vt],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new ot(902,!1);this._appRef=n;const e=E0(this._lView),i=this._lView[Vm];null!==i&&!e&&Lq(i,this._lView),QF(this._lView)}}let or=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=u2e}return t})();const l2e=or,c2e=class extends l2e{constructor(n,e,i){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,e){return this.createEmbeddedViewImpl(n,e)}createEmbeddedViewImpl(n,e,i){const s=Vb(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:e,dehydratedView:i});return new Y0(s)}};function u2e(){return I2(Us(),ft())}function I2(t,n){return 4&t.type?new c2e(n,t,Ob(t,n)):null}function vK(t,n,e){const i=n.insertBeforeIndex,s=Array.isArray(i)?i[0]:i;return null===s?zq(t,0,e):gs(e[s])}function yK(t,n,e,i,s){const r=n.insertBeforeIndex;if(Array.isArray(r)){let o=i,a=null;if(3&n.type||(a=o,o=s),null!==o&&-1===n.componentOffset)for(let l=1;l<r.length;l++)Ym(t,o,e[r[l]],a,!1)}}function wK(t,n){if(t.push(n),t.length>1)for(let e=t.length-2;e>=0;e--){const i=t[e];SK(i)||v2e(i,n)&&null===y2e(i)&&w2e(i,n.index)}}function SK(t){return!(64&t.type)}function v2e(t,n){return SK(n)||t.index>n.index}function y2e(t){const n=t.insertBeforeIndex;return Array.isArray(n)?n[0]:n}function w2e(t,n){const e=t.insertBeforeIndex;Array.isArray(e)?e[0]=n:(Gq(vK,yK),t.insertBeforeIndex=n)}function ew(t,n){const e=t.data[n];return null===e||"string"==typeof e?null:e.hasOwnProperty("currentCaseLViewIndex")?e:e.value}function x2e(t,n,e){const i=ZL(t,e,64,null,null);return wK(n,i),i}function D2(t,n){const e=n[t.currentCaseLViewIndex];return null===e?e:e<0?~e:e}function CK(t){return t>>>17}function xK(t){return(131070&t)>>>1}function p3(t,n,e){t.index=0;const i=D2(n,e);t.removes=null!==i?n.remove[i]:_s}function M2(t){if(t.index<t.removes.length){const n=t.removes[t.index++];return n>0?t.lView[n]:(t.stack.push(t.index,t.removes),p3(t,t.lView[Vt].data[~n],t.lView),M2(t))}return 0===t.stack.length?null:(t.removes=t.stack.pop(),t.index=t.stack.pop(),M2(t))}function T2e(){const t={stack:[],index:-1};return function n(e,i){for(t.lView=i;t.stack.length;)t.stack.pop();return p3(t,e.value,i),M2.bind(null,t)}}let OK=()=>{},RK=()=>{},PK=()=>null;function e_(t,n){return PK(t,n)}class Gb{}const sw=new st("",{providedIn:"root",factory:()=>!1}),$K=new st("");class nIe{}class BK{}class sIe{resolveComponentFactory(n){throw function iIe(t){const n=Error(`No component factory found for ${Vo(t)}.`);return n.ngComponent=t,n}(n)}}class jb{static#e=this.NULL=new sIe}class N2{}let Hu=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function rIe(){const t=ft(),e=_c(Us().index,t);return(sa(e)?e:t)[Jn]}()}return t})(),oIe=(()=>{class t{static#e=this.\u0275prov=ut({token:t,providedIn:"root",factory:()=>null})}return t})();const zK=new Set;function cl(t){zK.has(t)||(zK.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function UK(t){let n=!0;return setTimeout(()=>{n&&(n=!1,t())}),"function"==typeof sr.requestAnimationFrame&&sr.requestAnimationFrame(()=>{n&&(n=!1,t())}),()=>{n=!1}}function GK(t){let n=!0;return queueMicrotask(()=>{n&&t()}),()=>{n=!1}}function jK(...t){}class Wt{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new it(!1),this.onMicrotaskEmpty=new it(!1),this.onStable=new it(!1),this.onError=new it(!1),typeof Zone>"u")throw new ot(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&e,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,function cIe(t){const n=()=>{!function lIe(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{UK(()=>{t.callbackScheduled=!1,S3(t),t.isCheckStableRunning=!0,w3(t),t.isCheckStableRunning=!1})}),S3(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,s,r,o,a)=>{if(function uIe(t){return qK(t,"__ignore_ng_zone__")}(a))return e.invokeTask(s,r,o,a);try{return HK(t),e.invokeTask(s,r,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===r.type||t.shouldCoalesceRunChangeDetection)&&n(),WK(t)}},onInvoke:(e,i,s,r,o,a,l)=>{try{return HK(t),e.invoke(s,r,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function dIe(t){return qK(t,"__scheduler_tick__")}(a)&&n(),WK(t)}},onHasTask:(e,i,s,r)=>{e.hasTask(s,r),i===s&&("microTask"==r.change?(t._hasPendingMicrotasks=r.microTask,S3(t),w3(t)):"macroTask"==r.change&&(t.hasPendingMacrotasks=r.macroTask))},onHandleError:(e,i,s,r)=>(e.handleError(s,r),t.runOutsideAngular(()=>t.onError.emit(r)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Wt.isInAngularZone())throw new ot(909,!1)}static assertNotInAngularZone(){if(Wt.isInAngularZone())throw new ot(909,!1)}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,s){const r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+s,n,aIe,jK,jK);try{return r.runTask(o,e,i)}finally{r.cancelTask(o)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}}const aIe={};function w3(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function S3(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function HK(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function WK(t){t._nesting--,w3(t)}class C3{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new it,this.onMicrotaskEmpty=new it,this.onStable=new it,this.onError=new it}run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,s){return n.apply(e,i)}}function qK(t,n){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[n]}var ul=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ul||{});const KK={destroy(){}};function E3(t,n){!n&&LT();const e=n?.injector??Je(ti);return Fl(e)?(cl("NgAfterRender"),XK(t,e,!1,n?.phase??ul.MixedReadWrite)):KK}function Pl(t,n){!n&&LT();const e=n?.injector??Je(ti);return Fl(e)?(cl("NgAfterNextRender"),XK(t,e,!0,n?.phase??ul.MixedReadWrite)):KK}function XK(t,n,e,i){const s=function fIe(t,n){if(t instanceof Function)switch(n){case ul.EarlyRead:return{earlyRead:t};case ul.Write:return{write:t};case ul.MixedReadWrite:return{mixedReadWrite:t};case ul.Read:return{read:t}}return t}(t,i),r=n.get(R2),o=r.handler??=new mIe,a=[],l=[],c=()=>{for(const f of l)o.unregister(f);u()},u=n.get(R0).onDestroy(c);let d=0;const h=(f,p)=>{if(!p)return;const g=e?(...y)=>(d--,d<1&&c(),p(...y)):p,v=Bu(n,()=>new pIe(f,a,g));o.register(v),l.push(v),d++};return h(ul.EarlyRead,s.earlyRead),h(ul.Write,s.write),h(ul.MixedReadWrite,s.mixedReadWrite),h(ul.Read,s.read),{destroy:c}}class pIe{constructor(n,e,i){this.phase=n,this.pipelinedArgs=e,this.callbackFn=i,this.zone=Je(Wt),this.errorHandler=Je(gc,{optional:!0}),Je(Gb,{optional:!0})?.notify(6)}invoke(){try{const n=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,n)}catch(n){this.errorHandler?.handleError(n)}}}class mIe{constructor(){this.executingCallbacks=!1,this.buckets={[ul.EarlyRead]:new Set,[ul.Write]:new Set,[ul.MixedReadWrite]:new Set,[ul.Read]:new Set},this.deferredCallbacks=new Set}register(n){(this.executingCallbacks?this.deferredCallbacks:this.buckets[n.phase]).add(n)}unregister(n){this.buckets[n.phase].delete(n),this.deferredCallbacks.delete(n)}execute(){this.executingCallbacks=!0;for(const n of Object.values(this.buckets))for(const e of n)e.invoke();this.executingCallbacks=!1;for(const n of this.deferredCallbacks)this.buckets[n.phase].add(n);this.deferredCallbacks.clear()}destroy(){for(const n of Object.values(this.buckets))n.clear();this.deferredCallbacks.clear()}}let R2=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const e=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const i of e)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new t})}return t})();function L2(t,n,e){let i=e?t.styles:null,s=e?t.classes:null,r=0;if(null!==n)for(let o=0;o<n.length;o++){const a=n[o];"number"==typeof a?r=a:1==r?s=vF(s,a):2==r&&(i=vF(i,a+": "+n[++o]+";"))}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=s:t.classesWithoutHost=s}class QK extends jb{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=zi(n);return new aw(e,this.ngModule)}}function JK(t,n){const e=[];for(const i in t){if(!t.hasOwnProperty(i))continue;const s=t[i];if(void 0===s)continue;const r=Array.isArray(s),o=r?s[0]:s;e.push(n?{propName:o,templateName:i,isSignal:!!((r?s[1]:jf.None)&jf.SignalBased)}:{propName:o,templateName:i})}return e}class aw extends BK{get inputs(){const n=this.componentDef,e=n.inputTransforms,i=JK(n.inputs,!0);if(null!==e)for(const s of i)e.hasOwnProperty(s.propName)&&(s.transform=e[s.propName]);return i}get outputs(){return JK(this.componentDef.outputs,!1)}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function SCe(t){return t.map(wCe).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}create(n,e,i,s){const r=Ae(null);try{let o=(s=s||this.ngModule)instanceof Ga?s:s?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new Hm(n,o):n,l=a.get(N2,null);if(null===l)throw new ot(407,!1);const c=a.get(oIe,null),h={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:a.get(R2,null),changeDetectionScheduler:a.get(Gb,null)},f=l.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",g=i?function TTe(t,n,e,i){const r=i.get(cq,!1)||e===Pu.ShadowDom,o=t.selectRootElement(n,r);return function ITe(t){Jq(t)}(o),o}(f,i,this.componentDef.encapsulation,a):b2(f,p,function bIe(t){const n=t.toLowerCase();return"svg"===n?HH:"math"===n?"math":null}(p));let v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let y=null;null!==g&&(y=kL(g,a,!0));const w=t3(0,null,null,1,0,null,null,null,null,null,null),E=C2(null,w,null,v,null,null,h,f,a,null,y);let T,L;oL(E);try{const W=this.componentDef;let H,P=null;W.findHostDirectiveDefs?(H=[],P=new Map,W.findHostDirectiveDefs(W,H,P),H.push(W)):H=[W];const X=function yIe(t,n){const e=t[Vt],i=wn;return t[i]=n,Zm(e,i,2,"#host",null)}(E,g),ne=function wIe(t,n,e,i,s,r,o){const a=s[Vt];!function SIe(t,n,e,i){for(const s of t)n.mergedAttrs=w0(n.mergedAttrs,s.hostAttrs);null!==n.mergedAttrs&&(L2(n,n.mergedAttrs,!0),null!==e&&Kq(i,e,n))}(i,t,n,o);let l=null;null!==n&&(l=kL(n,s[go]));const c=r.rendererFactory.createRenderer(n,e);let u=16;e.signals?u=4096:e.onPush&&(u=64);const d=C2(s,Qq(e),null,u,s[t.index],t,r,c,null,null,l);return a.firstCreatePass&&s3(a,t,i.length-1),x2(s,d),s[t.index]=d}(X,g,W,H,E,h,f);L=I0(w,wn),g&&function xIe(t,n,e,i){if(i)FF(t,e,["ng-version","18.1.2"]);else{const{attrs:s,classes:r}=function CCe(t){const n=[],e=[];let i=1,s=2;for(;i<t.length;){let r=t[i];if("string"==typeof r)2===s?""!==r&&n.push(r,t[++i]):8===s&&e.push(r);else{if(!$u(s))break;s=r}i++}return{attrs:n,classes:e}}(n.selectors[0]);s&&FF(t,e,s),r&&r.length>0&&qq(t,e,r.join(" "))}}(f,W,g,i),void 0!==e&&function EIe(t,n,e){const i=t.projection=[];for(let s=0;s<n.length;s++){const r=e[s];i.push(null!=r?Array.from(r):null)}}(L,this.ngContentSelectors,e),T=function CIe(t,n,e,i,s,r){const o=Us(),a=s[Vt],l=ol(o,s);nK(a,s,o,e,null,i);for(let u=0;u<e.length;u++)Ha(Wm(s,a,o.directiveStart+u,o),s);iK(a,s,o),l&&Ha(l,s);const c=Wm(s,a,o.directiveStart+o.componentOffset,o);if(t[fr]=s[fr]=c,null!==r)for(const u of r)u(c,n);return QL(a,o,s),c}(ne,W,H,P,E,[TIe]),l3(w,E,null)}finally{aL()}return new vIe(this.componentType,T,Ob(L,E),E,L)}finally{Ae(r)}}}class vIe extends nIe{constructor(n,e,i,s,r){super(),this.location=i,this._rootLView=s,this._tNode=r,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new Y0(s,void 0,!1),this.componentType=n}setInput(n,e){const i=this._tNode.inputs;let s;if(null!==i&&(s=i[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;const r=this._rootLView;a3(r[Vt],r,s,n,e),this.previousInputValues.set(n,e),X0(_c(this._tNode.index,r),1)}}get injector(){return new Go(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function TIe(){const t=Us();WT(ft()[Vt],t)}let Pr=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=IIe}return t})();function IIe(){return nX(Us(),ft())}const kIe=Pr,eX=class extends kIe{constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return Ob(this._hostTNode,this._hostLView)}get injector(){return new Go(this._hostTNode,this._hostLView)}get parentInjector(){const n=ZT(this._hostTNode,this._hostLView);if(dL(n)){const e=N0(n,this._hostLView),i=O0(n);return new Go(e[Vt].data[i+8],e)}return new Go(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=tX(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-to}createEmbeddedView(n,e,i){let s,r;"number"==typeof i?s=i:null!=i&&(s=i.index,r=i.injector);const o=e_(this._lContainer,n.ssrId),a=n.createEmbeddedViewImpl(e||{},r,o);return this.insertImpl(a,s,Qm(this._hostTNode,o)),a}createComponent(n,e,i,s,r){const o=n&&!function S0(t){return"function"==typeof t}(n);let a;if(o)a=e;else{const p=e||{};a=p.index,i=p.injector,s=p.projectableNodes,r=p.environmentInjector||p.ngModuleRef}const l=o?n:new aw(zi(n)),c=i||this.parentInjector;if(!r&&null==l.ngModule){const g=(o?c:this.parentInjector).get(Ga,null);g&&(r=g)}const u=zi(l.componentType??{}),d=e_(this._lContainer,u?.id??null),f=l.create(c,s,d?.firstChild??null,r);return this.insertImpl(f.hostView,a,Qm(this._hostTNode,d)),f}insert(n,e){return this.insertImpl(n,e,!0)}insertImpl(n,e,i){const s=n._lView;if(function nxe(t){return ja(t[_o])}(s)){const a=this.indexOf(n);if(-1!==a)this.detach(a);else{const l=s[_o],c=new eX(l,l[Ea],l[_o]);c.detach(c.indexOf(n))}}const r=this._adjustIndex(e),o=this._lContainer;return zb(o,s,r,i),n.attachToViewContainerRef(),gH(k3(o),r,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=tX(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),i=j0(this._lContainer,e);i&&(kT(k3(this._lContainer),e),v2(i[Vt],i))}detach(n){const e=this._adjustIndex(n,-1),i=j0(this._lContainer,e);return i&&null!=kT(k3(this._lContainer),e)?new Y0(i):null}_adjustIndex(n,e=0){return n??this.length+e}};function tX(t){return t[8]}function k3(t){return t[8]||(t[8]=[])}function nX(t,n){let e;const i=n[t.index];return ja(i)?e=i:(e=sK(i,n,null,t),n[t.index]=e,x2(n,e)),iX(e,n,t,i),new eX(e,t,n)}let iX=function rX(t,n,e,i){if(t[Md])return;let s;s=8&e.type?gs(i):function DIe(t,n){const e=t[Jn],i=e.createComment(""),s=ol(n,t);return Ym(e,y2(e,s),i,function vTe(t,n){return t.nextSibling(n)}(e,s),!1),i}(n,e),t[Md]=s},D3=()=>!1;class M3{constructor(n){this.queryList=n,this.matches=null}clone(){return new M3(this.queryList)}setDirty(){this.queryList.setDirty()}}class A3{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const i=null!==n.contentQueries?n.contentQueries[0]:e.length,s=[];for(let r=0;r<i;r++){const o=e.getByIndex(r);s.push(this.queries[o.indexInDeclarationView].clone())}return new A3(s)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==L3(n,e).matches&&this.queries[e].setDirty()}}class oX{constructor(n,e,i=null){this.flags=e,this.read=i,this.predicate="string"==typeof n?function PIe(t){return t.split(",").map(n=>n.trim())}(n):n}}class O3{constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){const s=null!==e?e.length:0,r=this.getByIndex(i).embeddedTView(n,s);r&&(r.indexInDeclarationView=i,null!==e?e.push(r):e=[r])}return null!==e?new O3(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class N3{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new N3(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1&~this.metadata.flags){const e=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let s=0;s<i.length;s++){const r=i[s];this.matchTNodeWithReadOption(n,e,NIe(e,r)),this.matchTNodeWithReadOption(n,e,QT(e,n,r,!1,!1))}else i===or?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,QT(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(null!==i){const s=this.metadata.read;if(null!==s)if(s===Bt||s===Pr||s===or&&4&e.type)this.addMatch(e.index,-2);else{const r=QT(e,n,s,!1,!1);null!==r&&this.addMatch(e.index,r)}else this.addMatch(e.index,i)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function NIe(t,n){const e=t.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1];return null}function FIe(t,n,e,i){return-1===e?function RIe(t,n){return 11&t.type?Ob(t,n):4&t.type?I2(t,n):null}(n,t):-2===e?function LIe(t,n,e){return e===Bt?Ob(n,t):e===or?I2(n,t):e===Pr?nX(n,t):void 0}(t,n,i):Wm(t,t[Vt],e,n)}function aX(t,n,e,i){const s=n[Fh].queries[i];if(null===s.matches){const r=t.data,o=e.matches,a=[];for(let l=0;null!==o&&l<o.length;l+=2){const c=o[l];a.push(c<0?null:FIe(n,r[c],o[l+1],e.metadata.read))}s.matches=a}return s.matches}function R3(t,n,e,i){const s=t.queries.getByIndex(e),r=s.matches;if(null!==r){const o=aX(t,n,s,e);for(let a=0;a<r.length;a+=2){const l=r[a];if(l>0)i.push(o[a/2]);else{const c=r[a+1],u=n[-l];for(let d=to;d<u.length;d++){const h=u[d];h[Vm]===h[_o]&&R3(h[Vt],h,c,i)}if(null!==u[kb]){const d=u[kb];for(let h=0;h<d.length;h++){const f=d[h];R3(f[Vt],f,c,i)}}}}}return i}function F3(t,n){return t[Fh].queries[n].queryList}function lX(t,n,e){const i=new qm(!(4&~e));return function MTe(t,n,e,i){const s=oK(n);s.push(e),t.firstCreatePass&&aK(t).push(i,s.length-1)}(t,n,i,i.destroy),(n[Fh]??=new A3).queries.push(new M3(i))-1}function uX(t,n,e,i){const s=Oi();if(s.firstCreatePass){const r=Us();dX(s,new oX(n,e,i),r.index),function $Ie(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(s,t),!(2&~e)&&(s.staticContentQueries=!0)}return lX(s,ft(),e)}function dX(t,n,e){null===t.queries&&(t.queries=new O3),t.queries.track(new N3(n,e))}function L3(t,n){return t.queries.getByIndex(n)}function hX(t,n){const e=t[Vt],i=L3(e,n);return i.crossesNgTemplate?R3(e,t,n,[]):aX(e,t,i,n)}function P2(t){return"function"==typeof t&&void 0!==t[dt]}function Qf(t,n){cl("NgSignals");const e=function jr(t){const n=Object.create(Rwe);n.value=t;const e=()=>(Ze(n),n.value);return e[dt]=n,e}(t),i=e[dt];return n?.equal&&(i.equal=n.equal),e.set=s=>Oj(i,s),e.update=s=>function Nwe(t,n){lt()||qc(),Oj(t,n(t.value))}(i,s),e.asReadonly=fX.bind(e),e}function fX(){const t=this[dt];if(void 0===t.readonlyFn){const n=()=>this();n[dt]=t,t.readonlyFn=n}return t.readonlyFn}function pX(t){return P2(t)&&"function"==typeof t.set}function P3(t,n){let e;const i=Yt(()=>{e._dirtyCounter();const s=function BIe(t,n){const e=t._lView,i=t._queryIndex;if(void 0===e||void 0===i||4&e[An])return n?void 0:_s;const s=F3(e,i),r=hX(e,i);return s.reset(r,RW),n?s.first:s._changesDetected||void 0===t._flatValue?t._flatValue=s.toArray():t._flatValue}(e,t);if(n&&void 0===s)throw new ot(-951,!1);return s});return e=i[dt],e._dirtyCounter=Qf(0),e._flatValue=void 0,i}function vX(t,n){return function mX(){return P3(!0,!1)}()}const zIe=(vX.required=function VIe(t,n){return function _X(){return P3(!0,!0)}()},vX);function bt(t){let n=function TX(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const i=[t];for(;n;){let s;if(zu(t))s=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new ot(903,!1);s=n.\u0275dir}if(s){if(e){i.push(s);const o=t;o.inputs=B2(t.inputs),o.inputTransforms=B2(t.inputTransforms),o.declaredInputs=B2(t.declaredInputs),o.outputs=B2(t.outputs);const a=s.hostBindings;a&&eke(t,a);const l=s.viewQuery,c=s.contentQueries;if(l&&QIe(t,l),c&&JIe(t,c),YIe(t,s),GSe(t.outputs,s.outputs),zu(s)&&s.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(s.data.animation)}}const r=s.features;if(r)for(let o=0;o<r.length;o++){const a=r[o];a&&a.ngInherit&&a(t),a===bt&&(e=!1)}}n=Object.getPrototypeOf(n)}!function ZIe(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){const s=t[i];s.hostVars=n+=s.hostVars,s.hostAttrs=w0(s.hostAttrs,e=w0(e,s.hostAttrs))}}(i)}function YIe(t,n){for(const e in n.inputs){if(!n.inputs.hasOwnProperty(e)||t.inputs.hasOwnProperty(e))continue;const i=n.inputs[e];if(void 0!==i&&(t.inputs[e]=i,t.declaredInputs[e]=n.declaredInputs[e],null!==n.inputTransforms)){const s=Array.isArray(i)?i[0]:i;if(!n.inputTransforms.hasOwnProperty(s))continue;t.inputTransforms??={},t.inputTransforms[s]=n.inputTransforms[s]}}}function B2(t){return t===kd?{}:t===_s?[]:t}function QIe(t,n){const e=t.viewQuery;t.viewQuery=e?(i,s)=>{n(i,s),e(i,s)}:n}function JIe(t,n){const e=t.contentQueries;t.contentQueries=e?(i,s,r)=>{n(i,s,r),e(i,s,r)}:n}function eke(t,n){const e=t.hostBindings;t.hostBindings=e?(i,s)=>{n(i,s),e(i,s)}:n}function Ni(t){const n=t.inputConfig,e={};for(const i in n)if(n.hasOwnProperty(i)){const s=n[i];Array.isArray(s)&&s[3]&&(e[i]=s[3])}t.inputTransforms=e}class t_{}class AX{}class $3 extends t_{constructor(n,e,i){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new QK(this);const s=Ua(n);this._bootstrapComponents=yc(s.bootstrap),this._r3Injector=MW(n,e,[{provide:t_,useValue:this},{provide:jb,useValue:this.componentFactoryResolver},...i],Vo(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class B3 extends AX{constructor(n){super(),this.moduleType=n}create(n){return new $3(this.moduleType,n,[])}}class OX extends t_{constructor(n){super(),this.componentFactoryResolver=new QK(this),this.instance=null;const e=new wb([...n.providers,{provide:t_,useValue:this},{provide:jb,useValue:this.componentFactoryResolver}],n.parent||FT(),n.debugName,new Set(["environment"]));this.injector=e,n.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function V2(t,n,e=null){return new OX({providers:t,parent:n,debugName:e,runEnvironmentInitializers:!0}).injector}function z2(t){return!!function V3(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Ld(t,n,e){return t[n]=e}function no(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function n_(t,n,e,i){const s=no(t,n,e);return no(t,n+1,i)||s}function U2(t,n,e,i,s){const r=n_(t,n,e,i);return no(t,n+2,s)||r}function uw(t,n,e,i,s,r,o,a,l,c){const u=e+wn,d=n.firstCreatePass?function dke(t,n,e,i,s,r,o,a,l){const c=n.consts,u=Zm(n,t,4,o||null,a||null);n3(n,e,u,Xc(c,l)),WT(n,u);const d=u.tView=t3(2,u,i,s,r,n.directiveRegistry,n.pipeRegistry,null,n.schemas,c,null);return null!==n.queries&&(n.queries.template(n,u),d.queries=n.queries.embeddedTView(u)),u}(u,n,t,i,s,r,o,a,l):n.data[u];Uu(d,!1);const h=NX(n,t,d,e);M0()&&w2(n,t,h,d),Ha(h,t);const f=sK(h,t,h,d);return t[u]=f,x2(t,f),function sX(t,n,e){return D3(t,n,e)}(f,d,t),zT(d)&&JL(n,t,d),null!=l&&e3(t,d,c),d}function K(t,n,e,i,s,r,o,a){const l=ft(),c=Oi();return uw(l,c,t,n,e,i,s,Xc(c.consts,r),o,a),K}let NX=function RX(t,n,e,i){return Od(!0),n[Jn].createComment("")};function $t(t,n,e,i){const s=ft();return no(s,Gu(),n)&&(Oi(),function Fd(t,n,e,i,s,r){const o=ol(t,n);r3(n[Jn],o,r,t.value,e,i,s)}(pr(),s,t,n,e,i)),$t}function ev(t,n,e,i){return no(t,Gu(),e)?n+di(e)+i:hi}function K2(t,n){return t<<17|n<<2}function ep(t){return t>>17&32767}function Z3(t){return 2|t}function s_(t){return(131068&t)>>2}function Q3(t,n){return-131069&t|n<<2}function J3(t){return 1|t}function dY(t,n,e,i){const s=t[e+1],r=null===n;let o=i?ep(s):s_(s),a=!1;for(;0!==o&&(!1===a||r);){const c=t[o+1];Yke(t[o],n)&&(a=!0,t[o+1]=i?J3(c):Z3(c)),o=i?ep(c):s_(c)}a&&(t[e+1]=i?Z3(s):J3(s))}function Yke(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&vb(t,n)>=0}const Ho={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function hY(t){return t.substring(Ho.key,Ho.keyEnd)}function fY(t,n){const e=Ho.textEnd;return e===n?-1:(n=Ho.keyEnd=function eDe(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}(t,Ho.key=n,e),lv(t,n,e))}function lv(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function S(t,n,e){const i=ft();return no(i,Gu(),n)&&Ll(Oi(),pr(),i,t,n,i[Jn],e,!1),S}function eP(t,n,e,i,s){const o=s?"class":"style";a3(t,e,n.inputs[o],o,i)}function Wn(t,n,e){return qu(t,n,e,!1),Wn}function rt(t,n){return qu(t,n,null,!0),rt}function bo(t){Ku(cDe,Pd,t,!0)}function Pd(t,n){for(let e=function Qke(t){return function mY(t){Ho.key=0,Ho.keyEnd=0,Ho.value=0,Ho.valueEnd=0,Ho.textEnd=t.length}(t),fY(t,lv(t,0,Ho.textEnd))}(n);e>=0;e=fY(n,e))mc(t,hY(n),!0)}function qu(t,n,e,i){const s=ft(),r=Oi(),o=$h(2);r.firstUpdatePass&&vY(r,t,o,i),n!==hi&&no(s,o,n)&&wY(r,r.data[Ta()],s,s[Jn],t,s[o+1]=function dDe(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=Vo(bc(t)))),t}(n,e),i,o)}function Ku(t,n,e,i){const s=Oi(),r=$h(2);s.firstUpdatePass&&vY(s,null,r,i);const o=ft();if(e!==hi&&no(o,r,e)){const a=s.data[Ta()];if(CY(a,i)&&!bY(s,r)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(e=vF(l,e||"")),eP(s,a,o,e,i)}else!function uDe(t,n,e,i,s,r,o,a){s===hi&&(s=_s);let l=0,c=0,u=0<s.length?s[0]:null,d=0<r.length?r[0]:null;for(;null!==u||null!==d;){const h=l<s.length?s[l+1]:void 0,f=c<r.length?r[c+1]:void 0;let g,p=null;u===d?(l+=2,c+=2,h!==f&&(p=d,g=f)):null===d||null!==u&&u<d?(l+=2,p=u):(c+=2,p=d,g=f),null!==p&&wY(t,n,e,i,p,g,o,a),u=l<s.length?s[l]:null,d=c<r.length?r[c]:null}}(s,a,o,o[Jn],o[r+1],o[r+1]=function lDe(t,n,e){if(null==e||""===e)return _s;const i=[],s=bc(e);if(Array.isArray(s))for(let r=0;r<s.length;r++)t(i,s[r],!0);else if("object"==typeof s)for(const r in s)s.hasOwnProperty(r)&&t(i,r,s[r]);else"string"==typeof s&&n(i,s);return i}(t,n,e),i,r)}}function bY(t,n){return n>=t.expandoStartIndex}function vY(t,n,e,i){const s=t.data;if(null===s[e+1]){const r=s[Ta()],o=bY(t,e);CY(r,i)&&null===n&&!o&&(n=!1),n=function sDe(t,n,e,i){const s=sL(t);let r=i?n.residualClasses:n.residualStyles;if(null===s)0===(i?n.classBindings:n.styleBindings)&&(e=pw(e=tP(null,t,n,e,i),n.attrs,i),r=null);else{const o=n.directiveStylingLast;if(-1===o||t[o]!==s)if(e=tP(s,t,n,e,i),null===r){let l=function rDe(t,n,e){const i=e?n.classBindings:n.styleBindings;if(0!==s_(i))return t[ep(i)]}(t,n,i);void 0!==l&&Array.isArray(l)&&(l=tP(null,t,n,l[1],i),l=pw(l,n.attrs,i),function oDe(t,n,e,i){t[ep(e?n.classBindings:n.styleBindings)]=i}(t,n,i,l))}else r=function aDe(t,n,e){let i;const s=n.directiveEnd;for(let r=1+n.directiveStylingLast;r<s;r++)i=pw(i,t[r].hostAttrs,e);return pw(i,n.attrs,e)}(t,n,i)}return void 0!==r&&(i?n.residualClasses=r:n.residualStyles=r),e}(s,r,n,i),function Kke(t,n,e,i,s,r){let o=r?n.classBindings:n.styleBindings,a=ep(o),l=s_(o);t[i]=e;let u,c=!1;if(Array.isArray(e)?(u=e[1],(null===u||vb(e,u)>0)&&(c=!0)):u=e,s)if(0!==l){const h=ep(t[a+1]);t[i+1]=K2(h,a),0!==h&&(t[h+1]=Q3(t[h+1],i)),t[a+1]=function Wke(t,n){return 131071&t|n<<17}(t[a+1],i)}else t[i+1]=K2(a,0),0!==a&&(t[a+1]=Q3(t[a+1],i)),a=i;else t[i+1]=K2(l,0),0===a?a=i:t[l+1]=Q3(t[l+1],i),l=i;c&&(t[i+1]=Z3(t[i+1])),dY(t,u,i,!0),dY(t,u,i,!1),function Xke(t,n,e,i,s){const r=s?t.residualClasses:t.residualStyles;null!=r&&"string"==typeof n&&vb(r,n)>=0&&(e[i+1]=J3(e[i+1]))}(n,u,t,i,r),o=K2(a,l),r?n.classBindings=o:n.styleBindings=o}(s,r,n,e,o,i)}}function tP(t,n,e,i,s){let r=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(r=n[a],i=pw(i,r.hostAttrs,s),r!==t);)a++;return null!==t&&(e.directiveStylingLast=a),i}function pw(t,n,e){const i=e?1:2;let s=-1;if(null!==n)for(let r=0;r<n.length;r++){const o=n[r];"number"==typeof o?s=o:s===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),mc(t,o,!!e||n[++r]))}return void 0===t?null:t}function cDe(t,n,e){const i=String(n);""!==i&&!i.includes(" ")&&mc(t,i,e)}function wY(t,n,e,i,s,r,o,a){if(!(3&n.type))return;const l=t.data,c=l[a+1],u=function qke(t){return!(1&~t)}(c)?SY(l,n,e,s,s_(c),o):void 0;X2(u)||(X2(r)||function Hke(t){return!(2&~t)}(c)&&(r=SY(l,null,e,s,a,o)),function STe(t,n,e,i,s){if(n)s?t.addClass(e,i):t.removeClass(e,i);else{let r=-1===i.indexOf("-")?void 0:Xf.DashCase;null==s?t.removeStyle(e,i,r):("string"==typeof s&&s.endsWith("!important")&&(s=s.slice(0,-10),r|=Xf.Important),t.setStyle(e,i,s,r))}}(i,o,T0(Ta(),e),s,r))}function SY(t,n,e,i,s,r){const o=null===n;let a;for(;s>0;){const l=t[s],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=e[s+1];h===hi&&(h=d?_s:void 0);let f=d?NF(h,i):u===i?h:void 0;if(c&&!X2(f)&&(f=NF(l,i)),X2(f)&&(a=f,o))return a;const p=t[s+1];s=o?ep(p):s_(p)}if(null!==n){let l=r?n.residualClasses:n.residualStyles;null!=l&&(a=NF(l,i))}return a}function X2(t){return void 0!==t}function CY(t,n){return!!(t.flags&(n?8:16))}class wDe{destroy(n){}updateValue(n,e){}swap(n,e){const i=Math.min(n,e),s=Math.max(n,e),r=this.detach(s);if(s-i>1){const o=this.detach(i);this.attach(i,r),this.attach(s,o)}else this.attach(i,r)}move(n,e){this.attach(e,this.detach(n))}}function nP(t,n,e,i,s){return t===e&&Object.is(n,i)?1:Object.is(s(t,n),s(e,i))?-1:0}function iP(t,n,e,i){return!(void 0===n||!n.has(i)||(t.attach(e,n.get(i)),n.delete(i),0))}function EY(t,n,e,i,s){if(iP(t,n,i,e(i,s)))t.updateValue(i,s);else{const r=t.create(i,s);t.attach(i,r)}}function TY(t,n,e,i){const s=new Set;for(let r=n;r<=e;r++)s.add(i(r,t.at(r)));return s}class IY{constructor(){this.kvMap=new Map,this._vMap=void 0}has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;const e=this.kvMap.get(n);return void 0!==this._vMap&&this._vMap.has(e)?(this.kvMap.set(n,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,e){if(this.kvMap.has(n)){let i=this.kvMap.get(n);void 0===this._vMap&&(this._vMap=new Map);const s=this._vMap;for(;s.has(i);)i=s.get(i);s.set(i,e)}else this.kvMap.set(n,e)}forEach(n){for(let[e,i]of this.kvMap)if(n(i,e),void 0!==this._vMap){const s=this._vMap;for(;s.has(i);)i=s.get(i),n(i,e)}}}function Vn(t,n){cl("NgControlFlow");const e=ft(),i=Gu(),s=e[i]!==hi?e[i]:-1,r=-1!==s?Y2(e,wn+s):void 0;if(no(e,i,t)){const a=Ae(null);try{if(void 0!==r&&c3(r,0),-1!==t){const l=wn+t,c=Y2(e,l),u=sP(e[Vt],l),d=e_(c,u.tView.ssrId);zb(c,Vb(e,u,n,{dehydratedView:d}),0,Qm(u,d))}}finally{Ae(a)}}else if(void 0!==r){const a=cK(r,0);void 0!==a&&(a[fr]=n)}}class CDe{constructor(n,e,i){this.lContainer=n,this.$implicit=e,this.$index=i}get $count(){return this.lContainer.length-to}}function kY(t){return t}function DY(t,n){return n}class xDe{constructor(n,e,i){this.hasEmptyBlock=n,this.trackByFn=e,this.liveCollection=i}}function cv(t,n,e,i,s,r,o,a,l,c,u,d,h){cl("NgControlFlow");const f=ft(),p=Oi(),g=void 0!==l,v=ft(),y=a?o.bind(v[kr][fr]):o,w=new xDe(g,y);v[wn+t]=w,uw(f,p,t+1,n,e,i,s,Xc(p.consts,r)),g&&uw(f,p,t+2,l,c,u,d,Xc(p.consts,h))}class EDe extends wDe{constructor(n,e,i){super(),this.lContainer=n,this.hostLView=e,this.templateTNode=i,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-to}at(n){return this.getLView(n)[fr].$implicit}attach(n,e){const i=e[rl];this.needsIndexUpdate||=n!==this.length,zb(this.lContainer,e,n,Qm(this.templateTNode,i))}detach(n){return this.needsIndexUpdate||=n!==this.length-1,function TDe(t,n){return j0(t,n)}(this.lContainer,n)}create(n,e){const i=e_(this.lContainer,this.templateTNode.tView.ssrId),s=Vb(this.hostLView,this.templateTNode,new CDe(this.lContainer,e,n),{dehydratedView:i});return this.operationsCounter?.recordCreate(),s}destroy(n){v2(n[Vt],n),this.operationsCounter?.recordDestroy()}updateValue(n,e){this.getLView(n)[fr].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[fr].$index=n}getLView(n){return function IDe(t,n){return cK(t,n)}(this.lContainer,n)}}function uv(t){const n=Ae(null),e=Ta();try{const i=ft(),s=i[Vt],r=i[e],o=e+1,a=Y2(i,o);if(void 0===r.liveCollection){const c=sP(s,o);r.liveCollection=new EDe(a,i,c)}else r.liveCollection.reset();const l=r.liveCollection;if(function SDe(t,n,e){let i,s,r=0,o=t.length-1;if(Array.isArray(n)){let l=n.length-1;for(;r<=o&&r<=l;){const c=t.at(r),u=n[r],d=nP(r,c,r,u,e);if(0!==d){d<0&&t.updateValue(r,u),r++;continue}const h=t.at(o),f=n[l],p=nP(o,h,l,f,e);if(0!==p){p<0&&t.updateValue(o,f),o--,l--;continue}const g=e(r,c),v=e(o,h),y=e(r,u);if(Object.is(y,v)){const w=e(l,f);Object.is(w,g)?(t.swap(r,o),t.updateValue(o,f),l--,o--):t.move(o,r),t.updateValue(r,u),r++}else if(i??=new IY,s??=TY(t,r,o,e),iP(t,i,r,y))t.updateValue(r,u),r++,o++;else if(s.has(y))i.set(g,t.detach(r)),o--;else{const w=t.create(r,n[r]);t.attach(r,w),r++,o++}}for(;r<=l;)EY(t,i,e,r,n[r]),r++}else if(null!=n){const l=n[Symbol.iterator]();let c=l.next();for(;!c.done&&r<=o;){const u=t.at(r),d=c.value,h=nP(r,u,r,d,e);if(0!==h)h<0&&t.updateValue(r,d),r++,c=l.next();else{i??=new IY,s??=TY(t,r,o,e);const f=e(r,d);if(iP(t,i,r,f))t.updateValue(r,d),r++,o++,c=l.next();else if(s.has(f)){const p=e(r,u);i.set(p,t.detach(r)),o--}else t.attach(r,t.create(r,d)),r++,o++,c=l.next()}}for(;!c.done;)EY(t,i,e,t.length,c.value),c=l.next()}for(;r<=o;)t.destroy(t.detach(o--));i?.forEach(l=>{t.destroy(l)})}(l,t,r.trackByFn),l.updateIndexes(),r.hasEmptyBlock){const c=Gu(),u=0===l.length;if(no(i,c,u)){const d=e+2,h=Y2(i,d);if(u){const f=sP(s,d),p=e_(h,f.tView.ssrId);zb(h,Vb(i,f,void 0,{dehydratedView:p}),0,Qm(f,p))}else c3(h,0)}}}finally{Ae(n)}}function Y2(t,n){return t[n]}function sP(t,n){return I0(t,n)}function m(t,n,e,i){const s=ft(),r=Oi(),o=wn+t,a=s[Jn],l=r.firstCreatePass?function kDe(t,n,e,i,s,r){const o=n.consts,l=Zm(n,t,2,i,Xc(o,s));return n3(n,e,l,Xc(o,r)),null!==l.attrs&&L2(l,l.attrs,!1),null!==l.mergedAttrs&&L2(l,l.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,l),l}(o,r,s,n,e,i):r.data[o],c=MY(r,s,l,a,n,t);s[o]=c;const u=zT(l);return Uu(l,!0),Kq(a,c,l),!function Wb(t){return!(32&~t.flags)}(l)&&M0()&&w2(r,s,c,l),0===function ixe(){return ei.lFrame.elementDepthCount}()&&Ha(c,s),function sxe(){ei.lFrame.elementDepthCount++}(),u&&(JL(r,s,l),QL(r,l,s)),null!==i&&e3(s,l),m}function _(){let t=Us();tL()?nL():(t=t.parent,Uu(t,!1));const n=t;(function oxe(t){return ei.skipHydrationRootTNode===t})(n)&&function uxe(){ei.skipHydrationRootTNode=null}(),function rxe(){ei.lFrame.elementDepthCount--}();const e=Oi();return e.firstCreatePass&&(WT(e,t),WF(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function wxe(t){return!!(8&t.flags)}(n)&&eP(e,n,ft(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function Sxe(t){return!!(16&t.flags)}(n)&&eP(e,n,ft(),n.stylesWithoutHost,!1),_}function be(t,n,e,i){return m(t,n,e,i),_(),be}let MY=(t,n,e,i,s,r)=>(Od(!0),b2(i,s,function uW(){return ei.lFrame.currentNamespace}()));function sn(t,n,e){const i=ft(),s=Oi(),r=t+wn,o=s.firstCreatePass?function ADe(t,n,e,i,s){const r=n.consts,o=Xc(r,i),a=Zm(n,t,8,"ng-container",o);return null!==o&&L2(a,o,!0),n3(n,e,a,Xc(r,s)),null!==n.queries&&n.queries.elementStart(n,a),a}(r,s,i,n,e):s.data[r];Uu(o,!0);const a=AY(s,i,o,t);return i[r]=a,M0()&&w2(s,i,a,o),Ha(a,i),zT(o)&&(JL(s,i,o),QL(s,o,i)),null!=e&&e3(i,o),sn}function rn(){let t=Us();const n=Oi();return tL()?nL():(t=t.parent,Uu(t,!1)),n.firstCreatePass&&(WT(n,t),WF(t)&&n.queries.elementEnd(t)),rn}function Ss(t,n,e){return sn(t,n,e),rn(),Ss}let AY=(t,n,e,i)=>(Od(!0),jL(n[Jn],""));function Le(){return ft()}function Wa(t,n,e){const i=ft();return no(i,Gu(),n)&&Ll(Oi(),pr(),i,t,n,i[Jn],e,!0),Wa}function mw(t,n,e){const i=ft();if(no(i,Gu(),n)){const r=Oi(),o=pr();Ll(r,o,i,t,n,lK(sL(r.data),o,i),e,!0)}return mw}const r_=void 0;var FDe=["en",[["a","p"],["AM","PM"],r_],[["AM","PM"],r_,r_],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],r_,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],r_,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",r_,"{1} 'at' {0}",r_],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function RDe(t){const e=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}];let dv={};function dl(t){const n=function LDe(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=NY(n);if(e)return e;const i=n.split("-")[0];if(e=NY(i),e)return e;if("en"===i)return FDe;throw new ot(701,!1)}function NY(t){return t in dv||(dv[t]=sr.ng&&sr.ng.common&&sr.ng.common.locales&&sr.ng.common.locales[t]),dv[t]}var mr=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(mr||{});const PDe=["zero","one","two","few","many"],hv="en-US",Z2={marker:"element"},Q2={marker:"ICU"};var $l=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}($l||{});let RY=hv;let _w=0,gw=0;let bw=(t,n,e,i)=>(Od(!0),function LY(t,n,e){const i=t[Jn];switch(e){case Node.COMMENT_NODE:return jL(i,n);case Node.TEXT_NODE:return GL(i,n);case Node.ELEMENT_NODE:return b2(i,n,null)}}(t,e,i));function PY(t,n,e,i){const s=e[Jn];let o,r=null;for(let a=0;a<n.length;a++){const l=n[a];if("string"==typeof l){const c=n[++a];null===e[c]&&(e[c]=bw(e,c,l,Node.TEXT_NODE))}else if("number"==typeof l)switch(1&l){case 0:const c=CK(l);let u,d;if(null===r&&(r=c,o=y2(s,i)),c===r?(u=i,d=o):(u=null,d=gs(e[c])),null!==d){const g=xK(l);Ym(s,d,e[g],u,!1);const y=ew(t,g);if(null!==y&&"object"==typeof y){const w=D2(y,e);null!==w&&PY(t,y.create[w],e,e[y.anchorIdx])}}break;case 1:const f=n[++a],p=n[++a];r3(s,T0(l>>>1,e),null,null,f,p,null)}else switch(l){case Q2:const c=n[++a],u=n[++a];null===e[u]&&Ha(e[u]=bw(e,u,c,Node.COMMENT_NODE),e);break;case Z2:const d=n[++a],h=n[++a];null===e[h]&&Ha(e[h]=bw(e,h,d,Node.ELEMENT_NODE),e)}}}function $Y(t,n,e,i,s){for(let r=0;r<e.length;r++){const o=e[r],a=e[++r];if(o&s){let l="";for(let c=r+1;c<=r+a;c++){const u=e[c];if("string"==typeof u)l+=u;else if("number"==typeof u)if(u<0)l+=di(n[i-u]);else{const d=u>>>2;switch(3&u){case 1:const h=e[++c],f=e[++c],p=t.data[d];"string"==typeof p?r3(n[Jn],n[d],null,p,h,l,f):Ll(t,p,n,h,l,n[Jn],f,!1);break;case 0:const g=n[d];null!==g&&Rq(n[Jn],g,l);break;case 2:WDe(t,ew(t,d),n,l);break;case 3:BY(t,ew(t,d),i,n)}}}}else{const l=e[r+1];if(l>0&&!(3&~l)){const u=ew(t,l>>>2);n[u.currentCaseLViewIndex]<0&&BY(t,u,i,n)}}r+=a}}function BY(t,n,e,i){let s=i[n.currentCaseLViewIndex];if(null!==s){let r=_w;s<0&&(s=i[n.currentCaseLViewIndex]=~s,r=-1),$Y(t,i,n.update[s],e,r)}}function WDe(t,n,e,i){const s=function qDe(t,n){let e=t.cases.indexOf(n);if(-1===e)switch(t.type){case 1:{const i=function $De(t,n){const e=function OY(t){return dl(t)[mr.PluralCase]}(n)(parseInt(t,10)),i=PDe[e];return void 0!==i?i:"other"}(n,function VDe(){return RY}());e=t.cases.indexOf(i),-1===e&&"other"!==i&&(e=t.cases.indexOf("other"));break}case 0:e=t.cases.indexOf("other")}return-1===e?null:e}(n,i);if(D2(n,e)!==s&&(VY(t,n,e),e[n.currentCaseLViewIndex]=null===s?null:~s,null!==s)){const o=e[n.anchorIdx];o&&PY(t,n.create[s],e,o),function W2e(t,n,e){RK(t,n,e)}(e,n.anchorIdx,s)}}function VY(t,n,e){let i=D2(n,e);if(null!==i){const s=n.remove[i];for(let r=0;r<s.length;r++){const o=s[r];if(o>0){const a=T0(o,e);null!==a&&H0(e[Jn],a)}else VY(t,ew(t,~o),e)}}}const J2=/\ufffd(\d+):?\d*\ufffd/gi,XDe=/\ufffd(\d+)\ufffd/,UY=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,vw="\ufffd",YDe=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,ZDe=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,QDe=/\uE500/g;function GY(t,n,e,i,s,r,o){const a=q0(t,i,1,null);let l=a<<$l.SHIFT,c=D0();n===c&&(c=null),null===c&&(l|=$l.APPEND_EAGERLY),o&&(l|=$l.COMMENT,function dTe(t){void 0===zL&&(zL=t())}(T2e)),s.push(l,null===r?"":r);const u=ZL(t,a,o?32:1,null===r?"":r,null);wK(e,u);const d=u.index;return Uu(u,!1),null!==c&&n!==c&&function C2e(t,n){let e=t.insertBeforeIndex;null===e?(Gq(vK,yK),e=t.insertBeforeIndex=[null,n]):(Uf(Array.isArray(e),!0,"Expecting array here"),e.push(n))}(c,d),u}function tMe(t,n,e,i,s,r,o,a){const l=a.match(J2),u=GY(n,e,i,o,s,l?null:a,!1).index;l&&yw(r,a,u,null,0,null),t.push({kind:0,index:u})}function yw(t,n,e,i,s,r){const o=t.length,a=o+1;t.push(null,null);const l=o+2,c=n.split(J2);let u=0;for(let d=0;d<c.length;d++){const h=c[d];if(1&d){const f=s+parseInt(h,10);t.push(-1-f),u|=jY(f)}else""!==h&&t.push(h)}return t.push(e<<2|(i?1:0)),i&&t.push(i,r),t[o]=u,t[a]=t.length-l,u}function jY(t){return 1<<Math.min(t,31)}function HY(t){let n,r,e="",i=0,s=!1;for(;null!==(n=YDe.exec(t));)s?n[0]===`${vw}/*${r}${vw}`&&(i=n.index,s=!1):(e+=t.substring(i,n.index+n[0].length),r=n[1],s=!0);return e+=t.slice(i),e}function WY(t,n,e,i,s,r,o){let a=0;const l={type:r.type,currentCaseLViewIndex:q0(n,e,1,null),anchorIdx:o,cases:[],create:[],remove:[],update:[]};(function lMe(t,n,e){t.push(jY(n.mainBinding),2,-1-n.mainBinding,e<<2|2)})(i,r,o),function S2e(t,n,e){const i=t.data[n];null===i?t.data[n]=e:i.value=e}(n,o,l);const c=r.values,u=[];for(let d=0;d<c.length;d++){const h=c[d],f=[];for(let g=0;g<h.length;g++){const v=h[g];if("string"!=typeof v){const y=f.push(v)-1;h[g]=`\x3c!--\ufffd${y}\ufffd--\x3e`}}const p=[];u.push(p),a=oMe(p,n,l,e,i,s,r.cases[d],h.join(""),f)|a}a&&function cMe(t,n,e){t.push(n,1,e<<2|3)}(i,a,o),t.push({kind:3,index:o,cases:u,currentCaseLViewIndex:l.currentCaseLViewIndex})}function rMe(t){const n=[],e=[];let i=1,s=0;const r=rP(t=t.replace(UY,function(o,a,l){return i="select"===l?0:1,s=parseInt(a.slice(1),10),""}));for(let o=0;o<r.length;){let a=r[o++].trim();1===i&&(a=a.replace(/\s*(?:=)?(\w+)\s*/,"$1")),a.length&&n.push(a);const l=rP(r[o++]);n.length>e.length&&e.push(l)}return{type:i,mainBinding:s,cases:n,values:e}}function rP(t){if(!t)return[];let n=0;const e=[],i=[],s=/[{}]/g;let r;for(s.lastIndex=0;r=s.exec(t);){const a=r.index;if("}"==r[0]){if(e.pop(),0==e.length){const l=t.substring(n,a);UY.test(l)?i.push(rMe(l)):i.push(l),n=a+1}}else{if(0==e.length){const l=t.substring(n,a);i.push(l),n=a+1}e.push("{")}}const o=t.substring(n);return i.push(o),i}function oMe(t,n,e,i,s,r,o,a,l){const c=[],u=[],d=[];e.cases.push(o),e.create.push(c),e.remove.push(u),e.update.push(d);const f=mq(Kf()).getInertBodyElement(a),p=PL(f)||f;return p?qY(t,n,e,i,s,c,u,d,p,r,l,0):0}function qY(t,n,e,i,s,r,o,a,l,c,u,d){let h=0,f=l.firstChild;for(;f;){const p=q0(n,i,1,null);switch(f.nodeType){case Node.ELEMENT_NODE:const g=f,v=g.tagName.toLowerCase();if(FL.hasOwnProperty(v)){oP(r,Z2,v,c,p),n.data[p]=v;const T=g.attributes;for(let W=0;W<T.length;W++){const H=T.item(W),P=H.name.toLowerCase();H.value.match(J2)?vq.hasOwnProperty(P)&&yw(a,H.value,p,H.name,0,LL[P]?p2:null):uMe(r,p,H)}const L={kind:1,index:p,children:[]};t.push(L),h=qY(L.children,n,e,i,s,r,o,a,f,p,u,d+1)|h,KY(o,p,d)}break;case Node.TEXT_NODE:const y=f.textContent||"",w=y.match(J2);oP(r,null,w?"":y,c,p),KY(o,p,d),w&&(h=yw(a,y,p,null,0,null)|h),t.push({kind:0,index:p});break;case Node.COMMENT_NODE:const E=XDe.exec(f.textContent||"");if(E){const L=u[parseInt(E[1],10)];oP(r,Q2,"",c,p),WY(t,n,i,s,c,L,p),aMe(o,p,d)}}f=f.nextSibling}return h}function KY(t,n,e){0===e&&t.push(n)}function aMe(t,n,e){0===e&&(t.push(~n),t.push(n))}function oP(t,n,e,i,s){null!==n&&t.push(n),t.push(e,s,function E2e(t,n,e){return t|n<<17|e<<1}(0,i,s))}function uMe(t,n,e){t.push(n<<1|1,e.name,e.value)}const dMe=/\[(\ufffd.+?\ufffd?)\]/,hMe=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,fMe=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,pMe=/{([A-Z0-9_]+)}/g,mMe=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,_Me=/\/\*/,gMe=/\d+\:(\d+)/;function Ri(t,n,e=-1){const i=Oi(),s=ft(),r=wn+t,o=Xc(i.consts,n),a=D0();i.firstCreatePass&&function eMe(t,n,e,i,s,r){const o=D0(),a=[],l=[],c=[[]],u=[[]];s=function sMe(t,n){if(function TK(t){return-1===t}(n))return HY(t);{const e=t.indexOf(`:${n}${vw}`)+2+n.toString().length,i=t.search(new RegExp(`${vw}\\/\\*\\d+:${n}${vw}`));return HY(t.substring(e,i))}}(s,r);const d=function JDe(t){return t.replace(QDe," ")}(s).split(ZDe);for(let h=0;h<d.length;h++){let f=d[h];if(1&h){const p=47===f.charCodeAt(0),g=f.charCodeAt(p?1:0),v=wn+Number.parseInt(f.substring(p?2:1));if(p)c.shift(),u.shift(),Uu(D0(),!1);else{const y=x2e(t,c[0],v);c.unshift([]),Uu(y,!0);const w={kind:2,index:v,children:[],type:35===g?0:1};u[0].push(w),u.unshift(w.children)}}else{const p=rP(f);for(let g=0;g<p.length;g++){let v=p[g];if(1&g){const y=v;if("object"!=typeof y)throw new Error(`Unable to parse ICU expression in "${s}" message.`);const E=GY(t,o,c[0],e,a,"",!0).index;WY(u[0],t,e,l,n,y,E)}else""!==v&&tMe(u[0],t,o,c[0],a,l,e,v)}}}t.data[i]={create:a,update:l,ast:u[0]}}(i,null===a?0:a.index,s,r,o,e),2===i.type?s[kr][An]|=32:s[An]|=32;const l=i.data[r],u=Pq(i,a===s[Ea]?null:a,s),d=a&&8&a.type?s[a.index]:null;(function L2e(t,n,e,i){OK(t,n,e,i)})(s,r,a,e),function HDe(t,n,e,i){const s=t[Jn];for(let r=0;r<n.length;r++){const o=n[r++],c=(o&$l.APPEND_EAGERLY)===$l.APPEND_EAGERLY,u=o>>>$l.SHIFT;let d=t[u],h=!1;null===d&&(d=t[u]=bw(t,u,n[r],(o&$l.COMMENT)===$l.COMMENT?Node.COMMENT_NODE:Node.TEXT_NODE),h=M0()),c&&null!==e&&h&&Ym(s,e,d,i,!1)}}(s,l.create,u,d),sW(!0)}function Fi(){sW(!1)}function Ne(t,n,e){Ri(t,n,e),Fi()}function $n(t){return function zDe(t){t&&(_w|=1<<Math.min(gw,31)),gw++}(no(ft(),Gu(),t)),$n}function zn(t){!function UDe(t,n,e){if(gw>0){const i=t.data[e];$Y(t,n,Array.isArray(i)?i:i.update,Ph()-gw-1,_w)}_w=0,gw=0}(Oi(),ft(),t+wn)}function o_(t,n={}){return function bMe(t,n={}){let e=t;if(dMe.test(t)){const i={},s=[0];e=e.replace(hMe,(r,o,a)=>{const l=o||a,c=i[l]||[];if(c.length||(l.split("|").forEach(g=>{const v=g.match(gMe),y=v?parseInt(v[1],10):0,w=_Me.test(g);c.push([y,w,g])}),i[l]=c),!c.length)throw new Error(`i18n postprocess: unmatched placeholder - ${l}`);const u=s[s.length-1];let d=0;for(let g=0;g<c.length;g++)if(c[g][0]===u){d=g;break}const[h,f,p]=c[d];return f?s.pop():u!==h&&s.push(h),c.splice(d,1),p})}return Object.keys(n).length&&(e=e.replace(fMe,(i,s,r,o,a,l)=>n.hasOwnProperty(r)?`${s}${n[r]}${l}`:i),e=e.replace(pMe,(i,s)=>n.hasOwnProperty(s)?n[s]:i),e=e.replace(mMe,(i,s)=>{if(n.hasOwnProperty(s)){const r=n[s];if(!r.length)throw new Error(`i18n postprocess: unmatched ICU - ${i} with key: ${s}`);return r.shift()}return i})),e}(t,n)}let YY=(t,n,e)=>{};function te(t,n,e,i){const s=ft(),r=Oi(),o=Us();return aP(r,s,s[Jn],o,t,n,i),te}function ww(t,n){const e=Us(),i=ft(),s=Oi();return aP(s,i,lK(sL(s.data),e,i),e,t,n),ww}function aP(t,n,e,i,s,r,o){const a=zT(i),c=t.firstCreatePass&&aK(t),u=n[fr],d=oK(n);let h=!0;if(3&i.type||o){const g=ol(i,n),v=o?o(g):g,y=d.length,w=o?T=>o(gs(T[i.index])):i.index;let E=null;if(!o&&a&&(E=function yMe(t,n,e,i){const s=t.cleanup;if(null!=s)for(let r=0;r<s.length-1;r+=2){const o=s[r];if(o===e&&s[r+1]===i){const a=n[xb],l=s[r+2];return a.length>l?a[l]:null}"string"==typeof o&&(r+=2)}return null}(t,n,s,i.index)),null!==E)(E.__ngLastListenerFn__||E).__ngNextListenerFn__=r,E.__ngLastListenerFn__=r,h=!1;else{r=JY(i,n,u,r),YY(g,s,r);const T=e.listen(v,s,r);d.push(r,T),c&&c.push(s,w,y,y+1)}}else r=JY(i,n,u,r);const f=i.outputs;let p;if(h&&null!==f&&(p=f[s])){const g=p.length;if(g)for(let v=0;v<g;v+=2){const L=n[p[v]][p[v+1]].subscribe(r),W=d.length;d.push(r,L),c&&c.push(s,i.index,W,-(W+1))}}}function QY(t,n,e,i){const s=Ae(null);try{return Ad(6,n,e),!1!==e(i)}catch(r){return E2(t,r),!1}finally{Ad(7,n,e),Ae(s)}}function JY(t,n,e,i){return function s(r){if(r===Function)return i;X0(t.componentOffset>-1?_c(t.index,n):n,5);let a=QY(n,e,i,r),l=s.__ngNextListenerFn__;for(;l;)a=QY(n,e,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function M(t=1){return function mxe(t){return(ei.lFrame.contextLView=function XH(t,n){for(;t>0;)n=n[Eb],t--;return n}(t,ei.lFrame.contextLView))[fr]}(t)}function wMe(t,n){let e=null;const i=function gCe(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(!(1&e))return n[e+1]}return null}(t);for(let s=0;s<n.length;s++){const r=n[s];if("*"!==r){if(null===i?EH(t,r,!0):yCe(i,r))return s}else e=s}return e}function Ti(t){const n=ft()[kr][Ea];if(!n.projection){const i=n.projection=function DT(t,n){const e=[];for(let i=0;i<t;i++)e.push(n);return e}(t?t.length:1,null),s=i.slice();let r=n.child;for(;null!==r;){if(128!==r.type){const o=t?wMe(r,t):0;null!==o&&(s[o]?s[o].projectionNext=r:i[o]=r,s[o]=r)}r=r.next}}}function un(t,n=0,e,i,s,r){const o=ft(),a=Oi(),l=i?t+1:null;null!==l&&uw(o,a,l,i,s,r,null,e);const c=Zm(a,wn+t,16,null,e||null);null===c.projection&&(c.projection=n),nL();const d=!o[rl]||Gm();null===o[kr][Ea].projection[c.projection]&&null!==l?function SMe(t,n,e){const i=wn+e,s=n.data[i],r=t[i],o=e_(r,s.tView.ssrId);zb(r,Vb(t,s,void 0,{dehydratedView:o}),0,Qm(s,o))}(o,a,l):d&&32&~c.flags&&function yTe(t,n,e){Wq(n[Jn],0,n,e,qL(t,e,n),Vq(e.parent||n[Ea],e,n))}(a,o,c)}function Li(t,n,e,i){uX(t,n,e,i)}function Zt(t,n,e){!function cX(t,n,e){const i=Oi();return i.firstCreatePass&&(dX(i,new oX(t,n,e),-1),!(2&~n)&&(i.staticViewQueries=!0)),lX(i,ft(),n)}(t,n,e)}function xt(t){const n=ft(),e=Oi(),i=rL();HT(i+1);const s=L3(e,i);if(t.dirty&&function txe(t){return!(4&~t[An])}(n)===!(2&~s.metadata.flags)){if(null===s.matches)t.reset([]);else{const r=hX(n,i);t.reset(r,RW),t.notifyOnChanges()}return!0}return!1}function Et(){return F3(ft(),rL())}function cZ(t,n,e,i,s){!function bX(t,n){const e=t[dt];e._lView=ft(),e._queryIndex=n,e._queryList=F3(e._lView,n),e._queryList.onDirty(()=>e._dirtyCounter.update(i=>i+1))}(n,uX(t,e,i,s))}function Gt(t){return Um(function JH(){return ei.lFrame.contextLView}(),wn+t)}function C(t,n=""){const e=ft(),i=Oi(),s=t+wn,r=i.firstCreatePass?Zm(i,s,1,n,null):i.data[s],o=yZ(i,e,r,n,t);e[s]=o,M0()&&w2(i,e,o,r),Uu(r,!1)}let yZ=(t,n,e,i,s)=>(Od(!0),GL(n[Jn],i));function vt(t){return xe("",t,""),vt}function xe(t,n,e){const i=ft(),s=ev(i,t,n,e);return s!==hi&&zh(i,Ta(),s),xe}function Ts(t,n,e,i,s){const r=ft(),o=function tv(t,n,e,i,s,r){const a=n_(t,Ph(),e,s);return $h(2),a?n+di(e)+i+di(s)+r:hi}(r,t,n,e,i,s);return o!==hi&&zh(r,Ta(),o),Ts}function fv(t,n,e,i,s,r,o){const a=ft(),l=function nv(t,n,e,i,s,r,o,a){const c=U2(t,Ph(),e,s,o);return $h(3),c?n+di(e)+i+di(s)+r+di(o)+a:hi}(a,t,n,e,i,s,r,o);return l!==hi&&zh(a,Ta(),l),fv}function Un(t,n,e){pX(n)&&(n=n());const i=ft();return no(i,Gu(),n)&&Ll(Oi(),pr(),i,t,n,i[Jn],e,!1),Un}function Fn(t,n){const e=pX(t);return e&&t.set(n),e}function Gn(t,n){const e=ft(),i=Oi(),s=Us();return aP(i,e,e[Jn],s,t,n),Gn}function uP(t,n,e,i,s){if(t=Yn(t),Array.isArray(t))for(let r=0;r<t.length;r++)uP(t[r],n,e,i,s);else{const r=Oi(),o=ft(),a=Us();let l=Bm(t)?t:Yn(t.provide);const c=NH(t),u=1048575&a.providerIndexes,d=a.directiveStart,h=a.providerIndexes>>20;if(Bm(t)||!t.multi){const f=new A0(c,s,D),p=hP(l,n,s?u:u+h,d);-1===p?(pL(YT(a,o),r,l),dP(r,t,n.length),n.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),e.push(f),o.push(f)):(e[p]=f,o[p]=f)}else{const f=hP(l,n,u+h,d),p=hP(l,n,u,u+h),v=p>=0&&e[p];if(s&&!v||!s&&!(f>=0&&e[f])){pL(YT(a,o),r,l);const y=function VMe(t,n,e,i,s){const r=new A0(t,e,D);return r.multi=[],r.index=n,r.componentProviders=0,DZ(r,s,i&&!e),r}(s?BMe:$Me,e.length,s,i,c);!s&&v&&(e[p].providerFactory=y),dP(r,t,n.length,0),n.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),e.push(y),o.push(y)}else dP(r,t,f>-1?f:p,DZ(e[s?p:f],c,!s&&i));!s&&i&&v&&e[p].componentProviders++}}}function dP(t,n,e,i){const s=Bm(n),r=function MCe(t){return!!t.useClass}(n);if(s||r){const l=(r?Yn(n.useClass):n).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!s&&n.multi){const u=c.indexOf(e);-1===u?c.push(e,[i,l]):c[u+1].push(i,l)}else c.push(e,l)}}}function DZ(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function hP(t,n,e,i){for(let s=e;s<i;s++)if(n[s]===t)return s;return-1}function $Me(t,n,e,i){return fP(this.multi,[])}function BMe(t,n,e,i){const s=this.multi;let r;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Wm(e,e[Vt],this.providerFactory.index,i);r=a.slice(0,o),fP(s,r);for(let l=o;l<a.length;l++)r.push(a[l])}else r=[],fP(s,r);return r}function fP(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function Lt(t,n=[]){return e=>{e.providersResolver=(i,s)=>function PMe(t,n,e){const i=Oi();if(i.firstCreatePass){const s=zu(t);uP(e,i.data,i.blueprint,s,!0),uP(n,i.data,i.blueprint,s,!1)}}(i,s?s(t):t,n)}}let zMe=(()=>{class t{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const i=PF(0,e.type),s=i.length>0?V2([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,s)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ut({token:t,providedIn:"environment",factory:()=>new t(Re(Ga))})}return t})();function Ln(t){cl("NgStandalone"),t.getStandaloneInjector=n=>n.get(zMe).getOrCreateStandaloneInjector(t)}function Is(t,n,e){const i=t.\u0275cmp;i.directiveDefs=OT(n,!1),i.pipeDefs=OT(e,!0)}function pn(t,n,e){const i=al()+t,s=ft();return s[i]===hi?Ld(s,i,e?n.call(e):n()):function cw(t,n){return t[n]}(s,i)}function Sw(t,n){const e=t[n];return e===hi?void 0:e}function FZ(t,n,e,i,s,r){const o=n+e;return no(t,o,s)?Ld(t,o+1,r?i.call(r,s):i(s)):Sw(t,o+1)}function LZ(t,n,e,i,s,r,o){const a=n+e;return n_(t,a,s,r)?Ld(t,a+2,o?i.call(o,s,r):i(s,r)):Sw(t,a+2)}function PZ(t,n,e,i,s,r,o,a){const l=n+e;return U2(t,l,s,r,o)?Ld(t,l+3,a?i.call(a,s,r,o):i(s,r,o)):Sw(t,l+3)}function ge(t,n){const e=Oi();let i;const s=t+wn;e.firstCreatePass?(i=function KMe(t,n){if(n)for(let e=n.length-1;e>=0;e--){const i=n[e];if(t===i.name)return i}}(n,e.pipeRegistry),e.data[s]=i,i.onDestroy&&(e.destroyHooks??=[]).push(s,i.onDestroy)):i=e.data[s];const r=i.factory||(i.factory=$m(i.type)),a=Ol(D);try{const l=XT(!1),c=r();return XT(l),function cP(t,n,e,i){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=i}(e,ft(),s,c),c}finally{Ol(a)}}function Me(t,n,e){const i=t+wn,s=ft(),r=Um(s,i);return Cw(s,i)?FZ(s,al(),n,r.transform,e,r):r.transform(e)}function Kt(t,n,e,i){const s=t+wn,r=ft(),o=Um(r,s);return Cw(r,s)?LZ(r,al(),n,o.transform,e,i,o):o.transform(e,i)}function pv(t,n,e,i,s){const r=t+wn,o=ft(),a=Um(o,r);return Cw(o,r)?PZ(o,al(),n,a.transform,e,i,s,a):a.transform(e,i,s)}function Cw(t,n){return t[Vt].data[n].pure}function mn(t,n){return I2(t,n)}class a_{constructor(n){this.full=n;const e=n.split(".");this.major=e[0],this.minor=e[1],this.patch=e.slice(2).join(".")}}const vP=new a_("18.1.2");let tQ=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const oQ=new st(""),rI=new st("");let CP,wP=(()=>{class t{constructor(e,i,s){this._ngZone=e,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,CP||(function GAe(t){CP=t}(s),s.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Wt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,s){let r=-1;i&&i>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==r),e()},i)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:s})}whenStable(e,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,s),this._runCallbacksIfReady()}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,s){return[]}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Wt),Re(SP),Re(rI))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})(),SP=(()=>{class t{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return CP?.findTestabilityInTree(this,e,i)??null}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Tw(t){return!!t&&"function"==typeof t.then}function aQ(t){return!!t&&"function"==typeof t.subscribe}const Iw=new st("");let xP=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=Je(Iw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const s of this.appInits){const r=s();if(Tw(r))e.push(r);else if(aQ(r)){const o=new Promise((a,l)=>{r.subscribe({complete:a,error:l})});e.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(s=>{this.reject(s)}),0===e.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const oI=new st("");function uQ(t,n){return Array.isArray(n)?n.reduce(uQ,t):{...t,...n}}let Bl=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Je(OW),this.afterRenderEffectManager=Je(R2),this.zonelessEnabled=Je(sw),this.externalTestViews=new Set,this.beforeRender=new Pt,this.afterTick=new Pt,this.componentTypes=[],this.components=[],this.isStable=Je(Bh).hasPendingTasks.pipe(ze(e=>!e)),this._injector=Je(Ga)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,i){const s=e instanceof BK;if(!this._injector.get(xP).done)throw!s&&function Hf(t){const n=zi(t)||zo(t)||xa(t);return null!==n&&n.standalone}(e),new ot(405,!1);let o;o=s?e:this._injector.get(jb).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const a=function jAe(t){return t.isBoundToModule}(o)?void 0:this._injector.get(t_),c=o.create(ti.NULL,[],i||o.selector,a),u=c.location.nativeElement,d=c.injector.get(oQ,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),aI(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this._tick(!0)}_tick(e){if(this._runningTick)throw new ot(101,!1);const i=Ae(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(e)}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1,Ae(i),this.afterTick.next()}}detectChangesInAttachedViews(e){let i=null;this._injector.destroyed||(i=this._injector.get(N2,null,{optional:!0}));let s=0;const r=this.afterRenderEffectManager;for(;s<10;){const o=0===s;if(e||!o){this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:l}of this._views)WAe(a,l,o,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(s++,r.executeInternalCallbacks(),!this.allViews.some(({_lView:a})=>k0(a))&&(r.execute(),!this.allViews.some(({_lView:a})=>k0(a))))break}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;aI(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const i=this._injector.get(oI,[]);[...this._bootstrapListeners,...i].forEach(s=>s(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>aI(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new ot(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function aI(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function WAe(t,n,e,i){(e||k0(t))&&T2(t,n,e&&!i?0:1)}class qAe{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let hQ=(()=>{class t{compileModuleSync(e){return new B3(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),r=yc(Ua(e).declarations).reduce((o,a)=>{const l=zi(a);return l&&o.push(new aw(l)),o},[]);return new qAe(i,r)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),YAe=(()=>{class t{constructor(){this.zone=Je(Wt),this.changeDetectionScheduler=Je(Gb),this.applicationRef=Je(Bl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function EP({ngZoneFactory:t,ignoreChangesOutsideZone:n}){return t??=()=>new Wt(TP()),[{provide:Wt,useFactory:t},{provide:Lu,multi:!0,useFactory:()=>{const e=Je(YAe,{optional:!0});return()=>e.initialize()}},{provide:Lu,multi:!0,useFactory:()=>{const e=Je(JAe);return()=>{e.initialize()}}},{provide:OW,useFactory:QAe},!0===n?{provide:$K,useValue:!0}:[]]}function QAe(){const t=Je(Wt),n=Je(gc);return e=>t.runOutsideAngular(()=>n.handleError(e))}function TP(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}let JAe=(()=>{class t{constructor(){this.subscription=new Tn,this.initialized=!1,this.zone=Je(Wt),this.pendingTasks=Je(Bh)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Wt.assertNotInAngularZone(),queueMicrotask(()=>{null!==e&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Wt.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),kw=(()=>{class t{constructor(){this.appRef=Je(Bl),this.taskService=Je(Bh),this.ngZone=Je(Wt),this.zonelessEnabled=Je(sw),this.disableScheduling=Je($K,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Tn,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof C3||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&5===e)return;switch(e){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const i=this.useMicrotaskScheduler?GK:UK;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Wt.isInAngularZone())}tick(e){if(this.runningTick||this.appRef.destroyed)return;const i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(e)},void 0,this.schedulerTickApplyArgs)}catch(s){throw this.taskService.remove(i),s}finally{this.cleanup()}this.useMicrotaskScheduler=!0,GK(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const $d=new st("",{providedIn:"root",factory:()=>Je($d,Wi.Optional|Wi.SkipSelf)||function eOe(){return typeof $localize<"u"&&$localize.locale||hv}()}),tOe=new st("",{providedIn:"root",factory:()=>"USD"}),kP=new st("");let _Q=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const s=function hIe(t="zone.js",n){return"noop"===t?new C3:"zone.js"===t?new Wt(n):t}(i?.ngZone,TP({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return s.run(()=>{const r=i?.ignoreChangesOutsideZone,o=function oke(t,n,e){return new $3(t,n,e)}(e.moduleType,this.injector,[...EP({ngZoneFactory:()=>s,ignoreChangesOutsideZone:r}),{provide:Gb,useExisting:kw}]),a=o.injector.get(gc,null);return s.runOutsideAngular(()=>{const l=s.onError.subscribe({next:c=>{a.handleError(c)}});o.onDestroy(()=>{aI(this._modules,o),l.unsubscribe()})}),function cQ(t,n,e){try{const i=e();return Tw(i)?i.catch(s=>{throw n.runOutsideAngular(()=>t.handleError(s)),s}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}(a,s,()=>{const l=o.injector.get(xP);return l.runInitializers(),l.donePromise.then(()=>(function FY(t){"string"==typeof t&&(RY=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get($d,hv)||hv),this._moduleDoBootstrap(o),o))})})}bootstrapModule(e,i=[]){const s=uQ({},i);return function XAe(t,n,e){const i=new B3(e);return Promise.resolve(i)}(0,0,e).then(r=>this.bootstrapModuleFactory(r,s))}_moduleDoBootstrap(e){const i=e.injector.get(Bl);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(s=>i.bootstrap(s));else{if(!e.instance.ngDoBootstrap)throw new ot(-403,!1);e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ot(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const e=this._injector.get(kP,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||t)(Re(ti))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),tp=null;const gQ=new st("");function bQ(t,n,e=[]){const i=`Platform: ${n}`,s=new st(i);return(r=[])=>{let o=DP();if(!o||o.injector.get(gQ,!1)){const a=[...e,...r,{provide:s,useValue:!0}];t?t(a):function iOe(t){if(tp&&!tp.get(gQ,!1))throw new ot(400,!1);(function lQ(){!function yr(t){sl=t}(()=>{throw new ot(600,!1)})})(),tp=t;const n=t.get(_Q);(function yQ(t){t.get(eq,null)?.forEach(e=>e())})(t)}(function vQ(t=[],n){return ti.create({name:n,providers:[{provide:VF,useValue:"platform"},{provide:kP,useValue:new Set([()=>tp=null])},...t]})}(a,i))}return function sOe(t){const n=DP();if(!n)throw new ot(401,!1);return n}()}}function DP(){return tp?.get(_Q)??null}let bi=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=oOe}return t})();function oOe(t){return function aOe(t,n,e){if(zm(t)&&!e){const i=_c(t.index,n);return new Y0(i,i)}return 175&t.type?new Y0(n[kr],n):null}(Us(),ft(),!(16&~t))}class EQ{constructor(){}supports(n){return z2(n)}create(n){return new hOe(n)}}const dOe=(t,n)=>n;class hOe{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||dOe}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,s=0,r=null;for(;e||i;){const o=!i||e&&e.currentIndex<IQ(i,s,r)?e:i,a=IQ(o,s,r),l=o.currentIndex;if(o===i)s--,i=i._nextRemoved;else if(e=e._next,null==o.previousIndex)s++;else{r||(r=[]);const c=a-s,u=l-s;if(c!=u){for(let h=0;h<c;h++){const f=h<r.length?r[h]:r[h]=0,p=f+h;u<=p&&p<c&&(r[h]=f+1)}r[o.previousIndex]=u-c}}a!==l&&n(o,a,l)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!z2(n))throw new ot(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let s,r,o,e=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let a=0;a<this.length;a++)r=n[a],o=this._trackByFn(a,r),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,r,o,a)),Object.is(e.item,r)||this._addIdentityChange(e,r)):(e=this._mismatch(e,r,o,a),i=!0),e=e._next}else s=0,function cke(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[Symbol.iterator]();let i;for(;!(i=e.next()).done;)n(i.value)}}(n,a=>{o=this._trackByFn(s,a),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,a,o,s)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,s),i=!0),e=e._next,s++}),this.length=s;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,s){let r;return null===n?r=this._itTail:(r=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,r,s)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,s))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,r,s)):n=this._addAfter(new fOe(e,i),r,s),n}_verifyReinsertion(n,e,i,s){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==r?n=this._reinsertAfter(r,n._prev,s):n.currentIndex!=s&&(n.currentIndex=s,this._addToMoves(n,s)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const s=n._prevRemoved,r=n._nextRemoved;return null===s?this._removalsHead=r:s._nextRemoved=r,null===r?this._removalsTail=s:r._prevRemoved=s,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){const s=null===e?this._itHead:e._next;return n._next=s,n._prev=e,null===s?this._itTail=n:s._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new TQ),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,i=n._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new TQ),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class fOe{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pOe{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const e=n._prevDup,i=n._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class TQ{constructor(){this.map=new Map}put(n){const e=n.trackById;let i=this.map.get(e);i||(i=new pOe,this.map.set(e,i)),i.add(n)}get(n,e){const s=this.map.get(n);return s?s.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function IQ(t,n,e){const i=t.previousIndex;if(null===i)return i;let s=0;return e&&i<e.length&&(s=e[i]),i+n+s}function DQ(){return new Uh([new EQ])}let Uh=(()=>{class t{static#e=this.\u0275prov=ut({token:t,providedIn:"root",factory:DQ});constructor(e){this.factories=e}static create(e,i){if(null!=i){const s=i.factories.slice();e=e.concat(s)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||DQ()),deps:[[t,new Rh,new Id]]}}find(e){const i=this.factories.find(s=>s.supports(e));if(null!=i)return i;throw new ot(901,!1)}}return t})();const vOe=bQ(null,"core",[]);let yOe=(()=>{class t{constructor(e){}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Bl))};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({})}return t})();const qQ=new st("");function Rt(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function Dr(t,n=NaN){return isNaN(parseFloat(t))||isNaN(Number(t))?n:Number(t)}function c_(t,n){cl("NgSignals");const e=Yt(t);return n?.equal&&(e[dt].equal=n.equal),e}function Xu(t){const n=Ae(null);try{return t()}finally{Ae(n)}}const nNe=new st("",{providedIn:"root",factory:()=>Je(iNe)});let iNe=(()=>{class t{static#e=this.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new sNe})}return t})();class sNe{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=Je(Bh),this.taskId=null}scheduleEffect(n){if(this.enqueue(n),null===this.taskId){const e=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(e),this.taskId=null})}}enqueue(n){const e=n.creationZone;this.queues.has(e)||this.queues.set(e,new Set);const i=this.queues.get(e);i.has(n)||(this.queuedEffectCount++,i.add(n))}flush(){for(;this.queuedEffectCount>0;)for(const[n,e]of this.queues)null===n?this.flushQueue(e):n.run(()=>this.flushQueue(e))}flushQueue(n){for(const e of n)n.delete(e),this.queuedEffectCount--,e.run()}}class rNe{constructor(n,e,i,s,r,o){this.scheduler=n,this.effectFn=e,this.creationZone=i,this.injector=r,this.watcher=function Lwe(t,n,e){const i=Object.create(Pwe);e&&(i.consumerAllowSignalWrites=!0),i.fn=t,i.schedule=n;const s=l=>{i.cleanupFn=l};return i.ref={notify:()=>ct(i),run:()=>{if(null===i.fn)return;if(function he(){return Ue}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(i.dirty=!1,i.hasRun&&!Xn(i))return;i.hasRun=!0;const l=It(i);try{i.cleanupFn(),i.cleanupFn=aF,i.fn(s)}finally{on(i,l)}},cleanup:()=>i.cleanupFn(),destroy:()=>function o(l){(function r(l){return null===l.fn&&null===l.schedule})(l)||(ci(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=aF)}(i),[dt]:i},i.ref}(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}runEffect(n){try{this.effectFn(n)}catch(e){this.injector.get(gc,null,{optional:!0})?.handleError(e)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}let sJ=null;function np(){return sJ}class lNe{}const Zn=new st("");let PP=(()=>{class t{historyGo(e){throw new Error("")}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:()=>Je(uNe),providedIn:"platform"})}return t})();const cNe=new st("");let uNe=(()=>{class t extends PP{constructor(){super(),this._doc=Je(Zn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return np().getBaseHref(this._doc)}onPopState(e){const i=np().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=np().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,s){this._history.pushState(e,i,s)}replaceState(e,i,s){this._history.replaceState(e,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function $P(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function rJ(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function Gh(t){return t&&"?"!==t[0]?"?"+t:t}let u_=(()=>{class t{historyGo(e){throw new Error("")}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:()=>Je(aJ),providedIn:"root"})}return t})();const oJ=new st("");let aJ=(()=>{class t extends u_{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Je(Zn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return $P(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+Gh(this._platformLocation.search),s=this._platformLocation.hash;return s&&e?`${i}${s}`:i}pushState(e,i,s,r){const o=this.prepareExternalUrl(s+Gh(r));this._platformLocation.pushState(e,i,o)}replaceState(e,i,s,r){const o=this.prepareExternalUrl(s+Gh(r));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Re(PP),Re(oJ,8))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),dNe=(()=>{class t extends u_{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){const i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=$P(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,s,r){let o=this.prepareExternalUrl(s+Gh(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,i,o)}replaceState(e,i,s,r){let o=this.prepareExternalUrl(s+Gh(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Re(PP),Re(oJ,8))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})(),d_=(()=>{class t{constructor(e){this._subject=new it,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function pNe(t){if(new RegExp("^(https?:)?//").test(t)){const[,e]=t.split(/\/\/[^\/]+/);return e}return t}(rJ(lJ(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Gh(i))}normalize(e){return t.stripTrailingSlash(function fNe(t,n){if(!t||!n.startsWith(t))return n;const e=n.substring(t.length);return""===e||["/",";","?","#"].includes(e[0])?e:n}(this._basePath,lJ(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",s=null){this._locationStrategy.pushState(s,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Gh(i)),s)}replaceState(e,i="",s=null){this._locationStrategy.replaceState(s,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Gh(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(s=>s(e,i))}subscribe(e,i,s){return this._subject.subscribe({next:e,error:i,complete:s})}static#e=this.normalizeQueryParams=Gh;static#t=this.joinWithSlash=$P;static#n=this.stripTrailingSlash=rJ;static#i=this.\u0275fac=function(i){return new(i||t)(Re(u_))};static#s=this.\u0275prov=ut({token:t,factory:()=>function hNe(){return new d_(Re(u_))}(),providedIn:"root"})}return t})();function lJ(t){return t.replace(/\/index.html$/,"")}const cJ={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var bI=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(bI||{}),fl=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(fl||{}),ar=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(ar||{}),Sc=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Sc||{});const vo={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function vI(t,n){return eu(dl(t)[mr.DateFormat],n)}function yI(t,n){return eu(dl(t)[mr.TimeFormat],n)}function wI(t,n){return eu(dl(t)[mr.DateTimeFormat],n)}function Jc(t,n){const e=dl(t),i=e[mr.NumberSymbols][n];if(typeof i>"u"){if(n===vo.CurrencyDecimal)return e[mr.NumberSymbols][vo.Decimal];if(n===vo.CurrencyGroup)return e[mr.NumberSymbols][vo.Group]}return i}function uJ(t){if(!t[mr.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[mr.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function eu(t,n){for(let e=n;e>-1;e--)if(typeof t[e]<"u")return t[e];throw new Error("Locale data API: locale data undefined")}function VP(t){const[n,e]=t.split(":");return{hours:+n,minutes:+e}}const kNe=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,SI={},DNe=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var jh=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(jh||{}),ks=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(ks||{}),Ds=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(Ds||{});function MNe(t,n,e,i){let s=function BNe(t){if(fJ(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[s,r=1,o=1]=t.split("-").map(a=>+a);return CI(s,r-1,o)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let i;if(i=t.match(kNe))return function VNe(t){const n=new Date(0);let e=0,i=0;const s=t[8]?n.setUTCFullYear:n.setFullYear,r=t[8]?n.setUTCHours:n.setHours;t[9]&&(e=Number(t[9]+t[10]),i=Number(t[9]+t[11])),s.call(n,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-e,a=Number(t[5]||0)-i,l=Number(t[6]||0),c=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return r.call(n,o,a,l,c),n}(i)}const n=new Date(t);if(!fJ(n))throw new Error(`Unable to convert "${t}" into a date`);return n}(t);n=Hh(e,n)||n;let a,o=[];for(;n;){if(a=DNe.exec(n),!a){o.push(n);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;n=u}}let l=s.getTimezoneOffset();i&&(l=hJ(i,l),s=function $Ne(t,n,e){const i=e?-1:1,s=t.getTimezoneOffset();return function PNe(t,n){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+n),t}(t,i*(hJ(n,s)-s))}(s,i,!0));let c="";return o.forEach(u=>{const d=function LNe(t){if(UP[t])return UP[t];let n;switch(t){case"G":case"GG":case"GGG":n=_r(Ds.Eras,ar.Abbreviated);break;case"GGGG":n=_r(Ds.Eras,ar.Wide);break;case"GGGGG":n=_r(Ds.Eras,ar.Narrow);break;case"y":n=yo(ks.FullYear,1,0,!1,!0);break;case"yy":n=yo(ks.FullYear,2,0,!0,!0);break;case"yyy":n=yo(ks.FullYear,3,0,!1,!0);break;case"yyyy":n=yo(ks.FullYear,4,0,!1,!0);break;case"Y":n=II(1);break;case"YY":n=II(2,!0);break;case"YYY":n=II(3);break;case"YYYY":n=II(4);break;case"M":case"L":n=yo(ks.Month,1,1);break;case"MM":case"LL":n=yo(ks.Month,2,1);break;case"MMM":n=_r(Ds.Months,ar.Abbreviated);break;case"MMMM":n=_r(Ds.Months,ar.Wide);break;case"MMMMM":n=_r(Ds.Months,ar.Narrow);break;case"LLL":n=_r(Ds.Months,ar.Abbreviated,fl.Standalone);break;case"LLLL":n=_r(Ds.Months,ar.Wide,fl.Standalone);break;case"LLLLL":n=_r(Ds.Months,ar.Narrow,fl.Standalone);break;case"w":n=zP(1);break;case"ww":n=zP(2);break;case"W":n=zP(1,!0);break;case"d":n=yo(ks.Date,1);break;case"dd":n=yo(ks.Date,2);break;case"c":case"cc":n=yo(ks.Day,1);break;case"ccc":n=_r(Ds.Days,ar.Abbreviated,fl.Standalone);break;case"cccc":n=_r(Ds.Days,ar.Wide,fl.Standalone);break;case"ccccc":n=_r(Ds.Days,ar.Narrow,fl.Standalone);break;case"cccccc":n=_r(Ds.Days,ar.Short,fl.Standalone);break;case"E":case"EE":case"EEE":n=_r(Ds.Days,ar.Abbreviated);break;case"EEEE":n=_r(Ds.Days,ar.Wide);break;case"EEEEE":n=_r(Ds.Days,ar.Narrow);break;case"EEEEEE":n=_r(Ds.Days,ar.Short);break;case"a":case"aa":case"aaa":n=_r(Ds.DayPeriods,ar.Abbreviated);break;case"aaaa":n=_r(Ds.DayPeriods,ar.Wide);break;case"aaaaa":n=_r(Ds.DayPeriods,ar.Narrow);break;case"b":case"bb":case"bbb":n=_r(Ds.DayPeriods,ar.Abbreviated,fl.Standalone,!0);break;case"bbbb":n=_r(Ds.DayPeriods,ar.Wide,fl.Standalone,!0);break;case"bbbbb":n=_r(Ds.DayPeriods,ar.Narrow,fl.Standalone,!0);break;case"B":case"BB":case"BBB":n=_r(Ds.DayPeriods,ar.Abbreviated,fl.Format,!0);break;case"BBBB":n=_r(Ds.DayPeriods,ar.Wide,fl.Format,!0);break;case"BBBBB":n=_r(Ds.DayPeriods,ar.Narrow,fl.Format,!0);break;case"h":n=yo(ks.Hours,1,-12);break;case"hh":n=yo(ks.Hours,2,-12);break;case"H":n=yo(ks.Hours,1);break;case"HH":n=yo(ks.Hours,2);break;case"m":n=yo(ks.Minutes,1);break;case"mm":n=yo(ks.Minutes,2);break;case"s":n=yo(ks.Seconds,1);break;case"ss":n=yo(ks.Seconds,2);break;case"S":n=yo(ks.FractionalSeconds,1);break;case"SS":n=yo(ks.FractionalSeconds,2);break;case"SSS":n=yo(ks.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":n=EI(jh.Short);break;case"ZZZZZ":n=EI(jh.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=EI(jh.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":n=EI(jh.Long);break;default:return null}return UP[t]=n,n}(u);c+=d?d(s,e,l):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function CI(t,n,e){const i=new Date(0);return i.setFullYear(t,n,e),i.setHours(0,0,0),i}function Hh(t,n){const e=function _Ne(t){return dl(t)[mr.LocaleId]}(t);if(SI[e]??={},SI[e][n])return SI[e][n];let i="";switch(n){case"shortDate":i=vI(t,Sc.Short);break;case"mediumDate":i=vI(t,Sc.Medium);break;case"longDate":i=vI(t,Sc.Long);break;case"fullDate":i=vI(t,Sc.Full);break;case"shortTime":i=yI(t,Sc.Short);break;case"mediumTime":i=yI(t,Sc.Medium);break;case"longTime":i=yI(t,Sc.Long);break;case"fullTime":i=yI(t,Sc.Full);break;case"short":const s=Hh(t,"shortTime"),r=Hh(t,"shortDate");i=xI(wI(t,Sc.Short),[s,r]);break;case"medium":const o=Hh(t,"mediumTime"),a=Hh(t,"mediumDate");i=xI(wI(t,Sc.Medium),[o,a]);break;case"long":const l=Hh(t,"longTime"),c=Hh(t,"longDate");i=xI(wI(t,Sc.Long),[l,c]);break;case"full":const u=Hh(t,"fullTime"),d=Hh(t,"fullDate");i=xI(wI(t,Sc.Full),[u,d])}return i&&(SI[e][n]=i),i}function xI(t,n){return n&&(t=t.replace(/\{([^}]+)}/g,function(e,i){return null!=n&&i in n?n[i]:e})),t}function Yu(t,n,e="-",i,s){let r="";(t<0||s&&t<=0)&&(s?t=1-t:(t=-t,r=e));let o=String(t);for(;o.length<n;)o="0"+o;return i&&(o=o.slice(o.length-n)),r+o}function yo(t,n,e=0,i=!1,s=!1){return function(r,o){let a=function ONe(t,n){switch(t){case ks.FullYear:return n.getFullYear();case ks.Month:return n.getMonth();case ks.Date:return n.getDate();case ks.Hours:return n.getHours();case ks.Minutes:return n.getMinutes();case ks.Seconds:return n.getSeconds();case ks.FractionalSeconds:return n.getMilliseconds();case ks.Day:return n.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,r);if((e>0||a>-e)&&(a+=e),t===ks.Hours)0===a&&-12===e&&(a=12);else if(t===ks.FractionalSeconds)return function ANe(t,n){return Yu(t,3).substring(0,n)}(a,n);const l=Jc(o,vo.MinusSign);return Yu(a,n,l,i,s)}}function _r(t,n,e=fl.Format,i=!1){return function(s,r){return function NNe(t,n,e,i,s,r){switch(e){case Ds.Months:return function vNe(t,n,e){const i=dl(t),r=eu([i[mr.MonthsFormat],i[mr.MonthsStandalone]],n);return eu(r,e)}(n,s,i)[t.getMonth()];case Ds.Days:return function bNe(t,n,e){const i=dl(t),r=eu([i[mr.DaysFormat],i[mr.DaysStandalone]],n);return eu(r,e)}(n,s,i)[t.getDay()];case Ds.DayPeriods:const o=t.getHours(),a=t.getMinutes();if(r){const c=function CNe(t){const n=dl(t);return uJ(n),(n[mr.ExtraData][2]||[]).map(i=>"string"==typeof i?VP(i):[VP(i[0]),VP(i[1])])}(n),u=function xNe(t,n,e){const i=dl(t);uJ(i);const r=eu([i[mr.ExtraData][0],i[mr.ExtraData][1]],n)||[];return eu(r,e)||[]}(n,s,i),d=c.findIndex(h=>{if(Array.isArray(h)){const[f,p]=h,g=o>=f.hours&&a>=f.minutes,v=o<p.hours||o===p.hours&&a<p.minutes;if(f.hours<p.hours){if(g&&v)return!0}else if(g||v)return!0}else if(h.hours===o&&h.minutes===a)return!0;return!1});if(-1!==d)return u[d]}return function gNe(t,n,e){const i=dl(t),r=eu([i[mr.DayPeriodsFormat],i[mr.DayPeriodsStandalone]],n);return eu(r,e)}(n,s,i)[o<12?0:1];case Ds.Eras:return function yNe(t,n){return eu(dl(t)[mr.Eras],n)}(n,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(s,r,t,n,e,i)}}function EI(t){return function(n,e,i){const s=-1*i,r=Jc(e,vo.MinusSign),o=s>0?Math.floor(s/60):Math.ceil(s/60);switch(t){case jh.Short:return(s>=0?"+":"")+Yu(o,2,r)+Yu(Math.abs(s%60),2,r);case jh.ShortGMT:return"GMT"+(s>=0?"+":"")+Yu(o,1,r);case jh.Long:return"GMT"+(s>=0?"+":"")+Yu(o,2,r)+":"+Yu(Math.abs(s%60),2,r);case jh.Extended:return 0===i?"Z":(s>=0?"+":"")+Yu(o,2,r)+":"+Yu(Math.abs(s%60),2,r);default:throw new Error(`Unknown zone width "${t}"`)}}}const RNe=0,TI=4;function dJ(t){const n=t.getDay(),e=0===n?-3:TI-n;return CI(t.getFullYear(),t.getMonth(),t.getDate()+e)}function zP(t,n=!1){return function(e,i){let s;if(n){const r=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,o=e.getDate();s=1+Math.floor((o+r)/7)}else{const r=dJ(e),o=function FNe(t){const n=CI(t,RNe,1).getDay();return CI(t,0,1+(n<=TI?TI:TI+7)-n)}(r.getFullYear()),a=r.getTime()-o.getTime();s=1+Math.round(a/6048e5)}return Yu(s,t,Jc(i,vo.MinusSign))}}function II(t,n=!1){return function(e,i){return Yu(dJ(e).getFullYear(),t,Jc(i,vo.MinusSign),n)}}const UP={};function hJ(t,n){t=t.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(e)?n:e}function fJ(t){return t instanceof Date&&!isNaN(t.valueOf())}const zNe=/^(\d+)?\.((\d+)(-(\d+))?)?$/,pJ=22,kI=".",Ow="0",UNe=";",GNe=",",GP="#";function HNe(t,n,e,i,s){const o=function HP(t,n="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split(UNe),s=i[0],r=i[1],o=-1!==s.indexOf(kI)?s.split(kI):[s.substring(0,s.lastIndexOf(Ow)+1),s.substring(s.lastIndexOf(Ow)+1)],a=o[0],l=o[1]||"";e.posPre=a.substring(0,a.indexOf(GP));for(let u=0;u<l.length;u++){const d=l.charAt(u);d===Ow?e.minFrac=e.maxFrac=u+1:d===GP?e.maxFrac=u+1:e.posSuf+=d}const c=a.split(GNe);if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,r){const u=s.length-e.posPre.length-e.posSuf.length,d=r.indexOf(GP);e.negPre=r.substring(0,d).replace(/'/g,""),e.negSuf=r.slice(d+u).replace(/'/g,"")}else e.negPre=n+e.posPre,e.negSuf=e.posSuf;return e}(function BP(t,n){return dl(t)[mr.NumberFormats][n]}(n,bI.Currency),Jc(n,vo.MinusSign));return o.minFrac=function INe(t){let n;const e=cJ[t];return e&&(n=e[2]),"number"==typeof n?n:2}(i),o.maxFrac=o.minFrac,function jP(t,n,e,i,s,r,o=!1){let a="",l=!1;if(isFinite(t)){let c=function XNe(t){let i,s,r,o,a,n=Math.abs(t)+"",e=0;for((s=n.indexOf(kI))>-1&&(n=n.replace(kI,"")),(r=n.search(/e/i))>0?(s<0&&(s=r),s+=+n.slice(r+1),n=n.substring(0,r)):s<0&&(s=n.length),r=0;n.charAt(r)===Ow;r++);if(r===(a=n.length))i=[0],s=1;else{for(a--;n.charAt(a)===Ow;)a--;for(s-=r,i=[],o=0;r<=a;r++,o++)i[o]=Number(n.charAt(r))}return s>pJ&&(i=i.splice(0,pJ-1),e=s-1,s=1),{digits:i,exponent:e,integerLen:s}}(t);o&&(c=function KNe(t){if(0===t.digits[0])return t;const n=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===n?t.digits.push(0,0):1===n&&t.digits.push(0),t.integerLen+=2),t}(c));let u=n.minInt,d=n.minFrac,h=n.maxFrac;if(r){const w=r.match(zNe);if(null===w)throw new Error(`${r} is not a valid digit info`);const E=w[1],T=w[3],L=w[5];null!=E&&(u=WP(E)),null!=T&&(d=WP(T)),null!=L?h=WP(L):null!=T&&d>h&&(h=d)}!function YNe(t,n,e){if(n>e)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${e}).`);let i=t.digits,s=i.length-t.integerLen;const r=Math.min(Math.max(n,s),e);let o=r+t.integerLen,a=i[o];if(o>0){i.splice(Math.max(t.integerLen,o));for(let d=o;d<i.length;d++)i[d]=0}else{s=Math.max(0,s),t.integerLen=1,i.length=Math.max(1,o=r+1),i[0]=0;for(let d=1;d<o;d++)i[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[o-1]++;for(;s<Math.max(0,r);s++)i.push(0);let l=0!==r;const c=n+t.integerLen,u=i.reduceRight(function(d,h,f,p){return p[f]=(h+=d)<10?h:h-10,l&&(0===p[f]&&f>=c?p.pop():l=!1),h>=10?1:0},0);u&&(i.unshift(u),t.integerLen++)}(c,d,h);let f=c.digits,p=c.integerLen;const g=c.exponent;let v=[];for(l=f.every(w=>!w);p<u;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?v=f.splice(p,f.length):(v=f,f=[0]);const y=[];for(f.length>=n.lgSize&&y.unshift(f.splice(-n.lgSize,f.length).join(""));f.length>n.gSize;)y.unshift(f.splice(-n.gSize,f.length).join(""));f.length&&y.unshift(f.join("")),a=y.join(Jc(e,i)),v.length&&(a+=Jc(e,s)+v.join("")),g&&(a+=Jc(e,vo.Exponential)+"+"+g)}else a=Jc(e,vo.Infinity);return a=t<0&&!l?n.negPre+a+n.negSuf:n.posPre+a+n.posSuf,a}(t,o,n,vo.CurrencyGroup,vo.CurrencyDecimal,s).replace("\xa4",e).replace("\xa4","").trim()}function WP(t){const n=parseInt(t);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+t);return n}function gJ(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const i=e.indexOf("="),[s,r]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(s.trim()===n)return decodeURIComponent(r)}return null}const KP=/\s+/,bJ=[];let DI=(()=>{class t{constructor(e,i){this._ngEl=e,this._renderer=i,this.initialClasses=bJ,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(KP):bJ}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(KP):e}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const i of e)this._updateState(i,!0);else if(null!=e)for(const i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){const s=this.stateMap.get(e);void 0!==s?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const i=e[0],s=e[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(e,i){(e=e.trim()).length>0&&e.split(KP).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(Hu))};static#t=this.\u0275dir=pt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}return t})(),XP=(()=>{class t{constructor(e){this._viewContainerRef=e,this.ngComponentOutlet=null,this._inputsUsed=new Map}_needToReCreateNgModuleInstance(e){return void 0!==e.ngComponentOutletNgModule||void 0!==e.ngComponentOutletNgModuleFactory}_needToReCreateComponentInstance(e){return void 0!==e.ngComponentOutlet||void 0!==e.ngComponentOutletContent||void 0!==e.ngComponentOutletInjector||this._needToReCreateNgModuleInstance(e)}ngOnChanges(e){if(this._needToReCreateComponentInstance(e)&&(this._viewContainerRef.clear(),this._inputsUsed.clear(),this._componentRef=void 0,this.ngComponentOutlet)){const i=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;this._needToReCreateNgModuleInstance(e)&&(this._moduleRef?.destroy(),this._moduleRef=this.ngComponentOutletNgModule?function rke(t,n){return new $3(t,n??null,[])}(this.ngComponentOutletNgModule,vJ(i)):this.ngComponentOutletNgModuleFactory?this.ngComponentOutletNgModuleFactory.create(vJ(i)):void 0),this._componentRef=this._viewContainerRef.createComponent(this.ngComponentOutlet,{injector:i,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent})}}ngDoCheck(){if(this._componentRef){if(this.ngComponentOutletInputs)for(const e of Object.keys(this.ngComponentOutletInputs))this._inputsUsed.set(e,!0);this._applyInputStateDiff(this._componentRef)}}ngOnDestroy(){this._moduleRef?.destroy()}_applyInputStateDiff(e){for(const[i,s]of this._inputsUsed)s?(e.setInput(i,this.ngComponentOutletInputs[i]),this._inputsUsed.set(i,!1)):(e.setInput(i,void 0),this._inputsUsed.delete(i))}static#e=this.\u0275fac=function(i){return new(i||t)(D(Pr))};static#t=this.\u0275dir=pt({type:t,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInputs:"ngComponentOutletInputs",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},standalone:!0,features:[On]})}return t})();function vJ(t){return t.get(t_).injector}class QNe{constructor(n,e,i,s){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let hn=(()=>{class t{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,s){this._viewContainer=e,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((s,r,o)=>{if(null==s.previousIndex)i.createEmbeddedView(this._template,new QNe(s.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===r?void 0:r);else if(null!==r){const a=i.get(r);i.move(a,o),yJ(a,s)}});for(let s=0,r=i.length;s<r;s++){const a=i.get(s).context;a.index=s,a.count=r,a.ngForOf=this._ngForOf}e.forEachIdentityChange(s=>{yJ(i.get(s.currentIndex),s)})}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||t)(D(Pr),D(or),D(Uh))};static#t=this.\u0275dir=pt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function yJ(t,n){t.context.$implicit=n.item}let Ot=(()=>{class t{constructor(e,i){this._viewContainer=e,this._context=new JNe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){wJ("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){wJ("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||t)(D(Pr),D(or))};static#t=this.\u0275dir=pt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class JNe{constructor(){this.$implicit=null,this.ngIf=null}}function wJ(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Vo(n)}'.`)}class YP{constructor(n,e){this._viewContainerRef=n,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(n){n&&!this._created?this.create():!n&&this._created&&this.destroy()}}let ip=(()=>{class t{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const i=e===this._ngSwitch;return this._lastCasesMatched||=i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const i of this._defaultViews)i.enforceState(e)}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=pt({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}return t})(),bv=(()=>{class t{constructor(e,i,s){this.ngSwitch=s,s._addCase(),this._view=new YP(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static#e=this.\u0275fac=function(i){return new(i||t)(D(Pr),D(or),D(ip,9))};static#t=this.\u0275dir=pt({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}return t})(),vv=(()=>{class t{constructor(e,i,s){s._addDefault(new YP(e,i))}static#e=this.\u0275fac=function(i){return new(i||t)(D(Pr),D(or),D(ip,9))};static#t=this.\u0275dir=pt({type:t,selectors:[["","ngSwitchDefault",""]],standalone:!0})}return t})(),h_=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(this._shouldRecreateView(e)){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const s=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,i,s)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,i,s),get:(e,i,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,s)}})}static#e=this.\u0275fac=function(i){return new(i||t)(D(Pr))};static#t=this.\u0275dir=pt({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[On]})}return t})();function Zu(t,n){return new ot(2100,!1)}class nRe{createSubscription(n,e){return Xu(()=>n.subscribe({next:e,error:i=>{throw i}}))}dispose(n){Xu(()=>n.unsubscribe())}}class iRe{createSubscription(n,e){return n.then(e,i=>{throw i})}dispose(n){}}const sRe=new iRe,rRe=new nRe;let yi=(()=>{class t{constructor(e){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(Tw(e))return sRe;if(aQ(e))return rRe;throw Zu()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||t)(D(bi,16))};static#t=this.\u0275pipe=rr({name:"async",type:t,pure:!1,standalone:!0})}return t})();const dRe=new st(""),hRe=new st("");let Rs=(()=>{class t{constructor(e,i,s){this.locale=e,this.defaultTimezone=i,this.defaultOptions=s}transform(e,i,s,r){if(null==e||""===e||e!=e)return null;try{return MNe(e,i??this.defaultOptions?.dateFormat??"mediumDate",r||this.locale,s??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw Zu()}}static#e=this.\u0275fac=function(i){return new(i||t)(D($d,16),D(dRe,24),D(hRe,24))};static#t=this.\u0275pipe=rr({name:"date",type:t,pure:!0,standalone:!0})}return t})(),ZP=(()=>{class t{constructor(e,i="USD"){this._locale=e,this._defaultCurrencyCode=i}transform(e,i=this._defaultCurrencyCode,s="symbol",r,o){if(!function QP(t){return!(null==t||""===t||t!=t)}(e))return null;o||=this._locale,"boolean"==typeof s&&(s=s?"symbol":"code");let a=i||this._defaultCurrencyCode;"code"!==s&&(a="symbol"===s||"symbol-narrow"===s?function ENe(t,n,e="en"){const i=function wNe(t){return dl(t)[mr.Currencies]}(e)[t]||cJ[t]||[],s=i[1];return"narrow"===n&&"string"==typeof s?s:i[0]||t}(a,"symbol"===s?"wide":"narrow",o):s);try{return HNe(function JP(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}(e),o,a,i,r)}catch(l){throw Zu()}}static#e=this.\u0275fac=function(i){return new(i||t)(D($d,16),D(tOe,16))};static#t=this.\u0275pipe=rr({name:"currency",type:t,pure:!0,standalone:!0})}return t})();let yv=(()=>{class t{transform(e,i,s){if(null==e)return null;if(!this.supports(e))throw Zu();return e.slice(i,s)}supports(e){return"string"==typeof e||Array.isArray(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275pipe=rr({name:"slice",type:t,pure:!1,standalone:!0})}return t})(),ka=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({})}return t})();const xJ="browser";function MI(t){return t===xJ}function EJ(t){return"server"===t}let SRe=(()=>{class t{static#e=this.\u0275prov=ut({token:t,providedIn:"root",factory:()=>MI(Je(ju))?new CRe(Je(Zn),window):new ERe})}return t})();class CRe{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(n){this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){const e=function xRe(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let s=i.currentNode;for(;s;){const r=s.shadowRoot;if(r){const o=r.getElementById(n)||r.querySelector(`[name="${n}"]`);if(o)return o}s=i.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){this.window.history.scrollRestoration=n}scrollToElement(n){const e=n.getBoundingClientRect(),i=e.left+this.window.pageXOffset,s=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(i-r[0],s-r[1])}}class ERe{setOffset(n){}getScrollPosition(){return[0,0]}scrollToPosition(n){}scrollToAnchor(n){}setHistoryScrollRestoration(n){}}class TJ{}class JRe extends lNe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class s4 extends JRe{static makeCurrent(){!function aNe(t){sJ??=t}(new s4)}onAndCancel(n,e,i){return n.addEventListener(e,i),()=>{n.removeEventListener(e,i)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function eFe(){return Fw=Fw||document.querySelector("base"),Fw?Fw.getAttribute("href"):null}();return null==e?null:function tFe(t){return new URL(t,document.baseURI).pathname}(e)}resetBaseElement(){Fw=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return gJ(document.cookie,n)}}let Fw=null,iFe=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})();const RI=new st("");let LJ=(()=>{class t{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(s=>{s.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,s){return this._findPluginFor(i).addEventListener(e,i,s)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(r=>r.supports(e)),!i)throw new ot(5101,!1);return this._eventNameToPlugin.set(e,i),i}static#e=this.\u0275fac=function(i){return new(i||t)(Re(RI),Re(Wt))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})();class r4{constructor(n){this._doc=n}}const o4="ng-app-id";let PJ=(()=>{class t{constructor(e,i,s,r={}){this.doc=e,this.appId=i,this.nonce=s,this.platformId=r,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=EJ(r),this.resetHostNodes()}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.elements?.forEach(s=>s.remove()),i.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${o4}="${this.appId}"]`);if(e?.length){const i=new Map;return e.forEach(s=>{null!=s.textContent&&i.set(s.textContent,s)}),i}return null}changeUsageCount(e,i){const s=this.styleRef;if(s.has(e)){const r=s.get(e);return r.usage+=i,r.usage}return s.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){const s=this.styleNodesInDOM,r=s?.get(i);if(r?.parentNode===e)return s.delete(i),r.removeAttribute(o4),r;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(o4,this.appId),e.appendChild(o),o}}addStyleToHost(e,i){const s=this.getStyleElement(e,i),r=this.styleRef,o=r.get(i)?.elements;o?o.push(s):r.set(i,{elements:[s],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Zn),Re(Km),Re(wL,8),Re(ju))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})();const a4={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},l4=/%COMP%/g,aFe=new st("",{providedIn:"root",factory:()=>!0});function BJ(t,n){return n.map(e=>e.replace(l4,t))}let c4=(()=>{class t{constructor(e,i,s,r,o,a,l,c=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=r,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=EJ(a),this.defaultRenderer=new u4(e,o,l,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Pu.ShadowDom&&(i={...i,encapsulation:Pu.Emulated});const s=this.getOrCreateRenderer(e,i);return s instanceof zJ?s.applyToHost(e):s instanceof d4&&s.applyStyles(),s}getOrCreateRenderer(e,i){const s=this.rendererByCompId;let r=s.get(i.id);if(!r){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case Pu.Emulated:r=new zJ(l,c,i,this.appId,u,o,a,d);break;case Pu.ShadowDom:return new dFe(l,c,e,i,o,a,this.nonce,d);default:r=new d4(l,c,i,u,o,a,d)}s.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||t)(Re(LJ),Re(PJ),Re(Km),Re(aFe),Re(Zn),Re(ju),Re(Wt),Re(wL))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})();class u4{constructor(n,e,i,s){this.eventManager=n,this.doc=e,this.ngZone=i,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,e){return e?this.doc.createElementNS(a4[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(VJ(n)?n.content:n).appendChild(e)}insertBefore(n,e,i){n&&(VJ(n)?n.content:n).insertBefore(e,i)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let i="string"==typeof n?this.doc.querySelector(n):n;if(!i)throw new ot(-5104,!1);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,s){if(s){e=s+":"+e;const r=a4[s];r?n.setAttributeNS(r,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const s=a4[i];s?n.removeAttributeNS(s,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,s){s&(Xf.DashCase|Xf.Important)?n.style.setProperty(e,i,s&Xf.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&Xf.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){null!=n&&(n[e]=i)}setValue(n,e){n.nodeValue=e}listen(n,e,i){if("string"==typeof n&&!(n=np().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${e}`);return this.eventManager.addEventListener(n,e,this.decoratePreventDefault(i))}decoratePreventDefault(n){return e=>{if("__ngUnwrap__"===e)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))&&e.preventDefault()}}}function VJ(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class dFe extends u4{constructor(n,e,i,s,r,o,a,l){super(n,r,o,l),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=BJ(s.id,s.styles);for(const u of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class d4 extends u4{constructor(n,e,i,s,r,o,a,l){super(n,r,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=s,this.styles=l?BJ(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class zJ extends d4{constructor(n,e,i,s,r,o,a,l){const c=s+"-"+i.id;super(n,e,i,r,o,a,l,c),this.contentAttr=function lFe(t){return"_ngcontent-%COMP%".replace(l4,t)}(c),this.hostAttr=function cFe(t){return"_nghost-%COMP%".replace(l4,t)}(c)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}let hFe=(()=>{class t extends r4{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,s){return e.addEventListener(i,s,!1),()=>this.removeEventListener(e,i,s)}removeEventListener(e,i,s){return e.removeEventListener(i,s)}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Zn))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})(),fFe=(()=>{class t extends r4{constructor(e){super(e),this.delegate=Je(qQ,{optional:!0})}supports(e){return!!this.delegate&&this.delegate.supports(e)}addEventListener(e,i,s){return this.delegate.addEventListener(e,i,s)}removeEventListener(e,i,s){return this.delegate.removeEventListener(e,i,s)}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Zn))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})();const UJ=["alt","control","meta","shift"],pFe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mFe={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let _Fe=(()=>{class t extends r4{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,s){const r=t.parseEventName(i),o=t.eventCallback(r.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>np().onAndCancel(e,r.domEventName,o))}static parseEventName(e){const i=e.toLowerCase().split("."),s=i.shift();if(0===i.length||"keydown"!==s&&"keyup"!==s)return null;const r=t._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),UJ.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=r,0!=i.length||0===r.length)return null;const l={};return l.domEventName=s,l.fullKey=o,l}static matchEventFullKeyCode(e,i){let s=pFe[e.key]||e.key,r="";return i.indexOf("code.")>-1&&(s=e.code,r="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),UJ.forEach(o=>{o!==s&&(0,mFe[o])(e)&&(r+=o+".")}),r+=s,r===i)}static eventCallback(e,i,s){return r=>{t.matchEventFullKeyCode(r,e)&&s.runGuarded(()=>i(r))}}static _normalizeKey(e){return"esc"===e?"escape":e}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Zn))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})();const jJ=[{provide:ju,useValue:xJ},{provide:eq,useValue:function gFe(){s4.makeCurrent()},multi:!0},{provide:Zn,useFactory:function vFe(){return function dEe(t){yL=t}(document),document},deps:[]}],yFe=bQ(vOe,"browser",jJ),wFe=new st(""),HJ=[{provide:rI,useClass:class nFe{addToWindow(n){sr.getAngularTestability=(i,s=!0)=>{const r=n.findTestabilityInTree(i,s);if(null==r)throw new ot(5103,!1);return r},sr.getAllAngularTestabilities=()=>n.getAllTestabilities(),sr.getAllAngularRootElements=()=>n.getAllRootElements(),sr.frameworkStabilizers||(sr.frameworkStabilizers=[]),sr.frameworkStabilizers.push(i=>{const s=sr.getAllAngularTestabilities();let r=s.length;const o=function(){r--,0==r&&i()};s.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(n,e,i){return null==e?null:n.getTestability(e)??(i?np().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:oQ,useClass:wP,deps:[Wt,SP,rI]},{provide:wP,useClass:wP,deps:[Wt,SP,rI]}],WJ=[{provide:VF,useValue:"root"},{provide:gc,useFactory:function bFe(){return new gc},deps:[]},{provide:RI,useClass:hFe,multi:!0,deps:[Zn,Wt,ju]},{provide:RI,useClass:_Fe,multi:!0,deps:[Zn]},{provide:RI,useClass:fFe,multi:!0},c4,PJ,LJ,{provide:N2,useExisting:c4},{provide:TJ,useClass:iFe,deps:[]},[]];let qJ=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:Km,useValue:e.appId}]}}static#e=this.\u0275fac=function(i){return new(i||t)(Re(wFe,12))};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:[...WJ,...HJ],imports:[ka,yOe]})}return t})(),h4=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Zn))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),f4=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:function(i){let s=null;return s=i?new(i||t):Re(EFe),s},providedIn:"root"})}return t})(),EFe=(()=>{class t extends f4{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case Yc.NONE:return i;case Yc.HTML:return Rd(i,"HTML")?bc(i):Cq(this._doc,String(i)).toString();case Yc.STYLE:return Rd(i,"Style")?bc(i):i;case Yc.SCRIPT:if(Rd(i,"Script"))return bc(i);throw new ot(5200,!1);case Yc.URL:return Rd(i,"URL")?bc(i):p2(String(i));case Yc.RESOURCE_URL:if(Rd(i,"ResourceURL"))return bc(i);throw new ot(5201,!1);default:throw new ot(5202,!1)}}bypassSecurityTrustHtml(e){return function OEe(t){return new TEe(t)}(e)}bypassSecurityTrustStyle(e){return function NEe(t){return new IEe(t)}(e)}bypassSecurityTrustScript(e){return function REe(t){return new kEe(t)}(e)}bypassSecurityTrustUrl(e){return function FEe(t){return new DEe(t)}(e)}bypassSecurityTrustResourceUrl(e){return function LEe(t){return new MEe(t)}(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Zn))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ni=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(ni||{});const Wh="*";function wo(t,n){return{type:ni.Trigger,name:t,definitions:n,options:{}}}function bs(t,n=null){return{type:ni.Animate,styles:n,timings:t}}function Lw(t,n=null){return{type:ni.Group,steps:t,options:n}}function Sn(t){return{type:ni.Style,styles:t,offset:null}}function Gs(t,n,e){return{type:ni.State,name:t,styles:n,options:e}}function Sv(t){return{type:ni.Keyframes,steps:t}}function us(t,n,e=null){return{type:ni.Transition,expr:t,animation:n,options:e}}function Cv(t=null){return{type:ni.AnimateChild,options:t}}function xv(t,n,e=null){return{type:ni.Query,selector:t,animation:n,options:e}}class Pw{constructor(n=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class YJ{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let e=0,i=0,s=0;const r=this.players.length;0==r?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==r&&this._onFinish()}),o.onDestroy(()=>{++i==r&&this._onDestroy()}),o.onStart(()=>{++s==r&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const e=n*this.totalTime;this.players.forEach(i=>{const s=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(s)})}getPosition(){const n=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}function ZJ(t){return new ot(3e3,!1)}function sp(t){switch(t.length){case 0:return new Pw;case 1:return t[0];default:return new YJ(t)}}function QJ(t,n,e=new Map,i=new Map){const s=[],r=[];let o=-1,a=null;if(n.forEach(l=>{const c=l.get("offset"),u=c==o,d=u&&a||new Map;l.forEach((h,f)=>{let p=f,g=h;if("offset"!==f)switch(p=t.normalizePropertyName(p,s),g){case"!":g=e.get(f);break;case Wh:g=i.get(f);break;default:g=t.normalizeStyleValue(f,p,g,s)}d.set(p,g)}),u||r.push(d),a=d,o=c}),s.length)throw function JFe(t){return new ot(3502,!1)}();return r}function m4(t,n,e,i){switch(n){case"start":t.onStart(()=>i(e&&_4(e,"start",t)));break;case"done":t.onDone(()=>i(e&&_4(e,"done",t)));break;case"destroy":t.onDestroy(()=>i(e&&_4(e,"destroy",t)))}}function _4(t,n,e){const r=g4(t.element,t.triggerName,t.fromState,t.toState,n||t.phaseName,e.totalTime??t.totalTime,!!e.disabled),o=t._data;return null!=o&&(r._data=o),r}function g4(t,n,e,i,s="",r=0,o){return{element:t,triggerName:n,fromState:e,toState:i,phaseName:s,totalTime:r,disabled:!!o}}function Cc(t,n,e){let i=t.get(n);return i||t.set(n,i=e),i}function JJ(t){const n=t.indexOf(":");return[t.substring(1,n),t.slice(n+1)]}const dLe=typeof document>"u"?null:document.documentElement;function b4(t){const n=t.parentNode||t.host||null;return n===dLe?null:n}let p_=null,eee=!1;function tee(t,n){for(;n;){if(n===t)return!0;n=b4(n)}return!1}function nee(t,n,e){if(e)return Array.from(t.querySelectorAll(n));const i=t.querySelector(n);return i?[i]:[]}let v4=(()=>{class t{validateStyleProperty(e){return function fLe(t){p_||(p_=function pLe(){return typeof document<"u"?document.body:null}()||{},eee=!!p_.style&&"WebkitAppearance"in p_.style);let n=!0;return p_.style&&!function hLe(t){return"ebkit"==t.substring(1,6)}(t)&&(n=t in p_.style,!n&&eee&&(n="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in p_.style)),n}(e)}containsElement(e,i){return tee(e,i)}getParentElement(e){return b4(e)}query(e,i,s){return nee(e,i,s)}computeStyle(e,i,s){return s||""}animate(e,i,s,r,o,a=[],l){return new Pw(s,r)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})();class y4{static#e=this.NOOP=new v4}class w4{}const _Le=1e3,S4="ng-enter",LI="ng-leave",PI="ng-trigger",$I=".ng-trigger",see="ng-animating",C4=".ng-animating";function qh(t){if("number"==typeof t)return t;const n=t.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:x4(parseFloat(n[1]),n[2])}function x4(t,n){return"s"===n?t*_Le:t}function BI(t,n,e){return t.hasOwnProperty("duration")?t:function bLe(t,n,e){let s,r=0,o="";if("string"==typeof t){const a=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return n.push(ZJ()),{duration:0,delay:0,easing:""};s=x4(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(r=x4(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else s=t;if(!e){let a=!1,l=n.length;s<0&&(n.push(function AFe(){return new ot(3100,!1)}()),a=!0),r<0&&(n.push(function OFe(){return new ot(3101,!1)}()),a=!0),a&&n.splice(l,0,ZJ())}return{duration:s,delay:r,easing:o}}(t,n,e)}function Bd(t,n,e){n.forEach((i,s)=>{const r=T4(s);e&&!e.has(s)&&e.set(s,t.style[r]),t.style[r]=i})}function m_(t,n){n.forEach((e,i)=>{const s=T4(i);t.style[s]=""})}function $w(t){return Array.isArray(t)?1==t.length?t[0]:function TFe(t,n=null){return{type:ni.Sequence,steps:t,options:n}}(t):t}const E4=new RegExp("{{\\s*(.+?)\\s*}}","g");function oee(t){let n=[];if("string"==typeof t){let e;for(;e=E4.exec(t);)n.push(e[1]);E4.lastIndex=0}return n}function Bw(t,n,e){const i=`${t}`,s=i.replace(E4,(r,o)=>{let a=n[o];return null==a&&(e.push(function RFe(t){return new ot(3003,!1)}()),a=""),a.toString()});return s==i?t:s}const wLe=/-+([a-z0-9])/g;function T4(t){return t.replace(wLe,(...n)=>n[1].toUpperCase())}function xc(t,n,e){switch(n.type){case ni.Trigger:return t.visitTrigger(n,e);case ni.State:return t.visitState(n,e);case ni.Transition:return t.visitTransition(n,e);case ni.Sequence:return t.visitSequence(n,e);case ni.Group:return t.visitGroup(n,e);case ni.Animate:return t.visitAnimate(n,e);case ni.Keyframes:return t.visitKeyframes(n,e);case ni.Style:return t.visitStyle(n,e);case ni.Reference:return t.visitReference(n,e);case ni.AnimateChild:return t.visitAnimateChild(n,e);case ni.AnimateRef:return t.visitAnimateRef(n,e);case ni.Query:return t.visitQuery(n,e);case ni.Stagger:return t.visitStagger(n,e);default:throw function FFe(t){return new ot(3004,!1)}()}}function I4(t,n){return window.getComputedStyle(t)[n]}const xLe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class aee extends w4{normalizePropertyName(n,e){return T4(n)}normalizeStyleValue(n,e,i,s){let r="";const o=i.toString().trim();if(xLe.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)r="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&s.push(function LFe(t,n){return new ot(3005,!1)}())}return o+r}}const VI="*";const zI=new Set(["true","1"]),UI=new Set(["false","0"]);function lee(t,n){const e=zI.has(t)||UI.has(t),i=zI.has(n)||UI.has(n);return(s,r)=>{let o=t==VI||t==s,a=n==VI||n==r;return!o&&e&&"boolean"==typeof s&&(o=s?zI.has(t):UI.has(t)),!a&&i&&"boolean"==typeof r&&(a=r?zI.has(n):UI.has(n)),o&&a}}const kLe=new RegExp("s*:selfs*,?","g");function k4(t,n,e,i){return new DLe(t).build(n,e,i)}class DLe{constructor(n){this._driver=n}build(n,e,i){const s=new OLe(e);return this._resetContextStyleTimingState(s),xc(this,$w(n),s)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,e){let i=e.queryCount=0,s=e.depCount=0;const r=[],o=[];return"@"==n.name.charAt(0)&&e.errors.push(function PFe(){return new ot(3006,!1)}()),n.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==ni.State){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,r.push(this.visitState(l,e))}),l.name=c}else if(a.type==ni.Transition){const l=this.visitTransition(a,e);i+=l.queryCount,s+=l.depCount,o.push(l)}else e.errors.push(function $Fe(){return new ot(3007,!1)}())}),{type:ni.Trigger,name:n.name,states:r,transitions:o,queryCount:i,depCount:s,options:null}}visitState(n,e){const i=this.visitStyle(n.styles,e),s=n.options&&n.options.params||null;if(i.containsDynamicStyles){const r=new Set,o=s||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{oee(l).forEach(c=>{o.hasOwnProperty(c)||r.add(c)})})}),r.size&&e.errors.push(function BFe(t,n){return new ot(3008,!1)}(0,r.values()))}return{type:ni.State,name:n.name,style:i,options:s?{params:s}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;const i=xc(this,$w(n.animation),e),s=function ELe(t,n){const e=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(i=>function TLe(t,n,e){if(":"==t[0]){const l=function ILe(t,n){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return n.push(function XFe(t){return new ot(3016,!1)}()),"* => *"}}(t,e);if("function"==typeof l)return void n.push(l);t=l}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function KFe(t){return new ot(3015,!1)}()),n;const s=i[1],r=i[2],o=i[3];n.push(lee(s,o)),"<"==r[0]&&(s!=VI||o!=VI)&&n.push(lee(o,s))}(i,e,n)):e.push(t),e}(n.expr,e.errors);return{type:ni.Transition,matchers:s,animation:i,queryCount:e.queryCount,depCount:e.depCount,options:__(n.options)}}visitSequence(n,e){return{type:ni.Sequence,steps:n.steps.map(i=>xc(this,i,e)),options:__(n.options)}}visitGroup(n,e){const i=e.currentTime;let s=0;const r=n.steps.map(o=>{e.currentTime=i;const a=xc(this,o,e);return s=Math.max(s,e.currentTime),a});return e.currentTime=s,{type:ni.Group,steps:r,options:__(n.options)}}visitAnimate(n,e){const i=function RLe(t,n){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return D4(BI(t,n).duration,0,"");const e=t;if(e.split(/\s+/).some(r=>"{"==r.charAt(0)&&"{"==r.charAt(1))){const r=D4(0,0,"");return r.dynamic=!0,r.strValue=e,r}const s=BI(e,n);return D4(s.duration,s.delay,s.easing)}(n.timings,e.errors);e.currentAnimateTimings=i;let s,r=n.styles?n.styles:Sn({});if(r.type==ni.Keyframes)s=this.visitKeyframes(r,e);else{let o=n.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=Sn(c)}e.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,e);l.isEmptyStep=a,s=l}return e.currentAnimateTimings=null,{type:ni.Animate,timings:i,style:s,options:null}}visitStyle(n,e){const i=this._makeStyleAst(n,e);return this._validateStyleAst(i,e),i}_makeStyleAst(n,e){const i=[],s=Array.isArray(n.styles)?n.styles:[n.styles];for(let a of s)"string"==typeof a?a===Wh?i.push(a):e.errors.push(new ot(3002,!1)):i.push(new Map(Object.entries(a)));let r=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!r))for(let l of a.values())if(l.toString().indexOf("{{")>=0){r=!0;break}}),{type:ni.Style,styles:i,easing:o,offset:n.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(n,e){const i=e.currentAnimateTimings;let s=e.currentTime,r=e.currentTime;i&&r>0&&(r-=i.duration+i.delay),n.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=e.collectedStyles.get(e.currentQuerySelector),u=c.get(l);let d=!0;u&&(r!=s&&r>=u.startTime&&s<=u.endTime&&(e.errors.push(function zFe(t,n,e,i,s){return new ot(3010,!1)}()),d=!1),r=u.startTime),d&&c.set(l,{startTime:r,endTime:s}),e.options&&function yLe(t,n,e){const i=n.params||{},s=oee(t);s.length&&s.forEach(r=>{i.hasOwnProperty(r)||e.push(function NFe(t){return new ot(3001,!1)}())})}(a,e.options,e.errors)})})}visitKeyframes(n,e){const i={type:ni.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function UFe(){return new ot(3011,!1)}()),i;let r=0;const o=[];let a=!1,l=!1,c=0;const u=n.steps.map(y=>{const w=this._makeStyleAst(y,e);let E=null!=w.offset?w.offset:function NLe(t){if("string"==typeof t)return null;let n=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;n=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const e=t;n=parseFloat(e.get("offset")),e.delete("offset")}return n}(w.styles),T=0;return null!=E&&(r++,T=w.offset=E),l=l||T<0||T>1,a=a||T<c,c=T,o.push(T),w});l&&e.errors.push(function GFe(){return new ot(3012,!1)}()),a&&e.errors.push(function jFe(){return new ot(3200,!1)}());const d=n.steps.length;let h=0;r>0&&r<d?e.errors.push(function HFe(){return new ot(3202,!1)}()):0==r&&(h=1/(d-1));const f=d-1,p=e.currentTime,g=e.currentAnimateTimings,v=g.duration;return u.forEach((y,w)=>{const E=h>0?w==f?1:h*w:o[w],T=E*v;e.currentTime=p+g.delay+T,g.duration=T,this._validateStyleAst(y,e),y.offset=E,i.styles.push(y)}),i}visitReference(n,e){return{type:ni.Reference,animation:xc(this,$w(n.animation),e),options:__(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:ni.AnimateChild,options:__(n.options)}}visitAnimateRef(n,e){return{type:ni.AnimateRef,animation:this.visitReference(n.animation,e),options:__(n.options)}}visitQuery(n,e){const i=e.currentQuerySelector,s=n.options||{};e.queryCount++,e.currentQuery=n;const[r,o]=function MLe(t){const n=!!t.split(/\s*,\s*/).find(e=>":self"==e);return n&&(t=t.replace(kLe,"")),t=t.replace(/@\*/g,$I).replace(/@\w+/g,e=>$I+"-"+e.slice(1)).replace(/:animating/g,C4),[t,n]}(n.selector);e.currentQuerySelector=i.length?i+" "+r:r,Cc(e.collectedStyles,e.currentQuerySelector,new Map);const a=xc(this,$w(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:ni.Query,selector:r,limit:s.limit||0,optional:!!s.optional,includeSelf:o,animation:a,originalSelector:n.selector,options:__(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(function WFe(){return new ot(3013,!1)}());const i="full"===n.timings?{duration:0,delay:0,easing:"full"}:BI(n.timings,e.errors,!0);return{type:ni.Stagger,animation:xc(this,$w(n.animation),e),timings:i,options:null}}}class OLe{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function __(t){return t?(t={...t}).params&&(t.params=function ALe(t){return t?{...t}:null}(t.params)):t={},t}function D4(t,n,e){return{duration:t,delay:n,easing:e}}function M4(t,n,e,i,s,r,o=null,a=!1){return{type:1,element:t,keyframes:n,preStyleProps:e,postStyleProps:i,duration:s,delay:r,totalTime:s+r,easing:o,subTimeline:a}}class GI{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,e){let i=this._map.get(n);i||this._map.set(n,i=[]),i.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const PLe=new RegExp(":enter","g"),BLe=new RegExp(":leave","g");function A4(t,n,e,i,s,r=new Map,o=new Map,a,l,c=[]){return(new VLe).buildKeyframes(t,n,e,i,s,r,o,a,l,c)}class VLe{buildKeyframes(n,e,i,s,r,o,a,l,c,u=[]){c=c||new GI;const d=new O4(n,e,c,s,r,u,[]);d.options=l;const h=l.delay?qh(l.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,l),xc(this,i,d);const f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let g=f.length-1;g>=0;g--){const v=f[g];if(v.element===e){p=v;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,l)}return f.length?f.map(p=>p.buildKeyframes()):[M4(e,[],[],[],0,h,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){const i=e.subInstructions.get(e.element);if(i){const s=e.createSubContext(n.options),r=e.currentTimeline.currentTime,o=this._visitSubInstructions(i,s,s.options);r!=o&&e.transformIntoNewTimeline(o)}e.previousNode=n}visitAnimateRef(n,e){const i=e.createSubContext(n.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,i),this.visitReference(n.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,i){for(const s of n){const r=s?.delay;if(r){const o="number"==typeof r?r:qh(Bw(r,s?.params??{},e.errors));i.delayNextStep(o)}}}_visitSubInstructions(n,e,i){let r=e.currentTimeline.currentTime;const o=null!=i.duration?qh(i.duration):null,a=null!=i.delay?qh(i.delay):null;return 0!==o&&n.forEach(l=>{const c=e.appendInstructionToTimeline(l,o,a);r=Math.max(r,c.duration+c.delay)}),r}visitReference(n,e){e.updateOptions(n.options,!0),xc(this,n.animation,e),e.previousNode=n}visitSequence(n,e){const i=e.subContextCount;let s=e;const r=n.options;if(r&&(r.params||r.delay)&&(s=e.createSubContext(r),s.transformIntoNewTimeline(),null!=r.delay)){s.previousNode.type==ni.Style&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=jI);const o=qh(r.delay);s.delayNextStep(o)}n.steps.length&&(n.steps.forEach(o=>xc(this,o,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>i&&s.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){const i=[];let s=e.currentTimeline.currentTime;const r=n.options&&n.options.delay?qh(n.options.delay):0;n.steps.forEach(o=>{const a=e.createSubContext(n.options);r&&a.delayNextStep(r),xc(this,o,a),s=Math.max(s,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(s),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){const i=n.strValue;return BI(e.params?Bw(i,e.params,e.errors):i,e.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){const i=e.currentAnimateTimings=this._visitTiming(n.timings,e),s=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),s.snapshotCurrentStyles());const r=n.style;r.type==ni.Keyframes?this.visitKeyframes(r,e):(e.incrementTime(i.duration),this.visitStyle(r,e),s.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){const i=e.currentTimeline,s=e.currentAnimateTimings;!s&&i.hasCurrentStyleProperties()&&i.forwardFrame();const r=s&&s.easing||n.easing;n.isEmptyStep?i.applyEmptyStep(r):i.setStyles(n.styles,r,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){const i=e.currentAnimateTimings,s=e.currentTimeline.duration,r=i.duration,a=e.createSubContext().currentTimeline;a.easing=i.easing,n.styles.forEach(l=>{a.forwardTime((l.offset||0)*r),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(s+r),e.previousNode=n}visitQuery(n,e){const i=e.currentTimeline.currentTime,s=n.options||{},r=s.delay?qh(s.delay):0;r&&(e.previousNode.type===ni.Style||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=jI);let o=i;const a=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!s.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{e.currentQueryIndex=u;const d=e.createSubContext(n.options,c);r&&d.delayNextStep(r),c===e.element&&(l=d.currentTimeline),xc(this,n.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){const i=e.parentContext,s=e.currentTimeline,r=n.timings,o=Math.abs(r.duration),a=o*(e.currentQueryTotal-1);let l=o*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=e.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;xc(this,n.animation,e),e.previousNode=n,i.currentStaggerTime=s.currentTime-d+(s.startTime-i.currentTimeline.startTime)}}const jI={};class O4{constructor(n,e,i,s,r,o,a,l){this._driver=n,this.element=e,this.subInstructions=i,this._enterClassName=s,this._leaveClassName=r,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=jI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new HI(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;const i=n;let s=this.options;null!=i.duration&&(s.duration=qh(i.duration)),null!=i.delay&&(s.delay=qh(i.delay));const r=i.params;if(r){let o=s.params;o||(o=this.options.params={}),Object.keys(r).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=Bw(r[a],o,this.errors))})}}_copyOptions(){const n={};if(this.options){const e=this.options.params;if(e){const i=n.params={};Object.keys(e).forEach(s=>{i[s]=e[s]})}}return n}createSubContext(n=null,e,i){const s=e||this.element,r=new O4(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,i||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(n),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(n){return this.previousNode=jI,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,i){const s={duration:e??n.duration,delay:this.currentTimeline.currentTime+(i??0)+n.delay,easing:""},r=new zLe(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,s,n.stretchStartingKeyframe);return this.timelines.push(r),s}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,i,s,r,o){let a=[];if(s&&a.push(this.element),n.length>0){n=(n=n.replace(PLe,"."+this._enterClassName)).replace(BLe,"."+this._leaveClassName);let c=this._driver.query(this.element,n,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!r&&0==a.length&&o.push(function qFe(t){return new ot(3014,!1)}()),a}}class HI{constructor(n,e,i,s){this._driver=n,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=s,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new HI(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Wh),this._currentKeyframe.set(e,Wh);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,i,s){e&&this._previousKeyframe.set("easing",e);const r=s&&s.params||{},o=function ULe(t,n){const e=new Map;let i;return t.forEach(s=>{if("*"===s){i??=n.keys();for(let r of i)e.set(r,Wh)}else for(let[r,o]of s)e.set(r,o)}),e}(n,this._globalTimelineStyles);for(let[a,l]of o){const c=Bw(l,r,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Wh),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,i)=>{const s=this._styleSummary.get(i);(!s||e.time>s.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((a,l)=>{const c=new Map([...this._backFill,...a]);c.forEach((u,d)=>{"!"===u?n.add(d):u===Wh&&e.add(d)}),i||c.set("offset",l/this.duration),s.push(c)});const r=[...n.values()],o=[...e.values()];if(i){const a=s[0],l=new Map(a);a.set("offset",0),l.set("offset",1),s=[a,l]}return M4(this.element,s,r,o,this.duration,this.startTime,this.easing,!1)}}class zLe extends HI{constructor(n,e,i,s,r,o,a=!1){super(n,e,o.delay),this.keyframes=i,this.preStyleProps=s,this.postStyleProps=r,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:i,easing:s}=this.timings;if(this._stretchStartingKeyframe&&e){const r=[],o=i+e,a=e/o,l=new Map(n[0]);l.set("offset",0),r.push(l);const c=new Map(n[0]);c.set("offset",dee(a)),r.push(c);const u=n.length-1;for(let d=1;d<=u;d++){let h=new Map(n[d]);const f=h.get("offset");h.set("offset",dee((e+f*i)/o)),r.push(h)}i=o,e=0,s="",n=r}return M4(this.element,n,this.preStyleProps,this.postStyleProps,i,e,s,!0)}}function dee(t,n=3){const e=Math.pow(10,n-1);return Math.round(t*e)/e}function hee(t,n,e,i,s,r,o,a,l,c,u,d,h){return{type:0,element:t,triggerName:n,isRemovalTransition:s,fromState:e,fromStyles:r,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const N4={};class fee{constructor(n,e,i){this._triggerName=n,this.ast=e,this._stateStyles=i}match(n,e,i,s){return function GLe(t,n,e,i,s){return t.some(r=>r(n,e,i,s))}(this.ast.matchers,n,e,i,s)}buildStyles(n,e,i){let s=this._stateStyles.get("*");return void 0!==n&&(s=this._stateStyles.get(n?.toString())||s),s?s.buildStyles(e,i):new Map}build(n,e,i,s,r,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||N4,p=this.buildStyles(i,a&&a.params||N4,d),g=l&&l.params||N4,v=this.buildStyles(s,g,d),y=new Set,w=new Map,E=new Map,T="void"===s,L={params:pee(g,h),delay:this.ast.options?.delay},W=u?[]:A4(n,e,this.ast.animation,r,o,p,v,L,c,d);let H=0;return W.forEach(P=>{H=Math.max(P.duration+P.delay,H)}),d.length?hee(e,this._triggerName,i,s,T,p,v,[],[],w,E,H,d):(W.forEach(P=>{const X=P.element,ne=Cc(w,X,new Set);P.preStyleProps.forEach(Ee=>ne.add(Ee));const me=Cc(E,X,new Set);P.postStyleProps.forEach(Ee=>me.add(Ee)),X!==e&&y.add(X)}),hee(e,this._triggerName,i,s,T,p,v,W,[...y.values()],w,E,H))}}function pee(t,n){const e={...n};return Object.entries(t).forEach(([i,s])=>{null!=s&&(e[i]=s)}),e}class jLe{constructor(n,e,i){this.styles=n,this.defaultParams=e,this.normalizer=i}buildStyles(n,e){const i=new Map,s=pee(n,this.defaultParams);return this.styles.styles.forEach(r=>{"string"!=typeof r&&r.forEach((o,a)=>{o&&(o=Bw(o,s,e));const l=this.normalizer.normalizePropertyName(a,e);o=this.normalizer.normalizeStyleValue(a,l,o,e),i.set(a,o)})}),i}}class WLe{constructor(n,e,i){this.name=n,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(s=>{this.states.set(s.name,new jLe(s.style,s.options&&s.options.params||{},i))}),mee(this.states,"true","1"),mee(this.states,"false","0"),e.transitions.forEach(s=>{this.transitionFactories.push(new fee(n,s,this.states))}),this.fallbackTransition=function qLe(t,n,e){return new fee(t,{type:ni.Transition,animation:{type:ni.Sequence,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,i,s){return this.transitionFactories.find(o=>o.match(n,e,i,s))||null}matchStyles(n,e,i){return this.fallbackTransition.buildStyles(n,e,i)}}function mee(t,n,e){t.has(n)?t.has(e)||t.set(e,t.get(n)):t.has(e)&&t.set(n,t.get(e))}const KLe=new GI;class XLe{constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,e){const i=[],r=k4(this._driver,e,i,[]);if(i.length)throw function eLe(t){return new ot(3503,!1)}();this._animations.set(n,r)}_buildPlayer(n,e,i){const s=n.element,r=QJ(this._normalizer,n.keyframes,e,i);return this._driver.animate(s,r,n.duration,n.delay,n.easing,[],!0)}create(n,e,i={}){const s=[],r=this._animations.get(n);let o;const a=new Map;if(r?(o=A4(this._driver,e,r,S4,LI,new Map,new Map,i,KLe,s),o.forEach(u=>{const d=Cc(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(s.push(function tLe(){return new ot(3300,!1)}()),o=[]),s.length)throw function nLe(t){return new ot(3504,!1)}();a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,Wh))})});const c=sp(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(n,c),c.onDestroy(()=>this.destroy(n)),this.players.push(c),c}destroy(n){const e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(n){const e=this._playersById.get(n);if(!e)throw function iLe(t){return new ot(3301,!1)}();return e}listen(n,e,i,s){const r=g4(e,"","","");return m4(this._getPlayer(n),i,r,s),()=>{}}command(n,e,i,s){if("register"==i)return void this.register(n,s[0]);if("create"==i)return void this.create(n,e,s[0]||{});const r=this._getPlayer(n);switch(i){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(n)}}}const _ee="ng-animate-queued",R4="ng-animate-disabled",e3e=[],gee={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},t3e={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Qu="__ng_removed";class F4{get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;const i=n&&n.hasOwnProperty("value");if(this.value=function r3e(t){return t??null}(i?n.value:n),i){const{value:r,...o}=n;this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const e=n.params;if(e){const i=this.options.params;Object.keys(e).forEach(s=>{null==i[s]&&(i[s]=e[s])})}}}const Vw="void",L4=new F4(Vw);class n3e{constructor(n,e,i){this.id=n,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,tu(e,this._hostClassName)}listen(n,e,i,s){if(!this._triggers.has(e))throw function sLe(t,n){return new ot(3302,!1)}();if(null==i||0==i.length)throw function rLe(t){return new ot(3303,!1)}();if(!function o3e(t){return"start"==t||"done"==t}(i))throw function oLe(t,n){return new ot(3400,!1)}();const r=Cc(this._elementListeners,n,[]),o={name:e,phase:i,callback:s};r.push(o);const a=Cc(this._engine.statesByElement,n,new Map);return a.has(e)||(tu(n,PI),tu(n,PI+"-"+e),a.set(e,L4)),()=>{this._engine.afterFlush(()=>{const l=r.indexOf(o);l>=0&&r.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(n,e){return!this._triggers.has(n)&&(this._triggers.set(n,e),!0)}_getTrigger(n){const e=this._triggers.get(n);if(!e)throw function aLe(t){return new ot(3401,!1)}();return e}trigger(n,e,i,s=!0){const r=this._getTrigger(e),o=new P4(this.id,e,n);let a=this._engine.statesByElement.get(n);a||(tu(n,PI),tu(n,PI+"-"+e),this._engine.statesByElement.set(n,a=new Map));let l=a.get(e);const c=new F4(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=L4),c.value!==Vw&&l.value===c.value){if(!function c3e(t,n){const e=Object.keys(t),i=Object.keys(n);if(e.length!=i.length)return!1;for(let s=0;s<e.length;s++){const r=e[s];if(!n.hasOwnProperty(r)||t[r]!==n[r])return!1}return!0}(l.params,c.params)){const g=[],v=r.matchStyles(l.value,l.params,g),y=r.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{m_(n,v),Bd(n,y)})}return}const h=Cc(this._engine.playersByElement,n,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==e&&g.queued&&g.destroy()});let f=r.matchTransition(l.value,c.value,n,c.params),p=!1;if(!f){if(!s)return;f=r.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(tu(n,_ee),o.onStart(()=>{Ev(n,_ee)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);const v=this._engine.playersByElement.get(n);if(v){let y=v.indexOf(o);y>=0&&v.splice(y,1)}}),this.players.push(o),h.push(o),o}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(s=>s.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const e=this._engine.playersByElement.get(n);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){const i=this._engine.driver.query(n,$I,!0);i.forEach(s=>{if(s[Qu])return;const r=this._engine.fetchNamespacesByElement(s);r.size?r.forEach(o=>o.triggerLeaveAnimation(s,e,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(n,e,i,s){const r=this._engine.statesByElement.get(n),o=new Map;if(r){const a=[];if(r.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(n,c,Vw,s);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,o),i&&sp(a).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const e=this._elementListeners.get(n),i=this._engine.statesByElement.get(n);if(e&&i){const s=new Set;e.forEach(r=>{const o=r.name;if(s.has(o))return;s.add(o);const l=this._triggers.get(o).fallbackTransition,c=i.get(o)||L4,u=new F4(Vw),d=new P4(this.id,o,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(n,e){const i=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let s=!1;if(i.totalAnimations){const r=i.players.length?i.playersByQueriedElement.get(n):[];if(r&&r.length)s=!0;else{let o=n;for(;o=o.parentNode;)if(i.statesByElement.get(o)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(n),s)i.markElementAsRemoved(this.id,n,!1,e);else{const r=n[Qu];(!r||r===gee)&&(i.afterFlush(()=>this.clearElementCache(n)),i.destroyInnerAnimations(n),i._onRemovalComplete(n,e))}}insertNode(n,e){tu(n,this._hostClassName)}drainQueuedTransitions(n){const e=[];return this._queue.forEach(i=>{const s=i.player;if(s.destroyed)return;const r=i.element,o=this._elementListeners.get(r);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=g4(r,i.triggerName,i.fromState.value,i.toState.value);l._data=n,m4(i.player,a.phase,l,a.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):e.push(i)}),this._queue=[],e.sort((i,s)=>{const r=i.transition.ast.depCount,o=s.transition.ast.depCount;return 0==r||0==o?r-o:this._engine.driver.containsElement(i.element,s.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}}class i3e{_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,i){this.bodyNode=n,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,r)=>{}}get queuedPlayers(){const n=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&n.push(i)})}),n}createNamespace(n,e){const i=new n3e(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[n]=i}_balanceNamespaceList(n,e){const i=this._namespaceList,s=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(e);for(;a;){const l=s.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,n),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(n)}else i.push(n);return s.set(e,n),n}register(n,e){let i=this._namespaceLookup[n];return i||(i=this.createNamespace(n,e)),i}registerTrigger(n,e,i){let s=this._namespaceLookup[n];s&&s.register(e,i)&&this.totalAnimations++}destroy(n,e){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(n);this.namespacesByHostElement.delete(i.hostElement);const s=this._namespaceList.indexOf(i);s>=0&&this._namespaceList.splice(s,1),i.destroy(e),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const e=new Set,i=this.statesByElement.get(n);if(i)for(let s of i.values())if(s.namespaceId){const r=this._fetchNamespace(s.namespaceId);r&&e.add(r)}return e}trigger(n,e,i,s){if(WI(e)){const r=this._fetchNamespace(n);if(r)return r.trigger(e,i,s),!0}return!1}insertNode(n,e,i,s){if(!WI(e))return;const r=e[Qu];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(n){const o=this._fetchNamespace(n);o&&o.insertNode(e,i)}s&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),tu(n,R4)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),Ev(n,R4))}removeNode(n,e,i){if(WI(e)){const s=n?this._fetchNamespace(n):null;s?s.removeNode(e,i):this.markElementAsRemoved(n,e,!1,i);const r=this.namespacesByHostElement.get(e);r&&r.id!==n&&r.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(n,e,i,s,r){this.collectedLeaveElements.push(e),e[Qu]={namespaceId:n,setForRemoval:s,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:r}}listen(n,e,i,s,r){return WI(e)?this._fetchNamespace(n).listen(e,i,s,r):()=>{}}_buildInstruction(n,e,i,s,r){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,i,s,n.fromState.options,n.toState.options,e,r)}destroyInnerAnimations(n){let e=this.driver.query(n,$I,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(n,C4,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(n){const e=this.playersByElement.get(n);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(n){const e=this.playersByQueriedElement.get(n);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return sp(this.players).onDone(()=>n());n()})}processLeaveNode(n){const e=n[Qu];if(e&&e.setForRemoval){if(n[Qu]=gee,e.namespaceId){this.destroyInnerAnimations(n);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(R4)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,s)=>this._balanceNamespaceList(i,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)tu(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,n)}finally{for(let s=0;s<i.length;s++)i[s]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?sp(e).onDone(()=>{i.forEach(s=>s())}):i.forEach(s=>s())}}reportError(n){throw function lLe(t){return new ot(3402,!1)}()}_flushAnimations(n,e){const i=new GI,s=[],r=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(Ce=>{u.add(Ce);const Fe=this.driver.query(Ce,".ng-animate-queued",!0);for(let Ie=0;Ie<Fe.length;Ie++)u.add(Fe[Ie])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=yee(h,this.collectedEnterElements),p=new Map;let g=0;f.forEach((Ce,Fe)=>{const Ie=S4+g++;p.set(Fe,Ie),Ce.forEach(He=>tu(He,Ie))});const v=[],y=new Set,w=new Set;for(let Ce=0;Ce<this.collectedLeaveElements.length;Ce++){const Fe=this.collectedLeaveElements[Ce],Ie=Fe[Qu];Ie&&Ie.setForRemoval&&(v.push(Fe),y.add(Fe),Ie.hasAnimation?this.driver.query(Fe,".ng-star-inserted",!0).forEach(He=>y.add(He)):w.add(Fe))}const E=new Map,T=yee(h,Array.from(y));T.forEach((Ce,Fe)=>{const Ie=LI+g++;E.set(Fe,Ie),Ce.forEach(He=>tu(He,Ie))}),n.push(()=>{f.forEach((Ce,Fe)=>{const Ie=p.get(Fe);Ce.forEach(He=>Ev(He,Ie))}),T.forEach((Ce,Fe)=>{const Ie=E.get(Fe);Ce.forEach(He=>Ev(He,Ie))}),v.forEach(Ce=>{this.processLeaveNode(Ce)})});const L=[],W=[];for(let Ce=this._namespaceList.length-1;Ce>=0;Ce--)this._namespaceList[Ce].drainQueuedTransitions(e).forEach(Ie=>{const He=Ie.player,Ve=Ie.element;if(L.push(He),this.collectedEnterElements.length){const Ut=Ve[Qu];if(Ut&&Ut.setForMove){if(Ut.previousTriggersValues&&Ut.previousTriggersValues.has(Ie.triggerName)){const cn=Ut.previousTriggersValues.get(Ie.triggerName),Jt=this.statesByElement.get(Ie.element);if(Jt&&Jt.has(Ie.triggerName)){const Nn=Jt.get(Ie.triggerName);Nn.value=cn,Jt.set(Ie.triggerName,Nn)}}return void He.destroy()}}const tt=!d||!this.driver.containsElement(d,Ve),St=E.get(Ve),mt=p.get(Ve),wt=this._buildInstruction(Ie,i,mt,St,tt);if(wt.errors&&wt.errors.length)return void W.push(wt);if(tt)return He.onStart(()=>m_(Ve,wt.fromStyles)),He.onDestroy(()=>Bd(Ve,wt.toStyles)),void s.push(He);if(Ie.isFallbackTransition)return He.onStart(()=>m_(Ve,wt.fromStyles)),He.onDestroy(()=>Bd(Ve,wt.toStyles)),void s.push(He);const Ft=[];wt.timelines.forEach(Ut=>{Ut.stretchStartingKeyframe=!0,this.disabledNodes.has(Ut.element)||Ft.push(Ut)}),wt.timelines=Ft,i.append(Ve,wt.timelines),o.push({instruction:wt,player:He,element:Ve}),wt.queriedElements.forEach(Ut=>Cc(a,Ut,[]).push(He)),wt.preStyleProps.forEach((Ut,cn)=>{if(Ut.size){let Jt=l.get(cn);Jt||l.set(cn,Jt=new Set),Ut.forEach((Nn,si)=>Jt.add(si))}}),wt.postStyleProps.forEach((Ut,cn)=>{let Jt=c.get(cn);Jt||c.set(cn,Jt=new Set),Ut.forEach((Nn,si)=>Jt.add(si))})});if(W.length){const Ce=[];W.forEach(Fe=>{Ce.push(function cLe(t,n){return new ot(3505,!1)}())}),L.forEach(Fe=>Fe.destroy()),this.reportError(Ce)}const H=new Map,P=new Map;o.forEach(Ce=>{const Fe=Ce.element;i.has(Fe)&&(P.set(Fe,Fe),this._beforeAnimationBuild(Ce.player.namespaceId,Ce.instruction,H))}),s.forEach(Ce=>{const Fe=Ce.element;this._getPreviousPlayers(Fe,!1,Ce.namespaceId,Ce.triggerName,null).forEach(He=>{Cc(H,Fe,[]).push(He),He.destroy()})});const X=v.filter(Ce=>See(Ce,l,c)),ne=new Map;vee(ne,this.driver,w,c,Wh).forEach(Ce=>{See(Ce,l,c)&&X.push(Ce)});const Ee=new Map;f.forEach((Ce,Fe)=>{vee(Ee,this.driver,new Set(Ce),l,"!")}),X.forEach(Ce=>{const Fe=ne.get(Ce),Ie=Ee.get(Ce);ne.set(Ce,new Map([...Fe?.entries()??[],...Ie?.entries()??[]]))});const Te=[],$e=[],Xe={};o.forEach(Ce=>{const{element:Fe,player:Ie,instruction:He}=Ce;if(i.has(Fe)){if(u.has(Fe))return Ie.onDestroy(()=>Bd(Fe,He.toStyles)),Ie.disabled=!0,Ie.overrideTotalTime(He.totalTime),void s.push(Ie);let Ve=Xe;if(P.size>1){let St=Fe;const mt=[];for(;St=St.parentNode;){const wt=P.get(St);if(wt){Ve=wt;break}mt.push(St)}mt.forEach(wt=>P.set(wt,Ve))}const tt=this._buildAnimation(Ie.namespaceId,He,H,r,Ee,ne);if(Ie.setRealPlayer(tt),Ve===Xe)Te.push(Ie);else{const St=this.playersByElement.get(Ve);St&&St.length&&(Ie.parentPlayer=sp(St)),s.push(Ie)}}else m_(Fe,He.fromStyles),Ie.onDestroy(()=>Bd(Fe,He.toStyles)),$e.push(Ie),u.has(Fe)&&s.push(Ie)}),$e.forEach(Ce=>{const Fe=r.get(Ce.element);if(Fe&&Fe.length){const Ie=sp(Fe);Ce.setRealPlayer(Ie)}}),s.forEach(Ce=>{Ce.parentPlayer?Ce.syncPlayerEvents(Ce.parentPlayer):Ce.destroy()});for(let Ce=0;Ce<v.length;Ce++){const Fe=v[Ce],Ie=Fe[Qu];if(Ev(Fe,LI),Ie&&Ie.hasAnimation)continue;let He=[];if(a.size){let tt=a.get(Fe);tt&&tt.length&&He.push(...tt);let St=this.driver.query(Fe,C4,!0);for(let mt=0;mt<St.length;mt++){let wt=a.get(St[mt]);wt&&wt.length&&He.push(...wt)}}const Ve=He.filter(tt=>!tt.destroyed);Ve.length?a3e(this,Fe,Ve):this.processLeaveNode(Fe)}return v.length=0,Te.forEach(Ce=>{this.players.push(Ce),Ce.onDone(()=>{Ce.destroy();const Fe=this.players.indexOf(Ce);this.players.splice(Fe,1)}),Ce.play()}),Te}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,i,s,r){let o=[];if(e){const a=this.playersByQueriedElement.get(n);a&&(o=a)}else{const a=this.playersByElement.get(n);if(a){const l=!r||r==Vw;a.forEach(c=>{c.queued||!l&&c.triggerName!=s||o.push(c)})}}return(i||s)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||s&&s!=a.triggerName))),o}_beforeAnimationBuild(n,e,i){const r=e.element,o=e.isRemovalTransition?void 0:n,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const c=l.element,u=c!==r,d=Cc(i,c,[]);this._getPreviousPlayers(c,u,o,a,e.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}m_(r,e.fromStyles)}_buildAnimation(n,e,i,s,r,o){const a=e.triggerName,l=e.element,c=[],u=new Set,d=new Set,h=e.timelines.map(p=>{const g=p.element;u.add(g);const v=g[Qu];if(v&&v.removedBeforeQueried)return new Pw(p.duration,p.delay);const y=g!==l,w=function l3e(t){const n=[];return wee(t,n),n}((i.get(g)||e3e).map(H=>H.getRealPlayer())).filter(H=>!!H.element&&H.element===g),E=r.get(g),T=o.get(g),L=QJ(this._normalizer,p.keyframes,E,T),W=this._buildPlayer(p,L,w);if(p.subTimeline&&s&&d.add(g),y){const H=new P4(n,a,g);H.setRealPlayer(W),c.push(H)}return W});c.forEach(p=>{Cc(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function s3e(t,n,e){let i=t.get(n);if(i){if(i.length){const s=i.indexOf(e);i.splice(s,1)}0==i.length&&t.delete(n)}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>tu(p,see));const f=sp(h);return f.onDestroy(()=>{u.forEach(p=>Ev(p,see)),Bd(l,e.toStyles)}),d.forEach(p=>{Cc(s,p,[]).push(f)}),f}_buildPlayer(n,e,i){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,i):new Pw(n.duration,n.delay)}}class P4{constructor(n,e,i){this.namespaceId=n,this.triggerName=e,this.element=i,this._player=new Pw,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,i)=>{e.forEach(s=>m4(n,i,void 0,s))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){Cc(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const e=this._player;e.triggerCallback&&e.triggerCallback(n)}}function WI(t){return t&&1===t.nodeType}function bee(t,n){const e=t.style.display;return t.style.display=n??"none",e}function vee(t,n,e,i,s){const r=[];e.forEach(l=>r.push(bee(l)));const o=[];i.forEach((l,c)=>{const u=new Map;l.forEach(d=>{const h=n.computeStyle(c,d,s);u.set(d,h),(!h||0==h.length)&&(c[Qu]=t3e,o.push(c))}),t.set(c,u)});let a=0;return e.forEach(l=>bee(l,r[a++])),o}function yee(t,n){const e=new Map;if(t.forEach(a=>e.set(a,[])),0==n.length)return e;const s=new Set(n),r=new Map;function o(a){if(!a)return 1;let l=r.get(a);if(l)return l;const c=a.parentNode;return l=e.has(c)?c:s.has(c)?1:o(c),r.set(a,l),l}return n.forEach(a=>{const l=o(a);1!==l&&e.get(l).push(a)}),e}function tu(t,n){t.classList?.add(n)}function Ev(t,n){t.classList?.remove(n)}function a3e(t,n,e){sp(e).onDone(()=>t.processLeaveNode(n))}function wee(t,n){for(let e=0;e<t.length;e++){const i=t[e];i instanceof YJ?wee(i.players,n):n.push(i)}}function See(t,n,e){const i=e.get(t);if(!i)return!1;let s=n.get(t);return s?i.forEach(r=>s.add(r)):n.set(t,i),e.delete(t),!0}class zw{constructor(n,e,i){this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(s,r)=>{},this._transitionEngine=new i3e(n.body,e,i),this._timelineEngine=new XLe(n.body,e,i),this._transitionEngine.onRemovalComplete=(s,r)=>this.onRemovalComplete(s,r)}registerTrigger(n,e,i,s,r){const o=n+"-"+s;let a=this._triggerCache[o];if(!a){const l=[],u=k4(this._driver,r,l,[]);if(l.length)throw function QFe(t,n){return new ot(3404,!1)}();a=function HLe(t,n,e){return new WLe(t,n,e)}(s,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,s,a)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,i,s){this._transitionEngine.insertNode(n,e,i,s)}onRemove(n,e,i){this._transitionEngine.removeNode(n,e,i)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,i,s){if("@"==i.charAt(0)){const[r,o]=JJ(i);this._timelineEngine.command(r,e,o,s)}else this._transitionEngine.trigger(n,e,i,s)}listen(n,e,i,s,r){if("@"==i.charAt(0)){const[o,a]=JJ(i);return this._timelineEngine.listen(o,e,a,r)}return this._transitionEngine.listen(n,e,i,s,r)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}}class Uw{static#e=this.initialStylesByElement=new WeakMap;constructor(n,e,i){this._element=n,this._startStyles=e,this._endStyles=i,this._state=0;let s=Uw.initialStylesByElement.get(n);s||Uw.initialStylesByElement.set(n,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Bd(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Bd(this._element,this._initialStyles),this._endStyles&&(Bd(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Uw.initialStylesByElement.delete(this._element),this._startStyles&&(m_(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(m_(this._element,this._endStyles),this._endStyles=null),Bd(this._element,this._initialStyles),this._state=3)}}function $4(t){let n=null;return t.forEach((e,i)=>{(function d3e(t){return"display"===t||"position"===t})(i)&&(n=n||new Map,n.set(i,e))}),n}class Cee{constructor(n,e,i,s){this.element=n,this.keyframes=e,this.options=i,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map;const e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const e=[];return n.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(n,e,i){return n.animate(this._convertKeyframesToObject(e),i)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,s)=>{"offset"!==s&&n.set(s,this._finished?i:I4(this.element,s))}),this.currentSnapshot=n}triggerCallback(n){const e="start"===n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class xee{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}containsElement(n,e){return tee(n,e)}getParentElement(n){return b4(n)}query(n,e,i){return nee(n,e,i)}computeStyle(n,e,i){return I4(n,e)}animate(n,e,i,s,r,o=[]){const l={duration:i,delay:s,fill:0==s?"both":"forwards"};r&&(l.easing=r);const c=new Map,u=o.filter(f=>f instanceof Cee);(function SLe(t,n){return 0===t||0===n})(i,s)&&u.forEach(f=>{f.currentSnapshot.forEach((p,g)=>c.set(g,p))});let d=function vLe(t){return t.length?t[0]instanceof Map?t:t.map(n=>new Map(Object.entries(n))):[]}(e).map(f=>new Map(f));d=function CLe(t,n,e){if(e.size&&n.length){let i=n[0],s=[];if(e.forEach((r,o)=>{i.has(o)||s.push(o),i.set(o,r)}),s.length)for(let r=1;r<n.length;r++){let o=n[r];s.forEach(a=>o.set(a,I4(t,a)))}}return n}(n,d,c);const h=function u3e(t,n){let e=null,i=null;return Array.isArray(n)&&n.length?(e=$4(n[0]),n.length>1&&(i=$4(n[n.length-1]))):n instanceof Map&&(e=$4(n)),e||i?new Uw(t,e,i):null}(n,d);return new Cee(n,d,l,h)}}const Eee="@.disabled";class Tee{constructor(n,e,i,s){this.namespaceId=n,this.delegate=e,this.engine=i,this._onDestroy=s,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,i,s=!0){this.delegate.insertBefore(n,e,i),this.engine.onInsert(this.namespaceId,e,n,s)}removeChild(n,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,i,s){this.delegate.setAttribute(n,e,i,s)}removeAttribute(n,e,i){this.delegate.removeAttribute(n,e,i)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,i,s){this.delegate.setStyle(n,e,i,s)}removeStyle(n,e,i){this.delegate.removeStyle(n,e,i)}setProperty(n,e,i){"@"==e.charAt(0)&&e==Eee?this.disableAnimations(n,!!i):this.delegate.setProperty(n,e,i)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,i){return this.delegate.listen(n,e,i)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}}class h3e extends Tee{constructor(n,e,i,s,r){super(e,i,s,r),this.factory=n,this.namespaceId=e}setProperty(n,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==Eee?this.disableAnimations(n,i=void 0===i||!!i):this.engine.process(this.namespaceId,n,e.slice(1),i):this.delegate.setProperty(n,e,i)}listen(n,e,i){if("@"==e.charAt(0)){const s=function f3e(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(n);let r=e.slice(1),o="";return"@"!=r.charAt(0)&&([r,o]=function p3e(t){const n=t.indexOf(".");return[t.substring(0,n),t.slice(n+1)]}(r)),this.engine.listen(this.namespaceId,s,r,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(n,e,i)}}class m3e{constructor(n,e,i){this.delegate=n,this.engine=e,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=(s,r)=>{const o=r?.parentNode(s);o&&r.removeChild(o,s)}}createRenderer(n,e){const s=this.delegate.createRenderer(n,e);if(!n||!e?.data?.animation){const c=this._rendererCache;let u=c.get(s);return u||(u=new Tee("",s,this.engine,()=>c.delete(s)),c.set(s,u)),u}const r=e.id,o=e.id+"-"+this._currentId;this._currentId++,this.engine.register(o,n);const a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(r,o,n,c.name,c)};return e.data.animation.forEach(a),new h3e(this,o,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(n,e,i){if(n>=0&&n<this._microtaskId)return void this._zone.run(()=>e(i));const s=this._animationCallbacksBuffer;0==s.length&&queueMicrotask(()=>{this._zone.run(()=>{s.forEach(r=>{const[o,a]=r;o(a)}),this._animationCallbacksBuffer=[]})}),s.push([e,i])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}let _3e=(()=>{class t extends zw{constructor(e,i,s){super(e,i,s)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Zn),Re(y4),Re(w4))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})();const Iee=[{provide:w4,useFactory:function g3e(){return new aee}},{provide:zw,useClass:_3e},{provide:N2,useFactory:function b3e(t,n,e){return new m3e(t,n,e)},deps:[c4,zw,Wt]}],B4=[{provide:y4,useFactory:()=>new xee},{provide:jo,useValue:"BrowserAnimations"},...Iee],kee=[{provide:y4,useClass:v4},{provide:jo,useValue:"NoopAnimations"},...Iee];let v3e=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?kee:B4}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:B4,imports:[qJ]})}return t})();function Dee(t,n,e,i,s,r,o){try{var a=t[r](o),l=a.value}catch(c){return void e(c)}a.done?n(l):Promise.resolve(l).then(i,s)}function de(t){return function(){var n=this,e=arguments;return new Promise(function(i,s){var r=t.apply(n,e);function o(l){Dee(r,i,s,o,a,"next",l)}function a(l){Dee(r,i,s,o,a,"throw",l)}o(void 0)})}}function Tv(t){return t&&"function"==typeof t.schedule}const Mee=t=>n=>{for(let e=0,i=t.length;e<i&&!n.closed;e++)n.next(t[e]);n.complete()};function V4(t,n){return new es(e=>{const i=new Tn;let s=0;return i.add(n.schedule(function(){s!==t.length?(e.next(t[s++]),e.closed||i.add(this.schedule())):e.complete()})),i})}function KI(t,n){return n?V4(t,n):new es(Mee(t))}function gt(...t){let n=t[t.length-1];return Tv(n)?(t.pop(),V4(t,n)):KI(t)}const rp=function w3e(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Aee=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Oee(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const z4=t=>{if(t&&"function"==typeof t[m0])return(t=>n=>{const e=t[m0]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(n)})(t);if(Aee(t))return Mee(t);if(Oee(t))return(t=>n=>(t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,db),n))(t);if(t&&"function"==typeof t[rp])return(t=>n=>{const e=t[rp]();for(;;){let i;try{i=e.next()}catch(s){return n.error(s),n}if(i.done){n.complete();break}if(n.next(i.value),n.closed)break}return"function"==typeof e.return&&n.add(()=>{e.return&&e.return()}),n})(t);{const e=`You provided ${cF(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(e)}};function oo(t,n){return n?function D3e(t,n){if(null!=t){if(function I3e(t){return t&&"function"==typeof t[m0]}(t))return function x3e(t,n){return new es(e=>{const i=new Tn;return i.add(n.schedule(()=>{const s=t[m0]();i.add(s.subscribe({next(r){i.add(n.schedule(()=>e.next(r)))},error(r){i.add(n.schedule(()=>e.error(r)))},complete(){i.add(n.schedule(()=>e.complete()))}}))})),i})}(t,n);if(Oee(t))return function E3e(t,n){return new es(e=>{const i=new Tn;return i.add(n.schedule(()=>t.then(s=>{i.add(n.schedule(()=>{e.next(s),i.add(n.schedule(()=>e.complete()))}))},s=>{i.add(n.schedule(()=>e.error(s)))}))),i})}(t,n);if(Aee(t))return V4(t,n);if(function k3e(t){return t&&"function"==typeof t[rp]}(t)||"string"==typeof t)return function T3e(t,n){if(!t)throw new Error("Iterable cannot be null");return new es(e=>{const i=new Tn;let s;return i.add(()=>{s&&"function"==typeof s.return&&s.return()}),i.add(n.schedule(()=>{s=t[rp](),i.add(n.schedule(function(){if(e.closed)return;let r,o;try{const a=s.next();r=a.value,o=a.done}catch(a){return void e.error(a)}o?e.complete():(e.next(r),this.schedule())}))})),i})}(t,n)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,n):t instanceof es?t:new es(z4(t))}class op extends Ji{constructor(n){super(),this.parent=n}_next(n){this.parent.notifyNext(n)}_error(n){this.parent.notifyError(n),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ap extends Ji{notifyNext(n){this.destination.next(n)}notifyError(n){this.destination.error(n)}notifyComplete(){this.destination.complete()}}function lp(t,n){if(n.closed)return;if(t instanceof es)return t.subscribe(n);let e;try{e=z4(t)(n)}catch(i){n.error(i)}return e}function qa(t,n,e=Number.POSITIVE_INFINITY){return"function"==typeof n?i=>i.pipe(qa((s,r)=>oo(t(s,r)).pipe(ze((o,a)=>n(s,o,r,a))),e)):("number"==typeof n&&(e=n),i=>i.lift(new M3e(t,e)))}class M3e{constructor(n,e=Number.POSITIVE_INFINITY){this.project=n,this.concurrent=e}call(n,e){return e.subscribe(new A3e(n,this.project,this.concurrent))}}class A3e extends ap{constructor(n,e,i=Number.POSITIVE_INFINITY){super(n),this.project=e,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(n){this.active<this.concurrent?this._tryNext(n):this.buffer.push(n)}_tryNext(n){let e;const i=this.index++;try{e=this.project(n,i)}catch(s){return void this.destination.error(s)}this.active++,this._innerSub(e)}_innerSub(n){const e=new op(this),i=this.destination;i.add(e);const s=lp(n,e);s!==e&&i.add(s)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(n){this.destination.next(n)}notifyComplete(){const n=this.buffer;this.active--,n.length>0?this._next(n.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function g_(t,n){return qa(t,n,1)}function an(t,n){return function(i){return i.lift(new O3e(t,n))}}class O3e{constructor(n,e){this.predicate=n,this.thisArg=e}call(n,e){return e.subscribe(new N3e(n,this.predicate,this.thisArg))}}class N3e extends Ji{constructor(n,e,i){super(n),this.predicate=e,this.thisArg=i,this.count=0}_next(n){let e;try{e=this.predicate.call(this.thisArg,n,this.count++)}catch(i){return void this.destination.error(i)}e&&this.destination.next(n)}}function Gw(t){return n=>n.lift(new R3e(t))}class R3e{constructor(n){this.callback=n}call(n,e){return e.subscribe(new F3e(n,this.callback))}}class F3e extends Ji{constructor(n,e){super(n),this.add(new Tn(e))}}function nn(t,n){return"function"==typeof n?e=>e.pipe(nn((i,s)=>oo(t(i,s)).pipe(ze((r,o)=>n(i,r,s,o))))):e=>e.lift(new L3e(t))}class L3e{constructor(n){this.project=n}call(n,e){return e.subscribe(new P3e(n,this.project))}}class P3e extends ap{constructor(n,e){super(n),this.project=e,this.index=0}_next(n){let e;const i=this.index++;try{e=this.project(n,i)}catch(s){return void this.destination.error(s)}this._innerSub(e)}_innerSub(n){const e=this.innerSubscription;e&&e.unsubscribe();const i=new op(this),s=this.destination;s.add(i),this.innerSubscription=lp(n,i),this.innerSubscription!==i&&s.add(this.innerSubscription)}_complete(){const{innerSubscription:n}=this;(!n||n.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(n){this.destination.next(n)}}class XI{}class YI{}class nu{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const s=e.slice(0,i),r=s.toLowerCase(),o=e.slice(i+1).trim();this.maybeSetNormalizedName(s,r),this.headers.has(r)?this.headers.get(r).push(o):this.headers.set(r,[o])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof nu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new nu;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof nu?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(n.name,e);const s=("a"===n.op?this.headers.get(e):void 0)||[];s.push(...i),this.headers.set(e,s);break;case"d":const r=n.value;if(r){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===r.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(n,e){const i=(Array.isArray(e)?e:[e]).map(r=>r.toString()),s=n.toLowerCase();this.headers.set(s,i),this.maybeSetNormalizedName(n,s)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class $3e{encodeKey(n){return Nee(n)}encodeValue(n){return Nee(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const V3e=/%(\d[a-f0-9])/gi,z3e={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Nee(t){return encodeURIComponent(t).replace(V3e,(n,e)=>z3e[e]??n)}function ZI(t){return`${t}`}class cp{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new $3e,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function B3e(t,n){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(s=>{const r=s.indexOf("="),[o,a]=-1==r?[n.decodeKey(s),""]:[n.decodeKey(s.slice(0,r)),n.decodeValue(s.slice(r+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const i=n.fromObject[e],s=Array.isArray(i)?i.map(ZI):[ZI(i)];this.map.set(e,s)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(i=>{const s=n[i];Array.isArray(s)?s.forEach(r=>{e.push({param:i,value:r,op:"a"})}):e.push({param:i,value:s,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new cp({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(ZI(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let i=this.map.get(n.param)||[];const s=i.indexOf(ZI(n.value));-1!==s&&i.splice(s,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class U3e{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function Ree(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Fee(t){return typeof Blob<"u"&&t instanceof Blob}function Lee(t){return typeof FormData<"u"&&t instanceof FormData}class jw{constructor(n,e,i,s){let r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function G3e(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==i?i:null,r=s):r=i,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params),this.transferCache=r.transferCache),this.headers??=new nu,this.context??=new U3e,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new cp,this.urlWithParams=e}serializeBody(){return null===this.body?null:"string"==typeof this.body||Ree(this.body)||Fee(this.body)||Lee(this.body)||function j3e(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)?this.body:this.body instanceof cp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Lee(this.body)?null:Fee(this.body)?this.body.type||null:Ree(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof cp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,i=n.url||this.url,s=n.responseType||this.responseType,r=n.transferCache??this.transferCache,o=void 0!==n.body?n.body:this.body,a=n.withCredentials??this.withCredentials,l=n.reportProgress??this.reportProgress;let c=n.headers||this.headers,u=n.params||this.params;const d=n.context??this.context;return void 0!==n.setHeaders&&(c=Object.keys(n.setHeaders).reduce((h,f)=>h.set(f,n.setHeaders[f]),c)),n.setParams&&(u=Object.keys(n.setParams).reduce((h,f)=>h.set(f,n.setParams[f]),u)),new jw(e,i,o,{params:u,headers:c,context:d,reportProgress:l,responseType:s,withCredentials:a,transferCache:r})}}var up=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(up||{});class U4{constructor(n,e=200,i="OK"){this.headers=n.headers||new nu,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class QI extends U4{constructor(n={}){super(n),this.type=up.ResponseHeader}clone(n={}){return new QI({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class b_ extends U4{constructor(n={}){super(n),this.type=up.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new b_({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class v_ extends U4{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function G4(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}let $ee=(()=>{class t{constructor(e){this.handler=e}request(e,i,s={}){let r;if(e instanceof jw)r=e;else{let l,c;l=s.headers instanceof nu?s.headers:new nu(s.headers),s.params&&(c=s.params instanceof cp?s.params:new cp({fromObject:s.params})),r=new jw(e,i,void 0!==s.body?s.body:null,{headers:l,context:s.context,params:c,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}const o=gt(r).pipe(g_(l=>this.handler.handle(l)));if(e instanceof jw||"events"===s.observe)return o;const a=o.pipe(an(l=>l instanceof b_));switch(s.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return a.pipe(ze(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(ze(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(ze(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(ze(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new cp).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,s={}){return this.request("PATCH",e,G4(s,i))}post(e,i,s={}){return this.request("POST",e,G4(s,i))}put(e,i,s={}){return this.request("PUT",e,G4(s,i))}static#e=this.\u0275fac=function(i){return new(i||t)(Re(XI))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})();const q3e=/^\)\]\}',?\n/;function Bee(t){if(t.url)return t.url;const n="X-Request-URL".toLocaleLowerCase();return t.headers.get(n)}let j4=(()=>{class t{constructor(){this.fetchImpl=Je(X3e,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=Je(Wt)}handle(e){return new es(i=>{const s=new AbortController;return this.doRequest(e,s.signal,i).then(H4,r=>i.error(new v_({error:r}))),()=>s.abort()})}doRequest(e,i,s){var r=this;return de(function*(){const o=r.createRequestInit(e);let a;try{const p=r.ngZone.runOutsideAngular(()=>r.fetchImpl(e.urlWithParams,{signal:i,...o}));(function Y3e(t){t.then(H4,H4)})(p),s.next({type:up.Sent}),a=yield p}catch(p){return void s.error(new v_({error:p,status:p.status??0,statusText:p.statusText,url:e.urlWithParams,headers:p.headers}))}const l=new nu(a.headers),c=a.statusText,u=Bee(a)??e.urlWithParams;let d=a.status,h=null;if(e.reportProgress&&s.next(new QI({headers:l,status:d,statusText:c,url:u})),a.body){const p=a.headers.get("content-length"),g=[],v=a.body.getReader();let w,E,y=0;const T=typeof Zone<"u"&&Zone.current;yield r.ngZone.runOutsideAngular(de(function*(){for(;;){const{done:W,value:H}=yield v.read();if(W)break;if(g.push(H),y+=H.length,e.reportProgress){E="text"===e.responseType?(E??"")+(w??=new TextDecoder).decode(H,{stream:!0}):void 0;const P=()=>s.next({type:up.DownloadProgress,total:p?+p:void 0,loaded:y,partialText:E});T?T.run(P):P()}}}));const L=r.concatChunks(g,y);try{const W=a.headers.get("Content-Type")??"";h=r.parseBody(e,L,W)}catch(W){return void s.error(new v_({error:W,headers:new nu(a.headers),status:a.status,statusText:a.statusText,url:Bee(a)??e.urlWithParams}))}}0===d&&(d=h?200:0),d>=200&&d<300?(s.next(new b_({body:h,headers:l,status:d,statusText:c,url:u})),s.complete()):s.error(new v_({error:h,headers:l,status:d,statusText:c,url:u}))})()}parseBody(e,i,s){switch(e.responseType){case"json":const r=(new TextDecoder).decode(i).replace(q3e,"");return""===r?null:JSON.parse(r);case"text":return(new TextDecoder).decode(i);case"blob":return new Blob([i],{type:s});case"arraybuffer":return i.buffer}}createRequestInit(e){const i={},s=e.withCredentials?"include":void 0;if(e.headers.forEach((r,o)=>i[r]=o.join(",")),e.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){const r=e.detectContentTypeHeader();null!==r&&(i["Content-Type"]=r)}return{body:e.serializeBody(),method:e.method,headers:i,credentials:s}}concatChunks(e,i){const s=new Uint8Array(i);let r=0;for(const o of e)s.set(o,r),r+=o.length;return s}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})();class X3e{}function H4(){}function Vee(t,n){return n(t)}function Z3e(t,n){return(e,i)=>n.intercept(e,{handle:s=>t(s,i)})}const J3e=new st(""),Hw=new st(""),zee=new st(""),Uee=new st("",{providedIn:"root",factory:()=>!0});function ePe(){let t=null;return(n,e)=>{null===t&&(t=(Je(J3e,{optional:!0})??[]).reduceRight(Z3e,Vee));const i=Je(Bh);if(Je(Uee)){const r=i.add();return t(n,e).pipe(Gw(()=>i.remove(r)))}return t(n,e)}}let Gee=(()=>{class t extends XI{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=Je(Bh),this.contributeToStability=Je(Uee)}handle(e){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(Hw),...this.injector.get(zee,[])]));this.chain=i.reduceRight((s,r)=>function Q3e(t,n,e){return(i,s)=>Bu(e,()=>n(i,r=>t(r,s)))}(s,r,this.injector),Vee)}if(this.contributeToStability){const i=this.pendingTasks.add();return this.chain(e,s=>this.backend.handle(s)).pipe(Gw(()=>this.pendingTasks.remove(i)))}return this.chain(e,i=>this.backend.handle(i))}static#e=this.\u0275fac=function(i){return new(i||t)(Re(YI),Re(Ga))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})();const rPe=/^\)\]\}',?\n/;let Hee=(()=>{class t{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new ot(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?oo(i.\u0275loadImpl()):gt(null)).pipe(nn(()=>new es(r=>{const o=i.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((g,v)=>o.setRequestHeader(g,v.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const g=e.detectContentTypeHeader();null!==g&&o.setRequestHeader("Content-Type",g)}if(e.responseType){const g=e.responseType.toLowerCase();o.responseType="json"!==g?g:"text"}const a=e.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const g=o.statusText||"OK",v=new nu(o.getAllResponseHeaders()),y=function oPe(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(o)||e.url;return l=new QI({headers:v,status:o.status,statusText:g,url:y}),l},u=()=>{let{headers:g,status:v,statusText:y,url:w}=c(),E=null;204!==v&&(E=typeof o.response>"u"?o.responseText:o.response),0===v&&(v=E?200:0);let T=v>=200&&v<300;if("json"===e.responseType&&"string"==typeof E){const L=E;E=E.replace(rPe,"");try{E=""!==E?JSON.parse(E):null}catch(W){E=L,T&&(T=!1,E={error:W,text:E})}}T?(r.next(new b_({body:E,headers:g,status:v,statusText:y,url:w||void 0})),r.complete()):r.error(new v_({error:E,headers:g,status:v,statusText:y,url:w||void 0}))},d=g=>{const{url:v}=c(),y=new v_({error:g,status:o.status||0,statusText:o.statusText||"Unknown Error",url:v||void 0});r.error(y)};let h=!1;const f=g=>{h||(r.next(c()),h=!0);let v={type:up.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),"text"===e.responseType&&o.responseText&&(v.partialText=o.responseText),r.next(v)},p=g=>{let v={type:up.UploadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),r.next(v)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),e.reportProgress&&(o.addEventListener("progress",f),null!==a&&o.upload&&o.upload.addEventListener("progress",p)),o.send(a),r.next({type:up.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",d),e.reportProgress&&(o.removeEventListener("progress",f),null!==a&&o.upload&&o.upload.removeEventListener("progress",p)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||t)(Re(TJ))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})();const W4=new st(""),Wee=new st("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),qee=new st("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Kee{}let cPe=(()=>{class t{constructor(e,i,s){this.doc=e,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=gJ(e,this.cookieName),this.lastCookieString=e),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Zn),Re(ju),Re(Wee))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})();function uPe(t,n){const e=t.url.toLowerCase();if(!Je(W4)||"GET"===t.method||"HEAD"===t.method||e.startsWith("http://")||e.startsWith("https://"))return n(t);const i=Je(Kee).getToken(),s=Je(qee);return null!=i&&!t.headers.has(s)&&(t=t.clone({headers:t.headers.set(s,i)})),n(t)}var dp=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(dp||{});function Xee(...t){const n=[$ee,Hee,Gee,{provide:XI,useExisting:Gee},{provide:YI,useFactory:()=>Je(j4,{optional:!0})??Je(Hee)},{provide:Hw,useValue:uPe,multi:!0},{provide:W4,useValue:!0},{provide:Kee,useClass:cPe}];for(const e of t)n.push(...e.\u0275providers);return yb(n)}const Yee=new st("");function Zee(){return function y_(t,n){return{\u0275kind:t,\u0275providers:n}}(dp.LegacyInterceptors,[{provide:Yee,useFactory:ePe},{provide:Hw,useExisting:Yee,multi:!0}])}function hp(...t){if(1===t.length){const n=t[0];if(Fm(n))return ek(n,null);if(cF(n)&&Object.getPrototypeOf(n)===Object.prototype){const e=Object.keys(n);return ek(e.map(i=>n[i]),e)}}if("function"==typeof t[t.length-1]){const n=t.pop();return ek(t=1===t.length&&Fm(t[0])?t[0]:t,null).pipe(ze(e=>n(...e)))}return ek(t,null)}function ek(t,n){return new es(e=>{const i=t.length;if(0===i)return void e.complete();const s=new Array(i);let r=0,o=0;for(let a=0;a<i;a++){const l=oo(t[a]);let c=!1;e.add(l.subscribe({next:u=>{c||(c=!0,o++),s[a]=u},error:u=>e.error(u),complete:()=>{r++,(r===i||!c)&&(o===i&&e.next(n?n.reduce((u,d,h)=>(u[d]=s[h],u),{}):s),e.complete())}}))}})}let rte=(()=>{class t{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static#e=this.\u0275fac=function(i){return new(i||t)(D(Hu),D(Bt))};static#t=this.\u0275dir=pt({type:t})}return t})(),w_=(()=>{class t extends rte{static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=Pn(t)))(s||t)}})();static#t=this.\u0275dir=pt({type:t,features:[bt]})}return t})();const qi=new st(""),yPe={provide:qi,useExisting:Cn(()=>Mr),multi:!0},SPe=new st("");let Mr=(()=>{class t extends rte{constructor(e,i,s){super(e,i),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function wPe(){const t=np()?np().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static#e=this.\u0275fac=function(i){return new(i||t)(D(Hu),D(Bt),D(SPe,8))};static#t=this.\u0275dir=pt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){1&i&&te("input",function(o){return s._handleInput(o.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(o){return s._compositionEnd(o.target.value)})},features:[Lt([yPe]),bt]})}return t})();function fp(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function ate(t){return null!=t&&"number"==typeof t.length}const ao=new st(""),pp=new st(""),CPe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class $r{static min(n){return function lte(t){return n=>{if(fp(n.value)||fp(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null}}(n)}static max(n){return function cte(t){return n=>{if(fp(n.value)||fp(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null}}(n)}static required(n){return function ute(t){return fp(t.value)?{required:!0}:null}(n)}static requiredTrue(n){return function dte(t){return!0===t.value?null:{required:!0}}(n)}static email(n){return function hte(t){return fp(t.value)||CPe.test(t.value)?null:{email:!0}}(n)}static minLength(n){return function fte(t){return n=>fp(n.value)||!ate(n.value)?null:n.value.length<t?{minlength:{requiredLength:t,actualLength:n.value.length}}:null}(n)}static maxLength(n){return pte(n)}static pattern(n){return function mte(t){if(!t)return tk;let n,e;return"string"==typeof t?(e="","^"!==t.charAt(0)&&(e+="^"),e+=t,"$"!==t.charAt(t.length-1)&&(e+="$"),n=new RegExp(e)):(e=t.toString(),n=t),i=>{if(fp(i.value))return null;const s=i.value;return n.test(s)?null:{pattern:{requiredPattern:e,actualValue:s}}}}(n)}static nullValidator(n){return null}static compose(n){return wte(n)}static composeAsync(n){return Ste(n)}}function pte(t){return n=>ate(n.value)&&n.value.length>t?{maxlength:{requiredLength:t,actualLength:n.value.length}}:null}function tk(t){return null}function _te(t){return null!=t}function gte(t){return Tw(t)?oo(t):t}function bte(t){let n={};return t.forEach(e=>{n=null!=e?{...n,...e}:n}),0===Object.keys(n).length?null:n}function vte(t,n){return n.map(e=>e(t))}function yte(t){return t.map(n=>function xPe(t){return!t.validate}(n)?n:e=>n.validate(e))}function wte(t){if(!t)return null;const n=t.filter(_te);return 0==n.length?null:function(e){return bte(vte(e,n))}}function q4(t){return null!=t?wte(yte(t)):null}function Ste(t){if(!t)return null;const n=t.filter(_te);return 0==n.length?null:function(e){return hp(vte(e,n).map(gte)).pipe(ze(bte))}}function K4(t){return null!=t?Ste(yte(t)):null}function Cte(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function xte(t){return t._rawValidators}function Ete(t){return t._rawAsyncValidators}function X4(t){return t?Array.isArray(t)?t:[t]:[]}function nk(t,n){return Array.isArray(t)?t.includes(n):t===n}function Tte(t,n){const e=X4(n);return X4(t).forEach(s=>{nk(e,s)||e.push(s)}),e}function Ite(t,n){return X4(n).filter(e=>!nk(t,e))}class kte{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=q4(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=K4(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class pl extends kte{get formDirective(){return null}get path(){return null}}class Vl extends kte{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Dte{constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let oi=(()=>{class t extends Dte{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||t)(D(Vl,2))};static#t=this.\u0275dir=pt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){2&i&&rt("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[bt]})}return t})(),zl=(()=>{class t extends Dte{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||t)(D(pl,10))};static#t=this.\u0275dir=pt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){2&i&&rt("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[bt]})}return t})();const Ww="VALID",sk="INVALID",Iv="PENDING",qw="DISABLED";class kv{}class Ate extends kv{constructor(n,e){super(),this.value=n,this.source=e}}class Q4 extends kv{constructor(n,e){super(),this.pristine=n,this.source=e}}class J4 extends kv{constructor(n,e){super(),this.touched=n,this.source=e}}class rk extends kv{constructor(n,e){super(),this.status=n,this.source=e}}class DPe extends kv{constructor(n){super(),this.source=n}}class MPe extends kv{constructor(n){super(),this.source=n}}function e$(t){return(ok(t)?t.validators:t)||null}function t$(t,n){return(ok(n)?n.asyncValidators:t)||null}function ok(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class n${constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=c_(()=>this.statusReactive()),this.statusReactive=Qf(void 0),this._pristine=c_(()=>this.pristineReactive()),this.pristineReactive=Qf(!0),this._touched=c_(()=>this.touchedReactive()),this.touchedReactive=Qf(!1),this._events=new Pt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return Xu(this.statusReactive)}set status(n){Xu(()=>this.statusReactive.set(n))}get valid(){return this.status===Ww}get invalid(){return this.status===sk}get pending(){return this.status==Iv}get disabled(){return this.status===qw}get enabled(){return this.status!==qw}get pristine(){return Xu(this.pristineReactive)}set pristine(n){Xu(()=>this.pristineReactive.set(n))}get dirty(){return!this.pristine}get touched(){return Xu(this.touchedReactive)}set touched(n){Xu(()=>this.touchedReactive.set(n))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(Tte(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(Tte(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(Ite(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(Ite(n,this._rawAsyncValidators))}hasValidator(n){return nk(this._rawValidators,n)}hasAsyncValidator(n){return nk(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){const e=!1===this.touched;this.touched=!0;const i=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched({...n,sourceControl:i}),e&&!1!==n.emitEvent&&this._events.next(new J4(!0,i))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(n))}markAsUntouched(n={}){const e=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const i=n.sourceControl??this;this._forEachChild(s=>{s.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:i})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,i),e&&!1!==n.emitEvent&&this._events.next(new J4(!1,i))}markAsDirty(n={}){const e=!0===this.pristine;this.pristine=!1;const i=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty({...n,sourceControl:i}),e&&!1!==n.emitEvent&&this._events.next(new Q4(!1,i))}markAsPristine(n={}){const e=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const i=n.sourceControl??this;this._forEachChild(s=>{s.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,i),e&&!1!==n.emitEvent&&this._events.next(new Q4(!0,i))}markAsPending(n={}){this.status=Iv;const e=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new rk(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending({...n,sourceControl:e})}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=qw,this.errors=null,this._forEachChild(s=>{s.disable({...n,onlySelf:!0})}),this._updateValue();const i=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new Ate(this.value,i)),this._events.next(new rk(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:e},this),this._onDisabledChange.forEach(s=>s(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Ww,this._forEachChild(i=>{i.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:e},this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n,e){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ww||this.status===Iv)&&this._runAsyncValidator(i,n.emitEvent)}const e=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new Ate(this.value,e)),this._events.next(new rk(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity({...n,sourceControl:e})}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qw:Ww}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,e){if(this.asyncValidator){this.status=Iv,this._hasOwnPendingAsyncValidator={emitEvent:!1!==e};const i=gte(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(s=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(s,{emitEvent:e,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent,this,e.shouldHaveEmitted)}get(n){let e=n;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,s)=>i&&i._find(s),this)}getError(n,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,e,i){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||i)&&this._events.next(new rk(this.status,e)),this._parent&&this._parent._updateControlsErrors(n,e,i)}_initObservables(){this.valueChanges=new it,this.statusChanges=new it}_calculateStatus(){return this._allControlsDisabled()?qw:this.errors?sk:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Iv)?Iv:this._anyControlsHaveStatus(sk)?sk:Ww}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,e){const i=!this._anyControlsDirty(),s=this.pristine!==i;this.pristine=i,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,e),s&&this._events.next(new Q4(this.pristine,e))}_updateTouched(n={},e){this.touched=this._anyControlsTouched(),this._events.next(new J4(this.touched,e)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,e)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){ok(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function APe(t){return Array.isArray(t)?q4(t):t||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function OPe(t){return Array.isArray(t)?K4(t):t||null}(this._rawAsyncValidators)}}class ml extends n${constructor(n,e,i){super(e$(e),t$(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){(function Nte(t,n,e){t._forEachChild((i,s)=>{if(void 0===e[s])throw new ot(1002,"")})})(this,0,n),Object.keys(n).forEach(i=>{(function Ote(t,n,e){const i=t.controls;if(!(n?Object.keys(i):i).length)throw new ot(1e3,"");if(!i[e])throw new ot(1001,"")})(this,!0,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(i=>{const s=this.controls[i];s&&s.patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,s)=>{i.reset(n?n[s]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&n(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,s)=>((i.enabled||this.disabled)&&(e[s]=i.value),e))}_reduceChildren(n,e){let i=n;return this._forEachChild((s,r)=>{i=e(i,s,r)}),i}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}const S_=new st("CallSetDisabledState",{providedIn:"root",factory:()=>Kw}),Kw="always";function ak(t,n){return[...n.path,t]}function Xw(t,n,e=Kw){i$(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||"always"===e)&&n.valueAccessor.setDisabledState?.(t.disabled),function FPe(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Rte(t,n)})}(t,n),function PPe(t,n){const e=(i,s)=>{n.valueAccessor.writeValue(i),s&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function LPe(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Rte(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function RPe(t,n){if(n.valueAccessor.setDisabledState){const e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function lk(t,n,e=!0){const i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),uk(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function ck(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function i$(t,n){const e=xte(t);null!==n.validator?t.setValidators(Cte(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const i=Ete(t);null!==n.asyncValidator?t.setAsyncValidators(Cte(i,n.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const s=()=>t.updateValueAndValidity();ck(n._rawValidators,s),ck(n._rawAsyncValidators,s)}function uk(t,n){let e=!1;if(null!==t){if(null!==n.validator){const s=xte(t);if(Array.isArray(s)&&s.length>0){const r=s.filter(o=>o!==n.validator);r.length!==s.length&&(e=!0,t.setValidators(r))}}if(null!==n.asyncValidator){const s=Ete(t);if(Array.isArray(s)&&s.length>0){const r=s.filter(o=>o!==n.asyncValidator);r.length!==s.length&&(e=!0,t.setAsyncValidators(r))}}}const i=()=>{};return ck(n._rawValidators,i),ck(n._rawAsyncValidators,i),e}function Rte(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Fte(t,n){i$(t,n)}function r$(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}function Lte(t,n){t._syncPendingControls(),n.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function o$(t,n){if(!n)return null;let e,i,s;return Array.isArray(n),n.forEach(r=>{r.constructor===Mr?e=r:function VPe(t){return Object.getPrototypeOf(t.constructor)===w_}(r)?i=r:s=r}),s||i||e||null}const UPe={provide:pl,useExisting:Cn(()=>Dv)},Yw=Promise.resolve();let Dv=(()=>{class t extends pl{get submitted(){return Xu(this.submittedReactive)}constructor(e,i,s){super(),this.callSetDisabledState=s,this._submitted=c_(()=>this.submittedReactive()),this.submittedReactive=Qf(!1),this._directives=new Set,this.ngSubmit=new it,this.form=new ml({},q4(e),K4(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Yw.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Xw(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Yw.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Yw.then(()=>{const i=this._findContainer(e.path),s=new ml({});Fte(s,e),i.registerControl(e.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Yw.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Yw.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),Lte(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static#e=this.\u0275fac=function(i){return new(i||t)(D(ao,10),D(pp,10),D(S_,8))};static#t=this.\u0275dir=pt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){1&i&&te("submit",function(o){return s.onSubmit(o)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Lt([UPe]),bt]})}return t})();function Pte(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function $te(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const _t=class extends n${constructor(n=null,e,i){super(e$(e),t$(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ok(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=$te(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){Pte(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){Pte(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){$te(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};let Bte=(()=>{class t extends pl{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return ak(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=Pn(t)))(s||t)}})();static#t=this.\u0275dir=pt({type:t,features:[bt]})}return t})();const HPe={provide:Vl,useExisting:Cn(()=>wi)},zte=Promise.resolve();let wi=(()=>{class t extends Vl{constructor(e,i,s,r,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new _t,this._registered=!1,this.name="",this.update=new it,this._parent=e,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=o$(0,r)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),r$(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Xw(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){zte.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,s=0!==i&&Rt(i);zte.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?ak(e,this._parent):[e]}static#e=this.\u0275fac=function(i){return new(i||t)(D(pl,9),D(ao,10),D(pp,10),D(qi,10),D(bi,8),D(S_,8))};static#t=this.\u0275dir=pt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Lt([HPe]),bt,On]})}return t})(),Kh=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=pt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})();const WPe={provide:qi,useExisting:Cn(()=>a$),multi:!0};let a$=(()=>{class t extends w_{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=Pn(t)))(s||t)}})();static#t=this.\u0275dir=pt({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){1&i&&te("input",function(o){return s.onChange(o.target.value)})("blur",function(){return s.onTouched()})},features:[Lt([WPe]),bt]})}return t})();const l$=new st(""),ZPe={provide:pl,useExisting:Cn(()=>qo)};let qo=(()=>{class t extends pl{get submitted(){return Xu(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}constructor(e,i,s){super(),this.callSetDisabledState=s,this._submitted=c_(()=>this._submittedReactive()),this._submittedReactive=Qf(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new it,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(uk(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return Xw(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){lk(e.control||null,e,!1),function zPe(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),Lte(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new DPe(this.control)),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new MPe(this.form))}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,s=this.form.get(e.path);i!==s&&(lk(i||null,e),(t=>t instanceof _t)(s)&&(Xw(s,e,this.callSetDisabledState),e.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);Fte(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function $Pe(t,n){return uk(t,n)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){i$(this.form,this),this._oldForm&&uk(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||t)(D(ao,10),D(pp,10),D(S_,8))};static#t=this.\u0275dir=pt({type:t,selectors:[["","formGroup",""]],hostBindings:function(i,s){1&i&&te("submit",function(o){return s.onSubmit(o)})("reset",function(){return s.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Lt([ZPe]),bt,On]})}return t})();const QPe={provide:pl,useExisting:Cn(()=>dk)};let dk=(()=>{class t extends Bte{constructor(e,i,s){super(),this.name=null,this._parent=e,this._setValidators(i),this._setAsyncValidators(s)}_checkParentType(){Hte(this._parent)}static#e=this.\u0275fac=function(i){return new(i||t)(D(pl,13),D(ao,10),D(pp,10))};static#t=this.\u0275dir=pt({type:t,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},features:[Lt([QPe]),bt]})}return t})();const JPe={provide:pl,useExisting:Cn(()=>c$)};let c$=(()=>{class t extends pl{constructor(e,i,s){super(),this.name=null,this._parent=e,this._setValidators(i),this._setAsyncValidators(s)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return ak(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){Hte(this._parent)}static#e=this.\u0275fac=function(i){return new(i||t)(D(pl,13),D(ao,10),D(pp,10))};static#t=this.\u0275dir=pt({type:t,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},features:[Lt([JPe]),bt]})}return t})();function Hte(t){return!(t instanceof dk||t instanceof qo||t instanceof c$)}const e4e={provide:Vl,useExisting:Cn(()=>_l)};let _l=(()=>{class t extends Vl{set isDisabled(e){}static#e=this._ngModelWarningSentOnce=!1;constructor(e,i,s,r,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new it,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=o$(0,r)}ngOnChanges(e){this._added||this._setUpControl(),r$(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return ak(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(i){return new(i||t)(D(pl,13),D(ao,10),D(pp,10),D(qi,10),D(l$,8))};static#n=this.\u0275dir=pt({type:t,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Lt([e4e]),bt,On]})}return t})();let C_=(()=>{class t{constructor(){this._validator=tk}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):tk,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=pt({type:t,features:[On]})}return t})();const f4e={provide:ao,useExisting:Cn(()=>h$),multi:!0};let h$=(()=>{class t extends C_{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>function Kte(t){return"number"==typeof t?t:parseInt(t,10)}(e),this.createValidator=e=>pte(e)}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=Pn(t)))(s||t)}})();static#t=this.\u0275dir=pt({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,s){2&i&&$t("maxlength",s._enabled?s.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Lt([f4e]),bt]})}return t})(),tne=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({})}return t})(),Xh=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:S_,useValue:e.callSetDisabledState??Kw}]}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[tne]})}return t})(),iu=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:l$,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:S_,useValue:e.callSetDisabledState??Kw}]}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[tne]})}return t})();function Ju(t){return!!t&&(t instanceof es||"function"==typeof t.lift&&"function"==typeof t.subscribe)}class _4e extends Ji{notifyNext(n,e,i,s,r){this.destination.next(e)}notifyError(n,e){this.destination.error(n)}notifyComplete(n){this.destination.complete()}}class g4e extends Ji{constructor(n,e,i){super(),this.parent=n,this.outerValue=e,this.outerIndex=i,this.index=0}_next(n){this.parent.notifyNext(this.outerValue,n,this.outerIndex,this.index++,this)}_error(n){this.parent.notifyError(n,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function b4e(t,n,e,i,s=new g4e(t,e,i)){if(!s.closed)return n instanceof es?n.subscribe(s):z4(n)(s)}const nne={};function Qt(...t){let n,e;return Tv(t[t.length-1])&&(e=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Fm(t[0])&&(t=t[0]),KI(t,e).lift(new v4e(n))}class v4e{constructor(n){this.resultSelector=n}call(n,e){return e.subscribe(new y4e(n,this.resultSelector))}}class y4e extends _4e{constructor(n,e){super(n),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(n){this.values.push(nne),this.observables.push(n)}_complete(){const n=this.observables,e=n.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let i=0;i<e;i++)this.add(b4e(this,n[i],void 0,i))}}notifyComplete(n){0==(this.active-=1)&&this.destination.complete()}notifyNext(n,e,i){const s=this.values,o=this.toRespond?s[i]===nne?--this.toRespond:this.toRespond:0;s[i]=e,0===o&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}_tryResultSelector(n){let e;try{e=this.resultSelector.apply(this,n)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}const pk=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function Mv(t=Number.POSITIVE_INFINITY){return qa(gT,t)}function x_(...t){return function w4e(){return Mv(1)}()(gt(...t))}const Yh=new es(t=>t.complete());function mk(t){return t?function S4e(t){return new es(n=>t.schedule(()=>n.complete()))}(t):Yh}function Vd(t){return new es(n=>{let e;try{e=t()}catch(s){return void n.error(s)}return(e?oo(e):mk()).subscribe(n)})}function mp(t,n){return new es(n?e=>n.schedule(C4e,0,{error:t,subscriber:e}):e=>e.error(t))}function C4e({error:t,subscriber:n}){n.error(t)}function f$(){return function(n){return n.lift(new x4e(n))}}class x4e{constructor(n){this.connectable=n}call(n,e){const{connectable:i}=this;i._refCount++;const s=new E4e(n,i),r=e.subscribe(s);return s.closed||(s.connection=i.connect()),r}}class E4e extends Ji{constructor(n,e){super(n),this.connectable=e}_unsubscribe(){const{connectable:n}=this;if(!n)return void(this.connection=null);this.connectable=null;const e=n._refCount;if(e<=0)return void(this.connection=null);if(n._refCount=e-1,e>1)return void(this.connection=null);const{connection:i}=this,s=n._connection;this.connection=null,s&&(!i||s===i)&&s.unsubscribe()}}class _k extends es{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let n=this._connection;return n||(this._isComplete=!1,n=this._connection=new Tn,n.add(this.source.subscribe(new I4e(this.getSubject(),this))),n.closed&&(this._connection=null,n=Tn.EMPTY)),n}refCount(){return f$()(this)}}const T4e=(()=>{const t=_k.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class I4e extends $j{constructor(n,e){super(n),this.connectable=e}_error(n){this._unsubscribe(),super._error(n)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const n=this.connectable;if(n){this.connectable=null;const e=n._connection;n._refCount=0,n._subject=null,n._connection=null,e&&e.unsubscribe()}}}const ine=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function ai(t){return n=>0===t?mk():n.lift(new D4e(t))}class D4e{constructor(n){if(this.total=n,this.total<0)throw new ine}call(n,e){return e.subscribe(new M4e(n,this.total))}}class M4e extends Ji{constructor(n,e){super(n),this.total=e,this.count=0}_next(n){const e=this.total,i=++this.count;i<=e&&(this.destination.next(n),i===e&&(this.destination.complete(),this.unsubscribe()))}}function So(...t){const n=t[t.length-1];return Tv(n)?(t.pop(),e=>x_(t,e,n)):e=>x_(t,e)}function Zw(t=null){return n=>n.lift(new A4e(t))}class A4e{constructor(n){this.defaultValue=n}call(n,e){return e.subscribe(new O4e(n,this.defaultValue))}}class O4e extends Ji{constructor(n,e){super(n),this.defaultValue=e,this.isEmpty=!0}_next(n){this.isEmpty=!1,this.destination.next(n)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function sne(t=F4e){return n=>n.lift(new N4e(t))}class N4e{constructor(n){this.errorFactory=n}call(n,e){return e.subscribe(new R4e(n,this.errorFactory))}}class R4e extends Ji{constructor(n,e){super(n),this.errorFactory=e,this.hasValue=!1}_next(n){this.hasValue=!0,this.destination.next(n)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(e){n=e}this.destination.error(n)}}}function F4e(){return new pk}function ds(t,n){const e=arguments.length>=2;return i=>i.pipe(t?an((s,r)=>t(s,r,i)):gT,ai(1),e?Zw(n):sne(()=>new pk))}function Zh(){}function mi(t,n,e){return function(s){return s.lift(new L4e(t,n,e))}}class L4e{constructor(n,e,i){this.nextOrObserver=n,this.error=e,this.complete=i}call(n,e){return e.subscribe(new P4e(n,this.nextOrObserver,this.error,this.complete))}}class P4e extends Ji{constructor(n,e,i,s){super(n),this._tapNext=Zh,this._tapError=Zh,this._tapComplete=Zh,this._tapError=i||Zh,this._tapComplete=s||Zh,p0(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||Zh,this._tapError=e.error||Zh,this._tapComplete=e.complete||Zh)}_next(n){try{this._tapNext.call(this._context,n)}catch(e){return void this.destination.error(e)}this.destination.next(n)}_error(n){try{this._tapError.call(this._context,n)}catch(e){return void this.destination.error(e)}this.destination.error(n)}_complete(){try{this._tapComplete.call(this._context)}catch(n){return void this.destination.error(n)}return this.destination.complete()}}function ts(t){return function(e){const i=new $4e(t),s=e.lift(i);return i.caught=s}}class $4e{constructor(n){this.selector=n}call(n,e){return e.subscribe(new B4e(n,this.selector,this.caught))}}class B4e extends ap{constructor(n,e,i){super(n),this.selector=e,this.caught=i}error(n){if(!this.isStopped){let e;try{e=this.selector(n,this.caught)}catch(r){return void super.error(r)}this._unsubscribeAndRecycle();const i=new op(this);this.add(i);const s=lp(e,i);s!==i&&this.add(s)}}}class z4e{constructor(n,e,i=!1){this.accumulator=n,this.seed=e,this.hasSeed=i}call(n,e){return e.subscribe(new U4e(n,this.accumulator,this.seed,this.hasSeed))}}class U4e extends Ji{constructor(n,e,i,s){super(n),this.accumulator=e,this._seed=i,this.hasSeed=s,this.index=0}get seed(){return this._seed}set seed(n){this.hasSeed=!0,this._seed=n}_next(n){if(this.hasSeed)return this._tryNext(n);this.seed=n,this.destination.next(n)}_tryNext(n){const e=this.index++;let i;try{i=this.accumulator(this.seed,n,e)}catch(s){this.destination.error(s)}this.seed=i,this.destination.next(i)}}function p$(t){return function(e){return 0===t?mk():e.lift(new G4e(t))}}class G4e{constructor(n){if(this.total=n,this.total<0)throw new ine}call(n,e){return e.subscribe(new j4e(n,this.total))}}class j4e extends Ji{constructor(n,e){super(n),this.total=e,this.ring=new Array,this.count=0}_next(n){const e=this.ring,i=this.total,s=this.count++;e.length<i?e.push(n):e[s%i]=n}_complete(){const n=this.destination;let e=this.count;if(e>0){const i=this.count>=this.total?this.total:this.count,s=this.ring;for(let r=0;r<i;r++){const o=e++%i;n.next(s[o])}}n.complete()}}class q4e{constructor(n){this.value=n}call(n,e){return e.subscribe(new K4e(n,this.value))}}class K4e extends Ji{constructor(n,e){super(n),this.value=e}_next(n){this.destination.next(this.value)}}function Ii(t){return n=>n.lift(new X4e(t))}class X4e{constructor(n){this.notifier=n}call(n,e){const i=new Y4e(n),s=lp(this.notifier,new op(i));return s&&!i.seenValue?(i.add(s),e.subscribe(i)):i}}class Y4e extends ap{constructor(n){super(n),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}const ki="primary",Qw=Symbol("RouteTitle");class Z4e{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Av(t){return new Z4e(t)}function Q4e(t,n,e){const i=e.path.split("/");if(i.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||i.length<t.length))return null;const s={};for(let r=0;r<i.length;r++){const o=i[r],a=t[r];if(":"===o[0])s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:s}}function zd(t,n){const e=t?m$(t):void 0,i=n?m$(n):void 0;if(!e||!i||e.length!=i.length)return!1;let s;for(let r=0;r<e.length;r++)if(s=e[r],!rne(t[s],n[s]))return!1;return!0}function m$(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function rne(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),i=[...n].sort();return e.every((s,r)=>i[r]===s)}return t===n}function one(t){return t.length>0?t[t.length-1]:null}function _p(t){return Ju(t)?t:Tw(t)?oo(Promise.resolve(t)):gt(t)}const e$e={exact:function cne(t,n,e){if(!T_(t.segments,n.segments)||!gk(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!cne(t.children[i],n.children[i],e))return!1;return!0},subset:une},ane={exact:function t$e(t,n){return zd(t,n)},subset:function n$e(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>rne(t[e],n[e]))},ignored:()=>!0};function lne(t,n,e){return e$e[e.paths](t.root,n.root,e.matrixParams)&&ane[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function une(t,n,e){return dne(t,n,n.segments,e)}function dne(t,n,e,i){if(t.segments.length>e.length){const s=t.segments.slice(0,e.length);return!(!T_(s,e)||n.hasChildren()||!gk(s,e,i))}if(t.segments.length===e.length){if(!T_(t.segments,e)||!gk(t.segments,e,i))return!1;for(const s in n.children)if(!t.children[s]||!une(t.children[s],n.children[s],i))return!1;return!0}{const s=e.slice(0,t.segments.length),r=e.slice(t.segments.length);return!!(T_(t.segments,s)&&gk(t.segments,s,i)&&t.children[ki])&&dne(t.children[ki],n,r,i)}}function gk(t,n,e){return n.every((i,s)=>ane[e](t[s].parameters,i.parameters))}class E_{constructor(n=new Ys([],{}),e={},i=null){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Av(this.queryParams),this._queryParamMap}toString(){return r$e.serialize(this)}}class Ys{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vk(this)}}class Jw{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=Av(this.parameters),this._parameterMap}toString(){return pne(this)}}function T_(t,n){return t.length===n.length&&t.every((e,i)=>e.path===n[i].path)}let Ov=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:()=>new bk,providedIn:"root"})}return t})();class bk{parse(n){const e=new _$e(n);return new E_(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${eS(n.root,!0)}`,i=function l$e(t){const n=Object.entries(t).map(([e,i])=>Array.isArray(i)?i.map(s=>`${yk(e)}=${yk(s)}`).join("&"):`${yk(e)}=${yk(i)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}(n.queryParams),s="string"==typeof n.fragment?`#${function o$e(t){return encodeURI(t)}(n.fragment)}`:"";return`${e}${i}${s}`}}const r$e=new bk;function vk(t){return t.segments.map(n=>pne(n)).join("/")}function eS(t,n){if(!t.hasChildren())return vk(t);if(n){const e=t.children[ki]?eS(t.children[ki],!1):"",i=[];return Object.entries(t.children).forEach(([s,r])=>{s!==ki&&i.push(`${s}:${eS(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function s$e(t,n){let e=[];return Object.entries(t.children).forEach(([i,s])=>{i===ki&&(e=e.concat(n(s,i)))}),Object.entries(t.children).forEach(([i,s])=>{i!==ki&&(e=e.concat(n(s,i)))}),e}(t,(i,s)=>s===ki?[eS(t.children[ki],!1)]:[`${s}:${eS(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[ki]?`${vk(t)}/${e[0]}`:`${vk(t)}/(${e.join("//")})`}}function hne(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yk(t){return hne(t).replace(/%3B/gi,";")}function _$(t){return hne(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wk(t){return decodeURIComponent(t)}function fne(t){return wk(t.replace(/\+/g,"%20"))}function pne(t){return`${_$(t.path)}${function a$e(t){return Object.entries(t).map(([n,e])=>`;${_$(n)}=${_$(e)}`).join("")}(t.parameters)}`}const c$e=/^[^\/()?;#]+/;function g$(t){const n=t.match(c$e);return n?n[0]:""}const u$e=/^[^\/()?;=#]+/,h$e=/^[^=?&#]+/,p$e=/^[^&#]+/;class _$e{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ys([],{}):new Ys([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[ki]=new Ys(n,e)),i}parseSegment(){const n=g$(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new ot(4009,!1);return this.capture(n),new Jw(wk(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=function d$e(t){const n=t.match(u$e);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const s=g$(this.remaining);s&&(i=s,this.capture(i))}n[wk(e)]=wk(i)}parseQueryParam(n){const e=function f$e(t){const n=t.match(h$e);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const o=function m$e(t){const n=t.match(p$e);return n?n[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const s=fne(e),r=fne(i);if(n.hasOwnProperty(s)){let o=n[s];Array.isArray(o)||(o=[o],n[s]=o),o.push(r)}else n[s]=r}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=g$(this.remaining),s=this.remaining[i.length];if("/"!==s&&")"!==s&&";"!==s)throw new ot(4010,!1);let r;i.indexOf(":")>-1?(r=i.slice(0,i.indexOf(":")),this.capture(r),this.capture(":")):n&&(r=ki);const o=this.parseChildren();e[r]=1===Object.keys(o).length?o[ki]:new Ys([],o),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new ot(4011,!1)}}function mne(t){return t.segments.length>0?new Ys([],{[ki]:t}):t}function _ne(t){const n={};for(const[i,s]of Object.entries(t.children)){const r=_ne(s);if(i===ki&&0===r.segments.length&&r.hasChildren())for(const[o,a]of Object.entries(r.children))n[o]=a;else(r.segments.length>0||r.hasChildren())&&(n[i]=r)}return function g$e(t){if(1===t.numberOfChildren&&t.children[ki]){const n=t.children[ki];return new Ys(t.segments.concat(n.segments),n.children)}return t}(new Ys(t.segments,n))}function I_(t){return t instanceof E_}function gne(t){let n;const s=mne(function e(r){const o={};for(const l of r.children){const c=e(l);o[l.outlet]=c}const a=new Ys(r.url,o);return r===t&&(n=a),a}(t.root));return n??s}function bne(t,n,e,i){let s=t;for(;s.parent;)s=s.parent;if(0===n.length)return b$(s,s,s,e,i);const r=function v$e(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new yne(!0,0,t);let n=0,e=!1;const i=t.reduce((s,r,o)=>{if("object"==typeof r&&null!=r){if(r.outlets){const a={};return Object.entries(r.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...s,{outlets:a}]}if(r.segmentPath)return[...s,r.segmentPath]}return"string"!=typeof r?[...s,r]:0===o?(r.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?n++:""!=a&&s.push(a))}),s):[...s,r]},[]);return new yne(e,n,i)}(n);if(r.toRoot())return b$(s,s,new Ys([],{}),e,i);const o=function y$e(t,n,e){if(t.isAbsolute)return new Ck(n,!0,0);if(!e)return new Ck(n,!1,NaN);if(null===e.parent)return new Ck(e,!0,0);const i=Sk(t.commands[0])?0:1;return function w$e(t,n,e){let i=t,s=n,r=e;for(;r>s;){if(r-=s,i=i.parent,!i)throw new ot(4005,!1);s=i.segments.length}return new Ck(i,!1,s-r)}(e,e.segments.length-1+i,t.numberOfDoubleDots)}(r,s,t),a=o.processChildren?nS(o.segmentGroup,o.index,r.commands):wne(o.segmentGroup,o.index,r.commands);return b$(s,o.segmentGroup,a,e,i)}function Sk(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function tS(t){return"object"==typeof t&&null!=t&&t.outlets}function b$(t,n,e,i,s){let o,r={};i&&Object.entries(i).forEach(([l,c])=>{r[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=t===n?e:vne(t,n,e);const a=mne(_ne(o));return new E_(a,r,s)}function vne(t,n,e){const i={};return Object.entries(t.children).forEach(([s,r])=>{i[s]=r===n?e:vne(r,n,e)}),new Ys(t.segments,i)}class yne{constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&Sk(i[0]))throw new ot(4003,!1);const s=i.find(tS);if(s&&s!==one(i))throw new ot(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ck{constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}}function wne(t,n,e){if(t??=new Ys([],{}),0===t.segments.length&&t.hasChildren())return nS(t,n,e);const i=function C$e(t,n,e){let i=0,s=n;const r={match:!1,pathIndex:0,commandIndex:0};for(;s<t.segments.length;){if(i>=e.length)return r;const o=t.segments[s],a=e[i];if(tS(a))break;const l=`${a}`,c=i<e.length-1?e[i+1]:null;if(s>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!Cne(l,c,o))return r;i+=2}else{if(!Cne(l,{},o))return r;i++}s++}return{match:!0,pathIndex:s,commandIndex:i}}(t,n,e),s=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const r=new Ys(t.segments.slice(0,i.pathIndex),{});return r.children[ki]=new Ys(t.segments.slice(i.pathIndex),t.children),nS(r,0,s)}return i.match&&0===s.length?new Ys(t.segments,{}):i.match&&!t.hasChildren()?v$(t,n,e):i.match?nS(t,0,s):v$(t,n,e)}function nS(t,n,e){if(0===e.length)return new Ys(t.segments,{});{const i=function S$e(t){return tS(t[0])?t[0].outlets:{[ki]:t}}(e),s={};if(Object.keys(i).some(r=>r!==ki)&&t.children[ki]&&1===t.numberOfChildren&&0===t.children[ki].segments.length){const r=nS(t.children[ki],n,e);return new Ys(t.segments,r.children)}return Object.entries(i).forEach(([r,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(s[r]=wne(t.children[r],n,o))}),Object.entries(t.children).forEach(([r,o])=>{void 0===i[r]&&(s[r]=o)}),new Ys(t.segments,s)}}function v$(t,n,e){const i=t.segments.slice(0,n);let s=0;for(;s<e.length;){const r=e[s];if(tS(r)){const l=x$e(r.outlets);return new Ys(i,l)}if(0===s&&Sk(e[0])){i.push(new Jw(t.segments[n].path,Sne(e[0]))),s++;continue}const o=tS(r)?r.outlets[ki]:`${r}`,a=s<e.length-1?e[s+1]:null;o&&a&&Sk(a)?(i.push(new Jw(o,Sne(a))),s+=2):(i.push(new Jw(o,{})),s++)}return new Ys(i,{})}function x$e(t){const n={};return Object.entries(t).forEach(([e,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(n[e]=v$(new Ys([],{}),0,i))}),n}function Sne(t){const n={};return Object.entries(t).forEach(([e,i])=>n[e]=`${i}`),n}function Cne(t,n,e){return t==e.path&&zd(n,e.parameters)}const iS="imperative";var rs=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(rs||{});class Ud{constructor(n,e){this.id=n,this.url=e}}class sS extends Ud{constructor(n,e,i="imperative",s=null){super(n,e),this.type=rs.NavigationStart,this.navigationTrigger=i,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class su extends Ud{constructor(n,e,i){super(n,e),this.urlAfterRedirects=i,this.type=rs.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Ec=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ec||{}),xk=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(xk||{});class gp extends Ud{constructor(n,e,i,s){super(n,e),this.reason=i,this.code=s,this.type=rs.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Nv extends Ud{constructor(n,e,i,s){super(n,e),this.reason=i,this.code=s,this.type=rs.NavigationSkipped}}class Ek extends Ud{constructor(n,e,i,s){super(n,e),this.error=i,this.target=s,this.type=rs.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class xne extends Ud{constructor(n,e,i,s){super(n,e),this.urlAfterRedirects=i,this.state=s,this.type=rs.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class E$e extends Ud{constructor(n,e,i,s){super(n,e),this.urlAfterRedirects=i,this.state=s,this.type=rs.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class T$e extends Ud{constructor(n,e,i,s,r){super(n,e),this.urlAfterRedirects=i,this.state=s,this.shouldActivate=r,this.type=rs.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class I$e extends Ud{constructor(n,e,i,s){super(n,e),this.urlAfterRedirects=i,this.state=s,this.type=rs.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ene extends Ud{constructor(n,e,i,s){super(n,e),this.urlAfterRedirects=i,this.state=s,this.type=rs.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class k$e{constructor(n){this.route=n,this.type=rs.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class D$e{constructor(n){this.route=n,this.type=rs.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class M$e{constructor(n){this.snapshot=n,this.type=rs.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class A$e{constructor(n){this.snapshot=n,this.type=rs.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class O$e{constructor(n){this.snapshot=n,this.type=rs.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class N$e{constructor(n){this.snapshot=n,this.type=rs.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tne{constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i,this.type=rs.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class y${}class Tk{constructor(n,e){this.url=n,this.navigationBehaviorOptions=e}}function ed(t){return t.outlet||ki}function rS(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class B$e{get injector(){return rS(this.route?.snapshot)??this.rootInjector}set injector(n){}constructor(n){this.rootInjector=n,this.outlet=null,this.route=null,this.children=new oS(this.rootInjector),this.attachRef=null}}let oS=(()=>{class t{constructor(e){this.rootInjector=e,this.contexts=new Map}onChildOutletCreated(e,i){const s=this.getOrCreateContext(e);s.outlet=i,this.contexts.set(e,s)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new B$e(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Ga))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Ine{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=w$(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){const e=w$(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=S$(n,this._root);return e.length<2?[]:e[e.length-2].children.map(s=>s.value).filter(s=>s!==n)}pathFromRoot(n){return S$(n,this._root).map(e=>e.value)}}function w$(t,n){if(t===n.value)return n;for(const e of n.children){const i=w$(t,e);if(i)return i}return null}function S$(t,n){if(t===n.value)return[n];for(const e of n.children){const i=S$(t,e);if(i.length)return i.unshift(n),i}return[]}class td{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function Rv(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class kne extends Ine{constructor(n,e){super(n),this.snapshot=e,C$(this,n)}toString(){return this.snapshot.toString()}}function Dne(t){const n=function V$e(t){const r=new kk([],{},{},"",{},ki,t,null,{});return new Mne("",new td(r,[]))}(t),e=new Mt([new Jw("",{})]),i=new Mt({}),s=new Mt({}),r=new Mt({}),o=new Mt(""),a=new Ul(e,i,r,o,s,ki,t,n.root);return a.snapshot=n.root,new kne(new td(a,[]),n)}class Ul{constructor(n,e,i,s,r,o,a,l){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=s,this.dataSubject=r,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ze(c=>c[Qw]))??gt(void 0),this.url=n,this.params=e,this.queryParams=i,this.fragment=s,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ze(n=>Av(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ze(n=>Av(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ik(t,n,e="emptyOnly"){let i;const{routeConfig:s}=t;return i=null===n||"always"!==e&&""!==s?.path&&(n.component||n.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...n.params,...t.params},data:{...n.data,...t.data},resolve:{...t.data,...n.data,...s?.data,...t._resolvedData}},s&&One(s)&&(i.resolve[Qw]=s.title),i}class kk{get title(){return this.data?.[Qw]}constructor(n,e,i,s,r,o,a,l,c){this.url=n,this.params=e,this.queryParams=i,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Av(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Av(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Mne extends Ine{constructor(n,e){super(e),this.url=n,C$(this,e)}toString(){return Ane(this._root)}}function C$(t,n){n.value._routerState=t,n.children.forEach(e=>C$(t,e))}function Ane(t){const n=t.children.length>0?` { ${t.children.map(Ane).join(", ")} } `:"";return`${t.value}${n}`}function x$(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,zd(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),zd(n.params,e.params)||t.paramsSubject.next(e.params),function J4e(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!zd(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.urlSubject.next(e.url),zd(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function E$(t,n){const e=zd(t.params,n.params)&&function i$e(t,n){return T_(t,n)&&t.every((e,i)=>zd(e.parameters,n[i].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||E$(t.parent,n.parent))}function One(t){return"string"==typeof t.title||null===t.title}let T$=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=ki,this.activateEvents=new it,this.deactivateEvents=new it,this.attachEvents=new it,this.detachEvents=new it,this.parentContexts=Je(oS),this.location=Je(Pr),this.changeDetector=Je(bi),this.inputBinder=Je(Dk,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:s}=e.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ot(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ot(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ot(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new ot(4013,!1);this._activatedRoute=e;const s=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new I$(e,a,s.injector);this.activated=s.createComponent(o,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=pt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[On]})}return t})();class I${__ngOutletInjector(n){return new I$(this.route,this.childContexts,n)}constructor(n,e,i){this.route=n,this.childContexts=e,this.parent=i}get(n,e){return n===Ul?this.route:n===oS?this.childContexts:this.parent.get(n,e)}}const Dk=new st("");let Nne=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:i}=e,s=Qt([i.queryParams,i.params,i.data]).pipe(nn(([r,o,a],l)=>(a={...r,...o,...a},0===l?gt(a):Promise.resolve(a)))).subscribe(r=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(e);const o=function oNe(t){const n=zi(t);if(!n)return null;const e=new aw(n);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}(i.component);if(o)for(const{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,r[a]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,s)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})();function aS(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=n.value;const s=function U$e(t,n,e){return n.children.map(i=>{for(const s of e.children)if(t.shouldReuseRoute(i.value,s.value.snapshot))return aS(t,i,s);return aS(t,i)})}(t,n,e);return new td(i,s)}{if(t.shouldAttach(n.value)){const r=t.retrieve(n.value);if(null!==r){const o=r.route;return o.value._futureSnapshot=n.value,o.children=n.children.map(a=>aS(t,a)),o}}const i=function G$e(t){return new Ul(new Mt(t.url),new Mt(t.params),new Mt(t.queryParams),new Mt(t.fragment),new Mt(t.data),t.outlet,t.component,t)}(n.value),s=n.children.map(r=>aS(t,r));return new td(i,s)}}class k${constructor(n,e){this.redirectTo=n,this.navigationBehaviorOptions=e}}const Rne="ngNavigationCancelingError";function Mk(t,n){const{redirectTo:e,navigationBehaviorOptions:i}=I_(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,s=Fne(!1,Ec.Redirect);return s.url=e,s.navigationBehaviorOptions=i,s}function Fne(t,n){const e=new Error(`NavigationCancelingError: ${t||""}`);return e[Rne]=!0,e.cancellationCode=n,e}function Lne(t){return!!t&&t[Rne]}class W$e{constructor(n,e,i,s,r){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=s,this.inputBindingEnabled=r}activate(n){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),x$(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){const s=Rv(e);n.children.forEach(r=>{const o=r.value.outlet;this.deactivateRoutes(r,s[o],i),delete s[o]}),Object.values(s).forEach(r=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(n,e,i){const s=n.value,r=e?e.value:null;if(s===r)if(s.component){const o=i.getContext(s.outlet);o&&this.deactivateChildRoutes(n,e,o.children)}else this.deactivateChildRoutes(n,e,i);else r&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const i=e.getContext(n.value.outlet),s=i&&n.value.component?i.children:e,r=Rv(n);for(const o of Object.values(r))this.deactivateRouteAndItsChildren(o,s);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:o,route:n,contexts:a})}}deactivateRouteAndOutlet(n,e){const i=e.getContext(n.value.outlet),s=i&&n.value.component?i.children:e,r=Rv(n);for(const o of Object.values(r))this.deactivateRouteAndItsChildren(o,s);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,e,i){const s=Rv(e);n.children.forEach(r=>{this.activateRoutes(r,s[r.value.outlet],i),this.forwardEvent(new N$e(r.value.snapshot))}),n.children.length&&this.forwardEvent(new A$e(n.value.snapshot))}activateRoutes(n,e,i){const s=n.value,r=e?e.value:null;if(x$(s),s===r)if(s.component){const o=i.getOrCreateContext(s.outlet);this.activateChildRoutes(n,e,o.children)}else this.activateChildRoutes(n,e,i);else if(s.component){const o=i.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),x$(a.route.value),this.activateChildRoutes(n,null,o.children)}else o.attachRef=null,o.route=s,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(n,null,o.children)}else this.activateChildRoutes(n,null,i)}}class Pne{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class Ak{constructor(n,e){this.component=n,this.route=e}}function q$e(t,n,e){const i=t._root;return lS(i,n?n._root:null,e,[i.value])}function Fv(t,n){const e=Symbol(),i=n.get(t,e);return i===e?"function"!=typeof t||function KSe(t){return null!==CT(t)}(t)?n.get(t):t:i}function lS(t,n,e,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=Rv(n);return t.children.forEach(o=>{(function X$e(t,n,e,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=t.value,o=n?n.value:null,a=e?e.getContext(t.value.outlet):null;if(o&&r.routeConfig===o.routeConfig){const l=function Y$e(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!T_(t.url,n.url);case"pathParamsOrQueryParamsChange":return!T_(t.url,n.url)||!zd(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!E$(t,n)||!zd(t.queryParams,n.queryParams);default:return!E$(t,n)}}(o,r,r.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new Pne(i)):(r.data=o.data,r._resolvedData=o._resolvedData),lS(t,n,r.component?a?a.children:null:e,i,s),l&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new Ak(a.outlet.component,o))}else o&&cS(n,a,s),s.canActivateChecks.push(new Pne(i)),lS(t,null,r.component?a?a.children:null:e,i,s)})(o,r[o.value.outlet],e,i.concat([o.value]),s),delete r[o.value.outlet]}),Object.entries(r).forEach(([o,a])=>cS(a,e.getContext(o),s)),s}function cS(t,n,e){const i=Rv(t),s=t.value;Object.entries(i).forEach(([r,o])=>{cS(o,s.component?n?n.children.getContext(r):null:n,e)}),e.canDeactivateChecks.push(new Ak(s.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,s))}function uS(t){return"function"==typeof t}function $ne(t){return t instanceof pk||"EmptyError"===t?.name}const Ok=Symbol("INITIAL_VALUE");function Lv(){return nn(t=>Qt(t.map(n=>n.pipe(ai(1),So(Ok)))).pipe(ze(n=>{for(const e of n)if(!0!==e){if(e===Ok)return Ok;if(!1===e||i8e(e))return e}return!0}),an(n=>n!==Ok),ai(1)))}function i8e(t){return I_(t)||t instanceof k$}function Bne(t){return function Vwe(...t){return Fj(t)}(mi(n=>{if("boolean"!=typeof n)throw Mk(0,n)}),ze(n=>!0===n))}class D${constructor(n){this.segmentGroup=n||null}}class Nk extends Error{constructor(n){super(),this.urlTree=n}}function Pv(t){return mp(new D$(t))}class _8e{constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){let i=[],s=e.root;for(;;){if(i=i.concat(s.segments),0===s.numberOfChildren)return gt(i);if(s.numberOfChildren>1||!s.children[ki])return mp(new ot(4e3,!1));s=s.children[ki]}}applyRedirectCommands(n,e,i,s,r){if("string"!=typeof e){const a=e,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,params:f,data:p,title:g}=s,v=Bu(r,()=>a({params:f,data:p,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,title:g}));if(v instanceof E_)throw new Nk(v);e=v}const o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,i);if("/"===e[0])throw new Nk(o);return o}applyRedirectCreateUrlTree(n,e,i,s){const r=this.createSegmentGroup(n,e.root,i,s);return new E_(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const i={};return Object.entries(n).forEach(([s,r])=>{if("string"==typeof r&&":"===r[0]){const a=r.substring(1);i[s]=e[a]}else i[s]=r}),i}createSegmentGroup(n,e,i,s){const r=this.createSegments(n,e.segments,i,s);let o={};return Object.entries(e.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(n,l,i,s)}),new Ys(r,o)}createSegments(n,e,i,s){return e.map(r=>":"===r.path[0]?this.findPosParam(n,r,s):this.findOrReturn(r,i))}findPosParam(n,e,i){const s=i[e.path.substring(1)];if(!s)throw new ot(4001,!1);return s}findOrReturn(n,e){let i=0;for(const s of e){if(s.path===n.path)return e.splice(i),s;i++}return n}}const M$={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function g8e(t,n,e,i,s){const r=A$(t,n,e);return r.matched?(i=function R$e(t,n){return t.providers&&!t._injector&&(t._injector=V2(t.providers,n,`Route: ${t.path}`)),t._injector??n}(n,i),function f8e(t,n,e,i){const s=n.canMatch;return s&&0!==s.length?gt(s.map(o=>{const a=Fv(o,t);return _p(function n8e(t){return t&&uS(t.canMatch)}(a)?a.canMatch(n,e):Bu(t,()=>a(n,e)))})).pipe(Lv(),Bne()):gt(!0)}(i,n,e).pipe(ze(o=>!0===o?r:{...M$}))):gt(r)}function A$(t,n,e){if("**"===n.path)return function b8e(t){return{matched:!0,parameters:t.length>0?one(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(e);if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?{...M$}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const s=(n.matcher||Q4e)(e,t,n);if(!s)return{...M$};const r={};Object.entries(s.posParams??{}).forEach(([a,l])=>{r[a]=l.path});const o=s.consumed.length>0?{...r,...s.consumed[s.consumed.length-1].parameters}:r;return{matched:!0,consumedSegments:s.consumed,remainingSegments:e.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function Vne(t,n,e,i){return e.length>0&&function w8e(t,n,e){return e.some(i=>Rk(t,n,i)&&ed(i)!==ki)}(t,e,i)?{segmentGroup:new Ys(n,y8e(i,new Ys(e,t.children))),slicedSegments:[]}:0===e.length&&function S8e(t,n,e){return e.some(i=>Rk(t,n,i))}(t,e,i)?{segmentGroup:new Ys(t.segments,v8e(t,e,i,t.children)),slicedSegments:e}:{segmentGroup:new Ys(t.segments,t.children),slicedSegments:e}}function v8e(t,n,e,i){const s={};for(const r of e)if(Rk(t,n,r)&&!i[ed(r)]){const o=new Ys([],{});s[ed(r)]=o}return{...i,...s}}function y8e(t,n){const e={};e[ki]=n;for(const i of t)if(""===i.path&&ed(i)!==ki){const s=new Ys([],{});e[ed(i)]=s}return e}function Rk(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}class E8e{}class k8e{constructor(n,e,i,s,r,o,a){this.injector=n,this.configLoader=e,this.rootComponentType=i,this.config=s,this.urlTree=r,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new _8e(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(n){return new ot(4002,`'${n.segmentGroup}'`)}recognize(){const n=Vne(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(ze(({children:e,rootSnapshot:i})=>{const s=new td(i,e),r=new Mne("",s),o=function b$e(t,n,e=null,i=null){return bne(gne(t),n,e,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(o),{state:r,tree:o}}))}match(n){const e=new kk([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),ki,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,ki,e).pipe(ze(i=>({children:i,rootSnapshot:e})),ts(i=>{if(i instanceof Nk)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof D$?this.noMatchError(i):i}))}processSegmentGroup(n,e,i,s,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(n,e,i,r):this.processSegment(n,e,i,i.segments,s,!0,r).pipe(ze(o=>o instanceof td?[o]:[]))}processChildren(n,e,i,s){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return oo(r).pipe(g_(o=>{const a=i.children[o],l=function $$e(t,n){const e=t.filter(i=>ed(i)===n);return e.push(...t.filter(i=>ed(i)!==n)),e}(e,o);return this.processSegmentGroup(n,l,a,o,s)}),function V4e(t,n){let e=!1;return arguments.length>=2&&(e=!0),function(s){return s.lift(new z4e(t,n,e))}}((o,a)=>(o.push(...a),o)),Zw(null),function H4e(t,n){const e=arguments.length>=2;return i=>i.pipe(t?an((s,r)=>t(s,r,i)):gT,p$(1),e?Zw(n):sne(()=>new pk))}(),qa(o=>{if(null===o)return Pv(i);const a=zne(o);return function D8e(t){t.sort((n,e)=>n.value.outlet===ki?-1:e.value.outlet===ki?1:n.value.outlet.localeCompare(e.value.outlet))}(a),gt(a)}))}processSegment(n,e,i,s,r,o,a){return oo(e).pipe(g_(l=>this.processSegmentAgainstRoute(l._injector??n,e,l,i,s,r,o,a).pipe(ts(c=>{if(c instanceof D$)return gt(null);throw c}))),ds(l=>!!l),ts(l=>{if($ne(l))return function x8e(t,n,e){return 0===n.length&&!t.children[e]}(i,s,r)?gt(new E8e):Pv(i);throw l}))}processSegmentAgainstRoute(n,e,i,s,r,o,a,l){return function C8e(t,n,e,i){return!!(ed(t)===i||i!==ki&&Rk(n,e,t))&&A$(n,t,e).matched}(i,s,r,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,s,i,r,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(n,s,e,i,r,o,l):Pv(s):Pv(s)}expandSegmentAgainstRouteUsingRedirect(n,e,i,s,r,o,a){const{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=A$(e,s,r);if(!l)return Pv(e);"string"==typeof s.redirectTo&&"/"===s.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const f=new kk(r,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Une(s),ed(s),s.component??s._loadedComponent??null,s,Gne(s)),p=Ik(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);const g=this.applyRedirects.applyRedirectCommands(u,s.redirectTo,d,f,n);return this.applyRedirects.lineralizeSegments(s,g).pipe(qa(v=>this.processSegment(n,i,e,v.concat(h),o,!1,a)))}matchSegmentAgainstRoute(n,e,i,s,r,o){const a=g8e(e,i,s,n);return"**"===i.path&&(e.children={}),a.pipe(nn(l=>l.matched?this.getChildConfig(n=i._injector??n,i,s).pipe(nn(({routes:c})=>{const u=i._loadedInjector??n,{parameters:d,consumedSegments:h,remainingSegments:f}=l,p=new kk(h,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Une(i),ed(i),i.component??i._loadedComponent??null,i,Gne(i)),g=Ik(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);const{segmentGroup:v,slicedSegments:y}=Vne(e,h,f,c);if(0===y.length&&v.hasChildren())return this.processChildren(u,c,v,p).pipe(ze(E=>new td(p,E)));if(0===c.length&&0===y.length)return gt(new td(p,[]));const w=ed(i)===r;return this.processSegment(u,c,v,y,w?ki:r,!0,p).pipe(ze(E=>new td(p,E instanceof td?[E]:[])))})):Pv(e)))}getChildConfig(n,e,i){return e.children?gt({routes:e.children,injector:n}):e.loadChildren?void 0!==e._loadedRoutes?gt({routes:e._loadedRoutes,injector:e._loadedInjector}):function h8e(t,n,e,i){const s=n.canLoad;return void 0===s||0===s.length?gt(!0):gt(s.map(o=>{const a=Fv(o,t);return _p(function Q$e(t){return t&&uS(t.canLoad)}(a)?a.canLoad(n,e):Bu(t,()=>a(n,e)))})).pipe(Lv(),Bne())}(n,e,i).pipe(qa(s=>s?this.configLoader.loadChildren(n,e).pipe(mi(r=>{e._loadedRoutes=r.routes,e._loadedInjector=r.injector})):function m8e(t){return mp(Fne(!1,Ec.GuardRejected))}())):gt({routes:[],injector:n})}}function M8e(t){const n=t.value.routeConfig;return n&&""===n.path}function zne(t){const n=[],e=new Set;for(const i of t){if(!M8e(i)){n.push(i);continue}const s=n.find(r=>i.value.routeConfig===r.value.routeConfig);void 0!==s?(s.children.push(...i.children),e.add(s)):n.push(i)}for(const i of e){const s=zne(i.children);n.push(new td(i.value,s))}return n.filter(i=>!e.has(i))}function Une(t){return t.data||{}}function Gne(t){return t.resolve||{}}function jne(t){const n=t.children.map(e=>jne(e)).flat();return[t,...n]}function O$(t){return nn(n=>{const e=t(n);return e?oo(e).pipe(ze(()=>n)):gt(n)})}let Hne=(()=>{class t{buildTitle(e){let i,s=e.root;for(;void 0!==s;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(r=>r.outlet===ki);return i}getResolvedTitleForRoute(e){return e.data[Qw]}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:()=>Je(L8e),providedIn:"root"})}return t})(),L8e=(()=>{class t extends Hne{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||t)(Re(h4))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const $v=new st("",{providedIn:"root",factory:()=>({})});let Wne=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Qe({type:t,selectors:[["ng-component"]],standalone:!0,features:[Ln],decls:1,vars:0,template:function(i,s){1&i&&be(0,"router-outlet")},dependencies:[T$],encapsulation:2})}return t})();function N$(t){const n=t.children&&t.children.map(N$),e=n?{...t,children:n}:{...t};return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==ki&&(e.component=Wne),e}const Bv=new st("");let R$=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Je(hQ)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return gt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=_p(e.loadComponent()).pipe(ze(qne),mi(r=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=r}),Gw(()=>{this.componentLoaders.delete(e)})),s=new _k(i,()=>new Pt).pipe(f$());return this.componentLoaders.set(e,s),s}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return gt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const r=function P8e(t,n,e,i){return _p(t.loadChildren()).pipe(ze(qne),qa(s=>s instanceof AX||Array.isArray(s)?gt(s):oo(n.compileModuleAsync(s))),ze(s=>{i&&i(t);let r,o,a=!1;return Array.isArray(s)?(o=s,!0):(r=s.create(e).injector,o=r.get(Bv,[],{optional:!0,self:!0}).flat()),{routes:o.map(N$),injector:r}}))}(i,this.compiler,e,this.onLoadEndListener).pipe(Gw(()=>{this.childrenLoaders.delete(i)})),o=new _k(r,()=>new Pt).pipe(f$());return this.childrenLoaders.set(i,o),o}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qne(t){return function $8e(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let F$=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:()=>Je(B8e),providedIn:"root"})}return t})(),B8e=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Kne=new st(""),Xne=new st("");function V8e(t,n,e){const i=t.get(Xne),s=t.get(Zn);return t.get(Wt).runOutsideAngular(()=>{if(!s.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(c=>setTimeout(c));let r;const o=new Promise(c=>{r=c}),a=s.startViewTransition(()=>(r(),function z8e(t){return new Promise(n=>{Pl({read:()=>setTimeout(n)},{injector:t})})}(t))),{onViewTransitionCreated:l}=i;return l&&Bu(t,()=>l({transition:a,from:n,to:e})),o})}const Yne=new st("");let Fk=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Pt,this.transitionAbortSubject=new Pt,this.configLoader=Je(R$),this.environmentInjector=Je(Ga),this.urlSerializer=Je(Ov),this.rootContexts=Je(oS),this.location=Je(d_),this.inputBindingEnabled=null!==Je(Dk,{optional:!0}),this.titleStrategy=Je(Hne),this.options=Je($v,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Je(F$),this.createViewTransition=Je(Kne,{optional:!0}),this.navigationErrorHandler=Je(Yne,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>gt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new D$e(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new k$e(s))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e,i,s){return this.transitions=new Mt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:iS,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(an(r=>0!==r.id),ze(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),nn(r=>{let o=!1,a=!1;return gt(r).pipe(nn(l=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Ec.SupersededByNewNavigation),Yh;this.currentTransition=r,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:"string"==typeof l.extras.browserUrl?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!c&&"reload"!==(l.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const d="";return this.events.next(new Nv(l.id,this.urlSerializer.serialize(l.rawUrl),d,xk.IgnoredSameUrlNavigation)),l.resolve(!1),Yh}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return gt(l).pipe(nn(d=>{const h=this.transitions?.getValue();return this.events.next(new sS(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?Yh:Promise.resolve(d)}),function A8e(t,n,e,i,s,r){return qa(o=>function T8e(t,n,e,i,s,r,o="emptyOnly"){return new k8e(t,n,e,i,s,o,r).recognize()}(t,n,e,i,o.extractedUrl,s,r).pipe(ze(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),mi(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects};const h=new xne(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:d,extractedUrl:h,source:f,restoredState:p,extras:g}=l,v=new sS(d,this.urlSerializer.serialize(h),f,p);this.events.next(v);const y=Dne(this.rootComponentType).snapshot;return this.currentTransition=r={...l,targetSnapshot:y,urlAfterRedirects:h,extras:{...g,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=h,gt(r)}{const d="";return this.events.next(new Nv(l.id,this.urlSerializer.serialize(l.extractedUrl),d,xk.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Yh}}),mi(l=>{const c=new E$e(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),ze(l=>(this.currentTransition=r={...l,guards:q$e(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},r)),function s8e(t,n){return qa(e=>{const{targetSnapshot:i,currentSnapshot:s,guards:{canActivateChecks:r,canDeactivateChecks:o}}=e;return 0===o.length&&0===r.length?gt({...e,guardsResult:!0}):function r8e(t,n,e,i){return oo(t).pipe(qa(s=>function d8e(t,n,e,i,s){const r=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return r&&0!==r.length?gt(r.map(a=>{const l=rS(n)??s,c=Fv(a,l);return _p(function t8e(t){return t&&uS(t.canDeactivate)}(c)?c.canDeactivate(t,n,e,i):Bu(l,()=>c(t,n,e,i))).pipe(ds())})).pipe(Lv()):gt(!0)}(s.component,s.route,e,n,i)),ds(s=>!0!==s,!0))}(o,i,s,t).pipe(qa(a=>a&&function Z$e(t){return"boolean"==typeof t}(a)?function o8e(t,n,e,i){return oo(n).pipe(g_(s=>x_(function l8e(t,n){return null!==t&&n&&n(new M$e(t)),gt(!0)}(s.route.parent,i),function a8e(t,n){return null!==t&&n&&n(new O$e(t)),gt(!0)}(s.route,i),function u8e(t,n,e){const i=n[n.length-1],r=n.slice(0,n.length-1).reverse().map(o=>function K$e(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(o)).filter(o=>null!==o).map(o=>Vd(()=>gt(o.guards.map(l=>{const c=rS(o.node)??e,u=Fv(l,c);return _p(function e8e(t){return t&&uS(t.canActivateChild)}(u)?u.canActivateChild(i,t):Bu(c,()=>u(i,t))).pipe(ds())})).pipe(Lv())));return gt(r).pipe(Lv())}(t,s.path,e),function c8e(t,n,e){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return gt(!0);const s=i.map(r=>Vd(()=>{const o=rS(n)??e,a=Fv(r,o);return _p(function J$e(t){return t&&uS(t.canActivate)}(a)?a.canActivate(n,t):Bu(o,()=>a(n,t))).pipe(ds())}));return gt(s).pipe(Lv())}(t,s.route,e))),ds(s=>!0!==s,!0))}(i,r,t,n):gt(a)),ze(a=>({...e,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),mi(l=>{if(r.guardsResult=l.guardsResult,l.guardsResult&&"boolean"!=typeof l.guardsResult)throw Mk(0,l.guardsResult);const c=new T$e(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),an(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",Ec.GuardRejected),!1)),O$(l=>{if(l.guards.canActivateChecks.length)return gt(l).pipe(mi(c=>{const u=new I$e(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),nn(c=>{let u=!1;return gt(c).pipe(function O8e(t,n){return qa(e=>{const{targetSnapshot:i,guards:{canActivateChecks:s}}=e;if(!s.length)return gt(e);const r=new Set(s.map(l=>l.route)),o=new Set;for(const l of r)if(!o.has(l))for(const c of jne(l))o.add(c);let a=0;return oo(o).pipe(g_(l=>r.has(l)?function N8e(t,n,e,i){const s=t.routeConfig,r=t._resolve;return void 0!==s?.title&&!One(s)&&(r[Qw]=s.title),function R8e(t,n,e,i){const s=m$(t);if(0===s.length)return gt({});const r={};return oo(s).pipe(qa(o=>function F8e(t,n,e,i){const s=rS(n)??i,r=Fv(t,s);return _p(r.resolve?r.resolve(n,e):Bu(s,()=>r(n,e)))}(t[o],n,e,i).pipe(ds(),mi(a=>{if(a instanceof k$)throw Mk(new bk,a);r[o]=a}))),p$(1),function W4e(t){return n=>n.lift(new q4e(t))}(r),ts(o=>$ne(o)?Yh:mp(o)))}(r,t,n,i).pipe(ze(o=>(t._resolvedData=o,t.data=Ik(t,t.parent,e).resolve,null)))}(l,i,t,n):(l.data=Ik(l,l.parent,t).resolve,gt(void 0))),mi(()=>a++),p$(1),qa(l=>a===o.size?gt(e):Yh))})}(this.paramsInheritanceStrategy,this.environmentInjector),mi({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",Ec.NoDataFromResolver)}}))}),mi(c=>{const u=new Ene(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),O$(l=>{const c=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(mi(h=>{u.component=h}),ze(()=>{})));for(const h of u.children)d.push(...c(h));return d};return Qt(c(l.targetSnapshot.root)).pipe(Zw(null),ai(1))}),O$(()=>this.afterPreactivation()),nn(()=>{const{currentSnapshot:l,targetSnapshot:c}=r,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?oo(u).pipe(ze(()=>r)):gt(r)}),ze(l=>{const c=function z$e(t,n,e){const i=aS(t,n._root,e?e._root:void 0);return new kne(i,n)}(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=r={...l,targetRouterState:c},this.currentNavigation.targetRouterState=c,r}),mi(()=>{this.events.next(new y$)}),((t,n,e,i)=>ze(s=>(new W$e(n,s.targetRouterState,s.currentRouterState,e,i).activate(t),s)))(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ai(1),mi({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new su(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Ii(this.transitionAbortSubject.pipe(mi(l=>{throw l}))),Gw(()=>{!o&&!a&&this.cancelNavigationTransition(r,"",Ec.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),ts(l=>{if(a=!0,Lne(l))this.events.next(new gp(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode)),function j$e(t){return Lne(t)&&I_(t.url)}(l)?this.events.next(new Tk(l.url,l.navigationBehaviorOptions)):r.resolve(!1);else{const c=new Ek(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);try{const u=Bu(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof k$){const{message:d,cancellationCode:h}=Mk(0,u);this.events.next(new gp(r.id,this.urlSerializer.serialize(r.extractedUrl),d,h)),this.events.next(new Tk(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(c);const d=e.errorHandler(l);r.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Yh}))}))}cancelNavigationTransition(e,i,s){const r=new gp(e.id,this.urlSerializer.serialize(e.extractedUrl),i,s);this.events.next(r),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function U8e(t){return t!==iS}let G8e=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:()=>Je(H8e),providedIn:"root"})}return t})();class j8e{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}let H8e=(()=>{class t extends j8e{static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=Pn(t)))(s||t)}})();static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Zne=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:()=>Je(W8e),providedIn:"root"})}return t})(),W8e=(()=>{class t extends Zne{constructor(){super(...arguments),this.location=Je(d_),this.urlSerializer=Je(Ov),this.options=Je($v,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Je(F$),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new E_,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Dne(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{"popstate"===i.type&&e(i.url,i.state)})}handleRouterEvent(e,i){if(e instanceof sS)this.stateMemento=this.createStateMemento();else if(e instanceof Nv)this.rawUrlTree=i.initialUrl;else if(e instanceof xne){if("eager"===this.urlUpdateStrategy&&!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else e instanceof y$?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):e instanceof gp&&(e.code===Ec.GuardRejected||e.code===Ec.NoDataFromResolver)?this.restoreHistory(i):e instanceof Ek?this.restoreHistory(i,!0):e instanceof su&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,i){const s=e instanceof E_?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(s,"",o)}else{const r={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(s,"",r)}}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-this.browserPageId;0!==r?this.location.historyGo(r):this.currentUrlTree===e.finalUrl&&0===r&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=Pn(t)))(s||t)}})();static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var dS=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(dS||{});function Qne(t,n){t.events.pipe(an(e=>e instanceof su||e instanceof gp||e instanceof Ek||e instanceof Nv),ze(e=>e instanceof su||e instanceof Nv?dS.COMPLETE:e instanceof gp&&(e.code===Ec.Redirect||e.code===Ec.SupersededByNewNavigation)?dS.REDIRECTING:dS.FAILED),an(e=>e!==dS.REDIRECTING),ai(1)).subscribe(()=>{n()})}function q8e(t){throw t}const K8e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},X8e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Hr=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Je(tQ),this.stateManager=Je(Zne),this.options=Je($v,{optional:!0})||{},this.pendingTasks=Je(Bh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Je(Fk),this.urlSerializer=Je(Ov),this.location=Je(d_),this.urlHandlingStrategy=Je(F$),this._events=new Pt,this.errorHandler=this.options.errorHandler||q8e,this.navigated=!1,this.routeReuseStrategy=Je(G8e),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Je(Bv,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Je(Dk,{optional:!0}),this.eventsSubscription=new Tn,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(i=>{try{const s=this.navigationTransitions.currentTransition,r=this.navigationTransitions.currentNavigation;if(null!==s&&null!==r)if(this.stateManager.handleRouterEvent(i,r),i instanceof gp&&i.code!==Ec.Redirect&&i.code!==Ec.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof su)this.navigated=!0;else if(i instanceof Tk){const o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l={browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||"eager"===this.urlUpdateStrategy||U8e(s.source),...o};this.scheduleNavigation(a,iS,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}(function Z8e(t){return!(t instanceof y$||t instanceof Tk)})(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),iS,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",i)},0)})}navigateToSyncWithBrowser(e,i,s){const r={replaceUrl:!0},o=s?.navigationId?s:null;if(s){const l={...s};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(r.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,i,o,r)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(N$),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){const{relativeTo:s,queryParams:r,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o;let d,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...r};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}null!==u&&(u=this.removeEmptyProps(u));try{d=gne(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||"/"!==e[0][0])&&(e=[]),d=this.currentUrlTree.root}return bne(d,e,u,c??null)}navigateByUrl(e,i={skipLocationChange:!1}){const s=I_(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(r,iS,null,i)}navigate(e,i={skipLocationChange:!1}){return function Y8e(t){for(let n=0;n<t.length;n++)if(null==t[n])throw new ot(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let s;if(s=!0===i?{...K8e}:!1===i?{...X8e}:i,I_(e))return lne(this.currentUrlTree,e,s);const r=this.parseUrl(e);return lne(this.currentUrlTree,r,s)}removeEmptyProps(e){return Object.entries(e).reduce((i,[s,r])=>(null!=r&&(i[s]=r),i),{})}scheduleNavigation(e,i,s,r,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,l=h});const u=this.pendingTasks.add();return Qne(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:r,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Jne{}let e5e=(()=>{class t{constructor(e,i,s,r,o){this.router=e,this.injector=s,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(an(e=>e instanceof su),g_(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const s=[];for(const r of i){r.providers&&!r._injector&&(r._injector=V2(r.providers,e,`Route: ${r.path}`));const o=r._injector??e,a=r._loadedInjector??o;(r.loadChildren&&!r._loadedRoutes&&void 0===r.canLoad||r.loadComponent&&!r._loadedComponent)&&s.push(this.preloadConfig(o,r)),(r.children||r._loadedRoutes)&&s.push(this.processRoutes(a,r.children??r._loadedRoutes))}return oo(s).pipe(Mv())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let s;s=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):gt(null);const r=s.pipe(qa(o=>null===o?gt(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));return i.loadComponent&&!i._loadedComponent?oo([r,this.loader.loadComponent(i)]).pipe(Mv()):r})}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Hr),Re(hQ),Re(Ga),Re(Jne),Re(R$))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const P$=new st("");let eie=(()=>{class t{constructor(e,i,s,r,o={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=s,this.zone=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof sS?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof su?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Nv&&e.code===xk.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Tne&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Tne(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){W0()};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})();function Gd(t,n){return{\u0275kind:t,\u0275providers:n}}function nie(){const t=Je(ti);return n=>{const e=t.get(Bl);if(n!==e.components[0])return;const i=t.get(Hr),s=t.get(iie);1===t.get($$)&&i.initialNavigation(),t.get(sie,null,Wi.Optional)?.setUpPreloading(),t.get(P$,null,Wi.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const iie=new st("",{factory:()=>new Pt}),$$=new st("",{providedIn:"root",factory:()=>1}),sie=new st("");function s5e(t){return Gd(0,[{provide:sie,useExisting:e5e},{provide:Jne,useExisting:t}])}function o5e(t){return Gd(9,[{provide:Kne,useValue:V8e},{provide:Xne,useValue:{skipNextTransition:!!t?.skipInitialTransition,...t}}])}const rie=new st("ROUTER_FORROOT_GUARD"),a5e=[d_,{provide:Ov,useClass:bk},Hr,oS,{provide:Ul,useFactory:function tie(t){return t.routerState.root},deps:[Hr]},R$,[]];let l5e=(()=>{class t{constructor(e){}static forRoot(e,i){return{ngModule:t,providers:[a5e,[],{provide:Bv,multi:!0,useValue:e},{provide:rie,useFactory:h5e,deps:[[Hr,new Id,new Rh]]},{provide:$v,useValue:i||{}},i?.useHash?{provide:u_,useClass:dNe}:{provide:u_,useClass:aJ},{provide:P$,useFactory:()=>{const t=Je(SRe),n=Je(Wt),e=Je($v),i=Je(Fk),s=Je(Ov);return e.scrollOffset&&t.setOffset(e.scrollOffset),new eie(s,i,t,n,e)}},i?.preloadingStrategy?s5e(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?f5e(i):[],i?.bindToComponentInputs?Gd(8,[Nne,{provide:Dk,useExisting:Nne}]).\u0275providers:[],i?.enableViewTransitions?o5e().\u0275providers:[],[{provide:oie,useFactory:nie},{provide:oI,multi:!0,useExisting:oie}]]}}static forChild(e){return{ngModule:t,providers:[{provide:Bv,multi:!0,useValue:e}]}}static#e=this.\u0275fac=function(i){return new(i||t)(Re(rie,8))};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({})}return t})();function h5e(t){return"guarded"}function f5e(t){return["disabled"===t.initialNavigation?Gd(3,[{provide:Iw,multi:!0,useFactory:()=>{const n=Je(Hr);return()=>{n.setUpLocationChangeListener()}}},{provide:$$,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Gd(2,[{provide:$$,useValue:0},{provide:Iw,multi:!0,deps:[ti],useFactory:n=>{const e=n.get(cNe,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const s=n.get(Hr),r=n.get(iie);Qne(s,()=>{i(!0)}),n.get(Fk).afterPreactivation=()=>(i(!0),r.closed?gt(void 0):r),s.initialNavigation()}))}}]).\u0275providers:[]]}const oie=new st("");function Qh(t,n,e,i){return p0(e)&&(i=e,e=void 0),i?Qh(t,n,e).pipe(ze(s=>Fm(s)?i(...s):i(s))):new es(s=>{aie(t,n,function r(o){s.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},s,e)})}function aie(t,n,e,i,s){let r;if(function g5e(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const o=t;t.addEventListener(n,e,s),r=()=>o.removeEventListener(n,e,s)}else if(function _5e(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const o=t;t.on(n,e),r=()=>o.off(n,e)}else if(function m5e(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const o=t;t.addListener(n,e),r=()=>o.removeListener(n,e)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,a=t.length;o<a;o++)aie(t[o],n,e,i,s)}i.add(r)}const Vv=new es(Zh);function Zs(...t){let n=Number.POSITIVE_INFINITY,e=null,i=t[t.length-1];return Tv(i)?(e=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===e&&1===t.length&&t[0]instanceof es?t[0]:Mv(n)(KI(t,e))}function lie(t,n){return function(i){let s;if(s="function"==typeof t?t:function(){return t},"function"==typeof n)return i.lift(new b5e(s,n));const r=Object.create(i,T4e);return r.source=i,r.subjectFactory=s,r}}class b5e{constructor(n,e){this.subjectFactory=n,this.selector=e}call(n,e){const{selector:i}=this,s=this.subjectFactory(),r=i(s).subscribe(n);return r.add(e.subscribe(s)),r}}class y5e extends Tn{constructor(n,e){super()}schedule(n,e=0){return this}}class Lk extends y5e{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){if(this.closed)return this;this.state=n;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(s,this.id,e),this}requestAsyncId(n,e,i=0){return setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let s,i=!1;try{this.work(n)}catch(r){i=!0,s=!!r&&r||new Error(r)}if(i)return this.unsubscribe(),s}_unsubscribe(){const n=this.id,e=this.scheduler,i=e.actions,s=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==s&&i.splice(s,1),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null}}let cie=(()=>{class t{constructor(e,i=t.now){this.SchedulerAction=e,this.now=i}schedule(e,i=0,s){return new this.SchedulerAction(this,e).schedule(s,i)}}return t.now=()=>Date.now(),t})();class nd extends cie{constructor(n,e=cie.now){super(n,()=>nd.delegate&&nd.delegate!==this?nd.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(n,e=0,i){return nd.delegate&&nd.delegate!==this?nd.delegate.schedule(n,e,i):super.schedule(n,e,i)}flush(n){const{actions:e}=this;if(this.active)return void e.push(n);let i;this.active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this.active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}const Pk=new nd(Lk);class Gl{constructor(n,e,i){this.kind=n,this.value=e,this.error=i,this.hasValue="N"===n}observe(n){switch(this.kind){case"N":return n.next&&n.next(this.value);case"E":return n.error&&n.error(this.error);case"C":return n.complete&&n.complete()}}do(n,e,i){switch(this.kind){case"N":return n&&n(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}}accept(n,e,i){return n&&"function"==typeof n.next?this.observe(n):this.do(n,e,i)}toObservable(){switch(this.kind){case"N":return gt(this.value);case"E":return mp(this.error);case"C":return mk()}throw new Error("unexpected notification kind value")}static createNext(n){return typeof n<"u"?new Gl("N",n):Gl.undefinedValueNotification}static createError(n){return new Gl("E",void 0,n)}static createComplete(){return Gl.completeNotification}}function zv(t,n=Pk){const i=function w5e(t){return t instanceof Date&&!isNaN(+t)}(t)?+t-n.now():Math.abs(t);return s=>s.lift(new C5e(i,n))}Gl.completeNotification=new Gl("C"),Gl.undefinedValueNotification=new Gl("N",void 0);class C5e{constructor(n,e){this.delay=n,this.scheduler=e}call(n,e){return e.subscribe(new B$(n,this.delay,this.scheduler))}}class B$ extends Ji{constructor(n,e,i){super(n),this.delay=e,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(n){const e=n.source,i=e.queue,s=n.scheduler,r=n.destination;for(;i.length>0&&i[0].time-s.now()<=0;)i.shift().notification.observe(r);if(i.length>0){const o=Math.max(0,i[0].time-s.now());this.schedule(n,o)}else this.unsubscribe(),e.active=!1}_schedule(n){this.active=!0,this.destination.add(n.schedule(B$.dispatch,this.delay,{source:this,destination:this.destination,scheduler:n}))}scheduleNotification(n){if(!0===this.errored)return;const e=this.scheduler,i=new x5e(e.now()+this.delay,n);this.queue.push(i),!1===this.active&&this._schedule(e)}_next(n){this.scheduleNotification(Gl.createNext(n))}_error(n){this.errored=!0,this.queue=[],this.destination.error(n),this.unsubscribe()}_complete(){this.scheduleNotification(Gl.createComplete()),this.unsubscribe()}}class x5e{constructor(n,e){this.time=n,this.notification=e}}const hS="Service workers are disabled or not supported by this browser";class $k{constructor(n){if(this.serviceWorker=n,n){const i=Qh(n,"controllerchange").pipe(ze(()=>n.controller)),r=x_(Vd(()=>gt(n.controller)),i);this.worker=r.pipe(an(u=>!!u)),this.registration=this.worker.pipe(nn(()=>n.getRegistration()));const c=Qh(n,"message").pipe(ze(u=>u.data)).pipe(an(u=>u&&u.type)).pipe(function v5e(t){return t?lie(()=>new Pt,t):lie(new Pt)}());c.connect(),this.events=c}else this.worker=this.events=this.registration=function E5e(t){return Vd(()=>mp(new Error(t)))}(hS)}postMessage(n,e){return this.worker.pipe(ai(1),mi(i=>{i.postMessage({action:n,...e})})).toPromise().then(()=>{})}postMessageWithOperation(n,e,i){const s=this.waitForOperationCompleted(i),r=this.postMessage(n,e);return Promise.all([r,s]).then(([,o])=>o)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(n){let e;return e="string"==typeof n?i=>i.type===n:i=>n.includes(i.type),this.events.pipe(an(e))}nextEventOfType(n){return this.eventsOfType(n).pipe(ai(1))}waitForOperationCompleted(n){return this.eventsOfType("OPERATION_COMPLETED").pipe(an(e=>e.nonce===n),ai(1),ze(e=>{if(void 0!==e.result)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let uie=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,this.pushManager=null,this.subscriptionChanges=new Pt,!e.isEnabled)return this.messages=Vv,this.notificationClicks=Vv,void(this.subscription=Vv);this.messages=this.sw.eventsOfType("PUSH").pipe(ze(s=>s.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(ze(s=>s.data)),this.pushManager=this.sw.registration.pipe(ze(s=>s.pushManager));const i=this.pushManager.pipe(nn(s=>s.getSubscription()));this.subscription=Zs(i,this.subscriptionChanges)}requestSubscription(e){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(hS));const i={userVisibleOnly:!0};let s=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),r=new Uint8Array(new ArrayBuffer(s.length));for(let o=0;o<s.length;o++)r[o]=s.charCodeAt(o);return i.applicationServerKey=r,this.pushManager.pipe(nn(o=>o.subscribe(i)),ai(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(ai(1),nn(i=>{if(null===i)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(s=>{if(!s)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(hS))}decodeBase64(e){return atob(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Re($k))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})(),V$=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,!e.isEnabled)return this.versionUpdates=Vv,void(this.unrecoverable=Vv);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(hS));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(hS));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static#e=this.\u0275fac=function(i){return new(i||t)(Re($k))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})();const die=new st("");function T5e(t,n,e,i){return()=>{if(!MI(i)||!("serviceWorker"in navigator)||!1===e.enabled)return;const s=t.get(Wt),r=t.get(Bl);let o;if(s.runOutsideAngular(()=>{const a=navigator.serviceWorker,l=()=>a.controller?.postMessage({action:"INITIALIZE"});a.addEventListener("controllerchange",l),r.onDestroy(()=>{a.removeEventListener("controllerchange",l)})}),"function"==typeof e.registrationStrategy)o=e.registrationStrategy();else{const[a,...l]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":o=gt(null);break;case"registerWithDelay":o=hie(+l[0]||0);break;case"registerWhenStable":o=l[0]?Zs(fie(t),hie(+l[0])):fie(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}s.runOutsideAngular(()=>o.pipe(ai(1)).subscribe(()=>navigator.serviceWorker.register(n,{scope:e.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function hie(t){return gt(null).pipe(zv(t))}function fie(t){return t.get(Bl).isStable.pipe(an(e=>e))}function I5e(t,n){return new $k(MI(n)&&!1!==t.enabled?navigator.serviceWorker:void 0)}class z${}function k5e(t,n={}){return yb([uie,V$,{provide:die,useValue:t},{provide:z$,useValue:n},{provide:$k,useFactory:I5e,deps:[z$,ju]},{provide:Iw,useFactory:T5e,deps:[ti,die,z$,ju],multi:!0}])}let D5e=(()=>{class t{static register(e,i={}){return{ngModule:t,providers:[k5e(e,i)]}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:[uie,V$]})}return t})();const O5e=new class A5e extends nd{}(class M5e extends Lk{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}schedule(n,e=0){return e>0?super.schedule(n,e):(this.delay=e,this.state=n,this.scheduler.flush(this),this)}execute(n,e){return e>0||this.closed?super.execute(n,e):this._execute(n,e)}requestAsyncId(n,e,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(n,e,i):n.flush(this)}});class Bk extends Ji{constructor(n,e,i=0){super(n),this.scheduler=e,this.delay=i}static dispatch(n){const{notification:e,destination:i}=n;e.observe(i),this.unsubscribe()}scheduleMessage(n){this.destination.add(this.scheduler.schedule(Bk.dispatch,this.delay,new R5e(n,this.destination)))}_next(n){this.scheduleMessage(Gl.createNext(n))}_error(n){this.scheduleMessage(Gl.createError(n)),this.unsubscribe()}_complete(){this.scheduleMessage(Gl.createComplete()),this.unsubscribe()}}class R5e{constructor(n,e){this.notification=n,this.destination=e}}class Uv extends Pt{constructor(n=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=n<1?1:n,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(n){if(!this.isStopped){const e=this._events;e.push(n),e.length>this._bufferSize&&e.shift()}super.next(n)}nextTimeWindow(n){this.isStopped||(this._events.push(new F5e(this._getNow(),n)),this._trimBufferThenGetEvents()),super.next(n)}_subscribe(n){const e=this._infiniteTimeWindow,i=e?this._events:this._trimBufferThenGetEvents(),s=this.scheduler,r=i.length;let o;if(this.closed)throw new Lm;if(this.isStopped||this.hasError?o=Tn.EMPTY:(this.observers.push(n),o=new Pj(this,n)),s&&n.add(n=new Bk(n,s)),e)for(let a=0;a<r&&!n.closed;a++)n.next(i[a]);else for(let a=0;a<r&&!n.closed;a++)n.next(i[a].value);return this.hasError?n.error(this.thrownError):this.isStopped&&n.complete(),o}_getNow(){return(this.scheduler||O5e).now()}_trimBufferThenGetEvents(){const n=this._getNow(),e=this._bufferSize,i=this._windowTime,s=this._events,r=s.length;let o=0;for(;o<r&&!(n-s[o].time<i);)o++;return r>e&&(o=Math.max(o,r-e)),o>0&&s.splice(0,o),s}}class F5e{constructor(n,e){this.time=n,this.value=e}}function jn(t,n,e){let i;return i=t&&"object"==typeof t?t:{bufferSize:t,windowTime:n,refCount:!1,scheduler:e},s=>s.lift(function L5e({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:n=Number.POSITIVE_INFINITY,refCount:e,scheduler:i}){let s,o,r=0,a=!1,l=!1;return function(u){let d;r++,!s||a?(a=!1,s=new Uv(t,n,i),d=s.subscribe(this),o=u.subscribe({next(h){s.next(h)},error(h){a=!0,s.error(h)},complete(){l=!0,o=void 0,s.complete()}}),l&&(o=void 0)):d=s.subscribe(this),this.add(()=>{r--,d.unsubscribe(),d=void 0,o&&!l&&e&&0===r&&(o.unsubscribe(),o=void 0,s=void 0)})}}(i))}class fS{}let pie=(()=>{class t extends fS{getTranslation(e){return gt({})}}return t.\u0275fac=(()=>{let n;return function(i){return(n||(n=Pn(t)))(i||t)}})(),t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class U${}let mie=(()=>{class t{handle(e){return e.key}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function Vk(t,n){if(t===n)return!0;if(null===t||null===n)return!1;if(t!=t&&n!=n)return!0;let s,r,o,e=typeof t;if(e==typeof n&&"object"==e){if(!Array.isArray(t)){if(Array.isArray(n))return!1;for(r in o=Object.create(null),t){if(!Vk(t[r],n[r]))return!1;o[r]=!0}for(r in n)if(!(r in o)&&typeof n[r]<"u")return!1;return!0}if(!Array.isArray(n))return!1;if((s=t.length)==n.length){for(r=0;r<s;r++)if(!Vk(t[r],n[r]))return!1;return!0}}return!1}function bp(t){return typeof t<"u"&&null!==t}function G$(t){return t&&"object"==typeof t&&!Array.isArray(t)}function _ie(t,n){let e=Object.assign({},t);return G$(t)&&G$(n)&&Object.keys(n).forEach(i=>{G$(n[i])?i in t?e[i]=_ie(t[i],n[i]):Object.assign(e,{[i]:n[i]}):Object.assign(e,{[i]:n[i]})}),e}class zk{}let gie=(()=>{class t extends zk{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(e,i){let s;return s="string"==typeof e?this.interpolateString(e,i):"function"==typeof e?this.interpolateFunction(e,i):e,s}getValue(e,i){let s="string"==typeof i?i.split("."):[i];i="";do{i+=s.shift(),!bp(e)||!bp(e[i])||"object"!=typeof e[i]&&s.length?s.length?i+=".":e=void 0:(e=e[i],i="")}while(s.length);return e}interpolateFunction(e,i){return e(i)}interpolateString(e,i){return i?e.replace(this.templateMatcher,(s,r)=>{let o=this.getValue(i,r);return bp(o)?o:s}):e}}return t.\u0275fac=(()=>{let n;return function(i){return(n||(n=Pn(t)))(i||t)}})(),t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class Uk{}let bie=(()=>{class t extends Uk{compile(e,i){return e}compileTranslations(e,i){return e}}return t.\u0275fac=(()=>{let n;return function(i){return(n||(n=Pn(t)))(i||t)}})(),t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class vie{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new it,this.onLangChange=new it,this.onDefaultLangChange=new it}}const j$=new st("USE_STORE"),H$=new st("USE_DEFAULT_LANG"),W$=new st("DEFAULT_LANGUAGE"),q$=new st("USE_EXTEND");let X$,pS=(()=>{class t{constructor(e,i,s,r,o,a=!0,l=!1,c=!1,u){this.store=e,this.currentLoader=i,this.compiler=s,this.parser=r,this.missingTranslationHandler=o,this.useDefaultLang=a,this.isolate=l,this.extend=c,this.pending=!1,this._onTranslationChange=new it,this._onLangChange=new it,this._onDefaultLangChange=new it,this._langs=[],this._translations={},this._translationRequests={},u&&this.setDefaultLang(u)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(e){this.isolate?this._defaultLang=e:this.store.defaultLang=e}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(e){this.isolate?this._currentLang=e:this.store.currentLang=e}get langs(){return this.isolate?this._langs:this.store.langs}set langs(e){this.isolate?this._langs=e:this.store.langs=e}get translations(){return this.isolate?this._translations:this.store.translations}set translations(e){this.isolate?this._translations=e:this.store.translations=e}setDefaultLang(e){if(e===this.defaultLang)return;let i=this.retrieveTranslations(e);typeof i<"u"?(null==this.defaultLang&&(this.defaultLang=e),i.pipe(ai(1)).subscribe(s=>{this.changeDefaultLang(e)})):this.changeDefaultLang(e)}getDefaultLang(){return this.defaultLang}use(e){if(e===this.currentLang)return gt(this.translations[e]);let i=this.retrieveTranslations(e);return typeof i<"u"?(this.currentLang||(this.currentLang=e),i.pipe(ai(1)).subscribe(s=>{this.changeLang(e)}),i):(this.changeLang(e),gt(this.translations[e]))}retrieveTranslations(e){let i;return(typeof this.translations[e]>"u"||this.extend)&&(this._translationRequests[e]=this._translationRequests[e]||this.getTranslation(e),i=this._translationRequests[e]),i}getTranslation(e){this.pending=!0;const i=this.currentLoader.getTranslation(e).pipe(jn(1),ai(1));return this.loadingTranslations=i.pipe(ze(s=>this.compiler.compileTranslations(s,e)),jn(1),ai(1)),this.loadingTranslations.subscribe({next:s=>{this.translations[e]=this.extend&&this.translations[e]?{...s,...this.translations[e]}:s,this.updateLangs(),this.pending=!1},error:s=>{this.pending=!1}}),i}setTranslation(e,i,s=!1){i=this.compiler.compileTranslations(i,e),this.translations[e]=(s||this.extend)&&this.translations[e]?_ie(this.translations[e],i):i,this.updateLangs(),this.onTranslationChange.emit({lang:e,translations:this.translations[e]})}getLangs(){return this.langs}addLangs(e){e.forEach(i=>{-1===this.langs.indexOf(i)&&this.langs.push(i)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(e,i,s){let r;if(i instanceof Array){let o={},a=!1;for(let l of i)o[l]=this.getParsedResult(e,l,s),Ju(o[l])&&(a=!0);return a?hp(i.map(c=>Ju(o[c])?o[c]:gt(o[c]))).pipe(ze(c=>{let u={};return c.forEach((d,h)=>{u[i[h]]=d}),u})):o}if(e&&(r=this.parser.interpolate(this.parser.getValue(e,i),s)),typeof r>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(r=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],i),s)),typeof r>"u"){let o={key:i,translateService:this};typeof s<"u"&&(o.interpolateParams=s),r=this.missingTranslationHandler.handle(o)}return typeof r<"u"?r:i}get(e,i){if(!bp(e)||!e.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(g_(s=>Ju(s=this.getParsedResult(s,e,i))?s:gt(s)));{let s=this.getParsedResult(this.translations[this.currentLang],e,i);return Ju(s)?s:gt(s)}}getStreamOnTranslationChange(e,i){if(!bp(e)||!e.length)throw new Error('Parameter "key" required');return x_(Vd(()=>this.get(e,i)),this.onTranslationChange.pipe(nn(s=>{const r=this.getParsedResult(s.translations,e,i);return"function"==typeof r.subscribe?r:gt(r)})))}stream(e,i){if(!bp(e)||!e.length)throw new Error('Parameter "key" required');return x_(Vd(()=>this.get(e,i)),this.onLangChange.pipe(nn(s=>{const r=this.getParsedResult(s.translations,e,i);return Ju(r)?r:gt(r)})))}instant(e,i){if(!bp(e)||!e.length)throw new Error('Parameter "key" required');let s=this.getParsedResult(this.translations[this.currentLang],e,i);if(Ju(s)){if(e instanceof Array){let r={};return e.forEach((o,a)=>{r[e[a]]=e[a]}),r}return e}return s}set(e,i,s=this.currentLang){this.translations[s][e]=this.compiler.compile(i,s),this.updateLangs(),this.onTranslationChange.emit({lang:s,translations:this.translations[s]})}changeLang(e){this.currentLang=e,this.onLangChange.emit({lang:e,translations:this.translations[e]}),null==this.defaultLang&&this.changeDefaultLang(e)}changeDefaultLang(e){this.defaultLang=e,this.onDefaultLangChange.emit({lang:e,translations:this.translations[e]})}reloadLang(e){return this.resetLang(e),this.getTranslation(e)}resetLang(e){this._translationRequests[e]=void 0,this.translations[e]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let e=window.navigator.languages?window.navigator.languages[0]:null;return e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof e>"u"?void 0:(-1!==e.indexOf("-")&&(e=e.split("-")[0]),-1!==e.indexOf("_")&&(e=e.split("_")[0]),e)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let e=window.navigator.languages?window.navigator.languages[0]:null;return e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,e}}return t.\u0275fac=function(e){return new(e||t)(Re(vie),Re(fS),Re(Uk),Re(zk),Re(U$),Re(H$),Re(j$),Re(q$),Re(W$))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Jh=(()=>{class t{constructor(e,i){this.translate=e,this._ref=i,this.value="",this.lastKey=null,this.lastParams=[]}updateValue(e,i,s){let r=o=>{this.value=void 0!==o?o:e,this.lastKey=e,this._ref.markForCheck()};if(s){let o=this.translate.getParsedResult(s,e,i);Ju(o.subscribe)?o.subscribe(r):r(o)}this.translate.get(e,i).subscribe(r)}transform(e,...i){if(!e||!e.length)return e;if(Vk(e,this.lastKey)&&Vk(i,this.lastParams))return this.value;let s;if(bp(i[0])&&i.length)if("string"==typeof i[0]&&i[0].length){let r=i[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{s=JSON.parse(r)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${i[0]}`)}}else"object"==typeof i[0]&&!Array.isArray(i[0])&&(s=i[0]);return this.lastKey=e,this.lastParams=i,this.updateValue(e,s),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(r=>{this.lastKey&&r.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(e,s,r.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(r=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,s,r.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,s))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return t.\u0275fac=function(e){return new(e||t)(D(pS,16),D(bi,16))},t.\u0275pipe=rr({name:"translate",type:t,pure:!1}),t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),K$=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[e.loader||{provide:fS,useClass:pie},e.compiler||{provide:Uk,useClass:bie},e.parser||{provide:zk,useClass:gie},e.missingTranslationHandler||{provide:U$,useClass:mie},vie,{provide:j$,useValue:e.isolate},{provide:H$,useValue:e.useDefaultLang},{provide:q$,useValue:e.extend},{provide:W$,useValue:e.defaultLanguage},pS]}}static forChild(e={}){return{ngModule:t,providers:[e.loader||{provide:fS,useClass:pie},e.compiler||{provide:Uk,useClass:bie},e.parser||{provide:zk,useClass:gie},e.missingTranslationHandler||{provide:U$,useClass:mie},{provide:j$,useValue:e.isolate},{provide:H$,useValue:e.useDefaultLang},{provide:q$,useValue:e.extend},{provide:W$,useValue:e.defaultLanguage},pS]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Mn({type:t}),t.\u0275inj=kn({}),t})();class P5e{constructor(n,e="/assets/i18n/",i=".json"){this.http=n,this.prefix=e,this.suffix=i}getTranslation(n){return this.http.get(`${this.prefix}${n}${this.suffix}`)}}try{X$=typeof Intl<"u"&&Intl.v8BreakIterator}catch{X$=!1}let Gv,js=(()=>{class t{constructor(e){this._platformId=e,this.isBrowser=this._platformId?MI(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!X$)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||t)(Re(ju))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const yie=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function wie(){if(Gv)return Gv;if("object"!=typeof document||!document)return Gv=new Set(yie),Gv;let t=document.createElement("input");return Gv=new Set(yie.filter(n=>(t.setAttribute("type",n),t.type===n))),Gv}let mS;function jd(t){return function $5e(){if(null==mS&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>mS=!0}))}finally{mS=mS||!1}return mS}()?t:!!t.capture}var Hd=function(t){return t[t.NORMAL=0]="NORMAL",t[t.NEGATED=1]="NEGATED",t[t.INVERTED=2]="INVERTED",t}(Hd||{});let Gk,k_,Y$;function Sie(){if(null==k_){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return k_=!1,k_;if("scrollBehavior"in document.documentElement.style)k_=!0;else{const t=Element.prototype.scrollTo;k_=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return k_}function _S(){if("object"!=typeof document||!document)return Hd.NORMAL;if(null==Gk){const t=document.createElement("div"),n=t.style;t.dir="rtl",n.width="1px",n.overflow="auto",n.visibility="hidden",n.pointerEvents="none",n.position="absolute";const e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",t.appendChild(e),document.body.appendChild(t),Gk=Hd.NORMAL,0===t.scrollLeft&&(t.scrollLeft=1,Gk=0===t.scrollLeft?Hd.NEGATED:Hd.INVERTED),t.remove()}return Gk}function jk(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const n=t.shadowRoot.activeElement;if(n===t)break;t=n}return t}function id(t){return t.composedPath?t.composedPath()[0]:t.target}function Z$(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function oa(t,...n){return n.length?n.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function hs(t,n=Pk){return e=>e.lift(new Y5e(t,n))}class Y5e{constructor(n,e){this.dueTime=n,this.scheduler=e}call(n,e){return e.subscribe(new Z5e(n,this.dueTime,this.scheduler))}}class Z5e extends Ji{constructor(n,e,i){super(n),this.dueTime=e,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(n){this.clearDebounce(),this.lastValue=n,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Q5e,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:n}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(n)}}clearDebounce(){const n=this.debouncedSubscription;null!==n&&(this.remove(n),n.unsubscribe(),this.debouncedSubscription=null)}}function Q5e(t){t.debouncedNext()}function Eie(t){return n=>n.lift(new J5e(t))}class J5e{constructor(n){this.total=n}call(n,e){return e.subscribe(new eBe(n,this.total))}}class eBe extends Ji{constructor(n,e){super(n),this.total=e,this.count=0}_next(n){++this.count>this.total&&this.destination.next(n)}}function D_(t,n){return e=>e.lift(new tBe(t,n))}class tBe{constructor(n,e){this.compare=n,this.keySelector=e}call(n,e){return e.subscribe(new nBe(n,this.compare,this.keySelector))}}class nBe extends Ji{constructor(n,e,i){super(n),this.keySelector=i,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(n,e){return n===e}_next(n){let e;try{const{keySelector:s}=this;e=s?s(n):n}catch(s){return this.destination.error(s)}let i=!1;if(this.hasKey)try{const{compare:s}=this;i=s(this.key,e)}catch(s){return this.destination.error(s)}else this.hasKey=!0;i||(this.key=e,this.destination.next(n))}}let iBe=(()=>{class t{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Tie=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:[iBe]})}return t})();function jv(t){return null!=t&&"false"!=`${t}`}function wp(t,n=0){return function Iie(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):n}function Yk(t){return Array.isArray(t)?t:[t]}function Co(t){return null==t?"":"string"==typeof t?t:`${t}px`}function Sp(t){return t instanceof Bt?t.nativeElement:t}const kie=new Set;let M_,sBe=(()=>{class t{constructor(e,i){this._platform=e,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):oBe}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function rBe(t,n){if(!kie.has(t))try{M_||(M_=document.createElement("style"),n&&M_.setAttribute("nonce",n),M_.setAttribute("type","text/css"),document.head.appendChild(M_)),M_.sheet&&(M_.sheet.insertRule(`@media ${t} {body{ }}`,0),kie.add(t))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Re(js),Re(wL,8))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function oBe(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let Zk=(()=>{class t{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new Pt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return Die(Yk(e)).some(s=>this._registerQuery(s).mql.matches)}observe(e){let r=Qt(Die(Yk(e)).map(o=>this._registerQuery(o).observable));return r=x_(r.pipe(ai(1)),r.pipe(Eie(1),hs(0))),r.pipe(ze(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),r={observable:new es(o=>{const a=l=>this._zone.run(()=>o.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(So(i),ze(({matches:o})=>({query:e,matches:o})),Ii(this._destroySubject)),mql:i};return this._queries.set(e,r),r}static#e=this.\u0275fac=function(i){return new(i||t)(Re(sBe),Re(Wt))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Die(t){return t.map(n=>n.split(",")).reduce((n,e)=>n.concat(e)).map(n=>n.trim())}const Cp_Medium="(min-width: 960px) and (max-width: 1279.98px)",Cp_Large="(min-width: 1280px) and (max-width: 1919.98px)";function Qk(t,n,e){const i=Jk(t,n);e=e.trim(),!i.some(s=>s.trim()===e)&&(i.push(e),t.setAttribute(n,i.join(" ")))}function Hv(t,n,e){const i=Jk(t,n);e=e.trim();const s=i.filter(r=>r!==e);s.length?t.setAttribute(n,s.join(" ")):t.removeAttribute(n)}function Jk(t,n){return t.getAttribute(n)?.match(/\S+/g)??[]}const Aie="cdk-describedby-message",eD="cdk-describedby-host";let J$=0,Oie=(()=>{class t{constructor(e,i){this._platform=i,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+J$++,this._document=e,this._id=Je(Km)+"-"+J$++}describe(e,i,s){if(!this._canBeDescribed(e,i))return;const r=e8(i,s);"string"!=typeof i?(Nie(i,this._id),this._messageRegistry.set(r,{messageElement:i,referenceCount:0})):this._messageRegistry.has(r)||this._createMessageElement(i,s),this._isElementDescribedByMessage(e,r)||this._addMessageReference(e,r)}removeDescription(e,i,s){if(!i||!this._isElementNode(e))return;const r=e8(i,s);if(this._isElementDescribedByMessage(e,r)&&this._removeMessageReference(e,r),"string"==typeof i){const o=this._messageRegistry.get(r);o&&0===o.referenceCount&&this._deleteMessageElement(r)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const e=this._document.querySelectorAll(`[${eD}="${this._id}"]`);for(let i=0;i<e.length;i++)this._removeCdkDescribedByReferenceIds(e[i]),e[i].removeAttribute(eD);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,i){const s=this._document.createElement("div");Nie(s,this._id),s.textContent=e,i&&s.setAttribute("role",i),this._createMessagesContainer(),this._messagesContainer.appendChild(s),this._messageRegistry.set(e8(e,i),{messageElement:s,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;const e="cdk-describedby-message-container",i=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let r=0;r<i.length;r++)i[r].remove();const s=this._document.createElement("div");s.style.visibility="hidden",s.classList.add(e),s.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&s.setAttribute("platform","server"),this._document.body.appendChild(s),this._messagesContainer=s}_removeCdkDescribedByReferenceIds(e){const i=Jk(e,"aria-describedby").filter(s=>0!=s.indexOf(Aie));e.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(e,i){const s=this._messageRegistry.get(i);Qk(e,"aria-describedby",s.messageElement.id),e.setAttribute(eD,this._id),s.referenceCount++}_removeMessageReference(e,i){const s=this._messageRegistry.get(i);s.referenceCount--,Hv(e,"aria-describedby",s.messageElement.id),e.removeAttribute(eD)}_isElementDescribedByMessage(e,i){const s=Jk(e,"aria-describedby"),r=this._messageRegistry.get(i),o=r&&r.messageElement.id;return!!o&&-1!=s.indexOf(o)}_canBeDescribed(e,i){if(!this._isElementNode(e))return!1;if(i&&"object"==typeof i)return!0;const s=null==i?"":`${i}`.trim(),r=e.getAttribute("aria-label");return!(!s||r&&r.trim()===s)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Zn),Re(js))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function e8(t,n){return"string"==typeof t?`${n||""}/${t}`:t}function Nie(t,n){t.id||(t.id=`${Aie}-${n}-${J$++}`)}class Rie{constructor(n,e){this._items=n,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Pt,this._typeaheadSubscription=Tn.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=i=>i.disabled,this._pressedLetters=[],this.tabOut=new Pt,this.change=new Pt,n instanceof qm?this._itemChangesSubscription=n.changes.subscribe(i=>this._itemsChanged(i.toArray())):P2(n)&&(this._effectRef=function iJ(t,n){cl("NgSignals"),!n?.injector&&LT();const e=n?.injector??Je(ti),i=!0!==n?.manualCleanup?e.get(R0):null,s=new rNe(e.get(nNe),t,typeof Zone>"u"?null:Zone.current,i,e,n?.allowSignalWrites??!1),r=e.get(bi,null,{optional:!0});return r&&8&r._lView[An]?(r._lView[$T]??=[]).push(s.watcher.notify):s.watcher.notify(),s}(()=>this._itemsChanged(n()),{injector:e}))}skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(mi(e=>this._pressedLetters.push(e)),hs(n),an(()=>this._pressedLetters.length>0),ze(()=>this._pressedLetters.join(""))).subscribe(e=>{const i=this._getItemsArray();for(let s=1;s<i.length+1;s++){const r=(this._activeItemIndex+s)%i.length,o=i[r];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(r);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}withPageUpDown(n=!0,e=10){return this._pageUpAndDown={enabled:n,delta:e},this}setActiveItem(n){const e=this._activeItem;this.updateActiveItem(n),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(n){const e=n.keyCode,s=["altKey","ctrlKey","metaKey","shiftKey"].every(r=>!n[r]||this._allowedModifierKeys.indexOf(r)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&s){this.setNextItemActive();break}return;case 38:if(this._vertical&&s){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&s){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&s){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&s){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&s){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&s){const r=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(r>0?r:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&s){const r=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(r<o?r:o-1,-1);break}return;default:return void((s||oa(n,"shiftKey"))&&(n.key&&1===n.key.length?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],n.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){const e=this._getItemsArray(),i="number"==typeof n?n:e.indexOf(n);this._activeItem=e[i]??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){const e=this._getItemsArray();for(let i=1;i<=e.length;i++){const s=(this._activeItemIndex+n*i+e.length)%e.length;if(!this._skipPredicateFn(e[s]))return void this.setActiveItem(s)}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}_setActiveItemByIndex(n,e){const i=this._getItemsArray();if(i[n]){for(;this._skipPredicateFn(i[n]);)if(!i[n+=e])return;this.setActiveItem(n)}}_getItemsArray(){return P2(this._items)?this._items():this._items instanceof qm?this._items.toArray():this._items}_itemsChanged(n){if(this._activeItem){const e=n.indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e)}}}class Fie extends Rie{setActiveItem(n){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(n),this.activeItem&&this.activeItem.setActiveStyles()}}class Lie extends Rie{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(n){return this._origin=n,this}setActiveItem(n){super.setActiveItem(n),this.activeItem&&this.activeItem.focus(this._origin)}}let tD=(()=>{class t{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function lBe(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function aBe(t){try{return t.frameElement}catch{return null}}(function _Be(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(e));if(i&&(-1===$ie(i)||!this.isVisible(i)))return!1;let s=e.nodeName.toLowerCase(),r=$ie(e);return e.hasAttribute("contenteditable")?-1!==r:!("iframe"===s||"object"===s||this._platform.WEBKIT&&this._platform.IOS&&!function pBe(t){let n=t.nodeName.toLowerCase(),e="input"===n&&t.type;return"text"===e||"password"===e||"select"===n||"textarea"===n}(e))&&("audio"===s?!!e.hasAttribute("controls")&&-1!==r:"video"===s?-1!==r&&(null!==r||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function mBe(t){return!function uBe(t){return function hBe(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function cBe(t){let n=t.nodeName.toLowerCase();return"input"===n||"select"===n||"button"===n||"textarea"===n}(t)||function dBe(t){return function fBe(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||Pie(t))}(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}static#e=this.\u0275fac=function(i){return new(i||t)(Re(js))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Pie(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let n=t.getAttribute("tabindex");return!(!n||isNaN(parseInt(n,10)))}function $ie(t){if(!Pie(t))return null;const n=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}class Bie{get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}constructor(n,e,i,s,r=!1,o){this._element=n,this._checker=e,this._ngZone=i,this._document=s,this._injector=o,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}destroy(){const n=this._startAnchor,e=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){const e=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return"start"==n?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return i?.focus(n),!!i}return e.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){const e=this._getRegionBoundary("start");return e&&e.focus(n),!!e}focusLastTabbableElement(n){const e=this._getRegionBoundary("end");return e&&e.focus(n),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let i=0;i<e.length;i++){const s=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(s)return s}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let i=e.length-1;i>=0;i--){const s=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(s)return s}return null}_createAnchor(){const n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,e){n?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._injector?Pl(n,{injector:this._injector}):setTimeout(n)}}let nD=(()=>{class t{constructor(e,i,s){this._checker=e,this._ngZone=i,this._injector=Je(ti),this._document=s}create(e,i=!1){return new Bie(e,this._checker,this._ngZone,this._document,i,this._injector)}static#e=this.\u0275fac=function(i){return new(i||t)(Re(tD),Re(Wt),Re(Zn))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),gBe=(()=>{class t{get enabled(){return this.focusTrap?.enabled||!1}set enabled(e){this.focusTrap&&(this.focusTrap.enabled=e)}constructor(e,i,s){this._elementRef=e,this._focusTrapFactory=i,this._previouslyFocusedElement=null,Je(js).isBrowser&&(this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0))}ngOnDestroy(){this.focusTrap?.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap?.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap&&!this.focusTrap.hasAttached()&&this.focusTrap.attachAnchors()}ngOnChanges(e){const i=e.autoCapture;i&&!i.firstChange&&this.autoCapture&&this.focusTrap?.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=jk(),this.focusTrap?.focusInitialElementWhenReady()}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(nD),D(Zn))};static#t=this.\u0275dir=pt({type:t,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:[2,"cdkTrapFocus","enabled",Rt],autoCapture:[2,"cdkTrapFocusAutoCapture","autoCapture",Rt]},exportAs:["cdkTrapFocus"],standalone:!0,features:[Ni,On]})}return t})();function t8(t){return 0===t.buttons||0===t.detail}function n8(t){const n=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!n||-1!==n.identifier||null!=n.radiusX&&1!==n.radiusX||null!=n.radiusY&&1!==n.radiusY)}const bBe=new st("cdk-input-modality-detector-options"),vBe={ignoreKeys:[18,17,224,91,16]},Wv=jd({passive:!0,capture:!0});let yBe=(()=>{class t{get mostRecentModality(){return this._modality.value}constructor(e,i,s,r){this._platform=e,this._mostRecentTarget=null,this._modality=new Mt(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=id(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(t8(o)?"keyboard":"mouse"),this._mostRecentTarget=id(o))},this._onTouchstart=o=>{n8(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=id(o))},this._options={...vBe,...r},this.modalityDetected=this._modality.pipe(Eie(1)),this.modalityChanged=this.modalityDetected.pipe(D_()),e.isBrowser&&i.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Wv),s.addEventListener("mousedown",this._onMousedown,Wv),s.addEventListener("touchstart",this._onTouchstart,Wv)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Wv),document.removeEventListener("mousedown",this._onMousedown,Wv),document.removeEventListener("touchstart",this._onTouchstart,Wv))}static#e=this.\u0275fac=function(i){return new(i||t)(Re(js),Re(Wt),Re(Zn),Re(bBe,8))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const wBe=new st("liveAnnouncerElement",{providedIn:"root",factory:function SBe(){return null}}),CBe=new st("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let xBe=0,zie=(()=>{class t{constructor(e,i,s,r){this._ngZone=i,this._defaultOptions=r,this._document=s,this._liveElement=e||this._createLiveElement()}announce(e,...i){const s=this._defaultOptions;let r,o;return 1===i.length&&"number"==typeof i[0]?o=i[0]:[r,o]=i,this.clear(),clearTimeout(this._previousTimeout),r||(r=s&&s.politeness?s.politeness:"polite"),null==o&&s&&(o=s.duration),this._liveElement.setAttribute("aria-live",r),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",i=this._document.getElementsByClassName(e),s=this._document.createElement("div");for(let r=0;r<i.length;r++)i[r].remove();return s.classList.add(e),s.classList.add("cdk-visually-hidden"),s.setAttribute("aria-atomic","true"),s.setAttribute("aria-live","polite"),s.id="cdk-live-announcer-"+xBe++,this._document.body.appendChild(s),s}_exposeAnnouncerToModals(e){const i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let s=0;s<i.length;s++){const r=i[s],o=r.getAttribute("aria-owns");o?-1===o.indexOf(e)&&r.setAttribute("aria-owns",o+" "+e):r.setAttribute("aria-owns",e)}}static#e=this.\u0275fac=function(i){return new(i||t)(Re(wBe,8),Re(Wt),Re(Zn),Re(CBe,8))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var iD=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(iD||{});const EBe=new st("cdk-focus-monitor-default-options"),sD=jd({passive:!0,capture:!0});let Hl=(()=>{class t{constructor(e,i,s,r,o){this._ngZone=e,this._platform=i,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Pt,this._rootNodeFocusAndBlurListener=a=>{for(let c=id(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=r,this._detectionMode=o?.detectionMode||iD.IMMEDIATE}monitor(e,i=!1){const s=Sp(e);if(!this._platform.isBrowser||1!==s.nodeType)return gt();const r=function V5e(t){if(function B5e(){if(null==Y$){const t=typeof document<"u"?document.head:null;Y$=!(!t||!t.createShadowRoot&&!t.attachShadow)}return Y$}()){const n=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}(s)||this._getDocument(),o=this._elementInfo.get(s);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new Pt,rootNode:r};return this._elementInfo.set(s,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const i=Sp(e),s=this._elementInfo.get(i);s&&(s.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(s))}focusVia(e,i,s){const r=Sp(e);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof r.focus&&r.focus(s))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===iD.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,this._detectionMode===iD.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const s=this._elementInfo.get(i),r=id(e);!s||!s.checkChildren&&i!==r||this._originChanged(i,this._getFocusOrigin(r),s)}_onBlur(e,i){const s=this._elementInfo.get(i);!s||s.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(s,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,s=this._rootNodeFocusListenerCount.get(i)||0;s||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,sD),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,sD)}),this._rootNodeFocusListenerCount.set(i,s+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ii(this._stopInputModalityDetector)).subscribe(r=>{this._setOrigin(r,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const s=this._rootNodeFocusListenerCount.get(i);s>1?this._rootNodeFocusListenerCount.set(i,s-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,sD),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,sD),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,s){this._setClasses(e,i),this._emitOrigin(s,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((s,r)=>{(r===e||s.checkChildren&&r.contains(e))&&i.push([r,s])}),i}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:i,mostRecentModality:s}=this._inputModalityDetector;if("mouse"!==s||!i||i===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const r=e.labels;if(r)for(let o=0;o<r.length;o++)if(r[o].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Wt),Re(js),Re(yBe),Re(Zn,8),Re(EBe,8))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),TBe=(()=>{class t{constructor(e,i){this._elementRef=e,this._focusMonitor=i,this._focusOrigin=null,this.cdkFocusChange=new it}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){const e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,1===e.nodeType&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>{this._focusOrigin=i,this.cdkFocusChange.emit(i)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(Hl))};static#t=this.\u0275dir=pt({type:t,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"],standalone:!0})}return t})();var A_=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(A_||{});const Uie="cdk-high-contrast-black-on-white",Gie="cdk-high-contrast-white-on-black",i8="cdk-high-contrast-active";let jie=(()=>{class t{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=Je(Zk).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return A_.NONE;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,s=i&&i.getComputedStyle?i.getComputedStyle(e):null,r=(s&&s.backgroundColor||"").replace(/ /g,"");switch(e.remove(),r){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return A_.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return A_.BLACK_ON_WHITE}return A_.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(i8,Uie,Gie),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();i===A_.BLACK_ON_WHITE?e.add(i8,Uie):i===A_.WHITE_ON_BLACK&&e.add(i8,Gie)}}static#e=this.\u0275fac=function(i){return new(i||t)(Re(js),Re(Zn))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),s8=(()=>{class t{constructor(e){e._applyBodyHighContrastModeCssClasses()}static#e=this.\u0275fac=function(i){return new(i||t)(Re(jie))};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[Tie]})}return t})();const IBe=new st("cdk-dir-doc",{providedIn:"root",factory:function kBe(){return Je(Zn)}}),DBe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let xo=(()=>{class t{constructor(e){this.value="ltr",this.change=new it,e&&(this.value=function MBe(t){const n=t?.toLowerCase()||"";return"auto"===n&&typeof navigator<"u"&&navigator?.language?DBe.test(navigator.language)?"rtl":"ltr":"rtl"===n?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||t)(Re(IBe,8))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),gS=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({})}return t})();const NBe=["text"],RBe=[[["mat-icon"]],"*"],FBe=["mat-icon","*"];function LBe(t,n){if(1&t&&be(0,"mat-pseudo-checkbox",1),2&t){const e=M();S("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function PBe(t,n){1&t&&be(0,"mat-pseudo-checkbox",3),2&t&&S("disabled",M().disabled)}function $Be(t,n){if(1&t&&(m(0,"span",4),C(1),_()),2&t){const e=M();b(),xe("(",e.group.label,")")}}const BBe=["mat-internal-form-field",""],VBe=["*"];let r8=(()=>{class t{static#e=this.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)";static#t=this.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)";static#n=this.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)";static#i=this.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)"}return t})(),o8=(()=>{class t{static#e=this.COMPLEX="375ms";static#t=this.ENTERING="225ms";static#n=this.EXITING="195ms"}return t})();const UBe=new st("mat-sanity-checks",{providedIn:"root",factory:function zBe(){return!0}});let Ki=(()=>{class t{constructor(e,i,s){this._sanityChecks=i,this._document=s,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!Z$()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}static#e=this.\u0275fac=function(i){return new(i||t)(Re(jie),Re(UBe,8),Re(Zn))};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[gS,gS]})}return t})();class rD{constructor(n,e,i,s,r){this._defaultMatcher=n,this.ngControl=e,this._parentFormGroup=i,this._parentForm=s,this._stateChanges=r,this.errorState=!1}updateErrorState(){const n=this.errorState,e=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,s=this.ngControl?this.ngControl.control:null,r=i?.isErrorState(s,e)??!1;r!==n&&(this.errorState=r,this._stateChanges.next())}}class gl{constructor(){this._localeChanges=new Pt,this.localeChanges=this._localeChanges}getValidDateOrNull(n){return this.isDateInstance(n)&&this.isValid(n)?n:null}deserialize(n){return null==n||this.isDateInstance(n)&&this.isValid(n)?n:this.invalid()}setLocale(n){this.locale=n,this._localeChanges.next()}compareDate(n,e){return this.getYear(n)-this.getYear(e)||this.getMonth(n)-this.getMonth(e)||this.getDate(n)-this.getDate(e)}sameDate(n,e){if(n&&e){let i=this.isValid(n),s=this.isValid(e);return i&&s?!this.compareDate(n,e):i==s}return n==e}clampDate(n,e,i){return e&&this.compareDate(n,e)<0?e:i&&this.compareDate(n,i)>0?i:n}}const O_=new st("mat-date-formats");let oD=(()=>{class t{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Wl=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Wl||{});class WBe{constructor(n,e,i,s=!1){this._renderer=n,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=s,this.state=Wl.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const qie=jd({passive:!0,capture:!0});class qBe{constructor(){this._events=new Map,this._delegateEventHandler=n=>{const e=id(n);e&&this._events.get(n.type)?.forEach((i,s)=>{(s===e||s.contains(e))&&i.forEach(r=>r.handleEvent(n))})}}addHandler(n,e,i,s){const r=this._events.get(e);if(r){const o=r.get(i);o?o.add(s):r.set(i,new Set([s]))}else this._events.set(e,new Map([[i,new Set([s])]])),n.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,qie)})}removeHandler(n,e,i){const s=this._events.get(n);if(!s)return;const r=s.get(e);r&&(r.delete(i),0===r.size&&s.delete(e),0===s.size&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,qie)))}}const Kie={enterDuration:225,exitDuration:150},Xie=jd({passive:!0,capture:!0}),Yie=["mousedown","touchstart"],Zie=["mouseup","mouseleave","touchend","touchcancel"];class aD{static#e=this._eventManager=new qBe;constructor(n,e,i,s){this._target=n,this._ngZone=e,this._platform=s,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,s.isBrowser&&(this._containerElement=Sp(i))}fadeInRipple(n,e,i={}){const s=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r={...Kie,...i.animation};i.centered&&(n=s.left+s.width/2,e=s.top+s.height/2);const o=i.radius||function XBe(t,n,e){const i=Math.max(Math.abs(t-e.left),Math.abs(t-e.right)),s=Math.max(Math.abs(n-e.top),Math.abs(n-e.bottom));return Math.sqrt(i*i+s*s)}(n,e,s),a=n-s.left,l=e-s.top,c=r.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const d=window.getComputedStyle(u),f=d.transitionDuration,p="none"===d.transitionProperty||"0s"===f||"0s, 0s"===f||0===s.width&&0===s.height,g=new WBe(this,u,i,p);u.style.transform="scale3d(1, 1, 1)",g.state=Wl.FADING_IN,i.persistent||(this._mostRecentTransientRipple=g);let v=null;return!p&&(c||r.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const y=()=>{v&&(v.fallbackTimer=null),clearTimeout(E),this._finishRippleTransition(g)},w=()=>this._destroyRipple(g),E=setTimeout(w,c+100);u.addEventListener("transitionend",y),u.addEventListener("transitioncancel",w),v={onTransitionEnd:y,onTransitionCancel:w,fallbackTimer:E}}),this._activeRipples.set(g,v),(p||!c)&&this._finishRippleTransition(g),g}fadeOutRipple(n){if(n.state===Wl.FADING_OUT||n.state===Wl.HIDDEN)return;const e=n.element,i={...Kie,...n.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",n.state=Wl.FADING_OUT,(n._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){const e=Sp(n);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,Yie.forEach(i=>{aD._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Zie.forEach(e=>{this._triggerElement.addEventListener(e,this,Xie)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){n.state===Wl.FADING_IN?this._startFadeOutTransition(n):n.state===Wl.FADING_OUT&&this._destroyRipple(n)}_startFadeOutTransition(n){const e=n===this._mostRecentTransientRipple,{persistent:i}=n.config;n.state=Wl.VISIBLE,!i&&(!e||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){const e=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=Wl.HIDDEN,null!==e&&(n.element.removeEventListener("transitionend",e.onTransitionEnd),n.element.removeEventListener("transitioncancel",e.onTransitionCancel),null!==e.fallbackTimer&&clearTimeout(e.fallbackTimer)),n.element.remove()}_onMousedown(n){const e=t8(n),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!n8(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=n.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{!n.config.persistent&&(n.state===Wl.VISIBLE||n.config.terminateOnPointerUp&&n.state===Wl.FADING_IN)&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const n=this._triggerElement;n&&(Yie.forEach(e=>aD._eventManager.removeHandler(e,n,this)),this._pointerUpEventsRegistered&&(Zie.forEach(e=>n.removeEventListener(e,this,Xie)),this._pointerUpEventsRegistered=!1))}}const vS=new st("mat-ripple-global-options");let jt=(()=>{class t{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,i,s,r,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new aD(this,i,e,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,s){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,{...this.rippleConfig,...s}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(Wt),D(js),D(vS,8),D(jo,8))};static#t=this.\u0275dir=pt({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,s){2&i&&rt("mat-ripple-unbounded",s.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}return t})(),Tc=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[Ki,Ki]})}return t})(),Qie=(()=>{class t{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1,this.appearance="full"}static#e=this.\u0275fac=function(i){return new(i||t)(D(jo,8))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,s){2&i&&rt("mat-pseudo-checkbox-indeterminate","indeterminate"===s.state)("mat-pseudo-checkbox-checked","checked"===s.state)("mat-pseudo-checkbox-disabled",s.disabled)("mat-pseudo-checkbox-minimal","minimal"===s.appearance)("mat-pseudo-checkbox-full","full"===s.appearance)("_mat-animation-noopable","NoopAnimations"===s._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[Ln],decls:0,vars:0,template:function(i,s){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color);border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color);border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return t})(),YBe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[Ki]})}return t})();const lD=new st("MAT_OPTION_PARENT_COMPONENT"),cD=new st("MatOptgroup");let JBe=0;class Jie{constructor(n,e=!1){this.source=n,this.isUserInput=e}}let Hs=(()=>{class t{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=e}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(e,i,s,r){this._element=e,this._changeDetectorRef=i,this._parent=s,this.group=r,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+JBe++,this.onSelectionChange=new it,this._stateChanges=new Pt}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,i){const s=this._getHostElement();"function"==typeof s.focus&&s.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!oa(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new Jie(this,e))}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(bi),D(lD,8),D(cD,8))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-option"]],viewQuery:function(i,s){if(1&i&&Zt(NBe,7),2&i){let r;xt(r=Et())&&(s._text=r.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(i,s){1&i&&te("click",function(){return s._selectViaInteraction()})("keydown",function(o){return s._handleKeydown(o)}),2&i&&(Wa("id",s.id),$t("aria-selected",s.selected)("aria-disabled",s.disabled.toString()),rt("mdc-list-item--selected",s.selected)("mat-mdc-option-multiple",s.multiple)("mat-mdc-option-active",s.active)("mdc-list-item--disabled",s.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",Rt]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[Ni,Ln],ngContentSelectors:FBe,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,s){1&i&&(Ti(RBe),K(0,LBe,1,2,"mat-pseudo-checkbox",1),un(1),m(2,"span",2,0),un(4,1),_(),K(5,PBe,1,1,"mat-pseudo-checkbox",3)(6,$Be,2,1,"span",4),be(7,"div",5)),2&i&&(Vn(s.multiple?0:-1),b(5),Vn(s.multiple||!s.selected||s.hideSingleSelectionIndicator?-1:5),b(),Vn(s.group&&s.group._inert?6:-1),b(),S("matRippleTrigger",s._getHostElement())("matRippleDisabled",s.disabled||s.disableRipple))},dependencies:[Qie,jt],styles:['.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color);font-family:var(--mat-option-label-text-font);line-height:var(--mat-option-label-text-line-height);font-size:var(--mat-option-label-text-size);letter-spacing:var(--mat-option-label-text-tracking);font-weight:var(--mat-option-label-text-weight)}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color);outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color)}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return t})();function ese(t,n,e){if(e.length){let i=n.toArray(),s=e.toArray(),r=0;for(let o=0;o<t+1;o++)i[o].group&&i[o].group===s[r]&&r++;return r}return 0}function tse(t,n,e,i){return t<e?t:t+n>e+i?Math.max(0,t-i+n):e}let uD=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[Tc,Ki,YBe]})}return t})();const nse={capture:!0},ise=["focus","mousedown","mouseenter","touchstart"],a8="mat-ripple-loader-uninitialized",l8="mat-ripple-loader-class-name",sse="mat-ripple-loader-centered",dD="mat-ripple-loader-disabled";let rse=(()=>{class t{constructor(){this._document=Je(Zn,{optional:!0}),this._animationMode=Je(jo,{optional:!0}),this._globalRippleOptions=Je(vS,{optional:!0}),this._platform=Je(js),this._ngZone=Je(Wt),this._hosts=new Map,this._onInteraction=e=>{const i=id(e);if(i instanceof HTMLElement){const s=i.closest(`[${a8}="${this._globalRippleOptions?.namespace??""}"]`);s&&this._createRipple(s)}},this._ngZone.runOutsideAngular(()=>{for(const e of ise)this._document?.addEventListener(e,this._onInteraction,nse)})}ngOnDestroy(){const e=this._hosts.keys();for(const i of e)this.destroyRipple(i);for(const i of ise)this._document?.removeEventListener(i,this._onInteraction,nse)}configureRipple(e,i){e.setAttribute(a8,this._globalRippleOptions?.namespace??""),(i.className||!e.hasAttribute(l8))&&e.setAttribute(l8,i.className||""),i.centered&&e.setAttribute(sse,""),i.disabled&&e.setAttribute(dD,"")}getRipple(e){return this._hosts.get(e)||this._createRipple(e)}setDisabled(e,i){const s=this._hosts.get(e);s?s.disabled=i:i?e.setAttribute(dD,""):e.removeAttribute(dD)}_createRipple(e){if(!this._document)return;const i=this._hosts.get(e);if(i)return i;e.querySelector(".mat-ripple")?.remove();const s=this._document.createElement("span");s.classList.add("mat-ripple",e.getAttribute(l8)),e.append(s);const r=new jt(new Bt(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return r._isInitialized=!0,r.trigger=e,r.centered=e.hasAttribute(sse),r.disabled=e.hasAttribute(dD),this.attachRipple(e,r),r}attachRipple(e,i){e.removeAttribute(a8),this._hosts.set(e,i)}destroyRipple(e){const i=this._hosts.get(e);i&&(i.ngOnDestroy(),this._hosts.delete(e))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),c8=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Qe({type:t,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(i,s){2&i&&rt("mdc-form-field--align-end","before"===s.labelPosition)},inputs:{labelPosition:"labelPosition"},standalone:!0,features:[Ln],attrs:BBe,ngContentSelectors:VBe,decls:1,vars:0,template:function(i,s){1&i&&(Ti(),un(0))},styles:[".mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}"],encapsulation:2,changeDetection:0})}return t})();const e6e=["mat-button",""],t6e=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],n6e=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],s6e=["mat-icon-button",""],r6e=["*"],o6e=new st("MAT_BUTTON_CONFIG"),a6e=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}];let ose=(()=>{class t{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}constructor(e,i,s,r){this._elementRef=e,this._platform=i,this._ngZone=s,this._animationMode=r,this._focusMonitor=Je(Hl),this._rippleLoader=Je(rse),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;const o=Je(o6e,{optional:!0}),a=e.nativeElement,l=a.classList;this.disabledInteractive=o?.disabledInteractive??!1,this.color=o?.color??null,this._rippleLoader?.configureRipple(a,{className:"mat-mdc-button-ripple"});for(const{attribute:c,mdcClasses:u}of a6e)a.hasAttribute(c)&&l.add(...u)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",i){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return null!=this.ariaDisabled?this.ariaDisabled:!(!this.disabled||!this.disabledInteractive)||null}_getDisabledAttribute(){return!(this.disabledInteractive||!this.disabled)||null}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static#e=this.\u0275fac=function(i){W0()};static#t=this.\u0275dir=pt({type:t,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Rt],disabled:[2,"disabled","disabled",Rt],ariaDisabled:[2,"aria-disabled","ariaDisabled",Rt],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Rt]},features:[Ni]})}return t})(),u8=(()=>{class t extends ose{constructor(e,i,s,r){super(e,i,s,r)}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(js),D(Wt),D(jo,8))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(i,s){2&i&&($t("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),bo(s.color?"mat-"+s.color:""),rt("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[bt,Ln],attrs:e6e,ngContentSelectors:n6e,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,s){1&i&&(Ti(t6e),be(0,"span",0),un(1),m(2,"span",1),un(3,1),_(),un(4,2),be(5,"span",2)(6,"span",3)),2&i&&rt("mdc-button__ripple",!s._isFab)("mdc-fab__ripple",s._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 8px);height:var(--mdc-text-button-container-height);font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-filled-button-horizontal-padding, 16px);height:var(--mdc-filled-button-container-height);font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color);background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow);height:var(--mdc-protected-button-container-height);font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color);background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-outlined-button-horizontal-padding, 15px);height:var(--mdc-outlined-button-container-height);font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight);border-radius:var(--mdc-outlined-button-container-shape);border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color);border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return t})(),d8=(()=>{class t extends ose{constructor(e,i,s,r){super(e,i,s,r),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(js),D(Wt),D(jo,8))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(i,s){2&i&&($t("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),bo(s.color?"mat-"+s.color:""),rt("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[bt,Ln],attrs:s6e,ngContentSelectors:r6e,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,s){1&i&&(Ti(),be(0,"span",0),un(1),be(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);color:var(--mdc-icon-button-icon-color);-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color)}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color)}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity)}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity)}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity)}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return t})(),qv=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[Ki,Tc,Ki]})}return t})();class h8{attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;null!=n&&(this._attachedHost=null,n.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(n){this._attachedHost=n}}class N_ extends h8{constructor(n,e,i,s,r){super(),this.component=n,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=s,this.projectableNodes=r}}class R_ extends h8{constructor(n,e,i,s){super(),this.templateRef=n,this.viewContainerRef=e,this.context=i,this.injector=s}get origin(){return this.templateRef.elementRef}attach(n,e=this.context){return this.context=e,super.attach(n)}detach(){return this.context=void 0,super.detach()}}class c6e extends h8{constructor(n){super(),this.element=n instanceof Bt?n.nativeElement:n}}class hD{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(n){return n instanceof N_?(this._attachedPortal=n,this.attachComponentPortal(n)):n instanceof R_?(this._attachedPortal=n,this.attachTemplatePortal(n)):this.attachDomPortal&&n instanceof c6e?(this._attachedPortal=n,this.attachDomPortal(n)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class u6e extends hD{constructor(n,e,i,s,r){super(),this.outletElement=n,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=s,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=r}attachComponentPortal(n){const i=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component);let s;return n.viewContainerRef?(s=n.viewContainerRef.createComponent(i,n.viewContainerRef.length,n.injector||n.viewContainerRef.injector,n.projectableNodes||void 0),this.setDisposeFn(()=>s.destroy())):(s=i.create(n.injector||this._defaultInjector||ti.NULL),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(s.hostView),s.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(s)),this._attachedPortal=n,s}attachTemplatePortal(n){let e=n.viewContainerRef,i=e.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return i.rootNodes.forEach(s=>this.outletElement.appendChild(s)),i.detectChanges(),this.setDisposeFn(()=>{let s=e.indexOf(i);-1!==s&&e.remove(s)}),this._attachedPortal=n,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}}let yS=(()=>{class t extends R_{constructor(e,i){super(e,i)}static#e=this.\u0275fac=function(i){return new(i||t)(D(or),D(Pr))};static#t=this.\u0275dir=pt({type:t,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],standalone:!0,features:[bt]})}return t})(),f8=(()=>{class t extends yS{static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=Pn(t)))(s||t)}})();static#t=this.\u0275dir=pt({type:t,selectors:[["","cdk-portal",""],["","portal",""]],exportAs:["cdkPortal"],standalone:!0,features:[Lt([{provide:yS,useExisting:t}]),bt]})}return t})(),xp=(()=>{class t extends hD{constructor(e,i,s){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new it,this.attachDomPortal=r=>{const o=r.element,a=this._document.createComment("dom-portal");r.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=r,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=s}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),o=i.createComponent(r,i.length,e.injector||i.injector,e.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static#e=this.\u0275fac=function(i){return new(i||t)(D(jb),D(Pr),D(Zn))};static#t=this.\u0275dir=pt({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[bt]})}return t})(),Wd=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({})}return t})();const f6e=new class h6e extends nd{flush(n){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let i,s=-1,r=e.length;n=n||e.shift();do{if(i=n.execute(n.state,n.delay))break}while(++s<r&&(n=e.shift()));if(this.active=!1,i){for(;++s<r&&(n=e.shift());)n.unsubscribe();throw i}}}(class d6e extends Lk{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,i=0){return null!==i&&i>0?super.requestAsyncId(n,e,i):(n.actions.push(this),n.scheduled||(n.scheduled=requestAnimationFrame(()=>n.flush(null))))}recycleAsyncId(n,e,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(n,e,i);0===n.actions.length&&(cancelAnimationFrame(e),n.scheduled=void 0)}});let p6e=1;const m6e=Promise.resolve(),fD={};function ase(t){return t in fD&&(delete fD[t],!0)}const lse={setImmediate(t){const n=p6e++;return fD[n]=!0,m6e.then(()=>ase(n)&&t()),n},clearImmediate(t){ase(t)}},p8=new class g6e extends nd{flush(n){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let i,s=-1,r=e.length;n=n||e.shift();do{if(i=n.execute(n.state,n.delay))break}while(++s<r&&(n=e.shift()));if(this.active=!1,i){for(;++s<r&&(n=e.shift());)n.unsubscribe();throw i}}}(class _6e extends Lk{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,i=0){return null!==i&&i>0?super.requestAsyncId(n,e,i):(n.actions.push(this),n.scheduled||(n.scheduled=lse.setImmediate(n.flush.bind(n,null))))}recycleAsyncId(n,e,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(n,e,i);0===n.actions.length&&(lse.clearImmediate(e),n.scheduled=void 0)}});class v6e{constructor(n){this.durationSelector=n}call(n,e){return e.subscribe(new y6e(n,this.durationSelector))}}class y6e extends ap{constructor(n,e){super(n),this.durationSelector=e,this.hasValue=!1}_next(n){if(this.value=n,this.hasValue=!0,!this.throttled){let e;try{const{durationSelector:s}=this;e=s(n)}catch(s){return this.destination.error(s)}const i=lp(e,new op(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:n,hasValue:e,throttled:i}=this;i&&(this.remove(i),this.throttled=void 0,i.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(n))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function cse(t){return!Fm(t)&&t-parseFloat(t)+1>=0}function pD(t=0,n,e){let i=-1;return cse(n)?i=Number(n)<1?1:Number(n):Tv(n)&&(e=n),Tv(e)||(e=Pk),new es(s=>{const r=cse(t)?t:+t-e.now();return e.schedule(w6e,r,{index:0,period:i,subscriber:s})})}function w6e(t){const{index:n,period:e,subscriber:i}=t;if(i.next(n),!i.closed){if(-1===e)return i.complete();t.index=n+1,this.schedule(t,e)}}function m8(t,n=Pk){return function b6e(t){return function(e){return e.lift(new v6e(t))}}(()=>pD(t,n))}class C6e{call(n,e){return e.subscribe(new x6e(n))}}class x6e extends Ji{constructor(n){super(n),this.hasPrev=!1}_next(n){let e;this.hasPrev?e=[this.prev,n]:this.hasPrev=!0,this.prev=n,e&&this.destination.next(e)}}class use{}class E6e extends use{constructor(n){super(),this._data=n}connect(){return Ju(this._data)?this._data:gt(this._data)}disconnect(){}}var tf=function(t){return t[t.REPLACED=0]="REPLACED",t[t.INSERTED=1]="INSERTED",t[t.MOVED=2]="MOVED",t[t.REMOVED=3]="REMOVED",t}(tf||{});const F_=new st("_ViewRepeater");class _8{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(n,e,i,s,r){n.forEachOperation((o,a,l)=>{let c,u;null==o.previousIndex?(c=this._insertView(()=>i(o,a,l),l,e,s(o)),u=c?tf.INSERTED:tf.REPLACED):null==l?(this._detachAndCacheView(a,e),u=tf.REMOVED):(c=this._moveView(a,l,e,s(o)),u=tf.MOVED),r&&r({context:c?.context,operation:u,record:o})})}detach(){for(const n of this._viewCache)n.destroy();this._viewCache=[]}_insertView(n,e,i,s){const r=this._insertViewFromCache(e,i);if(r)return void(r.context.$implicit=s);const o=n();return i.createEmbeddedView(o.templateRef,o.context,o.index)}_detachAndCacheView(n,e){const i=e.detach(n);this._maybeCacheView(i,e)}_moveView(n,e,i,s){const r=i.get(n);return i.move(r,e),r.context.$implicit=s,r}_maybeCacheView(n,e){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(n);else{const i=e.indexOf(n);-1===i?n.destroy():e.remove(i)}}_insertViewFromCache(n,e){const i=this._viewCache.pop();return i&&e.insert(i,n),i||null}}class hse{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(n=!1,e,i=!0,s){this._multiple=n,this._emitChanges=i,this.compareWith=s,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Pt,e&&e.length&&(n?e.forEach(r=>this._markSelected(r)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...n){this._verifyValueAssignment(n),n.forEach(i=>this._markSelected(i));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...n){this._verifyValueAssignment(n),n.forEach(i=>this._unmarkSelected(i));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...n){this._verifyValueAssignment(n);const e=this.selected,i=new Set(n);n.forEach(r=>this._markSelected(r)),e.filter(r=>!i.has(this._getConcreteValue(r,i))).forEach(r=>this._unmarkSelected(r));const s=this._hasQueuedChanges();return this._emitChangeEvent(),s}toggle(n){return this.isSelected(n)?this.deselect(n):this.select(n)}clear(n=!0){this._unmarkAll();const e=this._hasQueuedChanges();return n&&this._emitChangeEvent(),e}isSelected(n){return this._selection.has(this._getConcreteValue(n))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(n){this._multiple&&this.selected&&this._selected.sort(n)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(n){n=this._getConcreteValue(n),this.isSelected(n)||(this._multiple||this._unmarkAll(),this.isSelected(n)||this._selection.add(n),this._emitChanges&&this._selectedToEmit.push(n))}_unmarkSelected(n){n=this._getConcreteValue(n),this.isSelected(n)&&(this._selection.delete(n),this._emitChanges&&this._deselectedToEmit.push(n))}_unmarkAll(){this.isEmpty()||this._selection.forEach(n=>this._unmarkSelected(n))}_verifyValueAssignment(n){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(n,e){if(this.compareWith){e=e??this._selection;for(let i of e)if(this.compareWith(n,i))return i;return n}return n}}let T6e=(()=>{class t{constructor(){this._listeners=[]}notify(e,i){for(let s of this._listeners)s(e,i)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(i=>e!==i)}}ngOnDestroy(){this._listeners=[]}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const I6e=["contentWrapper"],k6e=["*"],fse=new st("VIRTUAL_SCROLL_STRATEGY");class D6e{constructor(n,e,i){this._scrolledIndexChange=new Pt,this.scrolledIndexChange=this._scrolledIndexChange.pipe(D_()),this._viewport=null,this._itemSize=n,this._minBufferPx=e,this._maxBufferPx=i}attach(n){this._viewport=n,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(n,e,i){this._itemSize=n,this._minBufferPx=e,this._maxBufferPx=i,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(n,e){this._viewport&&this._viewport.scrollToOffset(n*this._itemSize,e)}_updateTotalContentSize(){this._viewport&&this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;const n=this._viewport.getRenderedRange(),e={start:n.start,end:n.end},i=this._viewport.getViewportSize(),s=this._viewport.getDataLength();let r=this._viewport.measureScrollOffset(),o=this._itemSize>0?r/this._itemSize:0;if(e.end>s){const l=Math.ceil(i/this._itemSize),c=Math.max(0,Math.min(o,s-l));o!=c&&(o=c,r=c*this._itemSize,e.start=Math.floor(o)),e.end=Math.max(0,Math.min(s,e.start+l))}const a=r-e.start*this._itemSize;if(a<this._minBufferPx&&0!=e.start){const l=Math.ceil((this._maxBufferPx-a)/this._itemSize);e.start=Math.max(0,e.start-l),e.end=Math.min(s,Math.ceil(o+(i+this._minBufferPx)/this._itemSize))}else{const l=e.end*this._itemSize-(r+i);if(l<this._minBufferPx&&e.end!=s){const c=Math.ceil((this._maxBufferPx-l)/this._itemSize);c>0&&(e.end=Math.min(s,e.end+c),e.start=Math.max(0,Math.floor(o-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(e),this._viewport.setRenderedContentOffset(this._itemSize*e.start),this._scrolledIndexChange.next(Math.floor(o))}}function M6e(t){return t._scrollStrategy}let A6e=(()=>{class t{constructor(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new D6e(this.itemSize,this.minBufferPx,this.maxBufferPx)}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=wp(e)}get minBufferPx(){return this._minBufferPx}set minBufferPx(e){this._minBufferPx=wp(e)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(e){this._maxBufferPx=wp(e)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=pt({type:t,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},standalone:!0,features:[Lt([{provide:fse,useFactory:M6e,deps:[Cn(()=>t)]}]),On]})}return t})(),wS=(()=>{class t{constructor(e,i,s){this._ngZone=e,this._platform=i,this._scrolled=new Pt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new es(i=>{this._globalSubscription||this._addGlobalListener();const s=e>0?this._scrolled.pipe(m8(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):gt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const s=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(an(r=>!r||s.indexOf(r)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((s,r)=>{this._scrollableContainsElement(r,e)&&i.push(r)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let s=Sp(i),r=e.getElementRef().nativeElement;do{if(s==r)return!0}while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Qh(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Wt),Re(js),Re(Zn,8))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),g8=(()=>{class t{constructor(e,i,s,r){this.elementRef=e,this.scrollDispatcher=i,this.ngZone=s,this.dir=r,this._destroyed=new Pt,this._elementScrolled=new es(o=>this.ngZone.runOutsideAngular(()=>Qh(this.elementRef.nativeElement,"scroll").pipe(Ii(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const i=this.elementRef.nativeElement,s=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=s?e.end:e.start),null==e.right&&(e.right=s?e.start:e.end),null!=e.bottom&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),s&&_S()!=Hd.NORMAL?(null!=e.left&&(e.right=i.scrollWidth-i.clientWidth-e.left),_S()==Hd.INVERTED?e.left=e.right:_S()==Hd.NEGATED&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const i=this.elementRef.nativeElement;Sie()?i.scrollTo(e):(null!=e.top&&(i.scrollTop=e.top),null!=e.left&&(i.scrollLeft=e.left))}measureScrollOffset(e){const i="left",s="right",r=this.elementRef.nativeElement;if("top"==e)return r.scrollTop;if("bottom"==e)return r.scrollHeight-r.clientHeight-r.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==e?e=o?s:i:"end"==e&&(e=o?i:s),o&&_S()==Hd.INVERTED?e==i?r.scrollWidth-r.clientWidth-r.scrollLeft:r.scrollLeft:o&&_S()==Hd.NEGATED?e==i?r.scrollLeft+r.scrollWidth-r.clientWidth:-r.scrollLeft:e==i?r.scrollLeft:r.scrollWidth-r.clientWidth-r.scrollLeft}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(wS),D(Wt),D(xo,8))};static#t=this.\u0275dir=pt({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}return t})(),Kv=(()=>{class t{constructor(e,i,s){this._platform=e,this._change=new Pt,this._changeListener=r=>{this._change.next(r)},this._document=s,i.runOutsideAngular(()=>{if(e.isBrowser){const r=this._getWindow();r.addEventListener("resize",this._changeListener),r.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:s}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+s,right:e.left+i,height:s,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),s=e.documentElement,r=s.getBoundingClientRect();return{top:-r.top||e.body.scrollTop||i.scrollY||s.scrollTop||0,left:-r.left||e.body.scrollLeft||i.scrollX||s.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(m8(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||t)(Re(js),Re(Wt),Re(Zn,8))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const pse=new st("VIRTUAL_SCROLLABLE");let R6e=(()=>{class t extends g8{constructor(e,i,s,r){super(e,i,s,r)}measureViewportSize(e){const i=this.elementRef.nativeElement;return"horizontal"===e?i.clientWidth:i.clientHeight}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(wS),D(Wt),D(xo,8))};static#t=this.\u0275dir=pt({type:t,features:[bt]})}return t})();const L6e=typeof requestAnimationFrame<"u"?f6e:p8;let mse=(()=>{class t extends R6e{get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}constructor(e,i,s,r,o,a,l,c){super(e,a,s,o),this.elementRef=e,this._changeDetectorRef=i,this._scrollStrategy=r,this.scrollable=c,this._platform=Je(js),this._detachedSubject=new Pt,this._renderedRangeSubject=new Pt,this._orientation="vertical",this.appendOnly=!1,this.scrolledIndexChange=new es(u=>this._scrollStrategy.scrolledIndexChange.subscribe(d=>Promise.resolve().then(()=>this.ngZone.run(()=>u.next(d))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=Tn.EMPTY,this._injector=Je(ti),this._isDestroyed=!1,this._viewportChanges=l.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(So(null),m8(0,L6e),Ii(this._destroyed)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),this._isDestroyed=!0,super.ngOnDestroy()}attach(e){this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe(Ii(this._detachedSubject)).subscribe(i=>{const s=i.length;s!==this._dataLength&&(this._dataLength=s,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(e){return this.getElementRef().nativeElement.getBoundingClientRect()[e]}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){(function F6e(t,n){return t.start==n.start&&t.end==n.end})(this._renderedRange,e)||(this.appendOnly&&(e={start:0,end:Math.max(this._renderedRange.end,e.end)}),this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,i="to-start"){e=this.appendOnly&&"to-start"===i?0:e;const r="horizontal"==this.orientation,o=r?"X":"Y";let l=`translate${o}(${Number((r&&this.dir&&"rtl"==this.dir.value?-1:1)*e)}px)`;this._renderedContentOffset=e,"to-end"===i&&(l+=` translate${o}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=l&&(this._renderedContentTransform=l,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,i="auto"){const s={behavior:i};"horizontal"===this.orientation?s.start=e:s.top=e,this.scrollable.scrollTo(s)}scrollToIndex(e,i="auto"){this._scrollStrategy.scrollToIndex(e,i)}measureScrollOffset(e){let i;return i=this.scrollable==this?s=>super.measureScrollOffset(s):s=>this.scrollable.measureScrollOffset(s),Math.max(0,i(e??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(e){let i;const s="left",r="right",o="rtl"==this.dir?.value;i="start"==e?o?r:s:"end"==e?o?s:r:e||("horizontal"===this.orientation?"left":"top");const a=this.scrollable.measureBoundingClientRectWithScrollOffset(i);return this.elementRef.nativeElement.getBoundingClientRect()[i]-a}measureRenderedContentSize(){const e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isDestroyed||this.ngZone.run(()=>{this._changeDetectorRef.markForCheck(),this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,Pl(()=>{this._isChangeDetectionPending=!1;const e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const i of e)i()},{injector:this._injector})})}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(bi),D(Wt),D(fse,8),D(xo,8),D(wS),D(Kv),D(pse,8))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(i,s){if(1&i&&Zt(I6e,7),2&i){let r;xt(r=Et())&&(s._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(i,s){2&i&&rt("cdk-virtual-scroll-orientation-horizontal","horizontal"===s.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==s.orientation)},inputs:{orientation:"orientation",appendOnly:[2,"appendOnly","appendOnly",Rt]},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[Lt([{provide:g8,useFactory:(e,i)=>e||i,deps:[[new Id,new _H(pse)],t]}]),Ni,bt,Ln],ngContentSelectors:k6e,decls:4,vars:4,consts:[["contentWrapper",""],[1,"cdk-virtual-scroll-content-wrapper"],[1,"cdk-virtual-scroll-spacer"]],template:function(i,s){1&i&&(Ti(),m(0,"div",1,0),un(2),_(),be(3,"div",2)),2&i&&(b(3),Wn("width",s._totalContentWidth)("height",s._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0})}return t})();function _se(t,n,e){if(!e.getBoundingClientRect)return 0;const s=e.getBoundingClientRect();return"horizontal"===t?"start"===n?s.left:s.right:"start"===n?s.top:s.bottom}let P6e=(()=>{class t{get cdkVirtualForOf(){return this._cdkVirtualForOf}set cdkVirtualForOf(e){this._cdkVirtualForOf=e,function mD(t){return t&&"function"==typeof t.connect&&!(t instanceof _k)}(e)?this._dataSourceChanges.next(e):this._dataSourceChanges.next(new E6e(Ju(e)?e:Array.from(e||[])))}get cdkVirtualForTrackBy(){return this._cdkVirtualForTrackBy}set cdkVirtualForTrackBy(e){this._needsUpdate=!0,this._cdkVirtualForTrackBy=e?(i,s)=>e(i+(this._renderedRange?this._renderedRange.start:0),s):void 0}set cdkVirtualForTemplate(e){e&&(this._needsUpdate=!0,this._template=e)}get cdkVirtualForTemplateCacheSize(){return this._viewRepeater.viewCacheSize}set cdkVirtualForTemplateCacheSize(e){this._viewRepeater.viewCacheSize=wp(e)}constructor(e,i,s,r,o,a){this._viewContainerRef=e,this._template=i,this._differs=s,this._viewRepeater=r,this._viewport=o,this.viewChange=new Pt,this._dataSourceChanges=new Pt,this.dataStream=this._dataSourceChanges.pipe(So(null),function S6e(){return t=>t.lift(new C6e)}(),nn(([l,c])=>this._changeDataSource(l,c)),jn(1)),this._differ=null,this._needsUpdate=!1,this._destroyed=new Pt,this.dataStream.subscribe(l=>{this._data=l,this._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe(Ii(this._destroyed)).subscribe(l=>{this._renderedRange=l,this.viewChange.observers.length&&a.run(()=>this.viewChange.next(this._renderedRange)),this._onRenderedDataChange()}),this._viewport.attach(this)}measureRangeSize(e,i){if(e.start>=e.end)return 0;const s=e.start-this._renderedRange.start,r=e.end-e.start;let o,a;for(let l=0;l<r;l++){const c=this._viewContainerRef.get(l+s);if(c&&c.rootNodes.length){o=a=c.rootNodes[0];break}}for(let l=r-1;l>-1;l--){const c=this._viewContainerRef.get(l+s);if(c&&c.rootNodes.length){a=c.rootNodes[c.rootNodes.length-1];break}}return o&&a?_se(i,"end",a)-_se(i,"start",o):0}ngDoCheck(){if(this._differ&&this._needsUpdate){const e=this._differ.diff(this._renderedItems);e?this._applyChanges(e):this._updateContext(),this._needsUpdate=!1}}ngOnDestroy(){this._viewport.detach(),this._dataSourceChanges.next(void 0),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete(),this._viewRepeater.detach()}_onRenderedDataChange(){this._renderedRange&&(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create((e,i)=>this.cdkVirtualForTrackBy?this.cdkVirtualForTrackBy(e,i):i)),this._needsUpdate=!0)}_changeDataSource(e,i){return e&&e.disconnect(this),this._needsUpdate=!0,i?i.connect(this):gt()}_updateContext(){const e=this._data.length;let i=this._viewContainerRef.length;for(;i--;){const s=this._viewContainerRef.get(i);s.context.index=this._renderedRange.start+i,s.context.count=e,this._updateComputedContextProperties(s.context),s.detectChanges()}}_applyChanges(e){this._viewRepeater.applyChanges(e,this._viewContainerRef,(r,o,a)=>this._getEmbeddedViewArgs(r,a),r=>r.item),e.forEachIdentityChange(r=>{this._viewContainerRef.get(r.currentIndex).context.$implicit=r.item});const i=this._data.length;let s=this._viewContainerRef.length;for(;s--;){const r=this._viewContainerRef.get(s);r.context.index=this._renderedRange.start+s,r.context.count=i,this._updateComputedContextProperties(r.context)}}_updateComputedContextProperties(e){e.first=0===e.index,e.last=e.index===e.count-1,e.even=e.index%2==0,e.odd=!e.even}_getEmbeddedViewArgs(e,i){return{templateRef:this._template,context:{$implicit:e.item,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1},index:i}}static#e=this.\u0275fac=function(i){return new(i||t)(D(Pr),D(or),D(Uh),D(F_),D(mse,4),D(Wt))};static#t=this.\u0275dir=pt({type:t,selectors:[["","cdkVirtualFor","","cdkVirtualForOf",""]],inputs:{cdkVirtualForOf:"cdkVirtualForOf",cdkVirtualForTrackBy:"cdkVirtualForTrackBy",cdkVirtualForTemplate:"cdkVirtualForTemplate",cdkVirtualForTemplateCacheSize:"cdkVirtualForTemplateCacheSize"},standalone:!0,features:[Lt([{provide:F_,useClass:_8}])]})}return t})(),L_=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({})}return t})(),SS=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[gS,L_,gS,L_]})}return t})();function _D(t,n=!1){return e=>e.lift(new $6e(t,n))}class $6e{constructor(n,e){this.predicate=n,this.inclusive=e}call(n,e){return e.subscribe(new B6e(n,this.predicate,this.inclusive))}}class B6e extends Ji{constructor(n,e,i){super(n),this.predicate=e,this.inclusive=i,this.index=0}_next(n){const e=this.destination;let i;try{i=this.predicate(n,this.index++)}catch(s){return void e.error(s)}this.nextOrComplete(n,i)}nextOrComplete(n,e){const i=this.destination;e?i.next(n):(this.inclusive&&i.next(n),i.complete())}}const gse=Sie();class V6e{constructor(n,e){this._viewportRuler=n,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=Co(-this._previousScrollPosition.left),n.style.top=Co(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const n=this._document.documentElement,i=n.style,s=this._document.body.style,r=i.scrollBehavior||"",o=s.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),gse&&(i.scrollBehavior=s.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),gse&&(i.scrollBehavior=r,s.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class z6e{constructor(n,e,i,s){this._scrollDispatcher=n,this._ngZone=e,this._viewportRuler=i,this._config=s,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(n){this._overlayRef=n}enable(){if(this._scrollSubscription)return;const n=this._scrollDispatcher.scrolled(0).pipe(an(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class bse{enable(){}disable(){}attach(){}}function b8(t,n){return n.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function vse(t,n){return n.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class U6e{constructor(n,e,i,s){this._scrollDispatcher=n,this._viewportRuler=e,this._ngZone=i,this._config=s,this._scrollSubscription=null}attach(n){this._overlayRef=n}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:s}=this._viewportRuler.getViewportSize();b8(e,[{width:i,height:s,bottom:s,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let G6e=(()=>{class t{constructor(e,i,s,r){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=s,this.noop=()=>new bse,this.close=o=>new z6e(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new V6e(this._viewportRuler,this._document),this.reposition=o=>new U6e(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=r}static#e=this.\u0275fac=function(i){return new(i||t)(Re(wS),Re(Kv),Re(Wt),Re(Zn))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Xv{constructor(n){if(this.scrollStrategy=new bse,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,n){const e=Object.keys(n);for(const i of e)void 0!==n[i]&&(this[i]=n[i])}}}class j6e{constructor(n,e){this.connectionPair=n,this.scrollableViewProperties=e}}let yse=(()=>{class t{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Zn))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),H6e=(()=>{class t extends yse{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=s=>{const r=this._attachedOverlays;for(let o=r.length-1;o>-1;o--)if(r[o]._keydownEvents.observers.length>0){const a=r[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(s)):a.next(s);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Zn),Re(Wt,8))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),W6e=(()=>{class t extends yse{constructor(e,i,s){super(e),this._platform=i,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=r=>{this._pointerDownEventTarget=id(r)},this._clickListener=r=>{const o=id(r),a="click"===r.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(wse(u.overlayElement,o)||wse(u.overlayElement,a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Zn),Re(js),Re(Wt,8))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function wse(t,n){const e=typeof ShadowRoot<"u"&&ShadowRoot;let i=n;for(;i;){if(i===t)return!0;i=e&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}let gD=(()=>{class t{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||Z$()){const s=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let r=0;r<s.length;r++)s[r].remove()}const i=this._document.createElement("div");i.classList.add(e),Z$()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Zn),Re(js))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class CS{constructor(n,e,i,s,r,o,a,l,c,u=!1,d){this._portalOutlet=n,this._host=e,this._pane=i,this._config=s,this._ngZone=r,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._injector=d,this._backdropElement=null,this._backdropClick=new Pt,this._attachments=new Pt,this._detachments=new Pt,this._locationChanges=Tn.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new Pt,this._outsidePointerEvents=new Pt,this._renders=new Pt,s.scrollStrategy&&(this._scrollStrategy=s.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=s.positionStrategy,this._afterRenderRef=Xu(()=>E3(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(n){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(n);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),Pl(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){const n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,n&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config={...this._config,...n},this._updateElementSize()}setDirection(n){this._config={...this._config,direction:n},this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){const n=this._config.direction;return n?"string"==typeof n?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const n=this._pane.style;n.width=Co(this._config.width),n.height=Co(this._config.height),n.minWidth=Co(this._config.minWidth),n.minHeight=Co(this._config.minHeight),n.maxWidth=Co(this._config.maxWidth),n.maxHeight=Co(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){const n="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(n)})}):this._backdropElement.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const n=this._backdropElement;if(n){if(this._animationsDisabled)return void this._disposeBackdrop(n);n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{n.addEventListener("transitionend",this._backdropTransitionendHandler)}),n.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(n)},500))}}_toggleClasses(n,e,i){const s=Yk(e||[]).filter(r=>!!r);s.length&&(i?n.classList.add(...s):n.classList.remove(...s))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{const n=this._renders.pipe(Ii(Zs(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),n.unsubscribe())})})}_disposeScrollStrategy(){const n=this._scrollStrategy;n&&(n.disable(),n.detach&&n.detach())}_disposeBackdrop(n){n&&(n.removeEventListener("click",this._backdropClickHandler),n.removeEventListener("transitionend",this._backdropTransitionendHandler),n.remove(),this._backdropElement===n&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Sse="cdk-overlay-connected-position-bounding-box",q6e=/([A-Za-z%]+)$/;class K6e{get positions(){return this._preferredPositions}constructor(n,e,i,s,r){this._viewportRuler=e,this._document=i,this._platform=s,this._overlayContainer=r,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Pt,this._resizeSubscription=Tn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(n)}attach(n){this._validatePositions(),n.hostElement.classList.add(Sse),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._originRect,e=this._overlayRect,i=this._viewportRect,s=this._containerRect,r=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(n,s,a),c=this._getOverlayPoint(l,e,a),u=this._getOverlayFit(c,e,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?r.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(r.length){let a=null,l=-1;for(const c of r){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&P_(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Sse),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,e)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,-1===n.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,e,i){let s,r;if("center"==i.originX)s=n.left+n.width/2;else{const o=this._isRtl()?n.right:n.left,a=this._isRtl()?n.left:n.right;s="start"==i.originX?o:a}return e.left<0&&(s-=e.left),r="center"==i.originY?n.top+n.height/2:"top"==i.originY?n.top:n.bottom,e.top<0&&(r-=e.top),{x:s,y:r}}_getOverlayPoint(n,e,i){let s,r;return s="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,r="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:n.x+s,y:n.y+r}}_getOverlayFit(n,e,i,s){const r=xse(e);let{x:o,y:a}=n,l=this._getOffset(s,"x"),c=this._getOffset(s,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+r.height-i.height,p=this._subtractOverflows(r.width,0-o,o+r.width-i.width),g=this._subtractOverflows(r.height,h,f),v=p*g;return{visibleArea:v,isCompletelyWithinViewport:r.width*r.height===v,fitsInViewportVertically:g===r.height,fitsInViewportHorizontally:p==r.width}}_canFitWithFlexibleDimensions(n,e,i){if(this._hasFlexibleDimensions){const s=i.bottom-e.y,r=i.right-e.x,o=Cse(this._overlayRef.getConfig().minHeight),a=Cse(this._overlayRef.getConfig().minWidth);return(n.fitsInViewportVertically||null!=o&&o<=s)&&(n.fitsInViewportHorizontally||null!=a&&a<=r)}return!1}_pushOverlayOnScreen(n,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};const s=xse(e),r=this._viewportRect,o=Math.max(n.x+s.width-r.width,0),a=Math.max(n.y+s.height-r.height,0),l=Math.max(r.top-i.top-n.y,0),c=Math.max(r.left-i.left-n.x,0);let u=0,d=0;return u=s.width<=r.width?c||-o:n.x<this._viewportMargin?r.left-i.left-n.x:0,d=s.height<=r.height?l||-a:n.y<this._viewportMargin?r.top-i.top-n.y:0,this._previousPushAmount={x:u,y:d},{x:n.x+u,y:n.y+d}}_applyPosition(n,e){if(this._setTransformOrigin(n),this._setOverlayElementStyles(e,n),this._setBoundingBoxStyles(e,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._positionChanges.observers.length){const i=this._getScrollVisibility();if(n!==this._lastPosition||!this._lastScrollVisibility||!function X6e(t,n){return t===n||t.isOriginClipped===n.isOriginClipped&&t.isOriginOutsideView===n.isOriginOutsideView&&t.isOverlayClipped===n.isOverlayClipped&&t.isOverlayOutsideView===n.isOverlayOutsideView}(this._lastScrollVisibility,i)){const s=new j6e(n,i);this._positionChanges.next(s)}this._lastScrollVisibility=i}this._lastPosition=n,this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,s=n.overlayY;i="center"===n.overlayX?"center":this._isRtl()?"start"===n.overlayX?"right":"left":"start"===n.overlayX?"left":"right";for(let r=0;r<e.length;r++)e[r].style.transformOrigin=`${i} ${s}`}_calculateBoundingBoxRect(n,e){const i=this._viewportRect,s=this._isRtl();let r,o,a,u,d,h;if("top"===e.overlayY)o=n.y,r=i.height-o+this._viewportMargin;else if("bottom"===e.overlayY)a=i.height-n.y+2*this._viewportMargin,r=i.height-a+this._viewportMargin;else{const f=Math.min(i.bottom-n.y+i.top,n.y),p=this._lastBoundingBoxSize.height;r=2*f,o=n.y-f,r>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=n.y-p/2)}if("end"===e.overlayX&&!s||"start"===e.overlayX&&s)h=i.width-n.x+2*this._viewportMargin,u=n.x-this._viewportMargin;else if("start"===e.overlayX&&!s||"end"===e.overlayX&&s)d=n.x,u=i.right-n.x;else{const f=Math.min(i.right-n.x+i.left,n.x),p=this._lastBoundingBoxSize.width;u=2*f,d=n.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=n.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:r}}_setBoundingBoxStyles(n,e){const i=this._calculateBoundingBoxRect(n,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const s={};if(this._hasExactPosition())s.top=s.left="0",s.bottom=s.right=s.maxHeight=s.maxWidth="",s.width=s.height="100%";else{const r=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;s.height=Co(i.height),s.top=Co(i.top),s.bottom=Co(i.bottom),s.width=Co(i.width),s.left=Co(i.left),s.right=Co(i.right),s.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",s.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",r&&(s.maxHeight=Co(r)),o&&(s.maxWidth=Co(o))}this._lastBoundingBoxSize=i,P_(this._boundingBox.style,s)}_resetBoundingBoxStyles(){P_(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){P_(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,e){const i={},s=this._hasExactPosition(),r=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(s){const u=this._viewportRuler.getViewportScrollPosition();P_(i,this._getExactOverlayY(e,n,u)),P_(i,this._getExactOverlayX(e,n,u))}else i.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(s?i.maxHeight=Co(o.maxHeight):r&&(i.maxHeight="")),o.maxWidth&&(s?i.maxWidth=Co(o.maxWidth):r&&(i.maxWidth="")),P_(this._pane.style,i)}_getExactOverlayY(n,e,i){let s={top:"",bottom:""},r=this._getOverlayPoint(e,this._overlayRect,n);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,i)),"bottom"===n.overlayY?s.bottom=this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)+"px":s.top=Co(r.y),s}_getExactOverlayX(n,e,i){let o,s={left:"",right:""},r=this._getOverlayPoint(e,this._overlayRect,n);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,i)),o=this._isRtl()?"end"===n.overlayX?"left":"right":"end"===n.overlayX?"right":"left","right"===o?s.right=this._document.documentElement.clientWidth-(r.x+this._overlayRect.width)+"px":s.left=Co(r.x),s}_getScrollVisibility(){const n=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(s=>s.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:vse(n,i),isOriginOutsideView:b8(n,i),isOverlayClipped:vse(e,i),isOverlayOutsideView:b8(e,i)}}_subtractOverflows(n,...e){return e.reduce((i,s)=>i-Math.max(s,0),n)}_getNarrowedViewportRect(){const n=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+n-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:n-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,e){return"x"===e?null==n.offsetX?this._offsetX:n.offsetX:null==n.offsetY?this._offsetY:n.offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&Yk(n).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){const n=this._origin;if(n instanceof Bt)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();const e=n.width||0,i=n.height||0;return{top:n.y,bottom:n.y+i,left:n.x,right:n.x+e,height:i,width:e}}}function P_(t,n){for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}function Cse(t){if("number"!=typeof t&&null!=t){const[n,e]=t.split(q6e);return e&&"px"!==e?null:parseFloat(n)}return t||null}function xse(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}const Ese="cdk-global-overlay-wrapper";class Y6e{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(n){const e=n.getConfig();this._overlayRef=n,this._width&&!e.width&&n.updateSize({width:this._width}),this._height&&!e.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(Ese),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:s,height:r,maxWidth:o,maxHeight:a}=i,l=!("100%"!==s&&"100vw"!==s||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==r&&"100vh"!==r||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,d=this._xOffset,h="rtl"===this._overlayRef.getConfig().direction;let f="",p="",g="";l?g="flex-start":"center"===u?(g="center",h?p=d:f=d):h?"left"===u||"end"===u?(g="flex-end",f=d):("right"===u||"start"===u)&&(g="flex-start",p=d):"left"===u||"start"===u?(g="flex-start",f=d):("right"===u||"end"===u)&&(g="flex-end",p=d),n.position=this._cssPosition,n.marginLeft=l?"0":f,n.marginTop=c?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=l?"0":p,e.justifyContent=g,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(Ese),i.justifyContent=i.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}}let Z6e=(()=>{class t{constructor(e,i,s,r){this._viewportRuler=e,this._document=i,this._platform=s,this._overlayContainer=r}global(){return new Y6e}flexibleConnectedTo(e){return new K6e(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Kv),Re(Zn),Re(js),Re(gD))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Q6e=0,Qs=(()=>{class t{constructor(e,i,s,r,o,a,l,c,u,d,h,f){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=s,this._positionBuilder=r,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h,this._animationsModuleType=f}create(e){const i=this._createHostElement(),s=this._createPaneElement(i),r=this._createPortalOutlet(s),o=new Xv(e);return o.direction=o.direction||this._directionality.value,new CS(r,i,s,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType,this._injector.get(Ga))}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+Q6e++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Bl)),new u6e(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||t)(Re(G6e),Re(gD),Re(jb),Re(Z6e),Re(H6e),Re(ti),Re(Wt),Re(Zn),Re(xo),Re(d_),Re(W6e),Re(jo,8))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const J6e=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Tse=new st("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{const t=Je(Qs);return()=>t.scrollStrategies.reposition()}});let bD=(()=>{class t{constructor(e){this.elementRef=e}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt))};static#t=this.\u0275dir=pt({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0})}return t})(),Ise=(()=>{class t{get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}constructor(e,i,s,r,o){this._overlay=e,this._dir=o,this._backdropSubscription=Tn.EMPTY,this._attachSubscription=Tn.EMPTY,this._detachSubscription=Tn.EMPTY,this._positionSubscription=Tn.EMPTY,this._disposeOnNavigation=!1,this._ngZone=Je(Wt),this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.hasBackdrop=!1,this.lockPosition=!1,this.flexibleDimensions=!1,this.growAfterOpen=!1,this.push=!1,this.backdropClick=new it,this.positionChange=new it,this.attach=new it,this.detach=new it,this.overlayKeydown=new it,this.overlayOutsideClick=new it,this._templatePortal=new R_(i,s),this._scrollStrategyFactory=r,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=J6e);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!oa(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{const s=this._getOriginElement(),r=id(i);(!s||s!==r&&!s.contains(r))&&this.overlayOutsideClick.next(i)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),i=new Xv({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(e){const i=this.positions.map(s=>({originX:s.originX,originY:s.originY,overlayX:s.overlayX,overlayY:s.overlayY,offsetX:s.offsetX||this.offsetX,offsetY:s.offsetY||this.offsetY,panelClass:s.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof bD?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof bD?this.origin.elementRef.nativeElement:this.origin instanceof Bt?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(_D(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)(D(Qs),D(or),D(Pr),D(Tse),D(xo,8))};static#t=this.\u0275dir=pt({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",Rt],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",Rt],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",Rt],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",Rt],push:[2,"cdkConnectedOverlayPush","push",Rt],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",Rt]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[Ni,On]})}return t})();const tVe={provide:Tse,deps:[Qs],useFactory:function eVe(t){return()=>t.scrollStrategies.reposition()}};let nf=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:[Qs,tVe],imports:[gS,Wd,SS,SS]})}return t})();function nVe(t,n){if(1&t){const e=Le();m(0,"div",1)(1,"button",2),te("click",function(){return re(e),oe(M().action())}),C(2),_()()}if(2&t){const e=M();b(2),xe(" ",e.data.action," ")}}const iVe=["label"];function sVe(t,n){}const rVe=Math.pow(2,31)-1;class v8{constructor(n,e){this._overlayRef=e,this._afterDismissed=new Pt,this._afterOpened=new Pt,this._onAction=new Pt,this._dismissedByAction=!1,this.containerInstance=n,n._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(n){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(n,rVe))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const kse=new st("MatSnackBarData");class vD{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let Dse=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=pt({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0})}return t})(),Mse=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=pt({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0})}return t})(),Ase=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=pt({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0})}return t})(),Ose=(()=>{class t{constructor(e,i){this.snackBarRef=e,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static#e=this.\u0275fac=function(i){return new(i||t)(D(v8),D(kse))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[Ln],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(i,s){1&i&&(m(0,"div",0),C(1),_(),K(2,nVe,3,1,"div",1)),2&i&&(b(),xe(" ",s.data.message,"\n"),b(),Vn(s.hasAction?2:-1))},dependencies:[u8,Dse,Mse,Ase],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}return t})();const oVe={snackBarState:wo("state",[Gs("void, hidden",Sn({transform:"scale(0.8)",opacity:0})),Gs("visible",Sn({transform:"scale(1)",opacity:1})),us("* => visible",bs("150ms cubic-bezier(0, 0, 0.2, 1)")),us("* => void, * => hidden",bs("75ms cubic-bezier(0.4, 0.0, 1, 1)",Sn({opacity:0})))])};let aVe=0,Nse=(()=>{class t extends hD{constructor(e,i,s,r,o){super(),this._ngZone=e,this._elementRef=i,this._changeDetectorRef=s,this._platform=r,this.snackBarConfig=o,this._document=Je(Zn),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Pt,this._onExit=new Pt,this._onEnter=new Pt,this._animationState="void",this._liveElementId="mat-snack-bar-container-live-"+aVe++,this.attachDomPortal=a=>{this._assertNotAttached();const l=this._portalOutlet.attachDomPortal(a);return this._afterPortalAttached(),l},this._live="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),i}attachTemplatePortal(e){this._assertNotAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),i}onAnimationEnd(e){const{fromState:i,toState:s}=e;if(("void"===s&&"void"!==i||"hidden"===s)&&this._completeExit(),"visible"===s){const r=this._onEnter;this._ngZone.run(()=>{r.next(),r.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){const e=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(o=>e.classList.add(o)):e.classList.add(i)),this._exposeToModals();const s=this._label.nativeElement,r="mdc-snackbar__label";s.classList.toggle(r,!s.querySelector(`.${r}`))}_exposeToModals(){const e=this._liveElementId,i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let s=0;s<i.length;s++){const r=i[s],o=r.getAttribute("aria-owns");this._trackedModals.add(r),o?-1===o.indexOf(e)&&r.setAttribute("aria-owns",o+" "+e):r.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{const i=e.getAttribute("aria-owns");if(i){const s=i.replace(this._liveElementId,"").trim();s.length>0?e.setAttribute("aria-owns",s):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&i){let s=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(s=document.activeElement),e.removeAttribute("aria-hidden"),i.appendChild(e),s?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static#e=this.\u0275fac=function(i){return new(i||t)(D(Wt),D(Bt),D(bi),D(js),D(vD))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(i,s){if(1&i&&(Zt(xp,7),Zt(iVe,7)),2&i){let r;xt(r=Et())&&(s._portalOutlet=r.first),xt(r=Et())&&(s._label=r.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:1,hostBindings:function(i,s){1&i&&ww("@state.done",function(o){return s.onAnimationEnd(o)}),2&i&&mw("@state",s._animationState)},standalone:!0,features:[bt,Ln],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(i,s){1&i&&(m(0,"div",1)(1,"div",2,0)(3,"div",3),K(4,sVe,0,0,"ng-template",4),_(),be(5,"div"),_()()),2&i&&(b(5),$t("aria-live",s._live)("role",s._role)("id",s._liveElementId))},dependencies:[xp],styles:[".mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}.cdk-high-contrast-active .mat-mdc-snackbar-surface{outline:solid 1px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color);border-radius:var(--mdc-snackbar-container-shape);background-color:var(--mdc-snackbar-container-color)}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font);font-size:var(--mdc-snackbar-supporting-text-size);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}"],encapsulation:2,data:{animation:[oVe.snackBarState]}})}return t})();const cVe=new st("mat-snack-bar-default-options",{providedIn:"root",factory:function lVe(){return new vD}});let Rse=(()=>{class t{get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(e,i,s,r,o,a){this._overlay=e,this._live=i,this._injector=s,this._breakpointObserver=r,this._parentSnackBar=o,this._defaultConfig=a,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=Ose,this.snackBarContainerComponent=Nse,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(e,i){return this._attach(e,i)}openFromTemplate(e,i){return this._attach(e,i)}open(e,i="",s){const r={...this._defaultConfig,...s};return r.data={message:e,action:i},r.announcementMessage===e&&(r.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,r)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,i){const r=ti.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:vD,useValue:i}]}),o=new N_(this.snackBarContainerComponent,i.viewContainerRef,r),a=e.attach(o);return a.instance.snackBarConfig=i,a.instance}_attach(e,i){const s={...new vD,...this._defaultConfig,...i},r=this._createOverlay(s),o=this._attachSnackBarContainer(r,s),a=new v8(o,r);if(e instanceof or){const l=new R_(e,null,{$implicit:s.data,snackBarRef:a});a.instance=o.attachTemplatePortal(l)}else{const l=this._createInjector(s,a),c=new N_(e,void 0,l),u=o.attachComponentPortal(c);a.instance=u.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Ii(r.detachments())).subscribe(l=>{r.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),s.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(s.announcementMessage,s.politeness)}),this._animateSnackBar(a,s),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(e,i){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),i.duration&&i.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(i.duration))}_createOverlay(e){const i=new Xv;i.direction=e.direction;let s=this._overlay.position().global();const r="rtl"===e.direction,o="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!r||"end"===e.horizontalPosition&&r,a=!o&&"center"!==e.horizontalPosition;return o?s.left("0"):a?s.right("0"):s.centerHorizontally(),"top"===e.verticalPosition?s.top("0"):s.bottom("0"),i.positionStrategy=s,this._overlay.create(i)}_createInjector(e,i){return ti.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:v8,useValue:i},{provide:kse,useValue:e.data}]})}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Qs),Re(zie),Re(ti),Re(Zk),Re(t,12),Re(cVe))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),uVe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:[Rse],imports:[nf,Wd,qv,Ki,Ose,Ki]})}return t})();class dVe{constructor(n){this._box=n,this._destroyed=new Pt,this._resizeSubject=new Pt,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(n){return this._elementObservables.has(n)||this._elementObservables.set(n,new es(e=>{const i=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(n,{box:this._box}),()=>{this._resizeObserver?.unobserve(n),i.unsubscribe(),this._elementObservables.delete(n)}}).pipe(an(e=>e.some(i=>i.target===n)),jn({bufferSize:1,refCount:!0}),Ii(this._destroyed))),this._elementObservables.get(n)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let hVe=(()=>{class t{constructor(){this._observers=new Map,this._ngZone=Je(Wt)}ngOnDestroy(){for(const[,e]of this._observers)e.destroy();this._observers.clear()}observe(e,i){const s=i?.box||"content-box";return this._observers.has(s)||this._observers.set(s,new dVe(s)),this._observers.get(s).observe(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const fVe=["notch"],pVe=["matFormFieldNotchedOutline",""],mVe=["*"],_Ve=["textField"],gVe=["iconPrefixContainer"],bVe=["textPrefixContainer"],vVe=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],yVe=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function wVe(t,n){1&t&&be(0,"span",19)}function SVe(t,n){if(1&t&&(m(0,"label",18),un(1,1),K(2,wVe,1,0,"span",19),_()),2&t){const e=M(2);S("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),$t("for",e._control.disableAutomaticLabeling?null:e._control.id),b(2),Vn(!e.hideRequiredMarker&&e._control.required?2:-1)}}function CVe(t,n){1&t&&K(0,SVe,3,5,"label",18),2&t&&Vn(M()._hasFloatingLabel()?0:-1)}function xVe(t,n){1&t&&be(0,"div",5)}function EVe(t,n){}function TVe(t,n){1&t&&K(0,EVe,0,0,"ng-template",11),2&t&&(M(2),S("ngTemplateOutlet",Gt(1)))}function IVe(t,n){if(1&t&&(m(0,"div",7),K(1,TVe,1,1,null,11),_()),2&t){const e=M();S("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),b(),Vn(e._forceDisplayInfixLabel()?-1:1)}}function kVe(t,n){1&t&&(m(0,"div",8,2),un(2,2),_())}function DVe(t,n){1&t&&(m(0,"div",9,3),un(2,3),_())}function MVe(t,n){}function AVe(t,n){1&t&&K(0,MVe,0,0,"ng-template",11),2&t&&(M(),S("ngTemplateOutlet",Gt(1)))}function OVe(t,n){1&t&&(m(0,"div",12),un(1,4),_())}function NVe(t,n){1&t&&(m(0,"div",13),un(1,5),_())}function RVe(t,n){1&t&&be(0,"div",14)}function FVe(t,n){1&t&&(m(0,"div",16),un(1,6),_()),2&t&&S("@transitionMessages",M()._subscriptAnimationState)}function LVe(t,n){if(1&t&&(m(0,"mat-hint",20),C(1),_()),2&t){const e=M(2);S("id",e._hintLabelId),b(),vt(e.hintLabel)}}function PVe(t,n){if(1&t&&(m(0,"div",17),K(1,LVe,2,2,"mat-hint",20),un(2,7),be(3,"div",21),un(4,8),_()),2&t){const e=M();S("@transitionMessages",e._subscriptAnimationState),b(),Vn(e.hintLabel?1:-1)}}let Fse=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=pt({type:t,selectors:[["mat-label"]],standalone:!0})}return t})(),$Ve=0;const Lse=new st("MatError");let sf=(()=>{class t{constructor(e,i){this.id="mat-mdc-error-"+$Ve++,e||i.nativeElement.setAttribute("aria-live","polite")}static#e=this.\u0275fac=function(i){return new(i||t)(ll("aria-live"),D(Bt))};static#t=this.\u0275dir=pt({type:t,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(i,s){2&i&&Wa("id",s.id)},inputs:{id:"id"},standalone:!0,features:[Lt([{provide:Lse,useExisting:t}])]})}return t})(),BVe=0,y8=(()=>{class t{constructor(){this.align="start",this.id="mat-mdc-hint-"+BVe++}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=pt({type:t,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,s){2&i&&(Wa("id",s.id),$t("align",null),rt("mat-mdc-form-field-hint-end","end"===s.align))},inputs:{align:"align",id:"id"},standalone:!0})}return t})();const Pse=new st("MatPrefix");let $se=(()=>{class t{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=pt({type:t,selectors:[["","matPrefix",""],["","matIconPrefix",""],["","matTextPrefix",""]],inputs:{_isTextSelector:[0,"matTextPrefix","_isTextSelector"]},standalone:!0,features:[Lt([{provide:Pse,useExisting:t}])]})}return t})();const Bse=new st("MatSuffix");let xS=(()=>{class t{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=pt({type:t,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:[0,"matTextSuffix","_isTextSelector"]},standalone:!0,features:[Lt([{provide:Bse,useExisting:t}])]})}return t})();const Vse=new st("FloatingLabelParent");let zse=(()=>{class t{get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(e){this._elementRef=e,this._floating=!1,this._monitorResize=!1,this._resizeObserver=Je(hVe),this._ngZone=Je(Wt),this._parent=Je(Vse),this._resizeSubscription=new Tn}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function VVe(t){if(null!==t.offsetParent)return t.scrollWidth;const e=t.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const i=e.scrollWidth;return e.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt))};static#t=this.\u0275dir=pt({type:t,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,s){2&i&&rt("mdc-floating-label--float-above",s.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0})}return t})();const Use="mdc-line-ripple--active",yD="mdc-line-ripple--deactivating";let Gse=(()=>{class t{constructor(e,i){this._elementRef=e,this._handleTransitionEnd=s=>{const r=this._elementRef.nativeElement.classList,o=r.contains(yD);"opacity"===s.propertyName&&o&&r.remove(Use,yD)},i.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(yD),e.add(Use)}deactivate(){this._elementRef.nativeElement.classList.add(yD)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(Wt))};static#t=this.\u0275dir=pt({type:t,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0})}return t})(),jse=(()=>{class t{constructor(e,i){this._elementRef=e,this._ngZone=i,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){this._notch.nativeElement.style.width=this.open&&e?`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(Wt))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,s){if(1&i&&Zt(fVe,5),2&i){let r;xt(r=Et())&&(s._notch=r.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,s){2&i&&rt("mdc-notched-outline--notched",s.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[Ln],attrs:pVe,ngContentSelectors:mVe,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(i,s){1&i&&(Ti(),be(0,"div",1),m(1,"div",2,0),un(3),_(),be(4,"div",3))},encapsulation:2,changeDetection:0})}return t})();const zVe={transitionMessages:wo("transitionMessages",[Gs("enter",Sn({opacity:1,transform:"translateY(0%)"})),us("void => enter",[Sn({opacity:0,transform:"translateY(-5px)"}),bs("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let wD=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=pt({type:t})}return t})();const Yv=new st("MatFormField"),UVe=new st("MAT_FORM_FIELD_DEFAULT_OPTIONS");let Hse=0,vs=(()=>{class t{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=jv(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const i=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdate=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,i,s,r,o,a,l,c){this._elementRef=e,this._changeDetectorRef=i,this._dir=r,this._platform=o,this._defaults=a,this._animationMode=l,this._labelChild=zIe(Fse),this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+Hse++,this._hintLabelId="mat-mdc-hint-"+Hse++,this._subscriptAnimationState="",this._destroyed=new Pt,this._isFocused=null,this._needsOutlineLabelOffsetUpdate=!1,this._injector=Je(ti),this.getLabelId=c_(()=>this._hasFloatingLabel()?this._labelId:null),this._hasFloatingLabel=c_(()=>!!this._labelChild()),a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Ii(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Zs(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),E3(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(Ii(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_shouldLabelFloat(){return!!this._hasFloatingLabel()&&(this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_shouldForward(e){const i=this._control?this._control.ngControl:null;return i&&i[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(r=>"start"===r.align):null,s=this._hintChildren?this._hintChildren.find(r=>"end"===r.align):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),s&&e.push(s.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdate=!0);const i=this._iconPrefixContainer?.nativeElement,s=this._textPrefixContainer?.nativeElement,r=i?.getBoundingClientRect().width??0,o=s?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${r+o}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(bi),D(Wt),D(xo),D(js),D(UVe,8),D(jo,8),D(Zn))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-form-field"]],contentQueries:function(i,s,r){if(1&i&&(cZ(r,s._labelChild,Fse,5),Li(r,wD,5),Li(r,Pse,5),Li(r,Bse,5),Li(r,Lse,5),Li(r,y8,5)),2&i){let o;(function uZ(t=1){HT(rL()+t)})(),xt(o=Et())&&(s._formFieldControl=o.first),xt(o=Et())&&(s._prefixChildren=o),xt(o=Et())&&(s._suffixChildren=o),xt(o=Et())&&(s._errorChildren=o),xt(o=Et())&&(s._hintChildren=o)}},viewQuery:function(i,s){if(1&i&&(Zt(_Ve,5),Zt(gVe,5),Zt(bVe,5),Zt(zse,5),Zt(jse,5),Zt(Gse,5)),2&i){let r;xt(r=Et())&&(s._textField=r.first),xt(r=Et())&&(s._iconPrefixContainer=r.first),xt(r=Et())&&(s._textPrefixContainer=r.first),xt(r=Et())&&(s._floatingLabel=r.first),xt(r=Et())&&(s._notchedOutline=r.first),xt(r=Et())&&(s._lineRipple=r.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,s){2&i&&rt("mat-mdc-form-field-label-always-float",s._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",s._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",s._hasIconSuffix)("mat-form-field-invalid",s._control.errorState)("mat-form-field-disabled",s._control.disabled)("mat-form-field-autofilled",s._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===s._animationMode)("mat-form-field-appearance-fill","fill"==s.appearance)("mat-form-field-appearance-outline","outline"==s.appearance)("mat-form-field-hide-placeholder",s._hasFloatingLabel()&&!s._shouldLabelFloat())("mat-focused",s._control.focused)("mat-primary","accent"!==s.color&&"warn"!==s.color)("mat-accent","accent"===s.color)("mat-warn","warn"===s.color)("ng-untouched",s._shouldForward("untouched"))("ng-touched",s._shouldForward("touched"))("ng-pristine",s._shouldForward("pristine"))("ng-dirty",s._shouldForward("dirty"))("ng-valid",s._shouldForward("valid"))("ng-invalid",s._shouldForward("invalid"))("ng-pending",s._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[Lt([{provide:Yv,useExisting:t},{provide:Vse,useExisting:t}]),Ln],ngContentSelectors:yVe,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(i,s){if(1&i){const r=Le();Ti(vVe),K(0,CVe,1,1,"ng-template",null,0,mn),m(2,"div",4,1),te("click",function(a){return re(r),oe(s._control.onContainerClick(a))}),K(4,xVe,1,0,"div",5),m(5,"div",6),K(6,IVe,2,2,"div",7)(7,kVe,3,0,"div",8)(8,DVe,3,0,"div",9),m(9,"div",10),K(10,AVe,1,1,null,11),un(11),_(),K(12,OVe,2,0,"div",12)(13,NVe,2,0,"div",13),_(),K(14,RVe,1,0,"div",14),_(),m(15,"div",15),K(16,FVe,2,1,"div",16)(17,PVe,5,2,"div",17),_()}if(2&i){let r;b(2),rt("mdc-text-field--filled",!s._hasOutline())("mdc-text-field--outlined",s._hasOutline())("mdc-text-field--no-label",!s._hasFloatingLabel())("mdc-text-field--disabled",s._control.disabled)("mdc-text-field--invalid",s._control.errorState),b(2),Vn(s._hasOutline()||s._control.disabled?-1:4),b(2),Vn(s._hasOutline()?6:-1),b(),Vn(s._hasIconPrefix?7:-1),b(),Vn(s._hasTextPrefix?8:-1),b(2),Vn(!s._hasOutline()||s._forceDisplayInfixLabel()?10:-1),b(2),Vn(s._hasTextSuffix?12:-1),b(),Vn(s._hasIconSuffix?13:-1),b(),Vn(s._hasOutline()?-1:14),b(),rt("mat-mdc-form-field-subscript-dynamic-size","dynamic"===s.subscriptSizing),b(),Vn("error"===(r=s._getDisplayedMessages())?16:"hint"===r?17:-1)}},dependencies:[zse,jse,h_,Gse,y8],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color);caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color);caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--disabled .cdk-high-contrast-active .mdc-text-field__input{background-color:Window}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape)}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--outlined{height:56px;overflow:visible;padding-left:16px;padding-right:16px}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.cdk-high-contrast-active .mdc-text-field--disabled .mdc-floating-label{z-index:1}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color);border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;width:12px;border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape)}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 24px)}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color)}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font);line-height:var(--mat-form-field-subscript-text-line-height);font-size:var(--mat-form-field-subscript-text-size);letter-spacing:var(--mat-form-field-subscript-text-tracking);font-weight:var(--mat-form-field-subscript-text-weight)}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color)}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity)}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color)}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color)}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color)}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color)}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[zVe.transitionMessages]},changeDetection:0})}return t})(),qd=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[Ki,ka,Tie,Ki]})}return t})();const Kse=jd({passive:!0});let HVe=(()=>{class t{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Yh;const i=Sp(e),s=this._monitoredElements.get(i);if(s)return s.subject;const r=new Pt,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||i.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>r.next({target:l.target,isAutofilled:!1}))):(i.classList.add(o),this._ngZone.run(()=>r.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,Kse),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:r,unlisten:()=>{i.removeEventListener("animationstart",a,Kse)}}),r}stopMonitoring(e){const i=Sp(e),s=this._monitoredElements.get(i);s&&(s.unlisten(),s.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}static#e=this.\u0275fac=function(i){return new(i||t)(Re(js),Re(Wt))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),WVe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({})}return t})();const Xse=new st("MAT_INPUT_VALUE_ACCESSOR"),qVe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let KVe=0,ql=(()=>{class t{get disabled(){return this._disabled}set disabled(e){this._disabled=jv(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator($r.required)??!1}set required(e){this._required=jv(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&wie().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._ensureWheelDefaultBehavior()}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=jv(e)}get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}constructor(e,i,s,r,o,a,l,c,u,d){this._elementRef=e,this._platform=i,this.ngControl=s,this._autofillMonitor=c,this._ngZone=u,this._formField=d,this._uid="mat-input-"+KVe++,this._webkitBlinkWheelListenerAttached=!1,this.focused=!1,this.stateChanges=new Pt,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(p=>wie().has(p)),this._iOSKeyupListener=p=>{const g=p.target;!g.value&&0===g.selectionStart&&0===g.selectionEnd&&(g.setSelectionRange(1,1),g.setSelectionRange(0,0))},this._webkitBlinkWheelListener=()=>{};const h=this._elementRef.nativeElement,f=h.nodeName.toLowerCase();this._inputValueAccessor=l||h,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&u.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new rD(a,s,o,r,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===f,this._isTextarea="textarea"===f,this._isInFormField=!!d,this._isNativeSelect&&(this.controlType=h.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener),this._webkitBlinkWheelListenerAttached&&this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=e,e?i.setAttribute("placeholder",e):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){qVe.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}_ensureWheelDefaultBehavior(){!this._webkitBlinkWheelListenerAttached&&"number"===this._type&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("wheel",this._webkitBlinkWheelListener)}),this._webkitBlinkWheelListenerAttached=!0),this._webkitBlinkWheelListenerAttached&&"number"!==this._type&&(this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener),this._webkitBlinkWheelListenerAttached=!0)}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(js),D(Vl,10),D(Dv,8),D(qo,8),D(oD),D(Xse,10),D(HVe),D(Wt),D(Yv,8))};static#t=this.\u0275dir=pt({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(i,s){1&i&&te("focus",function(){return s._focusChanged(!0)})("blur",function(){return s._focusChanged(!1)})("input",function(){return s._onInput()}),2&i&&(Wa("id",s.id)("disabled",s.disabled)("required",s.required),$t("name",s.name||null)("readonly",s.readonly&&!s._isNativeSelect||null)("aria-invalid",s.empty&&s.required?null:s.errorState)("aria-required",s.required)("id",s.id),rt("mat-input-server",s._isServer)("mat-mdc-form-field-textarea-control",s._isInFormField&&s._isTextarea)("mat-mdc-form-field-input-control",s._isInFormField)("mdc-text-field__input",s._isInFormField)("mat-mdc-native-select-inline",s._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[Lt([{provide:wD,useExisting:t}]),On]})}return t})(),$_=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[Ki,qd,qd,WVe,Ki]})}return t})();function XVe(t,n){}class ES{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let w8=(()=>{class t extends hD{constructor(e,i,s,r,o,a,l,c){super(),this._elementRef=e,this._focusTrapFactory=i,this._config=r,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._platform=Je(js),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=Je(bi),this._injector=Je(ti),this._isDestroyed=!1,this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const d=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),d},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){const i=this._ariaLabelledByQueue.indexOf(e);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const s=()=>{e.removeEventListener("blur",s),e.removeEventListener("mousedown",s),e.removeAttribute("tabindex")};e.addEventListener("blur",s),e.addEventListener("mousedown",s)})),e.focus(i)}_focusByCssSelector(e,i){let s=this._elementRef.nativeElement.querySelector(e);s&&this._forceFocus(s,i)}_trapFocus(){this._isDestroyed||Pl(()=>{const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}},{injector:this._injector})}_restoreFocus(){const e=this._config.restoreFocus;let i=null;if("string"==typeof e?i=this._document.querySelector(e):"boolean"==typeof e?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&"function"==typeof i.focus){const s=jk(),r=this._elementRef.nativeElement;(!s||s===this._document.body||s===r||r.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=jk();return e===i||e.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=jk()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(nD),D(Zn,8),D(ES),D(tD),D(Wt),D(CS),D(Hl))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(i,s){if(1&i&&Zt(xp,7),2&i){let r;xt(r=Et())&&(s._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,s){2&i&&$t("id",s._config.id||null)("role",s._config.role)("aria-modal",s._config.ariaModal)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null)},standalone:!0,features:[bt,Ln],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,s){1&i&&K(0,XVe,0,0,"ng-template",0)},dependencies:[xp],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return t})();class S8{constructor(n,e){this.overlayRef=n,this.config=e,this.closed=new Pt,this.disableClose=e.disableClose,this.backdropClick=n.backdropClick(),this.keydownEvents=n.keydownEvents(),this.outsidePointerEvents=n.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!oa(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=n.detachments().subscribe(()=>{!1!==e.closeOnOverlayDetachments&&this.close()})}close(n,e){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(n),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(n="",e=""){return this.overlayRef.updateSize({width:n,height:e}),this}addPanelClass(n){return this.overlayRef.addPanelClass(n),this}removePanelClass(n){return this.overlayRef.removePanelClass(n),this}}const Yse=new st("DialogScrollStrategy",{providedIn:"root",factory:()=>{const t=Je(Qs);return()=>t.scrollStrategies.block()}}),YVe=new st("DialogData"),ZVe=new st("DefaultDialogConfig");let JVe=0,C8=(()=>{class t{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(e,i,s,r,o,a){this._overlay=e,this._injector=i,this._defaultOptions=s,this._parentDialog=r,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Pt,this._afterOpenedAtThisLevel=new Pt,this._ariaHiddenElements=new Map,this.afterAllClosed=Vd(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(So(void 0))),this._scrollStrategy=a}open(e,i){(i={...this._defaultOptions||new ES,...i}).id=i.id||"cdk-dialog-"+JVe++,i.id&&this.getDialogById(i.id);const r=this._getOverlayConfig(i),o=this._overlay.create(r),a=new S8(o,i),l=this._attachContainer(o,a,i);return a.containerInstance=l,this._attachDialogContent(e,a,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){x8(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){x8(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),x8(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const i=new Xv({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,s){const r=s.injector||s.viewContainerRef?.injector,o=[{provide:ES,useValue:s},{provide:S8,useValue:i},{provide:CS,useValue:e}];let a;s.container?"function"==typeof s.container?a=s.container:(a=s.container.type,o.push(...s.container.providers(s))):a=w8;const l=new N_(a,s.viewContainerRef,ti.create({parent:r||this._injector,providers:o}),s.componentFactoryResolver);return e.attach(l).instance}_attachDialogContent(e,i,s,r){if(e instanceof or){const o=this._createInjector(r,i,s,void 0);let a={$implicit:r.data,dialogRef:i};r.templateContext&&(a={...a,..."function"==typeof r.templateContext?r.templateContext():r.templateContext}),s.attachTemplatePortal(new R_(e,null,a,o))}else{const o=this._createInjector(r,i,s,this._injector),a=s.attachComponentPortal(new N_(e,r.viewContainerRef,o,r.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(e,i,s,r){const o=e.injector||e.viewContainerRef?.injector,a=[{provide:YVe,useValue:e.data},{provide:S8,useValue:i}];return e.providers&&("function"==typeof e.providers?a.push(...e.providers(i,e,s)):a.push(...e.providers)),e.direction&&(!o||!o.get(xo,null,{optional:!0}))&&a.push({provide:xo,useValue:{value:e.direction,change:gt()}}),ti.create({parent:o||r,providers:a})}_removeOpenDialog(e,i){const s=this.openDialogs.indexOf(e);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,o)=>{r?o.setAttribute("aria-hidden",r):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let s=i.length-1;s>-1;s--){const r=i[s];r!==e&&"SCRIPT"!==r.nodeName&&"STYLE"!==r.nodeName&&!r.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Qs),Re(ti),Re(ZVe,8),Re(t,12),Re(gD),Re(Yse))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function x8(t,n){let e=t.length;for(;e--;)n(t[e])}let Zse=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:[C8],imports:[nf,Wd,s8,Wd]})}return t})();function eze(t,n){}class E8{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const T8="mdc-dialog--open",Qse="mdc-dialog--opening",Jse="mdc-dialog--closing";let ere=(()=>{class t extends w8{constructor(e,i,s,r,o,a,l,c,u){super(e,i,s,r,o,a,l,u),this._animationMode=c,this._animationStateChanged=new it,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?nre(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?nre(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(tre,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Qse,T8)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(T8),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(T8),this._animationsEnabled?(this._hostElement.style.setProperty(tre,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Jse)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(Qse,Jse)}_waitForAnimationToComplete(e,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}attachComponentPortal(e){const i=super.attachComponentPortal(e);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(nD),D(Zn,8),D(E8),D(tD),D(Wt),D(CS),D(jo,8),D(Hl))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,s){2&i&&(Wa("id",s._config.id),$t("aria-modal",s._config.ariaModal)("role",s._config.role)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null),rt("_mat-animation-noopable",!s._animationsEnabled)("mat-mdc-dialog-container-with-actions",s._actionSectionCount>0))},standalone:!0,features:[bt,Ln],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,s){1&i&&(m(0,"div",0)(1,"div",1),K(2,eze,0,0,"ng-template",2),_()())},dependencies:[xp],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12));border-radius:var(--mdc-dialog-container-shape, 4px);background-color:var(--mdc-dialog-container-color, white)}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87));font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6));font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.cdk-high-contrast-active .mat-mdc-dialog-actions{border-top-color:CanvasText}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}return t})();const tre="--mat-dialog-transition-duration";function nre(t){return null==t?null:"number"==typeof t?t:t.endsWith("ms")?wp(t.substring(0,t.length-2)):t.endsWith("s")?1e3*wp(t.substring(0,t.length-1)):"0"===t?0:null}var SD=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(SD||{});class Da{constructor(n,e,i){this._ref=n,this._containerInstance=i,this._afterOpened=new Pt,this._beforeClosed=new Pt,this._state=SD.OPEN,this.disableClose=e.disableClose,this.id=n.id,n.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(an(s=>"opened"===s.state),ai(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(an(s=>"closed"===s.state),ai(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),n.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Zs(this.backdropClick(),this.keydownEvents().pipe(an(s=>27===s.keyCode&&!this.disableClose&&!oa(s)))).subscribe(s=>{this.disableClose||(s.preventDefault(),ire(this,"keydown"===s.type?"keyboard":"mouse"))})}close(n){this._result=n,this._containerInstance._animationStateChanged.pipe(an(e=>"closing"===e.state),ai(1)).subscribe(e=>{this._beforeClosed.next(n),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=SD.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(n){let e=this._ref.config.positionStrategy;return n&&(n.left||n.right)?n.left?e.left(n.left):e.right(n.right):e.centerHorizontally(),n&&(n.top||n.bottom)?n.top?e.top(n.top):e.bottom(n.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(n="",e=""){return this._ref.updateSize(n,e),this}addPanelClass(n){return this._ref.addPanelClass(n),this}removePanelClass(n){return this._ref.removePanelClass(n),this}getState(){return this._state}_finishDialogClose(){this._state=SD.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function ire(t,n,e){return t._closeInteractionType=n,t.close(e)}const Js=new st("MatMdcDialogData"),ize=new st("mat-mdc-dialog-default-options"),sre=new st("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{const t=Je(Qs);return()=>t.scrollStrategies.block()}});let rze=0,wr=(()=>{class t{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(e,i,s,r,o,a,l,c){this._overlay=e,this._defaultOptions=r,this._scrollStrategy=o,this._parentDialog=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Pt,this._afterOpenedAtThisLevel=new Pt,this.dialogConfigClass=E8,this.afterAllClosed=Vd(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(So(void 0))),this._dialog=i.get(C8),this._dialogRefConstructor=Da,this._dialogContainerType=ere,this._dialogDataToken=Js}open(e,i){let s;(i={...this._defaultOptions||new E8,...i}).id=i.id||"mat-mdc-dialog-"+rze++,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const r=this._dialog.open(e,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:ES,useValue:i}]},templateContext:()=>({dialogRef:s}),providers:(o,a,l)=>(s=new this._dialogRefConstructor(o,i,l),s.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:s}])});return s.componentRef=r.componentRef,s.componentInstance=r.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(s);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Qs),Re(ti),Re(d_,8),Re(ize,8),Re(sre),Re(t,12),Re(gD),Re(jo,8))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),oze=0,Ms=(()=>{class t{constructor(e,i,s){this.dialogRef=e,this._elementRef=i,this._dialog=s,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=ore(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){const i=e._matDialogClose||e._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(e){ire(this.dialogRef,0===e.screenX&&0===e.screenY?"keyboard":"mouse",this.dialogResult)}static#e=this.\u0275fac=function(i){return new(i||t)(D(Da,8),D(Bt),D(wr))};static#t=this.\u0275dir=pt({type:t,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(i,s){1&i&&te("click",function(o){return s._onButtonClick(o)}),2&i&&$t("aria-label",s.ariaLabel||null)("type",s.type)},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],type:"type",dialogResult:[0,"mat-dialog-close","dialogResult"],_matDialogClose:[0,"matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],standalone:!0,features:[On]})}return t})(),rre=(()=>{class t{constructor(e,i,s){this._dialogRef=e,this._elementRef=i,this._dialog=s}ngOnInit(){this._dialogRef||(this._dialogRef=ore(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static#e=this.\u0275fac=function(i){return new(i||t)(D(Da,8),D(Bt),D(wr))};static#t=this.\u0275dir=pt({type:t,standalone:!0})}return t})(),I8=(()=>{class t extends rre{constructor(){super(...arguments),this.id="mat-mdc-dialog-title-"+oze++}_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=Pn(t)))(s||t)}})();static#t=this.\u0275dir=pt({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,s){2&i&&Wa("id",s.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[bt]})}return t})();function ore(t,n){let e=t.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?n.find(i=>i.id===e.id):null}let B_=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:[wr],imports:[Zse,nf,Wd,Ki,Ki]})}return t})();const cze=["mat-menu-item",""],uze=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],dze=["mat-icon, [matMenuItemIcon]","*"];function hze(t,n){1&t&&(ra(),m(0,"svg",2),be(1,"polygon",3),_())}const fze=["*"];function pze(t,n){if(1&t){const e=Le();m(0,"div",0),te("keydown",function(s){return re(e),oe(M()._handleKeydown(s))})("click",function(){return re(e),oe(M().closed.emit("click"))})("@transformMenu.start",function(s){return re(e),oe(M()._onAnimationStart(s))})("@transformMenu.done",function(s){return re(e),oe(M()._onAnimationDone(s))}),m(1,"div",1),un(2),_()()}if(2&t){const e=M();bo(e._classList),S("id",e.panelId)("@transformMenu",e._panelAnimationState),$t("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const k8=new st("MAT_MENU_PANEL");let Ep=(()=>{class t{constructor(e,i,s,r,o){this._elementRef=e,this._document=i,this._focusMonitor=s,this._parentMenu=r,this._changeDetectorRef=o,this.role="menuitem",this.disabled=!1,this.disableRipple=!1,this._hovered=new Pt,this._focused=new Pt,this._highlighted=!1,this._triggersSubmenu=!1,r?.addItem?.(this)}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const e=this._elementRef.nativeElement.cloneNode(!0),i=e.querySelectorAll("mat-icon, .material-icons");for(let s=0;s<i.length;s++)i[s].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(Zn),D(Hl),D(k8,8),D(bi))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator"],hostVars:8,hostBindings:function(i,s){1&i&&te("click",function(o){return s._checkDisabled(o)})("mouseenter",function(){return s._handleMouseEnter()}),2&i&&($t("role",s.role)("tabindex",s._getTabIndex())("aria-disabled",s.disabled)("disabled",s.disabled||null),rt("mat-mdc-menu-item-highlighted",s._highlighted)("mat-mdc-menu-item-submenu-trigger",s._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",Rt],disableRipple:[2,"disableRipple","disableRipple",Rt]},exportAs:["matMenuItem"],standalone:!0,features:[Ni,Ln],attrs:cze,ngContentSelectors:dze,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(i,s){1&i&&(Ti(uze),un(0),m(1,"span",0),un(2,1),_(),be(3,"div",1),K(4,hze,2,0,":svg:svg",2)),2&i&&(b(3),S("matRippleDisabled",s.disableRipple||s.disabled)("matRippleTrigger",s._getHostElement()),b(),Vn(s._triggersSubmenu?4:-1))},dependencies:[jt],encapsulation:2,changeDetection:0})}return t})();const mze=new st("MatMenuContent"),CD={transformMenu:wo("transformMenu",[Gs("void",Sn({opacity:0,transform:"scale(0.8)"})),us("void => enter",bs("120ms cubic-bezier(0, 0, 0.2, 1)",Sn({opacity:1,transform:"scale(1)"}))),us("* => void",bs("100ms 25ms linear",Sn({opacity:0})))]),fadeInItems:wo("fadeInItems",[Gs("showing",Sn({opacity:1})),us("void => *",[Sn({opacity:0}),bs("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let _ze=0;const gze=new st("mat-menu-default-options",{providedIn:"root",factory:function bze(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let rf=(()=>{class t{get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}set panelClass(e){const i=this._previousPanelClass,s={...this._classList};i&&i.length&&i.split(" ").forEach(r=>{s[r]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(r=>{s[r]=!0}),this._elementRef.nativeElement.className=""),this._classList=s}get classList(){return this.panelClass}set classList(e){this.panelClass=e}constructor(e,i,s,r){this._elementRef=e,this._changeDetectorRef=r,this._elevationPrefix="mat-elevation-z",this._baseElevation=null,this._directDescendantItems=new qm,this._classList={},this._panelAnimationState="void",this._animationDone=new Pt,this.closed=new it,this.close=this.closed,this.panelId="mat-menu-panel-"+_ze++,this._injector=Je(ti),this.overlayPanelClass=s.overlayPanelClass||"",this._xPosition=s.xPosition,this._yPosition=s.yPosition,this.backdropClass=s.backdropClass,this.overlapTrigger=s.overlapTrigger,this.hasBackdrop=s.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new Lie(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(So(this._directDescendantItems),nn(e=>Zs(...e.map(i=>i._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{const i=this._keyManager;if("enter"===this._panelAnimationState&&i.activeItem?._hasFocus()){const s=e.toArray(),r=Math.max(0,Math.min(s.length-1,i.activeItemIndex||0));s[r]&&!s[r].disabled?i.setActiveItem(r):i.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy()}_hovered(){return this._directDescendantItems.changes.pipe(So(this._directDescendantItems),nn(i=>Zs(...i.map(s=>s._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const i=e.keyCode,s=this._keyManager;switch(i){case 27:oa(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===i||40===i)&&s.setFocusOrigin("keyboard"),void s.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=Pl(()=>{let i=null;if(this._directDescendantItems.length&&(i=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!i||!i.contains(document.activeElement)){const s=this._keyManager;s.setFocusOrigin(e).setFirstItemActive(),!s.activeItem&&i&&i.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){if(null===this._baseElevation){const a=("function"==typeof getComputedStyle?getComputedStyle(this._elementRef.nativeElement):null)?.getPropertyValue("--mat-menu-base-elevation-level")||"8";this._baseElevation=parseInt(a)}const i=Math.min(this._baseElevation+e,24),s=`${this._elevationPrefix}${i}`,r=Object.keys(this._classList).find(o=>o.startsWith(this._elevationPrefix));if(!r||r===this._previousElevation){const o={...this._classList};this._previousElevation&&(o[this._previousElevation]=!1),o[s]=!0,this._previousElevation=s,this._classList=o}}setPositionClasses(e=this.xPosition,i=this.yPosition){this._classList={...this._classList,"mat-menu-before":"before"===e,"mat-menu-after":"after"===e,"mat-menu-above":"above"===i,"mat-menu-below":"below"===i},this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(So(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(Wt),D(gze),D(bi))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-menu"]],contentQueries:function(i,s,r){if(1&i&&(Li(r,mze,5),Li(r,Ep,5),Li(r,Ep,4)),2&i){let o;xt(o=Et())&&(s.lazyContent=o.first),xt(o=Et())&&(s._allItems=o),xt(o=Et())&&(s.items=o)}},viewQuery:function(i,s){if(1&i&&Zt(or,5),2&i){let r;xt(r=Et())&&(s.templateRef=r.first)}},hostVars:3,hostBindings:function(i,s){2&i&&$t("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",Rt],hasBackdrop:[2,"hasBackdrop","hasBackdrop",e=>null==e?null:Rt(e)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],standalone:!0,features:[Lt([{provide:k8,useExisting:t}]),Ni,Ln],ngContentSelectors:fze,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mat-mdc-elevation-specific",3,"keydown","click","id"],[1,"mat-mdc-menu-content"]],template:function(i,s){1&i&&(Ti(),K(0,pze,3,7,"ng-template"))},styles:['mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font);line-height:var(--mat-menu-item-label-text-line-height);font-size:var(--mat-menu-item-label-text-size);letter-spacing:var(--mat-menu-item-label-text-tracking);font-weight:var(--mat-menu-item-label-text-weight)}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;box-sizing:border-box;outline:0;border-radius:var(--mat-menu-container-shape);background-color:var(--mat-menu-container-color);will-change:transform,opacity}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.mat-mdc-menu-panel.ng-animating:has(.mat-mdc-menu-content:empty){display:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color);margin-bottom:var(--mat-menu-divider-bottom-spacing);margin-top:var(--mat-menu-divider-top-spacing)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:var(--mat-menu-item-leading-spacing);padding-right:var(--mat-menu-item-trailing-spacing);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}[dir=rtl] .mat-mdc-menu-item{padding-right:var(--mat-menu-item-leading-spacing);padding-left:var(--mat-menu-item-trailing-spacing)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing);padding-right:var(--mat-menu-item-with-icon-trailing-spacing)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-right:var(--mat-menu-item-with-icon-leading-spacing);padding-left:var(--mat-menu-item-with-icon-trailing-spacing)}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color)}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color)}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing);height:var(--mat-menu-item-icon-size);width:var(--mat-menu-item-icon-size)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color)}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color)}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[CD.transformMenu,CD.fadeInItems]},changeDetection:0})}return t})();const lre=new st("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{const t=Je(Qs);return()=>t.scrollStrategies.reposition()}}),yze={provide:lre,deps:[Qs],useFactory:function vze(t){return()=>t.scrollStrategies.reposition()}},cre=jd({passive:!0});let TS=(()=>{class t{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(i=>{this._destroyMenu(i),("click"===i||"tab"===i)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(e,i,s,r,o,a,l,c,u){this._overlay=e,this._element=i,this._viewContainerRef=s,this._menuItemInstance=a,this._dir=l,this._focusMonitor=c,this._ngZone=u,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Tn.EMPTY,this._hoverSubscription=Tn.EMPTY,this._menuCloseSubscription=Tn.EMPTY,this._changeDetectorRef=Je(bi),this._handleTouchStart=d=>{n8(d)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new it,this.onMenuOpen=this.menuOpened,this.menuClosed=new it,this.onMenuClose=this.menuClosed,this._scrollStrategy=r,this._parentMaterialMenu=o instanceof rf?o:void 0,i.nativeElement.addEventListener("touchstart",this._handleTouchStart,cre)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,cre),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const e=this.menu;if(this._menuOpen||!e)return;const i=this._createOverlay(e),s=i.getConfig(),r=s.positionStrategy;this._setPosition(e,r),s.hasBackdrop=null==e.hasBackdrop?!this.triggersSubmenu():e.hasBackdrop,i.attach(this._getPortal(e)),e.lazyContent&&e.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(e),e instanceof rf&&(e._startAnimation(),e._directDescendantItems.changes.pipe(Ii(e.close)).subscribe(()=>{r.withLockedPosition(!1).reapplyLastPosition(),r.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,i):this._element.nativeElement.focus(i)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const i=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,i instanceof rf?(i._resetAnimation(),i.lazyContent?i._animationDone.pipe(an(s=>"void"===s.toState),ai(1),Ii(i.lazyContent._attached)).subscribe({next:()=>i.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),i?.lazyContent?.detach())}_initMenu(e){e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,this._setMenuElevation(e),e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(e){if(e.setElevation){let i=0,s=e.parentMenu;for(;s;)i++,s=s.parentMenu;e.setElevation(i)}}_setIsMenuOpen(e){e!==this._menuOpen&&(this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e),this._changeDetectorRef.markForCheck())}_createOverlay(e){if(!this._overlayRef){const i=this._getOverlayConfig(e);this._subscribeToPositions(e,i.positionStrategy),this._overlayRef=this._overlay.create(i),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(e){return new Xv({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e,i){e.setPositionClasses&&i.positionChanges.subscribe(s=>{const r="start"===s.connectionPair.overlayX?"after":"before",o="top"===s.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>e.setPositionClasses(r,o)):e.setPositionClasses(r,o)})}_setPosition(e,i){let[s,r]="before"===e.xPosition?["end","start"]:["start","end"],[o,a]="above"===e.yPosition?["bottom","top"]:["top","bottom"],[l,c]=[o,a],[u,d]=[s,r],h=0;if(this.triggersSubmenu()){if(d=s="before"===e.xPosition?"start":"end",r=u="end"===s?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const f=this._parentMaterialMenu.items.first;this._parentInnerPadding=f?f._getHostElement().offsetTop:0}h="bottom"===o?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(l="top"===o?"bottom":"top",c="top"===a?"bottom":"top");i.withPositions([{originX:s,originY:l,overlayX:u,overlayY:o,offsetY:h},{originX:r,originY:l,overlayX:d,overlayY:o,offsetY:h},{originX:s,originY:c,overlayX:u,overlayY:a,offsetY:-h},{originX:r,originY:c,overlayX:d,overlayY:a,offsetY:-h}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),i=this._overlayRef.detachments();return Zs(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:gt(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(an(o=>o!==this._menuItemInstance),an(()=>this._menuOpen)):gt(),i)}_handleMousedown(e){t8(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const i=e.keyCode;(13===i||32===i)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===i&&"ltr"===this.dir||37===i&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(an(e=>e===this._menuItemInstance&&!e.disabled),zv(0,p8)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof rf&&this.menu._isAnimating?this.menu._animationDone.pipe(ai(1),zv(0,p8),Ii(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new R_(e.templateRef,this._viewContainerRef)),this._portal}static#e=this.\u0275fac=function(i){return new(i||t)(D(Qs),D(Bt),D(Pr),D(lre),D(k8,8),D(Ep,10),D(xo,8),D(Hl),D(Wt))};static#t=this.\u0275dir=pt({type:t,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(i,s){1&i&&te("click",function(o){return s._handleClick(o)})("mousedown",function(o){return s._handleMousedown(o)})("keydown",function(o){return s._handleKeydown(o)}),2&i&&$t("aria-haspopup",s.menu?"menu":null)("aria-expanded",s.menuOpen)("aria-controls",s.menuOpen?s.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],standalone:!0})}return t})(),D8=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:[yze],imports:[ka,Tc,Ki,nf,L_,Ki]})}return t})();const wze=["trigger"],Sze=["panel"],Cze=[[["mat-select-trigger"]],"*"],xze=["mat-select-trigger","*"];function Eze(t,n){if(1&t&&(m(0,"span",4),C(1),_()),2&t){const e=M();b(),vt(e.placeholder)}}function Tze(t,n){1&t&&un(0)}function Ize(t,n){if(1&t&&(m(0,"span",11),C(1),_()),2&t){const e=M(2);b(),vt(e.triggerValue)}}function kze(t,n){if(1&t&&(m(0,"span",5),K(1,Tze,1,0)(2,Ize,2,1,"span",11),_()),2&t){const e=M();b(),Vn(e.customTrigger?1:2)}}function Dze(t,n){if(1&t){const e=Le();m(0,"div",12,1),te("@transformPanel.done",function(s){return re(e),oe(M()._panelDoneAnimatingStream.next(s.toState))})("keydown",function(s){return re(e),oe(M()._handleKeydown(s))}),un(2,1),_()}if(2&t){const e=M();(function xY(t,n,e){Ku(mc,Pd,ev(ft(),t,n,e),!0)})("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),S("ngClass",e.panelClass)("@transformPanel","showing"),$t("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const Mze={transformPanelWrap:wo("transformPanelWrap",[us("* => void",xv("@transformPanel",[Cv()],{optional:!0}))]),transformPanel:wo("transformPanel",[Gs("void",Sn({opacity:0,transform:"scale(1, 0.8)"})),us("void => showing",bs("120ms cubic-bezier(0, 0, 0.2, 1)",Sn({opacity:1,transform:"scale(1, 1)"}))),us("* => void",bs("100ms linear",Sn({opacity:0})))])};let ure=0;const dre=new st("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{const t=Je(Qs);return()=>t.scrollStrategies.reposition()}}),Oze=new st("MAT_SELECT_CONFIG"),Nze={provide:dre,deps:[Qs],useFactory:function Aze(t){return()=>t.scrollStrategies.reposition()}},Rze=new st("MatSelectTrigger");class Fze{constructor(n,e){this.source=n,this.value=e}}let Br=(()=>{class t{_scrollOptionIntoView(e){const i=this.options.toArray()[e];if(i){const s=this.panel.nativeElement,r=ese(e,this.options,this.optionGroups),o=i._getHostElement();s.scrollTop=0===e&&1===r?0:tse(o.offsetTop,o.offsetHeight,s.scrollTop,s.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new Fze(this,e)}get focused(){return this._focused||this._panelOpen}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator($r.required)??!1}set required(e){this._required=e,this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=e}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}constructor(e,i,s,r,o,a,l,c,u,d,h,f,p,g){this._viewportRuler=e,this._changeDetectorRef=i,this._elementRef=o,this._dir=a,this._parentFormField=u,this.ngControl=d,this._liveAnnouncer=p,this._defaultOptions=g,this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._panelOpen=!1,this._compareWith=(v,y)=>v===y,this._uid="mat-select-"+ure++,this._triggerAriaLabelledBy=null,this._destroy=new Pt,this.stateChanges=new Pt,this.disableAutomaticLabeling=!0,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+ure++,this._panelDoneAnimatingStream=new Pt,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this._multiple=!1,this.disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto",this._initialized=new Pt,this.optionSelectionChanges=Vd(()=>{const v=this.options;return v?v.changes.pipe(So(v),nn(()=>Zs(...v.map(y=>y.onSelectionChange)))):this._initialized.pipe(nn(()=>this.optionSelectionChanges))}),this.openedChange=new it,this._openedStream=this.openedChange.pipe(an(v=>v),ze(()=>{})),this._closedStream=this.openedChange.pipe(an(v=>!v),ze(()=>{})),this.selectionChange=new it,this.valueChange=new it,this._trackedModal=null,this._skipPredicate=v=>!this.panelOpen&&v.disabled,this.ngControl&&(this.ngControl.valueAccessor=this),null!=g?.typeaheadDebounceInterval&&(this.typeaheadDebounceInterval=g.typeaheadDebounceInterval),this._errorStateTracker=new rD(r,d,c,l,this.stateChanges),this._scrollStrategyFactory=f,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(h)||0,this.id=this.id}ngOnInit(){this._selectionModel=new hse(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(D_(),Ii(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen)),this._viewportRuler.change().pipe(Ii(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(Ii(this._destroy)).subscribe(e=>{e.added.forEach(i=>i.select()),e.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(So(null),Ii(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),i=this.ngControl;if(e!==this._triggerAriaLabelledBy){const s=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?s.setAttribute("aria-labelledby",e):s.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(void 0!==this._previousControl&&null!==i.disabled&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_applyModalPanelOwnership(){const e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;const i=`${this.id}-panel`;this._trackedModal&&Hv(this._trackedModal,"aria-owns",i),Qk(e,"aria-owns",i),this._trackedModal=e}_clearFromModal(){this._trackedModal&&(Hv(this._trackedModal,"aria-owns",`${this.id}-panel`),this._trackedModal=null)}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const i=e.keyCode,s=40===i||38===i||37===i||39===i,r=13===i||32===i,o=this._keyManager;if(!o.isTyping()&&r&&!oa(e)||(this.multiple||e.altKey)&&s)e.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;o.onKeydown(e);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){const i=this._keyManager,s=e.keyCode,r=40===s||38===s,o=i.isTyping();if(r&&e.altKey)e.preventDefault(),this.close();else if(o||13!==s&&32!==s||!i.activeItem||oa(e))if(!o&&this._multiple&&65===s&&e.ctrlKey){e.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=i.activeItemIndex;i.onKeydown(e),this._multiple&&r&&e.shiftKey&&i.activeItem&&i.activeItemIndex!==a&&i.activeItem._selectViaInteraction()}else e.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(ai(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{const i=this._selectOptionByValue(e);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const i=this.options.find(s=>{if(this._selectionModel.isSelected(s))return!1;try{return null!=s.value&&this._compareWith(s.value,e)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_getOverlayWidth(e){return"auto"===this.panelWidth?(e instanceof bD?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:null===this.panelWidth?"":this.panelWidth}_syncParentProperties(){if(this.options)for(const e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new Fie(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=Zs(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Ii(e)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Zs(...this.options.map(i=>i._stateChanges)).pipe(Ii(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,i){const s=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(s!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),i&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),i&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),s!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((i,s)=>this.sortComparator?this.sortComparator(i,s,e):e.indexOf(i)-e.indexOf(s)),this.stateChanges.next()}}_propagateChanges(e){let i;i=this.multiple?this.selected.map(s=>s.value):this.selected?this.selected.value:e,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let i=0;i<this.options.length;i++)if(!this.options.get(i).disabled){e=i;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let i=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(i+=" "+this.ariaLabelledby),i}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static#e=this.\u0275fac=function(i){return new(i||t)(D(Kv),D(bi),D(Wt),D(oD),D(Bt),D(xo,8),D(Dv,8),D(qo,8),D(Yv,8),D(Vl,10),ll("tabindex"),D(dre),D(zie),D(Oze,8))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-select"]],contentQueries:function(i,s,r){if(1&i&&(Li(r,Rze,5),Li(r,Hs,5),Li(r,cD,5)),2&i){let o;xt(o=Et())&&(s.customTrigger=o.first),xt(o=Et())&&(s.options=o),xt(o=Et())&&(s.optionGroups=o)}},viewQuery:function(i,s){if(1&i&&(Zt(wze,5),Zt(Sze,5),Zt(Ise,5)),2&i){let r;xt(r=Et())&&(s.trigger=r.first),xt(r=Et())&&(s.panel=r.first),xt(r=Et())&&(s._overlayDir=r.first)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(i,s){1&i&&te("keydown",function(o){return s._handleKeydown(o)})("focus",function(){return s._onFocus()})("blur",function(){return s._onBlur()}),2&i&&($t("id",s.id)("tabindex",s.disabled?-1:s.tabIndex)("aria-controls",s.panelOpen?s.id+"-panel":null)("aria-expanded",s.panelOpen)("aria-label",s.ariaLabel||null)("aria-required",s.required.toString())("aria-disabled",s.disabled.toString())("aria-invalid",s.errorState)("aria-activedescendant",s._getAriaActiveDescendant()),rt("mat-mdc-select-disabled",s.disabled)("mat-mdc-select-invalid",s.errorState)("mat-mdc-select-required",s.required)("mat-mdc-select-empty",s.empty)("mat-mdc-select-multiple",s.multiple))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",Rt],disableRipple:[2,"disableRipple","disableRipple",Rt],tabIndex:[2,"tabIndex","tabIndex",e=>null==e?0:Dr(e)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Rt],placeholder:"placeholder",required:[2,"required","required",Rt],multiple:[2,"multiple","multiple",Rt],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",Rt],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",Dr],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],standalone:!0,features:[Lt([{provide:wD,useExisting:t},{provide:lD,useExisting:t}]),Ni,On,Ln],ngContentSelectors:xze,decls:11,vars:8,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","attach","detach","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(i,s){if(1&i){const r=Le();Ti(Cze),m(0,"div",2,0),te("click",function(){return re(r),oe(s.open())}),m(3,"div",3),K(4,Eze,2,1,"span",4)(5,kze,3,1,"span",5),_(),m(6,"div",6)(7,"div",7),ra(),m(8,"svg",8),be(9,"path",9),_()()()(),K(10,Dze,3,9,"ng-template",10),te("backdropClick",function(){return re(r),oe(s.close())})("attach",function(){return re(r),oe(s._onAttached())})("detach",function(){return re(r),oe(s.close())})}if(2&i){const r=Gt(1);b(3),$t("id",s._valueId),b(),Vn(s.empty?4:5),b(6),S("cdkConnectedOverlayPanelClass",s._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",s._scrollStrategy)("cdkConnectedOverlayOrigin",s._preferredOverlayOrigin||r)("cdkConnectedOverlayOpen",s.panelOpen)("cdkConnectedOverlayPositions",s._positions)("cdkConnectedOverlayWidth",s._overlayWidth)}},dependencies:[bD,Ise,DI],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color);font-family:var(--mat-select-trigger-text-font);line-height:var(--mat-select-trigger-text-line-height);font-size:var(--mat-select-trigger-text-size);font-weight:var(--mat-select-trigger-text-weight);letter-spacing:var(--mat-select-trigger-text-tracking)}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow)}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color)}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color)}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color)}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color)}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color)}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color)}.cdk-high-contrast-active div.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform)}'],encapsulation:2,data:{animation:[Mze.transformPanel]},changeDetection:0})}return t})(),V_=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:[Nze],imports:[ka,nf,uD,Ki,L_,qd,uD,Ki]})}return t})();const Lze=["panel"],Pze=["*"];function $ze(t,n){if(1&t){const e=Le();m(0,"div",1,0),te("@panelAnimation.done",function(s){return re(e),oe(M()._animationDone.next(s))}),un(2),_()}if(2&t){const e=n.id,i=M();bo(i._classList),rt("mat-mdc-autocomplete-visible",i.showPanel)("mat-mdc-autocomplete-hidden",!i.showPanel)("mat-primary","primary"===i._color)("mat-accent","accent"===i._color)("mat-warn","warn"===i._color),S("id",i.id)("@panelAnimation",i.isOpen?"visible":"hidden"),$t("aria-label",i.ariaLabel||null)("aria-labelledby",i._getPanelAriaLabelledby(e))}}const Bze=wo("panelAnimation",[Gs("void, hidden",Sn({opacity:0,transform:"scaleY(0.8)"})),us(":enter, hidden => visible",[Lw([bs("0.03s linear",Sn({opacity:1})),bs("0.12s cubic-bezier(0, 0, 0.2, 1)",Sn({transform:"scaleY(1)"}))])]),us(":leave, visible => hidden",[bs("0.075s linear",Sn({opacity:0}))])]);let Vze=0;class zze{constructor(n,e){this.source=n,this.option=e}}const hre=new st("mat-autocomplete-default-options",{providedIn:"root",factory:function Uze(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}});let IS=(()=>{class t{get isOpen(){return this._isOpen&&this.showPanel}_setColor(e){this._color=e,this._changeDetectorRef.markForCheck()}set classList(e){this._classList=e,this._elementRef.nativeElement.className=""}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const e of this.options)e._changeDetectorRef.markForCheck()}constructor(e,i,s,r){this._changeDetectorRef=e,this._elementRef=i,this._defaults=s,this._activeOptionChanges=Tn.EMPTY,this._animationDone=new it,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new it,this.opened=new it,this.closed=new it,this.optionActivated=new it,this.id="mat-autocomplete-"+Vze++,this.inertGroups=r?.SAFARI||!1,this.autoActiveFirstOption=!!s.autoActiveFirstOption,this.autoSelectActiveOption=!!s.autoSelectActiveOption,this.requireSelection=!!s.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new Fie(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe(),this._animationDone.complete()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){const i=new zze(this,e);this.optionSelected.emit(i)}_getPanelAriaLabelledby(e){return this.ariaLabel?null:this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_skipPredicate(){return!1}static#e=this.\u0275fac=function(i){return new(i||t)(D(bi),D(Bt),D(hre),D(js))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-autocomplete"]],contentQueries:function(i,s,r){if(1&i&&(Li(r,Hs,5),Li(r,cD,5)),2&i){let o;xt(o=Et())&&(s.options=o),xt(o=Et())&&(s.optionGroups=o)}},viewQuery:function(i,s){if(1&i&&(Zt(or,7),Zt(Lze,5)),2&i){let r;xt(r=Et())&&(s.template=r.first),xt(r=Et())&&(s.panel=r.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[2,"autoActiveFirstOption","autoActiveFirstOption",Rt],autoSelectActiveOption:[2,"autoSelectActiveOption","autoSelectActiveOption",Rt],requireSelection:[2,"requireSelection","requireSelection",Rt],panelWidth:"panelWidth",disableRipple:[2,"disableRipple","disableRipple",Rt],classList:[0,"class","classList"],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Rt]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],standalone:!0,features:[Lt([{provide:lD,useExisting:t}]),Ni,Ln],ngContentSelectors:Pze,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(i,s){1&i&&(Ti(),K(0,$ze,3,16,"ng-template"))},styles:["div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:static;border-radius:var(--mat-autocomplete-container-shape);box-shadow:var(--mat-autocomplete-container-elevation-shadow);background-color:var(--mat-autocomplete-background-color)}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[Bze]},changeDetection:0})}return t})(),fre=(()=>{class t{constructor(e){this.elementRef=e}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt))};static#t=this.\u0275dir=pt({type:t,selectors:[["","matAutocompleteOrigin",""]],exportAs:["matAutocompleteOrigin"],standalone:!0})}return t})();const Gze={provide:qi,useExisting:Cn(()=>Zv),multi:!0},pre=new st("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{const t=Je(Qs);return()=>t.scrollStrategies.reposition()}}),Hze={provide:pre,deps:[Qs],useFactory:function jze(t){return()=>t.scrollStrategies.reposition()}};let Zv=(()=>{class t{constructor(e,i,s,r,o,a,l,c,u,d,h){this._element=e,this._overlay=i,this._viewContainerRef=s,this._zone=r,this._changeDetectorRef=o,this._dir=l,this._formField=c,this._document=u,this._viewportRuler=d,this._defaults=h,this._componentDestroyed=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=Tn.EMPTY,this._breakpointObserver=Je(Zk),this._handsetLandscapeSubscription=Tn.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new Pt,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._initialized=new Pt,this._injector=Je(ti),this._aboveClass="mat-mdc-autocomplete-panel-above",this._overlayAttached=!1,this.optionSelections=Vd(()=>{const f=this.autocomplete?this.autocomplete.options:null;return f?f.changes.pipe(So(f),nn(()=>Zs(...f.map(p=>p.onSelectionChange)))):this._initialized.pipe(nn(()=>this.optionSelections))}),this._handlePanelKeydown=f=>{(27===f.keyCode&&!oa(f)||38===f.keyCode&&oa(f,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),f.stopPropagation(),f.preventDefault())},this._trackedModal=null,this._scrollStrategy=a}ngAfterViewInit(){this._initialized.next(),this._initialized.complete();const e=this._getWindow();typeof e<"u"&&this._zone.runOutsideAngular(()=>e.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const e=this._getWindow();typeof e<"u"&&e.removeEventListener("blur",this._windowBlurHandler),this._handsetLandscapeSubscription.unsubscribe(),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&Hv(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return Zs(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(an(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(an(()=>this._overlayAttached)):gt()).pipe(ze(e=>e instanceof Jie?e:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return Zs(Qh(this._document,"click"),Qh(this._document,"auxclick"),Qh(this._document,"touchend")).pipe(an(e=>{const i=id(e),s=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,r=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&i!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!s||!s.contains(i))&&(!r||!r.contains(i))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(i)}))}writeValue(e){Promise.resolve(null).then(()=>this._assignOptionValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){const i=e.keyCode,s=oa(e);if(27===i&&!s&&e.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&13===i&&this.panelOpen&&!s)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){const r=this.autocomplete._keyManager.activeItem,o=38===i||40===i;9===i||o&&!s&&this.panelOpen?this.autocomplete._keyManager.onKeydown(e):o&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(o||this.autocomplete._keyManager.activeItem!==r)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(e){let i=e.target,s=i.value;if("number"===i.type&&(s=""==s?null:parseFloat(s)),this._previousValue!==s){if(this._previousValue=s,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(s),s){if(this.panelOpen&&!this.autocomplete.requireSelection){const r=this.autocomplete.options?.find(o=>o.selected);r&&s!==this._getDisplayValue(r.value)&&r.deselect(!1)}}else this._clearPreviousSelectedOption(null,!1);if(this._canOpen()&&this._document.activeElement===e.target){const r=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(r)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_floatLabel(e=!1){this._formField&&"auto"===this._formField.floatLabel&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){return Zs(new es(s=>{Pl(()=>{s.next()},{injector:this._injector})}),this.autocomplete.options.changes.pipe(mi(()=>this._positionStrategy.reapplyLastPosition()),zv(0))).pipe(nn(()=>this._zone.run(()=>{const s=this.panelOpen;return this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),s!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit()),this.panelClosingActions})),ai(1)).subscribe(s=>this._setValueAndClose(s))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(e){const i=this.autocomplete;return i&&i.displayWith?i.displayWith(e):e}_assignOptionValue(e){const i=this._getDisplayValue(e);null==e&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(i??"")}_updateNativeInputValue(e){this._formField?this._formField._control.value=e:this._element.nativeElement.value=e,this._previousValue=e}_setValueAndClose(e){const i=this.autocomplete,s=e?e.source:this._pendingAutoselectedOption;s?(this._clearPreviousSelectedOption(s),this._assignOptionValue(s.value),this._onChange(s.value),i._emitSelectEvent(s),this._element.nativeElement.focus()):i.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),i._animationDone?i._animationDone.pipe(ai(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(e,i){this.autocomplete?.options?.forEach(s=>{s!==e&&s.selected&&s.deselect(i)})}_openPanelInternal(e=this._element.nativeElement.value){this._attachOverlay(e),this._floatLabel(),this._trackedModal&&Qk(this._trackedModal,"aria-owns",this.autocomplete.id)}_attachOverlay(e){let i=this._overlayRef;i?(this._positionStrategy.setOrigin(this._getConnectedElement()),i.updateSize({width:this._getPanelWidth()})):(this._portal=new R_(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),i=this._overlay.create(this._getOverlayConfig()),this._overlayRef=i,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&i&&i.updateSize({width:this._getPanelWidth()})}),this._handsetLandscapeSubscription=this._breakpointObserver.observe("(max-width: 959.98px) and (orientation: landscape)").subscribe(r=>{r.matches?this._positionStrategy.withFlexibleDimensions(!0).withGrowAfterOpen(!0).withViewportMargin(8):this._positionStrategy.withFlexibleDimensions(!1).withGrowAfterOpen(!1).withViewportMargin(0)})),i&&!i.hasAttached()&&(i.attach(this._portal),this._valueOnAttach=e,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());const s=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&s!==this.panelOpen&&this._emitOpened()}_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){const e=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=e.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=e.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new Xv({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){const i=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],s=this._aboveClass,r=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:s},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:s}];let o;o="above"===this.position?r:"below"===this.position?i:[...i,...r],e.withPositions(o)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const e=this.autocomplete;if(e.autoActiveFirstOption){let i=-1;for(let s=0;s<e.options.length;s++)if(!e.options.get(s).disabled){i=s;break}e._keyManager.setActiveItem(i)}else e._keyManager.setActiveItem(-1)}_canOpen(){const e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this.autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(e){const i=this.autocomplete,s=ese(e,i.options,i.optionGroups);if(0===e&&1===s)i._setScrollTop(0);else if(i.panel){const r=i.options.toArray()[e];if(r){const o=r._getHostElement(),a=tse(o.offsetTop,o.offsetHeight,i._getScrollTop(),i.panel.nativeElement.offsetHeight);i._setScrollTop(a)}}}_applyModalPanelOwnership(){const e=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;const i=this.autocomplete.id;this._trackedModal&&Hv(this._trackedModal,"aria-owns",i),Qk(e,"aria-owns",i),this._trackedModal=e}_clearFromModal(){this._trackedModal&&(Hv(this._trackedModal,"aria-owns",this.autocomplete.id),this._trackedModal=null)}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(Qs),D(Pr),D(Wt),D(bi),D(pre),D(xo,8),D(Yv,9),D(Zn,8),D(Kv),D(hre,8))};static#t=this.\u0275dir=pt({type:t,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(i,s){1&i&&te("focusin",function(){return s._handleFocus()})("blur",function(){return s._onTouched()})("input",function(o){return s._handleInput(o)})("keydown",function(o){return s._handleKeydown(o)})("click",function(){return s._handleClick()}),2&i&&$t("autocomplete",s.autocompleteAttribute)("role",s.autocompleteDisabled?null:"combobox")("aria-autocomplete",s.autocompleteDisabled?null:"list")("aria-activedescendant",s.panelOpen&&s.activeOption?s.activeOption.id:null)("aria-expanded",s.autocompleteDisabled?null:s.panelOpen.toString())("aria-controls",s.autocompleteDisabled||!s.panelOpen||null==s.autocomplete?null:s.autocomplete.id)("aria-haspopup",s.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[0,"matAutocomplete","autocomplete"],position:[0,"matAutocompletePosition","position"],connectedTo:[0,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[0,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[2,"matAutocompleteDisabled","autocompleteDisabled",Rt]},exportAs:["matAutocompleteTrigger"],standalone:!0,features:[Lt([Gze]),Ni,On]})}return t})(),Qv=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:[Hze],imports:[nf,uD,Ki,ka,L_,uD,Ki]})}return t})();const Wze=["mat-calendar-body",""];function qze(t,n){return this._trackRow(n)}const mre=(t,n)=>n.id;function Kze(t,n){if(1&t&&(m(0,"tr",0)(1,"td",3),C(2),_()()),2&t){const e=M();b(),Wn("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),$t("colspan",e.numCols),b(),xe(" ",e.label," ")}}function Xze(t,n){if(1&t&&(m(0,"td",3),C(1),_()),2&t){const e=M(2);Wn("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),$t("colspan",e._firstRowOffset),b(),xe(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function Yze(t,n){if(1&t){const e=Le();m(0,"td",6)(1,"button",7),te("click",function(s){const r=re(e).$implicit;return oe(M(2)._cellClicked(r,s))})("focus",function(s){const r=re(e).$implicit;return oe(M(2)._emitActiveDateChange(r,s))}),m(2,"span",8),C(3),_(),be(4,"span",9),_()()}if(2&t){const e=n.$implicit,i=n.$index,s=M().$index,r=M();Wn("width",r._cellWidth)("padding-top",r._cellPadding)("padding-bottom",r._cellPadding),$t("data-mat-row",s)("data-mat-col",i),b(),rt("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",r._isActiveCell(s,i))("mat-calendar-body-range-start",r._isRangeStart(e.compareValue))("mat-calendar-body-range-end",r._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",r._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",r._isComparisonBridgeStart(e.compareValue,s,i))("mat-calendar-body-comparison-bridge-end",r._isComparisonBridgeEnd(e.compareValue,s,i))("mat-calendar-body-comparison-start",r._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",r._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",r._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",r._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",r._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",r._isInPreview(e.compareValue)),S("ngClass",e.cssClasses)("tabindex",r._isActiveCell(s,i)?0:-1),$t("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-pressed",r._isSelected(e.compareValue))("aria-current",r.todayValue===e.compareValue?"date":null)("aria-describedby",r._getDescribedby(e.compareValue)),b(),rt("mat-calendar-body-selected",r._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",r._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",r.todayValue===e.compareValue),b(),xe(" ",e.displayValue," ")}}function Zze(t,n){if(1&t&&(m(0,"tr",1),K(1,Xze,2,6,"td",4),cv(2,Yze,5,48,"td",5,mre),_()),2&t){const e=n.$implicit,i=n.$index,s=M();b(),Vn(0===i&&s._firstRowOffset?1:-1),b(),uv(e)}}function Qze(t,n){if(1&t&&(m(0,"th",2)(1,"span",6),C(2),_(),m(3,"span",3),C(4),_()()),2&t){const e=n.$implicit;b(2),vt(e.long),b(2),vt(e.narrow)}}const Jze=["*"];function e7e(t,n){}function t7e(t,n){if(1&t){const e=Le();m(0,"mat-month-view",4),Gn("activeDateChange",function(s){re(e);const r=M();return Fn(r.activeDate,s)||(r.activeDate=s),oe(s)}),te("_userSelection",function(s){return re(e),oe(M()._dateSelected(s))})("dragStarted",function(s){return re(e),oe(M()._dragStarted(s))})("dragEnded",function(s){return re(e),oe(M()._dragEnded(s))}),_()}if(2&t){const e=M();Un("activeDate",e.activeDate),S("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)("startDateAccessibleName",e.startDateAccessibleName)("endDateAccessibleName",e.endDateAccessibleName)("activeDrag",e._activeDrag)}}function n7e(t,n){if(1&t){const e=Le();m(0,"mat-year-view",5),Gn("activeDateChange",function(s){re(e);const r=M();return Fn(r.activeDate,s)||(r.activeDate=s),oe(s)}),te("monthSelected",function(s){return re(e),oe(M()._monthSelectedInYearView(s))})("selectedChange",function(s){return re(e),oe(M()._goToDateInView(s,"month"))}),_()}if(2&t){const e=M();Un("activeDate",e.activeDate),S("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function i7e(t,n){if(1&t){const e=Le();m(0,"mat-multi-year-view",6),Gn("activeDateChange",function(s){re(e);const r=M();return Fn(r.activeDate,s)||(r.activeDate=s),oe(s)}),te("yearSelected",function(s){return re(e),oe(M()._yearSelectedInMultiYearView(s))})("selectedChange",function(s){return re(e),oe(M()._goToDateInView(s,"year"))}),_()}if(2&t){const e=M();Un("activeDate",e.activeDate),S("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function s7e(t,n){}const r7e=["button"],o7e=[[["","matDatepickerToggleIcon",""]]],a7e=["[matDatepickerToggleIcon]"];function l7e(t,n){1&t&&(ra(),m(0,"svg",2),be(1,"path",3),_())}let kS=(()=>{class t{constructor(){this.changes=new Pt,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(e,i){return`${e} \u2013 ${i}`}formatYearRangeLabel(e,i){return`${e} to ${i}`}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),c7e=0;class M8{constructor(n,e,i,s,r={},o=n,a){this.value=n,this.displayValue=e,this.ariaLabel=i,this.enabled=s,this.cssClasses=r,this.compareValue=o,this.rawValue=a,this.id=c7e++}}let u7e=1;const _re=jd({passive:!1,capture:!0}),Tp=jd({passive:!0,capture:!0}),xD=jd({passive:!0});let Jv=(()=>{class t{ngAfterViewChecked(){this._focusActiveCellAfterViewChecked&&(this._focusActiveCell(),this._focusActiveCellAfterViewChecked=!1)}constructor(e,i){this._elementRef=e,this._ngZone=i,this._platform=Je(js),this._focusActiveCellAfterViewChecked=!1,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new it,this.previewChange=new it,this.activeDateChange=new it,this.dragStarted=new it,this.dragEnded=new it,this._didDragSinceMouseDown=!1,this._injector=Je(ti),this._trackRow=s=>s,this._enterHandler=s=>{if(this._skipNextFocus&&"focus"===s.type)this._skipNextFocus=!1;else if(s.target&&this.isRange){const r=this._getCellFromElement(s.target);r&&this._ngZone.run(()=>this.previewChange.emit({value:r.enabled?r:null,event:s}))}},this._touchmoveHandler=s=>{if(!this.isRange)return;const r=gre(s),o=r?this._getCellFromElement(r):null;r!==s.target&&(this._didDragSinceMouseDown=!0),O8(s.target)&&s.preventDefault(),this._ngZone.run(()=>this.previewChange.emit({value:o?.enabled?o:null,event:s}))},this._leaveHandler=s=>{null!==this.previewEnd&&this.isRange&&("blur"!==s.type&&(this._didDragSinceMouseDown=!0),s.target&&this._getCellFromElement(s.target)&&(!s.relatedTarget||!this._getCellFromElement(s.relatedTarget))&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:s})))},this._mousedownHandler=s=>{if(!this.isRange)return;this._didDragSinceMouseDown=!1;const r=s.target&&this._getCellFromElement(s.target);!r||!this._isInRange(r.compareValue)||this._ngZone.run(()=>{this.dragStarted.emit({value:r.rawValue,event:s})})},this._mouseupHandler=s=>{if(!this.isRange)return;const r=O8(s.target);r?r.closest(".mat-calendar-body")===this._elementRef.nativeElement&&this._ngZone.run(()=>{const o=this._getCellFromElement(r);this.dragEnded.emit({value:o?.rawValue??null,event:s})}):this._ngZone.run(()=>{this.dragEnded.emit({value:null,event:s})})},this._touchendHandler=s=>{const r=gre(s);r&&this._mouseupHandler({target:r})},this._id="mat-calendar-body-"+u7e++,this._startDateLabelId=`${this._id}-start-date`,this._endDateLabelId=`${this._id}-end-date`,i.runOutsideAngular(()=>{const s=e.nativeElement;s.addEventListener("touchmove",this._touchmoveHandler,_re),s.addEventListener("mouseenter",this._enterHandler,Tp),s.addEventListener("focus",this._enterHandler,Tp),s.addEventListener("mouseleave",this._leaveHandler,Tp),s.addEventListener("blur",this._leaveHandler,Tp),s.addEventListener("mousedown",this._mousedownHandler,xD),s.addEventListener("touchstart",this._mousedownHandler,xD),this._platform.isBrowser&&(window.addEventListener("mouseup",this._mouseupHandler),window.addEventListener("touchend",this._touchendHandler))})}_cellClicked(e,i){this._didDragSinceMouseDown||e.enabled&&this.selectedValueChange.emit({value:e.value,event:i})}_emitActiveDateChange(e,i){e.enabled&&this.activeDateChange.emit({value:e.value,event:i})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){const i=e.numCols,{rows:s,numCols:r}=this;(e.rows||i)&&(this._firstRowOffset=s&&s.length&&s[0].length?r-s[0].length:0),(e.cellAspectRatio||i||!this._cellPadding)&&(this._cellPadding=50*this.cellAspectRatio/r+"%"),(i||!this._cellWidth)&&(this._cellWidth=100/r+"%")}ngOnDestroy(){const e=this._elementRef.nativeElement;e.removeEventListener("touchmove",this._touchmoveHandler,_re),e.removeEventListener("mouseenter",this._enterHandler,Tp),e.removeEventListener("focus",this._enterHandler,Tp),e.removeEventListener("mouseleave",this._leaveHandler,Tp),e.removeEventListener("blur",this._leaveHandler,Tp),e.removeEventListener("mousedown",this._mousedownHandler,xD),e.removeEventListener("touchstart",this._mousedownHandler,xD),this._platform.isBrowser&&(window.removeEventListener("mouseup",this._mouseupHandler),window.removeEventListener("touchend",this._touchendHandler))}_isActiveCell(e,i){let s=e*this.numCols+i;return e&&(s-=this._firstRowOffset),s==this.activeCell}_focusActiveCell(e=!0){Pl(()=>{setTimeout(()=>{const i=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");i&&(e||(this._skipNextFocus=!0),i.focus())})},{injector:this._injector})}_scheduleFocusActiveCellAfterViewChecked(){this._focusActiveCellAfterViewChecked=!0}_isRangeStart(e){return N8(e,this.startValue,this.endValue)}_isRangeEnd(e){return R8(e,this.startValue,this.endValue)}_isInRange(e){return F8(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return N8(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,i,s){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let r=this.rows[i][s-1];if(!r){const o=this.rows[i-1];r=o&&o[o.length-1]}return r&&!this._isRangeEnd(r.compareValue)}_isComparisonBridgeEnd(e,i,s){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let r=this.rows[i][s+1];if(!r){const o=this.rows[i+1];r=o&&o[0]}return r&&!this._isRangeStart(r.compareValue)}_isComparisonEnd(e){return R8(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return F8(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return N8(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return R8(e,this.previewStart,this.previewEnd)}_isInPreview(e){return F8(e,this.previewStart,this.previewEnd,this.isRange)}_getDescribedby(e){return this.isRange?this.startValue===e&&this.endValue===e?`${this._startDateLabelId} ${this._endDateLabelId}`:this.startValue===e?this._startDateLabelId:this.endValue===e?this._endDateLabelId:null:null}_getCellFromElement(e){const i=O8(e);if(i){const s=i.getAttribute("data-mat-row"),r=i.getAttribute("data-mat-col");if(s&&r)return this.rows[parseInt(s)][parseInt(r)]}return null}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(Wt))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange",activeDateChange:"activeDateChange",dragStarted:"dragStarted",dragEnded:"dragEnded"},exportAs:["matCalendarBody"],standalone:!0,features:[On,Ln],attrs:Wze,decls:7,vars:5,consts:[["aria-hidden","true"],["role","row"],[1,"mat-calendar-body-hidden-label",3,"id"],[1,"mat-calendar-body-label"],[1,"mat-calendar-body-label",3,"paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"click","focus","ngClass","tabindex"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(i,s){1&i&&(K(0,Kze,3,6,"tr",0),cv(1,Zze,4,1,"tr",1,qze,!0),m(3,"label",2),C(4),_(),m(5,"label",2),C(6),_()),2&i&&(Vn(s._firstRowOffset<s.labelMinRequiredCells?0:-1),b(),uv(s.rows),b(2),S("id",s._startDateLabelId),b(),xe(" ",s.startDateAccessibleName,"\n"),b(),S("id",s._endDateLabelId),b(),xe(" ",s.endDateAccessibleName,"\n"))},dependencies:[DI],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-outline-color)}.mat-calendar-body-label{height:0;line-height:0;text-align:start;padding-left:4.7142857143%;padding-right:4.7142857143%;font-size:var(--mat-datepicker-calendar-body-label-text-size);font-weight:var(--mat-datepicker-calendar-body-label-text-weight);color:var(--mat-datepicker-calendar-body-label-text-color)}.mat-calendar-body-hidden-label{display:none}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;display:block;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview{color:var(--mat-datepicker-calendar-date-preview-state-outline-color)}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-disabled>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){color:var(--mat-datepicker-calendar-date-disabled-state-text-color)}.mat-calendar-body-disabled>.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-disabled-state-outline-color)}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px;color:var(--mat-datepicker-calendar-date-text-color);border-color:var(--mat-datepicker-calendar-date-outline-color)}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-focus-state-background-color)}@media(hover: hover){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-hover-state-background-color)}}.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-state-background-color);color:var(--mat-datepicker-calendar-date-selected-state-text-color)}.mat-calendar-body-disabled>.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-disabled-state-background-color)}.mat-calendar-body-selected.mat-calendar-body-today{box-shadow:inset 0 0 0 1px var(--mat-datepicker-calendar-date-today-selected-state-outline-color)}.mat-calendar-body-in-range::before{background:var(--mat-datepicker-calendar-date-in-range-state-background-color)}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color)}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color)}.mat-calendar-body-comparison-bridge-start::before,[dir=rtl] .mat-calendar-body-comparison-bridge-end::before{background:linear-gradient(to right, var(--mat-datepicker-calendar-date-in-range-state-background-color) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color) 50%)}.mat-calendar-body-comparison-bridge-end::before,[dir=rtl] .mat-calendar-body-comparison-bridge-start::before{background:linear-gradient(to left, var(--mat-datepicker-calendar-date-in-range-state-background-color) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color) 50%)}.mat-calendar-body-in-range>.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range.mat-calendar-body-in-range::after{background:var(--mat-datepicker-calendar-date-in-overlap-range-state-background-color)}.mat-calendar-body-comparison-identical.mat-calendar-body-selected,.mat-calendar-body-in-comparison-range>.mat-calendar-body-selected{background:var(--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color)}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}'],encapsulation:2,changeDetection:0})}return t})();function A8(t){return"TD"===t?.nodeName}function O8(t){let n;return A8(t)?n=t:A8(t.parentNode)?n=t.parentNode:A8(t.parentNode?.parentNode)&&(n=t.parentNode.parentNode),null!=n?.getAttribute("data-mat-row")?n:null}function N8(t,n,e){return null!==e&&n!==e&&t<e&&t===n}function R8(t,n,e){return null!==n&&n!==e&&t>=n&&t===e}function F8(t,n,e,i){return i&&null!==n&&null!==e&&n!==e&&t>=n&&t<=e}function gre(t){const n=t.changedTouches[0];return document.elementFromPoint(n.clientX,n.clientY)}class bl{constructor(n,e){this.start=n,this.end=e}}let z_=(()=>{class t{constructor(e,i){this.selection=e,this._adapter=i,this._selectionChanged=new Pt,this.selectionChanged=this._selectionChanged,this.selection=e}updateSelection(e,i){const s=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:i,oldValue:s})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}static#e=this.\u0275fac=function(i){W0()};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})(),d7e=(()=>{class t extends z_{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return null!=this.selection&&this._isValidDateInstance(this.selection)}isComplete(){return null!=this.selection}clone(){const e=new t(this._adapter);return e.updateSelection(this.selection,this),e}static#e=this.\u0275fac=function(i){return new(i||t)(Re(gl))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})();const p7e={provide:z_,deps:[[new Id,new Rh,z_],gl],useFactory:function f7e(t,n){return t||new d7e(n)}},ED=new st("MAT_DATE_RANGE_SELECTION_STRATEGY");let b7e=0,bre=(()=>{class t{get activeDate(){return this._activeDate}set activeDate(e){const i=this._activeDate,s=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(s,this.minDate,this.maxDate),this._hasSameMonthAndYear(i,this._activeDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof bl?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}constructor(e,i,s,r,o){this._changeDetectorRef=e,this._dateFormats=i,this._dateAdapter=s,this._dir=r,this._rangeStrategy=o,this._rerenderSubscription=Tn.EMPTY,this.activeDrag=null,this.selectedChange=new it,this._userSelection=new it,this.dragStarted=new it,this.dragEnded=new it,this.activeDateChange=new it,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(So(null)).subscribe(()=>this._init())}ngOnChanges(e){const i=e.comparisonStart||e.comparisonEnd;i&&!i.firstChange&&this._setRanges(this.selected),e.activeDrag&&!this.activeDrag&&this._clearPreview()}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){const i=e.value,s=this._getDateFromDayOfMonth(i);let r,o;this._selected instanceof bl?(r=this._getDateInCurrentMonth(this._selected.start),o=this._getDateInCurrentMonth(this._selected.end)):r=o=this._getDateInCurrentMonth(this._selected),(r!==i||o!==i)&&this.selectedChange.emit(s),this._userSelection.emit({value:s,event:e.event}),this._clearPreview(),this._changeDetectorRef.markForCheck()}_updateActiveDate(e){const s=this._activeDate;this.activeDate=this._getDateFromDayOfMonth(e.value),this._dateAdapter.compareDate(s,this.activeDate)&&this.activeDateChange.emit(this._activeDate)}_handleCalendarBodyKeydown(e){const i=this._activeDate,s=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,s?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,s?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:return this._selectionKeyPressed=!0,void(this._canSelect(this._activeDate)&&e.preventDefault());case 27:return void(null!=this._previewEnd&&!oa(e)&&(this._clearPreview(),this.activeDrag?this.dragEnded.emit({value:null,event:e}):(this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e})),e.preventDefault(),e.stopPropagation()));default:return}this._dateAdapter.compareDate(i,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_previewChanged({event:e,value:i}){if(this._rangeStrategy){const s=i?i.rawValue:null,r=this._rangeStrategy.createPreview(s,this.selected,e);if(this._previewStart=this._getCellCompareValue(r.start),this._previewEnd=this._getCellCompareValue(r.end),this.activeDrag&&s){const o=this._rangeStrategy.createDrag?.(this.activeDrag.value,this.selected,s,e);o&&(this._previewStart=this._getCellCompareValue(o.start),this._previewEnd=this._getCellCompareValue(o.end))}this._changeDetectorRef.detectChanges()}}_dragEnded(e){if(this.activeDrag)if(e.value){const i=this._rangeStrategy?.createDrag?.(this.activeDrag.value,this.selected,e.value,e.event);this.dragEnded.emit({value:i??null,event:e.event})}else this.dragEnded.emit({value:null,event:e.event})}_getDateFromDayOfMonth(e){return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),e)}_initWeekdays(){const e=this._dateAdapter.getFirstDayOfWeek(),i=this._dateAdapter.getDayOfWeekNames("narrow");let r=this._dateAdapter.getDayOfWeekNames("long").map((o,a)=>({long:o,narrow:i[a],id:b7e++}));this._weekdays=r.slice(e).concat(r.slice(0,e))}_createWeekCells(){const e=this._dateAdapter.getNumDaysInMonth(this.activeDate),i=this._dateAdapter.getDateNames();this._weeks=[[]];for(let s=0,r=this._firstWeekOffset;s<e;s++,r++){7==r&&(this._weeks.push([]),r=0);const o=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),s+1),a=this._shouldEnableDate(o),l=this._dateAdapter.format(o,this._dateFormats.display.dateA11yLabel),c=this.dateClass?this.dateClass(o,"month"):void 0;this._weeks[this._weeks.length-1].push(new M8(s+1,i[s],l,a,c,this._getCellCompareValue(o),o))}}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,i){return!(!e||!i||this._dateAdapter.getMonth(e)!=this._dateAdapter.getMonth(i)||this._dateAdapter.getYear(e)!=this._dateAdapter.getYear(i))}_getCellCompareValue(e){if(e){const i=this._dateAdapter.getYear(e),s=this._dateAdapter.getMonth(e),r=this._dateAdapter.getDate(e);return new Date(i,s,r).getTime()}return null}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setRanges(e){e instanceof bl?(this._rangeStart=this._getCellCompareValue(e.start),this._rangeEnd=this._getCellCompareValue(e.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(e),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(e){return!this.dateFilter||this.dateFilter(e)}_clearPreview(){this._previewStart=this._previewEnd=null}static#e=this.\u0275fac=function(i){return new(i||t)(D(bi),D(O_,8),D(gl,8),D(xo,8),D(ED,8))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-month-view"]],viewQuery:function(i,s){if(1&i&&Zt(Jv,5),2&i){let r;xt(r=Et())&&(s._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName",activeDrag:"activeDrag"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",dragStarted:"dragStarted",dragEnded:"dragEnded",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],standalone:!0,features:[On,Ln],decls:8,vars:14,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col"],["aria-hidden","true"],["colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","previewChange","dragStarted","dragEnded","keyup","keydown","label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","startDateAccessibleName","endDateAccessibleName"],[1,"cdk-visually-hidden"]],template:function(i,s){1&i&&(m(0,"table",0)(1,"thead",1)(2,"tr"),cv(3,Qze,5,2,"th",2,mre),_(),m(5,"tr",3),be(6,"th",4),_()(),m(7,"tbody",5),te("selectedValueChange",function(o){return s._dateSelected(o)})("activeDateChange",function(o){return s._updateActiveDate(o)})("previewChange",function(o){return s._previewChanged(o)})("dragStarted",function(o){return s.dragStarted.emit(o)})("dragEnded",function(o){return s._dragEnded(o)})("keyup",function(o){return s._handleCalendarBodyKeyup(o)})("keydown",function(o){return s._handleCalendarBodyKeydown(o)}),_()()),2&i&&(b(3),uv(s._weekdays),b(4),S("label",s._monthLabel)("rows",s._weeks)("todayValue",s._todayDate)("startValue",s._rangeStart)("endValue",s._rangeEnd)("comparisonStart",s._comparisonRangeStart)("comparisonEnd",s._comparisonRangeEnd)("previewStart",s._previewStart)("previewEnd",s._previewEnd)("isRange",s._isRange)("labelMinRequiredCells",3)("activeCell",s._dateAdapter.getDate(s.activeDate)-1)("startDateAccessibleName",s.startDateAccessibleName)("endDateAccessibleName",s.endDateAccessibleName))},dependencies:[Jv],encapsulation:2,changeDetection:0})}return t})();const Ic=24;let vre=(()=>{class t{get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate;const s=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(s,this.minDate,this.maxDate),yre(this._dateAdapter,i,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof bl?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}constructor(e,i,s){this._changeDetectorRef=e,this._dateAdapter=i,this._dir=s,this._rerenderSubscription=Tn.EMPTY,this.selectedChange=new it,this.yearSelected=new it,this.activeDateChange=new it,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(So(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const i=this._dateAdapter.getYear(this._activeDate)-DS(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let s=0,r=[];s<Ic;s++)r.push(i+s),4==r.length&&(this._years.push(r.map(o=>this._createCellForYear(o))),r=[]);this._changeDetectorRef.markForCheck()}_yearSelected(e){const i=e.value,s=this._dateAdapter.createDate(i,0,1),r=this._getDateFromYear(i);this.yearSelected.emit(s),this.selectedChange.emit(r)}_updateActiveDate(e){const s=this._activeDate;this.activeDate=this._getDateFromYear(e.value),this._dateAdapter.compareDate(s,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){const i=this._activeDate,s=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,s?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,s?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-DS(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,Ic-DS(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10*-Ic:-Ic);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10*Ic:Ic);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_getActiveCell(){return DS(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getDateFromYear(e){const i=this._dateAdapter.getMonth(this.activeDate),s=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(e,i,1));return this._dateAdapter.createDate(e,i,Math.min(this._dateAdapter.getDate(this.activeDate),s))}_createCellForYear(e){const i=this._dateAdapter.createDate(e,0,1),s=this._dateAdapter.getYearName(i),r=this.dateClass?this.dateClass(i,"multi-year"):void 0;return new M8(e,s,s,this._shouldEnableYear(e),r)}_shouldEnableYear(e){if(null==e||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let s=this._dateAdapter.createDate(e,0,1);this._dateAdapter.getYear(s)==e;s=this._dateAdapter.addCalendarDays(s,1))if(this.dateFilter(s))return!0;return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedYear(e){if(this._selectedYear=null,e instanceof bl){const i=e.start||e.end;i&&(this._selectedYear=this._dateAdapter.getYear(i))}else e&&(this._selectedYear=this._dateAdapter.getYear(e))}static#e=this.\u0275fac=function(i){return new(i||t)(D(bi),D(gl,8),D(xo,8))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-multi-year-view"]],viewQuery:function(i,s){if(1&i&&Zt(Jv,5),2&i){let r;xt(r=Et())&&(s._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],standalone:!0,features:[Ln],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell"]],template:function(i,s){1&i&&(m(0,"table",0)(1,"thead",1)(2,"tr"),be(3,"th",2),_()(),m(4,"tbody",3),te("selectedValueChange",function(o){return s._yearSelected(o)})("activeDateChange",function(o){return s._updateActiveDate(o)})("keyup",function(o){return s._handleCalendarBodyKeyup(o)})("keydown",function(o){return s._handleCalendarBodyKeydown(o)}),_()()),2&i&&(b(4),S("rows",s._years)("todayValue",s._todayYear)("startValue",s._selectedYear)("endValue",s._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",s._getActiveCell()))},dependencies:[Jv],encapsulation:2,changeDetection:0})}return t})();function yre(t,n,e,i,s){const r=t.getYear(n),o=t.getYear(e),a=wre(t,i,s);return Math.floor((r-a)/Ic)===Math.floor((o-a)/Ic)}function DS(t,n,e,i){return function v7e(t,n){return(t%n+n)%n}(t.getYear(n)-wre(t,e,i),Ic)}function wre(t,n,e){let i=0;return e?i=t.getYear(e)-Ic+1:n&&(i=t.getYear(n)),i}let Sre=(()=>{class t{get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate;const s=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(s,this.minDate,this.maxDate),this._dateAdapter.getYear(i)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof bl?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}constructor(e,i,s,r){this._changeDetectorRef=e,this._dateFormats=i,this._dateAdapter=s,this._dir=r,this._rerenderSubscription=Tn.EMPTY,this.selectedChange=new it,this.monthSelected=new it,this.activeDateChange=new it,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(So(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){const i=e.value,s=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),i,1);this.monthSelected.emit(s);const r=this._getDateFromMonth(i);this.selectedChange.emit(r)}_updateActiveDate(e){const s=this._activeDate;this.activeDate=this._getDateFromMonth(e.value),this._dateAdapter.compareDate(s,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){const i=this._activeDate,s=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,s?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,s?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(i=>i.map(s=>this._createCellForMonth(s,e[s]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_getDateFromMonth(e){const i=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),s=this._dateAdapter.getNumDaysInMonth(i);return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,Math.min(this._dateAdapter.getDate(this.activeDate),s))}_createCellForMonth(e,i){const s=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),r=this._dateAdapter.format(s,this._dateFormats.display.monthYearA11yLabel),o=this.dateClass?this.dateClass(s,"year"):void 0;return new M8(e,i.toLocaleUpperCase(),r,this._shouldEnableMonth(e),o)}_shouldEnableMonth(e){const i=this._dateAdapter.getYear(this.activeDate);if(null==e||this._isYearAndMonthAfterMaxDate(i,e)||this._isYearAndMonthBeforeMinDate(i,e))return!1;if(!this.dateFilter)return!0;for(let r=this._dateAdapter.createDate(i,e,1);this._dateAdapter.getMonth(r)==e;r=this._dateAdapter.addCalendarDays(r,1))if(this.dateFilter(r))return!0;return!1}_isYearAndMonthAfterMaxDate(e,i){if(this.maxDate){const s=this._dateAdapter.getYear(this.maxDate),r=this._dateAdapter.getMonth(this.maxDate);return e>s||e===s&&i>r}return!1}_isYearAndMonthBeforeMinDate(e,i){if(this.minDate){const s=this._dateAdapter.getYear(this.minDate),r=this._dateAdapter.getMonth(this.minDate);return e<s||e===s&&i<r}return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedMonth(e){this._selectedMonth=e instanceof bl?this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end):this._getMonthInCurrentYear(e)}static#e=this.\u0275fac=function(i){return new(i||t)(D(bi),D(O_,8),D(gl,8),D(xo,8))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-year-view"]],viewQuery:function(i,s){if(1&i&&Zt(Jv,5),2&i){let r;xt(r=Et())&&(s._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],standalone:!0,features:[Ln],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell"]],template:function(i,s){1&i&&(m(0,"table",0)(1,"thead",1)(2,"tr"),be(3,"th",2),_()(),m(4,"tbody",3),te("selectedValueChange",function(o){return s._monthSelected(o)})("activeDateChange",function(o){return s._updateActiveDate(o)})("keyup",function(o){return s._handleCalendarBodyKeyup(o)})("keydown",function(o){return s._handleCalendarBodyKeydown(o)}),_()()),2&i&&(b(4),S("label",s._yearLabel)("rows",s._months)("todayValue",s._todayMonth)("startValue",s._selectedMonth)("endValue",s._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",s._dateAdapter.getMonth(s.activeDate)))},dependencies:[Jv],encapsulation:2,changeDetection:0})}return t})(),y7e=1,Cre=(()=>{class t{constructor(e,i,s,r,o){this._intl=e,this.calendar=i,this._dateAdapter=s,this._dateFormats=r,this._id="mat-calendar-header-"+y7e++,this._periodButtonLabelId=`${this._id}-period-label`,this.calendar.stateChanges.subscribe(()=>o.markForCheck())}get periodButtonText(){return"month"==this.calendar.currentView?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():"year"==this.calendar.currentView?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRange(...this._formatMinAndMaxYearLabels())}get periodButtonDescription(){return"month"==this.calendar.currentView?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():"year"==this.calendar.currentView?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRangeLabel(...this._formatMinAndMaxYearLabels())}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-Ic)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:Ic)}previousEnabled(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(e,i){return"month"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(i):"year"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i):yre(this._dateAdapter,e,i,this.calendar.minDate,this.calendar.maxDate)}_formatMinAndMaxYearLabels(){const i=this._dateAdapter.getYear(this.calendar.activeDate)-DS(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),s=i+Ic-1;return[this._dateAdapter.getYearName(this._dateAdapter.createDate(i,0,1)),this._dateAdapter.getYearName(this._dateAdapter.createDate(s,0,1))]}static#e=this.\u0275fac=function(i){return new(i||t)(D(kS),D(Cn(()=>$8)),D(gl,8),D(O_,8),D(bi))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],standalone:!0,features:[Ln],ngContentSelectors:Jze,decls:13,vars:11,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["aria-live","polite",1,"cdk-visually-hidden",3,"id"],["mat-button","","type","button",1,"mat-calendar-period-button",3,"click"],["aria-hidden","true"],["viewBox","0 0 10 5","focusable","false","aria-hidden","true",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"click","disabled"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"click","disabled"]],template:function(i,s){1&i&&(Ti(),m(0,"div",0)(1,"div",1)(2,"label",2),C(3),_(),m(4,"button",3),te("click",function(){return s.currentPeriodClicked()}),m(5,"span",4),C(6),_(),ra(),m(7,"svg",5),be(8,"polygon",6),_()(),qf(),be(9,"div",7),un(10),m(11,"button",8),te("click",function(){return s.previousClicked()}),_(),m(12,"button",9),te("click",function(){return s.nextClicked()}),_()()()),2&i&&(b(2),S("id",s._periodButtonLabelId),b(),vt(s.periodButtonDescription),b(),$t("aria-label",s.periodButtonLabel)("aria-describedby",s._periodButtonLabelId),b(2),vt(s.periodButtonText),b(),rt("mat-calendar-invert","month"!==s.calendar.currentView),b(4),S("disabled",!s.previousEnabled()),$t("aria-label",s.prevButtonLabel),b(),S("disabled",!s.nextEnabled()),$t("aria-label",s.nextButtonLabel))},dependencies:[u8,d8],encapsulation:2,changeDetection:0})}return t})(),$8=(()=>{class t{get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get selected(){return this._selected}set selected(e){this._selected=e instanceof bl?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(e){const i=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),i&&this.viewChanged.emit(i)}constructor(e,i,s,r){this._dateAdapter=i,this._dateFormats=s,this._changeDetectorRef=r,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new it,this.yearSelected=new it,this.monthSelected=new it,this.viewChanged=new it(!0),this._userSelection=new it,this._userDragDrop=new it,this._activeDrag=null,this.stateChanges=new Pt,this._intlChanges=e.changes.subscribe(()=>{r.markForCheck(),this.stateChanges.next()})}ngAfterContentInit(){this._calendarHeaderPortal=new N_(this.headerComponent||Cre),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){const i=e.minDate&&!this._dateAdapter.sameDate(e.minDate.previousValue,e.minDate.currentValue)?e.minDate:void 0,s=e.maxDate&&!this._dateAdapter.sameDate(e.maxDate.previousValue,e.maxDate.currentValue)?e.maxDate:void 0,r=i||s||e.dateFilter;if(r&&!r.firstChange){const o=this._getCurrentViewComponent();o&&(this._moveFocusOnNextTick=!0,this._changeDetectorRef.detectChanges(),o._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(e){const i=e.value;(this.selected instanceof bl||i&&!this._dateAdapter.sameDate(i,this.selected))&&this.selectedChange.emit(i),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,i){this.activeDate=e,this.currentView=i}_dragStarted(e){this._activeDrag=e}_dragEnded(e){this._activeDrag&&(e.value&&this._userDragDrop.emit(e),this._activeDrag=null)}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}static#e=this.\u0275fac=function(i){return new(i||t)(D(kS),D(gl,8),D(O_,8),D(bi))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-calendar"]],viewQuery:function(i,s){if(1&i&&(Zt(bre,5),Zt(Sre,5),Zt(vre,5)),2&i){let r;xt(r=Et())&&(s.monthView=r.first),xt(r=Et())&&(s.yearView=r.first),xt(r=Et())&&(s.multiYearView=r.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection",_userDragDrop:"_userDragDrop"},exportAs:["matCalendar"],standalone:!0,features:[Lt([p7e]),On,Ln],decls:5,vars:2,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","_userSelection","dragStarted","dragEnded","activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDateChange","monthSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","yearSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"]],template:function(i,s){if(1&i&&(K(0,e7e,0,0,"ng-template",0),m(1,"div",1),K(2,t7e,1,11,"mat-month-view",2)(3,n7e,1,6,"mat-year-view",3)(4,i7e,1,6,"mat-multi-year-view",3),_()),2&i){let r;S("cdkPortalOutlet",s._calendarHeaderPortal),b(2),Vn("month"===(r=s.currentView)?2:"year"===r?3:"multi-year"===r?4:-1)}},dependencies:[xp,TBe,bre,Sre,vre],styles:['.mat-calendar{display:block;font-family:var(--mat-datepicker-calendar-text-font);font-size:var(--mat-datepicker-calendar-text-size)}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;align-items:center;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0;margin:0 8px;font-size:var(--mat-datepicker-calendar-period-button-text-size);font-weight:var(--mat-datepicker-calendar-period-button-text-weight);--mdc-text-button-label-text-color:var(--mat-datepicker-calendar-period-button-text-color)}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle;fill:var(--mat-datepicker-calendar-period-button-icon-color)}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.cdk-high-contrast-active .mat-calendar-arrow{fill:CanvasText}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-datepicker-content .mat-calendar-previous-button:not(.mat-mdc-button-disabled),.mat-datepicker-content .mat-calendar-next-button:not(.mat-mdc-button-disabled){color:var(--mat-datepicker-calendar-navigation-button-icon-color)}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0;color:var(--mat-datepicker-calendar-header-text-color);font-size:var(--mat-datepicker-calendar-header-text-size);font-weight:var(--mat-datepicker-calendar-header-text-weight)}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px;background:var(--mat-datepicker-calendar-header-divider-color)}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return t})();const xre={transformPanel:wo("transformPanel",[us("void => enter-dropdown",bs("120ms cubic-bezier(0, 0, 0.2, 1)",Sv([Sn({opacity:0,transform:"scale(1, 0.8)"}),Sn({opacity:1,transform:"scale(1, 1)"})]))),us("void => enter-dialog",bs("150ms cubic-bezier(0, 0, 0.2, 1)",Sv([Sn({opacity:0,transform:"scale(0.7)"}),Sn({transform:"none",opacity:1})]))),us("* => void",bs("100ms linear",Sn({opacity:0})))]),fadeInCalendar:wo("fadeInCalendar",[Gs("void",Sn({opacity:0})),Gs("enter",Sn({opacity:1})),us("void => *",bs("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])},w7e=new st("mat-datepicker-scroll-strategy",{providedIn:"root",factory:()=>{const t=Je(Qs);return()=>t.scrollStrategies.reposition()}}),C7e={provide:w7e,deps:[Qs],useFactory:function S7e(t){return()=>t.scrollStrategies.reposition()}};let x7e=(()=>{class t{constructor(e,i,s,r,o,a){this._elementRef=e,this._changeDetectorRef=i,this._globalModel=s,this._dateAdapter=r,this._rangeSelectionStrategy=o,this._subscriptions=new Tn,this._animationDone=new Pt,this._isAnimating=!1,this._actionsPortal=null,this._closeButtonText=a.closeCalendarLabel}ngOnInit(){this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(e){const i=this._model.selection,s=e.value,r=i instanceof bl;if(r&&this._rangeSelectionStrategy){const o=this._rangeSelectionStrategy.selectionFinished(s,i,e.event);this._model.updateSelection(o,this)}else s&&(r||!this._dateAdapter.sameDate(s,i))&&this._model.add(s);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_handleUserDragDrop(e){this._model.updateSelection(e.value,this)}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_handleAnimationEvent(e){this._isAnimating="start"===e.phaseName,this._isAnimating||this._animationDone.next()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}_assignActions(e,i){this._model=e?this._globalModel.clone():this._globalModel,this._actionsPortal=e,i&&this._changeDetectorRef.detectChanges()}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(bi),D(z_),D(gl),D(ED,8),D(kS))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-datepicker-content"]],viewQuery:function(i,s){if(1&i&&Zt($8,5),2&i){let r;xt(r=Et())&&(s._calendar=r.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:5,hostBindings:function(i,s){1&i&&ww("@transformPanel.start",function(o){return s._handleAnimationEvent(o)})("@transformPanel.done",function(o){return s._handleAnimationEvent(o)}),2&i&&(mw("@transformPanel",s._animationState),bo(s.color?"mat-"+s.color:""),rt("mat-datepicker-content-touch",s.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],standalone:!0,features:[Ln],decls:5,vars:27,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"yearSelected","monthSelected","viewChanged","_userSelection","_userDragDrop","id","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"focus","blur","click","color"]],template:function(i,s){if(1&i&&(m(0,"div",0)(1,"mat-calendar",1),te("yearSelected",function(o){return s.datepicker._selectYear(o)})("monthSelected",function(o){return s.datepicker._selectMonth(o)})("viewChanged",function(o){return s.datepicker._viewChanged(o)})("_userSelection",function(o){return s._handleUserSelection(o)})("_userDragDrop",function(o){return s._handleUserDragDrop(o)}),_(),K(2,s7e,0,0,"ng-template",2),m(3,"button",3),te("focus",function(){return s._closeButtonFocused=!0})("blur",function(){return s._closeButtonFocused=!1})("click",function(){return s.datepicker.close()}),C(4),_()()),2&i){let r;rt("mat-datepicker-content-container-with-custom-header",s.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",s._actionsPortal),$t("aria-modal",!0)("aria-labelledby",null!==(r=s._dialogLabelId)&&void 0!==r?r:void 0),b(),bo(s.datepicker.panelClass),S("id",s.datepicker.id)("startAt",s.datepicker.startAt)("startView",s.datepicker.startView)("minDate",s.datepicker._getMinDate())("maxDate",s.datepicker._getMaxDate())("dateFilter",s.datepicker._getDateFilter())("headerComponent",s.datepicker.calendarHeaderComponent)("selected",s._getSelected())("dateClass",s.datepicker.dateClass)("comparisonStart",s.comparisonStart)("comparisonEnd",s.comparisonEnd)("@fadeInCalendar","enter")("startDateAccessibleName",s.startDateAccessibleName)("endDateAccessibleName",s.endDateAccessibleName),b(),S("cdkPortalOutlet",s._actionsPortal),b(),rt("cdk-visually-hidden",!s._closeButtonFocused),S("color",s.color||"primary"),b(),vt(s._closeButtonText)}},dependencies:[gBe,$8,xp,u8],styles:[".mat-datepicker-content{display:block;border-radius:4px;background-color:var(--mat-datepicker-calendar-container-background-color);color:var(--mat-datepicker-calendar-container-text-color);box-shadow:var(--mat-datepicker-calendar-container-elevation-shadow);border-radius:var(--mat-datepicker-calendar-container-shape)}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;box-shadow:var(--mat-datepicker-calendar-container-touch-elevation-shadow);border-radius:var(--mat-datepicker-calendar-container-touch-shape);position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}"],encapsulation:2,data:{animation:[xre.transformPanel,xre.fadeInCalendar]},changeDetection:0})}return t})(),D7e=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=pt({type:t,selectors:[["","matDatepickerToggleIcon",""]],standalone:!0})}return t})(),M7e=(()=>{class t{get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(e){this._disabled=e}constructor(e,i,s){this._intl=e,this._changeDetectorRef=i,this._stateChanges=Tn.EMPTY;const r=Number(s);this.tabIndex=r||0===r?r:null}ngOnChanges(e){e.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())}_watchStateChanges(){const e=this.datepicker?this.datepicker.stateChanges:gt(),i=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:gt(),s=this.datepicker?Zs(this.datepicker.openedStream,this.datepicker.closedStream):gt();this._stateChanges.unsubscribe(),this._stateChanges=Zs(this._intl.changes,e,i,s).subscribe(()=>this._changeDetectorRef.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||t)(D(kS),D(bi),ll("tabindex"))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-datepicker-toggle"]],contentQueries:function(i,s,r){if(1&i&&Li(r,D7e,5),2&i){let o;xt(o=Et())&&(s._customIcon=o.first)}},viewQuery:function(i,s){if(1&i&&Zt(r7e,5),2&i){let r;xt(r=Et())&&(s._button=r.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(i,s){1&i&&te("click",function(o){return s._open(o)}),2&i&&($t("tabindex",null)("data-mat-calendar",s.datepicker?s.datepicker.id:null),rt("mat-datepicker-toggle-active",s.datepicker&&s.datepicker.opened)("mat-accent",s.datepicker&&"accent"===s.datepicker.color)("mat-warn",s.datepicker&&"warn"===s.datepicker.color))},inputs:{datepicker:[0,"for","datepicker"],tabIndex:"tabIndex",ariaLabel:[0,"aria-label","ariaLabel"],disabled:[2,"disabled","disabled",Rt],disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],standalone:!0,features:[Ni,On,Ln],ngContentSelectors:a7e,decls:4,vars:6,consts:[["button",""],["mat-icon-button","","type","button",3,"disabled","disableRipple"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false","aria-hidden","true",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(i,s){1&i&&(Ti(o7e),m(0,"button",1,0),K(2,l7e,2,0,":svg:svg",2),un(3),_()),2&i&&(S("disabled",s.disabled)("disableRipple",s.disableRipple),$t("aria-haspopup",s.datepicker?"dialog":null)("aria-label",s.ariaLabel||s._intl.openCalendarLabel)("tabindex",s.disabled?-1:s.tabIndex),b(2),Vn(s._customIcon?-1:2))},dependencies:[d8],styles:[".mat-datepicker-toggle{pointer-events:auto;color:var(--mat-datepicker-toggle-icon-color)}.mat-datepicker-toggle-active{color:var(--mat-datepicker-toggle-active-state-icon-color)}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}"],encapsulation:2,changeDetection:0})}return t})(),ID=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:[kS,C7e],imports:[ka,qv,nf,s8,Wd,Ki,x7e,M7e,Cre,L_]})}return t})();const Ire=["*",[["mat-chip-avatar"],["","matChipAvatar",""]],[["mat-chip-trailing-icon"],["","matChipRemove",""],["","matChipTrailingIcon",""]]],kre=["*","mat-chip-avatar, [matChipAvatar]","mat-chip-trailing-icon,[matChipRemove],[matChipTrailingIcon]"];function N7e(t,n){1&t&&(m(0,"span",3),un(1,1),_())}function R7e(t,n){1&t&&(m(0,"span",6),un(1,2),_())}const P7e=[[["mat-chip-avatar"],["","matChipAvatar",""]],[["","matChipEditInput",""]],"*",[["mat-chip-trailing-icon"],["","matChipRemove",""],["","matChipTrailingIcon",""]]],$7e=["mat-chip-avatar, [matChipAvatar]","[matChipEditInput]","*","mat-chip-trailing-icon,[matChipRemove],[matChipTrailingIcon]"];function B7e(t,n){1&t&&be(0,"span",0)}function V7e(t,n){1&t&&(m(0,"span",2),un(1),_())}function z7e(t,n){1&t&&un(0,1)}function U7e(t,n){1&t&&be(0,"span",7)}function G7e(t,n){1&t&&K(0,z7e,1,0)(1,U7e,1,0,"span",7),2&t&&Vn(M().contentEditInput?0:1)}function j7e(t,n){1&t&&un(0,2)}function H7e(t,n){1&t&&(m(0,"span",5),un(1,3),_())}const V8=["*"],kD=new st("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})}),z8=new st("MatChipAvatar"),U8=new st("MatChipTrailingIcon"),G8=new st("MatChipRemove"),DD=new st("MatChip");let ey=(()=>{class t{get disabled(){return this._disabled||this._parentChip.disabled}set disabled(e){this._disabled=e}_getDisabledAttribute(){return this.disabled&&!this._allowFocusWhenDisabled?"":null}_getTabindex(){return this.disabled&&!this._allowFocusWhenDisabled||!this.isInteractive?null:this.tabIndex.toString()}constructor(e,i){this._elementRef=e,this._parentChip=i,this.isInteractive=!0,this._isPrimary=!0,this._disabled=!1,this.tabIndex=-1,this._allowFocusWhenDisabled=!1,"BUTTON"===e.nativeElement.nodeName&&e.nativeElement.setAttribute("type","button")}focus(){this._elementRef.nativeElement.focus()}_handleClick(e){!this.disabled&&this.isInteractive&&this._isPrimary&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!this.disabled&&this.isInteractive&&this._isPrimary&&!this._parentChip._isEditing&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(DD))};static#t=this.\u0275dir=pt({type:t,selectors:[["","matChipAction",""]],hostAttrs:[1,"mdc-evolution-chip__action","mat-mdc-chip-action"],hostVars:9,hostBindings:function(i,s){1&i&&te("click",function(o){return s._handleClick(o)})("keydown",function(o){return s._handleKeydown(o)}),2&i&&($t("tabindex",s._getTabindex())("disabled",s._getDisabledAttribute())("aria-disabled",s.disabled),rt("mdc-evolution-chip__action--primary",s._isPrimary)("mdc-evolution-chip__action--presentational",!s.isInteractive)("mdc-evolution-chip__action--trailing",!s._isPrimary))},inputs:{isInteractive:"isInteractive",disabled:[2,"disabled","disabled",Rt],tabIndex:[2,"tabIndex","tabIndex",e=>null==e?-1:Dr(e)],_allowFocusWhenDisabled:"_allowFocusWhenDisabled"},standalone:!0,features:[Ni]})}return t})(),MD=(()=>{class t extends ey{constructor(){super(...arguments),this._isPrimary=!1}_handleClick(e){this.disabled||(e.stopPropagation(),e.preventDefault(),this._parentChip.remove())}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!this.disabled&&(e.stopPropagation(),e.preventDefault(),this._parentChip.remove())}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=Pn(t)))(s||t)}})();static#t=this.\u0275dir=pt({type:t,selectors:[["","matChipRemove",""]],hostAttrs:["role","button",1,"mat-mdc-chip-remove","mat-mdc-chip-trailing-icon","mat-mdc-focus-indicator","mdc-evolution-chip__icon","mdc-evolution-chip__icon--trailing"],hostVars:1,hostBindings:function(i,s){2&i&&$t("aria-hidden",null)},standalone:!0,features:[Lt([{provide:G8,useExisting:t}]),bt]})}return t})(),K7e=0,ty=(()=>{class t{_hasFocus(){return this._hasFocusInternal}get value(){return void 0!==this._value?this._value:this._textElement.textContent.trim()}set value(e){this._value=e}get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}constructor(e,i,s,r,o,a,l,c){this._changeDetectorRef=e,this._elementRef=i,this._ngZone=s,this._focusMonitor=r,this._globalRippleOptions=l,this._onFocus=new Pt,this._onBlur=new Pt,this.role=null,this._hasFocusInternal=!1,this.id="mat-mdc-chip-"+K7e++,this.ariaLabel=null,this.ariaDescription=null,this._ariaDescriptionId=`${this.id}-aria-description`,this.removable=!0,this.highlighted=!1,this.disableRipple=!1,this.disabled=!1,this.tabIndex=-1,this.removed=new it,this.destroyed=new it,this.basicChipAttrName="mat-basic-chip",this._rippleLoader=Je(rse),this._injector=Je(ti),this._document=o,this._animationsDisabled="NoopAnimations"===a,null!=c&&(this.tabIndex=parseInt(c)??-1),this._monitorFocus(),this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-chip-ripple",disabled:this._isRippleDisabled()})}ngOnInit(){const e=this._elementRef.nativeElement;this._isBasicChip=e.hasAttribute(this.basicChipAttrName)||e.tagName.toLowerCase()===this.basicChipAttrName}ngAfterViewInit(){this._textElement=this._elementRef.nativeElement.querySelector(".mat-mdc-chip-action-label"),this._pendingFocus&&(this._pendingFocus=!1,this.focus())}ngAfterContentInit(){this._actionChanges=Zs(this._allLeadingIcons.changes,this._allTrailingIcons.changes,this._allRemoveIcons.changes).subscribe(()=>this._changeDetectorRef.markForCheck())}ngDoCheck(){this._rippleLoader.setDisabled(this._elementRef.nativeElement,this._isRippleDisabled())}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement),this._actionChanges?.unsubscribe(),this.destroyed.emit({chip:this}),this.destroyed.complete()}remove(){this.removable&&this.removed.emit({chip:this})}_isRippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||this._isBasicChip||!!this._globalRippleOptions?.disabled}_hasTrailingIcon(){return!(!this.trailingIcon&&!this.removeIcon)}_handleKeydown(e){(8===e.keyCode&&!e.repeat||46===e.keyCode)&&(e.preventDefault(),this.remove())}focus(){this.disabled||(this.primaryAction?this.primaryAction.focus():this._pendingFocus=!0)}_getSourceAction(e){return this._getActions().find(i=>{const s=i._elementRef.nativeElement;return s===e||s.contains(e)})}_getActions(){const e=[];return this.primaryAction&&e.push(this.primaryAction),this.removeIcon&&e.push(this.removeIcon),this.trailingIcon&&e.push(this.trailingIcon),e}_handlePrimaryActionInteraction(){}_getTabIndex(){return this.role?this.disabled?-1:this.tabIndex:null}_monitorFocus(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{const i=null!==e;i!==this._hasFocusInternal&&(this._hasFocusInternal=i,i?this._onFocus.next({chip:this}):Pl(()=>this._ngZone.run(()=>this._onBlur.next({chip:this})),{injector:this._injector}))})}static#e=this.\u0275fac=function(i){return new(i||t)(D(bi),D(Bt),D(Wt),D(Hl),D(Zn),D(jo,8),D(vS,8),ll("tabindex"))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(i,s,r){if(1&i&&(Li(r,z8,5),Li(r,U8,5),Li(r,G8,5),Li(r,z8,5),Li(r,U8,5),Li(r,G8,5)),2&i){let o;xt(o=Et())&&(s.leadingIcon=o.first),xt(o=Et())&&(s.trailingIcon=o.first),xt(o=Et())&&(s.removeIcon=o.first),xt(o=Et())&&(s._allLeadingIcons=o),xt(o=Et())&&(s._allTrailingIcons=o),xt(o=Et())&&(s._allRemoveIcons=o)}},viewQuery:function(i,s){if(1&i&&Zt(ey,5),2&i){let r;xt(r=Et())&&(s.primaryAction=r.first)}},hostAttrs:[1,"mat-mdc-chip"],hostVars:32,hostBindings:function(i,s){1&i&&te("keydown",function(o){return s._handleKeydown(o)}),2&i&&(Wa("id",s.id),$t("role",s.role)("tabindex",s._getTabIndex())("aria-label",s.ariaLabel),bo("mat-"+(s.color||"primary")),rt("mdc-evolution-chip",!s._isBasicChip)("mdc-evolution-chip--disabled",s.disabled)("mdc-evolution-chip--with-trailing-action",s._hasTrailingIcon())("mdc-evolution-chip--with-primary-graphic",s.leadingIcon)("mdc-evolution-chip--with-primary-icon",s.leadingIcon)("mdc-evolution-chip--with-avatar",s.leadingIcon)("mat-mdc-chip-with-avatar",s.leadingIcon)("mat-mdc-chip-highlighted",s.highlighted)("mat-mdc-chip-disabled",s.disabled)("mat-mdc-basic-chip",s._isBasicChip)("mat-mdc-standard-chip",!s._isBasicChip)("mat-mdc-chip-with-trailing-icon",s._hasTrailingIcon())("_mat-animation-noopable",s._animationsDisabled))},inputs:{role:"role",id:"id",ariaLabel:[0,"aria-label","ariaLabel"],ariaDescription:[0,"aria-description","ariaDescription"],value:"value",color:"color",removable:[2,"removable","removable",Rt],highlighted:[2,"highlighted","highlighted",Rt],disableRipple:[2,"disableRipple","disableRipple",Rt],disabled:[2,"disabled","disabled",Rt],tabIndex:[2,"tabIndex","tabIndex",e=>null==e?void 0:Dr(e)]},outputs:{removed:"removed",destroyed:"destroyed"},exportAs:["matChip"],standalone:!0,features:[Lt([{provide:DD,useExisting:t}]),Ni,Ln],ngContentSelectors:kre,decls:8,vars:3,consts:[[1,"mat-mdc-chip-focus-overlay"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary"],["matChipAction","",3,"isInteractive"],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label"],[1,"mat-mdc-chip-primary-focus-indicator","mat-mdc-focus-indicator"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"]],template:function(i,s){1&i&&(Ti(Ire),be(0,"span",0),m(1,"span",1)(2,"span",2),K(3,N7e,2,0,"span",3),m(4,"span",4),un(5),be(6,"span",5),_()()(),K(7,R7e,2,0,"span",6)),2&i&&(b(2),S("isInteractive",!1),b(),Vn(s.leadingIcon?3:-1),b(4),Vn(s._hasTrailingIcon()?7:-1))},dependencies:[ey],styles:['.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{flex-basis:100%;overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}.mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit;overflow-x:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-outline-width);border-radius:var(--mdc-chip-container-shape-radius);box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1;border-style:solid}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-outline-color)}.mdc-evolution-chip__action--primary:not(.mdc-evolution-chip__action--presentational):not(.mdc-ripple-upgraded):focus::before{border-color:var(--mdc-chip-focus-outline-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-disabled-outline-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-basic-chip .mdc-evolution-chip__action--primary{font:inherit}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip__action--trailing{position:relative;overflow:visible}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-trailing-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip__text-label{-webkit-user-select:none;user-select:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__text-label{font-family:var(--mdc-chip-label-text-font);line-height:var(--mdc-chip-label-text-line-height);font-size:var(--mdc-chip-label-text-size);font-weight:var(--mdc-chip-label-text-weight);letter-spacing:var(--mdc-chip-label-text-tracking)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-label-text-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-selected-label-text-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label,.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color)}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{width:var(--mdc-chip-with-avatar-avatar-size);height:var(--mdc-chip-with-avatar-avatar-size);font-size:var(--mdc-chip-with-avatar-avatar-size)}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%;height:20px;width:20px}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-disabled-icon-color)}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.cdk-high-contrast-active .mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove{opacity:calc(var(--mat-chip-trailing-action-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove:focus{opacity:calc(var(--mat-chip-trailing-action-focus-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mat-mdc-standard-chip{border-radius:var(--mdc-chip-container-shape-radius);height:var(--mdc-chip-container-height)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-selected-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-flat-disabled-selected-container-color)}.cdk-high-contrast-active .mat-mdc-standard-chip{outline:solid 1px}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mdc-chip-with-avatar-avatar-shape-radius);width:var(--mdc-chip-with-icon-icon-size);height:var(--mdc-chip-with-icon-icon-size);font-size:var(--mdc-chip-with-icon-icon-size)}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-disabled-icon-color)}.mat-mdc-chip-highlighted{--mdc-chip-with-icon-icon-color:var(--mdc-chip-with-icon-selected-icon-color);--mdc-chip-elevated-container-color:var(--mdc-chip-elevated-selected-container-color);--mdc-chip-label-text-color:var(--mdc-chip-selected-label-text-color);--mdc-chip-outline-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color)}.mat-mdc-chip-selected .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color)}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-hover-state-layer-color);opacity:var(--mdc-chip-hover-state-layer-opacity)}.mat-mdc-chip-focus-overlay .mat-mdc-chip-selected:hover,.mat-mdc-chip-highlighted:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-hover-state-layer-color);opacity:var(--mdc-chip-selected-hover-state-layer-opacity)}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color);opacity:var(--mdc-chip-focus-state-layer-opacity)}.mat-mdc-chip-selected.cdk-focused .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color);opacity:var(--mdc-chip-selected-focus-state-layer-opacity)}.mdc-evolution-chip--disabled:not(.mdc-evolution-chip--selected) .mat-mdc-chip-avatar{opacity:var(--mdc-chip-with-avatar-disabled-avatar-opacity)}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{opacity:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity)}.mdc-evolution-chip--disabled.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{opacity:var(--mdc-chip-with-icon-disabled-icon-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:var(--mat-chip-disabled-container-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-trailing-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-disabled-trailing-icon-color)}.mat-mdc-chip-remove{opacity:var(--mat-chip-trailing-action-opacity)}.mat-mdc-chip-remove:focus{opacity:var(--mat-chip-trailing-action-focus-opacity)}.mat-mdc-chip-remove::after{background:var(--mat-chip-trailing-action-state-layer-color)}.mat-mdc-chip-remove:hover::after{opacity:var(--mat-chip-trailing-action-hover-state-layer-opacity)}.mat-mdc-chip-remove:focus::after{opacity:var(--mat-chip-trailing-action-focus-state-layer-opacity)}.mat-mdc-chip-selected .mat-mdc-chip-remove::after,.mat-mdc-chip-highlighted .mat-mdc-chip-remove::after{background:var(--mat-chip-selected-trailing-action-state-layer-color)}.mat-mdc-standard-chip{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mat-mdc-chip-action-label{overflow:visible}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip .mat-ripple.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative;z-index:0}.mat-mdc-chip-action-label{text-align:left;z-index:1}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-chip-remove::before{margin:calc(var(--mat-mdc-focus-indicator-border-width, 3px)*-1);left:8px;right:8px}.mat-mdc-chip-remove::after{content:"";display:block;opacity:0;position:absolute;top:-2px;bottom:-2px;left:6px;right:6px;border-radius:50%}.mat-mdc-chip-remove .mat-icon{width:18px;height:18px;font-size:18px;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}.cdk-high-contrast-active .mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}.mat-mdc-chip-action:focus .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return t})(),AD=(()=>{class t{constructor(e,i){this._elementRef=e,this._document=i}initialize(e){this.getNativeElement().focus(),this.setValue(e)}getNativeElement(){return this._elementRef.nativeElement}setValue(e){this.getNativeElement().textContent=e,this._moveCursorToEndOfInput()}getValue(){return this.getNativeElement().textContent||""}_moveCursorToEndOfInput(){const e=this._document.createRange();e.selectNodeContents(this.getNativeElement()),e.collapse(!1);const i=window.getSelection();i.removeAllRanges(),i.addRange(e)}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(Zn))};static#t=this.\u0275dir=pt({type:t,selectors:[["span","matChipEditInput",""]],hostAttrs:["role","textbox","tabindex","-1","contenteditable","true",1,"mat-chip-edit-input"],standalone:!0})}return t})(),MS=(()=>{class t extends ty{constructor(e,i,s,r,o,a,l,c){super(e,i,s,r,o,a,l,c),this.basicChipAttrName="mat-basic-chip-row",this._editStartPending=!1,this.editable=!1,this.edited=new it,this._isEditing=!1,this.role="row",this._onBlur.pipe(Ii(this.destroyed)).subscribe(()=>{this._isEditing&&!this._editStartPending&&this._onEditFinish()})}_hasTrailingIcon(){return!this._isEditing&&super._hasTrailingIcon()}_handleFocus(){!this._isEditing&&!this.disabled&&this.focus()}_handleKeydown(e){13!==e.keyCode||this.disabled?this._isEditing?e.stopPropagation():super._handleKeydown(e):this._isEditing?(e.preventDefault(),this._onEditFinish()):this.editable&&this._startEditing(e)}_handleDoubleclick(e){!this.disabled&&this.editable&&this._startEditing(e)}_startEditing(e){if(!this.primaryAction||this.removeIcon&&this._getSourceAction(e.target)===this.removeIcon)return;const i=this.value;this._isEditing=this._editStartPending=!0,Pl(()=>{this._getEditInput().initialize(i),this._editStartPending=!1},{injector:this._injector})}_onEditFinish(){this._isEditing=this._editStartPending=!1,this.edited.emit({chip:this,value:this._getEditInput().getValue()}),(this._document.activeElement===this._getEditInput().getNativeElement()||this._document.activeElement===this._document.body)&&this.primaryAction.focus()}_isRippleDisabled(){return super._isRippleDisabled()||this._isEditing}_getEditInput(){return this.contentEditInput||this.defaultEditInput}static#e=this.\u0275fac=function(i){return new(i||t)(D(bi),D(Bt),D(Wt),D(Hl),D(Zn),D(jo,8),D(vS,8),ll("tabindex"))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-chip-row"],["","mat-chip-row",""],["mat-basic-chip-row"],["","mat-basic-chip-row",""]],contentQueries:function(i,s,r){if(1&i&&Li(r,AD,5),2&i){let o;xt(o=Et())&&(s.contentEditInput=o.first)}},viewQuery:function(i,s){if(1&i&&Zt(AD,5),2&i){let r;xt(r=Et())&&(s.defaultEditInput=r.first)}},hostAttrs:[1,"mat-mdc-chip","mat-mdc-chip-row","mdc-evolution-chip"],hostVars:27,hostBindings:function(i,s){1&i&&te("focus",function(o){return s._handleFocus(o)})("dblclick",function(o){return s._handleDoubleclick(o)}),2&i&&(Wa("id",s.id),$t("tabindex",s.disabled?null:-1)("aria-label",null)("aria-description",null)("role",s.role),rt("mat-mdc-chip-with-avatar",s.leadingIcon)("mat-mdc-chip-disabled",s.disabled)("mat-mdc-chip-editing",s._isEditing)("mat-mdc-chip-editable",s.editable)("mdc-evolution-chip--disabled",s.disabled)("mdc-evolution-chip--with-trailing-action",s._hasTrailingIcon())("mdc-evolution-chip--with-primary-graphic",s.leadingIcon)("mdc-evolution-chip--with-primary-icon",s.leadingIcon)("mdc-evolution-chip--with-avatar",s.leadingIcon)("mat-mdc-chip-highlighted",s.highlighted)("mat-mdc-chip-with-trailing-icon",s._hasTrailingIcon()))},inputs:{editable:"editable"},outputs:{edited:"edited"},standalone:!0,features:[Lt([{provide:ty,useExisting:t},{provide:DD,useExisting:t}]),bt,Ln],ngContentSelectors:$7e,decls:10,vars:10,consts:[[1,"mat-mdc-chip-focus-overlay"],["role","gridcell","matChipAction","",1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary",3,"tabIndex","disabled"],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label"],["aria-hidden","true",1,"mat-mdc-chip-primary-focus-indicator","mat-mdc-focus-indicator"],["role","gridcell",1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"],[1,"cdk-visually-hidden",3,"id"],["matChipEditInput",""]],template:function(i,s){1&i&&(Ti(P7e),K(0,B7e,1,0,"span",0),m(1,"span",1),K(2,V7e,2,0,"span",2),m(3,"span",3),K(4,G7e,2,1)(5,j7e,1,0),be(6,"span",4),_()(),K(7,H7e,2,0,"span",5),m(8,"span",6),C(9),_()),2&i&&(Vn(s._isEditing?-1:0),b(),S("tabIndex",s.tabIndex)("disabled",s.disabled),$t("aria-label",s.ariaLabel)("aria-describedby",s._ariaDescriptionId),b(),Vn(s.leadingIcon?2:-1),b(2),Vn(s._isEditing?4:5),b(3),Vn(s._hasTrailingIcon()?7:-1),b(),S("id",s._ariaDescriptionId),b(),vt(s.ariaDescription))},dependencies:[ey,AD],styles:['.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{flex-basis:100%;overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}.mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit;overflow-x:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-outline-width);border-radius:var(--mdc-chip-container-shape-radius);box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1;border-style:solid}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-outline-color)}.mdc-evolution-chip__action--primary:not(.mdc-evolution-chip__action--presentational):not(.mdc-ripple-upgraded):focus::before{border-color:var(--mdc-chip-focus-outline-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-disabled-outline-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-basic-chip .mdc-evolution-chip__action--primary{font:inherit}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip__action--trailing{position:relative;overflow:visible}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-trailing-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip__text-label{-webkit-user-select:none;user-select:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__text-label{font-family:var(--mdc-chip-label-text-font);line-height:var(--mdc-chip-label-text-line-height);font-size:var(--mdc-chip-label-text-size);font-weight:var(--mdc-chip-label-text-weight);letter-spacing:var(--mdc-chip-label-text-tracking)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-label-text-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-selected-label-text-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label,.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color)}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{width:var(--mdc-chip-with-avatar-avatar-size);height:var(--mdc-chip-with-avatar-avatar-size);font-size:var(--mdc-chip-with-avatar-avatar-size)}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%;height:20px;width:20px}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-disabled-icon-color)}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.cdk-high-contrast-active .mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove{opacity:calc(var(--mat-chip-trailing-action-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove:focus{opacity:calc(var(--mat-chip-trailing-action-focus-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mat-mdc-standard-chip{border-radius:var(--mdc-chip-container-shape-radius);height:var(--mdc-chip-container-height)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-selected-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-flat-disabled-selected-container-color)}.cdk-high-contrast-active .mat-mdc-standard-chip{outline:solid 1px}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mdc-chip-with-avatar-avatar-shape-radius);width:var(--mdc-chip-with-icon-icon-size);height:var(--mdc-chip-with-icon-icon-size);font-size:var(--mdc-chip-with-icon-icon-size)}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-disabled-icon-color)}.mat-mdc-chip-highlighted{--mdc-chip-with-icon-icon-color:var(--mdc-chip-with-icon-selected-icon-color);--mdc-chip-elevated-container-color:var(--mdc-chip-elevated-selected-container-color);--mdc-chip-label-text-color:var(--mdc-chip-selected-label-text-color);--mdc-chip-outline-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color)}.mat-mdc-chip-selected .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color)}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-hover-state-layer-color);opacity:var(--mdc-chip-hover-state-layer-opacity)}.mat-mdc-chip-focus-overlay .mat-mdc-chip-selected:hover,.mat-mdc-chip-highlighted:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-hover-state-layer-color);opacity:var(--mdc-chip-selected-hover-state-layer-opacity)}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color);opacity:var(--mdc-chip-focus-state-layer-opacity)}.mat-mdc-chip-selected.cdk-focused .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color);opacity:var(--mdc-chip-selected-focus-state-layer-opacity)}.mdc-evolution-chip--disabled:not(.mdc-evolution-chip--selected) .mat-mdc-chip-avatar{opacity:var(--mdc-chip-with-avatar-disabled-avatar-opacity)}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{opacity:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity)}.mdc-evolution-chip--disabled.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{opacity:var(--mdc-chip-with-icon-disabled-icon-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:var(--mat-chip-disabled-container-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-trailing-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-disabled-trailing-icon-color)}.mat-mdc-chip-remove{opacity:var(--mat-chip-trailing-action-opacity)}.mat-mdc-chip-remove:focus{opacity:var(--mat-chip-trailing-action-focus-opacity)}.mat-mdc-chip-remove::after{background:var(--mat-chip-trailing-action-state-layer-color)}.mat-mdc-chip-remove:hover::after{opacity:var(--mat-chip-trailing-action-hover-state-layer-opacity)}.mat-mdc-chip-remove:focus::after{opacity:var(--mat-chip-trailing-action-focus-state-layer-opacity)}.mat-mdc-chip-selected .mat-mdc-chip-remove::after,.mat-mdc-chip-highlighted .mat-mdc-chip-remove::after{background:var(--mat-chip-selected-trailing-action-state-layer-color)}.mat-mdc-standard-chip{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mat-mdc-chip-action-label{overflow:visible}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip .mat-ripple.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative;z-index:0}.mat-mdc-chip-action-label{text-align:left;z-index:1}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-chip-remove::before{margin:calc(var(--mat-mdc-focus-indicator-border-width, 3px)*-1);left:8px;right:8px}.mat-mdc-chip-remove::after{content:"";display:block;opacity:0;position:absolute;top:-2px;bottom:-2px;left:6px;right:6px;border-radius:50%}.mat-mdc-chip-remove .mat-icon{width:18px;height:18px;font-size:18px;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}.cdk-high-contrast-active .mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}.mat-mdc-chip-action:focus .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return t})(),j8=(()=>{class t{get chipFocusChanges(){return this._getChipStream(e=>e._onFocus)}get chipDestroyedChanges(){return this._getChipStream(e=>e.destroyed)}get chipRemovedChanges(){return this._getChipStream(e=>e.removed)}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._syncChipsState()}get empty(){return!this._chips||0===this._chips.length}get role(){return this._explicitRole?this._explicitRole:this.empty?null:this._defaultRole}set role(e){this._explicitRole=e}get focused(){return this._hasFocusedChip()}constructor(e,i,s){this._elementRef=e,this._changeDetectorRef=i,this._dir=s,this._lastDestroyedFocusedChipIndex=null,this._destroyed=new Pt,this._defaultRole="presentation",this._disabled=!1,this.tabIndex=0,this._explicitRole=null,this._chipActions=new qm}ngAfterViewInit(){this._setUpFocusManagement(),this._trackChipSetChanges(),this._trackDestroyedFocusedChip()}ngOnDestroy(){this._keyManager?.destroy(),this._chipActions.destroy(),this._destroyed.next(),this._destroyed.complete()}_hasFocusedChip(){return this._chips&&this._chips.some(e=>e._hasFocus())}_syncChipsState(){this._chips&&this._chips.forEach(e=>{e.disabled=this._disabled,e._changeDetectorRef.markForCheck()})}focus(){}_handleKeydown(e){this._originatesFromChip(e)&&this._keyManager.onKeydown(e)}_isValidIndex(e){return e>=0&&e<this._chips.length}_allowFocusEscape(){if(-1!==this.tabIndex){const e=this.tabIndex;this.tabIndex=-1,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.tabIndex=e,this._changeDetectorRef.markForCheck()})}}_getChipStream(e){return this._chips.changes.pipe(So(null),nn(()=>Zs(...this._chips.map(e))))}_originatesFromChip(e){let i=e.target;for(;i&&i!==this._elementRef.nativeElement;){if(i.classList.contains("mat-mdc-chip"))return!0;i=i.parentElement}return!1}_setUpFocusManagement(){this._chips.changes.pipe(So(this._chips)).subscribe(e=>{const i=[];e.forEach(s=>s._getActions().forEach(r=>i.push(r))),this._chipActions.reset(i),this._chipActions.notifyOnChanges()}),this._keyManager=new Lie(this._chipActions).withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr").withHomeAndEnd().skipPredicate(e=>this._skipPredicate(e)),this.chipFocusChanges.pipe(Ii(this._destroyed)).subscribe(({chip:e})=>{const i=e._getSourceAction(document.activeElement);i&&this._keyManager.updateActiveItem(i)}),this._dir?.change.pipe(Ii(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e))}_skipPredicate(e){return!e.isInteractive||e.disabled}_trackChipSetChanges(){this._chips.changes.pipe(So(null),Ii(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>this._syncChipsState()),this._redirectDestroyedChipFocus()})}_trackDestroyedFocusedChip(){this.chipDestroyedChanges.pipe(Ii(this._destroyed)).subscribe(e=>{const s=this._chips.toArray().indexOf(e.chip);this._isValidIndex(s)&&e.chip._hasFocus()&&(this._lastDestroyedFocusedChipIndex=s)})}_redirectDestroyedChipFocus(){if(null!=this._lastDestroyedFocusedChipIndex){if(this._chips.length){const e=Math.min(this._lastDestroyedFocusedChipIndex,this._chips.length-1),i=this._chips.toArray()[e];i.disabled?1===this._chips.length?this.focus():this._keyManager.setPreviousItemActive():i.focus()}else this.focus();this._lastDestroyedFocusedChipIndex=null}}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(bi),D(xo,8))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-chip-set"]],contentQueries:function(i,s,r){if(1&i&&Li(r,ty,5),2&i){let o;xt(o=Et())&&(s._chips=o)}},hostAttrs:[1,"mat-mdc-chip-set","mdc-evolution-chip-set"],hostVars:1,hostBindings:function(i,s){1&i&&te("keydown",function(o){return s._handleKeydown(o)}),2&i&&$t("role",s.role)},inputs:{disabled:[2,"disabled","disabled",Rt],role:"role",tabIndex:[2,"tabIndex","tabIndex",e=>null==e?0:Dr(e)]},standalone:!0,features:[Ni,Ln],ngContentSelectors:V8,decls:2,vars:0,consts:[["role","presentation",1,"mdc-evolution-chip-set__chips"]],template:function(i,s){1&i&&(Ti(),m(0,"div",0),un(1),_())},styles:[".mat-mdc-chip-set{display:flex}.mat-mdc-chip-set:focus{outline:none}.mat-mdc-chip-set .mdc-evolution-chip-set__chips{min-width:100%;margin-left:-8px;margin-right:0}.mat-mdc-chip-set .mdc-evolution-chip{margin:4px 0 4px 8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip-set__chips{margin-left:0;margin-right:-8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip{margin-left:0;margin-right:8px}.mdc-evolution-chip-set__chips{display:flex;flex-flow:wrap;min-width:0}.mat-mdc-chip-set-stacked{flex-direction:column;align-items:flex-start}.mat-mdc-chip-set-stacked .mat-mdc-chip{width:100%}.mat-mdc-chip-set-stacked .mdc-evolution-chip__graphic{flex-grow:0}.mat-mdc-chip-set-stacked .mdc-evolution-chip__action--primary{flex-basis:100%;justify-content:start}input.mat-mdc-chip-input{flex:1 0 150px;margin-left:8px}[dir=rtl] input.mat-mdc-chip-input{margin-left:0;margin-right:8px}"],encapsulation:2,changeDetection:0})}return t})();class Z7e{constructor(n,e){this.source=n,this.value=e}}let OD=(()=>{class t extends j8{get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=e,this._syncChipsState()}get id(){return this._chipInput.id}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this._chips||0===this._chips.length)}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get focused(){return this._chipInput.focused||this._hasFocusedChip()}get required(){return this._required??this.ngControl?.control?.hasValidator($r.required)??!1}set required(e){this._required=e,this.stateChanges.next()}get shouldLabelFloat(){return!this.empty||this.focused}get value(){return this._value}set value(e){this._value=e}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}get chipBlurChanges(){return this._getChipStream(e=>e._onBlur)}get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}constructor(e,i,s,r,o,a,l){super(e,i,s),this.ngControl=l,this.controlType="mat-chip-grid",this._defaultRole="grid",this._ariaDescribedbyIds=[],this._onTouched=()=>{},this._onChange=()=>{},this._value=[],this.change=new it,this.valueChange=new it,this._chips=void 0,this.stateChanges=new Pt,this.ngControl&&(this.ngControl.valueAccessor=this),this._errorStateTracker=new rD(a,l,o,r,this.stateChanges)}ngAfterContentInit(){this.chipBlurChanges.pipe(Ii(this._destroyed)).subscribe(()=>{this._blur(),this.stateChanges.next()}),Zs(this.chipFocusChanges,this._chips.changes).pipe(Ii(this._destroyed)).subscribe(()=>this.stateChanges.next())}ngAfterViewInit(){super.ngAfterViewInit()}ngDoCheck(){this.ngControl&&this.updateErrorState()}ngOnDestroy(){super.ngOnDestroy(),this.stateChanges.complete()}registerInput(e){this._chipInput=e,this._chipInput.setDescribedByIds(this._ariaDescribedbyIds)}onContainerClick(e){!this.disabled&&!this._originatesFromChip(e)&&this.focus()}focus(){this.disabled||this._chipInput.focused||(!this._chips.length||this._chips.first.disabled?Promise.resolve().then(()=>this._chipInput.focus()):this._chips.length&&0!==this._keyManager.activeItemIndex&&this._keyManager.setFirstItemActive(),this.stateChanges.next())}setDescribedByIds(e){this._ariaDescribedbyIds=e,this._chipInput?.setDescribedByIds(e)}writeValue(e){this._value=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this.stateChanges.next()}updateErrorState(){this._errorStateTracker.updateErrorState()}_blur(){this.disabled||setTimeout(()=>{this.focused||(this._propagateChanges(),this._markAsTouched())})}_allowFocusEscape(){this._chipInput.focused||super._allowFocusEscape()}_handleKeydown(e){const i=e.keyCode,s=this._keyManager.activeItem;if(9===i)this._chipInput.focused&&oa(e,"shiftKey")&&this._chips.length&&!this._chips.last.disabled?(e.preventDefault(),s?this._keyManager.setActiveItem(s):this._focusLastChip()):super._allowFocusEscape();else if(!this._chipInput.focused)if(38!==i&&40!==i||!s)super._handleKeydown(e);else{const r=this._chipActions.filter(l=>l._isPrimary===s._isPrimary&&!this._skipPredicate(l)),o=r.indexOf(s),a=38===e.keyCode?-1:1;e.preventDefault(),o>-1&&this._isValidIndex(o+a)&&this._keyManager.setActiveItem(r[o+a])}this.stateChanges.next()}_focusLastChip(){this._chips.length&&this._chips.last.focus()}_propagateChanges(){const e=this._chips.length?this._chips.toArray().map(i=>i.value):[];this._value=e,this.change.emit(new Z7e(this,e)),this.valueChange.emit(e),this._onChange(e),this._changeDetectorRef.markForCheck()}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(bi),D(xo,8),D(Dv,8),D(qo,8),D(oD),D(Vl,10))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-chip-grid"]],contentQueries:function(i,s,r){if(1&i&&Li(r,MS,5),2&i){let o;xt(o=Et())&&(s._chips=o)}},hostAttrs:[1,"mat-mdc-chip-set","mat-mdc-chip-grid","mdc-evolution-chip-set"],hostVars:10,hostBindings:function(i,s){1&i&&te("focus",function(){return s.focus()})("blur",function(){return s._blur()}),2&i&&($t("role",s.role)("tabindex",s.disabled||s._chips&&0===s._chips.length?-1:s.tabIndex)("aria-disabled",s.disabled.toString())("aria-invalid",s.errorState),rt("mat-mdc-chip-list-disabled",s.disabled)("mat-mdc-chip-list-invalid",s.errorState)("mat-mdc-chip-list-required",s.required))},inputs:{disabled:[2,"disabled","disabled",Rt],placeholder:"placeholder",required:[2,"required","required",Rt],value:"value",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},standalone:!0,features:[Lt([{provide:wD,useExisting:t}]),Ni,bt,Ln],ngContentSelectors:V8,decls:2,vars:0,consts:[["role","presentation",1,"mdc-evolution-chip-set__chips"]],template:function(i,s){1&i&&(Ti(),m(0,"div",0),un(1),_())},styles:[".mat-mdc-chip-set{display:flex}.mat-mdc-chip-set:focus{outline:none}.mat-mdc-chip-set .mdc-evolution-chip-set__chips{min-width:100%;margin-left:-8px;margin-right:0}.mat-mdc-chip-set .mdc-evolution-chip{margin:4px 0 4px 8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip-set__chips{margin-left:0;margin-right:-8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip{margin-left:0;margin-right:8px}.mdc-evolution-chip-set__chips{display:flex;flex-flow:wrap;min-width:0}.mat-mdc-chip-set-stacked{flex-direction:column;align-items:flex-start}.mat-mdc-chip-set-stacked .mat-mdc-chip{width:100%}.mat-mdc-chip-set-stacked .mdc-evolution-chip__graphic{flex-grow:0}.mat-mdc-chip-set-stacked .mdc-evolution-chip__action--primary{flex-basis:100%;justify-content:start}input.mat-mdc-chip-input{flex:1 0 150px;margin-left:8px}[dir=rtl] input.mat-mdc-chip-input{margin-left:0;margin-right:8px}"],encapsulation:2,changeDetection:0})}return t})(),Q7e=0,ND=(()=>{class t{get chipGrid(){return this._chipGrid}set chipGrid(e){e&&(this._chipGrid=e,this._chipGrid.registerInput(this))}get disabled(){return this._disabled||this._chipGrid&&this._chipGrid.disabled}set disabled(e){this._disabled=e}get empty(){return!this.inputElement.value}constructor(e,i,s){this._elementRef=e,this.focused=!1,this.addOnBlur=!1,this.chipEnd=new it,this.placeholder="",this.id="mat-mdc-chip-list-input-"+Q7e++,this._disabled=!1,this.inputElement=this._elementRef.nativeElement,this.separatorKeyCodes=i.separatorKeyCodes,s&&this.inputElement.classList.add("mat-mdc-form-field-input-control")}ngOnChanges(){this._chipGrid.stateChanges.next()}ngOnDestroy(){this.chipEnd.complete()}_keydown(e){this.empty&&8===e.keyCode?(e.repeat||this._chipGrid._focusLastChip(),e.preventDefault()):this._emitChipEnd(e)}_blur(){this.addOnBlur&&this._emitChipEnd(),this.focused=!1,this._chipGrid.focused||this._chipGrid._blur(),this._chipGrid.stateChanges.next()}_focus(){this.focused=!0,this._chipGrid.stateChanges.next()}_emitChipEnd(e){(!e||this._isSeparatorKey(e))&&(this.chipEnd.emit({input:this.inputElement,value:this.inputElement.value,chipInput:this}),e?.preventDefault())}_onInput(){this._chipGrid.stateChanges.next()}focus(){this.inputElement.focus()}clear(){this.inputElement.value=""}setDescribedByIds(e){const i=this._elementRef.nativeElement;e.length?i.setAttribute("aria-describedby",e.join(" ")):i.removeAttribute("aria-describedby")}_isSeparatorKey(e){return!oa(e)&&new Set(this.separatorKeyCodes).has(e.keyCode)}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(kD),D(Yv,8))};static#t=this.\u0275dir=pt({type:t,selectors:[["input","matChipInputFor",""]],hostAttrs:[1,"mat-mdc-chip-input","mat-mdc-input-element","mdc-text-field__input","mat-input-element"],hostVars:6,hostBindings:function(i,s){1&i&&te("keydown",function(o){return s._keydown(o)})("blur",function(){return s._blur()})("focus",function(){return s._focus()})("input",function(){return s._onInput()}),2&i&&(Wa("id",s.id),$t("disabled",s.disabled||null)("placeholder",s.placeholder||null)("aria-invalid",s._chipGrid&&s._chipGrid.ngControl?s._chipGrid.ngControl.invalid:null)("aria-required",s._chipGrid&&s._chipGrid.required||null)("required",s._chipGrid&&s._chipGrid.required||null))},inputs:{chipGrid:[0,"matChipInputFor","chipGrid"],addOnBlur:[2,"matChipInputAddOnBlur","addOnBlur",Rt],separatorKeyCodes:[0,"matChipInputSeparatorKeyCodes","separatorKeyCodes"],placeholder:"placeholder",id:"id",disabled:[2,"disabled","disabled",Rt]},outputs:{chipEnd:"matChipInputTokenEnd"},exportAs:["matChipInput","matChipInputFor"],standalone:!0,features:[Ni,On]})}return t})(),H8=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:[oD,{provide:kD,useValue:{separatorKeyCodes:[13]}}],imports:[Ki,Tc,Ki]})}return t})();const J7e=["determinateSpinner"];function e9e(t,n){if(1&t&&(ra(),m(0,"svg",11),be(1,"circle",12),_()),2&t){const e=M();$t("viewBox",e._viewBox()),b(),Wn("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),$t("r",e._circleRadius())}}const t9e=new st("mat-progress-spinner-default-options",{providedIn:"root",factory:function n9e(){return{diameter:Nre}}}),Nre=100;let Ws=(()=>{class t{get color(){return this._color||this._defaultColor}set color(e){this._color=e}constructor(e,i,s){this._elementRef=e,this._defaultColor="primary",this._value=0,this._diameter=Nre,this._noopAnimations="NoopAnimations"===i&&!!s&&!s._forceAnimations,this.mode="mat-spinner"===e.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",s&&(s.color&&(this.color=this._defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const e=2*this._circleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(jo,8),D(t9e))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(i,s){if(1&i&&Zt(J7e,5),2&i){let r;xt(r=Et())&&(s._determinateCircle=r.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(i,s){2&i&&($t("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===s.mode?s.value:null)("mode",s.mode),bo("mat-"+s.color),Wn("width",s.diameter,"px")("height",s.diameter,"px")("--mdc-circular-progress-size",s.diameter+"px")("--mdc-circular-progress-active-indicator-width",s.diameter+"px"),rt("_mat-animation-noopable",s._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===s.mode))},inputs:{color:"color",mode:"mode",value:[2,"value","value",Dr],diameter:[2,"diameter","diameter",Dr],strokeWidth:[2,"strokeWidth","strokeWidth",Dr]},exportAs:["matProgressSpinner"],standalone:!0,features:[Ni,Ln],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(i,s){if(1&i&&(K(0,e9e,2,8,"ng-template",null,0,mn),m(2,"div",2,1),ra(),m(4,"svg",3),be(5,"circle",4),_()(),qf(),m(6,"div",5)(7,"div",6)(8,"div",7),Ss(9,8),_(),m(10,"div",9),Ss(11,8),_(),m(12,"div",10),Ss(13,8),_()()()),2&i){const r=Gt(1);b(4),$t("viewBox",s._viewBox()),b(),Wn("stroke-dasharray",s._strokeCircumference(),"px")("stroke-dashoffset",s._strokeDashOffset(),"px")("stroke-width",s._circleStrokeWidth(),"%"),$t("r",s._circleRadius()),b(4),S("ngTemplateOutlet",r),b(2),S("ngTemplateOutlet",r),b(2),S("ngTemplateOutlet",r)}},dependencies:[h_],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color)}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}return t})(),ny=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[ka,Ki]})}return t})();class s9e{constructor(n,e){this._document=e;const i=this._textarea=this._document.createElement("textarea"),s=i.style;s.position="fixed",s.top=s.opacity="0",s.left="-999em",i.setAttribute("aria-hidden","true"),i.value=n,i.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(i)}copy(){const n=this._textarea;let e=!1;try{if(n){const i=this._document.activeElement;n.select(),n.setSelectionRange(0,n.value.length),e=this._document.execCommand("copy"),i&&i.focus()}}catch{}return e}destroy(){const n=this._textarea;n&&(n.remove(),this._textarea=void 0)}}let Rre=(()=>{class t{constructor(e){this._document=e}copy(e){const i=this.beginCopy(e),s=i.copy();return i.destroy(),s}beginCopy(e){return new s9e(e,this._document)}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Zn))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),W8=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({})}return t})();const r9e=["tooltip"],Lre=new st("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{const t=Je(Qs);return()=>t.scrollStrategies.reposition({scrollThrottle:20})}}),a9e={provide:Lre,deps:[Qs],useFactory:function o9e(t){return()=>t.scrollStrategies.reposition({scrollThrottle:20})}},c9e=new st("mat-tooltip-default-options",{providedIn:"root",factory:function l9e(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),Pre="tooltip-panel",$re=jd({passive:!0});let ou=(()=>{class t{get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(e){this._positionAtOrigin=jv(e),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(e){this._disabled=jv(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=wp(e)}get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=wp(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(e,i,s,r,o,a,l,c,u,d,h,f){this._overlay=e,this._elementRef=i,this._scrollDispatcher=s,this._viewContainerRef=r,this._ngZone=o,this._platform=a,this._ariaDescriber=l,this._focusMonitor=c,this._dir=d,this._defaultOptions=h,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._tooltipComponent=p9e,this._viewportMargin=8,this._cssClassPrefix="mat-mdc",this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Pt,this._injector=Je(ti),this._scrollStrategy=u,this._document=f,h&&(this._showDelay=h.showDelay,this._hideDelay=h.hideDelay,h.position&&(this.position=h.position),h.positionAtOrigin&&(this.positionAtOrigin=h.positionAtOrigin),h.touchGestures&&(this.touchGestures=h.touchGestures)),d.change.pipe(Ii(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),this._viewportMargin=8}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Ii(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([i,s])=>{e.removeEventListener(i,s,$re)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay,i){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const s=this._createOverlay(i);this._detach(),this._portal=this._portal||new N_(this._tooltipComponent,this._viewContainerRef);const r=this._tooltipInstance=s.attach(this._portal).instance;r._triggerElement=this._elementRef.nativeElement,r._mouseLeaveHideDelay=this._hideDelay,r.afterHidden().pipe(Ii(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),r.show(e)}hide(e=this.hideDelay){const i=this._tooltipInstance;i&&(i.isVisible()?i.hide(e):(i._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){const r=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!e)&&r._origin instanceof Bt)return this._overlayRef;this._detach()}const i=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),s=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin&&e||this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i);return s.positionChanges.pipe(Ii(this._destroyed)).subscribe(r=>{this._updateCurrentPositionClass(r.connectionPair),this._tooltipInstance&&r.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:s,panelClass:`${this._cssClassPrefix}-${Pre}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Ii(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Ii(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(Ii(this._destroyed)).subscribe(r=>{this._isTooltipVisible()&&27===r.keyCode&&!oa(r)&&(r.preventDefault(),r.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){const i=e.getConfig().positionStrategy,s=this._getOrigin(),r=this._getOverlayPosition();i.withPositions([this._addOffset({...s.main,...r.main}),this._addOffset({...s.fallback,...r.fallback})])}_addOffset(e){const s=!this._dir||"ltr"==this._dir.value;return"top"===e.originY?e.offsetY=-8:"bottom"===e.originY?e.offsetY=8:"start"===e.originX?e.offsetX=s?-8:8:"end"===e.originX&&(e.offsetX=s?8:-8),e}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,i=this.position;let s;"above"==i||"below"==i?s={originX:"center",originY:"above"==i?"top":"bottom"}:"before"==i||"left"==i&&e||"right"==i&&!e?s={originX:"start",originY:"center"}:("after"==i||"right"==i&&e||"left"==i&&!e)&&(s={originX:"end",originY:"center"});const{x:r,y:o}=this._invertPosition(s.originX,s.originY);return{main:s,fallback:{originX:r,originY:o}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,i=this.position;let s;"above"==i?s={overlayX:"center",overlayY:"bottom"}:"below"==i?s={overlayX:"center",overlayY:"top"}:"before"==i||"left"==i&&e||"right"==i&&!e?s={overlayX:"end",overlayY:"center"}:("after"==i||"right"==i&&e||"left"==i&&!e)&&(s={overlayX:"start",overlayY:"center"});const{x:r,y:o}=this._invertPosition(s.overlayX,s.overlayY);return{main:s,fallback:{overlayX:r,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),Pl(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,i){return"above"===this.position||"below"===this.position?"top"===i?i="bottom":"bottom"===i&&(i="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:i}}_updateCurrentPositionClass(e){const{overlayY:i,originX:s,originY:r}=e;let o;if(o="center"===i?this._dir&&"rtl"===this._dir.value?"end"===s?"left":"right":"start"===s?"left":"right":"bottom"===i&&"top"===r?"above":"below",o!==this._currentPosition){const a=this._overlayRef;if(a){const l=`${this._cssClassPrefix}-${Pre}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{let i;this._setupPointerExitEventsIfNeeded(),void 0!==e.x&&void 0!==e.y&&(i=e),this.show(void 0,i)}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{const i=e.targetTouches?.[0],s=i?{x:i.clientX,y:i.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,s),this._defaultOptions.touchLongPressShowDelay??500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",i=>{const s=i.relatedTarget;(!s||!this._overlayRef?.overlayElement.contains(s))&&this.hide()}],["wheel",i=>this._wheelListener(i)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const i=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",i],["touchcancel",i])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([i,s])=>{this._elementRef.nativeElement.addEventListener(i,s,$re)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){const i=this._document.elementFromPoint(e.clientX,e.clientY),s=this._elementRef.nativeElement;i!==s&&!s.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){const e=this.touchGestures;if("off"!==e){const i=this._elementRef.nativeElement,s=i.style;("on"===e||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName)&&(s.userSelect=s.msUserSelect=s.webkitUserSelect=s.MozUserSelect="none"),("on"===e||!i.draggable)&&(s.webkitUserDrag="none"),s.touchAction="none",s.webkitTapHighlightColor="transparent"}}static#e=this.\u0275fac=function(i){return new(i||t)(D(Qs),D(Bt),D(wS),D(Pr),D(Wt),D(js),D(Oie),D(Hl),D(Lre),D(xo),D(c9e,8),D(Zn))};static#t=this.\u0275dir=pt({type:t,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(i,s){2&i&&rt("mat-mdc-tooltip-disabled",s.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"],standalone:!0})}return t})(),p9e=(()=>{class t{constructor(e,i,s){this._changeDetectorRef=e,this._elementRef=i,this._isMultiline=!1,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new Pt,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide",this._animationsDisabled="NoopAnimations"===s}show(e){null!=this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){null!=this._showTimeoutId&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){const e=this._elementRef.nativeElement.getBoundingClientRect();return e.height>24&&e.width>=200}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_cancelPendingAnimations(){null!=this._showTimeoutId&&clearTimeout(this._showTimeoutId),null!=this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){const i=this._tooltip.nativeElement,s=this._showAnimation,r=this._hideAnimation;if(i.classList.remove(e?r:s),i.classList.add(e?s:r),this._isVisible!==e&&(this._isVisible=e,this._changeDetectorRef.markForCheck()),e&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const o=getComputedStyle(i);("0s"===o.getPropertyValue("animation-duration")||"none"===o.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(i.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}static#e=this.\u0275fac=function(i){return new(i||t)(D(bi),D(Bt),D(jo,8))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-tooltip-component"]],viewQuery:function(i,s){if(1&i&&Zt(r9e,7),2&i){let r;xt(r=Et())&&(s._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(i,s){1&i&&te("mouseleave",function(o){return s._handleMouseLeave(o)}),2&i&&Wn("zoom",s.isVisible()?1:null)},standalone:!0,features:[Ln],decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(i,s){if(1&i){const r=Le();m(0,"div",1,0),te("animationend",function(a){return re(r),oe(s._handleAnimationEnd(a))}),m(2,"div",2),C(3),_()()}2&i&&(rt("mdc-tooltip--multiline",s._isMultiline),S("ngClass",s.tooltipClass),b(3),vt(s.message))},dependencies:[DI],styles:['.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mdc-plain-tooltip-container-color);color:var(--mdc-plain-tooltip-supporting-text-color);border-radius:var(--mdc-plain-tooltip-container-shape);font-family:var(--mdc-plain-tooltip-supporting-text-font);font-size:var(--mdc-plain-tooltip-supporting-text-size);font-weight:var(--mdc-plain-tooltip-supporting-text-weight);line-height:var(--mdc-plain-tooltip-supporting-text-line-height);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking)}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0})}return t})(),AS=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:[a9e],imports:[s8,ka,nf,Ki,Ki,L_]})}return t})();function m9e(t,n){if(1&t&&(m(0,"mat-option",17),C(1),_()),2&t){const e=n.$implicit;S("value",e),b(),xe(" ",e," ")}}function _9e(t,n){if(1&t){const e=Le();m(0,"mat-form-field",14)(1,"mat-select",16,0),te("selectionChange",function(s){return re(e),oe(M(2)._changePageSize(s.value))}),cv(3,m9e,2,2,"mat-option",17,DY),_(),m(5,"div",18),te("click",function(){return re(e),oe(Gt(2).open())}),_()()}if(2&t){const e=M(2);S("appearance",e._formFieldAppearance)("color",e.color),b(),S("value",e.pageSize)("disabled",e.disabled)("aria-labelledby",e._pageSizeLabelId)("panelClass",e.selectConfig.panelClass||"")("disableOptionCentering",e.selectConfig.disableOptionCentering),b(2),uv(e._displayedPageSizeOptions)}}function g9e(t,n){if(1&t&&(m(0,"div",15),C(1),_()),2&t){const e=M(2);b(),vt(e.pageSize)}}function b9e(t,n){if(1&t&&(m(0,"div",3)(1,"div",13),C(2),_(),K(3,_9e,6,7,"mat-form-field",14)(4,g9e,2,1,"div",15),_()),2&t){const e=M();b(),$t("id",e._pageSizeLabelId),b(),xe(" ",e._intl.itemsPerPageLabel," "),b(),Vn(e._displayedPageSizeOptions.length>1?3:-1),b(),Vn(e._displayedPageSizeOptions.length<=1?4:-1)}}function v9e(t,n){if(1&t){const e=Le();m(0,"button",19),te("click",function(){return re(e),oe(M().firstPage())}),ra(),m(1,"svg",8),be(2,"path",20),_()()}if(2&t){const e=M();S("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),$t("aria-label",e._intl.firstPageLabel)}}function y9e(t,n){if(1&t){const e=Le();m(0,"button",21),te("click",function(){return re(e),oe(M().lastPage())}),ra(),m(1,"svg",8),be(2,"path",22),_()()}if(2&t){const e=M();S("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),$t("aria-label",e._intl.lastPageLabel)}}let RD=(()=>{class t{constructor(){this.changes=new Pt,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,i,s)=>{if(0==s||0==i)return`0 of ${s}`;const r=e*i;return`${r+1} \u2013 ${r<(s=Math.max(s,0))?Math.min(r+i,s):r+i} of ${s}`}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const S9e={provide:RD,deps:[[new Id,new Rh,RD]],useFactory:function w9e(t){return t||new RD}},x9e=new st("MAT_PAGINATOR_DEFAULT_OPTIONS");let E9e=0,q8=(()=>{class t{get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(e||0,0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=e||0,this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(e||0,0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(i=>Dr(i,0)),this._updateDisplayedPageSizeOptions()}constructor(e,i,s){if(this._intl=e,this._changeDetectorRef=i,this._pageSizeLabelId="mat-paginator-page-size-label-"+E9e++,this._isInitialized=!1,this._initializedStream=new Uv(1),this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this.hidePageSize=!1,this.showFirstLastButtons=!1,this.selectConfig={},this.disabled=!1,this.page=new it,this.initialized=this._initializedStream,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),s){const{pageSize:r,pageSizeOptions:o,hidePageSize:a,showFirstLastButtons:l}=s;null!=r&&(this._pageSize=r),null!=o&&(this._pageSizeOptions=o),null!=a&&(this.hidePageSize=a),null!=l&&(this.showFirstLastButtons=l)}this._formFieldAppearance=s?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const e=this.getNumberOfPages()-1;return this.pageIndex<e&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){const s=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/e)||0,this.pageSize=e,this._emitPageEvent(s)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,i)=>e-i),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}static#e=this.\u0275fac=function(i){return new(i||t)(D(RD),D(bi),D(x9e,8))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[2,"pageIndex","pageIndex",Dr],length:[2,"length","length",Dr],pageSize:[2,"pageSize","pageSize",Dr],pageSizeOptions:"pageSizeOptions",hidePageSize:[2,"hidePageSize","hidePageSize",Rt],showFirstLastButtons:[2,"showFirstLastButtons","showFirstLastButtons",Rt],selectConfig:"selectConfig",disabled:[2,"disabled","disabled",Rt]},outputs:{page:"page"},exportAs:["matPaginator"],standalone:!0,features:[Ni,Ln],decls:14,vars:14,consts:[["selectRef",""],[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],[1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],[1,"mat-mdc-paginator-touch-target",3,"click"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(i,s){1&i&&(m(0,"div",1)(1,"div",2),K(2,b9e,5,4,"div",3),m(3,"div",4)(4,"div",5),C(5),_(),K(6,v9e,3,5,"button",6),m(7,"button",7),te("click",function(){return s.previousPage()}),ra(),m(8,"svg",8),be(9,"path",9),_()(),qf(),m(10,"button",10),te("click",function(){return s.nextPage()}),ra(),m(11,"svg",8),be(12,"path",11),_()(),K(13,y9e,3,5,"button",12),_()()()),2&i&&(b(2),Vn(s.hidePageSize?-1:2),b(3),xe(" ",s._intl.getRangeLabel(s.pageIndex,s.pageSize,s.length)," "),b(),Vn(s.showFirstLastButtons?6:-1),b(),S("matTooltip",s._intl.previousPageLabel)("matTooltipDisabled",s._previousButtonsDisabled())("matTooltipPosition","above")("disabled",s._previousButtonsDisabled()),$t("aria-label",s._intl.previousPageLabel),b(3),S("matTooltip",s._intl.nextPageLabel)("matTooltipDisabled",s._nextButtonsDisabled())("matTooltipPosition","above")("disabled",s._nextButtonsDisabled()),$t("aria-label",s._intl.nextPageLabel),b(3),Vn(s.showFirstLastButtons?13:-1))},dependencies:[vs,Br,Hs,d8,ou],styles:[".mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color);background-color:var(--mat-paginator-container-background-color);font-family:var(--mat-paginator-container-text-font);line-height:var(--mat-paginator-container-text-line-height);font-size:var(--mat-paginator-container-text-size);font-weight:var(--mat-paginator-container-text-weight);letter-spacing:var(--mat-paginator-container-text-tracking);--mat-form-field-container-height:var(--mat-paginator-form-field-container-height);--mat-form-field-container-vertical-padding:var(--mat-paginator-form-field-container-vertical-padding)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size)}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color)}.mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color)}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}.mat-mdc-paginator-touch-target{display:var(--mat-paginator-touch-target-display);position:absolute;top:50%;left:50%;width:84px;height:48px;background-color:rgba(0,0,0,0);transform:translate(-50%, -50%);cursor:pointer}"],encapsulation:2,changeDetection:0})}return t})(),Bre=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:[S9e],imports:[qv,V_,AS,q8]})}return t})(),Wre=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[SS]})}return t})();const L9e=["input"],P9e=["label"],$9e=["*"],B9e=new st("mat-checkbox-default-options",{providedIn:"root",factory:qre});function qre(){return{color:"accent",clickAction:"check-indeterminate"}}var Ka=function(t){return t[t.Init=0]="Init",t[t.Checked=1]="Checked",t[t.Unchecked=2]="Unchecked",t[t.Indeterminate=3]="Indeterminate",t}(Ka||{});const V9e={provide:qi,useExisting:Cn(()=>Kl),multi:!0};class z9e{}let U9e=0;const Kre=qre();let Kl=(()=>{class t{focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(e){const i=new z9e;return i.source=this,i.checked=e,i}_getAnimationTargetElement(){return this._inputElement?.nativeElement}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(e,i,s,r,o,a){this._elementRef=e,this._changeDetectorRef=i,this._ngZone=s,this._animationMode=o,this._options=a,this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"},this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new it,this.indeterminateChange=new it,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=Ka.Init,this._controlValueAccessorChangeFn=()=>{},this._validatorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||Kre,this.color=this._options.color||Kre.color,this.tabIndex=parseInt(r)||0,this.id=this._uniqueId="mat-mdc-checkbox-"+ ++U9e}ngOnChanges(e){e.required&&this._validatorChangeFn()}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(e){e!=this.checked&&(this._checked=e,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){e!==this.disabled&&(this._disabled=e,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(e){const i=e!=this._indeterminate;this._indeterminate=e,i&&(this._transitionCheckState(this._indeterminate?Ka.Indeterminate:this.checked?Ka.Checked:Ka.Unchecked),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}validate(e){return this.required&&!0!==e.value?{required:!0}:null}registerOnValidatorChange(e){this._validatorChangeFn=e}_transitionCheckState(e){let i=this._currentCheckState,s=this._getAnimationTargetElement();if(i!==e&&s&&(this._currentAnimationClass&&s.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(i,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){s.classList.add(this._currentAnimationClass);const r=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{s.classList.remove(r)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const e=this._options?.clickAction;this.disabled||"noop"===e?!this.disabled&&"noop"===e&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==e&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?Ka.Checked:Ka.Unchecked),this._emitChangeEvent())}_onInteractionEvent(e){e.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(e,i){if("NoopAnimations"===this._animationMode)return"";switch(e){case Ka.Init:if(i===Ka.Checked)return this._animationClasses.uncheckedToChecked;if(i==Ka.Indeterminate)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case Ka.Unchecked:return i===Ka.Checked?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case Ka.Checked:return i===Ka.Unchecked?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case Ka.Indeterminate:return i===Ka.Checked?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(e){const i=this._inputElement;i&&(i.nativeElement.indeterminate=e)}_onInputClick(){this._handleInputClick()}_onTouchTargetClick(){this._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(e){e.target&&this._labelElement.nativeElement.contains(e.target)&&e.stopPropagation()}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(bi),D(Wt),ll("tabindex"),D(jo,8),D(B9e,8))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-checkbox"]],viewQuery:function(i,s){if(1&i&&(Zt(L9e,5),Zt(P9e,5),Zt(jt,5)),2&i){let r;xt(r=Et())&&(s._inputElement=r.first),xt(r=Et())&&(s._labelElement=r.first),xt(r=Et())&&(s.ripple=r.first)}},hostAttrs:[1,"mat-mdc-checkbox"],hostVars:14,hostBindings:function(i,s){2&i&&(Wa("id",s.id),$t("tabindex",null)("aria-label",null)("aria-labelledby",null),bo(s.color?"mat-"+s.color:"mat-accent"),rt("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mdc-checkbox--disabled",s.disabled)("mat-mdc-checkbox-disabled",s.disabled)("mat-mdc-checkbox-checked",s.checked))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],id:"id",required:[2,"required","required",Rt],labelPosition:"labelPosition",name:"name",value:"value",disableRipple:[2,"disableRipple","disableRipple",Rt],tabIndex:[2,"tabIndex","tabIndex",e=>null==e?void 0:Dr(e)],color:"color",checked:[2,"checked","checked",Rt],disabled:[2,"disabled","disabled",Rt],indeterminate:[2,"indeterminate","indeterminate",Rt]},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],standalone:!0,features:[Lt([V9e,{provide:ao,useExisting:t,multi:!0}]),Ni,On,Ln],ngContentSelectors:$9e,decls:15,vars:19,consts:[["checkbox",""],["input",""],["label",""],["mat-internal-form-field","",3,"click","labelPosition"],[1,"mdc-checkbox"],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"blur","click","change","checked","indeterminate","disabled","id","required","tabIndex"],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"]],template:function(i,s){if(1&i){const r=Le();Ti(),m(0,"div",3),te("click",function(a){return re(r),oe(s._preventBubblingFromLabel(a))}),m(1,"div",4,0)(3,"div",5),te("click",function(){return re(r),oe(s._onTouchTargetClick())}),_(),m(4,"input",6,1),te("blur",function(){return re(r),oe(s._onBlur())})("click",function(){return re(r),oe(s._onInputClick())})("change",function(a){return re(r),oe(s._onInteractionEvent(a))}),_(),be(6,"div",7),m(7,"div",8),ra(),m(8,"svg",9),be(9,"path",10),_(),qf(),be(10,"div",11),_(),be(11,"div",12),_(),m(12,"label",13,2),un(14),_()()}if(2&i){const r=Gt(2);S("labelPosition",s.labelPosition),b(4),rt("mdc-checkbox--selected",s.checked),S("checked",s.checked)("indeterminate",s.indeterminate)("disabled",s.disabled)("id",s.inputId)("required",s.required)("tabIndex",s.disabled?-1:s.tabIndex),$t("aria-label",s.ariaLabel||null)("aria-labelledby",s.ariaLabelledby)("aria-describedby",s.ariaDescribedby)("aria-checked",s.indeterminate?"mixed":null)("name",s.name)("value",s.value),b(7),S("matRippleTrigger",r)("matRippleDisabled",s.disableRipple||s.disabled)("matRippleCentered",!0),b(),S("for",s.inputId)}},dependencies:[jt,c8],styles:['.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom;padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox:hover .mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox:hover .mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;width:var(--mdc-checkbox-state-layer-size, 40px);height:var(--mdc-checkbox-state-layer-size, 40px);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1);border-color:var(--mdc-checkbox-unselected-icon-color);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2)}.mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}.mdc-checkbox--disabled .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color)}.mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color);border-color:rgba(0,0,0,0)}.mdc-checkbox:hover .mdc-checkbox__native-control:not(:checked)~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:rgba(0,0,0,0)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}.mdc-checkbox__native-control:focus:focus:not(:checked)~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color)}.mdc-checkbox__native-control:focus:focus:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color);background-color:var(--mdc-checkbox-selected-focus-icon-color)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms cubic-bezier(0.4, 0, 0.6, 1);color:var(--mdc-checkbox-selected-checkmark-color)}.mdc-checkbox--disabled .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);border-color:var(--mdc-checkbox-selected-checkmark-color)}.cdk-high-contrast-active .mdc-checkbox__mixedmark{margin:0 1px}.mdc-checkbox--disabled .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms cubic-bezier(0, 0, 0.2, 1),transform 180ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox._mat-animation-noopable .mdc-checkbox *,.mat-mdc-checkbox._mat-animation-noopable .mdc-checkbox *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox .mdc-checkbox__background{-webkit-print-color-adjust:exact;color-adjust:exact}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox .mat-internal-form-field{color:var(--mat-checkbox-label-text-color);font-family:var(--mat-checkbox-label-text-font);line-height:var(--mat-checkbox-label-text-line-height);font-size:var(--mat-checkbox-label-text-size);letter-spacing:var(--mat-checkbox-label-text-tracking);font-weight:var(--mat-checkbox-label-text-weight)}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default;color:var(--mat-checkbox-disabled-label-color)}.mat-mdc-checkbox label:empty{display:none}.cdk-high-contrast-active .mat-mdc-checkbox.mat-mdc-checkbox-disabled{opacity:.5}.cdk-high-contrast-active .mat-mdc-checkbox .mdc-checkbox__checkmark{--mdc-checkbox-selected-checkmark-color: CanvasText;--mdc-checkbox-disabled-selected-checkmark-color: CanvasText}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-checkbox-touch-target-display)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return t})(),sy=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[Kl,Ki,Ki]})}return t})();const H9e=["input"],W9e=["formField"],q9e=["*"];let Xre=0;class Yre{constructor(n,e){this.source=n,this.value=e}}const K9e={provide:qi,useExisting:Cn(()=>ry),multi:!0},Zre=new st("MatRadioGroup"),X9e=new st("mat-radio-default-options",{providedIn:"root",factory:function Y9e(){return{color:"accent"}}});let ry=(()=>{class t{get name(){return this._name}set name(e){this._name=e,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition="before"===e?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markRadiosForCheck()}get required(){return this._required}set required(e){this._required=e,this._markRadiosForCheck()}constructor(e){this._changeDetector=e,this._value=null,this._name="mat-radio-group-"+Xre++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new it}ngAfterContentInit(){this._isInitialized=!0,this._buttonChanges=this._radios.changes.subscribe(()=>{this.selected&&!this._radios.find(e=>e===this.selected)&&(this._selected=null)})}ngOnDestroy(){this._buttonChanges?.unsubscribe()}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(e=>{e.name=this.name,e._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(i=>{i.checked=this.value===i.value,i.checked&&(this._selected=i)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new Yre(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(e=>e._markForCheck())}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetector.markForCheck()}static#e=this.\u0275fac=function(i){return new(i||t)(D(bi))};static#t=this.\u0275dir=pt({type:t,selectors:[["mat-radio-group"]],contentQueries:function(i,s,r){if(1&i&&Li(r,j_,5),2&i){let o;xt(o=Et())&&(s._radios=o)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:[2,"disabled","disabled",Rt],required:[2,"required","required",Rt]},outputs:{change:"change"},exportAs:["matRadioGroup"],standalone:!0,features:[Lt([K9e,{provide:Zre,useExisting:t}]),Ni]})}return t})(),j_=(()=>{class t{get checked(){return this._checked}set checked(e){this._checked!==e&&(this._checked=e,e&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!e&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),e&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(e){this._labelPosition=e}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(e){this._setDisabled(e)}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(e){this._required=e}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(e){this._color=e}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(e,i,s,r,o,a,l,c){this._elementRef=i,this._changeDetector=s,this._focusMonitor=r,this._radioDispatcher=o,this._providerOverride=l,this._uniqueId="mat-radio-"+ ++Xre,this.id=this._uniqueId,this.disableRipple=!1,this.tabIndex=0,this.change=new it,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this._injector=Je(ti),this.radioGroup=e,this._noopAnimations="NoopAnimations"===a,c&&(this.tabIndex=Dr(c,0))}focus(e,i){i?this._focusMonitor.focusVia(this._inputElement,i,e):this._inputElement.nativeElement.focus(e)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((e,i)=>{e!==this.id&&i===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{!e&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new Yre(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(e){e.stopPropagation()}_onInputInteraction(e){if(e.stopPropagation(),!this.checked&&!this.disabled){const i=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),i&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(e){this._onInputInteraction(e),this.disabled||this._inputElement.nativeElement.focus()}_setDisabled(e){this._disabled!==e&&(this._disabled=e,this._changeDetector.markForCheck())}_updateTabIndex(){const e=this.radioGroup;let i;if(i=e&&e.selected&&!this.disabled?e.selected===this?this.tabIndex:-1:this.tabIndex,i!==this._previousTabIndex){const s=this._inputElement?.nativeElement;s&&(s.setAttribute("tabindex",i+""),this._previousTabIndex=i,Pl(()=>{queueMicrotask(()=>{e&&e.selected&&e.selected!==this&&document.activeElement===s&&(e.selected?._inputElement.nativeElement.focus(),document.activeElement===s&&this._inputElement.nativeElement.blur())})},{injector:this._injector}))}}static#e=this.\u0275fac=function(i){return new(i||t)(D(Zre,8),D(Bt),D(bi),D(Hl),D(T6e),D(jo,8),D(X9e,8),ll("tabindex"))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-radio-button"]],viewQuery:function(i,s){if(1&i&&(Zt(H9e,5),Zt(W9e,7,Bt)),2&i){let r;xt(r=Et())&&(s._inputElement=r.first),xt(r=Et())&&(s._rippleTrigger=r.first)}},hostAttrs:[1,"mat-mdc-radio-button"],hostVars:15,hostBindings:function(i,s){1&i&&te("focus",function(){return s._inputElement.nativeElement.focus()}),2&i&&($t("id",s.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),rt("mat-primary","primary"===s.color)("mat-accent","accent"===s.color)("mat-warn","warn"===s.color)("mat-mdc-radio-checked",s.checked)("_mat-animation-noopable",s._noopAnimations))},inputs:{id:"id",name:"name",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],disableRipple:[2,"disableRipple","disableRipple",Rt],tabIndex:[2,"tabIndex","tabIndex",e=>null==e?0:Dr(e)],checked:[2,"checked","checked",Rt],value:"value",labelPosition:"labelPosition",disabled:[2,"disabled","disabled",Rt],required:[2,"required","required",Rt],color:"color"},outputs:{change:"change"},exportAs:["matRadioButton"],standalone:!0,features:[Ni,Ln],ngContentSelectors:q9e,decls:13,vars:16,consts:[["formField",""],["input",""],["mat-internal-form-field","",3,"labelPosition"],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio",1,"mdc-radio__native-control",3,"change","id","checked","disabled","required"],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mdc-label",3,"for"]],template:function(i,s){if(1&i){const r=Le();Ti(),m(0,"div",2,0)(2,"div",3)(3,"div",4),te("click",function(a){return re(r),oe(s._onTouchTargetClick(a))}),_(),m(4,"input",5,1),te("change",function(a){return re(r),oe(s._onInputInteraction(a))}),_(),m(6,"div",6),be(7,"div",7)(8,"div",8),_(),m(9,"div",9),be(10,"div",10),_()(),m(11,"label",11),un(12),_()()}2&i&&(S("labelPosition",s.labelPosition),b(2),rt("mdc-radio--disabled",s.disabled),b(2),S("id",s.inputId)("checked",s.checked)("disabled",s.disabled)("required",s.required),$t("name",s.name)("value",s.value)("aria-label",s.ariaLabel)("aria-labelledby",s.ariaLabelledby)("aria-describedby",s.ariaDescribedby),b(5),S("matRippleTrigger",s._rippleTrigger.nativeElement)("matRippleDisabled",s._isRippleDisabled())("matRippleCentered",!0),b(2),S("for",s.inputId))},dependencies:[jt,c8],styles:['.mat-mdc-radio-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color;padding:calc((var(--mdc-radio-state-layer-size) - 20px)/2)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:not([disabled])~.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-hover-icon-color)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-hover-icon-color)}.mat-mdc-radio-button .mdc-radio:active .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-pressed-icon-color)}.mat-mdc-radio-button .mdc-radio:active .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:active .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-pressed-icon-color)}.mat-mdc-radio-button .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-radio-button .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);width:var(--mdc-radio-state-layer-size);height:var(--mdc-radio-state-layer-size);top:calc(-1*(var(--mdc-radio-state-layer-size) - 20px)/2);left:calc(-1*(var(--mdc-radio-state-layer-size) - 20px)/2)}.mat-mdc-radio-button .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;top:0;right:0;left:0;cursor:inherit;z-index:1;width:var(--mdc-radio-state-layer-size);height:var(--mdc-radio-state-layer-size)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color);opacity:var(--mdc-radio-disabled-unselected-icon-opacity)}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{cursor:default}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color);opacity:var(--mdc-radio-disabled-selected-icon-opacity)}.mat-mdc-radio-button .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-icon-color)}.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-icon-color)}.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-focus-icon-color)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transform:scale(0.5);transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio--disabled{cursor:default;pointer-events:none}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color)}.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-radio-checked-ripple-color)}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element{background-color:var(--mat-radio-checked-ripple-color)}.mat-mdc-radio-button .mat-internal-form-field{color:var(--mat-radio-label-text-color);font-family:var(--mat-radio-label-text-font);line-height:var(--mat-radio-label-text-line-height);font-size:var(--mat-radio-label-text-size);letter-spacing:var(--mat-radio-label-text-tracking);font-weight:var(--mat-radio-label-text-weight)}.mat-mdc-radio-button .mdc-radio--disabled+label{color:var(--mat-radio-disabled-label-color)}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple .mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-focus-icon-color, black)}.mat-mdc-radio-button.cdk-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-radio-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-radio-touch-target-display)}[dir=rtl] .mat-mdc-radio-touch-target{left:auto;right:50%;transform:translate(50%, -50%)}'],encapsulation:2,changeDetection:0})}return t})(),LS=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[Ki,ka,Tc,j_,Ki]})}return t})();const Z9e=["knob"],Q9e=["valueIndicatorContainer"];function J9e(t,n){if(1&t&&(m(0,"div",2,1)(2,"div",5)(3,"span",6),C(4),_()()()),2&t){const e=M();b(4),vt(e.valueIndicatorText)}}const eUe=["trackActive"],tUe=["*"];function nUe(t,n){if(1&t&&be(0,"div"),2&t){const e=n.$implicit,i=n.$index,s=M(3);bo(0===e?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),Wn("transform",s._calcTickMarkTransform(i))}}function iUe(t,n){1&t&&cv(0,nUe,1,4,"div",8,kY),2&t&&uv(M(2)._tickMarks)}function sUe(t,n){if(1&t&&(m(0,"div",6,1),K(2,iUe,2,0),_()),2&t){const e=M();b(2),Vn(e._cachedWidth?2:-1)}}function rUe(t,n){if(1&t&&be(0,"mat-slider-visual-thumb",7),2&t){const e=M();S("discrete",e.discrete)("thumbPosition",1)("valueIndicatorText",e.startValueIndicatorText)}}var Qn=function(t){return t[t.START=1]="START",t[t.END=2]="END",t}(Qn||{}),oy=function(t){return t[t.ACTIVE=0]="ACTIVE",t[t.INACTIVE=1]="INACTIVE",t}(oy||{});const BD=new st("_MatSlider"),Qre=new st("_MatSliderThumb"),Jre=new st("_MatSliderRangeThumb"),eoe=new st("_MatSliderVisualThumb");let oUe=(()=>{class t{constructor(e,i,s,r){this._cdr=e,this._ngZone=i,this._slider=r,this._isHovered=!1,this._isActive=!1,this._isValueIndicatorVisible=!1,this._platform=Je(js),this._onPointerMove=o=>{if(this._sliderInput._isFocused)return;const a=this._hostElement.getBoundingClientRect(),l=this._slider._isCursorOnSliderThumb(o,a);this._isHovered=l,l?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)},this._onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)},this._onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")},this._onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")},this._onDragStart=o=>{0===o.button&&(this._isActive=!0,this._showActiveRipple())},this._onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef),this._platform.SAFARI&&this._showHoverRipple()},this._hostElement=s.nativeElement}ngAfterViewInit(){this._ripple.radius=24,this._sliderInput=this._slider._getInput(this.thumbPosition),this._sliderInputEl=this._sliderInput._hostElement;const e=this._sliderInputEl;this._ngZone.runOutsideAngular(()=>{e.addEventListener("pointermove",this._onPointerMove),e.addEventListener("pointerdown",this._onDragStart),e.addEventListener("pointerup",this._onDragEnd),e.addEventListener("pointerleave",this._onMouseLeave),e.addEventListener("focus",this._onFocus),e.addEventListener("blur",this._onBlur)})}ngOnDestroy(){const e=this._sliderInputEl;e&&(e.removeEventListener("pointermove",this._onPointerMove),e.removeEventListener("pointerdown",this._onDragStart),e.removeEventListener("pointerup",this._onDragEnd),e.removeEventListener("pointerleave",this._onMouseLeave),e.removeEventListener("focus",this._onFocus),e.removeEventListener("blur",this._onBlur))}_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(e){return e?.state===Wl.FADING_IN||e?.state===Wl.VISIBLE}_showRipple(e,i){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(this.thumbPosition===Qn.START?Qn.END:Qn.START)._showValueIndicator(),!this._slider._globalRippleOptions?.disabled||i))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:e,centered:!0,persistent:!0})}_hideRipple(e){if(e?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();const i=this._getSibling();i._isShowingAnyRipple()||(this._hideValueIndicator(),i._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(this.thumbPosition===Qn.START?Qn.END:Qn.START)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}static#e=this.\u0275fac=function(i){return new(i||t)(D(bi),D(Wt),D(Bt),D(BD))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(i,s){if(1&i&&(Zt(jt,5),Zt(Z9e,5),Zt(Q9e,5)),2&i){let r;xt(r=Et())&&(s._ripple=r.first),xt(r=Et())&&(s._knob=r.first),xt(r=Et())&&(s._valueIndicatorContainer=r.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},standalone:!0,features:[Lt([{provide:eoe,useExisting:t}]),Ln],decls:4,vars:2,consts:[["knob",""],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator-container"],[1,"mdc-slider__thumb-knob"],["matRipple","",1,"mat-mdc-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(i,s){1&i&&(K(0,J9e,5,1,"div",2),be(1,"div",3,0)(3,"div",4)),2&i&&(Vn(s.discrete?0:-1),b(3),S("matRippleDisabled",!0))},dependencies:[jt],styles:[".mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}"],encapsulation:2,changeDetection:0})}return t})(),r5=(()=>{class t{get disabled(){return this._disabled}set disabled(e){this._disabled=e;const i=this._getInput(Qn.END),s=this._getInput(Qn.START);i&&(i.disabled=this._disabled),s&&(s.disabled=this._disabled)}get discrete(){return this._discrete}set discrete(e){this._discrete=e,this._updateValueIndicatorUIs()}get min(){return this._min}set min(e){const i=isNaN(e)?this._min:e;this._min!==i&&this._updateMin(i)}_updateMin(e){const i=this._min;this._min=e,this._isRange?this._updateMinRange({old:i,new:e}):this._updateMinNonRange(e),this._onMinMaxOrStepChange()}_updateMinRange(e){const i=this._getInput(Qn.END),s=this._getInput(Qn.START),r=i.value,o=s.value;s.min=e.new,i.min=Math.max(e.new,s.value),s.max=Math.min(i.max,i.value),s._updateWidthInactive(),i._updateWidthInactive(),e.new<e.old?this._onTranslateXChangeBySideEffect(i,s):this._onTranslateXChangeBySideEffect(s,i),r!==i.value&&this._onValueChange(i),o!==s.value&&this._onValueChange(s)}_updateMinNonRange(e){const i=this._getInput(Qn.END);if(i){const s=i.value;i.min=e,i._updateThumbUIByValue(),this._updateTrackUI(i),s!==i.value&&this._onValueChange(i)}}get max(){return this._max}set max(e){const i=isNaN(e)?this._max:e;this._max!==i&&this._updateMax(i)}_updateMax(e){const i=this._max;this._max=e,this._isRange?this._updateMaxRange({old:i,new:e}):this._updateMaxNonRange(e),this._onMinMaxOrStepChange()}_updateMaxRange(e){const i=this._getInput(Qn.END),s=this._getInput(Qn.START),r=i.value,o=s.value;i.max=e.new,s.max=Math.min(e.new,i.value),i.min=s.value,i._updateWidthInactive(),s._updateWidthInactive(),e.new>e.old?this._onTranslateXChangeBySideEffect(s,i):this._onTranslateXChangeBySideEffect(i,s),r!==i.value&&this._onValueChange(i),o!==s.value&&this._onValueChange(s)}_updateMaxNonRange(e){const i=this._getInput(Qn.END);if(i){const s=i.value;i.max=e,i._updateThumbUIByValue(),this._updateTrackUI(i),s!==i.value&&this._onValueChange(i)}}get step(){return this._step}set step(e){const i=isNaN(e)?this._step:e;this._step!==i&&this._updateStep(i)}_updateStep(e){this._step=e,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){const e=this._getInput(Qn.END),i=this._getInput(Qn.START),s=e.value,r=i.value,o=i.value;e.min=this._min,i.max=this._max,e.step=this._step,i.step=this._step,this._platform.SAFARI&&(e.value=e.value,i.value=i.value),e.min=Math.max(this._min,i.value),i.max=Math.min(this._max,e.value),i._updateWidthInactive(),e._updateWidthInactive(),e.value<o?this._onTranslateXChangeBySideEffect(i,e):this._onTranslateXChangeBySideEffect(e,i),s!==e.value&&this._onValueChange(e),r!==i.value&&this._onValueChange(i)}_updateStepNonRange(){const e=this._getInput(Qn.END);if(e){const i=e.value;e.step=this._step,this._platform.SAFARI&&(e.value=e.value),e._updateThumbUIByValue(),i!==e.value&&this._onValueChange(e)}}constructor(e,i,s,r,o,a){this._ngZone=e,this._cdr=i,this._elementRef=s,this._dir=r,this._globalRippleOptions=o,this._disabled=!1,this._discrete=!1,this.showTickMarks=!1,this._min=0,this.disableRipple=!1,this._max=100,this._step=1,this.displayWith=l=>`${l}`,this._rippleRadius=24,this.startValueIndicatorText="",this.endValueIndicatorText="",this._isRange=!1,this._isRtl=!1,this._hasViewInitialized=!1,this._tickMarkTrackWidth=0,this._hasAnimation=!1,this._resizeTimer=null,this._platform=Je(js),this._knobRadius=8,this._thumbsOverlap=!1,this._noopAnimations="NoopAnimations"===a,this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl="rtl"===this._dir.value}ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();const e=this._getInput(Qn.END),i=this._getInput(Qn.START);this._isRange=!!e&&!!i,this._cdr.detectChanges();const s=this._getThumb(Qn.END);this._rippleRadius=s._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._isRange?this._initUIRange(e,i):this._initUINonRange(e),this._updateTrackUI(e),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(e){e.initProps(),e.initUI(),this._updateValueIndicatorUI(e),this._hasViewInitialized=!0,e._updateThumbUIByValue()}_initUIRange(e,i){e.initProps(),e.initUI(),i.initProps(),i.initUI(),e._updateMinMax(),i._updateMinMax(),e._updateStaticStyles(),i._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,e._updateThumbUIByValue(),i._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl="rtl"===this._dir.value,this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){const e=this._getInput(Qn.END),i=this._getInput(Qn.START);e._setIsLeftThumb(),i._setIsLeftThumb(),e.translateX=e._calcTranslateXByValue(),i.translateX=i._calcTranslateXByValue(),e._updateStaticStyles(),i._updateStaticStyles(),e._updateWidthInactive(),i._updateWidthInactive(),e._updateThumbUIByValue(),i._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(Qn.END)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(Qn.START)._isActive||this._getThumb(Qn.END)._isActive}_getValue(e=Qn.END){const i=this._getInput(e);return i?i.value:this.min}_skipUpdate(){return!(!this._getInput(Qn.START)?._skipUIUpdate&&!this._getInput(Qn.END)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(e){const i=this._trackActive.nativeElement.style;i.left=e.left,i.right=e.right,i.transformOrigin=e.transformOrigin,i.transform=e.transform}_calcTickMarkTransform(e){return`translateX(${e*(this._tickMarkTrackWidth/(this._tickMarks.length-1))}px`}_onTranslateXChange(e){this._hasViewInitialized&&(this._updateThumbUI(e),this._updateTrackUI(e),this._updateOverlappingThumbUI(e))}_onTranslateXChangeBySideEffect(e,i){this._hasViewInitialized&&(e._updateThumbUIByValue(),i._updateThumbUIByValue())}_onValueChange(e){this._hasViewInitialized&&(this._updateValueIndicatorUI(e),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){const e=this._getInput(Qn.END),i=this._getInput(Qn.START);e._updateThumbUIByValue(),i._updateThumbUIByValue(),e._updateStaticStyles(),i._updateStaticStyles(),e._updateMinMax(),i._updateMinMax(),e._updateWidthInactive(),i._updateWidthInactive()}else{const e=this._getInput(Qn.END);e&&e._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_areThumbsOverlapping(){const e=this._getInput(Qn.START),i=this._getInput(Qn.END);return!(!e||!i)&&i.translateX-e.translateX<20}_updateOverlappingThumbClassNames(e){const i=e.getSibling(),s=this._getThumb(e.thumbPosition);this._getThumb(i.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),s._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(e){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(e))}_updateThumbUI(e){this._skipUpdate()||(this._getThumb(e.thumbPosition===Qn.END?Qn.END:Qn.START)._hostElement.style.transform=`translateX(${e.translateX}px)`)}_updateValueIndicatorUI(e){if(this._skipUpdate())return;const i=this.displayWith(e.value);if(this._hasViewInitialized?e._valuetext.set(i):e._hostElement.setAttribute("aria-valuetext",i),this.discrete){e.thumbPosition===Qn.START?this.startValueIndicatorText=i:this.endValueIndicatorText=i;const s=this._getThumb(e.thumbPosition);i.length<3?s._hostElement.classList.add("mdc-slider__thumb--short-value"):s._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){const e=this._getInput(Qn.END),i=this._getInput(Qn.START);e&&this._updateValueIndicatorUI(e),i&&this._updateValueIndicatorUI(i)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;const e=this._step&&this._step>0?this._step:1,s=(Math.floor(this.max/e)*e-this.min)/(this.max-this.min);this._tickMarkTrackWidth=this._cachedWidth*s-6}_updateTrackUI(e){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(e):this._updateTrackUINonRange(e))}_updateTrackUIRange(e){const i=e.getSibling();if(!i||!this._cachedWidth)return;const s=Math.abs(i.translateX-e.translateX)/this._cachedWidth;this._setTrackActiveStyles(e._isLeftThumb&&this._cachedWidth?{left:"auto",right:this._cachedWidth-i.translateX+"px",transformOrigin:"right",transform:`scaleX(${s})`}:{left:`${i.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${s})`})}_updateTrackUINonRange(e){this._setTrackActiveStyles(this._isRtl?{left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-e.fillPercentage})`}:{left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${e.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||void 0===this.step||void 0===this.min||void 0===this.max)return;const e=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(e):this._updateTickMarkUINonRange(e),this._isRtl&&this._tickMarks.reverse()}_updateTickMarkUINonRange(e){const i=this._getValue();let s=Math.max(Math.round((i-this.min)/e),0),r=Math.max(Math.round((this.max-i)/e),0);this._isRtl?s++:r++,this._tickMarks=Array(s).fill(oy.ACTIVE).concat(Array(r).fill(oy.INACTIVE))}_updateTickMarkUIRange(e){const i=this._getValue(),s=this._getValue(Qn.START),r=Math.max(Math.round((s-this.min)/e),0),o=Math.max(Math.round((i-s)/e)+1,0),a=Math.max(Math.round((this.max-i)/e),0);this._tickMarks=Array(r).fill(oy.INACTIVE).concat(Array(o).fill(oy.ACTIVE),Array(a).fill(oy.INACTIVE))}_getInput(e){return e===Qn.END&&this._input?this._input:this._inputs?.length?e===Qn.START?this._inputs.first:this._inputs.last:void 0}_getThumb(e){return e===Qn.END?this._thumbs?.last:this._thumbs?.first}_setTransition(e){this._hasAnimation=!this._platform.IOS&&e&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}_isCursorOnSliderThumb(e,i){const s=i.width/2,l=e.clientY-(i.y+s);return Math.pow(e.clientX-(i.x+s),2)+Math.pow(l,2)<Math.pow(s,2)}static#e=this.\u0275fac=function(i){return new(i||t)(D(Wt),D(bi),D(Bt),D(xo,8),D(vS,8),D(jo,8))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-slider"]],contentQueries:function(i,s,r){if(1&i&&(Li(r,Qre,5),Li(r,Jre,4)),2&i){let o;xt(o=Et())&&(s._input=o.first),xt(o=Et())&&(s._inputs=o)}},viewQuery:function(i,s){if(1&i&&(Zt(eUe,5),Zt(eoe,5)),2&i){let r;xt(r=Et())&&(s._trackActive=r.first),xt(r=Et())&&(s._thumbs=r)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:12,hostBindings:function(i,s){2&i&&(bo("mat-"+(s.color||"primary")),rt("mdc-slider--range",s._isRange)("mdc-slider--disabled",s.disabled)("mdc-slider--discrete",s.discrete)("mdc-slider--tick-marks",s.showTickMarks)("_mat-animation-noopable",s._noopAnimations))},inputs:{disabled:[2,"disabled","disabled",Rt],discrete:[2,"discrete","discrete",Rt],showTickMarks:[2,"showTickMarks","showTickMarks",Rt],min:[2,"min","min",Dr],color:"color",disableRipple:[2,"disableRipple","disableRipple",Rt],max:[2,"max","max",Dr],step:[2,"step","step",Dr],displayWith:"displayWith"},exportAs:["matSlider"],standalone:!0,features:[Lt([{provide:BD,useExisting:t}]),Ni,Ln],ngContentSelectors:tUe,decls:9,vars:5,consts:[["trackActive",""],["tickMarkContainer",""],[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],[1,"mdc-slider__tick-marks"],[3,"discrete","thumbPosition","valueIndicatorText"],[3,"class","transform"]],template:function(i,s){1&i&&(Ti(),un(0),m(1,"div",2),be(2,"div",3),m(3,"div",4),be(4,"div",5,0),_(),K(6,sUe,3,1,"div",6),_(),K(7,rUe,1,3,"mat-slider-visual-thumb",7),be(8,"mat-slider-visual-thumb",7)),2&i&&(b(6),Vn(s.showTickMarks?6:-1),b(),Vn(s._isRange?7:-1),b(),S("discrete",s.discrete)("thumbPosition",2)("valueIndicatorText",s.endValueIndicatorText))},dependencies:[oUe],styles:['.mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%;pointer-events:none;height:var(--mdc-slider-inactive-track-height)}.mdc-slider__track--active,.mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider__track--active{overflow:hidden;border-radius:var(--mdc-slider-active-track-shape);height:var(--mdc-slider-active-track-height);top:calc((var(--mdc-slider-inactive-track-height) - var(--mdc-slider-active-track-height))/2)}.mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;transform-origin:left;transition:transform 80ms ease;border-color:var(--mdc-slider-active-track-color);border-top-width:var(--mdc-slider-active-track-height)}.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color)}[dir=rtl] .mdc-slider__track--active_fill{-webkit-transform-origin:right;transform-origin:right}.mdc-slider__track--inactive{left:0;top:0;opacity:.24;background-color:var(--mdc-slider-inactive-track-color);height:var(--mdc-slider-inactive-track-height);border-radius:var(--mdc-slider-inactive-track-shape)}.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color);opacity:.24}.mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.cdk-high-contrast-active .mdc-slider__track--inactive::before{border-color:CanvasText}.mdc-slider__value-indicator-container{bottom:44px;left:50%;pointer-events:none;position:absolute;transform:translateX(-50%);transform:var(--mat-slider-value-indicator-container-transform)}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider__value-indicator{display:flex;align-items:center;border-radius:4px;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom;opacity:1;transition:transform 100ms cubic-bezier(0.4, 0, 1, 1);word-break:normal;background-color:var(--mdc-slider-label-container-color);color:var(--mdc-slider-label-label-text-color);width:var(--mat-slider-value-indicator-width);height:var(--mat-slider-value-indicator-height);padding:var(--mat-slider-value-indicator-padding);opacity:var(--mat-slider-value-indicator-opacity);border-radius:var(--mat-slider-value-indicator-border-radius)}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}.mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;display:var(--mat-slider-value-indicator-caret-display);border-top-color:var(--mdc-slider-label-container-color)}.mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.cdk-high-contrast-active .mdc-slider__value-indicator::after{border-color:CanvasText}.mdc-slider__value-indicator-text{text-align:center;width:var(--mat-slider-value-indicator-width);transform:var(--mat-slider-value-indicator-text-transform);font-family:var(--mdc-slider-label-label-text-font);font-size:var(--mdc-slider-label-label-text-size);font-weight:var(--mdc-slider-label-label-text-weight);line-height:var(--mdc-slider-label-label-text-line-height);letter-spacing:var(--mdc-slider-label-label-text-tracking)}.mdc-slider__thumb{-webkit-user-select:none;user-select:none;display:flex;left:-24px;outline:none;position:absolute;height:48px;width:48px;pointer-events:none}.mdc-slider--discrete .mdc-slider__thumb{transition:transform 80ms ease}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__thumb--top{z-index:1}.mdc-slider__thumb-knob{position:absolute;box-sizing:border-box;left:50%;top:50%;transform:translate(-50%, -50%);border-style:solid;width:var(--mdc-slider-handle-width);height:var(--mdc-slider-handle-height);border-width:calc(var(--mdc-slider-handle-height)/2) calc(var(--mdc-slider-handle-width)/2);box-shadow:var(--mdc-slider-handle-elevation);background-color:var(--mdc-slider-handle-color);border-color:var(--mdc-slider-handle-color);border-radius:var(--mdc-slider-handle-shape)}.mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color);border-color:var(--mdc-slider-hover-handle-color)}.mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color);border-color:var(--mdc-slider-focus-handle-color)}.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color);border-color:var(--mdc-slider-disabled-handle-color)}.mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border:solid 1px #fff;box-sizing:content-box;border-color:var(--mdc-slider-with-overlap-handle-outline-color);border-width:var(--mdc-slider-with-overlap-handle-outline-width)}.mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider__tick-mark--active,.mdc-slider__tick-mark--inactive{width:var(--mdc-slider-with-tick-marks-container-size);height:var(--mdc-slider-with-tick-marks-container-size);border-radius:var(--mdc-slider-with-tick-marks-container-shape)}.mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity);background-color:var(--mdc-slider-with-tick-marks-inactive-container-color)}.mdc-slider--disabled .mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity);background-color:var(--mdc-slider-with-tick-marks-disabled-container-color)}.mdc-slider__tick-mark--active{opacity:var(--mdc-slider-with-tick-marks-active-container-opacity);background-color:var(--mdc-slider-with-tick-marks-active-container-color)}.mdc-slider__input{cursor:pointer;left:2px;margin:0;height:44px;opacity:0;position:absolute;top:2px;width:44px;box-sizing:content-box}.mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;cursor:pointer;height:48px;margin:0 8px;position:relative;touch-action:pan-y;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider.mdc-slider--disabled{cursor:auto;opacity:.38}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-slider-ripple-color)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-slider-hover-state-layer-color)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-slider-focus-state-layer-color)}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-mdc-focus-indicator::before{border-radius:50%}.mdc-slider__thumb--focused .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return t})();const lUe={provide:qi,useExisting:Cn(()=>PS),multi:!0};let PS=(()=>{class t{get value(){return Dr(this._hostElement.value,0)}set value(e){const i=(e=isNaN(e)?0:e)+"";this._hasSetInitialValue?this._isActive||this._setValue(i):this._initialValue=i}_setValue(e){this._hostElement.value=e,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges(),this._slider._cdr.markForCheck()}get translateX(){return this._slider.min>=this._slider.max?(this._translateX=this._tickMarkOffset,this._translateX):(void 0===this._translateX&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(e){this._translateX=e}get min(){return Dr(this._hostElement.min,0)}set min(e){this._hostElement.min=e+"",this._cdr.detectChanges()}get max(){return Dr(this._hostElement.max,0)}set max(e){this._hostElement.max=e+"",this._cdr.detectChanges()}get step(){return Dr(this._hostElement.step,0)}set step(e){this._hostElement.step=e+"",this._cdr.detectChanges()}get disabled(){return Rt(this._hostElement.disabled)}set disabled(e){this._hostElement.disabled=e,this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?0===this._translateX?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_setIsFocused(e){this._isFocused=e}constructor(e,i,s,r){this._ngZone=e,this._elementRef=i,this._cdr=s,this._slider=r,this.valueChange=new it,this.dragStart=new it,this.dragEnd=new it,this.thumbPosition=Qn.END,this._valuetext=Qf(""),this._knobRadius=8,this._tickMarkOffset=3,this._isActive=!1,this._isFocused=!1,this._hasSetInitialValue=!1,this._destroyed=new Pt,this._skipUIUpdate=!1,this._onTouchedFn=()=>{},this._isControlInitialized=!1,this._platform=Je(js),this._hostElement=i.nativeElement,this._ngZone.runOutsideAngular(()=>{this._hostElement.addEventListener("pointerdown",this._onPointerDown.bind(this)),this._hostElement.addEventListener("pointermove",this._onPointerMove.bind(this)),this._hostElement.addEventListener("pointerup",this._onPointerUp.bind(this))})}ngOnDestroy(){this._hostElement.removeEventListener("pointerdown",this._onPointerDown),this._hostElement.removeEventListener("pointermove",this._onPointerMove),this._hostElement.removeEventListener("pointerup",this._onPointerUp),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,void 0===this._initialValue?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._slider._setTransition(!1),this._slider._updateTrackUI(this),this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn?.(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(e){if(!this.disabled&&0===e.button){if(this._platform.IOS){const i=this._slider._isCursorOnSliderThumb(e,this._slider._getThumb(this.thumbPosition)._hostElement.getBoundingClientRect());return this._isActive=i,this._updateWidthActive(),void this._slider._updateDimensions()}this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(e,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(e),this.dragStart.emit({source:this,parent:this._slider,value:this.value}))}}_handleValueCorrection(e){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(e)},0)}_fixValue(e){const i=e.clientX-this._slider._cachedLeft,s=this._slider._cachedWidth,r=0===this._slider.step?1:this._slider.step,o=Math.floor((this._slider.max-this._slider.min)/r),c=Math.round((this._slider._isRtl?1-i/s:i/s)*o)/o*(this._slider.max-this._slider.min)+this._slider.min,u=Math.round(c/r)*r;if(u===this.value)return this._slider._onValueChange(this),void(this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation}));this.value=u,this.valueChange.emit(this.value),this._onChangeFn?.(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation})}_onPointerMove(e){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(e)}_onPointerUp(){this._isActive&&(this._isActive=!1,this._platform.SAFARI&&this._setIsFocused(!1),this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive(),this._platform.IOS?10:0))}_clamp(e){const i=this._tickMarkOffset;return Math.max(Math.min(e,this._slider._cachedWidth-this._tickMarkOffset),i)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*(this._slider._cachedWidth-2*this._tickMarkOffset)+this._tickMarkOffset:this.percentage*(this._slider._cachedWidth-2*this._tickMarkOffset)+this._tickMarkOffset}_calcTranslateXByPointerEvent(e){return e.clientX-this._slider._cachedLeft}_updateWidthActive(){}_updateWidthInactive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding-2*this._tickMarkOffset}px)`,this._hostElement.style.left=`-${this._slider._rippleRadius-this._tickMarkOffset}px`}_updateThumbUIByValue(e){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(e)}_updateThumbUIByPointerEvent(e,i){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(e)),this._updateThumbUI(i)}_updateThumbUI(e){this._slider._setTransition(!!e?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(e){(this._isControlInitialized||null!==e)&&(this.value=e)}registerOnChange(e){this._onChangeFn=e,this._isControlInitialized=!0}registerOnTouched(e){this._onTouchedFn=e}setDisabledState(e){this.disabled=e}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}static#e=this.\u0275fac=function(i){return new(i||t)(D(Wt),D(Bt),D(bi),D(BD))};static#t=this.\u0275dir=pt({type:t,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(i,s){1&i&&te("change",function(){return s._onChange()})("input",function(){return s._onInput()})("blur",function(){return s._onBlur()})("focus",function(){return s._onFocus()}),2&i&&$t("aria-valuetext",s._valuetext())},inputs:{value:[2,"value","value",Dr]},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],standalone:!0,features:[Lt([lUe,{provide:Qre,useExisting:t}]),Ni]})}return t})(),toe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[Ki,Tc]})}return t})();const dUe=["switch"],hUe=["*"];function fUe(t,n){1&t&&(m(0,"div",10),ra(),m(1,"svg",12),be(2,"path",13),_(),m(3,"svg",14),be(4,"path",15),_()())}const pUe=new st("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1})}),mUe={provide:qi,useExisting:Cn(()=>VD),multi:!0};class noe{constructor(n,e){this.source=n,this.checked=e}}let _Ue=0,VD=(()=>{class t{_createChangeEvent(e){return new noe(this,e)}get buttonId(){return`${this.id||this._uniqueId}-button`}focus(){this._switchElement.nativeElement.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(e,i,s,r,o,a){this._elementRef=e,this._focusMonitor=i,this._changeDetectorRef=s,this.defaults=o,this._onChange=l=>{},this._onTouched=()=>{},this._validatorOnChange=()=>{},this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this.change=new it,this.toggleChange=new it,this.tabIndex=parseInt(r)||0,this.color=o.color||"accent",this._noopAnimations="NoopAnimations"===a,this.id=this._uniqueId="mat-mdc-slide-toggle-"+ ++_Ue,this.hideIcon=o.hideIcon??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{"keyboard"===e||"program"===e?(this._focused=!0,this._changeDetectorRef.markForCheck()):e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(e){e.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}validate(e){return this.required&&!0!==e.value?{required:!0}:null}registerOnValidatorChange(e){this._validatorOnChange=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new noe(this,this.checked)))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(Hl),D(bi),ll("tabindex"),D(pUe),D(jo,8))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-slide-toggle"]],viewQuery:function(i,s){if(1&i&&Zt(dUe,5),2&i){let r;xt(r=Et())&&(s._switchElement=r.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(i,s){2&i&&(Wa("id",s.id),$t("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),bo(s.color?"mat-"+s.color:""),rt("mat-mdc-slide-toggle-focused",s._focused)("mat-mdc-slide-toggle-checked",s.checked)("_mat-animation-noopable",s._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",Rt],color:"color",disabled:[2,"disabled","disabled",Rt],disableRipple:[2,"disableRipple","disableRipple",Rt],tabIndex:[2,"tabIndex","tabIndex",e=>null==e?0:Dr(e)],checked:[2,"checked","checked",Rt],hideIcon:[2,"hideIcon","hideIcon",Rt]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],standalone:!0,features:[Lt([mUe,{provide:ao,useExisting:t,multi:!0}]),Ni,On,Ln],ngContentSelectors:hUe,decls:13,vars:24,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(i,s){if(1&i){const r=Le();Ti(),m(0,"div",1)(1,"button",2,0),te("click",function(){return re(r),oe(s._handleClick())}),be(3,"div",3),m(4,"div",4)(5,"div",5)(6,"div",6),be(7,"div",7),_(),m(8,"div",8),be(9,"div",9),_(),K(10,fUe,5,0,"div",10),_()()(),m(11,"label",11),te("click",function(a){return re(r),oe(a.stopPropagation())}),un(12),_()()}if(2&i){const r=Gt(2);S("labelPosition",s.labelPosition),b(),rt("mdc-switch--selected",s.checked)("mdc-switch--unselected",!s.checked)("mdc-switch--checked",s.checked)("mdc-switch--disabled",s.disabled),S("tabIndex",s.disabled?-1:s.tabIndex)("disabled",s.disabled),$t("id",s.buttonId)("name",s.name)("aria-label",s.ariaLabel)("aria-labelledby",s._getAriaLabelledBy())("aria-describedby",s.ariaDescribedby)("aria-required",s.required||null)("aria-checked",s.checked),b(8),S("matRippleTrigger",r)("matRippleDisabled",s.disableRipple||s.disabled)("matRippleCentered",!0),b(),Vn(s.hideIcon?-1:10),b(),S("for",s.buttonId),$t("id",s._labelId)}},dependencies:[jt,c8],styles:['.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mdc-switch-track-width)}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mdc-switch-track-height);border-radius:var(--mdc-switch-track-shape)}.mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-switch-track-outline-width);border-color:var(--mat-switch-track-outline-color)}.cdk-high-contrast-active .mdc-switch__track::before,.cdk-high-contrast-active .mdc-switch__track::after{border-color:currentColor}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-switch-selected-track-outline-width);border-color:var(--mat-switch-selected-track-outline-color)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-switch-disabled-unselected-track-outline-width);border-color:var(--mat-switch-disabled-unselected-track-outline-color)}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mdc-switch-unselected-track-color)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color)}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mdc-switch-selected-track-color)}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mdc-switch-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mdc-switch-handle-width);height:var(--mdc-switch-handle-height);border-radius:var(--mdc-switch-handle-shape)}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size);height:var(--mat-switch-unselected-handle-size);margin:var(--mat-switch-unselected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size);height:var(--mat-switch-selected-handle-size);margin:var(--mat-switch-selected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size);height:var(--mat-switch-with-icon-handle-size)}.mat-mdc-slide-toggle:active .mdc-switch:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size);height:var(--mat-switch-pressed-handle-size)}.mat-mdc-slide-toggle:active .mdc-switch--selected:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin)}.mat-mdc-slide-toggle:active .mdc-switch--unselected:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}.cdk-high-contrast-active .mdc-switch__handle::before,.cdk-high-contrast-active .mdc-switch__handle::after{border-color:currentColor}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color)}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color)}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color)}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color)}.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color)}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color)}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color)}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color)}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color)}.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color)}.mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mdc-switch-state-layer-size);height:var(--mdc-switch-state-layer-size)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch:disabled .mdc-switch__ripple::after{display:none}.mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-hover-state-layer-color)}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-focus-state-layer-color)}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-pressed-state-layer-color);opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity);transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-selected-hover-state-layer-color)}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-selected-focus-state-layer-color)}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-selected-pressed-state-layer-color);opacity:var(--mdc-switch-selected-pressed-state-layer-opacity);transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1}.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size);fill:var(--mdc-switch-unselected-icon-color)}.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color)}.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size);fill:var(--mdc-switch-selected-icon-color)}.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-switch-label-text-color);font-family:var(--mat-switch-label-text-font);line-height:var(--mat-switch-label-text-line-height);font-size:var(--mat-switch-label-text-size);letter-spacing:var(--mat-switch-label-text-tracking);font-weight:var(--mat-switch-label-text-weight)}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}'],encapsulation:2,changeDetection:0})}return t})(),o5=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[VD,Ki,Ki]})}return t})();const vUe=["button"],yUe=["*"];function wUe(t,n){1&t&&be(0,"mat-pseudo-checkbox",3),2&t&&S("disabled",M().disabled)}function SUe(t,n){1&t&&be(0,"mat-pseudo-checkbox",3),2&t&&S("disabled",M().disabled)}const ioe=new st("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",{providedIn:"root",factory:function CUe(){return{hideSingleSelectionIndicator:!1,hideMultipleSelectionIndicator:!1}}}),soe=new st("MatButtonToggleGroup");let roe=0;class ooe{constructor(n,e){this.source=n,this.value=e}}let aoe=(()=>{class t{get buttonId(){return`${this.id}-button`}get tabIndex(){return this._tabIndex}set tabIndex(e){this._tabIndex=e,this._markForCheck()}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=e}constructor(e,i,s,r,o,a){this._changeDetectorRef=i,this._elementRef=s,this._focusMonitor=r,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new it;const l=Number(o);this.tabIndex=l||0===l?l:null,this.buttonToggleGroup=e,this.appearance=a&&a.appearance?a.appearance:"standard"}ngOnInit(){const e=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+roe++,e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){const e=!!this.isSingleSelector()||!this._checked;if(e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.isSingleSelector()){const i=this.buttonToggleGroup._buttonToggles.find(s=>0===s.tabIndex);i&&(i.tabIndex=-1),this.tabIndex=0}this.change.emit(new ooe(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this.isSingleSelector()?this.buttonToggleGroup.name:this.name||null}isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}static#e=this.\u0275fac=function(i){return new(i||t)(D(soe,8),D(bi),D(Bt),D(Hl),ll("tabindex"),D(ioe,8))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-button-toggle"]],viewQuery:function(i,s){if(1&i&&Zt(vUe,5),2&i){let r;xt(r=Et())&&(s._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(i,s){1&i&&te("focus",function(){return s.focus()}),2&i&&($t("aria-label",null)("aria-labelledby",null)("id",s.id)("name",null),rt("mat-button-toggle-standalone",!s.buttonToggleGroup)("mat-button-toggle-checked",s.checked)("mat-button-toggle-disabled",s.disabled)("mat-button-toggle-appearance-standard","standard"===s.appearance))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",disableRipple:[2,"disableRipple","disableRipple",Rt],appearance:"appearance",checked:[2,"checked","checked",Rt],disabled:[2,"disabled","disabled",Rt]},outputs:{change:"change"},exportAs:["matButtonToggle"],standalone:!0,features:[Ni,Ln],ngContentSelectors:yUe,decls:8,vars:13,consts:[["button",""],["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"click","id","disabled"],[1,"mat-button-toggle-label-content"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,s){if(1&i){const r=Le();Ti(),m(0,"button",1,0),te("click",function(){return re(r),oe(s._onButtonClick())}),m(2,"span",2),K(3,wUe,1,1,"mat-pseudo-checkbox",3)(4,SUe,1,1,"mat-pseudo-checkbox",3),un(5),_()(),be(6,"span",4)(7,"span",5)}if(2&i){const r=Gt(1);S("id",s.buttonId)("disabled",s.disabled||null),$t("role",s.isSingleSelector()?"radio":"button")("tabindex",s.disabled?-1:s.tabIndex)("aria-pressed",s.isSingleSelector()?null:s.checked)("aria-checked",s.isSingleSelector()?s.checked:null)("name",s._getButtonName())("aria-label",s.ariaLabel)("aria-labelledby",s.ariaLabelledby),b(3),Vn(s.buttonToggleGroup&&s.checked&&!s.buttonToggleGroup.multiple&&!s.buttonToggleGroup.hideSingleSelectionIndicator?3:-1),b(),Vn(s.buttonToggleGroup&&s.checked&&s.buttonToggleGroup.multiple&&!s.buttonToggleGroup.hideMultipleSelectionIndicator?4:-1),b(3),S("matRippleTrigger",r)("matRippleDisabled",s.disableRipple||s.disabled)}},dependencies:[jt,Qie],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);border-radius:var(--mat-legacy-button-toggle-shape)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:var(--mat-standard-button-toggle-shape);border:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard .mat-pseudo-checkbox,.mat-button-toggle-group-appearance-standard .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var( --mat-standard-button-toggle-selected-state-text-color )}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-legacy-button-toggle-text-color);font-family:var(--mat-legacy-button-toggle-label-text-font);font-size:var(--mat-legacy-button-toggle-label-text-size);line-height:var(--mat-legacy-button-toggle-label-text-line-height);font-weight:var(--mat-legacy-button-toggle-label-text-weight);letter-spacing:var(--mat-legacy-button-toggle-label-text-tracking);--mat-minimal-pseudo-checkbox-selected-checkmark-color: var( --mat-legacy-button-toggle-selected-state-text-color )}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-legacy-button-toggle-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle .mat-pseudo-checkbox{margin-right:12px}[dir=rtl] .mat-button-toggle .mat-pseudo-checkbox{margin-right:0;margin-left:12px}.mat-button-toggle-checked{color:var(--mat-legacy-button-toggle-selected-state-text-color);background-color:var(--mat-legacy-button-toggle-selected-state-background-color)}.mat-button-toggle-disabled{color:var(--mat-legacy-button-toggle-disabled-state-text-color);background-color:var(--mat-legacy-button-toggle-disabled-state-background-color);--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var( --mat-legacy-button-toggle-disabled-state-text-color )}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-legacy-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-appearance-standard{color:var(--mat-standard-button-toggle-text-color);background-color:var(--mat-standard-button-toggle-background-color);font-family:var(--mat-standard-button-toggle-label-text-font);font-size:var(--mat-standard-button-toggle-label-text-size);line-height:var(--mat-standard-button-toggle-label-text-line-height);font-weight:var(--mat-standard-button-toggle-label-text-weight);letter-spacing:var(--mat-standard-button-toggle-label-text-tracking)}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-standard-button-toggle-divider-color)}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-selected-state-text-color);background-color:var(--mat-standard-button-toggle-selected-state-background-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-standard-button-toggle-disabled-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-state-background-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var( --mat-standard-button-toggle-disabled-selected-state-text-color )}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-disabled-selected-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-standard-button-toggle-state-layer-color)}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-hover-state-layer-opacity)}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-focus-state-layer-opacity)}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-legacy-button-toggle-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-standard-button-toggle-height)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-legacy-button-toggle-state-layer-color)}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{--mat-focus-indicator-border-radius:var(--mat-standard-button-toggle-shape)}.mat-button-toggle-group-appearance-standard .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape);border-bottom-right-radius:var(--mat-standard-button-toggle-shape)}.mat-button-toggle-group-appearance-standard .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-left-radius:var(--mat-standard-button-toggle-shape);border-bottom-left-radius:var(--mat-standard-button-toggle-shape)}"],encapsulation:2,changeDetection:0})}return t})(),loe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[Ki,Tc,aoe,Ki]})}return t})();function Ip(t,n,e,i){return new(e||(e=Promise))(function(r,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):function s(r){return r instanceof e?r:new e(function(o){o(r)})}(u.value).then(a,l)}c((i=i.apply(t,n||[])).next())})}function UD(t,n={}){const{selector:e}=n,i=function XUe(t,n){var e={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(t);s<i.length;s++)n.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(e[i[s]]=t[i[s]])}return e}(n,["selector"]);return new es(s=>{const r=new AbortController,o=r.signal;let a=!0,l=!1;const c=new Tn;let u;if(c.add(()=>{l=!0,a&&r.abort()}),i){if(i.signal)if(i.signal.aborted)r.abort();else{const d=i.signal,h=()=>{o.aborted||r.abort()};d.addEventListener("abort",h),c.add(()=>d.removeEventListener("abort",h))}u=Object.assign({},i,{signal:o})}else u={signal:o};return fetch(t,u).then(d=>{e?c.add(oo(e(d)).subscribe(h=>s.next(h),h=>{a=!1,l||s.error(h)},()=>{a=!1,s.complete()})):(a=!1,s.next(d),s.complete())}).catch(d=>{a=!1,l||s.error(d)}),c})}"function"==typeof SuppressedError&&SuppressedError;class QUe{constructor(n,e){this.notifier=n,this.source=e}call(n,e){return e.subscribe(new JUe(n,this.notifier,this.source))}}class JUe extends ap{constructor(n,e,i){super(n),this.notifier=e,this.source=i}error(n){if(!this.isStopped){let e=this.errors,i=this.retries,s=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{e=new Pt;try{const{notifier:r}=this;i=r(e)}catch(r){return super.error(r)}s=lp(i,new op(this))}this._unsubscribeAndRecycle(),this.errors=e,this.retries=i,this.retriesSubscription=s,e.next(n)}}_unsubscribe(){const{errors:n,retriesSubscription:e}=this;n&&(n.unsubscribe(),this.errors=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}notifyNext(){const{_unsubscribe:n}=this;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=n,this.source.subscribe(this)}}var h5=Y(993),eGe=Y(299);class co{constructor(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(n,e=!1){return this.onePassHasher.start().appendStr(n).end(e)}static hashAsciiStr(n,e=!1){return this.onePassHasher.start().appendAsciiStr(n).end(e)}static _hex(n){const e=co.hexChars,i=co.hexOut;let s,r,o,a;for(a=0;a<4;a+=1)for(r=8*a,s=n[a],o=0;o<8;o+=2)i[r+1+o]=e.charAt(15&s),s>>>=4,i[r+0+o]=e.charAt(15&s),s>>>=4;return i.join("")}static _md5cycle(n,e){let i=n[0],s=n[1],r=n[2],o=n[3];i+=(s&r|~s&o)+e[0]-680876936|0,i=(i<<7|i>>>25)+s|0,o+=(i&s|~i&r)+e[1]-389564586|0,o=(o<<12|o>>>20)+i|0,r+=(o&i|~o&s)+e[2]+606105819|0,r=(r<<17|r>>>15)+o|0,s+=(r&o|~r&i)+e[3]-1044525330|0,s=(s<<22|s>>>10)+r|0,i+=(s&r|~s&o)+e[4]-176418897|0,i=(i<<7|i>>>25)+s|0,o+=(i&s|~i&r)+e[5]+1200080426|0,o=(o<<12|o>>>20)+i|0,r+=(o&i|~o&s)+e[6]-1473231341|0,r=(r<<17|r>>>15)+o|0,s+=(r&o|~r&i)+e[7]-45705983|0,s=(s<<22|s>>>10)+r|0,i+=(s&r|~s&o)+e[8]+1770035416|0,i=(i<<7|i>>>25)+s|0,o+=(i&s|~i&r)+e[9]-1958414417|0,o=(o<<12|o>>>20)+i|0,r+=(o&i|~o&s)+e[10]-42063|0,r=(r<<17|r>>>15)+o|0,s+=(r&o|~r&i)+e[11]-1990404162|0,s=(s<<22|s>>>10)+r|0,i+=(s&r|~s&o)+e[12]+1804603682|0,i=(i<<7|i>>>25)+s|0,o+=(i&s|~i&r)+e[13]-40341101|0,o=(o<<12|o>>>20)+i|0,r+=(o&i|~o&s)+e[14]-1502002290|0,r=(r<<17|r>>>15)+o|0,s+=(r&o|~r&i)+e[15]+1236535329|0,s=(s<<22|s>>>10)+r|0,i+=(s&o|r&~o)+e[1]-165796510|0,i=(i<<5|i>>>27)+s|0,o+=(i&r|s&~r)+e[6]-1069501632|0,o=(o<<9|o>>>23)+i|0,r+=(o&s|i&~s)+e[11]+643717713|0,r=(r<<14|r>>>18)+o|0,s+=(r&i|o&~i)+e[0]-373897302|0,s=(s<<20|s>>>12)+r|0,i+=(s&o|r&~o)+e[5]-701558691|0,i=(i<<5|i>>>27)+s|0,o+=(i&r|s&~r)+e[10]+38016083|0,o=(o<<9|o>>>23)+i|0,r+=(o&s|i&~s)+e[15]-660478335|0,r=(r<<14|r>>>18)+o|0,s+=(r&i|o&~i)+e[4]-405537848|0,s=(s<<20|s>>>12)+r|0,i+=(s&o|r&~o)+e[9]+568446438|0,i=(i<<5|i>>>27)+s|0,o+=(i&r|s&~r)+e[14]-1019803690|0,o=(o<<9|o>>>23)+i|0,r+=(o&s|i&~s)+e[3]-187363961|0,r=(r<<14|r>>>18)+o|0,s+=(r&i|o&~i)+e[8]+1163531501|0,s=(s<<20|s>>>12)+r|0,i+=(s&o|r&~o)+e[13]-1444681467|0,i=(i<<5|i>>>27)+s|0,o+=(i&r|s&~r)+e[2]-51403784|0,o=(o<<9|o>>>23)+i|0,r+=(o&s|i&~s)+e[7]+1735328473|0,r=(r<<14|r>>>18)+o|0,s+=(r&i|o&~i)+e[12]-1926607734|0,s=(s<<20|s>>>12)+r|0,i+=(s^r^o)+e[5]-378558|0,i=(i<<4|i>>>28)+s|0,o+=(i^s^r)+e[8]-2022574463|0,o=(o<<11|o>>>21)+i|0,r+=(o^i^s)+e[11]+1839030562|0,r=(r<<16|r>>>16)+o|0,s+=(r^o^i)+e[14]-35309556|0,s=(s<<23|s>>>9)+r|0,i+=(s^r^o)+e[1]-1530992060|0,i=(i<<4|i>>>28)+s|0,o+=(i^s^r)+e[4]+1272893353|0,o=(o<<11|o>>>21)+i|0,r+=(o^i^s)+e[7]-155497632|0,r=(r<<16|r>>>16)+o|0,s+=(r^o^i)+e[10]-1094730640|0,s=(s<<23|s>>>9)+r|0,i+=(s^r^o)+e[13]+681279174|0,i=(i<<4|i>>>28)+s|0,o+=(i^s^r)+e[0]-358537222|0,o=(o<<11|o>>>21)+i|0,r+=(o^i^s)+e[3]-722521979|0,r=(r<<16|r>>>16)+o|0,s+=(r^o^i)+e[6]+76029189|0,s=(s<<23|s>>>9)+r|0,i+=(s^r^o)+e[9]-640364487|0,i=(i<<4|i>>>28)+s|0,o+=(i^s^r)+e[12]-421815835|0,o=(o<<11|o>>>21)+i|0,r+=(o^i^s)+e[15]+530742520|0,r=(r<<16|r>>>16)+o|0,s+=(r^o^i)+e[2]-995338651|0,s=(s<<23|s>>>9)+r|0,i+=(r^(s|~o))+e[0]-198630844|0,i=(i<<6|i>>>26)+s|0,o+=(s^(i|~r))+e[7]+1126891415|0,o=(o<<10|o>>>22)+i|0,r+=(i^(o|~s))+e[14]-1416354905|0,r=(r<<15|r>>>17)+o|0,s+=(o^(r|~i))+e[5]-57434055|0,s=(s<<21|s>>>11)+r|0,i+=(r^(s|~o))+e[12]+1700485571|0,i=(i<<6|i>>>26)+s|0,o+=(s^(i|~r))+e[3]-1894986606|0,o=(o<<10|o>>>22)+i|0,r+=(i^(o|~s))+e[10]-1051523|0,r=(r<<15|r>>>17)+o|0,s+=(o^(r|~i))+e[1]-2054922799|0,s=(s<<21|s>>>11)+r|0,i+=(r^(s|~o))+e[8]+1873313359|0,i=(i<<6|i>>>26)+s|0,o+=(s^(i|~r))+e[15]-30611744|0,o=(o<<10|o>>>22)+i|0,r+=(i^(o|~s))+e[6]-1560198380|0,r=(r<<15|r>>>17)+o|0,s+=(o^(r|~i))+e[13]+1309151649|0,s=(s<<21|s>>>11)+r|0,i+=(r^(s|~o))+e[4]-145523070|0,i=(i<<6|i>>>26)+s|0,o+=(s^(i|~r))+e[11]-1120210379|0,o=(o<<10|o>>>22)+i|0,r+=(i^(o|~s))+e[2]+718787259|0,r=(r<<15|r>>>17)+o|0,s+=(o^(r|~i))+e[9]-343485551|0,s=(s<<21|s>>>11)+r|0,n[0]=i+n[0]|0,n[1]=s+n[1]|0,n[2]=r+n[2]|0,n[3]=o+n[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(co.stateIdentity),this}appendStr(n){const e=this._buffer8,i=this._buffer32;let r,o,s=this._bufferLength;for(o=0;o<n.length;o+=1){if(r=n.charCodeAt(o),r<128)e[s++]=r;else if(r<2048)e[s++]=192+(r>>>6),e[s++]=63&r|128;else if(r<55296||r>56319)e[s++]=224+(r>>>12),e[s++]=r>>>6&63|128,e[s++]=63&r|128;else{if(r=1024*(r-55296)+(n.charCodeAt(++o)-56320)+65536,r>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");e[s++]=240+(r>>>18),e[s++]=r>>>12&63|128,e[s++]=r>>>6&63|128,e[s++]=63&r|128}s>=64&&(this._dataLength+=64,co._md5cycle(this._state,i),s-=64,i[0]=i[16])}return this._bufferLength=s,this}appendAsciiStr(n){const e=this._buffer8,i=this._buffer32;let r,s=this._bufferLength,o=0;for(;;){for(r=Math.min(n.length-o,64-s);r--;)e[s++]=n.charCodeAt(o++);if(s<64)break;this._dataLength+=64,co._md5cycle(this._state,i),s=0}return this._bufferLength=s,this}appendByteArray(n){const e=this._buffer8,i=this._buffer32;let r,s=this._bufferLength,o=0;for(;;){for(r=Math.min(n.length-o,64-s);r--;)e[s++]=n[o++];if(s<64)break;this._dataLength+=64,co._md5cycle(this._state,i),s=0}return this._bufferLength=s,this}getState(){const n=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[n[0],n[1],n[2],n[3]]}}setState(n){const e=n.buffer,i=n.state,s=this._state;let r;for(this._dataLength=n.length,this._bufferLength=n.buflen,s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],r=0;r<e.length;r+=1)this._buffer8[r]=e.charCodeAt(r)}end(n=!1){const e=this._bufferLength,i=this._buffer8,s=this._buffer32,r=1+(e>>2);this._dataLength+=e;const o=8*this._dataLength;if(i[e]=128,i[e+1]=i[e+2]=i[e+3]=0,s.set(co.buffer32Identity.subarray(r),r),e>55&&(co._md5cycle(this._state,s),s.set(co.buffer32Identity)),o<=4294967295)s[14]=o;else{const a=o.toString(16).match(/(.*?)(.{0,8})$/);if(null===a)return;const l=parseInt(a[2],16),c=parseInt(a[1],16)||0;s[14]=l,s[15]=c}return co._md5cycle(this._state,s),n?this._state:co._hex(this._state)}}if(co.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),co.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),co.hexChars="0123456789abcdef",co.hexOut=[],co.onePassHasher=new co,"5d41402abc4b2a76b9719d911017c592"!==co.hashStr("hello"))throw new Error("Md5 self test failed.");class tGe{constructor(n,e){this._queue=[],this._ready=!0;const i=this;Worker?(i._hashWorker=new Worker(n,e),i._hashWorker.onmessage=i._recievedMessage.bind(i),i._hashWorker.onerror=s=>{i._ready=!1,console.error("Hash worker failure",s)}):(i._ready=!1,console.error("Web Workers are not supported in this browser"))}hash(n){const e=this;let i;return i=new Promise((s,r)=>{e._queue.push({blob:n,resolve:s,reject:r}),e._processNext()}),i}terminate(){this._ready=!1,this._hashWorker.terminate()}_processNext(){this._ready&&!this._processing&&this._queue.length>0&&(this._processing=this._queue.pop(),this._hashWorker.postMessage(this._processing.blob))}_recievedMessage(n){var e,i;const s=n.data;s.success?null===(e=this._processing)||void 0===e||e.resolve(s.result):null===(i=this._processing)||void 0===i||i.reject(s.result),this._processing=void 0,this._processNext()}}function dn(t,n,e,i="debug",s){if(window.debug){const o=["color: #0288D1",`color:${s||"#009688"}`,"color: default"];e?hoe()?console[i](`%c[PlaceOS]%c[${t}] %c${n}`,...o,e):console[i](`[PlaceOS][${t}] ${n}`,e):hoe()?console[i](`%c[PlaceOS]%c[${t}] %c${n}`,...o):console[i](`[PlaceOS][${t}] ${n}`)}}function hoe(){return!(document.documentMode||/Edge/.test(navigator.userAgent))}function foe(){var t,n,e,i,s,r;const o=null!==(t=window.location)&&void 0!==t&&t.hash?null===(n=window.location)||void 0===n?void 0:n.hash.slice(1):(null===(e=window.location)||void 0===e?void 0:e.href.split("#")[1])||"";let a=null!==(i=window.location)&&void 0!==i&&i.search?null===(s=window.location)||void 0===s?void 0:s.search.slice(1):(null===(r=window.location)||void 0===r?void 0:r.href.split("?")[1])||"",l={};if(o)if(o.indexOf("?")>=0){const u=o.split("?");l=ay(u[0]),a||(a=u[1])}else l=ay(o);let c={};return a&&(c=ay(a)),Object.assign(Object.assign({},l),c)}function ay(t){const n={},e=t.split("&");for(const i of e){const s=i.split("=");s[1]&&(n[decodeURIComponent(s[0])]=decodeURIComponent(s[1]))}return n}const poe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function H_(t){var n,e,i,s,r;const o=((null===(n=window.location)||void 0===n?void 0:n.hash)||"").replace(new RegExp(`${t}[a-zA-Z0-9_+-.%=]*&?`,"g"),"").replace(/&&/g,"&").replace(/#&/g,"#").replace(/&$/g,"#"),a=((null===(e=window.location)||void 0===e?void 0:e.search)||"").replace(new RegExp(`${t}[a-zA-Z0-9_+-.%=]*&?`,"g"),"").replace(/&&/g,"&").replace(/\?&/g,"#").replace(/&$/g,"#");null!==(i=window.history)&&void 0!==i&&i.replaceState&&(null===(s=window.history)||void 0===s||s.replaceState(null,"",`${null===(r=window.location)||void 0===r?void 0:r.pathname}${o}${a}`))}class aGe{abort(){dn("Stub","Aborted")}}function BS(t){let n="";if(t)for(const e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n+=`${n?"&":""}${e}=${encodeURIComponent(t[e])}`);return n}const W_={};function cf(t,n,e=300){if(!(t&&n&&n instanceof Function))throw new Error(t?"Cannot create named timeout without a name":"Cannot create a timeout without a callback");q_(t),W_[t]=setTimeout(()=>{n(),delete W_[t]},e)}function q_(t){W_[t]&&(clearTimeout(W_[t]),delete W_[t])}const lGe={id:"mock-authority",name:"localhost:4200",description:"",domain:"localhost:4200",login_url:"/login?continue={{url}}",logout_url:"/logout",session:!0,production:!1,config:{},version:"2.0.0"};function Hn(t){const n=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===n?new t.constructor(+t):"number"==typeof t||"[object Number]"===n||"string"==typeof t||"[object String]"===n?new Date(t):new Date(NaN)}function aa(t,n){return t instanceof Date?new t.constructor(n):new Date(n)}function K_(t,n){const e=Hn(t);if(isNaN(n))return aa(t,NaN);if(!n)return e;const i=e.getDate(),s=aa(t,e.getTime());return s.setMonth(e.getMonth()+n+1,0),i>=s.getDate()?s:(e.setFullYear(s.getFullYear(),s.getMonth(),i),e)}function uy(t,n){return K_(t,12*n)}function GD(t,n){return aa(t,+Hn(t)+n)}Math.pow(10,8);const uGe=864e5,boe=6e4,dGe=36e5;function HD(t,n){return GD(t,n*dGe)}function vl(t,n){return+Hn(t)<+Hn(n)}let cr,Ko,Yi={};const Di={};let ur="",X_="";const Y_=new Mt(""),VS=new Mt("");let f5="/api/engine/v2";const uf=new Mt(!1),pGe=uf.asObservable();let WD=0;function zS(){var t,n;return`${Yi.secure||(null===(t=window.location)||void 0===t?void 0:t.protocol.indexOf("https"))>=0?"https:":"http:"}//${Yi.host||(null===(n=window.location)||void 0===n?void 0:n.host)}${woe()}`}function woe(){return"ACA Engine"===Yi.version?"/control/api":f5}function Soe(){return ur}function kp(){return KD("x-api-key",!1)||""}function Eo(t=!0){if(Yi.mock)return"mock-token";if(!cr)return"";if(kp()&&!Yi.ignore_api_key)return"x-api-key";const n=cr.getItem(`${ur}_expires_at`)||"",e=Y_.getValue();return vl(+n,new Date)&&(dn("Auth","Token expired. Requesting new token..."),XD(),Di.load_authority||(WD+=1,cf("re-authorise",()=>Eoe().catch(i=>dn("Auth",`Failed to get token: ${i}`)),200*Math.min(20,WD))),!t)?"":e||cr.getItem(`${ur}_access_token`)||""}function qD(){return VS.getValue()||cr.getItem(`${ur}_refresh_token`)||""}function p5(){var t;return Yi.host||(null===(t=window.location)||void 0===t?void 0:t.host)}function kc(){return Ko}function US(){return!!Yi.mock}function Coe(){return pGe}function m5(){return"true"===KD("trust")||"true"===KD("trusted")}function _5(){return!!kp()&&!Yi.ignore_api_key||"true"===KD("fixed_device")}function KD(t,n=!0){let i=foe()[t];if(cr){const s=`${Soe()}_${t}`;i=i||cr.getItem(s)||cr.getItem(t)||"",n&&cr.setItem(s,`${i}`)}return i}function xoe(){return dn("Auth","Refreshing authorty."),Ko=void 0,g5()}function XD(){dn("Auth","Invalidating tokens."),cr.removeItem(`${ur}_access_token`),cr.removeItem(`${ur}_expires_at`),Y_.getValue()&&Y_.next("")}function Eoe(t,n=Ko){return Di.authorise||(Di.authorise=new Promise((e,i)=>{if(!n)return delete Di.authorise,i("Authority is not loaded");dn("Auth","Authorising user...");const s=()=>{if(Eo(!1))dn("Auth","Valid token found."),delete Di.authorise,e(Eo());else{const r=[()=>{dn("Auth","Successfully generated token."),e(Eo()),delete Di.authorise},()=>{dn("Auth","Failed to generate token."),i("Failed to generate token"),setTimeout(()=>delete Di.authorise,200)}];Yi&&"password"===Yi.auth_type?(dn("Auth","Logging in with credentials."),function NGe(t){return Moe(function AGe(t){return`${t.token_uri||"/auth/token"}?${BS({grant_type:"password",client_id:ur,client_secret:t.client_secret,redirect_uri:t.redirect_uri,authority:Ko?.id,scope:t.scope,username:t.username,password:t.password})}`}(t))}(Yi).then(...r),WD=0):X_||qD()?(dn("Auth","Generating token with "+(X_?"code":"refresh token")),Doe().then(...r),WD=0):n.session?(dn("Auth","Users has session. Authorising application..."),function xGe(t){return Ip(this,void 0,void 0,function*(){var n;const e=function kGe(t){const n=function RGe(){const t=function nGe(t=40){let n="";for(let e=0;e<t;e++)n+=poe.charAt(Math.floor(Math.random()*poe.length));return n}();return cr.setItem(`${ur}_nonce`,t),t}();t=t?`${n};${t}`:n;const e=!!Yi&&(Yi.auth_uri||"").indexOf("?")>=0,i=(Yi?Yi.auth_uri:null)||"/auth/oauth/authorize",s=m5()||"auth_code"===Yi.auth_type?"code":"token";let r=`${i}${e?"&":"?"}response_type=${encodeURIComponent(s)}&client_id=${encodeURIComponent(ur)}&state=${encodeURIComponent(t)}&redirect_uri=${encodeURIComponent(Yi.redirect_uri)}&scope=${encodeURIComponent(Yi.scope)}`;if("auth_code"===Yi.auth_type){const{challenge:o,verify:a}=function DGe(t=43){const n=new Array(t).fill(0).map(()=>koe[Math.floor(Math.random()*koe.length)]).join(""),e=h5.Kp(h5.Cw(n));return{challenge:n,verify:h5.if(eGe.hash(e)).split("=")[0].replace(/\//g,"_").replace(/\+/g,"-")}}();sessionStorage.setItem(`${ur}_challenge`,o),r+="&code_challenge_method=S256",r+=`&code_challenge=${a}`}return r}(t);if(Yi.use_iframe)return function EGe(t){return Di.iframe_auth||(Di.iframe_auth=new Promise((n,e)=>{dn("Auth","Authorizing in an iFrame...");const i=document.createElement("iframe");i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.height="1px",i.style.width="1px",i.style.zIndex="-1",i.id="place-authorize",i.src=`${t}`;const s=r=>{var o;if(r.origin===(null===(o=window.location)||void 0===o?void 0:o.origin)&&"place-os"===r.data.type){const a=r.data;if(dn("Auth","Received credentials from iFrame..."),document.body.removeChild(i),q_("iframe_auth"),window.removeEventListener("message",s),delete Di.iframe_auth,a.token)return n(),b5(Object.assign({access_token:a.token},a));X_=a.code||"",Doe().then(l=>n(l),l=>e(l))}};cf("iframe_auth",()=>{dn("Auth","Unable to resolve iFrame after 15 seconds..."),e()},15e3),window.addEventListener("message",s),i.onerror=r=>{dn("Auth","iFrame error.",r),delete Di.iframe_auth,e()},document.body.appendChild(i)})),Di.iframe_auth}(e);null===(n=window.location)||void 0===n||n.assign(e)})}(t).then(...r)):(dn("Auth","No user session"),Ioe(n),i("No user session"),setTimeout(()=>delete Di.authorise,200))}};(function TGe(){return Di.check_token||(Di.check_token=new Promise((t,n)=>Ip(this,void 0,void 0,function*(){Eo()?(dn("Auth","Valid token found."),t(Eo())):(dn("Auth","No token. Checking URL for auth credentials..."),(yield function IGe(){return Di.check_params||(Di.check_params=new Promise(t=>{dn("Auth","Checking for auth parameters...");let n=foe();if((!n||Object.keys(n).length<=0)&&sessionStorage&&(n=JSON.parse(sessionStorage.getItem("ENGINE.auth.params")||"{}")),n&&(n.code||n.access_token||n.refresh_token)){n.code&&(X_=n.code,H_("code")),n.refresh_token&&(cr.setItem(`${ur}_refresh_token`,n.refresh_token),H_("refresh_token"));const e=cr.getItem(`${ur}_nonce`)||"",i=(n.state||"").split(";");H_("state"),H_("token_type"),e===i[0]?(b5(n),t(!!n.access_token)):t(!1)}else t(!1);cf("check_params_promise",()=>delete Di.check_params,50)})),Di.check_params}())?t(!0):n()),delete Di.check_token}))),Di.check_token})().then(s,s)})),Di.authorise}function g5(t=0){return Di.load_authority||(Di.load_authority=new Promise(n=>{var e;if(uf.next(!1),Yi.mock)return Ko=lGe,dn("Auth","System in mock mode"),uf.next(!0),void n();dn("Auth",`Fixed: ${_5()} | Trusted: ${m5()}`),dn("Auth","Loading authority...");const i=Yi.secure||(null===(e=window.location)||void 0===e?void 0:e.protocol.indexOf("https"))>=0,s=r=>{dn("Auth",`Failed to load authority(${r})`),uf.next(!1),cf("load_authority",()=>{delete Di.load_authority,g5(t).then(o=>n())},300*Math.min(20,++t))};UD(`${i?"https:":"http:"}//${p5()}/auth/authority`,{credentials:"same-origin"}).subscribe(r=>Ip(this,void 0,void 0,function*(){if(!r.ok)return s(yield r.text().catch(a=>a));Ko=yield r.json(),f5=/[2-9]\.[0-9]+\.[0-9]+/g.test(Ko.version||"")?"/api/engine/v2":"/control/api",dn("Auth","Loaded authority.",[],"group"),Ko&&(dn("Auth",`Name: ${Ko.name}`),dn("Auth",`Version: ${Ko.version}`),dn("Auth",`Domain: ${Ko.domain}`),dn("Auth",`Session: ${Ko.session}`),dn("Auth",`Production: ${Ko.production}`),dn("Auth",`Config Keys: ${Object.keys(Ko.config||{}).length}`)),dn("Auth","",[],"groupEnd");const o=()=>{uf.next(!0),dn("Auth","Application set online."),n()};delete Di.load_authority,Eoe("").then(o,o)}),s)})),Di.load_authority}let Toe=!1;function Ioe(t){var n,e;if(!1!==Yi.handle_login&&!Toe){dn("Auth","Redirecting to login page...");const i=null===(n=t.login_url)||void 0===n?void 0:n.replace("{{url}}",encodeURIComponent(null===(e=window.location)||void 0===e?void 0:e.href));throw setTimeout(()=>{var s;return null===(s=window.location)||void 0===s?void 0:s.assign(i)},300),Toe=!0,new Error("Redirecting to login page...")}dn("Auth","Login being handled locally."),delete Di.authorise}const koe="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".split("");function Doe(){return Moe(...function MGe(){let n=(Yi.token_uri||"/auth/token")+`?client_id=${encodeURIComponent(ur)}`,e="";if(n+=`&redirect_uri=${encodeURIComponent(Yi.redirect_uri)}`,qD()){n+=`&refresh_token=${encodeURIComponent(qD())}`,n+="&grant_type=refresh_token";const i=n.split("?");n=i[0],e=i[1]}else{n+=`&code=${encodeURIComponent(X_)}`,n+="&grant_type=authorization_code";const i=sessionStorage.getItem(`${ur}_challenge`);i&&(n+=`&code_verifier=${i}`,sessionStorage.removeItem(`${ur}_challenge`)),X_=""}return[n,e]}())}function Moe(t,n=""){return Di.generate_tokens||(Di.generate_tokens=new Promise((e,i)=>{dn("Auth","Generating new token...");const s=r=>{dn("Auth","Error generating new tokens.",r),cr.removeItem(`${ur}_refresh_token`),VS.next(""),i(),delete Di.generate_tokens};UD(t,{method:"POST",body:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).subscribe(r=>Ip(this,void 0,void 0,function*(){if(!r.ok)return s(r);b5(yield r.json()),e(),delete Di.generate_tokens}),s)})),Di.generate_tokens}function b5(t){const n=function fGe(t,n){return GD(t,1e3*n)}(new Date,Math.max(60,parseInt(t.expires_in,10)-300));dn("Auth","Tokens generated storing..."),m5()&&(t.access_token&&(cr.setItem(`${ur}_access_token`,t.access_token),H_("access_token")),t.refresh_token&&(cr.setItem(`${ur}_refresh_token`,t.refresh_token),H_("refresh_token"))),t.expires_in&&(cr.setItem(`${ur}_expires_at`,`${n.valueOf()}`),H_("expires_in")),uf.next(!0),Y_.next(t.access_token||""),VS.next(t.refresh_token||"")}const GS={};function LGe(t,n,e,i=GS){const s=function PGe(t,n,e=GS){const s=n.replace(/(http|https)?:\/\/[a-zA-Z0-9.]*:?([0-9]*)?/g,"").replace(/^\//,"").split("?")[0].split("/"),r=Object.keys(e).reduce((o,a)=>(0===a.indexOf(`${t}|`)&&o.push(e[a]),o),[]);for(const o of r)if(o.path_structure.length===s.length){let a=!0;for(let l=0;l<o.path_structure.length;l++)if(!o.path_structure[l]&&o.path_parts[l]!==s[l]){a=!1;break}if(a)return o}return null}(t,n,i);if(s){const r=function $Ge(t,n,e){const i=t.replace(/(http|https):\/\/[a-zA-Z0-9.]*:?([0-9]*)?/g,"").split("?"),s=i[0].replace(/^\//g,""),o=ay(i[1]||""),a=s.split("/"),l={};for(const u of n.path_structure)u&&(l[u]=a[n.path_structure.indexOf(u)]);const c={url:t,path:n.path,method:n.method,metadata:n.metadata,route_params:l,query_params:o,body:e};return dn("HTTP(M)",`MATCHED ${c.method}:`,c),c}(n,s,e);return function BGe(t,n){const e=t.callback?t.callback(n):t.metadata,i=t.delay_variance||100,s=t.delay||300,r=Math.floor(Math.random()*i-i/2)+s;return dn("HTTP(M)",`RESP ${n.method}:`,[n.url,e]),oo([e]).pipe(zv(Math.max(200,r)))}(s,r)}return null}const Aoe={};function la(t,n,e=jS){return n||(n={response_type:"json"}),e("GET",t,Object.assign({response_type:"json"},n))}function dy(t,n,e,i=jS){return e||(e={response_type:"json"}),i("POST",t,Object.assign({body:n,response_type:"json"},e))}function YD(t,n,e,i=jS){return e||(e={response_type:"json"}),i("PUT",t,Object.assign({body:n,response_type:"json"},e))}function ZD(t,n,e,i=jS){return e||(e={response_type:"json"}),i("PATCH",t,Object.assign({body:n,response_type:"json"},e))}function QD(t,n,e=jS){return n||(n={response_type:"void"}),e("DELETE",t,Object.assign({response_type:"void"},n))}function zGe(t,n){return Ip(this,arguments,void 0,function*(e,i,s=Aoe){if(e.headers){const r={};e.headers.forEach?e.headers.forEach((o,a)=>r[a.toLowerCase()]=o):Object.keys(e.headers).forEach(o=>r[o.toLowerCase()]=e.headers[o]),s[e.url||""]=r}switch(i){case"json":return yield e.json().catch(()=>({}));case"text":return yield e.text()}})}const Ooe=()=>{XD(),xoe().then(()=>null,()=>setTimeout(()=>Ooe(),1e3))};function jS(t,n,e,i=US,s=LGe,r=zGe){if(i()){const o=s(t,n,e?.body);if(o)return o}return e.headers=e.headers||{},e.headers["Content-Type"]="application/json",function vGe(){return Y_.pipe(ze(t=>!!function bGe(){return!!Eo()}()))}().pipe(an(o=>o),ai(1),nn(o=>("x-api-key"===Eo()?e.headers["X-API-Key"]=kp():e.headers.Authorization=`Bearer ${Eo()}`,UD(n,Object.assign(Object.assign({},e),{body:JSON.stringify(e.body),method:t,credentials:"same-origin"})))),nn(o=>o.ok?r(o,e.response_type):mp(o)),function ZUe(t){return n=>n.lift(new QUe(t,n))}(o=>o.pipe(qa((a,l)=>511===a.status?(Ioe(kc()),gt(a)):l+1>4||401!==a.status?mp(a||{}):(dn("HTTP","Auth error",a),Ooe(),gt(a))))))}let y5={},w5={},JD="";const eM=t=>t;function hy(t){const{query_params:n,fn:e,path:i,endpoint:s}=t,r=BS(n),o=`${s||zS()}${i?"/"+i:""}${r?"?"+r:""}`;return la(o).pipe(ze(a=>{const l=function GGe(t,n,e){const i=function VGe(t,n=Aoe){return n[t]||{}}("/"===t[0]?`${location.origin}${t}`:t),s={total:0,next:null};if(i&&i["x-total-count"]){const r=+(i["x-total-count"]||0);(n.length<2||n.length<12&&n.indexOf("offset=")>=0)&&(y5[e]=r),w5[e]=r,s.total=r}return i&&i.link&&(JD=function iGe(t){if(0===t.length)throw new Error("Input must not be of zero length");const n=t.split(","),e={};for(const i of n){const s=i.split(";");if(2!==s.length)throw new Error("Section could not be split on ';'");const r=s[0].replace(/<(.*)>/,"$1").trim();e[s[1].replace(/rel="(.*)"/,"$1").trim()]=r}return e}(i.link||"").next,s.next=ay(JD.split("?")[1])),s}(o,r,i);return{total:l.total||0,next:l.next?()=>hy({query_params:l.next,fn:e,endpoint:s,path:i}):null,data:a&&a instanceof Array?a.map(c=>(e||eM)(c)):!a||a instanceof Array||!a.results?[]:a.results.map(c=>c)}}))}function S5(t){const{query_params:n,id:e,path:i,fn:s}=t,r=BS(n);return la(`${zS()}/${i}/${e}${r?"?"+r:""}`).pipe(ze(a=>(s||eM)(a)))}function Noe(t){const{id:n,query_params:e,form_data:i,method:s,path:r,fn:o}=t,a=BS(Object.assign(Object.assign({},e),{version:i.version||0}));return("put"===s?YD:ZD)(`${zS()}/${r}/${n}${a?"?"+a:""}`,i).pipe(ze(c=>(o||eM)(c)))}class yl{constructor(n={}){this.id=n.id||"",this.name=n.name||"",this.created_at=n.created_at||0,this.updated_at=n.updated_at||0,this.version=n.version||0}toJSON(){const n=Object.assign({},this);return n.version=this.version,delete n.created_at,function ly(t,n){for(const e in t)t.hasOwnProperty(e)&&n.indexOf(t[e])>=0&&delete t[e];return t}(n,[void 0,null,""])}}var Z_=function(t){return t[t.None=0]="None",t[t.Support=1]="Support",t[t.Admin=2]="Admin",t[t.NeverDisplay=3]="NeverDisplay",t}(Z_||{});class KS extends yl{get value(){return this.settings_string}constructor(n={}){super(n),this.parent_id=n.parent_id||"",this.updated_at=n.updated_at||Math.floor((new Date).getTime()/1e3),this.settings_string=n.settings_string||"",this.encryption_level=n.encryption_level||Z_.None,this.keys=n.keys||[],this.modified_by_id=n.modified_by_id||""}}var sM=function(t){return t[t.SSH=0]="SSH",t[t.Device=1]="Device",t[t.Service=2]="Service",t[t.Websocket=3]="Websocket",t[t.Logic=99]="Logic",t}(sM||{});class HGe extends yl{constructor(n={}){var e;super(n),this.description=n.description||"",this.module_name=n.module_name||"",this.role=null!==(e=n.role)&&void 0!==e?e:sM.Logic,this.default_uri=n.default_uri||"",this.default_port=n.default_port||1,this.ignore_connected=n.ignore_connected||!1,this.class_name=n.class_name||"",this.repository_id=n.repository_id||"",this.file_name=n.file_name||"",this.commit=n.commit||"",this.update_available=n.update_available||!1,this.update_info=n.update_info,this.settings=n.settings||[null,null,null,null],"object"!=typeof this.settings&&(this.settings=[null,null,null,null]);for(const i in Z_)!isNaN(Number(i))&&!this.settings[i]&&(this.settings[i]=new KS({parent_id:this.id,encryption_level:+i}))}}class x5{constructor(n={}){this.id=n.id||n.parent_id||"",this.name=n.name||"",this.description=n.description||"";try{this.details=("string"==typeof n.details?JSON.parse(n.details):n.details)||{}}catch{this.details=n.details||{}}this.editors=n.editors||[],this.schema=n.schema||"",this.updated_at=1e3*(n.updated_at||0)||Date.now(),this.modified_by_id=n.modified_by_id||"",this.version=n.version||0}}class WGe extends yl{get system_id(){return this.control_system_id}get actions(){const n=this._actions;return{functions:(n.functions||[]).map(s=>Object.assign(Object.assign({},s),{args:Object.assign({},s.args)})),mailers:(n.mailers||[]).map(s=>Object.assign(Object.assign({},s),{emails:[...s.emails]}))}}get conditions(){const n=this._conditions;return{comparisons:(n.comparisons||[]).map(s=>Object.assign(Object.assign({},s),{left:"object"==typeof s.left?Object.assign({},s.left):s.left,right:"object"==typeof s.right?Object.assign({},s.right):s.right})),time_dependents:(n.time_dependents||[]).map(s=>Object.assign({},s))}}constructor(n={}){super(n),this.description=n.description||"",this._actions=n.actions||{functions:[],mailers:[]},this._conditions=n.conditions||{comparisons:[],time_dependents:[]},this.debounce_period=n.debounce_period||0,this.important=n.important||!1,this.enabled=n.enabled||!1,this.webhook_secret=n.webhook_secret||"",this.control_system_id=n.system_id||n.control_system_id||"",this.zone_id=n.zone_id||"",this.system_name=n.system_name||(n.control_system?n.control_system.name:""),this.enable_webhook=n.enable_webhook||!1,this.exec_enabled=n.exec_enabled||!1,this.supported_methods=n.supported_methods||["POST"],this.activated_count=n.activated_count||n.trigger_count||0}}class E5 extends yl{constructor(n={}){super(n),this.settings=[null,null,null,null],this.trigger_list=[],this.description=n.description||"",this.tags=n.tags||[],this.triggers=n.triggers||[],this.settings=n.settings||[null,null,null,null],this.parent_id=n.parent_id||"",this.location=n.location||"",this.display_name=n.display_name||"",this.code=n.code||"",this.type=n.type||"",this.count=n.count||0,this.capacity=n.capacity||0,this.map_id=n.map_id||"",this.timezone=n.timezone||"",this.images=n.images||[],"object"!=typeof this.settings&&(this.settings=[null,null,null,null]);for(const e in Z_)!isNaN(Number(e))&&!this.settings[e]&&(this.settings[e]=new KS({parent_id:this.id,encryption_level:+e}));n.trigger_data&&n.trigger_data instanceof Array&&(this.trigger_list=n.trigger_data.map(e=>new WGe(e)))}}const J_="metadata";function YS(t){return new x5(t)}function uo(t,n,e={}){return S5({id:t,query_params:Object.assign(Object.assign({},e),{name:n}),fn:i=>YS(i[n]),path:J_})}class Loe extends yl{constructor(n={}){var e;super(n),this.settings=[null,null,null,null],this.module_list=[],this.display_name=n.display_name||"",this.description=n.description||"",this.email=n.email||"",this.code=n.code||"",this.capacity=n.capacity||0,this.features=n.features||[],this.bookable=n.bookable||!1,this.public=null!==(e=n.public)&&void 0!==e&&e,this.installed_ui_devices=n.installed_ui_devices||0,this.support_url=n.support_url||"",this.map_id=n.map_id||"",this.modules=n.modules||[],this.images=n.images||[],this.zones=n.zones||[],this.settings=n.settings||[null,null,null,null],this.timezone=n.timezone||"","object"!=typeof this.settings&&(this.settings=[null,null,null,null]);for(const i in Z_)!isNaN(Number(i))&&!this.settings[i]&&(this.settings[i]=new KS({parent_id:this.id,encryption_level:+i}));n.module_data&&n.module_data instanceof Array&&(this.module_list=n.module_data.map(i=>new KGe(i)))}}class KGe extends yl{get system_id(){return this.control_system_id}constructor(n={}){var e;super(n),this.settings=[null,null,null,null],this.driver_id=n.driver_id||n.dependency_id||"",this.control_system_id=n.control_system_id||"",this.edge_id=n.edge_id||"",this.ip=n.ip||"",this.tls=n.tls||!1,this.udp=n.udp||!1,this.port=n.port||1,this.makebreak=n.makebreak||!1,this.uri=n.uri||"",this.custom_name=n.custom_name||"",this.role=null!==(e=n.role)&&void 0!==e?e:sM.Logic,this.notes=n.notes||"",this.ignore_connected=n.ignore_connected||!1,this.connected=n.connected,this.running=n.running||!1,this.updated_at=n.updated_at||0,this.system=new Loe(n.control_system||n.system),this.has_runtime_error=n.has_runtime_error||!1,this.error_timestamp=n.error_timestamp||0,this.driver=new HGe(n.dependency||n.driver),this.settings=n.settings||[null,null,null,null],"object"!=typeof this.settings&&(this.settings=[null,null,null,null]);for(const i in Z_)!isNaN(Number(i))&&!this.settings[i]&&(this.settings[i]=new KS({parent_id:this.id,encryption_level:+i}))}toJSON(n=!1){const e=super.toJSON();return(e.role!==sM.Logic&&!n||!e.control_system_id)&&delete e.control_system_id,delete e.driver,delete e.system,delete e.error_timestamp,delete e.has_runtime_error,e}}function JS(t){return new KS(t)}function XGe(t={}){return hy({query_params:t,fn:JS,path:"settings"})}const ho="systems";function eg(t){return new Loe(t)}function eC(t={}){return hy({query_params:t,fn:eg,path:ho})}function $oe(t,n={}){return S5({id:t,query_params:n,fn:eg,path:ho})}class eje extends yl{constructor(n={}){super(n),this.password="",this.confirm_password="",this.authority_id=n.authority_id||"",this.email=n.email||"",this.email_digest=n.email_digest||"",this.phone=n.phone||"",this.country=n.country||"",this.building=n.building||"",this.image=n.image||"",this.metadata=n.metadata||"",this.login_name=n.login_name||"",this.staff_id=n.staff_id||"",this.first_name=n.first_name||"",this.last_name=n.last_name||"",this.support=!!n.support,this.sys_admin=!!n.sys_admin,this.ui_theme=n.ui_theme||"",this.card_number=n.card_number||"",this.groups=n.groups||[],this.department=n.department||"",this.work_preferences=n.work_preferences||[],this.work_overrides=n.work_overrides||{}}}const _y="users";function tC(t){return new eje(t)}function T5(t={}){return hy({query_params:t,fn:tC,path:_y})}function I5(t,n={}){return S5({id:t,query_params:n,fn:tC,path:_y})}function pM(t){return new E5(t)}function nC(t={}){return hy({query_params:t,fn:pM,path:"zones"})}const nje={url:"",deserializer:t=>JSON.parse(t.data),serializer:t=>JSON.stringify(t)};class k5 extends uF{constructor(n,e){if(super(),n instanceof es)this.destination=e,this.source=n;else{const i=this._config=Object.assign({},nje);if(this._output=new Pt,"string"==typeof n)i.url=n;else for(let s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);if(!i.WebSocketCtor&&WebSocket)i.WebSocketCtor=WebSocket;else if(!i.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new Uv}}lift(n){const e=new k5(this._config,this.destination);return e.operator=n,e.source=this,e}_resetState(){this._socket=null,this.source||(this.destination=new Uv),this._output=new Pt}multiplex(n,e,i){const s=this;return new es(r=>{try{s.next(n())}catch(a){r.error(a)}const o=s.subscribe(a=>{try{i(a)&&r.next(a)}catch(l){r.error(l)}},a=>r.error(a),()=>r.complete());return()=>{try{s.next(e())}catch(a){r.error(a)}o.unsubscribe()}})}_connectSocket(){const{WebSocketCtor:n,protocol:e,url:i,binaryType:s}=this._config,r=this._output;let o=null;try{o=e?new n(i,e):new n(i),this._socket=o,s&&(this._socket.binaryType=s)}catch(l){return void r.error(l)}const a=new Tn(()=>{this._socket=null,o&&1===o.readyState&&o.close()});o.onopen=l=>{const{_socket:c}=this;if(!c)return o.close(),void this._resetState();const{openObserver:u}=this._config;u&&u.next(l);const d=this.destination;this.destination=Ji.create(h=>{if(1===o.readyState)try{const{serializer:f}=this._config;o.send(f(h))}catch(f){this.destination.error(f)}},h=>{const{closingObserver:f}=this._config;f&&f.next(void 0),h&&h.code?o.close(h.code,h.reason):r.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),this._resetState()},()=>{const{closingObserver:h}=this._config;h&&h.next(void 0),o.close(),this._resetState()}),d&&d instanceof Uv&&a.add(d.subscribe(this.destination))},o.onerror=l=>{this._resetState(),r.error(l)},o.onclose=l=>{this._resetState();const{closeObserver:c}=this._config;c&&c.next(l),l.wasClean?r.complete():r.error(l)},o.onmessage=l=>{try{const{deserializer:c}=this._config;r.next(c(l))}catch(c){r.error(c)}}}_subscribe(n){const{source:e}=this;return e?e.subscribe(n):(this._socket||this._connectSocket(),this._output.subscribe(n),n.add(()=>{const{_socket:i}=this;0===this._output.observers.length&&(i&&1===i.readyState&&i.close(),this._resetState())}),n)}unsubscribe(){const{_socket:n}=this;n&&1===n.readyState&&n.close(),this._resetState(),super.unsubscribe()}}function zoe(t){return new k5(t)}var Yd=function(t){return t[t.PARSE_ERROR=0]="PARSE_ERROR",t[t.BAD_REQUEST=1]="BAD_REQUEST",t[t.ACCESS_DENIED=2]="ACCESS_DENIED",t[t.REQUEST_FAILED=3]="REQUEST_FAILED",t[t.UNKNOWN_CMD=4]="UNKNOWN_CMD",t[t.SYS_NOT_FOUND=5]="SYS_NOT_FOUND",t[t.MOD_NOT_FOUND=6]="MOD_NOT_FOUND",t[t.UNEXPECTED_FAILURE=7]="UNEXPECTED_FAILURE",t}(Yd||{}),Uoe=function(t){return t.Info="info",t.Debug="debug",t.Warning="warn",t.Error="error",t.Fatal="fatal",t.Trace="trace",t}(Uoe||{});const gM={},Goe=15;let ua,gy=0,joe=0;const Xo={},by={},rd={},bM={},df=new Mt(!1);rd._place_os_status=df.asObservable();const Hoe=new Mt([0,0]);rd._place_os_sync=Hoe.asObservable();let ng,lC,Woe=Date.now(),vM=0,Dp=null,D5=0;const cC=1e4,qoe=new Pt;function M5(){return zS().indexOf("/control/")>=0?"/control/websocket":`${woe()}/systems/control`}function Koe(){return df.getValue()}function Xoe(t,n=0,e=vy){return e(Object.assign({id:++gy,cmd:"bind"},t),n)}function vy(t,n=cC,e=0){const i=`${t.cmd}|${t.sys}|${t.mod}${t.index}|${t.name}|${t.args}|${function oGe(t=Date.now(),n=6e4){return Math.floor(t/n)}()}`;if(Xo[i])dn("WS","Request already in progress. Waiting...",t);else{const s=Object.assign(Object.assign({},t),{key:i});s.promise=new Promise((r,o)=>{const a=()=>{delete Xo[i],Xo[i]=null,vy(t,n,e).then(l=>r(l),l=>o(l))};if(ua&&Koe()){US()&&function _je(t,n,e){const i=`${t.sys}|${t.mod}_${t.index}|${t.name}`,s=function sje(t){return gM[t]}(t.sys),r=s&&s[t.mod]?s[t.mod][t.index-1||0]:null;if(r){switch(t.cmd){case"bind":e[i]=r.listen(t.name).subscribe(o=>{setTimeout(()=>{n.next({type:"notify",value:o,meta:t})},Math.floor(100*Math.random()+50))});break;case"unbind":e[i]&&(e[i].unsubscribe(),delete e[i],q_(`${i}`))}cf(`${t.id}-response`,()=>{const o={id:t.id,type:"success",value:"exec"===t.cmd?r.call(t.name,t.args):null};n.next(o)},10)}else cf(`${t.id}-error`,()=>n.next({id:t.id,type:"error",code:s?Yd.SYS_NOT_FOUND:Yd.MOD_NOT_FOUND}),10)}(t,ua,bM),s.resolve=r,s.reject=o;const l=`${t.sys}, ${t.mod}_${t.index}, ${t.name}`;dn("WS",`[${t.cmd.toUpperCase()}](${t.id}) ${l}`,t.args),ua.next(t),n>0&&cf(`${i}`,()=>{o("Request timed out."),delete Xo[i],Xo[i]=null},n)}else Dp?setTimeout(()=>a(),1e3):A5().then(()=>a())}),Xo[i]=s}return Xo[i].promise}function Yoe(t){if("pong"!==t&&t instanceof Object){if("notify"===t.type&&t.meta)!function hje(t,n,e=by,i=rd){const s=`${t.sys}|${t.mod}_${t.index}|${t.name}`;e[s]||(e[s]=new Mt(null),i[s]=e[s].asObservable());dn("WS",`[NOTIFY] ${`${t.sys}, ${t.mod}_${t.index}, ${t.name}`} changed`,[e[s].getValue(),"\u2192",n]),e[s].next(n)}(t.meta,t.value);else if("success"===t.type)!function uje(t){const n=Object.keys(Xo).map(e=>Xo[e]).find(e=>e?.id===t.id);dn("WS",`[SUCCESS](${t.id})`),n&&n.resolve&&(n.resolve(t.value),delete Xo[n.key])}(t);else if("debug"===t.type){dn("WS",`[DEBUG] ${t.mod}${t.klass||""} \u2192`,t.msg);const n=t.meta||{mod:"",index:""};qoe.next({mod_id:t.mod||"<empty>",module:`${n.mod}_${n.index}`,class_name:t.klass||"<empty>",message:t.msg||"<empty>",level:t.level||Uoe.Debug,time:Math.floor((new Date).getTime()/1e3)})}else"error"===t.type?function dje(t){let n="UNEXPECTED FAILURE";switch(t.code){case Yd.ACCESS_DENIED:n="ACCESS DENIED";break;case Yd.BAD_REQUEST:n="BAD REQUEST";break;case Yd.MOD_NOT_FOUND:n="MODULE NOT FOUND";break;case Yd.SYS_NOT_FOUND:n="SYSTEM NOT FOUND";break;case Yd.PARSE_ERROR:n="PARSE ERROR";break;case Yd.REQUEST_FAILED:n="REQUEST FAILED";break;case Yd.UNKNOWN_CMD:n="UNKNOWN COMMAND"}dn("WS",`[ERROR] ${n}(${t.id}): ${t.msg}`,void 0,"error");const e=Object.keys(Xo).map(i=>Xo[i]).filter(i=>i).find(i=>i.id===t.id);e&&e.reject&&(e.reject(t),q_(`${e.key}`),delete Xo[e.key])}(t):t.cmd||dn("WS","Invalid websocket message",t,"error");q_(`${t.id}`)}else"pong"===t&&(D5=Date.now(),dn("WS","Pong!"))}function A5(t=0){return null==Dp&&(Dp=new Promise(n=>{if(t>40)return location.reload();vM++,Woe=Date.now(),ua=US()?function mje(){const t=new Pt;return t.subscribe(n=>Yoe(n)),t}():function fje(){if(!kc()||!Eo())return null;const t=function wGe(){return!!Yi.secure}()||location.protocol.indexOf("https")>=0;let n=`ws${t?"s":""}://${p5()}${M5()}${_5()?"?fixed_device=true":""}`;const e=Eo();let i="x-api-key"===e?`api-key=${kp()}`:`bearer_token=${e}`;return function mGe(){return!!Yi.token_header}()||function sGe(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}()?(dn("WS","Authenticating through URL query parameter..."),n+=`${n.indexOf("?")>=0?"&":"?"}${i}`):(dn("WS","Authenticating through cookie..."),i+=`;max-age=120;path=${M5()};`,i+=(t?"secure;":"")+"samesite=strict",document.cookie=i,dn("WS","Cookies:",[document.cookie,i])),dn("WS",`Creating websocket connection to ws${t?"s":""}://${p5()}${M5()}`),zoe({url:n,serializer:s=>"object"==typeof s?JSON.stringify(s):s,deserializer:s=>{let r=s.data;if("pong"===r)return r;try{return JSON.parse(s.data)}catch{return r}}})}(),ua?(dn("WS(Debug)","Authority:",[kc()]),dn("WS","Connecting to websocket..."),ua.subscribe(e=>{df.getValue()||(dn("WS","Connection established."),n()),df.next(!0),vM=0,O5(),Yoe(e)},e=>{ua=void 0,Dp=null,Qoe(),O5(),function pje(t){df.next(!1),dn("WS","Websocket error:",t,void 0,"error"),401===t.status&&XD(),xoe(),yM()}(e)},()=>{ua=void 0,Dp=null,Qoe(),dn("WS","Connection closed by browser."),df.next(!1),yM()}),ng&&clearInterval(ng),D5=Date.now(),Zoe(),ng=setInterval(()=>Zoe(),1e3*Goe),O5(),joe+=1,lC=setTimeout(()=>{dn("WS","Unhealthy connection. Reconnecting..."),df.next(!1),Dp=null,yM()},3e4)):(ua?dn("WS",`Waiting on auth(${t}). Retrying in ${1e3*Math.min(10,t+1)}ms...`,[!!Eo(),!!kc()],"info"):dn("WS",`Failed to create websocket(${t}). Retrying in ${1e3*Math.min(10,t+1)}ms...`,void 0,"error"),setTimeout(()=>{Dp=null,A5(t).then(e=>n(e))},1e3*Math.min(10,++t)))})),Dp}function yM(){Hoe.next([joe,Date.now()-Woe]),ua&&Koe()&&(ua.complete(),ng&&(clearInterval(ng),ng=void 0)),dn("WS",`Reconnecting in ${Math.min(5e3,300*vM||1e3)}ms...`),cf("reconnect",()=>A5(),Math.min(5e3,300*(vM+1)||1e3))}function Zoe(){if(Date.now()-D5>4*Goe*1e3)return yM();ua?.next("ping")}function O5(){lC&&(clearTimeout(lC),lC=void 0)}function Qoe(){for(const t in Xo)Xo[t]&&delete Xo[t]}rd._place_os_debug_events=qoe.asObservable();var od=function(t){return t[t.NONE=0]="NONE",t[t.BIND=1]="BIND",t[t.UNBIND=2]="UNBIND",t}(od||{});class gje{constructor(n,e){this._module=n,this._pending=od.NONE,this._binding_count=0,this._stale_bindings=0,this.name=e,function rje(){return rd._place_os_status}().pipe(D_()).subscribe(i=>{i&&(this._stale_bindings||this._pending===od.BIND)?(dn("VAR","Re-binding to status variable",this.binding()),this.rebind()):i||(q_(`rebind:${JSON.stringify(this.binding())}`),dn("VAR","Binding dropped due to disconnection, re-binding when possible.",this.binding()),this._stale_bindings=this._binding_count||this._stale_bindings,this._binding_count=0)})}get count(){return this._binding_count}get value(){return function aje(t,n=by){const e=`${t.sys}|${t.mod}_${t.index}|${t.name}`;if(n[e])return n[e].getValue()}(this.binding())}listen(){return function oje(t,n=by,e=rd){const i=`${t.sys}|${t.mod}_${t.index}|${t.name}`;return n[i]||(n[i]=new Mt(void 0),e[i]=n[i].asObservable()),e[i]}(this.binding())}bind(){return(this._binding_count<=0&&this._stale_bindings<=0||this._pending===od.UNBIND)&&(this._pending=od.BIND,Xoe(this.binding()).then(()=>{this._binding_count++,this._pending=od.NONE}).catch(()=>null)),()=>this.unbind()}unbind(){1===this._binding_count&&this._pending===od.NONE?(this._pending=od.UNBIND,function lje(t,n=0,e=vy){return e(Object.assign({id:++gy,cmd:"unbind"},t),n)}(this.binding()).then(()=>{this._pending===od.UNBIND&&(this._pending=od.NONE),this._binding_count--})):this._binding_count=Math.max(this._binding_count-1,0)}rebind(){return Ip(this,void 0,void 0,function*(){!this._stale_bindings&&this._pending!==od.BIND||cf(`rebind:${JSON.stringify(this.binding())}`,()=>Ip(this,void 0,void 0,function*(){yield Xoe(this.binding()),this._binding_count=this._stale_bindings||1,this._stale_bindings=0}),100)})}binding(){return{sys:this._module.system.id,mod:this._module.name,index:this._module.index,name:this.name}}}class bje{constructor(n,e){this._system=n,this._id=e,this._bindings={}}get id(){return`${this.name}_${this.index}`}get system(){return this._system}get index(){const e=this._id.split("_").pop();return parseInt(e||"",10)||1}get name(){const n=this._id.split("_");return n.pop(),n.join("_")}binding(n){return this._bindings[n]||(this._bindings[n]=new gje(this,n)),this._bindings[n]}execute(n,e,i=cC){return function cje(t,n=cC,e=vy){return e(Object.assign({id:++gy,cmd:"exec"},t),n)}({sys:this._system.id,mod:this.name,index:this.index,name:n,args:e},i)}}class vje{constructor(n){this._module_list={},this.id=n}module(n,e=1){if(!n)throw new Error("Invalid module ID");const i=n.split("_");i.length>1&&Number.isInteger(+i[i.length-1])&&(e=+i[i.length-1],i.pop()),e<1&&(e=1);const s=i.join("_");for(this._module_list[s]||(this._module_list[s]=[]);this._module_list[s].length<e;)this._module_list[s].push(new bje(this,`${s}_${this._module_list[s].length+1}`));return this._module_list[s][e-1]}}const N5={};function Vr(t,n,e=1){return function yje(t){return N5[t]||(N5[t]=new vje(t)),N5[t]}(t).module(n,e)}let bn=(()=>{class t{constructor(){this._timers={},this._intervals={},this._subscriptions={},this._initialised=new Mt(!1),this.initialised=this._initialised.asObservable()}get is_initialised(){return this._initialised.getValue()}ngOnDestroy(){this.destroy()}destroy(){for(const e in this._timers)e in this._timers&&this.clearTimeout(e);for(const e in this._intervals)e in this._intervals&&this.clearInterval(e);for(const e in this._subscriptions)e in this._subscriptions&&this.unsub(e)}timeout(e,i,s=300){if(!(e&&i&&i instanceof Function))throw new Error(e?"Cannot create named timeout without a name":"Cannot create a timeout without a callback");this.clearTimeout(e),this._timers[e]=setTimeout(()=>{i(),delete this._timers[e]},s)}clearTimeout(e){this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e])}interval(e,i,s=300){if(!(e&&i&&i instanceof Function))throw new Error(e?"Cannot create named interval without a name":"Cannot create a interval without a callback");this.clearInterval(e),this._intervals[e]=setInterval(()=>i(),s)}clearInterval(e){this._intervals[e]&&(clearInterval(this._intervals[e]),delete this._intervals[e])}subscription(e,i){this.unsub(e),this._subscriptions[e]=i}hasSubscription(e){return this._subscriptions[e]instanceof Tn||!!this._subscriptions[e]}unsub(e){e in this._subscriptions&&(this._subscriptions[e]instanceof Tn?this._subscriptions[e].unsubscribe():this._subscriptions[e]&&this._subscriptions[e](),delete this._subscriptions[e])}unsubWith(e){const i=Object.keys(this._subscriptions).filter(s=>s.includes(e));for(const s of i)this.unsub(s)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),uC=(()=>{class t{constructor(e){this.sanitizer=e}transform(e,i="html"){switch(i){case"resource":return this.sanitizer.bypassSecurityTrustResourceUrl(e);case"url":return this.sanitizer.bypassSecurityTrustUrl(e);case"script":return this.sanitizer.bypassSecurityTrustScript(e);case"style":return this.sanitizer.bypassSecurityTrustStyle(e);default:return this.sanitizer.bypassSecurityTrustHtml(e)}}static#e=this.\u0275fac=function(i){return new(i||t)(D(f4,16))};static#t=this.\u0275pipe=rr({name:"safe",type:t,pure:!0})}return t})();const wje=["*"];function Sje(t,n){if(1&t&&(m(0,"i"),C(1),un(2),_()),2&t){const e=M();bo((null==e.icon?null:e.icon.class)||e.className),b(),xe(" ",null==e.icon?null:e.icon.content," ")}}function Cje(t,n){1&t&&(be(0,"img",3),ge(1,"safe")),2&t&&S("src",Kt(1,1,M().icon.src,"resource"),Ia)}let zt=(()=>{class t{constructor(){this.className="material-icons"}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Qe({type:t,selectors:[["app-icon"],["icon"]],inputs:{className:"className",icon:"icon"},ngContentSelectors:wje,decls:3,vars:2,consts:[[1,"flex","items-center","justify-center","h-[1.25em]","w-[1.25em]"],[3,"class",4,"ngIf"],["class","h-[1em] w-[1em]",3,"src",4,"ngIf"],[1,"h-[1em]","w-[1em]",3,"src"]],template:function(i,s){1&i&&(Ti(),m(0,"div",0),K(1,Sje,3,3,"i",1)(2,Cje,2,4,"img",2),_()),2&i&&(b(),S("ngIf",!s.icon||"img"!==s.icon.type),b(),S("ngIf",s.icon&&"img"===s.icon.type))},dependencies:[Ot,uC],styles:["i[_ngcontent-%COMP%]{font-size:1em}"]})}return t})(),eae="APP";function tae(t){eae=t}function Xi(t,n,e,i="debug",s=!1,r=eae){if(!window.jest&&(window.debug||s)){const o=["color: #E91E63","color: #3F51B5","color: default"];e?console[i](`%c[${r}]%c[${t}] %c${n}`,...o,e):console[i](`%c[${r}]%c[${t}] %c${n}`,...o)}}function ig(t,n){const e=t[0];return n&&e in n?t.length>1?ig(t.slice(1),n[e]||{}):n[e]:null}function Cs(t=[],n=""){const e=[];return t.filter(i=>{const s=n?i[n]:i,r=e.includes(s);return r||e.push(s),!r})}function Mp(t,n=0){return Math.floor(Math.random()*(t-n))+n}function sg(t,n="abcdefghijklmnopqrstwvxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"){let e="";for(let i=0;i<t;i++)e+=n[Mp(n.length)];return e}function To(t){const n=[...t],e=[];for(;n.length;){const i=n.pop();Array.isArray(i)?n.push(...i):e.push(i)}return e.reverse()}const Aje=function Nje(t){let n=1779033703^t.length;for(let e=0;e<t.length;e++)n=Math.imul(n^t.charCodeAt(e),3432918353),n=n<<13|n>>>19;return function(){return n=Math.imul(n^n>>>16,2246822507),n=Math.imul(n^n>>>13,3266489909),(n^=n>>>16)>>>0}}("PlaceOS");function dC(t,n=""){let e=[];for(const i in t.controls)t.controls[i]instanceof ml?e=[...e,...dC(t.controls[i],`${i}.`)]:t.controls[i].valid||e.push(`${n}${i}`);return e}function nae(t){for(const n in t)(null==t[n]||""===t[n])&&delete t[n]}function wM(t){return t*(Math.PI/180)}Aje();let sae=(()=>{class t{constructor(e){this.title=e,this.enabled=!0,this.app_name="GA_APP",this.timers={}}init(e=""){window.gtag||(window.dataLayer=window.dataLayer||[],function(i,s,r,o,a){i[o]=i[o]||[],i[o].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var l=s.getElementsByTagName(r)[0],c=s.createElement(r);c.async=!0,c.src="https://www.googletagmanager.com/gtm.js?id="+a,l.parentNode.insertBefore(c,l)}(window,document,"script","dataLayer",e),Xi("Analytics","Service","Injected Google Analytics into page")),this.service=window.gtag}push(e){window.dataLayer.push(e)}load(e){if(!this.enabled)throw new Error("Google Analytics needs to be enabled before being initialised");if(!this.service)throw new Error("Google Analytics hasn't been installed on this page");Xi("Analytics","Service",`Setup with tracking ID: ${e}`),this.page("")}setUser(e){if(!this.service)throw new Error("Google Analytics hasn't been installed on this page");this.enabled&&this.timeout(`user|${e}`,()=>{Xi("Analytics","Service",`Set user ID: ${e}`),this.service("set","userId",e),this.event("authentication","user-id available")},100)}send(e,i){if(!this.service)throw new Error("Google Analytics hasn't been installed on this page");this.enabled&&this.timeout(`end|${e}`,()=>{this.push({...i,event:"event"})})}event(e,i,s,r){if(!this.service)throw new Error("Google Analytics hasn't been installed on this page");this.enabled&&this.timeout(`event|${e}|${i}|${s}|${r}`,()=>{Xi("Analytics","Service",`Event: ${e}, ${i}${s?", "+s:""}${r?", "+r:""}`),this.push({event:"event",category:e,action:i,label:s})},100)}screen(e,i){if(!this.service)throw new Error("Google Analytics hasn't been installed on this page");e&&this.enabled&&this.timeout(`event|${e}|${i||this.app_name}`,()=>{Xi("Analytics","Service",`Screen: ${e}${i?", "+i:""}`),this.push({event:"screenview",appName:i||this.app_name,screenName:e})},100)}page(e,i=!1){if(!this.service)throw new Error("Google Analytics hasn't been installed on this page");this.enabled&&(this.last_route=e||"/",this.timeout(`page|${e}`,()=>{Xi("Analytics","Service",`Page: ${e}`),this.push({event:"pageview",url:`${i?location.origin:""}${e}`})},100))}timing(e,i,s,r){if(!this.service)throw new Error("Google Analytics hasn't been installed on this page");this.enabled&&this.timeout(`page|${e}|${i}|${s}|${r}`,()=>{Xi("Analytics","Service",`Timing: ${e}, ${i}, ${s}${r?", "+r:""}`),this.push({event:"timing",category:e,variable:i,value:s,label:r})},100)}timeout(e,i,s=300){this.timers[e]&&(clearTimeout(this.timers[e]),delete this.timers[e]),this.timers[e]=setTimeout(()=>{i instanceof Function&&i(),delete this.timers[e]},s)}static#e=this.\u0275fac=function(i){return new(i||t)(Re(h4))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Uje=["control","shift","alt","meta","os"];let rae=(()=>{class t{constructor(){this.keydown_states={},this.keydown_observers={},this.combo_end=[],this.registered_combos=[],this.counter=0,window.addEventListener("keydown",e=>{const i=this.mapKey((e.code||"").toLowerCase());this.last_down!==i&&(this.keydown_states[i]||(this.keydown_states[i]=new Mt(null),this.keydown_observers[i]=this.keydown_states[i].asObservable()),this.keydown_states[i].next(++this.counter),this.combo_end.indexOf(i)>=0&&e.preventDefault(),this.last_down=i)}),window.addEventListener("keyup",e=>{const i=this.mapKey((e.code||"").toLowerCase());this.keydown_states[i]?.next(null),this.last_down===i&&(this.last_down=null)})}listen(e,i){const s=(e=e instanceof Array?e:e.split("+")).map(r=>this.mapKey(r.toLowerCase()));if(s.length>0&&this.validCombination(s)){this.registered_combos.push(s);const r=s[s.length-1];return this.keydown_states[r]||(this.keydown_states[r]=new Mt(null),this.keydown_observers[r]=this.keydown_states[r].asObservable()),this.updateCombinationEndList(),this.keydown_observers[r].subscribe(o=>{if(o){const a=[];if(s.length>0){for(const c of s){const u=this.keydown_states[c];a.push(u&&u.getValue()||-1)}for(let c=0;c<s.length-1;c++)if(a[c]>a[c+1])return}a.reduce((c,u)=>c+(u>0?1:-1),0)>=s.length&&i()}})}return null}mapKey(e){return e.indexOf("alt")>=0||e.indexOf("shift")>=0||e.indexOf("control")>=0?e.replace("left","").replace("right",""):e}updateCombinationEndList(){for(const i of this.registered_combos)this.combo_end.push(i[i.length-1]);this.combo_end=Cs([])}validCombination(e){let i=0;for(const s of e)Uje.indexOf(s)<0&&i++;return i>0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Pi(t){const n=Hn(t);return n.setHours(0,0,0,0),n}function ad(t,n){return+Pi(t)==+Pi(n)}const Gje={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function F5(t){return(n={})=>{const e=n.width?String(n.width):t.defaultWidth;return t.formats[e]||t.formats[t.defaultWidth]}}const Kje={date:F5({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:F5({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:F5({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Xje={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function hC(t){return(n,e)=>{let s;if("formatting"===(e?.context?String(e.context):"standalone")&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=e?.width?String(e.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=e?.width?String(e.width):t.defaultWidth;s=t.values[a]||t.values[o]}return s[t.argumentCallback?t.argumentCallback(n):n]}}const iHe={ordinalNumber:(t,n)=>{const e=Number(t),i=e%100;if(i>20||i<10)switch(i%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},era:hC({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:hC({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:t=>t-1}),month:hC({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:hC({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:hC({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function fC(t){return(n,e={})=>{const i=e.width,r=n.match(i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth]);if(!r)return null;const o=r[0],a=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?function rHe(t,n){for(let e=0;e<t.length;e++)if(n(t[e]))return e}(a,d=>d.test(o)):function sHe(t,n){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&n(t[e]))return e}(a,d=>d.test(o));let c;return c=t.valueCallback?t.valueCallback(l):l,c=e.valueCallback?e.valueCallback(c):c,{value:c,rest:n.slice(o.length)}}}const vHe={ordinalNumber:function oHe(t){return(n,e={})=>{const i=n.match(t.matchPattern);if(!i)return null;const s=i[0],r=n.match(t.parsePattern);if(!r)return null;let o=t.valueCallback?t.valueCallback(r[0]):r[0];return o=e.valueCallback?e.valueCallback(o):o,{value:o,rest:n.slice(s.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:t=>parseInt(t,10)}),era:fC({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:fC({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:t=>t+1}),month:fC({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:fC({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:fC({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},L5={code:"en-US",formatDistance:(t,n,e)=>{let i;const s=Gje[t];return i="string"==typeof s?s:1===n?s.one:s.other.replace("{{count}}",n.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+i:i+" ago":i},formatLong:Kje,formatRelative:(t,n,e,i)=>Xje[t],localize:iHe,match:vHe,options:{weekStartsOn:0,firstWeekContainsDate:1}};let oae={};function rg(){return oae}function SM(t){const n=Hn(t),e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),+t-+e}function aae(t,n){const e=Pi(t),i=Pi(n),s=+e-SM(e),r=+i-SM(i);return Math.round((s-r)/uGe)}function hf(t,n){const e=rg(),i=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,s=Hn(t),r=s.getDay(),o=(r<i?7:0)+r-i;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function CM(t){return hf(t,{weekStartsOn:1})}function lae(t){const n=Hn(t),e=n.getFullYear(),i=aa(t,0);i.setFullYear(e+1,0,4),i.setHours(0,0,0,0);const s=CM(i),r=aa(t,0);r.setFullYear(e,0,4),r.setHours(0,0,0,0);const o=CM(r);return n.getTime()>=s.getTime()?e+1:n.getTime()>=o.getTime()?e:e-1}function cae(t,n){const e=Hn(t),i=e.getFullYear(),s=rg(),r=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=aa(t,0);o.setFullYear(i+1,0,r),o.setHours(0,0,0,0);const a=hf(o,n),l=aa(t,0);l.setFullYear(i,0,r),l.setHours(0,0,0,0);const c=hf(l,n);return e.getTime()>=a.getTime()?i+1:e.getTime()>=c.getTime()?i:i-1}function qs(t,n){return(t<0?"-":"")+Math.abs(t).toString().padStart(n,"0")}const Ap={y(t,n){const e=t.getFullYear(),i=e>0?e:1-e;return qs("yy"===n?i%100:i,n.length)},M(t,n){const e=t.getMonth();return"M"===n?String(e+1):qs(e+1,2)},d:(t,n)=>qs(t.getDate(),n.length),a(t,n){const e=t.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];default:return"am"===e?"a.m.":"p.m."}},h:(t,n)=>qs(t.getHours()%12||12,n.length),H:(t,n)=>qs(t.getHours(),n.length),m:(t,n)=>qs(t.getMinutes(),n.length),s:(t,n)=>qs(t.getSeconds(),n.length),S(t,n){const e=n.length,i=t.getMilliseconds();return qs(Math.trunc(i*Math.pow(10,e-3)),n.length)}},uae={G:function(t,n,e){const i=t.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return e.era(i,{width:"abbreviated"});case"GGGGG":return e.era(i,{width:"narrow"});default:return e.era(i,{width:"wide"})}},y:function(t,n,e){if("yo"===n){const i=t.getFullYear();return e.ordinalNumber(i>0?i:1-i,{unit:"year"})}return Ap.y(t,n)},Y:function(t,n,e,i){const s=cae(t,i),r=s>0?s:1-s;return"YY"===n?qs(r%100,2):"Yo"===n?e.ordinalNumber(r,{unit:"year"}):qs(r,n.length)},R:function(t,n){return qs(lae(t),n.length)},u:function(t,n){return qs(t.getFullYear(),n.length)},Q:function(t,n,e){const i=Math.ceil((t.getMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return qs(i,2);case"Qo":return e.ordinalNumber(i,{unit:"quarter"});case"QQQ":return e.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(i,{width:"narrow",context:"formatting"});default:return e.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,n,e){const i=Math.ceil((t.getMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return qs(i,2);case"qo":return e.ordinalNumber(i,{unit:"quarter"});case"qqq":return e.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(i,{width:"narrow",context:"standalone"});default:return e.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,n,e){const i=t.getMonth();switch(n){case"M":case"MM":return Ap.M(t,n);case"Mo":return e.ordinalNumber(i+1,{unit:"month"});case"MMM":return e.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(i,{width:"narrow",context:"formatting"});default:return e.month(i,{width:"wide",context:"formatting"})}},L:function(t,n,e){const i=t.getMonth();switch(n){case"L":return String(i+1);case"LL":return qs(i+1,2);case"Lo":return e.ordinalNumber(i+1,{unit:"month"});case"LLL":return e.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(i,{width:"narrow",context:"standalone"});default:return e.month(i,{width:"wide",context:"standalone"})}},w:function(t,n,e,i){const s=function EHe(t,n){const e=Hn(t),i=+hf(e,n)-+function xHe(t,n){const e=rg(),i=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,s=cae(t,n),r=aa(t,0);return r.setFullYear(s,0,i),r.setHours(0,0,0,0),hf(r,n)}(e,n);return Math.round(i/6048e5)+1}(t,i);return"wo"===n?e.ordinalNumber(s,{unit:"week"}):qs(s,n.length)},I:function(t,n,e){const i=function CHe(t){const n=Hn(t),e=+CM(n)-+function SHe(t){const n=lae(t),e=aa(t,0);return e.setFullYear(n,0,4),e.setHours(0,0,0,0),CM(e)}(n);return Math.round(e/6048e5)+1}(t);return"Io"===n?e.ordinalNumber(i,{unit:"week"}):qs(i,n.length)},d:function(t,n,e){return"do"===n?e.ordinalNumber(t.getDate(),{unit:"date"}):Ap.d(t,n)},D:function(t,n,e){const i=function wHe(t){const n=Hn(t);return aae(n,function yHe(t){const n=Hn(t),e=aa(t,0);return e.setFullYear(n.getFullYear(),0,1),e.setHours(0,0,0,0),e}(n))+1}(t);return"Do"===n?e.ordinalNumber(i,{unit:"dayOfYear"}):qs(i,n.length)},E:function(t,n,e){const i=t.getDay();switch(n){case"E":case"EE":case"EEE":return e.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(i,{width:"short",context:"formatting"});default:return e.day(i,{width:"wide",context:"formatting"})}},e:function(t,n,e,i){const s=t.getDay(),r=(s-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(r);case"ee":return qs(r,2);case"eo":return e.ordinalNumber(r,{unit:"day"});case"eee":return e.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(s,{width:"short",context:"formatting"});default:return e.day(s,{width:"wide",context:"formatting"})}},c:function(t,n,e,i){const s=t.getDay(),r=(s-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(r);case"cc":return qs(r,n.length);case"co":return e.ordinalNumber(r,{unit:"day"});case"ccc":return e.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(s,{width:"narrow",context:"standalone"});case"cccccc":return e.day(s,{width:"short",context:"standalone"});default:return e.day(s,{width:"wide",context:"standalone"})}},i:function(t,n,e){const i=t.getDay(),s=0===i?7:i;switch(n){case"i":return String(s);case"ii":return qs(s,n.length);case"io":return e.ordinalNumber(s,{unit:"day"});case"iii":return e.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(i,{width:"short",context:"formatting"});default:return e.day(i,{width:"wide",context:"formatting"})}},a:function(t,n,e){const s=t.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(s,{width:"narrow",context:"formatting"});default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,n,e){const i=t.getHours();let s;switch(s=12===i?"noon":0===i?"midnight":i/12>=1?"pm":"am",n){case"b":case"bb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(s,{width:"narrow",context:"formatting"});default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,n,e){const i=t.getHours();let s;switch(s=i>=17?"evening":i>=12?"afternoon":i>=4?"morning":"night",n){case"B":case"BB":case"BBB":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(s,{width:"narrow",context:"formatting"});default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,n,e){if("ho"===n){let i=t.getHours()%12;return 0===i&&(i=12),e.ordinalNumber(i,{unit:"hour"})}return Ap.h(t,n)},H:function(t,n,e){return"Ho"===n?e.ordinalNumber(t.getHours(),{unit:"hour"}):Ap.H(t,n)},K:function(t,n,e){const i=t.getHours()%12;return"Ko"===n?e.ordinalNumber(i,{unit:"hour"}):qs(i,n.length)},k:function(t,n,e){let i=t.getHours();return 0===i&&(i=24),"ko"===n?e.ordinalNumber(i,{unit:"hour"}):qs(i,n.length)},m:function(t,n,e){return"mo"===n?e.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ap.m(t,n)},s:function(t,n,e){return"so"===n?e.ordinalNumber(t.getSeconds(),{unit:"second"}):Ap.s(t,n)},S:function(t,n){return Ap.S(t,n)},X:function(t,n,e){const i=t.getTimezoneOffset();if(0===i)return"Z";switch(n){case"X":return hae(i);case"XXXX":case"XX":return og(i);default:return og(i,":")}},x:function(t,n,e){const i=t.getTimezoneOffset();switch(n){case"x":return hae(i);case"xxxx":case"xx":return og(i);default:return og(i,":")}},O:function(t,n,e){const i=t.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+dae(i,":");default:return"GMT"+og(i,":")}},z:function(t,n,e){const i=t.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+dae(i,":");default:return"GMT"+og(i,":")}},t:function(t,n,e){return qs(Math.trunc(t.getTime()/1e3),n.length)},T:function(t,n,e){return qs(t.getTime(),n.length)}};function dae(t,n=""){const e=t>0?"-":"+",i=Math.abs(t),s=Math.trunc(i/60),r=i%60;return 0===r?e+String(s):e+String(s)+n+qs(r,2)}function hae(t,n){return t%60==0?(t>0?"-":"+")+qs(Math.abs(t)/60,2):og(t,n)}function og(t,n=""){const e=t>0?"-":"+",i=Math.abs(t);return e+qs(Math.trunc(i/60),2)+n+qs(i%60,2)}const fae=(t,n)=>{switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});default:return n.date({width:"full"})}},pae=(t,n)=>{switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});default:return n.time({width:"full"})}},THe={p:pae,P:(t,n)=>{const e=t.match(/(P+)(p+)?/)||[],i=e[1],s=e[2];if(!s)return fae(t,n);let r;switch(i){case"P":r=n.dateTime({width:"short"});break;case"PP":r=n.dateTime({width:"medium"});break;case"PPP":r=n.dateTime({width:"long"});break;default:r=n.dateTime({width:"full"})}return r.replace("{{date}}",fae(i,n)).replace("{{time}}",pae(s,n))}},IHe=/^D+$/,kHe=/^Y+$/,DHe=["D","DD","YY","YYYY"];const LHe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,PHe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$He=/^'([^]*?)'?$/,BHe=/''/g,VHe=/[a-zA-Z]/;function ys(t,n,e){const i=rg(),s=e?.locale??i.locale??L5,r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,a=Hn(t);if(!function FHe(t){if(!function RHe(t){return t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)}(t)&&"number"!=typeof t)return!1;const n=Hn(t);return!isNaN(Number(n))}(a))throw new RangeError("Invalid time value");let l=n.match(PHe).map(u=>{const d=u[0];return"p"===d||"P"===d?(0,THe[d])(u,s.formatLong):u}).join("").match(LHe).map(u=>{if("''"===u)return{isToken:!1,value:"'"};const d=u[0];if("'"===d)return{isToken:!1,value:zHe(u)};if(uae[d])return{isToken:!0,value:u};if(d.match(VHe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return{isToken:!1,value:u}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:r,weekStartsOn:o,locale:s};return l.map(u=>{if(!u.isToken)return u.value;const d=u.value;return(!e?.useAdditionalWeekYearTokens&&function AHe(t){return kHe.test(t)}(d)||!e?.useAdditionalDayOfYearTokens&&function MHe(t){return IHe.test(t)}(d))&&function OHe(t,n,e){const i=function NHe(t,n,e){const i="Y"===t[0]?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${n}\`) for formatting ${i} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(t,n,e);if(console.warn(i),DHe.includes(t))throw new RangeError(i)}(d,n,String(t)),(0,uae[d[0]])(a,d,s.localize,c)}).join("")}function zHe(t){const n=t.match($He);return n?n[1].replace(BHe,"'"):t}const mae={debug:!0,composer:{domain:"",route:"/assistant-panel",protocol:"",port:"",use_domain:!1,local_login:!1},app:{name:"Assistant",title:"PlaceOS",description:"Assistant UI",short_name:"PlaceOS",logo:{type:"img",src:"assets/logo-light.svg"},logo_dark:{type:"img",src:"assets/logo-dark.svg"},general:{},prevent_space_init:!0}},xM={dirty:!1,raw:"10af837",hash:"10af837",distance:null,tag:null,semver:null,suffix:"10af837",semverString:null,version:"1.12.0",time:1722920151695};class GHe{constructor(n,e){this.count=n,this.source=e}call(n,e){return e.subscribe(new jHe(n,this.count,this.source))}}class jHe extends Ji{constructor(n,e,i){super(n),this.count=e,this.source=i}error(n){if(!this.isStopped){const{source:e,count:i}=this;if(0===i)return super.error(n);i>-1&&(this.count=i-1),e.subscribe(this._unsubscribeAndRecycle())}}}let pC="@place.tech";function gae(t){if(!t)throw Error("No user passed");const n={name:new _t(t.name||"",[$r.required]),email:new _t(t.email||"",[$r.email,$r.required]),organisation:new _t(t.organisation||"",$r.required),phone:new _t(t.phone||"",$r.pattern(/^\+?(\d[\d\s\-\(\)]{5,13}\d)$/)),assistance_required:new _t(t.assistance_required||!1),visit_expected:new _t(t.visit_expected??!0)};return new ml(n)}class Io{constructor(n={}){this.id=n.id||n.email||`USER::${sg(8)}`,this.name=n.name||"",this.email=n.email||"",this.first_name=n.first_name||n.name||"",this.last_name=n.last_name||"",this.phone=n.phone||"",this.organisation=n.organisation||"",this.notes=n.notes||"",this.photo=n.photo||"",this.username=n.username||"",this.organizer=!!n.organizer,this.checked_in=!!n.checked_in,this.required=n.required??!0,this.resource=n.resource??!1,this.response_status=n.response_status||"";const e=n.groups||[];this.department=n.department??"",n.sys_admin&&e.push("placeos_admin"),n.support&&e.push("placeos_support"),n.department&&e.push(n.department),this.groups=e,this.extension_data=n.extension_data||{},this.extension_data.assistance_required=n.assistance_required||this.extension_data.assistance_required,this.is_external=!this.email?.endsWith(`${pC}`),this.visit_expected=n.visit_expected??!0,this.assistance_required=!!this.extension_data?.assistance_required;for(const i in n)i in this||(this.extension_data[i]=n[i])}}class mC extends Io{constructor(n={}){super(n),this.preferred_beverage=n.preferred_beverage||"",this.accepted_terms_conditions=n.accepted_terms_conditions||!1,this.attachments=n.extension_data?.attachments||n.attachments||[],this.status=n.booking?.approved?"approved":n.booking?.rejected?"declined":n.extension_data?.status||n.status||"pending",this.booking=n.booking,this.extension_data.event=n.event_metadata}}class wy extends Io{get location(){return this.location_time(Date.now())}location_time(n){n||(n=Date.now());const e=new Date(n),i=e.getDay(),s=ys(e,"yyyy-MM-dd");return this.work_overrides[s]?.location||this.work_preferences.find(r=>r.day_of_week===i)?.location||"wfo"}get location_name(){return this.location_name_time(Date.now())}location_name_time(n){n||(n=Date.now());const e=this.location_time(n),i=this.in_hours_time(n);if(e.includes("w")&&!i)return"Outside working hours";switch(e){case"wfh":return"Working from Home";case"wfo":return"Working from Office";case"ooo":return"Out of Office";case"aol":return"Away on Leave";default:return"Unknown"}}get in_hours(){return this.in_hours_time(Date.now())}location_icon(n){n||(n=Date.now());const e=this.location_time(n),i=this.in_hours_time(n);return"wfh"===e&&i?"home":"wfo"===e&&i?"business":"event_busy"}in_hours_time(n){n||(n=Date.now());const e=new Date(n),i=e.getDay(),s=ys(e,"yyyy-MM-dd"),r=this.work_overrides[s]||this.work_preferences.find(c=>c.day_of_week===i);if(!r)return!1;const o=r.start_time,a=r.end_time,l=e.getHours()+e.getMinutes()/60;return o<=l&&l<a}constructor(n={}){super(n),this.card_number=n.card_number||"",this.staff_id=n.staff_id||"",this.is_logged_in=!!n.is_logged_in,this.work_preferences=n.work_preferences||[],this.work_overrides=n.work_overrides||{}}}const WHe=new wy,P5=new Mt(null),TM=P5.asObservable();function fn(){return P5.getValue()||WHe}setTimeout(()=>{try{if(jest)return}catch{}I5("current").pipe(zv(1e3),function UHe(t=-1){return n=>n.lift(new GHe(t,n))}(10),ze(t=>new wy(t))).subscribe(t=>P5.next(t))},300);let ln=(()=>{class t extends bn{set overrides(e){this._overrides.next(e),this._applyCssVariables()}listen(e){return this._observables[e]||(this._subjects[e]=new Mt(null),this._observables[e]=this._subjects[e].asObservable()),this._observables[e]}post(e,i){this._observables[e]||(this._subjects[e]=new Mt(null),this._observables[e]=this._subjects[e].asObservable()),this._subjects[e].next(i)}value(e){return this._observables[e]?this._subjects[e].getValue():null}get title(){return this._title.getTitle()}set title(e){this._title.setTitle(`${e} | ${this.get("app.name")||this._app_name}`),this.get("app.analytics.tracking_id")&&this._analytics?.send("pagename",{title:e})}constructor(e,i){super(),this._title=e,this._analytics=i,this._app_name="PlaceOS",this._overrides=new Mt([]),this._user_settings=new Mt({}),this._subjects={},this._observables={},this._pending_settings={};const s=new Date,r=new Date(xM.time),o=ad(s,r)?`Today at ${ys(r,"h:mma")}`:ys(r,"do MMM yyyy, h:mma");Xi("CORE",`${xM.semver}`,null,"debug",!0),Xi("APP",`${xM.hash} | Built: ${o}`,null,"debug",!0),this.init()}init(){var e=this;return de(function*(){e.get("debug")&&(window.debug=!0),e.get("app")?.name&&(e._app_name=e.get("app").name),e._app_name=location.pathname.replace(/[\\\/]/g,"").trim()||e._app_name,tae(e._app_name.split("-").join("_").toUpperCase()),Xi("Settings","Successfully loaded settings"),e._initialised.next(!0),window.debug&&(window.application||(window.application={}),window.application.settings=e),e.subscription("user_settings",e._user_settings.subscribe(r=>e._applyUserSettings(r)));const i=yield TM.pipe(ds(r=>!!r)).toPromise(),s=yield uo(i.id,"settings").toPromise();e._user_settings.next(s.details||{}),e._initDarkMode(),e._applyTheme(),e._setFontSize()})()}get app_name(){return this._app_name}get time_format(){return this.get("app.use_24_hour_time")?"HH:mm":"h:mm a"}get(e){const i=e.split(".");if("app"!==i[0])return ig(i,this._pending_settings)??ig(i,this._user_settings.getValue())??ig(i,mae);const s=[...this._overrides.getValue()];for(const r of s){const o=ig(i.slice(1),r);if(null!=o)return o}return ig(i,mae)}saveUserSetting(e,i){this._pending_settings[e]=i,"dark_mode"===e&&this.setTheme(i?"dark":""),"font_size"===e&&this._setFontSize(),this.timeout("save_settings",()=>this._savePendingChanges(),5e3)}overrideCssVariable(e,i,s=!1){let r=document.getElementById(`css-var-overrides+${e}`);r||(r=document.createElement("style"),r.id=`css-var-overrides+${e}`,document.head.appendChild(r)),r.innerText=`html, body { --${e}: ${i} ${s?"!important":""}}`}setTheme(e){this.get("theme")!==e&&(this.saveUserSetting("theme",e),this._applyTheme())}_applyCssVariables(){const e=this.get("app.css_variables")||{};let i="body { ";for(const r in e)i+=`--${r}: ${e[r]}; `;i+="}";let s=document.getElementById("css-var-overrides");s||(s=document.createElement("style"),s.id="css-var-overrides",document.head.appendChild(s)),s.innerText=i}_savePendingChanges(){var e=this;return de(function*(){const i=fn();!i?.id||!Object.keys(e._pending_settings).length||(yield function Foe(t,n,e="put"){return Noe({id:t,form_data:n,query_params:{},method:e,fn:YS,path:J_})}(i.id,{name:"settings",description:"",details:{...e._user_settings.getValue(),...e._pending_settings}}).toPromise(),e._user_settings.next({...e._user_settings.getValue(),...e._pending_settings}),e._pending_settings={})})()}_applyUserSettings(e){return de(function*(){})()}_setFontSize(){this.get("font_size")&&this.overrideCssVariable("font-size",`${this.get("font_size")}px`)}_applyTheme(){const e=this.get("theme"),i=document.body.classList.value.split(" ");for(const s of i)s.startsWith("theme-")&&document.body.classList.remove(s);e?document.body.classList.add(`theme-${e}`):document.body.classList.remove(`theme-${e}`)}_initDarkMode(){this.get("theme")}static#e=this.\u0275fac=function(i){return new(i||t)(Re(h4),Re(sae,8))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class qHe{constructor(n={}){this.id=n.id||"",this.name=n.name||"",this.description=n.description||"",this.tags=n.tags||[],this.count=n.count||0,this.capacity=n.capacity||0,this.bindings=n.bindings||{},this._settings=n.settings||{}}setting(n){return ig(n.split("."),this._settings)}}let $5,Sy=!1;function IM(t,n,e="OK",i,s={}){if(!$5)return!Sy&&console.warn("Snackbar service hasn't been initialised");const r=$5.open(n,e,{panelClass:[t],duration:5e3,...s});e&&(i=i||(()=>r.dismiss()),r.onAction().subscribe(()=>i()))}function Zd(t,n,e,i={}){!Sy&&console.debug(t),"string"!=typeof t&&(t="Success"),IM("success",t,n,e,i)}function Mi(t,n,e,i={}){!Sy&&console.debug(t),"string"!=typeof t&&(t=t?.error||t?.message||"An error occurred"),IM("error",t,n,e,i)}function kM(t,n,e,i={}){!Sy&&console.debug(t),IM("info",t,n,e,i)}class _C{constructor(n={}){this.settings={},this.id=n.id||"",this.parent_id=n.parent_id||"",this.name=n.name||"",this.display_name=n.display_name||"",this.map_id=n.map_id||"",this.capacity=n.capacity||0,this.location=n.location||"",this.locations=n.locations||[],this.tags=n.tags||[],this.images=n.images||[];const e=this.display_name.split(" ");this.number=((e.length>=2?e[e.length-1]:this.display_name[0])?.toUpperCase()||"").substring(0,2)}}class B5{constructor(n={}){this.id=n.id||"",this.parent_id=n.parent_id||"",this.name=n.name||"";const e=n.settings||{};this.display_name=n.display_name,this.images=this.images||[];const i=e.discovery_info||e;this.zone_id=n.zone_id||n.zone,this.extras=(n.extras||i.extras||[]).map(r=>({id:r.extra_id||r.id,name:r.extra_name||r.name})),this.loan_items=(n.loan_items||i.loan_items||[]).map(r=>({id:r.extra_id||r.id,name:r.extra_name||r.name})),this.levels=(n.levels||i.levels||[]).map(r=>new _C({...r,building_id:this.id})),this._roles=n.roles||i.roles||{},this._lockers=n.lockers||n.locker_structure||i.locker_structure||{},this._systems=n.systems||i.systems||{},this._phone_numbers=n.phone_numbers||i.phone_numbers||{},this.location=n.location||i.location||"0,0",this.room_configurations=n.room_configurations||i.room_configurations||[],this.attributes=n.attributes||i.attributes||[];const s=[];if(n.neighbourhoods)for(const r in n.neighbourhoods)if(r in n.neighbourhoods){const o=n.neighbourhoods[r]||{};for(const a in o)a in o&&s.push({id:o[a],name:a,level_id:r})}this.bindings=n.bindings||{},this.searchables=s,this.map_id=n.map_id||"",this.timezone=n.timezone||i.timezone||e.timezone||"",this.catering_hours=n.catering_hours||i.catering_hours||e.catering_hours||{start:7,end:20},this.visitor_space=n.visitor_space||i.visitor_space||e.visitor_space||"",this.holding_bay=n.holding_bay||i.holding_bay||e.holding_bay||"",this.code=n.code||i.code||e.code||"",this.address=n.address||i.address||e.address||"",this.orientations=n.orientations||i.orientations||e.orientations||{},this.booking_details=n.booking_details||i.booking_details||e.booking_details||null,this.catering_restricted_from=n.catering_restricted_from||i.catering_restricted_from||e.catering_restricted_from||-1440,this.currency=n.currency||i.currency||e.currency||"USD"}role(n){return[...this._roles[n]||[]]}get role_names(){return Object.keys(this._roles).filter(n=>n in this._roles)}get lockers(){return{...this._lockers||{}}}get systems(){return{...this._systems||{}}}get phone_numbers(){return{...this._phone_numbers||{}}}featuresForLevel(n){return(this.searchables||[]).filter(e=>e.level_id===n)}}class vae{constructor(n){this.id=n.id||"",this.name=n.name||"",this.display_name=n.display_name||"",this.timezone=n.timezone||"",this.images=n.images||[],this.bindings=n.bindings||{},this.address=n.address||""}}function yae(t){return typeof t>"u"||null===t}var Yo={isNothing:yae,isObject:function XHe(t){return"object"==typeof t&&null!==t},toArray:function YHe(t){return Array.isArray(t)?t:yae(t)?[]:[t]},repeat:function QHe(t,n){var i,e="";for(i=0;i<n;i+=1)e+=t;return e},isNegativeZero:function JHe(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t},extend:function ZHe(t,n){var e,i,s,r;if(n)for(e=0,i=(r=Object.keys(n)).length;e<i;e+=1)t[s=r[e]]=n[s];return t}};function wae(t,n){var e="",i=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(e+='in "'+t.mark.name+'" '),e+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!n&&t.mark.snippet&&(e+="\n\n"+t.mark.snippet),i+" "+e):i}function gC(t,n){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=n,this.message=wae(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(gC.prototype=Object.create(Error.prototype)).constructor=gC,gC.prototype.toString=function(n){return this.name+": "+wae(this,n)};var wl=gC;function V5(t,n,e,i,s){var r="",o="",a=Math.floor(s/2)-1;return i-n>a&&(n=i-a+(r=" ... ").length),e-i>a&&(e=i+a-(o=" ...").length),{str:r+t.slice(n,e).replace(/\t/g,"\u2192")+o,pos:i-n+r.length}}function z5(t,n){return Yo.repeat(" ",n-t.length)+t}var aWe=function oWe(t,n){if(n=Object.create(n||null),!t.buffer)return null;n.maxLength||(n.maxLength=79),"number"!=typeof n.indent&&(n.indent=1),"number"!=typeof n.linesBefore&&(n.linesBefore=3),"number"!=typeof n.linesAfter&&(n.linesAfter=2);for(var r,e=/\r?\n|\r|\0/g,i=[0],s=[],o=-1;r=e.exec(t.buffer);)s.push(r.index),i.push(r.index+r[0].length),t.position<=r.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var l,c,a="",u=Math.min(t.line+n.linesAfter,s.length).toString().length,d=n.maxLength-(n.indent+u+3);for(l=1;l<=n.linesBefore&&!(o-l<0);l++)c=V5(t.buffer,i[o-l],s[o-l],t.position-(i[o]-i[o-l]),d),a=Yo.repeat(" ",n.indent)+z5((t.line-l+1).toString(),u)+" | "+c.str+"\n"+a;for(c=V5(t.buffer,i[o],s[o],t.position,d),a+=Yo.repeat(" ",n.indent)+z5((t.line+1).toString(),u)+" | "+c.str+"\n",a+=Yo.repeat("-",n.indent+u+3+c.pos)+"^\n",l=1;l<=n.linesAfter&&!(o+l>=s.length);l++)c=V5(t.buffer,i[o+l],s[o+l],t.position-(i[o]-i[o+l]),d),a+=Yo.repeat(" ",n.indent)+z5((t.line+l+1).toString(),u)+" | "+c.str+"\n";return a.replace(/\n$/,"")},lWe=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],cWe=["scalar","sequence","mapping"],Ma=function dWe(t,n){if(n=n||{},Object.keys(n).forEach(function(e){if(-1===lWe.indexOf(e))throw new wl('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')}),this.options=n,this.tag=t,this.kind=n.kind||null,this.resolve=n.resolve||function(){return!0},this.construct=n.construct||function(e){return e},this.instanceOf=n.instanceOf||null,this.predicate=n.predicate||null,this.represent=n.represent||null,this.representName=n.representName||null,this.defaultStyle=n.defaultStyle||null,this.multi=n.multi||!1,this.styleAliases=function uWe(t){var n={};return null!==t&&Object.keys(t).forEach(function(e){t[e].forEach(function(i){n[String(i)]=e})}),n}(n.styleAliases||null),-1===cWe.indexOf(this.kind))throw new wl('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')};function Sae(t,n){var e=[];return t[n].forEach(function(i){var s=e.length;e.forEach(function(r,o){r.tag===i.tag&&r.kind===i.kind&&r.multi===i.multi&&(s=o)}),e[s]=i}),e}function U5(t){return this.extend(t)}U5.prototype.extend=function(n){var e=[],i=[];if(n instanceof Ma)i.push(n);else if(Array.isArray(n))i=i.concat(n);else{if(!n||!Array.isArray(n.implicit)&&!Array.isArray(n.explicit))throw new wl("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.implicit&&(e=e.concat(n.implicit)),n.explicit&&(i=i.concat(n.explicit))}e.forEach(function(r){if(!(r instanceof Ma))throw new wl("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(r.loadKind&&"scalar"!==r.loadKind)throw new wl("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(r.multi)throw new wl("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(r){if(!(r instanceof Ma))throw new wl("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(U5.prototype);return s.implicit=(this.implicit||[]).concat(e),s.explicit=(this.explicit||[]).concat(i),s.compiledImplicit=Sae(s,"implicit"),s.compiledExplicit=Sae(s,"explicit"),s.compiledTypeMap=function hWe(){var n,e,t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function i(s){s.multi?(t.multi[s.kind].push(s),t.multi.fallback.push(s)):t[s.kind][s.tag]=t.fallback[s.tag]=s}for(n=0,e=arguments.length;n<e;n+=1)arguments[n].forEach(i);return t}(s.compiledImplicit,s.compiledExplicit),s};var Cae=U5,xae=new Ma("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),Eae=new Ma("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),Tae=new Ma("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}}),Iae=new Cae({explicit:[xae,Eae,Tae]}),kae=new Ma("tag:yaml.org,2002:null",{kind:"scalar",resolve:function fWe(t){if(null===t)return!0;var n=t.length;return 1===n&&"~"===t||4===n&&("null"===t||"Null"===t||"NULL"===t)},construct:function pWe(){return null},predicate:function mWe(t){return null===t},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Dae=new Ma("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function _We(t){if(null===t)return!1;var n=t.length;return 4===n&&("true"===t||"True"===t||"TRUE"===t)||5===n&&("false"===t||"False"===t||"FALSE"===t)},construct:function gWe(t){return"true"===t||"True"===t||"TRUE"===t},predicate:function bWe(t){return"[object Boolean]"===Object.prototype.toString.call(t)},represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function vWe(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function yWe(t){return 48<=t&&t<=55}function wWe(t){return 48<=t&&t<=57}var Mae=new Ma("tag:yaml.org,2002:int",{kind:"scalar",resolve:function SWe(t){if(null===t)return!1;var s,n=t.length,e=0,i=!1;if(!n)return!1;if(("-"===(s=t[e])||"+"===s)&&(s=t[++e]),"0"===s){if(e+1===n)return!0;if("b"===(s=t[++e])){for(e++;e<n;e++)if("_"!==(s=t[e])){if("0"!==s&&"1"!==s)return!1;i=!0}return i&&"_"!==s}if("x"===s){for(e++;e<n;e++)if("_"!==(s=t[e])){if(!vWe(t.charCodeAt(e)))return!1;i=!0}return i&&"_"!==s}if("o"===s){for(e++;e<n;e++)if("_"!==(s=t[e])){if(!yWe(t.charCodeAt(e)))return!1;i=!0}return i&&"_"!==s}}if("_"===s)return!1;for(;e<n;e++)if("_"!==(s=t[e])){if(!wWe(t.charCodeAt(e)))return!1;i=!0}return!(!i||"_"===s)},construct:function CWe(t){var i,n=t,e=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),("-"===(i=n[0])||"+"===i)&&("-"===i&&(e=-1),i=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===i){if("b"===n[1])return e*parseInt(n.slice(2),2);if("x"===n[1])return e*parseInt(n.slice(2),16);if("o"===n[1])return e*parseInt(n.slice(2),8)}return e*parseInt(n,10)},predicate:function xWe(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!Yo.isNegativeZero(t)},represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),EWe=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),kWe=/^[-+]?[0-9]+e/,Aae=new Ma("tag:yaml.org,2002:float",{kind:"scalar",resolve:function TWe(t){return!(null===t||!EWe.test(t)||"_"===t[t.length-1])},construct:function IWe(t){var n,e;return e="-"===(n=t.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(n[0])>=0&&(n=n.slice(1)),".inf"===n?1===e?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===n?NaN:e*parseFloat(n,10)},predicate:function MWe(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||Yo.isNegativeZero(t))},represent:function DWe(t,n){var e;if(isNaN(t))switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Yo.isNegativeZero(t))return"-0.0";return e=t.toString(10),kWe.test(e)?e.replace("e",".e"):e},defaultStyle:"lowercase"}),Nae=Iae.extend({implicit:[kae,Dae,Mae,Aae]}),Rae=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Fae=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),Lae=new Ma("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function AWe(t){return null!==t&&(null!==Rae.exec(t)||null!==Fae.exec(t))},construct:function OWe(t){var n,e,i,s,r,o,a,h,l=0,c=null;if(null===(n=Rae.exec(t))&&(n=Fae.exec(t)),null===n)throw new Error("Date resolve error");if(e=+n[1],i=+n[2]-1,s=+n[3],!n[4])return new Date(Date.UTC(e,i,s));if(r=+n[4],o=+n[5],a=+n[6],n[7]){for(l=n[7].slice(0,3);l.length<3;)l+="0";l=+l}return n[9]&&(c=6e4*(60*+n[10]+ +(n[11]||0)),"-"===n[9]&&(c=-c)),h=new Date(Date.UTC(e,i,s,r,o,a,l)),c&&h.setTime(h.getTime()-c),h},instanceOf:Date,represent:function NWe(t){return t.toISOString()}}),Pae=new Ma("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function RWe(t){return"<<"===t||null===t}}),G5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",$ae=new Ma("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function FWe(t){if(null===t)return!1;var n,e,i=0,s=t.length,r=G5;for(e=0;e<s;e++)if(!((n=r.indexOf(t.charAt(e)))>64)){if(n<0)return!1;i+=6}return i%8==0},construct:function LWe(t){var n,e,i=t.replace(/[\r\n=]/g,""),s=i.length,r=G5,o=0,a=[];for(n=0;n<s;n++)n%4==0&&n&&(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)),o=o<<6|r.indexOf(i.charAt(n));return 0==(e=s%4*6)?(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)):18===e?(a.push(o>>10&255),a.push(o>>2&255)):12===e&&a.push(o>>4&255),new Uint8Array(a)},predicate:function $We(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)},represent:function PWe(t){var i,s,n="",e=0,r=t.length,o=G5;for(i=0;i<r;i++)i%3==0&&i&&(n+=o[e>>18&63],n+=o[e>>12&63],n+=o[e>>6&63],n+=o[63&e]),e=(e<<8)+t[i];return 0==(s=r%3)?(n+=o[e>>18&63],n+=o[e>>12&63],n+=o[e>>6&63],n+=o[63&e]):2===s?(n+=o[e>>10&63],n+=o[e>>4&63],n+=o[e<<2&63],n+=o[64]):1===s&&(n+=o[e>>2&63],n+=o[e<<4&63],n+=o[64],n+=o[64]),n}}),BWe=Object.prototype.hasOwnProperty,VWe=Object.prototype.toString,Bae=new Ma("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function zWe(t){if(null===t)return!0;var e,i,s,r,o,n=[],a=t;for(e=0,i=a.length;e<i;e+=1){if(o=!1,"[object Object]"!==VWe.call(s=a[e]))return!1;for(r in s)if(BWe.call(s,r)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==n.indexOf(r))return!1;n.push(r)}return!0},construct:function UWe(t){return null!==t?t:[]}}),GWe=Object.prototype.toString,Vae=new Ma("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function jWe(t){if(null===t)return!0;var n,e,i,s,r,o=t;for(r=new Array(o.length),n=0,e=o.length;n<e;n+=1){if("[object Object]"!==GWe.call(i=o[n])||1!==(s=Object.keys(i)).length)return!1;r[n]=[s[0],i[s[0]]]}return!0},construct:function HWe(t){if(null===t)return[];var n,e,i,s,r,o=t;for(r=new Array(o.length),n=0,e=o.length;n<e;n+=1)i=o[n],s=Object.keys(i),r[n]=[s[0],i[s[0]]];return r}}),WWe=Object.prototype.hasOwnProperty,zae=new Ma("tag:yaml.org,2002:set",{kind:"mapping",resolve:function qWe(t){if(null===t)return!0;var n,e=t;for(n in e)if(WWe.call(e,n)&&null!==e[n])return!1;return!0},construct:function KWe(t){return null!==t?t:{}}}),j5=Nae.extend({implicit:[Lae,Pae],explicit:[$ae,Bae,Vae,zae]}),Op=Object.prototype.hasOwnProperty,DM=1,Uae=2,Gae=3,MM=4,H5=1,XWe=2,jae=3,YWe=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,ZWe=/[\x85\u2028\u2029]/,QWe=/[,\[\]\{\}]/,Hae=/^(?:!|!!|![a-z\-]+!)$/i,Wae=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function qae(t){return Object.prototype.toString.call(t)}function Qd(t){return 10===t||13===t}function ag(t){return 9===t||32===t}function Xl(t){return 9===t||32===t||10===t||13===t}function Cy(t){return 44===t||91===t||93===t||123===t||125===t}function JWe(t){var n;return 48<=t&&t<=57?t-48:97<=(n=32|t)&&n<=102?n-97+10:-1}function eqe(t){return 120===t?2:117===t?4:85===t?8:0}function tqe(t){return 48<=t&&t<=57?t-48:-1}function Kae(t){return 48===t?"\0":97===t?"\x07":98===t?"\b":116===t||9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"\x1b":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"\x85":95===t?"\xa0":76===t?"\u2028":80===t?"\u2029":""}function nqe(t){return t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}for(var Xae=new Array(256),Yae=new Array(256),xy=0;xy<256;xy++)Xae[xy]=Kae(xy)?1:0,Yae[xy]=Kae(xy);function iqe(t,n){this.input=t,this.filename=n.filename||null,this.schema=n.schema||j5,this.onWarning=n.onWarning||null,this.legacy=n.legacy||!1,this.json=n.json||!1,this.listener=n.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Zae(t,n){var e={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return e.snippet=aWe(e),new wl(n,e)}function Dn(t,n){throw Zae(t,n)}function AM(t,n){t.onWarning&&t.onWarning.call(null,Zae(t,n))}var Qae={YAML:function(n,e,i){var s,r,o;null!==n.version&&Dn(n,"duplication of %YAML directive"),1!==i.length&&Dn(n,"YAML directive accepts exactly one argument"),null===(s=/^([0-9]+)\.([0-9]+)$/.exec(i[0]))&&Dn(n,"ill-formed argument of the YAML directive"),r=parseInt(s[1],10),o=parseInt(s[2],10),1!==r&&Dn(n,"unacceptable YAML version of the document"),n.version=i[0],n.checkLineBreaks=o<2,1!==o&&2!==o&&AM(n,"unsupported YAML version of the document")},TAG:function(n,e,i){var s,r;2!==i.length&&Dn(n,"TAG directive accepts exactly two arguments"),r=i[1],Hae.test(s=i[0])||Dn(n,"ill-formed tag handle (first argument) of the TAG directive"),Op.call(n.tagMap,s)&&Dn(n,'there is a previously declared suffix for "'+s+'" tag handle'),Wae.test(r)||Dn(n,"ill-formed tag prefix (second argument) of the TAG directive");try{r=decodeURIComponent(r)}catch{Dn(n,"tag prefix is malformed: "+r)}n.tagMap[s]=r}};function Np(t,n,e,i){var s,r,o,a;if(n<e){if(a=t.input.slice(n,e),i)for(s=0,r=a.length;s<r;s+=1)9===(o=a.charCodeAt(s))||32<=o&&o<=1114111||Dn(t,"expected valid JSON character");else YWe.test(a)&&Dn(t,"the stream contains non-printable characters");t.result+=a}}function Jae(t,n,e,i){var s,r,o,a;for(Yo.isObject(e)||Dn(t,"cannot merge mappings; the provided source object is unacceptable"),o=0,a=(s=Object.keys(e)).length;o<a;o+=1)Op.call(n,r=s[o])||(n[r]=e[r],i[r]=!0)}function Ey(t,n,e,i,s,r,o,a,l){var c,u;if(Array.isArray(s))for(c=0,u=(s=Array.prototype.slice.call(s)).length;c<u;c+=1)Array.isArray(s[c])&&Dn(t,"nested arrays are not supported inside keys"),"object"==typeof s&&"[object Object]"===qae(s[c])&&(s[c]="[object Object]");if("object"==typeof s&&"[object Object]"===qae(s)&&(s="[object Object]"),s=String(s),null===n&&(n={}),"tag:yaml.org,2002:merge"===i)if(Array.isArray(r))for(c=0,u=r.length;c<u;c+=1)Jae(t,n,r[c],e);else Jae(t,n,r,e);else!t.json&&!Op.call(e,s)&&Op.call(n,s)&&(t.line=o||t.line,t.lineStart=a||t.lineStart,t.position=l||t.position,Dn(t,"duplicated mapping key")),"__proto__"===s?Object.defineProperty(n,s,{configurable:!0,enumerable:!0,writable:!0,value:r}):n[s]=r,delete e[s];return n}function W5(t){var n;10===(n=t.input.charCodeAt(t.position))?t.position++:13===n?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):Dn(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function ko(t,n,e){for(var i=0,s=t.input.charCodeAt(t.position);0!==s;){for(;ag(s);)9===s&&-1===t.firstTabInLine&&(t.firstTabInLine=t.position),s=t.input.charCodeAt(++t.position);if(n&&35===s)do{s=t.input.charCodeAt(++t.position)}while(10!==s&&13!==s&&0!==s);if(!Qd(s))break;for(W5(t),s=t.input.charCodeAt(t.position),i++,t.lineIndent=0;32===s;)t.lineIndent++,s=t.input.charCodeAt(++t.position)}return-1!==e&&0!==i&&t.lineIndent<e&&AM(t,"deficient indentation"),i}function OM(t){var e,n=t.position;return!(45!==(e=t.input.charCodeAt(n))&&46!==e||e!==t.input.charCodeAt(n+1)||e!==t.input.charCodeAt(n+2)||(n+=3,e=t.input.charCodeAt(n),0!==e&&!Xl(e)))}function q5(t,n){1===n?t.result+=" ":n>1&&(t.result+=Yo.repeat("\n",n-1))}function ele(t,n){var e,l,i=t.tag,s=t.anchor,r=[],a=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=r),l=t.input.charCodeAt(t.position);0!==l&&(-1!==t.firstTabInLine&&(t.position=t.firstTabInLine,Dn(t,"tab characters must not be used in indentation")),45===l&&Xl(t.input.charCodeAt(t.position+1)));)if(a=!0,t.position++,ko(t,!0,-1)&&t.lineIndent<=n)r.push(null),l=t.input.charCodeAt(t.position);else if(e=t.line,Ty(t,n,Gae,!1,!0),r.push(t.result),ko(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===e||t.lineIndent>n)&&0!==l)Dn(t,"bad indentation of a sequence entry");else if(t.lineIndent<n)break;return!!a&&(t.tag=i,t.anchor=s,t.kind="sequence",t.result=r,!0)}function uqe(t){var n,s,r,o,e=!1,i=!1;if(33!==(o=t.input.charCodeAt(t.position)))return!1;if(null!==t.tag&&Dn(t,"duplication of a tag property"),60===(o=t.input.charCodeAt(++t.position))?(e=!0,o=t.input.charCodeAt(++t.position)):33===o?(i=!0,s="!!",o=t.input.charCodeAt(++t.position)):s="!",n=t.position,e){do{o=t.input.charCodeAt(++t.position)}while(0!==o&&62!==o);t.position<t.length?(r=t.input.slice(n,t.position),o=t.input.charCodeAt(++t.position)):Dn(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==o&&!Xl(o);)33===o&&(i?Dn(t,"tag suffix cannot contain exclamation marks"):(s=t.input.slice(n-1,t.position+1),Hae.test(s)||Dn(t,"named tag handle cannot contain such characters"),i=!0,n=t.position+1)),o=t.input.charCodeAt(++t.position);r=t.input.slice(n,t.position),QWe.test(r)&&Dn(t,"tag suffix cannot contain flow indicator characters")}r&&!Wae.test(r)&&Dn(t,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch{Dn(t,"tag name is malformed: "+r)}return e?t.tag=r:Op.call(t.tagMap,s)?t.tag=t.tagMap[s]+r:"!"===s?t.tag="!"+r:"!!"===s?t.tag="tag:yaml.org,2002:"+r:Dn(t,'undeclared tag handle "'+s+'"'),!0}function dqe(t){var n,e;if(38!==(e=t.input.charCodeAt(t.position)))return!1;for(null!==t.anchor&&Dn(t,"duplication of an anchor property"),e=t.input.charCodeAt(++t.position),n=t.position;0!==e&&!Xl(e)&&!Cy(e);)e=t.input.charCodeAt(++t.position);return t.position===n&&Dn(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(n,t.position),!0}function Ty(t,n,e,i,s){var r,o,a,d,h,f,p,g,v,l=1,c=!1,u=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,r=o=a=MM===e||Gae===e,i&&ko(t,!0,-1)&&(c=!0,t.lineIndent>n?l=1:t.lineIndent===n?l=0:t.lineIndent<n&&(l=-1)),1===l)for(;uqe(t)||dqe(t);)ko(t,!0,-1)?(c=!0,a=r,t.lineIndent>n?l=1:t.lineIndent===n?l=0:t.lineIndent<n&&(l=-1)):a=!1;if(a&&(a=c||s),(1===l||MM===e)&&(g=DM===e||Uae===e?n:n+1,v=t.position-t.lineStart,1===l?a&&(ele(t,v)||function cqe(t,n,e){var i,s,r,o,a,l,w,c=t.tag,u=t.anchor,d={},h=Object.create(null),f=null,p=null,g=null,v=!1,y=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=d),w=t.input.charCodeAt(t.position);0!==w;){if(!v&&-1!==t.firstTabInLine&&(t.position=t.firstTabInLine,Dn(t,"tab characters must not be used in indentation")),i=t.input.charCodeAt(t.position+1),r=t.line,63!==w&&58!==w||!Xl(i)){if(o=t.line,a=t.lineStart,l=t.position,!Ty(t,e,Uae,!1,!0))break;if(t.line===r){for(w=t.input.charCodeAt(t.position);ag(w);)w=t.input.charCodeAt(++t.position);if(58===w)Xl(w=t.input.charCodeAt(++t.position))||Dn(t,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(Ey(t,d,h,f,p,null,o,a,l),f=p=g=null),y=!0,v=!1,s=!1,f=t.tag,p=t.result;else{if(!y)return t.tag=c,t.anchor=u,!0;Dn(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!y)return t.tag=c,t.anchor=u,!0;Dn(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===w?(v&&(Ey(t,d,h,f,p,null,o,a,l),f=p=g=null),y=!0,v=!0,s=!0):v?(v=!1,s=!0):Dn(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,w=i;if((t.line===r||t.lineIndent>n)&&(v&&(o=t.line,a=t.lineStart,l=t.position),Ty(t,n,MM,!0,s)&&(v?p=t.result:g=t.result),v||(Ey(t,d,h,f,p,g,o,a,l),f=p=g=null),ko(t,!0,-1),w=t.input.charCodeAt(t.position)),(t.line===r||t.lineIndent>n)&&0!==w)Dn(t,"bad indentation of a mapping entry");else if(t.lineIndent<n)break}return v&&Ey(t,d,h,f,p,null,o,a,l),y&&(t.tag=c,t.anchor=u,t.kind="mapping",t.result=d),y}(t,v,g))||function aqe(t,n){var i,s,r,a,u,d,h,f,g,v,y,w,e=!0,o=t.tag,l=t.anchor,p=Object.create(null);if(91===(w=t.input.charCodeAt(t.position)))u=93,f=!1,a=[];else{if(123!==w)return!1;u=125,f=!0,a={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=a),w=t.input.charCodeAt(++t.position);0!==w;){if(ko(t,!0,n),(w=t.input.charCodeAt(t.position))===u)return t.position++,t.tag=o,t.anchor=l,t.kind=f?"mapping":"sequence",t.result=a,!0;e?44===w&&Dn(t,"expected the node content, but found ','"):Dn(t,"missed comma between flow collection entries"),y=null,d=h=!1,63===w&&Xl(t.input.charCodeAt(t.position+1))&&(d=h=!0,t.position++,ko(t,!0,n)),i=t.line,s=t.lineStart,r=t.position,Ty(t,n,DM,!1,!0),v=t.tag,g=t.result,ko(t,!0,n),w=t.input.charCodeAt(t.position),(h||t.line===i)&&58===w&&(d=!0,w=t.input.charCodeAt(++t.position),ko(t,!0,n),Ty(t,n,DM,!1,!0),y=t.result),f?Ey(t,a,p,v,g,y,i,s,r):a.push(d?Ey(t,null,p,v,g,y,i,s,r):g),ko(t,!0,n),44===(w=t.input.charCodeAt(t.position))?(e=!0,w=t.input.charCodeAt(++t.position)):e=!1}Dn(t,"unexpected end of the stream within a flow collection")}(t,g)?u=!0:(o&&function lqe(t,n){var e,i,u,d,s=H5,r=!1,o=!1,a=n,l=0,c=!1;if(124===(d=t.input.charCodeAt(t.position)))i=!1;else{if(62!==d)return!1;i=!0}for(t.kind="scalar",t.result="";0!==d;)if(43===(d=t.input.charCodeAt(++t.position))||45===d)H5===s?s=43===d?jae:XWe:Dn(t,"repeat of a chomping mode identifier");else{if(!((u=tqe(d))>=0))break;0===u?Dn(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?Dn(t,"repeat of an indentation width identifier"):(a=n+u-1,o=!0)}if(ag(d)){do{d=t.input.charCodeAt(++t.position)}while(ag(d));if(35===d)do{d=t.input.charCodeAt(++t.position)}while(!Qd(d)&&0!==d)}for(;0!==d;){for(W5(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!o||t.lineIndent<a)&&32===d;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!o&&t.lineIndent>a&&(a=t.lineIndent),Qd(d))l++;else{if(t.lineIndent<a){s===jae?t.result+=Yo.repeat("\n",r?1+l:l):s===H5&&r&&(t.result+="\n");break}for(i?ag(d)?(c=!0,t.result+=Yo.repeat("\n",r?1+l:l)):c?(c=!1,t.result+=Yo.repeat("\n",l+1)):0===l?r&&(t.result+=" "):t.result+=Yo.repeat("\n",l):t.result+=Yo.repeat("\n",r?1+l:l),r=!0,o=!0,l=0,e=t.position;!Qd(d)&&0!==d;)d=t.input.charCodeAt(++t.position);Np(t,e,t.position,!1)}}return!0}(t,g)||function rqe(t,n){var e,i,s;if(39!==(e=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,i=s=t.position;0!==(e=t.input.charCodeAt(t.position));)if(39===e){if(Np(t,i,t.position,!0),39!==(e=t.input.charCodeAt(++t.position)))return!0;i=t.position,t.position++,s=t.position}else Qd(e)?(Np(t,i,s,!0),q5(t,ko(t,!1,n)),i=s=t.position):t.position===t.lineStart&&OM(t)?Dn(t,"unexpected end of the document within a single quoted scalar"):(t.position++,s=t.position);Dn(t,"unexpected end of the stream within a single quoted scalar")}(t,g)||function oqe(t,n){var e,i,s,r,o,a;if(34!==(a=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,e=i=t.position;0!==(a=t.input.charCodeAt(t.position));){if(34===a)return Np(t,e,t.position,!0),t.position++,!0;if(92===a){if(Np(t,e,t.position,!0),Qd(a=t.input.charCodeAt(++t.position)))ko(t,!1,n);else if(a<256&&Xae[a])t.result+=Yae[a],t.position++;else if((o=eqe(a))>0){for(s=o,r=0;s>0;s--)(o=JWe(a=t.input.charCodeAt(++t.position)))>=0?r=(r<<4)+o:Dn(t,"expected hexadecimal character");t.result+=nqe(r),t.position++}else Dn(t,"unknown escape sequence");e=i=t.position}else Qd(a)?(Np(t,e,i,!0),q5(t,ko(t,!1,n)),e=i=t.position):t.position===t.lineStart&&OM(t)?Dn(t,"unexpected end of the document within a double quoted scalar"):(t.position++,i=t.position)}Dn(t,"unexpected end of the stream within a double quoted scalar")}(t,g)?u=!0:function hqe(t){var n,e,i;if(42!==(i=t.input.charCodeAt(t.position)))return!1;for(i=t.input.charCodeAt(++t.position),n=t.position;0!==i&&!Xl(i)&&!Cy(i);)i=t.input.charCodeAt(++t.position);return t.position===n&&Dn(t,"name of an alias node must contain at least one character"),e=t.input.slice(n,t.position),Op.call(t.anchorMap,e)||Dn(t,'unidentified alias "'+e+'"'),t.result=t.anchorMap[e],ko(t,!0,-1),!0}(t)?(u=!0,(null!==t.tag||null!==t.anchor)&&Dn(t,"alias node should not have any properties")):function sqe(t,n,e){var s,r,o,a,l,c,u,f,d=t.kind,h=t.result;if(Xl(f=t.input.charCodeAt(t.position))||Cy(f)||35===f||38===f||42===f||33===f||124===f||62===f||39===f||34===f||37===f||64===f||96===f||(63===f||45===f)&&(Xl(s=t.input.charCodeAt(t.position+1))||e&&Cy(s)))return!1;for(t.kind="scalar",t.result="",r=o=t.position,a=!1;0!==f;){if(58===f){if(Xl(s=t.input.charCodeAt(t.position+1))||e&&Cy(s))break}else if(35===f){if(Xl(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&OM(t)||e&&Cy(f))break;if(Qd(f)){if(l=t.line,c=t.lineStart,u=t.lineIndent,ko(t,!1,-1),t.lineIndent>=n){a=!0,f=t.input.charCodeAt(t.position);continue}t.position=o,t.line=l,t.lineStart=c,t.lineIndent=u;break}}a&&(Np(t,r,o,!1),q5(t,t.line-l),r=o=t.position,a=!1),ag(f)||(o=t.position+1),f=t.input.charCodeAt(++t.position)}return Np(t,r,o,!1),!!t.result||(t.kind=d,t.result=h,!1)}(t,g,DM===e)&&(u=!0,null===t.tag&&(t.tag="?")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===l&&(u=a&&ele(t,v))),null===t.tag)null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);else if("?"===t.tag){for(null!==t.result&&"scalar"!==t.kind&&Dn(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,h=t.implicitTypes.length;d<h;d+=1)if((p=t.implicitTypes[d]).resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else if("!"!==t.tag){if(Op.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,d=0,h=(f=t.typeMap.multi[t.kind||"fallback"]).length;d<h;d+=1)if(t.tag.slice(0,f[d].tag.length)===f[d].tag){p=f[d];break}p||Dn(t,"unknown tag !<"+t.tag+">"),null!==t.result&&p.kind!==t.kind&&Dn(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):Dn(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||u}function fqe(t){var e,i,s,o,n=t.position,r=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);0!==(o=t.input.charCodeAt(t.position))&&(ko(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||37!==o));){for(r=!0,o=t.input.charCodeAt(++t.position),e=t.position;0!==o&&!Xl(o);)o=t.input.charCodeAt(++t.position);for(s=[],(i=t.input.slice(e,t.position)).length<1&&Dn(t,"directive name must not be less than one character in length");0!==o;){for(;ag(o);)o=t.input.charCodeAt(++t.position);if(35===o){do{o=t.input.charCodeAt(++t.position)}while(0!==o&&!Qd(o));break}if(Qd(o))break;for(e=t.position;0!==o&&!Xl(o);)o=t.input.charCodeAt(++t.position);s.push(t.input.slice(e,t.position))}0!==o&&W5(t),Op.call(Qae,i)?Qae[i](t,i,s):AM(t,'unknown document directive "'+i+'"')}ko(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,ko(t,!0,-1)):r&&Dn(t,"directives end mark is expected"),Ty(t,t.lineIndent-1,MM,!1,!0),ko(t,!0,-1),t.checkLineBreaks&&ZWe.test(t.input.slice(n,t.position))&&AM(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&OM(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,ko(t,!0,-1)):t.position<t.length-1&&Dn(t,"end of the stream or a document separator is expected")}function tle(t,n){n=n||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var e=new iqe(t,n),i=t.indexOf("\0");for(-1!==i&&(e.position=i,Dn(e,"null byte is not allowed in input")),e.input+="\0";32===e.input.charCodeAt(e.position);)e.lineIndent+=1,e.position+=1;for(;e.position<e.length-1;)fqe(e);return e.documents}var nle_load=function mqe(t,n){var e=tle(t,n);if(0!==e.length){if(1===e.length)return e[0];throw new wl("expected a single document in the stream, but found more")}};function J5(t,n){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+n+" instead, which is now safe by default.")}}var Sle=nle_load;J5("safeLoad","load"),J5("safeLoadAll","loadAll"),J5("safeDump","dump");let In=(()=>{class t{get settings(){return this._settings}get region_settings(){return this._region_settings}get building_settings(){return this._building_settings}regionSettings(e=""){const i=this._active_region.getValue();return!e&&i&&(e=i?.id),this._region_settings&&this._region_settings[e]||{}}buildingSettings(e=""){return!e&&this.building&&(e=this.building?.id||this.buildings[0]?.id),this._building_settings&&this._building_settings[e]||{}}get organisation(){return this._organisation}get regions(){return this._regions.getValue()}get region(){return this._active_region.getValue()}set region(e){this.setRegion(e)}setRegion(e){var i=this;return de(function*(){e&&(i._active_region.next(e),yield i.loadRegionData(e),i._setBuildingFromTimezone(),i.building?.parent_id!==e.id&&i.buildingsForRegion(e).length?i.building=i.buildingsForRegion(e)[0]:i._updateSettingOverrides())})()}get buildings(){return this._buildings.getValue()||[]}get building(){return this._active_building.getValue()}set building(e){e&&(this._active_building.next(e),this.loadBuildingData(e).then(()=>this._updateSettingOverrides()),this.regions.length&&this.region?.id!==e.parent_id&&(this.region=this.regions.find(i=>i.id===this.building.parent_id)))}get timezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone}get currency_code(){return this._service.get("app.currency")||this.building?.currency||"USD"}binding(e){return this.building?.bindings[e]||this._organisation?.bindings[e]}find(e){return this.buildings.find(i=>i.id===e)}get levels(){return this._levels.getValue()}constructor(e,i){this._service=e,this._router=i,this._initialised=new Mt(!1),this.initialised=this._initialised.asObservable(),this._regions=new Mt([]),this._active_region=new Mt(null),this._buildings=new Mt([]),this._active_building=new Mt(null),this._levels=new Mt([]),this._loaded_data=[],this.app_key=`${(this._service.app_name||"workplace").toLowerCase()}_app`,this.region_list=this._regions.asObservable(),this.building_list=this._buildings.asObservable(),this.level_list=this._levels.asObservable(),this.active_region=this._active_region.asObservable(),this.active_building=this._active_building.asObservable(),this.active_buildings=Qt([this._buildings,this._active_region]).pipe(ze(([s,r])=>r?this.buildingsForRegion(r):this.buildings)),this.active_levels=Qt([this._levels,this._active_building]).pipe(ze(([s,r])=>r?this.levelsForBuilding(r):[]),jn(1)),this._settings=[],this._region_settings={},this._building_settings={},Coe().pipe(ds(s=>s)).subscribe(()=>setTimeout(()=>this.init(),1e3)),Qt([this.active_region,this.active_building]).pipe(an(([s,r])=>!!r),hs(300)).subscribe(()=>this._updateSettingOverrides())}levelWithID(e){return this.levels.find(i=>e?.includes(i.id))}levelsForBuilding(e=this.building){return this.levels.filter(i=>i.parent_id&&i.parent_id===e?.id)}buildingsForRegion(e=this.region){return this.buildings.filter(i=>i.parent_id===e?.id)}levelsForRegion(e=this.region){const i=this.buildingsForRegion(e);return this.levels.filter(s=>s.parent_id&&i.find(r=>r.id===s.parent_id))}addZone(e){if(e.tags.includes("region")){const i=new vae(e),s=this._regions.getValue().filter(r=>r.id!==i.id);s.push(i),this._regions.next(s)}else if(e.tags.includes("building")){const i=new B5(e);let s=this._buildings.getValue().filter(r=>r.id!==i.id);s.push(i),s=s.sort((r,o)=>(r.name||"").localeCompare(o.name||"")),this._buildings.next(s)}else if(e.tags.includes("level")){const i=new _C(e);let s=this._levels.getValue().filter(r=>r.id!==i.id);s.push(i),s=s.sort((r,o)=>(r.name||"").localeCompare(o.name||"")),this._levels.next(s)}else console.warn("Unable to add zone as it is missing the required tag.",e.id)}removeZone(e){if(e.tags.includes("region")){const i=this._regions.getValue().filter(s=>s.id!==e.id);this._regions.next(i)}else if(e.tags.includes("building")){const i=this._buildings.getValue().filter(s=>s.id!==e.id);this._buildings.next(i)}else if(e.tags.includes("level")){const i=this._levels.getValue().filter(s=>s.id!==e.id);this._levels.next(i)}else console.warn("Unable to remove zone as it is missing the required tag.",e.id)}init(e=0){var i=this;return de(function*(){i._initialised.next(!1),yield i.load().catch(s=>{throw Mi("Error loading organisation data. Retrying..."),setTimeout(()=>i.init(e),Math.min(1e4,300*++e)),s}),i._initialised.next(!0),window.debug&&(window.application||(window.application={}),window.application.orgs=i)})()}load(){var e=this;return de(function*(){if(yield e.loadOrganisation(),yield e.loadRegions(),e._regions.getValue().length)for(const i of e._regions.getValue()){const s=yield e.loadBuildings(i.id);if(s.length){e._buildings.next(s);break}}else e._buildings.next(yield e.loadBuildings());yield e.loadSettings(),e._buildings.getValue()?.length||(Xi("ORG","Unable to find any building zones"),e._router.navigate(["/misconfigured"])),yield e.loadLevels(),e._updateSettingOverrides()})()}loadOrganisation(){var e=this;return de(function*(){const i=yield nC({tags:"org"}).pipe(ze(s=>s.data)).toPromise();if(i.length){const s=kc(),r=i.find(a=>US()||a.id===s?.config?.org_zone)||i[0],o=(yield uo(r.id,"bindings").toPromise())?.details;e._organisation=new qHe({...r,bindings:o})}else Xi("ORG","Unable to find organisation"),e._router.navigate(["/misconfigured"])})()}loadRegions(){var e=this;return de(function*(){const i=yield nC({tags:"region",parent_id:e._organisation?.id||"",limit:500}).pipe(ze(s=>s.data.map(r=>new vae(r))),ts(()=>gt([]))).toPromise();e._regions.next(i)})()}loadRegionData(e){var i=this;return de(function*(){if(i._loaded_data[e.id])return;const[s,r,o]=yield Promise.all([uo(e.id,i.app_key).pipe(ze(a=>a?.details)).toPromise(),uo(e.id,"bindings").pipe(ze(a=>a?.details)).toPromise(),i.loadBuildings(e.id)]);i._buildings.next(Cs([...i._buildings.getValue(),...o],"id")),i._loaded_data[e.id]=!0,e.bindings=r,i._region_settings[e.id]=s})()}loadBuildings(e=this._organisation?.id){return de(function*(){return yield nC({tags:"building",parent_id:e,limit:500}).pipe(ze(s=>s.data.map(r=>new B5(r)))).toPromise()})()}loadBuildingData(e){var i=this;return de(function*(){if(!e||i._loaded_data[e.id])return;const[s,r,o,a]=yield Promise.all([uo(e.id,i.app_key).pipe(ze(l=>l?.details),ts(()=>gt({}))).toPromise(),uo(e.id,"bindings").pipe(ze(l=>l?.details),ts(()=>gt({}))).toPromise(),uo(e.id,"booking_rules").pipe(ze(l=>l?.details),ts(()=>gt({}))).toPromise(),XGe({parent_id:e.id}).pipe(ts(()=>gt({data:{}})),ze(l=>{try{return Sle(l?.data.find(c=>c.encryption_level===Z_.None)||{settings_string:""})}catch{return{}}})).toPromise()]);console.log("Building Settings:",e.display_name||e.name,e.id,s),i._building_settings[e.id]={...a||{},...s||{}},e.bindings=r,e.booking_rules=o,i._loaded_data[e.id]=!0,i._updateSettingOverrides()})()}loadLevels(){var e=this;return de(function*(){const i=yield nC({tags:"level",limit:2500}).pipe(ze(r=>r.data)).toPromise();i?.length||e._router.navigate(["/misconfigured"]);let s=i.map(r=>new _C(r));s=s.sort((r,o)=>(r.name||"").localeCompare(o.name||"")),e._levels.next(s)})()}get available_room_configs(){return this.buildings.map(e=>[...e.room_configurations]).reduce((e,i)=>e.concat(i),[]).sort((e,i)=>e.name.localeCompare(i.name))}loadSettings(){var e=this;return de(function*(){if(!e._organisation)return;const i=(yield uo(e._organisation?.id,e.app_key).toPromise())?.details,s=(yield uo(e._organisation?.id,"settings").toPromise())?.details;e._settings=[s,i],e._service.overrides=[...e._settings],yield e._initialiseActiveBuilding(),e._updateSettingOverrides()})()}saveBuilding(e){const i=this._buildings.getValue().find(s=>s.id===e)?.parent_id;i&&i!==this._organisation.id&&sessionStorage.setItem("PLACEOS.region",i),sessionStorage.setItem("PLACEOS.building",e)}_initialiseActiveBuilding(){return new Promise(e=>{const i=sessionStorage.getItem("PLACEOS.building");if(i&&this.buildings.find(r=>r.id===i))return this.building=this.buildings.find(r=>r.id===i),e();this._service.get("app.use_geolocation")&&"geolocation"in navigator?navigator.geolocation.getCurrentPosition(r=>{const{latitude:o,longitude:a}=r.coords;let l=null;for(const c of this.buildings)if(c.location&&"0,0"!==c.location)if(l){const[u,d]=(l.location||"0,0").split(","),[h,f]=(c.location||"0,0").split(",");Math.sqrt(Math.pow(o-+h,2)+Math.pow(a-+f,2))<Math.sqrt(Math.pow(o-+u,2)+Math.pow(a-+d,2))&&(l=c)}else l=c;l&&(this.building=l),this.building?.id||this._setDefaultBuilding(),e()},()=>{this.building?.id||this._setDefaultBuilding(),e()}):this.building?.id||(this._setDefaultBuilding(),e())})}_setDefaultBuilding(){var e=this;return de(function*(){if(!e.buildings.length)return;const i=sessionStorage.getItem("PLACEOS.region");if(yield i?e.setRegion(e._regions.getValue().find(r=>r.id===i)):e._setRegionFromTimezone(),e._setBuildingFromTimezone(),e.building)return;const s=e._service.get("app.default_building");s&&(e.building=e.buildings.find(({id:r})=>r===s)),e.building||(e.building=e.buildings[0])})()}_setRegionFromTimezone(){var e=this;return de(function*(){const i=e.regions,s=e.timezone;for(const o of i)if(o.timezone===s)return yield e.setRegion(o);const r=s.split("/")[0];for(const o of i)if(o.timezone.startsWith(r))return yield e.setRegion(o)})()}_setBuildingFromTimezone(){const e=this.buildings.filter(r=>!this.region||r.parent_id===this.region?.id),i=this.timezone;for(const r of e)if(r.timezone===i)return void(this.building=r);const s=i.split("/")[0];for(const r of e)if(r.timezone.startsWith(s))return void(this.building=r)}_updateSettingOverrides(){setTimeout(()=>this._service.overrides=[this.buildingSettings(this.building?.id),this.regionSettings(this.region?.id),...this._settings],300)}static#e=this.\u0275fac=function(i){return new(i||t)(Re(ln),Re(Hr))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Jd=function(t){return t[t.GoogleMaps=0]="GoogleMaps",t[t.Mapbox=1]="Mapbox",t}(Jd||{});let Rp=(()=>{class t extends bn{get map_keys(){return this._settings.get("app.maps_people.keys")||{}}get use_service(){return this._settings.get("app.maps_people.use_zones")||[]}get map_service(){return this._map_service.getValue()}get map_token(){return this._map_token.getValue()}get is_ready(){return this._ready.getValue()}constructor(e,i){super(),this._settings=e,this._org=i,this._map_service=new Mt(null),this._map_token=new Mt(""),this._ready=new Mt(!1),this._injected={},this._custom_zone=new Mt(""),this.available$=Qt([this._org.active_building,this._custom_zone,this._org.initialised]).pipe(an(([s])=>!!s),hs(300),mi(()=>this._injectMapsApiKeys()),ze(([s,r])=>this.map_keys.mapsindoors&&(this.use_service.includes(r||s.id)||this.use_service.includes("*"))),jn(1))}setCustomZone(e){this._custom_zone.next(e)}_injectMapsApiKeys(){Xi("MapsPeople","Initializing Maps API Keys"),this._ready.next(!1);const{mapsindoors:e,google:i,mapbox:s}=this.map_keys;if(e){if(e&&!this._injected.mapsindoors){const r=document.createElement("script");r.src=`https://app.mapsindoors.com/mapsindoors/js/sdk/4.35.0/mapsindoors-4.35.0.js.gz?apikey=${e}`,document.body.appendChild(r),this._injected.mapsindoors=!0}if(i&&s)return void Xi("MapsPeople","Both Google and Mapbox keys provided",void 0,"error");if(i&&!this._injected.google){const r=document.createElement("script");r.src=`https://maps.googleapis.com/maps/api/js?libraries=geometry&key=${i}`,document.body.appendChild(r),this._map_service.next(Jd.GoogleMaps),this._injected.google=!0}else if(s&&!this._injected.mapbox){const r=document.createElement("script");r.src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js",document.body.appendChild(r);const o=document.createElement("link");o.rel="stylesheet",o.href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css",document.head.appendChild(o),this._map_service.next(Jd.Mapbox),this._map_token.next(s),this._injected.mapbox=!0}(i||s)&&(Xi("MapsPeople","Initialized Maps API Keys for "+(i?"Google Maps":"Mapbox")),this.timeout("ready",()=>this._ready.next(!0),300))}}static#e=this.\u0275fac=function(i){return new(i||t)(Re(ln),Re(In))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();wo("show",[us(":enter",[Sn({opacity:0,height:0}),bs(300,Sn({opacity:1,height:"*"}))]),us(":leave",[Sn({opacity:1,height:"*"}),bs(300,Sn({opacity:0,height:0}))])]);const _Ke=wo("show",[Gs("show",Sn({opacity:1,height:"*"})),Gs("hide",Sn({opacity:0,height:0,"pointer-events":"none"})),us("show <=> hide",bs("200ms ease-in"))]),gKe=[void 0,null,""];function zr(t){let n="";if(t)for(const e in t)e in t&&!gKe.includes(t[e])&&(n+=`${n?"&":""}${e}=${encodeURIComponent(t[e])}`);return n}let SC,xle=!1;function Ele(){return xle}function eB(){return eB=de(function*(t){if(t.isEnabled&&(yield t.checkForUpdate())){if(Xi("CACHE","Activating changes to the cache..."),!(yield t.activateUpdate()))return;xle=!0,kM("Newer version of the application is available","Refresh",()=>location.reload())}}),eB.apply(this,arguments)}function tB(){return tB=de(function*(t){const n=t.protocol||location.protocol,e=t.domain||location.hostname,i=t.port||location.port,s=t.use_domain?`${n}//${e}:${i}`:location.origin,r=(location.pathname+"/").replace("//","/"),o=t.mock||location.href.includes("mock=true")||"true"===localStorage.getItem("mock"),a={auth_type:"auth_code",scope:"public",host:`${e}${i?":"+i:""}`,auth_uri:`${s}/auth/oauth/authorize`,token_uri:`${s}/auth/oauth/token`,redirect_uri:`${location.origin}${r}oauth-resp.html`,handle_login:!t.local_login,use_iframe:!0,mock:o};return localStorage&&localStorage.setItem("mock",`${!!o&&!location.href.includes("mock=false")}`),o&&kM("Application in mock mode."),function SGe(t){var n;return Yi=t||Yi,Yi.token_header=null!==(n=Yi.token_header)&&void 0!==n?n:function rGe(){return window.location!==window.parent.location}(),window.AbortController||(window.AbortController=aGe),cr="session"===Yi.storage?sessionStorage:localStorage,ur=co.hashStr(Yi.redirect_uri,!1),g5()}(a)}),tB.apply(this,arguments)}function Tle(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ile(t,n,e){return n&&Tle(t.prototype,n),e&&Tle(t,e),t}function ld(){return ld=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ld.apply(this,arguments)}function FM(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,nB(t,n)}function nB(t,n){return(nB=Object.setPrototypeOf||function(e,i){return e.__proto__=i,e})(t,n)}Cs(To([{value:"Dateline Standard Time",abbr:"DST",offset:-12,isdst:!1,text:"(UTC-12:00) International Date Line West",utc:["Etc/GMT+12"]},{value:"UTC-11",abbr:"U",offset:-11,isdst:!1,text:"(UTC-11:00) Coordinated Universal Time-11",utc:["Etc/GMT+11","Pacific/Midway","Pacific/Niue","Pacific/Pago_Pago"]},{value:"Hawaiian Standard Time",abbr:"HST",offset:-10,isdst:!1,text:"(UTC-10:00) Hawaii",utc:["Etc/GMT+10","Pacific/Honolulu","Pacific/Johnston","Pacific/Rarotonga","Pacific/Tahiti"]},{value:"Alaskan Standard Time",abbr:"AKDT",offset:-8,isdst:!0,text:"(UTC-09:00) Alaska",utc:["America/Anchorage","America/Juneau","America/Nome","America/Sitka","America/Yakutat"]},{value:"Pacific Standard Time (Mexico)",abbr:"PDT",offset:-7,isdst:!0,text:"(UTC-08:00) Baja California",utc:["America/Santa_Isabel"]},{value:"Pacific Daylight Time",abbr:"PDT",offset:-7,isdst:!0,text:"(UTC-07:00) Pacific Time (US & Canada)",utc:["America/Dawson","America/Los_Angeles","America/Tijuana","America/Vancouver","America/Whitehorse"]},{value:"Pacific Standard Time",abbr:"PST",offset:-8,isdst:!1,text:"(UTC-08:00) Pacific Time (US & Canada)",utc:["America/Dawson","America/Los_Angeles","America/Tijuana","America/Vancouver","America/Whitehorse","PST8PDT"]},{value:"US Mountain Standard Time",abbr:"UMST",offset:-7,isdst:!1,text:"(UTC-07:00) Arizona",utc:["America/Creston","America/Dawson_Creek","America/Hermosillo","America/Phoenix","Etc/GMT+7"]},{value:"Mountain Standard Time (Mexico)",abbr:"MDT",offset:-6,isdst:!0,text:"(UTC-07:00) Chihuahua, La Paz, Mazatlan",utc:["America/Chihuahua","America/Mazatlan"]},{value:"Mountain Standard Time",abbr:"MDT",offset:-6,isdst:!0,text:"(UTC-07:00) Mountain Time (US & Canada)",utc:["America/Boise","America/Cambridge_Bay","America/Denver","America/Edmonton","America/Inuvik","America/Ojinaga","America/Yellowknife","MST7MDT"]},{value:"Central America Standard Time",abbr:"CAST",offset:-6,isdst:!1,text:"(UTC-06:00) Central America",utc:["America/Belize","America/Costa_Rica","America/El_Salvador","America/Guatemala","America/Managua","America/Tegucigalpa","Etc/GMT+6","Pacific/Galapagos"]},{value:"Central Standard Time",abbr:"CDT",offset:-5,isdst:!0,text:"(UTC-06:00) Central Time (US & Canada)",utc:["America/Chicago","America/Indiana/Knox","America/Indiana/Tell_City","America/Matamoros","America/Menominee","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Rainy_River","America/Rankin_Inlet","America/Resolute","America/Winnipeg","CST6CDT"]},{value:"Central Standard Time (Mexico)",abbr:"CDT",offset:-5,isdst:!0,text:"(UTC-06:00) Guadalajara, Mexico City, Monterrey",utc:["America/Bahia_Banderas","America/Cancun","America/Merida","America/Mexico_City","America/Monterrey"]},{value:"Canada Central Standard Time",abbr:"CCST",offset:-6,isdst:!1,text:"(UTC-06:00) Saskatchewan",utc:["America/Regina","America/Swift_Current"]},{value:"SA Pacific Standard Time",abbr:"SPST",offset:-5,isdst:!1,text:"(UTC-05:00) Bogota, Lima, Quito",utc:["America/Bogota","America/Cayman","America/Coral_Harbour","America/Eirunepe","America/Guayaquil","America/Jamaica","America/Lima","America/Panama","America/Rio_Branco","Etc/GMT+5"]},{value:"Eastern Standard Time",abbr:"EDT",offset:-4,isdst:!0,text:"(UTC-05:00) Eastern Time (US & Canada)",utc:["America/Detroit","America/Havana","America/Indiana/Petersburg","America/Indiana/Vincennes","America/Indiana/Winamac","America/Iqaluit","America/Kentucky/Monticello","America/Louisville","America/Montreal","America/Nassau","America/New_York","America/Nipigon","America/Pangnirtung","America/Port-au-Prince","America/Thunder_Bay","America/Toronto","EST5EDT"]},{value:"US Eastern Standard Time",abbr:"UEDT",offset:-4,isdst:!0,text:"(UTC-05:00) Indiana (East)",utc:["America/Indiana/Marengo","America/Indiana/Vevay","America/Indianapolis"]},{value:"Venezuela Standard Time",abbr:"VST",offset:-4.5,isdst:!1,text:"(UTC-04:30) Caracas",utc:["America/Caracas"]},{value:"Paraguay Standard Time",abbr:"PYT",offset:-4,isdst:!1,text:"(UTC-04:00) Asuncion",utc:["America/Asuncion"]},{value:"Atlantic Standard Time",abbr:"ADT",offset:-3,isdst:!0,text:"(UTC-04:00) Atlantic Time (Canada)",utc:["America/Glace_Bay","America/Goose_Bay","America/Halifax","America/Moncton","America/Thule","Atlantic/Bermuda"]},{value:"Central Brazilian Standard Time",abbr:"CBST",offset:-4,isdst:!1,text:"(UTC-04:00) Cuiaba",utc:["America/Campo_Grande","America/Cuiaba"]},{value:"SA Western Standard Time",abbr:"SWST",offset:-4,isdst:!1,text:"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan",utc:["America/Anguilla","America/Antigua","America/Aruba","America/Barbados","America/Blanc-Sablon","America/Boa_Vista","America/Curacao","America/Dominica","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guyana","America/Kralendijk","America/La_Paz","America/Lower_Princes","America/Manaus","America/Marigot","America/Martinique","America/Montserrat","America/Port_of_Spain","America/Porto_Velho","America/Puerto_Rico","America/Santo_Domingo","America/St_Barthelemy","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Tortola","Etc/GMT+4"]},{value:"Pacific SA Standard Time",abbr:"PSST",offset:-4,isdst:!1,text:"(UTC-04:00) Santiago",utc:["America/Santiago","Antarctica/Palmer"]},{value:"Newfoundland Standard Time",abbr:"NDT",offset:-2.5,isdst:!0,text:"(UTC-03:30) Newfoundland",utc:["America/St_Johns"]},{value:"E. South America Standard Time",abbr:"ESAST",offset:-3,isdst:!1,text:"(UTC-03:00) Brasilia",utc:["America/Sao_Paulo"]},{value:"Argentina Standard Time",abbr:"AST",offset:-3,isdst:!1,text:"(UTC-03:00) Buenos Aires",utc:["America/Argentina/La_Rioja","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Buenos_Aires","America/Catamarca","America/Cordoba","America/Jujuy","America/Mendoza"]},{value:"SA Eastern Standard Time",abbr:"SEST",offset:-3,isdst:!1,text:"(UTC-03:00) Cayenne, Fortaleza",utc:["America/Araguaina","America/Belem","America/Cayenne","America/Fortaleza","America/Maceio","America/Paramaribo","America/Recife","America/Santarem","Antarctica/Rothera","Atlantic/Stanley","Etc/GMT+3"]},{value:"Greenland Standard Time",abbr:"GDT",offset:-3,isdst:!0,text:"(UTC-03:00) Greenland",utc:["America/Godthab"]},{value:"Montevideo Standard Time",abbr:"MST",offset:-3,isdst:!1,text:"(UTC-03:00) Montevideo",utc:["America/Montevideo"]},{value:"Bahia Standard Time",abbr:"BST",offset:-3,isdst:!1,text:"(UTC-03:00) Salvador",utc:["America/Bahia"]},{value:"UTC-02",abbr:"U",offset:-2,isdst:!1,text:"(UTC-02:00) Coordinated Universal Time-02",utc:["America/Noronha","Atlantic/South_Georgia","Etc/GMT+2"]},{value:"Mid-Atlantic Standard Time",abbr:"MDT",offset:-1,isdst:!0,text:"(UTC-02:00) Mid-Atlantic - Old",utc:[]},{value:"Azores Standard Time",abbr:"ADT",offset:0,isdst:!0,text:"(UTC-01:00) Azores",utc:["America/Scoresbysund","Atlantic/Azores"]},{value:"Cape Verde Standard Time",abbr:"CVST",offset:-1,isdst:!1,text:"(UTC-01:00) Cape Verde Is.",utc:["Atlantic/Cape_Verde","Etc/GMT+1"]},{value:"Morocco Standard Time",abbr:"MDT",offset:1,isdst:!0,text:"(UTC) Casablanca",utc:["Africa/Casablanca","Africa/El_Aaiun"]},{value:"UTC",abbr:"UTC",offset:0,isdst:!1,text:"(UTC) Coordinated Universal Time",utc:["America/Danmarkshavn","Etc/GMT"]},{value:"GMT Standard Time",abbr:"GMT",offset:0,isdst:!1,text:"(UTC) Edinburgh, London",utc:["Europe/Isle_of_Man","Europe/Guernsey","Europe/Jersey","Europe/London"]},{value:"British Summer Time",abbr:"BST",offset:1,isdst:!0,text:"(UTC+01:00) Edinburgh, London",utc:["Europe/Isle_of_Man","Europe/Guernsey","Europe/Jersey","Europe/London"]},{value:"GMT Standard Time",abbr:"GDT",offset:1,isdst:!0,text:"(UTC) Dublin, Lisbon",utc:["Atlantic/Canary","Atlantic/Faeroe","Atlantic/Madeira","Europe/Dublin","Europe/Lisbon"]},{value:"Greenwich Standard Time",abbr:"GST",offset:0,isdst:!1,text:"(UTC) Monrovia, Reykjavik",utc:["Africa/Abidjan","Africa/Accra","Africa/Bamako","Africa/Banjul","Africa/Bissau","Africa/Conakry","Africa/Dakar","Africa/Freetown","Africa/Lome","Africa/Monrovia","Africa/Nouakchott","Africa/Ouagadougou","Africa/Sao_Tome","Atlantic/Reykjavik","Atlantic/St_Helena"]},{value:"W. Europe Standard Time",abbr:"WEDT",offset:2,isdst:!0,text:"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",utc:["Arctic/Longyearbyen","Europe/Amsterdam","Europe/Andorra","Europe/Berlin","Europe/Busingen","Europe/Gibraltar","Europe/Luxembourg","Europe/Malta","Europe/Monaco","Europe/Oslo","Europe/Rome","Europe/San_Marino","Europe/Stockholm","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Zurich"]},{value:"Central Europe Standard Time",abbr:"CEDT",offset:2,isdst:!0,text:"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague",utc:["Europe/Belgrade","Europe/Bratislava","Europe/Budapest","Europe/Ljubljana","Europe/Podgorica","Europe/Prague","Europe/Tirane"]},{value:"Romance Standard Time",abbr:"RDT",offset:2,isdst:!0,text:"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris",utc:["Africa/Ceuta","Europe/Brussels","Europe/Copenhagen","Europe/Madrid","Europe/Paris"]},{value:"Central European Standard Time",abbr:"CEDT",offset:2,isdst:!0,text:"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb",utc:["Europe/Sarajevo","Europe/Skopje","Europe/Warsaw","Europe/Zagreb"]},{value:"W. Central Africa Standard Time",abbr:"WCAST",offset:1,isdst:!1,text:"(UTC+01:00) West Central Africa",utc:["Africa/Algiers","Africa/Bangui","Africa/Brazzaville","Africa/Douala","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Luanda","Africa/Malabo","Africa/Ndjamena","Africa/Niamey","Africa/Porto-Novo","Africa/Tunis","Etc/GMT-1"]},{value:"Namibia Standard Time",abbr:"NST",offset:1,isdst:!1,text:"(UTC+01:00) Windhoek",utc:["Africa/Windhoek"]},{value:"GTB Standard Time",abbr:"GDT",offset:3,isdst:!0,text:"(UTC+02:00) Athens, Bucharest",utc:["Asia/Nicosia","Europe/Athens","Europe/Bucharest","Europe/Chisinau"]},{value:"Middle East Standard Time",abbr:"MEDT",offset:3,isdst:!0,text:"(UTC+02:00) Beirut",utc:["Asia/Beirut"]},{value:"Egypt Standard Time",abbr:"EST",offset:2,isdst:!1,text:"(UTC+02:00) Cairo",utc:["Africa/Cairo"]},{value:"Syria Standard Time",abbr:"SDT",offset:3,isdst:!0,text:"(UTC+02:00) Damascus",utc:["Asia/Damascus"]},{value:"E. Europe Standard Time",abbr:"EEDT",offset:3,isdst:!0,text:"(UTC+02:00) E. Europe",utc:["Asia/Nicosia","Europe/Athens","Europe/Bucharest","Europe/Chisinau","Europe/Helsinki","Europe/Kiev","Europe/Mariehamn","Europe/Nicosia","Europe/Riga","Europe/Sofia","Europe/Tallinn","Europe/Uzhgorod","Europe/Vilnius","Europe/Zaporozhye"]},{value:"South Africa Standard Time",abbr:"SAST",offset:2,isdst:!1,text:"(UTC+02:00) Harare, Pretoria",utc:["Africa/Blantyre","Africa/Bujumbura","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Kigali","Africa/Lubumbashi","Africa/Lusaka","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Etc/GMT-2"]},{value:"FLE Standard Time",abbr:"FDT",offset:3,isdst:!0,text:"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius",utc:["Europe/Helsinki","Europe/Kiev","Europe/Mariehamn","Europe/Riga","Europe/Sofia","Europe/Tallinn","Europe/Uzhgorod","Europe/Vilnius","Europe/Zaporozhye"]},{value:"Turkey Standard Time",abbr:"TDT",offset:3,isdst:!1,text:"(UTC+03:00) Istanbul",utc:["Europe/Istanbul"]},{value:"Israel Standard Time",abbr:"JDT",offset:3,isdst:!0,text:"(UTC+02:00) Jerusalem",utc:["Asia/Jerusalem"]},{value:"Libya Standard Time",abbr:"LST",offset:2,isdst:!1,text:"(UTC+02:00) Tripoli",utc:["Africa/Tripoli"]},{value:"Jordan Standard Time",abbr:"JST",offset:3,isdst:!1,text:"(UTC+03:00) Amman",utc:["Asia/Amman"]},{value:"Arabic Standard Time",abbr:"AST",offset:3,isdst:!1,text:"(UTC+03:00) Baghdad",utc:["Asia/Baghdad"]},{value:"Kaliningrad Standard Time",abbr:"KST",offset:3,isdst:!1,text:"(UTC+02:00) Kaliningrad",utc:["Europe/Kaliningrad"]},{value:"Arab Standard Time",abbr:"AST",offset:3,isdst:!1,text:"(UTC+03:00) Kuwait, Riyadh",utc:["Asia/Aden","Asia/Bahrain","Asia/Kuwait","Asia/Qatar","Asia/Riyadh"]},{value:"E. Africa Standard Time",abbr:"EAST",offset:3,isdst:!1,text:"(UTC+03:00) Nairobi",utc:["Africa/Addis_Ababa","Africa/Asmera","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Juba","Africa/Kampala","Africa/Khartoum","Africa/Mogadishu","Africa/Nairobi","Antarctica/Syowa","Etc/GMT-3","Indian/Antananarivo","Indian/Comoro","Indian/Mayotte"]},{value:"Moscow Standard Time",abbr:"MSK",offset:3,isdst:!1,text:"(UTC+03:00) Moscow, St. Petersburg, Volgograd, Minsk",utc:["Europe/Kirov","Europe/Moscow","Europe/Simferopol","Europe/Volgograd","Europe/Minsk"]},{value:"Samara Time",abbr:"SAMT",offset:4,isdst:!1,text:"(UTC+04:00) Samara, Ulyanovsk, Saratov",utc:["Europe/Astrakhan","Europe/Samara","Europe/Ulyanovsk"]},{value:"Iran Standard Time",abbr:"IDT",offset:4.5,isdst:!0,text:"(UTC+03:30) Tehran",utc:["Asia/Tehran"]},{value:"Arabian Standard Time",abbr:"AST",offset:4,isdst:!1,text:"(UTC+04:00) Abu Dhabi, Muscat",utc:["Asia/Dubai","Asia/Muscat","Etc/GMT-4"]},{value:"Azerbaijan Standard Time",abbr:"ADT",offset:5,isdst:!0,text:"(UTC+04:00) Baku",utc:["Asia/Baku"]},{value:"Mauritius Standard Time",abbr:"MST",offset:4,isdst:!1,text:"(UTC+04:00) Port Louis",utc:["Indian/Mahe","Indian/Mauritius","Indian/Reunion"]},{value:"Georgian Standard Time",abbr:"GET",offset:4,isdst:!1,text:"(UTC+04:00) Tbilisi",utc:["Asia/Tbilisi"]},{value:"Caucasus Standard Time",abbr:"CST",offset:4,isdst:!1,text:"(UTC+04:00) Yerevan",utc:["Asia/Yerevan"]},{value:"Afghanistan Standard Time",abbr:"AST",offset:4.5,isdst:!1,text:"(UTC+04:30) Kabul",utc:["Asia/Kabul"]},{value:"West Asia Standard Time",abbr:"WAST",offset:5,isdst:!1,text:"(UTC+05:00) Ashgabat, Tashkent",utc:["Antarctica/Mawson","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Dushanbe","Asia/Oral","Asia/Samarkand","Asia/Tashkent","Etc/GMT-5","Indian/Kerguelen","Indian/Maldives"]},{value:"Yekaterinburg Time",abbr:"YEKT",offset:5,isdst:!1,text:"(UTC+05:00) Yekaterinburg",utc:["Asia/Yekaterinburg"]},{value:"Pakistan Standard Time",abbr:"PKT",offset:5,isdst:!1,text:"(UTC+05:00) Islamabad, Karachi",utc:["Asia/Karachi"]},{value:"India Standard Time",abbr:"IST",offset:5.5,isdst:!1,text:"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",utc:["Asia/Kolkata"]},{value:"Sri Lanka Standard Time",abbr:"SLST",offset:5.5,isdst:!1,text:"(UTC+05:30) Sri Jayawardenepura",utc:["Asia/Colombo"]},{value:"Nepal Standard Time",abbr:"NST",offset:5.75,isdst:!1,text:"(UTC+05:45) Kathmandu",utc:["Asia/Kathmandu"]},{value:"Central Asia Standard Time",abbr:"CAST",offset:6,isdst:!1,text:"(UTC+06:00) Nur-Sultan (Astana)",utc:["Antarctica/Vostok","Asia/Almaty","Asia/Bishkek","Asia/Qyzylorda","Asia/Urumqi","Etc/GMT-6","Indian/Chagos"]},{value:"Bangladesh Standard Time",abbr:"BST",offset:6,isdst:!1,text:"(UTC+06:00) Dhaka",utc:["Asia/Dhaka","Asia/Thimphu"]},{value:"Myanmar Standard Time",abbr:"MST",offset:6.5,isdst:!1,text:"(UTC+06:30) Yangon (Rangoon)",utc:["Asia/Rangoon","Indian/Cocos"]},{value:"SE Asia Standard Time",abbr:"SAST",offset:7,isdst:!1,text:"(UTC+07:00) Bangkok, Hanoi, Jakarta",utc:["Antarctica/Davis","Asia/Bangkok","Asia/Hovd","Asia/Jakarta","Asia/Phnom_Penh","Asia/Pontianak","Asia/Saigon","Asia/Vientiane","Etc/GMT-7","Indian/Christmas"]},{value:"N. Central Asia Standard Time",abbr:"NCAST",offset:7,isdst:!1,text:"(UTC+07:00) Novosibirsk",utc:["Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk"]},{value:"China Standard Time",abbr:"CST",offset:8,isdst:!1,text:"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi",utc:["Asia/Hong_Kong","Asia/Macau","Asia/Shanghai"]},{value:"North Asia Standard Time",abbr:"NAST",offset:8,isdst:!1,text:"(UTC+08:00) Krasnoyarsk",utc:["Asia/Krasnoyarsk"]},{value:"Singapore Standard Time",abbr:"MPST",offset:8,isdst:!1,text:"(UTC+08:00) Kuala Lumpur, Singapore",utc:["Asia/Brunei","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Makassar","Asia/Manila","Asia/Singapore","Etc/GMT-8"]},{value:"W. Australia Standard Time",abbr:"WAST",offset:8,isdst:!1,text:"(UTC+08:00) Perth",utc:["Antarctica/Casey","Australia/Perth"]},{value:"Taipei Standard Time",abbr:"TST",offset:8,isdst:!1,text:"(UTC+08:00) Taipei",utc:["Asia/Taipei"]},{value:"Ulaanbaatar Standard Time",abbr:"UST",offset:8,isdst:!1,text:"(UTC+08:00) Ulaanbaatar",utc:["Asia/Choibalsan","Asia/Ulaanbaatar"]},{value:"North Asia East Standard Time",abbr:"NAEST",offset:8,isdst:!1,text:"(UTC+08:00) Irkutsk",utc:["Asia/Irkutsk"]},{value:"Japan Standard Time",abbr:"JST",offset:9,isdst:!1,text:"(UTC+09:00) Osaka, Sapporo, Tokyo",utc:["Asia/Dili","Asia/Jayapura","Asia/Tokyo","Etc/GMT-9","Pacific/Palau"]},{value:"Korea Standard Time",abbr:"KST",offset:9,isdst:!1,text:"(UTC+09:00) Seoul",utc:["Asia/Pyongyang","Asia/Seoul"]},{value:"Cen. Australia Standard Time",abbr:"CAST",offset:9.5,isdst:!1,text:"(UTC+09:30) Adelaide",utc:["Australia/Adelaide","Australia/Broken_Hill"]},{value:"AUS Central Standard Time",abbr:"ACST",offset:9.5,isdst:!1,text:"(UTC+09:30) Darwin",utc:["Australia/Darwin"]},{value:"E. Australia Standard Time",abbr:"EAST",offset:10,isdst:!1,text:"(UTC+10:00) Brisbane",utc:["Australia/Brisbane","Australia/Lindeman"]},{value:"AUS Eastern Standard Time",abbr:"AEST",offset:10,isdst:!1,text:"(UTC+10:00) Canberra, Melbourne, Sydney",utc:["Australia/Melbourne","Australia/Sydney"]},{value:"West Pacific Standard Time",abbr:"WPST",offset:10,isdst:!1,text:"(UTC+10:00) Guam, Port Moresby",utc:["Antarctica/DumontDUrville","Etc/GMT-10","Pacific/Guam","Pacific/Port_Moresby","Pacific/Saipan","Pacific/Truk"]},{value:"Tasmania Standard Time",abbr:"TST",offset:10,isdst:!1,text:"(UTC+10:00) Hobart",utc:["Australia/Currie","Australia/Hobart"]},{value:"Yakutsk Standard Time",abbr:"YST",offset:9,isdst:!1,text:"(UTC+09:00) Yakutsk",utc:["Asia/Chita","Asia/Khandyga","Asia/Yakutsk"]},{value:"Central Pacific Standard Time",abbr:"CPST",offset:11,isdst:!1,text:"(UTC+11:00) Solomon Is., New Caledonia",utc:["Antarctica/Macquarie","Etc/GMT-11","Pacific/Efate","Pacific/Guadalcanal","Pacific/Kosrae","Pacific/Noumea","Pacific/Ponape"]},{value:"Vladivostok Standard Time",abbr:"VST",offset:11,isdst:!1,text:"(UTC+11:00) Vladivostok",utc:["Asia/Sakhalin","Asia/Ust-Nera","Asia/Vladivostok"]},{value:"New Zealand Standard Time",abbr:"NZST",offset:12,isdst:!1,text:"(UTC+12:00) Auckland, Wellington",utc:["Antarctica/McMurdo","Pacific/Auckland"]},{value:"UTC+12",abbr:"U",offset:12,isdst:!1,text:"(UTC+12:00) Coordinated Universal Time+12",utc:["Etc/GMT-12","Pacific/Funafuti","Pacific/Kwajalein","Pacific/Majuro","Pacific/Nauru","Pacific/Tarawa","Pacific/Wake","Pacific/Wallis"]},{value:"Fiji Standard Time",abbr:"FST",offset:12,isdst:!1,text:"(UTC+12:00) Fiji",utc:["Pacific/Fiji"]},{value:"Magadan Standard Time",abbr:"MST",offset:12,isdst:!1,text:"(UTC+12:00) Magadan",utc:["Asia/Anadyr","Asia/Kamchatka","Asia/Magadan","Asia/Srednekolymsk"]},{value:"Kamchatka Standard Time",abbr:"KDT",offset:13,isdst:!0,text:"(UTC+12:00) Petropavlovsk-Kamchatsky - Old",utc:["Asia/Kamchatka"]},{value:"Tonga Standard Time",abbr:"TST",offset:13,isdst:!1,text:"(UTC+13:00) Nuku'alofa",utc:["Etc/GMT-13","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Tongatapu"]},{value:"Samoa Standard Time",abbr:"SST",offset:13,isdst:!1,text:"(UTC+13:00) Samoa",utc:["Pacific/Apia"]}].map(t=>t.utc))).sort();var kle={},Dle="/api/engine/v2/uploads";function Mle(){return Dle}function SKe(t,n){void 0===n&&(n=!1);var e=n?1e3:1024;if(t<e)return t+(n?" iB":" B");var i=Math.floor(Math.log(t)/Math.log(e)),s=(n?"kMGTPE":"KMGTPE").charAt(i-1)+(n?"iB":"B");return(t/Math.pow(e,i)).toFixed(1)+" "+s}function CC(t){var n="";t.length%2>0&&(t="0"+t);for(var e=0,i=t.length;e<i;e+=2)n+=String.fromCharCode(parseInt(t.slice(e,e+2),16));return n}function iB(t){var n="";if(t)for(var e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n+=(n?"&":"")+e+"="+encodeURIComponent(t[e]));return n}var xC="",EC="",sB=function(){function t(e,i){var s=this;this._upload=void 0,this._endpoint=void 0,this.upload_id=void 0,this._params={},this._abort_ctrl=new AbortController,this._dispose=void 0,this._upload=e,this._endpoint=i,this._abort_ctrl.signal.addEventListener("abort",function(){return s._dispose?s._dispose():""})}t.setToken=function(e){xC=e},t.setApiKey=function(e){EC=e};var n=t.prototype;return n.initialise=function(){try{var e,i=this,s=i._abort_ctrl.signal,r=i._upload,o=r.file,a=r.mime_type;i._params.file_size=""+o.size,i._params.file_name=o.name,a&&"binary/octet-stream"!==a&&(i._params.file_mime=a),i._params=ld({},i._params,i._upload.params),(null==(e=o.dir_path)?void 0:e.length)>0&&(i._params.file_path=o.dir_path);var l=i.base_request_headers,c=iB(i._params);return Promise.resolve(fetch(i._endpoint+"/new"+(c?"?"+c:""),{headers:l,signal:s})).then(function(u){return u.json()})}catch(u){return Promise.reject(u)}},n.create=function(e){try{var i=this,s=i._abort_ctrl.signal,r=i.base_request_headers;return e.file_id&&(i._params.file_id=e.file_id),i._upload.mime_type&&(i._params.file_mime=e.mime_type),e.parameters&&(i._params.parameters=e.parameters),e.permissions&&(i._params.permissions=e.permissions),e.public&&(i._params.public=e.public),e.expires&&(i._params.expires=e.expires||0),Promise.resolve(fetch(""+i._endpoint,{body:JSON.stringify(i._params),method:"POST",headers:r,signal:s})).then(function(o){return Promise.resolve(o.json()).then(function(a){return i.upload_id=a.upload_id,a})})}catch(o){return Promise.reject(o)}},n.sign=function(e,i){void 0===i&&(i="");try{var s=this;if(!s.upload_id)throw new Error("Upload resource not initialised");var r=s._abort_ctrl.signal,o=s.base_request_headers,a=new URLSearchParams;return a.set("part",e.toString()),i&&a.set("file_id",encodeURIComponent(i)),Promise.resolve(fetch(s._endpoint+"/"+s.encoded_id+"/edit?"+a.toString(),{method:"GET",headers:o,signal:r})).then(function(l){return Promise.resolve(l.json())})}catch(l){return Promise.reject(l)}},n.update=function(e){void 0===e&&(e={});try{var i=this;if(!i.upload_id)throw new Error("Upload resource not initialised");var s=i._abort_ctrl.signal,r=i.base_request_headers;return Promise.resolve(fetch(i._endpoint+"/"+i.encoded_id,{body:JSON.stringify(e),method:"PUT",headers:r,signal:s})).then(function(o){return Promise.resolve(o.json())})}catch(o){return Promise.reject(o)}},n.signedRequest=function(e){try{return Promise.resolve(fetch(e.signature.url,{body:e.data,method:e.signature.verb,headers:e.signature.headers})).then(function(i){return Promise.resolve(i.text()).then(function(s){var r={body:s,responseXML:null};try{r.responseXML=(new window.DOMParser).parseFromString(r.body,"text/xml")}catch{}return r})})}catch(i){return Promise.reject(i)}},n.signNextChunk=function(e,i,s,r){void 0===r&&(r=null);try{var o=this;if(!o.upload_id)throw new Error("Upload resource not initialised");var a=o._abort_ctrl.signal,l={part_list:s};r&&(l.part_data=r);var c=o.base_request_headers,u=iB({part:""+e,file_id:i,file_mime:o._upload.mime_type});return Promise.resolve(fetch(o._endpoint+"/"+o.encoded_id+(u?"?"+u:""),{body:JSON.stringify(l),method:Object.keys(l).length>0?"PATCH":"PUT",headers:c,signal:a})).then(function(d){return Promise.resolve(d.json())})}catch(d){return Promise.reject(d)}},n.signChunk=function(e,i){void 0===i&&(i=null);try{var s=this,r=s._abort_ctrl.signal,o=s.base_request_headers,a=iB({part:""+e,file_id:i});return Promise.resolve(fetch(s._endpoint+"/edit"+(a?"?"+a:""),{headers:o,signal:r})).then(function(l){return Promise.resolve(l.json())})}catch(l){return Promise.reject(l)}},n.updateStatus=function(e){void 0===e&&(e={});try{var i=this;if(!i.upload_id)throw new Error("Upload resource not initialised");var s=i._abort_ctrl.signal;return Promise.resolve(fetch(i._endpoint+"/"+i.encoded_id,{headers:i.base_request_headers,method:Object.keys(e).length>0?"PATCH":"PUT",body:JSON.stringify(e),signal:s})).then(function(r){return Promise.resolve(r.json())})}catch(r){return Promise.reject(r)}},n.abort=function(){this._abort_ctrl.abort()},n.destroy=function(){this.abort();var e=new Headers;if(e.append("Accept","application/json"),xC?e.append("Authorization","Bearer "+xC):EC&&e.append("X-API-Key",""+EC),this.upload_id)return fetch(this._endpoint+"/"+this.encoded_id,{headers:e,method:"DELETE"})},n.performSignedRequest=function(e,i){var s=this;return void 0===i&&(i=function(){}),new Promise(function(r,o){var a=new XMLHttpRequest;a.upload.addEventListener("progress",function(d){return i(d)}),a.addEventListener("load",function(d){i(d),a.status>=200&&a.status<300||a.status===e.expected?r(a):o(a.status+": "+a.statusText)});var l=function(d){s._upload.onError(d),o(d)};a.addEventListener("error",function(){return l(a.status+": "+(a.statusText||"unknown error"))}),a.addEventListener("abort",function(){return l(a.statusText||"browser aborted")}),a.open(e.signature.verb,e.signature.url,!0);var c=e.signature.headers;for(var u in c)u in c&&a.setRequestHeader(u,c[u]);s._dispose=function(){a.abort(),o("user aborted")},a.send(e.data||null)})},Ile(t,[{key:"encoded_id",get:function(){return encodeURIComponent(""+(this.upload_id||""))}},{key:"base_request_headers",get:function(){var e=new Headers;return e.append("Accept","application/json"),e.append("Content-Type","application/json"),xC?e.append("Authorization","Bearer "+xC):EC&&e.append("X-API-Key",""+EC),e}}]),t}(),CKe=function(){function t(e,i,s,r,o){void 0===r&&(r={}),void 0===o&&(o=Mle()),this.file=void 0,this.retries=void 0,this.parallel=void 0,this.params=void 0,this._endpoint=void 0,this._state=new Mt({status:"waiting",progress:0,uploaded:0}),this._request=void 0,this._provider=void 0,this._access_url="",this.size=void 0,this.status=this._state.asObservable(),this.mime_type="binary/octet-stream",this.metadata=void 0,this.file=e,this.retries=i,this.parallel=s,this.params=r,this._endpoint=o,this.mime_type=e?.type||this.mime_type}var n=t.prototype;return n.setAccessUrl=function(e){this._access_url=e},n.onProgress=function(e){var i=this._state.getValue();this._state.next(ld({},i,{status:"uploading",uploaded:e,progress:Math.floor(e/this.file.size*1e3)/10}))},n.onComplete=function(){var e=this._state.getValue();this._state.next(ld({},e,{status:"complete",progress:100}))},n.onError=function(e){var i=this._state.getValue();this._state.next(ld({},i,{status:"error",error:e}))},n.resume=function(e){try{var i=this,s=i._state.getValue(),r=function(){if(!["complete","uploading","cancelled"].includes(s.status)){var o=function(){var l;null==(l=i._provider)||l.start()};e&&(i.parallel=e);var a=function(){if(!i._provider)return i._request=new sB(i,i._endpoint),Promise.resolve(i._request.initialise()).then(function(l){var c=kle[l.residence]||null;c?(i._provider=new c(i._request,i),i._state.next(ld({},s,{status:"uploading"}))):i.onError("No provider available to upload to")})}();return a&&a.then?a.then(o):o()}}();return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(o){return Promise.reject(o)}},n.pause=function(){var e,i=this._state.getValue();"uploading"===i.status&&(null==(e=this._provider)||e.pause(),this._state.next(ld({},i,{status:"paused"})))},n.cancel=function(){var e,i=this._state.getValue();["complete","cancelled"].includes(i.status)||("uploading"===i.status&&(null==(e=this._provider)||e.destroy()),this._state.next(ld({},i,{status:"cancelled"})))},Ile(t,[{key:"id",get:function(){var e;return null==(e=this._request)?void 0:e.upload_id}},{key:"access_url",get:function(){return this._access_url}},{key:"waiting",get:function(){var e;return"waiting"===(null==(e=this._state.getValue())?void 0:e.status)}},{key:"in_progress",get:function(){var e;return"uploading"===(null==(e=this._state.getValue())?void 0:e.status)}},{key:"completed",get:function(){var e;return"complete"===(null==(e=this._state.getValue())?void 0:e.status)}}]),t}(),TC=[],Ale=-1;function LM(){return Ale+=1,TC[Ale%=3]}var Sr,Ole={auto_start:!0,auto_remove:!1,remove_after:0,simultaneous:2,parallel:3,retries:4,providers:[]},Wr=Ole,Mc=[];function Nle(t){t.cancel(),Mc=Mc.filter(function(n){return n!==t})}function Rle(){return Mc.filter(function(t){return t.in_progress}).length<Wr.simultaneous}!function(t){t[t.Paused=0]="Paused",t[t.Uploading=1]="Uploading",t[t.Completed=2]="Completed",t[t.Aborted=3]="Aborted"}(Sr||(Sr={}));var PM=function(){function t(e,i){this._request=void 0,this._upload=void 0,this.state=Sr.Paused,this.size=void 0,this.progress=0,this._file=void 0,this._strategy=void 0,this._finalising=void 0,this._direct_upload=void 0,this._progress={},this._current_parts=[],this._pending_parts=[],this._last_part=0,this._memoization={},this._finishing=!1,this._request=e,this._upload=i,this._file=this._upload.file,this.size=this._file.size}var n=t.prototype;return n.start=function(){this.state<Sr.Uploading&&(this._finalising?this._finalise():this._start())},n.pause=function(){for(var e in this._strategy&&this.state===Sr.Uploading&&!this._direct_upload?(this.state=Sr.Paused,this._request.abort(),this._pending_parts=this._currentParts(),this._current_parts=[]):this._strategy&&!this._direct_upload||(this.state=Sr.Paused,this._request.abort(),this._restart()),this._progress)this._progress[e].loaded!==this._progress[e].total&&(this._progress[e].loaded=0);this._updateProgress()},n.destroy=function(){void 0!==this._strategy&&this.state<Sr.Completed&&(this._request.destroy(),this._restart(),this.state=Sr.Aborted)},n._restart=function(){this._strategy=void 0,this._current_parts=[],this._pending_parts=[]},n._makeRequest=function(e,i){var s=this;return i.data=e.data,this._request.performSignedRequest(i,function(r){return s._onProgress(e.part,r)})},n._nextPartIndex=function(){return this._pending_parts.length>0?this._last_part=this._pending_parts.shift():this._last_part+=1,this._current_parts.push(this._last_part),this._last_part},n._currentParts=function(){return this._current_parts.concat(this._pending_parts)},n._completePart=function(e){this._current_parts=this._current_parts.filter(function(i){return i!==e})},n._isComplete=function(e){var i=this._progress[e]||{},s=i.loaded;return s&&s===i.total},n._onProgress=function(e,i){this._progress[e]=ld({},i),this._updateProgress()},n._onError=function(e){console.error("Error:",e),this.pause(),this._upload.onError(e)},n._updateProgress=function(){var e=0;for(var i in this._progress)e+=this._progress[i].loaded||0;this._upload.onProgress(e)},n._finalise=function(){try{var e=this;return e._request.updateStatus().then(function(){return e._upload.onComplete()},function(i){return e._onError(i)}),Promise.resolve()}catch(i){return Promise.reject(i)}},n._hashPart=function(e,i,s){try{var r=this,o=r._memoization[e],a=i();return Promise.resolve(o?{data:a,md5:o.md5,part:o.part}:s(a).then(function(l){return r._memoization[e]=l,{data:a,md5:l.md5,part:l.part}}))}catch(l){return Promise.reject(l)}},n._getPartData=function(){var e=this,i=this._currentParts().filter(function(r){return"number"==typeof r}),s=[];return i.forEach(function(r){var o=e._memoization[""+r];o&&s.push(o)}),{part_list:i,part_data:s}},t}(),Fle=function(t){function n(){for(var i,s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(i=t.call.apply(t,[this].concat(r))||this)._part_size=5242880,i}FM(n,t);var e=n.prototype;return e._start=function(){try{var i=this;return Promise.resolve(function(){if(void 0===i._strategy)return i.state=Sr.Uploading,i._strategy=null,9999*i._part_size<i.size&&(i._part_size=Math.floor(i.size/9999),i._part_size>5368709120)?(i._upload.cancel(),void i._onError("file exceeds maximum size")):Promise.resolve(i._processPart(1).catch(function(s){return i._onError(s)})).then(function(s){if(s&&i.state===Sr.Uploading)return Promise.resolve(i._request.create({file_id:window.btoa(CC(s.md5))}).catch(function(r){return i._onError(r)})).then(function(r){r&&(i._strategy=r.type,r.signature&&i._upload.setAccessUrl((r.signature.url||"").split("?")[0]),"direct_upload"===r.type?i._direct(r,s):i._resume(r,s))})});i.state===Sr.Paused&&i._resume()}())}catch(s){return Promise.reject(s)}},e._processPart=function(i){var s=this;return this._hashPart(i.toString(),function(){var r,o;return s.size>s._part_size?((o=i*s._part_size)>s.size&&(o=s.size),r=s._file.slice((i-1)*s._part_size,o)):r=s._file,r},function(r){return LM().hash(r).then(function(o){return{md5:o,part:i}})})},e._resume=function(i,s){void 0===i&&(i=null),void 0===s&&(s=null);try{var r,o=this;return Promise.resolve(function(){if(i)return function(){if("parts"!==i.type)return Promise.resolve(o._request.signedRequest(i).catch(function(a){o._restart(),o._onError(a)})).then(function(a){if(a){var l=a.responseXML.getElementsByTagName("UploadId")[0].textContent;return Promise.resolve(o._request.updateStatus({resumable_id:l,file_id:window.btoa(CC(s.md5)),part:1}).catch(function(c){o._restart(),o._onError(c)})).then(function(c){if(c)for(o._nextPartIndex(),o._setPart(c,s),r=1;r<o._upload.parallel;r+=1)o._nextPart()})}});for(o._pending_parts=i.part_list,i.part_data&&(o._memoization=i.part_data),r=0;r<o._upload.parallel;r+=1)o._nextPart()}();for(r=0;r<o._upload.parallel;r+=1)o._nextPart()}())}catch(a){return Promise.reject(a)}},e._generatePartManifest=function(){var i,s,r="<CompleteMultipartUpload>";for(i=1;i<1e4&&(s=this._memoization[i]);i+=1)r+="<Part><PartNumber>"+i+'</PartNumber><ETag>"'+s.md5+'"</ETag></Part>';return r+"</CompleteMultipartUpload>"},e._nextPart=function(){var i,s=this,r=this._nextPartIndex();(r-1)*this._part_size<this.size?this._processPart(r).then(function(o){s.state===Sr.Uploading&&(i=s._getPartData(),s._request.signNextChunk(r,window.btoa(CC(o.md5)),i.part_list,i.part_data).then(function(a){return s._setPart(a,o)},function(a){return s._onError(a)}))},function(o){return s._onError(o)}):1===this._currentParts().length&&this._currentParts()[0]===r?(this._finishing=!0,this._request.sign("finish").then(function(o){o.data=s._generatePartManifest(),s._request.signedRequest(o).then(function(){return s._finalise()},function(a){return s._onError(a)})},function(o){return s._onError(o)})):this._finishing||(this._completePart(r),(i=this._getPartData()).part_update=!0,this._request.updateStatus(i))},e._setPart=function(i,s){var r=this;this._makeRequest(s,i).then(function(){r._completePart(s?.part),r._nextPart()},function(o){return r._onError(o)})},e._direct=function(i,s){var r=this,o=this._makeRequest(s,i);this._direct_upload=!0,o.then(function(){return r._finalise()},function(a){return r._onError(a)})},n}(PM);Fle.lookup="AmazonS3";var Lle=function(t){function n(){for(var i,s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(i=t.call.apply(t,[this].concat(r))||this)._partSize=2097152,i}FM(n,t);var e=n.prototype;return e._start=function(){var i=this;if(void 0===this._strategy){if(this.state=Sr.Uploading,this._strategy=null,5e4*this._partSize<this.size&&(this._partSize=Math.floor(this.size/5e4),this._partSize>4194304))return this._upload.cancel(),void this._onError("file exceeds maximum size of 195GB");this._processPart(1).then(function(s){i.state===Sr.Uploading&&i._request.create({file_id:s.md5}).then(function(r){i._strategy=r.type,"direct_upload"===r.type?i._direct(r,s):i._resume(r,s)},i._onError.bind(i))},this._onError.bind(this))}else this.state===Sr.Paused&&this._resume()},e._processPart=function(i){var s=this;return this._hashPart(i.toString(),function(){var r,o;return s.size>s._partSize?((o=i*s._partSize)>s.size&&(o=s.size),r=s._file.slice((i-1)*s._partSize,o)):r=s._file,r},function(r){return LM().hash(r).then(function(o){return{md5:window.btoa(CC(o)),part:i}})})},e._resume=function(i,s){var r,o=this;if(void 0===i&&(i=null),void 0===s&&(s=null),i)if("parts"===i.type)for(this._pending_parts=i.part_list,r=0;r<this._upload.parallel;r+=1)this._nextPart();else this._request.updateStatus({resumable_id:"n/a",file_id:s.md5,part:1}).then(function(a){for(o._nextPartIndex(),o._setPart(a,s),r=1;r<o._upload.parallel;r+=1)o._nextPart()},function(a){this._restart(),this._onError(a)});else for(r=0;r<this._upload.parallel;r+=1)this._nextPart()},e._generatePartManifest=function(){for(var i='<?xml version="1.0" encoding="utf-8"?><BlockList>',s=0;s<5e4&&s*this._partSize<this.size;s+=1)i+="<Latest>"+window.btoa(this._pad(s+1))+"</Latest>";return i+"</BlockList>"},e._pad=function(i){for(var s=i.toString();s.length<6;)s="0"+s;return s},e._nextPart=function(){var i=this,s=this._nextPartIndex();(s-1)*this._partSize<this.size?this._processPart(s).then(function(r){i.state===Sr.Uploading&&i._request.signNextChunk(s,r.md5,i._currentParts()).then(function(o){i._setPart(o,r)},i._onError.bind(i))},this._onError.bind(this)):1===this._currentParts.length&&this._currentParts[0]===s?(this._finishing=!0,this._request.sign("finish").then(function(r){r.data=i._generatePartManifest(),i._request.signedRequest(r).then(i._finalise.bind(i),i._onError.bind(i))},this._onError.bind(this))):this._finishing||(this._completePart(s),this._request.updateStatus({part_update:!0,part_list:this._currentParts()}))},e._setPart=function(i,s){var r=this;this._makeRequest(s,i).then(function(){r._completePart(s.part),r._nextPart()},this._onError.bind(this))},e._direct=function(i,s){var r=this,o=this._makeRequest(s,i);this._direct_upload=!0,o.then(function(){return r._finalise()},this._onError.bind(this))},n}(PM);Lle.lookup="MicrosoftAzure";var Ple=function(t){function n(){return t.apply(this,arguments)||this}FM(n,t);var e=n.prototype;return e._start=function(){var i=this;void 0!==this._strategy&&this.state!==Sr.Paused||(this.state=Sr.Uploading,this._strategy=null,this._processPart(this._file).then(function(s){i.state===Sr.Uploading&&i._request.create({file_id:s.md5}).then(function(r){i._strategy=r.type,"direct_upload"===r.type?i._direct(r,s):i._resume(r,s)},i._onError.bind(i))},this._onError.bind(this)))},e._processPart=function(i,s){return void 0===s&&(s=0),this._hashPart(s.toString(),function(){return i},function(r){return LM().hash(r).then(function(o){return{md5:window.btoa(CC(o)),part:s}})})},e._resume=function(i,s){var r=this;this._request.signedRequest(i).then(function(o){if("status"===i.type)if(o.status===i.expected){var a=parseInt(o.getResponseHeader("Range").split("-")[1],10)+1;r._processPart(r._file.slice(a),a).then(function(l){r.state===Sr.Uploading&&r._request.signChunk(a,l.md5).then(function(c){r._performUpload(c,l)},r._onError.bind(r))},r._onError.bind(r))}else r._finalise();else r._request.updateStatus({resumable_id:r._getQueryParams(o.getResponseHeader("Location").split("?")[1]).upload_id,file_id:s.md5,part:0}).then(function(l){return r._performUpload(l,s)},function(l){this._restart(),this._onError(l)})},this._onError.bind(this))},e._performUpload=function(i,s){var r=this;this._makeRequest(s,i).then(function(){return r._finalise()},this._onError.bind(this))},e._direct=function(i,s){var r=this,o=this._makeRequest(s,i);this._direct_upload=!0,o.then(function(){r._finalise()},this._onError.bind(this))},e._getQueryParams=function(i){i=i.split("+").join(" ");for(var s,r={},o=/[?&]?([^=]+)=([^&]*)/g;s=o.exec(i);)r[decodeURIComponent(s[1])]=decodeURIComponent(s[2]);return r},n}(PM);Ple.lookup="GoogleCloudStorage";var $le=function(t){function n(){for(var i,s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(i=t.call.apply(t,[this].concat(r))||this)._partSize=2097152,i}FM(n,t);var e=n.prototype;return e._start=function(){var i=this;if(void 0===this._strategy){if(this.state=Sr.Uploading,this._strategy=null,1e3*this._partSize<this.size&&(this._partSize=Math.floor(this.size/1e3),this._partSize>5368709120))return this._upload.cancel(),void this._onError("file exceeds maximum size");this._processPart(1).then(function(s){i.state===Sr.Uploading&&i._request.create({file_id:s.md5}).then(function(r){i._strategy=r.type,"direct_upload"===r.type?i._direct(r,s):i._resume(r,s)},i._onError.bind(i))},this._onError.bind(this))}else this.state===Sr.Paused&&this._resume()},e._processPart=function(i){var s=this;return this._hashPart(i.toString(),function(){var r,o;return s.size>s._partSize?((o=i*s._partSize)>s.size&&(o=s.size),r=s._file.slice((i-1)*s._partSize,o)):r=s._file,r},function(r){return LM().hash(r).then(function(o){return{md5:o,part:i,size_bytes:r.size}})})},e._resume=function(i,s){var r,o=this;if(void 0===i&&(i=null),void 0===s&&(s=null),i)if("parts"===i.type){if(this._pending_parts=i.part_list,i.part_data){var a;for(var l in this._memoization=i.part_data,this._memoization)this._memoization.hasOwnProperty(l)&&((a=this._memoization[l]).path||this._pending_parts.push(a.part));this._pending_parts=this._pending_parts.sort().filter(function(c,u,d){return!u||c!==d[u-1]})}for(r=0;r<this._upload.parallel;r+=1)this._nextPart()}else this._request.updateStatus({resumable_id:"n/a",file_id:s.md5,part:1}).then(function(c){for(o._nextPartIndex(),o._memoization[1].path=c.path,o._setPart(c,s),r=1;r<o._upload.parallel;r+=1)o._nextPart()},function(c){this._restart(),this._onError(c)});else for(r=0;r<this._upload.parallel;r+=1)this._nextPart()},e._generatePartManifest=function(){for(var i,s=[],r=1;r<1e4&&(i=this._memoization[r]);r+=1)s.push({path:i.path,etag:i.md5,size_bytes:i.size_bytes});return JSON.stringify(s)},e._nextPart=function(){var i,s=this,r=this._nextPartIndex();(r-1)*this._partSize<this.size?this._processPart(r).then(function(o){s.state===Sr.Uploading&&(i=s._getPartData(),s._request.signNextChunk(r,o.md5,i.part_list,i.part_data).then(function(a){s._memoization[r].path=a.path,s._setPart(a,o)},s._onError.bind(s)))},this._onError.bind(this)):1===this._currentParts.length&&this._currentParts[0]===r?(this._finishing=!0,this._request.sign("finish").then(function(o){o.signature?(o.data=s._generatePartManifest(),s._request.signedRequest(o).then(s._finalise.bind(s),s._onError.bind(s))):s._finalise()},this._onError.bind(this))):this._finishing||(this._completePart(r),(i=this._getPartData()).part_update=!0,this._request.updateStatus(i))},e._setPart=function(i,s){var r=this;this._makeRequest(s,i).then(function(){r._completePart(s.part),r._nextPart()},this._onError.bind(this))},e._direct=function(i,s){var r=this,o=this._makeRequest(s,i);this._direct_upload=!0,o.then(function(){return r._finalise()},this._onError.bind(this))},n}(PM);function oB(t,n){return function $M(t,n){t=t||[],"string"==typeof(n=n||{})&&(n={type:n});try{return new Blob(t,n)}catch(r){if("TypeError"!==r.name)throw r;for(var i=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),s=0;s<t.length;s+=1)i.append(t[s]);return i.getBlob(n.type)}}([t],n)}function NKe(t,n,e){var i=t[n];return t[n]=(...s)=>{e(s),i.call(t,...s)},i}$le.lookup="OpenStackSwift";let Ule=localStorage.getItem("PLACEOS.DEVICE_ID")||`DEV-${sg(8)}`,RKe=(()=>{class t extends bn{setMetadata(e){}constructor(){var e;super(),e=this,this._disable_handling=!1,this._system_id=new Mt(""),this._events=new Pt,this._event_history=this._events.pipe(jn(2e4)),this._metadata=null,this._logging_bindings=this._system_id.pipe(an(i=>!!i),nn(i=>Qt([gt(i),this._bindTo(i,"enabled")])),an(([i,s])=>!!s),ze(([i])=>this.subscription("post_events",this._event_history.subscribe(function(){var s=de(function*(r){e._disable_handling=!0,yield Vr(i,"Logger").execute("post_event",[r]).catch(),e._disable_handling=!1});return function(r){return s.apply(this,arguments)}}())))),this.history=this._event_history,localStorage.setItem("PLACEOS.DEVICE_ID",Ule),this._patchConsoleMethods(),this._logging_bindings.subscribe(),Xi("Logger","Remote logging initialised...")}setSystem(e){this._system_id.next(e)}_patchConsoleMethods(){const e=["log","debug","info","warn","error"];for(const i of e)NKe(console,i,(...s)=>this._handleEvent(i,s))}_handleEvent(e,i,s="console"){if(i.includes('"Logger"')||this._disable_handling)return;const r=[...i[0]];r[0]="string"==typeof r[0]?r[0].replace(/\%c/g,""):r[0],this._events.next({id:`${s}-${Mp(9999999999)}`,device_id:Ule,type:s,subtype:e,timestamp:Date.now(),raw:i,data:r.filter(o=>"string"!=typeof o||!o.startsWith("color:")),metadata:this._metadata||null})}_bindTo(e,i,s="Logger"){const r=Vr(e,s).binding(i);return this.subscription(`bind:${i}`,r.bind()),r.listen()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const BKe={year:0,month:1,day:2,hour:3,minute:4,second:5},aB={};function jle(t,n,e,i,s,r,o){const a=new Date(0);return a.setUTCFullYear(t,n,e),a.setUTCHours(i,s,r,o),a}const Hle=36e5,GKe=6e4,lB={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function cB(t,n){const e=function $Ke(t,n){const e=function UKe(t){if(!aB[t]){const n=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z"));aB[t]="06/25/2014, 00:00:00"===n||"\u200e06\u200e/\u200e25\u200e/\u200e2014\u200e \u200e00\u200e:\u200e00\u200e:\u200e00"===n?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return aB[t]}(n);return"formatToParts"in e?function VKe(t,n){try{const e=t.formatToParts(n),i=[];for(let s=0;s<e.length;s++){const r=BKe[e[s].type];void 0!==r&&(i[r]=parseInt(e[s].value,10))}return i}catch(e){if(e instanceof RangeError)return[NaN];throw e}}(e,t):function zKe(t,n){const e=t.format(n),i=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(e);return[parseInt(i[3],10),parseInt(i[1],10),parseInt(i[2],10),parseInt(i[4],10),parseInt(i[5],10),parseInt(i[6],10)]}(e,t)}(t,n),i=jle(e[0],e[1]-1,e[2],e[3]%24,e[4],e[5],0).getTime();let s=t.getTime();const r=s%1e3;return s-=r>=0?r:1e3+r,i-s}function qle(t,n){return-23<=t&&t<=23&&(null==n||0<=n&&n<=59)}const Kle={};function tce(t,n){return-function Wle(t,n,e){if(!t)return 0;let s,r,i=lB.timezoneZ.exec(t);if(i)return 0;if(i=lB.timezoneHH.exec(t),i)return s=parseInt(i[1],10),qle(s)?-s*Hle:NaN;if(i=lB.timezoneHHMM.exec(t),i){s=parseInt(i[2],10);const o=parseInt(i[3],10);return qle(s,o)?(r=Math.abs(s)*Hle+o*GKe,"+"===i[1]?-r:r):NaN}if(function WKe(t){if(Kle[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),Kle[t]=!0,!0}catch{return!1}}(t)){n=new Date(n||Date.now());const o=e?n:function jKe(t){return jle(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}(n),a=cB(o,t);return-(e?a:function HKe(t,n,e){let s=t.getTime()-n;const r=cB(new Date(s),e);if(n===r)return n;s-=r-n;const o=cB(new Date(s),e);return r===o?r:Math.max(r,o)}(n,a,t))}return NaN}(t,n)}const IC=Intl?.DateTimeFormat()?.resolvedOptions()?.timeZone||"Australia/Sydney";function li(t,n){return GD(t,n*boe)}function cd(t,n){const e=Hn(t),i=Hn(n);return e.getTime()>i.getTime()}const oXe={month:43200,months:43200,week:10080,weeks:10080,day:1440,days:1440,hour:60,hours:60,minute:1,minutes:1},rce={auto_approve:!0,hidden:!1};function pB(t){const n=(t||"").split(" ");return n.length>1?+n[0]*oXe[n[1].toLowerCase()]:0}function oce(t,n=new Date){return li(n,pB(t))}function mB(t,n,e){return t.filter(i=>!function zM(t,n){if(!(n instanceof Array))return rce;for(const e of n)if(("*"===e.zone||e.zone===t.resource.zone?.id||t.resource.zones?.includes(e.zone))&&aXe(t,e))return e.rules;return rce}({...n,resource:i},e)?.hidden)}function aXe({date:t,duration:n,host:e,resource:i},s){const r=new Date(t);let o=0;const{conditions:a}=s;return!a||(a.groups instanceof Array&&a.groups.every(l=>e?.groups?.includes(l))&&(o+=1),a.is_before&&vl(li(t,n),oce(a.is_before))&&(o+=1),a.is_after&&cd(t,oce(a.is_after))&&(o+=1),a.min_length&&a.min_length<=n&&(o+=1),a.is_between&&r.getHours()+r.getMinutes()/60>=a.is_between[0]&&r.getHours()+r.getMinutes()/60<a.is_between[1]&&(o+=1),a.is_period&&t>=a.is_period[0]&&t<a.is_period[1]&&(o+=1),a.max_length&&a.max_length>=n&&(o+=1),a.resource_ids&&a.resource_ids.includes(i.id)&&(o+=1),a.locations&&a.locations.includes(i.name)&&(o+=1),o>=Object.keys(a).length)}const lXe=(t,n,e)=>({file:t,is_public:n,permissions:e});function cXe(t,n){if(1&t){const e=Le();m(0,"div",2)(1,"label"),C(2,"Permissions"),_(),m(3,"mat-form-field",3)(4,"mat-select",6),Gn("ngModelChange",function(s){re(e);const r=M();return Fn(r.permissions,s)||(r.permissions=s),oe(s)}),m(5,"mat-option",11),C(6,"None"),_(),m(7,"mat-option",12),C(8,"Support"),_(),m(9,"mat-option",13),C(10,"Admin"),_()()()()}if(2&t){const e=M();b(4),Un("ngModel",e.permissions)}}let ace=(()=>{class t{constructor(e,i){this._dialog_ref=e,this._data=i,this.file=this._data.file,this.is_public=!0,this.permissions="none",this.file=this._data.file}close(){this._dialog_ref.close()}static#e=this.\u0275fac=function(i){return new(i||t)(D(Da),D(Js))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["upload-permissions-modal"]],decls:21,vars:8,consts:[["btn","","icon","","mat-dialog-close",""],[1,"p-4","min-w-[20rem]"],[1,"flex","flex-col","space-y-2"],["appearance","outline"],["matInput","","disabled","true","placeholder","File Name",3,"ngModel"],[1,"pb-4"],[3,"ngModelChange","ngModel"],["class","flex flex-col space-y-2",4,"ngIf"],[1,"flex","items-center","justify-end","space-x-2","px-4","py-2","border-t","border-base-200"],["btn","","mat-dialog-close","",1,"inverse","w-32"],["btn","",1,"w-32",3,"mat-dialog-close"],["value","none"],["value","support"],["value","admin"]],template:function(i,s){1&i&&(m(0,"header")(1,"h2"),C(2,"Upload File"),_(),m(3,"button",0)(4,"app-icon"),C(5,"close"),_()()(),m(6,"main",1)(7,"div",2)(8,"label"),C(9,"File Name"),_(),m(10,"mat-form-field",3),be(11,"input",4),_()(),m(12,"div",5)(13,"mat-checkbox",6),Gn("ngModelChange",function(o){return Fn(s.is_public,o)||(s.is_public=o),o}),C(14,"Public"),_()(),K(15,cXe,11,1,"div",7),_(),m(16,"footer",8)(17,"button",9),C(18,"Cancel"),_(),m(19,"button",10),C(20," Upload "),_()()),2&i&&(b(11),S("ngModel",s.file.name),b(2),Un("ngModel",s.is_public),b(2),S("ngIf",!s.is_public),b(4),S("mat-dialog-close",function NZ(t,n,e,i,s,r){return PZ(ft(),al(),t,n,e,i,s,r)}(4,lXe,s.file,s.is_public,s.permissions)))},dependencies:[Ot,Mr,oi,wi,Hs,vs,Br,Ms,ql,Kl,zt]})}return t})(),uXe=(()=>{class t{constructor(e){this._dialog=e,this._upload_list=new Mt([]),this.upload_list=this._upload_list.asObservable(),localStorage&&this._upload_list.next(JSON.parse(localStorage.getItem("BACKOFFICE.uploads")||"[]"))}clearList(){const e=this._upload_list.getValue().filter(i=>i.progress<100&&!i.error);this._upload_list.next(e)}uploadFileWithPermissions(e){var i=this;return new Promise((s,r)=>{this._dialog.open(ace,{data:{file:e}}).afterClosed().subscribe(function(){var a=de(function*(l){if(l){const c=yield i.uploadFile(l.file,l.is_public,l.permissions).catch(u=>{throw r(u),u});s(c)}else r()});return function(l){return a.apply(this,arguments)}}())})}uploadFile(e,i=!0,s="none"){return new Promise(r=>{let o=!1;const a=l=>{o||(r(l.id),o=!0),this._upload_list.next([...this._upload_list.getValue().filter(c=>c.id!==l.id),l])};(function OKe(t,n=!0,e="none"){return new es(i=>{const s=new FileReader;s.addEventListener("loadend",r=>{const c=function rB(t,n){if(void 0===n&&(n={}),!Mle())throw"No API endpoint set";var e=[];return t.forEach(function(i){var s=new CKe(i,Wr.retries,Wr.parallel,n);e.push(s),Mc.push(s),s.metadata=Wr.metadata,s.status.pipe(ds(function(r){return"complete"===r.status})).subscribe(function(r){return function(o){var a=Wr.auto_start,l=Wr.remove_after;Wr.auto_remove&&(l?setTimeout(function(){return Nle(o)},l):Nle(o));var c=Mc.filter(function(u){return u.waiting});a&&c.length&&Rle()&&c[0].resume(Wr.parallel)}(s)}),Wr.auto_start&&Rle()&&s.resume(Wr.parallel)}),e}([oB(r.target.result,t.type)],{file_name:t.name,permissions:e,public:n})[0],u={id:Mp(999999999999),name:t.name,progress:0,link:"",formatted_size:SKe(t.size),size:t.size,upload:c};c.status.pipe(_D(d=>"complete"!==d.status,!0)).subscribe(d=>{c.access_url&&(u.link=n?c.access_url:`${location.origin}/api/engine/v2/uploads/${encodeURIComponent(c.id)}/url`),u.progress=d.progress,i.next(u),"error"===d.status&&i.error({...u,error:d.error}),"complete"===d.status&&i.complete()}),i.next(u)}),s.readAsArrayBuffer(t)})})(e,i,s).subscribe(a,a,()=>this._updateUploadHistory())})}_updateUploadHistory(){const e=this._upload_list.getValue().filter(i=>i.progress>=100);e.forEach(i=>delete i.upload),localStorage&&localStorage.setItem("PLACEOS.uploads",JSON.stringify(e))}static#e=this.\u0275fac=function(i){return new(i||t)(Re(wr))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),lce=(()=>{class t extends bn{constructor(e,i){super(),this._element=e,this._renderer=i,this.sys="",this.mod="",this.index=1,this.bind="",this.exec="",this.delay=100,this.on_event="",this.params=null,this.ignore=!1,this.model=null,this.modelChange=new it,this._binding=!1,this._old_model=null}ngOnInit(){Coe()?.pipe(ds(e=>e)).subscribe(e=>this.bindVariable())}ngOnChanges(e){(e.sys||e.mod||e.bind)&&this.bindVariable(),e.model&&this._old_model!==this.model&&null!=this.model&&(this._old_model=this.model,this.execute()),e.on_event&&this.on_event&&this.subscription("on_event",this._renderer.listen(this._element.nativeElement,this.on_event,()=>this.execute()))}bindVariable(){kc()&&this.bind&&this.sys&&this.mod&&!this._binding&&this.timeout("bind",()=>{const i=Vr(this.sys,this.mod,this.index).binding(this.bind);this._binding=!0,this.subscription("binding",i.bind()),this.subscription("on_changes",i.listen().pipe(an(s=>null!=s)).subscribe(s=>{setTimeout(()=>{this._binding=!1,this.clearTimeout("bound"),!this.ignore&&(this.model=s,this._old_model=this.model,this.modelChange.emit(this.model))},10)})),this.timeout("bound",()=>this._binding=!1,200)},20)}execute(){kc()&&this.exec&&this.sys&&this.mod&&!this._timers.execute&&this.timeout("execute",()=>{const e=Vr(this.sys,this.mod,this.index);let i=this.params;this.bind&&(i=this.params||[this.model]),e.execute(this.exec,i||[]).then(s=>{this.bind||(this.model=s,this._old_model=this.model,this.modelChange.emit(this.model))})},this.delay)}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(Hu))};static#t=this.\u0275dir=pt({type:t,selectors:[["i","bind",""],["","binding",""],["co-bind"]],inputs:{sys:"sys",mod:"mod",index:"index",bind:"bind",exec:"exec",delay:"delay",on_event:[0,"onEvent","on_event"],params:"params",ignore:"ignore",model:"model"},outputs:{modelChange:"modelChange"},features:[bt,On]})}return t})();function vXe(t,n){if(1&t&&(m(0,"div",4),C(1),_()),2&t){const e=M(2);b(),xe(" ",e.initials," ")}}function yXe(t,n){if(1&t&&(m(0,"div",2),K(1,vXe,2,1,"div",3),_()),2&t){const e=M(),i=Gt(2);$t("user-id",e.user.id),b(),S("ngIf",!e.user.photo)("ngIfElse",i)}}function wXe(t,n){1&t&&be(0,"img",5),2&t&&S("source",M().user.photo)}let pf=(()=>{class t{get initials(){if(!this.user)return"NA";const e=this.user.name||"",i=e.replace(/[()[\]\-+=\\/]+/gi,"").split(" ");return i.length>1?`${i[0][0]}${i[i.length-1][0]}`:e.slice(0,2)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Qe({type:t,selectors:[["a-user-avatar"]],inputs:{user:"user"},decls:3,vars:1,consts:[["image_state",""],["class","flex items-center justify-center rounded-full overflow-hidden",4,"ngIf"],[1,"flex","items-center","justify-center","rounded-full","overflow-hidden"],["initials","","class","text-base-content text-opacity-80 uppercase",4,"ngIf","ngIfElse"],["initials","",1,"text-base-content","text-opacity-80","uppercase"],["auth","",1,"h-full","w-full",3,"source"]],template:function(i,s){1&i&&K(0,yXe,2,3,"div",1)(1,wXe,1,1,"ng-template",null,0,mn),2&i&&S("ngIf",s.user)},styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{height:2.5em;width:2.5em;background-color:var(--b2);overflow:hidden;border:2px solid var(--b1)}.initials[_ngcontent-%COMP%]{font-size:1em}"]})}return t})();class Cl{constructor(n={}){this.id=n.id||"",this.name=n.name||"",this.display_name=n.display_name||"",this.email=(n.email||"").toLowerCase(),this.capacity=n.capacity||-1,this.feature_list=n.feature_list||n.features||[],this.bookable=!!n.bookable,this.zones=n.zones||[],this.support_url=n.support_url||"",this.map_id=n.map_id||"",this.images=n.images||[],this.configurations=n.configurations||[],this.features=n.features||[],this.response_status=n.response_status,this.level=n.level||new _C,this.availability=n.availability||[]}inUseAt(n,e){const i=n+60*e*1e3;return this.availability.filter(s=>s.date==n&&s.date+60*s.duration*1e3==i&&"free"!==s.status).length>0}}const kC=[],Dy={},bB=new Cl({email:"empty.space@place.os"});function cce(t){for(const n of t)kC.find(({id:e})=>e===n.id)||kC.push(n)}setInterval(()=>{for(const t in Dy)Dy[t]=Dy[t]-1,Dy[t]<=0&&delete Dy[t]},1e4);let vB,au=(()=>{class t{constructor(e){this._org=e}transform(e){var i=this;return de(function*(){i._org&&(yield i._org.initialised.pipe(ds(a=>a)).toPromise());const s=e?.includes("@");if(!e)return bB;let r=kC.find(({id:a,email:l})=>a===e||l===e);if(r)return r;if(Dy[e])return bB;if(!s){const a=yield $oe(e).toPromise().catch(l=>null);if(a)return r=new Cl({...a,level:i._org?.levelWithID([...a.zones])}),kC.push(r),r}const o=(yield function YGe(t={}){return hy({query_params:t,fn:eg,path:`${ho}/with_emails`})}({in:e,zone_id:i._org?.organisation.id}).toPromise()).data;return 1===o.length?(r=new Cl({...o[0],level:i._org?.levelWithID([...o[0].zones])}),kC.push(r),r):bB})()}updateSpaceList(e){cce(e)}static#e=this.\u0275fac=function(i){return new(i||t)(D(In,24))};static#t=this.\u0275pipe=rr({name:"space",type:t,pure:!0})}return t})(),yB=(()=>{class t{get space_list(){return this._list.getValue()}constructor(e,i){this._org=e,this._settings=i,this._list=new Mt([]),this._initialised=new Mt(!1),this.initialised=this._initialised.asObservable(),this.list=this._list.asObservable(),this.features=this.list.pipe(ze(s=>Cs(To(s.map(r=>r.features))))),this._compare=s=>s.zones.includes(this._org.building.id),vB=new au(e),this._init()}_init(){var e=this;return de(function*(){yield e._org.initialised.pipe(ds(i=>i)).toPromise(),e._settings.get("app.prevent_space_init")?e._initialised.next(!0):e.loadSpaces()})()}filter(e=this._compare){return this._list.getValue().filter(i=>e(i))}loadSpace(e){var i=this;return de(function*(){const s=yield $oe(e).toPromise(),r=new Cl({...s,level:i._org.levelWithID([...s.zones])});vB.updateSpaceList([r])})()}find(e){return this._list.getValue().find(({id:i})=>e===i)}loadSpaces(){var e=this;return de(function*(){const r=(yield eC({zone_id:e._org.organisation.id,limit:5e3}).pipe(ze(o=>o.data)).toPromise()).map(o=>new Cl({...o,level:e._org.levelWithID([...o.zones])})).filter(o=>o.map_id);e._list.next(r),vB.updateSpaceList(r),e._initialised.next(!0)})()}static#e=this.\u0275fac=function(i){return new(i||t)(Re(In),Re(ln))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),eh=(()=>{class t extends bn{get positions(){return this._positions.getValue()}get active_level(){return this._level.getValue()}constructor(e,i,s){super(),this._org=e,this._spaces=i,this._settings=s,this._level=new Mt(null),this._positions=new Mt({zoom:1,center:{x:.5,y:.5}}),this._styles=new Mt({}),this._features=new Mt({}),this._actions=new Mt({}),this._labels=new Mt({}),this._options=new Mt({is_public:!1,disable:["zones","devices"]}),this._message=new Mt(""),this.level=this._level.asObservable(),this.message=this._message.asObservable(),this.spaces=Qt([this._level,this._org.initialised]).pipe(an(([r,o])=>o),nn(([r])=>eC({zone_id:r?.id||this._org.organisation.id,limit:50}).pipe(ze(({data:o})=>o.map(a=>new Cl(a))),ts(o=>gt([])))),jn(1)),this.map_url=this._level.pipe(ze(r=>(r?r.map_id:"")||"")),this.map_positions=this._positions.asObservable(),this.map_features=Qt([this._features,this._options]).pipe(hs(200),ze(([r,o])=>{let a=[];for(const l in r)o.disable?.includes(l)||o.disable_features?.includes(l)||"zones-canvas"===l&&o.disable?.includes("zones")||(a=a.concat(r[l]));return a})),this.map_actions=Qt([this._actions,this._options]).pipe(hs(200),ze(([r,o])=>{let a=[];for(const l in r)o.disable?.includes(l)||o.disable_actions?.includes(l)||(a=a.concat(r[l]));return a})),this.map_labels=Qt([this._labels,this._options]).pipe(hs(200),ze(([r,o])=>{let a=[];for(const l in r)o.disable?.includes(l)||o.disable_labels?.includes(l)||(a=a.concat(r[l]));return a})),this.map_styles=Qt([this._styles,this._options]).pipe(hs(200),ze(([r,o])=>{let a={text:{display:"none"}};for(const l in r)o.disable?.includes(l)||o.disable_styles?.includes(l)||(a={...a,...r[l]});return o.disable?.includes("zones")&&(a["#zones"]={display:"none"},a["#Zones"]={display:"none"}),a})),this.options=this._options.asObservable(),this.init()}init(){var e=this;return de(function*(){yield e._org.initialised.pipe(ds(i=>i)).toPromise(),e._org.active_levels.pipe(an(i=>!!i)).subscribe(i=>{const s=e._level.getValue();!i.find(o=>s?.id===o.id)&&i.length&&e.setLevel(i[0].id),e._settings.get("app.explore.disable_actions")&&e.setOptions({disable_actions:e._settings.get("app.explore.disable_actions")}),e._settings.get("app.explore.disable_labels")&&e.setOptions({disable_labels:e._settings.get("app.explore.disable_labels")}),e._settings.get("app.explore.disable_features")&&e.setOptions({disable_features:e._settings.get("app.explore.disable_features")}),e._settings.get("app.explore.disable_styles")&&e.setOptions({disable_styles:e._settings.get("app.explore.disable_styles")})})})()}setOptions(e){const i=this._options.getValue(),s=Cs([...e.disable||i.disable,...this._settings.get("app.explore.disable")||[]]);this._options.next({...this._options.getValue(),...e,disable:s})}reset(){this._styles.next({}),this._features.next({}),this._labels.next({}),this._actions.next({}),this._options.next({is_public:!1,disable:["zones","devices"]}),this.setPositions(1,{x:.5,y:.5})}setLevel(e){const i=this._org.levelWithID([e]);i&&this._level.next(i)}setStyles(e,i){const s=this._styles.getValue();s[e]=i,this._styles.next(s)}setFeatures(e,i){const s=this._features.getValue();s[e]=i,this._features.next(s)}setActions(e,i){const s=this._actions.getValue();s[e]=i,this._actions.next(s)}setLabels(e,i){const s=this._labels.getValue();s[e]=i,this._labels.next(s)}setPositions(e,i){this._positions.next({zoom:e,center:i})}static#e=this.\u0275fac=function(i){return new(i||t)(Re(In),Re(yB),Re(ln))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const uce=["*","*"];function SXe(t,n){if(1&t){const e=Le();sn(0),m(1,"map-renderer",3),Gn("zoomChange",function(s){re(e);const r=M();return Fn(r.zoom,s)||(r.zoom=s),oe(s)}),te("zoomChange",function(s){return re(e),oe(M().zoomChange.next(s))})("mapInfo",function(s){return re(e),oe(M().mapInfo.next(s))}),un(2),_(),rn()}if(2&t){const e=M();b(),S("src",e.src),Un("zoom",e.zoom),S("reset",e.reset)("styles",e.styles||(null==e.metadata?null:e.metadata.styles))("features",e.features||(null==e.metadata?null:e.metadata.features))("actions",e.actions||(null==e.metadata?null:e.metadata.actions))("labels",e.labels||(null==e.metadata?null:e.metadata.labels))}}function CXe(t,n){if(1&t){const e=Le();m(0,"maps-indoors",4),te("zoneChange",function(s){return re(e),oe(M().onLevelChange(s))}),Gn("zoomChange",function(s){re(e);const r=M();return Fn(r.zoom,s)||(r.zoom=s),oe(s)}),te("zoomChange",function(s){return re(e),oe(M().zoomChange.next(s))}),un(1,1),_()}if(2&t){const e=M();S("zone",e.location),Un("zoom",e.zoom),S("options",e.options)("reset",e.reset)("focus",e.focus)("metadata",e.metadata)}}function xXe(t,n){if(1&t){const e=Le();m(0,"div",5)(1,"button",6),te("click",function(){re(e);const s=M();return oe(s.zoom=1.1*s.zoom)}),m(2,"app-icon"),C(3,"add"),_()(),m(4,"button",7),te("click",function(){re(e);const s=M();return oe(s.zoom=s.zoom*(10/11))}),m(5,"app-icon"),C(6,"remove"),_()(),m(7,"button",8),te("click",function(){re(e);const s=M();return oe(s.reset=s.reset+1)}),m(8,"app-icon"),C(9,"refresh"),_()()()}}const Ya=new st("Data for Map Features");let Yl=(()=>{class t extends bn{get location(){return this._org.levels.find(e=>e.map_id===this.src)}constructor(e,i,s){super(),this._mapspeople=e,this._org=i,this._explore=s,this.zoom=1,this.center={x:.5,y:.5},this.reset=0,this.metadata={},this.options={},this.zoomChange=new it,this.centerChange=new it,this.mapInfo=new it,this.use_mapsindoors$=this._mapspeople.available$}ngOnChanges(e){(e.actions||e.labels||e.styles||e.features)&&(this.metadata={actions:this.actions||[],labels:this.labels||[],styles:this.styles||{},features:this.features||[]})}onLevelChange(e){Xi("Map","Level changed to:",e?.display_name||e?.name||e),this._explore.setLevel(e.id)}static#e=this.\u0275fac=function(i){return new(i||t)(D(Rp),D(In),D(eh))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["interactive-map"]],inputs:{src:"src",zoom:"zoom",center:"center",reset:"reset",metadata:"metadata",styles:"styles",features:"features",labels:"labels",actions:"actions",options:"options",focus:"focus"},outputs:{zoomChange:"zoomChange",centerChange:"centerChange",mapInfo:"mapInfo"},features:[bt,On],ngContentSelectors:uce,decls:5,vars:5,consts:[["mapsindoors_template",""],[4,"ngIf","ngIfElse"],["zoom","","class","absolute bottom-16 right-1 border border-base-200 divide-y divide-base-200 shadow flex flex-col bg-base-100 text-base-content rounded overflow-hidden",4,"ngIf"],[3,"zoomChange","mapInfo","src","zoom","reset","styles","features","actions","labels"],[3,"zoneChange","zoomChange","zone","zoom","options","reset","focus","metadata"],["zoom","",1,"absolute","bottom-16","right-1","border","border-base-200","divide-y","divide-base-200","shadow","flex","flex-col","bg-base-100","text-base-content","rounded","overflow-hidden"],["icon","","matRipple","","matTooltip","Zoom In","matTooltipPosition","left",1,"rounded-none",3,"click"],["icon","","matRipple","","matTooltip","Zoom Out","matTooltipPosition","left",1,"rounded-none",3,"click"],["icon","","matRipple","","matTooltip","Reset Zoom and Position","matTooltipPosition","left",1,"rounded-none",3,"click"]],template:function(i,s){if(1&i&&(Ti(uce),K(0,SXe,3,7,"ng-container",1),ge(1,"async"),K(2,CXe,2,6,"ng-template",null,0,mn)(4,xXe,10,0,"div",2)),2&i){const r=Gt(3);S("ngIf",!Me(1,3,s.use_mapsindoors$))("ngIfElse",r),b(4),S("ngIf",null==s.options?null:s.options.controls)}}})}return t})();const EXe=["map-pin",""];function TXe(t,n){if(1&t&&(m(0,"div",2),C(1),_()),2&t){const e=M();b(),xe(" ",e.message," ")}}function IXe(t,n){if(1&t){const e=Le();ra(),m(0,"svg",3),te("click",function(){return re(e),oe(M().action())}),m(1,"g"),be(2,"path",4),_()()}if(2&t){const e=M();rt("action",e.action),b(2),Wn("fill",e.fill)("stroke",e.stroke)}}let lu=(()=>{class t{constructor(e){this._details=e,this.message=this._details.message,this.fill=this._details.fill||"#e53935",this.stroke=this._details.stroke||"#fff",this.action=this._details.action||null}ngOnInit(){setTimeout(()=>this.show=!0,300),setTimeout(()=>this.show_message=!0,1e3)}static#e=this.\u0275fac=function(i){return new(i||t)(D(Ya))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["","map-pin",""]],attrs:EXe,decls:2,vars:2,consts:[["name","message","class","p-2 m-2 rounded bg-base-100 text-gray-700 shadow",4,"ngIf"],["name","pin","viewBox","0 0 380 560",3,"action","click",4,"ngIf"],["name","message",1,"p-2","m-2","rounded","bg-base-100","text-gray-700","shadow"],["name","pin","viewBox","0 0 380 560",3,"click"],["stroke-width","25","d","M182.9,551.7c0,0.1,0.2,0.3,0.2,0.3S358.3,283,358.3,194.6c0-130.1-88.8-186.7-175.4-186.9\n            C96.3,7.9,7.5,64.5,7.5,194.6c0,88.4,175.3,357.4,175.3,357.4S182.9,551.7,182.9,551.7z M122.2,187.2c0-33.6,27.2-60.8,60.8-60.8\n            c33.6,0,60.8,27.2,60.8,60.8S216.5,248,182.9,248C149.4,248,122.2,220.8,122.2,187.2z"]],template:function(i,s){1&i&&K(0,TXe,2,1,"div",0)(1,IXe,3,6,"svg",1),2&i&&(S("ngIf",s.message&&s.show_message),b(),S("ngIf",s.show))},dependencies:[Ot],styles:["[_nghost-%COMP%]{position:absolute;bottom:50%;left:50%;width:24rem;display:flex;flex-direction:column;align-items:center;transform:translate(-50%);z-index:-1}div[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in-top 1s}.action[_ngcontent-%COMP%]{pointer-events:auto}svg[_ngcontent-%COMP%]{width:2rem;animation:_ngcontent-%COMP%_fade-in-top 1s}@keyframes _ngcontent-%COMP%_fade-in-top{0%{opacity:0;transform:translateY(-100%)}to{opacity:1;transform:translateY(0)}}"]})}return t})();function Fs(t){const n=Hn(t);return n.setHours(23,59,59,999),n}function wB(t){return n=>{const i=(t?Math[t]:Math.trunc)(n);return 0===i?0:i}}var My=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(My||{});let ud=(()=>{class t{constructor(e){this.sanitizer=e}transform(e,i="html"){switch(i){case"resource":return this.sanitizer.sanitize(My.RESOURCE_URL,e);case"url":return this.sanitizer.sanitize(My.URL,e);case"script":return this.sanitizer.sanitize(My.SCRIPT,e);case"style":return this.sanitizer.sanitize(My.STYLE,e);default:return this.sanitizer.sanitize(My.HTML,e)}}static#e=this.\u0275fac=function(i){return new(i||t)(D(f4,16))};static#t=this.\u0275pipe=rr({name:"sanitize",type:t,pure:!0})}return t})(),GM=(()=>{class t{constructor(){this.changes=new Pt}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const JXe={provide:GM,deps:[[new Id,new Rh,GM]],useFactory:function QXe(t){return t||new GM}};let mce=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:[JXe],imports:[Ki]})}return t})();const kYe=["customTooltip",""],DYe=["*"];function MYe(t,n){1&t&&Ss(0)}function AYe(t,n){if(1&t&&(sn(0),K(1,MYe,1,0,"ng-container",4),rn()),2&t){const e=M(2);b(),S("ngComponentOutlet",e.content)("ngComponentOutletInjector",e.injector)}}function OYe(t,n){if(1&t&&(sn(0),be(1,"div",5),ge(2,"sanitize"),rn()),2&t){const e=M(2);b(),S("innerHTML",Me(2,1,e.content),Zc)}}function NYe(t,n){1&t&&Ss(0)}function RYe(t,n){if(1&t&&(sn(0),K(1,NYe,1,0,"ng-container",6),rn()),2&t){const e=M(2);b(),S("ngTemplateOutlet",e.content)("ngTemplateOutletContext",e.data)}}function FYe(t,n){1&t&&(m(0,"div",1),K(1,AYe,2,2,"ng-container",2)(2,OYe,3,3,"ng-container",2)(3,RYe,2,2,"ng-container",3),_()),2&t&&(S("ngSwitch",M().type),b(),S("ngSwitchCase","component"),b(),S("ngSwitchCase","html"))}let cg=(()=>{class t{constructor(e){this.data=e.data,this.close=e.close||(()=>null)}static#e=this.\u0275fac=function(i){W0()};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac})}return t})(),cu=(()=>{class t extends bn{constructor(e,i,s){super(),this._element=e,this._overlay=i,this._injector=s,this.backdrop=!0,this.hover=!1,this.delay=0,this.type="template",this._overlay_ref=null,this.onClick=()=>this.open(),this.onTouch=()=>this.open(),this.onEnter=()=>this.hover?this.open():"",this.onLeave=()=>this.hover?this.close():""}ngOnChanges(e){this._updateInjector(),this._overlay_ref&&(e.x_pos||e.y_pos||e.content)&&this.open()}ngOnDestroy(){super.ngOnDestroy(),this.close()}open(){this.content&&this.timeout("open",()=>{this.hover&&this.delay&&this.timeout("onclose",()=>this.close(),this.delay),this._updateType(),this._overlay_ref&&this.close(),this._portal&&(this._element.nativeElement.getBoundingClientRect(),this._overlay_ref=this._overlay.create({hasBackdrop:!!this.backdrop&&!this.hover,positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withPositions([{originX:this.x_pos||"end",originY:("top"===this.y_pos?"bottom":"bottom"==this.y_pos?"top":this.y_pos)||"top",overlayX:this.x_pos||"end",overlayY:this.y_pos||"top"}])}),this._overlay_ref.attach(this._portal),this.backdrop&&this.subscription("backdrop",this._overlay_ref.backdropClick().subscribe(()=>this.close())))},50)}close(){this.clearTimeout("open"),this._overlay_ref&&(this._overlay_ref.dispose(),this._overlay_ref=null)}_updateType(){this.type="string"==typeof this.content?"html":this.content instanceof or?"template":"component"}_updateInjector(){this.injector=ti.create({providers:[{provide:cg,useValue:{data:this.data,close:()=>this.close()}}],parent:this._injector})}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(Qs),D(ti))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["","customTooltip",""]],viewQuery:function(i,s){if(1&i&&Zt(yS,5),2&i){let r;xt(r=Et())&&(s._portal=r.first)}},hostBindings:function(i,s){1&i&&te("click",function(){return s.onClick()})("touchend",function(){return s.onTouch()})("mouseenter",function(){return s.onEnter()})("mouseleave",function(){return s.onLeave()})},inputs:{x_pos:[0,"xPosition","x_pos"],y_pos:[0,"yPosition","y_pos"],content:"content",data:"data",backdrop:"backdrop",hover:"hover",delay:"delay"},features:[bt,On],attrs:kYe,ngContentSelectors:DYe,decls:2,vars:0,consts:[["cdk-portal",""],["custom-tooltip","",1,"relative","print:hidden",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngComponentOutlet","ngComponentOutletInjector"],[3,"innerHTML"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,s){1&i&&(Ti(),un(0),K(1,FYe,4,3,"ng-template",0))},dependencies:[XP,h_,ip,bv,vv,f8,ud],encapsulation:2})}return t})();const LYe=["keyboard",""],PYe=["*"];function $Ye(t,n){1&t&&be(0,"div",7),2&t&&rt("bg-success","shift"===M(4).state)}function BYe(t,n){if(1&t){const e=Le();sn(0),m(1,"div",5),te("focus",function(){return re(e),oe(M(3).focusInput())})("click",function(){const s=re(e).$implicit;return oe(M(3).handleKeyPress(s))}),C(2),K(3,$Ye,1,2,"div",6),_(),rn()}if(2&t){const e=n.$implicit;b(),rt("special","{"===e[0]&&e.length>1)("space","{space}"===e),$t("key",e),b(),xe(" ","{space}"===e?"Space":"{caps}"===e?"Caps Lock":"{backspace}"===e?"Backspace":e," "),b(),S("ngIf","{caps}"===e)}}function VYe(t,n){if(1&t&&(m(0,"div",3),K(1,BYe,4,7,"ng-container",4),_()),2&t){const e=n.$implicit;b(),S("ngForOf",e)}}function zYe(t,n){if(1&t&&(m(0,"div",1),K(1,VYe,2,1,"div",2),_()),2&t){const e=M();b(),S("ngForOf",e.keyset)}}const wce=["0123456789".split(""),"qwertyuiop".split(""),"asdfghjkl".split(""),"zxcvbnm".split(""),["{caps}","{space}","{backspace}"]];let CB=(()=>{class t extends bn{constructor(e,i){super(),this._element=e,this._overlay=i,this.keyset=wce,this.state="normal",this._overlay_ref=null,this.onFocus=()=>{t.enabled&&(this.open(),this.clearTimeout("blur"))},this.onBlur=()=>this.timeout("blur",()=>this.close())}ngOnChanges(e){e.keyset&&(this.keyset||(this.keyset=wce))}ngOnDestroy(){super.ngOnDestroy(),this.close()}focusInput(){this._element?.nativeElement?.blur(),this._element?.nativeElement?.focus()}open(){this._overlay_ref||this._portal&&(this._overlay_ref=this._overlay.create({positionStrategy:this._overlay.position().global().bottom().centerHorizontally()}),this._overlay_ref.attach(this._portal))}close(){this._overlay_ref&&(this._overlay_ref.dispose(),this._overlay_ref=null)}handleKeyPress(e){let i=this._element.nativeElement.selectionStart;const s=this._element.nativeElement.value||"";switch(e.toLowerCase()){case"{caps}":case"{shift}":this.state="shift";break;case"{backspace}":this._element.nativeElement.value=`${s.substr(0,i-1)}${s.substr(i,s.length)}`,i=Math.max(0,i-1);break;case"{space}":this._element.nativeElement.value=`${s.substr(0,i)} ${s.substr(i,s.length)}`,i+=1;break;default:"shift"===this.state&&(this.state="normal"),this._element.nativeElement.value=`${s.substr(0,i)}${e}${s.substr(i,s.length)}`,i+=1}this._element.nativeElement.dispatchEvent(new InputEvent("input")),this.updateKeyState(),this.timeout("focus",()=>{this.focusInput(),this._element.nativeElement.selectionStart=i,this._element.nativeElement.selectionEnd=i},50)}updateKeyState(){this.keyset=this.keyset.map(e=>e.map(i=>i.length>1?i:i["normal"!==this.state?"toUpperCase":"toLowerCase"]()))}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(Qs))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["input","keyboard",""],["textarea","keyboard",""]],viewQuery:function(i,s){if(1&i&&Zt(yS,5),2&i){let r;xt(r=Et())&&(s._portal=r.first)}},hostBindings:function(i,s){1&i&&te("focus",function(){return s.onFocus()})("blur",function(){return s.onBlur()})},inputs:{keyset:"keyset"},features:[bt,On],attrs:LYe,ngContentSelectors:PYe,decls:2,vars:0,consts:[["cdk-portal",""],["keyboard-view","",1,"w-screen","flex","flex-col","space-y-4","bg-base-200","p-2","border-t","border-base-200"],["row","","class","flex items-center justify-center space-x-2",4,"ngFor","ngForOf"],["row","",1,"flex","items-center","justify-center","space-x-2"],[4,"ngFor","ngForOf"],["tabindex","0",1,"rounded-xl","p-2","border","border-base-200","relative","cursor-pointer","bg-base-100",3,"focus","click"],["dot","","class","absolute top-2 right-2 h-2 w-2 rounded-full bg-base-200",3,"bg-success",4,"ngIf"],["dot","",1,"absolute","top-2","right-2","h-2","w-2","rounded-full","bg-base-200"]],template:function(i,s){1&i&&(Ti(),un(0),K(1,zYe,2,1,"ng-template",0))},dependencies:[hn,Ot,f8],styles:["[key][_ngcontent-%COMP%]{height:3.5rem;width:4rem;transition:box-shadow .2s,top .2s;box-shadow:0 4px 0 .04px #0000001a}[key].special[_ngcontent-%COMP%]{width:10rem}[key].space[_ngcontent-%COMP%]{flex:1;min-width:10rem;max-width:25rem}[key][_ngcontent-%COMP%]:hover{top:2px;box-shadow:0 2px 0 .04px #0000001a}[key][_ngcontent-%COMP%]:active{top:4px;box-shadow:0 0 0 .04px #0000001a}"]})}return t})();function UYe(t,n){1&t&&(m(0,"div",2),C(1," Unable to reach server... Some features may not work. "),_())}function GYe(t,n){1&t&&(m(0,"div",3),be(1,"mat-spinner",4),_()),2&t&&(b(),S("diameter",64))}let Sce=(()=>{class t extends bn{get online(){return function yGe(){return uf.getValue()}()}constructor(e,i){super(),this._org=e,this._settings=i}ngOnInit(){var e=this;return de(function*(){e.loading=!0,yield e._org.initialised.pipe(ds(i=>i)).toPromise(),yield e._settings.initialised.pipe(ds(i=>i)).toPromise(),e.interval("has_token",()=>{!kc()||!Eo()||(e.loading=!1,e.clearInterval("has_token"))},1e3)})()}static#e=this.\u0275fac=function(i){return new(i||t)(D(In),D(ln))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["global-loading"]],features:[bt],decls:2,vars:2,consts:[["class","fixed bottom-2 left-1/2 -translate-x-1/2 shadow rounded-3xl px-4 py-2 bg-error text-white text-xs",4,"ngIf"],["loader","","class","fixed inset-0 flex items-center justify-center pointer-events-auto bg-base-100",4,"ngIf"],[1,"fixed","bottom-2","left-1/2","-translate-x-1/2","shadow","rounded-3xl","px-4","py-2","bg-error","text-white","text-xs"],["loader","",1,"fixed","inset-0","flex","items-center","justify-center","pointer-events-auto","bg-base-100"],[3,"diameter"]],template:function(i,s){1&i&&K(0,UYe,2,0,"div",0)(1,GYe,2,1,"div",1),2&i&&(S("ngIf",!s.online),b(),S("ngIf",s.loading))},dependencies:[Ot,Ws],styles:["[_nghost-%COMP%]{pointer-events:none}[_nghost-%COMP%] > [loader][_ngcontent-%COMP%]{z-index:997;background-image:url(\"data:image/svg+xml,%3Csvg width='36' height='36' viewBox='0 0 36 36' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M36 0H0v36h36V0zM15.126 2H2v13.126c.367.094.714.24 1.032.428L15.554 3.032c-.188-.318-.334-.665-.428-1.032zM18 4.874V18H4.874c-.094-.367-.24-.714-.428-1.032L16.968 4.446c.318.188.665.334 1.032.428zM22.874 2h11.712L20 16.586V4.874c1.406-.362 2.512-1.468 2.874-2.874zm10.252 18H20v13.126c.367.094.714.24 1.032.428l12.522-12.522c-.188-.318-.334-.665-.428-1.032zM36 22.874V36H22.874c-.094-.367-.24-.714-.428-1.032l12.522-12.522c.318.188.665.334 1.032.428zm0-7.748V3.414L21.414 18h11.712c.362-1.406 1.468-2.512 2.874-2.874zm-18 18V21.414L3.414 36h11.712c.362-1.406 1.468-2.512 2.874-2.874zM4.874 20h11.712L2 34.586V22.874c1.406-.362 2.512-1.468 2.874-2.874z' fill='%23000000' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E\")}"]})}return t})();function WYe(t,n){if(1&t){const e=Le();m(0,"div",1)(1,"div",2),C(2),_(),m(3,"button",3),te("click",function(){return re(e),oe(M().close())}),m(4,"app-icon"),C(5,"close"),_()()()}if(2&t){const e=M();rt("bg-info","info"===e.banner.type||!e.banner.type)("text-info-content","info"===e.banner.type||!e.banner.type)("bg-warning","warn"===e.banner.type)("text-warning-content","warn"===e.banner.type)("bg-error","error"===e.banner.type)("text-error-content","error"===e.banner.type),b(2),vt(null==e.banner?null:e.banner.content)}}let Cce=(()=>{class t{get has_viewed(){return!this.banner?.content||localStorage.getItem("PLACE.last_banner")===this.banner.id}get banner(){return this._settings.get("app.general.banner")}constructor(e){this._settings=e}close(){localStorage.setItem("PLACE.last_banner",this.banner?.id||"")}static#e=this.\u0275fac=function(i){return new(i||t)(D(ln))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["global-banner"]],decls:1,vars:1,consts:[["class","flex items-center w-full p-4 space-x-4",3,"bg-info","text-info-content","bg-warning","text-warning-content","bg-error","text-error-content",4,"ngIf"],[1,"flex","items-center","w-full","p-4","space-x-4"],[1,"flex-1"],["icon","",3,"click"]],template:function(i,s){1&i&&K(0,WYe,6,13,"div",0),2&i&&S("ngIf",!s.has_viewed)},dependencies:[Ot,zt],styles:["[_nghost-%COMP%]{display:block;width:100%}"]})}return t})();const qYe=()=>({disable_pan:!0,disable_zoom:!0});function KYe(t,n){if(1&t&&(m(0,"div",7)(1,"interactive-map",8),be(2,"mat-spinner",9),_(),m(3,"div",10),C(4),_()()),2&t){const e=M();b(),S("src",null==e.level?null:e.level.map_id)("focus",null==e.item?null:e.item.map_id)("features",e.features)("options",pn(5,qYe)),b(3),xe(" ",(null==e.level?null:e.level.display_name)||(null==e.level?null:e.level.name)," ")}}let DC=(()=>{class t extends bn{get level(){return this.item.level||this._org.levelWithID(this.item.zones||[])}constructor(e,i){super(),this._data=e,this._org=i,this.event=new it,this.item=this._data.item,this.style_map={},this.item.level?.id||delete this.item.level}ngOnInit(){this.timeout("init",()=>{this.processFeature(),this.processStyles()},1e3)}processStyles(){const e={};this.item?.map_id&&(e["#zones"]={display:"none"},e["#Zones"]={display:"none"}),this.style_map=e}processFeature(){if(!this.item)return null;this.features=[{location:this.item.map_id,track_id:"focus_item",content:lu,data:{name:this.item.name},z_index:99,zoom:100}]}static#e=this.\u0275fac=function(i){return new(i||t)(D(Js),D(In))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["map-locate-modal"]],outputs:{event:"event"},features:[bt],decls:10,vars:2,consts:[[1,"h-[calc(100vh-4rem)]","w-screen","sm:h-auto","sm:w-auto"],[1,"p-4"],[1,"text-2xl"],[1,"ml-2","text-xl","font-medium"],["body","","class","relative overflow-hidden h-[65vh] w-full sm:max-h-[65vh]",4,"ngIf"],[1,"w-full","border-t","border-base-200","flex","items-center","justify-center","p-2"],["btn","","matRipple","","mat-dialog-close","",1,"inverse","w-32"],["body","",1,"relative","overflow-hidden","h-[65vh]","w-full","sm:max-h-[65vh]"],[1,"pointer-events-none",3,"src","focus","features","options"],["diameter","64"],[1,"absolute","top-2","right-2","py-2","px-4","bg-base-100","rounded-3xl","shadow","border","border-base-200"]],template:function(i,s){1&i&&(m(0,"div",0)(1,"header",1)(2,"app-icon",2),C(3,"place"),_(),m(4,"h1",3),C(5),_()(),K(6,KYe,5,6,"div",4),m(7,"footer",5)(8,"button",6),C(9," Close "),_()()()),2&i&&(b(5),xe(" ",s.item.display_name||s.item.name," "),b(),S("ngIf",s.level))},styles:["[body][_ngcontent-%COMP%]{min-width:80vw!important}"]})}return t})();function XYe(t,n){if(1&t&&be(0,"img",8),2&t){const e=M().$implicit;S("source",e.url||e)}}function YYe(t,n){if(1&t&&(m(0,"div",6),K(1,XYe,1,1,"img",7),_()),2&t){const e=n.$implicit;Wn("transform","translateX(-"+100*M().offset+"%)"),b(),S("ngIf",e)}}function ZYe(t,n){1&t&&(m(0,"div",9)(1,"app-icon",10),C(2,"image_not_supported"),_(),m(3,"p"),C(4,"No images"),_()())}function QYe(t,n){if(1&t){const e=Le();m(0,"button",11),te("click",function(){re(e);const s=M();return oe(s.offset=s.offset-1)}),m(1,"app-icon",12),C(2,"chevron_left"),_()()}2&t&&S("disabled",0===M().offset)}function JYe(t,n){if(1&t){const e=Le();m(0,"button",13),te("click",function(){re(e);const s=M();return oe(s.offset=s.offset+1)}),m(1,"app-icon",12),C(2,"chevron_right"),_()()}if(2&t){const e=M();S("disabled",e.offset>=(null==e.images?null:e.images.length)-1)}}function eZe(t,n){if(1&t&&be(0,"button",16),2&t){const e=n.index;rt("!bg-base-100",M(2).offset===e)}}function tZe(t,n){if(1&t&&(m(0,"div",14),K(1,eZe,1,2,"button",15),_()),2&t){const e=M();b(),S("ngForOf",e.images)}}let ug=(()=>{class t{constructor(){this.images=[],this.offset=0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Qe({type:t,selectors:[["image-carousel"]],inputs:{images:"images"},decls:6,vars:5,consts:[[1,"h-full","w-full","relative","overflow-hidden","flex"],["image","","class","h-full min-w-full relative flex items-center justify-center overflow-hidden",3,"transform",4,"ngFor","ngForOf"],["class","h-full w-full relative flex flex-col items-center justify-center opacity-30 space-y-2",4,"ngIf"],["matRipple","","class","opacity-0 hover:opacity-30 flex items-center justify-center absolute left-0 inset-y-0 w-1/3 bg-neutral text-white",3,"disabled","click",4,"ngIf"],["matRipple","","class","opacity-0 hover:opacity-30 flex items-center justify-center absolute right-0 inset-y-0 w-1/3 bg-neutral text-white",3,"disabled","click",4,"ngIf"],["class","absolute bottom-1 left-1/2 -translate-x-1/2 text-sm opacity-30 space-x-2",4,"ngIf"],["image","",1,"h-full","min-w-full","relative","flex","items-center","justify-center","overflow-hidden"],["auth","","class","h-full object-contain",3,"source",4,"ngIf"],["auth","",1,"h-full","object-contain",3,"source"],[1,"h-full","w-full","relative","flex","flex-col","items-center","justify-center","opacity-30","space-y-2"],[1,"text-5xl"],["matRipple","",1,"opacity-0","hover:opacity-30","flex","items-center","justify-center","absolute","left-0","inset-y-0","w-1/3","bg-neutral","text-white",3,"click","disabled"],[1,"text-4xl"],["matRipple","",1,"opacity-0","hover:opacity-30","flex","items-center","justify-center","absolute","right-0","inset-y-0","w-1/3","bg-neutral","text-white",3,"click","disabled"],[1,"absolute","bottom-1","left-1/2","-translate-x-1/2","text-sm","opacity-30","space-x-2"],["matRipple","","class","h-4 w-4 rounded-full bg-base-300 shadow",3,"!bg-base-100",4,"ngFor","ngForOf"],["matRipple","",1,"h-4","w-4","rounded-full","bg-base-300","shadow"]],template:function(i,s){1&i&&(m(0,"div",0),K(1,YYe,2,3,"div",1)(2,ZYe,5,0,"div",2)(3,QYe,3,1,"button",3)(4,JYe,3,1,"button",4)(5,tZe,2,1,"div",5),_()),2&i&&(b(),S("ngForOf",s.images),b(),S("ngIf",!(null!=s.images&&s.images.length)),b(),S("ngIf",null==s.images?null:s.images.length),b(),S("ngIf",null==s.images?null:s.images.length),b(),S("ngIf",null==s.images?null:s.images.length))},styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%}[image][_ngcontent-%COMP%]{transition:transform .3s}"]})}return t})();const nZe=["years","months","weeks","days","hours","minutes","seconds"];function th(t,n){const e=rg(),i=n?.locale??e.locale??L5,s=n?.format??nZe,r=n?.zero??!1,o=n?.delimiter??" ";return i.formatDistance?s.reduce((l,c)=>{const u=`x${c.replace(/(^.)/,h=>h.toUpperCase())}`,d=t[c];return void 0!==d&&(r||t[c])?l.concat(i.formatDistance(u,d)):l},[]).join(o):""}let xce=(()=>{class t{transform(e,i=!1){let s=th({hours:Math.floor(e/60),minutes:e%60});return i&&(s=s.replace("hour","h").replace("minute","m").replace(/s/gi,"")),s}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275pipe=rr({name:"duration",type:t,pure:!0})}return t})(),Ece=(()=>{class t{constructor(e){this.json=e?.data||"",this._updateFormatting()}ngOnChanges(e){e.json&&this._updateFormatting()}_updateFormatting(){this.formatted_json=JSON.stringify(this.json,void 0,4)}static#e=this.\u0275fac=function(i){return new(i||t)(D(cg,8))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["json-display"]],inputs:{json:"json"},features:[On],decls:3,vars:1,consts:[[1,"bg-base-100","shadow","rounded","overflow-auto","max-w-[80vw]","max-h-[80vh]","p-2","border","border-base-300"],[1,"font-mono","text-sm","bg-base-200","p-2","rounded","break-all","w-full"]],template:function(i,s){1&i&&(m(0,"div",0)(1,"pre",1),C(2),_()()),2&i&&(b(2),vt(s.formatted_json))},styles:["pre[_ngcontent-%COMP%]{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}"]})}return t})();function sZe(t,n){if(1&t&&(sn(0),m(1,"a",25),ge(2,"sanitize"),C(3),_(),rn()),2&t){const e=M().$implicit;b(),S("href",Me(2,2,e),Ia),b(2),vt(e)}}function rZe(t,n){if(1&t&&(sn(0),C(1," ["),m(2,"span",26),C(3,"Object"),_(),C(4,"] "),rn()),2&t){const e=M().$implicit,i=M(4);b(2),S("content",i.json_tooltip)("data",e)("hover",!0)("backdrop",!1)}}function oZe(t,n){if(1&t&&(sn(0),C(1),rn()),2&t){const e=M().$implicit;b(),vt(e)}}function aZe(t,n){if(1&t&&(m(0,"div",21),sn(1,22),K(2,sZe,4,4,"ng-container",23)(3,rZe,5,4,"ng-container",23)(4,oZe,2,1,"ng-container",24),rn(),_()),2&t){const e=n.$implicit,i=M(4);$t("data-type",i.type(e)),b(),S("ngSwitch",i.type(e)),b(),S("ngSwitchCase","link"),b(),S("ngSwitchCase","object")}}function lZe(t,n){if(1&t&&(m(0,"div",18)(1,"div",19),C(2),ge(3,"date"),_(),m(4,"div"),C(5),_(),m(6,"div"),C(7),_(),K(8,aZe,5,4,"div",20),_()),2&t){const e=n.$implicit,i=M(3);b(2),xe(" ",Kt(3,8,e.timestamp,"MMM d HH:mm:ss")," "),b(2),bo("uppercase text-xs p-1 "+i.colors[e.type]+" rounded font-mono"),b(),xe(" ",e.type," "),b(),bo("capitalize text-xs p-1 "+i.colors[e.subtype]+" rounded font-mono w-16 text-center"),b(),xe(" ",e.subtype," "),b(),S("ngForOf",e.data)}}function cZe(t,n){if(1&t&&(m(0,"cdk-virtual-scroll-viewport",15),K(1,lZe,9,11,"div",16),ge(2,"async"),be(3,"div",17),_()),2&t){const e=M(2);b(),S("cdkVirtualForOf",Me(2,2,e.filtered_logs))("cdkVirtualForTrackBy",e.trackByFn)}}function uZe(t,n){if(1&t&&(m(0,"span",27),C(1),ge(2,"async"),_()),2&t){let e;const i=M(2);b(),xe(" ",(null==(e=Me(2,1,i.filtered_logs))?null:e.length)||"0"," of ")}}function dZe(t,n){if(1&t){const e=Le();m(0,"div",4)(1,"div",5)(2,"div",6),C(3,"Console"),_(),m(4,"button",7),te("click",function(){return re(e),oe(M().show=!1)}),m(5,"app-icon"),C(6,"close"),_()()(),K(7,cZe,4,4,"cdk-virtual-scroll-viewport",8),ge(8,"async"),m(9,"div",9),be(10,"div",10)(11,"div",11),m(12,"input",12,1),ge(14,"async"),te("ngModelChange",function(s){return re(e),oe(M().filter.next(s))}),_(),m(15,"div",13),K(16,uZe,3,3,"span",14),ge(17,"async"),C(18),ge(19,"async"),_()()()}if(2&t){let e,i,s;const r=M(),o=Gt(3);b(7),S("ngIf",null==(e=Me(8,5,r.filtered_logs))?null:e.length)("ngIfElse",o),b(5),S("ngModel",Me(14,7,r.filter)),b(4),S("ngIf",null==(i=Me(17,9,r.filter))?null:i.length),b(2),xe(" ",null==(s=Me(19,11,r.logs))?null:s.length," ")}}function hZe(t,n){if(1&t){const e=Le();m(0,"button",28),te("mousedown",function(){return re(e),oe(M().onStart())})("touchstart",function(){return re(e),oe(M().onStart())})("mouseup",function(){return re(e),oe(M().onEnd())})("touchend",function(){return re(e),oe(M().onEnd())}),_()}}function fZe(t,n){if(1&t&&(m(0,"div",29)(1,"div",30),C(2),_()()),2&t){const e=M();b(2),xe(" No ",e.filter.getValue()?"matching":""," logs ")}}const pZe={console:"bg-success-light text-black",network:"bg-success text-success-content",dom:"bg-warning-light text-black",log:"bg-info-light text-black",info:"bg-info text-info-content",warn:"bg-warning text-warning-content",debug:"bg-base-300 text-base-content",error:"bg-error text-error-content"},mZe=["tel:","mailto:","http:","https:","ftp:","ws:","wss:"];let xB=(()=>{class t extends bn{get can_activate(){return!!this._settings.get("app.debug_console")}constructor(e,i,s,r){super(),this._org=e,this._logs=i,this._hotkey=s,this._settings=r,this.show=!1,this.colors=pZe,this.json_tooltip=Ece,this.filter=new Mt(""),this.logs=new Mt([]),this.filtered_logs=Qt([this.filter,this.logs]).pipe(ze(([o,a])=>a.filter(l=>l.type.toLowerCase().includes(o.toLowerCase())||l.subtype.toLowerCase().includes(o.toLowerCase())||`${l.data}`.toLowerCase().includes(o.toLowerCase())))),this.onStart=()=>this.timeout("show",()=>this.show=!0,5e3),this.onEnd=()=>this.clearTimeout("show")}ngOnInit(){var e=this;return de(function*(){yield e._org.initialised.pipe(ds(i=>i)).toPromise(),e.subscription("binding",e._org.active_building.subscribe(()=>{console.log("Binding:",e._org.binding("remote_logger")),e._logs.setSystem(e._org.binding("remote_logger"))})),e.subscription("logs",e._logs.history.subscribe(i=>{let s=e.logs.getValue();s.length>(e._settings.get("app.log_limits")||2e4)&&s.splice(0,1),e.logs.next([...s,i])})),e.subscription("toggle",e._hotkey.listen(["Control","Backquote"],()=>e.show=!e.show)),console.log("Binding:",e._org.binding("remote_logger")),e._logs.setSystem(e._org.binding("remote_logger"))})()}type(e){return"string"==typeof e&&mZe.find(i=>e.startsWith(i))?"link":e instanceof Object?"object":"string"}trackByFn(e,i){return i?.timestamp}static#e=this.\u0275fac=function(i){return new(i||t)(D(In),D(RKe),D(rae),D(ln))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["debug-console"]],inputs:{show:"show"},features:[bt],decls:4,vars:2,consts:[["empty_state",""],["search_input",""],["class","absolute bottom-2 left-2 max-w-[80vw] w-[40rem] border border-base-300 bg-base-200 text-base-content shadow rounded overflow-hidden h-[24rem] max-h-[65vh] flex flex-col z-[998]",4,"ngIf"],["activation","","class","absolute bottom-0 right-0 h-12 w-12",3,"mousedown","touchstart","mouseup","touchend",4,"ngIf"],[1,"absolute","bottom-2","left-2","max-w-[80vw]","w-[40rem]","border","border-base-300","bg-base-200","text-base-content","shadow","rounded","overflow-hidden","h-[24rem]","max-h-[65vh]","flex","flex-col","z-[998]"],[1,"flex","items-center","justify-between","bg-base-100","border-b","border-base-300"],[1,"p-2"],["icon","","matRipple","",3,"click"],["itemSize","32","class","flex-1 h-[30rem] max-h-full w-full",4,"ngIf","ngIfElse"],[1,"absolute","bottom-1","right-1","rounded-lg","p-1","flex","items-center","w-[20rem]","overflow-hidden"],[1,"absolute","inset-0","bg-base-content","opacity-60","z-0"],[1,"absolute","inset-1","bg-base-content","opacity-90","rounded","z-0"],["name","log-filter","placeholder","Filter logs...",1,"relative","border-none","flex-1","text-sm","px-2","py-1","font-mono","rounded","text-base-100",3,"ngModelChange","ngModel"],[1,"relative","font-mono","text-xs","px-2","text-center","text-base-100"],["class","font-mono",4,"ngIf"],["itemSize","32",1,"flex-1","h-[30rem]","max-h-full","w-full"],["class","font-mono h-8 truncate p-2 text-sm flex items-center max-w-full hover:bg-base-100 space-x-1",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"h-8","w-full"],[1,"font-mono","h-8","truncate","p-2","text-sm","flex","items-center","max-w-full","hover:bg-base-100","space-x-1"],[1,"uppercase","text-xs","p-1","bg-base-100/10","rounded","font-mono"],["class","font-mono pl-1",4,"ngFor","ngForOf"],[1,"font-mono","pl-1"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["target","_blank","rel","noopener noreferer",1,"font-mono",3,"href"],["customTooltip","","xPosition","center","yPosition","bottom",1,"underline","font-mono","hover:text-info",3,"content","data","hover","backdrop"],[1,"font-mono"],["activation","",1,"absolute","bottom-0","right-0","h-12","w-12",3,"mousedown","touchstart","mouseup","touchend"],[1,"flex-1","flex","flex-col","items-center","justify-center","h-[30rem]","w-full"],[1,"text-2xl","opacity-30"]],template:function(i,s){1&i&&K(0,dZe,20,13,"div",2)(1,hZe,1,0,"button",3)(2,fZe,3,1,"ng-template",null,0,mn),2&i&&(S("ngIf",s.show),b(),S("ngIf",s.can_activate))}})}return t})();let dg={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function Tce(t){dg=t}const Ice=/[&<>"']/,_Ze=new RegExp(Ice.source,"g"),kce=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,gZe=new RegExp(kce.source,"g"),bZe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Dce=t=>bZe[t];function Ac(t,n){if(n){if(Ice.test(t))return t.replace(_Ze,Dce)}else if(kce.test(t))return t.replace(gZe,Dce);return t}const vZe=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,wZe=/(^|[^\[])\^/g;function er(t,n){let e="string"==typeof t?t:t.source;n=n||"";const i={replace:(s,r)=>{let o="string"==typeof r?r:r.source;return o=o.replace(wZe,"$1"),e=e.replace(s,o),i},getRegex:()=>new RegExp(e,n)};return i}function Mce(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const MC={exec:()=>null};function Ace(t,n){const i=t.replace(/\|/g,(r,o,a)=>{let l=!1,c=o;for(;--c>=0&&"\\"===a[c];)l=!l;return l?"|":" |"}).split(/ \|/);let s=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),n)if(i.length>n)i.splice(n);else for(;i.length<n;)i.push("");for(;s<i.length;s++)i[s]=i[s].trim().replace(/\\\|/g,"|");return i}function AC(t,n,e){const i=t.length;if(0===i)return"";let s=0;for(;s<i;){const r=t.charAt(i-s-1);if(r!==n||e){if(r===n||!e)break;s++}else s++}return t.slice(0,i-s)}function Oce(t,n,e,i){const s=n.href,r=n.title?Ac(n.title):null,o=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){i.state.inLink=!0;const a={type:"link",raw:e,href:s,title:r,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,a}return{type:"image",raw:e,href:s,title:r,text:Ac(o)}}class jM{options;rules;lexer;constructor(n){this.options=n||dg}space(n){const e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){const e=this.rules.block.code.exec(n);if(e){const i=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?i:AC(i,"\n")}}}fences(n){const e=this.rules.block.fences.exec(n);if(e){const i=e[0],s=function CZe(t,n){const e=t.match(/^(\s+)(?:```)/);if(null===e)return n;const i=e[1];return n.split("\n").map(s=>{const r=s.match(/^\s+/);if(null===r)return s;const[o]=r;return o.length>=i.length?s.slice(i.length):s}).join("\n")}(i,e[3]||"");return{type:"code",raw:i,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:s}}}heading(n){const e=this.rules.block.heading.exec(n);if(e){let i=e[2].trim();if(/#$/.test(i)){const s=AC(i,"#");(this.options.pedantic||!s||/ $/.test(s))&&(i=s.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(n){const e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:AC(e[0],"\n")}}blockquote(n){const e=this.rules.block.blockquote.exec(n);if(e){let i=AC(e[0],"\n").split("\n"),s="",r="";const o=[];for(;i.length>0;){let a=!1;const l=[];let c;for(c=0;c<i.length;c++)if(/^ {0,3}>/.test(i[c]))l.push(i[c]),a=!0;else{if(a)break;l.push(i[c])}i=i.slice(c);const u=l.join("\n"),d=u.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1").replace(/^ {0,3}>[ \t]?/gm,"");s=s?`${s}\n${u}`:u,r=r?`${r}\n${d}`:d;const h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,o,!0),this.lexer.state.top=h,0===i.length)break;const f=o[o.length-1];if("code"===f?.type)break;if("blockquote"===f?.type){const p=f,g=p.raw+"\n"+i.join("\n"),v=this.blockquote(g);o[o.length-1]=v,s=s.substring(0,s.length-p.raw.length)+v.raw,r=r.substring(0,r.length-p.text.length)+v.text;break}if("list"!==f?.type);else{const p=f,g=p.raw+"\n"+i.join("\n"),v=this.list(g);o[o.length-1]=v,s=s.substring(0,s.length-f.raw.length)+v.raw,r=r.substring(0,r.length-p.raw.length)+v.raw,i=g.substring(o[o.length-1].raw.length).split("\n")}}return{type:"blockquote",raw:s,tokens:o,text:r}}}list(n){let e=this.rules.block.list.exec(n);if(e){let i=e[1].trim();const s=i.length>1,r={type:"list",raw:"",ordered:s,start:s?+i.slice(0,-1):"",loose:!1,items:[]};i=s?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=s?i:"[*+-]");const o=new RegExp(`^( {0,3}${i})((?:[\t ][^\\n]*)?(?:\\n|$))`);let a=!1;for(;n;){let l=!1,c="",u="";if(!(e=o.exec(n))||this.rules.block.hr.test(n))break;c=e[0],n=n.substring(c.length);let d=e[2].split("\n",1)[0].replace(/^\t+/,y=>" ".repeat(3*y.length)),h=n.split("\n",1)[0],f=!d.trim(),p=0;if(this.options.pedantic?(p=2,u=d.trimStart()):f?p=e[1].length+1:(p=e[2].search(/[^ ]/),p=p>4?1:p,u=d.slice(p),p+=e[1].length),f&&/^ *$/.test(h)&&(c+=h+"\n",n=n.substring(h.length+1),l=!0),!l){const y=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),w=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),E=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),T=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;n;){const L=n.split("\n",1)[0];if(h=L,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),E.test(h)||T.test(h)||y.test(h)||w.test(n))break;if(h.search(/[^ ]/)>=p||!h.trim())u+="\n"+h.slice(p);else{if(f||d.search(/[^ ]/)>=4||E.test(d)||T.test(d)||w.test(d))break;u+="\n"+h}!f&&!h.trim()&&(f=!0),c+=L+"\n",n=n.substring(L.length+1),d=h.slice(p)}}r.loose||(a?r.loose=!0:/\n *\n *$/.test(c)&&(a=!0));let v,g=null;this.options.gfm&&(g=/^\[[ xX]\] /.exec(u),g&&(v="[ ] "!==g[0],u=u.replace(/^\[[ xX]\] +/,""))),r.items.push({type:"list_item",raw:c,task:!!g,checked:v,loose:!1,text:u,tokens:[]}),r.raw+=c}r.items[r.items.length-1].raw=r.items[r.items.length-1].raw.trimEnd(),r.items[r.items.length-1].text=r.items[r.items.length-1].text.trimEnd(),r.raw=r.raw.trimEnd();for(let l=0;l<r.items.length;l++)if(this.lexer.state.top=!1,r.items[l].tokens=this.lexer.blockTokens(r.items[l].text,[]),!r.loose){const c=r.items[l].tokens.filter(d=>"space"===d.type),u=c.length>0&&c.some(d=>/\n.*\n/.test(d.raw));r.loose=u}if(r.loose)for(let l=0;l<r.items.length;l++)r.items[l].loose=!0;return r}}html(n){const e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:"pre"===e[1]||"script"===e[1]||"style"===e[1],text:e[0]}}def(n){const e=this.rules.block.def.exec(n);if(e){const i=e[1].toLowerCase().replace(/\s+/g," "),s=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:i,raw:e[0],href:s,title:r}}}table(n){const e=this.rules.block.table.exec(n);if(!e||!/[:|]/.test(e[2]))return;const i=Ace(e[1]),s=e[2].replace(/^\||\| *$/g,"").split("|"),r=e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split("\n"):[],o={type:"table",raw:e[0],header:[],align:[],rows:[]};if(i.length===s.length){for(const a of s)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<i.length;a++)o.header.push({text:i[a],tokens:this.lexer.inline(i[a]),header:!0,align:o.align[a]});for(const a of r)o.rows.push(Ace(a,o.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[c]})));return o}}lheading(n){const e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){const e=this.rules.block.paragraph.exec(n);if(e){const i="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:i,tokens:this.lexer.inline(i)}}}text(n){const e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){const e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:Ac(e[1])}}tag(n){const e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){const e=this.rules.inline.link.exec(n);if(e){const i=e[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=AC(i.slice(0,-1),"\\");if((i.length-o.length)%2==0)return}else{const o=function SZe(t,n){if(-1===t.indexOf(n[1]))return-1;let e=0;for(let i=0;i<t.length;i++)if("\\"===t[i])i++;else if(t[i]===n[0])e++;else if(t[i]===n[1]&&(e--,e<0))return i;return-1}(e[2],"()");if(o>-1){const l=(0===e[0].indexOf("!")?5:4)+e[1].length+o;e[2]=e[2].substring(0,o),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let s=e[2],r="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);o&&(s=o[1],r=o[3])}else r=e[3]?e[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(i)?s.slice(1):s.slice(1,-1)),Oce(e,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer)}}reflink(n,e){let i;if((i=this.rules.inline.reflink.exec(n))||(i=this.rules.inline.nolink.exec(n))){const r=e[(i[2]||i[1]).replace(/\s+/g," ").toLowerCase()];if(!r){const o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return Oce(i,r,i[0],this.lexer)}}emStrong(n,e,i=""){let s=this.rules.inline.emStrongLDelim.exec(n);if(!(!s||s[3]&&i.match(/[\p{L}\p{N}]/u))&&(!s[1]&&!s[2]||!i||this.rules.inline.punctuation.exec(i))){const o=[...s[0]].length-1;let a,l,c=o,u=0;const d="*"===s[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,e=e.slice(-1*n.length+o);null!=(s=d.exec(e));){if(a=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!a)continue;if(l=[...a].length,s[3]||s[4]){c+=l;continue}if((s[5]||s[6])&&o%3&&!((o+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const h=[...s[0]][0].length,f=n.slice(0,o+s.index+h+l);if(Math.min(o,l)%2){const g=f.slice(1,-1);return{type:"em",raw:f,text:g,tokens:this.lexer.inlineTokens(g)}}const p=f.slice(2,-2);return{type:"strong",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(n){const e=this.rules.inline.code.exec(n);if(e){let i=e[2].replace(/\n/g," ");const s=/[^ ]/.test(i),r=/^ /.test(i)&&/ $/.test(i);return s&&r&&(i=i.substring(1,i.length-1)),i=Ac(i,!0),{type:"codespan",raw:e[0],text:i}}}br(n){const e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){const e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){const e=this.rules.inline.autolink.exec(n);if(e){let i,s;return"@"===e[2]?(i=Ac(e[1]),s="mailto:"+i):(i=Ac(e[1]),s=i),{type:"link",raw:e[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}url(n){let e;if(e=this.rules.inline.url.exec(n)){let i,s;if("@"===e[2])i=Ac(e[0]),s="mailto:"+i;else{let r;do{r=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??""}while(r!==e[0]);i=Ac(e[0]),s="www."===e[1]?"http://"+e[0]:e[0]}return{type:"link",raw:e[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(n){const e=this.rules.inline.text.exec(n);if(e){let i;return i=this.lexer.state.inRawBlock?e[0]:Ac(e[0]),{type:"text",raw:e[0],text:i}}}}const OC=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Nce=/(?:[*+-]|\d{1,9}[.)])/,Rce=er(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Nce).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),TB=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,IB=/(?!\s*\])(?:\\.|[^\[\]\\])+/,DZe=er(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",IB).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),MZe=er(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Nce).getRegex(),HM="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",kB=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,AZe=er("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",kB).replace("tag",HM).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Fce=er(TB).replace("hr",OC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",HM).getRegex(),DB={blockquote:er(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Fce).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:DZe,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:OC,html:AZe,lheading:Rce,list:MZe,newline:/^(?: *(?:\n|$))+/,paragraph:Fce,table:MC,text:/^[^\n]+/},Lce=er("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",OC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",HM).getRegex(),OZe={...DB,table:Lce,paragraph:er(TB).replace("hr",OC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Lce).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",HM).getRegex()},NZe={...DB,html:er("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",kB).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:MC,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:er(TB).replace("hr",OC).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Rce).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Pce=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,$ce=/^( {2,}|\\)\n(?!\s*$)/,NC="\\p{P}\\p{S}",LZe=er(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,NC).getRegex(),$Ze=er(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,NC).getRegex(),BZe=er("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,NC).getRegex(),VZe=er("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,NC).getRegex(),zZe=er(/\\([punct])/,"gu").replace(/punct/g,NC).getRegex(),UZe=er(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),GZe=er(kB).replace("(?:--\x3e|$)","--\x3e").getRegex(),jZe=er("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",GZe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),WM=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,HZe=er(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",WM).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Bce=er(/^!?\[(label)\]\[(ref)\]/).replace("label",WM).replace("ref",IB).getRegex(),Vce=er(/^!?\[(ref)\](?:\[\])?/).replace("ref",IB).getRegex(),MB={_backpedal:MC,anyPunctuation:zZe,autolink:UZe,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:$ce,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:MC,emStrongLDelim:$Ze,emStrongRDelimAst:BZe,emStrongRDelimUnd:VZe,escape:Pce,link:HZe,nolink:Vce,punctuation:LZe,reflink:Bce,reflinkSearch:er("reflink|nolink(?!\\()","g").replace("reflink",Bce).replace("nolink",Vce).getRegex(),tag:jZe,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:MC},qZe={...MB,link:er(/^!?\[(label)\]\((.*?)\)/).replace("label",WM).getRegex(),reflink:er(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",WM).getRegex()},AB={...MB,escape:er(Pce).replace("])","~|])").getRegex(),url:er(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},KZe={...AB,br:er($ce).replace("{2,}","*").getRegex(),text:er(AB.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},qM={normal:DB,gfm:OZe,pedantic:NZe},RC={normal:MB,gfm:AB,breaks:KZe,pedantic:qZe};class nh{tokens;options;state;tokenizer;inlineQueue;constructor(n){this.tokens=[],this.tokens.links=Object.create(null),this.options=n||dg,this.options.tokenizer=this.options.tokenizer||new jM,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:qM.normal,inline:RC.normal};this.options.pedantic?(e.block=qM.pedantic,e.inline=RC.pedantic):this.options.gfm&&(e.block=qM.gfm,e.inline=this.options.breaks?RC.breaks:RC.gfm),this.tokenizer.rules=e}static get rules(){return{block:qM,inline:RC}}static lex(n,e){return new nh(e).lex(n)}static lexInline(n,e){return new nh(e).inlineTokens(n)}lex(n){n=n.replace(/\r\n|\r/g,"\n"),this.blockTokens(n,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const i=this.inlineQueue[e];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(n,e=[],i=!1){let s,r,o;for(n=this.options.pedantic?n.replace(/\t/g,"    ").replace(/^ +$/gm,""):n.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));n;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(s=a.call({lexer:this},n,e))&&(n=n.substring(s.raw.length),e.push(s),!0)))){if(s=this.tokenizer.space(n)){n=n.substring(s.raw.length),1===s.raw.length&&e.length>0?e[e.length-1].raw+="\n":e.push(s);continue}if(s=this.tokenizer.code(n)){n=n.substring(s.raw.length),r=e[e.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?e.push(s):(r.raw+="\n"+s.raw,r.text+="\n"+s.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(s=this.tokenizer.fences(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.heading(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.hr(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.blockquote(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.list(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.html(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.def(n)){n=n.substring(s.raw.length),r=e[e.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title}):(r.raw+="\n"+s.raw,r.text+="\n"+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(s=this.tokenizer.table(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.lheading(n)){n=n.substring(s.raw.length),e.push(s);continue}if(o=n,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=n.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},l),"number"==typeof c&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(o=n.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(o))){r=e[e.length-1],i&&"paragraph"===r?.type?(r.raw+="\n"+s.raw,r.text+="\n"+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(s),i=o.length!==n.length,n=n.substring(s.raw.length);continue}if(s=this.tokenizer.text(n)){n=n.substring(s.raw.length),r=e[e.length-1],r&&"text"===r.type?(r.raw+="\n"+s.raw,r.text+="\n"+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(s);continue}if(n){const a="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,e}inline(n,e=[]){return this.inlineQueue.push({src:n,tokens:e}),e}inlineTokens(n,e=[]){let i,s,r,a,l,c,o=n;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(o));)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(o));)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.anyPunctuation.exec(o));)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;n;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>!!(i=u.call({lexer:this},n,e))&&(n=n.substring(i.raw.length),e.push(i),!0)))){if(i=this.tokenizer.escape(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.tag(n)){n=n.substring(i.raw.length),s=e[e.length-1],s&&"text"===i.type&&"text"===s.type?(s.raw+=i.raw,s.text+=i.text):e.push(i);continue}if(i=this.tokenizer.link(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.reflink(n,this.tokens.links)){n=n.substring(i.raw.length),s=e[e.length-1],s&&"text"===i.type&&"text"===s.type?(s.raw+=i.raw,s.text+=i.text):e.push(i);continue}if(i=this.tokenizer.emStrong(n,o,c)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.codespan(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.br(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.del(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.autolink(n)){n=n.substring(i.raw.length),e.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(n))){n=n.substring(i.raw.length),e.push(i);continue}if(r=n,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const d=n.slice(1);let h;this.options.extensions.startInline.forEach(f=>{h=f.call({lexer:this},d),"number"==typeof h&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(r=n.substring(0,u+1))}if(i=this.tokenizer.inlineText(r)){n=n.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(c=i.raw.slice(-1)),l=!0,s=e[e.length-1],s&&"text"===s.type?(s.raw+=i.raw,s.text+=i.text):e.push(i);continue}if(n){const u="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(u);break}throw new Error(u)}}return e}}class KM{options;parser;constructor(n){this.options=n||dg}space(n){return""}code({text:n,lang:e,escaped:i}){const s=(e||"").match(/^\S*/)?.[0],r=n.replace(/\n$/,"")+"\n";return s?'<pre><code class="language-'+Ac(s)+'">'+(i?r:Ac(r,!0))+"</code></pre>\n":"<pre><code>"+(i?r:Ac(r,!0))+"</code></pre>\n"}blockquote({tokens:n}){return`<blockquote>\n${this.parser.parse(n)}</blockquote>\n`}html({text:n}){return n}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>\n`}hr(n){return"<hr>\n"}list(n){const e=n.ordered,i=n.start;let s="";for(let a=0;a<n.items.length;a++)s+=this.listitem(n.items[a]);const r=e?"ol":"ul";return"<"+r+(e&&1!==i?' start="'+i+'"':"")+">\n"+s+"</"+r+">\n"}listitem(n){let e="";if(n.task){const i=this.checkbox({checked:!!n.checked});n.loose?n.tokens.length>0&&"paragraph"===n.tokens[0].type?(n.tokens[0].text=i+" "+n.tokens[0].text,n.tokens[0].tokens&&n.tokens[0].tokens.length>0&&"text"===n.tokens[0].tokens[0].type&&(n.tokens[0].tokens[0].text=i+" "+n.tokens[0].tokens[0].text)):n.tokens.unshift({type:"text",raw:i+" ",text:i+" "}):e+=i+" "}return e+=this.parser.parse(n.tokens,!!n.loose),`<li>${e}</li>\n`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>\n`}table(n){let e="",i="";for(let r=0;r<n.header.length;r++)i+=this.tablecell(n.header[r]);e+=this.tablerow({text:i});let s="";for(let r=0;r<n.rows.length;r++){const o=n.rows[r];i="";for(let a=0;a<o.length;a++)i+=this.tablecell(o[a]);s+=this.tablerow({text:i})}return s&&(s=`<tbody>${s}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+s+"</table>\n"}tablerow({text:n}){return`<tr>\n${n}</tr>\n`}tablecell(n){const e=this.parser.parseInline(n.tokens),i=n.header?"th":"td";return(n.align?`<${i} align="${n.align}">`:`<${i}>`)+e+`</${i}>\n`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${n}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:i}){const s=this.parser.parseInline(i),r=Mce(n);if(null===r)return s;let o='<a href="'+(n=r)+'"';return e&&(o+=' title="'+e+'"'),o+=">"+s+"</a>",o}image({href:n,title:e,text:i}){const s=Mce(n);if(null===s)return i;let r=`<img src="${n=s}" alt="${i}"`;return e&&(r+=` title="${e}"`),r+=">",r}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):n.text}}class OB{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}}class ih{options;renderer;textRenderer;constructor(n){this.options=n||dg,this.options.renderer=this.options.renderer||new KM,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new OB}static parse(n,e){return new ih(e).parse(n)}static parseInline(n,e){return new ih(e).parseInline(n)}parse(n,e=!0){let i="";for(let s=0;s<n.length;s++){const r=n[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const a=r,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(!1!==l||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){i+=l||"";continue}}const o=r;switch(o.type){case"space":i+=this.renderer.space(o);continue;case"hr":i+=this.renderer.hr(o);continue;case"heading":i+=this.renderer.heading(o);continue;case"code":i+=this.renderer.code(o);continue;case"table":i+=this.renderer.table(o);continue;case"blockquote":i+=this.renderer.blockquote(o);continue;case"list":i+=this.renderer.list(o);continue;case"html":i+=this.renderer.html(o);continue;case"paragraph":i+=this.renderer.paragraph(o);continue;case"text":{let a=o,l=this.renderer.text(a);for(;s+1<n.length&&"text"===n[s+1].type;)a=n[++s],l+="\n"+this.renderer.text(a);i+=e?this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l}]}):l;continue}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}parseInline(n,e){e=e||this.renderer;let i="";for(let s=0;s<n.length;s++){const r=n[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const a=this.options.extensions.renderers[r.type].call({parser:this},r);if(!1!==a||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){i+=a||"";continue}}const o=r;switch(o.type){case"escape":case"text":i+=e.text(o);break;case"html":i+=e.html(o);break;case"link":i+=e.link(o);break;case"image":i+=e.image(o);break;case"strong":i+=e.strong(o);break;case"em":i+=e.em(o);break;case"codespan":i+=e.codespan(o);break;case"br":i+=e.br(o);break;case"del":i+=e.del(o);break;default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}}class XM{options;constructor(n){this.options=n||dg}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}}const hg=new class XZe{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#t(nh.lex,ih.parse);parseInline=this.#t(nh.lexInline,ih.parseInline);Parser=ih;Renderer=KM;TextRenderer=OB;Lexer=nh;Tokenizer=jM;Hooks=XM;constructor(...n){this.use(...n)}walkTokens(n,e){let i=[];for(const s of n)switch(i=i.concat(e.call(this,s)),s.type){case"table":{const r=s;for(const o of r.header)i=i.concat(this.walkTokens(o.tokens,e));for(const o of r.rows)for(const a of o)i=i.concat(this.walkTokens(a.tokens,e));break}case"list":i=i.concat(this.walkTokens(s.items,e));break;default:{const r=s;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(o=>{const a=r[o].flat(1/0);i=i.concat(this.walkTokens(a,e))}):r.tokens&&(i=i.concat(this.walkTokens(r.tokens,e)))}}return i}use(...n){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(i=>{const s={...i};if(s.async=this.defaults.async||s.async||!1,i.extensions&&(i.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const o=e.renderers[r.name];e.renderers[r.name]=o?function(...a){let l=r.renderer.apply(this,a);return!1===l&&(l=o.apply(this,a)),l}:r.renderer}if("tokenizer"in r){if(!r.level||"block"!==r.level&&"inline"!==r.level)throw new Error("extension level must be 'block' or 'inline'");const o=e[r.level];o?o.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&("block"===r.level?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:"inline"===r.level&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),s.extensions=e),i.renderer){const r=this.defaults.renderer||new KM(this.defaults);for(const o in i.renderer){if(!(o in r))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;const a=o;let l=i.renderer[a];const c=r[a];r[a]=(...u)=>{i.useNewRenderer||(l=this.#e(l,a,r));let d=l.apply(r,u);return!1===d&&(d=c.apply(r,u)),d||""}}s.renderer=r}if(i.tokenizer){const r=this.defaults.tokenizer||new jM(this.defaults);for(const o in i.tokenizer){if(!(o in r))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const l=i.tokenizer[o],c=r[o];r[o]=(...u)=>{let d=l.apply(r,u);return!1===d&&(d=c.apply(r,u)),d}}s.tokenizer=r}if(i.hooks){const r=this.defaults.hooks||new XM;for(const o in i.hooks){if(!(o in r))throw new Error(`hook '${o}' does not exist`);if("options"===o)continue;const l=i.hooks[o],c=r[o];r[o]=XM.passThroughHooks.has(o)?u=>{if(this.defaults.async)return Promise.resolve(l.call(r,u)).then(h=>c.call(r,h));const d=l.call(r,u);return c.call(r,d)}:(...u)=>{let d=l.apply(r,u);return!1===d&&(d=c.apply(r,u)),d}}s.hooks=r}if(i.walkTokens){const r=this.defaults.walkTokens,o=i.walkTokens;s.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),r&&(l=l.concat(r.call(this,a))),l}}this.defaults={...this.defaults,...s}}),this}#e(n,e,i){switch(e){case"heading":return function(s){return s.type&&s.type===e?n.call(this,i.parser.parseInline(s.tokens),s.depth,function yZe(t){return t.replace(vZe,(n,e)=>"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):"")}(i.parser.parseInline(s.tokens,i.parser.textRenderer))):n.apply(this,arguments)};case"code":return function(s){return s.type&&s.type===e?n.call(this,s.text,s.lang,!!s.escaped):n.apply(this,arguments)};case"table":return function(s){if(!s.type||s.type!==e)return n.apply(this,arguments);let r="",o="";for(let l=0;l<s.header.length;l++)o+=this.tablecell({text:s.header[l].text,tokens:s.header[l].tokens,header:!0,align:s.align[l]});r+=this.tablerow({text:o});let a="";for(let l=0;l<s.rows.length;l++){const c=s.rows[l];o="";for(let u=0;u<c.length;u++)o+=this.tablecell({text:c[u].text,tokens:c[u].tokens,header:!1,align:s.align[u]});a+=this.tablerow({text:o})}return n.call(this,r,a)};case"blockquote":return function(s){if(!s.type||s.type!==e)return n.apply(this,arguments);const r=this.parser.parse(s.tokens);return n.call(this,r)};case"list":return function(s){if(!s.type||s.type!==e)return n.apply(this,arguments);const r=s.ordered,o=s.start,a=s.loose;let l="";for(let c=0;c<s.items.length;c++){const u=s.items[c],d=u.checked,h=u.task;let f="";if(u.task){const p=this.checkbox({checked:!!d});a?u.tokens.length>0&&"paragraph"===u.tokens[0].type?(u.tokens[0].text=p+" "+u.tokens[0].text,u.tokens[0].tokens&&u.tokens[0].tokens.length>0&&"text"===u.tokens[0].tokens[0].type&&(u.tokens[0].tokens[0].text=p+" "+u.tokens[0].tokens[0].text)):u.tokens.unshift({type:"text",text:p+" "}):f+=p+" "}f+=this.parser.parse(u.tokens,a),l+=this.listitem({type:"list_item",raw:f,text:f,task:h,checked:!!d,loose:a,tokens:u.tokens})}return n.call(this,l,r,o)};case"html":return function(s){return s.type&&s.type===e?n.call(this,s.text,s.block):n.apply(this,arguments)};case"paragraph":case"strong":case"em":case"del":return function(s){return s.type&&s.type===e?n.call(this,this.parser.parseInline(s.tokens)):n.apply(this,arguments)};case"escape":case"codespan":case"text":return function(s){return s.type&&s.type===e?n.call(this,s.text):n.apply(this,arguments)};case"link":return function(s){return s.type&&s.type===e?n.call(this,s.href,s.title,this.parser.parseInline(s.tokens)):n.apply(this,arguments)};case"image":return function(s){return s.type&&s.type===e?n.call(this,s.href,s.title,s.text):n.apply(this,arguments)}}return n}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,e){return nh.lex(n,e??this.defaults)}parser(n,e){return ih.parse(n,e??this.defaults)}#t(n,e){return(i,s)=>{const r={...s},o={...this.defaults,...r};!0===this.defaults.async&&!1===r.async&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const a=this.#n(!!o.silent,!!o.async);if(typeof i>"u"||null===i)return a(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof i)return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(i):i).then(l=>n(l,o)).then(l=>o.hooks?o.hooks.processAllTokens(l):l).then(l=>o.walkTokens?Promise.all(this.walkTokens(l,o.walkTokens)).then(()=>l):l).then(l=>e(l,o)).then(l=>o.hooks?o.hooks.postprocess(l):l).catch(a);try{o.hooks&&(i=o.hooks.preprocess(i));let l=n(i,o);o.hooks&&(l=o.hooks.processAllTokens(l)),o.walkTokens&&this.walkTokens(l,o.walkTokens);let c=e(l,o);return o.hooks&&(c=o.hooks.postprocess(c)),c}catch(l){return a(l)}}}#n(n,e){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",n){const s="<p>An error occurred:</p><pre>"+Ac(i.message+"",!0)+"</pre>";return e?Promise.resolve(s):s}if(e)return Promise.reject(i);throw i}}};function Ls(t,n){return hg.parse(t,n)}Ls.options=Ls.setOptions=function(t){return hg.setOptions(t),Tce(Ls.defaults=hg.defaults),Ls},Ls.getDefaults=function EB(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},Ls.defaults=dg,Ls.use=function(...t){return hg.use(...t),Tce(Ls.defaults=hg.defaults),Ls},Ls.walkTokens=function(t,n){return hg.walkTokens(t,n)},Ls.parseInline=hg.parseInline,Ls.Parser=ih,Ls.parser=ih.parse,Ls.Renderer=KM,Ls.TextRenderer=OB,Ls.Lexer=nh,Ls.lexer=nh.lex,Ls.Tokenizer=jM,Ls.Hooks=XM,Ls.parse=Ls;const zce=Ls;function YZe(t,n){1&t&&(be(0,"main",4),ge(1,"safe")),2&t&&S("innerHTML",Kt(1,1,M().changelog,"html"),Zc)}function ZZe(t,n){1&t&&(m(0,"div",5)(1,"app-icon",6),C(2,"close"),_(),m(3,"div",7),C(4,"No changelog"),_()())}let Uce=(()=>{class t{constructor(e){this._data=e}get changelog(){return Ls(this._data.changelog||"",{async:!1})}static#e=this.\u0275fac=function(i){return new(i||t)(D(Js))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["changelog-modal"]],decls:9,vars:2,consts:[["empty_state",""],["mat-dialog-title",""],["icon","","mat-dialog-close",""],["class","p-4 markdown max-h-[65vh] max-w-[80vw] overflow-auto",3,"innerHTML",4,"ngIf","ngIfElse"],[1,"p-4","markdown","max-h-[65vh]","max-w-[80vw]","overflow-auto",3,"innerHTML"],[1,"flex","items-center","justify-center","flex-col","space-y-2"],[1,"text-3xl"],[1,"text"]],template:function(i,s){if(1&i&&(m(0,"header")(1,"h3",1),C(2,"Changelog"),_(),m(3,"button",2)(4,"app-icon"),C(5,"close"),_()()(),K(6,YZe,2,4,"main",3)(7,ZZe,5,0,"ng-template",null,0,mn)),2&i){const r=Gt(8);b(6),S("ngIf",s.changelog)("ngIfElse",r)}},dependencies:[Ot,Ms,I8,zt,uC]})}return t})(),FC=(()=>{class t{constructor(e){this._org=e}transform(e){return this._org.buildings.find(i=>e instanceof Array?e.includes(i.id):i.id===e)}static#e=this.\u0275fac=function(i){return new(i||t)(D(In,16))};static#t=this.\u0275pipe=rr({name:"building",type:t,pure:!0})}return t})();class eQe{constructor(n,e){this.keySelector=n,this.flushes=e}call(n,e){return e.subscribe(new tQe(n,this.keySelector,this.flushes))}}class tQe extends ap{constructor(n,e,i){super(n),this.keySelector=e,this.values=new Set,i&&this.add(lp(i,new op(this)))}notifyNext(){this.values.clear()}notifyError(n){this._error(n)}_next(n){this.keySelector?this._useKeySelector(n):this._finalizeNext(n,n)}_useKeySelector(n){let e;const{destination:i}=this;try{e=this.keySelector(n)}catch(s){return void i.error(s)}this._finalizeNext(e,n)}_finalizeNext(n,e){const{values:i}=this;i.has(n)||(i.add(n),this.destination.next(e))}}function sh(){return(sh=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t}).apply(this,arguments)}function Gce(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}function Oy(t,n){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=function(s,r){if(s){if("string"==typeof s)return Gce(s,void 0);var o=Object.prototype.toString.call(s).slice(8,-1);return"Object"===o&&s.constructor&&(o=s.constructor.name),"Map"===o||"Set"===o?Array.from(s):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Gce(s,void 0):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var LC={},Lp={};function fg(t,n,e){if(void 0===e&&(e=300),!(t&&n&&n instanceof Function))throw new Error(t?"Cannot create named timeout without a name":"Cannot create a timeout without a callback");jce(t),LC[t]=setTimeout(function(){n(),delete LC[t]},e)}function jce(t){LC[t]&&(clearTimeout(LC[t]),delete LC[t])}function Hce(t,n){Wce(t),Lp[t]=n}function Wce(t){Lp&&Lp[t]&&(Lp[t]instanceof Tn?Lp[t].unsubscribe():Lp[t](),delete Lp[t])}function dd(t,n,e,i,s,r){if(void 0===i&&(i="debug"),void 0===s&&(s=!1),void 0===r&&(r="SVG VIEWER"),window.debug||s){var o,a,l=["color: #E91E63","color: #ffb300","color: default"];e?(o=console)[i].apply(o,["%c["+r+"]%c["+t+"] %c"+n].concat(l,[e])):(a=console)[i].apply(a,["%c["+r+"]%c["+t+"] %c"+n].concat(l))}}function NB(t){for(var n,e=t.replace(/[!"#$%&'()*+,.\/;<=>?@[\\\]^`{|}~]/g,"\\$&").split(" "),i=Oy(e);!(n=i()).done;){var s=n.value;e.splice(e.indexOf(s),1,[s.replace(/^\\/g,"")])}return e.join(" ")}function PC(t){return t?t instanceof MouseEvent?{x:t.clientX,y:t.clientY}:t.touches&&t.touches.length>0?{x:t.touches[0].clientX,y:t.touches[0].clientY}:{x:-1,y:-1}:{x:-1,y:-1}}function YM(t,n,e,i){var s,r;void 0===i&&(i=1);var o=null==(s=t.element)?void 0:s.querySelector(".svg-viewer__svg-overlays");if(null!=(r=t.element)&&r.querySelector("svg")&&o){var a=e||o?.getBoundingClientRect()||{};return{x:Math.max(0,Math.min(1,(n.x-a.left)/a.width*i)),y:Math.max(0,Math.min(1,(n.y-a.top)/a.height*i))}}return dd("DOM","Unable to find SVG element",void 0,"warn"),{x:-1,y:-1}}function qce(t,n){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function Kce(t,n,e){return{x:t.x+(n.x-t.x)*e,y:t.y+(n.y-t.y)*e}}function iQe(t){if(!t)return"";var n=sh({},t);for(var e in n)n[e]instanceof Object&&(n[e]=""+n[e]);return n}function ZM(t){return t<26?t+65:t<52?t+71:t<62?t-4:62===t?43:63===t?47:65}var QM={top:0,left:0,bottom:0,right:0,height:0,width:0},JM=function(){function t(n){var e,i,s,r,o,a,l;if(this.id=n.id||"map-"+Math.floor(999999*Math.random()),this.url=n.url||"local-"+co.hashAsciiStr(n.svg_data||""),this.element=n.element||null,this.labels=n.labels||[],this.features=n.features||[],this.actions=n.actions||[],this.styles=n.styles||{},this.svg_data=n.svg_data||"",this.content_ratio=n.content_ratio||{x:1,y:1},this.zoom=n.zoom||1,this.center={x:null!=(e=null==(i=n.center)?void 0:i.x)?e:.5,y:null!=(s=null==(r=n.center)?void 0:r.y)?s:.5},this.rotate=n.rotate||0,this.ratio=n.ratio||1,this.svg_ratio=n.svg_ratio||1,this.max_resolution=n.max_resolution||window.innerWidth*window.innerHeight*10,this.focus=n.focus||null,this.options=n.options||{},this.mappings=n.mappings||{},this.box={top:(n.box||QM).top,left:(n.box||QM).left,height:(n.box||QM).height,width:(n.box||QM).width},this.desired_zoom=n.desired_zoom||n.zoom||this.zoom,this.desired_center={x:(null==(o=n.desired_center)?void 0:o.x)||this.center.x,y:(null==(a=n.desired_center)?void 0:a.y)||this.center.y},this.updated_count=(n.updated_count||0)+1,this.zoom!==this.desired_zoom){var c=this.desired_zoom-this.zoom>=0?1:-1,u=Math.min(.05,Math.abs(this.desired_zoom-this.zoom)),d=Math.round(u/Math.abs(this.desired_zoom-this.zoom)*1e3)/1e3;this.zoom=.05===u?this.zoom+c*u:this.desired_zoom,this.center={x:this.center.x+(this.desired_center.x-this.center.x)*d,y:this.center.y+(this.desired_center.y-this.center.y)*d}}else if(this.desired_center.x!==this.center.x||this.desired_center.y!==this.center.y){var h=this.desired_center.x-this.center.x>=0?1:-1,f=this.desired_center.y-this.center.y>=0?1:-1,p=Math.min(.01,Math.abs(this.desired_center.x-this.center.x)),g=p/Math.abs(this.desired_center.x-this.center.x)*Math.abs(this.desired_center.y-this.center.y);this.center={x:this.center.x+h*p,y:this.center.y+f*g}}this.needs_update=this.desired_zoom!==this.zoom||this.desired_center.x!==this.center.x||this.desired_center.y!==this.center.y,this.use_gpu=null==(l=n?.use_gpu)||l}return t.prototype.contains=function(n){this.svg_data.includes('id="'+n+'"')},t}(),Ny=new Mt([]),Xce=new Pt,sQe=Xce.pipe(an(function(t){return"resize"===t}));function uu(t){return Ny.getValue().find(function(n){return n.id===t})}function mf(t,n){var e=$C();if(!((t=e.find(function(s){return s.id===(t instanceof JM?t.id:t)}))instanceof JM))return null;delete n.url;var i=new JM(sh({},t,n));return Zce(i),i.needs_update&&fg(t.id+"_updating",function(){return mf(i,{})},16),i}function Yce(t){return Ny.pipe(an(function(n){return!!n.find(function(e){return e.id===t})}),ze(function(n){return n.find(function(e){return e.id===t})}),function JZe(t,n){return e=>e.lift(new eQe(t,n))}())}function Zce(t){var n=$C().filter(function(e){return e.id!==t.id});n.push(t),Ny.next(n)}function $C(){return Ny.getValue()}var BC,Ry,eA,Pp,Fy,du,Ly,Qce=new Mt({}),Jce={},VC=!1,tA=!1,rQe=["click","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","mousewheel","wheel"],oQe=["mousedown","mousemove","mousewheel","wheel","touchstart","touchmove"],eue=!1;function tue(t,n,e){if(void 0===e&&(e=BC),!VC){tA=!0;var i=uu(t);if(i){var s=PC(n),r={x:Math.max(0,Math.min(1,(s.x-e.x)/i.box.width/i.desired_zoom/i.svg_ratio+i.center.x)),y:Math.max(0,Math.min(1,(s.y-e.y)/i.box.height/i.desired_zoom/i.svg_ratio+i.center.y))};BC=s,mf(i,{center:r,desired_center:r})}}}function zC(){dd("INPUT","Ending pinch/pan..."),jce("pan_start"),VC=!1,tA=!1,Pp&&window.removeEventListener("mousemove",Pp),Fy&&window.removeEventListener("mouseup",Fy),du&&window.removeEventListener("touchmove",du),Ly&&window.removeEventListener("touchend",Ly),Pp=Fy=du=Ly=Ry=null}window.addEventListener("blur",function(){return zC()});var nue=function(t){try{return Promise.resolve(new Promise(function(n){jC[t.id]||(jC[t.id]=[]),jC[t.id].push(n),fg("resize-"+t.id,function(){var e=t.element;if(!e)throw new Error("No element set on viewer");var i=e.querySelector(".svg-viewer__view-container"),s=e.querySelector(".svg-viewer__svg-overlays"),r=e.querySelector("#"+t.id),o=e.querySelector(".svg-viewer"),a=e.querySelector(".svg-viewer__svg-output"),l=e.querySelector("iframe"),c=o?.getBoundingClientRect()||{},u=i?.getBoundingClientRect()||{};if(!(s&&a&&l&&i))throw new Error("Viewer elements not ready yet.");requestAnimationFrame(function(){try{var d,h,f=c.height/c.width,p=(null==(d=a.firstElementChild)||null==(h=d.viewBox)?void 0:h.baseVal)||{},g=p.height/p.width;a.firstElementChild&&(a.firstElementChild.style.width="200%");var v=(c.width-32)*Math.min(1,f/g),y={width:v,height:v*g};s.style.width=p.width+"px",s.style.height=p.height+"px",i.style.width=p.width+"px",i.style.height=p.height+"px",l.style.width=p.width+"px",l.style.height=p.height+"px",l.width=""+p.width,l.height=""+p.height;var w=Math.min(c.height/p.height,c.width/p.width),E=r?.getBoundingClientRect(),T=s?.getBoundingClientRect(),L={x:1,y:1};E&&T&&(L={x:T.width*w*.975/E.width,y:T.height*w*.975/E.height}),GC[t.id]="";var W=mf(t,{ratio:y.height/y.width,svg_ratio:w,box:u,content_ratio:L});return W?(t=W,Promise.resolve(sue(t).catch(function(H){return console.warn(H),!1})).then(function(H){H&&(jC[t.id].forEach(function(P){return P()}),jC[t.id]=[])})):Promise.resolve()}catch(H){return Promise.reject(H)}})},100)}))}catch(n){return Promise.reject(n)}},UC={},iue={},RB={},FB={},LB={},GC={},jC={};function sue(t){return UC[t.id]||(UC[t.id]=new Promise(function(n){var e=requestAnimationFrame(function(){if(UC[t.id]){var i=t.element;if(!i)throw new Error("No element set on viewer");var s=i.querySelector("style"),r="",o=i.querySelector(".svg-viewer__render-container"),a="scale("+t.zoom*t.svg_ratio+")";if(!o||!s)throw new Error("Viewer is not setup yet.");var l=100*t.zoom*t.svg_ratio*(t.center.x-.5),c=100*t.zoom*t.svg_ratio*(t.center.y-.5);o.style.transform=(t.use_gpu?"translate3d("+l+"%, "+c+"%, 0)":"translate("+l+"%, "+c+"%)")+" "+a+" rotate("+t.rotate+"deg)",r+="#"+t.id+' .svg-viewer__svg-overlay-item > *:not([no-scale="true"]) { transform: rotate(-'+t.rotate+"deg) scale("+1/t.zoom*(1/t.svg_ratio)+"); }",s.innerHTML=r+="#"+t.id+" .svg-viewer__svg-overlay-item > * { transform: rotate(-"+t.rotate+"deg); height: 100%; width: 100%; }",function u(d){try{if((JSON.stringify(sh({},d.styles))||"").localeCompare(GC[d.id])){var h=d.element;if(!h)throw new Error("No element set on viewer");var f=h.querySelector(".svg-viewer__iframe");if(!f)throw new Error("No iframe created for viewer");if(!f.contentWindow)return f.onload=function(){setTimeout(function(){return u(d)},50),setTimeout(function(){return u(d)},500)},Promise.resolve();var p={};p["[empty"+Math.floor(999999*Math.random())+"]"]={};var g=rue(sh({},d.styles,p));f.contentWindow.postMessage(JSON.stringify({id:"svg-styles",content:g}),"*")}return Promise.resolve()}catch(v){return Promise.reject(v)}}(t),function(u){var d=JSON.stringify(u.focus);if(u.focus&&d!==Jce[u.id]){var h,f=Math.max(.5,Math.min(10,u.focus.zoom_level||1));h="string"==typeof u.focus.location?function nQe(t,n,e){var i,s,r=null==(i=t.element)?void 0:i.querySelector(".svg-viewer__svg-overlays"),o=null==(s=t.element)?void 0:s.querySelector("svg"),a=o?.querySelector("#"+NB(n));if(a&&o&&r){var l=e||r?.getBoundingClientRect()||{},c=a?.getBoundingClientRect()||{};return{x:(c.left+c.width/2-l.left)/l.width,y:(c.top+c.height/2-l.top)/l.height}}return dd("DOM","Unable to find element with ID "+n,void 0,"warn"),{x:-1,y:-1}}(u,u.focus.location):u.focus.location,Jce[u.id]=d;var p={x:1-h.x,y:1-h.y};mf(u,{center:p,desired_center:p,zoom:f,desired_zoom:f})}}(t),PB(t),delete UC[t.id],cancelAnimationFrame(e),n()}})})),UC[t.id]}function PB(t){var n,e,i=null==(n=t.element)?void 0:n.querySelector("svg");if(Object.keys(t.mappings||{}).length){var s=null==(e=t.element)?void 0:e.querySelector(".svg-viewer__svg-overlays");if(s&&i){if(!s.getBoundingClientRect().width)return fg(t.id+"|render-overlays",function(){return PB(t)},50);requestAnimationFrame(function(){(function(r){var o=r.labels.filter(function(W){return!W.zoom_level||W.zoom_level<=r.zoom}),a=JSON.stringify(o);if(a!==RB[r.id]){var l,c=null==(l=r.element)?void 0:l.querySelector(".svg-viewer__svg-overlays");if(!c)return;Array.from(c.querySelectorAll("[label]")).filter(function(W){return W.parentNode}).forEach(function(W){return c.removeChild(W)});for(var u,d=Oy(o);!(u=d()).done;){var h,f,p,g=u.value,v={x:0,y:0},y="~Nothing~";"string"==typeof g.location?(v=r.mappings[g.location]||v,y="#"+g.location):(null!=(h=g.location)&&h.y||null!=(f=g.location)&&f.x)&&(y="loc-"+(v=g.location).x+"-"+v.y);var w=document.createElement("div");w.setAttribute("label","true"),w.classList.add("svg-viewer__svg-overlay-item"),w.classList.add("label"),w.style.top=100*v.y+"%",w.style.left=100*v.x+"%";var E,T=document.createElement("div"),L=document.createElement("label");L.classList.add("svg-viewer__label"),L.setAttribute("for",y),null!=(p=g.css_class)&&p.length&&(E=L.classList).add.apply(E,g.css_class),g.z_index&&(w.style.zIndex=""+g.z_index),L.textContent=g.content,T.appendChild(L),w.appendChild(T),c.appendChild(w)}dd("RENDER","Added "+r.labels.length+" labels to view."),RB[r.id]=a}})(t),function(r){var o=JSON.stringify(r.actions.map(function(g){return sh({},g,{callback:""})}));if(o!==LB[r.id]){var a,l=null==(a=r.element)?void 0:a.querySelector(".svg-viewer__svg-overlays");if(!l)return;Array.from(l.querySelectorAll(".action-zone")).filter(function(g){return g.parentNode&&l.contains(g.parentNode)}).forEach(function(g){return l.removeChild(g)});for(var c,u=Oy(r.actions);!(c=u()).done;){var d=c.value;if(d.action&&d.id&&"*"!==d.id&&!1!==d.zone){var h=document.createElement("button");h.id=""+d.id;var f=r.mappings[d.id]||{x:0,y:0},p=r.mappings[d.id]||{w:0,h:0};h.classList.add("svg-viewer__svg-overlay-item"),h.classList.add("action-zone"),h.style.top=100*f.y+"%",h.style.left=100*f.x+"%",(p.w||p.h)&&(h.style.width=100*p.w+"%",h.style.height=100*p.h+"%",h.style.transform="translate(-50%, -50%)"),l.appendChild(h)}}LB[r.id]=o}}(t),function(r){var o=JSON.stringify(r.features.map(function(E){return sh({},E,{content:"",data:iQe(E.data)})}));if(o!==FB[r.id]){var a,l=null==(a=r.element)?void 0:a.querySelector(".svg-viewer__svg-overlays");if(!l)return console.log("Unable to get overlay element.");var c=l.querySelectorAll(".feature"),u=[];window.overlay_el=l,c.forEach(function(E){if(E.parentNode){var T=E.getAttribute("track-id");"none"!==T&&r.features.find(function(L){return L.track_id===T})?u.push(E):l.removeChild(E)}});for(var d,h=Oy(r.features);!(d=h()).done;){var f,p,g=d.value;if(g.content&&!u.includes(g.content)){var v={x:0,y:0},y={w:0,h:0},w=document.createElement("button");"string"==typeof g.location?(w.id=""+g.location,v=r.mappings[g.location]||v,(g.hover||g.full_size)&&(y=r.mappings[g.location]||y)):(null!=(f=g.location)&&f.y||null!=(p=g.location)&&p.x)&&(v=g.location),(v.x||v.y)&&(w.classList.add("svg-viewer__svg-overlay-item"),w.setAttribute("feature","true"),w.setAttribute("track-id",""+(g.track_id||"none")),w.classList.add("feature"),g.z_index&&(w.style.zIndex=""+g.z_index),g.hover&&w.classList.add("svg-viewer__svg-overlay-item__hover"),w.style.top=100*v.y+"%",w.style.left=100*v.x+"%",y.w||y.h?(w.style.width=100*y.w+"%",w.style.height=100*y.h+"%"):(w.style.width="1%",w.style.height=1/r.ratio+"%"),w.style.transform="translate(-50%, -50%)",g.content instanceof Node&&w.appendChild(g.content),l.appendChild(w))}}dd("RENDER","Added "+r.features.length+" features to view."),FB[r.id]=o}}(t)})}}}function rue(t){var n="";for(var e in t)if(t[e]){var i="";for(var s in t[e])t[e][s]&&(i+=s+": "+t[e][s]+"; ");n+="svg "+e.split(" ").map(function(r){return NB(r)}).join(" ")+" { "+i+" } "}return n}Hce("on_resize",sQe.subscribe(function(){for(var t,n=function(){var i=t.value;try{fg("resize-"+i.id,function(){return nue(i)})}catch(s){console.warn(s)}},e=Oy($C());!(t=e()).done;)n()}));var $B={},BB={};function VB(t,n){return mf(t,n)}function zB(t){var n,e=uu(t);if(e){var i,s,r,o=null==(n=e.element)?void 0:n.querySelector(".svg-viewer");o&&(e.element.removeChild(o),i=e,s=$C().filter(function(a){return a.id!==i.id}),Ny.next(s),r=""+t,Object.keys(Lp).filter(function(a){return a.includes(r)}).forEach(function(a){return Wce(a)}))}}const uQe=["outlet"],dQe=["feature"];function hQe(t,n){1&t&&be(0,"mat-spinner",7),2&t&&S("diameter",48)}function fQe(t,n){if(1&t&&(sn(0),K(1,hQe,1,1,"mat-spinner",6),rn()),2&t){const e=M();b(),S("ngIf",!e.viewer||e.loading)}}function pQe(t,n){1&t&&Ss(0)}function mQe(t,n){if(1&t&&(sn(0),K(1,pQe,1,0,"ng-container",14),rn()),2&t){const e=M(2),i=e.$implicit,s=e.index,r=M(2);b(),S("ngComponentOutlet",i.content)("ngComponentOutletInjector",r.injectors[s])}}function _Qe(t,n){if(1&t&&(sn(0),be(1,"div",15),ge(2,"sanitize"),rn()),2&t){const e=M(2).$implicit;b(),S("innerHTML",Me(2,1,e.content),Zc)}}function gQe(t,n){1&t&&Ss(0)}function bQe(t,n){if(1&t&&(sn(0),K(1,gQe,1,0,"ng-container",16),rn()),2&t){const e=M(2).$implicit;b(),S("ngTemplateOutlet",e.content)("ngTemplateOutletContext",e.data)}}function vQe(t,n){if(1&t&&(m(0,"div")(1,"div",11,2),K(3,mQe,2,2,"ng-container",12)(4,_Qe,3,3,"ng-container",12)(5,bQe,2,2,"ng-container",13),_()()),2&t){const e=M().$implicit,i=M(2);b(),S("ngSwitch",i.type(e.content)),$t("no-scale",e.no_scale)("el-id",e.location)("track-id",e.track_id)("view-id",i.viewer),b(2),S("ngSwitchCase","component"),b(),S("ngSwitchCase","html")}}function yQe(t,n){if(1&t&&(sn(0),K(1,vQe,6,7,"div",10),rn()),2&t){const e=n.$implicit;b(),S("ngIf",e)}}function wQe(t,n){if(1&t&&(m(0,"div",8),K(1,yQe,2,1,"ng-container",9),_()),2&t){const e=M();b(),S("ngForOf",e.features)("ngForTrackBy",e.trackByFn)}}function SQe(t,n){1&t&&(m(0,"div",17)(1,"div",18),C(2,"No map"),_()())}let aue=(()=>{class t extends bn{onResize(){this.zoom=1,this.center={x:.5,y:.5},this.updateDisplay()}type(e){return"string"==typeof e?"html":e instanceof or?"template":"component"}constructor(e){super(),this._injector=e,this.zoom=1,this.center={x:.5,y:.5},this.reset=0,this.zoomChange=new it,this.centerChange=new it,this.mapInfo=new it,this.injectors=[],this.feature_list=[],this._on_changes=new Mt(null),this._extra_data={ratio$:this._on_changes.pipe(ze(i=>i.ratio)),svg_ratio$:this._on_changes.pipe(ze(i=>i.svg_ratio)),zoom$:this._on_changes.pipe(ze(i=>i.zoom)),position:this._on_changes.pipe(ze(i=>i.center))}}ngOnInit(){!function lQe(){var t=document.getElementById("svg-viewer-global");t||((t=document.createElement("style")).id="svg-viewer-global",t.innerHTML="\n    .svg-viewer {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        overflow: hidden;\n    }\n    .svg-viewer__view-container {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n    }\n\n    .svg-viewer__render-container {\n        position: absolute;\n        top: 0%;\n        left: 0%;\n        right: 0%;\n        bottom: 0%;\n        transform-box: fill-box;\n    }\n\n    .svg-viewer__svg-output {\n        position: absolute;\n        top: -100%;\n        left: -100%;\n        right: -100%;\n        bottom: -100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transform: translateZ(0);\n        pointer-events: none;\n    }\n\n    .svg-viewer__svg-output svg {\n        opacity: 0;\n        height: auto;\n        max-width: 200%;\n        max-height: 200%;\n        width: 2000px;\n    }\n\n    .svg-viewer__svg-overlays {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        pointer-events: none;\n    }\n\n    .svg-viewer__label {\n        text-shadow: black 1px 1px;\n        color: white;\n        white-space: pre-line;\n        text-align: center;\n        min-width: 10em;\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        z-index: 1\n    }\n\n    .svg-viewer__svg-overlay-item {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 0.1%;\n        width: 0.1%;\n        position: absolute;\n        transform-origin: center;\n    }\n\n    .svg-viewer__svg-overlay-item > * {\n        will-change: transform;\n    }\n\n    .svg-viewer__svg-overlay-item__hover {\n        pointer-events: auto;\n    }\n\n    .svg-viewer__svg-overlay-item__hover > * {\n        display: none;\n    }\n\n    .svg-viewer__svg-overlay-item__hover:hover > * {\n        display: initial;\n    }\n\n    .svg-viewer__svg-overlay-item.action-zone {\n        pointer-events: auto;\n        background: none;\n        outline: none;\n        border: none;\n    }\n",document.head.appendChild(t),dd("Styles","Added global viewer styles to document"))}()}ngOnDestroy(){this.viewer&&zB(this.viewer)}ngOnChanges(e){e.src&&this.src&&this.createView().catch(i=>console.warn(i)),e.features&&this.updateInjectors(),this.viewer&&(e.focus&&this.focus?this.focusOn(this.focus):(e.zoom&&e.zoom.previousValue!=e.zoom.currentValue||e.center&&!function CQe(t,n){return t.x===n.x&&t.y===n.y}(e.center.previousValue,e.center.currentValue))&&this.updateDisplay(),(e.styles||e.features||e.labels||e.actions)&&this.timeout("update_view",()=>this.updateView())),e.reset&&e.reset.currentValue!==e.reset.previousValue&&(this.zoom=1,this.center={x:.5,y:.5},this.updateDisplay())}ngAfterViewInit(){this.createView().catch(e=>console.warn(e))}updateView(){try{if(!uu(this.viewer)||this.loading)return this.timeout("update_view",()=>this.updateView());this.updateFeatureList(),VB(this.viewer,{styles:this.styles,features:this.feature_list,labels:this.labels,actions:this.actions,options:this.options})}catch{}}updateDisplay(){try{VB(this.viewer,{zoom:this.zoom,desired_zoom:this.zoom,center:this.center,desired_center:this.center,options:this.options})}catch{}}createView(){var e=this;return de(function*(){if(!kc())return e.timeout("create_view",()=>e.createView().catch(s=>console.warn(s)),300);const i=e.src?.toLowerCase()||"";if(i.includes("svg")||i.includes("upload"))if(e.src&&e._outlet_el?.nativeElement&&!e.loading){e.loading=!0,e.viewer&&(VB(e.viewer,{styles:e.styles,features:[],labels:e.labels,actions:e.actions,options:e.options}),zB(e.viewer)),e.updateFeatureList();const s=Eo();document.cookie=`${"x-api-key"===s?"api-key="+encodeURIComponent(kp()):"bearer_token="+encodeURIComponent(s)};max-age=30;path=/api/engine/v2/uploads;samesite=strict;${"https:"===location.protocol?"secure;":""}`,e.viewer=yield function(t){try{var n=function(s){return Hce((e=new JM(sh({},t,{svg_data:s}))).id+"-render",Yce(e.id).subscribe(function(r){return sue(r).catch(function(o){return console.warn(o)})})),Zce(e),Promise.resolve(function(r){try{var o,a,l=r.element;if(!l)throw new Error("No element set on viewer");var c=document.createElement("div"),u=document.createElement("style"),d=document.createElement("div"),h=document.createElement("div"),f=document.createElement("div"),p=document.createElement("div"),g=document.createElement("iframe");h.appendChild(f),h.appendChild(p),c.appendChild(u),c.appendChild(d),d.appendChild(h),c.classList.add("svg-viewer"),c.id=r.id,u.id=r.id,g.id="svg-display",g.classList.add("svg-viewer__iframe"),d.classList.add("svg-viewer__view-container"),h.classList.add("svg-viewer__render-container"),p.classList.add("svg-viewer__svg-overlays"),f.classList.add("svg-viewer__svg-output"),f.id="svg-output",f.innerHTML=r.svg_data;var v=(null==(o=f.firstElementChild)||null==(a=o.viewBox)?void 0:a.baseVal)||{};d.style.width=v.width+"px",d.style.height=v.height+"px",p.style.width=v.width+"px",p.style.height=v.height+"px",p.appendChild(g),l.appendChild(c);var y=d?.getBoundingClientRect()||{},w=mf(r,{box:y});return w?(r=w,Promise.resolve(function E(T){return new Promise(function(L){requestAnimationFrame(function(){var W,H=null==(W=T.element)?void 0:W.querySelector("svg");if(!H||!H.clientWidth)return fg(T.id+"-setup",function(){return E(T).then(function(X){return L()})},100);var P=iue[T.url]||function(X){if(!X)return{};var ne={},me=X?.getBoundingClientRect()||{},Ee=X.querySelectorAll("[id]");return X.id="svg-viewer-root",ne["svg-viewer-root"]={x:.5,y:.5,w:1,h:1},Ee.forEach(function(Te){var $e=Te?.getBoundingClientRect()||{};ne[Te.id]={x:Math.floor(($e.left+$e.width/2-me.left)/me.width*1e5)/1e5,y:Math.floor(($e.top+$e.height/2-me.top)/me.height*1e5)/1e5,w:Math.floor($e.width/me.width*1e5)/1e5,h:Math.floor($e.height/me.height*1e5)/1e5}}),ne}(H);iue[T.url]=P,mf(T,{mappings:P}),H.style.display="none",function(X){try{var ne=JSON.stringify(sh({},X.styles))||"";if(ne.localeCompare(GC[X.id])){var me,Ee,Te=X.element;if(!Te)throw new Error("No element set on viewer");var $e=Te.querySelector(".svg-viewer__iframe"),Xe=Te.querySelector(".svg-viewer__svg-output");if(!$e)throw new Error("No iframe created for viewer");var Ce=(null==(me=Xe.firstElementChild)||null==(Ee=me.viewBox)?void 0:Ee.baseVal)||{},Fe=""+X.svg_data;Fe=/<svg[^>]*width="[^>]*>/.test(Fe)?Fe:Fe.replace("<svg",'<svg width="'+Ce.width+'" height="'+Ce.height+'" ');var Ie=function(He){for(var Ve=2,tt="",St=He.length,mt=0,wt=0;wt<St;wt++)wt>0&&4*wt/3%76==0&&(tt+="\r\n"),mt|=He[wt]<<(16>>>(Ve=wt%3)&24),2!==Ve&&He.length-wt!=1||(tt+=String.fromCodePoint(ZM(mt>>>18&63),ZM(mt>>>12&63),ZM(mt>>>6&63),ZM(63&mt)),mt=0);return tt.substr(0,tt.length-2+Ve)+(2===Ve?"":1===Ve?"=":"==")}(function(He){for(var Ve,tt,St=He.length,mt=0,wt=0;wt<St;wt++){var Ft;(tt=null!=(Ft=He.codePointAt(wt))?Ft:0)>65536&&wt++,mt+=tt<128?1:tt<2048?2:tt<65536?3:tt<2097152?4:tt<67108864?5:6}Ve=new Uint8Array(mt);for(var Dt=0,Ut=0;Dt<mt;Ut++){var cn;(tt=null!=(cn=He.codePointAt(Ut))?cn:0)<128?Ve[Dt++]=tt:tt<2048?(Ve[Dt++]=192+(tt>>>6),Ve[Dt++]=128+(63&tt)):tt<65536?(Ve[Dt++]=224+(tt>>>12),Ve[Dt++]=128+(tt>>>6&63),Ve[Dt++]=128+(63&tt)):tt<2097152?(Ve[Dt++]=240+(tt>>>18),Ve[Dt++]=128+(tt>>>12&63),Ve[Dt++]=128+(tt>>>6&63),Ve[Dt++]=128+(63&tt),Ut++):tt<67108864?(Ve[Dt++]=248+(tt>>>24),Ve[Dt++]=128+(tt>>>18&63),Ve[Dt++]=128+(tt>>>12&63),Ve[Dt++]=128+(tt>>>6&63),Ve[Dt++]=128+(63&tt),Ut++):(Ve[Dt++]=252+(tt>>>30),Ve[Dt++]=128+(tt>>>24&63),Ve[Dt++]=128+(tt>>>18&63),Ve[Dt++]=128+(tt>>>12&63),Ve[Dt++]=128+(tt>>>6&63),Ve[Dt++]=128+(63&tt),Ut++)}return Ve}('<html><head><style>*{overflow:hidden;}html,body{padding:0;margin:0;}</style><style id="style">'+rue(sh({},X.styles,{}))+"</style>\n<script>\n    function updateStyles(evt) {\n        try {\n            var message = JSON.parse(evt.data);\n            if (message.id === 'svg-styles') {\n                const style_el = document.getElementById('style');\n                style_el.innerHTML = message.content;\n            }\n        } catch(e) {}\n    }\n\n    if (window.addEventListener) {\n        window.addEventListener(\"message\", updateStyles, false);\n    } else {\n        window.attachEvent(\"onmessage\", updateStyles);\n    }\n<\/script></head><body>"+Fe+"</body></html>"));$e.src="data:text/html;base64,"+Ie,GC[X.id]=ne}Promise.resolve()}catch(He){return Promise.reject(He)}}(T),PB(T),L()})})}(r)).then(function(){(function(E,T){void 0===T&&(T=rQe);var L=Qce.getValue(),W=E.element;L[E.id]&&L[E.id].unsubscribe();for(var H,P=[],X=function(){var me=H.value;P.push(Qh(W,me).pipe(ze(function(Ee){return{id:E.id,type:me,event:Ee}})))},ne=Oy(T);!(H=ne()).done;)X();L[E.id]=Zs.apply(void 0,P).subscribe(function(me){var Ee,Fe,Ie,Te=me.id,$e=me.type,Xe=me.event;switch(oQe.includes($e)&&Xe.preventDefault(),function(Ce){var Fe,Ie=Ce.type,He=Ce.event,Ve=uu(Ce.id);if(Ve&&null!=(Fe=Ve.actions)&&Fe.length){var tt=Ve.actions.sort(function(St,mt){return(mt.priority||0)-(St.priority||0)}).find(function(St){var mt;return St.action.includes(Ie)&&("*"===St.id||St.id===(null==(mt=He.target)?void 0:mt.id))});tt&&tt.callback(He,YM(Ve,PC(He)))}}(me),$e){case"touchstart":case"mousedown":(null==(Ee=Xe.touches)?void 0:Ee.length)>=2?function(Ce,Fe){dd("INPUT","Starting pinching..."),du&&window.removeEventListener("touchmove",du);var Ie=uu(Ce);if(VC=!0,Ie&&!Ie.options.disable_zoom){var He=[{x:Fe.touches[0].clientX,y:Fe.touches[0].clientY},{x:Fe.touches[1].clientX,y:Fe.touches[1].clientY}],Ve=He.map(function(St){return YM(Ie,St)}),tt={x:(Ve[0].x+Ve[1].x)/2,y:(Ve[0].y+Ve[1].y)/2};Ry={x:1-tt.x,y:1-tt.y},eA=qce(He[0],He[1]),Fe instanceof MouseEvent||(du=function(St){return St.touches.length>=2?function(mt,wt,Ft){void 0===Ft&&(Ft=eA);var Dt=uu(mt);if(Dt&&!Dt.options.disable_zoom){var Ut=[{x:wt.touches[0].clientX,y:wt.touches[0].clientY},{x:wt.touches[1].clientX,y:wt.touches[1].clientY}],cn=qce(Ut[0],Ut[1]),Jt=Math.max(.5,Math.min(10,Dt.zoom*cn/Ft)),Nn=Jt!=Dt.zoom?Kce(Dt.center,Ry,1-Dt.zoom/Jt):Dt.center;eA=cn,mf(Dt,{zoom:Jt,center:Nn,desired_zoom:Jt,desired_center:Nn})}}(Ce,St,eA):""},window.addEventListener("touchmove",du))}}(Te,Xe):function(Ce,Fe){if(!VC){dd("INPUT","Starting panning...");var Ie=uu(Ce);Pp&&window.removeEventListener("mousemove",Pp),Pp&&window.removeEventListener("mouseup",Fy),du&&window.removeEventListener("touchmove",du),du&&window.removeEventListener("touchend",Ly),Ie&&!Ie.options.disable_pan&&(BC=PC(Fe),Fe instanceof MouseEvent?(Pp=function(He){return tue(Ce,He,BC)},Fy=function(){return zC()},window.addEventListener("mousemove",Pp),window.addEventListener("mouseup",Fy)):(du=function(He){return tue(Ce,He,BC)},Ly=function(){return zC()},window.addEventListener("touchmove",du),window.addEventListener("touchend",Ly)),fg("pan_start",function(){return tA=!0},200))}}(Te,Xe);break;case"touchend":case"mouseup":tA||VC||(Fe=Xe,(Ie=uu(Te))&&dd("INPUT","Clicked:",YM(Ie,PC(Fe)))),zC();break;case"mousewheel":case"wheel":!function(Ce,Fe){var Ie=uu(Ce);if(Ie){var He=Math.min(10,Math.max(.5,Ie.zoom*(1+(Fe.deltaY>=0?-.02:.02)))),Ve=YM(Ie,PC(Fe));Ry={x:1-Ve.x,y:1-Ve.y},fg("clear_action_start",function(){return Ry=null});var tt=He!=Ie.zoom?Kce(Ie.center,Ry,1-Ie.zoom/He):Ie.center;mf(Ie,{zoom:He,center:tt,desired_zoom:He,desired_center:tt})}}(Te,Xe)}}),Qce.next(L)})(r),eue||(window.addEventListener("resize",function(){Xce.next("resize")}),window.addEventListener("blur",function(){return zC()}),eue=!0),nue(r)})):Promise.resolve()}catch(E){return Promise.reject(E)}}(e)).then(function(){return e.id})},e=$C().find(function(s){return s.url===t.url});if(e)return Promise.resolve(e.id);var i=t.svg_data;return Promise.resolve(i?n(i):Promise.resolve(function(s){void 0===s&&(s="");try{var r=new Headers;if(s.startsWith(location.origin)||s.startsWith("/"))for(var o in BB)r.append(o,BB[o]);return $B[s]?Promise.resolve($B[s]):Promise.resolve(fetch(s,{headers:r}).catch(function(a){return dd("SVG VIEWER","Failed to load map",a,"error"),{text:function(){return Promise.resolve("")}}})).then(function(a){return Promise.resolve(a.text()).then(function(l){return $B[s]=l,l})})}catch(a){return Promise.reject(a)}}(t.url)).then(n))}catch(s){return Promise.reject(s)}}({element:e._outlet_el?.nativeElement,url:e.src,styles:e.styles,zoom:e.zoom,desired_zoom:e.zoom,center:e.center,features:e.feature_list,labels:e.labels,actions:e.actions,options:e.options}),e.loading=!1,e.subscription("view_changes",Yce(e.viewer)?.subscribe(o=>{e._outlet_el.nativeElement.getBoundingClientRect(),e._on_changes.next({...o}),e.zoomChange.emit(o.zoom),e.centerChange.emit(o.center)}));const r=uu(e.viewer);e.mapInfo.emit(r.mappings),e.focus&&e.focusOn(e.focus)}else(e.src&&!e._outlet_el?.nativeElement||e.loading)&&e.timeout("create_view",()=>e.createView().catch(s=>console.warn(s)))})()}focusOn(e){if(!e||!this.viewer)return;const i=uu(this.viewer);if(!i)return;const s=i.mappings[e];s&&(this.center={x:1-(s.x+s.w/2),y:1-(s.y+s.h/4)},this.updateDisplay())}trackByFn(e,i){return i?.track_id}updateFeatureList(){this.feature_list=(this.features||[]).map((e,i)=>({...e,content:this._feature_list.toArray()[i]?.nativeElement})).filter(e=>e.content)}updateInjectors(){const e=this.injectors||[];this.injectors=(this.features||[]).map(i=>e.find(s=>s.get(Ya)?.track_id&&s.get(Ya)?.track_id===i.track_id)||ti.create({providers:[{provide:Ya,useValue:{track_id:i.track_id,...i.data,...this._extra_data}}],parent:this._injector}))}static#e=this.\u0275fac=function(i){return new(i||t)(D(ti))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["map-renderer"]],viewQuery:function(i,s){if(1&i&&(Zt(uQe,5),Zt(dQe,5)),2&i){let r;xt(r=Et())&&(s._outlet_el=r.first),xt(r=Et())&&(s._feature_list=r)}},hostBindings:function(i,s){1&i&&te("resize",function(){return s.onResize()},0,vc)},inputs:{src:"src",styles:"styles",zoom:"zoom",center:"center",features:"features",labels:"labels",actions:"actions",reset:"reset",options:"options",focus:"focus"},outputs:{zoomChange:"zoomChange",centerChange:"centerChange",mapInfo:"mapInfo"},features:[bt,On],decls:6,vars:5,consts:[["outlet",""],["empty_state",""],["feature",""],["tabindex","0","role","map",1,"absolute","inset-0"],[4,"ngIf","ngIfElse"],["hidden","",4,"ngIf"],["class","absolute",3,"diameter",4,"ngIf"],[1,"absolute",3,"diameter"],["hidden",""],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"pointer-events-none",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngComponentOutlet","ngComponentOutletInjector"],[3,"innerHTML"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"absolute","inset-0","flex","items-center","justify-center"],[1,"opacity-30"]],template:function(i,s){if(1&i&&(be(0,"div",3,0),K(2,fQe,2,1,"ng-container",4)(3,wQe,2,2,"div",5)(4,SQe,3,0,"ng-template",null,1,mn)),2&i){const r=Gt(5);rt("hidden",!s.src),b(2),S("ngIf",s.src)("ngIfElse",r),b(),S("ngIf",null==s.injectors?null:s.injectors.length)}},dependencies:[XP,hn,Ot,h_,ip,bv,vv,Ws,ud],styles:["[_nghost-%COMP%]{height:100%;width:100%}mat-spinner[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}"]})}return t})();const xQe=["map_container"];function EQe(t,n){1&t&&be(0,"mat-spinner",6)}function TQe(t,n){if(1&t){const e=Le();m(0,"button",3),te("click",function(){return re(e),oe(M().toggleDirections())}),m(1,"app-icon"),C(2,"place"),_(),m(3,"div",4),C(4),_(),K(5,EQe,1,0,"mat-spinner",5),_()}if(2&t){const e=M();b(4),xe(" ",e.viewing_directions?"Hide":"Show"," Directions "),b(),S("ngIf",e.loading_directions)}}const Py=18.5,nA={};let lue=(()=>{class t extends bn{constructor(e,i){super(),this._maps_people=e,this._org=i,this.zoom=Py,this.zoomChange=new it,this.zoneChange=new it,this.show_directions=!1,this.viewing_directions=!1,this.loading_directions=!1,this.ignore_zoom=!1,this._floor_list=[],this._added_floor_selector=!1;const s=sessionStorage.getItem("PLACEOS.mapsindoors.resources")||"{}",r=JSON.parse(s);for(const o in r)r.hasOwnProperty(o)&&(nA[o]=r[o])}ngOnInit(){this.id=sg(8),this._initialised.next(!1),this._initialiseServices()}ngOnChanges(e){if(!this.is_initialised)return this.timeout("on_changes",()=>this.ngOnChanges(e));e.zone&&this.zone&&this._centerOnZone(),e.focus&&this.focus&&this._focusOnLocation(),e.metadata&&this._updateMapStyling(),e.zoom&&this.zoom&&!this.ignore_zoom&&this._services?.map?.setZoom(this.zoom),e.reset&&(this._services?.map?.setZoom(Py),this._centerOnZone()),e.options&&this._addFloorSelector()}_setResource(e,i){nA[e]=i,this.timeout("set_resource",()=>{sessionStorage.setItem("PLACEOS.mapsindoors.resources",JSON.stringify(nA))})}_initialiseServices(){if(!this._maps_people.is_ready||!window.mapsindoors)return void this.timeout("init",()=>this._initialiseServices(),1e3);const[e,i]=(this._org.building?.location||"-33.8567844,151.2152967").split(","),s={element:this._container.nativeElement,center:{lat:parseFloat(e),lng:parseFloat(i)},zoom:Py,maxZoom:24};let r=null;switch(this._maps_people.map_service){case Jd.GoogleMaps:Xi("MapsIndoors","Using Google Maps API"),r=new mapsindoors.mapView.GoogleMapsView(s);break;case Jd.Mapbox:s.accessToken=this._maps_people.map_token,Xi("MapsIndoors","Using Mapbox API"),r=new mapsindoors.mapView.MapboxView(s)}if(!r)return void function bae(t,n,e,i={}){!Sy&&console.debug(t),IM("warn",t,n,e,i)}("Failed to initialise map view.");const o=this._maps_people.map_service===Jd.GoogleMaps?new mapsindoors.directions.GoogleMapsProvider:new mapsindoors.directions.MapboxProvider(this._maps_people.map_token),a=new mapsindoors.MapsIndoors({mapView:r});this._services={mapsindoors:a,view:r,map:r.getMap(),directions:new mapsindoors.services.DirectionsService(o),directions_renderer:new mapsindoors.directions.DirectionsRenderer({mapsIndoors:a})},console.log("Resource:",this._services.mapsindoors),this._initialised.next(!0),this.zone&&(this._services.map.setZoom(Py),this._centerOnZone()),this._addFloorSelector(),this._services.mapsindoors.addListener("building_changed",l=>this._handleBuildingChange(l)),this._services.mapsindoors.addListener("floor_changed",l=>this._handleLevelChange(l)),this._services.mapsindoors.addListener("zoom_changed",l=>this._handleZoomChange(l)),this._services.mapsindoors.addListener("click",l=>this._handleUserClick(l)),this.timeout("resize",()=>window.dispatchEvent(new Event("resize")),100),window.maps_indoors=this._services,this.timeout("focus",()=>this._focusOnLocation()),this.timeout("init_zoom",()=>this._handleZoomChange(Py))}toggleDirections(){var e=this;return de(function*(){if(e.viewing_directions)return e._services.directions_renderer.setRoute(null),e._focusOnLocation(),void(e.viewing_directions=!1);if(!e.focus)return;const i=yield e._search(e.focus);if(!i?.length)return void Mi("Failed to find location.");e.loading_directions=!0;const s=i[0],[r,o]=s.properties?.anchor?.coordinates||[0,0];navigator.geolocation.getCurrentPosition(function(){var l=de(function*(c){const u=function $je(t,n,e,i){const r=wM(e-t),o=wM(i-n);t=wM(t),e=wM(e);const a=Math.sin(r/2)*Math.sin(r/2)+Math.sin(o/2)*Math.sin(o/2)*Math.cos(t)*Math.cos(e);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*6371}(o,r,c.coords.latitude,c.coords.longitude),d={origin:{lat:c.coords.latitude,lng:c.coords.longitude},destination:{lat:o,lng:r},travelMode:u<2?"WALKING":"DRIVING"};console.log("Route Parameters:",d,u);const h=yield e._services.directions.getRoute(d).catch(f=>{Xi("MapsIndoors","Error fetching route: ",f.message||f,"warn");const p=f instanceof TypeError&&f.message?.includes("origin");e.loading_directions=!1,p&&Mi("Error: Origin location is outside of map area.")});h&&(console.log("Route:",h),e._services.directions_renderer.setRoute(h),e.viewing_directions=!0,e.loading_directions=!1)});return function(c){return l.apply(this,arguments)}}(),()=>Mi("Failed to get your current location."),{timeout:1e4,enableHighAccuracy:!0})})()}_handleZoomChange(e){this.timeout("zoom_change",()=>{this.ignore_zoom=!0,this.zoom=e,this.zoomChange.emit(e),this.timeout("reset_ignore_zoom",()=>this.ignore_zoom=!1,50)},100)}_handleBuildingChange(e){const i=e.externalId||e.id;Xi("MapsIndoors",`Building switched to "${i}"`);const s=e.floors||{};if(this._floor_list=Object.keys(s).map(o=>({index:o,...s[o]})),Xi("MapsIndoors","Floor List:",this._floor_list),!this._services)return;const r=this._org.buildings.find(o=>o.id===i||o.map_id===i);this.timeout("set_floor",()=>{!this._setFloorFromZone()&&e.defaultFloor&&this._handleLevelChange(e.defaultFloor)}),r&&(this._org.building=r)}_handleLevelChange(e){var i=this;return de(function*(){Xi("MapsIndoors",`Level switched to "${e}"`);const s=i._floor_list.find(l=>l.index===e),r=s?.externalId||s?.id;if(!i._services)return;const o=yield i._org.active_levels.pipe(ai(1)).toPromise();if(!o)return;const a=o.find(l=>l.map_id===r||l.id===r);a&&(i.zone=a,i.zoneChange.emit(a))})()}_handleUserClick(e){Xi("MapsIndoors","Click occurred",e);const i=e.properties?.externalId||e.properties?.roomId||e.id,s=this.metadata?.actions||[];Xi("MapsIndoors","Registered Actions",s);const r=["mousedown","touchstart","enter","leave"];for(const o of s)if((o.id===i||"*"===o.id)&&!r.includes(o.action)){o.callback(e);break}}_search(e){var i=this;return de(function*(){if(i._services)return mapsindoors?.services.LocationsService.getLocations({q:e})})()}_updateMapStyling(){var e=this;return de(function*(){if(!e._services)return;const i=e.metadata?.styles||{};for(const s in i){if(!i[s].fill)continue;let r=nA[s];if(!r){const a=s.replace(/#/,""),l=yield e._search(a);if(!l.length)continue;r=l.find(c=>c.properties?.externalId===a||c.properties?.roomId===a||c.id===a),r&&e._setResource(s,r)}r&&e._services.mapsindoors.setDisplayRule(r.id,{extrusionHeight:0,extrusionVisible:!1,polygonVisible:!0,polygonFillColor:i[s].fill})}})()}_focusOnLocation(){var e=this;return de(function*(){if(!e.focus)return;const i=yield e._search(e.focus);if(!i?.length)return void Mi("Failed to find location.");const s=i.find(a=>a.properties?.externalId===e.focus)||i[0],[r,o]=s.properties?.anchor?.coordinates||[0,0];e._services.map.setZoom(Py),e._services.map.setCenter({lat:o,lng:r}),e._services.mapsindoors.setFloor(s.properties?.floor),e._services.mapsindoors.highlight([s.id])})()}_centerOnZone(){!this._services||!this.zone||this.timeout("set_center",()=>{const e=this._org.buildings.find(r=>r.id===this.zone.parent_id);if(!e)return;const[i,s]=e?.location.split(",");this._services.map.setCenter({lat:parseFloat(i),lng:parseFloat(s)}),this._setFloorFromZone()})}_setFloorFromZone(){if(!this.zone.map_id||!this._services)return!1;const e=this.zone.map_id,i=this._floor_list.find(s=>s.index===e||s.externalId===e||s.id===e);return!!i&&(this._services.mapsindoors.setFloor(i.index),!0)}_addFloorSelector(){if(!this.options?.controls||this._added_floor_selector)return;const e=document.createElement("div");new mapsindoors.FloorSelector(e,this._services.mapsindoors),this._maps_people.map_service===Jd.GoogleMaps?this._services.map.controls[google.maps.ControlPosition.RIGHT_TOP].push(e):this._services.map.addControl({onAdd:()=>e,onRemove:()=>{}}),this._added_floor_selector=!0}static#e=this.\u0275fac=function(i){return new(i||t)(D(Rp),D(In))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["maps-indoors"]],viewQuery:function(i,s){if(1&i&&Zt(xQe,7),2&i){let r;xt(r=Et())&&(s._container=r.first)}},inputs:{zone:"zone",metadata:"metadata",options:"options",focus:"focus",zoom:"zoom",reset:"reset"},outputs:{zoomChange:"zoomChange",zoneChange:"zoneChange"},features:[bt,On],decls:3,vars:1,consts:[["map_container",""],[1,"absolute","inset-0","z-0"],["btn","","matRipple","","class","absolute bottom-2 left-2 bg-base-100 text-base-content shadow z-10 border-base-200 space-x-2",3,"click",4,"ngIf"],["btn","","matRipple","",1,"absolute","bottom-2","left-2","bg-base-100","text-base-content","shadow","z-10","border-base-200","space-x-2",3,"click"],[1,"pr-2"],["diameter","24",4,"ngIf"],["diameter","24"]],template:function(i,s){1&i&&(be(0,"div",1,0),K(2,TQe,6,2,"button",2)),2&i&&(b(2),S("ngIf",s.focus&&!s.show_directions&&(null==s.options?null:s.options.controls)))},dependencies:[Ot,jt,Ws,zt]})}return t})();const sA={};function qr(t,n){const e=Hn(t);return isNaN(n)?aa(t,NaN):(n&&e.setDate(e.getDate()+n),e)}function UB(t,n){const e=Hn(t),i=e.getFullYear(),s=e.getDate(),r=aa(t,0);r.setFullYear(i,n,15),r.setHours(0,0,0,0);const o=function KQe(t){const n=Hn(t),e=n.getFullYear(),i=n.getMonth(),s=aa(t,0);return s.setFullYear(e,i+1,0),s.setHours(0,0,0,0),s.getDate()}(r);return e.setMonth(n,Math.min(s,o)),e}function hd(t,n){let e=Hn(t);return isNaN(+e)?aa(t,NaN):(null!=n.year&&e.setFullYear(n.year),null!=n.month&&(e=UB(e,n.month)),null!=n.date&&e.setDate(n.date),null!=n.hours&&e.setHours(n.hours),null!=n.minutes&&e.setMinutes(n.minutes),null!=n.seconds&&e.setSeconds(n.seconds),null!=n.milliseconds&&e.setMilliseconds(n.milliseconds),e)}function YQe(t,n){if(1&t&&(m(0,"span"),C(1),_()),2&t){const e=M(2);b(),xe("from ","wfh"===e.option?"home":"office","")}}function ZQe(t,n){if(1&t&&(m(0,"mat-option",30),C(1),_()),2&t){const e=n.$implicit;S("value",e.id),b(),xe(" ",e.name," ")}}function QQe(t,n){if(1&t){const e=Le();m(0,"div",23)(1,"label",24),C(2),ge(3,"date"),_(),m(4,"a-time-field",25),Gn("ngModelChange",function(s){const r=re(e).$implicit,o=M(2);return Fn(o.start_times[r],s)||(o.start_times[r]=s),oe(s)}),te("ngModelChange",function(){return re(e),oe(M(2).changed=!0)}),_(),m(5,"a-time-field",26),Gn("ngModelChange",function(s){const r=re(e).$implicit,o=M(2);return Fn(o.end_times[r],s)||(o.end_times[r]=s),oe(s)}),te("ngModelChange",function(){return re(e),oe(M(2).changed=!0)}),_(),m(6,"mat-form-field",27)(7,"mat-select",28),Gn("ngModelChange",function(s){const r=re(e).$implicit,o=M(2);return Fn(o.settings[r].location,s)||(o.settings[r].location=s),oe(s)}),te("ngModelChange",function(){return re(e),oe(M(2).changed=!0)}),K(8,ZQe,2,2,"mat-option",29),_()()()}if(2&t){const e=n.$implicit,i=M(2);b(2),vt(Kt(3,6,i.days[e],"EEEE")),b(2),Un("ngModel",i.start_times[e]),b(),Un("ngModel",i.end_times[e]),S("from",i.start_times[e]),b(2),Un("ngModel",i.settings[e].location),b(),S("ngForOf",i.options)}}function JQe(t,n){if(1&t){const e=Le();m(0,"div",4)(1,"div",5),be(2,"a-user-avatar",6),m(3,"div"),C(4),_(),m(5,"div",7),C(6),_(),m(7,"div",7),C(8),_()(),m(9,"div",8)(10,"h3",9),C(11," Today's Working Location "),_(),m(12,"button",10)(13,"div",11)(14,"div",12),C(15),_(),m(16,"app-icon",13),C(17,"arrow_drop_down"),_()()(),m(18,"div",14)(19,"div",15)(20,"app-icon"),C(21),_()(),m(22,"div",16),C(23),K(24,YQe,2,1,"span",17),C(25," day"),be(26,"br"),C(27),_()()(),m(28,"div",18)(29,"h3",9),C(30," Office Day Defaults "),_(),K(31,QQe,9,9,"div",19),_(),m(32,"div",20)(33,"button",21),te("click",function(){return re(e),oe(M().saveChanges())}),C(34," Update "),_()(),m(35,"button",22)(36,"app-icon"),C(37,"close"),_()()()}if(2&t){const e=M(),i=Gt(2);b(2),S("user",e.user),b(2),vt(e.user.name),b(2),vt(e.user.email),b(2),vt(e.user.phone),b(4),S("matMenuTriggerFor",i),b(3),vt(e.option_name),b(6),vt("wfh"===e.option?"home":"domain"),b(2),xe(" Today is a ","aol"===e.option?"leave":"working"," "),b(),S("ngIf","aol"!==e.option),b(3),Ts(" ","aol"===e.option?"Unavailable":"Available"," for ","wfh"===e.option?"online":""," meetings "),b(4),S("ngForOf",e.available_weekdays),b(2),S("disabled",!e.changed)}}function eJe(t,n){if(1&t){const e=Le();m(0,"button",31),te("click",function(){const s=re(e).$implicit,r=M();return r.option=s.id,oe(r.changed=!0)}),C(1),_()}if(2&t){const e=n.$implicit;$t("id",e.id),b(),xe(" ",e.name," ")}}function tJe(t,n){1&t&&(m(0,"div",32),be(1,"mat-spinner",33),m(2,"p"),C(3,"Saving changes to work location settings..."),_()()),2&t&&(b(),S("diameter",32))}let GB=(()=>{class t{get option_name(){return this.options.find(e=>e.id===this.option)?.name||""}constructor(e){this._dialog_ref=e,this.options=[{id:"wfo",name:"Working from office"},{id:"wfh",name:"Working from home"},{id:"aol",name:"Away on Leave"}],this.option=this.options[0].id,this.settings=[],this.weekdays=[],this.changed=!1,this.loading=!1,this.available_weekdays=[1,2,3,4,5],this.days=new Array(7).fill(0).map((i,s)=>qr(hf(qr(Date.now(),30)),s)),this.start_times=[],this.end_times=[]}ngOnInit(){const e=fn();this.settings=e.work_preferences,this.option=e.location||"wfo",this.settings?.length<7&&(this.settings=new Array(7).fill({}).map((i,s)=>({day_of_week:s,start_time:9,end_time:17,location:"wfo"}))),this.start_times=this.settings.map((i,s)=>{const r=Math.floor(i.start_time),o=Math.round(60*(i.start_time-r));return hd(this.days[s],{hours:r,minutes:o}).valueOf()}),this.end_times=this.settings.map((i,s)=>{const r=Math.floor(i.end_time),o=Math.round(60*(i.end_time-r));return hd(this.days[s],{hours:r,minutes:o}).valueOf()}),this._initWeekdays()}get user(){return fn()}saveChanges(e=!0){var i=this;return de(function*(){i.loading=!0,i._dialog_ref.disableClose=!0;const s=(new Date).getDay(),r=ys(Date.now(),"yyyy-MM-dd");var o={};o[r]={day_of_week:s,start_time:9,end_time:17,location:i.option};for(const l of i.settings){const c=new Date(i.start_times[l.day_of_week]),u=new Date(i.end_times[l.day_of_week]);l.start_time=c.getHours()+c.getMinutes()/60,l.end_time=u.getHours()+u.getMinutes()/60,l.day_of_week===s&&(o[r].start_time=l.start_time,o[r].end_time=l.end_time)}const a=yield I5("current").toPromise();yield function tje(t,n,e="patch"){return Noe({id:t,form_data:n,query_params:{},method:e,fn:tC,path:_y})}(a.id,{...a,work_preferences:i.settings,work_overrides:o}).toPromise(),i.loading=!1,i._dialog_ref.disableClose=!1,e&&(location.reload(),i._dialog_ref.close())})()}_initWeekdays(){let e=new Date;this.weekdays=this.available_weekdays.map(i=>function XQe(t,n,e){const i=rg(),s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,r=Hn(t),o=r.getDay(),c=7-s;return qr(r,n<0||n>6?n-(o+c)%7:((n%7+7)%7+c)%7-(o+c)%7)}(e,i).valueOf())}static#e=this.\u0275fac=function(i){return new(i||t)(D(Da))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["wfh-settings-modal"]],decls:6,vars:3,consts:[["menu","matMenu"],["load_state",""],["class","relative flex flex-col rounded overflow-hidden w-[40rem] max-w-full",4,"ngIf","ngIfElse"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"relative","flex","flex-col","rounded","overflow-hidden","w-[40rem]","max-w-full"],[1,"w-full","px-4","py-8","flex","flex-col","items-center","border-b","border-base-200"],[3,"user"],[1,"text-xs","opacity-30"],[1,"w-full","p-4","flex","flex-col","border-b","border-base-200"],[1,"-mt-2","mb-2","text-sm","font-medium"],["btn","","matRipple","","today-location","",1,"inverse","rounded-3xl","w-[20rem]","max-w-[calc(100%-2rem)]","mx-auto",3,"matMenuTriggerFor"],[1,"flex","items-center","justify-between","w-full"],[1,"flex-1","w-1/2"],[1,"text-2xl"],[1,"flex","items-center","pt-4","space-x-2","mx-auto"],[1,"h-8","w-8","rounded-full","bg-base-200","flex","items-center","justify-center"],[1,"flex-1","w-1/2","text-sm"],[4,"ngIf"],[1,"w-full","p-4","flex","flex-col"],["class","flex items-center space-x-2 w-full overflow-hidden even:bg-base-200 rounded p-2",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-end","px-4","pb-4"],["btn","","matRipple","","save","",3,"click","disabled"],["icon","","matRipple","","mat-dialog-close","",1,"absolute","top-0","left-0"],[1,"flex","items-center","space-x-2","w-full","overflow-hidden","even:bg-base-200","rounded","p-2"],[1,"w-24","min-w-0","m-0"],[1,"h-12","w-36",3,"ngModelChange","ngModel"],[1,"h-12","w-36",3,"ngModelChange","ngModel","from"],["appearance","outline",1,"flex-2","no-subscript"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-menu-item","",3,"click"],["loading","",1,"relative","bg-base-100","flex","flex-col","justify-center","items-center","rounded","overflow-hidden","w-[24rem]","h-[18rem]","text-center","space-y-2"],[3,"diameter"]],template:function(i,s){if(1&i&&(K(0,JQe,38,13,"div",2),m(1,"mat-menu",null,0),K(3,eJe,2,2,"button",3),_(),K(4,tJe,4,1,"ng-template",null,1,mn)),2&i){const r=Gt(5);S("ngIf",!s.loading)("ngIfElse",r),b(3),S("ngForOf",s.options)}}})}return t})();function nJe(t,n){if(1&t){const e=Le();m(0,"div",9)(1,"div",10)(2,"app-icon",11),C(3,"mode_night"),_()(),m(4,"div",12),Ne(5,2),_(),m(6,"mat-slide-toggle",13),te("ngModelChange",function(s){return re(e),oe(M().setDarkMode(s))}),_()()}if(2&t){const e=M();b(6),S("ngModel",e.dark_mode)}}function iJe(t,n){if(1&t){const e=Le();sn(0),m(1,"div",15),Ne(2,3),_(),m(3,"div",16)(4,"span",17),C(5,"A"),_(),m(6,"mat-slider",18)(7,"input",19),te("ngModelChange",function(s){return re(e),oe(M().applySetting("font_size",s))}),_()(),m(8,"span",6),C(9,"A"),_(),m(10,"span",20),C(11),_()(),rn()}if(2&t){const e=M();b(6),S("min",10)("max",24)("step",2),b(),S("ngModel",e.font_size),b(4),xe(" ",e.font_size,"px ")}}let uue=(()=>{class t extends bn{get dark_mode(){return"dark"===this._settings.get("theme")}get can_change_dark_mode(){return!!this._settings.get("app.general.dark_mode")}get accessible(){return!!this._settings.get("accessible")}get font_size(){return this._settings.get("font_size")||16}constructor(e,i){super(),this._data=e,this._settings=i,this.applySetting=(s,r)=>this.timeout("apply_setting",()=>this._settings.saveUserSetting(s,r),1e3),this.close=()=>this._data?.close()}setDarkMode(e){const i=this._settings.get("theme");e&&"dark"!==i?this._settings.setTheme("dark"):!e&&"dark"===i&&this._settings.setTheme("light")}static#e=this.\u0275fac=function(i){return new(i||t)(D(cg),D(ln))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["accessibility-tooltip"]],features:[bt],decls:15,vars:3,consts:()=>{let e,i,s,r;return e=$localize`:␟d22b673a92b43eabbdebd80b1539a553703c84f6␟6572705143012462182:Display & Accessibility`,i=$localize`:␟0f027c150c7e9465a5cdf64c4d07c33aca92384d␟127744830115363320:Large Accessibility Sizes`,s=$localize`:␟c943d5ecc32b916a210d7c984fe5f55771ad0b1a␟3279636347259347513:Dark Mode`,r=$localize`:␟3fc32876e34616b005d861eafe737cf4d2793184␟8609643488577372847: Adjust your preferred reading size below. `,[e,i,s,r,[1,"flex","flex-col","w-[18.5rem]","rounded","bg-base-100","shadow","relative","-top-12","-right-1","overflow-hidden"],[1,"flex","items-center","space-x-2","p-2",3,"click"],[1,"text-2xl"],[1,""],["action","","class","flex items-center space-x-2 w-full text-left h-auto px-4",4,"ngIf"],["action","",1,"flex","items-center","space-x-2","w-full","text-left","h-auto","px-4"],[1,"flex","items-center","justify-center","rounded-full","w-8","h-8","bg-base-200","my-2"],[1,"text-xl"],[1,"flex-1","text-sm"],[3,"ngModelChange","ngModel"],[4,"ngIf"],[1,"px-8","py-4","bg-base-200","text-center"],[1,"flex","items-center","px-4","space-x-4"],[1,"text-sm"],[1,"flex-1","w-1/2","text-[16px]",3,"min","max","step"],["matSliderThumb","",1,"text-[16px]",3,"ngModelChange","ngModel"],[1,"text-base","py-1","px-2","rounded","bg-base-300","text-white","my-2"]]},template:function(i,s){1&i&&(m(0,"div",4)(1,"div",5),te("click",function(){return s.close()}),m(2,"app-icon",6),C(3,"arrow_back"),_(),m(4,"div",7),Ne(5,0),_()(),K(6,nJe,7,1,"div",8),m(7,"div",9)(8,"div",10)(9,"app-icon",11),C(10,"playlist_add"),_()(),m(11,"div",12),Ne(12,1),_(),m(13,"mat-slide-toggle",13),te("ngModelChange",function(o){return s.applySetting("accessible",o)}),_()(),K(14,iJe,12,5,"ng-container",14),_()),2&i&&(b(6),S("ngIf",s.can_change_dark_mode),b(7),S("ngModel",s.accessible),b(),S("ngIf",s.accessible))},dependencies:[Ot,Mr,oi,wi,r5,PS,VD,zt],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%] > [action][_ngcontent-%COMP%]{border-top:1px solid #ccc}"]})}return t})();function sJe(t,n){if(1&t){const e=Le();m(0,"mat-radio-button",8),te("click",function(){const s=re(e).$implicit;return oe(M().setBuilding(s))}),C(1),_()}if(2&t){const e=n.$implicit;S("value",e.id),b(),xe(" ",e.display_name||e.name," ")}}let due=(()=>{class t{constructor(e,i){this._data=e,this._org=i,this.buildings=this._org.active_buildings,this.building=this._org.active_building,this.setBuilding=s=>{this._org.building=s,this._org.saveBuilding(s.id),this._data?.close()},this.close=()=>this._data?.close()}static#e=this.\u0275fac=function(i){return new(i||t)(D(cg),D(In))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["building-select"]],decls:14,vars:11,consts:()=>{let e;return e=$localize`:␟f6bc545a20f571c426f74d4d3522b71334f2b845␟4543839253815117286: Select a building location `,[e,[1,"flex","flex-col","w-[18.5rem]","rounded","bg-base-100","shadow","p-2","relative","-top-12","-right-1","overflow-auto","max-h-[65vh]",3,"click"],[1,"flex","items-center","space-x-2"],[1,"text-2xl"],[1,""],[1,"text-xs","opacity-60","mb-4","px-2"],[1,"flex","flex-col","space-y-2","px-2",3,"ngModel"],[3,"value","click",4,"ngFor","ngForOf"],[3,"click","value"]]},template:function(i,s){if(1&i&&(m(0,"div",1),te("click",function(){return s.close()}),m(1,"div",2)(2,"app-icon",3),C(3,"arrow_back"),_(),m(4,"div",4),C(5),ge(6,"async"),ge(7,"async"),_()(),m(8,"div",5),Ne(9,0),_(),m(10,"mat-radio-group",6),ge(11,"async"),K(12,sJe,2,2,"mat-radio-button",7),ge(13,"async"),_()()),2&i){let r,o;b(5),xe(" ",(null==(r=Me(6,3,s.building))?null:r.display_name)||(null==(r=Me(7,5,s.building))?null:r.name)," "),b(5),S("ngModel",null==(o=Me(11,7,s.building))?null:o.id),b(2),S("ngForOf",Me(13,9,s.buildings))}},dependencies:[hn,oi,wi,ry,j_,zt,yi]})}return t})();function rJe(t,n){if(1&t&&(m(0,"a",6)(1,"div",7)(2,"div",8),be(3,"app-icon",9),_(),m(4,"div",10),C(5),_()()()),2&t){const e=n.$implicit;S("href",e.link,Ia),b(3),S("icon",e.icon),b(2),vt(e.name)}}let hue=(()=>{class t{get tiles(){return this._settings.get("app.help")||[]}constructor(e,i){this._data=e,this._settings=i,this.close=()=>{this._data?.close()}}static#e=this.\u0275fac=function(i){return new(i||t)(D(cg),D(ln))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["help-tooltip"]],decls:7,vars:1,consts:()=>{let e;return e=$localize`:␟258586f2141d5b6c98ef28c38ac6f55a81a301b2␟7393197899734735120:Help & Support`,[e,[1,"flex","flex-col","w-[18.5rem]","rounded","bg-base-100","shadow","relative","-top-12","-right-1","divide-y","divide-base-200",3,"click"],[1,"flex","items-center","space-x-2","p-2","border-b"],[1,"text-2xl"],[1,""],["btn","","matRipple","","class","clear w-full text-left h-auto","target","_blank","ref","noreferer noopener",3,"href",4,"ngFor","ngForOf"],["btn","","matRipple","","target","_blank","ref","noreferer noopener",1,"clear","w-full","text-left","h-auto",3,"href"],[1,"flex","items-center","space-x-2","py-2","w-full"],[1,"flex","items-center","justify-center","rounded-full","w-8","h-8","bg-base-200"],[1,"text-xl",3,"icon"],[1,"flex-1"]]},template:function(i,s){1&i&&(m(0,"div",1),te("click",function(){return s.close()}),m(1,"div",2)(2,"app-icon",3),C(3,"arrow_back"),_(),m(4,"div",4),Ne(5,0),_()(),K(6,rJe,6,3,"a",5),_()),2&i&&(b(6),S("ngForOf",s.tiles))},dependencies:[hn,jt,zt],styles:["a[_ngcontent-%COMP%]:not(:last-child){border-bottom-width:1px!important;border-bottom-style:solid!important;border-radius:0}"]})}return t})();function oJe(t,n){if(1&t){const e=Le();m(0,"button",6),te("click",function(){const s=re(e).$implicit;return oe(M().setLocale(s.id))}),C(1),_()}if(2&t){const e=n.$implicit;b(),Ts(" ",e.name," - ",e.flag," ")}}let fue=(()=>{class t{get locales(){return this._settings.get("app.locales")||[]}constructor(e,i,s){this._data=e,this._settings=i,this._translation=s,this.setLocale=r=>{this._translation.use(r),localStorage.setItem("PLACEOS.locale",r)},this.close=()=>this._data?.close()}static#e=this.\u0275fac=function(i){return new(i||t)(D(cg),D(ln),D(pS))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["language-select"]],decls:11,vars:7,consts:[[1,"flex","flex-col","w-[18.5rem]","rounded","bg-base-100","shadow","relative","-top-12","-right-1",3,"click"],[1,"flex","items-center","space-x-2","p-2"],[1,"text-2xl"],[1,""],[1,"text-xs","opacity-60","mb-4","px-2","p-4"],["class","w-full p-4 border-t border-base-200 text-left",3,"click",4,"ngFor","ngForOf"],[1,"w-full","p-4","border-t","border-base-200","text-left",3,"click"]],template:function(i,s){1&i&&(m(0,"div",0),te("click",function(){return s.close()}),m(1,"div",1)(2,"app-icon",2),C(3,"arrow_back"),_(),m(4,"div",3),C(5),ge(6,"translate"),_()(),m(7,"div",4),C(8),ge(9,"translate"),_(),K(10,oJe,2,2,"button",5),_()),2&i&&(b(5),vt(Me(6,3,"COMMON.LANGUAGE")),b(3),xe(" ",Me(9,5,"COMMON.LANGUAGE_SELECT")," "),b(2),S("ngForOf",s.locales))},dependencies:[hn,zt,Jh]})}return t})();function aJe(t,n){if(1&t){const e=Le();m(0,"mat-radio-button",8),te("click",function(){const s=re(e).$implicit;return oe(M().setRegion(s))}),C(1),_()}if(2&t){const e=n.$implicit;S("value",e.id),b(),xe(" ",e.display_name||e.name," ")}}let pue=(()=>{class t{constructor(e,i){var s=this;this._data=e,this._org=i,this.regions=this._org.region_list,this.region=this._org.active_region,this.setRegion=function(){var r=de(function*(o){yield s._org.setRegion(o),s._org.saveBuilding(s._org.building.id),s._data?.close()});return function(o){return r.apply(this,arguments)}}(),this.close=()=>this._data?.close()}static#e=this.\u0275fac=function(i){return new(i||t)(D(cg),D(In))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["region-select"]],decls:14,vars:11,consts:()=>{let e;return e=$localize`:␟234e996785a944c8e8c7df16179eaa04405b3446␟5361505502593902636:Select a region`,[e,[1,"flex","flex-col","w-[18.5rem]","rounded","bg-base-100","shadow","p-2","relative","-top-12","-right-1","overflow-auto","max-h-[65vh]",3,"click"],[1,"flex","items-center","space-x-2"],[1,"text-2xl"],[1,""],[1,"text-xs","opacity-60","mb-4","px-2"],[1,"flex","flex-col","space-y-2","px-2",3,"ngModel"],[3,"value","click",4,"ngFor","ngForOf"],[3,"click","value"]]},template:function(i,s){if(1&i&&(m(0,"div",1),te("click",function(){return s.close()}),m(1,"div",2)(2,"app-icon",3),C(3,"arrow_back"),_(),m(4,"div",4),C(5),ge(6,"async"),ge(7,"async"),_()(),m(8,"div",5),Ne(9,0),_(),m(10,"mat-radio-group",6),ge(11,"async"),K(12,aJe,2,2,"mat-radio-button",7),ge(13,"async"),_()()),2&i){let r,o;b(5),xe(" ",(null==(r=Me(6,3,s.region))?null:r.display_name)||(null==(r=Me(7,5,s.region))?null:r.name)," "),b(5),S("ngModel",null==(o=Me(11,7,s.region))?null:o.id),b(2),S("ngForOf",Me(13,9,s.regions))}},dependencies:[hn,oi,wi,ry,j_,zt,yi]})}return t})();function lJe(t,n){if(1&t&&(m(0,"mat-option",34),C(1),_()),2&t){const e=n.$implicit;S("value",e.display_name||e.name),b(),xe(" ",e.display_name||e.name," ")}}function cJe(t,n){if(1&t&&(m(0,"mat-option",34),C(1),_()),2&t){const e=n.$implicit;S("value",(null==e?null:e.name)||e),b(),xe(" ",e.name||e," ")}}function uJe(t,n){if(1&t&&(m(0,"div",24)(1,"label"),Ne(2,9),_(),m(3,"mat-form-field",25)(4,"mat-select",35),K(5,cJe,2,2,"mat-option",27),_()()()),2&t){const e=M(2);b(5),S("ngForOf",e.support_request_types)}}function dJe(t,n){1&t&&(m(0,"mat-error",36),Ne(1,10),_())}function hJe(t,n){1&t&&(m(0,"div")(1,"label",29),Ne(2,11),_(),be(3,"image-list-field",37),_())}function fJe(t,n){if(1&t&&(m(0,"main",17)(1,"form",18)(2,"div",19)(3,"div",20)(4,"label"),Ri(5,2),be(6,"span"),Fi(),_(),m(7,"mat-form-field",21),be(8,"input",22),m(9,"mat-error"),Ne(10,3),_()()(),m(11,"div",20)(12,"label"),Ri(13,4),be(14,"span"),Fi(),_(),m(15,"mat-form-field",21),be(16,"input",23),m(17,"mat-error"),Ne(18,5),_()()()(),m(19,"div",24)(20,"label"),Ne(21,6),_(),m(22,"mat-form-field",25)(23,"mat-select",26),K(24,lJe,2,2,"mat-option",27),ge(25,"async"),_()()(),K(26,uJe,6,1,"div",28),m(27,"div")(28,"label",29),Ri(29,7),be(30,"span"),Fi(),_(),be(31,"rich-text-input",30),K(32,dJe,2,0,"mat-error",31),_(),K(33,hJe,4,0,"div",32),_(),m(34,"div",33),Ne(35,8),_()()),2&t){const e=M();b(),S("formGroup",e.form),b(23),S("ngForOf",Me(25,5,e.buildings)),b(2),S("ngIf",null==e.support_request_types?null:e.support_request_types.length),b(6),S("ngIf",e.desc_error),b(),S("ngIf",e.allow_images)}}function pJe(t,n){if(1&t){const e=Le();m(0,"footer",38)(1,"button",39),te("click",function(){return re(e),oe(M().submit())}),Ne(2,12),_()()}}function mJe(t,n){1&t&&(m(0,"main",40),be(1,"mat-spinner",41),m(2,"p"),C(3,"Sending support ticket..."),_()()),2&t&&(b(),S("diameter",32))}let jB=(()=>{class t{get desc_error(){return!this.form.controls.description.valid&&this.form.controls.description.touched}get support_email(){return this._settings.get("app.support_email")||"support@place.tech"}get support_request_types(){return this._settings.get("app.support_issue_types")||[]}get allow_images(){return this._settings.get("app.allow_support_ticket_images")}constructor(e,i,s){this._dialog_ref=e,this._org=i,this._settings=s,this.loading=!1,this.form=new ml({name:new _t("",[$r.required]),email:new _t("",[$r.required]),location:new _t(""),description:new _t("",[$r.required]),issue_type:new _t(""),images:new _t([])}),this.buildings=this._org.building_list}ngOnInit(){const e=fn();e&&this.form.patchValue({name:e.name,email:e.email}),this._org.building&&this.form.patchValue({location:this._org.building.display_name||this._org.building.name})}submit(){var e=this;return de(function*(){if(e.loading=!0,e.form.markAllAsTouched(),e.form.updateValueAndValidity(),e.form.valid){const i=e._org.binding("smtp");if(!i)return Mi("Mailing system not configured for application.");const s=Vr(i,"Mailer"),{name:r,email:o,location:a,description:l,images:c,issue_type:u}=e.form.value,d=e.support_request_types.find(h=>h.name===u)?.email||e.support_email;yield s.execute("send_mail",[d,"Support Ticket from Workplace Application"+(u?" - "+u:""),`${r}\n${o}\n\n${a}\n\n${l.replace(/<[^>]+>/g,"")}\n\n${c.join("\n")}`,`<p>${r}</p><p>${o}</p><p>${a}</p><p>${l}</p>${c.join("<br>")}`,[],[],[],[],null,`${o}`]),e._dialog_ref.close(),e.loading=!1,Zd("Successfully submitted support ticket")}})()}static#e=this.\u0275fac=function(i){return new(i||t)(D(Da),D(In),D(ln))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["support-ticket-modal"]],decls:10,vars:3,consts:()=>{let e,i,s,r,o,a,l,c,u,d,h,f;return e=$localize`:␟b862b54c42ded9ebb47260f60b0f75985c5fab18␟270482714535552546:Raise a support ticket`,i=$localize`:␟84f7804a7a51f1144c5a3fda7b9b881af4212c4a␟5257092898921510014:Name${"\ufffd#6\ufffd"}:START_TAG_SPAN:*${"\ufffd/#6\ufffd"}:CLOSE_TAG_SPAN:`,s=$localize`:␟5b752f143ab30faa45a2679b5e7a28bbf3fb246d␟3833692663709091545:Name is required`,r=$localize`:␟15032ab5f5dcf10cb837008e8ff61acb42e957db␟8600249315708032613:Email${"\ufffd#14\ufffd"}:START_TAG_SPAN:*${"\ufffd/#14\ufffd"}:CLOSE_TAG_SPAN:`,o=$localize`:␟9b2fd2a81342b5821f47ce0e6f2383b1403fd659␟8552587679160911578:Email is required`,a=$localize`:␟ed31c09fd77c36238c13d83635f3fe5294c733d2␟471816275243265264:Location`,l=$localize`:␟bd571e4b6aa662ccde3593b99728c60a9c4e2722␟5204458475414246750: Issue Description${"\ufffd#30\ufffd"}:START_TAG_SPAN:*${"\ufffd/#30\ufffd"}:CLOSE_TAG_SPAN:`,c=$localize`:␟860180fb81e0877ec8059acbf30938f5d31daede␟2365971609064887430: Completing this form will raise an incident in your support management platform `,u=$localize`:␟712648c55b8f81cc494ffeff1c304f275dcafc61␟3187063371811307868:Issue Type`,d=$localize`:␟ae855fe6e11d47178c1051e1a3f9e78c5bb7fb4e␟124716140796903078: Description is required `,h=$localize`:␟b73f7f5060fb22a1e9ec462b1bb02493fa3ab866␟414887388288176527:Images`,f=$localize`:␟932802b79d36312ecbe949fc5b703fef638f41df␟1413112058430688330: Submit `,[["load_state",""],e,i,s,r,o,a,l,c,u,d,h,f,[1,"flex","items-center","justify-between"],["icon","","mat-dialog-close",""],["class","w-[32rem] max-w-[85vw]",4,"ngIf","ngIfElse"],["class","p-2 border-t border-base-200 flex items-center justify-center",4,"ngIf"],[1,"w-[32rem]","max-w-[85vw]"],[1,"p-2",3,"formGroup"],[1,"flex","items-center","sm:space-x-2","flex-wrap"],[1,"flex","flex-col","flex-1"],["appearance","outline"],["matInput","","placeholder","Name","formControlName","name"],["matInput","","placeholder","Email","formControlName","email"],[1,"flex","flex-col"],["appearance","outline",1,"w-full"],["placeholder","Location","formControlName","location"],[3,"value",4,"ngFor","ngForOf"],["class","flex flex-col",4,"ngIf"],[1,"mb-4"],["placeholder","Issue Description","formControlName","description"],["class","text-xs my-2",4,"ngIf"],[4,"ngIf"],[1,"italic","text-center","text-xs","mb-2"],[3,"value"],["placeholder","Issue Type","formControlName","issue_type"],[1,"text-xs","my-2"],["formControlName","images"],[1,"p-2","border-t","border-base-200","flex","items-center","justify-center"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"w-[32rem]","min-h-[24rem]","max-w-[100vw]","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]]},template:function(i,s){if(1&i&&(m(0,"header",13)(1,"h2"),Ne(2,1),_(),m(3,"button",14)(4,"app-icon"),C(5,"close"),_()()(),K(6,fJe,36,7,"main",15)(7,pJe,3,0,"footer",16)(8,mJe,4,1,"ng-template",null,0,mn)),2&i){const r=Gt(9);b(6),S("ngIf",!s.loading)("ngIfElse",r),b(),S("ngIf",!s.loading)}},styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]})}return t})();function _Je(t,n){if(1&t&&(m(0,"div",32)(1,"button",18)(2,"div",19)(3,"div",20)(4,"app-icon"),C(5,"layers"),_()(),m(6,"div",33),C(7),ge(8,"async"),ge(9,"async"),_(),m(10,"app-icon",22),C(11," chevron_right "),_()()()()),2&t){let e;const i=M();S("content",i.region_select),b(7),xe(" ",(null==(e=Me(8,2,i.region))?null:e.display_name)||(null==(e=Me(9,4,i.region))?null:e.name)," ")}}function gJe(t,n){if(1&t&&(m(0,"div",32)(1,"button",18)(2,"div",19)(3,"div",20)(4,"app-icon"),C(5,"business"),_()(),m(6,"div",33),C(7),ge(8,"async"),ge(9,"async"),_(),m(10,"app-icon",22),C(11," chevron_right "),_()()()()),2&t){let e;const i=M();S("content",i.building_select),b(7),xe(" ",(null==(e=Me(8,2,i.building))?null:e.display_name)||(null==(e=Me(9,4,i.building))?null:e.name)," ")}}function bJe(t,n){1&t&&(m(0,"div",17)(1,"button",18)(2,"div",19)(3,"div",20)(4,"app-icon"),C(5,"help"),_()(),m(6,"div",21),Ne(7,4),_(),m(8,"app-icon",22),C(9,"chevron_right"),_()()()()),2&t&&S("content",M().help_tooltip)}function vJe(t,n){if(1&t){const e=Le();m(0,"div")(1,"button",34),te("click",function(){return re(e),oe(M().openWfhModal())}),m(2,"div",19)(3,"div",20)(4,"app-icon"),C(5,"share_location"),_()(),m(6,"div",21),Ne(7,5),_(),m(8,"app-icon",22),C(9,"chevron_right"),_()()()()}}function yJe(t,n){if(1&t&&(m(0,"div",17)(1,"button",18)(2,"div",19)(3,"div",20)(4,"app-icon"),C(5,"desk"),_()(),m(6,"div",21),Ne(7,6),_(),m(8,"app-icon",22),C(9,"chevron_right"),_()()()()),2&t){const e=M(),i=Gt(24);rt("!border-b",!(null!=e.locales&&e.locales.length)),S("content",i)}}function wJe(t,n){1&t&&be(0,"desk-height-presets")}function SJe(t,n){1&t&&(m(0,"div",35)(1,"button",18)(2,"div",19)(3,"div",20)(4,"app-icon"),C(5,"mode_night"),_()(),m(6,"div",21),Ne(7,7),ge(8,"translate"),ge(9,"translate"),_(),m(10,"app-icon",22),C(11,"chevron_right"),_()()()()),2&t&&(S("content",M().language_tooltip),b(9),$n(Me(8,3,"COMMON.LANGUAGE_LABEL"))(Me(9,5,"COMMON.LANGUAGE")),zn(7))}function CJe(t,n){if(1&t){const e=Le();m(0,"button",34),te("click",function(){return re(e),oe(M().newSupportTicket())}),m(1,"div",19)(2,"div",20)(3,"app-icon"),C(4,"support_agent"),_()(),m(5,"div",21),Ne(6,8),_()()()}}function xJe(t,n){if(1&t){const e=Le();m(0,"button",36),te("click",function(){return re(e),oe(M().reloadPage())}),C(1," New Version "),_()}}let mue=(()=>{class t{get user(){return fn()}get groups(){return this.user.groups.join("\n")}get version(){return xM}get features(){return this._settings.get("app.features")||[]}get locales(){return this._settings.get("app.locales")||[]}get desk_height(){return this._settings.get("app.desks.height_enabled")}get use_region(){return this._settings.get("app.use_region")}get disable_building_select(){return this._settings.get("app.disable_building_select")}get has_new_version(){return Ele()}constructor(e,i,s){this._settings=e,this._org=i,this._dialog=s,this.building=this._org.active_building,this.region=this._org.active_region,this.regions=this._org.region_list,this.region_select=pue,this.building_select=due,this.help_tooltip=hue,this.accessibility_tooltip=uue,this.language_tooltip=fue}logout(){!function CGe(){const t=()=>{for(let e=0;e<cr.length;e++){const i=cr.key(e);i&&i.indexOf(ur)>=0&&cr.removeItem(i)}const n=Ko?Ko.logout_url:"/logout";setTimeout(()=>{var e;return null===(e=window.location)||void 0===e?void 0:e.assign(n)},300),uf.next(!1)};(function OGe(){return Di.revoke_token||(Di.revoke_token=new Promise((t,n)=>{dn("Auth","Revoking token...");const i=s=>{dn("Auth","Error revoking token.",s),n(s),delete Di.revoke_token};UD(`${Yi.token_uri||"/auth/token"}?token=${Eo()}`,{method:"POST"}).subscribe(s=>{if(!s.ok)return i(s);dn("Auth","Successfully revoked token."),Y_.next(""),VS.next(""),cr.removeItem(`${ur}_access_token`),cr.removeItem(`${ur}_refresh_token`),t(),delete Di.revoke_token},i)})),Di.revoke_token})().then(t,t)}()}reloadPage(){location.reload()}newSupportTicket(){this._settings.get("app.external_support_url")?window.open(this._settings.get("app.external_support_url"),"_blank"):this._dialog.open(jB)}openWfhModal(){this._dialog.open(GB)}viewChangelog(){var e=this;return de(function*(){const i=yield(yield fetch("https://raw.githubusercontent.com/PlaceOS/user-interfaces/develop/CHANGELOG.md")).text();e._dialog.open(Uce,{data:{changelog:i}})})()}saveSetting(e,i){console.log("Save setting",e,i),this._settings.saveUserSetting(e,i)}formatLabel(e){return`${e.toFixed(1)}cm`}static#e=this.\u0275fac=function(i){return new(i||t)(D(ln),D(In),D(wr))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["user-controls"]],decls:41,vars:26,consts:()=>{let e,i,s,r,o,a,l,c;return e=$localize`:␟d22b673a92b43eabbdebd80b1539a553703c84f6␟6572705143012462182:Display & Accessibility`,i=$localize`:␟a9bc2f36435d7979f179c544151bca38e4fe20cc␟3324363634810141643: Sign Out `,s=$localize`:␟0b1694897c27c2a5bbdf582a7f7d2bac898f3505␟6267525301152196009:Version: `,r=$localize`:␟258586f2141d5b6c98ef28c38ac6f55a81a301b2␟7393197899734735120:Help & Support`,o=$localize`:␟e97c857b4582bee9a86c573ca8e2e17150ae003a␟6974851687339955511:Work Location Settings`,a=$localize`:␟6f3ddfacb6cc158043b77530f74c15dc406019fe␟8687640110841202898:Desk Settings`,l=$localize`:␟5a0db2e7be57ba081264f141f3ee4a8b683f1f6e␟6210988327734808594: ${"\ufffd0\ufffd"}:INTERPOLATION:: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,c=$localize`:␟b862b54c42ded9ebb47260f60b0f75985c5fab18␟270482714535552546:Raise a support ticket`,[["desk_height_tooltip",""],e,i,s,r,o,a,l,c,[1,"rounded","bg-base-100","shadow","mt-1","flex","flex-col","relative","divide-y","divide-base-200"],["avatar","",1,"flex","flex-col","items-center","p-2","w-[18rem]"],[1,"text-2xl",3,"user","matTooltip"],[1,""],[1,"text-xs","opacity-60","truncate"],["customTooltip","","class","relative",3,"content",4,"ngIf"],["customTooltip","",3,"content",4,"ngIf"],[4,"ngIf"],["customTooltip","",3,"content"],["btn","","matRipple","",1,"clear","w-full","text-left","h-[3.5rem]"],[1,"w-full","flex","items-center","space-x-2"],[1,"flex","items-center","justify-center","rounded-full","w-8","h-8","bg-base-200"],[1,"flex-1"],[1,"opacity-60","text-2xl"],["customTooltip","",3,"content","!border-b",4,"ngIf"],["customTooltip","","class","!border-b",3,"content",4,"ngIf"],["btn","","matRipple","","class","clear w-full text-left h-[3.5rem]",3,"click",4,"ngIf"],[1,"flex","flex-col","items-center","p-4"],[1,"flex","items-center","justify-center","space-x-2","mb-4"],["btn","","matRipple","",1,"inverse",3,"click"],["btn","","matRipple","",3,"click",4,"ngIf"],[1,"text-xs","opacity-60","w-full"],[1,"underline","p-0","m-0","bg-none","border-none","text-xs",3,"click"],["customTooltip","",1,"relative",3,"content"],[1,"flex-1","truncate","w-px"],["btn","","matRipple","",1,"clear","w-full","text-left","h-[3.5rem]",3,"click"],["customTooltip","",1,"!border-b",3,"content"],["btn","","matRipple","",3,"click"]]},template:function(i,s){if(1&i){const r=Le();m(0,"div",9)(1,"div",10),be(2,"a-user-avatar",11),m(3,"div",12),C(4),_(),m(5,"div",13),C(6),_()(),K(7,_Je,12,6,"div",14),ge(8,"async"),K(9,gJe,12,6,"div",14)(10,bJe,10,1,"div",15)(11,vJe,10,0,"div",16),m(12,"div",17)(13,"button",18)(14,"div",19)(15,"div",20)(16,"app-icon"),C(17,"mode_night"),_()(),m(18,"div",21),Ne(19,1),_(),m(20,"app-icon",22),C(21,"chevron_right"),_()()()(),K(22,yJe,10,3,"div",23)(23,wJe,1,0,"ng-template",null,0,mn)(25,SJe,12,7,"div",24)(26,CJe,7,0,"button",25),m(27,"div",26)(28,"div",27)(29,"button",28),te("click",function(){return re(r),oe(s.logout())}),Ne(30,2),_(),K(31,xJe,2,0,"button",29),_(),m(32,"div",30),sn(33),Ne(34,3),rn(),m(35,"button",31),te("click",function(){return re(r),oe(s.viewChangelog())}),C(36),_()(),m(37,"div",30),C(38),ge(39,"date"),ge(40,"date"),_()()()}2&i&&(b(2),S("user",s.user)("matTooltip",s.groups),b(2),vt(null==s.user?null:s.user.name),b(2),vt(null==s.user?null:s.user.email),b(),S("ngIf",Me(8,18,s.regions).length),b(2),S("ngIf",!s.disable_building_select&&!s.use_region),b(),S("ngIf",s.features.includes("help")),b(),S("ngIf",s.features.includes("wfh")),b(),rt("!border-b",!(null!=s.locales&&s.locales.length&&s.desk_height)),S("content",s.accessibility_tooltip),b(10),S("ngIf",s.desk_height),b(3),S("ngIf",null==s.locales?null:s.locales.length),b(),S("ngIf",s.features.includes("support-ticket")),b(5),S("ngIf",s.has_new_version),b(5),xe(" ",s.version.hash," "),b(2),Ts(" ",Kt(39,20,s.version.time,"longDate")," (",Kt(40,23,s.version.time,"shortTime"),") "))}})}return t})();const HB=new Map;let xl=(()=>{class t extends bn{constructor(e){super(),this._image_el=e}ngOnChanges(e){e.source&&this.source&&this._loadImage()}_loadImage(){var e=this;return de(function*(){if(!e._image_el||!kc())return e.timeout("load",()=>e._loadImage(),300);if(!e.source.includes("/api/engine/v2/uploads"))return void(e._image_el.nativeElement.src=e.source);if(HB.has(e.source))return void(e._image_el.nativeElement.src=HB.get(e.source));const i=Eo();console.log("Image Token:",i),document.cookie=`${"x-api-key"===i?"api-key="+encodeURIComponent(kp()):"bearer_token="+encodeURIComponent(i)};max-age=30;path=/api/engine/v2/uploads;samesite=strict;${"https:"===location.protocol?"secure;":""}`;const r=yield(yield fetch(e.source)).blob(),o=URL.createObjectURL(r);HB.set(e.source,o),e._image_el.nativeElement.src=o})()}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt))};static#t=this.\u0275dir=pt({type:t,selectors:[["img","auth",""]],inputs:{source:"source"},features:[bt,On]})}return t})(),_ue=(()=>{class t extends bn{get connected(){return!!this._socket}constructor(e,i){super(),this._org=e,this._settings=i,this._chat_messages=new Mt([]),this._progress_message=new Mt(null),this._chat_system=this._org.active_building.pipe(an(s=>!!s),ze(s=>this._org.binding("chat_room"))),this._chat_id="",this.chat_hint=this._chat_system.pipe(an(s=>!!s),nn(s=>{const o=Vr(s,"LLM").binding("user_hint");return this.subscription("binding:LLM:user_hint",o.bind()),o.listen()}),jn(1)),this._change=new Mt(0),this._chat_pipe=Qt([this._chat_system,this._change]).pipe(nn(([s])=>{const r="x-api-key"!==Eo()?`bearer_token=${encodeURIComponent(Eo())}`:`x-api-key=${kp()}`,o=`ws${location.origin.replace("http","")}/api/engine/v2/chatgpt/chat/${encodeURIComponent(s)}?${r}${this._chat_id?"&resume="+encodeURIComponent(this._chat_id):""}`;return this._socket=zoe({url:o,serializer:a=>"object"==typeof a?JSON.stringify(a):a,deserializer:a=>{let l=a.data;try{l=JSON.parse(a.data)}catch{}return l}}),this.subscription("chat-ws",this._socket.subscribe(a=>this._onMessage(a),a=>this._cleanup(),()=>this._cleanup())),this._socket}),jn(1)),this.messages=this._chat_messages.asObservable(),this.progress=this._progress_message.asObservable()}startChat(){if(!this._socket)return this._change.next(Date.now()),Xi("CHAT","Starting chat connection."),this.subscription("chat",this._chat_pipe.subscribe()),()=>this.endChat()}endChat(){Xi("CHAT","Dropping chat connection."),this._socket?.complete(),this._cleanup()}close(){this.endChat(),this._chat_id="",this._chat_messages.next([])}sendMessage(e){e&&(this._onMessage({chat_id:"",message:e,user_id:fn().id}),this._socket?.next(e))}_timeoutSocket(e=55e3){this.timeout("socket",()=>{const i=this._chat_messages.getValue();if(i.length>0&&"assistant"!==i[i.length-1].user_id)return this._timeoutSocket(e);this.endChat()},e)}_cleanup(){this._socket=null,this.unsubWith("chat")}_onMessage(e){e.chat_id&&(this._chat_id=e.chat_id),"progress"===e.type?(this._progress_message.next({id:`msg-${sg(6)}`,chat_id:e.chat_id,message:e.message,content:zce(e.message,{async:!1}),user_id:e.user_id||"assistant",function:e.function,timestamp:Date.now()}),"task_complete"===e.function&&this._settings.post("CHAT:task_complete",e.task_id)):(this._chat_messages.next([...this._chat_messages.getValue(),{id:`msg-${sg(6)}`,chat_id:e.chat_id,message:e.message,content:zce(e.message,{async:!1}),user_id:e.user_id||"assistant",timestamp:Date.now()}]),"response"===e.type&&this._progress_message.next(null)),this._timeoutSocket()}static#e=this.\u0275fac=function(i){return new(i||t)(Re(In),Re(ln))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _f(t,n,e){const i=function dce(t,n){return+Hn(t)-+Hn(n)}(t,n)/boe;return wB(e?.roundingMethod)(i)}let WB=(()=>{class t{transform(e){let s=_f(Date.now(),e);const r=s<0;if(s=Math.abs(s),s<1)return r?"Soon":"Now";if(1===s)return r?"In 1 min":"1 min";if(s<60)return r?`In ${s} min`:`${s} min`;if(s<1440){const o=Math.floor(s/60);return r?`In ${o} hour${1===o?"":"s"}`:ys(e,"H:mm")}return s<10080?(Math.floor(s/1440),ys(e,r?"dd MMM yyyy":"E H:mm")):s<525600?(Math.floor(s/1440),ys(e,r?"dd MMM yyyy":"LLL d H:mm")):"Just now"}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275pipe=rr({name:"dateFrom",type:t,pure:!0})}return t})();const DJe=["input"],MJe=["container"];function AJe(t,n){if(1&t&&(m(0,"div",21),C(1),ge(2,"async"),_()),2&t){const e=M(3);b(),xe(" ",Me(2,1,e.hint)," ")}}function OJe(t,n){1&t&&(m(0,"div",27),C(1," Assistant "),_())}function NJe(t,n){if(1&t){const e=Le();m(0,"div",22),ge(1,"async"),te("click",function(){const s=re(e).$implicit,r=M(3);return oe(r.show_time[s.id]=!r.show_time[s.id])}),m(2,"div",23),K(3,OJe,2,0,"div",24),m(4,"div",25),C(5),ge(6,"dateFrom"),_()(),be(7,"div",26),ge(8,"sanitize"),_()}if(2&t){const e=n.$implicit,i=M(3);rt("pr-4",e.user_id!==i.user.id)("pl-4",e.user_id===i.user.id)("items-left",e.user_id!==i.user.id)("items-end",e.user_id===i.user.id)("waiting-margin",Me(1,13,i.waiting)),b(3),S("ngIf",e.user_id!==i.user.id),b(2),xe(" ",Me(6,15,e.timestamp+i.offset)," "),b(2),S("innerHTML",Me(8,17,e.content),Zc)}}function RJe(t,n){1&t&&(be(0,"div",35),ge(1,"async"),ge(2,"sanitize")),2&t&&S("innerHTML",Me(2,3,Me(1,1,M(4).progress).content),Zc)}function FJe(t,n){if(1&t){const e=Le();m(0,"div",28)(1,"button",29),te("click",function(){re(e);const s=M(3);return oe(s.show_info=!s.show_info)}),m(2,"div",23)(3,"app-icon",30),C(4),ge(5,"async"),_(),m(6,"p",31),C(7),ge(8,"async"),ge(9,"async"),_()(),m(10,"div",32),be(11,"div",33),K(12,RJe,3,5,"div",34),_()()()}if(2&t){const e=M(3);b(4),vt(e.icons[Me(5,3,e.progress).function]||"info"),b(3),xe(" ",Me(8,5,e.progress).message||Me(9,7,e.progress).function," "),b(5),S("ngIf",e.show_info)}}function LJe(t,n){1&t&&(m(0,"div",36),be(1,"div",37)(2,"div",38)(3,"div",39),m(4,"span",40),C(5,"Waiting for reply..."),_()()),2&t&&Wn("bottom",M(3).height+8+"px")}function PJe(t,n){if(1&t){const e=Le();m(0,"div",6)(1,"div",7)(2,"h3",8),C(3,"Virtual Assistant"),_(),m(4,"button",9),te("click",function(){return re(e),oe(M(2).toggleChat())}),m(5,"app-icon"),C(6,"close"),_()()(),m(7,"div",10,0)(9,"div",11)(10,"app-icon",12),C(11,"forum"),_(),m(12,"p",13),C(13),be(14,"br"),C(15," Welcome to the virtual assistant. "),_()(),K(16,AJe,3,3,"div",14),ge(17,"async"),K(18,NJe,9,19,"div",15),ge(19,"async"),K(20,FJe,13,9,"div",16),ge(21,"async"),_(),K(22,LJe,6,2,"div",17),ge(23,"async"),m(24,"div",18)(25,"textarea",19,1),Gn("ngModelChange",function(s){re(e);const r=M(2);return Fn(r.message,s)||(r.message=s),oe(s)}),te("ngModelChange",function(){return re(e),oe(M(2).resizeInput())})("keyup.enter",function(){return re(e),oe(M(2).sendMessage())}),_(),m(27,"button",20),te("click",function(){return re(e),oe(M(2).sendMessage())}),m(28,"app-icon"),C(29,"send"),_()()()()}if(2&t){const e=M(2);b(13),xe(" Hi ",e.user.name,". "),b(3),S("ngIf",Me(17,9,e.hint)),b(2),S("ngForOf",Me(19,11,e.messages)),b(2),S("ngIf",Me(21,13,e.progress)),b(2),S("ngIf",Me(23,15,e.waiting)),b(3),Wn("height",e.height+"px"),Un("ngModel",e.message),b(2),S("disabled",!e.message)}}function $Je(t,n){if(1&t){const e=Le();m(0,"div",3)(1,"button",4),te("click",function(){return re(e),oe(M().toggleChat())}),m(2,"app-icon"),C(3,"chat"),_()(),K(4,PJe,30,17,"div",5),_()}if(2&t){const e=M();b(4),S("ngIf",e.show)}}let gue=(()=>{class t extends bn{get can_show(){return this._settings.get("app.chat.enabled")}toggleChat(){this.show=!this.show,this.show||this._chat.close()}constructor(e,i){super(),this._settings=e,this._chat=i,this.show=!1,this.show_info=!1,this.message="",this.show_time={},this.offset=0,this.height=56,this.icons={list_function_schemas:"help",call_function:"settings",task_complete:"check_circle"},this.hint=this._chat.chat_hint,this.messages=this._chat.messages,this.progress=this._chat.progress,this.waiting=this._chat.messages.pipe(ze(s=>0!==s.length&&s[s.length-1]?.user_id===this.user?.id))}ngOnInit(){this.subscription("current_user",TM.subscribe(e=>this.user=e)),this.subscription("hint",this.hint.subscribe(()=>this.scrollToBottom(500))),this.subscription("messages",this.messages.subscribe(()=>this.scrollToBottom())),this.subscription("progress",this.progress.subscribe(e=>e?this.scrollToBottom():this.show_info=!1)),this.interval("offset",()=>this.offset=this.offset?0:1,2e4)}resizeInput(){this.height=Math.max(this._input_el.nativeElement.scrollHeight,56)}sendMessage(){if(this.message){if(!this._chat.connected)return this._chat.startChat(),this.timeout("send",()=>this.sendMessage(),100);this._chat.sendMessage(this.message),this.message="",this.height=56,setTimeout(()=>this._input_el.nativeElement.focus(),100)}}scrollToBottom(e=300){this.timeout("scroll",()=>{this._container_el?.nativeElement&&(this._container_el.nativeElement.scrollTop=this._container_el.nativeElement.scrollHeight)},e)}static#e=this.\u0275fac=function(i){return new(i||t)(D(ln),D(_ue))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["global-chat"]],viewQuery:function(i,s){if(1&i&&(Zt(DJe,5),Zt(MJe,5)),2&i){let r;xt(r=Et())&&(s._input_el=r.first),xt(r=Et())&&(s._container_el=r.first)}},features:[bt],decls:1,vars:1,consts:[["container",""],["input",""],["class","absolute bottom-0 right-0 p-2",4,"ngIf"],[1,"absolute","bottom-0","right-0","p-2"],["icon","","matRipple","",1,"bg-base-100","rounded-full","border","border-base-300","shadow",3,"click"],["class","absolute bottom-2 right-2 bg-base-200 rounded-xl border border-base-300 shadow overflow-hidden w-[40rem] max-w-[calc(100vw-1rem)]",4,"ngIf"],[1,"absolute","bottom-2","right-2","bg-base-200","rounded-xl","border","border-base-300","shadow","overflow-hidden","w-[40rem]","max-w-[calc(100vw-1rem)]"],[1,"flex","items-center","justify-between","bg-base-100","w-full","p-2","border-b","border-base-300"],[1,"pl-4"],["icon","","matRipple","",3,"click"],[1,"h-[32rem]","max-h-[60vh]","overflow-auto"],[1,"w-full","flex","flex-col","items-center","justify-center","p-8","space-y-2"],[1,"text-8xl"],[1,"text-center","text-xl"],["class","m-2 bg-base-100 border-base-300 p-4 rounded shadow text-sm",4,"ngIf"],["class","flex flex-col m-2",3,"pr-4","pl-4","items-left","items-end","waiting-margin","click",4,"ngFor","ngForOf"],["class","p-4",4,"ngIf"],["class","absolute right-2 flex items-center justify-center space-x-2 p-1 rounded-2xl bg-base-100 border border-neutral",3,"bottom",4,"ngIf"],[1,"flex","bg-base-100","focus-within:outline","outline-info","border-t","border-base-300","max-h-[10rem]","overflow-y-auto"],["placeholder","New message...",1,"p-4","flex-1","w-1/2","focus:outline-none","resize-none","overflow-hidden",3,"ngModelChange","keyup.enter","ngModel"],["icon","","matRipple","",1,"mt-2",3,"click","disabled"],[1,"m-2","bg-base-100","border-base-300","p-4","rounded","shadow","text-sm"],[1,"flex","flex-col","m-2",3,"click"],[1,"flex","items-center","space-x-2"],["class","text-sm text-base-content opacity-60 px-2 py-1",4,"ngIf"],[1,"text-xs","text-base-content","opacity-40","px-2","py-1"],["message","",1,"bg-base-100","border-base-300","p-4","rounded","shadow","text-sm","markdown","selectable",3,"innerHTML"],[1,"text-sm","text-base-content","opacity-60","px-2","py-1"],[1,"p-4"],[1,"block","p-2","rounded","border-base-300","bg-info","text-info-content","w-full",3,"click"],[1,"text-2xl"],[1,"text-sm"],[1,"relative","overflow-hidden","w-full","rounded"],[1,"absolute","inset-0","bg-base-100","opacity-10"],["class","text-xs text-mono text-left p-2 break-words",3,"innerHTML",4,"ngIf"],[1,"text-xs","text-mono","text-left","p-2","break-words",3,"innerHTML"],[1,"absolute","right-2","flex","items-center","justify-center","space-x-2","p-1","rounded-2xl","bg-base-100","border","border-neutral"],[1,"h-2","w-2","bg-neutral","rounded-full","animate-bounce"],[1,"h-2","w-2","bg-neutral","rounded-full","animate-bounce","anim-delay-1"],[1,"h-2","w-2","bg-neutral","rounded-full","animate-bounce","anim-delay-2"],[1,"sr-only"]],template:function(i,s){1&i&&K(0,$Je,5,1,"div",2),2&i&&S("ngIf",s.can_show)},dependencies:[hn,Ot,Mr,oi,wi,jt,zt,yi,ud,WB],styles:[".anim-delay-1[_ngcontent-%COMP%]{animation-delay:.25s}.anim-delay-2[_ngcontent-%COMP%]{animation-delay:.5s}.waiting-margin[_ngcontent-%COMP%]:last-child{padding-bottom:2rem}"]})}return t})();const BJe=["*"];function VJe(t,n){1&t&&(sn(0),C(1," check_circle "),rn())}function zJe(t,n){1&t&&(sn(0),C(1,"cancel"),rn())}function UJe(t,n){1&t&&(sn(0),C(1,"block"),rn())}function GJe(t,n){1&t&&(sn(0),C(1,"info"),rn())}function jJe(t,n){1&t&&(sn(0),C(1,"warning"),rn())}let WC=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Qe({type:t,selectors:[["status-pill"]],inputs:{status:"status"},ngContentSelectors:BJe,decls:10,vars:31,consts:[[1,"flex","items-center","bg-opacity-30","rounded-2xl","px-2","py-1","text-base","space-x-2","font-medium","text-black"],[1,"rounded-full","h-5","w-5","flex","items-center","justify-center"],[1,"text-2xl",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(i,s){1&i&&(Ti(),m(0,"div",0)(1,"div",1)(2,"app-icon",2),K(3,VJe,2,0,"ng-container",3)(4,zJe,2,0,"ng-container",3)(5,UJe,2,0,"ng-container",3)(6,GJe,2,0,"ng-container",3)(7,jJe,2,0,"ng-container",4),_()(),m(8,"div"),un(9),_()()),2&i&&(rt("bg-success-light","success"===s.status)("bg-warning-light","warning"===s.status)("bg-error-light","error"===s.status)("bg-info-light","info"===s.status)("bg-base-200","neutral"===s.status),b(),rt("text-success","success"===s.status)("text-warning","warning"===s.status)("text-error","error"===s.status)("text-info","info"===s.status)("text-base-content","neutral"===s.status)("opacity-40","neutral"===s.status),b(),S("ngSwitch",s.status),b(),S("ngSwitchCase","success"),b(),S("ngSwitchCase","error"),b(),S("ngSwitchCase","neutral"),b(),S("ngSwitchCase","info"),b(2),rt("opacity-40","neutral"===s.status)("text-base-content","neutral"===s.status))},dependencies:[ip,bv,vv,zt]})}return t})(),vue=(()=>{class t{constructor(e){this.url=e}static#e=this.\u0275fac=function(i){return new(i||t)(D(Js))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["image-viewer"]],decls:5,vars:1,consts:[[1,"h-screen","w-screen","bg-base-200"],[1,"object-contain","object-center","w-full","h-full",3,"src"],["icon","","matRipple","","mat-dialog-close","",1,"absolute","top-1","right-1","bg-base-100"]],template:function(i,s){1&i&&(m(0,"div",0),be(1,"img",1),m(2,"button",2)(3,"app-icon"),C(4,"close"),_()()()),2&i&&(b(),S("src",s.url,Ia))},dependencies:[jt,Ms,zt]})}return t})();function vet(t,n){1&t&&(m(0,"div",16),C(1," Before you can set a desk height, presets must be set "),_())}function yet(t,n){if(1&t){const e=Le();m(0,"button",17),te("click",function(){return re(e),oe(M().onClose())}),C(1," Save Presets "),_()}}"0123456789".split(""),"0123456789.".split(""),"abcdefghijklmnopqrstuvwxyz".split(""),"abcdefghijklmnopqrstuvwxyz0123456789".split("");let KB=(()=>{class t{constructor(e){this._settings=e,this.show_close=!1,this.close=new it,this.not_set=!1,this.desk_sitting_height=71,this.desk_standing_height=101}ngOnInit(){this.not_set=!this._settings.get("desk_sitting_height")&&!this._settings.get("desk_standing_height"),this.desk_sitting_height=this._settings.get("desk_sitting_height")||71,this.desk_standing_height=this._settings.get("desk_standing_height")||101}onClose(){this.saveSetting("desk_sitting_height",this.desk_sitting_height),this.saveSetting("desk_standing_height",this.desk_standing_height),this.close.emit()}formatLabel(e){return`${e.toFixed(1)}cm`}saveSetting(e,i){console.log("Save setting",e,i),this._settings.saveUserSetting(e,i)}static#e=this.\u0275fac=function(i){return new(i||t)(D(ln))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["desk-height-presets"]],inputs:{show_close:"show_close"},outputs:{close:"close"},decls:24,vars:8,consts:()=>{let e,i,s;return e=$localize`:␟4a9ae1d6024ac45fcd744f2b33fcc1078684204c␟1586279176802880074:Desk Height Presets`,i=$localize`:␟76aa055a2b4d990ee2773112c433cbca362d5cf3␟2517995078699734025: Desk height presets allow you to store and recall your preferred desk height when checking into a booked desk that supports height adjustment. `,s=$localize`:␟7cdb9f15155eef16ce00f29f1d835dc2360f266f␟3844660402650950250: Set your desk height for the best experience. `,[e,i,s,[1,"relative","p-4","bg-base-100","rounded","shadow","w-[20rem]"],[1,"text-lg","mb-2"],[1,"text-xs","opacity-60","mb-4"],["class","text-xs mb-4 -mx-2 p-2 rounded bg-warning text-warning-content",4,"ngIf"],[1,"flex","flex-col","mt-2"],[1,"flex","items-center","space-x-2"],["min","60","max","80","step","0.5","discrete","",1,"flex-1",3,"displayWith"],["matSliderThumb","",3,"ngModelChange","ngModel"],[1,"text-sm","w-12","text-right"],[1,"flex","items-center","space-x-2","mr-2"],["min","90","max","120","step","0.5","discrete","",1,"flex-1",3,"displayWith"],[1,"text-sm","w-12","text-right","mr-2"],["btn","","matRipple","","class","w-full mt-2",3,"click",4,"ngIf"],[1,"text-xs","mb-4","-mx-2","p-2","rounded","bg-warning","text-warning-content"],["btn","","matRipple","",1,"w-full","mt-2",3,"click"]]},template:function(i,s){1&i&&(m(0,"div",3)(1,"div",4),Ne(2,0),_(),m(3,"div",5),Ne(4,1),_(),K(5,vet,2,0,"div",6),m(6,"div",5),Ne(7,2),_(),m(8,"div",7)(9,"label"),C(10,"Sitting Height"),_(),m(11,"div",8)(12,"mat-slider",9)(13,"input",10),Gn("ngModelChange",function(o){return Fn(s.desk_sitting_height,o)||(s.desk_sitting_height=o),o}),te("ngModelChange",function(o){return s.saveSetting("desk_sitting_height",o)}),_()(),m(14,"div",11),C(15),_()(),m(16,"label"),C(17,"Standing Height"),_(),m(18,"div",12)(19,"mat-slider",13)(20,"input",10),Gn("ngModelChange",function(o){return Fn(s.desk_standing_height,o)||(s.desk_standing_height=o),o}),te("ngModelChange",function(o){return s.saveSetting("desk_standing_height",o)}),_()(),m(21,"div",14),C(22),_()()(),K(23,yet,2,0,"button",15),_()),2&i&&(b(5),S("ngIf",s.not_set&&s.show_close),b(7),S("displayWith",s.formatLabel),b(),Un("ngModel",s.desk_sitting_height),b(2),xe(" ",s.desk_sitting_height.toFixed(1),"cm "),b(4),S("displayWith",s.formatLabel),b(),Un("ngModel",s.desk_standing_height),b(2),xe(" ",s.desk_standing_height.toFixed(1),"cm "),b(),S("ngIf",s.show_close))},dependencies:[Ot,Mr,oi,wi,jt,r5,PS]})}return t})();const wet=[Qv,D8,qd,V_,Tc,Qv,V_,B_,ID,$_,W8,ny,H8,Bre,Wre,Wd,mce,SS,AS,sy,LS,toe,o5,loe];let pg=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:[{provide:Ya,useValue:{}},Xee(Zee())],imports:[ka,Xh,iu,K$.forChild(),wet,Qv,D8,qd,V_,Tc,Qv,V_,B_,ID,$_,W8,ny,H8,Bre,Wre,Wd,mce,SS,AS,sy,LS,toe,o5,loe,K$]})}return t})();Is(pf,function(){return[Ot,xl]},[]),Is(Yl,function(){return[Ot,jt,ou,zt,aue,lue]},function(){return[yi]}),Is(DC,function(){return[Ot,jt,Ms,Ws,zt,Yl]},[]),Is(ug,function(){return[hn,Ot,jt,zt,xl]},[]),Is(xB,function(){return[hn,Ot,ip,bv,vv,Mr,oi,wi,jt,A6e,P6e,mse,zt,cu]},function(){return[yi,Rs,ud]}),Is(mue,function(){return[Ot,jt,ou,zt,pf,cu,KB]},function(){return[yi,Rs,Jh]});const mg="8.20.0",fs=globalThis;function XB(t,n,e){const i=e||fs,s=i.__SENTRY__=i.__SENTRY__||{},r=s[mg]=s[mg]||{};return r[t]||(r[t]=n())}const YB="production";function $y(){return ZB(fs),fs}function ZB(t){const n=t.__SENTRY__=t.__SENTRY__||{};return n.version=n.version||mg,n[mg]=n[mg]||{}}const wue=Object.prototype.toString;function QB(t){switch(wue.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return gf(t,Error)}}function By(t,n){return wue.call(t)===`[object ${n}]`}function Sue(t){return By(t,"ErrorEvent")}function Cue(t){return By(t,"DOMError")}function hu(t){return By(t,"String")}function JB(t){return"object"==typeof t&&null!==t&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function e6(t){return null===t||JB(t)||"object"!=typeof t&&"function"!=typeof t}function Vy(t){return By(t,"Object")}function oA(t){return typeof Event<"u"&&gf(t,Event)}function aA(t){return!(!t||!t.then||"function"!=typeof t.then)}function gf(t,n){try{return t instanceof n}catch{return!1}}function xue(t){return!("object"!=typeof t||null===t||!t.__isVue&&!t._isVue)}const zy=fs,Iet=80;function $p(t,n={}){if(!t)return"<unknown>";try{let e=t;const i=5,s=[];let r=0,o=0;const a=" > ",l=a.length;let c;const u=Array.isArray(n)?n:n.keyAttrs,d=!Array.isArray(n)&&n.maxStringLength||Iet;for(;e&&r++<i&&(c=ket(e,u),!("html"===c||r>1&&o+s.length*l+c.length>=d));)s.push(c),o+=c.length,e=e.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function ket(t,n){const e=t,i=[];if(!e||!e.tagName)return"";if(zy.HTMLElement&&e instanceof HTMLElement&&e.dataset){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}i.push(e.tagName.toLowerCase());const s=n&&n.length?n.filter(o=>e.getAttribute(o)).map(o=>[o,e.getAttribute(o)]):null;if(s&&s.length)s.forEach(o=>{i.push(`[${o[0]}="${o[1]}"]`)});else{e.id&&i.push(`#${e.id}`);const o=e.className;if(o&&hu(o)){const a=o.split(/\s+/);for(const l of a)i.push(`.${l}`)}}const r=["aria-label","type","name","title","alt"];for(const o of r){const a=e.getAttribute(o);a&&i.push(`[${o}="${a}"]`)}return i.join("")}function Eue(){try{return zy.document.location.href}catch{return""}}function Tue(t){if(!zy.HTMLElement)return null;let n=t;for(let i=0;i<5;i++){if(!n)return null;if(n instanceof HTMLElement){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}n=n.parentNode}return null}const Uy=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,t6=["debug","info","warn","error","log","assert","trace"],lA={};function Gy(t){if(!("console"in fs))return t();const n=fs.console,e={},i=Object.keys(lA);i.forEach(s=>{const r=lA[s];e[s]=n[s],n[s]=r});try{return t()}finally{i.forEach(s=>{n[s]=e[s]})}}const Tt=function Aet(){let t=!1;const n={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return t6.forEach(Uy?e=>{n[e]=(...i)=>{t&&Gy(()=>{fs.console[e](`Sentry Logger [${e}]:`,...i)})}}:e=>{n[e]=()=>{}}),n}();function jy(t,n=0){return"string"!=typeof t||0===n||t.length<=n?t:`${t.slice(0,n)}...`}function Iue(t,n){if(!Array.isArray(t))return"";const e=[];for(let i=0;i<t.length;i++){const s=t[i];try{xue(s)?e.push("[VueViewModel]"):e.push(String(s))}catch{e.push("[value cannot be serialized]")}}return e.join(n)}function Bp(t,n=[],e=!1){return n.some(i=>function Oet(t,n,e=!1){return!!hu(t)&&(function Eet(t){return By(t,"RegExp")}(n)?n.test(t):!!hu(n)&&(e?t===n:t.includes(n)))}(t,i,e))}function da(t,n,e){if(!(n in t))return;const i=t[n],s=e(i);"function"==typeof s&&kue(s,i),t[n]=s}function fu(t,n,e){try{Object.defineProperty(t,n,{value:e,writable:!0,configurable:!0})}catch{Uy&&Tt.log(`Failed to add non-enumerable property "${n}" to object`,t)}}function kue(t,n){try{t.prototype=n.prototype=n.prototype||{},fu(t,"__sentry_original__",n)}catch{}}function n6(t){return t.__sentry_original__}function Due(t){if(QB(t))return{message:t.message,name:t.name,stack:t.stack,...Aue(t)};if(oA(t)){const n={type:t.type,target:Mue(t.target),currentTarget:Mue(t.currentTarget),...Aue(t)};return typeof CustomEvent<"u"&&gf(t,CustomEvent)&&(n.detail=t.detail),n}return t}function Mue(t){try{return function xet(t){return typeof Element<"u"&&gf(t,Element)}(t)?$p(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function Aue(t){if("object"==typeof t&&null!==t){const n={};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n}return{}}function ha(t){return i6(t,new Map)}function i6(t,n){if(function Fet(t){if(!Vy(t))return!1;try{const n=Object.getPrototypeOf(t).constructor.name;return!n||"Object"===n}catch{return!0}}(t)){const e=n.get(t);if(void 0!==e)return e;const i={};n.set(t,i);for(const s of Object.keys(t))typeof t[s]<"u"&&(i[s]=i6(t[s],n));return i}if(Array.isArray(t)){const e=n.get(t);if(void 0!==e)return e;const i=[];return n.set(t,i),t.forEach(s=>{i.push(i6(s,n))}),i}return t}function Ar(){const n=fs.crypto||fs.msCrypto;let e=()=>16*Math.random();try{if(n&&n.randomUUID)return n.randomUUID().replace(/-/g,"");n&&n.getRandomValues&&(e=()=>{const i=new Uint8Array(1);return n.getRandomValues(i),i[0]})}catch{}return"10000000100040008000100000000000".replace(/[018]/g,i=>(i^(15&e())>>i/4).toString(16))}function Oue(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function Vp(t){const{message:n,event_id:e}=t;if(n)return n;const i=Oue(t);return i?i.type&&i.value?`${i.type}: ${i.value}`:i.type||i.value||e||"<unknown>":e||"<unknown>"}function s6(t,n,e){const i=t.exception=t.exception||{},s=i.values=i.values||[],r=s[0]=s[0]||{};r.value||(r.value=n||""),r.type||(r.type=e||"Error")}function qC(t,n){const e=Oue(t);if(!e)return;const s=e.mechanism;if(e.mechanism={type:"generic",handled:!0,...s,...n},n&&"data"in n){const r={...s&&s.data,...n.data};e.mechanism.data=r}}function Nue(t){if(t&&t.__sentry_captured__)return!0;try{fu(t,"__sentry_captured__",!0)}catch{}return!1}function Rue(t){return Array.isArray(t)?t:[t]}function cA(){return{traceId:Ar(),spanId:Ar().substring(16)}}const Fue=1e3;function KC(){return Date.now()/Fue}const Zl=function Pet(){const{performance:t}=fs;if(!t||!t.now)return KC;const n=Date.now()-t.now(),e=null==t.timeOrigin?n:t.timeOrigin;return()=>(e+t.now())/Fue}();let uA;const Ql=(()=>{const{performance:t}=fs;if(!t||!t.now)return void(uA="none");const n=36e5,e=t.now(),i=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+e-i):n,r=s<n,o=t.timing&&t.timing.navigationStart,l="number"==typeof o?Math.abs(o+e-i):n;return r||l<n?s<=l?(uA="timeOrigin",t.timeOrigin):(uA="navigationStart",o):(uA="dateNow",i)})();function Hy(t,n={}){if(n.user&&(!t.ipAddress&&n.user.ip_address&&(t.ipAddress=n.user.ip_address),!t.did&&!n.did&&(t.did=n.user.id||n.user.email||n.user.username)),t.timestamp=n.timestamp||Zl(),n.abnormal_mechanism&&(t.abnormal_mechanism=n.abnormal_mechanism),n.ignoreDuration&&(t.ignoreDuration=n.ignoreDuration),n.sid&&(t.sid=32===n.sid.length?n.sid:Ar()),void 0!==n.init&&(t.init=n.init),!t.did&&n.did&&(t.did=`${n.did}`),"number"==typeof n.started&&(t.started=n.started),t.ignoreDuration)t.duration=void 0;else if("number"==typeof n.duration)t.duration=n.duration;else{const e=t.timestamp-t.started;t.duration=e>=0?e:0}n.release&&(t.release=n.release),n.environment&&(t.environment=n.environment),!t.ipAddress&&n.ipAddress&&(t.ipAddress=n.ipAddress),!t.userAgent&&n.userAgent&&(t.userAgent=n.userAgent),"number"==typeof n.errors&&(t.errors=n.errors),n.status&&(t.status=n.status)}const o6="_sentrySpan";function XC(t,n){n?fu(t,o6,n):delete t[o6]}function dA(t){return t[o6]}class a6{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=cA()}clone(){const n=new a6;return n._breadcrumbs=[...this._breadcrumbs],n._tags={...this._tags},n._extra={...this._extra},n._contexts={...this._contexts},n._user=this._user,n._level=this._level,n._session=this._session,n._transactionName=this._transactionName,n._fingerprint=this._fingerprint,n._eventProcessors=[...this._eventProcessors],n._requestSession=this._requestSession,n._attachments=[...this._attachments],n._sdkProcessingMetadata={...this._sdkProcessingMetadata},n._propagationContext={...this._propagationContext},n._client=this._client,n._lastEventId=this._lastEventId,XC(n,dA(this)),n}setClient(n){this._client=n}setLastEventId(n){this._lastEventId=n}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(n){this._scopeListeners.push(n)}addEventProcessor(n){return this._eventProcessors.push(n),this}setUser(n){return this._user=n||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Hy(this._session,{user:n}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(n){return this._requestSession=n,this}setTags(n){return this._tags={...this._tags,...n},this._notifyScopeListeners(),this}setTag(n,e){return this._tags={...this._tags,[n]:e},this._notifyScopeListeners(),this}setExtras(n){return this._extra={...this._extra,...n},this._notifyScopeListeners(),this}setExtra(n,e){return this._extra={...this._extra,[n]:e},this._notifyScopeListeners(),this}setFingerprint(n){return this._fingerprint=n,this._notifyScopeListeners(),this}setLevel(n){return this._level=n,this._notifyScopeListeners(),this}setTransactionName(n){return this._transactionName=n,this._notifyScopeListeners(),this}setContext(n,e){return null===e?delete this._contexts[n]:this._contexts[n]=e,this._notifyScopeListeners(),this}setSession(n){return n?this._session=n:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(n){if(!n)return this;const e="function"==typeof n?n(this):n,[i,s]=e instanceof zp?[e.getScopeData(),e.getRequestSession()]:Vy(e)?[n,n.requestSession]:[],{tags:r,extra:o,user:a,contexts:l,level:c,fingerprint:u=[],propagationContext:d}=i||{};return this._tags={...this._tags,...r},this._extra={...this._extra,...o},this._contexts={...this._contexts,...l},a&&Object.keys(a).length&&(this._user=a),c&&(this._level=c),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),s&&(this._requestSession=s),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,XC(this,void 0),this._attachments=[],this._propagationContext=cA(),this._notifyScopeListeners(),this}addBreadcrumb(n,e){const i="number"==typeof e?e:100;if(i<=0)return this;const s={timestamp:KC(),...n},r=this._breadcrumbs;return r.push(s),this._breadcrumbs=r.length>i?r.slice(-i):r,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(n){return this._attachments.push(n),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:dA(this)}}setSDKProcessingMetadata(n){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...n},this}setPropagationContext(n){return this._propagationContext=n,this}getPropagationContext(){return this._propagationContext}captureException(n,e){const i=e&&e.event_id?e.event_id:Ar();if(!this._client)return Tt.warn("No client configured on scope - will not capture exception!"),i;const s=new Error("Sentry syntheticException");return this._client.captureException(n,{originalException:n,syntheticException:s,...e,event_id:i},this),i}captureMessage(n,e,i){const s=i&&i.event_id?i.event_id:Ar();if(!this._client)return Tt.warn("No client configured on scope - will not capture message!"),s;const r=new Error(n);return this._client.captureMessage(n,e,{originalException:n,syntheticException:r,...i,event_id:s},this),s}captureEvent(n,e){const i=e&&e.event_id?e.event_id:Ar();return this._client?(this._client.captureEvent(n,{...e,event_id:i},this),i):(Tt.warn("No client configured on scope - will not capture event!"),i)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(n=>{n(this)}),this._notifyingListeners=!1)}}const zp=a6;class jet{constructor(n,e){let i,s;i=n||new zp,s=e||new zp,this._stack=[{scope:i}],this._isolationScope=s}withScope(n){const e=this._pushScope();let i;try{i=n(e)}catch(s){throw this._popScope(),s}return aA(i)?i.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),i)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const n=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:n}),n}_popScope(){return!(this._stack.length<=1||!this._stack.pop())}}function Wy(){const n=ZB($y());return n.stack=n.stack||new jet(function Uet(){return XB("defaultCurrentScope",()=>new zp)}(),function Get(){return XB("defaultIsolationScope",()=>new zp)}())}function Het(t){return Wy().withScope(t)}function Wet(t,n){const e=Wy();return e.withScope(()=>(e.getStackTop().scope=t,n(t)))}function Lue(t){return Wy().withScope(()=>t(Wy().getIsolationScope()))}function YC(t){const n=ZB(t);return n.acs?n.acs:function qet(){return{withIsolationScope:Lue,withScope:Het,withSetScope:Wet,withSetIsolationScope:(t,n)=>Lue(n),getCurrentScope:()=>Wy().getScope(),getIsolationScope:()=>Wy().getIsolationScope()}}()}function Cr(){return YC($y()).getCurrentScope()}function Oc(){return YC($y()).getIsolationScope()}function l6(...t){const e=YC($y());if(2===t.length){const[i,s]=t;return i?e.withSetScope(i,s):e.withScope(s)}return e.withScope(t[0])}function Zi(){return Cr().getClient()}const Pue=50,rh="?",$ue=/\(error: (.*)\)/,Bue=/captureMessage|captureException/;function Vue(...t){const n=t.sort((e,i)=>e[0]-i[0]).map(e=>e[1]);return(e,i=0,s=0)=>{const r=[],o=e.split("\n");for(let a=i;a<o.length;a++){const l=o[a];if(l.length>1024)continue;const c=$ue.test(l)?l.replace($ue,"$1"):l;if(!c.match(/\S*Error: /)){for(const u of n){const d=u(c);if(d){r.push(d);break}}if(r.length>=Pue+s)break}}return function Zet(t){if(!t.length)return[];const n=Array.from(t);return/sentryWrapped/.test(hA(n).function||"")&&n.pop(),n.reverse(),Bue.test(hA(n).function||"")&&(n.pop(),Bue.test(hA(n).function||"")&&n.pop()),n.slice(0,Pue).map(e=>({...e,filename:e.filename||hA(n).filename,function:e.function||rh}))}(r.slice(s))}}function Yet(t){return Array.isArray(t)?Vue(...t):t}function hA(t){return t[t.length-1]||{}}const c6="<anonymous>";function bf(t){try{return t&&"function"==typeof t&&t.name||c6}catch{return c6}}function zue(t){const n=t.exception;if(n){const e=[];try{return n.values.forEach(i=>{i.stacktrace.frames&&e.push(...i.stacktrace.frames)}),e}catch{return}}}function oh(t,n=100,e=1/0){try{return u6("",t,n,e)}catch(i){return{ERROR:`**non-serializable** (${i})`}}}function Uue(t,n=3,e=102400){const i=oh(t,n);return function ttt(t){return function ett(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(t))}(i)>e?Uue(t,n-1,e):i}function u6(t,n,e=1/0,i=1/0,s=function Xet(){const t="function"==typeof WeakSet,n=t?new WeakSet:[];return[function e(s){if(t)return!!n.has(s)||(n.add(s),!1);for(let r=0;r<n.length;r++)if(n[r]===s)return!0;return n.push(s),!1},function i(s){if(t)n.delete(s);else for(let r=0;r<n.length;r++)if(n[r]===s){n.splice(r,1);break}}]}()){const[r,o]=s;if(null==n||["number","boolean","string"].includes(typeof n)&&!Number.isNaN(n))return n;const a=function Qet(t,n){try{if("domain"===t&&n&&"object"==typeof n&&n._events)return"[Domain]";if("domainEmitter"===t)return"[DomainEmitter]";if(typeof global<"u"&&n===global)return"[Global]";if(typeof window<"u"&&n===window)return"[Window]";if(typeof document<"u"&&n===document)return"[Document]";if(xue(n))return"[VueViewModel]";if(function Tet(t){return Vy(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}(n))return"[SyntheticEvent]";if("number"==typeof n&&n!=n)return"[NaN]";if("function"==typeof n)return`[Function: ${bf(n)}]`;if("symbol"==typeof n)return`[${String(n)}]`;if("bigint"==typeof n)return`[BigInt: ${String(n)}]`;const e=function Jet(t){const n=Object.getPrototypeOf(t);return n?n.constructor.name:"null prototype"}(n);return/^HTML(\w*)Element$/.test(e)?`[HTMLElement: ${e}]`:`[object ${e}]`}catch(e){return`**non-serializable** (${e})`}}(t,n);if(!a.startsWith("[object "))return a;if(n.__sentry_skip_normalization__)return n;const l="number"==typeof n.__sentry_override_normalization_depth__?n.__sentry_override_normalization_depth__:e;if(0===l)return a.replace("object ","");if(r(n))return"[Circular ~]";const c=n;if(c&&"function"==typeof c.toJSON)try{return u6("",c.toJSON(),l-1,i,s)}catch{}const u=Array.isArray(n)?[]:{};let d=0;const h=Due(n);for(const f in h)if(Object.prototype.hasOwnProperty.call(h,f)){if(d>=i){u[f]="[MaxProperties ~]";break}u[f]=u6(f,h[f],l-1,i,s),d++}return o(n),u}var vf;function yf(t){return new pu(n=>{n(t)})}function fA(t){return new pu((n,e)=>{e(t)})}!function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"}(vf||(vf={}));class pu{constructor(n){pu.prototype.__init.call(this),pu.prototype.__init2.call(this),pu.prototype.__init3.call(this),pu.prototype.__init4.call(this),this._state=vf.PENDING,this._handlers=[];try{n(this._resolve,this._reject)}catch(e){this._reject(e)}}then(n,e){return new pu((i,s)=>{this._handlers.push([!1,r=>{if(n)try{i(n(r))}catch(o){s(o)}else i(r)},r=>{if(e)try{i(e(r))}catch(o){s(o)}else s(r)}]),this._executeHandlers()})}catch(n){return this.then(e=>e,n)}finally(n){return new pu((e,i)=>{let s,r;return this.then(o=>{r=!1,s=o,n&&n()},o=>{r=!0,s=o,n&&n()}).then(()=>{r?i(s):e(s)})})}__init(){this._resolve=n=>{this._setResult(vf.RESOLVED,n)}}__init2(){this._reject=n=>{this._setResult(vf.REJECTED,n)}}__init3(){this._setResult=(n,e)=>{if(this._state===vf.PENDING){if(aA(e))return void e.then(this._resolve,this._reject);this._state=n,this._value=e,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===vf.PENDING)return;const n=this._handlers.slice();this._handlers=[],n.forEach(e=>{e[0]||(this._state===vf.RESOLVED&&e[1](this._value),this._state===vf.REJECTED&&e[2](this._value),e[0]=!0)})}}}const Si=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function d6(t,n,e,i=0){return new pu((s,r)=>{const o=t[i];if(null===n||"function"!=typeof o)s(n);else{const a=o({...n},e);Si&&o.id&&null===a&&Tt.log(`Event processor "${o.id}" dropped event`),aA(a)?a.then(l=>d6(t,l,e,i+1).then(s)).then(null,r):d6(t,a,e,i+1).then(s).then(null,r)}})}const h6="baggage",Gue="sentry-",ntt=/^sentry-/,itt=8192;function jue(t){const n=function stt(t){if(t&&(hu(t)||Array.isArray(t)))return Array.isArray(t)?t.reduce((n,e)=>{const i=Wue(e);return Object.entries(i).forEach(([s,r])=>{n[s]=r}),n},{}):Wue(t)}(t);if(!n)return;const e=Object.entries(n).reduce((i,[s,r])=>(s.match(ntt)&&(i[s.slice(Gue.length)]=r),i),{});return Object.keys(e).length>0?e:void 0}function Hue(t){if(t)return function rtt(t){if(0!==Object.keys(t).length)return Object.entries(t).reduce((n,[e,i],s)=>{const r=`${encodeURIComponent(e)}=${encodeURIComponent(i)}`,o=0===s?r:`${n},${r}`;return o.length>itt?(Uy&&Tt.warn(`Not adding key: ${e} with val: ${i} to baggage header due to exceeding baggage size limits.`),n):o},"")}(Object.entries(t).reduce((e,[i,s])=>(s&&(e[`${Gue}${i}`]=s),e),{}))}function Wue(t){return t.split(",").map(n=>n.split("=").map(e=>decodeURIComponent(e.trim()))).reduce((n,[e,i])=>(e&&i&&(n[e]=i),n),{})}const Nc="sentry.source",que="sentry.sample_rate",ZC="sentry.op",Do="sentry.origin",f6="sentry.idle_span_finish_reason",p6="sentry.measurement_unit",m6="sentry.measurement_value",Kue="sentry.exclusive_time",att=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function _6(t=Ar(),n=Ar().substring(16),e){let i="";return void 0!==e&&(i=e?"-1":"-0"),`${t}-${n}${i}`}const g6="_sentryMetrics";function b6(t){const n=t[g6];if(!n)return;const e={};for(const[,[i,s]]of n)(e[i]||(e[i]=[])).push(ha(s));return e}const utt=0,Xue=1,fa=2;function Yue(t,n){t.setAttribute("http.response.status_code",n);const e=function dtt(t){if(t<400&&t>=100)return{code:Xue};if(t>=400&&t<500)switch(t){case 401:return{code:fa,message:"unauthenticated"};case 403:return{code:fa,message:"permission_denied"};case 404:return{code:fa,message:"not_found"};case 409:return{code:fa,message:"already_exists"};case 413:return{code:fa,message:"failed_precondition"};case 429:return{code:fa,message:"resource_exhausted"};case 499:return{code:fa,message:"cancelled"};default:return{code:fa,message:"invalid_argument"}}if(t>=500&&t<600)switch(t){case 501:return{code:fa,message:"unimplemented"};case 503:return{code:fa,message:"unavailable"};case 504:return{code:fa,message:"deadline_exceeded"};default:return{code:fa,message:"internal_error"}}return{code:fa,message:"unknown_error"}}(n);"unknown_error"!==e.message&&t.setStatus(e)}const Que=1;function htt(t){const{spanId:n,traceId:e}=t.spanContext(),{data:i,op:s,parent_span_id:r,status:o,origin:a}=os(t);return ha({parent_span_id:r,span_id:n,trace_id:e,data:i,op:s,status:o,origin:a})}function ftt(t){const{spanId:n,traceId:e}=t.spanContext(),{parent_span_id:i}=os(t);return ha({parent_span_id:i,span_id:n,trace_id:e})}function Jue(t){const{traceId:n,spanId:e}=t.spanContext();return _6(n,e,gg(t))}function _g(t){return"number"==typeof t?ede(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?ede(t.getTime()):Zl()}function ede(t){return t>9999999999?t/1e3:t}function os(t){if(function mtt(t){return"function"==typeof t.getSpanJSON}(t))return t.getSpanJSON();try{const{spanId:n,traceId:e}=t.spanContext();if(function ptt(t){return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(t)){const{attributes:i,startTime:s,name:r,endTime:o,parentSpanId:a,status:l}=t;return ha({span_id:n,trace_id:e,data:i,description:r,parent_span_id:a,start_timestamp:_g(s),timestamp:_g(o)||void 0,status:tde(l),op:i[ZC],origin:i[Do],_metrics_summary:b6(t)})}return{span_id:n,trace_id:e}}catch{return{}}}function gg(t){const{traceFlags:n}=t.spanContext();return n===Que}function tde(t){if(t&&t.code!==utt)return t.code===Xue?"ok":t.message||"unknown_error"}const bg="_sentryChildSpans",v6="_sentryRootSpan";function nde(t,n){fu(n,v6,t[v6]||t),t[bg]?t[bg].add(n):fu(t,bg,new Set([n]))}function pA(t){const n=new Set;return function e(i){if(!n.has(i)&&gg(i)){n.add(i);const s=i[bg]?Array.from(i[bg]):[];for(const r of s)e(r)}}(t),Array.from(n)}function pa(t){return t[v6]||t}function ma(){const n=YC($y());return n.getActiveSpan?n.getActiveSpan():dA(Cr())}const ide="_frozenDsc";function sde(t,n){fu(t,ide,n)}function mA(t,n){const e=n.getOptions(),{publicKey:i}=n.getDsn()||{},s=ha({environment:e.environment||YB,release:e.release,public_key:i,trace_id:t});return n.emit("createDsc",s),s}function Up(t){const n=Zi();if(!n)return{};const e=mA(os(t).trace_id||"",n),i=pa(t),s=i[ide];if(s)return s;const r=i.spanContext().traceState,o=r&&r.get("sentry.dsc"),a=o&&jue(o);if(a)return a;const l=os(i),c=l.data||{},u=c[que];null!=u&&(e.sample_rate=`${u}`);const h=l.description;return"url"!==c[Nc]&&h&&(e.transaction=h),e.sampled=String(gg(i)),n.emit("createDsc",e,i),e}function rde(t,n){const{extra:e,tags:i,user:s,contexts:r,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:d,propagationContext:h,transactionName:f,span:p}=n;QC(t,"extra",e),QC(t,"tags",i),QC(t,"user",s),QC(t,"contexts",r),QC(t,"sdkProcessingMetadata",a),o&&(t.level=o),f&&(t.transactionName=f),p&&(t.span=p),l.length&&(t.breadcrumbs=[...t.breadcrumbs,...l]),c.length&&(t.fingerprint=[...t.fingerprint,...c]),u.length&&(t.eventProcessors=[...t.eventProcessors,...u]),d.length&&(t.attachments=[...t.attachments,...d]),t.propagationContext={...t.propagationContext,...h}}function QC(t,n,e){if(e&&Object.keys(e).length){t[n]={...t[n]};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[n][i]=e[i])}}function ode(t,n,e,i,s,r){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=t,l={...n,event_id:n.event_id||e.event_id||Ar(),timestamp:n.timestamp||KC()},c=e.integrations||t.integrations.map(v=>v.name);(function Ctt(t,n){const{environment:e,release:i,dist:s,maxValueLength:r=250}=n;"environment"in t||(t.environment="environment"in n?e:YB),void 0===t.release&&void 0!==i&&(t.release=i),void 0===t.dist&&void 0!==s&&(t.dist=s),t.message&&(t.message=jy(t.message,r));const o=t.exception&&t.exception.values&&t.exception.values[0];o&&o.value&&(o.value=jy(o.value,r));const a=t.request;a&&a.url&&(a.url=jy(a.url,r))})(l,t),function Ttt(t,n){n.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...n])}(l,c),s&&s.emit("applyFrameMetadata",n),void 0===n.type&&function xtt(t,n){const e=fs._sentryDebugIds;if(!e)return;let i;const s=ade.get(n);s?i=s:(i=new Map,ade.set(n,i));const r=Object.entries(e).reduce((o,[a,l])=>{let c;const u=i.get(a);u?c=u:(c=n(a),i.set(a,c));for(let d=c.length-1;d>=0;d--){const h=c[d];if(h.filename){o[h.filename]=l;break}}return o},{});try{t.exception.values.forEach(o=>{o.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=r[a.filename])})})}catch{}}(l,t.stackParser);const u=function ktt(t,n){if(!n)return t;const e=t?t.clone():new zp;return e.update(n),e}(i,e.captureContext);e.mechanism&&qC(l,e.mechanism);const d=s?s.getEventProcessors():[],h=function Ket(){return XB("globalScope",()=>new zp)}().getScopeData();r&&rde(h,r.getScopeData()),u&&rde(h,u.getScopeData());const f=[...e.attachments||[],...h.attachments];return f.length&&(e.attachments=f),function gtt(t,n){const{fingerprint:e,span:i,breadcrumbs:s,sdkProcessingMetadata:r}=n;(function btt(t,n){const{extra:e,tags:i,user:s,contexts:r,level:o,transactionName:a}=n,l=ha(e);l&&Object.keys(l).length&&(t.extra={...l,...t.extra});const c=ha(i);c&&Object.keys(c).length&&(t.tags={...c,...t.tags});const u=ha(s);u&&Object.keys(u).length&&(t.user={...u,...t.user});const d=ha(r);d&&Object.keys(d).length&&(t.contexts={...d,...t.contexts}),o&&(t.level=o),a&&"transaction"!==t.type&&(t.transaction=a)})(t,n),i&&function wtt(t,n){t.contexts={trace:ftt(n),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:Up(n),...t.sdkProcessingMetadata};const i=os(pa(n)).description;i&&!t.transaction&&"transaction"===t.type&&(t.transaction=i)}(t,i),function Stt(t,n){t.fingerprint=t.fingerprint?Rue(t.fingerprint):[],n&&(t.fingerprint=t.fingerprint.concat(n)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}(t,e),function vtt(t,n){const e=[...t.breadcrumbs||[],...n];t.breadcrumbs=e.length?e:void 0}(t,s),function ytt(t,n){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...n}}(t,r)}(l,h),d6([...d,...h.eventProcessors],l,e).then(v=>(v&&function Ett(t){const n={};try{t.exception.values.forEach(i=>{i.stacktrace.frames.forEach(s=>{s.debug_id&&(s.abs_path?n[s.abs_path]=s.debug_id:s.filename&&(n[s.filename]=s.debug_id),delete s.debug_id)})})}catch{}if(0===Object.keys(n).length)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const e=t.debug_meta.images;Object.entries(n).forEach(([i,s])=>{e.push({type:"sourcemap",code_file:i,debug_id:s})})}(v),"number"==typeof o&&o>0?function Itt(t,n,e){if(!t)return null;const i={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(s=>({...s,...s.data&&{data:oh(s.data,n,e)}}))},...t.user&&{user:oh(t.user,n,e)},...t.contexts&&{contexts:oh(t.contexts,n,e)},...t.extra&&{extra:oh(t.extra,n,e)}};return t.contexts&&t.contexts.trace&&i.contexts&&(i.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(i.contexts.trace.data=oh(t.contexts.trace.data,n,e))),t.spans&&(i.spans=t.spans.map(s=>({...s,...s.data&&{data:oh(s.data,n,e)}}))),i}(v,o,a):v))}const ade=new WeakMap;const Att=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function _A(t,n){return Cr().captureException(t,function Dtt(t){if(t)return function Mtt(t){return t instanceof zp||"function"==typeof t}(t)||function Ott(t){return Object.keys(t).some(n=>Att.includes(n))}(t)?{captureContext:t}:t}(n))}function lde(t,n){return Cr().captureEvent(t,n)}function cde(t,n){Oc().setContext(t,n)}function dde(t){const n=Zi(),e=Oc(),i=Cr(),{release:s,environment:r=YB}=n&&n.getOptions()||{},{userAgent:o}=fs.navigator||{},a=function $et(t){const n=Zl(),e={sid:Ar(),init:!0,timestamp:n,started:n,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function Vet(t){return ha({sid:`${t.sid}`,init:t.init,started:new Date(1e3*t.started).toISOString(),timestamp:new Date(1e3*t.timestamp).toISOString(),status:t.status,errors:t.errors,did:"number"==typeof t.did||"string"==typeof t.did?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}(e)};return t&&Hy(e,t),e}({release:s,environment:r,user:i.getUser()||e.getUser(),...o&&{userAgent:o},...t}),l=e.getSession();return l&&"ok"===l.status&&Hy(l,{status:"exited"}),hde(),e.setSession(a),i.setSession(a),a}function hde(){const t=Oc(),n=Cr(),e=n.getSession()||t.getSession();e&&function Bet(t,n){let e={};n?e={status:n}:"ok"===t.status&&(e={status:"exited"}),Hy(t,e)}(e),fde(),t.setSession(),n.setSession()}function fde(){const t=Oc(),n=Cr(),e=Zi(),i=n.getSession()||t.getSession();i&&e&&e.captureSession(i)}function pde(t=!1){t?hde():fde()}const mde=[];function Ltt(t){const n=t.defaultIntegrations||[],e=t.integrations;let i;n.forEach(o=>{o.isDefaultInstance=!0}),i=Array.isArray(e)?[...n,...e]:"function"==typeof e?Rue(e(n)):n;const s=function Ftt(t){const n={};return t.forEach(e=>{const{name:i}=e,s=n[i];s&&!s.isDefaultInstance&&e.isDefaultInstance||(n[i]=e)}),Object.values(n)}(i),r=s.findIndex(o=>"Debug"===o.name);if(r>-1){const[o]=s.splice(r,1);s.push(o)}return s}function _de(t,n){for(const e of n)e&&e.afterAllSetup&&e.afterAllSetup(t)}function gde(t,n,e){if(e[n.name])Si&&Tt.log(`Integration skipped because it was already installed: ${n.name}`);else{if(e[n.name]=n,-1===mde.indexOf(n.name)&&"function"==typeof n.setupOnce&&(n.setupOnce(),mde.push(n.name)),n.setup&&"function"==typeof n.setup&&n.setup(t),"function"==typeof n.preprocessEvent){const i=n.preprocessEvent.bind(n);t.on("preprocessEvent",(s,r)=>i(s,r,t))}if("function"==typeof n.processEvent){const i=n.processEvent.bind(n),s=Object.assign((r,o)=>i(r,o,t),{id:n.name});t.addEventProcessor(s)}Si&&Tt.log(`Integration installed: ${n.name}`)}}const $tt=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],bde=(t={})=>({name:"InboundFilters",processEvent(n,e,i){const s=i.getOptions(),r=function Vtt(t={},n={}){return{allowUrls:[...t.allowUrls||[],...n.allowUrls||[]],denyUrls:[...t.denyUrls||[],...n.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...n.ignoreErrors||[],...t.disableErrorDefaults?[]:$tt],ignoreTransactions:[...t.ignoreTransactions||[],...n.ignoreTransactions||[]],ignoreInternal:void 0===t.ignoreInternal||t.ignoreInternal}}(t,s);return function ztt(t,n){return n.ignoreInternal&&function qtt(t){try{return"SentryError"===t.exception.values[0].type}catch{}return!1}(t)?(Si&&Tt.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${Vp(t)}`),!0):function Utt(t,n){return!(t.type||!n||!n.length)&&function Wtt(t){const n=[];let e;t.message&&n.push(t.message);try{e=t.exception.values[t.exception.values.length-1]}catch{}return e&&e.value&&(n.push(e.value),e.type&&n.push(`${e.type}: ${e.value}`)),n}(t).some(e=>Bp(e,n))}(t,n.ignoreErrors)?(Si&&Tt.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Vp(t)}`),!0):function Xtt(t){return!(t.type||!t.exception||!t.exception.values||0===t.exception.values.length||t.message||t.exception.values.some(n=>n.stacktrace||n.type&&"Error"!==n.type||n.value))}(t)?(Si&&Tt.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${Vp(t)}`),!0):function Gtt(t,n){if("transaction"!==t.type||!n||!n.length)return!1;const e=t.transaction;return!!e&&Bp(e,n)}(t,n.ignoreTransactions)?(Si&&Tt.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${Vp(t)}`),!0):function jtt(t,n){if(!n||!n.length)return!1;const e=gA(t);return!!e&&Bp(e,n)}(t,n.denyUrls)?(Si&&Tt.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Vp(t)}.\nUrl: ${gA(t)}`),!0):!function Htt(t,n){if(!n||!n.length)return!0;const e=gA(t);return!e||Bp(e,n)}(t,n.allowUrls)&&(Si&&Tt.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Vp(t)}.\nUrl: ${gA(t)}`),!0)}(n,r)?null:n}});function gA(t){try{let n;try{n=t.exception.values[0].stacktrace.frames}catch{}return n?function Ktt(t=[]){for(let n=t.length-1;n>=0;n--){const e=t[n];if(e&&"<anonymous>"!==e.filename&&"[native code]"!==e.filename)return e.filename||null}return null}(n):null}catch{return Si&&Tt.error(`Cannot extract url for event ${Vp(t)}`),null}}let vde;const yde=new WeakMap,wde=()=>({name:"FunctionToString",setupOnce(){vde=Function.prototype.toString;try{Function.prototype.toString=function(...t){const n=n6(this),e=yde.has(Zi())&&void 0!==n?n:this;return vde.apply(e,t)}}catch{}},setup(t){yde.set(t,!0)}}),Sde=()=>{let t;return{name:"Dedupe",processEvent(n){if(n.type)return n;try{if(function Qtt(t,n){return!(!n||!function Jtt(t,n){const e=t.message,i=n.message;return!(!e&&!i||e&&!i||!e&&i||e!==i||!xde(t,n)||!Cde(t,n))}(t,n)&&!function ent(t,n){const e=Ede(n),i=Ede(t);return!!(e&&i&&e.type===i.type&&e.value===i.value&&xde(t,n)&&Cde(t,n))}(t,n))}(n,t))return Si&&Tt.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=n}}};function Cde(t,n){let e=zue(t),i=zue(n);if(!e&&!i)return!0;if(e&&!i||!e&&i||i.length!==e.length)return!1;for(let s=0;s<i.length;s++){const r=i[s],o=e[s];if(r.filename!==o.filename||r.lineno!==o.lineno||r.colno!==o.colno||r.function!==o.function)return!1}return!0}function xde(t,n){let e=t.fingerprint,i=n.fingerprint;if(!e&&!i)return!0;if(e&&!i||!e&&i)return!1;try{return e.join("")===i.join("")}catch{return!1}}function Ede(t){return t.exception&&t.exception.values&&t.exception.values[0]}const int=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function qy(t,n=!1){const{host:e,path:i,pass:s,port:r,projectId:o,protocol:a,publicKey:l}=t;return`${a}://${l}${n&&s?`:${s}`:""}@${e}${r?`:${r}`:""}/${i&&`${i}/`}${o}`}function Tde(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Ide(t){const n="string"==typeof t?function rnt(t){const n=int.exec(t);if(!n)return void Gy(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});const[e,i,s="",r="",o="",a=""]=n.slice(1);let l="",c=a;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const d=c.match(/^\d+/);d&&(c=d[0])}return Tde({host:r,pass:s,path:l,projectId:c,port:o,protocol:e,publicKey:i})}(t):Tde(t);if(n&&function ont(t){if(!Uy)return!0;const{port:n,projectId:e,protocol:i}=t;return!(["protocol","publicKey","host","projectId"].find(o=>!t[o]&&(Tt.error(`Invalid Sentry Dsn: ${o} missing`),!0))||(e.match(/^\d+$/)?function snt(t){return"http"===t||"https"===t}(i)?n&&isNaN(parseInt(n,10))&&(Tt.error(`Invalid Sentry Dsn: Invalid port ${n}`),1):(Tt.error(`Invalid Sentry Dsn: Invalid protocol ${i}`),1):(Tt.error(`Invalid Sentry Dsn: Invalid projectId ${e}`),1)))}(n))return n}const ant="7";function kde(t){return`${t.protocol?`${t.protocol}:`:""}//${t.host}${t.port?`:${t.port}`:""}${t.path?`/${t.path}`:""}/api/`}function unt(t,n,e){return n||`${function lnt(t){return`${kde(t)}${t.projectId}/envelope/`}(t)}?${function cnt(t,n){return function Net(t){return Object.keys(t).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(t[n])}`).join("&")}({sentry_key:t.publicKey,sentry_version:ant,...n&&{sentry_client:`${n.name}/${n.version}`}})}(t,e)}`}const bA=fs;function S6(){if(!("fetch"in bA))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function C6(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}const Ky={},Dde={};function vg(t,n){Ky[t]=Ky[t]||[],Ky[t].push(n)}function yg(t,n){Dde[t]||(n(),Dde[t]=!0)}function fd(t,n){const e=t&&Ky[t];if(e)for(const i of e)try{i(n)}catch(s){Uy&&Tt.error(`Error while triggering instrumentation handler.\nType: ${t}\nName: ${bf(i)}\nError:`,s)}}const vA=fs,ui=fs;let yA;function wA(t){const n="history";vg(n,t),yg(n,pnt)}function pnt(){if(!function fnt(){const t=vA.chrome;return!(t&&t.app&&t.app.runtime||!("history"in vA)||!vA.history.pushState||!vA.history.replaceState)}())return;const t=ui.onpopstate;function n(e){return function(...i){const s=i.length>2?i[2]:void 0;if(s){const r=yA,o=String(s);yA=o,fd("history",{from:r,to:o})}return e.apply(this,i)}}ui.onpopstate=function(...e){const i=ui.location.href,s=yA;if(yA=i,fd("history",{from:s,to:i}),t)try{return t.apply(this,e)}catch{}},da(ui.history,"pushState",n),da(ui.history,"replaceState",n)}function wg(t,n=[]){return[t,n]}function mnt(t,n){const[e,i]=t;return[e,[...i,n]]}function x6(t,n){const e=t[1];for(const i of e)if(n(i,i[0].type))return!0;return!1}function SA(t){return fs.__SENTRY__&&fs.__SENTRY__.encodePolyfill?fs.__SENTRY__.encodePolyfill(t):(new TextEncoder).encode(t)}function gnt(t){const[n,e]=t;let i=JSON.stringify(n);function s(r){"string"==typeof i?i="string"==typeof r?i+r:[SA(i),r]:i.push("string"==typeof r?SA(r):r)}for(const r of e){const[o,a]=r;if(s(`\n${JSON.stringify(o)}\n`),"string"==typeof a||a instanceof Uint8Array)s(a);else{let l;try{l=JSON.stringify(a)}catch{l=JSON.stringify(oh(a))}s(l)}}return"string"==typeof i?i:function bnt(t){const n=t.reduce((s,r)=>s+r.length,0),e=new Uint8Array(n);let i=0;for(const s of t)e.set(s,i),i+=s.length;return e}(i)}function vnt(t){return[{type:"span"},t]}function ynt(t){const n="string"==typeof t.data?SA(t.data):t.data;return[ha({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}const wnt={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function Mde(t){return wnt[t]}function E6(t){if(!t||!t.sdk)return;const{name:n,version:e}=t.sdk;return{name:n,version:e}}function Ade(t,n,e,i){const s=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:(new Date).toISOString(),...n&&{sdk:n},...!!e&&i&&{dsn:qy(i)},...s&&{trace:ha({...s})}}}class ah extends Error{constructor(n,e="warn"){super(n),this.message=n,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=e}}function CA(t){if("boolean"==typeof t)return Number(t);const n="string"==typeof t?parseFloat(t):t;if(!("number"!=typeof n||isNaN(n)||n<0||n>1))return n;Si&&Tt.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`)}const Ode="Not capturing exception because it's already been captured.";class Int{constructor(n){if(this._options=n,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],n.dsn?this._dsn=Ide(n.dsn):Si&&Tt.warn("No DSN provided, client will not send events."),this._dsn){const e=unt(this._dsn,n.tunnel,n._metadata?n._metadata.sdk:void 0);this._transport=n.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...n.transportOptions,url:e})}}captureException(n,e,i){const s=Ar();if(Nue(n))return Si&&Tt.log(Ode),s;const r={event_id:s,...e};return this._process(this.eventFromException(n,r).then(o=>this._captureEvent(o,r,i))),r.event_id}captureMessage(n,e,i,s){const r={event_id:Ar(),...i},o=JB(n)?n:String(n),a=e6(n)?this.eventFromMessage(o,e,r):this.eventFromException(n,r);return this._process(a.then(l=>this._captureEvent(l,r,s))),r.event_id}captureEvent(n,e,i){const s=Ar();if(e&&e.originalException&&Nue(e.originalException))return Si&&Tt.log(Ode),s;const r={event_id:s,...e};return this._process(this._captureEvent(n,r,(n.sdkProcessingMetadata||{}).capturedSpanScope||i)),r.event_id}captureSession(n){"string"!=typeof n.release?Si&&Tt.warn("Discarded session because of missing or non-string release"):(this.sendSession(n),Hy(n,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(n){const e=this._transport;return e?(this.emit("flush"),this._isClientDoneProcessing(n).then(i=>e.flush(n).then(s=>i&&s))):yf(!0)}close(n){return this.flush(n).then(e=>(this.getOptions().enabled=!1,this.emit("close"),e))}getEventProcessors(){return this._eventProcessors}addEventProcessor(n){this._eventProcessors.push(n)}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationByName(n){return this._integrations[n]}addIntegration(n){const e=this._integrations[n.name];gde(this,n,this._integrations),e||_de(this,[n])}sendEvent(n,e={}){this.emit("beforeSendEvent",n,e);let i=function Ent(t,n,e,i){const s=E6(e),r=t.type&&"replay_event"!==t.type?t.type:"event";!function Cnt(t,n){n&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||n.name,t.sdk.version=t.sdk.version||n.version,t.sdk.integrations=[...t.sdk.integrations||[],...n.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...n.packages||[]])}(t,e&&e.sdk);const o=Ade(t,s,i,n);return delete t.sdkProcessingMetadata,wg(o,[[{type:r},t]])}(n,this._dsn,this._options._metadata,this._options.tunnel);for(const r of e.attachments||[])i=mnt(i,ynt(r));const s=this.sendEnvelope(i);s&&s.then(r=>this.emit("afterSendEvent",n,r),null)}sendSession(n){const e=function xnt(t,n,e,i){const s=E6(e);return wg({sent_at:(new Date).toISOString(),...s&&{sdk:s},...!!i&&n&&{dsn:qy(n)}},["aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()]])}(n,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(e)}recordDroppedEvent(n,e,i){if(this._options.sendClientReports){const s=`${n}:${e}`;Si&&Tt.log(`Adding outcome: "${s}"`),this._outcomes[s]=(this._outcomes[s]||0)+1}}on(n,e){const i=this._hooks[n]=this._hooks[n]||[];return i.push(e),()=>{const s=i.indexOf(e);s>-1&&i.splice(s,1)}}emit(n,...e){const i=this._hooks[n];i&&i.forEach(s=>s(...e))}sendEnvelope(n){return this.emit("beforeEnvelope",n),this._isEnabled()&&this._transport?this._transport.send(n).then(null,e=>(Si&&Tt.error("Error while sending event:",e),e)):(Si&&Tt.error("Transport disabled"),yf({}))}_setupIntegrations(){const{integrations:n}=this._options;this._integrations=function Ptt(t,n){const e={};return n.forEach(i=>{i&&gde(t,i,e)}),e}(this,n),_de(this,n)}_updateSessionFromEvent(n,e){let i=!1,s=!1;const r=e.exception&&e.exception.values;if(r){s=!0;for(const l of r){const c=l.mechanism;if(c&&!1===c.handled){i=!0;break}}}const o="ok"===n.status;(o&&0===n.errors||o&&i)&&(Hy(n,{...i&&{status:"crashed"},errors:n.errors||Number(s||i)}),this.captureSession(n))}_isClientDoneProcessing(n){return new pu(e=>{let i=0;const r=setInterval(()=>{0==this._numProcessing?(clearInterval(r),e(!0)):(i+=1,n&&i>=n&&(clearInterval(r),e(!1)))},1)})}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(n,e,i,s=Oc()){const r=this.getOptions(),o=Object.keys(this._integrations);return!e.integrations&&o.length>0&&(e.integrations=o),this.emit("preprocessEvent",n,e),n.type||s.setLastEventId(n.event_id||e.event_id),ode(r,n,e,i,this,s).then(a=>{if(null===a)return a;const l={...s.getPropagationContext(),...i?i.getPropagationContext():void 0};if((!a.contexts||!a.contexts.trace)&&l){const{traceId:u,spanId:d,parentSpanId:h,dsc:f}=l;a.contexts={trace:ha({trace_id:u,span_id:d,parent_span_id:h}),...a.contexts};const p=f||mA(u,this);a.sdkProcessingMetadata={dynamicSamplingContext:p,...a.sdkProcessingMetadata}}return a})}_captureEvent(n,e={},i){return this._processEvent(n,e,i).then(s=>s.event_id,s=>{if(Si){const r=s;"log"===r.logLevel?Tt.log(r.message):Tt.warn(r)}})}_processEvent(n,e,i){const s=this.getOptions(),{sampleRate:r}=s,o=T6(n),a=Nde(n),l=n.type||"error",c=`before send for type \`${l}\``,u=typeof r>"u"?void 0:CA(r);if(a&&"number"==typeof u&&Math.random()>u)return this.recordDroppedEvent("sample_rate","error",n),fA(new ah(`Discarding event because it's not included in the random sample (sampling rate = ${r})`,"log"));const d="replay_event"===l?"replay":l;return this._prepareEvent(n,e,i,(n.sdkProcessingMetadata||{}).capturedSpanIsolationScope).then(p=>{if(null===p)throw this.recordDroppedEvent("event_processor",d,n),new ah("An event processor returned `null`, will not send event.","log");if(e.data&&!0===e.data.__sentry__)return p;const v=function Dnt(t,n,e,i){const{beforeSend:s,beforeSendTransaction:r,beforeSendSpan:o}=n;if(Nde(e)&&s)return s(e,i);if(T6(e)){if(e.spans&&o){const a=[];for(const l of e.spans){const c=o(l);c?a.push(c):t.recordDroppedEvent("before_send","span")}e.spans=a}if(r)return r(e,i)}return e}(this,s,p,e);return function knt(t,n){const e=`${n} must return \`null\` or a valid event.`;if(aA(t))return t.then(i=>{if(!Vy(i)&&null!==i)throw new ah(e);return i},i=>{throw new ah(`${n} rejected with ${i}`)});if(!Vy(t)&&null!==t)throw new ah(e);return t}(v,c)}).then(p=>{if(null===p)throw this.recordDroppedEvent("before_send",d,n),T6(n)&&(this._outcomes.span=(this._outcomes.span||0)+(1+(n.spans||[]).length)),new ah(`${c} returned \`null\`, will not send event.`,"log");const g=i&&i.getSession();!o&&g&&this._updateSessionFromEvent(g,p);const v=p.transaction_info;if(o&&v&&p.transaction!==n.transaction){const y="custom";p.transaction_info={...v,source:y}}return this.sendEvent(p,e),p}).then(null,p=>{throw p instanceof ah?p:(this.captureException(p,{data:{__sentry__:!0},originalException:p}),new ah(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${p}`))})}_process(n){this._numProcessing++,n.then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e))}_clearOutcomes(){const n=this._outcomes;return this._outcomes={},Object.entries(n).map(([e,i])=>{const[s,r]=e.split(":");return{reason:s,category:r,quantity:i}})}_flushOutcomes(){Si&&Tt.log("Flushing outcomes...");const n=this._clearOutcomes();if(0===n.length)return void(Si&&Tt.log("No outcomes to send"));if(!this._dsn)return void(Si&&Tt.log("No dsn provided, will not send outcomes"));Si&&Tt.log("Sending outcomes:",n);const e=function Snt(t,n,e){return wg(n?{dsn:n}:{},[[{type:"client_report"},{timestamp:e||KC(),discarded_events:t}]])}(n,this._options.tunnel&&qy(this._dsn));this.sendEnvelope(e)}}function Nde(t){return void 0===t.type}function T6(t){return"transaction"===t.type}function Rde(t,n,e=[n],i="npm"){const s=t._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${n}`,packages:e.map(r=>({name:`${i}:@sentry/${r}`,version:mg})),version:mg}),t._metadata=s}const Jl=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function I6(t,n){const e=D6(t,n),i={type:n&&n.name,value:Lnt(n)};return e.length&&(i.stacktrace={frames:e}),void 0===i.type&&""===i.value&&(i.value="Unrecoverable error caught"),i}function k6(t,n){return{exception:{values:[I6(t,n)]}}}function D6(t,n){const e=n.stacktrace||n.stack||"",i=function Rnt(t){return t&&Nnt.test(t.message)?1:0}(n),s=function Fnt(t){return"number"==typeof t.framesToPop?t.framesToPop:0}(n);try{return t(e,i,s)}catch{}return[]}const Nnt=/Minified React error #\d+;/i;function Lnt(t){const n=t&&t.message;return n?n.error&&"string"==typeof n.error.message?n.error.message:n:"No error message"}function M6(t,n,e,i,s){let r;if(Sue(n)&&n.error)return k6(t,n.error);if(Cue(n)||function Cet(t){return By(t,"DOMException")}(n)){const o=n;if("stack"in n)r=k6(t,n);else{const a=o.name||(Cue(o)?"DOMError":"DOMException"),l=o.message?`${a}: ${o.message}`:a;r=A6(t,l,e,i),s6(r,l)}return"code"in o&&(r.tags={...r.tags,"DOMException.code":`${o.code}`}),r}return QB(n)?k6(t,n):Vy(n)||oA(n)?(r=function Ont(t,n,e,i){const s=Zi(),r=s&&s.getOptions().normalizeDepth,o=function znt(t){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const e=t[n];if(e instanceof Error)return e}}(n),a={__serialized__:Uue(n,r)};if(o)return{exception:{values:[I6(t,o)]},extra:a};const l={exception:{values:[{type:oA(n)?n.constructor.name:i?"UnhandledRejection":"Error",value:Bnt(n,{isUnhandledRejection:i})}]},extra:a};if(e){const c=D6(t,e);c.length&&(l.exception.values[0].stacktrace={frames:c})}return l}(t,n,e,s),qC(r,{synthetic:!0}),r):(r=A6(t,n,e,i),s6(r,`${n}`,void 0),qC(r,{synthetic:!0}),r)}function A6(t,n,e,i){const s={};if(i&&e){const r=D6(t,e);r.length&&(s.exception={values:[{value:n,stacktrace:{frames:r}}]})}if(JB(n)){const{__sentry_template_string__:r,__sentry_template_values__:o}=n;return s.logentry={message:r,params:o},s}return s.message=n,s}function Bnt(t,{isUnhandledRejection:n}){const e=function Ret(t,n=40){const e=Object.keys(Due(t));e.sort();const i=e[0];if(!i)return"[object has no keys]";if(i.length>=n)return jy(i,n);for(let s=e.length;s>0;s--){const r=e.slice(0,s).join(", ");if(!(r.length>n))return s===e.length?r:jy(r,n)}return""}(t),i=n?"promise rejection":"exception";return Sue(t)?`Event \`ErrorEvent\` captured as ${i} with message \`${t.message}\``:oA(t)?`Event \`${function Vnt(t){try{const n=Object.getPrototypeOf(t);return n?n.constructor.name:void 0}catch{}}(t)}\` (type=${t.type}) captured as ${i}`:`Object captured as ${i} with keys: ${e}`}const ii=fs;let O6=0;function Fde(){return O6>0}function Xy(t,n={},e){if("function"!=typeof t)return t;try{const s=t.__sentry_wrapped__;if(s)return s;if(n6(t))return t}catch{return t}const i=function(){const s=Array.prototype.slice.call(arguments);try{e&&"function"==typeof e&&e.apply(this,arguments);const r=s.map(o=>Xy(o,n));return t.apply(this,r)}catch(r){throw function Unt(){O6++,setTimeout(()=>{O6--})}(),l6(o=>{o.addEventProcessor(a=>(n.mechanism&&(s6(a,void 0,void 0),qC(a,n.mechanism)),a.extra={...a.extra,arguments:s},a)),_A(r)}),r}};try{for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s])}catch{}kue(i,t),fu(t,"__sentry_wrapped__",i);try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get:()=>t.name})}catch{}return i}class Hnt extends Int{constructor(n){const e={parentSpanIsAlwaysRootSpan:!0,...n};Rde(e,"browser",["browser"],ii.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&ii.document&&ii.document.addEventListener("visibilitychange",()=>{"hidden"===ii.document.visibilityState&&this._flushOutcomes()})}eventFromException(n,e){return function Pnt(t,n,e,i){const r=M6(t,n,e&&e.syntheticException||void 0,i);return qC(r),r.level="error",e&&e.event_id&&(r.event_id=e.event_id),yf(r)}(this._options.stackParser,n,e,this._options.attachStacktrace)}eventFromMessage(n,e="info",i){return function $nt(t,n,e="info",i,s){const o=A6(t,n,i&&i.syntheticException||void 0,s);return o.level=e,i&&i.event_id&&(o.event_id=i.event_id),yf(o)}(this._options.stackParser,n,e,i,this._options.attachStacktrace)}captureUserFeedback(n){if(!this._isEnabled())return void(Jl&&Tt.warn("SDK not enabled, will not capture user feedback."));const e=function Gnt(t,{metadata:n,tunnel:e,dsn:i}){const s={event_id:t.event_id,sent_at:(new Date).toISOString(),...n&&n.sdk&&{sdk:{name:n.sdk.name,version:n.sdk.version}},...!!e&&!!i&&{dsn:qy(i)}},r=function jnt(t){return[{type:"user_report"},t]}(t);return wg(s,[r])}(n,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(e)}_prepareEvent(n,e,i){return n.platform=n.platform||"javascript",super._prepareEvent(n,e,i)}}const Wnt=1e3;let Lde,N6,R6;function Pde(t){vg("dom",t),yg("dom",qnt)}function qnt(){if(!ui.document)return;const t=fd.bind(null,"dom"),n=$de(t,!0);ui.document.addEventListener("click",n,!1),ui.document.addEventListener("keypress",n,!1),["EventTarget","Node"].forEach(e=>{const i=ui[e]&&ui[e].prototype;!i||!i.hasOwnProperty||!i.hasOwnProperty("addEventListener")||(da(i,"addEventListener",function(s){return function(r,o,a){if("click"===r||"keypress"==r)try{const l=this,c=l.__sentry_instrumentation_handlers__=l.__sentry_instrumentation_handlers__||{},u=c[r]=c[r]||{refCount:0};if(!u.handler){const d=$de(t);u.handler=d,s.call(this,r,d,a)}u.refCount++}catch{}return s.call(this,r,o,a)}}),da(i,"removeEventListener",function(s){return function(r,o,a){if("click"===r||"keypress"==r)try{const l=this,c=l.__sentry_instrumentation_handlers__||{},u=c[r];u&&(u.refCount--,u.refCount<=0&&(s.call(this,r,u.handler,a),u.handler=void 0,delete c[r]),0===Object.keys(c).length&&delete l.__sentry_instrumentation_handlers__)}catch{}return s.call(this,r,o,a)}}))})}function $de(t,n=!1){return e=>{if(!e||e._sentryCaptured)return;const i=function Ynt(t){try{return t.target}catch{return null}}(e);if(function Xnt(t,n){return!("keypress"!==t||n&&n.tagName&&("INPUT"===n.tagName||"TEXTAREA"===n.tagName||n.isContentEditable))}(e.type,i))return;fu(e,"_sentryCaptured",!0),i&&!i._sentryId&&fu(i,"_sentryId",Ar());const s="keypress"===e.type?"input":e.type;(function Knt(t){if(t.type!==N6)return!1;try{if(!t.target||t.target._sentryId!==R6)return!1}catch{}return!0})(e)||(t({event:e,name:s,global:n}),N6=e.type,R6=i?i._sentryId:void 0),clearTimeout(Lde),Lde=ui.setTimeout(()=>{R6=void 0,N6=void 0},Wnt)}}const Sg="__sentry_xhr_v3__";function Bde(t){vg("xhr",t),yg("xhr",Znt)}function Znt(){if(!ui.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;da(t,"open",function(n){return function(...e){const i=1e3*Zl(),s=hu(e[0])?e[0].toUpperCase():void 0,r=function Qnt(t){if(hu(t))return t;try{return t.toString()}catch{}}(e[1]);if(!s||!r)return n.apply(this,e);this[Sg]={method:s,url:r,request_headers:{}},"POST"===s&&r.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const a=this[Sg];if(a&&4===this.readyState){try{a.status_code=this.status}catch{}fd("xhr",{endTimestamp:1e3*Zl(),startTimestamp:i,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?da(this,"onreadystatechange",function(a){return function(...l){return o(),a.apply(this,l)}}):this.addEventListener("readystatechange",o),da(this,"setRequestHeader",function(a){return function(...l){const[c,u]=l,d=this[Sg];return d&&hu(c)&&hu(u)&&(d.request_headers[c.toLowerCase()]=u),a.apply(this,l)}}),n.apply(this,e)}}),da(t,"send",function(n){return function(...e){const i=this[Sg];return i?(void 0!==e[0]&&(i.body=e[0]),fd("xhr",{startTimestamp:1e3*Zl(),xhr:this}),n.apply(this,e)):n.apply(this,e)}})}const Jnt=100;function Gp(t,n){const e=Zi(),i=Oc();if(!e)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:r=Jnt}=e.getOptions();if(r<=0)return;const a={timestamp:KC(),...t},l=s?Gy(()=>s(a,n)):a;null!==l&&(e.emit&&e.emit("beforeAddBreadcrumb",l,n),i.addBreadcrumb(l,r))}function tit(){"console"in fs&&t6.forEach(function(t){t in fs.console&&da(fs.console,t,function(n){return lA[t]=n,function(...e){fd("console",{args:e,level:t});const s=lA[t];s&&s.apply(fs.console,e)}})})}function Vde(t){const n="fetch";vg(n,t),yg(n,nit)}function nit(){(function hnt(){if("string"==typeof EdgeRuntime)return!0;if(!S6())return!1;if(C6(bA.fetch))return!0;let t=!1;const n=bA.document;if(n&&"function"==typeof n.createElement)try{const e=n.createElement("iframe");e.hidden=!0,n.head.appendChild(e),e.contentWindow&&e.contentWindow.fetch&&(t=C6(e.contentWindow.fetch)),n.head.removeChild(e)}catch(e){Uy&&Tt.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t})()&&da(fs,"fetch",function(t){return function(...n){const{method:e,url:i}=function iit(t){if(0===t.length)return{method:"GET",url:""};if(2===t.length){const[e,i]=t;return{url:zde(e),method:F6(i,"method")?String(i.method).toUpperCase():"GET"}}const n=t[0];return{url:zde(n),method:F6(n,"method")?String(n.method).toUpperCase():"GET"}}(n),s={args:n,fetchData:{method:e,url:i},startTimestamp:1e3*Zl()};fd("fetch",{...s});const r=(new Error).stack;return t.apply(fs,n).then(o=>(fd("fetch",{...s,endTimestamp:1e3*Zl(),response:o}),o),o=>{throw fd("fetch",{...s,endTimestamp:1e3*Zl(),error:o}),QB(o)&&void 0===o.stack&&(o.stack=r,fu(o,"framesToPop",1)),o})}})}function F6(t,n){return!!t&&"object"==typeof t&&!!t[n]}function zde(t){return"string"==typeof t?t:t?F6(t,"url")?t.url:t.toString?t.toString():"":""}const sit=["fatal","error","warning","log","info","debug"];function rit(t){return"warn"===t?"warning":sit.includes(t)?t:"log"}function Cg(t){if(!t)return{};const n=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!n)return{};const e=n[6]||"",i=n[8]||"";return{host:n[4],path:n[5],protocol:n[2],search:e,hash:i,relative:n[5]+e+i}}const Ude=(t={})=>{const n={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:"Breadcrumbs",setup(e){n.console&&function eit(t){const n="console";vg(n,t),yg(n,tit)}(function uit(t){return function(e){if(Zi()!==t)return;const i={category:"console",data:{arguments:e.args,logger:"console"},level:rit(e.level),message:Iue(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;i.message=`Assertion failed: ${Iue(e.args.slice(1)," ")||"console.assert"}`,i.data.arguments=e.args.slice(1)}Gp(i,{input:e.args,level:e.level})}}(e)),n.dom&&Pde(function cit(t,n){return function(i){if(Zi()!==t)return;let s,r,o="object"==typeof n?n.serializeAttribute:void 0,a="object"==typeof n&&"number"==typeof n.maxStringLength?n.maxStringLength:void 0;a&&a>1024&&(Jl&&Tt.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${a} was configured. Sentry will use 1024 instead.`),a=1024),"string"==typeof o&&(o=[o]);try{const c=i.event,u=function pit(t){return!!t&&!!t.target}(c)?c.target:c;s=$p(u,{keyAttrs:o,maxStringLength:a}),r=Tue(u)}catch{s="<unknown>"}if(0===s.length)return;const l={category:`ui.${i.name}`,message:s};r&&(l.data={"ui.component_name":r}),Gp(l,{event:i.event,name:i.name,global:i.global})}}(e,n.dom)),n.xhr&&Bde(function dit(t){return function(e){if(Zi()!==t)return;const{startTimestamp:i,endTimestamp:s}=e,r=e.xhr[Sg];if(!i||!s||!r)return;const{method:o,url:a,status_code:l,body:c}=r;Gp({category:"xhr",data:{method:o,url:a,status_code:l},type:"http"},{xhr:e.xhr,input:c,startTimestamp:i,endTimestamp:s})}}(e)),n.fetch&&Vde(function hit(t){return function(e){if(Zi()!==t)return;const{startTimestamp:i,endTimestamp:s}=e;if(s&&(!e.fetchData.url.match(/sentry_key/)||"POST"!==e.fetchData.method))if(e.error)Gp({category:"fetch",data:e.fetchData,level:"error",type:"http"},{data:e.error,input:e.args,startTimestamp:i,endTimestamp:s});else{const r=e.response;Gp({category:"fetch",data:{...e.fetchData,status_code:r&&r.status},type:"http"},{input:e.args,response:r,startTimestamp:i,endTimestamp:s})}}}(e)),n.history&&wA(function fit(t){return function(e){if(Zi()!==t)return;let i=e.from,s=e.to;const r=Cg(ii.location.href);let o=i?Cg(i):void 0;const a=Cg(s);(!o||!o.path)&&(o=r),r.protocol===a.protocol&&r.host===a.host&&(s=a.relative),r.protocol===o.protocol&&r.host===o.host&&(i=o.relative),Gp({category:"navigation",data:{from:i,to:s}})}}(e)),n.sentry&&e.on("beforeSendEvent",function lit(t){return function(e){Zi()===t&&Gp({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:Vp(e)},{event:e})}}(e))}}},mit=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],git=(t={})=>{const n={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:"BrowserApiErrors",setupOnce(){n.setTimeout&&da(ii,"setTimeout",Gde),n.setInterval&&da(ii,"setInterval",Gde),n.requestAnimationFrame&&da(ii,"requestAnimationFrame",bit),n.XMLHttpRequest&&"XMLHttpRequest"in ii&&da(XMLHttpRequest.prototype,"send",vit);const e=n.eventTarget;e&&(Array.isArray(e)?e:mit).forEach(yit)}}};function Gde(t){return function(...n){return n[0]=Xy(n[0],{mechanism:{data:{function:bf(t)},handled:!1,type:"instrument"}}),t.apply(this,n)}}function bit(t){return function(n){return t.apply(this,[Xy(n,{mechanism:{data:{function:"requestAnimationFrame",handler:bf(t)},handled:!1,type:"instrument"}})])}}function vit(t){return function(...n){const e=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in e&&"function"==typeof e[s]&&da(e,s,function(r){const o={mechanism:{data:{function:s,handler:bf(r)},handled:!1,type:"instrument"}},a=n6(r);return a&&(o.mechanism.data.handler=bf(a)),Xy(r,o)})}),t.apply(this,n)}}function yit(t){const e=ii[t]&&ii[t].prototype;!e||!e.hasOwnProperty||!e.hasOwnProperty("addEventListener")||(da(e,"addEventListener",function(i){return function(s,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=Xy(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:bf(r),target:t},handled:!1,type:"instrument"}}))}catch{}return i.apply(this,[s,Xy(r,{mechanism:{data:{function:"addEventListener",handler:bf(r),target:t},handled:!1,type:"instrument"}}),o])}}),da(e,"removeEventListener",function(i){return function(s,r,o){const a=r;try{const l=a&&a.__sentry_wrapped__;l&&i.call(this,s,l,o)}catch{}return i.call(this,s,a,o)}}))}let EA=null;function jde(t){const n="error";vg(n,t),yg(n,wit)}function wit(){EA=fs.onerror,fs.onerror=function(t,n,e,i,s){return fd("error",{column:i,error:s,line:e,msg:t,url:n}),!(!EA||EA.__SENTRY_LOADER__)&&EA.apply(this,arguments)},fs.onerror.__SENTRY_INSTRUMENTED__=!0}let TA=null;function Hde(t){const n="unhandledrejection";vg(n,t),yg(n,Sit)}function Sit(){TA=fs.onunhandledrejection,fs.onunhandledrejection=function(t){return fd("unhandledrejection",t),!(TA&&!TA.__SENTRY_LOADER__)||TA.apply(this,arguments)},fs.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Wde=(t={})=>{const n={onerror:!0,onunhandledrejection:!0,...t};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(e){n.onerror&&(function xit(t){jde(n=>{const{stackParser:e,attachStacktrace:i}=Kde();if(Zi()!==t||Fde())return;const{msg:s,url:r,line:o,column:a,error:l}=n,c=function kit(t,n,e,i){const s=t.exception=t.exception||{},r=s.values=s.values||[],o=r[0]=r[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],c=isNaN(parseInt(i,10))?void 0:i,u=isNaN(parseInt(e,10))?void 0:e,d=hu(n)&&n.length>0?n:Eue();return 0===l.length&&l.push({colno:c,filename:d,function:rh,in_app:!0,lineno:u}),t}(M6(e,l||s,void 0,i,!1),r,o,a);c.level="error",lde(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})})}(e),qde("onerror")),n.onunhandledrejection&&(function Eit(t){Hde(n=>{const{stackParser:e,attachStacktrace:i}=Kde();if(Zi()!==t||Fde())return;const s=function Tit(t){if(e6(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}(n),r=e6(s)?function Iit(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}(s):M6(e,s,void 0,i,!0);r.level="error",lde(r,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})})}(e),qde("onunhandledrejection"))}}};function qde(t){Jl&&Tt.log(`Global Handler attached: ${t}`)}function Kde(){const t=Zi();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Xde=()=>({name:"HttpContext",preprocessEvent(t){if(!ii.navigator&&!ii.location&&!ii.document)return;const n=t.request&&t.request.url||ii.location&&ii.location.href,{referrer:e}=ii.document||{},{userAgent:i}=ii.navigator||{},s={...t.request&&t.request.headers,...e&&{Referer:e},...i&&{"User-Agent":i}},r={...t.request,...n&&{url:n},headers:s};t.request=r}});function Dit(t,n,e=250,i,s,r,o){if(!(r.exception&&r.exception.values&&o&&gf(o.originalException,Error)))return;const a=r.exception.values.length>0?r.exception.values[r.exception.values.length-1]:void 0;a&&(r.exception.values=function Mit(t,n){return t.map(e=>(e.value&&(e.value=jy(e.value,n)),e))}(L6(t,n,s,o.originalException,i,r.exception.values,a,0),e))}function L6(t,n,e,i,s,r,o,a){if(r.length>=e+1)return r;let l=[...r];if(gf(i[s],Error)){Yde(o,a);const c=t(n,i[s]),u=l.length;Zde(c,s,u,a),l=L6(t,n,e,i[s],s,[c,...l],c,u)}return Array.isArray(i.errors)&&i.errors.forEach((c,u)=>{if(gf(c,Error)){Yde(o,a);const d=t(n,c),h=l.length;Zde(d,`errors[${u}]`,h,a),l=L6(t,n,e,c,s,[d,...l],d,h)}}),l}function Yde(t,n){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,..."AggregateError"===t.type&&{is_exception_group:!0},exception_id:n}}function Zde(t,n,e,i){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:n,exception_id:e,parent_id:i}}const Qde=(t={})=>{const n=t.limit||5,e=t.key||"cause";return{name:"LinkedErrors",preprocessEvent(i,s,r){const o=r.getOptions();Dit(I6,o.stackParser,o.maxValueLength,e,n,i,s)}}};function Yy(t,n,e,i){const s={filename:t,function:"<anonymous>"===n?rh:n,in_app:!0};return void 0!==e&&(s.lineno=e),void 0!==i&&(s.colno=i),s}const Bit=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Vit=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,zit=/\((\S*)(?::(\d+))(?::(\d+))\)/,Uit=[30,t=>{const n=Bit.exec(t);if(n){const[,i,s,r]=n;return Yy(i,rh,+s,+r)}const e=Vit.exec(t);if(e){if(e[2]&&0===e[2].indexOf("eval")){const o=zit.exec(e[2]);o&&(e[2]=o[1],e[3]=o[2],e[4]=o[3])}const[s,r]=Jde(e[1]||rh,e[2]);return Yy(r,s,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}}],Git=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,jit=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Hit=[50,t=>{const n=Git.exec(t);if(n){if(n[3]&&n[3].indexOf(" > eval")>-1){const r=jit.exec(n[3]);r&&(n[1]=n[1]||"eval",n[3]=r[1],n[4]=r[2],n[5]="")}let i=n[3],s=n[1]||rh;return[s,i]=Jde(s,i),Yy(i,s,n[4]?+n[4]:void 0,n[5]?+n[5]:void 0)}}],Xit=Vue(Uit,Hit),Jde=(t,n)=>{const e=-1!==t.indexOf("safari-extension"),i=-1!==t.indexOf("safari-web-extension");return e||i?[-1!==t.indexOf("@")?t.split("@")[0]:rh,e?`safari-extension:${n}`:`safari-web-extension:${n}`]:[t,n]},Rc=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,IA={};function P6(t){const n=IA[t];if(n)return n;let e=ui[t];if(C6(e))return IA[t]=e.bind(ui);const i=ui.document;if(i&&"function"==typeof i.createElement)try{const s=i.createElement("iframe");s.hidden=!0,i.head.appendChild(s);const r=s.contentWindow;r&&r[t]&&(e=r[t]),i.head.removeChild(s)}catch(s){Rc&&Tt.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,s)}return e&&(IA[t]=e.bind(ui))}function ehe(t){IA[t]=void 0}function xg(...t){return P6("setTimeout")(...t)}const Zit=6e4;function the(t,n,e=Date.now()){return function Jit(t,n){return t[n]||t.all||0}(t,n)>e}function nhe(t,{statusCode:n,headers:e},i=Date.now()){const s={...t},r=e&&e["x-sentry-rate-limits"],o=e&&e["retry-after"];if(r)for(const a of r.trim().split(",")){const[l,c,,,u]=a.split(":",5),d=parseInt(l,10),h=1e3*(isNaN(d)?60:d);if(c)for(const f of c.split(";"))"metric_bucket"===f?(!u||u.split(";").includes("custom"))&&(s[f]=i+h):s[f]=i+h;else s.all=i+h}else o?s.all=i+function Qit(t,n=Date.now()){const e=parseInt(`${t}`,10);if(!isNaN(e))return 1e3*e;const i=Date.parse(`${t}`);return isNaN(i)?Zit:i-n}(o,i):429===n&&(s.all=i+6e4);return s}const est=64;function ihe(t,n){if("event"===n||"transaction"===n)return Array.isArray(t)?t[1]:void 0}function nst(t,n=P6("fetch")){let e=0,i=0;return function tst(t,n,e=function Yit(t){const n=[];function i(o){return n.splice(n.indexOf(o),1)[0]||Promise.resolve(void 0)}return{$:n,add:function s(o){if(!function e(){return void 0===t||n.length<t}())return fA(new ah("Not adding Promise because buffer limit was reached."));const a=o();return-1===n.indexOf(a)&&n.push(a),a.then(()=>i(a)).then(null,()=>i(a).then(null,()=>{})),a},drain:function r(o){return new pu((a,l)=>{let c=n.length;if(!c)return a(!0);const u=setTimeout(()=>{o&&o>0&&a(!1)},o);n.forEach(d=>{yf(d).then(()=>{--c||(clearTimeout(u),a(!0))},l)})})}}}(t.bufferSize||est)){let i={};return{send:function r(o){const a=[];if(x6(o,(d,h)=>{const f=Mde(h);if(the(i,f)){const p=ihe(d,h);t.recordDroppedEvent("ratelimit_backoff",f,p)}else a.push(d)}),0===a.length)return yf({});const l=wg(o[0],a),c=d=>{x6(l,(h,f)=>{const p=ihe(h,f);t.recordDroppedEvent(d,Mde(f),p)})};return e.add(()=>n({body:gnt(l)}).then(d=>(void 0!==d.statusCode&&(d.statusCode<200||d.statusCode>=300)&&Si&&Tt.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),i=nhe(i,d),d),d=>{throw c("network_error"),d})).then(d=>d,d=>{if(d instanceof ah)return Si&&Tt.error("Skipped sending event because buffer is full."),c("queue_overflow"),yf({});throw d})},flush:o=>e.drain(o)}}(t,function s(r){const o=r.body.length;e+=o,i++;const a={body:r.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:e<=6e4&&i<15,...t.fetchOptions};if(!n)return ehe("fetch"),fA("No fetch implementation available");try{return n(t.url,a).then(l=>(e-=o,i--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return ehe("fetch"),e-=o,i--,fA(l)}})}function ost(t={}){const n=function sst(t={}){return{defaultIntegrations:[bde(),wde(),git(),Ude(),Wde(),Qde(),Sde(),Xde()],release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:ii.SENTRY_RELEASE&&ii.SENTRY_RELEASE.id?ii.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0,...t}}(t);if(function rst(){const t=ii,e=t[t.chrome?"chrome":"browser"],i=e&&e.runtime&&e.runtime.id,s=ii.location&&ii.location.href||"",o=!!i&&ii===ii.top&&["chrome-extension:","moz-extension:","ms-browser-extension:"].some(l=>s.startsWith(`${l}//`));return!(!i||o||typeof t.nw<"u")}())return void Gy(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});Jl&&(S6()||Tt.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const e={...n,stackParser:Yet(n.stackParser||Xit),integrations:Ltt(n),transport:n.transport||nst},i=function tnt(t,n){!0===n.debug&&(Si?Tt.enable():Gy(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Cr().update(n.initialScope);const i=new t(n);return function nnt(t){Cr().setClient(t)}(i),i.init(),i}(Hnt,e);return n.autoSessionTracking&&function ast(){typeof ii.document>"u"?Jl&&Tt.warn("Session tracking in non-browser environment with @sentry/browser is not supported."):(dde({ignoreDuration:!0}),pde(),wA(({from:t,to:n})=>{void 0!==t&&t!==n&&(dde({ignoreDuration:!0}),pde())}))}(),i}function she(t={}){if(!ii.document)return void(Jl&&Tt.error("Global document not defined in showReportDialog call"));const n=Cr(),e=n.getClient(),i=e&&e.getDsn();if(!i)return void(Jl&&Tt.error("DSN not configured for showReportDialog call"));if(n&&(t.user={...n.getUser(),...t.user}),!t.eventId){const a=function Ntt(){return Oc().lastEventId()}();a&&(t.eventId=a)}const s=ii.document.createElement("script");s.async=!0,s.crossOrigin="anonymous",s.src=function dnt(t,n){const e=Ide(t);if(!e)return"";const i=`${kde(e)}embed/error-page/`;let s=`dsn=${qy(e)}`;for(const r in n)if("dsn"!==r&&"onClose"!==r)if("user"===r){const o=n.user;if(!o)continue;o.name&&(s+=`&name=${encodeURIComponent(o.name)}`),o.email&&(s+=`&email=${encodeURIComponent(o.email)}`)}else s+=`&${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`;return`${i}?${s}`}(i,t),t.onLoad&&(s.onload=t.onLoad);const{onClose:r}=t;if(r){const a=l=>{if("__sentry_reportdialog_closed__"===l.data)try{r()}finally{ii.removeEventListener("message",a)}};ii.addEventListener("message",a)}const o=ii.document.head||ii.document.body;o?o.appendChild(s):Jl&&Tt.error("Not injecting report dialog. No injection point found in HTML")}function jp(t){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const n=t||function lst(){const t=Zi();return t&&t.getOptions()}();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}class Zy{constructor(n={}){this._traceId=n.traceId||Ar(),this._spanId=n.spanId||Ar().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:0}}end(n){}setAttribute(n,e){return this}setAttributes(n){return this}setStatus(n){return this}updateName(n){return this}isRecording(){return!1}addEvent(n,e,i){return this}addLink(n){return this}addLinks(n){return this}recordException(n,e){}}function rhe(t){if(!t||0===t.length)return;const n={};return t.forEach(e=>{const i=e.attributes||{},s=i[p6],r=i[m6];"string"==typeof s&&"number"==typeof r&&(n[e.name]={value:r,unit:s})}),n}const ohe="_sentryScope",ahe="_sentryIsolationScope";function lhe(t){return{scope:t[ohe],isolationScope:t[ahe]}}class $6{constructor(n={}){this._traceId=n.traceId||Ar(),this._spanId=n.spanId||Ar().substring(16),this._startTime=n.startTimestamp||Zl(),this._attributes={},this.setAttributes({[Do]:"manual",[ZC]:n.op,...n.attributes}),this._name=n.name,n.parentSpanId&&(this._parentSpanId=n.parentSpanId),"sampled"in n&&(this._sampled=n.sampled),n.endTimestamp&&(this._endTime=n.endTimestamp),this._events=[],this._isStandaloneSpan=n.isStandalone,this._endTime&&this._onSpanEnded()}addLink(n){return this}addLinks(n){return this}recordException(n,e){}spanContext(){const{_spanId:n,_traceId:e,_sampled:i}=this;return{spanId:n,traceId:e,traceFlags:i?Que:0}}setAttribute(n,e){return void 0===e?delete this._attributes[n]:this._attributes[n]=e,this}setAttributes(n){return Object.keys(n).forEach(e=>this.setAttribute(e,n[e])),this}updateStartTime(n){this._startTime=_g(n)}setStatus(n){return this._status=n,this}updateName(n){return this._name=n,this}end(n){this._endTime||(this._endTime=_g(n),function ust(t){if(!Si)return;const{description:n="< unknown name >",op:e="< unknown op >"}=os(t),{spanId:i}=t.spanContext(),r=pa(t)===t;Tt.log(`[Tracing] Finishing "${e}" ${r?"root ":""}span "${n}" with ID ${i}`)}(this),this._onSpanEnded())}getSpanJSON(){return ha({data:this._attributes,description:this._name,op:this._attributes[ZC],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:tde(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Do],_metrics_summary:b6(this),profile_id:this._attributes["sentry.profile_id"],exclusive_time:this._attributes[Kue],measurements:rhe(this._events),is_segment:this._isStandaloneSpan&&pa(this)===this||void 0,segment_id:this._isStandaloneSpan?pa(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(n,e,i){Si&&Tt.log("[Tracing] Adding an event to span:",n);const s=uhe(e)?e:i||Zl(),r=uhe(e)?{}:e||{},o={name:n,time:_g(s),attributes:r};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const n=Zi();if(n&&n.emit("spanEnd",this),!this._isStandaloneSpan&&this!==pa(this))return;if(this._isStandaloneSpan)return void(this._sampled?function mst(t){const n=Zi();if(!n)return;const e=t[1];if(!e||0===e.length)return void n.recordDroppedEvent("before_send","span");const i=n.getTransport();i&&i.send(t).then(null,s=>{Si&&Tt.error("Error while sending span:",s)})}(function Tnt(t,n){const i=Up(t[0]),s=n&&n.getDsn(),r=n&&n.getOptions().tunnel,o={sent_at:(new Date).toISOString(),...function e(u){return!!u.trace_id&&!!u.public_key}(i)&&{trace:i},...!!r&&s&&{dsn:qy(s)}},a=n&&n.getOptions().beforeSendSpan,l=a?u=>a(os(u)):u=>os(u),c=[];for(const u of t){const d=l(u);d&&c.push(vnt(d))}return wg(o,c)}([this],n)):(Si&&Tt.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","span")));const i=this._convertSpanToTransaction();i&&(lhe(this).scope||Cr()).captureEvent(i)}_convertSpanToTransaction(){if(!dhe(os(this)))return;this._name||(Si&&Tt.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:n,isolationScope:e}=lhe(this),s=(n||Cr()).getClient()||Zi();if(!0!==this._sampled)return Si&&Tt.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(s&&s.recordDroppedEvent("sample_rate","transaction"));const o=pA(this).filter(d=>d!==this&&!function pst(t){return t instanceof $6&&t.isStandaloneSpan()}(d)).map(d=>os(d)).filter(dhe),a=this._attributes[Nc],l={contexts:{trace:htt(this)},spans:o.length>1e3?o.sort((d,h)=>d.start_timestamp-h.start_timestamp).slice(0,1e3):o,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:n,capturedSpanIsolationScope:e,...ha({dynamicSamplingContext:Up(this)})},_metrics_summary:b6(this),...a&&{transaction_info:{source:a}}},c=rhe(this._events);return c&&Object.keys(c).length&&(Si&&Tt.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),l.measurements=c),l}}function uhe(t){return t&&"number"==typeof t||t instanceof Date||Array.isArray(t)}function dhe(t){return!!(t.start_timestamp&&t.timestamp&&t.span_id&&t.trace_id)}const B6="__SENTRY_SUPPRESS_TRACING__";function wf(t){const n=JC();if(n.startInactiveSpan)return n.startInactiveSpan(t);const e=function z6(t){const e={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const i={...e};return i.startTimestamp=_g(t.startTime),delete i.startTime,i}return e}(t),{forceTransaction:i,parentSpan:s}=t;return(t.scope?o=>l6(t.scope,o):void 0!==s?o=>kA(s,o):o=>o())(()=>{const o=Cr(),a=function U6(t){const n=dA(t);if(!n)return;const e=Zi();return(e?e.getOptions():{}).parentSpanIsAlwaysRootSpan?pa(n):n}(o);return t.onlyIfParent&&!a?new Zy:function V6({parentSpan:t,spanArguments:n,forceTransaction:e,scope:i}){if(!jp())return new Zy;const s=Oc();let r;if(t&&!e)r=function _st(t,n,e){const{spanId:i,traceId:s}=t.spanContext(),r=!n.getScopeData().sdkProcessingMetadata[B6]&&gg(t),o=r?new $6({...e,parentSpanId:i,traceId:s,sampled:r}):new Zy({traceId:s});nde(t,o);const a=Zi();return a&&(a.emit("spanStart",o),e.endTimestamp&&a.emit("spanEnd",o)),o}(t,i,n),nde(t,r);else if(t){const o=Up(t),{traceId:a,spanId:l}=t.spanContext(),c=gg(t);r=hhe({traceId:a,parentSpanId:l,...n},i,c),sde(r,o)}else{const{traceId:o,dsc:a,parentSpanId:l,sampled:c}={...s.getPropagationContext(),...i.getPropagationContext()};r=hhe({traceId:o,parentSpanId:l,...n},i,c),a&&sde(r,a)}return function cst(t){if(!Si)return;const{description:n="< unknown name >",op:e="< unknown op >",parent_span_id:i}=os(t),{spanId:s}=t.spanContext(),r=gg(t),o=pa(t),a=o===t,l=`[Tracing] Starting ${r?"sampled":"unsampled"} ${a?"root ":""}span`,c=[`op: ${e}`,`name: ${n}`,`ID: ${s}`];if(i&&c.push(`parent ID: ${i}`),!a){const{op:u,description:d}=os(o);c.push(`root ID: ${o.spanContext().spanId}`),u&&c.push(`root op: ${u}`),d&&c.push(`root description: ${d}`)}Tt.log(`${l}\n  ${c.join("\n  ")}`)}(r),function fst(t,n,e){t&&(fu(t,ahe,e),fu(t,ohe,n))}(r,i,s),r}({parentSpan:a,spanArguments:e,forceTransaction:i,scope:o})})}function kA(t,n){const e=JC();return e.withActiveSpan?e.withActiveSpan(t,n):l6(i=>(XC(i,t||void 0),n(i)))}function JC(){return YC($y())}function hhe(t,n,e){const i=Zi(),s=i&&i.getOptions()||{},{name:r="",attributes:o}=t,[a,l]=n.getScopeData().sdkProcessingMetadata[B6]?[!1]:function dst(t,n){if(!jp(t))return[!1];let e;e="function"==typeof t.tracesSampler?t.tracesSampler(n):void 0!==n.parentSampled?n.parentSampled:typeof t.tracesSampleRate<"u"?t.tracesSampleRate:1;const i=CA(e);return void 0===i?(Si&&Tt.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):i?Math.random()<i?[!0,i]:(Si&&Tt.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(e)})`),[!1,i]):(Si&&Tt.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,i])}(s,{name:r,parentSampled:e,attributes:o,transactionContext:{name:r,parentSampled:e}}),c=new $6({...t,attributes:{[Nc]:"custom",...t.attributes},sampled:a});return void 0!==l&&c.setAttribute(que,l),i&&i.emit("spanStart",c),c}const Qy=(t,n,e,i)=>{let s,r;return o=>{n.value>=0&&(o||i)&&(r=n.value-(s||0),(r||void 0===s)&&(s=n.value,n.delta=r,n.rating=((t,n)=>t>n[1]?"poor":t>n[0]?"needs-improvement":"good")(n.value,e),t(n)))}},ex=()=>ui.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],DA=()=>{const t=ex();return t&&t.activationStart||0},Jy=(t,n)=>{const e=ex();let i="navigate";return e&&(ui.document&&ui.document.prerendering||DA()>0?i="prerender":ui.document&&ui.document.wasDiscarded?i="restore":e.type&&(i=e.type.replace(/_/g,"-"))),{name:t,value:typeof n>"u"?-1:n,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:i}},Eg=(t,n,e)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const i=new PerformanceObserver(s=>{Promise.resolve().then(()=>{n(s.getEntries())})});return i.observe(Object.assign({type:t,buffered:!0},e||{})),i}}catch{}},MA=t=>{const n=e=>{("pagehide"===e.type||ui.document&&"hidden"===ui.document.visibilityState)&&t(e)};ui.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))},G6=t=>{let n=!1;return e=>{n||(t(e),n=!0)}};let tx=-1;const AA=t=>{"hidden"===ui.document.visibilityState&&tx>-1&&(tx="visibilitychange"===t.type?t.timeStamp:0,removeEventListener("visibilitychange",AA,!0),removeEventListener("prerenderingchange",AA,!0))},OA=()=>(ui.document&&tx<0&&(tx="hidden"!==ui.document.visibilityState||ui.document.prerendering?1/0:0,addEventListener("visibilitychange",AA,!0),addEventListener("prerenderingchange",AA,!0)),{get firstHiddenTime(){return tx}}),nx=t=>{ui.document&&ui.document.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},wst=[1800,3e3],Cst=[.1,.25],xst=(t,n={})=>{((t,n={})=>{nx(()=>{const e=OA(),i=Jy("FCP");let s;const o=Eg("paint",a=>{a.forEach(l=>{"first-contentful-paint"===l.name&&(o.disconnect(),l.startTime<e.firstHiddenTime&&(i.value=Math.max(l.startTime-DA(),0),i.entries.push(l),s(!0)))})});o&&(s=Qy(t,i,wst,n.reportAllChanges))})})(G6(()=>{const e=Jy("CLS",0);let i,s=0,r=[];const o=l=>{l.forEach(c=>{if(!c.hadRecentInput){const u=r[0],d=r[r.length-1];s&&u&&d&&c.startTime-d.startTime<1e3&&c.startTime-u.startTime<5e3?(s+=c.value,r.push(c)):(s=c.value,r=[c])}}),s>e.value&&(e.value=s,e.entries=r,i())},a=Eg("layout-shift",o);a&&(i=Qy(t,e,Cst,n.reportAllChanges),MA(()=>{o(a.takeRecords()),i(!0)}),setTimeout(i,0))}))},Est=[100,300],Tst=(t,n={})=>{nx(()=>{const e=OA(),i=Jy("FID");let s;const r=l=>{l.startTime<e.firstHiddenTime&&(i.value=l.processingStart-l.startTime,i.entries.push(l),s(!0))},o=l=>{l.forEach(r)},a=Eg("first-input",o);s=Qy(t,i,Est,n.reportAllChanges),a&&MA(G6(()=>{o(a.takeRecords()),a.disconnect()}))})};let phe=0,j6=1/0,NA=0;const Ist=t=>{t.forEach(n=>{n.interactionId&&(j6=Math.min(j6,n.interactionId),NA=Math.max(NA,n.interactionId),phe=NA?(NA-j6)/7+1:0)})};let H6;const Mst=[200,500],mhe=()=>(H6?phe:performance.interactionCount||0)-0,Sf=[],W6={},ghe=t=>{const n=Sf[Sf.length-1],e=W6[t.interactionId];if(e||Sf.length<10||n&&t.duration>n.latency){if(e)e.entries.push(t),e.latency=Math.max(e.latency,t.duration);else{const i={id:t.interactionId,latency:t.duration,entries:[t]};W6[i.id]=i,Sf.push(i)}Sf.sort((i,s)=>s.latency-i.latency),Sf.splice(10).forEach(i=>{delete W6[i.id]})}},Nst=(t,n={})=>{nx(()=>{"interactionCount"in performance||H6||(H6=Eg("event",Ist,{type:"event",buffered:!0,durationThreshold:0}));const e=Jy("INP");let i;const s=o=>{o.forEach(l=>{l.interactionId&&ghe(l),"first-input"===l.entryType&&!Sf.some(u=>u.entries.some(d=>l.duration===d.duration&&l.startTime===d.startTime))&&ghe(l)});const a=(()=>{const t=Math.min(Sf.length-1,Math.floor(mhe()/50));return Sf[t]})();a&&a.latency!==e.value&&(e.value=a.latency,e.entries=a.entries,i())},r=Eg("event",s,{durationThreshold:null!=n.durationThreshold?n.durationThreshold:40});i=Qy(t,e,Mst,n.reportAllChanges),r&&("PerformanceEventTiming"in ui&&"interactionId"in PerformanceEventTiming.prototype&&r.observe({type:"first-input",buffered:!0}),MA(()=>{s(r.takeRecords()),e.value<0&&mhe()>0&&(e.value=0,e.entries=[]),i(!0)}))})},Rst=[2500,4e3],bhe={},Fst=(t,n={})=>{nx(()=>{const e=OA(),i=Jy("LCP");let s;const r=a=>{const l=a[a.length-1];l&&l.startTime<e.firstHiddenTime&&(i.value=Math.max(l.startTime-DA(),0),i.entries=[l],s())},o=Eg("largest-contentful-paint",r);if(o){s=Qy(t,i,Rst,n.reportAllChanges);const a=G6(()=>{bhe[i.id]||(r(o.takeRecords()),o.disconnect(),bhe[i.id]=!0,s(!0))});["keydown","click"].forEach(l=>{ui.document&&addEventListener(l,()=>setTimeout(a,0),!0)}),MA(a)}})},Lst=[800,1800],q6=t=>{ui.document&&ui.document.prerendering?nx(()=>q6(t)):ui.document&&"complete"!==ui.document.readyState?addEventListener("load",()=>q6(t),!0):setTimeout(t,0)},Pst=(t,n={})=>{const e=Jy("TTFB"),i=Qy(t,e,Lst,n.reportAllChanges);q6(()=>{const s=ex();if(s){const r=s.responseStart;if(r<=0||r>performance.now())return;e.value=Math.max(r-DA(),0),e.entries=[s],i(!0)}})},ix={},RA={};let vhe,yhe,whe,She,Che;function xhe(t,n=!1){return sx("cls",t,Bst,vhe,n)}function Ehe(t,n=!1){return sx("lcp",t,zst,whe,n)}function The(t){return sx("fid",t,Vst,yhe)}function Ihe(t){return sx("inp",t,Gst,Che)}function e1(t,n){return khe(t,n),RA[t]||(function jst(t){const n={};"event"===t&&(n.durationThreshold=0),Eg(t,e=>{t1(t,{entries:e})},n)}(t),RA[t]=!0),Dhe(t,n)}function t1(t,n){const e=ix[t];if(e&&e.length)for(const i of e)try{i(n)}catch(s){Rc&&Tt.error(`Error while triggering instrumentation handler.\nType: ${t}\nName: ${bf(i)}\nError:`,s)}}function Bst(){return xst(t=>{t1("cls",{metric:t}),vhe=t},{reportAllChanges:!0})}function Vst(){return Tst(t=>{t1("fid",{metric:t}),yhe=t})}function zst(){return Fst(t=>{t1("lcp",{metric:t}),whe=t},{reportAllChanges:!0})}function Ust(){return Pst(t=>{t1("ttfb",{metric:t}),She=t})}function Gst(){return Nst(t=>{t1("inp",{metric:t}),Che=t})}function sx(t,n,e,i,s=!1){let r;return khe(t,n),RA[t]||(r=e(),RA[t]=!0),i&&n({metric:i}),Dhe(t,n,s?r:void 0)}function khe(t,n){ix[t]=ix[t]||[],ix[t].push(n)}function Dhe(t,n,e){return()=>{e&&e();const i=ix[t];if(!i)return;const s=i.indexOf(n);-1!==s&&i.splice(s,1)}}function K6(t){return"number"==typeof t&&isFinite(t)}function n1(t,n,e,{...i}){const s=os(t).start_timestamp;return s&&s>n&&"function"==typeof t.updateStartTime&&t.updateStartTime(n),kA(t,()=>{const r=wf({startTime:n,...i});return r&&r.end(e),r})}function X6(){return ui&&ui.addEventListener&&ui.performance}function fo(t){return t/1e3}const Wst=2147483647;let lh,rx,Mhe=0,_a={};function FA(t,n,e,i,s,r){const o=r?n[r]:n[`${e}End`],a=n[`${e}Start`];!a||!o||n1(t,i+fo(a),i+fo(o),{op:"browser",name:s||e,attributes:{[Do]:"auto.ui.browser.metrics"}})}function Y6(t,n,e,i){const s=n[e];null!=s&&s<Wst&&(t[i]=s)}const Z6=[],LA=new Map;const Ahe={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"},PA={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3};function Ohe(t,n={}){const e=new Map;let s,i=!1,r="externalFinish",o=!n.disableAutoFinish;const a=[],{idleTimeout:l=PA.idleTimeout,finalTimeout:c=PA.finalTimeout,childSpanTimeout:u=PA.childSpanTimeout,beforeSpanEnd:d}=n,h=Zi();if(!h||!jp())return new Zy;const f=Cr(),p=ma(),g=function _rt(t){const n=wf(t);return XC(Cr(),n),Si&&Tt.log("[Tracing] Started span is an idle span"),n}(t);function v(){s&&(clearTimeout(s),s=void 0)}function y(W){v(),s=setTimeout(()=>{!i&&0===e.size&&o&&(r="idleTimeout",g.end(W))},l)}function w(W){s=setTimeout(()=>{!i&&o&&(r="heartbeatFailed",g.end(W))},u)}function L(W){i=!0,e.clear(),a.forEach(Ee=>Ee()),XC(f,p);const H=os(g),{start_timestamp:P}=H;if(!P)return;(H.data||{})[f6]||g.setAttribute(f6,r),Tt.log(`[Tracing] Idle span "${H.op}" finished`);const ne=pA(g).filter(Ee=>Ee!==g);let me=0;ne.forEach(Ee=>{Ee.isRecording()&&(Ee.setStatus({code:fa,message:"cancelled"}),Ee.end(W),Si&&Tt.log("[Tracing] Cancelling span since span ended early",JSON.stringify(Ee,void 0,2)));const Te=os(Ee),{timestamp:$e=0,start_timestamp:Xe=0}=Te,Ce=Xe<=W,Ie=$e-Xe<=(c+l)/1e3;if(Si){const He=JSON.stringify(Ee,void 0,2);Ce?Ie||Tt.log("[Tracing] Discarding span since it finished after idle span final timeout",He):Tt.log("[Tracing] Discarding span since it happened after idle span was finished",He)}(!Ie||!Ce)&&(function _tt(t,n){t[bg]&&t[bg].delete(n)}(g,Ee),me++)}),me>0&&g.setAttribute("sentry.idle_span_discarded_spans",me)}return g.end=new Proxy(g.end,{apply(W,H,P){d&&d(g);const[X,...ne]=P,Ee=_g(X||Zl()),Te=pA(g).filter(Ie=>Ie!==g);if(!Te.length)return L(Ee),Reflect.apply(W,H,[Ee,...ne]);const $e=Te.map(Ie=>os(Ie).timestamp).filter(Ie=>!!Ie),Xe=$e.length?Math.max(...$e):void 0,Ce=os(g).start_timestamp,Fe=Math.min(Ce?Ce+c/1e3:1/0,Math.max(Ce||-1/0,Math.min(Ee,Xe||1/0)));return L(Fe),Reflect.apply(W,H,[Fe,...ne])}}),a.push(h.on("spanStart",W=>{i||W===g||os(W).timestamp||pA(g).includes(W)&&function E(W){v(),e.set(W,!0),w(Zl()+u/1e3)}(W.spanContext().spanId)})),a.push(h.on("spanEnd",W=>{i||function T(W){e.has(W)&&e.delete(W),0===e.size&&y(Zl()+l/1e3)}(W.spanContext().spanId)})),a.push(h.on("idleSpanEnableAutoFinish",W=>{W===g&&(o=!0,y(),e.size&&w())})),n.disableAutoFinish||y(),setTimeout(()=>{i||(g.setStatus({code:fa,message:"deadline_exceeded"}),r="finalTimeout",g.end())},c),g}let Nhe=!1;function Q6(){const t=ma(),n=t&&pa(t);if(n){const e="internal_error";Si&&Tt.log(`[Tracing] Root span: ${e} -> Global error occured`),n.setStatus({code:fa,message:e})}}Q6.tag="sentry_tracingErrorCallback";const J6={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0};function Crt(t){const{traceFetch:n,traceXHR:e,shouldCreateSpanForRequest:i,enableHTTPTimings:s,tracePropagationTargets:r}={traceFetch:J6.traceFetch,traceXHR:J6.traceXHR,...t},o="function"==typeof i?i:c=>!0,a=c=>function Irt(t,n){const e=ii.location&&ii.location.href;if(e){let i,s;try{i=new URL(t,e),s=new URL(e).origin}catch{return!1}const r=i.origin===s;return n?Bp(i.toString(),n)||r&&Bp(i.pathname,n):r}{const i=!!t.match(/^\/(?!\/)/);return n?Bp(t,n):i}}(c,r),l={};n&&Vde(c=>{const u=function vrt(t,n,e,i,s="auto.http.browser"){if(!t.fetchData)return;const r=jp()&&n(t.fetchData.url);if(t.endTimestamp&&r){const p=t.fetchData.__span;if(!p)return;const g=i[p];return void(g&&(function Srt(t,n){if(n.response){Yue(t,n.response.status);const e=n.response&&n.response.headers&&n.response.headers.get("content-length");if(e){const i=parseInt(e);i>0&&t.setAttribute("http.response_content_length",i)}}else n.error&&t.setStatus({code:fa,message:"internal_error"});t.end()}(g,t),delete i[p]))}const o=Cr(),a=Zi(),{method:l,url:c}=t.fetchData,u=function wrt(t){try{return new URL(t).href}catch{return}}(c),d=u?Cg(u).host:void 0,h=!!ma(),f=r&&h?wf({name:`${l} ${c}`,attributes:{url:c,type:"fetch","http.method":l,"http.url":u,"server.address":d,[Do]:s,[ZC]:"http.client"}}):new Zy;if(t.fetchData.__span=f.spanContext().spanId,i[f.spanContext().spanId]=f,e(t.fetchData.url)&&a){const p=t.args[0];t.args[1]=t.args[1]||{};const g=t.args[1];g.headers=function yrt(t,n,e,i,s){const r=Oc(),{traceId:o,spanId:a,sampled:l,dsc:c}={...r.getPropagationContext(),...e.getPropagationContext()},u=s?Jue(s):_6(o,a,l),d=Hue(c||(s?Up(s):mA(o,n))),h=i.headers||(typeof Request<"u"&&gf(t,Request)?t.headers:void 0);if(h){if(typeof Headers<"u"&&gf(h,Headers)){const f=new Headers(h);return f.append("sentry-trace",u),d&&f.append(h6,d),f}if(Array.isArray(h)){const f=[...h,["sentry-trace",u]];return d&&f.push([h6,d]),f}{const f="baggage"in h?h.baggage:void 0,p=[];return Array.isArray(f)?p.push(...f):f&&p.push(f),d&&p.push(d),{...h,"sentry-trace":u,baggage:p.length>0?p.join(","):void 0}}}return{"sentry-trace":u,baggage:d}}(p,a,o,g,jp()&&h?f:void 0)}return f}(c,o,a,l);if(u){const d=Fhe(c.fetchData.url),h=d?Cg(d).host:void 0;u.setAttributes({"http.url":d,"server.address":h})}s&&u&&Rhe(u)}),e&&Bde(c=>{const u=function krt(t,n,e,i){const s=t.xhr,r=s&&s[Sg];if(!s||s.__sentry_own_request__||!r)return;const o=jp()&&n(r.url);if(t.endTimestamp&&o){const h=s.__sentry_xhr_span_id__;if(!h)return;const f=i[h];return void(f&&void 0!==r.status_code&&(Yue(f,r.status_code),f.end(),delete i[h]))}const a=Fhe(r.url),l=a?Cg(a).host:void 0,c=!!ma(),u=o&&c?wf({name:`${r.method} ${r.url}`,attributes:{type:"xhr","http.method":r.method,"http.url":a,url:r.url,"server.address":l,[Do]:"auto.http.browser",[ZC]:"http.client"}}):new Zy;s.__sentry_xhr_span_id__=u.spanContext().spanId,i[s.__sentry_xhr_span_id__]=u;const d=Zi();return s.setRequestHeader&&e(r.url)&&d&&function Drt(t,n,e){const i=Cr(),s=Oc(),{traceId:r,spanId:o,sampled:a,dsc:l}={...s.getPropagationContext(),...i.getPropagationContext()};!function Mrt(t,n,e){try{t.setRequestHeader("sentry-trace",n),e&&t.setRequestHeader(h6,e)}catch{}}(t,e&&jp()?Jue(e):_6(r,o,a),Hue(l||(e?Up(e):mA(r,n))))}(s,d,jp()&&c?u:void 0),u}(c,o,a,l);s&&u&&Rhe(u)})}function Rhe(t){const{url:n}=os(t).data||{};if(!n||"string"!=typeof n)return;const e=e1("resource",({entries:i})=>{i.forEach(s=>{(function xrt(t){return"resource"===t.entryType&&"initiatorType"in t&&"string"==typeof t.nextHopProtocol&&("fetch"===t.initiatorType||"xmlhttprequest"===t.initiatorType)})(s)&&s.name.endsWith(n)&&(function Trt(t){const{name:n,version:e}=function Ert(t){let n="unknown",e="unknown",i="";for(const s of t){if("/"===s){[n,e]=t.split("/");break}if(!isNaN(Number(s))){n="h"===i?"http":i,e=t.split(i)[1];break}i+=s}return i===t&&(n=i),{name:n,version:e}}(t.nextHopProtocol),i=[];return i.push(["network.protocol.version",e],["network.protocol.name",n]),Ql?[...i,["http.request.redirect_start",ch(t.redirectStart)],["http.request.fetch_start",ch(t.fetchStart)],["http.request.domain_lookup_start",ch(t.domainLookupStart)],["http.request.domain_lookup_end",ch(t.domainLookupEnd)],["http.request.connect_start",ch(t.connectStart)],["http.request.secure_connection_start",ch(t.secureConnectionStart)],["http.request.connection_end",ch(t.connectEnd)],["http.request.request_start",ch(t.requestStart)],["http.request.response_start",ch(t.responseStart)],["http.request.response_end",ch(t.responseEnd)]]:i}(s).forEach(o=>t.setAttribute(...o)),setTimeout(e))})})}function ch(t=0){return((Ql||performance.timeOrigin)+t)/1e3}function Fhe(t){try{return new URL(t,ii.location.origin).href}catch{return}}const Ort={...PA,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!1,enableInp:!0,_experiments:{},...J6},Nrt=(t={})=>{!function grt(){Nhe||(Nhe=!0,jde(Q6),Hde(Q6))}();const{enableInp:n,enableLongTask:e,enableLongAnimationFrame:i,_experiments:{enableInteractions:s},beforeStartSpan:r,idleTimeout:o,finalTimeout:a,childSpanTimeout:l,markBackgroundSpan:c,traceFetch:u,traceXHR:d,shouldCreateSpanForRequest:h,enableHTTPTimings:f,instrumentPageLoad:p,instrumentNavigation:g}={...Ort,...t},v=function qst(){const t=X6();if(t&&Ql){t.mark&&ui.performance.mark("sentry-tracing-init");const n=function Jst(){return The(({metric:t})=>{const n=t.entries[t.entries.length-1];if(!n)return;const e=fo(Ql),i=fo(n.startTime);Rc&&Tt.log("[Measurements] Adding FID"),_a.fid={value:t.value,unit:"millisecond"},_a["mark.fid"]={value:e+i,unit:"second"}})}(),e=function Zst(){return xhe(({metric:t})=>{const n=t.entries[t.entries.length-1];n&&(Rc&&Tt.log("[Measurements] Adding CLS"),_a.cls={value:t.value,unit:""},rx=n)},!0)}(),i=function Qst(){return Ehe(({metric:t})=>{const n=t.entries[t.entries.length-1];n&&(Rc&&Tt.log("[Measurements] Adding LCP"),_a.lcp={value:t.value,unit:"millisecond"},lh=n)},!0)}(),s=function ert(){return function $st(t){return sx("ttfb",t,Ust,She)}(({metric:t})=>{t.entries[t.entries.length-1]&&(Rc&&Tt.log("[Measurements] Adding TTFB"),_a.ttfb={value:t.value,unit:"millisecond"})})}();return()=>{n(),e(),i(),s()}}return()=>{}}();n&&function crt(){if(X6()&&Ql){const n=function urt(){return Ihe(({metric:t})=>{const n=Zi();if(!n||null==t.value)return;const e=t.entries.find(W=>W.duration===t.value&&Ahe[W.name]);if(!e)return;const{interactionId:i}=e,s=Ahe[e.name],r=n.getOptions(),o=fo(Ql+e.startTime),a=fo(t.value),l=Cr(),c=ma(),u=c?pa(c):void 0,h=(null!=i?LA.get(i):void 0)||u,f=h?os(h).description:l.getScopeData().transactionName,p=l.getUser(),g=n.getIntegrationByName("Replay"),v=g&&g.getReplayId(),y=void 0!==p?p.email||p.id||p.ip_address:void 0;let w;try{w=l.getScopeData().contexts.profile.profile_id}catch{}const L=wf({name:$p(e.target),op:`ui.interaction.${s}`,attributes:ha({release:r.release,environment:r.environment,transaction:f,[Kue]:t.value,[Do]:"auto.http.browser.inp",user:y||void 0,profile_id:w||void 0,replay_id:v||void 0,"user_agent.original":ui.navigator&&ui.navigator.userAgent}),startTime:o,experimental:{standalone:!0}});L.addEvent("inp",{[p6]:"millisecond",[m6]:t.value}),L.end(o+a)})}();return()=>{n()}}return()=>{}}(),i&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?function Xst(){new PerformanceObserver(n=>{for(const e of n.getEntries()){if(!ma()||!e.scripts[0])return;const i=fo(Ql+e.startTime),s=fo(e.duration),r={[Do]:"auto.ui.browser.metrics"},o=e.scripts[0];if(o){const{invoker:l,invokerType:c,sourceURL:u,sourceFunctionName:d,sourceCharPosition:h}=o;r["browser.script.invoker"]=l,r["browser.script.invoker_type"]=c,u&&(r["code.filepath"]=u),d&&(r["code.function"]=d),-1!==h&&(r["browser.script.source_char_position"]=h)}const a=wf({name:"Main UI thread blocked",op:"ui.long-animation-frame",startTime:i,attributes:r});a&&a.end(i+s)}}).observe({type:"long-animation-frame",buffered:!0})}():e&&function Kst(){e1("longtask",({entries:t})=>{for(const n of t){if(!ma())return;const e=fo(Ql+n.startTime),i=fo(n.duration),s=wf({name:"Main UI thread blocked",op:"ui.long-task",startTime:e,attributes:{[Do]:"auto.ui.browser.metrics"}});s&&s.end(e+i)}})}(),s&&function Yst(){e1("event",({entries:t})=>{for(const n of t){if(!ma())return;if("click"===n.name){const e=fo(Ql+n.startTime),i=fo(n.duration),s={name:$p(n.target),op:`ui.interaction.${n.name}`,startTime:e,attributes:{[Do]:"auto.ui.browser.metrics"}},r=Tue(n.target);r&&(s.attributes["ui.component_name"]=r);const o=wf(s);o&&o.end(e+i)}}})}();const y={name:void 0,source:void 0};function w(E,T){const L="pageload"===T.op,W=r?r(T):T,H=W.attributes||{};T.name!==W.name&&(H[Nc]="custom",W.attributes=H),y.name=W.name,y.source=H[Nc];const P=Ohe(W,{idleTimeout:o,finalTimeout:a,childSpanTimeout:l,disableAutoFinish:L,beforeSpanEnd:ne=>{v(),function trt(t){const n=X6();if(!n||!ui.performance.getEntries||!Ql)return;Rc&&Tt.log("[Tracing] Adding & adjusting spans using Performance API");const e=fo(Ql),i=n.getEntries(),{op:s,start_timestamp:r}=os(t);if(i.slice(Mhe).forEach(o=>{const a=fo(o.startTime),l=fo(Math.max(0,o.duration));if(!("navigation"===s&&r&&e+a<r))switch(o.entryType){case"navigation":!function irt(t,n,e){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(i=>{FA(t,n,i,e)}),FA(t,n,"secureConnection",e,"TLS/SSL","connectEnd"),FA(t,n,"fetch",e,"cache","domainLookupStart"),FA(t,n,"domainLookup",e,"DNS"),function srt(t,n,e){const i=e+fo(n.requestStart),s=e+fo(n.responseEnd),r=e+fo(n.responseStart);n.responseEnd&&(n1(t,i,s,{op:"browser",name:"request",attributes:{[Do]:"auto.ui.browser.metrics"}}),n1(t,r,s,{op:"browser",name:"response",attributes:{[Do]:"auto.ui.browser.metrics"}}))}(t,n,e)}(t,o,e);break;case"mark":case"paint":case"measure":{!function nrt(t,n,e,i,s){const r=ex(),o=fo(r?r.requestStart:0),a=s+Math.max(e,o),l=s+e,c=l+i,u={[Do]:"auto.resource.browser.metrics"};a!==l&&(u["sentry.browser.measure_happened_before_request"]=!0,u["sentry.browser.measure_start_time"]=a),n1(t,a,c,{name:n.name,op:n.entryType,attributes:u})}(t,o,a,l,e);const c=OA(),u=o.startTime<c.firstHiddenTime;"first-paint"===o.name&&u&&(Rc&&Tt.log("[Measurements] Adding FP"),_a.fp={value:o.startTime,unit:"millisecond"}),"first-contentful-paint"===o.name&&u&&(Rc&&Tt.log("[Measurements] Adding FCP"),_a.fcp={value:o.startTime,unit:"millisecond"});break}case"resource":!function rrt(t,n,e,i,s,r){if("xmlhttprequest"===n.initiatorType||"fetch"===n.initiatorType)return;const o=Cg(e),a={[Do]:"auto.resource.browser.metrics"};Y6(a,n,"transferSize","http.response_transfer_size"),Y6(a,n,"encodedBodySize","http.response_content_length"),Y6(a,n,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in n&&(a["resource.render_blocking_status"]=n.renderBlockingStatus),o.protocol&&(a["url.scheme"]=o.protocol.split(":").pop()),o.host&&(a["server.address"]=o.host),a["url.same_origin"]=e.includes(ui.location.origin);const l=r+i;n1(t,l,l+s,{name:e.replace(ui.location.origin,""),op:n.initiatorType?`resource.${n.initiatorType}`:"resource.other",attributes:a})}(t,o,o.name,a,l,e)}}),Mhe=Math.max(i.length-1,0),function ort(t){const n=ui.navigator;if(!n)return;const e=n.connection;e&&(e.effectiveType&&t.setAttribute("effectiveConnectionType",e.effectiveType),e.type&&t.setAttribute("connectionType",e.type),K6(e.rtt)&&(_a["connection.rtt"]={value:e.rtt,unit:"millisecond"})),K6(n.deviceMemory)&&t.setAttribute("deviceMemory",`${n.deviceMemory} GB`),K6(n.hardwareConcurrency)&&t.setAttribute("hardwareConcurrency",String(n.hardwareConcurrency))}(t),"pageload"===s){(function lrt(t){const n=ex();if(!n)return;const{responseStart:e,requestStart:i}=n;i<=e&&(Rc&&Tt.log("[Measurements] Adding TTFB Request Time"),t["ttfb.requestTime"]={value:e-i,unit:"millisecond"})})(_a),["fcp","fp","lcp"].forEach(a=>{const l=_a[a];if(!l||!r||e>=r)return;const c=l.value,u=e+fo(c),d=Math.abs(1e3*(u-r));Rc&&Tt.log(`[Measurements] Normalized ${a} from ${c} to ${d} (${d-c})`),l.value=d});const o=_a["mark.fid"];o&&_a.fid&&(n1(t,o.value,o.value+fo(_a.fid.value),{name:"first input delay",op:"ui.action",attributes:{[Do]:"auto.ui.browser.metrics"}}),delete _a["mark.fid"]),"fcp"in _a||delete _a.cls,Object.entries(_a).forEach(([a,l])=>{!function hst(t,n,e){const i=ma(),s=i&&pa(i);s&&s.addEvent(t,{[m6]:n,[p6]:e})}(a,l.value,l.unit)}),function art(t){lh&&(Rc&&Tt.log("[Measurements] Adding LCP Data"),lh.element&&t.setAttribute("lcp.element",$p(lh.element)),lh.id&&t.setAttribute("lcp.id",lh.id),lh.url&&t.setAttribute("lcp.url",lh.url.trim().slice(0,200)),t.setAttribute("lcp.size",lh.size)),rx&&rx.sources&&(Rc&&Tt.log("[Measurements] Adding CLS Data"),rx.sources.forEach((n,e)=>t.setAttribute(`cls.source.${e+1}`,$p(n.node))))}(t)}lh=void 0,rx=void 0,_a={}}(ne)}});function X(){["interactive","complete"].includes(ii.document.readyState)&&E.emit("idleSpanEnableAutoFinish",P)}return L&&ii.document&&(ii.document.addEventListener("readystatechange",()=>{X()}),X()),P}return{name:"BrowserTracing",afterAllSetup(E){let T,L=ii.location&&ii.location.href;E.on("startNavigationSpan",W=>{Zi()===E&&(T&&!os(T).timestamp&&(Jl&&Tt.log(`[Tracing] Finishing current root span with op: ${os(T).op}`),T.end()),T=w(E,{op:"navigation",...W}))}),E.on("startPageLoadSpan",(W,H={})=>{if(Zi()!==E)return;T&&!os(T).timestamp&&(Jl&&Tt.log(`[Tracing] Finishing current root span with op: ${os(T).op}`),T.end());const ne=function ctt(t,n){const e=function ltt(t){if(!t)return;const n=t.match(att);if(!n)return;let e;return"1"===n[3]?e=!0:"0"===n[3]&&(e=!1),{traceId:n[1],parentSampled:e,parentSpanId:n[2]}}(t),i=jue(n),{traceId:s,parentSpanId:r,parentSampled:o}=e||{};return e?{traceId:s||Ar(),parentSpanId:r||Ar().substring(16),spanId:Ar().substring(16),sampled:o,dsc:i||{}}:{traceId:s||Ar(),spanId:Ar().substring(16)}}(H.sentryTrace||Phe("sentry-trace"),H.baggage||Phe("baggage"));Cr().setPropagationContext(ne),T=w(E,{op:"pageload",...W})}),E.on("spanEnd",W=>{const H=os(W).op;if(W!==pa(W)||"navigation"!==H&&"pageload"!==H)return;const P=Cr(),X=P.getPropagationContext();P.setPropagationContext({...X,sampled:void 0!==X.sampled?X.sampled:gg(W),dsc:X.dsc||Up(W)})}),ii.location&&(p&&function Rrt(t,n,e){t.emit("startPageLoadSpan",n,e),Cr().setTransactionName(n.name);const i=ma();i&&os(i)}(E,{name:ii.location.pathname,startTime:Ql?Ql/1e3:void 0,attributes:{[Nc]:"url",[Do]:"auto.pageload.browser"}}),g&&wA(({to:W,from:H})=>{void 0===H&&L&&-1!==L.indexOf(W)?L=void 0:H!==W&&(L=void 0,Lhe(E,{name:ii.location.pathname,attributes:{[Nc]:"url",[Do]:"auto.navigation.browser"}}))})),c&&function brt(){ii&&ii.document?ii.document.addEventListener("visibilitychange",()=>{const t=ma();if(!t)return;const n=pa(t);if(ii.document.hidden&&n){const e="cancelled",{op:i,status:s}=os(n);Jl&&Tt.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${i}`),s||n.setStatus({code:fa,message:e}),n.setAttribute("sentry.cancellation_reason","document.hidden"),n.end()}}):Jl&&Tt.warn("[Tracing] Could not set up background tab detection due to lack of global document")}(),s&&function Frt(t,n,e,i){let s;ii.document&&addEventListener("click",()=>{const o="ui.action.click",a=ma(),l=a&&pa(a);if(l){const c=os(l).op;if(["navigation","pageload"].includes(c))return void(Jl&&Tt.warn(`[Tracing] Did not create ${o} span because a pageload or navigation span is in progress.`))}s&&(s.setAttribute(f6,"interactionInterrupted"),s.end(),s=void 0),i.name?s=Ohe({name:i.name,op:o,attributes:{[Nc]:i.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:e}):Jl&&Tt.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`)},{once:!1,capture:!0})}(o,a,l,y),n&&function drt(t){const n=({entries:e})=>{const i=ma(),s=i&&pa(i);e.forEach(r=>{if(!function Hst(t){return"duration"in t}(r)||!s)return;const o=r.interactionId;if(null!=o&&!LA.has(o)){if(Z6.length>10){const a=Z6.shift();LA.delete(a)}Z6.push(o),LA.set(o,s)}})};e1("event",n),e1("first-input",n)}(),Crt({traceFetch:u,traceXHR:d,tracePropagationTargets:E.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:h,enableHTTPTimings:f})}}};function Lhe(t,n){Oc().setPropagationContext(cA()),Cr().setPropagationContext(cA()),t.emit("startNavigationSpan",n),Cr().setTransactionName(n.name);const e=ma();return"navigation"===(e&&os(e).op)?e:void 0}function Phe(t){const n=function Det(t){return zy.document&&zy.document.querySelector?zy.document.querySelector(t):null}(`meta[name=${t}]`);return n?n.getAttribute("content"):void 0}const $he=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;const Brt=typeof Zone<"u"&&Zone.root&&Zone.root.run;function Cf(t){return Brt?Zone.root.run(t):t()}function Bhe(t){if(t instanceof Error)return!0;if(null===t||"object"!=typeof t)return!1;const n=t;return hu(n.name)&&hu(n.message)&&(void 0===n.stack||hu(n.stack))}let Vhe,Urt=(()=>{class t{constructor(e){this._options={logErrors:!0,...e}}ngOnDestroy(){this._removeAfterSendEventListener&&this._removeAfterSendEventListener()}handleError(e){const i=this._extractError(e)||"Handled unknown error",s=Cf(()=>_A(i,{mechanism:{type:"angular",handled:!1}}));if(this._options.logErrors&&console.error(i),this._options.showDialog){const r=Zi();r&&!this._removeAfterSendEventListener?this._removeAfterSendEventListener=r.on("afterSendEvent",o=>{!o.type&&o.event_id&&Cf(()=>{she({...this._options.dialogOptions,eventId:o.event_id})})}):r||Cf(()=>{she({...this._options.dialogOptions,eventId:s})})}}_extractError(e){if(this._options.extractor){const i=this._defaultExtractor.bind(this);return this._options.extractor(e,i)}return this._defaultExtractor(e)}_defaultExtractor(e){const i=function Vrt(t){return t&&t.ngOriginalError?t.ngOriginalError:t}(e);return i instanceof v_?function zrt(t){return Bhe(t.error)?t.error:typeof ErrorEvent<"u"&&t.error instanceof ErrorEvent&&t.error.message?t.error.message:"string"==typeof t.error?`Server returned code ${t.status} with body "${t.error}"`:t.message}(i):"string"==typeof i||Bhe(i)?i:null}}return t.\u0275fac=function(e){return new(e||t)(Re("errorHandlerOptions"))},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Grt(t){return new Urt(t)}function qrt(t={}){return!1!==t.instrumentNavigation&&(Vhe=!0),Nrt({...t,instrumentNavigation:!1})}let zhe=(()=>{class t{constructor(e){this._router=e,this.navStart$=this._router.events.pipe(an(i=>i instanceof sS),mi(i=>{if(!Vhe)return void($he&&Tt.error("Angular integration has tracing enabled, but Tracing integration is not configured"));this._routingSpan&&(this._routingSpan.end(),this._routingSpan=null);const s=Zi(),r=function oit(t){return t.split(/[?#]/,1)[0]}(i.url);return s?(this._isPageloadOngoing()?this._pageloadOngoing=!1:Cf(()=>{Lhe(s,{name:r,attributes:{[Do]:"auto.navigation.angular",[Nc]:"url"}})}),void(this._routingSpan=Cf(()=>wf({name:`${i.url}`,op:"ui.angular.routing",attributes:{[Do]:"auto.ui.angular",[Nc]:"url",url:r,...i.navigationTrigger&&{navigationTrigger:i.navigationTrigger}}}))||null)):void 0})),this.resEnd$=this._router.events.pipe(an(i=>i instanceof Ene),mi(i=>{const s=function Xrt(t){const n=[];let e=t&&t.firstChild;for(;e;){const s=e&&e.routeConfig&&e.routeConfig.path;if(null==s)break;n.push(s),e=e.firstChild}const i=n.filter(s=>s).join("/");return i?`/${i}/`:"/"}(i.state.root);s&&Cr().setTransactionName(s);const r=ma();!function Krt(t,n){const e=n&&os(n).data||{};n&&"url"===e[Nc]&&(n.updateName(t),n.setAttribute(Nc,"route"),n.setAttribute(Do,`auto.${os(n).op}.angular`))}(s,r&&pa(r))})),this.navEnd$=this._router.events.pipe(an(i=>i instanceof su||i instanceof gp||i instanceof Ek),mi(()=>{this._routingSpan&&(Cf(()=>{this._routingSpan.end()}),this._routingSpan=null)})),this._routingSpan=null,this._pageloadOngoing=!0,this._subscription=new Tn,this._subscription.add(this.navStart$.subscribe()),this._subscription.add(this.resEnd$.subscribe()),this._subscription.add(this.navEnd$.subscribe())}ngOnDestroy(){this._subscription.unsubscribe()}_isPageloadOngoing(){if(!this._pageloadOngoing)return!1;const e=ma();if(!e)return this._pageloadOngoing=!1,!1;const i=pa(e);return this._pageloadOngoing="pageload"===os(i).op,this._pageloadOngoing}}return t.\u0275fac=function(e){return new(e||t)(Re(Hr))},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Uhe{constructor(n,e){this.backend=n,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(n){return this.data.has(n)||this.dataMover.moveData(this.backend,n),this.data.get(n)}set(n,e){this.dataIdsCount++,this.data.set(n,e)}has(n){return this.data.has(n)}delete(n){return this.dataIdsCount--,this.data.delete(n)}numDataIds(){return this.dataIdsCount}}class eV{refCount(n){return ec("refCount")}incRef(n){return ec("incRef")}timerAvailable(){return!0}time(n){return ec("time")}read(n){return ec("read")}readSync(n){return ec("readSync")}readToGPU(n,e){return ec("readToGPU")}numDataIds(){return ec("numDataIds")}disposeData(n,e){return ec("disposeData")}write(n,e,i){return ec("write")}move(n,e,i,s,r){return ec("move")}createTensorFromGPUData(n,e,i){return ec("createTensorFromGPUData")}memory(){return ec("memory")}floatPrecision(){return ec("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return ec("dispose")}}function ec(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function Ghe(t){let n=t.length,e=0;for(;n>0;)e=Math.random()*n|0,n--,Hp(t,n,e)}function Tg(t,n,e){return Math.max(t,Math.min(n,e))}function tV(t){return t%2==0?t:t+1}function Hp(t,n,e){const i=t[n];t[n]=t[e],t[e]=i}function le(t,n){if(!t)throw new Error("string"==typeof n?n:n())}function tc(t,n,e=""){le(Qi(t,n),()=>e+` Shapes ${t} and ${n} must match`)}function s1(t){le(null!=t,()=>"The input to the tensor constructor must be a non-null value.")}function at(t){if(0===t.length)return 1;let n=t[0];for(let e=1;e<t.length;e++)n*=t[e];return n}function Qi(t,n){if(t===n)return!0;if(null==t||null==n||t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function r1(t){return t%1==0}function nV(t){const n=Math.ceil(Math.sqrt(t));return[n,Math.ceil(t/n)]}function o1(t,n){return n<=t.length?t:t+" ".repeat(n-t.length)}function jhe(t,n=(s=>0),e,i){return new Promise((s,r)=>{let o=0;const a=()=>{if(t())return void s();o++;const l=n(o);null!=e&&o>=e?r():null!=i?i(a,l):setTimeout(a,l)};a()})}function Hhe(t,n){let e=1,i=-1;for(let r=0;r<t.length;++r)if(t[r]>=0)e*=t[r];else if(-1===t[r]){if(-1!==i)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${i} and dim ${r}`);i=r}else if(t[r]<0)throw Error(`Shapes can not be < 0. Found ${t[r]} at dim ${r}`);if(-1===i){if(n>0&&n!==e)throw Error(`Size(${n}) must match the product of shape ${t}`);return t}if(0===e)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(n%e!=0)throw Error(`The implicit shape can't be a fractional number. Got ${n} / ${e}`);const s=t.slice();return s[i]=n/e,s}function $i(t,n){const e=n.length;return le((t=null==t?n.map((i,s)=>s):[].concat(t)).every(i=>i>=-e&&i<e),()=>`All values in axis param must be in range [-${e}, ${e}) but got axis ${t}`),le(t.every(i=>r1(i)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(i=>i<0?e+i:i)}function Wp(t,n){const e=[],i=[],s=null!=n&&Array.isArray(n)&&0===n.length,r=null==n||s?null:$i(n,t).sort();let o=0;for(let a=0;a<t.length;++a){if(null!=r){if(r[o]===a&&1!==t[a])throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(null==r[o]||r[o]>a)&&1===t[a]&&(e.push(t[a]),i.push(a)),r[o]<=a&&o++}1!==t[a]&&(e.push(t[a]),i.push(a))}return{newShape:e,keptDims:i}}function ga(t,n){return Kr(t,n)}function Kr(t,n){let e=null;if(null==t||"float32"===t)e=new Float32Array(n);else if("int32"===t)e=new Int32Array(n);else if("bool"===t)e=new Uint8Array(n);else{if("string"!==t)throw new Error(`Unknown data type ${t}`);e=new Array(n)}return e}function Whe(t,n){return!("complex64"===n||"float32"===n&&"complex64"!==t||"int32"===n&&"float32"!==t&&"complex64"!==t||"bool"===n&&"bool"===t)}function $A(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error(`Unknown dtype ${t}`)}function ox(t){return"string"==typeof t||t instanceof String}function iV(t){return"number"==typeof t}function a1(t){return Array.isArray(t)?a1(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":iV(t)?"float32":ox(t)?"string":function iot(t){return"boolean"==typeof t}(t)?"bool":"float32"}function sV(t){return!!(t&&t.constructor&&t.call&&t.apply)}function rV(t,n){for(let e=n;e<t;++e)if(t%e==0)return e;return t}function xn(t){const n=t.length;if(n<2)return[];const e=new Array(n-1);e[n-2]=t[n-1];for(let i=n-3;i>=0;--i)e[i]=e[i+1]*t[i+1];return e}function qhe(t,n,e,i=!1){const s=new Array;if(1===n.length){const r=n[0]*(i?2:1);for(let o=0;o<r;o++)s[o]=e[t+o]}else{const r=n[0],o=n.slice(1),a=o.reduce((l,c)=>l*c)*(i?2:1);for(let l=0;l<r;l++)s[l]=qhe(t+l*a,o,e,i)}return s}function mu(t,n,e=!1){if(0===t.length)return n[0];const i=t.reduce((s,r)=>s*r)*(e?2:1);if(0===i)return[];if(i!==n.length)throw new Error(`[${t}] does not match the input size ${n.length}${e?" for a complex tensor":""}.`);return qhe(0,t,n,e)}function oV(t,n){const e=Aa(t,n);for(let i=0;i<e.length;i++)e[i]=1;return e}function Aa(t,n){if(null==n||"float32"===n||"complex64"===n)return new Float32Array(t);if("int32"===n)return new Int32Array(t);if("bool"===n)return new Uint8Array(t);throw new Error(`Unknown data type ${n}`)}function Khe(t,n){const e=t.reduce((i,s)=>i*s,1);if(null==n||"float32"===n)return mu(t,new Float32Array(e));if("int32"===n)return mu(t,new Int32Array(e));if("bool"===n)return mu(t,new Uint8Array(e));throw new Error(`Unknown data type ${n}`)}function Fc(t){t.forEach(n=>{le(Number.isInteger(n)&&n>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function uh(t,n,e){if(0===n)return 0;if(1===n)return t[0];let i=t[t.length-1];for(let s=0;s<t.length-1;++s)i+=e[s]*t[s];return i}function l1(t,n,e){if(0===n)return[];if(1===n)return[t];const i=new Array(n);for(let s=0;s<i.length-1;++s)i[s]=Math.floor(t/e[s]),t-=i[s]*e[s];return i[i.length-1]=t,i}function qp(t){return t&&t.then&&"function"==typeof t.then}class rot{constructor(n){this.global=n,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=oot,this.populateURLFlags()}setPlatform(n,e){null!=this.platform&&(nt().getBool("IS_TEST")||nt().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${n}.`)),this.platformName=n,this.platform=e}registerFlag(n,e,i){if(this.flagRegistry[n]={evaluationFn:e,setHook:i},null!=this.urlFlags[n]){const s=this.urlFlags[n];nt().getBool("IS_TEST")||nt().getBool("PROD")||console.warn(`Setting feature override from URL ${n}: ${s}.`),this.set(n,s)}}getAsync(n){var e=this;return de(function*(){return n in e.flags||(e.flags[n]=yield e.evaluateFlag(n)),e.flags[n]})()}get(n){if(n in this.flags)return this.flags[n];const e=this.evaluateFlag(n);if(qp(e))throw new Error(`Flag ${n} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[n]=e,this.flags[n]}getNumber(n){return this.get(n)}getBool(n){return this.get(n)}getString(n){return this.get(n)}getFlags(){return this.flags}get features(){return this.flags}set(n,e){if(null==this.flagRegistry[n])throw new Error(`Cannot set flag ${n} as it has not been registered.`);this.flags[n]=e,null!=this.flagRegistry[n].setHook&&this.flagRegistry[n].setHook(e)}evaluateFlag(n){if(null==this.flagRegistry[n])throw new Error(`Cannot evaluate flag '${n}': no evaluation function found.`);return this.flagRegistry[n].evaluationFn()}setFlags(n){this.flags=Object.assign({},n)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const n=this.getQueryParams(this.global.location.search);"tfjsflags"in n&&n.tfjsflags.split(",").forEach(i=>{const[s,r]=i.split(":");this.urlFlags[s]=function lot(t,n){const e=n.toLowerCase();return"true"===e||"false"===e?"true"===e:""+ +e===e?+e:n}(0,r)})}}function oot(t){const n={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...i)=>(function aot(t,n,e){t[decodeURIComponent(n)]=decodeURIComponent(e||"")}(n,i[0],i[1]),i.join("="))),n}function nt(){return Yhe}let aV,Yhe=null;function Zhe(){if(null==aV){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else{if(!(typeof self<"u"))throw new Error("Could not find a global object");t=self}aV=t}return aV}function lV(t,n){const e=function uot(){const t=Zhe();return null==t._tfGlobals&&(t._tfGlobals=new Map),t._tfGlobals}();if(e.has(t))return e.get(t);{const i=n();return e.set(t,i),e.get(t)}}const BA="Abs",ax="Acos",lx="Acosh",c1="Add",VA="AddN",zA="ArgMax",UA="ArgMin",cx="Asin",ux="Asinh",dx="Atan",hx="Atanh",fx="Atan2",GA="AvgPool",dV="AvgPoolGrad",jA="AvgPool3D",hV="AvgPool3DGrad",HA="BatchMatMul",WA="BatchToSpaceND",fV="Bincount",qA="BitwiseAnd",pV="BroadcastArgs",px="Cast",mx="Ceil",_x="ClipByValue",mV="Complex",KA="ComplexAbs",XA="Concat",YA="Conv2D",_V="Conv2DBackpropFilter",ZA="Conv2DBackpropInput",QA="Conv3D",gV="Conv3DBackpropFilterV2",bV="Conv3DBackpropInputV2",gx="Cos",bx="Cosh",vV="Cumprod",JA="Cumsum",yV="CropAndResize",wV="DenseBincount",SV="DepthToSpace",eO="DepthwiseConv2dNative",CV="DepthwiseConv2dNativeBackpropFilter",xV="DepthwiseConv2dNativeBackpropInput",EV="Diag",tO="Dilation2D",TV="Dilation2DBackpropInput",IV="Dilation2DBackpropFilter",vx="RealDiv",DV="Einsum",yx="Elu",MV="EluGrad",wx="Erf",nO="Equal",Sx="Exp",iO="ExpandDims",Cx="Expm1",OV="Fill",NV="FlipLeftRight",xx="Floor",Ex="FloorDiv",sO="FusedBatchNorm",rO="GatherV2",RV="GatherNd",oO="Greater",Tx="GreaterEqual",Ix="Identity",FV="IFFT",LV="Imag",kx="IsFinite",Dx="IsInf",Mx="IsNan",aO="LeakyRelu",lO="Less",cO="LessEqual",PV="LinSpace",Ax="Log",Ox="Log1p",uO="LogicalAnd",dO="LogicalNot",hO="LogicalOr",fO="LRN",$V="LRNGrad",pO="Max",Nx="Maximum",mO="MaxPool",BV="MaxPoolGrad",_O="MaxPool3D",VV="MaxPool3DGrad",zV="MaxPoolWithArgmax",gO="Mean",bO="Min",Rx="Minimum",vO="MirrorPad",Fx="Mod",UV="Multinomial",Lx="Multiply",yO="Neg",wO="NotEqual",GV="NonMaxSuppressionV3",jV="NonMaxSuppressionV4",HV="NonMaxSuppressionV5",SO="OnesLike",CO="OneHot",xO="Pack",EO="PadV2",Px="Pow",TO="Prelu",IO="Prod",WV="RaggedGather",qV="RaggedRange",KV="RaggedTensorToTensor",XV="Range",YV="Real",$x="Reciprocal",Bx="Relu",kO="Reshape",DO="ResizeNearestNeighbor",ZV="ResizeNearestNeighborGrad",MO="ResizeBilinear",QV="ResizeBilinearGrad",Vx="Relu6",AO="Reverse",zx="Round",Ux="Rsqrt",JV="ScatterNd",ez="TensorScatterUpdate",tz="SearchSorted",OO="Select",Gx="Selu",NO="Slice",jx="Sin",Hx="Sinh",Wx="Sign",qx="Sigmoid",Kx="Softplus",Xx="Sqrt",RO="Sum",FO="SpaceToBatchND",LO="SplitV",PO="Softmax",nz="SparseFillEmptyRows",iz="SparseReshape",sz="SparseSegmentMean",rz="SparseSegmentSum",oz="SparseToDense",Yx="SquaredDifference",az="Square",$O="StaticRegexReplace",lz="StridedSlice",cz="StringNGrams",uz="StringSplit",dz="StringToHashBucketFast",Zx="Sub",Qx="Tan",Jx="Tanh",eE="Tile",hz="TopK",fz="Transform",u1="Transpose",pz="Unique",BO="Unpack",VO="UnsortedSegmentSum",zO="ZerosLike",tE="Step",mz="FromPixels",_z="RotateWithOffset",UO="_FusedMatMul",GO="FusedConv2D",jO="FusedDepthwiseConv2D";function Lc(...t){nt().getBool("IS_TEST")||nt().getBool("PROD")||console.warn(...t)}function fot(...t){nt().getBool("IS_TEST")||nt().getBool("PROD")||console.log(...t)}const d1=lV("kernelRegistry",()=>new Map),nE=lV("gradRegistry",()=>new Map);function HO(t,n){const e=vz(t,n);return d1.get(e)}function Qhe(t){return nE.get(t)}function gz(t){const n=d1.entries(),e=[];for(;;){const{done:i,value:s}=n.next();if(i)break;const[r,o]=s,[a]=r.split("_");a===t&&e.push(o)}return e}function bz(t){const{kernelName:n,backendName:e}=t,i=vz(n,e);d1.has(i)&&Lc(`The kernel '${n}' for backend '${e}' is already registered`),d1.set(i,t)}function pot(t){const{kernelName:n}=t;nE.has(n)&&nt().getBool("DEBUG")&&Lc(`Overriding the gradient for '${n}'`),nE.set(n,t)}function vz(t,n){return`${n}_${t}`}function Jhe(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var efe=Y(929);const Ig=Y.n(efe)()||efe;function WO(t){return Ig.fromString(t,!0,16)}const tfe=WO("c3a5c85c97cb3127"),kg=WO("b492b66fbe98f273"),Za=WO("9ae16a3b2f90404f");function yz(t){return t.xor(t.shru(47))}function nfe(t,n,e){const i=t.slice(n,n+e);return Ig.fromBytes(Array.from(i),!0,!0)}function dr(t,n){return nfe(t,n,8)}function ife(t,n){return nfe(t,n,4)}function Zo(t,n){return 0===n?t:t.shru(n).or(t.shl(64-n))}function Kp(t,n,e=WO("9ddfea08eb382d69")){let i=t.xor(n).mul(e);i=i.xor(i.shru(47));let s=n.xor(i).mul(e);return s=s.xor(s.shru(47)),s=s.mul(e),s}function qO(t,n,e,i){return function _ot(t,n,e,i,s,r){s=s.add(t),r=Zo(r.add(s).add(i),21);const o=s;return s=(s=s.add(n)).add(e),r=r.add(Zo(s,44)),[s.add(i),r.add(o)]}(dr(t,n),dr(t,n+8),dr(t,n+16),dr(t,n+24),e,i)}function yot(t,n=t.length){const e=Ig.fromNumber(81,!0);if(n<=32)return n<=16?function got(t,n=t.length){if(n>=8){const e=Za.add(2*n),i=dr(t,0).add(Za),s=dr(t,n-8);return Kp(Zo(s,37).mul(e).add(i),Zo(i,25).add(s).mul(e),e)}if(n>=4){const e=Za.add(2*n);return Kp(ife(t,0).shl(3).add(n),ife(t,n-4),e)}if(n>0){const o=n+(t[n-1]<<2);return yz(Za.mul(t[0]+(t[n>>1]<<8)).xor(tfe.mul(o))).mul(Za)}return Za}(t,n):function bot(t,n=t.length){const e=Za.add(2*n),i=dr(t,0).mul(kg),s=dr(t,8),r=dr(t,n-8).mul(e),o=dr(t,n-16).mul(Za);return Kp(Zo(i.add(s),43).add(Zo(r,30)).add(o),i.add(Zo(s.add(Za),18)).add(r),e)}(t,n);if(n<=64)return function vot(t,n=t.length){const e=Za.add(2*n),i=dr(t,0).mul(Za),s=dr(t,8),r=dr(t,n-8).mul(e),o=dr(t,n-16).mul(Za),a=Zo(i.add(s),43).add(Zo(r,30)).add(o),l=Kp(a,i.add(Zo(s.add(Za),18)).add(r),e),c=dr(t,16).mul(e),u=dr(t,24),d=a.add(dr(t,n-32)).mul(e),h=l.add(dr(t,n-24)).mul(e);return Kp(Zo(c.add(u),43).add(Zo(d,30)).add(h),c.add(Zo(u.add(i),18)).add(d),e)}(t,n);let i=e,s=e.mul(kg).add(113),r=yz(s.mul(Za).add(113)).mul(Za),o=[Ig.UZERO,Ig.UZERO],a=[Ig.UZERO,Ig.UZERO];i=i.mul(Za).add(dr(t,0));let l=0;const c=64*(n-1>>6),u=c+(n-1&63)-63;do{i=Zo(i.add(s).add(o[0]).add(dr(t,l+8)),37).mul(kg),s=Zo(s.add(o[1]).add(dr(t,l+48)),42).mul(kg),i=i.xor(a[1]),s=s.add(o[0]).add(dr(t,l+40)),r=Zo(r.add(a[0]),33).mul(kg),o=qO(t,l,o[1].mul(kg),i.add(a[0])),a=qO(t,l+32,r.add(a[1]),s.add(dr(t,l+16))),[r,i]=[i,r],l+=64}while(l!==c);const d=kg.add(r.and(255).shl(1));return l=u,a[0]=a[0].add(n-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),i=Zo(i.add(s).add(o[0]).add(dr(t,l+8)),37).mul(d),s=Zo(s.add(o[1]).add(dr(t,l+48)),42).mul(d),i=i.xor(a[1].mul(9)),s=s.add(o[0].mul(9).add(dr(t,l+40))),r=Zo(r.add(a[0]),33).mul(d),o=qO(t,l,o[1].mul(d),i.add(a[0])),a=qO(t,l+32,r.add(a[1]),s.add(dr(t,l+16))),[r,i]=[i,r],Kp(Kp(o[0],a[0],d).add(yz(s).mul(tfe)).add(r),Kp(o[1],a[1],d).add(i),d)}function Xp(t,n){return"string"===n?Yp(t):Dg([t],n)}function Dg(t,n){if("string"===n)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Mg(t)),nt().getBool("DEBUG")&&function eot(t,n){for(let e=0;e<t.length;e++){const i=t[e];if(isNaN(i)||!isFinite(i))throw Error(`A tensor of type ${n} being uploaded contains ${i}.`)}}(t,n),function wot(t,n){return t instanceof Float32Array&&"float32"===n||t instanceof Int32Array&&"int32"===n||t instanceof Uint8Array&&"bool"===n}(t,n))return t;if(null==n||"float32"===n||"complex64"===n)return new Float32Array(t);if("int32"===n)return new Int32Array(t);if("bool"===n){const e=new Uint8Array(t.length);for(let i=0;i<e.length;++i)0!==Math.round(t[i])&&(e[i]=1);return e}throw new Error(`Unknown data type ${n}`)}function Oa(){return nt().platform.now()}function Yp(t,n="utf-8"){return n=n||"utf-8",nt().platform.encode(t,n)}function Zp(t,n="utf-8"){return n=n||"utf-8",nt().platform.decode(t,n)}function Pc(t){return null!=nt().platform.isTypedArray?nt().platform.isTypedArray(t):Jhe(t)}function Mg(t,n=[],e=!1){if(null==n&&(n=[]),"boolean"==typeof t||"number"==typeof t||"string"==typeof t||qp(t)||null==t||Pc(t)&&e)n.push(t);else if(Array.isArray(t)||Pc(t))for(let i=0;i<t.length;++i)Mg(t[i],n,e);else{let i=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(i=Math.max(i,Number(s)));for(let s=0;s<=i;s++)Mg(t[s],n,e)}return n}class Cot{constructor(n,e){this.backendTimer=n,this.logger=e,null==e&&(this.logger=new Eot)}profileKernel(n,e,i){let s;const r=()=>{s=i()};let o;const a=Oa();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(r);else{r();for(const c of s)c.dataSync();o=Promise.resolve({kernelMs:Oa()-a})}if(nt().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<s.length;c++){const u=s[c];u.data().then(d=>{xot(d,u.dtype,n)})}return{kernelName:n,outputs:s,inputs:e,timeMs:o.then(c=>c.kernelMs),extraInfo:o.then(c=>null!=c.getExtraProfileInfo?c.getExtraProfileInfo():"")}}logKernelProfile(n){const{kernelName:e,outputs:i,timeMs:s,inputs:r,extraInfo:o}=n;i.forEach(a=>{Promise.all([a.data(),s,o]).then(l=>{this.logger.logKernelProfile(e,a,l[0],l[1],r,l[2])})})}}function xot(t,n,e){if("float32"!==n)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${e}'`),!0}return!1}class Eot{logKernelProfile(n,e,i,s,r,o){const a="number"==typeof s?o1(`${s}ms`,9):s.error,l=o1(n,25),c=e.rank,u=e.size,d=o1(e.shape.toString(),14);let h="";for(const f in r){const p=r[f];if(null!=p){const g=p.shape||e.shape,v=g.length;h+=`${f}: ${v}D ${v>0?g:""} `}}console.log(`%c${l}\t%c${a}\t%c${c}D ${d}\t%c${u}\t%c${h}\t%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}const sfe=20,iE=3,wz=7;function kot(t,n,e,i){const s=xn(n),r=function Mot(t,n,e,i){const s=at(n),r=i[i.length-1],o=new Array(r).fill(0),a=n.length,l="complex64"===e?rE(t):t;if(a>1)for(let c=0;c<s/r;c++){const u=c*r;for(let d=0;d<r;d++)o[d]=Math.max(o[d],sE(l[u+d],0,e).length)}return o}(t,n,e,s),o=n.length,a=KO(t,n,e,s,r),l=["Tensor"];return i&&(l.push(`  dtype: ${e}`),l.push(`  rank: ${o}`),l.push(`  shape: [${n}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join("\n")),l.join("\n")}function sE(t,n,e){let i;return i=Array.isArray(t)?`${parseFloat(t[0].toFixed(wz))} + ${parseFloat(t[1].toFixed(wz))}j`:ox(t)?`'${t}'`:"bool"===e?rfe(t):parseFloat(t.toFixed(wz)).toString(),o1(i,n)}function rfe(t){return 0===t?"false":"true"}function KO(t,n,e,i,s,r=!0){const o="complex64"===e?2:1,a=n[0],l=n.length;if(0===l)return"complex64"===e?[sE(rE(t)[0],0,e)]:"bool"===e?[rfe(t[0])]:[t[0].toString()];if(1===l){if(a>sfe){let y=Array.from(t.slice(0,iE*o)),w=Array.from(t.slice((a-iE)*o,a*o));return"complex64"===e&&(y=rE(y),w=rE(w)),["["+y.map((E,T)=>sE(E,s[T],e)).join(", ")+", ..., "+w.map((E,T)=>sE(E,s[a-iE+T],e)).join(", ")+"]"]}return["["+("complex64"===e?rE(t):Array.from(t)).map((v,y)=>sE(v,s[y],e)).join(", ")+"]"]}const c=n.slice(1),u=i.slice(1),d=i[0]*o,h=[];if(a>sfe){for(let g=0;g<iE;g++){const v=g*d;h.push(...KO(t.slice(v,v+d),c,e,u,s,!1))}h.push("...");for(let g=a-iE;g<a;g++){const v=g*d;h.push(...KO(t.slice(v,v+d),c,e,u,s,g===a-1))}}else for(let g=0;g<a;g++){const v=g*d;h.push(...KO(t.slice(v,v+d),c,e,u,s,g===a-1))}const f=2===l?",":"";h[0]="["+(a>0?h[0]+f:"");for(let g=1;g<h.length-1;g++)h[g]=" "+h[g]+f;let p=",\n";for(let g=2;g<l;g++)p+="\n";return h[h.length-1]=" "+h[h.length-1]+"]"+(r?"":p),h}function rE(t){const n=[];for(let e=0;e<t.length;e+=2)n.push([t[e],t[e+1]]);return n}class Mo{constructor(n,e,i){if(this.dtype=e,this.shape=n.slice(),this.size=at(n),null!=i){const s=i.length;le(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=i||Kr(e,this.size),this.strides=xn(n)}set(n,...e){0===e.length&&(e=[0]),le(e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must match the rank (${this.rank})`);const i=this.locToIndex(e);this.values[i]=n}get(...n){0===n.length&&(n=[0]);let e=0;for(const s of n){if(s<0||s>=this.shape[e])throw new Error(`Requested out of range element at ${n}.   Buffer shape=${this.shape}`);e++}let i=n[n.length-1];for(let s=0;s<n.length-1;++s)i+=this.strides[s]*n[s];return this.values[i]}locToIndex(n){if(0===this.rank)return 0;if(1===this.rank)return n[0];let e=n[n.length-1];for(let i=0;i<n.length-1;++i)e+=this.strides[i]*n[i];return e}indexToLoc(n){if(0===this.rank)return[];if(1===this.rank)return[n];const e=new Array(this.shape.length);for(let i=0;i<e.length-1;++i)e[i]=Math.floor(n/this.strides[i]),n-=e[i]*this.strides[i];return e[e.length-1]=n,e}get rank(){return this.shape.length}toTensor(){return pd().makeTensor(this.values,this.shape,this.dtype)}}let pd=null,h1=null,ofe=null;class Ps{constructor(n,e,i,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=e||"float32",this.size=at(n),this.strides=xn(n),this.dataId=i,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){var n=this;return de(function*(){const e=yield n.data();return h1.buffer(n.shape,n.dtype,e)})()}bufferSync(){return h1.buffer(this.shape,this.dtype,this.dataSync())}array(){var n=this;return de(function*(){const e=yield n.data();return mu(n.shape,e,"complex64"===n.dtype)})()}arraySync(){return mu(this.shape,this.dataSync(),"complex64"===this.dtype)}data(){var n=this;return de(function*(){n.throwIfDisposed();const e=pd().read(n.dataId);if("string"===n.dtype){const i=yield e;try{return i.map(s=>Zp(s))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e})()}dataToGPU(n){return this.throwIfDisposed(),pd().readToGPU(this.dataId,n)}dataSync(){this.throwIfDisposed();const n=pd().readSync(this.dataId);if("string"===this.dtype)try{return n.map(e=>Zp(e))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return n}bytes(){var n=this;return de(function*(){n.throwIfDisposed();const e=yield pd().read(n.dataId);return"string"===n.dtype?e:new Uint8Array(e.buffer)})()}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),pd().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(n=!1){return h1.print(this,n)}clone(){return this.throwIfDisposed(),h1.clone(this)}toString(n=!1){return kot(this.dataSync(),this.shape,this.dtype,n)}cast(n){return this.throwIfDisposed(),h1.cast(this,n)}variable(n=!0,e,i){return this.throwIfDisposed(),pd().makeVariable(this,n,e,i)}}function ht(){return lV("Tensor",()=>Ps)}Object.defineProperty(Ps,Symbol.hasInstance,{value:t=>!!t&&null!=t.data&&null!=t.dataSync&&null!=t.throwIfDisposed}),ht();class XO extends Ps{constructor(n,e,i,s){super(n.shape,n.dtype,n.dataId,s),this.trainable=e,this.name=i}assign(n){if(n.dtype!==this.dtype)throw new Error(`dtype of the new value (${n.dtype}) and previous value (${this.dtype}) must match`);if(!Qi(n.shape,this.shape))throw new Error(`shape of the new value (${n.shape}) and previous value (${this.shape}) must match`);pd().disposeTensor(this),this.dataId=n.dataId,pd().incRef(this,null)}dispose(){pd().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(XO,Symbol.hasInstance,{value:t=>t instanceof Ps&&null!=t.assign&&t.assign instanceof Function});var afe=function(t){return t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64",t}(afe||{}),lfe=function(t){return t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64",t}(lfe||{}),cfe=function(t){return t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64",t}(cfe||{}),ufe=function(t){return t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64",t}(ufe||{});const Fot={float32:cfe,int32:afe,bool:lfe,complex64:ufe};function nc(t,n){if("string"===t||"string"===n){if("string"===t&&"string"===n)return"string";throw new Error(`Can not upcast ${t} with ${n}`)}return Fot[t][n]}function Sz(t){return nc(t,"int32")}function dfe(t){return null!=t&&"object"==typeof t&&"texture"in t&&t.texture instanceof WebGLTexture}function hfe(t){return typeof GPUBuffer<"u"&&null!=t&&"object"==typeof t&&"buffer"in t&&t.buffer instanceof GPUBuffer}function Ur(t,n){if(t.dtype===n.dtype)return[t,n];const e=nc(t.dtype,n.dtype);return[t.cast(e),n.cast(e)]}function Qp(t){const n=[];return ffe(t,n,new Set),n}function ffe(t,n,e){if(null==t)return;if(t instanceof Ps)return void n.push(t);if(!function Pot(t){return Array.isArray(t)||"object"==typeof t}(t))return;const i=t;for(const s in i){const r=i[s];e.has(r)||(e.add(r),ffe(r,n,e))}}function xz(t){return null!=t.kernelName}class pfe{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(n=>n.name)))}}}dispose(){for(const n in this.registeredVariables)this.registeredVariables[n].dispose()}}let $ot=(()=>{class t{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new pfe}ready(){var e=this;return de(function*(){if(null!=e.pendingBackendInit)return e.pendingBackendInit.then(()=>{});if(null!=e.backendInstance)return;const i=e.getSortedBackends();for(let s=0;s<i.length;s++){const r=i[s];if(yield e.initializeBackend(r).success)return void(yield e.setBackend(r))}throw new Error("Could not initialize any backends, all backend initializations failed.")})()}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:e,asyncInit:i}=this.initializeBackendsAndReturnBest();if(i)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:i}=this.initializeBackend(e);if(i)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,i,s=1){return e in this.registryFactory?(Lc(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:i,priority:s},!0)}setBackend(e){var i=this;return de(function*(){if(null==i.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(i.backendName=e,null==i.registry[e]){i.backendInstance=null;const{success:s,asyncInit:r}=i.initializeBackend(e);if(!(r?yield s:s))return!1}return i.backendInstance=i.registry[e],i.setupRegisteredKernels(),i.profiler=new Cot(i.backendInstance),!0})()}setupRegisteredKernels(){gz(this.backendName).forEach(i=>{null!=i.setupFunc&&i.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){gz(e).forEach(s=>{null!=s.disposeFunc&&s.disposeFunc(this.registry[e])})}initializeBackend(e){const i=this.registryFactory[e];if(null==i)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const s=i.factory();if(!s||s instanceof eV||"function"!=typeof s.then)return this.registry[e]=s,{success:!0,asyncInit:!1};{const r=++this.pendingBackendInitId,o=s.then(a=>!(r<this.pendingBackendInitId||(this.registry[e]=a,this.pendingBackendInit=null,0))).catch(a=>(r<this.pendingBackendInitId||(this.pendingBackendInit=null,Lc(`Initialization of backend ${e} failed`),Lc(a.stack||a.message)),!1));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}}catch(s){return Lc(`Initialization of backend ${e} failed`),Lc(s.stack||s.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,i)=>this.registryFactory[i].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let i=0;i<e.length;i++){const s=e[i],{success:r,asyncInit:o}=this.initializeBackend(s);if(o||r)return{name:s,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,i){const s=this.state.tensorInfo.get(i),r=s.backend,o=this.readSync(i),a=r.refCount(i);r.disposeData(i,!0),s.backend=e,e.move(i,o,s.shape,s.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,i){let r,s=null;if(null==i){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");i=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof i)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");s=e}return this.scopedRun(()=>this.startScope(s),()=>this.endScope(r),()=>(r=i(),r instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r))}scopedRun(e,i,s){e();try{const r=s();return i(),r}catch(r){throw i(),r}}nextTensorId(){return t.nextTensorId++}nextVariableId(){return t.nextVariableId++}clone(e){const i=Pe.runKernel(Ix,{x:e});return this.addTapeNode(this.state.activeScope.name,{x:e},[i],a=>({x:()=>Pe.runKernel(px,{x:a},{dtype:"float32"})}),[],{}),i}runKernel(e,i,s){if(null==HO(e,this.backendName))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:i,attrs:s})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,i,s){const r=this.backend.numDataIds();let o=0;s.forEach(c=>{o+="complex64"===c.dtype?3:1});const l=r-i-o-this.state.numDataMovesStack[this.state.numDataMovesStack.length-1];if(l>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${l} data ids) after running '${e}'`)}runKernelFunc(e){let i,s=[];const r=this.isTapeOn(),o=this.state.numBytes,a=this.state.numTensors;let l,c;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);const u=xz(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(xz(e)){const{kernelName:g,inputs:v,attrs:y}=e,w=HO(g,this.backendName);le(null!=w,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),l=()=>{const E=this.backend.numDataIds();c=w.kernelFunc({inputs:v,attrs:y,backend:this.backend});const T=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,E,T);const L=T.map(W=>null!=W.rank?W:this.makeTensorFromTensorInfo(W));if(r){const W=this.getTensorsForGradient(g,v,L);s=this.saveTensorsForBackwardMode(W)}return L}}else{const{forwardFunc:g}=e,v=y=>{r&&(s=y.map(w=>this.keep(this.clone(w))))};l=()=>{const y=this.backend.numDataIds();c=this.tidy(()=>g(this.backend,v));const w=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,y,w),w}}const{inputs:d,attrs:h}=e,f=xz(e)?null:e.backwardsFunc;let p;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(p=this.profiler.profileKernel(u,d,()=>l()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(p),i=p.outputs):i=l()}),r&&this.addTapeNode(u,d,i,f,s,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(g=>null!=d[g]?d[g].shape:null),outputShapes:i.map(g=>g.shape),kernelTimeMs:p.timeMs,extraInfo:p.extraInfo}),Array.isArray(c)?i:i[0]}saveTensorsForBackwardMode(e){return e.map(s=>this.keep(this.clone(s)))}getTensorsForGradient(e,i,s){const r=Qhe(e);if(null!=r){const o=r.inputsToSave||[],a=r.outputsToSave||[];let l;r.saveAllInputs?(le(Array.isArray(i),()=>"saveAllInputs is true, expected inputs to be an array."),l=Object.keys(i).map(u=>i[u])):l=o.map(u=>i[u]);const c=s.filter((u,d)=>a[d]);return l.concat(c)}return[]}makeTensor(e,i,s,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");r=r||this.backend;let o=e;"string"===(s=s||"float32")&&ox(e[0])&&(o=e.map(c=>Yp(c)));const a=r.write(o,i,s),l=new Ps(i,s,a,this.nextTensorId());if(this.trackTensor(l,r),"string"===s){const c=this.state.tensorInfo.get(a),u=function not(t){if(null==t)return 0;let n=0;return t.forEach(e=>n+=e.length),n}(o);this.state.numBytes+=u-c.bytes,c.bytes=u}return l}makeTensorFromDataId(e,i,s,r){return this.makeTensorFromTensorInfo({dataId:e,shape:i,dtype:s=s||"float32"},r)}makeTensorFromTensorInfo(e,i){const{dataId:s,shape:r,dtype:o}=e,a=new Ps(r,o,s,this.nextTensorId());return this.trackTensor(a,i),a}makeVariable(e,i=!0,s,r){s=s||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const o=new XO(e,i,s,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error(`Variable with name ${o.name} was already registered`);return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(e,i){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let s=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(s=e.size*$A(e.dtype)),this.state.numBytes+=s,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:i||this.backend,dtype:e.dtype,shape:e.shape,bytes:s})),e instanceof XO||this.track(e)}incRef(e,i){this.trackTensor(e,i),this.backend.incRef(e.dataId)}removeDataId(e,i){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===i&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const i=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=i.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const s=e.size*$A(e.dtype);this.state.numBytes-=s}i.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,i.backend)}disposeVariables(){for(const e in this.state.registeredVariables)this.disposeVariable(this.state.registeredVariables[e])}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}profile(e){var i=this;return de(function*(){i.state.profiling=!0;const s=i.state.numBytes,r=i.state.numTensors;i.state.activeProfile.kernels=[],i.state.activeProfile.result=yield e(),i.state.profiling=!1,i.state.activeProfile.peakBytes=Math.max(...i.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),i.state.activeProfile.newBytes=i.state.numBytes-s,i.state.activeProfile.newTensors=i.state.numTensors-r;for(const o of i.state.activeProfile.kernels)o.kernelTimeMs=yield o.kernelTimeMs,o.extraInfo=yield o.extraInfo;return i.state.activeProfile})()}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,i,s,r,o,a){const l={id:this.state.nextTapeNodeId++,kernelName:e,inputs:i,outputs:s,saved:o},c=Qhe(e);null!=c&&(r=c.gradFunc),null!=r&&(l.gradient=u=>(u=u.map((d,h)=>{if(null==d){const f=s[h],p=Aa(f.size,f.dtype);return this.makeTensor(p,f.shape,f.dtype)}return d}),r(u.length>1?u:u[0],o,a))),this.state.activeTape.push(l)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const i={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(i.name=e),this.state.scopeStack.push(i),this.state.activeScope=i}endScope(e){const i=Qp(e),s=new Set(i.map(o=>o.id));for(let o=0;o<this.state.activeScope.track.length;o++){const a=this.state.activeScope.track[o];!a.kept&&!s.has(a.id)&&a.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],i.forEach(o=>{!o.kept&&o.scopeId===r.id&&this.track(o)})}gradients(e,i,s,r=!1){if(le(i.length>0,()=>"gradients() received an empty list of xs."),null!=s&&"float32"!==s.dtype)throw new Error(`dy must have 'float32' dtype, but has '${s.dtype}'`);const o=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));le(o instanceof Ps,()=>"The result y returned by f() must be a tensor.");const a=function Tot(t,n,e){const i={},s={};for(let l=0;l<n.length;l++)i[n[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const d in u){const h=u[d];let f=!1;for(let p=0;p<n.length;p++)if(i[h.id]){c.outputs.forEach(g=>i[g.id]=!0),f=!0,s[c.id]=!0;break}if(f)break}}const r={};r[e.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(r[c.outputs[d].id]){for(const h in u)r[u[h].id]=!0,o[c.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const c=t[l];if(s[c.id]&&o[c.id]){const u={};for(const h in c.inputs){const f=c.inputs[h];i[f.id]&&(u[h]=f)}const d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,a.push(d)}}return a}(this.state.activeTape,i,o);if(!r&&0===a.length&&i.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const l={};l[o.id]=s??function Bot(t){const n=oV(at(t),"float32");return Pe.makeTensor(n,t,"float32")}(o.shape),function Iot(t,n,e,i){for(let s=n.length-1;s>=0;s--){const r=n[s],o=[];if(r.outputs.forEach(l=>{const c=t[l.id];o.push(null!=c?c:null)}),null==r.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${r.kernelName}.`);const a=r.gradient(o);for(const l in r.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const c=e(()=>a[l]());if("float32"!==c.dtype)throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=r.inputs[l];if(!Qi(c.shape,u.shape))throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(null==t[u.id])t[u.id]=c;else{const d=t[u.id];t[u.id]=i(d,c),d.dispose()}}}}(l,a,u=>this.tidy(u),Vot);const c=i.map(u=>l[u.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(u=>{for(const d of u.saved)d.dispose()}),this.state.activeTape=null),{value:o,grads:c}})}customGrad(e){return le(sV(e),()=>"The f passed in customGrad(f) must be a function."),(...i)=>{let s;le(i.every(l=>l instanceof Ps),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const r={};return i.forEach((l,c)=>{r[c]=l}),this.runKernelFunc({forwardFunc:(l,c)=>(s=e(...i,c),le(s.value instanceof Ps,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),le(sV(s.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),s.value),backwardsFunc:(l,c)=>{const u=s.gradFunc(l,c),d=Array.isArray(u)?u:[u];le(d.length===i.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),le(d.every(f=>f instanceof Ps),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const h={};return d.forEach((f,p)=>{h[p]=()=>f}),h},inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,i){return this.state.tensorInfo.get(e).backend.readToGPU(e,i)}time(e){var i=this;return de(function*(){const s=Oa(),r=yield i.backend.time(e);return r.wallMs=Oa()-s,r})()}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new pfe;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return t.nextTensorId=0,t.nextVariableId=0,t})();function mfe(){const t=Zhe();if(null==t._tfengine){const n=new rot(t);t._tfengine=new $ot(n)}return function cot(t){Yhe=t}(t._tfengine.ENV),function Aot(t){pd=t}(()=>t._tfengine),t._tfengine}const Pe=mfe();function Vot(t,n){return Pe.runKernel(c1,{a:t,b:n})}function _fe(t){if(t||function zot(){return typeof navigator<"u"&&null!=navigator}()){if(t||(t=navigator),"ReactNative"===t.product)return!0;const n=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");return n?/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4)):t.userAgentData&&t.userAgentData.mobile}return!1}function gfe(){return typeof window<"u"&&null!=window.document||typeof WorkerGlobalScope<"u"}const El=nt();function Jp(t,n){let e=t;if(Pc(t))return"string"===n?[]:[t.length];if(dfe(t))return[t.height,t.width*(t.channels||"RGBA").length];if(hfe(t))return[t.buffer.size/(null==n?4:$A(n))];if(!Array.isArray(t))return[];const i=[];for(;Array.isArray(e)||Pc(e)&&"string"!==n;)i.push(e.length),e=e[0];return Array.isArray(t)&&nt().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&bfe(t,i,[]),i}function bfe(t,n,e){if(e=e||[],!Array.isArray(t)&&!Pc(t))return void le(0===n.length,()=>`Element arr[${e.join("][")}] is a primitive, but should be an array/TypedArray of ${n[0]} elements`);le(n.length>0,()=>`Element arr[${e.join("][")}] should be a primitive, but is an array of ${t.length} elements`),le(t.length===n[0],()=>`Element arr[${e.join("][")}] should have ${n[0]} elements, but has ${t.length} elements`);const i=n.slice(1);for(let s=0;s<t.length;++s)bfe(t[s],i,e.concat(s))}function vfe(t,n,e,i){if("string_or_numeric"!==t){if(null==t)throw new Error("Expected dtype cannot be null.");if("numeric"!==t&&t!==n||"numeric"===t&&"string"===n)throw new Error(`Argument '${e}' passed to '${i}' must be ${t} tensor, but got ${n} tensor`)}}function fe(t,n,e,i="numeric"){if(t instanceof ht())return vfe(i,t.dtype,n,e),t;let s=a1(t);if("string"!==s&&["bool","int32","float32"].indexOf(i)>=0&&(s=i),vfe(i,s,n,e),null==t||!Pc(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error(`Argument '${n}' passed to '${e}' must be a Tensor or TensorLike, but got '${null==t?"null":t.constructor.name}'`);const r=Jp(t,s);!Pc(t)&&!Array.isArray(t)&&(t=[t]);const a="string"!==s?Dg(t,s):Mg(t,[],!0);return Pe.makeTensor(a,r,s)}function YO(t,n,e,i="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${n} passed to ${e} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((r,o)=>fe(r,`${n}[${o}]`,e,i))}El.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),El.registerFlag("IS_BROWSER",()=>gfe()),El.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"),El.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),El.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),El.registerFlag("PROD",()=>!1),El.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>El.getBool("DEBUG")),El.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),El.registerFlag("IS_TEST",()=>!1),El.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>El.getBool("DEBUG")),El.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),El.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),El.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);const yfe="__op";function Oe(t){const n=Object.keys(t);if(1!==n.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${n.length} keys.`);let e=n[0];const i=t[e];e.endsWith("_")&&(e=e.substring(0,e.length-1)),e+=yfe;const s=(...r)=>{Pe.startScope(e);try{const o=i(...r);return qp(o)&&console.error("Cannot return a Promise inside of tidy."),Pe.endScope(o),o}catch(o){throw Pe.endScope(null),o}};return Object.defineProperty(s,"name",{value:e,configurable:!0}),s}const em=Oe({complex_:function Uot(t,n){const e=fe(t,"real","complex"),i=fe(n,"imag","complex");return tc(e.shape,i.shape,`real and imag shapes, ${e.shape} and ${i.shape}, must match in call to tf.complex().`),Pe.runKernel(mV,{real:e,imag:i})}});function tm(t,n,e,i){if(null==i)i=a1(t);else if("complex64"===i)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(hfe(t)||dfe(t)){if("float32"!==i&&"int32"!==i)throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${i}.`);return Pe.backend.createTensorFromGPUData(t,n||e,i)}if(!Pc(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=n){Fc(n);const s=at(n),r=at(e);le(s===r,()=>`Based on the provided shape, [${n}], the tensor should have ${s} values but has ${r}`);for(let o=0;o<e.length;++o){const l=o!==e.length-1||e[o]!==at(n.slice(o));le(e[o]===n[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${e}) does not match the provided shape (${n}). `)}}return!Pc(t)&&!Array.isArray(t)&&(t=[t]),n=n||e,t="string"!==i?Dg(t,i):Mg(t,[],!0),Pe.makeTensor(t,n,i)}function $c(t,n,e){return tm(t,n,Jp(t,e),e)}const Ag={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class md{static join(n){return new md(n).slice()}constructor(n){if(this.shards=[],this.previousShardIndex=0,null==n||(n instanceof Array||(n=[n]),0===(n=n.map(i=>Pc(i)?i.buffer:i)).length))return;this.bufferUniformSize=n[0].byteLength;let e=0;for(let i=0;i<n.length;i++){const s=n[i];i!==n.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const r=e+s.byteLength;this.shards.push({buffer:s,start:e,end:r}),e=r}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(n=0,e=this.byteLength){if(0===this.shards.length)return new ArrayBuffer(0);if(n=isNaN(Number(n))?0:n,e=isNaN(Number(e))?0:e,n=Math.max(0,n),(e=Math.min(this.byteLength,e))<=n)return new ArrayBuffer(0);const i=this.findShardForByte(n);if(-1===i)throw new Error(`Could not find start shard for byte ${n}`);const r=new ArrayBuffer(e-n),o=new Uint8Array(r);let a=0;for(let l=i;l<this.shards.length;l++){const c=this.shards[l],d=n+a-c.start,h=a,p=Math.min(e,c.end)-c.start,g=new Uint8Array(c.buffer,d,p-d);if(o.set(g,h),a+=g.length,e<c.end)break}return r}findShardForByte(n){if(0===this.shards.length||n<0||n>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(n/this.bufferUniformSize),this.previousShardIndex;function e(s){return n<s.start?-1:n>=s.end?1:0}if(0===e(this.shards[this.previousShardIndex]))return this.previousShardIndex;const i=function Got(t,n){let e=0,i=t.length;for(;e<=i;){const s=Math.floor((i-e)/2)+e,r=n(t[s]);if(0===r)return s;r<0?i=s:e=s+1}return-1}(this.shards,e);return-1===i?-1:(this.previousShardIndex=i,this.previousShardIndex)}}function dh(){return Pe}function Tz(){return Pe.memory()}function et(t,n){return Pe.tidy(t,n)}function Ci(t){Qp(t).forEach(e=>e.dispose())}function Qo(t){return Pe.keep(t)}function wfe(t,n,e=1){return Pe.registerBackend(t,n,e)}function Sfe(){return Pe.backend}!function Not(t){ofe=t}(function jot(t){nt().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")});const nm=4;function Iz(t,n){return kz.apply(this,arguments)}function kz(){return kz=de(function*(t,n){const e=[],i=[],s=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<s.length;++o){const a=s[o],l=Array.isArray(t)?t[o].tensor:t[a];if("float32"!==l.dtype&&"int32"!==l.dtype&&"bool"!==l.dtype&&"string"!==l.dtype&&"complex64"!==l.dtype)throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const c={name:a,shape:l.shape,dtype:l.dtype};if("string"===l.dtype){const u=new Promise(function(){var d=de(function*(h){const f=yield l.bytes(),p=f.reduce((y,w)=>y+w.length,0)+nm*f.length,g=new Uint8Array(p);let v=0;for(let y=0;y<f.length;y++){const w=f[y],E=new Uint8Array(new Uint32Array([w.length]).buffer);g.set(E,v),v+=nm,g.set(w,v),v+=w.length}h(g)});return function(h){return d.apply(this,arguments)}}());i.push(u)}else i.push(l.data());null!=n&&(c.group=n),e.push(c)}return{data:Xot(yield Promise.all(i)),specs:e}}),kz.apply(this,arguments)}function Cfe(t,n){const e=new md(t),i={};let s=0;for(const r of n){const o=qot(r,(a,l)=>e.slice(s+a,s+l));i[r.name]=xfe(r,e.slice(s,s+o)),s+=o}return i}function qot(t,n){const e=at(t.shape);let i;if("quantization"in t)i=Ag[t.quantization.dtype];else{if("string"===t.dtype){let s=0;for(let r=0;r<e;r++)s+=nm+new Uint32Array(n(s,s+nm))[0];return s}i=Ag[t.dtype]}return e*i}function Kot(t,n){return Dz.apply(this,arguments)}function Dz(){return Dz=de(function*(t,n){const e=at(t.shape);let i;if("quantization"in t)i=Ag[t.quantization.dtype];else{if("string"===t.dtype){let s=0;for(let r=0;r<e;r++)s+=nm+new Uint32Array(yield n(s,s+nm))[0];return s}i=Ag[t.dtype]}return e*i}),Dz.apply(this,arguments)}function xfe(t,n){const e=t.name,i=t.dtype,s=t.shape,r=at(s);let o,a=0;if("quantization"in t){const l=t.quantization;if("uint8"===l.dtype||"uint16"===l.dtype){if(!("min"in l)||!("scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==l.dtype)throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==i)throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${i}.`)}const c=Ag[l.dtype],u="uint8"===l.dtype?new Uint8Array(n):new Uint16Array(n);if("float32"===i)if("uint8"===l.dtype||"uint16"===l.dtype){o=new Float32Array(u.length);for(let d=0;d<u.length;d++)o[d]=u[d]*l.scale+l.min}else{if("float16"!==l.dtype)throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);o=function tat(){const t=function Qot(){const t=e=>{let i=e<<13,s=0;for(;!(8388608&i);)s-=8388608,i<<=1;return i&=-8388609,s+=947912704,i|s},n=new Uint32Array(2048);n[0]=0;for(let e=1;e<1024;e++)n[e]=t(e);for(let e=1024;e<2048;e++)n[e]=939524096+(e-1024<<13);return n}(),n=function Jot(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let n=1;n<31;n++)t[n]=n<<23;for(let n=33;n<63;n++)t[n]=2147483648+(n-32<<23);return t}(),e=function eat(){const t=new Uint32Array(64);for(let n=0;n<64;n++)t[n]=1024;return t[0]=t[32]=0,t}();return i=>{const s=new ArrayBuffer(4*i.length),r=new Uint32Array(s);for(let o=0;o<i.length;o++){const a=i[o];r[o]=t[e[a>>10]+(1023&a)]+n[a>>10]}return new Float32Array(s)}}()(u)}else{if("int32"!==i)throw new Error(`Unsupported dtype in weight '${e}': ${i}`);if("uint8"!==l.dtype&&"uint16"!==l.dtype)throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);o=new Int32Array(u.length);for(let d=0;d<u.length;d++)o[d]=Math.round(u[d]*l.scale+l.min)}a+=r*c}else if("string"===i){const l=at(t.shape);o=[];for(let c=0;c<l;c++){const u=new Uint32Array(n.slice(a,a+nm))[0];a+=nm;const d=new Uint8Array(n.slice(a,a+u));o.push(d),a+=u}}else{const l=Ag[i];if("float32"===i)o=new Float32Array(n);else if("int32"===i)o=new Int32Array(n);else{if("bool"!==i){if("complex64"===i){o=new Float32Array(n);const c=new Float32Array(o.length/2),u=new Float32Array(o.length/2);for(let p=0;p<c.length;p++)c[p]=o[2*p],u[p]=o[2*p+1];const d=$c(c,s,"float32"),h=$c(u,s,"float32"),f=em(d,h);return d.dispose(),h.dispose(),f}throw new Error(`Unsupported dtype in weight '${e}': ${i}`)}o=new Uint8Array(n)}a+=r*l}return $c(o,s,i)}function Efe(t,n,e){return Mz.apply(this,arguments)}function Mz(){return Mz=de(function*(t,n,e){let i=new Uint8Array(n);for(;i.byteLength<e;){const{done:s,value:r}=yield t.read();if(s&&null==r)throw new Error(`Reader is done but ${e-i.byteLength} bytes are still expected`);const o=new Uint8Array(i.length+r.byteLength);o.set(i,0),o.set(new Uint8Array(r),i.length),i=o}return i.buffer}),Mz.apply(this,arguments)}function Tfe(t,n){return Az.apply(this,arguments)}function Az(){return Az=de(function*(t,n){const e={},i=t.getReader();let s=new ArrayBuffer(0);for(const r of n){const o=yield Kot(r,function(){var c=de(function*(u,d){return s=yield Efe(i,s,d),s.slice(u,d)});return function(u,d){return c.apply(this,arguments)}}());s=yield Efe(i,s,o);const a=s.slice(0,o);s=s.slice(o);const l=xfe(r,a);if(e[r.name]=l,"webgpu"===Pe.backendName){const c=Sfe();"uploadToGPU"in c&&at(l.shape)>=nt().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return e}),Az.apply(this,arguments)}function Xot(t){if(null===t)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let n=0;const e=[];t.forEach(r=>{if(n+=r.byteLength,e.push(r.byteLength===r.buffer.byteLength?r:new r.constructor(r)),!(r instanceof Float32Array||r instanceof Int32Array||r instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${r.constructor.name}`)});const i=new Uint8Array(n);let s=0;return e.forEach(r=>{i.set(new Uint8Array(r.buffer),s),s+=r.byteLength}),i.buffer}const Oz=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Ife(t){return Oz?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function kfe(t){return md.join(t)}function Dfe(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);const e=t.split("/");return e[e.length-1]}function Mfe(t,n){const e={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:n};return null!=t.signature&&(e.signature=t.signature),null!=t.userDefinedMetadata&&(e.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(e.modelInitializer=t.modelInitializer),null!=t.initializerSignature&&(e.initializerSignature=t.initializerSignature),null!=t.trainingConfig&&(e.trainingConfig=t.trainingConfig),e}function Afe(t,n,e){const i={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(null!=t.trainingConfig&&(i.trainingConfig=t.trainingConfig),null!=t.weightsManifest){if(!n)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!e)throw new Error("modelJSON has weightsManifest but weightData is null");i.weightSpecs=n,i.weightData=e}return null!=t.signature&&(i.signature=t.signature),null!=t.userDefinedMetadata&&(i.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(i.modelInitializer=t.modelInitializer),null!=t.initializerSignature&&(i.initializerSignature=t.initializerSignature),i}function Nz(t,n){return Rz.apply(this,arguments)}function Rz(){return Rz=de(function*(t,n){let e,i;return null!=t.weightsManifest&&([e,i]=yield n(t.weightsManifest)),Afe(t,e,i)}),Rz.apply(this,arguments)}function oE(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:Ife(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:Ife(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:new md(t.weightData).byteLength}}function Fz(t){const n=[];for(const e of t)n.push(...e.weights);return n}class Or{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==Or.instance&&(Or.instance=new Or),Or.instance}static registerSaveRouter(n){Or.getInstance().saveRouters.push(n)}static registerLoadRouter(n){Or.getInstance().loadRouters.push(n)}static getSaveHandlers(n){return Or.getHandlers(n,"save")}static getLoadHandlers(n,e){return Or.getHandlers(n,"load",e)}static getHandlers(n,e,i){const s=[];return("load"===e?Or.getInstance().loadRouters:Or.getInstance().saveRouters).forEach(o=>{const a=o(n,i);null!==a&&s.push(a)}),s}}const nat=t=>Or.registerSaveRouter(t),iat=t=>Or.registerLoadRouter(t),Ofe=t=>Or.getSaveHandlers(t),sat=(t,n)=>Or.getLoadHandlers(t,n),ZO="tensorflowjs",Og="models_store",im="model_info_store";function $z(){if(!nt().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,n=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==n)throw new Error("The current browser does not appear to support IndexedDB.");return n}function Bz(t){const n=t.result;n.createObjectStore(Og,{keyPath:"modelPath"}),n.createObjectStore(im,{keyPath:"modelPath"})}let f1=(()=>{class t{constructor(e){if(this.indexedDB=$z(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}save(e){var i=this;return de(function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return i.databaseAction(i.modelPath,e)})()}load(){var e=this;return de(function*(){return e.databaseAction(e.modelPath)})()}databaseAction(e,i){return new Promise((s,r)=>{const o=this.indexedDB.open(ZO,1);o.onupgradeneeded=()=>Bz(o),o.onsuccess=()=>{const a=o.result;if(null==i){const l=a.transaction(Og,"readonly"),u=l.objectStore(Og).get(this.modelPath);u.onsuccess=()=>{if(null==u.result)return a.close(),r(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));s(u.result.modelArtifacts)},u.onerror=d=>(a.close(),r(u.error)),l.oncomplete=()=>a.close()}else{i.weightData=md.join(i.weightData);const l=oE(i),c=a.transaction(im,"readwrite");let d,h,u=c.objectStore(im);try{d=u.put({modelPath:this.modelPath,modelArtifactsInfo:l})}catch(f){return r(f)}d.onsuccess=()=>{h=a.transaction(Og,"readwrite");const f=h.objectStore(Og);let p;try{p=f.put({modelPath:this.modelPath,modelArtifacts:i,modelArtifactsInfo:l})}catch(g){return r(g)}p.onsuccess=()=>s({modelArtifactsInfo:l}),p.onerror=g=>{u=c.objectStore(im);const v=u.delete(this.modelPath);v.onsuccess=()=>(a.close(),r(p.error)),v.onerror=y=>(a.close(),r(p.error))}},d.onerror=f=>(a.close(),r(d.error)),c.oncomplete=()=>{null==h?a.close():h.oncomplete=()=>a.close()}}},o.onerror=a=>r(o.error)})}}return t.URL_SCHEME="indexeddb://",t})();const Nfe=t=>nt().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(f1.URL_SCHEME)?function rat(t){return new f1(t)}(t.slice(f1.URL_SCHEME.length)):null;Or.registerSaveRouter(Nfe),Or.registerLoadRouter(Nfe);class aat{constructor(){this.indexedDB=$z()}listModels(){var n=this;return de(function*(){return new Promise((e,i)=>{const s=n.indexedDB.open(ZO,1);s.onupgradeneeded=()=>Bz(s),s.onsuccess=()=>{const r=s.result,o=r.transaction(im,"readonly"),l=o.objectStore(im).getAll();l.onsuccess=()=>{const c={};for(const u of l.result)c[u.modelPath]=u.modelArtifactsInfo;e(c)},l.onerror=c=>(r.close(),i(l.error)),o.oncomplete=()=>r.close()},s.onerror=r=>i(s.error)})})()}removeModel(n){var e=this;return de(function*(){return n=function oat(t){return t.startsWith(f1.URL_SCHEME)?t.slice(f1.URL_SCHEME.length):t}(n),new Promise((i,s)=>{const r=e.indexedDB.open(ZO,1);r.onupgradeneeded=()=>Bz(r),r.onsuccess=()=>{const o=r.result,a=o.transaction(im,"readwrite"),l=a.objectStore(im),c=l.get(n);let u;c.onsuccess=()=>{if(null==c.result)return o.close(),s(new Error(`Cannot find model with path '${n}' in IndexedDB.`));{const d=l.delete(n),h=()=>{u=o.transaction(Og,"readwrite");const p=u.objectStore(Og).delete(n);p.onsuccess=()=>i(c.result.modelArtifactsInfo),p.onerror=g=>s(c.error)};d.onsuccess=h,d.onerror=f=>(h(),o.close(),s(c.error))}},c.onerror=d=>(o.close(),s(c.error)),a.oncomplete=()=>{null==u?o.close():u.oncomplete=()=>o.close()}},r.onerror=o=>s(r.error)})})()}}const hh="/",Ng="tensorflowjs_models",Rfe="info",lat="model_topology",cat="weight_specs",uat="weight_data",dat="model_metadata";function Ffe(t){return{info:[Ng,t,Rfe].join(hh),topology:[Ng,t,lat].join(hh),weightSpecs:[Ng,t,cat].join(hh),weightData:[Ng,t,uat].join(hh),modelMetadata:[Ng,t,dat].join(hh)}}function Lfe(t){for(const n of Object.values(t))window.localStorage.removeItem(n)}function Pfe(t){const n=t.split(hh);if(n.length<3)throw new Error(`Invalid key format: ${t}`);return n.slice(1,n.length-1).join(hh)}let p1=(()=>{class t{constructor(e){if(!nt().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Ffe(this.modelPath)}save(e){var i=this;return de(function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const s=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=oE(e),a=md.join(e.weightData);try{return i.LS.setItem(i.keys.info,JSON.stringify(o)),i.LS.setItem(i.keys.topology,s),i.LS.setItem(i.keys.weightSpecs,r),i.LS.setItem(i.keys.weightData,function Yot(t){if(Oz)return Buffer.from(t).toString("base64");const n=new Uint8Array(t);let e="";for(let i=0,s=n.length;i<s;i++)e+=String.fromCharCode(n[i]);return btoa(e)}(a)),i.LS.setItem(i.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0})),{modelArtifactsInfo:o}}catch{throw Lfe(i.keys),new Error(`Failed to save model '${i.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}})()}load(){var e=this;return de(function*(){const i=JSON.parse(e.LS.getItem(e.keys.info));if(null==i)throw new Error(`In local storage, there is no model with name '${e.modelPath}'`);if("JSON"!==i.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const s={},r=JSON.parse(e.LS.getItem(e.keys.topology));if(null==r)throw new Error(`In local storage, the topology of model '${e.modelPath}' is missing.`);s.modelTopology=r;const o=JSON.parse(e.LS.getItem(e.keys.weightSpecs));if(null==o)throw new Error(`In local storage, the weight specs of model '${e.modelPath}' are missing.`);s.weightSpecs=o;const a=e.LS.getItem(e.keys.modelMetadata);if(null!=a){const c=JSON.parse(a);s.format=c.format,s.generatedBy=c.generatedBy,s.convertedBy=c.convertedBy,null!=c.signature&&(s.signature=c.signature),null!=c.userDefinedMetadata&&(s.userDefinedMetadata=c.userDefinedMetadata),null!=c.modelInitializer&&(s.modelInitializer=c.modelInitializer),null!=c.initializerSignature&&(s.initializerSignature=c.initializerSignature),null!=c.trainingConfig&&(s.trainingConfig=c.trainingConfig)}const l=e.LS.getItem(e.keys.weightData);if(null==l)throw new Error(`In local storage, the binary weight values of model '${e.modelPath}' are missing.`);return s.weightData=function Zot(t){if(Oz){const i=Buffer.from(t,"base64");return i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength)}const n=atob(t),e=new Uint8Array(n.length);for(let i=0;i<n.length;++i)e.set([n.charCodeAt(i)],i);return e.buffer}(l),s})()}}return t.URL_SCHEME="localstorage://",t})();const $fe=t=>nt().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(p1.URL_SCHEME)?function fat(t){return new p1(t)}(t.slice(p1.URL_SCHEME.length)):null;Or.registerSaveRouter($fe),Or.registerLoadRouter($fe);class pat{constructor(){le(nt().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),le(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){var n=this;return de(function*(){const e={},i=Ng+hh,s=hh+Rfe;for(let r=0;r<n.LS.length;++r){const o=n.LS.key(r);o.startsWith(i)&&o.endsWith(s)&&(e[Pfe(o)]=JSON.parse(n.LS.getItem(o)))}return e})()}removeModel(n){var e=this;return de(function*(){n=function hat(t){return t.startsWith(p1.URL_SCHEME)?t.slice(p1.URL_SCHEME.length):t}(n);const i=Ffe(n);if(null==e.LS.getItem(i.info))throw new Error(`Cannot find model at path '${n}'`);const s=JSON.parse(e.LS.getItem(i.info));return Lfe(i),s})()}}const m1="://";class Qa{constructor(){this.managers={}}static getInstance(){return null==Qa.instance&&(Qa.instance=new Qa),Qa.instance}static registerManager(n,e){le(null!=n,()=>"scheme must not be undefined or null."),n.endsWith(m1)&&(n=n.slice(0,n.indexOf(m1))),le(n.length>0,()=>"scheme must not be an empty string.");const i=Qa.getInstance();le(null==i.managers[n],()=>`A model store manager is already registered for scheme '${n}'.`),i.managers[n]=e}static getManager(n){const e=Qa.getInstance().managers[n];if(null==e)throw new Error(`Cannot find model manager for scheme '${n}'`);return e}static getSchemes(){return Object.keys(Qa.getInstance().managers)}}function QO(t){if(-1===t.indexOf(m1))throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Qa.getSchemes().join(",")}`);return{scheme:t.split(m1)[0],path:t.split(m1)[1]}}function Bfe(t,n){return Vz.apply(this,arguments)}function Vz(){return Vz=de(function*(t,n,e=!1){le(t!==n,()=>`Old path and new path are the same: '${t}'`);const i=Or.getLoadHandlers(t);le(i.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),le(i.length<2,()=>`Copying failed because more than one (${i.length}) load handlers for source URL ${t}.`);const s=i[0],r=Or.getSaveHandlers(n);le(r.length>0,()=>`Copying failed because no save handler is found for destination URL ${n}.`),le(r.length<2,()=>`Copying failed because more than one (${i.length}) save handlers for destination URL ${n}.`);const o=r[0],a=QO(t).scheme,l=QO(t).path,c=a===QO(t).scheme,u=yield s.load();e&&c&&(yield Qa.getManager(a).removeModel(l));const d=yield o.save(u);return e&&!c&&(yield Qa.getManager(a).removeModel(l)),d.modelArtifactsInfo}),Vz.apply(this,arguments)}function mat(){return zz.apply(this,arguments)}function zz(){return zz=de(function*(){const t=Qa.getSchemes(),n={};for(const e of t){const i=yield Qa.getManager(e).listModels();for(const s in i)n[e+m1+s]=i[s]}return n}),zz.apply(this,arguments)}function _at(t){return Uz.apply(this,arguments)}function Uz(){return Uz=de(function*(t){const n=QO(t);return Qa.getManager(n.scheme).removeModel(n.path)}),Uz.apply(this,arguments)}function gat(t,n){return Gz.apply(this,arguments)}function Gz(){return Gz=de(function*(t,n){return Bfe(t,n,!1)}),Gz.apply(this,arguments)}function bat(t,n){return jz.apply(this,arguments)}function jz(){return jz=de(function*(t,n){return Bfe(t,n,!0)}),jz.apply(this,arguments)}class vat{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(n,e){return fetch(n,e)}now(){return performance.now()}encode(n,e){if("utf-8"!==e&&"utf8"!==e)throw new Error(`Browser's encoder only supports utf-8, but got ${e}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(n)}decode(n,e){return new TextDecoder(e).decode(n)}setTimeoutCustom(n,e){typeof window>"u"||!nt().getBool("USE_SETTIMEOUTCUSTOM")?setTimeout(n,e):(this.functionRefs.push(n),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},e),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",i=>{i.source===window&&i.data.name===this.messageName&&(i.stopPropagation(),(0,this.functionRefs[i.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0))},!0)))}isTypedArray(n){return Jhe(n)}}if(nt().get("IS_BROWSER")){nt().setPlatform("browser",new vat);try{Qa.registerManager(p1.URL_SCHEME,new pat)}catch{}try{Qa.registerManager(f1.URL_SCHEME,new aat)}catch{}}let _1;function xi(t,n="float32",e){return n=n||"float32",Fc(t),new Mo(t,n,e)}nt().get("IS_NODE")&&!nt().get("IS_BROWSER")&&nt().setPlatform("node",new class wat{constructor(){this.util=Y(590),this.textEncoder=new this.util.TextEncoder}fetch(n,e){return null!=nt().global.fetch?nt().global.fetch(n,e):(null==_1&&(_1=Y(817)),_1(n,e))}now(){const n=process.hrtime();return 1e3*n[0]+n[1]/1e6}encode(n,e){if("utf-8"!==e&&"utf8"!==e)throw new Error(`Node built-in encoder only supports utf-8, but got ${e}`);return this.textEncoder.encode(n)}decode(n,e){return 0===n.length?"":new this.util.TextDecoder(e).decode(n)}isTypedArray(n){return this.util.types.isFloat32Array(n)||this.util.types.isInt32Array(n)||this.util.types.isUint8Array(n)||this.util.types.isUint8ClampedArray(n)}});const Ht=Oe({cast_:function Sat(t,n){const e=fe(t,"x","cast");if(!function tot(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}(n))throw new Error(`Failed to cast to unknown dtype ${n}`);if("string"===n&&"string"!==e.dtype||"string"!==n&&"string"===e.dtype)throw new Error("Only strings can be casted to strings");return Pe.runKernel(px,{x:e},{dtype:n})}}),xf=Oe({clone_:function Cat(t){const e={x:fe(t,"x","clone","string_or_numeric")};return Pe.runKernel(Ix,e)}});function Vfe(t,n=!1){console.log(t.toString(n))}mfe(),function Oot(t){h1=t}({buffer:xi,cast:Ht,clone:xf,print:Vfe});const kt=Oe({add_:function xat(t,n){let e=fe(t,"a","add"),i=fe(n,"b","add");return[e,i]=Ur(e,i),Pe.runKernel(c1,{a:e,b:i})}}),Hz=Oe({floorDiv_:function Eat(t,n){let e=fe(t,"a","floorDiv"),i=fe(n,"b","floorDiv");return[e,i]=Ur(e,i),Pe.runKernel(Ex,{a:e,b:i})}}),vn=Oe({div_:function Tat(t,n){let e=fe(t,"a","div"),i=fe(n,"b","div");return[e,i]=Ur(e,i),"int32"===e.dtype&&"int32"===i.dtype?Hz(e,i):Pe.runKernel(vx,{a:e,b:i},{})}}),Be=Oe({mul_:function Iat(t,n){let e=fe(t,"a","mul"),i=fe(n,"b","mul");return[e,i]=Ur(e,i),Pe.runKernel(Lx,{a:e,b:i})}}),ba=Oe({sqrt_:function kat(t){const e={x:fe(t,"x","sqrt","float32")};return Pe.runKernel(Xx,e)}}),tr=Oe({square_:function Dat(t){const n=fe(t,"x","square");return Pe.runKernel("Square",{x:n},{})}}),ns=Oe({zerosLike_:function Mat(t){const e={x:fe(t,"x","zerosLike")};return Pe.runKernel(zO,e)}});function Ef(t){return Pe.customGrad(t)}function En(t,n){if((Pc(t)&&"string"!==n||Array.isArray(t))&&"complex64"!==n)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===n&&Pc(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return tm(t,[],[],n)}const Oat=new Map,Wz=new Map;class g1{getClassName(){return this.constructor.className}static fromConfig(n,e){return new n(e)}}class _u{constructor(){this.classNameMap={}}static getMap(){return null==_u.instance&&(_u.instance=new _u),_u.instance}static register(n){_u.getMap().classNameMap[n.className]=[n,n.fromConfig]}}function At(t,n,e){le(null!=t.className,()=>"Class being registered does not have the static className property defined."),le("string"==typeof t.className,()=>"className is required to be a string, but got type "+typeof t.className),le(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof n>"u"&&(n="Custom"),typeof e>"u"&&(e=t.className);const s=n+">"+e;return _u.register(t),Oat.set(s,t),Wz.set(t,s),t}class sm extends g1{minimize(n,e=!1,i){const{value:s,grads:r}=this.computeGradients(n,i);if(null!=i){const o=i.map(a=>({name:a.name,tensor:r[a.name]}));this.applyGradients(o)}else this.applyGradients(r);return Ci(r),e?s:(s.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(n,e){return function Aat(t,n){le(sV(t),()=>"The f passed in variableGrads(f) must be a function"),le(null==n||Array.isArray(n)&&n.every(c=>c instanceof XO),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const e=null!=n;if(!e){n=[];for(const c in Pe.registeredVariables)n.push(Pe.registeredVariables[c])}const i=e?n.filter(c=>!c.trainable):null,s=n.length;le((n=n.filter(c=>c.trainable)).length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const{value:o,grads:a}=Pe.gradients(t,n,null,!0);le(a.some(c=>null!=c),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),le(0===o.rank,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return n.forEach((c,u)=>{null!=a[u]&&(l[c.name]=a[u])}),i?.forEach(c=>l[c.name]=null),{value:o,grads:l}}(n,e)}dispose(){null!=this.iterations_&&Ci(this.iterations_)}saveIterations(){var n=this;return de(function*(){return null==n.iterations_&&(n.iterations_=0),{name:"iter",tensor:En(n.iterations_,"int32")}})()}getWeights(){return de(function*(){throw new Error("getWeights() is not implemented for this optimizer yet.")})()}setWeights(n){var e=this;return de(function*(){throw new Error(`setWeights() is not implemented for this optimizer class ${e.getClassName()}`)})()}extractIterations(n){var e=this;return de(function*(){return e.iterations_=(yield n[0].tensor.data())[0],n.slice(1)})()}}Object.defineProperty(sm,Symbol.hasInstance,{value:t=>null!=t.minimize&&null!=t.computeGradients&&null!=t.applyGradients});class zfe extends sm{static get className(){return"Adadelta"}constructor(n,e,i=null){super(),this.learningRate=n,this.rho=e,this.epsilon=i,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==i&&(this.epsilon=Pe.backend.epsilon())}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,s)=>{const r=Pe.registeredVariables[i],o=!1;null==this.accumulatedGrads[s]&&(this.accumulatedGrads[s]={originalName:`${i}/accum_grad`,variable:et(()=>ns(r).variable(o))}),null==this.accumulatedUpdates[s]&&(this.accumulatedUpdates[s]={originalName:`${i}/accum_var`,variable:et(()=>ns(r).variable(o))});const a=Array.isArray(n)?n[s].tensor:n[i];if(null==a)return;const l=this.accumulatedGrads[s].variable,c=this.accumulatedUpdates[s].variable;et(()=>{const u=kt(Be(l,this.rho),Be(tr(a),1-this.rho)),d=Be(vn(ba(kt(c,this.epsilon)),ba(kt(l,this.epsilon))),a),h=kt(Be(c,this.rho),Be(tr(d),1-this.rho));l.assign(u),c.assign(h);const f=kt(Be(d,-this.learningRate),r);r.assign(f)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(Ci(this.accumulatedGrads.map(n=>n.variable)),Ci(this.accumulatedUpdates.map(n=>n.variable)))}getWeights(){var n=this;return de(function*(){const e=[...n.accumulatedGrads,...n.accumulatedUpdates];return[yield n.saveIterations()].concat(e.map(i=>({name:i.originalName,tensor:i.variable})))})()}setWeights(n){var e=this;return de(function*(){const i=(n=yield e.extractIterations(n)).length/2,s=!1;e.accumulatedGrads=n.slice(0,i).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),e.accumulatedUpdates=n.slice(i,2*i).map(r=>({originalName:r.name,variable:r.tensor.variable(s)}))})()}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(n,e){return new n(e.learningRate,e.rho,e.epsilon)}}function b1(t,n,e){return Fc(t),e=e||a1(n),Pe.runKernel(OV,{},{shape:t,value:n,dtype:e})}class Ufe extends sm{static get className(){return"Adagrad"}constructor(n,e=.1){super(),this.learningRate=n,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,s)=>{const r=Pe.registeredVariables[i];null==this.accumulatedGrads[s]&&(this.accumulatedGrads[s]={originalName:`${i}/accumulator`,variable:et(()=>b1(r.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(n)?n[s].tensor:n[i];if(null==o)return;const a=this.accumulatedGrads[s].variable;et(()=>{const l=kt(a,tr(o));a.assign(l);const c=kt(Be(vn(o,ba(kt(l,Pe.backend.epsilon()))),-this.learningRate),r);r.assign(c)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&Ci(this.accumulatedGrads.map(n=>n.variable))}getWeights(){var n=this;return de(function*(){return[yield n.saveIterations()].concat(n.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))})()}setWeights(n){var e=this;return de(function*(){n=yield e.extractIterations(n),e.accumulatedGrads=n.map(s=>({originalName:s.name,variable:s.tensor.variable(!1)}))})()}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(n,e){return new n(e.learningRate,e.initialAccumulatorValue)}}const Tf=Oe({pow_:function Nat(t,n){let e=fe(t,"base","pow"),i=fe(n,"exp","pow");return[e,i]=Ur(e,i),Pe.runKernel(Px,{a:e,b:i})}}),tn=Oe({sub_:function Rat(t,n){let e=fe(t,"a","sub"),i=fe(n,"b","sub");return[e,i]=Ur(e,i),Pe.runKernel(Zx,{a:e,b:i})}});class Gfe extends sm{static get className(){return"Adam"}constructor(n,e,i,s=null){super(),this.learningRate=n,this.beta1=e,this.beta2=i,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],et(()=>{this.accBeta1=En(e).variable(),this.accBeta2=En(i).variable()}),null==s&&(this.epsilon=Pe.backend.epsilon())}applyGradients(n){const e=Array.isArray(n)?n.map(i=>i.name):Object.keys(n);et(()=>{const i=tn(1,this.accBeta1),s=tn(1,this.accBeta2);e.forEach((r,o)=>{const a=Pe.registeredVariables[r],l=!1;null==this.accumulatedFirstMoment[o]&&(this.accumulatedFirstMoment[o]={originalName:`${r}/m`,variable:et(()=>ns(a).variable(l))}),null==this.accumulatedSecondMoment[o]&&(this.accumulatedSecondMoment[o]={originalName:`${r}/v`,variable:et(()=>ns(a).variable(l))});const c=Array.isArray(n)?n[o].tensor:n[r];if(null==c)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,h=kt(Be(u,this.beta1),Be(c,1-this.beta1)),f=kt(Be(d,this.beta2),Be(tr(c),1-this.beta2)),p=vn(h,i),g=vn(f,s);u.assign(h),d.assign(f);const v=kt(Be(vn(p,kt(ba(g),this.epsilon)),-this.learningRate),a);a.assign(v)}),this.accBeta1.assign(Be(this.accBeta1,this.beta1)),this.accBeta2.assign(Be(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Ci(this.accumulatedFirstMoment.map(n=>n.variable)),null!=this.accumulatedSecondMoment&&Ci(this.accumulatedSecondMoment.map(n=>n.variable))}getWeights(){var n=this;return de(function*(){const e=[...n.accumulatedFirstMoment,...n.accumulatedSecondMoment];return[yield n.saveIterations()].concat(e.map(i=>({name:i.originalName,tensor:i.variable})))})()}setWeights(n){var e=this;return de(function*(){n=yield e.extractIterations(n),et(()=>{e.accBeta1.assign(Tf(e.beta1,e.iterations_+1)),e.accBeta2.assign(Tf(e.beta2,e.iterations_+1))});const i=n.length/2,s=!1;e.accumulatedFirstMoment=n.slice(0,i).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),e.accumulatedSecondMoment=n.slice(i,2*i).map(r=>({originalName:r.name,variable:r.tensor.variable(s)}))})()}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(n,e){return new n(e.learningRate,e.beta1,e.beta2,e.epsilon)}}const Ao=Oe({abs_:function Fat(t){const n=fe(t,"x","abs");return Pe.runKernel("complex64"===n.dtype?KA:BA,{x:n})}});function v1(t,n){const e=t.length,i=[];for(let s=0;s<e;s++){const r=e-1-s;(n[n.length-1-s]||1)>1&&1===(t[r]||1)&&i.unshift(r)}return i}function Oo(t,n){const e=[];for(let i=0;i<n.length;i++){const s=t[t.length-i-1],r=n.length-i-1;(null==s||1===s&&n[r]>1)&&e.unshift(r)}return e}function fi(t,n){const e=Math.max(t.length,n.length),i=new Array(e);for(let s=0;s<e;s++){let r=t[t.length-s-1];null==r&&(r=1);let o=n[n.length-s-1];if(null==o&&(o=1),1===r)i[e-s-1]=o;else if(1===o)i[e-s-1]=r;else{if(r!==o)throw Error(`Operands could not be broadcast together with shapes ${t} and ${n}.`);i[e-s-1]=r}}return i}const If=Oe({maximum_:function Lat(t,n){let e=fe(t,"a","maximum"),i=fe(n,"b","maximum");return[e,i]=Ur(e,i),"bool"===e.dtype&&(e=Ht(e,"int32"),i=Ht(i,"int32")),fi(e.shape,i.shape),Pe.runKernel(Nx,{a:e,b:i})}});class jfe extends sm{static get className(){return"Adamax"}constructor(n,e,i,s=null,r=0){super(),this.learningRate=n,this.beta1=e,this.beta2=i,this.epsilon=s,this.decay=r,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],et(()=>{this.iteration=En(0).variable(),this.accBeta1=En(e).variable()}),null==s&&(this.epsilon=Pe.backend.epsilon())}applyGradients(n){const e=Array.isArray(n)?n.map(i=>i.name):Object.keys(n);et(()=>{const i=tn(1,this.accBeta1),s=vn(-this.learningRate,kt(Be(this.iteration,this.decay),1));e.forEach((r,o)=>{const a=Pe.registeredVariables[r],l=!1;null==this.accumulatedFirstMoment[o]&&(this.accumulatedFirstMoment[o]={originalName:`${r}/m`,variable:ns(a).variable(l)}),null==this.accumulatedWeightedInfNorm[o]&&(this.accumulatedWeightedInfNorm[o]={originalName:`${r}/v`,variable:ns(a).variable(l)});const c=Array.isArray(n)?n[o].tensor:n[r];if(null==c)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,h=kt(Be(u,this.beta1),Be(c,1-this.beta1)),f=Be(d,this.beta2),p=Ao(c),g=If(f,p);u.assign(h),d.assign(g);const v=kt(Be(vn(s,i),vn(h,kt(g,this.epsilon))),a);a.assign(v)}),this.iteration.assign(kt(this.iteration,1)),this.accBeta1.assign(Be(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Ci(this.accumulatedFirstMoment.map(n=>n.variable)),null!=this.accumulatedWeightedInfNorm&&Ci(this.accumulatedWeightedInfNorm.map(n=>n.variable))}getWeights(){return de(function*(){throw new Error("getWeights() is not implemented for Adamax yet.")})()}setWeights(n){return de(function*(){throw new Error("setWeights() is not implemented for Adamax yet.")})()}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(n,e){return new n(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)}}class qz extends sm{static get className(){return"SGD"}constructor(n){super(),this.learningRate=n,this.setLearningRate(n)}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,s)=>{const r=Array.isArray(n)?n[s].tensor:n[i];if(null==r)return;const o=Pe.registeredVariables[i];et(()=>{const a=kt(Be(this.c,r),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(n){this.learningRate=n,null!=this.c&&this.c.dispose(),this.c=Qo(En(-n))}dispose(){this.c.dispose()}getWeights(){var n=this;return de(function*(){return[yield n.saveIterations()]})()}setWeights(n){var e=this;return de(function*(){if(0!==(n=yield e.extractIterations(n)).length)throw new Error("SGD optimizer does not have settable weights.")})()}getConfig(){return{learningRate:this.learningRate}}static fromConfig(n,e){return new n(e.learningRate)}}class Hfe extends qz{static get className(){return"Momentum"}constructor(n,e,i=!1){super(n),this.learningRate=n,this.momentum=e,this.useNesterov=i,this.accumulations=[],this.m=En(this.momentum)}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,s)=>{const r=Pe.registeredVariables[i];null==this.accumulations[s]&&(this.accumulations[s]={originalName:`${i}/momentum`,variable:et(()=>ns(r).variable(!1))});const o=this.accumulations[s].variable,a=Array.isArray(n)?n[s].tensor:n[i];null!=a&&et(()=>{let l;const c=kt(Be(this.m,o),a);l=kt(Be(this.c,this.useNesterov?kt(a,Be(c,this.m)):c),r),o.assign(c),r.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&Ci(this.accumulations.map(n=>n.variable))}setMomentum(n){this.momentum=n}getWeights(){var n=this;return de(function*(){return[yield n.saveIterations()].concat(n.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))})()}setWeights(n){var e=this;return de(function*(){n=yield e.extractIterations(n),e.accumulations=n.map(s=>({originalName:s.name,variable:s.tensor.variable(!1)}))})()}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(n,e){return new n(e.learningRate,e.momentum,e.useNesterov)}}class Wfe extends sm{static get className(){return"RMSProp"}constructor(n,e=.9,i=0,s=null,r=!1){if(super(),this.learningRate=n,this.decay=e,this.momentum=i,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,null==s&&(this.epsilon=Pe.backend.epsilon()),null==n)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,s)=>{const r=Pe.registeredVariables[i],o=!1;null==this.accumulatedMeanSquares[s]&&(this.accumulatedMeanSquares[s]={originalName:`${i}/rms`,variable:et(()=>ns(r).variable(o))}),null==this.accumulatedMoments[s]&&(this.accumulatedMoments[s]={originalName:`${i}/momentum`,variable:et(()=>ns(r).variable(o))}),null==this.accumulatedMeanGrads[s]&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${i}/mg`,variable:et(()=>ns(r).variable(o))});const a=Array.isArray(n)?n[s].tensor:n[i];if(null==a)return;const l=this.accumulatedMeanSquares[s].variable,c=this.accumulatedMoments[s].variable;et(()=>{const u=kt(Be(l,this.decay),Be(tr(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[s].variable,h=kt(Be(d,this.decay),Be(a,1-this.decay)),f=vn(Be(a,this.learningRate),ba(tn(u,kt(tr(h),this.epsilon)))),p=kt(Be(c,this.momentum),f);l.assign(u),d.assign(h),c.assign(p);const g=tn(r,p);r.assign(g)}else{const d=kt(Be(l,this.decay),Be(tr(a),1-this.decay)),h=kt(Be(c,this.momentum),vn(Be(a,this.learningRate),ba(kt(d,this.epsilon))));l.assign(d),c.assign(h);const f=tn(r,h);r.assign(f)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&Ci(this.accumulatedMeanSquares.map(n=>n.variable)),null!=this.accumulatedMeanGrads&&this.centered&&Ci(this.accumulatedMeanGrads.map(n=>n.variable)),null!=this.accumulatedMoments&&Ci(this.accumulatedMoments.map(n=>n.variable))}getWeights(){var n=this;return de(function*(){const e=[...n.accumulatedMeanSquares,...n.accumulatedMoments];return n.centered&&e.push(...n.accumulatedMeanGrads),[yield n.saveIterations()].concat(e.map(i=>({name:i.originalName,tensor:i.variable})))})()}setWeights(n){var e=this;return de(function*(){n=yield e.extractIterations(n);const i=e.centered?n.length/3:n.length/2,s=!1;e.accumulatedMeanSquares=n.slice(0,i).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),e.accumulatedMoments=n.slice(i,2*i).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),e.centered&&(e.accumulatedMeanGrads=n.slice(2*i,3*i).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})))})()}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(n,e){return new n(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)}}const Pat=[zfe,Ufe,Gfe,jfe,Hfe,Wfe,qz];function qfe(t){return new Promise(n=>setTimeout(n)).then(t)}let Kz=(()=>{class t{constructor(e){if(!nt().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),(null==e||0===e.length)&&(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}save(e){var i=this;return de(function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const s=md.join(e.weightData),r=window.URL.createObjectURL(new Blob([s],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const a=Mfe(e,[{paths:["./"+i.weightDataFileName],weights:e.weightSpecs}]),l=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),c=null==i.modelJsonAnchor?document.createElement("a"):i.modelJsonAnchor;if(c.download=i.modelJsonFileName,c.href=l,yield qfe(()=>c.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){const u=null==i.weightDataAnchor?document.createElement("a"):i.weightDataAnchor;u.download=i.weightDataFileName,u.href=r,yield qfe(()=>u.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:oE(e)}}})()}}return t.URL_SCHEME="downloads://",t})();class Uat{constructor(n){if(null==n||n.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${n}`);this.jsonFile=n[0],this.weightsFiles=n.slice(1)}load(){var n=this;return de(function*(){return new Promise((e,i)=>{const s=new FileReader;s.onload=r=>{const o=JSON.parse(r.target.result),a=o.modelTopology;if(null==a)return void i(new Error(`modelTopology field is missing from file ${n.jsonFile.name}`));if(null==o.weightsManifest)return void i(new Error(`weightManifest field is missing from file ${n.jsonFile.name}`));if(0===n.weightsFiles.length)return void e({modelTopology:a});const c=Nz(o,u=>n.loadWeights(u));e(c)},s.onerror=r=>i(`Failed to read model topology and weights manifest JSON from file '${n.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),s.readAsText(n.jsonFile)})})()}loadWeights(n){const e=[],i=[];for(const o of n)e.push(...o.weights),i.push(...o.paths);const s=this.checkManifestAndWeightFiles(n),r=i.map(o=>this.loadWeightsFile(o,s[o]));return Promise.all(r).then(o=>[e,o])}loadWeightsFile(n,e){return new Promise((i,s)=>{const r=new FileReader;r.onload=o=>{i(o.target.result)},r.onerror=o=>s(`Failed to weights data from file of path '${n}'.`),r.readAsArrayBuffer(e)})}checkManifestAndWeightFiles(n){const e=[],i=this.weightsFiles.map(r=>Dfe(r.name)),s={};for(const r of n)r.paths.forEach(o=>{const a=Dfe(o);if(-1!==e.indexOf(a))throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(e.push(a),-1===i.indexOf(a))throw new Error(`Weight file with basename '${a}' is not provided.`);s[o]=this.weightsFiles[i.indexOf(a)]});if(e.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${e.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}function Hat(t){return new Uat(t)}function Kfe(t,n,e,i){(function o(l){le(null!=l&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")})(t),function a(l,c){le(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),le(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),le(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}(e=e??0,i=i??1);let s=0;return Promise.all(t.map(l=>(l.then(c=>{const u=e+ ++s/t.length*(i-e);return n(u),c}),l)))}function Xfe(t,n){return Xz.apply(this,arguments)}function Xz(){return Xz=de(function*(t,n){null==n&&(n={});const e=null==n.fetchFunc?nt().platform.fetch:n.fetchFunc,i=t.map(d=>e(d,n.requestInit,{isBinary:!0})),a=(null==n.onProgress?yield Promise.all(i):yield Kfe(i,n.onProgress,0,.5)).map(d=>d.arrayBuffer());return null==n.onProgress?yield Promise.all(a):yield Kfe(a,n.onProgress,.5,1)}),Xz.apply(this,arguments)}function qat(t){return Yz.apply(this,arguments)}function Yz(){return Yz=de(function*(t,n="",e,i){return Yfe(o=>Xfe(o,{requestInit:i}))(t,n,e)}),Yz.apply(this,arguments)}function Yfe(t){return function(){var n=de(function*(e,i="",s){const r=e.map(()=>!1),o={},a=null!=s?s.map(()=>!1):[],l=[];if(e.forEach((p,g)=>{let v=0;p.weights.forEach(y=>{const E=Ag["quantization"in y?y.quantization.dtype:y.dtype]*at(y.shape),T=()=>{r[g]=!0,null==o[g]&&(o[g]=[]),o[g].push({manifestEntry:y,groupOffset:v,sizeBytes:E})};null!=s?s.forEach((L,W)=>{L===y.name&&(T(),a[W]=!0)}):T(),l.push(y.name),v+=E})}),!a.every(p=>p)){const p=s.filter((g,v)=>!a[v]);throw new Error(`Could not find weights in manifest with names: ${p.join(", ")}. \nManifest JSON has weights with names: ${l.join(", ")}.`)}const c=r.reduce((p,g,v)=>(g&&p.push(v),p),[]),u=[];c.forEach(p=>{e[p].paths.forEach(g=>{const v=i+(i.endsWith("/")?"":"/")+g;u.push(v)})});const d=yield t(u),h={};let f=0;return c.forEach(p=>{const g=e[p].paths.length,v=new md(d.slice(f,f+g));o[p].forEach(w=>{const T=Cfe(v.slice(w.groupOffset,w.groupOffset+w.sizeBytes),[w.manifestEntry]);for(const L in T)h[L]=T[L]}),f+=g}),h});return function(e){return n.apply(this,arguments)}}()}Or.registerSaveRouter(t=>nt().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Kz.URL_SCHEME)?function jat(t="model"){return new Kz(t)}(t.slice(Kz.URL_SCHEME.length)):null);let Zfe=(()=>{class t{constructor(e,i){if(this.DEFAULT_METHOD="POST",null==i&&(i={}),this.weightPathPrefix=i.weightPathPrefix,this.weightUrlConverter=i.weightUrlConverter,null!=i.fetchFunc?(le("function"==typeof i.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=i.fetchFunc):this.fetch=nt().platform.fetch,le(null!=e&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&le(2===e.length,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,null!=i.requestInit&&null!=i.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=i.requestInit||{},this.loadOptions=i}save(e){var i=this;return de(function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const s=Object.assign({method:i.DEFAULT_METHOD},i.requestInit);s.body=new FormData;const o=Mfe(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(s.body.append("model.json",new Blob([JSON.stringify(o)],{type:"application/json"}),"model.json"),null!=e.weightData){const l=md.join(e.weightData);s.body.append("model.weights.bin",new Blob([l],{type:"application/octet-stream"}),"model.weights.bin")}const a=yield i.fetch(i.path,s);if(a.ok)return{modelArtifactsInfo:oE(e),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)})()}loadModelJSON(){var e=this;return de(function*(){const i=yield e.fetch(e.path,e.requestInit);if(!i.ok)throw new Error(`Request to ${e.path} failed with status code ${i.status}. Please verify this URL points to the model JSON of the model to load.`);let s;try{s=yield i.json()}catch{let l=`Failed to parse model JSON of response from ${e.path}.`;throw e.path.endsWith(".pb")?l+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":l+=" Please make sure the server is serving valid JSON for this request.",new Error(l)}if(null==s.modelTopology&&null==s.weightsManifest)throw new Error(`The JSON from HTTP path ${e.path} contains neither model topology or manifest for weights.`);return s})()}load(){var e=this;return de(function*(){return e.loadOptions.streamWeights?e.loadStream():Nz(yield e.loadModelJSON(),s=>e.loadWeights(s))})()}loadStream(){var e=this;return de(function*(){const i=yield e.loadModelJSON(),s=yield e.getWeightUrls(i.weightsManifest),r=Fz(i.weightsManifest);return Object.assign(Object.assign({},i),{weightSpecs:r,getWeightStream:()=>function Wat(t,n){var e;const i=null==n.fetchFunc?nt().platform.fetch:n.fetchFunc;let r,s=0;return null===(e=n.onProgress)||void 0===e||e.call(n,0),new ReadableStream({pull:(o=de(function*(a){for(var l;s<t.length;){r||(r=(yield i(t[s],n.requestInit,{isBinary:!0})).body.getReader());const{done:c,value:u}=yield r.read();if(!c)return void a.enqueue(u);s++,r=void 0,null===(l=n.onProgress)||void 0===l||l.call(n,s/t.length)}a.close()}),function(l){return o.apply(this,arguments)})});var o}(s,e.loadOptions)})})()}getWeightUrls(e){var i=this;return de(function*(){const s=Array.isArray(i.path)?i.path[1]:i.path,[r,o]=function Yat(t){const n=t.lastIndexOf("/"),e=t.lastIndexOf("?");return[t.substring(0,n)+"/",e>n?t.substring(e):""]}(s),a=i.weightPathPrefix||r,l=[],c=[];for(const u of e)for(const d of u.paths)null!=i.weightUrlConverter?c.push(i.weightUrlConverter(d)):l.push(a+d+o);return i.weightUrlConverter&&l.push(...yield Promise.all(c)),l})()}loadWeights(e){var i=this;return de(function*(){const s=yield i.getWeightUrls(e);return[Fz(e),yield Xfe(s,i.loadOptions)]})()}}return t.URL_SCHEME_REGEX=/^https?:\/\//,t})();function Zz(t){return null!=t.match(Zfe.URL_SCHEME_REGEX)}const Qfe=(t,n)=>{if(typeof fetch>"u"&&(null==n||null==n.fetchFunc))return null;{let e=!0;if(e=Array.isArray(t)?t.every(i=>Zz(i)):Zz(t),e)return Qz(t,n)}return null};function Qz(t,n){return new Zfe(t,n)}function Zat(t,n){return Qz(t,n)}Or.registerSaveRouter(Qfe),Or.registerLoadRouter(Qfe);class Jz{constructor(n){this.modelArtifacts=n}load(){return this.modelArtifacts}}class Jfe{constructor(n){this.saveHandler=n}save(n){return this.saveHandler(n)}}class Qat{constructor(n){n.load&&(this.load=()=>Promise.resolve(n.load())),n.save&&(this.save=e=>Promise.resolve(n.save(e)))}}function Jat(t,n,e,i){return new Qat(epe(...arguments))}function epe(t,n,e,i){return 1===arguments.length?null!=t.modelTopology||null!=t.weightSpecs?new Jz(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Jz({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Jz({modelTopology:t,weightSpecs:n,weightData:e,trainingConfig:i}))}function elt(t){return new Jfe(t)}function tlt(t){return new Jfe(t)}function tpe(t,n,e){if(s1(t),null!=n&&3!==n.length)throw new Error("tensor3d() requires shape to have three numbers");const i=Jp(t,e);if(3!==i.length&&1!==i.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===i.length&&null==n)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return tm(t,n,i,e)}let Rg;const rpe=Oe({fromPixels_:function ipe(t,n=3){if(n>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let e=!1,i=!1,s=!1,r=!1,o=!1,a=!1;if(t.data instanceof Uint8Array)e=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)i=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)r=!0;else if(null!=t.getContext)o=!0;else{if(!(typeof ImageBitmap<"u"&&t instanceof ImageBitmap))throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);a=!0}if(null!=HO(mz,Pe.backendName))return Pe.runKernel(mz,{pixels:t},{numChannels:n});const[c,u]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let d,h;if(o)d=t.getContext("2d").getImageData(0,0,c,u).data;else if(i||e)d=t.data;else if(r||s||a){if(null==Rg)if(typeof document>"u"){if(!(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u"))throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");Rg=new OffscreenCanvas(1,1).getContext("2d")}else Rg=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Rg.canvas.width=c,Rg.canvas.height=u,Rg.drawImage(t,0,0,c,u),d=Rg.getImageData(0,0,c,u).data}if(4===n)h=new Int32Array(d);else{const p=c*u;h=new Int32Array(p*n);for(let g=0;g<p;g++)for(let v=0;v<n;++v)h[g*n+v]=d[4*g+v]}return tpe(h,[u,c,n],"int32")}}),n7=-2,alt=-1;function i7(t,n,e){const i=t.shape.length;le(i===n.length,()=>`Error in slice${i}D: Length of begin ${n} must match the rank of the array (${i}).`),le(i===e.length,()=>`Error in slice${i}D: Length of size ${e} must match the rank of the array (${i}).`);for(let s=0;s<i;++s)le(n[s]+e[s]<=t.shape[s],()=>`Error in slice${i}D: begin[${s}] + size[${s}] (${n[s]+e[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function llt(t){const n=[];let e=0;for(;t>0;)1&t&&n.push(e),t/=2,e++;return n}function s7(t,n,e){const i=[];for(let s=0;s<t.length;s++)i[s]=Math.ceil((n[s]-t[s])/e[s]);return i}function ope(t,n,e,i){const s=[...t];for(let r=s.length;r<i.length;r++)s.push(1);for(let r=0;r<e;r++)0===r?s[n]=1:(s.splice(n,0,1),s.pop());return s}function ape(t,n,e){return e<=t?e:e-(n-1)}function lpe(t,n){const e=[];for(let i=0;i<t;i++)e.push(n+i);return e}function clt(t,n,e,i,s,r,o,a,l){const c=t.length;let u=new Array(c),d=new Array(c),h=new Array(c);if(n.length&&e>0){const f=n[0],p=e+1;u=cpe(o,f,p,i,t),d=upe(a,f,p,s,t),h=ope(r,f,p,t)}else for(let f=0;f<c;f++)u[f]=hpe(o,i,r,t,f,l),d[f]=fpe(a,s,r,t,f,l),h[f]=dpe(r,f,l);return{begin:u,end:d,strides:h}}function cpe(t,n,e,i,s){const r=[...s],o=lpe(e,n);for(let a=0;a<r.length;a++)if(o.indexOf(a)>-1)r[a]=0;else{const l=ape(n,e,a);let c=i[l];t&1<<l&&(c=0),r[a]=c}return r}function upe(t,n,e,i,s){const r=[...s],o=lpe(e,n);for(let a=0;a<r.length;a++)if(o.indexOf(a)>-1)r[a]=Number.MAX_SAFE_INTEGER;else{const l=ape(n,e,a);let c=i[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),r[a]=c}for(let a=0;a<r.length;a++)r[a]<0&&(r[a]+=s[a]),r[a]=Tg(0,r[a],s[a]);return r}function dpe(t,n,e){let i=t[n];return(e&1<<n||null==i)&&(i=1),i}function hpe(t,n,e,i,s,r){let o=n[s];(t&1<<s||r&1<<s||null==o)&&(o=(e[s]||1)>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const l=i[s];return o<0&&(o+=l),o=Tg(0,o,l-1),o}function fpe(t,n,e,i,s,r){let o=n[s];const a=e[s]||1;(t&1<<s||r&1<<s||null==o)&&(o=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=i[s];return o<0&&(o+=l),o=a>0?Tg(0,o,l):Tg(-1,o,l-1),o}function r7(t,n,e){let i=e.length;for(let s=0;s<e.length;s++)if(e[s]>1){i=s;break}for(let s=i+1;s<e.length;s++)if(n[s]>0||e[s]!==t[s])return!1;return!0}function o7(t,n){let e=t.length>0?t[t.length-1]:1;for(let i=0;i<t.length-1;i++)e+=t[i]*n[i];return e}function eN(t,n,e){let i;const s=t.shape.length;let r;return i="number"==typeof n?[n,...new Array(s-1).fill(0)]:n.length<s?n.concat(new Array(s-n.length).fill(0)):n.slice(),i.forEach(o=>{le(-1!==o,()=>"slice() does not support negative begin indexing.")}),r=null==e?new Array(s).fill(-1):"number"==typeof e?[e,...new Array(s-1).fill(-1)]:e.length<s?e.concat(new Array(s-e.length).fill(-1)):e,r=r.map((o,a)=>o>=0?o:(le(-1===o,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-i[a])),[i,r]}function a7(t,n,e,i,s,r,o,a,l){let c;if(null==i?(c=new Array(n.length),c.fill(1)):c=i,null!=o&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:n.slice(),end:e.slice(),strides:c.slice(),beginMask:s,endMask:r,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let E=0;E<d.dims;E++)u&&1<<E&a&&d.numAddAxisAfterEllipsis++,1<<E&o&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function ult(t,n){n.beginMask=0,n.endMask=0,n.shrinkAxisMask=0;let e=0;n.beginValid=null!=t.begin,n.endValid=null!=t.end,n.begin=new Array(n.dims),n.end=new Array(n.dims),n.strides=new Array(n.dims),n.finalShapeGatherIndices=[],n.finalShapeGatherIndicesSparse=[],n.inputShapeGatherIndicesSparse=new Array(n.dims);for(let i=0;i<t.dims;i++)if(1<<i&t.ellipsisMask){const s=Math.min(n.dims-(t.dims-i)+1+t.numAddAxisAfterEllipsis,n.dims);for(;e<s;e++)n.begin[e]=0,n.end[e]=0,n.strides[e]=1,n.beginMask|=1<<e,n.endMask|=1<<e,n.finalShapeGatherIndices.push(e),n.finalShapeGatherIndicesSparse.push(-1),n.inputShapeGatherIndicesSparse[e]=i}else if(1<<i&t.newAxisMask)n.finalShapeGatherIndices.push(n7),n.finalShapeGatherIndicesSparse.push(-1);else{if(e===n.begin.length)throw Error(`Index out of range using input dim ${e}; input has only ${n.dims} dims, ${n.begin.length}.`);null!=t.begin&&(n.begin[e]=t.begin[i]),null!=t.end&&(n.end[e]=t.end[i]),n.strides[e]=t.strides[i],t.beginMask&1<<i&&(n.beginMask|=1<<e),t.endMask&1<<i&&(n.endMask|=1<<e),t.shrinkAxisMask&1<<i?(n.finalShapeGatherIndices.push(alt),n.finalShapeGatherIndicesSparse.push(-1),n.shrinkAxisMask|=1<<e):(n.finalShapeGatherIndices.push(e),n.finalShapeGatherIndicesSparse.push(i)),n.inputShapeGatherIndicesSparse[e]=i,e++}}(d,h);let f=!0,p=!0,g=!0;const v=[],y=[];for(let E=0;E<t.length;++E){if(0===h.strides[E])throw Error(`strides[${E}] must be non-zero`);const T=!!(h.shrinkAxisMask&1<<E),L=t[E];if(-1===L){v.push(T?1:-1);continue}const W=[h.beginMask&1<<E,h.endMask&1<<E],H=[h.strides[E]>0?0:-1,h.strides[E]>0?L:L-1];if(T&&h.strides[E]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&1===h.strides[E];const P=!!(h.beginMask&1<<E&&h.endMask&1<<E);if(h.beginValid&&h.endValid){if(T){const Ee=h.begin[E]<0?L+h.begin[E]:h.begin[E];if(h.begin[E]=Ee,h.end[E]=h.begin[E]+1,Ee<0||Ee>=L)throw Error(`slice index ${h.begin[E]} of dimension ${E} out of bounds.`)}else h.begin[E]=ppe(h.begin[E],0,h.strides[E],L,W,H),h.end[E]=ppe(h.end[E],1,h.strides[E],L,W,H);const me=1===h.strides[E]&&0===h.begin[E]&&h.end[E]===L;f=f&&me,p=p&&(0===E&&1===h.strides[E]||me)}else f=f&&1===h.strides[E]&&P,p=p&&(0===E&&1===h.strides[E]||P);let X,ne=!1;if(h.beginValid&&h.endValid?(X=h.end[E]-h.begin[E],ne=!0):T?(X=1,ne=!0):P&&L>=0&&(X=h.strides[E]<0?-L:L,ne=!0),ne){let me;me=0===X||X<0!=h.strides[E]<0?0:Math.trunc(X/h.strides[E])+(X%h.strides[E]!=0?1:0),v.push(me)}else v.push(-1)}for(let E=0;E<h.finalShapeGatherIndices.length;++E){const T=h.finalShapeGatherIndices[E];T>=0?y.push(v[T]):T===n7&&y.push(1)}return{finalShapeSparse:y.filter((E,T)=>h.finalShapeGatherIndices[T]!==n7),finalShape:y,isIdentity:f,sliceDim0:p,isSimpleSlice:g,begin:h.begin,end:h.end,strides:h.strides}}function ppe(t,n,e,i,s,r){if(s[n])return e>0?r[n]:r[n+1&1];{const o=t<0?i+t:t;return o<r[0]?r[0]:o>r[1]?r[1]:o}}const mpe=Oe({acos_:function hlt(t){const e={x:fe(t,"x","acos")};return Pe.runKernel(ax,e)}}),_pe=Oe({acosh_:function flt(t){const e={x:fe(t,"x","acosh")};return Pe.runKernel(lx,e)}}),mlt=Oe({addN_:function plt(t){le(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),le(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const n=t.map((s,r)=>fe(s,`tensors${r}`,"addN")),e=n[0];return n.forEach(s=>{if(s.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),n.forEach(s=>{if(!Qi(s.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}),Pe.runKernel(VA,n)}}),l7=Oe({all_:function _lt(t,n=null,e=!1){const s={x:fe(t,"x","all","bool")};return Pe.runKernel("All",s,{axis:n,keepDims:e})}}),tN=Oe({any_:function glt(t,n=null,e=!1){const s={x:fe(t,"x","any","bool")};return Pe.runKernel("Any",s,{axis:n,keepDims:e})}}),y1=Oe({argMax_:function blt(t,n=0){const i={x:fe(t,"x","argMax")};return Pe.runKernel(zA,i,{axis:n})}}),gpe=Oe({argMin_:function vlt(t,n=0){const i={x:fe(t,"x","argMin")};return Pe.runKernel(UA,i,{axis:n})}}),bpe=Oe({asin_:function ylt(t){const e={x:fe(t,"x","asin")};return Pe.runKernel(cx,e)}}),vpe=Oe({asinh_:function wlt(t){const e={x:fe(t,"x","asinh")};return Pe.runKernel(ux,e)}}),ype=Oe({atan_:function Slt(t){const e={x:fe(t,"x","atan")};return Pe.runKernel(dx,e)}}),wpe=Oe({atan2_:function Clt(t,n){let e=fe(t,"a","atan2"),i=fe(n,"b","atan2");return[e,i]=Ur(e,i),Pe.runKernel(fx,{a:e,b:i})}}),Spe=Oe({atanh_:function xlt(t){const e={x:fe(t,"x","atanh")};return Pe.runKernel(hx,e)}});function aE(t,n,e,i,s="NHWC",r){return Jo(t,[...n,t[3]],e,r,i,null,null,Df(s))}function gu(t,n,e,i,s,r,o="channelsLast"){const[a,l]=lE(n);let c;if("channelsLast"===o)c=[a,l,t[3],t[3]];else{if("channelsFirst"!==o)throw new Error(`Unknown dataFormat ${o}`);c=[a,l,t[1],t[1]]}return Jo(t,c,e,i,s,r,!1,o)}function kf(t,n,e,i,s,r,o="NDHWC"){const[a,l,c]=u7(n);let u,d;if("NDHWC"===o)d="channelsLast",u=[a,l,c,t[4],t[4]];else{if("NCDHW"!==o)throw new Error(`Unknown dataFormat ${o}`);d="channelsFirst",u=[a,l,c,t[1],t[1]]}return rm(t,u,e,i,s,!1,d,r)}function Jo(t,n,e,i,s,r,o=!1,a="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if("channelsLast"===a)[l,c,u,d]=t;else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);[l,d,c,u]=t}const[h,f,,p]=n,[g,v]=lE(e),[y,w]=lE(i),E=w1(h,y),T=w1(f,w),{padInfo:L,outHeight:W,outWidth:H}=function Ilt(t,n,e,i,s,r,o,a,l){let c,u,d;if("number"==typeof t){c={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};const f=function Elt(t,n,e,i,s){null==i&&(i=c7(t,n,e));const o=t[1];return[cE((t[0]-n+2*i)/e+1,s),cE((o-n+2*i)/e+1,s)]}([n,e],r,i,t,a);u=f[0],d=f[1]}else if("same"===t){u=Math.ceil(n/i),d=Math.ceil(e/s);const h=Math.max(0,(u-1)*i+r-n),f=Math.max(0,(d-1)*s+o-e),p=Math.floor(h/2),g=h-p,v=Math.floor(f/2);c={top:p,bottom:g,left:v,right:f-v,type:"SAME"}}else if("valid"===t)c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((n-r+1)/i),d=Math.ceil((e-o+1)/s);else{if("object"!=typeof t)throw Error(`Unknown padding parameter: ${t}`);{const h="channelsLast"===l?t[1][0]:t[2][0],f="channelsLast"===l?t[1][1]:t[2][1],p="channelsLast"===l?t[2][0]:t[3][0],g="channelsLast"===l?t[2][1]:t[3][1];c={top:h,bottom:f,left:p,right:g,type:0===h&&0===f&&0===p&&0===g?"VALID":"EXPLICIT"},u=cE((n-r+h+f)/i+1,a),d=cE((e-o+p+g)/s+1,a)}}return{padInfo:c,outHeight:u,outWidth:d}}(s,c,u,g,v,E,T,r,a),P=o?p*d:p;let X;return"channelsFirst"===a?X=[l,P,W,H]:"channelsLast"===a&&(X=[l,W,H,P]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:d,outHeight:W,outWidth:H,outChannels:P,padInfo:L,strideHeight:g,strideWidth:v,filterHeight:h,filterWidth:f,effectiveFilterHeight:E,effectiveFilterWidth:T,dilationHeight:y,dilationWidth:w,inShape:t,outShape:X,filterShape:n}}function rm(t,n,e,i,s,r=!1,o="channelsLast",a){let[l,c,u,d,h]=[-1,-1,-1,-1,-1];if("channelsLast"===o)[l,c,u,d,h]=t;else{if("channelsFirst"!==o)throw new Error(`Unknown dataFormat ${o}`);[l,h,c,u,d]=t}const[f,p,g,,v]=n,[y,w,E]=u7(e),[T,L,W]=u7(i),H=w1(f,T),P=w1(p,L),X=w1(g,W),{padInfo:ne,outDepth:me,outHeight:Ee,outWidth:Te}=function klt(t,n,e,i,s,r,o,a,l,c,u){let d,h,f,p;if("valid"===t&&(t=0),"number"==typeof t){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:0===t?"VALID":"NUMBER"};const v=function Tlt(t,n,e,i,s,r){null==s&&(s=c7(t,n[0],i[0]));const o=[0,0,0,e];for(let a=0;a<3;a++)t[a]+2*s>=n[a]&&(o[a]=cE((t[a]-n[a]+2*s)/i[a]+1,r));return o}([n,e,i,1],[a,l,c],1,[s,r,o],t,u);h=v[0],f=v[1],p=v[2]}else{if("same"!==t)throw Error(`Unknown padding parameter: ${t}`);{h=Math.ceil(n/s),f=Math.ceil(e/r),p=Math.ceil(i/o);const g=(h-1)*s+a-n,v=(f-1)*r+l-e,y=(p-1)*o+c-i,w=Math.floor(g/2),E=g-w,T=Math.floor(v/2),L=v-T,W=Math.floor(y/2);d={top:T,bottom:L,left:W,right:y-W,front:w,back:E,type:"SAME"}}}return{padInfo:d,outDepth:h,outHeight:f,outWidth:p}}(s,c,u,d,y,w,E,H,P,X,a),$e=r?v*h:v;let Xe;return"channelsFirst"===o?Xe=[l,$e,me,Ee,Te]:"channelsLast"===o&&(Xe=[l,me,Ee,Te,$e]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:u,inWidth:d,inChannels:h,outDepth:me,outHeight:Ee,outWidth:Te,outChannels:$e,padInfo:ne,strideDepth:y,strideHeight:w,strideWidth:E,filterDepth:f,filterHeight:p,filterWidth:g,effectiveFilterDepth:H,effectiveFilterHeight:P,effectiveFilterWidth:X,dilationDepth:T,dilationHeight:L,dilationWidth:W,inShape:t,outShape:Xe,filterShape:n}}function c7(t,n,e,i=1){const s=w1(n,i);return Math.floor((t[0]*(e-1)-e+s)/2)}function lE(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function u7(t){return"number"==typeof t?[t,t,t]:t}function w1(t,n){return n<=1?t:t+(t-1)*(n-1)}function cE(t,n){if(!n)return Math.trunc(t);switch(n){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${n}`)}}function om(t){const[n,e,i]=lE(t);return 1===n&&1===e&&1===i}function va(t,n){return om(t)||om(n)}function Fg(t){return lE(t).every(n=>n>0)}function Df(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Ja(t,n,e){if(null!=e){if("string"==typeof n)throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${n}.`);if("number"==typeof n)le(r1(n),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${n}.`);else{if("object"!=typeof n)throw Error(`Error in ${t}: Unknown padding parameter: ${n}`);n.forEach(i=>{i.forEach(s=>{le(r1(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${s}.`)})})}}}const Ge=Oe({reshape_:function Dlt(t,n){const i={x:fe(t,"x","reshape","string_or_numeric")};return Pe.runKernel(kO,i,{shape:n})}}),nN=Oe({avgPool_:function Mlt(t,n,e,i,s){const r=fe(t,"x","avgPool","float32");le(va(e,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${e} and dilations '1'`);let a=r,l=!1;3===r.rank&&(l=!0,a=Ge(r,[1,r.shape[0],r.shape[1],r.shape[2]])),le(4===a.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Ja("avgPool",i,s);let d=Pe.runKernel(GA,{x:a},{filterSize:n,strides:e,pad:i,dimRoundingMode:s});return d=Ht(d,r.dtype),l?Ge(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),Cpe=Oe({avgPool3d_:function Alt(t,n,e,i,s,r="NDHWC"){const o=fe(t,"x","avgPool3d","float32");let a=o,l=!1;4===o.rank&&(l=!0,a=Ge(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),le(5===a.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),le("NDHWC"===r,()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),le("number"==typeof e&&e>0||Array.isArray(e)&&e[0]>0&&e[1]>0&&e[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${e}'`),Ja("avgPool3d",i,s);let d=Pe.runKernel(jA,{x:a},{filterSize:n,strides:e,pad:i,dimRoundingMode:s,dataFormat:r});return d=Ht(d,a.dtype),l?Ge(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),Xr=Oe({concat_:function Olt(t,n=0){le(t.length>=1,()=>"Pass at least one tensor to concat");const e=YO(t,"tensors","concat","string_or_numeric");return"complex64"===e[0].dtype&&e.forEach(r=>{if("complex64"!==r.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${r.dtype}. `)}),1===e.length?xf(e[0]):Pe.runKernel(XA,e,{axis:n})}}),Ui=Oe({matMul_:function Nlt(t,n,e=!1,i=!1){let s=fe(t,"a","matMul"),r=fe(n,"b","matMul");return[s,r]=Ur(s,r),Pe.runKernel(HA,{a:s,b:r},{transposeA:e,transposeB:i})}}),fh=Oe({sigmoid_:function Rlt(t){const e={x:fe(t,"x","sigmoid","float32")};return Pe.runKernel(qx,e)}}),is=Oe({slice_:function Flt(t,n,e){const i=fe(t,"x","slice","string_or_numeric");if(0===i.rank)throw new Error("Slicing scalar is not possible");return Pe.runKernel(NO,{x:i},{begin:n,size:e})}}),Lg=Oe({tanh_:function Llt(t){const e={x:fe(t,"x","tanh","float32")};return Pe.runKernel(Jx,e)}}),$lt=Oe({basicLSTMCell_:function Plt(t,n,e,i,s,r){const o=fe(t,"forgetBias","basicLSTMCell"),a=fe(n,"lstmKernel","basicLSTMCell"),l=fe(e,"lstmBias","basicLSTMCell"),c=fe(i,"data","basicLSTMCell"),u=fe(s,"c","basicLSTMCell"),d=fe(r,"h","basicLSTMCell"),h=Xr([c,d],1),f=Ui(h,a),p=kt(f,l),v=p.shape[1]/4,y=[p.shape[0],v],w=is(p,[0,0],y),E=is(p,[0,v],y),T=is(p,[0,2*v],y),L=is(p,[0,3*v],y),W=kt(Be(fh(w),Lg(E)),Be(u,fh(kt(o,T))));return[W,Be(Lg(W),fh(L))]}}),iN=Oe({batchToSpaceND_:function Blt(t,n,e){const i=fe(t,"x","batchToSpaceND"),s=n.reduce((a,l)=>a*l);return le(i.rank>=1+n.length,()=>`input rank is ${i.rank} but should be > than blockShape.length ${n.length}`),le(e.length===n.length,()=>`crops.length is ${e.length} but should be equal to blockShape.length  ${n.length}`),le(i.shape[0]%s==0,()=>`input tensor batch is ${i.shape[0]} but is not divisible by the product of the elements of blockShape ${n.join(" * ")} === ${s}`),Pe.runKernel(WA,{x:i},{blockShape:n,crops:e})}});function Vlt(t){let n;return n=0===t.rank||1===t.rank?Ge(t,[1,1,1,t.size]):2===t.rank?Ge(t,[1,1,t.shape[0],t.shape[1]]):3===t.rank?Ge(t,[1,t.shape[0],t.shape[1],t.shape[2]]):t,n}const uE=Oe({batchNorm_:function zlt(t,n,e,i,s,r){null==r&&(r=.001);const o=fe(t,"x","batchNorm"),a=fe(n,"mean","batchNorm"),l=fe(e,"variance","batchNorm");let c,u;null!=s&&(c=fe(s,"scale","batchNorm")),null!=i&&(u=fe(i,"offset","batchNorm")),le(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),le(null==u||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),le(null==c||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h={x:Vlt(o),scale:c,offset:u,mean:a,variance:l},p=Pe.runKernel(sO,h,{varianceEpsilon:r});return Ge(p,o.shape)}}),xpe=Oe({batchNorm2d_:function Ult(t,n,e,i,s,r){const o=fe(t,"x","batchNorm"),a=fe(n,"mean","batchNorm"),l=fe(e,"variance","batchNorm");let c,u;return null!=s&&(c=fe(s,"scale","batchNorm")),null!=i&&(u=fe(i,"offset","batchNorm")),le(2===o.rank,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),le(2===a.rank||1===a.rank,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),le(2===l.rank||1===l.rank,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),null!=c&&le(2===c.rank||1===c.rank,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),null!=u&&le(2===u.rank||1===u.rank,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),uE(o,a,l,u,c,r)}}),Epe=Oe({batchNorm3d_:function Glt(t,n,e,i,s,r){const o=fe(t,"x","batchNorm"),a=fe(n,"mean","batchNorm"),l=fe(e,"variance","batchNorm");let c,u;return null!=s&&(c=fe(s,"scale","batchNorm")),null!=i&&(u=fe(i,"offset","batchNorm")),le(3===o.rank,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),le(3===a.rank||1===a.rank,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),le(3===l.rank||1===l.rank,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),null!=c&&le(3===c.rank||1===c.rank,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),null!=u&&le(3===u.rank||1===u.rank,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),uE(o,a,l,u,c,r)}}),Tpe=Oe({batchNorm4d_:function jlt(t,n,e,i,s,r){const o=fe(t,"x","batchNorm"),a=fe(n,"mean","batchNorm"),l=fe(e,"variance","batchNorm");let c,u;return null!=s&&(c=fe(s,"scale","batchNorm")),null!=i&&(u=fe(i,"offset","batchNorm")),le(4===o.rank,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),le(4===a.rank||1===a.rank,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),le(4===l.rank||1===l.rank,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),null!=c&&le(4===c.rank||1===c.rank,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),null!=u&&le(4===u.rank||1===u.rank,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),uE(o,a,l,u,c,r)}}),Ipe=Oe({bincount_:function Hlt(t,n,e){const i=fe(t,"x","bincount"),s=fe(n,"weights","bincount");return le("int32"===i.dtype,()=>`Error in bincount: input dtype must be int32, but got ${i.dtype}`),le(e>=0,()=>`size must be non-negative, but got ${e}.`),le(s.size===i.size||0===s.size,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${i.shape}, weights shape: ${s.shape}.`),Pe.runKernel(fV,{x:i,weights:s},{size:e})}}),qlt=Oe({bitwiseAnd_:function Wlt(t,n){const e=fe(t,"x","bitwiseAnd"),i=fe(n,"y","bitwiseAnd");if(!Qi(e.shape,i.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${e.shape}, y: ${i.shape}`);if("int32"!==e.dtype||"int32"!==i.dtype)throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${e.dtype} and type of y: ${i.dtype}`);return Pe.runKernel(qA,{a:e,b:i})}}),Xlt=Oe({broadcastArgs_:function Klt(t,n){const e=fe(t,"s0","broadcastArgs","int32"),i=fe(n,"s1","broadcastArgs","int32");if(1!==e.rank)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${e.rank}`);if(1!==i.rank)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${i.rank}`);return Pe.runKernel(pV,{s0:e,s1:i})}}),S1=Oe({broadcastTo_:function Ylt(t,n){let e=fe(t,"broadcastTo","x");const i=e.shape;if(Fc(n),n.length<e.rank)throw new Error(`broadcastTo(): shape.length=${n.length} < input.rank=${e.rank}.`);if(n.length>e.rank){const c=e.shape.slice();for(;c.length<n.length;)c.unshift(1);e=Ge(e,c)}const s=e.shape,r=Array.from(n);for(let c=n.length-1;c>=0;c--)if(s[c]===n[c])r[c]=1;else if(1!==e.shape[c])throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${n}].`);return 0===r.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length?xf(e):Pe.runKernel(eE,{x:e},{reps:r})}}),kpe=Oe({ceil_:function Zlt(t){const e={x:fe(t,"x","ceil","float32")};return Pe.runKernel(mx,e)}}),ic=Oe({clipByValue_:function Qlt(t,n,e){const i=fe(t,"x","clipByValue");return le(n<=e,()=>`Error in clip: min (${n}) must be less than or equal to max (${e}).`),n===e?b1(i.shape,n,i.dtype):Pe.runKernel(_x,{x:i},{clipValueMin:n,clipValueMax:e})}}),Dpe=Oe({concat1d_:function Jlt(t){return Xr(t,0)}}),Mpe=Oe({concat2d_:function ect(t,n){return Xr(t,n)}}),Ape=Oe({concat3d_:function tct(t,n){return Xr(t,n)}}),Ope=Oe({concat4d_:function nct(t,n){return Xr(t,n)}}),am=Oe({conv2d_:function ict(t,n,e,i,s="NHWC",r=[1,1],o){const a=fe(t,"x","conv2d","float32"),l=fe(n,"filter","conv2d","float32");let c=a,u=!1;3===a.rank&&(u=!0,c=Ge(a,[1,a.shape[0],a.shape[1],a.shape[2]])),le(4===c.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),le(4===l.rank,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Ja("conv2d",i,o);const d="NHWC"===s?c.shape[3]:c.shape[1];le(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),le(va(e,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${r}'`),le(Fg(r),()=>"Error in conv2D: Dilated rates should be larger than 0."),le(Fg(e),()=>"Error in conv2D: Strides should be larger than 0.");const p=Pe.runKernel(YA,{x:c,filter:l},{strides:e,pad:i,dataFormat:s,dilations:r,dimRoundingMode:o});return u?Ge(p,[p.shape[1],p.shape[2],p.shape[3]]):p}}),d7=Oe({conv1d_:function sct(t,n,e,i,s="NWC",r=1,o){const a=fe(t,"x","conv1d"),l=fe(n,"filter","conv1d");let c=a,u=!1;2===a.rank&&(u=!0,c=Ge(a,[1,a.shape[0],a.shape[1]])),le(3===c.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),le(3===l.rank,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Ja("conv1d",i,o),le(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),le(va(e,r),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${e} and dilation '${r}'`),le(Fg(r),()=>"Error in conv1D: Dilated rates should be larger than 0."),le(Fg(e),()=>"Error in conv1D: Stride should be larger than 0."),le("NWC"===s,()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const d=Ge(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=Ge(c,[c.shape[0],1,c.shape[1],c.shape[2]]),v=am(h,d,[1,e],i,"NHWC",[1,r],o);return Ge(v,u?[v.shape[2],v.shape[3]]:[v.shape[0],v.shape[2],v.shape[3]])}}),h7=Oe({conv2DBackpropInput_:function rct(t,n,e,i,s,r="NHWC",o){le(t.length===n.rank,()=>`Length of inShape (${t.length}) and rank of dy (${n.rank}) must match`);let a=t,l=n,c=!1;3===n.rank&&(c=!0,l=Ge(n,[1,n.shape[0],n.shape[1],n.shape[2]]),a=[1,t[0],t[1],t[2]]),le(4===a.length,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),le(4===l.rank,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),le(4===e.rank,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${e.rank}`);const u="NHWC"===r?a[3]:a[1],d="NHWC"===r?l.shape[3]:l.shape[1];le(u===e.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${e.shape[2]}.`),le(d===e.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${e.shape[3]}.`),Ja("conv2dDerInput",s,o);const p=Pe.runKernel(ZA,{dy:l,filter:e},{strides:i,pad:s,dataFormat:r,dimRoundingMode:o,inputShape:a});return c?Ge(p,[p.shape[1],p.shape[2],p.shape[3]]):p}}),f7=Oe({conv2dTranspose_:function oct(t,n,e,i,s,r){const o=fe(t,"x","conv2dTranspose"),a=fe(n,"filter","conv2dTranspose");return h7(e,o,a,i,s,"NHWC",r)}}),Npe=Oe({conv3d_:function act(t,n,e,i,s="NDHWC",r=[1,1,1]){const o=fe(t,"x","conv3d"),a=fe(n,"filter","conv3d");let l=o,c=!1;4===o.rank&&(c=!0,l=Ge(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),le(5===l.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),le(5===a.rank,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),le(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),le(va(e,r),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${e} and dilations '${r}'`),le("NDHWC"===s,()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),le(Fg(r),()=>"Error in conv3D: Dilated rates should be larger than 0."),le(Fg(e),()=>"Error in conv3D: Strides should be larger than 0.");const h=Pe.runKernel(QA,{x:l,filter:a},{strides:e,pad:i,dataFormat:s,dilations:r});return c?Ge(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),Rpe=Oe({conv3DBackpropInput_:function lct(t,n,e,i,s){le(t.length===n.rank,()=>`Length of inShape (${t.length}) and rank of dy (${n.rank}) must match`);let r=t,o=n,a=!1;4===n.rank&&(a=!0,o=Ge(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]),r=[1,t[0],t[1],t[2],t[3]]);const l=r[4],c=o.shape[4];le(5===r.length,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${r.length}.`),le(5===o.rank,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),le(5===e.rank,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${e.rank}`),le(l===e.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${e.shape[3]}.`),le(c===e.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${e.shape[4]}.`);const h=Pe.runKernel(bV,{dy:o,filter:e},{pad:s,strides:i,inputShape:r});return a?Ge(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),Fpe=Oe({conv3dTranspose_:function cct(t,n,e,i,s){const r=fe(t,"x","conv3dTranspose"),o=fe(n,"filter","conv3dTranspose");return Rpe(e,r,o,i,s)}}),sN=Oe({cos_:function uct(t){const e={x:fe(t,"x","cos","float32")};return Pe.runKernel(gx,e)}}),p7=Oe({cosh_:function dct(t){const e={x:fe(t,"x","cosh","float32")};return Pe.runKernel(bx,e)}}),rN=Oe({cumprod_:function hct(t,n=0,e=!1,i=!1){const r={x:fe(t,"x","cumprod")};return Pe.runKernel(vV,r,{axis:n,exclusive:e,reverse:i})}}),m7=Oe({cumsum_:function fct(t,n=0,e=!1,i=!1){const r={x:fe(t,"x","cumsum")};return Pe.runKernel(JA,r,{axis:n,exclusive:e,reverse:i})}}),_7=Oe({denseBincount_:function pct(t,n,e,i=!1){const s=fe(t,"x","denseBincount"),r=fe(n,"weights","denseBincount");return le("int32"===s.dtype,()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),le(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),le(e>=0,()=>`size must be non-negative, but got ${e}.`),le(r.size===s.size||0===r.size,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${r.shape}.`),Pe.runKernel(wV,{x:s,weights:r},{size:e,binaryOutput:i})}}),Lpe=Oe({depthToSpace_:function mct(t,n,e="NHWC"){const i=fe(t,"x","depthToSpace","float32"),s="NHWC"===e?i.shape[1]:i.shape[2],r="NHWC"===e?i.shape[2]:i.shape[3],o="NHWC"===e?i.shape[3]:i.shape[1];return le(n>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${n}`),le(s*n>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${s} and ${n}  for depthToSpace with input shape\n    ${i.shape}`),le(r*n>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${r} and ${n} for depthToSpace with input shape\n        ${i.shape}`),le(o%(n*n)==0,()=>`Dimension size must be evenly divisible by ${n*n} but is ${o} for depthToSpace with input shape ${i.shape}`),Pe.runKernel(SV,{x:i},{blockSize:n,dataFormat:e})}}),dE=Oe({depthwiseConv2d_:function _ct(t,n,e,i,s="NHWC",r=[1,1],o){const a=fe(t,"x","depthwiseConv2d","float32"),l=fe(n,"filter","depthwiseConv2d","float32");let c=a,u=!1;3===a.rank&&(u=!0,c=Ge(a,[1,a.shape[0],a.shape[1],a.shape[2]])),le(4===c.rank,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),le(4===l.rank,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d="NHWC"===s?c.shape[3]:c.shape[1];le(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),Ja("depthwiseConv2d",i,o);const p=Pe.runKernel(eO,{x:c,filter:l},{strides:e,pad:i,dataFormat:s,dilations:r,dimRoundingMode:o});return u?Ge(p,[p.shape[1],p.shape[2],p.shape[3]]):p}}),bct=Oe({diag_:function gct(t){const e={x:fe(t,"x","diag")};return Pe.runKernel(EV,e)}}),Ppe=Oe({dilation2d_:function vct(t,n,e,i,s=[1,1],r="NHWC"){const o=fe(t,"x","dilation2d"),a=fe(n,"filter","dilation2d");le(3===o.rank||4===o.rank,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),le(3===a.rank,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),le("NHWC"===r,()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${r}`);let l=o,c=!1;3===o.rank&&(l=Ge(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0),le(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const h=Pe.runKernel(tO,{x:l,filter:a},{strides:e,pad:i,dilations:s});return c?Ge(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),_d=Oe({equal_:function yct(t,n){let e=fe(t,"a","equal","string_or_numeric"),i=fe(n,"b","equal","string_or_numeric");return[e,i]=Ur(e,i),fi(e.shape,i.shape),Pe.runKernel(nO,{a:e,b:i})}}),Na=Oe({where_:function wct(t,n,e){const i=fe(n,"a","where"),s=fe(e,"b","where"),r=fe(t,"condition","where","bool"),o=fi(fi(r.shape,i.shape),s.shape),a=S1(r,o),l=S1(i,o),c=S1(s,o);return Pe.runKernel(OO,{condition:a,t:l,e:c})}}),$pe=Oe({divNoNan_:function Sct(t,n){let e=fe(t,"a","div"),i=fe(n,"b","div");[e,i]=Ur(e,i);const s=vn(e,i),r=ns(s),o=_d(i,r);return Na(o,r,s)}}),Bpe=Oe({dot_:function Cct(t,n){const e=fe(t,"t1","dot"),i=fe(n,"t2","dot");le(!(1!==e.rank&&2!==e.rank||1!==i.rank&&2!==i.rank),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${e.rank} and ${i.rank}.`);const s=1===e.rank?e.size:e.shape[1],r=1===i.rank?i.size:i.shape[0];if(le(s===r,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${r}.`),1===e.rank&&1===i.rank){const o=Ge(e,[1,-1]),a=Ge(i,[-1,1]),l=Ui(o,a);return Ge(l,[])}if(1===e.rank&&2===i.rank){const o=Ge(e,[1,-1]),a=Ge(i,[i.shape[0],i.shape[1]]),l=Ui(o,a);return Ge(l,[l.size])}if(2===e.rank&&1===i.rank){const o=Ge(i,[-1,1]),a=Ui(e,o);return Ge(a,[a.size])}{const o=Ge(i,[i.shape[0],i.shape[1]]);return Ui(e,o)}}}),C1=Oe({einsum_:function xct(t,...n){const e=n.map((s,r)=>fe(s,`tensors${r}`,"einsum"));return Pe.runKernel(DV,e,{equation:t})}}),hE=Oe({elu_:function Ect(t){const e={x:fe(t,"x","elu","float32")};return Pe.runKernel(yx,e)}}),Ict=Oe({ensureShape_:function Tct(t,n){const e=fe(t,"x","ensureShape","string_or_numeric");if(!function Jrt(t,n){if(t===n)return!0;if(null==t||null==n||t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(null!==t[e]&&null!==n[e]&&t[e]!==n[e])return!1;return!0}(e.shape,n))throw new Error(`EnsureShape: Shape of tensor ${e.shape} is not compatible with expected shape ${n}`);return t}}),g7=Oe({erf_:function kct(t){let n=fe(t,"x","erf");return le("int32"===n.dtype||"float32"===n.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===n.dtype&&(n=Ht(n,"float32")),Pe.runKernel(wx,{x:n})}});function b7(t,n){for(let e=0;e<t.length;++e)if(t[t.length-e-1]!==n-1-e)return!1;return!0}function Vpe(t,n,e){const i=t.length+n.length,s=[];let r=0,o=0;for(let a=0;a<i;a++)-1===e.indexOf(a)?s.push(t[r++]):s.push(n[o++]);return s}function ea(t,n){const e=[],i=t.length;for(let r=0;r<i;r++)-1===n.indexOf(r)&&e.push(t[r]);return[e,n.map(r=>t[r])]}function Yr(t,n){return Vpe(t,n.map(i=>1),n)}function ya(t,n,e){le(b7(n,e),()=>`${t} supports only inner-most axes for now. Got axes ${n} and rank-${e} input.`)}function Nr(t,n){if(b7(t,n))return null;const e=[];for(let i=0;i<n;++i)-1===t.indexOf(i)&&e.push(i);return t.forEach(i=>e.push(i)),e}function lm(t){return t.map((n,e)=>[e,n]).sort((n,e)=>n[1]-e[1]).map(n=>n[0])}function Zr(t,n){const e=[];for(let i=n-t;i<n;++i)e.push(i);return e}const bu=Oe({max_:function Dct(t,n=null,e=!1){const s={x:fe(t,"x","max")};return Pe.runKernel(pO,s,{reductionIndices:n,keepDims:e})}}),fE=Oe({min_:function Mct(t,n=null,e=!1){const s={x:fe(t,"x","min")};return Pe.runKernel(bO,s,{axis:n,keepDims:e})}}),_n=Oe({sum_:function Act(t,n=null,e=!1){let i=fe(t,"x","sum");return"bool"===i.dtype&&(i=Ht(i,"int32")),Pe.runKernel(RO,{x:i},{axis:n,keepDims:e})}});function zpe(t,n,e=null){if(0===t.rank)return Ao(t);if(1!==t.rank&&null===e)return zpe(Ge(t,[-1]),n,e);if(1===t.rank||"number"==typeof e||Array.isArray(e)&&1===e.length){if(1===n)return _n(Ao(t),e);if(n===1/0)return bu(Ao(t),e);if(n===-1/0)return fE(Ao(t),e);if("euclidean"===n||2===n)return ba(_n(Tf(Ao(t),En(2,"int32")),e));throw new Error(`Error in norm: invalid ord value: ${n}`)}if(Array.isArray(e)&&2===e.length){if(1===n)return bu(_n(Ao(t),e[0]),e[1]-1);if(n===1/0)return bu(_n(Ao(t),e[1]),e[0]);if(n===-1/0)return fE(_n(Ao(t),e[1]),e[0]);if("fro"===n||"euclidean"===n)return ba(_n(tr(t),e));throw new Error(`Error in norm: invalid ord value: ${n}`)}throw new Error(`Error in norm: invalid axis: ${e}`)}const pE=Oe({norm_:function Oct(t,n="euclidean",e=null,i=!1){const s=zpe(t=fe(t,"x","norm"),n,e);let r=s.shape;if(i){const o=$i(e,t.shape);r=Yr(s.shape,o)}return Ge(s,r)}}),Upe=Oe({euclideanNorm_:function Nct(t,n=null,e=!1){return pE(t,"euclidean",n,e)}}),sc=Oe({exp_:function Rct(t){const e={x:fe(t,"x","exp")};return Pe.runKernel(Sx,e)}}),Ra=Oe({expandDims_:function Fct(t,n=0){const e=fe(t,"x","expandDims","string_or_numeric");return le(n<=e.rank,()=>"Axis must be <= rank of the tensor"),Pe.runKernel(iO,{input:e},{dim:n})}}),Gpe=Oe({expm1_:function Lct(t){const e={x:fe(t,"x","expm1")};return Pe.runKernel(Cx,e)}}),vu=Oe({tile_:function Pct(t,n){const e=fe(t,"x","tile","string_or_numeric");return le(e.rank===n.length,()=>`Error in transpose: rank of input ${e.rank} must match length of reps ${n}.`),Pe.runKernel(eE,{x:e},{reps:n})}}),v7=Oe({eye_:function $ct(t,n,e,i="float32"){null==n&&(n=t);const s=xi([t,n],i),r=t<=n?t:n;for(let a=0;a<r;++a)s.set(1,a,a);const o=Ge(s.toTensor(),[t,n]);if(null==e)return o;if(1===e.length)return vu(Ra(o,0),[e[0],1,1]);if(2===e.length)return vu(Ra(Ra(o,0),0),[e[0],e[1],1,1]);if(3===e.length)return vu(Ra(Ra(Ra(o,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${e.length}D.`)}}),mE=Oe({floor_:function Bct(t){const e={x:fe(t,"x","floor","float32")};return Pe.runKernel(xx,e)}}),_E=Oe({gather_:function Vct(t,n,e=0,i=0){const s=fe(t,"x","gather"),r=fe(n,"indices","gather","int32");return Pe.runKernel(rO,{x:s,indices:r},{axis:e,batchDims:i})}}),rc=Oe({greater_:function zct(t,n){let e=fe(t,"a","greater","string_or_numeric"),i=fe(n,"b","greater","string_or_numeric");return[e,i]=Ur(e,i),fi(e.shape,i.shape),Pe.runKernel(oO,{a:e,b:i})}}),cm=Oe({greaterEqual_:function Uct(t,n){let e=fe(t,"a","greaterEqual","string_or_numeric"),i=fe(n,"b","greaterEqual","string_or_numeric");return[e,i]=Ur(e,i),fi(e.shape,i.shape),Pe.runKernel(Tx,{a:e,b:i})}}),oN=Oe({imag_:function Gct(t){const e={input:fe(t,"input","imag")};return Pe.runKernel(LV,e)}}),jpe=Oe({isFinite_:function jct(t){const e={x:fe(t,"x","isFinite")};return Pe.runKernel(kx,e)}}),Hpe=Oe({isInf_:function Hct(t){const e={x:fe(t,"x","isInf")};return Pe.runKernel(Dx,e)}}),Wpe=Oe({isNaN_:function Wct(t){const e={x:fe(t,"x","isNaN")};return Pe.runKernel(Mx,e)}}),aN=Oe({leakyRelu_:function qct(t,n=.2){const i={x:fe(t,"x","leakyRelu")};return Pe.runKernel(aO,i,{alpha:n})}}),gE=Oe({less_:function Kct(t,n){let e=fe(t,"a","less","string_or_numeric"),i=fe(n,"b","less","string_or_numeric");return[e,i]=Ur(e,i),fi(e.shape,i.shape),Pe.runKernel(lO,{a:e,b:i})}}),Pg=Oe({lessEqual_:function Xct(t,n){let e=fe(t,"a","lessEqual","string_or_numeric"),i=fe(n,"b","lessEqual","string_or_numeric");return[e,i]=Ur(e,i),fi(e.shape,i.shape),Pe.runKernel(cO,{a:e,b:i})}});function Yct(t,n,e){if(e<=0)throw new Error("The number of values should be positive.");return Pe.runKernel(PV,{},{start:t,stop:n,num:e})}const qpe=Oe({localResponseNormalization_:function Zct(t,n=5,e=1,i=1,s=.5){const r=fe(t,"x","localResponseNormalization");le(4===r.rank||3===r.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${r.rank}.`),le(r1(n),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${n}.`);let o=r,a=!1;3===r.rank&&(a=!0,o=Ge(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const u=Pe.runKernel(fO,{x:o},{depthRadius:n,bias:e,alpha:i,beta:s});return a?Ge(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),Bc=Oe({log_:function Qct(t){const e={x:fe(t,"x","log","float32")};return Pe.runKernel(Ax,e)}}),lN=Oe({log1p_:function Jct(t){const e={x:fe(t,"x","log1p")};return Pe.runKernel(Ox,e)}}),gr=Oe({neg_:function eut(t){const e={x:fe(t,"x","neg")};return Pe.runKernel(yO,e)}}),x1=Oe({softplus_:function tut(t){const e={x:fe(t,"x","softplus")};return Pe.runKernel(Kx,e)}}),Kpe=Oe({logSigmoid_:function nut(t){const n=fe(t,"x","logSigmoid");return Ef(i=>({value:gr(x1(gr(i))),gradFunc:o=>Be(o,fh(gr(i)))}))(n)}}),y7=Oe({logSoftmax_:function iut(t,n=-1){const e=fe(t,"logits","logSoftmax");if(-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and axis was ${n}`);return Ef((s,r)=>{const a=bu(s,n,!0),l=tn(s,a),c=tn(Ht(l,"float32"),Bc(_n(sc(l),n,!0)));return r([c]),{value:c,gradFunc:(d,h)=>{const[f]=h,g=sc(f);return tn(d,Be(_n(d,n,!0),g))}}})(e)}}),cN=Oe({logSumExp_:function sut(t,n=null,e=!1){const i=fe(t,"x","logSumExp"),s=$i(n,i.shape),r=bu(i,s,!0),o=tn(i,r),a=sc(o),l=_n(a,s),c=Bc(l),u=kt(Ge(r,c.shape),c);if(e){const d=Yr(u.shape,s);return Ge(u,d)}return u}}),ph=Oe({logicalAnd_:function rut(t,n){const e=fe(t,"a","logicalAnd","bool"),i=fe(n,"b","logicalAnd","bool");return fi(e.shape,i.shape),Pe.runKernel(uO,{a:e,b:i})}}),uN=Oe({logicalNot_:function out(t){const e={x:fe(t,"x","logicalNot","bool")};return Pe.runKernel(dO,e)}}),w7=Oe({logicalOr_:function aut(t,n){const e=fe(t,"a","logicalOr","bool"),i=fe(n,"b","logicalOr","bool");return fi(e.shape,i.shape),Pe.runKernel(hO,{a:e,b:i})}}),Xpe=Oe({logicalXor_:function lut(t,n){const e=fe(t,"a","logicalXor","bool"),i=fe(n,"b","logicalXor","bool");return fi(e.shape,i.shape),ph(w7(t,n),uN(ph(t,n)))}}),dN=2147483648,S7=Oe({searchSorted_:function cut(t,n,e="left"){const i=fe(t,"sortedSequence","searchSorted"),s=fe(n,"values","searchSorted"),o=s.shape[s.shape.length-1],a=Ge(i,[-1,i.shape[i.shape.length-1]]),l=Ge(s,[-1,o]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(at(l.shape)>=dN)throw new Error(`values tensor size must less than ${dN}`);if(a.shape[1]>=dN)throw new Error(`trailing dim_size must less than ${dN} for int32 output type, was ${a.shape[1]}`);return Pe.runKernel(tz,{sortedSequence:a,values:l},{side:e})}});function uut(t,n){return S7(t,n,"left")}const hN=Oe({maxPool_:function dut(t,n,e,i,s){const r=fe(t,"x","maxPool");let a=r,l=!1;3===r.rank&&(l=!0,a=Ge(r,[1,r.shape[0],r.shape[1],r.shape[2]])),le(4===a.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),le(va(e,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${e} and dilations '1'`),Ja("maxPool",i,s);const d=Pe.runKernel(mO,{x:a},{filterSize:n,strides:e,pad:i,dimRoundingMode:s});return l?Ge(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),Ype=Oe({maxPool3d_:function hut(t,n=[1,1,1],e,i,s,r="NDHWC"){const o=fe(t,"x","maxPool3d");let a=o,l=!1;4===o.rank&&(l=!0,a=Ge(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),le(5===a.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),le("NDHWC"===r,()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),Ja("maxPool3d",i,s);const d=Pe.runKernel(_O,{x:a},{filterSize:n,strides:e,pad:i,dimRoundingMode:s,dataFormat:r});return l?Ge(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),mut=Oe({maxPoolWithArgmax_:function fut(t,n,e,i,s=!1){const o={x:fe(t,"x","maxPoolWithArgmax")},l=Pe.runKernel(zV,o,{filterSize:n,strides:e,pad:i,includeBatchInIndex:s});return{result:l[0],indexes:l[1]}}}),Gr=Oe({mean_:function _ut(t,n=null,e=!1){const s={x:fe(t,"x","mean")};return Pe.runKernel(gO,s,{axis:n,keepDims:e})}});function No(t,n="float32"){if(Fc(t),"complex64"===n){const i=No(t,"float32"),s=No(t,"float32");return em(i,s)}const e=Aa(at(t),n);return Pe.makeTensor(e,t,n)}function oc(t,n="float32"){if(Fc(t),"complex64"===n){const i=oc(t,"float32"),s=No(t,"float32");return em(i,s)}const e=oV(at(t),n);return Pe.makeTensor(e,t,n)}function gut(t,n,{indexing:e="xy"}={}){if("xy"!==e&&"ij"!==e)throw new TypeError(`${e} is not a valid third argument to meshgrid`);if(void 0===t)return[];let i=fe(t,"x","meshgrid",t instanceof Ps?t.dtype:"float32");if(void 0===n)return[i];let s=fe(n,"y","meshgrid",n instanceof Ps?n.dtype:"float32");const r=at(i.shape),o=at(s.shape);return"xy"===e?(i=Ge(i,[1,-1]),s=Ge(s,[-1,1]),[Ui(oc([o,1],i.dtype),i),Ui(s,oc([1,r],s.dtype))]):(i=Ge(i,[-1,1]),s=Ge(s,[1,-1]),[Ui(i,oc([1,o],i.dtype)),Ui(oc([r,1],s.dtype),s)])}const $g=Oe({minimum_:function but(t,n){let e=fe(t,"a","minimum"),i=fe(n,"b","minimum");return[e,i]=Ur(e,i),"bool"===e.dtype&&(e=Ht(e,"int32"),i=Ht(i,"int32")),fi(e.shape,i.shape),Pe.runKernel(Rx,{a:e,b:i})}}),Zpe=Oe({mirrorPad_:function vut(t,n,e){le("reflect"===e||"symmetric"===e,()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${e}.`);const i=fe(t,"x","mirrorPad");if(0===i.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");le(n.length===i.rank,()=>`Padding doesn't match input. Must be ${i.rank}. Got ${n.length}.`);const s="reflect"===e?1:0;for(let a=0;a<i.rank;a++)le(2===n[a].length,()=>"Invalid number of paddings. Must be length of 2 each."),le(n[a][0]>=0&&n[a][0]<=i.shape[a]-s&&n[a][1]>=0&&n[a][1]<=i.shape[a]-s,()=>`Padding in dimension ${a} cannot be greater than or equal to ${i.shape[a]-s} or less than 0 for input of shape ${i.shape}`);return Pe.runKernel(vO,{x:i},{paddings:n,mode:e})}}),Qpe=Oe({mod_:function yut(t,n){let e=fe(t,"a","mod"),i=fe(n,"b","mod");return[e,i]=Ur(e,i),Pe.runKernel(Fx,{a:e,b:i})}}),fN=Oe({moments_:function wut(t,n=null,e=!1){const i=$i(n,(t=fe(t,"x","moments")).shape),s=Gr(t,i,e);let r=s.shape;e||(r=Yr(s.shape,i));const o=tr(tn(Ht(t,"float32"),Ge(s,r)));return{mean:s,variance:Gr(o,i,e)}}}),Cut=Oe({multiRNNCell_:function Sut(t,n,e,i){const s=fe(n,"data","multiRNNCell"),r=YO(e,"c","multiRNNCell"),o=YO(i,"h","multiRNNCell");let a=s;const l=[];for(let d=0;d<t.length;d++){const h=t[d](a,r[d],o[d]);l.push(h[0]),l.push(h[1]),a=h[1]}const c=[],u=[];for(let d=0;d<l.length;d+=2)c.push(l[d]),u.push(l[d+1]);return[c,u]}}),Eut=Oe({multinomial_:function xut(t,n,e,i=!1){const s=fe(t,"logits","multinomial"),r=s.size,o=s.rank;if(r<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${r}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);e=e||Math.random();const l={logits:1===o?Ge(s,[1,-1]):s},u=Pe.runKernel(UV,l,{numSamples:n,seed:e,normalized:i});return 1===o?Ge(u,[u.size]):u}}),E1=Oe({notEqual_:function Tut(t,n){let e=fe(t,"a","notEqual","string_or_numeric"),i=fe(n,"b","notEqual","string_or_numeric");return[e,i]=Ur(e,i),fi(e.shape,i.shape),Pe.runKernel(wO,{a:e,b:i})}}),C7=Oe({oneHot_:function Iut(t,n,e=1,i=0,s="int32"){if(n<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${n}`);const o={indices:fe(t,"indices","oneHot","int32")};return Pe.runKernel(CO,o,{dtype:s,depth:n,onValue:e,offValue:i})}}),Vc=Oe({onesLike_:function kut(t){const e={x:fe(t,"x","onesLike")};return Pe.runKernel(SO,e)}}),Mut=Oe({outerProduct_:function Dut(t,n){const e=fe(t,"v1","outerProduct"),i=fe(n,"v2","outerProduct");le(1===e.rank&&1===i.rank,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${e.rank} and ${i.rank}.`);const s=Ge(e,[-1,1]),r=Ge(i,[1,-1]);return Ui(s,r)}}),um=Oe({pad_:function Aut(t,n,e=0){const i=fe(t,"x","pad");if(0===i.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return Pe.runKernel(EO,{x:i},{paddings:n,constantValue:e})}}),Nut=Oe({pad1d_:function Out(t,n,e=0){return le(2===n.length,()=>"Invalid number of paddings. Must be length of 2."),um(t,[n],e)}}),Fut=Oe({pad2d_:function Rut(t,n,e=0){return le(2===n.length&&2===n[0].length&&2===n[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),um(t,n,e)}}),Put=Oe({pad3d_:function Lut(t,n,e=0){return le(3===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),um(t,n,e)}}),But=Oe({pad4d_:function $ut(t,n,e=0){return le(4===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length&&2===n[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),um(t,n,e)}}),pN=Oe({spaceToBatchND_:function Vut(t,n,e){const i=fe(t,"x","spaceToBatchND");return le(i.rank>=1+n.length,()=>`input rank ${i.rank} should be > than [blockShape] ${n.length}`),le(e.length===n.length,()=>`paddings.shape[0] ${e.length} must be equal to [blockShape] ${n.length}`),le(i.shape.reduce((o,a,l)=>l>0&&l<=n.length?o&&(a+e[l-1][0]+e[l-1][1])%n[l-1]==0:o,!0),()=>`input spatial dimensions ${i.shape.slice(1)} with paddings ${e.toString()} must be divisible by blockShapes ${n.toString()}`),Pe.runKernel(FO,{x:i},{blockShape:n,paddings:e})}}),Jpe=Oe({pool_:function zut(t,n,e,i,s,r,o){null==s&&(s=[1,1]),null==r&&(r=1),0===i&&(i="valid");const a=fe(t,"x","maxPool");let l=a,c=!1;3===a.rank&&(c=!0,l=Ge(a,[1,a.shape[0],a.shape[1],a.shape[2]])),le(va(r,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${r} and dilations '${s}'`);const u=gu(l.shape,n,r,s,i),d=[u.dilationHeight,u.dilationWidth];let h;h="same"===i?function Gut(t,n){const i=t.map((o,a)=>o+(o-1)*(n[a]-1)).map(o=>o-1),s=i.map(o=>Math.floor(o/2)),r=i.map((o,a)=>o-s[a]);return i.map((o,a)=>[s[a],r[a]])}([u.filterHeight,u.filterWidth],d):[[0,0],[0,0]];const f=1===d[0]&&1===d[1],[p,g]=function Uut(t,n,e){const i=e.map(u=>u[0]),s=e.map(u=>u[1]),r=t.concat(i,s),o=n.map((u,d)=>(u-r[d]%u)%u),a=s.map((u,d)=>u+o[d]),l=n.map((u,d)=>[i[d],a[d]]),c=n.map((u,d)=>[0,o[d]]);return[l,c]}([u.inHeight,u.inWidth],d,h),v=f?i:"valid",y=f?l:pN(l,d,p),E=("avg"===e?()=>nN(y,n,r,v,o):()=>hN(y,n,r,v,o))(),T=f?E:iN(E,d,g);return c?Ge(T,[T.shape[1],T.shape[2],T.shape[3]]):T}}),mN=Oe({prelu_:function jut(t,n){const e=fe(t,"x","prelu"),i=fe(n,"alpha","prelu");return Pe.runKernel(TO,{x:e,alpha:i})}}),eme=Oe({prod_:function Hut(t,n=null,e=!1){let i=fe(t,"x","prod");return"bool"===i.dtype&&(i=Ht(i,"int32")),Pe.runKernel(IO,{x:i},{axis:n,keepDims:e})}}),qut=Oe({raggedGather_:function Wut(t,n,e,i){const s=t.map((u,d)=>fe(u,`tensors${d}`,"raggedGather","int32")),r=fe(n,"paramsDenseValues","raggedGather"),o=fe(e,"indices","raggedGather","int32"),c=Pe.runKernel(WV,{paramsNestedSplits:s,paramsDenseValues:r,indices:o},{outputRaggedRank:i});return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}}),Xut=Oe({raggedRange_:function Kut(t,n,e){const i=fe(t,"starts","raggedRange"),s=fe(n,"limits","raggedRange",i.dtype),r=fe(e,"deltas","raggedRange",i.dtype),a=Pe.runKernel(qV,{starts:i,limits:s,deltas:r});return{rtNestedSplits:a[0],rtDenseValues:a[1]}}}),Zut=Oe({raggedTensorToTensor_:function Yut(t,n,e,i,s){const r=fe(t,"shape","raggedTensorToTensor","int32"),o=fe(n,"values","raggedTensorToTensor"),a=fe(e,"defaultValue","raggedTensorToTensor",o.dtype),l=i.map((d,h)=>fe(d,`tensors${h}`,"raggedTensorToTensor","int32"));return Pe.runKernel(KV,{shape:r,values:o,defaultValue:a,rowPartitionTensors:l},{rowPartitionTypes:s})}}),Jut=Oe({rand_:function Qut(t,n,e){Fc(t);const i=at(t);let s=null;if(null==e||"float32"===e)s=new Float32Array(i);else if("int32"===e)s=new Int32Array(i);else{if("bool"!==e)throw new Error(`Unknown data type ${e}`);s=new Uint8Array(i)}for(let r=0;r<i;r++)s[r]=n();return Pe.makeTensor(s,t,e)}});var T1=Y(814);class x7{constructor(n,e,i,s,r){this.mean=n,this.stdDev=e,this.dtype=i,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=r||Math.random();this.random=T1.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let n,e,i=!1;for(;!i;){let s,r,o;do{s=2*this.random()-1,r=2*this.random()-1,o=s*s+r*r}while(o>=1||0===o);const a=Math.sqrt(-2*Math.log(o)/o);n=this.mean+this.stdDev*s*a,e=this.mean+this.stdDev*r*a,(!this.truncated||this.isValidTruncated(n))&&(i=!0)}return(!this.truncated||this.isValidTruncated(e))&&(this.nextVal=this.convertValue(e)),this.convertValue(n)}convertValue(n){return null==this.dtype||"float32"===this.dtype?n:Math.round(n)}isValidTruncated(n){return n<=this.upper&&n>=this.lower}}class edt{constructor(n,e,i,s){this.alpha=n,this.beta=1/e,this.dtype=i;const r=s||Math.random();this.randu=T1.alea(r.toString()),this.randn=new x7(0,1,i,!1,this.randu()),this.d=n<1?n+2/3:n-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let n,e,i,s,r,o;for(;;){do{s=this.randn.nextValue(),o=1+this.c*s}while(o<=0);if(o*=o*o,n=s*s,e=1-.331*n*n,i=.5*n+this.d*(1-o+Math.log(o)),r=this.randu(),r<e||Math.log(r)<i)break}return o*=1/this.beta*this.d,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(n){return"float32"===this.dtype?n:Math.round(n)}}class tdt{constructor(n=0,e=1,i,s){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=n,this.range=e-n,this.dtype=i,null==s&&(s=Math.random()),"number"==typeof s&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${n} - ${e} <= 1 and dtype is not float`);this.random=T1.alea(s)}convertValue(n){return this.canReturnFloat()?n:Math.round(n)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const odt=Oe({randomGamma_:function rdt(t,n,e=1,i="float32",s){if(Fc(t),null==e&&(e=1),null==i&&(i="float32"),"float32"!==i&&"int32"!==i)throw new Error(`Unsupported data type ${i}`);const r=new edt(n,e,i,s),o=xi(t,i);for(let a=0;a<o.values.length;a++)o.values[a]=r.nextValue();return o.toTensor()}}),T7=Oe({randomNormal_:function adt(t,n=0,e=1,i,s){if(Fc(t),null!=i&&"bool"===i)throw new Error(`Unsupported data type ${i}`);const r=new x7(n,e,i,!1,s),o=xi(t,i);for(let a=0;a<o.values.length;a++)o.values[a]=r.nextValue();return o.toTensor()}}),cdt=Oe({randomStandardNormal_:function ldt(t,n,e){if(null!=n&&"bool"===n)throw new Error(`Unsupported data type ${n}`);return T7(t,0,1,n,e)}}),Bg=Oe({randomUniform_:function udt(t,n=0,e=1,i="float32",s){Fc(t);const r=xi(t,i),o=new tdt(n,e,null,s);for(let a=0;a<r.values.length;a++)r.values[a]=o.nextValue();return r.toTensor()}}),hdt=Oe({randomUniformInt_:function ddt(t,n,e,i){return Bg(t,n,e,"int32",i)}});function I1(t,n,e=1,i="float32"){if(0===e)throw new Error("Cannot have a step of zero");return Pe.runKernel(XV,{},{start:t,stop:n,step:e,dtype:i})}const bE=Oe({real_:function fdt(t){const e={input:fe(t,"input","real")};return Pe.runKernel(YV,e)}}),tme=Oe({reciprocal_:function pdt(t){const e={x:fe(t,"x","reciprocal")};return Pe.runKernel($x,e)}}),mh=Oe({relu_:function mdt(t){const e={x:fe(t,"x","relu")};return Pe.runKernel(Bx,e)}}),I7=Oe({relu6_:function _dt(t){const e={x:fe(t,"x","relu6")};return Pe.runKernel(Vx,e)}}),yu=Oe({reverse_:function gdt(t,n){const i={x:fe(t,"x","reverse")};return Pe.runKernel(AO,i,{dims:n})}}),vdt=Oe({reverse1d_:function bdt(t){const n=fe(t,"x","reverse");return le(1===n.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${n.rank}.`),yu(n,0)}}),wdt=Oe({reverse2d_:function ydt(t,n){const e=fe(t,"x","reverse");return le(2===e.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${e.rank}.`),yu(e,n)}}),Cdt=Oe({reverse3d_:function Sdt(t,n){const e=fe(t,"x","reverse");return le(3===e.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${e.rank}.`),yu(e,n)}}),Edt=Oe({reverse4d_:function xdt(t,n){const e=fe(t,"x","reverse");return le(4===e.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${e.rank}.`),yu(e,n)}}),k7=Oe({round_:function Tdt(t){const e={x:fe(t,"x","round")};return Pe.runKernel(zx,e)}}),D7=Oe({rsqrt_:function Idt(t){const e={x:fe(t,"x","rsqrt","float32")};return Pe.runKernel(Ux,e)}}),M7=Oe({selu_:function kdt(t){const e={x:fe(t,"x","selu")};return Pe.runKernel(Gx,e)}}),A7=Oe({separableConv2d_:function Ddt(t,n,e,i,s,r=[1,1],o="NHWC"){const a=fe(t,"x","separableConv2d"),l=fe(n,"depthwiseFilter","separableConv2d"),c=fe(e,"pointwiseFilter","separableConv2d");let u=a,d=!1;if(3===a.rank&&(d=!0,u=Ge(a,[1,a.shape[0],a.shape[1],a.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");le(4===u.rank,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),le(4===l.rank,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),le(4===c.rank,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),le(1===c.shape[0],()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),le(1===c.shape[1],()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const h=l.shape[2],f=l.shape[3];le(c.shape[2]===h*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*f}, but got ${c.shape[2]}.`);const p=dE(u,l,i,s,o,r),v=am(p,c,1,"valid",o);return d?Ge(v,[v.shape[1],v.shape[2],v.shape[3]]):v}});function O7(){return O7=de(function*(t,n){const e=fe(t,"x","setdiff1d"),i=fe(n,"y","setdiff1d");le(e.dtype===i.dtype,()=>`x and y should have the same dtype, but got x (${e.dtype}) and y (${i.dtype}).`),le(1===e.rank,()=>`x should be 1D tensor, but got x (${e.shape}).`),le(1===i.rank,()=>`y should be 1D tensor, but got y (${i.shape}).`);const s=yield e.data(),r=yield i.data(),o=new Set(r);let a=0;for(let u=0;u<s.length;u++)o.has(s[u])||a++;const l=new Mo([a],e.dtype),c=new Mo([a],"int32");for(let u=0,d=0;u<s.length;u++)o.has(s[u])||(l.values[d]=s[u],c.values[d]=u,d++);return[l.toTensor(),c.toTensor()]}),O7.apply(this,arguments)}const Adt=function Mdt(t,n){return O7.apply(this,arguments)},nme=Oe({sign_:function Odt(t){const e={x:fe(t,"x","sign")};return Pe.runKernel(Wx,e)}}),N7=Oe({sin_:function Ndt(t){const e={x:fe(t,"x","sin","float32")};return Pe.runKernel(jx,e)}}),R7=Oe({sinh_:function Rdt(t){const e={x:fe(t,"x","sinh")};return Pe.runKernel(Hx,e)}}),_N=Oe({slice1d_:function Fdt(t,n,e){const i=fe(t,"x","slice1d");return le(1===i.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${i.rank} tensor`),is(i,[n],[e])}}),F7=Oe({slice2d_:function Ldt(t,n,e){const i=fe(t,"x","slice2d");return le(2===i.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${i.rank} tensor`),is(i,n,e)}}),gN=Oe({slice3d_:function Pdt(t,n,e){const i=fe(t,"x","slice3d");return le(3===i.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${i.rank} tensor`),is(i,n,e)}}),vE=Oe({slice4d_:function $dt(t,n,e){const i=fe(t,"x","slice4d");return le(4===i.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${i.rank} tensor`),is(i,n,e)}}),bN=Oe({softmax_:function Bdt(t,n=-1){const e=fe(t,"logits","softmax","float32");if(-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and dim was ${n}`);return Pe.runKernel(PO,{logits:e},{dim:n})}}),vN=Oe({fft_:function Vdt(t){return le("complex64"===t.dtype,()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`),Pe.runKernel("FFT",{input:t})}}),yE=Oe({ifft_:function zdt(t){return le("complex64"===t.dtype,()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`),Pe.runKernel(FV,{input:t})}}),L7=Oe({irfft_:function Udt(t){const n=t.shape[t.shape.length-1],e=t.size/n;let i;if(n<=2){const s=Ge(t,[e,n]);i=yE(s)}else{const s=[e,2*(n-1)],r=Ge(bE(t),[e,n]),o=Ge(oN(t),[e,n]),a=yu(is(r,[0,1],[e,n-2]),1),l=Be(yu(is(o,[0,1],[e,n-2]),1),En(-1)),c=Xr([r,a],1),u=Xr([o,l],1),d=Ge(em(c,u),[s[0],s[1]]);i=yE(d)}if(i=bE(i),3===t.rank&&0!==t.shape[0]){const s=i,r=t.shape[0];i=Ge(i,[r,i.shape[0]/r,i.shape[1]]),s.dispose()}return i}}),ac=Oe({split_:function Gdt(t,n,e=0){const s={x:fe(t,"x","split")};return Pe.runKernel(LO,s,{numOrSizeSplits:n,axis:e})}}),yN=Oe({rfft_:function jdt(t,n){le("float32"===t.dtype,()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let e=t.shape[t.shape.length-1];const i=t.size/e;let s;if(null!=n&&n<e){const p=t.shape.map(v=>0),g=t.shape.map(v=>v);g[t.shape.length-1]=n,s=is(t,p,g),e=n}else if(null!=n&&n>e){const p=t.shape.map(g=>g);p[t.shape.length-1]=n-e,s=Xr([t,No(p)],t.shape.length-1),e=n}else s=t;const r=ns(s),o=Ge(em(s,r),[i,e]),a=vN(o),l=Math.floor(e/2)+1,c=bE(a),u=oN(a),d=ac(c,[l,e-l],c.shape.length-1),h=ac(u,[l,e-l],u.shape.length-1),f=s.shape.slice();return f[s.shape.length-1]=l,Ge(em(d[0],h[0]),f)}}),P7=Oe({squaredDifference_:function Hdt(t,n){let e=fe(t,"a","squaredDifference"),i=fe(n,"b","squaredDifference");return[e,i]=Ur(e,i),fi(e.shape,i.shape),Pe.runKernel(Yx,{a:e,b:i},{})}}),Vg=Oe({squeeze_:function Wdt(t,n){const e=fe(t,"x","squeeze","string_or_numeric");return Ge(e,Wp(e.shape,n).newShape)}}),Tl=Oe({stack_:function qdt(t,n=0){const e=YO(t,"tensors","stack","string_or_numeric");return le(e.length>=1,()=>"Pass at least one tensor to tf.stack"),e.length>0&&le(n<=e[0].rank,()=>"Axis must be <= rank of the tensor"),Pe.runKernel(xO,e,{axis:n})}}),k1=Oe({step_:function Kdt(t,n=0){const i={x:fe(t,"x","step")};return Pe.runKernel(tE,i,{alpha:n})}}),ime=Oe({stridedSlice_:function Xdt(t,n,e,i,s=0,r=0,o=0,a=0,l=0){const u={x:fe(t,"x","stridedSlice","string_or_numeric")};return Pe.runKernel(lz,u,{begin:n,end:e,strides:i,beginMask:s,endMask:r,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l})}}),sme=Oe({tan_:function Ydt(t){const e={x:fe(t,"x","tan","float32")};return Pe.runKernel(Qx,e)}});function Fa(t,n){s1(t);const e=Jp(t,n);if(1!==e.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return tm(t,null,e,n)}function zg(t,n,e){if(s1(t),null!=n&&2!==n.length)throw new Error("tensor2d() requires shape to have two numbers");const i=Jp(t,e);if(2!==i.length&&1!==i.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===i.length&&null==n)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return tm(t,n,i,e)}function Zdt(t,n,e){if(s1(t),null!=n&&4!==n.length)throw new Error("tensor4d() requires shape to have four numbers");const i=Jp(t,e);if(4!==i.length&&1!==i.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===i.length&&null==n)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return tm(t,n,i,e)}function Qdt(t,n,e){if(s1(t),null!=n&&5!==n.length)throw new Error("tensor5d() requires shape to have five numbers");const i=Jp(t,e);if(5!==i.length&&1!==i.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===i.length&&null==n)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return tm(t,n,i,e)}function Jdt(t,n,e){if(s1(t),null!=n&&6!==n.length)throw new Error("tensor6d() requires shape to have six numbers");const i=Jp(t,e);if(6!==i.length&&1!==i.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===i.length&&null==n)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return tm(t,n=n||i,i,e)}function rme(t,n,e){const i=n.rank>1?n.shape[n.rank-1]:1,s=n.rank>1?n.rank-1:1,r=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${e.shape}, indices.shape: ${n.shape}, shape: ${t}, sliceDim: ${i}, and batchDim: ${s}.`;if(e.rank<s)throw new Error(r+` update.rank < ${s}. `);if(t.length<i+(e.rank-s))throw new Error(r+` Output shape length < ${i+(e.rank-s)}`);if(e.rank!==s+t.length-i)throw new Error(r+" update.rank != "+(s+t.length-i));for(let o=0;o<s;++o)if(e.shape[o]!==n.shape[o])throw new Error(r+` updates.shape[${o}] (${e.shape[o]}) != indices.shape[${o}] (${n.shape[o]}).`);for(let o=0;o<e.rank-s;++o)if(e.shape[o+s]!==t[o+i])throw new Error(r+` updates.shape[${o+s}] (${e.shape[o+s]}) != shape[${o+s}] (${t[o+s]})`)}function $7(t,n,e){if(n.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${n.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if("int32"!==n.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${n.dtype}`);if(e.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${e}`);if(0===e.length){if(0===n.size)throw new Error(`Indices specified for empty output. indices shape: ${n.shape}`);if(0===t.size)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}rme(e,n,t)}function Ug(t,n,e){const i=n.shape.length,s=i>1?n.shape[i-1]:1,r=e.length;let o=1;for(let d=s;d<r;++d)o*=e[d];const a=s<1?1:s;return{sliceRank:s,numUpdates:at(n.shape)/a,sliceSize:o,strides:[...xn(e.slice(0,s)),1],outputSize:at(e)}}const tht=Oe({tensorScatterUpdate_:function eht(t,n,e){const i=fe(t,"tensor","tensorScatterupdate"),s=fe(n,"indices","tensorScatterupdate","int32"),r=fe(e,"updates","tensorScatterupdate");if($7(r,s,i.shape),i.dtype!==r.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${i.dtype} and ${r.dtype}.`);return Pe.runKernel(ez,{tensor:i,indices:s,updates:r},{})}}),ome=Oe({topk_:function nht(t,n=1,e=!0){const i=fe(t,"x","topk");if(0===i.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const s=i.shape[i.shape.length-1];if(n<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${n}`);if(n>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${n}`);const r={x:i},o={k:n,sorted:e},[a,l]=Pe.runKernel(hz,r,o);return{values:a,indices:l}}}),B7=Oe({truncatedNormal_:function iht(t,n=0,e=1,i,s){if(Fc(t),null!=i&&"bool"===i)throw new Error("Unsupported data type $ { dtype }");const r=new x7(n,e,i,!0,s),o=xi(t,i);for(let a=0;a<o.values.length;a++)o.values[a]=r.nextValue();return o.toTensor()}}),ame=Oe({unique_:function sht(t,n=0){const e=fe(t,"x","unique","string_or_numeric");le(e.rank>0,()=>"The input tensor must be at least 1D");const i={x:e},s={axis:n},[r,o]=Pe.runKernel(pz,i,s);return{values:r,indices:o}}}),V7=Oe({unsortedSegmentSum_:function rht(t,n,e){const i=fe(t,"x","unsortedSegmentSum"),s=fe(n,"segmentIds","unsortedSegmentSum","int32");return le(r1(e),()=>"numSegments must be of dtype int"),Pe.runKernel(VO,{x:i,segmentIds:s},{numSegments:e})}}),wu=Oe({unstack_:function oht(t,n=0){const e=fe(t,"x","unstack","string_or_numeric");return le(n>=-e.shape.length&&n<e.shape.length,()=>`Axis = ${n} is not in [-${e.shape.length}, ${e.shape.length})`),Pe.runKernel(BO,{value:e},{axis:n})}});function aht(t,n){return S7(t,n,"right")}function lme(t,n=!0,e,i){return Pe.makeVariable(t,n,e,i)}function z7(t,n){const e=[];for(let r=0;r<n.length;r++)n[r]&&e.push(r);const i=xi(t,"int32"),s=xi([e.length,t.length],"int32");for(let r=0;r<e.length;r++){const o=i.indexToLoc(e[r]);s.values.set(o,r*t.length)}return s.toTensor()}function U7(){return U7=de(function*(t){const n=fe(t,"condition","whereAsync","bool"),e=yield n.data(),i=z7(n.shape,e);return t!==n&&n.dispose(),i}),U7.apply(this,arguments)}const cme=function lht(t){return U7.apply(this,arguments)};function G7(){return G7=de(function*(t,n,e){const i=fe(t,"tensor","boolMask"),s=fe(n,"mask","boolMask","bool"),r=e??0,o=s.rank,a=i.shape;le(o>0,()=>"mask cannot be scalar"),tc(a.slice(r,r+o),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let g=r;g<r+o;g++)l*=a[g];const c=a.slice(0,r).concat([l],a.slice(r+o)),u=Ge(i,c),d=Ge(s,[-1]),h=yield cme(d),f=Vg(h,[1]),p=_E(u,f,r);return t!==i&&i.dispose(),n!==s&&s.dispose(),f.dispose(),u.dispose(),d.dispose(),h.dispose(),p}),G7.apply(this,arguments)}const uht=function cht(t,n,e){return G7.apply(this,arguments)},ss=Oe({transpose_:function dht(t,n,e){const i=fe(t,"x","transpose");if(null==n&&(n=i.shape.map((o,a)=>a).reverse()),le(i.rank===n.length,()=>`Error in transpose: rank of input ${i.rank} must match length of perm ${n}.`),n.forEach(o=>{le(o>=0&&o<i.rank,()=>`All entries in 'perm' must be between 0 and ${i.rank-1} but got ${n}`)}),i.rank<=1)return i.clone();const s={x:i},r={perm:n};return"complex64"===i.dtype?et(()=>{let o=bE(i),a=oN(i);return o=Pe.runKernel(u1,{x:o},r),a=Pe.runKernel(u1,{x:a},r),e&&(a=gr(a)),em(o,a)}):Pe.runKernel(u1,s,r)}}),fht=Oe({movingAverage_:function hht(t,n,e,i,s=!0){const r=fe(t,"v","movingAverage"),o=fe(n,"x","movingAverage"),a=fe(e,"decay","movingAverage");(function Lot(t,n){le(t.dtype===n.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${n.dtype}) input must match`)})(r,o),le(Qi(r.shape,o.shape),()=>"Shape mismatch in v and x");const l=En(1),c=tn(l,a);let u=Be(tn(o,r),c);if(s){le(null!=i,()=>"When using zeroDebias: true, step is required.");const d=fe(i,"step","movingAverage");u=vn(u,tn(l,Tf(a,d)))}return kt(r,u)}}),mht=Oe({scatterND_:function pht(t,n,e){Fc(e);const i=fe(t,"indices","scatterND","int32"),s=fe(n,"updates","scatterND");return $7(s,i,e),Pe.runKernel(JV,{indices:i,updates:s},{shape:e})}}),bht=Oe({sparseToDense_:function ght(t,n,e,i=0){Fc(e);const s=fe(t,"sparseIndices","sparseToDense","int32"),r=fe(n,"sparseValues","sparseToDense","string_or_numeric"),o=fe(i,"defaultValue","sparseToDense",r.dtype);return function _ht(t,n,e,i){if("int32"!==t.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const s=t.rank>0?t.shape[0]:1,r=t.rank>1?t.shape[1]:1;if(e.length!==r)throw new Error(`outputShape has incorrect number of elements:, ${e.length}, should be: ${r}.`);if(0!==n.rank&&(1!==n.rank||n.size!==s))throw new Error(`sparseValues has incorrect shape ${n.shape}, should be [] or [${s}]`);if(n.dtype!==i.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(s,r,e,o),Pe.runKernel(oz,{sparseIndices:s,sparseValues:r,defaultValue:o},{outputShape:e})}}),yht=Oe({gatherND_:function vht(t,n){const e=fe(n,"indices","gatherND","int32"),s={params:fe(t,"x","gatherND","string_or_numeric"),indices:e};return Pe.runKernel(RV,s)}}),ume=Oe({dropout_:function Sht(t,n,e,i){const s=fe(t,"x","dropout");if(le("float32"===s.dtype,()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),le(n>=0&&n<1,()=>`rate must be a float in the range [0, 1), but got ${n}.`),0===n)return t instanceof Ps?s.clone():s;const r=function wht(t,n){if(null==n)return t.shape.slice();if(Qi(t.shape,n))return n;if(t.shape.length===n.length){const e=[];for(let i=0;i<t.shape.length;i++)e.push(null==n[i]&&null!=t.shape[i]?t.shape[i]:n[i]);return e}return n}(s,e),o=1-n,a=vn(mE(kt(Bg(r,0,1,"float32",i),o)),o);return Be(s,a)}});function dme(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function j7(t,n,e){const i=1-t%2,s=new Float32Array(t);for(let r=0;r<t;++r){const o=2*Math.PI*r/(t+i-1);s[r]=n-e*Math.cos(o)}return Fa(s,"float32")}function H7(){return H7=de(function*(t,n,e=1){const i=fe(t,"predictions","inTopK"),s=fe(n,"targets","inTopK");le(i.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${i.rank}`),le(i.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${i.rank} and targets rank ${s.rank}`),tc(i.shape.slice(0,i.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const r=i.shape[i.shape.length-1];le(e>0&&e<=r,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${r}), but got ${e}`);const o=yield i.data(),a=yield s.data(),[l,c]=[o.length/r,r],u=ga("bool",l);for(let d=0;d<l;d++){const h=d*c,f=o.subarray(h,h+c),p=[];for(let g=0;g<f.length;g++)p.push({value:f[g],index:g});p.sort((g,v)=>v.value-g.value),u[d]=0;for(let g=0;g<e;g++)if(p[g].index===a[d]){u[d]=1;break}}return t!==i&&i.dispose(),n!==s&&s.dispose(),$c(u,s.shape,"bool")}),H7.apply(this,arguments)}const xht=function Cht(t,n){return H7.apply(this,arguments)},W7=Oe({conv2DBackpropFilter_:function Eht(t,n,e,i,s,r="NHWC",o){let a=t;3===t.rank&&(a=Ge(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=n;3===l.rank&&(l=Ge(n,[1,n.shape[0],n.shape[1],n.shape[2]])),le(4===a.rank,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),le(4===l.rank,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),le(4===e.length,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${e}.`);const c="NHWC"===r?a.shape[3]:a.shape[1],u="NHWC"===r?l.shape[3]:l.shape[1];return le(c===e[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${e[2]}.`),le(u===e[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${e[3]}).`),Ja("conv2dDerFilter",s,o),Pe.runKernel(_V,{x:a,dy:l},{strides:i,pad:s,dataFormat:r,dimRoundingMode:o,filterShape:e})}});function wN(t,n,e){if(null==e||"linear"===e)return t;if("relu"===e)return Be(t,k1(n));throw new Error(`Cannot compute gradient for fused activation ${e}.`)}function SN(t,n){let e=n;const i=Oo(t.shape,n.shape);return i.length>0&&(e=_n(e,i)),Ge(e,t.shape)}function CN(t,n,e,i){if("linear"===n)return t;if("relu"===n)return mh(t);if("elu"===n)return hE(t);if("relu6"===n)return I7(t);if("prelu"===n)return mN(t,e);if("leakyrelu"===n)return aN(t,i);if("sigmoid"===n)return fh(t);throw new Error(`Unknown fused activation ${n}.`)}const xN=(t,n)=>!(t>0)||"linear"===n,hme=Oe({fusedConv2d_:function Tht({x:t,filter:n,strides:e,pad:i,dataFormat:s="NHWC",dilations:r=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(!1===xN(Pe.state.gradientDepth,l=l||"linear")){le("NHWC"===s,()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let W=am(t,n,e,i,s,r,o);return null!=a&&(W=kt(W,a)),CN(W,l,c,u)}const d=fe(t,"x","conv2d","float32"),h=fe(n,"filter","conv2d","float32");let f=d,p=!1;3===d.rank&&(p=!0,f=Ge(d,[1,d.shape[0],d.shape[1],d.shape[2]])),le(4===f.rank,()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`),le(4===h.rank,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),Ja("fused conv2d",i,o);const g="NHWC"===s?f.shape[3]:f.shape[1];le(h.shape[2]===g,()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${h.shape[2]}.`),le(va(e,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${r}'`);const v=Jo(f.shape,h.shape,e,r,i,o);let y,w;if(null!=a&&(y=fe(a,"bias","fused conv2d"),[y]=Ur(y,d),"NHWC"===s?fi(v.outShape,y.shape):(le(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),le(0===y.shape.length||y.shape[0]===v.outChannels||1===y.shape[0],()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${v.outChannels})`))),null!=c){const W=c.shape;if(le(W.length<=1||3===W.length,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${W.length}.`),1===W.length)le(1===W[0]||W[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${W}) is not compatible with the number of output channels (${v.outChannels}).`);else if(3===W.length)try{fi(W,v.outShape)}catch{throw Error(`Error in fused conv2d: PReLU activation weights (${W}) is not compatible with the output shape of the conv2d (${v.outShape}).`)}w=fe(c,"prelu weights","fused conv2d")}const E=(W,H)=>{le("NHWC"===s,()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[P,X,ne,me]=H,Ee=wN(W,ne,l);le(om(r),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const Xe=[h7(X.shape,Ee,P,e,i),W7(X,Ee,P.shape,e,i)];if(null!=me){const Ce=SN(me,Ee);Xe.push(Ce)}return Xe},T={x:f,filter:h,bias:y,preluActivationWeights:w},L={strides:e,pad:i,dataFormat:s,dilations:r,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return null==a?Ef((H,P,X)=>{let ne=Pe.runKernel(GO,T,L);return X([P,H,ne]),p&&(ne=Ge(ne,[ne.shape[1],ne.shape[2],ne.shape[3]])),{value:ne,gradFunc:E}})(f,h):Ef((H,P,X,ne)=>{let me=Pe.runKernel(GO,T,L);return ne([P,H,me,X]),p&&(me=Ge(me,[me.shape[1],me.shape[2],me.shape[3]])),{value:me,gradFunc:E}})(f,h,y)}}),fme=Oe({depthwiseConv2dNativeBackpropFilter_:function Iht(t,n,e,i,s,r=[1,1],o){let a=t;3===t.rank&&(a=Ge(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=n;return 3===l.rank&&(l=Ge(n,[1,n.shape[0],n.shape[1],n.shape[2]])),Pe.runKernel(CV,{x:a,dy:l},{strides:i,pad:s,dimRoundingMode:o,dilations:r,filterShape:e})}}),pme=Oe({depthwiseConv2dNativeBackpropInput_:function kht(t,n,e,i,s,r=[1,1],o){let a=n,l=!1;3===n.rank&&(l=!0,a=Ge(n,[1,n.shape[0],n.shape[1],n.shape[2]]));const d=Pe.runKernel(xV,{dy:a,filter:e},{strides:i,pad:s,dimRoundingMode:o,dilations:r,inputShape:t});return l?Ge(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),Mht=Oe({fusedDepthwiseConv2d_:function Dht({x:t,filter:n,strides:e,pad:i,dataFormat:s="NHWC",dilations:r=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(!1===xN(Pe.state.gradientDepth,l)){let L=dE(t,n,e,i,s,r,o);return null!=a&&(L=kt(L,a)),CN(L,l,c,u)}const d=fe(t,"x","depthwiseConv2d","float32"),h=fe(n,"filter","depthwiseConv2d","float32");let f=d,p=!1;3===d.rank&&(p=!0,f=Ge(d,[1,d.shape[0],d.shape[1],d.shape[2]])),le(4===f.rank,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`),le(4===h.rank,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`),le(f.shape[3]===h.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`),null==r&&(r=[1,1]),le(va(e,r),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${e} and dilations '${r}'`),Ja("fused depthwiseConv2d",i,o);const g=Jo(f.shape,h.shape,e,r,i,o,!0);let v,y;null!=a&&(v=fe(a,"bias","fused conv2d"),[v]=Ur(v,d),fi(g.outShape,v.shape)),null!=c&&(y=fe(c,"prelu weights","fused depthwiseConv2d"));const w=(L,W)=>{le(om(r),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${r}'`);const[H,P,X,ne]=W,me=wN(L,X,l),Ee=pme(P.shape,me,H,e,i,r,o),Te=fme(P,me,H.shape,e,i,r,o);return null!=ne?[Ee,Te,SN(v,me)]:[Ee,Te]},E={x:f,filter:h,bias:v,preluActivationWeights:y},T={strides:e,pad:i,dataFormat:s,dilations:r,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return null==a?Ef((W,H,P)=>{let X=Pe.runKernel(jO,E,T);return P([H,W,X]),p&&(X=Ge(X,[X.shape[1],X.shape[2],X.shape[3]])),{value:X,gradFunc:w}})(f,h):Ef((W,H,P,X)=>{let ne=Pe.runKernel(jO,E,T);return X([H,W,ne,P]),p&&(ne=Ge(ne,[ne.shape[1],ne.shape[2],ne.shape[3]])),{value:ne,gradFunc:w}})(f,h,v)}}),q7=Oe({fusedMatMul_:function Aht({a:t,b:n,transposeA:e=!1,transposeB:i=!1,bias:s,activation:r="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(!1===xN(Pe.state.gradientDepth,r)){let me=Ui(t,n,e,i);return null!=s&&(me=kt(me,s)),CN(me,r,o,a)}let l=fe(t,"a","fused matMul"),c=fe(n,"b","fused matMul");[l,c]=Ur(l,c);const u=e?l.shape[l.rank-2]:l.shape[l.rank-1],d=i?c.shape[c.rank-1]:c.shape[c.rank-2],h=e?l.shape[l.rank-1]:l.shape[l.rank-2],f=i?c.shape[c.rank-2]:c.shape[c.rank-1],p=l.shape.slice(0,-2),g=c.shape.slice(0,-2),v=at(p),y=at(g);le(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${e} and transposeB=${i} must match.`);const E=fi(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([h,f]),T=Ge(l,e?[v,u,h]:[v,h,u]),L=Ge(c,i?[y,f,d]:[y,d,f]);let W,H;null!=s&&(W=fe(s,"bias","fused matMul"),[W]=Ur(W,l),fi(E,W.shape)),null!=o&&(H=fe(o,"prelu weights","fused matMul"));const P=(me,Ee)=>{const[Te,$e,Xe,Ce]=Ee,Fe=wN(Ge(me,Xe.shape),Xe,r);let Ie,He;return e||i?!e&&i?(Ie=Ui(Fe,$e,!1,!1),He=Ui(Fe,Te,!0,!1)):e&&!i?(Ie=Ui($e,Fe,!1,!0),He=Ui(Te,Fe,!1,!1)):(Ie=Ui($e,Fe,!0,!0),He=Ui(Fe,Te,!0,!0)):(Ie=Ui(Fe,$e,!1,!0),He=Ui(Te,Fe,!0,!1)),null!=s?[Ie,He,SN(Ce,Fe)]:[Ie,He]},X={a:T,b:L,bias:W,preluActivationWeights:H},ne={transposeA:e,transposeB:i,activation:r,leakyreluAlpha:a};return null==s?Ef((Ee,Te,$e)=>{const Xe=Pe.runKernel(UO,X,ne);return $e([Ee,Te,Xe]),{value:Ge(Xe,E),gradFunc:P}})(T,L):Ef((Ee,Te,$e,Xe)=>{const Ce=Pe.runKernel(UO,X,ne);return Xe([Ee,Te,Ce,$e]),{value:Ge(Ce,E),gradFunc:P}})(T,L,W)}}),Nht=Oe({hammingWindow_:function Oht(t){return j7(t,.54,.46)}}),mme=Oe({hannWindow_:function Rht(t){return j7(t,.5,.5)}}),_me=Oe({frame_:function Fht(t,n,e,i=!1,s=0){let r=0;const o=[];for(;r+n<=t.size;)o.push(is(t,r,n)),r+=e;if(i)for(;r<t.size;){const a=r+n-t.size,l=Xr([is(t,r,n-a),b1([a],s)]);o.push(l),r+=e}return 0===o.length?zg([],[0,n]):Ge(Xr(o),[o.length,n])}}),Pht=Oe({stft_:function Lht(t,n,e,i,s=mme){null==i&&(i=dme(n));const r=_me(t,n,e),o=Be(r,s(n));return yN(o,i)}}),Bht=Oe({cropAndResize_:function $ht(t,n,e,i,s="bilinear",r=0){const o=fe(t,"image","cropAndResize"),a=fe(n,"boxes","cropAndResize","float32"),l=fe(e,"boxInd","cropAndResize","int32"),c=a.shape[0];return le(4===o.rank,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),le(2===a.rank&&4===a.shape[1],()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),le(1===l.rank&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),le(2===i.length,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${i.length}.`),le(i[0]>=1&&i[1]>=1,()=>`cropSize must be atleast [1,1], but was ${i}`),le("bilinear"===s||"nearest"===s,()=>`method must be bilinear or nearest, but was ${s}`),Pe.runKernel(yV,{image:o,boxes:a,boxInd:l},{method:s,extrapolationValue:r,cropSize:i})}}),zht=Oe({flipLeftRight_:function Vht(t){const n=fe(t,"image","flipLeftRight","float32");return le(4===n.rank,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${n.rank}.`),Pe.runKernel(NV,{image:n},{})}}),Ght=Oe({grayscaleToRGB_:function Uht(t){const n=fe(t,"image","grayscaleToRGB"),e=n.rank-1,i=n.shape[e];le(n.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${n.rank}.`),le(1===i,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${i}.`);const s=new Array(n.rank);return s.fill(1,0,e),s[e]=3,vu(n,s)}}),Hht=Oe({rgbToGrayscale_:function jht(t){const n=fe(t,"image","RGBToGrayscale"),i=n.shape[n.rank-1];le(n.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${n.rank}.`),le(3===i,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${i}.`);const s=n.dtype,r=Ht(n,"float32"),o=Fa([.2989,.587,.114]);let a;switch(n.rank){case 2:a=C1("ij,j->i",r,o);break;case 3:a=C1("ijk,k->ij",r,o);break;case 4:a=C1("ijkl,l->ijk",r,o);break;case 5:a=C1("ijklm,m->ijkl",r,o);break;case 6:a=C1("ijklmn,n->ijklm",r,o);break;default:throw new Error("Not a valid tensor rank.")}return a=Ra(a,-1),Ht(a,s)}}),qht=Oe({rotateWithOffset_:function Wht(t,n,e=0,i=.5){const s=fe(t,"image","rotateWithOffset","float32");return le(4===s.rank,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`),Pe.runKernel(_z,{image:s},{radians:n,fillValue:e,center:i})}});function D1(t,n,e,i,s,r){null==i&&(i=.5),null==s&&(s=Number.NEGATIVE_INFINITY),null==r&&(r=0);const o=t.shape[0];return e=Math.min(e,o),le(0<=i&&i<=1,()=>`iouThreshold must be in [0, 1], but was '${i}'`),le(2===t.rank,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),le(4===t.shape[1],()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),le(1===n.rank,()=>"scores must be a 1D tensor"),le(n.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${n.shape[0]}`),le(0<=r&&r<=1,()=>`softNmsSigma must be in [0, 1], but was '${r}'`),{maxOutputSize:e,iouThreshold:i,scoreThreshold:s,softNmsSigma:r}}const Xht=Oe({nonMaxSuppression_:function Kht(t,n,e,i=.5,s=Number.NEGATIVE_INFINITY){const r=fe(t,"boxes","nonMaxSuppression","float32"),o=fe(n,"scores","nonMaxSuppression","float32"),a=D1(r,o,e,i,s);return Pe.runKernel(GV,{boxes:r,scores:o},{maxOutputSize:e=a.maxOutputSize,iouThreshold:i=a.iouThreshold,scoreThreshold:s=a.scoreThreshold})}});function Yht(t,n,e){const i=function Zht(t,n,e){return function Jht(t,n,e){let i=0,s=t.length,r=0,o=!1;for(;i<s;){r=i+(s-i>>>1);const a=e(n,t[r]);a>0?i=r+1:(s=r,o=!a)}return o?i:-i-1}(t,n,e||Qht)}(t,n,e);t.splice(i<0?-(i+1):i,0,n)}function Qht(t,n){return t>n?1:t<n?-1:0}function K7(t,n,e,i,s){return Z7(t,n,e,i,s,0)}function X7(t,n,e,i,s,r){return Z7(t,n,e,i,s,0,!1,r,!0)}function Y7(t,n,e,i,s,r){return Z7(t,n,e,i,s,r,!0)}function Z7(t,n,e,i,s,r,o=!1,a=!1,l=!1){const c=[];for(let v=0;v<n.length;v++)n[v]>s&&c.push({score:n[v],boxIndex:v,suppressBeginIndex:0});c.sort(gme);const u=r>0?-.5/r:0,d=[],h=[];for(;d.length<e&&c.length>0;){const v=c.pop(),{score:y,boxIndex:w,suppressBeginIndex:E}=v;if(y<s)break;let T=!1;for(let L=d.length-1;L>=E;--L){const W=eft(t,w,d[L]);if(W>=i){T=!0;break}if(v.score=v.score*tft(i,u,W),v.score<=s)break}v.suppressBeginIndex=d.length,T||(v.score===y?(d.push(w),h.push(v.score)):v.score>s&&Yht(c,v,gme))}const f=d.length,p=e-f;a&&p>0&&(d.push(...new Array(p).fill(0)),h.push(...new Array(p).fill(0)));const g={selectedIndices:d};return o&&(g.selectedScores=h),l&&(g.validOutputs=f),g}function eft(t,n,e){const i=t.subarray(4*n,4*n+4),s=t.subarray(4*e,4*e+4),r=Math.min(i[0],i[2]),o=Math.min(i[1],i[3]),a=Math.max(i[0],i[2]),l=Math.max(i[1],i[3]),c=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),d=Math.max(s[0],s[2]),h=Math.max(s[1],s[3]),f=(a-r)*(l-o),p=(d-c)*(h-u);if(f<=0||p<=0)return 0;const g=Math.max(r,c),v=Math.max(o,u),y=Math.min(a,d),w=Math.min(l,h),E=Math.max(y-g,0)*Math.max(w-v,0);return E/(f+p-E)}function tft(t,n,e){const i=Math.exp(n*e*e);return e<=t?i:0}function gme(t,n){return t.score-n.score||t.score===n.score&&n.boxIndex-t.boxIndex}function Q7(){return Q7=de(function*(t,n,e,i=.5,s=Number.NEGATIVE_INFINITY){const r=fe(t,"boxes","nonMaxSuppressionAsync"),o=fe(n,"scores","nonMaxSuppressionAsync"),a=D1(r,o,e,i,s);e=a.maxOutputSize,i=a.iouThreshold,s=a.scoreThreshold;const l=yield Promise.all([r.data(),o.data()]),c=l[0],u=l[1],{selectedIndices:d}=K7(c,u,e,i,s);return r!==t&&r.dispose(),o!==n&&o.dispose(),Fa(d,"int32")}),Q7.apply(this,arguments)}const rft=Oe({nonMaxSuppressionWithScore_:function sft(t,n,e,i=.5,s=Number.NEGATIVE_INFINITY,r=0){const o=fe(t,"boxes","nonMaxSuppression"),a=fe(n,"scores","nonMaxSuppression"),l=D1(o,a,e,i,s,r),d=Pe.runKernel(HV,{boxes:o,scores:a},{maxOutputSize:e=l.maxOutputSize,iouThreshold:i=l.iouThreshold,scoreThreshold:s=l.scoreThreshold,softNmsSigma:r=l.softNmsSigma});return{selectedIndices:d[0],selectedScores:d[1]}}});function J7(){return J7=de(function*(t,n,e,i=.5,s=Number.NEGATIVE_INFINITY,r=0){const o=fe(t,"boxes","nonMaxSuppressionAsync"),a=fe(n,"scores","nonMaxSuppressionAsync"),l=D1(o,a,e,i,s,r);e=l.maxOutputSize,i=l.iouThreshold,s=l.scoreThreshold,r=l.softNmsSigma;const c=yield Promise.all([o.data(),a.data()]),u=c[0],d=c[1],{selectedIndices:h,selectedScores:f}=Y7(u,d,e,i,s,r);return o!==t&&o.dispose(),a!==n&&a.dispose(),{selectedIndices:Fa(h,"int32"),selectedScores:Fa(f)}}),J7.apply(this,arguments)}const cft=Oe({nonMaxSuppressionPadded_:function lft(t,n,e,i=.5,s=Number.NEGATIVE_INFINITY,r=!1){const o=fe(t,"boxes","nonMaxSuppression"),a=fe(n,"scores","nonMaxSuppression"),l=D1(o,a,e,i,s,null),p=Pe.runKernel(jV,{boxes:o,scores:a},{maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:r});return{selectedIndices:p[0],validOutputs:p[1]}}});function e9(){return e9=de(function*(t,n,e,i=.5,s=Number.NEGATIVE_INFINITY,r=!1){const o=fe(t,"boxes","nonMaxSuppressionAsync"),a=fe(n,"scores","nonMaxSuppressionAsync"),l=D1(o,a,e,i,s,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[h,f]=yield Promise.all([o.data(),a.data()]),{selectedIndices:p,validOutputs:g}=X7(h,f,c,u,d,r);return o!==t&&o.dispose(),a!==n&&a.dispose(),{selectedIndices:Fa(p,"int32"),validOutputs:En(g,"int32")}}),e9.apply(this,arguments)}const bme=Oe({resizeBilinear_:function hft(t,n,e=!1,i=!1){const s=fe(t,"images","resizeBilinear");le(3===s.rank||4===s.rank,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),le(2===n.length,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${n}.`),le(!1===i||!1===e,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let r=s,o=!1;3===s.rank&&(o=!0,r=Ge(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const[]=n,c=Pe.runKernel(MO,{images:r},{alignCorners:e,halfPixelCenters:i,size:n});return o?Ge(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),vme=Oe({resizeNearestNeighbor_:function fft(t,n,e=!1,i=!1){const s=fe(t,"images","resizeNearestNeighbor");le(3===s.rank||4===s.rank,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),le(2===n.length,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${n}.`),le("float32"===s.dtype||"int32"===s.dtype,()=>"`images` must have `int32` or `float32` as dtype"),le(!1===i||!1===e,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let r=s,o=!1;3===s.rank&&(o=!0,r=Ge(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const[]=n,c=Pe.runKernel(DO,{images:r},{alignCorners:e,halfPixelCenters:i,size:n});return o?Ge(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),_ft=Oe({threshold_:function pft(t,n="binary",e=!1,i=.5){const s=fe(t,"image","threshold"),l=s.shape[0]*s.shape[1];let u,d,h,f,c=Be(Fa([i]),255);if(le(3===s.rank,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),le(3===s.shape[2]||1===s.shape[2],()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),le("int32"===s.dtype||"float32"===s.dtype,()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),le("otsu"===n||"binary"===n,()=>`Method must be binary or otsu, but was ${n}`),3===s.shape[2]){[u,d,h]=ac(s,[1,1,1],-1);const v=Be(u,.2989),y=Be(d,.587),w=Be(h,.114);f=kt(kt(v,y),w)}else f=t;"otsu"===n&&(c=function mft(t,n){let r,o,a,l,c,u,e=Fa([-1]),i=Fa([0]),s=Fa([0]);for(let d=0;d<t.size-1;d++){r=is(t,0,d+1),o=is(t,d+1),c=vn(_n(r),n),u=vn(_n(o),n);const h=_n(Be(r,I1(0,r.size)));a=vn(h,_n(r));const f=b1(o.shape,r.size),p=kt(I1(0,o.size),f),g=Be(o,p);l=vn(_n(g),_n(o));const v=tn(a,l),y=tn(a,l),w=Be(c,u);s=Be(Be(w,v),y);const E=rc(s,i);i=Na(E,s,i),e=Na(E,Fa([d]),e)}return e}(Ipe(Ht(k7(f),"int32"),$c([]),256),l));const p=e?Pg(f,c):rc(f,c);return Ht(Be(p,255),"int32")}}),bft=Oe({transform_:function gft(t,n,e="nearest",i="constant",s=0,r){const o=fe(t,"image","transform","float32"),a=fe(n,"transforms","transform","float32");return le(4===o.rank,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),le(2===a.rank&&(a.shape[0]===o.shape[0]||1===a.shape[0])&&8===a.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),le(null==r||2===r.length,()=>`Error in transform: outputShape must be [height, width] or null, but got ${r}.`),Pe.runKernel(fz,{image:o,transforms:a},{interpolation:e,fillMode:i,fillValue:s,outputShape:r})}}),yft=Oe({bandPart_:function vft(t,n,e){const i=fe(t,"a","bandPart");le(i.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${i.rank}.`);const s=i.shape,[r,o]=i.shape.slice(-2);let a,l;"number"==typeof n?(le(n%1==0,()=>`bandPart(): numLower must be an integer, got ${n}.`),le(n<=r,()=>`bandPart(): numLower (${n}) must not be greater than the number of rows (${r}).`),a=fe(n<0?r:n,"numLower","bandPart")):(le("int32"===n.dtype,()=>"bandPart(): numLower's dtype must be an int32."),a=Na(gE(n,0),r,$g(n,r))),"number"==typeof e?(le(e%1==0,()=>`bandPart(): numUpper must be an integer, got ${e}.`),le(e<=o,()=>`bandPart(): numUpper (${e}) must not be greater than the number of columns (${o}).`),l=fe(e<0?o:e,"numUpper","bandPart")):(le("int32"===e.dtype,()=>"bandPart(): numUpper's dtype must be an int32."),l=Na(gE(e,0),o,$g(e,o)));const c=Ge(I1(0,r,1,"int32"),[-1,1]),u=I1(0,o,1,"int32"),d=tn(c,u),h=ph(Pg(d,a),cm(d,gr(l))),f=No([r,o],i.dtype);return Ge(Tl(wu(Ge(i,[-1,r,o])).map(p=>Na(h,p,f))),s)}}),Sft=Oe({gramSchmidt_:function wft(t){let n;if(Array.isArray(t)){n=!1,le(null!=t&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let r=1;r<t.length;++r)le(t[r].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[r].shape[0]} vs. ${s})`)}else n=!0,t=ac(t,t.shape[0],0).map(s=>Vg(s,[0]));le(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const e=[],i=t;for(let s=0;s<t.length;++s)e.push(Pe.tidy(()=>{let r=i[s];if(s>0)for(let o=0;o<s;++o){const a=Be(_n(Be(e[o],r)),e[o]);r=tn(r,a)}return vn(r,pE(r,"euclidean"))}));return n?Tl(e,0):e}});function yme(t,n=!1){return Pe.tidy(()=>{le(2===t.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const e=t.shape[0],i=t.shape[1];let s=v7(e),r=xf(t);const o=zg([[1]],[1,1]);let a=xf(o);const l=e>=i?i:e;for(let c=0;c<l;++c){const u=r,d=a,h=s;[a,r,s]=Pe.tidy(()=>{const f=is(r,[c,c],[e-c,1]),p=pE(f),g=is(r,[c,c],[1,1]),v=Na(rc(g,0),zg([[-1]]),zg([[1]])),y=tn(g,Be(v,p)),w=vn(f,y);a=1===w.shape[0]?xf(o):Xr([o,is(w,[1,0],[w.shape[0]-1,w.shape[1]])],0);const E=gr(vn(Ui(v,y),p)),T=is(r,[c,0],[e-c,i]),L=Be(E,a),W=ss(a);if(0===c)r=tn(T,Ui(L,Ui(W,T)));else{const X=tn(T,Ui(L,Ui(W,T)));r=Xr([is(r,[0,0],[c,i]),X],0)}const H=ss(L),P=is(s,[0,c],[e,s.shape[1]-c]);if(0===c)s=tn(P,Ui(Ui(P,a),H));else{const X=tn(P,Ui(Ui(P,a),H));s=Xr([is(s,[0,0],[e,c]),X],1)}return[a,r,s]}),Ci([u,d,h])}return!n&&e>i&&(s=is(s,[0,0],[e,i]),r=is(r,[0,0],[i,i])),[s,r]})}const xft=Oe({qr_:function Cft(t,n=!1){if(le(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),2===t.rank)return yme(t,n);{const e=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),i=wu(Ge(t,[e,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],r=[];return i.forEach(l=>{const[c,u]=yme(l,n);s.push(c),r.push(u)}),[Ge(Tl(s,0),t.shape),Ge(Tl(r,0),t.shape)]}}});var lc=function(t){return t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",t}(lc||{});const Mf=Oe({computeWeightedLoss_:function Eft(t,n,e=lc.SUM_BY_NONZERO_WEIGHTS){const i=fe(t,"losses","computeWeightedLoss");let s=null;null!=n&&(s=fe(n,"weights","computeWeightedLoss"));const r=null==s?i:Be(i,s);if(e===lc.NONE)return r;if(e===lc.SUM)return _n(r);if(e===lc.MEAN){if(null==s)return Gr(r);{const o=i.size/s.size,a=vn(_n(r),_n(s));return o>1?vn(a,En(o)):a}}if(e===lc.SUM_BY_NONZERO_WEIGHTS){if(null==s)return vn(_n(r),En(i.size));{const o=Be(s,oc(i.shape)),a=Ht(_n(E1(o,En(0))),"float32");return vn(_n(r),a)}}throw Error(`Unknown reduction: ${e}`)}}),Ift=Oe({absoluteDifference_:function Tft(t,n,e,i=lc.SUM_BY_NONZERO_WEIGHTS){const s=fe(t,"labels","absoluteDifference"),r=fe(n,"predictions","absoluteDifference");let o=null;null!=e&&(o=fe(e,"weights","absoluteDifference")),tc(s.shape,r.shape,"Error in absoluteDifference: ");const a=Ao(tn(s,r));return Mf(a,o,i)}}),Dft=Oe({cosineDistance_:function kft(t,n,e,i,s=lc.SUM_BY_NONZERO_WEIGHTS){const r=fe(t,"labels","cosineDistance"),o=fe(n,"predictions","cosineDistance");let a=null;null!=i&&(a=fe(i,"weights","cosineDistance")),tc(r.shape,o.shape,"Error in cosineDistance: ");const l=En(1),c=tn(l,_n(Be(r,o),e,!0));return Mf(c,a,s)}}),Aft=Oe({hingeLoss_:function Mft(t,n,e,i=lc.SUM_BY_NONZERO_WEIGHTS){let s=fe(t,"labels","hingeLoss");const r=fe(n,"predictions","hingeLoss");let o=null;null!=e&&(o=fe(e,"weights","hingeLoss")),tc(s.shape,r.shape,"Error in hingeLoss: ");const a=En(1);s=tn(Be(En(2),s),a);const l=mh(tn(a,Be(s,r)));return Mf(l,o,i)}}),Nft=Oe({huberLoss_:function Oft(t,n,e,i=1,s=lc.SUM_BY_NONZERO_WEIGHTS){const r=fe(t,"labels","huberLoss"),o=fe(n,"predictions","huberLoss");let a=null;null!=e&&(a=fe(e,"weights","huberLoss")),tc(r.shape,o.shape,"Error in huberLoss: ");const l=En(i),c=Ao(tn(o,r)),u=$g(c,l),d=tn(c,u),h=kt(Be(En(.5),tr(u)),Be(l,d));return Mf(h,a,s)}}),Fft=Oe({logLoss_:function Rft(t,n,e,i=1e-7,s=lc.SUM_BY_NONZERO_WEIGHTS){const r=fe(t,"labels","logLoss"),o=fe(n,"predictions","logLoss");let a=null;null!=e&&(a=fe(e,"weights","logLoss")),tc(r.shape,o.shape,"Error in logLoss: ");const l=En(1),c=En(i),u=gr(Be(r,Bc(kt(o,c)))),d=Be(tn(l,r),Bc(kt(tn(l,o),c))),h=tn(u,d);return Mf(h,a,s)}}),Pft=Oe({meanSquaredError_:function Lft(t,n,e,i=lc.SUM_BY_NONZERO_WEIGHTS){const s=fe(t,"labels","meanSquaredError"),r=fe(n,"predictions","meanSquaredError");let o=null;null!=e&&(o=fe(e,"weights","meanSquaredError")),tc(s.shape,r.shape,"Error in meanSquaredError: ");const a=P7(s,r);return Mf(a,o,i)}}),Vft=Oe({sigmoidCrossEntropy_:function Bft(t,n,e,i=0,s=lc.SUM_BY_NONZERO_WEIGHTS){let r=fe(t,"multiClassLabels","sigmoidCrossEntropy");const o=fe(n,"logits","sigmoidCrossEntropy");let a=null;if(null!=e&&(a=fe(e,"weights","sigmoidCrossEntropy")),tc(r.shape,o.shape,"Error in sigmoidCrossEntropy: "),i>0){const c=En(i),u=En(1),d=En(.5);r=kt(Be(r,tn(u,c)),Be(d,c))}const l=function $ft(t,n){const e=fe(t,"labels","sigmoidCrossEntropyWithLogits"),i=fe(n,"logits","sigmoidCrossEntropyWithLogits");tc(e.shape,i.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=mh(i),r=Be(i,e),o=lN(sc(gr(Ao(i))));return kt(tn(s,r),o)}(r,o);return Mf(l,a,s)}}),Gft=Oe({softmaxCrossEntropy_:function Uft(t,n,e,i=0,s=lc.SUM_BY_NONZERO_WEIGHTS){let r=fe(t,"onehotLabels","softmaxCrossEntropy");const o=fe(n,"logits","softmaxCrossEntropy");let a=null;if(null!=e&&(a=fe(e,"weights","softmaxCrossEntropy")),tc(r.shape,o.shape,"Error in softmaxCrossEntropy: "),i>0){const c=En(i),u=En(1),d=En(r.shape[1]);r=kt(Be(r,tn(u,c)),vn(c,d))}const l=function zft(t,n,e=-1){if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${n.rank} and dim was ${e}`);return Ef((s,r,o)=>{const l=cN(r,[e],!0),c=tn(Ht(r,"float32"),l);o([s,c]);const u=gr(Be(c,s));return{value:_n(u,[e]),gradFunc:(f,p)=>{const[g,v]=p,y=Yr(f.shape,[e]);return[Be(Ge(f,y),tn(Ht(g,"float32"),sc(v))),Be(Ge(f,y),tn(sc(v),Ht(g,"float32")))]}}})(t,n)}(r,o);return Mf(l,a,s)}}),Hft=Oe({sparseFillEmptyRows_:function jft(t,n,e,i){const s=fe(t,"indices","sparseFillEmptyRows","int32"),r=fe(n,"values","sparseFillEmptyRows"),o=fe(e,"denseShape","sparseFillEmptyRows","int32"),a=fe(i,"defaultValue","sparseFillEmptyRows",r.dtype);if(2!==s.rank)throw new Error(`Indices should be Tensor2D but received shape\n        ${s.shape}`);if(1!==r.rank)throw new Error(`Values should be Tensor1D but received shape ${r.shape}`);if(1!==o.rank)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(0!==a.rank)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const c=Pe.runKernel(nz,{indices:s,values:r,denseShape:o,defaultValue:a});return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}}),qft=Oe({sparseReshape_:function Wft(t,n,e){const i=fe(t,"inputIndices","sparseReshape","int32"),s=fe(n,"inputShape","sparseReshape","int32"),r=fe(e,"newShape","sparseReshape","int32");if(2!==i.rank)throw new Error(`Input indices should be Tensor2D but received shape\n        ${i.shape}`);if(1!==s.rank)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(1!==r.rank)throw new Error(`New shape should be Tensor1D but received shape ${r.shape}`);const a=Pe.runKernel(iz,{inputIndices:i,inputShape:s,newShape:r});return{outputIndices:a[0],outputShape:a[1]}}}),Xft=Oe({sparseSegmentMean_:function Kft(t,n,e){const i=fe(t,"data","sparseSegmentMean"),s=fe(n,"indices","sparseSegmentMean","int32"),r=fe(e,"segmentIds","sparseSegmentMean","int32");if(i.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.rank)throw new Error(`Indices should be Tensor1D but received shape\n          ${s.shape}`);if(1!==r.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n          ${r.shape}`);return Pe.runKernel(sz,{data:i,indices:s,segmentIds:r})}}),Zft=Oe({sparseSegmentSum_:function Yft(t,n,e){const i=fe(t,"data","sparseSegmentSum"),s=fe(n,"indices","sparseSegmentSum","int32"),r=fe(e,"segmentIds","sparseSegmentSum","int32");if(i.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.rank)throw new Error(`Indices should be Tensor1D but received shape\n         ${s.shape}`);if(1!==r.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n         ${r.shape}`);return Pe.runKernel(rz,{data:i,indices:s,segmentIds:r})}}),Jft=Oe({stringNGrams_:function Qft(t,n,e,i,s,r,o,a){const l=fe(t,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error(`Data must be a vector, saw: ${l.shape}`);const c=fe(n,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");const h=Pe.runKernel(cz,{data:l,dataSplits:c},{separator:e,nGramWidths:i,leftPad:s,rightPad:r,padWidth:o,preserveShortSequences:a});return{nGrams:h[0],nGramsSplits:h[1]}}}),tpt=Oe({stringSplit_:function ept(t,n,e=!0){const i=fe(t,"input","stringSplit","string"),s=fe(n,"delimiter","stringSplit","string");if(1!==i.rank)throw new Error(`Input should be Tensor1D but received shape ${i.shape}`);if(0!==s.rank)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const a=Pe.runKernel(uz,{input:i,delimiter:s},{skipEmpty:e});return{indices:a[0],values:a[1],shape:a[2]}}}),ipt=Oe({stringToHashBucketFast_:function npt(t,n){const e=fe(t,"input","stringToHashBucketFast","string"),i={numBuckets:n};if(n<=0)throw new Error("Number of buckets must be at least 1");return Pe.runKernel(dz,{input:e},i)}}),rpt=Oe({staticRegexReplace_:function spt(t,n,e,i=!0){const s=fe(t,"input","staticRegexReplace","string");return Pe.runKernel($O,{x:s},{pattern:n,rewrite:e,replaceGlobal:i})}}),opt={fft:vN,ifft:yE,rfft:yN,irfft:L7},apt={hammingWindow:Nht,hannWindow:mme,frame:_me,stft:Pht},Su={flipLeftRight:zht,grayscaleToRGB:Ght,resizeNearestNeighbor:vme,resizeBilinear:bme,rgbToGrayscale:Hht,rotateWithOffset:qht,cropAndResize:Bht,nonMaxSuppression:Xht,nonMaxSuppressionAsync:function nft(t,n,e){return Q7.apply(this,arguments)},nonMaxSuppressionWithScore:rft,nonMaxSuppressionWithScoreAsync:function oft(t,n,e){return J7.apply(this,arguments)},nonMaxSuppressionPadded:cft,nonMaxSuppressionPaddedAsync:function uft(t,n,e){return e9.apply(this,arguments)},threshold:_ft,transform:bft},wme={bandPart:yft,gramSchmidt:Sft,qr:xft},lpt={absoluteDifference:Ift,computeWeightedLoss:Mf,cosineDistance:Dft,hingeLoss:Aft,huberLoss:Nft,logLoss:Fft,meanSquaredError:Pft,sigmoidCrossEntropy:Vft,softmaxCrossEntropy:Gft},cpt={sparseFillEmptyRows:Hft,sparseReshape:qft,sparseSegmentMean:Xft,sparseSegmentSum:Zft},upt={stringNGrams:Jft,stringSplit:tpt,stringToHashBucketFast:ipt,staticRegexReplace:rpt},M1=class dpt{static sgd(n){return new qz(n)}static momentum(n,e,i=!1){return new Hfe(n,e,i)}static rmsprop(n,e=.9,i=0,s=null,r=!1){return new Wfe(n,e,i,s,r)}static adam(n=.001,e=.9,i=.999,s=null){return new Gfe(n,e,i,s)}static adadelta(n=.001,e=.95,i=null){return new zfe(n,e,i)}static adamax(n=.002,e=.9,i=.999,s=null,r=0){return new jfe(n,e,i,s,r)}static adagrad(n,e=.1){return new Ufe(n,e)}},hpt=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function Sme(){return new Promise(t=>hpt(()=>t()))}function t9(t,n){const e=t[0].length;t.forEach((s,r)=>{le(s.length===e,()=>`Error in concat${e}D: rank of tensors[${r}] must be the same as the rank of the rest (${e})`)}),le(n>=0&&n<e,()=>`Error in concat${e}D: axis must be between 0 and ${e-1}.`);const i=t[0];t.forEach((s,r)=>{for(let o=0;o<e;o++)le(o===n||s[o]===i[o],()=>`Error in concat${e}D: Shape of tensors[${r}] (${s}) does not match the shape of the rest (${i}) along the non-concatenated axis ${r}.`)})}function _h(t,n){const e=t[0].slice();for(let i=1;i<t.length;i++)e[n]+=t[i][n];return e}var gh=function(t){return t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS",t}(gh||{});function Cme(t,n,e){let i=new Array;if(null==e&&null==n)return i;if(null==n)for(;i.length<t+e.length;)i.push(-1);else i=n.slice();if(null==e)return i;if(t+e.length!==i.length)throw new Error(`rt input.shape and shape=${n} are incompatible: rt input.rank = ${t+e.length}, but shape.rank = ${i.length}`);for(let s=1;s<e.length;++s){const r=e[s],o=i[i.length-e.length+s],a=i[o];if(r>=0)if(a>=0){if(a!==r)throw new Error(`rt input.shape and shape=${n} are incompatible: rt input.shape[${s+t}] = ${r} but shape[${s+t}] = ${a}`)}else i[o]=r}return i}function xme(t){const n={FIRST_DIM_SIZE:gh.FIRST_DIM_SIZE,VALUE_ROWIDS:gh.VALUE_ROWIDS,ROW_LENGTHS:gh.ROW_LENGTHS,ROW_SPLITS:gh.ROW_SPLITS,ROW_LIMITS:gh.ROW_LIMITS,ROW_STARTS:gh.ROW_STARTS},e=[];for(const i of t){if(!(i in n))break;e.push(n[i])}return e}function Eme(t){return 0===t.length?0:t[0]===gh.FIRST_DIM_SIZE?t.length-1:t.length}function Tme(t,n){if(null==t||null==n)return;const e=t.length,i=n.length;if(e>=i)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${n}, are incompatible: defaultValue.rank = ${e} must be less than ragged tensor input flatValues.rank = ${i})`);for(let s=0;s<Math.min(e,i-1);++s){const r=t[s],o=n[s+1];if(r>=0&&o>=0&&1!==r&&r!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${n} are incompatible: defaultValue.shape[${s-t.length}] = ${r} but ragged tensor input.flatValues.shape[${s-t.length}] = ${o}`)}}const n9=30;function EN(t){return t<=n9?t:rV(t,Math.floor(Math.sqrt(t)))}function i9(t,n,e){return[e*("number"==typeof t?t:t[0]),n*("number"==typeof t?t:t[1])]}function wE(t,n,e,i=!0){let s=[];if(i)s=s.concat(n.slice(0)),s.push(t[0]/e),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const r=n.length;for(let o=0;o<r;++o)s=s.concat([t[o+1]/n[o],n[o]]);s=s.concat(t.slice(r+1))}return s}function SE(t,n,e=!0){const i=[];if(e){i.push(n);for(let s=n+1;s<t;++s)s<=2*n?(i.push(s),i.push(s-(n+1))):i.push(s)}else{const s=[],r=[];for(let o=1;o<t;++o)o>=2*n+1||o%2==1?r.push(o):s.push(o);i.push(...s),i.push(0),i.push(...r)}return i}function CE(t,n,e,i=!0){const s=[];s.push(i?t[0]/e:t[0]*e);for(let r=1;r<t.length;++r)s.push(r<=n.length?i?n[r-1]*t[r]:t[r]/n[r-1]:t[r]);return s}function s9(t,n){const e=[0];for(let i=0;i<n;++i)e.push(t[i][0]);return e}function r9(t,n,e){const i=t.slice(0,1);for(let s=0;s<e;++s)i.push(t[s+1]-n[s][0]-n[s][1]);return i}function o9(t,n){const e=t.shape.length,i=n.shape.length;if(e<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${e}.`);if(i<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${i}.`);if("int32"!==n.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${n.dtype}.`);if(n.shape[i-1]>e)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${n.shape[i-1]} vs. ${e}`);if(0===at(t.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=n.shape,r=s[s.length-1];let o=1;for(let d=0;d<s.length-1;++d)o*=s[d];const a=t.shape,l=s.slice();l.pop();let c=1;for(let d=r;d<e;++d)c*=a[d],l.push(a[d]);const u=[...xn(t.shape).map(d=>d/c),1].slice(0,r);return[l,o,c,u]}const TN=1.7580993408473768,IN=1.0507009873554805,a9=.3275911,l9=.254829592,c9=-.284496736,u9=1.421413741,d9=-1.453152027,h9=1.061405429;function Af(t,n){if(t.length!==n.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${n.length}.`);const e=new Float32Array(2*t.length);for(let i=0;i<e.length;i+=2)e[i]=t[i/2],e[i+1]=n[i/2];return e}function Ime(t){const n=new Float32Array(t.length/2),e=new Float32Array(t.length/2);for(let i=0;i<t.length;i+=2)n[i/2]=t[i],e[i/2]=t[i+1];return{real:n,imag:e}}function kme(t){const n=Math.ceil(t.length/4),e=new Float32Array(n),i=new Float32Array(n);for(let s=0;s<t.length;s+=4)e[Math.floor(s/4)]=t[s],i[Math.floor(s/4)]=t[s+1];return{real:e,imag:i}}function Dme(t){const n=Math.floor(t.length/4),e=new Float32Array(n),i=new Float32Array(n);for(let s=2;s<t.length;s+=4)e[Math.floor(s/4)]=t[s],i[Math.floor(s/4)]=t[s+1];return{real:e,imag:i}}function f9(t,n){return{real:t[2*n],imag:t[2*n+1]}}function Mme(t,n,e,i){t[2*i]=n,t[2*i+1]=e}function Ame(t,n){const e=new Float32Array(t/2),i=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const r=(n?2:-2)*Math.PI*(s/t);e[s]=Math.cos(r),i[s]=Math.sin(r)}return{real:e,imag:i}}function Ome(t,n,e){const i=(e?2:-2)*Math.PI*(t/n);return{real:Math.cos(i),imag:Math.sin(i)}}const p9="->",fpt=/->/g,Nme=",",Rme="...";function m9(t,n){const e=((t=t.replace(/\s/g,"")).length-t.replace(fpt,"").length)/p9.length;if(e<1)throw new Error("Equations without an arrow are not supported.");if(e>1)throw new Error(`Equation must contain exactly one arrow ("${p9}").`);const[i,s]=t.split(p9);le(-1===i.indexOf(Rme),()=>`The ellipsis notation ("${Rme}") is not supported yet.`);const r=i.split(Nme),o=r.length;if(n!==o)throw new Error(`Expected ${o} input tensors, received ${n}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let h=0;h<s.length;++h){const f=s[h];if(!r.some(p=>-1!==p.indexOf(f)))throw new Error(`Output subscripts contain the label ${f} not present in the input subscripts.`);-1===a.indexOf(f)&&a.push(f)}for(let h=0;h<i.length;++h){const f=i[h];-1===a.indexOf(f)&&f!==Nme&&a.push(f)}const l=new Array(r.length);for(let h=0;h<o;++h){if(new Set(r[h].split("")).size!==r[h].length)throw new Error(`Found duplicate axes in input component ${r[h]}. Support for duplicate axes in input is not implemented yet.`);l[h]=[];for(let f=0;f<r[h].length;++f)l[h].push(a.indexOf(r[h][f]))}const c=a.length,d=[];for(let h=s.length;h<c;++h)d.push(h);return{allDims:a,summedDims:d,idDims:l}}function _9(t,n){let e=new Array(t);e.fill(-1);for(let s=0;s<n.length;++s)e[n[s]]=s;const i=[];for(let s=0;s<t;++s)-1===e[s]&&i.push(s);return e=e.filter(s=>-1!==s),{permutationIndices:e,expandDims:i}}function g9(t,n,e){const i=new Array(t);for(let s=0;s<e.length;++s){const r=e[s].shape;for(let o=0;o<n[s].length;++o)void 0===i[n[s][o]]?i[n[s][o]]=r[o]:le(i[n[s][o]]===r[o],()=>`Expected dimension ${i[n[s][o]]} at axis ${o} of input shaped ${JSON.stringify(r)}, but got dimension ${r[o]}`)}}function b9(t,n){const e=t,i=[];let s=0;0===t.length&&e.push(-1),s=t.length+1;for(let o=0;o<s;++o)i.push([]);const r=[];for(let o=0;o<e.length;++o){const l=ppt(n,e[o]);for(const c of l)-1===r.indexOf(c)&&(i[o].push(c),r.push(c))}return{path:e,steps:i}}function v9(t){return t.every((n,e)=>n===e)}function ppt(t,n){const e=[];for(let i=0;i<t.length;++i)(0===t[i].length||-1!==t[i].indexOf(n)||-1===n)&&e.push(i);return e}function y9(t,n,e=0){let i=[];if("number"==typeof n)le(t.shape[e]%n==0,()=>"Number of splits must evenly divide the axis."),i=new Array(n).fill(t.shape[e]/n);else{le(n.reduce((o,a)=>(-1===a&&(o+=1),o),0)<=1,()=>"There should be only one negative value in split array.");const r=n.indexOf(-1);if(-1!==r){const o=n.reduce((a,l)=>l>0?a+l:a);n[r]=t.shape[e]-o}le(t.shape[e]===n.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),i=n}return i}function Fme(t){return`Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ${t}`}function Lme(t,n){return`indices(${t}, 0) is invalid: ${n} < 0`}function Pme(t,n,e){return`indices(${t}, 0) is invalid: ${n} >= ${e}`}function $me(t,n){return`only one output dimension may be -1, not both ${t} and ${n}`}function Bme(t,n){return`size ${t} must be non-negative, not ${n}`}function Vme(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function zme(t,n){return`Input to reshape is a SparseTensor with ${at(t)}\n  dense values, but the requested shape requires a multiple of ${at(n)}. inputShape=${t} outputShape= ${n}`}function Ume(t,n){return`Input to reshape is a tensor with ${at(t)} dense values, but the requested shape has ${at(n)}. inputShape=${t} outputShape=${n}`}function w9(){return"segment ids must be >= 0"}function Gme(){return"segment ids are not increasing"}function jme(t,n){return`Segment id ${t} out of range [0, ${n}), possibly because segmentIds input is not sorted.`}function Hme(t,n,e){return`Bad: indices[${t}] == ${n} out of range [0, ${e})`}function Wme(t,n){let i,e=!1;for(t<=n9?(i=t,e=!0):i=rV(t,Math.floor(Math.sqrt(t)));!e;)i>n||i===t?e=!0:i=rV(t,i+1);return i}function qme(t,n,e){const i=[],s=t.length;for(let r=0;r<s;r++)i.push(r!==n?t[r]:e);return i}function S9(t,n,e,i){const s=n.shape.length,r=t.shape.length;if(0!==i&&(i<-s||i>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${i}`);if(i<0&&(i+=s),i>r)throw new Error(`batchDims (${i}) must be less than rank(x) (\n    ${r}).`);if(e<i)throw new Error(`batchDims (${i}) must be less than or equal to axis (${e}).`);for(let d=0;d<i;++d)if(t.shape[d]!==n.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${n.shape[d]}.`);const o=t.shape[e],a=[];let l=1,c=1,u=1;for(let d=0;d<i;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=i;d<e;d++)a.push(t.shape[d]),c*=t.shape[d];for(let d=i;d<s;d++)a.push(n.shape[d]);for(let d=e+1;d<r;d++)a.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:o,outputShape:a}}function Of(t){try{return t.map(n=>Zp(n))}catch(n){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${n}`)}}function Kme(t){return t.map(n=>Yp(n))}!function $at(){for(const t of Pat)At(t)}();const Xme={kernelName:BA,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>Be(t,k1(Ht(e,"float32"),-1))}}},mpt={kernelName:ax,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>{const i=tr(Ht(e,"float32")),s=ba(tn(En(1),i));return gr(vn(t,s))}}}},_pt={kernelName:lx,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>{const i=ba(tn(tr(Ht(e,"float32")),1));return vn(t,i)}}}},gpt={kernelName:c1,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n,s=fi(e.shape,i.shape);return{a:()=>{let a=t;const l=Oo(e.shape,s);return l.length>0&&(a=_n(a,l)),Ge(a,e.shape)},b:()=>{let a=t;const l=Oo(i.shape,s);return l.length>0&&(a=_n(a,l)),Ge(a,i.shape)}}}},bpt={kernelName:VA,saveAllInputs:!0,gradFunc:(t,n)=>{const e={};return n.forEach((i,s)=>{e[s]=()=>t.clone()}),e}},vpt={kernelName:zA,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>ns(e)}}},ypt={kernelName:UA,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>ns(e)}}},wpt={kernelName:cx,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>vn(t,ba(tn(En(1),tr(Ht(e,"float32")))))}}},Spt={kernelName:ux,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>{const i=ba(kt(En(1),tr(Ht(e,"float32"))));return vn(t,i)}}}},Cpt={kernelName:fx,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n,s=fi(e.shape,i.shape);return{a:()=>{const a=kt(tr(e),tr(i));let l=Be(t,vn(i,a));const c=Oo(e.shape,s);return c.length>0&&(l=_n(l,c)),Ge(l,e.shape)},b:()=>{const a=kt(tr(e),tr(i));let l=gr(Be(t,vn(e,a)));const c=Oo(i.shape,s);return c.length>0&&(l=_n(l,c)),Ge(l,i.shape)}}}},xpt={kernelName:dx,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>vn(t,kt(tr(Ht(e,"float32")),1))}}},Ept={kernelName:hx,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>vn(t,tn(En(1),tr(Ht(e,"float32"))))}}},Ipt=Oe({avgPool3dGrad_:function Tpt(t,n,e,i,s,r){const o=fe(t,"dy","avgPool3dGrad"),a=fe(n,"input","avgPool3dGrad");let l=o,c=a,u=!1;4===a.rank&&(u=!0,l=Ge(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=Ge(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),le(5===l.rank,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),le(5===c.rank,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Ja("avgPool3dGrad",s,r);const f=Pe.runKernel(hV,{dy:l,input:c},{filterSize:e,strides:i,pad:s,dimRoundingMode:r});return u?Ge(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}}),kpt={kernelName:jA,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,{filterSize:s,strides:r,pad:o,dimRoundingMode:a}=e;return{x:()=>Ipt(t,i,s,r,o,a)}}},Mpt=Oe({avgPoolGrad_:function Dpt(t,n,e,i,s){const r=fe(t,"dy","avgPoolGrad"),o=fe(n,"input","avgPoolGrad");le(o.rank===r.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${r.rank})`);let a=o,l=r,c=!1;3===o.rank&&(c=!0,a=Ge(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=Ge(r,[1,r.shape[0],r.shape[1],r.shape[2]])),le(4===l.rank,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),le(4===a.rank,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const h=Pe.runKernel(dV,{dy:l,input:a},{filterSize:e,strides:i,pad:s});return c?Ge(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),Apt={kernelName:GA,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,{filterSize:s,strides:r,pad:o}=e;return{x:()=>Mpt(t,i,s,r,o)}}},Opt={kernelName:HA,inputsToSave:["a","b"],gradFunc:(t,n,e)=>{const[i,s]=n,{transposeA:r,transposeB:o}=e;return r||o?!r&&o?{a:()=>Ui(t,s,!1,!1),b:()=>Ui(t,i,!0,!1)}:r&&!o?{a:()=>Ui(s,t,!1,!0),b:()=>Ui(i,t,!1,!1)}:{a:()=>Ui(s,t,!0,!0),b:()=>Ui(t,i,!0,!0)}:{a:()=>Ui(t,s,!1,!0),b:()=>Ui(i,t,!0,!1)}}},Npt={kernelName:WA,gradFunc:(t,n,e)=>{const{blockShape:i,crops:s}=e;return{x:()=>pN(t,i,s)}}},Rpt={kernelName:"BroadcastTo",gradFunc:(t,n,e)=>{const s=e.inputShape,r=e.shape,o=Array.from(r);for(let l=s.length-1;l>=0;l--)if(s[l]===r[l])o[l]=1;else if(1!==s[l])throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${r}].`);const a=[];for(let l=0;l<o.length;l++)o[l]>1&&a.push(l);return{x:()=>_n(t,a,!0)}}},Fpt={kernelName:px,gradFunc:t=>({x:()=>t.clone()})},Lpt={kernelName:mx,gradFunc:t=>({x:()=>ns(t)})},Ppt={kernelName:_x,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,{clipValueMin:s,clipValueMax:r}=e;return{x:()=>Na(ph(cm(i,s),Pg(i,r)),t,ns(t))}}},$pt={kernelName:KA,inputsToSave:["x"],gradFunc:Xme.gradFunc},Bpt={kernelName:XA,saveAllInputs:!0,gradFunc:(t,n,e)=>{const i=n.map(l=>l.shape),{axis:s}=e,r=$i(s,n[0].shape)[0],o=i.map(l=>l[r]);return ac(t,o,r).map(l=>()=>l)}},Vpt={kernelName:YA,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{const[i,s]=n,{dilations:r,strides:o,pad:a,dataFormat:l}=e;return le(om(r),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`),{x:()=>h7(i.shape,t,s,o,a,l),filter:()=>W7(i,t,s.shape,o,a,l)}}},zpt={kernelName:ZA,inputsToSave:["dy","filter"],gradFunc:(t,n,e)=>{const[i,s]=n,{strides:r,pad:o,dataFormat:a,dimRoundingMode:l}=e;return{dy:()=>am(t,s,r,o,a,1,l),filter:()=>W7(t,i,s.shape,r,o,a,l)}}},Gpt=Oe({conv3DBackpropFilter_:function Upt(t,n,e,i,s){let r=t;4===t.rank&&(r=Ge(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=n;return 4===o.rank&&(o=Ge(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]])),le(5===r.rank,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${r.shape}.`),le(5===o.rank,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),le(5===e.length,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${e}.`),le(r.shape[4]===e[3],()=>`Error in conv3dDerFilter: depth of input ${r.shape[4]}) must match input depth in filter (${e[3]}.`),le(o.shape[4]===e[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${e[4]}).`),Pe.runKernel(gV,{x:r,dy:o},{strides:i,pad:s,filterShape:e})}}),jpt={kernelName:QA,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{const{dilations:i,strides:s,pad:r}=e;le(om(i),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const[o,a]=n;return{x:()=>Rpe(o.shape,t,a,s,r),filter:()=>Gpt(o,t,a.shape,s,r)}}},Hpt={kernelName:gx,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>Be(gr(N7(Ht(e,"float32"))),t)}}},Wpt={kernelName:bx,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>Be(R7(Ht(e,"float32")),t)}}},qpt={kernelName:JA,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,{axis:s,exclusive:r,reverse:o}=e;return{x:()=>{const a=Nr([s],i.rank);let l=m7(t,s,r,!o);return null!=a&&(l=ss(l,a)),l}}}},Kpt={kernelName:eO,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{const{dilations:i,strides:s,pad:r,dimRoundingMode:o}=e,a=i??[1,1];le(om(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,c]=n;return le(4===l.rank,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),le(4===c.rank,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),le(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),le(va(s,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${a}'.`),Ja("depthwiseConv2d",r,o),{x:()=>pme(l.shape,t,c,s,r,a,o),filter:()=>fme(l,t,c.shape,s,r,a,o)}}},Xpt={kernelName:tO,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{const[i,s]=n,r={x:i,filter:s,dy:t},o={x:i,filter:s,dy:t};return{x:()=>Pe.runKernel(TV,r,e),filter:()=>Pe.runKernel(IV,o,e)}}},Ypt={kernelName:yx,outputsToSave:[!0],gradFunc:(t,n)=>{const[e]=n,i={dy:t,y:e};return{x:()=>Pe.runKernel(MV,i)}}},Zpt={kernelName:wx,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n,i=Be(sc(gr(tr(e))),2/Math.sqrt(Math.PI));return{x:()=>Be(t,i)}}},Qpt={kernelName:Sx,outputsToSave:[!0],gradFunc:(t,n)=>{const[e]=n;return{x:()=>Be(t,e)}}},Jpt={kernelName:iO,inputsToSave:["input"],gradFunc:(t,n)=>{const[e]=n;return{input:()=>Ge(t,e.shape)}}},emt={kernelName:Cx,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>Be(t,sc(e))}}},tmt={kernelName:xx,gradFunc:t=>({x:()=>ns(t)})},nmt={kernelName:Ex,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n,s=fi(e.shape,i.shape);return{a:()=>{const a=vn(t,Ht(i,"float32")),l=Oo(e.shape,s);return l.length>0?Ge(_n(a,l),e.shape):a},b:()=>{let a=Be(t,Ht(e,"float32"));const l=Oo(i.shape,s);l.length>0&&(a=Ge(_n(a,l),i.shape));const c=tr(i);return gr(vn(a,Ht(c,"float32")))}}}},imt={kernelName:sO,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,n,e)=>{const{varianceEpsilon:i}=e,[s,r,o,a]=n,l=a??En(1),c=Oo(r.shape,s.shape),u=[];if(1===r.rank){for(let T=0;T<s.shape.length-1;++T)u.push(s.shape[T]);u.push(1)}const d=tn(s,r),h=Be(t,l),f=D7(kt(o,En(i))),p=Be(Be(Be(f,f),f),En(-.5));return{x:()=>Ge(Be(Be(t,1===r.rank?vu(Ge(f,[1,1,1,r.shape[0]]),u):f),l),s.shape),mean:()=>{let T=Be(Be(f,En(-1)),h);return 1===r.rank&&(T=_n(T,c)),Ge(T,r.shape)},variance:()=>{let T=Be(Be(p,d),h);return 1===r.rank&&(T=_n(T,c)),Ge(T,r.shape)},scale:()=>{const T=Be(d,f);let L=Be(t,T);return 1===r.rank&&(L=_n(L,c)),Ge(L,r.shape)},offset:()=>{let T=t;return 1===r.rank&&(T=_n(T,c)),Ge(T,r.shape)}}}},smt={kernelName:rO,inputsToSave:["x","indices"],gradFunc:(t,n,e)=>{const[i,s]=n,{axis:r,batchDims:o}=e,a=$i(r,i.shape)[0],l=(c,u,d)=>()=>{const h=c.shape,f=u.size,p=h.slice(0,a),g=p.length,v=h.slice(r,h.length).slice(1),y=v.length,w=Yme(0,g),E=Yme(g+1,g+1+y),T=Zme([p,[f],v]),L=Ge(d,T),W=Ge(u,[f]),H=Zme([[g],w,E]),P=ss(L,H);let X=V7(P,W,c.shape[a]);const ne=lm(H);return X=ss(X,ne),X};if(1===o){const u=i.split(i.shape[0],0);return{x:()=>Tl(u.map((f,p)=>l(f,s.slice(p,1),t.slice(p,1))())).reshape(i.shape),indices:()=>s}}return{x:l(i,s,t),indices:()=>s}}};function Yme(t,n){const e=[];for(let i=t;i<n;++i)e.push(i);return e}function Zme(t){const n=[];for(let e=0;e<t.length;++e)for(let i=0;i<t[e].length;++i)n.push(t[e][i]);return n}const rmt={kernelName:Tx,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n;return{a:()=>ns(e),b:()=>ns(i)}}},omt={kernelName:Ix,gradFunc:t=>({x:()=>Ht(t,"float32")})},amt={kernelName:kx,gradFunc:t=>({x:()=>ns(t)})},lmt={kernelName:Dx,gradFunc:t=>({x:()=>ns(t)})},cmt={kernelName:Mx,gradFunc:t=>({x:()=>ns(t)})},umt={kernelName:aO,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,{alpha:s}=e,r=rc(i,0);return{x:()=>Na(r,t,Be(t,s))}}},dmt={kernelName:Ox,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>vn(t,kt(e,1))}}},hmt={kernelName:Ax,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>vn(t,Ht(e,"float32"))}}},fmt={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:(t,n,e)=>{const[i]=n,{axis:s}=e;return{logits:()=>{const o=sc(i);return tn(t,Be(_n(t,s,!0),o))}}}},mmt=Oe({localResponseNormalizationBackprop_:function pmt(t,n,e,i=5,s=1,r=1,o=.5){return Pe.runKernel($V,{x:t,y:n,dy:e},{depthRadius:i,bias:s,alpha:r,beta:o})}}),_mt={kernelName:fO,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{const[i,s]=n,{depthRadius:r,bias:o,alpha:a,beta:l}=e;return{x:()=>mmt(i,s,t,r,o,a,l)}}};function Qme(t,n,e,i){return n.rank<e.rank&&(n=Ge(n,Yr(n.shape,i))),t.rank<e.rank&&(t=Ge(t,Yr(t.shape,i))),{x:()=>Be(t,Ht(_d(e,n),t.dtype))}}const Jme={kernelName:pO,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{const i=e,{reductionIndices:s}=i,r=n[0],l=Qme(t,n[1],r,$i(s,r.shape));return{x:()=>l.x()}}},gmt={kernelName:Nx,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n;return{a:()=>Be(t,Ht(cm(e,i),"float32")),b:()=>Be(t,Ht(gE(e,i),"float32"))}}},vmt=Oe({maxPool3dGrad_:function bmt(t,n,e,i,s,r,o){const a=fe(t,"dy","maxPool3dGrad"),l=fe(n,"input","maxPool3dGrad"),c=fe(e,"output","maxPool3dGrad");let u=a,d=l,h=c,f=!1;4===l.rank&&(f=!0,u=Ge(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=Ge(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=Ge(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),le(5===u.rank,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),le(5===d.rank,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),le(5===h.rank,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`),Ja("maxPool3dGrad",r,o);const v=Pe.runKernel(VV,{dy:u,input:d,output:h},{filterSize:i,strides:s,pad:r,dimRoundingMode:o});return f?Ge(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}}),ymt={kernelName:_O,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{const[i,s]=n,{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=e;return{x:()=>vmt(t,i,s,r,o,a,l)}}},Smt=Oe({maxPoolGrad_:function wmt(t,n,e,i,s,r,o){const a=fe(t,"dy","maxPoolGrad"),l=fe(n,"input","maxPoolGrad"),c=fe(e,"output","maxPoolGrad");return le(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),le(4===a.rank,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),le(4===l.rank,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Ja("maxPoolGrad",r,o),Pe.runKernel(BV,{dy:a,input:l,output:c},{filterSize:i,strides:s,pad:r,dimRoundingMode:o})}}),Cmt={kernelName:mO,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{const[i,s]=n,{filterSize:r,strides:o,pad:a}=e;return{x:()=>Smt(t,i,s,r,o,a)}}},xmt={kernelName:gO,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,{axis:s}=e,r=$i(s,i.shape),l=at(ea(i.shape,r)[1]);return{x:()=>{const u=i.shape.slice();r.forEach(f=>{u[f]=1});const d=Ge(t,u);return vn(Be(d,oc(i.shape,"float32")),l)}}}},Emt={kernelName:bO,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{const i=e,{axis:s}=i,[r,o]=n,l=Qme(t,o,r,$i(s,r.shape));return{x:()=>l.x()}}},Tmt={kernelName:Rx,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n;return{a:()=>Be(t,Ht(Pg(e,i),"float32")),b:()=>Be(t,Ht(rc(e,i),"float32"))}}},Imt={kernelName:vO,inputsToSave:["x"],gradFunc:(t,n,e)=>{const i=n[0],{paddings:s}=e,r=s.map(o=>o[0]);return{x:()=>is(t,r,i.shape)}}},kmt={kernelName:Fx,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n,s=fi(e.shape,i.shape);return{a:()=>{const a=Oo(e.shape,s);return a.length>0?Ge(_n(t,a),e.shape):t},b:()=>{const a=Be(t,gr(mE(vn(e,i)))),l=Oo(i.shape,s);return l.length>0?Ge(_n(a,l),i.shape):a}}}},Dmt={kernelName:Lx,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n,s=fi(e.shape,i.shape);return{a:()=>{const a=Be(t,Ht(i,"float32")),l=Oo(e.shape,s);return l.length>0?Ge(_n(a,l),e.shape):a},b:()=>{const a=Be(t,Ht(e,"float32")),l=Oo(i.shape,s);return l.length>0?Ge(_n(a,l),i.shape):a}}}},Mmt={kernelName:yO,gradFunc:t=>({x:()=>gr(t)})},Omt={kernelName:SO,gradFunc:t=>({x:()=>ns(t)})},Nmt={kernelName:xO,saveAllInputs:!0,gradFunc:(t,n,e)=>{const{axis:i}=e;return wu(t,i).map(r=>()=>r)}},e_e={kernelName:EO,inputsToSave:["x"],gradFunc:(t,n,e)=>{const i=n[0],{paddings:s}=e,r=s.map(o=>o[0]);return{x:()=>is(t,r,i.shape)}}},Rmt={kernelName:Px,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,n)=>{const[e,i,s]=n,r=e,o=i,a=fi(r.shape,o.shape);return{a:()=>{const u=Ht(o,"float32");let d=Be(t,Be(u,Tf(r,tn(u,En(1)))));const h=Oo(r.shape,a);return h.length>0&&(d=_n(d,h)),Ge(d,r.shape)},b:()=>{const u=rc(r,0),d=Na(u,Bc(r),ns(r));let h=Be(t,Be(s,d));const f=Oo(o.shape,a);return f.length>0&&(h=_n(h,f)),Ge(h,o.shape)}}}},Fmt={kernelName:TO,inputsToSave:["x","alpha"],gradFunc:(t,n)=>{const[e,i]=n,s=rc(e,0);return{x:()=>Na(s,t,Be(t,i)),alpha:()=>{let r=Na(s,ns(t),Be(t,e));const o=Oo(i.shape,t.shape);return o.length>0&&(r=_n(r,o)),Ge(r,i.shape)}}}};const $mt={kernelName:IO,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,{axis:s}=e;let r=[];return r=null==s?i.shape.map((o,a)=>a):"number"==typeof s?[s]:s,{x:()=>function Pmt(t,n,e){const i=t.shape.length,s=i-e.length,r=Nr(e,i);let o=t;null!=r&&(o=ss(t,r));const a=o.shape.slice(),c=a.splice(i-e.length,e.length).reduce((h,f)=>h*f,1);a.push(c);let d=function Lmt(t,n,e){const i=t.shape.slice();i[e]=1;const s=Ge(n,i),r=rN(t,e,!0,!1),o=rN(t,e,!0,!0),a=Be(r,o);return Be(s,a)}(o.reshape(a),n,s);if(d=d.reshape(o.shape),null!=r){const h=lm(r);d=ss(d,h)}return d}(i,t,r)}}},Bmt={kernelName:vx,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n,s=fi(e.shape,i.shape);return{a:()=>{const a=vn(t,Ht(i,"float32")),l=Oo(e.shape,s);return l.length>0?Ge(_n(a,l),e.shape):a},b:()=>{let a=Be(t,Ht(e,"float32"));const l=Oo(i.shape,s);l.length>0&&(a=Ge(_n(a,l),i.shape));const c=tr(i);return gr(vn(a,Ht(c,"float32")))}}}},Vmt={kernelName:$x,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>vn(t,gr(tr(e)))}}},zmt={kernelName:Vx,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n,i=Be(Pg(e,6),k1(e));return{x:()=>Be(t,Ht(i,"float32"))}}},Umt={kernelName:Bx,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>Be(t,Ht(k1(e),"float32"))}}},Gmt={kernelName:kO,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>Ge(t,e.shape)}}},jmt={kernelName:MO,inputsToSave:["images"],gradFunc:(t,n,e)=>{const[i]=n,s={dy:t,images:i};return{images:()=>Pe.runKernel(QV,s,e)}}},Hmt={kernelName:DO,inputsToSave:["images"],gradFunc:(t,n,e)=>{const[i]=n,s={dy:t,images:i};return{images:()=>Pe.runKernel(ZV,s,e)}}},Wmt={kernelName:AO,gradFunc:(t,n,e)=>{const{dims:i}=e,s=$i(i,t.shape);return{x:()=>yu(t,s)}}},qmt={kernelName:zx,gradFunc:t=>({x:()=>ns(t)})},Kmt={kernelName:Ux,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>gr(vn(t,Be(Tf(e,1.5),2)))}}},Xmt={kernelName:OO,inputsToSave:["condition"],gradFunc:(t,n)=>{const[e]=n;return{condition:()=>Ht(ns(e),"float32"),t:()=>Be(t,Ht(e,t.dtype)),e:()=>Be(t,Ht(uN(e),t.dtype))}}},Ymt={kernelName:Gx,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>{const i=rc(e,En(0)),s=En(TN),r=En(IN),o=Be(t,r),a=Be(Be(t,s),sc(Ht(e,"float32")));return Na(i,o,a)}}}},Zmt={kernelName:qx,outputsToSave:[!0],gradFunc:(t,n)=>{const[e]=n;return{x:()=>Be(t,Be(e,tn(En(1),e)))}}},Qmt={kernelName:Wx,gradFunc:t=>({x:()=>ns(t)})},Jmt={kernelName:jx,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>Be(sN(Ht(e,"float32")),t)}}},e_t={kernelName:Hx,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>Be(p7(Ht(e,"float32")),t)}}},t_t={kernelName:NO,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,{begin:s,size:r}=e,o=i.shape,[a,l]=eN(i,s,r),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],o[u]-a[u]-l[u]]);return{x:()=>um(t,c)}}},n_t={kernelName:PO,outputsToSave:[!0],gradFunc:(t,n,e)=>{const[i]=n,{dim:s}=e,o=Be(t,i);return{logits:()=>tn(o,Be(_n(o,[s],!0),i))}}},i_t={kernelName:Kx,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>Be(t,fh(e))}}},t_e={kernelName:FO,gradFunc:(t,n,e)=>{const{blockShape:i,paddings:s}=e;return{x:()=>iN(t,i,s)}}},n_e={kernelName:LO,gradFunc:(t,n,e)=>{const{axis:i}=e;return{x:()=>Xr(t,i)}}},s_t={kernelName:Xx,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>vn(t,Be(ba(Ht(e,"float32")),2))}}},r_t={kernelName:az,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>Be(t,Be(Ht(e,"float32"),2))}}},o_t={kernelName:Yx,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n,s=En(2);return{a:()=>Be(t,Be(s,tn(e,i))),b:()=>Be(t,Be(s,tn(i,e)))}}},a_t={kernelName:tE,gradFunc:t=>({x:()=>ns(t)})},l_t={kernelName:Zx,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n,s=fi(e.shape,i.shape);return{a:()=>{let a=t;const l=Oo(e.shape,s);return l.length>0&&(a=_n(a,l)),Ge(a,e.shape)},b:()=>{let a=t;const l=Oo(i.shape,s);return l.length>0&&(a=_n(a,l)),Ge(gr(a),i.shape)}}}},c_t={kernelName:RO,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,s=i.shape.slice(),{axis:r}=e;$i(r,i.shape).forEach(c=>{s[c]=1});const a=Ge(t,s),l=Be(a,oc(i.shape,"float32"));return{x:()=>l}}},u_t={kernelName:Qx,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>vn(t,tr(sN(e)))}}},d_t={kernelName:Jx,outputsToSave:[!0],gradFunc:(t,n)=>{const[e]=n;return{x:()=>Be(tn(En(1),tr(e)),t)}}},h_t={kernelName:eE,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,{reps:s}=e;return{x:()=>{let o=ns(i);if(1===i.rank)for(let a=0;a<s[0];++a)o=kt(o,is(t,[a*i.shape[0]],[i.shape[0]]));else if(2===i.rank)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)o=kt(o,is(t,[a*i.shape[0],l*i.shape[1]],[i.shape[0],i.shape[1]]));else if(3===i.rank)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)o=kt(o,is(t,[a*i.shape[0],l*i.shape[1],c*i.shape[2]],[i.shape[0],i.shape[1],i.shape[2]]));else{if(4!==i.rank)throw new Error(`Gradient for tile operation is not implemented for rank-${i.rank} tensors yet.`);for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)for(let u=0;u<s[3];++u)o=kt(o,is(t,[a*i.shape[0],l*i.shape[1],c*i.shape[2],u*i.shape[3]],[i.shape[0],i.shape[1],i.shape[2],i.shape[3]]))}return o}}}},f_t={kernelName:u1,gradFunc:(t,n,e)=>{const i=e,{perm:s}=i,r=lm(s);return{x:()=>ss(t,r)}}},p_t={kernelName:BO,gradFunc:(t,n,e)=>{const i=e,{axis:s}=i;return{value:()=>Tl(t,s)}}},m_t={kernelName:VO,inputsToSave:["segmentIds"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>function __t(t,n){const e=If(n,ns(n)),i=_E(t,e);let s=cm(n,En(0,"int32"));const r=i.rank-s.rank;for(let a=0;a<r;++a)s=Ra(s,a+1);s=ph(s,oc(i.shape,"bool"));const o=ns(i);return Na(s,i,o)}(t,e)}}},g_t={kernelName:zO,gradFunc:t=>({x:()=>ns(t)})},b_t=[Xme,mpt,_pt,gpt,bpt,vpt,ypt,wpt,Spt,Cpt,xpt,Ept,kpt,Apt,Opt,Npt,Rpt,Fpt,Lpt,Ppt,$pt,Bpt,zpt,Vpt,jpt,Hpt,Wpt,qpt,Kpt,Xpt,Bmt,Ypt,Zpt,Qpt,Jpt,emt,nmt,tmt,imt,smt,rmt,omt,amt,lmt,cmt,umt,dmt,hmt,fmt,_mt,Jme,Jme,gmt,ymt,Cmt,xmt,Emt,Tmt,Imt,kmt,Dmt,Mmt,{kernelName:CO,inputsToSave:["indices"],gradFunc:(t,n)=>{const e=n[0];return{indices:()=>No(e.shape,"float32")}}},Omt,Nmt,e_e,e_e,Rmt,Fmt,$mt,Vmt,zmt,Umt,Gmt,jmt,Hmt,Wmt,qmt,Kmt,Xmt,Ymt,Zmt,Qmt,Jmt,e_t,t_t,n_t,i_t,t_e,t_e,n_e,n_e,s_t,o_t,r_t,a_t,l_t,c_t,u_t,d_t,h_t,f_t,p_t,m_t,g_t];for(const t of b_t)pot(t);ht().prototype.abs=function(){return this.throwIfDisposed(),Ao(this)},ht().prototype.acos=function(){return this.throwIfDisposed(),mpe(this)},ht().prototype.acosh=function(){return this.throwIfDisposed(),_pe(this)},ht().prototype.add=function(t){return this.throwIfDisposed(),kt(this,t)},ht().prototype.all=function(t,n){return this.throwIfDisposed(),l7(this,t,n)},ht().prototype.any=function(t,n){return this.throwIfDisposed(),tN(this,t,n)},ht().prototype.argMax=function(t){return this.throwIfDisposed(),y1(this,t)},ht().prototype.argMin=function(t){return this.throwIfDisposed(),gpe(this,t)},ht().prototype.asScalar=function(){return this.throwIfDisposed(),le(1===this.size,()=>"The array must have only 1 element."),Ge(this,[])},ht().prototype.asType=function(t){return this.throwIfDisposed(),Ht(this,t)},ht().prototype.as1D=function(){return this.throwIfDisposed(),Ge(this,[this.size])},ht().prototype.as2D=function(t,n){return this.throwIfDisposed(),Ge(this,[t,n])},ht().prototype.as3D=function(t,n,e){return this.throwIfDisposed(),Ge(this,[t,n,e])},ht().prototype.as4D=function(t,n,e,i){return this.throwIfDisposed(),Ge(this,[t,n,e,i])},ht().prototype.as5D=function(t,n,e,i,s){return this.throwIfDisposed(),Ge(this,[t,n,e,i,s])},ht().prototype.asin=function(){return this.throwIfDisposed(),bpe(this)},ht().prototype.asinh=function(){return this.throwIfDisposed(),vpe(this)},ht().prototype.atan=function(){return this.throwIfDisposed(),ype(this)},ht().prototype.atan2=function(t){return this.throwIfDisposed(),wpe(this,t)},ht().prototype.atanh=function(){return this.throwIfDisposed(),Spe(this)},ht().prototype.avgPool=function(t,n,e,i){return this.throwIfDisposed(),nN(this,t,n,e,i)},ht().prototype.batchToSpaceND=function(t,n){return this.throwIfDisposed(),iN(this,t,n)},ht().prototype.batchNorm=function(t,n,e,i,s){return this.throwIfDisposed(),uE(this,t,n,e,i,s)},ht().prototype.broadcastTo=function(t){return this.throwIfDisposed(),S1(this,t)},ht().prototype.cast=function(t){return this.throwIfDisposed(),Ht(this,t)},ht().prototype.ceil=function(){return this.throwIfDisposed(),kpe(this)},ht().prototype.clipByValue=function(t,n){return this.throwIfDisposed(),ic(this,t,n)},ht().prototype.concat=function(t,n){return this.throwIfDisposed(),t instanceof Ps&&(t=[t]),Xr([this,...t],n)},ht().prototype.conv1d=function(t,n,e,i,s,r){return this.throwIfDisposed(),d7(this,t,n,e,i,s,r)},ht().prototype.conv2dTranspose=function(t,n,e,i,s){return this.throwIfDisposed(),f7(this,t,n,e,i,s)},ht().prototype.conv2d=function(t,n,e,i,s,r){return this.throwIfDisposed(),am(this,t,n,e,i,s,r)},ht().prototype.cos=function(){return this.throwIfDisposed(),sN(this)},ht().prototype.cosh=function(){return this.throwIfDisposed(),p7(this)},ht().prototype.cumprod=function(t,n,e){return this.throwIfDisposed(),rN(this,t,n,e)},ht().prototype.cumsum=function(t,n,e){return this.throwIfDisposed(),m7(this,t,n,e)},ht().prototype.depthToSpace=function(t,n){return this.throwIfDisposed(),Lpe(this,t,n)},ht().prototype.depthwiseConv2d=function(t,n,e,i,s,r){return this.throwIfDisposed(),dE(this,t,n,e,i,s,r)},ht().prototype.dilation2d=function(t,n,e,i,s){return this.throwIfDisposed(),Ppe(this,t,n,e,i,s)},ht().prototype.divNoNan=function(t){return this.throwIfDisposed(),$pe(this,t)},ht().prototype.div=function(t){return this.throwIfDisposed(),vn(this,t)},ht().prototype.dot=function(t){return this.throwIfDisposed(),Bpe(this,t)},ht().prototype.elu=function(){return this.throwIfDisposed(),hE(this)},ht().prototype.equal=function(t){return this.throwIfDisposed(),_d(this,t)},ht().prototype.erf=function(){return this.throwIfDisposed(),g7(this)},ht().prototype.euclideanNorm=function(t,n){return this.throwIfDisposed(),Upe(this,t,n)},ht().prototype.exp=function(){return this.throwIfDisposed(),sc(this)},ht().prototype.expandDims=function(t){return this.throwIfDisposed(),Ra(this,t)},ht().prototype.expm1=function(){return this.throwIfDisposed(),Gpe(this)},ht().prototype.fft=function(){return this.throwIfDisposed(),vN(this)},ht().prototype.flatten=function(){return this.throwIfDisposed(),Ge(this,[this.size])},ht().prototype.floor=function(){return this.throwIfDisposed(),mE(this)},ht().prototype.floorDiv=function(t){return this.throwIfDisposed(),Hz(this,t)},ht().prototype.gather=function(t,n,e){return this.throwIfDisposed(),_E(this,t,n,e)},ht().prototype.greaterEqual=function(t){return this.throwIfDisposed(),cm(this,t)},ht().prototype.greater=function(t){return this.throwIfDisposed(),rc(this,t)},ht().prototype.ifft=function(){return this.throwIfDisposed(),yE(this)},ht().prototype.irfft=function(){return this.throwIfDisposed(),L7(this)},ht().prototype.isFinite=function(){return this.throwIfDisposed(),jpe(this)},ht().prototype.isInf=function(){return this.throwIfDisposed(),Hpe(this)},ht().prototype.isNaN=function(){return this.throwIfDisposed(),Wpe(this)},ht().prototype.leakyRelu=function(t){return this.throwIfDisposed(),aN(this,t)},ht().prototype.lessEqual=function(t){return this.throwIfDisposed(),Pg(this,t)},ht().prototype.less=function(t){return this.throwIfDisposed(),gE(this,t)},ht().prototype.localResponseNormalization=function(t,n,e,i){return this.throwIfDisposed(),qpe(this,t,n,e,i)},ht().prototype.logSigmoid=function(){return this.throwIfDisposed(),Kpe(this)},ht().prototype.logSoftmax=function(t){return this.throwIfDisposed(),y7(this,t)},ht().prototype.logSumExp=function(t,n){return this.throwIfDisposed(),cN(this,t,n)},ht().prototype.log=function(){return this.throwIfDisposed(),Bc(this)},ht().prototype.log1p=function(){return this.throwIfDisposed(),lN(this)},ht().prototype.logicalAnd=function(t){return this.throwIfDisposed(),ph(this,t)},ht().prototype.logicalNot=function(){return this.throwIfDisposed(),uN(this)},ht().prototype.logicalOr=function(t){return this.throwIfDisposed(),w7(this,t)},ht().prototype.logicalXor=function(t){return this.throwIfDisposed(),Xpe(this,t)},ht().prototype.matMul=function(t,n,e){return this.throwIfDisposed(),Ui(this,t,n,e)},ht().prototype.maxPool=function(t,n,e,i){return this.throwIfDisposed(),hN(this,t,n,e,i)},ht().prototype.max=function(t,n){return this.throwIfDisposed(),bu(this,t,n)},ht().prototype.maximum=function(t){return this.throwIfDisposed(),If(this,t)},ht().prototype.mean=function(t,n){return this.throwIfDisposed(),Gr(this,t,n)},ht().prototype.min=function(t,n){return this.throwIfDisposed(),fE(this,t,n)},ht().prototype.minimum=function(t){return this.throwIfDisposed(),$g(this,t)},ht().prototype.mirrorPad=function(t,n){return this.throwIfDisposed(),Zpe(this,t,n)},ht().prototype.mod=function(t){return this.throwIfDisposed(),Qpe(this,t)},ht().prototype.mul=function(t){return this.throwIfDisposed(),Be(this,t)},ht().prototype.neg=function(){return this.throwIfDisposed(),gr(this)},ht().prototype.norm=function(t,n,e){return this.throwIfDisposed(),pE(this,t,n,e)},ht().prototype.notEqual=function(t){return this.throwIfDisposed(),E1(this,t)},ht().prototype.oneHot=function(t,n=1,e=0){return this.throwIfDisposed(),C7(this,t,n,e)},ht().prototype.onesLike=function(){return this.throwIfDisposed(),Vc(this)},ht().prototype.pad=function(t,n){return this.throwIfDisposed(),um(this,t,n)},ht().prototype.pool=function(t,n,e,i,s,r){return this.throwIfDisposed(),Jpe(this,t,n,e,i,s,r)},ht().prototype.pow=function(t){return this.throwIfDisposed(),Tf(this,t)},ht().prototype.prelu=function(t){return this.throwIfDisposed(),mN(this,t)},ht().prototype.prod=function(t,n){return this.throwIfDisposed(),eme(this,t,n)},ht().prototype.reciprocal=function(){return this.throwIfDisposed(),tme(this)},ht().prototype.relu=function(){return this.throwIfDisposed(),mh(this)},ht().prototype.relu6=function(){return this.throwIfDisposed(),I7(this)},ht().prototype.reshapeAs=function(t){return this.throwIfDisposed(),Ge(this,t.shape)},ht().prototype.reshape=function(t){return this.throwIfDisposed(),Ge(this,t)},ht().prototype.resizeBilinear=function(t,n,e){return this.throwIfDisposed(),bme(this,t,n,e)},ht().prototype.resizeNearestNeighbor=function(t,n,e){return this.throwIfDisposed(),vme(this,t,n,e)},ht().prototype.reverse=function(t){return this.throwIfDisposed(),yu(this,t)},ht().prototype.rfft=function(){return this.throwIfDisposed(),yN(this)},ht().prototype.round=function(){return this.throwIfDisposed(),k7(this)},ht().prototype.rsqrt=function(){return this.throwIfDisposed(),D7(this)},ht().prototype.selu=function(){return this.throwIfDisposed(),M7(this)},ht().prototype.separableConv2d=function(t,n,e,i,s,r){return this.throwIfDisposed(),A7(this,t,n,e,i,s,r)},ht().prototype.sigmoid=function(){return this.throwIfDisposed(),fh(this)},ht().prototype.sign=function(){return this.throwIfDisposed(),nme(this)},ht().prototype.sin=function(){return this.throwIfDisposed(),N7(this)},ht().prototype.sinh=function(){return this.throwIfDisposed(),R7(this)},ht().prototype.slice=function(t,n){return this.throwIfDisposed(),is(this,t,n)},ht().prototype.softmax=function(t){return this.throwIfDisposed(),bN(this,t)},ht().prototype.softplus=function(){return this.throwIfDisposed(),x1(this)},ht().prototype.spaceToBatchND=function(t,n){return this.throwIfDisposed(),pN(this,t,n)},ht().prototype.split=function(t,n){return this.throwIfDisposed(),ac(this,t,n)},ht().prototype.sqrt=function(){return this.throwIfDisposed(),ba(this)},ht().prototype.square=function(){return this.throwIfDisposed(),tr(this)},ht().prototype.squaredDifference=function(t){return this.throwIfDisposed(),P7(this,t)},ht().prototype.squeeze=function(t){return this.throwIfDisposed(),Vg(this,t)},ht().prototype.stack=function(t,n){this.throwIfDisposed();const e=t instanceof Ps?[this,t]:[this,...t];return Tl(e,n)},ht().prototype.step=function(t){return this.throwIfDisposed(),k1(this,t)},ht().prototype.stridedSlice=function(t,n,e,i,s,r,o,a){return this.throwIfDisposed(),ime(this,t,n,e,i,s,r,o,a)},ht().prototype.sub=function(t){return this.throwIfDisposed(),tn(this,t)},ht().prototype.sum=function(t,n){return this.throwIfDisposed(),_n(this,t,n)},ht().prototype.tan=function(){return this.throwIfDisposed(),sme(this)},ht().prototype.tanh=function(){return this.throwIfDisposed(),Lg(this)},ht().prototype.tile=function(t){return this.throwIfDisposed(),vu(this,t)},ht().prototype.toBool=function(){return this.throwIfDisposed(),Ht(this,"bool")},ht().prototype.toFloat=function(){return this.throwIfDisposed(),Ht(this,"float32")},ht().prototype.toInt=function(){return this.throwIfDisposed(),Ht(this,"int32")},ht().prototype.topk=function(t,n){return this.throwIfDisposed(),ome(this,t,n)},ht().prototype.transpose=function(t){return this.throwIfDisposed(),ss(this,t)},ht().prototype.unique=function(t){return this.throwIfDisposed(),ame(this,t)},ht().prototype.unsortedSegmentSum=function(t,n){return this.throwIfDisposed(),V7(this,t,n)},ht().prototype.unstack=function(t){return this.throwIfDisposed(),wu(this,t)},ht().prototype.where=function(t,n){return this.throwIfDisposed(),Na(t,this,n)},ht().prototype.zerosLike=function(){return this.throwIfDisposed(),ns(this)};class bh extends Error{constructor(n){super(n),Object.setPrototypeOf(this,bh.prototype)}}class Cu extends Error{constructor(n){super(n),Object.setPrototypeOf(this,Cu.prototype)}}class We extends Error{constructor(n){super(n),Object.setPrototypeOf(this,We.prototype)}}class _i extends Error{constructor(n){super(n),Object.setPrototypeOf(this,_i.prototype)}}class C9 extends Error{constructor(n){super(n),Object.setPrototypeOf(this,C9.prototype)}}Error;class s_e{constructor(n){this.maxEntries=n||100,this.cache=new Map}get(n){let e;return this.cache.has(n)&&(e=this.cache.get(n),this.cache.delete(n),this.cache.set(n,e)),e}put(n,e){if(this.cache.has(n))this.cache.delete(n);else if(this.cache.size>=this.maxEntries){const i=this.cache.keys().next().value;this.cache.delete(i)}this.cache.set(n,e)}getMaxEntries(){return this.maxEntries}setMaxEntries(n){if(n<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${n}.`);if(this.maxEntries>n)for(let e=0;e<this.maxEntries-n;e++){const i=this.cache.keys().next().value;this.cache.delete(i)}this.maxEntries=n}}function Gg(t,n){if(Array.isArray(t)){let e=[];for(let i=0;i<n;i++)e=e.concat(t);return e}{const e=new Array(n);return e.fill(t),e}}function zc(t,n){if(!t)throw new C9(n)}function r_e(t,n){let e=0;for(const i of t)i===n&&e++;return e}function Il(t){return 1===t.length?t[0]:t}function As(t){return Array.isArray(t)?t:[t]}function Nf(t){const e=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==e[0]?e:"private"+e}function jg(t){return t.length<=1||-1===t.indexOf("_")?t:t.replace(/[_]+(\w|$)/g,(n,e)=>e.toUpperCase())}let xu={};function x9(t){if(null==t)return null;const n={};return n.className=t.getClassName(),n.config=t.getConfig(),n}function E9(t){if(null!=t&&"object"==typeof t)if(Array.isArray(t))t.forEach(n=>E9(n));else{const n=Object.keys(t);for(const e of n){const i=t[e];null!=i&&"object"==typeof i&&(Array.isArray(i)||"ndarray"!==i.type||"number"!=typeof i.value?E9(i):t[e]=i.value)}}}function xE(t,n={},e={},i="object",s=!1){if("string"==typeof t){let o;if(t in e)o=e[t];else if(t in xu)o=xu[t];else if(o=n[t],null==o)throw new We(`Unknown ${i}: ${t}. This may be due to one of the following reasons:\n1. The ${i} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${i} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}{const r=t;if(null==r.className||null==r.config)throw new We(`${i}: Improper config format: ${JSON.stringify(r)}.\n'className' and 'config' must set.`);const o=r.className;let a,l;if(o in e?[a,l]=e[o]:o in xu?[a,l]=xu.className:o in n&&([a,l]=n[o]),null==a)throw new We(`Unknown ${i}: ${o}. This may be due to one of the following reasons:\n1. The ${i} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${i} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=l){const c={};for(const f of Object.keys(xu))c[f]=xu[f];for(const f of Object.keys(e))c[f]=e[f];r.config.customObjects=c;const d=Object.assign({},xu);for(const f of Object.keys(e))xu[f]=e[f];E9(r.config);const h=l(a,r.config,e,s);return xu=Object.assign({},d),h}{const c=Object.assign({},xu);for(const d of Object.keys(e))xu[d]=e[d];const u=new a(r.config);return xu=Object.assign({},c),u}}}function kN(t,n){return-1*function v_t(t,n){return t<n?-1:t>n?1:0}(t,n)}function dm(t){if(null==t)return t;const n=[];for(const e of t)-1===n.indexOf(e)&&n.push(e);return n}function y_t(t){if(null==t)throw new We(`Invalid value in obj: ${JSON.stringify(t)}`);for(const n in t)if(t.hasOwnProperty(n))return!1;return!0}function Hg(t,n,e){if(null!=e&&t.indexOf(e)<0)throw new We(`${e} is not a valid ${n}.  Valid values are ${t} or null/undefined.`)}function T9(t,n,e=0,i=1/0){return zc(e>=0),zc(i>=e),Array.isArray(t)&&t.length>=e&&t.length<=i&&t.every(s=>typeof s===n)}function ta(t,n){Array.isArray(t)?(le(t.length>0,()=>`${n} is unexpectedly an empty array.`),t.forEach((e,i)=>ta(e,`element ${i+1} of ${n}`))):le(Number.isInteger(t)&&t>0,()=>`Expected ${n} to be a positive integer, but got ${o_e(t)}.`)}function o_e(t){return null===t?"null":Array.isArray(t)?"["+t.map(n=>o_e(n)).join(",")+"]":"string"==typeof t?`"${t}"`:`${t}`}function a_e(t){return"relu"===t?"relu":"linear"===t?"linear":"elu"===t?"elu":null}let S_t=0;function l_e(){return S_t++}const DN={};function MN(t=""){return t in DN||(DN[t]=0),DN[t]+=1,t+DN[t].toString()}const C_t=["channelsFirst","channelsLast"],x_t=["nearest","bilinear"],E_t=["valid","same","causal"],T_t=["max","avg"],I_t=["sum","mul","concat","ave"],A1=new Map;function Qr(t){Hg(C_t,"DataFormat",t)}function Uc(t){Hg(E_t,"PaddingMode",t)}function c_e(t){Hg(T_t,"PoolMode",t)}const EE=[];function Wg(t,n){EE.push(t);try{const e=n();return EE.pop(),e}catch(e){throw EE.pop(),e}}function d_e(t){if(!f_e(t))throw new Error("Not a valid tensor name: '"+t+"'");return function D_t(){return 0===EE.length?"":EE.join("/")+"/"}()+t}function h_e(t){if(!f_e(t))throw new Error("Not a valid tensor name: '"+t+"'");A1.has(t)||A1.set(t,0);const n=A1.get(t);if(A1.set(t,A1.get(t)+1),n>0){const e=`${t}_${n}`;return A1.set(e,1),e}return t}const M_t=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function f_e(t){return!!t.match(M_t)}function A_t(t){return t===parseInt(t.toString(),10)}function hm(t,n,e){null==n&&(n=0),null==e&&(e=t.length);let i=1;for(let s=n;s<e;++s)i*=t[s];return i}function O1(t){if(0===t.length)return Number.NaN;let n=Number.POSITIVE_INFINITY;for(let e=0;e<t.length;e++){const i=t[e];i<n&&(n=i)}return n}function fm(t){if(0===t.length)return Number.NaN;let n=Number.NEGATIVE_INFINITY;for(let e=0;e<t.length;e++){const i=t[e];i>n&&(n=i)}return n}function gd(t,n){if(n<t)throw new We(`end (${n}) < begin (${t}) is forbidden.`);const e=[];for(let i=t;i<n;++i)e.push(i);return e}let AN;function Ro(){return null==AN&&(AN=Sfe().epsilon()),AN}function vh(t,n){return Ht(t,n)}function TE(t,n=-1){const e=t.shape.slice();return n<0&&(n=e.length+n+1),e.splice(n,0,1),Ge(t,e)}function qg(t,n,e){return et(()=>{switch(t.rank){case 1:return _N(t,n,e);case 2:return F7(t,[n,0],[e,t.shape[1]]);case 3:return gN(t,[n,0,0],[e,t.shape[1],t.shape[2]]);case 4:return vE(t,[n,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3]]);case 5:return is(t,[n,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return is(t,[n,0,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new We(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function I9(t,n,e){return et(()=>{switch(t.rank){case 1:return _N(t,n,e);case 2:return F7(t,[0,n],[t.shape[0],e]);case 3:return gN(t,[0,0,n],[t.shape[0],t.shape[1],e]);case 4:return vE(t,[0,0,0,n],[t.shape[0],t.shape[1],t.shape[2],e]);default:throw new We(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function ON(t,n,e,i){return et(()=>{switch(t.rank){case 1:return _N(t,n,e);case 2:switch(i){case 1:return qg(t,n,e);case 2:return I9(t,n,e);default:throw new We(`The axis is not within the rank of the tensor ${i}`)}case 3:switch(i){case 1:return qg(t,n,e);case 2:return gN(t,[0,n,0],[t.shape[0],e,t.shape[2]]);case 3:return I9(t,n,e);default:throw new We(`The axis is not within the rank of the tensor ${i}`)}case 4:switch(i){case 1:return qg(t,n,e);case 2:return vE(t,[0,n,0,0],[t.shape[0],e,t.shape[2],t.shape[3]]);case 3:return vE(t,[0,0,n,0],[t.shape[0],t.shape[1],e,t.shape[3]]);case 4:return I9(t,n,e);default:throw new We(`The axis is not within the rank of the tensor ${i}`)}default:throw new We(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function k9(t,n=-1){let e;return n<0&&(e=t[0].rank,n=0!==e?e:0),n===t[0].rank&&(n=-1),Xr(t,n)}function m_e(t,n){switch(t.rank){case 1:return Dpe([t,n]);case 2:return Mpe([t,n],0);case 3:return Ape([t,n],0);case 4:return Ope([t,n],0);default:throw new We(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function D9(t,n){if(Array.isArray(n)||(n=[n]),t.rank!==n.length)throw new We(`The length of input n (${n.length}) does not match the number of dimensions in input x (${t.rank})`);return vu(t,n)}function NN(t,n=0,e=1,i,s){return T7(t,n,e,i,s)}function yh(t,n,e,i){if(t.rank<2||n.rank<2)throw new _i(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${n.shape}`);if(n.rank>=3&&t.shape.slice(-1)[0]!==n.shape.slice(-2)[0])throw new _i(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${n.shape}`);if(2===t.rank&&2===n.rank)return q7({a:t,b:n,transposeA:!1,transposeB:!1,bias:i?M9(t.rank,i,"channelsLast"):null,activation:e});{const s=t.shape.slice(),r=s.pop();t=Ge(t,[-1,r]);const o=n.shape.slice(),a=o.pop(),l=o.pop(),c=[...o,a],u=Array.from({length:n.rank},(p,g)=>0===g?n.rank-2:g<=n.rank-2?g-1:g);n=Ge(ss(n,u),[l,-1]);const d=[...s,...c];return Ge(q7({a:t,b:n,transposeA:!1,transposeB:!1,bias:i?M9(t.rank,i,"channelsLast"):null,activation:e}),d)}}function __e(t,n,e){return et(()=>(n=Array.isArray(n)?Fa(n,"int32"):Ht(n,"int32"),_E(t,n,e)))}function IE(t){return Be(t,t)}function M9(t,n,e){const i=n.shape;if(1!==n.rank&&n.rank!==t)throw new We(`Unexpected bias dimensions: ${n.rank}; expected it to be 1 or ${t}`);if(5===t){if("channelsFirst"===e)return Ge(n,1===i.length?[1,i[0],1,1,1]:[1,i[3],i[0],i[1],i[2]]);if("channelsLast"===e)return Ge(n,1===i.length?[1,1,1,1,i[0]]:[1].concat(i))}else if(4===t){if("channelsFirst"===e)return Ge(n,1===i.length?[1,i[0],1,1]:[1,i[2],i[0],i[1]]);if("channelsLast"===e)return Ge(n,1===i.length?[1,1,1,i[0]]:[1].concat(i))}else if(3===t){if("channelsFirst"===e)return Ge(n,1===i.length?[1,i[0],1]:[1,i[1],i[0]]);if("channelsLast"===e)return Ge(n,1===i.length?[1,1,i[0]]:[1].concat(i))}else if(t<3)return n;throw new We(`Unsupported input rank by biasAdd: ${n.rank}`)}function vd(t,n,e){return et(()=>(null==e&&(e="channelsLast"),Qr(e),kt(t,M9(t.rank,n,e))))}function g_e(t,n,e,i){return et(()=>ume(t,n,e,i))}function kE(t,n,e=!1){return e?t():n()}const V_t=["fanIn","fanOut","fanAvg"],z_t=["normal","uniform","truncatedNormal"];class Eu extends g1{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}At((()=>{class t extends Eu{apply(e,i){return No(e,i)}}return t.className="Zeros",t})());let b_e=(()=>{class t extends Eu{apply(e,i){return oc(e,i)}}return t.className="Ones",t})();At(b_e),At((()=>{class t extends Eu{constructor(e){if(super(),"object"!=typeof e)throw new We(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new We(`config must have value set but got ${e}`);this.value=e.value}apply(e,i){return et(()=>Be(En(this.value),oc(e,i)))}getConfig(){return{value:this.value}}}return t.className="Constant",t})()),At((()=>{class t extends Eu{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,i){return Bg(e,this.minval,this.maxval,i,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}return t.className="RandomUniform",t})()),At((()=>{class t extends Eu{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,i){if("float32"!==(i=i||"float32")&&"int32"!==i)throw new _i(`randomNormal does not support dType ${i}.`);return NN(e,this.mean,this.stddev,i,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="RandomNormal",t})()),At((()=>{class t extends Eu{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,i){if("float32"!==(i=i||"float32")&&"int32"!==i)throw new _i(`truncatedNormal does not support dType ${i}.`);return B7(e,this.mean,this.stddev,i,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="TruncatedNormal",t})()),At((()=>{class t extends Eu{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,i){return et(()=>{if(2!==e.length||e[0]!==e[1])throw new We("Identity matrix initializer can only be used for 2D square matrices.");return Be(this.gain,v7(e[0]))})}getConfig(){return{gain:this.gain}}}return t.className="Identity",t})());let Gc=(()=>{class t extends Eu{constructor(e){if(super(),e.scale<0)throw new We(`scale must be a positive float. Got: ${e.scale}`);this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,function U_t(t){Hg(V_t,"FanMode",t)}(this.mode),this.distribution=null==e.distribution?"normal":e.distribution,function G_t(t){Hg(z_t,"Distribution",t)}(this.distribution),this.seed=e.seed}apply(e,i){const s=function j_t(t,n="channelsLast"){let e,i;if(Qr(n),2===t.length)e=t[0],i=t[1];else if(-1!==[3,4,5].indexOf(t.length)){if("channelsFirst"===n){const s=hm(t,2);e=t[1]*s,i=t[0]*s}else if("channelsLast"===n){const s=hm(t,0,t.length-2);e=t[t.length-2]*s,i=t[t.length-1]*s}}else{const s=hm(t);e=Math.sqrt(s),i=Math.sqrt(s)}return[e,i]}(e),r=s[0],o=s[1];let a=this.scale;if(a/="fanIn"===this.mode?Math.max(1,r):"fanOut"===this.mode?Math.max(1,o):Math.max(1,(r+o)/2),"normal"===this.distribution){const l=Math.sqrt(a);if("float32"!==(i=i||"float32")&&"int32"!==i)throw new _i(`${this.getClassName()} does not support dType ${i}.`);return B7(e,0,l,i,this.seed)}{const l=Math.sqrt(3*a);return Bg(e,-l,l,i,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}return t.className="VarianceScaling",t})();At(Gc);let v_e=(()=>{class t extends Gc{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return Gc.className}}return t.className="GlorotUniform",t})();At(v_e);let y_e=(()=>{class t extends Gc{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return Gc.className}}return t.className="GlorotNormal",t})();At(y_e);let w_e=(()=>{class t extends Gc{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return Gc.className}}return t.className="HeNormal",t})();At(w_e);let S_e=(()=>{class t extends Gc{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return Gc.className}}return t.className="HeUniform",t})();At(S_e);let C_e=(()=>{class t extends Gc{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return Gc.className}}return t.className="LeCunNormal",t})();At(C_e);let x_e=(()=>{class t extends Gc{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return Gc.className}}return t.className="LeCunUniform",t})();At(x_e),At((()=>{class t extends Eu{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,i){return et(()=>{if(e.length<2)throw new _i("Shape must be at least 2D.");if("int32"!==i&&"float32"!==i&&void 0!==i)throw new TypeError(`Unsupported data type ${i}.`);const s=at(e.slice(0,-1)),r=e[e.length-1],o=s*r;o>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${o}) elements: Slowness may result.`);const l=NN([Math.max(r,s),Math.min(r,s)],0,1,i,this.seed),c=wme.qr(l,!1);let u=c[0];const h=c[1].flatten().stridedSlice([0],[Math.min(r,s)*Math.min(r,s)],[Math.min(r,s)+1]);return u=Be(u,h.sign()),s<r&&(u=u.transpose()),Be(En(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}return t.className="Orthogonal",t})());const E_e={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function T_e(t,n={}){return xE(t,_u.getMap().classNameMap,n,"initializer")}function Rr(t){return x9(t)}function xr(t){if("string"==typeof t){const n=t in E_e?E_e[t]:t;if("GlorotNormal"===n)return new y_e;if("GlorotUniform"===n)return new v_e;if("HeNormal"===n)return new w_e;if("HeUniform"===n)return new S_e;if("LeCunNormal"===n)return new C_e;if("LeCunUniform"===n)return new x_e;{const e={};return e.className=n,e.config={},T_e(e)}}return t instanceof Eu?t:T_e(t)}function A9(t){return Array.isArray(t)&&Array.isArray(t[0])}function RN(t){return 0===t.length?[]:Array.isArray(t[0])?t:[t]}function qn(t){let n;if(Array.isArray(t)){if(1!==t.length)throw new We(`Expected Tensor length to be 1; got ${t.length}`);n=t[0]}else n=t;return n}function ps(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(1===t.length)return t[0];throw new We(`Expected exactly 1 Shape; got ${t.length}`)}return t}function FN(t){let n=0;for(const e of t)n+=0===e.shape.length?1:e.shape.reduce((i,s)=>i*s);return n}class wh{constructor(n,e="float32",i="Variable",s=!0,r=null){this.dtype=e??"float32",this.shape=n.shape,this.id=l_e(),this.originalName=d_e(i=i??"Variable"),this.name=h_e(this.originalName),this.trainable_=s,this.constraint=r,this.val=lme(n,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(n){return this.assertNotDisposed(),function H_t(t,n){if(t.shape.toString()!==n.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(n.shape))}(this.val,n),this.val.id!==n.id&&(this.val.assign(n),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(n){this.trainable_=n,this.val.trainable=n}}function O9(t){return t.map(n=>n.read())}function N9(t){t.forEach(n=>{n[0].write(n[1])})}class Fo{constructor(n){this.dtype=n.dtype,this.shape=n.shape,this.ndim=null!=n.shape?n.shape.length:n.ndim,this.maxNDim=n.maxNDim,this.minNDim=n.minNDim,this.axes=n.axes||{}}}class Sh{constructor(n,e,i,s,r,o,a){this.dtype=n,this.shape=e,this.sourceLayer=i,this.inputs=s,this.callArgs=r,this.outputTensorIndex=a,this.id=l_e(),null!=o&&(this.originalName=d_e(o),this.name=h_e(this.originalName)),this.rank=e.length}}let W_t=0;class LN{constructor(n,e){this.callArgs=e,this.id=W_t++,this.outboundLayer=n.outboundLayer,this.inboundLayers=n.inboundLayers,this.nodeIndices=n.nodeIndices,this.tensorIndices=n.tensorIndices,this.inputTensors=n.inputTensors,this.outputTensors=n.outputTensors,this.inputMasks=n.inputMasks,this.outputMasks=n.outputMasks,this.inputShapes=n.inputShapes,this.outputShapes=n.outputShapes;for(const i of n.inboundLayers)i?.outboundNodes.push(this);n.outboundLayer.inboundNodes.push(this)}getConfig(){const n=[];for(const e of this.inboundLayers)n.push(null!=e?e.name:null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:n,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let q_t=0;class Bi extends g1{constructor(n={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=q_t++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let e=n.name;if(!e){const i=this.getClassName();e=Nf(i)+"_"+MN(i)}if(this.name=e,this.trainable_=null==n.trainable||n.trainable,null!=n.inputShape||null!=n.batchInputShape){let i;if(null!=n.batchInputShape)i=n.batchInputShape;else if(null!=n.inputShape){let r=null;null!=n.batchSize&&(r=n.batchSize),i=[r].concat(n.inputShape)}this.batchInputShape=i;let s=n.dtype;null==s&&(s=n.inputDType),null==s&&(s="float32"),this.dtype=s}this.initialWeights=null!=n.weights?n.weights:null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(n,e){return n.name+"_ib-"+e.toString()}getNodeAtIndex(n,e){if(0===this.inboundNodes.length)throw new Cu(`The layer has never been called and thus has no defined ${e}.`);if(this.inboundNodes.length<=n)throw new We(`Asked to get ${e} at node ${n}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[n]}getInputAt(n){return Il(this.getNodeAtIndex(n,"input").inputTensors)}getOutputAt(n){return Il(this.getNodeAtIndex(n,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new bh(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(0===this.inboundNodes.length)throw new bh(`Layer ${this.name} is not connected, no input to return.`);return Il(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new bh(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new bh(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Il(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(n=>n())}get updates(){return this._updates}get built(){return this._built}set built(n){this._built=n}get trainable(){return this.trainable_}set trainable(n){this._trainableWeights.forEach(e=>e.trainable=n),this.trainable_=n}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(n=>n.trainable):[]}set trainableWeights(n){this._trainableWeights=n}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(n=>!n.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(n){this._nonTrainableWeights=n}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(n){const e=As(n);if(null==this.inputSpec||0===this.inputSpec.length)return;const i=As(this.inputSpec);if(e.length!==i.length)throw new We(`Layer ${this.name} expects ${i.length} inputs, but it received ${e.length} input tensors. Input received: ${n}`);for(let s=0;s<e.length;s++){const r=e[s],o=i[s];if(null==o)continue;const a=r.rank;if(null!=o.ndim&&a!==o.ndim)throw new We(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(null!=o.maxNDim&&a>o.maxNDim)throw new We(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(null!=o.minNDim&&a<o.minNDim)throw new We(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(null!=o.dtype&&r.dtype!==o.dtype)throw new We(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${r.dtype}.`);if(o.axes){const l=r.shape;for(const c in o.axes){const u=Number(c),d=o.axes[c];if(null!=d&&-1===[d,null].indexOf(u>=0?l[u]:l[l.length+u]))throw new We(`Input ${s} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(null!=o.shape)for(let l=0;l<o.shape.length;++l){const c=o.shape[l],u=r.shape[l];if(null!=c&&null!=u&&c!==u)throw new We(`Input ${s} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${r.shape}.`)}}}call(n,e){return n}invokeCallHook(n,e){null!=this._callHook&&this._callHook(n,e)}setCallHook(n){this._callHook=n}clearCallHook(){this._callHook=null}apply(n,e){e=e||{},this.assertNotDisposed();const i=As(n),s=function Y_t(t){let n=!0;for(const e of As(t))if(!(e instanceof Sh)){n=!1;break}return n}(n),r=function Z_t(t){let n=!0;for(const e of As(t))if(e instanceof Sh){n=!1;break}return n}(n);if(s===r)throw new We("Arguments to apply() must be all SymbolicTensors or all Tensors");return Wg(this.name,()=>{if(!this.built){this.assertInputCompatibility(n);const o=[];for(const a of As(n))o.push(a.shape);this.build(Il(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&r&&(this._refCount=1)}if(this.assertInputCompatibility(n),r){let o=this.call(n,e);this.supportsMasking&&this.setMaskMetadata(n,o);const a=As(o),l=[];for(let c of a)-1!==i.indexOf(c)&&(c=c.clone()),l.push(c);if(o=Il(l),null!=this.activityRegularizer)throw new _i("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}{const o=function K_t(t){t=As(t);const n=[];for(const e of t)n.push(e.shape);return Il(n)}(n),a=this.computeOutputShape(o);let l;const c="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(n)?o[0]:o),l=null!=a&&a.length>0&&Array.isArray(a[0])?a.map((u,d)=>new Sh(c,u,this,As(n),e,this.name,d)):new Sh(c,a,this,As(n),e,this.name),this.addInboundNode(n,l,null,null,o,a,e),this._refCount++,null!=this.activityRegularizer)throw new _i("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(n){if(null!=this.batchInputShape)if(n.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(n)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let e=!1;this.batchInputShape.forEach((i,s)=>{null!=i&&null!=n[s]&&n[s]!==i&&(e=!0)}),e&&console.warn(`The shape of the input tensor (${JSON.stringify(n)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new bh(`The layer ${this.name} has never been called and thus has no defined output shape.`);const n=[];for(const e of this.inboundNodes){const i=JSON.stringify(e.outputShapes);-1===n.indexOf(i)&&n.push(i)}if(1===n.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new bh(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Cu(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return FN(this.weights)}build(n){this.built=!0}getWeights(n=!1){return O9(n?this.trainableWeights:this.weights)}setWeights(n){et(()=>{const e=this.weights;if(e.length!==n.length)throw new We(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${n.length}, but the layer was expecting ${e.length} weights. Provided weights: ${n}...`);if(0===e.length)return;const i=[],s=O9(e);for(let r=0;r<s.length;++r){const o=s[r],a=e[r],l=n[r];if(!Qi(o.shape,l.shape))throw new We(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);i.push([a,l])}N9(i)})}addWeight(n,e,i,s,r,o,a,l){if(-1!==this._addedWeightNames.indexOf(n))throw new We(`Duplicate weight name ${n} for layer ${this.name}`);this._addedWeightNames.push(n),null==i&&(i="float32"),this.fastWeightInitDuringBuild&&(s=null!=l?l():xr("zeros"));const c=s.apply(e,i),u=new wh(c,i,n,o,a);return c.dispose(),null!=r&&this.addLoss(()=>r.apply(u.read())),null==o&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(n){this.fastWeightInitDuringBuild=n}addLoss(n){null==n||Array.isArray(n)&&0===n.length||(n=As(n),null!=this._losses&&this.losses.push(...n))}computeOutputShape(n){return n}computeMask(n,e){if(!this.supportsMasking){if(null!=e){if(!Array.isArray(e))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);e.forEach(i=>{if(null!=i)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)})}return null}return e}setMaskMetadata(n,e,i){if(!this.supportsMasking)return;const s=this.computeMask(n,i),r=As(e),o=As(s);if(r.length!==o.length)throw new Error(`${this.name} outputs ${r.length} tensors but ${r.length} masks for those tensors`);for(let a=0;a<r.length;a++)r[a].kerasMask=o[a]}addInboundNode(n,e,i,s,r,o,a=null){const l=As(n);e=As(e),i=As(i),s=As(s),r=RN(r),o=RN(o);const c=[],u=[],d=[];for(const h of l)c.push(h.sourceLayer),u.push(h.nodeIndex),d.push(h.tensorIndex);new LN({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:e,inputMasks:i,outputMasks:s,inputShapes:r,outputShapes:o},a);for(let h=0;h<e.length;h++)e[h].sourceLayer=this,e[h].nodeIndex=this.inboundNodes.length-1,e[h].tensorIndex=h}getConfig(){const n={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(n.batchInputShape=this.batchInputShape),null!=this.dtype&&(n.dtype=this.dtype),n}disposeWeights(){return this.weights.forEach(n=>n.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let n=0;return 0==--this._refCount&&(n=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:n}}}function k_e(t,n,e){if((null==n||null!=e&&e>0)&&(n=t.sourceLayer,e=t.nodeIndex),0===n.inboundNodes.length)return[t];{const i=n.inboundNodes[e];if(0===i.inboundLayers.length)return i.inputTensors;{const s=[];for(let r=0;r<i.inboundLayers.length;r++){const c=k_e(i.inputTensors[r],i.inboundLayers[r],i.nodeIndices[r]);for(const u of c)-1===s.indexOf(u)&&s.push(u)}return s}}}let PN=(()=>{class t extends Bi{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:MN("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new We("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let i=e.batchInputShape;if(null==i){if(null==e.inputShape)throw new We("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");i=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new We("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const s=e.dtype||"float32";this.batchInputShape=i,this.dtype=s,this.inputSpec=[{shape:i}];const r=new Sh(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new LN({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[i],outputShapes:[i]})}apply(e,i){throw new We(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}return t.className="InputLayer",t})();At(PN);class pm{constructor(n){if(this.id2Value={},this.id2Mask={},this.name2Id={},n instanceof pm)for(const e in n.id2Value)this.id2Value[e]=n.id2Value[e],e in n.id2Mask&&(this.id2Mask[e]=n.id2Mask[e]);else{if(null==n)return;for(const e of n)this.add(e.key,e.value)}}add(n,e,i){if(null!=this.id2Value[n.id])throw new We(`Duplicate key: name=${n.name}, id=${n.id}`);return this.id2Value[n.id]=function J_t(t,n){if(null==t.dtype||t.dtype===n.dtype)return n;try{return Ht(n,t.dtype)}catch{throw new We(`The dtype of the feed (${n.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}(n,e),this.name2Id[n.name]=n.id,null!=i&&(this.id2Mask[n.id]=i),this}addFeed(n){this.add(n.key,n.value)}hasKey(n){return null!=this.id2Value[n.id]}names(){return Object.keys(this.name2Id)}getValue(n){if(n instanceof Sh){if(null==this.id2Value[n.id])throw new We(`Nonexistent key: ${n.name}`);return this.id2Value[n.id]}{const e=this.name2Id[n];if(null==e)throw new We(`Feed dict has no SymbolicTensor name: ${n}`);return this.id2Value[e]}}getMask(n){if(n instanceof Sh){if(null==this.id2Value[n.id])throw new We(`Nonexistent key: ${n.name}`);return this.id2Mask[n.id]}{const e=this.name2Id[n];if(null==e)throw new We(`Feed dict has no SymbolicTensor name: ${n}`);return this.id2Mask[e]}}disposeMasks(){null!=this.id2Mask&&Ci(this.id2Mask)}}const $N=new s_e,BN=new s_e;function DE(t,n,e,i){const s=null!=e&&e.training,r=Array.isArray(t),o=r?t:[t],a=o.map(p=>p.name),l=[],c=n.names();for(const p of a)-1!==c.indexOf(p)?l.push(n.getValue(p)):l.push(null);null!=i&&(i.maxNumTensors=-1/0,i.minNumTensors=1/0);const u=a.join(",")+"|"+n.names().sort().join(",");let h,d=$N.get(u);if(null==d){const p=function tgt(t,n){le(null!=t&&t.length>0,()=>"Expected at least one fetch, got none");let e=[],i={};if(1===t.length){const s=D_e(t[0],n);e=s.sorted,i=s.recipientMap}else{const s=new Set;for(const r of t){const{sorted:o,recipientMap:a}=D_e(r,n);for(const l of o)s.has(l.name)||(e.push(l),s.add(l.name));for(const l in a)null==i[l]&&(i[l]=new Set),a[l].forEach(c=>i[l].add(c))}}return{sorted:e,recipientCounts:ngt(i)}}(o,n);d=p.sorted,h=p.recipientCounts,$N.put(u,d),BN.put(u,h)}h={},s||Object.assign(h,BN.get(u));const f=new pm(n);for(let p=0;p<d.length;++p){if(null!=i){const X=Tz().numTensors;X>i.maxNumTensors&&(i.maxNumTensors=X),X<i.minNumTensors&&(i.minNumTensors=X)}const g=d[p],v=g.sourceLayer;if(v instanceof PN)continue;const y=[],w=[],E=[];let T=!1;for(const X of g.inputs){const ne=f.getValue(X),me=f.getMask(X);y.push(ne),w.push(me),null!=me&&(T=!0),s||(h[X.name]--,0===h[X.name]&&!n.hasKey(X)&&-1===a.indexOf(X.name)&&!ne.isDisposed&&!0!==X.sourceLayer.stateful&&E.push(ne))}T&&((e=e||{}).mask=w[0]);const L=As(v.apply(y,e));let W=null;v.supportsMasking&&(W=v.computeMask(y,w));const H=igt(g),P=Array.isArray(H)?H:[H];for(let X=0;X<P.length;++X){f.hasKey(P[X])||f.add(P[X],L[X],Array.isArray(W)?W[0]:W);const ne=a.indexOf(P[X].name);-1!==ne&&(l[ne]=L[X])}s||Ci(E)}return f.disposeMasks(),r?l:l[0]}function ngt(t){const n={};for(const e in t)n[e]=t[e].size;return n}function D_e(t,n){const e=new Set,i=[],s={};for(const a of n.names())e.add(a);const r=[],o=[];for(r.push(t);r.length>0;){const a=r[r.length-1];if(e.has(a.name)){r.pop();continue}const l=o[o.length-1]===r.length-1;if(0===a.inputs.length||l)r.pop(),i.push(a),e.add(a.name),l&&o.pop();else{o.push(r.length-1);for(const c of a.inputs)null==s[c.name]&&(s[c.name]=new Set),s[c.name].add(a.name),!e.has(c.name)&&r.push(c)}}return{sorted:i,recipientMap:s}}function igt(t){let n;if(1===t.sourceLayer.inboundNodes.length)n=t.sourceLayer.output;else{let e=null;for(let i=0;i<t.sourceLayer.inboundNodes.length;++i)for(const s of t.sourceLayer.inboundNodes[i].outputTensors)if(s.id===t.id){e=i;break}n=t.sourceLayer.getOutputAt(e)}return n}function R9(t,n){return et(()=>ba(_n(Be(t,t),n,!0)))}nt().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,function egt(t){$N?.setMaxEntries(t),BN?.setMaxEntries(t)});class ME extends g1{getConfig(){return{}}}At((()=>{class t extends ME{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return et(()=>{const i=R9(e,this.axis),s=ic(i,0,this.maxValue);return Be(e,vn(s,kt(Ro(),i)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}return t.className="MaxNorm",t})()),At((()=>{class t extends ME{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return et(()=>vn(e,kt(Ro(),R9(e,this.axis))))}getConfig(){return{axis:this.axis}}}return t.className="UnitNorm",t})()),At((()=>{class t extends ME{apply(e){return mh(e)}}return t.className="NonNeg",t})()),At((()=>{class t extends ME{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return et(()=>{const i=R9(e,this.axis),s=kt(Be(this.rate,ic(i,this.minValue,this.maxValue)),Be(1-this.rate,i));return Be(e,vn(s,kt(Ro(),i)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}return t.className="MinMaxNorm",t})());const M_e={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Lo(t){return x9(t)}function A_e(t,n={}){return xE(t,_u.getMap().classNameMap,n,"constraint")}function Po(t){return null==t?null:"string"==typeof t?A_e({className:t in M_e?M_e[t]:t,config:{}}):t instanceof ME?t:A_e(t)}function mm(t){return F9.apply(this,arguments)}function F9(){return F9=de(function*(t){if(null==t)return;const n=[],e=[],i=[];for(const s in t){const r=t[s];if("number"!=typeof r){const o=r;n.push(o.data()),e.push(s),i.push(o)}}if(n.length>0){const s=yield Promise.all(n);for(let r=0;r<s.length;++r)t[e[r]]=s[r][0];Ci(i)}}),F9.apply(this,arguments)}function O_e(t){if(null!=t)for(const n in t){const e=t[n];"number"!=typeof e&&e.dispose()}}class N1{constructor(){this.validationData=null}setParams(n){this.params=n}onEpochBegin(n,e){return de(function*(){})()}onEpochEnd(n,e){return de(function*(){})()}onBatchBegin(n,e){return de(function*(){})()}onBatchEnd(n,e){return de(function*(){})()}onTrainBegin(n){return de(function*(){})()}onTrainEnd(n){return de(function*(){})()}setModel(n){}}class ogt{constructor(n,e=10){null==n&&(n=[]),this.callbacks=n,this.queueLength=e}append(n){this.callbacks.push(n)}setParams(n){for(const e of this.callbacks)e.setParams(n)}setModel(n){for(const e of this.callbacks)e.setModel(n)}onEpochBegin(n,e){var i=this;return de(function*(){null==e&&(e={});for(const s of i.callbacks)yield s.onEpochBegin(n,e)})()}onEpochEnd(n,e){var i=this;return de(function*(){null==e&&(e={});for(const s of i.callbacks)yield s.onEpochEnd(n,e)})()}onBatchBegin(n,e){var i=this;return de(function*(){null==e&&(e={});for(const s of i.callbacks)yield s.onBatchBegin(n,e)})()}onBatchEnd(n,e){var i=this;return de(function*(){null==e&&(e={});for(const s of i.callbacks)yield s.onBatchEnd(n,e)})()}onTrainBegin(n){var e=this;return de(function*(){null==n&&(n={});for(const i of e.callbacks)yield i.onTrainBegin(n)})()}onTrainEnd(n){var e=this;return de(function*(){null==n&&(n={});for(const i of e.callbacks)yield i.onTrainEnd(n)})()}}class agt extends N1{constructor(){super()}onEpochBegin(n){var e=this;return de(function*(){e.seen=0,e.totals={}})()}onBatchEnd(n,e){var i=this;return de(function*(){null==e&&(e={});const s=null==e.size?0:e.size;i.seen+=s;for(const r in e){const o=e[r];if("number"==typeof o)i.totals.hasOwnProperty(r)||(i.totals[r]=0),i.totals[r]=i.totals[r]+o*s;else{let a;r in i.totals?a=i.totals[r]:i.totals[r]=0;const l=et(()=>kt(i.totals[r],Be(o,s)));i.totals[r]=l,a?.dispose()}}})()}onEpochEnd(n,e){var i=this;return de(function*(){if(null!=e)for(const s of i.params.metrics)null!=i.totals[s]&&("number"==typeof i.totals[s]?e[s]=i.totals[s]/i.seen:et(()=>{const r=Be(vn(1,i.seen),i.totals[s]);e[s]=r,i.totals[s].dispose(),Qo(e[s])}))})()}}class lgt extends N1{onTrainBegin(n){var e=this;return de(function*(){e.epoch=[],e.history={}})()}onEpochEnd(n,e){var i=this;return de(function*(){null==e&&(e={}),i.epoch.push(n);for(const s in e)null==i.history[s]&&(i.history[s]=[]),i.history[s].push(e[s])})()}syncData(){var n=this;return de(function*(){const e=[],i=[],s=[];for(const o in n.history){const a=n.history[o];for(let l=0;l<a.length;++l)"number"!=typeof a[l]&&(e.push(a[l].data()),i.push(o),s.push(l))}const r=yield Promise.all(e);for(let o=0;o<r.length;++o)n.history[i[o]][s[o]].dispose(),n.history[i[o]][s[o]]=r[o][0]})()}}class cgt extends N1{constructor(n,e){if(super(),this.currentEpoch=0,this.nowFunc=n.nowFunc,this.nextFrameFunc=n.nextFrameFunc||Sme,this.yieldEvery=e||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=n.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");iV(this.yieldEvery)&&(this.maybeWait=function w_t(t,n,e){let s,i=null!=e?e():Oa();return(...o)=>{const a=null!=e?e():Oa();return a-i<n||(i=a,s=t(...o)),s}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=n.onTrainBegin,this.trainEnd=n.onTrainEnd,this.epochBegin=n.onEpochBegin,this.epochEnd=n.onEpochEnd,this.batchBegin=n.onBatchBegin,this.batchEnd=n.onBatchEnd,this.yield=n.onYield}maybeWait(n,e,i){var s=this;return de(function*(){const r=[];null!=s.yield&&(yield mm(i),r.push(s.yield(n,e,i))),r.push(s.nextFrameFunc()),yield Promise.all(r)})()}onEpochBegin(n,e){var i=this;return de(function*(){i.currentEpoch=n,null!=i.epochBegin&&(yield mm(e),yield i.epochBegin(n,e))})()}onEpochEnd(n,e){var i=this;return de(function*(){const s=[];null!=i.epochEnd&&(yield mm(e),s.push(i.epochEnd(n,e))),"epoch"===i.yieldEvery&&s.push(i.nextFrameFunc()),yield Promise.all(s)})()}onBatchBegin(n,e){var i=this;return de(function*(){null!=i.batchBegin&&(yield mm(e),yield i.batchBegin(n,e))})()}onBatchEnd(n,e){var i=this;return de(function*(){const s=[];null!=i.batchEnd&&(yield mm(e),s.push(i.batchEnd(n,e))),"batch"===i.yieldEvery?s.push(i.nextFrameFunc()):iV(i.yieldEvery)&&s.push(i.maybeWait(i.currentEpoch,n,e)),yield Promise.all(s)})()}onTrainBegin(n){var e=this;return de(function*(){null!=e.trainBegin&&(yield mm(n),yield e.trainBegin(n))})()}onTrainEnd(n){var e=this;return de(function*(){null!=e.trainEnd&&(yield mm(n),yield e.trainEnd(n))})()}}function N_e(t,n){return null==t&&(t={}),t instanceof N1?[t]:Array.isArray(t)&&t[0]instanceof N1?t:As(t).map(i=>new cgt(i,n))}let ugt=(()=>{class t{constructor(){}static registerCallbackConstructor(e,i){le(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),t.checkForDuplicate(i),null==t.constructors[e]&&(t.constructors[e]=[]),t.constructors[e].push(i)}static checkForDuplicate(e){for(const i in t.constructors)t.constructors[+i].forEach(r=>{if(r===e)throw new We("Duplicate callback constructor.")})}static clear(){t.constructors={}}static createCallbacks(e){const i=[];for(const s in t.constructors){const r=+s;e>=r&&i.push(...t.constructors[r])}return i.map(s=>new s)}}return t.constructors={},t})();function R_e(t,n,e,i,s,r,o,a,l){const c=new lgt,u=[new agt,...ugt.createCallbacks(n)];null!=t&&u.push(...t),u.push(c);const d=new ogt(u);return d.setParams({epochs:e,initialEpoch:i,samples:s,steps:r,batchSize:o,verbose:n,doValidation:a,metrics:l}),{callbackList:d,history:c}}function Rf(t,n={},e=!1){return xE(t,_u.getMap().classNameMap,n,"layer",e)}function VN(t,n){return et(()=>{"float32"!==t.dtype&&(t=Ht(t,"float32"));const e=_n(IE(t),n,!0),i=b1(e.shape,Ro()),s=ba(If(e,i));return vn(t,s)})}function zN(t,n){return et(()=>Gr(IE(tn(n,t)),-1))}function L9(t,n){return et(()=>Gr(Ao(tn(n,t)),-1))}function P9(t,n){return et(()=>{const e=tn(t,n),i=ic(Ao(t),Ro(),Number.MAX_VALUE),s=Ao(vn(e,i));return Be(100,Gr(s,-1))})}function AE(t,n,e=!1){return et(()=>{if(e)n=bN(n);else{const i=_n(n,n.shape.length-1,!0);n=vn(n,i)}return n=ic(n,Ro(),1-Ro()),gr(_n(Be(Ht(t,"float32"),Bc(n)),n.shape.length-1))})}function UN(t,n,e=!1){return et(()=>{const i=Ht(mE(function F_t(t){const n=[hm(t.shape)];return Ge(t,n)}(t)),"int32"),s=(n=ic(n,Ro(),1-Ro())).shape;return AE(Ge(C7(i,s[s.length-1]),s),n,e)})}function GN(t,n){return et(()=>{let e;return e=ic(n,Ro(),1-Ro()),e=Bc(vn(e,tn(1,e))),Gr(function _gt(t,n){if(!Qi(t.shape,n.shape))throw new We(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(n.shape)}`);return et(()=>{const e=mh(n),i=gr(Ao(n));return kt(tn(e,Be(n,t)),lN(sc(i)))})}(t,e),-1)})}function F_e(t,n){return et(()=>{const e=VN(t,-1),i=VN(n,-1),s=Be(e,i);return gr(_n(s,-1))})}const jN={meanSquaredError:zN,meanAbsoluteError:L9,meanAbsolutePercentageError:P9,meanSquaredLogarithmicError:function dgt(t,n){return et(()=>{const e=ic(n,Ro(),Number.MAX_VALUE),i=Bc(kt(1,e)),s=ic(t,Ro(),Number.MAX_VALUE),r=Bc(kt(1,s));return Gr(IE(tn(i,r)),-1)})},squaredHinge:function hgt(t,n){return et(()=>{const e=If(0,tn(1,Be(t,n)));return Gr(IE(e),-1)})},hinge:function fgt(t,n){return et(()=>{const e=If(0,tn(1,Be(t,n)));return Gr(e,-1)})},categoricalHinge:function pgt(t,n){return et(()=>{const e=_n(Be(t,n),-1),i=bu(Be(tn(1,t),n),-1);return If(0,kt(1,tn(i,e)))})},logcosh:function mgt(t,n){return et(()=>{const e=Math.log(2),i=tn(n,t),s=tn(kt(i,x1(Be(-2,i))),e);return Gr(s,-1)})},categoricalCrossentropy:AE,sparseCategoricalCrossentropy:UN,binaryCrossentropy:GN,kullbackLeiblerDivergence:function ggt(t,n){return et(()=>{const e=ic(t,Ro(),1),i=ic(n,Ro(),1);return _n(Be(t,Bc(vn(e,i))),-1)})},poisson:function bgt(t,n){return et(()=>{const e=Bc(kt(Ro(),n));return Gr(tn(n,Be(t,e)),-1)})},cosineProximity:F_e};function $9(t){if("string"==typeof t){if(t in jN)return jN[t];let n=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(n=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new We(n)}return t}function L_e(t,n){return et(()=>{const e=Be(.5,Vc(n)),i=vh(rc(n,e),t.dtype);return Gr(_d(t,i),-1)})}function P_e(t,n){return et(()=>vh(_d(y1(t,-1),y1(n,-1)),"float32"))}function Sgt(t,n){return GN(t,n)}function Cgt(t,n){return t.rank===n.rank&&(t=Vg(t,[t.rank-1])),(n=y1(n,-1)).dtype!==t.dtype&&(n=Ht(n,t.dtype)),Ht(_d(t,n),"float32")}const B_e=AE,V_e=UN,HN={binaryAccuracy:L_e,categoricalAccuracy:P_e,precision:function wgt(t,n){return et(()=>{const e=function $_e(t,n){return et(()=>Ht(_n(ph(_d(t,1),_d(n,1))),"float32"))}(t,n),i=function ygt(t,n){return et(()=>Ht(_n(ph(_d(t,0),_d(n,1))),"float32"))}(t,n),s=kt(e,i);return Ht(Na(rc(s,0),vn(e,s),0),"float32")})},categoricalCrossentropy:B_e,sparseCategoricalCrossentropy:V_e,mse:zN,MSE:zN,mae:L9,MAE:L9,mape:P9,MAPE:P9,cosine:F_e};function Agt(t){if("string"==typeof t&&t in HN)return HN[t];if("string"!=typeof t&&null!=t)return t;throw new We(`Unknown metric ${t}`)}function WN(t){if(zc(null!==t,`Unknown LossOrMetricFn ${t}`),"string"==typeof t)return t;{let n;for(const e of Object.keys(jN))if(jN[e]===t){n=e;break}if(void 0!==n)return n;for(const e of Object.keys(HN))if(HN[e]===t){n=e;break}return void 0!==n?n:t.name}}function U_e(t,n,e=!1){if(null==t||"object"!=typeof t||Object.getPrototypeOf(t)!==Object.prototype||!B9(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(e){const i=JSON.stringify(t);i.length>1048576&&console.warn(`User-defined metadata of model "${n}" is too large in size (length=${i.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function B9(t){if(null===t)return!0;if("object"==typeof t){if(Object.getPrototypeOf(t)===Object.prototype){const n=Object.keys(t);for(const e of n)if("string"!=typeof e||!B9(t[e]))return!1;return!0}if(Array.isArray(t)){for(const n of t)if(!B9(n))return!1;return!0}return!1}{const n=typeof t;return"string"===n||"number"===n||"boolean"===n}}function qN(t,n,e=console.log){let i="";for(let s=0;s<t.length;++s)s>0&&(i=i.slice(0,i.length-1)+" "),i+=t[s],i=i.slice(0,n[s]),i+=" ".repeat(n[s]-i.length);e(i)}function Lgt(t,n,e){let i,s;try{s=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{s="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}qN([`${t.name} (${t.getClassName()})`,s,i,t.countParams().toString()],n,e)}function Pgt(t,n,e,i){let s,r;try{r=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{r="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const o=[];for(const d of t.inboundNodes)if(!(null!=e&&e.length>0&&-1===e.indexOf(d)))for(let h=0;h<d.inboundLayers.length;++h)o.push(`${d.inboundLayers[h].name}[${d.nodeIndices[h]}][${d.tensorIndices[h]}]`);const a=t.name,l=t.getClassName(),c=0===o.length?"":o[0];qN([`${a} (${l})`,r,s,t.countParams().toString(),c],n,i);for(let d=1;d<o.length;++d)qN(["","","","",o[d]],n,i)}function G_e(t,n,e){return("inboundNodes"===t||"outputLayers"===t||"inputLayers"===t)&&0===n&&"string"==typeof e}function V9(t,n){if(null===t)return null;if("string"==typeof t)return jg(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){const e=[],i=t.length;for(let s=0;s<i;++s){const r=t[s];G_e(n,s,r)?e.push(r):e.push(V9(r,n))}return e}{const e={};for(const i of Object.keys(t)){const s=t[i];if("name"===i&&"string"==typeof s)e[i]=s;else{const r=jg(i);e[r]=V9(s,r)}}return e}}function z9(t,n){if(null==t)return null;if("string"==typeof t)return Nf(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){const e=[],i=t.length;for(let s=0;s<i;++s){const r=t[s];G_e(n,s,r)?e.push(r):e.push(z9(r,n))}return e}{const e={};for(const i of Object.keys(t)){const s=t[i];e[Nf(i)]="name"!==i&&"className"!==i||"string"!=typeof s?z9(s,i):s}return e}}class yd extends Bi{constructor(n){if(super({}),this.containerNodes=new Set,this.name=n.name,null==this.name){const w=this.getClassName().toLowerCase();this.name=MN(w)}if(this.supportsMasking=!1,this.trainable_=!0,this.inputs=Array.isArray(n.inputs)?n.inputs.slice():[n.inputs],this.outputs=Array.isArray(n.outputs)?n.outputs.slice():[n.outputs],dm(this.inputs).length!==this.inputs.length)throw new We(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(w=>w.name)}`);dm(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(w=>w.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const w of this.outputs){const T=w.nodeIndex,L=w.tensorIndex;this.outputLayers.push(w.sourceLayer),this.outputLayersNodeIndices.push(T),this.outputLayersTensorIndices.push(L)}for(const w of this.inputs){const E=w.sourceLayer,T=w.nodeIndex,L=w.tensorIndex;zc(0===T,"input layer has >1 nodes"),zc(0===L,"input layer has >1 tensors"),this.inputLayers.push(E),this.inputLayersNodeIndices.push(T),this.inputLayersTensorIndices.push(L)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let w=0;w<this.inputLayers.length;w++){const E=this.inputLayers[w];if(!(E instanceof PN))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${n.inputs}. Input ${w} (0-based) originates from layer type ${E.getClassName()}.`);this.inputNames.push(E.name),this.feedInputShapes.push(E.batchInputShape),this.feedInputNames.push(E.name)}for(const w of this.outputLayers)this.outputNames.push(w.name);this.internalInputShapes=this.inputs.map(w=>w.shape),this.internalOutputShapes=this.outputs.map(w=>w.shape);const e={},i={},s={},r={},o={},a=[],l=(w,E,T,L,W,H)=>{(null==L||null==W||null==H)&&(L=w.sourceLayer,W=w.nodeIndex,H=w.tensorIndex);const P=L.inboundNodes[W];if(-1!==T.indexOf(P))throw new Cu(`The tensor ${w.name} at layer "${L.name}" is part of a cycle.`);if(-1!==E.indexOf(P))return;this.containerNodes.add(yd.nodeKey(L,W)),L.id in o||(o[L.id]=Object.keys(o).length),-1===T.indexOf(P)&&T.push(P);const X=P.inboundLayers.length;for(let ne=0;ne<X;ne++)l(P.inputTensors[ne],E,T,P.inboundLayers[ne],P.nodeIndices[ne],P.tensorIndices[ne]);for(E.push(P);T.indexOf(P)>=0;)T.splice(T.indexOf(P),1);a.push(P)},c=[],u=[];for(const w of this.outputs)l(w,c,u);const d=a.slice().reverse();for(const w of d){i[w.id]=w,w.id in e||(e[w.id]=0);let E=e[w.id];E=Math.max(E,null==s[w.outboundLayer.id]?0:s[w.outboundLayer.id]),s[w.outboundLayer.id]=E,r[w.outboundLayer.id]=w.outboundLayer,e[w.id]=E;for(let L=0;L<w.inboundLayers.length;L++){const P=w.inboundLayers[L].inboundNodes[w.nodeIndices[L]];e[P.id]=Math.max(E+1,null==e[P.id]?0:e[P.id]),i[P.id]=P}}const h={};for(const w in e){const E=e[w];E in h||(h[E]=[]),h[E].push(i[w])}const f={};for(const w in s){const E=s[w];E in f||(f[E]=[]),f[E].push(r[w])}let p=Object.keys(f).map(w=>parseInt(w,10)).sort(kN);this.layers=[];for(const w of p){const E=f[w];E.sort((T,L)=>{const W=o[T.id],H=o[L.id];return W<H?-1:W>H?1:0});for(const T of E)T instanceof yd&&this.internalContainerRefs.push(T),this.layers.push(T)}this.layersByDepth=f,p=Object.keys(h).map(w=>parseInt(w,10)).sort(kN);const g=this.inputs.slice(),v=[];for(const w of p)for(const E of h[w]){const T=E.outboundLayer;if(null!=T){for(const L of E.inputTensors)if(-1===g.indexOf(L))throw new Cu(`Graph disconnected: cannot obtain value for tensor ${L} at layer "${T.name}". The following previous layers were accessed without issue: ${v}`);for(const L of E.outputTensors)g.push(L);v.push(T.name)}}this.nodesByDepth=h;const y=this.layers.map(w=>w.name);for(const w of y){const E=y.filter(T=>T===w).length;if(1!==E)throw new Cu(`The name "${w}" is used ${E} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new LN({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(w=>null),outputMasks:this.outputs.map(w=>null),inputShapes:this.inputs.map(w=>w.shape),outputShapes:this.outputs.map(w=>w.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const n={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(const e of this.layers)n.numDisposedVariables+=e.dispose().numDisposedVariables;for(const e of this.internalContainerRefs)n.numDisposedVariables+=e.dispose().numDisposedVariables}return n.refCountAfterDispose=this._refCount,n}get trainable(){return this.trainable_}set trainable(n){this.layers.forEach(e=>{e._trainableWeights.forEach(i=>i.trainable=n)}),this.trainable_=n}get trainableWeights(){if(this._trainableWeights.length>0)throw new We("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let n=[];for(const e of this.layers)n=n.concat(e.trainableWeights);return n}get nonTrainableWeights(){const n=[];for(const e of this.layers)n.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const i of this.layers)e.push(...i.trainableWeights);return e.concat(n)}return n}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(n,e=!0){const i={};let s=0;const r=(t=>{const n=Object.keys(t);if(0===n.length)return!1;const e=n[0].split("/");return!isNaN(parseInt(e[e.length-1],10))})(n);r&&this.parseWeights(n);for(const a of this.layers)for(const[l,c]of a.weights.entries()){const u=r?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(null!=i[u])throw new We(`Duplicate weight name: ${u}`);i[u]=c,s++}const o=[];for(const a in n){let l=a;if(null==i[a]){const c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(null!=i[l])o.push([i[l],n[a]]);else if(e)throw new We(`Provided weight data has no target variable: ${a}`);delete i[l]}if(e){const a=[];for(const l in i)a.push(l);if(a.length>0)throw new We(`${a.length} of ${s} weights are not set: ${a}`)}N9(o)}parseWeights(n){for(const e in Object.keys(n)){const i=e.split("/"),s=["vars","layer_checkpoint_dependencies"],r=i.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!s.includes(o)).join("/");r!==e&&(n[r]=n[e],delete n[e])}}updatedConfig(){const n=this.getConfig(),e={};return e.className=this.getClassName(),e.config=n,e.kerasVersion="tfjs-layers 4.20.0",e.backend="TensorFlow.js",e}toJSON(n,e=!0){const i=z9(this.updatedConfig());return e?JSON.stringify(i):i}call(n,e){return et(()=>{n=As(n);const i=new pm;for(let s=0;s<this.inputs.length;++s)i.add(this.inputs[s],n[s]);return DE(this.outputs,i,e)})}computeMask(n,e){return et(()=>{let i;return n=As(n),i=null==e?Gg(null,n.length):As(e),this.runInternalGraph(n,i)[1]})}computeOutputShape(n){const e=RN(n);if(e.length!==this.inputLayers.length)throw new We(`Invalid inputShape argument ${n}: model has ${this.inputLayers.length} tensor inputs.`);const i={};for(let a=0;a<e.length;a++)i[this.inputLayers[a].name+"_0_0"]=e[a];const s=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(kN);if(s.length>1)for(const a of s){const l=this.nodesByDepth[a];for(const c of l){const u=c.outboundLayer;if(-1!==this.inputLayers.map(g=>g.id).indexOf(u.id))continue;const d=[];for(let g=0;g<c.inboundLayers.length;g++)d.push(i[`${c.inboundLayers[g].name}_${c.nodeIndices[g]}_${c.tensorIndices[g]}`]);const f=RN(u.computeOutputShape(Il(d))),p=u.inboundNodes.indexOf(c);for(let g=0;g<f.length;g++)i[`${u.name}_${p}_${g}`]=f[g]}}const r=[],o=[];for(let a=0;a<this.outputLayers.length;a++)o.push(`${this.outputLayers[a].name}_${this.outputLayersNodeIndices[a]}_${this.outputLayersTensorIndices[a]}`);for(let a=0;a<o.length;a++){const l=o[a];zc(l in i),r.push(i[l])}return Il(r)}runInternalGraph(n,e){null==e&&(e=Gg(null,n.length));const i={};for(let l=0;l<this.inputs.length;++l)i[this.inputs[l].id]=[n[l],e[l]];const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(kN);for(const l of s){const c=this.nodesByDepth[l];for(const u of c){const d=u.outboundLayer,h=u.inputTensors,f=u.outputTensors,p=new Array;for(const g of h)g.id in i&&p.push(i[g.id]);if(p.length===h.length){let v,y,w,E,g={};if(null!=u.callArgs&&(g=u.callArgs),1===p.length){const[T,L]=p[0];null==g.mask&&(g.mask=L),w=As(d.call(T,g)),E=As(d.computeMask(T,L)),v=[T],y=[L]}else v=p.map(T=>T[0]),y=p.map(T=>T[1]),null==g.mask&&(g.mask=y),w=As(d.call(v,g)),E=As(d.computeMask(v,y));if(d.activityRegularizer)throw new _i("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let T=0;T<f.length;++T)i[f[T].id]=[w[T],E[T]]}}}const r=[],o=[],a=[];for(const l of this.outputs){zc(l.id in i,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=i[l.id];a.push(c.shape),r.push(c),o.push(u)}return[r,o,a]}buildNodeConversionMap(n){const e={};let i;for(const s of this.layers){i=s instanceof yd?1:0;for(let r=0;r<s.inboundNodes.length;r++){const o=yd.nodeKey(s,r);this.containerNodes.has(o)&&(e[o]=i,i+=1)}}return e}getLayer(n,e){if(null!=e)return this.findLayer(e);if(null==n)throw new We("Provide either a layer name or layer index");if("number"==typeof n)return this.findLayer(n);for(const i of this.layers)if(i.name===n)return i;throw new We(`No such layer: ${n}`)}findLayer(n){if(this.layers.length<=n)throw new We(`Was asked to retrieve layer at index ${n}, but model only has ${this.layers.length} layer(s).`);return this.layers[n]}calculateLosses(){return et(()=>{const n=[];for(const e of this.layers)for(let i=0;i<e.inboundNodes.length;++i){const s=yd.nodeKey(e,i);this.containerNodes.has(s)&&n.push(...e.calculateLosses())}return n})}getConfig(){const n={name:this.name},e=this.buildNodeConversionMap(this.layers),i=[];for(const o of this.layers){const a=o.getClassName(),l=o.getConfig(),c=[];for(let d=0;d<o.inboundNodes.length;d++){const h=o.inboundNodes[d],f=yd.nodeKey(o,d);let p={};if(this.containerNodes.has(f)){if(h.callArgs)try{JSON.stringify(h.callArgs),p=h.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${h.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(h.inboundLayers.length>0){const g=[];for(let v=0;v<h.inboundLayers.length;v++){const y=h.inboundLayers[v],E=h.tensorIndices[v];let L=e[yd.nodeKey(y,h.nodeIndices[v])];null==L&&(L=0),g.push([y.name,L,E,p])}c.push(g)}}}const u={};u.name=o.name,u.className=a,u.config=l,u.inboundNodes=c,i.push(u)}n.layers=i;const s=[];for(let o=0;o<this.inputLayers.length;o++){const a=this.inputLayers[o],c=yd.nodeKey(a,this.inputLayersNodeIndices[o]);if(!this.containerNodes.has(c))continue;let u=e[c];null==u&&(u=0),s.push([a.name,u,this.inputLayersTensorIndices[o]])}n.inputLayers=s;const r=[];for(let o=0;o<this.outputLayers.length;o++){const a=this.outputLayers[o],c=yd.nodeKey(a,this.outputLayersNodeIndices[o]);if(!this.containerNodes.has(c))continue;let u=e[c];null==u&&(u=0),r.push([a.name,u,this.outputLayersTensorIndices[o]])}return n.outputLayers=r,n}static fromConfig(n,e,i={},s=!1){const r={},o={};function a(v,y){v.name in o?o[v.name].push(y):o[v.name]=[y]}function l(v,y){const w=[];let E;for(const T of y){const L=T[0],W=T[1],H=T[2];if(E=null==T[3]?{}:T[3],!(L in r))return void a(v,y);const P=r[L];if(P.inboundNodes.length<=W)return void a(v,y);w.push(P.inboundNodes[W].outputTensors[H])}w.length>0&&v.apply(Il(w),E)}function c(v){const y=v.name,w=Rf(v,null!=e.customObjects?e.customObjects:{});w.setFastWeightInitDuringBuild(s),r[y]=w,v.inboundNodes.forEach(T=>{if(!(T instanceof Array))throw new We(`Corrupted configuration, expected array for nodeData: ${T}`);a(w,T)})}const u=e.name,d=e.layers;for(const v of d)c(v);for(;!y_t(o);)for(const v of d){const y=r[v.name];if(y.name in o){const w=o[y.name];delete o[y.name];for(const E of w)l(y,E)}}const h=[],f=[],p=e.inputLayers;for(const v of p){const y=v[0],w=v[1],E=v[2];zc(y in r),h.push(r[y].inboundNodes[w].outputTensors[E])}const g=e.outputLayers;for(const v of g){const y=v[0],w=v[1],E=v[2];zc(y in r),f.push(r[y].inboundNodes[w].outputTensors[E])}return new n({inputs:h,outputs:f,name:u})}get stateful(){if(this._stateful)throw new We("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const n of this.layers)if(n.stateful)return!0;return!1}resetStates(){et(()=>{this.layers.forEach(n=>{n.stateful&&n.resetStates()})})}}function H_e(t,n){return function j_e(t,n,e){const i=n.length;if(null==t||Array.isArray(t)&&0===t.length)return n.map(s=>null);if(1===i)return Array.isArray(t)&&1===t.length?t:"object"==typeof t&&n[0]in t?[t[n[0]]]:[t];if(Array.isArray(t)){if(t.length!==i)throw new Error(`Provided ${e} is an array of ${t.length} element(s), but the model has ${i} outputs. Make sure a set of weights is provided for each model output.`);return t}if("object"==typeof t&&Object.keys(t).length>0&&"object"==typeof t[Object.keys(t)[0]]){const s=[];return n.forEach(r=>{s.push(r in t?t[r]:null)}),s}throw new Error(`The model has multiple (${i}) outputs, so ${e} must be either an array with ${i} elements or an object with ${n} keys. Provided ${e} not understood: ${JSON.stringify(t)}`)}(t,n,"classWeight")}function W_e(t,n,e,i){return G9.apply(this,arguments)}function G9(){return G9=de(function*(t,n,e,i){if(null!=n||null!=i)throw new Error("Support sampleWeight is not implemented yet");if(null!=e){const s=et(()=>{if(1===t.shape.length)return xf(t);if(2===t.shape.length){if(t.shape[1]>1)return y1(t,1);if(1===t.shape[1])return Ge(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),r=Array.from(yield s.data());Ci(s);const o=[];return r.forEach(a=>{if(null==e[a])throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);o.push(e[a])}),Fa(o,"float32")}return null}),G9.apply(this,arguments)}function Bgt(t,n){return Be(t,n)}function q_e(t,n){let e,i;e=n.xs,i=n.ys,le(null!=e&&null!=i,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${n}`);const r=K_e("input",t.inputNames,e),o=K_e("output",t.outputNames,i),a=r[0].shape[0];le(r.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${r.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),le(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<r.length;l++)le(r[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${r[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)le(o[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:r,ys:o}}function K_e(t,n,e){if(e instanceof Ps)return[e];if(Array.isArray(e))return le(e.length===n.length,()=>`Received an array of ${e.length} Tensors, but expected ${n.length} to match the ${t} keys ${n}.`),e;{const i=[];for(const s of n){if(null==e[s])throw new We(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);i.push(e[s])}return i}}function j9(){return j9=de(function*(t,n,e){const i=null!=e.batchesPerEpoch;if(le(null!=t.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),le(null!=e,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),le(null!=e.epochs&&e.epochs>0&&Number.isInteger(e.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${e.epochs}`),le(!i||e.batchesPerEpoch>0&&Number.isInteger(e.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${e.batchesPerEpoch}`),le(null==e.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=null!=e.validationData;let r,o;if(s)if(X_e(e.validationData))le(null==e.validationBatches||e.validationBatches>0&&Number.isInteger(e.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${e.validationBatches}`);else{const v=function zgt(t){if(3===t.length)throw new _i("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}(e.validationData);r=v.xs,o=v.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;c=s?l.slice().concat(l.map(v=>"val_"+v)):l.slice();const u=N_e(e.callbacks,e.yieldEvery),d=null==e.verbose?1:e.verbose,{callbackList:h,history:f}=R_e(u,d,e.epochs,null,null,function Ggt(t,n){let e=null;return null!=n.batchesPerEpoch?e=n.batchesPerEpoch:Number.isFinite(t.size)&&(e=t.size),e}(n,e),null,s,c);h.setModel(t),t.history=f,yield h.onTrainBegin(),t.stopTraining_=!1;let p=null==e.initialEpoch?0:e.initialEpoch,g=yield n.iterator();for(;p<e.epochs;){const v={};yield h.onEpochBegin(p);let y=0,w=0;for(i||(g=yield n.iterator());!i||y<e.batchesPerEpoch;){const E=yield g.next();if(i&&E.done){console.warn(`You provided \`batchesPerEpoch\` as ${e.batchesPerEpoch}, but your dataset iterator ran out of data after ${y} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${e.batchesPerEpoch*e.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(null!=E.value){const{xs:T,ys:L}=q_e(t,E.value),W={};W.batch=w,W.size=T[0].shape[0],yield h.onBatchBegin(w,W);const H=[];if(null!=e.classWeight){const ne=H_e(e.classWeight,t.outputNames);for(let me=0;me<ne.length;++me)H.push(yield W_e(L[me],null,ne[me]))}const P=T.concat(L).concat(H),X=a(P);Ci(P);for(let ne=0;ne<l.length;++ne){const Ee=X[ne];W[l[ne]]=Ee,Qo(Ee)}yield h.onBatchEnd(w,W),O_e(W),w++,y++}if(i?y>=e.batchesPerEpoch:E.done){if(s){let T;T=X_e(e.validationData)?As(yield t.evaluateDataset(e.validationData,{batches:e.validationBatches})):As(t.evaluate(r,o,{batchSize:null==e.validationBatchSize?32:e.validationBatchSize,verbose:0}));for(let L=0;L<t.metricsNames.length;++L)v[`val_${t.metricsNames[L]}`]=T[L]}break}if(t.stopTraining_)break}if(yield h.onEpochEnd(p,v),p++,t.stopTraining_)break}return yield h.onTrainEnd(),yield t.history.syncData(),t.history}finally{t.isTraining=!1}}),j9.apply(this,arguments)}function X_e(t){return"function"==typeof t.iterator}function H9(){return H9=de(function*(t,n,e){const i=null!=(e=e||{}).batches,s=t.testFunction;let r=[];if(e.verbose>0)throw new _i("Verbose mode is not implemented yet.");le(!i||e.batches>0&&Number.isInteger(e.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(e.batches)}`);const o=function jgt(t){return"function"==typeof t.next}(n)?n:yield n.iterator();let a=0,l=0;for(;!i||l<e.batches;){const c=yield o.next();if(r=et(()=>{if(c.value){const{xs:u,ys:d}=q_e(t,c.value),h=u.concat(d),f=et(()=>s(h));if(Ci(h),0===l)for(let g=0;g<f.length;++g)r.push(En(0));const p=h[0].shape[0];for(let g=0;g<f.length;++g){const v=f[g],y=r[g];r[g]=et(()=>kt(r[g],Be(p,v))),l>0&&Ci(y)}Ci(f),a+=p,++l}return r}),c.done){i&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${e.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<r.length;++c){const u=r[c];r[c]=vn(r[c],a),Ci(u)}return Il(r)}),H9.apply(this,arguments)}function W9(t){le(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function OE(t,n,e){return null==t?[null]:Array.isArray(t)?t.map(i=>qg(i,n,e-n)):qg(t,n,e-n)}function q9(t,n){return et(()=>null==t?null:Array.isArray(t)?t.map(e=>q9(e,n)):__e(t,"int32"===n.dtype?n:Ht(n,"int32")))}function K9(t,n){const e=[];let i=0,s=null;for(;i<t;)s=i+n,s>=t&&(s=t),e.push([i,s]),i=s;return e}function Y_e(t){const n=[];t instanceof Ps&&(t=[t]);for(let e=0;e<t.length;++e){const i=t[e];if(1===i.rank)n.push(TE(i,1));else{if(0===i.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");n.push(i)}}return n}function wd(t,n){if(null==t)return;const e=[];if(n instanceof Ps)e.push(n.id);else if(Array.isArray(n))n.forEach(s=>e.push(s.id));else if(null!=n)for(const s in n)e.push(n[s].id);const i=[];if(t instanceof Ps)-1===e.indexOf(t.id)&&i.push(t);else if(Array.isArray(t))t.forEach(s=>{-1===e.indexOf(s.id)&&i.push(s)});else if(null!=t)for(const s in t){const r=t[s];-1===e.indexOf(r.id)&&i.push(r)}i.forEach(s=>{s.isDisposed||s.dispose()})}function X9(t){return Array.isArray(t)}function Z_e(t){return!function Wgt(t){return t instanceof Ps}(t)&&!X9(t)}function Q_e(t,n,e,i=!0,s=""){if(null==n||0===n.length){if(null!=t){let o=!1;if(X9(t)&&t.length>0)o=!0;else if(Z_e(t)){for(const a in t)if(t.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new We(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(null==t)return n.map(o=>null);let r;if(Z_e(t)){r=[];for(const o of n){if(null==t[o])throw new We(`No data provided for "${o}". Need data for each key in: ${n}`);r.push(t[o])}}else if(X9(t)){if(t.length!==n.length)throw new We(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${n.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);r=t}else{if(n.length>1)throw new We(`The model ${s} expects ${n.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);r=[t]}if(r=Y_e(r),null!=e)for(let o=0;o<n.length;++o){if(null==e[o])continue;const a=r[o];if(a.shape.length!==e[o].length)throw new We(`Error when checking ${s}: expected ${n[o]} to have ${e[o].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<e[o].length;++l){if(0===l&&!i)continue;const u=e[o][l];if(null!=u&&u>=0&&a.shape[l]!==u)throw new We(`${s} expected a batch of elements where each example has shape [${e[o].slice(1,e[o].length)}] (i.e.,tensor shape [*,${e[o].slice(1,e[o].length)}]) but the ${s} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return r}function J_e(t,n,e,i=!0,s=""){let r;if(Array.isArray(t)){if(t.length!==n.length)throw new We(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${n.length} Tensor(s), but instead got ${t.length} Tensors(s).`);r=t}else{if(n.length>1)throw new We(`The model expects ${n.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);r=[t]}if(null!=e)for(let o=0;o<n.length;++o){if(null==e[o])continue;const a=r[o];if(a.shape.length!==e[o].length)throw new We(`Error when checking ${s}: expected ${n[o]} to have ${e[o].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<e[o].length;++l){if(0===l&&!i)continue;const u=e[o][l];if(null!=u&&u!==a.shape[l])throw new We(`Error when checking ${s}: expected ${n[o]} to have shape ${JSON.stringify(e[o])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}let R1=(()=>{class t extends yd{constructor(e){super(e),this.isTraining=!1}summary(e,i,s=console.log){if(!this.built)throw new We("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");!function Ngt(t,n,e,i=console.log){const s=function Fgt(t){let n=!0;const e=[],i=[];for(const s in t.nodesByDepth)e.push(t.nodesByDepth[s]);for(const s of e){if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){n=!1;break}i.push(...s)}if(n)for(const s of t.layers){let r=!1;for(const o of s.inboundNodes)if(-1!==i.indexOf(o)){if(r){n=!1;break}r=!0}if(!n)break}return n}(t),r=["Layer (type)","Input Shape","Output shape","Param #"];let o;if(s?(n=n||90,e=e||[.32,.61,.89,1]):(n=n||115,e=e||[.24,.48,.7,.8,1]),e[e.length-1]<=1&&(e=e.map(u=>Math.floor(n*u))),!s){r.push("Receives inputs"),o=[];for(const u in t.nodesByDepth)o.push(...t.nodesByDepth[u])}i("_".repeat(n)),qN(r,e,i),i("=".repeat(n));const a=t.layers;for(let u=0;u<a.length;++u)s?Lgt(a[u],e,i):Pgt(a[u],e,o,i),i((u===a.length-1?"=":"_").repeat(n));t.checkTrainableWeightsConsistency();const l=function Rgt(t){let n;return n=FN(null!=t.collectedTrainableWeights?t.collectedTrainableWeights:t.trainableWeights),n}(t),c=FN(t.nonTrainableWeights);i(`Total params: ${l+c}`),i(`Trainable params: ${l}`),i(`Non-trainable params: ${c}`),i("_".repeat(n))}(this,e,i,s)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function Ogt(t){const n={Adagrad:()=>M1.adagrad(.01),Adadelta:()=>M1.adadelta(1,.95,Ro()),Adam:()=>M1.adam(.001,.9,.999,Ro()),Adamax:()=>M1.adamax(.002,.9,.999,Ro(),0),RMSProp:()=>M1.rmsprop(.001,.9,0,Ro()),SGD:()=>M1.sgd(.01)};if(n.adagrad=n.Adagrad,n.adadelta=n.Adadelta,n.adam=n.Adam,n.adamax=n.Adamax,n.rmsprop=n.RMSProp,n.sgd=n.SGD,t in n)return n[t]();throw new We(`Unknown Optimizer ${t}`)}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof sm))throw new We("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let i=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new We(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);i=e.loss.map(l=>$9(l))}else{const a=$9(e.loss);this.outputs.forEach(l=>{i.push(a)})}else{e.loss=e.loss;for(const a in e.loss)if(-1===this.outputNames.indexOf(a))throw new We(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(const a of this.outputNames)null==e.loss[a]&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),i.push($9(e.loss[a]))}this.lossFunctions=i,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const l=this.internalOutputShapes[a];this.feedOutputNames.push(this.outputNames[a]),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[a])}const s=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Wg("loss",()=>{for(let a=0;a<this.outputs.length;++a)-1===s.indexOf(a)&&this.outputs.length>1&&(this.metricsTensors.push([this.lossFunctions[a],a]),this.metricsNames.push(this.outputNames[a]+"_loss"))});const r=function Xgt(t,n){if(null==t||Array.isArray(t)&&0===t.length)return n.map(i=>[]);let e;if("string"==typeof t||"function"==typeof t)e=[t];else{if(!Array.isArray(t)&&"object"!=typeof t)throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);e=t}if(Array.isArray(e))return n.map(i=>e);{const i=[];for(const s of n){let r=e.hasOwnProperty(s)?e[s]:[];Array.isArray(r)||(r=[r]),i.push(r)}return i}}(e.metrics,this.outputNames),o=(a,l,c)=>{this.outputNames.length>1&&(l=this.outputNames[a]+"_"+l),this.metricsNames.push(l),this.metricsTensors.push([c,a])};Wg("metric",()=>{for(let a=0;a<this.outputs.length;++a)-1===s.indexOf(a)&&(u=>{let h,f,p;for(const g of u){if("string"==typeof g&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(g)){const y=this.internalOutputShapes[a];let w;1===y[y.length-1]||this.lossFunctions[a]===GN?-1!==["accuracy","acc"].indexOf(g)?f=L_e:-1!==["crossentropy","ce"].indexOf(g)&&(f=Sgt):this.lossFunctions[a]===UN?-1!==["accuracy","acc"].indexOf(g)?f=Cgt:-1!==["crossentropy","ce"].indexOf(g)&&(f=V_e):-1!==["accuracy","acc"].indexOf(g)?f=P_e:-1!==["crossentropy","ce"].indexOf(g)&&(f=B_e),-1!==["accuracy","acc"].indexOf(g)?w="acc":-1!==["crossentropy","ce"].indexOf(g)&&(w="ce"),p=f,h=""+w}else p=Agt(g),h=""+WN(g);let v;Wg(h,()=>{v=p}),o(a,h,v)}})(r[a])}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,i,s={}){const r=null==s.batchSize?32:s.batchSize;W9(r);const a=this.standardizeUserDataXY(e,i,!0,r);try{const l=a[0].concat(a[1]);return this.makeTestFunction(),Il(this.testLoop(this.testFunction,l,r,s.verbose,s.steps))}finally{wd(a[0],e),wd(a[1],i)}}evaluateDataset(e,i){var s=this;return de(function*(){return s.makeTestFunction(),function Hgt(t,n,e){return H9.apply(this,arguments)}(s,e,i)})()}checkNumSamples(e,i,s,r="steps"){let o;if(null!=s){if(o=null,null!=i)throw new We(`If ${r} is set, batchSize must be null or undefined.Got batchSize = ${i}`)}else{if(null==e)throw new We(`Either the input data should have a defined shape, or ${r} shoud be specified.`);o=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return o}execute(e,i){if(Array.isArray(i)&&0===i.length)throw new We("`outputs` is an empty Array, which is not allowed.");const s=Array.isArray(i),o=this.retrieveSymbolicTensors(s?i:[i]),a=new pm;if(e instanceof Ps&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new We(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let c=0;c<this.inputs.length;++c)a.add(this.inputs[c],e[c])}else for(const c of this.inputs){const u=e[c.name];if(null==u)throw new We(`No value is provided for the model's input ${c.name}`);a.add(c,u)}const l=DE(o,a);return s?l:l[0]}retrieveSymbolicTensors(e){const i=Gg(null,e.length);let s=e.length;for(const r of this.layers){const o=Array.isArray(r.output)?r.output:[r.output],a=o.map(l=>l.name);for(let l=0;l<e.length;++l){const c=a.indexOf(e[l]);if(-1!==c&&(i[l]=o[c],s--),0===s)break}if(0===s)break}if(s>0){const r=[];throw i.forEach((o,a)=>{null==o&&r.push(e[a])}),new We(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(r)}`)}return i}predictLoop(e,i=32,s=!1){return et(()=>{const r=this.checkNumSamples(e);if(s)throw new _i("Verbose predictLoop() is not implemented yet.");const o=K9(r,i),a=this.outputs.map(l=>[]);for(let l=0;l<o.length;++l)et(()=>{const h=OE(e,o[l][0],o[l][1]),f=[];if(Array.isArray(h))for(let g=0;g<h.length;++g)f.push({key:this.inputs[g],value:h[g]});else f.push({key:this.inputs[0],value:h});const p=new pm(f);return DE(this.outputs,p)}).forEach((u,d)=>a[d].push(u));return Il(a.map(l=>Xr(l,0)))})}predict(e,i={}){const s=Y_e(e);J_e(s,this.inputNames,this.feedInputShapes,!1);try{const r=null==i.batchSize?32:i.batchSize;return W9(r),this.predictLoop(s,r)}finally{wd(s,e)}}predictOnBatch(e){J_e(e,this.inputNames,this.feedInputShapes,!0);const i=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,i)}standardizeUserDataXY(e,i,s=!0,r){if(null==this.optimizer_)throw new Cu("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const o=[];for(let a=0;a<this.feedOutputShapes.length;++a){const l=this.feedOutputShapes[a];o.push(this.feedLossFns[a]===UN?l.slice(0,l.length-1).concat([1]):l)}if(function qgt(t,n,e){const i=dm(t.map(r=>r.shape[0]));i.sort();const s=dm(n.map(r=>r.shape[0]));if(s.sort(),i.length>1)throw new We(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(r=>r.shape))}`);if(s.length>1)throw new We(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(n.map(r=>r.shape))}`);if(i.length>0&&s.length>0&&!Qi(i,s))throw new We(`Input Tensors should have the same number of samples as target Tensors. Found ${i[0]} input sample(s) and ${s[0]} target sample(s).`)}(e=Q_e(e,this.feedInputNames,this.feedInputShapes,!1,"input"),i=Q_e(i,this.feedOutputNames,o,!1,"target")),function Kgt(t,n,e){const i=[zN,GN,AE];for(let s=0;s<t.length;++s){const r=t[s],o=n[s],a=e[s];if(null!=o){if(o===AE&&1===r.shape[r.shape.length-1])throw new We(`You are passing a target array of shape ${r.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==i.indexOf(o)){const l=r.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){const h=c[u];if(null!=h&&l[u]!==h)throw new We(`A target Tensor with shape ${r.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}(i,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&e[0].shape[0]%r!=0)throw new We(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${r}. Found: ${e[0].shape[0]} sample(s).`);return[e,i]}standardizeUserData(e,i,s,r,o=!0,a){var l=this;return de(function*(){const[c,u]=l.standardizeUserDataXY(e,i,o,a);if(null!=s)throw new Error("sample weight is not supported yet.");let d=null;if(null!=r){const h=H_e(r,l.outputNames);d=[];for(let f=0;f<h.length;++f)d.push(yield W_e(u[f],null,h[f]))}return[c,u,d]})()}testLoop(e,i,s,r=0,o){return et(()=>{const a=this.checkNumSamples(i,s,o,"steps"),l=[];if(r>0)throw new _i("Verbose mode is not implemented yet.");if(null!=o)throw new _i("steps mode in testLoop() is not implemented yet");{const c=K9(a,s),u=Fa(gd(0,a));for(let d=0;d<c.length;++d){const h=c[d][0],f=c[d][1],p=qg(u,h,f-h),g=q9(i,p),v=e(g);if(0===d)for(let y=0;y<v.length;++y)l.push(En(0));for(let y=0;y<v.length;++y)l[y]=kt(l[y],Be(f-h,v[y]))}for(let d=0;d<l.length;++d)l[d]=vn(l[d],a)}return l})}getDedupedMetricsNames(){const e=this.metricsNames,i=[];for(let s=0;s<e.length;++s){const r=e[s];let o=r;r_e(e,r)>1&&(o+=`_${r_e(e.slice(0,s),r)}`),i.push(o)}return i}makeTrainFunction(){return e=>{const i=[],s=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),a=[],c=this.collectedTrainableWeights.map(h=>h.read());return[this.optimizer_.minimize(()=>{const h=[];for(let v=0;v<this.inputs.length;++v)h.push({key:this.inputs[v],value:s[v]});const f=new pm(h),p=DE(this.outputs,f,{training:!0});let g;for(let v=0;v<this.lossFunctions.length;++v){let w=(0,this.lossFunctions[v])(r[v],p[v]);null!=o[v]&&(w=Bgt(w,o[v]));const E=Gr(w);i.push(E),g=0===v?w:kt(g,w)}for(let v=0;v<this.metricsTensors.length;++v){let y;if(this.outputs.length>1&&v<this.outputs.length)y=i[v];else{const E=this.metricsTensors[v][1];y=Gr((0,this.metricsTensors[v][0])(r[E],p[E]))}Qo(y),a.push(y)}return g=Gr(g),this.calculateLosses().forEach(v=>{g=kt(g,v)}),g},!0,c)].concat(a)}}makeTestFunction(){this.testFunction=e=>et(()=>{const i=[];let s;const r=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let u=0;u<this.inputs.length;++u)a.push({key:this.inputs[u],value:r[u]});const l=new pm(a),c=DE(this.outputs,l);for(let u=0;u<this.lossFunctions.length;++u){const h=Gr((0,this.lossFunctions[u])(o[u],c[u]));s=0===u?h:kt(s,h),i.push(s)}for(let u=0;u<this.metricsTensors.length;++u){const h=this.metricsTensors[u][1],f=Gr((0,this.metricsTensors[u][0])(o[h],c[h]));i.push(f)}return i})}fit(e,i,s={}){var r=this;return de(function*(){if(r.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let o,a,l,c,u,d,h,f,p;r.isTraining=!0;try{const g=null==s.batchSize?32:s.batchSize;W9(g);const y=yield r.standardizeUserData(e,i,s.sampleWeight,s.classWeight,!1,g);o=y[0],a=y[1],p=y[2];let E,w=!1;if(null!=s.validationData&&s.validationData.length>0){if(w=!0,2!==s.validationData.length)throw 3===s.validationData.length?new _i("validationData including sample weights is not supported yet."):new We(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${s.validationData} is invalid.`);u=s.validationData[0],d=s.validationData[1];const Ee=yield r.standardizeUserData(u,d,null,null,!0,g);h=Ee[0],f=Ee[1],E=h.concat(f)}else if(null!=s.validationSplit&&s.validationSplit>0&&s.validationSplit<1){w=!0;const me=Math.floor(o[0].shape[0]*(1-s.validationSplit)),Ee=o[0].shape[0];h=OE(o,me,Ee),l=o,o=OE(o,0,me),f=OE(a,me,Ee),c=a,a=OE(a,0,me),E=h.concat(f)}else null!=s.validationSteps&&(w=!0);const T=o.concat(a).concat(p);r.checkTrainableWeightsConsistency();const L=r.makeTrainFunction(),W=r.getDedupedMetricsNames();let H,P;w?(r.makeTestFunction(),H=r.testFunction,P=W.slice().concat(W.map(me=>"val_"+me))):(H=null,E=[],P=W.slice());const X=N_e(s.callbacks,s.yieldEvery);return yield r.fitLoop(L,T,W,g,s.epochs,s.verbose,X,H,E,s.shuffle,P,s.initialEpoch,null,null)}finally{r.isTraining=!1,wd(o,e),wd(a,i),wd(l,e),wd(c,i),wd(h,u),wd(f,d),null!=p&&Ci(p)}})()}fitLoop(e,i,s,r,o,a,l,c,u,d,h,f,p,g){var v=this;return de(function*(){null==r&&(r=32),null==o&&(o=1),null==d&&(d=!0),null==f&&(f=0);let y=!1;if(null!=c&&null!=u&&(y=!0),null!=g&&(y=!0,null==p))throw new We("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const w=v.checkNumSamples(i,r,p,"steps_per_epoch");let E;null!=w&&(E=gd(0,w)),null==a&&(a=1);const{callbackList:T,history:L}=R_e(l,a,o,f,w,p,r,y,h);T.setModel(v),v.history=L,yield T.onTrainBegin(),v.stopTraining_=!1;for(let W=f;W<o;++W){yield T.onEpochBegin(W);const H={};if(null!=p)throw new _i("stepsPerEpoch mode is not implemented yet.");{if("batch"===d)throw new _i("batch shuffling is not implemneted yet");d&&Ghe(E);const P=Fa(E),X=K9(w,r);for(let ne=0;ne<X.length;++ne){const me={};if(yield T.onBatchBegin(ne,me),et(()=>{const Ee=X[ne][0],Te=X[ne][1],$e=qg(P,Ee,Te-Ee);me.batch=ne,me.size=Te-Ee;const Xe=q9(i,$e),Ce=e(Xe);for(let Fe=0;Fe<s.length;++Fe){const He=Ce[Fe];me[s[Fe]]=He,Qo(He)}if(ne===X.length-1&&y){const Fe=v.testLoop(c,u,r);for(let Ie=0;Ie<s.length;++Ie){const He=s[Ie],Ve=Fe[Ie];Qo(Ve),H["val_"+He]=Ve}}}),yield T.onBatchEnd(ne,me),O_e(me),v.stopTraining_)break}P.dispose()}if(yield T.onEpochEnd(W,H),v.stopTraining_)break}return yield T.onTrainEnd(),yield v.history.syncData(),v.history})()}fitDataset(e,i){var s=this;return de(function*(){return function Ugt(t,n,e){return j9.apply(this,arguments)}(s,e,i)})()}trainOnBatch(e,i){var s=this;return de(function*(){const r=yield s.standardizeUserData(e,i),o=r[0],a=r[1],c=s.makeTrainFunction()(o.concat(a)),u=[];for(const d of c){const h=yield d.data();u.push(h[0])}return Ci(c),wd(r[0],e),wd(r[1],i),Il(u)})()}getNamedWeights(e){const i=[],s=null!=e&&e.trainableOnly,r=s?this.trainableWeights:this.weights,o=this.getWeights(s);for(let a=0;a<r.length;++a)s&&!r[a].trainable||i.push({name:r[a].originalName,tensor:o[a]});return i}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const i=Tz().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=i-Tz().numTensors}return e}getLossIdentifiers(){let e;if("string"==typeof this.loss)e=Nf(this.loss);else if(Array.isArray(this.loss)){for(const i of this.loss)if("string"!=typeof i)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(i=>Nf(i))}else{const i=Object.keys(this.loss);e={};const s=this.loss;for(const r of i){if("string"!=typeof s[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=Nf(s[r])}}return e}getMetricIdentifiers(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[Nf(WN(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Nf(WN(e)));{const e={};for(const i in this.metrics)e[i]=Nf(WN(this.metrics[i]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const s=Rf(V9(e.optimizer_config));let r,o;if("string"==typeof e.loss)r=jg(e.loss);else if(Array.isArray(e.loss))r=e.loss.map(a=>jg(a));else if(null!=e.loss){r={};for(const a in e.loss)r[a]=jg(e.loss[a])}if(Array.isArray(e.metrics))o=e.metrics.map(a=>jg(a));else if(null!=e.metrics){o={};for(const a in e.metrics)o[a]=jg(e.metrics[a])}this.compile({loss:r,metrics:o,optimizer:s})}save(e,i){var s=this;return de(function*(){if("string"==typeof e){const d=Ofe(e);if(0===d.length)throw new We(`Cannot find any save handlers for URL '${e}'`);if(d.length>1)throw new We(`Found more than one (${d.length}) save handlers for URL '${e}'`);e=d[0]}if(null==e.save)throw new We("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=yield Iz(s.getNamedWeights(i)),c={modelTopology:s.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v4.20.0",convertedBy:null};if(null!=i&&i.includeOptimizer&&null!=s.optimizer){c.trainingConfig=s.getTrainingConfig();const d="optimizer",{data:h,specs:f}=yield Iz(yield s.optimizer.getWeights(),d);r.specs.push(...f),r.data=kfe([r.data,h])}return null!=s.userDefinedMetadata&&(U_e(s.userDefinedMetadata,s.name,!0),c.userDefinedMetadata=s.userDefinedMetadata),c.weightData=r.data,c.weightSpecs=r.specs,e.save(c)})()}setUserDefinedMetadata(e){U_e(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}return t.className="Model",t})();At(R1),At((()=>{class t extends R1{}return t.className="Functional",t})()),At((()=>{class t extends R1{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:MN("sequential_"),null!=e.layers)for(const i of e.layers)this.add(i)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(s=>s<0))throw new We(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const i=e instanceof t||e instanceof R1;let s;if(i){if(s=e,1!==s.outputs.length)throw new We("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==s.inputs.length)throw new We("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new We("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const r=function Q_t(t){if(null==t.batchShape&&null==t.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=t.batchShape&&null!=t.shape)throw new We("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let n=t.batchShape;null!=t.shape&&null==n&&(n=[null].concat(t.shape));let e=t.dtype;return null==e&&(e="float32"),new PN({batchInputShape:n,name:t.name,dtype:e,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(r)}if(i)this.outputs=s.outputs,this.inputs=s.inputs;else{if(1!==e.inboundNodes.length)throw new We(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(1!==e.inboundNodes[0].outputTensors.length)throw new We("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=k_e(this.outputs[0])}this.inboundNodes=[],new LN({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Gg(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(r=>r.shape),outputShapes:this.outputs[0].shape})}else{const r=e.apply(this.outputs[0]);if(Array.isArray(r))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[r],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,i){return null==this.model&&this.build(),this.model.call(e,i)}build(e){if(ps(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new R1({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,i,s=console.log){this.built||this.build(),super.summary(e,i,s)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,i,s={}){if(!this.built)throw new Cu("The model needs to be compiled before being used.");return this.model.evaluate(e,i,s)}evaluateDataset(e,i){var s=this;return de(function*(){if(!s.built)throw new Cu("The model needs to be compiled before being used.");return s.model.evaluateDataset(e,i)})()}predict(e,i={}){return null==this.model&&this.build(),this.model.predict(e,i)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}fit(e,i,s={}){var r=this;return de(function*(){if(!r.built)throw new Cu("The model needs to be compiled before being used.");return r.model.fit(e,i,s)})()}fitDataset(e,i){var s=this;return de(function*(){if(!s.built)throw new Cu("The model needs to be compiled before being used.");return s.model.fitDataset(e,i)})()}trainOnBatch(e,i){var s=this;return de(function*(){return s.model.trainOnBatch(e,i)})()}static fromConfig(e,i,s={},r=!1){let o,a={};if(i instanceof Array){if(null==i[0].className||"Merge"===i[0].className)throw new We("Legacy serialization format not supported yet.");o=i}else le(null!=i.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),o=i.layers,delete i.layers,a=i;const l=new e(a);if(!(l instanceof t))throw new _i(`Sequential.fromConfig called on non-Sequential input: ${l}`);for(const c of o){const d=Rf(c,void 0,r);r&&d.setFastWeightInitDuringBuild(!0),l.add(d)}return l}set stopTraining(e){if(null==this.model)throw new We("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new We("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const i of this.layers){const s={};s.className=i.getClassName(),s.config=i.getConfig(),e.push(s)}return{name:this.name,layers:e}}}return t.className="Sequential",t})());class La extends g1{getConfig(){return{}}}At((()=>{class t extends La{apply(e,i=1){return function P_t(t,n=1){if(1!==n)throw new _i(`Support for alpha values other than 1 (${n}) is not implemented yet.`);return hE(t)}(e,i)}}return t.className="elu",t})()),At((()=>{class t extends La{apply(e){return M7(e)}}return t.className="selu",t})()),At((()=>{class t extends La{apply(e){return mh(e)}}return t.className="relu",t})()),At((()=>{class t extends La{apply(e){return et(()=>$g(6,mh(e)))}}return t.className="relu6",t})()),At((()=>{class t extends La{apply(e){return e}}return t.className="linear",t})()),At((()=>{class t extends La{apply(e){return fh(e)}}return t.className="sigmoid",t})()),At((()=>{class t extends La{apply(e){return function B_t(t){return et(()=>{const n=kt(.5,Be(.2,t));return ic(n,0,1)})}(e)}}return t.className="hardSigmoid",t})()),At((()=>{class t extends La{apply(e){return x1(e)}}return t.className="softplus",t})()),At((()=>{class t extends La{apply(e){return function $_t(t){return et(()=>vn(t,kt(Ao(t),1)))}(e)}}return t.className="softsign",t})()),At((()=>{class t extends La{apply(e){return Lg(e)}}return t.className="tanh",t})());let ege=(()=>{class t extends La{apply(e,i=-1){return bN(e,i)}}return t.className="softmax",t})();function _m(t){return t.getClassName()}function J9(t,n={}){return xE(t,_u.getMap().classNameMap,n,"activation")}function gm(t){if(null==t){return J9({className:"linear",config:{}})}if("string"==typeof t){const n={};return n.className=t,n.config={},J9(n)}return t instanceof La?t:J9(t)}At(ege),At((()=>{class t extends La{apply(e,i=-1){return y7(e,i)}}return t.className="logSoftmax",t})()),At((()=>{class t extends La{apply(e){return et(()=>et(()=>{const i=Math.sqrt(2),s=Be(.5,kt(1,g7(vn(e,i))));return Be(e,s)}))}}return t.className="gelu",t})()),At((()=>{class t extends La{apply(e){return et(()=>Be(.5,Be(e,kt(1,Lg(Be(ba(vn(2,Math.PI)),kt(e,Be(.044715,Tf(e,3)))))))))}}return t.className="gelu_new",t})()),At((()=>{class t extends La{apply(e){return et(()=>Be(e,Lg(x1(e))))}}return t.className="mish",t})()),At((()=>{class t extends La{apply(e,i=1){return et(()=>Be(fh(Be(e,i)),e))}}return t.className="swish",t})());class tge extends g1{}let tU=(()=>{class t extends tge{constructor(e){super(),function eU(t){if(null!=t&&"object"!=typeof t)throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return et(()=>{let i=No([1]);return this.hasL1&&(i=kt(i,_n(Be(this.l1,Ao(e))))),this.hasL2&&(i=kt(i,_n(Be(this.l2,IE(e))))),Ge(i,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,i){return new e({l1:i.l1,l2:i.l2})}}return t.className="L1L2",t})();At(tU);const nge={l1l2:"L1L2"};function nr(t){return x9(t)}function ige(t,n={}){return xE(t,_u.getMap().classNameMap,n,"regularizer")}function Er(t){return null==t?null:"string"==typeof t?ige({className:t in nge?nge[t]:t,config:{}}):t instanceof tge?t:ige(t)}function F1(t,n,e){if("number"==typeof t)return Gg(t,n);if(t.length!==n)throw new We(`The ${e} argument must be an integer or tuple of ${n} integers. Received: ${t.length} elements.`);for(let i=0;i<n;++i){const s=t[i];if(!A_t(s))throw new We(`The ${e} argument must be an integer or tuple of ${n} integers. Received: ${JSON.stringify(t)} including a non-integer number ${s}`)}return t}function Sd(t,n,e,i,s=1){if(null==t)return t;let o;return o="same"===e?t:t-(n+(n-1)*(s-1))+1,Math.floor((o+i-1)/i)}function Ch(t,n,e,i){if(null==t)return null;if("valid"===i)t=t*n+fm([e-n,0]);else{if("same"!==i)throw new We(`Unsupport padding mode: ${i}.`);t*=n}return t}function nU(t,n){return et(()=>(Qr(n),"channelsFirst"===n?ss(t,[0,2,3,1]):t))}function sge(t,n){return et(()=>(Qr(n),"channelsFirst"===n?ss(t,[0,2,3,4,1]):t))}function iU(t,n,e,i=[1,1],s="valid",r,o,a=null){return et(()=>{if(null==r&&(r="channelsLast"),Qr(r),3!==t.rank&&4!==t.rank)throw new We(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(3!==n.rank&&4!==n.rank)throw new We(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=nU(t,r);if("causal"===s)throw new _i("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=hme({x:l,filter:n,strides:i,pad:"same"===s?"same":"valid",dilations:o,dataFormat:"NHWC",bias:e,activation:a}),"channelsFirst"===r&&(l=ss(l,[0,3,1,2])),l})}At((()=>{class t extends Bi{constructor(e){super(e??{}),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,i){e=qn(e);let s=mh(e);return null!=this.maxValue&&(s=ic(s,0,this.maxValue)),s}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},i=super.getConfig();return Object.assign(e,i),e}}return t.className="ReLU",t})()),At((()=>{class t extends Bi{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,i){const s=qn(e);return aN(s,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},i=super.getConfig();return Object.assign(e,i),e}}return t.className="LeakyReLU",t})()),At((()=>{class t extends Bi{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=xr(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Er(e.alphaRegularizer),this.alphaConstraint=Po(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new We(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`);this.sharedAxes=[e.sharedAxes]}}build(e){const i=(e=ps(e)).slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)i[r-1]=1;this.alpha=this.addWeight("alpha",i,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const s={};if(null!=this.sharedAxes)for(let r=1;r<e.length;++r)s[r]=e[r];this.inputSpec=[new Fo({ndim:e.length,axes:s})],this.built=!0}call(e,i){return e=qn(e),mN(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Rr(this.alphaInitializer),alphaRegularizer:nr(this.alphaRegularizer),alphaConstraint:Lo(this.alphaConstraint),sharedAxes:this.sharedAxes},i=super.getConfig();return Object.assign(e,i),e}}return t.className="PReLU",t})()),At((()=>{class t extends Bi{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new _i(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,i){const s=qn(e);return hE(s)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},i=super.getConfig();return Object.assign(e,i),e}}return t.className="ELU",t})()),At((()=>{class t extends Bi{constructor(e){super(e??{}),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,i){const s=qn(e);return Be(s,Ht(rc(s,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},i=super.getConfig();return Object.assign(e,i),e}}return t.className="ThresholdedReLU",t})()),At((()=>{class t extends Bi{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new ege).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,i){return et(()=>{let s=qn(e);const r=i.mask;if(null!=r){const o=Be(tn(oc(s.shape),Ht(r,s.dtype)),En(-1e9));s=kt(s,o)}return this.axis instanceof Array?this.axis.length>1?sc(tn(s,cN(s,this.axis,!0))):this.softmax(s,this.axis[0]):this.softmax(s,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Softmax",t})());class KN extends Bi{constructor(n,e){if(super(e),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",KN.verifyArgs(e),this.rank=n,ta(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new _i(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=F1(e.kernelSize,n,"kernelSize"),this.strides=F1(null==e.strides?1:e.strides,n,"strides"),this.padding=null==e.padding?"valid":e.padding,Uc(this.padding),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Qr(this.dataFormat),this.activation=gm(e.activation),this.useBias=null==e.useBias||e.useBias,this.biasInitializer=xr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Po(e.biasConstraint),this.biasRegularizer=Er(e.biasRegularizer),this.activityRegularizer=Er(e.activityRegularizer),this.dilationRate=F1(null==e.dilationRate?1:e.dilationRate,n,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new We(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(2===this.rank){if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new We(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(3===this.rank)if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new We(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}static verifyArgs(n){if(zc("kernelSize"in n,"required key 'kernelSize' not in config"),"number"!=typeof n.kernelSize&&!T9(n.kernelSize,"number",1,3))throw new We(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(n.kernelSize)}.`)}getConfig(){const n={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:_m(this.activation),useBias:this.useBias,biasInitializer:Rr(this.biasInitializer),biasRegularizer:nr(this.biasRegularizer),activityRegularizer:nr(this.activityRegularizer),biasConstraint:Lo(this.biasConstraint)},e=super.getConfig();return Object.assign(n,e),n}}class L1 extends KN{constructor(n,e){super(n,e),this.kernel=null,L1.verifyArgs(e),this.filters=e.filters,ta(this.filters,"filters"),this.kernelInitializer=xr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Po(e.kernelConstraint),this.kernelRegularizer=Er(e.kernelRegularizer)}build(n){n=ps(n);const e="channelsFirst"===this.dataFormat?1:n.length-1;if(null==n[e])throw new We(`The channel dimension of the input should be defined. Found ${n[e]}`);const i=n[e],s=this.kernelSize.concat([i,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[e]:i}}],this.built=!0}call(n,e){return et(()=>{let i;n=qn(n);const s=null==this.bias?null:this.bias.read(),r=a_e(this.activation.getClassName());if(null!=r&&2===this.rank)i=iU(n,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)i=function rge(t,n,e,i=1,s="valid",r,o=1){return et(()=>{if(null==r&&(r="channelsLast"),Qr(r),3!==t.shape.length)throw new We(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(3!==n.shape.length)throw new We(`The kernel for a conv1dWithBias operation should be 3, but is ${n.shape.length} instead`);if(null!=e&&1!==e.shape.length)throw new We(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if("channelsFirst"===r&&(t=ss(t,[0,2,1])),"causal"===s)throw new _i("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=d7(t,n,i,"same"===s?"same":"valid","NWC",o);return null!=e&&(a=vd(a,e)),a})}(n,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)i=iU(n,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new _i("convolutions greater than 3D are not implemented yet.");i=function oge(t,n,e,i=[1,1,1],s="valid",r,o){return et(()=>{if(null==r&&(r="channelsLast"),Qr(r),4!==t.rank&&5!==t.rank)throw new We(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(4!==n.rank&&5!==n.rank)throw new We(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=sge(t,r);if("causal"===s)throw new _i("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=Npe(a,n,i,"same"===s?"same":"valid","NDHWC",o),null!=e&&(a=vd(a,e)),"channelsFirst"===r&&(a=ss(a,[0,4,1,2,3])),a})}(n,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(i=this.activation.apply(i))}return i})}computeOutputShape(n){n=ps(n);const e=[],i="channelsLast"===this.dataFormat?n.slice(1,n.length-1):n.slice(2);for(let r=0;r<i.length;++r){const o=Sd(i[r],this.kernelSize[r],this.padding,this.strides[r],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);e.push(o)}let s=[n[0]];return"channelsLast"===this.dataFormat?(s=s.concat(e),s.push(this.filters)):(s.push(this.filters),s=s.concat(e)),s}getConfig(){const n={filters:this.filters,kernelInitializer:Rr(this.kernelInitializer),kernelRegularizer:nr(this.kernelRegularizer),kernelConstraint:Lo(this.kernelConstraint)},e=super.getConfig();return Object.assign(n,e),n}static verifyArgs(n){if(!("filters"in n)||"number"!=typeof n.filters||n.filters<1)throw new We(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(n.filters)}`)}}let age=(()=>{class t extends L1{constructor(e){super(2,e),t.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!T9(e.kernelSize,"number",1,2))throw new We(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv2D",t})();At(age);let lge=(()=>{class t extends L1{constructor(e){super(3,e),t.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new We(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv3D",t})();At(lge),At((()=>{class t extends age{constructor(e){if(super(e),this.inputSpec=[new Fo({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new We(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(4!==(e=ps(e)).length)throw new We("Input should have rank 4; Received input shape: "+JSON.stringify(e));const i="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[i])throw new We("The channel dimension of the inputs should be defined. Found `None`.");const s=e[i],r=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Fo({ndim:4,axes:{[i]:s}})],this.built=!0}call(e,i){return et(()=>{let s=qn(e);if(4!==s.shape.length)throw new We(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const r=s.shape;let a,l;"channelsFirst"===this.dataFormat?(a=2,l=3):(a=1,l=2);const u=r[l],h=this.kernelSize[1],p=this.strides[1],y=[r[0],Ch(r[a],this.strides[0],this.kernelSize[0],this.padding),Ch(u,p,h,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(s=ss(s,[0,2,3,1]));let w=f7(s,this.kernel.read(),y,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(w=ss(w,[0,3,1,2])),null!=this.bias&&(w=vd(w,this.bias.read(),this.dataFormat)),null!=this.activation&&(w=this.activation.apply(w)),w})}computeOutputShape(e){const i=(e=ps(e)).slice();let s,r,o;"channelsFirst"===this.dataFormat?(s=1,r=2,o=3):(s=3,r=1,o=2);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.strides[0],u=this.strides[1];return i[s]=this.filters,i[r]=Ch(i[r],c,a,this.padding),i[o]=Ch(i[o],u,l,this.padding),i}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}return t.className="Conv2DTranspose",t})()),At((()=>{class t extends lge{constructor(e){if(super(e),this.inputSpec=[new Fo({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new We(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(5!==(e=ps(e)).length)throw new We("Input should have rank 5; Received input shape: "+JSON.stringify(e));const i="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[i])throw new We("The channel dimension of the inputs should be defined. Found `None`.");const s=e[i],r=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Fo({ndim:5,axes:{[i]:s}})],this.built=!0}call(e,i){return et(()=>{let s=qn(e);if(5!==s.shape.length)throw new We(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const r=s.shape;let a,l,c;"channelsFirst"===this.dataFormat?(c=2,a=3,l=4):(c=1,a=2,l=3);const d=r[a],h=r[l],p=this.kernelSize[1],g=this.kernelSize[2],y=this.strides[1],w=this.strides[2],W=[r[0],Ch(r[c],this.strides[0],this.kernelSize[0],this.padding),Ch(d,y,p,this.padding),Ch(h,w,g,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(s=ss(s,[0,2,3,4,1]));let H=Fpe(s,this.kernel.read(),W,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(H=ss(H,[0,4,1,2,3])),null!==this.bias&&(H=vd(H,this.bias.read(),this.dataFormat)),null!==this.activation&&(H=this.activation.apply(H)),H})}computeOutputShape(e){const i=(e=ps(e)).slice();let s,r,o,a;"channelsFirst"===this.dataFormat?(s=1,r=2,o=3,a=4):(s=4,r=1,o=2,a=3);const l=this.kernelSize[0],c=this.kernelSize[1],u=this.kernelSize[2],d=this.strides[0],h=this.strides[1],f=this.strides[2];return i[s]=this.filters,i[r]=Ch(i[r],d,l,this.padding),i[o]=Ch(i[o],h,c,this.padding),i[a]=Ch(i[a],f,u,this.padding),i}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}return t.className="Conv3DTranspose",t})());let Jgt=(()=>{class t extends L1{constructor(e,i){if(super(e,i),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==i.filters)throw new We("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=i.kernelInitializer||null!=i.kernelRegularizer||null!=i.kernelConstraint)throw new We("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=i.padding&&"same"!==i.padding&&"valid"!==i.padding)throw new We(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(i.padding)}`);this.depthMultiplier=null==i.depthMultiplier?1:i.depthMultiplier,this.depthwiseInitializer=xr(i.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Er(i.depthwiseRegularizer),this.depthwiseConstraint=Po(i.depthwiseConstraint),this.pointwiseInitializer=xr(i.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Er(i.pointwiseRegularizer),this.pointwiseConstraint=Po(i.pointwiseConstraint)}build(e){if((e=ps(e)).length<this.rank+2)throw new We(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const i="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[i]||e[i]<0)throw new We(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[i])}`);const s=e[i],r=this.kernelSize.concat([s,this.depthMultiplier]),o=[];for(let l=0;l<this.rank;++l)o.push(1);o.push(s*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",o,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):null,this.inputSpec=[new Fo({ndim:this.rank+2,axes:{[i]:s}})],this.built=!0}call(e,i){return et(()=>{let s;if(e=qn(e),1===this.rank)throw new _i("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=ss(e,[0,2,3,1])),s=A7(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(s=vd(s,this.bias.read(),this.dataFormat)),null!=this.activation&&(s=this.activation.apply(s)),"channelsFirst"===this.dataFormat&&(s=ss(s,[0,3,1,2])),s})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Rr(this.depthwiseInitializer),e.pointwiseInitializer=Rr(this.pointwiseInitializer),e.depthwiseRegularizer=nr(this.depthwiseRegularizer),e.pointwiseRegularizer=nr(this.pointwiseRegularizer),e.depthwiseConstraint=Lo(this.depthwiseConstraint),e.pointwiseConstraint=Lo(this.pointwiseConstraint),e}}return t.className="SeparableConv",t})();function cge(t,n,e,i){if(Array.isArray(t)){if(null!=n||null!=e)throw new We("When inputs is an array, neither initialState or constants should be provided");null!=i&&(e=t.slice(t.length-i,t.length),t=t.slice(0,t.length-i)),t.length>1&&(n=t.slice(1,t.length)),t=t[0]}function s(r){return null==r||Array.isArray(r)?r:[r]}return{inputs:t,initialState:n=s(n),constants:e=s(e)}}function uge(t,n,e,i=!1,s,r,o=!1,a=!1){return et(()=>{const l=n.shape.length;if(l<3)throw new We(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(gd(2,l));if(n=ss(n,c),null!=r)throw new _i("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=s&&((s=Ht(Ht(s,"bool"),"float32")).rank===l-1&&(s=Ra(s,-1)),s=ss(s,c)),i&&(n=yu(n,0),null!=s&&(s=yu(s,0)));const u=[];let d,h=e;const f=n.shape[0],p=wu(n);let g,v;null!=s&&(g=wu(s));for(let y=0;y<f;++y){const w=p[y],E=et(()=>t(w,h));if(null==s)d=E[0],h=E[1];else{const T=et(()=>{const L=g[y],W=tn(Vc(L),L);return{output:kt(Be(E[0],L),Be(h[0],W)),newStates:h.map((X,ne)=>kt(Be(E[1][ne],L),Be(X,W)))}});d=T.output,h=T.newStates}a&&u.push(d)}return a&&(v=Tl(u,1)),[d,v,h]})}At((()=>{class t extends Jgt{constructor(e){super(2,e)}}return t.className="SeparableConv2D",t})()),At((()=>{class t extends L1{constructor(e){super(1,e),t.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!T9(e.kernelSize,"number",1,1))throw new We(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv1D",t})()),At((()=>{class t extends Bi{constructor(e){super(e),this.cropping="number"==typeof e.cropping?[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,i){return et(()=>{if(e=qn(e),"channelsLast"===this.dataFormat){const s=ON(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return ON(s,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const s=ON(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return ON(s,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Cropping2D",t})()),At((()=>{class t extends Bi{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Qr(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,function k_t(t){Hg(x_t,"InterpolationFormat",t)}(this.interpolation)}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],null==e[2]?null:this.size[0]*e[2],null==e[3]?null:this.size[1]*e[3]]:[e[0],null==e[1]?null:this.size[0]*e[1],null==e[2]?null:this.size[1]*e[2],e[3]]}call(e,i){return et(()=>{let s=qn(e);const r=s.shape;if("channelsFirst"===this.dataFormat){s=ss(s,[0,2,3,1]);const o=this.size[0]*r[2],a=this.size[1]*r[3],l="nearest"===this.interpolation?Su.resizeNearestNeighbor(s,[o,a]):Su.resizeBilinear(s,[o,a]);return ss(l,[0,3,1,2])}{const o=this.size[0]*r[1],a=this.size[1]*r[2];return"nearest"===this.interpolation?Su.resizeNearestNeighbor(s,[o,a]):Su.resizeBilinear(s,[o,a])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},i=super.getConfig();return Object.assign(e,i),e}}return t.className="UpSampling2D",t})()),At((()=>{class t extends KN{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=xr(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Po(e.depthwiseConstraint),this.depthwiseRegularizer=Er(e.depthwiseRegularizer)}build(e){if((e=ps(e)).length<4)throw new We(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const i="channelsFirst"===this.dataFormat?1:3;if(null==e[i]||e[i]<0)throw new We(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[i]}).`);const s=e[i];this.depthwiseKernel=this.addWeight("depthwise_kernel",[this.kernelSize[0],this.kernelSize[1],s,this.depthMultiplier],null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[s*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(e,i){return et(()=>{let s=function ebt(t,n,e=[1,1],i="valid",s,r){return et(()=>{null==s&&(s="channelsLast"),Qr(s);let o=nU(t,s);if(4!==t.rank)throw new We(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(4!==n.rank)throw new We(`depthwiseKernel is required to be 4-D, but is instead ${n.rank}-D`);return o=dE(o,n,e,"same"===i?"same":"valid","NHWC",r),"channelsFirst"===s&&(o=ss(o,[0,3,1,2])),o})}(e=qn(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(s=vd(s,this.bias.read(),this.dataFormat)),null!=this.activation&&(s=this.activation.apply(s)),s})}computeOutputShape(e){e=ps(e);const s="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,o=Sd("channelsFirst"===this.dataFormat?e[2]:e[1],this.kernelSize[0],this.padding,this.strides[0]),a=Sd(s,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,o,a]:[e[0],o,a,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Rr(this.depthwiseInitializer),e.depthwiseRegularizer=nr(this.depthwiseRegularizer),e.depthwiseConstraint=Lo(this.depthwiseRegularizer),e}}return t.className="DepthwiseConv2D",t})());let NE=(()=>{class t extends Bi{constructor(e){let i;if(super(e),null==e.cell)throw new We("cell property is missing for the constructor of RNN.");if(i=Array.isArray(e.cell)?new fge({cells:e.cell}):e.cell,null==i.stateSize)throw new We("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=i,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new Fo({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){return null==this.states_?gd(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(i=>null):this.states_}setStates(e){this.states_=e}computeOutputShape(e){A9(e)&&(e=e[0]);let i=this.cell.stateSize;Array.isArray(i)||(i=[i]);const s=i[0];let r;if(r=this.returnSequences?[e[0],e[1],s]:[e[0],s],this.returnState){const o=[];for(const a of i)o.push([e[0],a]);return[r].concat(o)}return r}computeMask(e,i){return et(()=>{Array.isArray(i)&&(i=i[0]);const s=this.returnSequences?i:null;if(this.returnState){const r=this.states.map(o=>null);return[s].concat(r)}return s})}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,i=[];for(let s=0;s<e;++s)i.push(null);return i}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new _i("Constants support is not implemented in RNN yet.");A9(e)&&(e=e[0]);const s=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Fo({shape:[s,null,...r]});const o=[e[0]].concat(e.slice(2));let a;if(this.cell.build(o),a=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!Qi(this.stateSpec.map(l=>l.shape[l.shape.length-1]),a))throw new We(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(l=>new Fo({shape:[null,l]}));this.stateful&&this.resetStates()}resetStates(e,i=!1){et(()=>{if(!this.stateful)throw new bh("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape[0];if(null==s)throw new We("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)this.states_=Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>No([s,r])):[No([s,this.cell.stateSize])];else if(null==e)Ci(this.states_),null!=this.keptStates&&(Ci(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(r=>No([s,r])):this.states_[0]=No([s,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new We(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);!0===i?this.keptStates.push(this.states_.slice()):Ci(this.states_);for(let r=0;r<this.states_.length;++r){const o=e[r],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[r]:this.cell.stateSize,l=[s,a];if(!Qi(o.shape,l))throw new We(`State ${r} is incompatible with layer ${this.name}: expected shape=${l}, received shape=${o.shape}`);this.states_[r]=o}}this.states_=this.states_.map(r=>Qo(r.clone()))})}apply(e,i){let s=null==i?null:i.initialState,r=null==i?null:i.constants;null==i&&(i={});const o=cge(e,s,r,this.numConstants);e=o.inputs,s=o.initialState,r=o.constants;let a=[],l=[];if(null!=s){i.initialState=s,a=a.concat(s),this.stateSpec=[];for(const u of s)this.stateSpec.push(new Fo({shape:u.shape}));l=l.concat(this.stateSpec)}if(null!=r&&(i.constants=r,a=a.concat(r),this.numConstants=r.length),a[0]instanceof Sh){const u=[e].concat(a),d=this.inputSpec.concat(l),h=this.inputSpec;this.inputSpec=d;const f=super.apply(u,i);return this.inputSpec=h,f}return super.apply(e,i)}call(e,i){return et(()=>{const s=null==i?null:i.mask,r=null==i?null:i.training;let o=null==i?null:i.initialState;e=qn(e),null==o&&(o=this.stateful?this.states_:this.getInitialState(e));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(o.length!==a)throw new We(`RNN Layer has ${a} state(s) but was passed ${o.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const l={training:r},u=uge((g,v)=>{const y=this.cell.call([g].concat(v),l);return[y[0],y.slice(1)]},e,o,this.goBackwards,s,null,this.unroll,this.returnSequences),d=u[0],h=u[1],f=u[2];this.stateful&&this.resetStates(f,r);const p=this.returnSequences?h:d;return this.returnState?[p].concat(f):p})}getInitialState(e){return et(()=>{let i=No(e.shape);return i=_n(i,[1,2]),i=TE(i),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(s=>s>1?D9(i,[1,s]):i):this.cell.stateSize>1?[D9(i,[1,this.cell.stateSize])]:[i]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),i={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(i.numConstants=this.numConstants);const s=this.cell.getConfig();return this.getClassName()===t.className&&(i.cell={className:this.cell.getClassName(),config:s}),Object.assign(Object.assign(Object.assign({},s),e),i)}static fromConfig(e,i,s={}){const o=Rf(i.cell,s);return new e(Object.assign(i,{cell:o}))}}return t.className="RNN",t})();At(NE);class XN extends Bi{}let dge=(()=>{class t extends XN{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,ta(this.units,"units"),this.activation=gm(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=xr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=xr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=xr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Er(e.kernelRegularizer),this.recurrentRegularizer=Er(e.recurrentRegularizer),this.biasRegularizer=Er(e.biasRegularizer),this.kernelConstraint=Po(e.kernelConstraint),this.recurrentConstraint=Po(e.recurrentConstraint),this.biasConstraint=Po(e.biasConstraint),this.dropout=O1([1,fm([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=O1([1,fm([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=ps(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(e,i){return et(()=>{if(2!==e.length)throw new We(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let s=e[1];e=e[0];const r=null!=i.training&&i.training;let o;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=bm({ones:()=>Vc(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=bm({ones:()=>Vc(s),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,l=this.recurrentDropoutMask;o=yh(null!=a?Be(e,a):e,this.kernel.read()),null!=this.bias&&(o=vd(o,this.bias.read())),null!=l&&(s=Be(s,l));let c=kt(o,yh(s,this.recurrentKernel.read()));return null!=this.activation&&(c=this.activation.apply(c)),[c,c]})}getConfig(){const e=super.getConfig(),i={units:this.units,activation:_m(this.activation),useBias:this.useBias,kernelInitializer:Rr(this.kernelInitializer),recurrentInitializer:Rr(this.recurrentInitializer),biasInitializer:Rr(this.biasInitializer),kernelRegularizer:nr(this.kernelRegularizer),recurrentRegularizer:nr(this.recurrentRegularizer),biasRegularizer:nr(this.biasRegularizer),activityRegularizer:nr(this.activityRegularizer),kernelConstraint:Lo(this.kernelConstraint),recurrentConstraint:Lo(this.recurrentConstraint),biasConstraint:Lo(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),i)}}return t.className="SimpleRNNCell",t})();At(dge),At((()=>{class t extends NE{constructor(e){e.cell=new dge(e),super(e)}call(e,i){return et(()=>(null!=this.cell.dropoutMask&&(Ci(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Ci(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(e,{mask:null==i?null:i.mask,training:null==i?null:i.training,initialState:null==i?null:i.initialState})))}static fromConfig(e,i){return new e(i)}}return t.className="SimpleRNN",t})());let hge=(()=>{class t extends XN{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new We("GRUCell does not support reset_after parameter set to true.");this.units=e.units,ta(this.units,"units"),this.activation=gm(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=gm(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=xr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=xr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=xr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Er(e.kernelRegularizer),this.recurrentRegularizer=Er(e.recurrentRegularizer),this.biasRegularizer=Er(e.biasRegularizer),this.kernelConstraint=Po(e.kernelConstraint),this.recurrentConstraint=Po(e.recurrentConstraint),this.biasConstraint=Po(e.biasConstraint),this.dropout=O1([1,fm([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=O1([1,fm([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=ps(e),this.kernel=this.addWeight("kernel",[e[e.length-1],3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(e,i){return et(()=>{if(2!==e.length)throw new We(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const s=null!=i.training&&i.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=bm({ones:()=>Vc(e),rate:this.dropout,training:s,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=bm({ones:()=>Vc(r),rate:this.recurrentDropout,training:s,count:3,dropoutFunc:this.dropoutFunc}));const a=this.recurrentDropoutMask;let l,c,u;0<this.dropout&&this.dropout<1&&(e=Be(e,this.dropoutMask[0]));let d=yh(e,this.kernel.read());this.useBias&&(d=vd(d,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=Be(r,a[0]));const h=this.recurrentKernel.read(),[f,p]=ac(h,[2*this.units,this.units],h.rank-1),g=yh(r,f),[v,y,w]=ac(d,3,d.rank-1),[E,T]=ac(g,2,g.rank-1);l=this.recurrentActivation.apply(kt(v,E)),c=this.recurrentActivation.apply(kt(y,T));const L=yh(Be(c,r),p);u=this.activation.apply(kt(w,L));const W=kt(Be(l,r),Be(kt(1,gr(l)),u));return[W,W]})}getConfig(){const e=super.getConfig(),i={units:this.units,activation:_m(this.activation),recurrentActivation:_m(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Rr(this.kernelInitializer),recurrentInitializer:Rr(this.recurrentInitializer),biasInitializer:Rr(this.biasInitializer),kernelRegularizer:nr(this.kernelRegularizer),recurrentRegularizer:nr(this.recurrentRegularizer),biasRegularizer:nr(this.biasRegularizer),activityRegularizer:nr(this.activityRegularizer),kernelConstraint:Lo(this.kernelConstraint),recurrentConstraint:Lo(this.recurrentConstraint),biasConstraint:Lo(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),i)}}return t.className="GRUCell",t})();At(hge),At((()=>{class t extends NE{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new hge(e),super(e)}call(e,i){return et(()=>(null!=this.cell.dropoutMask&&(Ci(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Ci(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(e,{mask:null==i?null:i.mask,training:null==i?null:i.training,initialState:null==i?null:i.initialState})))}static fromConfig(e,i){return 0===i.implmentation&&(i.implementation=1),new e(i)}}return t.className="GRU",t})());let sU=(()=>{class t extends XN{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,ta(this.units,"units"),this.activation=gm(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=gm(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=xr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=xr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=xr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Er(e.kernelRegularizer),this.recurrentRegularizer=Er(e.recurrentRegularizer),this.biasRegularizer=Er(e.biasRegularizer),this.kernelConstraint=Po(e.kernelConstraint),this.recurrentConstraint=Po(e.recurrentConstraint),this.biasConstraint=Po(e.biasConstraint),this.dropout=O1([1,fm([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=O1([1,fm([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var i;let r;if(e=ps(e),this.kernel=this.addWeight("kernel",[e[e.length-1],4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const o=this.biasInitializer,a=this.units;r=new((i=class extends Eu{apply(c,u){const d=o.apply([a]),h=(new b_e).apply([a]),f=o.apply([2*a]);return m_e(m_e(d,h),f)}}).className="CustomInit",i)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,i){return et(()=>{const s=null!=i.training&&i.training;if(3!==e.length)throw new We(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=e[1];const o=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=bm({ones:()=>Vc(e),rate:this.dropout,training:s,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=bm({ones:()=>Vc(r),rate:this.recurrentDropout,training:s,count:4,dropoutFunc:this.dropoutFunc}));const l=this.recurrentDropoutMask;let c,u,d,h;0<this.dropout&&this.dropout<1&&(e=Be(e,this.dropoutMask[0]));let f=yh(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=Be(r,l[0])),f=kt(f,yh(r,this.recurrentKernel.read())),this.useBias&&(f=vd(f,this.bias.read()));const[p,g,v,y]=ac(f,4,f.rank-1);c=this.recurrentActivation.apply(p),u=this.recurrentActivation.apply(g),d=kt(Be(u,o),Be(c,this.activation.apply(v))),h=this.recurrentActivation.apply(y);const w=Be(h,this.activation.apply(d));return[w,w,d]})}getConfig(){const e=super.getConfig(),i={units:this.units,activation:_m(this.activation),recurrentActivation:_m(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Rr(this.kernelInitializer),recurrentInitializer:Rr(this.recurrentInitializer),biasInitializer:Rr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:nr(this.kernelRegularizer),recurrentRegularizer:nr(this.recurrentRegularizer),biasRegularizer:nr(this.biasRegularizer),activityRegularizer:nr(this.activityRegularizer),kernelConstraint:Lo(this.kernelConstraint),recurrentConstraint:Lo(this.recurrentConstraint),biasConstraint:Lo(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),i)}}return t.className="LSTMCell",t})();At(sU),At((()=>{class t extends NE{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new sU(e),super(e)}call(e,i){return et(()=>(null!=this.cell.dropoutMask&&(Ci(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Ci(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(e,{mask:null==i?null:i.mask,training:null==i?null:i.training,initialState:null==i?null:i.initialState})))}static fromConfig(e,i){return 0===i.implmentation&&(i.implementation=1),new e(i)}}return t.className="LSTM",t})());let fge=(()=>{class t extends XN{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const i of this.cells.slice().reverse())Array.isArray(i.stateSize)?e.push(...i.stateSize):e.push(i.stateSize);return e}call(e,i){return et(()=>{let s=e.slice(1);const r=[];for(const l of this.cells.slice().reverse())Array.isArray(l.stateSize)?r.push(s.splice(0,l.stateSize.length)):r.push(s.splice(0,1));r.reverse();const o=[];let a;for(let l=0;l<this.cells.length;++l){const c=this.cells[l];s=r[l],a=0===l?[e[0]].concat(s):[a[0]].concat(s),a=c.call(a,i),o.push(a.slice(1))}s=[];for(const l of o.slice().reverse())s.push(...l);return[a[0]].concat(s)})}build(e){let i;A9(e)&&(e=e[0]),this.cells.forEach((s,r)=>{Wg(`RNNCell_${r}`,()=>{s.build(e),i=Array.isArray(s.stateSize)?s.stateSize[0]:s.stateSize,e=[e[0],i]})}),this.built=!0}getConfig(){const e=super.getConfig(),r={cells:this.cells.map(o=>({className:o.getClassName(),config:o.getConfig()}))};return Object.assign(Object.assign({},e),r)}static fromConfig(e,i,s={}){const r=[];for(const o of i.cells)r.push(Rf(o,s));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const i of this.cells)e.push(...i.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const i of this.cells)e.push(...i.nonTrainableWeights);if(!this.trainable){const i=[];for(const s of this.cells)i.push(...s.trainableWeights);return i.concat(e)}return e}getWeights(){const e=[];for(const i of this.cells)e.push(...i.weights);return O9(e)}setWeights(e){const i=[];for(const s of this.cells){const o=e.splice(s.weights.length);for(let a=0;a<s.weights.length;++a)i.push([s.weights[a],o[a]])}N9(i)}}return t.className="StackedRNNCells",t})();function bm(t){const{ones:n,rate:e,training:i=!1,count:s=1,dropoutFunc:r}=t,o=()=>null!=r?r(n(),e):g_e(n(),e),a=()=>kE(o,n,i);return!s||s<=1?Qo(a().clone()):Array(s).fill(void 0).map(a).map(c=>Qo(c.clone()))}At(fge);let nbt=(()=>{class t extends NE{constructor(e){if(e.unroll)throw new _i("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new _i("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Fo({ndim:5})]}call(e,i){return et(()=>{if(null!=this.cell.dropoutMask&&(Ci(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Ci(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),i&&i.constants)throw new We("ConvRNN2D cell does not support constants");return super.call(e,{mask:null==i?null:i.mask,training:null==i?null:i.training,initialState:null==i?null:i.initialState})})}computeOutputShape(e){let i=this.computeSingleOutputShape(e);return this.returnSequences||(i=[i[0],...i.slice(2)]),this.returnState&&(i=[i,...Array(2).fill([e[0],...i.slice(-3)])]),i}getInitialState(e){return et(()=>{const{stateSize:i}=this.cell,r=this.computeSingleOutputShape(e.shape),a=No([r[0],...r.slice(2)]);return Array.isArray(i)?Array(i.length).fill(a):[a]})}resetStates(e,i=!1){et(()=>{if(!this.stateful)throw new bh("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape,r=this.computeSingleOutputShape(s),o=[r[0],...r.slice(2)];if(null==s[0])throw new We("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())this.states_=Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(()=>No(o)):[No(o)];else if(null==e)Ci(this.states_),null!=this.keptStates&&(Ci(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>No(o)):this.states_[0]=No(o);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new We(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);i?this.keptStates.push(this.states_.slice()):Ci(this.states_);for(let l=0;l<this.states_.length;++l){const c=e[l],u=o;if(!Qi(c.shape,u))throw new We(`State ${l} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${c.shape}`);this.states_[l]=c}}this.states_=this.states_.map(l=>Qo(l.clone()))})}computeSingleOutputShape(e){const{dataFormat:i,filters:s,kernelSize:r,padding:o,strides:a,dilationRate:l}=this.cell,c="channelsFirst"===i,d=e[c?4:3],h=Sd(e[c?3:2],r[0],o,a[0],l[0]),f=Sd(d,r[1],o,a[1],l[1]);return[...e.slice(0,2),...c?[s,h,f]:[h,f,s]]}}return t.className="ConvRNN2D",t})(),pge=(()=>{class t extends sU{constructor(e){const{filters:i,kernelSize:s,strides:r,padding:o,dataFormat:a,dilationRate:l}=e;super(Object.assign(Object.assign({},e),{units:i})),this.filters=i,ta(this.filters,"filters"),this.kernelSize=F1(s,2,"kernelSize"),this.kernelSize.forEach(c=>ta(c,"kernelSize")),this.strides=F1(r||1,2,"strides"),this.strides.forEach(c=>ta(c,"strides")),this.padding=o||"valid",Uc(this.padding),this.dataFormat=a||"channelsLast",Qr(this.dataFormat),this.dilationRate=F1(l||1,2,"dilationRate"),this.dilationRate.forEach(c=>ta(c,"dilationRate"))}build(e){var i;e=ps(e);const s="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[s])throw new We(`The channel dimension of the input should be defined. Found ${e[s]}`);const a=this.kernelSize.concat([e[s],4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const l=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",l,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let c;if(this.unitForgetBias){const u=this.biasInitializer,d=this.filters;c=new((i=class extends Eu{apply(f,p){return k9([u.apply([d]),oc([d]),u.apply([2*d])])}}).className="CustomInit",i)}else c=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,c,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,i){return et(()=>{if(3!==e.length)throw new We(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const s=i.training||!1,r=e[0],o=e[1],a=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=bm({ones:()=>Vc(r),rate:this.dropout,training:s,count:4,dropoutFunc:this.dropoutFunc}));const c=this.dropoutMask,u=(tt,St,mt)=>St&&St[mt]?Be(St[mt],tt):tt;let d=u(r,c,0),h=u(r,c,1),f=u(r,c,2),p=u(r,c,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=bm({ones:()=>Vc(o),rate:this.recurrentDropout,training:s,count:4,dropoutFunc:this.dropoutFunc}));const g=this.recurrentDropoutMask;let v=u(o,g,0),y=u(o,g,1),w=u(o,g,2),E=u(o,g,3);const[L,W,H,P]=ac(this.kernel.read(),4,3),[X,ne,me,Ee]=this.useBias?ac(this.bias.read(),4):[null,null,null,null];d=this.inputConv(d,L,X,this.padding),h=this.inputConv(h,W,ne,this.padding),f=this.inputConv(f,H,me,this.padding),p=this.inputConv(p,P,Ee,this.padding);const[Te,$e,Xe,Ce]=ac(this.recurrentKernel.read(),4,3);v=this.recurrentConv(v,Te),y=this.recurrentConv(y,$e),w=this.recurrentConv(w,Xe),E=this.recurrentConv(E,Ce);const Fe=this.recurrentActivation.apply(kt(d,v)),Ie=this.recurrentActivation.apply(kt(h,y)),He=kt(Be(Ie,a),Be(Fe,this.activation.apply(kt(f,w)))),Ve=Be(this.recurrentActivation.apply(kt(p,E)),this.activation.apply(He));return[Ve,Ve,He]})}getConfig(){const s=function(t,n){var e={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(t);s<i.length;s++)n.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(e[i[s]]=t[i[s]])}return e}(super.getConfig(),["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},s),r)}inputConv(e,i,s,r){const o=am(e,i,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return s?vd(o,s,this.dataFormat):o}recurrentConv(e,i){return am(e,i,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}return t.className="ConvLSTM2DCell",t})();At(pge),At((()=>{class t extends nbt{constructor(e){const i=new pge(e);super(Object.assign(Object.assign({},e),{cell:i}))}static fromConfig(e,i){return new e(i)}}return t.className="ConvLSTM2D",t})());let mge=(()=>{class t extends Bi{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const i=e.shape,s=[];for(let r=0;r<this.noiseShape.length;++r)s.push(null==this.noiseShape[r]?i[r]:this.noiseShape[r]);return s}call(e,i){return et(()=>{this.invokeCallHook(e,i);const s=qn(e);if(0<this.rate&&this.rate<1){const r=null!=i.training&&i.training,o=this.getNoiseShape(s);return kE(()=>g_e(s,this.rate,o,this.seed),()=>s,r)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},i=super.getConfig();return Object.assign(e,i),e}dispose(){return super.dispose()}}return t.className="Dropout",t})();At(mge),At((()=>{class t extends mge{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const i=e.shape;return[i[0],1,i[2]]}}return t.className="SpatialDropout1D",t})()),At((()=>{class t extends Bi{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let i=null;null!=e.batchSize&&(i=e.batchSize),this.batchInputShape=[i,e.inputDim]}this.units=e.units,ta(this.units,"units"),this.activation=gm(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=xr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=xr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Po(e.kernelConstraint),this.biasConstraint=Po(e.biasConstraint),this.kernelRegularizer=Er(e.kernelRegularizer),this.biasRegularizer=Er(e.biasRegularizer),this.activityRegularizer=Er(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const i=(e=ps(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[i,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:i}}],this.built=!0}computeOutputShape(e){const i=(e=ps(e)).slice();return i[i.length-1]=this.units,i}call(e,i){return et(()=>{this.invokeCallHook(e,i);const s=qn(e),r=a_e(this.activation.getClassName());let o;return null!=r?o=yh(s,this.kernel.read(),r,this.bias?this.bias.read():null):(o=yh(s,this.kernel.read()),null!=this.bias&&(o=vd(o,this.bias.read())),null!=this.activation&&(o=this.activation.apply(o))),o})}getConfig(){const e={units:this.units,activation:_m(this.activation),useBias:this.useBias,kernelInitializer:Rr(this.kernelInitializer),biasInitializer:Rr(this.biasInitializer),kernelRegularizer:nr(this.kernelRegularizer),biasRegularizer:nr(this.biasRegularizer),activityRegularizer:nr(this.activityRegularizer),kernelConstraint:Lo(this.kernelConstraint),biasConstraint:Lo(this.biasConstraint)},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Dense",t})()),At((()=>{class t extends Bi{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=ps(e);for(const i of e.slice(1))if(null==i)throw new We(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],hm(e,1)]}call(e,i){return et(()=>{this.invokeCallHook(e,i);let s=qn(e);if("channelsFirst"===this.dataFormat&&s.rank>1){const r=[0];for(let o=2;o<s.rank;++o)r.push(o);r.push(1),s=ss(s,r)}return function L_t(t){if(t.rank<=1)throw new We(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const n=[t.shape[0],hm(t.shape,1)];return Ge(t,n)}(s)})}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const i=super.getConfig();return Object.assign(e,i),e}}return t.className="Flatten",t})()),At((()=>{class t extends Bi{constructor(e){super(e),this.supportsMasking=!0,this.activation=gm(e.activation)}call(e,i){return et(()=>{this.invokeCallHook(e,i);const s=qn(e);return this.activation.apply(s)})}getConfig(){const e={activation:_m(this.activation)},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Activation",t})()),At((()=>{class t extends Bi{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,i){return et(()=>function R_t(t,n){return et(()=>{if(2!==t.shape.length)throw new We(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);return D9(TE(t,1),[1,n,1])})}(e=qn(e),this.n))}getConfig(){const e={n:this.n},i=super.getConfig();return Object.assign(e,i),e}}return t.className="RepeatVector",t})()),At((()=>{class t extends Bi{constructor(e){super(e),this.targetShape=e.targetShape;for(let i=0;i<this.targetShape.length;++i)this.isUnknown(this.targetShape[i])&&(this.targetShape[i]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,i){const s="Total size of new array must be unchanged.",r=i.slice();let o=1,a=null;for(let c=0;c<r.length;++c){const u=r[c];if(this.isUnknown(u)){if(null!==a)throw new We("Can only specifiy one unknown dimension.");a=c}else o*=u}const l=hm(e);if(null!==a){if(0===o||l%o!=0)throw new We(s);r[a]=l/o}else if(l!==o)throw new We(s);return r}computeOutputShape(e){let i=!1;for(let s=0;s<e.length;++s)if(this.isUnknown(e[s])){i=!0;break}return i?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,i){return et(()=>{this.invokeCallHook(e,i);const s=qn(e),r=s.shape,o=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return Ge(s,o)})}getConfig(){const e={targetShape:this.targetShape},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Reshape",t})()),At((()=>{class t extends Bi{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const i=gd(1,e.dims.length+1);if(!Qi(e.dims.slice().sort(),i))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Fo({ndim:this.dims.length+1})]}computeOutputShape(e){const i=(e=ps(e)).slice();return this.dims.forEach((s,r)=>{i[r+1]=e[s]}),i}call(e,i){return ss(qn(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Permute",t})()),At((()=>{class t extends Bi{constructor(e){super(e??{}),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),i={maskValue:this.maskValue};return Object.assign(i,e),i}computeMask(e,i){const s=qn(e);return tN(E1(s,this.maskValue),-1)}call(e,i){return et(()=>{this.invokeCallHook(e,i);const s=qn(e),a=tN(E1(s,this.maskValue),-1,!0);return Be(s,Ht(a,s.dtype))})}}return t.className="Masking",t})()),At((()=>{class t extends Bi{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let i=null;null!=e.batchSize&&(i=e.batchSize),this.batchInputShape=null==e.inputLength?[i,null]:[i].concat(As(e.inputLength))}this.inputDim=e.inputDim,ta(this.inputDim,"inputDim"),this.outputDim=e.outputDim,ta(this.outputDim,"outputDim"),this.embeddingsInitializer=xr(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Er(e.embeddingsRegularizer),this.activityRegularizer=Er(e.activityRegularizer),this.embeddingsConstraint=Po(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,i){return et(()=>this.maskZero?(e=qn(e),E1(e,ns(e))):null)}computeOutputShape(e){if(e=ps(e),null==this.inputLength)return[...e,this.outputDim];const i=As(this.inputLength);if(i.length!==e.length-1)throw new We(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let s=0;for(let r=0;r<i.length;++r){const o=i[r],a=e[r+1];if(null!=o&&null!=a&&o!==a)throw new We(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);null==o&&(i[s]=a),s++}}return[e[0],...i,this.outputDim]}call(e,i){return et(()=>{this.invokeCallHook(e,i);let s=qn(e);"int32"!==s.dtype&&(s=vh(s,"int32"));const r=__e(this.embeddings.read(),Ge(s,[s.size]));return Ge(r,ps(this.computeOutputShape(s.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Rr(this.embeddingsInitializer),embeddingsRegularizer:nr(this.embeddingsRegularizer),activityRegularizer:nr(this.activityRegularizer),embeddingsConstraint:Lo(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Embedding",t})());class Kg extends Bi{constructor(n){super(n||{}),this.supportsMasking=!0}mergeFunction(n){throw new _i}computeElementwiseOpOutputShape(n,e){if(null==n||null==e)return null;if(n.length<e.length)return this.computeElementwiseOpOutputShape(e,n);if(0===e.length)return n;const i=n.slice(0,n.length-e.length);for(let s=0;s<e.length;++s){const r=n[n.length-e.length+s],o=e[s];if(null==r||null==o||r<0||o<0)i.push(null);else if(1===r)i.push(o);else if(1===o)i.push(r);else{if(r!==o)throw new We("Operands could not be broadcast together with shapes "+JSON.stringify(n)+" "+JSON.stringify(e));i.push(r)}}return i}build(n){if(Array.isArray(n)&&!Array.isArray(n[0])&&(n=[ps(n)]),n.length<2)throw new We(`A merge layer should be called on an Array of at least 2 inputs. Got ${n.length} input(s).`);let e=[];for(const r of n)null!=r&&null!==r[0]&&e.push(r[0]);if(e=dm(e),e.length>1)throw new We(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(n)}.`);let i=null==n[0]?null:n[0].slice(1);for(let r=1;r<n.length;++r){const o=null==n[r]?null:n[r].slice(1);i=this.computeElementwiseOpOutputShape(i,o)}const s=n.map(r=>r.length);this.reshapeRequired=-1!==n.indexOf(null)||1!==dm(s).length}call(n,e){return et(()=>{if(this.reshapeRequired){const i=[],s=n.map(r=>r.rank);if(-1===s.indexOf(null)){const r=fm(s);for(let o of n){const a=o.rank;for(let l=0;l<r-a;++l)o=TE(o,1);i.push(o)}return this.mergeFunction(i)}{let r=!1;for(const l of n){const c=l.rank;if(null==c){const u=l.shape,d=u[0],h=u.slice(1).concat([d]);let f=Ge(l,[d].concat(hm(u.slice(1))));f=ss(f,[1,0]),f=Ge(f,h),i.push(f),r=!0}else if(c>1){const u=gd(1,c).concat([0]);i.push(ss(l,u)),r=!0}else i.push(l)}let o=this.mergeFunction(i);const a=o.rank;if(r)if(null==a){const l=o.shape,u=l[l.length-1],d=[u].concat(l.slice(0,l.length-1));o=Ge(ss(Ge(o,[-1,u]),[1,0]),d)}else if(a>1){const l=[a-1].concat(gd(0,a-1));o=ss(o,l)}return o}}return this.mergeFunction(n)})}computeOutputShape(n){let e;e=null==n[0]?null:n[0].slice(1);for(let s=1;s<n.length;++s){const r=null==n[s]?null:n[s].slice(1);e=this.computeElementwiseOpOutputShape(e,r)}let i=[];for(const s of n)null!=s&&null!==s[0]&&i.push(s[0]);return i=dm(i),e=1===i.length?i.concat(e):[null].concat(e),e}computeMask(n,e){return et(()=>{if(null==e)return null;if(!Array.isArray(e))throw new We("`mask` should be an Array");if(!Array.isArray(n))throw new We("`inputs` should be an Array");if(e.length!==n.length)throw new We(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${n.length} vs ${e.length})`);if(e.every(s=>null==s))return null;let i=(e=e.map(s=>null==s?s:Ra(s,0)))[0];for(let s=1;s<e.length-1;++s)i=ph(i,e[s]);return i})}}let rU=(()=>{class t extends Kg{constructor(e){super(e)}mergeFunction(e){return et(()=>{let i=e[0].clone();for(let s=1;s<e.length;++s)i=kt(i,e[s]);return i})}}return t.className="Add",t})();At(rU);let oU=(()=>{class t extends Kg{constructor(e){super(e)}mergeFunction(e){return et(()=>{let i=e[0].clone();for(let s=1;s<e.length;++s)i=Be(i,e[s]);return i})}}return t.className="Multiply",t})();At(oU);let aU=(()=>{class t extends Kg{constructor(e){super(e)}mergeFunction(e){return et(()=>{let i=e[0].clone();for(let s=1;s<e.length;++s)i=kt(i,e[s]);return Be(1/e.length,i)})}}return t.className="Average",t})();At(aU);let lU=(()=>{class t extends Kg{constructor(e){super(e)}mergeFunction(e){return et(()=>{let i=e[0];for(let s=1;s<e.length;++s)i=If(i,e[s]);return i})}}return t.className="Maximum",t})();At(lU);let cU=(()=>{class t extends Kg{constructor(e){super(e)}mergeFunction(e){return et(()=>{let i=e[0];for(let s=1;s<e.length;++s)i=$g(i,e[s]);return i})}}return t.className="Minimum",t})();At(cU);let uU=(()=>{class t extends Kg{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new We("A `Concatenate` layer should be called on a list of at least 2 inputs");let i=!0;for(const r of e)if(null!=r){i=!1;break}if(i)return;const s=[];for(let r=0;r<e.length;++r){const o=e[r].slice();o.splice(this.axis,1);let a=!1;for(const l of s)if(Qi(l,o)){a=!0;break}a||s.push(o)}if(s.length>1)throw new We("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return et(()=>k9(e,this.axis))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new We("A `Concatenate` layer should be called on a list of inputs.");const i=e,s=i[0].slice(),r=this.axis<0?s.length+this.axis:this.axis;for(const o of i.slice(1)){if(null==s[r]||null==o[r]){s[r]=null;break}s[r]+=o[r]}return s}computeMask(e,i){if(null==i)return null;if(!Array.isArray(i))throw new We("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new We("`inputs` should be an array for Concatenate");if(i.length!==e.length)throw new We(`Mismatch in the length of mask (${i.length}) and the legnth of inputs (${e.length})`);return et(()=>{let s=!0;if(i.forEach(a=>{null==a||(s=!1)}),s)return null;const r=[];for(let a=0;a<e.length;++a)r.push(null==i[a]?Ht(Vc(e[a]),"bool"):i[a].rank<e[a].rank?Ra(i[a],-1):i[a]);const o=Xr(r,this.axis);return l7(o,-1,!1)})}getConfig(){const e={axis:this.axis},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Concatenate",t})();function RE(t,n){for(;t<0;)t+=n;return t}function FE(t,n,e,i,s,r=.001){let o;if(2===t.rank)o=xpe(t,n,e,i,s,r);else if(3===t.rank)o=Epe(t,n,e,i,s,r);else{if(4!==t.rank)throw new _i(`batchNormalization is not implemented for array of rank ${t.rank} yet`);o=Tpe(t,n,e,i,s,r)}return o}function YN(t,n,e,i,s,r){return et(()=>{let o;Qr(s),c_e(r),Uc(i),null==e&&(e=[1,1]),null==i&&(i="valid"),null==s&&(s="channelsLast"),null==r&&(r="max"),t=nU(t,s);const a="same"===i?"same":"valid";return o="max"===r?hN(t,n,e,a):nN(t,n,e,a),"channelsFirst"===s&&(o=ss(o,[0,3,1,2])),o})}function _ge(t,n,e,i,s,r){return et(()=>{let o;Qr(s),c_e(r),Uc(i),null==e&&(e=[1,1,1]),null==i&&(i="valid"),null==s&&(s="channelsLast"),null==r&&(r="max"),t=sge(t,s);const a="same"===i?"same":"valid";return o="max"===r?Ype(t,n,e,a):Cpe(t,n,e,a),"channelsFirst"===s&&(o=ss(o,[0,4,1,2,3])),o})}At(uU),At((()=>{class t extends Kg{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){le(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const i=e[0],s=e[1];if(i.length>3||s.length>3)throw new _i("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(i,s);if(i[r[0]]!==s[r[1]])throw new We(`Dimension incompatibility: ${i[r[0]]} !== ${s[r[1]]}`)}mergeFunction(e){if(2!==e.length)throw new We(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let r,i=e[0],s=e[1];return r=Array.isArray(this.axes)?this.axes.map((o,a)=>RE(o,e[a].shape.length)):[RE(this.axes,i.shape.length),RE(this.axes,s.shape.length)],this.normalize&&(i=VN(i,r[0]),s=VN(s,r[1])),function ibt(t,n,e){if(t.shape.length>3||n.shape.length>3)throw new _i("batchDot is not implemented for tensors of 4D or higher rank yet");if(le(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),le(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${n.shape.length}`),"number"==typeof e&&(e=[e,e]),"complex64"===t.dtype||"complex64"===n.dtype)throw new _i("batchDot is not implemented for complex64-type Tensors yet.");const i=t.shape.length,s=n.shape.length;null==e&&(e=[i-1,s-2]);const r=e;return et(()=>{let o,a;if(i>s){o=i-s;const l=[];for(let c=0;c<o;++c)l.push(1);n=Ge(n,n.shape.concat(l))}else if(s>i){o=s-i;const l=[];for(let c=0;c<o;++c)l.push(1);t=Ge(t,t.shape.concat(l))}else o=0;if(a=2===t.shape.length&&2===n.shape.length?r[0]===r[1]?_n(Be(t,n),r[0]):_n(Be(ss(t,[1,0]),n),r[1]):Ui(t,n,r[0]!==t.shape.length-1,r[1]===n.shape.length-1),o>0){let l;l=i>s?i+s-3:i-1;const c=[];for(let u=l;u<l+o;++u)c.push(u);a=Vg(a,c)}return 1===a.shape.length&&(a=Ra(a,1)),a})}(i,s,r)}interpretAxes(e,i){let s;return s=Array.isArray(this.axes)?this.axes:[RE(this.axes,e.length),RE(this.axes,i.length)],s}computeOutputShape(e){le(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const i=e[0].slice(),s=e[1].slice();if(i.length>3||s.length>3)throw new _i("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(i,s);i.splice(r[0],1),s.splice(r[1],1),s.splice(0,1);const o=i.concat(s);return 1===o.length&&o.push(1),o}computeMask(e,i){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Dot",t})()),At((()=>{class t extends Bi{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),i={stddev:this.stddev};return Object.assign(i,e),i}call(e,i){return et(()=>{this.invokeCallHook(e,i);const s=qn(e);return kE(()=>kt(NN(s.shape,0,this.stddev),s),()=>s,i.training||!1)})}}return t.className="GaussianNoise",t})()),At((()=>{class t extends Bi{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),i={rate:this.rate};return Object.assign(i,e),i}call(e,i){return et(()=>{this.invokeCallHook(e,i);const s=qn(e);return this.rate>0&&this.rate<1?kE(()=>{const o=Math.sqrt(this.rate/(1-this.rate));return Be(s,NN(s.shape,1,o))},()=>s,i.training||!1):s})}}return t.className="GaussianDropout",t})()),At((()=>{class t extends Bi{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||qn(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),i={rate:this.rate};return Object.assign(i,e),i}call(e,i){return et(()=>{if(this.rate<1&&this.rate>0){const s=this._getNoiseShape(e);return kE(()=>{const o=qn(e),c=-1.7580993408473766;let u=cm(Bg(s),this.rate);u=vh(u,"float32");const d=((1-this.rate)*(1+this.rate*c**2))**-.5,h=-d*c*this.rate,f=kt(Be(o,u),Be(kt(u,-1),c));return kt(Be(f,d),h)},()=>qn(e),i.training||!1)}return e})}}return t.className="AlphaDropout",t})()),At((()=>{class t extends Bi{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=xr(e.betaInitializer||"zeros"),this.gammaInitializer=xr(e.gammaInitializer||"ones"),this.movingMeanInitializer=xr(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=xr(e.movingVarianceInitializer||"ones"),this.betaConstraint=Po(e.betaConstraint),this.gammaConstraint=Po(e.gammaConstraint),this.betaRegularizer=Er(e.betaRegularizer),this.gammaRegularizer=Er(e.gammaRegularizer)}build(e){e=ps(e);const i=this.axis>=0?this.axis:this.axis+e.length,s=e[i];if(null==s)throw new We(`Axis ${i} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Fo({ndim:e.length,axes:{[i]:s}})];const r=[s];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,i){return et(()=>{const s=null!=i.training&&i.training,r=qn(e),o=r.shape,a=o.length,l=gd(0,a),c=this.axis>=0?this.axis:this.axis+a;l.splice(c,1);const u=Gg(1,a);u[c]=o[c];const d=l.slice();d.sort();const h=!Qi(d,gd(0,a).slice(0,a-1));if(!s)return(()=>{if(h){const E=Ge(this.movingMean.read(),u),T=Ge(this.movingVariance.read(),u),L=this.center?Ge(this.beta.read(),u):null,W=this.scale?Ge(this.gamma.read(),u):null;return FE(r,E,T,L,W,this.epsilon)}return FE(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[p,g,v]=function obt(t,n,e,i,s=.001){return Qi(i.slice().sort(),gd(0,t.rank-1))?function sbt(t,n,e,i,s=.001){return et(()=>{const r=fN(t,i),o=r.mean,a=r.variance;return[FE(t,o,a,e,n,s),o,a]})}(t,n,e,i,s):function rbt(t,n,e,i,s=.001){return et(()=>{const r=fN(t,i),o=r.mean,a=r.variance,l=[];for(const p of gd(0,t.rank))-1!==i.indexOf(p)?l.push(1):l.push(t.shape[p]);const c=Ge(o,l),u=Ge(a,l),d=null==n?null:Ge(n,l),h=null==e?null:Ge(e,l);return[FE(t,c,u,h,d,s),o,a]})}(t,n,e,i,s)}(r,this.gamma.read(),this.beta.read(),l,this.epsilon),y=(E,T,L)=>{et(()=>{const W=1-L,H=E.read(),P=Be(tn(H,T),W);E.write(tn(H,P))})};return(()=>{y(this.movingMean,g,this.momentum),y(this.movingVariance,v,this.momentum)})(),p})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Rr(this.betaInitializer),gammaInitializer:Rr(this.gammaInitializer),movingMeanInitializer:Rr(this.movingMeanInitializer),movingVarianceInitializer:Rr(this.movingVarianceInitializer),betaRegularizer:nr(this.betaRegularizer),gammaRegularizer:nr(this.gammaRegularizer),betaConstraint:Lo(this.betaConstraint),gammaConstraint:Lo(this.gammaConstraint)},i=super.getConfig();return Object.assign(e,i),e}}return t.className="BatchNormalization",t})()),At((()=>{class t extends Bi{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else{if(!Array.isArray(this.axis))throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);for(const i of this.axis)if(!Number.isInteger(i))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=xr(e.betaInitializer||"zeros"),this.gammaInitializer=xr(e.gammaInitializer||"ones"),this.betaRegularizer=Er(e.betaRegularizer),this.gammaRegularizer=Er(e.gammaRegularizer),this.supportsMasking=!0}build(e){const i=(e=ps(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let o=0;o<this.axis.length;++o)this.axis[o]<0&&(this.axis[o]+=i);for(const o of this.axis)if(o<0||o>=i)throw new Error(`Invalid axis: ${o}`);if(this.axis.length!==dm(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const s=this.axis.map(o=>e[o]),r=!0;this.gamma=this.scale?this.addWeight("gamma",s,"float32",this.gammaInitializer,this.gammaRegularizer,r):null,this.beta=this.center?this.addWeight("beta",s,"float32",this.betaInitializer,this.betaRegularizer,r):null,this.built=!0}call(e,i){const s=qn(e),r=s.shape,o=r.length;return et(()=>{let{mean:l,variance:c}=fN(s,this.axis,!0);const u=Gg(1,o);for(const v of this.axis)u[v]=r[v];const d=v=>null!=v&&v.shape.length!==o?Ge(v,u):v;let h=this.scale?d(this.gamma.read()):null,f=this.center?d(this.beta.read()):null;const p=[],g=[];for(let v=0;v<o;++v)-1!==this.axis.indexOf(v)?(p.push(r[v]),g.push(1)):(p.push(1),g.push(r[v]));return l=vu(l,p),c=vu(c,p),null!=h&&(h=vu(h,g)),null!=f&&(f=vu(f,g)),FE(s,l,c,f,h,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Rr(this.betaInitializer),gammaInitializer:Rr(this.gammaInitializer),betaRegularizer:nr(this.betaRegularizer),gammaRegularizer:nr(this.gammaRegularizer)},i=super.getConfig();return Object.assign(e,i),e}}return t.className="LayerNormalization",t})()),At((()=>{class t extends Bi{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new We(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let i,s;if("number"==typeof e.padding[0])i=[e.padding[0],e.padding[0]],s=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new We(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(i=e.padding[0],2!==e.padding[1].length)throw new We(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);s=e.padding[1]}this.padding=[i,s]}this.inputSpec=[new Fo({ndim:4})]}computeOutputShape(e){let i,s;return e=ps(e),"channelsFirst"===this.dataFormat?(i=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,s=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],i,s]):(i=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,s=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],i,s,e[3]])}call(e,i){return et(()=>function abt(t,n,e){return et(()=>{if(4!==t.rank)throw new We(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new We("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==e&&(e="channelsLast"),"channelsLast"!==e&&"channelsFirst"!==e)throw new We(`Unknown data format: ${e}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let i;return i="channelsFirst"===e?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],um(t,i)})}(qn(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},i=super.getConfig();return Object.assign(e,i),e}}return t.className="ZeroPadding2D",t})());class gge extends Bi{constructor(n){if(null==n.poolSize&&(n.poolSize=2),super(n),"number"==typeof n.poolSize)this.poolSize=[n.poolSize];else{if(!Array.isArray(n.poolSize)||1!==n.poolSize.length||"number"!=typeof n.poolSize[0])throw new We(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(n.poolSize)}`);this.poolSize=n.poolSize}if(ta(this.poolSize,"poolSize"),null==n.strides)this.strides=this.poolSize;else if("number"==typeof n.strides)this.strides=[n.strides];else{if(!Array.isArray(n.strides)||1!==n.strides.length||"number"!=typeof n.strides[0])throw new We(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(n.strides)}`);this.strides=n.strides}ta(this.strides,"strides"),this.padding=null==n.padding?"valid":n.padding,Uc(this.padding),this.inputSpec=[new Fo({ndim:3})]}computeOutputShape(n){const e=Sd((n=ps(n))[1],this.poolSize[0],this.padding,this.strides[0]);return[n[0],e,n[2]]}call(n,e){return et(()=>{this.invokeCallHook(n,e),n=TE(qn(n),2);const i=this.poolingFunction(qn(n),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Vg(i,[2])})}getConfig(){const n={poolSize:this.poolSize,padding:this.padding,strides:this.strides},e=super.getConfig();return Object.assign(n,e),n}}At((()=>{class t extends gge{constructor(e){super(e)}poolingFunction(e,i,s,r,o){return Qr(o),Uc(r),YN(e,i,s,r,o,"max")}}return t.className="MaxPooling1D",t})()),At((()=>{class t extends gge{constructor(e){super(e)}poolingFunction(e,i,s,r,o){return Qr(o),Uc(r),YN(e,i,s,r,o,"avg")}}return t.className="AveragePooling1D",t})());class bge extends Bi{constructor(n){if(null==n.poolSize&&(n.poolSize=[2,2]),super(n),this.poolSize=Array.isArray(n.poolSize)?n.poolSize:[n.poolSize,n.poolSize],null==n.strides)this.strides=this.poolSize;else if(Array.isArray(n.strides)){if(2!==n.strides.length)throw new We(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${n.strides.length}.`);this.strides=n.strides}else this.strides=[n.strides,n.strides];ta(this.poolSize,"poolSize"),ta(this.strides,"strides"),this.padding=null==n.padding?"valid":n.padding,this.dataFormat=null==n.dataFormat?"channelsLast":n.dataFormat,Qr(this.dataFormat),Uc(this.padding),this.inputSpec=[new Fo({ndim:4})]}computeOutputShape(n){n=ps(n);let e="channelsFirst"===this.dataFormat?n[2]:n[1],i="channelsFirst"===this.dataFormat?n[3]:n[2];return e=Sd(e,this.poolSize[0],this.padding,this.strides[0]),i=Sd(i,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[n[0],n[1],e,i]:[n[0],e,i,n[3]]}call(n,e){return et(()=>(this.invokeCallHook(n,e),this.poolingFunction(qn(n),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const n={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}}At((()=>{class t extends bge{constructor(e){super(e)}poolingFunction(e,i,s,r,o){return Qr(o),Uc(r),YN(e,i,s,r,o,"max")}}return t.className="MaxPooling2D",t})()),At((()=>{class t extends bge{constructor(e){super(e)}poolingFunction(e,i,s,r,o){return Qr(o),Uc(r),YN(e,i,s,r,o,"avg")}}return t.className="AveragePooling2D",t})());class vge extends Bi{constructor(n){if(null==n.poolSize&&(n.poolSize=[2,2,2]),super(n),this.poolSize=Array.isArray(n.poolSize)?n.poolSize:[n.poolSize,n.poolSize,n.poolSize],null==n.strides)this.strides=this.poolSize;else if(Array.isArray(n.strides)){if(3!==n.strides.length)throw new We(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${n.strides.length}.`);this.strides=n.strides}else this.strides=[n.strides,n.strides,n.strides];ta(this.poolSize,"poolSize"),ta(this.strides,"strides"),this.padding=null==n.padding?"valid":n.padding,this.dataFormat=null==n.dataFormat?"channelsLast":n.dataFormat,Qr(this.dataFormat),Uc(this.padding),this.inputSpec=[new Fo({ndim:5})]}computeOutputShape(n){n=ps(n);let e="channelsFirst"===this.dataFormat?n[2]:n[1],i="channelsFirst"===this.dataFormat?n[3]:n[2],s="channelsFirst"===this.dataFormat?n[4]:n[3];return e=Sd(e,this.poolSize[0],this.padding,this.strides[0]),i=Sd(i,this.poolSize[1],this.padding,this.strides[1]),s=Sd(s,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[n[0],n[1],e,i,s]:[n[0],e,i,s,n[4]]}call(n,e){return et(()=>(this.invokeCallHook(n,e),this.poolingFunction(qn(n),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const n={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}}At((()=>{class t extends vge{constructor(e){super(e)}poolingFunction(e,i,s,r,o){return Qr(o),Uc(r),_ge(e,i,s,r,o,"max")}}return t.className="MaxPooling3D",t})()),At((()=>{class t extends vge{constructor(e){super(e)}poolingFunction(e,i,s,r,o){return Qr(o),Uc(r),_ge(e,i,s,r,o,"avg")}}return t.className="AveragePooling3D",t})());class yge extends Bi{constructor(n){super(n),this.inputSpec=[new Fo({ndim:3})]}computeOutputShape(n){return[n[0],n[2]]}call(n,e){throw new _i}}At((()=>{class t extends yge{constructor(e){super(e||{})}call(e,i){return et(()=>{const s=qn(e);return Gr(s,1)})}}return t.className="GlobalAveragePooling1D",t})()),At((()=>{class t extends yge{constructor(e){super(e||{})}call(e,i){return et(()=>{const s=qn(e);return bu(s,1)})}}return t.className="GlobalMaxPooling1D",t})());class wge extends Bi{constructor(n){super(n),this.dataFormat=null==n.dataFormat?"channelsLast":n.dataFormat,Qr(this.dataFormat),this.inputSpec=[new Fo({ndim:4})]}computeOutputShape(n){return"channelsLast"===this.dataFormat?[n[0],n[3]]:[n[0],n[1]]}call(n,e){throw new _i}getConfig(){const n={dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}}At((()=>{class t extends wge{call(e,i){return et(()=>{const s=qn(e);return Gr(s,"channelsLast"===this.dataFormat?[1,2]:[2,3])})}}return t.className="GlobalAveragePooling2D",t})()),At((()=>{class t extends wge{call(e,i){return et(()=>{const s=qn(e);return bu(s,"channelsLast"===this.dataFormat?[1,2]:[2,3])})}}return t.className="GlobalMaxPooling2D",t})());class Sge extends Bi{constructor(n){super(n),this.layer=n.layer}build(n){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(n){null!=this.layer&&(this.layer.trainable=n)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(n){this.layer.setWeights(n)}getConfig(){const n={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},e=super.getConfig();return Object.assign(n,e),n}setFastWeightInitDuringBuild(n){super.setFastWeightInitDuringBuild(n),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(n)}static fromConfig(n,e,i={}){const r=Rf(e.layer,i);delete e.layer;const o={layer:r};return Object.assign(o,e),new n(o)}}At((()=>{class t extends Sge{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=ps(e)).length<3)throw new We(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const i=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(i),this.layer.built=!0),super.build(e)}computeOutputShape(e){const i=[(e=ps(e))[0]].concat(e.slice(2)),s=this.layer.computeOutputShape(i);return[s[0],e[1]].concat(s.slice(1))}call(e,i){return et(()=>uge((a,l)=>[qn(this.layer.call(a,i)),[]],e=qn(e),[],!1,null,null,!1,!0)[1])}}return t.className="TimeDistributed",t})()),At((()=>{class t extends Sge{constructor(e){super(e);const i=e.layer.getConfig(),s={};s.className=e.layer.getClassName(),s.config=i,this.forwardLayer=Rf(s),i.goBackwards=!0!==i.goBackwards;const r={};if(r.className=e.layer.getClassName(),r.config=i,this.backwardLayer=Rf(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function lbt(t){Hg(I_t,"BidirectionalMergeMode",t)}(this.mergeMode),e.weights)throw new _i("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const s=Math.floor(e.length/2);this.forwardLayer.setWeights(e.slice(0,s)),this.backwardLayer.setWeights(e.slice(s))}computeOutputShape(e){let s,r,o,i=this.forwardLayer.computeOutputShape(e);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),this.returnState&&(o=i.slice(1)),s=i[0],"concat"===this.mergeMode?(s[s.length-1]*=2,r=[s]):r=null==this.mergeMode?[s,s.slice()]:[s],this.returnState?null==this.mergeMode?r.concat(o).concat(o.slice()):[s].concat(o).concat(o.slice()):Il(r)}apply(e,i){let s=null==i?null:i.initialState,r=null==i?null:i.constants;null==i&&(i={});const o=cge(e,s,r,this.numConstants);if(e=o.inputs,s=o.initialState,r=o.constants,Array.isArray(e)&&(s=e.slice(1),e=e[0]),(null==s||0===s.length)&&null==r)return super.apply(e,i);const a=[],l=[];if(null!=s){const u=s.length;if(u%2>0)throw new We("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");i.initialState=s,a.push(...s);const d=s.map(h=>new Fo({shape:h.shape}));this.forwardLayer.stateSpec=d.slice(0,u/2),this.backwardLayer.stateSpec=d.slice(u/2),l.push(...d)}if(null!=r)throw new _i("Support for constants in Bidirectional layers is not implemented yet.");const c=a[0]instanceof Sh;for(const u of a)if(u instanceof Sh!==c)throw new We("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){const u=[e].concat(a),d=this.inputSpec.concat(l),h=this.inputSpec;this.inputSpec=d;const f=super.apply(u,i);return this.inputSpec=h,f}return super.apply(e,i)}call(e,i){return et(()=>{const s=i.initialState;let r,o,a,l;if(null==s)r=this.forwardLayer.call(e,i),o=this.backwardLayer.call(e,i);else{const c=s.slice(0,s.length/2),u=s.slice(s.length/2);r=this.forwardLayer.call(e,Object.assign(i,{initialState:c})),o=this.backwardLayer.call(e,Object.assign(i,{initialState:u}))}return this.returnState&&(Array.isArray(r)&&(a=r.slice(1).concat(o.slice(1))),r=r[0],o=o[0]),this.returnSequences&&(o=yu(o,1)),"concat"===this.mergeMode?l=k9([r,o]):"sum"===this.mergeMode?l=kt(r,o):"ave"===this.mergeMode?l=Be(.5,kt(r,o)):"mul"===this.mergeMode?l=Be(r,o):null==this.mergeMode&&(l=[r,o]),this.returnState?null==this.mergeMode?l.concat(a):[l].concat(a):l})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Wg(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Wg(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,i){let s;if(Array.isArray(i)&&(i=i[0]),s=this.returnSequences?null==this.mergeMode?[i,i]:i:null==this.mergeMode?[null,null]:null,this.returnState){const o=this.forwardLayer.states.map(a=>null);return Array.isArray(s)?s.concat(o).concat(o):[s].concat(o).concat(o)}return s}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},i=super.getConfig();return Object.assign(e,i),e}static fromConfig(e,i){const s=Rf(i.layer);if(delete i.layer,null!=i.numConstants)throw new _i("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=i;return r.layer=s,new e(r)}}return t.className="Bidirectional",t})()),At((()=>{class t extends Bi{constructor(e){super(e),this.scale=e.scale,this.offset=e.offset?e.offset:0}getConfig(){const e={scale:this.scale,offset:this.offset},i=super.getConfig();return Object.assign(e,i),e}call(e,i){return et(()=>("float32"!==(e=qn(e)).dtype&&(e=vh(e,"float32")),kt(Be(e,this.scale),this.offset)))}}return t.className="Rescaling",t})());const{resizeBilinear:ubt,cropAndResize:dbt}=Su;At((()=>{class t extends Bi{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,i,s,r,o,a,l,c){return et(()=>{let u,d=!1;const v=[i/a,s/l,(r+i)/a,(o+s)/l],y=[];3===e.rank?(d=!0,u=Tl([e])):u=e;for(let W=0;W<u.shape[0];W++)y.push(v);const w=$c(y,[y.length,4]),E=I1(0,y.length,1,"int32"),L=dbt(u,w,E,[r,o],"nearest");return vh(d?qn(wu(L)):L,c)})}upsize(e,i,s,r){return et(()=>vh(ubt(e,[i,s]),r))}call(e,i){return et(()=>{const s=qn(e),r=s.dtype,o=s.shape,a=o[o.length-3],l=o[o.length-2];let c=0;a!==this.height&&(c=Math.floor((a-this.height)/2));let u=0;return l!==this.width&&(u=Math.floor((l-this.width)/2),0===u&&(u=1)),c>=0&&u>=0?this.centerCrop(s,c,u,this.height,this.width,a,l,r):this.upsize(e,this.height,this.width,r)})}getConfig(){const e={height:this.height,width:this.width},i=super.getConfig();return Object.assign(e,i),e}computeOutputShape(e){const s=(e=ps(e)).length-2;return e[e.length-3]=this.height,e[s]=this.width,e}}return t.className="CenterCrop",t})()),At((()=>{class t extends Bi{constructor(e){super(e),this.numTokens=e.numTokens,this.outputMode=e.outputMode?e.outputMode:"multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},i=super.getConfig();return Object.assign(e,i),e}computeOutputShape(e){return null==(e=ps(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,i){return et(()=>{let s;if("int32"!==(e=qn(e)).dtype&&(e=vh(e,"int32")),typeof i.countWeights<"u"){if("count"!==this.outputMode)throw new We(`countWeights is not used when outputMode !== count.\n              Received countWeights=${i.countWeights}`);s=qn(i.countWeights)}const r=bu(e),o=fE(e),a=rc(this.numTokens,r).bufferSync().get(0),l=cm(o,0).bufferSync().get(0);if(!a||!l)throw new We(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return function hbt(t,n,e,i){let s=qn(t);if("int32"!==s.dtype&&(s=vh(s,"int32")),"int"===n)return s;const r=s.shape;if(0===s.rank&&(s=Ra(s,-1)),"oneHot"===n&&1!==s.shape[s.shape.length-1]&&(s=Ra(s,-1)),s.rank>2)throw new We(`When outputMode is not int, maximum output rank is 2 Received outputMode ${n} and input shape ${r} which would result in output rank ${s.rank}.`);const o=["multiHot","oneHot"].includes(n);let l;if(l=_7(s,typeof i<"u"&&"count"===n?i:[],e,o),"tfIdf"!==n)return l;if(i)return Be(l,i);throw new We("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,s)})}}return t.className="CategoryEncoding",t})());const Cge=new Set(["bilinear","nearest"]);At((()=>{class t extends Bi{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!Cge.has(e.interpolation))throw new We(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){return e=ps(e),[this.height,this.width,e[2]]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},i=super.getConfig();return Object.assign(e,i),e}call(e,i){return et(()=>{const s=[this.height,this.width];if("bilinear"===this.interpolation)return Su.resizeBilinear(e,s,!this.cropToAspectRatio);if("nearest"===this.interpolation)return Su.resizeNearestNeighbor(e,s,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...Cge]} are supported`)})}}return t.className="Resizing",t})());let pbt=(()=>{class t{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}}return t.className="RandomSeed",t})(),mbt=(()=>{class t extends Bi{constructor(e){super(e),this.randomGenerator=new pbt(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},i=super.getConfig();return Object.assign(e,i),e}}return t.className="BaseRandomLayer",t})();const xge=new Set(["bilinear","nearest"]);At((()=>{class t extends mbt{constructor(e){super(e);const{factor:i,interpolation:s="bilinear"}=e;if(this.factor=i,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new We(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new We(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new We(`factor cannot have upper bound less than lower bound.\n        Got upper bound: ${this.widthUpper}.\n        Got lower bound: ${this.widthLower}\n      `);if(s){if(!xge.has(s))throw new We(`Invalid interpolation parameter: ${s} is not implemented`);this.interpolation=s}}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},i=super.getConfig();return Object.assign(e,i),e}computeOutputShape(e){return e=ps(e),[this.imgHeight,-1,e[2]]}call(e,i){return et(()=>{const s=qn(e);this.imgHeight=s.shape[s.shape.length-3];const r=s.shape[s.shape.length-2];this.widthFactor=Bg([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let o=this.widthFactor.dataSync()[0]*r;o=Math.round(o);const a=[this.imgHeight,o];switch(this.interpolation){case"bilinear":return Su.resizeBilinear(e,a);case"nearest":return Su.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}\n          but only ${[...xge]} are supported`)}})}}return t.className="RandomWidth",t})()),nt().registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var Dge,jc=function(t){return t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF",t}(jc||{});!function(t){let n;var e;(e=n=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(Dge||(Dge={}));const dU={};function Mge(t){return dU[t]}function z(t,n,e,i,s){const r=n.inputParams[t];if(r&&void 0!==r.inputIndexStart){const a=r.inputIndexStart,l=0===r.inputIndexEnd?void 0:void 0===r.inputIndexEnd?a+1:r.inputIndexEnd,c=a<0?n.inputNames.length+a:a;if("tensor"===r.type)return wa(n.inputNames[c],e,i,s);if("tensors"===r.type){const h=n.inputs.slice(a,l);return n.inputNames.slice(a,l).filter((p,g)=>{var v;return"NoOp"!==(null===(v=h[g])||void 0===v?void 0:v.op)}).map(p=>wa(p,e,i,s))}const u=wa(n.inputNames[c],e,i,s),d=u.dataSync();return"number"===r.type?d[0]:mu(u.shape,d)}const o=n.attrParams[t];return o&&o.value}function wa(t,n,e,i){const[s,r]=cc(t,e);if(null!=i){const a=i.getHashTableHandleByName(s);if(null!=a)return a}const o=e.currentContextIds.find(a=>!!n[QN(s,a)]);return void 0!==o?n[QN(s,o)][r]:void 0}function Age(t,n,e){return n[QN(t,e.currentContextId)]}function Ff(t,n){const[e,i,s]=cc(t,n);return[QN(e,n&&n.currentContextId),i,s]}function QN(t,n){return n?`${t}-${n}`:t}function cc(t,n){if(""===t)return["",0,void 0];const e=null!=n&&null!=n.parseNodeNameCache;if(e){const r=n.parseNodeNameCache.get(t);if(null!=r)return r}const i=t.split(":");let s;if(1===i.length)s=[t,0,void 0];else{const o=3===i.length?i[1]:void 0;s=[i[0],Number(i[i.length-1]),o]}return e&&n.parseNodeNameCache.set(t,s),s}function JN(t,n,e){let i=z("pad",t,n,e);if("explicit"===i){i=z("explicitPaddings",t,n,e);const s=[[0,0],[0,0],[0,0],[0,0]];for(let r=0;r<4;r++)s[r][0]=i[2*r],s[r][1]=i[2*r+1];return s}return i}function Lf(t){return t.kept?t:xf(t)}const ybt=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],wbt=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Sbt=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],Cbt=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],xbt=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],Ebt=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Tbt=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Ibt=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],kbt=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Dbt=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Mbt=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],Abt=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],Obt=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],Nbt=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Rbt=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Fbt=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Lbt=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Pbt=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],$bt=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];class Oge{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[Q,q,F,x,I,$,N,O,k,A,V,R,j,ce,ie,se,_e,J,G].map(i=>i.json));this.opMappers=e.reduce((i,s)=>(i[s.tfOpName]=s,i),{})}transformGraph(n,e={}){const s=[],r=[],o=[],a=n.node.reduce((g,v)=>(g[v.name]=this.mapNode(v),v.op.startsWith("Placeholder")?s.push(g[v.name]):"Const"===v.op?r.push(g[v.name]):(null==v.input||0===v.input.length)&&o.push(g[v.name]),g),{});let l=[];const c=[];let u={},d={};null!=e&&(u=this.mapSignatureEntries(e.inputs),d=this.mapSignatureEntries(e.outputs));const h=Object.keys(a);h.forEach(g=>{const v=a[g];v.inputNames.forEach((y,w)=>{const[E,,T]=Ff(y),L=a[E];if(null!=L.outputs){const W=L.outputs.indexOf(T);-1!==W&&(v.inputNames[w]=`${E}:${W}`)}v.inputs.push(L),L.children.push(v)})}),0===Object.keys(d).length?h.forEach(g=>{const v=a[g];0===v.children.length&&c.push(v)}):Object.keys(d).forEach(g=>{const[v]=Ff(g),y=a[v];null!=y&&(y.signatureKey=d[g],c.push(y))}),Object.keys(u).length>0?Object.keys(u).forEach(g=>{const[v]=Ff(g),y=a[v];y&&(y.signatureKey=u[g],l.push(y))}):l=s;let f={};null!=n.library&&null!=n.library.function&&(f=n.library.function.reduce((g,v)=>(g[v.signature.name]=this.mapFunction(v),g),{}));const p={nodes:a,inputs:l,outputs:c,weights:r,placeholders:s,signature:e,functions:f};return o.length>0&&(p.initNodes=o),p}mapSignatureEntries(n){return Object.keys(n||{}).reduce((e,i)=>(e[n[i].name]=i,e),{})}mapNode(n){const e=Mge(n.op)||this.opMappers[n.op]||{};null==n.attr&&(n.attr={});const i={name:n.name,op:n.op,category:e.category,inputNames:(n.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:n.attr,outputs:e.outputs};return null!=e.inputs&&(i.inputParams=e.inputs.reduce((s,r)=>(s[r.name]={type:r.type,inputIndexStart:r.start,inputIndexEnd:r.end},s),{})),null!=e.attrs&&(i.attrParams=e.attrs.reduce((s,r)=>{const o=r.type;let a;switch(r.type){case"string":a=hU(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=hU(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"string[]":a=yU(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=yU(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"number":a=pU(n.attr,r.tfName,r.defaultValue||0),void 0===a&&r.tfDeprecatedName&&(a=pU(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"number[]":a=vU(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=vU(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"bool":a=fU(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=fU(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"bool[]":a=SU(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=SU(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"shape":a=bU(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=bU(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"shape[]":a=wU(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=wU(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"dtype":a=_U(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=_U(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"dtype[]":a=gU(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=gU(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"func":a=Rge(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=Rge(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${r.type} for op: ${n.op}`)}return s[r.name]={value:a,type:o},s},{})),i}mapFunction(n){const e=n.nodeDef,s=[];let r={};null!=e&&(r=e.reduce((d,h)=>(d[h.name]=this.mapNode(h),"Const"===h.op&&s.push(d[h.name]),d),{}));const o=[],a=[];n.signature.inputArg.forEach(d=>{const[h]=Ff(d.name),f={name:h,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:mU(d.type),type:"dtype"}},children:[]};f.signatureKey=d.name,o.push(f),r[h]=f}),Object.keys(r).forEach(d=>{const h=r[d];h.inputNames.forEach((f,p)=>{const[g,,v]=Ff(f),y=r[g];if(null!=y.outputs){const w=y.outputs.indexOf(v);-1!==w&&(h.inputNames[p]=`${g}:${w}`)}h.inputs.push(y),y.children.push(h)})});const c=n.ret;n.signature.outputArg.forEach(d=>{const[h,f]=Ff(c[d.name]),p=r[h];null!=p&&(p.defaultOutput=f,a.push(p))});const u=this.mapArgsToSignature(n);return{nodes:r,inputs:o,outputs:a,weights:s,placeholders:[],signature:u}}mapArgsToSignature(n){return{methodName:n.signature.name,inputs:n.signature.inputArg.reduce((e,i)=>(e[i.name]=this.mapArgToTensorInfo(i),e),{}),outputs:n.signature.outputArg.reduce((e,i)=>(e[i.name]=this.mapArgToTensorInfo(i,n.ret),e),{})}}mapArgToTensorInfo(n,e){let i=n.name;return null!=e&&(i=e[i]),{name:i,dtype:n.type}}}function Nge(t,n){const e=Array.isArray(t)?String.fromCharCode.apply(null,t):function Bbt(t){const n=nt().global;if(typeof n.atob<"u")return n.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(t);return n?e:e.toLowerCase()}function hU(t,n,e,i=!1){const s=t[n];return null!=s?Nge(s.s,i):e}function fU(t,n,e){const i=t[n];return i?i.b:e}function pU(t,n,e){const i=t[n]||{},s=null!=i.i?i.i:null!=i.f?i.f:e;return"number"==typeof s?s:parseInt(s,10)}function mU(t){switch("string"==typeof t&&(t=jc[t]),t){case jc.DT_FLOAT:case jc.DT_HALF:return"float32";case jc.DT_INT32:case jc.DT_INT64:case jc.DT_INT8:case jc.DT_UINT8:return"int32";case jc.DT_BOOL:return"bool";case jc.DT_DOUBLE:return"float32";case jc.DT_STRING:return"string";case jc.DT_COMPLEX64:case jc.DT_COMPLEX128:return"complex64";default:return null}}function Rge(t,n,e){const i=t[n];return i&&i.func?i.func.name:e}function _U(t,n,e){const i=t[n];return i&&i.type?mU(i.type):e}function gU(t,n,e){const i=t[n];return i&&i.list&&i.list.type?i.list.type.map(s=>mU(s)):e}function Fge(t){if(!t.unknownRank)return null!=t.dim?t.dim.map(n=>"number"==typeof n.size?n.size:parseInt(n.size,10)):[]}function bU(t,n,e){const i=t[n];return i&&i.shape?Fge(i.shape):e}function vU(t,n,e){const i=t[n];return i?((i.list.f&&i.list.f.length?i.list.f:i.list.i)||[]).map(s=>"number"==typeof s?s:parseInt(s,10)):e}function yU(t,n,e,i=!1){const s=t[n];return s&&s.list&&s.list.s?s.list.s.map(r=>Nge(r,i)):e}function wU(t,n,e){const i=t[n];return i&&i.list&&i.list.shape?i.list.shape.map(s=>Fge(s)):e}function SU(t,n,e){const i=t[n];return i&&i.list&&i.list.b?i.list.b:e}class Vbt{constructor(n,e,i){this.node=n,this.tensorMap=e,this.context=i,this.inputs=[],this.attrs={},this.inputs=n.inputNames.map(s=>this.getInput(s)),null!=n.rawAttrs&&(this.attrs=Object.keys(n.rawAttrs).reduce((s,r)=>(s[r]=this.getAttr(r),s),{}))}getInput(n){return wa(n,this.tensorMap,this.context)}getAttr(n,e){const i=this.node.rawAttrs[n];if(null!=i.tensor)return wa(n,this.tensorMap,this.context);if(null!=i.i||null!=i.f)return pU(this.node.rawAttrs,n,e);if(null!=i.s)return hU(this.node.rawAttrs,n,e);if(null!=i.b)return fU(this.node.rawAttrs,n,e);if(null!=i.shape)return bU(this.node.rawAttrs,n,e);if(null!=i.type)return _U(this.node.rawAttrs,n,e);if(null!=i.list){if(null!=i.list.i||null!=i.list.f)return vU(this.node.rawAttrs,n,e);if(null!=i.list.s)return yU(this.node.rawAttrs,n,e);if(null!=i.list.shape)return wU(this.node.rawAttrs,n,e);if(null!=i.list.b)return SU(this.node.rawAttrs,n,e);if(null!=i.list.type)return gU(this.node.rawAttrs,n,e)}return e}}function Tu(t,n,e=""){if("number"!=typeof t&&"number"!=typeof n){le(t.length===n.length,()=>e+` Shapes ${t} and ${n} must match`);for(let i=0;i<t.length;i++){const s=t[i],r=n[i];le(s<0||r<0||s===r,()=>e+` Shapes ${t} and ${n} must match`)}}}function Lge(t){return!("number"==typeof t||t.some(n=>n<0))}function LE(t,n,e){let i=CU(t,e);const s=!Lge(i);if(s&&0===n.length)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${i}`);if(s&&n.forEach(r=>{i=CU(r.shape,i)}),!Lge(i))throw new Error(`Non-fully-defined elementShape: ${i}`);return i}function CU(t,n){if("number"==typeof t)return n;if("number"==typeof n)return t;if(t.length!==n.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${n}`);const e=[];for(let i=0;i<t.length;++i){const s=t[i],r=n[i];if(s>=0&&r>=0&&s!==r)throw new Error(`Incompatible shape during merge: ${t} vs. ${n}`);e[i]=s>=0?s:r}return e}class Gbt{constructor(n,e,i,s,r,o,a){this.name=n,this.dtype=e,this.maxSize=i,this.elementShape=s,this.identicalElementShapes=r,this.dynamicSize=o,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=En(0),Qo(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(n){this.tensors.forEach(e=>{(null==n||!n.has(e.tensor.id))&&e.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(n<0||n>=this.size())throw new Error(`Tried to read from index ${n}, but array size is: ${this.size()}`);const e=this.tensors[n];if(e.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${n} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor}readMany(n){return n.map(e=>this.read(e))}write(n,e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(n<0||!this.dynamicSize&&n>=this.maxSize)throw new Error(`Tried to write to index ${n}, but array is not resizeable and size is: ${this.maxSize}`);const i=this.tensors[n]||{};if(e.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${n},\n          because the value dtype is ${e.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0===this.size()&&(null==this.elementShape||0===this.elementShape.length)&&(this.elementShape=e.shape),Tu(this.elementShape,e.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${n}.`),i.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${n}, because it has already been read.`);if(i.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${n}, because it has already been written.`);i.tensor=e,Qo(e),i.written=!0,this.tensors[n]=i}writeMany(n,e){if(n.length!==e.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${n.length} is not the same as tensors size: ${e.length}.`);n.forEach((i,s)=>this.write(i,e[s]))}gather(n,e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${e}`);if(n)n=n.slice(0,this.size());else{n=[];for(let s=0;s<this.size();s++)n.push(s)}if(0===n.length)return $c([],[0].concat(this.elementShape));const i=this.readMany(n);return Tu(this.elementShape,i[0].shape,"TensorArray shape mismatch: "),Tl(i,0)}concat(n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${n}`);if(0===this.size())return $c([],[0].concat(this.elementShape));const e=[];for(let s=0;s<this.size();s++)e.push(s);const i=this.readMany(e);return Tu(this.elementShape,i[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${i[0].shape})`),Xr(i,0)}scatter(n,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);if(n.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${n.length} vs. ${e.shape[0]}`);const i=Math.max(...n);if(!this.dynamicSize&&i>=this.maxSize)throw new Error(`Max index must be < array size (${i}  vs. ${this.maxSize})`);this.writeMany(n,wu(e,0))}split(n,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);let i=0;const s=n.map(l=>(i+=l,i));if(i!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${i}, and tensor's shape is: ${e.shape}`);if(!this.dynamicSize&&n.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${n.length}), and the TensorArray is not marked as dynamically resizeable`);const r=0===i?0:e.size/i,o=[];et(()=>{e=Ge(e,[1,i,r]);for(let l=0;l<n.length;++l)o[l]=Ge(is(e,[0,0===l?0:s[l-1],0],[1,n[l],r]),this.elementShape);return o});const a=[];for(let l=0;l<n.length;l++)a[l]=l;this.writeMany(a,o)}}class Xg{get id(){return this.idTensor.id}constructor(n,e,i,s=-1){this.tensors=n,this.elementShape=e,this.elementDtype=i,n?.forEach(r=>{if(i!==r.dtype)throw new Error(`Invalid data types; op elements ${i}, but list elements ${r.dtype}`);Tu(e,r.shape,"TensorList shape mismatch: "),Qo(r)}),this.idTensor=En(0),this.maxNumElements=s,Qo(this.idTensor)}copy(){return new Xg([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(n){this.tensors.forEach(e=>{(null==n||!n.has(e.id))&&e.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(n,e,i=-1){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(-1!==i&&this.tensors.length!==i)throw new Error(`Operation expected a list with ${i} elements but got a list with ${this.tensors.length} elements.`);Tu(n,this.elementShape,"TensorList shape mismatch: ");const s=LE(this.elementShape,this.tensors,n);return et(()=>{const r=this.tensors.map(o=>Ge(o,s));return Tl(r,0)})}popBack(n,e){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const i=LE(this.elementShape,this.tensors,n),s=this.tensors.pop();return s.kept=!1,Tu(s.shape,n,"TensorList shape mismatch: "),Ge(s,i)}pushBack(n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(Tu(n.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Qo(n),this.tensors.push(n)}resize(n){if(n<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${n}`);if(-1!==this.maxNumElements&&n>this.maxNumElements)throw new Error(`TensorListResize input size ${n} is greater maxNumElement ${this.maxNumElements}.`);const e=new Xg([],this.elementShape,this.elementDtype,this.maxNumElements);e.tensors.length=n;for(let i=0;i<Math.min(this.tensors.length,n);++i)e.tensors[i]=this.tensors[i];return e}getItem(n,e,i){if(i!==this.elementDtype)throw new Error(`Invalid data types; op elements ${i}, but list elements ${this.elementDtype}`);if(n<0||n>this.tensors.length)throw new Error(`Trying to access element ${n} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[n])throw new Error(`element at index ${n} is null.`);Tu(this.tensors[n].shape,e,"TensorList shape mismatch: ");const s=LE(this.elementShape,this.tensors,e);return Ge(this.tensors[n],s)}setItem(n,e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(n<0||-1!==this.maxNumElements&&n>=this.maxNumElements)throw new Error(`Trying to set element ${n} in a list with max ${this.maxNumElements} elements.`);Tu(this.elementShape,e.shape,"TensorList shape mismatch: "),Qo(e),null!=this.tensors[n]&&(this.tensors[n].kept=!1),this.tensors[n]=e}gather(n,e,i){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);Tu(this.elementShape,i,"TensorList shape mismatch: "),n=n.slice(0,this.size());const s=LE(this.elementShape,this.tensors,i);return 0===n.length?$c([],[0].concat(s)):et(()=>{const r=n.map(o=>Ge(this.tensors[o],s));return Tl(r,0)})}concat(n,e){if(n&&n!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${n}`);Tu(this.elementShape,e,"TensorList shape mismatch: ");const i=LE(this.elementShape,this.tensors,e);return 0===this.size()?$c([],[0].concat(i)):et(()=>{const s=this.tensors.map(r=>Ge(r,i));return Xr(s,0)})}}const Kbt=function(){var t=de(function*(n,e,i){switch(n.op){case"If":case"StatelessIf":{const s=z("thenBranch",n,e,i),r=z("elseBranch",n,e,i),o=z("cond",n,e,i),a=z("args",n,e,i);return(yield o.data())[0]?i.functionMap[s].executeFunctionAsync(a,i.tensorArrayMap,i.tensorListMap):i.functionMap[r].executeFunctionAsync(a,i.tensorArrayMap,i.tensorListMap)}case"While":case"StatelessWhile":{const s=z("body",n,e,i),r=z("cond",n,e,i),o=z("args",n,e,i),a=yield i.functionMap[r].executeFunctionAsync(o,i.tensorArrayMap,i.tensorListMap),l=o.map(d=>d.id);let c=yield a[0].data();a.forEach(d=>{!d.kept&&-1===l.indexOf(d.id)&&d.dispose()});let u=o;for(;c[0];){const d=u;u=yield i.functionMap[s].executeFunctionAsync(u,i.tensorArrayMap,i.tensorListMap);const h=u.map(p=>p.id);d.forEach(p=>{!p.kept&&-1===l.indexOf(p.id)&&-1===h.indexOf(p.id)&&p.dispose()});const f=yield i.functionMap[r].executeFunctionAsync(u,i.tensorArrayMap,i.tensorListMap);c=yield f[0].data(),f.forEach(p=>{!p.kept&&-1===l.indexOf(p.id)&&-1===h.indexOf(p.id)&&p.dispose()})}return u}case"LoopCond":return[Lf(z("pred",n,e,i))];case"Switch":{const s=z("pred",n,e,i);let r=z("data",n,e,i);return r.kept||(r=Lf(r)),(yield s.data())[0]?[void 0,r]:[r,void 0]}case"Merge":{const s=n.inputNames.find(r=>void 0!==wa(r,e,i));return s?[Lf(wa(s,e,i))]:void 0}case"Enter":{const s=z("frameName",n,e,i),r=z("tensor",n,e,i);return i.enterFrame(s),[Lf(r)]}case"Exit":{const s=z("tensor",n,e,i);return i.exitFrame(),[Lf(s)]}case"NextIteration":{const s=z("tensor",n,e,i);return i.nextIteration(),[Lf(s)]}case"TensorArrayV3":{const s=z("size",n,e,i),r=z("dtype",n,e,i),o=z("elementShape",n,e,i),a=z("dynamicSize",n,e,i),l=z("clearAfterRead",n,e,i),c=z("identicalElementShapes",n,e,i),u=z("name",n,e,i),d=new Gbt(u,r,s,o,c,a,l);return i.addTensorArray(d),[d.idTensor,En(1)]}case"TensorArrayWriteV3":{const s=z("tensorArrayId",n,e,i),r=z("index",n,e,i),o=z("tensor",n,e,i),a=i.getTensorArray(s.id);return a.write(r,o),[a.idTensor]}case"TensorArrayReadV3":{const s=z("tensorArrayId",n,e,i),r=z("index",n,e,i);return[i.getTensorArray(s.id).read(r)]}case"TensorArrayGatherV3":{const s=z("tensorArrayId",n,e,i),r=z("indices",n,e,i),o=z("dtype",n,e,i);return[i.getTensorArray(s.id).gather(r,o)]}case"TensorArrayScatterV3":{const s=z("tensorArrayId",n,e,i),r=z("indices",n,e,i),o=z("tensor",n,e,i),a=i.getTensorArray(s.id);return a.scatter(r,o),[a.idTensor]}case"TensorArrayConcatV3":{const s=z("tensorArrayId",n,e,i),r=i.getTensorArray(s.id),o=z("dtype",n,e,i);return[r.concat(o)]}case"TensorArraySplitV3":{const s=z("tensorArrayId",n,e,i),r=z("tensor",n,e,i),o=z("lengths",n,e,i),a=i.getTensorArray(s.id);return a.split(o,r),[a.idTensor]}case"TensorArraySizeV3":{const s=z("tensorArrayId",n,e,i);return[En(i.getTensorArray(s.id).size(),"int32")]}case"TensorArrayCloseV3":{const s=z("tensorArrayId",n,e,i),r=i.getTensorArray(s.id);return r.clearAndClose(),[r.idTensor]}case"TensorListSetItem":{const s=z("tensorListId",n,e,i),r=z("index",n,e,i),o=z("tensor",n,e,i),a=i.getTensorList(s.id);return a.setItem(r,o),[a.idTensor]}case"TensorListGetItem":{const s=z("tensorListId",n,e,i),r=z("index",n,e,i),o=z("elementShape",n,e,i),a=z("elementDType",n,e,i);return[i.getTensorList(s.id).getItem(r,o,a)]}case"TensorListScatterV2":case"TensorListScatter":{const s=z("indices",n,e,i),l=function Wbt(t,n,e,i){if(n.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${n.length} vs. ${t.shape[0]}`);const s=Math.max(...n);if(null!=i&&-1!==i&&s>=i)throw new Error(`Max index must be < array size (${s}  vs. ${i})`);const r=new Xg([],e,t.dtype,i),o=wu(t,0);return n.forEach((a,l)=>{r.setItem(a,o[l])}),r}(z("tensor",n,e,i),s,z("elementShape",n,e,i),z("numElements",n,e,i));return i.addTensorList(l),[l.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const s=z("elementShape",n,e,i),r=z("elementDType",n,e,i);let o;o="TensorListReserve"===n.op?"numElements":"maxNumElements";const a=z(o,n,e,i),c=function Hbt(t,n,e,i){return new Xg([],t,n,i)}(s,r,0,"TensorListReserve"===n.op?-1:a);return i.addTensorList(c),[c.idTensor]}case"TensorListGather":{const s=z("tensorListId",n,e,i),r=z("indices",n,e,i),o=z("elementShape",n,e,i),a=z("elementDType",n,e,i);return[i.getTensorList(s.id).gather(r,a,o)]}case"TensorListStack":{const s=z("tensorListId",n,e,i),r=z("elementShape",n,e,i),o=z("elementDType",n,e,i),a=z("numElements",n,e,i);return[i.getTensorList(s.id).stack(r,o,a)]}case"TensorListFromTensor":{const a=function jbt(t,n,e){const i=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==e)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${e}`);Tu(t.shape.slice(1),n,"TensorList shape mismatch: ");const r=wu(t);return new Xg(r,n,i)}(z("tensor",n,e,i),z("elementShape",n,e,i),z("elementDType",n,e,i));return i.addTensorList(a),[a.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const s=z("tensorListId",n,e,i),r=i.getTensorList(s.id),o=z("dtype",n,e,i),a=z("elementShape",n,e,i);return[r.concat(o,a)]}case"TensorListPushBack":{const s=z("tensorListId",n,e,i),r=z("tensor",n,e,i),o=i.getTensorList(s.id);return o.pushBack(r),[o.idTensor]}case"TensorListPopBack":{const s=z("tensorListId",n,e,i),r=z("elementShape",n,e,i),o=z("elementDType",n,e,i);return[i.getTensorList(s.id).popBack(r,o)]}case"TensorListSplit":{const s=z("tensor",n,e,i),r=z("elementShape",n,e,i),a=function qbt(t,n,e){let i=0;const s=n.map(u=>(i+=u,i));if(i!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${i}, and tensor's shape is: ${t.shape}`);const o=CU(t.shape.slice(1),e),a=0===i?0:t.size/i,l=et(()=>{const u=[];t=Ge(t,[1,i,a]);for(let d=0;d<n.length;++d)u[d]=Ge(is(t,[0,0===d?0:s[d-1],0],[1,n[d],a]),o);return t.dispose(),u}),c=new Xg([],e,t.dtype,n.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}(s,z("lengths",n,e,i),r);return i.addTensorList(a),[a.idTensor]}case"TensorListLength":{const s=z("tensorListId",n,e,i);return[En(i.getTensorList(s.id).size(),"int32")]}case"TensorListResize":{const s=z("tensorListId",n,e,i),r=z("size",n,e,i),a=i.getTensorList(s.id).resize(r);return i.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${n.op} is not implemented`)}});return function(e,i,s){return t.apply(this,arguments)}}();function Pge(t,n,e){const[i,s]=z("fusedOps",t,n,e),r="biasadd"===i,o=!r,a="prelu"===s,l="fusedbatchnorm"===i,c=z("numArgs",t,n,e);if(r){if(a&&2!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&r&&1!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=z("strides",t,n,e),d=JN(t,n,e),h=z("dataFormat",t,n,e).toUpperCase(),f=z("dilations",t,n,e);let[p,g]=z("args",t,n,e);return o&&(g=p,p=void 0),{stride:u,pad:d,dataFormat:h,dilations:f,biasArg:p,preluArg:g,activationFunc:s,leakyreluAlpha:z("leakyreluAlpha",t,n,e)}}function xU(t,n,e){return{boxes:z("boxes",t,n,e),scores:z("scores",t,n,e),maxOutputSize:z("maxOutputSize",t,n,e),iouThreshold:z("iouThreshold",t,n,e),scoreThreshold:z("scoreThreshold",t,n,e),softNmsSigma:z("softNmsSigma",t,n,e)}}const Zbt=function(){var t=de(function*(n,e,i,s,r=U){switch(n.op){case"NonMaxSuppressionV5":{const{boxes:o,scores:a,maxOutputSize:l,iouThreshold:c,scoreThreshold:u,softNmsSigma:d}=xU(n,e,i),h=yield r.image.nonMaxSuppressionWithScoreAsync(o,a,l,c,u,d);return[h.selectedIndices,h.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:o,scores:a,maxOutputSize:l,iouThreshold:c,scoreThreshold:u}=xU(n,e,i),d=z("padToMaxOutputSize",n,e,i),h=yield r.image.nonMaxSuppressionPaddedAsync(o,a,l,c,u,d);return[h.selectedIndices,h.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:o,scores:a,maxOutputSize:l,iouThreshold:c,scoreThreshold:u}=xU(n,e,i);return[yield r.image.nonMaxSuppressionAsync(o,a,l,c,u)]}case"Where":{const o=r.cast(z("condition",n,e,i),"bool"),a=[yield r.whereAsync(o)];return o.dispose(),a}case"ListDiff":return r.setdiff1dAsync(z("x",n,e,i),z("y",n,e,i));default:throw TypeError(`Node type ${n.op} is not implemented`)}});return function(e,i,s,r){return t.apply(this,arguments)}}();class evt{get id(){return this.handle.id}constructor(n,e){this.keyDType=n,this.valueDType=e,this.handle=En(0),this.tensorMap=new Map,Qo(this.handle)}clearAndClose(){this.tensorMap.forEach(n=>n.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return En(this.size(),"int32")}import(n,e){var i=this;return de(function*(){i.checkKeyAndValueTensor(n,e);const s=yield n.data();return i.tensorMap.forEach(r=>r.dispose()),i.tensorMap.clear(),et(()=>{const r=wu(e),o=s.length,a=r.length;le(o===a,()=>`The number of elements doesn't match, keys has ${o} elements, the values has ${a} elements.`);for(let l=0;l<o;l++){const c=s[l],u=r[l];Qo(u),i.tensorMap.set(c,u)}return i.handle})})()}find(n,e){var i=this;return de(function*(){i.checkKeyAndValueTensor(n,e);const s=yield n.data();return et(()=>{const r=[];for(let o=0;o<s.length;o++){const l=i.findWithDefault(s[o],e);r.push(l)}return Tl(r)})})()}findWithDefault(n,e){return this.tensorMap.get(n)??e}checkKeyAndValueTensor(n,e){if(n.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${n.dtype}`);if(e.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${e.dtype}`)}}const tvt=function(){var t=de(function*(n,e,i,s){switch(n.op){case"HashTable":case"HashTableV2":{const r=s.getHashTableHandleByName(n.name);if(null!=r)return[r];{const o=z("keyDType",n,e,i),a=z("valueDType",n,e,i),l=new evt(o,a);return s.addHashTable(n.name,l),[l.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const r=z("tableHandle",n,e,i,s),o=z("keys",n,e,i),a=z("values",n,e,i);return[yield s.getHashTableById(r.id).import(o,a)]}case"LookupTableFind":case"LookupTableFindV2":{const r=z("tableHandle",n,e,i,s),o=z("keys",n,e,i),a=z("defaultValue",n,e,i);return[yield s.getHashTableById(r.id).find(o,a)]}case"LookupTableSize":case"LookupTableSizeV2":{const r=z("tableHandle",n,e,i,s);return[s.getHashTableById(r.id).tensorSize()]}default:throw TypeError(`Node type ${n.op} is not implemented`)}});return function(e,i,s,r){return t.apply(this,arguments)}}();function $ge(t,n,e,i,s=et){const r=((o,a,l)=>{switch(o.category){case"arithmetic":return s(()=>((t,n,e,i=U)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[i.add(z("a",t,n,e),z("b",t,n,e))];case"AddN":return[i.addN(z("tensors",t,n,e))];case"FloorMod":case"Mod":return[i.mod(z("a",t,n,e),z("b",t,n,e))];case"Mul":return[i.mul(z("a",t,n,e),z("b",t,n,e))];case"RealDiv":case"Div":return[i.div(z("a",t,n,e),z("b",t,n,e))];case"DivNoNan":return[i.divNoNan(z("a",t,n,e),z("b",t,n,e))];case"FloorDiv":return[i.floorDiv(z("a",t,n,e),z("b",t,n,e))];case"Sub":return[i.sub(z("a",t,n,e),z("b",t,n,e))];case"Minimum":return[i.minimum(z("a",t,n,e),z("b",t,n,e))];case"Maximum":return[i.maximum(z("a",t,n,e),z("b",t,n,e))];case"Pow":return[i.pow(z("a",t,n,e),z("b",t,n,e))];case"SquaredDifference":return[i.squaredDifference(z("a",t,n,e),z("b",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"basic_math":return s(()=>((t,n,e,i=U)=>{switch(t.op){case"Abs":case"ComplexAbs":return[i.abs(z("x",t,n,e))];case"Acos":return[i.acos(z("x",t,n,e))];case"Acosh":return[i.acosh(z("x",t,n,e))];case"Asin":return[i.asin(z("x",t,n,e))];case"Asinh":return[i.asinh(z("x",t,n,e))];case"Atan":return[i.atan(z("x",t,n,e))];case"Atan2":return[i.atan2(z("x",t,n,e),z("y",t,n,e))];case"Atanh":return[i.atanh(z("x",t,n,e))];case"Ceil":return[i.ceil(z("x",t,n,e))];case"Complex":return[i.complex(z("real",t,n,e),z("imag",t,n,e))];case"Cos":return[i.cos(z("x",t,n,e))];case"Cosh":return[i.cosh(z("x",t,n,e))];case"Elu":return[i.elu(z("x",t,n,e))];case"Erf":return[i.erf(z("x",t,n,e))];case"Exp":return[i.exp(z("x",t,n,e))];case"Expm1":return[i.expm1(z("x",t,n,e))];case"Floor":return[i.floor(z("x",t,n,e))];case"Log":return[i.log(z("x",t,n,e))];case"Log1p":return[i.log1p(z("x",t,n,e))];case"Imag":return[i.imag(z("x",t,n,e))];case"Neg":return[i.neg(z("x",t,n,e))];case"Reciprocal":return[i.reciprocal(z("x",t,n,e))];case"Real":return[i.real(z("x",t,n,e))];case"Relu":return[i.relu(z("x",t,n,e))];case"Round":return[i.round(z("x",t,n,e))];case"Selu":return[i.selu(z("x",t,n,e))];case"Sigmoid":return[i.sigmoid(z("x",t,n,e))];case"Sin":return[i.sin(z("x",t,n,e))];case"Sign":return[i.sign(z("x",t,n,e))];case"Sinh":return[i.sinh(z("x",t,n,e))];case"Softplus":return[i.softplus(z("x",t,n,e))];case"Sqrt":return[i.sqrt(z("x",t,n,e))];case"Square":return[i.square(z("x",t,n,e))];case"Tanh":return[i.tanh(z("x",t,n,e))];case"Tan":return[i.tan(z("x",t,n,e))];case"ClipByValue":return[i.clipByValue(z("x",t,n,e),z("clipValueMin",t,n,e),z("clipValueMax",t,n,e))];case"Relu6":return[i.relu6(z("x",t,n,e))];case"Rsqrt":return[i.rsqrt(wa(t.inputNames[0],n,e))];case"LeakyRelu":return[i.leakyRelu(z("x",t,n,e),z("alpha",t,n,e))];case"Prelu":return[i.prelu(z("x",t,n,e),z("alpha",t,n,e))];case"IsNan":return[i.isNaN(wa(t.inputNames[0],n,e))];case"IsInf":return[i.isInf(wa(t.inputNames[0],n,e))];case"IsFinite":return[i.isFinite(wa(t.inputNames[0],n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"control":return Kbt(o,a,l);case"convolution":return s(()=>((t,n,e,i=U)=>{switch(t.op){case"Conv1D":{const s=z("stride",t,n,e),r=z("pad",t,n,e),o=z("dataFormat",t,n,e).toUpperCase(),a=z("dilation",t,n,e);return[i.conv1d(z("x",t,n,e),z("filter",t,n,e),s,r,o,a)]}case"Conv2D":{const s=z("strides",t,n,e),r=JN(t,n,e),o=z("dataFormat",t,n,e).toUpperCase(),a=z("dilations",t,n,e);return[i.conv2d(z("x",t,n,e),z("filter",t,n,e),[s[1],s[2]],r,o,[a[1],a[2]])]}case"_FusedConv2D":{const{stride:s,pad:r,dataFormat:o,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=Pge(t,n,e);return[i.fused.conv2d({x:z("x",t,n,e),filter:z("filter",t,n,e),strides:[s[1],s[2]],pad:r,dataFormat:o,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:r,dataFormat:o,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=Pge(t,n,e);return[i.fused.depthwiseConv2d({x:z("x",t,n,e),filter:z("filter",t,n,e),strides:[s[1],s[2]],pad:r,dataFormat:o,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=z("outputShape",t,n,e),r=z("strides",t,n,e),o=JN(t,n,e);return[i.conv2dTranspose(z("x",t,n,e),z("filter",t,n,e),s,[r[1],r[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=z("strides",t,n,e),r=JN(t,n,e),o=z("dilations",t,n,e),a=z("dataFormat",t,n,e).toUpperCase();return[i.depthwiseConv2d(z("input",t,n,e),z("filter",t,n,e),[s[1],s[2]],r,a,[o[1],o[2]])]}case"Conv3D":{const s=z("strides",t,n,e),r=z("pad",t,n,e),o=z("dataFormat",t,n,e).toUpperCase(),a=z("dilations",t,n,e);return[i.conv3d(z("x",t,n,e),z("filter",t,n,e),[s[1],s[2],s[3]],r,o,[a[1],a[2],a[3]])]}case"AvgPool":{const s=z("strides",t,n,e),r=z("pad",t,n,e),o=z("kernelSize",t,n,e);return[i.avgPool(z("x",t,n,e),[o[1],o[2]],[s[1],s[2]],r)]}case"MaxPool":{const s=z("strides",t,n,e),r=z("pad",t,n,e),o=z("kernelSize",t,n,e);return[i.maxPool(z("x",t,n,e),[o[1],o[2]],[s[1],s[2]],r)]}case"MaxPoolWithArgmax":{const s=z("strides",t,n,e),r=z("pad",t,n,e),o=z("kernelSize",t,n,e),a=z("includeBatchInIndex",t,n,e),{result:l,indexes:c}=i.maxPoolWithArgmax(z("x",t,n,e),[o[1],o[2]],[s[1],s[2]],r,a);return[l,c]}case"AvgPool3D":{const s=z("strides",t,n,e),r=z("pad",t,n,e),o=z("kernelSize",t,n,e);return[i.avgPool3d(z("x",t,n,e),[o[1],o[2],o[3]],[s[1],s[2],s[3]],r)]}case"MaxPool3D":{const s=z("strides",t,n,e),r=z("pad",t,n,e),o=z("kernelSize",t,n,e);return[i.maxPool3d(z("x",t,n,e),[o[1],o[2],o[3]],[s[1],s[2],s[3]],r)]}case"Dilation2D":{const s=z("strides",t,n,e),r=z("pad",t,n,e),o=z("dilations",t,n,e),a=s[1],l=s[2],c=o[1],u=o[2];return[i.dilation2d(z("x",t,n,e),z("filter",t,n,e),[a,l],r,[c,u],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"creation":return s(()=>((t,n,e,i=U)=>{switch(t.op){case"Fill":{const s=z("shape",t,n,e),r=z("dtype",t,n,e),o=z("value",t,n,e);return[i.fill(s,o,r)]}case"LinSpace":{const s=z("start",t,n,e),r=z("stop",t,n,e),o=z("num",t,n,e);return[i.linspace(s,r,o)]}case"Multinomial":{const s=z("logits",t,n,e),r=z("numSamples",t,n,e),o=z("seed",t,n,e);return[i.multinomial(s,r,o)]}case"OneHot":{const s=z("indices",t,n,e),r=z("depth",t,n,e),o=z("onValue",t,n,e),a=z("offValue",t,n,e),l=z("dtype",t,n,e);return[i.oneHot(s,r,o,a,l)]}case"Ones":return[i.ones(z("shape",t,n,e),z("dtype",t,n,e))];case"OnesLike":return[i.onesLike(z("x",t,n,e))];case"RandomStandardNormal":return[i.randomStandardNormal(z("shape",t,n,e),z("dtype",t,n,e),z("seed",t,n,e))];case"RandomUniform":return[i.randomUniform(z("shape",t,n,e),z("minval",t,n,e),z("maxval",t,n,e),z("dtype",t,n,e))];case"RandomUniformInt":return[i.randomUniformInt(z("shape",t,n,e),z("minval",t,n,e),z("maxval",t,n,e),z("seed",t,n,e))];case"Range":{const s=z("start",t,n,e),r=z("stop",t,n,e),o=z("step",t,n,e);return[i.range(s,r,o,z("dtype",t,n,e))]}case"TruncatedNormal":{const s=z("shape",t,n,e),r=z("mean",t,n,e),o=z("stdDev",t,n,e),a=z("seed",t,n,e);return[i.truncatedNormal(s,r,o,z("dtype",t,n,e),a)]}case"Zeros":return[i.zeros(z("shape",t,n,e),z("dtype",t,n,e))];case"ZerosLike":return[i.zerosLike(z("x",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"dynamic":return Zbt(o,a,l);case"evaluation":return s(()=>((t,n,e,i=U)=>{switch(t.op){case"LowerBound":{const s=z("sortedSequence",t,n,e),r=z("values",t,n,e);return[i.lowerBound(s,r)]}case"TopKV2":{const s=z("x",t,n,e),r=z("k",t,n,e),o=z("sorted",t,n,e),a=i.topk(s,r,o);return[a.values,a.indices]}case"UpperBound":{const s=z("sortedSequence",t,n,e),r=z("values",t,n,e);return[i.upperBound(s,r)]}case"Unique":{const s=z("x",t,n,e),r=i.unique(s);return[r.values,r.indices]}case"UniqueV2":{const s=z("x",t,n,e),r=z("axis",t,n,e),o=i.unique(s,r);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"image":return s(()=>((t,n,e,i=U)=>{switch(t.op){case"ResizeBilinear":{const s=z("images",t,n,e),r=z("size",t,n,e),o=z("alignCorners",t,n,e),a=z("halfPixelCenters",t,n,e);return[i.image.resizeBilinear(s,[r[0],r[1]],o,a)]}case"ResizeNearestNeighbor":{const s=z("images",t,n,e),r=z("size",t,n,e),o=z("alignCorners",t,n,e),a=z("halfPixelCenters",t,n,e);return[i.image.resizeNearestNeighbor(s,[r[0],r[1]],o,a)]}case"CropAndResize":{const s=z("image",t,n,e),r=z("boxes",t,n,e),o=z("boxInd",t,n,e),a=z("cropSize",t,n,e),l=z("method",t,n,e),c=z("extrapolationValue",t,n,e);return[i.image.cropAndResize(s,r,o,a,l,c)]}case"ImageProjectiveTransformV3":{const s=z("images",t,n,e),r=z("transforms",t,n,e),o=z("outputShape",t,n,e),a=z("fillValue",t,n,e),l=z("interpolation",t,n,e),c=z("fillMode",t,n,e);return[i.image.transform(s,r,l.toLowerCase(),c.toLowerCase(),a,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"graph":return s(()=>((t,n,e,i=U)=>{switch(t.op){case"Const":return n[t.name];case"PlaceholderWithDefault":const s=z("default",t,n,e);return[wa(t.name,n,e)||s];case"Placeholder":return[wa(t.name,n,e)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[Lf(z("x",t,n,e))];case"IdentityN":return z("x",t,n,e).map(u=>Lf(u));case"Shape":return[i.tensor1d(z("x",t,n,e).shape,"int32")];case"ShapeN":return z("x",t,n,e).map(u=>i.tensor1d(u.shape));case"Size":return[i.scalar(z("x",t,n,e).size,"int32")];case"Rank":return[i.scalar(z("x",t,n,e).rank,"int32")];case"NoOp":return[i.scalar(1)];case"Print":const o=z("x",t,n,e),a=z("data",t,n,e),l=z("message",t,n,e),c=z("summarize",t,n,e);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<a.length;u++)console.log(Array.prototype.slice.call(a[u].dataSync()).slice(0,c));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"logical":return s(()=>((t,n,e,i=U)=>{switch(t.op){case"Equal":return[i.equal(z("a",t,n,e),z("b",t,n,e))];case"NotEqual":return[i.notEqual(z("a",t,n,e),z("b",t,n,e))];case"Greater":return[i.greater(z("a",t,n,e),z("b",t,n,e))];case"GreaterEqual":return[i.greaterEqual(z("a",t,n,e),z("b",t,n,e))];case"Less":return[i.less(z("a",t,n,e),z("b",t,n,e))];case"LessEqual":return[i.lessEqual(z("a",t,n,e),z("b",t,n,e))];case"LogicalAnd":return[i.logicalAnd(z("a",t,n,e),z("b",t,n,e))];case"LogicalNot":return[i.logicalNot(z("a",t,n,e))];case"LogicalOr":return[i.logicalOr(z("a",t,n,e),z("b",t,n,e))];case"Select":case"SelectV2":return[i.where(z("condition",t,n,e),z("a",t,n,e),z("b",t,n,e))];case"BitwiseAnd":return[i.bitwiseAnd(z("a",t,n,e),z("b",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"matrices":return s(()=>((t,n,e,i=U)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[i.matMul(z("a",t,n,e),z("b",t,n,e),z("transposeA",t,n,e),z("transposeB",t,n,e))];case"Einsum":return[i.einsum(z("equation",t,n,e),...z("tensors",t,n,e))];case"Transpose":return[i.transpose(z("x",t,n,e),z("perm",t,n,e))];case"_FusedMatMul":const[s,r]=z("fusedOps",t,n,e),o="biasadd"===s,a="prelu"===r,l=z("numArgs",t,n,e),c=z("leakyreluAlpha",t,n,e);if(o){if(a&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,d]=z("args",t,n,e);return[i.fused.matMul({a:z("a",t,n,e),b:z("b",t,n,e),transposeA:z("transposeA",t,n,e),transposeB:z("transposeB",t,n,e),bias:u,activation:r,preluActivationWeights:d,leakyreluAlpha:c})];case"MatrixBandPart":return[i.linalg.bandPart(z("a",t,n,e),z("numLower",t,n,e),z("numUpper",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"normalization":return s(()=>((t,n,e,i=U)=>{switch(t.op){case"EuclideanNorm":return[i.euclideanNorm(z("x",t,n,e),z("axis",t,n,e),z("keepDims",t,n,e))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[i.batchNorm(z("x",t,n,e),z("mean",t,n,e),z("variance",t,n,e),z("offset",t,n,e),z("scale",t,n,e),z("epsilon",t,n,e))];case"LRN":return[i.localResponseNormalization(z("x",t,n,e),z("radius",t,n,e),z("bias",t,n,e),z("alpha",t,n,e),z("beta",t,n,e))];case"Softmax":return[i.softmax(z("x",t,n,e))];case"LogSoftmax":return[i.logSoftmax(z("x",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"ragged":return s(()=>((t,n,e,i=U)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:r}=i.raggedGather(z("paramsNestedSplits",t,n,e),z("paramsDenseValues",t,n,e),z("indices",t,n,e),z("outputRaggedRank",t,n,e));return s.concat(r)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:r}=i.raggedRange(z("starts",t,n,e),z("limits",t,n,e),z("splits",t,n,e));return[s,r]}case"RaggedTensorToTensor":return[i.raggedTensorToTensor(z("shape",t,n,e),z("values",t,n,e),z("defaultValue",t,n,e),z("rowPartitionTensors",t,n,e),z("rowPartitionTypes",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"reduction":return s(()=>((t,n,e,i=U)=>{switch(t.op){case"Max":{const a=z("axis",t,n,e),l=z("keepDims",t,n,e);return[i.max(z("x",t,n,e),a,l)]}case"Mean":{const a=z("axis",t,n,e),l=z("keepDims",t,n,e);return[i.mean(z("x",t,n,e),a,l)]}case"Min":{const a=z("axis",t,n,e),l=z("keepDims",t,n,e);return[i.min(z("x",t,n,e),a,l)]}case"Sum":{const a=z("axis",t,n,e),l=z("keepDims",t,n,e);return[i.sum(z("x",t,n,e),a,l)]}case"All":{const a=z("axis",t,n,e),l=z("keepDims",t,n,e);return[i.all(z("x",t,n,e),a,l)]}case"Any":{const a=z("axis",t,n,e),l=z("keepDims",t,n,e);return[i.any(z("x",t,n,e),a,l)]}case"ArgMax":{const a=z("axis",t,n,e);return[i.argMax(z("x",t,n,e),a)]}case"ArgMin":{const a=z("axis",t,n,e);return[i.argMin(z("x",t,n,e),a)]}case"Prod":{const a=z("axis",t,n,e),l=z("keepDims",t,n,e);return[i.prod(z("x",t,n,e),a,l)]}case"Cumprod":{const a=z("axis",t,n,e),l=z("exclusive",t,n,e),c=z("reverse",t,n,e);return[i.cumprod(z("x",t,n,e),a,l,c)]}case"Cumsum":{const a=z("axis",t,n,e),l=z("exclusive",t,n,e),c=z("reverse",t,n,e);return[i.cumsum(z("x",t,n,e),a,l,c)]}case"Bincount":const s=z("x",t,n,e),r=z("weights",t,n,e),o=z("size",t,n,e);return[i.bincount(s,r,o)];case"DenseBincount":{const a=z("x",t,n,e),l=z("weights",t,n,e),c=z("size",t,n,e),u=z("binaryOutput",t,n,e);return[i.denseBincount(a,l,c,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"slice_join":return s(()=>((t,n,e,i=U)=>{switch(t.op){case"ConcatV2":case"Concat":{const s=z("n",t,n,e),r=z("axis",t,n,e);let o=z("tensors",t,n,e);return o=o.slice(0,s),[i.concat(o,r)]}case"Gather":{const s=z("x",t,n,e),r=z("indices",t,n,e);return[i.gather(s,i.cast(r,"int32"),0)]}case"GatherV2":{const s=z("axis",t,n,e),r=z("batchDims",t,n,e),o=z("x",t,n,e),a=z("indices",t,n,e);return[i.gather(o,i.cast(a,"int32"),s,r)]}case"Reverse":{const s=z("dims",t,n,e),r=[];for(let a=0;a<s.length;a++)s[a]&&r.push(a);const o=z("x",t,n,e);return[i.reverse(o,r)]}case"ReverseV2":{const s=z("axis",t,n,e),r=z("x",t,n,e);return[i.reverse(r,s)]}case"Slice":{const s=z("begin",t,n,e),r=z("size",t,n,e);return[i.slice(z("x",t,n,e),s,r)]}case"StridedSlice":{const s=z("begin",t,n,e),r=z("end",t,n,e),o=z("strides",t,n,e),a=z("beginMask",t,n,e),l=z("endMask",t,n,e),c=z("ellipsisMask",t,n,e),u=z("newAxisMask",t,n,e),d=z("shrinkAxisMask",t,n,e),h=z("x",t,n,e);return[i.stridedSlice(h,s,r,o,a,l,c,u,d)]}case"Pack":return et(()=>{const s=z("axis",t,n,e),r=z("tensors",t,n,e),o=r[0].shape,a=i.squeeze(r[0]).shape,l=r.map(c=>{const u=Qi(c.shape,o);if(!u&&!Qi(i.squeeze(c).shape,a))throw new Error("the input tensors shape does not match");return u?c:i.reshape(c,o)});return[i.stack(l,s)]});case"Unpack":{const s=z("axis",t,n,e),r=z("tensor",t,n,e);return i.unstack(r,s)}case"Tile":{const s=z("reps",t,n,e);return[i.tile(z("x",t,n,e),s)]}case"Split":case"SplitV":{const s=z("axis",t,n,e),r=z("numOrSizeSplits",t,n,e),o=z("x",t,n,e);return i.split(o,r,s)}case"ScatterNd":{const s=z("indices",t,n,e),r=z("values",t,n,e),o=z("shape",t,n,e);return[i.scatterND(s,r,o)]}case"GatherNd":{const s=z("x",t,n,e),r=z("indices",t,n,e);return[i.gatherND(s,r)]}case"SparseToDense":{const s=z("sparseIndices",t,n,e),r=z("outputShape",t,n,e),o=z("sparseValues",t,n,e),a=z("defaultValue",t,n,e);return[i.sparseToDense(s,o,r,o.dtype===a.dtype?a:i.cast(a,o.dtype))]}case"TensorScatterUpdate":{const s=z("indices",t,n,e),r=z("values",t,n,e),o=z("tensor",t,n,e);return[i.tensorScatterUpdate(o,s,r)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"sparse":return s(()=>((t,n,e,i=U)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:r,emptyRowIndicator:o,reverseIndexMap:a}=i.sparse.sparseFillEmptyRows(z("indices",t,n,e),z("values",t,n,e),z("denseShape",t,n,e),z("defaultValue",t,n,e));return[s,r,o,a]}case"SparseReshape":{const{outputIndices:s,outputShape:r}=i.sparse.sparseReshape(z("inputIndices",t,n,e),z("inputShape",t,n,e),z("newShape",t,n,e));return[s,r]}case"SparseSegmentMean":return[i.sparse.sparseSegmentMean(z("data",t,n,e),z("indices",t,n,e),z("segmentIds",t,n,e))];case"SparseSegmentSum":return[i.sparse.sparseSegmentSum(z("data",t,n,e),z("indices",t,n,e),z("segmentIds",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"spectral":return s(()=>((t,n,e,i=U)=>{switch(t.op){case"FFT":return[i.fft(z("x",t,n,e))];case"IFFT":return[i.ifft(z("x",t,n,e))];case"RFFT":return[i.rfft(z("x",t,n,e))];case"IRFFT":return[i.irfft(z("x",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"string":return s(()=>((t,n,e,i=U)=>{switch(t.op){case"StaticRegexReplace":return[i.string.staticRegexReplace(z("input",t,n,e),z("pattern",t,n,e),z("rewrite",t,n,e),z("replaceGlobal",t,n,e))];case"StringNGrams":{const{nGrams:s,nGramsSplits:r}=i.string.stringNGrams(z("data",t,n,e),z("dataSplits",t,n,e),z("separator",t,n,e),z("nGramWidths",t,n,e),z("leftPad",t,n,e),z("rightPad",t,n,e),z("padWidth",t,n,e),z("preserveShortSequences",t,n,e));return[s,r]}case"StringSplit":{const{indices:s,values:r,shape:o}=i.string.stringSplit(z("input",t,n,e),z("delimiter",t,n,e),z("skipEmpty",t,n,e));return[s,r,o]}case"StringToHashBucketFast":return[i.string.stringToHashBucketFast(z("input",t,n,e),z("numBuckets",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"transformation":return s(()=>((t,n,e,i=U)=>{switch(t.op){case"Cast":return[i.cast(z("x",t,n,e),z("dtype",t,n,e))];case"ExpandDims":{const s=z("axis",t,n,e);return[i.expandDims(z("x",t,n,e),s)]}case"Squeeze":{const s=z("axis",t,n,e);return[i.squeeze(z("x",t,n,e),s)]}case"Reshape":return[i.reshape(z("x",t,n,e),z("shape",t,n,e))];case"EnsureShape":return[i.ensureShape(z("x",t,n,e),z("shape",t,n,e))];case"MirrorPad":return[i.mirrorPad(z("x",t,n,e),z("padding",t,n,e),z("mode",t,n,e))];case"PadV2":case"Pad":return[i.pad(z("x",t,n,e),z("padding",t,n,e),z("constantValue",t,n,e))];case"SpaceToBatchND":{const s=z("blockShape",t,n,e),r=z("paddings",t,n,e);return[i.spaceToBatchND(z("x",t,n,e),s,r)]}case"BatchToSpaceND":{const s=z("blockShape",t,n,e),r=z("crops",t,n,e);return[i.batchToSpaceND(z("x",t,n,e),s,r)]}case"DepthToSpace":{const s=z("blockSize",t,n,e),r=z("dataFormat",t,n,e).toUpperCase();return[i.depthToSpace(z("x",t,n,e),s,r)]}case"BroadcastTo":return[i.broadcastTo(z("x",t,n,e),z("shape",t,n,e))];case"BroadcastArgs":return[i.broadcastArgs(z("s0",t,n,e),z("s1",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"hash_table":return tvt(o,a,l,i);case"custom":const c=Mge(o.op);if(c&&c.customExecutor)return c.customExecutor(new Vbt(o,a,l));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,n,e);return qp(r)?r.then(o=>[].concat(o)):[].concat(r)}class Bge{constructor(n={},e={},i={},s={},r){this.weightMap=n,this.tensorArrayMap=e,this.tensorListMap=i,this.functionMap=s,this.parseNodeNameCache=r,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(n,e){return{id:n,frameName:e,iterationId:0}}set currentContext(n){this.contexts!==n&&(this.contexts=n,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const n=[];for(let e=0;e<this.contexts.length-1;e++){const i=this.contexts.slice(0,this.contexts.length-e);n.push(this.contextIdforContexts(i))}n.push(""),this._currentContextIds=n}contextIdforContexts(n){return n?n.map(e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`).join("/"):""}enterFrame(n){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,n)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const n=Object.assign({},this.contexts[this.contexts.length-1]);n.iterationId+=1,n.id=this.lastId,this.contexts.splice(-1,1,n),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(n){return this.weightMap[n]}addTensorArray(n){this.tensorArrayMap[n.id]=n}getTensorArray(n){return this.tensorArrayMap[n]}addTensorList(n){this.tensorListMap[n.id]=n}getTensorList(n){return this.tensorListMap[n]}dispose(n){for(const e in this.tensorArrayMap)this.tensorArrayMap[e].clearAndClose(n);for(const e in this.tensorListMap)this.tensorListMap[e].clearAndClose(n)}}function Vge(t,n,e,i){const s=new Set,r=[];let o=null,a=null;const l=new Set,c=new Set(Object.keys(t).map(h=>cc(h)[0]));i=i||[];const u=new Set(i.map(h=>cc(h.name)[0])),d=[...n];for(;d.length>0;){const h=d.pop();if((Yg(h)||yvt(h)||wvt(h))&&null==o&&(o=h,a=o.children.map(f=>f.name).filter(f=>s.has(f))),s.add(h.name),null==e[h.name]&&!c.has(h.name)&&!u.has(h.name)){if(0===h.inputs.length){r.push(h.name);continue}h.inputs.forEach(f=>{l.has(f.name)||(l.add(f.name),d.push(f))})}}return{inputs:t,outputs:n,usedNodes:s,missingInputs:r,dynamicNode:o,syncInputs:a}}class eR extends Error{constructor(n){super(`NodesExecutionOrderError: ${n}`)}}const gvt=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),bvt=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),vvt=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Yg(t){return gvt.has(t.op)}function yvt(t){return bvt.has(t.op)}function wvt(t){return vvt.has(t.op)}class tR{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(n){const e=Object.keys(n).map(i=>n[i].map(s=>s.id));this._weightIds=[].concat(...e),this._weightMap=n}set resourceManager(n){this._resourceManager=n}get inputs(){return this._inputs.map(n=>({name:n.name,shape:n.attrParams.shape?n.attrParams.shape.value:void 0,dtype:n.attrParams.dtype?n.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(n=>({name:n.name,shape:n.attrParams.shape?n.attrParams.shape.value:void 0,dtype:n.attrParams.dtype?n.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(n=>n.signatureKey||n.name)}get outputNodes(){return this._outputs.map(n=>{const e=n.signatureKey||n.name;return n.defaultOutput?`${e}:${n.defaultOutput}`:e})}get functions(){return Object.keys(this._functions).reduce((n,e)=>(n[e]=this._functions[e].signature,n),{})}constructor(n,e){this.graph=n,this.parent=e,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=n.outputs,this._inputs=n.inputs,this._initNodes=n.initNodes,this._signature=n.signature,this._functions=n.functions,null!=n.functions&&Object.keys(n.functions).forEach(i=>{this._functionExecutorMap[i]=new tR(n.functions[i],this)})}getCompilationKey(n,e){const i=n.map(r=>r.name).sort(),s=e.map(r=>r.name).sort();return i.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(n,e){const i=Vge(n,e,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:r,syncInputs:o}=i;if(null!=r)throw new Error(`This execution contains the node '${r.name}', which has the dynamic op '${r.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(s.length>0){const c=e.map(d=>d.name),u=Object.keys(n);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${u}]. Missing the following inputs: [${s}]`)}const a=function fvt(t,n){const{usedNodes:e,inputs:i}=n,o=v=>e.has("string"==typeof v?v:v.name);function a(v){return[...new Map(v.map(y=>[y.name,y])).values()]}const l=a([...Object.keys(i).map(v=>cc(v)[0]).map(v=>t.nodes[v]),...t.weights,...t.initNodes||[]]).filter(o),c=a([...l,...Object.values(t.nodes)]).filter(o),u=new Map(c.map(v=>[v.name,v])),d={};for(const v of c){d[v.name]=d[v.name]||0;for(const y of v.children)o(y)||(d[y.name]=Number.POSITIVE_INFINITY),d[y.name]=(d[y.name]||0)+1}const h=Object.entries(d).filter(([,v])=>0===v).map(([v])=>v),f=[...h];for(;h.length>0;){const v=h.pop(),y=u.get(v);for(const w of y.children.filter(o))0==--d[w.name]&&(f.push(w.name),h.push(w.name))}const g=function pvt(t,n){const e=new Map(t.map(o=>[o.name,o])),i=n.map(o=>o.name),s=new Set(i);for(;i.length>0;){const o=i.pop(),a=e.get(o);for(const l of a.children)!e.has(l.name)||s.has(l.name)||(s.add(l.name),i.push(l.name))}return t.filter(o=>s.has(o.name))}(f.map(v=>u.get(v)),l);return function mvt(t,n){const e=new Map(t.map((a,l)=>[a.name,l])),i=new Set(n.map(a=>a.name)),s=a=>i.has("string"==typeof a?a:a.name),r=new Set(t.map(a=>a.name)),o=a=>r.has("string"==typeof a?a:a.name);for(const a of t){for(const l of a.children.filter(o)){if(!e.has(l.name))throw new eR(`Child ${l.name} of node ${a.name} is unreachable.`);if(e.get(a.name)>e.get(l.name))throw new eR(`Node ${a.name} is scheduled to run after its child ${l.name}.`)}if(!s(a))for(const l of a.inputs){if(!e.has(l.name))throw new eR(`Input ${l.name} of node ${a.name} is unreachable.`);if(e.get(l.name)>e.get(a.name))throw new eR(`Node ${a.name} is scheduled to run before its input ${l.name}.`)}}}(g,l),g}(this.graph,i),l=function _vt(t){const n=new Map(t.map((a,l)=>[a.name,l])),e=Number.MAX_SAFE_INTEGER,i=t.map((a,l)=>Yg(a)?e:l),s=a=>i[n.get(a.name)]??-1,r=t.map((a,l)=>a.children.map(s).reduce((c,u)=>Math.max(c,u),i[l])),o=new Map;for(let a=0;a<t.length;++a){const l=r[a];if(l===e)continue;const c=t[a],u=t[l];o.has(u.name)||o.set(u.name,[]),o.get(u.name).push(c)}return o}(a);return{orderedNodes:a,nodeLiveUntilMap:l}}cloneAndKeepTensor(n){if(null==n)return null;const e=n.clone();return Qo(e),e}cloneTensorList(n){return n?n.map(i=>this.cloneAndKeepTensor(i)):null}cloneTensorMap(n){return Object.fromEntries(Object.entries(n).map(([e,i])=>[e,this.cloneTensorList(i)]))}execute(n,e){this.disposeIntermediateTensors(),n=this.mapInputs(n);const i=Object.keys(n).sort();this.checkInputs(n),this.checkInputShapeAndType(n),e=this.mapOutputs(e),this.checkOutputs(e);const s=i.map(h=>this.graph.nodes[cc(h)[0]]),r=e.map(h=>cc(h)[0]),o=new Set(r);let a=r.map(h=>this.graph.nodes[h]);0===a.length&&(a=this._outputs);const l=this.getCompilationKey(s,a);let c=this.compiledMap.get(l);null==c&&(c=this.compile(n,a),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=nt().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}const u={},d={};return et(()=>{const h=new Bge(this.weightMap,u,d,this.functionExecutorMap,this.parseNodeNameCache),f=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(n).forEach(y=>{const[w,E]=cc(y,h),T=[];T[E]=n[y],f[w]=T,this.keepIntermediateTensors&&(this.clonedTensorsMap[w]=this.cloneTensorList(T))});const p=this.getFrozenTensorIds(f),{orderedNodes:g,nodeLiveUntilMap:v}=c;for(const y of g){if(f[y.name])continue;const w=$ge(y,f,h,this._resourceManager);if(qp(w))throw new Error(`The execution of the op '${y.op}' returned a promise. Please use model.executeAsync() instead.`);f[y.name]=w,this.keepIntermediateTensors&&(this.clonedTensorsMap[y.name]=this.cloneTensorList(w)),this.checkTensorForDisposalWithNodeLiveUntilInfo(y,f,h,p,o,v.get(y.name))}return null==this.parent&&h.dispose(p),e.map(y=>wa(y,f,h))})}getFrozenTensorIds(n){const e=[].concat.apply([],Object.keys(n).map(i=>n[i]).map(i=>i.map(s=>s.id)));return new Set(e)}checkTensorForDisposal(n,e,i,s,r,o,a){if(!Yg(e)&&!o.has(n)){for(const l of i[n])null!=l&&(a[l.id]=(a[l.id]||0)+e.children.length);for(const l of e.inputs){if(Yg(l))continue;const c=Age(l.name,i,s);if(null!=c)for(const u of c){if(!u||u.kept||r.has(u.id))continue;const d=a[u.id];1===d?(u.dispose(),delete a[u.id]):null!=d&&a[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(n,e,i,s,r,o){function a(l){return Yg(l)||r.has(l.name)}if(!Yg(n)&&null!=o)for(const l of o){if(a(l))continue;const c=Age(l.name,e,i);for(const u of c)!u||u.kept||s.has(u.id)||u.dispose()}}executeAsync(n,e){var i=this;return de(function*(){return i._executeAsync(n,e)})()}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(n=>{for(const e of n)e&&!e.isDisposed&&e.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}_executeAsync(n,e,i=!1,s={},r={}){var o=this;return de(function*(){o.disposeIntermediateTensors(),i||(n=o.mapInputs(n),o.checkInputs(n),o.checkInputShapeAndType(n),e=o.mapOutputs(e),o.checkOutputs(e));try{o.keepIntermediateTensors=nt().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){o.keepIntermediateTensors=!1,console.warn(f.message)}const a=new Bge(o.weightMap,s,r,o.functionExecutorMap,o.parseNodeNameCache);o.keepIntermediateTensors&&(o.clonedTensorsMap=o.cloneTensorMap(o.weightMap));const l=yield o.executeWithControlFlow(n,a,e,i),c=e.map(f=>wa(f,l,a)),u=c.map(f=>f.id),d=Object.keys(n).map(f=>n[f].id),h=new Set([...u,...d,...o.weightIds]);return Object.values(l).forEach(f=>{f.forEach(p=>{p&&!p.isDisposed&&!h.has(p.id)&&p.dispose()})}),null==o.parent&&a.dispose(h),c})()}executeFunctionAsync(n,e,i){var s=this;return de(function*(){const r=n.reduce((o,a,l)=>(o[s.inputs[l].name]=a,o),{});return s._executeAsync(r,s.outputNodes,!0,e,i)})()}executeWithControlFlow(n,e,i,s){var r=this;return de(function*(){const o=Object.keys(n),a=o.map(L=>r.graph.nodes[cc(L)[0]]),l=i.map(L=>cc(L)[0]),c=new Set(l);let u=l.map(L=>r.graph.nodes[L]);0===u.length&&(u=r._outputs);const{usedNodes:d,missingInputs:h,dynamicNode:f,syncInputs:p}=Vge(n,u,r.weightMap,r._initNodes),g=[...a,...r.graph.weights,...r._initNodes||[]].map(L=>({node:L,contexts:e.currentContext})),v=Object.assign({},r.weightMap);Object.keys(n).forEach(L=>{const[W,H]=cc(L),P=[];P[H]=n[L],v[W]=P});const y={},w=r.getFrozenTensorIds(v),E={};for(;g.length>0;){const L=r.processStack(a,g,e,v,E,w,c,y,d);yield Promise.all(L)}null==f&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const T=u.filter(L=>!Yg(L)&&!wa(L.name,v,e)).map(L=>L.name);if(T.length>0){let L="";throw null!=f&&(L=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${p}]`),new Error(`Cannot compute the outputs [${T}] from the provided inputs [${o}]. Consider providing the following inputs: [${h}]. ${L}`)}return v})()}processStack(n,e,i,s,r,o,a,l,c){const u=[];for(;e.length>0;){const d=e.pop();i.currentContext=d.contexts;let h="";if("Enter"===d.node.op&&z("isConstant",d.node,s,i)&&([h]=Ff(d.node.name,i)),null==s[d.node.name]){const f=$ge(d.node,s,i,this._resourceManager);h||([h]=Ff(d.node.name,i));const p=i.currentContext;qp(f)?u.push(f.then(g=>(s[h]=g,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(g)),i.currentContext=p,this.checkTensorForDisposal(h,d.node,s,i,o,a,l),this.processChildNodes(d.node,e,i,s,r,c),g))):(s[h]=f,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(f)),this.checkTensorForDisposal(h,d.node,s,i,o,a,l),this.processChildNodes(d.node,e,i,s,r,c))}else this.processChildNodes(d.node,e,i,s,r,c)}return u}processChildNodes(n,e,i,s,r,o){n.children.forEach(a=>{const[l]=Ff(a.name,i);r[l]||!o.has(a.name)||("Merge"===a.op?a.inputNames.some(c=>!!wa(c,s,i))&&(r[l]=!0,e.push({contexts:i.currentContext,node:a})):a.inputNames.every(c=>!!wa(c,s,i))&&(r[l]=!0,e.push({contexts:i.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(n=>this.weightMap[n].forEach(e=>e.dispose()))}checkInputShapeAndType(n){Object.keys(n).forEach(e=>{const i=n[e],[s]=cc(e),r=this.graph.nodes[s];if(r.attrParams.shape&&r.attrParams.shape.value){const o=r.attrParams.shape.value;le(o.length===i.shape.length&&i.shape.every((l,c)=>-1===o[c]||o[c]===l),()=>`The shape of dict['${r.name}'] provided in model.execute(dict) must be [${o}], but was [${i.shape}]`)}r.attrParams.dtype&&r.attrParams.dtype.value&&le(i.dtype===r.attrParams.dtype.value,()=>`The dtype of dict['${r.name}'] provided in model.execute(dict) must be ${r.attrParams.dtype.value}, but was ${i.dtype}`)})}mapInputs(n){var e,i;const s={};for(const r in n){const o=null===(i=null===(e=this._signature)||void 0===e?void 0:e.inputs)||void 0===i?void 0:i[r];null!=o?s[o.name]=n[r]:s[r]=n[r]}return s}checkInputs(n){const e=Object.keys(n).filter(i=>{const[s]=cc(i);return null==this.graph.nodes[s]});if(e.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${e}] that are not part of graph`)}mapOutputs(n){return n.map(e=>{var i,s;const r=null===(s=null===(i=this._signature)||void 0===i?void 0:i.outputs)||void 0===s?void 0:s[e];return null!=r?r.name:e},{})}checkOutputs(n){n.forEach(e=>{const[i]=cc(e);if(!this.graph.nodes[i])throw new Error(`The output '${e}' is not found in the graph`)})}}class Svt{constructor(n={},e={}){this.hashTableNameToHandle=n,this.hashTableMap=e}addHashTable(n,e){this.hashTableNameToHandle[n]=e.handle,this.hashTableMap[e.id]=e}getHashTableHandleByName(n){return this.hashTableNameToHandle[n]}getHashTableById(n){return this.hashTableMap[n]}dispose(){for(const n in this.hashTableMap)this.hashTableMap[n].clearAndClose(),delete this.hashTableMap[n];for(const n in this.hashTableNameToHandle)this.hashTableNameToHandle[n].dispose(),delete this.hashTableNameToHandle[n]}}class zge{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(n,e={},i=Z){this.modelUrl=n,this.loadOptions=e,this.version="n/a",this.io=i,null==e&&(this.loadOptions={}),this.resourceManager=new Svt}findIOHandler(){const n=this.modelUrl;if(null!=n.load)this.handler=n;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(n,this.loadOptions);else{const e=this.io.getLoadHandlers(n,this.loadOptions);if(0===e.length)e.push(this.io.browserHTTPRequest(n,this.loadOptions));else if(e.length>1)throw new Error(`Found more than one (${e.length}) load handlers for URL '${[n]}'`);this.handler=e[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const n=this.handler.load();return qp(n)?n.then(e=>null==e.getWeightStream?this.loadSync(e):this.loadStreaming(e)):this.loadSync(n)}loadSync(n){const e=this.io.decodeWeights(n.weightData,n.weightSpecs);return this.loadWithWeightMap(n,e)}loadStreaming(n){var e=this;return de(function*(){if(null==n.getWeightStream)throw new Error("Model artifacts missing streamWeights function");const i=yield Tfe(n.getWeightStream(),n.weightSpecs);return e.loadWithWeightMap(n,i)})()}loadWithWeightMap(n,e){this.artifacts=n;const i=this.artifacts.modelTopology;let s=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const r=this.artifacts.userDefinedMetadata;null!=r.signature&&(s=r.signature),null!=r.structuredOutputKeys&&(this.structuredOutputKeys=r.structuredOutputKeys)}if(this.signature=s,this.version=`${i.versions.producer}.${i.versions.minConsumer}`,this.executor=new tR(Oge.Instance.transformGraph(i,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(e),this.executor.resourceManager=this.resourceManager,null!=n.modelInitializer&&null!=n.modelInitializer.node){const r=Oge.Instance.transformGraph(n.modelInitializer);this.initializer=new tR(r),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=n.initializerSignature}return!0}save(n,e){var i=this;return de(function*(){if("string"==typeof n){const s=i.io.getSaveHandlers(n);if(0===s.length)throw new Error(`Cannot find any save handlers for URL '${n}'`);if(s.length>1)throw new Error(`Found more than one (${s.length}) save handlers for URL '${n}'`);n=s[0]}if(null==n.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return n.save(i.artifacts)})()}addStructuredOutputNames(n){if(this.structuredOutputKeys){const i={};return(n instanceof Ps?[n]:n).forEach((s,r)=>i[this.structuredOutputKeys[r]]=s),i}return n}predict(n,e){const i=this.execute(n,this.outputNodes);return this.addStructuredOutputNames(i)}predictAsync(n,e){var i=this;return de(function*(){const s=yield i.executeAsync(n,i.outputNodes);return i.addStructuredOutputNames(s)})()}normalizeInputs(n){var e;if(!(n instanceof Ps||Array.isArray(n))){const r=null===(e=this.signature)||void 0===e?void 0:e.inputs;if(null!=r)for(const o in r){const a=r[o];null!=a.resourceId&&(n[o]=this.resourceIdToCapturedInput[a.resourceId])}return n}n=Array.isArray(n)?n:[n];const i=Object.keys(this.resourceIdToCapturedInput).length;if(n.length+i!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-i} non-resource placeholders, while there are ${n.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((r,o)=>{var a,l,c;const u=null===(c=null===(l=null===(a=this.signature)||void 0===a?void 0:a.inputs)||void 0===l?void 0:l[o])||void 0===c?void 0:c.resourceId;return r[o]=null!=u?this.resourceIdToCapturedInput[u]:n[s++],r},{})}normalizeOutputs(n){return n=n||this.outputNodes,Array.isArray(n)?n:[n]}executeInitializerGraph(){return null==this.initializer?[]:this.initializer.execute({},null==this.initializerSignature?[]:Object.keys(this.initializerSignature.outputs))}executeInitializerGraphAsync(){var n=this;return de(function*(){return null==n.initializer?[]:n.initializer.executeAsync({},null==n.initializerSignature?[]:Object.keys(n.initializerSignature.outputs))})()}setResourceIdToCapturedInput(n){if(this.resourceIdToCapturedInput={},this.initializerSignature){const e=this.initializerSignature.outputs,i=Object.keys(e);for(let s=0;s<i.length;s++)this.resourceIdToCapturedInput[e[i[s]].resourceId]=n[s]}}execute(n,e){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),n=this.normalizeInputs(n),e=this.normalizeOutputs(e);const i=this.executor.execute(n,e);return i.length>1?i:i[0]}executeAsync(n,e){var i=this;return de(function*(){null==i.resourceIdToCapturedInput&&i.setResourceIdToCapturedInput(yield i.executeInitializerGraphAsync()),n=i.normalizeInputs(n),e=i.normalizeOutputs(e);const s=yield i.executor.executeAsync(n,e);return s.length>1?s:s[0]})()}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(n){return Object.keys(n).reduce((e,i)=>(e[i]=[n[i]],e),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Ci(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}function EU(){return EU=de(function*(t,n={},e=Z){if(null==t)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==n&&(n={}),n.fromTFHub&&"string"==typeof t&&(t=function Tvt(t){return t.endsWith("/")||(t+="/"),`${t}model.json?tfjs-format=file`}(t));const i=new zge(t,n,e);return yield i.load(),i}),EU.apply(this,arguments)}function gn(t,n){Array.isArray(t)||(t=[t]),t.forEach(e=>{null!=e&&le("complex64"!==e.dtype,()=>`${n} does not support complex64 tensors in the CPU backend.`)})}Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");const ayt=z7;let lyt=(()=>{class t extends eV{nextDataId(){return t.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Uhe(this,dh())}write(e,i,s){this.firstUse&&(this.firstUse=!1,nt().get("IS_NODE")&&Lc("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:s,refCount:1}),r}makeTensorInfo(e,i,s){let r;if("string"===i&&null!=s&&s.length>0&&ox(s[0])){const o=s.map(a=>Yp(a));r=this.write(o,e,i)}else r=this.write(s,e,i);return{dataId:r,shape:e,dtype:i}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){this.data.get(e).refCount++}decRef(e){this.data.has(e)&&this.data.get(e).refCount--}move(e,i,s,r,o){this.data.set(e,{values:i,dtype:r,refCount:o})}numDataIds(){return this.data.numDataIds()}read(e){var i=this;return de(function*(){return i.readSync(e)})()}readSync(e){const{dtype:i,complexTensorInfos:s}=this.data.get(e);return"complex64"===i?Af(this.readSync(s.real.dataId),this.readSync(s.imag.dataId)):function sot(t,n){if(Array.isArray(t))return t;if("float32"===n)return t instanceof Float32Array?t:new Float32Array(t);if("int32"===n)return t instanceof Int32Array?t:new Int32Array(t);if("bool"===n||"string"===n)return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${n}`)}(this.data.get(e).values,i)}bufferSync(e){const i=this.readSync(e.dataId);if("string"===e.dtype)try{const s=i.map(r=>Zp(r));return xi(e.shape,e.dtype,s)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return xi(e.shape,e.dtype,i)}makeOutput(e,i,s){return dh().makeTensorFromTensorInfo(this.makeTensorInfo(i,s,e),this)}disposeData(e,i=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!i&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:s}=this.data.get(e);null!=s&&(this.disposeData(s.real.dataId,!0),this.disposeData(s.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}time(e){return de(function*(){const i=Oa();return e(),{kernelMs:Oa()-i}})()}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){gn([e],"where");const i=this.readSync(e.dataId);return ayt(e.shape,i)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}return t.nextDataId=0,t})();function xh(t){return(n,e,i)=>{const s=Kr(e,n.length);for(let r=0;r<n.length;++r)s[r]=t(n[r],i);return s}}function $s(t,n,e){return vm(t,xh(n),e)}function vm(t,n,e){return({inputs:i,attrs:s,backend:r})=>{const{x:o}=i;gn(o,t);const a=r,l=a.data.get(o.dataId).values;let c;if("string"===o.dtype){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=Of(l)}else c=l;const u=e||o.dtype,d=n(c,u,s);return a.makeTensorInfo(o.shape,u,d)}}wfe("cpu",()=>new lyt,1);const ibe=$s(yx,t=>t>=0?t:Math.exp(t)-1),uyt={kernelName:yx,backendName:"cpu",kernelFunc:ibe};function Eh(t){const{inputs:n,backend:e}=t,{x:i}=n;return e.incRef(i.dataId),{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}const dyt={kernelName:Ix,backendName:"cpu",kernelFunc:Eh};function sbe(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{alpha:r}=i;gn([s],"leakyRelu");const o=at(s.shape),a=e.data.get(s.dataId).values,l=ga("float32",o);for(let c=0;c<a.length;c++)l[c]=a[c]<0?r*a[c]:a[c];return e.makeTensorInfo(s.shape,"float32",l)}const hyt={kernelName:aO,backendName:"cpu",kernelFunc:sbe};function Jr(t){return(n,e,i,s,r)=>{const o=fi(n,e),a=o.length,l=xn(o),u=ga(r,at(o)),d=n.length,h=e.length,f=xn(n),p=xn(e),g=v1(n,o),v=v1(e,o);if(g.length+v.length===0)for(let y=0;y<u.length;++y)u[y]=t(i[y%i.length],s[y%s.length]);else for(let y=0;y<u.length;++y){const w=l1(y,a,l),E=w.slice(-d);g.forEach(H=>E[H]=0);const T=uh(E,d,f),L=w.slice(-h);v.forEach(H=>L[H]=0);const W=uh(L,h,p);u[y]=t(i[T],s[W])}return[u,o]}}const fyt=Jr((t,n)=>t<0?n*t:t);function rbe(t){const{inputs:n,backend:e}=t,{x:i,alpha:s}=n;gn([i,s],"prelu");const r=e.data.get(i.dataId).values,o=e.data.get(s.dataId).values,[a,l]=fyt(i.shape,s.shape,r,o,"float32");return e.makeTensorInfo(l,"float32",a)}const pyt={kernelName:TO,backendName:"cpu",kernelFunc:rbe},obe=$s(Bx,t=>Math.max(0,t)),myt={kernelName:Bx,backendName:"cpu",kernelFunc:obe},abe=$s(Vx,t=>Math.min(Math.max(0,t),6)),_yt={kernelName:Vx,backendName:"cpu",kernelFunc:abe},gyt=xh(t=>1/(1+Math.exp(-t))),lbe=$s(qx,t=>1/(1+Math.exp(-t))),byt={kernelName:qx,backendName:"cpu",kernelFunc:lbe};function aR(t,n,e,i,s){if("linear"===e)return Eh({inputs:{x:n},backend:t});if("relu"===e)return obe({inputs:{x:n},backend:t});if("elu"===e)return ibe({inputs:{x:n},backend:t});if("relu6"===e)return abe({inputs:{x:n},backend:t});if("prelu"===e)return rbe({inputs:{x:n,alpha:i},backend:t});if("leakyrelu"===e)return sbe({inputs:{x:n},backend:t,attrs:{alpha:s}});if("sigmoid"===e)return lbe({inputs:{x:n},backend:t});throw new Error(`Activation ${e} has not been implemented for the CPU backend.`)}function uc(t){const{inputs:n,backend:e}=t,{real:i,imag:s}=n,r=e.data.get(i.dataId).values,o=e.data.get(s.dataId).values,a=e.makeTensorInfo(i.shape,"complex64");return e.data.get(a.dataId).complexTensorInfos={real:e.makeTensorInfo(i.shape,"float32",r),imag:e.makeTensorInfo(s.shape,"float32",o)},a}const vyt={kernelName:mV,backendName:"cpu",kernelFunc:uc};function lR(t,n,e="float32"){if("complex64"===e)return uc({inputs:{real:lR(t,n,"float32"),imag:lR(t,n,"float32")},backend:t});const i=Aa(at(n),e);return t.makeTensorInfo(n,e,i)}function Zg(t){const{inputs:n,backend:e}=t,{input:i}=n,s=e.data.get(i.dataId).complexTensorInfos.real,r=e.data.get(s.dataId).values;return e.makeTensorInfo(s.shape,s.dtype,r)}const yyt={kernelName:YV,backendName:"cpu",kernelFunc:Zg};function cbe(t,n,e,i){if("int32"===i)return[n,"int32",Int32Array.from(t)];if("bool"===i){const s=Dg([0],e),[r,o]=Jr((a,l)=>a!==l?1:0)(n,[],t,s,"bool");return[o,"bool",r]}throw new Error(`Error in Cast: failed to cast ${e} to ${i}`)}function ym(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{dtype:r}=i;if("complex64"===r){if("complex64"===s.dtype)return Eh({inputs:{x:s},backend:e});const u=lR(e,s.shape,s.dtype),d=ym({inputs:{x:s},backend:e,attrs:{dtype:"float32"}}),h=uc({inputs:{real:d,imag:u},backend:e});return e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),h}if("complex64"===s.dtype){const u=Zg({inputs:{input:s},backend:e}),d=ym({inputs:{x:u},backend:e,attrs:{dtype:r}});return e.disposeIntermediateTensorInfo(u),d}if(!Whe(s.dtype,r)){const u=Eh({inputs:{x:s},backend:e});return{dataId:u.dataId,shape:u.shape,dtype:r}}const o=e.data.get(s.dataId).values,[a,l,c]=cbe(o,s.shape,s.dtype,r);return e.makeTensorInfo(a,l,c)}const wyt={kernelName:px,backendName:"cpu",kernelFunc:ym};function $o(t,n,e,i){return null==e?({inputs:s,backend:r})=>{const{a:o,b:a}=s,l=r;gn([o,a],t);const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,d="string"===o.dtype?Of(c):c,h="string"===o.dtype?Of(u):u,f=i||o.dtype,[p,g]=n(o.shape,a.shape,d,h,f);return l.makeTensorInfo(g,f,p)}:({inputs:s,backend:r})=>{const{a:o,b:a}=s,l=r;if("complex64"===o.dtype||"complex64"===a.dtype){const c=ym({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),h=u.complexTensorInfos.imag,f=l.data.get(u.complexTensorInfos.real.dataId).values,p=l.data.get(h.dataId).values,g=ym({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),v=l.data.get(g.dataId),w=v.complexTensorInfos.imag,E=l.data.get(v.complexTensorInfos.real.dataId).values,T=l.data.get(w.dataId).values,[L,W,H]=e(o.shape,a.shape,f,p,E,T),P=l.makeTensorInfo(H,"float32",L),X=l.makeTensorInfo(H,"float32",W),ne=uc({inputs:{real:P,imag:X},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(g),l.disposeIntermediateTensorInfo(P),l.disposeIntermediateTensorInfo(X),ne}{const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,d=i||o.dtype,[h,f]=n(o.shape,a.shape,c,u,d);return l.makeTensorInfo(f,d,h)}}}function NU(t){return(n,e,i,s,r,o)=>{const a=fi(n,e),l=at(a),c=a.length,u=xn(a),d=ga("float32",l),h=ga("float32",l),f=v1(n,a),p=v1(e,a),g=Af(i,s),v=Af(r,o),y=n.length,w=xn(n),E=e.length,T=xn(e);if(f.length+p.length===0)for(let L=0;L<d.length;L++){const W=L%g.length,H=L%v.length,P=t(g[2*W],g[2*W+1],v[2*H],v[2*H+1]);d[L]=P.real,h[L]=P.imag}else for(let L=0;L<d.length;L++){const W=l1(L,c,u),H=W.slice(-y);f.forEach(Ee=>H[Ee]=0);const P=uh(H,y,w),X=W.slice(-E);p.forEach(Ee=>X[Ee]=0);const ne=uh(X,E,T),me=t(g[2*P],g[2*P+1],v[2*ne],v[2*ne+1]);d[L]=me.real,h[L]=me.imag}return[d,h,a]}}const ube=Jr((t,n)=>t+n),Syt=NU((t,n,e,i)=>({real:t+e,imag:n+i})),$1=$o(c1,ube,Syt),Cyt={kernelName:c1,backendName:"cpu",kernelFunc:$1};function hr(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{shape:r}=i,o=at(s.shape),a=Hhe(r,o),l=at(a);le(o===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${s.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),e.incRef(s.dataId);const c=e.data.get(s.dataId);if(null!=c.complexTensorInfos){const d=c.complexTensorInfos.imag;c.complexTensorInfos.real.shape=a,d.shape=a}return{dataId:s.dataId,shape:a,dtype:s.dtype}}const xyt={kernelName:kO,backendName:"cpu",kernelFunc:hr};function dbe(t){const{inputs:n,backend:e,attrs:i}=t,{a:s,b:r}=n,{transposeA:o,transposeB:a}=i;gn([s,r],"matMul");const l=s.shape.length,c=r.shape.length,u=o?s.shape[l-2]:s.shape[l-1],d=a?r.shape[c-1]:r.shape[c-2],h=o?s.shape[l-1]:s.shape[l-2],f=a?r.shape[c-2]:r.shape[c-1],p=s.shape.slice(0,-2),g=r.shape.slice(0,-2),v=at(p),y=at(g),E=fi(s.shape.slice(0,-2),r.shape.slice(0,-2)).concat([h,f]);le(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${s.shape} and ${r.shape} and transposeA=${o} and transposeB=${a} must match.`);const L=a?[y,f,d]:[y,d,f],W=hr({inputs:{x:s},backend:e,attrs:{shape:o?[v,u,h]:[v,h,u]}}),H=hr({inputs:{x:r},backend:e,attrs:{shape:L}}),P=o?W.shape[1]:W.shape[2],X=o?W.shape[2]:W.shape[1],ne=a?H.shape[1]:H.shape[2],me=Math.max(v,y),Ee=e.data.get(W.dataId).values,Te=e.data.get(H.dataId).values,$e=xn(W.shape),Xe=xn(H.shape),[Ce,Fe,Ie]=o?[$e[0],1,$e[1]]:[$e[0],$e[1],1],[He,Ve,tt]=a?[1,Xe[1],Xe[0]]:[Xe[1],1,Xe[0]],St=X*ne,mt=xi([me,X,ne],W.dtype),wt=mt.values,Ft=e.blockSize;for(let Dt=0;Dt<me;Dt++){const Ut=Dt%v,cn=Dt%y;for(let Jt=0;Jt<X;Jt+=Ft){const Nn=Math.min(Jt+Ft,X);for(let si=0;si<ne;si+=Ft){const xs=Math.min(si+Ft,ne);for(let Xs=0;Xs<P;Xs+=Ft){const Os=Math.min(Xs+Ft,P);for(let ls=Jt;ls<Nn;ls++)for(let ws=si;ws<xs;ws++){let ir=0;for(let Vs=Xs;Vs<Os;Vs++)ir+=Ee[Ut*Ce+ls*Fe+Vs*Ie]*Te[Vs*He+ws*Ve+cn*tt];wt[Dt*St+(ls*ne+ws)]+=ir}}}}}return e.disposeIntermediateTensorInfo(W),e.disposeIntermediateTensorInfo(H),e.makeTensorInfo(E,mt.dtype,mt.values)}const Eyt={kernelName:HA,backendName:"cpu",kernelFunc:dbe},Iyt={kernelName:UO,backendName:"cpu",kernelFunc:function Tyt(t){const{inputs:n,backend:e,attrs:i}=t,{a:s,b:r,bias:o,preluActivationWeights:a}=n,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=i;let h,f,p;const g=[];h=dbe({inputs:{a:s,b:r},attrs:{transposeA:l,transposeB:c},backend:e}),o&&(f=$1({inputs:{a:h,b:o},backend:e}),g.push(h),h=f),u&&(p=aR(e,h,u,a,d),g.push(h),h=p);for(const y of g)e.disposeIntermediateTensorInfo(y);return h}};function hbe(t){const n=new Float32Array(t.length);for(let e=0;e<t.length;++e)n[e]=Math.abs(t[e]);return n}const kyt={kernelName:BA,backendName:"cpu",kernelFunc:t=>{const{x:n}=t.inputs,e=t.backend;gn(n,"abs");let i=new Float32Array(at(n.shape));return i=hbe(e.data.get(n.dataId).values),e.makeOutput(i,n.shape,n.dtype)}},Dyt=$s(ax,t=>Math.acos(t)),Myt={kernelName:ax,backendName:"cpu",kernelFunc:Dyt},Ayt=$s(lx,t=>Math.acosh(t)),Oyt={kernelName:lx,backendName:"cpu",kernelFunc:Ayt},Ryt={kernelName:VA,backendName:"cpu",kernelFunc:function Nyt(t){const{inputs:n,backend:e}=t,i=n;gn(n,"addN");const s=i.map(a=>e.data.get(a.dataId).values),r=xi(i[0].shape,i[0].dtype),o=r.values;for(let a=0;a<i.length;a++){const l=s[a];for(let c=0;c<o.length;c++)o[c]+=l[c]}return e.makeTensorInfo(r.shape,r.dtype,r.values)}};function RU(t,n,e,i,s){const r=n.length,o=at(n),a=xn(n),l=xn(s),c=ga(e,at(s));for(let u=0;u<o;++u){const d=l1(u,r,a),h=new Array(d.length);for(let p=0;p<h.length;p++)h[p]=d[i[p]];c[uh(h,r,l)]=t[u]}return c}function kl(t){const{inputs:n,attrs:e,backend:i}=t,{x:s}=n,{perm:r}=e;gn(s,"transpose");const a=new Array(s.shape.length);for(let d=0;d<a.length;d++)a[d]=s.shape[r[d]];const c=RU(i.data.get(s.dataId).values,s.shape,s.dtype,r,a);return{dataId:i.write(c,a,s.dtype),shape:a,dtype:s.dtype}}const Fyt={kernelName:u1,backendName:"cpu",kernelFunc:kl},Pyt={kernelName:"All",backendName:"cpu",kernelFunc:function Lyt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i;gn(s,"all");const a=$i(r,s.shape);let l=a;const c=Nr(l,s.shape.length);let u=s;null!=c&&(u=kl({inputs:{x:s},backend:e,attrs:{perm:c}}),l=Zr(l.length,s.shape.length)),ya("all",l,u.shape.length);const[d,h]=ea(u.shape,l),f=at(h),p=Aa(at(d),u.dtype),g=e.data.get(u.dataId).values;for(let y=0;y<p.length;++y){const w=y*f;let E=g[w];for(let T=0;T<f;++T)E=E&&g[w+T];p[y]=E}null!=c&&e.disposeIntermediateTensorInfo(u);const v=e.makeTensorInfo(d,u.dtype,p);if(o){const w=hr({inputs:{x:v},backend:e,attrs:{shape:Yr(d,a)}});return e.disposeIntermediateTensorInfo(v),w}return v}},Byt={kernelName:"Any",backendName:"cpu",kernelFunc:function $yt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i;gn(s,"any");const a=$i(r,s.shape);let l=a;const c=Nr(l,s.shape.length);let u=s;null!=c&&(u=kl({inputs:{x:s},backend:e,attrs:{perm:c}}),l=Zr(l.length,s.shape.length)),ya("any",l,u.shape.length);const[d,h]=ea(u.shape,l),f=at(h),p=Aa(at(d),u.dtype),g=e.data.get(u.dataId).values;for(let y=0;y<p.length;++y){const w=y*f;let E=g[w];for(let T=0;T<f;++T)E=E||g[w+T];p[y]=E}null!=c&&e.disposeIntermediateTensorInfo(u);const v=e.makeTensorInfo(d,u.dtype,p);if(o){const w=hr({inputs:{x:v},backend:e,attrs:{shape:Yr(d,a)}});return e.disposeIntermediateTensorInfo(v),w}return v}},zyt={kernelName:zA,backendName:"cpu",kernelFunc:function Vyt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r}=i;gn(s,"argMax");let o=$i(r,s.shape);const a=Nr(o,s.shape.length);let l=s;const c=[];null!=a&&(l=kl({inputs:{x:s},backend:e,attrs:{perm:a}}),c.push(l),o=Zr(o.length,l.shape.length)),o=[o[0]],ya("argMax",o,l.shape.length);const[u,d]=ea(l.shape,o),f=Aa(at(u),"int32"),p=at(d),g=e.data.get(l.dataId).values;for(let v=0;v<f.length;++v){const y=v*p;let w=g[y],E=0;for(let T=0;T<p;++T){const L=g[y+T];L>w&&(w=L,E=T)}f[v]=E}return c.forEach(v=>e.disposeIntermediateTensorInfo(v)),e.makeTensorInfo(u,"int32",f)}},Gyt={kernelName:UA,backendName:"cpu",kernelFunc:function Uyt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r}=i;gn(s,"argMin");let o=$i(r,s.shape);const a=Nr(o,s.shape.length);let l=s;const c=[];null!=a&&(l=kl({inputs:{x:s},backend:e,attrs:{perm:a}}),c.push(l),o=Zr(o.length,l.shape.length)),o=[o[0]],ya("argMin",o,l.shape.length);const[u,d]=ea(l.shape,o),f=Aa(at(u),"int32"),p=at(d),g=e.data.get(l.dataId).values;for(let v=0;v<f.length;++v){const y=v*p;let w=g[y],E=0;for(let T=0;T<p;++T){const L=g[y+T];L<w&&(w=L,E=T)}f[v]=E}return c.forEach(v=>e.disposeIntermediateTensorInfo(v)),e.makeTensorInfo(u,"int32",f)}},jyt=$s(cx,t=>Math.asin(t)),Hyt={kernelName:cx,backendName:"cpu",kernelFunc:jyt},Wyt=$s(ux,t=>Math.asinh(t)),qyt={kernelName:ux,backendName:"cpu",kernelFunc:Wyt},Kyt=$s(dx,t=>Math.atan(t)),Xyt={kernelName:dx,backendName:"cpu",kernelFunc:Kyt},Yyt=Jr((t,n)=>Math.atan2(t,n)),Zyt=$o(fx,Yyt),Qyt={kernelName:fx,backendName:"cpu",kernelFunc:Zyt},Jyt=$s(hx,t=>Math.atanh(t)),e1t={kernelName:hx,backendName:"cpu",kernelFunc:Jyt};function FU(t,n,e,i,s,r){const o=s.strideHeight,a=s.strideWidth,l=s.dilationHeight,c=s.dilationWidth,u=s.effectiveFilterHeight,d=s.effectiveFilterWidth,h=s.padInfo.top,f=s.padInfo.left,p="max"===r?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=xi(s.outShape,e),v=g.values,y=s.outShape[1]*s.outShape[2]*s.outShape[3],w=s.outShape[2]*s.outShape[3],E=s.outShape[3];for(let T=0;T<s.batchSize;++T){const L=T*y,W=T*i[0];for(let H=0;H<s.inChannels;++H)for(let P=0;P<s.outHeight;++P){const X=P*o-h,ne=Math.max(0,X),me=Math.min(s.inHeight,u+X),Ee=L+P*w;for(let Te=0;Te<s.outWidth;++Te){const $e=Te*a-f,Xe=Math.max(0,$e),Ce=Math.min(s.inWidth,d+$e);let Fe=p,Ie=0,He=0;for(let tt=ne;tt<me;tt+=l){const St=W+tt*i[1];for(let mt=Xe;mt<Ce;mt+=c){const Ft=t[St+mt*i[2]+H];"max"===r&&Ft>Fe?Fe=Ft:"avg"===r&&(Ie+=Ft,He++)}if(isNaN(Fe))break}v[Ee+Te*E+H]="avg"===r?Ie/He:Fe}}}return g}function fbe(t,n,e,i,s=!1,r=!1){const o=xi(i.outShape,"int32"),a=i.strideHeight,l=i.strideWidth,c=i.dilationHeight,u=i.dilationWidth,d=i.effectiveFilterHeight,h=i.effectiveFilterWidth,f=i.padInfo.top,p=i.padInfo.left,g=xi(n,e,t);for(let v=0;v<i.batchSize;++v)for(let y=0;y<i.inChannels;++y)for(let w=0;w<i.outHeight;++w){const E=w*a-f;let T=E;for(;T<0;)T+=c;const L=Math.min(i.inHeight,d+E);for(let W=0;W<i.outWidth;++W){const H=W*l-p;let P=H;for(;P<0;)P+=u;const X=Math.min(i.inWidth,h+H);let ne=Number.NEGATIVE_INFINITY,me=-1;for(let Ee=T;Ee<L;Ee+=c){const Te=Ee-E;for(let $e=P;$e<X;$e+=u){const Xe=$e-H,Ce=g.get(v,Ee,$e,y);Ce>ne&&(ne=Ce,me=s?r?((v*i.inHeight+Ee)*i.inWidth+$e)*i.inChannels+y:(Ee*i.inWidth+$e)*i.inChannels+y:Te*h+Xe)}}o.set(me,v,w,W,y)}}return o}function pbe(t,n,e,i,s,r){const o=s.strideDepth,a=s.strideHeight,l=s.strideWidth,c=s.dilationDepth,u=s.dilationHeight,d=s.dilationWidth,h=s.effectiveFilterDepth,f=s.effectiveFilterHeight,p=s.effectiveFilterWidth,g=s.padInfo.front,v=s.padInfo.top,y=s.padInfo.left,w="max"===r?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,E=xi(s.outShape,e),T=E.values,L=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],W=s.outShape[2]*s.outShape[3]*s.outShape[4],H=s.outShape[3]*s.outShape[4],P=s.outShape[4];for(let X=0;X<s.batchSize;++X){const ne=X*L,me=X*i[0];for(let Ee=0;Ee<s.inChannels;++Ee)for(let Te=0;Te<s.outDepth;++Te){const $e=Te*o-g;let Xe=$e;for(;Xe<0;)Xe+=c;const Ce=Math.min(s.inDepth,h+$e),Fe=ne+Te*W;for(let Ie=0;Ie<s.outHeight;++Ie){const He=Ie*a-v;let Ve=He;for(;Ve<0;)Ve+=u;const tt=Math.min(s.inHeight,f+He),St=Fe+Ie*H;for(let mt=0;mt<s.outWidth;++mt){const wt=mt*l-y;let Ft=wt;for(;Ft<0;)Ft+=d;const Dt=Math.min(s.inWidth,p+wt),Ut=St+mt*P;let cn=w,Jt=0,Nn=0;for(let xs=Xe;xs<Ce;xs+=c){const Xs=me+xs*i[1];for(let Os=Ve;Os<tt;Os+=u){const ls=Xs+Os*i[2];for(let ws=Ft;ws<Dt;ws+=d){const Vs=t[ls+ws*i[3]+Ee];if("max"===r&&Vs>cn?cn=Vs:"avg"===r&&(Jt+=Vs,Nn++),isNaN(cn))break}if(isNaN(cn))break}if(isNaN(cn))break}T[Ut+Ee]="avg"===r?Jt/Math.max(Nn,1):cn}}}}return E}const i1t={kernelName:GA,backendName:"cpu",kernelFunc:function n1t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n;gn(s,"avgPool");const{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=i;le(va(o,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`);const u=gu(s.shape,r,o,1,a,l);let d;if(1===u.filterWidth&&1===u.filterHeight&&Qi(u.inShape,u.outShape))d=Eh({inputs:{x:s},backend:e});else{const h=e.data.get(s.dataId).values,f=xn(s.shape),p=FU(h,0,s.dtype,f,u,"avg");d=e.makeTensorInfo(u.outShape,s.dtype,p.values)}return d}},r1t={kernelName:jA,backendName:"cpu",kernelFunc:function s1t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{filterSize:r,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=i;gn(s,"avgPool3d");const u=kf(s.shape,r,o,1,a,l,c),h=pbe(e.data.get(s.dataId).values,0,s.dtype,xn(s.shape),u,"avg");return e.makeTensorInfo(h.shape,"float32",h.values)}},a1t={kernelName:hV,backendName:"cpu",kernelFunc:function o1t(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,input:r}=n,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=i;gn([s,r],"avgPool3DGrad");const u=kf(r.shape,o,a,1,l,c),d=u.strideDepth,h=u.strideHeight,f=u.strideWidth,p=u.filterDepth,g=u.filterHeight,v=u.filterWidth,y=u.dilationDepth,w=u.dilationHeight,E=u.dilationWidth,T=u.effectiveFilterDepth,L=u.effectiveFilterHeight,W=u.effectiveFilterWidth,H=T-1-u.padInfo.front,P=W-1-u.padInfo.left,X=L-1-u.padInfo.top,ne=xi(r.shape,"float32"),me=1/(p*g*v),Ee=e.bufferSync(s);for(let Te=0;Te<u.batchSize;++Te)for(let $e=0;$e<u.inChannels;++$e)for(let Xe=0;Xe<u.inDepth;++Xe)for(let Ce=0;Ce<u.inHeight;++Ce)for(let Fe=0;Fe<u.inWidth;++Fe){const Ie=Xe-H,He=Ce-X,Ve=Fe-P;let tt=0;for(let St=0;St<T;St+=y){const mt=(Ie+St)/d;if(!(mt<0||mt>=u.outDepth||Math.floor(mt)!==mt))for(let wt=0;wt<L;wt+=w){const Ft=(He+wt)/h;if(!(Ft<0||Ft>=u.outHeight||Math.floor(Ft)!==Ft))for(let Dt=0;Dt<W;Dt+=E){const Ut=(Ve+Dt)/f;Ut<0||Ut>=u.outWidth||Math.floor(Ut)!==Ut||(tt+=Ee.get(Te,mt,Ft,Ut,$e))}}}ne.set(tt*me,Te,Xe,Ce,Fe,$e)}return e.makeTensorInfo(ne.shape,ne.dtype,ne.values)}},c1t={kernelName:dV,backendName:"cpu",kernelFunc:function l1t(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,input:r}=n,o=r;gn([s,r],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=i,u=gu(o.shape,a,l,1,c),d=u.strideHeight,h=u.strideWidth,f=u.filterHeight,p=u.filterWidth,g=u.dilationHeight,v=u.dilationWidth,y=u.effectiveFilterHeight,w=u.effectiveFilterWidth,E=w-1-u.padInfo.left,T=y-1-u.padInfo.top,L=xi(o.shape,"float32"),W=1/(f*p),H=e.data.get(s.dataId).values,P=xi(s.shape,"float32",H);for(let X=0;X<u.batchSize;++X)for(let ne=0;ne<u.inChannels;++ne)for(let me=0;me<u.inHeight;++me)for(let Ee=0;Ee<u.inWidth;++Ee){const Te=me-T,$e=Ee-E;let Xe=0;for(let Ce=0;Ce<y;Ce+=g){const Fe=(Te+Ce)/d;if(!(Fe<0||Fe>=u.outHeight||Math.floor(Fe)!==Fe))for(let Ie=0;Ie<w;Ie+=v){const He=($e+Ie)/h;He<0||He>=u.outWidth||Math.floor(He)!==He||(Xe+=P.get(X,Fe,He,ne))}}L.set(Xe*W,X,me,Ee,ne)}return e.makeTensorInfo(L.shape,L.dtype,L.values)}},d1t={kernelName:sO,backendName:"cpu",kernelFunc:function u1t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,scale:r,offset:o,mean:a,variance:l}=n;le(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),le(null==o||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),le(null==r||a.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),gn([s,a,l,r,o],"batchNorm");let{varianceEpsilon:c}=i;null==c&&(c=.001);const u=e.data.get(s.dataId).values,d=e.data.get(a.dataId).values,h=e.data.get(l.dataId).values,f=r?e.data.get(r.dataId).values:new Float32Array([1]),p=o?e.data.get(o.dataId).values:new Float32Array([0]),g=new Float32Array(u.length),v=p.length,y=f.length,w=h.length,E=d.length;let T=0,L=0,W=0,H=0;for(let P=0;P<u.length;++P)g[P]=p[T++]+(u[P]-d[L++])*f[W++]/Math.sqrt(h[H++]+c),T>=v&&(T=0),L>=E&&(L=0),W>=y&&(W=0),H>=w&&(H=0);return e.makeTensorInfo(s.shape,s.dtype,g)}};function mbe(t,n,e,i,s){const r=r7(i,n,e),o=at(e),a=xn(i);if(r){const d=o7(n,a);return"string"===s?t.slice(d,d+o):t.subarray(d,d+o)}const c=xi(i,s,"string"===s?Of(t):t),u=xi(e,s);for(let d=0;d<u.size;++d){const h=u.indexToLoc(d),f=h.map((p,g)=>p+n[g]);u.set(c.get(...f),...h)}return"string"===s?Kme(u.values):u.values}function Qg(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{begin:r,size:o}=i;gn(s,"slice");const[a,l]=eN(s,r,o);i7(s,a,l);const u=mbe(e.data.get(s.dataId).values,a,l,s.shape,s.dtype);return e.makeTensorInfo(l,s.dtype,u)}const h1t={kernelName:NO,backendName:"cpu",kernelFunc:Qg},p1t={kernelName:WA,backendName:"cpu",kernelFunc:function f1t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{blockShape:r,crops:o}=i;gn([s],"batchToSpaceND");const a=r.reduce((y,w)=>y*w),l=wE(s.shape,r,a),c=SE(l.length,r.length),u=CE(s.shape,r,a),d=s9(o,r.length),h=r9(u,o,r.length),f=hr({inputs:{x:s},backend:e,attrs:{shape:l}}),p=kl({inputs:{x:f},backend:e,attrs:{perm:c}}),g=hr({inputs:{x:p},backend:e,attrs:{shape:u}}),v=Qg({inputs:{x:g},backend:e,attrs:{begin:d,size:h}});return e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(g),v}};function LU(t,n,e,i,s){const r=at(i),o=Aa(s,e);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(o[l]+=r>0?n[a]:1)}return o}function _be(t,n,e,i=!1){const s=t.shape[0],r=t.shape[1],o=xi([s,e],n.dtype);for(let a=0;a<s;a++)for(let l=0;l<r;l++){const c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=e||o.set(i?1:n.size>0?o.get(a,c)+n.get(a,l):o.get(a,c)+1,a,c)}return o}const _1t={kernelName:fV,backendName:"cpu",kernelFunc:function m1t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,weights:r}=n,{size:o}=i,c=LU(e.data.get(s.dataId).values,e.data.get(r.dataId).values,r.dtype,r.shape,o);return e.makeTensorInfo([o],r.dtype,c)}},gbe=Jr((t,n)=>t&n),g1t=$o(qA,gbe),b1t={kernelName:qA,backendName:"cpu",kernelFunc:g1t},y1t={kernelName:pV,backendName:"cpu",kernelFunc:function v1t(t){const{inputs:n,backend:e}=t,{s0:i,s1:s}=n,r=e.data.get(i.dataId).values,o=e.data.get(s.dataId).values,a=fi(Array.from(r),Array.from(o));return e.makeTensorInfo([a.length],"int32",Int32Array.from(a))}},bbe=xh(t=>Math.ceil(t)),w1t=vm(mx,bbe),S1t={kernelName:mx,backendName:"cpu",kernelFunc:w1t},C1t=$s(_x,(t,n)=>t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t),x1t={kernelName:_x,backendName:"cpu",kernelFunc:C1t},E1t={kernelName:KA,backendName:"cpu",kernelFunc:t=>{const{x:n}=t.inputs,e=t.backend,i=new Float32Array(at(n.shape)),s=e.data.get(n.dataId),o=s.complexTensorInfos.imag,a=e.data.get(s.complexTensorInfos.real.dataId).values,l=e.data.get(o.dataId).values;for(let c=0;c<a.length;c++)i[c]=Math.hypot(a[c],l[c]);return e.makeOutput(i,n.shape,"float32")}};function vbe(t,n,e,i){const s=Kr(e,at(n));if(i&&"string"!==e){let r=0;t.forEach(o=>{const a=at(o.shape);s.set(o.vals,r),r+=a})}else{let r=0;t.forEach(o=>{const a="string"===e?Of(o.vals):o.vals;let l=0;for(let c=0;c<o.shape[0];++c){const u=c*n[1]+r;for(let d=0;d<o.shape[1];++d)s[u+d]=a[l++]}r+=o.shape[1]})}return s}function B1(t){const{inputs:n,backend:e}=t,{input:i}=n,s=e.data.get(i.dataId).complexTensorInfos.imag,r=e.data.get(s.dataId).values;return e.makeTensorInfo(s.shape,s.dtype,r)}const T1t={kernelName:LV,backendName:"cpu",kernelFunc:B1};function V1(t){const{inputs:n,backend:e,attrs:i}=t,{axis:s}=i,r=$i(s,n[0].shape)[0];t9(n.map(g=>g.shape),r);let a=_h(n.map(g=>g.shape),r);if(0===at(a))return e.makeTensorInfo(a,n[0].dtype,[]);const l=n.filter(g=>at(g.shape)>0);if(1===l.length)return Eh({inputs:{x:l[0]},backend:e});if("complex64"===l[0].dtype){const g=l.map(T=>Zg({inputs:{input:T},backend:e})),v=l.map(T=>B1({inputs:{input:T},backend:e})),y=V1({inputs:g,backend:e,attrs:{axis:r}}),w=V1({inputs:v,backend:e,attrs:{axis:r}}),E=uc({inputs:{real:y,imag:w},backend:e});return g.forEach(T=>e.disposeIntermediateTensorInfo(T)),v.forEach(T=>e.disposeIntermediateTensorInfo(T)),e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(w),E}const c=l.map(g=>{const y=[-1,at(g.shape.slice(r))];return hr({inputs:{x:g},backend:e,attrs:{shape:y}})}),u=c.map(g=>({vals:e.data.get(g.dataId).values,shape:g.shape}));a=_h(c.map(g=>g.shape),1);const h=vbe(u,a,n[0].dtype,1===c[0].shape[0]),f=_h(l.map(g=>g.shape),r),p=e.makeTensorInfo(f,n[0].dtype,h);return c.forEach(g=>e.disposeIntermediateTensorInfo(g)),p}const I1t={kernelName:XA,backendName:"cpu",kernelFunc:V1};function ybe(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r}=n,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=i;gn([s,r],"conv2d");const d=Df(l),h=Jo(s.shape,r.shape,o,c,a,u,!1,d),f=h.filterHeight,p=h.filterWidth,g=h.dilationHeight,v=h.dilationWidth,y=h.padInfo.left,w=h.padInfo.top,E="channelsLast"===h.dataFormat,T=new Mo(h.outShape,s.dtype),L=xn(s.shape),W=xn(r.shape),H=L[0],P=E?L[1]:L[2],X=E?L[2]:1,ne=E?1:L[1],me=T.strides[0],Ee=E?T.strides[1]:T.strides[2],Te=E?T.strides[2]:1,$e=E?1:T.strides[1],Xe=e.data.get(s.dataId).values,Ce=e.data.get(r.dataId).values,Fe=T.values;for(let Ie=0;Ie<h.batchSize;++Ie){const He=Ie*H,Ve=Ie*me;for(let tt=0;tt<h.outHeight;++tt){const St=Ve+tt*Ee,mt=tt*h.strideHeight-w;for(let wt=0;wt<f;++wt){const Ft=mt+wt*g;if(Ft<0||Ft>=h.inHeight)continue;const Dt=wt*W[0],Ut=He+Ft*P;for(let cn=0;cn<h.outWidth;++cn){const Jt=St+cn*Te,Nn=cn*h.strideWidth-y;for(let si=0;si<p;++si){const xs=Nn+si*v;if(xs<0||xs>=h.inWidth)continue;const Os=Ut+xs*X;let ls=Dt+si*W[1];for(let ws=0;ws<h.inChannels;++ws){const ir=Xe[Os+ws*ne];for(let Vs=0;Vs<h.outChannels;++Vs)Fe[Jt+Vs*$e]+=ir*Ce[ls+Vs];ls+=h.outChannels}}}}}}return e.makeTensorInfo(T.shape,T.dtype,Fe)}const k1t={kernelName:YA,backendName:"cpu",kernelFunc:ybe},M1t={kernelName:_V,backendName:"cpu",kernelFunc:function D1t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,dy:r}=n,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=i;gn([s,r],"conv2dBackpropFilter");const d=Df(l),h=Jo(s.shape,u,o,1,a,c,!1,d),{strideHeight:f,strideWidth:p,filterHeight:g,filterWidth:v}=h,y="channelsLast"===h.dataFormat,w=new Mo(h.filterShape,"float32"),E=h.padInfo.left,T=h.padInfo.top,L=e.data.get(s.dataId).values,W=e.data.get(r.dataId).values,H=new Mo(s.shape,s.dtype,L),P=new Mo(r.shape,r.dtype,W);for(let X=0;X<g;++X){const ne=Math.max(0,Math.ceil((T-X)/f)),me=Math.min(h.outHeight,(h.inHeight+T-X)/f);for(let Ee=0;Ee<v;++Ee){const Te=Math.max(0,Math.ceil((E-Ee)/p)),$e=Math.min(h.outWidth,(h.inWidth+E-Ee)/p);for(let Xe=0;Xe<h.inChannels;++Xe)for(let Ce=0;Ce<h.outChannels;++Ce){let Fe=0;for(let Ie=0;Ie<h.batchSize;++Ie)for(let He=ne;He<me;++He){const Ve=X+He*f-T;for(let tt=Te;tt<$e;++tt){const St=Ee+tt*p-E;Fe+=y?H.get(Ie,Ve,St,Xe)*P.get(Ie,He,tt,Ce):H.get(Ie,Xe,Ve,St)*P.get(Ie,Ce,He,tt)}}w.set(Fe,X,Ee,Xe,Ce)}}}return e.makeTensorInfo(w.shape,w.dtype,w.values)}},O1t={kernelName:ZA,backendName:"cpu",kernelFunc:function A1t(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,filter:r}=n,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=i;gn([s,r],"conv2dBackpropInput");const d=xn(r.shape),h=xn(s.shape);let f=Df(c);const p=Jo(o,r.shape,a,1,l,u,!1,f),g=new Mo(p.inShape,"float32"),v=g.values,y=e.data.get(s.dataId).values,w=e.data.get(r.dataId).values,[E,T,L]=d,{batchSize:W,filterHeight:H,filterWidth:P,inChannels:X,inHeight:ne,inWidth:me,outChannels:Ee,outHeight:Te,outWidth:$e,strideHeight:Xe,strideWidth:Ce}=p;f=p.dataFormat;const Fe=H-1-p.padInfo.top,Ie=P-1-p.padInfo.left,He="channelsLast"===f,Ve=g.strides[0],tt=He?g.strides[1]:g.strides[2],St=He?g.strides[2]:1,mt=He?1:g.strides[1],wt=h[0],Ft=He?h[1]:h[2],Dt=He?h[2]:1,Ut=He?1:h[1];for(let cn=0;cn<W;++cn)for(let Jt=0;Jt<X;++Jt)for(let Nn=0;Nn<ne;++Nn){const si=Nn-Fe,xs=Math.max(0,Math.ceil(si/Xe)),Xs=Math.min(Te,(H+si)/Xe);for(let Os=0;Os<me;++Os){const ls=Os-Ie,ws=Math.max(0,Math.ceil(ls/Ce)),ir=Math.min($e,(P+ls)/Ce);let Vs=0;for(let Kn=xs;Kn<Xs;++Kn){const Bo=Kn*Xe-si;for(let ri=ws;ri<ir;++ri){const vi=wt*cn+Ft*Kn+Dt*ri,za=E*(H-1-Bo)+T*(P-1-(ri*Ce-ls))+L*Jt;for(let Mh=0;Mh<Ee;++Mh)Vs+=y[vi+Ut*Mh]*w[za+Mh]}}v[Ve*cn+tt*Nn+St*Os+mt*Jt]=Vs}}return e.makeTensorInfo(g.shape,g.dtype,g.values)}},R1t={kernelName:QA,backendName:"cpu",kernelFunc:function N1t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r}=n,{strides:o,pad:a,dilations:l}=i;gn([s,r],"conv3d");const c=rm(s.shape,r.shape,o,l,a),{filterDepth:u,filterHeight:d,filterWidth:h,dilationDepth:f,dilationHeight:p,dilationWidth:g,padInfo:v}=c,y=v.front,w=v.left,E=v.top,T=new Mo(c.outShape,s.dtype),L=e.data.get(s.dataId).values,W=e.data.get(r.dataId).values,H=T.values,P=xn(s.shape),X=xn(r.shape);for(let ne=0;ne<c.batchSize;++ne){const me=ne*P[0],Ee=ne*T.strides[0];for(let Te=0;Te<c.outDepth;++Te){const $e=Ee+Te*T.strides[1],Xe=Te*c.strideDepth-y;for(let Ce=0;Ce<u;++Ce){const Fe=Xe+Ce*f;if(Fe<0||Fe>=c.inDepth)continue;const Ie=Ce*X[0],He=me+Fe*P[1];for(let Ve=0;Ve<c.outHeight;++Ve){const tt=$e+Ve*T.strides[2],St=Ve*c.strideHeight-E;for(let mt=0;mt<d;++mt){const wt=St+mt*p;if(wt<0||wt>=c.inHeight)continue;const Ft=Ie+mt*X[1],Dt=He+wt*P[2];for(let Ut=0;Ut<c.outWidth;++Ut){const cn=tt+Ut*c.outChannels,Jt=Ut*c.strideWidth-w;for(let Nn=0;Nn<h;++Nn){const si=Jt+Nn*g;if(si<0||si>=c.inWidth)continue;const Xs=Dt+si*c.inChannels;let Os=Ft+Nn*X[2];for(let ls=0;ls<c.inChannels;++ls){const ws=L[Xs+ls];for(let ir=0;ir<c.outChannels;++ir)H[cn+ir]+=ws*W[Os+ir];Os+=c.outChannels}}}}}}}}return e.makeTensorInfo(T.shape,T.dtype,T.values)}},L1t={kernelName:gV,backendName:"cpu",kernelFunc:function F1t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,dy:r}=n,{strides:o,pad:a,filterShape:l}=i;gn([s,r],"conv3dBackpropFilterV2");const c=xn(s.shape),u=xn(r.shape),d=rm(s.shape,l,o,1,a),h=d.strideDepth,f=d.strideHeight,p=d.strideWidth,g=d.filterDepth,v=d.filterHeight,y=d.filterWidth,w=new Mo(d.filterShape,"float32"),E=w.values,[T,L,W,H]=w.strides,P=e.data.get(r.dataId).values,[X,ne,me,Ee]=u,Te=e.data.get(s.dataId).values,[$e,Xe,Ce,Fe]=c,Ie=d.padInfo.front,He=d.padInfo.left,Ve=d.padInfo.top;for(let tt=0;tt<g;++tt){const St=Math.max(0,Math.ceil((Ie-tt)/h)),mt=Math.min(d.outDepth,(d.inDepth+Ie-tt)/h),wt=tt*T;for(let Ft=0;Ft<v;++Ft){const Dt=Math.max(0,Math.ceil((Ve-Ft)/f)),Ut=Math.min(d.outHeight,(d.inHeight+Ve-Ft)/f),cn=Ft*L+wt;for(let Jt=0;Jt<y;++Jt){const Nn=Math.max(0,Math.ceil((He-Jt)/p)),si=Math.min(d.outWidth,(d.inWidth+He-Jt)/p),xs=Jt*W+cn;for(let Xs=0;Xs<d.inChannels;++Xs){const Os=Xs*H+xs;for(let ls=0;ls<d.outChannels;++ls){let ws=0;for(let ir=0;ir<d.batchSize;++ir){const Vs=ir*$e,Wc=ir*X;for(let Kn=St;Kn<mt;++Kn){const ri=(tt+Kn*h-Ie)*Xe+Vs,Ns=Kn*ne+Wc;for(let vi=Dt;vi<Ut;++vi){const Mh=(Ft+vi*f-Ve)*Ce+ri,Nm=vi*me+Ns;for(let Rm=Nn;Rm<si;++Rm)ws+=Te[(Jt+Rm*p-He)*Fe+Mh+Xs]*P[Rm*Ee+Nm+ls]}}}E[Os+ls]=ws}}}}}return e.makeTensorInfo(w.shape,w.dtype,w.values)}},$1t={kernelName:bV,backendName:"cpu",kernelFunc:function P1t(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,filter:r}=n,{pad:o,strides:a,inputShape:l}=i;gn([s],"conv3dBackpropInputV2");const c=xn(s.shape),u=xn(r.shape),d=rm(l,r.shape,a,1,o),h=new Mo(d.inShape,"float32"),f=h.values,[p,g,v,y]=h.strides,w=e.data.get(s.dataId).values,[E,T,L,W]=c,H=e.data.get(r.dataId).values,[P,X,ne,me]=u,{batchSize:Ee,filterDepth:Te,filterHeight:$e,filterWidth:Xe,inChannels:Ce,inDepth:Fe,inHeight:Ie,inWidth:He,outChannels:Ve,outDepth:tt,outHeight:St,outWidth:mt,strideDepth:wt,strideHeight:Ft,strideWidth:Dt}=d,Ut=Te-1-d.padInfo.front,cn=$e-1-d.padInfo.top,Jt=Xe-1-d.padInfo.left;for(let Nn=0;Nn<Ee;++Nn)for(let si=0;si<Ce;++si)for(let xs=0;xs<Fe;++xs){const Xs=xs-Ut,Os=Math.max(0,Math.ceil(Xs/wt)),ls=Math.min(tt,(Te+Xs)/wt);for(let ws=0;ws<Ie;++ws){const ir=ws-cn,Vs=Math.max(0,Math.ceil(ir/Ft)),Wc=Math.min(St,($e+ir)/Ft);for(let Kn=0;Kn<He;++Kn){const Bo=Kn-Jt,ri=Math.max(0,Math.ceil(Bo/Dt)),Ns=Math.min(mt,(Xe+Bo)/Dt);let vi=0;for(let za=Os;za<ls;++za){const Mh=za*wt-Xs;for(let Nm=Vs;Nm<Wc;++Nm){const Rm=Nm*Ft-ir;for(let fT=ri;fT<Ns;++fT){const Aj=E*Nn+T*za+L*Nm+W*fT,fUt=P*(Te-1-Mh)+X*($e-1-Rm)+ne*(Xe-1-(fT*Dt-Bo))+me*si;for(let oF=0;oF<Ve;++oF)vi+=w[Aj+oF]*H[fUt+oF]}}}f[p*Nn+g*xs+v*ws+y*Kn+si]=vi}}}return e.makeTensorInfo(h.shape,h.dtype,h.values)}},B1t=$s(gx,t=>Math.cos(t)),V1t={kernelName:gx,backendName:"cpu",kernelFunc:B1t},z1t=$s(bx,t=>Math.cosh(t)),U1t={kernelName:bx,backendName:"cpu",kernelFunc:z1t},j1t={kernelName:yV,backendName:"cpu",kernelFunc:function G1t(t){const{inputs:n,backend:e,attrs:i}=t,{image:s,boxes:r,boxInd:o}=n,{cropSize:a,method:l,extrapolationValue:c}=i,[u,d,h,f]=s.shape,p=r.shape[0],[g,v]=a,y=xi([p,g,v,f],"float32"),w=e.data.get(r.dataId).values,E=e.data.get(o.dataId).values,T=e.data.get(s.dataId).values,L=xn(s.shape),W=xn(y.shape);for(let H=0;H<p;H++){const P=4*H,X=w[P],ne=w[P+1],me=w[P+2],Ee=w[P+3],Te=E[H];if(Te>=u)continue;const $e=g>1?(me-X)*(d-1)/(g-1):0,Xe=v>1?(Ee-ne)*(h-1)/(v-1):0;for(let Ce=0;Ce<g;Ce++){const Fe=g>1?X*(d-1)+Ce*$e:.5*(X+me)*(d-1);if(Fe<0||Fe>d-1)for(let Ie=0;Ie<v;Ie++)for(let He=0;He<f;He++)y.values[He+Ie*W[2]+Ce*W[1]+H*W[0]]=c;else if("bilinear"===l){const Ie=Math.floor(Fe),He=Math.ceil(Fe),Ve=Fe-Ie;for(let tt=0;tt<v;tt++){const St=v>1?ne*(h-1)+tt*Xe:.5*(ne+Ee)*(h-1);if(St<0||St>h-1){for(let Dt=0;Dt<f;Dt++)y.values[Dt+tt*W[2]+Ce*W[1]+H*W[0]]=c;continue}const mt=Math.floor(St),wt=Math.ceil(St),Ft=St-mt;for(let Dt=0;Dt<f;Dt++){let Ut=Dt+mt*L[2]+Ie*L[1]+Te*L[0];const cn=T[Ut];Ut=Dt+wt*L[2]+Ie*L[1]+Te*L[0];const Jt=T[Ut];Ut=Dt+mt*L[2]+He*L[1]+Te*L[0];const Nn=T[Ut];Ut=Dt+wt*L[2]+He*L[1]+Te*L[0];const si=T[Ut],xs=cn+(Jt-cn)*Ft;Ut=Dt+tt*W[2]+Ce*W[1]+H*W[0],y.values[Ut]=xs+(Nn+(si-Nn)*Ft-xs)*Ve}}}else for(let Ie=0;Ie<v;++Ie){const He=v>1?ne*(h-1)+Ie*Xe:.5*(ne+Ee)*(h-1);if(He<0||He>h-1){for(let St=0;St<f;St++)y.values[St+Ie*W[2]+Ce*W[1]+H*W[0]]=c;continue}const Ve=Math.round(He),tt=Math.round(Fe);for(let St=0;St<f;St++)y.values[St+Ie*W[2]+Ce*W[1]+H*W[0]]=T[St+Ve*L[2]+tt*L[1]+Te*L[0]]}}}return e.makeTensorInfo(y.shape,y.dtype,y.values)}},W1t={kernelName:vV,backendName:"cpu",kernelFunc:function H1t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,exclusive:o,reverse:a}=i;gn(s,"cumprod");const l=Nr([r],s.shape.length);let c=s;null!=l&&(c=kl({inputs:{x:s},backend:e,attrs:{perm:l}}));const u=Zr(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=nc(c.dtype,"int32"),h=oV(at(c.shape),d),f=e.data.get(c.dataId).values,p=c.shape[c.shape.length-1],g=a?(y,w)=>y+p-w-1:(y,w)=>y+w;for(let y=0;y<f.length;y+=p)for(let w=0;w<p;w++){const E=g(y,w);if(0===w)h[E]=o?1:f[E];else{const T=g(y,w-1);h[E]=o?f[T]*h[T]:f[E]*h[T]}}const v=e.makeTensorInfo(c.shape,d,h);if(null!=l){const w=kl({inputs:{x:v},backend:e,attrs:{perm:lm(l)}});return e.disposeIntermediateTensorInfo(v),e.disposeIntermediateTensorInfo(c),w}return v}},K1t={kernelName:JA,backendName:"cpu",kernelFunc:function q1t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,exclusive:o,reverse:a}=i;gn(s,"cumsum");const l=Nr([r],s.shape.length);let c=s;null!=l&&(c=kl({inputs:{x:s},backend:e,attrs:{perm:l}}));const u=Zr(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=nc(c.dtype,"int32"),h=Aa(at(c.shape),d),f=e.data.get(c.dataId).values,p=c.shape[c.shape.length-1],g=a?(y,w)=>y+p-w-1:(y,w)=>y+w;for(let y=0;y<f.length;y+=p)for(let w=0;w<p;w++){const E=g(y,w);if(0===w)h[E]=o?0:f[E];else{const T=g(y,w-1);h[E]=o?f[T]+h[T]:f[E]+h[T]}}const v=e.makeTensorInfo(c.shape,d,h);if(null!=l){const w=kl({inputs:{x:v},backend:e,attrs:{perm:lm(l)}});return e.disposeIntermediateTensorInfo(v),e.disposeIntermediateTensorInfo(c),w}return v}},Y1t={kernelName:wV,backendName:"cpu",kernelFunc:function X1t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,weights:r}=n,{size:o,binaryOutput:a}=i;if(1===s.shape.length){const u=LU(e.data.get(s.dataId).values,e.data.get(r.dataId).values,r.dtype,r.shape,o);return e.makeTensorInfo([o],r.dtype,u)}if(2===s.shape.length){const u=_be(e.bufferSync(s),e.bufferSync(r),o,a);return e.makeTensorInfo(u.shape,r.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}},Q1t={kernelName:SV,backendName:"cpu",kernelFunc:function Z1t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{blockSize:r,dataFormat:o}=i;le("NHWC"===o,()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const a=s.shape[0],l=s.shape[1],c=s.shape[2],u=s.shape[3],d=l*r,h=c*r,f=u/(r*r),p=e.data.get(s.dataId).values,g=new Float32Array(a*d*h*f);let v=0;for(let y=0;y<a;++y)for(let w=0;w<d;++w){const E=Math.floor(w/r),T=w%r;for(let L=0;L<h;++L){const W=Math.floor(L/r),P=(T*r+L%r)*f;for(let X=0;X<f;++X)g[v++]=p[X+P+u*(W+c*(E+l*y))]}}return e.makeTensorInfo([a,d,h,f],s.dtype,g)}};function wbe(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r}=n,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=i;gn([s,r],"depthwiseConv2DNative");const u=xn(s.shape),d=xn(r.shape);let h=l;null==h&&(h=[1,1]),le(va(o,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${h}'`);const f=Jo(s.shape,r.shape,o,h,a,c,!0),{filterHeight:p,filterWidth:g,dilationHeight:v,dilationWidth:y,padInfo:w}=f,E=w.left,T=w.top,L=f.outChannels/f.inChannels,W=new Mo(f.outShape,s.dtype),H=e.data.get(s.dataId).values,P=e.data.get(r.dataId).values,X=W.values;for(let ne=0;ne<f.batchSize;++ne){const me=ne*u[0],Ee=ne*W.strides[0];for(let Te=0;Te<f.outHeight;++Te){const $e=Ee+Te*W.strides[1],Xe=Te*f.strideHeight-T;for(let Ce=0;Ce<p;++Ce){const Fe=Xe+Ce*v;if(Fe<0||Fe>=f.inHeight)continue;const Ie=Ce*d[0],He=me+Fe*u[1];for(let Ve=0;Ve<f.outWidth;++Ve){const tt=$e+Ve*W.strides[2],St=Ve*f.strideWidth-E;for(let mt=0;mt<g;++mt){const wt=St+mt*y;if(wt<0||wt>=f.inWidth)continue;const Dt=He+wt*f.inChannels;let Ut=tt,cn=Ie+mt*d[1];for(let Jt=0;Jt<f.inChannels;++Jt){const Nn=H[Dt+Jt];for(let si=0;si<L;++si)X[Ut+si]+=Nn*P[cn+si];Ut+=L,cn+=L}}}}}}return e.makeTensorInfo(W.shape,W.dtype,W.values)}const J1t={kernelName:eO,backendName:"cpu",kernelFunc:wbe},t0t={kernelName:CV,backendName:"cpu",kernelFunc:function e0t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,dy:r}=n,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=i;gn([s,r],"depthwiseConv2dNativeBackpropFilter");const d=Jo(s.shape,u,o,a,l,c,!0),{strideHeight:h,strideWidth:f,filterHeight:p,filterWidth:g}=d,v=new Mo(d.filterShape,"float32"),y=d.padInfo.left,w=d.padInfo.top,E=d.outChannels/d.inChannels,T=e.data.get(s.dataId).values,L=new Mo(s.shape,s.dtype,T),W=e.data.get(r.dataId).values,H=new Mo(r.shape,r.dtype,W);for(let P=0;P<p;++P){const X=Math.max(0,Math.ceil((w-P)/h)),ne=Math.min(d.outHeight,(d.inHeight+w-P)/h);for(let me=0;me<g;++me){const Ee=Math.max(0,Math.ceil((y-me)/f)),Te=Math.min(d.outWidth,(d.inWidth+y-me)/f);for(let $e=0;$e<d.outChannels;++$e){const Xe=Math.trunc($e/E),Ce=$e%E;let Fe=0;for(let Ie=0;Ie<d.batchSize;++Ie)for(let He=X;He<ne;++He){const Ve=P+He*h-w;for(let tt=Ee;tt<Te;++tt)Fe+=L.get(Ie,Ve,me+tt*f-y,Xe)*H.get(Ie,He,tt,$e)}v.set(Fe,P,me,Xe,Ce)}}}return e.makeTensorInfo(v.shape,v.dtype,v.values)}},i0t={kernelName:xV,backendName:"cpu",kernelFunc:function n0t(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,filter:r}=n,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=i;gn([s,r],"depthwiseConv2DNativeBackpropInput");const d=xn(s.shape),h=xn(r.shape),f=Jo(u,r.shape,o,a,l,c,!0),p=new Mo(f.inShape,"float32"),g=p.values,[v,y,w]=p.strides,E=e.data.get(s.dataId).values,[T,L,W]=d,H=e.data.get(r.dataId).values,[P,X,ne]=h,{batchSize:me,filterHeight:Ee,filterWidth:Te,inChannels:$e,inHeight:Xe,inWidth:Ce,outChannels:Fe,outHeight:Ie,outWidth:He,strideHeight:Ve,strideWidth:tt}=f,St=Ee-1-f.padInfo.top,mt=Te-1-f.padInfo.left,wt=Fe/$e;for(let Ft=0;Ft<me;++Ft)for(let Dt=0;Dt<$e;++Dt)for(let Ut=0;Ut<Xe;++Ut){const cn=Ut-St,Jt=Math.max(0,Math.ceil(cn/Ve)),Nn=Math.min(Ie,(Ee+cn)/Ve);for(let si=0;si<Ce;++si){const xs=si-mt,Xs=Math.max(0,Math.ceil(xs/tt)),Os=Math.min(He,(Te+xs)/tt);let ls=0;for(let ws=Jt;ws<Nn;++ws){const ir=ws*Ve-cn;for(let Vs=Xs;Vs<Os;++Vs){const Kn=T*Ft+L*ws+W*Vs,Bo=P*(Ee-1-ir)+X*(Te-1-(Vs*tt-xs))+ne*Dt;for(let ri=0;ri<wt;++ri)ls+=E[Kn+(Dt*wt+ri)]*H[Bo+ri]}}g[v*Ft+y*Ut+w*si+Dt]=ls}}return e.makeTensorInfo(p.shape,p.dtype,p.values)}},r0t={kernelName:EV,backendName:"cpu",kernelFunc:function s0t(t){const{inputs:n,backend:e}=t,{x:i}=n,s=at(i.shape),r=e.data.get(i.dataId).values,o=xi([s,s],i.dtype),a=o.values;for(let c=0;c<r.length;c++)a[c*s+c]=r[c];const l=[...i.shape,...i.shape];return e.makeTensorInfo(l,o.dtype,o.values)}},o0t={kernelName:tO,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{const{x:i,filter:s}=t,{strides:r,pad:o,dilations:a}=e,l=n,c=l.data.get(i.dataId).values,u=i.shape.length,d=l.data.get(s.dataId).values,h=s.shape.length,{batchSize:f,inHeight:p,inWidth:g,inChannels:v,outHeight:y,outWidth:w,padInfo:E,strideHeight:T,strideWidth:L,filterHeight:W,filterWidth:H,dilationHeight:P,dilationWidth:X,outShape:ne}=aE(i.shape,s.shape,r,o,"NHWC",a),me=at(ne),Ee=ne.length,Te=Kr(i.dtype,me);for(let Xe=0;Xe<f;++Xe)for(let Ce=0;Ce<y;++Ce){const Fe=Ce*T-E.top;for(let Ie=0;Ie<w;++Ie){const He=Ie*L-E.left;for(let Ve=0;Ve<v;++Ve){let tt=Number.MIN_SAFE_INTEGER;for(let mt=0;mt<W;++mt){const wt=Fe+mt*P;if(wt>=0&&wt<p)for(let Ft=0;Ft<H;++Ft){const Dt=He+Ft*X;if(Dt>=0&&Dt<g){const Ut=uh([Xe,wt,Dt,Ve],u,xn(i.shape)),cn=uh([mt,Ft,Ve],h,xn(s.shape)),Jt=c[Ut]+d[cn];Jt>tt&&(tt=Jt)}}}Te[uh([Xe,Ce,Ie,Ve],Ee,xn(ne))]=tt}}}return{dataId:l.write(Dg(Te,i.dtype),ne,i.dtype),shape:ne,dtype:i.dtype}}},a0t={kernelName:IV,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{const{x:i,filter:s,dy:r}=t,{strides:o,pad:a,dilations:l}=e,c=n,u=mu(i.shape,c.data.get(i.dataId).values),d=mu(s.shape,c.data.get(s.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:g,outHeight:v,outWidth:y,padInfo:w,strideHeight:E,strideWidth:T,filterHeight:L,filterWidth:W,dilationHeight:H,dilationWidth:P,outShape:X}=aE(i.shape,s.shape,o,a,"NHWC",l);le(r.rank===X.length,()=>`Error in ${IV}, dy must have the same rank as output ${X.length}, but got ${r.rank}`);const ne=mu(X,c.data.get(r.dataId).values),me=Khe(s.shape,s.dtype);for(let Te=0;Te<h;++Te)for(let $e=0;$e<v;++$e){const Xe=$e*E-w.top;for(let Ce=0;Ce<y;++Ce){const Fe=Ce*T-w.left;for(let Ie=0;Ie<g;++Ie){let He=Number.MIN_SAFE_INTEGER,Ve=0,tt=0;for(let St=0;St<L;++St){const mt=Xe+St*H;if(mt>=0&&mt<f)for(let wt=0;wt<W;++wt){const Ft=Fe+wt*P;if(Ft>=0&&Ft<p){const Dt=u[Te][mt][Ft][Ie]+d[St][wt][Ie];Dt>He&&(He=Dt,Ve=St,tt=wt)}}}me[Ve][tt][Ie]+=ne[Te][$e][Ce][Ie]}}}return{dataId:c.write(Dg(me,i.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}},l0t={kernelName:TV,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{const{x:i,filter:s,dy:r}=t,{strides:o,pad:a,dilations:l}=e,c=n,u=mu(i.shape,c.data.get(i.dataId).values),d=mu(s.shape,c.data.get(s.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:g,outHeight:v,outWidth:y,padInfo:w,strideHeight:E,strideWidth:T,filterHeight:L,filterWidth:W,dilationHeight:H,dilationWidth:P,outShape:X}=aE(i.shape,s.shape,o,a,"NHWC",l);le(r.rank===X.length,()=>`Error in ${TV}, dy must have the same rank as output ${X.length}, but got ${r.rank}`);const ne=mu(X,c.data.get(r.dataId).values),me=Khe(i.shape,i.dtype);for(let Te=0;Te<h;++Te)for(let $e=0;$e<v;++$e){const Xe=$e*E-w.top;for(let Ce=0;Ce<y;++Ce){const Fe=Ce*T-w.left;for(let Ie=0;Ie<g;++Ie){let He=Number.MIN_SAFE_INTEGER,Ve=Xe<0?0:Xe,tt=Fe<0?0:Fe;for(let St=0;St<L;++St){const mt=Xe+St*H;if(mt>=0&&mt<f)for(let wt=0;wt<W;++wt){const Ft=Fe+wt*P;if(Ft>=0&&Ft<p){const Dt=u[Te][mt][Ft][Ie]+d[St][wt][Ie];Dt>He&&(He=Dt,Ve=mt,tt=Ft)}}}me[Te][Ve][tt][Ie]+=ne[Te][$e][Ce][Ie]}}}return{dataId:c.write(Dg(me,i.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},u0t={kernelName:"Draw",backendName:"cpu",kernelFunc:function c0t(t){const{inputs:n,backend:e,attrs:i}=t,{image:s}=n,{canvas:r,options:o}=i,{contextOptions:a,imageOptions:l}=o||{},c=l?.alpha||1,u=a?.contextType||"2d";if("2d"!==u)throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=r.getContext(u,a?.contextAttributes||{});if(null==d)throw new Error(`Could not get the context with ${u} type.`);const[h,f]=s.shape.slice(0,2),p=2===s.shape.length?1:s.shape[2],g=e.data.get(s.dataId).values,v="float32"===s.dtype?255:1,y=new Uint8ClampedArray(f*h*4);for(let E=0;E<h*f;++E){const T=[0,0,0,255*c];for(let W=0;W<p;W++){const H=g[E*p+W];if("float32"===s.dtype){if(H<0||H>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${H}.`)}else if("int32"===s.dtype&&(H<0||H>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${H}.`);1===p?(T[0]=H*v,T[1]=H*v,T[2]=H*v):T[W]=H*v}const L=4*E;y[L+0]=Math.round(T[0]),y[L+1]=Math.round(T[1]),y[L+2]=Math.round(T[2]),y[L+3]=Math.round(T[3])}r.width=f,r.height=h;const w=new ImageData(y,f,h);return d.putImageData(w,0,0),s}},PU=Jr((t,n)=>t*n),d0t=NU((t,n,e,i)=>({real:t*e-n*i,imag:t*i+n*e})),cR=$o(Lx,PU,d0t),h0t={kernelName:Lx,backendName:"cpu",kernelFunc:cR};function $E(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i;let a;gn(s,"sum"),a="bool"===s.dtype?ym({inputs:{x:s},backend:e,attrs:{dtype:"int32"}}):Eh({inputs:{x:s},backend:e});const l=a.shape.length,c=$i(r,a.shape),u=Nr(c,l);let d=c,h=a;null!=u&&(h=kl({inputs:{x:a},backend:e,attrs:{perm:u}}),d=Zr(d.length,l)),ya("sum",d,h.shape.length);const[f,p]=ea(h.shape,d);let v=lR(e,f,nc(h.dtype,"int32"));const y=at(p),w=e.data.get(v.dataId).values,E=e.data.get(h.dataId).values;for(let T=0;T<w.length;++T){const L=T*y;let W=0;for(let H=0;H<y;++H)W+=E[L+H];w[T]=W}if(o){const L=v;v=hr({inputs:{x:v},backend:e,attrs:{shape:Yr(v.shape,c)}}),e.disposeIntermediateTensorInfo(L)}return e.disposeIntermediateTensorInfo(a),null!=u&&e.disposeIntermediateTensorInfo(h),v}const f0t={kernelName:RO,backendName:"cpu",kernelFunc:$E},m0t={kernelName:DV,backendName:"cpu",kernelFunc:function p0t(t){const{inputs:n,backend:e,attrs:i}=t,{equation:s}=i,r=n,{allDims:o,summedDims:a,idDims:l}=m9(s,r.length);g9(o.length,l,r);const{path:c,steps:u}=b9(a,l),d=u.length;let h=null,f=o.length;const p=[];for(let g=0;g<d;++g){for(const v of u[g]){const{permutationIndices:y,expandDims:w}=_9(f,l[v]);let E;v9(y)?E=r[v]:(E=kl({inputs:{x:r[v]},backend:e,attrs:{perm:y}}),p.push(E));const T=E.shape.slice();for(let L=0;L<w.length;++L)T.splice(w[L],0,1);Qi(E.shape,T)||(E=hr({inputs:{x:E},backend:e,attrs:{shape:T}}),p.push(E)),null===h?h=E:(h=cR({inputs:{a:E,b:h},backend:e}),p.push(h))}g<d-1&&(c[g]>=0&&(h=$E({inputs:{x:h},backend:e,attrs:{axis:c[g]-(o.length-f),keepDims:!1}}),p.push(h)),f--)}for(const g of p)g!==h&&e.disposeIntermediateTensorInfo(g);return h}},g0t={kernelName:MV,backendName:"cpu",kernelFunc:function _0t(t){const{inputs:n,backend:e}=t,{dy:i,y:s}=n;gn([i,s],"eluGrad");const r=new Float32Array(at(s.shape)),o=e.data.get(s.dataId).values,a=e.data.get(i.dataId).values;for(let l=0;l<o.length;++l){const c=o[l];r[l]=c>=0?a[l]:a[l]*(c+1)}return e.makeTensorInfo(s.shape,"float32",r)}},Sbe=Jr((t,n)=>t===n?1:0),Cbe=$o(nO,Sbe,null,"bool"),b0t={kernelName:nO,backendName:"cpu",kernelFunc:Cbe},v0t=a9,y0t=l9,w0t=c9,S0t=u9,C0t=d9,x0t=h9,E0t=$s(wx,t=>{const n=Math.sign(t),e=Math.abs(t),i=1/(1+v0t*e);return n*(1-((((x0t*i+C0t)*i+S0t)*i+w0t)*i+y0t)*i*Math.exp(-e*e))}),T0t={kernelName:wx,backendName:"cpu",kernelFunc:E0t},xbe=xh(t=>Math.exp(t)),Ebe=vm(Sx,xbe,"float32"),I0t={kernelName:Sx,backendName:"cpu",kernelFunc:Ebe};function uR(t){const{inputs:n,backend:e,attrs:i}=t,{input:s}=n,{dim:r}=i,o=s.shape.length,a=s.shape.slice();let l=r;return r<0&&(le(-(o+1)<=r,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+r+1),a.splice(l,0,1),hr({inputs:{x:s},backend:e,attrs:{shape:a}})}const k0t={kernelName:iO,backendName:"cpu",kernelFunc:uR},Tbe=xh(t=>Math.expm1(t)),D0t=vm(Cx,Tbe),M0t={kernelName:Cx,backendName:"cpu",kernelFunc:D0t},A0t=Jr((t,n)=>t/n),$U=$o(vx,A0t),BU={kernelName:vx,backendName:"cpu",kernelFunc:$U},Ibe=Jr((t,n)=>t-n),O0t=NU((t,n,e,i)=>({real:t-e,imag:n-i})),VU=$o(Zx,Ibe,O0t),N0t={kernelName:Zx,backendName:"cpu",kernelFunc:VU};function kbe(t,n,e){const i=t.shape,s=i[0],r=i[1],o=e.data.get(t.dataId),a=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,c=[s,r],u=at(c),d=ga("float32",u),h=ga("float32",u);for(let v=0;v<s;v++){const y=Qg({inputs:{x:a},backend:e,attrs:{begin:[v,0],size:[1,r]}}),w=Qg({inputs:{x:l},backend:e,attrs:{begin:[v,0],size:[1,r]}}),E=uc({inputs:{real:y,imag:w},backend:e}),{real:T,imag:L}=R0t(E,n,e),W=Af(T,L);for(let H=0;H<r;H++){const P=f9(W,H);d[v*r+H]=P.real,h[v*r+H]=P.imag}e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(w),e.disposeIntermediateTensorInfo(E)}const f=e.makeTensorInfo(c,"float32",d),p=e.makeTensorInfo(c,"float32",h),g=uc({inputs:{real:f,imag:p},backend:e});return e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(p),g}function R0t(t,n,e){const i=at(t.shape),s=e.data.get(t.dataId),r=e.data.get(s.complexTensorInfos.real.dataId).values,o=e.data.get(s.complexTensorInfos.imag.dataId).values;if(function F0t(t){return!(t&t-1)}(i)){const a=zU(r,o,i,n,e),l=[t.shape[0],t.shape[1]];if(n){const c=e.makeTensorInfo(l,"float32",a.real),u=e.makeTensorInfo(l,"float32",a.imag),d=e.makeTensorInfo([],"float32",Xp(i,"float32")),h=Eh({inputs:{x:d},backend:e}),f=BU.kernelFunc({inputs:{a:c,b:d},backend:e}),p=BU.kernelFunc({inputs:{a:u,b:h},backend:e}),g=e.data.get(f.dataId).values,v=e.data.get(p.dataId).values;return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(p),{real:g,imag:v}}return a}{const l=function L0t(t,n,e){const i=new Float32Array(2*n);for(let s=0;s<n;s++){let r=0,o=0;for(let a=0;a<n;a++){const l=Ome(s*a,n,e),c=f9(t,a);r+=c.real*l.real-c.imag*l.imag,o+=c.real*l.imag+c.imag*l.real}e&&(r/=n,o/=n),Mme(i,r,o,s)}return i}(Af(r,o),i,n);return Ime(l)}}function zU(t,n,e,i,s){if(1===e)return{real:t,imag:n};const r=Af(t,n),o=e/2,a=kme(r),l=a.real,c=a.imag,u=[l.length],d=s.makeTensorInfo(u,"float32",l),h=s.makeTensorInfo(u,"float32",c),f=uc({inputs:{real:d,imag:h},backend:s}),p=Dme(r),g=p.real,v=p.imag,y=[g.length],w=s.makeTensorInfo(y,"float32",g),E=s.makeTensorInfo(y,"float32",v),T=uc({inputs:{real:w,imag:E},backend:s}),L=zU(l,c,o,i,s),W=L.real,H=L.imag,P=[W.length],X=s.makeTensorInfo(P,"float32",W),ne=s.makeTensorInfo(P,"float32",H),me=uc({inputs:{real:X,imag:ne},backend:s}),Ee=zU(g,v,o,i,s),Te=Ee.real,$e=Ee.imag,Xe=[Te.length],Ce=s.makeTensorInfo(Xe,"float32",Te),Fe=s.makeTensorInfo(Xe,"float32",$e),Ie=uc({inputs:{real:Ce,imag:Fe},backend:s}),He=Ame(e,i),Ve=[He.real.length],tt=s.makeTensorInfo(Ve,"float32",He.real),St=s.makeTensorInfo(Ve,"float32",He.imag),mt=uc({inputs:{real:tt,imag:St},backend:s}),wt=cR({inputs:{a:mt,b:Ie},backend:s}),Ft=$1({inputs:{a:me,b:wt},backend:s}),Dt=VU({inputs:{a:me,b:wt},backend:s}),Ut=Zg({inputs:{input:Ft},backend:s}),cn=Zg({inputs:{input:Dt},backend:s}),Jt=B1({inputs:{input:Ft},backend:s}),Nn=B1({inputs:{input:Dt},backend:s}),si=V1({inputs:[Ut,cn],backend:s,attrs:{axis:0}}),xs=V1({inputs:[Jt,Nn],backend:s,attrs:{axis:0}}),Xs=s.data.get(si.dataId).values,Os=s.data.get(xs.dataId).values;return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(w),s.disposeIntermediateTensorInfo(E),s.disposeIntermediateTensorInfo(T),s.disposeIntermediateTensorInfo(X),s.disposeIntermediateTensorInfo(ne),s.disposeIntermediateTensorInfo(me),s.disposeIntermediateTensorInfo(Ce),s.disposeIntermediateTensorInfo(Fe),s.disposeIntermediateTensorInfo(Ie),s.disposeIntermediateTensorInfo(tt),s.disposeIntermediateTensorInfo(St),s.disposeIntermediateTensorInfo(mt),s.disposeIntermediateTensorInfo(wt),s.disposeIntermediateTensorInfo(Ft),s.disposeIntermediateTensorInfo(Dt),s.disposeIntermediateTensorInfo(Ut),s.disposeIntermediateTensorInfo(Jt),s.disposeIntermediateTensorInfo(cn),s.disposeIntermediateTensorInfo(Nn),s.disposeIntermediateTensorInfo(si),s.disposeIntermediateTensorInfo(xs),{real:Xs,imag:Os}}const $0t={kernelName:"FFT",backendName:"cpu",kernelFunc:function P0t(t){const{inputs:n,backend:e}=t,{input:i}=n,s=at(i.shape),r=i.shape[i.shape.length-1],a=hr({inputs:{x:i},backend:e,attrs:{shape:[s/r,r]}}),l=kbe(a,!1,e),c=hr({inputs:{x:l},backend:e,attrs:{shape:i.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(l),c}};function UU(t){const{backend:n,attrs:e}=t,{shape:i,value:s,dtype:r}=e,o=r||a1(s),a=Kr(o,at(i));return function V0t(t,n,e){t.fill(n)}(a,s),n.makeTensorInfo(i,o,a)}const B0t={kernelName:OV,backendName:"cpu",kernelFunc:UU},z0t={kernelName:NV,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{image:i}=t,s=e,r=ga(i.dtype,at(i.shape)),[o,a,l,c]=i.shape,u=s.data.get(i.dataId).values;for(let h=0;h<o;h++){const f=h*l*a*c;for(let p=0;p<a;p++){const g=p*(l*c);for(let v=0;v<l;v++){const y=v*c;for(let w=0;w<c;w++){const E=Math.round(l-v-1),T=f+g+y+w;let L=u[T];E>=0&&E<l&&(L=u[f+g+E*c+w]),r[T]=L}}}}return{dataId:s.write(r,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},Dbe=xh(t=>Math.floor(t)),U0t=vm(xx,Dbe),G0t={kernelName:xx,backendName:"cpu",kernelFunc:U0t},j0t=Jr((t,n)=>Math.floor(t/n)),H0t=$o(Ex,j0t,null,"int32"),W0t={kernelName:Ex,backendName:"cpu",kernelFunc:H0t},K0t={kernelName:GO,backendName:"cpu",kernelFunc:function q0t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r,bias:o,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=i;let g=ybe({inputs:{x:s,filter:r},backend:e,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(o){const v=g;if("NCHW"===u&&1===o.shape.length&&1!==o.shape[0]){const y=hr({inputs:{x:o},backend:e,attrs:{shape:[o.shape[0],1,1]}});g=$1({inputs:{a:g,b:y},backend:e}),e.disposeIntermediateTensorInfo(y)}else g=$1({inputs:{a:g,b:o},backend:e});e.disposeIntermediateTensorInfo(v)}if(f){const v=g;if("NCHW"===u&&"prelu"===f&&1===a.shape.length&&1!==a.shape[0]){const y=hr({inputs:{x:a},backend:e,attrs:{shape:[a.shape[0],1,1]}});g=aR(e,g,f,y,p),e.disposeIntermediateTensorInfo(y)}else g=aR(e,g,f,a,p);e.disposeIntermediateTensorInfo(v)}return g}},Y0t={kernelName:jO,backendName:"cpu",kernelFunc:function X0t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r,bias:o,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=i;let g=wbe({inputs:{x:s,filter:r},backend:e,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(o){const v=g;g=$1({inputs:{a:g,b:o},backend:e}),e.disposeIntermediateTensorInfo(v)}if(f){const v=g;g=aR(e,g,f,a,p),e.disposeIntermediateTensorInfo(v)}return g}};function Mbe(t,n,e,i,s,r,o,a,l){const c=xi([i,r],e);for(let u=0;u<i;u++){const d=[];let h=0;for(let f=0;f<s;f++){const p=t[u*s+f];h+=p*o[f],d.push(p)}if(h<0||h>=l/r)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let f=0;f<r;f++)c.values[u*r+f]=n.get(...n.indexToLoc(h*r+f))}return c}const Q0t={kernelName:RV,backendName:"cpu",kernelFunc:function Z0t(t){const{inputs:n,backend:e}=t,{params:i,indices:s}=n,r=at(i.shape),o=s.shape,a=o[o.length-1],[l,c,u,d]=o9(i,s);if(0===c)return e.makeTensorInfo(l,i.dtype,[]);const p=Mbe(e.data.get(s.dataId).values,e.bufferSync(i),i.dtype,c,a,u,d,i.shape,r);return e.makeTensorInfo(l,i.dtype,p.values)}};function Abe(t,n,e){const i=xi(e,t.dtype);for(let s=0;s<i.size;++s){const o=i.indexToLoc(s).slice(),c=n.locToIndex([o[0],o[2]]);o[2]=n.values[c];const u=t.locToIndex(o);0<=u&&u<t.values.length&&(i.values[s]=t.values[u])}return i}const ewt={kernelName:rO,backendName:"cpu",kernelFunc:function J0t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,indices:r}=n,{axis:o,batchDims:a}=i;gn([s,r],"gatherV2");const l=$i(o,s.shape)[0],c=e.data.get(r.dataId).values,u=s.shape[l];for(let T=0;T<c.length;++T){const L=c[T];le(L<=u-1&&L>=0,()=>`GatherV2: the index value ${L} is not in [0, ${u-1}]`)}let d=a;null==a&&(d=0);const h=at(r.shape),f=S9(s,r,l,d),p=hr({inputs:{x:s},backend:e,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),g=hr({inputs:{x:r},backend:e,attrs:{shape:[f.batchSize,h/f.batchSize]}}),v=[f.batchSize,f.outerSize,h/f.batchSize,f.sliceSize],y=e.bufferSync(g),E=Abe(e.bufferSync(p),y,v);return e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(g),e.makeTensorInfo(f.outputShape,E.dtype,E.values)}},Obe=Jr((t,n)=>t>n?1:0),twt=$o(oO,Obe,null,"bool"),nwt={kernelName:oO,backendName:"cpu",kernelFunc:twt},Nbe=Jr((t,n)=>t>=n?1:0),iwt=$o(Tx,Nbe,null,"bool"),swt={kernelName:Tx,backendName:"cpu",kernelFunc:iwt},owt={kernelName:FV,backendName:"cpu",kernelFunc:function rwt(t){const{inputs:n,backend:e}=t,{input:i}=n,s=at(i.shape),r=i.shape[i.shape.length-1],a=hr({inputs:{x:i},backend:e,attrs:{shape:[s/r,r]}}),l=kbe(a,!0,e),c=hr({inputs:{x:l},backend:e,attrs:{shape:i.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(l),c}},awt=$s(kx,t=>Number.isFinite(t)?1:0,"bool"),lwt={kernelName:kx,backendName:"cpu",kernelFunc:awt},cwt=$s(Dx,t=>Math.abs(t)===1/0?1:0,"bool"),uwt={kernelName:Dx,backendName:"cpu",kernelFunc:cwt},dwt=$s(Mx,t=>Number.isNaN(t)?1:0,"bool"),hwt={kernelName:Mx,backendName:"cpu",kernelFunc:dwt},Rbe=Jr((t,n)=>t<n?1:0),fwt=$o(lO,Rbe,null,"bool"),pwt={kernelName:lO,backendName:"cpu",kernelFunc:fwt},Fbe=Jr((t,n)=>t<=n?1:0),mwt=$o(cO,Fbe,null,"bool"),_wt={kernelName:cO,backendName:"cpu",kernelFunc:mwt};function Lbe(t,n,e){const i=(n-t)/(e-1),s=Aa(e,"float32");s[0]=t;for(let r=1;r<s.length;r++)s[r]=s[r-1]+i;return s}const bwt={kernelName:PV,backendName:"cpu",kernelFunc:function gwt(t){const{backend:n,attrs:e}=t,{start:i,stop:s,num:r}=e,o=Lbe(i,s,r);return n.makeTensorInfo([o.length],"float32",o)}},Pbe=xh(t=>Math.log(t)),vwt=vm(Ax,Pbe),ywt={kernelName:Ax,backendName:"cpu",kernelFunc:vwt},wwt=$s(Ox,t=>Math.log1p(t)),Swt={kernelName:Ox,backendName:"cpu",kernelFunc:wwt},Cwt=Jr((t,n)=>t&&n),xwt=$o(uO,Cwt,null,"bool"),Ewt={kernelName:uO,backendName:"cpu",kernelFunc:xwt},Twt=$s(dO,t=>t?0:1,"bool"),Iwt={kernelName:dO,backendName:"cpu",kernelFunc:Twt},kwt=Jr((t,n)=>t||n),Dwt=$o(hO,kwt,null,"bool"),Mwt={kernelName:hO,backendName:"cpu",kernelFunc:Dwt},Owt={kernelName:fO,backendName:"cpu",kernelFunc:function Awt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{depthRadius:r,bias:o,alpha:a,beta:l}=i;gn(s,"LRN");const c=s.shape[3],u=c-1,d=e.data.get(s.dataId).values,h=at(s.shape),f=new Float32Array(h);function p(g){const v=g%c;let y=g-v+Math.max(0,v-r);const w=g-v+Math.min(v+r,u);let E=0;for(;y<=w;y++){const T=d[y];E+=T*T}return E}for(let g=0;g<h;g++){const v=p(g),y=d[g]*Math.pow(o+a*v,-l);f[g]=y}return e.makeTensorInfo(s.shape,s.dtype,f)}},Rwt={kernelName:$V,backendName:"cpu",kernelFunc:function Nwt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,y:r,dy:o}=n,{depthRadius:a,bias:l,alpha:c,beta:u}=i;gn(o,"LRNGrad");const d=at(o.shape),h=o.shape[3],f=e.data.get(o.dataId).values,p=e.data.get(s.dataId).values,g=e.data.get(r.dataId).values,v=new Float32Array(d),y=d;for(let w=0;w<y;w++){const E=w%h,T=w-E+Math.max(0,E-a),L=w-E+Math.min(h,E+a+1);let W=0;for(let H=T;H<L;H++)W+=Math.pow(p[H],2);W=c*W+l;for(let H=T;H<L;H++){let P=-2*c*u*p[H]*g[w]/W;w===H&&(P+=Math.pow(W,-u)),P*=f[w],v[H]+=P}}return e.makeTensorInfo(o.shape,s.dtype,v)}};function $be(t,n,e,i){const s=ga(i,at(e));for(let r=0;r<s.length;++r){const o=r*n;let a=t[o];for(let l=0;l<n;++l){const c=t[o+l];(Number.isNaN(c)||c>a)&&(a=c)}s[r]=a}return s}function Bbe(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{reductionIndices:r,keepDims:o}=i,a=e;let l=s.shape;const c=l.length,u=$i(r,l);let d=u;const h=Nr(d,c);let f=a.data.get(s.dataId).values;if(null!=h){const T=new Array(c);for(let L=0;L<T.length;L++)T[L]=l[h[L]];f=RU(f,l,s.dtype,h,T),d=Zr(d.length,c),l=T}gn(s,"max"),ya("max",d,c);const[p,g]=ea(l,d),y=$be(f,at(g),p,s.dtype),w=a.write(y,p,s.dtype);let E=p;return o&&(E=Yr(p,u)),{dataId:w,shape:E,dtype:s.dtype}}const Fwt={kernelName:pO,backendName:"cpu",kernelFunc:Bbe},Vbe=Jr((t,n)=>Math.max(t,n)),Lwt=$o(Nx,Vbe),Pwt={kernelName:Nx,backendName:"cpu",kernelFunc:Lwt},Bwt={kernelName:mO,backendName:"cpu",kernelFunc:function $wt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n;gn(s,"maxPool");const{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=i;le(va(o,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`);const u=gu(s.shape,r,o,1,a,l);let d;if(1===u.filterWidth&&1===u.filterHeight&&Qi(u.inShape,u.outShape))d=Eh({inputs:{x:s},backend:e});else{const h=e.data.get(s.dataId).values,f=xn(s.shape),p=FU(h,0,s.dtype,f,u,"max");d=e.makeTensorInfo(u.outShape,s.dtype,p.values)}return d}},zwt={kernelName:_O,backendName:"cpu",kernelFunc:function Vwt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{filterSize:r,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=i;gn(s,"maxPool3d");const u=kf(s.shape,r,o,1,a,l,c),h=pbe(e.data.get(s.dataId).values,0,s.dtype,xn(s.shape),u,"max");return e.makeTensorInfo(h.shape,"float32",h.values)}},Gwt={kernelName:VV,backendName:"cpu",kernelFunc:function Uwt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,input:r}=n,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=i;gn([s,r],"maxPool3DGrad");const u=kf(r.shape,o,a,1,l,c),h=function t1t(t,n){const e=xi(n.outShape,"int32"),i=n.strideDepth,s=n.strideHeight,r=n.strideWidth,o=n.dilationDepth,a=n.dilationHeight,l=n.dilationWidth,c=n.effectiveFilterDepth,u=n.effectiveFilterHeight,d=n.effectiveFilterWidth,h=n.padInfo.front,f=n.padInfo.top,p=n.padInfo.left;for(let g=0;g<n.batchSize;++g)for(let v=0;v<n.inChannels;++v)for(let y=0;y<n.outDepth;++y){const w=y*i-h;let E=w;for(;E<0;)E+=o;const T=Math.min(n.inDepth,c+w);for(let L=0;L<n.outHeight;++L){const W=L*s-f;let H=W;for(;H<0;)H+=a;const P=Math.min(n.inHeight,u+W);for(let X=0;X<n.outWidth;++X){const ne=X*r-p;let me=ne;for(;me<0;)me+=l;const Ee=Math.min(n.inWidth,d+ne);let Te=Number.NEGATIVE_INFINITY,$e=-1;for(let Xe=E;Xe<T;Xe+=o){const Ce=Xe-w;for(let Fe=H;Fe<P;Fe+=a){const Ie=Fe-W;for(let He=me;He<Ee;He+=l){const Ve=He-ne,tt=t.get(g,Xe,Fe,He,v);tt>=Te&&(Te=tt,$e=Ce*u*d+Ie*u+Ve)}}}e.set($e,g,y,L,X,v)}}}return e}(e.bufferSync(r),u),f=u.strideDepth,p=u.strideHeight,g=u.strideWidth,v=u.dilationDepth,y=u.dilationHeight,w=u.dilationWidth,E=u.effectiveFilterDepth,T=u.effectiveFilterHeight,L=u.effectiveFilterWidth,W=E-1-u.padInfo.front,H=L-1-u.padInfo.left,P=T-1-u.padInfo.top,X=xi(r.shape,"float32"),ne=e.bufferSync(s);for(let me=0;me<u.batchSize;++me)for(let Ee=0;Ee<u.inChannels;++Ee)for(let Te=0;Te<u.inDepth;++Te)for(let $e=0;$e<u.inHeight;++$e)for(let Xe=0;Xe<u.inWidth;++Xe){const Ce=Te-W,Fe=$e-P,Ie=Xe-H;let He=0;for(let Ve=0;Ve<E;Ve+=v){const tt=(Ce+Ve)/f;if(!(tt<0||tt>=u.outDepth||Math.floor(tt)!==tt))for(let St=0;St<T;St+=y){const mt=(Fe+St)/p;if(!(mt<0||mt>=u.outHeight||Math.floor(mt)!==mt))for(let wt=0;wt<L;wt+=w){const Ft=(Ie+wt)/g;if(Ft<0||Ft>=u.outWidth||Math.floor(Ft)!==Ft)continue;const cn=E*T*L-1-h.get(me,tt,mt,Ft,Ee)===Ve*T*L+St*L+wt?1:0;0!==cn&&(He+=ne.get(me,tt,mt,Ft,Ee)*cn)}}}X.set(He,me,Te,$e,Xe,Ee)}return e.makeTensorInfo(X.shape,X.dtype,X.values)}},Hwt={kernelName:BV,backendName:"cpu",kernelFunc:function jwt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,input:r,output:o}=n,a=r;gn([r,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=i,h=gu(a.shape,l,c,1,u,d),f=e.data.get(a.dataId).values,p=xi(h.outShape,a.dtype,fbe(f,a.shape,a.dtype,h).values),g=h.strideHeight,v=h.strideWidth,y=h.dilationHeight,w=h.dilationWidth,E=h.effectiveFilterHeight,T=h.effectiveFilterWidth,L=T-1-h.padInfo.left,W=E-1-h.padInfo.top,H=xi(a.shape,"float32"),P=e.data.get(s.dataId).values,X=xi(s.shape,"float32",P);for(let ne=0;ne<h.batchSize;++ne)for(let me=0;me<h.inChannels;++me)for(let Ee=0;Ee<h.inHeight;++Ee)for(let Te=0;Te<h.inWidth;++Te){const $e=Ee-W,Xe=Te-L;let Ce=0;for(let Fe=0;Fe<E;Fe+=y){const Ie=($e+Fe)/g;if(!(Ie<0||Ie>=h.outHeight||Math.floor(Ie)!==Ie))for(let He=0;He<T;He+=w){const Ve=(Xe+He)/v;if(Ve<0||Ve>=h.outWidth||Math.floor(Ve)!==Ve)continue;const mt=E*T-1-p.get(ne,Ie,Ve,me)===Fe*T+He?1:0;0!==mt&&(Ce+=X.get(ne,Ie,Ve,me)*mt)}}H.set(Ce,ne,Ee,Te,me)}return e.makeTensorInfo(H.shape,H.dtype,H.values)}},qwt={kernelName:zV,backendName:"cpu",kernelFunc:({inputs:t,attrs:n,backend:e})=>{const{x:i}=t,{filterSize:s,strides:r,pad:o,includeBatchInIndex:a}=n,l=e;gn(i,"MaxPoolWithArgmax");const c=l.data.get(i.dataId).values,u=gu(i.shape,s,r,[1,1],o),[d,h]=function Wwt(t,n,e,i,s){const o=FU(t,0,e,xn(n),s,"max"),a=fbe(t,n,e,s,!0,i);return[o.values,a.values]}(c,i.shape,i.dtype,a,u),f=l.write(d,u.outShape,i.dtype),p=l.write(h,u.outShape,i.dtype);return[{dataId:f,shape:u.outShape,dtype:i.dtype},{dataId:p,shape:u.outShape,dtype:"int32"}]}},Xwt={kernelName:gO,backendName:"cpu",kernelFunc:function Kwt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i,a=$i(r,s.shape),u=at(ea(s.shape,a)[1]),d=[],h=e.makeTensorInfo([],"float32",new Float32Array([u]));d.push(h);const f=ym({inputs:{x:s},backend:e,attrs:{dtype:"float32"}});d.push(f);const p=$U({inputs:{a:f,b:h},backend:e});d.push(p);const g=$E({inputs:{x:p},backend:e,attrs:{axis:r,keepDims:o}});return d.forEach(v=>e.disposeIntermediateTensorInfo(v)),g}},Zwt={kernelName:bO,backendName:"cpu",kernelFunc:function Ywt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i;gn(s,"min");const a=$i(r,s.shape);let l=a;const c=Nr(l,s.shape.length);let u=s;null!=c&&(u=kl({inputs:{x:s},backend:e,attrs:{perm:c}}),l=Zr(l.length,s.shape.length)),ya("min",l,u.shape.length);const[d,h]=ea(u.shape,l),f=at(h),p=Aa(at(d),u.dtype),g=e.data.get(u.dataId).values;for(let y=0;y<p.length;++y){const w=y*f;let E=g[w];for(let T=0;T<f;++T){const L=g[w+T];(Number.isNaN(L)||L<E)&&(E=L)}p[y]=E}null!=c&&e.disposeIntermediateTensorInfo(u);const v=e.makeTensorInfo(d,u.dtype,p);if(o){const w=hr({inputs:{x:v},backend:e,attrs:{shape:Yr(d,a)}});return e.disposeIntermediateTensorInfo(v),w}return v}},zbe=Jr((t,n)=>Math.min(t,n)),Qwt=$o(Rx,zbe),Jwt={kernelName:Rx,backendName:"cpu",kernelFunc:Qwt},tSt={kernelName:vO,backendName:"cpu",kernelFunc:function eSt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{paddings:r,mode:o}=i;gn(s,"mirrorPad");const a=r.map((E,T)=>E[0]+s.shape[T]+E[1]),l=r.map(E=>E[0]),c=r.map((E,T)=>E[0]+s.shape[T]),u="reflect"===o?0:1,d=e.data.get(s.dataId).values,h=s.shape.length,f=xn(s.shape),p=at(a),g=a.length,v=xn(a),y=ga(s.dtype,p);for(let E=0;E<p;E++){let T=l1(E,g,v);for(let W=0;W<g;W++)T[W]<l[W]?T[W]=2*l[W]-T[W]-u:T[W]>=c[W]&&(T[W]=2*(c[W]-1)-T[W]+u);T=T.map((W,H)=>W-l[H]);const L=uh(T,h,f);y[E]=d[L]}return{dataId:e.write(y,a,s.dtype),shape:a,dtype:s.dtype}}},nSt=Jr((t,n)=>{const e=t%n;return t<0&&n<0||t>=0&&n>=0?e:(e+n)%n}),iSt=$o(Fx,nSt),sSt={kernelName:Fx,backendName:"cpu",kernelFunc:iSt};function Ube(t){const{inputs:n,backend:e,attrs:i}=t,{logits:s}=n,{dim:r}=i,o=s.shape.length;let a=r;if(-1===a&&(a=o-1),a!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${a}`);const l=$i([a],s.shape),c=Bbe({inputs:{x:s},backend:e,attrs:{reductionIndices:l,keepDims:!1}}),u=Yr(c.shape,l),d=hr({inputs:{x:c},backend:e,attrs:{shape:u}}),h=VU({inputs:{a:s,b:d},backend:e}),f=Ebe({inputs:{x:h},backend:e}),p=$E({inputs:{x:f},backend:e,attrs:{axis:l,keepDims:!1}}),g=hr({inputs:{x:p},backend:e,attrs:{shape:u}}),v=$U({inputs:{a:f,b:g},backend:e});return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(g),v}const rSt={kernelName:PO,backendName:"cpu",kernelFunc:Ube},aSt={kernelName:UV,backendName:"cpu",kernelFunc:function oSt(t){const{inputs:n,backend:e,attrs:i}=t,{logits:s}=n,{numSamples:r,seed:o,normalized:a}=i;gn(s,"multinomial");const l=a?s:Ube({inputs:{logits:s},backend:e,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=e.data.get(l.dataId).values,h=[c,r],f=Aa(at(h),"int32");for(let p=0;p<c;++p){const g=p*u,v=new Float32Array(u-1);v[0]=d[g];for(let E=1;E<v.length;++E)v[E]=v[E-1]+d[g+E];const y=T1.alea(o.toString()),w=p*r;for(let E=0;E<r;++E){const T=y();f[w+E]=v.length;for(let L=0;L<v.length;L++)if(T<v[L]){f[w+E]=L;break}}}return a||e.disposeIntermediateTensorInfo(l),e.makeTensorInfo(h,"int32",f)}};function Gbe(t,n,e){const i=Xp(-1,e);return PU([],n,i,t,e)}const cSt={kernelName:yO,backendName:"cpu",kernelFunc:function lSt(t){const{inputs:n,backend:e}=t,{x:i}=n;gn(i,"neg");const s=e.data.get(i.dataId).values,[r,o]=Gbe(s,i.shape,i.dtype);return e.makeTensorInfo(o,i.dtype,r)}},uSt=K7,hSt={kernelName:GV,backendName:"cpu",kernelFunc:function dSt(t){const{inputs:n,backend:e,attrs:i}=t,{boxes:s,scores:r}=n,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=i;gn(s,"NonMaxSuppression");const c=e.data.get(s.dataId).values,u=e.data.get(r.dataId).values,{selectedIndices:d}=uSt(c,u,o,a,l);return e.makeTensorInfo([d.length],"int32",new Int32Array(d))}},fSt=X7,mSt={kernelName:jV,backendName:"cpu",kernelFunc:function pSt(t){const{inputs:n,backend:e,attrs:i}=t,{boxes:s,scores:r}=n,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=i;gn(s,"NonMaxSuppressionPadded");const u=e.data.get(s.dataId).values,d=e.data.get(r.dataId).values,{selectedIndices:h,validOutputs:f}=fSt(u,d,o,a,l,c);return[e.makeTensorInfo([h.length],"int32",new Int32Array(h)),e.makeTensorInfo([],"int32",new Int32Array([f]))]}},_St=Y7,bSt={kernelName:HV,backendName:"cpu",kernelFunc:function gSt(t){const{inputs:n,backend:e,attrs:i}=t,{boxes:s,scores:r}=n,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=i;gn(s,"NonMaxSuppressionWithScore");const u=e.data.get(s.dataId).values,d=e.data.get(r.dataId).values,h=o,f=a,p=l,g=c,{selectedIndices:v,selectedScores:y}=_St(u,d,h,f,p,g);return[e.makeTensorInfo([v.length],"int32",new Int32Array(v)),e.makeTensorInfo([y.length],"float32",new Float32Array(y))]}},jbe=Jr((t,n)=>t!==n?1:0),vSt=$o(wO,jbe,null,"bool"),ySt={kernelName:wO,backendName:"cpu",kernelFunc:vSt},SSt={kernelName:CO,backendName:"cpu",kernelFunc:function wSt(t){const{inputs:n,backend:e,attrs:i}=t,{indices:s}=n,{dtype:r,depth:o,onValue:a,offValue:l}=i;gn(s,"oneHot");const c=at(s.shape),u=new Float32Array(c*o);u.fill(l);const d=e.data.get(s.dataId).values;for(let h=0;h<c;++h)d[h]>=0&&d[h]<o&&(u[h*o+d[h]]=a);return e.makeTensorInfo([...s.shape,o],r,u)}};function dR(t){const{inputs:n,backend:e}=t,{x:i}=n;if("string"===i.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===i.dtype){const s=Zg({inputs:{input:i},backend:e}),r=dR({inputs:{x:s},backend:e}),o=B1({inputs:{input:i},backend:e}),a=dR({inputs:{x:o},backend:e}),l=uc({inputs:{real:r,imag:a},backend:e});return e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(a),l}return UU({backend:e,attrs:{shape:i.shape,value:0,dtype:i.dtype}})}const CSt={kernelName:zO,backendName:"cpu",kernelFunc:dR},xSt={kernelName:SO,backendName:"cpu",kernelFunc:function Hbe(t){const{inputs:n,backend:e}=t,{x:i}=n;if("string"===i.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===i.dtype){const s=Zg({inputs:{input:i},backend:e}),r=Hbe({inputs:{x:s},backend:e}),o=B1({inputs:{input:i},backend:e}),a=dR({inputs:{x:o},backend:e}),l=uc({inputs:{real:r,imag:a},backend:e});return e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(a),l}return UU({backend:e,attrs:{shape:i.shape,value:1,dtype:i.dtype}})}};function Wbe(t){const{inputs:n,backend:e,attrs:i}=t,{axis:s}=i;if(1===n.length)return uR({inputs:{input:n[0]},backend:e,attrs:{dim:s}});const r=n[0].shape,o=n[0].dtype;n.forEach(u=>{tc(r,u.shape,"All tensors passed to stack must have matching shapes"),le(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],c=V1({inputs:n.map(u=>{const d=uR({inputs:{input:u},backend:e,attrs:{dim:s}});return a.push(d),d}),backend:e,attrs:{axis:s}});return a.forEach(u=>e.disposeIntermediateTensorInfo(u)),c}const ESt={kernelName:xO,backendName:"cpu",kernelFunc:Wbe},qbe={kernelName:EO,backendName:"cpu",kernelFunc:function TSt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{paddings:r,constantValue:o}=i;gn(s,"pad");const a=r.map((w,E)=>w[0]+s.shape[E]+w[1]),l=r.map(w=>w[0]),c=e.data.get(s.dataId).values,u=at(s.shape),d=s.shape.length,h=xn(s.shape),f=at(a),p=a.length,g=xn(a),v=ga(s.dtype,f);0!==o&&v.fill(o);for(let w=0;w<u;w++)v[uh(l1(w,d,h).map((W,H)=>W+l[H]),p,g)]=c[w];return{dataId:e.write(v,a,s.dtype),shape:a,dtype:s.dtype}}},ISt=Jr((t,n)=>Math.pow(t,n)),kSt=$o(Px,ISt),DSt={kernelName:Px,backendName:"cpu",kernelFunc:kSt};function Kbe(t,n,e,i){const[s,r]=ea(t,i),o=nc(n,"int32"),a=Aa(at(s),o),l=at(r);for(let c=0;c<a.length;++c){const u=c*l;let d=1;for(let h=0;h<l;++h)d*=e[u+h];a[c]=d}return{outVals:a,outShape:s,outDtype:o}}const ASt={kernelName:IO,backendName:"cpu",kernelFunc:function MSt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i;gn(s,"prod");const a=s.shape.length,l=$i(r,s.shape),c=Nr(l,a);let u=l,d=s;const h=[];null!=c&&(d=kl({inputs:{x:s},backend:e,attrs:{perm:c}}),h.push(d),u=Zr(u.length,a));const f=e.data.get(d.dataId).values,{outVals:p,outShape:g,outDtype:v}=Kbe(d.shape,d.dtype,f,u);let y=g;return o&&(y=Yr(g,l)),h.forEach(w=>e.disposeIntermediateTensorInfo(w)),e.makeTensorInfo(y,v,p)}};function Xbe(t,n){const e=t.slice(0,n);for(;e.length<n;)e.push(1);for(let i=n;i<t.length;i++)e[n-1]*=t[i];return e}function Ybe(t,n,e,i,s,r,o,a){if(0===t.length)throw new Error("paramsNestedSplits must be non empty");if(0===n[0].length)throw new Error("Split tensors must not be scalars");if(function OSt(t,n,e){t.forEach((i,s)=>{if(i<0||i>=e){const r=l1(s,n.length,xn(n)).join(",");throw new Error(`indices[${r}] = ${i} is not in [0, ${e})`)}})}(r,o,n[0][0]-1),0===i.length)throw new Error("params.rank must be nonzero");const c=i[0],{outSplits:u,valueSlices:d,numValues:h}=function RSt(t,n,e,i){const s=[];let r=0;const a=new Array(n.length-1+e.length).fill(null).map(()=>[0]);!function NSt(t,n){for(let e=0;e<t.length;++e){const i=t[e],s=e===t.length-1?n:t[e+1].length;if(0===i.length)throw new Error("Ragged splits may not be empty");if(i[0]<0)throw new Error("Ragged splits must be non-negative");if(i[i.length-1]>s)throw new Error("Ragged splits must not point past values");for(let r=1;r<i.length;++r)if(i[r-1]>i[r])throw new Error("Ragged splits must be sorted in ascending order")}}(e,i);let l=1;for(let c=0;c<n.length-1;++c){l*=n[c];const u=n[c+1];for(let d=1;d<l+1;++d)a[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let h=0;h<e.length;++h){const f=e[h],p=h+n.length-1;if(p>=0){const g=a[p],v=g[g.length-1]-f[u];for(let y=u;y<d;++y)a[p].push(f[y+1]+v)}u=f[u],d=f[d]}d!==u&&(s.push([u,d]),r+=d-u)}return{outSplits:a,valueSlices:s,numValues:r}}(r,o,t,c),f=function FSt(t){const n=[];for(let e=0;e<t.length;++e){const s=Kr("int32",t[e].length);n.push(s),t[e].forEach((r,o)=>s[o]=r)}return n}(u),p=function PSt(t,n,e,i,s){const r=n.slice();r[0]=s;const o=Kr(e,at(r)),a=t.length;return function LSt(t,n,e,i,s,r){const o=Xbe(n,2)[1],a=Xbe(r,2)[1];let l=0;for(const c of e)for(let u=c[0];u<c[1];++u){for(let d=0;d<i;++d)s[l*a+d]=t[u*o+d];++l}}(t,n,i,0===a?0:a/n[0],o,r),[o,r]}(e,i,s,d,h);return[f,p[0],p[1]]}const BSt={kernelName:WV,backendName:"cpu",kernelFunc:function $St(t){const{inputs:n,backend:e,attrs:i}=t,{paramsNestedSplits:s,paramsDenseValues:r,indices:o}=n,l=s.map(y=>e.data.get(y.dataId).values),c=s.map(y=>y.shape),u=e.data.get(r.dataId).values,d=e.data.get(o.dataId).values,[h,f,p]=Ybe(l,c,u,r.shape,r.dtype,d,o.shape),g=h.map(y=>e.makeTensorInfo([y.length],"int32",y)),v=e.makeTensorInfo(p,r.dtype,f);return g.concat([v])}},Zbe=2147483647;function Qbe(t,n,e,i,s,r,o){if(n.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=0===n.length,l=0===s.length,c=0===o.length,u=[];a||u.push(n[0]),l||u.push(s[0]),c||u.push(o[0]);for(let v=1;v<u.length;++v)if(u[v]!==u[v-1])throw new Error("starts, limits, and deltas must have the same shape");const d=0===u.length?1:u[0],h=Kr("int32",d+1);h[0]=0;for(let v=0;v<d;++v){const y=a?t[0]:t[v],w=l?i[0]:i[v],E=c?r[0]:r[v];if(0===E)throw new Error("Requires delta != 0");let T;if(E>0&&w<y||E<0&&w>y)T=0;else if(T=Math.ceil(Math.abs((w-y)/E)),T>Zbe)throw new Error(`Requires ((limit - start) / delta) <= ${Zbe}`);h[v+1]=h[v]+T}const p=Kr(e,h[d]);let g=0;for(let v=0;v<d;++v){const y=h[v+1]-h[v];let w=a?t[0]:t[v];const E=c?r[0]:r[v];for(let T=0;T<y;++T)p[g++]=w,w+=E}return[h,p]}const zSt={kernelName:qV,backendName:"cpu",kernelFunc:function VSt(t){const{inputs:n,backend:e}=t,{starts:i,limits:s,deltas:r}=n,o=e.data.get(i.dataId).values,a=e.data.get(s.dataId).values,l=e.data.get(r.dataId).values,[c,u]=Qbe(o,i.shape,i.dtype,a,s.shape,l,r.shape);return[e.makeTensorInfo([c.length],"int32",c),e.makeTensorInfo([u.length],i.dtype,u)]}};var ku=gh;class hR{constructor(n,e,i,s,r,o,a,l,c,u){this.shape=n,this.shapeShape=e,this.values=i,this.valuesShape=s,this.valuesDType=r,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=xme(u),this.raggedRank=Eme(this.rowPartitionTypes)}getRowPartitionTypeByDimension(n){return this.rowPartitionTypes[0]===ku.FIRST_DIM_SIZE?this.rowPartitionTypes[n+1]:this.rowPartitionTypes[n]}getRowPartitionTensor(n){return this.rowPartitionTypes[0]===ku.FIRST_DIM_SIZE?this.rowPartitionValues[n+1]:this.rowPartitionValues[n]}getMaxWidth(n){const e=this.getRowPartitionTensor(n-1);switch(this.getRowPartitionTypeByDimension(n-1)){case ku.VALUE_ROWIDS:return hR.getMaxWidthValueRowID(e);case ku.ROW_SPLITS:return hR.getMaxWidthRowSplit(e);default:throw new Error(`Cannot handle partition type ${ku[this.getRowPartitionTypeByDimension(n-1)]}`)}}static getMaxWidthRowSplit(n){const e=n.length;if(0===e||1===e)return 0;let i=0;for(let s=0;s<e-1;++s){const r=n[s+1]-n[s];r>i&&(i=r)}return i}static getMaxWidthValueRowID(n){const e=n.length;if(0===e)return 0;let i=0,s=n[0],r=0;for(let o=1;o<e;++o){const a=n[o];a!==s&&(s=a,r=Math.max(o-i,r),i=o)}return Math.max(e-i,r)}tensorShapeFromTensor(n,e,i=!0){if(0===e.length){if(-1===n[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return eve(n,i)}calculateOutputSize(n){const e=this.valuesShape;Tme(this.defaultValueShape,e);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=Cme(this.raggedRank,s,e);o[0]<0&&(o[0]=n);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(n,e,i){const s=Math.min(n,i),r=[];let o=0;for(let a=0;a<s;++a,o+=e)r.push(o);for(let a=s;a<n;++a)r.push(-1);return le(r.length===n,()=>"Final length of result must be equal to firstDimension."),r}calculateOutputIndexRowSplit(n,e,i,s){const r=n.length,o=[];for(let a=0;a<r-1;++a){const l=n[a+1]-n[a];let c=Math.min(s,l),u=e[a];-1===u&&(c=0);for(let d=0;d<c;++d)o.push(u),u+=i;for(let d=0;d<l-c;++d)o.push(-1)}if(r>0&&o.length!==n[r-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(n,e,i,s){const r=n.length,o=[];if(0===r)return[];let a=0,l=n[0];if(l>=e.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${e.length}`);let c=e[l];o.push(c);for(let u=1;u<r;++u){const d=n[u];if(d===l)c>=0&&(++a,a<s?c+=i:c=-1);else{if(a=0,l=d,d>=e.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${e.length}`);c=e[d]}o.push(c)}if(o.length!==n.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(n,e,i,s){const r=this.getRowPartitionTensor(n),o=this.getRowPartitionTypeByDimension(n);switch(o){case ku.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(r,e,i,s);case ku.ROW_SPLITS:if(r.length-1>e.length)throw new Error(`Row partition size is greater than output size: ${r.length-1} > ${e.length}`);return this.calculateOutputIndexRowSplit(r,e,i,s);default:throw new Error(`Unsupported partition type: ${ku[o]}`)}}getFirstDimensionSize(){const n=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const e=this.rowPartitionTypes[0];switch(e){case ku.FIRST_DIM_SIZE:return n[0];case ku.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case ku.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${ku[e]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),i=this.calculateOutputSize(e),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*i[l+1];const r=eve(i,!1),o=Kr(this.valuesDType,at(r));if(s[0]*i[0]>0){let l=this.calculateFirstParentOutputIndex(e,s[0],i[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,s[c],i[c]);this.setOutput(this.raggedRank,l,o,r)}return[r,o]}setOutput(n,e,i,s){if(0===i.length)return;const r=this.values,o=i;let a=s.slice();a=a.slice(n+1);const l=at(a),c=e.length;let u=this.defaultValue;if(u.length!==l&&1!==u.length){const p=this.defaultValueShape;et(()=>{const g=Ge(u,p);u=S1(g,a).dataSync()})}let d=0,h=0,f=0;for(let p=0;p<=c;++p){let g=p<c?e[p]:-1;if(g!==f){if(h<f){const v=r.subarray(d*l);Jbe(o.subarray(h*l),v,(f-h)*l)}if(p>=c&&(g=Math.floor(i.length/l)),g>f)if(1===this.defaultValue.length)o.subarray(f*l,g*l).fill(this.defaultValue[0]),f=g;else for(;g>f;)Jbe(o.slice(f*l),u,l),++f;g<0?(d=p+1,h=f):(d=p,h=f,f=h+1)}else++f}}}function Jbe(t,n,e){for(let i=0;i<e;i++)t[i]=n[i]}function eve(t,n){const e=[];for(let i of t){if(i<0){if(!n)throw new Error(`Dimension ${i} must be >= 0`);if(i<-1)throw new Error(`Dimension ${i} must be >= -1`);i=-1}e.push(i)}return e}function tve(t,n,e,i,s,r,o,a,l,c){return new hR(t,n,e,i,s,r,o,a,l,c).compute()}const GSt={kernelName:KV,backendName:"cpu",kernelFunc:function USt(t){const{inputs:n,backend:e,attrs:i}=t,{shape:s,values:r,defaultValue:o,rowPartitionTensors:a}=n,{rowPartitionTypes:l}=i,c=e.data.get(s.dataId).values,u=e.data.get(r.dataId).values,d=e.data.get(o.dataId).values,h=a.map(v=>e.data.get(v.dataId).values),f=a.map(v=>v.shape),[p,g]=tve(c,s.shape,u,r.shape,r.dtype,d,o.shape,h,f,l);return e.makeTensorInfo(p,r.dtype,g)}};function nve(t,n,e,i){if(t===n||t<n&&e<0||n<t&&e>1)return Aa(0,i);const l=Aa(Math.abs(Math.ceil((n-t)/e)),i);n<t&&1===e&&(e=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+e;return l}const HSt={kernelName:XV,backendName:"cpu",kernelFunc:function jSt(t){const{backend:n,attrs:e}=t,{start:i,stop:s,dtype:r,step:o}=e,a=nve(i,s,o,r);return n.makeTensorInfo([a.length],r,a)}},WSt=$s($x,t=>1/t),qSt={kernelName:$x,backendName:"cpu",kernelFunc:WSt},XSt={kernelName:MO,backendName:"cpu",kernelFunc:function KSt(t){const{inputs:n,backend:e,attrs:i}=t,{images:s}=n,{alignCorners:r,halfPixelCenters:o,size:a}=i;gn(s,"resizeBilinear");const l=xn(s.shape),[c,u]=a,[d,h,f,p]=s.shape,g=e.data.get(s.dataId).values,v=new Float32Array(at([d,c,u,p])),y=[r&&c>1?h-1:h,r&&u>1?f-1:f],w=[r&&c>1?c-1:c,r&&u>1?u-1:u];let E=0;const T=y[0]/w[0],L=y[1]/w[1];for(let W=0;W<d;W++)for(let H=0;H<c;H++){let P;P=o?T*(H+.5)-.5:T*H;const X=Math.max(0,Math.floor(P)),ne=P-X,me=Math.min(h-1,Math.ceil(P)),Ee=W*l[0]+X*l[1],Te=W*l[0]+me*l[1];for(let $e=0;$e<u;$e++){let Xe;Xe=o?L*($e+.5)-.5:L*$e;const Ce=Math.max(0,Math.floor(Xe)),Fe=Xe-Ce,Ie=Math.min(f-1,Math.ceil(Xe)),He=Ee+Ce*l[2],Ve=Te+Ce*l[2],tt=Ee+Ie*l[2],St=Te+Ie*l[2];for(let mt=0;mt<p;mt++){const wt=g[He+mt],Ft=g[Ve+mt],cn=wt+(g[tt+mt]-wt)*Fe;v[E++]=cn+(Ft+(g[St+mt]-Ft)*Fe-cn)*ne}}}return e.makeTensorInfo([d,c,u,p],"float32",v)}},ZSt={kernelName:QV,backendName:"cpu",kernelFunc:function YSt(t){const{inputs:n,backend:e,attrs:i}=t,{images:s,dy:r}=n,{alignCorners:o}=i;gn([r,s],"resizeBilinearGrad");const a=xn(s.shape),[l,c,u,d]=s.shape,[,h,f]=r.shape,p=new Float32Array(l*c*u*d),g=[o&&h>1?c-1:c,o&&f>1?u-1:u],v=[o&&h>1?h-1:h,o&&f>1?f-1:f],y=g[0]/v[0],w=g[1]/v[1],E=e.data.get(r.dataId).values;let T=0;for(let L=0;L<l;L++){const W=L*a[0];for(let H=0;H<h;H++){const P=H*y,X=Math.floor(P),ne=Math.min(Math.ceil(P),c-1),me=W+X*a[1],Ee=W+ne*a[1],Te=P-X,$e=1-Te;for(let Xe=0;Xe<f;Xe++){const Ce=Xe*w,Fe=Math.floor(Ce),Ie=Math.min(Math.ceil(Ce),u-1),He=Ce-Fe,Ve=1-He,tt=me+Fe*a[2],St=me+Ie*a[2],mt=Ee+Fe*a[2],wt=Ee+Ie*a[2],Ft=$e*Ve,Dt=$e*He,Ut=Te*Ve,cn=Te*He;for(let Jt=0;Jt<d;Jt++){const Nn=E[T++];p[tt+Jt]+=Nn*Ft,p[St+Jt]+=Nn*Dt,p[mt+Jt]+=Nn*Ut,p[wt+Jt]+=Nn*cn}}}}return e.makeTensorInfo([l,u,c,d],"float32",p)}},JSt={kernelName:DO,backendName:"cpu",kernelFunc:function QSt(t){const{inputs:n,backend:e,attrs:i}=t,{images:s}=n,{alignCorners:r,halfPixelCenters:o,size:a}=i;gn(s,"resizeNearestNeighbor");const l=xn(s.shape),[c,u]=a,[d,h,f,p]=s.shape,g=e.data.get(s.dataId).values,v=new Float32Array(d*c*u*p),y=[r&&c>1?h-1:h,r&&u>1?f-1:f],w=[r&&c>1?c-1:c,r&&u>1?u-1:u],E=y[0]/w[0],T=y[1]/w[1];let L=0;for(let W=0;W<d;W++){const H=W*l[0];for(let P=0;P<c;P++){const X=o?E*(P+.5):E*P;let ne=Math.min(h-1,r?Math.round(X):Math.floor(X));o&&(ne=Math.max(0,ne));const me=H+ne*l[1];for(let Ee=0;Ee<u;Ee++){const Te=o?T*(Ee+.5):T*Ee;let $e=Math.min(f-1,r?Math.round(Te):Math.floor(Te));o&&($e=Math.max(0,$e));const Xe=me+$e*l[2];for(let Ce=0;Ce<p;Ce++)v[L++]=g[Xe+Ce]}}}return e.makeTensorInfo([d,c,u,p],s.dtype,v)}},tCt={kernelName:ZV,backendName:"cpu",kernelFunc:function eCt(t){const{inputs:n,backend:e,attrs:i}=t,{images:s,dy:r}=n,{alignCorners:o}=i;gn([r,s],"resizeNearestNeighborGrad");const a=xn(s.shape),l=xn(r.shape),[c,u,d,h]=s.shape,[,f,p]=r.shape,g=new Float32Array(c*u*d*h),v=e.data.get(r.dataId).values,y=[o&&f>1?u-1:u,o&&p>1?d-1:d],w=[o&&f>1?f-1:f,o&&p>1?p-1:p],E=y[0]/w[0],T=y[1]/w[1],L=1/E,W=1/T,H=2*Math.ceil(L)+2,P=2*Math.ceil(W)+2;for(let X=0;X<c;X++){const ne=X*a[0];for(let me=0;me<u;me++){const Ee=ne+me*a[1],Te=Math.floor(me*L),$e=Math.floor(Te-H/2);for(let Xe=0;Xe<d;Xe++){const Ce=Ee+Xe*a[2],Fe=Math.floor(Xe*W),Ie=Math.floor(Fe-P/2);for(let He=0;He<h;He++){let Ve=0;for(let tt=0;tt<H;tt++){const St=tt+$e;if(St<0||St>=f)continue;const mt=ne+St*l[1],wt=St*E;if(me===Math.min(u-1,o?Math.round(wt):Math.floor(wt)))for(let Dt=0;Dt<P;Dt++){const Ut=Dt+Ie;if(Ut<0||Ut>=p)continue;const cn=mt+Ut*l[2],Jt=Ut*T;Xe===Math.min(d-1,o?Math.round(Jt):Math.floor(Jt))&&(Ve+=v[cn+He])}}g[Ce+He]=Ve}}}}return e.makeTensorInfo(s.shape,s.dtype,g)}},iCt={kernelName:AO,backendName:"cpu",kernelFunc:function nCt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{dims:r}=i;gn(s,"reverse");const o=s.shape.length,a=$i(r,s.shape);if(0===o)return Eh({inputs:{x:s},backend:e});const l=new Mo(s.shape,s.dtype),c=e.bufferSync(s);for(let u=0;u<l.size;u++){const d=l.indexToLoc(u),h=d.slice();a.forEach(f=>h[f]=s.shape[f]-1-h[f]),l.set(c.get(...h),...d)}return e.makeTensorInfo(l.shape,l.dtype,l.values)}},sCt={kernelName:_z,backendName:"cpu",kernelFunc:({inputs:t,attrs:n,backend:e})=>{const{image:i}=t,{radians:s,fillValue:r,center:o}=n,a=e,l=ga(i.dtype,at(i.shape)),[c,u,d,h]=i.shape,[f,p]=i9(o,u,d),v=Math.sin(s),y=Math.cos(s),w=a.data.get(i.dataId).values;for(let T=0;T<c;T++){const L=T*d*u*h;for(let W=0;W<u;W++){const H=W*(d*h);for(let P=0;P<d;P++){const X=P*h;for(let ne=0;ne<h;ne++){const me=[c,W,P,ne],Ee=me[2],Te=me[1];let $e=(Ee-f)*y-(Te-p)*v,Xe=(Ee-f)*v+(Te-p)*y;$e=Math.round($e+f),Xe=Math.round(Xe+p);let Ce=r;"number"!=typeof r&&(Ce=3===ne?255:r[ne]),$e>=0&&$e<d&&Xe>=0&&Xe<u&&(Ce=w[L+Xe*(d*h)+$e*h+ne]),l[L+H+X+ne]=Ce}}}}return{dataId:a.write(l,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},rCt=$s(zx,t=>{const n=Math.floor(t);return t-n<.5?Math.floor(t):t-n>.5?Math.ceil(t):n%2==0?n:n+1}),oCt={kernelName:zx,backendName:"cpu",kernelFunc:rCt},ive=xh(t=>1/Math.sqrt(t)),aCt=vm(Ux,ive),lCt={kernelName:Ux,backendName:"cpu",kernelFunc:aCt};function Jg(t,n,e,i,s,r,o,a,l,c){const u=[i/s,s],d=t.values,h=n.values;if(0===i)return xi(e,n.dtype);const f=l instanceof Mo?l:xi(u,n.dtype);"string"==typeof l||"number"==typeof l?f.values.fill(l):"boolean"==typeof l&&f.values.fill(+l);for(let p=0;p<r;p++){const g=[];let v=0;for(let y=0;y<o;y++){const w=d[p*o+y];g.push(w),v+=w*a[y]}if(v<0||v>=i/s)throw new Error(`Invalid indices: ${g} does not index into ${e}`);for(let y=0;y<s;y++)c?f.values[v*s+y]+=h[p*s+y]:f.values[v*s+y]=0===n.rank?h[0]:h[p*s+y]}return f}const uCt={kernelName:JV,backendName:"cpu",kernelFunc:function cCt(t){const{inputs:n,backend:e,attrs:i}=t,{indices:s,updates:r}=n,{shape:o}=i,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Ug(0,s,o),g=Jg(e.bufferSync(s),e.bufferSync(r),o,d,c,l,a,u,0,!0);return e.makeTensorInfo(o,g.dtype,g.values)}};function dCt(t,n){let e=0,i=t.length,s=0;for(;e<i;)s=Math.floor((e+i)/2),t[s]<n?e=s+1:i=s;return i}function hCt(t,n){let e=0,i=t.length,s=0;for(;e<i;)s=Math.floor((e+i)/2),t[s]<=n?e=s+1:i=s;return i}const mCt={kernelName:tz,backendName:"cpu",kernelFunc:function pCt(t){const{inputs:n,backend:e,attrs:i}=t,{sortedSequence:s,values:r}=n,{side:o}=i,c=function fCt(t,n,e,i,s,r){const o=Kr("int32",e*s);for(let a=0;a<e;++a){const l=t.slice(a*i,(a+1)*i),c=a*s;for(let u=0;u<s;++u)o[c+u]="left"===r?dCt(l,n[u+c]):hCt(l,n[u+c])}return o}(e.data.get(s.dataId).values,e.data.get(r.dataId).values,s.shape[0],s.shape[1],r.shape[1],o);return e.makeTensorInfo(r.shape,"int32",c)}},gCt={kernelName:OO,backendName:"cpu",kernelFunc:function _Ct(t){const{inputs:n,backend:e}=t,{condition:i,t:s,e:r}=n;gn([i,s,r],"select");const o=i.shape.length,a=e.data.get(i.dataId).values,l=e.data.get(s.dataId).values,c=e.data.get(r.dataId).values,u=nc(s.dtype,r.dtype),d=Aa(at(s.shape),u);let h=0;const f=0===o||o>1||1===s.shape.length?1:at(s.shape.slice(1));for(let p=0;p<a.length;p++)for(let g=0;g<f;g++)d[h++]=1===a[p]?l[p]:c[p];return e.makeTensorInfo(s.shape,u,d)}},bCt=TN,vCt=IN,yCt=$s(Gx,t=>t>=0?vCt*t:bCt*(Math.exp(t)-1)),wCt={kernelName:Gx,backendName:"cpu",kernelFunc:yCt},SCt=$s(Wx,t=>t<0?-1:t>0?1:0),CCt={kernelName:Wx,backendName:"cpu",kernelFunc:SCt},xCt=$s(jx,t=>Math.sin(t)),ECt={kernelName:jx,backendName:"cpu",kernelFunc:xCt},TCt=$s(Hx,t=>Math.sinh(t)),ICt={kernelName:Hx,backendName:"cpu",kernelFunc:TCt},sve=Math.log(1.1920928955078125e-7)+2,kCt=$s(Kx,t=>{const n=t>-sve,e=t<sve,i=Math.exp(t);let s;return s=e?i:n?t:Math.log(1+i),s}),DCt={kernelName:Kx,backendName:"cpu",kernelFunc:kCt},ACt={kernelName:FO,backendName:"cpu",kernelFunc:function MCt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{blockShape:r,paddings:o}=i;gn([s],"spaceToBatchND");const a=at(r),l=[[0,0]];l.push(...o);for(let W=1+r.length;W<s.shape.length;++W)l.push([0,0]);const c=qbe.kernelFunc({inputs:{x:s},backend:e,attrs:{paddings:l,constantValue:0}}),u=wE(c.shape,r,a,!1),d=SE(u.length,r.length,!1),h=CE(c.shape,r,a,!1),g=hr({inputs:{x:c},backend:e,attrs:{shape:u}}),w=kl({inputs:{x:g},backend:e,attrs:{perm:d}}),L=hr({inputs:{x:w},backend:e,attrs:{shape:h}});return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(w),L}};function rve(t,n,e,i,s,r,o){const a=n[0],l=r[0],c=new Array(l),u=new Array(a),d=n[1];if(0===l){if(0!==a)throw new Error(Fme(a));return[Kr(e,0),[0,d],Kr(s,0),c,u]}let h=!0,f=0;const p=new Array(l).fill(0);for(let v=0;v<a;++v){const y=t[v*d];if(y<0)throw new Error(Lme(v,y));if(y>=l)throw new Error(Pme(v,y,l));++p[y],h=h&&y>=f,f=y}let g=!0;for(let v=0;v<l;++v){const y=0===p[v];c[v]=y,g=g&&!y,p[v]=Math.max(p[v],1),v>0&&(p[v]+=p[v-1])}if(g&&h){const v=t,y=i;for(let w=0;w<a;++w)u[w]=w;return[v,[a,d],y,c,u]}{const v=p[l-1],y=Kr(e,v*d),w=Kr(s,v),E=new Array(l).fill(0);for(let T=0;T<a;++T){const L=t[T*d],H=(0===L?0:p[L-1])+E[L];E[L]++;for(let P=0;P<d;++P)y[H*d+P]=t[T*d+P];w[H]=i[T],u[T]=H}for(let T=0;T<l;++T)if(0===E[T]){const W=0===T?0:p[T-1];y[W*d+0]=T;for(let H=1;H<d;++H)y[W*d+H]=0;w[W]=o}return[y,[v,d],w,c,u]}}const NCt={kernelName:nz,backendName:"cpu",kernelFunc:function OCt(t){const{inputs:n,backend:e}=t,{indices:i,values:s,denseShape:r,defaultValue:o}=n;if(1!==r.shape.length)throw new Error(`Dense shape must be a vector, saw:\n        ${r.shape}`);if(2!==i.shape.length)throw new Error(`Indices must be a matrix, saw:\n        ${i.shape}`);if(1!==s.shape.length)throw new Error(`Values must be a vector, saw:\n        ${s.shape}`);if(0!==o.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${o.shape}`);const a=e.data.get(i.dataId).values,l=e.data.get(s.dataId).values,c=e.data.get(r.dataId).values,u=e.data.get(o.dataId).values[0],[d,h,f,p,g]=rve(a,i.shape,i.dtype,l,s.dtype,c,u);return[e.makeTensorInfo(h,i.dtype,d),e.makeTensorInfo([h[0]],s.dtype,f),e.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(v=>Number(v)))),e.makeTensorInfo([g.length],i.dtype,new Int32Array(g))]}};function ove(t,n,e,i,s){const r=at(i),o=n[0],a=s.length,l=[];let c=1,u=-1;for(let v=0;v<a;++v){const y=s[v];if(-1===y){if(-1!==u)throw new Error($me(u,v));u=v,l.push(1)}else{if(y<0)throw new Error(Bme(v,y));c*=y,l.push(y)}}if(-1!==u){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const v=Math.trunc(r/c);if(c*v!==r)throw new Error(zme(i,l));l[u]=v}if(at(l)!==r)throw new Error(Ume(i,l));const h=i.length,f=[];if(h>0){f[h-1]=1;for(let v=h-2;v>=0;--v)f[v]=f[v+1]*i[v+1]}const p=[];if(a>0){p[a-1]=1;for(let v=a-2;v>=0;--v)p[v]=p[v+1]*l[v+1]}const g=Kr(e,o*a);for(let v=0;v<o;++v){let y=0;for(let w=0;w<h;++w)y+=t[v*h+w]*f[w];for(let w=0;w<a;++w)g[v*a+w]=Math.trunc(y/p[w]),y%=p[w]}return[g,[o,a],l]}const FCt={kernelName:iz,backendName:"cpu",kernelFunc:function RCt(t){const{inputs:n,backend:e}=t,{inputIndices:i,inputShape:s,newShape:r}=n;if(2!==i.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${i.shape}`);if(1!==s.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${s.shape}`);if(1!==r.shape.length)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const o=Array.from(e.data.get(s.dataId).values),a=e.data.get(i.dataId).values,l=Array.from(e.data.get(r.dataId).values),[c,u,d]=ove(a,i.shape,i.dtype,o,l);return[e.makeTensorInfo(u,i.dtype,c),e.makeTensorInfo([d.length],r.dtype,new Int32Array(d))]}};function GU(t,n,e,i,s,r=!1,o=0){const a=i.length,l=[n[0],t.length/n[0]],c=l[1],d=a>0?s[a-1]+1:0;if(d<0)throw new Error("segment ids must be >= 0");const h=n.slice();h[0]=d;const p=Kr(e,h.reduce((E,T)=>E*T,1));if(0===a)return d>0&&p.fill(o),[p,h];if(d<=0)throw new Error("segment ids must be >= 0");let g=0,v=1,y=0,w=s[g];for(;;){let E=0;if(v<a){if(E=s[v],w===E){++v;continue}if(w>=E)throw new Error("segment ids are not increasing")}if(w<0||w>=d)throw new Error(jme(w,d));w>y&&p.fill(o,y*c,w*c);for(let T=g;T<v;++T){const L=i[T];if(L<0||L>=l[0])throw new Error(Hme(T,i[T],l[0]));for(let W=0;W<c;W++)p[w*c+W]+=t[L*c+W]}if(r)for(let T=0;T<c;T++)p[w*c+T]/=v-g;if(g=v,++v,y=w+1,w=E,v>a)break}return y<d&&p.fill(o,y*c,d*c),[p,h]}const PCt={kernelName:sz,backendName:"cpu",kernelFunc:function LCt(t){const{inputs:n,backend:e}=t,{data:i,indices:s,segmentIds:r}=n;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.shape.length)throw new Error(`Indices should be a vector but received shape\n          ${s.shape}`);if(1!==r.shape.length)throw new Error(`Segment ids should be a vector but received shape\n          ${r.shape}`);if(s.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const o=e.data.get(i.dataId).values,a=e.data.get(s.dataId).values,l=e.data.get(r.dataId).values,[c,u]=GU(o,i.shape,i.dtype,a,l,!0);return e.makeTensorInfo(u,i.dtype,c)}},BCt={kernelName:rz,backendName:"cpu",kernelFunc:function $Ct(t){const{inputs:n,backend:e}=t,{data:i,indices:s,segmentIds:r}=n;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.shape.length)throw new Error(`Indices should be a vector but received shape\n         ${s.shape}`);if(1!==r.shape.length)throw new Error(`Segment ids should be a vector but received shape\n         ${r.shape}`);if(s.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const o=e.data.get(i.dataId).values,a=e.data.get(s.dataId).values,l=e.data.get(r.dataId).values,[c,u]=GU(o,i.shape,i.dtype,a,l);return e.makeTensorInfo(u,i.dtype,c)}},zCt={kernelName:oz,backendName:"cpu",kernelFunc:function VCt(t){const{inputs:n,backend:e,attrs:i}=t,{sparseIndices:s,sparseValues:r,defaultValue:o}=n,{outputShape:a}=i,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=Ug(0,s,a),f=!1,p=e.bufferSync(s);let g;switch(r.dtype){case"bool":g=Jg(p,e.bufferSync(r),a,h,u,c,l,d,!!e.data.get(o.dataId).values[0],f);break;case"float32":case"int32":g=Jg(p,e.bufferSync(r),a,h,u,c,l,d,e.data.get(o.dataId).values[0],f);break;case"string":g=Jg(p,e.bufferSync(r),a,h,u,c,l,d,Zp(e.data.get(o.dataId).values[0]),f);break;default:throw new Error(`Unsupported type ${r.dtype}`)}return e.makeTensorInfo(a,g.dtype,g.values)}},GCt={kernelName:LO,backendName:"cpu",kernelFunc:function UCt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{numOrSizeSplits:r,axis:o}=i,a=$i(o,s.shape)[0],l=y9(s,r,a),c=new Array(s.shape.length).fill(0),u=s.shape.slice();return l.map(d=>{const h=[...u];h[a]=d;const f=Qg({inputs:{x:s},backend:e,attrs:{begin:c,size:h}});return c[a]+=d,f})}},jCt=xh(t=>Math.sqrt(t)),HCt=$s(Xx,t=>Math.sqrt(t)),WCt={kernelName:Xx,backendName:"cpu",kernelFunc:HCt},qCt={kernelName:az,backendName:"cpu",kernelFunc:({inputs:t,backend:n})=>{const{x:e}=t,i=n;gn(e,"square");const s=i.data.get(e.dataId).values,r=new Float32Array(s.length);for(let a=0;a<s.length;++a){const l=s[a];r[a]=l*l}return{dataId:i.write(r,e.shape,e.dtype),shape:e.shape,dtype:e.dtype}}},KCt=Jr((t,n)=>{const e=t-n;return e*e}),XCt=$o(Yx,KCt),YCt={kernelName:Yx,backendName:"cpu",kernelFunc:XCt},ave=xh((t,n)=>{const{pattern:e,replaceGlobal:i,rewrite:s}=n;return t.replace(new RegExp(e,i?"g":""),s)}),ZCt=vm($O,ave),QCt={kernelName:$O,backendName:"cpu",kernelFunc:ZCt},JCt=$s(tE,(t,n)=>{const e=n;return isNaN(t)?NaN:t>0?1:e.alpha}),ext={kernelName:tE,backendName:"cpu",kernelFunc:JCt};function lve(t,n,e,i){const s=xi(t,n.dtype);for(let r=0;r<s.size;r++){const o=s.indexToLoc(r),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*e[l]+i[l];s.set(n.get(...a),...o)}return s}const nxt={kernelName:lz,backendName:"cpu",kernelFunc:function txt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{begin:r,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=i;gn(s,"stridedSlice");const{finalShapeSparse:f,finalShape:p,isIdentity:g,sliceDim0:v,isSimpleSlice:y,begin:w,end:E,strides:T}=a7(s.shape,r,o,a,l,c,u,d,h);let L;if(g)L=hr({inputs:{x:s},backend:e,attrs:{shape:p}});else if(v||y){le(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const W=s7(w,E,T),H=Qg({inputs:{x:s},backend:e,attrs:{begin:w,size:W}});L=hr({inputs:{x:H},backend:e,attrs:{shape:p}}),e.disposeIntermediateTensorInfo(H)}else{const H=lve(f,e.bufferSync(s),T,w);L=e.makeTensorInfo(p,H.dtype,H.values)}return L}};class ixt{constructor(n,e,i,s,r,o){this.separator=Yp(n),this.nGramWidths=e,this.leftPad=Yp(i),this.rightPad=Yp(s),this.padWidth=r,this.preserveShort=o}getPadWidth(n){return Math.min(this.padWidth<0?n-1:this.padWidth,n-1)}getNumNGrams(n,e){const i=this.getPadWidth(e);return Math.max(0,n+2*i-e+1)}createNGrams(n,e,i,s,r,o){for(let a=0;a<r;++a){const l=this.getPadWidth(o),c=Math.max(0,l-a),u=Math.max(0,l-(r-(a+1))),d=o-(c+u),h=e+(c>0?0:a-l);let f=0;f+=c*this.leftPad.length;for(let w=0;w<d;++w)f+=n[h+w].length;f+=u*this.rightPad.length,f+=(c+u+d-1)*this.separator.length,i[s+a]=new Uint8Array(f);const g=i[s+a];let v=0;const y=w=>w.forEach(E=>g[v++]=E);for(let w=0;w<c;++w)y(this.leftPad),y(this.separator);for(let w=0;w<d-1;++w)y(n[h+w]),y(this.separator);if(d>0){y(n[h+d-1]);for(let w=0;w<u;++w)y(this.separator),y(this.rightPad)}else{for(let w=0;w<u-1;++w)y(this.rightPad),y(this.separator);y(this.rightPad)}}}compute(n,e){const i=n.length,s=e.length;if(s>0){let l=e[0];if(0!==l)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<s;++c){let u=e[c]>=l;if(u=u&&e[c]<=i,!u)throw new Error(`Invalid split value ${e[c]}, must be in [${l}, ${i}]`);l=e[c]}if(l!==i)throw new Error(`Last split value must be data size. Expected ${i}, got ${l}`)}const r=s-1,o=Kr("int32",s);if(0===i||0===s){const l=new Array(i);for(let c=0;c<=r;++c)o[c]=0;return[l,o]}o[0]=0;for(let l=1;l<=r;++l){const c=e[l]-e[l-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&0===u&&(u=1),o[l]=o[l-1]+u}const a=new Array(o[r]);for(let l=0;l<r;++l){const c=e[l];let u=o[l];if(this.nGramWidths.forEach(d=>{const f=this.getNumNGrams(e[l+1]-e[l],d);this.createNGrams(n,c,a,u,f,d),u+=f}),this.preserveShort&&u===o[l]){const d=e[l+1]-e[l];if(0===d)continue;this.createNGrams(n,c,a,u,1,d+2*this.padWidth)}}return[a,o]}}function cve(t,n,e,i,s,r,o,a){return new ixt(e,i,s,r,o,a).compute(t,n)}const rxt={kernelName:cz,backendName:"cpu",kernelFunc:function sxt(t){const{inputs:n,backend:e,attrs:i}=t,{separator:s,nGramWidths:r,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=i,{data:u,dataSplits:d}=n,h=e.data.get(u.dataId).values,f=e.data.get(d.dataId).values,[p,g]=cve(h,f,s,r,o,a,l,c);return[e.makeTensorInfo([p.length],"string",p),e.makeTensorInfo(d.shape,"int32",g)]}};function oxt(t,n,e,i){if(!t.length)return;if(0===n.length){for(let r=0;r<t.length;++r)i.push(t.subarray(r,r+1));return}if(1===n.length){const r=n[0];let o=t.indexOf(r);for(;-1!==o;){const a=t.subarray(0,o);(!e||0!==a.length)&&i.push(a),o=(t=t.subarray(o+1)).indexOf(r)}return void((!e||0!==t.length)&&i.push(t))}let s=0;for(let r=0;r<t.length+1;r++)if(r===t.length||-1!==n.indexOf(t[r])){const o=t.subarray(s,r);(!e||0!==o.length)&&i.push(o),s=r+1}}function uve(t,n,e){const i=t.length,s=[];let r=0,o=0;const a=new Array(i);for(let h=0;h<i;++h){const f=s.length;oxt(t[h],n,e,s);const p=s.length-f;a[h]=p,r+=p,o=Math.max(o,p)}const l=Kr("int32",2*r),c=new Array(r),u=[i,o];let d=0;for(let h=0;h<i;++h)for(let f=0;f<a[h];++f)l[2*d]=h,l[2*d+1]=f,c[d]=s[d],++d;return[l,c,u]}const lxt={kernelName:uz,backendName:"cpu",kernelFunc:function axt(t){const{inputs:n,backend:e,attrs:i}=t,{skipEmpty:s}=i,{input:r,delimiter:o}=n;if("string"!==r.dtype)throw new Error("Input must be of datatype string");if(1!==r.shape.length)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(0!==o.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values[0],[c,u,d]=uve(a,l,s),h=u.length;return[e.makeTensorInfo([h,2],"int32",c),e.makeTensorInfo([h],"string",u),e.makeTensorInfo([2],"int32",new Int32Array(d))]}};function dve(t,n){const e=Kr("int32",t.length);for(let i=0;i<t.length;++i)e[i]=yot(t[i]).modulo(n).getLowBitsUnsigned();return e}const uxt={kernelName:dz,backendName:"cpu",kernelFunc:function cxt(t){const{inputs:n,backend:e,attrs:i}=t,{numBuckets:s}=i,{input:r}=n;if("string"!==r.dtype)throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const a=dve(e.data.get(r.dataId).values,s);return e.makeTensorInfo(r.shape,"int32",a)}},dxt=$s(Qx,t=>Math.tan(t)),hxt={kernelName:Qx,backendName:"cpu",kernelFunc:dxt},fxt=$s(Jx,t=>Math.tanh(t)),_xt={kernelName:ez,backendName:"cpu",kernelFunc:function mxt(t){const{inputs:n,backend:e}=t,{tensor:i,indices:s,updates:r}=n,{sliceRank:o,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=Ug(0,s,i.shape),h=e.bufferSync(s),f=e.bufferSync(r),p=e.bufferSync(i),g=Jg(h,f,i.shape,u,l,a,o,c,p,!1);return e.makeTensorInfo(i.shape,g.dtype,g.values)}};function hve(t,n){const e=new Array(t.rank);for(let s=0;s<e.length;s++)e[s]=t.shape[s]*n[s];const i=xi(e,t.dtype);for(let s=0;s<i.values.length;++s){const r=i.indexToLoc(s),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=r[l]%t.shape[l];const a=t.locToIndex(o);i.values[s]=t.values[a]}return i}const bxt={kernelName:eE,backendName:"cpu",kernelFunc:function gxt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{reps:r}=i;gn(s,"tile");const o=hve(e.bufferSync(s),r);return e.makeTensorInfo(o.shape,o.dtype,o.values)}},BE=(t,n)=>{const e=n.value-t.value;return 0===e?t.index-n.index:e};function fve(t,n,e=0,i=t.length-1){for(;i>e;){if(i-e>600){const a=i-e+1,l=n-e+1,c=Math.log(a),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2);fve(t,n,Math.max(e,Math.floor(n-l*u/a+d)),Math.min(i,Math.floor(n+(a-l)*u/a+d)))}const s=t[n];let r=e,o=i;for(Hp(t,e,n),BE(t[i],s)>0&&Hp(t,e,i);r<o;){for(Hp(t,r,o),r++,o--;BE(t[r],s)<0;)r+=1;for(;BE(t[o],s)>0;)o-=1}0===BE(t[e],s)?Hp(t,e,o):(o+=1,Hp(t,o,i)),o<=n&&(e=o+1),n<=o&&(i=o-1)}}function pve(t,n,e,i,s){const r=n[n.length-1],[o,a]=[t.length/r,r],l=ga(e,o*i),c=ga("int32",o*i);for(let d=0;d<o;d++){const h=d*a,f=t.subarray(h,h+a);let p=new Array(f.length);f.forEach((w,E)=>p[E]={value:w,index:E}),i<p.length&&(fve(p,i),p=p.slice(0,i)),s&&p.sort(BE);const g=d*i,v=l.subarray(g,g+i),y=c.subarray(g,g+i);for(let w=0;w<i;w++)v[w]=p[w].value,y[w]=p[w].index}const u=n.slice();return u[u.length-1]=i,[xi(u,e,l),xi(u,"int32",c)]}const yxt={kernelName:hz,backendName:"cpu",kernelFunc:function vxt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{k:r,sorted:o}=i;gn(s,"topk");const a=e.data.get(s.dataId).values,[l,c]=pve(a,s.shape,s.dtype,r,o);return[e.makeTensorInfo(l.shape,l.dtype,l.values),e.makeTensorInfo(c.shape,c.dtype,c.values)]}},Sxt={kernelName:fz,backendName:"cpu",kernelFunc:function wxt(t){const{inputs:n,attrs:e,backend:i}=t,{image:s,transforms:r}=n,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=e,[u,d,h,f]=s.shape,[p,g]=c??[d,h],v=[u,p,g,f],y=xn(s.shape),w=y[0],E=y[1],T=y[2],L=xn(v),W=L[0],H=L[1],P=L[2],X=ga(s.dtype,at(v));X.fill(l);const ne=i.data.get(s.dataId).values,me=i.data.get(r.dataId).values;for(let Te=0;Te<u;++Te){const $e=1===r.shape[0]?me:me.subarray(8*Te,8*Te+8);for(let Xe=0;Xe<p;++Xe)for(let Ce=0;Ce<g;++Ce)for(let Fe=0;Fe<f;++Fe){let Ie;const He=$e[6]*Ce+$e[7]*Xe+1;if(0===He)continue;const tt=($e[3]*Ce+$e[4]*Xe+$e[5])/He,St=mve(($e[0]*Ce+$e[1]*Xe+$e[2])/He,h,a),mt=mve(tt,d,a);switch(o){case"nearest":Ie=Ixt(ne,d,h,w,E,T,Te,mt,St,Fe,l);break;case"bilinear":Ie=kxt(ne,d,h,w,E,T,Te,mt,St,Fe,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}X[Te*W+Xe*H+Ce*P+Fe]=Ie}return i.makeTensorInfo(v,s.dtype,X)}return{dataId:i.write(X,v,s.dtype),shape:s.shape,dtype:s.dtype}}};function mve(t,n,e){switch(e){case"reflect":return function Cxt(t,n){let e=t;if(e<0)if(n<=1)e=0;else{const i=2*n;e<i&&(e=i*Math.trunc(-e/i)+e),e=e<-n?e+i:-e-1}else if(e>n-1)if(n<=1)e=0;else{const i=2*n;e-=i*Math.trunc(e/i),e>=n&&(e=i-e-1)}return Tg(0,e,n-1)}(t,n);case"wrap":return function xxt(t,n){let e=t;return e<0?n<=1?e=0:e+=n*(Math.trunc(-e/(n-1))+1):e>n-1&&(n<=1?e=0:e-=n*Math.trunc(e/(n-1))),Tg(0,e,n-1)}(t,n);case"nearest":return function Txt(t,n){return Tg(0,t,n-1)}(t,n);default:return function Ext(t,n){return t}(t)}}function VE(t,n,e,i,s,r,o,a,l,c,u){return 0<=a&&a<n&&0<=l&&l<e?t[o*i+a*s+l*r+c]:u}function Ixt(t,n,e,i,s,r,o,a,l,c,u){return VE(t,n,e,i,s,r,o,Math.round(a),Math.round(l),c,u)}function kxt(t,n,e,i,s,r,o,a,l,c,u){const d=Math.floor(a),h=Math.floor(l),f=d+1,p=h+1;return(f-a)*((p-l)*VE(t,n,e,i,s,r,o,d,h,c,u)+(l-h)*VE(t,n,e,i,s,r,o,d,p,c,u))+(a-d)*((p-l)*VE(t,n,e,i,s,r,o,f,h,c,u)+(l-h)*VE(t,n,e,i,s,r,o,f,p,c,u))}function _ve(t,n,e,i){const s=$i(n,e)[0],r=[1,e[0],1];for(let p=0;p<s;p++)r[0]*=e[p];r[1]=e[s];for(let p=s+1;p<e.length;p++)r[2]*=e[p];const o=new Map,a=new Int32Array(e[s]),l=new Mo(r,i,t),c=[],u=1===r[0]&&1===r[2];for(let p=0;p<e[s];p++){let g;if(u)g=t[p].toString();else{const y=[];for(let w=0;w<r[0];w++)for(let E=0;E<r[2];E++)y.push(l.get(w,p,E));g=y.join(",")}const v=o.get(g);if(null!=v)a[p]=v;else{const y=o.size;o.set(g,y),a[p]=y,c.push(p)}}const d=r.slice();d[1]=o.size;const h=new Mo(d,i);c.forEach((p,g)=>{for(let v=0;v<r[0];v++)for(let y=0;y<r[2];y++)h.set(l.get(v,p,y),v,g,y)});const f=e.slice();return f[s]=d[1],{outputValues:h.values,outputShape:f,indices:a}}const Mxt={kernelName:pz,backendName:"cpu",kernelFunc:function Dxt(t){const{inputs:n,attrs:e,backend:i}=t,{axis:s}=e,{x:r}=n;gn(r,"unique");const o=i.data.get(r.dataId).values,{outputValues:a,outputShape:l,indices:c}=_ve(o,s,r.shape,r.dtype);return[i.makeTensorInfo(l,r.dtype,a),i.makeTensorInfo([c.length],"int32",c)]}},Oxt={kernelName:BO,backendName:"cpu",kernelFunc:function Axt(t){const{inputs:n,backend:e,attrs:i}=t,{value:s}=n;let{axis:r}=i;r<0&&(r+=s.shape.length);const o=s.shape.length,a=s.shape[r],l=new Array(o-1);let c=0;for(let f=0;f<o;f++)f!==r&&(l[c++]=s.shape[f]);const u=new Array(o).fill(0),d=s.shape.slice();d[r]=1;const h=new Array(a);for(let f=0;f<h.length;f++){u[r]=f;const p=Qg({inputs:{x:s},backend:e,attrs:{begin:u,size:d}});h[f]=hr({inputs:{x:p},backend:e,attrs:{shape:l}}),e.disposeIntermediateTensorInfo(p)}return h}},Rxt={kernelName:VO,backendName:"cpu",kernelFunc:function Nxt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,segmentIds:r}=n,{numSegments:o}=i;gn(s,"unsortedSegmentSum");const c=[],u=[],d=s.shape.length-r.shape.length;let h=r;for(let p=0;p<d;++p){const g=uR({inputs:{input:h},backend:e,attrs:{dim:p+1}});h=g,u.push(g)}for(let p=0;p<o;++p){const g=Xp(p,"int32"),v=e.makeTensorInfo([],"int32",g),y=Cbe({inputs:{a:v,b:h},backend:e}),w=ym({inputs:{x:y},backend:e,attrs:{dtype:"float32"}}),E=cR({inputs:{a:w,b:s},backend:e}),T=$E({inputs:{x:E},backend:e,attrs:{axis:0,keepDims:!1}});c.push(T),u.push(v),u.push(y),u.push(w),u.push(E),u.push(T)}const f=Wbe({inputs:c,backend:e,attrs:{axis:0}});return u.forEach(p=>e.disposeIntermediateTensorInfo(p)),f}},Fxt=[Iyt,kyt,Myt,Oyt,Cyt,Ryt,Pyt,Byt,zyt,Gyt,Hyt,qyt,Xyt,Qyt,e1t,i1t,r1t,a1t,c1t,Eyt,d1t,p1t,_1t,b1t,y1t,wyt,S1t,x1t,vyt,E1t,I1t,k1t,M1t,O1t,R1t,L1t,$1t,V1t,U1t,j1t,W1t,K1t,Y1t,Q1t,J1t,t0t,i0t,r0t,o0t,a0t,l0t,u0t,m0t,uyt,g0t,b0t,T0t,I0t,k0t,M0t,$0t,B0t,z0t,G0t,W0t,K0t,Y0t,Q0t,ewt,nwt,swt,dyt,owt,T1t,lwt,uwt,hwt,hyt,pwt,_wt,bwt,ywt,Swt,Ewt,Iwt,Mwt,Owt,Rwt,Fwt,Pwt,Bwt,zwt,Gwt,Hwt,qwt,Xwt,Zwt,Jwt,tSt,sSt,aSt,h0t,cSt,hSt,mSt,bSt,ySt,SSt,xSt,ESt,qbe,DSt,pyt,ASt,BSt,zSt,GSt,HSt,yyt,BU,qSt,myt,_yt,xyt,XSt,ZSt,JSt,tCt,iCt,sCt,oCt,lCt,uCt,mCt,gCt,wCt,byt,CCt,ECt,ICt,h1t,rSt,DCt,ACt,NCt,FCt,PCt,BCt,zCt,GCt,WCt,qCt,YCt,QCt,ext,nxt,rxt,lxt,uxt,N0t,f0t,hxt,{kernelName:Jx,backendName:"cpu",kernelFunc:fxt},_xt,bxt,yxt,Sxt,Fyt,Mxt,Oxt,Rxt,CSt];for(const t of Fxt)bz(t);const wm={},fR={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Cd(t,n){if(!(t in wm)||null!=n){const i=function $xt(t,n){if(1!==t&&2!==t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const e=n??function Pxt(t){if(!nt().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&2===t)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return e.addEventListener("webglcontextlost",i=>{i.preventDefault(),delete wm[t]},!1),nt().getBool("SOFTWARE_WEBGL_ENABLED")&&(fR.failIfMajorPerformanceCaveat=!1),1===t?e.getContext("webgl",fR)||e.getContext("experimental-webgl",fR):e.getContext("webgl2",fR)}(t,n);if(null===i)return console.log("Could not get context for WebGL version",t),null;wm[t]=i}const e=wm[t];return null==e||e.isContextLost()?(delete wm[t],Cd(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),wm[t])}var pR=function(t){return t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH",t}(pR||{}),Du=function(t){return t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD",t}(Du||{}),Pa=function(t){return t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16",t}(Pa||{});function zE(t,n){return[n,t]}function mR(t){const n=at(t);return nV(Math.ceil(n/4))}function z1(t,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(t/2))]}function jU(t,n){const e=t;let i,s,r,o,a,l,c,u,d,h;return 2===nt().getNumber("WEBGL_VERSION")?(i=e.R32F,s=e.R16F,r=e.RGBA16F,o=e.RGBA32F,a=e.RED,c=4,u=1,d=e.HALF_FLOAT,h=e.FLOAT,l=e.RGBA8):(i=t.RGBA,s=t.RGBA,r=t.RGBA,o=e.RGBA,a=t.RGBA,c=4,u=4,d=null!=n?n.HALF_FLOAT_OES:null,h=t.FLOAT,l=t.RGBA),{internalFormatFloat:i,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:r,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:h}}function Xt(t,n){const e=n();return nt().getBool("DEBUG")&&function zxt(t){const n=t.getError();if(n!==t.NO_ERROR)throw new Error("WebGL Error: "+function Hxt(t,n){switch(n){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${n}`}}(t,n))}(t),e}function jxt(t){return!!(nt().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===t||5.96e-8<Math.abs(t)&&Math.abs(t)<65504)}function _R(t,n){return Pf(t,()=>t.getExtension(n),'Extension "'+n+'" not supported on this browser.')}const Kxt=/ERROR: [0-9]+:([0-9]+):/g;function gve(t,n){const e=Kxt.exec(n);if(null==e)return console.log(`Couldn't parse line number in error: ${n}`),void console.log(t);const i=+e[1],s=t.split("\n"),r=s.length.toString().length+2,o=s.map((d,h)=>o1((h+1).toString(),r)+d);let a=0;for(let d=0;d<o.length;d++)a=Math.max(o[d].length,a);const l=o.slice(0,i-1),c=o.slice(i-1,i),u=o.slice(i);console.log(l.join("\n")),console.log(n.split("\n")[0]),console.log(`%c ${o1(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function HU(t,n){if(Xt(t,()=>t.validateProgram(n)),!1===t.getProgramParameter(n,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function bve(t,n,e,i,s,r,o){const a=t.getAttribLocation(n,e);return-1!==a&&(Xt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,i)),Xt(t,()=>t.vertexAttribPointer(a,s,t.FLOAT,!1,r,o)),Xt(t,()=>t.enableVertexAttribArray(a)),!0)}function rEt(t,n,e,i){Xt(t,()=>function nEt(t,n,e){(function yve(t,n){const e=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,i=n+t.TEXTURE0;if(i<t.TEXTURE0||i>e)throw new Error(`textureUnit must be in [gl.TEXTURE0, gl.TEXTURE${e}].`)})(t,e),Xt(t,()=>t.activeTexture(t.TEXTURE0+e)),Xt(t,()=>t.bindTexture(t.TEXTURE_2D,n))}(t,n,i)),Xt(t,()=>t.uniform1i(e,i))}function WU(t,n,e){Xt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Xt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0))}function vve(t,n){Xt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Xt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function gR(t){const n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function oEt(t,n){switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${n}`}}(t,n))}function Pf(t,n,e){const i=Xt(t,()=>n());if(null==i)throw new Error(e);return i}function U1(t,n=2){return at(t.slice(0,t.length-n))}function G1(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function bR(t){let n=[1,1,1];return 0===t.length||1===t.length&&1===t[0]||(n=[U1(t),...G1(t)]),n}function vR(t){return t%2==0}function yR(t,n){if(Qi(t=t.slice(-2),n=n.slice(-2))||!t.length||!n.length||0===t[0]||0===t[1]||0===n[0]||0===n[1])return!0;if(t.length!==n.length){const e=t[t.length-1],i=n[n.length-1];if(e===i||vR(e)&&vR(i)&&(1===t[0]||1===n[0]))return!0}return t[1]===n[1]&&vR(t[0])&&vR(n[0])}let wR,SR;function Mu(t,n){return null!=t.getExtension(n)}function wve(t){try{if(null!=Cd(t))return!0}catch(n){return console.log("Error when getting WebGL context: ",n),!1}return!1}function qU(t){const n=jU(t),e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(r),o}function UE(t,n){Array.isArray(t)||(t=[t]),t.forEach(e=>{null!=e&&le("complex64"!==e.dtype,()=>`${n} does not support complex64 tensors in the WebGL backend.`)})}const yn=nt();function el(){let t,n,e,i,s,r,o,a,l,c;return 2===nt().getNumber("WEBGL_VERSION")?(t="#version 300 es",n="in",e="out",i="in",s="texture",r="outputColor",o="out vec4 outputColor;",a=nt().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",n="attribute",e="varying",i="varying",s="texture2D",r="gl_FragColor",o="",a="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:n,varyingVs:e,varyingFs:i,texture2D:s,output:r,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}function eb(t,n,e="index"){const i=xn(n);return i.map((s,r)=>`int ${t[r]} = ${e} / ${s}; ${r===i.length-1?`int ${t[r+1]} = ${e} - ${t[r]} * ${s}`:`index -= ${t[r]} * ${s}`};`).join("")}function CR(t,n,e="index"){const i=xn(n);return i.map((s,r)=>`int ${t[r]} = ${e} / outShapeStrides[${r}]; ${r===i.length-1?`int ${t[r+1]} = ${e} - ${t[r]} * outShapeStrides[${r}]`:`index -= ${t[r]} * outShapeStrides[${r}]`};`).join("")}function KU(t){const n=xn(t).map(e=>e.toString());return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${n[0]} + coords.y * ${n[1]} + coords.z;\n  }\n`}yn.registerFlag("HAS_WEBGL",()=>yn.getNumber("WEBGL_VERSION")>0),yn.registerFlag("WEBGL_VERSION",()=>wve(2)?2:wve(1)?1:0),yn.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),yn.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===yn.get("WEBGL_VERSION")),yn.registerFlag("WEBGL_CPU_FORWARD",()=>!0),yn.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),yn.registerFlag("WEBGL_PACK",()=>yn.getBool("HAS_WEBGL")),yn.registerFlag("WEBGL_PACK_NORMALIZATION",()=>yn.getBool("WEBGL_PACK")),yn.registerFlag("WEBGL_PACK_CLIP",()=>yn.getBool("WEBGL_PACK")),yn.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>yn.getBool("WEBGL_PACK")),yn.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>yn.getBool("WEBGL_PACK")),yn.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>yn.getBool("WEBGL_PACK")),yn.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>yn.getBool("WEBGL_PACK")),yn.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>yn.getBool("WEBGL_PACK")),yn.registerFlag("WEBGL_PACK_REDUCE",()=>yn.getBool("WEBGL_PACK")),yn.registerFlag("WEBGL_LAZILY_UNPACK",()=>yn.getBool("WEBGL_PACK")),yn.registerFlag("WEBGL_CONV_IM2COL",()=>yn.getBool("WEBGL_PACK")),yn.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>yn.getBool("WEBGL_PACK")),yn.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>function lEt(t){if(null==wR){const n=Cd(t);wR=n.getParameter(n.MAX_TEXTURE_SIZE)}return wR}(yn.getNumber("WEBGL_VERSION"))),yn.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>function cEt(t){if(null==SR){const n=Cd(t);SR=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,SR)}(yn.getNumber("WEBGL_VERSION"))),yn.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=yn.getNumber("WEBGL_VERSION");return 0===t?0:function uEt(t){if(0===t)return 0;let n;const e=Cd(t);return n=Mu(e,"EXT_disjoint_timer_query_webgl2")&&2===t?2:Mu(e,"EXT_disjoint_timer_query")?1:0,n}(t)}),yn.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>yn.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!_fe()),yn.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>function dEt(t){if(0===t)return!1;const n=Cd(t);if(1===t){if(!Mu(n,"OES_texture_float"))return!1}else if(!Mu(n,"EXT_color_buffer_float"))return!1;return qU(n)}(yn.getNumber("WEBGL_VERSION"))),yn.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!yn.getBool("WEBGL_FORCE_F16_TEXTURES")&&yn.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),yn.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>function hEt(t){if(0===t)return!1;const n=Cd(t);if(1!==t){if(Mu(n,"EXT_color_buffer_float"))return qU(n);const i="EXT_color_buffer_half_float";if(Mu(n,i)){const s=n.getExtension(i);return function fEt(t,n){const e=jU(t,n),i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatHalfFloat,1,1,0,e.textureFormatFloat,e.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(i),t.deleteFramebuffer(o),a}(n,s)}return!1}return!(!Mu(n,"OES_texture_float")||!Mu(n,"WEBGL_color_buffer_float"))&&qU(n)}(yn.getNumber("WEBGL_VERSION"))),yn.registerFlag("WEBGL_FENCE_API_ENABLED",()=>function pEt(t){return 2===t&&null!=Cd(t).fenceSync}(yn.getNumber("WEBGL_VERSION"))),yn.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>yn.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),yn.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if("number"!=typeof t)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&-1!==t)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)}),yn.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>_fe()?1:-1,t=>{if("number"!=typeof t)throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&-1!==t)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)}),yn.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),yn.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),yn.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),yn.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),yn.registerFlag("WEBGL_EXP_CONV",()=>!1),yn.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>yn.getBool("IS_TEST")),yn.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),yn.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),yn.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1),yn.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);const Sve="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:Cve}=ee;function gEt(t,n,e){const i=[];if(t.forEach(f=>{const p=at(f.shapeInfo.logicalShape);if(f.shapeInfo.isUniform?i.push(`uniform float ${f.name}${p>1?`[${p}]`:""};`):(i.push(`uniform sampler2D ${f.name};`),i.push(`uniform int offset${f.name};`)),e.enableShapeUniforms){const{uniformShape:g}=YU(e.packedInputs,f.shapeInfo.logicalShape,f.shapeInfo.texShape);switch(g.length){case 1:i.push(`uniform int ${f.name}Shape;`);break;case 2:i.push(`uniform ivec2 ${f.name}Shape;`);break;case 3:i.push(`uniform ivec3 ${f.name}Shape;`);break;case 4:i.push(`uniform ivec4 ${f.name}Shape;`)}i.push(`uniform ivec2 ${f.name}TexShape;`)}}),e.enableShapeUniforms){switch(n.logicalShape.length){case 1:i.push("uniform int outShape;");break;case 2:i.push("uniform ivec2 outShape;"),i.push("uniform int outShapeStrides;");break;case 3:i.push("uniform ivec3 outShape;"),i.push("uniform ivec2 outShapeStrides;");break;case 4:i.push("uniform ivec4 outShape;"),i.push("uniform ivec3 outShapeStrides;")}i.push("uniform ivec2 outTexShape;")}e.customUniforms&&e.customUniforms.forEach(f=>{i.push(`uniform ${f.type} ${f.name}${f.arrayIndex?`[${f.arrayIndex}]`:""};`)});const s=i.join("\n"),r=t.map(f=>function bEt(t,n,e=!1,i){let s="";s+=e?xve(t,i):j1(t,i);return t.shapeInfo.logicalShape.length<=n.logicalShape.length&&(s+=e?function ZEt(t,n){const e=t.name,i=e.charAt(0).toUpperCase()+e.slice(1),s="get"+i+"AtOutCoords",r=t.shapeInfo.logicalShape.length,o=n.logicalShape.length,a=Cve(t.shapeInfo.logicalShape,n.logicalShape),l=Ks(o),c=o-r;let u;const d=["x","y","z","w","u","v"];u=0===r?"":o<2&&a.length>=1?"coords = 0;":a.map(w=>`coords.${d[w+c]} = 0;`).join("\n");let h="";h=o<2&&r>0?"coords":t.shapeInfo.logicalShape.map((w,E)=>`coords.${d[E+c]}`).join(", ");let f="return outputValue;";const g=1===at(t.shapeInfo.logicalShape),y=1===at(n.logicalShape);if(1!==r||g||y){if(g&&!y)f=1===o?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(a.length){const w=r-2,E=r-1;a.indexOf(w)>-1&&a.indexOf(E)>-1?f="return vec4(outputValue.x);":a.indexOf(w)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(E)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${s}() {\n      ${l} coords = getOutputCoords();\n      ${u}\n      vec4 outputValue = get${i}(${h});\n      ${f}\n    }\n  `}(t,n):function QEt(t,n){const e=t.name,i=e.charAt(0).toUpperCase()+e.slice(1),s="get"+i+"AtOutCoords",a=t.shapeInfo.logicalShape.length,l=n.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&null==t.shapeInfo.flatOffset&&Qi(t.shapeInfo.texShape,n.texShape))return`\n      float ${s}() {\n        return sampleTexture(${e}, resultUV);\n      }\n    `;const c=Ks(l),u=Cve(t.shapeInfo.logicalShape,n.logicalShape),d=l-a;let h;const f=["x","y","z","w","u","v"];h=0===a?"":l<2&&u.length>=1?"coords = 0;":u.map(g=>`coords.${f[g+d]} = 0;`).join("\n");let p="";return p=l<2&&a>0?"coords":t.shapeInfo.logicalShape.map((g,v)=>`coords.${f[v+d]}`).join(", "),`\n    float ${s}() {\n      ${c} coords = getOutputCoords();\n      ${h}\n      return get${i}(${p});\n    }\n  `}(t,n)),s}(f,n,e.packedInputs,e.enableShapeUniforms)).join("\n"),o=n.texShape,a=el(),l=function wEt(t){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${t.texture2D}(textureSampler, uv).r;\n    }\n  `}(a);let c,u,d=function xEt(t){return`${t.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${t.varyingFs} vec2 resultUV;\n    ${t.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${t.defineSpecialNaN}\n    ${t.defineSpecialInf}\n    ${t.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${EEt}\n    ${TEt}\n    ${IEt}\n  `}(a);return n.isPacked?(c=function vEt(t,n,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function DEt(t,n,e){const i=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];return 1===i[0]?e?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${i[1]}.0);\n      }\n    `:1===i[1]?e?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${i[0]}.0);\n      }\n    `:e?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${i[0]}, ${i[1]}));\n      return 2 * (resTexRC.x * ${i[1]} + resTexRC.y);\n    }\n  `}(0,n,e);case 2:return function PEt(t,n,e){const i=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];if(Qi(t,n))return e?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${i[0]}, ${i[1]}));\n      }\n    `;const s=Math.ceil(t[1]/2);return e?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${i[0]}, ${i[1]}));\n\n      int index = resTexRC.x * ${i[1]} + resTexRC.y;\n      int r = 2 * (index / ${s});\n      int c = imod(index, ${s}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(t,n,e);case 3:return function AEt(t,n,e){if(e)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const i=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],s=Math.ceil(t[2]/2),r=s*Math.ceil(t[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${i[0]}, ${i[1]}));\n      int index = resTexRC.x * ${i[1]} + resTexRC.y;\n\n      int b = index / ${r};\n      index -= b * ${r};\n\n      int r = 2 * (index / ${s});\n      int c = imod(index, ${s}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(t,n,e);default:return function NEt(t,n,e){if(e)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const i=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],s=Math.ceil(t[t.length-1]/2),r=s*Math.ceil(t[t.length-2]/2);let o=r,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)o*=t[t.length-c-1],a=`\n      int b${c} = index / ${o};\n      index -= b${c} * ${o};\n    `+a,l=`b${c}, `+l;return`\n    ivec${t.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${i[0]}, ${i[1]}));\n      int index = resTexRC.x * ${i[1]} + resTexRC.y;\n\n      ${a}\n\n      int b = index / ${r};\n      index -= b * ${r};\n\n      int r = 2 * (index / ${s});\n      int c = imod(index, ${s}) * 2;\n\n      return ivec${t.length}(${l});\n    }\n  `}(t,n,e)}}(n.logicalShape,o,e.enableShapeUniforms),u=function CEt(t){return`\n    void setOutput(vec4 val) {\n      ${t.output} = val;\n    }\n  `}(a)):(c=function yEt(t,n,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function MEt(t,n,e){return 1===n[0]?e?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?e?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${n[0]}.0);\n      }\n    `:e?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return resTexRC.x * ${n[1]} + resTexRC.y;\n    }\n  `}(0,n,e);case 2:return function $Et(t,n,e){return Qi(t,n)?e?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));\n      }\n    `:1===t[1]?e?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${n[0]}, ${n[1]}));\n        int index = resTexRC.x * ${n[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===t[0]?e?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${n[0]}, ${n[1]}));\n        int index = resTexRC.x * ${n[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:e?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      int r = index / ${t[1]};\n      int c = index - r * ${t[1]};\n      return ivec2(r, c);\n    }\n  `}(t,n,e);case 3:return function OEt(t,n,e){if(e)return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${CR(["r","c","d"],t)}\n    return ivec3(r, c, d);\n  }\n`;const i=eb(["r","c","d"],t);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      ${i}\n      return ivec3(r, c, d);\n    }\n  `}(t,n,e);case 4:return function REt(t,n,e){if(e)return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${CR(["r","c","d","d2"],t)}\n      return ivec4(r, c, d, d2);\n    }\n  `;const i=eb(["r","c","d","d2"],t);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      ${i}\n      return ivec4(r, c, d, d2);\n    }\n  `}(t,n,e);case 5:return function FEt(t,n){const e=eb(["r","c","d","d2","d3"],t);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${n[0]},\n                             ${n[1]}));\n\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${e}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(t,n);case 6:return function LEt(t,n){const e=eb(["r","c","d","d2","d3","d4"],t);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${e}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(t,n);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}(n.logicalShape,o,e.enableShapeUniforms),u=function SEt(t){return`\n    void setOutput(float val) {\n      ${t.output} = vec4(val, 0, 0, 0);\n    }\n  `}(a)),e.packedInputs&&(d+=kEt),[d,l,u,s,c,r,e.userCode].join("\n")}function j1(t,n=!1){const e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function VEt(t,n){const e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`float ${i}() {return ${e};}`;const[s,r]=t.shapeInfo.texShape;if(1===s&&1===r)return`\n      float ${i}() {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const o=tb(e);if(n)return`\n    float ${i}() {\n      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], ${o});\n      return sampleTexture(${e}, uv);\n    }\n  `;const[a,l]=t.shapeInfo.texShape;return`\n    float ${i}() {\n      vec2 uv = uvFromFlat(${a}, ${l}, ${o});\n      return sampleTexture(${e}, uv);\n    }\n  `}(t,n);case 1:return function UEt(t,n){const e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`\n      float ${i}(int index) {\n        ${H1(t)}\n      }\n    `;const s=t.shapeInfo.texShape,r=s[0],o=s[1];if(1===o&&1===r)return`\n      float ${i}(int index) {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const a=tb(e);return 1===o?n?`\n      float ${i}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${e}TexShape[0]));\n        return sampleTexture(${e}, uv);\n      }\n    `:`\n      float ${i}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${r}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `:1===r?n?`\n      float ${i}(int index) {\n        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${e}TexShape[1]), 0.5);\n        return sampleTexture(${e}, uv);\n      }\n    `:`\n      float ${i}(int index) {\n        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);\n        return sampleTexture(${e}, uv);\n      }\n    `:n?`\n    float ${i}(int index) {\n      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], index + ${a});\n      return sampleTexture(${e}, uv);\n    }\n  `:`\n    float ${i}(int index) {\n      vec2 uv = uvFromFlat(${r}, ${o}, index + ${a});\n      return sampleTexture(${e}, uv);\n    }\n  `}(t,n);case 2:return function jEt(t,n){const e=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),r=t.shapeInfo.texShape;if(null!=r&&Qi(e,r))return n?`\n      float ${s}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n    float ${s}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${r[1]}.0, ${r[0]}.0);\n      return sampleTexture(${i}, uv);\n    }\n  `;const{newShape:o,keptDims:a}=Wp(e);if(o.length<e.length){const f=["row","col"];return`\n      ${j1(W1(t,o),n)}\n      float ${s}(int row, int col) {\n        return ${s}(${q1(f,a)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${s}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${e[1]}, 1)));\n        ${H1(t)}\n      }\n    `;const c=r[0],u=r[1],d=tb(i);return 1===u?n?`\n      float ${s}(int row, int col) {\n        float index = dot(vec3(row, col, ${d}), vec3(${i}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${i}TexShape[0]));\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n    float ${s}(int row, int col) {\n      float index = dot(vec3(row, col, ${d}), vec3(${e[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);\n      return sampleTexture(${i}, uv);\n    }\n  `:1===c?n?`\n      float ${s}(int row, int col) {\n        float index = dot(vec3(row, col, ${d}), vec3(${i}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${i}TexShape[1]), 0.5);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n    float ${s}(int row, int col) {\n      float index = dot(vec3(row, col, ${d}), vec3(${e[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);\n      return sampleTexture(${i}, uv);\n    }\n  `:n?`\n      float ${s}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${i}Shape[1] + col + ${d};\n        vec2 uv = uvFromFlat(${i}TexShape[0], ${i}TexShape[1], index);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n  float ${s}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${e[1]} + col + ${d};\n    vec2 uv = uvFromFlat(${c}, ${u}, index);\n    return sampleTexture(${i}, uv);\n  }\n`}(t,n);case 3:return function WEt(t,n){const e=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),r=e[1]*e[2],o=e[2],{newShape:a,keptDims:l}=Wp(e);if(a.length<e.length){const v=["row","col","depth"];return`\n        ${j1(W1(t,a),n)}\n        float ${s}(int row, int col, int depth) {\n          return ${s}(${q1(v,l)});\n        }\n      `}if(t.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${r}, ${o}, 1)));\n        ${H1(t)}\n      }\n    `;const u=t.shapeInfo.texShape,d=u[0],h=u[1],f=t.shapeInfo.flatOffset;if(h===r&&null==f)return n?`\n      float ${s}(int row, int col, int depth) {\n        int stride1 = ${i}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${i}TexShape[1], ${i}TexShape[0]);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n        float ${s}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${o}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${h}.0, ${d}.0);\n          return sampleTexture(${i}, uv);\n        }\n      `;if(h===o&&null==f)return n?`\n      float ${s}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${i}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n    float ${s}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${e[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${d}.0);\n      return sampleTexture(${i}, uv);\n    }\n  `;const p=tb(i);return n?`\n    float ${s}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${i}Shape[1] * ${i}Shape[2];\n      int stride1 = ${i}Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ${p};\n      vec2 uv = uvFromFlat(${i}TexShape[0], ${i}TexShape[1], index);\n      return sampleTexture(${i}, uv);\n    }\n    `:`\n      float ${s}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${r} + col * ${o} + depth + ${p};\n        vec2 uv = uvFromFlat(${d}, ${h}, index);\n        return sampleTexture(${i}, uv);\n      }\n  `}(t,n);case 4:return function KEt(t,n){const e=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),r=e[3],o=e[2]*r,a=e[1]*o,{newShape:l,keptDims:c}=Wp(e);if(l.length<e.length){const E=["row","col","depth","depth2"];return`\n      ${j1(W1(t,l),n)}\n      float ${s}(int row, int col, int depth, int depth2) {\n        return ${s}(${q1(E,c)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${a}, ${o}, ${r}, 1)));\n        ${H1(t)}\n      }\n    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1],p=`int stride2 = ${i}Shape[3];`,g=`int stride1 = ${i}Shape[2] * stride2;`,v=`int stride0 = ${i}Shape[1] * stride1;`;if(f===a&&null==u)return n?`\n      float ${s}(int row, int col, int depth, int depth2) {\n        ${p}\n        ${g}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${i}TexShape[1], ${i}TexShape[0]);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n      float ${s}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${o}, ${r}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${h}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `;if(f===r&&null==u)return n?`\n      float ${s}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${i}Shape[1] * ${i}Shape[2], ${i}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${i}TexShape[1], ${i}TexShape[0]);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n      float ${s}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${e[1]*e[2]}, ${e[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${h}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `;const y=tb(i);return n?`\n    float ${s}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${p}\n      ${g}\n      ${v}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${i}TexShape[0], ${i}TexShape[1], index + ${y});\n      return sampleTexture(${i}, uv);\n    }\n  `:`\n    float ${s}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${a} + col * ${o} +\n          depth * ${r} + depth2;\n      vec2 uv = uvFromFlat(${h}, ${f}, index + ${y});\n      return sampleTexture(${i}, uv);\n    }\n  `}(t,n);case 5:return function XEt(t){const n=t.shapeInfo.logicalShape,e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1),s=n[4],r=n[3]*s,o=n[2]*r,a=n[1]*o,{newShape:l,keptDims:c}=Wp(n);if(l.length<n.length){const v=["row","col","depth","depth2","depth3"];return`\n      ${j1(W1(t,l))}\n      float ${i}(int row, int col, int depth, int depth2, int depth3) {\n        return ${i}(${q1(v,c)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${a}, ${o}, ${r}, ${s})) +\n          depth3;\n        ${H1(t)}\n      }\n    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1];if(f===a&&null==u)return`\n      float ${i}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${o}, ${r}, ${s}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${h}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `;if(f===s&&null==u)return`\n      float ${i}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${n[1]*n[2]*n[3]},\n               ${n[2]*n[3]}, ${n[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${h}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `;return`\n    float ${i}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${a} + col * ${o} + depth * ${r} +\n          depth2 * ${s} + depth3 + ${tb(e)};\n      vec2 uv = uvFromFlat(${h}, ${f}, index);\n      return sampleTexture(${e}, uv);\n    }\n  `}(t);case 6:return function YEt(t){const n=t.shapeInfo.logicalShape,e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1),{newShape:s,keptDims:r}=Wp(n);if(s.length<n.length){const y=["row","col","depth","depth2","depth3","depth4"];return`\n      ${j1(W1(t,s))}\n      float ${i}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${i}(${q1(y,r)});\n      }\n    `}const o=n[5],a=n[4]*o,l=n[3]*a,c=n[2]*l,u=n[1]*c;if(t.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${u}, ${c}, ${l}, ${a})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${o}, 1)));\n        ${H1(t)}\n      }\n    `;const d=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,f=h[0],p=h[1];if(p===u&&null==d)return`\n      float ${i}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${c}, ${l}, ${a}, ${o})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${f}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `;if(p===o&&null==d)return`\n      float ${i}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${n[1]*n[2]*n[3]*n[4]},\n               ${n[2]*n[3]*n[4]},\n               ${n[3]*n[4]},\n               ${n[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${f}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `;return`\n    float ${i}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${u} + col * ${c} + depth * ${l} +\n          depth2 * ${a} + depth3 * ${o} + depth4 + ${tb(e)};\n      vec2 uv = uvFromFlat(${f}, ${p}, index);\n      return sampleTexture(${e}, uv);\n    }\n  `}(t);default:throw new Error(`${e.length}-D input sampling is not yet supported`)}}function xve(t,n){switch(t.shapeInfo.logicalShape.length){case 0:return function BEt(t){const n=t.name;return`\n    vec4 ${"get"+n.charAt(0).toUpperCase()+n.slice(1)}() {\n      return ${el().texture2D}(${n}, halfCR);\n    }\n  `}(t);case 1:return function zEt(t,n){const e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1),s=t.shapeInfo.texShape,r=el();if(n)return`\n    vec4 ${i}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${r.texture2D}(${e}, uv);\n    }\n  `;const o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`\n    vec4 ${i}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${o[0]}, ${o[1]}, index);\n      return ${r.texture2D}(${e}, uv);\n    }\n  `}(t,n);case 2:return function GEt(t,n){const e=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),r=t.shapeInfo.texShape,o=r[0],a=r[1],l=el();if(null!=r&&Qi(e,r))return n?`\n      vec4 ${s}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);\n\n        return ${l.texture2D}(${i}, uv);\n      }\n    `:`\n      vec4 ${s}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);\n\n        return ${l.texture2D}(${i}, uv);\n      }\n    `;if(n)return`\n    vec4 ${s}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${i}TexShape[0]) / 2.0), ceil(float(${i}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${i}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${l.texture2D}(${i}, uv);\n    }\n  `;const c=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];return`\n    vec4 ${s}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${Math.ceil(e[1]/2)}, ${c[0]}, ${c[1]}, row, col);\n      return ${l.texture2D}(${i}, uv);\n    }\n  `}(t,n);case 3:return function HEt(t,n){const e=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),r=t.shapeInfo.texShape,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];if(1===e[0]){const f=[1,2],g=["b","row","col"];return`\n        ${xve(W1(t,e.slice(1)),n)}\n        vec4 ${s}(int b, int row, int col) {\n          return ${s}(${q1(g,f)});\n        }\n      `}const a=el();if(n)return`\n    vec4 ${s}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${i}TexShape[0]) / 2.0), ceil(float(${i}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${i}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${i}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${a.texture2D}(${i}, uv);\n    }\n  `;const l=o[0],c=o[1],u=Math.ceil(e[2]/2);return`\n    vec4 ${s}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${l}, ${c}, ${u*Math.ceil(e[1]/2)}, ${u}, b, row, col);\n      return ${a.texture2D}(${i}, uv);\n    }\n  `}(t,n);default:return function qEt(t,n){const e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1),s=el();if(n)return`\n    vec4 ${i}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${e}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${e}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${e}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${e}, uv);\n    }\n  `;const r=t.shapeInfo.logicalShape,o=r.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],d=Math.ceil(r[o-1]/2);let h=d*Math.ceil(r[o-2]/2),f="int b, int row, int col",p=`b * ${h} + (row / 2) * ${d} + (col / 2)`;for(let g=2;g<o-1;g++)f=`int b${g}, `+f,h*=r[o-g-1],p=`b${g} * ${h} + `+p;return`\n    vec4 ${i}(${f}) {\n      int index = ${p};\n      int texR = index / ${u};\n      int texC = index - texR * ${u};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});\n      return ${s.texture2D}(${e}, uv);\n    }\n  `}(t,n)}}const EEt="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",TEt="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",IEt="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",kEt="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function tb(t){return`offset${t}`}function H1(t){const n=t.name,e=at(t.shapeInfo.logicalShape);return e<2?`return ${n};`:`\n    for (int i = 0; i < ${e}; i++) {\n      if (i == index) {\n        return ${n}[i];\n      }\n    }\n  `}function Ks(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function YU(t,n,e){const{newShape:i,keptDims:s}=Wp(n),r=n.length,o=t&&3===r&&1===n[0],a=o?n.slice(1):i,l=!t&&r>1&&!Qi(n,e)&&i.length<r||o;return{useSqueezeShape:l,uniformShape:l?a:n,keptDims:s}}function W1(t,n){const e=JSON.parse(JSON.stringify(t));return e.shapeInfo.logicalShape=n,e}function q1(t,n){return n.map(e=>t[e]).join(", ")}function Tve(t,n,e){const i=[],s=[];let r,o,a,l=null,c=null;c=t.getUniformLocation(e,"NAN",!1),1===nt().getNumber("WEBGL_VERSION")&&(l=t.getUniformLocation(e,"INFINITY",!1));const u=!1;for(const d of n.variableNames){const h={name:d,uniform:t.getUniformLocation(e,d,u),offset:t.getUniformLocation(e,`offset${d}`,u)};n.enableShapeUniforms&&(h.shape=t.getUniformLocation(e,`${d}Shape`,u),h.texShape=t.getUniformLocation(e,`${d}TexShape`,u)),i.push(h)}if(n.enableShapeUniforms&&(r=t.getUniformLocation(e,"outShape",u),a=t.getUniformLocation(e,"outShapeStrides",u),o=t.getUniformLocation(e,"outTexShape",u)),n.customUniforms)for(const d of n.customUniforms)s.push(t.getUniformLocation(e,d.name,u));return{variablesLocations:i,customUniformLocations:s,infLoc:l,nanLoc:c,outShapeLocation:r,outShapeStridesLocation:a,outTexShapeLocation:o}}function Ive(t,n){if(t.length!==n.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${n.length} inputs`);t.forEach((e,i)=>{const s=e.logicalShape,r=n[i],o=r.shape;if(!Qi(s,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${o} must match`);if(e.isUniform&&r.isUniform)return;const a=e.texShape,l=r.isUniform?null:r.texData.texShape;if(!Qi(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function $a(t){return nt().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}class nTt{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=pR.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const e=el();this.outputShape=n,this.enableShapeUniforms=$a(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?CR(["r","c","d"],n):eb(["r","c","d"],n)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${e.output} = result;\n      }\n    `}}class iTt{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=pR.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const e=el();this.outputShape=n,this.enableShapeUniforms=$a(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?CR(["r","c","d"],n):eb(["r","c","d"],n)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${e.output} = result;\n      }\n    `}}class sTt{constructor(n){this.variableNames=["A"],this.outTexUsage=Du.DOWNLOAD;const e=el();this.outputShape=n,this.userCode=`\n      ${Sve}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${e.output} = encode_float(x);\n      }\n    `}}class rTt{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Du.DOWNLOAD;const e=el();this.outputShape=n,this.userCode=`\n      ${Sve}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${e.output} = encode_float(x);\n      }\n    `}}const oTt={R:0,G:1,B:2,A:3};class kve{constructor(n,e=!1,i="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=el();this.outputShape=n,this.enableShapeUniforms=$a(this.outputShape.length);let r="result";e&&(r="floor(result * 255. + 0.5)");let o="";for(let a=0;a<i.length;a++)o+=`\n          if(offset == ${a}) {\n            result = values[${oTt[i[a]]}];\n          }`;this.userCode=`\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":KU(n)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ${i.length});\n\n        flatIndex = idiv(flatIndex, ${i.length}, 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ${s.texture2D}(A, uv);\n          ${o}\n        }\n        ${s.output} = vec4(${r}, 0., 0., 0.);\n      }\n    `}}class aTt{constructor(n,e=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=el();this.outputShape=n,this.enableShapeUniforms=$a(this.outputShape.length);let s="",r="result";e&&(r="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=2*o+a;s+=`\n          localCoords = coords;\n          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${n[2]}`}) {\n          localCoords[2] += ${a};\n          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${n[1]}`}) {\n            localCoords[1] += ${o};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${i.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${l}] = values[0];\n            } else if (offset == 1) {\n              result[${l}] = values[1];\n            } else if (offset == 2) {\n              result[${l}] = values[2];\n            } else {\n              result[${l}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":KU(n)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${s}\n\n          ${i.output} = ${r};\n        }\n    `}}function GE(t,n,e,i,s,r){!function eEt(t,n){const e=nt().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||n<=0)throw new Error(`Requested texture size [${t}x${n}] is invalid.`);if(t>e||n>e)throw new Error(`Requested texture size [${t}x${n}] greater than WebGL maximum on this browser / GPU [${e}x${e}].`)}(n,e);const o=function Jxt(t){return Pf(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}(t),a=t.TEXTURE_2D;return Xt(t,()=>t.bindTexture(a,o)),Xt(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Xt(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Xt(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Xt(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),1===nt().getNumber("WEBGL_VERSION")?Xt(t,()=>t.texImage2D(a,0,i,n,e,0,s,r,null)):Xt(t,()=>t.texStorage2D(a,1,i,n,e)),Xt(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[e,n]}}function Dve(t){return t.internalFormatFloat}function Mve(t){return t.internalFormatHalfFloat}function Ave(t){return t.downloadTextureFormat}function Ove(t){return t.internalFormatPackedFloat}function Nve(t){return t.internalFormatPackedHalfFloat}class ZU{constructor(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const e=nt().getNumber("WEBGL_VERSION");if(null!=n?(this.gl=n,function Lxt(t,n){wm[t]=n}(e,n)):this.gl=Cd(e),n=this.gl,2===nt().getNumber("WEBGL_VERSION")){const r=n;this.createVertexArray=()=>Xt(r,()=>r.createVertexArray()),this.bindVertexArray=o=>Xt(r,()=>r.bindVertexArray(o)),this.deleteVertexArray=o=>Xt(r,()=>r.deleteVertexArray(o)),this.getVertexArray=()=>Xt(r,()=>r.getParameter(r.VERTEX_ARRAY_BINDING))}else if(null!=n){const r=n.getExtension("OES_vertex_array_object");if(null==r)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Xt(n,()=>r.createVertexArrayOES()),this.bindVertexArray=o=>Xt(n,()=>r.bindVertexArrayOES(o)),this.deleteVertexArray=o=>Xt(n,()=>r.deleteVertexArrayOES(o)),this.getVertexArray=()=>Xt(n,()=>n.getParameter(r.VERTEX_ARRAY_BINDING_OES))}let i="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===nt().getNumber("WEBGL_VERSION")){const o="OES_texture_half_float";if(this.textureFloatExtension=_R(this.gl,"OES_texture_float"),Mu(this.gl,o))this.textureHalfFloatExtension=_R(this.gl,o);else if(nt().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(i),Mu(this.gl,s))this.colorBufferHalfFloatExtension=_R(this.gl,s);else if(nt().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(i="EXT_color_buffer_float",Mu(this.gl,i))this.colorBufferFloatExtension=this.gl.getExtension(i);else{if(!Mu(this.gl,s))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(s)}this.vertexBuffer=function cTt(t){return function Zxt(t,n){const e=Pf(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Xt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,e)),Xt(t,()=>t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)),e}(t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}(this.gl),this.indexBuffer=function uTt(t){return function Qxt(t,n){const e=Pf(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Xt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e)),Xt(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)),e}(t,new Uint16Array([0,1,2,2,1,3]))}(this.gl),this.framebuffer=function tEt(t){return Pf(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=jU(this.gl,this.textureHalfFloatExtension)}get debug(){return nt().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const n=this.gl;Xt(n,()=>n.finish()),Xt(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,null)),Xt(n,()=>n.deleteFramebuffer(this.framebuffer)),Xt(n,()=>n.bindBuffer(n.ARRAY_BUFFER,null)),Xt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)),Xt(n,()=>n.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(n,e){return this.throwIfDisposed(),function dTt(t,n,e,i){const[s,r]=zE(n,e);return GE(t,s,r,Dve(i),i.textureFormatFloat,t.FLOAT)}(this.gl,n,e,this.textureConfig)}createFloat16MatrixTexture(n,e){return this.throwIfDisposed(),function hTt(t,n,e,i){const[s,r]=zE(n,e);return GE(t,s,r,Mve(i),i.textureFormatFloat,i.textureTypeHalfFloat)}(this.gl,n,e,this.textureConfig)}createUnsignedBytesMatrixTexture(n,e){return this.throwIfDisposed(),function fTt(t,n,e,i){const[s,r]=zE(n,e);return GE(t,s,r,Ave(i),t.RGBA,t.UNSIGNED_BYTE)}(this.gl,n,e,this.textureConfig)}uploadPixelDataToTexture(n,e){this.throwIfDisposed(),function bTt(t,n,e){Xt(t,()=>t.bindTexture(t.TEXTURE_2D,n)),e.data instanceof Uint8Array?2===nt().getNumber("WEBGL_VERSION")?Xt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,e.data)):Xt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,e.data)):2===nt().getNumber("WEBGL_VERSION")?Xt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,e)):Xt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)),Xt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}(this.gl,n,e)}uploadDenseMatrixToTexture(n,e,i,s){this.throwIfDisposed(),function gTt(t,n,e,i,s,r){let o,a,l;Xt(t,()=>t.bindTexture(t.TEXTURE_2D,n)),s instanceof Uint8Array?(o=new Uint8Array(e*i*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(e*i*4),a=t.FLOAT,l=r.internalFormatPackedFloat),o.set(s),2===nt().getNumber("WEBGL_VERSION")?Xt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,e,i,t.RGBA,a,o)):Xt(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,e,i,0,t.RGBA,a,o)),Xt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}(this.gl,n,e,i,s,this.textureConfig)}createFloat16PackedMatrixTexture(n,e){return this.throwIfDisposed(),function mTt(t,n,e,i){const[s,r]=z1(n,e);return GE(t,s,r,Nve(i),t.RGBA,i.textureTypeHalfFloat)}(this.gl,n,e,this.textureConfig)}createPackedMatrixTexture(n,e){return this.throwIfDisposed(),function pTt(t,n,e,i){const[s,r]=z1(n,e);return GE(t,s,r,Ove(i),t.RGBA,t.FLOAT)}(this.gl,n,e,this.textureConfig)}deleteMatrixTexture(n){this.throwIfDisposed(),this.outputTexture===n&&(vve(this.gl,this.framebuffer),this.outputTexture=null),Xt(this.gl,()=>this.gl.deleteTexture(n))}downloadByteEncodedFloatMatrixFromOutputTexture(n,e,i){return this.downloadMatrixDriver(n,()=>function wTt(t,n,e,i){const[s,r]=zE(n,e),a=new Uint8Array(function Bxt(t,n){return t*n}(n*e,4));return Xt(t,()=>t.readPixels(0,0,s,r,i.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}(this.gl,e,i,this.textureConfig))}downloadPackedMatrixFromBuffer(n,e,i,s,r,o){return function STt(t,n,e,i,s,r,o,a){const l=t,c=new Float32Array(function Vxt(t,n){const[e,i]=z1(t,n);return e*i*4}(r,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,n),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}(this.gl,n,0,0,0,r,o)}downloadFloat32MatrixFromBuffer(n,e){return function yTt(t,n,e){const i=t,s=new Float32Array(e);return i.bindBuffer(i.PIXEL_PACK_BUFFER,n),i.getBufferSubData(i.PIXEL_PACK_BUFFER,0,s),i.bindBuffer(i.PIXEL_PACK_BUFFER,null),s}(this.gl,n,e)}createBufferFromTexture(n,e,i){this.bindTextureToFrameBuffer(n);const s=function vTt(t,n,e,i){const s=t.createBuffer();Xt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const a=16*n*e;return Xt(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Xt(t,()=>t.readPixels(0,0,e,n,t.RGBA,t.FLOAT,0)),Xt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}(this.gl,e,i);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const n=this.createFence(this.gl);return this.pollFence(n)}createFence(n){let e,i;if(nt().getBool("WEBGL_FENCE_API_ENABLED")){const s=n,r=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),i=()=>{const o=s.clientWaitSync(r,0,0);return o===s.ALREADY_SIGNALED||o===s.CONDITION_SATISFIED},e=r}else nt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),i=()=>this.isQueryAvailable(e,nt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):i=()=>!0;return{query:e,isFencePassed:i}}downloadMatrixFromPackedTexture(n,e,i){return this.downloadMatrixDriver(n,()=>function CTt(t,n,e){const i=new Float32Array(n*e*4);return Xt(t,()=>t.readPixels(0,0,e,n,t.RGBA,t.FLOAT,i)),i}(this.gl,e,i))}createProgram(n){this.throwIfDisposed();const e=this.gl;null==this.vertexShader&&(this.vertexShader=function lTt(t){const n=el();return function Wxt(t,n){const e=Pf(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Xt(t,()=>t.shaderSource(e,n)),Xt(t,()=>t.compileShader(e)),!1===t.getShaderParameter(e,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(e)),new Error("Failed to compile vertex shader.");return e}(t,`${n.version}\n    precision highp float;\n    ${n.attribute} vec3 clipSpacePos;\n    ${n.attribute} vec2 uv;\n    ${n.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}(e));const i=function Xxt(t){return Pf(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}(e);Xt(e,()=>e.attachShader(i,this.vertexShader)),Xt(e,()=>e.attachShader(i,n)),function Yxt(t,n){if(Xt(t,()=>t.linkProgram(n)),!nt().get("ENGINE_COMPILE_ONLY")&&!1===t.getProgramParameter(n,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}(e,i);const s=Object.assign(i,{vao:this.createVertexArray()});return this.debug&&HU(e,s),s}buildVao(n){this.setProgram(n),this.bindVertexArray(n.vao);const e=this.gl;Xt(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),function _Tt(t,n,e){Xt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,e)),bve(t,n,"clipSpacePos",e,3,20,0)&&bve(t,n,"uv",e,2,20,12)}(e,n,this.vertexBuffer)}deleteProgram(n){this.throwIfDisposed(),n===this.program&&(this.program=null),null!=n&&(Xt(this.gl,()=>this.gl.deleteProgram(n)),this.deleteVertexArray(n.vao))}setProgram(n){this.throwIfDisposed(),this.program=n,null!=this.program&&this.debug&&HU(this.gl,this.program),Xt(this.gl,()=>this.gl.useProgram(n))}getUniformLocation(n,e,i=!0){return this.throwIfDisposed(),i?function iEt(t,n,e){return Pf(t,()=>t.getUniformLocation(n,e),'uniform "'+e+'" not present in program.')}(this.gl,n,e):function sEt(t,n,e){return t.getUniformLocation(n,e)}(this.gl,n,e)}getAttributeLocation(n,e){return this.throwIfDisposed(),Xt(this.gl,()=>this.gl.getAttribLocation(n,e))}getUniformLocationNoThrow(n,e){return this.throwIfDisposed(),this.gl.getUniformLocation(n,e)}setInputMatrixTexture(n,e,i){this.throwIfDisposed(),this.throwIfNoProgram(),rEt(this.gl,n,e,i)}setOutputMatrixTexture(n,e,i){this.setOutputMatrixTextureDriver(n,i,e)}setOutputPackedMatrixTexture(n,e,i){this.throwIfDisposed();const[s,r]=z1(e,i);this.setOutputMatrixTextureDriver(n,s,r)}setOutputMatrixWriteRegion(n,e,i,s){this.setOutputMatrixWriteRegionDriver(i,n,s,e)}setOutputPackedMatrixWriteRegion(n,e,i,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&HU(this.gl,this.program),gR(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const n=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Xt(n,()=>n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Xt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=_R(this.gl,2===nt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===nt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const i=this.gl,s=this.getQueryTimerExtensionWebGL2(),r=i.createQuery();return i.beginQuery(s.TIME_ELAPSED_EXT,r),r}const n=this.getQueryTimerExtensionWebGL1(),e=n.createQueryEXT();return n.beginQueryEXT(n.TIME_ELAPSED_EXT,e),e}endQuery(){if(2===nt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,i=this.getQueryTimerExtensionWebGL2();return void e.endQuery(i.TIME_ELAPSED_EXT)}const n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}waitForQueryAndGetTime(n){var e=this;return de(function*(){return yield jhe(()=>e.disposed||e.isQueryAvailable(n,nt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),e.getQueryTime(n,nt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})()}getQueryTime(n,e){if(0===e)return null;if(2===e){const i=this.gl;return i.getQueryParameter(n,i.QUERY_RESULT)/1e6}{const i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(n,e){if(0===e)return!0;if(2===e){const i=this.gl,s=this.getQueryTimerExtensionWebGL2(),r=i.getQueryParameter(n,i.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const i=this.getQueryTimerExtensionWebGL1(),s=i.getQueryObjectEXT(n,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(n){return new Promise(e=>{this.addItemToPoll(()=>n.isFencePassed(),()=>e())})}pollItems(){const n=function xTt(t){let n=0;for(;n<t.length&&t[n]();++n);return n-1}(this.itemsToPoll.map(e=>e.isDoneFn));for(let e=0;e<=n;++e){const{resolveFn:i}=this.itemsToPoll[e];i()}this.itemsToPoll=this.itemsToPoll.slice(n+1)}addItemToPoll(n,e){if(this.itemsToPoll.push({isDoneFn:n,resolveFn:e}),this.itemsToPoll.length>1)return;let i;"setTimeoutCustom"in nt().platform&&(i=nt().platform.setTimeoutCustom.bind(nt().platform)),jhe(()=>(this.pollItems(),0===this.itemsToPoll.length),()=>0,null,i)}bindTextureToFrameBuffer(n){this.throwIfDisposed(),WU(this.gl,n,this.framebuffer),this.debug&&gR(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(WU(this.gl,this.outputTexture,this.framebuffer),this.debug&&gR(this.gl)):vve(this.gl,this.framebuffer)}downloadMatrixDriver(n,e){this.bindTextureToFrameBuffer(n);const i=e();return this.unbindTextureToFrameBuffer(),i}setOutputMatrixTextureDriver(n,e,i){this.throwIfDisposed();const s=this.gl;WU(s,n,this.framebuffer),this.debug&&gR(s),this.outputTexture=n,Xt(s,()=>s.viewport(0,0,e,i)),Xt(s,()=>s.scissor(0,0,e,i))}setOutputMatrixWriteRegionDriver(n,e,i,s){this.throwIfDisposed(),Xt(this.gl,()=>this.gl.scissor(n,e,i,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{mx:ETt,XI:Rve,Nk:TTt,f6:ITt,ct:kTt,YG:DTt,hH:MTt,z3:ATt,sG:OTt,uM:NTt,vS:RTt,qB:FTt,GG:LTt,rq:PTt,lg:$Tt,WR:BTt,cu:VTt,GE:zTt,px:UTt,jC:GTt,He:jTt,hE:HTt,BF:WTt,Dk:qTt,cl:KTt,_B:XTt,ub:YTt,_f:ZTt,Ku:QTt,qy:JTt,Zy:e2t,bu:t2t,zv:n2t,dH:Fve,HS:i2t,yH:s2t,l3:r2t,z9:Lve,x6:o2t,_m:a2t,eW:l2t,GK:c2t,SP:u2t,yr:d2t,dl:h2t,Dw:f2t,xT:p2t,_X:QU,wz:m2t}=B;function Pve(t,n){return["x","y","z","w","u","v"].slice(0,n).map(e=>`${t}.${e}`)}function tl(t,n){return 1===n?[t]:Pve(t,n)}class g2t{constructor(n){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n,this.rank=n.length,this.enableShapeUniforms=$a(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=tl("rc",this.rank),i=Ks(this.rank),s=this.getOutOfBoundsCondition(e),r=this.getSetup(e),o=this.getOutput(e);this.userCode=`\n        void main() {\n          ${i} rc = getOutputCoords();\n\n          if(${s}) {\n            setOutput(vec4(0));\n          } else {\n            ${r}\n\n            setOutput(vec4(${o}));\n          }\n        }\n      `}}getSourceCoordsArr(n){const e=[];for(let i=0;i<=1;i++)for(let s=0;s<=1;s++){let r=`${0===i?"r":"rp1"}, ${0===s?"c":"cp1"}`;for(let o=2;o<this.rank;o++)r=`${n[n.length-1-o]},`+r;e.push(r)}return e}getOutOfBoundsCondition(n){if(1===this.rank)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let e="";for(let i=this.rank-2;i<this.rank;i++)e+=`${n[i]} >= ${this.enableShapeUniforms?`outShape[${i}]`:this.outputShape[i]}`,i<this.rank-1&&(e+="||");return e}getSetup(n){if(1===this.rank)return"";const e=n.slice(-2);return`\n      int r = ${e[0]};\n      int c = ${e[1]};\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ${this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1]};\n      bool rEdge = rp1 >= ${this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2]};\n    `}getOutput(n){const e=this.getSourceCoordsArr(n);return 1===this.rank?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${e[0]}),\n            cEdge ? 0. : getA(${e[1]}),\n            rEdge ? 0. : getA(${e[2]}),\n            rEdge || cEdge ? 0. : getA(${e[3]})`}}class $ve{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=n,this.enableShapeUniforms=$a(this.outputShape.length);let i="";for(let s=0;s<4;s++){let r="thisRC = rc;";s%2==1&&(r+="thisRC.z += 1;"),s>1&&(r+="thisRC.y += 1;"),i+=`\n        ${r}\n        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${s}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${s>0?"}":""}\n      `}this.userCode=`\n      ${function b2t(t,n){return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${n?function _Et(t,n,e="index"){const s=function mEt(t,n){const e=t.length,i=t.map(r=>`${n}[${r}]`),s=new Array(e-1);s[e-2]=i[e-1];for(let r=e-3;r>=0;--r)s[r]=`(${s[r+1]} * ${i[r+1]})`;return s}(t.map((r,o)=>o),n);return s.map((r,o)=>`int ${t[o]} = ${e} / ${s[o]}; ${o===s.length-1?`int ${t[o+1]} = ${e} - ${t[o]} * ${s[o]}`:`index -= ${t[o]} * ${s[o]}`};`).join("")}(["r","c","d"],"inputShape"):eb(["r","c","d"],t)}\n      return ivec3(r, c, d);\n    }\n  `}(e,this.enableShapeUniforms)}\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":KU(n)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":n[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":n[2]};\n\n        ${i}\n\n        setOutput(result);\n      }\n    `}}class v2t{constructor(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(n,e,i){const s=Vve(e,i),r=zve(n,s,i);r in this.freeTextures||(this.freeTextures[r]=[]),r in this.usedTextures||(this.usedTextures[r]=[]);const o=Bve(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,i);if(this.freeTextures[r].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[r].pop();return this.usedTextures[r].push(l),l}let a;return s===Pa.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):s===Pa.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):s===Pa.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):s===Pa.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):s===Pa.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[r].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(n,e,i,s){if(null==this.freeTextures)return;const r=Vve(i,s),o=zve(e,r,s);o in this.freeTextures||(this.freeTextures[o]=[]);const a=Bve(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=nt().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==l&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(n.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(n),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[o],u=c&&c.indexOf(n);if(null==u||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${this.numFreeTextures+this.numUsedTextures})`);const e=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*e)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const n in this.freeTextures)this.freeTextures[n].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(const n in this.usedTextures)this.usedTextures[n].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Bve(t,n,e,i,s){const r=function w2t(t,n){switch(t){case Pa.PACKED_2X2_FLOAT32:return Ove(n);case Pa.PACKED_2X2_FLOAT16:return Nve(n);case Pa.UNPACKED_FLOAT32:return Dve(n);case Pa.UNPACKED_FLOAT16:return Mve(n);case Pa.PACKED_4X1_UNSIGNED_BYTE:return Ave(n);default:throw new Error(`Unknown physical texture type ${t}`)}}(n,i);let o;if(s){const[l,c]=z1(t[0],t[1]);o=l*c}else{const[l,c]=zE(t[0],t[1]);o=l*c}const a=function y2t(t,n){if(n===t.R32F)return 4;if(n===t.R16F)return 2;if(n===t.RGBA32F)return 16;if(n===t.RGBA)return 16;if(n===t.RGBA16F)return 8;if(n===t.RGBA8)return 4;throw new Error(`Unknown internal format ${n}`)}(e,r);return o*a}function Vve(t,n){if(t===Du.UPLOAD)return Pa.PACKED_2X2_FLOAT32;if(t===Du.RENDER||null==t)return function S2t(t){return nt().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Pa.PACKED_2X2_FLOAT32:Pa.UNPACKED_FLOAT32:t?Pa.PACKED_2X2_FLOAT16:Pa.UNPACKED_FLOAT16}(n);if(t===Du.DOWNLOAD||t===Du.PIXELS)return Pa.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function zve(t,n,e){return`${t[0]}_${t[1]}_${n}_${e}`}class Th{constructor(n,e){this.variableNames=["A"],this.outputShape=n,this.enableShapeUniforms=$a(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${e}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const Hc="if (isnan(x)) return x;",C2t="return x;",Uve="return abs(x);",x2t="return (x >= 0.0) ? x : (exp(x) - 1.0);",E2t=Hc+"\n  return (x < 0.0) ? 0.0 : x;\n",T2t=Hc+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Sm="return x;",I2t="return 1.0 / (1.0 + exp(-1.0 * x));",k2t="return x;",D2t="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",M2t="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",A2t="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",O2t="return 1.0 / (1.0 + exp(-1.0 * x));";class Cm{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=$a(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${e}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}class N2t{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=n,this.enableShapeUniforms=$a(this.outputShape.length);const e=n.length,i=tl("rc",e),s=Ks(e),r=function _2t(t,n){if(1===t)return"rc";let e="";for(let i=0;i<t;i++)e+=n[i],i<t-1&&(e+=",");return e}(e,i),o=i.slice(-2),a=e<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`\n      void main() {\n        ${s} rc = getOutputCoords();\n        vec4 packedInput = getA(${r});\n\n        setOutput(getChannel(packedInput, ${a}));\n      }\n    `}}const R2t=z7,ER={},$2t=nt().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");let z2t=(()=>{class t extends eV{nextDataId(){return t.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!nt().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let i;if(null!=e){if(e instanceof ZU)i=e;else{const s=Cd(nt().getNumber("WEBGL_VERSION"),e);i=new ZU(s)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const s=Cd(nt().getNumber("WEBGL_VERSION"));i=new ZU(s),this.binaryCache=function P2t(t){return t in ER||(ER[t]={}),ER[t]}(nt().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=i,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new v2t(this.gpgpu),this.numMBBeforeWarning=function V2t(){return null==nt().global.screen?1024:nt().global.screen.height*nt().global.screen.width*window.devicePixelRatio*600/1024/1024}(),this.texData=new Uhe(this,dh())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,i,s,r,o,a){const l=this.makeTensorInfo(i,s),c=this.texData.get(l.dataId);c.isPacked=!1,c.texture={texture:e,texShape:[r,o]},c.texShape=[r,o];const u=bR(i),d=new kve(u,!1,a),h=this.runWebGLProgram(d,[l],s,[[r,o]]);return h.shape=i,c.texture=null,this.disposeIntermediateTensorInfo(l),h.dataId}write(e,i,s){if((nt().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||nt().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===s&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:i,dtype:s,values:e,usage:Du.UPLOAD,refCount:1}),r}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){this.texData.get(e).refCount++}decRef(e){this.texData.has(e)&&this.texData.get(e).refCount--}move(e,i,s,r,o){if(nt().getBool("DEBUG")&&this.checkNumericalProblems(i),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:s,dtype:r,values:i,usage:Du.UPLOAD,refCount:o})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const i=this.texData.get(e),{values:s,dtype:r,complexTensorInfos:o,slice:a,shape:l,isPacked:c}=i;if(null!=a){let f;f=c?new Cm(l,Sm):new Th(l,Sm);const p=this.runWebGLProgram(f,[{dataId:e,shape:l,dtype:r}],r),g=this.readSync(p.dataId);return this.disposeIntermediateTensorInfo(p),g}if(null!=s)return this.convertAndCacheOnCPU(e);if("string"===r)return s;const u=null!=this.activeTimers;let d,h;return u&&(d=Oa()),h="complex64"===r?Af(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.getValuesFromTexture(e),u&&(this.downloadWaitMs+=Oa()-d),this.convertAndCacheOnCPU(e,h)}read(e){var i=this;return de(function*(){if(i.pendingRead.has(e)){const v=i.pendingRead.get(e);return new Promise(y=>v.push(y))}const s=i.texData.get(e),{values:r,shape:o,slice:a,dtype:l,complexTensorInfos:c,isPacked:u}=s;if(null!=a){let v;v=u?new Cm(o,Sm):new Th(o,Sm);const y=i.runWebGLProgram(v,[{dataId:e,shape:o,dtype:l}],l),w=i.read(y.dataId);return i.disposeIntermediateTensorInfo(y),w}if(null!=r)return i.convertAndCacheOnCPU(e);if(nt().getBool("DEBUG")&&!nt().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===nt().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let h,f,d=null;if("complex64"!==l&&nt().get("WEBGL_BUFFER_SUPPORTED")){h=i.decode(e);const v=i.texData.get(h.dataId);d=i.gpgpu.createBufferFromTexture(v.texture.texture,...mR(o))}if(i.pendingRead.set(e,[]),"complex64"!==l&&(yield i.gpgpu.createAndWaitForFence()),"complex64"===l){const v=yield Promise.all([i.read(c.real.dataId),i.read(c.imag.dataId)]);f=Af(v[0],v[1])}else if(null==d)f=i.getValuesFromTexture(e);else{const v=at(o);f=i.gpgpu.downloadFloat32MatrixFromBuffer(d,v)}if(null!=h&&i.disposeIntermediateTensorInfo(h),null!=d){const v=i.gpgpu.gl;Xt(v,()=>v.deleteBuffer(d))}const p=i.convertAndCacheOnCPU(e,f),g=i.pendingRead.get(e);return i.pendingRead.delete(e),g.forEach(v=>v(p)),i.pendingDisposal.has(e)&&(i.pendingDisposal.delete(e),i.disposeData(e)&&dh().removeDataId(e,i),i.pendingDeletes--),p})()}readToGPU(e,i={}){const s=this.texData.get(e),{values:r,shape:o,slice:a,dtype:l,isPacked:c,texture:u}=s;if("complex64"===l)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=a){let p;p=c?new Cm(o,Sm):new Th(o,Sm);const g=this.runWebGLProgram(p,[{dataId:e,shape:o,dtype:l}],l),v=this.readToGPU(g,i);return this.disposeIntermediateTensorInfo(g),v}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const d=this.decode(e,i.customTexShape),h=dh().makeTensorFromTensorInfo(d),f=this.texData.get(d.dataId);return Object.assign({tensorRef:h},f.texture)}bufferSync(e){const i=this.readSync(e.dataId);if("string"===e.dtype)try{const s=i.map(r=>Zp(r));return xi(e.shape,e.dtype,s)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return xi(e.shape,e.dtype,i)}checkNumericalProblems(e){if(null!=e)for(let i=0;i<e.length;i++){const s=e[i];if(!jxt(s))throw nt().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${s} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${s} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:i,dtype:s,isPacked:r}=this.texData.get(e),o=at(i);if(nt().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(e),p=this.texData.get(f.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(p.texture.texture,...mR(i)).subarray(0,o);return this.disposeIntermediateTensorInfo(f),g}const a=nt().getBool("WEBGL_PACK")&&!0===r,l=a?bR(i):i,c=a?new rTt(l):new sTt(l),u=this.runWebGLProgram(c,[{shape:l,dtype:s,dataId:e}],"float32"),d=this.texData.get(u.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(u),h}timerAvailable(){return nt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){var i=this;const s=this.activeTimers,r=[];let o=!1;null==this.programTimersStack?(this.programTimersStack=r,o=!0):this.activeTimers.push(r),this.activeTimers=r,e();const a=Mg(this.activeTimers.map(u=>u.query)).filter(u=>null!=u),l=Mg(this.activeTimers.map(u=>u.name)).filter(u=>null!=u);this.activeTimers=s,o&&(this.programTimersStack=null);const c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return de(function*(){if(nt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const u=yield Promise.all(a);c.kernelMs=function Qrt(t){let n=0;for(let e=0;e<t.length;e++)n+=t[e];return n}(u),c.getExtraProfileInfo=()=>u.map((d,h)=>({name:l[h],ms:d})).map(d=>`${d.name}: ${d.ms}`).join(", ")}else c.kernelMs={error:"WebGL query timers are not supported in this environment."};return i.uploadWaitMs=0,i.downloadWaitMs=0,c})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return nt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Oa(),endMs:null}}endTimer(e){return nt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Oa(),e)}getQueryTime(e){var i=this;return de(function*(){return nt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?i.gpgpu.waitForQueryAndGetTime(e):e.endMs-e.startMs})()}disposeData(e,i=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(i?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!i&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:s}=this.texData.get(e);return null!=s&&(this.disposeData(s.real.dataId,i),this.disposeData(s.imag.dataId,i)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:i,dtype:s,texShape:r,usage:o,isPacked:a,slice:l}=this.texData.get(e),c=l&&l.origDataId||e,u=this.dataRefCount.get(c);u>1?this.dataRefCount.set(c,u-1):(this.dataRefCount.delete(c),null!=i&&(this.numBytesInGPU-=this.computeBytes(r,s),this.textureManager.releaseTexture(i,r,o,a)));const d=this.texData.get(e);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,i=$2t){return nt().getBool("WEBGL_CPU_FORWARD")&&e.every(s=>null==this.texData.get(s.dataId).texture&&at(s.shape)<i)}getGPGPUContext(){return this.gpgpu}where(e){Lc("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const i=e.dataSync();return R2t(e.shape,i)}packedUnaryOp(e,i,s){const r=new Cm(e.shape,i),o=this.compileAndRun(r,[e],s);return dh().makeTensorFromTensorInfo(o)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const r=Fve(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,r)}if(nt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Uve,e.dtype);const i=new Th(e.shape,Uve),s=this.compileAndRun(i,[e]);return dh().makeTensorFromTensorInfo(s)}makeTensorInfo(e,i,s){let r;if("string"===i&&null!=s&&s.length>0&&ox(s[0])){const o=s.map(a=>Yp(a));r=this.write(o,e,i)}else r=this.write(s,e,i);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:i}}makeOutput(e,i,s){return dh().makeTensorFromTensorInfo(this.makeTensorInfo(e,i,s),this)}unpackTensor(e){const i=new N2t(e.shape);return this.runWebGLProgram(i,[e],e.dtype)}packTensor(e){const i=new g2t(e.shape);return this.runWebGLProgram(i,[e],e.dtype,null,!0)}packedReshape(e,i){const s=[U1(e.shape),...G1(e.shape)],r={dtype:e.dtype,shape:s,dataId:e.dataId},o=[U1(i),...G1(i)],a=new $ve(o,s),u=this.runWebGLProgram(a,[r],e.dtype,[s],!0);return{dataId:u.dataId,shape:i,dtype:u.dtype}}decode(e,i){const s=this.texData.get(e),{isPacked:r,shape:o,dtype:a}=s;null!=i&&le(at(o)<=i[0]*i[1]*4,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.");const l=bR(o);let c;c=r?new iTt(l):new nTt(l);const d=[i??mR(l)];return{dtype:a,shape:o,dataId:this.runWebGLProgram(c,[{shape:l,dtype:a,dataId:e}],a,d,!0,i).dataId}}runWebGLProgram(e,i,s,r,o=!1,a){const l=this.makeTensorInfo(e.outputShape,s),c=this.texData.get(l.dataId);if(e.packedOutput&&(c.isPacked=!0),e.outPackingScheme===pR.DENSE){const w=a??mR(e.outputShape);c.texShape=w.map(E=>2*E)}if(null!=e.outTexUsage&&(c.usage=e.outTexUsage),0===at(l.shape))return c.values=ga(l.dtype,0),l;const u=[],d=i.map(w=>{if("complex64"===w.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let E=this.texData.get(w.dataId);if(null==E.texture){if(!e.packedInputs&&at(w.shape)<=nt().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:E.values};e.packedInputs&&(E.isPacked=!0,E.shape=w.shape)}if(this.uploadToGPU(w.dataId),!!E.isPacked!=!!e.packedInputs)w=E.isPacked?this.unpackTensor(w):this.packTensor(w),u.push(w),E=this.texData.get(w.dataId);else if(E.isPacked&&!yR(E.shape,w.shape)){const T=w,L=w.shape;w.shape=E.shape,w=this.packedReshape(w,L),u.push(w),E=this.texData.get(w.dataId),T.shape=L}return{shape:w.shape,texData:E,isUniform:!1}});this.uploadToGPU(l.dataId);const h={shape:l.shape,texData:c,isUniform:!1},f=function tTt(t,n,e){let i="";n.concat(e).forEach(o=>{const a=null!=o.texData&&null!=o.texData.slice&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=YU(t.packedInputs,o.shape,l);let h="",f="",p="";if(1===u.length&&t.packedInputs){const L=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];h=`${L[0]>1}_${L[1]>1}`}else if(2!==u.length||t.packedInputs){if(u.length>2&&!t.packedInputs){const L=xn(u);p=`${L[0]===l[1]}_${L[L.length-1]===l[1]}`}}else f=`${u[0]>1}_${u[1]>1}`;const g=o.shape.length,v=2===u.length&&Qi(o.shape,l),y=1===at(o.shape),w=v1(o.shape,e.shape),E=!t.packedInputs&&g===e.shape.length&&Qi(l,e.texData.texShape);i+=`${g}_${E}_${c?d:""}_${u.length}_${y}_${w}_${v}_${h}_${f}_${p}_${t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`}_${a}`}else i+=`${o.shape}_${o.isUniform?"uniform":o.texData.texShape}_${a}`});let r=t.constructor.name;return r+="_"+i+"_"+t.userCode+`${nt().getNumber("WEBGL_VERSION")}`,r}(e,d,h),p=this.getAndSaveBinary(f,()=>function JEt(t,n,e,i){const s=e.map((u,d)=>{const h={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:!u.isUniform&&u.texData.isPacked,flatOffset:null};return null!=u.texData&&null!=u.texData.slice&&u.texData.slice.flatOffset>0&&(h.flatOffset=u.texData.slice.flatOffset),{name:n.variableNames[d],shapeInfo:h}}),r=s.map(u=>u.shapeInfo),o={logicalShape:i.shape,texShape:i.texData.texShape,isUniform:!1,isPacked:i.texData.isPacked,flatOffset:null},a=gEt(s,o,n),l=function qxt(t,n){const e=Pf(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Xt(t,()=>t.shaderSource(e,n)),Xt(t,()=>t.compileShader(e)),nt().get("ENGINE_COMPILE_ONLY"))return e;if(!1===t.getShaderParameter(e,t.COMPILE_STATUS))throw gve(n,t.getShaderInfoLog(e)),new Error("Failed to compile fragment shader.");return e}(t.gl,a),c=t.createProgram(l);return nt().get("ENGINE_COMPILE_ONLY")?{program:n,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:r,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:n,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:r,outShapeInfo:o},Tve(t,n,c)))}(this.gpgpu,e,d,h)),g=null!=this.activeTimers;let v;g&&(v=this.startTimer()),nt().get("ENGINE_COMPILE_ONLY")||function eTt(t,n,e,i,s){n.program.enableShapeUniforms||(Ive(n.inShapeInfos,e),Ive([n.outShapeInfo],[i]));const r=i.texData.texture,o=i.texData.texShape;i.texData.isPacked?t.setOutputPackedMatrixTexture(r.texture,o[0],o[1]):t.setOutputMatrixTexture(r.texture,o[0],o[1]),t.setProgram(n.webGLProgram),t.bindVertexArray(n.webGLProgram.vao),1===nt().getNumber("WEBGL_VERSION")&&null!==n.infLoc&&t.gl.uniform1f(n.infLoc,1/0),null!==n.nanLoc&&t.gl.uniform1f(n.nanLoc,NaN);for(let l=0;l<e.length;++l){const c=e[l],{uniform:u,offset:d,shape:h,texShape:f}=n.variablesLocations[l];if(h){const{uniformShape:p}=YU(n.program.packedInputs,c.shape,c.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(h,new Int32Array(p));break;case 2:t.gl.uniform2iv(h,new Int32Array(p));break;case 3:t.gl.uniform3iv(h,new Int32Array(p));break;case 4:t.gl.uniform4iv(h,new Int32Array(p))}}if(f&&t.gl.uniform2i(f,c.texData.texShape[0],c.texData.texShape[1]),null!=u){if(c.isUniform){if(at(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let p=c.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(u,p)}continue}null!=c.texData.slice&&null!=d&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const a=n.outShapeLocation;if(a)switch(i.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(i.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(i.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(i.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(i.shape))}if(n.outShapeStridesLocation){const l=xn(i.shape);switch(i.shape.length){case 2:t.gl.uniform1iv(n.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(n.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(n.outShapeStridesLocation,new Int32Array(l))}}if(n.outTexShapeLocation&&t.gl.uniform2i(n.outTexShapeLocation,i.texData.texShape[0],i.texData.texShape[1]),n.program.customUniforms&&s)for(let l=0;l<n.program.customUniforms.length;++l){const c=n.program.customUniforms[l],u=n.customUniformLocations[l],d=s[l];if("float"===c.type)t.gl.uniform1fv(u,d);else if("vec2"===c.type)t.gl.uniform2fv(u,d);else if("vec3"===c.type)t.gl.uniform3fv(u,d);else if("vec4"===c.type)t.gl.uniform4fv(u,d);else if("int"===c.type)t.gl.uniform1iv(u,d);else if("ivec2"===c.type)t.gl.uniform2iv(u,d);else if("ivec3"===c.type)t.gl.uniform3iv(u,d);else{if("ivec4"!==c.type)throw Error(`uniform type ${c.type} is not supported yet.`);t.gl.uniform4iv(u,d)}}t.executeProgram()}(this.gpgpu,p,d,h,r),u.forEach(w=>this.disposeIntermediateTensorInfo(w)),g&&(v=this.endTimer(v),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(v)}));const y=nt().getNumber("WEBGL_FLUSH_THRESHOLD");if(y>0){const w=Oa();w-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=w)}if(!nt().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&!1===o){const w=this.unpackTensor(l);return this.disposeIntermediateTensorInfo(l),w}return l}compileAndRun(e,i,s,r,o=!1){return this.runWebGLProgram(e,i,s=s||i[0].dtype,r,o)}getAndSaveBinary(e,i){return e in this.binaryCache||(this.binaryCache[e]=i()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(nt().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(i=>{this.gpgpu.deleteProgram(this.binaryCache[i].webGLProgram),delete this.binaryCache[i]}),this.textureManager.dispose(),null!=this.canvas&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=et(()=>{if(!nt().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=nt().getBool("DEBUG");nt().set("DEBUG",!1);const i=this.abs(En(1e-8)).dataSync()[0];if(nt().set("DEBUG",e),i>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const i=this.texData.get(e),{shape:s,dtype:r,values:o,texture:a,usage:l,isPacked:c}=i;if(null!=a)return;const u=null!=this.activeTimers;let d;u&&(d=Oa());let h=i.texShape;if(null==h&&(h=function aEt(t,n=!1){let e=nt().getNumber("WEBGL_MAX_TEXTURE_SIZE"),i=nt().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");i===1/0&&nt().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(i=e/2),n&&(e*=2,i*=2,1===(t=t.map((a,l)=>l>=t.length-2?tV(t[l]):t[l])).length&&(t=[2,t[0]])),2!==t.length&&(t=Wp(t).newShape);let s=at(t),r=null;t.length<=1&&s<=e?r=[1,s]:2===t.length&&t[0]<=e&&t[1]<=e?r=t:3===t.length&&t[0]*t[1]<=e&&t[2]<=e?r=[t[0]*t[1],t[2]]:3===t.length&&t[0]<=e&&t[1]*t[2]<=e?r=[t[0],t[1]*t[2]]:4===t.length&&t[0]*t[1]*t[2]<=e&&t[3]<=e?r=[t[0]*t[1]*t[2],t[3]]:4===t.length&&t[0]<=e&&t[1]*t[2]*t[3]<=e&&(r=[t[0],t[1]*t[2]*t[3]]);const o=null!=r&&Math.max(...r)>i&&Math.min(...r)<=(n?2:1)&&Math.min(...r)>0;if(null==r||o)if(n){const a=U1(t);let l=2,c=2;t.length&&([l,c]=G1(t)),s=a*(l/2)*(c/2),r=nV(s).map(u=>2*u)}else r=nV(s);return r}(s,c),i.texShape=h),null!=o){const f=bR(s);let p,g=h[1],v=h[0];const y=o instanceof Uint8Array||o instanceof Uint8ClampedArray;(c||!y)&&([g,v]=z1(h[0],h[1])),p=c?new aTt(f,y):new kve(f,y);const w=y?[v,g]:h,E=this.makeTensorInfo(w,r),T=this.texData.get(E.dataId);T.usage=y?Du.PIXELS:Du.UPLOAD,T.texShape=w,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(E.dataId),g,v,o);const H=this.runWebGLProgram(p,[E],r,[[v,g]],!0),P=this.texData.get(H.dataId);i.texShape=P.texShape,i.isPacked=P.isPacked,i.usage=P.usage,nt().get("ENGINE_COMPILE_ONLY")?this.disposeData(H.dataId):(i.texture=P.texture,i.values=null,this.texData.delete(H.dataId)),this.disposeIntermediateTensorInfo(E),u&&(this.uploadWaitMs+=Oa()-d)}else{const f=this.acquireTexture(h,l,r,c);i.texture=f}}convertAndCacheOnCPU(e,i){const s=this.texData.get(e),{dtype:r}=s;return null!=i&&(s.values=function U2t(t,n){if("float32"===n||"complex64"===n)return t;if("int32"===n||"bool"===n){const e="int32"===n?new Int32Array(t.length):new Uint8Array(t.length);for(let i=0;i<e.length;++i)e[i]=Math.round(t[i]);return e}throw new Error(`Unknown dtype ${n}`)}(i,r)),s.values}acquireTexture(e,i,s,r){if(this.numBytesInGPU+=this.computeBytes(e,s),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${o} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,i,r)}computeBytes(e,i){return e[0]*e[1]*$A(i)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}checkCompileCompletionAsync(){var e=this;return de(function*(){const i=[];if(e.gpgpu.parallelCompilationExtension){for(const[,s]of Object.entries(e.binaryCache))i.push(e.checkCompletionAsync_(s));return Promise.all(i)}for(const[,s]of Object.entries(e.binaryCache)){const r=new Promise(o=>{try{e.checkCompletion_(s),o(!0)}catch(a){throw a}});i.push(r)}return Promise.all(i)})()}checkCompletionAsync_(e){var i=this;return de(function*(){return i.gpgpu.gl.getProgramParameter(e.webGLProgram,i.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?i.checkCompletion_(e):(yield Sme(),i.checkCompletionAsync_(e))})()}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS))throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)?(gve(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:i,customUniformLocations:s,infLoc:r,nanLoc:o,outShapeLocation:a,outShapeStridesLocation:l,outTexShapeLocation:c}=Tve(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=i,e.customUniformLocations=s,e.infLoc=r,e.nanLoc=o,e.outShapeLocation=a,e.outShapeStridesLocation=l,e.outTexShapeLocation=c}}createTensorFromGPUData(e,i,s){e.channels=e.channels||"RGBA";const{texture:r,height:o,width:a,channels:l}=e,c=dh().backend;if(!c.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=c.writeTexture(r,i,s,o,a,l);return dh().makeTensorFromDataId(u,i,s,c)}}return t.nextDataId=0,t})();gfe()&&wfe("webgl",()=>new z2t,2);const JU="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class nb{constructor(n,e,i){this.variableNames=["A","B"],this.outputShape=fi(e,i),this.enableShapeUniforms=$a(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${n}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}const ib="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class K1{constructor(n,e,i,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=fi(e,i);const r=this.outputShape.length;this.enableShapeUniforms=$a(r);let o="";if(s)if(0===r||1===at(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(o=`\n          ${Ks(r)} coords = getOutputCoords();\n        `,1===r)o+=this.enableShapeUniforms?"\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const l=tl("coords",r);o+=this.enableShapeUniforms?`\n            bool nextRowOutOfBounds =\n              (${l[r-2]} + 1) >= outShape[${r} - 2];\n            bool nextColOutOfBounds =\n              (${l[r-1]} + 1) >= outShape[${r} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:`\n            bool nextRowOutOfBounds =\n              (${l[r-2]} + 1) >= ${this.outputShape[r-2]};\n            bool nextColOutOfBounds =\n              (${l[r-1]} + 1) >= ${this.outputShape[r-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${n}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${o}\n\n        setOutput(result);\n      }\n    `}}function dc(t){const{inputs:n,backend:e}=t,{x:i}=n;return e.incRef(i.dataId),{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}const H2t={kernelName:Ix,backendName:"webgl",kernelFunc:dc};function xm(t){const{inputs:n,backend:e}=t,{real:i,imag:s}=n,r=e.makeTensorInfo(i.shape,"complex64"),o=e.texData.get(r.dataId),a=dc({inputs:{x:i},backend:e}),l=dc({inputs:{x:s},backend:e});return o.complexTensorInfos={real:a,imag:l},r}const W2t={kernelName:mV,backendName:"webgl",kernelFunc:xm},Gve="return (a < 0.) ? b * a : a;",jve="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",K2t={kernelName:aO,backendName:"webgl",kernelFunc:function q2t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{alpha:r}=i,o=e.makeTensorInfo([],"float32",Xp(r,"float32")),a=nt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new K1(jve,s.shape,o.shape):new nb(Gve,s.shape,o.shape),l=e.runWebGLProgram(a,[s,o],"float32");return e.disposeIntermediateTensorInfo(o),l}},Hve="return (a < 0.) ? b * a : a;",Wve="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",Y2t={kernelName:TO,backendName:"webgl",kernelFunc:function X2t(t){const{inputs:n,backend:e}=t,{x:i,alpha:s}=n,r=nt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new K1(Wve,i.shape,s.shape):new nb(Hve,i.shape,s.shape);return e.runWebGLProgram(r,[i,s],"float32")}},X1="if (isnan(x)) return x;";function as({opSnippet:t,packedOpSnippet:n,cpuKernelImpl:e,dtype:i}){return({inputs:s,backend:r})=>{const{x:o}=s,a=r,l=i||o.dtype;if(a.shouldExecuteOnCPU([o])&&null!=e){const d=a.texData.get(o.dataId),h=e(d.values,l);return a.makeTensorInfo(o.shape,l,h)}let u;return u=nt().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new Cm(o.shape,n):new Th(o.shape,t),a.runWebGLProgram(u,[o],l)}}function Sa({opSnippet:t,packedOpSnippet:n,checkOutOfBounds:e=!1,supportsComplex:i=!1,cpuKernelImpl:s,dtype:r}){return({inputs:o,backend:a})=>{const{a:l,b:c}=o,u=a;if(i&&"complex64"===l.dtype){const p=u.texData.get(l.dataId),g=u.texData.get(c.dataId),[v,y]=[[p.complexTensorInfos.real,g.complexTensorInfos.real],[p.complexTensorInfos.imag,g.complexTensorInfos.imag]].map(E=>{const[T,L]=E,W={dataId:T.dataId,dtype:T.dtype,shape:l.shape},H={dataId:L.dataId,dtype:L.dtype,shape:c.shape},P=new nb(t,l.shape,c.shape);return u.runWebGLProgram(P,[W,H],nc(T.dtype,L.dtype))}),w=xm({inputs:{real:v,imag:y},backend:u});return u.disposeIntermediateTensorInfo(v),u.disposeIntermediateTensorInfo(y),w}const d=r||nc(l.dtype,c.dtype);if(("string"===l.dtype||"string"===c.dtype||u.shouldExecuteOnCPU([l,c]))&&null!=s){const p=u.texData.get(l.dataId).values,g=u.texData.get(c.dataId).values,v="string"===l.dtype?Of(p):p,y="string"===l.dtype?Of(g):g,[w,E]=s(l.shape,c.shape,v,y,d),T=u.makeTensorInfo(E,d);return u.texData.get(T.dataId).values=w,T}let f;return f=nt().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new K1(n,l.shape,c.shape,e):new nb(t,l.shape,c.shape),u.runWebGLProgram(f,[l,c],d)}}function jE(t,n=!1){if("linear"===t)return n?k2t:C2t;if("relu"===t)return n?M2t:E2t;if("elu"===t)return n?D2t:x2t;if("relu6"===t)return n?A2t:T2t;if("prelu"===t)return n?Wve:Hve;if("leakyrelu"===t)return n?jve:Gve;if("sigmoid"===t)return n?O2t:I2t;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}class qve{constructor(n,e,i,s=!1,r=!1,o=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i,this.enableShapeUniforms=$a(this.outputShape.length);const d=Math.ceil((s?n[1]:n[2])/2),h=s?"i * 2, rc.y":"rc.y, i * 2",f=r?"rc.z, i * 2":"i * 2, rc.z",p=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],g=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let v="",y="";a&&(v=l?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${a}\n        }`:c?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${a}\n        }`:`vec4 activation(vec4 x) {\n          ${a}\n        }`,y="result = activation(result);");const w=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let E="rc.x",T="rc.x";n[0]<e[0]?E=`imod(rc.x, ${n[0]})`:e[0]<n[0]&&(T=`imod(rc.x, ${e[0]})`),this.userCode=`\n      ${v}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${d}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ${E};\n        int batchB = ${T};\n        for (int i = 0; i < ${d}; i++) {\n          vec4 a = getMatrixA(batchA, ${h});\n          vec4 b = getMatrixB(batchB, ${f});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${p[0]} * ${g[0]});\n          result += (${p[1]} * ${g[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${w}\n\n        ${y}\n\n        setOutput(result);\n      }\n    `}}const Kve={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class Xve{constructor(n,e,i){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=fi(e,i),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${n}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}const Yve="return a * b;";function eG(t){const{inputs:n,backend:e}=t,{a:i,b:s}=n,r=nc(i.dtype,s.dtype);if("complex64"===i.dtype){const a=e.texData.get(i.dataId),l=e.texData.get(s.dataId),c=new Xve(Kve.REAL,i.shape,s.shape),u=new Xve(Kve.IMAG,i.shape,s.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:i.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:i.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],h=e.runWebGLProgram(c,d,"float32"),f=e.runWebGLProgram(u,d,"float32"),p=xm({inputs:{real:h,imag:f},backend:e});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),p}if(e.shouldExecuteOnCPU([i,s])){const a=e.texData.get(i.dataId),l=e.texData.get(s.dataId),[c,u]=WTt(i.shape,s.shape,a.values,l.values,r),d=e.makeTensorInfo(u,r);return e.texData.get(d.dataId).values=c,d}let o;return o=nt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new K1(Yve,i.shape,s.shape):new nb(Yve,i.shape,s.shape),e.runWebGLProgram(o,[i,s],r)}const Z2t={kernelName:Lx,backendName:"webgl",kernelFunc:eG};function qt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{shape:r}=i,o=e,a=at(s.shape),l=Hhe(r,a),c=at(l);le(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const u=o.texData.get(s.dataId);return!u.isPacked||yR(s.shape,l)||null!==u.texture&&yR(u.shape,l)?(o.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype}):function Q2t(t,n,e){const i=[U1(t.shape),...G1(t.shape)],s={dtype:t.dtype,shape:i,dataId:t.dataId},r=[U1(n),...G1(n)],o=new $ve(r,i),c=e.runWebGLProgram(o,[s],t.dtype,[i],!0);return{dataId:c.dataId,shape:n,dtype:c.dtype}}(s,l,o)}const J2t={kernelName:kO,backendName:"webgl",kernelFunc:qt};class Zve{constructor(n,e){this.variableNames=["x"];const{windowSize:i,batchSize:s,inSize:r,outSize:o}=n;this.outputShape=[s,o];const a=4*Math.floor(i/4),l=i%4;let c="sumValue += dot(values, ones);";if(null!=e){const d=1/e;c=`sumValue += dot(values * ${r1(d)?d.toPrecision(2):d}, ones);`}let u="";r%i>0&&(u=`\n        if (inIdx < 0 || inIdx >= ${r}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${u}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${i};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${a}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${c}\n        }\n\n        int inIdx = inOffset + ${a};\n        if (${1===l}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${c}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${c}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${c}\n        }\n        setOutput(sumValue);\n      }\n    `}}class eIt{constructor(n,e){this.variableNames=["x"];const{windowSize:i,batchSize:s,inSize:r,outSize:o}=n;this.outputShape=[s,o];let a="0.0",l="";"prod"===e?a="1.0":"min"===e?(a="1.0 / 1e-20",l="min"):"max"===e&&(a="-1.0 / 1e-20",l="max");let c=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===e?c="sumValue":"prod"===e?c="prodValue":"all"===e?c="allValue":"any"===e&&(c="anyValue");const u=4*Math.floor(i/4),d=i%4;let h=`\n      if (${"sum"===e}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===e}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${l}(values, minMaxValue);\n        if (${"min"===e} || ${"max"===e}) {\n          minMaxValue = ${l}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,f="vec4";"all"===e?(a="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",f="bvec4"):"any"===e&&(a="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",f="bvec4");let p="";r%i>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${r}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${a};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${p}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${i};\n\n        vec4 minMaxValue = vec4(${a});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          ${f} values = ${f}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${h}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===d}) {\n          ${f} values = ${f}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${2===d}) {\n          ${f} values = ${f}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${3===d}) {\n          ${f} values = ${f}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${h}\n        }\n        setOutput(${c});\n      }\n    `}}function sb(t,n,e,i){const s=function tIt(t){const n=[];for(;0===n.length||1!==n[n.length-1].outSize;){const e=n.length?n[n.length-1].outSize:t[1],i=EN(e);n.push({inSize:e,windowSize:i,outSize:Math.ceil(e/i)})}return n}(t.shape);let r=t;for(let o=0;o<s.length;o++){const{inSize:a,windowSize:l,outSize:c}=s[o];let u,d;u="mean"===e?0===o?new Zve({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new Zve({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):new eIt({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},e),d=r,r=i.runWebGLProgram(u,[r],n),d.dataId!==t.dataId&&i.disposeIntermediateTensorInfo(d)}return r}class nIt{constructor(n,e){this.variableNames=["A"];const i=new Array(n.length);for(let o=0;o<i.length;o++)i[o]=n[e[o]];this.outputShape=i,this.rank=i.length;const s=Ks(this.rank),r=function iIt(t){const n=t.length;if(n>6)throw Error(`Transpose for rank ${n} is not yet supported`);const e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],i=new Array(n);for(let s=0;s<t.length;s++)i[t[s]]=e[s];return i.join()}(e);this.userCode=`\n    void main() {\n      ${s} resRC = getOutputCoords();\n      setOutput(getA(${r}));\n    }\n    `}}class sIt{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const i=new Array(n.length);for(let u=0;u<i.length;u++)i[u]=n[e[u]];if(this.outputShape=i,this.rank=i.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=Ks(this.rank),r=Pve("rc",this.rank),o=new Array(this.rank);for(let u=0;u<e.length;u++)o[e[u]]=r[u];const a=`vec2(${o.slice(-2).join()})`,l=`++${r[this.rank-1]} < ${i[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`\n    void main() {\n      ${s} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${c};\n      if(${l}) {\n        result[1] = ${c};\n      }\n      --${r[this.rank-1]};\n      if(++${r[this.rank-2]} < ${i[this.rank-2]}) {\n        result[2] = ${c};\n        if(${l}) {\n          result[3] = ${c};\n        }\n      }\n      setOutput(result);\n    }\n    `}}function TR(t,n,e){const i=nt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new sIt(t.shape,n):new nIt(t.shape,n);return e.runWebGLProgram(i,[t],t.dtype)}function IR(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i;return function rIt(t,n,e,i){const r=t.shape.length,o=$i(n,t.shape);let a=o;const l=Nr(a,r),c=null!=l;let u=t;c&&(u=TR(t,l,i),a=Zr(a.length,r)),ya("sum",a,r);const[d,h]=ea(u.shape,a);let f=d;e&&(f=Yr(d,o));const p=at(h),y=qt({inputs:{x:u},attrs:{shape:[at(t.shape)/p,p]},backend:i}),E=sb(y,Sz(t.dtype),"sum",i),T=qt({inputs:{x:E},attrs:{shape:f},backend:i});return i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(E),c&&i.disposeIntermediateTensorInfo(u),T}(s,r,o,e)}const oIt={kernelName:RO,backendName:"webgl",kernelFunc:IR};function nl(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{perm:r}=i,o=e,l=new Array(s.shape.length);for(let u=0;u<l.length;u++)l[u]=s.shape[r[u]];let c;if(o.shouldExecuteOnCPU([s])){const d=o.texData.get(s.dataId).values,h=QU(d,s.shape,s.dtype,r,l);c=o.makeTensorInfo(l,s.dtype),o.texData.get(c.dataId).values=h}else c=TR(s,r,o);return c}const aIt={kernelName:u1,backendName:"webgl",kernelFunc:nl},Qve=1e3;function kR({a:t,b:n,transposeA:e,transposeB:i,backend:s,bias:r=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape.length,u=n.shape.length,d=e?t.shape[c-2]:t.shape[c-1],h=i?n.shape[u-1]:n.shape[u-2],f=e?t.shape[c-1]:t.shape[c-2],p=i?n.shape[u-2]:n.shape[u-1],g=t.shape.slice(0,-2),v=n.shape.slice(0,-2),y=at(g),w=at(v),T=fi(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([f,p]);le(d===h,()=>`Error in matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${t.shape} and ${n.shape} and transposeA=${e} and transposeB=${i} must match.`);const L=e?[y,d,f]:[y,f,d],W=i?[w,p,h]:[w,h,p],H=qt({inputs:{x:t},backend:s,attrs:{shape:L}}),P=qt({inputs:{x:n},backend:s,attrs:{shape:W}}),X=[H,P],ne=Math.max(y,w),me=e?H.shape[1]:H.shape[2],Ee=null!=r,Te=null!=o,$e="leakyrelu"===l,Xe=null!=l?jE(l,!0):null;let Fe;if((1===f||1===p)&&me>Qve&&!1===(Ee||Te||$e||null!=Xe)){let He=H,Ve=P;e&&(He=nl({inputs:{x:H},backend:s,attrs:{perm:[0,2,1]}}),X.push(He)),i&&(Ve=nl({inputs:{x:P},backend:s,attrs:{perm:[0,2,1]}}),X.push(Ve));const St=1===p;let mt=He;1!==p&&(mt=qt({inputs:{x:He},backend:s,attrs:{shape:[ne,me,1]}}),X.push(mt));const wt=1===p?2:1;let Ft=Ve;St&&(Ft=qt({inputs:{x:Ve},backend:s,attrs:{shape:[ne,1,me]}}),X.push(Ft));const Dt=eG({inputs:{a:mt,b:Ft},backend:s});Fe=IR({inputs:{x:Dt},backend:s,attrs:{axis:wt,keepDims:!0}}),X.push(Dt)}else{const He=nc(t.dtype,n.dtype),Ve=new qve(L,W,[ne,f,p],e,i,Ee,Xe,Te,$e),tt=[H,P];if(null!=r&&tt.push(r),Te&&tt.push(o),$e){const St=s.makeTensorInfo([],"float32",Xp(a,"float32"));tt.push(St),X.push(St)}Fe=s.runWebGLProgram(Ve,tt,He)}const Ie=qt({inputs:{x:Fe},backend:s,attrs:{shape:T}});X.push(Fe);for(const He of X)s.disposeIntermediateTensorInfo(He);return Ie}const cIt={kernelName:UO,backendName:"webgl",kernelFunc:function lIt(t){const{inputs:n,backend:e,attrs:i}=t,{a:s,b:r,bias:o,preluActivationWeights:a}=n,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=i;return kR({a:s,b:r,transposeA:l,transposeB:c,backend:e,bias:o,preluActivationWeights:a,leakyreluAlpha:d,activation:u})}},Jve="return abs(x);",dIt={kernelName:BA,backendName:"webgl",kernelFunc:function uIt(t){const{inputs:n,backend:e}=t,{x:i}=n;if(e.shouldExecuteOnCPU([i])&&"complex64"!==i.dtype){const r=e.texData.get(i.dataId),o=Fve(r.values);return e.makeTensorInfo(i.shape,i.dtype,o)}let s;return s=nt().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Cm(i.shape,Jve):new Th(i.shape,Jve),e.runWebGLProgram(s,[i],i.dtype)}},fIt=as({opSnippet:Hc+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),pIt={kernelName:ax,backendName:"webgl",kernelFunc:fIt},_It=as({opSnippet:Hc+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),gIt={kernelName:lx,backendName:"webgl",kernelFunc:_It},eye="return a + b;",bIt=Sa({opSnippet:eye,packedOpSnippet:eye,supportsComplex:!0,cpuKernelImpl:ETt}),vIt={kernelName:c1,backendName:"webgl",kernelFunc:bIt};class yIt{constructor(n,e){this.outputShape=[],this.outputShape=n,this.variableNames=e.map((r,o)=>`T${o}`);const i=[];this.variableNames.forEach(r=>{i.push(`float v${r} = get${r}AtOutCoords();`)});const s=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`\n      void main() {\n        ${i.join("\n        ")}\n\n        float result = ${s};\n        setOutput(result);\n      }\n    `}}class wIt{constructor(n,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.variableNames=e.map((r,o)=>`T${o}`);const i=[];this.variableNames.forEach(r=>{i.push(`vec4 v${r} = get${r}AtOutCoords();`)});const s=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`\n      void main() {\n        ${i.join("\n        ")}\n\n        vec4 result = ${s};\n        setOutput(result);\n      }\n    `}}const SIt={kernelName:VA,backendName:"webgl",kernelFunc:function DR(t){const{inputs:n,backend:e}=t,i=n;if(1===i.length)return dc({inputs:{x:i[0]},backend:e});if(i.length>nt().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(i.length/2),c=DR({inputs:i.slice(0,l),backend:e}),u=DR({inputs:i.slice(l),backend:e});return DR({inputs:[c,u],backend:e})}const s=i.map(l=>l.dtype).reduce((l,c)=>nc(l,c)),r=i.map(l=>l.shape),a=nt().getBool("WEBGL_PACK")?new wIt(i[0].shape,r):new yIt(i[0].shape,r);return e.runWebGLProgram(a,i,s)}},xIt={kernelName:"All",backendName:"webgl",kernelFunc:function CIt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i,a=s.shape.length,l=$i(r,s.shape);let c=l;const u=Nr(c,a);let d=s;null!=u&&(d=nl({inputs:{x:s},backend:e,attrs:{perm:u}}),c=Zr(c.length,a)),ya("all",c,a);const[h,f]=ea(d.shape,c),g=qt({inputs:{x:d},backend:e,attrs:{shape:[-1,at(f)]}}),v=sb(g,g.dtype,"all",e);let y;return y=qt(o?{inputs:{x:v},backend:e,attrs:{shape:Yr(h,l)}}:{inputs:{x:v},backend:e,attrs:{shape:h}}),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(v),null!=u&&e.disposeIntermediateTensorInfo(d),y}},TIt={kernelName:"Any",backendName:"webgl",kernelFunc:function EIt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i,a=s.shape.length,l=$i(r,s.shape);let c=l;const u=Nr(c,a);let d=s;null!=u&&(d=nl({inputs:{x:s},backend:e,attrs:{perm:u}}),c=Zr(c.length,a)),ya("any",c,a);const[h,f]=ea(d.shape,c),g=qt({inputs:{x:d},backend:e,attrs:{shape:[-1,at(f)]}}),v=sb(g,g.dtype,"any",e);let y;return y=qt(o?{inputs:{x:v},backend:e,attrs:{shape:Yr(h,l)}}:{inputs:{x:v},backend:e,attrs:{shape:h}}),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(v),null!=u&&e.disposeIntermediateTensorInfo(d),y}};class IIt{constructor(n,e,i){this.variableNames=["A"];const{windowSize:s,batchSize:r,outSize:o}=n;i||this.variableNames.push("bestIndicesA"),this.outputShape=[r,o],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${s};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${s}; i++) {\n          int inIdx = ${i?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));"};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${"max"===e?">":"<"} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}class kIt{constructor(n,e,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,le(n.length>2,()=>`Packed arg${i.charAt(0).toUpperCase()+i.slice(1)} supports only inputs with rank above 2.`);const o=Math.ceil(n[n.length-1]/e);this.outputShape=n.slice(0,-1),o>1&&this.outputShape.push(o),s||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=Ks(l),u=tl("coords",l);let d,h;if(1===o){h=l+1;const P=Ks(h);d=`\n        ${P} sourceLocR = ${P}(${u.join()}, 0);\n        ++${u[l-1]};\n        ${P} sourceLocG = ${P}(${u.join()}, 0);\n        ++${u[l-2]};\n        ${P} sourceLocA = ${P}(${u.join()}, 0);\n        --${u[l-1]};\n        ${P} sourceLocB = ${P}(${u.join()}, 0);\n        --${u[l-2]};`}else h=l,d=`\n        ${c} sourceLocR = coords;\n        ++${u[l-1]};\n        ${c} sourceLocG = coords;\n        ++${u[l-2]};\n        ${c} sourceLocA = coords;\n        --${u[l-1]};\n        ${c} sourceLocB = coords;\n        --${u[l-2]};`;const f=["x","y","z","w","u","v"].slice(0,h),p="."+f[h-1],g=f.map(P=>"int "+P),v=tl("sourceLocR",h-1).concat("inIdx.r"),y=tl("sourceLocG",h-1).concat("inIdx.g"),w=tl("sourceLocB",h-1).concat("inIdx.b"),E=tl("sourceLocA",h-1).concat("inIdx.a"),T="max"===i?"greaterThan":"lessThan",L=s?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${v.join()}),\n                             getBestIndicesAChannel(${y.join()}),\n                             getBestIndicesAChannel(${w.join()}),\n                             getBestIndicesAChannel(${E.join()})));`,W=`vec4(\n            getAChannel(${v.join()}),\n            hasNextCol ? getAChannel(${y.join()}) : 0.,\n            hasNextRow ? getAChannel(${w.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${E.join()}) : 0.)`,H=s?"":`\n      float getBestIndicesAChannel(${g.join()}) {\n        return getChannel(getBestIndicesA(${f.join()}),\n                                          vec2(${f.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${g.join()}) {\n        return getChannel(getA(${f.join()}),\n                               vec2(${f.slice(-2).join()}));\n      }\n      ${H}\n      void main() {\n        ${c} coords = getOutputCoords();\n        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};\n        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};\n        ${d}\n        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},\n          sourceLocB${p}, sourceLocA${p}) * ${e};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${W};\n\n        for (int i = 0; i < ${e}; i++) {\n          inIdx = srcIdx;\n          ${L}\n          vec4 candidate = ${W};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${T}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}function tye(t,n,e,i=null){let s=n.shape[0],r=n.shape[1];null!=i&&(s=i.shape[0],r=i.shape[1]);const o=EN(r),a={windowSize:o,inSize:r,batchSize:s,outSize:Math.ceil(r/o)},l=new IIt(a,e,null==i),c=[n];null!=i&&c.push(i);const u=t.runWebGLProgram(l,c,"int32");if(1===u.shape[1])return u;const d=tye(t,n,e,u);return t.disposeIntermediateTensorInfo(u),d}function nye(t,n,e,i=null){const s=null!=i?i.shape:n.shape,o=EN(s[s.length-1]),a=new kIt(s,o,e,null==i),c=t.runWebGLProgram(a,null==i?[n]:[n,i],"int32");if(c.shape.length===n.shape.length){const u=nye(t,n,e,c);return t.disposeIntermediateTensorInfo(c),u}return c}function iye(t,n,e,i){const s=[e];if(ya("arg"+i.charAt(0).toUpperCase()+i.slice(1),s,n.shape.length),!nt().getBool("WEBGL_PACK_REDUCE")||n.shape.length<=2){const r=[],o=t.texData.get(n.dataId);let l=n;null!==o&&o.isPacked&&(l=t.unpackTensor(n),r.push(l));const[c,u]=ea(l.shape,s),d=at(u),h=qt({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});r.push(h);const f=tye(t,h,i);r.push(f);const p=qt({inputs:{x:f},backend:t,attrs:{shape:c}});return r.forEach(g=>t.disposeIntermediateTensorInfo(g)),p}return nye(t,n,i)}const MIt={kernelName:zA,backendName:"webgl",kernelFunc:function DIt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r}=i;let o=$i(r,s.shape);const a=Nr(o,s.shape.length);let l=s;const c=[];null!=a&&(l=nl({inputs:{x:s},backend:e,attrs:{perm:a}}),c.push(l),o=Zr(o.length,l.shape.length)),ya("argMax",[o[0]],l.shape.length);const u=iye(e,l,o[0],"max");return c.forEach(d=>e.disposeIntermediateTensorInfo(d)),u}},OIt={kernelName:UA,backendName:"webgl",kernelFunc:function AIt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r}=i;let o=$i(r,s.shape);const a=Nr(o,s.shape.length);let l=s;const c=[];null!=a&&(l=nl({inputs:{x:s},backend:e,attrs:{perm:a}}),c.push(l),o=Zr(o.length,l.shape.length)),ya("argMin",[o[0]],l.shape.length);const u=iye(e,l,o[0],"min");return c.forEach(d=>e.disposeIntermediateTensorInfo(d)),u}},RIt=as({opSnippet:Hc+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),FIt={kernelName:cx,backendName:"webgl",kernelFunc:RIt},PIt=as({opSnippet:Hc+"return log(x + sqrt(x * x + 1.0));"}),$It={kernelName:ux,backendName:"webgl",kernelFunc:PIt},VIt=as({opSnippet:Hc+"\n  return atan(x);\n"}),zIt={kernelName:dx,backendName:"webgl",kernelFunc:VIt},jIt=Sa({opSnippet:JU+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+ib+"\n  return result;\n"}),HIt={kernelName:fx,backendName:"webgl",kernelFunc:jIt},qIt=as({opSnippet:Hc+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),KIt={kernelName:hx,backendName:"webgl",kernelFunc:qIt};class HE{constructor(n,e,i,s=!1,r=!1){if(this.variableNames=["x"],"avg"===e&&i)throw new Error("Cannot compute positions for average pool.");const o=n.filterWidth,a=n.strideHeight,l=n.strideWidth,c=n.dilationHeight,u=n.dilationWidth,d=n.effectiveFilterHeight,h=n.effectiveFilterWidth,f=n.padInfo.top,p=n.padInfo.left;this.outputShape=n.outShape;const g="avg"===e;let w="0.0";if(g||(w="-1.0 / 1e-20"),i)return void(this.userCode=`\n        const ivec2 strides = ivec2(${a}, ${l});\n        const ivec2 pads = ivec2(${f}, ${p});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${d};\n              wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${h};\n                wC += ${u}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${s?r?`((batch  * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + d`:`(xR * ${n.inWidth} + xC) * ${n.inChannels} + d`:`wR * ${h} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let T=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===e&&(T="avgValue / max(count, 1.0)");const L=4*Math.floor(o/4),W=o%4,H=`\n      if (${g}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${a}, ${l});\n      const ivec2 pads = ivec2(${f}, ${p});\n      const float initializationValue = ${w};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${n.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${w});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${d};\n            wR += ${c}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${n.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${L}; wC += 4) {\n            int xC = xCCorner + wC * ${u};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              getValue(batch, xR, xC + 3 * ${u}, d)\n            );\n\n            ${H}\n          }\n\n          int xC = xCCorner + ${L};\n          if (${1===W}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${H}\n          } else if (${2===W}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${H}\n          } else if (${3===W}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              initializationValue\n            );\n\n            ${H}\n          }\n        }\n        setOutput(${T});\n      }\n    `}}class tG{constructor(n,e,i,s=!1,r=!1){if(this.variableNames=["x"],"avg"===e&&i)throw new Error("Cannot compute positions for average pool.");const o=n.filterWidth,a=n.strideDepth,l=n.strideHeight,c=n.strideWidth,u=n.dilationDepth,d=n.dilationHeight,h=n.dilationWidth,f=n.effectiveFilterDepth,p=n.effectiveFilterHeight,g=n.effectiveFilterWidth,v=n.padInfo.front,y=n.padInfo.top,w=n.padInfo.left;this.outputShape=n.outShape;const E="avg"===e;let T="0.0";if(E||(T="-1.0 / 1e-20"),i)return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${a}, ${l}, ${c});\n        const ivec3 pads = ivec3(${v}, ${y}, ${w});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${f};\n              wD += ${u}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${n.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${p};\n                wR += ${d}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${n.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${g};\n                  wC += ${h}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${n.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${s?r?`(((batch * ${n.inDepth} + xD) * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`((xD * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`wD * ${p} * ${g} +\n                      wR * ${g} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let W=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===e&&(W="avgValue / max(count, 1.0)");const H=4*Math.floor(o/4),P=o%4,X=`\n      if (${E}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${a}, ${l}, ${c});\n      const ivec3 pads = ivec3(${v}, ${y}, ${w});\n      const float initializationValue = ${T};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${n.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${T});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${f};\n            wD += ${u}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${n.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${p};\n            wR += ${d}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${H}; wC += 4) {\n              int xC = xCCorner + wC * ${h};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${h}, ch)\n              );\n\n              ${X}\n            }\n\n            int xC = xCCorner + ${H};\n            if (${1===P}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${X}\n            } else if (${2===P}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${X}\n            } else if (${3===P}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                initializationValue\n              );\n\n              ${X}\n            }\n          }\n        }\n        setOutput(${W});\n      }\n    `}}const YIt={kernelName:GA,backendName:"webgl",kernelFunc:function XIt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n;UE(s,"avgPool");const{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=i;le(va(o,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`);const u=gu(s.shape,r,o,1,a,l);if(1===u.filterWidth&&1===u.filterHeight&&Qi(u.inShape,u.outShape))return dc({inputs:{x:s},backend:e});const d=new HE(u,"avg",!1);return e.runWebGLProgram(d,[s],"float32")}},QIt={kernelName:jA,backendName:"webgl",kernelFunc:function ZIt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{filterSize:r,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=i,d=kf(s.shape,r,o,[1,1,1],a,l,c),h=new tG(d,"avg",!1);return e.runWebGLProgram(h,[s],"float32")}};class JIt{constructor(n){this.variableNames=["dy"],this.outputShape=n.inShape;const l=n.effectiveFilterHeight,c=n.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${l-1-n.padInfo.top}, ${c-1-n.padInfo.left});\n      const float avgMultiplier = float(${1/(n.filterHeight*n.filterWidth)});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${l};\n            wR += ${n.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${c};\n            wC+= ${n.dilationWidth}) {\n            float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class ekt{constructor(n){this.variableNames=["dy"],this.outputShape=n.inShape;const d=n.effectiveFilterDepth,h=n.effectiveFilterHeight,f=n.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${d-1-n.padInfo.front}, ${h-1-n.padInfo.top}, ${f-1-n.padInfo.left});\n      const float avgMultiplier = float(${1/(n.filterDepth*n.filterHeight*n.filterWidth)});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${d};\n            wD += ${n.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${n.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${n.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${h};\n              wR += ${n.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${f};\n                wC += ${n.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const nkt={kernelName:hV,backendName:"webgl",kernelFunc:function tkt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,input:r}=n,o=r,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=i,h=kf(o.shape,a,l,[1,1,1],c,u),f=new ekt(h);return e.runWebGLProgram(f,[s],o.dtype)}},skt={kernelName:dV,backendName:"webgl",kernelFunc:function ikt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,input:r}=n,o=r;UE([s,r],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=i,u=gu(o.shape,a,l,1,c),d=new JIt(u);return e.runWebGLProgram(d,[s],o.dtype)}},okt={kernelName:HA,backendName:"webgl",kernelFunc:function rkt(t){const{inputs:n,backend:e,attrs:i}=t,{a:s,b:r}=n,{transposeA:o,transposeB:a}=i;return kR({a:s,b:r,transposeA:o,transposeB:a,backend:e})}};class akt{constructor(n,e,i,s,r,o){this.outputShape=[],this.variableNames=["x","mean","variance"],fi(n,e),fi(n,i);let a="0.0";null!=s&&(fi(n,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";null!=r&&(fi(n,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${a};\n        float scale = ${l};\n        float inv = scale * inversesqrt(variance + float(${o}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}class lkt{constructor(n,e,i,s,r,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],fi(n,e),fi(n,i);let a="vec4(0.0)";null!=s&&(fi(n,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";null!=r&&(fi(n,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`\n      void main() {\n        vec4 offset = ${a};\n        vec4 scale = ${l};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${o}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}const ckt={kernelName:sO,backendName:"webgl",kernelFunc:({inputs:t,backend:n,attrs:e})=>{const{x:i,mean:s,variance:r,offset:o,scale:a}=t;le(s.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),le(null==o||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),le(null==a||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=e;null==l&&(l=.001);const c=[i,s,r];let u=null;null!=o&&(u=o.shape,c.push(o));let d=null;null!=a&&(d=a.shape,c.push(a));const h=nt().getBool("WEBGL_PACK_NORMALIZATION")?new lkt(i.shape,s.shape,r.shape,u,d,l):new akt(i.shape,s.shape,r.shape,u,d,l);return n.runWebGLProgram(h,c,c[0].dtype)}};class ukt{constructor(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;const e=Ks(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const i=function dkt(t){if(1===t)return"sourceLoc";if(t<=6)return nG.slice(0,t).map(n=>"sourceLoc."+n).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}(this.rank);let s;s=`\n        ${e} sourceLoc;\n        ${e} coords = getOutputCoords();\n        ${n.map((o,a)=>`sourceLoc.${nG[a]} = start[${a}] + coords.${nG[a]};`).join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${s}\n        setOutput(getSource(${i}));\n      }\n    `}}const nG=["x","y","z","w","u","v"];class hkt{constructor(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const e=Ks(this.rank),i=tl("coords",this.rank),s=tl("sourceLoc",this.rank),r=1===this.rank?"sourceLoc":`vec2(${s.slice(-2).join()})`,o=`getChannel(getSource(${s.join()}), ${r})`,a=`\n      result.x = ${o};\n      if (++${i[this.rank-1]} < ${n[this.rank-1]}) {\n        ++${s[this.rank-1]};\n        result.y = ${o};\n        --${s[this.rank-1]};\n      }\n    `,l=1===this.rank?"":`\n      --${i[this.rank-1]};\n      if (++${i[this.rank-2]} < ${n[this.rank-2]}) {\n        ++${s[this.rank-2]};\n        result.z = ${o};\n        if (++${i[this.rank-1]} < ${n[this.rank-1]}) {\n          ++${s[this.rank-1]};\n          result.w = ${o};\n        }\n      }\n    `,c=this.rank<=4?`sourceLoc = coords +\n            ${e}(${n.map((u,d)=>`start[${d}]`).join()});`:n.map((u,d)=>`${s[d]} = ${i[d]} + start[${d}];`).join("\n");this.userCode=`\n      void main() {\n        ${e} coords = getOutputCoords();\n        ${e} sourceLoc;\n        ${c}\n        vec4 result = vec4(0.);\n        ${a}\n        ${l}\n        setOutput(result);\n      }\n    `}}function Y1(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{begin:r,size:o}=i,[a,l]=eN(s,r,o);if(i7(s,a,l),0===at(l))return e.makeTensorInfo(l,s.dtype,[]);if(e.shouldExecuteOnCPU([s])||"string"===s.dtype){const d=e.texData.get(s.dataId),h=i2t(d.values,a,l,s.shape,s.dtype);return e.makeTensorInfo(l,s.dtype,h)}const{isPacked:c}=e.texData.get(s.dataId),u=r7(s.shape,a,l);if(c||!u){const d=nt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new hkt(l):new ukt(l);return e.runWebGLProgram(d,[s],s.dtype,[a])}return e.uploadToGPU(s.dataId),function fkt(t,n,e,i){const s=i.texData.get(t.dataId),r=i.makeTensorInfo(e,t.dtype),o=i.texData.get(r.dataId);Object.assign(o,s),o.refCount=1,o.shape=e,o.dtype=t.dtype;let a=o7(n,xn(t.shape));s.slice&&(a+=s.slice.flatOffset),o.slice={flatOffset:a,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=i.dataRefCount.get(o.slice.origDataId)||1;return i.dataRefCount.set(o.slice.origDataId,l+1),r}(s,a,l,e)}const pkt={kernelName:NO,backendName:"webgl",kernelFunc:Y1},mkt={kernelName:WA,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{blockShape:r,crops:o}=i;le(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce((w,E)=>w*E),l=wE(s.shape,r,a),c=SE(l.length,r.length),u=CE(s.shape,r,a),d=s9(o,r.length),h=r9(u,o,r.length),f=[],p=qt({inputs:{x:s},backend:e,attrs:{shape:l}}),g=nl({inputs:{x:p},backend:e,attrs:{perm:c}}),v=qt({inputs:{x:g},backend:e,attrs:{shape:u}}),y=Y1({inputs:{x:v},backend:e,attrs:{begin:d,size:h}});return f.push(p),f.push(g),f.push(v),f.forEach(w=>e.disposeIntermediateTensorInfo(w)),y}},gkt={kernelName:fV,backendName:"webgl",kernelFunc:function _kt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,weights:r}=n,{size:o}=i,a=e.readSync(s.dataId),l=e.readSync(r.dataId),c=Rve(a,l,r.dtype,r.shape,o);return e.makeTensorInfo([o],r.dtype,c)}},wkt={kernelName:qA,backendName:"webgl",kernelFunc:function ykt(t){const{inputs:n,backend:e}=t,{a:i,b:s}=n,r=nt().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=nt().getNumber("WEBGL_VERSION");if(e.shouldExecuteOnCPU([i,s])||1===o){const l=e.texData.get(i.dataId).values,c=e.texData.get(s.dataId).values,[u,d]=ITt(i.shape,s.shape,l,c,i.dtype),h=e.makeTensorInfo(d,i.dtype);return e.texData.get(h.dataId).values=u,h}let a;return a=r?new K1("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",i.shape,s.shape,!1):new nb("\n  return float(int(a.r) & int(b.r));\n",i.shape,s.shape),e.runWebGLProgram(a,[i,s],i.dtype)}},Ckt={kernelName:pV,backendName:"webgl",kernelFunc:function Skt(t){const{inputs:n,backend:e}=t,{s0:i,s1:s}=n,r=e.readSync(i.dataId),o=e.readSync(s.dataId),a=fi(Array.from(r),Array.from(o));return e.makeTensorInfo([a.length],"int32",Int32Array.from(a))}},sye=Sa({opSnippet:"return float(a != b);",cpuKernelImpl:KTt,dtype:"bool"}),xkt={kernelName:wO,backendName:"webgl",kernelFunc:sye};function WE(t){const{inputs:n,backend:e}=t,{input:i}=n;return dc({inputs:{x:e.texData.get(i.dataId).complexTensorInfos.real},backend:e})}const Ekt={kernelName:YV,backendName:"webgl",kernelFunc:WE},kkt={kernelName:px,backendName:"webgl",kernelFunc:function iG(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{dtype:r}=i;if("complex64"===r){if("complex64"===s.dtype)return dc({inputs:{x:s},backend:e});const o=No(s.shape),a=iG({inputs:{x:s},backend:e,attrs:{dtype:"float32"}}),l=xm({inputs:{real:a,imag:o},backend:e});return o.dispose(),e.disposeIntermediateTensorInfo(a),l}if("complex64"===s.dtype){const o=WE({inputs:{input:s},backend:e}),a=iG({inputs:{x:o},backend:e,attrs:{dtype:r}});return e.disposeIntermediateTensorInfo(o),a}if(!Whe(s.dtype,r)){const o=dc({inputs:{x:s},backend:e});return{dataId:o.dataId,shape:o.shape,dtype:r}}if(e.shouldExecuteOnCPU([s])){const o=e.texData.get(s.dataId).values,[a,l,c]=kTt(o,s.shape,s.dtype,r);return e.makeTensorInfo(a,l,c)}if("int32"===r)return function Ikt(t,n){const e=new Th(t.shape,"return float(int(x));"),i=n.runWebGLProgram(e,[t],"int32");return{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}(s,e);if("bool"===r){const o=e.makeTensorInfo([],"bool",ga("bool",1)),l=sye({inputs:{a:s,b:o},backend:e});return e.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${r}`)}},rye="return ceil(x);",Dkt=as({opSnippet:rye,packedOpSnippet:rye,cpuKernelImpl:DTt}),Mkt={kernelName:mx,backendName:"webgl",kernelFunc:Dkt};class Akt{constructor(n){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=n,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class Okt{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=n,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const Rkt={kernelName:_x,backendName:"webgl",kernelFunc:function Nkt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{clipValueMin:r,clipValueMax:o}=i;let a;return a=nt().getBool("WEBGL_PACK_CLIP")?new Okt(s.shape):new Akt(s.shape),e.runWebGLProgram(a,[s],s.dtype,[[r],[o]])}};class Fkt{constructor(n){this.variableNames=["real","imag"],this.outputShape=n,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function oye(t,n){return{dataId:n.dataId,dtype:n.dtype,shape:t.shape}}const Pkt={kernelName:KA,backendName:"webgl",kernelFunc:function Lkt(t){const{inputs:n,backend:e}=t,{x:i}=n,s=e.texData.get(i.dataId),r=new Fkt(i.shape),o=[oye(i,s.complexTensorInfos.real),oye(i,s.complexTensorInfos.imag)];return e.runWebGLProgram(r,o,o[0].dtype)}};class $kt{constructor(n){this.outputShape=[],this.outputShape=_h(n,1),this.variableNames=n.map((o,a)=>`T${a}`);const e=new Array(n.length-1);e[0]=n[0][1];for(let o=1;o<e.length;o++)e[o]=e[o-1]+n[o][1];const i=[`if (yC < ${e[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<e.length;o++)i.push(`else if (yC < ${e[o]}) setOutput(getT${o}(yR, yC-${e[o-1]}));`);i.push(`else setOutput(getT${e.length}(yR, yC-${e[e.length-1]}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${i.join("\n        ")}\n      }\n    `}}class Bkt{constructor(n,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=_h(n,e);const i=this.outputShape,s=i.length,r=Ks(s),o=tl("coords",s),a=["x","y","z","w","u","v"].slice(0,s);this.variableNames=n.map((g,v)=>`T${v}`);const l=new Array(n.length-1);l[0]=n[0][e];for(let g=1;g<l.length;g++)l[g]=l[g-1]+n[g][e];const c=a[e],u=a.slice(-2),d=a.join();let h=`if (${c} < ${l[0]}) {\n        return getChannel(\n            getT0(${d}), vec2(${u.join()}));\n        }`;for(let g=1;g<l.length;g++){const v=l[g-1];h+=`\n        if (${c} < ${l[g]}  && ${c} >= ${l[g-1]}) {\n          return getChannel(\n            getT${g}(${MR(a,c,v)}),\n            vec2(${MR(u,c,v)}));\n        }`}const p=l[l.length-1];h+=`\n        return getChannel(\n          getT${l.length}(${MR(a,c,p)}),\n          vec2(${MR(u,c,p)}));`,this.userCode=`\n      float getValue(${a.map(g=>"int "+g)}) {\n        ${h}\n      }\n\n      void main() {\n        ${r} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${o}), 0., 0., 0.);\n\n        ${o[s-1]} = ${o[s-1]} + 1;\n        if (${o[s-1]} < ${i[s-1]}) {\n          result.g = getValue(${o});\n        }\n\n        ${o[s-2]} = ${o[s-2]} + 1;\n        if (${o[s-2]} < ${i[s-2]}) {\n          result.a = getValue(${o});\n        }\n\n        ${o[s-1]} = ${o[s-1]} - 1;\n        if (${o[s-2]} < ${i[s-2]} &&\n            ${o[s-1]} < ${i[s-1]}) {\n          result.b = getValue(${o});\n        }\n        setOutput(result);\n      }\n    `}}function MR(t,n,e){const i=t.indexOf(n);return t.map((r,o)=>o===i?`${r} - ${e}`:r).join()}function AR(t){const{inputs:n,backend:e}=t,{input:i}=n;return dc({inputs:{x:e.texData.get(i.dataId).complexTensorInfos.imag},backend:e})}const Vkt={kernelName:LV,backendName:"webgl",kernelFunc:AR};function qE(t,n,e){const i=t[0].dtype;if("complex64"===i){const f=t.map(w=>WE({inputs:{input:w},backend:e})),p=t.map(w=>AR({inputs:{input:w},backend:e})),g=qE(f,n,e),v=qE(p,n,e),y=xm({inputs:{real:g,imag:v},backend:e});return f.forEach(w=>e.disposeIntermediateTensorInfo(w)),p.forEach(w=>e.disposeIntermediateTensorInfo(w)),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(v),y}let s=e.shouldExecuteOnCPU(t);if("string"===i&&(s=!0),s){const f=t.map(T=>{const W=[-1,at(T.shape.slice(n))];return qt({inputs:{x:T},backend:e,attrs:{shape:W}})}),p=f.map(T=>({vals:e.readSync(T.dataId),shape:T.shape})),g=_h(f.map(T=>T.shape),1),y=MTt(p,g,i,1===f[0].shape[0]),w=_h(t.map(T=>T.shape),n),E=e.makeTensorInfo(w,i,y);return f.forEach(T=>e.disposeIntermediateTensorInfo(T)),E}const r=t.filter(f=>at(f.shape)>0),o=nt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&r[0].shape.length>1;if(1===r.length){const f=o?new Th(t[0].shape,Sm):new Cm(t[0].shape,Sm);return e.runWebGLProgram(f,t,i)}const a=nt().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(r.length>a){const f=[];for(let g=0;g<r.length;g+=a){const v=r.slice(g,g+a);f.push(qE(v,n,e))}const p=qE(f,n,e);for(const g of f)e.disposeIntermediateTensorInfo(g);return p}if(o){const f=new Bkt(r.map(p=>p.shape),n);return e.runWebGLProgram(f,r,i)}const{tensors2D:l,outShape:c}=function zkt(t,n,e){const i=_h(t.map(r=>r.shape),n);return{tensors2D:t.map(r=>qt({inputs:{x:r},attrs:{shape:[-1,at(r.shape.slice(n))]},backend:e})),outShape:i}}(r,n,e),u=new $kt(l.map(f=>f.shape)),d=e.runWebGLProgram(u,l,i);l.forEach(f=>e.disposeIntermediateTensorInfo(f));const h=qt({inputs:{x:d},attrs:{shape:c},backend:e});return e.disposeIntermediateTensorInfo(d),h}function aye(t){const{inputs:n,backend:e,attrs:i}=t,{axis:s}=i,r=$i(s,n[0].shape)[0];t9(n.map(c=>c.shape),r);const a=_h(n.map(c=>c.shape),r);if(0===at(a))return e.makeTensorInfo(a,n[0].dtype,[]);const l=n.filter(c=>at(c.shape)>0);return 1===l.length?dc({inputs:{x:l[0]},backend:e}):qE(l,r,e)}const Ukt={kernelName:XA,backendName:"webgl",kernelFunc:aye};class lye{constructor(n,e=!1,i=null,s=!1,r=!1){this.variableNames=["x","W"],this.outputShape=n.outShape;const o=n.padInfo.top,a=n.padInfo.left,l=n.strideHeight,c=n.strideWidth,u=n.dilationHeight,d=n.dilationWidth,h=n.filterHeight,f=n.filterWidth,p=4*Math.floor(n.inChannels/4),g=n.inChannels%4,v="channelsLast"===n.dataFormat,y=v?1:2,w=v?2:3,E=v?3:1;let T="",L="";i&&(T=s?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${i}\n        }`:r?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${i}\n        }`:`\n          float activation(float x) {\n            ${i}\n          }\n        `,L="result = activation(result);");const W=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${T}\n\n      const ivec2 strides = ivec2(${l}, ${c});\n      const ivec2 pads = ivec2(${o}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${E}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${y}], coords[${w}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${h}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${n.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${f}; wC++) {\n            int xC = xCCorner + wC * ${d};\n\n            if (xC < 0 || xC >= ${n.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${p}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${v}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===g}) {\n\n              if (${v}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${p}) *\n                    getW(wR, wC, ${p}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${p}, xR, xC) *\n                    getW(wR, wC, ${p}, d2);\n              }\n\n            } else if (${2===g}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2)\n              );\n\n              if (${v}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===g}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2),\n                getW(wR, wC, ${p} + 2, d2)\n              );\n\n              if (${v}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1),\n                  getX(batch, xR, xC, ${p} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC),\n                  getX(batch, ${p} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${W}\n        ${L}\n        setOutput(result);\n      }\n    `}}class Gkt{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;const e=n.padInfo.front,i=n.padInfo.top,s=n.padInfo.left,r=n.strideDepth,o=n.strideHeight,a=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,u=n.dilationWidth,d=n.filterDepth,h=n.filterHeight,f=n.filterWidth,p=4*Math.floor(n.inChannels/4),g=n.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${r}, ${o}, ${a});\n      const ivec3 pads = ivec3(${e}, ${i}, ${s});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${d}; wF++) {\n          int xF = xFCorner + wF * ${l};\n\n          if (xF < 0 || xF >= ${n.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${h}; wR++) {\n            int xR = xRCorner + wR * ${c};\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${f}; wC++) {\n              int xC = xCCorner + wC * ${u};\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${p}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===g}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${p}) *\n                  getW(wF, wR, wC, ${p}, d2);\n              } else if (${2===g}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===g}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1),\n                  getX(batch, xF, xR, xC, ${p} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2),\n                  getW(wF, wR, wC, ${p} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class cye{constructor(n,e=!1,i=null,s=!1,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=$a(this.outputShape.length);const o=n.padInfo.left,a=n.strideWidth,l=n.dilationWidth,c=n.filterHeight,u=n.filterWidth,d=u;let h="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let v=0;v<u;v++)h+=`\n           vec4 xTexelC${2*v};\n           int xTexelC${2*v}Ready;\n           vec4 xTexelC${2*v+1};\n           int xTexelC${2*v+1}Ready;\n           vec4 xC${v};`;h+=`\n     for (int r = 0; r < ${c}; r++) {\n      for (int d1 = 0; d1 < ${n.inChannels}; d1 += 2) {\n       `;for(let v=0;v<u;v++)h+=`\n           xTexelC${2*v} = vec4(0.0);\n           xTexelC${2*v}Ready = 0;\n           xTexelC${2*v+1} = vec4(0.0);\n           xTexelC${2*v+1}Ready = 0;\n           xC${v} = vec4(0.0);`;h+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let v=0;v<(d+1)/2;v++){const y=2*v;if(h+=`\n           xC = xCCorner + ${y*l};\n           `,1===a){if(y<u&&(o%2==1?(h+=`\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {\n                   xTexelC${y} = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${y}.zw = vec2(0.0);\n                   }\n                   xTexelC${y}Ready = 1;\n                 }\n               `,h+=1===l&&y>0?`\n                 xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);\n                 `:`\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC${y} = vec4(previous.zw, xTexelC${y}.xy);\n                   } else {\n                     xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);\n                   }\n                   `):h+=`\n                 if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {\n                   xTexelC${y} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${y}.zw = vec2(0.0);\n                   }\n                   xTexelC${y}Ready = 1;\n                 }\n\n                 xC${y} = xTexelC${y};\n                 `,y+1<u)){const w=o%2==0?tV(l):l;l%2==0&&o%2==1||l%2!=0&&o%2!=1?(h+=`\n                   xCOffset = xC + imod(pads[1], 2) + ${w};\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {\n                     xTexelC${y+1} = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC${y+1}.zw = vec2(0.0);\n                     }\n                     xTexelC${y+1}Ready = 1;\n                   }\n                   `,h+=l>1?`\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);\n                     } else {\n                      xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);\n                     }\n                     `:`\n                     xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);\n                     `):h+=1===w?`\n                     xC${y+1} = xTexelC${y};\n                     `:`\n                     xCOffset = xC + ${w};\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {\n                       xTexelC${y+1} = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC${y+1}.zw = vec2(0.0);\n                       }\n                       xTexelC${y+1}Ready = 1;\n                     }\n\n                     xC${y+1} = xTexelC${y+1};\n                     `}}else y<u&&(o%2==1?(h+=`\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {\n                   xTexelC${y} = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${y}.zw = vec2(0.0);\n                   }\n                   xTexelC${y}Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {\n                   xTexelC${y+1} = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC${y+1}.zw = vec2(0.0);\n                   }\n                   xTexelC${y+1}Ready = 1;\n                 }\n\n                 xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);\n               `,y+1<u&&(h+=`\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);\n                 `)):(h+=`\n                 if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {\n                   xTexelC${y} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${y}.zw = vec2(0.0);\n                   }\n                   xTexelC${y}Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {\n                   xTexelC${y+1} = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${y+1}.zw = vec2(0.);\n                   }\n                   xTexelC${y+1}Ready = 1;\n                 }\n\n                 xC${y} = vec4(\n                   xTexelC${y}.xy, xTexelC${y+1}.xy);\n               `,y+1<u&&(h+=`\n                   xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);\n                 `)));y<u&&(h+=`\n             wTexel = getW(r, ${y}, d1, d2);\n             dotProd += xC${y}.xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ${n.inChannels}) {\n               dotProd += xC${y}.yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           `,y+1<u&&(h+=`\n               wTexel = getW(r, ${y+1}, d1, d2);\n               dotProd += xC${y+1}.xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ${n.inChannels}) {\n                 dotProd += xC${y+1}.yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             `))}h+="\n     }\n   ",h+="\n     }\n   ",h+="\n     }\n   ";let f="",p="";i&&(f=s?`vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ${i}\n         }`:r?`vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ${i}\n         }`:`vec4 activation(vec4 x) {\n           ${i}\n         }`,p="result = activation(result);");const g=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n       ${f}\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ${h}\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ${g}\n         ${p}\n         setOutput(result);\n       }\n     `}}class jkt{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=n,this.enableShapeUniforms=$a(this.outputShape.length);const{dataFormat:i}=e,s=el(),r="channelsLast"===i,o=r?1:2,a=r?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${n[2]} && pos < ${n[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`\n          blockIndex = rc.z + ${d};\n          pos = rc.y + ${u};\n\n          ${l}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${o}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${a}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${r}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*u+d}] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*u+d}] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${c}\n\n        ${s.output} = result;\n      }\n    `}}function OR(t,n){const e=t.length;return e>=3?n?[...t.slice(0,-3),t[e-3]*t[e-2],t[e-1]]:[...t.slice(0,-3),t[e-3],t[e-2]*t[e-1]]:!n&&1===e&&t[0]>1?[t[0],1]:null}function uye({x:t,filter:n,convInfo:e,backend:i,bias:s=null,preluActivationWeights:r=null,leakyreluAlpha:o=0,activation:a=null}){const l=t.shape,c=i.texData.get(t.dataId),u=e.inChannels,d=l[0]*l[1]*l[2],h=e.outChannels,f="channelsLast"===e.dataFormat,g=!1;let v;const y=[];if(null!=r){const T=OR(r.shape,f);null!=T&&(r=qt({inputs:{x:r},backend:i,attrs:{shape:T}}),y.push(r))}if(null!=s){const T=OR(s.shape,f);null!=T&&(s=qt({inputs:{x:s},backend:i,attrs:{shape:T}}),y.push(s))}if((1!==d&&1!==h||!(u>Qve))&&c.isPacked&&f&&null!=c.texture&&l[2]%2!=0&&Qi(c.shape.slice(-3),l.slice(-3))){const L={dataId:t.dataId,shape:[1,l[0]*l[1]*(l[2]+1),e.inChannels],dtype:t.dtype},W=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,le(yR(c.shape,L.shape),()=>`packed reshape ${c.shape} to ${L.shape} isn't free`);const H=qt({inputs:{x:n},backend:i,attrs:{shape:[1,e.inChannels,e.outChannels]}});y.push(H);const P=kR({a:L,b:H,backend:i,transposeA:!1,transposeB:g,bias:s,activation:a,preluActivationWeights:r,leakyreluAlpha:o}),X=i.texData.get(P.dataId);le(X.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=W,X.shape=e.outShape,v=dc({inputs:{x:P},backend:i}),v.shape=e.outShape,y.push(P)}else{const T=e.outHeight*e.outWidth,L=qt({inputs:{x:t},backend:i,attrs:{shape:f?[e.batchSize,T,e.inChannels]:[e.batchSize,e.inChannels,T]}}),W=qt({inputs:{x:n},backend:i,attrs:{shape:[1,e.inChannels,e.outChannels]}}),H=kR({a:f?L:W,b:f?W:L,transposeA:!f,transposeB:g,backend:i,bias:s,activation:a,preluActivationWeights:r,leakyreluAlpha:o});v=qt({inputs:{x:H},backend:i,attrs:{shape:e.outShape}}),y.push(L),y.push(W),y.push(H)}for(const T of y)i.disposeIntermediateTensorInfo(T);return v}function dye({x:t,filter:n,convInfo:e,backend:i,bias:s=null,preluActivationWeights:r=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:h,dataFormat:f}=e,p="channelsLast"===f,g=l*c*u,v=h*d,y=[e.batchSize,g,v],T=[];if(null!=r){const Ie=OR(r.shape,p);null!=Ie&&(r=qt({inputs:{x:r},backend:i,attrs:{shape:Ie}}),T.push(r))}if(null!=s){const Ie=OR(s.shape,p);null!=Ie&&(s=qt({inputs:{x:s},backend:i,attrs:{shape:Ie}}),T.push(s))}const L=qt({inputs:{x:n},backend:i,attrs:{shape:[1,g,at(n.shape)/g]}});T.push(L);const W=new jkt(y,e),P=i.runWebGLProgram(W,[t],"float32",[t.shape,[e.padInfo.top,e.padInfo.left],[e.strideHeight,e.strideWidth],[e.dilationHeight,e.dilationWidth],[e.inChannels],[e.filterWidth*e.inChannels],[e.outWidth]]),X=qt({inputs:{x:P},backend:i,attrs:{shape:y}});T.push(P),T.push(X);const ne=null!=s,me=null!=r,Ee="leakyrelu"===a,Te=a?jE(a,!0):null,$e=new qve(p?X.shape:L.shape,p?L.shape:X.shape,p?[e.batchSize,v,e.outChannels]:[e.batchSize,e.outChannels,v],!0,!1,ne,Te,me,Ee),Xe=p?[X,L]:[L,X];if(s&&Xe.push(s),me&&Xe.push(r),Ee){const Ie=i.makeTensorInfo([],"float32",Xp(o,"float32"));Xe.push(Ie),T.push(Ie)}const Ce=i.runWebGLProgram($e,Xe,"float32"),Fe=qt({inputs:{x:Ce},backend:i,attrs:{shape:e.outShape}});T.push(Ce);for(const Ie of T)i.disposeIntermediateTensorInfo(Ie);return Fe}const Wkt={kernelName:YA,backendName:"webgl",kernelFunc:function Hkt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r}=n,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=i,d=Df(l),h=Jo(s.shape,r.shape,o,c,a,u,!1,d);let f;if(1!==h.filterHeight||1!==h.filterWidth||1!==h.dilationHeight||1!==h.dilationWidth||1!==h.strideHeight||1!==h.strideWidth||"SAME"!==h.padInfo.type&&"VALID"!==h.padInfo.type)if(h.strideWidth<=2&&"channelsLast"===d&&nt().getBool("WEBGL_EXP_CONV")){const g=new cye(h);f=e.runWebGLProgram(g,[s,r],"float32",[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]])}else if(nt().getBool("WEBGL_CONV_IM2COL"))f=dye({x:s,filter:r,convInfo:h,backend:e});else{const g=new lye(h);f=e.runWebGLProgram(g,[s,r],"float32")}else f=uye({x:s,filter:r,convInfo:h,backend:e});const p=qt({inputs:{x:f},backend:e,attrs:{shape:h.outShape}});return e.disposeIntermediateTensorInfo(f),p}};class qkt{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${n.batchSize}; b++) {\n          for (int yR = 0; yR < ${n.outHeight}; yR++) {\n            int xR = wR + yR * ${n.strideHeight} - ${n.padInfo.top};\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${n.outWidth}; yC++) {\n              int xC = wC + yC * ${n.strideWidth} - ${n.padInfo.left};\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              ${"channelsLast"===n.dataFormat?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);"}\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Kkt{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;const e=n.filterHeight,i=n.filterWidth,o="channelsLast"===n.dataFormat;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-n.padInfo.top}, ${i-1-n.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${o?3:1}];\n\n        ivec2 dyCorner = ivec2(coords[${o?1:2}], coords[${o?2:3}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${i}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${i} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${n.outChannels}; d2++) {\n\n              if (${o}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Xkt{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape,this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${n.batchSize}; b++) {\n          for (int yF = 0; yF < ${n.outDepth}; yF++) {\n            int xF = wF + yF * ${n.strideDepth} - ${n.padInfo.front};\n\n            if (xF < 0 || xF >= ${n.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${n.outHeight}; yR++) {\n              int xR = wR + yR * ${n.strideHeight} - ${n.padInfo.top};\n\n              if (xR < 0 || xR >= ${n.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${n.outWidth}; yC++) {\n                int xC = wC + yC * ${n.strideWidth} - ${n.padInfo.left};\n\n                if (xC < 0 || xC >= ${n.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Ykt{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;const e=n.filterDepth,i=n.filterHeight,s=n.filterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${e-1-n.padInfo.front}, ${i-1-n.padInfo.top}, ${s-1-n.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${e}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${n.strideDepth}.0;\n\n          if (dyF < 0.0 || dyF >= ${n.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${e} - 1 - wF;\n\n          for (int wR = 0; wR < ${i}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${i} - 1 - wR;\n\n            for (int wC = 0; wC < ${s}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${s} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${n.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const Qkt={kernelName:_V,backendName:"webgl",kernelFunc:function Zkt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,dy:r}=n,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=i,d=Df(l),h=Jo(s.shape,u,o,1,a,c,!1,d),f=new qkt(h);return e.runWebGLProgram(f,[s,r],"float32")}};class Jkt{constructor(n){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=n.inShape,this.enableShapeUniforms=$a(this.outputShape.length);const e=n.filterHeight,i=n.filterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-n.padInfo.top}, ${i-1-n.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${i}; wC++) {\n            int wCPerm = ${i} - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ${n.outWidth}.0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${n.outWidth}.0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    `}}const tDt={kernelName:ZA,backendName:"webgl",kernelFunc:function eDt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,filter:r}=n,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=i,d=Df(c),h=Jo(o,r.shape,a,1,l,u,!1,d);if(nt().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===d){const f=[[h.strideHeight,h.strideWidth]],p=new Jkt(h);return e.runWebGLProgram(p,[s,r],"float32",f)}{const f=new Kkt(h);return e.runWebGLProgram(f,[s,r],"float32")}}},iDt={kernelName:QA,backendName:"webgl",kernelFunc:function nDt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r}=n,{strides:o,pad:a,dilations:l}=i,c=rm(s.shape,r.shape,o,l,a),u=new Gkt(c);return e.runWebGLProgram(u,[s,r],"float32")}},rDt={kernelName:gV,backendName:"webgl",kernelFunc:function sDt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,dy:r}=n,{strides:o,pad:a,filterShape:l}=i,c=rm(s.shape,l,o,1,a),u=new Xkt(c);return e.runWebGLProgram(u,[s,r],"float32")}},aDt={kernelName:bV,backendName:"webgl",kernelFunc:function oDt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,filter:r}=n,{pad:o,strides:a,inputShape:l}=i,c=rm(l,r.shape,a,1,o),u=new Ykt(c);return e.runWebGLProgram(u,[s,r],"float32")}},uDt=as({opSnippet:X1+"\n  return cos(x);\n",packedOpSnippet:`\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ${ib}\n  return result;\n`}),dDt={kernelName:gx,backendName:"webgl",kernelFunc:uDt},hDt=as({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),fDt={kernelName:bx,backendName:"webgl",kernelFunc:hDt};class pDt{constructor(n,e,i,s,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,c]=n,[u]=e,[d,h]=i;this.outputShape=[u,d,h,c];const f="bilinear"===s?1:0,[p,g]=[a-1+".0",l-1+".0"],[v,y,w]=d>1?[""+(a-1)/(d-1),"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[E,T,L]=h>1?[""+(l-1)/(h-1),"(x2-x1) * width_ratio",`x1*${g} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${g}`];this.userCode=`\n      const float height_ratio = float(${v});\n      const float width_ratio = float(${E});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${o}) {\n          return;\n        }\n\n        float height_scale = ${y};\n        float width_scale = ${T};\n\n        float in_y = ${w};\n        if( in_y < 0.0 || in_y > ${p} ) {\n          setOutput(float(${r}));\n          return;\n        }\n        float in_x = ${L};\n        if( in_x < 0.0 || in_x > ${g} ) {\n          setOutput(float(${r}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${f} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}const mDt={kernelName:yV,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e,attrs:i}=t,{image:s,boxes:r,boxInd:o}=n,{cropSize:a,method:l,extrapolationValue:c}=i,u=new pDt(s.shape,r.shape,a,l,c);return e.runWebGLProgram(u,[s,r,o],"float32")}};var NR=function(t){return t.Prod="*",t.Sum="+",t}(NR||{});class hye{constructor(n,e,i,s){this.op=n,this.outputShape=e,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const r=this.outputShape.length,a=i?this.op===NR.Prod?"1.0":"0.0":`getX(${fye(r,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";i?(c=s?"end != "+(l-1):"end != 0",u=s?"end + 1":"end - 1"):(c=s?`end + pow2 < ${l}`:"end >= pow2",u=s?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${Ks(r)} coords = getOutputCoords();\n        int end = ${pye(r,"coords",this.op)};\n        float val = ${a};\n        int pow2 = int(pow(2.0, index));\n        if (${c}) {\n          int idx = ${u};\n          ${pye(r,"coords",this.op)} = idx;\n          val ${this.op}= getX(${fye(r,"coords",this.op)});\n        }\n        setOutput(val);\n      }\n    `}}function fye(t,n,e){if(1===t)return`${n}`;if(2===t)return`${n}.x, ${n}.y`;if(3===t)return`${n}.x, ${n}.y, ${n}.z`;if(4===t)return`${n}.x, ${n}.y, ${n}.z, ${n}.w`;throw new Error(`Cumulative ${e} for rank ${t} is not yet supported`)}function pye(t,n,e){if(1===t)return`${n}`;if(2===t)return`${n}.y`;if(3===t)return`${n}.z`;if(4===t)return`${n}.w`;throw new Error(`Cumulative ${e} for rank ${t} is not yet supported`)}function mye(t,n,e,i,s,r){const o=n.shape.length,a=Nr([i],o);let l=n;null!=a&&(l=nl({inputs:{x:n},backend:e,attrs:{perm:a}}));const c=Zr(1,o)[0];if(c!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${n.shape.length-1} but got axis=${i}`);const u=l.shape[c];let d=dc({inputs:{x:l},backend:e});for(let h=0;h<=Math.ceil(Math.log2(u))-1;h++){const f=new hye(t,l.shape,!1,r),g=d;d=e.runWebGLProgram(f,[d],d.dtype,[[h]]),e.disposeIntermediateTensorInfo(g)}if(s){const h=new hye(t,l.shape,s,r),f=d;d=e.runWebGLProgram(h,[d],d.dtype),e.disposeIntermediateTensorInfo(f)}if(null!=a){const f=nl({inputs:{x:d},backend:e,attrs:{perm:lm(a)}});return e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(l),f}return d}const gDt={kernelName:vV,backendName:"webgl",kernelFunc:function _Dt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,exclusive:o,reverse:a}=i;return mye(NR.Prod,s,e,r,o,a)}},vDt={kernelName:JA,backendName:"webgl",kernelFunc:function bDt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,exclusive:o,reverse:a}=i;return mye(NR.Sum,s,e,r,o,a)}},wDt={kernelName:wV,backendName:"webgl",kernelFunc:function yDt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,weights:r}=n,{size:o,binaryOutput:a}=i;if(1===s.shape.length){const l=e.readSync(s.dataId),c=e.readSync(r.dataId),u=Rve(l,c,r.dtype,r.shape,o);return e.makeTensorInfo([o],r.dtype,u)}if(2===s.shape.length){const l=e.bufferSync(s),c=e.bufferSync(r),u=TTt(l,c,o,a);return e.makeTensorInfo(u.shape,r.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}};class SDt{constructor(n,e,i){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=e,this.dataFormat=i,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${e};\n      int offset_h = imod(h, ${e});\n      int in_w = w / ${e};\n      int offset_w = imod(w, ${e});\n      int offset_d = (offset_h * ${e} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const xDt={kernelName:SV,backendName:"webgl",kernelFunc:function CDt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{blockSize:r,dataFormat:o}=i,a=s.shape[0],d=("NHWC"===o?s.shape[1]:s.shape[2])*r,h=("NHWC"===o?s.shape[2]:s.shape[3])*r,f=("NHWC"===o?s.shape[3]:s.shape[1])/(r*r),g=new SDt("NHWC"===o?[a,d,h,f]:[a,f,d,h],r,o);return e.runWebGLProgram(g,[s],s.dtype)}};class _ye{constructor(n,e=!1,i=null,s=!1,r=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=$a(this.outputShape.length);const o=n.filterHeight,a=n.filterWidth,l=n.outChannels/n.inChannels;let c="",u="";i&&(c=s?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${i}\n        }`:r?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${i}\n        }`:`\n          float activation(float x) {\n            ${i}\n          }\n        `,u="result = activation(result);");const d=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${c}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${l};\n        int q = d2 - d1 * ${l};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${o}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${a}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${d}\n        ${u}\n        setOutput(result);\n      }\n    `}}class gye{constructor(n,e=!1,i=null,s=!1,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=$a(this.outputShape.length);const o=n.outChannels/n.inChannels,a=n.padInfo.left,l=n.strideWidth,c=n.dilationWidth,u=n.filterHeight,d=n.filterWidth,h=d;let f="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let y=0;y<d;y++)f+=`\n          vec4 xTexelC${2*y};\n          int xTexelC${2*y}Ready;\n          vec4 xTexelC${2*y+1};\n          int xTexelC${2*y+1}Ready;\n          vec4 xC${y};`;f+=`\n    for (int r = 0; r < ${u}; r++) {\n      `;for(let y=0;y<d;y++)f+=`\n          xTexelC${2*y} = vec4(0.0);\n          xTexelC${2*y}Ready = 0;\n          xTexelC${2*y+1} = vec4(0.0);\n          xTexelC${2*y+1}Ready = 0;\n          xC${y} = vec4(0.0);`;f+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let y=0;y<(h+1)/2;y++){const w=2*y;if(f+=`\n          xC = xCCorner + ${w*c};\n          `,1===l){if(w<d&&(a%2==1?(f+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {\n                  xTexelC${w} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${w}.zw = vec2(0.0);\n                  }\n                  xTexelC${w}Ready = 1;\n                }\n              `,f+=1===c&&w>0?`\n                xC${w} = vec4(xTexelC${w-2}.zw, xTexelC${w}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${w} = vec4(previous.zw, xTexelC${w}.xy);\n                  } else {\n                    xC${w} = vec4(0.0, 0.0, xTexelC${w}.xy);\n                  }\n                  `):f+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {\n                  xTexelC${w} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${w}.zw = vec2(0.0);\n                  }\n                  xTexelC${w}Ready = 1;\n                }\n\n                xC${w} = xTexelC${w};\n                `,w+1<d)){const E=a%2==0?tV(c):c;c%2==0&&a%2==1||c%2!=0&&a%2!=1?(f+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${E};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {\n                    xTexelC${w+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${w+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${w+1}Ready = 1;\n                  }\n                  `,f+=c>1?`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC${w+1} = vec4(previous.zw, xTexelC${w+1}.xy);\n                    } else {\n                     xC${w+1} = vec4(0.0, 0.0, xTexelC${w+1}.xy);\n                    }\n                    `:`\n                    xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.xy);\n                    `):f+=1===E?`\n                    xC${w+1} = xTexelC${w};\n                    `:`\n                    xCOffset = xC + ${E};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {\n                      xTexelC${w+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${w+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${w+1}Ready = 1;\n                    }\n\n                    xC${w+1} = xTexelC${w+1};\n                    `}}else w<d&&(a%2==1?(f+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {\n                  xTexelC${w} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${w}.zw = vec2(0.0);\n                  }\n                  xTexelC${w}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${w+1}Ready == 0) {\n                  xTexelC${w+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${w+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${w+1}Ready = 1;\n                }\n\n                xC${w} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);\n              `,w+1<d&&(f+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${w+1} = vec4(xTexelC${w+1}.xy, final.xy);\n                `)):(f+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {\n                  xTexelC${w} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${w}.zw = vec2(0.0);\n                  }\n                  xTexelC${w}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {\n                  xTexelC${w+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${w+1}.zw = vec2(0.);\n                  }\n                  xTexelC${w+1}Ready = 1;\n                }\n\n                xC${w} = vec4(\n                  xTexelC${w}.xy, xTexelC${w+1}.xy);\n              `,w+1<d&&(f+=`\n                  xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);\n                `)));w<d&&(f+=`\n            wTexel = getW(r, ${w}, d1, q);\n            dotProd += xC${w} * vec4(wTexel.xz, wTexel.xz);\n          `,w+1<d&&(f+=`\n              wTexel = getW(r, ${w+1}, d1, q);\n              dotProd += xC${w+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}f+="\n    }\n  ",f+="\n      }\n    ";let p="",g="";i&&(p=s?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${i}\n        }`:r?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${i}\n        }`:`vec4 activation(vec4 x) {\n          ${i}\n        }`,g="result = activation(result);");const v=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${p}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${o};\n        int q = d2 - d1 * ${o};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${f}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${v}\n        ${g}\n        setOutput(result);\n      }\n    `}}const TDt={kernelName:eO,backendName:"webgl",kernelFunc:function EDt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r}=n,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=i;let u=l;null==u&&(u=[1,1]),le(va(o,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const d=Jo(s.shape,r.shape,o,u,a,c,!0);let h;return h=nt().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels==1?new gye(d):new _ye(d),e.runWebGLProgram(h,[s,r],"float32",[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]])}};class IDt{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${n.outChannels/n.inChannels} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${n.batchSize}; b++) {\n          for (int yR = 0; yR < ${n.outHeight}; yR++) {\n            int xR = wR + yR * ${n.strideHeight} - ${n.padInfo.top};\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${n.outWidth}; yC++) {\n              int xC = wC + yC * ${n.strideWidth} - ${n.padInfo.left};\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class kDt{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;const e=n.filterHeight,i=n.filterWidth,l=n.outChannels/n.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-n.padInfo.top}, ${i-1-n.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${i}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${i} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${l}; dm++) {\n              int d2 = d1 * ${l} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const MDt={kernelName:CV,backendName:"webgl",kernelFunc:function DDt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,dy:r}=n,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=i,d=Jo(s.shape,u,o,a,l,c,!0),h=new IDt(d);return e.runWebGLProgram(h,[s,r],"float32")}},ODt={kernelName:xV,backendName:"webgl",kernelFunc:function ADt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,filter:r}=n,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=i,d=Jo(u,r.shape,o,a,l,c,!0),h=new kDt(d);return e.runWebGLProgram(h,[s,r],"float32")}};class NDt{constructor(n){this.variableNames=["X"],this.outputShape=[n,n],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const FDt={kernelName:EV,backendName:"webgl",kernelFunc:function RDt(t){const{inputs:n,backend:e}=t,{x:i}=n,s=[...i.shape,...i.shape],r=at(i.shape),o=qt({inputs:{x:i},backend:e,attrs:{shape:[r]}}),a=new NDt(r),l=e.runWebGLProgram(a,[o],o.dtype),c=qt({inputs:{x:l},backend:e,attrs:{shape:s}});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(l),c}};class LDt{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;const{inHeight:e,inWidth:i,padInfo:s,strideHeight:r,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=n,{top:d,left:h}=s;this.userCode=`\n      const ivec2 strides = ivec2(${r}, ${o});\n      const ivec2 pads = ivec2(${d}, ${h});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${a}; h++) {\n          int hIn = hBeg + h * ${c};\n\n          if (hIn >= 0 && hIn < ${e}) {\n            for (int w = 0; w < ${l}; w++) {\n              int wIn = wBeg + w * ${u};\n\n              if (wIn >= 0 && wIn < ${i}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}const $Dt={kernelName:tO,backendName:"webgl",kernelFunc:function PDt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r}=n,{strides:o,pad:a,dilations:l}=i,c=aE(s.shape,r.shape,o,a,"NHWC",l);let u;const d=new LDt(c);u=e.runWebGLProgram(d,[s,r],"float32");const h=qt({inputs:{x:u},backend:e,attrs:{shape:c.outShape}});return e.disposeIntermediateTensorInfo(u),h}},VDt={kernelName:DV,backendName:"webgl",kernelFunc:function BDt(t){const{inputs:n,backend:e,attrs:i}=t,{equation:s}=i,r=n,{allDims:o,summedDims:a,idDims:l}=m9(s,r.length);g9(o.length,l,r);const{path:c,steps:u}=b9(a,l),d=u.length;let h=null,f=o.length;const p=[];for(let g=0;g<d;++g){for(const v of u[g]){const{permutationIndices:y,expandDims:w}=_9(f,l[v]);let E;v9(y)?E=r[v]:(E=nl({inputs:{x:r[v]},backend:e,attrs:{perm:y}}),p.push(E));const T=E.shape.slice();for(let L=0;L<w.length;++L)T.splice(w[L],0,1);Qi(E.shape,T)||(E=qt({inputs:{x:E},backend:e,attrs:{shape:T}}),p.push(E)),null===h?h=E:(h=eG({inputs:{a:E,b:h},backend:e}),p.push(h))}g<d-1&&(c[g]>=0&&(h=IR({inputs:{x:h},backend:e,attrs:{axis:c[g]-(o.length-f),keepDims:!1}}),p.push(h)),f--)}for(const g of p)g!==h&&e.disposeIntermediateTensorInfo(g);return h}},zDt=as({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),UDt={kernelName:yx,backendName:"webgl",kernelFunc:zDt},HDt={kernelName:MV,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e}=t,{dy:i,y:s}=n,r=nt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new K1("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",i.shape,s.shape):new nb("return (b >= 0.0) ? a : a * (b + 1.0);",i.shape,s.shape);return e.runWebGLProgram(r,[i,s],i.dtype)}},WDt=Sa({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:ATt}),qDt={kernelName:nO,backendName:"webgl",kernelFunc:WDt},XDt=as({opSnippet:`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${a9};\n  float a1 = ${l9};\n  float a2 = ${c9};\n  float a3 = ${u9};\n  float a4 = ${d9};\n  float a5 = ${h9};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`}),YDt={kernelName:wx,backendName:"webgl",kernelFunc:XDt},bye=as({opSnippet:X1+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:OTt,dtype:"float32"}),QDt={kernelName:Sx,backendName:"webgl",kernelFunc:bye};function sG(t){const{inputs:n,attrs:e,backend:i}=t,{dim:s}=e,{input:r}=n,o=r.shape.length,a=r.shape.slice();let l=s;return s<0&&(le(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),a.splice(l,0,1),qt({inputs:{x:r},backend:i,attrs:{shape:a}})}const JDt={kernelName:iO,backendName:"webgl",kernelFunc:sG},vye="return exp(x) - 1.0;",eMt=as({opSnippet:vye,packedOpSnippet:vye,cpuKernelImpl:NTt}),tMt={kernelName:Cx,backendName:"webgl",kernelFunc:eMt};class yye{constructor(n,e,i){this.variableNames=["real","imag"];const s=e[1];this.outputShape=e;const r=i?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=i?`${s}.0`:"1.0";let a;if("real"===n)a="return real * expR - imag * expI;";else{if("imag"!==n)throw new Error(`FFT component must be either "real" or "imag", got ${n}.`);a="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${r};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${a}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${s});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${s}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${o};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}function wye(t,n,e){const i=e.texData.get(t.dataId),s=at(t.shape),r=t.shape[t.shape.length-1],a=qt({inputs:{x:t},backend:e,attrs:{shape:[s/r,r]}}),l=a.shape,c=new yye("real",l,n),u=new yye("imag",l,n),d=[{dataId:i.complexTensorInfos.real.dataId,dtype:i.complexTensorInfos.real.dtype,shape:l},{dataId:i.complexTensorInfos.imag.dataId,dtype:i.complexTensorInfos.imag.dtype,shape:l}],h=e.runWebGLProgram(c,d,"float32"),f=e.runWebGLProgram(u,d,"float32"),p=xm({inputs:{real:h,imag:f},backend:e});e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f);const g=qt({inputs:{x:p},backend:e,attrs:{shape:t.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(p),g}const iMt={kernelName:"FFT",backendName:"webgl",kernelFunc:function nMt(t){const{inputs:n,backend:e}=t,{input:i}=n;return wye(i,!1,e)}};class sMt{constructor(n,e){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=n,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function KE(t){const{backend:n,attrs:e}=t,{shape:i,value:s}=e;let{dtype:r}=e;if(r=r||a1(s),"string"===r){const o=Kr(r,at(i));return o.fill(s),n.makeTensorInfo(i,r,o)}{const o=new sMt(i,s);return n.runWebGLProgram(o,[],r,[[s]])}}const rMt={kernelName:OV,backendName:"webgl",kernelFunc:KE};class oMt{constructor(n){this.variableNames=["Image"],this.outputShape=[];const e=n[2];this.outputShape=n,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${e} - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${e}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const aMt={kernelName:NV,backendName:"webgl",kernelFunc:({inputs:t,backend:n})=>{const{image:e}=t,i=n,s=new oMt(e.shape);return i.runWebGLProgram(s,[e],e.dtype)}},Sye="return floor(x);",lMt=as({opSnippet:Sye,packedOpSnippet:Sye,cpuKernelImpl:RTt}),cMt={kernelName:xx,backendName:"webgl",kernelFunc:lMt},uMt=Sa({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),dMt={kernelName:Ex,backendName:"webgl",kernelFunc:uMt};class hMt{constructor(n){this.variableNames=["A"];const e=el(),[i,s]=n;this.outputShape=n,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${i}.0);\n\n        vec4 values = ${e.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}class fMt{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const e=el(),[i,s]=n;this.outputShape=n,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${s}.0, ${i}.0);\n            vec4 values = ${e.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${e.output} = result;\n      }\n    `}}const pMt={kernelName:mz,backendName:"webgl",kernelFunc:function mMt(t){const{inputs:n,backend:e,attrs:i}=t;let{pixels:s}=n;const{numChannels:r}=i,o=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,c]=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],u=[c,l],d=[c,l,r];if(a||o){const g=nt().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(null==Z1||g!==rG)&&(rG=g,Z1=document.createElement("canvas").getContext("2d",{willReadFrequently:rG})),Z1.canvas.width=l,Z1.canvas.height=c,Z1.drawImage(s,0,0,l,c),s=Z1.canvas}const h=e.makeTensorInfo(u,"int32");e.texData.get(h.dataId).usage=Du.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(h.dataId),s);const f=nt().getBool("WEBGL_PACK")?new fMt(d):new hMt(d),p=e.runWebGLProgram(f,[h],"int32");return e.disposeData(h.dataId),p}};let Z1,rG=nt().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const gMt={kernelName:GO,backendName:"webgl",kernelFunc:function _Mt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r,bias:o,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=i,g=Df(u),v=Jo(s.shape,r.shape,l,d,c,h,!1,g);let y;const w=[],E=null!=o,T=null!=a,L="leakyrelu"===f,W=()=>{const P=[s,r],X=(ne,me)=>{if("NCHW"===me&&1===ne.shape.length&&1!==ne.shape[0]){const Ee=qt({inputs:{x:ne},backend:e,attrs:{shape:[ne.shape[0],1,1]}});return w.push(Ee),Ee}return ne};if(E&&P.push(X(o,u)),T&&P.push(X(a,u)),L){const ne=e.makeTensorInfo([],"float32",Xp(p,"float32"));P.push(ne),w.push(ne)}return P};if(1!==v.filterHeight||1!==v.filterWidth||1!==v.dilationHeight||1!==v.dilationWidth||1!==v.strideHeight||1!==v.strideWidth||"SAME"!==v.padInfo.type&&"VALID"!==v.padInfo.type)if(v.strideWidth<=2&&"channelsLast"===g&&nt().getBool("WEBGL_EXP_CONV")){const P=f?jE(f,!0):null,X=new cye(v,E,P,T,L),ne=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],me=W();y=e.runWebGLProgram(X,me,"float32",ne)}else if(nt().getBool("WEBGL_CONV_IM2COL"))y=dye({x:s,filter:r,convInfo:v,backend:e,bias:o,activation:f,preluActivationWeights:a,leakyreluAlpha:p});else{const P=f?jE(f,!1):null,X=new lye(v,E,P,T,L),ne=W();y=e.runWebGLProgram(X,ne,"float32")}else y=uye({x:s,filter:r,convInfo:v,backend:e,bias:o,activation:f,preluActivationWeights:a,leakyreluAlpha:p});const H=qt({inputs:{x:y},backend:e,attrs:{shape:v.outShape}});return w.push(y),w.forEach(P=>e.disposeIntermediateTensorInfo(P)),H}},vMt={kernelName:jO,backendName:"webgl",kernelFunc:function bMt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r,bias:o,preluActivationWeights:a}=n,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=i,p=[];let g=u;null==g&&(g=[1,1]),le(va(l,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${g}'`);const v=Jo(s.shape,r.shape,l,g,c,d,!0),y=nt().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels==1,w=h?jE(h,y):null,E=[s,r],T=null!=o,L=null!=a,W="leakyrelu"===h;if(T&&E.push(o),L&&E.push(a),W){const ne=e.makeTensorInfo([],"float32",Xp(f,"float32"));E.push(ne),p.push(ne)}let H;H=y?new gye(v,T,w,L,W):new _ye(v,T,w,L,W);const X=e.runWebGLProgram(H,E,"float32",[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]]);return p.forEach(ne=>e.disposeIntermediateTensorInfo(ne)),X}};class yMt{constructor(n,e,i,s){this.sliceDim=n,this.strides=e,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=i;const r=Ks(i.length);let o="\n    int index;";for(let a=0;a<this.sliceDim;a++)o+=`\n          index = round(getIndices(coords[0], ${a}));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};\n          flattenIndex += index * ${this.strides[a]};`;this.userCode=`\n         void main() {\n          ${r} coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ${o}\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      `}}const SMt={kernelName:RV,backendName:"webgl",kernelFunc:function wMt(t){const{inputs:n,backend:e}=t,{params:i,indices:s}=n,r=s.shape,o=r[r.length-1],a=at(i.shape),[l,c,u,d]=o9(i,s),h=qt({inputs:{x:s},backend:e,attrs:{shape:[c,o]}}),f=qt({inputs:{x:i},backend:e,attrs:{shape:[at(i.shape)/u,u]}});if(e.shouldExecuteOnCPU([i,s])||"string"===i.dtype){const y=e.readSync(s.dataId),w=e.bufferSync(i),E=FTt(y,w,i.dtype,c,o,u,d,i.shape,a);return e.makeTensorInfo(l,i.dtype,E.values)}const p=new yMt(o,d,[c,u],i.shape),g=e.runWebGLProgram(p,[f,h],f.dtype),v=qt({inputs:{x:g},backend:e,attrs:{shape:l}});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(g),v}};class CMt{constructor(n,e){this.variableNames=["A","indices"],this.outputShape=e,this.rank=e.length;const i=Ks(this.rank),s=function xMt(t,n){const e=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[];for(let s=0;s<t.length;s++)i.push(2===s?"index":`${e[s]}`);return i.join()}(n);this.userCode=`\n      void main() {\n        ${i} resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ${n[2]}) ? 1.0 : 0.0;\n        setOutput(inBounds * getA(${s}));\n      }\n    `}}function Cye(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,indices:r}=n,{axis:o,batchDims:a}=i,l=$i(o,s.shape)[0];if(nt().get("DEBUG")){const w=e.readSync(r.dataId),E=s.shape[l];for(let T=0;T<w.length;++T){const L=w[T];le(L<=E-1&&L>=0,()=>`GatherV2: the index value ${L} is not in [0, ${E-1}]`)}}const c=S9(s,r,l,a),u=at(r.shape),d=[],h=qt({inputs:{x:s},backend:e,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),f=qt({inputs:{x:r},backend:e,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(h),d.push(f);const p=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(e.shouldExecuteOnCPU([s,r])||"string"===s.dtype){const w=e.bufferSync(f),E=e.bufferSync(h),T=LTt(E,w,p);return d.forEach(L=>e.disposeIntermediateTensorInfo(L)),e.makeTensorInfo(c.outputShape,T.dtype,T.values)}const g=new CMt(h.shape,p),v=e.runWebGLProgram(g,[h,f],h.dtype);d.push(v);const y=qt({inputs:{x:v},backend:e,attrs:{shape:c.outputShape}});return d.forEach(w=>e.disposeIntermediateTensorInfo(w)),y}const EMt={kernelName:rO,backendName:"webgl",kernelFunc:Cye},TMt=Sa({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:PTt,dtype:"bool"}),IMt={kernelName:oO,backendName:"webgl",kernelFunc:TMt},kMt=Sa({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:$Tt}),DMt={kernelName:Tx,backendName:"webgl",kernelFunc:kMt},AMt={kernelName:FV,backendName:"webgl",kernelFunc:function MMt(t){const{inputs:n,backend:e}=t,{input:i}=n;return wye(i,!0,e)}},OMt=as({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),NMt={kernelName:kx,backendName:"webgl",kernelFunc:OMt},RMt=as({opSnippet:"return float(isinf(x));",dtype:"bool"}),FMt={kernelName:Dx,backendName:"webgl",kernelFunc:RMt},LMt=as({opSnippet:"return float(isnan(x));",dtype:"bool"}),PMt={kernelName:Mx,backendName:"webgl",kernelFunc:LMt},$Mt=Sa({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:BTt,dtype:"bool"}),BMt={kernelName:lO,backendName:"webgl",kernelFunc:$Mt},VMt=Sa({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:VTt,dtype:"bool"}),zMt={kernelName:cO,backendName:"webgl",kernelFunc:VMt},GMt={kernelName:PV,backendName:"webgl",kernelFunc:function UMt(t){const{backend:n,attrs:e}=t,{start:i,stop:s,num:r}=e,o=zTt(i,s,r);return n.makeTensorInfo([o.length],"float32",o)}},HMt=as({opSnippet:X1+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:UTt}),WMt={kernelName:Ax,backendName:"webgl",kernelFunc:HMt},KMt=as({opSnippet:X1+"\n  return log(1.0 + x);\n"}),XMt={kernelName:Ox,backendName:"webgl",kernelFunc:KMt},YMt=Sa({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),ZMt={kernelName:uO,backendName:"webgl",kernelFunc:YMt},QMt=as({opSnippet:"return float(!(x >= 1.0));"}),JMt={kernelName:dO,backendName:"webgl",kernelFunc:QMt},eAt=Sa({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),tAt={kernelName:hO,backendName:"webgl",kernelFunc:eAt};class nAt{constructor(n,e,i,s,r){this.variableNames=["x"],this.outputShape=[];const o=e,a=n[3]-1;let l;this.outputShape=n;const c=`float(${i}) + float(${s}) * sum`;l=.5===r?`inversesqrt(${c})`:1===r?`1.0/(${c})`:`exp(log(${c}) * float(-${r}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${o}; j <= ${o}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${a}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${l};\n        setOutput(val);\n      }\n    `}}class iAt{constructor(n,e,i,s,r){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=e,a=n[3]-1;let l;this.outputShape=n;const c=`float(${i}) + float(${s}) * sum`;l=.5===r?`inversesqrt(${c})`:1===r?`1.0/(${c})`:`exp(log(${c}) * float(-${r}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${o};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${o}; j <= ${o}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${l};\n        setOutput(result);\n      }\n    `}}const sAt={kernelName:fO,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{depthRadius:r,bias:o,alpha:a,beta:l}=i,c=nt().getBool("WEBGL_PACK_NORMALIZATION")?new iAt(s.shape,r,o,a,l):new nAt(s.shape,r,o,a,l);return e.runWebGLProgram(c,[s],s.dtype)}};class rAt{constructor(n,e,i,s,r){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=e,this.bias=i,this.alpha=s,this.beta=r,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${e})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${e} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${s}) * norm + float(${i});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${s})\n                * float(${r})\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${r});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}const oAt={kernelName:$V,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e,attrs:i}=t,{x:s,y:r,dy:o}=n,{depthRadius:a,bias:l,alpha:c,beta:u}=i,d=new rAt(s.shape,a,l,c,u);return e.runWebGLProgram(d,[s,r,o],s.dtype)}};function xye(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{reductionIndices:r,keepDims:o}=i,a=s.shape.length,l=$i(r,s.shape);let c=l;const u=Nr(c,a),d=null!=u,h=e.shouldExecuteOnCPU([s]);let f=s;if(d){if(h){const E=e.texData.get(f.dataId).values,T=new Array(a);for(let H=0;H<T.length;H++)T[H]=s.shape[u[H]];const L=QU(E,s.shape,s.dtype,u,T);f=e.makeTensorInfo(T,s.dtype),e.texData.get(f.dataId).values=L}else f=TR(s,u,e);c=Zr(c.length,a)}ya("max",c,a);const[p,g]=ea(f.shape,c);let y,v=p;if(o&&(v=Yr(p,l)),h){const E=e.texData.get(f.dataId).values,T=GTt(E,at(g),v,s.dtype);y=e.makeTensorInfo(v,s.dtype),e.texData.get(y.dataId).values=T}else y=function aAt(t,n,e,i){const s=at(n),a=qt({inputs:{x:t},attrs:{shape:[at(t.shape)/s,s]},backend:i}),l=sb(a,t.dtype,"max",i),c=qt({inputs:{x:l},attrs:{shape:e},backend:i});return i.disposeIntermediateTensorInfo(a),i.disposeIntermediateTensorInfo(l),c}(f,g,v,e);return d&&e.disposeIntermediateTensorInfo(f),y}const lAt={kernelName:pO,backendName:"webgl",kernelFunc:xye},dAt=Sa({opSnippet:JU+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+ib+"\n  return result;\n",cpuKernelImpl:jTt}),hAt={kernelName:Nx,backendName:"webgl",kernelFunc:dAt},pAt={kernelName:mO,backendName:"webgl",kernelFunc:function fAt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n;UE(s,"maxPool");const{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=i;le(va(o,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`);const u=gu(s.shape,r,o,1,a,l);if(1===u.filterWidth&&1===u.filterHeight&&Qi(u.inShape,u.outShape))return dc({inputs:{x:s},backend:e});const d=new HE(u,"max",!1);return e.runWebGLProgram(d,[s],s.dtype)}},_At={kernelName:_O,backendName:"webgl",kernelFunc:function mAt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{filterSize:r,strides:o,pad:a,dataFormat:l,dimRoundingMode:c}=i,d=kf(s.shape,r,o,[1,1,1],a,c,l),h=new tG(d,"max",!1);return e.runWebGLProgram(h,[s],s.dtype)}};class gAt{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;const r=n.effectiveFilterHeight,o=n.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${r-1-n.padInfo.top}, ${o-1-n.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${r};\n          wR += ${n.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${r*o-1} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${o} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class bAt{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;const l=n.effectiveFilterDepth,c=n.effectiveFilterHeight,u=n.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${l-1-n.padInfo.front}, ${c-1-n.padInfo.top}, ${u-1-n.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${l};\n           wD += ${n.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${n.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${n.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${c};\n              wR += ${n.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${u};\n                wC += ${n.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${l*c*u-1} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${c} * ${u} +\n                  wR * ${u} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const yAt={kernelName:VV,backendName:"webgl",kernelFunc:function vAt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,input:r}=n,o=r,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=i,h=kf(o.shape,a,l,[1,1,1],c,u),f=new tG(h,"max",!0),p=e.runWebGLProgram(f,[o],o.dtype),g=new bAt(h),v=e.runWebGLProgram(g,[s,p],o.dtype);return e.disposeIntermediateTensorInfo(p),v}},SAt={kernelName:BV,backendName:"webgl",kernelFunc:function wAt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,input:r,output:o}=n,a=r;UE([r,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=i,h=gu(a.shape,l,c,1,u,d),p=new HE(h,"max",!0),g=e.runWebGLProgram(p,[a],a.dtype),v=new gAt(h),y=e.runWebGLProgram(v,[s,g],a.dtype);return e.disposeIntermediateTensorInfo(g),y}},xAt={kernelName:zV,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{const{x:i}=t,{filterSize:s,strides:r,pad:o,includeBatchInIndex:a}=n,l=e;le(4===i.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${i.shape.length}.`);const c=[1,1];le(va(r,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${r} and dilations '${c}'`);const u=gu(i.shape,s,r,c,o),[d,h]=function CAt(t,n,e,i){let s=new HE(e,"max",!1);const r=i.runWebGLProgram(s,[t],"float32");return s=new HE(e,"max",!0,!0,n),[r,i.runWebGLProgram(s,[t],"float32")]}(i,a,u,l);return[d,h]}},TAt={kernelName:gO,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{const{x:i}=t,{keepDims:s,axis:r}=n,o=e,a=i.shape.length,l=$i(r,i.shape);let c=l;const u=Nr(c,a),d=null!=u,h=o.shouldExecuteOnCPU([i]),f=[];let p=i;if(d){if(h){const T=o.texData.get(p.dataId).values,L=new Array(a);for(let P=0;P<L.length;P++)L[P]=i.shape[u[P]];const W=QU(T,i.shape,i.dtype,u,L);p=o.makeTensorInfo(L,i.dtype),o.texData.get(p.dataId).values=W}else p=TR(i,u,o);f.push(p),c=Zr(c.length,a)}ya("sum",c,a);const[g,v]=ea(p.shape,c);let y=g;s&&(y=Yr(g,l));const w=function EAt(t,n,e,i){const s=at(n),a=qt({inputs:{x:t},attrs:{shape:[at(t.shape)/s,s]},backend:i}),l=sb(a,"float32","mean",i),c=qt({inputs:{x:l},attrs:{shape:e},backend:i});return i.disposeIntermediateTensorInfo(a),i.disposeIntermediateTensorInfo(l),c}(p,v,y,o);for(const E of f)o.disposeIntermediateTensorInfo(E);return w}},kAt={kernelName:bO,backendName:"webgl",kernelFunc:function IAt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i,a=s.shape.length,l=$i(r,s.shape);let c=l;const u=Nr(c,a);let d=s;null!=u&&(d=nl({inputs:{x:s},backend:e,attrs:{perm:u}}),c=Zr(c.length,s.shape.length)),ya("min",c,a);const[h,f]=ea(d.shape,c),g=qt({inputs:{x:d},backend:e,attrs:{shape:[-1,at(f)]}}),v=sb(g,g.dtype,"min",e);let y;return y=qt(o?{inputs:{x:v},backend:e,attrs:{shape:Yr(h,l)}}:{inputs:{x:v},backend:e,attrs:{shape:h}}),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(v),null!=u&&e.disposeIntermediateTensorInfo(d),y}},AAt=Sa({opSnippet:JU+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+ib+"\n  return result;\n",cpuKernelImpl:HTt}),OAt={kernelName:Rx,backendName:"webgl",kernelFunc:AAt};class NAt{constructor(n,e,i){this.variableNames=["x"],this.outputShape=e.map((u,d)=>u[0]+n[d]+u[1]);const s=n.length,r=Ks(s),o=e.map(u=>u[0]).join(","),a=e.map((u,d)=>u[0]+n[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),c="reflect"===i?0:1;this.userCode=1!==s?`\n      ${r} start = ${r}(${o});\n      ${r} end = ${r}(${a});\n\n      void main() {\n        ${r} outC = getOutputCoords();\n        for (int i = 0; i < ${s}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${c};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};\n          }\n        }\n        ${r} coords = outC - start;\n        setOutput(getX(${l}));\n      }\n    `:`\n        int start = ${o};\n        int end = ${a};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${c};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${c};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}class RAt{constructor(n,e,i){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((p,g)=>p[0]+n[g]+p[1]);const s=n.length,r=Ks(s),o=e.map(p=>p[0]).join(","),a=e.map((p,g)=>p[0]+n[g]).join(","),l=tl("rc",s),c=tl("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,d=1===s?"source":`vec2(${c.slice(-2).join()})`,h="reflect"===i?0:1;let f="";if(1===s){const p=`\n        ${r} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${h};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${h};\n        }\n        source -= start;\n      `;f=`\n        ${r} rc = outputLoc;\n        ${p}\n        result[0] = getChannel(getX(${c.join()}), ${d});\n        ${l[s-1]} += 1;\n        if(${u}) {\n          ${p}\n          result[1] = getChannel(getX(${c.join()}), ${d});\n        }\n      `}else{const p=`\n        ${r} source = rc;\n        ${r} lt = ${r}(lessThan(source, start));\n        ${r} gte = ${r}(greaterThanEqual(source, end));\n        ${r} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${h}) +\n                gte * ((end - 1) * 2 - source + ${h});\n        source -= start;\n      `;f=`\n        ${r} rc = outputLoc;\n        ${p}\n        result[0] = getChannel(getX(${c.join()}), ${d});\n        ${l[s-1]} += 1;\n        if(${u}) {\n          ${p}\n          result[1] = getChannel(getX(${c.join()}), ${d});\n        }\n        rc = outputLoc;\n        ${l[s-2]} += 1;\n        if(${l[s-2]} < ${this.outputShape[s-2]}) {\n          ${p}\n          result[2] = getChannel(getX(${c.join()}), ${d});\n          ${l[s-1]} += 1;\n          if(${u}) {\n            ${p}\n            result[3] = getChannel(getX(${c.join()}), ${d});\n          }\n        }\n      `}this.userCode=`\n      const ${r} start = ${r}(${o});\n      const ${r} end = ${r}(${a});\n\n      void main() {\n        ${r} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${f}\n        setOutput(result);\n      }\n    `}}const FAt={kernelName:vO,backendName:"webgl",kernelFunc:({inputs:t,backend:n,attrs:e})=>{const{x:i}=t,{paddings:s,mode:r}=e,o=nt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new RAt(i.shape,s,r):new NAt(i.shape,s,r);return n.runWebGLProgram(o,[i],i.dtype)}},$At=Sa({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+ib+"\n  return result;\n"}),BAt={kernelName:Fx,backendName:"webgl",kernelFunc:$At};class VAt{constructor(n,e,i){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[n,i],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${e-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${e-1}));\n      }\n    `}}const Eye=Sa({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),zAt={kernelName:vx,backendName:"webgl",kernelFunc:Eye},Tye="return a - b;",Iye=Sa({opSnippet:Tye,packedOpSnippet:Tye,supportsComplex:!0,cpuKernelImpl:h2t}),UAt={kernelName:Zx,backendName:"webgl",kernelFunc:Iye};function kye(t){const{inputs:n,backend:e,attrs:i}=t,{logits:s}=n,{dim:r}=i,o=$i([r],s.shape),a=xye({inputs:{x:s},backend:e,attrs:{reductionIndices:o,keepDims:!1}}),l=Yr(a.shape,o),c=qt({inputs:{x:a},backend:e,attrs:{shape:l}}),u=Iye({inputs:{a:s,b:c},backend:e}),d=bye({inputs:{x:u},backend:e}),h=IR({inputs:{x:d},backend:e,attrs:{axis:o,keepDims:!1}}),f=qt({inputs:{x:h},backend:e,attrs:{shape:l}}),p=Eye({inputs:{a:d,b:f},backend:e});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),p}const GAt={kernelName:PO,backendName:"webgl",kernelFunc:kye},HAt={kernelName:UV,backendName:"webgl",kernelFunc:function jAt(t){const{inputs:n,backend:e,attrs:i}=t,{logits:s}=n,{numSamples:r,seed:o,normalized:a}=i,l=a?s:kye({inputs:{logits:s},backend:e,attrs:{dim:s.shape.length-1}}),d=new VAt(l.shape[0],l.shape[1],r),f=e.runWebGLProgram(d,[l],"int32",[[o]]);return a||e.disposeIntermediateTensorInfo(l),f}},WAt=Hc+"\n  return -x;\n",XAt={kernelName:yO,backendName:"webgl",kernelFunc:function KAt(t){const{inputs:n,backend:e}=t,{x:i}=n;if(e.shouldExecuteOnCPU([i])){const r=e.texData.get(i.dataId),[o,a]=qTt(r.values,i.shape,i.dtype);return e.makeTensorInfo(a,i.dtype,o)}let s;return s=nt().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Cm(i.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new Th(i.shape,WAt),e.runWebGLProgram(s,[i],i.dtype)}},YAt=K7,QAt={kernelName:GV,backendName:"webgl",kernelFunc:function ZAt(t){Lc("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:n,backend:e,attrs:i}=t,{boxes:s,scores:r}=n,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=i,c=e.readSync(s.dataId),u=e.readSync(r.dataId),{selectedIndices:d}=YAt(c,u,o,a,l);return e.makeTensorInfo([d.length],"int32",new Int32Array(d))}},JAt=X7,tOt={kernelName:jV,backendName:"webgl",kernelFunc:function eOt(t){Lc("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:n,backend:e,attrs:i}=t,{boxes:s,scores:r}=n,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=i,u=e.readSync(s.dataId),d=e.readSync(r.dataId),{selectedIndices:h,validOutputs:f}=JAt(u,d,o,a,l,c);return[e.makeTensorInfo([h.length],"int32",new Int32Array(h)),e.makeTensorInfo([],"int32",new Int32Array([f]))]}},nOt=Y7,sOt={kernelName:HV,backendName:"webgl",kernelFunc:function iOt(t){Lc("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:n,backend:e,attrs:i}=t,{boxes:s,scores:r}=n,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=i,u=e.readSync(s.dataId),d=e.readSync(r.dataId),h=o,f=a,p=l,g=c,{selectedIndices:v,selectedScores:y}=nOt(u,d,h,f,p,g);return[e.makeTensorInfo([v.length],"int32",new Int32Array(v)),e.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};class rOt{constructor(n,e,i,s){this.variableNames=["indices"],this.outputShape=[n,e],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${s}), float(${i}),\n                      float(index == coords.y)));\n      }\n    `}}const oOt={kernelName:CO,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e,attrs:i}=t,{indices:s}=n,{dtype:r,depth:o,onValue:a,offValue:l}=i,c=at(s.shape),u=new rOt(c,o,a,l),d=qt({inputs:{x:s},backend:e,attrs:{shape:[c]}}),h=e.runWebGLProgram(u,[d],r);e.disposeIntermediateTensorInfo(d);const p=qt({inputs:{x:h},backend:e,attrs:{shape:[...s.shape,o]}});return e.disposeIntermediateTensorInfo(h),p}};function RR(t){const{inputs:n,backend:e}=t,{x:i}=n;if("complex64"===i.dtype){const s=WE({inputs:{input:i},backend:e}),r=RR({inputs:{x:s},backend:e}),o=AR({inputs:{input:i},backend:e}),a=RR({inputs:{x:o},backend:e}),l=xm({inputs:{real:r,imag:a},backend:e});return e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(a),l}return KE({attrs:{shape:i.shape,dtype:i.dtype,value:"string"===i.dtype?"":0},backend:e})}const aOt={kernelName:zO,backendName:"webgl",kernelFunc:RR},lOt={kernelName:SO,backendName:"webgl",kernelFunc:function Dye(t){const{inputs:n,backend:e}=t,{x:i}=n;if("string"===i.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===i.dtype){const s=WE({inputs:{input:i},backend:e}),r=Dye({inputs:{x:s},backend:e}),o=AR({inputs:{input:i},backend:e}),a=RR({inputs:{x:o},backend:e}),l=xm({inputs:{real:r,imag:a},backend:e});return e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(a),l}return KE({attrs:{shape:i.shape,dtype:i.dtype,value:1},backend:e})}},uOt={kernelName:xO,backendName:"webgl",kernelFunc:function cOt(t){const{inputs:n,backend:e,attrs:i}=t,{axis:s}=i;if(1===n.length)return sG({inputs:{input:n[0]},backend:e,attrs:{dim:s}});const r=n[0].shape,o=n[0].dtype;n.forEach(u=>{tc(r,u.shape,"All tensors passed to stack must have matching shapes"),le(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],c=aye({inputs:n.map(u=>{const d=sG({inputs:{input:u},backend:e,attrs:{dim:s}});return a.push(d),d}),backend:e,attrs:{axis:s}});return a.forEach(u=>e.disposeIntermediateTensorInfo(u)),c}};class dOt{constructor(n,e,i){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((c,u)=>c[0]+n[u]+c[1]);const s=n.length,r=Ks(s),o=e.map(c=>c[0]).join(","),a=e.map((c,u)=>c[0]+n[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);this.userCode=1!==s?`\n      ${r} start = ${r}(${o});\n      ${r} end = ${r}(${a});\n\n      void main() {\n        ${r} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${r} coords = outC - start;\n          setOutput(getX(${l}));\n        }\n      }\n    `:`\n        int start = ${o};\n        int end = ${a};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}class hOt{constructor(n,e,i){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((g,v)=>g[0]+n[v]+g[1]);const s=n.length,r=Ks(s),o=e.map(g=>g[0]).join(","),a=e.map((g,v)=>g[0]+n[v]).join(","),l=tl("rc",s),c=tl("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,d=1===s?"source":`vec2(${c.slice(-2).join()})`,h=[`${r} rc = outputLoc;`,`${l[s-1]} += 1;\n       if(${u}) {\n      `,1===s?"":`}\n       rc = outputLoc;\n       ${l[s-2]} += 1;\n       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,1===s?"":`  ${l[s-1]} += 1;\n         if(${u}) {`],f=1===s?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let g=0,v=1===s?2:4;g<v;g++)p+=`\n        ${h[g]}\n        if (${f}) {\n          result[${g}] = float(value);\n        } else {\n          ${r} source = rc - start;\n          result[${g}] = getChannel(getX(${c.join()}), ${d});\n        }\n      `;p+=1===s?"} ":"}}",this.userCode=`\n      const ${r} start = ${r}(${o});\n      const ${r} end = ${r}(${a});\n\n      void main() {\n        ${r} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}}const Mye=t=>{const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{paddings:r,constantValue:o}=i;if(0===at(s.shape))return KE({backend:e,attrs:{shape:r.map((u,d)=>u[0]+s.shape[d]+u[1]),value:o,dtype:s.dtype}});const a=nt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new hOt(s.shape,r,o):new dOt(s.shape,r,o);return e.runWebGLProgram(a,[s],s.dtype,[[o]])},fOt={kernelName:EO,backendName:"webgl",kernelFunc:Mye},_Ot=Sa({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+ib+"\n  return result;\n"}),gOt={kernelName:Px,backendName:"webgl",kernelFunc:_Ot},vOt={kernelName:IO,backendName:"webgl",kernelFunc:function bOt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i,a=s.shape.length,l=[],c=$i(r,s.shape);let u=c;const d=Nr(u,a);let f,h=s;if(null!=d&&(h=nl({inputs:{x:s},backend:e,attrs:{perm:d}}),u=Zr(u.length,a),l.push(h)),ya("prod",u,a),e.shouldExecuteOnCPU([h])){const p=e.texData.get(h.dataId).values,{outVals:g,outShape:v,outDtype:y}=XTt(h.shape,h.dtype,p,u);f=e.makeTensorInfo(v,y,g)}else{const[p,g]=ea(h.shape,u),v=at(g),y=qt({inputs:{x:h},backend:e,attrs:{shape:[-1,v]}}),E=sb(y,Sz(s.dtype),"prod",e);f=qt({inputs:{x:E},backend:e,attrs:{shape:p}}),l.push(y),l.push(E)}if(o){l.push(f);const p=Yr(f.shape,c);f=qt({inputs:{x:f},backend:e,attrs:{shape:p}})}return l.forEach(p=>e.disposeIntermediateTensorInfo(p)),f}},wOt={kernelName:WV,backendName:"webgl",kernelFunc:function yOt(t){const{inputs:n,backend:e,attrs:i}=t,{paramsNestedSplits:s,paramsDenseValues:r,indices:o}=n,{outputRaggedRank:a}=i,l=s.map(y=>e.readSync(y.dataId)),c=s.map(y=>y.shape),u=e.readSync(r.dataId),d=e.readSync(o.dataId),[h,f,p]=YTt(l,c,u,r.shape,r.dtype,d,o.shape,a),g=h.map(y=>e.makeTensorInfo([y.length],"int32",y)),v=e.makeTensorInfo(p,r.dtype,f);return g.concat([v])}},COt={kernelName:qV,backendName:"webgl",kernelFunc:function SOt(t){const{inputs:n,backend:e}=t,{starts:i,limits:s,deltas:r}=n,o=e.readSync(i.dataId),a=e.readSync(s.dataId),l=e.readSync(r.dataId),[c,u]=ZTt(o,i.shape,i.dtype,a,s.shape,l,r.shape);return[e.makeTensorInfo([c.length],"int32",c),e.makeTensorInfo([u.length],i.dtype,u)]}},EOt={kernelName:KV,backendName:"webgl",kernelFunc:function xOt(t){const{inputs:n,backend:e,attrs:i}=t,{shape:s,values:r,defaultValue:o,rowPartitionTensors:a}=n,{rowPartitionTypes:l}=i,c=e.readSync(s.dataId),u=e.readSync(r.dataId),d=e.readSync(o.dataId),h=a.map(v=>e.readSync(v.dataId)),f=a.map(v=>v.shape),[p,g]=QTt(c,s.shape,u,r.shape,r.dtype,d,o.shape,h,f,l);return e.makeTensorInfo(p,r.dtype,g)}},Aye=t=>{const{backend:n,attrs:e}=t,{start:i,stop:s,step:r,dtype:o}=e,a=JTt(i,s,r,o);return n.makeTensorInfo([a.length],o,a)},TOt={kernelName:XV,backendName:"webgl",kernelFunc:Aye},IOt=as({opSnippet:"return 1.0 / x;"}),kOt={kernelName:$x,backendName:"webgl",kernelFunc:IOt},MOt=as({opSnippet:Hc+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),AOt={kernelName:Bx,backendName:"webgl",kernelFunc:MOt},NOt=as({opSnippet:Hc+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),ROt={kernelName:Vx,backendName:"webgl",kernelFunc:NOt};class FOt{constructor(n,e,i,s,r){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=n;this.outputShape=[o,e,i,c];const u=[s&&e>1?a-1:a,s&&i>1?l-1:l],d=[s&&e>1?e-1:e,s&&i>1?i-1:i];let h;h=r?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/d[0]},\n          ${u[1]/d[1]});\n      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${h};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}class LOt{constructor(n,e,i,s,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=n;this.outputShape=[o,e,i,c];const u=[s&&e>1?a-1:a,s&&i>1?l-1:l],d=[s&&e>1?e-1:e,s&&i>1?i-1:i];let h;h=r?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/d[0]},\n          ${u[1]/d[1]},\n          ${u[1]/d[1]});\n      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,\n                                     ${l}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${h};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${c-1};\n        bool hasNextRow = coords.z < ${i-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}const $Ot={kernelName:MO,backendName:"webgl",kernelFunc:function POt(t){const{inputs:n,backend:e,attrs:i}=t,{images:s}=n,{alignCorners:r,halfPixelCenters:o,size:a}=i,[l,c]=a,u=nt().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new LOt(s.shape,l,c,r,o):new FOt(s.shape,l,c,r,o);return e.runWebGLProgram(u,[s],"float32")}};class BOt{constructor(n,e,i){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;const[,s,r]=e,[,o,a]=n,l=[i&&o>1?s-1:s,i&&a>1?r-1:r],c=[i&&o>1?o-1:o,i&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],h=1/u,f=1/d,p=2*Math.ceil(h)+2,g=2*Math.ceil(f)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${d});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${f});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${g});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${a}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${r-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const zOt={kernelName:QV,backendName:"webgl",kernelFunc:function VOt(t){const{inputs:n,backend:e,attrs:i}=t,{images:s,dy:r}=n,{alignCorners:o}=i,a=new BOt(r.shape,s.shape,o);return e.runWebGLProgram(a,[r],r.dtype)}};class UOt{constructor(n,e,i,s,r){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=n;this.outputShape=[o,e,i,c];const u=[s&&e>1?a-1:a,s&&i>1?l-1:l],d=[s&&e>1?e-1:e,s&&i>1?i-1:i];let f;f=r?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/d[0]},\n          ${u[1]/d[1]});\n      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${f};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${s?"0.5":"0.0"})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}class GOt{constructor(n,e,i,s,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=n;this.outputShape=[o,e,i,c];const u=[s&&e>1?a-1:a,s&&i>1?l-1:l],d=[s&&e>1?e-1:e,s&&i>1?i-1:i];let f;f=r?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/d[0]},\n          ${u[1]/d[1]},\n          ${u[1]/d[1]});\n      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,\n                                     ${l}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${f};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${s?"0.5":"0.0"})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${c-1};\n        bool hasNextRow = coords.z < ${i-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}const HOt={kernelName:DO,backendName:"webgl",kernelFunc:function jOt(t){const{inputs:n,backend:e,attrs:i}=t,{images:s}=n,{alignCorners:r,halfPixelCenters:o,size:a}=i,[l,c]=a,u=nt().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new GOt(s.shape,l,c,r,o):new UOt(s.shape,l,c,r,o);return e.runWebGLProgram(u,[s],s.dtype)}};class WOt{constructor(n,e,i){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;const[,s,r]=e,[,o,a]=n,l=[i&&o>1?s-1:s,i&&a>1?r-1:r],c=[i&&o>1?o-1:o,i&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],h=1/u,f=1/d,p=2*Math.ceil(h)+2,g=2*Math.ceil(f)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${d});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${f});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${g});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${a}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${l[0]}) *\n                (float(dyR) / float(${c[0]}));\n\n            float sourceFracCol =\n                float(${l[1]}) *\n                  (float(dyC) / float(${c[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${s}) - 1),\n                ${i} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${r}) - 1),\n                ${i} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const KOt={kernelName:ZV,backendName:"webgl",kernelFunc:function qOt(t){const{inputs:n,backend:e,attrs:i}=t,{images:s,dy:r}=n,{alignCorners:o}=i,a=new WOt(r.shape,s.shape,o);return e.runWebGLProgram(a,[r],r.dtype)}};class XOt{constructor(n,e){this.variableNames=["x"];const i=n.length;if(i>4)throw new Error(`WebGL backend: Reverse of rank-${i} tensor is not yet supported`);if(this.outputShape=n,1===i)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${n[0]} - coord - 1));\n        }\n      `);const r=n.map((a,l)=>(a=>-1!==e.indexOf(a)&&1!==n[a]?`${n[a]} - coords[${a}] - 1`:`coords[${a}]`)(l)).join(","),o=Ks(i);this.userCode=`\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${r}));\n      }\n    `}}class YOt{constructor(n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const i=n.length;if(i>4)throw new Error(`WebGL backend: Reverse of rank-${i} tensor is not yet supported`);this.outputShape=n;const s=tl("rc",i),r=`${s[i-1]} + 1 < ${this.outputShape[i-1]}`,o=`${s[i-2]} + 1 < ${this.outputShape[i-2]}`,a=Ks(i);function h(p){const g=n.map((w,E)=>function f(p,g){return-1!==e.indexOf(p)&&1!==n[p]?`${n[p]} - ${g[p]} - 1`:`${g[p]}`}(E,p));return`getChannel(getX(${g.join(",")}), vec2(${g.slice(-2).join(",")}))`}this.userCode=1===i?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${n[0]} - rc - 1),\n            ${n[0]} - rc - 1);\n          if(${r}){\n              result.g = getChannel(getX(${n[0]} - (rc  + 1) - 1),\n                ${n[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${a} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function l(p){return h(p)}(s.slice())};\n          if(${r}){\n            result.g = ${function c(p){return p[i-1]="("+p[i-1]+" + 1)",h(p)}(s.slice())};\n          }\n          if(${o}) {\n            result.b = ${function u(p){return p[i-2]="("+p[i-2]+" + 1)",h(p)}(s.slice())};\n            if(${r}) {\n              result.a = ${function d(p){return p[i-1]="("+p[i-1]+" + 1)",p[i-2]="("+p[i-2]+" + 1)",h(p)}(s.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}const QOt={kernelName:AO,backendName:"webgl",kernelFunc:function ZOt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{dims:r}=i,o=s.shape.length,a=$i(r,s.shape);if(0===o)return dc({inputs:{x:s},backend:e});const l=nt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new YOt(s.shape,a):new XOt(s.shape,a);return e.runWebGLProgram(l,[s],s.dtype)}};class JOt{constructor(n,e){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const i=n[1],s=n[2];this.outputShape=n;let r="";r="number"==typeof e?`float outputValue = ${e.toFixed(2)};`:`\n        vec3 fill = vec3(${e.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${r}\n          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${i}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const eNt={kernelName:_z,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{const{image:i}=t,{radians:s,fillValue:r,center:o}=n,a=e,l=new JOt(i.shape,r),[c,u]=i9(o,i.shape[1],i.shape[2]),d=[[c,u,Math.sin(s),Math.cos(s)]];return a.runWebGLProgram(l,[i],i.dtype,d)}},tNt=as({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),nNt={kernelName:zx,backendName:"webgl",kernelFunc:tNt},iNt=as({opSnippet:"return inversesqrt(x);",cpuKernelImpl:e2t}),sNt={kernelName:Ux,backendName:"webgl",kernelFunc:iNt};class oG{constructor(n,e,i,s,r,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const c=Ks(r.length),u=Ks(o.length);let d="";1===i?d="i":2===i&&(d="i, j");let f="";1===s?f="i":2===s&&(f="i, coords[1]");let g="";l&&(g="coords[0], coords[1]"),this.userCode=`\n        ${c} strides = ${c}(${r});\n\n        void main() {\n          ${u} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${n}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${e}; j++) {\n              int index = round(getIndices(${d}));\n              flattenedIndex += index * ${e>1?"strides[j]":"strides"};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += getUpdates(${f});\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(${g}), sum, float(found)));\n        }\n      `}}class rNt{constructor(n,e,i,s,r,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const c=Ks(r.length),u=Ks(o.length);let d="";1===i?d="i":2===i&&(d="i, j");let f="";1===s?f="i":2===s&&(f="i, coords[1]");let g="";l&&(g="coords[0], coords[1]"),this.userCode=`\n        ${c} strides = ${c}(${r});\n\n        void main() {\n          ${u} coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ${n}; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ${e}; j+=2) {\n              ivec4 index = round(getIndices(${d}));\n              flattenedIndex += index.xz * ${e>1?"strides[j]":"strides"};\n              if (j + 1 < ${e}) {\n                flattenedIndex += index.yw * ${e>1?"strides[j + 1]":"strides"};\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = getUpdates(${f});\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(getDefaultValue(${g}), sum, found));\n        }\n      `}}const aNt={kernelName:JV,backendName:"webgl",kernelFunc:function oNt(t){const{inputs:n,backend:e,attrs:i}=t,{indices:s,updates:r}=n,{shape:o}=i,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Ug(0,s,o),h=[d/c,c];if(0===d)return e.makeTensorInfo(o,s.dtype);const f=qt({inputs:{x:s},backend:e,attrs:{shape:[l,a]}}),p=qt({inputs:{x:r},backend:e,attrs:{shape:[l,c]}}),g=e.makeTensorInfo([],"float32",new Float32Array([0]));let v;v=nt().getBool("WEBGL_PACK")?new rNt(l,a,f.shape.length,p.shape.length,u,h):new oG(l,a,f.shape.length,p.shape.length,u,h);const y=e.runWebGLProgram(v,[p,f,g],p.dtype),w=qt({inputs:{x:y},backend:e,attrs:{shape:o}});return e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(g),w}};class lNt{constructor(n,e,i,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[n,i];const o=`for (int i = 0; i < ${Math.ceil(Math.log2(e+1))}; ++i) { if (left >= right) break;`,a=2===nt().getNumber("WEBGL_VERSION")?"while (left < right) {":o;this.userCode=`\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ${a}\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ${"left"===s?"<":"<="} value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     `}}const uNt={kernelName:tz,backendName:"webgl",kernelFunc:function cNt(t){const{inputs:n,backend:e,attrs:i}=t,{sortedSequence:s,values:r}=n,{side:o}=i,a=new lNt(s.shape[0],s.shape[1],r.shape[1],o);return e.runWebGLProgram(a,[s,r],"int32",[[s.shape[1]]])}};class dNt{constructor(n,e,i){let s,r;if(this.variableNames=["c","a","b"],this.outputShape=e,i>4)throw Error(`Where for rank ${i} is not yet supported`);if(1===i)r="resRC",s="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<e.length;u++)c.push(`${a[u]}`),u<n&&l.push(`${a[u]}`);s=l.join(),r=c.join()}const o=Ks(i);this.userCode=`\n      void main() {\n        ${o} resRC = getOutputCoords();\n        float cVal = getC(${s});\n        if (cVal >= 1.0) {\n          setOutput(getA(${r}));\n        } else {\n          setOutput(getB(${r}));\n        }\n      }\n    `}}const fNt={kernelName:OO,backendName:"webgl",kernelFunc:function hNt(t){const{inputs:n,backend:e}=t,{condition:i,t:s,e:r}=n,o=new dNt(i.shape.length,s.shape,s.shape.length);return e.runWebGLProgram(o,[i,s,r],nc(s.dtype,r.dtype))}},mNt=as({opSnippet:`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${TN};\n  float scale = ${IN};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`}),_Nt={kernelName:Gx,backendName:"webgl",kernelFunc:mNt},bNt=as({opSnippet:X1+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:n2t}),vNt={kernelName:qx,backendName:"webgl",kernelFunc:bNt},yNt=as({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),wNt={kernelName:Wx,backendName:"webgl",kernelFunc:yNt},xNt=as({opSnippet:X1+"\n  return sin(x);\n",packedOpSnippet:`\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ${ib}\n  return result;\n`}),ENt={kernelName:jx,backendName:"webgl",kernelFunc:xNt},TNt=as({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),INt={kernelName:Hx,backendName:"webgl",kernelFunc:TNt},kNt=as({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),DNt={kernelName:Kx,backendName:"webgl",kernelFunc:kNt},MNt={kernelName:FO,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{blockShape:r,paddings:o}=i;le(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce((y,w)=>y*w),l=[[0,0]];l.push(...o);for(let y=1+r.length;y<s.shape.length;++y)l.push([0,0]);const c=[],u=Mye({inputs:{x:s},backend:e,attrs:{paddings:l,constantValue:0}}),d=wE(u.shape,r,a,!1),h=SE(d.length,r.length,!1),f=CE(u.shape,r,a,!1),p=qt({inputs:{x:u},backend:e,attrs:{shape:d}}),g=nl({inputs:{x:p},backend:e,attrs:{perm:h}}),v=qt({inputs:{x:g},backend:e,attrs:{shape:f}});return c.push(u),c.push(p),c.push(g),c.forEach(y=>e.disposeIntermediateTensorInfo(y)),v}},ONt={kernelName:nz,backendName:"webgl",kernelFunc:function ANt(t){const{inputs:n,backend:e}=t,{indices:i,values:s,denseShape:r,defaultValue:o}=n;if(1!==r.shape.length)throw new Error(`Dense shape must be a vector, saw:\n         ${r.shape}`);if(2!==i.shape.length)throw new Error(`Indices must be a matrix, saw:\n         ${i.shape}`);if(1!==s.shape.length)throw new Error(`Values must be a vector, saw:\n         ${s.shape}`);if(0!==o.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${o.shape}`);const a=e.readSync(i.dataId),l=e.readSync(s.dataId),c=e.readSync(r.dataId),u=e.readSync(o.dataId)[0],[d,h,f,p,g]=s2t(a,i.shape,i.dtype,l,s.dtype,c,u);return[e.makeTensorInfo(h,i.dtype,d),e.makeTensorInfo([h[0]],s.dtype,f),e.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(v=>Number(v)))),e.makeTensorInfo([g.length],i.dtype,new Int32Array(g))]}},RNt={kernelName:iz,backendName:"webgl",kernelFunc:function NNt(t){const{inputs:n,backend:e}=t,{inputIndices:i,inputShape:s,newShape:r}=n;if(2!==i.shape.length)throw new Error(`Input indices should be a matrix but received shape ${i.shape}`);if(1!==s.shape.length)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(1!==r.shape.length)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const o=Array.from(e.readSync(s.dataId)),a=e.readSync(i.dataId),l=Array.from(e.readSync(r.dataId)),[c,u,d]=r2t(a,i.shape,i.dtype,o,l);return[e.makeTensorInfo(u,i.dtype,c),e.makeTensorInfo([d.length],r.dtype,new Int32Array(d))]}},LNt={kernelName:sz,backendName:"webgl",kernelFunc:function FNt(t){const{inputs:n,backend:e}=t,{data:i,indices:s,segmentIds:r}=n;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.shape.length)throw new Error(`Indices should be a vector but received shape\n              ${s.shape}`);if(1!==r.shape.length)throw new Error(`Segment ids should be a vector but received shape\n              ${r.shape}`);const o=e.readSync(i.dataId),a=e.readSync(s.dataId),l=e.readSync(r.dataId),[c,u]=Lve(o,i.shape,i.dtype,a,l,!0);return e.makeTensorInfo(u,i.dtype,c)}},$Nt={kernelName:rz,backendName:"webgl",kernelFunc:function PNt(t){const{inputs:n,backend:e}=t,{data:i,indices:s,segmentIds:r}=n;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.shape.length)throw new Error(`Indices should be a vector but received shape\n             ${s.shape}`);if(1!==r.shape.length)throw new Error(`Segment ids should be a vector but received shape\n             ${r.shape}`);const o=e.readSync(i.dataId),a=e.readSync(s.dataId),l=e.readSync(r.dataId),[c,u]=Lve(o,i.shape,i.dtype,a,l);return e.makeTensorInfo(u,i.dtype,c)}},VNt={kernelName:oz,backendName:"webgl",kernelFunc:function BNt(t){const{inputs:n,backend:e,attrs:i}=t,{sparseIndices:s,sparseValues:r,defaultValue:o}=n,{outputShape:a}=i,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=Ug(0,s,a),f=!1;if("string"===r.dtype){const y=e.bufferSync(s),w=e.bufferSync(r),E=Zp(e.readSync(o.dataId)[0]),T=t2t(y,w,a,h,u,c,l,d,E,f);return e.makeTensorInfo(a,T.dtype,T.values)}const p=new oG(c,l,s.shape.length,r.shape.length,d,[h,1],f),g=e.runWebGLProgram(p,[r,s,o],r.dtype),v=qt({inputs:{x:g},backend:e,attrs:{shape:a}});return e.disposeIntermediateTensorInfo(g),v}},UNt={kernelName:LO,backendName:"webgl",kernelFunc:function zNt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{numOrSizeSplits:r,axis:o}=i,a=$i(o,s.shape)[0],l=y9(s,r,a),u=new Array(s.shape.length).fill(0),d=s.shape.slice();return l.map(h=>{const f=[...d];f[a]=h;const p=Y1({inputs:{x:s},backend:e,attrs:{begin:u,size:f}});return u[a]+=h,p})}},Oye="return sqrt(x);",GNt=as({opSnippet:Oye,packedOpSnippet:Oye,cpuKernelImpl:o2t}),jNt={kernelName:Xx,backendName:"webgl",kernelFunc:GNt},WNt={kernelName:az,backendName:"webgl",kernelFunc:as({opSnippet:"return x * x;"})},Nye="return (a - b) * (a - b);",qNt=Sa({opSnippet:Nye,packedOpSnippet:Nye}),KNt={kernelName:Yx,backendName:"webgl",kernelFunc:qNt},YNt={kernelName:$O,backendName:"webgl",kernelFunc:function XNt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n;if("string"!==s.dtype)throw new Error("Input must be of datatype string");const o=Of(e.readSync(s.dataId)),a=a2t(o,"string",i);return e.makeTensorInfo(s.shape,"string",a)}},QNt={kernelName:tE,backendName:"webgl",kernelFunc:function ZNt({inputs:t,attrs:n,backend:e}){const{x:i}=t,r=new Th(i.shape,Hc+`\n    return x > 0.0 ? 1.0 : float(${n.alpha});\n  `);return e.runWebGLProgram(r,[i],i.dtype)}};class JNt{constructor(n,e,i){this.variableNames=["x"],this.outputShape=i;const s=i.length,r=Ks(i.length),o=Ks(i.length);let a="";if(1===s)a="coords * strides + begin";else{let l=0;a=i.map((c,u)=>(l++,1===i.length?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`\n      ${r} begin = ${r}(${n});\n      ${r} strides = ${r}(${e});\n\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${a}));\n      }\n    `}}const tRt={kernelName:lz,backendName:"webgl",kernelFunc:function eRt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{begin:r,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=i,{finalShapeSparse:f,finalShape:p,isIdentity:g,sliceDim0:v,isSimpleSlice:y,begin:w,end:E,strides:T}=a7(s.shape,r,o,a,l,c,u,d,h);let L;if(g)L=qt({inputs:{x:s},backend:e,attrs:{shape:p}});else if(v||y){le(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const H=s7(w,E,T),P=Y1({inputs:{x:s},backend:e,attrs:{begin:w,size:H}});L=qt({inputs:{x:P},backend:e,attrs:{shape:p}}),e.disposeIntermediateTensorInfo(P)}else if(e.shouldExecuteOnCPU([s])){const P=e.readSync(s.dataId),X=xi(s.shape,s.dtype,P),ne=l2t(f,X,T,w);L=e.makeTensorInfo(p,s.dtype,ne.values)}else{const P=new JNt(w,T,f);L=e.runWebGLProgram(P,[s],s.dtype)}const W=qt({inputs:{x:L},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(L),W}},iRt={kernelName:cz,backendName:"webgl",kernelFunc:function nRt(t){const{inputs:n,backend:e,attrs:i}=t,{separator:s,nGramWidths:r,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=i,{data:u,dataSplits:d}=n,h=e.readSync(u.dataId),f=e.readSync(d.dataId),[p,g]=c2t(h,f,s,r,o,a,l,c);return[e.makeTensorInfo([p.length],"string",p),e.makeTensorInfo(d.shape,"int32",g)]}},rRt={kernelName:uz,backendName:"webgl",kernelFunc:function sRt(t){const{inputs:n,backend:e,attrs:i}=t,{skipEmpty:s}=i,{input:r,delimiter:o}=n;if("string"!==r.dtype)throw new Error("Input must be of datatype string");if(1!==r.shape.length)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(0!==o.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=e.readSync(r.dataId),l=e.readSync(o.dataId)[0],[c,u,d]=u2t(a,l,s),h=u.length;return[e.makeTensorInfo([h,2],"int32",c),e.makeTensorInfo([h],"string",u),e.makeTensorInfo([2],"int32",new Int32Array(d))]}},aRt={kernelName:dz,backendName:"webgl",kernelFunc:function oRt(t){const{inputs:n,backend:e,attrs:i}=t,{numBuckets:s}=i,{input:r}=n;if("string"!==r.dtype)throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=e.readSync(r.dataId),a=d2t(o,s);return e.makeTensorInfo(r.shape,"int32",a)}},lRt=as({opSnippet:"return tan(x);"}),cRt={kernelName:Qx,backendName:"webgl",kernelFunc:lRt},uRt=as({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),dRt={kernelName:Jx,backendName:"webgl",kernelFunc:uRt},fRt={kernelName:ez,backendName:"webgl",kernelFunc:function hRt(t){const{inputs:n,backend:e}=t,{tensor:s,indices:r,updates:o}=n,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Ug(0,r,s.shape),h=[d/c,c];if(0===d)return e.makeTensorInfo(s.shape,r.dtype);const f=qt({inputs:{x:r},backend:e,attrs:{shape:[l,a]}}),p=qt({inputs:{x:o},backend:e,attrs:{shape:[l,c]}}),g=qt({inputs:{x:s},backend:e,attrs:{shape:h}}),v=new oG(l,a,f.shape.length,p.shape.length,u,h,!1,!0),y=e.runWebGLProgram(v,[p,f,g],g.dtype),w=qt({inputs:{x:y},backend:e,attrs:{shape:s.shape}});return e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(y),w}};class pRt{constructor(n,e){this.variableNames=["A"];const i=new Array(n.length);for(let o=0;o<i.length;o++)i[o]=n[o]*e[o];this.outputShape=i,this.rank=i.length;const s=Ks(this.rank),r=function mRt(t){const n=t.length;if(n>5)throw Error(`Tile for rank ${n} is not yet supported`);if(1===n)return`imod(resRC, ${t[0]})`;const e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],i=[];for(let s=0;s<t.length;s++)i.push(`imod(${e[s]}, ${t[s]})`);return i.join()}(n);this.userCode=`\n      void main() {\n        ${s} resRC = getOutputCoords();\n        setOutput(getA(${r}));\n      }\n    `}}function Rye(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{reps:r}=i;if("string"===s.dtype||s.shape.length>5){const l=e.readSync(s.dataId),c="string"===s.dtype?l.map(h=>Zp(h)):l,u=xi(s.shape,s.dtype,c),d=f2t(u,r);return e.makeTensorInfo(d.shape,d.dtype,d.values)}const o=new pRt(s.shape,r);return e.runWebGLProgram(o,[s],s.dtype)}const _Rt={kernelName:eE,backendName:"webgl",kernelFunc:Rye};class gRt{constructor(n){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=n,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class bRt{constructor(n){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=n,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function rb(t,n){null!==n&&t.disposeIntermediateTensorInfo(n)}function Fye(t){let n=1;for(;n<t;)n*=2;return n}const yRt={kernelName:hz,backendName:"webgl",kernelFunc:function vRt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{k:r,sorted:o}=i,a=nt().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=nt().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=s.shape,u=c[c.length-1];if(e.shouldExecuteOnCPU([s])||u<a||r>l){const ne=e.readSync(s.dataId),[me,Ee]=p2t(ne,c,s.dtype,r,o);return[e.makeTensorInfo(me.shape,me.dtype,me.values),e.makeTensorInfo(Ee.shape,Ee.dtype,Ee.values)]}if(0===r)return c[c.length-1]=0,[e.makeTensorInfo(c,s.dtype,[]),e.makeTensorInfo(c,"int32",[])];if(1===u)return[s,KE({attrs:{shape:c,dtype:"int32",value:0},backend:e})];const d=e.texData.get(s.dataId),h=null!==d&&d.isPacked,f=h?e.unpackTensor(s):s,g=at(c)/u,v=qt({inputs:{x:f},attrs:{shape:[g,u]},backend:e});h&&rb(e,f);const y=Fye(r),w=Fye(u);let E=null;const T=()=>null===E?[v,v]:[v,E],L=(ne,me,Ee)=>{const Te=T(),$e=new gRt(Ee),Fe=E;E=e.runWebGLProgram($e,Te,"int32",[[u],[null===E?1:0],[Number.NEGATIVE_INFINITY],[ne],[me]]),rb(e,Fe)};for(let ne=1;ne<y;ne*=2){const me=2*ne;for(let Ee=ne;Ee>=1;Ee/=2)L(me,Ee,[g,w])}for(let ne=w;ne>y;ne/=2){const me=T(),Ee=new bRt([g,ne/2]),Xe=E;E=e.runWebGLProgram(Ee,me,"int32",[[u],[null===E?1:0],[y]]),rb(e,Xe);const Ce=y/2,Fe=2*Ce;for(let Ie=Ce;Ie>=1;Ie/=2)L(Fe,Ie,E.shape)}let W=E;E=Y1({inputs:{x:E},backend:e,attrs:{begin:0,size:[g,r]}}),rb(e,W);let H=Cye({inputs:{x:v,indices:E},backend:e,attrs:{axis:1,batchDims:1}});rb(e,v);const P=c.slice(0,-1);P.push(r),W=E,E=qt({inputs:{x:E},attrs:{shape:P},backend:e}),rb(e,W);const X=H;return H=qt({inputs:{x:H},attrs:{shape:P},backend:e}),rb(e,X),[H,E]}};class wRt{constructor(n,e,i,s,r,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a="nearest"===i?1:2;let l;switch(s){case"constant":default:l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${l} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${l} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${l} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${n} && 0 <= coordX && coordX < ${e}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${r});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${r});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${e}));\n                float mapY = mapCoord(inY, float(${n}));\n\n                if (${a} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}const CRt={kernelName:fz,backendName:"webgl",kernelFunc:function SRt(t){const{inputs:n,backend:e,attrs:i}=t,{image:s,transforms:r}=n,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=i,[u,d,h,f]=s.shape,[p,g]=c??[d,h],y=new wRt(d,h,o,a,l,[u,p,g,f]);return e.runWebGLProgram(y,[s,r],"float32")}},ERt={kernelName:pz,backendName:"webgl",kernelFunc:function xRt(t){const{inputs:n,attrs:e,backend:i}=t,{axis:s}=e,{x:r}=n;UE(r,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=i.readSync(r.dataId),{outputValues:a,outputShape:l,indices:c}=m2t(o,s,r.shape,r.dtype);return[i.makeTensorInfo(l,r.dtype,a),i.makeTensorInfo([c.length],"int32",c)]}},IRt={kernelName:BO,backendName:"webgl",kernelFunc:function TRt(t){const{inputs:n,backend:e,attrs:i}=t,{value:s}=n;let{axis:r}=i;r<0&&(r+=s.shape.length);const o=s,a=o.shape.length,l=s.shape[r],c=new Array(a-1);let u=0;for(let g=0;g<a;g++)g!==r&&(c[u++]=o.shape[g]);const d=[],h=new Array(a).fill(0),f=o.shape.slice();f[r]=1;const p=new Array(l);for(let g=0;g<p.length;g++){h[r]=g;const v=Y1({inputs:{x:o},backend:e,attrs:{begin:h,size:f}}),y=qt({inputs:{x:v},backend:e,attrs:{shape:c}});p[g]=y,d.push(v)}return d.forEach(g=>e.disposeIntermediateTensorInfo(g)),p}};class kRt{constructor(n,e){this.variableNames=["x","segmentIds"];const i=n.windowSize,s=n.batchSize,r=n.inSize,o=n.numSegments,a=o*Math.ceil(r/i);this.outputShape=[s,a];const u=4*Math.floor(i/4),d=i%4,h="\n        sumValue += dot(values, segFilter);\n    ";let f="";r%i>0&&(f=`\n        if (inIdx < 0 || inIdx >= ${r}) {\n          return initializationValue;\n        }\n      `);let p="";r%i>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${r}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${f}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${p}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${o})) * float(${i}));\n        int currentSeg = int(mod(float(outIdx), float(${o})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${h}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===d}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${h}\n        } else if (${2===d}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${h}\n        } else if (${3===d}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${h}\n        }\n        setOutput(sumValue);\n      }\n    `}}const MRt={kernelName:VO,backendName:"webgl",kernelFunc:function DRt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,segmentIds:r}=n,{numSegments:o}=i,a=s.shape.length,l=[];let c=0;const u=Nr([c],a);let d=s;null!=u&&(d=nl({inputs:{x:s},backend:e,attrs:{perm:u}}),l.push(d),c=Zr(1,a)[0]);const h=qme(d.shape,c,o),f=at([d.shape[c]]),p=qt({inputs:{x:d},backend:e,attrs:{shape:[-1,f]}});l.push(p);const g=Sz(s.dtype),v=(T,L,W,H,P)=>{const X=T.shape[0],ne=T.shape[1],me=Wme(ne,P),Te=new kRt({windowSize:me,inSize:ne,batchSize:X,numSegments:P},L),$e=e.compileAndRun(Te,[T,W],H);if(l.push($e),$e.shape[1]===P)return $e;const Xe=Aye({backend:e,attrs:{start:0,stop:P,step:1,dtype:"float32"}}),Ce=Rye({inputs:{x:Xe},backend:e,attrs:{reps:[ne/me]}});return l.push(Xe),l.push(Ce),v($e,L,Ce,H,P)},w=qt({inputs:{x:v(p,"unsortedSegmentSum",r,g,o)},backend:e,attrs:{shape:h}});let E=w;if(null!=u){l.push(w);const T=lm(u);E=nl({inputs:{x:E},backend:e,attrs:{perm:T}})}return l.forEach(T=>e.disposeIntermediateTensorInfo(T)),E}},ARt=[cIt,dIt,pIt,gIt,vIt,SIt,xIt,TIt,MIt,OIt,FIt,$It,zIt,HIt,KIt,YIt,QIt,nkt,skt,okt,ckt,mkt,gkt,wkt,Ckt,kkt,Mkt,Rkt,W2t,Pkt,Ukt,Wkt,Qkt,tDt,iDt,rDt,aDt,dDt,fDt,mDt,gDt,vDt,wDt,xDt,TDt,MDt,ODt,FDt,$Dt,VDt,UDt,HDt,qDt,YDt,QDt,JDt,tMt,iMt,rMt,aMt,cMt,dMt,pMt,gMt,vMt,SMt,EMt,IMt,DMt,H2t,AMt,Vkt,NMt,FMt,PMt,K2t,BMt,zMt,GMt,WMt,XMt,ZMt,JMt,tAt,sAt,oAt,lAt,hAt,pAt,_At,yAt,SAt,xAt,TAt,kAt,OAt,FAt,BAt,HAt,Z2t,XAt,QAt,tOt,sOt,xkt,oOt,lOt,uOt,fOt,gOt,Y2t,vOt,wOt,COt,EOt,TOt,Ekt,zAt,kOt,AOt,ROt,J2t,$Ot,zOt,HOt,KOt,QOt,eNt,nNt,sNt,aNt,uNt,fNt,_Nt,vNt,wNt,ENt,INt,pkt,GAt,DNt,MNt,ONt,RNt,LNt,$Nt,VNt,UNt,jNt,WNt,KNt,YNt,QNt,tRt,iRt,rRt,aRt,UAt,oIt,cRt,dRt,fRt,_Rt,yRt,CRt,aIt,ERt,IRt,MRt,aOt];for(const t of ARt)bz(t);const NRt=["video"],RRt=["canvas"],FRt=["message_element"],LRt=(t,n)=>({name:t,photo:n});function PRt(t,n){1&t&&(m(0,"div",21),C(1," Speech Recognition is not supported "),_())}function $Rt(t,n){1&t&&(m(0,"div",21),C(1," Speech Synthesis is not supported "),_())}function BRt(t,n){if(1&t&&(m(0,"div",19),K(1,PRt,2,0,"div",20)(2,$Rt,2,0,"div",20),_()),2&t){const e=M();b(),S("ngIf",e.error.speech_recognition),b(),S("ngIf",e.error.speech_synthesis)}}function VRt(t,n){1&t&&(m(0,"div",22)(1,"app-icon",23),C(2,"mic"),_()())}function zRt(t,n){1&t&&(m(0,"div",24),be(1,"img",25),m(2,"p",26),C(3),ge(4,"translate"),_()()),2&t&&(b(3),xe(" ",Me(4,1,"PANEL.NO_MESSAGES")," "))}function URt(t,n){if(1&t){const e=Le();m(0,"div",27),ge(1,"async"),te("click",function(){const s=re(e).$implicit,r=M();return oe(r.show_time[s.id]=!r.show_time[s.id])}),be(2,"a-user-avatar",28),m(3,"div",29)(4,"div",30)(5,"div"),C(6),_(),m(7,"div",31),C(8),ge(9,"dateFrom"),_()(),be(10,"div",32),ge(11,"sanitize"),_()()}if(2&t){const e=n.$implicit,i=M();rt("waiting-margin",Me(1,6,i.waiting)),b(2),S("user",function OZ(t,n,e,i,s){return LZ(ft(),al(),t,n,e,i,s)}(12,LRt,e.user_name||"",e.user_id!==i.user.id?"/assets/icons/ai-avatar.jpg":"/assets/icons/user-avatar.jpg")),b(4),xe(" ",e.user_id!==i.user.id?"Assistant":"You"," "),b(2),xe(" ",Me(9,8,e.timestamp+i.offset)," "),b(2),S("innerHTML",Me(11,10,e.content),Zc)}}function GRt(t,n){1&t&&(be(0,"div",41),ge(1,"async"),ge(2,"sanitize")),2&t&&S("innerHTML",Me(2,3,Me(1,1,M(2).progress).content),Zc)}function jRt(t,n){if(1&t){const e=Le();m(0,"div",33)(1,"button",34),te("click",function(){re(e);const s=M();return oe(s.show_info=!s.show_info)}),m(2,"div",35)(3,"app-icon",36),C(4),ge(5,"async"),_(),m(6,"p",37),C(7),ge(8,"async"),ge(9,"async"),_()(),m(10,"div",38),be(11,"div",39),K(12,GRt,3,5,"div",40),_()()()}if(2&t){const e=M();b(4),vt(e.icons[Me(5,3,e.progress).function]||"info"),b(3),xe(" ",Me(8,5,e.progress).message||Me(9,7,e.progress).function," "),b(5),S("ngIf",e.show_info)}}function HRt(t,n){1&t&&(m(0,"div",42),be(1,"div",43)(2,"div",44)(3,"div",45),m(4,"span",46),C(5,"Waiting for reply..."),_()()),2&t&&Wn("bottom","8px")}function WRt(t,n){1&t&&(m(0,"button",47)(1,"h2",48),C(2,"Touch to Start"),_()())}let qRt=(()=>{class t extends bn{get user(){return fn()}constructor(e,i){super(),this._route=e,this._chat=i,this.scale=1,this.current_text="",this.last_text="",this.listening=!1,this.person_in_view=!1,this.debug=!1,this.setup=!1,this.error={},this._time=0,this._last_message="",this._previous_message="",this.icons={list_function_schemas:"help",call_function:"settings",task_complete:"check_circle"},this.messages=this._chat.messages,this.progress=this._chat.progress.pipe(mi(()=>this._scrollToBottom())),this.waiting=this._chat.messages.pipe(ze(s=>0!==s.length&&s[s.length-1]?.user_id===this.user?.id))}ngOnInit(){const e=()=>{this._setupVoiceRecognition(),window.removeEventListener("click",e)};window.addEventListener("click",e),this._context=this._canvas_el.nativeElement.getContext("2d",{willReadFrequently:!0}),this._setupWebcam(),this._chat.startChat(),this.subscription("chat.messages",this._chat.messages.subscribe(i=>{this._scrollToBottom();const s=i.filter(o=>o.user_id!==this.user?.id),r=s[s.length-1];s.length<1||this._last_message===r.id||(this._last_message=r.id,this._speakText(r.message))})),this.interval("process_frame",()=>this._processWebcamFrame(),500),this.subscription("route.query",this._route.queryParamMap.subscribe(i=>{i.has("debug")&&(this.debug="true"===i.get("debug"))}))}startListening(){this.listening||!this.person_in_view||(this._recognition.start(),this.timeout("stop_listening",()=>this.listening=!0,500))}_loadModel(){var e=this;return de(function*(){(function Hot(t){Pe.setBackend(t)})("webgl"),e._model=yield function Evt(t){return EU.apply(this,arguments)}(`${location.origin}${location.pathname}assets/yolov8x_web_model/model.json`)})()}_processWebcamFrame(){var e=this;return de(function*(){e._model||(yield e._loadModel()),et(()=>{const i=e._webcamToTensor(),s=e._model.predict(i),r=e._processPredictions(s,{0:"person"}),o=e.person_in_view;e.person_in_view=!1;for(const{label:l}of r)if("person"===l)return void(e.person_in_view=!0);o!==e.person_in_view&&e._recognition&&(e.person_in_view?(e._recognition.start(),e.timeout("stop_listening",()=>e.listening=!0,500)):(e._recognition.stop(),e.timeout("stop_listening",()=>e.listening=!1,500)))})})()}_webcamToTensor(){this._context.drawImage(this._video_el.nativeElement,0,0,640,640);const i=this._context.getImageData(0,0,640,640),s=rpe(i);return Ht(s,"float32").div(En(255)).expandDims(0)}_processPredictions(e,i){return et(()=>{const s=e.transpose([0,2,1]),r=this._calculateBoundingBoxes(s),o=s.slice([0,0,4],[-1,-1,Object.keys(i).length]).squeeze(0),[a,l]=[o.max(1),o.argMax(1)];return Su.nonMaxSuppression(r,a,e.shape[2],.45,.2).arraySync().map(u=>{const d=r.slice([u,0],[1,-1]).squeeze().arraySync(),h=l.slice([u],[1]).arraySync()[0];return{box:d,label:i[h]}})})}_calculateBoundingBoxes(e){const[i,s,r,o]=[e.slice([0,0,0],[-1,-1,1]),e.slice([0,0,1],[-1,-1,1]),e.slice([0,0,2],[-1,-1,1]),e.slice([0,0,3],[-1,-1,1])],a=tn(i,vn(r,2)),l=tn(s,vn(o,2));return Xr([a,l,r,o],2).squeeze()}_setupWebcam(){var e=this;return de(function*(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const i=yield navigator.mediaDevices.getUserMedia({video:!0});e._video_el.nativeElement.srcObject=i}else console.error("getUserMedia is not supported")})()}_setupVoiceRecognition(){var e=this;return de(function*(){if(!loadVosklet)return e.timeout("loadVosklet",()=>e._setupVoiceRecognition());const s=new(window.SpeechRecognition||window.webkitSpeechRecognition);s.interimResults=!0,s.lang="en-US",s.onresult=r=>{const{transcript:o}=r.results[0][0];e.current_text=o,e.timeout("on_end",()=>e.handleEnd(),3e3)},s.onerror=r=>{if(console.warn("Speech Recognition Error:",r),"no-speech"===r.error)return e.current_text="",void e.timeout("stop_listening",()=>e.listening=!1,500);e.error.speech_recognition=!0},s.onend=r=>{e.handleEnd(),e.timeout("stop_listening",()=>e.listening=!1,500)},e._recognition=s,s.start(),e.setup=!0,e.timeout("stop_listening",()=>e.listening=!0,500),e.interval("check_listening",()=>e.startListening(),500)})()}_speakText(e){if(!("speechSynthesis"in window)||!("SpeechSynthesisUtterance"in window))return void(this.error.speech_synthesis=!0);window.speechSynthesis.cancel();const i=new SpeechSynthesisUtterance(e);i.rate=1,i.pitch=1,new Promise(r=>{const o=window.speechSynthesis.getVoices();if(o.length>0){const a=o.find(l=>"Karen"===l.voiceURI);a&&(i.voice=a),r()}else window.speechSynthesis.onvoiceschanged=()=>{const l=window.speechSynthesis.getVoices().find(c=>"Karen"===c.voiceURI);l&&(i.voice=l),r()}}).then(()=>{window.speechSynthesis.speak(i)})}handleEnd(){this.last_text=this.current_text,this.current_text="",this.clearInterval("scale"),this.scale=1,!(this.last_text.length<=3)&&this.last_text!==this._previous_message&&(this._chat.sendMessage(this.last_text),this._previous_message=this.last_text,this.last_text="")}_scrollToBottom(){this.timeout("scroll_to_bottom",()=>{const e=this._message_el.nativeElement;e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},50)}static#e=this.\u0275fac=function(i){return new(i||t)(D(Ul),D(_ue))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["app-panel-view"]],viewQuery:function(i,s){if(1&i&&(Zt(NRt,7),Zt(RRt,7),Zt(FRt,7)),2&i){let r;xt(r=Et())&&(s._video_el=r.first),xt(r=Et())&&(s._canvas_el=r.first),xt(r=Et())&&(s._message_el=r.first)}},features:[bt],decls:23,vars:22,consts:[["video",""],["canvas",""],["message_element",""],[1,"relative","flex","items-center","justify-center","h-full","w-full","bg-base-200",3,"click"],["class","absolute top-2 left-1/2 -translate-x-1/2 px-4 py-2 text-center rounded-3xl bg-error text-error-content text-xs",4,"ngIf"],["autoplay","","playsinline","",1,"absolute","top-4","right-4","w-40","h-40","object-cover","rounded-xl","bg-base-200","border-2","border-base-200","z-10"],[1,"absolute","bottom-4","left-4","bg-warning","h-2","w-2","rounded-full"],["class","absolute top-4 right-4 bg-success text-success-content h-8 w-8 rounded-full flex items-center justify-center z-20",4,"ngIf"],["width","640","height","640",1,"absolute","opacity-0","pointer-events-none","z-10"],["chat","",1,"relative","w-[48rem]","mx-auto","max-w-full","h-full","overflow-auto","bg-base-100","flex","flex-col","justify-end"],["class","absolute inset-0 flex flex-col items-center justify-center space-y-4",4,"ngIf"],[1,"max-h-full","overflow-auto","w-full"],["class","my-2 p-2 flex space-x-4 hover:bg-info-light",3,"waiting-margin","click",4,"ngFor","ngForOf"],["class","p-4",4,"ngIf"],["class","absolute right-2 flex items-center justify-center space-x-2 p-1 rounded-2xl bg-base-100 border border-neutral",3,"bottom",4,"ngIf"],[1,"p-4","w-full"],["appearance","outline",1,"w-full","no-subscript"],["matInput","","placeholder","Type your message here...",3,"ngModelChange","keydown.enter","ngModel"],["splash","","matRipple","","class","absolute inset-0 text-white flex flex-col items-center justify-center z-20",4,"ngIf"],[1,"absolute","top-2","left-1/2","-translate-x-1/2","px-4","py-2","text-center","rounded-3xl","bg-error","text-error-content","text-xs"],["class","flex items-center justify-center w-full h-full",4,"ngIf"],[1,"flex","items-center","justify-center","w-full","h-full"],[1,"absolute","top-4","right-4","bg-success","text-success-content","h-8","w-8","rounded-full","flex","items-center","justify-center","z-20"],[1,"text-xl"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-4"],["src","assets/icons/no-pending.svg",1,"h-32","w-32","object-contain"],[1,"opacity-30"],[1,"my-2","p-2","flex","space-x-4","hover:bg-info-light",3,"click"],[1,"text-xl",3,"user"],[1,"flex","flex-1","flex-col","space-y-1"],[1,"flex","items-center","space-x-4"],[1,"text-xs","text-base-content","opacity-40","px-2","py-1","w-full","text-right"],["message","",1,"markdown","selectable","text-sm",3,"innerHTML"],[1,"p-4"],[1,"block","p-2","rounded","border-base-300","bg-info","text-info-content","w-full",3,"click"],[1,"flex","items-center","space-x-2"],[1,"text-2xl"],[1,"text-sm"],[1,"relative","overflow-hidden","w-full","rounded"],[1,"absolute","inset-0","bg-base-100","opacity-10"],["class","text-xs text-mono text-left p-2 break-words",3,"innerHTML",4,"ngIf"],[1,"text-xs","text-mono","text-left","p-2","break-words",3,"innerHTML"],[1,"absolute","right-2","flex","items-center","justify-center","space-x-2","p-1","rounded-2xl","bg-base-100","border","border-neutral"],[1,"h-2","w-2","bg-neutral","rounded-full","animate-bounce"],[1,"h-2","w-2","bg-neutral","rounded-full","animate-bounce","anim-delay-1"],[1,"h-2","w-2","bg-neutral","rounded-full","animate-bounce","anim-delay-2"],[1,"sr-only"],["splash","","matRipple","",1,"absolute","inset-0","text-white","flex","flex-col","items-center","justify-center","z-20"],[1,"font-light","text-4xl","mb-4"]],template:function(i,s){if(1&i){const r=Le();m(0,"div",3),te("click",function(){return re(r),oe(s.startListening())}),K(1,BRt,3,2,"div",4),be(2,"video",5,0)(4,"div",6),K(5,VRt,3,0,"div",7),be(6,"canvas",8,1),m(8,"div",9),K(9,zRt,5,3,"div",10),ge(10,"async"),m(11,"div",11,2),K(13,URt,12,15,"div",12),ge(14,"async"),K(15,jRt,13,9,"div",13),ge(16,"async"),K(17,HRt,6,2,"div",14),ge(18,"async"),_(),m(19,"div",15)(20,"mat-form-field",16)(21,"textarea",17),Gn("ngModelChange",function(a){return re(r),Fn(s.current_text,a)||(s.current_text=a),oe(a)}),te("keydown.enter",function(){return re(r),oe(s.handleEnd())}),_()()()()(),K(22,WRt,3,0,"button",18)}if(2&i){let r;b(),S("ngIf",s.error.speech_recognition||s.error.speech_synthesis),b(),rt("opacity-0",!s.debug)("!border-success",s.person_in_view),b(2),rt("!bg-success",s.person_in_view),b(),S("ngIf",s.listening),b(4),S("ngIf",!(null!=(r=Me(10,14,s.messages))&&r.length)),b(4),S("ngForOf",Me(14,16,s.messages)),b(2),S("ngIf",Me(16,18,s.progress)),b(2),S("ngIf",Me(18,20,s.waiting)),b(4),Un("ngModel",s.current_text),b(),S("ngIf",!s.setup)}},dependencies:[hn,Ot,Mr,oi,wi,zt,pf,vs,jt,ql,yi,ud,WB,Jh],styles:["[splash][_ngcontent-%COMP%]{animation:crossfade 10s linear;animation-iteration-count:infinite}"]})}return t})();function KRt(t,n){}const XRt={bottomSheetState:wo("state",[Gs("void, hidden",Sn({transform:"translateY(100%)"})),Gs("visible",Sn({transform:"translateY(0%)"})),us("visible => void, visible => hidden",Lw([bs(`${o8.COMPLEX} ${r8.ACCELERATION_CURVE}`),xv("@*",Cv(),{optional:!0})])),us("void => visible",Lw([bs(`${o8.EXITING} ${r8.DECELERATION_CURVE}`),xv("@*",Cv(),{optional:!0})]))])};let YRt=(()=>{class t extends w8{constructor(e,i,s,r,o,a,l,c,u){super(e,i,s,r,o,a,l,u),this._animationState="void",this._animationStateChanged=new it,this._breakpointSubscription=c.observe([Cp_Medium,Cp_Large,"(min-width: 1920px)"]).subscribe(()=>{const d=this._elementRef.nativeElement.classList;d.toggle("mat-bottom-sheet-container-medium",c.isMatched(Cp_Medium)),d.toggle("mat-bottom-sheet-container-large",c.isMatched(Cp_Large)),d.toggle("mat-bottom-sheet-container-xlarge",c.isMatched("(min-width: 1920px)"))})}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges())}exit(){this._destroyed||(this._animationState="hidden",this._changeDetectorRef.markForCheck())}ngOnDestroy(){super.ngOnDestroy(),this._breakpointSubscription.unsubscribe(),this._destroyed=!0}_onAnimationDone(e){"visible"===e.toState&&this._trapFocus(),this._animationStateChanged.emit(e)}_onAnimationStart(e){this._animationStateChanged.emit(e)}_captureInitialFocus(){}static#e=this.\u0275fac=function(i){return new(i||t)(D(Bt),D(nD),D(Zn,8),D(ES),D(tD),D(Wt),D(CS),D(Zk),D(Hl))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["mat-bottom-sheet-container"]],hostAttrs:["tabindex","-1",1,"mat-bottom-sheet-container"],hostVars:4,hostBindings:function(i,s){1&i&&ww("@state.start",function(o){return s._onAnimationStart(o)})("@state.done",function(o){return s._onAnimationDone(o)}),2&i&&(mw("@state",s._animationState),$t("role",s._config.role)("aria-modal",s._config.ariaModal)("aria-label",s._config.ariaLabel))},standalone:!0,features:[bt,Ln],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,s){1&i&&K(0,KRt,0,0,"ng-template",0)},dependencies:[xp],styles:[".mat-bottom-sheet-container{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2), 0px 16px 24px 2px rgba(0, 0, 0, 0.14), 0px 6px 30px 5px rgba(0, 0, 0, 0.12);padding:8px 16px;min-width:100vw;box-sizing:border-box;display:block;outline:0;max-height:80vh;overflow:auto;background:var(--mat-bottom-sheet-container-background-color);color:var(--mat-bottom-sheet-container-text-color);font-family:var(--mat-bottom-sheet-container-text-font);font-size:var(--mat-bottom-sheet-container-text-size);line-height:var(--mat-bottom-sheet-container-text-line-height);font-weight:var(--mat-bottom-sheet-container-text-weight);letter-spacing:var(--mat-bottom-sheet-container-text-tracking)}.cdk-high-contrast-active .mat-bottom-sheet-container{outline:1px solid}.mat-bottom-sheet-container-xlarge,.mat-bottom-sheet-container-large,.mat-bottom-sheet-container-medium{border-top-left-radius:var(--mat-bottom-sheet-container-shape);border-top-right-radius:var(--mat-bottom-sheet-container-shape)}.mat-bottom-sheet-container-medium{min-width:384px;max-width:calc(100vw - 128px)}.mat-bottom-sheet-container-large{min-width:512px;max-width:calc(100vw - 256px)}.mat-bottom-sheet-container-xlarge{min-width:576px;max-width:calc(100vw - 384px)}"],encapsulation:2,data:{animation:[XRt.bottomSheetState]}})}return t})();const ZRt=new st("MatBottomSheetData");class QRt{constructor(){this.data=null,this.hasBackdrop=!0,this.disableClose=!1,this.ariaLabel=null,this.ariaModal=!0,this.closeOnNavigation=!0,this.autoFocus="dialog",this.restoreFocus=!0}}class Q1{get instance(){return this._ref.componentInstance}get componentRef(){return this._ref.componentRef}constructor(n,e,i){this._ref=n,this._afterOpened=new Pt,this.containerInstance=i,this.disableClose=e.disableClose,i._animationStateChanged.pipe(an(s=>"done"===s.phaseName&&"visible"===s.toState),ai(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(an(s=>"done"===s.phaseName&&"hidden"===s.toState),ai(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._ref.close(this._result)}),n.overlayRef.detachments().subscribe(()=>{this._ref.close(this._result)}),Zs(this.backdropClick(),this.keydownEvents().pipe(an(s=>27===s.keyCode))).subscribe(s=>{!this.disableClose&&("keydown"!==s.type||!oa(s))&&(s.preventDefault(),this.dismiss())})}dismiss(n){this.containerInstance&&(this.containerInstance._animationStateChanged.pipe(an(e=>"start"===e.phaseName),ai(1)).subscribe(e=>{this._closeFallbackTimeout=setTimeout(()=>{this._ref.close(this._result)},e.totalTime+100),this._ref.overlayRef.detachBackdrop()}),this._result=n,this.containerInstance.exit(),this.containerInstance=null)}afterDismissed(){return this._ref.closed}afterOpened(){return this._afterOpened}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}}const JRt=new st("mat-bottom-sheet-default-options");let XE=(()=>{class t{get _openedBottomSheetRef(){const e=this._parentBottomSheet;return e?e._openedBottomSheetRef:this._bottomSheetRefAtThisLevel}set _openedBottomSheetRef(e){this._parentBottomSheet?this._parentBottomSheet._openedBottomSheetRef=e:this._bottomSheetRefAtThisLevel=e}constructor(e,i,s,r){this._overlay=e,this._parentBottomSheet=s,this._defaultOptions=r,this._bottomSheetRefAtThisLevel=null,this._dialog=i.get(C8)}open(e,i){const s={...this._defaultOptions||new QRt,...i};let r;return this._dialog.open(e,{...s,disableClose:!0,closeOnOverlayDetachments:!1,maxWidth:"100%",container:YRt,scrollStrategy:s.scrollStrategy||this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().global().centerHorizontally().bottom("0"),templateContext:()=>({bottomSheetRef:r}),providers:(o,a,l)=>(r=new Q1(o,s,l),[{provide:Q1,useValue:r},{provide:ZRt,useValue:s.data}])}),r.afterDismissed().subscribe(()=>{this._openedBottomSheetRef===r&&(this._openedBottomSheetRef=null)}),this._openedBottomSheetRef?(this._openedBottomSheetRef.afterDismissed().subscribe(()=>r.containerInstance?.enter()),this._openedBottomSheetRef.dismiss()):r.containerInstance.enter(),this._openedBottomSheetRef=r,r}dismiss(e){this._openedBottomSheetRef&&this._openedBottomSheetRef.dismiss(e)}ngOnDestroy(){this._bottomSheetRefAtThisLevel&&this._bottomSheetRefAtThisLevel.dismiss()}static#e=this.\u0275fac=function(i){return new(i||t)(Re(Qs),Re(ti),Re(t,12),Re(JRt,8))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),eFt=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:[XE],imports:[Zse,Ki,Wd,Ki]})}return t})();const rFt=["*"];function oFt(t,n){1&t&&(m(0,"span"),un(1),_())}function aFt(t,n){if(1&t){const e=Le();m(0,"div",6)(1,"date-calendar",7),te("ngModelChange",function(s){return re(e),oe(M().setValue(s))}),_()()}if(2&t){const e=M();b(),S("ngModel",e.date)("from",e.from)("to",e.until)("offset_weekday",e.week_start)}}let Au=(()=>{class t extends bn{get has_error(){return this._control?.invalid&&this._control?.touched}constructor(e){super(),this._injector=e,this.from_date=Pi(Date.now()).valueOf(),this.week_start=0,this.short=!1,this.date=Date.now()}get from(){return new Date(this.from_date)||Pi(new Date)}get until(){return new Date(this.to_date)||uy(Fs(new Date),1)}ngOnInit(){this._control=this._injector.get(Vl),this.date=Date.now()}setValue(e){const i=new Date(this.date);let s=hd(e,{hours:i.getHours(),minutes:i.getMinutes()}).valueOf();s<this.from.valueOf()&&(s=this.from.valueOf()),this.date=s,this._onChange&&this._onChange(s),this._tooltip?.close()}writeValue(e){this.date=e||Date.now(),this._tooltip?.close()}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouch=e}setDisabledState(e){this.disabled=e}static#e=this.\u0275fac=function(i){return new(i||t)(D(ti))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["a-date-field"]],viewQuery:function(i,s){if(1&i&&Zt(cu,5),2&i){let r;xt(r=Et())&&(s._tooltip=r.first)}},inputs:{from_date:[0,"from","from_date"],to_date:[0,"to","to_date"],week_start:"week_start",disabled:"disabled",short:"short"},features:[Lt([{provide:qi,useExisting:Cn(()=>t),multi:!0}]),bt],ngContentSelectors:rFt,decls:11,vars:9,consts:[["calendar_picker",""],["customTooltip","","yPosition","top","matRipple","",1,"flex","items-center","justify-between","border","border-neutral","rounded","h-12","w-full",3,"content","disabled"],[1,"px-4","py-2","flex-1","truncate","w-1/2","text-left","font-normal"],[1,"h-10","w-10","flex","items-center","justify-center","text-2xl"],[1,"error","h-5","p-1","text-xs","text-error"],[4,"ngIf"],[1,"relative","w-[18rem]","rounded","bg-base-100","px-2","py-4"],[3,"ngModelChange","ngModel","from","to","offset_weekday"]],template:function(i,s){if(1&i&&(Ti(),m(0,"button",1)(1,"p",2),C(2),ge(3,"date"),_(),m(4,"div",3)(5,"app-icon"),C(6,"today"),_()()(),m(7,"div",4),K(8,oFt,2,0,"span",5),_(),K(9,aFt,2,4,"ng-template",null,0,mn)),2&i){const r=Gt(10);rt("opacity-30",s.disabled),S("content",r)("disabled",s.disabled),b(2),xe(" ",Kt(3,6,s.date,s.short?"MMM d, yyyy":"MMMM d, yyyy")," "),b(6),S("ngIf",s.has_error)}}})}return t})();const lFt=["*"];function cFt(t,n){if(1&t&&(sn(0),C(1),ge(2,"date"),rn()),2&t){const e=M().$implicit,i=M();b(),fv(" ",e.date?Kt(2,3,e.date,e.id>=1440?"mediumDate":i.use_24hr?"HH : mm":"h : mm a")+" (":"","",e.name,"",e.date?")":""," ")}}function uFt(t,n){if(1&t&&(m(0,"mat-option",5),K(1,cFt,3,6,"ng-container",6),C(2),_()),2&t){const e=n.$implicit,i=M();S("value",e.id),b(),S("ngIf",!i.force),b(),xe(" ",i.force," ")}}let Ih=(()=>{class t{constructor(){this.max=240,this.min=30,this.step=15,this.custom_options=[],this.use_24hr=!1,this.duration=60,this.duration_options=[]}ngOnInit(){this.duration_options=this.generateDurationOptions(this.max,this.min,this.step),this._updateOption()}ngOnChanges(e){(e.max||e.min||e.step||e.time||e.custom_options)&&(this.duration_options=this.generateDurationOptions(this.max,this.min,this.step),this._updateOption())}setValue(e){this.duration=e,this._onChange&&this._onChange(+e)}writeValue(e){this.duration=e,this._updateOption()}setDisabledState(e){this.disabled=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouch=e}generateDurationOptions(e,i,s){const r=[];let o=i;const a=this.time?this.time:null;for(const l of this.custom_options)r.push({id:l,date:a?li(a,l).valueOf():void 0,name:l>=1440?`${th({days:Math.floor(l/1440)})}`:`${th({hours:Math.floor(l/60),minutes:l%60})}`});for(;o<=e;)r.push({id:o,date:a?li(a,o).valueOf():void 0,name:0===o?th({minutes:0},{zero:!0}):o>=1440?`${th({days:Math.floor(o/1440)})}`:`${th({hours:Math.floor(o/60),minutes:o%60})}`}),o+=s;return r.sort((l,c)=>l.id-c.id),r}_updateOption(){this.duration_options?.length&&this.duration_options.findIndex(i=>i.id===this.duration)<0&&this.setValue(this.min)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Qe({type:t,selectors:[["a-duration-field"]],inputs:{max:"max",min:"min",step:"step",time:"time",disabled:"disabled",custom_options:"custom_options",force:"force",use_24hr:"use_24hr"},features:[Lt([{provide:qi,useExisting:Cn(()=>t),multi:!0}]),On],ngContentSelectors:lFt,decls:7,vars:5,consts:[["select",""],[1,"duration-field"],["appearance","outline"],[3,"valueChange","value","disabled","placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[4,"ngIf"]],template:function(i,s){if(1&i){const r=Le();Ti(),m(0,"div",1)(1,"mat-form-field",2)(2,"mat-select",3,0),te("valueChange",function(a){return re(r),oe(s.setValue(a))}),K(4,uFt,3,3,"mat-option",4),_(),m(5,"mat-error"),un(6),_()()()}2&i&&($t("disabled",s.disabled),b(2),S("value",s.duration)("disabled",s.disabled)("placeholder",s.duration+" minutes"),b(2),S("ngForOf",s.duration_options))},dependencies:[hn,Ot,vs,sf,Br,Hs,Rs],styles:["[_nghost-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]{width:100%}"]})}return t})();function kh(t){const n=Hn(t);return n.setSeconds(0,0),n}function Ou(t,n){const e=n?.nearestTo??1;if(e<1||e>30)return aa(t,NaN);const i=Hn(t),s=i.getSeconds()/60,r=i.getMilliseconds()/1e3/60,o=i.getMinutes()+s+r,c=wB(n?.roundingMethod??"round")(o/e)*e,u=aa(t,i);return u.setMinutes(c,0,0),u}const dFt=["select"];function hFt(t,n){if(1&t&&(m(0,"mat-option",5),C(1),ge(2,"date"),_()),2&t){const e=M();S("value",e.force_time),b(),xe(" ",Kt(2,2,e.force_time,e.use_24hr?"HH : mm":"h : mm a")," ")}}function fFt(t,n){if(1&t&&(m(0,"mat-option",5),C(1),ge(2,"date"),_()),2&t){const e=n.$implicit,i=M();S("value",e.id),b(),Ts(" ",Kt(2,3,e.date,i.use_24hr?"HH : mm":"h : mm a")," ",i.extra_info_fn(e.date)," ")}}let Em=(()=>{class t extends bn{constructor(){super(...arguments),this.step=15,this.no_past_times=!0,this.use_24hr=!1,this.extra_info_fn=e=>"",this.from=Pi(Date.now()).valueOf(),this.date=(new Date).valueOf(),this.time=ys(new Date,"HH:mm")}ngOnInit(){this.show_select=!0,this._time_options=this.generateAvailableTimes(this.date,!this.no_past_times,this.step),this.timeout("hide",()=>this.show_select=!1)}ngOnChanges(e){(e.no_past_times||e.step)&&(this._time_options=this.generateAvailableTimes(this.date,!this.no_past_times,this.step))}get time_options(){const e=(this.time||"00:00").split(":"),i=hd(this.date,{hours:+e[0],minutes:+e[1]});return i.getMinutes()%15!=0&&!this._time_options.find(s=>s.id===ys(i,"HH:mm"))&&(this._time_options.push({date:i,id:ys(i,"HH:mm")}),this._time_options.sort((s,r)=>`${s.id}`.localeCompare(`${r.id}`))),this._time_options}setValue(e){if(this.time=e,this._onChange){const i=(this.time||"00:00").split(":"),s=kh(hd(this.date,{hours:+i[0],minutes:+i[1]}));this._onChange(s.valueOf())}}writeValue(e){this.date=e||this.date;let i=kh(this.date);i=Ou(i,{nearestTo:5}),this.time=ys(i,"HH:mm"),this._time_options=this.generateAvailableTimes(this.date,!this.no_past_times,this.step)}setDisabledState(e){this.disabled=e,this._time_options=this.generateAvailableTimes(this.date,!this.no_past_times||e,this.step)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouch=e}showSelect(){this.show_select=!0,this.timeout("on_shown",()=>{this.select_field&&(this.select_field.focus(),this.select_field.open(),this.subscription("listen_close",this.select_field.openedChange.subscribe(e=>{e||(this.show_select=!1)})))})}generateAvailableTimes(e,i,s=15){const r=new Date(Math.max(this.from,Date.now()));let o=new Date(e);const a=[];i||!ad(o,r)&&cd(o,r)?o=Pi(o):cd(o,r)&&(o=new Date(r)),o=Ou(o,{nearestTo:s});const l=Fs(o);for(;cd(l,o);)a.push({date:o.valueOf(),id:ys(o,"HH:mm")}),o=li(o,s);return a}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=Pn(t)))(s||t)}})();static#t=this.\u0275cmp=Qe({type:t,selectors:[["a-time-field"]],viewQuery:function(i,s){if(1&i&&Zt(dFt,5),2&i){let r;xt(r=Et())&&(s.select_field=r.first)}},inputs:{step:"step",disabled:"disabled",no_past_times:"no_past_times",use_24hr:"use_24hr",force_time:"force_time",extra_info_fn:"extra_info_fn",from:"from"},features:[Lt([{provide:qi,useExisting:Cn(()=>t),multi:!0}]),bt,On],decls:5,vars:4,consts:[["select",""],["appearance","outline"],[3,"ngModelChange","ngModel","disabled"],[3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(i,s){if(1&i){const r=Le();m(0,"mat-form-field",1)(1,"mat-select",2,0),te("ngModelChange",function(a){return re(r),oe(s.setValue(a))}),K(3,hFt,3,5,"mat-option",3)(4,fFt,3,6,"mat-option",4),_()()}2&i&&(b(),S("ngModel",s.force_time||s.time)("disabled",s.disabled),b(2),S("ngIf",s.force_time),b(),S("ngForOf",s.time_options))},dependencies:[hn,Ot,oi,wi,vs,Br,Hs,Rs],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]})}return t})();function pFt(t,n){if(1&t&&(m(0,"div",3)(1,"label",4),C(2," Name"),m(3,"span"),C(4,"*"),_(),C(5,": "),_(),m(6,"mat-form-field",5),be(7,"input",6),m(8,"mat-error"),C(9,"Name is required"),_()()()),2&t){const e=M(2);b(),rt("error",e.hasError("name"))}}function mFt(t,n){if(1&t&&(m(0,"div",3)(1,"label",7),C(2," Email"),m(3,"span"),C(4,"*"),_(),C(5,": "),_(),m(6,"mat-form-field",5),be(7,"input",8),m(8,"mat-error"),C(9,"A valid email is required"),_()()()),2&t){const e=M(2);b(),rt("error",e.hasError("email"))}}function _Ft(t,n){if(1&t&&(m(0,"div",3)(1,"label",9),C(2),ge(3,"translate"),m(4,"span"),C(5,"*"),_(),C(6,": "),_(),m(7,"mat-form-field",5),be(8,"input",10),m(9,"mat-error"),C(10),ge(11,"translate"),_()()()),2&t){const e=M(2);b(),rt("error",e.hasError("organisation")),b(),xe(" ",Me(3,4,"COMMON.ORGANISATION"),""),b(8),xe(" ",Me(11,6,"COMMON.ORGANISATION")," is required ")}}function gFt(t,n){if(1&t&&(m(0,"div",3)(1,"label",11),C(2," Phone: "),_(),m(3,"mat-form-field",5),be(4,"input",12),m(5,"mat-error"),C(6,"Phone format is invalid"),_()()()),2&t){const e=M(2);b(),rt("error",e.hasError("phone"))}}function bFt(t,n){1&t&&(m(0,"div",3)(1,"mat-checkbox",13),C(2," Assistance required "),_()())}function vFt(t,n){1&t&&(m(0,"div",3)(1,"mat-checkbox",14),C(2," Visit expected "),_()())}function yFt(t,n){if(1&t&&(m(0,"form",1),K(1,pFt,10,2,"div",2)(2,mFt,10,2,"div",2)(3,_Ft,12,8,"div",2)(4,gFt,7,2,"div",2)(5,bFt,3,0,"div",2)(6,vFt,3,0,"div",2),_()),2&t){const e=M();S("formGroup",e.form),b(),S("ngIf",e.form.controls.name),b(),S("ngIf",e.form.controls.email),b(),S("ngIf",e.form.controls.organisation),b(),S("ngIf",e.form.controls.phone),b(),S("ngIf",e.form.controls.assistance_required),b(),S("ngIf",e.form.controls.visit_expected)}}let Lye=(()=>{class t{hasError(e){const{invalid:i,touched:s}=this.form?.controls[e]||{};return i&&s}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Qe({type:t,selectors:[["user-form"]],inputs:{form:"form"},decls:1,vars:1,consts:[["user-form","","class","w-full",3,"formGroup",4,"ngIf"],["user-form","",1,"w-full",3,"formGroup"],["class","flex flex-col w-full",4,"ngIf"],[1,"flex","flex-col","w-full"],["for","name"],["appearance","outline"],["matInput","","name","name","placeholder","Name","formControlName","name"],["for","email"],["matInput","","name","email","placeholder","Email Address","formControlName","email"],["for","org"],["matInput","","name","org","placeholder","e.g. Conteso","formControlName","organisation"],["for","phone"],["matInput","","name","phone","type","tel","placeholder","Phone","formControlName","phone"],["name","assistance-required","color","primary","formControlName","assistance_required"],["name","visit-expected","color","primary","formControlName","visit_expected"]],template:function(i,s){1&i&&K(0,yFt,7,7,"form",0),2&i&&S("ngIf",s.form)},dependencies:[Ot,Kh,Mr,oi,zl,qo,_l,vs,sf,ql,Kl,Jh],styles:["[_nghost-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}"]})}return t})();function wFt(t,n){if(1&t&&(m(0,"main",6),be(1,"user-form",7),_()),2&t){const e=M();b(),S("form",e.form)}}function SFt(t,n){if(1&t){const e=Le();m(0,"footer",8)(1,"button",9),C(2," Cancel "),_(),m(3,"button",10),te("click",function(){return re(e),oe(M().saveChanges())}),C(4,"Save"),_()()}}function CFt(t,n){1&t&&(m(0,"main",11),be(1,"mat-spinner",12),m(2,"p"),C(3,"Saving attendee..."),_()())}let Pye=(()=>{class t extends bn{constructor(e){super(),this._data=e,this.event=new it,this.form=gae(this.user||new Io),this.loading=!1,this.user=this._data.user||{},this.form=gae(this.user)}ngOnInit(){}saveChanges(){if(this.form&&(this.form.markAllAsTouched(),this.form.valid)){const e=new Io({...this.form.value,is_external:!0});this.event.emit({reason:"done",metadata:e})}}static#e=this.\u0275fac=function(i){return new(i||t)(D(Js))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["new-user-modal"]],outputs:{event:"event"},features:[bt],decls:11,vars:4,consts:[["load_state",""],["mat-dialog-title","",1,"heading"],[1,"flex-1"],["icon","","mat-dialog-close",""],["class","flex flex-col items-center w-full p-2",4,"ngIf","ngIfElse"],["class","flex items-center justify-center w-full p-2 border-t border-base-200 space-x-2",4,"ngIf"],[1,"flex","flex-col","items-center","w-full","p-2"],[3,"form"],[1,"flex","items-center","justify-center","w-full","p-2","border-t","border-base-200","space-x-2"],["btn","","matRipple","","mat-dialog-close","",1,"inverse"],["btn","","matRipple","",3,"click"],[1,"flex","flex-col","items-center","w-full","p-2","space-y-2"],["diameter","32"]],template:function(i,s){if(1&i&&(m(0,"header")(1,"div",1),C(2),_(),be(3,"div",2),m(4,"button",3)(5,"app-icon"),C(6,"close"),_()()(),K(7,wFt,2,1,"main",4)(8,SFt,5,0,"footer",5)(9,CFt,4,0,"ng-template",null,0,mn)),2&i){const r=Gt(10);b(2),xe(" ",null!=s.user&&s.user.id?"Edit":"Add"," External Attendee "),b(5),S("ngIf",!s.loading)("ngIfElse",r),b(),S("ngIf",!s.loading)}},dependencies:[Ot,Ms,I8,zt,jt,Ws,Lye],styles:["main[_ngcontent-%COMP%]{min-height:20em!important;width:100%}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:8em}"]})}return t})();function Ei(t){return Math.trunc(+Hn(t)/1e3)}function ob(t,n){const{years:e=0,months:i=0,weeks:s=0,days:r=0,hours:o=0,minutes:a=0,seconds:l=0}=n,c=Hn(t),u=i||e?K_(c,i+12*e):c,p=1e3*(l+60*(a+60*o));return aa(t,(r||s?qr(u,r+7*s):u).getTime()+p)}class $ye{get custom_id(){const n=this.option_list.map(e=>e.id).join("+");return`${this.id}[${n}]${this.in_order?"":"menu"}`}constructor(n={}){this.id=n.id||"",this.name=n.name||n.id||"",this.category=n.category||"",this.unit_price=n.unit_price||0,this.description=n.description||"",this.quantity=n.quantity||0,this.discount_cap=n.discount_cap||0,this.accept_points=!!n.accept_points,this.tags=n.tags||[],this.images=n.images||[],this.options=n.options||[];const e=this.options.some(i=>!0===i.active);this.option_list=(e?this.options.filter(i=>!0===i.active):n.option_list)||[],this.hide_for_zones=n.hide_for_zones||[],this.unit_price_with_options=this.unit_price+this.option_list.map(i=>i.unit_price||0).reduce((i,s)=>i+s,0),this.total_cost=this.unit_price_with_options*this.quantity,this.options_string=this.options?.map(i=>i.id||"").sort((i,s)=>i.localeCompare(s)).join(",")||"",this.in_order=n.in_order??!1}}function Bye(t){let n=t.event?.date||t._time;return t.deliver_time&&(n=hd(n,{hours:Math.floor(t.deliver_time),minutes:t.deliver_time%1*60}).valueOf()),(t.deliver_day_offset>0||t.event?.all_day)&&(n=qr(Pi(n),t.deliver_day_offset).valueOf()),li(n,t.deliver_offset).valueOf()}class Vye{get deliver_at(){return Bye(this)}get status(){return this._status}set status(n){this._status=n,this[`${this.event_id}_status`]=n}constructor(n={}){this._time=kh(Date.now()).valueOf(),this.id=n.id||`order-${Mp(9999999,1e6)}`,this.system_id=n.system_id||"",this.event_id=n.event_id||n.event?.id||"",this.items=(n.items||[]).map(e=>e instanceof $ye?e:new $ye(e)),this.item_count=this.items.reduce((e,i)=>e+i.quantity,0),this.total_cost=this.items.reduce((e,i)=>e+(i.total_cost||0),0),this.charge_code=n.charge_code||"",this.status=n[`${this.event_id}_status`]||n.status||"accepted",this.invoice_number=n.invoice_number||"",this.event=n.event||null,this.notes=n.notes||"",this.deliver_time=n.deliver_time||void 0,this.deliver_offset=n.deliver_offset||0,this.deliver_day_offset=n.deliver_day_offset||0,this.deliver_at_time=Bye(this)}}function xFt(t,n){return+kh(t)==+kh(n)}const EFt=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function Gye(t){let n=t.event?.date||t._time;return t.deliver_time&&(n=hd(n,{hours:Math.floor(t.deliver_time),minutes:t.deliver_time%1*60}).valueOf()),(t.deliver_day_offset>0||t.event?.all_day)&&(n=qr(Pi(n),t.deliver_day_offset).valueOf()),li(n,t.deliver_offset).valueOf()}class Nu{get deliver_at(){return Gye(this)}get status(){return this._status}set status(n){this._status=n,this[`${this.event_id}_status`]=n}constructor(n={}){this.conflict=!1,this._changed=!1,this._time=kh(Date.now()).valueOf(),this.id=n.id||`order-${Mp(9999999,1e6)}`,this.event_id=n.event_id||n.parent_id||"",this.items=n.items||n.asset_ids?.map(i=>({id:i,quantity:1}))||[],this.item_count=this.items.reduce((i,s)=>i+s.quantity,0),this._status=n[`${this.event_id}_status`]||n.status||(n.extension_data||{})[`${this.event_id}_status`]||n.extension_data?.status||"in_storage",this.event=n.event||n||null;const e=this.event?.linked_bookings?.find(i=>i.extension_data.request_id===this.id);this._booking=e||n.booking||null,this._changed=!!n._changed||!e,this.notes=n.notes||n.description||"",this.deliver_time=n.deliver_time||n.extension_data?.deliver_time||void 0,this.deliver_offset=n.deliver_offset||n.extension_data?.deliver_offset||0,this.deliver_day_offset=n.deliver_day_offset||n.extension_data?.deliver_day_offset||0,this.deliver_at_time=Gye(this),this.conflict=!!n.conflict,this.ref_id=`${this.deliver_at_time}|${this.items.map(i=>`${i.id}:${i.quantity}`).join("|")}`}toJSON(){const n={...this};return delete n.event,delete n._changed,delete n._status,delete n._time,delete n.deliver_at_time,delete n.deliver_at,n.items=n.items.map(e=>({id:e.id,category_id:e.category_id,quantity:e.quantity,name:e.name,item_ids:e.item_ids})),n}}let aG={id:"default",name:"Default User"};const AFt=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];class ia{get images(){return this.extension_data.images||[]}get is_all_day(){return this.all_day||this.duration>=720}get view_access(){return this.extension_data.view_access||"PRIVATE"}ext(n){return this.extension_data[n]}constructor(n={}){this._valid_asset_cache=[],this._valid_cache_expiry=0,this.id=n.event_id||n.id||"",this.event_start=n.event_start||Ei(n.date||Ou(li(new Date,3),{nearestTo:5})),this.event_end=n.event_end||Ei(li(1e3*this.event_start,n.duration||30)),this.calendar=n.calendar||"",this.creator=(n.creator||aG.email)?.toLowerCase()||"",this.host=(n.host||this.creator||n.host_email||aG.email||"").toLowerCase();const e=n.attendees||[];this.attendees=e.filter(c=>!c.resource).map(c=>new Io(c)),this.resources=Cs(n.resources||e.filter(c=>c.resource).map(c=>new Cl(c)),"email")||[],this.title=n.title,this.body=n.body||"",this.private=!!n.private,this.all_day=!!n.all_day,this.date=1e3*this.event_start||this.date,this.date_end=1e3*this.event_end||this.date_end,this.duration=_f(this.date_end,this.date),this.all_day&&(this.date=Pi(this.date).getTime(),this.duration=Math.max(1439,this.duration-1),this.date_end=Fs(li(this.date,this.duration).valueOf()-1).getTime());const i=this.body.match(/\[ID\|([^\]]+)\]/),s=i?i[1]:null;this.timezone=n.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone,this.meeting_url=n.meeting_url||n.online_meeting_url||"",this.meeting_id=s||n.meeting_id||n.online_meeting_id||"",this.meeting_provider=n.meeting_provider||n.online_meeting_provider||"",this.recurring=!!n.recurring,this.recurring_event_id=n.recurring_event_id||"",this.organiser=this.attendees.find(c=>c.email===this.host),this.from_bookings=n.from_bookings??!1,this.master=n.master?new ia(n.master):null,this.mailbox=n.mailbox||"",this.ical_uid=n.ical_uid,this.linked_bookings=n.linked_bookings||[],this.update_master=n.update_master??!1,this.recurrence=n.recurring?{start:1e3*this.event_start||new Date(1e3*n.recurrence.range_start).valueOf(),end:n.recurrence.end||new Date(1e3*n.recurrence.range_end).valueOf(),interval:n.recurrence.interval,pattern:n.recurrence.pattern,occurrences:n.recurrence.occurrences,days_of_week:n.recurrence.days_of_week?.map(c=>"number"==typeof c?c:AFt.indexOf(c))||[]}:{};const r=n.system;r?.email&&!this.resources.find(c=>c.email===r.email)&&this.resources.push(new Cl(r)),this.system=r||this.resources[0]||null,!r&&n.system_id&&(this.system={id:n.system_id}),this.old_system=n.old_system||n.system,this.is_system_event=this.body.includes("main_event_id"),this.attachments=n.attachments||[],this.extension_data=n.extension_data||{},this.status=function TFt(t){return"cancelled"===t.status?"declined":t.resources?.length?t.resources.every(n=>"accepted"===n.response_status||t.approved)?"approved":t.resources.some(n=>"tentative"===n.response_status||"needsAction"===n.response_status)?"tentative":"declined":"approved"}({...n,...this})||"none",this.location=n.location||this.space?.display_name||this.space?.name||"",this.setup_time=n.setup_time||0,this.breakdown_time=n.breakdown_time||0,this.type="declined"===this.status?"cancelled":this.attendees.find(c=>c.is_external)?"external":"internal";for(const c in n)c in this||(this.extension_data[c]=n[c]||this.extension_data[c]);const o={date:this.date,duration:this.duration,date_end:this.date_end,all_day:this.all_day,space:this.space,organiser:this.organiser};this.extension_data.catering=(this.extension_data.catering||[]).map(c=>new Vye({...c,event:o}));const a=this.linked_bookings.filter(c=>"asset-request"===c.booking_type).map(c=>c.extension_data?.request).filter(c=>!!c),l=(a.length?a:this.extension_data.assets)||[];this.extension_data.images=this.extension_data.images||n.images||[],this.extension_data.assets=l.map(c=>new Nu({...c,event:o}))}get guests(){return this.attendees.filter(n=>!!n.is_external)}get space(){return this.resources[0]||null}get is_today(){return ad(this.date,Date.now())}get valid_catering(){return(this.ext("catering")||[]).filter(n=>n.deliver_at<this.date_end)}get valid_assets(){if(this._valid_cache_expiry>Date.now()&&this._valid_asset_cache.length)return this._valid_asset_cache;const n=this.linked_bookings;return this._valid_asset_cache=(this.ext("assets")||[]).map(e=>new Nu({...e,event:this})).filter(e=>e.deliver_at<this.date_end).map(e=>{const i=n.find(s=>s.extension_data.request_id===e.id);return i&&(e.state=i.approved?"approved":i.rejected?"rejected":"pending"),e}),this._valid_cache_expiry=li(Date.now(),5).valueOf(),this._valid_asset_cache}toJSON(){const n={...this},e=this.all_day?Pi(this.date):this.date,i=this.all_day?Fs(this.date_end).valueOf()+1:this.date_end;n.event_start=Ei(e),n.event_end=Ei(i);const s=this.attendees;this.recurring=this.recurrence?.pattern&&"none"!==this.recurrence._pattern,this.recurring&&(n.recurrence=function IFt(t){let n=t.start||1e3*t.range_start,e=t.end||t.range_end;if(t.occurrences>1)switch(t.pattern){case"daily":e=qr(n||Date.now(),(t.occurrences-1)*t.interval).valueOf();break;case"weekly":e=function zye(t,n){return qr(t,7*n)}(n||Date.now(),(t.occurrences-1)*t.interval).valueOf();break;case"month_day":case"monthly":e=K_(n||Date.now(),(t.occurrences-1)*t.interval).valueOf(),e=qr(e,7).valueOf();break;case"yearly":e=uy(n||Date.now(),(t.occurrences-1)*t.interval).valueOf()}return{range_start:Ei(Pi(n)),range_end:Ei(Fs(e)),interval:t.interval,pattern:t.pattern,days_of_week:t.days_of_week?.map(i=>"number"==typeof i?EFt[i]:i)||[]}}({...this.recurrence,start:this.date}),delete n.recurrence.start,delete n.recurrence.end),n.recurrence=n.recurrence&&Object.keys(n.recurrence).length?n.recurrence:null,n.attendees=Cs([...s,...this.resources.map(r=>({...r,resource:!0}))],"email"),this.all_day&&(n.setup_time=0,n.breakdown_time=0,n.extension_data.all_day_date=ys(e,"yyyy-MM-dd")),n.extension_data.catering=n.extension_data.catering.map(r=>new Vye({...r,event:null})),n.extension_data.assets=n.extension_data.assets.map(r=>new Nu({...r,event:null})),n.system_id=this.system?.id;for(const r of["catering","date","date_end","duration","status","linked_bookings","_valid_asset_cache","_valid_cache_expiry","type"])r in n&&delete n[r];return n.update_master||delete n.recurring_event_id,nae(n),n}get state(){const n=new Date,e=this.date;return vl(n,ob(e,{minutes:-15}))?"future":vl(n,e)?"upcoming":vl(n,ob(e,{minutes:15}))?"started":vl(n,ob(e,{minutes:this.duration}))?"in_progress":"done"}get can_check_in(){const n=new Date;return this.is_today||cd(n,li(this.date,-5))&&vl(n,li(this.date,this.duration))}}function jye(t){const n=zr({q:t});return la("/api/staff/v1/guests"+(t?"?"+n:"")).pipe(ze(e=>e.map(i=>new mC(i))))}function FR(t){const n=zr({q:t,fields:["id","name","email","username","organisation","department"].join(",")});return la("/api/staff/v1/people"+(t?"?"+n:"")).pipe(ze(e=>e.map(i=>new wy(i))))}const NFt=["search_field"];function RFt(t,n){if(1&t&&(m(0,"app-icon",22),ge(1,"placeuser"),ge(2,"async"),C(3),ge(4,"placeuser"),ge(5,"async"),_()),2&t){let e,i;const s=M().$implicit,r=M();S("matTooltip",null==(e=Me(2,4,Me(1,2,null==s?null:s.email)))?null:e.location_name_time(r.time)),b(3),xe(" ",null==(i=Me(5,8,Me(4,6,null==s?null:s.email)))?null:i.location_icon(r.time)," ")}}function FFt(t,n){if(1&t){const e=Le();m(0,"mat-chip-row",18),te("removed",function(){const s=re(e).$implicit;return oe(M().removeUser(s))}),m(1,"div",19)(2,"div"),C(3),_(),K(4,RFt,6,10,"app-icon",20),_(),m(5,"button",21)(6,"app-icon"),C(7,"cancel"),_()()()}if(2&t){const e=n.$implicit;rt("bg-warning",e.is_external),b(3),vt(e.name||e.email),b(),S("ngIf",!e.is_external),b(),$t("aria-label","Remove "+(e.name||e.email))}}function LFt(t,n){1&t&&be(0,"mat-spinner",23)}function PFt(t,n){if(1&t){const e=Le();m(0,"mat-option",24),te("click",function(){return re(e),oe(M().addUserFromEmail())}),Ne(1,4),_()}if(2&t){const e=M();b(),$n(e.search$.getValue()),zn(1)}}function $Ft(t,n){if(1&t){const e=Le();m(0,"mat-option",25),te("click",function(){const s=re(e).$implicit;return oe(M().addUser(s))}),C(1),be(2,"br"),m(3,"span",26),C(4),_()()}if(2&t){const e=n.$implicit;b(),xe(" ",e.name,""),b(3),vt(e.email)}}function BFt(t,n){if(1&t){const e=Le();m(0,"div",27)(1,"button",28),te("click",function(){return re(e),oe(M().openNewUserModal())}),Ri(2,5),m(3,"div",29),be(4,"span",30),_(),Fi(),_(),m(5,"button",31),Ri(6,6),m(7,"div",29),be(8,"span",30),_(),m(9,"input",32),te("change",function(s){return re(e),oe(M().addUsersFromFile(s))}),_(),Fi(),_(),m(10,"button",33),te("click",function(){re(e);const s=M();return s.downloadCSVTemplate(),oe(s.download.emit())}),Ri(11,7),m(12,"div",29),be(13,"span",30),_(),Fi(),_()()}}function uG(t){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}const VFt=["text/csv","text/plain"],zFt=["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];let dG=(()=>{class t extends bn{searchStaff(e){return this._settings.get("app.basic_user_search")?T5({q:e,authority_id:kc()?.id}).pipe(ze(i=>i.data.map(s=>new Io(s)))):FR(e)}get search_valid_email(){return uG(this.search$.getValue())}constructor(e,i){super(),this._dialog=e,this._settings=i,this.time=Date.now(),this.limit=3,this.guests=!1,this.guests_only=!1,this.hide_actions=!1,this.custom_template=!1,this.new_user=new it,this.download=new it,this.separatorKeysCodes=[13,188],this.loading=!1,this.search$=new Mt(""),this.user_list$=this.search$.pipe(hs(300),nn(s=>(this.loading=!0,(s?this.guests?Qt([this.searchStaff(s),jye(s)]).pipe(ze(([r,o])=>{this.guests_only&&(r=[]);const a=[],l=this._settings.get("visitor-invitees")||[];for(const c of l){const[u,d,h]=c.split("|");a.push({email:u,name:d,company:h})}return Cs(r.concat(o).concat(a),"email")})):this.searchStaff(s):gt([])).pipe(ts(r=>gt([]))))),mi(s=>this.loading=!1)),this.active_list=[],this.validFn=s=>uG(s),this.emptyClick=()=>this.openNewUserModal(new Io)}updateSearch(e=""){this.timeout("search",()=>this.search$.next(e))}addUserFromEmail(e=""){if(e||(e=this.search$.getValue()),!uG(e))return;const i=new Io({id:e,email:e,name:e.split("@")[0]});this.addUser(i);const{name:s,organisation:r}=i,o=`${e}|${s}|${r}`,a=this._settings.get("visitor-invitees")||[];this._settings.saveUserSetting("visitor-invitees",[...a.filter(l=>!l.includes(e)),o]),this.timeout("clear_search",()=>{this.search$.next(""),this._search_el.nativeElement.value=""},100)}addUser(e){const i=this.active_list?.filter(s=>s.id!==e.id)||[];this.setValue([...i,new Io({...e,id:e.id||e.email,visit_expected:(e.id||!0===e.is_external?null:e.visit_expected)??!0})]),this.timeout("clear_search",()=>{this.search$.next(""),this._search_el.nativeElement.value=""},100)}removeUser(e){const i=this.active_list.filter(s=>s.id!==e.id);this.setValue(i)}addUsersFromFile(e){if(e.target){const i=e.target.files[0];if(i){if(!VFt.includes(i.type)||zFt.includes(i.type))return void Mi("Only CSV files are supported");const s=new FileReader;s.readAsText(i,"UTF-8"),s.addEventListener("load",r=>{this.processCsvData(r.srcElement.result),e.target.value=""}),s.addEventListener("error",r=>Mi("Error reading file."))}}}processCsvData(e){const i=function Dje(t,n=","){const e=new RegExp('(\\,|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^\\,\\r\\n]*))',"gi");let i=null;const s=[[]];for(;i=e.exec(t);)i[1].length&&","!==i[1]&&s.push([]),s[s.length-1].push(i[2]?i[2]?.replace(new RegExp('""',"g"),'"'):i[3]);const r=s.splice(0,1)[0];return s.map(a=>{const l={};for(let c=0;c<a.length;c++){const u=(r[c]||"").split(" ").join("_").toLowerCase();try{l[u]=JSON.parse(a[c]?.replace("|",","))}catch{l[u]=a[c]||""}("TRUE"===l[u]||"FALSE"===l[u])&&(l[u]="TRUE"===l[u])}return l})}(e)||[],s=fn()?.staff_id||"unknown";for(const r of i){r.name=r.name||`${r.first_name} ${r.last_name}`;const o=(r.name||`${Math.floor(99999999*Math.random())}`).split(" ").join("_").toLowerCase();r.email||(r.email=`${o}+${s}@guest.${pC}`);const a=this._settings.get("app.bookings.internal_emails")||["place.tech"];r.visit_expected=r.visit_expected??!a.find(l=>r.email.endsWith(l)),r.phone=""+r.phone,this.addUser(new Io(r))}}downloadCSVTemplate(){this.custom_template||function Mje(t,n){const e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),e.setAttribute("download",t),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}("template.csv","Organisation,First Name,Last Name,Email,Phone,Assistance Required,Visit Expected\nFake Org,John,Smith,john.smith@example.com,01234567898,false,true")}setValue(e){this.active_list=e,this._onChange&&this._onChange(e)}writeValue(e){this.active_list=e}setDisabledState(e){this.disabled=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouch=e}displayFn(e){return e?.name||""}openNewUserModal(e=new Io){const i=this._dialog.open(Pye,{width:"auto",height:"auto",data:{user:e}});i.componentInstance?.event.pipe(ds(s=>"done"===s.reason)).subscribe(s=>{this.addUser(s.metadata),i.close()})}static#e=this.\u0275fac=function(i){return new(i||t)(D(wr),D(ln))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["a-user-list-field"]],viewQuery:function(i,s){if(1&i&&Zt(NFt,5),2&i){let r;xt(r=Et())&&(s._search_el=r.first)}},inputs:{time:"time",disabled:"disabled",limit:"limit",guests:"guests",guests_only:"guests_only",hide_actions:"hide_actions",custom_template:"custom_template",filter:"filter"},outputs:{new_user:"new_user",download:"download"},features:[Lt([{provide:qi,useExisting:Cn(()=>t),multi:!0}]),bt],decls:17,vars:14,consts:()=>{let e,i,s,r,o;return e=$localize`:␟5ecf84665fa441ea616e171804e6652d010c9ed2␟5361968336322693258:Type a name or email`,i=$localize`:␟8ddbc311625de88f24142f65336765837378c1ca␟2206723750290169400: Add external user with email "${"\ufffd0\ufffd"}:INTERPOLATION:" `,s=$localize`:Add new external attendee␟afa9063944169ae2cd6bd8c0d5e943468ab77e90␟145038058737617323:${"\ufffd#3\ufffd"}:START_TAG_DIV: Add ${"\ufffd#4\ufffd"}:START_TAG_SPAN:External${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_DIV:`,r=$localize`:Upload attendee list from CSV file␟0115abeee77902eeda78bb11be738c011e8be933␟4462048288204440387:${"\ufffd#7\ufffd"}:START_TAG_DIV: Upload ${"\ufffd#8\ufffd"}:START_TAG_SPAN:CSV${"\ufffd/#8\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#7\ufffd"}:CLOSE_TAG_DIV:${"\ufffd#9\ufffd\ufffd/#9\ufffd"}:TAG_INPUT:`,o=$localize`:Download template CSV file␟f761a83c085b86f026cdf949cf8015ee62d8ca8c␟6030611805365927572:${"\ufffd#12\ufffd"}:START_TAG_DIV:${"\ufffd#13\ufffd"}:START_TAG_SPAN:CSV${"\ufffd/#13\ufffd"}:CLOSE_TAG_SPAN: Template ${"\ufffd/#12\ufffd"}:CLOSE_TAG_DIV:`,[["origin","matAutocompleteOrigin"],["chipList",""],["search_field",""],["auto","matAutocomplete"],i,s,r,o,["form-field","",1,"mb-4"],["search",""],["appearance","outline","matAutocompleteOrigin","",1,"w-full"],["aria-label","User Seleciom"],["user","",3,"bg-warning","removed",4,"ngFor","ngForOf"],["placeholder",e,"name","user_email",3,"ngModelChange","matChipInputTokenEnd","ngModel","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes"],["diameter","24","matSuffix","",4,"ngIf"],[3,"click",4,"ngIf"],["class","leading-tight",3,"click",4,"ngFor","ngForOf"],["class","flex items-center space-x-2 -mt-4","actions","",4,"ngIf"],["user","",3,"removed"],[1,"flex","items-center","space-x-2"],[3,"matTooltip",4,"ngIf"],["matChipRemove","","remove",""],[3,"matTooltip"],["diameter","24","matSuffix",""],[3,"click"],[1,"leading-tight",3,"click"],[1,"text-xs"],["actions","",1,"flex","items-center","space-x-2","-mt-4"],["btn","","matRipple","","type","button","name","new-contact",1,"inverse","flex-1","sm:flex-none",3,"click"],[1,"flex","items-center","justify-center"],[1,"hidden","sm:inline"],["btn","","matRipple","","type","button","name","upload-csv",1,"relative","inverse","flex-1","sm:flex-none"],["type","file",1,"opacity-0","absolute","inset-0",3,"change"],["btn","","matRipple","","type","button","name","download-template",1,"inverse","flex-1","sm:flex-none",3,"click"]]},template:function(i,s){if(1&i){const r=Le();m(0,"div",8)(1,"div",9)(2,"mat-form-field",10,0)(4,"mat-chip-grid",11,1),K(6,FFt,8,5,"mat-chip-row",12),_(),m(7,"input",13,2),ge(9,"async"),te("ngModelChange",function(a){return re(r),oe(s.updateSearch(a))})("matChipInputTokenEnd",function(a){return re(r),oe(s.addUserFromEmail(a.value))}),_(),K(10,LFt,1,0,"mat-spinner",14),_(),m(11,"mat-autocomplete",null,3),K(13,PFt,2,1,"mat-option",15)(14,$Ft,5,2,"mat-option",16),ge(15,"async"),_()(),K(16,BFt,14,0,"div",17),_()}if(2&i){const r=Gt(5),o=Gt(12);$t("disabled",s.disabled),b(6),S("ngForOf",s.active_list),b(),S("ngModel",Me(9,10,s.search$))("matAutocomplete",o)("matChipInputFor",r)("matChipInputSeparatorKeyCodes",s.separatorKeysCodes),b(3),S("ngIf",s.loading),b(3),S("ngIf",s.search_valid_email),b(),S("ngForOf",Me(15,12,s.user_list$)),b(2),S("ngIf",!s.hide_actions)}}})}return t})();const UFt=["input"];function GFt(t,n){1&t&&be(0,"mat-spinner",11)}function jFt(t,n){if(1&t){const e=Le();m(0,"mat-option",12),te("click",function(){const s=re(e).$implicit,r=M();return r.setValue(s),oe(r.blurInput())}),m(1,"div",13),C(2),_(),m(3,"div",14),C(4),_()()}if(2&t){const e=n.$implicit;b(2),vt(e.name),b(2),xe(" ",e.email," ")}}function HFt(t,n){if(1&t){const e=Le();m(0,"mat-option",15)(1,"div",16),te("mousedown",function(s){return re(e),s.stopPropagation(),oe(s.preventDefault())})("touchstart",function(s){return re(e),s.stopPropagation(),oe(s.preventDefault())})("click",function(s){re(e);const r=M();return r.setValue(r.search_str),s.stopPropagation(),oe(s.preventDefault())}),m(2,"div",17),Ne(3,2),_()()()}if(2&t){const e=M();b(3),$n(e.search_str),zn(3)}}function WFt(t,n){if(1&t){const e=Le();m(0,"mat-option",18),te("click",function(){return re(e),oe(M().empty_fn())}),C(1),_()}if(2&t){const e=M();S("disabled",!e.empty_fn),b(),Ts(" ",e.search_str?"No users found.":""," ",e.error," ")}}let e0=(()=>{class t extends bn{constructor(e){super(),this._settings=e,this.error="",this.query_fn=i=>this._settings.get("app.basic_user_search")?T5({q:i,authority_id:kc()?.id}).pipe(ze(s=>s.data.map(r=>new Io(r)))):FR(i),this.search$=new Pt,this.search_results$=this.search$.pipe(hs(400),D_(),nn(i=>(this.loading=!0,this.options&&this.options.length>0?gt(this.options):i.length>=3?this.guests?hp([FR(i),jye(i)]):this.query_fn(i):gt([]))),ts(i=>gt([])),ze(i=>{this.loading=!1,i=To(i);const s=(this.search_str||"").toLowerCase();return i.filter(r=>!this.filter||this.filter(r,s))})),this.cancelReset=()=>this.clearTimeout("reset"),this.blurInput=()=>{this.timeout("blur",()=>this._input_el?.nativeElement?.blur())}}ngOnInit(){this.subscription("search_results",this.search_results$.subscribe(e=>this.user_list=e)),this.resetSearchString()}resetSearchString(){this.timeout("reset",()=>this.search_str=this.active_user?.name||"",100)}setValue(e,i){if(!e)return;"string"==typeof e&&e===this.search_str&&(e=new Io({name:(this.search_str||i||"").split("@")[0],email:this.search_str||i||""}));const s=e;!("name"in s)&&!("email"in s)||(this.active_user=s,this._onChange&&this._onChange(s),this.resetSearchString())}writeValue(e){this.active_user=e,this.resetSearchString()}setDisabledState(e){this.disabled=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouch=e}static#e=this.\u0275fac=function(i){return new(i||t)(D(ln))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["a-user-search-field"]],viewQuery:function(i,s){if(1&i&&Zt(UFt,5,Bt),2&i){let r;xt(r=Et())&&(s._input_el=r.first)}},inputs:{disabled:"disabled",placeholder:"placeholder",options:"options",guests:"guests",error:"error",validate:"validate",empty_fn:"empty_fn",filter:"filter",query_fn:"query_fn"},features:[Lt([{provide:qi,useExisting:Cn(()=>t),multi:!0}]),bt],decls:11,vars:8,consts:()=>{let e;return e=$localize`:␟bda749fab8de2e52f25203a840d2aca70b8e5b4d␟1390235508766899631: Add external attendee "${"\ufffd0\ufffd"}:INTERPOLATION:" `,[["input",""],["auto","matAutocomplete"],e,["appearance","outline",1,"w-full","no-subscript"],["matInput","","keyboard","","name","user-search",3,"ngModelChange","keyup.enter","blur","focus","ngModel","disabled","placeholder","matAutocomplete"],["matPrefix","",1,"text-2xl","relative"],["matSuffix","","diameter","16",4,"ngIf"],[3,"optionSelected"],[3,"click",4,"ngFor","ngForOf"],["class","relative pointer-events-none",4,"ngIf"],[3,"disabled","click",4,"ngIf"],["matSuffix","","diameter","16"],[3,"click"],[1,"leading-tight"],[1,"text-xs","opacity-60"],[1,"relative","pointer-events-none"],[1,"absolute","inset-0","px-4","pointer-events-auto",3,"mousedown","touchstart","click"],[1,"pointer-events-none"],[3,"click","disabled"]]},template:function(i,s){if(1&i){const r=Le();m(0,"mat-form-field",3)(1,"input",4,0),Gn("ngModelChange",function(a){return re(r),Fn(s.search_str,a)||(s.search_str=a),oe(a)}),te("ngModelChange",function(a){return re(r),oe(s.search$.next(a||""))})("keyup.enter",function(){return re(r),oe(s.validate&&s.validate(s.search_str)?s.setValue(s.search_str):"")})("blur",function(){return re(r),oe(s.resetSearchString())})("focus",function(){return re(r),oe(s.cancelReset())}),_(),m(3,"app-icon",5),C(4,"search"),_(),K(5,GFt,1,0,"mat-spinner",6),_(),m(6,"mat-autocomplete",7,1),te("optionSelected",function(a){return re(r),oe(s.setValue(a.option.value))}),K(8,jFt,5,2,"mat-option",8)(9,HFt,4,1,"mat-option",9)(10,WFt,2,3,"mat-option",10),_()}if(2&i){const r=Gt(7);b(),Un("ngModel",s.search_str),S("disabled",s.disabled)("placeholder",s.placeholder||"Search for user...")("matAutocomplete",r),b(4),S("ngIf",s.loading),b(3),S("ngForOf",s.user_list),b(),S("ngIf",s.search_str&&s.validate&&s.validate(s.search_str)),b(),S("ngIf",!(null!=s.user_list&&s.user_list.length)&&(s.search_str||s.error))}},styles:["[_nghost-%COMP%]{display:block}app-icon[_ngcontent-%COMP%]{top:.15em;left:-.15em}"]})}return t})();function qFt(t,n){if(1&t){const e=Le();m(0,"mat-chip-row",5),te("removed",function(){const s=re(e).$implicit;return oe(M().remove(s))}),m(1,"span",6),C(2),_(),m(3,"button",7)(4,"app-icon"),C(5,"cancel"),_()()()}if(2&t){const e=n.$implicit;b(2),vt(e),b(),$t("aria-label","Remove "+e)}}let Hye=(()=>{class t{constructor(){this.separators=[13,188],this.placeholder="",this.value=[],this.add=e=>function KFt(t,n){if(!t)return;const e=n.input,i=n.value,s=t.value;if(i.includes(",")){const r=i.split(",");for(const o of r)(o||"").trim()&&(s.push(o.trim()),t.setValue(s))}else(i||"").trim()&&(s.push(i.trim()),t.setValue(s));e&&(e.value="")}({value:this.value,setValue:i=>this.setValue(i)},e),this.remove=e=>function XFt(t,n){if(!t)return;const e=t.value,i=e.indexOf(n);i>=0&&(e.splice(i,1),t.setValue(e))}({value:this.value,setValue:i=>this.setValue(i)},e)}setValue(e){this.value=e,this._onChange&&this._onChange(e)}writeValue(e){this.value=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouch=e}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Qe({type:t,selectors:[["item-list-field"]],inputs:{separators:"separators",placeholder:"placeholder"},features:[Lt([{provide:qi,useExisting:Cn(()=>t),multi:!0}])],decls:5,vars:5,consts:[["chipList",""],["appearance","outline",1,"w-full"],["aria-label","Zone Tags"],[3,"removed",4,"ngFor","ngForOf"],[3,"matChipInputTokenEnd","placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],[3,"removed"],[1,"truncate","max-w-md"],["matChipRemove",""]],template:function(i,s){if(1&i){const r=Le();m(0,"mat-form-field",1)(1,"mat-chip-grid",2,0),K(3,qFt,6,2,"mat-chip-row",3),_(),m(4,"input",4),te("matChipInputTokenEnd",function(a){return re(r),oe(s.add(a))}),_()()}if(2&i){const r=Gt(2);b(3),S("ngForOf",s.value),b(),S("placeholder",s.placeholder||"User groups...")("matChipInputFor",r)("matChipInputSeparatorKeyCodes",s.separators)("matChipInputAddOnBlur",!0)}},dependencies:[hn,vs,OD,ND,MD,MS,zt]})}return t})();function hG(t,n){return D_((e,i)=>n?n(e[t],i[t]):e[t]===i[t])}function Wye(t,n){const e=t.getFullYear()-n.getFullYear()||t.getMonth()-n.getMonth()||t.getDate()-n.getDate()||t.getHours()-n.getHours()||t.getMinutes()-n.getMinutes()||t.getSeconds()-n.getSeconds()||t.getMilliseconds()-n.getMilliseconds();return e<0?-1:e>0?1:e}const lLt=["user","booked_by","resources","assets","members"];class il{get group(){return this.extension_data.group||""}get is_all_day(){return this.all_day||this.duration>=720}get valid_assets(){if(this._b_valid_cache_expiry>Date.now()&&this._b_valid_asset_cache.length)return this._b_valid_asset_cache;const n=this.linked_bookings;return this._b_valid_asset_cache=(this.extension_data.assets||[]).map(e=>new Nu({...e,event:this})).filter(e=>e.deliver_at<this.date_end).map(e=>{const i=n.find(s=>s.extension_data.request_id===e.id);return i&&(e.state=i.approved?"approved":i.rejected?"rejected":"pending"),e}),this._b_valid_cache_expiry=li(Date.now(),5).valueOf(),this._b_valid_asset_cache}constructor(n={}){this._b_valid_asset_cache=[],this._b_valid_cache_expiry=0,this.id=n.id||"",this.parent_id=n.parent_id||"",this.asset_id=n.asset_id||"",this.asset_ids=n.asset_ids||[n.asset_id].filter(e=>e),this.asset_name=n.asset_name||n.extension_data?.asset_name||n.description||n.asset_id||"",this.zones=n.zones||[],this.booking_start=Math.floor(n.date/1e3)||n.booking_start||Ei(Ou(li(Date.now(),5),{nearestTo:5})),this.booking_end=Math.floor(n.date/1e3)+60*n.duration||n.booking_end||Ei(li(1e3*this.booking_start,n.duration||60)),this.booking_type=n.booking_type||" ",this.type=n.type||n.booking_type||"booking",this.date=n.date||1e3*this.booking_start||Date.now(),this.duration=n.duration||Math.abs(_f(1e3*this.booking_start,1e3*this.booking_end))||60,this.date_end=1e3*this.booking_end||this.date+60*this.duration*1e3,this.timezone=n.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone,this.user_email=n.user_email||"",this.user_id=n.user_id||"",this.user_name=n.user_name||"",this.title=n.title??(this.booking_type?`${function Lje(t){return`${t[0].toUpperCase()}${t.substring(1)}`}(this.booking_type)} Booking`.trim():""),this.description=n.description||"",this.checked_in=!!n.checked_in,this.rejected=!!n.rejected,this.approved=!!n.approved,this.deleted=!!n.deleted,this.booked_by_id=n.booked_by_id||"",this.booked_by_name=n.booked_by_name||"",this.booked_by_email=n.booked_by_email||"",this.approver_id=n.approver_id||"",this.approver_email=n.approver_email||"",this.approver_name=n.approver_name||"",this.extension_data=n.extension_data||{},this.access=!!n.extension_data?.access,this.event_id=n.event_id,this.permission=(n.permission||"PRIVATE").toUpperCase(),this.attendees=n.attendees||n.guests||n.members||[],this.tags=n.tags||n.extension_data?.tags||[],this.images=n.images||[],this.all_day=n.all_day||this.duration>=1440,this.induction=(n.induction||n.extension_data?.induction||"inducted"===n.process_state)??!1,this.all_day&&(this.date=Pi(this.date).getTime(),this.duration=Math.max(1439,this.duration-(this.duration%24*60==0?1:0)),this.date_end=Fs(li(this.date,this.duration-1).valueOf()).getTime()),this.checked_out_at=n.checked_out_at,this.linked_event=n.linked_event||null,this.linked_bookings=n.linked_bookings||[],this.images=n.images||[],this.status=this.checked_out_at>0?"ended":this.rejected||this.deleted?"declined":this.approved?"approved":"tentative",this.process_state=n.process_state||"pending",this.recurrence_type=n.recurrence_type||"none",this.recurrence_days=n.recurrence_days,this.recurrence_nth_of_month=n.recurrence_nth_of_month,this.recurrence_interval=n.recurrence_interval,this.recurrence_end=n.recurrence_end,this.instance=n.instance;for(const e in n)!(e in this)&&!lLt.includes(e)&&n[e]&&(this.extension_data[e]=n[e]||this.extension_data[e]);this.extension_data.assets=(this.extension_data.assets||[]).map(e=>new Nu({...e,event:this,date:this.date})),this.extension_data.tags=n.tags||[],this.extension_data.request&&(this.extension_data.request=new Nu({...this.extension_data.request,event:this,date:this.date}))}toJSON(){const n={...this};return this.id||delete n.id,n.extension_data.assets=n.extension_data.assets.map(e=>new Nu({...e,event:null})),n.extension_data.request&&(n.extension_data.request=new Nu({...n.extension_data.request,event:null})),n.parent_id||delete n.parent_id,delete n.date,delete n.duration,nae(n),n}get location(){return this.extension_data?.location||this.description}get is_today(){return ad(this.date,new Date)}get is_done(){const n=new Date,e=this.all_day?HD(this.date,24):li(this.date,this.duration),i=1e3*(this.checked_out_at||this.extension_data.checked_out_at||0);let s=e.getTime();return!!(i&&Date.now()>i)||cd(n,new Date(s))}get state(){const n=new Date,e=this.date;return vl(n,ob(e,{minutes:-15}))?"future":vl(n,e)?"upcoming":vl(n,ob(e,{minutes:15}))?"started":vl(n,ob(e,{minutes:this.duration}))?"in_progress":"done"}}const Ba="/api/staff/v1/bookings";function Ru(t){const n=zr(t);return la(`${Ba}${n?"?"+n:""}`).pipe(ze(e=>e.map(i=>new il(i))),ts(e=>gt([])))}function fG(t,n){const e=zr(n);return dy(`${Ba}${e?"?"+e:""}`,t).pipe(ze(i=>new il(i)))}function pG(t){return QD(`${Ba}/${encodeURIComponent(t)}`,{response_type:"void"})}function Kye(t,n,e,i,s="room",r=[0,0]){return Ru({type:s,period_start:Ei(n),period_end:Ei(li(n,e))}).pipe(ze(o=>t.map(a=>!o.find(l=>l.asset_id===a&&(!i||i!==l.id)))))}function mG(){return mG=de(function*(t,n,e){const i=yield Ru({type:n,period_start:Ei(t.date),period_end:Ei(li(t.date,t.duration))}).pipe(ze(r=>r.filter(o=>o.parent_id===t.id))).toPromise();yield Promise.all(i.map(r=>pG(r.id).toPromise())),yield Promise.all(t.linked_bookings.filter(r=>r.booking_type===n).map(r=>pG(r.id).toPromise()));const s=t.system?.zones||Cs(To(t.resources.map(r=>r.zones)))||[];yield Promise.all(e.map(r=>{const o=i.find(a=>a.asset_ids.find(l=>r.items?.find(c=>c.item_ids.includes(l))));return fG(new il({type:n,booking_type:n,date:t.date,duration:t.duration,description:t.title,user_email:t.host,asset_id:r.email,asset_name:r.name,title:r.name,attendees:[r],approved:o?.approved&&!r._changed,rejected:o?.rejected&&!r._changed,extension_data:{parent_id:t.id,name:r.name,location_id:t.location},zones:s}),{ical_uid:t.ical_uid,event_id:t.id}).toPromise()}))}),mG.apply(this,arguments)}class _G{constructor(n={}){this.id=n.id||"",this.name=n.name||"",this.primary=!!n.primary,this.summary=n.summary||"",this.can_edit=!!n.can_edit,this.resource=new Cl(n.resource||n.system),this.availability=(n.availability||[]).map(({starts_at:e,ends_at:i,date:s,duration:r,status:o})=>({date:new Date(s||1e3*e).valueOf(),duration:r||_f(1e3*i,1e3*e),status:o})),this.hidden=!!n.hidden}}const LR="/api/staff/v1/calendars";function Xye(t){const n=zr(t);return la(`${LR}/availability${n?"?"+n:""}`).pipe(ze(e=>e.map(i=>new _G(i))))}const Yye=t=>ze(n=>n.filter(e=>!!e.resource).map(e=>new Cl({...e.resource,level:t?.levelWithID(e.resource.zones),availability:e.availability})).filter(e=>e.bookable));function _Lt(t,n){const e=zr(t);return la(`${LR}/free_busy${e?"?"+e:""}`).pipe(ze(i=>i.map(s=>new _G(s))),Yye(n))}const Dl="/api/staff/v1/events";function Zye(t,n={}){const e=zr(n);return la(`${Dl}/${encodeURIComponent(t)}${e?"?"+e:""}`).pipe(ze(i=>new ia(i)))}function Jye(t,n,e={}){const i=zr(e);return dy(`${Dl}/${encodeURIComponent(t)}/attendee${i?"?"+i:""}`,n).pipe(ze(s=>new mC(s)))}function e1e(t,n,e,i,s,r=[0,0]){const o=li(n,e).valueOf();return Qt([Xye({system_ids:t.join(),period_start:Ei(n),period_end:Ei(o)}).pipe(ts(a=>gt([]))),i&&t.includes(i)?_Lt({period_start:Ei(n),period_end:Ei(o),system_ids:i}):gt([])]).pipe(ze(([a,l])=>{const c=t.map(u=>!!a.find(d=>d.id===u||d.resource?.id===u));return l.length&&l[0].id===i&&t.includes(i)&&l[0].inUseAt(r[0]||n,r[1]||e)&&(c[t.indexOf(i)]=!0),c}))}function gG(t,n){const e=Hn(t);return e.setHours(n),e}const t1e=t=>{const n=t.parent?.get("date");return n&&cd(Date.now(),li(n.value,t.value))?{duration:!0}:null};ob(function ELt(t,n){const e=Hn(t);return e.setMinutes(n),e}(gG(new Date,6),0),{days:-1});const ILt=t=>n=>t.value?.length&&!n.value?{catering_field:"Catering sub-fields are required"}:null;function RLt(t,n){if(1&t&&(Ri(0,3,1),Ss(1),ge(2,"date"),ge(3,"date"),Fi()),2&t){const e=M(3);b(3),$n(Kt(2,2,e.details.date,"shortTime"))(Kt(3,5,e.details.date+60*e.details.duration*1e3,"shortTime")),zn(0)}}function FLt(t,n){if(1&t){const e=Le();sn(0),m(1,"main",14)(2,"h2",15),Ne(3,2),_(),be(4,"img",16),m(5,"p",17),Ri(6,3),ge(7,"date"),K(8,RLt,4,8,"ng-container",18),Fi(),_(),m(9,"p",19),Ne(10,4),_(),m(11,"p",20)(12,"strong"),C(13),ge(14,"currency"),_()(),m(15,"card-input-field",21),Gn("ngModelChange",function(s){re(e);const r=M(2);return Fn(r.card_details,s)||(r.card_details=s),oe(s)}),_()(),m(16,"footer",22)(17,"button",23),te("click",function(){return re(e),oe(M(2).processPayment())}),Ne(18,5),_()(),m(19,"button",24)(20,"i",25),C(21,"close"),_()(),rn()}if(2&t){const e=M(2);b(8),S("ngIf",!e.details.all_day),$n(e.details.type)(e.details.resource_name)(Kt(7,6,e.details.date,"mediumDate")),zn(6),b(5),vt(Kt(14,9,e.details.amount/100,e.code)),b(2),Un("ngModel",e.card_details)}}function LLt(t,n){if(1&t&&(m(0,"div",12),K(1,FLt,22,12,"ng-container",13),_()),2&t){const e=M(),i=Gt(5);b(),S("ngIf",!e.success)("ngIfElse",i)}}function PLt(t,n){if(1&t&&(m(0,"div",26),be(1,"mat-spinner",27),m(2,"p"),C(3),ge(4,"async"),_()()),2&t){const e=M();b(3),vt(Me(4,1,e.loading))}}function $Lt(t,n){if(1&t&&(m(0,"main",28)(1,"h2",15),Ne(2,6),_(),m(3,"h3",29),C(4),_(),m(5,"p"),Ne(6,7),ge(7,"currency"),_(),m(8,"p"),Ne(9,8),_(),m(10,"p"),C(11),ge(12,"date"),_(),m(13,"p"),Ne(14,9),ge(15,"date"),ge(16,"date"),_()(),be(17,"img",30),m(18,"footer",31)(19,"button",32),Ne(20,10),_()()),2&t){const e=M();b(4),xe(" Ref #",e.transaction_id," "),b(3),$n(Kt(7,6,e.details.amount/100,e.code)),zn(6),b(2),$n(e.details.resource_name),zn(9),b(2),vt(Kt(12,9,e.details.date,"mediumDate")),b(5),$n(Kt(15,12,e.details.date,"shortTime"))(Kt(16,15,e.details.date+60*e.details.duration*1e3,"shortTime")),zn(14)}}let vG=(()=>{class t{get code(){return this._org.currency_code}constructor(e,i){this._data=e,this._org=i,this.event=new it,this.details=this._data,this.loading=this._data.loading,this.success=!1,this.transaction_id="12345678"}processPayment(){var e=this;return de(function*(){!e.card_details||!e._validCardDetails()||(e.event.emit(e.card_details),yield e._data.makePayment(e.card_details),e.success=!0)})()}_validCardDetails(){return(this.card_details?.cardholder.length||0)>0&&(this.card_details?.cvv.length||0)>=3}static#e=this.\u0275fac=function(i){return new(i||t)(D(Js),D(In))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["payment-modal"]],outputs:{event:"event"},decls:6,vars:4,consts:()=>{let e,i,s,r,o,a,l,c,u;return e=$localize`:␟4d64c520c43eead598939b50c326e665c6e88fa4␟7177958266181561076:Booking Payment`,i=$localize`:␟00a4b4852357812c8f53bb8e5c7598d479bea113␟6612380128469929872: You are requesting a ${"\ufffd0\ufffd"}:INTERPOLATION: booking in ${"\ufffd1\ufffd"}:INTERPOLATION_1: for ${"\ufffd2\ufffd"}:INTERPOLATION_2: ${"\ufffd*8:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER: between ${"\ufffd0:1\ufffd"}:INTERPOLATION_3: and ${"\ufffd1:1\ufffd"}:INTERPOLATION_4: ${"\ufffd/#1:1\ufffd\ufffd/*8:1\ufffd"}:CLOSE_TAG_NG_CONTAINER:`,s=$localize`:␟7a9510cbfdcb53b8dcac3f0bd7958196958333ff␟2305336913310307878:You booking will cost:`,r=$localize`:␟9069fc3477fe6107249755afedd9fe14140bb201␟8427617350792373644: Make Payment `,o=$localize`:␟dbbd5277093a2dbc265472510779d835afc39f45␟8206804611071524488:Payment Successful`,a=$localize`:␟bb02e353442d9b1ec8fc7d9875465cafb134f7e4␟2765198892596811562:${"\ufffd0\ufffd"}:INTERPOLATION: paid.`,l=$localize`:␟931d5e8e4e517671212210e9d716fa2721c9e67c␟6374111499070607459:${"\ufffd0\ufffd"}:INTERPOLATION: booked.`,c=$localize`:␟e2ddd0e2db3568ac26e9f86a9e366f864a4e6e94␟783447026381975793: ${"\ufffd0\ufffd"}:INTERPOLATION: and ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,u=$localize`:␟001127b263e7132960af8fa70cce4c2635980fbc␟8163835392610431386: Great, thanks. `,[["load_state",""],["success_state",""],e,i,s,r,o,a,l,c,u,["class","relative max-h-[100vh] overflow-auto",4,"ngIf","ngIfElse"],[1,"relative","max-h-[100vh]","overflow-auto"],[4,"ngIf","ngIfElse"],[1,"px-4","pt-8","w-[24rem]","space-y-2","flex","flex-col","items-center","relative"],[1,"text-2xl","font-medium"],["src","assets/icons/cost.svg",1,"w-1/2"],[1,"text-sm","text-center","pb-2"],[4,"ngIf"],[1,"text-sm"],[1,"text-lg","font-medium","text-center"],[1,"w-full",3,"ngModelChange","ngModel"],[1,"p-4"],["matRipple","",1,"w-full",3,"click"],["icon","","matRipple","","mat-dialog-close","",1,"absolute","top-1","left-1"],[1,"material-icons","text-2xl"],[1,"w-full","h-full","flex","flex-col","items-center","justify-center","p-8"],["diameter","32"],[1,"px-8","pt-8","w-[24rem]","flex","flex-col","relative"],[1,"text-xl","font-medium","mb-2"],["src","assets/icons/payment-confirmed.svg",1,"w-full"],[1,"p-4","border-t","border-base-200"],["btn","","matRipple","","mat-dialog-close","",1,"w-full"]]},template:function(i,s){if(1&i&&(K(0,LLt,2,2,"div",11),ge(1,"async"),K(2,PLt,5,3,"ng-template",null,0,mn)(4,$Lt,21,18,"ng-template",null,1,mn)),2&i){const r=Gt(3);S("ngIf",!Me(1,2,s.loading))("ngIfElse",r)}}})}return t})();const YE="Payment";let n1e=(()=>{class t{get payment_module(){return this._org.binding("payments")}constructor(e,i,s){this._org=e,this._settings=i,this._dialog=s,this._loading=new Mt(""),this._active_card=new Mt(""),this.loading=this._loading.asObservable(),this.payment_sources=gt(1).pipe(nn(()=>{const r=Vr(this.payment_module,YE);return r?r.execute("list_payment_methods",["card"]):gt([])}),mi(r=>r[0]?this._active_card.next(r[0].id):""),jn(1))}makePayment(e){var i=this;return de(function*(){if(!i.payment_module)throw"Payments not enabled";const[s,r]=yield i._getCostOfProduct(e?.type).catch(h=>[0,60]);if(console.log("Cost:",s,r),s<=0)return;let o=i._settings.get("STRIPE_Customer_ID");o||(o=yield i._newCustomerID()),i._settings.saveUserSetting("STRIPE_Customer_ID",o);const a=s*(e.duration/r);let l;const c=function(){var h=de(function*(f){l=yield i._processPayment(a,o,f).catch(p=>{throw i._loading.next(""),p})});return function(p){return h.apply(this,arguments)}}(),u={...e,rate:`$${(s/100).toFixed(2)} per hour`,amount:a,makePayment:c,loading:i.loading};return yield i._dialog.open(vG,{data:u}).afterClosed().toPromise(),l})()}_addPaymentMethod(e){var i=this;return de(function*(){const s=Vr(i.payment_module,YE);if(!s)throw"Unable to load module";const r=yield s.execute("add_payment_method",["card",null,null,null,null,null,null,null,null,null,null,null,e]);return r.id||r})()}_getCostOfProduct(e){var i=this;return de(function*(){let s=[0,60];const r=Vr(i.payment_module,YE);if(!r)return s;const o=yield r.execute("get_product_prices",[null,null,e]);return o.length?o:s})()}_processPayment(e,i,s){var r=this;return de(function*(){r._loading.next("Checking payment method..."),console.log("Getting payment method...");const o=s?yield r._addPaymentMethod(s):r._active_card.getValue();if(!o)throw"No payment source selected";r._loading.next("Processing payment..."),console.log("Processing payment...");const a=Vr(r.payment_module,YE);if(!a)throw"Unable to load module";const l=yield a.execute("create_payment_intent",[e,r._org.building.currency||"USD",null,null,i,null,null,null,fn()?.email]);if(!l)throw"Failed to create payment";return console.log("Confirming payment..."),yield a.execute("confirm_payment_intent",[l,o]),r._loading.next(""),{success:!0,state:"approved",invoice_id:l,amount:e,created_at:Date.now(),updated_at:Date.now()}})()}_newCustomerID(){var e=this;return de(function*(){const i=Vr(e.payment_module,YE);if(!i)throw"Unable to load module";const s=fn();return yield i.execute("create_customer",[0,null,null,null,`${s.id}|${s.name}|FromPlaceOS`,s.email])})()}static#e=this.\u0275fac=function(i){return new(i||t)(Re(In),Re(ln),Re(wr))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function BLt(t){const n=function rXe(t,n=IC){return GD(t,tce(n)-tce(IC)).valueOf()}(t,"UTC");return`${ys(n,"yyyyMMdd")}T${ys(n,"HHmmss")}Z`}function VLt(t){return`${ys(t,"yyyyMMdd")}`}function o1e(t){return t.replace(/,/gm,",").replace(/;/gm,";").replace(/\r\n/gm,"\n").replace(/\n/gm,"\\n").replace(/(\\n)[\s\t]+/gm,"\\n")}let a1e=(()=>{class t{constructor(e,i){this._event=e,this._dialog=i,this.outlook_link=function r1e(t,n="office"){t.date||(t.date=Date.now());const e={path:"/calendar/action/compose",rru:"addevent",startdt:new Date(t.date).toISOString(),enddt:li(t.date,t.duration??60).toISOString(),subject:t.title,body:`${t.body||""}${t.id?"\n\n[ID|"+t.id+"]":""}`,location:t.location,allday:t.all_day??!1};t.all_day&&delete e.enddt;const i=(t.attendees||[]).map(r=>r.email||r),s=((t.resources?.length?t.resources:null)||[t.system]).map(r=>r?.email||r);return(i.length||s.length)&&(e.to=Cs([...i,...s]).join()),"office"===n?`https://outlook.office.com/calendar/0/action/compose?${zr(e)}`:`https://outlook.live.com/calendar/0/action/compose?${zr(e)}`}(this._event),this.google_link=function s1e(t){const n=t.all_day?VLt:BLt,e={action:"TEMPLATE",text:t.title,details:`${t.body||""}${t.id?"\n\n[ID|"+t.id+"]":""}`,location:t.location,trp:!1,dates:`${n(t.date)}/${n(li(t.date,t.duration??60))}`},i=(t.attendees||[]).map(r=>r.email||r),s=((t.resources?.length?t.resources:null)||[t.system]).map(r=>r?.email||r);return(i.length||s.length)&&(e.add=Cs([...i,...s]).join()),`https://calendar.google.com/calendar/render?${zr(e)}`}(this._event),this.ical_link=function i1e(t){const n=[],e=o1e(`${t.body||""}${t.id?"\n\n[ID|"+t.id+"]":""}`),i=o1e(`${t.location}`);n.push(["BEGIN","VCALENDAR"]),n.push(["VERSION","2.0"]),n.push(["BEGIN","VEVENT"]),n.push(["URL",`${t.meeting_url}`]),n.push(["DTSTART",`${new Date(t.all_day?kh(hd(t.date,{hours:6,minutes:0})):t.date).toISOString()}`]),n.push(["DTEND",`${t.all_day?kh(hd(t.date,{hours:18,minutes:0})).toISOString():li(t.date,t.duration??60).toISOString()}`]),n.push(["SUMMARY",`${t.title}`]),n.push(["DESCRIPTION",e]),n.push(["LOCATION",i]);const s=t.organiser?.name||t.host?.split("@")||t.user_name||"User";return n.push(["ORGANIZER",`CN=${s}:MAILTO:${t.host||t.user_email}`]),`data:text/calendar;charset=utf8,${n.map(([o,a])=>`${o}:${encodeURIComponent(a)}`).join("\n")}`}(this._event),this.has_actioned=!1}close(){if(!this.has_actioned)return Mi("You need to select a calendar option to finish creating this booking");this._dialog.close(!0)}static#e=this.\u0275fac=function(i){return new(i||t)(D(Js),D(Da))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["event-link-modal"]],decls:24,vars:13,consts:()=>{let e,i,s,r,o;return e=$localize`:␟29e3480e3d010232704522cde3ca29d23cc7725f␟5139383754155835256:Add event to your calendar`,i=$localize`:␟34c16b14ad0e33db574c8bea543e66e766aa3a01␟4015832758698516701:Create in Outlook`,s=$localize`:␟f745484670e6b6bbb8a1c327c222e665fb25b863␟3788591245559456526:Create in Google Calendar`,r=$localize`:␟1af54061e7f4bcfb1048ffaa05c9b8f7c4b41679␟4894641609416495396:Download iCal File`,o=$localize`:␟4dc1e9a4bbd21cf153990984cd4ecb4444117098␟6327967827692127661: Close `,[e,i,s,r,o,[1,"p-4","w-full","pb-2"],[1,"flex","flex-col","items-center","space-y-4","p-4","relative"],["btn","","matRipple","","target","_blank","rel","noopener noreferer",1,"flex","items-center","p-2","space-x-2","pr-4","w-64","rounded","inverse",3,"click","href"],["src","assets/icons/outlook.svg",1,"w-6"],["src","assets/icons/gcal.svg",1,"w-6"],[1,"text-xl"],["btn","","matRipple","",1,"w-64",3,"click"],["icon","","matRipple","",1,"absolute","top-2","right-0",3,"mat-dialog-close"]]},template:function(i,s){1&i&&(m(0,"div",5),Ne(1,0),_(),m(2,"div",6)(3,"a",7),ge(4,"sanitize"),te("click",function(){return s.has_actioned=!0}),be(5,"img",8),m(6,"span"),Ne(7,1),_()(),m(8,"a",7),ge(9,"sanitize"),te("click",function(){return s.has_actioned=!0}),be(10,"img",9),m(11,"span"),Ne(12,2),_()(),m(13,"a",7),ge(14,"safe"),te("click",function(){return s.has_actioned=!0}),m(15,"app-icon",10),C(16,"download"),_(),m(17,"span"),Ne(18,3),_()(),m(19,"button",11),te("click",function(){return s.close()}),Ne(20,4),_()(),m(21,"button",12)(22,"app-icon"),C(23,"close"),_()()),2&i&&(b(3),S("href",Kt(4,4,s.outlook_link,"url"),Ia),b(5),S("href",Kt(9,7,s.google_link,"url"),Ia),b(5),S("href",Kt(14,10,s.ical_link,"url"),Ia),b(8),S("mat-dialog-close",s.has_actioned))},dependencies:[Ms,zt,jt,uC,ud],styles:["[_nghost-%COMP%]{position:relative}"]})}return t})();const Fr="/api/engine/v2";const PR=new Map;function jLt(t={}){const n=zr(t);return PR.has(t.zones)?gt(PR.get(t.zones)):la(`${Fr}/asset_types${n?"?"+n:""}`).pipe(ze(e=>e),nn(e=>hp(e.map(i=>$R({limit:200,...t,type_id:i.id}).pipe(ze(s=>({...i,assets:s})))))),mi(e=>{PR.set(t.zones,e),setTimeout(()=>PR.delete(t.zones),3e5)}))}function $R(t={}){const n=zr(t);return la(`${Fr}/assets${n?"?"+n:""}`).pipe(ze(e=>e))}function c1e(t,n){return t.type="asset-request",Qt([jLt(t),Ru(t)]).pipe(ze(([e,i])=>(i=i.filter(s=>"declined"!==s.status&&"cancelled"!==s.status),e.map(s=>({...s,assets:s.assets.filter(r=>n?.includes(r.id)||!i.find(o=>!n.includes(o.id)&&(o.asset_id===r.id||o.asset_ids?.includes(r.id))))})))))}function wG(){return wG=de(function*({id:t,ical_uid:n,from_booking:e},{date:i,duration:s,all_day:r,host:o,location_name:a,location_id:l,zones:c,reset_state:u},d=[],h=!1){const f=yield Ru({period_start:Ei(r?Pi(i):i),period_end:Ei(r?Fs(li(i,s)):li(i,s)),type:"asset-request",zones:c.join(",")}).toPromise(),p=t&&n?yield Ru({period_start:Ei(Pi(i)),period_end:Ei(Fs(i)),type:"asset-request",email:o,event_id:e?"":t,booking_id:e?t:"",ical_uid:n}).toPromise():[],g=p.map(P=>[P.id,new Nu(P.extension_data.request)]);d?.forEach(P=>P.conflict=!1);let v=h?d.map(P=>P.id):function t3t(t,n,e=!1){if((!t||t?.length<=0)&&n?.length)return[];if(!n)return[];const i=[];for(const s of t){const r=n.find(o=>o.id===s.id);(!r||r.ref_id!==s.ref_id)&&i.push(s.id)}return i}(d,g.map(([P,X])=>X),u);if(u){const P=p.filter(X=>X.approved||X.rejected);v=Cs([...v,...P.map(X=>X.extension_data.request_id)])}const y=g.filter(([P,X])=>!v.includes(X.id)),w=g.filter(([P,{id:X}])=>v.includes(X)),E=d.filter(({id:P})=>v.includes(P)),T=f.filter(P=>!P.rejected&&(!p.find(X=>X.id===P.id)||y.find(([X])=>P.event_id===X)));let L=To(T.map(P=>P.asset_ids));for(const[P,X]of y)L=[...L,...To(X.items.map(ne=>ne.item_ids))];const W=yield c1e({period_start:Ei(r?Pi(i):i),period_end:Ei(r?Fs(li(i,s)):li(i,s)),type:"asset-request"},p.map(P=>P.id)).toPromise();console.log("Used IDs:",L),console.log("Changed Assets:",E),console.log("Requests:",f),console.log("Bookings:",p),console.log("Filtered:",T),console.log("Unchanged:",y),console.log("Available Groups:",W);const H=E.map(P=>{let X=To(P.items.map(({id:me,item_ids:Ee,quantity:Te})=>{const $e=W.find(Ce=>Ce.id===me)?.assets;if(!$e)return Ee;const Xe=[];return new Array(Te).fill(0).map((Ce,Fe)=>{const Ie=L.includes(Ee[Fe])||Xe.includes(Ee[Fe])||!Ee[Fe]?$e?.find(({id:He})=>!L.includes(He)&&!Xe.includes(He))?.id:Ee[Fe];if(!Ie)throw P.conflict=!0,"Unable to find available asset for request";return Xe.push(Ie),Ie})}));const ne=p.find(me=>me.asset_ids.find(Ee=>P.items?.find(Te=>Te.item_ids.includes(Ee))));return L=[...L,...X],fG(new il({type:"asset-request",booking_type:"asset-request",date:i,duration:s,all_day:r,description:a,user_email:o,asset_id:X[0],asset_ids:X,asset_name:P.items.map(me=>me.name).join(", "),title:P.items.map(me=>me.name).join(", "),approved:!u&&ne?.approved&&!P._changed,rejected:!u&&ne?.rejected&&!P._changed,extension_data:{parent_id:t,request_id:P.id,location_id:l,request:new Nu({...P,event:null})},zones:c||[]}),{ical_uid:n,event_id:e?"":t})});return de(function*(){yield Promise.all(w.map(([P])=>pG(P).toPromise())),yield Promise.all(H.map(P=>P.toPromise()))})}),wG.apply(this,arguments)}function d1e(t){const n=Hn(t);return n.setSeconds(59,999),n}const h1e=[];function f1e(t,n){return HD(t,-n)}new class n3t{constructor(n){this.images=[],Object.assign(this,n)}};const SG={};let p1e=(()=>{class t{constructor(e){this._org=e,this._options=new Mt({date:Date.now()}),this._search=new Mt(""),this._category=new Mt([]),this._loading=new Mt(""),this.search=this._search.asObservable(),this.category=this._category.asObservable(),this.options=this._options.asObservable(),this.loading=this._loading.asObservable(),this.rules=Qt([this._options,this._org.active_building]).pipe(an(([i,s])=>!!s),hs(300),nn(([i,s])=>(this._loading.next(this._loading.getValue()+"[Rules]"),function s3t(t,n=!1){return t?((!SG[t]||n)&&(SG[t]=uo(t,"assets_config").pipe(ze(e=>e.details instanceof Array?e.details:[]),ts(e=>gt([])))),SG[t]):gt([])}(s.id||i.zone||""))),mi(i=>this._loading.next(this._loading.getValue().replace(/\[Rules\]/g,""))),jn(1)),this.asset_list=gt(0).pipe(nn(()=>(this._loading.next(this._loading.getValue()+"[Assets]"),$R())),mi(i=>this._loading.next(this._loading.getValue().replace(/\[Assets\]/g,""))),jn(1)),this.asset_bookings=this._options.pipe(hs(300),nn(({zone:i,date:s})=>(this._loading.next(this._loading.getValue()+"[Bookings]"),Ru({zones:i||"",period_start:Ei(Pi(s)),period_end:Ei(Fs(s)),type:"asset-request"}))),mi(i=>this._loading.next(this._loading.getValue().replace(/\[Bookings\]/g,""))),jn(1)),this.available_groups=Qt([this._options,this._org.active_building]).pipe(hs(300),nn(([{zone:i,date:s,duration:r,ignore:o},a])=>c1e({zones:a.id||i||"",period_start:Ei(kh(s)),period_end:Ei(d1e(li(s,r||30))),type:"asset-request",rejected:!1},o).pipe(ts(()=>gt([])))),ze(i=>i.sort((s,r)=>s.name.localeCompare(r.name))),mi(i=>function i3t(t){for(const n of t)h1e.find(({id:e})=>e===n.id)||h1e.push(n)}(i)),jn(1)),this.category_list=this._org.active_building.pipe(nn(i=>function l1e(t={}){const n=zr(t);return la(`${Fr}/asset_categories${n?"?"+n:""}`).pipe(ze(e=>e))}({zone_id:i.id})),ze(i=>i.sort((s,r)=>s.name.localeCompare(r.name))),jn(1)),this.filtered_assets=Qt([this._search,this._category,this.available_groups,this.rules]).pipe(ze(([i,s,r,o])=>{const a=i.toLowerCase();return r.filter(c=>c.assets?.length&&(!s.length||s.includes(c.category_id))&&(c.name.toLowerCase().includes(a)||c.description.toLowerCase().includes(a))&&function r3t(t,n,e){const i=Date.now(),s=new Date(e.date),r=a=>t.name===a.name||t.category.name.includes(a.name)||e.resources.some(l=>l.zones.includes(a.name))||e.space?.zones.includes(a.name)||"*"===a.name,o=a=>a.rules.reduce((l,c)=>{switch(c[0]){case"is_before":return l+(vl(i,f1e(s,c[1]))?1:0);case"within_hours":return l+(cd(i,f1e(s,c[1]))?1:0);case"after_hour":return l+(cd(s,gG(s,c[1]))?1:0);case"before_hour":return l+(vl(s,gG(s,c[1]))?1:0);case"min_length":return l+(e.duration>=pB(c[1])?1:0);case"max_length":return l+(e.duration<=pB(c[1])?1:0);case"visitor_type":return l+(e.ext("visitor_type")===c[1]?1:0);default:return l+1}},0);for(const a of n)if(r(a)&&o(a)<a.rules.length)return!1;return!0}(c,o,this._options.getValue()))}),jn(1)),this.settings=Qt([this._org.active_building]).pipe(an(([i])=>!!i),nn(([i])=>uo(i.id,"assets-settings").pipe(ts(s=>gt({})))),ze(i=>i.details||{}),jn(1)),this.disabled_rooms=this.settings.pipe(ze(i=>i.disabled_rooms||[]))}setSearch(e){this._search.next(`${e}`)}toggleCategory(e){const i=this._category.getValue();i.includes(e)?this._category.next(i.filter(s=>s!==e)):this._category.next([...i,e])}getOptions(){return this._options.getValue()}setOptions(e){this._options.next({...this._options.value,...e})}static#e=this.\u0275fac=function(i){return new(i||t)(Re(In))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const o3t=["book/rooms","book/spaces","book/meeting","schedule/view","confirm/success","upcoming"];let Tm=(()=>{class t extends bn{get options_value(){return this._options.getValue()}get is_multiday(){return this._event.getValue()?.duration>1440}get view(){return this._view.getValue()}get form(){return this._form}get event(){return this._event.getValue()}get favorite_spaces(){return this._settings.get("favourite_spaces")||[]}get has_calendar(){return!0!==this._settings.get("app.events.use_bookings")}constructor(e,i,s,r,o,a){super(),this._org=e,this._router=i,this._payments=s,this._settings=r,this._assets=o,this._dialog=a,this._view=new Mt("form"),this._options=new Mt({zone_ids:[],features:[]}),this._form=function kLt(t=new ia,n){t||(t=new ia);const e=new ml({id:new _t(t.id),ical_uid:new _t(t.ical_uid),host:new _t(t.host||t.organiser?.email||fn()?.email||"",[$r.required]),organiser:new _t(t.organiser||new Io({email:t.host||""})),creator:new _t(t.creator||fn()?.email),calendar:new _t(t.calendar),attendees:new _t(t.attendees||[]),resources:new _t(t.resources||[]),title:new _t(t.title),body:new _t(t.body),private:new _t(t.private),date:new _t(t.date,[$r.required]),duration:new _t(t.duration,[t1e]),all_day:new _t(t.all_day),date_end:new _t(t.date_end),recurring:new _t(t.recurring),recurrence:new _t(t.recurrence),recurring_event_id:new _t(t.recurring_event_id),master:new _t(t.master),attachments:new _t(t.attachments),catering:new _t(t.extension_data?.catering),catering_notes:new _t(t.extension_data?.catering[0]?.notes||""),catering_charge_code:new _t(t.extension_data?.catering[0]?.charge_code||""),setup_time:new _t(t.setup_time||0),breakdown_time:new _t(t.breakdown_time||0),assets:new _t(t.extension_data?.assets),visitor_type:new _t(t.extension_data?.visitor_type),location:new _t(t.location),needs_space:new _t(!0),needs_parking:new _t(t.extension_data?.needs_parking||!1),event_type:new _t(t.extension_data?.event_type||""),category:new _t(t.extension_data?.category||""),tags:new _t(t.extension_data?.tags||[]),update_master:new _t(!1),system:new _t(t.system),attendance_type:new _t(t.extension_data?.attendance_type||"ONSITE"),timezone:new _t(t.timezone||IC),shared_event:new _t(t.extension_data?.shared_event||!1),view_access:new _t(t.extension_data?.view_access||"PRIVATE"),images:new _t(t.extension_data?.images||[]),featured:new _t(t.extension_data?.featured||!1)});e.get("organiser").valueChanges.subscribe(s=>e.controls.host.setValue(s?.email)),e.get("resources").valueChanges.subscribe(s=>{e.controls.system.setValue(s?.length?s[0]:null),e.controls.assets[s?.length?"enable":"disable"]()});const i=()=>{!e.value.catering?.length||!e.getRawValue().date||e.patchValue({catering:e.value.catering.map(s=>({...s,event:{date:e.value.all_day?Pi(e.getRawValue().date):e.getRawValue().date,duration:e.value.all_day?1440:e.value.duration}}))},{emitEvent:!1})};return e.valueChanges.subscribe(s=>{e.getRawValue().date<Date.now()&&e.value.id?e.get("date")?.disable({emitEvent:!1}):e.get("date")?.enable({emitEvent:!1}),(s.date||s.duration||s.all_day)&&i()}),e.controls.duration.valueChanges.subscribe(s=>{e.patchValue({date_end:Ou(li(e.getRawValue().date,s),{nearestTo:5,roundingMethod:"ceil"}).valueOf()},{emitEvent:!1}),i()}),e.controls.date_end.valueChanges.subscribe(s=>{s<li(e.getRawValue().date,30).valueOf()?e.patchValue({date_end:Ou(li(e.getRawValue().date,30),{nearestTo:5,roundingMethod:"ceil"}).valueOf(),duration:30},{emitEvent:!1}):e.patchValue({duration:_f(s,e.getRawValue().date)},{emitEvent:!1}),i()}),e.controls.date.valueChanges.subscribe(s=>{e.patchValue({date_end:Ou(li(s,e.value.duration),{nearestTo:5,roundingMethod:"ceil"}).valueOf()},{emitEvent:!1}),s<Date.now()&&!e.value.id&&e.patchValue({date:Ou(Date.now(),{nearestTo:5,roundingMethod:"ceil"}).valueOf()},{emitEvent:!1}),"custom_display"!==e.value.recurrence?._pattern&&"none"!==e.value.recurrence?._pattern&&e.patchValue({recurrence:{...e.value.recurrence,days_of_week:[new Date(s).getDay()]}}),i()}),e.controls.catering.valueChanges.subscribe(s=>{(e.getRawValue().catering||[])?.length&&(n?.get("app.events.catering_notes_required")||n.value("require_catering_notes"))?(e.get("catering_notes")?.setValidators([$r.required]),e.get("catering_notes").patchValue(e.value.catering_notes)):(e.get("catering_notes")?.clearValidators(),e.get("catering_notes").setErrors(null)),e.updateValueAndValidity()}),e.get("catering_charge_code").setValidators([ILt(e.get("catering"))]),t.id&&(e.get("host").disable(),e.get("organiser").disable()),"started"===t.state&&e.get("date").disable(),e}(void 0,this._settings),this._date=new Mt(Date.now()),this._event=new Mt(null),this._loading=new Mt(""),this._changed=new Mt(0),this.last_success=new ia(JSON.parse(sessionStorage.getItem("PLACEOS.last_booked_event")||"{}")),this.loading=this._loading.asObservable(),this.options=this._options.asObservable(),this.booking_rules=this._org.building_list.pipe(nn(c=>Promise.all(c.map(u=>uo(u.id,"room_booking_rules").toPromise()))),ze(c=>{const u={};for(const d of c)u[d.id]=d.details instanceof Array?d.details:[];return u}),jn(1)),this.spaces=Qt([this._options.pipe(hG("zone_ids")),this._org.active_building.pipe(an(c=>!!c),hG("id"))]).pipe(hs(300),mi(c=>this.unsubWith("bind:")),nn(([{zone_ids:c}])=>{this._loading.next("Loading space list for location...");const u=this._settings.get("app.use_region");return c?.length||(c=[(u?this._org.building?.parent_id:this._org.building?.id)||this._org.building?.id]),hp(c.map(d=>function cue(t){return t?(sA[t]||(sA[t]=eC({zone_id:t,limit:500}).pipe(ze(n=>(n.data||[]).map(e=>new Cl(e))),mi(n=>cce(n)),jn(1))),sA[t]):gt([])}(d).pipe(ts(()=>gt([])))))}),ze(c=>To(c)),mi(c=>this._loading.next("")),jn(1)),this.features=this.spaces.pipe(ze(c=>Cs(To(c.map(u=>u.features))))),this.filtered_spaces=Qt([this.spaces,this.options]).pipe(ze(([c,{show_fav:u,features:d,capacity:h}])=>c.filter(f=>{const p=(fn()?.email||"@").split("@")[1],g=(this._settings.get("app.events.restrict_spaces")||{})[p],v=this._settings.get("app.events.limit_spaces")||{},y=Object.keys(v),w=f.zones.find(E=>y.includes(E));return f.bookable&&(!g||f.zones.includes(g))&&(!w||v[w]===p)&&(!u||this.favorite_spaces.includes(f.id))&&d.every(E=>f.features.includes(E))&&f.capacity>=Math.max(0,h||0)}).slice(0,Math.min(100,c.length))),jn(1)),this._space_bookings=Qt([this.spaces,this.filtered_spaces]).pipe(D_(([c],[u])=>c!==u),nn(([c,u])=>Qt((u||[]).map(d=>{const h=Vr(d.id,"Bookings").binding("bookings"),f=h.listen().pipe(ze(p=>(p||[]).map(g=>new ia(g))));return this.hasSubscription(`bind:${d.id}`)||this.subscription(`bind:${d.id}`,h.bind()),f}))),jn(1)),this.current_available_spaces=Qt([this.filtered_spaces,this._space_bookings,this.booking_rules,Zs(this.form.valueChanges,pD(1e3)),this._changed]).pipe(hs(300),ze(([c,u,d])=>{this._loading.next("Updating available spaces...");let{ical_uid:h,date:f,duration:p,all_day:g}=this._form.getRawValue();return((c=mB(c,{date:f,duration:p,resource:null,host:fn()},d[this._org.building?.id]||[]))||[]).filter((v,y)=>{const w=g?Pi(f).valueOf():f,E=w+6e4*(g?Math.max(1440,p):p);let T=u[y]||[];return this.last_success?.system?.id===v.id&&(T=[...T,this.last_success]),function DFt(t,n,e,i=29){const s=function Uye(t,n=29){let e=new Date(0);const i=[];t.sort((r,o)=>r.date-o.date);for(const r of t){const o=new Date(li(r.date,-r.extension_data?.setup_time||0)),a=li(r.date,r.duration+(r.extension_data?.breakdown_time||0));cd(r.date,e)?(Math.abs(_f(o,e))>=n&&i.push({start:e.valueOf(),end:r.date}),e=a):xFt(e,r.date)&&(e=a)}const s=e.valueOf();return i.push({start:s,end:10*(s||Date.now())}),i}(e,i);for(const r of s)if(t>=r.start&&t<r.end&&n>r.start&&n<=r.end)return!0;return!1}(w,E,T.filter(L=>L.ical_uid!==h))}).sort((v,y)=>v.capacity-y.capacity)}),mi(c=>this._loading.next("")),jn(1)),this.future_available_spaces=Qt([this.filtered_spaces,this.booking_rules,this.form.valueChanges.pipe(hs(400),So({}))]).pipe(an(()=>!this._loading.getValue()),hs(300),nn(([c,u])=>{if(!c.length)return gt([]);this._loading.next("Retrieving available spaces...");let{date:d,duration:h,all_day:f}=this._form.getRawValue();return(this.has_calendar?e1e:Kye)((c=mB(c,{date:d,duration:h,resource:null,host:fn()},u[this._org.building?.id]||[])).map(({id:g})=>g),f?Pi(d).valueOf():d,f?Math.max(1440,h):h,this?.event?.resources[0]?.id||this.event?.system?.id||this.event?.id||void 0,void 0,[this.event?.date,this.event?.duration]).pipe(ze(g=>{var v=c.filter((y,w)=>g[w]);return mB(v,{date:d,duration:h,resource:null,host:fn()},u[this._org.building?.id]||[])}),ts(g=>[]))}),mi(c=>this._loading.next("")),jn(1)),this.available_spaces=this._date.pipe(nn(c=>{const u=Math.abs(function aLt(t,n){const e=Hn(t),i=Hn(n),s=Wye(e,i),r=Math.abs(aae(e,i));e.setDate(e.getDate()-s*r);const a=s*(r-+(Wye(e,i)===-s));return 0===a?0:a}(c,Date.now()));return u<(this._settings.get("app.events.cache_duration_in_days")||14)?this.current_available_spaces:this.future_available_spaces}),jn(1)),this.cancelPostForm=()=>this.unsub("post-event-form"),this._space_pipe=new au(this._org),this.subscription("router.events",this._router.events.subscribe(c=>{c instanceof su&&!o3t.some(u=>c.url.includes(u))&&this.clearForm()}));const l={};this.subscription("form_change",this._form.valueChanges.subscribe(({date:c,duration:u})=>{(c&&c!==l.date||u&&u!==l.duration)&&(this._assets.setOptions({date:this.form.value.date,duration:this.form.value.duration}),l.date=c,l.duration=u),c&&c!==this._date.getValue()&&this._date.next(c),this.storeForm()}))}listenForStatusChanges(){this.subscription("status:rooms",this.available_spaces.subscribe())}setView(e){this.timeout("set_view",()=>this._view.next(e),50)}setOptions(e){this._options.next({...this._options.getValue(),...e})}newForm(e=new ia({all_day:this._settings.get("app.events.all_day_default")})){var i=this;return de(function*(){if(i._event.next(e),e.recurring_event_id){const s=yield Zye(e.recurring_event_id).toPromise().catch(r=>null);s&&(i._event.getValue().recurrence={...s.recurrence,_pattern:s.recurrence.pattern})}i._assets.setOptions({ignore:To(e.linked_bookings?.map(s=>s.asset_ids||[s.asset_id])||[])});for(const s in e.resources){const r=e.resources[s];e.resources[s]=yield i._space_pipe.transform(r.id||r.email)}i._date.next(e.date),i.timeout("post-event-form",()=>{i._form.patchValue({date:e.date||i._form.value.date})},1e3),i.resetForm()})()}resetForm(){this._form.reset();const e=this._event.getValue()||{extension_data:{}};this._assets.setOptions({ignore:To(e.linked_bookings?.map(s=>s.asset_ids||[s.asset_id])||[])});const i=!!e.extension_data.catering[0];this._form.patchValue({...e.extension_data,...e,duration:e.duration>=720?30:e.duration,organiser:e?.organiser||fn()||new Io({email:e?.host}),catering_charge_code:e.extension_data.catering[0]?.charge_code||(e.id&&i?" ":""),assets:(e.extension_data.assets||[]).map(s=>new Nu({...s,event:e}))}),this._form.patchValue({date:e.date||this._form.value.date,date_end:e.date_end||this._form.value.date_end}),this._options.next({features:[]}),this.storeForm()}clearForm(){sessionStorage.removeItem("PLACEOS.event_form"),this.unsubWith("status:"),this.unsubWith("bind:"),this.newForm()}storeForm(){sessionStorage.setItem("PLACEOS.event_form",JSON.stringify(this._form.getRawValue()||{}))}loadForm(){if(!sessionStorage.getItem("PLACEOS.event_form"))return this.newForm();const e=JSON.parse(sessionStorage.getItem("PLACEOS.event_form")||"{}");e.id&&e.id!==this._event.getValue()?.id&&Zye(e.id).subscribe(i=>{this._event.next(i),this._assets.setOptions({ignore:To(i.linked_bookings?.map(s=>s.asset_ids||[s.asset_id])||[])})}),this._form.patchValue({...e})}openEventLinkModal(e=!1){const i=this._form;if(i.markAllAsTouched(),!i.valid&&!e)return;const s=new ia({...i.getRawValue(),assets:[]});this._dialog.open(a1e,{data:s}).afterClosed().subscribe(o=>o?this._router.navigate(["/"]):"")}postForm(e=!1,i=[],s=!1){var r=this;return new Promise(function(){var o=de(function*(a,l){r._loading.next("Creating event...");const c=r._form;c.markAllAsTouched();const u=r.event||new ia;if(!c.valid&&!e)return r._loading.next(""),l(`Some form fields are invalid. [${dC(c).join(", ")}]`);const d=r.event?.ical_uid;let h=r._form.getRawValue(),{id:f,host:p,date:g,duration:v,creator:y,all_day:w,assets:E,recurrence:T}=h,L=c.get("resources")?.value||[];i.length&&(L=L.filter(Ve=>!i.includes(Ve.email)&&!i.includes(Ve.id)));let W=c.get("catering")?.value||[];T?._pattern&&"none"!==T?._pattern&&(r.form.patchValue({recurring:!0}),h=r._form.getRawValue());let H=!1,P=L.some(Ve=>!u.resources?.find(tt=>tt.id===Ve.id));(!f||g!==u.date||v!==u.duration)&&L.length&&(H=!0,yield r.checkSelectedSpacesAreAvailable(L,w?Pi(g).valueOf():g,w?Math.max(1440,v):v,d||f||"").catch(Ve=>{throw r._loading.next(""),l(Ve),Ve})),L=c.get("resources")?.value||[];const X=p===fn()?.email||y===fn()?.email;if(!L.length&&r._settings.get("app.events.no_space_resource")){const Ve=yield r._space_pipe.transform(r._settings.get("app.events.no_space_resource"));L.push(Ve)}const ne=Cs([...h.attendees,h.organiser||fn()],"email");if(!L.length&&ne.find(Ve=>Ve.is_external)){r._loading.next("");const Ve="External attendees require a space to be booked";throw l(Ve),Ve}const me=L[0]?.id,Ee=f?{system_id:r.event?.resources[0]?.id||r.event?.system?.id||me}:{};if(X&&!s&&(Ee.calendar=p||y),r._payments.payment_module&&L.length){const Ve=yield r._payments.makePayment({type:"space",resource_name:L[0].display_name||L[0].name,date:g,duration:v,all_day:w});if(!Ve?.success)return r._loading.next("");h.extension_data={invoice:Ve,invoice_id:Ve.invoice_id}}const Te=h.date;for(const Ve of W)Ve.notes=h.catering_notes,Ve.charge_code=h.catering_charge_code;if(L.length){let[Ve,tt]=[0,0];for(const St of L){const mt=r._settings.get(`app.events.overflow.${St.id}`);mt?.setup&&(Ve=mt.setup),mt?.breakdown&&(tt=mt.breakdown)}h.setup=h.setup_time||Ve,h.breakdown=h.breakdown_time||tt}const $e=(E||[]).map(Ve=>new Nu(Ve).toJSON()),Xe=yield r._makeBooking(new ia({...h,old_system:r.event?.system,host:r._settings.get("app.events.force_host")||(r._settings.get("app.events.room_as_host")?h.resources[0].email:"")||h.host,title:h.title||"Space Booking",attendees:ne.map(Ve=>{const tt={...Ve};return delete tt.visit_expected,tt}),date:Te,catering:W,assets:$e,extension_data:r._settings.get("app.events.force_host")||r._settings.get("app.events.room_as_host")?{host_override:h.host,department:h.organiser?.department||fn()?.department}:{department:h.organiser?.department||fn()?.department}}),Ee).catch(Ve=>{throw l(Ve),r._loading.next(""),Ve}),Ce=(fn()?.email||"@").split("@")[1],Fe=ne.filter(Ve=>Ve.is_external&&Ve.email!==u.host&&!Ve.email.includes(Ce)&&Ve.visit_expected);let Ie=!1;const He=function(){var Ve=de(function*(tt){if(r.form.value.id){if(Ie)return void Mi(`Unable to update all asset requests for event.\n${tt}`)}else yield function yLt(t,n={}){const e=zr(n);return QD(`${Dl}/${encodeURIComponent(t)}${e?"?"+e:""}`,{response_type:"void"})}(Xe.id,L.length?{calendar:r.form.value.host||fn()?.email,system_id:L[0].id}:{}).toPromise(),console.warn("Couldn't update asset requests",tt),Mi(409===tt?.status?"Some assets are already booked for the selected time":"Unable to book the selected assets.");throw r._loading.next(""),tt});return function(St){return Ve.apply(this,arguments)}}();if(Fe.length&&(yield function fLt(t,n,e){return mG.apply(this,arguments)}(Xe,"visitor",Fe).catch(He)),E?.length||u.extension_data.assets?.length){Ie=!0;const Ve=yield function u1e(t,n){return wG.apply(this,arguments)}(Xe,{date:g,duration:v,host:p,all_day:w,location_name:L[0]?.display_name||L[0]?.name||"",location_id:L[0]?.id||"",zones:L[0]?.level?.parent_id?Cs([r._org.organisation.id,r._org.region?.id,L[0]?.level?.parent_id,L[0]?.level?.id]).filter(tt=>!!tt):[r._org.building?.id],reset_state:H},E,P||H).catch(He);if(!Ve)throw"Unable to validate asset requests";yield Ve(),Ie=!1}r.clearForm(),r.last_success=Xe,sessionStorage.setItem("PLACEOS.last_booked_event",JSON.stringify(Xe)),r.setView("success"),r.timeout("post_finshed",()=>r._changed.next(Date.now())),a(Xe),r._loading.next("")});return function(a,l){return o.apply(this,arguments)}}())}_makeBooking(e,i){var s=this;return de(function*(){return s._updateVisitorList(e.attendees),(s.has_calendar?((t,n)=>{const e=t.update_master&&t.recurring_event_id||t.id;return delete t?.status,e?function vLt(t,n,e={},i="patch"){const s=zr(e);return("patch"===i?ZD:YD)(`${Dl}/${encodeURIComponent(t)}${s?"?"+s:""}`,new ia(n).toJSON()).pipe(ze(r=>new ia(r)))}(e,{...t,id:e},n):function bLt(t){return dy(`${Dl}`,new ia(t).toJSON()).pipe(ze(n=>new ia(n)))}(t)})(e,i):((t,n)=>{const e=t.id;return delete t.id,e?function dLt(t,n,e="patch"){return("patch"===e?ZD:YD)(`${Ba}/${encodeURIComponent(t)}`,n).pipe(ze(i=>new il(i)))}(e,t):fG(t,n)})(function NLt(t){return new il({id:t.id,user_email:t.host,asset_id:t.system?.id,asset_name:t.system?.display_name||t.system?.name,booking_type:"room",approved:"approved"===t.status,extension_data:{...t}})}({...e.toJSON(),status:s._settings.get("app.bookings.no_approval")?"approved":"tentative"})).pipe(ze(r=>function DLt(t){let n=[{id:t.user_id,name:t.user_name,email:t.user_email,organizer:!0}];return"visitor"===t.booking_type&&n.push(new Io({name:t.asset_name||t.description,email:t.asset_id,checked_in:t.checked_in})),n=n.concat(t.attendees),new ia({...t,...t.extension_data,attendees:n,id:t.id||t.extension_data.id,host:t.user_email,from_bookings:!0})}(r)))).toPromise()})()}checkSelectedSpacesAreAvailable(e,i,s,r){var o=this;return de(function*(){if(!e?.length)return!0;if(o.has_calendar){if(!(yield e1e(e.map(({id:l})=>l),i,s,o?.event?.resources[0]?.id||o.event?.system?.id||o.event?.id||void 0,0,[o.event?.date,o.event?.duration]).toPromise()).every(l=>l))throw(e.length>1?"The selected space":"Some of the selected spaces")+" is not available at the selected time"}else if(!(yield Kye(e.map(l=>l.id),i,s,r).toPromise()).every(l=>l))throw(e.length>1?"The selected space":"Some of the selected spaces")+" are not available at the selected time";return!0})()}_updateVisitorList(e){const i=e.filter(r=>r.is_external);if(!i?.length)return;const s=this._settings.get("visitor-invitees")||[];this._settings.saveUserSetting("visitor-invitees",Cs([...s.filter(r=>!r.includes(r.email)),...i.map(r=>`${r.email}|${r.name}|${r.organisation}`)]))}static#e=this.\u0275fac=function(i){return new(i||t)(Re(In),Re(Hr),Re(n1e),Re(ln),Re(p1e),Re(wr))};static#t=this.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function l3t(t,n){if(1&t){const e=Le();m(0,"space-list",29),te("toggleFav",function(s){return re(e),oe(M().toggleFavourite(s))})("onSelect",function(s){return re(e),oe(M().displayed=s)}),_()}if(2&t){const e=M();S("active",null==e.displayed?null:e.displayed.id)("selected",e.selected_ids)("favorites",e.favorites)}}function c3t(t,n){if(1&t){const e=Le();m(0,"button",30),te("click",function(){return re(e),oe(M().displayed=null)}),Ne(1,5),_()}}function u3t(t,n){if(1&t){const e=Le();m(0,"space-map",31),te("onSelect",function(s){return re(e),oe(M().displayed=s)}),_()}if(2&t){const e=M();S("selected",e.selected_ids)("is_displayed",!!e.displayed)("active",null==e.displayed?null:e.displayed.id)}}let CG=(()=>{class t{get selected_ids(){return this.selected.map(e=>e.id).join(",")}get favorites(){return this._settings.get("favourite_spaces")||[]}constructor(e,i,s,r){this._dialog_ref=e,this._settings=i,this._event_form=s,this._data=r,this.selected=[],this.view="list",this.multiday=!!this._data.multiday,this.selected=[...r.spaces||[]],this._event_form.setOptions(r.options)}isSelected(e){return e&&this.selected_ids.includes(e)}setSelected(e,i){const s=this.selected.filter(r=>r.id!==e.id);i&&s.push(e),this.selected=s,!this._settings.get("app.events.allow_multiple_spaces")&&i&&(this.selected=[e],this._dialog_ref.close([e]))}toggleFavourite(e){const i=this.favorites;i.includes(e.id)?this._settings.saveUserSetting("favourite_spaces",i.filter(r=>r!==e.id)):this._settings.saveUserSetting("favourite_spaces",[...i,e.id])}static#e=this.\u0275fac=function(i){return new(i||t)(D(Da),D(ln),D(Tm),D(Js))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["new-space-select-modal"]],decls:39,vars:29,consts:()=>{let e,i,s,r,o;return e=$localize`:␟2a8f5812e693119f28847362c97c1924c4b5e2ad␟3245405487284732016:Find Space`,i=$localize`:␟30d3439b0e0095fe69503245f3bd7a2e9498be7c␟8443571736703532556: View List `,s=$localize`:␟18843b85d1a4f17fefafd07bc5cde636dca44295␟819716823718458903:Back to form`,r=$localize`:␟7651117c4dcb18eb274657230a366a428c9a113b␟8164592885301950366: ${"\ufffd0\ufffd"}:INTERPOLATION: room(s) added `,o=$localize`:␟ccda1d41ca79703a85a3a598c1d97e040a32b766␟874721418273731876: Back `,[["map_view",""],e,i,s,r,o,[1,"w-[100vw]","h-[100vh]","sm:relative","sm:w-auto","sm:h-auto","flex","flex-col","bg-base-100"],[1,"flex","items-center","space-x-4","w-full"],["icon","","matRipple","","mat-dialog-close","",1,"bg-base-200"],[1,"hidden","sm:flex","items-center","justify-end","flex-1"],["btn","","matRipple","","map","",1,"rounded-l","rounded-r-none",3,"click"],["btn","","matRipple","","list","",1,"rounded-r","rounded-l-none",3,"click"],[1,"flex-1","flex","items-center","divide-x","divide-base-200","min-h-[65vh]","h-[65vh]","sm:max-h-[65vh]","sm:max-w-[95vw]","w-full","overflow-hidden"],[1,"h-full","hidden","sm:flex","max-w-[20rem]","sm:h-[65vh]","sm:max-h-full",3,"multiday","hide_levels","viewing_map"],[1,"flex","flex-col","items-center","flex-1","w-1/2","h-full","sm:h-[65vh]"],[1,"w-full","border-b","border-base-200",3,"viewChange","view"],["class","flex-1 h-1/2 bg-base-200",3,"active","selected","favorites","toggleFav","onSelect",4,"ngIf","ngIfElse"],[1,"h-full","w-full","sm:h-[65vh]","absolute","sm:relative","flex","sm:flex-col","sm:max-w-[20rem]","z-20","bg-base-100",3,"activeChange","toggleFav","close","space","hide_map","active","fav"],[1,"flex","sm:hidden","flex-col-reverse","items-center","justify-end","px-2","pt-2","pb-[5.5rem]","border-t","border-base-200","w-full"],["btn","","matRipple","","name","spaces-return","class","inverse sm:hidden w-full",3,"click",4,"ngIf"],["btn","","matRipple","","name","save-spaces",1,"w-full","sm:w-32","sm:mb-0",3,"mat-dialog-close"],[1,"hidden","sm:flex","items-center","justify-between","p-2","border-t","border-base-200","w-full"],["btn","","matRipple","","name","spaces-return",1,"clear","text-secondary",3,"mat-dialog-close"],[1,"flex","items-center"],[1,"text-xl"],[1,"mr-1","underline"],[1,"opacity-60","text-sm"],["btn","","matRipple","","name","toggle-space",3,"click","disabled"],[1,"mr-1"],[1,"flex-1","h-1/2","bg-base-200",3,"toggleFav","onSelect","active","selected","favorites"],["btn","","matRipple","","name","spaces-return",1,"inverse","sm:hidden","w-full",3,"click"],[1,"flex-1","h-1/2","w-full",3,"onSelect","selected","is_displayed","active"]]},template:function(i,s){if(1&i){const r=Le();m(0,"div",6)(1,"header",7)(2,"button",8)(3,"app-icon"),C(4,"close"),_()(),m(5,"h3"),Ne(6,1),_(),m(7,"div",9)(8,"button",10),te("click",function(){return re(r),oe(s.view="map")}),C(9," Map "),_(),m(10,"button",11),te("click",function(){return re(r),oe(s.view="list")}),C(11," List "),_()()(),m(12,"main",12),be(13,"space-filters",13),m(14,"div",14)(15,"space-filters-display",15),Gn("viewChange",function(a){return re(r),Fn(s.view,a)||(s.view=a),oe(a)}),_(),K(16,l3t,1,3,"space-list",16),_(),m(17,"space-details",17),te("activeChange",function(a){return re(r),oe(s.setSelected(s.displayed,a))})("toggleFav",function(){return re(r),oe(s.toggleFavourite(s.displayed))})("close",function(){return re(r),oe(s.displayed=null)}),_()(),m(18,"footer",18),K(19,c3t,2,0,"button",19),m(20,"button",20),Ne(21,2),_()(),m(22,"footer",21)(23,"button",22)(24,"div",23)(25,"app-icon",24),C(26,"arrow_back"),_(),m(27,"div",25),Ne(28,3),_()()(),m(29,"p",26),Ne(30,4),_(),m(31,"button",27),te("click",function(){return re(r),oe(s.setSelected(s.displayed,!s.isSelected(null==s.displayed?null:s.displayed.id)))}),m(32,"div",23)(33,"app-icon",24),C(34),_(),m(35,"div",28),C(36),_()()()()(),K(37,u3t,1,3,"ng-template",null,0,mn)}if(2&i){const r=Gt(38);b(8),rt("inverse","map"!==s.view),b(2),rt("inverse","list"!==s.view),b(3),S("multiday",s.multiday)("hide_levels","list"!==s.view)("viewing_map","map"===s.view),b(2),Un("view",s.view),b(),S("ngIf","list"===s.view)("ngIfElse",r),b(),rt("hidden",!s.displayed)("inset-0",s.displayed),S("space",s.displayed)("hide_map","map"===s.view)("active",s.selected_ids.includes(null==s.displayed?null:s.displayed.id))("fav",s.displayed&&s.favorites.includes(null==s.displayed?null:s.displayed.id)),b(2),S("ngIf",s.displayed),b(),rt("mb-2",s.displayed),S("mat-dialog-close",s.selected),b(3),S("mat-dialog-close",s.selected),b(7),$n(s.selected.length),zn(30),b(),rt("inverse",s.isSelected(null==s.displayed?null:s.displayed.id)),S("disabled",!s.displayed),b(3),vt(s.isSelected(null==s.displayed?null:s.displayed.id)?"remove":"add"),b(2),xe(" ",s.isSelected(null==s.displayed?null:s.displayed.id)?"Remove from Booking":"Add to booking"," ")}}})}return t})();const d3t=()=>({standalone:!0});function h3t(t,n){1&t&&be(0,"img",30),2&t&&S("source",M().$implicit.images[0])}function f3t(t,n){1&t&&be(0,"img",31)}function p3t(t,n){if(1&t){const e=Le();m(0,"div",18)(1,"div",19),K(2,h3t,1,1,"img",20)(3,f3t,1,0,"ng-template",null,0,mn),_(),m(5,"div",21)(6,"div",22),C(7),_(),m(8,"div",23)(9,"app-icon",24),C(10,"place"),_(),m(11,"p"),C(12),_()(),m(13,"div",23)(14,"app-icon",24),C(15,"people"),_(),m(16,"p"),Ne(17,6),_()(),m(18,"div",25)(19,"button",26),te("click",function(){const s=re(e).$implicit;return oe(M().changeSpaces(s))}),m(20,"div",27),Ri(21,7),be(22,"app-icon"),Fi(),_()(),m(23,"button",28),te("click",function(){const s=re(e).$implicit;return oe(M().removeSpace(s))}),m(24,"div",27),Ri(25,8),be(26,"app-icon"),Fi(),_()()()(),m(27,"button",29),te("click",function(){const s=re(e).$implicit;return oe(M().toggleFavourite(s))}),m(28,"app-icon"),C(29),_()()()}if(2&t){let e;const i=n.$implicit,s=Gt(4),r=M();b(2),S("ngIf",null==i.images?null:i.images.length)("ngIfElse",s),b(5),xe(" ",i.display_name||i.name||"Meeting Space"," "),b(5),xe(" ",i.location||(null==(e=r.level(i.zones))?null:e.display_name)||(null==(e=r.level(i.zones))?null:e.name)," "),b(5),$n(i.capacity<1?2:i.capacity)(i.capacity),zn(17),b(10),rt("text-blue-400",r.favorites.includes(null==i?null:i.id)),b(2),vt(r.favorites.includes(null==i?null:i.id)?"favorite":"favorite_border")}}const m3t=[];let m1e=(()=>{class t{get favorites(){return this._settings.get("favourite_spaces")||m3t}constructor(e,i,s){this._settings=e,this._org=i,this._dialog=s,this.multiday=!1,this.room_size=4,this.spaces=new Mt([]),this.space_list=this.spaces.pipe(hs(300)),this.disabled=!1,this.registerOnChange=r=>this._onChange=r,this.registerOnTouched=r=>this._onTouch=r,this.setDisabledState=r=>this.disabled=r}ngOnDestroy(){this._dialog_ref&&this._dialog_ref.close()}level(e){return this._org.levelWithID(e)}changeSpaces(){this._dialog_ref=this._dialog.open(CG,{data:{spaces:this.spaces.getValue(),options:{capacity:this.room_size},multiday:this.multiday}}),this._dialog_ref.afterClosed().subscribe(()=>{this.setValue(this._dialog_ref?.componentInstance?.selected),this._dialog_ref=void 0})}removeSpace(e){this.setValue(this.spaces.getValue().filter(i=>i.id!==e.id))}setValue(e){this.spaces.next(e||[]),this._onChange&&this._onChange(e||[])}writeValue(e){this.spaces.next(e||[])}toggleFavourite(e){if(!e?.id)return;const i=this.favorites;i.includes(e.id)?this._settings.saveUserSetting("favourite_spaces",i.filter(r=>r!==e.id)):this._settings.saveUserSetting("favourite_spaces",[...i,e.id])}static#e=this.\u0275fac=function(i){return new(i||t)(D(ln),D(In),D(wr))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["space-list-field"]],inputs:{multiday:"multiday"},features:[Lt([{provide:qi,useExisting:Cn(()=>t),multi:!0}])],decls:23,vars:9,consts:()=>{let e,i,s,r,o,a,l,c,u;return e=$localize`:␟1b75f93ee5764eaf4e3e5b35f9142aa730286aba␟2378084019110582405:Select Room Size${"\ufffd#5\ufffd"}:START_TAG_SPAN:*${"\ufffd/#5\ufffd"}:CLOSE_TAG_SPAN:`,i=$localize`:␟9a4b4695fcd5f591ff27d32d69654210c1edbce8␟5941148565596549711: Min. 2 People `,s=$localize`:␟c08792b3fa94dc973ac18033a872580a83beded9␟5844713600133557099: Min. 4 People `,r=$localize`:␟94d037a05d336158339e193309f967a769878040␟694015482067564775: Min. 10 People `,o=$localize`:␟2a4f48e169dc20ba9ed88d3bfe38f47ecc9204e6␟4961016996305563664:Add Space`,a=$localize`:␟ed210c8c0f2511082633f06a2c94b8410f6cd9bf␟426413428618668868:{VAR_PLURAL, plural, =1 {Person } other {People
                            }}`,a=o_(a,{VAR_PLURAL:"\ufffd1\ufffd"}),l=$localize`:␟ddc17cbb67fd49c13c14733c877b09fb9bd86d87␟686822217414553756: ${"\ufffd0\ufffd"}:INTERPOLATION: ${a}:ICU: `,c=$localize`:␟ca9092fdbbb85e5828de77fdf85c49b918cec128␟559636443235347532:${"\ufffd#22\ufffd"}:START_TAG_APP_ICON:edit${"\ufffd/#22\ufffd"}:CLOSE_TAG_APP_ICON: Change `,u=$localize`:␟a386ba350cdee69beeb12a908d96f0724ddc2054␟2582674642057285571:${"\ufffd#26\ufffd"}:START_TAG_APP_ICON:close${"\ufffd/#26\ufffd"}:CLOSE_TAG_APP_ICON: Remove `,[["placeholder",""],e,i,s,r,o,l,c,u,[1,"flex","items-center","flex-wrap","sm:space-x-2","mb-2"],[1,"flex-1","min-w-[256px]","space-y-2"],[1,"flex","items-center"],["aria-label","Select Room Size",1,"space-x-4",3,"ngModelChange","ngModel","ngModelOptions"],[3,"value"],["list","",1,"space-y-2"],["space","","class","relative p-2 rounded-lg w-full flex items-center shadow border border-base-200",4,"ngFor","ngForOf"],["btn","","matRipple","","name","add-space",1,"w-full","inverse","mt-2",3,"click"],[1,"flex","items-center","justify-center","space-x-2"],["space","",1,"relative","p-2","rounded-lg","w-full","flex","items-center","shadow","border","border-base-200"],[1,"w-24","h-24","rounded-xl","bg-base-200","mr-4","overflow-hidden","flex","items-center","justify-center"],["auth","","class","min-h-full object-cover",3,"source",4,"ngIf","ngIfElse"],[1,"sm:space-y-2","pb-4"],[1,"font-medium"],[1,"flex","items-center","text-sm","space-x-2"],[1,"text-blue-500"],[1,"absolute","bottom-0","right-0","flex","items-center","justify-end","text-xs"],["btn","","matRipple","","name","edit-space",1,"clear",3,"click"],[1,"flex","items-center","space-x-2"],["btn","","matRipple","","name","remove-space",1,"clear",3,"click"],["icon","","matRipple","","name","toggle-space-favourite",1,"absolute","top-1","right-1",3,"click"],["auth","",1,"min-h-full","object-cover",3,"source"],["src","assets/icons/room-placeholder.svg",1,"m-auto"]]},template:function(i,s){1&i&&(m(0,"div")(1,"div",9)(2,"div",10)(3,"label"),Ri(4,1),be(5,"span"),Fi(),_(),m(6,"div",11)(7,"mat-radio-group",12),Gn("ngModelChange",function(o){return Fn(s.room_size,o)||(s.room_size=o),o}),m(8,"mat-radio-button",13),Ne(9,2),_(),m(10,"mat-radio-button",13),Ne(11,3),_(),m(12,"mat-radio-button",13),Ne(13,4),_()()()()()(),m(14,"div",14),K(15,p3t,30,9,"div",15),ge(16,"async"),_(),m(17,"button",16),te("click",function(){return s.changeSpaces()}),m(18,"div",17)(19,"app-icon"),C(20,"search"),_(),m(21,"span"),Ne(22,5),_()()()),2&i&&(b(7),Un("ngModel",s.room_size),S("ngModelOptions",pn(8,d3t)),b(),S("value",1),b(2),S("value",4),b(2),S("value",10),b(3),S("ngForOf",Me(16,6,s.space_list)))}})}return t})();var _3t=Y(55);const g3t=["container"],b3t=["editor"];let _1e=(()=>{class t extends bn{constructor(){super(...arguments),this.placeholder="",this.readonly=!1,this._updateFn=()=>this.setValue(this._editor.root.innerHTML),this.registerOnChange=e=>this._onChange=e,this.registerOnTouched=e=>this._onTouch=e}ngOnChanges(e){}ngAfterViewInit(){this._initialiseEditor()}setValue(e){this._onChange&&this._onChange(e)}writeValue(e){this.timeout("write",()=>{if(this._editor){const i=this._editor.clipboard.convert(e);this._editor.setContents(i,"silent")}else this.timeout("write",()=>this.writeValue(e))})}_initialiseEditor(){this._editor=new _3t(this._editor_el.nativeElement,{bounds:this._container_el.nativeElement,placeholder:this.placeholder,modules:{toolbar:[[{size:["small",!1,"large","huge"]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}]]},readOnly:this.readonly,theme:"snow"}),this._editor.on("text-change",this._updateFn),this.subscription("changes",()=>this._editor.off("text-change",this._updateFn))}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=Pn(t)))(s||t)}})();static#t=this.\u0275cmp=Qe({type:t,selectors:[["rich-text-input"]],viewQuery:function(i,s){if(1&i&&(Zt(g3t,5),Zt(b3t,5)),2&i){let r;xt(r=Et())&&(s._container_el=r.first),xt(r=Et())&&(s._editor_el=r.first)}},inputs:{placeholder:"placeholder",readonly:"readonly"},features:[Lt([{provide:qi,useExisting:Cn(()=>t),multi:!0}]),bt,On],decls:4,vars:0,consts:[["container",""],["editor",""]],template:function(i,s){1&i&&(m(0,"div",null,0),be(2,"div",null,1),_())}})}return t})();const k3t=["image_list"],D3t=["file_input"];function M3t(t,n){if(1&t){const e=Le();m(0,"div",17),be(1,"img",18),m(2,"div",19),be(3,"div",20),m(4,"div",21)(5,"button",22),te("click",function(){const s=re(e).$implicit;return oe(M().copyLink(s))}),m(6,"app-icon"),C(7,"link"),_()(),m(8,"button",22),te("click",function(){const s=re(e).$implicit;return oe(M().viewImage(s))}),m(9,"app-icon"),C(10,"visibility"),_()(),m(11,"button",22),te("click",function(){const s=re(e).$implicit;return oe(M().removeImage(s))}),m(12,"app-icon"),C(13,"close"),_()()()()()}if(2&t){const e=n.$implicit;Wn("transform","translate(-"+M().offset+"00%)"),b(),S("source",e)}}function A3t(t,n){1&t&&be(0,"mat-progress-spinner",27),2&t&&S("value",M().$implicit.progress)("diameter",64)}function O3t(t,n){1&t&&(m(0,"app-icon",28),C(1,"warning"),_())}function N3t(t,n){1&t&&(m(0,"div",29)(1,"app-icon",30),C(2,"refresh"),_()())}function R3t(t,n){if(1&t){const e=Le();m(0,"div",23),te("click",function(){const s=re(e).$implicit;return oe(M().retryUpload(s))}),K(1,A3t,1,2,"mat-progress-spinner",24)(2,O3t,2,0,"app-icon",25)(3,N3t,3,0,"div",26),_()}if(2&t){const e=n.$implicit;Wn("transform","translate(-"+M().offset+"00%)"),S("matTooltip",e.error),b(),S("ngIf",!e.error),b(),S("ngIf",e.error),b(),S("ngIf",e.error)}}function F3t(t,n){if(1&t){const e=Le();m(0,"button",31),te("click",function(){re(e);const s=M();return oe(s.offset=s.offset-1)}),m(1,"app-icon"),C(2,"chevron_left"),_()()}2&t&&S("disabled",0===M().offset)}function L3t(t,n){if(1&t){const e=Le();m(0,"button",32),te("click",function(){re(e);const s=M();return oe(s.offset=s.offset+1)}),m(1,"app-icon"),C(2,"chevron_right"),_()()}if(2&t){const e=M();S("disabled",e.offset>=e.length-e.view_space)}}function P3t(t,n){if(1&t){const e=Le();m(0,"mat-chip-row",33),te("removed",function(){const s=re(e).$implicit;return oe(M().removeImage(s))}),m(1,"div",34),C(2),_(),m(3,"button",35)(4,"app-icon"),C(5,"cancel"),_()()()}if(2&t){const e=n.$implicit;b(2),vt(e),b(),$t("aria-label","Remove "+e)}}let xG=(()=>{class t extends bn{get length(){return this.list.length+this._upload_list.getValue().length+1}constructor(e,i,s){super(),this._clipboard=e,this._uploads=i,this._dialog=s,this.list=[],this.upload_ids=new Mt([]),this._upload_list=new Mt([]),this.upload_list=this._upload_list.asObservable(),this.offset=0,this.view_space=0,this.separators=[188,13],this.uploads=Qt([this.upload_list,this.upload_ids]).pipe(ze(([r,o])=>r.filter(a=>o.includes(a.id)))),this.registerOnChange=r=>this._onChange=r,this.registerOnTouched=r=>this._onTouch=r}ngAfterViewInit(){this.timeout("init_view_space",()=>{const e=this._list_el.nativeElement.getBoundingClientRect();this.view_space=Math.floor(e.width/152)},100),this.subscription("upload_changes",this.upload_list.subscribe(e=>{const i=this.upload_ids.getValue();for(const s of i){const r=e.find(o=>o.id===s);r&&r.progress>=100&&(this.addImageUrl(r.link),this.upload_ids.next(this.upload_ids.getValue().filter(o=>o!==s)))}}))}copyLink(e){this._clipboard.copy(e),kM("Copied image URL to clipboard")}viewImage(e){this._dialog.open(vue,{data:e})}removeImage(e){this.setValue(this.list.filter(i=>i!==e))}addImage(e){e.value&&(this.setValue(Cs([...this.list,e.value])),e.chipInput.inputElement.value="")}addImageUrl(e){this.setValue(Cs([...this.list,e]))}retryUpload(e){e.error&&(e.error=null,e.upload.resume())}uploadImages(e){var i=this;return de(function*(){const s=e.target;if(s?.files){const r=s.files;if(r.length){i.interval("update_status",()=>i._updateUploadHistory());for(let o=0;o<r.length;o++){const a=yield i._uploads.uploadFileWithPermissions(r[o]);i.upload_ids.next([...i.upload_ids.getValue(),a]),i._file_input.nativeElement.value=""}}}})()}setValue(e){this.list=e,this._onChange&&this._onChange(e)}writeValue(e){this.list=e||[]}_updateUploadHistory(){var e=this;return de(function*(){const i=e.upload_ids.getValue();if(0===i.length)return;const r=(yield e._uploads.upload_list.pipe(ai(1)).toPromise()).filter(a=>i.find(l=>l===a.id)),o=r.filter(a=>a.progress>=100);e._upload_list.next(r),o.forEach(a=>delete a.upload),o.length>=i.length&&e.clearInterval("update_status")})()}static#e=this.\u0275fac=function(i){return new(i||t)(D(Rre),D(uXe),D(wr))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["image-list-field"]],viewQuery:function(i,s){if(1&i&&(Zt(k3t,5),Zt(D3t,5)),2&i){let r;xt(r=Et())&&(s._list_el=r.first),xt(r=Et())&&(s._file_input=r.first)}},features:[Lt([{provide:qi,useExisting:Cn(()=>t),multi:!0}]),bt],decls:19,vars:12,consts:()=>{let e,i;return e=$localize`:␟dc952a36d53a7092578b8706e3c6e28fd59866bf␟7586116958417863153:Add image via URL`,i=$localize`:␟3f0243e1118dafecaa05696a3dffcbfb83295f9b␟889671581456916004:Upload Image(s)`,[["image_list",""],["file_input",""],["chipList",""],i,["images","",1,"space-x-2","py-2","overflow-hidden","mb-2","w-full","flex","items-center","relative",3,"resize"],["image","",1,"relative","rounded","border-2","border-base-200","border-dashed","flex-shrink-0","flex","flex-col","items-center","justify-center","h-32","w-36","hover:bg-base-content/10",":bg-base-100/10","cursor-pointer"],[1,"text-4xl","opacity-60"],[1,"opacity-60"],["type","file",1,"absolute","inset-0","opacity-0","h-32","w-32","cursor-pointer",3,"change"],["image","","class","bg-center bg-cover h-32 w-36 relative rounded overflow-hidden flex-shrink-0 bg-base-200",3,"transform",4,"ngFor","ngForOf"],["image","","class","bg-center bg-cover h-32 w-36 rounded border border-base-content/10 /5 bg-base-200  flex items-center justify-center flex-shrink-0",3,"transform","matTooltip","click",4,"ngFor","ngForOf"],["icon","","matRipple","","class","absolute top-1/2 left-0 transform -translate-y-1/2 bg-base-100",3,"disabled","click",4,"ngIf"],["icon","","matRipple","","class","absolute top-1/2 right-0 transform -translate-y-1/2 bg-base-100",3,"disabled","click",4,"ngIf"],["appearance","outline",1,"w-full"],["aria-label","Image List"],[3,"removed",4,"ngFor","ngForOf"],["placeholder",e,3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],["image","",1,"bg-center","bg-cover","h-32","w-36","relative","rounded","overflow-hidden","flex-shrink-0","bg-base-200"],["auth","",1,"object-contain","absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","z-10","pointer-events-none",3,"source"],["overlay","",1,"absolute","inset-0","text-base-100","z-20"],["bg","",1,"absolute","inset-0","opacity-0","bg-black"],["actions","",1,"absolute","top-0","left-0","right-0","flex","items-center","justify-center","space-x-2","opacity-0"],["icon","",3,"click"],["image","",1,"bg-center","bg-cover","h-32","w-36","rounded","border","border-base-content/10","/5","bg-base-200","flex","items-center","justify-center","flex-shrink-0",3,"click","matTooltip"],["mode","determinate",3,"value","diameter",4,"ngIf"],["class","text-error text-6xl",4,"ngIf"],["overlay","","class","absolute inset-0 hover:bg-base-content hover:bg-opacity-50 text-base-100 flex items-center justify-center",4,"ngIf"],["mode","determinate",3,"value","diameter"],[1,"text-error","text-6xl"],["overlay","",1,"absolute","inset-0","hover:bg-base-content","hover:bg-opacity-50","text-base-100","flex","items-center","justify-center"],[1,"text-3xl","opacity-0"],["icon","","matRipple","",1,"absolute","top-1/2","left-0","transform","-translate-y-1/2","bg-base-100",3,"click","disabled"],["icon","","matRipple","",1,"absolute","top-1/2","right-0","transform","-translate-y-1/2","bg-base-100",3,"click","disabled"],[3,"removed"],[1,"truncate","max-w-md"],["matChipRemove",""]]},template:function(i,s){if(1&i){const r=Le();m(0,"div",4,0),te("resize",function(){return re(r),oe(s.ngAfterViewInit())},0,vc),m(2,"div",5)(3,"app-icon",6),C(4,"add"),_(),m(5,"p",7),Ne(6,3),_(),m(7,"input",8,1),te("change",function(a){return re(r),oe(s.uploadImages(a))}),_()(),K(9,M3t,14,3,"div",9)(10,R3t,4,6,"div",10),ge(11,"async"),K(12,F3t,3,1,"button",11)(13,L3t,3,1,"button",12),_(),m(14,"mat-form-field",13)(15,"mat-chip-grid",14,2),K(17,P3t,6,2,"mat-chip-row",15),_(),m(18,"input",16),te("matChipInputTokenEnd",function(a){return re(r),oe(s.addImage(a))}),_()()}if(2&i){const r=Gt(16);b(2),Wn("transform","translate(-"+s.offset+"00%)"),b(7),S("ngForOf",s.list),b(),S("ngForOf",Me(11,10,s.uploads)),b(2),S("ngIf",s.length>s.view_space),b(),S("ngIf",s.length>s.view_space),b(4),S("ngForOf",s.list),b(),S("matChipInputFor",r)("matChipInputSeparatorKeyCodes",s.separators)("matChipInputAddOnBlur",!0)}},styles:["[_nghost-%COMP%]{width:100%}[overlay][_ngcontent-%COMP%]{transition:background .2s}[image][_ngcontent-%COMP%]:hover   [actions][_ngcontent-%COMP%], [image][_ngcontent-%COMP%]:hover > app-icon[_ngcontent-%COMP%]{opacity:1!important}[image][_ngcontent-%COMP%]:hover   [bg][_ngcontent-%COMP%]{opacity:.4!important}[actions][_ngcontent-%COMP%], [image][_ngcontent-%COMP%] > app-icon[_ngcontent-%COMP%]{transition:opacity .2s}[image][_ngcontent-%COMP%]{transition:transform .2s}"]})}return t})();function $3t(t,n){1&t&&(m(0,"h2",24),C(1," Repeat on "),_())}function B3t(t,n){if(1&t){const e=Le();m(0,"div",25)(1,"button",26),te("click",function(){return re(e),oe(M().toggleDayOfWeek(0))}),C(2," S "),_(),m(3,"button",26),te("click",function(){return re(e),oe(M().toggleDayOfWeek(1))}),C(4," M "),_(),m(5,"button",26),te("click",function(){return re(e),oe(M().toggleDayOfWeek(2))}),C(6," T "),_(),m(7,"button",26),te("click",function(){return re(e),oe(M().toggleDayOfWeek(3))}),C(8," W "),_(),m(9,"button",26),te("click",function(){return re(e),oe(M().toggleDayOfWeek(4))}),C(10," T "),_(),m(11,"button",26),te("click",function(){return re(e),oe(M().toggleDayOfWeek(5))}),C(12," F "),_(),m(13,"button",26),te("click",function(){return re(e),oe(M().toggleDayOfWeek(6))}),C(14," S "),_()()}if(2&t){const e=M();b(),rt("inverse",!(null!=e.data.days_of_week&&e.data.days_of_week.includes(0))),b(2),rt("inverse",!(null!=e.data.days_of_week&&e.data.days_of_week.includes(1))),b(2),rt("inverse",!(null!=e.data.days_of_week&&e.data.days_of_week.includes(2))),b(2),rt("inverse",!(null!=e.data.days_of_week&&e.data.days_of_week.includes(3))),b(2),rt("inverse",!(null!=e.data.days_of_week&&e.data.days_of_week.includes(4))),b(2),rt("inverse",!(null!=e.data.days_of_week&&e.data.days_of_week.includes(5))),b(2),rt("inverse",!(null!=e.data.days_of_week&&e.data.days_of_week.includes(6)))}}let EG=(()=>{class t{constructor(e){this._data=e,this.data={...this._data.value,end:this._data.value.end||qr(new Date,7).valueOf(),interval:this._data.value.interval||1,pattern:this._data.value.pattern?this._data.value.pattern:"weekly",occurrences:this._data.value.occurrences||1},this.ends_key="never"}toggleDayOfWeek(e){this.data.days_of_week||(this.data.days_of_week=[]),this.data.days_of_week.includes(e)?this.data.days_of_week=this.data.days_of_week.filter(i=>i!==e):this.data.days_of_week.push(e)}static#e=this.\u0275fac=function(i){return new(i||t)(D(Js))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["recurrence-modal"]],decls:42,vars:13,consts:[["btn","","icon","","mat-dialog-close","","matRipple",""],[1,"p-4"],[1,"flex","items-center","space-x-2","mb-4"],["appearance","outline",1,"w-16"],["matInput","","type","number",3,"ngModelChange","ngModel"],["appearance","outline"],[3,"ngModelChange","ngModel"],["value","daily"],["value","weekly"],["value","month_day"],["for","repeat-on","class","mb-2",4,"ngIf"],["class","flex items-center space-x-2 mb-4","name","repeat-on",4,"ngIf"],["for","ends-at"],["name","ends-at",3,"ngModelChange","ngModel"],[1,"flex","items-center"],["value","never",3,"click"],[1,"flex","items-center","space-x-2"],["value","on"],[3,"ngModelChange","ngModel","disabled"],["value","after"],["matInput","","type","number",3,"ngModelChange","ngModel","disabled"],["matSuffix",""],[1,"px-4","py-2","flex","items-center","justify-end","border-t","border-base-200"],["btn","","matRipple","",1,"w-32",3,"click","mat-dialog-close"],["for","repeat-on",1,"mb-2"],["name","repeat-on",1,"flex","items-center","space-x-2","mb-4"],["btn","","matRipple","",1,"w-12",3,"click"]],template:function(i,s){1&i&&(m(0,"header")(1,"h2"),C(2,"Custom Recurrence"),_(),m(3,"button",0)(4,"app-icon"),C(5,"close"),_()()(),m(6,"main",1)(7,"div",2)(8,"div"),C(9,"Repeat every"),_(),m(10,"mat-form-field",3)(11,"input",4),Gn("ngModelChange",function(o){return Fn(s.data.interval,o)||(s.data.interval=o),o}),_()(),m(12,"mat-form-field",5)(13,"mat-select",6),Gn("ngModelChange",function(o){return Fn(s.data.pattern,o)||(s.data.pattern=o),o}),m(14,"mat-option",7),C(15),_(),m(16,"mat-option",8),C(17),_(),m(18,"mat-option",9),C(19),_()()()(),K(20,$3t,2,0,"h2",10)(21,B3t,15,14,"div",11),m(22,"h2",12),C(23,"Ends"),_(),m(24,"mat-radio-group",13),Gn("ngModelChange",function(o){return Fn(s.ends_key,o)||(s.ends_key=o),o}),m(25,"div",14)(26,"mat-radio-button",15),te("click",function(){return s.data.occurrences=0}),C(27," Never "),_()(),m(28,"div",16)(29,"mat-radio-button",17),C(30,"On"),_(),m(31,"a-date-field",18),Gn("ngModelChange",function(o){return Fn(s.data.end,o)||(s.data.end=o),o}),_()(),m(32,"div",16)(33,"mat-radio-button",19),C(34,"After"),_(),m(35,"mat-form-field",5)(36,"input",20),Gn("ngModelChange",function(o){return Fn(s.data.occurrences,o)||(s.data.occurrences=o),o}),_(),m(37,"span",21),C(38,"occurences"),_()()()()(),m(39,"footer",22)(40,"button",23),te("click",function(){return s.data.occurrences="never"===s.ends_key?0:s.data.occurrences}),C(41," Save "),_()()),2&i&&(b(11),Un("ngModel",s.data.interval),b(2),Un("ngModel",s.data.pattern),b(2),xe(" day",1===s.data.interval?"":"s"," "),b(2),xe(" week",1===s.data.interval?"":"s"," "),b(2),xe(" month",1===s.data.interval?"":"s"," "),b(),S("ngIf","weekly"===s.data.pattern),b(),S("ngIf","weekly"===s.data.pattern),b(3),Un("ngModel",s.ends_key),b(7),Un("ngModel",s.data.end),S("disabled","on"!==s.ends_key),b(5),Un("ngModel",s.data.occurrences),S("disabled","after"!==s.ends_key),b(4),S("mat-dialog-close",s.data))},styles:["mat-form-field[_ngcontent-%COMP%], a-date-field[_ngcontent-%COMP%]{height:3.25rem}mat-radio-button[_ngcontent-%COMP%]{width:8rem}"]})}return t})();function g1e(t){const n=Hn(t);return n.setDate(1),n.setHours(0,0,0,0),n}function b1e(t,n){const e=Hn(t),i=Hn(n);return e.getFullYear()===i.getFullYear()&&e.getMonth()===i.getMonth()}function U3t(t,n){if(1&t&&(m(0,"div",10),C(1),ge(2,"date"),_()),2&t){const e=n.$implicit;b(),xe(" ",Kt(2,1,null==e?null:e.id,"EE")," ")}}function G3t(t,n){1&t&&be(0,"div",14)}function j3t(t,n){if(1&t){const e=Le();m(0,"button",11),te("click",function(){const s=re(e).$implicit;return oe(M().setValue(s.id))}),C(1),ge(2,"date"),K(3,G3t,1,0,"div",12),be(4,"div",13),_()}if(2&t){const e=n.$implicit,i=M();rt("hover:bg-base-100",e.id!==i.active_date)("!text-base-300",!e.is_month)("text-secondary-content",e.id===i.active_date)("text-base-content",e.id!==i.active_date)("bg-secondary",e.id===i.active_date)("font-normal",e.id!==i.active_date),S("disabled",e.id<i.from||e.id>i.to),b(),xe(" ",Kt(2,15,e.id,"d")," "),b(2),S("ngIf",i.today===e.id)}}let v1e=(()=>{class t extends bn{constructor(e){super(),this._settings=e,this.from=0,this.to=10*Date.now(),this.offset_weekday=0,this.today=Pi(Date.now()).valueOf(),this.date=Date.now(),this.active_date=Pi(Date.now()).valueOf(),this.offset=0,this.date_list=[],this.registerOnChange=i=>this._onChange=i,this.registerOnTouched=i=>this._onTouch=i}ngOnInit(){this.generateDates()}ngOnChanges(e){e.offset_weekday&&this.generateDates()}setValue(e){if(e<this.from||e>=this.to)return;const i=new Date(e);this.date=hd(this.date,{date:i.getDate(),month:i.getMonth(),year:i.getFullYear()}).valueOf(),this.active_date=Pi(this.date).valueOf(),this._onChange&&this._onChange(e)}writeValue(e){this.date=e,this.active_date=Pi(e).valueOf(),this.offset=0,this.generateDates()}changeMonth(e){this.offset+=e,this.generateDates()}generateDates(){const e=this._settings.get("app.week_start")||this.offset_weekday,i=K_(this.date,this.offset);let s=hf(g1e(i),{weekStartsOn:e});const r=Pi(Date.now()),o=[];for(;o.length<42;)o.push({id:s.valueOf(),is_past:vl(s,r),is_month:b1e(s,i)}),s=qr(s,1);this.date_list=o}static#e=this.\u0275fac=function(i){return new(i||t)(D(ln))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["date-calendar"]],inputs:{from:"from",to:"to",offset_weekday:"offset_weekday"},features:[Lt([{provide:qi,useExisting:Cn(()=>t),multi:!0}]),bt,On],decls:17,vars:12,consts:[[1,"p-2"],[1,"flex","items-center","justify-between"],[1,"pl-1.5","pr-2","font-medium"],[1,"flex","items-center"],["icon","","matRipple","","name","schedule-next-month",3,"click","disabled"],["icon","","matRipple","","name","schedule-previous-month",3,"click","disabled"],[1,"flex","items-center","text-sm","mb-2","pb-2","border-b","border-base-200"],["class","flex-1 opacity-60 text-center",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","flex-wrap"],["icon","","name","schedule-set-date","class","min-w-[14%] w-9 h-9 relative overflow-visible my-0.5",3,"hover:bg-base-100","!text-base-300","text-secondary-content","text-base-content","bg-secondary","font-normal","disabled","click",4,"ngFor","ngForOf"],[1,"flex-1","opacity-60","text-center"],["icon","","name","schedule-set-date",1,"min-w-[14%]","w-9","h-9","relative","overflow-visible","my-0.5",3,"click","disabled"],["class","absolute -inset-[2px] border border-secondary rounded-full overflow-hidden","matRipple","",4,"ngIf"],["matRipple","",1,"absolute","inset-0","overflow-hidden","rounded-full"],["matRipple","",1,"absolute","-inset-[2px]","border","border-secondary","rounded-full","overflow-hidden"]],template:function(i,s){1&i&&(m(0,"div",0)(1,"div",1)(2,"div",2),C(3),ge(4,"date"),_(),m(5,"div",3)(6,"button",4),te("click",function(){return s.changeMonth(-1)}),m(7,"app-icon"),C(8,"chevron_left"),_()(),m(9,"button",5),te("click",function(){return s.changeMonth(1)}),m(10,"app-icon"),C(11,"chevron_right"),_()()()(),m(12,"div",6),K(13,U3t,3,4,"div",7),ge(14,"slice"),_(),m(15,"div",8),K(16,j3t,5,18,"button",9),_()()),2&i&&(b(3),xe(" ",Kt(4,5,(null==s.date_list[6]?null:s.date_list[6].id)||s.date,"LLLL YYYY")," "),b(3),S("disabled",(null==s.date_list[0]?null:s.date_list[0].id)<s.from),b(3),S("disabled",(null==s.date_list[34]?null:s.date_list[34].id)>s.to),b(4),S("ngForOf",pv(14,8,s.date_list,0,7)),b(3),S("ngForOf",s.date_list))},dependencies:[hn,Ot,jt,zt,yv,Rs]})}return t})();const ZE=()=>({standalone:!0});function H3t(t,n){if(1&t&&(m(0,"mat-option",26),C(1),_()),2&t){const e=n.$implicit;S("value",e.id),b(),xe(" ",e.display_name||e.name," ")}}function W3t(t,n){1&t&&(m(0,"mat-checkbox",27),C(1," Auto Approve Bookings "),_())}function q3t(t,n){if(1&t&&(m(0,"div",28)(1,"label",29),C(2),_(),be(3,"item-list-field",30),_()),2&t){const e=M();b(2),xe("",e.form.value.rules.hidden?"Prevent":"Allow"," Booking for Groups:")}}function K3t(t,n){1&t&&(m(0,"div",28)(1,"label",31),C(2,"Locations:"),_(),be(3,"item-list-field",32),_())}function X3t(t,n){if(1&t&&(m(0,"div",2)(1,"label",35),C(2),_(),be(3,"a-duration-field",36),_()),2&t){const e=M(2);b(2),xe("",e.form.value.rules.hidden?"Prevent":"Allow"," booking with a minimum length of:"),b(),S("min",15)("max",1440)("step",15)}}function Y3t(t,n){if(1&t&&(m(0,"div",2)(1,"label",37),C(2),_(),be(3,"a-duration-field",38),_()),2&t){const e=M(2);b(2),xe("",e.form.value.rules.hidden?"Prevent":"Allow"," booking with a maximum length up to:"),b(),S("min",e.form.value.conditions.min_length||15)("max",1440)("step",15)}}function Z3t(t,n){if(1&t&&(m(0,"div",33),K(1,X3t,4,4,"div",34)(2,Y3t,4,4,"div",34),_()),2&t){const e=M();b(),S("ngIf",e.available_conditions.includes("min_length")),b(),S("ngIf",e.available_conditions.includes("max_length"))}}function Q3t(t,n){if(1&t&&(m(0,"mat-option",26),C(1),_()),2&t){const e=n.$implicit;S("value",e),b(),xe(" ",e," ")}}function J3t(t,n){if(1&t&&(m(0,"div",28)(1,"label",39),C(2),_(),m(3,"mat-form-field",40)(4,"mat-select",41),K(5,Q3t,2,2,"mat-option",7),_(),m(6,"mat-error"),C(7,"A valid time is required"),_()()()),2&t){const e=M();b(2),xe("",e.form.value.rules.hidden?"Prevent":"Allow"," booking before:"),b(3),S("ngForOf",e.duration_blocks)}}function ePt(t,n){if(1&t&&(m(0,"mat-option",26),C(1),_()),2&t){const e=n.$implicit;S("value",e),b(),xe(" ",e," ")}}function tPt(t,n){if(1&t&&(m(0,"div",28)(1,"label",42),C(2),_(),m(3,"mat-form-field",40)(4,"mat-select",43),K(5,ePt,2,2,"mat-option",7),_(),m(6,"mat-error"),C(7,"A valid time is required"),_()()()),2&t){const e=M();b(2),xe("",e.form.value.rules.hidden?"Prevent":"Allow"," booking after:"),b(3),S("ngForOf",e.duration_blocks)}}function nPt(t,n){if(1&t){const e=Le();m(0,"div",28)(1,"label",42),C(2),_(),m(3,"div",1)(4,"a-date-field",44),te("ngModelChange",function(s){re(e);const r=M();return oe(r.setIsPeriod(s,r.form.value.conditions.is_period[1]))}),_(),m(5,"a-date-field",45),te("ngModelChange",function(s){re(e);const r=M();return oe(r.setIsPeriod(r.form.value.conditions.is_period[0],s))}),_()()()}if(2&t){const e=M();b(2),xe("",e.form.value.rules.hidden?"Prevent":"Allow"," booking between dates:"),b(2),S("ngModel",e.form.value.conditions.is_period[0])("ngModelOptions",pn(6,ZE)),b(),S("from",e.form.value.conditions.is_period[0])("ngModel",e.form.value.conditions.is_period[1])("ngModelOptions",pn(7,ZE))}}function iPt(t,n){if(1&t&&(m(0,"mat-option",26),C(1),ge(2,"date"),_()),2&t){const e=n.$implicit,i=M(2);S("value",e.id),b(),xe(" ",Kt(2,2,e.value,i.time_format)," ")}}function sPt(t,n){if(1&t&&(m(0,"mat-option",26),C(1),ge(2,"date"),_()),2&t){const e=M().$implicit,i=M(2);S("value",e.id),b(),xe(" ",Kt(2,2,e.value,i.time_format)," ")}}function rPt(t,n){if(1&t&&(sn(0),K(1,sPt,3,5,"mat-option",51),rn()),2&t){const e=n.$implicit,i=M(2);b(),S("ngIf",e.id>(i.form.value.conditions.is_between[0]||6))}}function oPt(t,n){if(1&t){const e=Le();m(0,"div",28)(1,"label",46),C(2),_(),m(3,"div",47)(4,"mat-form-field",40)(5,"mat-select",48),te("ngModelChange",function(s){re(e);const r=M();return oe(r.setIsBetween(s,r.form.value.conditions.is_between[1]))}),K(6,iPt,3,5,"mat-option",7),_()(),m(7,"mat-form-field",40)(8,"mat-select",49),te("ngModelChange",function(s){re(e);const r=M();return oe(r.setIsBetween(r.form.value.conditions.is_between[0],s))}),K(9,rPt,2,1,"ng-container",50),_(),m(10,"mat-error"),C(11,"A valid end time is required"),_()()()()}if(2&t){const e=M();b(2),xe("",e.form.value.rules.hidden?"Prevent":"Allow"," booking between:"),b(3),S("ngModel",e.form.value.conditions.is_between[0]||6)("ngModelOptions",pn(7,ZE)),b(),S("ngForOf",e.time_blocks),b(2),S("ngModel",e.form.value.conditions.is_between[1]||18)("ngModelOptions",pn(8,ZE)),b(),S("ngForOf",e.time_blocks)}}function aPt(t,n){if(1&t&&(m(0,"div",28)(1,"label",52),C(2),_(),be(3,"item-list-field",53),_()),2&t){const e=M();b(2),xe(" ",e.form.value.rules.hidden?"Prevent":"Allow"," booking these resources: ")}}let y1e=(()=>{class t{get time_format(){return this._settings.time_format}constructor(e,i){this._org=e,this._settings=i,this.save=!1,this.rulesetChange=new it,this.available_conditions=[],this.building_zones=this._org.active_building.pipe(an(s=>!!s),nn(s=>nC({parent_id:s.id}).pipe(ts(()=>gt({data:[]})))),ze(s=>s.data),jn(1)),this.time_blocks=new Array(96).fill(0).map((s,r)=>{const o=Math.floor(r/4),a=r%4*15;return{id:o+a/60,value:hd(new Date,{hours:o,minutes:a})}}),this.duration_blocks=["1 Day","2 Days","3 Days","4 Days","5 Days","1 Week","2 Weeks","3 Weeks","4 Weeks","1 Month","2 Months","3 Months","4 Months","5 Months","6 Months"],this.form=new ml({id:new _t(`ruleset-${sg(8)}`),zone:new _t("*",$r.required),name:new _t("",$r.required),rules:new ml({auto_approve:new _t(!1),hidden:new _t(!1)}),conditions:new ml({groups:new _t([]),locations:new _t([]),min_length:new _t(0),max_length:new _t(1440),is_before:new _t("1 Week"),is_after:new _t("1 Day"),is_between:new _t([6,18]),is_period:new _t([Pi(Date.now()).valueOf(),Fs(Date.now()).valueOf()]),resource_ids:new _t([])})})}ngOnChanges(e){e.ruleset&&this.ruleset&&(this.available_conditions=Object.keys(this.ruleset.conditions||{}),this.form.patchValue(this.ruleset)),e.save&&this.save!==e.save.previousValue&&!e.save.firstChange&&this.post()}setIsBetween(e,i){!e||!i||(e>i&&(i=e+.25),this.form.patchValue({conditions:{is_between:[e,i]}}))}setIsPeriod(e,i){!e||!i||(e>i&&(i=e),this.form.patchValue({conditions:{is_period:[Pi(e).valueOf(),Fs(i).valueOf()]}}))}post(){if(!this.form.valid)return Mi(`Some form fields are invalid. [${dC(this.form).join(", ")}]`);const e=this.form.getRawValue(),i=Object.keys(e.conditions);for(const s of i)this.available_conditions.includes(s)||delete e.conditions[s];this.rulesetChange.emit(e)}static#e=this.\u0275fac=function(i){return new(i||t)(D(In),D(ln))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["booking-rules-form"]],inputs:{ruleset:"ruleset",save:"save"},outputs:{rulesetChange:"rulesetChange"},features:[On],decls:65,vars:16,consts:[[1,"flex","flex-col","space-y-2",3,"formGroup"],[1,"flex","items-center","space-x-2"],[1,"flex","flex-col","flex-1"],["for","zone"],["appearance","outline"],["name","zone","formControlName","zone"],["value","*"],[3,"value",4,"ngFor","ngForOf"],["for","name"],["matInput","","name","name","formControlName","name","placeholder","Ruleset Name"],["formGroupName","rules",1,"flex","items-center","space-x-2"],["name","hidden","formControlName","hidden","matTooltip","Prevent user from booking the resource if the conditions match"],["name","auto_approve","formControlName","auto_approve","matTooltip","Whether resource should be auto-approved when booking if the conditions match",4,"ngIf"],[1,"flex","flex-col"],["name","zone","multiple","","placeholder","No Conditions. Match all resources in zone",3,"ngModelChange","ngModel","ngModelOptions"],["value","groups"],["value","locations"],["value","min_length"],["value","max_length"],["value","is_before"],["value","is_after"],["value","is_between"],["value","is_period"],["value","resource_ids"],["class","flex flex-col","formGroupName","conditions",4,"ngIf"],["class","flex items-center space-x-2","formGroupName","conditions",4,"ngIf"],[3,"value"],["name","auto_approve","formControlName","auto_approve","matTooltip","Whether resource should be auto-approved when booking if the conditions match"],["formGroupName","conditions",1,"flex","flex-col"],["for","groups"],["name","groups","formControlName","groups","placeholder","User groups"],["for","locations"],["name","locations","formControlName","locations","placeholder","Locations"],["formGroupName","conditions",1,"flex","items-center","space-x-2"],["class","flex flex-col flex-1",4,"ngIf"],["for","min_length"],["name","min_length","formControlName","min_length",3,"min","max","step"],["for","max_length"],["name","max_length","formControlName","max_length",3,"min","max","step"],["for","is-before"],["appearance","outline",1,"flex-1"],["name","is-before","formControlName","is_before"],["for","is-after"],["name","is-after","formControlName","is_after"],[1,"flex-1",3,"ngModelChange","ngModel","ngModelOptions"],[1,"flex-1",3,"ngModelChange","from","ngModel","ngModelOptions"],["for","is_between"],[1,"flex","items-center","space-x-2","w-full"],["name","start-time",3,"ngModelChange","ngModel","ngModelOptions"],["name","end-time",3,"ngModelChange","ngModel","ngModelOptions"],[4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["for","resource_ids"],["name","resource_ids","formControlName","resource_ids","placeholder","Resource IDs"]],template:function(i,s){1&i&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),C(4,"Zone"),m(5,"span"),C(6,"*"),_(),C(7,":"),_(),m(8,"mat-form-field",4)(9,"mat-select",5)(10,"mat-option",6),C(11,"Any Zone"),_(),K(12,H3t,2,2,"mat-option",7),ge(13,"async"),_(),m(14,"mat-error"),C(15,"A valid zone is required"),_()()(),m(16,"div",2)(17,"label",8),C(18,"Name"),m(19,"span"),C(20,"*"),_(),C(21,":"),_(),m(22,"mat-form-field",4),be(23,"input",9),m(24,"mat-error"),C(25,"A valid name is required"),_()()()(),m(26,"div",10)(27,"div",2)(28,"mat-checkbox",11),C(29," Prevent Bookings "),_()(),m(30,"div",2),K(31,W3t,2,0,"mat-checkbox",12),_()(),m(32,"div",13)(33,"label",3),C(34,"Rule Conditions:"),_(),m(35,"mat-form-field",4)(36,"mat-select",14),Gn("ngModelChange",function(o){return Fn(s.available_conditions,o)||(s.available_conditions=o),o}),m(37,"mat-option",15),C(38,"Groups"),_(),m(39,"mat-option",16),C(40,"Locations"),_(),m(41,"mat-option",17),C(42," Minimum Length "),_(),m(43,"mat-option",18),C(44," Maximum Length "),_(),m(45,"mat-option",19),C(46," Is Within Days "),_(),m(47,"mat-option",20),C(48," Is After Days "),_(),m(49,"mat-option",21),C(50," Is Between Hours "),_(),m(51,"mat-option",22),C(52," Between Dates "),_(),m(53,"mat-option",23),C(54,"Resources"),_()(),m(55,"mat-error"),C(56,"A valid zone is required"),_()()(),K(57,q3t,4,1,"div",24)(58,K3t,4,0,"div",24)(59,Z3t,3,2,"div",25)(60,J3t,8,2,"div",24)(61,tPt,8,2,"div",24)(62,nPt,6,8,"div",24)(63,oPt,12,9,"div",24)(64,aPt,4,1,"div",24),_()),2&i&&(S("formGroup",s.form),b(12),S("ngForOf",Me(13,13,s.building_zones)),b(19),S("ngIf",!s.form.value.rules.hidden),b(5),Un("ngModel",s.available_conditions),S("ngModelOptions",pn(15,ZE)),b(21),S("ngIf",s.available_conditions.includes("groups")),b(),S("ngIf",s.available_conditions.includes("locations")),b(),S("ngIf",s.available_conditions.includes("min_length")||s.available_conditions.includes("max_length")),b(),S("ngIf",s.available_conditions.includes("is_before")),b(),S("ngIf",s.available_conditions.includes("is_after")),b(),S("ngIf",s.available_conditions.includes("is_period")),b(),S("ngIf",s.available_conditions.includes("is_between")),b(),S("ngIf",s.available_conditions.includes("resource_ids")))},styles:["[_nghost-%COMP%]{display:block;padding:.5rem}"]})}return t})();const w1e=[],S1e=new wy;let C1e=(()=>{class t{transform(e){return de(function*(){if(!e)return S1e;let i=w1e.find(({id:s,email:r})=>s===e||r===e);return i||(i=yield I5(e).toPromise().catch(()=>null),i?(i=new wy(i),w1e.push(i),console.log("Place User:",i),i):S1e)})()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275pipe=rr({name:"placeuser",type:t,pure:!0})}return t})();const lPt=["startDate"],cPt=["endDate"],uPt=[[["input","startDate",""]],[["input","endDate",""]]],dPt=["input[startDate]","input[endDate]"];function hPt(t,n){if(1&t){const e=Le();m(0,"div",5)(1,"date-range-calendar",6),te("startChange",function(s){return re(e),oe(M().setStartDate(s))})("endChange",function(s){return re(e),oe(M().setEndDate(s))}),_()()}if(2&t){const e=M();b(),S("month",(null==e.start_date||null==e.start_date.control?null:e.start_date.control.value)||e.now)("from",e.from)("to",e.until)("offset_weekday",e.week_start)}}let x1e=(()=>{class t extends bn{constructor(){super(...arguments),this.from_date=Pi(Date.now()).valueOf(),this.week_start=0,this.disabled=!1,this.short=!1,this.now=Date.now()}setStartDate(e){this.start_date&&this.start_date.control.setValue(e)}setEndDate(e){this._tooltip?.close(),this.end_date&&this.end_date.control.setValue(e)}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=Pn(t)))(s||t)}})();static#t=this.\u0275cmp=Qe({type:t,selectors:[["date-range-field"]],contentQueries:function(i,s,r){if(1&i&&(Li(r,lPt,5,Vl),Li(r,cPt,5,Vl)),2&i){let o;xt(o=Et())&&(s.start_date=o.first),xt(o=Et())&&(s.end_date=o.first)}},viewQuery:function(i,s){if(1&i&&Zt(cu,5),2&i){let r;xt(r=Et())&&(s._tooltip=r.first)}},inputs:{from_date:[0,"from","from_date"],to_date:[0,"to","to_date"],week_start:"week_start",disabled:"disabled",short:"short"},features:[bt],ngContentSelectors:dPt,decls:16,vars:12,consts:[["calendar_picker",""],["matRipple","","type","button","role","date-picker","customTooltip","","yPosition","top",1,"flex","items-center","rounded","px-4","py-2","border","border-neutral","hover:border-base-content","focus:outline-2","outline-base-content","space-x-2","min-w-max",3,"content","disabled"],[1,"flex-1","whitespace-nowrap"],[1,"text-2xl"],[1,"hidden"],[1,"relative","w-[18.25rem]","rounded","bg-base-100","px-2","py-4"],[3,"startChange","endChange","month","from","to","offset_weekday"]],template:function(i,s){if(1&i&&(Ti(uPt),m(0,"button",1)(1,"div",2),C(2),ge(3,"date"),_(),m(4,"div"),C(5,"\u2013"),_(),m(6,"div",2),C(7),ge(8,"date"),_(),m(9,"app-icon",3),C(10,"today"),_()(),m(11,"div",4),un(12),un(13,1),_(),K(14,hPt,2,4,"ng-template",null,0,mn)),2&i){const r=Gt(15);rt("opacity-30",s.disabled),S("content",r)("disabled",s.disabled),b(2),xe(" ",Kt(3,6,(null==s.start_date?null:s.start_date.value)||s.now,"MMM d, yyyy")," "),b(5),xe(" ",Kt(8,9,(null==s.end_date?null:s.end_date.value)||s.now,"MMM d, yyyy")," ")}}})}return t})();function fPt(t,n){if(1&t&&(m(0,"div",8),C(1),ge(2,"date"),_()),2&t){const e=n.$implicit;b(),xe(" ",Kt(2,1,e,"EEE")," ")}}function pPt(t,n){1&t&&be(0,"div",16)}function mPt(t,n){1&t&&be(0,"div",17)}function _Pt(t,n){1&t&&be(0,"div",18)}function gPt(t,n){1&t&&be(0,"div",19)}function bPt(t,n){1&t&&be(0,"div",20)}function vPt(t,n){if(1&t){const e=Le();m(0,"button",9),te("click",function(){const s=re(e).$implicit;return oe(M().selectDate(s.id))})("mouseenter",function(){const s=re(e).$implicit;return oe(M().setHoveredDate(s.id))}),K(1,pPt,1,0,"div",10)(2,mPt,1,0,"div",11)(3,_Pt,1,0,"div",12)(4,gPt,1,0,"div",13),m(5,"div",14),C(6),ge(7,"date"),_(),K(8,bPt,1,0,"div",15),_()}if(2&t){const e=n.$implicit,i=M();rt("text-secondary-content",e.is_start||e.is_end),S("disabled",e.disabled),b(),S("ngIf",e.is_selected&&!e.is_start&&!e.is_end),b(),S("ngIf",e.is_start&&i.end_after_start),b(),S("ngIf",e.is_end&&i.end_after_start),b(),S("ngIf",e.is_start||e.is_end),b(),rt("opacity-30",!e.is_month),b(),xe(" ",Kt(7,11,e.id,"d")," "),b(2),S("ngIf",e.is_today)}}let E1e=(()=>{class t{constructor(){this.from_date=Pi(Date.now()).valueOf(),this.offset_weekday=0,this.month=Pi(Date.now()).valueOf(),this.startChange=new it,this.endChange=new it,this.hovered_date=null,this.weekdays=[],this.month_days=[]}get end_after_start(){return this.end&&this.end>this.start&&!ad(this.end,this.start)}ngOnInit(){this._setWeekdays(),this._setMonthDays()}ngOnChanges(e){e.offset_weekday&&(this._setWeekdays(),this._setMonthDays()),e.start&&(this._setMonthDays(),this.month=this.start||Date.now()),e.month&&this._setMonthDays(),e.end&&this._setMonthDays()}selectDate(e){!this.start||e<this.start?(this.start=e,this.startChange.emit(e)):(this.end=e,this.endChange.emit(e)),this._setMonthDays()}setHoveredDate(e){this.start&&(this.end=e,this._setMonthDays())}trackByFn(e,i){return i.id}nextMonth(){this.month=K_(this.month,1).valueOf(),this._setMonthDays()}previousMonth(){this.month=K_(this.month,-1).valueOf(),this._setMonthDays()}_setMonthDays(){const e=hf(g1e(this.month),{weekStartsOn:this.offset_weekday});this.month_days=Array.from(Array(42).keys()).map(i=>{const s=qr(e,i).valueOf();return{id:s,disabled:this.from_date&&vl(s,this.from_date)||this.to_date&&cd(s,this.to_date),is_today:ad(s,Date.now()),is_start:ad(s,this.start),is_end:ad(s,this.end),is_month:b1e(s,this.month),is_selected:this.end&&s>=Pi(this.start).valueOf()&&s<=Fs(this.end).valueOf()}})}_setWeekdays(){const e=hf(Date.now(),{weekStartsOn:this.offset_weekday});this.weekdays=Array.from(Array(7).keys()).map(i=>qr(e,i))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Qe({type:t,selectors:[["date-range-calendar"]],inputs:{from_date:[0,"from","from_date"],to_date:[0,"to","to_date"],offset_weekday:"offset_weekday",start:"start",end:"end",month:"month"},outputs:{startChange:"startChange",endChange:"endChange"},features:[On],decls:15,vars:7,consts:[[1,"flex","items-center","justify-between"],["month","",1,"font-medium","px-2"],[1,"flex","items-center","space-x-2"],["icon","","matRipple","",3,"click"],[1,"grid","grid-cols-7","grid-rows-7","gap-1","w-[17.25rem]","h-[17.25rem]"],[1,"col-span-full","grid","grid-cols-7","border-b","border-base-200"],["weekday","","class","relative flex items-center justify-center text-sm opacity-60",4,"ngFor","ngForOf"],["class","relative h-9 w-9 hover:bg-base-200 rounded-full",3,"text-secondary-content","disabled","click","mouseenter",4,"ngFor","ngForOf","ngForTrackBy"],["weekday","",1,"relative","flex","items-center","justify-center","text-sm","opacity-60"],[1,"relative","h-9","w-9","hover:bg-base-200","rounded-full",3,"click","mouseenter","disabled"],["class","absolute inset-y-0 -inset-x-0.5 border-y border-base-content border-dashed bg-base-200",4,"ngIf"],["class","absolute inset-y-0 -right-0.5 w-[calc(50%+2px)] border-y border-base-content border-dashed bg-base-200",4,"ngIf"],["class","absolute inset-y-0 -left-0.5 w-[calc(50%+2px)] border-y border-base-content border-dashed bg-base-200",4,"ngIf"],["class","absolute inset-0 flex items-center justify-center bg-secondary rounded-full z-10",4,"ngIf"],["matRipple","",1,"absolute","inset-0","flex","items-center","justify-center","rounded-full","z-20"],["class","absolute -inset-[3px] flex items-center justify-center border border-secondary rounded-full z-10",4,"ngIf"],[1,"absolute","inset-y-0","-inset-x-0.5","border-y","border-base-content","border-dashed","bg-base-200"],[1,"absolute","inset-y-0","-right-0.5","w-[calc(50%+2px)]","border-y","border-base-content","border-dashed","bg-base-200"],[1,"absolute","inset-y-0","-left-0.5","w-[calc(50%+2px)]","border-y","border-base-content","border-dashed","bg-base-200"],[1,"absolute","inset-0","flex","items-center","justify-center","bg-secondary","rounded-full","z-10"],[1,"absolute","-inset-[3px]","flex","items-center","justify-center","border","border-secondary","rounded-full","z-10"]],template:function(i,s){1&i&&(m(0,"div",0)(1,"div",1),C(2),ge(3,"date"),_(),m(4,"div",2)(5,"button",3),te("click",function(){return s.previousMonth()}),m(6,"app-icon"),C(7,"chevron_left"),_()(),m(8,"button",3),te("click",function(){return s.nextMonth()}),m(9,"app-icon"),C(10,"chevron_right"),_()()()(),m(11,"div",4)(12,"div",5),K(13,fPt,3,4,"div",6),_(),K(14,vPt,9,14,"button",7),_()),2&i&&(b(2),xe(" ",Kt(3,4,s.month,"MMMM yyyy")," "),b(11),S("ngForOf",s.weekdays),b(),S("ngForOf",s.month_days)("ngForTrackBy",s.trackByFn))},dependencies:[hn,Ot,jt,zt,Rs]})}return t})(),QE=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[ka,Xh,iu,Tc,iu,qd,$_,V_,Qv,AS,sy,LS,H8,W8,pg]})}return t})();Is(Au,[Ot,oi,wi,jt,zt,cu,v1e],[Rs]),Is(x1e,[jt,zt,cu,E1e],[Rs]),Is(dG,[hn,Ot,Mr,oi,wi,jt,vs,xS,Hs,IS,Zv,fre,ou,OD,ND,MD,MS,zt,Ws],[yi,C1e]),Is(e0,[hn,Ot,Mr,oi,wi,vs,$se,xS,ql,Hs,IS,Zv,zt,CB,Ws],[]),Is(m1e,[hn,Ot,oi,wi,jt,ry,j_,zt,xl],[yi]),Is(xG,[hn,Ot,jt,vs,ou,OD,ND,MD,MS,zt,xl,Ws],[yi]),Is(jB,[hn,Ot,Kh,Mr,oi,zl,qo,_l,jt,vs,sf,ql,Br,Hs,zt,Ms,Ws,_1e,xG],[yi]),Is(EG,[Ot,Mr,a$,oi,wi,jt,vs,xS,ql,Br,Hs,ry,j_,zt,Ms,Au],[]),Is(y1e,[hn,Ot,Mr,oi,zl,wi,qo,_l,dk,vs,sf,ql,Br,Hs,ou,Kl,Au,Ih,Hye],[yi,Rs]);const yPt=()=>({disable_pan:!0,disable_zoom:!0});function wPt(t,n){1&t&&be(0,"image-carousel",23),2&t&&S("images",M(2).space.images)}function SPt(t,n){if(1&t&&(m(0,"div",16)(1,"p"),Ne(2,4),_()()),2&t){const e=n.$implicit;b(2),$n(e),zn(2)}}function CPt(t,n){if(1&t&&(m(0,"section",24)(1,"h2",15),Ne(2,3),_(),K(3,SPt,3,1,"div",25),_()),2&t){const e=M(2);b(3),S("ngForOf",e.space.features)}}function xPt(t,n){if(1&t&&(m(0,"section",26),be(1,"interactive-map",27),_()),2&t){const e=M(2);b(),S("src",e.map_url)("focus",e.space.map_id)("features",e.features)("options",pn(4,yPt))}}function EPt(t,n){if(1&t){const e=Le();sn(0),m(1,"section",7),K(2,wPt,1,1,"image-carousel",8),m(3,"button",9),te("click",function(){return re(e),oe(M().close.emit())}),m(4,"app-icon"),C(5,"arrow_back"),_()(),m(6,"button",10),te("click",function(){return re(e),oe(M().toggleFav.emit())}),m(7,"app-icon"),C(8),_()()(),m(9,"div",11)(10,"section",12)(11,"h2",13),C(12),_()(),be(13,"hr"),m(14,"section",14)(15,"h2",15),Ne(16,1),_(),m(17,"div",16)(18,"app-icon"),C(19,"people"),_(),m(20,"p"),Ne(21,2),_()(),m(22,"div",16)(23,"app-icon"),C(24,"meeting_room"),_(),m(25,"p"),C(26),_()(),m(27,"div",16)(28,"app-icon"),C(29,"place"),_(),m(30,"p"),C(31),_()()(),be(32,"hr"),K(33,CPt,4,1,"section",17)(34,xPt,2,5,"section",18),_(),m(35,"div",19)(36,"button",20),te("click",function(){re(e);const s=M();return s.active=!s.active,oe(s.activeChange.emit(s.active))}),m(37,"div",21)(38,"app-icon",22),C(39),_(),m(40,"p"),C(41),_()()()(),rn()}if(2&t){const e=M();b(),rt("sm:h-64",null==e.space.images?null:e.space.images.length)("h-40",null==e.space.images?null:e.space.images.length)("sm:h-0",!(null!=e.space.images&&e.space.images.length))("h-12",!(null!=e.space.images&&e.space.images.length))("!bg-transparent",!(null!=e.space.images&&e.space.images.length)),b(),S("ngIf",null==e.space.images?null:e.space.images.length),b(4),rt("text-white",!e.fav)("text-blue-400",e.fav),b(2),vt(e.fav?"favorite":"favorite_border"),b(4),xe(" ",e.space.display_name||e.space.name," "),b(9),$n(e.space.capacity),zn(21),b(5),xe(" ",(null==e.level?null:e.level.display_name)||(null==e.level?null:e.level.name)," "),b(5),xe(" ",(null==e.building?null:e.building.address)||(null==e.building?null:e.building.display_name)||(null==e.building?null:e.building.name)," "),b(2),S("ngIf",null==e.space.features?null:e.space.features.length),b(),S("ngIf",!e.hide_map),b(2),rt("inverse",e.active),b(3),vt(e.active?"remove":"add"),b(2),xe(" ",e.active?"Remove this room":"Add this room"," ")}}function TPt(t,n){1&t&&(m(0,"div",28)(1,"p",29),Ne(2,5),_()())}let TG=(()=>{class t{get level(){return this._org.levelWithID(this.space?.zones)||this.space?.level}get building(){return this._org.buildings.find(e=>this.space?.zones.includes(e.id))}constructor(e){this._org=e,this.fav=!1,this.active=!1,this.hide_map=!1,this.activeChange=new it,this.close=new it,this.toggleFav=new it,this.map_url="",this.features=[]}ngOnChanges(e){e.space&&this.space&&this._updateFeature()}_updateFeature(){this.map_url=this.level?.map_id,this.features=[{location:this.space?.map_id,content:lu}]}static#e=this.\u0275fac=function(i){return new(i||t)(D(In))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["space-details"]],inputs:{space:"space",fav:"fav",active:"active",hide_map:"hide_map"},outputs:{activeChange:"activeChange",close:"close",toggleFav:"toggleFav"},features:[On],decls:3,vars:2,consts:()=>{let e,i,s,r,o;return e=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,i=$localize`:␟2fe5caca246424da5e7fcee12a1fe341335e1286␟2731085793954892186:${"\ufffd0\ufffd"}:INTERPOLATION: People`,s=$localize`:␟45b5b90d7df8adeb648858761739fa700117c0d5␟3223773701700202859:Room Facilities`,r=$localize`:␟9a6f64944a2acf1f8315f9ffac43e3fe58bac31f␟1353747351482281557:${"\ufffd0\ufffd"}:INTERPOLATION:`,o=$localize`:␟02434c6ff0f41cc7f311ace51ce0787ae315e5fb␟5676660199414904214: Select a room to view it's details `,[["empty_state",""],e,i,s,r,o,[4,"ngIf","ngIfElse"],["image","",1,"relative","w-full","bg-neutral"],["class","absolute inset-0",3,"images",4,"ngIf"],["icon","","matRipple","","name","close-space-details",1,"absolute","top-2","left-2","bg-neutral","sm:hidden","text-white",3,"click"],["icon","","matRipple","","name","toggle-space-favourite-details",1,"absolute","top-2","right-2","bg-neutral",3,"click"],[1,"p-2","space-y-2","flex-1","h-1/2","overflow-auto"],["actions","",1,"z-0"],[1,"text-xl","font-medium","mb-2","mt-4"],["details","",1,"space-y-2"],[1,"text-xl","font-medium"],[1,"flex","items-center","space-x-2"],["facilities","","class","space-y-2",4,"ngIf"],["map","","class","w-full mx-auto h-64 sm:h-48 relative border border-base-200 overflow-hidden rounded",4,"ngIf"],[1,"px-2","pt-2","pb-[5.5rem]","border-t","border-base-200","shadow","sm:hidden"],["btn","","matRipple","","name","toggle-space-details",1,"w-full",3,"click"],[1,"flex","items-center","justify-center"],[1,"text-2xl"],[1,"absolute","inset-0",3,"images"],["facilities","",1,"space-y-2"],["class","flex items-center space-x-2",4,"ngFor","ngForOf"],["map","",1,"w-full","mx-auto","h-64","sm:h-48","relative","border","border-base-200","overflow-hidden","rounded"],[1,"pointer-events-none",3,"src","focus","features","options"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"]]},template:function(i,s){if(1&i&&K(0,EPt,42,26,"ng-container",6)(1,TPt,3,0,"ng-template",null,0,mn),2&i){const r=Gt(2);S("ngIf",s.space)("ngIfElse",r)}},styles:["[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column;width:30%;min-width:20rem;height:100%;min-height:65vh}"]})}return t})();function IPt(t,n){1&t&&(m(0,"div",24)(1,"app-icon"),C(2,"done"),_()())}function kPt(t,n){1&t&&be(0,"img",25),2&t&&S("source",M().$implicit.images[0])}function DPt(t,n){1&t&&be(0,"img",26)}function MPt(t,n){if(1&t){const e=Le();m(0,"li",13)(1,"button",14),te("click",function(){const s=re(e).$implicit;return oe(M(3).selectSpace(s))}),m(2,"div",15),K(3,IPt,3,0,"div",16)(4,kPt,1,1,"img",17)(5,DPt,1,0,"ng-template",null,2,mn),_(),m(7,"div",18)(8,"div",19),C(9),_(),m(10,"div",20)(11,"app-icon",21),C(12,"place"),_(),m(13,"p",22),C(14),_()(),m(15,"div",20)(16,"app-icon",21),C(17,"people"),_(),m(18,"p"),Ne(19,4),_()()()(),m(20,"button",23),te("click",function(){const s=re(e).$implicit;return oe(M(3).toggleFav.emit(s))}),m(21,"app-icon"),C(22),_()()()}if(2&t){let e;const i=n.$implicit,s=Gt(6),r=M(3);rt("!border-info",r.active===i.id),b(3),S("ngIf",r.selected.includes(i.id)),b(),S("ngIf",null==i.images?null:i.images.length)("ngIfElse",s),b(5),xe(" ",i.display_name||i.name||"Meeting Space"," "),b(5),xe(" ",i.location||(null==(e=r.level(i.zones))?null:e.display_name)||(null==(e=r.level(i.zones))?null:e.name)," "),b(5),$n(i.capacity<1?2:i.capacity),zn(19),b(),rt("text-info",r.isFavourite(i.id)),b(2),vt(r.isFavourite(i.id)?"favorite":"favorite_border")}}function APt(t,n){if(1&t&&(m(0,"ul",11),K(1,MPt,23,11,"li",12),ge(2,"async"),_()),2&t){const e=M(2);b(),S("ngForOf",Me(2,1,e.available_spaces))}}function OPt(t,n){if(1&t&&(sn(0),K(1,APt,3,3,"ul",10),ge(2,"async"),rn()),2&t){let e;const i=M(),s=Gt(8);b(),S("ngIf",null==(e=Me(2,2,i.available_spaces))?null:e.length)("ngIfElse",s)}}function NPt(t,n){1&t&&(m(0,"div",27)(1,"p",28),Ne(2,5),_()())}function RPt(t,n){1&t&&(m(0,"div",29),be(1,"mat-spinner",30),m(2,"p",31),Ne(3,6),_()()),2&t&&(b(),S("diameter",32))}let IG=(()=>{class t{constructor(e,i){this._event_form=e,this._org=i,this.active="",this.selected="",this.favorites=[],this.onSelect=new it,this.toggleFav=new it,this.loading=this._event_form.loading,this.available_spaces=this._event_form.available_spaces}level(e){return this._org.levelWithID(e)}ngOnInit(){this._event_form.setView("find")}isFavourite(e){return this.favorites.includes(e)}selectSpace(e){this.onSelect.emit(e)}static#e=this.\u0275fac=function(i){return new(i||t)(D(Tm),D(In))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["space-list"]],inputs:{active:"active",selected:"selected",favorites:"favorites"},outputs:{onSelect:"onSelect",toggleFav:"toggleFav"},decls:11,vars:7,consts:()=>{let e,i,s,r;return e=$localize`:␟f3733dfad4477862079351d9f8cf60c7964cc3e3␟2290177789691483092: ${"\ufffd0\ufffd"}:INTERPOLATION: result(s) found `,i=$localize`:␟08719ea79f574b595da7d187fda2fa8c491b5de7␟4552898751936658514: ${"\ufffd0\ufffd"}:INTERPOLATION: People `,s=$localize`:␟027c29534f5dc45741b226edfebb3f7f578384b0␟3831747985282777621: No available spaces for selected time and/or filters `,r=$localize`:␟8dad32dda6491a1051df9156e98031c0e634b413␟126579492602011343:Finding available spaces...`,[["empty_state",""],["load_state",""],["space_placeholder",""],e,i,s,r,[1,"font-bold"],["count","",1,"text-sm","opacity-60","mb-4"],[4,"ngIf","ngIfElse"],["class","list-style-none space-y-2",4,"ngIf","ngIfElse"],[1,"list-style-none","space-y-2"],["space","","class","relative p-2 rounded-lg w-full shadow border bg-base-100 border-base-200",3,"!border-info",4,"ngFor","ngForOf"],["space","",1,"relative","p-2","rounded-lg","w-full","shadow","border","bg-base-100","border-base-200"],["matRipple","","name","select-space",1,"w-full","h-full","flex","items-center",3,"click"],[1,"relative","min-w-[5rem]","w-20","h-20","rounded-xl","bg-base-200","mr-4","overflow-hidden","flex","items-center","justify-center"],["class","absolute top-1 left-1 border border-neutral bg-base-200 rounded-full h-6 w-6 flex items-center justify-center text-white",4,"ngIf"],["auth","","class","object-cover h-full",3,"source",4,"ngIf","ngIfElse"],[1,"space-y-2"],[1,"font-medium","truncate","mr-10"],[1,"flex","items-center","text-sm","space-x-2"],[1,"text-info"],[1,"truncate"],["icon","","matRipple","","name","toggle-space-favourite",1,"absolute","top-1","right-1",3,"click"],[1,"absolute","top-1","left-1","border","border-neutral","bg-base-200","rounded-full","h-6","w-6","flex","items-center","justify-center","text-white"],["auth","",1,"object-cover","h-full",3,"source"],["src","assets/icons/room-placeholder.svg",1,"m-auto"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"],["loading","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"],[1,"opacity-30"]]},template:function(i,s){if(1&i&&(m(0,"h3",7),C(1,"Results"),_(),m(2,"p",8),Ne(3,3),ge(4,"async"),_(),K(5,OPt,3,4,"ng-container",9),ge(6,"async"),K(7,NPt,3,0,"ng-template",null,0,mn)(9,RPt,4,1,"ng-template",null,1,mn)),2&i){let r;const o=Gt(10);b(4),$n((null==(r=Me(4,3,s.available_spaces))?null:r.length)||0),zn(3),b(),S("ngIf",!Me(6,5,s.loading))("ngIfElse",o)}},styles:["[_nghost-%COMP%]{width:100%;height:100%;padding:.5rem;overflow:auto}"]})}return t})();const $f=()=>({standalone:!0});function FPt(t,n){if(1&t){const e=Le();m(0,"button",32),te("click",function(){return re(e),oe(M().close())}),m(1,"app-icon"),C(2,"keyboard_arrow_left"),_()()}}function LPt(t,n){if(1&t&&(m(0,"mat-option",36),C(1),_()),2&t){const e=n.$implicit;S("value",e),b(),xe(" ",e.display_name||e.name," ")}}function PPt(t,n){if(1&t){const e=Le();m(0,"mat-form-field",33)(1,"mat-select",34),te("ngModelChange",function(s){return re(e),oe(M().setRegion(s))}),K(2,LPt,2,2,"mat-option",35),ge(3,"async"),_()()}if(2&t){const e=M();b(),S("ngModel",e.region)("ngModelOptions",pn(5,$f)),b(),S("ngForOf",Me(3,3,e.regions))}}function $Pt(t,n){if(1&t&&(m(0,"mat-option",36),C(1),_()),2&t){const e=n.$implicit;S("value",e),b(),xe(" ",e.display_name||e.name," ")}}function BPt(t,n){if(1&t){const e=Le();m(0,"mat-form-field",33)(1,"mat-select",37),ge(2,"async"),ge(3,"async"),ge(4,"async"),te("ngModelChange",function(s){return re(e),oe(M().setBuilding(s))}),K(5,$Pt,2,2,"mat-option",35),ge(6,"async"),_()()}if(2&t){let e;const i=M();b(),S("ngModel",Me(2,4,i.building))("ngModelOptions",pn(12,$f))("placeholder",(null==(e=Me(3,6,i.building))?null:e.display_name)||(null==(e=Me(4,8,i.building))?null:e.name)),b(4),S("ngForOf",Me(6,10,i.buildings))}}function VPt(t,n){if(1&t&&(m(0,"div",41),C(1),ge(2,"building"),m(3,"span",42),C(4," - "),_()()),2&t){let e;const i=M().$implicit;b(),xe(" ",null==(e=Me(2,1,i.parent_id))?null:e.display_name," ")}}function zPt(t,n){if(1&t&&(m(0,"mat-option",36)(1,"div",39),K(2,VPt,5,3,"div",40),m(3,"div"),C(4),_()()()),2&t){const e=n.$implicit,i=M(2);S("value",e.id),b(2),S("ngIf",i.use_region),b(2),xe(" ",e.display_name||e.name," ")}}function UPt(t,n){if(1&t){const e=Le();m(0,"mat-form-field",33)(1,"mat-select",38),ge(2,"async"),te("ngModelChange",function(s){return re(e),oe(M().setOptions({zone_ids:s}))}),K(3,zPt,5,3,"mat-option",35),ge(4,"async"),_()()}if(2&t){let e;const i=M();b(),S("ngModel",null==(e=Me(2,4,i.options))?null:e.zone_ids)("ngModelOptions",pn(8,$f))("multiple",!0),b(2),S("ngForOf",Me(4,6,i.levels))}}function GPt(t,n){if(1&t){const e=Le();m(0,"div",43)(1,"label",24),C(2),ge(3,"translate"),m(4,"span"),C(5,"*"),_()(),m(6,"a-date-field",44),te("ngModelChange",function(s){return re(e),oe(M().form.patchValue({date_end:s}))}),C(7),ge(8,"translate"),_()()}if(2&t){const e=M();b(2),xe(" ",Me(3,7,"FORM.END_DATE"),""),b(4),S("ngModel",e.form.getRawValue().date_end)("ngModelOptions",pn(11,$f))("from",e.start_date)("to",e.end_date)("short",!0),b(),xe(" ",Me(8,9,"FORM.DATE_ERROR")," ")}}function jPt(t,n){1&t&&(m(0,"div",45)(1,"mat-checkbox",46),Ne(2,5),_()())}function HPt(t,n){if(1&t){const e=Le();m(0,"div",48)(1,"label",52),C(2),ge(3,"translate"),m(4,"span"),C(5,"*"),_()(),m(6,"a-time-field",53),te("ngModelChange",function(s){return re(e),oe(M(2).form.patchValue({date_end:s}))}),_()()}if(2&t){let e;const i=M(2);b(2),xe(" ",Me(3,5,"FORM.END_TIME"),""),b(4),S("ngModel",i.form.value.date_end)("ngModelOptions",pn(7,$f))("from",null==i.form||null==(e=i.form.getRawValue())?null:e.date)("use_24hr",i.use_24hr)}}function WPt(t,n){if(1&t&&(m(0,"div",48)(1,"label",52),C(2),ge(3,"translate"),m(4,"span"),C(5,"*"),_()(),be(6,"a-duration-field",54),_()),2&t){let e;const i=M(2);b(2),xe(" ",Me(3,4,"FORM.END_TIME"),""),b(4),S("time",null==i.form||null==(e=i.form.getRawValue())?null:e.date)("max",i.max_duration)("use_24hr",i.use_24hr)}}function qPt(t,n){if(1&t){const e=Le();m(0,"div",47)(1,"div",48)(2,"label",49),Ri(3,6),be(4,"span"),Fi(),_(),m(5,"a-time-field",50),te("ngModelChange",function(s){return re(e),oe(M().form.patchValue({date:s}))}),_()(),K(6,HPt,7,8,"div",51)(7,WPt,7,6,"div",51),_()}if(2&t){const e=M();b(5),S("ngModel",e.form.getRawValue().date)("ngModelOptions",pn(5,$f))("use_24hr",e.use_24hr),b(),S("ngIf",e.multiday),b(),S("ngIf",!e.multiday)}}function KPt(t,n){if(1&t){const e=Le();m(0,"section",55)(1,"h2",56),Ne(2,7),ge(3,"translate"),_(),m(4,"div",57)(5,"div",58),Ne(6,8),ge(7,"translate"),_(),m(8,"mat-checkbox",59),ge(9,"async"),te("ngModelChange",function(s){return re(e),oe(M().setOptions({show_fav:s}))}),_()()()}if(2&t){let e;const i=M();b(3),$n(Me(3,4,"COMMON.FAVOURITES")),zn(2),b(4),$n(Me(7,6,"ROOMS.SHOW_FAVOURITES")),zn(6),b(),S("ngModel",null==(e=Me(9,8,i.options))?null:e.show_fav)("ngModelOptions",pn(10,$f))}}function XPt(t,n){if(1&t){const e=Le();m(0,"div",57)(1,"div",63),C(2),_(),m(3,"mat-checkbox",64),ge(4,"async"),te("ngModelChange",function(s){re(e);const r=M().$implicit;return oe(M(2).toggleFeature(r,s))}),_()()}if(2&t){let e;const i=M().$implicit,s=M(2);b(2),xe(" ",s.feature_display[i]||i," "),b(),S("ngModel",null==(e=Me(4,3,s.options))||null==e.features?null:e.features.includes(i))("ngModelOptions",pn(5,$f))}}function YPt(t,n){if(1&t&&(sn(0),K(1,XPt,5,6,"div",62),rn()),2&t){const e=n.$implicit,i=M(2);b(),S("ngIf",!i.hide_features.includes(e))}}function ZPt(t,n){if(1&t&&(m(0,"section",60)(1,"h2",56),Ne(2,9),_(),K(3,YPt,2,1,"ng-container",61),ge(4,"async"),_()),2&t){const e=M();b(3),S("ngForOf",Me(4,1,e.features))}}function QPt(t,n){if(1&t){const e=Le();m(0,"div",65)(1,"button",66),te("click",function(){return re(e),oe(M().close())}),Ne(2,10),_()()}}let BR=(()=>{class t{get allow_all_day(){return!!this._settings.get("app.events.allow_all_day")}get use_region(){return!!this._settings.get("app.use_region")}get bld(){return this._org.building}get region(){return this._org.region}get form(){return this._event_form.form}get max_duration(){return this._settings.get("app.events.max_duration")||480}get feature_display(){return this._settings.get("app.events.feature_decriptions")||{}}get hide_features(){return this._settings.get("app.events.hide_features")||[]}get use_24hr(){return this._settings.get("app.use_24_hour_time")}get start_date(){return Pi(this.form.getRawValue().date).valueOf()}get end_date(){return Fs(qr(Date.now(),this._settings.get("app.events.allowed_future_days")||180))}constructor(e,i,s,r,o,a){this._bsheet_ref=e,this._settings=i,this._event_form=s,this._org=r,this._spaces=o,this._mapspeople=a,this.can_close=!1,this.options=this._event_form.options,this.building=this._org.active_building,this.buildings=this._org.active_buildings,this.levels=Qt([this._org.active_region,this._org.active_building]).pipe(ze(([l,c])=>(this.use_region?this._org.levelsForRegion(l):this._org.levelsForBuilding(c)).filter(h=>!h.tags.includes("parking")).sort((h,f)=>h.parent_id.localeCompare(f.parent_id)||(h.display_name||"").localeCompare(f.display_name||"")))),this.regions=this._org.region_list,this.using_mapspeople=this._mapspeople.available$,this.features=Qt([this._spaces.features,this._event_form.available_spaces]).pipe(ze(([l,c])=>Cs(l.concat(To(c.map(u=>u.features)))))),this.close=()=>this._bsheet_ref.dismiss(),this.setOptions=l=>this._event_form.setOptions(l),this.can_close=!!this._bsheet_ref}setBuilding(e){this._org.building=e}setRegion(e){this._org.region=e}toggleFeature(e,i){var s=this;return de(function*(){const{features:r}=yield s.options.pipe(ai(1)).toPromise(),o=(r||[]).filter(a=>e!==a);i&&o.push(e),s.setOptions({features:o})})()}static#e=this.\u0275fac=function(i){return new(i||t)(D(Q1,8),D(ln),D(Tm),D(In),D(yB),D(Rp))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["space-filters"]],inputs:{multiday:"multiday",hide_levels:"hide_levels",viewing_map:"viewing_map"},decls:35,vars:29,consts:()=>{let e,i,s,r,o,a,l,c,u,d,h,f,p;return e=$localize`:␟36173168a4643aa78634e9242a63f3a40862f166␟7173310086383878456:Space Filters`,i=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,s=$localize`:␟ed31c09fd77c36238c13d83635f3fe5294c733d2␟471816275243265264:Location`,r=$localize`:␟04cfb5fd033651743bc4b9408bd52ba4ee894070␟3158758063619980932:Date${"\ufffd#22\ufffd"}:START_TAG_SPAN:*${"\ufffd/#22\ufffd"}:CLOSE_TAG_SPAN:`,o=$localize`:␟beead5a3a21b1ca4abe67610030f8a520995de4e␟3894192522062036998: ${"\ufffd0\ufffd"}:INTERPOLATION: `,a=$localize`:␟130845b58eba8e50c98f3fba117a0168cdba4f31␟8264413387051126615:Any Region`,l=$localize`:␟50407595967bf29832e873b41f9de3502d5c3e03␟7323982518822503502:Any Level`,c=$localize`:␟d7f43e20f3a729fa3de32bc7a1f709ccd722eae5␟835486935962207481: All Day `,u=$localize`:␟02d39ddac5bbf95c424df03d5f0d22cc257556bd␟4735431816432396893: Start Time${"\ufffd#4\ufffd"}:START_TAG_SPAN:*${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:`,d=$localize`:␟bde3d9fd949ba4c6014b8e64c1362753bca1cf0c␟5010873675481014004: ${"\ufffd0\ufffd"}:INTERPOLATION: `,h=$localize`:␟210742da6591a33630e0bfba757b95e6a1d99b20␟1614226322496100282: ${"\ufffd0\ufffd"}:INTERPOLATION: `,f=$localize`:␟bf10c600bd861cfd0a23f4759562ee0ae9dbe19f␟1551920764795208868:Facilities`,p=$localize`:␟c17e2cc448524a39eb83b2937cea3235a2e8bf37␟2296888311792137027: Apply Filters `,[e,i,s,r,o,c,u,d,h,f,p,[1,"flex","items-center","border-b","border-base-200","pb-2","sm:hidden"],[1,"flex-1","pl-2"],["icon","","matRipple","","name","close-space-filters",3,"click",4,"ngIf"],[1,"font-medium","flex-2","text-center"],[1,"flex-1"],[1,"max-h-[65vh]","p-2","overflow-y-auto","overflow-x-hidden","divide-y","divide-base-200","w-full","max-w-[100vw]",3,"formGroup"],["details",""],[1,"text-lg","font-medium","mb-1"],[1,"flex-1","min-w-[8rem]","flex","flex-col"],["for","location"],["appearance","outline","class","w-full",4,"ngIf"],[1,"flex","items-center","flex-wrap","sm:space-x-2"],[1,"flex-1","min-w-[8rem]"],["for","date"],["name","date",3,"ngModelChange","ngModel","ngModelOptions","to","short"],["class","flex-1 min-w-[8rem] relative",4,"ngIf"],["class","flex justify-end -mt-2 mb-2",4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],["favs","","class","space-y-2 pb-4",4,"ngIf"],["features","","class","space-y-2",4,"ngIf"],["class","px-2 pt-2 w-full border-t border-base-200",4,"ngIf"],["icon","","matRipple","","name","close-space-filters",3,"click"],["appearance","outline",1,"w-full"],["name","region","placeholder",a,3,"ngModelChange","ngModel","ngModelOptions"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["name","building",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],["name","location","placeholder",l,3,"ngModelChange","ngModel","ngModelOptions","multiple"],[1,"flex","flex-col-reverse"],["class","opacity-30 text-xs",4,"ngIf"],[1,"opacity-30","text-xs"],[1,"opacity-0"],[1,"flex-1","min-w-[8rem]","relative"],["name","date",3,"ngModelChange","ngModel","ngModelOptions","from","to","short"],[1,"flex","justify-end","-mt-2","mb-2"],["formControlName","all_day"],[1,"flex","items-center","space-x-2"],[1,"flex-1","w-1/3"],["for","start-time"],["name","start-time",3,"ngModelChange","ngModel","ngModelOptions","use_24hr"],["class","flex-1 w-1/3",4,"ngIf"],["for","end-time"],["name","end-time",3,"ngModelChange","ngModel","ngModelOptions","from","use_24hr"],["name","end-time","formControlName","duration",3,"time","max","use_24hr"],["favs","",1,"space-y-2","pb-4"],[1,"text-lg","font-medium"],[1,"flex","items-center"],["for","fav",1,"flex-1","w-1/2"],["name","fav",3,"ngModelChange","ngModel","ngModelOptions"],["features","",1,"space-y-2"],[4,"ngFor","ngForOf"],["class","flex items-center",4,"ngIf"],["for","feat",1,"flex-1","w-1/2"],["name","feat",3,"ngModelChange","ngModel","ngModelOptions"],[1,"px-2","pt-2","w-full","border-t","border-base-200"],["btn","","matRipple","","name","apply-space-filters",1,"w-full",3,"click"]]},template:function(i,s){if(1&i&&(m(0,"div",11)(1,"div",12),K(2,FPt,3,0,"button",13),_(),m(3,"h3",14),Ne(4,0),_(),be(5,"div",15),_(),m(6,"form",16)(7,"section",17)(8,"h2",18),Ne(9,1),_(),m(10,"div",19)(11,"label",20),Ne(12,2),_(),K(13,PPt,4,6,"mat-form-field",21),ge(14,"async"),K(15,BPt,7,13,"mat-form-field",21),ge(16,"async"),K(17,UPt,5,9,"mat-form-field",21),_(),m(18,"div",22)(19,"div",23)(20,"label",24),Ri(21,3),be(22,"span"),Fi(),_(),m(23,"a-date-field",25),te("ngModelChange",function(o){return s.form.patchValue({date:o})}),Ne(24,4),ge(25,"translate"),_()(),K(26,GPt,9,12,"div",26),_(),K(27,jPt,3,0,"div",27)(28,qPt,8,6,"div",28),_(),K(29,KPt,10,11,"section",29),ge(30,"async"),K(31,ZPt,5,3,"section",30),ge(32,"async"),ge(33,"async"),_(),K(34,QPt,3,0,"div",31)),2&i){let r,o,a;b(2),S("ngIf",s.can_close),b(4),S("formGroup",s.form),b(7),S("ngIf",s.use_region&&(null==(r=Me(14,16,s.regions))?null:r.length)),b(2),S("ngIf",!s.use_region&&(null==(o=Me(16,18,s.buildings))?null:o.length)>1),b(2),S("ngIf",!s.hide_levels),b(6),S("ngModel",s.form.getRawValue().date)("ngModelOptions",pn(28,$f))("to",s.end_date)("short",!0),b(2),$n(Me(25,20,"FORM.DATE_ERROR")),zn(24),b(),S("ngIf",s.multiday),b(),S("ngIf",s.allow_all_day),b(),S("ngIf",!s.form.value.all_day),b(),S("ngIf",!s.viewing_map||!Me(30,22,s.using_mapspeople)),b(2),S("ngIf",(null==(a=Me(32,24,s.features))?null:a.length)&&(!s.viewing_map||!Me(33,26,s.using_mapspeople))),b(3),S("ngIf",s.can_close)}},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:100vw}"]})}return t})();function JPt(t,n){if(1&t){const e=Le();m(0,"button",17),te("click",function(){return re(e),oe(M().removeAllFeatures())}),C(1," Clear Filters "),_()}}function e4t(t,n){if(1&t&&(m(0,"div",18),C(1),_()),2&t){const e=M();b(),xe(" ",e.location," ")}}function t4t(t,n){if(1&t&&(sn(0),C(1),ge(2,"date"),ge(3,"date"),rn()),2&t){const e=M();b(),Ts(" ",Kt(2,2,e.start,e.time_format)," \u2014 ",Kt(3,5,e.end,e.time_format)," ")}}function n4t(t,n){1&t&&(sn(0),C(1,"All Day"),rn())}function i4t(t,n){if(1&t){const e=Le();m(0,"div",19)(1,"p",20),C(2),_(),m(3,"button",21),te("click",function(){const s=re(e).$implicit;return oe(M().removeFeature(s))}),m(4,"app-icon"),C(5,"close"),_()()()}if(2&t){const e=n.$implicit;b(2),vt(e)}}let T1e=(()=>{class t extends bn{get all_day(){return this._event_form.form.value.all_day}get start(){return this._event_form.form.value.date}get end(){const{date:e,duration:i}=this._event_form.form.value;return e+60*i*1e3}get time_format(){return this._settings.time_format}constructor(e,i,s,r){super(),this._bsheet=e,this._event_form=i,this._org=s,this._settings=r,this.view="list",this.viewChange=new it,this.options=this._event_form.options,this.location="",this.editFilters=()=>this._bsheet.open(BR)}ngOnInit(){this.subscription("opts",this.options.subscribe(({zone_ids:e})=>this._updateLocation(e)))}removeFeature(e){var i=this;return de(function*(){const s=yield i._event_form.options.pipe(ai(1)).toPromise();i._event_form.setOptions({...s,features:(s.features||[]).filter(r=>r!==e)})})()}removeAllFeatures(){var e=this;return de(function*(){const i=yield e._event_form.options.pipe(ai(1)).toPromise();e._event_form.setOptions({...i,features:[]})})()}_updateLocation(e=[]){const s=this._org.levelWithID(e)||this._org.building;this.location=s?.display_name||s?.name||""}static#e=this.\u0275fac=function(i){return new(i||t)(D(XE),D(Tm),D(In),D(ln))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["space-filters-display"]],inputs:{view:"view"},outputs:{viewChange:"viewChange"},features:[bt],decls:23,vars:20,consts:()=>{let e,i,s,r;return e=$localize`:␟19eaa5cd51d70d9ea957eecac78cfd811e9b93d8␟5208858215712453646: Filters `,i=$localize`:␟992a9a6a193a56c5b8846dc972c5e1977ee5f1aa␟8553228906889869186: Map `,s=$localize`:␟4b286e90831dd637c5cd3eb20544664ee7112669␟7787942140742011951: List `,r=$localize`:␟dfdd3d7879401ba6edca2e5198df414f15c112c2␟5300384898733875729: Min. ${"\ufffd0\ufffd"}:INTERPOLATION: People `,[e,i,s,r,["actions","",1,"sm:hidden","space-x-2","flex","items-center","p-2"],["btn","","matRipple","","name","edit-space-filters",1,"flex-1","w-1/2",3,"click"],[1,"flex","items-center"],["btn","","matRipple","","name","view-space-map",1,"rounded-l","rounded-r-none",3,"click"],["btn","","matRipple","","name","view-space-list",1,"rounded-r","rounded-l-none",3,"click"],["filters","",1,"flex","items-center","flex-wrap","p-2","w-[35rem]","max-w-full","sm:max-w-[35rem]"],["btn","","matRipple","","name","clear-space-filters","class","min-h-[2rem] mb-2 mr-2",3,"click",4,"ngIf"],["filter-item","","zone","","class","dark:border-base-200-500",4,"ngIf"],["filter-item","","date","",1,"dark:border-base-200-500"],["filter-item","","time","",1,"dark:border-base-200-500"],[4,"ngIf"],["filter-item","","count","",1,"dark:border-base-200-500"],["filter-item","",4,"ngFor","ngForOf"],["btn","","matRipple","","name","clear-space-filters",1,"min-h-[2rem]","mb-2","mr-2",3,"click"],["filter-item","","zone","",1,"dark:border-base-200-500"],["filter-item",""],[1,"truncate"],["icon","","matRipple","","name","remove-space-filter",1,"-mr-4",3,"click"]]},template:function(i,s){if(1&i&&(m(0,"section",4)(1,"button",5),te("click",function(){return s.editFilters()}),Ne(2,0),_(),m(3,"div",6)(4,"button",7),te("click",function(){return s.view="map",s.viewChange.emit(s.view)}),Ne(5,1),_(),m(6,"button",8),te("click",function(){return s.view="list",s.viewChange.emit(s.view)}),Ne(7,2),_()()(),m(8,"section",9),K(9,JPt,2,0,"button",10),ge(10,"async"),K(11,e4t,2,1,"div",11),m(12,"div",12),C(13),ge(14,"date"),_(),m(15,"div",13),K(16,t4t,4,8,"ng-container",14)(17,n4t,2,0,"ng-container",14),_(),m(18,"div",15),Ne(19,3),ge(20,"async"),_(),K(21,i4t,6,1,"div",16),ge(22,"async"),_()),2&i){let r,o,a;b(4),rt("inverse","map"!==s.view),b(2),rt("inverse","list"!==s.view),b(3),S("ngIf",(null==(r=Me(10,11,s.options))||null==r.features?null:r.features.length)>1),b(2),S("ngIf",s.location),b(2),xe(" ",Kt(14,13,s.start,"mediumDate")," "),b(3),S("ngIf",!s.all_day),b(),S("ngIf",s.all_day),b(3),$n((null==(o=Me(20,16,s.options))?null:o.capacity)||2),zn(19),b(),S("ngForOf",null==(a=Me(22,18,s.options))?null:a.features)}},dependencies:[hn,Ot,zt,jt,yi,Rs],styles:["[filter-item][_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 1rem;min-height:2rem;font-size:.875rem;border:1px solid rgba(0,0,0,.2);border-radius:1.25rem;margin-right:.5rem;margin-bottom:.5rem;max-width:100%;text-align:center}[filter-item][_ngcontent-%COMP%]:hover{background:#0000001a}[filter-item][_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:.5rem}"]})}return t})();function s4t(t,n){1&t&&be(0,"img",18),2&t&&S("source",M(2).space.images[0])}function r4t(t,n){1&t&&be(0,"div",19)}function o4t(t,n){if(1&t&&(m(0,"div",20),C(1),_()),2&t){const e=M(2);b(),xe(" ",e.available_until," ")}}function a4t(t,n){if(1&t&&(m(0,"div",21)(1,"span"),Ne(2,3),_(),C(3),_()),2&t){const e=M(2);b(3),Ts("",e.space.capacity," ",1===e.space.capacity?"person":"people"," ")}}function l4t(t,n){if(1&t&&(m(0,"li",24),C(1),_()),2&t){const e=n.$implicit;b(),xe(" ",e," ")}}function c4t(t,n){if(1&t&&(m(0,"ul",22),K(1,l4t,2,1,"li",23),_()),2&t){const e=M(2);b(),S("ngForOf",e.space.features)}}function u4t(t,n){if(1&t&&(m(0,"div",5),be(1,"div",6),m(2,"div",7)(3,"div",8),K(4,s4t,1,1,"img",9)(5,r4t,1,0,"div",10),_(),m(6,"div",11)(7,"div",12),C(8," "),Ne(9,2),C(10," "),_(),K(11,o4t,2,1,"div",13),_(),m(12,"div",14)(13,"h4",15),C(14),_(),K(15,a4t,4,2,"div",16)(16,c4t,2,1,"ul",17),_()()()),2&t){const e=M();rt("-translate-x-full","end"===e.x_pos)("-translate-y-full","bottom"===e.y_pos),S("id",null==e.space?null:e.space.id),b(3),rt("bg-neutral",e.space.images[0])("h-32",e.space.images[0])("h-8",!e.space.images[0]),b(),S("ngIf",e.space.images[0]),b(),S("ngIf",e.space.images[0]),b(2),bo("capitalize rounded p-1 px-2 text-light border border-white shadow "+e.status),b(2),$n(e.status),zn(9),b(2),S("ngIf","not-bookable"!==e.status),b(3),xe(" ",e.space.display_name||e.space.name," "),b(),S("ngIf",e.space.capacity>=0),b(),S("ngIf",(null==e.space.features?null:e.space.features.length)>0&&e.show_features)}}let kG=(()=>{class t{get show_features(){return!this._settings.get("app.spaces.hide_features")}constructor(e,i,s){this._details=e,this._settings=i,this._element=s,this.space=this._details.space,this.events=this._details.events,this.status=this._details.status}ngOnInit(){setTimeout(()=>this.updateOffset(),200)}updateOffset(){const e=this._element.nativeElement.getBoundingClientRect();this.x_pos=e.x<document.body.clientWidth/2?"start":"end",this.y_pos=e.y<document.body.clientHeight/2?"top":"bottom"}get available_until(){return""}static#e=this.\u0275fac=function(i){return new(i||t)(D(Ya),D(ln),D(Bt))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["explore-space-info"]],decls:4,vars:7,consts:()=>{let e,i;return e=$localize`:␟86e6b3a473ea3e05830d2aef91c81199de1b9d33␟3658078071800974217:{VAR_SELECT, select, free {Free } busy {Busy } pending {Pending } reserved {Reserved } other {Not Bookable }}`,e=o_(e,{VAR_SELECT:"\ufffd0\ufffd"}),i=$localize`:␟36c2a5db33c6cfc9e239e589f975f5492bbb0550␟2292396409867038415:Capacity: `,[["tooltip",""],["space_tooltip",""],e,i,["customTooltip","",1,"h-full","w-full","pointer-events-auto","relative","hidden","sm:block","cursor-pointer",3,"mouseenter","content","backdrop","xPosition","yPosition","hover","delay"],["name","space-info",1,"absolute","rounded","bg-base-100","top-0","left-0","transform","shadow","pointer-events-none","overflow-hidden",3,"id"],[1,"arrow"],[1,"relative"],[1,"w-full","overflow-hidden","flex","items-center","justify-center","relative","bg-opacity-20"],["auth","","class","object-cover min-h-full min-w-full",3,"source",4,"ngIf"],["class","absolute inset-0 bg-neutral",4,"ngIf"],[1,"absolute","top-2","left-2","flex","flex-wrap","text-sm"],["status",""],["available-until","",4,"ngIf"],[1,"flex","flex-col","py-4","px-2"],[1,"font-medium","text-xl","mb-2","px-2"],["capacity","","class","text-base px-2 mb-2",4,"ngIf"],["class","flex flex-wrap",4,"ngIf"],["auth","",1,"object-cover","min-h-full","min-w-full",3,"source"],[1,"absolute","inset-0","bg-neutral"],["available-until",""],["capacity","",1,"text-base","px-2","mb-2"],[1,"flex","flex-wrap"],["class","text-xs px-2 py-1 m-1 rounded-2xl bg-base-200 font-medium",4,"ngFor","ngForOf"],[1,"text-xs","px-2","py-1","m-1","rounded-2xl","bg-base-200","font-medium"]]},template:function(i,s){if(1&i){const r=Le();m(0,"div",4,0),te("mouseenter",function(){return re(r),oe(s.updateOffset())}),_(),K(2,u4t,17,20,"ng-template",null,1,mn)}2&i&&(S("content",Gt(3))("backdrop",!1)("xPosition","center")("yPosition","center")("hover",!0)("delay",3e3),$t("id",(null==s.space?null:s.space.map_id)||(null==s.space?null:s.space.id)))},styles:["[name=space-info][_ngcontent-%COMP%]{width:16rem}[status][_ngcontent-%COMP%]{background-color:#43a047;font-weight:500}[status].busy[_ngcontent-%COMP%]{background-color:#e53935}[status].pending[_ngcontent-%COMP%]{background-color:#ffb300}[status].not-bookable[_ngcontent-%COMP%]{background-color:#757575}"]})}return t})();function d4t(t,n){1&t&&(m(0,"button",10)(1,"app-icon"),C(2,"close"),_()())}function h4t(t,n){1&t&&(m(0,"div",15)(1,"label",24),C(2,"Host"),m(3,"span"),C(4,"*"),_(),C(5,":"),_(),be(6,"a-user-search-field",25),_())}function f4t(t,n){if(1&t&&(m(0,"div",26)(1,"label"),Ne(2,5),_(),m(3,"div",27),C(4),ge(5,"date"),ge(6,"date"),_()()),2&t){const e=M(3);b(4),Ts(" ",Kt(5,2,e.form.value.date,"mediumDate")," at ",Kt(6,5,e.form.value.date,e.time_format)," ")}}function p4t(t,n){if(1&t&&(m(0,"div",28)(1,"label"),Ne(2,6),_(),be(3,"a-duration-field",29),_()),2&t){const e=M(3);b(3),S("time",e.form.value.date)("max",e.max_duration)("use_24hr",e.use_24hr_time)}}function m4t(t,n){if(1&t&&(m(0,"main",14)(1,"div",15)(2,"label",16),C(3,"Title"),m(4,"span"),C(5,"*"),_(),C(6,":"),_(),m(7,"mat-form-field",17),be(8,"input",18),m(9,"mat-error"),Ne(10,3),_()()(),K(11,h4t,7,0,"div",19),m(12,"div",15)(13,"label"),Ne(14,4),_(),m(15,"div",20),C(16),_()(),m(17,"div",21),K(18,f4t,7,8,"div",22)(19,p4t,4,3,"div",23),_()()),2&t){const e=M(2);S("formGroup",e.form),b(11),S("ngIf",e.can_book_for_others),b(5),xe(" ",(null==e.form.controls.resources||null==e.form.controls.resources.value[0]?null:e.form.controls.resources.value[0].display_name)||(null==e.form.controls.resources||null==e.form.controls.resources.value[0]?null:e.form.controls.resources.value[0].name)," "),b(2),S("ngIf",e.form.controls.date),b(),S("ngIf",e.form.controls.duration)}}function _4t(t,n){if(1&t){const e=Le();sn(0),K(1,m4t,20,5,"main",11),m(2,"footer",12)(3,"button",13),te("click",function(){return re(e),oe(M().save())}),Ne(4,2),_()(),rn()}if(2&t){const e=M();b(),S("ngIf",e.form)}}function g4t(t,n){if(1&t&&(m(0,"div",30),be(1,"mat-spinner",31),m(2,"p"),C(3),ge(4,"async"),_()()),2&t){const e=M();b(),S("diameter",48),b(2),vt(Me(4,2,e.loading))}}let DG=(()=>{class t{get form(){return this._event_form.form}get max_duration(){return this._settings.get("app.events.max_duration")||240}get can_book_for_others(){return this._settings.get("app.events.can_book_for_others")}get use_24hr_time(){return this._settings.get("app.use_24_hour_time")}get time_format(){return this._settings.time_format}constructor(e,i,s,r,o){this._data=e,this._settings=i,this._event_form=s,this._dialog_ref=r,this._router=o,this.loading=this._event_form.loading}ngOnInit(){this._event_form.newForm(),this.form.patchValue({resources:[this._data.space],host:fn().email,organiser:fn()})}save(){var e=this;return de(function*(){yield e._event_form.postForm().catch(i=>{throw Mi(i),i}),e._settings.app_name.toLowerCase().includes("workplace")?e._router.navigate(["/book","meeting","success"]):Zd("Successfully booked room."),e._dialog_ref.close()})()}static#e=this.\u0275fac=function(i){return new(i||t)(D(Js),D(ln),D(Tm),D(Da),D(Hr))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["explore-booking-modal"]],decls:10,vars:7,consts:()=>{let e,i,s,r,o,a,l;return e=$localize`:␟bd532c9813cc0577fcc3ff32640a61afef2bf40a␟6464057252608386690:New Booking`,i=$localize`:␟2fa313c798ad138557539ba3c6a3bfdc426eaaa2␟2367152680379951719: Save `,s=$localize`:␟5cf0071757dd8065e052662e4d191a210c766579␟2997066279074525950:Booking Title`,r=$localize`:␟35a900d9fa8e824539ca4b0d1a10bd2f7f8c1172␟8953173802652113530:Booking title is required`,o=$localize`:␟0f342dcd63b8732a5599eb91ce166b55335dbbc4␟1329943553963489238:Space:`,a=$localize`:␟05fa0bded36de6e73a1fa44838b627349dace044␟6899410641137821757:Date:`,l=$localize`:␟e17a1d75189da843f541f7764f188f2b19a97df2␟4220765745195024064:Duration:`,[["load_state",""],e,i,r,o,a,l,[1,"flex-1"],["icon","","matRipple","","mat-dialog-close","",4,"ngIf"],[4,"ngIf","ngIfElse"],["icon","","matRipple","","mat-dialog-close",""],["class","p-4 max-w-[85vw]",3,"formGroup",4,"ngIf"],[1,"flex","justify-center","p-2","border-t","border-base-200"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"p-4","max-w-[85vw]",3,"formGroup"],[1,"flex","flex-col"],["for","title"],["appearance","outline"],["matInput","","name","title","formControlName","title","placeholder",s],["class","flex flex-col",4,"ngIf"],["name","space",1,"px-4","py-3","border","border-base-200","rounded","w-full","mb-4"],[1,"flex","sm:space-x-4","flex-wrap"],["class","flex flex-col flex-1 w-full sm:w-auto",4,"ngIf"],["class","flex flex-col w-full sm:w-auto",4,"ngIf"],["for","host"],["name","host","formControlName","organiser",1,"mb-4"],[1,"flex","flex-col","flex-1","w-full","sm:w-auto"],[1,"px-4","py-3","border","border-base-200","rounded","w-full","mb-4"],[1,"flex","flex-col","w-full","sm:w-auto"],["formControlName","duration",1,"w-full",3,"time","max","use_24hr"],["load","",1,"h-64","flex","flex-col","items-center","justify-center"],[1,"m-4",3,"diameter"]]},template:function(i,s){if(1&i&&(m(0,"header")(1,"h2"),Ne(2,1),_(),be(3,"div",7),K(4,d4t,3,0,"button",8),ge(5,"async"),_(),K(6,_4t,5,1,"ng-container",9),ge(7,"async"),K(8,g4t,5,4,"ng-template",null,0,mn)),2&i){const r=Gt(9);b(4),S("ngIf",!Me(5,3,s.loading)),b(2),S("ngIf",!Me(7,5,s.loading))("ngIfElse",r)}},styles:["header[_ngcontent-%COMP%]{max-width:calc(100vw + 100%)}[load][_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem)}"]})}return t})();function Lr(t){var n=this;t="object"==typeof t?t:{},n.revision=3,n.imageTypes={bmp:"image/bmp",gif:"image/gif",jpeg:"image/jpeg",jpg:"image/jpg",png:"image/png","svg+xml":"image/svg+xml",tiff:"image/tiff",webp:"image/webp","x-icon":"image/x-icon"},n.toTable=t.toTable,n.domElement=n.toTable?document.createElement("div"):document.createElement("canvas"),n.url=t.url||"",n.size=t.size||280,n.qrc=!1,n.colorLight=t.colorLight||"#fff",n.colorDark=t.colorDark||"#000",n.ecclevel=t.ecclevel||1,n.noBorder=t.noBorder,n.borderSize=t.borderSize||4;var e,i,s,r,o,a,l,c=[],u=[],d=[],h=[],f=[],p=[],g=function(H,P){var X;H>P&&(X=H,H=P,P=X),X=P,X*=P,X+=P,X>>=1,h[X+=H]=1},v=function(H,P){var X;for(d[H+s*P]=1,X=-2;X<2;X++)d[H+X+s*(P-2)]=1,d[H-2+s*(P+X+1)]=1,d[H+2+s*(P+X)]=1,d[H+X+1+s*(P+2)]=1;for(X=0;X<2;X++)g(H-1,P+X),g(H+1,P-X),g(H-X,P-1),g(H+X,P+1)},y=function(H){for(;H>=255;)H=((H-=255)>>8)+(255&H);return H},w=function(H,P,X,ne){var me,Ee,Te,$e=Lr.gexp,Xe=Lr.glog;for(me=0;me<ne;me++)c[X+me]=0;for(me=0;me<P;me++){if(255!=(Te=Xe[c[H+me]^c[X]]))for(Ee=1;Ee<ne;Ee++)c[X+Ee-1]=c[X+Ee]^$e[y(Te+p[ne-Ee])];else for(Ee=X;Ee<X+ne;Ee++)c[Ee]=c[Ee+1];c[X+ne-1]=255==Te?0:$e[y(Te+p[0])]}},E=function(H,P){var X;return H>P&&(X=H,H=P,P=X),X=P,X+=P*P,X>>=1,h[X+=H]},T=function(H){var P,X,ne,me;switch(H){case 0:for(X=0;X<s;X++)for(P=0;P<s;P++)P+X&1||E(P,X)||(d[P+X*s]^=1);break;case 1:for(X=0;X<s;X++)for(P=0;P<s;P++)1&X||E(P,X)||(d[P+X*s]^=1);break;case 2:for(X=0;X<s;X++)for(ne=0,P=0;P<s;P++,ne++)3==ne&&(ne=0),ne||E(P,X)||(d[P+X*s]^=1);break;case 3:for(me=0,X=0;X<s;X++,me++)for(3==me&&(me=0),ne=me,P=0;P<s;P++,ne++)3==ne&&(ne=0),ne||E(P,X)||(d[P+X*s]^=1);break;case 4:for(X=0;X<s;X++)for(ne=0,me=X>>1&1,P=0;P<s;P++,ne++)3==ne&&(ne=0,me=!me),me||E(P,X)||(d[P+X*s]^=1);break;case 5:for(me=0,X=0;X<s;X++,me++)for(3==me&&(me=0),ne=0,P=0;P<s;P++,ne++)3==ne&&(ne=0),(P&X&1)+!(!ne|!me)||E(P,X)||(d[P+X*s]^=1);break;case 6:for(me=0,X=0;X<s;X++,me++)for(3==me&&(me=0),ne=0,P=0;P<s;P++,ne++)3==ne&&(ne=0),(P&X&1)+(ne&&ne==me)&1||E(P,X)||(d[P+X*s]^=1);break;case 7:for(me=0,X=0;X<s;X++,me++)for(3==me&&(me=0),ne=0,P=0;P<s;P++,ne++)3==ne&&(ne=0),(ne&&ne==me)+(P+X&1)&1||E(P,X)||(d[P+X*s]^=1)}},L=function(H){var P,X=0;for(P=0;P<=H;P++)f[P]>=5&&(X+=Lr.N1+f[P]-5);for(P=3;P<H-1;P+=2)f[P-2]==f[P+2]&&f[P+2]==f[P-1]&&f[P-1]==f[P+1]&&3*f[P-1]==f[P]&&(0==f[P-3]||P+3>H||3*f[P-3]>=4*f[P]||3*f[P+3]>=4*f[P])&&(X+=Lr.N3);return X},W=function(){var H,P,X,ne,me,Ee=0,Te=0;for(P=0;P<s-1;P++)for(H=0;H<s-1;H++)(d[H+s*P]&&d[H+1+s*P]&&d[H+s*(P+1)]&&d[H+1+s*(P+1)]||!(d[H+s*P]||d[H+1+s*P]||d[H+s*(P+1)]||d[H+1+s*(P+1)]))&&(Ee+=Lr.N2);for(P=0;P<s;P++){for(f[0]=0,X=ne=H=0;H<s;H++)(me=d[H+s*P])==ne?f[X]++:f[++X]=1,Te+=(ne=me)?1:-1;Ee+=L(X)}Te<0&&(Te=-Te);var $e=Te,Xe=0;for($e+=$e<<2,$e<<=1;$e>s*s;)$e-=s*s,Xe++;for(Ee+=Xe*Lr.N4,H=0;H<s;H++){for(f[0]=0,X=ne=P=0;P<s;P++)(me=d[H+s*P])==ne?f[X]++:f[++X]=1,ne=me;Ee+=L(X)}return Ee};n.genframe=function(H){var P,X,ne,me,Ee,Te,$e,Xe,Ce=Lr.eccblocks,Fe=Lr.gexp,Ie=Lr.glog;me=H.length,i=0;do{if(i++,ne=4*(e-1)+16*(i-1),r=Ce[ne++],o=Ce[ne++],a=Ce[ne++],l=Ce[ne],me<=(ne=a*(r+o)+o-3+(i<=9)))break}while(i<40);for(s=17+4*i,Ee=a+(a+l)*(r+o)+o,me=0;me<Ee;me++)u[me]=0;for(c=H.slice(0),me=0;me<s*s;me++)d[me]=0;for(me=0;me<(s*(s+1)+1)/2;me++)h[me]=0;for(me=0;me<3;me++){for(ne=0,X=0,1==me&&(ne=s-7),2==me&&(X=s-7),d[X+3+s*(ne+3)]=1,P=0;P<6;P++)d[X+P+s*ne]=1,d[X+s*(ne+P+1)]=1,d[X+6+s*(ne+P)]=1,d[X+P+1+s*(ne+6)]=1;for(P=1;P<5;P++)g(X+P,ne+1),g(X+1,ne+P+1),g(X+5,ne+P),g(X+P+1,ne+5);for(P=2;P<4;P++)d[X+P+s*(ne+2)]=1,d[X+2+s*(ne+P+1)]=1,d[X+4+s*(ne+P)]=1,d[X+P+1+s*(ne+4)]=1}if(i>1)for(me=Lr.adelta[i],X=s-7;;){for(P=s-7;P>me-3&&(v(P,X),!(P<me));)P-=me;if(X<=me+9)break;v(6,X-=me),v(X,6)}for(d[8+s*(s-8)]=1,X=0;X<7;X++)g(7,X),g(s-8,X),g(7,X+s-7);for(P=0;P<8;P++)g(P,7),g(P+s-8,7),g(P,s-8);for(P=0;P<9;P++)g(P,8);for(P=0;P<8;P++)g(P+s-8,8),g(8,P);for(X=0;X<7;X++)g(8,X+s-7);for(P=0;P<s-14;P++)1&P?(g(8+P,6),g(6,8+P)):(d[8+P+6*s]=1,d[6+s*(8+P)]=1);if(i>6)for(me=Lr.vpat[i-7],ne=17,P=0;P<6;P++)for(X=0;X<3;X++,ne--)1&(ne>11?i>>ne-12:me>>ne)?(d[5-P+s*(2-X+s-11)]=1,d[2-X+s-11+s*(5-P)]=1):(g(5-P,2-X+s-11),g(2-X+s-11,5-P));for(X=0;X<s;X++)for(P=0;P<=X;P++)d[P+s*X]&&g(P,X);for(Ee=c.length,Te=0;Te<Ee;Te++)u[Te]=c.charCodeAt(Te);if(c=u.slice(0),Ee>=(P=a*(r+o)+o)-2&&(Ee=P-2,i>9&&Ee--),Te=Ee,i>9){for(c[Te+2]=0,c[Te+3]=0;Te--;)c[Te+3]|=255&(me=c[Te])<<4,c[Te+2]=me>>4;c[2]|=255&Ee<<4,c[1]=Ee>>4,c[0]=64|Ee>>12}else{for(c[Te+1]=0,c[Te+2]=0;Te--;)c[Te+2]|=255&(me=c[Te])<<4,c[Te+1]=me>>4;c[1]|=255&Ee<<4,c[0]=64|Ee>>4}for(Te=Ee+3-(i<10);Te<P;)c[Te++]=236,c[Te++]=17;for(p[0]=1,Te=0;Te<l;Te++){for(p[Te+1]=1,$e=Te;$e>0;$e--)p[$e]=p[$e]?p[$e-1]^Fe[y(Ie[p[$e]]+Te)]:p[$e-1];p[0]=Fe[y(Ie[p[0]]+Te)]}for(Te=0;Te<=l;Te++)p[Te]=Ie[p[Te]];for(ne=P,X=0,Te=0;Te<r;Te++)w(X,a,ne,l),X+=a,ne+=l;for(Te=0;Te<o;Te++)w(X,a+1,ne,l),X+=a+1,ne+=l;for(X=0,Te=0;Te<a;Te++){for($e=0;$e<r;$e++)u[X++]=c[Te+$e*a];for($e=0;$e<o;$e++)u[X++]=c[r*a+Te+$e*(a+1)]}for($e=0;$e<o;$e++)u[X++]=c[r*a+Te+$e*(a+1)];for(Te=0;Te<l;Te++)for($e=0;$e<r+o;$e++)u[X++]=c[P+Te+$e*l];for(c=u,P=X=s-1,ne=Ee=1,Xe=(a+l)*(r+o)+o,Te=0;Te<Xe;Te++)for(me=c[Te],$e=0;$e<8;$e++,me<<=1){128&me&&(d[P+s*X]=1);do{Ee?P--:(P++,ne?0!=X?X--:(ne=!ne,6==(P-=2)&&(P--,X=9)):X!=s-1?X++:(ne=!ne,6==(P-=2)&&(P--,X-=8))),Ee=!Ee}while(E(P,X))}for(c=d.slice(0),me=0,X=3e4,ne=0;ne<8&&(T(ne),(P=W())<X&&(X=P,me=ne),7!=me);ne++)d=c.slice(0);for(me!=ne&&T(me),X=Lr.fmtword[me+(e-1<<3)],ne=0;ne<8;ne++,X>>=1)1&X&&(d[s-1-ne+8*s]=1,ne<6?d[8+s*ne]=1:d[8+s*(ne+1)]=1);for(ne=0;ne<7;ne++,X>>=1)1&X&&(d[8+s*(s-7+ne)]=1,ne?d[6-ne+8*s]=1:d[7+8*s]=1);return d},n.init=function(){e=n.ecclevel;var H=n.genframe(n.url);n.toTable?n.tableWrite(H,s):n.canvasWrite(H,s)},n.init()}Lr.prototype={canvasWrite:function(t,n){if(!this.qrc&&(this.qrc=this.getContext(this.domElement),!this.qrc))return this.toTable=!0,this.domElement=document.createElement("div"),void this.tableWrite(t,n);var e=this.size,i=this.qrc;i.lineWidth=1;var s=e;s/=n+10,s=Math.round(s-.5);var r=4;this.noBorder?(i.canvas.width=i.canvas.height=s*n,r=0):i.canvas.width=i.canvas.height=e,i.clearRect(0,0,e,e),i.fillStyle=this.colorLight,i.fillRect(0,0,s*(n+8),s*(n+8)),i.fillStyle=this.colorDark;for(var o=0;o<n;o++)for(var a=0;a<n;a++)t[a*n+o]&&i.fillRect(s*(r+o),s*(r+a),s,s)},tableWrite:function(t,n){var e=this,i=Math.round(this.size/n-3.5)+"px",s=n+(e.noBorder?0:2*e.borderSize),r=e.borderSize,o="width:"+i+";height:"+i+";",a=e.colorLight,l=e.colorDark,c=document.createElement("table");c.style.cssText="border:0;border-collapse:collapse;";for(var u,d=document.createElement("tr"),h=document.createElement("td"),f=function(){return h.cloneNode()},p=function(){var L=f();return L.style.cssText=o+"background:"+a,L},g=function(L){for(var W=L.firstChild,H=0;H<r;H++)L.insertBefore(p(),W),L.appendChild(p())},v=0;v<n;v++){var y=d.cloneNode();c.appendChild(y);for(var w=0;w<n;w++)if(1===t[v*n+w]){var E=(u=void 0,(u=f()).style.cssText=o+"background:"+l,u);y.appendChild(E)}else{var T=p();y.appendChild(T)}e.noBorder||g(y)}e.noBorder||function(L){for(var W=L.firstChild,H=0;H<e.borderSize;H++){for(var P=d.cloneNode(),X=0;X<s;X++){var ne=p();P.appendChild(ne)}L.appendChild(P),L.insertBefore(P.cloneNode(!0),W)}}(c),e.domElement.innerHTML="",e.domElement.appendChild(c)},getContext:function(t){return t.getContext&&t.getContext("2d")?t.getContext("2d"):(console.log("Browser does not have 2d Canvas support"),!1)},toImage:function(t){if(this.qrc){var n=this.imageTypes[t];if(!n)throw new Error(t+" is not a valid image type ");var e=new Image;return e.src=this.domElement.toDataURL(n),e}}},Lr.adelta=[0,11,15,19,23,27,31,16,18,20,22,24,26,28,20,22,24,24,26,28,28,22,24,24,26,26,28,28,24,24,26,26,26,28,28,24,26,26,26,28,28],Lr.vpat=[3220,1468,2713,1235,3062,1890,2119,1549,2344,2936,1117,2583,1330,2470,1667,2249,2028,3780,481,4011,142,3098,831,3445,592,2517,1776,2234,1951,2827,1070,2660,1345,3177],Lr.fmtword=[30660,29427,32170,30877,26159,25368,27713,26998,21522,20773,24188,23371,17913,16590,20375,19104,13663,12392,16177,14854,9396,8579,11994,11245,5769,5054,7399,6608,1890,597,3340,2107],Lr.eccblocks=[1,0,19,7,1,0,16,10,1,0,13,13,1,0,9,17,1,0,34,10,1,0,28,16,1,0,22,22,1,0,16,28,1,0,55,15,1,0,44,26,2,0,17,18,2,0,13,22,1,0,80,20,2,0,32,18,2,0,24,26,4,0,9,16,1,0,108,26,2,0,43,24,2,2,15,18,2,2,11,22,2,0,68,18,4,0,27,16,4,0,19,24,4,0,15,28,2,0,78,20,4,0,31,18,2,4,14,18,4,1,13,26,2,0,97,24,2,2,38,22,4,2,18,22,4,2,14,26,2,0,116,30,3,2,36,22,4,4,16,20,4,4,12,24,2,2,68,18,4,1,43,26,6,2,19,24,6,2,15,28,4,0,81,20,1,4,50,30,4,4,22,28,3,8,12,24,2,2,92,24,6,2,36,22,4,6,20,26,7,4,14,28,4,0,107,26,8,1,37,22,8,4,20,24,12,4,11,22,3,1,115,30,4,5,40,24,11,5,16,20,11,5,12,24,5,1,87,22,5,5,41,24,5,7,24,30,11,7,12,24,5,1,98,24,7,3,45,28,15,2,19,24,3,13,15,30,1,5,107,28,10,1,46,28,1,15,22,28,2,17,14,28,5,1,120,30,9,4,43,26,17,1,22,28,2,19,14,28,3,4,113,28,3,11,44,26,17,4,21,26,9,16,13,26,3,5,107,28,3,13,41,26,15,5,24,30,15,10,15,28,4,4,116,28,17,0,42,26,17,6,22,28,19,6,16,30,2,7,111,28,17,0,46,28,7,16,24,30,34,0,13,24,4,5,121,30,4,14,47,28,11,14,24,30,16,14,15,30,6,4,117,30,6,14,45,28,11,16,24,30,30,2,16,30,8,4,106,26,8,13,47,28,7,22,24,30,22,13,15,30,10,2,114,28,19,4,46,28,28,6,22,28,33,4,16,30,8,4,122,30,22,3,45,28,8,26,23,30,12,28,15,30,3,10,117,30,3,23,45,28,4,31,24,30,11,31,15,30,7,7,116,30,21,7,45,28,1,37,23,30,19,26,15,30,5,10,115,30,19,10,47,28,15,25,24,30,23,25,15,30,13,3,115,30,2,29,46,28,42,1,24,30,23,28,15,30,17,0,115,30,10,23,46,28,10,35,24,30,19,35,15,30,17,1,115,30,14,21,46,28,29,19,24,30,11,46,15,30,13,6,115,30,14,23,46,28,44,7,24,30,59,1,16,30,12,7,121,30,12,26,47,28,39,14,24,30,22,41,15,30,6,14,121,30,6,34,47,28,46,10,24,30,2,64,15,30,17,4,122,30,29,14,46,28,49,10,24,30,24,46,15,30,4,18,122,30,13,32,46,28,48,14,24,30,42,32,15,30,20,4,117,30,40,7,47,28,43,22,24,30,10,67,15,30,19,6,118,30,18,31,47,28,34,34,24,30,20,61,15,30],Lr.glog=[255,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175],Lr.gexp=[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,0],Lr.N1=3,Lr.N2=3,Lr.N3=40,Lr.N4=10;const Bf={free:"#43a047",pending:"#ffb300",reserved:"#e65100",busy:"#e53935","signs-of-life":"#1565c0","not-bookable":"#757575",unknown:"#757575"};function y4t(t,n){1&t&&be(0,"div",16)}function w4t(t,n){1&t&&(m(0,"app-icon",17),C(1," done "),_())}let D1e=(()=>{class t{get color(){return this.active?"#F4511E":this.selected?"#D32F2F":"#309251"}constructor(e){this._data=e,this.selected=!0===this._data.selected,this.active=!0===this._data.active}static#e=this.\u0275fac=function(i){return new(i||t)(D(Ya))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["space-location-pin"]],decls:17,vars:3,consts:[[1,"absolute","bottom-0","left-1/2","-translate-x-1/2"],["width","44","height","60","viewBox","0 0 66 80","fill","none","xmlns","http://www.w3.org/2000/svg"],["filter","url(#filter0_d_1065_10313)"],["d","M19.724 53.0408C25.0871 60.3435 30.5582 65.8583 31.0184 66.3178C31.4558 66.755 32.0489 67.0007 32.6674 67.0008H32.6678C33.2863 67.0007 33.8795 66.755 34.3169 66.3178C34.7771 65.8583 40.2481 60.3435 45.6112 53.0408C48.2928 49.3894 50.963 45.2701 52.9663 41.0957C54.9629 36.935 56.3331 32.6459 56.3342 28.6724C56.364 25.5564 55.7725 22.4657 54.5941 19.5809C53.415 16.6946 51.6722 14.0724 49.4675 11.8677C47.2629 9.66308 44.6407 7.92024 41.7544 6.74121C38.8711 5.5634 35.782 4.97184 32.6676 5.00103C29.5533 4.97184 26.4642 5.5634 23.5809 6.74121C20.6946 7.92024 18.0724 9.66308 15.8677 11.8677C13.6631 14.0724 11.9202 16.6946 10.7412 19.5809C9.56278 22.4657 8.97122 25.5565 9.00108 28.6726C9.0022 32.646 10.3724 36.9351 12.369 41.0957C14.3723 45.2701 17.0425 49.3894 19.724 53.0408Z","stroke","#0B421D","stroke-width","2"],["id","filter0_d_1065_10313","x","0","y","0","width","65.3353","height","80.001","filterUnits","userSpaceOnUse","color-interpolation-filters","sRGB"],["flood-opacity","0","result","BackgroundImageFix"],["in","SourceAlpha","type","matrix","values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0","result","hardAlpha"],["dy","4"],["stdDeviation","4"],["in2","hardAlpha","operator","out"],["type","matrix","values","0 0 0 0 0.0196078 0 0 0 0 0.109804 0 0 0 0 0.172549 0 0 0 0.2 0"],["mode","normal","in2","BackgroundImageFix","result","effect1_dropShadow_1065_10313"],["mode","normal","in","SourceGraphic","in2","effect1_dropShadow_1065_10313","result","shape"],[1,"absolute","top-0","left-0","w-full","h-3/4","flex","items-center","justify-center"],["class","relative z-10 h-4 w-4 rounded-full bg-base-100 border-2 border-[#0B421D]",4,"ngIf"],["class","relative text-white z-10 text-2xl",4,"ngIf"],[1,"relative","z-10","h-4","w-4","rounded-full","bg-base-100","border-2","border-[#0B421D]"],[1,"relative","text-white","z-10","text-2xl"]],template:function(i,s){1&i&&(m(0,"div",0),ra(),m(1,"svg",1)(2,"g",2),be(3,"path",3),_(),m(4,"defs")(5,"filter",4),be(6,"feFlood",5)(7,"feColorMatrix",6)(8,"feOffset",7)(9,"feGaussianBlur",8)(10,"feComposite",9)(11,"feColorMatrix",10)(12,"feBlend",11)(13,"feBlend",12),_()()(),qf(),m(14,"div",13),K(15,y4t,1,0,"div",14)(16,w4t,2,0,"app-icon",15),_()()),2&i&&(b(3),$t("fill",s.color),b(12),S("ngIf",!s.selected),b(),S("ngIf",s.selected))},dependencies:[Ot,zt],encapsulation:2})}return t})();const S4t=()=>({controls:!0}),C4t=()=>({standalone:!0});function x4t(t,n){if(1&t&&(m(0,"div",10),C(1),ge(2,"building"),m(3,"span",11),C(4," - "),_()()),2&t){let e;const i=M().$implicit;b(),xe(" ",null==(e=Me(2,1,i.parent_id))?null:e.display_name," ")}}function E4t(t,n){if(1&t&&(m(0,"mat-option",7)(1,"div",8),K(2,x4t,5,3,"div",9),m(3,"div"),C(4),_()()()),2&t){const e=n.$implicit,i=M(2);S("value",e),b(2),S("ngIf",i.use_region),b(2),xe(" ",e.display_name||e.name," ")}}function T4t(t,n){if(1&t){const e=Le();m(0,"mat-form-field",4)(1,"mat-select",5),Gn("ngModelChange",function(s){re(e);const r=M();return Fn(r.level,s)||(r.level=s),oe(s)}),te("ngModelChange",function(s){return re(e),oe(M().setOptions({zone_ids:[s.id]}))}),K(2,E4t,5,3,"mat-option",6),ge(3,"async"),_()()}if(2&t){const e=M();b(),Un("ngModel",e.level),S("ngModelOptions",pn(5,C4t)),b(),S("ngForOf",Me(3,3,e.levels))}}let MG=(()=>{class t extends bn{get map_url(){return this.level?.map_id||""}get use_region(){return!!this._settings.get("app.use_region")}constructor(e,i,s){super(),this._event_form=e,this._org=i,this._settings=s,this.selected=[],this.is_displayed=!1,this.onSelect=new it,this.zoom=1,this.center={x:.5,y:.5},this.coordinates=void 0,this._seletedSpace=r=>()=>{this.onSelect.emit(r),this._change.next(Date.now())},this.level=null,this._change=new Mt(0),this.levels=Qt([this._org.active_region,this._org.active_building]).pipe(ze(([r,o])=>(this.use_region?this._org.levelsForRegion(r):this._org.levelsForBuilding(o)).filter(c=>!c.tags.includes("parking")).sort((c,u)=>c.parent_id.localeCompare(u.parent_id)||(c.display_name||"").localeCompare(u.display_name||"")))),this.setOptions=r=>this._event_form.setOptions(r),this.features=Qt([this._event_form.available_spaces,this._change]).pipe(hs(300),ze(([r])=>r.map(o=>({location:o.map_id,content:D1e,data:{...o,active:this.active===o.id,selected:this.selected.includes(o.id)}})))),this.actions=this._event_form.available_spaces.pipe(ze(r=>r.map(o=>({id:o.map_id,action:["touchend","mouseup"],callback:this._seletedSpace(o)})))),this.styles=Qt([this._event_form.spaces,this._event_form.available_spaces]).pipe(ze(([r,o])=>r.reduce((a,l)=>{const c=this._settings.get("app.explore.colors")||{},u=o.find(d=>d.id===l.id)?"free":"busy";return a[`#${l.map_id||l.id}`]={fill:c[`space-${u}`]||c[`${u}`]||Bf[`${u}`]},a},{})))}ngOnInit(){this.subscription("levels_update",this._event_form.options.subscribe(({zone_ids:e})=>{const i=this._org.levelWithID(e);i&&(this.level=i)}))}setLevel(e){console.log("Set Level",e),this.setOptions({zone_ids:[e?.id]});const i=this._org.buildings.find(s=>s.id===e?.parent_id);if(i){const[s,r]=(e.location||i.location).split(",").map(o=>parseFloat(o));this.coordinates={latitude:s,longitude:r}}this.level=e}setZoom(e){this.zoom=Math.max(.5,Math.min(10,e))}resetMap(){this.zoom=1,this.center={x:.5,y:.5}}static#e=this.\u0275fac=function(i){return new(i||t)(D(Tm),D(In),D(ln))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["space-map"]],inputs:{selected:"selected",active:"active",is_displayed:"is_displayed"},outputs:{onSelect:"onSelect"},features:[bt],decls:8,vars:17,consts:()=>{let e;return e=$localize`:␟50407595967bf29832e873b41f9de3502d5c3e03␟7323982518822503502:Any Level`,[[1,"bg-base-100","p-2","border-b","border-base-200","w-full"],["appearance","outline","class","w-full",4,"ngIf"],[1,"relative","flex-1","w-full"],[3,"zoomChange","centerChange","src","zoom","center","styles","features","actions","options"],["appearance","outline",1,"w-full"],["name","location","placeholder",e,3,"ngModelChange","ngModel","ngModelOptions"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex","flex-col-reverse"],["class","opacity-30 text-xs",4,"ngIf"],[1,"opacity-30","text-xs"],[1,"opacity-0"]]},template:function(i,s){if(1&i&&(m(0,"div",0),K(1,T4t,4,6,"mat-form-field",1),ge(2,"async"),_(),m(3,"div",2)(4,"interactive-map",3),ge(5,"async"),ge(6,"async"),ge(7,"async"),Gn("zoomChange",function(o){return Fn(s.zoom,o)||(s.zoom=o),o})("centerChange",function(o){return Fn(s.center,o)||(s.center=o),o}),_()()),2&i){let r;b(),S("ngIf",null==(r=Me(2,8,s.levels))?null:r.length),b(3),S("src",s.map_url),Un("zoom",s.zoom)("center",s.center),S("styles",Me(5,10,s.styles))("features",Me(6,12,s.features))("actions",Me(7,14,s.actions))("options",pn(16,S4t))}},styles:["[_nghost-%COMP%]{position:relative;background:#0000000d;display:flex;flex-direction:column}button[_ngcontent-%COMP%]{border-radius:0}"]})}return t})(),M1e=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[ka,B_,pg,QE,eFt,sy,Xh,iu]})}return t})();function I4t(t,n){1&t&&be(0,"mat-spinner",18),2&t&&S("diameter",32)}function k4t(t,n){if(1&t&&(m(0,"mat-option",19)(1,"div",20)(2,"div",21),C(3),_(),m(4,"div",22),C(5),_()()()),2&t){const e=n.$implicit;S("value",e.id),b(3),vt(e.name),b(2),xe(" ",e.id," ")}}function D4t(t,n){1&t&&(m(0,"mat-option",23),C(1),ge(2,"translate"),_()),2&t&&(b(),xe(" ",Me(2,1,"PANEL.BOOTSTRAP_INPUT_PLACEHOLDER")," "))}function M4t(t,n){if(1&t){const e=Le();m(0,"main",10)(1,"label",11),Ne(2,2),ge(3,"translate"),_(),m(4,"mat-form-field",12)(5,"input",13),ge(6,"async"),te("ngModelChange",function(s){return re(e),oe(M().system_id$.next(s))}),_(),K(7,I4t,1,1,"mat-spinner",14),m(8,"mat-hint",15),C(9," Select the system to connect to for Assistant functionality "),_()(),m(10,"mat-autocomplete",null,1),K(12,k4t,6,3,"mat-option",16),ge(13,"async"),K(14,D4t,3,3,"mat-option",17),ge(15,"async"),_()()}if(2&t){let e;const i=Gt(11),s=M();b(3),$n(Me(3,6,"PANEL.BOOTSTRAP_LABEL")),zn(2),b(2),S("ngModel",Me(6,8,s.system_id$))("matAutocomplete",i),b(2),S("ngIf","search"===s.loading),b(5),S("ngForOf",Me(13,10,s.space_list)),b(2),S("ngIf",(null==(e=s.system_id$.getValue())?null:e.length)<2&&!(null!=(e=Me(15,12,s.space_list))&&e.length))}}function A4t(t,n){if(1&t){const e=Le();m(0,"footer",24)(1,"button",25),te("click",function(){return re(e),oe(M().bootstrap())}),Ne(2,3),ge(3,"translate"),_()()}if(2&t){const e=M();b(),S("disabled",!e.system_id$.getValue()),b(2),$n(Me(3,2,"COMMON.CONTINUE")),zn(2)}}function O4t(t,n){if(1&t&&(m(0,"main",26),be(1,"mat-spinner",27),m(2,"p"),C(3),_()()),2&t){const e=M();b(),S("diameter",48),b(2),vt(e.loading)}}Is(CG,[Ot,Ms,zt,jt,TG,IG,BR,T1e,MG],[]),Is(TG,[hn,Ot,zt,Yl,ug,jt],[]),Is(IG,[hn,Ot,zt,xl,jt,Ws],[yi]),Is(BR,[hn,Ot,zt,Hs,vs,Br,jt,Kl,Au,Ih,Em,Kh,oi,zl,wi,qo,_l],[yi,FC,Jh]),Is(MG,[hn,Ot,Yl,Hs,vs,Br,oi,wi],[yi,FC]);const AG="PLACEOS.ASSISTANT.system",N4t=[{path:"bootstrap",component:(()=>{class t extends bn{constructor(e,i,s){super(),this._org=e,this._router=i,this._route=s,this.loading="",this.system_id$=new Mt(""),this.space_list=Qt([this.system_id$,this._org.initialised]).pipe(hs(300),nn(([r])=>r.length<2?gt({data:[]}):eC({q:r,limit:20,zone_id:this._org.organisation.id})),ze(r=>r.data.map(o=>new Cl(o))),jn(1)),this.bootstrap=()=>this.configure(this.system_id$.getValue()),this.clearBootstrap=()=>localStorage.removeItem(AG)}ngOnInit(){var e=this;return de(function*(){e.subscription("route.query",e._route.queryParamMap.subscribe(i=>{i.has("clear")&&i.get("clear")&&e.clearBootstrap(),(i.has("system_id")||i.has("sys_id"))&&(e.system_id$.next(i.get("system_id")||i.get("sys_id")),e.bootstrap())})),e.checkBootstrapped()})()}configure(e){this.loading="Setup",localStorage&&(localStorage.setItem(AG,e),localStorage.setItem("trust","true"),localStorage.setItem("fixed_device","true")),this._router.navigate(["/panel",e],{queryParamsHandling:"preserve"}),this.loading=""}checkBootstrapped(){if(this.loading="Checks",localStorage){const e=localStorage.getItem(AG);if(e)return void this._router.navigate(["/panel",e],{queryParamsHandling:"preserve"})}this.loading=""}static#e=this.\u0275fac=function(i){return new(i||t)(D(In),D(Hr),D(Ul))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["app-bootstrap"]],features:[bt],decls:11,vars:3,consts:()=>{let e,i;return e=$localize`:@@systemLabel␟9b3a160554e554d4fcec2148b50e6f0c6e2eddb0␟9062463336269443550: ${"\ufffd0\ufffd"}:INTERPOLATION: `,i=$localize`:␟e4d1adb72d6327b354b9020c7ade28f1096fad0d␟7975869307745796677: ${"\ufffd0\ufffd"}:INTERPOLATION: `,[["load_state",""],["auto","matAutocomplete"],e,i,[1,"absolute","inset-0","bg-base-200","z-0"],[1,"relative","bg-base-100","mx-auto","my-8","border","border-base-300","rounded-lg","w-[28rem]","z-10","overflow-hidden"],[1,"px-4","py-3","bg-secondary","text-secondary-content","text-xl","font-medium","flex","items-center","justify-between","w-full"],[1,"px-2","py-1","rounded","text-sm","font-mono"],["class","p-4 w-full flex flex-col space-y-2",4,"ngIf","ngIfElse"],["class","w-full px-4 py-2 flex items-center justify-end border-t border-base-300",4,"ngIf"],[1,"p-4","w-full","flex","flex-col","space-y-2"],["for","system-id"],["appearance","outline",1,"w-full"],["matInput","","placeholder","System ID",3,"ngModelChange","ngModel","matAutocomplete"],["matSuffix","",3,"diameter",4,"ngIf"],[1,"-mx-4"],[3,"value",4,"ngFor","ngForOf"],["class","pointer-events-none opacity-60",4,"ngIf"],["matSuffix","",3,"diameter"],[3,"value"],[1,"leading-tight"],[1,"name"],[1,"text-xs","text-dark-fade"],[1,"pointer-events-none","opacity-60"],[1,"w-full","px-4","py-2","flex","items-center","justify-end","border-t","border-base-300"],["btn","","matRipple","",1,"w-32",3,"click","disabled"],[1,"flex","flex-col","items-center","justify-center","p-8","w-full"],[3,"diameter"]]},template:function(i,s){if(1&i&&(be(0,"div",4),m(1,"div",5)(2,"header",6)(3,"div"),C(4,"Assistant Panel"),_(),m(5,"div",7),C(6,"SETUP"),_()(),K(7,M4t,16,14,"main",8)(8,A4t,4,4,"footer",9),_(),K(9,O4t,4,2,"ng-template",null,0,mn)),2&i){const r=Gt(10);b(7),S("ngIf",!s.loading)("ngIfElse",r),b(),S("ngIf",!s.loading)}},dependencies:[hn,Ot,Mr,oi,wi,IS,Hs,Zv,vs,y8,xS,jt,ql,Ws,yi,Jh],encapsulation:2})}return t})()},{path:"panel/:system_id",component:qRt},{path:"**",redirectTo:"bootstrap"}];function VR(t){let n,e=t[0],i=1;for(;i<t.length;){const s=t[i],r=t[i+1];if(i+=2,("optionalAccess"===s||"optionalCall"===s)&&null==e)return;"access"===s||"optionalAccess"===s?(n=e,e=r(e)):("call"===s||"optionalCall"===s)&&(e=r((...o)=>e.call(n,...o)),n=void 0)}return e}function A1e(t){return"/"===t[t.length-1]?t.slice(0,-1):t}function O1e(){return typeof window<"u"&&(!function $4t(){return!function Mnt(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}()&&"[object process]"===Object.prototype.toString.call(typeof process<"u"?process:0)}()||function B4t(){return void 0!==fs.process&&"renderer"===fs.process.type}())}const br=fs,RG="sentryReplaySession",V4t="replay_event",FG="Unable to send Replay",W4t=5e3,q4t=3,N1e=15e4,zR=5e3,LG=2e7;function PG(t,n){return t??n()}function JE(t){let n,e=t[0],i=1;for(;i<t.length;){const s=t[i],r=t[i+1];if(i+=2,("optionalAccess"===s||"optionalCall"===s)&&null==e)return;"access"===s||"optionalAccess"===s?(n=e,e=r(e)):("call"===s||"optionalCall"===s)&&(e=r((...o)=>e.call(n,...o)),n=void 0)}return e}var Ca=function(t){return t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment",t}(Ca||{});function eT(t){const n=JE([t,"optionalAccess",e=>e.host]);return JE([n,"optionalAccess",e=>e.shadowRoot])===t}function tT(t){return"[object ShadowRoot]"===Object.prototype.toString.call(t)}function UR(t){try{const n=t.rules||t.cssRules;return n?function J4t(t){return t.includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t}(Array.from(n,F1e).join("")):null}catch{return null}}function F1e(t){let n;if(function n$t(t){return"styleSheet"in t}(t))try{n=UR(t.styleSheet)||function e$t(t){const{cssText:n}=t;if(n.split('"').length<3)return n;const e=["@import",`url(${JSON.stringify(t.href)})`];return""===t.layerName?e.push("layer"):t.layerName&&e.push(`layer(${t.layerName})`),t.supportsText&&e.push(`supports(${t.supportsText})`),t.media.length&&e.push(t.media.mediaText),e.join(" ")+";"}(t)}catch{}else if(function i$t(t){return"selectorText"in t}(t)&&t.selectorText.includes(":"))return function t$t(t){return t.replace(/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,"$1\\$2")}(t.cssText);return n||t.cssText}class L1e{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(n){return n?PG(JE([this,"access",i=>i.getMeta,"call",i=>i(n),"optionalAccess",i=>i.id]),()=>-1):-1}getNode(n){return this.idNodeMap.get(n)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(n){return this.nodeMetaMap.get(n)||null}removeNodeFromMap(n){const e=this.getId(n);this.idNodeMap.delete(e),n.childNodes&&n.childNodes.forEach(i=>this.removeNodeFromMap(i))}has(n){return this.idNodeMap.has(n)}hasNode(n){return this.nodeMetaMap.has(n)}add(n,e){this.idNodeMap.set(e.id,n),this.nodeMetaMap.set(n,e)}replace(n,e){const i=this.getNode(n);if(i){const s=this.nodeMetaMap.get(i);s&&this.nodeMetaMap.set(e,s)}this.idNodeMap.set(n,e)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function GR({maskInputOptions:t,tagName:n,type:e}){return"OPTION"===n&&(n="SELECT"),!!(t[n.toLowerCase()]||e&&t[e]||"password"===e||"INPUT"===n&&!e&&t.text)}function nT({isMasked:t,element:n,value:e,maskInputFn:i}){let s=e||"";return t?(i&&(s=i(s,n)),"*".repeat(s.length)):s}function t0(t){return t.toLowerCase()}function $G(t){return t.toUpperCase()}const P1e="__rrweb_original__";function BG(t){const n=t.type;return t.hasAttribute("data-rr-is-password")?"password":n?t0(n):null}function jR(t,n,e){return"INPUT"!==n||"radio"!==e&&"checkbox"!==e?t.value:t.getAttribute("value")||""}function $1e(t,n){let e;try{e=new URL(t,PG(n,()=>window.location.href))}catch{return null}return PG(JE([e.pathname.match(/\.([0-9a-z]+)(?:$)/i),"optionalAccess",r=>r[1]]),()=>null)}const B1e={};function V1e(t){const n=B1e[t];if(n)return n;const e=window.document;let i=window[t];if(e&&"function"==typeof e.createElement)try{const s=e.createElement("iframe");s.hidden=!0,e.head.appendChild(s);const r=s.contentWindow;r&&r[t]&&(i=r[t]),e.head.removeChild(s)}catch{}return B1e[t]=i.bind(window)}function VG(...t){return V1e("setTimeout")(...t)}function z1e(...t){return V1e("clearTimeout")(...t)}let o$t=1;const a$t=new RegExp("[^a-z0-9-_:]"),iT=-2;function zG(){return o$t++}let n0,U1e;const u$t=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,d$t=/^(?:[a-z+]+:)?\/\//i,h$t=/^www\..*/i,f$t=/^(data:)([^,]*),(.*)/i;function HR(t,n){return(t||"").replace(u$t,(e,i,s,r,o,a)=>{const l=s||o||a,c=i||r||"";if(!l)return e;if(d$t.test(l)||h$t.test(l))return`url(${c}${l}${c})`;if(f$t.test(l))return`url(${c}${l}${c})`;if("/"===l[0])return`url(${c}${function c$t(t){let n="";return n=t.indexOf("//")>-1?t.split("/").slice(0,3).join("/"):t.split("/")[0],n=n.split("?")[0],n}(n)+l}${c})`;const u=n.split("/"),d=l.split("/");u.pop();for(const h of d)"."!==h&&(".."===h?u.pop():u.push(h));return`url(${c}${u.join("/")}${c})`})}const p$t=/^[^ \t\n\r\u000c]+/,m$t=/^[, \t\n\r\u000c]+/;function s0(t,n){if(!n||""===n.trim())return n;const e=t.createElement("a");return e.href=n,e.href}function g$t(t){return!("svg"!==t.tagName&&!t.ownerSVGElement)}function UG(){const t=document.createElement("a");return t.href="",t.href}function G1e(t,n,e,i,s,r){return i&&("src"===e||"href"===e&&("use"!==n||"#"!==i[0])||"xlink:href"===e&&"#"!==i[0]||"background"===e&&("table"===n||"td"===n||"th"===n)?s0(t,i):"srcset"===e?function _$t(t,n){if(""===n.trim())return n;let e=0;function i(r){let o;const a=r.exec(n.substring(e));return a?(o=a[0],e+=o.length,o):""}const s=[];for(;i(m$t),!(e>=n.length);){let r=i(p$t);if(","===r.slice(-1))r=s0(t,r.substring(0,r.length-1)),s.push(r);else{let o="";r=s0(t,r);let a=!1;for(;;){const l=n.charAt(e);if(""===l){s.push((r+o).trim());break}if(a)")"===l&&(a=!1);else{if(","===l){e+=1,s.push((r+o).trim());break}"("===l&&(a=!0)}o+=l,e+=1}}}return s.join(", ")}(t,i):"style"===e?HR(i,UG()):"object"===n&&"data"===e?s0(t,i):"function"==typeof r?r(e,i,s):i)}function j1e(t,n,e){return("video"===t||"audio"===t)&&"autoplay"===n}function ab(t,n,e=1/0,i=0){return!t||t.nodeType!==t.ELEMENT_NODE||i>e?-1:n(t)?i:ab(t.parentNode,n,e,i+1)}function r0(t,n){return e=>{const i=e;if(null===i)return!1;try{if(t)if("string"==typeof t){if(i.matches(`.${t}`))return!0}else if(function v$t(t,n){for(let e=t.classList.length;e--;)if(n.test(t.classList[e]))return!0;return!1}(i,t))return!0;return!(!n||!i.matches(n))}catch{return!1}}}function o0(t,n,e,i,s,r){try{const o=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(null===o)return!1;if("INPUT"===o.tagName){const c=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(c))return!0}let a=-1,l=-1;if(r){if(l=ab(o,r0(i,s)),l<0)return!0;a=ab(o,r0(n,e),l>=0?l:1/0)}else{if(a=ab(o,r0(n,e)),a<0)return!1;l=ab(o,r0(i,s),a>=0?a:1/0)}return a>=0?!(l>=0)||a<=l:!(l>=0||!r)}catch{}return!!r}function vr(t){return null==t?"":t.toLowerCase()}function a0(t,n){const{doc:e,mirror:i,blockClass:s,blockSelector:r,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:h=!1,inlineStylesheet:f=!0,maskInputOptions:p={},maskAttributeFn:g,maskTextFn:v,maskInputFn:y,slimDOMOptions:w,dataURLOptions:E={},inlineImages:T=!1,recordCanvas:L=!1,onSerialize:W,onIframeLoad:H,iframeLoadTimeout:P=5e3,onStylesheetLoad:X,stylesheetLoadTimeout:ne=5e3,keepIframeSrcFn:me=(()=>!1),newlyAddedElement:Ee=!1}=n;let{preserveWhiteSpace:Te=!0}=n;const $e=function S$t(t,n){const{doc:e,mirror:i,blockClass:s,blockSelector:r,unblockSelector:o,maskAllText:a,maskAttributeFn:l,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:h,inlineStylesheet:f,maskInputOptions:p={},maskTextFn:g,maskInputFn:v,dataURLOptions:y={},inlineImages:w,recordCanvas:E,keepIframeSrcFn:T,newlyAddedElement:L=!1}=n,W=function C$t(t,n){if(!n.hasNode(t))return;const e=n.getId(t);return 1===e?void 0:e}(e,i);switch(t.nodeType){case t.DOCUMENT_NODE:return"CSS1Compat"!==t.compatMode?{type:Ca.Document,childNodes:[],compatMode:t.compatMode}:{type:Ca.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:Ca.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:W};case t.ELEMENT_NODE:return function E$t(t,n){const{doc:e,blockClass:i,blockSelector:s,unblockSelector:r,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:l,maskInputFn:c,dataURLOptions:u={},inlineImages:d,recordCanvas:h,keepIframeSrcFn:f,newlyAddedElement:p=!1,rootId:g,maskTextClass:y,unmaskTextClass:w,maskTextSelector:E,unmaskTextSelector:T}=n,L=function b$t(t,n,e,i){try{if(i&&t.matches(i))return!1;if("string"==typeof n){if(t.classList.contains(n))return!0}else for(let s=t.classList.length;s--;)if(n.test(t.classList[s]))return!0;if(e)return t.matches(e)}catch{}return!1}(t,i,s,r),W=function l$t(t){if(t instanceof HTMLFormElement)return"form";const n=t0(t.tagName);return a$t.test(n)?"div":n}(t);let H={};const P=t.attributes.length;for(let ne=0;ne<P;ne++){const me=t.attributes[ne];me.name&&!j1e(W,me.name)&&(H[me.name]=G1e(e,W,t0(me.name),me.value,t,l))}if("link"===W&&o){const ne=Array.from(e.styleSheets).find(Ee=>Ee.href===t.href);let me=null;ne&&(me=UR(ne)),me&&(delete H.rel,delete H.href,H._cssText=HR(me,ne.href))}if("style"===W&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){const ne=UR(t.sheet);ne&&(H._cssText=HR(ne,UG()))}if("input"===W||"textarea"===W||"select"===W||"option"===W){const ne=t,me=BG(ne),Ee=jR(ne,$G(W),me),Te=ne.checked;if("submit"!==me&&"button"!==me&&Ee){const $e=o0(ne,y,E,w,T,GR({type:me,tagName:$G(W),maskInputOptions:a}));H.value=nT({isMasked:$e,element:ne,value:Ee,maskInputFn:c})}Te&&(H.checked=Te)}if("option"===W&&(t.selected&&!a.select?H.selected=!0:delete H.selected),"canvas"===W&&h)if("2d"===t.__context)(function r$t(t){const n=t.getContext("2d");if(!n)return!0;for(let i=0;i<t.width;i+=50)for(let s=0;s<t.height;s+=50){const r=n.getImageData;if(new Uint32Array((P1e in r?r[P1e]:r).call(n,i,s,Math.min(50,t.width-i),Math.min(50,t.height-s)).data.buffer).some(l=>0!==l))return!1}return!0})(t)||(H.rr_dataURL=t.toDataURL(u.type,u.quality));else if(!("__context"in t)){const ne=t.toDataURL(u.type,u.quality),me=document.createElement("canvas");me.width=t.width,me.height=t.height,ne!==me.toDataURL(u.type,u.quality)&&(H.rr_dataURL=ne)}if("img"===W&&d){n0||(n0=e.createElement("canvas"),U1e=n0.getContext("2d"));const ne=t,me=ne.crossOrigin;ne.crossOrigin="anonymous";const Ee=()=>{ne.removeEventListener("load",Ee);try{n0.width=ne.naturalWidth,n0.height=ne.naturalHeight,U1e.drawImage(ne,0,0),H.rr_dataURL=n0.toDataURL(u.type,u.quality)}catch(Te){console.warn(`Cannot inline img src=${ne.currentSrc}! Error: ${Te}`)}me?H.crossOrigin=me:ne.removeAttribute("crossorigin")};ne.complete&&0!==ne.naturalWidth?Ee():ne.addEventListener("load",Ee)}if(("audio"===W||"video"===W)&&(H.rr_mediaState=t.paused?"paused":"played",H.rr_mediaCurrentTime=t.currentTime),p||(t.scrollLeft&&(H.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(H.rr_scrollTop=t.scrollTop)),L){const{width:ne,height:me}=t.getBoundingClientRect();H={class:H.class,rr_width:`${ne}px`,rr_height:`${me}px`}}let X;"iframe"===W&&!f(H.src)&&(!L&&!t.contentDocument&&(H.rr_src=H.src),delete H.src);try{customElements.get(W)&&(X=!0)}catch{}return{type:Ca.Element,tagName:W,attributes:H,childNodes:[],isSVG:g$t(t)||void 0,needBlock:L,rootId:g,isCustom:X}}(t,{doc:e,blockClass:s,blockSelector:r,unblockSelector:o,inlineStylesheet:f,maskAttributeFn:l,maskInputOptions:p,maskInputFn:v,dataURLOptions:y,inlineImages:w,recordCanvas:E,keepIframeSrcFn:T,newlyAddedElement:L,rootId:W,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:h});case t.TEXT_NODE:return function x$t(t,n){const{maskAllText:e,maskTextClass:i,unmaskTextClass:s,maskTextSelector:r,unmaskTextSelector:o,maskTextFn:a,maskInputOptions:l,maskInputFn:c,rootId:u}=n,d=t.parentNode&&t.parentNode.tagName;let h=t.textContent;const f="STYLE"===d||void 0,p="SCRIPT"===d||void 0,g="TEXTAREA"===d||void 0;if(f&&h){try{t.nextSibling||t.previousSibling||JE([t,"access",y=>y.parentNode,"access",y=>y.sheet,"optionalAccess",y=>y.cssRules])&&(h=UR(t.parentNode.sheet))}catch(y){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${y}`,t)}h=HR(h,UG())}p&&(h="SCRIPT_PLACEHOLDER");const v=o0(t,i,r,s,o,e);return!f&&!p&&!g&&h&&v&&(h=a?a(h,t.parentElement):h.replace(/[\S]/g,"*")),g&&h&&(l.textarea||v)&&(h=c?c(h,t.parentNode):h.replace(/[\S]/g,"*")),"OPTION"===d&&h&&(h=nT({isMasked:o0(t,i,r,s,o,GR({type:null,tagName:d,maskInputOptions:l})),element:t,value:h,maskInputFn:c})),{type:Ca.Text,textContent:h||"",isStyle:f,rootId:u}}(t,{maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:h,maskTextFn:g,maskInputOptions:p,maskInputFn:v,rootId:W});case t.CDATA_SECTION_NODE:return{type:Ca.CDATA,textContent:"",rootId:W};case t.COMMENT_NODE:return{type:Ca.Comment,textContent:t.textContent||"",rootId:W};default:return!1}}(t,{doc:e,mirror:i,blockClass:s,blockSelector:r,maskAllText:a,unblockSelector:o,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:f,maskInputOptions:p,maskAttributeFn:g,maskTextFn:v,maskInputFn:y,dataURLOptions:E,inlineImages:T,recordCanvas:L,keepIframeSrcFn:me,newlyAddedElement:Ee});if(!$e)return console.warn(t,"not serialized"),null;let Xe;Xe=i.hasNode(t)?i.getId(t):function T$t(t,n){if(n.comment&&t.type===Ca.Comment)return!0;if(t.type===Ca.Element){if(n.script&&("script"===t.tagName||"link"===t.tagName&&("preload"===t.attributes.rel||"modulepreload"===t.attributes.rel)&&"script"===t.attributes.as||"link"===t.tagName&&"prefetch"===t.attributes.rel&&"string"==typeof t.attributes.href&&"js"===$1e(t.attributes.href)))return!0;if(n.headFavicon&&("link"===t.tagName&&"shortcut icon"===t.attributes.rel||"meta"===t.tagName&&(vr(t.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===vr(t.attributes.name)||"icon"===vr(t.attributes.rel)||"apple-touch-icon"===vr(t.attributes.rel)||"shortcut icon"===vr(t.attributes.rel))))return!0;if("meta"===t.tagName){if(n.headMetaDescKeywords&&vr(t.attributes.name).match(/^description|keywords$/))return!0;if(n.headMetaSocial&&(vr(t.attributes.property).match(/^(og|twitter|fb):/)||vr(t.attributes.name).match(/^(og|twitter):/)||"pinterest"===vr(t.attributes.name)))return!0;if(n.headMetaRobots&&("robots"===vr(t.attributes.name)||"googlebot"===vr(t.attributes.name)||"bingbot"===vr(t.attributes.name)))return!0;if(n.headMetaHttpEquiv&&void 0!==t.attributes["http-equiv"])return!0;if(n.headMetaAuthorship&&("author"===vr(t.attributes.name)||"generator"===vr(t.attributes.name)||"framework"===vr(t.attributes.name)||"publisher"===vr(t.attributes.name)||"progid"===vr(t.attributes.name)||vr(t.attributes.property).match(/^article:/)||vr(t.attributes.property).match(/^product:/)))return!0;if(n.headMetaVerification&&("google-site-verification"===vr(t.attributes.name)||"yandex-verification"===vr(t.attributes.name)||"csrf-token"===vr(t.attributes.name)||"p:domain_verify"===vr(t.attributes.name)||"verify-v1"===vr(t.attributes.name)||"verification"===vr(t.attributes.name)||"shopify-checkout-api-token"===vr(t.attributes.name)))return!0}}return!1}($e,w)||!Te&&$e.type===Ca.Text&&!$e.isStyle&&!$e.textContent.replace(/^\s+|\s+$/gm,"").length?iT:zG();const Ce=Object.assign($e,{id:Xe});if(i.add(t,Ce),Xe===iT)return null;W&&W(t);let Fe=!h;if(Ce.type===Ca.Element){Fe=Fe&&!Ce.needBlock,delete Ce.needBlock;const Ie=t.shadowRoot;Ie&&tT(Ie)&&(Ce.isShadowHost=!0)}if((Ce.type===Ca.Document||Ce.type===Ca.Element)&&Fe){w.headWhitespace&&Ce.type===Ca.Element&&"head"===Ce.tagName&&(Te=!1);const Ie={doc:e,mirror:i,blockClass:s,blockSelector:r,maskAllText:a,unblockSelector:o,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:h,inlineStylesheet:f,maskInputOptions:p,maskAttributeFn:g,maskTextFn:v,maskInputFn:y,slimDOMOptions:w,dataURLOptions:E,inlineImages:T,recordCanvas:L,preserveWhiteSpace:Te,onSerialize:W,onIframeLoad:H,iframeLoadTimeout:P,onStylesheetLoad:X,stylesheetLoadTimeout:ne,keepIframeSrcFn:me};for(const He of Array.from(t.childNodes)){const Ve=a0(He,Ie);Ve&&Ce.childNodes.push(Ve)}if(function Q4t(t){return t.nodeType===t.ELEMENT_NODE}(t)&&t.shadowRoot)for(const He of Array.from(t.shadowRoot.childNodes)){const Ve=a0(He,Ie);Ve&&(tT(t.shadowRoot)&&(Ve.isShadow=!0),Ce.childNodes.push(Ve))}}return t.parentNode&&eT(t.parentNode)&&tT(t.parentNode)&&(Ce.isShadow=!0),Ce.type===Ca.Element&&"iframe"===Ce.tagName&&function y$t(t,n,e){const i=t.contentWindow;if(!i)return;let r,s=!1;try{r=i.document.readyState}catch{return}if("complete"!==r){const a=VG(()=>{s||(n(),s=!0)},e);return void t.addEventListener("load",()=>{z1e(a),s=!0,n()})}const o="about:blank";if(i.location.href!==o||t.src===o||""===t.src)return VG(n,0),t.addEventListener("load",n);t.addEventListener("load",n)}(t,()=>{const Ie=t.contentDocument;if(Ie&&H){const He=a0(Ie,{doc:Ie,mirror:i,blockClass:s,blockSelector:r,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:f,maskInputOptions:p,maskAttributeFn:g,maskTextFn:v,maskInputFn:y,slimDOMOptions:w,dataURLOptions:E,inlineImages:T,recordCanvas:L,preserveWhiteSpace:Te,onSerialize:W,onIframeLoad:H,iframeLoadTimeout:P,onStylesheetLoad:X,stylesheetLoadTimeout:ne,keepIframeSrcFn:me});He&&H(t,He)}},P),Ce.type===Ca.Element&&"link"===Ce.tagName&&"string"==typeof Ce.attributes.rel&&("stylesheet"===Ce.attributes.rel||"preload"===Ce.attributes.rel&&"string"==typeof Ce.attributes.href&&"css"===$1e(Ce.attributes.href))&&function w$t(t,n,e){let s,i=!1;try{s=t.sheet}catch{return}if(s)return;const r=VG(()=>{i||(n(),i=!0)},e);t.addEventListener("load",()=>{z1e(r),i=!0,n()})}(t,()=>{if(X){const Ie=a0(t,{doc:e,mirror:i,blockClass:s,blockSelector:r,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:f,maskInputOptions:p,maskAttributeFn:g,maskTextFn:v,maskInputFn:y,slimDOMOptions:w,dataURLOptions:E,inlineImages:T,recordCanvas:L,preserveWhiteSpace:Te,onSerialize:W,onIframeLoad:H,iframeLoadTimeout:P,onStylesheetLoad:X,stylesheetLoadTimeout:ne,keepIframeSrcFn:me});Ie&&X(t,Ie)}},ne),Ce}function Im(t){let n,e=t[0],i=1;for(;i<t.length;){const s=t[i],r=t[i+1];if(i+=2,("optionalAccess"===s||"optionalCall"===s)&&null==e)return;"access"===s||"optionalAccess"===s?(n=e,e=r(e)):("call"===s||"optionalCall"===s)&&(e=r((...o)=>e.call(n,...o)),n=void 0)}return e}function Ml(t,n,e=document){const i={capture:!0,passive:!0};return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}const l0="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let H1e={map:{},getId:()=>(console.error(l0),-1),getNode:()=>(console.error(l0),null),removeNodeFromMap(){console.error(l0)},has:()=>(console.error(l0),!1),reset(){console.error(l0)}};function sT(t,n,e={}){let i=null,s=0;return function(...r){const o=Date.now();!s&&!1===e.leading&&(s=o);const a=n-(o-s),l=this;a<=0||a>n?(i&&(function R$t(...t){qG("clearTimeout")(...t)}(i),i=null),s=o,t.apply(l,r)):!i&&!1!==e.trailing&&(i=qR(()=>{s=!1===e.leading?0:Date.now(),i=null,t.apply(l,r)},a))}}function W1e(t,n,e,i,s=window){const r=s.Object.getOwnPropertyDescriptor(t,n);return s.Object.defineProperty(t,n,i?e:{set(o){qR(()=>{e.set.call(this,o)},0),r&&r.set&&r.set.call(this,o)}}),()=>W1e(t,n,r||{},!0)}function GG(t,n,e){try{if(!(n in t))return()=>{};const i=t[n],s=e(i);return"function"==typeof s&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:i}})),t[n]=s,()=>{t[n]=i}}catch{return()=>{}}}typeof window<"u"&&window.Proxy&&window.Reflect&&(H1e=new Proxy(H1e,{get:(t,n,e)=>("map"===n&&console.error(l0),Reflect.get(t,n,e))}));let WR=Date.now;function q1e(t){const n=t.document;return{left:n.scrollingElement?n.scrollingElement.scrollLeft:void 0!==t.pageXOffset?t.pageXOffset:Im([n,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||Im([n,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||Im([n,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:n.scrollingElement?n.scrollingElement.scrollTop:void 0!==t.pageYOffset?t.pageYOffset:Im([n,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||Im([n,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||Im([n,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function K1e(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function X1e(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Y1e(t){return t?t.nodeType===t.ELEMENT_NODE?t:t.parentElement:null}function xd(t,n,e,i,s){if(!t)return!1;const r=Y1e(t);if(!r)return!1;const o=r0(n,e);if(!s){const c=i&&r.matches(i);return o(r)&&!c}const a=ab(r,o);let l=-1;return!(a<0)&&(i&&(l=ab(r,r0(null,i))),a>-1&&l<0||a<l)}function jG(t,n){return n.getId(t)===iT}function Z1e(t,n){if(eT(t))return!1;const e=n.getId(t);return!n.has(e)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||Z1e(t.parentNode,n))}function HG(t){return!!t.changedTouches}function Q1e(t,n){return!("IFRAME"!==t.nodeName||!n.getMeta(t))}function J1e(t,n){return!("LINK"!==t.nodeName||t.nodeType!==t.ELEMENT_NODE||!t.getAttribute||"stylesheet"!==t.getAttribute("rel")||!n.getMeta(t))}function WG(t){return!!Im([t,"optionalAccess",n=>n.shadowRoot])}/[1-9][0-9]{12}/.test(Date.now().toString())||(WR=()=>(new Date).getTime());class M$t{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(n){return function R4t(t,n){return t??n()}(this.styleIDMap.get(n),()=>-1)}has(n){return this.styleIDMap.has(n)}add(n,e){if(this.has(n))return this.getId(n);let i;return i=void 0===e?this.id++:e,this.styleIDMap.set(n,i),this.idStyleMap.set(i,n),i}getStyle(n){return this.idStyleMap.get(n)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function e0e(t){let n=null;return Im([t,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(n=t.getRootNode().host),n}function t0e(t){const n=t.ownerDocument;return!!n&&(n.contains(t)||function O$t(t){const n=t.ownerDocument;if(!n)return!1;const e=function A$t(t){let e,n=t;for(;e=e0e(n);)n=e;return n}(t);return n.contains(e)}(t))}const n0e={};function qG(t){const n=n0e[t];if(n)return n;const e=window.document;let i=window[t];if(e&&"function"==typeof e.createElement)try{const s=e.createElement("iframe");s.hidden=!0,e.head.appendChild(s);const r=s.contentWindow;r&&r[t]&&(i=r[t]),e.head.removeChild(s)}catch{}return n0e[t]=i.bind(window)}function qR(...t){return qG("setTimeout")(...t)}var Gi=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(Gi||{}),ji=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(ji||{}),Al=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(Al||{}),Vf=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(Vf||{});function F$t(t){let n,e=t[0],i=1;for(;i<t.length;){const s=t[i],r=t[i+1];if(i+=2,("optionalAccess"===s||"optionalCall"===s)&&null==e)return;"access"===s||"optionalAccess"===s?(n=e,e=r(e)):("call"===s||"optionalCall"===s)&&(e=r((...o)=>e.call(n,...o)),n=void 0)}return e}function i0e(t){return"__ln"in t}class L$t{constructor(){this.length=0,this.head=null,this.tail=null}get(n){if(n>=this.length)throw new Error("Position outside of list range");let e=this.head;for(let i=0;i<n;i++)e=F$t([e,"optionalAccess",s=>s.next])||null;return e}addNode(n){const e={value:n,previous:null,next:null};if(n.__ln=e,n.previousSibling&&i0e(n.previousSibling)){const i=n.previousSibling.__ln.next;e.next=i,e.previous=n.previousSibling.__ln,n.previousSibling.__ln.next=e,i&&(i.previous=e)}else if(n.nextSibling&&i0e(n.nextSibling)&&n.nextSibling.__ln.previous){const i=n.nextSibling.__ln.previous;e.previous=i,e.next=n.nextSibling.__ln,n.nextSibling.__ln.previous=e,i&&(i.next=e)}else this.head&&(this.head.previous=e),e.next=this.head,this.head=e;null===e.next&&(this.tail=e),this.length++}removeNode(n){const e=n.__ln;this.head&&(e.previous?(e.previous.next=e.next,e.next?e.next.previous=e.previous:this.tail=e.previous):(this.head=e.next,this.head?this.head.previous=null:this.tail=null),n.__ln&&delete n.__ln,this.length--)}}const s0e=(t,n)=>`${t}@${n}`;class P$t{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=n=>{n.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const n=[],e=new Set,i=new L$t,s=l=>{let c=l,u=iT;for(;u===iT;)c=c&&c.nextSibling,u=c&&this.mirror.getId(c);return u},r=l=>{if(!l.parentNode||!t0e(l))return;const c=eT(l.parentNode)?this.mirror.getId(e0e(l)):this.mirror.getId(l.parentNode),u=s(l);if(-1===c||-1===u)return i.addNode(l);const d=a0(l,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:h=>{Q1e(h,this.mirror)&&this.iframeManager.addIframe(h),J1e(h,this.mirror)&&this.stylesheetManager.trackLinkElement(h),WG(l)&&this.shadowDomManager.addShadowRoot(l.shadowRoot,this.doc)},onIframeLoad:(h,f)=>{this.iframeManager.attachIframe(h,f),h.contentWindow&&this.canvasManager.addWindow(h.contentWindow),this.shadowDomManager.observeAttachShadow(h)},onStylesheetLoad:(h,f)=>{this.stylesheetManager.attachLinkElement(h,f)}});d&&(n.push({parentId:c,nextId:u,node:d}),e.add(d.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const l of this.movedSet)r0e(this.removes,l,this.mirror)&&!this.movedSet.has(l.parentNode)||r(l);for(const l of this.addedSet)!a0e(this.droppedSet,l)&&!r0e(this.removes,l,this.mirror)||a0e(this.movedSet,l)?r(l):this.droppedSet.add(l);let o=null;for(;i.length;){let l=null;if(o){const c=this.mirror.getId(o.value.parentNode),u=s(o.value);-1!==c&&-1!==u&&(l=o)}if(!l){let c=i.tail;for(;c;){const u=c;if(c=c.previous,u){const d=this.mirror.getId(u.value.parentNode);if(-1===s(u.value))continue;if(-1!==d){l=u;break}{const f=u.value;if(f.parentNode&&f.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&-1!==this.mirror.getId(f.parentNode.host)){l=u;break}}}}}if(!l){for(;i.head;)i.removeNode(i.head.value);break}o=l.previous,i.removeNode(l.value),r(l.value)}const a={texts:this.texts.map(l=>({id:this.mirror.getId(l.node),value:l.value})).filter(l=>!e.has(l.id)).filter(l=>this.mirror.has(l.id)),attributes:this.attributes.map(l=>{const{attributes:c}=l;if("string"==typeof c.style){const u=JSON.stringify(l.styleDiff),d=JSON.stringify(l._unchangedStyles);u.length<c.style.length&&(u+d).split("var(").length===c.style.split("var(").length&&(c.style=l.styleDiff)}return{id:this.mirror.getId(l.node),attributes:c}}).filter(l=>!e.has(l.id)).filter(l=>this.mirror.has(l.id)),removes:this.removes,adds:n};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=n=>{if(!jG(n.target,this.mirror))switch(n.type){case"characterData":{const e=n.target.textContent;!xd(n.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&e!==n.oldValue&&this.texts.push({value:o0(n.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&e?this.maskTextFn?this.maskTextFn(e,Y1e(n.target)):e.replace(/[\S]/g,"*"):e,node:n.target});break}case"attributes":{const e=n.target;let i=n.attributeName,s=n.target.getAttribute(i);if("value"===i){const o=BG(e),a=e.tagName;s=jR(e,a,o);const l=GR({maskInputOptions:this.maskInputOptions,tagName:a,type:o});s=nT({isMasked:o0(n.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,l),element:e,value:s,maskInputFn:this.maskInputFn})}if(xd(n.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===n.oldValue)return;let r=this.attributeMap.get(n.target);if("IFRAME"===e.tagName&&"src"===i&&!this.keepIframeSrcFn(s)){if(e.contentDocument)return;i="rr_src"}if(r||(r={node:n.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(r),this.attributeMap.set(n.target,r)),"type"===i&&"INPUT"===e.tagName&&"password"===(n.oldValue||"").toLowerCase()&&e.setAttribute("data-rr-is-password","true"),!j1e(e.tagName,i)&&(r.attributes[i]=G1e(this.doc,t0(e.tagName),t0(i),s,e,this.maskAttributeFn),"style"===i)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const o=this.unattachedDoc.createElement("span");n.oldValue&&o.setAttribute("style",n.oldValue);for(const a of Array.from(e.style)){const l=e.style.getPropertyValue(a),c=e.style.getPropertyPriority(a);l!==o.style.getPropertyValue(a)||c!==o.style.getPropertyPriority(a)?r.styleDiff[a]=""===c?l:[l,c]:r._unchangedStyles[a]=[l,c]}for(const a of Array.from(o.style))""===e.style.getPropertyValue(a)&&(r.styleDiff[a]=!1)}break}case"childList":if(xd(n.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;n.addedNodes.forEach(e=>this.genAdds(e,n.target)),n.removedNodes.forEach(e=>{const i=this.mirror.getId(e),s=eT(n.target)?this.mirror.getId(n.target.host):this.mirror.getId(n.target);xd(n.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||jG(e,this.mirror)||!function k$t(t,n){return-1!==n.getId(t)}(e,this.mirror)||(this.addedSet.has(e)?(KG(this.addedSet,e),this.droppedSet.add(e)):this.addedSet.has(n.target)&&-1===i||Z1e(n.target,this.mirror)||(this.movedSet.has(e)&&this.movedMap[s0e(i,s)]?KG(this.movedSet,e):this.removes.push({parentId:s,id:i,isShadow:!(!eT(n.target)||!tT(n.target))||void 0})),this.mapRemoves.push(e))})}},this.genAdds=(n,e)=>{if(!this.processedNodeManager.inOtherBuffer(n,this)&&!this.addedSet.has(n)&&!this.movedSet.has(n)){if(this.mirror.hasNode(n)){if(jG(n,this.mirror))return;this.movedSet.add(n);let i=null;e&&this.mirror.hasNode(e)&&(i=this.mirror.getId(e)),i&&-1!==i&&(this.movedMap[s0e(this.mirror.getId(n),i)]=!0)}else this.addedSet.add(n),this.droppedSet.delete(n);xd(n,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(n.childNodes.forEach(i=>this.genAdds(i)),WG(n)&&n.shadowRoot.childNodes.forEach(i=>{this.processedNodeManager.add(i,this),this.genAdds(i,n)}))}}}init(n){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(e=>{this[e]=n[e]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function KG(t,n){t.delete(n),n.childNodes.forEach(e=>KG(t,e))}function r0e(t,n,e){return 0!==t.length&&o0e(t,n,e)}function o0e(t,n,e){const{parentNode:i}=n;if(!i)return!1;const s=e.getId(i);return!!t.some(r=>r.id===s)||o0e(t,i,e)}function a0e(t,n){return 0!==t.size&&l0e(t,n)}function l0e(t,n){const{parentNode:e}=n;return!!e&&(!!t.has(e)||l0e(t,e))}let rT;const ms=t=>rT?(...e)=>{try{return t(...e)}catch(i){if(rT&&!0===rT(i))return()=>{};throw i}}:t;function Ed(t){let n,e=t[0],i=1;for(;i<t.length;){const s=t[i],r=t[i+1];if(i+=2,("optionalAccess"===s||"optionalCall"===s)&&null==e)return;"access"===s||"optionalAccess"===s?(n=e,e=r(e)):("call"===s||"optionalCall"===s)&&(e=r((...o)=>e.call(n,...o)),n=void 0)}return e}const c0=[];function oT(t){try{if("composedPath"in t){const n=t.composedPath();if(n.length)return n[0]}else if("path"in t&&t.path.length)return t.path[0]}catch{}return t&&t.target}function c0e(t,n){const e=new P$t;c0.push(e),e.init(t);let i=window.MutationObserver||window.__rrMutationObserver;const s=Ed([window,"optionalAccess",o=>o.Zone,"optionalAccess",o=>o.__symbol__,"optionalCall",o=>o("MutationObserver")]);s&&window[s]&&(i=window[s]);const r=new i(ms(o=>{t.onMutation&&!1===t.onMutation(o)||e.processMutations.bind(e)(o)}));return r.observe(n,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),r}function u0e({scrollCb:t,doc:n,mirror:e,blockClass:i,blockSelector:s,unblockSelector:r,sampling:o}){return Ml("scroll",ms(sT(ms(l=>{const c=oT(l);if(!c||xd(c,i,s,r,!0))return;const u=e.getId(c);if(c===n&&n.defaultView){const d=q1e(n.defaultView);t({id:u,x:d.left,y:d.top})}else t({id:u,x:c.scrollLeft,y:c.scrollTop})}),o.scroll||100)),n)}const G$t=["INPUT","TEXTAREA","SELECT"],d0e=new WeakMap;function j$t({inputCb:t,doc:n,mirror:e,blockClass:i,blockSelector:s,unblockSelector:r,ignoreClass:o,ignoreSelector:a,maskInputOptions:l,maskInputFn:c,sampling:u,userTriggeredOnInput:d,maskTextClass:h,unmaskTextClass:f,maskTextSelector:p,unmaskTextSelector:g}){function v(H){let P=oT(H);const X=H.isTrusted,ne=P&&$G(P.tagName);if("OPTION"===ne&&(P=P.parentElement),!P||!ne||G$t.indexOf(ne)<0||xd(P,i,s,r,!0))return;const me=P;if(me.classList.contains(o)||a&&me.matches(a))return;const Ee=BG(P);let Te=jR(me,ne,Ee),$e=!1;const Xe=GR({maskInputOptions:l,tagName:ne,type:Ee}),Ce=o0(P,h,p,f,g,Xe);("radio"===Ee||"checkbox"===Ee)&&($e=P.checked),Te=nT({isMasked:Ce,element:P,value:Te,maskInputFn:c}),y(P,d?{text:Te,isChecked:$e,userTriggered:X}:{text:Te,isChecked:$e});const Fe=P.name;"radio"===Ee&&Fe&&$e&&n.querySelectorAll(`input[type="radio"][name="${Fe}"]`).forEach(Ie=>{if(Ie!==P){const He=nT({isMasked:Ce,element:Ie,value:jR(Ie,ne,Ee),maskInputFn:c});y(Ie,d?{text:He,isChecked:!$e,userTriggered:!1}:{text:He,isChecked:!$e})}})}function y(H,P){const X=d0e.get(H);if(!X||X.text!==P.text||X.isChecked!==P.isChecked){d0e.set(H,P);const ne=e.getId(H);ms(t)({...P,id:ne})}}const E=("last"===u.input?["change"]:["input","change"]).map(H=>Ml(H,ms(v),n)),T=n.defaultView;if(!T)return()=>{E.forEach(H=>H())};const L=T.Object.getOwnPropertyDescriptor(T.HTMLInputElement.prototype,"value");return L&&L.set&&E.push(...[[T.HTMLInputElement.prototype,"value"],[T.HTMLInputElement.prototype,"checked"],[T.HTMLSelectElement.prototype,"value"],[T.HTMLTextAreaElement.prototype,"value"],[T.HTMLSelectElement.prototype,"selectedIndex"],[T.HTMLOptionElement.prototype,"selected"]].map(H=>W1e(H[0],H[1],{set(){ms(v)({target:this,isTrusted:!1})}},!1,T))),ms(()=>{E.forEach(H=>H())})}function KR(t){return function e(i,s){if(XR("CSSGroupingRule")&&i.parentRule instanceof CSSGroupingRule||XR("CSSMediaRule")&&i.parentRule instanceof CSSMediaRule||XR("CSSSupportsRule")&&i.parentRule instanceof CSSSupportsRule||XR("CSSConditionRule")&&i.parentRule instanceof CSSConditionRule){const o=Array.from(i.parentRule.cssRules).indexOf(i);s.unshift(o)}else if(i.parentStyleSheet){const o=Array.from(i.parentStyleSheet.cssRules).indexOf(i);s.unshift(o)}return s}(t,[])}function km(t,n,e){let i,s;return t?(t.ownerNode?i=n.getId(t.ownerNode):s=e.getId(t),{styleId:s,id:i}):{}}function h0e({mirror:t,stylesheetManager:n},e){let i=null;i=t.getId("#document"===e.nodeName?e:e.host);const s=Ed("#document"===e.nodeName?[e,"access",o=>o.defaultView,"optionalAccess",o=>o.Document]:[e,"access",o=>o.ownerDocument,"optionalAccess",o=>o.defaultView,"optionalAccess",o=>o.ShadowRoot]),r=Ed([s,"optionalAccess",o=>o.prototype])?Object.getOwnPropertyDescriptor(Ed([s,"optionalAccess",o=>o.prototype]),"adoptedStyleSheets"):void 0;return null!==i&&-1!==i&&s&&r?(Object.defineProperty(e,"adoptedStyleSheets",{configurable:r.configurable,enumerable:r.enumerable,get(){return Ed([r,"access",o=>o.get,"optionalAccess",o=>o.call,"call",o=>o(this)])},set(o){const a=Ed([r,"access",l=>l.set,"optionalAccess",l=>l.call,"call",l=>l(this,o)]);if(null!==i&&-1!==i)try{n.adoptStyleSheets(o,i)}catch{}return a}}),ms(()=>{Object.defineProperty(e,"adoptedStyleSheets",{configurable:r.configurable,enumerable:r.enumerable,get:r.get,set:r.set})})):()=>{}}function Z$t(t,n={}){const e=t.doc.defaultView;if(!e)return()=>{};let i;t.recordDOM&&(i=c0e(t,t.doc));const s=function V$t({mousemoveCb:t,sampling:n,doc:e,mirror:i}){if(!1===n.mousemove)return()=>{};const s="number"==typeof n.mousemove?n.mousemove:50,r="number"==typeof n.mousemoveCallback?n.mousemoveCallback:500;let a,o=[];const l=sT(ms(d=>{const h=Date.now()-a;t(o.map(f=>(f.timeOffset-=h,f)),d),o=[],a=null}),r),c=ms(sT(ms(d=>{const h=oT(d),{clientX:f,clientY:p}=HG(d)?d.changedTouches[0]:d;a||(a=WR()),o.push({x:f,y:p,id:i.getId(h),timeOffset:WR()-a}),l(typeof DragEvent<"u"&&d instanceof DragEvent?ji.Drag:d instanceof MouseEvent?ji.MouseMove:ji.TouchMove)}),s,{trailing:!1})),u=[Ml("mousemove",c,e),Ml("touchmove",c,e),Ml("drag",c,e)];return ms(()=>{u.forEach(d=>d())})}(t),r=function z$t({mouseInteractionCb:t,doc:n,mirror:e,blockClass:i,blockSelector:s,unblockSelector:r,sampling:o}){if(!1===o.mouseInteraction)return()=>{};const a=!0===o.mouseInteraction||void 0===o.mouseInteraction?{}:o.mouseInteraction,l=[];let c=null;return Object.keys(Al).filter(d=>Number.isNaN(Number(d))&&!d.endsWith("_Departed")&&!1!==a[d]).forEach(d=>{let h=t0(d);const f=(d=>h=>{const f=oT(h);if(xd(f,i,s,r,!0))return;let p=null,g=d;if("pointerType"in h){switch(h.pointerType){case"mouse":p=Vf.Mouse;break;case"touch":p=Vf.Touch;break;case"pen":p=Vf.Pen}p===Vf.Touch&&(Al[d]===Al.MouseDown?g="TouchStart":Al[d]===Al.MouseUp&&(g="TouchEnd"))}else HG(h)&&(p=Vf.Touch);null!==p?(c=p,(g.startsWith("Touch")&&p===Vf.Touch||g.startsWith("Mouse")&&p===Vf.Mouse)&&(p=null)):Al[d]===Al.Click&&(p=c,c=null);const v=HG(h)?h.changedTouches[0]:h;if(!v)return;const y=e.getId(f),{clientX:w,clientY:E}=v;ms(t)({type:Al[g],id:y,x:w,y:E,...null!==p&&{pointerType:p}})})(d);if(window.PointerEvent)switch(Al[d]){case Al.MouseDown:case Al.MouseUp:h=h.replace("mouse","pointer");break;case Al.TouchStart:case Al.TouchEnd:return}l.push(Ml(h,f,n))}),ms(()=>{l.forEach(d=>d())})}(t),o=u0e(t),a=function U$t({viewportResizeCb:t},{win:n}){let e=-1,i=-1;return Ml("resize",ms(sT(ms(()=>{const r=K1e(),o=X1e();(e!==r||i!==o)&&(t({width:Number(o),height:Number(r)}),e=r,i=o)}),200)),n)}(t,{win:e}),l=j$t(t),c=function q$t({mediaInteractionCb:t,blockClass:n,blockSelector:e,unblockSelector:i,mirror:s,sampling:r,doc:o}){const a=ms(c=>sT(ms(u=>{const d=oT(u);if(!d||xd(d,n,e,i,!0))return;const{currentTime:h,volume:f,muted:p,playbackRate:g}=d;t({type:c,id:s.getId(d),currentTime:h,volume:f,muted:p,playbackRate:g})}),r.media||500)),l=[Ml("play",a(0),o),Ml("pause",a(1),o),Ml("seeked",a(2),o),Ml("volumechange",a(3),o),Ml("ratechange",a(4),o)];return ms(()=>{l.forEach(c=>c())})}(t);let u=()=>{},d=()=>{},h=()=>{},f=()=>{};t.recordDOM&&(u=function H$t({styleSheetRuleCb:t,mirror:n,stylesheetManager:e},{win:i}){if(!i.CSSStyleSheet||!i.CSSStyleSheet.prototype)return()=>{};const s=i.CSSStyleSheet.prototype.insertRule;i.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:ms((u,d,h)=>{const[f,p]=h,{id:g,styleId:v}=km(d,n,e.styleMirror);return(g&&-1!==g||v&&-1!==v)&&t({id:g,styleId:v,adds:[{rule:f,index:p}]}),u.apply(d,h)})});const r=i.CSSStyleSheet.prototype.deleteRule;let o,a;i.CSSStyleSheet.prototype.deleteRule=new Proxy(r,{apply:ms((u,d,h)=>{const[f]=h,{id:p,styleId:g}=km(d,n,e.styleMirror);return(p&&-1!==p||g&&-1!==g)&&t({id:p,styleId:g,removes:[{index:f}]}),u.apply(d,h)})}),i.CSSStyleSheet.prototype.replace&&(o=i.CSSStyleSheet.prototype.replace,i.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:ms((u,d,h)=>{const[f]=h,{id:p,styleId:g}=km(d,n,e.styleMirror);return(p&&-1!==p||g&&-1!==g)&&t({id:p,styleId:g,replace:f}),u.apply(d,h)})})),i.CSSStyleSheet.prototype.replaceSync&&(a=i.CSSStyleSheet.prototype.replaceSync,i.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:ms((u,d,h)=>{const[f]=h,{id:p,styleId:g}=km(d,n,e.styleMirror);return(p&&-1!==p||g&&-1!==g)&&t({id:p,styleId:g,replaceSync:f}),u.apply(d,h)})}));const l={};YR("CSSGroupingRule")?l.CSSGroupingRule=i.CSSGroupingRule:(YR("CSSMediaRule")&&(l.CSSMediaRule=i.CSSMediaRule),YR("CSSConditionRule")&&(l.CSSConditionRule=i.CSSConditionRule),YR("CSSSupportsRule")&&(l.CSSSupportsRule=i.CSSSupportsRule));const c={};return Object.entries(l).forEach(([u,d])=>{c[u]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(c[u].insertRule,{apply:ms((h,f,p)=>{const[g,v]=p,{id:y,styleId:w}=km(f.parentStyleSheet,n,e.styleMirror);return(y&&-1!==y||w&&-1!==w)&&t({id:y,styleId:w,adds:[{rule:g,index:[...KR(f),v||0]}]}),h.apply(f,p)})}),d.prototype.deleteRule=new Proxy(c[u].deleteRule,{apply:ms((h,f,p)=>{const[g]=p,{id:v,styleId:y}=km(f.parentStyleSheet,n,e.styleMirror);return(v&&-1!==v||y&&-1!==y)&&t({id:v,styleId:y,removes:[{index:[...KR(f),g]}]}),h.apply(f,p)})})}),ms(()=>{i.CSSStyleSheet.prototype.insertRule=s,i.CSSStyleSheet.prototype.deleteRule=r,o&&(i.CSSStyleSheet.prototype.replace=o),a&&(i.CSSStyleSheet.prototype.replaceSync=a),Object.entries(l).forEach(([u,d])=>{d.prototype.insertRule=c[u].insertRule,d.prototype.deleteRule=c[u].deleteRule})})}(t,{win:e}),d=h0e(t,t.doc),h=function W$t({styleDeclarationCb:t,mirror:n,ignoreCSSAttributes:e,stylesheetManager:i},{win:s}){const r=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(r,{apply:ms((a,l,c)=>{const[u,d,h]=c;if(e.has(u))return r.apply(l,[u,d,h]);const{id:f,styleId:p}=km(Ed([l,"access",g=>g.parentRule,"optionalAccess",g=>g.parentStyleSheet]),n,i.styleMirror);return(f&&-1!==f||p&&-1!==p)&&t({id:f,styleId:p,set:{property:u,value:d,priority:h},index:KR(l.parentRule)}),a.apply(l,c)})});const o=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:ms((a,l,c)=>{const[u]=c;if(e.has(u))return o.apply(l,[u]);const{id:d,styleId:h}=km(Ed([l,"access",f=>f.parentRule,"optionalAccess",f=>f.parentStyleSheet]),n,i.styleMirror);return(d&&-1!==d||h&&-1!==h)&&t({id:d,styleId:h,remove:{property:u},index:KR(l.parentRule)}),a.apply(l,c)})}),ms(()=>{s.CSSStyleDeclaration.prototype.setProperty=r,s.CSSStyleDeclaration.prototype.removeProperty=o})}(t,{win:e}),t.collectFonts&&(f=function K$t({fontCb:t,doc:n}){const e=n.defaultView;if(!e)return()=>{};const i=[],s=new WeakMap,r=e.FontFace;e.FontFace=function(l,c,u){const d=new r(l,c,u);return s.set(d,{family:l,buffer:"string"!=typeof c,descriptors:u,fontSource:"string"==typeof c?c:JSON.stringify(Array.from(new Uint8Array(c)))}),d};const o=GG(n.fonts,"add",function(a){return function(l){return qR(ms(()=>{const c=s.get(l);c&&(t(c),s.delete(l))}),0),a.apply(this,[l])}});return i.push(()=>{e.FontFace=r}),i.push(o),ms(()=>{i.forEach(a=>a())})}(t)));const p=function X$t(t){const{doc:n,mirror:e,blockClass:i,blockSelector:s,unblockSelector:r,selectionCb:o}=t;let a=!0;const l=ms(()=>{const c=n.getSelection();if(!c||a&&Ed([c,"optionalAccess",h=>h.isCollapsed]))return;a=c.isCollapsed||!1;const u=[],d=c.rangeCount||0;for(let h=0;h<d;h++){const f=c.getRangeAt(h),{startContainer:p,startOffset:g,endContainer:v,endOffset:y}=f;xd(p,i,s,r,!0)||xd(v,i,s,r,!0)||u.push({start:e.getId(p),startOffset:g,end:e.getId(v),endOffset:y})}o({ranges:u})});return l(),Ml("selectionchange",l)}(t),g=function Y$t({doc:t,customElementCb:n}){const e=t.defaultView;return e&&e.customElements?GG(e.customElements,"define",function(s){return function(r,o,a){try{n({define:{name:r}})}catch{}return s.apply(this,[r,o,a])}}):()=>{}}(t),v=[];for(const y of t.plugins)v.push(y.observer(y.callback,e,y.options));return ms(()=>{c0.forEach(y=>y.reset()),Ed([i,"optionalAccess",y=>y.disconnect,"call",y=>y()]),s(),r(),o(),a(),l(),c(),u(),d(),h(),f(),p(),g(),v.forEach(y=>y())})}function XR(t){return typeof window[t]<"u"}function YR(t){return!!(typeof window[t]<"u"&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class XG{constructor(n){this.generateIdFn=n,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(n,e,i,s){const r=i||this.getIdToRemoteIdMap(n),o=s||this.getRemoteIdToIdMap(n);let a=r.get(e);return a||(a=this.generateIdFn(),r.set(e,a),o.set(a,e)),a}getIds(n,e){const i=this.getIdToRemoteIdMap(n),s=this.getRemoteIdToIdMap(n);return e.map(r=>this.getId(n,r,i,s))}getRemoteId(n,e,i){const s=i||this.getRemoteIdToIdMap(n);return"number"!=typeof e?e:s.get(e)||-1}getRemoteIds(n,e){const i=this.getRemoteIdToIdMap(n);return e.map(s=>this.getRemoteId(n,s,i))}reset(n){if(!n)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(n),this.iframeRemoteIdToIdMap.delete(n)}getIdToRemoteIdMap(n){let e=this.iframeIdToRemoteIdMap.get(n);return e||(e=new Map,this.iframeIdToRemoteIdMap.set(n,e)),e}getRemoteIdToIdMap(n){let e=this.iframeRemoteIdToIdMap.get(n);return e||(e=new Map,this.iframeRemoteIdToIdMap.set(n,e)),e}}function f0e(t){let n,e=t[0],i=1;for(;i<t.length;){const s=t[i],r=t[i+1];if(i+=2,("optionalAccess"===s||"optionalCall"===s)&&null==e)return;"access"===s||"optionalAccess"===s?(n=e,e=r(e)):("call"===s||"optionalCall"===s)&&(e=r((...o)=>e.call(n,...o)),n=void 0)}return e}class Q$t{constructor(){this.crossOriginIframeMirror=new XG(zG),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class J$t{constructor(n){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new XG(zG),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=n.mutationCb,this.wrappedEmit=n.wrappedEmit,this.stylesheetManager=n.stylesheetManager,this.recordCrossOriginIframes=n.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new XG(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=n.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(n){this.iframes.set(n,!0),n.contentWindow&&this.crossOriginIframeMap.set(n.contentWindow,n)}addLoadListener(n){this.loadListener=n}attachIframe(n,e){this.mutationCb({adds:[{parentId:this.mirror.getId(n),nextId:null,node:e}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),f0e([this,"access",i=>i.loadListener,"optionalCall",i=>i(n)]),n.contentDocument&&n.contentDocument.adoptedStyleSheets&&n.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(n.contentDocument.adoptedStyleSheets,this.mirror.getId(n.contentDocument))}handleMessage(n){const e=n;if("rrweb"!==e.data.type||e.origin!==e.data.origin||!n.source)return;const s=this.crossOriginIframeMap.get(n.source);if(!s)return;const r=this.transformCrossOriginEvent(s,e.data.event);r&&this.wrappedEmit(r,e.data.isCheckout)}transformCrossOriginEvent(n,e){switch(e.type){case Gi.FullSnapshot:{this.crossOriginIframeMirror.reset(n),this.crossOriginIframeStyleMirror.reset(n),this.replaceIdOnNode(e.data.node,n);const i=e.data.node.id;return this.crossOriginIframeRootIdMap.set(n,i),this.patchRootIdOnNode(e.data.node,i),{timestamp:e.timestamp,type:Gi.IncrementalSnapshot,data:{source:ji.Mutation,adds:[{parentId:this.mirror.getId(n),nextId:null,node:e.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Gi.Meta:case Gi.Load:case Gi.DomContentLoaded:return!1;case Gi.Plugin:return e;case Gi.Custom:return this.replaceIds(e.data.payload,n,["id","parentId","previousId","nextId"]),e;case Gi.IncrementalSnapshot:switch(e.data.source){case ji.Mutation:return e.data.adds.forEach(i=>{this.replaceIds(i,n,["parentId","nextId","previousId"]),this.replaceIdOnNode(i.node,n);const s=this.crossOriginIframeRootIdMap.get(n);s&&this.patchRootIdOnNode(i.node,s)}),e.data.removes.forEach(i=>{this.replaceIds(i,n,["parentId","id"])}),e.data.attributes.forEach(i=>{this.replaceIds(i,n,["id"])}),e.data.texts.forEach(i=>{this.replaceIds(i,n,["id"])}),e;case ji.Drag:case ji.TouchMove:case ji.MouseMove:return e.data.positions.forEach(i=>{this.replaceIds(i,n,["id"])}),e;case ji.ViewportResize:return!1;case ji.MediaInteraction:case ji.MouseInteraction:case ji.Scroll:case ji.CanvasMutation:case ji.Input:return this.replaceIds(e.data,n,["id"]),e;case ji.StyleSheetRule:case ji.StyleDeclaration:return this.replaceIds(e.data,n,["id"]),this.replaceStyleIds(e.data,n,["styleId"]),e;case ji.Font:return e;case ji.Selection:return e.data.ranges.forEach(i=>{this.replaceIds(i,n,["start","end"])}),e;case ji.AdoptedStyleSheet:return this.replaceIds(e.data,n,["id"]),this.replaceStyleIds(e.data,n,["styleIds"]),f0e([e,"access",i=>i.data,"access",i=>i.styles,"optionalAccess",i=>i.forEach,"call",i=>i(s=>{this.replaceStyleIds(s,n,["styleId"])})]),e}}return!1}replace(n,e,i,s){for(const r of s)!Array.isArray(e[r])&&"number"!=typeof e[r]||(e[r]=Array.isArray(e[r])?n.getIds(i,e[r]):n.getId(i,e[r]));return e}replaceIds(n,e,i){return this.replace(this.crossOriginIframeMirror,n,e,i)}replaceStyleIds(n,e,i){return this.replace(this.crossOriginIframeStyleMirror,n,e,i)}replaceIdOnNode(n,e){this.replaceIds(n,e,["id","rootId"]),"childNodes"in n&&n.childNodes.forEach(i=>{this.replaceIdOnNode(i,e)})}patchRootIdOnNode(n,e){n.type!==Ca.Document&&!n.rootId&&(n.rootId=e),"childNodes"in n&&n.childNodes.forEach(i=>{this.patchRootIdOnNode(i,e)})}}class e8t{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class t8t{constructor(n){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=n.mutationCb,this.scrollCb=n.scrollCb,this.bypassOptions=n.bypassOptions,this.mirror=n.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(n,e){if(!tT(n)||this.shadowDoms.has(n))return;this.shadowDoms.add(n),this.bypassOptions.canvasManager.addShadowRoot(n);const i=c0e({...this.bypassOptions,doc:e,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},n);this.restoreHandlers.push(()=>i.disconnect()),this.restoreHandlers.push(u0e({...this.bypassOptions,scrollCb:this.scrollCb,doc:n,mirror:this.mirror})),qR(()=>{n.adoptedStyleSheets&&n.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(n.adoptedStyleSheets,this.mirror.getId(n.host)),this.restoreHandlers.push(h0e({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},n))},0)}observeAttachShadow(n){!n.contentWindow||!n.contentDocument||this.patchAttachShadow(n.contentWindow.Element,n.contentDocument)}patchAttachShadow(n,e){const i=this;this.restoreHandlers.push(GG(n.prototype,"attachShadow",function(s){return function(r){const o=s.call(this,r);return this.shadowRoot&&t0e(this)&&i.addShadowRoot(this.shadowRoot,e),o}}))}reset(){this.restoreHandlers.forEach(n=>{try{n()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}class p0e{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class n8t{constructor(n){this.trackedLinkElements=new WeakSet,this.styleMirror=new M$t,this.mutationCb=n.mutationCb,this.adoptedStyleSheetCb=n.adoptedStyleSheetCb}attachLinkElement(n,e){"_cssText"in e.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:e.id,attributes:e.attributes}]}),this.trackLinkElement(n)}trackLinkElement(n){this.trackedLinkElements.has(n)||(this.trackedLinkElements.add(n),this.trackStylesheetInLinkElement(n))}adoptStyleSheets(n,e){if(0===n.length)return;const i={id:e,styleIds:[]},s=[];for(const r of n){let o;this.styleMirror.has(r)?o=this.styleMirror.getId(r):(o=this.styleMirror.add(r),s.push({styleId:o,rules:Array.from(r.rules||CSSRule,(a,l)=>({rule:F1e(a),index:l}))})),i.styleIds.push(o)}s.length>0&&(i.styles=s),this.adoptedStyleSheetCb(i)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(n){}}class i8t{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){!function N$t(...t){qG("requestAnimationFrame")(...t)}(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(n,e){const i=this.nodeMap.get(n);return i&&Array.from(i).some(s=>s!==e)}add(n,e){this.nodeMap.set(n,(this.nodeMap.get(n)||new Set).add(e))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let eo,ZR;try{if(2!==Array.from([1],t=>2*t)[0]){const t=document.createElement("iframe");document.body.appendChild(t),Array.from=VR([t,"access",n=>n.contentWindow,"optionalAccess",n=>n.Array,"access",n=>n.from])||Array.from,document.body.removeChild(t)}}catch(t){console.debug("Unable to override Array.from",t)}const Td=function s$t(){return new L1e}();function Dm(t={}){const{emit:n,checkoutEveryNms:e,checkoutEveryNth:i,blockClass:s="rr-block",blockSelector:r=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:l=null,maskAllText:c=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:h=null,unmaskTextSelector:f=null,inlineStylesheet:p=!0,maskAllInputs:g,maskInputOptions:v,slimDOMOptions:y,maskAttributeFn:w,maskInputFn:E,maskTextFn:T,maxCanvasSize:L=null,packFn:W,sampling:H={},dataURLOptions:P={},mousemoveWait:X,recordDOM:ne=!0,recordCanvas:me=!1,recordCrossOriginIframes:Ee=!1,recordAfter:Te=("DOMContentLoaded"===t.recordAfter?t.recordAfter:"load"),userTriggeredOnInput:$e=!1,collectFonts:Xe=!1,inlineImages:Ce=!1,plugins:Fe,keepIframeSrcFn:Ie=(()=>!1),ignoreCSSAttributes:He=new Set([]),errorHandler:Ve,onMutation:tt,getCanvasManager:St}=t;!function $$t(t){rT=t}(Ve);const mt=!Ee||window.parent===window;let wt=!1;if(!mt)try{window.parent.document&&(wt=!1)}catch{wt=!0}if(mt&&!n)throw new Error("emit function is required");void 0!==X&&void 0===H.mousemove&&(H.mousemove=X),Td.reset();const Ft=!0===g?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==v?v:{},Dt=!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===y,headMetaDescKeywords:"all"===y}:y||{};!function D$t(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...n)=>{let e=n[0];if(!(0 in n))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1})}();let Ut,cn=0;const Jt=Kn=>{for(const Bo of Fe||[])Bo.eventProcessor&&(Kn=Bo.eventProcessor(Kn));return W&&!wt&&(Kn=W(Kn)),Kn};eo=(Kn,Bo)=>{const ri=Kn;if(ri.timestamp=WR(),VR([c0,"access",Ns=>Ns[0],"optionalAccess",Ns=>Ns.isFrozen,"call",Ns=>Ns()])&&ri.type!==Gi.FullSnapshot&&!(ri.type===Gi.IncrementalSnapshot&&ri.data.source===ji.Mutation)&&c0.forEach(Ns=>Ns.unfreeze()),mt)VR([n,"optionalCall",Ns=>Ns(Jt(ri),Bo)]);else if(wt){const Ns={type:"rrweb",event:Jt(ri),origin:window.location.origin,isCheckout:Bo};window.parent.postMessage(Ns,"*")}if(ri.type===Gi.FullSnapshot)Ut=ri,cn=0;else if(ri.type===Gi.IncrementalSnapshot){if(ri.data.source===ji.Mutation&&ri.data.isAttachIframe)return;cn++,(i&&cn>=i||e&&Ut&&ri.timestamp-Ut.timestamp>e)&&Wc(!0)}};const Nn=Kn=>{eo({type:Gi.IncrementalSnapshot,data:{source:ji.Mutation,...Kn}})},si=Kn=>eo({type:Gi.IncrementalSnapshot,data:{source:ji.Scroll,...Kn}}),xs=Kn=>eo({type:Gi.IncrementalSnapshot,data:{source:ji.CanvasMutation,...Kn}}),Os=new n8t({mutationCb:Nn,adoptedStyleSheetCb:Kn=>eo({type:Gi.IncrementalSnapshot,data:{source:ji.AdoptedStyleSheet,...Kn}})}),ls="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new Q$t:new J$t({mirror:Td,mutationCb:Nn,stylesheetManager:Os,recordCrossOriginIframes:Ee,wrappedEmit:eo});for(const Kn of Fe||[])Kn.getMirror&&Kn.getMirror({nodeMirror:Td,crossOriginIframeMirror:ls.crossOriginIframeMirror,crossOriginIframeStyleMirror:ls.crossOriginIframeStyleMirror});const ws=new i8t,ir=function r8t(t,n){try{return t?t(n):new p0e}catch{return console.warn("Unable to initialize CanvasManager"),new p0e}}(St,{mirror:Td,win:window,mutationCb:Kn=>eo({type:Gi.IncrementalSnapshot,data:{source:ji.CanvasMutation,...Kn}}),recordCanvas:me,blockClass:s,blockSelector:r,unblockSelector:o,maxCanvasSize:L,sampling:H.canvas,dataURLOptions:P,errorHandler:Ve}),Vs="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new e8t:new t8t({mutationCb:Nn,scrollCb:si,bypassOptions:{onMutation:tt,blockClass:s,blockSelector:r,unblockSelector:o,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:h,unmaskTextSelector:f,inlineStylesheet:p,maskInputOptions:Ft,dataURLOptions:P,maskAttributeFn:w,maskTextFn:T,maskInputFn:E,recordCanvas:me,inlineImages:Ce,sampling:H,slimDOMOptions:Dt,iframeManager:ls,stylesheetManager:Os,canvasManager:ir,keepIframeSrcFn:Ie,processedNodeManager:ws},mirror:Td}),Wc=(Kn=!1)=>{if(!ne)return;eo({type:Gi.Meta,data:{href:window.location.href,width:X1e(),height:K1e()}},Kn),Os.reset(),Vs.init(),c0.forEach(ri=>ri.lock());const Bo=function I$t(t,n){const{mirror:e=new L1e,blockClass:i="rr-block",blockSelector:s=null,unblockSelector:r=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:l=null,maskTextSelector:c=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:h=!1,recordCanvas:f=!1,maskAllInputs:p=!1,maskAttributeFn:g,maskTextFn:v,maskInputFn:y,slimDOM:w=!1,dataURLOptions:E,preserveWhiteSpace:T,onSerialize:L,onIframeLoad:W,iframeLoadTimeout:H,onStylesheetLoad:P,stylesheetLoadTimeout:X,keepIframeSrcFn:ne=(()=>!1)}=n||{};return a0(t,{doc:t,mirror:e,blockClass:i,blockSelector:s,unblockSelector:r,maskAllText:o,maskTextClass:a,unmaskTextClass:l,maskTextSelector:c,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===p?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===p?{}:p,maskAttributeFn:g,maskTextFn:v,maskInputFn:y,slimDOMOptions:!0===w||"all"===w?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===w,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===w?{}:w,dataURLOptions:E,inlineImages:h,recordCanvas:f,preserveWhiteSpace:T,onSerialize:L,onIframeLoad:W,iframeLoadTimeout:H,onStylesheetLoad:P,stylesheetLoadTimeout:X,keepIframeSrcFn:ne,newlyAddedElement:!1})}(document,{mirror:Td,blockClass:s,blockSelector:r,unblockSelector:o,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:h,unmaskTextSelector:f,inlineStylesheet:p,maskAllInputs:Ft,maskAttributeFn:w,maskInputFn:E,maskTextFn:T,slimDOM:Dt,dataURLOptions:P,recordCanvas:me,inlineImages:Ce,onSerialize:ri=>{Q1e(ri,Td)&&ls.addIframe(ri),J1e(ri,Td)&&Os.trackLinkElement(ri),WG(ri)&&Vs.addShadowRoot(ri.shadowRoot,document)},onIframeLoad:(ri,Ns)=>{ls.attachIframe(ri,Ns),ri.contentWindow&&ir.addWindow(ri.contentWindow),Vs.observeAttachShadow(ri)},onStylesheetLoad:(ri,Ns)=>{Os.attachLinkElement(ri,Ns)},keepIframeSrcFn:Ie});if(!Bo)return console.warn("Failed to snapshot the document");eo({type:Gi.FullSnapshot,data:{node:Bo,initialOffset:q1e(window)}}),c0.forEach(ri=>ri.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Os.adoptStyleSheets(document.adoptedStyleSheets,Td.getId(document))};ZR=Wc;try{const Kn=[],Bo=Ns=>ms(Z$t)({onMutation:tt,mutationCb:Nn,mousemoveCb:(vi,za)=>eo({type:Gi.IncrementalSnapshot,data:{source:za,positions:vi}}),mouseInteractionCb:vi=>eo({type:Gi.IncrementalSnapshot,data:{source:ji.MouseInteraction,...vi}}),scrollCb:si,viewportResizeCb:vi=>eo({type:Gi.IncrementalSnapshot,data:{source:ji.ViewportResize,...vi}}),inputCb:vi=>eo({type:Gi.IncrementalSnapshot,data:{source:ji.Input,...vi}}),mediaInteractionCb:vi=>eo({type:Gi.IncrementalSnapshot,data:{source:ji.MediaInteraction,...vi}}),styleSheetRuleCb:vi=>eo({type:Gi.IncrementalSnapshot,data:{source:ji.StyleSheetRule,...vi}}),styleDeclarationCb:vi=>eo({type:Gi.IncrementalSnapshot,data:{source:ji.StyleDeclaration,...vi}}),canvasMutationCb:xs,fontCb:vi=>eo({type:Gi.IncrementalSnapshot,data:{source:ji.Font,...vi}}),selectionCb:vi=>{eo({type:Gi.IncrementalSnapshot,data:{source:ji.Selection,...vi}})},customElementCb:vi=>{eo({type:Gi.IncrementalSnapshot,data:{source:ji.CustomElement,...vi}})},blockClass:s,ignoreClass:a,ignoreSelector:l,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:h,unmaskTextSelector:f,maskInputOptions:Ft,inlineStylesheet:p,sampling:H,recordDOM:ne,recordCanvas:me,inlineImages:Ce,userTriggeredOnInput:$e,collectFonts:Xe,doc:Ns,maskAttributeFn:w,maskInputFn:E,maskTextFn:T,keepIframeSrcFn:Ie,blockSelector:r,unblockSelector:o,slimDOMOptions:Dt,dataURLOptions:P,mirror:Td,iframeManager:ls,stylesheetManager:Os,shadowDomManager:Vs,processedNodeManager:ws,canvasManager:ir,ignoreCSSAttributes:He,plugins:VR([Fe,"optionalAccess",vi=>vi.filter,"call",vi=>vi(za=>za.observer),"optionalAccess",vi=>vi.map,"call",vi=>vi(za=>({observer:za.observer,options:za.options,callback:Mh=>eo({type:Gi.Plugin,data:{plugin:za.name,payload:Mh}})}))])||[]},{});ls.addLoadListener(Ns=>{try{Kn.push(Bo(Ns.contentDocument))}catch(vi){console.warn(vi)}});const ri=()=>{Wc(),Kn.push(Bo(document))};return"interactive"===document.readyState||"complete"===document.readyState?ri():(Kn.push(Ml("DOMContentLoaded",()=>{eo({type:Gi.DomContentLoaded,data:{}}),"DOMContentLoaded"===Te&&ri()})),Kn.push(Ml("load",()=>{eo({type:Gi.Load,data:{}}),"load"===Te&&ri()},window))),()=>{Kn.forEach(Ns=>Ns()),ws.destroy(),ZR=void 0,function B$t(){rT=void 0}()}}catch(Kn){console.warn(Kn)}}Dm.mirror=Td,Dm.takeFullSnapshot=function s8t(t){if(!ZR)throw new Error("please take full snapshot after start recording");ZR(t)};const o8t=3;function YG(t){return t>9999999999?t:1e3*t}function ZG(t){return t>9999999999?t/1e3:t}function aT(t,n){"sentry.transaction"!==n.category&&(["ui.click","ui.input"].includes(n.category)?t.triggerUserActivity():t.checkAndHandleExpiredSession(),t.addUpdate(()=>(t.throttledAddEvent({type:Gi.Custom,timestamp:1e3*(n.timestamp||0),data:{tag:"breadcrumb",payload:oh(n,10,1e3)}}),"console"===n.category)))}const l8t="button,a";function m0e(t){return t.closest(l8t)||t}function _0e(t){const n=g0e(t);return n&&n instanceof Element?m0e(n):n}function g0e(t){return function c8t(t){return"object"==typeof t&&!!t&&"target"in t}(t)?t.target:t}let Mm;class f8t{constructor(n,e,i=aT){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=e.timeout/1e3,this._threshold=e.threshold/1e3,this._scollTimeout=e.scrollTimeout/1e3,this._replay=n,this._ignoreSelector=e.ignoreSelector,this._addBreadcrumbEvent=i}addListeners(){const n=function u8t(t){return Mm||(Mm=[],function d8t(){da(br,"open",function(t){return function(...n){if(Mm)try{Mm.forEach(e=>e())}catch{}return t.apply(br,n)}})}()),Mm.push(t),()=>{const n=Mm?Mm.indexOf(t):-1;n>-1&&Mm.splice(n,1)}}(()=>{this._lastMutation=b0e()});this._teardown=()=>{n(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(n,e){if(function m8t(t,n){return!!(!p8t.includes(t.tagName)||"INPUT"===t.tagName&&!["submit","button"].includes(t.getAttribute("type")||"")||"A"===t.tagName&&(t.hasAttribute("download")||t.hasAttribute("target")&&"_self"!==t.getAttribute("target"))||n&&t.matches(n))}(e,this._ignoreSelector)||!function _8t(t){return!(!t.data||"number"!=typeof t.data.nodeId||!t.timestamp)}(n))return;const i={timestamp:ZG(n.timestamp),clickBreadcrumb:n,clickCount:0,node:e};this._clicks.some(s=>s.node===i.node&&Math.abs(s.timestamp-i.timestamp)<1)||(this._clicks.push(i),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(n=Date.now()){this._lastMutation=ZG(n)}registerScroll(n=Date.now()){this._lastScroll=ZG(n)}registerClick(n){const e=m0e(n);this._handleMultiClick(e)}_handleMultiClick(n){this._getClicks(n).forEach(e=>{e.clickCount++})}_getClicks(n){return this._clicks.filter(e=>e.node===n)}_checkClicks(){const n=[],e=b0e();this._clicks.forEach(i=>{!i.mutationAfter&&this._lastMutation&&(i.mutationAfter=i.timestamp<=this._lastMutation?this._lastMutation-i.timestamp:void 0),!i.scrollAfter&&this._lastScroll&&(i.scrollAfter=i.timestamp<=this._lastScroll?this._lastScroll-i.timestamp:void 0),i.timestamp+this._timeout<=e&&n.push(i)});for(const i of n){const s=this._clicks.indexOf(i);s>-1&&(this._generateBreadcrumbs(i),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(n){const e=this._replay,r=!(n.scrollAfter&&n.scrollAfter<=this._scollTimeout||n.mutationAfter&&n.mutationAfter<=this._threshold),{clickCount:o,clickBreadcrumb:a}=n;if(r){const l=1e3*Math.min(n.mutationAfter||this._timeout,this._timeout),c=l<1e3*this._timeout?"mutation":"timeout",u={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:br.location.href,route:e.getCurrentRoute(),timeAfterClickMs:l,endReason:c,clickCount:o||1}};this._addBreadcrumbEvent(e,u)}else if(o>1){const l={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:br.location.href,route:e.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(e,l)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=xg(()=>this._checkClicks(),1e3)}}const p8t=["A","BUTTON","INPUT"];function b0e(){return Date.now()/1e3}function Dh(t){return{timestamp:Date.now()/1e3,type:"default",...t}}var QG=function(t){return t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment",t}(QG||{});const y8t=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function w8t(t){const n={};!t["data-sentry-component"]&&t["data-sentry-element"]&&(t["data-sentry-component"]=t["data-sentry-element"]);for(const e in t)if(y8t.has(e)){let i=e;("data-testid"===e||"data-test-id"===e)&&(i="testId"),n[i]=t[e]}return n}function v0e(t,n){const e=Dm.mirror.getId(t),i=e&&Dm.mirror.getNode(e),s=i&&Dm.mirror.getMeta(i),r=s&&function E8t(t){return t.type===QG.Element}(s)?s:null;return{message:n,data:r?{nodeId:e,node:{id:e,tagName:r.tagName,textContent:Array.from(r.childNodes).map(o=>o.type===QG.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:w8t(r.attributes)}}:{}}}const D8t={resource:function R8t(t){const{entryType:n,initiatorType:e,name:i,responseEnd:s,startTime:r,decodedBodySize:o,encodedBodySize:a,responseStatus:l,transferSize:c}=t;return["fetch","xmlhttprequest"].includes(e)?null:{type:`${n}.${e}`,start:u0(r),end:u0(s),name:i,data:{size:c,statusCode:l,decodedBodySize:o,encodedBodySize:a}}},paint:function O8t(t){const{duration:n,entryType:e,name:i,startTime:s}=t,r=u0(s);return{type:e,name:i,start:r,end:r+n,data:void 0}},navigation:function N8t(t){const{entryType:n,name:e,decodedBodySize:i,duration:s,domComplete:r,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,domInteractive:c,loadEventStart:u,loadEventEnd:d,redirectCount:h,startTime:f,transferSize:p,type:g}=t;return 0===s?null:{type:`${n}.${g}`,start:u0(f),end:u0(r),name:e,data:{size:p,decodedBodySize:i,encodedBodySize:o,duration:s,domInteractive:c,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,loadEventStart:u,loadEventEnd:d,domComplete:r,redirectCount:h}}}};function QR(t,n){return({metric:e})=>{n.replayPerformanceEntries.push(t(e))}}function A8t(t){const n=D8t[t.entryType];return n?n(t):null}function u0(t){return((Ql||br.performance.timeOrigin)+t)/1e3}function F8t(t){const n=t.entries[t.entries.length-1];return JR(t,"largest-contentful-paint",n?n.element:void 0)}function L8t(t){const n=t.entries[0];return JR(t,"cumulative-layout-shift",n&&n.sources&&n.sources[0]?n.sources[0].node:void 0)}function P8t(t){const n=t.entries[t.entries.length-1];return JR(t,"first-input-delay",n?n.target:void 0)}function $8t(t){const n=t.entries[t.entries.length-1];return JR(t,"interaction-to-next-paint",n?n.target:void 0)}function JR(t,n,e){const i=t.value,s=t.rating,r=u0(i);return{type:"web-vital",name:n,start:r,end:r,data:{value:i,size:i,rating:s,nodeId:e?Dm.mirror.getId(e):void 0}}}const Bs=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function hc(t,n){Bs&&(Tt.info(t),n&&y0e(t))}function lb(t,n){Bs&&(Tt.info(t),n&&xg(()=>{y0e(t)},0))}function y0e(t){Gp({category:"console",data:{logger:"replay"},level:"info",message:t},{level:"info"})}class JG extends Error{constructor(){super(`Event buffer exceeded maximum size of ${LG}.`)}}class w0e{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}addEvent(n){var e=this;return de(function*(){const i=JSON.stringify(n).length;if(e._totalSize+=i,e._totalSize>LG)throw new JG;e.events.push(n)})()}finish(){return new Promise(n=>{const e=this.events;this.clear(),n(JSON.stringify(e))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const n=this.events.map(e=>e.timestamp).sort()[0];return n?YG(n):null}}class U8t{constructor(n){this._worker=n,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise((n,e)=>{this._worker.addEventListener("message",({data:i})=>{i.success?n():e()},{once:!0}),this._worker.addEventListener("error",i=>{e(i)},{once:!0})})),this._ensureReadyPromise}destroy(){hc("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(n,e){const i=this._getAndIncrementId();return new Promise((s,r)=>{const o=({data:a})=>{const l=a;if(l.method===n&&l.id===i){if(this._worker.removeEventListener("message",o),!l.success)return Bs&&Tt.error("[Replay]",l.response),void r(new Error("Error in compression worker"));s(l.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:i,method:n,arg:e})})}_getAndIncrementId(){return this._id++}}class G8t{constructor(n){this._worker=new U8t(n),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(n){const e=YG(n.timestamp);(!this._earliestTimestamp||e<this._earliestTimestamp)&&(this._earliestTimestamp=e);const i=JSON.stringify(n);return this._totalSize+=i.length,this._totalSize>LG?Promise.reject(new JG):this._sendEventToWorker(i)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,n=>{Bs&&Tt.warn('[Replay] Sending "clear" message to worker failed',n)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(n){return this._worker.postMessage("addEvent",n)}_finishRequest(){var n=this;return de(function*(){const e=yield n._worker.postMessage("finish");return n._earliestTimestamp=null,n._totalSize=0,e})()}}class j8t{constructor(n){this._fallback=new w0e,this._compression=new G8t(n),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(n){this._used.hasCheckout=n}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(n){return this._used.addEvent(n)}finish(){var n=this;return de(function*(){return yield n.ensureWorkerIsLoaded(),n._used.finish()})()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}_ensureWorkerIsLoaded(){var n=this;return de(function*(){try{yield n._compression.ensureReady()}catch{return void hc("[Replay] Failed to load the compression worker, falling back to simple buffer")}yield n._switchToCompressionWorker()})()}_switchToCompressionWorker(){var n=this;return de(function*(){const{events:e,hasCheckout:i}=n._fallback,s=[];for(const r of e)s.push(n._compression.addEvent(r));n._compression.hasCheckout=i,n._used=n._compression;try{yield Promise.all(s)}catch(r){Bs&&Tt.warn("[Replay] Failed to add events when switching buffers.",r)}})()}}function ej(){try{return"sessionStorage"in br&&!!br.sessionStorage}catch{return!1}}function S0e(t){return void 0!==t&&Math.random()<t}function C0e(t){const n=Date.now();return{id:t.id||Ar(),started:t.started||n,lastActivity:t.lastActivity||n,segmentId:t.segmentId||0,sampled:t.sampled,previousSessionId:t.previousSessionId}}function tj(t){if(ej())try{br.sessionStorage.setItem(RG,JSON.stringify(t))}catch{}}function x0e({sessionSampleRate:t,allowBuffering:n,stickySession:e=!1},{previousSessionId:i}={}){const s=function Y8t(t,n){return S0e(t)?"session":!!n&&"buffer"}(t,n),r=C0e({sampled:s,previousSessionId:i});return e&&tj(r),r}function nj(t,n,e=+new Date){return null===t||void 0===n||n<0||0!==n&&t+n<=e}function E0e(t,{maxReplayDuration:n,sessionIdleExpire:e,targetTime:i=Date.now()}){return nj(t.started,n,i)||nj(t.lastActivity,e,i)}function T0e(t,{sessionIdleExpire:n,maxReplayDuration:e}){return!(!E0e(t,{sessionIdleExpire:n,maxReplayDuration:e})||"buffer"===t.sampled&&0===t.segmentId)}function ij({traceInternals:t,sessionIdleExpire:n,maxReplayDuration:e,previousSessionId:i},s){const r=s.stickySession&&function Z8t(t){if(!ej())return null;try{const n=br.sessionStorage.getItem(RG);if(!n)return null;const e=JSON.parse(n);return lb("[Replay] Loading existing session",t),C0e(e)}catch{return null}}(t);return r?T0e(r,{sessionIdleExpire:n,maxReplayDuration:e})?(lb("[Replay] Session in sessionStorage is expired, creating new one..."),x0e(s,{previousSessionId:r.id})):r:(lb("[Replay] Creating new session",t),x0e(s,{previousSessionId:i}))}function sj(t,n,e){return!!k0e(t,n)&&(I0e(t,n,e),!0)}function I0e(t,n,e){return rj.apply(this,arguments)}function rj(){return rj=de(function*(t,n,e){if(!t.eventBuffer)return null;try{e&&"buffer"===t.recordingMode&&t.eventBuffer.clear(),e&&(t.eventBuffer.hasCheckout=!0);const s=function e5t(t,n){try{if("function"==typeof n&&function Q8t(t){return t.type===Gi.Custom}(t))return n(t)}catch(e){return Bs&&Tt.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",e),null}return t}(n,t.getOptions().beforeAddRecordingEvent);return s?yield t.eventBuffer.addEvent(s):void 0}catch(i){const s=i&&i instanceof JG?"addEventSizeExceeded":"addEvent";Bs&&Tt.error(i),yield t.stop({reason:s});const r=Zi();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}),rj.apply(this,arguments)}function k0e(t,n){if(!t.eventBuffer||t.isPaused()||!t.isEnabled())return!1;const e=YG(n.timestamp);return!(e+t.timeouts.sessionIdlePause<Date.now()||e>t.getContext().initialTimestamp+t.getOptions().maxReplayDuration&&(lb(`[Replay] Skipping event with timestamp ${e} because it is after maxReplayDuration`,t.getOptions()._experiments.traceInternals),1))}function oj(t){return!t.type}function aj(t){return"transaction"===t.type}function D0e(t){return"feedback"===t.type}function M0e(t){return!!t.category}function eF(t,n){return n.map(({type:e,start:i,end:s,name:r,data:o})=>{const a=t.throttledAddEvent({type:Gi.Custom,timestamp:i,data:{tag:"performanceSpan",payload:{op:e,description:r,startTimestamp:i,endTimestamp:s,data:o}}});return"string"==typeof a?Promise.resolve(null):a})}function A0e(t,n){t.isEnabled()&&null!==n&&(function g5t(t,n){return(!Bs||!t.getOptions()._experiments.traceInternals)&&function F4t(t,n){const e=n&&n.getDsn(),i=n&&n.getOptions().tunnel;return function P4t(t,n){return!!n&&t.includes(n.host)}(t,e)||function L4t(t,n){return!!n&&A1e(t)===A1e(n)}(t,i)}(n,Zi())}(t,n.name)||t.addUpdate(()=>(eF(t,[n]),!0)))}function tF(t){if(!t)return;const n=new TextEncoder;try{if("string"==typeof t)return n.encode(t).length;if(t instanceof URLSearchParams)return n.encode(t.toString()).length;if(t instanceof FormData){const e=F0e(t);return n.encode(e).length}if(t instanceof Blob)return t.size;if(t instanceof ArrayBuffer)return t.byteLength}catch{}}function O0e(t){if(!t)return;const n=parseInt(t,10);return isNaN(n)?void 0:n}function N0e(t){try{if("string"==typeof t)return[t];if(t instanceof URLSearchParams)return[t.toString()];if(t instanceof FormData)return[F0e(t)];if(!t)return[void 0]}catch{return Bs&&Tt.warn("[Replay] Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return Bs&&Tt.info("[Replay] Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function nF(t,n){if(!t)return{headers:{},size:void 0,_meta:{warnings:[n]}};const e={...t._meta};return e.warnings=[...e.warnings||[],n],t._meta=e,t}function R0e(t,n){if(!n)return null;const{startTimestamp:e,endTimestamp:i,url:s,method:r,statusCode:o,request:a,response:l}=n;return{type:t,start:e/1e3,end:i/1e3,name:s,data:ha({method:r,statusCode:o,request:a,response:l})}}function lT(t){return{headers:{},size:t,_meta:{warnings:["URL_SKIPPED"]}}}function Am(t,n,e){if(!n&&0===Object.keys(t).length)return;if(!n)return{headers:t};if(!e)return{headers:t,size:n};const i={headers:t,size:n},{body:s,warnings:r}=function b5t(t){if(!t||"string"!=typeof t)return{body:t};const n=t.length>N1e,e=function v5t(t){const n=t[0],e=t[t.length-1];return"["===n&&"]"===e||"{"===n&&"}"===e}(t);if(n){const i=t.slice(0,N1e);return e?{body:i,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${i}\u2026`,warnings:["TEXT_TRUNCATED"]}}if(e)try{return{body:JSON.parse(t)}}catch{}return{body:t}}(e);return i.body=s,r&&r.length>0&&(i._meta={warnings:r}),i}function lj(t,n){return Object.entries(t).reduce((e,[i,s])=>{const r=i.toLowerCase();return n.includes(r)&&t[i]&&(e[r]=s),e},{})}function F0e(t){return new URLSearchParams(t).toString()}function iF(t,n){const e=function y5t(t,n=br.document.baseURI){if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith(br.location.origin))return t;const e=new URL(t,n);if(e.origin!==new URL(n).origin)return t;const i=e.href;return!t.endsWith("/")&&i.endsWith("/")?i.slice(0,-1):i}(t);return Bp(e,n)}function cj(){return cj=de(function*(t,n,e){try{const i=yield function C5t(t,n,e){return uj.apply(this,arguments)}(t,n,e),s=R0e("resource.fetch",i);A0e(e.replay,s)}catch(i){Bs&&Tt.error("[Replay] Failed to capture fetch breadcrumb",i)}}),cj.apply(this,arguments)}function uj(){return uj=de(function*(t,n,e){const i=Date.now(),{startTimestamp:s=i,endTimestamp:r=i}=n,{url:o,method:a,status_code:l=0,request_body_size:c,response_body_size:u}=t.data,d=iF(o,e.networkDetailAllowUrls)&&!iF(o,e.networkDetailDenyUrls),h=d?function x5t({networkCaptureBodies:t,networkRequestHeaders:n},e,i){const s=e?function k5t(t,n){return 1===t.length&&"string"!=typeof t[0]?$0e(t[0],n):2===t.length?$0e(t[1],n):{}}(e,n):{};if(!t)return Am(s,i,void 0);const r=L0e(e),[o,a]=N0e(r),l=Am(s,i,o);return a?nF(l,a):l}(e,n.input,c):lT(c),f=yield function E5t(t,n,e,i){return dj.apply(this,arguments)}(d,e,n.response,u);return{startTimestamp:s,endTimestamp:r,url:o,method:a,statusCode:l,request:h,response:f}}),uj.apply(this,arguments)}function dj(){return dj=de(function*(t,{networkCaptureBodies:n,networkResponseHeaders:e},i,s){if(!t&&void 0!==s)return lT(s);const r=i?P0e(i.headers,e):{};if(!i||!n&&void 0!==s)return Am(r,s,void 0);const[o,a]=yield function I5t(t){return hj.apply(this,arguments)}(i),l=function T5t(t,{networkCaptureBodies:n,responseBodySize:e,captureDetails:i,headers:s}){try{const r=t&&t.length&&void 0===e?tF(t):e;return i?Am(s,r,n?t:void 0):lT(r)}catch(r){return Bs&&Tt.warn("[Replay] Failed to serialize response body",r),Am(s,e,void 0)}}(o,{networkCaptureBodies:n,responseBodySize:s,captureDetails:t,headers:r});return a?nF(l,a):l}),dj.apply(this,arguments)}function hj(){return hj=de(function*(t){const n=function D5t(t){try{return t.clone()}catch(n){Bs&&Tt.warn("[Replay] Failed to clone response body",n)}}(t);if(!n)return[void 0,"BODY_PARSE_ERROR"];try{return[yield M5t(n)]}catch(e){return Bs&&Tt.warn("[Replay] Failed to get text body from response",e),[void 0,"BODY_PARSE_ERROR"]}}),hj.apply(this,arguments)}function L0e(t=[]){if(2===t.length&&"object"==typeof t[1])return t[1].body}function P0e(t,n){const e={};return n.forEach(i=>{t.get(i)&&(e[i]=t.get(i))}),e}function $0e(t,n){if(!t)return{};const e=t.headers;return e?e instanceof Headers?P0e(e,n):Array.isArray(e)?{}:lj(e,n):{}}function M5t(t){return new Promise((n,e)=>{const i=xg(()=>e(new Error("Timeout while trying to read response body")),500);(function A5t(t){return fj.apply(this,arguments)})(t).then(s=>n(s),s=>e(s)).finally(()=>clearTimeout(i))})}function fj(){return fj=de(function*(t){return yield t.text()}),fj.apply(this,arguments)}function pj(){return pj=de(function*(t,n,e){try{const i=function R5t(t,n,e){const i=Date.now(),{startTimestamp:s=i,endTimestamp:r=i,input:o,xhr:a}=n,{url:l,method:c,status_code:u=0,request_body_size:d,response_body_size:h}=t.data;if(!l)return null;if(!a||!iF(l,e.networkDetailAllowUrls)||iF(l,e.networkDetailDenyUrls))return{startTimestamp:s,endTimestamp:r,url:l,method:c,statusCode:u,request:lT(d),response:lT(h)};const f=a[Sg],p=f?lj(f.request_headers,e.networkRequestHeaders):{},g=lj(function F5t(t){const n=t.getAllResponseHeaders();return n?n.split("\r\n").reduce((e,i)=>{const[s,r]=i.split(": ");return r&&(e[s.toLowerCase()]=r),e},{}):{}}(a),e.networkResponseHeaders),[v,y]=e.networkCaptureBodies?N0e(o):[void 0],[w,E]=e.networkCaptureBodies?function L5t(t){const n=[];try{return[t.responseText]}catch(e){n.push(e)}try{return function P5t(t,n){try{if("string"==typeof t)return[t];if(t instanceof Document)return[t.body.outerHTML];if("json"===n&&t&&"object"==typeof t)return[JSON.stringify(t)];if(!t)return[void 0]}catch{return Bs&&Tt.warn("[Replay] Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return Bs&&Tt.info("[Replay] Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}(t.response,t.responseType)}catch(e){n.push(e)}return Bs&&Tt.warn("[Replay] Failed to get xhr response body",...n),[void 0]}(a):[void 0],T=Am(p,d,v),L=Am(g,h,w);return{startTimestamp:s,endTimestamp:r,url:l,method:c,statusCode:u,request:y?nF(T,y):T,response:E?nF(L,E):L}}(t,n,e),s=R0e("resource.xhr",i);A0e(e.replay,s)}catch(i){Bs&&Tt.error("[Replay] Failed to capture xhr breadcrumb",i)}}),pj.apply(this,arguments)}function B5t(t){const n=Zi();try{const{networkDetailAllowUrls:e,networkDetailDenyUrls:i,networkCaptureBodies:s,networkRequestHeaders:r,networkResponseHeaders:o}=t.getOptions(),a={replay:t,networkDetailAllowUrls:e,networkDetailDenyUrls:i,networkCaptureBodies:s,networkRequestHeaders:r,networkResponseHeaders:o};n&&n.on("beforeAddBreadcrumb",(l,c)=>function V5t(t,n,e){if(n.data)try{(function z5t(t){return"xhr"===t.category})(n)&&function G5t(t){return t&&t.xhr}(e)&&(function N5t(t,n){const{xhr:e,input:i}=n;if(!e)return;const s=tF(i),r=e.getResponseHeader("content-length")?O0e(e.getResponseHeader("content-length")):function $5t(t,n){try{return tF("json"===n&&t&&"object"==typeof t?JSON.stringify(t):t)}catch{return}}(e.response,e.responseType);void 0!==s&&(t.data.request_body_size=s),void 0!==r&&(t.data.response_body_size=r)}(n,e),function O5t(t,n,e){pj.apply(this,arguments)}(n,e,t)),function U5t(t){return"fetch"===t.category}(n)&&function j5t(t){return t&&t.response}(e)&&(function S5t(t,n){const{input:e,response:i}=n,r=tF(e?L0e(e):void 0),o=i?O0e(i.headers.get("content-length")):void 0;void 0!==r&&(t.data.request_body_size=r),void 0!==o&&(t.data.response_body_size=o)}(n,e),function w5t(t,n,e){cj.apply(this,arguments)}(n,e,t))}catch{Bs&&Tt.warn("Error when enriching network breadcrumb")}}(a,l,c))}catch{}}function H5t(t){const n=Zi();Pde((t=>n=>{if(!t.isEnabled())return;const e=function C8t(t){const{target:n,message:e}=function x8t(t){const n="click"===t.name;let e,i=null;try{i=n?_0e(t.event):g0e(t.event),e=$p(i,{maxStringLength:200})||"<unknown>"}catch{e="<unknown>"}return{target:i,message:e}}(t);return Dh({category:`ui.${t.name}`,...v0e(n,e)})}(n);if(!e)return;const i="click"===n.name,s=i?n.event:void 0;i&&t.clickDetector&&s&&s.target&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&function h8t(t,n,e){t.handleClick(n,e)}(t.clickDetector,e,_0e(n.event)),aT(t,e)})(t)),wA(function _5t(t){return n=>{if(!t.isEnabled())return;const e=function m5t(t){const{from:n,to:e}=t,i=Date.now()/1e3;return{type:"navigation.push",start:i,end:i,name:e,data:{previous:n}}}(n);null!==e&&(t.getContext().urls.push(e.name),t.triggerUserActivity(),t.addUpdate(()=>(eF(t,[e]),!1)))}}(t)),function a5t(t){const n=Zi();n&&n.on("beforeAddBreadcrumb",e=>function l5t(t,n){if(!t.isEnabled()||!M0e(n))return;const e=function c5t(t){return!M0e(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui.")?null:"console"===t.category?function u5t(t){const n=t.data&&t.data.arguments;if(!Array.isArray(n)||0===n.length)return Dh(t);let e=!1;const i=n.map(s=>{if(!s)return s;if("string"==typeof s)return s.length>zR?(e=!0,`${s.slice(0,zR)}\u2026`):s;if("object"==typeof s)try{const r=oh(s,7);return JSON.stringify(r).length>zR?(e=!0,`${JSON.stringify(r,null,2).slice(0,zR)}\u2026`):r}catch{}return s});return Dh({...t,data:{...t.data,arguments:i,...e?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(t):Dh(t)}(n);e&&aT(t,e)}(t,e))}(t),B5t(t),function Rtt(t){Oc().addEventProcessor(t)}(function p5t(t){return Object.assign((n,e)=>t.isEnabled()?function t5t(t){return"replay_event"===t.type}(n)?(delete n.breadcrumbs,n):(oj(n)||aj(n)||D0e(n))&&t.checkAndHandleExpiredSession()?D0e(n)?(t.flush(),n.contexts.feedback.replay_id=t.getSessionId(),function h5t(t,n){t.triggerUserActivity(),t.addUpdate(()=>!n.timestamp||(t.throttledAddEvent({type:Gi.Custom,timestamp:1e3*n.timestamp,data:{tag:"breadcrumb",payload:{timestamp:n.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:n.event_id}}}}),!1))}(t,n),n):function d5t(t,n){return!(t.type||!t.exception||!t.exception.values||!t.exception.values.length||!n.originalException||!n.originalException.__rrweb__)}(n,e)&&!t.getOptions()._experiments.captureExceptions?(Bs&&Tt.log("[Replay] Ignoring error from rrweb internals",n),null):((function f5t(t,n){return!("buffer"!==t.recordingMode||n.message===FG||!n.exception||n.type)&&S0e(t.getOptions().errorSampleRate)}(t,n)||"session"===t.recordingMode)&&(n.tags={...n.tags,replayId:t.getSessionId()}),n):n:n,{id:"Replay"})}(t)),n&&(n.on("beforeSendEvent",function r5t(t){return n=>{!t.isEnabled()||!oj(n)||function o5t(t,n){const e=n.exception&&n.exception.values&&n.exception.values[0]&&n.exception.values[0].value;"string"==typeof e&&(e.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||e.match(/(does not match server-rendered HTML|Hydration failed because)/i))&&aT(t,Dh({category:"replay.hydrate-error",data:{url:Eue()}}))}(t,n)}}(t)),n.on("afterSendEvent",function n5t(t){return(n,e)=>{if(!t.isEnabled()||!oj(n)&&!aj(n))return;const i=e&&e.statusCode;if(!(!i||i<200||i>=300)){if(aj(n))return void function i5t(t,n){const e=t.getContext();n.contexts&&n.contexts.trace&&n.contexts.trace.trace_id&&e.traceIds.size<100&&e.traceIds.add(n.contexts.trace.trace_id)}(t,n);!function s5t(t,n){const e=t.getContext();if(n.event_id&&e.errorIds.size<100&&e.errorIds.add(n.event_id),"buffer"!==t.recordingMode||!n.tags||!n.tags.replayId)return;const{beforeErrorSampling:i}=t.getOptions();"function"==typeof i&&!i(n)||xg(()=>{t.sendBufferedReplayOrFlush()})}(t,n)}}}(t)),n.on("createDsc",i=>{const s=t.getSessionId();s&&t.isEnabled()&&"session"===t.recordingMode&&t.checkAndHandleExpiredSession()&&(i.replay_id=s)}),n.on("spanStart",i=>{t.lastActiveSpan=i}),n.on("spanEnd",i=>{t.lastActiveSpan=i}),n.on("beforeSendFeedback",(i,s)=>{const r=t.getSessionId();s&&s.includeReplay&&t.isEnabled()&&r&&i.contexts&&i.contexts.feedback&&(i.contexts.feedback.replay_id=r)}))}function mj(){return mj=de(function*(t){try{return Promise.all(eF(t,[q5t(br.performance.memory)]))}catch{return[]}}),mj.apply(this,arguments)}function q5t(t){const{jsHeapSizeLimit:n,totalJSHeapSize:e,usedJSHeapSize:i}=t,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:n,totalJSHeapSize:e,usedJSHeapSize:i}}}}function X5t(t){let n=!1;return(e,i)=>{if(!t.checkAndHandleExpiredSession())return void(Bs&&Tt.warn("[Replay] Received replay event after session expired."));const s=i||!n;n=!0,t.clickDetector&&function g8t(t,n){try{if(!function b8t(t){return t.type===o8t}(n))return;const{source:e}=n.data;if(e===ji.Mutation&&t.registerMutation(n.timestamp),e===ji.Scroll&&t.registerScroll(n.timestamp),function v8t(t){return t.data.source===ji.MouseInteraction}(n)){const{type:i,id:s}=n.data,r=Dm.mirror.getNode(s);r instanceof HTMLElement&&i===Al.Click&&t.registerClick(r)}}catch{}}(t.clickDetector,e),t.addUpdate(()=>{if("buffer"===t.recordingMode&&s&&t.setInitialState(),!sj(t,e,s))return!0;if(!s)return!1;if(function Z5t(t,n){!n||!t.session||0!==t.session.segmentId||sj(t,function Y5t(t){const n=t.getOptions();return{type:Gi.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:t.isRecordingCanvas(),sessionSampleRate:n.sessionSampleRate,errorSampleRate:n.errorSampleRate,useCompressionOption:n.useCompression,blockAllMedia:n.blockAllMedia,maskAllText:n.maskAllText,maskAllInputs:n.maskAllInputs,useCompression:!!t.eventBuffer&&"worker"===t.eventBuffer.type,networkDetailHasUrls:n.networkDetailAllowUrls.length>0,networkCaptureBodies:n.networkCaptureBodies,networkRequestHasHeaders:n.networkRequestHeaders.length>0,networkResponseHasHeaders:n.networkResponseHeaders.length>0}}}}(t),!1)}(t,s),t.session&&t.session.previousSessionId)return!0;if("buffer"===t.recordingMode&&t.session&&t.eventBuffer){const r=t.eventBuffer.getEarliestTimestamp();r&&(hc(`[Replay] Updating session start time to earliest event in buffer to ${new Date(r)}`,t.getOptions()._experiments.traceInternals),t.session.started=r,t.getOptions().stickySession&&tj(t.session))}return"session"===t.recordingMode&&t.flush(),!0})}}function _j(){return _j=de(function*({client:t,scope:n,replayId:e,event:i}){const r={event_id:e,integrations:"object"!=typeof t._integrations||null===t._integrations||Array.isArray(t._integrations)?void 0:Object.keys(t._integrations)};t.emit("preprocessEvent",i,r);const o=yield ode(t.getOptions(),i,r,n,t,Oc());if(!o)return null;o.platform=o.platform||"javascript";const a=t.getSdkMetadata(),{name:l,version:c}=a&&a.sdk||{};return o.sdk={...o.sdk,name:l||"sentry.javascript.unknown",version:c||"0.0.0"},o}),_j.apply(this,arguments)}function gj(){return gj=de(function*({recordingData:t,replayId:n,segmentId:e,eventContext:i,timestamp:s,session:r}){const o=function J5t({recordingData:t,headers:n}){let e;const i=`${JSON.stringify(n)}\n`;if("string"==typeof t)e=`${i}${t}`;else{const r=(new TextEncoder).encode(i);e=new Uint8Array(r.length+t.length),e.set(r),e.set(t,r.length)}return e}({recordingData:t,headers:{segment_id:e}}),{urls:a,errorIds:l,traceIds:c,initialTimestamp:u}=i,d=Zi(),h=Cr(),f=d&&d.getTransport(),p=d&&d.getDsn();if(!(d&&f&&p&&r.sampled))return yf({});const g={type:V4t,replay_start_timestamp:u/1e3,timestamp:s/1e3,error_ids:l,trace_ids:c,urls:a,replay_id:n,segment_id:e,replay_type:r.sampled},v=yield function eBt(t){return _j.apply(this,arguments)}({scope:h,client:d,replayId:n,event:g});if(!v)return d.recordDroppedEvent("event_processor","replay",g),hc("An event processor returned `null`, will not send event."),yf({});delete v.sdkProcessingMetadata;const y=function Q5t(t,n,e,i){return wg(Ade(t,E6(t),i,e),[[{type:"replay_event"},t],[{type:"replay_recording",length:"string"==typeof n?(new TextEncoder).encode(n).length:n.length},n]])}(v,o,p,d.getOptions().tunnel);let w;try{w=yield f.send(y)}catch(T){const L=new Error(FG);try{L.cause=T}catch{}throw L}if("number"==typeof w.statusCode&&(w.statusCode<200||w.statusCode>=300))throw new B0e(w.statusCode);const E=nhe({},w);if(the(E,"replay"))throw new V0e(E);return w}),gj.apply(this,arguments)}class B0e extends Error{constructor(n){super(`Transport returned status code ${n}`)}}class V0e extends Error{constructor(n){super("Rate limit hit"),this.rateLimits=n}}function z0e(t){return bj.apply(this,arguments)}function bj(){return bj=de(function*(t,n={count:0,interval:W4t}){const{recordingData:e,options:i}=t;if(e.length)try{return yield function tBt(t){return gj.apply(this,arguments)}(t),!0}catch(s){if(s instanceof B0e||s instanceof V0e)throw s;if(cde("Replays",{_retryCount:n.count}),Bs&&i._experiments&&i._experiments.captureExceptions&&_A(s),n.count>=q4t){const r=new Error(`${FG} - max retries exceeded`);try{r.cause=s}catch{}throw r}return n.interval*=++n.count,new Promise((r,o)=>{xg(de(function*(){try{yield z0e(t,n),r(!0)}catch(a){o(a)}}),n.interval)})}}),bj.apply(this,arguments)}const U0e="__THROTTLED";class Om{constructor({options:n,recordingOptions:e}){Om.prototype.__init.call(this),Om.prototype.__init2.call(this),Om.prototype.__init3.call(this),Om.prototype.__init4.call(this),Om.prototype.__init5.call(this),Om.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=e,this._options=n,this._debouncedFlush=function K5t(t,n,e){let i,s,r;const o=e&&e.maxWait?Math.max(e.maxWait,n):0;function a(){return l(),i=t(),i}function l(){void 0!==s&&clearTimeout(s),void 0!==r&&clearTimeout(r),s=r=void 0}function u(){return s&&clearTimeout(s),s=xg(a,n),o&&void 0===r&&(r=xg(a,o)),i}return u.cancel=l,u.flush=function c(){return void 0!==s||void 0!==r?a():i},u}(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=function iBt(t,n,e){const i=new Map;let o=!1;return(...a)=>{const l=Math.floor(Date.now()/1e3);if((a=>{const l=a-e;i.forEach((c,u)=>{u<l&&i.delete(u)})})(l),[...i.values()].reduce((a,l)=>a+l,0)>=n){const u=o;return o=!0,u?"__SKIPPED":U0e}o=!1;const c=i.get(l)||0;return i.set(l,c+1),t(...a)}}((o,a)=>function J8t(t,n,e){return k0e(t,n)?I0e(t,n,e):Promise.resolve(null)}(this,o,a),300,5);const{slowClickTimeout:i,slowClickIgnoreSelectors:s}=this.getOptions(),r=i?{threshold:Math.min(3e3,i),timeout:i,scrollTimeout:300,ignoreSelector:s?s.join(","):""}:void 0;r&&(this.clickDetector=new f8t(this,r))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}initializeSampling(n){const{errorSampleRate:e,sessionSampleRate:i}=this._options,s=e<=0&&i<=0;if(this._requiresManualStart=s,!s){if(this._initializeSessionForSampling(n),!this.session)return void this._handleException(new Error("Unable to initialize and create session"));!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",lb(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording())}}start(){if(this._isEnabled&&"session"===this.recordingMode)return void(Bs&&Tt.info("[Replay] Recording is already in progress"));if(this._isEnabled&&"buffer"===this.recordingMode)return void(Bs&&Tt.info("[Replay] Buffering is in progress, call `flush()` to save the replay"));lb("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const n=ij({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=n,this._initializeRecording()}startBuffering(){if(this._isEnabled)return void(Bs&&Tt.info("[Replay] Buffering is in progress, call `flush()` to save the replay"));lb("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const n=ij({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=n,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const n=this._canvas;this._stopRecording=Dm({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:X5t(this),onMutation:this._onMutationHandler,...n?{recordCanvas:n.recordCanvas,getCanvasManager:n.getCanvasManager,sampling:n.sampling,dataURLOptions:n.dataURLOptions}:{}})}catch(n){this._handleException(n)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(n){return this._handleException(n),!1}}stop({forceFlush:n=!1,reason:e}={}){var i=this;return de(function*(){if(i._isEnabled){i._isEnabled=!1;try{hc("[Replay] Stopping Replay"+(e?` triggered by ${e}`:""),i._options._experiments.traceInternals),i._removeListeners(),i.stopRecording(),i._debouncedFlush.cancel(),n&&(yield i._flush({force:!0})),i.eventBuffer&&i.eventBuffer.destroy(),i.eventBuffer=null,function K8t(t){(function X8t(){if(ej())try{br.sessionStorage.removeItem(RG)}catch{}})(),t.session=void 0}(i)}catch(s){i._handleException(s)}}})()}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),hc("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),hc("[Replay] Resuming replay",this._options._experiments.traceInternals))}sendBufferedReplayOrFlush({continueRecording:n=!0}={}){var e=this;return de(function*(){if("session"===e.recordingMode)return e.flushImmediate();const i=Date.now();hc("[Replay] Converting buffer to session",e._options._experiments.traceInternals),yield e.flushImmediate();const s=e.stopRecording();!n||!s||"session"!==e.recordingMode&&(e.recordingMode="session",e.session&&(e._updateUserActivity(i),e._updateSessionActivity(i),e._maybeSaveSession()),e.startRecording())})()}addUpdate(n){const e=n();"buffer"!==this.recordingMode&&!0!==e&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&nj(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${br.location.origin}${br.location.pathname}${br.location.hash}${br.location.search}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=e,this._context.initialTimestamp=Date.now(),this._context.urls.push(e)}throttledAddEvent(n,e){const i=this._throttledAddEvent(n,e);if(i===U0e){const s=Dh({category:"replay.throttled"});this.addUpdate(()=>!sj(this,{type:5,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return i}getCurrentRoute(){const n=this.lastActiveSpan||ma(),e=n&&pa(n),s=(e&&os(e).data||{})[Nc];if(e&&s&&["route","custom"].includes(s))return os(e).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=function H8t({useCompression:t,workerUrl:n}){if(t&&window.Worker){const e=function W8t(t){try{const n=t||function q8t(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?function z8t(){const t=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(J)return J.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(t)}():""}();if(!n)return;hc("[Replay] Using compression worker"+(t?` from ${t}`:""));const e=new Worker(n);return new j8t(e)}catch{hc("[Replay] Failed to create compression worker")}}(n);if(e)return e}return hc("[Replay] Using simple buffer"),new w0e}({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(n){Bs&&Tt.error("[Replay]",n),Bs&&this._options._experiments&&this._options._experiments.captureExceptions&&_A(n)}_initializeSessionForSampling(n){const i=ij({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:n},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:this._options.errorSampleRate>0});this.session=i}_checkSession(){if(!this.session)return!1;const n=this.session;return!T0e(n,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(n),!1)}_refreshSession(n){var e=this;return de(function*(){e._isEnabled&&(yield e.stop({reason:"refresh session"}),e.initializeSampling(n.id))})()}_addListeners(){try{br.document.addEventListener("visibilitychange",this._handleVisibilityChange),br.addEventListener("blur",this._handleWindowBlur),br.addEventListener("focus",this._handleWindowFocus),br.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(H5t(this),this._hasInitializedCoreListeners=!0)}catch(n){this._handleException(n)}this._performanceCleanupCallback=function B8t(t){function n(s){t.performanceEntries.includes(s)||t.performanceEntries.push(s)}function e({entries:s}){s.forEach(n)}const i=[];return["navigation","paint","resource"].forEach(s=>{i.push(e1(s,e))}),i.push(Ehe(QR(F8t,t)),xhe(QR(L8t,t)),The(QR(P8t,t)),Ihe(QR($8t,t))),()=>{i.forEach(s=>s())}}(this)}_removeListeners(){try{br.document.removeEventListener("visibilitychange",this._handleVisibilityChange),br.removeEventListener("blur",this._handleWindowBlur),br.removeEventListener("focus",this._handleWindowFocus),br.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(n){this._handleException(n)}}__init(){this._handleVisibilityChange=()=>{"visible"===br.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const n=Dh({category:"ui.blur"});this._doChangeToBackgroundTasks(n)}}__init3(){this._handleWindowFocus=()=>{const n=Dh({category:"ui.focus"});this._doChangeToForegroundTasks(n)}}__init4(){this._handleKeyboardEvent=n=>{!function T8t(t,n){if(!t.isEnabled())return;t.updateUserActivity();const e=function I8t(t){const{metaKey:n,shiftKey:e,ctrlKey:i,altKey:s,key:r,target:o}=t;if(!o||function k8t(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable}(o)||!r)return null;if(!(n||i||s)&&1===r.length)return null;const c=$p(o,{maxStringLength:200})||"<unknown>";return Dh({category:"ui.keyDown",message:c,data:{...v0e(o,c).data,metaKey:n,shiftKey:e,ctrlKey:i,altKey:s,key:r}})}(n);e&&aT(t,e)}(this,n)}}_doChangeToBackgroundTasks(n){!this.session||E0e(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(n&&this._createCustomBreadcrumb(n),this.conditionalFlush())}_doChangeToForegroundTasks(n){this.session&&(this.checkAndHandleExpiredSession()?n&&this._createCustomBreadcrumb(n):hc("[Replay] Document has become active, but session has expired"))}_updateUserActivity(n=Date.now()){this._lastActivity=n}_updateSessionActivity(n=Date.now()){this.session&&(this.session.lastActivity=n,this._maybeSaveSession())}_createCustomBreadcrumb(n){this.addUpdate(()=>{this.throttledAddEvent({type:Gi.Custom,timestamp:n.timestamp||0,data:{tag:"breadcrumb",payload:n}})})}_addPerformanceEntries(){const n=function M8t(t){return t.map(A8t).filter(Boolean)}(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(eF(this,n))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:n,eventBuffer:e}=this;if(!n||!e||this._requiresManualStart||n.segmentId)return;const i=e.getEarliestTimestamp();i&&i<this._context.initialTimestamp&&(this._context.initialTimestamp=i)}_popEventContext(){const n={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),n}_runFlush(){var n=this;return de(function*(){const e=n.getSessionId();if(n.session&&n.eventBuffer&&e){if(yield n._addPerformanceEntries(),n.eventBuffer&&n.eventBuffer.hasEvents&&(yield function W5t(t){return mj.apply(this,arguments)}(n),n.eventBuffer&&e===n.getSessionId()))try{n._updateInitialTimestampFromEventBuffer();const i=Date.now();if(i-n._context.initialTimestamp>n._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const s=n._popEventContext(),r=n.session.segmentId++;n._maybeSaveSession();const o=yield n.eventBuffer.finish();yield z0e({replayId:e,recordingData:o,segmentId:r,eventContext:s,session:n.session,options:n.getOptions(),timestamp:i})}catch(i){n._handleException(i),n.stop({reason:"sendReplay"});const s=Zi();s&&s.recordDroppedEvent("send_error","replay")}}else Bs&&Tt.error("[Replay] No session or eventBuffer found to flush.")})()}__init5(){var n=this;this._flush=de(function*({force:e=!1}={}){if(!n._isEnabled&&!e)return;if(!n.checkAndHandleExpiredSession())return void(Bs&&Tt.error("[Replay] Attempting to finish replay event after session expired."));if(!n.session)return;const i=n.session.started,r=Date.now()-i;n._debouncedFlush.cancel();const o=r<n._options.minReplayDuration;if(o||r>n._options.maxReplayDuration+5e3)return hc(`[Replay] Session duration (${Math.floor(r/1e3)}s) is too ${o?"short":"long"}, not sending replay.`,n._options._experiments.traceInternals),void(o&&n._debouncedFlush());const l=n.eventBuffer;if(l&&0===n.session.segmentId&&!l.hasCheckout&&hc("[Replay] Flushing initial segment without checkout.",n._options._experiments.traceInternals),!n._flushLock)return n._flushLock=n._runFlush(),yield n._flushLock,void(n._flushLock=void 0);try{yield n._flushLock}catch(c){Bs&&Tt.error(c)}finally{n._debouncedFlush()}})}_maybeSaveSession(){this.session&&this._options.stickySession&&tj(this.session)}__init6(){this._onMutationHandler=n=>{const e=n.length,i=this._options.mutationLimit,r=i&&e>i;if(e>this._options.mutationBreadcrumbLimit||r){const o=Dh({category:"replay.mutations",data:{count:e,limit:r}});this._createCustomBreadcrumb(o)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function cT(t,n){return[...t,...n].join(",")}const G0e='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',oBt=["content-length","content-type","accept"];let j0e=!1;const aBt=t=>new sF(t);class sF{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:n=5e3,flushMaxDelay:e=5500,minReplayDuration:i=4999,maxReplayDuration:s=36e5,stickySession:r=!0,useCompression:o=!0,workerUrl:a,_experiments:l={},maskAllText:c=!0,maskAllInputs:u=!0,blockAllMedia:d=!0,mutationBreadcrumbLimit:h=750,mutationLimit:f=1e4,slowClickTimeout:p=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:v=[],networkDetailDenyUrls:y=[],networkCaptureBodies:w=!0,networkRequestHeaders:E=[],networkResponseHeaders:T=[],mask:L=[],maskAttributes:W=["title","placeholder"],unmask:H=[],block:P=[],unblock:X=[],ignore:ne=[],maskFn:me,beforeAddRecordingEvent:Ee,beforeErrorSampling:Te}={}){this.name=sF.id;const $e=function sBt({mask:t,unmask:n,block:e,unblock:i,ignore:s}){return{maskTextSelector:cT(t,[".sentry-mask","[data-sentry-mask]"]),unmaskTextSelector:cT(n,[]),blockSelector:cT(e,[".sentry-block","[data-sentry-block]",'base[href="/"]']),unblockSelector:cT(i,[]),ignoreSelector:cT(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}({mask:L,unmask:H,block:P,unblock:X,ignore:ne});if(this._recordingOptions={maskAllInputs:u,maskAllText:c,maskInputOptions:{password:!0},maskTextFn:me,maskInputFn:me,maskAttributeFn:(Xe,Ce,Fe)=>function rBt({el:t,key:n,maskAttributes:e,maskAllText:i,privacyOptions:s,value:r}){return!i||s.unmaskTextSelector&&t.matches(s.unmaskTextSelector)?r:e.includes(n)||"value"===n&&"INPUT"===t.tagName&&["submit","button"].includes(t.getAttribute("type")||"")?r.replace(/[\S]/g,"*"):r}({maskAttributes:W,maskAllText:c,privacyOptions:$e,key:Xe,value:Ce,el:Fe}),...$e,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:Xe=>{try{Xe.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:n,flushMaxDelay:e,minReplayDuration:Math.min(i,15e3),maxReplayDuration:Math.min(s,36e5),stickySession:r,useCompression:o,workerUrl:a,blockAllMedia:d,maskAllInputs:u,maskAllText:c,mutationBreadcrumbLimit:h,mutationLimit:f,slowClickTimeout:p,slowClickIgnoreSelectors:g,networkDetailAllowUrls:v,networkDetailDenyUrls:y,networkCaptureBodies:w,networkRequestHeaders:H0e(E),networkResponseHeaders:H0e(T),beforeAddRecordingEvent:Ee,beforeErrorSampling:Te,_experiments:l},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${G0e}`:G0e),this._isInitialized&&O1e())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return j0e}set _isInitialized(n){j0e=n}afterAllSetup(n){!O1e()||this._replay||(this._setup(n),this._initialize(n))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(n){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(n):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(n){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(n),this._replay.initializeSampling())}_setup(n){const e=function lBt(t,n){const e=n.getOptions(),i={sessionSampleRate:0,errorSampleRate:0,...ha(t)},s=CA(e.replaysSessionSampleRate),r=CA(e.replaysOnErrorSampleRate);return null==s&&null==r&&Gy(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),null!=s&&(i.sessionSampleRate=s),null!=r&&(i.errorSampleRate=r),i}(this._initialOptions,n);this._replay=new Om({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(n){try{const e=n.getIntegrationByName("ReplayCanvas");if(!e)return;this._replay._canvas=e.getOptions()}catch{}}}function H0e(t){return[...oBt,...t.map(n=>n.toLowerCase())]}sF.__initStatic();const cBt={};function uBt(t,n){1&t&&be(0,"global-chat")}function dBt(t,n){1&t&&be(0,"debug-console")}const W0e=location.search;window.global=window;let fBt=(()=>{class t extends bn{get debug(){return window.debug&&!0===this._settings.get("app.allow_debugging")}get has_chat(){return this._settings.get("app.chat.enabled")}constructor(e,i,s,r,o,a,l,c,u,d,h){super(),this._analytics=e,this._settings=i,this._org=s,this._cache=r,this._snackbar=o,this._hotkey=a,this._clipboard=l,this._route=c,this._router=u,this._maps=d,this._translate=h}ngOnInit(){var e=this;return de(function*(){Xi("APP","MOCKS:",cBt),e._hotkey.listen(["Control","Alt","Shift","KeyM"],()=>{localStorage.setItem("mock",`${"true"!==localStorage.getItem("mock")}`),location.reload()}),e._hotkey.listen(["Control","Alt","Shift","KeyD"],()=>{e._settings.saveUserSetting("dark_mode",!e._settings.get("dark_mode")),Zd("Toggled dark mode.")}),e._hotkey.listen(["Control","Alt","Shift","KeyC"],()=>{e._clipboard.copy(`${Eo()}|${qD()}`),Zd("Successfully copied token.")}),e._hotkey.listen(["Control","Alt","Shift","KeyV"],()=>{navigator.clipboard?.readText().then(s=>e._pasteToken(s))}),window.pasteToken=s=>e._pasteToken(s),e._route.queryParamMap.subscribe(s=>{if(s.has("hide_nav")&&localStorage.setItem("PlaceOS.hide_nav","true"),s.has("lang")){const r=s.get("lang");e._translate?.use(r),localStorage.setItem("PLACEOS.locale",r)}s.has("x-api-key")&&function _Ge(t,n=!0){cr.setItem(`${ur}_x-api-key`,`${t}`),cr.setItem("trusted",`${n}`),function gGe(t,n=HD(new Date,2).valueOf()){Yi.ignore_api_key&&"x-api-key"===t||(cr.setItem(`${ur}_expires_at`,`${n}`),cr.setItem(`${ur}_access_token`,t))}("x-api-key",uy(new Date,5).valueOf())}(s.get("x-api-key"))}),function KHe(t,n=!1){$5=t,Sy=n}(e._snackbar),yield e._settings.initialised.pipe(ds(s=>s)).toPromise(),tae(e._settings.get("app.short_name"));const i=e._settings.get("composer")||{};if(i.mock=!!e._settings.get("mock")||location.origin.includes("demo.place.tech"),W0e){const s=ay(W0e.substring(1));e._router.navigate([],{relativeTo:e._route,queryParams:s})}yield function yKe(t){return tB.apply(this,arguments)}(i).catch(s=>console.error(s)),yield e._org.initialised.pipe(ds(s=>s)).toPromise(),function bKe(t,n=3e5){t.isEnabled&&(SC&&clearInterval(SC),SC=setInterval(()=>{Xi("CACHE","Checking for updates..."),function vKe(t){eB.apply(this,arguments)}(t)},n))}(e._cache),i.local_login||e.timeout("wait_for_user",()=>e.onInitError(),3e4),yield TM.pipe(ds(s=>!!s)).toPromise(),e.clearTimeout("wait_for_user"),e._initLocale(),function HHe(t){pC=t}(e._settings.get("app.general.internal_user_domain")||`@${fn()?.email?.split("@")[1]}`),e._initAnalytics(),function hBt(t,n=.1){t&&function Prt(t){const n={defaultIntegrations:[bde(),wde(),Ude(),Wde(),Qde(),Sde(),Xde()],...t};return Rde(n,"angular"),function $rt(){const n=vP&&vP.major?parseInt(vP.major,10):void 0;n&&(n<14&&$he&&Tt.warn(`This Sentry SDK does not officially support Angular ${n}.`,"This SDK only supports Angular 14 and above.","If you're using lower Angular versions, check the Angular Version Compatibility table in our docs: https://docs.sentry.io/platforms/javascript/guides/angular/#angular-version-compatibility.","Otherwise, please consider upgrading your Angular version."),cde("angular",{version:n}))}(),ost(n)}({dsn:t,integrations:[qrt(),aBt({maskAllText:!1,blockAllMedia:!1})],tracesSampleRate:1,tracePropagationTargets:["localhost",/^https:\/\/[a-zA-Z0-9_\-]*\.[a-zA-Z0-9]*\/api/,/^https:\/\/[a-zA-Z0-9_\-]*\.placeos\.run*\/api/],replaysSessionSampleRate:n,replaysOnErrorSampleRate:1})}(e._settings.get("app.sentry_dsn"));try{const s=Eo();(function Pje(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document})()&&function aQe(t){for(var n in t)BB[n.toLowerCase()]=t[n]}("x-api-key"===s?{"x-api-key":kp()}:{Authorization:`Bearer ${s}`}),e._settings.get("app.has_uploads")&&e.timeout("init_uploads",()=>{!function xKe(t){void 0===t&&(t={}),(Wr=ld({},Ole,t)).endpoint&&(Dle=Wr.endpoint),function(n,e){var i;void 0===n&&(n="/node_modules/ts-md5/dist/md5_worker.js"),(null==(i=TC)?void 0:i.length)>0&&TC.forEach(function(r){return r.terminate()}),TC=[];for(var s=0;s<3;s+=1)TC.push(new tGe(n,e))}(Wr.worker_url,Wr.worker_options),Wr.token&&sB.setToken(Wr.token),Wr.api_key&&sB.setApiKey(Wr.api_key),function EKe(t){t.forEach(function(n){return function wKe(t,n){kle[t]=n}(n.lookup,n)})}(Wr.providers)}({auto_start:!0,token:Eo(),endpoint:"/api/engine/v2/uploads",worker_url:"assets/md5_worker.js",providers:[Fle,Lle,Ple,$le]})}),_5()&&e.interval("auto-update-version",()=>e._checkReload(),15e3)}catch{}})()}onInitError(){US()||fn()?.is_logged_in||(XD(),location.reload())}_initAnalytics(){const e=this._settings.get("app.analytics.tracking_id");e&&(this._analytics.init(e),this._analytics.load(e),this._analytics.setUser(fn().id))}_initLocale(){try{let e=localStorage.getItem("PLACEOS.locale");const i=this._settings.get("app.locales")||[];if(this._translate?.addLangs(i.map(s=>s.id)),e)this._translate?.use(e);else{const s=navigator.languages;for(const r of s)if(e=i.find(o=>o.id===r),e||(e=i.find(o=>r.includes(o.id))),e){this._translate?.use(r),localStorage.setItem("PLACEOS.locale",r);break}}}catch{}}_pasteToken(e){const i=e.split("|"),s=Soe();localStorage.setItem(`${s}_access_token`,`${i[0]}`),localStorage.setItem(`${s}_refresh_token`,`${i[1]}`),localStorage.setItem(`${s}_expires_at`,`${HD(new Date,6).valueOf()}`),Zd("Successfully pasted token."),setTimeout(()=>location.reload(),2e3)}_checkReload(){Ele()&&(location.reload(),this.timeout("reload",()=>location.href=`${location.origin}${location.pathname}`))}static#e=this.\u0275fac=function(i){return new(i||t)(D(sae),D(ln),D(In),D(V$),D(Rse),D(rae),D(Rre),D(Ul),D(Hr),D(Rp),D(pS,8))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["app-root"]],features:[bt],decls:6,vars:2,consts:[[1,"flex-1","w-full","relative","h-1/2"],[4,"ngIf"]],template:function(i,s){1&i&&(be(0,"global-banner"),m(1,"div",0),be(2,"router-outlet"),_(),K(3,uBt,1,0,"global-chat",1),be(4,"global-loading"),K(5,dBt,1,0,"debug-console",1)),2&i&&(b(3),S("ngIf",s.has_chat),b(2),S("ngIf",s.debug))},dependencies:[Ot,T$,Sce,Cce,xB,gue],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}"]})}return t})();function pBt(t,n){if(1&t){const e=Le();m(0,"button",8),te("click",function(){return re(e),oe(M().close.emit())}),m(1,"app-icon"),C(2,"arrow_back"),_()()}}function mBt(t,n){1&t&&be(0,"div",9)}function _Bt(t,n){1&t&&(m(0,"div",18),C(1," Host "),_())}function gBt(t,n){if(1&t&&(m(0,"div",11),be(1,"a-user-avatar",12),m(2,"div",13)(3,"div",14),C(4),_(),K(5,_Bt,2,0,"div",15),_(),m(6,"div",16),be(7,"div",17),_()()),2&t){const e=M().$implicit,i=M();b(),S("user",e),b(3),vt(e.name),b(),S("ngIf",i.host===e.email),b(2),rt("bg-success",e.checked_in)("bg-pending",!e.checked_in),S("matTooltip",e.checked_in?"Checked in":"Not checked in")}}function bBt(t,n){if(1&t&&(sn(0),K(1,gBt,8,8,"div",10),rn()),2&t){const e=n.$implicit,i=M();b(),S("ngIf",!e.resource&&(i.host!==e.email||i.show_host))}}let rF=(()=>{class t{constructor(){this.host="",this.show_host=!0,this.list=[],this.hide_close=!1,this.custom_title="",this.close=new it}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Qe({type:t,selectors:[["attendee-list"]],inputs:{host:"host",show_host:"show_host",list:"list",hide_close:"hide_close",custom_title:"custom_title"},outputs:{close:"close"},decls:8,vars:5,consts:()=>{let e;return e=$localize`:␟c68a77fe1aa97a8e5588bafc6b5cb8ced3e3d288␟5922903057904788374: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,[e,[1,"w-full","h-full","overflow-hidden","flex","flex-col","bg-base-100"],[1,"flex","items-center","border-b","border-base-200","p-2","min-h-12"],["close","","icon","","matRipple","",3,"click",4,"ngIf"],[1,"flex-1","text-center","font-medium"],["class","w-12",4,"ngIf"],[1,"flex-1","w-full","overflow-auto"],[4,"ngFor","ngForOf"],["close","","icon","","matRipple","",3,"click"],[1,"w-12"],["attendee","","class","flex items-center p-2 space-x-2 hover:bg-base-200",4,"ngIf"],["attendee","",1,"flex","items-center","p-2","space-x-2","hover:bg-base-200"],[3,"user"],[1,"flex-1","w-1/2"],[1,"truncate"],["class","opacity-60 text-sm",4,"ngIf"],[1,"p-2"],[1,"h-3","w-3","rounded-full",3,"matTooltip"],[1,"opacity-60","text-sm"]]},template:function(i,s){1&i&&(m(0,"div",1)(1,"div",2),K(2,pBt,3,0,"button",3),m(3,"div",4),Ne(4,0),_(),K(5,mBt,1,0,"div",5),_(),m(6,"div",6),K(7,bBt,2,1,"ng-container",7),_()()),2&i&&(b(2),S("ngIf",!s.hide_close),b(2),$n(s.list.length)(s.custom_title?s.custom_title:1===s.list.length?"Attendee":"Attendees"),zn(4),b(),S("ngIf",!s.hide_close),b(2),S("ngForOf",s.list))}})}return t})();const vBt=()=>({disable_pan:!0,disable_zoom:!0});function yBt(t,n){1&t&&be(0,"div",55)}function wBt(t,n){if(1&t&&(m(0,"div",56),be(1,"image-carousel",57),_()),2&t){const e=M();b(),S("images",null==e.event||null==e.event.system?null:e.event.system.images)}}function SBt(t,n){if(1&t){const e=Le();m(0,"button",61),te("click",function(){return re(e),oe(M(2).checkin())}),m(1,"div",62)(2,"app-icon"),C(3),_(),m(4,"div",63),Ne(5,9),_()()()}if(2&t){const e=M(2);rt("bg-success","pending"!==e.room_status)("border-none","pending"!==e.room_status)("pointer-events-none","pending"!==e.room_status),b(3),vt("pending"===e.room_status?"arrow_back":"done"),b(2),$n("pending"===e.room_status?"Check in":"Checked in"),zn(5)}}function CBt(t,n){1&t&&(m(0,"button",64)(1,"app-icon"),C(2,"more_horiz"),_()()),2&t&&(M(2),S("matMenuTriggerFor",Gt(75)))}function xBt(t,n){if(1&t&&(m(0,"div",58),K(1,SBt,6,8,"button",59)(2,CBt,3,1,"button",60),_()),2&t){const e=M();b(),S("ngIf",e.room_status&&(null==e.event?null:e.event.can_check_in)&&"free"!==e.room_status),b(),S("ngIf",e.allow_edit)}}function EBt(t,n){if(1&t&&(sn(0),C(1),rn()),2&t){const e=M();b(),xe(" ",(null==e.level?null:e.level.display_name)||(null==e.level?null:e.level.name),", ")}}function TBt(t,n){if(1&t&&(m(0,"div",29)(1,"app-icon"),C(2,"place"),_(),m(3,"div"),C(4),_()()),2&t){const e=M();b(4),Ts(" ",(null==e.building?null:e.building.display_name)||(null==e.building?null:e.building.name),", ",null==e.building?null:e.building.address," ")}}function IBt(t,n){if(1&t&&(m(0,"span",81),C(1),_()),2&t){const e=M().$implicit;S("matTooltip",M(3).optionList(e)),b(),xe(" ",(null==e.option_list?null:e.option_list.length)||"0"," option(s) ")}}function kBt(t,n){if(1&t&&(m(0,"div",76)(1,"div",77)(2,"span",71),C(3),_(),K(4,IBt,2,2,"span",78),_(),m(5,"div",79),C(6),_(),m(7,"div",80),C(8),ge(9,"currency"),_()()),2&t){const e=n.$implicit,i=M(3);b(3),vt(e.name||"Item"),b(),S("ngIf",null==e.option_list?null:e.option_list.length),b(2),xe(" x",e.quantity," "),b(2),xe(" ",Kt(9,4,e.unit_price_with_options/100,i.currency_code)," ea ")}}function DBt(t,n){if(1&t){const e=Le();m(0,"div",68)(1,"div",69)(2,"div",70)(3,"div",71),C(4),ge(5,"date"),_(),m(6,"div",72),C(7),ge(8,"currency"),_()(),m(9,"button",73),te("click",function(){const s=re(e).$implicit,r=M(2);return oe(r.show_order[s.id]=!r.show_order[s.id])}),m(10,"app-icon"),C(11),_()()(),m(12,"div",74),K(13,kBt,10,7,"div",75),_()()}if(2&t){const e=n.$implicit,i=M(2);b(4),xe(" Order at ",Kt(5,7,e.deliver_at,"MMM d, "+i.time_format)," "),b(3),Ts(" ",e.item_count," item(s) for ",Kt(8,10,e.total_cost/100,i.currency_code)," "),b(2),S("matTooltip",i.show_order[e.id]?"Hide order items":"Show order items"),b(2),xe(" ",i.show_order[e.id]?"expand_less":"expand_more"," "),b(),S("@show",i.show_order[e.id]?"show":"hide"),b(),S("ngForOf",e.items)}}function MBt(t,n){if(1&t&&(sn(0),m(1,"div",32)(2,"h3",65),Ne(3,10),_(),m(4,"div",66),K(5,DBt,14,13,"div",67),_()(),rn()),2&t){const e=M();b(5),S("ngForOf",e.event.valid_catering)}}function ABt(t,n){if(1&t&&(sn(0),be(1,"interactive-map",82),rn()),2&t){const e=M();b(),S("src",null==e.level?null:e.level.map_id)("features",e.features)("options",pn(3,vBt))}}function OBt(t,n){1&t&&(be(0,"div",85),ge(1,"sanitize")),2&t&&S("innerHTML",Me(1,1,M(2).body)||"Unable to sanitize notes contents",Zc)}function NBt(t,n){if(1&t&&(m(0,"div",32)(1,"h3",83),Ne(2,11),_(),K(3,OBt,2,3,"div",84),_()),2&t){const e=M();b(3),S("ngIf",e.body)}}function RBt(t,n){if(1&t&&(m(0,"div",76)(1,"div",77)(2,"span",71),C(3),_()(),m(4,"div",79),C(5),_()()),2&t){const e=n.$implicit;b(3),vt(e.name||"Item"),b(2),xe(" x",e.quantity," ")}}function FBt(t,n){if(1&t){const e=Le();m(0,"div",88)(1,"button",89),te("click",function(){const s=re(e).$implicit,r=M(2);return oe(r.show_request[s.id]=!r.show_request[s.id])}),m(2,"div",90)(3,"div",71),C(4),ge(5,"date"),_()(),m(6,"div",91)(7,"app-icon"),C(8),_()(),m(9,"div",92)(10,"app-icon",93),C(11),_()()(),m(12,"div",74),K(13,RBt,6,2,"div",75),_()()}if(2&t){const e=n.$implicit,i=M(2);b(4),xe(" Requested for ",Kt(5,18,e.deliver_at,"MMM d, "+i.time_format)," "),b(2),rt("bg-success","approved"===e.state)("text-success-content","approved"===e.state)("bg-warning","approved"!==e.state&&"rejected"!==e.state)("text-warning-content","approved"!==e.state&&"rejected"!==e.state)("bg-error","rejected"===e.state)("text-error-content","rejected"===e.state),S("matTooltip",e.state||"Tentative"),b(2),xe(" ","approved"===e.state?"done":"rejected"===e.state?"close":"schedule"," "),b(3),xe(" ",i.show_request[e.id]?"expand_less":"expand_more"," "),b(),S("@show",i.show_request[e.id]?"show":"hide"),b(),S("ngForOf",e.items)}}function LBt(t,n){if(1&t&&(sn(0),m(1,"div",32)(2,"h3",86),Ne(3,12),_(),m(4,"div",66),K(5,FBt,14,21,"div",87),_()(),rn()),2&t){const e=M();b(3),$n((null==e.event.valid_assets?null:e.event.valid_assets.length)||0),zn(3),b(2),S("ngForOf",e.event.valid_assets)}}function PBt(t,n){if(1&t){const e=Le();m(0,"div",94)(1,"attendee-list",95),te("click",function(){return re(e),oe(M().show_attendees=!1)}),_()()}if(2&t){const e=M();b(),S("list",e.event.attendees)("host",e.event.host)}}function $Bt(t,n){if(1&t){const e=Le();m(0,"button",96),te("click",function(){re(e);const s=M();return oe(s.edit.emit(s.space))}),m(1,"div",52)(2,"app-icon"),C(3,"edit"),_(),m(4,"div"),Ne(5,13),_()()()}if(2&t){const e=M();S("matTooltip",e.can_edit?"":e.no_edit_message)("disabled",!e.can_edit)}}function BBt(t,n){if(1&t){const e=Le();m(0,"button",51),te("click",function(){return re(e),oe(M().remove.emit(!0))}),m(1,"div",52)(2,"app-icon"),C(3,"delete"),_(),m(4,"div"),Ne(5,14),_()()()}}function VBt(t,n){if(1&t){const e=Le();m(0,"button",51),te("click",function(){const s=re(e).$implicit;return oe(M().action.emit(s.id))}),m(1,"div",52)(2,"app-icon"),C(3),_(),m(4,"div"),Ne(5,15),_()()()}if(2&t){const e=n.$implicit;b(3),vt(e.icon),b(2),$n(e.name),zn(5)}}const zBt=[];let vj=(()=>{class t{get can_edit(){return!0}get body(){return this.event.body.replace(/\\n\\n\[ID\|.*\]/gm,"")}get allow_edit(){return!this._settings.get("app.events.booking_unavailable")}get custom_actions(){return this._settings.get("app.events.custom_actions")||zBt}get time_format(){return this._settings.time_format}get event_status(){return"done"===this.event?.state?"neutral":"approved"===this.event?.status?"success":"tentative"===this.event?.status?"warning":"declined"===this.event?.status?"error":"warning"}constructor(e,i,s,r,o){this._event=e,this._org=i,this._space_pipe=s,this._settings=r,this._dialog=o,this.action=new it,this.edit=new it,this.remove=new it,this.show_order={},this.show_request={},this.room_status="",this.hide_map=!1,this.hide_edit=!1,this.show_attendees=!1,this.event=this._event,this.no_edit_message="Editing bookings long than \n a day is not available",this.features=[{location:this.event?.system?.map_id,content:lu}],this.has_catering=this.event?.ext("catering")?.length>0,this.has_assets=!!this.event?.linked_bookings?.find(a=>"asset-request"===a.booking_type),this.level=new _C,this.building=new B5,this.space=new Cl,this.accept_count=this._event.attendees.reduce((a,l)=>a+("accepted"===l.response_status?1:0),0),this.declined_count=this._event.attendees.reduce((a,l)=>a+("declined"===l.response_status?1:0),0),this.pending_count=this._event.attendees.reduce((a,l)=>a+("tentative"===l.response_status||"needsAction"===l.response_status?1:0),0),this._load().then()}get period(){if(this.event?.all_day)return"All Day";const e=this.event?.date||Date.now(),i=this.event?.duration||60,s=li(e,i),r=this.event?.duration>1440,o=th({hours:Math.floor(i/60),minutes:i%60}).replace(" hour","hr").replace(" minute","min");return`${ys(e,(r?"MMM d, ":"")+this.time_format)} - ${ys(s,(r?"MMM d, ":"")+this.time_format)} ${i<1440?"("+o+")":""}`}optionList(e){return e.option_list?.map(i=>i.name).join("\n")}checkin(){var e=this;return de(function*(){const i=Vr(e.space?.id,"Bookings");i&&(yield i.execute("checkin",[Ei(e.event.date)]).catch(s=>Mi(`Error checking in booking. ${s}`)),e.room_status="busy")})()}_load(){var e=this;return de(function*(){if(e.space=yield e._space_pipe.transform(e._event.system?.id||e._event.system?.email),e.level=e._org.levelWithID(e.space.zones),e.building=e._org.buildings.find(s=>e.space.zones.includes(s.id)),e.features=[{location:e.space.map_id,content:lu}],e.event.extension_data.catering?.length||e.event.extension_data.assets?.length)return;const i=yield function CLt(t,n,e={}){const i=zr({...e});return la(`${Dl}/${encodeURIComponent(t)}/metadata/${encodeURIComponent(n)}${i?"?"+i:""}`).pipe(ze(s=>s))}(e._event.id,e.space.id).toPromise();i&&(e._event=new ia({...e._event,extension_data:{...e._event.extension_data,...i}}))})()}status(e){const i=this.event.linked_bookings.find(s=>s.asset_id===e);return i.status?i.status:i?i.approved?"approved":i.rejected?"rejected":"pending":"pending"}viewLocation(){this.hide_map=!0,this._dialog.open(DC,{maxWidth:"95vw",maxHeight:"95vh",data:{item:this.space}}).afterClosed().subscribe(()=>{this.hide_map=!1})}static#e=this.\u0275fac=function(i){return new(i||t)(D(Js),D(In),D(au),D(ln),D(wr))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["event-details-modal"]],outputs:{action:"action",edit:"edit",remove:"remove"},features:[Lt([au])],decls:85,vars:33,consts:()=>{let e,i,s,r,o,a,l,c,u,d,h,f,p,g,v;return e=$localize`:␟2c8ce65c566300dc9063f69c615fda2e3a6b896a␟2102851380219026584: Details `,i=$localize`:␟dc34e61df786db36347c8dc09510fa3d5d4c6253␟8291262399353359697:Attendees`,s=$localize`:␟8ee85ef5a3693fb53511af55f66b8543941a5968␟5528514721268144968: See All `,r=$localize`:␟4f20f2d5a6882190892e58b85f6ccbedfa737952␟2807800733729323332:Yes`,o=$localize`:␟3d3ae7deebc5949b0c1c78b9847886a94321d9fd␟3542042671420335679:No`,a=$localize`:␟e6a27066251ca1e04c5be86ad758380856df2506␟4416413576346763682:Pending`,l=$localize`:␟01072150a2c93fe7032783804ebfa5a1e41f3685␟6139423482037031714: Host `,c=$localize`:␟e634daa29c58868c9c9c4d9fcc7ba1c016fac86b␟4014175048517775632:Delete event`,u=$localize`:␟e00cf812605b14c9c2390da404d3cd3ea67f19a6␟3151361020738293834: ${"\ufffd0\ufffd"}:INTERPOLATION: `,d=$localize`:␟ef2612559c447d8f4c218c06bb66af9de8edf365␟6975755512274629403: Catering `,h=$localize`:␟195b2f1c65301b0700459c9d0ae2ce407ed9c7bf␟4484880822148672471: Notes `,f=$localize`:␟e30ee857e7399db3f72ec7aa8aa9b56ce76fca96␟3391582008093299175: Assets (${"\ufffd0\ufffd"}:INTERPOLATION:) `,p=$localize`:␟56c74224d22c7379fdbf9d0a00c8bf519a9ee661␟2772374745622574688:Edit event`,g=$localize`:␟ecb2e91e2775870da0ea8e51b4951994493672fb␟3974228098480354844:Delete Series`,v=$localize`:␟8fcf89a6df3c02c129a41d4b202221a4013f107c␟941732683947462971:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["menu","matMenu"],e,i,s,r,o,a,l,c,u,d,h,f,p,g,v,[1,"w-[100vw]","h-[100vh]","sm:relative","sm:inset-auto","sm:w-[51rem]","sm:h-auto","sm:max-h-[80vh]","bg-base-100","sm:bg-base-200","sm:dark:bg-neutral-600","sm:rounded","overflow-auto","space-y-2","pb-2"],[1,"sm:flex","flex-col","items-center","pb-4","max-h-screen","sm:max-h-[80vh]","sm:px-16","sm:border-b","bg-base-100","border-base-200"],["binding","","mod","Bookings","bind","status",3,"modelChange","model","sys"],["class","h-8 w-full sm:hidden block",4,"ngIf"],["class","bg-neutral w-full h-64 sm:rounded-b overflow-hidden",4,"ngIf"],["title","",1,"px-3","mt-2","text-xl","font-medium","w-full"],[1,"sm:flex","items-center","justify-between","w-full"],[1,"flex","m-2"],[3,"status"],["actions","","class","flex items-center space-x-2 px-2",4,"ngIf"],[1,"sm:flex","flex-wrap","sm:px-12"],[1,"sm:p-4","sm:bg-base-100","sm:dark:bg-neutral-700","rounded","sm:m-2","sm:border","border-base-200","flex-grow-[3]","min-w-1/3","sm:w-[16rem]","space-y-2"],[1,"px-3","mt-2","text-lg","font-medium","mb-2"],[1,"flex","items-center","px-2","space-x-2"],[4,"ngIf"],["class","flex items-center px-2 space-x-2",4,"ngIf"],[1,"mt-4","sm:p-4","sm:bg-base-100","sm:dark:bg-neutral-700","rounded","sm:m-2","sm:border","border-base-200","flex-grow-[3]","min-w-1/3","sm:w-[16rem]"],[1,"mx-3","border-t","border-base-200","sm:border-none","flex","items-center","justify-between"],[1,"text-lg","font-medium"],["matRipple","","show-attendees","",1,"clear","text-xs","underline",3,"click"],[1,"flex","items-center","p-1"],[1,"flex","flex-col","flex-1","items-center","justify-center","space-y-1"],[1,"text-lg"],[1,"text-sm","uppercase"],[1,"mx-3","mt-2","pt-2","text-lg","font-medium","border-t","border-base-200"],["host","",1,"px-2","flex","items-center","space-x-2"],[3,"user"],[1,"text-sm","flex-1","w-px"],[1,"opacity-60","truncate","w-full",3,"title"],["map","",1,"mt-4","sm:mt-2","h-64","sm:h-48","relative","border","border-base-200","overflow-hidden","rounded","sm:bg-base-100","sm:dark:bg-neutral-700","m-2","flex-grow-[3]","min-w-1/3","p-2","w-[calc(100%-1rem)]","sm:w-[16rem]",3,"click"],["class","mt-4 sm:p-4 sm:bg-base-100 sm:dark:bg-neutral-700 rounded sm:m-2 sm:border border-base-200 flex-grow-[3] min-w-1/3 sm:w-[16rem]",4,"ngIf"],["icon","","matRipple","","mat-dialog-close","",1,"absolute","top-2","left-2","bg-neutral","text-white"],["class","absolute inset-0 z-50",4,"ngIf"],["xPosition","before"],["mat-menu-item","","mat-dialog-close","",3,"matTooltip","disabled","click",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"flex","items-center","space-x-2","text-base"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"h-8","w-full","sm:hidden","block"],[1,"bg-neutral","w-full","h-64","sm:rounded-b","overflow-hidden"],[1,"w-full","h-64",3,"images"],["actions","",1,"flex","items-center","space-x-2","px-2"],["btn","","matRipple","","class","flex-1 h-10",3,"bg-success","border-none","pointer-events-none","click",4,"ngIf"],["icon","","matRipple","","class","bg-secondary rounded text-white h-10 w-10",3,"matMenuTriggerFor",4,"ngIf"],["btn","","matRipple","",1,"flex-1","h-10",3,"click"],[1,"flex","items-center","space-x-2","justify-center"],[1,"mr-4"],["icon","","matRipple","",1,"bg-secondary","rounded","text-white","h-10","w-10",3,"matMenuTriggerFor"],[1,"mx-3","my-2","text-lg","font-medium"],[1,"flex","flex-col","space-y-2"],["order","","class","border border-base-300 bg-base-100 rounded-xl overflow-hidden",4,"ngFor","ngForOf"],["order","",1,"border","border-base-300","bg-base-100","rounded-xl","overflow-hidden"],[1,"flex","items-center","space-x-2","p-3"],[1,"flex-1"],[1,"text-sm"],[1,"text-xs","opacity-60"],["icon","","matRipple","",3,"click","matTooltip"],[1,"flex","flex-col","bg-base-200","divide-y","divide-base-100"],["class","flex items-center px-3 py-1 space-x-2 hover:opacity-90",4,"ngFor","ngForOf"],[1,"flex","items-center","px-3","py-1","space-x-2","hover:opacity-90"],[1,"flex","items-center","flex-1"],["class","text-xs opacity-60 ml-4 font-normal",3,"matTooltip",4,"ngIf"],[1,"rounded","bg-success","text-success-content","text-xs","px-2","py-1"],[1,"rounded","bg-info","text-info-content","text-xs","px-2","py-1"],[1,"text-xs","opacity-60","ml-4","font-normal",3,"matTooltip"],[1,"pointer-events-none",3,"src","features","options"],[1,"mx-3","text-lg","font-medium","border-t","sm:border-none","border-base-200"],["notes","","class","mx-4 overflow-hidden max-w-full",3,"innerHTML",4,"ngIf"],["notes","",1,"mx-4","overflow-hidden","max-w-full",3,"innerHTML"],[1,"mx-3","pt-2","text-lg","font-medium"],["request","","class","border border-base-300 bg-base-100 rounded-xl overflow-hidden",4,"ngFor","ngForOf"],["request","",1,"border","border-base-300","bg-base-100","rounded-xl","overflow-hidden"],["matRipple","",1,"flex","items-center","space-x-2","p-3","w-full",3,"click"],[1,"flex-1","text-left"],[1,"flex","items-center","justify-center","rounded-full","w-8","h-8",3,"matTooltip"],[1,"flex","items-center","justify-center","rounded-full","w-8","h-8"],[1,"text-2xl"],[1,"absolute","inset-0","z-50"],[3,"click","list","host"],["mat-menu-item","","mat-dialog-close","",3,"click","matTooltip","disabled"]]},template:function(i,s){if(1&i){const r=Le();m(0,"div",16)(1,"div",17)(2,"i",18),Gn("modelChange",function(a){return re(r),Fn(s.room_status,a)||(s.room_status=a),oe(a)}),_(),K(3,yBt,1,0,"div",19)(4,wBt,2,1,"div",20),m(5,"h3",21),C(6),_(),m(7,"div",22)(8,"div",23)(9,"status-pill",24),C(10),_()(),K(11,xBt,3,2,"div",25),_()(),m(12,"div",26)(13,"div",27)(14,"h3",28),Ne(15,1),_(),m(16,"div",29)(17,"app-icon"),C(18,"event"),_(),m(19,"div"),C(20),ge(21,"date"),_()(),m(22,"div",29)(23,"app-icon"),C(24,"schedule"),_(),m(25,"div"),C(26),_()(),m(27,"div",29)(28,"app-icon"),C(29,"map"),_(),m(30,"div"),K(31,EBt,2,1,"ng-container",30),C(32),_()(),K(33,TBt,5,2,"div",31),_(),m(34,"div",32)(35,"div",33)(36,"h3",34),Ne(37,2),_(),m(38,"button",35),te("click",function(){return re(r),oe(s.show_attendees=!0)}),Ne(39,3),_()(),m(40,"div",36)(41,"div",37)(42,"div",38),C(43),_(),m(44,"div",39),Ne(45,4),_()(),m(46,"div",37)(47,"div",38),C(48),_(),m(49,"div",39),Ne(50,5),_()(),m(51,"div",37)(52,"div",38),C(53),_(),m(54,"div",39),Ne(55,6),_()()(),m(56,"h3",40),Ne(57,7),_(),m(58,"div",41),be(59,"a-user-avatar",42),m(60,"div",43)(61,"div"),C(62),_(),m(63,"div",44),C(64),_()()()(),K(65,MBt,6,1,"ng-container",30),m(66,"button",45),te("click",function(){return re(r),oe(s.viewLocation())}),K(67,ABt,2,4,"ng-container",30),_(),K(68,NBt,4,1,"div",46)(69,LBt,6,2,"ng-container",30),m(70,"button",47)(71,"app-icon"),C(72,"close"),_()(),K(73,PBt,2,2,"div",48),_(),m(74,"mat-menu",49,0),K(76,$Bt,6,2,"button",50),m(77,"button",51),te("click",function(){return re(r),oe(s.remove.emit())}),m(78,"div",52)(79,"app-icon"),C(80,"delete"),_(),m(81,"div"),Ne(82,8),_()()(),K(83,BBt,6,0,"button",53)(84,VBt,6,2,"button",54),_()()}2&i&&(b(2),Un("model",s.room_status),S("sys",null==s.space?null:s.space.id),b(),S("ngIf",!(null!=s.event&&null!=s.event.system&&null!=s.event.system.images&&s.event.system.images.length)),b(),S("ngIf",null==s.event||null==s.event.system||null==s.event.system.images?null:s.event.system.images.length),b(),rt("pt-4",!(null!=s.event&&null!=s.event.system&&null!=s.event.system.images&&s.event.system.images.length)),b(),xe(" ",s.event.title," "),b(3),S("status",s.event_status),b(),xe(" ",s.period," "),b(),S("ngIf","done"!==s.event.state),b(9),vt(Kt(21,30,s.event.date,"EEEE, dd LLLL y")),b(6),vt(s.period),b(5),S("ngIf",s.level),b(),xe(" ",(null==s.event||null==s.event.system?null:s.event.system.display_name)||(null==s.event||null==s.event.system?null:s.event.system.name)||(null==s.event?null:s.event.location)," "),b(),S("ngIf",s.building),b(10),vt(s.accept_count||0),b(5),vt(s.declined_count||0),b(5),vt(s.pending_count||0),b(6),S("user",s.event.organiser),b(3),vt(null==s.event.organiser?null:s.event.organiser.name),b(),S("title",s.event.host),b(),xe(" ",s.event.host," "),b(),S("ngIf",s.has_catering),b(2),S("ngIf",!s.hide_map),b(),S("ngIf",s.body),b(),S("ngIf",s.has_assets),b(4),S("ngIf",s.show_attendees),b(3),S("ngIf",!s.hide_edit),b(7),S("ngIf",s.event.recurring_event_id),b(),S("ngForOf",s.custom_actions))},data:{animation:[_Ke]}})}return t})();function UBt(t,n){if(1&t&&be(0,"img",36),2&t){const e=M();S("source",null==e.event.extension_data?null:e.event.extension_data.images[0])}}function GBt(t,n){1&t&&(m(0,"div",37)(1,"app-icon",38),C(2,"star"),_(),m(3,"div",39),C(4,"Featured"),_()())}function jBt(t,n){if(1&t&&(sn(0),m(1,"div",40)(2,"app-icon"),C(3,"star"),_(),m(4,"div",41),C(5),_()(),m(6,"div",40)(7,"app-icon"),C(8,"help"),_(),m(9,"div",41),C(10),_()(),rn()),2&t){const e=M();b(),rt("bg-base-200",!e.is_interested)("text-base-content",!e.is_interested)("opacity-30",!e.is_interested)("bg-success",e.is_interested)("text-success-content",e.is_interested)("opacity-100",e.is_interested),b(4),xe(" ",e.is_interested?"":"Not ","Interested "),b(),rt("bg-base-200",!e.is_going)("text-base-content",!e.is_going)("opacity-30",!e.is_going)("bg-success",e.is_going)("text-success-content",e.is_going)("opacity-100",e.is_going),b(4),xe(" ",e.is_going?"":"Not ","Going ")}}function HBt(t,n){if(1&t&&(m(0,"div"),C(1),ge(2,"space"),ge(3,"async"),_()),2&t){let e;const i=M();b(),xe(" ",null==(e=Me(3,3,Me(2,1,i.system_id)))?null:e.display_name," ")}}function WBt(t,n){1&t&&(m(0,"div",42),C(1," Room to be confirmed "),_())}function qBt(t,n){if(1&t&&(m(0,"div",42),C(1),_()),2&t){const e=M();b(),xe(" ",e.is_onsite?"Can be attended online":"Remote Event"," ")}}function KBt(t,n){1&t&&(m(0,"span",42),C(1," No description "),_())}function XBt(t,n){if(1&t&&be(0,"interactive-map",50),2&t){const e=M(2);S("src",null==e.level?null:e.level.map_id)("features",e.features)("styles",e.styles)}}function YBt(t,n){if(1&t&&(m(0,"div"),C(1),ge(2,"space"),ge(3,"async"),_()),2&t){let e;const i=M(2);b(),xe(" ",null==(e=Me(3,3,Me(2,1,i.system_id)))?null:e.display_name," ")}}function ZBt(t,n){1&t&&(m(0,"div",42),C(1," Room to be confirmed "),_())}function QBt(t,n){if(1&t&&(m(0,"span"),C(1),_()),2&t){const e=M(2);b(),Ts(" ",e.building.display_name||e.building.name,", ",(null==e.level?null:e.level.display_name)||(null==e.level?null:e.level.name)," ")}}function JBt(t,n){1&t&&(m(0,"span",42),C(1," No location set for this event "),_())}function e6t(t,n){if(1&t&&(m(0,"a",51),C(1),_()),2&t){const e=M(2);rt("underline",e.event.meeting_url),S("href",e.event.meeting_url,Ia),b(),xe(" ",e.is_onsite?"Can be attended online":"Remote Event"," ")}}function t6t(t,n){if(1&t){const e=Le();m(0,"div",43)(1,"div",44)(2,"button",45),te("click",function(){return re(e),oe(M().viewLocation())}),K(3,XBt,1,3,"interactive-map",46),_(),m(4,"div",47),K(5,YBt,4,5,"div",12)(6,ZBt,2,0,"div",30),m(7,"div",48),K(8,QBt,2,2,"span",12)(9,JBt,2,0,"span",30),_(),K(10,e6t,2,4,"a",49),_()()()}if(2&t){const e=M();b(3),S("ngIf",!e.showing_map),b(2),S("ngIf",e.is_onsite&&e.has_space),b(),S("ngIf",e.is_onsite&&!e.has_space),b(2),S("ngIf",e.building&&e.level),b(),S("ngIf",!e.building||!e.level),b(),S("ngIf",e.is_online)}}function n6t(t,n){if(1&t){const e=Le();m(0,"div",52)(1,"button",53),te("click",function(){return re(e),oe(M().show_attendees=!1)}),_(),m(2,"div",54)(3,"attendee-list",55),te("click",function(){return re(e),oe(M().show_attendees=!1)}),_()()()}if(2&t){const e=M();b(3),S("show_host",!1)("list",e.event.attendees)("host",e.event.user_email)}}let uT=(()=>{class t{get time_format(){return this._settings.time_format}get featured(){return this.event.featured||this.event.extension_data?.featured}get is_onsite(){return"ONLINE"!==this.event.extension_data.attendance_type}get has_space(){return!!this.space?.id}get is_online(){return!this.is_onsite||"ANY"===this.event.extension_data.attendance_type}get body(){if(this.is_online)return this.event.body;let e=this.event.body;const i=['<div style="margin-bottom:24px; overflow:hidden; white-space:nowrap">________________________________________________________________________________</div>',"<p>________________________________________________________________________________</p>"];for(const s of i){const r=e.indexOf(s),o=e.lastIndexOf(s);e=e.substring(0,r)+e.substring(o)}for(const s of i)e=e.replace(s,"");return e}get attendance(){return this.event.attendees?.filter(e=>e.checked_in)?.length||0}get is_interested(){return!!this.guest_details}get is_going(){return this.guest_details?.checked_in}get system_id(){return this.space?.id}get guest_details(){const e=fn();return this.event.attendees?.find(i=>i.email===e.email)}get group_event_calendar(){return this._settings.get("app.group_events_calendar")}constructor(e,i,s,r,o){this._data=e,this._org=i,this._settings=s,this._dialog=r,this._dialog_ref=o,this.edit=new it,this.remove=new it,this.event=this._data.event,this.concierge=this._data.concierge,this.features=[],this.locate="",this.showing_map=!1,this.show_attendees=!1,this.styles={},this.raw_description=""}ngOnInit(){var e=this;return de(function*(){const i=new au(e._org),s=e.event.resources.find(l=>l.email!==e.group_event_calendar);e.space=yield i.transform(s?.id||s?.email);const r=e.event.extension_data?.map_id,o=e.space?.map_id||r;o&&(e.styles[`#${o}`]={fill:"green"},e.features=[{location:o,content:lu,data:{}}]);const a=e.space?.zones||[];e.level=e._org.levelWithID(a),e.building=e._org.buildings.find(l=>a.includes(l.id))||e._org.building,e.locate=r||"",e.raw_description=e.removeHtmlTags(e.event.body)})()}removeHtmlTags(e){return((new DOMParser).parseFromString(e,"text/html").body.textContent||"").trim()}viewLocation(){if(!this.space?.map_id)return kM("Unable to locate space on map.");this.showing_map=!0,this._dialog.open(DC,{maxWidth:"95vw",maxHeight:"95vh",data:{item:this.space}}).afterClosed().subscribe(()=>{this.showing_map=!1})}toggleInterest(){var e=this;return de(function*(){let i=e.guest_details;console.log("User:",i,e.is_interested),e.is_interested&&i?(yield function SLt(t,n,e={}){const i=zr(e);return QD(`${Dl}/${encodeURIComponent(t)}/attendee/${encodeURIComponent(n.email)}${i?"?"+i:""}`).pipe(ze(s=>new mC(s)))}(e.event.id,fn(),{system_id:e.event.system?.id}).toPromise(),e.event.attendees=(e.event.attendees||[]).filter(s=>s.email!==i.email)):(i=yield Jye(e.event.id,fn(),{system_id:e.event.system?.id}).toPromise(),e.event.attendees=Cs([...e.event.attendees||[],i],"email"))})()}toggleAttendance(){var e=this;return de(function*(){let i=e.guest_details;if(i||(i=yield Jye(e.event.id,fn(),{system_id:e.event.system?.id}).toPromise(),e.event.attendees=Cs([...e.event.attendees||[],i],"email")),i={...fn(),...i||{}},!i.email)return;yield function wLt(t,n,e,i={}){const s=zr({...i,state:e});return dy(`${Dl}/${encodeURIComponent(t)}/guests/${n}/checkin${s?"?"+s:""}`,"").pipe(ze(r=>new mC(r)))}(e.event.id,i.email,!e.is_going,{system_id:e.event.system?.id}).toPromise();const s=e.event.attendees.find(r=>r.email===i.email);s&&(s.checked_in=!e.is_going)})()}static#e=this.\u0275fac=function(i){return new(i||t)(D(Js),D(In),D(ln),D(wr),D(Da))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["group-event-details-modal"]],outputs:{edit:"edit",remove:"remove"},decls:101,vars:38,consts:[["concierge_menu","matMenu"],["menu","matMenu"],[1,"relative","w-[48rem]","max-w-[calc(100vw-1rem)]","max-h-[80vh]","overflow-hidden"],[1,"relative","flex","items-center","justify-between","h-52","w-full","bg-base-200","overflow-hidden"],["auth","","class","absolute top-1/2 left-1/2 min-h-full min-w-full object-cover -translate-x-1/2 -translate-y-1/2",3,"source",4,"ngIf"],["class","absolute top-0 left-0 rounded-br py-2 pl-2 pr-4 space-x-2 bg-info text-info-content flex items-center text-sm",4,"ngIf"],["icon","","mat-dialog-close","",1,"absolute","top-1","right-1","overflow-hidden"],[1,"absolute","inset-0","bg-base-100","opacity-30","z-0"],[1,"z-10"],[1,"flex","items-center","justify-between","py-4","px-8","border-b","border-base-200"],[1,"text-left","text-xl"],[1,"flex","items-center","space-x-2"],[4,"ngIf"],["btn","","matRipple","",1,"clear","bg-base-200","text-base-content","w-[2.75rem]",3,"disabled","matMenuTriggerFor"],[1,"text-2xl"],["mat-menu-item","",3,"disabled"],[1,"mr-2"],["mat-menu-item","","mat-dialog-close","",3,"click"],["mat-menu-item","",3,"click"],[1,"text-2xl","text-error"],["mat-menu-item","",1,"flex","items-center","space-x-2",3,"click"],[1,"flex","flex-1","max-h-[calc(80vh-18rem)]","overflow-y-auto","overflow-x-hidden","p-8","space-x-6"],[1,"flex","flex-1","flex-col","space-y-2","w-1/3"],[1,"flex","items-center","space-x-4"],[1,"flex","items-center","justify-center","w-10","h-10","bg-base-200","rounded-full"],[1,"font-medium","pt-4"],[1,"flex","flex-col"],[1,"text-sm"],[1,"text-sm","opacity-30"],[1,"flex","flex-col","text-sm"],["class","opacity-30",4,"ngIf"],["matRipple","",1,"flex","items-center","space-x-4","rounded","min-h-12",3,"click"],[1,"text-sm","pb-4"],["event-details","",3,"innerHTML"],["class","flex w-[20rem]",4,"ngIf"],["class","absolute inset-0 z-50",4,"ngIf"],["auth","",1,"absolute","top-1/2","left-1/2","min-h-full","min-w-full","object-cover","-translate-x-1/2","-translate-y-1/2",3,"source"],[1,"absolute","top-0","left-0","rounded-br","py-2","pl-2","pr-4","space-x-2","bg-info","text-info-content","flex","items-center","text-sm"],[1,"text-base"],[1,"uppercase"],["btn","",1,"flex","items-center","px-4","h-10","rounded","space-x-2"],[1,"pr-2"],[1,"opacity-30"],[1,"flex","w-[20rem]"],[1,"border","border-base-300","w-full"],["matRipple","",1,"relative","w-full","h-40","bg-base-200",3,"click"],[3,"src","features","styles",4,"ngIf"],[1,"p-4","space-y-2"],[1,"opacity-30","text-sm","!mt-0"],["class","opacity-30 mt-4","target","_blank","rel","noopener noreferrer",3,"underline","href",4,"ngIf"],[3,"src","features","styles"],["target","_blank","rel","noopener noreferrer",1,"opacity-30","mt-4",3,"href"],[1,"absolute","inset-0","z-50"],[1,"absolute","inset-0","bg-base-content","opacity-60",3,"click"],[1,"absolute","left-1/2","-translate-x-1/2","w-[24rem]","inset-y-8","rounded","shadow","overflow-hidden"],[3,"click","show_host","list","host"]],template:function(i,s){if(1&i){const r=Le();m(0,"div",2)(1,"div",3),K(2,UBt,1,1,"img",4),_(),K(3,GBt,5,0,"div",5),m(4,"button",6),be(5,"div",7),m(6,"app-icon",8),C(7,"close"),_()(),m(8,"div",9)(9,"h3",10),C(10),_(),m(11,"div",11),K(12,jBt,11,26,"ng-container",12),m(13,"button",13)(14,"app-icon",14),C(15,"more_horiz"),_()(),m(16,"mat-menu",null,0)(18,"button",15)(19,"div",11)(20,"app-icon",14),C(21," confirmation_number "),_(),m(22,"div",16),C(23,"Promote Event"),_()()(),m(24,"button",17),te("click",function(){return re(r),oe(s.edit.emit())}),m(25,"div",11)(26,"app-icon",14),C(27,"edit"),_(),m(28,"div",16),C(29,"Edit Event"),_()()(),m(30,"button",15)(31,"div",11)(32,"app-icon",14),C(33,"content_copy"),_(),m(34,"div",16),C(35,"Copy URL"),_()()(),m(36,"button",18),te("click",function(){return re(r),oe(s.remove.emit())}),m(37,"div",11)(38,"app-icon",19),C(39," delete "),_(),m(40,"div",16),C(41,"Delete Event"),_()()()(),m(42,"mat-menu",null,1)(44,"button",20),te("click",function(){return re(r),oe(s.toggleInterest())}),m(45,"div",11)(46,"app-icon"),C(47," star "),_(),m(48,"span"),C(49),_()()(),m(50,"button",18),te("click",function(){return re(r),oe(s.toggleAttendance())}),m(51,"div",11)(52,"app-icon"),C(53," help "),_(),m(54,"span"),C(55),_()()()()()(),m(56,"div",21)(57,"div",22)(58,"div",23)(59,"div",24)(60,"app-icon"),C(61,"person"),_()(),m(62,"div"),C(63),_()(),m(64,"h3",25),C(65,"When and where"),_(),m(66,"div",23)(67,"div",24)(68,"app-icon"),C(69,"calendar_today"),_()(),m(70,"div",26)(71,"div",27),C(72,"Date and Time"),_(),m(73,"div",28),C(74),ge(75,"date"),ge(76,"date"),ge(77,"date"),_()()(),m(78,"div",23)(79,"div",24)(80,"app-icon"),C(81,"place"),_()(),m(82,"div",29),K(83,HBt,4,5,"div",12)(84,WBt,2,0,"div",30)(85,qBt,2,1,"div",30),_()(),m(86,"button",31),te("click",function(){return re(r),oe(s.show_attendees=!0)}),m(87,"div",24)(88,"app-icon"),C(89,"person"),_()(),m(90,"div"),C(91),_()(),m(92,"h3",25),C(93,"About this event"),_(),m(94,"div",32),be(95,"span",33),ge(96,"sanitize"),K(97,KBt,2,0,"span",30),_()(),m(98,"div"),K(99,t6t,11,6,"div",34),_()()(),K(100,n6t,4,3,"div",35)}if(2&i){const r=Gt(17),o=Gt(43);b(2),S("ngIf",null==s.event.extension_data||null==s.event.extension_data.images?null:s.event.extension_data.images.length),b(),S("ngIf",s.featured),b(7),xe(" ",s.event.title," "),b(2),S("ngIf",!s.concierge),b(),S("disabled","done"===s.event.state)("matMenuTriggerFor",s.concierge?r:o),b(5),S("disabled",!0),b(12),S("disabled",!0),b(16),rt("text-error",s.is_interested),b(3),xe(" ",s.is_interested?"Revoke":"Indicate"," Interest "),b(3),rt("text-error",s.is_going),b(3),xe(" ",s.is_going?"Revoke":"Indicate"," Going "),b(8),xe(" Event by ",(null==s.event.organiser?null:s.event.organiser.name)||s.event.host," "),b(11),fv(" ",Kt(75,27,s.event.date,"EEEE, d MMMM, yyyy")," . ",Kt(76,30,s.event.date,s.time_format)," - ",Kt(77,33,s.event.date+60*s.event.duration*1e3,s.time_format)," "),b(9),S("ngIf",s.is_onsite&&s.has_space),b(),S("ngIf",s.is_onsite&&!s.has_space),b(),S("ngIf",s.is_online),b(6),Ts(" ",s.attendance," going, ",null==s.event.attendees?null:s.event.attendees.length," interested "),b(4),S("innerHTML",Me(96,36,s.body),Zc),b(2),S("ngIf",!s.raw_description.trim()),b(2),S("ngIf",s.level),b(),S("ngIf",s.show_attendees)}}})}return t})();const i6t=()=>["./"],s6t=t=>({event:t});function r6t(t,n){if(1&t&&(m(0,"span",5),C(1),_()),2&t){const e=M(2);b(),xe("",e.day,",\xa0")}}function o6t(t,n){if(1&t&&(m(0,"h4",2),K(1,r6t,2,1,"span",3),C(2),ge(3,"date"),m(4,"span",4),C(5),ge(6,"date"),_()()),2&t){const e=M();b(),S("ngIf",e.show_day),b(),xe(" ",Kt(3,3,null==e.event?null:e.event.date,e.time_format)," "),b(3),xe("(",Kt(6,6,null==e.event?null:e.event.date,"z"),")")}}function a6t(t,n){1&t&&(m(0,"div",12)(1,"app-icon"),C(2,"restaurant"),_(),m(3,"div",14),C(4,"Catered"),_()())}function l6t(t,n){if(1&t&&(m(0,"div",21),be(1,"a-user-avatar",22),_()),2&t){const e=n.$implicit;b(),S("user",e)}}function c6t(t,n){if(1&t&&(m(0,"div",21)(1,"div",23),C(2),_()()),2&t){const e=M(3);b(2),xe(" +",(null==e.event||null==e.event.attendees?null:e.event.attendees.length)-5," ")}}function u6t(t,n){if(1&t&&(m(0,"div",18),K(1,l6t,2,1,"div",19),ge(2,"slice"),K(3,c6t,3,1,"div",20),_()),2&t){const e=M(2);b(),S("ngForOf",pv(2,2,null==e.event?null:e.event.attendees,0,6===(null==e.event||null==e.event.attendees?null:e.event.attendees.length)?6:5)),b(2),S("ngIf",(null==e.event||null==e.event.attendees?null:e.event.attendees.length)>6)}}function d6t(t,n){if(1&t){const e=Le();m(0,"a",6),te("click",function(){return re(e),oe(M().viewDetails())}),m(1,"div",7)(2,"h4",8),C(3),_(),m(4,"div",9)(5,"status-pill",10),C(6),_()(),m(7,"div",11)(8,"div",12)(9,"app-icon"),C(10,"meeting_room"),_(),m(11,"div",13),C(12),_()(),m(13,"div",12)(14,"app-icon"),C(15,"person_outline"),_(),m(16,"div",14),C(17),_()(),K(18,a6t,5,0,"div",15),m(19,"div",12)(20,"app-icon"),C(21,"people"),_(),m(22,"div",14),C(23),_()()(),m(24,"app-icon",16),C(25," chevron_right "),_(),K(26,u6t,4,6,"div",17),_()()}if(2&t){let e;const i=M();S("routerLink",pn(11,i6t))("queryParams",function nI(t,n,e,i){return FZ(ft(),al(),t,n,e,i)}(12,s6t,null==i.event?null:i.event.id)),b(3),vt(null==i.event?null:i.event.title),b(2),S("status",i.status),b(),vt(i.period),b(6),xe(" ",i.location," "),b(5),xe(" ",(null==i.event||null==i.event.organiser?null:i.event.organiser.name)||(null==i.event||null==i.event.organiser?null:i.event.organiser.email)," "),b(),S("ngIf",null==i.event||null==(e=i.event.ext("catering"))?null:e.length),b(5),Ts(" ",null==i.event||null==i.event.attendees?null:i.event.attendees.length," ",1===(null==i.event||null==i.event.attendees?null:i.event.attendees.length)?"Person":"People"," "),b(3),S("ngIf",null==i.event||null==i.event.attendees?null:i.event.attendees.length)}}let q0e=(()=>{class t extends bn{get time_format(){return this._settings.time_format}get status(){return"done"===this.event?.state?"neutral":"approved"===this.event?.status?"success":"tentative"===this.event?.status?"warning":"declined"===this.event?.status?"error":"warning"}constructor(e,i,s,r,o){super(),this._dialog=e,this._route=i,this._org=s,this._space_pipe=r,this._settings=o,this.show_day=!1,this.edit=new it,this.remove=new it,this.location=""}ngOnInit(){var e=this;return de(function*(){e.subscription("route.query",e._route.queryParamMap.subscribe(i=>i.has("event")&&e.event?.id===i.get("event")?e.viewDetails():"")),e.location=yield e.getLocationString()})()}ngOnChanges(e){var i=this;return de(function*(){e.event&&i.event&&(i.location=yield i.getLocationString())})()}get day(){const e=this.event?.date||Date.now();return`${ad(Date.now(),e)?"Today":ys(e,"EEEE")}`}getLocationString(){var e=this;return de(function*(){const i=e.event?.resources[0]||e.event?.system||e.event?.space||{},s=yield e._space_pipe.transform(i.id||i.email),r=s?.zones||[],o=e._org.levelWithID(r)||e._org.buildings.find(a=>r.includes(a.id));return`${o?(o.display_name||o.name)+", ":""} ${s?.display_name||s?.name}`})()}get period(){if(this.event?.all_day)return"All Day";const e=this.event?.date||Date.now(),i=this.event?.duration||60,s=li(e,i),r=this.event?.duration>1440,o=th({hours:Math.floor(i/60),minutes:i%60}).replace(" hour","hr").replace(" minute","min");return`${ys(e,(r?"MMM d, ":"")+this.time_format)} - ${ys(s,(r?"MMM d, ":"")+this.time_format)} ${i<1440?"("+o+")":""}`}viewDetails(){this.event&&this.timeout("open",()=>{if(this.event.extension_data?.shared_event)return void this._dialog.open(uT,{data:{event:this.event,concierge:!1}});const e=this._dialog.open(vj,{data:this.event});this.subscription("edit",e.componentInstance.edit.subscribe(()=>this.edit.emit())),this.subscription("remove",e.componentInstance.remove.subscribe(i=>this.remove.emit(i)))})}static#e=this.\u0275fac=function(i){return new(i||t)(D(wr),D(Ul),D(In),D(au),D(ln))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["event-card"]],inputs:{event:"event",show_day:"show_day"},outputs:{edit:"edit",remove:"remove"},features:[Lt([au]),bt,On],decls:2,vars:2,consts:[["class","mb-2 flex items-center","date","",4,"ngIf"],["name","view-event-details","class","w-full cursor-pointer relative",3,"routerLink","queryParams","click",4,"ngIf"],["date","",1,"mb-2","flex","items-center"],["day","",4,"ngIf"],[1,"text-xs","px-2"],["day",""],["name","view-event-details",1,"w-full","cursor-pointer","relative",3,"click","routerLink","queryParams"],[1,"w-full","bg-base-100","border","border-base-300","rounded-xl","shadow","py-4","relative"],[1,"px-4","text-lg"],[1,"flex","mx-4","my-2"],[3,"status"],[1,"flex","flex-wrap","flex-col","sm:flex-row","sm:divide-x","divide-base-200-500","py-2","space-y-2","sm:space-y-0"],[1,"flex","items-center","px-4"],[1,"mx-2","truncate"],[1,"mx-2"],["class","flex items-center px-4",4,"ngIf"],[1,"absolute","top-1/2","right-1","text-4xl","-translate-y-1/2"],["class","absolute bottom-2 right-2 sm:bottom-auto sm:top-2 text-sm sm:text-base flex items-center pr-4",4,"ngIf"],[1,"absolute","bottom-2","right-2","sm:bottom-auto","sm:top-2","text-sm","sm:text-base","flex","items-center","pr-4"],["class","h-10 w-6",4,"ngFor","ngForOf"],["class","h-10 w-6",4,"ngIf"],[1,"h-10","w-6"],[3,"user"],[1,"bg-secondary","rounded-full","h-10","w-10","border-2","border-base-100","flex","items-center","justify-center","text-secondary-content"]],template:function(i,s){1&i&&K(0,o6t,7,9,"h4",0)(1,d6t,27,14,"a",1),2&i&&(S("ngIf",s.event),b(),S("ngIf",s.event))},styles:["[_nghost-%COMP%]{display:block;width:100%}"]})}return t})();function g6t(t,n){1&t&&be(0,"img",15),2&t&&S("source",M(2).event.images[0])}function b6t(t,n){1&t&&(m(0,"p",16),C(1," No description "),_())}function v6t(t,n){if(1&t&&(m(0,"div"),C(1),_()),2&t){const e=M(2);b(),xe(" ",e.space.display_name||e.space.name||""," ")}}function y6t(t,n){1&t&&(m(0,"div",16),C(1," Room to be confirmed "),_())}function w6t(t,n){1&t&&(m(0,"div",16),C(1," Remote event "),_())}function S6t(t,n){if(1&t){const e=Le();m(0,"button",2),te("click",function(){return re(e),oe(M().viewDetails())}),m(1,"div",3),K(2,g6t,1,1,"img",4),_(),m(3,"div",5)(4,"div",6),C(5),ge(6,"date"),ge(7,"date"),_(),m(8,"h2",7),C(9),_(),m(10,"div",8)(11,"p",9),C(12),_(),K(13,b6t,2,0,"p",10),_(),m(14,"div",11)(15,"app-icon",12),C(16,"place"),_(),K(17,v6t,2,1,"div",13)(18,y6t,2,0,"div",10)(19,w6t,2,0,"div",10),_(),m(20,"div",11)(21,"app-icon",12),C(22,"people"),_(),m(23,"div",14),C(24),_()()()()}if(2&t){const e=M();b(2),S("ngIf",null==e.event.images?null:e.event.images.length),b(3),Ts(" ",Kt(6,11,e.event.date,"EEE d MMM"),", ",Kt(7,14,e.event.date,e.time_format)," "),b(3),S("title",e.event.title),b(),xe(" ",e.event.title," "),b(3),vt(e.raw_description),b(),S("ngIf",!e.raw_description.trim()),b(4),S("ngIf",e.is_onsite&&e.has_space),b(),S("ngIf",e.is_onsite&&!e.has_space),b(),S("ngIf",!e.is_onsite),b(5),xe(" ",(null==e.event.attendees?null:e.event.attendees.length)||"0"," attending ")}}function C6t(t,n){1&t&&be(0,"img",15),2&t&&S("source",M(2).event.images[0])}function x6t(t,n){1&t&&(m(0,"p",16),C(1," No description "),_())}function E6t(t,n){if(1&t&&(m(0,"div"),C(1),_()),2&t){const e=M(2);b(),xe(" ",e.space.display_name||e.space.name||""," ")}}function T6t(t,n){1&t&&(m(0,"div",16),C(1," Room to be confirmed "),_())}function I6t(t,n){1&t&&(m(0,"div",16),C(1," Remote event "),_())}function k6t(t,n){if(1&t){const e=Le();m(0,"button",17),te("click",function(){return re(e),oe(M().viewDetails())}),m(1,"div",18),K(2,C6t,1,1,"img",4),_(),m(3,"div",19)(4,"app-icon",20),C(5,"star"),_(),m(6,"div",21),C(7,"Featured"),_()(),m(8,"div",22)(9,"div",23)(10,"div",24),C(11),ge(12,"date"),_(),m(13,"div",25),C(14),ge(15,"date"),_()(),m(16,"div",26)(17,"h3",27),C(18),_(),m(19,"div",28),C(20),ge(21,"date"),ge(22,"date"),ge(23,"date"),_(),m(24,"div",29)(25,"p",30),C(26),_(),K(27,x6t,2,0,"p",10),_(),m(28,"div",11)(29,"app-icon",12),C(30,"place"),_(),K(31,E6t,2,1,"div",13)(32,T6t,2,0,"div",10)(33,I6t,2,0,"div",10),_(),m(34,"div",11)(35,"app-icon",12),C(36,"people"),_(),m(37,"div",14),C(38),_()()()(),m(39,"div",31),C(40," View Details "),_()()}if(2&t){const e=M();b(2),S("ngIf",null==e.event.images?null:e.event.images.length),b(9),xe(" ",Kt(12,13,e.event.date,"MMM")," "),b(3),vt(Kt(15,16,e.event.date,"d")),b(4),vt(e.event.title),b(2),fv(" ",Kt(21,19,e.event.date,"EEEE")," ",Kt(22,22,e.event.date,e.time_format)," - ",Kt(23,25,e.event.date+60*e.event.duration*1e3,e.time_format)," "),b(6),vt(e.raw_description),b(),S("ngIf",!e.raw_description.trim()),b(4),S("ngIf",e.is_onsite&&e.has_space),b(),S("ngIf",e.is_onsite&&!e.has_space),b(),S("ngIf",!e.is_onsite),b(5),xe(" ",(null==e.event.attendees?null:e.event.attendees.length)||"0"," attending ")}}let X0e=(()=>{class t{get time_format(){return this._settings.time_format}get is_onsite(){return"ONLINE"!==this.event?.extension_data.attendance_type}get has_space(){return!!this.space?.id}get is_online(){return!this.is_onsite||"ANY"===this.event?.extension_data.attendance_type}get group_event_calendar(){return this._settings.get("app.group_events_calendar")}constructor(e,i,s){this._settings=e,this._dialog=i,this._org=s,this.raw_description=""}ngOnInit(){var e=this;return de(function*(){const i=new au(e._org),s=e.event.resources.find(r=>r.email!==e.group_event_calendar);e.space=yield i.transform(s?.id||s?.email),e.raw_description=e.removeHtmlTags(e.event.body)})()}removeHtmlTags(e){return(new DOMParser).parseFromString(e,"text/html").body.textContent||""}viewDetails(){this._dialog.open(uT,{data:{event:this.event,concierge:!1}})}static#e=this.\u0275fac=function(i){return new(i||t)(D(ln),D(wr),D(In))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["group-event-card"]],inputs:{event:"event",featured:"featured"},decls:3,vars:2,consts:[["featured_card",""],["matRipple","","class","border border-base-300 hover:border-info flex flex-col bg-base-100 rounded-xl shadow hover:shadow-2xl overflow-hidden w-60 h-[20rem]",3,"click",4,"ngIf","ngIfElse"],["matRipple","",1,"border","border-base-300","hover:border-info","flex","flex-col","bg-base-100","rounded-xl","shadow","hover:shadow-2xl","overflow-hidden","w-60","h-[20rem]",3,"click"],[1,"relative","flex","items-center","justify-between","h-28","min-h-28","w-full","bg-base-200","overflow-hidden","border-b","border-base-200"],["auth","","class","absolute top-0 left-0 h-full w-full object-center object-cover",3,"source",4,"ngIf"],[1,"p-4","flex-1","h-1/2","w-full"],[1,"opacity-60","text-sm","text-left"],[1,"text-xl","mb-2","text-left","truncate","w-full",3,"title"],[1,"opacity-60","text-xs","flex-1","overflow-hidden","h-[4.5rem]","mb-2","text-left"],[1,"line-clamp-4"],["class","opacity-30",4,"ngIf"],[1,"flex","items-center","space-x-2","text-sm"],[1,"text-info"],[4,"ngIf"],[1,""],["auth","",1,"absolute","top-0","left-0","h-full","w-full","object-center","object-cover",3,"source"],[1,"opacity-30"],["matRipple","",1,"border","border-base-300","hover:border-info","flex","bg-base-100","rounded-xl","shadow","hover:shadow-2xl","overflow-hidden","w-[63rem]","max-w-full","h-56","mx-auto",3,"click"],[1,"relative","flex","items-center","justify-between","h-full","min-w-56","w-1/2","max-w-[20rem]","bg-base-200","overflow-hidden","border-r","border-base-200"],[1,"absolute","top-0","left-0","rounded-br-xl","py-2","pl-2","pr-4","space-x-2","bg-info","text-info-content","flex","items-center","text-sm"],[1,"text-base"],[1,"uppercase"],["details","",1,"flex","px-8","py-4","space-x-4"],[1,"flex","flex-col","items-center"],[1,"text-sm","opacity-30"],[1,"text-lg"],[1,"flex","flex-col","space-y-2"],[1,"text-left"],["time","",1,"text-sm","opacity-30","text-left"],[1,"h-20","overflow-hidden","text-left"],[1,"line-clamp-3"],[1,"absolute","top-4","right-4","bg-secondary","text-secondary-content","rounded","px-4","py-2","w-32","text-center","truncate"]],template:function(i,s){if(1&i&&K(0,S6t,25,17,"button",1)(1,k6t,41,28,"ng-template",null,0,mn),2&i){const r=Gt(2);S("ngIf",!s.featured)("ngIfElse",r)}},styles:["button[_ngcontent-%COMP%]{transition:box-shadow .3s,border .2s}"]})}return t})(),D6t=(()=>{class t{ngOnInit(){return de(function*(){yield TM.pipe(ds(e=>!!e)).toPromise(),function MFt(t){t&&(aG=t)}(fn())})()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:[iu],imports:[ka,Xh,iu,LS,$_,qd,ID,qv,B_,ny,QE,pg,Tc,M1e]})}return t})();function wj(t){return Hn(1e3*t)}Is(vj,[hn,Ot,Ms,zt,pf,Yl,ug,WC,lce,rf,Ep,TS,jt,ou,rF],[ZP,Rs,ud]),Is(rF,[hn,Ot,zt,pf,jt,ou],[]),Is(q0e,[hn,Ot,zt,pf,WC],[yv,Rs]),Is(uT,[Ot,Ms,zt,Yl,xl,rf,Ep,TS,jt,rF],[yi,Rs,ud,au]),Is(X0e,[Ot,zt,xl,jt],[Rs]),new Io;const A6t=["container"],Z0e=()=>[];function O6t(t,n){if(1&t&&(m(0,"div",32),C(1),_()),2&t){const e=n.index,i=M();Wn("left",-i.offset_x+"px"),$t("disabled",i.today&&i.current_hour>e),b(),Ts(" ",e%12==0?"12":e%12,"",e>=12?"pm":"am"," ")}}function N6t(t,n){if(1&t){const e=Le();m(0,"div",33),be(1,"a-user-avatar",12),m(2,"div",34),C(3),_(),m(4,"button",35),te("click",function(){const s=re(e).$implicit;return oe(M().removeUser(s))}),m(5,"app-icon"),C(6,"close"),_()()()}if(2&t){const e=n.$implicit,i=M();Wn("top",-i.offset_y+"px"),b(),S("user",e),b(2),xe(" ",e.name||i.host.email," ")}}function R6t(t,n){if(1&t&&be(0,"div",36),2&t){const e=n.index,i=M();Wn("left",-(i.offset_x+1)+"px"),$t("disabled",i.today&&i.current_hour>e)}}function F6t(t,n){if(1&t&&(m(0,"div",37),C(1),ge(2,"date"),_()),2&t){const e=M();b(),xe(" ",Kt(2,1,e.date,"shortTime")," ")}}function L6t(t,n){if(1&t&&(be(0,"user-availability-list",25),ge(1,"async"),ge(2,"async")),2&t){const e=n.$implicit,i=M();S("user",e)("date",i.date)("availability",Me(1,3,i.availability)?Me(2,5,i.availability)[e.email.toLowerCase()]:pn(7,Z0e))}}let Q0e=(()=>{class t extends bn{get today(){return ad(this.date,Date.now())}get current_hour(){return(new Date).getHours()}get selection_left(){const e=new Date(this.date);return 5*(e.getHours()+e.getMinutes()/60)}get selection_width(){return this.duration/60*5}constructor(e,i,s){super(),this._data=e,this._renderer=i,this._dialog_ref=s,this.users=new Mt([]),this.search="",this.date=this._data.date||Date.now(),this.duration=this._data.duration||60,this.offset_y=0,this.offset_x=0,this.host=this._data.host,this.hours=new Array(24).fill(0),this.on_change=new Mt(0),this.availability=Qt([this.users,this.on_change]).pipe(hs(300),nn(([r])=>function mLt(t){const n=zr(t);return la(`${LR}/free_busy${n?"?"+n:""}`).pipe(ze(e=>e))}({calendars:[this.host.email,...r.map(o=>o.email.toLowerCase())].join(","),period_start:Ei(Pi(this.date)),period_end:Ei(Fs(this.date))}).pipe(ts(()=>gt([])))),ze(r=>{const o={};for(const a of r)o[a.id.toLowerCase()]=a.availability.filter(l=>"busy"===l.status).map(l=>{const c=wj(l.starts_at),u=_f(wj(l.ends_at),wj(l.starts_at));return{date:c,duration:u,start:(c.getHours()+c.getMinutes()/60)/24*100,size:u/60/24*100}});return o}),Zw({}),jn(1)),this.move_time=!1,this._start_time=0,this._move_last=0,this._move_size=1920,this.users.next([...this._data.users])}addUser(e){this.users.next([...this.users.getValue().filter(i=>i.email!==e.email),e]),this.user=null}removeUser(e){this.users.next(this.users.getValue().filter(i=>i.email!==e.email)),this.user=null}closeAndUpdate(){this._dialog_ref.close(!0)}ngAfterViewInit(){const e=new Date(this.date);this.timeout("init",()=>{const i=this._container_el.nativeElement.querySelector(`[hour="${e.getHours()}"]`);if(i){const s=this._container_el.nativeElement.getBoundingClientRect(),r=i.getBoundingClientRect();this._container_el.nativeElement.scrollTo(r.left-128-s.left,0)}this.onScroll()},300)}onScroll(){this.offset_x=this._container_el.nativeElement.scrollLeft,this.offset_y=this._container_el.nativeElement.scrollTop}startMovePeriod(e){e.preventDefault(),e.stopPropagation(),this._move_last=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,this.move_time=!0,this._start_time=this.date,e instanceof MouseEvent?this.subscription("on_move",this._renderer.listen("window","mousemove",i=>this._onMovePeriod(i))):this.subscription("on_move",this._renderer.listen("window","touchmove",i=>this._onMovePeriod(i))),e instanceof MouseEvent?this.subscription("on_move_end",this._renderer.listen("window","mouseup",()=>this._onMoveEnd())):this.subscription("on_move_end",this._renderer.listen("window","touchend",()=>this._onMoveEnd()))}startMoveDuration(e){e.preventDefault(),e.stopPropagation(),this._move_last=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,this._start_time=this.duration,e instanceof MouseEvent?this.subscription("on_move",this._renderer.listen("window","mousemove",i=>this._onMoveDuration(i))):this.subscription("on_move",this._renderer.listen("window","touchmove",i=>this._onMoveDuration(i))),e instanceof MouseEvent?this.subscription("on_move_end",this._renderer.listen("window","mouseup",()=>this._onMoveEnd())):this.subscription("on_move_end",this._renderer.listen("window","touchend",()=>this._onMoveEnd()))}_onMovePeriod(e){const i=this._move_last-(e instanceof MouseEvent?e.clientX:e.touches[0].clientX),r=(i>0?-1:1)*Math.floor(Math.abs(i/this._move_size*24*60)/5)*5;if(r){const o=this.date;this.date=li(this._start_time,r).valueOf(),this.date<Date.now()&&(this.date=o)}}_onMoveDuration(e){const i=this._move_last-(e instanceof MouseEvent?e.clientX:e.touches[0].clientX),r=(i>0?-1:1)*Math.floor(Math.abs(i/this._move_size*24*60)/5)*5;r&&(this.duration=Math.max(30,this._start_time+r))}_onMoveEnd(){this.unsub("on_move"),this.unsub("on_move_end"),this._move_last=0,this.move_time=!1}static#e=this.\u0275fac=function(i){return new(i||t)(D(Js),D(Hu),D(Da))};static#t=this.\u0275cmp=Qe({type:t,selectors:[["find-availability-modal"]],viewQuery:function(i,s){if(1&i&&Zt(A6t,7),2&i){let r;xt(r=Et())&&(s._container_el=r.first)}},features:[bt],decls:45,vars:31,consts:[["container",""],[1,"relative","flex","items-center","justify-center","p-4"],[1,"text-center"],["icon","","matRipple","","mat-dialog-close","",1,"absolute","top-1/2","left-1","-translate-y-1/2"],[1,"flex","flex-col","h-[calc(100vh-7rem)]","sm:h-[65vh]","overflow-hidden"],[1,"w-full","flex","flex-col","sm:flex-row","space-y-2","sm:space-y-0","sm:space-x-2","p-2"],[1,"max-h-[3.25rem]","flex-1",3,"ngModelChange","ngModel"],[1,"grid","flex-1","h-1/2","w-full","border-t","border-base-200","relative","overflow-hidden","divide-x","divide-y","divide-base-200","max-w-[100vw]","sm:max-w-[80vw]"],["times","",1,"col-start-2","h-10","flex","overflow-hidden","border-l","border-base-200"],["hour","","class","relative border-r border-base-200 h-10 min-w-[5rem] p-2",3,"left",4,"ngFor","ngForOf"],["users","",1,"row-start-2","w-24","overflow-hidden"],["host","",1,"flex","flex-col","items-center","justify-center","h-32","w-24","relative","border-b","border-base-200","py-2"],[1,"text-2xl",3,"user"],[1,"text-xs","break-words","overflow-hidden","max-w-full","px-2","text-center"],["person","","class","flex flex-col items-center justify-center h-32 w-24 relative border-b border-base-200 py-2",3,"top",4,"ngFor","ngForOf"],["blocks","",1,"relative","row-start-2","overflow-hidden"],["fixed","",1,"absolute","inset-0","flex","overflow-hidden"],["divider","","class","relative h-full min-w-[5rem] border-l border-base-200",3,"left",4,"ngFor","ngForOf"],["selection","",1,"absolute","inset-y-0","!border-x-2","!border-info","z-20","cursor-grab","active:cursor-grabbing",3,"mousedown","touchstart"],[1,"absolute","inset-0","bg-info","opacity-30"],["handle","",1,"absolute","top-1/2","-left-px","-translate-x-1/2","-translate-y-1/2","h-3","w-3","rounded-full","bg-info"],["handle","",1,"absolute","top-1/2","-right-px","translate-x-1/2","-translate-y-1/2","h-3","w-3","rounded-full","bg-info","hover:h-4","hover:w-4","active:bg-secondary",3,"mousedown","touchstart"],[1,"bg-base-100","border","border-base-200","p-2","absolute","top-2","left-1/2","-translate-x-1/2","shadow","text-xs","whitespace-nowrap","rounded"],["class","bg-base-100 border border-base-200 p-2 absolute top-12 left-1/2 -translate-x-1/2 shadow text-xs whitespace-nowrap rounded",4,"ngIf"],["scroll","",1,"absolute","inset-0","overflow-auto",3,"scroll"],[1,"pointer-events-none",3,"user","date","availability"],["class","pointer-events-none",3,"user","date","availability",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","p-2","border-t","border-base-200","w-full"],["btn","","matRipple","",1,"clear","text-secondary",3,"mat-dialog-close"],[1,"flex","items-center"],[1,"text-xl"],[1,"mr-1","underline"],["hour","",1,"relative","border-r","border-base-200","h-10","min-w-[5rem]","p-2"],["person","",1,"flex","flex-col","items-center","justify-center","h-32","w-24","relative","border-b","border-base-200","py-2"],[1,"text-xs","break-words","max-w-full","px-2","text-center"],["icon","",1,"absolute","-top-1","-left-1",3,"click"],["divider","",1,"relative","h-full","min-w-[5rem]","border-l","border-base-200"],[1,"bg-base-100","border","border-base-200","p-2","absolute","top-12","left-1/2","-translate-x-1/2","shadow","text-xs","whitespace-nowrap","rounded"]],template:function(i,s){if(1&i){const r=Le();m(0,"header",1)(1,"h2",2),C(2,"Find Availability"),_(),m(3,"button",3)(4,"app-icon"),C(5,"close"),_()()(),m(6,"main",4)(7,"div",5)(8,"a-date-field",6),Gn("ngModelChange",function(a){return re(r),Fn(s.date,a)||(s.date=a),oe(a)}),te("ngModelChange",function(){return re(r),oe(s.on_change.next(s.on_change.getValue()+1))}),_(),m(9,"a-user-search-field",6),Gn("ngModelChange",function(a){return re(r),Fn(s.user,a)||(s.user=a),oe(a)}),te("ngModelChange",function(a){return re(r),oe(s.addUser(a))}),_()(),m(10,"div",7)(11,"div",8),K(12,O6t,2,5,"div",9),_(),m(13,"div",10)(14,"div",11),be(15,"a-user-avatar",12),m(16,"div",13),C(17),_()(),K(18,N6t,7,4,"div",14),ge(19,"async"),_(),m(20,"div",15)(21,"div",16),K(22,R6t,1,3,"div",17),m(23,"div",18),te("mousedown",function(a){return re(r),oe(s.startMovePeriod(a))})("touchstart",function(a){return re(r),oe(s.startMovePeriod(a))}),be(24,"div",19)(25,"div",20),m(26,"div",21),te("mousedown",function(a){return re(r),oe(s.startMoveDuration(a))})("touchstart",function(a){return re(r),oe(s.startMoveDuration(a))}),_(),m(27,"div",22),C(28),ge(29,"duration"),_(),K(30,F6t,3,4,"div",23),_()(),m(31,"div",24,0),te("scroll",function(){return re(r),oe(s.onScroll())}),be(33,"user-availability-list",25),ge(34,"async"),ge(35,"async"),K(36,L6t,3,8,"user-availability-list",26),ge(37,"async"),_()()()(),m(38,"footer",27)(39,"button",28)(40,"div",29)(41,"app-icon",30),C(42,"arrow_back"),_(),m(43,"div",31),C(44,"Back to form"),_()()()()}2&i&&(b(8),Un("ngModel",s.date),b(),Un("ngModel",s.user),b(3),S("ngForOf",s.hours),b(2),Wn("top",-s.offset_y+"px"),b(),S("user",s.host),b(2),xe(" ",s.host.name||s.host.email," "),b(),S("ngForOf",Me(19,20,s.users)),b(4),S("ngForOf",s.hours),b(),Wn("left","calc("+s.selection_left+"rem - "+s.offset_x+"px)")("width",s.selection_width+"rem"),b(5),xe(" ",Me(29,22,s.duration)," "),b(2),S("ngIf",s.move_time),b(3),S("user",s.host)("date",s.date)("availability",Me(34,24,s.availability)?Me(35,26,s.availability)[s.host.email]:pn(30,Z0e)),b(3),S("ngForOf",Me(37,28,s.users)),b(3),S("mat-dialog-close",!0))},styles:[".grid[_ngcontent-%COMP%]{grid-template-columns:6rem 1fr;grid-template-rows:2.5rem minmax(0,1fr)}[disabled=true][_ngcontent-%COMP%], [disabled=true][_ngcontent-%COMP%]   [header][_ngcontent-%COMP%]{background:var(--b3)!important;pointer-events:none}[disabled=true][_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.3}"]})}return t})();function P6t(t,n){if(1&t&&(m(0,"div",2)(1,"div",3),C(2),ge(3,"date"),ge(4,"date"),_()()),2&t){const e=n.$implicit;Wn("left",e.start+"%")("width",e.size+"%"),b(2),Ts(" ",Kt(3,6,e.date,"shortTime")," - ",Kt(4,9,e.date.valueOf()+60*e.duration*1e3,"shortTime")," ")}}let J0e=(()=>{class t{constructor(){this.availability=[],this.date=Date.now()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Qe({type:t,selectors:[["user-availability-list"]],inputs:{user:"user",availability:"availability",date:"date"},decls:2,vars:1,consts:[[1,"relative","w-[120rem]","h-32","inset-y-0","border-b","border-base-200"],["event","","class","absolute inset-y-0 bg-error text-white p-2 overflow-hidden border border-red-700 rounded",3,"left","width",4,"ngFor","ngForOf"],["event","",1,"absolute","inset-y-0","bg-error","text-white","p-2","overflow-hidden","border","border-red-700","rounded"],[1,"text-xs","max-w-full"]],template:function(i,s){1&i&&(m(0,"div",0),K(1,P6t,5,12,"div",1),_()),2&i&&(b(),S("ngForOf",s.availability))},dependencies:[hn,Rs],styles:["[_nghost-%COMP%]{display:block}"]})}return t})(),$6t=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[ka,Xh,iu,B_,QE,pg,sy,ny,D8]})}return t})();Is(GB,[hn,Ot,oi,wi,Ms,Em,zt,pf,Hs,rf,Ep,TS,vs,Br,jt,Ws],[Rs]),Is(Q0e,[hn,Ot,oi,wi,Ms,Au,e0,zt,pf,jt,J0e],[yi,Rs,xce]);let b9t=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({providers:[iu],imports:[ka,Xh,iu,LS,$_,qd,ID,qv,B_,ny,sy,Qv,QE,pg,Tc,AS,M1e,D6t,$6t]})}return t})(),iUt=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[ka,pg,Xh,iu,o5,nf,Wd,QE,b9t]})}return t})();Is(kG,[hn,Ot,cu,xl],[]),Is(DG,[Ot,zt,vs,sf,jt,Ms,ql,Ws,Mr,oi,zl,qo,_l,Ih,e0],[yi,Rs]);const sUt=["input"];function rUt(t,n){1&t&&be(0,"img",27),2&t&&S("src","assets/icons/"+M().card_type+".svg",Ia)}function oUt(t,n){if(1&t&&(m(0,"mat-option",28),C(1),_()),2&t){const e=n.$implicit;S("value",e[0]),b(),Ts(" ",e[1]," (",e[0],") ")}}function aUt(t,n){if(1&t&&(m(0,"mat-option",28),C(1),_()),2&t){const e=n.$implicit;S("value",e),b(),vt(e)}}const lUt={card_number:"                ",cardholder:"",cvv:""},Dj=new Rs("en-us","");let Owe=(()=>{class t extends bn{constructor(){super(...arguments),this.details=new ml({card_number:new _t(Array(16).fill("X").join()),cardholder:new _t(""),exp_month:new _t(""),exp_year:new _t(""),cvv:new _t("",[$r.minLength(3),$r.maxLength(4)])}),this.disabled=!1,this.months=Array(12).fill(0).map((e,i)=>[Dj.transform(UB(Date.now(),i),"MM"),Dj.transform(UB(Date.now(),i),"MMM")]),this.years=Array(12).fill(0).map((e,i)=>Dj.transform(uy(Date.now(),i),"yyyy")),this.digits=Array(16).fill(0),this._index=0,this.registerOnChange=e=>this._onChange=e,this.registerOnTouched=e=>this._onTouch=e,this.setDisabledState=e=>this.disabled=e}get is_amex(){return(this.details.value?.card_number||"").startsWith("3")}get card_type(){const e=this.details.value?.card_number||"";return e.startsWith("3")?"amex":e.startsWith("4")?"visa":e.startsWith("5")?"mastercard":""}get card_display(){let e=this.details.value?.card_number||"";return this.card_focused&&(e=e.substring(0,this._index)+"\u2bd0"+e.substring(this._index+1)),this.is_amex?`${e.substring(0,4)}-${e.substring(4,10)}-${e.substring(10)}`:`${e.substring(0,4)}-${e.substring(4,8)}-${e.substring(8,12)}-${e.substring(12)}`}get card_focused(){return document.activeElement===this._input_el.nativeElement||document.activeElement===this._input_el.nativeElement.parentElement}ngOnInit(){this.subscription("changes",this.details.valueChanges.subscribe(e=>this.timeout("update",()=>this.setValue(this.details.getRawValue()))))}focusInput(){this._input_el.nativeElement.focus(),this._index=this._input_el.nativeElement.selectionStart||0}onInput(e){if(!e||!this.card_focused)return;const i=this._index;if(i<0||i>16)return;let s=this.details.value.card_number;if((e.code.startsWith("Digit")||e.code.startsWith("Numpad"))&&i<(this.is_amex?15:16))s=s.substring(0,i)+e.key+s.substring(i+1),this.details.patchValue({card_number:s}),this._focusChange(i,1);else if("Backspace"===e.code&&i>0){let r=this.details.value.card_number;r=r.substring(0,i)+" "+r.substring(i+1),this.details.patchValue({card_number:r}),this._focusChange(i,-1)}else"ArrowLeft"===e.code?this._focusChange(i,-1):"ArrowRight"===e.code&&" "!==s[i]&&this._focusChange(i,1)}_focusChange(e,i){this._index=Math.min(16,Math.max(0,e+i))}setValue(e){this._onChange&&this._onChange(e)}writeValue(e){this.details.patchValue(e||lUt)}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=Pn(t)))(s||t)}})();static#t=this.\u0275cmp=Qe({type:t,selectors:[["card-input-field"]],viewQuery:function(i,s){if(1&i&&Zt(sUt,7),2&i){let r;xt(r=Et())&&(s._input_el=r.first)}},features:[Lt([{provide:qi,useExisting:Cn(()=>t),multi:!0}]),bt],decls:41,vars:6,consts:()=>{let e,i,s,r,o,a,l;return e=$localize`:␟c51ae86488666fc691751bf76d88811b37505c00␟1085309836704157602:Card Number`,i=$localize`:␟cc927e92ada1f250e8c5ea7884d0b1294be56635␟4148395957159016439:Name on Card`,s=$localize`:␟6402e768a1ac6a5f86edf0daccf05b3d9d63f465␟598947732489453783:Cardholder name is required`,r=$localize`:␟48b5a0234304bd29aeaab8f2793b8245517a7102␟7043163776563263056:Expiry Month`,o=$localize`:␟28b0c8359cc099ef3dcaddac4c1357d45751ac9d␟1539914853150581191:Expiry month is required`,a=$localize`:␟84a41ff903da0de49f3172fef0d0528701065d6e␟6698859483517525075:Expiry year is required`,l=$localize`:␟11a0ab2762b4af425c3d20aa211a751e4785e04e␟203544573091191988:Invalid security code`,[["input",""],e,i,s,r,o,a,l,[3,"keyup","formGroup"],[1,"flex","flex-col"],["for","card-number"],["tabindex","0",1,"border","border-base-200","p-2","h-12","mb-4","focus-within:shadow","focus-within:border-base-200","flex","items-center","font-mono","w-full","rounded","relative",3,"focus"],[1,"flex-1"],["type","tel","maxlength","17",1,"hidden","absolute",3,"keydown","value"],["class","h-8",3,"src",4,"ngIf"],[1,"flex","flex-col","flex-1"],["for","cardholder"],["appearance","outline"],["name","cardholder","matInput","","placeholder","Mr John Smith","formControlName","cardholder"],[1,"flex","items-center","space-x-2"],[1,"flex","flex-col","flex-1","w-1/4"],["placeholder","MM","formControlName","exp_month"],[3,"value",4,"ngFor","ngForOf"],["placeholder","YYYY","formControlName","exp_year"],["for","cvv"],["appearance","outline",1,"w-20"],["name","cvv","matInput","","formControlName","cvv","maxlength","4"],[1,"h-8",3,"src"],[3,"value"]]},template:function(i,s){if(1&i){const r=Le();m(0,"form",8),te("keyup",function(a){return re(r),oe(s.onInput(a))},0,vc),m(1,"div",9)(2,"label",10),Ne(3,1),_(),m(4,"div",11),te("focus",function(){return re(r),oe(s.focusInput())}),m(5,"pre",12),C(6),_(),m(7,"input",13,0),te("keydown",function(){return re(r),oe(!1)}),_(),K(9,rUt,1,1,"img",14),_()(),m(10,"div",15)(11,"label",16),Ne(12,2),_(),m(13,"mat-form-field",17),be(14,"input",18),m(15,"mat-error"),Ne(16,3),_()()(),m(17,"div",19)(18,"div",20)(19,"label",16),Ne(20,4),_(),m(21,"mat-form-field",17)(22,"mat-select",21),K(23,oUt,2,3,"mat-option",22),_(),m(24,"mat-error"),Ne(25,5),_()()(),m(26,"div",20)(27,"label",16),C(28,"Expiry Year"),_(),m(29,"mat-form-field",17)(30,"mat-select",23),K(31,aUt,2,2,"mat-option",22),_(),m(32,"mat-error"),Ne(33,6),_()()(),m(34,"div",9)(35,"label",24),C(36,"CVV"),_(),m(37,"mat-form-field",25),be(38,"input",26),m(39,"mat-error"),Ne(40,7),_()()()()()}2&i&&(S("formGroup",s.details),b(6),vt(s.card_display),b(),S("value",null==s.details.value.card_number?null:s.details.value.card_number.trim()),b(2),S("ngIf",s.card_type),b(14),S("ngForOf",s.months),b(8),S("ngForOf",s.years))},dependencies:[hn,Ot,Kh,Mr,oi,zl,h$,qo,_l,vs,sf,ql,Br,Hs],styles:["mat-form-field[_ngcontent-%COMP%]{height:3.25rem}"]})}return t})(),cUt=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t});static#n=this.\u0275inj=kn({imports:[ka,Xh,iu,qd,$_,B_,qv,V_,ny]})}return t})();function uUt(t){return new P5e(t,"./assets/locale/",".json")}Is(vG,[Ot,oi,wi,Ms,Ws,Owe],[yi,ZP,Rs]);const dUt=[qd,$_,uVe,Tc];let hUt=(()=>{class t{constructor(){console.log("Production:",!0)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Mn({type:t,bootstrap:[fBt]});static#n=this.\u0275inj=kn({providers:[{provide:gc,useValue:Grt({showDialog:!1})},{provide:zhe,deps:[Hr]},{provide:Iw,useFactory:()=>()=>{},deps:[zhe],multi:!0},Xee(Zee())],imports:[qJ,v3e,l5e.forRoot(N4t,{useHash:!0}),Xh,iu,pg,dUt,K$.forRoot({defaultLanguage:"en",loader:{provide:fS,useFactory:uUt,deps:[$ee]}}),D5e.register("ngsw-worker.js",{enabled:true}),iUt,cUt]})}return t})();yFe().bootstrapModule(hUt).catch(t=>console.error(t))},993:(pi,qe)=>{"use strict";qe.if=ue,qe.Kp=function ee(F){if(F.length%4!=0)throw new Error("Unable to parse base64 string.");var x=F.indexOf("=");if(-1!==x&&x<F.length-2)throw new Error("Unable to parse base64 string.");for(var O,I=F.endsWith("==")?2:F.endsWith("=")?1:0,$=F.length,N=new Uint8Array($/4*3),k=0,A=0;k<$;k+=4,A+=3)O=pe(F.charCodeAt(k))<<18|pe(F.charCodeAt(k+1))<<12|pe(F.charCodeAt(k+2))<<6|pe(F.charCodeAt(k+3)),N[A]=O>>16,N[A+1]=O>>8&255,N[A+2]=255&O;return N.subarray(0,N.length-I)},qe.Cw=function Q(F){return ue((arguments.length>1&&void 0!==arguments[1]?arguments[1]:new TextEncoder).encode(F))};var Z=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],ye=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];function pe(F){if(F>=ye.length)throw new Error("Unable to parse base64 string.");var x=ye[F];if(255===x)throw new Error("Unable to parse base64 string.");return x}function ue(F){var I,x="",$=F.length;for(I=2;I<$;I+=3)x+=Z[F[I-2]>>2],x+=Z[(3&F[I-2])<<4|F[I-1]>>4],x+=Z[(15&F[I-1])<<2|F[I]>>6],x+=Z[63&F[I]];return I===$+1&&(x+=Z[F[I-2]>>2],x+=Z[(3&F[I-2])<<4],x+="=="),I===$&&(x+=Z[F[I-2]>>2],x+=Z[(3&F[I-2])<<4|F[I-1]>>4],x+=Z[(15&F[I-1])<<2],x+="="),x}},299:function(pi,qe,Y){var Z;!function(ye,pe){var ue={};!function(ye){"use strict";ye.__esModule=!0,ye.digestLength=32,ye.blockSize=64;var pe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function ue(O,k,A,V,R){for(var j,ce,ie,se,_e,J,G,U,B,ae,ve,Ue,je;R>=64;){for(j=k[0],ce=k[1],ie=k[2],se=k[3],_e=k[4],J=k[5],G=k[6],U=k[7],ae=0;ae<16;ae++)O[ae]=(255&A[ve=V+4*ae])<<24|(255&A[ve+1])<<16|(255&A[ve+2])<<8|255&A[ve+3];for(ae=16;ae<64;ae++)O[ae]=((Ue=((B=O[ae-2])>>>17|B<<15)^(B>>>19|B<<13)^B>>>10)+O[ae-7]|0)+((je=((B=O[ae-15])>>>7|B<<25)^(B>>>18|B<<14)^B>>>3)+O[ae-16]|0);for(ae=0;ae<64;ae++)Ue=(((_e>>>6|_e<<26)^(_e>>>11|_e<<21)^(_e>>>25|_e<<7))+(_e&J^~_e&G)|0)+(U+(pe[ae]+O[ae]|0)|0)|0,je=((j>>>2|j<<30)^(j>>>13|j<<19)^(j>>>22|j<<10))+(j&ce^j&ie^ce&ie)|0,U=G,G=J,J=_e,_e=se+Ue|0,se=ie,ie=ce,ce=j,j=Ue+je|0;k[0]+=j,k[1]+=ce,k[2]+=ie,k[3]+=se,k[4]+=_e,k[5]+=J,k[6]+=G,k[7]+=U,V+=64,R-=64}return V}var ee=function(){function O(){this.digestLength=ye.digestLength,this.blockSize=ye.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return O.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},O.prototype.clean=function(){for(var k=0;k<this.buffer.length;k++)this.buffer[k]=0;for(k=0;k<this.temp.length;k++)this.temp[k]=0;this.reset()},O.prototype.update=function(k,A){if(void 0===A&&(A=k.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var V=0;if(this.bytesHashed+=A,this.bufferLength>0){for(;this.bufferLength<64&&A>0;)this.buffer[this.bufferLength++]=k[V++],A--;64===this.bufferLength&&(ue(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(A>=64&&(V=ue(this.temp,this.state,k,V,A),A%=64);A>0;)this.buffer[this.bufferLength++]=k[V++],A--;return this},O.prototype.finish=function(k){if(!this.finished){var A=this.bytesHashed,V=this.bufferLength,R=A/536870912|0,j=A<<3,ce=A%64<56?64:128;this.buffer[V]=128;for(var ie=V+1;ie<ce-8;ie++)this.buffer[ie]=0;this.buffer[ce-8]=R>>>24&255,this.buffer[ce-7]=R>>>16&255,this.buffer[ce-6]=R>>>8&255,this.buffer[ce-5]=R>>>0&255,this.buffer[ce-4]=j>>>24&255,this.buffer[ce-3]=j>>>16&255,this.buffer[ce-2]=j>>>8&255,this.buffer[ce-1]=j>>>0&255,ue(this.temp,this.state,this.buffer,0,ce),this.finished=!0}for(ie=0;ie<8;ie++)k[4*ie+0]=this.state[ie]>>>24&255,k[4*ie+1]=this.state[ie]>>>16&255,k[4*ie+2]=this.state[ie]>>>8&255,k[4*ie+3]=this.state[ie]>>>0&255;return this},O.prototype.digest=function(){var k=new Uint8Array(this.digestLength);return this.finish(k),k},O.prototype._saveState=function(k){for(var A=0;A<this.state.length;A++)k[A]=this.state[A]},O.prototype._restoreState=function(k,A){for(var V=0;V<this.state.length;V++)this.state[V]=k[V];this.bytesHashed=A,this.finished=!1,this.bufferLength=0},O}();ye.Hash=ee;var Q=function(){function O(k){this.inner=new ee,this.outer=new ee,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var A=new Uint8Array(this.blockSize);if(k.length>this.blockSize)(new ee).update(k).finish(A).clean();else for(var V=0;V<k.length;V++)A[V]=k[V];for(V=0;V<A.length;V++)A[V]^=54;for(this.inner.update(A),V=0;V<A.length;V++)A[V]^=106;for(this.outer.update(A),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate),V=0;V<A.length;V++)A[V]=0}return O.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},O.prototype.clean=function(){for(var k=0;k<this.istate.length;k++)this.ostate[k]=this.istate[k]=0;this.inner.clean(),this.outer.clean()},O.prototype.update=function(k){return this.inner.update(k),this},O.prototype.finish=function(k){return this.outer.finished?this.outer.finish(k):(this.inner.finish(k),this.outer.update(k,this.digestLength).finish(k)),this},O.prototype.digest=function(){var k=new Uint8Array(this.digestLength);return this.finish(k),k},O}();function q(O){var k=(new ee).update(O),A=k.digest();return k.clean(),A}function F(O,k){var A=new Q(O).update(k),V=A.digest();return A.clean(),V}function x(O,k,A,V){var R=V[0];if(0===R)throw new Error("hkdf: cannot expand more");k.reset(),R>1&&k.update(O),A&&k.update(A),k.update(V),k.finish(O),V[0]++}ye.HMAC=Q,ye.hash=q,ye.default=q,ye.hmac=F;var I=new Uint8Array(ye.digestLength);ye.hkdf=function $(O,k,A,V){void 0===k&&(k=I),void 0===V&&(V=32);for(var R=new Uint8Array([1]),j=F(k,O),ce=new Q(j),ie=new Uint8Array(ce.digestLength),se=ie.length,_e=new Uint8Array(V),J=0;J<V;J++)se===ie.length&&(x(ie,ce,A,R),se=0),_e[J]=ie[se++];return ce.clean(),ie.fill(0),R.fill(0),_e},ye.pbkdf2=function N(O,k,A,V){for(var R=new Q(O),j=R.digestLength,ce=new Uint8Array(4),ie=new Uint8Array(j),se=new Uint8Array(j),_e=new Uint8Array(V),J=0;J*j<V;J++){var G=J+1;ce[0]=G>>>24&255,ce[1]=G>>>16&255,ce[2]=G>>>8&255,ce[3]=G>>>0&255,R.reset(),R.update(k),R.update(ce),R.finish(se);for(var U=0;U<j;U++)ie[U]=se[U];for(U=2;U<=A;U++){R.reset(),R.update(se).finish(se);for(var B=0;B<j;B++)ie[B]^=se[B]}for(U=0;U<j&&J*j+U<V;U++)_e[J*j+U]=ie[U]}for(J=0;J<j;J++)ie[J]=se[J]=0;for(J=0;J<4;J++)ce[J]=0;return R.clean(),_e}}(ue);var ee=ue.default;for(var Q in ue)ee[Q]=ue[Q];"object"==typeof pi.exports?pi.exports=ee:void 0!==(Z=function(){return ee}.call(ue,Y,ue,pi))&&(pi.exports=Z)}()},929:pi=>{pi.exports=Y;var qe=null;try{qe=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Y(U,B,ae){this.low=0|U,this.high=0|B,this.unsigned=!!ae}function Z(U){return!0===(U&&U.__isLong__)}Object.defineProperty(Y.prototype,"__isLong__",{value:!0}),Y.isLong=Z;var ye={},pe={};function ue(U,B){var ae,ve,Ue;return B?(Ue=0<=(U>>>=0)&&U<256)&&(ve=pe[U])?ve:(ae=Q(U,(0|U)<0?-1:0,!0),Ue&&(pe[U]=ae),ae):(Ue=-128<=(U|=0)&&U<128)&&(ve=ye[U])?ve:(ae=Q(U,U<0?-1:0,!1),Ue&&(ye[U]=ae),ae)}function ee(U,B){if(isNaN(U))return B?R:V;if(B){if(U<0)return R;if(U>=O)return _e}else{if(U<=-k)return J;if(U+1>=k)return se}return U<0?ee(-U,B).neg():Q(U%N|0,U/N|0,B)}function Q(U,B,ae){return new Y(U,B,ae)}Y.fromInt=ue,Y.fromNumber=ee,Y.fromBits=Q;var q=Math.pow;function F(U,B,ae){if(0===U.length)throw Error("empty string");if("NaN"===U||"Infinity"===U||"+Infinity"===U||"-Infinity"===U)return V;if("number"==typeof B?(ae=B,B=!1):B=!!B,(ae=ae||10)<2||36<ae)throw RangeError("radix");var ve;if((ve=U.indexOf("-"))>0)throw Error("interior hyphen");if(0===ve)return F(U.substring(1),B,ae).neg();for(var Ue=ee(q(ae,8)),je=V,dt=0;dt<U.length;dt+=8){var Ae=Math.min(8,U.length-dt),ke=parseInt(U.substring(dt,dt+Ae),ae);if(Ae<8){var he=ee(q(ae,Ae));je=je.mul(he).add(ee(ke))}else je=(je=je.mul(Ue)).add(ee(ke))}return je.unsigned=B,je}function x(U,B){return"number"==typeof U?ee(U,B):"string"==typeof U?F(U,B):Q(U.low,U.high,"boolean"==typeof B?B:U.unsigned)}Y.fromString=F,Y.fromValue=x;var N=4294967296,O=N*N,k=O/2,A=ue(1<<24),V=ue(0);Y.ZERO=V;var R=ue(0,!0);Y.UZERO=R;var j=ue(1);Y.ONE=j;var ce=ue(1,!0);Y.UONE=ce;var ie=ue(-1);Y.NEG_ONE=ie;var se=Q(-1,2147483647,!1);Y.MAX_VALUE=se;var _e=Q(-1,-1,!0);Y.MAX_UNSIGNED_VALUE=_e;var J=Q(0,-2147483648,!1);Y.MIN_VALUE=J;var G=Y.prototype;G.toInt=function(){return this.unsigned?this.low>>>0:this.low},G.toNumber=function(){return this.unsigned?(this.high>>>0)*N+(this.low>>>0):this.high*N+(this.low>>>0)},G.toString=function(B){if((B=B||10)<2||36<B)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(J)){var ae=ee(B),ve=this.div(ae),Ue=ve.mul(ae).sub(this);return ve.toString(B)+Ue.toInt().toString(B)}return"-"+this.neg().toString(B)}for(var je=ee(q(B,6),this.unsigned),dt=this,Ae="";;){var ke=dt.div(je),Se=(dt.sub(ke.mul(je)).toInt()>>>0).toString(B);if((dt=ke).isZero())return Se+Ae;for(;Se.length<6;)Se="0"+Se;Ae=""+Se+Ae}},G.getHighBits=function(){return this.high},G.getHighBitsUnsigned=function(){return this.high>>>0},G.getLowBits=function(){return this.low},G.getLowBitsUnsigned=function(){return this.low>>>0},G.getNumBitsAbs=function(){if(this.isNegative())return this.eq(J)?64:this.neg().getNumBitsAbs();for(var B=0!=this.high?this.high:this.low,ae=31;ae>0&&!(B&1<<ae);ae--);return 0!=this.high?ae+33:ae+1},G.isZero=function(){return 0===this.high&&0===this.low},G.eqz=G.isZero,G.isNegative=function(){return!this.unsigned&&this.high<0},G.isPositive=function(){return this.unsigned||this.high>=0},G.isOdd=function(){return!(1&~this.low)},G.isEven=function(){return!(1&this.low)},G.equals=function(B){return Z(B)||(B=x(B)),(this.unsigned===B.unsigned||this.high>>>31!=1||B.high>>>31!=1)&&this.high===B.high&&this.low===B.low},G.eq=G.equals,G.notEquals=function(B){return!this.eq(B)},G.neq=G.notEquals,G.ne=G.notEquals,G.lessThan=function(B){return this.comp(B)<0},G.lt=G.lessThan,G.lessThanOrEqual=function(B){return this.comp(B)<=0},G.lte=G.lessThanOrEqual,G.le=G.lessThanOrEqual,G.greaterThan=function(B){return this.comp(B)>0},G.gt=G.greaterThan,G.greaterThanOrEqual=function(B){return this.comp(B)>=0},G.gte=G.greaterThanOrEqual,G.ge=G.greaterThanOrEqual,G.compare=function(B){if(Z(B)||(B=x(B)),this.eq(B))return 0;var ae=this.isNegative(),ve=B.isNegative();return ae&&!ve?-1:!ae&&ve?1:this.unsigned?B.high>>>0>this.high>>>0||B.high===this.high&&B.low>>>0>this.low>>>0?-1:1:this.sub(B).isNegative()?-1:1},G.comp=G.compare,G.negate=function(){return!this.unsigned&&this.eq(J)?J:this.not().add(j)},G.neg=G.negate,G.add=function(B){Z(B)||(B=x(B));var Se=0,De=0,Ze=0,Ye=0;return Ze+=(Ye+=(65535&this.low)+(65535&B.low))>>>16,De+=(Ze+=(this.low>>>16)+(B.low>>>16))>>>16,Se+=(De+=(65535&this.high)+(65535&B.high))>>>16,Se+=(this.high>>>16)+(B.high>>>16),Q((Ze&=65535)<<16|(Ye&=65535),(Se&=65535)<<16|(De&=65535),this.unsigned)},G.subtract=function(B){return Z(B)||(B=x(B)),this.add(B.neg())},G.sub=G.subtract,G.multiply=function(B){if(this.isZero())return V;if(Z(B)||(B=x(B)),qe)return Q(qe.mul(this.low,this.high,B.low,B.high),qe.get_high(),this.unsigned);if(B.isZero())return V;if(this.eq(J))return B.isOdd()?J:V;if(B.eq(J))return this.isOdd()?J:V;if(this.isNegative())return B.isNegative()?this.neg().mul(B.neg()):this.neg().mul(B).neg();if(B.isNegative())return this.mul(B.neg()).neg();if(this.lt(A)&&B.lt(A))return ee(this.toNumber()*B.toNumber(),this.unsigned);var Ue=65535&this.high,je=this.low>>>16,dt=65535&this.low,ke=65535&B.high,he=B.low>>>16,Se=65535&B.low,De=0,Ze=0,Ye=0,we=0;return Ye+=(we+=dt*Se)>>>16,Ze+=(Ye+=je*Se)>>>16,Ye&=65535,Ze+=(Ye+=dt*he)>>>16,De+=(Ze+=Ue*Se)>>>16,Ze&=65535,De+=(Ze+=je*he)>>>16,Ze&=65535,De+=(Ze+=dt*ke)>>>16,De+=(this.high>>>16)*Se+Ue*he+je*ke+dt*(B.high>>>16),Q((Ye&=65535)<<16|(we&=65535),(De&=65535)<<16|(Ze&=65535),this.unsigned)},G.mul=G.multiply,G.divide=function(B){if(Z(B)||(B=x(B)),B.isZero())throw Error("division by zero");var ve,Ue,je;if(qe)return this.unsigned||-2147483648!==this.high||-1!==B.low||-1!==B.high?Q((this.unsigned?qe.div_u:qe.div_s)(this.low,this.high,B.low,B.high),qe.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?R:V;if(this.unsigned){if(B.unsigned||(B=B.toUnsigned()),B.gt(this))return R;if(B.gt(this.shru(1)))return ce;je=R}else{if(this.eq(J))return B.eq(j)||B.eq(ie)?J:B.eq(J)?j:(ve=this.shr(1).div(B).shl(1)).eq(V)?B.isNegative()?j:ie:(Ue=this.sub(B.mul(ve)),je=ve.add(Ue.div(B)));if(B.eq(J))return this.unsigned?R:V;if(this.isNegative())return B.isNegative()?this.neg().div(B.neg()):this.neg().div(B).neg();if(B.isNegative())return this.div(B.neg()).neg();je=V}for(Ue=this;Ue.gte(B);){ve=Math.max(1,Math.floor(Ue.toNumber()/B.toNumber()));for(var Ae=Math.ceil(Math.log(ve)/Math.LN2),ke=Ae<=48?1:q(2,Ae-48),he=ee(ve),Se=he.mul(B);Se.isNegative()||Se.gt(Ue);)Se=(he=ee(ve-=ke,this.unsigned)).mul(B);he.isZero()&&(he=j),je=je.add(he),Ue=Ue.sub(Se)}return je},G.div=G.divide,G.modulo=function(B){return Z(B)||(B=x(B)),qe?Q((this.unsigned?qe.rem_u:qe.rem_s)(this.low,this.high,B.low,B.high),qe.get_high(),this.unsigned):this.sub(this.div(B).mul(B))},G.mod=G.modulo,G.rem=G.modulo,G.not=function(){return Q(~this.low,~this.high,this.unsigned)},G.and=function(B){return Z(B)||(B=x(B)),Q(this.low&B.low,this.high&B.high,this.unsigned)},G.or=function(B){return Z(B)||(B=x(B)),Q(this.low|B.low,this.high|B.high,this.unsigned)},G.xor=function(B){return Z(B)||(B=x(B)),Q(this.low^B.low,this.high^B.high,this.unsigned)},G.shiftLeft=function(B){return Z(B)&&(B=B.toInt()),0==(B&=63)?this:B<32?Q(this.low<<B,this.high<<B|this.low>>>32-B,this.unsigned):Q(0,this.low<<B-32,this.unsigned)},G.shl=G.shiftLeft,G.shiftRight=function(B){return Z(B)&&(B=B.toInt()),0==(B&=63)?this:B<32?Q(this.low>>>B|this.high<<32-B,this.high>>B,this.unsigned):Q(this.high>>B-32,this.high>=0?0:-1,this.unsigned)},G.shr=G.shiftRight,G.shiftRightUnsigned=function(B){if(Z(B)&&(B=B.toInt()),0==(B&=63))return this;var ae=this.high;return B<32?Q(this.low>>>B|ae<<32-B,ae>>>B,this.unsigned):Q(32===B?ae:ae>>>B-32,0,this.unsigned)},G.shru=G.shiftRightUnsigned,G.shr_u=G.shiftRightUnsigned,G.toSigned=function(){return this.unsigned?Q(this.low,this.high,!1):this},G.toUnsigned=function(){return this.unsigned?this:Q(this.low,this.high,!0)},G.toBytes=function(B){return B?this.toBytesLE():this.toBytesBE()},G.toBytesLE=function(){var B=this.high,ae=this.low;return[255&ae,ae>>>8&255,ae>>>16&255,ae>>>24,255&B,B>>>8&255,B>>>16&255,B>>>24]},G.toBytesBE=function(){var B=this.high,ae=this.low;return[B>>>24,B>>>16&255,B>>>8&255,255&B,ae>>>24,ae>>>16&255,ae>>>8&255,255&ae]},Y.fromBytes=function(B,ae,ve){return ve?Y.fromBytesLE(B,ae):Y.fromBytesBE(B,ae)},Y.fromBytesLE=function(B,ae){return new Y(B[0]|B[1]<<8|B[2]<<16|B[3]<<24,B[4]|B[5]<<8|B[6]<<16|B[7]<<24,ae)},Y.fromBytesBE=function(B,ae){return new Y(B[4]<<24|B[5]<<16|B[6]<<8|B[7],B[0]<<24|B[1]<<16|B[2]<<8|B[3],ae)}},55:function(pi){typeof self<"u"&&self,pi.exports=function(qe){var Y={};function Z(ye){if(Y[ye])return Y[ye].exports;var pe=Y[ye]={i:ye,l:!1,exports:{}};return qe[ye].call(pe.exports,pe,pe.exports,Z),pe.l=!0,pe.exports}return Z.m=qe,Z.c=Y,Z.d=function(ye,pe,ue){Z.o(ye,pe)||Object.defineProperty(ye,pe,{configurable:!1,enumerable:!0,get:ue})},Z.n=function(ye){var pe=ye&&ye.__esModule?function(){return ye.default}:function(){return ye};return Z.d(pe,"a",pe),pe},Z.o=function(ye,pe){return Object.prototype.hasOwnProperty.call(ye,pe)},Z.p="",Z(Z.s=109)}([function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=Z(17),pe=Z(18),ue=Z(19),ee=Z(45),Q=Z(46),q=Z(47),F=Z(48),x=Z(49),I=Z(12),$=Z(32),N=Z(33),O=Z(31),k=Z(1);Y.default={Scope:k.Scope,create:k.create,find:k.find,query:k.query,register:k.register,Container:ye.default,Format:pe.default,Leaf:ue.default,Embed:F.default,Scroll:ee.default,Block:q.default,Inline:Q.default,Text:x.default,Attributor:{Attribute:I.default,Class:$.default,Style:N.default,Store:O.default}}},function(qe,Y,Z){"use strict";var O,ye=this&&this.__extends||(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,A){k.__proto__=A}||function(k,A){for(var V in A)A.hasOwnProperty(V)&&(k[V]=A[V])},function(k,A){function V(){this.constructor=k}O(k,A),k.prototype=null===A?Object.create(A):(V.prototype=A.prototype,new V)});Object.defineProperty(Y,"__esModule",{value:!0});var pe=function(O){function k(A){var V=this;return(V=O.call(this,A="[Parchment] "+A)||this).message=A,V.name=V.constructor.name,V}return ye(k,O),k}(Error);Y.ParchmentError=pe;var F,ue={},ee={},Q={},q={};function $(O,k){var A;if(void 0===k&&(k=F.ANY),"string"==typeof O)A=q[O]||ue[O];else if(O instanceof Text||O.nodeType===Node.TEXT_NODE)A=q.text;else if("number"==typeof O)O&F.LEVEL&F.BLOCK?A=q.block:O&F.LEVEL&F.INLINE&&(A=q.inline);else if(O instanceof HTMLElement){var V=(O.getAttribute("class")||"").split(/\s+/);for(var R in V)if(A=ee[V[R]])break;A=A||Q[O.tagName]}return null==A?null:k&F.LEVEL&A.scope&&k&F.TYPE&A.scope?A:null}Y.DATA_KEY="__blot",function(O){O[O.TYPE=3]="TYPE",O[O.LEVEL=12]="LEVEL",O[O.ATTRIBUTE=13]="ATTRIBUTE",O[O.BLOT=14]="BLOT",O[O.INLINE=7]="INLINE",O[O.BLOCK=11]="BLOCK",O[O.BLOCK_BLOT=10]="BLOCK_BLOT",O[O.INLINE_BLOT=6]="INLINE_BLOT",O[O.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",O[O.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",O[O.ANY=15]="ANY"}(F=Y.Scope||(Y.Scope={})),Y.create=function x(O,k){var A=$(O);if(null==A)throw new pe("Unable to create "+O+" blot");var V=A,R=O instanceof Node||O.nodeType===Node.TEXT_NODE?O:V.create(k);return new V(R,k)},Y.find=function I(O,k){return void 0===k&&(k=!1),null==O?null:null!=O[Y.DATA_KEY]?O[Y.DATA_KEY].blot:k?I(O.parentNode,k):null},Y.query=$,Y.register=function N(){for(var O=[],k=0;k<arguments.length;k++)O[k]=arguments[k];if(O.length>1)return O.map(function(R){return N(R)});var A=O[0];if("string"!=typeof A.blotName&&"string"!=typeof A.attrName)throw new pe("Invalid definition");if("abstract"===A.blotName)throw new pe("Cannot register abstract class");return q[A.blotName||A.attrName]=A,"string"==typeof A.keyName?ue[A.keyName]=A:(null!=A.className&&(ee[A.className]=A),null!=A.tagName&&(A.tagName=Array.isArray(A.tagName)?A.tagName.map(function(R){return R.toUpperCase()}):A.tagName.toUpperCase(),(Array.isArray(A.tagName)?A.tagName:[A.tagName]).forEach(function(R){(null==Q[R]||null==A.className)&&(Q[R]=A)}))),A}},function(qe,Y,Z){var ye=Z(51),pe=Z(11),ue=Z(3),ee=Z(20),q=function(F){this.ops=Array.isArray(F)?F:null!=F&&Array.isArray(F.ops)?F.ops:[]};q.prototype.insert=function(F,x){var I={};return 0===F.length?this:(I.insert=F,null!=x&&"object"==typeof x&&Object.keys(x).length>0&&(I.attributes=x),this.push(I))},q.prototype.delete=function(F){return F<=0?this:this.push({delete:F})},q.prototype.retain=function(F,x){if(F<=0)return this;var I={retain:F};return null!=x&&"object"==typeof x&&Object.keys(x).length>0&&(I.attributes=x),this.push(I)},q.prototype.push=function(F){var x=this.ops.length,I=this.ops[x-1];if(F=ue(!0,{},F),"object"==typeof I){if("number"==typeof F.delete&&"number"==typeof I.delete)return this.ops[x-1]={delete:I.delete+F.delete},this;if("number"==typeof I.delete&&null!=F.insert&&"object"!=typeof(I=this.ops[(x-=1)-1]))return this.ops.unshift(F),this;if(pe(F.attributes,I.attributes)){if("string"==typeof F.insert&&"string"==typeof I.insert)return this.ops[x-1]={insert:I.insert+F.insert},"object"==typeof F.attributes&&(this.ops[x-1].attributes=F.attributes),this;if("number"==typeof F.retain&&"number"==typeof I.retain)return this.ops[x-1]={retain:I.retain+F.retain},"object"==typeof F.attributes&&(this.ops[x-1].attributes=F.attributes),this}}return x===this.ops.length?this.ops.push(F):this.ops.splice(x,0,F),this},q.prototype.chop=function(){var F=this.ops[this.ops.length-1];return F&&F.retain&&!F.attributes&&this.ops.pop(),this},q.prototype.filter=function(F){return this.ops.filter(F)},q.prototype.forEach=function(F){this.ops.forEach(F)},q.prototype.map=function(F){return this.ops.map(F)},q.prototype.partition=function(F){var x=[],I=[];return this.forEach(function($){(F($)?x:I).push($)}),[x,I]},q.prototype.reduce=function(F,x){return this.ops.reduce(F,x)},q.prototype.changeLength=function(){return this.reduce(function(F,x){return x.insert?F+ee.length(x):x.delete?F-x.delete:F},0)},q.prototype.length=function(){return this.reduce(function(F,x){return F+ee.length(x)},0)},q.prototype.slice=function(F,x){F=F||0,"number"!=typeof x&&(x=1/0);for(var I=[],$=ee.iterator(this.ops),N=0;N<x&&$.hasNext();){var O;N<F?O=$.next(F-N):(O=$.next(x-N),I.push(O)),N+=ee.length(O)}return new q(I)},q.prototype.compose=function(F){var x=ee.iterator(this.ops),I=ee.iterator(F.ops),$=[],N=I.peek();if(null!=N&&"number"==typeof N.retain&&null==N.attributes){for(var O=N.retain;"insert"===x.peekType()&&x.peekLength()<=O;)O-=x.peekLength(),$.push(x.next());N.retain-O>0&&I.next(N.retain-O)}for(var k=new q($);x.hasNext()||I.hasNext();)if("insert"===I.peekType())k.push(I.next());else if("delete"===x.peekType())k.push(x.next());else{var A=Math.min(x.peekLength(),I.peekLength()),V=x.next(A),R=I.next(A);if("number"==typeof R.retain){var j={};"number"==typeof V.retain?j.retain=A:j.insert=V.insert;var ce=ee.attributes.compose(V.attributes,R.attributes,"number"==typeof V.retain);if(ce&&(j.attributes=ce),k.push(j),!I.hasNext()&&pe(k.ops[k.ops.length-1],j)){var ie=new q(x.rest());return k.concat(ie).chop()}}else"number"==typeof R.delete&&"number"==typeof V.retain&&k.push(R)}return k.chop()},q.prototype.concat=function(F){var x=new q(this.ops.slice());return F.ops.length>0&&(x.push(F.ops[0]),x.ops=x.ops.concat(F.ops.slice(1))),x},q.prototype.diff=function(F,x){if(this.ops===F.ops)return new q;var I=[this,F].map(function(A){return A.map(function(V){if(null!=V.insert)return"string"==typeof V.insert?V.insert:"\0";throw new Error("diff() called "+(A===F?"on":"with")+" non-document")}).join("")}),$=new q,N=ye(I[0],I[1],x),O=ee.iterator(this.ops),k=ee.iterator(F.ops);return N.forEach(function(A){for(var V=A[1].length;V>0;){var R=0;switch(A[0]){case ye.INSERT:R=Math.min(k.peekLength(),V),$.push(k.next(R));break;case ye.DELETE:R=Math.min(V,O.peekLength()),O.next(R),$.delete(R);break;case ye.EQUAL:R=Math.min(O.peekLength(),k.peekLength(),V);var j=O.next(R),ce=k.next(R);pe(j.insert,ce.insert)?$.retain(R,ee.attributes.diff(j.attributes,ce.attributes)):$.push(ce).delete(R)}V-=R}}),$.chop()},q.prototype.eachLine=function(F,x){x=x||"\n";for(var I=ee.iterator(this.ops),$=new q,N=0;I.hasNext();){if("insert"!==I.peekType())return;var O=I.peek(),k=ee.length(O)-I.peekLength(),A="string"==typeof O.insert?O.insert.indexOf(x,k)-k:-1;if(A<0)$.push(I.next());else if(A>0)$.push(I.next(A));else{if(!1===F($,I.next(1).attributes||{},N))return;N+=1,$=new q}}$.length()>0&&F($,{},N)},q.prototype.transform=function(F,x){if(x=!!x,"number"==typeof F)return this.transformPosition(F,x);for(var I=ee.iterator(this.ops),$=ee.iterator(F.ops),N=new q;I.hasNext()||$.hasNext();)if("insert"!==I.peekType()||!x&&"insert"===$.peekType())if("insert"===$.peekType())N.push($.next());else{var O=Math.min(I.peekLength(),$.peekLength()),k=I.next(O),A=$.next(O);if(k.delete)continue;A.delete?N.push(A):N.retain(O,ee.attributes.transform(k.attributes,A.attributes,x))}else N.retain(ee.length(I.next()));return N.chop()},q.prototype.transformPosition=function(F,x){x=!!x;for(var I=ee.iterator(this.ops),$=0;I.hasNext()&&$<=F;){var N=I.peekLength(),O=I.peekType();I.next(),"delete"!==O?("insert"===O&&($<F||!x)&&(F+=N),$+=N):F-=Math.min(N,F-$)}return F},qe.exports=q},function(qe,Y){"use strict";var Z=Object.prototype.hasOwnProperty,ye=Object.prototype.toString,pe=Object.defineProperty,ue=Object.getOwnPropertyDescriptor,ee=function(I){return"function"==typeof Array.isArray?Array.isArray(I):"[object Array]"===ye.call(I)},Q=function(I){if(!I||"[object Object]"!==ye.call(I))return!1;var O,$=Z.call(I,"constructor"),N=I.constructor&&I.constructor.prototype&&Z.call(I.constructor.prototype,"isPrototypeOf");if(I.constructor&&!$&&!N)return!1;for(O in I);return typeof O>"u"||Z.call(I,O)},q=function(I,$){pe&&"__proto__"===$.name?pe(I,$.name,{enumerable:!0,configurable:!0,value:$.newValue,writable:!0}):I[$.name]=$.newValue},F=function(I,$){if("__proto__"===$){if(!Z.call(I,$))return;if(ue)return ue(I,$).value}return I[$]};qe.exports=function x(){var I,$,N,O,k,A,V=arguments[0],R=1,j=arguments.length,ce=!1;for("boolean"==typeof V&&(ce=V,V=arguments[1]||{},R=2),(null==V||"object"!=typeof V&&"function"!=typeof V)&&(V={});R<j;++R)if(null!=(I=arguments[R]))for($ in I)N=F(V,$),V!==(O=F(I,$))&&(ce&&O&&(Q(O)||(k=ee(O)))?(k?(k=!1,A=N&&ee(N)?N:[]):A=N&&Q(N)?N:{},q(V,{name:$,newValue:x(ce,A,O)})):typeof O<"u"&&q(V,{name:$,newValue:O}));return V}},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.default=Y.BlockEmbed=Y.bubbleFormats=void 0;var ye=function(){function G(U,B){for(var ae=0;ae<B.length;ae++){var ve=B[ae];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(U,ve.key,ve)}}return function(U,B,ae){return B&&G(U.prototype,B),ae&&G(U,ae),U}}(),pe=function G(U,B,ae){null===U&&(U=Function.prototype);var ve=Object.getOwnPropertyDescriptor(U,B);if(void 0===ve){var Ue=Object.getPrototypeOf(U);return null===Ue?void 0:G(Ue,B,ae)}if("value"in ve)return ve.value;var je=ve.get;return void 0===je?void 0:je.call(ae)},ee=V(Z(3)),q=V(Z(2)),x=V(Z(0)),$=V(Z(16)),O=V(Z(6)),A=V(Z(7));function V(G){return G&&G.__esModule?G:{default:G}}function R(G,U){if(!(G instanceof U))throw new TypeError("Cannot call a class as a function")}function j(G,U){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!U||"object"!=typeof U&&"function"!=typeof U?G:U}function ce(G,U){if("function"!=typeof U&&null!==U)throw new TypeError("Super expression must either be null or a function, not "+typeof U);G.prototype=Object.create(U&&U.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(G,U):G.__proto__=U)}var se=function(G){function U(){return R(this,U),j(this,(U.__proto__||Object.getPrototypeOf(U)).apply(this,arguments))}return ce(U,G),ye(U,[{key:"attach",value:function(){pe(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"attach",this).call(this),this.attributes=new x.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new q.default).insert(this.value(),(0,ee.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(ae,ve){var Ue=x.default.query(ae,x.default.Scope.BLOCK_ATTRIBUTE);null!=Ue&&this.attributes.attribute(Ue,ve)}},{key:"formatAt",value:function(ae,ve,Ue,je){this.format(Ue,je)}},{key:"insertAt",value:function(ae,ve,Ue){if("string"==typeof ve&&ve.endsWith("\n")){var je=x.default.create(_e.blotName);this.parent.insertBefore(je,0===ae?this:this.next),je.insertAt(0,ve.slice(0,-1))}else pe(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"insertAt",this).call(this,ae,ve,Ue)}}]),U}(x.default.Embed);se.scope=x.default.Scope.BLOCK_BLOT;var _e=function(G){function U(B){R(this,U);var ae=j(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,B));return ae.cache={},ae}return ce(U,G),ye(U,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(x.default.Leaf).reduce(function(ae,ve){return 0===ve.length()?ae:ae.insert(ve.value(),J(ve))},new q.default).insert("\n",J(this))),this.cache.delta}},{key:"deleteAt",value:function(ae,ve){pe(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"deleteAt",this).call(this,ae,ve),this.cache={}}},{key:"formatAt",value:function(ae,ve,Ue,je){ve<=0||(x.default.query(Ue,x.default.Scope.BLOCK)?ae+ve===this.length()&&this.format(Ue,je):pe(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"formatAt",this).call(this,ae,Math.min(ve,this.length()-ae-1),Ue,je),this.cache={})}},{key:"insertAt",value:function(ae,ve,Ue){if(null!=Ue)return pe(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"insertAt",this).call(this,ae,ve,Ue);if(0!==ve.length){var je=ve.split("\n"),dt=je.shift();dt.length>0&&(ae<this.length()-1||null==this.children.tail?pe(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"insertAt",this).call(this,Math.min(ae,this.length()-1),dt):this.children.tail.insertAt(this.children.tail.length(),dt),this.cache={});var Ae=this;je.reduce(function(ke,he){return(Ae=Ae.split(ke,!0)).insertAt(0,he),he.length},ae+dt.length)}}},{key:"insertBefore",value:function(ae,ve){var Ue=this.children.head;pe(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"insertBefore",this).call(this,ae,ve),Ue instanceof $.default&&Ue.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=pe(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(ae,ve){pe(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"moveChildren",this).call(this,ae,ve),this.cache={}}},{key:"optimize",value:function(ae){pe(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"optimize",this).call(this,ae),this.cache={}}},{key:"path",value:function(ae){return pe(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"path",this).call(this,ae,!0)}},{key:"removeChild",value:function(ae){pe(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"removeChild",this).call(this,ae),this.cache={}}},{key:"split",value:function(ae){var ve=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ve&&(0===ae||ae>=this.length()-1)){var Ue=this.clone();return 0===ae?(this.parent.insertBefore(Ue,this),this):(this.parent.insertBefore(Ue,this.next),Ue)}var je=pe(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"split",this).call(this,ae,ve);return this.cache={},je}}]),U}(x.default.Block);function J(G){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==G||("function"==typeof G.formats&&(U=(0,ee.default)(U,G.formats())),null==G.parent||"scroll"==G.parent.blotName||G.parent.statics.scope!==G.statics.scope)?U:J(G.parent,U)}_e.blotName="block",_e.tagName="P",_e.defaultChild="break",_e.allowedChildren=[O.default,x.default.Embed,A.default],Y.bubbleFormats=J,Y.BlockEmbed=se,Y.default=_e},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.default=Y.overload=Y.expandConfig=void 0;var ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Ae){return typeof Ae}:function(Ae){return Ae&&"function"==typeof Symbol&&Ae.constructor===Symbol&&Ae!==Symbol.prototype?"symbol":typeof Ae},pe=function(){return function(ke,he){if(Array.isArray(ke))return ke;if(Symbol.iterator in Object(ke))return function Ae(ke,he){var Se=[],De=!0,Ze=!1,Ye=void 0;try{for(var Ke,we=ke[Symbol.iterator]();!(De=(Ke=we.next()).done)&&(Se.push(Ke.value),!he||Se.length!==he);De=!0);}catch(lt){Ze=!0,Ye=lt}finally{try{!De&&we.return&&we.return()}finally{if(Ze)throw Ye}}return Se}(ke,he);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ue=function(){function Ae(ke,he){for(var Se=0;Se<he.length;Se++){var De=he[Se];De.enumerable=De.enumerable||!1,De.configurable=!0,"value"in De&&(De.writable=!0),Object.defineProperty(ke,De.key,De)}}return function(ke,he,Se){return he&&Ae(ke.prototype,he),Se&&Ae(ke,Se),ke}}();Z(50);var Q=J(Z(2)),F=J(Z(14)),I=J(Z(8)),N=J(Z(9)),k=J(Z(0)),A=Z(15),V=J(A),j=J(Z(3)),ie=J(Z(10)),_e=J(Z(34));function J(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}function G(Ae,ke,he){return ke in Ae?Object.defineProperty(Ae,ke,{value:he,enumerable:!0,configurable:!0,writable:!0}):Ae[ke]=he,Ae}var B=(0,ie.default)("quill"),ae=function(){function Ae(ke){var he=this,Se=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function U(Ae,ke){if(!(Ae instanceof ke))throw new TypeError("Cannot call a class as a function")}(this,Ae),this.options=ve(ke,Se),this.container=this.options.container,null==this.container)return B.error("Invalid Quill container",ke);this.options.debug&&Ae.debug(this.options.debug);var De=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new I.default,this.scroll=k.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new F.default(this.scroll),this.selection=new V.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(I.default.events.EDITOR_CHANGE,function(Ye){Ye===I.default.events.TEXT_CHANGE&&he.root.classList.toggle("ql-blank",he.editor.isBlank())}),this.emitter.on(I.default.events.SCROLL_UPDATE,function(Ye,we){var Ke=he.selection.lastRange,lt=Ke&&0===Ke.length?Ke.index:void 0;Ue.call(he,function(){return he.editor.update(null,we,lt)},Ye)});var Ze=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+De+"<p><br></p></div>");this.setContents(Ze),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return ue(Ae,null,[{key:"debug",value:function(he){!0===he&&(he="log"),ie.default.level(he)}},{key:"find",value:function(he){return he.__quill||k.default.find(he)}},{key:"import",value:function(he){return null==this.imports[he]&&B.error("Cannot import "+he+". Are you sure it was registered?"),this.imports[he]}},{key:"register",value:function(he,Se){var De=this,Ze=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof he){var Ye=he.attrName||he.blotName;"string"==typeof Ye?this.register("formats/"+Ye,he,Se):Object.keys(he).forEach(function(we){De.register(we,he[we],Se)})}else null!=this.imports[he]&&!Ze&&B.warn("Overwriting "+he+" with",Se),this.imports[he]=Se,(he.startsWith("blots/")||he.startsWith("formats/"))&&"abstract"!==Se.blotName?k.default.register(Se):he.startsWith("modules")&&"function"==typeof Se.register&&Se.register()}}]),ue(Ae,[{key:"addContainer",value:function(he){var Se=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof he){var De=he;(he=document.createElement("div")).classList.add(De)}return this.container.insertBefore(he,Se),he}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(he,Se,De){var Ze=this,Ye=je(he,Se,De),we=pe(Ye,4);return Ue.call(this,function(){return Ze.editor.deleteText(he,Se)},De=we[3],he=we[0],-1*(Se=we[1]))}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var he=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(he),this.container.classList.toggle("ql-disabled",!he)}},{key:"focus",value:function(){var he=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=he,this.scrollIntoView()}},{key:"format",value:function(he,Se){var De=this;return Ue.call(this,function(){var Ye=De.getSelection(!0),we=new Q.default;if(null==Ye)return we;if(k.default.query(he,k.default.Scope.BLOCK))we=De.editor.formatLine(Ye.index,Ye.length,G({},he,Se));else{if(0===Ye.length)return De.selection.format(he,Se),we;we=De.editor.formatText(Ye.index,Ye.length,G({},he,Se))}return De.setSelection(Ye,I.default.sources.SILENT),we},arguments.length>2&&void 0!==arguments[2]?arguments[2]:I.default.sources.API)}},{key:"formatLine",value:function(he,Se,De,Ze,Ye){var Ke,we=this,lt=je(he,Se,De,Ze,Ye),ct=pe(lt,4);return Se=ct[1],Ke=ct[2],Ue.call(this,function(){return we.editor.formatLine(he,Se,Ke)},Ye=ct[3],he=ct[0],0)}},{key:"formatText",value:function(he,Se,De,Ze,Ye){var Ke,we=this,lt=je(he,Se,De,Ze,Ye),ct=pe(lt,4);return Se=ct[1],Ke=ct[2],Ue.call(this,function(){return we.editor.formatText(he,Se,Ke)},Ye=ct[3],he=ct[0],0)}},{key:"getBounds",value:function(he){var De;De="number"==typeof he?this.selection.getBounds(he,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.selection.getBounds(he.index,he.length);var Ze=this.container.getBoundingClientRect();return{bottom:De.bottom-Ze.top,height:De.height,left:De.left-Ze.left,right:De.right-Ze.left,top:De.top-Ze.top,width:De.width}}},{key:"getContents",value:function(){var he=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,Se=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-he,De=je(he,Se),Ze=pe(De,2);return this.editor.getContents(he=Ze[0],Se=Ze[1])}},{key:"getFormat",value:function(){var he=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0);return"number"==typeof he?this.editor.getFormat(he,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.editor.getFormat(he.index,he.length)}},{key:"getIndex",value:function(he){return he.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(he){return this.scroll.leaf(he)}},{key:"getLine",value:function(he){return this.scroll.line(he)}},{key:"getLines",value:function(){var he=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,Se=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof he?this.scroll.lines(he.index,he.length):this.scroll.lines(he,Se)}},{key:"getModule",value:function(he){return this.theme.modules[he]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var he=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,Se=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-he,De=je(he,Se),Ze=pe(De,2);return this.editor.getText(he=Ze[0],Se=Ze[1])}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(he,Se,De){var Ze=this;return Ue.call(this,function(){return Ze.editor.insertEmbed(he,Se,De)},arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ae.sources.API,he)}},{key:"insertText",value:function(he,Se,De,Ze,Ye){var Ke,we=this,lt=je(he,0,De,Ze,Ye),ct=pe(lt,4);return Ke=ct[2],Ue.call(this,function(){return we.editor.insertText(he,Se,Ke)},Ye=ct[3],he=ct[0],Se.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(he,Se,De){this.clipboard.dangerouslyPasteHTML(he,Se,De)}},{key:"removeFormat",value:function(he,Se,De){var Ze=this,Ye=je(he,Se,De),we=pe(Ye,4);return Se=we[1],Ue.call(this,function(){return Ze.editor.removeFormat(he,Se)},De=we[3],he=we[0])}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(he){var Se=this;return Ue.call(this,function(){he=new Q.default(he);var Ze=Se.getLength(),Ye=Se.editor.deleteText(0,Ze),we=Se.editor.applyDelta(he),Ke=we.ops[we.ops.length-1];return null!=Ke&&"string"==typeof Ke.insert&&"\n"===Ke.insert[Ke.insert.length-1]&&(Se.editor.deleteText(Se.getLength()-1,1),we.delete(1)),Ye.compose(we)},arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.default.sources.API)}},{key:"setSelection",value:function(he,Se,De){if(null==he)this.selection.setRange(null,Se||Ae.sources.API);else{var Ze=je(he,Se,De),Ye=pe(Ze,4);De=Ye[3],this.selection.setRange(new A.Range(he=Ye[0],Se=Ye[1]),De),De!==I.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(he){var Se=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.default.sources.API,De=(new Q.default).insert(he);return this.setContents(De,Se)}},{key:"update",value:function(){var he=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I.default.sources.USER,Se=this.scroll.update(he);return this.selection.update(he),Se}},{key:"updateContents",value:function(he){var Se=this,De=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.default.sources.API;return Ue.call(this,function(){return he=new Q.default(he),Se.editor.applyDelta(he,De)},De,!0)}}]),Ae}();function ve(Ae,ke){if((ke=(0,j.default)(!0,{container:Ae,modules:{clipboard:!0,keyboard:!0,history:!0}},ke)).theme&&ke.theme!==ae.DEFAULTS.theme){if(ke.theme=ae.import("themes/"+ke.theme),null==ke.theme)throw new Error("Invalid theme "+ke.theme+". Did you register it?")}else ke.theme=_e.default;var he=(0,j.default)(!0,{},ke.theme.DEFAULTS);[he,ke].forEach(function(Ze){Ze.modules=Ze.modules||{},Object.keys(Ze.modules).forEach(function(Ye){!0===Ze.modules[Ye]&&(Ze.modules[Ye]={})})});var De=Object.keys(he.modules).concat(Object.keys(ke.modules)).reduce(function(Ze,Ye){var we=ae.import("modules/"+Ye);return null==we?B.error("Cannot load "+Ye+" module. Are you sure you registered it?"):Ze[Ye]=we.DEFAULTS||{},Ze},{});return null!=ke.modules&&ke.modules.toolbar&&ke.modules.toolbar.constructor!==Object&&(ke.modules.toolbar={container:ke.modules.toolbar}),ke=(0,j.default)(!0,{},ae.DEFAULTS,{modules:De},he,ke),["bounds","container","scrollingContainer"].forEach(function(Ze){"string"==typeof ke[Ze]&&(ke[Ze]=document.querySelector(ke[Ze]))}),ke.modules=Object.keys(ke.modules).reduce(function(Ze,Ye){return ke.modules[Ye]&&(Ze[Ye]=ke.modules[Ye]),Ze},{}),ke}function Ue(Ae,ke,he,Se){if(this.options.strict&&!this.isEnabled()&&ke===I.default.sources.USER)return new Q.default;var De=null==he?null:this.getSelection(),Ze=this.editor.delta,Ye=Ae();if(null!=De&&(!0===he&&(he=De.index),null==Se?De=dt(De,Ye,ke):0!==Se&&(De=dt(De,he,Se,ke)),this.setSelection(De,I.default.sources.SILENT)),Ye.length()>0){var we,lt,Ke=[I.default.events.TEXT_CHANGE,Ye,Ze,ke];(we=this.emitter).emit.apply(we,[I.default.events.EDITOR_CHANGE].concat(Ke)),ke!==I.default.sources.SILENT&&(lt=this.emitter).emit.apply(lt,Ke)}return Ye}function je(Ae,ke,he,Se,De){var Ze={};return"number"==typeof Ae.index&&"number"==typeof Ae.length?"number"!=typeof ke?(De=Se,Se=he,he=ke,ke=Ae.length,Ae=Ae.index):(ke=Ae.length,Ae=Ae.index):"number"!=typeof ke&&(De=Se,Se=he,he=ke,ke=0),"object"===(typeof he>"u"?"undefined":ye(he))?(Ze=he,De=Se):"string"==typeof he&&(null!=Se?Ze[he]=Se:De=he),[Ae,ke,Ze,De=De||I.default.sources.API]}function dt(Ae,ke,he,Se){if(null==Ae)return null;var De=void 0,Ze=void 0;if(ke instanceof Q.default){var Ye=[Ae.index,Ae.index+Ae.length].map(function(ct){return ke.transformPosition(ct,Se!==I.default.sources.USER)}),we=pe(Ye,2);De=we[0],Ze=we[1]}else{var Ke=[Ae.index,Ae.index+Ae.length].map(function(ct){return ct<ke||ct===ke&&Se===I.default.sources.USER?ct:he>=0?ct+he:Math.max(ke,ct+he)}),lt=pe(Ke,2);De=lt[0],Ze=lt[1]}return new A.Range(De,Ze-De)}ae.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},ae.events=I.default.events,ae.sources=I.default.sources,ae.version="1.3.7",ae.imports={delta:Q.default,parchment:k.default,"core/module":N.default,"core/theme":_e.default},Y.expandConfig=ve,Y.overload=je,Y.default=ae},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=function(){function O(k,A){for(var V=0;V<A.length;V++){var R=A[V];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(k,R.key,R)}}return function(k,A,V){return A&&O(k.prototype,A),V&&O(k,V),k}}(),pe=function O(k,A,V){null===k&&(k=Function.prototype);var R=Object.getOwnPropertyDescriptor(k,A);if(void 0===R){var j=Object.getPrototypeOf(k);return null===j?void 0:O(j,A,V)}if("value"in R)return R.value;var ce=R.get;return void 0===ce?void 0:ce.call(V)},ee=F(Z(7)),q=F(Z(0));function F(O){return O&&O.__esModule?O:{default:O}}var N=function(O){function k(){return function x(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")}(this,k),function I(O,k){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!k||"object"!=typeof k&&"function"!=typeof k?O:k}(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return function $(O,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function, not "+typeof k);O.prototype=Object.create(k&&k.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(O,k):O.__proto__=k)}(k,O),ye(k,[{key:"formatAt",value:function(V,R,j,ce){if(k.compare(this.statics.blotName,j)<0&&q.default.query(j,q.default.Scope.BLOT)){var ie=this.isolate(V,R);ce&&ie.wrap(j,ce)}else pe(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"formatAt",this).call(this,V,R,j,ce)}},{key:"optimize",value:function(V){if(pe(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,V),this.parent instanceof k&&k.compare(this.statics.blotName,this.parent.statics.blotName)>0){var R=this.parent.isolate(this.offset(),this.length());this.moveChildren(R),R.wrap(this)}}}],[{key:"compare",value:function(V,R){var j=k.order.indexOf(V),ce=k.order.indexOf(R);return j>=0||ce>=0?j-ce:V===R?0:V<R?-1:1}}]),k}(q.default.Inline);N.allowedChildren=[N,q.default.Embed,ee.default],N.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],Y.default=N},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var F=function(x){function I(){return function ee(x,I){if(!(x instanceof I))throw new TypeError("Cannot call a class as a function")}(this,I),function Q(x,I){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!I||"object"!=typeof I&&"function"!=typeof I?x:I}(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return function q(x,I){if("function"!=typeof I&&null!==I)throw new TypeError("Super expression must either be null or a function, not "+typeof I);x.prototype=Object.create(I&&I.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(x,I):x.__proto__=I)}(I,x),I}(function ue(x){return x&&x.__esModule?x:{default:x}}(Z(0)).default.Text);Y.default=F},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=function(){function A(V,R){for(var j=0;j<R.length;j++){var ce=R[j];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(V,ce.key,ce)}}return function(V,R,j){return R&&A(V.prototype,R),j&&A(V,j),V}}(),pe=function A(V,R,j){null===V&&(V=Function.prototype);var ce=Object.getOwnPropertyDescriptor(V,R);if(void 0===ce){var ie=Object.getPrototypeOf(V);return null===ie?void 0:A(ie,R,j)}if("value"in ce)return ce.value;var se=ce.get;return void 0===se?void 0:se.call(j)},ee=F(Z(54));function F(A){return A&&A.__esModule?A:{default:A}}var N=(0,F(Z(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(A){document.addEventListener(A,function(){for(var V=arguments.length,R=Array(V),j=0;j<V;j++)R[j]=arguments[j];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(ce){var ie;ce.__quill&&ce.__quill.emitter&&(ie=ce.__quill.emitter).handleDOM.apply(ie,R)})})});var k=function(A){function V(){!function x(A,V){if(!(A instanceof V))throw new TypeError("Cannot call a class as a function")}(this,V);var R=function I(A,V){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!V||"object"!=typeof V&&"function"!=typeof V?A:V}(this,(V.__proto__||Object.getPrototypeOf(V)).call(this));return R.listeners={},R.on("error",N.error),R}return function $(A,V){if("function"!=typeof V&&null!==V)throw new TypeError("Super expression must either be null or a function, not "+typeof V);A.prototype=Object.create(V&&V.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(A,V):A.__proto__=V)}(V,A),ye(V,[{key:"emit",value:function(){N.log.apply(N,arguments),pe(V.prototype.__proto__||Object.getPrototypeOf(V.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(j){for(var ce=arguments.length,ie=Array(ce>1?ce-1:0),se=1;se<ce;se++)ie[se-1]=arguments[se];(this.listeners[j.type]||[]).forEach(function(_e){var J=_e.node,G=_e.handler;(j.target===J||J.contains(j.target))&&G.apply(void 0,[j].concat(ie))})}},{key:"listenDOM",value:function(j,ce,ie){this.listeners[j]||(this.listeners[j]=[]),this.listeners[j].push({node:ce,handler:ie})}}]),V}(ee.default);k.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},k.sources={API:"api",SILENT:"silent",USER:"user"},Y.default=k},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var pe=function ue(ee){var Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function ye(ue,ee){if(!(ue instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,ue),this.quill=ee,this.options=Q};pe.DEFAULTS={},Y.default=pe},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=["error","warn","log","info"],pe="warn";function ue(Q){if(ye.indexOf(Q)<=ye.indexOf(pe)){for(var q,F=arguments.length,x=Array(F>1?F-1:0),I=1;I<F;I++)x[I-1]=arguments[I];(q=console)[Q].apply(q,x)}}function ee(Q){return ye.reduce(function(q,F){return q[F]=ue.bind(console,F,Q),q},{})}ue.level=ee.level=function(Q){pe=Q},Y.default=ee},function(qe,Y,Z){var ye=Array.prototype.slice,pe=Z(52),ue=Z(53),ee=qe.exports=function(x,I,$){return $||($={}),x===I||(x instanceof Date&&I instanceof Date?x.getTime()===I.getTime():!x||!I||"object"!=typeof x&&"object"!=typeof I?$.strict?x===I:x==I:function F(x,I,$){var N,O;if(Q(x)||Q(I)||x.prototype!==I.prototype)return!1;if(ue(x))return!!ue(I)&&(x=ye.call(x),I=ye.call(I),ee(x,I,$));if(q(x)){if(!q(I)||x.length!==I.length)return!1;for(N=0;N<x.length;N++)if(x[N]!==I[N])return!1;return!0}try{var k=pe(x),A=pe(I)}catch{return!1}if(k.length!=A.length)return!1;for(k.sort(),A.sort(),N=k.length-1;N>=0;N--)if(k[N]!=A[N])return!1;for(N=k.length-1;N>=0;N--)if(!ee(x[O=k[N]],I[O],$))return!1;return typeof x==typeof I}(x,I,$))};function Q(x){return null==x}function q(x){return!(!x||"object"!=typeof x||"number"!=typeof x.length||"function"!=typeof x.copy||"function"!=typeof x.slice||x.length>0&&"number"!=typeof x[0])}},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=Z(1),pe=function(){function ue(ee,Q,q){void 0===q&&(q={}),this.attrName=ee,this.keyName=Q,this.scope=null!=q.scope?q.scope&ye.Scope.LEVEL|ye.Scope.TYPE&ye.Scope.ATTRIBUTE:ye.Scope.ATTRIBUTE,null!=q.whitelist&&(this.whitelist=q.whitelist)}return ue.keys=function(ee){return[].map.call(ee.attributes,function(Q){return Q.name})},ue.prototype.add=function(ee,Q){return!!this.canAdd(ee,Q)&&(ee.setAttribute(this.keyName,Q),!0)},ue.prototype.canAdd=function(ee,Q){return null!=ye.query(ee,ye.Scope.BLOT&(this.scope|ye.Scope.TYPE))&&(null==this.whitelist||("string"==typeof Q?this.whitelist.indexOf(Q.replace(/["']/g,""))>-1:this.whitelist.indexOf(Q)>-1))},ue.prototype.remove=function(ee){ee.removeAttribute(this.keyName)},ue.prototype.value=function(ee){var Q=ee.getAttribute(this.keyName);return this.canAdd(ee,Q)&&Q?Q:""},ue}();Y.default=pe},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.default=Y.Code=void 0;var ye=function(){return function(_e,J){if(Array.isArray(_e))return _e;if(Symbol.iterator in Object(_e))return function se(_e,J){var G=[],U=!0,B=!1,ae=void 0;try{for(var Ue,ve=_e[Symbol.iterator]();!(U=(Ue=ve.next()).done)&&(G.push(Ue.value),!J||G.length!==J);U=!0);}catch(je){B=!0,ae=je}finally{try{!U&&ve.return&&ve.return()}finally{if(B)throw ae}}return G}(_e,J);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),pe=function(){function se(_e,J){for(var G=0;G<J.length;G++){var U=J[G];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(_e,U.key,U)}}return function(_e,J,G){return J&&se(_e.prototype,J),G&&se(_e,G),_e}}(),ue=function se(_e,J,G){null===_e&&(_e=Function.prototype);var U=Object.getOwnPropertyDescriptor(_e,J);if(void 0===U){var B=Object.getPrototypeOf(_e);return null===B?void 0:se(B,J,G)}if("value"in U)return U.value;var ae=U.get;return void 0===ae?void 0:ae.call(G)},Q=A(Z(2)),F=A(Z(0)),I=A(Z(4)),N=A(Z(6)),k=A(Z(7));function A(se){return se&&se.__esModule?se:{default:se}}function V(se,_e){if(!(se instanceof _e))throw new TypeError("Cannot call a class as a function")}function R(se,_e){if(!se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_e||"object"!=typeof _e&&"function"!=typeof _e?se:_e}function j(se,_e){if("function"!=typeof _e&&null!==_e)throw new TypeError("Super expression must either be null or a function, not "+typeof _e);se.prototype=Object.create(_e&&_e.prototype,{constructor:{value:se,enumerable:!1,writable:!0,configurable:!0}}),_e&&(Object.setPrototypeOf?Object.setPrototypeOf(se,_e):se.__proto__=_e)}var ce=function(se){function _e(){return V(this,_e),R(this,(_e.__proto__||Object.getPrototypeOf(_e)).apply(this,arguments))}return j(_e,se),_e}(N.default);ce.blotName="code",ce.tagName="CODE";var ie=function(se){function _e(){return V(this,_e),R(this,(_e.__proto__||Object.getPrototypeOf(_e)).apply(this,arguments))}return j(_e,se),pe(_e,[{key:"delta",value:function(){var G=this,U=this.domNode.textContent;return U.endsWith("\n")&&(U=U.slice(0,-1)),U.split("\n").reduce(function(B,ae){return B.insert(ae).insert("\n",G.formats())},new Q.default)}},{key:"format",value:function(G,U){if(G!==this.statics.blotName||!U){var B=this.descendant(k.default,this.length()-1),ve=ye(B,1)[0];ve?.deleteAt(ve.length()-1,1),ue(_e.prototype.__proto__||Object.getPrototypeOf(_e.prototype),"format",this).call(this,G,U)}}},{key:"formatAt",value:function(G,U,B,ae){if(0!==U&&null!=F.default.query(B,F.default.Scope.BLOCK)&&(B!==this.statics.blotName||ae!==this.statics.formats(this.domNode))){var ve=this.newlineIndex(G);if(!(ve<0||ve>=G+U)){var Ue=this.newlineIndex(G,!0)+1,je=ve-Ue+1,dt=this.isolate(Ue,je),Ae=dt.next;dt.format(B,ae),Ae instanceof _e&&Ae.formatAt(0,G-Ue+U-je,B,ae)}}}},{key:"insertAt",value:function(G,U,B){if(null==B){var ae=this.descendant(k.default,G),ve=ye(ae,2);ve[0].insertAt(ve[1],U)}}},{key:"length",value:function(){var G=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?G:G+1}},{key:"newlineIndex",value:function(G){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,G).lastIndexOf("\n");var B=this.domNode.textContent.slice(G).indexOf("\n");return B>-1?G+B:-1}},{key:"optimize",value:function(G){this.domNode.textContent.endsWith("\n")||this.appendChild(F.default.create("text","\n")),ue(_e.prototype.__proto__||Object.getPrototypeOf(_e.prototype),"optimize",this).call(this,G);var U=this.next;null!=U&&U.prev===this&&U.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===U.statics.formats(U.domNode)&&(U.optimize(G),U.moveChildren(this),U.remove())}},{key:"replace",value:function(G){ue(_e.prototype.__proto__||Object.getPrototypeOf(_e.prototype),"replace",this).call(this,G),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(U){var B=F.default.find(U);null==B?U.parentNode.removeChild(U):B instanceof F.default.Embed?B.remove():B.unwrap()})}}],[{key:"create",value:function(G){var U=ue(_e.__proto__||Object.getPrototypeOf(_e),"create",this).call(this,G);return U.setAttribute("spellcheck",!1),U}},{key:"formats",value:function(){return!0}}]),_e}(I.default);ie.blotName="code-block",ie.tagName="PRE",ie.TAB="  ",Y.Code=ce,Y.default=ie},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Ae){return typeof Ae}:function(Ae){return Ae&&"function"==typeof Symbol&&Ae.constructor===Symbol&&Ae!==Symbol.prototype?"symbol":typeof Ae},pe=function(){return function(ke,he){if(Array.isArray(ke))return ke;if(Symbol.iterator in Object(ke))return function Ae(ke,he){var Se=[],De=!0,Ze=!1,Ye=void 0;try{for(var Ke,we=ke[Symbol.iterator]();!(De=(Ke=we.next()).done)&&(Se.push(Ke.value),!he||Se.length!==he);De=!0);}catch(lt){Ze=!0,Ye=lt}finally{try{!De&&we.return&&we.return()}finally{if(Ze)throw Ye}}return Se}(ke,he);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ue=function(){function Ae(ke,he){for(var Se=0;Se<he.length;Se++){var De=he[Se];De.enumerable=De.enumerable||!1,De.configurable=!0,"value"in De&&(De.writable=!0),Object.defineProperty(ke,De.key,De)}}return function(ke,he,Se){return he&&Ae(ke.prototype,he),Se&&Ae(ke,Se),ke}}(),Q=U(Z(2)),F=U(Z(20)),I=U(Z(0)),N=U(Z(13)),k=U(Z(24)),A=Z(4),V=U(A),j=U(Z(16)),ie=U(Z(21)),_e=U(Z(11)),G=U(Z(3));function U(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}var ve=/^[ -~]*$/,Ue=function(){function Ae(ke){(function ae(Ae,ke){if(!(Ae instanceof ke))throw new TypeError("Cannot call a class as a function")})(this,Ae),this.scroll=ke,this.delta=this.getDelta()}return ue(Ae,[{key:"applyDelta",value:function(he){var Se=this,De=!1;this.scroll.update();var Ze=this.scroll.length();return this.scroll.batchStart(),(he=function dt(Ae){return Ae.reduce(function(ke,he){if(1===he.insert){var Se=(0,ie.default)(he.attributes);return delete Se.image,ke.insert({image:he.attributes.image},Se)}if(null!=he.attributes&&(!0===he.attributes.list||!0===he.attributes.bullet)&&((he=(0,ie.default)(he)).attributes.list?he.attributes.list="ordered":(he.attributes.list="bullet",delete he.attributes.bullet)),"string"==typeof he.insert){var De=he.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return ke.insert(De,he.attributes)}return ke.push(he)},new Q.default)}(he)).reduce(function(Ye,we){var Ke=we.retain||we.delete||we.insert.length||1,lt=we.attributes||{};if(null!=we.insert){if("string"==typeof we.insert){var ct=we.insert;ct.endsWith("\n")&&De&&(De=!1,ct=ct.slice(0,-1)),Ye>=Ze&&!ct.endsWith("\n")&&(De=!0),Se.scroll.insertAt(Ye,ct);var It=Se.scroll.line(Ye),on=pe(It,2),Xn=on[0],ci=on[1],Hi=(0,G.default)({},(0,A.bubbleFormats)(Xn));if(Xn instanceof V.default){var cs=Xn.descendant(I.default.Leaf,ci),po=pe(cs,1);Hi=(0,G.default)(Hi,(0,A.bubbleFormats)(po[0]))}lt=F.default.attributes.diff(Hi,lt)||{}}else if("object"===ye(we.insert)){var yt=Object.keys(we.insert)[0];if(null==yt)return Ye;Se.scroll.insertAt(Ye,yt,we.insert[yt])}Ze+=Ke}return Object.keys(lt).forEach(function(Ct){Se.scroll.formatAt(Ye,Ke,Ct,lt[Ct])}),Ye+Ke},0),he.reduce(function(Ye,we){return"number"==typeof we.delete?(Se.scroll.deleteAt(Ye,we.delete),Ye):Ye+(we.retain||we.insert.length||1)},0),this.scroll.batchEnd(),this.update(he)}},{key:"deleteText",value:function(he,Se){return this.scroll.deleteAt(he,Se),this.update((new Q.default).retain(he).delete(Se))}},{key:"formatLine",value:function(he,Se){var De=this,Ze=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(Ze).forEach(function(Ye){if(null==De.scroll.whitelist||De.scroll.whitelist[Ye]){var we=De.scroll.lines(he,Math.max(Se,1)),Ke=Se;we.forEach(function(lt){var ct=lt.length();if(lt instanceof N.default){var It=he-lt.offset(De.scroll),on=lt.newlineIndex(It+Ke)-It+1;lt.formatAt(It,on,Ye,Ze[Ye])}else lt.format(Ye,Ze[Ye]);Ke-=ct})}}),this.scroll.optimize(),this.update((new Q.default).retain(he).retain(Se,(0,ie.default)(Ze)))}},{key:"formatText",value:function(he,Se){var De=this,Ze=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(Ze).forEach(function(Ye){De.scroll.formatAt(he,Se,Ye,Ze[Ye])}),this.update((new Q.default).retain(he).retain(Se,(0,ie.default)(Ze)))}},{key:"getContents",value:function(he,Se){return this.delta.slice(he,he+Se)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(he,Se){return he.concat(Se.delta())},new Q.default)}},{key:"getFormat",value:function(he){var Se=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,De=[],Ze=[];0===Se?this.scroll.path(he).forEach(function(we){var lt=pe(we,1)[0];lt instanceof V.default?De.push(lt):lt instanceof I.default.Leaf&&Ze.push(lt)}):(De=this.scroll.lines(he,Se),Ze=this.scroll.descendants(I.default.Leaf,he,Se));var Ye=[De,Ze].map(function(we){if(0===we.length)return{};for(var Ke=(0,A.bubbleFormats)(we.shift());Object.keys(Ke).length>0;){var lt=we.shift();if(null==lt)return Ke;Ke=je((0,A.bubbleFormats)(lt),Ke)}return Ke});return G.default.apply(G.default,Ye)}},{key:"getText",value:function(he,Se){return this.getContents(he,Se).filter(function(De){return"string"==typeof De.insert}).map(function(De){return De.insert}).join("")}},{key:"insertEmbed",value:function(he,Se,De){return this.scroll.insertAt(he,Se,De),this.update((new Q.default).retain(he).insert(function B(Ae,ke,he){return ke in Ae?Object.defineProperty(Ae,ke,{value:he,enumerable:!0,configurable:!0,writable:!0}):Ae[ke]=he,Ae}({},Se,De)))}},{key:"insertText",value:function(he,Se){var De=this,Ze=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Se=Se.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(he,Se),Object.keys(Ze).forEach(function(Ye){De.scroll.formatAt(he,Se.length,Ye,Ze[Ye])}),this.update((new Q.default).retain(he).insert(Se,(0,ie.default)(Ze)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var he=this.scroll.children.head;return!(he.statics.blotName!==V.default.blotName||he.children.length>1)&&he.children.head instanceof j.default}},{key:"removeFormat",value:function(he,Se){var De=this.getText(he,Se),Ze=this.scroll.line(he+Se),Ye=pe(Ze,2),we=Ye[0],Ke=Ye[1],lt=0,ct=new Q.default;null!=we&&(lt=we instanceof N.default?we.newlineIndex(Ke)-Ke+1:we.length()-Ke,ct=we.delta().slice(Ke,Ke+lt-1).insert("\n"));var on=this.getContents(he,Se+lt).diff((new Q.default).insert(De).concat(ct)),Xn=(new Q.default).retain(he).concat(on);return this.applyDelta(Xn)}},{key:"update",value:function(he){var Se=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],De=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,Ze=this.delta;if(1===Se.length&&"characterData"===Se[0].type&&Se[0].target.data.match(ve)&&I.default.find(Se[0].target)){var Ye=I.default.find(Se[0].target),we=(0,A.bubbleFormats)(Ye),Ke=Ye.offset(this.scroll),lt=Se[0].oldValue.replace(k.default.CONTENTS,""),ct=(new Q.default).insert(lt),It=(new Q.default).insert(Ye.value());he=(new Q.default).retain(Ke).concat(ct.diff(It,De)).reduce(function(Xn,ci){return ci.insert?Xn.insert(ci.insert,we):Xn.push(ci)},new Q.default),this.delta=Ze.compose(he)}else this.delta=this.getDelta(),(!he||!(0,_e.default)(Ze.compose(he),this.delta))&&(he=Ze.diff(this.delta,De));return he}}]),Ae}();function je(Ae,ke){return Object.keys(ke).reduce(function(he,Se){return null==Ae[Se]||(ke[Se]===Ae[Se]?he[Se]=ke[Se]:Array.isArray(ke[Se])?ke[Se].indexOf(Ae[Se])<0&&(he[Se]=ke[Se].concat([Ae[Se]])):he[Se]=[ke[Se],Ae[Se]]),he},{})}Y.default=Ue},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.default=Y.Range=void 0;var ye=function(){return function(_e,J){if(Array.isArray(_e))return _e;if(Symbol.iterator in Object(_e))return function se(_e,J){var G=[],U=!0,B=!1,ae=void 0;try{for(var Ue,ve=_e[Symbol.iterator]();!(U=(Ue=ve.next()).done)&&(G.push(Ue.value),!J||G.length!==J);U=!0);}catch(je){B=!0,ae=je}finally{try{!U&&ve.return&&ve.return()}finally{if(B)throw ae}}return G}(_e,J);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),pe=function(){function se(_e,J){for(var G=0;G<J.length;G++){var U=J[G];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(_e,U.key,U)}}return function(_e,J,G){return J&&se(_e.prototype,J),G&&se(_e,G),_e}}(),ee=k(Z(0)),q=k(Z(21)),x=k(Z(11)),$=k(Z(8));function k(se){return se&&se.__esModule?se:{default:se}}function A(se){if(Array.isArray(se)){for(var _e=0,J=Array(se.length);_e<se.length;_e++)J[_e]=se[_e];return J}return Array.from(se)}function V(se,_e){if(!(se instanceof _e))throw new TypeError("Cannot call a class as a function")}var R=(0,k(Z(10)).default)("quill:selection"),j=function se(_e){var J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;V(this,se),this.index=_e,this.length=J},ce=function(){function se(_e,J){var G=this;V(this,se),this.emitter=J,this.scroll=_e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=ee.default.create("cursor",this),this.lastRange=this.savedRange=new j(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){G.mouseDown||setTimeout(G.update.bind(G,$.default.sources.USER),1)}),this.emitter.on($.default.events.EDITOR_CHANGE,function(U,B){U===$.default.events.TEXT_CHANGE&&B.length()>0&&G.update($.default.sources.SILENT)}),this.emitter.on($.default.events.SCROLL_BEFORE_UPDATE,function(){if(G.hasFocus()){var U=G.getNativeRange();null!=U&&U.start.node!==G.cursor.textNode&&G.emitter.once($.default.events.SCROLL_UPDATE,function(){try{G.setNativeRange(U.start.node,U.start.offset,U.end.node,U.end.offset)}catch{}})}}),this.emitter.on($.default.events.SCROLL_OPTIMIZE,function(U,B){if(B.range){var ae=B.range;G.setNativeRange(ae.startNode,ae.startOffset,ae.endNode,ae.endOffset)}}),this.update($.default.sources.SILENT)}return pe(se,[{key:"handleComposition",value:function(){var J=this;this.root.addEventListener("compositionstart",function(){J.composing=!0}),this.root.addEventListener("compositionend",function(){if(J.composing=!1,J.cursor.parent){var G=J.cursor.restore();if(!G)return;setTimeout(function(){J.setNativeRange(G.startNode,G.startOffset,G.endNode,G.endOffset)},1)}})}},{key:"handleDragging",value:function(){var J=this;this.emitter.listenDOM("mousedown",document.body,function(){J.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){J.mouseDown=!1,J.update($.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(J,G){if(null==this.scroll.whitelist||this.scroll.whitelist[J]){this.scroll.update();var U=this.getNativeRange();if(null!=U&&U.native.collapsed&&!ee.default.query(J,ee.default.Scope.BLOCK)){if(U.start.node!==this.cursor.textNode){var B=ee.default.find(U.start.node,!1);if(null==B)return;if(B instanceof ee.default.Leaf){var ae=B.split(U.start.offset);B.parent.insertBefore(this.cursor,ae)}else B.insertBefore(this.cursor,U.start.node);this.cursor.attach()}this.cursor.format(J,G),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(J){var G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,U=this.scroll.length();J=Math.min(J,U-1),G=Math.min(J+G,U-1)-J;var B=void 0,ae=this.scroll.leaf(J),ve=ye(ae,2),Ue=ve[0],je=ve[1];if(null==Ue)return null;var dt=Ue.position(je,!0),Ae=ye(dt,2);B=Ae[0],je=Ae[1];var ke=document.createRange();if(G>0){ke.setStart(B,je);var he=this.scroll.leaf(J+G),Se=ye(he,2);if(null==(Ue=Se[0]))return null;var De=Ue.position(je=Se[1],!0),Ze=ye(De,2);return ke.setEnd(B=Ze[0],je=Ze[1]),ke.getBoundingClientRect()}var Ye="left",we=void 0;return B instanceof Text?(je<B.data.length?(ke.setStart(B,je),ke.setEnd(B,je+1)):(ke.setStart(B,je-1),ke.setEnd(B,je),Ye="right"),we=ke.getBoundingClientRect()):(we=Ue.domNode.getBoundingClientRect(),je>0&&(Ye="right")),{bottom:we.top+we.height,height:we.height,left:we[Ye],right:we[Ye],top:we.top,width:0}}},{key:"getNativeRange",value:function(){var J=document.getSelection();if(null==J||J.rangeCount<=0)return null;var G=J.getRangeAt(0);if(null==G)return null;var U=this.normalizeNative(G);return R.info("getNativeRange",U),U}},{key:"getRange",value:function(){var J=this.getNativeRange();return null==J?[null,null]:[this.normalizedToRange(J),J]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(J){var G=this,U=[[J.start.node,J.start.offset]];J.native.collapsed||U.push([J.end.node,J.end.offset]);var B=U.map(function(Ue){var je=ye(Ue,2),dt=je[0],Ae=je[1],ke=ee.default.find(dt,!0),he=ke.offset(G.scroll);return 0===Ae?he:ke instanceof ee.default.Container?he+ke.length():he+ke.index(dt,Ae)}),ae=Math.min(Math.max.apply(Math,A(B)),this.scroll.length()-1),ve=Math.min.apply(Math,[ae].concat(A(B)));return new j(ve,ae-ve)}},{key:"normalizeNative",value:function(J){if(!ie(this.root,J.startContainer)||!J.collapsed&&!ie(this.root,J.endContainer))return null;var G={start:{node:J.startContainer,offset:J.startOffset},end:{node:J.endContainer,offset:J.endOffset},native:J};return[G.start,G.end].forEach(function(U){for(var B=U.node,ae=U.offset;!(B instanceof Text)&&B.childNodes.length>0;)if(B.childNodes.length>ae)B=B.childNodes[ae],ae=0;else{if(B.childNodes.length!==ae)break;ae=(B=B.lastChild)instanceof Text?B.data.length:B.childNodes.length+1}U.node=B,U.offset=ae}),G}},{key:"rangeToNative",value:function(J){var G=this,U=J.collapsed?[J.index]:[J.index,J.index+J.length],B=[],ae=this.scroll.length();return U.forEach(function(ve,Ue){ve=Math.min(ae-1,ve);var dt=G.scroll.leaf(ve),Ae=ye(dt,2),he=Ae[1],Se=Ae[0].position(he,0!==Ue),De=ye(Se,2);B.push(De[0],he=De[1])}),B.length<2&&(B=B.concat(B)),B}},{key:"scrollIntoView",value:function(J){var G=this.lastRange;if(null!=G){var U=this.getBounds(G.index,G.length);if(null!=U){var B=this.scroll.length()-1,ae=this.scroll.line(Math.min(G.index,B)),Ue=ye(ae,1)[0],je=Ue;if(G.length>0){var dt=this.scroll.line(Math.min(G.index+G.length,B));je=ye(dt,1)[0]}if(null!=Ue&&null!=je){var ke=J.getBoundingClientRect();U.top<ke.top?J.scrollTop-=ke.top-U.top:U.bottom>ke.bottom&&(J.scrollTop+=U.bottom-ke.bottom)}}}}},{key:"setNativeRange",value:function(J,G){var U=arguments.length>2&&void 0!==arguments[2]?arguments[2]:J,B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G,ae=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(R.info("setNativeRange",J,G,U,B),null==J||null!=this.root.parentNode&&null!=J.parentNode&&null!=U.parentNode){var ve=document.getSelection();if(null!=ve)if(null!=J){this.hasFocus()||this.root.focus();var Ue=(this.getNativeRange()||{}).native;if(null==Ue||ae||J!==Ue.startContainer||G!==Ue.startOffset||U!==Ue.endContainer||B!==Ue.endOffset){"BR"==J.tagName&&(G=[].indexOf.call(J.parentNode.childNodes,J),J=J.parentNode),"BR"==U.tagName&&(B=[].indexOf.call(U.parentNode.childNodes,U),U=U.parentNode);var je=document.createRange();je.setStart(J,G),je.setEnd(U,B),ve.removeAllRanges(),ve.addRange(je)}}else ve.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(J){var G=arguments.length>1&&void 0!==arguments[1]&&arguments[1],U=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$.default.sources.API;if("string"==typeof G&&(U=G,G=!1),R.info("setRange",J),null!=J){var B=this.rangeToNative(J);this.setNativeRange.apply(this,A(B).concat([G]))}else this.setNativeRange(null);this.update(U)}},{key:"update",value:function(){var J=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$.default.sources.USER,G=this.lastRange,U=this.getRange(),B=ye(U,2),ve=B[1];if(this.lastRange=B[0],null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,x.default)(G,this.lastRange)){var Ue;!this.composing&&null!=ve&&ve.native.collapsed&&ve.start.node!==this.cursor.textNode&&this.cursor.restore();var dt,je=[$.default.events.SELECTION_CHANGE,(0,q.default)(this.lastRange),(0,q.default)(G),J];(Ue=this.emitter).emit.apply(Ue,[$.default.events.EDITOR_CHANGE].concat(je)),J!==$.default.sources.SILENT&&(dt=this.emitter).emit.apply(dt,je)}}}]),se}();function ie(se,_e){return _e instanceof Text&&(_e=_e.parentNode),se.contains(_e)}Y.Range=j,Y.default=ce},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=function(){function $(N,O){for(var k=0;k<O.length;k++){var A=O[k];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(N,A.key,A)}}return function(N,O,k){return O&&$(N.prototype,O),k&&$(N,k),N}}(),pe=function $(N,O,k){null===N&&(N=Function.prototype);var A=Object.getOwnPropertyDescriptor(N,O);if(void 0===A){var V=Object.getPrototypeOf(N);return null===V?void 0:$(V,O,k)}if("value"in A)return A.value;var R=A.get;return void 0===R?void 0:R.call(k)};var I=function($){function N(){return function q($,N){if(!($ instanceof N))throw new TypeError("Cannot call a class as a function")}(this,N),function F($,N){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!N||"object"!=typeof N&&"function"!=typeof N?$:N}(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return function x($,N){if("function"!=typeof N&&null!==N)throw new TypeError("Super expression must either be null or a function, not "+typeof N);$.prototype=Object.create(N&&N.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf($,N):$.__proto__=N)}(N,$),ye(N,[{key:"insertInto",value:function(k,A){0===k.children.length?pe(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertInto",this).call(this,k,A):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),N}(function Q($){return $&&$.__esModule?$:{default:$}}(Z(0)).default.Embed);I.blotName="break",I.tagName="BR",Y.default=I},function(qe,Y,Z){"use strict";var F,ye=this&&this.__extends||(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,I){x.__proto__=I}||function(x,I){for(var $ in I)I.hasOwnProperty($)&&(x[$]=I[$])},function(x,I){function $(){this.constructor=x}F(x,I),x.prototype=null===I?Object.create(I):($.prototype=I.prototype,new $)});Object.defineProperty(Y,"__esModule",{value:!0});var pe=Z(44),ue=Z(30),ee=Z(1),Q=function(F){function x(I){var $=F.call(this,I)||this;return $.build(),$}return ye(x,F),x.prototype.appendChild=function(I){this.insertBefore(I)},x.prototype.attach=function(){F.prototype.attach.call(this),this.children.forEach(function(I){I.attach()})},x.prototype.build=function(){var I=this;this.children=new pe.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function($){try{var N=q($);I.insertBefore(N,I.children.head||void 0)}catch(O){if(O instanceof ee.ParchmentError)return;throw O}})},x.prototype.deleteAt=function(I,$){if(0===I&&$===this.length())return this.remove();this.children.forEachAt(I,$,function(N,O,k){N.deleteAt(O,k)})},x.prototype.descendant=function(I,$){var N=this.children.find($),O=N[0],k=N[1];return null==I.blotName&&I(O)||null!=I.blotName&&O instanceof I?[O,k]:O instanceof x?O.descendant(I,k):[null,-1]},x.prototype.descendants=function(I,$,N){void 0===$&&($=0),void 0===N&&(N=Number.MAX_VALUE);var O=[],k=N;return this.children.forEachAt($,N,function(A,V,R){(null==I.blotName&&I(A)||null!=I.blotName&&A instanceof I)&&O.push(A),A instanceof x&&(O=O.concat(A.descendants(I,V,k))),k-=R}),O},x.prototype.detach=function(){this.children.forEach(function(I){I.detach()}),F.prototype.detach.call(this)},x.prototype.formatAt=function(I,$,N,O){this.children.forEachAt(I,$,function(k,A,V){k.formatAt(A,V,N,O)})},x.prototype.insertAt=function(I,$,N){var O=this.children.find(I),k=O[0];if(k)k.insertAt(O[1],$,N);else{var V=null==N?ee.create("text",$):ee.create($,N);this.appendChild(V)}},x.prototype.insertBefore=function(I,$){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(N){return I instanceof N}))throw new ee.ParchmentError("Cannot insert "+I.statics.blotName+" into "+this.statics.blotName);I.insertInto(this,$)},x.prototype.length=function(){return this.children.reduce(function(I,$){return I+$.length()},0)},x.prototype.moveChildren=function(I,$){this.children.forEach(function(N){I.insertBefore(N,$)})},x.prototype.optimize=function(I){if(F.prototype.optimize.call(this,I),0===this.children.length)if(null!=this.statics.defaultChild){var $=ee.create(this.statics.defaultChild);this.appendChild($),$.optimize(I)}else this.remove()},x.prototype.path=function(I,$){void 0===$&&($=!1);var N=this.children.find(I,$),O=N[0],k=N[1],A=[[this,I]];return O instanceof x?A.concat(O.path(k,$)):(null!=O&&A.push([O,k]),A)},x.prototype.removeChild=function(I){this.children.remove(I)},x.prototype.replace=function(I){I instanceof x&&I.moveChildren(this),F.prototype.replace.call(this,I)},x.prototype.split=function(I,$){if(void 0===$&&($=!1),!$){if(0===I)return this;if(I===this.length())return this.next}var N=this.clone();return this.parent.insertBefore(N,this.next),this.children.forEachAt(I,this.length(),function(O,k,A){O=O.split(k,$),N.appendChild(O)}),N},x.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},x.prototype.update=function(I,$){var N=this,O=[],k=[];I.forEach(function(A){A.target===N.domNode&&"childList"===A.type&&(O.push.apply(O,A.addedNodes),k.push.apply(k,A.removedNodes))}),k.forEach(function(A){if(!(null!=A.parentNode&&"IFRAME"!==A.tagName&&document.body.compareDocumentPosition(A)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var V=ee.find(A);null!=V&&(null==V.domNode.parentNode||V.domNode.parentNode===N.domNode)&&V.detach()}}),O.filter(function(A){return A.parentNode==N.domNode}).sort(function(A,V){return A===V?0:A.compareDocumentPosition(V)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(A){var V=null;null!=A.nextSibling&&(V=ee.find(A.nextSibling));var R=q(A);(R.next!=V||null==R.next)&&(null!=R.parent&&R.parent.removeChild(N),N.insertBefore(R,V||void 0))})},x}(ue.default);function q(F){var x=ee.find(F);if(null==x)try{x=ee.create(F)}catch{x=ee.create(ee.Scope.INLINE),[].slice.call(F.childNodes).forEach(function($){x.domNode.appendChild($)}),F.parentNode&&F.parentNode.replaceChild(x.domNode,F),x.attach()}return x}Y.default=Q},function(qe,Y,Z){"use strict";var F,ye=this&&this.__extends||(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,I){x.__proto__=I}||function(x,I){for(var $ in I)I.hasOwnProperty($)&&(x[$]=I[$])},function(x,I){function $(){this.constructor=x}F(x,I),x.prototype=null===I?Object.create(I):($.prototype=I.prototype,new $)});Object.defineProperty(Y,"__esModule",{value:!0});var pe=Z(12),ue=Z(31),ee=Z(17),Q=Z(1),q=function(F){function x(I){var $=F.call(this,I)||this;return $.attributes=new ue.default($.domNode),$}return ye(x,F),x.formats=function(I){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?I.tagName.toLowerCase():void 0)},x.prototype.format=function(I,$){var N=Q.query(I);N instanceof pe.default?this.attributes.attribute(N,$):$&&null!=N&&(I!==this.statics.blotName||this.formats()[I]!==$)&&this.replaceWith(I,$)},x.prototype.formats=function(){var I=this.attributes.values(),$=this.statics.formats(this.domNode);return null!=$&&(I[this.statics.blotName]=$),I},x.prototype.replaceWith=function(I,$){var N=F.prototype.replaceWith.call(this,I,$);return this.attributes.copy(N),N},x.prototype.update=function(I,$){var N=this;F.prototype.update.call(this,I,$),I.some(function(O){return O.target===N.domNode&&"attributes"===O.type})&&this.attributes.build()},x.prototype.wrap=function(I,$){var N=F.prototype.wrap.call(this,I,$);return N instanceof x&&N.statics.scope===this.statics.scope&&this.attributes.move(N),N},x}(ee.default);Y.default=q},function(qe,Y,Z){"use strict";var Q,ye=this&&this.__extends||(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,F){q.__proto__=F}||function(q,F){for(var x in F)F.hasOwnProperty(x)&&(q[x]=F[x])},function(q,F){function x(){this.constructor=q}Q(q,F),q.prototype=null===F?Object.create(F):(x.prototype=F.prototype,new x)});Object.defineProperty(Y,"__esModule",{value:!0});var pe=Z(30),ue=Z(1),ee=function(Q){function q(){return null!==Q&&Q.apply(this,arguments)||this}return ye(q,Q),q.value=function(F){return!0},q.prototype.index=function(F,x){return this.domNode===F||this.domNode.compareDocumentPosition(F)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(x,1):-1},q.prototype.position=function(F,x){var I=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return F>0&&(I+=1),[this.parent.domNode,I]},q.prototype.value=function(){var F;return(F={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,F},q.scope=ue.Scope.INLINE_BLOT,q}(pe.default);Y.default=ee},function(qe,Y,Z){var ye=Z(11),pe=Z(3),ue={attributes:{compose:function(Q,q,F){"object"!=typeof Q&&(Q={}),"object"!=typeof q&&(q={});var x=pe(!0,{},q);for(var I in F||(x=Object.keys(x).reduce(function($,N){return null!=x[N]&&($[N]=x[N]),$},{})),Q)void 0!==Q[I]&&void 0===q[I]&&(x[I]=Q[I]);return Object.keys(x).length>0?x:void 0},diff:function(Q,q){"object"!=typeof Q&&(Q={}),"object"!=typeof q&&(q={});var F=Object.keys(Q).concat(Object.keys(q)).reduce(function(x,I){return ye(Q[I],q[I])||(x[I]=void 0===q[I]?null:q[I]),x},{});return Object.keys(F).length>0?F:void 0},transform:function(Q,q,F){if("object"!=typeof Q)return q;if("object"==typeof q){if(!F)return q;var x=Object.keys(q).reduce(function(I,$){return void 0===Q[$]&&(I[$]=q[$]),I},{});return Object.keys(x).length>0?x:void 0}}},iterator:function(Q){return new ee(Q)},length:function(Q){return"number"==typeof Q.delete?Q.delete:"number"==typeof Q.retain?Q.retain:"string"==typeof Q.insert?Q.insert.length:1}};function ee(Q){this.ops=Q,this.index=0,this.offset=0}ee.prototype.hasNext=function(){return this.peekLength()<1/0},ee.prototype.next=function(Q){Q||(Q=1/0);var q=this.ops[this.index];if(q){var F=this.offset,x=ue.length(q);if(Q>=x-F?(Q=x-F,this.index+=1,this.offset=0):this.offset+=Q,"number"==typeof q.delete)return{delete:Q};var I={};return q.attributes&&(I.attributes=q.attributes),"number"==typeof q.retain?I.retain=Q:I.insert="string"==typeof q.insert?q.insert.substr(F,Q):q.insert,I}return{retain:1/0}},ee.prototype.peek=function(){return this.ops[this.index]},ee.prototype.peekLength=function(){return this.ops[this.index]?ue.length(this.ops[this.index])-this.offset:1/0},ee.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},ee.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var Q=this.offset,q=this.index,F=this.next(),x=this.ops.slice(this.index);return this.offset=Q,this.index=q,[F].concat(x)}return[]},qe.exports=ue},function(qe,Y){var Z=function(){"use strict";function ye(N,O){return null!=O&&N instanceof O}var pe,ue,ee;try{pe=Map}catch{pe=function(){}}try{ue=Set}catch{ue=function(){}}try{ee=Promise}catch{ee=function(){}}function Q(N,O,k,A,V){"object"==typeof O&&(k=O.depth,A=O.prototype,V=O.includeNonEnumerable,O=O.circular);var R=[],j=[],ce=typeof Buffer<"u";return typeof O>"u"&&(O=!0),typeof k>"u"&&(k=1/0),function ie(se,_e){if(null===se)return null;if(0===_e)return se;var J,G;if("object"!=typeof se)return se;if(ye(se,pe))J=new pe;else if(ye(se,ue))J=new ue;else if(ye(se,ee))J=new ee(function(ke,he){se.then(function(Se){ke(ie(Se,_e-1))},function(Se){he(ie(Se,_e-1))})});else if(Q.__isArray(se))J=[];else if(Q.__isRegExp(se))J=new RegExp(se.source,$(se)),se.lastIndex&&(J.lastIndex=se.lastIndex);else if(Q.__isDate(se))J=new Date(se.getTime());else{if(ce&&Buffer.isBuffer(se))return J=Buffer.allocUnsafe?Buffer.allocUnsafe(se.length):new Buffer(se.length),se.copy(J),J;ye(se,Error)?J=Object.create(se):typeof A>"u"?(G=Object.getPrototypeOf(se),J=Object.create(G)):(J=Object.create(A),G=A)}if(O){var U=R.indexOf(se);if(-1!=U)return j[U];R.push(se),j.push(J)}for(var B in ye(se,pe)&&se.forEach(function(ke,he){var Se=ie(he,_e-1),De=ie(ke,_e-1);J.set(Se,De)}),ye(se,ue)&&se.forEach(function(ke){var he=ie(ke,_e-1);J.add(he)}),se){var ae;G&&(ae=Object.getOwnPropertyDescriptor(G,B)),(!ae||null!=ae.set)&&(J[B]=ie(se[B],_e-1))}if(Object.getOwnPropertySymbols){var ve=Object.getOwnPropertySymbols(se);for(B=0;B<ve.length;B++){var Ue=ve[B];(je=Object.getOwnPropertyDescriptor(se,Ue))&&!je.enumerable&&!V||(J[Ue]=ie(se[Ue],_e-1),je.enumerable||Object.defineProperty(J,Ue,{enumerable:!1}))}}if(V){var dt=Object.getOwnPropertyNames(se);for(B=0;B<dt.length;B++){var je,Ae=dt[B];(je=Object.getOwnPropertyDescriptor(se,Ae))&&je.enumerable||(J[Ae]=ie(se[Ae],_e-1),Object.defineProperty(J,Ae,{enumerable:!1}))}}return J}(N,k)}function q(N){return Object.prototype.toString.call(N)}function $(N){var O="";return N.global&&(O+="g"),N.ignoreCase&&(O+="i"),N.multiline&&(O+="m"),O}return Q.clonePrototype=function(O){if(null===O)return null;var k=function(){};return k.prototype=O,new k},Q.__objToStr=q,Q.__isDate=function F(N){return"object"==typeof N&&"[object Date]"===q(N)},Q.__isArray=function x(N){return"object"==typeof N&&"[object Array]"===q(N)},Q.__isRegExp=function I(N){return"object"==typeof N&&"[object RegExp]"===q(N)},Q.__getRegExpFlags=$,Q}();"object"==typeof qe&&qe.exports&&(qe.exports=Z)},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=function(){return function(G,U){if(Array.isArray(G))return G;if(Symbol.iterator in Object(G))return function J(G,U){var B=[],ae=!0,ve=!1,Ue=void 0;try{for(var dt,je=G[Symbol.iterator]();!(ae=(dt=je.next()).done)&&(B.push(dt.value),!U||B.length!==U);ae=!0);}catch(Ae){ve=!0,Ue=Ae}finally{try{!ae&&je.return&&je.return()}finally{if(ve)throw Ue}}return B}(G,U);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),pe=function(){function J(G,U){for(var B=0;B<U.length;B++){var ae=U[B];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(G,ae.key,ae)}}return function(G,U,B){return U&&J(G.prototype,U),B&&J(G,B),G}}(),ue=function J(G,U,B){null===G&&(G=Function.prototype);var ae=Object.getOwnPropertyDescriptor(G,U);if(void 0===ae){var ve=Object.getPrototypeOf(G);return null===ve?void 0:J(ve,U,B)}if("value"in ae)return ae.value;var Ue=ae.get;return void 0===Ue?void 0:Ue.call(B)},Q=R(Z(0)),F=R(Z(8)),x=Z(4),I=R(x),N=R(Z(16)),k=R(Z(13)),V=R(Z(25));function R(J){return J&&J.__esModule?J:{default:J}}function se(J){return J instanceof I.default||J instanceof x.BlockEmbed}var _e=function(J){function G(U,B){!function j(J,G){if(!(J instanceof G))throw new TypeError("Cannot call a class as a function")}(this,G);var ae=function ce(J,G){if(!J)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!G||"object"!=typeof G&&"function"!=typeof G?J:G}(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,U));return ae.emitter=B.emitter,Array.isArray(B.whitelist)&&(ae.whitelist=B.whitelist.reduce(function(ve,Ue){return ve[Ue]=!0,ve},{})),ae.domNode.addEventListener("DOMNodeInserted",function(){}),ae.optimize(),ae.enable(),ae}return function ie(J,G){if("function"!=typeof G&&null!==G)throw new TypeError("Super expression must either be null or a function, not "+typeof G);J.prototype=Object.create(G&&G.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(J,G):J.__proto__=G)}(G,J),pe(G,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(B,ae){var ve=this.line(B),Ue=ye(ve,2),je=Ue[0],dt=Ue[1],Ae=this.line(B+ae),he=ye(Ae,1)[0];if(ue(G.prototype.__proto__||Object.getPrototypeOf(G.prototype),"deleteAt",this).call(this,B,ae),null!=he&&je!==he&&dt>0){if(je instanceof x.BlockEmbed||he instanceof x.BlockEmbed)return void this.optimize();if(je instanceof k.default){var Se=je.newlineIndex(je.length(),!0);if(Se>-1&&(je=je.split(Se+1))===he)return void this.optimize()}else if(he instanceof k.default){var De=he.newlineIndex(0);De>-1&&he.split(De+1)}je.moveChildren(he,he.children.head instanceof N.default?null:he.children.head),je.remove()}this.optimize()}},{key:"enable",value:function(){this.domNode.setAttribute("contenteditable",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])}},{key:"formatAt",value:function(B,ae,ve,Ue){null!=this.whitelist&&!this.whitelist[ve]||(ue(G.prototype.__proto__||Object.getPrototypeOf(G.prototype),"formatAt",this).call(this,B,ae,ve,Ue),this.optimize())}},{key:"insertAt",value:function(B,ae,ve){if(null==ve||null==this.whitelist||this.whitelist[ae]){if(B>=this.length())if(null==ve||null==Q.default.query(ae,Q.default.Scope.BLOCK)){var Ue=Q.default.create(this.statics.defaultChild);this.appendChild(Ue),null==ve&&ae.endsWith("\n")&&(ae=ae.slice(0,-1)),Ue.insertAt(0,ae,ve)}else{var je=Q.default.create(ae,ve);this.appendChild(je)}else ue(G.prototype.__proto__||Object.getPrototypeOf(G.prototype),"insertAt",this).call(this,B,ae,ve);this.optimize()}}},{key:"insertBefore",value:function(B,ae){if(B.statics.scope===Q.default.Scope.INLINE_BLOT){var ve=Q.default.create(this.statics.defaultChild);ve.appendChild(B),B=ve}ue(G.prototype.__proto__||Object.getPrototypeOf(G.prototype),"insertBefore",this).call(this,B,ae)}},{key:"leaf",value:function(B){return this.path(B).pop()||[null,-1]}},{key:"line",value:function(B){return B===this.length()?this.line(B-1):this.descendant(se,B)}},{key:"lines",value:function(){return function Ue(je,dt,Ae){var ke=[],he=Ae;return je.children.forEachAt(dt,Ae,function(Se,De,Ze){se(Se)?ke.push(Se):Se instanceof Q.default.Container&&(ke=ke.concat(Ue(Se,De,he))),he-=Ze}),ke}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],ae=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(ue(G.prototype.__proto__||Object.getPrototypeOf(G.prototype),"optimize",this).call(this,B,ae),B.length>0&&this.emitter.emit(F.default.events.SCROLL_OPTIMIZE,B,ae))}},{key:"path",value:function(B){return ue(G.prototype.__proto__||Object.getPrototypeOf(G.prototype),"path",this).call(this,B).slice(1)}},{key:"update",value:function(B){if(!0!==this.batch){var ae=F.default.sources.USER;"string"==typeof B&&(ae=B),Array.isArray(B)||(B=this.observer.takeRecords()),B.length>0&&this.emitter.emit(F.default.events.SCROLL_BEFORE_UPDATE,ae,B),ue(G.prototype.__proto__||Object.getPrototypeOf(G.prototype),"update",this).call(this,B.concat([])),B.length>0&&this.emitter.emit(F.default.events.SCROLL_UPDATE,ae,B)}}}]),G}(Q.default.Scroll);_e.blotName="scroll",_e.className="ql-editor",_e.tagName="DIV",_e.defaultChild="block",_e.allowedChildren=[I.default,x.BlockEmbed,V.default],Y.default=_e},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.SHORTKEY=Y.default=void 0;var ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(we){return typeof we}:function(we){return we&&"function"==typeof Symbol&&we.constructor===Symbol&&we!==Symbol.prototype?"symbol":typeof we},pe=function(){return function(Ke,lt){if(Array.isArray(Ke))return Ke;if(Symbol.iterator in Object(Ke))return function we(Ke,lt){var ct=[],It=!0,on=!1,Xn=void 0;try{for(var Hi,ci=Ke[Symbol.iterator]();!(It=(Hi=ci.next()).done)&&(ct.push(Hi.value),!lt||ct.length!==lt);It=!0);}catch(cs){on=!0,Xn=cs}finally{try{!It&&ci.return&&ci.return()}finally{if(on)throw Xn}}return ct}(Ke,lt);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ue=function(){function we(Ke,lt){for(var ct=0;ct<lt.length;ct++){var It=lt[ct];It.enumerable=It.enumerable||!1,It.configurable=!0,"value"in It&&(It.writable=!0),Object.defineProperty(Ke,It.key,It)}}return function(Ke,lt,ct){return lt&&we(Ke.prototype,lt),ct&&we(Ke,ct),Ke}}(),Q=J(Z(21)),F=J(Z(11)),I=J(Z(3)),N=J(Z(2)),k=J(Z(20)),V=J(Z(0)),j=J(Z(5)),ie=J(Z(10)),_e=J(Z(9));function J(we){return we&&we.__esModule?we:{default:we}}function G(we,Ke,lt){return Ke in we?Object.defineProperty(we,Ke,{value:lt,enumerable:!0,configurable:!0,writable:!0}):we[Ke]=lt,we}var ve=(0,ie.default)("quill:keyboard"),Ue=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",je=function(we){function Ke(lt,ct){!function U(we,Ke){if(!(we instanceof Ke))throw new TypeError("Cannot call a class as a function")}(this,Ke);var It=function B(we,Ke){if(!we)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!Ke||"object"!=typeof Ke&&"function"!=typeof Ke?we:Ke}(this,(Ke.__proto__||Object.getPrototypeOf(Ke)).call(this,lt,ct));return It.bindings={},Object.keys(It.options.bindings).forEach(function(on){"list autofill"===on&&null!=lt.scroll.whitelist&&!lt.scroll.whitelist.list||It.options.bindings[on]&&It.addBinding(It.options.bindings[on])}),It.addBinding({key:Ke.keys.ENTER,shiftKey:null},Se),It.addBinding({key:Ke.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(It.addBinding({key:Ke.keys.BACKSPACE},{collapsed:!0},Ae),It.addBinding({key:Ke.keys.DELETE},{collapsed:!0},ke)):(It.addBinding({key:Ke.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Ae),It.addBinding({key:Ke.keys.DELETE},{collapsed:!0,suffix:/^.?$/},ke)),It.addBinding({key:Ke.keys.BACKSPACE},{collapsed:!1},he),It.addBinding({key:Ke.keys.DELETE},{collapsed:!1},he),It.addBinding({key:Ke.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Ae),It.listen(),It}return function ae(we,Ke){if("function"!=typeof Ke&&null!==Ke)throw new TypeError("Super expression must either be null or a function, not "+typeof Ke);we.prototype=Object.create(Ke&&Ke.prototype,{constructor:{value:we,enumerable:!1,writable:!0,configurable:!0}}),Ke&&(Object.setPrototypeOf?Object.setPrototypeOf(we,Ke):we.__proto__=Ke)}(Ke,we),ue(Ke,null,[{key:"match",value:function(ct,It){return It=Ye(It),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(on){return!!It[on]!==ct[on]&&null!==It[on]})&&It.key===(ct.which||ct.keyCode)}}]),ue(Ke,[{key:"addBinding",value:function(ct){var It=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},on=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Xn=Ye(ct);if(null==Xn||null==Xn.key)return ve.warn("Attempted to add invalid keyboard binding",Xn);"function"==typeof It&&(It={handler:It}),"function"==typeof on&&(on={handler:on}),Xn=(0,I.default)(Xn,It,on),this.bindings[Xn.key]=this.bindings[Xn.key]||[],this.bindings[Xn.key].push(Xn)}},{key:"listen",value:function(){var ct=this;this.quill.root.addEventListener("keydown",function(It){if(!It.defaultPrevented){var Xn=(ct.bindings[It.which||It.keyCode]||[]).filter(function(jr){return Ke.match(It,jr)});if(0!==Xn.length){var ci=ct.quill.getSelection();if(null!=ci&&ct.quill.hasFocus()){var Hi=ct.quill.getLine(ci.index),cs=pe(Hi,2),po=cs[0],Tr=cs[1],yt=ct.quill.getLeaf(ci.index),Ct=pe(yt,2),Yt=Ct[0],en=Ct[1],Nt=0===ci.length?[Yt,en]:ct.quill.getLeaf(ci.index+ci.length),gi=pe(Nt,2),Ai=gi[0],Vi=gi[1],sl=Yt instanceof V.default.Text?Yt.value().slice(0,en):"",qc=Ai instanceof V.default.Text?Ai.value().slice(Vi):"",yr={collapsed:0===ci.length,empty:0===ci.length&&po.length()<=1,format:ct.quill.getFormat(ci),offset:Tr,prefix:sl,suffix:qc};Xn.some(function(jr){if(null!=jr.collapsed&&jr.collapsed!==yr.collapsed||null!=jr.empty&&jr.empty!==yr.empty||null!=jr.offset&&jr.offset!==yr.offset)return!1;if(Array.isArray(jr.format)){if(jr.format.every(function(Ah){return null==yr.format[Ah]}))return!1}else if("object"===ye(jr.format)&&!Object.keys(jr.format).every(function(Ah){return!0===jr.format[Ah]?null!=yr.format[Ah]:!1===jr.format[Ah]?null==yr.format[Ah]:(0,F.default)(jr.format[Ah],yr.format[Ah])}))return!1;return!(null!=jr.prefix&&!jr.prefix.test(yr.prefix)||null!=jr.suffix&&!jr.suffix.test(yr.suffix))&&!0!==jr.handler.call(ct,ci,yr)})&&It.preventDefault()}}}})}}]),Ke}(_e.default);function dt(we,Ke){var lt;return G(lt={key:we,shiftKey:Ke,altKey:null},we===je.keys.LEFT?"prefix":"suffix",/^$/),G(lt,"handler",function(on){var Xn=on.index;we===je.keys.RIGHT&&(Xn+=on.length+1);var ci=this.quill.getLeaf(Xn);return!(pe(ci,1)[0]instanceof V.default.Embed&&(we===je.keys.LEFT?Ke?this.quill.setSelection(on.index-1,on.length+1,j.default.sources.USER):this.quill.setSelection(on.index-1,j.default.sources.USER):Ke?this.quill.setSelection(on.index,on.length+1,j.default.sources.USER):this.quill.setSelection(on.index+on.length+1,j.default.sources.USER),1))}),lt}function Ae(we,Ke){if(!(0===we.index||this.quill.getLength()<=1)){var lt=this.quill.getLine(we.index),It=pe(lt,1)[0],on={};if(0===Ke.offset){var Xn=this.quill.getLine(we.index-1),Hi=pe(Xn,1)[0];if(null!=Hi&&Hi.length()>1){var cs=It.formats(),po=this.quill.getFormat(we.index-1,1);on=k.default.attributes.diff(cs,po)||{}}}var Tr=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(Ke.prefix)?2:1;this.quill.deleteText(we.index-Tr,Tr,j.default.sources.USER),Object.keys(on).length>0&&this.quill.formatLine(we.index-Tr,Tr,on,j.default.sources.USER),this.quill.focus()}}function ke(we,Ke){var lt=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(Ke.suffix)?2:1;if(!(we.index>=this.quill.getLength()-lt)){var ct={},It=0,on=this.quill.getLine(we.index),ci=pe(on,1)[0];if(Ke.offset>=ci.length()-1){var Hi=this.quill.getLine(we.index+1),po=pe(Hi,1)[0];if(po){var Tr=ci.formats(),yt=this.quill.getFormat(we.index,1);ct=k.default.attributes.diff(Tr,yt)||{},It=po.length()}}this.quill.deleteText(we.index,lt,j.default.sources.USER),Object.keys(ct).length>0&&this.quill.formatLine(we.index+It-1,lt,ct,j.default.sources.USER)}}function he(we){var Ke=this.quill.getLines(we),lt={};if(Ke.length>1){var ct=Ke[0].formats(),It=Ke[Ke.length-1].formats();lt=k.default.attributes.diff(It,ct)||{}}this.quill.deleteText(we,j.default.sources.USER),Object.keys(lt).length>0&&this.quill.formatLine(we.index,1,lt,j.default.sources.USER),this.quill.setSelection(we.index,j.default.sources.SILENT),this.quill.focus()}function Se(we,Ke){var lt=this;we.length>0&&this.quill.scroll.deleteAt(we.index,we.length);var ct=Object.keys(Ke.format).reduce(function(It,on){return V.default.query(on,V.default.Scope.BLOCK)&&!Array.isArray(Ke.format[on])&&(It[on]=Ke.format[on]),It},{});this.quill.insertText(we.index,"\n",ct,j.default.sources.USER),this.quill.setSelection(we.index+1,j.default.sources.SILENT),this.quill.focus(),Object.keys(Ke.format).forEach(function(It){null==ct[It]&&(Array.isArray(Ke.format[It])||"link"!==It&&lt.quill.format(It,Ke.format[It],j.default.sources.USER))})}function De(we){return{key:je.keys.TAB,shiftKey:!we,format:{"code-block":!0},handler:function(lt){var ct=V.default.query("code-block"),It=lt.index,on=lt.length,Xn=this.quill.scroll.descendant(ct,It),ci=pe(Xn,2),Hi=ci[0],cs=ci[1];if(null!=Hi){var po=this.quill.getIndex(Hi),Tr=Hi.newlineIndex(cs,!0)+1,yt=Hi.newlineIndex(po+cs+on),Ct=Hi.domNode.textContent.slice(Tr,yt).split("\n");cs=0,Ct.forEach(function(Yt,en){we?(Hi.insertAt(Tr+cs,ct.TAB),cs+=ct.TAB.length,0===en?It+=ct.TAB.length:on+=ct.TAB.length):Yt.startsWith(ct.TAB)&&(Hi.deleteAt(Tr+cs,ct.TAB.length),cs-=ct.TAB.length,0===en?It-=ct.TAB.length:on-=ct.TAB.length),cs+=Yt.length+1}),this.quill.update(j.default.sources.USER),this.quill.setSelection(It,on,j.default.sources.SILENT)}}}}function Ze(we){return{key:we[0].toUpperCase(),shortKey:!0,handler:function(lt,ct){this.quill.format(we,!ct.format[we],j.default.sources.USER)}}}function Ye(we){if("string"==typeof we||"number"==typeof we)return Ye({key:we});if("object"===(typeof we>"u"?"undefined":ye(we))&&(we=(0,Q.default)(we,!1)),"string"==typeof we.key)if(null!=je.keys[we.key.toUpperCase()])we.key=je.keys[we.key.toUpperCase()];else{if(1!==we.key.length)return null;we.key=we.key.toUpperCase().charCodeAt(0)}return we.shortKey&&(we[Ue]=we.shortKey,delete we.shortKey),we}je.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},je.DEFAULTS={bindings:{bold:Ze("bold"),italic:Ze("italic"),underline:Ze("underline"),indent:{key:je.keys.TAB,format:["blockquote","indent","list"],handler:function(Ke,lt){if(lt.collapsed&&0!==lt.offset)return!0;this.quill.format("indent","+1",j.default.sources.USER)}},outdent:{key:je.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(Ke,lt){if(lt.collapsed&&0!==lt.offset)return!0;this.quill.format("indent","-1",j.default.sources.USER)}},"outdent backspace":{key:je.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(Ke,lt){null!=lt.format.indent?this.quill.format("indent","-1",j.default.sources.USER):null!=lt.format.list&&this.quill.format("list",!1,j.default.sources.USER)}},"indent code-block":De(!0),"outdent code-block":De(!1),"remove tab":{key:je.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(Ke){this.quill.deleteText(Ke.index-1,1,j.default.sources.USER)}},tab:{key:je.keys.TAB,handler:function(Ke){this.quill.history.cutoff();var lt=(new N.default).retain(Ke.index).delete(Ke.length).insert("\t");this.quill.updateContents(lt,j.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Ke.index+1,j.default.sources.SILENT)}},"list empty enter":{key:je.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(Ke,lt){this.quill.format("list",!1,j.default.sources.USER),lt.format.indent&&this.quill.format("indent",!1,j.default.sources.USER)}},"checklist enter":{key:je.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(Ke){var lt=this.quill.getLine(Ke.index),ct=pe(lt,2),It=ct[0],on=ct[1],Xn=(0,I.default)({},It.formats(),{list:"checked"}),ci=(new N.default).retain(Ke.index).insert("\n",Xn).retain(It.length()-on-1).retain(1,{list:"unchecked"});this.quill.updateContents(ci,j.default.sources.USER),this.quill.setSelection(Ke.index+1,j.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:je.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(Ke,lt){var ct=this.quill.getLine(Ke.index),It=pe(ct,2),on=It[0],Xn=It[1],ci=(new N.default).retain(Ke.index).insert("\n",lt.format).retain(on.length()-Xn-1).retain(1,{header:null});this.quill.updateContents(ci,j.default.sources.USER),this.quill.setSelection(Ke.index+1,j.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(Ke,lt){var ct=lt.prefix.length,It=this.quill.getLine(Ke.index),on=pe(It,2),Xn=on[0],ci=on[1];if(ci>ct)return!0;var Hi=void 0;switch(lt.prefix.trim()){case"[]":case"[ ]":Hi="unchecked";break;case"[x]":Hi="checked";break;case"-":case"*":Hi="bullet";break;default:Hi="ordered"}this.quill.insertText(Ke.index," ",j.default.sources.USER),this.quill.history.cutoff();var cs=(new N.default).retain(Ke.index-ci).delete(ct+1).retain(Xn.length()-2-ci).retain(1,{list:Hi});this.quill.updateContents(cs,j.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Ke.index-ct,j.default.sources.SILENT)}},"code exit":{key:je.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(Ke){var lt=this.quill.getLine(Ke.index),ct=pe(lt,2),It=ct[0],on=ct[1],Xn=(new N.default).retain(Ke.index+It.length()-on-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Xn,j.default.sources.USER)}},"embed left":dt(je.keys.LEFT,!1),"embed left shift":dt(je.keys.LEFT,!0),"embed right":dt(je.keys.RIGHT,!1),"embed right shift":dt(je.keys.RIGHT,!0)}},Y.default=je,Y.SHORTKEY=Ue},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=function(){return function(A,V){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return function k(A,V){var R=[],j=!0,ce=!1,ie=void 0;try{for(var _e,se=A[Symbol.iterator]();!(j=(_e=se.next()).done)&&(R.push(_e.value),!V||R.length!==V);j=!0);}catch(J){ce=!0,ie=J}finally{try{!j&&se.return&&se.return()}finally{if(ce)throw ie}}return R}(A,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),pe=function k(A,V,R){null===A&&(A=Function.prototype);var j=Object.getOwnPropertyDescriptor(A,V);if(void 0===j){var ce=Object.getPrototypeOf(A);return null===ce?void 0:k(ce,V,R)}if("value"in j)return j.value;var ie=j.get;return void 0===ie?void 0:ie.call(R)},ue=function(){function k(A,V){for(var R=0;R<V.length;R++){var j=V[R];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(A,j.key,j)}}return function(A,V,R){return V&&k(A.prototype,V),R&&k(A,R),A}}(),Q=x(Z(0)),F=x(Z(7));function x(k){return k&&k.__esModule?k:{default:k}}var O=function(k){function A(V,R){!function I(k,A){if(!(k instanceof A))throw new TypeError("Cannot call a class as a function")}(this,A);var j=function $(k,A){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!=typeof A&&"function"!=typeof A?k:A}(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,V));return j.selection=R,j.textNode=document.createTextNode(A.CONTENTS),j.domNode.appendChild(j.textNode),j._length=0,j}return function N(k,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);k.prototype=Object.create(A&&A.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(k,A):k.__proto__=A)}(A,k),ue(A,null,[{key:"value",value:function(){}}]),ue(A,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(R,j){if(0!==this._length)return pe(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,R,j);for(var ce=this,ie=0;null!=ce&&ce.statics.scope!==Q.default.Scope.BLOCK_BLOT;)ie+=ce.offset(ce.parent),ce=ce.parent;null!=ce&&(this._length=A.CONTENTS.length,ce.optimize(),ce.formatAt(ie,A.CONTENTS.length,R,j),this._length=0)}},{key:"index",value:function(R,j){return R===this.textNode?0:pe(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"index",this).call(this,R,j)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){pe(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var R=this.textNode,j=this.selection.getNativeRange(),ce=void 0,ie=void 0,se=void 0;if(null!=j&&j.start.node===R&&j.end.node===R){var _e=[R,j.start.offset,j.end.offset];ce=_e[0],ie=_e[1],se=_e[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==A.CONTENTS){var J=this.textNode.data.split(A.CONTENTS).join("");this.next instanceof F.default?(ce=this.next.domNode,this.next.insertAt(0,J),this.textNode.data=A.CONTENTS):(this.textNode.data=J,this.parent.insertBefore(Q.default.create(this.textNode),this),this.textNode=document.createTextNode(A.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=ie){var G=[ie,se].map(function(B){return Math.max(0,Math.min(ce.data.length,B-1))}),U=ye(G,2);return{startNode:ce,startOffset:ie=U[0],endNode:ce,endOffset:se=U[1]}}}}},{key:"update",value:function(R,j){var ce=this;if(R.some(function(se){return"characterData"===se.type&&se.target===ce.textNode})){var ie=this.restore();ie&&(j.range=ie)}}},{key:"value",value:function(){return""}}]),A}(Q.default.Embed);O.blotName="cursor",O.className="ql-cursor",O.tagName="span",O.CONTENTS="\ufeff",Y.default=O},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var pe=Q(Z(0)),ue=Z(4),ee=Q(ue);function Q($){return $&&$.__esModule?$:{default:$}}var I=function($){function N(){return function q($,N){if(!($ instanceof N))throw new TypeError("Cannot call a class as a function")}(this,N),function F($,N){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!N||"object"!=typeof N&&"function"!=typeof N?$:N}(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return function x($,N){if("function"!=typeof N&&null!==N)throw new TypeError("Super expression must either be null or a function, not "+typeof N);$.prototype=Object.create(N&&N.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf($,N):$.__proto__=N)}(N,$),N}(pe.default.Container);I.allowedChildren=[ee.default,ue.BlockEmbed,I],Y.default=I},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.ColorStyle=Y.ColorClass=Y.ColorAttributor=void 0;var ye=function(){function O(k,A){for(var V=0;V<A.length;V++){var R=A[V];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(k,R.key,R)}}return function(k,A,V){return A&&O(k.prototype,A),V&&O(k,V),k}}(),pe=function O(k,A,V){null===k&&(k=Function.prototype);var R=Object.getOwnPropertyDescriptor(k,A);if(void 0===R){var j=Object.getPrototypeOf(k);return null===j?void 0:O(j,A,V)}if("value"in R)return R.value;var ce=R.get;return void 0===ce?void 0:ce.call(V)},ee=function Q(O){return O&&O.__esModule?O:{default:O}}(Z(0));var I=function(O){function k(){return function q(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")}(this,k),function F(O,k){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!k||"object"!=typeof k&&"function"!=typeof k?O:k}(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return function x(O,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function, not "+typeof k);O.prototype=Object.create(k&&k.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(O,k):O.__proto__=k)}(k,O),ye(k,[{key:"value",value:function(V){var R=pe(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"value",this).call(this,V);return R.startsWith("rgb(")?"#"+(R=R.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map(function(j){return("00"+parseInt(j).toString(16)).slice(-2)}).join(""):R}}]),k}(ee.default.Attributor.Style),$=new ee.default.Attributor.Class("color","ql-color",{scope:ee.default.Scope.INLINE}),N=new I("color","color",{scope:ee.default.Scope.INLINE});Y.ColorAttributor=I,Y.ColorClass=$,Y.ColorStyle=N},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.sanitize=Y.default=void 0;var ye=function(){function N(O,k){for(var A=0;A<k.length;A++){var V=k[A];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(O,V.key,V)}}return function(O,k,A){return k&&N(O.prototype,k),A&&N(O,A),O}}(),pe=function N(O,k,A){null===O&&(O=Function.prototype);var V=Object.getOwnPropertyDescriptor(O,k);if(void 0===V){var R=Object.getPrototypeOf(O);return null===R?void 0:N(R,k,A)}if("value"in V)return V.value;var j=V.get;return void 0===j?void 0:j.call(A)};var I=function(N){function O(){return function q(N,O){if(!(N instanceof O))throw new TypeError("Cannot call a class as a function")}(this,O),function F(N,O){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!O||"object"!=typeof O&&"function"!=typeof O?N:O}(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return function x(N,O){if("function"!=typeof O&&null!==O)throw new TypeError("Super expression must either be null or a function, not "+typeof O);N.prototype=Object.create(O&&O.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(N,O):N.__proto__=O)}(O,N),ye(O,[{key:"format",value:function(A,V){if(A!==this.statics.blotName||!V)return pe(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"format",this).call(this,A,V);V=this.constructor.sanitize(V),this.domNode.setAttribute("href",V)}}],[{key:"create",value:function(A){var V=pe(O.__proto__||Object.getPrototypeOf(O),"create",this).call(this,A);return A=this.sanitize(A),V.setAttribute("href",A),V.setAttribute("rel","noopener noreferrer"),V.setAttribute("target","_blank"),V}},{key:"formats",value:function(A){return A.getAttribute("href")}},{key:"sanitize",value:function(A){return $(A,this.PROTOCOL_WHITELIST)?A:this.SANITIZED_URL}}]),O}(function Q(N){return N&&N.__esModule?N:{default:N}}(Z(6)).default);function $(N,O){var k=document.createElement("a");k.href=N;var A=k.href.slice(0,k.href.indexOf(":"));return O.indexOf(A)>-1}I.blotName="link",I.tagName="A",I.SANITIZED_URL="about:blank",I.PROTOCOL_WHITELIST=["http","https","mailto","tel"],Y.default=I,Y.sanitize=$},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(O){return typeof O}:function(O){return O&&"function"==typeof Symbol&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},pe=function(){function O(k,A){for(var V=0;V<A.length;V++){var R=A[V];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(k,R.key,R)}}return function(k,A,V){return A&&O(k.prototype,A),V&&O(k,V),k}}(),ee=F(Z(23)),q=F(Z(107));function F(O){return O&&O.__esModule?O:{default:O}}var I=0;function $(O,k){O.setAttribute(k,"true"!==O.getAttribute(k))}var N=function(){function O(k){var A=this;(function x(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")})(this,O),this.select=k,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){A.togglePicker()}),this.label.addEventListener("keydown",function(V){switch(V.keyCode){case ee.default.keys.ENTER:A.togglePicker();break;case ee.default.keys.ESCAPE:A.escape(),V.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}return pe(O,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),$(this.label,"aria-expanded"),$(this.options,"aria-hidden")}},{key:"buildItem",value:function(A){var V=this,R=document.createElement("span");return R.tabIndex="0",R.setAttribute("role","button"),R.classList.add("ql-picker-item"),A.hasAttribute("value")&&R.setAttribute("data-value",A.getAttribute("value")),A.textContent&&R.setAttribute("data-label",A.textContent),R.addEventListener("click",function(){V.selectItem(R,!0)}),R.addEventListener("keydown",function(j){switch(j.keyCode){case ee.default.keys.ENTER:V.selectItem(R,!0),j.preventDefault();break;case ee.default.keys.ESCAPE:V.escape(),j.preventDefault()}}),R}},{key:"buildLabel",value:function(){var A=document.createElement("span");return A.classList.add("ql-picker-label"),A.innerHTML=q.default,A.tabIndex="0",A.setAttribute("role","button"),A.setAttribute("aria-expanded","false"),this.container.appendChild(A),A}},{key:"buildOptions",value:function(){var A=this,V=document.createElement("span");V.classList.add("ql-picker-options"),V.setAttribute("aria-hidden","true"),V.tabIndex="-1",V.id="ql-picker-options-"+I,I+=1,this.label.setAttribute("aria-controls",V.id),this.options=V,[].slice.call(this.select.options).forEach(function(R){var j=A.buildItem(R);V.appendChild(j),!0===R.selected&&A.selectItem(j)}),this.container.appendChild(V)}},{key:"buildPicker",value:function(){var A=this;[].slice.call(this.select.attributes).forEach(function(V){A.container.setAttribute(V.name,V.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var A=this;this.close(),setTimeout(function(){return A.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(A){var V=arguments.length>1&&void 0!==arguments[1]&&arguments[1],R=this.container.querySelector(".ql-selected");if(A!==R&&(R?.classList.remove("ql-selected"),null!=A&&(A.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(A.parentNode.children,A),A.hasAttribute("data-value")?this.label.setAttribute("data-value",A.getAttribute("data-value")):this.label.removeAttribute("data-value"),A.hasAttribute("data-label")?this.label.setAttribute("data-label",A.getAttribute("data-label")):this.label.removeAttribute("data-label"),V))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===(typeof Event>"u"?"undefined":ye(Event))){var j=document.createEvent("Event");j.initEvent("change",!0,!0),this.select.dispatchEvent(j)}this.close()}}},{key:"update",value:function(){var A=void 0;if(this.select.selectedIndex>-1){var V=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];A=this.select.options[this.select.selectedIndex],this.selectItem(V)}else this.selectItem(null);var R=null!=A&&A!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",R)}}]),O}();Y.default=N},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var pe=ve(Z(0)),ee=ve(Z(5)),Q=Z(4),q=ve(Q),x=ve(Z(16)),$=ve(Z(25)),O=ve(Z(24)),A=ve(Z(35)),R=ve(Z(6)),ce=ve(Z(22)),se=ve(Z(7)),J=ve(Z(55)),U=ve(Z(42)),ae=ve(Z(23));function ve(Ue){return Ue&&Ue.__esModule?Ue:{default:Ue}}ee.default.register({"blots/block":q.default,"blots/block/embed":Q.BlockEmbed,"blots/break":x.default,"blots/container":$.default,"blots/cursor":O.default,"blots/embed":A.default,"blots/inline":R.default,"blots/scroll":ce.default,"blots/text":se.default,"modules/clipboard":J.default,"modules/history":U.default,"modules/keyboard":ae.default}),pe.default.register(q.default,x.default,O.default,R.default,ce.default,se.default),Y.default=ee.default},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=Z(1),pe=function(){function ue(ee){this.domNode=ee,this.domNode[ye.DATA_KEY]={blot:this}}return Object.defineProperty(ue.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),ue.create=function(ee){if(null==this.tagName)throw new ye.ParchmentError("Blot definition missing tagName");var Q;return Array.isArray(this.tagName)?("string"==typeof ee&&(ee=ee.toUpperCase(),parseInt(ee).toString()===ee&&(ee=parseInt(ee))),Q="number"==typeof ee?document.createElement(this.tagName[ee-1]):this.tagName.indexOf(ee)>-1?document.createElement(ee):document.createElement(this.tagName[0])):Q=document.createElement(this.tagName),this.className&&Q.classList.add(this.className),Q},ue.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},ue.prototype.clone=function(){var ee=this.domNode.cloneNode(!1);return ye.create(ee)},ue.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[ye.DATA_KEY]},ue.prototype.deleteAt=function(ee,Q){this.isolate(ee,Q).remove()},ue.prototype.formatAt=function(ee,Q,q,F){var x=this.isolate(ee,Q);if(null!=ye.query(q,ye.Scope.BLOT)&&F)x.wrap(q,F);else if(null!=ye.query(q,ye.Scope.ATTRIBUTE)){var I=ye.create(this.statics.scope);x.wrap(I),I.format(q,F)}},ue.prototype.insertAt=function(ee,Q,q){var F=null==q?ye.create("text",Q):ye.create(Q,q),x=this.split(ee);this.parent.insertBefore(F,x)},ue.prototype.insertInto=function(ee,Q){void 0===Q&&(Q=null),null!=this.parent&&this.parent.children.remove(this);var q=null;ee.children.insertBefore(this,Q),null!=Q&&(q=Q.domNode),(this.domNode.parentNode!=ee.domNode||this.domNode.nextSibling!=q)&&ee.domNode.insertBefore(this.domNode,q),this.parent=ee,this.attach()},ue.prototype.isolate=function(ee,Q){var q=this.split(ee);return q.split(Q),q},ue.prototype.length=function(){return 1},ue.prototype.offset=function(ee){return void 0===ee&&(ee=this.parent),null==this.parent||this==ee?0:this.parent.children.offset(this)+this.parent.offset(ee)},ue.prototype.optimize=function(ee){null!=this.domNode[ye.DATA_KEY]&&delete this.domNode[ye.DATA_KEY].mutations},ue.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},ue.prototype.replace=function(ee){null!=ee.parent&&(ee.parent.insertBefore(this,ee.next),ee.remove())},ue.prototype.replaceWith=function(ee,Q){var q="string"==typeof ee?ye.create(ee,Q):ee;return q.replace(this),q},ue.prototype.split=function(ee,Q){return 0===ee?this:this.next},ue.prototype.update=function(ee,Q){},ue.prototype.wrap=function(ee,Q){var q="string"==typeof ee?ye.create(ee,Q):ee;return null!=this.parent&&this.parent.insertBefore(q,this.next),q.appendChild(this),q},ue.blotName="abstract",ue}();Y.default=pe},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=Z(12),pe=Z(32),ue=Z(33),ee=Z(1),Q=function(){function q(F){this.attributes={},this.domNode=F,this.build()}return q.prototype.attribute=function(F,x){x?F.add(this.domNode,x)&&(null!=F.value(this.domNode)?this.attributes[F.attrName]=F:delete this.attributes[F.attrName]):(F.remove(this.domNode),delete this.attributes[F.attrName])},q.prototype.build=function(){var F=this;this.attributes={};var x=ye.default.keys(this.domNode),I=pe.default.keys(this.domNode),$=ue.default.keys(this.domNode);x.concat(I).concat($).forEach(function(N){var O=ee.query(N,ee.Scope.ATTRIBUTE);O instanceof ye.default&&(F.attributes[O.attrName]=O)})},q.prototype.copy=function(F){var x=this;Object.keys(this.attributes).forEach(function(I){var $=x.attributes[I].value(x.domNode);F.format(I,$)})},q.prototype.move=function(F){var x=this;this.copy(F),Object.keys(this.attributes).forEach(function(I){x.attributes[I].remove(x.domNode)}),this.attributes={}},q.prototype.values=function(){var F=this;return Object.keys(this.attributes).reduce(function(x,I){return x[I]=F.attributes[I].value(F.domNode),x},{})},q}();Y.default=Q},function(qe,Y,Z){"use strict";var Q,ye=this&&this.__extends||(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,F){q.__proto__=F}||function(q,F){for(var x in F)F.hasOwnProperty(x)&&(q[x]=F[x])},function(q,F){function x(){this.constructor=q}Q(q,F),q.prototype=null===F?Object.create(F):(x.prototype=F.prototype,new x)});function ue(Q,q){return(Q.getAttribute("class")||"").split(/\s+/).filter(function(x){return 0===x.indexOf(q+"-")})}Object.defineProperty(Y,"__esModule",{value:!0});var ee=function(Q){function q(){return null!==Q&&Q.apply(this,arguments)||this}return ye(q,Q),q.keys=function(F){return(F.getAttribute("class")||"").split(/\s+/).map(function(x){return x.split("-").slice(0,-1).join("-")})},q.prototype.add=function(F,x){return!!this.canAdd(F,x)&&(this.remove(F),F.classList.add(this.keyName+"-"+x),!0)},q.prototype.remove=function(F){ue(F,this.keyName).forEach(function(I){F.classList.remove(I)}),0===F.classList.length&&F.removeAttribute("class")},q.prototype.value=function(F){var I=(ue(F,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(F,I)?I:""},q}(Z(12).default);Y.default=ee},function(qe,Y,Z){"use strict";var Q,ye=this&&this.__extends||(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,F){q.__proto__=F}||function(q,F){for(var x in F)F.hasOwnProperty(x)&&(q[x]=F[x])},function(q,F){function x(){this.constructor=q}Q(q,F),q.prototype=null===F?Object.create(F):(x.prototype=F.prototype,new x)});function ue(Q){var q=Q.split("-"),F=q.slice(1).map(function(x){return x[0].toUpperCase()+x.slice(1)}).join("");return q[0]+F}Object.defineProperty(Y,"__esModule",{value:!0});var ee=function(Q){function q(){return null!==Q&&Q.apply(this,arguments)||this}return ye(q,Q),q.keys=function(F){return(F.getAttribute("style")||"").split(";").map(function(x){return x.split(":")[0].trim()})},q.prototype.add=function(F,x){return!!this.canAdd(F,x)&&(F.style[ue(this.keyName)]=x,!0)},q.prototype.remove=function(F){F.style[ue(this.keyName)]="",F.getAttribute("style")||F.removeAttribute("style")},q.prototype.value=function(F){var x=F.style[ue(this.keyName)];return this.canAdd(F,x)?x:""},q}(Z(12).default);Y.default=ee},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=function(){function ee(Q,q){for(var F=0;F<q.length;F++){var x=q[F];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(Q,x.key,x)}}return function(Q,q,F){return q&&ee(Q.prototype,q),F&&ee(Q,F),Q}}();var ue=function(){function ee(Q,q){(function pe(ee,Q){if(!(ee instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,ee),this.quill=Q,this.options=q,this.modules={}}return ye(ee,[{key:"init",value:function(){var q=this;Object.keys(this.options.modules).forEach(function(F){null==q.modules[F]&&q.addModule(F)})}},{key:"addModule",value:function(q){var F=this.quill.constructor.import("modules/"+q);return this.modules[q]=new F(this.quill,this.options.modules[q]||{}),this.modules[q]}}]),ee}();ue.DEFAULTS={modules:{}},ue.themes={default:ue},Y.default=ue},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=function(){function k(A,V){for(var R=0;R<V.length;R++){var j=V[R];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(A,j.key,j)}}return function(A,V,R){return V&&k(A.prototype,V),R&&k(A,R),A}}(),pe=function k(A,V,R){null===A&&(A=Function.prototype);var j=Object.getOwnPropertyDescriptor(A,V);if(void 0===j){var ce=Object.getPrototypeOf(A);return null===ce?void 0:k(ce,V,R)}if("value"in j)return j.value;var ie=j.get;return void 0===ie?void 0:ie.call(R)},ee=F(Z(0)),q=F(Z(7));function F(k){return k&&k.__esModule?k:{default:k}}var N="\ufeff",O=function(k){function A(V){!function x(k,A){if(!(k instanceof A))throw new TypeError("Cannot call a class as a function")}(this,A);var R=function I(k,A){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!=typeof A&&"function"!=typeof A?k:A}(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,V));return R.contentNode=document.createElement("span"),R.contentNode.setAttribute("contenteditable",!1),[].slice.call(R.domNode.childNodes).forEach(function(j){R.contentNode.appendChild(j)}),R.leftGuard=document.createTextNode(N),R.rightGuard=document.createTextNode(N),R.domNode.appendChild(R.leftGuard),R.domNode.appendChild(R.contentNode),R.domNode.appendChild(R.rightGuard),R}return function $(k,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);k.prototype=Object.create(A&&A.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(k,A):k.__proto__=A)}(A,k),ye(A,[{key:"index",value:function(R,j){return R===this.leftGuard?0:R===this.rightGuard?1:pe(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"index",this).call(this,R,j)}},{key:"restore",value:function(R){var j=void 0,ce=void 0,ie=R.data.split(N).join("");if(R===this.leftGuard)if(this.prev instanceof q.default){var se=this.prev.length();this.prev.insertAt(se,ie),j={startNode:this.prev.domNode,startOffset:se+ie.length}}else ce=document.createTextNode(ie),this.parent.insertBefore(ee.default.create(ce),this),j={startNode:ce,startOffset:ie.length};else R===this.rightGuard&&(this.next instanceof q.default?(this.next.insertAt(0,ie),j={startNode:this.next.domNode,startOffset:ie.length}):(ce=document.createTextNode(ie),this.parent.insertBefore(ee.default.create(ce),this.next),j={startNode:ce,startOffset:ie.length}));return R.data=N,j}},{key:"update",value:function(R,j){var ce=this;R.forEach(function(ie){if("characterData"===ie.type&&(ie.target===ce.leftGuard||ie.target===ce.rightGuard)){var se=ce.restore(ie.target);se&&(j.range=se)}})}}]),A}(ee.default.Embed);Y.default=O},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.AlignStyle=Y.AlignClass=Y.AlignAttribute=void 0;var pe=function ue(x){return x&&x.__esModule?x:{default:x}}(Z(0));var ee={scope:pe.default.Scope.BLOCK,whitelist:["right","center","justify"]},Q=new pe.default.Attributor.Attribute("align","align",ee),q=new pe.default.Attributor.Class("align","ql-align",ee),F=new pe.default.Attributor.Style("align","text-align",ee);Y.AlignAttribute=Q,Y.AlignClass=q,Y.AlignStyle=F},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.BackgroundStyle=Y.BackgroundClass=void 0;var pe=function ee(F){return F&&F.__esModule?F:{default:F}}(Z(0)),ue=Z(26);var Q=new pe.default.Attributor.Class("background","ql-bg",{scope:pe.default.Scope.INLINE}),q=new ue.ColorAttributor("background","background-color",{scope:pe.default.Scope.INLINE});Y.BackgroundClass=Q,Y.BackgroundStyle=q},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.DirectionStyle=Y.DirectionClass=Y.DirectionAttribute=void 0;var pe=function ue(x){return x&&x.__esModule?x:{default:x}}(Z(0));var ee={scope:pe.default.Scope.BLOCK,whitelist:["rtl"]},Q=new pe.default.Attributor.Attribute("direction","dir",ee),q=new pe.default.Attributor.Class("direction","ql-direction",ee),F=new pe.default.Attributor.Style("direction","direction",ee);Y.DirectionAttribute=Q,Y.DirectionClass=q,Y.DirectionStyle=F},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.FontClass=Y.FontStyle=void 0;var ye=function(){function k(A,V){for(var R=0;R<V.length;R++){var j=V[R];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(A,j.key,j)}}return function(A,V,R){return V&&k(A.prototype,V),R&&k(A,R),A}}(),pe=function k(A,V,R){null===A&&(A=Function.prototype);var j=Object.getOwnPropertyDescriptor(A,V);if(void 0===j){var ce=Object.getPrototypeOf(A);return null===ce?void 0:k(ce,V,R)}if("value"in j)return j.value;var ie=j.get;return void 0===ie?void 0:ie.call(R)},ee=function Q(k){return k&&k.__esModule?k:{default:k}}(Z(0));var I={scope:ee.default.Scope.INLINE,whitelist:["serif","monospace"]},$=new ee.default.Attributor.Class("font","ql-font",I),N=function(k){function A(){return function q(k,A){if(!(k instanceof A))throw new TypeError("Cannot call a class as a function")}(this,A),function F(k,A){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!=typeof A&&"function"!=typeof A?k:A}(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return function x(k,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);k.prototype=Object.create(A&&A.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(k,A):k.__proto__=A)}(A,k),ye(A,[{key:"value",value:function(R){return pe(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"value",this).call(this,R).replace(/["']/g,"")}}]),A}(ee.default.Attributor.Style),O=new N("font","font-family",I);Y.FontStyle=O,Y.FontClass=$},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.SizeStyle=Y.SizeClass=void 0;var pe=function ue(q){return q&&q.__esModule?q:{default:q}}(Z(0));var ee=new pe.default.Attributor.Class("size","ql-size",{scope:pe.default.Scope.INLINE,whitelist:["small","large","huge"]}),Q=new pe.default.Attributor.Style("size","font-size",{scope:pe.default.Scope.INLINE,whitelist:["10px","18px","32px"]});Y.SizeClass=ee,Y.SizeStyle=Q},function(qe,Y,Z){"use strict";qe.exports={align:{"":Z(76),center:Z(77),right:Z(78),justify:Z(79)},background:Z(80),blockquote:Z(81),bold:Z(82),clean:Z(83),code:Z(58),"code-block":Z(58),color:Z(84),direction:{"":Z(85),rtl:Z(86)},float:{center:Z(87),full:Z(88),left:Z(89),right:Z(90)},formula:Z(91),header:{1:Z(92),2:Z(93)},italic:Z(94),image:Z(95),indent:{"+1":Z(96),"-1":Z(97)},link:Z(98),list:{ordered:Z(99),bullet:Z(100),check:Z(101)},script:{sub:Z(102),super:Z(103)},strike:Z(104),underline:Z(105),video:Z(106)}},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.getLastChangeIndex=Y.default=void 0;var ye=function(){function V(R,j){for(var ce=0;ce<j.length;ce++){var ie=j[ce];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(R,ie.key,ie)}}return function(R,j,ce){return j&&V(R.prototype,j),ce&&V(R,ce),R}}(),ue=x(Z(0)),Q=x(Z(5));function x(V){return V&&V.__esModule?V:{default:V}}var O=function(V){function R(j,ce){!function I(V,R){if(!(V instanceof R))throw new TypeError("Cannot call a class as a function")}(this,R);var ie=function $(V,R){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!R||"object"!=typeof R&&"function"!=typeof R?V:R}(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,j,ce));return ie.lastRecorded=0,ie.ignoreChange=!1,ie.clear(),ie.quill.on(Q.default.events.EDITOR_CHANGE,function(se,_e,J,G){se!==Q.default.events.TEXT_CHANGE||ie.ignoreChange||(ie.options.userOnly&&G!==Q.default.sources.USER?ie.transform(_e):ie.record(_e,J))}),ie.quill.keyboard.addBinding({key:"Z",shortKey:!0},ie.undo.bind(ie)),ie.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},ie.redo.bind(ie)),/Win/i.test(navigator.platform)&&ie.quill.keyboard.addBinding({key:"Y",shortKey:!0},ie.redo.bind(ie)),ie}return function N(V,R){if("function"!=typeof R&&null!==R)throw new TypeError("Super expression must either be null or a function, not "+typeof R);V.prototype=Object.create(R&&R.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(V,R):V.__proto__=R)}(R,V),ye(R,[{key:"change",value:function(ce,ie){if(0!==this.stack[ce].length){var se=this.stack[ce].pop();this.stack[ie].push(se),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(se[ce],Q.default.sources.USER),this.ignoreChange=!1;var _e=A(se[ce]);this.quill.setSelection(_e)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(ce,ie){if(0!==ce.ops.length){this.stack.redo=[];var se=this.quill.getContents().diff(ie),_e=Date.now();if(this.lastRecorded+this.options.delay>_e&&this.stack.undo.length>0){var J=this.stack.undo.pop();se=se.compose(J.undo),ce=J.redo.compose(ce)}else this.lastRecorded=_e;this.stack.undo.push({redo:ce,undo:se}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(ce){this.stack.undo.forEach(function(ie){ie.undo=ce.transform(ie.undo,!0),ie.redo=ce.transform(ie.redo,!0)}),this.stack.redo.forEach(function(ie){ie.undo=ce.transform(ie.undo,!0),ie.redo=ce.transform(ie.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),R}(x(Z(9)).default);function A(V){var R=V.reduce(function(ce,ie){return ce+(ie.delete||0)},0),j=V.length()-R;return function k(V){var R=V.ops[V.ops.length-1];return null!=R&&(null!=R.insert?"string"==typeof R.insert&&R.insert.endsWith("\n"):null!=R.attributes&&Object.keys(R.attributes).some(function(j){return null!=ue.default.query(j,ue.default.Scope.BLOCK)}))}(V)&&(j-=1),j}O.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},Y.default=O,Y.getLastChangeIndex=A},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.default=Y.BaseTooltip=void 0;var ye=function(){function Se(De,Ze){for(var Ye=0;Ye<Ze.length;Ye++){var we=Ze[Ye];we.enumerable=we.enumerable||!1,we.configurable=!0,"value"in we&&(we.writable=!0),Object.defineProperty(De,we.key,we)}}return function(De,Ze,Ye){return Ze&&Se(De.prototype,Ze),Ye&&Se(De,Ye),De}}(),pe=function Se(De,Ze,Ye){null===De&&(De=Function.prototype);var we=Object.getOwnPropertyDescriptor(De,Ze);if(void 0===we){var Ke=Object.getPrototypeOf(De);return null===Ke?void 0:Se(Ke,Ze,Ye)}if("value"in we)return we.value;var lt=we.get;return void 0===lt?void 0:lt.call(Ye)},ee=_e(Z(3)),q=_e(Z(2)),x=_e(Z(8)),$=_e(Z(23)),O=_e(Z(34)),A=_e(Z(59)),R=_e(Z(60)),ce=_e(Z(28)),se=_e(Z(61));function _e(Se){return Se&&Se.__esModule?Se:{default:Se}}function J(Se,De){if(!(Se instanceof De))throw new TypeError("Cannot call a class as a function")}function G(Se,De){if(!Se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!De||"object"!=typeof De&&"function"!=typeof De?Se:De}function U(Se,De){if("function"!=typeof De&&null!==De)throw new TypeError("Super expression must either be null or a function, not "+typeof De);Se.prototype=Object.create(De&&De.prototype,{constructor:{value:Se,enumerable:!1,writable:!0,configurable:!0}}),De&&(Object.setPrototypeOf?Object.setPrototypeOf(Se,De):Se.__proto__=De)}var B=[!1,"center","right","justify"],ae=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],ve=[!1,"serif","monospace"],Ue=["1","2","3",!1],je=["small",!1,"large","huge"],dt=function(Se){function De(Ze,Ye){J(this,De);var we=G(this,(De.__proto__||Object.getPrototypeOf(De)).call(this,Ze,Ye));return Ze.emitter.listenDOM("click",document.body,function lt(ct){if(!document.body.contains(Ze.root))return document.body.removeEventListener("click",lt);null!=we.tooltip&&!we.tooltip.root.contains(ct.target)&&document.activeElement!==we.tooltip.textbox&&!we.quill.hasFocus()&&we.tooltip.hide(),null!=we.pickers&&we.pickers.forEach(function(It){It.container.contains(ct.target)||It.close()})}),we}return U(De,Se),ye(De,[{key:"addModule",value:function(Ye){var we=pe(De.prototype.__proto__||Object.getPrototypeOf(De.prototype),"addModule",this).call(this,Ye);return"toolbar"===Ye&&this.extendToolbar(we),we}},{key:"buildButtons",value:function(Ye,we){Ye.forEach(function(Ke){(Ke.getAttribute("class")||"").split(/\s+/).forEach(function(ct){if(ct.startsWith("ql-")&&(ct=ct.slice(3),null!=we[ct]))if("direction"===ct)Ke.innerHTML=we[ct][""]+we[ct].rtl;else if("string"==typeof we[ct])Ke.innerHTML=we[ct];else{var It=Ke.value||"";null!=It&&we[ct][It]&&(Ke.innerHTML=we[ct][It])}})})}},{key:"buildPickers",value:function(Ye,we){var Ke=this;this.pickers=Ye.map(function(ct){if(ct.classList.contains("ql-align"))return null==ct.querySelector("option")&&he(ct,B),new R.default(ct,we.align);if(ct.classList.contains("ql-background")||ct.classList.contains("ql-color")){var It=ct.classList.contains("ql-background")?"background":"color";return null==ct.querySelector("option")&&he(ct,ae,"background"===It?"#ffffff":"#000000"),new A.default(ct,we[It])}return null==ct.querySelector("option")&&(ct.classList.contains("ql-font")?he(ct,ve):ct.classList.contains("ql-header")?he(ct,Ue):ct.classList.contains("ql-size")&&he(ct,je)),new ce.default(ct)}),this.quill.on(x.default.events.EDITOR_CHANGE,function(){Ke.pickers.forEach(function(It){It.update()})})}}]),De}(O.default);dt.DEFAULTS=(0,ee.default)(!0,{},O.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var De=this,Ze=this.container.querySelector("input.ql-image[type=file]");null==Ze&&((Ze=document.createElement("input")).setAttribute("type","file"),Ze.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),Ze.classList.add("ql-image"),Ze.addEventListener("change",function(){if(null!=Ze.files&&null!=Ze.files[0]){var Ye=new FileReader;Ye.onload=function(we){var Ke=De.quill.getSelection(!0);De.quill.updateContents((new q.default).retain(Ke.index).delete(Ke.length).insert({image:we.target.result}),x.default.sources.USER),De.quill.setSelection(Ke.index+1,x.default.sources.SILENT),Ze.value=""},Ye.readAsDataURL(Ze.files[0])}}),this.container.appendChild(Ze)),Ze.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Ae=function(Se){function De(Ze,Ye){J(this,De);var we=G(this,(De.__proto__||Object.getPrototypeOf(De)).call(this,Ze,Ye));return we.textbox=we.root.querySelector('input[type="text"]'),we.listen(),we}return U(De,Se),ye(De,[{key:"listen",value:function(){var Ye=this;this.textbox.addEventListener("keydown",function(we){$.default.match(we,"enter")?(Ye.save(),we.preventDefault()):$.default.match(we,"escape")&&(Ye.cancel(),we.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var Ye=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",we=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=we?this.textbox.value=we:Ye!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+Ye)||""),this.root.setAttribute("data-mode",Ye)}},{key:"restoreFocus",value:function(){var Ye=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=Ye}},{key:"save",value:function(){var Ye=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var we=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",Ye,x.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",Ye,x.default.sources.USER)),this.quill.root.scrollTop=we;break;case"video":Ye=function ke(Se){var De=Se.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||Se.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return De?(De[1]||"https")+"://www.youtube.com/embed/"+De[2]+"?showinfo=0":(De=Se.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(De[1]||"https")+"://player.vimeo.com/video/"+De[2]+"/":Se}(Ye);case"formula":if(!Ye)break;var Ke=this.quill.getSelection(!0);if(null!=Ke){var lt=Ke.index+Ke.length;this.quill.insertEmbed(lt,this.root.getAttribute("data-mode"),Ye,x.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(lt+1," ",x.default.sources.USER),this.quill.setSelection(lt+2,x.default.sources.USER)}}this.textbox.value="",this.hide()}}]),De}(se.default);function he(Se,De){var Ze=arguments.length>2&&void 0!==arguments[2]&&arguments[2];De.forEach(function(Ye){var we=document.createElement("option");Ye===Ze?we.setAttribute("selected","selected"):we.setAttribute("value",Ye),Se.appendChild(we)})}Y.BaseTooltip=Ae,Y.default=dt},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=function(){function pe(){this.head=this.tail=null,this.length=0}return pe.prototype.append=function(){for(var ue=[],ee=0;ee<arguments.length;ee++)ue[ee]=arguments[ee];this.insertBefore(ue[0],null),ue.length>1&&this.append.apply(this,ue.slice(1))},pe.prototype.contains=function(ue){for(var ee,Q=this.iterator();ee=Q();)if(ee===ue)return!0;return!1},pe.prototype.insertBefore=function(ue,ee){ue&&(ue.next=ee,null!=ee?(ue.prev=ee.prev,null!=ee.prev&&(ee.prev.next=ue),ee.prev=ue,ee===this.head&&(this.head=ue)):null!=this.tail?(this.tail.next=ue,ue.prev=this.tail,this.tail=ue):(ue.prev=null,this.head=this.tail=ue),this.length+=1)},pe.prototype.offset=function(ue){for(var ee=0,Q=this.head;null!=Q;){if(Q===ue)return ee;ee+=Q.length(),Q=Q.next}return-1},pe.prototype.remove=function(ue){this.contains(ue)&&(null!=ue.prev&&(ue.prev.next=ue.next),null!=ue.next&&(ue.next.prev=ue.prev),ue===this.head&&(this.head=ue.next),ue===this.tail&&(this.tail=ue.prev),this.length-=1)},pe.prototype.iterator=function(ue){return void 0===ue&&(ue=this.head),function(){var ee=ue;return null!=ue&&(ue=ue.next),ee}},pe.prototype.find=function(ue,ee){void 0===ee&&(ee=!1);for(var Q,q=this.iterator();Q=q();){var F=Q.length();if(ue<F||ee&&ue===F&&(null==Q.next||0!==Q.next.length()))return[Q,ue];ue-=F}return[null,0]},pe.prototype.forEach=function(ue){for(var ee,Q=this.iterator();ee=Q();)ue(ee)},pe.prototype.forEachAt=function(ue,ee,Q){if(!(ee<=0))for(var I,q=this.find(ue),$=ue-q[1],N=this.iterator(q[0]);(I=N())&&$<ue+ee;){var O=I.length();ue>$?Q(I,ue-$,Math.min(ee,$+O-ue)):Q(I,0,Math.min(O,ue+ee-$)),$+=O}},pe.prototype.map=function(ue){return this.reduce(function(ee,Q){return ee.push(ue(Q)),ee},[])},pe.prototype.reduce=function(ue,ee){for(var Q,q=this.iterator();Q=q();)ee=ue(ee,Q);return ee},pe}();Y.default=ye},function(qe,Y,Z){"use strict";var F,ye=this&&this.__extends||(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,I){x.__proto__=I}||function(x,I){for(var $ in I)I.hasOwnProperty($)&&(x[$]=I[$])},function(x,I){function $(){this.constructor=x}F(x,I),x.prototype=null===I?Object.create(I):($.prototype=I.prototype,new $)});Object.defineProperty(Y,"__esModule",{value:!0});var pe=Z(17),ue=Z(1),ee={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},q=function(F){function x(I){var $=F.call(this,I)||this;return $.scroll=$,$.observer=new MutationObserver(function(N){$.update(N)}),$.observer.observe($.domNode,ee),$.attach(),$}return ye(x,F),x.prototype.detach=function(){F.prototype.detach.call(this),this.observer.disconnect()},x.prototype.deleteAt=function(I,$){this.update(),0===I&&$===this.length()?this.children.forEach(function(N){N.remove()}):F.prototype.deleteAt.call(this,I,$)},x.prototype.formatAt=function(I,$,N,O){this.update(),F.prototype.formatAt.call(this,I,$,N,O)},x.prototype.insertAt=function(I,$,N){this.update(),F.prototype.insertAt.call(this,I,$,N)},x.prototype.optimize=function(I,$){var N=this;void 0===I&&(I=[]),void 0===$&&($={}),F.prototype.optimize.call(this,$);for(var O=[].slice.call(this.observer.takeRecords());O.length>0;)I.push(O.pop());for(var k=function(j,ce){void 0===ce&&(ce=!0),null!=j&&j!==N&&null!=j.domNode.parentNode&&(null==j.domNode[ue.DATA_KEY].mutations&&(j.domNode[ue.DATA_KEY].mutations=[]),ce&&k(j.parent))},A=function(j){null==j.domNode[ue.DATA_KEY]||null==j.domNode[ue.DATA_KEY].mutations||(j instanceof pe.default&&j.children.forEach(A),j.optimize($))},V=I,R=0;V.length>0;R+=1){if(R>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(V.forEach(function(j){var ce=ue.find(j.target,!0);null!=ce&&(ce.domNode===j.target&&("childList"===j.type?(k(ue.find(j.previousSibling,!1)),[].forEach.call(j.addedNodes,function(ie){var se=ue.find(ie,!1);k(se,!1),se instanceof pe.default&&se.children.forEach(function(_e){k(_e,!1)})})):"attributes"===j.type&&k(ce.prev)),k(ce))}),this.children.forEach(A),O=(V=[].slice.call(this.observer.takeRecords())).slice();O.length>0;)I.push(O.pop())}},x.prototype.update=function(I,$){var N=this;void 0===$&&($={}),(I=I||this.observer.takeRecords()).map(function(O){var k=ue.find(O.target,!0);return null==k?null:null==k.domNode[ue.DATA_KEY].mutations?(k.domNode[ue.DATA_KEY].mutations=[O],k):(k.domNode[ue.DATA_KEY].mutations.push(O),null)}).forEach(function(O){null==O||O===N||null==O.domNode[ue.DATA_KEY]||O.update(O.domNode[ue.DATA_KEY].mutations||[],$)}),null!=this.domNode[ue.DATA_KEY].mutations&&F.prototype.update.call(this,this.domNode[ue.DATA_KEY].mutations,$),this.optimize(I,$)},x.blotName="scroll",x.defaultChild="block",x.scope=ue.Scope.BLOCK_BLOT,x.tagName="DIV",x}(pe.default);Y.default=q},function(qe,Y,Z){"use strict";var q,ye=this&&this.__extends||(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,x){F.__proto__=x}||function(F,x){for(var I in x)x.hasOwnProperty(I)&&(F[I]=x[I])},function(F,x){function I(){this.constructor=F}q(F,x),F.prototype=null===x?Object.create(x):(I.prototype=x.prototype,new I)});Object.defineProperty(Y,"__esModule",{value:!0});var pe=Z(18),ue=Z(1);var Q=function(q){function F(){return null!==q&&q.apply(this,arguments)||this}return ye(F,q),F.formats=function(x){if(x.tagName!==F.tagName)return q.formats.call(this,x)},F.prototype.format=function(x,I){var $=this;x!==this.statics.blotName||I?q.prototype.format.call(this,x,I):(this.children.forEach(function(N){N instanceof pe.default||(N=N.wrap(F.blotName,!0)),$.attributes.copy(N)}),this.unwrap())},F.prototype.formatAt=function(x,I,$,N){null!=this.formats()[$]||ue.query($,ue.Scope.ATTRIBUTE)?this.isolate(x,I).format($,N):q.prototype.formatAt.call(this,x,I,$,N)},F.prototype.optimize=function(x){q.prototype.optimize.call(this,x);var I=this.formats();if(0===Object.keys(I).length)return this.unwrap();var $=this.next;$ instanceof F&&$.prev===this&&function ee(q,F){if(Object.keys(q).length!==Object.keys(F).length)return!1;for(var x in q)if(q[x]!==F[x])return!1;return!0}(I,$.formats())&&($.moveChildren(this),$.remove())},F.blotName="inline",F.scope=ue.Scope.INLINE_BLOT,F.tagName="SPAN",F}(pe.default);Y.default=Q},function(qe,Y,Z){"use strict";var Q,ye=this&&this.__extends||(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,F){q.__proto__=F}||function(q,F){for(var x in F)F.hasOwnProperty(x)&&(q[x]=F[x])},function(q,F){function x(){this.constructor=q}Q(q,F),q.prototype=null===F?Object.create(F):(x.prototype=F.prototype,new x)});Object.defineProperty(Y,"__esModule",{value:!0});var pe=Z(18),ue=Z(1),ee=function(Q){function q(){return null!==Q&&Q.apply(this,arguments)||this}return ye(q,Q),q.formats=function(F){var x=ue.query(q.blotName).tagName;if(F.tagName!==x)return Q.formats.call(this,F)},q.prototype.format=function(F,x){null!=ue.query(F,ue.Scope.BLOCK)&&(F!==this.statics.blotName||x?Q.prototype.format.call(this,F,x):this.replaceWith(q.blotName))},q.prototype.formatAt=function(F,x,I,$){null!=ue.query(I,ue.Scope.BLOCK)?this.format(I,$):Q.prototype.formatAt.call(this,F,x,I,$)},q.prototype.insertAt=function(F,x,I){if(null==I||null!=ue.query(x,ue.Scope.INLINE))Q.prototype.insertAt.call(this,F,x,I);else{var $=this.split(F),N=ue.create(x,I);$.parent.insertBefore(N,$)}},q.prototype.update=function(F,x){navigator.userAgent.match(/Trident/)?this.build():Q.prototype.update.call(this,F,x)},q.blotName="block",q.scope=ue.Scope.BLOCK_BLOT,q.tagName="P",q}(pe.default);Y.default=ee},function(qe,Y,Z){"use strict";var ee,ye=this&&this.__extends||(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,q){Q.__proto__=q}||function(Q,q){for(var F in q)q.hasOwnProperty(F)&&(Q[F]=q[F])},function(Q,q){function F(){this.constructor=Q}ee(Q,q),Q.prototype=null===q?Object.create(q):(F.prototype=q.prototype,new F)});Object.defineProperty(Y,"__esModule",{value:!0});var ue=function(ee){function Q(){return null!==ee&&ee.apply(this,arguments)||this}return ye(Q,ee),Q.formats=function(q){},Q.prototype.format=function(q,F){ee.prototype.formatAt.call(this,0,this.length(),q,F)},Q.prototype.formatAt=function(q,F,x,I){0===q&&F===this.length()?this.format(x,I):ee.prototype.formatAt.call(this,q,F,x,I)},Q.prototype.formats=function(){return this.statics.formats(this.domNode)},Q}(Z(19).default);Y.default=ue},function(qe,Y,Z){"use strict";var Q,ye=this&&this.__extends||(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,F){q.__proto__=F}||function(q,F){for(var x in F)F.hasOwnProperty(x)&&(q[x]=F[x])},function(q,F){function x(){this.constructor=q}Q(q,F),q.prototype=null===F?Object.create(F):(x.prototype=F.prototype,new x)});Object.defineProperty(Y,"__esModule",{value:!0});var pe=Z(19),ue=Z(1),ee=function(Q){function q(F){var x=Q.call(this,F)||this;return x.text=x.statics.value(x.domNode),x}return ye(q,Q),q.create=function(F){return document.createTextNode(F)},q.value=function(F){var x=F.data;return x.normalize&&(x=x.normalize()),x},q.prototype.deleteAt=function(F,x){this.domNode.data=this.text=this.text.slice(0,F)+this.text.slice(F+x)},q.prototype.index=function(F,x){return this.domNode===F?x:-1},q.prototype.insertAt=function(F,x,I){null==I?(this.text=this.text.slice(0,F)+x+this.text.slice(F),this.domNode.data=this.text):Q.prototype.insertAt.call(this,F,x,I)},q.prototype.length=function(){return this.text.length},q.prototype.optimize=function(F){Q.prototype.optimize.call(this,F),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof q&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},q.prototype.position=function(F,x){return void 0===x&&(x=!1),[this.domNode,F]},q.prototype.split=function(F,x){if(void 0===x&&(x=!1),!x){if(0===F)return this;if(F===this.length())return this.next}var I=ue.create(this.domNode.splitText(F));return this.parent.insertBefore(I,this.next),this.text=this.statics.value(this.domNode),I},q.prototype.update=function(F,x){var I=this;F.some(function($){return"characterData"===$.type&&$.target===I.domNode})&&(this.text=this.statics.value(this.domNode))},q.prototype.value=function(){return this.text},q.blotName="text",q.scope=ue.Scope.INLINE_BLOT,q}(pe.default);Y.default=ee},function(qe,Y,Z){"use strict";var ye=document.createElement("div");if(ye.classList.toggle("test-class",!1),ye.classList.contains("test-class")){var pe=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(ue,ee){return arguments.length>1&&!this.contains(ue)==!ee?ee:pe.call(this,ue)}}String.prototype.startsWith||(String.prototype.startsWith=function(ue,ee){return this.substr(ee=ee||0,ue.length)===ue}),String.prototype.endsWith||(String.prototype.endsWith=function(ue,ee){var Q=this.toString();("number"!=typeof ee||!isFinite(ee)||Math.floor(ee)!==ee||ee>Q.length)&&(ee=Q.length);var q=Q.indexOf(ue,ee-=ue.length);return-1!==q&&q===ee}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(ee){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof ee)throw new TypeError("predicate must be a function");for(var x,Q=Object(this),q=Q.length>>>0,F=arguments[1],I=0;I<q;I++)if(ee.call(F,x=Q[I],I,Q))return x}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(qe,Y){var Z=-1,ye=1,pe=0;function ue(R,j,ce){if(R==j)return R?[[pe,R]]:[];(ce<0||R.length<ce)&&(ce=null);var ie=F(R,j),se=R.substring(0,ie);ie=x(R=R.substring(ie),j=j.substring(ie));var _e=R.substring(R.length-ie),J=function ee(R,j){var ce;if(!R)return[[ye,j]];if(!j)return[[Z,R]];var ie=R.length>j.length?R:j,se=R.length>j.length?j:R,_e=ie.indexOf(se);if(-1!=_e)return ce=[[ye,ie.substring(0,_e)],[pe,se],[ye,ie.substring(_e+se.length)]],R.length>j.length&&(ce[0][0]=ce[2][0]=Z),ce;if(1==se.length)return[[Z,R],[ye,j]];var J=function I(R,j){var ce=R.length>j.length?R:j,ie=R.length>j.length?j:R;if(ce.length<4||2*ie.length<ce.length)return null;function se(je,dt,Ae){for(var De,Ze,Ye,we,ke=je.substring(Ae,Ae+Math.floor(je.length/4)),he=-1,Se="";-1!=(he=dt.indexOf(ke,he+1));){var Ke=F(je.substring(Ae),dt.substring(he)),lt=x(je.substring(0,Ae),dt.substring(0,he));Se.length<lt+Ke&&(Se=dt.substring(he-lt,he)+dt.substring(he,he+Ke),De=je.substring(0,Ae-lt),Ze=je.substring(Ae+Ke),Ye=dt.substring(0,he-lt),we=dt.substring(he+Ke))}return 2*Se.length>=je.length?[De,Ze,Ye,we,Se]:null}var G,U,B,ae,ve,_e=se(ce,ie,Math.ceil(ce.length/4)),J=se(ce,ie,Math.ceil(ce.length/2));return _e||J?(G=J?_e&&_e[4].length>J[4].length?_e:J:_e,R.length>j.length?(U=G[0],B=G[1],ae=G[2],ve=G[3]):(ae=G[0],ve=G[1],U=G[2],B=G[3]),[U,B,ae,ve,G[4]]):null}(R,j);if(J){var U=J[1],ae=J[3],ve=J[4],Ue=ue(J[0],J[2]),je=ue(U,ae);return Ue.concat([[pe,ve]],je)}return function Q(R,j){for(var ce=R.length,ie=j.length,se=Math.ceil((ce+ie)/2),_e=se,J=2*se,G=new Array(J),U=new Array(J),B=0;B<J;B++)G[B]=-1,U[B]=-1;G[_e+1]=0,U[_e+1]=0;for(var ae=ce-ie,ve=ae%2!=0,Ue=0,je=0,dt=0,Ae=0,ke=0;ke<se;ke++){for(var he=-ke+Ue;he<=ke-je;he+=2){for(var Se=_e+he,Ze=(De=he==-ke||he!=ke&&G[Se-1]<G[Se+1]?G[Se+1]:G[Se-1]+1)-he;De<ce&&Ze<ie&&R.charAt(De)==j.charAt(Ze);)De++,Ze++;if(G[Se]=De,De>ce)je+=2;else if(Ze>ie)Ue+=2;else if(ve&&(Ye=_e+ae-he)>=0&&Ye<J&&-1!=U[Ye]&&De>=(we=ce-U[Ye]))return q(R,j,De,Ze)}for(var Ke=-ke+dt;Ke<=ke-Ae;Ke+=2){for(var we,Ye=_e+Ke,lt=(we=Ke==-ke||Ke!=ke&&U[Ye-1]<U[Ye+1]?U[Ye+1]:U[Ye-1]+1)-Ke;we<ce&&lt<ie&&R.charAt(ce-we-1)==j.charAt(ie-lt-1);)we++,lt++;if(U[Ye]=we,we>ce)Ae+=2;else if(lt>ie)dt+=2;else if(!ve){var De;if((Se=_e+ae-Ke)>=0&&Se<J&&-1!=G[Se]&&(Ze=_e+(De=G[Se])-Se,De>=(we=ce-we)))return q(R,j,De,Ze)}}}return[[Z,R],[ye,j]]}(R,j)}(R=R.substring(0,R.length-ie),j=j.substring(0,j.length-ie));return se&&J.unshift([pe,se]),_e&&J.push([pe,_e]),$(J),null!=ce&&(J=function k(R,j){var ce=function O(R,j){if(0===j)return[pe,R];for(var ce=0,ie=0;ie<R.length;ie++){var se=R[ie];if(se[0]===Z||se[0]===pe){var _e=ce+se[1].length;if(j===_e)return[ie+1,R];if(j<_e){R=R.slice();var J=j-ce,G=[se[0],se[1].slice(0,J)],U=[se[0],se[1].slice(J)];return R.splice(ie,1,G,U),[ie+1,R]}ce=_e}}throw new Error("cursor_pos is out of bounds!")}(R,j),ie=ce[1],se=ce[0],_e=ie[se],J=ie[se+1];if(null==_e)return R;if(_e[0]!==pe)return R;if(null!=J&&_e[1]+J[1]===J[1]+_e[1])return ie.splice(se,2,J,_e),V(ie,se,2);if(null!=J&&0===J[1].indexOf(_e[1])){ie.splice(se,2,[J[0],_e[1]],[0,_e[1]]);var G=J[1].slice(_e[1].length);return G.length>0&&ie.splice(se+2,0,[J[0],G]),V(ie,se,3)}return R}(J,ce)),function A(R){for(var j=!1,ce=function(J){return J.charCodeAt(0)>=56320&&J.charCodeAt(0)<=57343},ie=function(J){return J.charCodeAt(J.length-1)>=55296&&J.charCodeAt(J.length-1)<=56319},se=2;se<R.length;se+=1)R[se-2][0]===pe&&ie(R[se-2][1])&&R[se-1][0]===Z&&ce(R[se-1][1])&&R[se][0]===ye&&ce(R[se][1])&&(j=!0,R[se-1][1]=R[se-2][1].slice(-1)+R[se-1][1],R[se][1]=R[se-2][1].slice(-1)+R[se][1],R[se-2][1]=R[se-2][1].slice(0,-1));if(!j)return R;var _e=[];for(se=0;se<R.length;se+=1)R[se][1].length>0&&_e.push(R[se]);return _e}(J)}function q(R,j,ce,ie){var se=R.substring(0,ce),_e=j.substring(0,ie),J=R.substring(ce),G=j.substring(ie),U=ue(se,_e),B=ue(J,G);return U.concat(B)}function F(R,j){if(!R||!j||R.charAt(0)!=j.charAt(0))return 0;for(var ce=0,ie=Math.min(R.length,j.length),se=ie,_e=0;ce<se;)R.substring(_e,se)==j.substring(_e,se)?_e=ce=se:ie=se,se=Math.floor((ie-ce)/2+ce);return se}function x(R,j){if(!R||!j||R.charAt(R.length-1)!=j.charAt(j.length-1))return 0;for(var ce=0,ie=Math.min(R.length,j.length),se=ie,_e=0;ce<se;)R.substring(R.length-se,R.length-_e)==j.substring(j.length-se,j.length-_e)?_e=ce=se:ie=se,se=Math.floor((ie-ce)/2+ce);return se}function $(R){R.push([pe,""]);for(var J,j=0,ce=0,ie=0,se="",_e="";j<R.length;)switch(R[j][0]){case ye:ie++,_e+=R[j][1],j++;break;case Z:ce++,se+=R[j][1],j++;break;case pe:ce+ie>1?(0!==ce&&0!==ie&&(0!==(J=F(_e,se))&&(j-ce-ie>0&&R[j-ce-ie-1][0]==pe?R[j-ce-ie-1][1]+=_e.substring(0,J):(R.splice(0,0,[pe,_e.substring(0,J)]),j++),_e=_e.substring(J),se=se.substring(J)),0!==(J=x(_e,se))&&(R[j][1]=_e.substring(_e.length-J)+R[j][1],_e=_e.substring(0,_e.length-J),se=se.substring(0,se.length-J))),0===ce?R.splice(j-ie,ce+ie,[ye,_e]):0===ie?R.splice(j-ce,ce+ie,[Z,se]):R.splice(j-ce-ie,ce+ie,[Z,se],[ye,_e]),j=j-ce-ie+(ce?1:0)+(ie?1:0)+1):0!==j&&R[j-1][0]==pe?(R[j-1][1]+=R[j][1],R.splice(j,1)):j++,ie=0,ce=0,se="",_e=""}""===R[R.length-1][1]&&R.pop();var G=!1;for(j=1;j<R.length-1;)R[j-1][0]==pe&&R[j+1][0]==pe&&(R[j][1].substring(R[j][1].length-R[j-1][1].length)==R[j-1][1]?(R[j][1]=R[j-1][1]+R[j][1].substring(0,R[j][1].length-R[j-1][1].length),R[j+1][1]=R[j-1][1]+R[j+1][1],R.splice(j-1,1),G=!0):R[j][1].substring(0,R[j+1][1].length)==R[j+1][1]&&(R[j-1][1]+=R[j+1][1],R[j][1]=R[j][1].substring(R[j+1][1].length)+R[j+1][1],R.splice(j+1,1),G=!0)),j++;G&&$(R)}var N=ue;function V(R,j,ce){for(var ie=j+ce-1;ie>=0&&ie>=j-1;ie--)if(ie+1<R.length){var se=R[ie],_e=R[ie+1];se[0]===_e[1]&&R.splice(ie,2,[se[0],se[1]+_e[1]])}return R}N.INSERT=ye,N.DELETE=Z,N.EQUAL=pe,qe.exports=N},function(qe,Y){function Z(ye){var pe=[];for(var ue in ye)pe.push(ue);return pe}(qe.exports="function"==typeof Object.keys?Object.keys:Z).shim=Z},function(qe,Y){var Z="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function ye(ue){return"[object Arguments]"==Object.prototype.toString.call(ue)}function pe(ue){return ue&&"object"==typeof ue&&"number"==typeof ue.length&&Object.prototype.hasOwnProperty.call(ue,"callee")&&!Object.prototype.propertyIsEnumerable.call(ue,"callee")||!1}(Y=qe.exports=Z?ye:pe).supported=ye,Y.unsupported=pe},function(qe,Y){"use strict";var Z=Object.prototype.hasOwnProperty,ye="~";function pe(){}function ue(Q,q,F){this.fn=Q,this.context=q,this.once=F||!1}function ee(){this._events=new pe,this._eventsCount=0}Object.create&&(pe.prototype=Object.create(null),(new pe).__proto__||(ye=!1)),ee.prototype.eventNames=function(){var F,x,q=[];if(0===this._eventsCount)return q;for(x in F=this._events)Z.call(F,x)&&q.push(ye?x.slice(1):x);return Object.getOwnPropertySymbols?q.concat(Object.getOwnPropertySymbols(F)):q},ee.prototype.listeners=function(q,F){var I=this._events[ye?ye+q:q];if(F)return!!I;if(!I)return[];if(I.fn)return[I.fn];for(var $=0,N=I.length,O=new Array(N);$<N;$++)O[$]=I[$].fn;return O},ee.prototype.emit=function(q,F,x,I,$,N){var O=ye?ye+q:q;if(!this._events[O])return!1;var V,R,k=this._events[O],A=arguments.length;if(k.fn){switch(k.once&&this.removeListener(q,k.fn,void 0,!0),A){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,F),!0;case 3:return k.fn.call(k.context,F,x),!0;case 4:return k.fn.call(k.context,F,x,I),!0;case 5:return k.fn.call(k.context,F,x,I,$),!0;case 6:return k.fn.call(k.context,F,x,I,$,N),!0}for(R=1,V=new Array(A-1);R<A;R++)V[R-1]=arguments[R];k.fn.apply(k.context,V)}else{var ce,j=k.length;for(R=0;R<j;R++)switch(k[R].once&&this.removeListener(q,k[R].fn,void 0,!0),A){case 1:k[R].fn.call(k[R].context);break;case 2:k[R].fn.call(k[R].context,F);break;case 3:k[R].fn.call(k[R].context,F,x);break;case 4:k[R].fn.call(k[R].context,F,x,I);break;default:if(!V)for(ce=1,V=new Array(A-1);ce<A;ce++)V[ce-1]=arguments[ce];k[R].fn.apply(k[R].context,V)}}return!0},ee.prototype.on=function(q,F,x){var I=new ue(F,x||this),$=ye?ye+q:q;return this._events[$]?this._events[$].fn?this._events[$]=[this._events[$],I]:this._events[$].push(I):(this._events[$]=I,this._eventsCount++),this},ee.prototype.once=function(q,F,x){var I=new ue(F,x||this,!0),$=ye?ye+q:q;return this._events[$]?this._events[$].fn?this._events[$]=[this._events[$],I]:this._events[$].push(I):(this._events[$]=I,this._eventsCount++),this},ee.prototype.removeListener=function(q,F,x,I){var $=ye?ye+q:q;if(!this._events[$])return this;if(!F)return 0==--this._eventsCount?this._events=new pe:delete this._events[$],this;var N=this._events[$];if(N.fn)N.fn===F&&(!I||N.once)&&(!x||N.context===x)&&(0==--this._eventsCount?this._events=new pe:delete this._events[$]);else{for(var O=0,k=[],A=N.length;O<A;O++)(N[O].fn!==F||I&&!N[O].once||x&&N[O].context!==x)&&k.push(N[O]);k.length?this._events[$]=1===k.length?k[0]:k:0==--this._eventsCount?this._events=new pe:delete this._events[$]}return this},ee.prototype.removeAllListeners=function(q){var F;return q?this._events[F=ye?ye+q:q]&&(0==--this._eventsCount?this._events=new pe:delete this._events[F]):(this._events=new pe,this._eventsCount=0),this},ee.prototype.off=ee.prototype.removeListener,ee.prototype.addListener=ee.prototype.on,ee.prototype.setMaxListeners=function(){return this},ee.prefixed=ye,ee.EventEmitter=ee,typeof qe<"u"&&(qe.exports=ee)},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.matchText=Y.matchSpacing=Y.matchNewline=Y.matchBlot=Y.matchAttributor=Y.default=void 0;var ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(yt){return typeof yt}:function(yt){return yt&&"function"==typeof Symbol&&yt.constructor===Symbol&&yt!==Symbol.prototype?"symbol":typeof yt},pe=function(){return function(Ct,Yt){if(Array.isArray(Ct))return Ct;if(Symbol.iterator in Object(Ct))return function yt(Ct,Yt){var en=[],Nt=!0,gi=!1,Ai=void 0;try{for(var sl,Vi=Ct[Symbol.iterator]();!(Nt=(sl=Vi.next()).done)&&(en.push(sl.value),!Yt||en.length!==Yt);Nt=!0);}catch(qc){gi=!0,Ai=qc}finally{try{!Nt&&Vi.return&&Vi.return()}finally{if(gi)throw Ai}}return en}(Ct,Yt);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ue=function(){function yt(Ct,Yt){for(var en=0;en<Yt.length;en++){var Nt=Yt[en];Nt.enumerable=Nt.enumerable||!1,Nt.configurable=!0,"value"in Nt&&(Nt.writable=!0),Object.defineProperty(Ct,Nt.key,Nt)}}return function(Ct,Yt,en){return Yt&&yt(Ct.prototype,Yt),en&&yt(Ct,en),Ct}}(),Q=U(Z(3)),F=U(Z(2)),I=U(Z(0)),N=U(Z(5)),k=U(Z(10)),V=U(Z(9)),R=Z(36),j=Z(37),ie=U(Z(13)),se=Z(26),_e=Z(38),J=Z(39),G=Z(40);function U(yt){return yt&&yt.__esModule?yt:{default:yt}}function B(yt,Ct,Yt){return Ct in yt?Object.defineProperty(yt,Ct,{value:Yt,enumerable:!0,configurable:!0,writable:!0}):yt[Ct]=Yt,yt}var je=(0,k.default)("quill:clipboard"),dt="__ql-matcher",Ae=[[Node.TEXT_NODE,Tr],[Node.TEXT_NODE,Hi],["br",function on(yt,Ct){return Ye(Ct,"\n")||Ct.insert("\n"),Ct}],[Node.ELEMENT_NODE,Hi],[Node.ELEMENT_NODE,It],[Node.ELEMENT_NODE,cs],[Node.ELEMENT_NODE,ct],[Node.ELEMENT_NODE,function po(yt,Ct){var Yt={},en=yt.style||{};return en.fontStyle&&"italic"===Ze(yt).fontStyle&&(Yt.italic=!0),en.fontWeight&&(Ze(yt).fontWeight.startsWith("bold")||parseInt(Ze(yt).fontWeight)>=700)&&(Yt.bold=!0),Object.keys(Yt).length>0&&(Ct=De(Ct,Yt)),parseFloat(en.textIndent||0)>0&&(Ct=(new F.default).insert("\t").concat(Ct)),Ct}],["li",function ci(yt,Ct){var Yt=I.default.query(yt);if(null==Yt||"list-item"!==Yt.blotName||!Ye(Ct,"\n"))return Ct;for(var en=-1,Nt=yt.parentNode;!Nt.classList.contains("ql-clipboard");)"list"===(I.default.query(Nt)||{}).blotName&&(en+=1),Nt=Nt.parentNode;return en<=0?Ct:Ct.compose((new F.default).retain(Ct.length()-1).retain(1,{indent:en}))}],["b",lt.bind(lt,"bold")],["i",lt.bind(lt,"italic")],["style",function Xn(){return new F.default}]],ke=[R.AlignAttribute,_e.DirectionAttribute].reduce(function(yt,Ct){return yt[Ct.keyName]=Ct,yt},{}),he=[R.AlignStyle,j.BackgroundStyle,se.ColorStyle,_e.DirectionStyle,J.FontStyle,G.SizeStyle].reduce(function(yt,Ct){return yt[Ct.keyName]=Ct,yt},{}),Se=function(yt){function Ct(Yt,en){!function ae(yt,Ct){if(!(yt instanceof Ct))throw new TypeError("Cannot call a class as a function")}(this,Ct);var Nt=function ve(yt,Ct){if(!yt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!Ct||"object"!=typeof Ct&&"function"!=typeof Ct?yt:Ct}(this,(Ct.__proto__||Object.getPrototypeOf(Ct)).call(this,Yt,en));return Nt.quill.root.addEventListener("paste",Nt.onPaste.bind(Nt)),Nt.container=Nt.quill.addContainer("ql-clipboard"),Nt.container.setAttribute("contenteditable",!0),Nt.container.setAttribute("tabindex",-1),Nt.matchers=[],Ae.concat(Nt.options.matchers).forEach(function(gi){var Ai=pe(gi,2),sl=Ai[1];!en.matchVisual&&sl===cs||Nt.addMatcher(Ai[0],sl)}),Nt}return function Ue(yt,Ct){if("function"!=typeof Ct&&null!==Ct)throw new TypeError("Super expression must either be null or a function, not "+typeof Ct);yt.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:yt,enumerable:!1,writable:!0,configurable:!0}}),Ct&&(Object.setPrototypeOf?Object.setPrototypeOf(yt,Ct):yt.__proto__=Ct)}(Ct,yt),ue(Ct,[{key:"addMatcher",value:function(en,Nt){this.matchers.push([en,Nt])}},{key:"convert",value:function(en){if("string"==typeof en)return this.container.innerHTML=en.replace(/\>\r?\n +\</g,"><"),this.convert();var Nt=this.quill.getFormat(this.quill.selection.savedRange.index);if(Nt[ie.default.blotName]){var gi=this.container.innerText;return this.container.innerHTML="",(new F.default).insert(gi,B({},ie.default.blotName,Nt[ie.default.blotName]))}var Ai=this.prepareMatching(),Vi=pe(Ai,2),yr=Ke(this.container,Vi[0],Vi[1]);return Ye(yr,"\n")&&null==yr.ops[yr.ops.length-1].attributes&&(yr=yr.compose((new F.default).retain(yr.length()-1).delete(1))),je.log("convert",this.container.innerHTML,yr),this.container.innerHTML="",yr}},{key:"dangerouslyPasteHTML",value:function(en,Nt){var gi=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N.default.sources.API;if("string"==typeof en)this.quill.setContents(this.convert(en),Nt),this.quill.setSelection(0,N.default.sources.SILENT);else{var Ai=this.convert(Nt);this.quill.updateContents((new F.default).retain(en).concat(Ai),gi),this.quill.setSelection(en+Ai.length(),N.default.sources.SILENT)}}},{key:"onPaste",value:function(en){var Nt=this;if(!en.defaultPrevented&&this.quill.isEnabled()){var gi=this.quill.getSelection(),Ai=(new F.default).retain(gi.index),Vi=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(N.default.sources.SILENT),setTimeout(function(){Ai=Ai.concat(Nt.convert()).delete(gi.length),Nt.quill.updateContents(Ai,N.default.sources.USER),Nt.quill.setSelection(Ai.length()-gi.length,N.default.sources.SILENT),Nt.quill.scrollingContainer.scrollTop=Vi,Nt.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var en=this,Nt=[],gi=[];return this.matchers.forEach(function(Ai){var Vi=pe(Ai,2),sl=Vi[0],qc=Vi[1];switch(sl){case Node.TEXT_NODE:gi.push(qc);break;case Node.ELEMENT_NODE:Nt.push(qc);break;default:[].forEach.call(en.container.querySelectorAll(sl),function(yr){yr[dt]=yr[dt]||[],yr[dt].push(qc)})}}),[Nt,gi]}}]),Ct}(V.default);function De(yt,Ct,Yt){return"object"===(typeof Ct>"u"?"undefined":ye(Ct))?Object.keys(Ct).reduce(function(en,Nt){return De(en,Nt,Ct[Nt])},yt):yt.reduce(function(en,Nt){return Nt.attributes&&Nt.attributes[Ct]?en.push(Nt):en.insert(Nt.insert,(0,Q.default)({},B({},Ct,Yt),Nt.attributes))},new F.default)}function Ze(yt){if(yt.nodeType!==Node.ELEMENT_NODE)return{};var Ct="__ql-computed-style";return yt[Ct]||(yt[Ct]=window.getComputedStyle(yt))}function Ye(yt,Ct){for(var Yt="",en=yt.ops.length-1;en>=0&&Yt.length<Ct.length;--en){var Nt=yt.ops[en];if("string"!=typeof Nt.insert)break;Yt=Nt.insert+Yt}return Yt.slice(-1*Ct.length)===Ct}function we(yt){if(0===yt.childNodes.length)return!1;var Ct=Ze(yt);return["block","list-item"].indexOf(Ct.display)>-1}function Ke(yt,Ct,Yt){return yt.nodeType===yt.TEXT_NODE?Yt.reduce(function(en,Nt){return Nt(yt,en)},new F.default):yt.nodeType===yt.ELEMENT_NODE?[].reduce.call(yt.childNodes||[],function(en,Nt){var gi=Ke(Nt,Ct,Yt);return Nt.nodeType===yt.ELEMENT_NODE&&(gi=Ct.reduce(function(Ai,Vi){return Vi(Nt,Ai)},gi),gi=(Nt[dt]||[]).reduce(function(Ai,Vi){return Vi(Nt,Ai)},gi)),en.concat(gi)},new F.default):new F.default}function lt(yt,Ct,Yt){return De(Yt,yt,!0)}function ct(yt,Ct){var Yt=I.default.Attributor.Attribute.keys(yt),en=I.default.Attributor.Class.keys(yt),Nt=I.default.Attributor.Style.keys(yt),gi={};return Yt.concat(en).concat(Nt).forEach(function(Ai){var Vi=I.default.query(Ai,I.default.Scope.ATTRIBUTE);null!=Vi&&(gi[Vi.attrName]=Vi.value(yt),gi[Vi.attrName])||(null!=(Vi=ke[Ai])&&(Vi.attrName===Ai||Vi.keyName===Ai)&&(gi[Vi.attrName]=Vi.value(yt)||void 0),null!=(Vi=he[Ai])&&(Vi.attrName===Ai||Vi.keyName===Ai)&&(gi[(Vi=he[Ai]).attrName]=Vi.value(yt)||void 0))}),Object.keys(gi).length>0&&(Ct=De(Ct,gi)),Ct}function It(yt,Ct){var Yt=I.default.query(yt);if(null==Yt)return Ct;if(Yt.prototype instanceof I.default.Embed){var en={},Nt=Yt.value(yt);null!=Nt&&(en[Yt.blotName]=Nt,Ct=(new F.default).insert(en,Yt.formats(yt)))}else"function"==typeof Yt.formats&&(Ct=De(Ct,Yt.blotName,Yt.formats(yt)));return Ct}function Hi(yt,Ct){return Ye(Ct,"\n")||(we(yt)||Ct.length()>0&&yt.nextSibling&&we(yt.nextSibling))&&Ct.insert("\n"),Ct}function cs(yt,Ct){if(we(yt)&&null!=yt.nextElementSibling&&!Ye(Ct,"\n\n")){var Yt=yt.offsetHeight+parseFloat(Ze(yt).marginTop)+parseFloat(Ze(yt).marginBottom);yt.nextElementSibling.offsetTop>yt.offsetTop+1.5*Yt&&Ct.insert("\n")}return Ct}function Tr(yt,Ct){var Yt=yt.data;if("O:P"===yt.parentNode.tagName)return Ct.insert(Yt.trim());if(0===Yt.trim().length&&yt.parentNode.classList.contains("ql-clipboard"))return Ct;if(!Ze(yt.parentNode).whiteSpace.startsWith("pre")){var en=function(gi,Ai){return(Ai=Ai.replace(/[^\u00a0]/g,"")).length<1&&gi?" ":Ai};Yt=(Yt=Yt.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,en.bind(en,!0)),(null==yt.previousSibling&&we(yt.parentNode)||null!=yt.previousSibling&&we(yt.previousSibling))&&(Yt=Yt.replace(/^\s+/,en.bind(en,!1))),(null==yt.nextSibling&&we(yt.parentNode)||null!=yt.nextSibling&&we(yt.nextSibling))&&(Yt=Yt.replace(/\s+$/,en.bind(en,!1)))}return Ct.insert(Yt)}Se.DEFAULTS={matchers:[],matchVisual:!0},Y.default=Se,Y.matchAttributor=ct,Y.matchBlot=It,Y.matchNewline=Hi,Y.matchSpacing=cs,Y.matchText=Tr},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=function(){function $(N,O){for(var k=0;k<O.length;k++){var A=O[k];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(N,A.key,A)}}return function(N,O,k){return O&&$(N.prototype,O),k&&$(N,k),N}}(),pe=function $(N,O,k){null===N&&(N=Function.prototype);var A=Object.getOwnPropertyDescriptor(N,O);if(void 0===A){var V=Object.getPrototypeOf(N);return null===V?void 0:$(V,O,k)}if("value"in A)return A.value;var R=A.get;return void 0===R?void 0:R.call(k)};var I=function($){function N(){return function q($,N){if(!($ instanceof N))throw new TypeError("Cannot call a class as a function")}(this,N),function F($,N){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!N||"object"!=typeof N&&"function"!=typeof N?$:N}(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return function x($,N){if("function"!=typeof N&&null!==N)throw new TypeError("Super expression must either be null or a function, not "+typeof N);$.prototype=Object.create(N&&N.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf($,N):$.__proto__=N)}(N,$),ye(N,[{key:"optimize",value:function(k){pe(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"optimize",this).call(this,k),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return pe(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),N}(function Q($){return $&&$.__esModule?$:{default:$}}(Z(6)).default);I.blotName="bold",I.tagName=["STRONG","B"],Y.default=I},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.addControls=Y.default=void 0;var ye=function(){return function(U,B){if(Array.isArray(U))return U;if(Symbol.iterator in Object(U))return function G(U,B){var ae=[],ve=!0,Ue=!1,je=void 0;try{for(var Ae,dt=U[Symbol.iterator]();!(ve=(Ae=dt.next()).done)&&(ae.push(Ae.value),!B||ae.length!==B);ve=!0);}catch(ke){Ue=!0,je=ke}finally{try{!ve&&dt.return&&dt.return()}finally{if(Ue)throw je}}return ae}(U,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),pe=function(){function G(U,B){for(var ae=0;ae<B.length;ae++){var ve=B[ae];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(U,ve.key,ve)}}return function(U,B,ae){return B&&G(U.prototype,B),ae&&G(U,ae),U}}(),ee=k(Z(2)),q=k(Z(0)),x=k(Z(5)),$=k(Z(10)),O=k(Z(9));function k(G){return G&&G.__esModule?G:{default:G}}function R(G,U){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!U||"object"!=typeof U&&"function"!=typeof U?G:U}var ce=(0,$.default)("quill:toolbar"),ie=function(G){function U(B,ae){!function V(G,U){if(!(G instanceof U))throw new TypeError("Cannot call a class as a function")}(this,U);var je,ve=R(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,B,ae));if(Array.isArray(ve.options.container)){var Ue=document.createElement("div");_e(Ue,ve.options.container),B.container.parentNode.insertBefore(Ue,B.container),ve.container=Ue}else ve.container="string"==typeof ve.options.container?document.querySelector(ve.options.container):ve.options.container;return ve.container instanceof HTMLElement?(ve.container.classList.add("ql-toolbar"),ve.controls=[],ve.handlers={},Object.keys(ve.options.handlers).forEach(function(dt){ve.addHandler(dt,ve.options.handlers[dt])}),[].forEach.call(ve.container.querySelectorAll("button, select"),function(dt){ve.attach(dt)}),ve.quill.on(x.default.events.EDITOR_CHANGE,function(dt,Ae){dt===x.default.events.SELECTION_CHANGE&&ve.update(Ae)}),ve.quill.on(x.default.events.SCROLL_OPTIMIZE,function(){var dt=ve.quill.selection.getRange(),Ae=ye(dt,1);ve.update(Ae[0])}),ve):(je=ce.error("Container required for toolbar",ve.options),R(ve,je))}return function j(G,U){if("function"!=typeof U&&null!==U)throw new TypeError("Super expression must either be null or a function, not "+typeof U);G.prototype=Object.create(U&&U.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(G,U):G.__proto__=U)}(U,G),pe(U,[{key:"addHandler",value:function(ae,ve){this.handlers[ae]=ve}},{key:"attach",value:function(ae){var ve=this,Ue=[].find.call(ae.classList,function(dt){return 0===dt.indexOf("ql-")});if(Ue){if(Ue=Ue.slice(3),"BUTTON"===ae.tagName&&ae.setAttribute("type","button"),null==this.handlers[Ue]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[Ue])return void ce.warn("ignoring attaching to disabled format",Ue,ae);if(null==q.default.query(Ue))return void ce.warn("ignoring attaching to nonexistent format",Ue,ae)}ae.addEventListener("SELECT"===ae.tagName?"change":"click",function(dt){var Ae=void 0;if("SELECT"===ae.tagName){if(ae.selectedIndex<0)return;var ke=ae.options[ae.selectedIndex];Ae=!ke.hasAttribute("selected")&&(ke.value||!1)}else Ae=!ae.classList.contains("ql-active")&&(ae.value||!ae.hasAttribute("value")),dt.preventDefault();ve.quill.focus();var he=ve.quill.selection.getRange(),De=ye(he,1)[0];if(null!=ve.handlers[Ue])ve.handlers[Ue].call(ve,Ae);else if(q.default.query(Ue).prototype instanceof q.default.Embed){if(!(Ae=prompt("Enter "+Ue)))return;ve.quill.updateContents((new ee.default).retain(De.index).delete(De.length).insert(function A(G,U,B){return U in G?Object.defineProperty(G,U,{value:B,enumerable:!0,configurable:!0,writable:!0}):G[U]=B,G}({},Ue,Ae)),x.default.sources.USER)}else ve.quill.format(Ue,Ae,x.default.sources.USER);ve.update(De)}),this.controls.push([Ue,ae])}}},{key:"update",value:function(ae){var ve=null==ae?{}:this.quill.getFormat(ae);this.controls.forEach(function(Ue){var je=ye(Ue,2),dt=je[0],Ae=je[1];if("SELECT"===Ae.tagName){var ke=void 0;if(null==ae)ke=null;else if(null==ve[dt])ke=Ae.querySelector("option[selected]");else if(!Array.isArray(ve[dt])){var he=ve[dt];"string"==typeof he&&(he=he.replace(/\"/g,'\\"')),ke=Ae.querySelector('option[value="'+he+'"]')}null==ke?(Ae.value="",Ae.selectedIndex=-1):ke.selected=!0}else if(null==ae)Ae.classList.remove("ql-active");else if(Ae.hasAttribute("value")){var Se=ve[dt]===Ae.getAttribute("value")||null!=ve[dt]&&ve[dt].toString()===Ae.getAttribute("value")||null==ve[dt]&&!Ae.getAttribute("value");Ae.classList.toggle("ql-active",Se)}else Ae.classList.toggle("ql-active",null!=ve[dt])})}}]),U}(O.default);function se(G,U,B){var ae=document.createElement("button");ae.setAttribute("type","button"),ae.classList.add("ql-"+U),null!=B&&(ae.value=B),G.appendChild(ae)}function _e(G,U){Array.isArray(U[0])||(U=[U]),U.forEach(function(B){var ae=document.createElement("span");ae.classList.add("ql-formats"),B.forEach(function(ve){if("string"==typeof ve)se(ae,ve);else{var Ue=Object.keys(ve)[0],je=ve[Ue];Array.isArray(je)?function J(G,U,B){var ae=document.createElement("select");ae.classList.add("ql-"+U),B.forEach(function(ve){var Ue=document.createElement("option");!1!==ve?Ue.setAttribute("value",ve):Ue.setAttribute("selected","selected"),ae.appendChild(Ue)}),G.appendChild(ae)}(ae,Ue,je):se(ae,Ue,je)}}),G.appendChild(ae)})}ie.DEFAULTS={},ie.DEFAULTS={container:null,handlers:{clean:function(){var U=this,B=this.quill.getSelection();if(null!=B)if(0==B.length){var ae=this.quill.getFormat();Object.keys(ae).forEach(function(ve){null!=q.default.query(ve,q.default.Scope.INLINE)&&U.quill.format(ve,!1)})}else this.quill.removeFormat(B,x.default.sources.USER)},direction:function(U){var B=this.quill.getFormat().align;"rtl"===U&&null==B?this.quill.format("align","right",x.default.sources.USER):!U&&"right"===B&&this.quill.format("align",!1,x.default.sources.USER),this.quill.format("direction",U,x.default.sources.USER)},indent:function(U){var B=this.quill.getSelection(),ae=this.quill.getFormat(B),ve=parseInt(ae.indent||0);if("+1"===U||"-1"===U){var Ue="+1"===U?1:-1;"rtl"===ae.direction&&(Ue*=-1),this.quill.format("indent",ve+Ue,x.default.sources.USER)}},link:function(U){!0===U&&(U=prompt("Enter link URL:")),this.quill.format("link",U,x.default.sources.USER)},list:function(U){var B=this.quill.getSelection(),ae=this.quill.getFormat(B);this.quill.format("list","check"===U?"checked"!==ae.list&&"unchecked"!==ae.list&&"unchecked":U,x.default.sources.USER)}}},Y.default=ie,Y.addControls=_e},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=function(){function $(N,O){for(var k=0;k<O.length;k++){var A=O[k];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(N,A.key,A)}}return function(N,O,k){return O&&$(N.prototype,O),k&&$(N,k),N}}(),pe=function $(N,O,k){null===N&&(N=Function.prototype);var A=Object.getOwnPropertyDescriptor(N,O);if(void 0===A){var V=Object.getPrototypeOf(N);return null===V?void 0:$(V,O,k)}if("value"in A)return A.value;var R=A.get;return void 0===R?void 0:R.call(k)};var I=function($){function N(O,k){!function q($,N){if(!($ instanceof N))throw new TypeError("Cannot call a class as a function")}(this,N);var A=function F($,N){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!N||"object"!=typeof N&&"function"!=typeof N?$:N}(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,O));return A.label.innerHTML=k,A.container.classList.add("ql-color-picker"),[].slice.call(A.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(V){V.classList.add("ql-primary")}),A}return function x($,N){if("function"!=typeof N&&null!==N)throw new TypeError("Super expression must either be null or a function, not "+typeof N);$.prototype=Object.create(N&&N.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf($,N):$.__proto__=N)}(N,$),ye(N,[{key:"buildItem",value:function(k){var A=pe(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"buildItem",this).call(this,k);return A.style.backgroundColor=k.getAttribute("value")||"",A}},{key:"selectItem",value:function(k,A){pe(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"selectItem",this).call(this,k,A);var V=this.label.querySelector(".ql-color-label"),R=k&&k.getAttribute("data-value")||"";V&&("line"===V.tagName?V.style.stroke=R:V.style.fill=R)}}]),N}(function Q($){return $&&$.__esModule?$:{default:$}}(Z(28)).default);Y.default=I},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=function(){function $(N,O){for(var k=0;k<O.length;k++){var A=O[k];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(N,A.key,A)}}return function(N,O,k){return O&&$(N.prototype,O),k&&$(N,k),N}}(),pe=function $(N,O,k){null===N&&(N=Function.prototype);var A=Object.getOwnPropertyDescriptor(N,O);if(void 0===A){var V=Object.getPrototypeOf(N);return null===V?void 0:$(V,O,k)}if("value"in A)return A.value;var R=A.get;return void 0===R?void 0:R.call(k)};var I=function($){function N(O,k){!function q($,N){if(!($ instanceof N))throw new TypeError("Cannot call a class as a function")}(this,N);var A=function F($,N){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!N||"object"!=typeof N&&"function"!=typeof N?$:N}(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,O));return A.container.classList.add("ql-icon-picker"),[].forEach.call(A.container.querySelectorAll(".ql-picker-item"),function(V){V.innerHTML=k[V.getAttribute("data-value")||""]}),A.defaultItem=A.container.querySelector(".ql-selected"),A.selectItem(A.defaultItem),A}return function x($,N){if("function"!=typeof N&&null!==N)throw new TypeError("Super expression must either be null or a function, not "+typeof N);$.prototype=Object.create(N&&N.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf($,N):$.__proto__=N)}(N,$),ye(N,[{key:"selectItem",value:function(k,A){pe(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"selectItem",this).call(this,k,A),this.label.innerHTML=(k=k||this.defaultItem).innerHTML}}]),N}(function Q($){return $&&$.__esModule?$:{default:$}}(Z(28)).default);Y.default=I},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=function(){function ee(Q,q){for(var F=0;F<q.length;F++){var x=q[F];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(Q,x.key,x)}}return function(Q,q,F){return q&&ee(Q.prototype,q),F&&ee(Q,F),Q}}();var ue=function(){function ee(Q,q){var F=this;(function pe(ee,Q){if(!(ee instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,ee),this.quill=Q,this.boundsContainer=q||document.body,this.root=Q.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){F.root.style.marginTop=-1*F.quill.root.scrollTop+"px"}),this.hide()}return ye(ee,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(q){var F=q.left+q.width/2-this.root.offsetWidth/2,x=q.bottom+this.quill.root.scrollTop;this.root.style.left=F+"px",this.root.style.top=x+"px",this.root.classList.remove("ql-flip");var I=this.boundsContainer.getBoundingClientRect(),$=this.root.getBoundingClientRect(),N=0;return $.right>I.right&&(this.root.style.left=F+(N=I.right-$.right)+"px"),$.left<I.left&&(this.root.style.left=F+(N=I.left-$.left)+"px"),$.bottom>I.bottom&&(this.root.style.top=x-(q.bottom-q.top+($.bottom-$.top))+"px",this.root.classList.add("ql-flip")),N}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),ee}();Y.default=ue},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=function(){return function(G,U){if(Array.isArray(G))return G;if(Symbol.iterator in Object(G))return function J(G,U){var B=[],ae=!0,ve=!1,Ue=void 0;try{for(var dt,je=G[Symbol.iterator]();!(ae=(dt=je.next()).done)&&(B.push(dt.value),!U||B.length!==U);ae=!0);}catch(Ae){ve=!0,Ue=Ae}finally{try{!ae&&je.return&&je.return()}finally{if(ve)throw Ue}}return B}(G,U);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),pe=function J(G,U,B){null===G&&(G=Function.prototype);var ae=Object.getOwnPropertyDescriptor(G,U);if(void 0===ae){var ve=Object.getPrototypeOf(G);return null===ve?void 0:J(ve,U,B)}if("value"in ae)return ae.value;var Ue=ae.get;return void 0===Ue?void 0:Ue.call(B)},ue=function(){function J(G,U){for(var B=0;B<U.length;B++){var ae=U[B];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(G,ae.key,ae)}}return function(G,U,B){return U&&J(G.prototype,U),B&&J(G,B),G}}(),Q=V(Z(3)),F=V(Z(8)),x=Z(43),I=V(x),N=V(Z(27)),O=Z(15),A=V(Z(41));function V(J){return J&&J.__esModule?J:{default:J}}function R(J,G){if(!(J instanceof G))throw new TypeError("Cannot call a class as a function")}function j(J,G){if(!J)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!G||"object"!=typeof G&&"function"!=typeof G?J:G}function ce(J,G){if("function"!=typeof G&&null!==G)throw new TypeError("Super expression must either be null or a function, not "+typeof G);J.prototype=Object.create(G&&G.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(J,G):J.__proto__=G)}var ie=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],se=function(J){function G(U,B){R(this,G),null!=B.modules.toolbar&&null==B.modules.toolbar.container&&(B.modules.toolbar.container=ie);var ae=j(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,U,B));return ae.quill.container.classList.add("ql-snow"),ae}return ce(G,J),ue(G,[{key:"extendToolbar",value:function(B){B.container.classList.add("ql-snow"),this.buildButtons([].slice.call(B.container.querySelectorAll("button")),A.default),this.buildPickers([].slice.call(B.container.querySelectorAll("select")),A.default),this.tooltip=new _e(this.quill,this.options.bounds),B.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(ae,ve){B.handlers.link.call(B,!ve.format.link)})}}]),G}(I.default);se.DEFAULTS=(0,Q.default)(!0,{},I.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(G){if(G){var U=this.quill.getSelection();if(null==U||0==U.length)return;var B=this.quill.getText(U);/^\S+@\S+\.\S+$/.test(B)&&0!==B.indexOf("mailto:")&&(B="mailto:"+B),this.quill.theme.tooltip.edit("link",B)}else this.quill.format("link",!1)}}}}});var _e=function(J){function G(U,B){R(this,G);var ae=j(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,U,B));return ae.preview=ae.root.querySelector("a.ql-preview"),ae}return ce(G,J),ue(G,[{key:"listen",value:function(){var B=this;pe(G.prototype.__proto__||Object.getPrototypeOf(G.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(ae){B.root.classList.contains("ql-editing")?B.save():B.edit("link",B.preview.textContent),ae.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(ae){if(null!=B.linkRange){var ve=B.linkRange;B.restoreFocus(),B.quill.formatText(ve,"link",!1,F.default.sources.USER),delete B.linkRange}ae.preventDefault(),B.hide()}),this.quill.on(F.default.events.SELECTION_CHANGE,function(ae,ve,Ue){if(null!=ae){if(0===ae.length&&Ue===F.default.sources.USER){var je=B.quill.scroll.descendant(N.default,ae.index),dt=ye(je,2),Ae=dt[0];if(null!=Ae){B.linkRange=new O.Range(ae.index-dt[1],Ae.length());var he=N.default.formats(Ae.domNode);return B.preview.textContent=he,B.preview.setAttribute("href",he),B.show(),void B.position(B.quill.getBounds(B.linkRange))}}else delete B.linkRange;B.hide()}})}},{key:"show",value:function(){pe(G.prototype.__proto__||Object.getPrototypeOf(G.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),G}(x.BaseTooltip);_e.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),Y.default=se},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var pe=Nt(Z(29)),ue=Z(36),ee=Z(38),Q=Z(64),F=Nt(Z(65)),I=Nt(Z(66)),$=Z(67),N=Nt($),O=Z(37),k=Z(26),A=Z(39),V=Z(40),j=Nt(Z(56)),ie=Nt(Z(68)),_e=Nt(Z(27)),G=Nt(Z(69)),B=Nt(Z(70)),ve=Nt(Z(71)),je=Nt(Z(72)),Ae=Nt(Z(73)),ke=Z(13),he=Nt(ke),De=Nt(Z(74)),Ye=Nt(Z(75)),Ke=Nt(Z(57)),ct=Nt(Z(41)),on=Nt(Z(28)),ci=Nt(Z(59)),cs=Nt(Z(60)),Tr=Nt(Z(61)),Ct=Nt(Z(108)),en=Nt(Z(62));function Nt(gi){return gi&&gi.__esModule?gi:{default:gi}}pe.default.register({"attributors/attribute/direction":ee.DirectionAttribute,"attributors/class/align":ue.AlignClass,"attributors/class/background":O.BackgroundClass,"attributors/class/color":k.ColorClass,"attributors/class/direction":ee.DirectionClass,"attributors/class/font":A.FontClass,"attributors/class/size":V.SizeClass,"attributors/style/align":ue.AlignStyle,"attributors/style/background":O.BackgroundStyle,"attributors/style/color":k.ColorStyle,"attributors/style/direction":ee.DirectionStyle,"attributors/style/font":A.FontStyle,"attributors/style/size":V.SizeStyle},!0),pe.default.register({"formats/align":ue.AlignClass,"formats/direction":ee.DirectionClass,"formats/indent":Q.IndentClass,"formats/background":O.BackgroundStyle,"formats/color":k.ColorStyle,"formats/font":A.FontClass,"formats/size":V.SizeClass,"formats/blockquote":F.default,"formats/code-block":he.default,"formats/header":I.default,"formats/list":N.default,"formats/bold":j.default,"formats/code":ke.Code,"formats/italic":ie.default,"formats/link":_e.default,"formats/script":G.default,"formats/strike":B.default,"formats/underline":ve.default,"formats/image":je.default,"formats/video":Ae.default,"formats/list/item":$.ListItem,"modules/formula":De.default,"modules/syntax":Ye.default,"modules/toolbar":Ke.default,"themes/bubble":Ct.default,"themes/snow":en.default,"ui/icons":ct.default,"ui/picker":on.default,"ui/icon-picker":cs.default,"ui/color-picker":ci.default,"ui/tooltip":Tr.default},!0),Y.default=pe.default},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.IndentClass=void 0;var ye=function(){function N(O,k){for(var A=0;A<k.length;A++){var V=k[A];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(O,V.key,V)}}return function(O,k,A){return k&&N(O.prototype,k),A&&N(O,A),O}}(),pe=function N(O,k,A){null===O&&(O=Function.prototype);var V=Object.getOwnPropertyDescriptor(O,k);if(void 0===V){var R=Object.getPrototypeOf(O);return null===R?void 0:N(R,k,A)}if("value"in V)return V.value;var j=V.get;return void 0===j?void 0:j.call(A)},ee=function Q(N){return N&&N.__esModule?N:{default:N}}(Z(0));var I=function(N){function O(){return function q(N,O){if(!(N instanceof O))throw new TypeError("Cannot call a class as a function")}(this,O),function F(N,O){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!O||"object"!=typeof O&&"function"!=typeof O?N:O}(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return function x(N,O){if("function"!=typeof O&&null!==O)throw new TypeError("Super expression must either be null or a function, not "+typeof O);N.prototype=Object.create(O&&O.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(N,O):N.__proto__=O)}(O,N),ye(O,[{key:"add",value:function(A,V){if("+1"===V||"-1"===V){var R=this.value(A)||0;V="+1"===V?R+1:R-1}return 0===V?(this.remove(A),!0):pe(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"add",this).call(this,A,V)}},{key:"canAdd",value:function(A,V){return pe(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"canAdd",this).call(this,A,V)||pe(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"canAdd",this).call(this,A,parseInt(V))}},{key:"value",value:function(A){return parseInt(pe(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"value",this).call(this,A))||void 0}}]),O}(ee.default.Attributor.Class),$=new I("indent","ql-indent",{scope:ee.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});Y.IndentClass=$},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var F=function(x){function I(){return function ee(x,I){if(!(x instanceof I))throw new TypeError("Cannot call a class as a function")}(this,I),function Q(x,I){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!I||"object"!=typeof I&&"function"!=typeof I?x:I}(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return function q(x,I){if("function"!=typeof I&&null!==I)throw new TypeError("Super expression must either be null or a function, not "+typeof I);x.prototype=Object.create(I&&I.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(x,I):x.__proto__=I)}(I,x),I}(function ue(x){return x&&x.__esModule?x:{default:x}}(Z(4)).default);F.blotName="blockquote",F.tagName="blockquote",Y.default=F},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=function(){function I($,N){for(var O=0;O<N.length;O++){var k=N[O];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty($,k.key,k)}}return function($,N,O){return N&&I($.prototype,N),O&&I($,O),$}}();var x=function(I){function $(){return function Q(I,$){if(!(I instanceof $))throw new TypeError("Cannot call a class as a function")}(this,$),function q(I,$){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!$||"object"!=typeof $&&"function"!=typeof $?I:$}(this,($.__proto__||Object.getPrototypeOf($)).apply(this,arguments))}return function F(I,$){if("function"!=typeof $&&null!==$)throw new TypeError("Super expression must either be null or a function, not "+typeof $);I.prototype=Object.create($&&$.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(I,$):I.__proto__=$)}($,I),ye($,null,[{key:"formats",value:function(O){return this.tagName.indexOf(O.tagName)+1}}]),$}(function ee(I){return I&&I.__esModule?I:{default:I}}(Z(4)).default);x.blotName="header",x.tagName=["H1","H2","H3","H4","H5","H6"],Y.default=x},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.default=Y.ListItem=void 0;var ye=function(){function R(j,ce){for(var ie=0;ie<ce.length;ie++){var se=ce[ie];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(j,se.key,se)}}return function(j,ce,ie){return ce&&R(j.prototype,ce),ie&&R(j,ie),j}}(),pe=function R(j,ce,ie){null===j&&(j=Function.prototype);var se=Object.getOwnPropertyDescriptor(j,ce);if(void 0===se){var _e=Object.getPrototypeOf(j);return null===_e?void 0:R(_e,ce,ie)}if("value"in se)return se.value;var J=se.get;return void 0===J?void 0:J.call(ie)},ee=I(Z(0)),q=I(Z(4)),x=I(Z(25));function I(R){return R&&R.__esModule?R:{default:R}}function N(R,j){if(!(R instanceof j))throw new TypeError("Cannot call a class as a function")}function O(R,j){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!j||"object"!=typeof j&&"function"!=typeof j?R:j}function k(R,j){if("function"!=typeof j&&null!==j)throw new TypeError("Super expression must either be null or a function, not "+typeof j);R.prototype=Object.create(j&&j.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(R,j):R.__proto__=j)}var A=function(R){function j(){return N(this,j),O(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return k(j,R),ye(j,[{key:"format",value:function(ie,se){ie!==V.blotName||se?pe(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"format",this).call(this,ie,se):this.replaceWith(ee.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():pe(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(ie,se){return this.parent.isolate(this.offset(this.parent),this.length()),ie===this.parent.statics.blotName?(this.parent.replaceWith(ie,se),this):(this.parent.unwrap(),pe(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"replaceWith",this).call(this,ie,se))}}],[{key:"formats",value:function(ie){return ie.tagName===this.tagName?void 0:pe(j.__proto__||Object.getPrototypeOf(j),"formats",this).call(this,ie)}}]),j}(q.default);A.blotName="list-item",A.tagName="LI";var V=function(R){function j(ce){N(this,j);var ie=O(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,ce)),se=function(J){if(J.target.parentNode===ce){var G=ie.statics.formats(ce),U=ee.default.find(J.target);"checked"===G?U.format("list","unchecked"):"unchecked"===G&&U.format("list","checked")}};return ce.addEventListener("touchstart",se),ce.addEventListener("mousedown",se),ie}return k(j,R),ye(j,null,[{key:"create",value:function(ie){var se="ordered"===ie?"OL":"UL",_e=pe(j.__proto__||Object.getPrototypeOf(j),"create",this).call(this,se);return("checked"===ie||"unchecked"===ie)&&_e.setAttribute("data-checked","checked"===ie),_e}},{key:"formats",value:function(ie){return"OL"===ie.tagName?"ordered":"UL"===ie.tagName?ie.hasAttribute("data-checked")?"true"===ie.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),ye(j,[{key:"format",value:function(ie,se){this.children.length>0&&this.children.tail.format(ie,se)}},{key:"formats",value:function(){return function $(R,j,ce){return j in R?Object.defineProperty(R,j,{value:ce,enumerable:!0,configurable:!0,writable:!0}):R[j]=ce,R}({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(ie,se){if(ie instanceof A)pe(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"insertBefore",this).call(this,ie,se);else{var _e=null==se?this.length():se.offset(this),J=this.split(_e);J.parent.insertBefore(ie,J)}}},{key:"optimize",value:function(ie){pe(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"optimize",this).call(this,ie);var se=this.next;null!=se&&se.prev===this&&se.statics.blotName===this.statics.blotName&&se.domNode.tagName===this.domNode.tagName&&se.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(se.moveChildren(this),se.remove())}},{key:"replace",value:function(ie){if(ie.statics.blotName!==this.statics.blotName){var se=ee.default.create(this.statics.defaultChild);ie.moveChildren(se),this.appendChild(se)}pe(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"replace",this).call(this,ie)}}]),j}(x.default);V.blotName="list",V.scope=ee.default.Scope.BLOCK_BLOT,V.tagName=["OL","UL"],V.defaultChild="list-item",V.allowedChildren=[A],Y.ListItem=A,Y.default=V},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var F=function(x){function I(){return function ee(x,I){if(!(x instanceof I))throw new TypeError("Cannot call a class as a function")}(this,I),function Q(x,I){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!I||"object"!=typeof I&&"function"!=typeof I?x:I}(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return function q(x,I){if("function"!=typeof I&&null!==I)throw new TypeError("Super expression must either be null or a function, not "+typeof I);x.prototype=Object.create(I&&I.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(x,I):x.__proto__=I)}(I,x),I}(function ue(x){return x&&x.__esModule?x:{default:x}}(Z(56)).default);F.blotName="italic",F.tagName=["EM","I"],Y.default=F},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=function(){function $(N,O){for(var k=0;k<O.length;k++){var A=O[k];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(N,A.key,A)}}return function(N,O,k){return O&&$(N.prototype,O),k&&$(N,k),N}}(),pe=function $(N,O,k){null===N&&(N=Function.prototype);var A=Object.getOwnPropertyDescriptor(N,O);if(void 0===A){var V=Object.getPrototypeOf(N);return null===V?void 0:$(V,O,k)}if("value"in A)return A.value;var R=A.get;return void 0===R?void 0:R.call(k)};var I=function($){function N(){return function q($,N){if(!($ instanceof N))throw new TypeError("Cannot call a class as a function")}(this,N),function F($,N){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!N||"object"!=typeof N&&"function"!=typeof N?$:N}(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return function x($,N){if("function"!=typeof N&&null!==N)throw new TypeError("Super expression must either be null or a function, not "+typeof N);$.prototype=Object.create(N&&N.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf($,N):$.__proto__=N)}(N,$),ye(N,null,[{key:"create",value:function(k){return"super"===k?document.createElement("sup"):"sub"===k?document.createElement("sub"):pe(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,k)}},{key:"formats",value:function(k){return"SUB"===k.tagName?"sub":"SUP"===k.tagName?"super":void 0}}]),N}(function Q($){return $&&$.__esModule?$:{default:$}}(Z(6)).default);I.blotName="script",I.tagName=["SUB","SUP"],Y.default=I},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var F=function(x){function I(){return function ee(x,I){if(!(x instanceof I))throw new TypeError("Cannot call a class as a function")}(this,I),function Q(x,I){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!I||"object"!=typeof I&&"function"!=typeof I?x:I}(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return function q(x,I){if("function"!=typeof I&&null!==I)throw new TypeError("Super expression must either be null or a function, not "+typeof I);x.prototype=Object.create(I&&I.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(x,I):x.__proto__=I)}(I,x),I}(function ue(x){return x&&x.__esModule?x:{default:x}}(Z(6)).default);F.blotName="strike",F.tagName="S",Y.default=F},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var F=function(x){function I(){return function ee(x,I){if(!(x instanceof I))throw new TypeError("Cannot call a class as a function")}(this,I),function Q(x,I){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!I||"object"!=typeof I&&"function"!=typeof I?x:I}(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return function q(x,I){if("function"!=typeof I&&null!==I)throw new TypeError("Super expression must either be null or a function, not "+typeof I);x.prototype=Object.create(I&&I.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(x,I):x.__proto__=I)}(I,x),I}(function ue(x){return x&&x.__esModule?x:{default:x}}(Z(6)).default);F.blotName="underline",F.tagName="U",Y.default=F},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=function(){function O(k,A){for(var V=0;V<A.length;V++){var R=A[V];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(k,R.key,R)}}return function(k,A,V){return A&&O(k.prototype,A),V&&O(k,V),k}}(),pe=function O(k,A,V){null===k&&(k=Function.prototype);var R=Object.getOwnPropertyDescriptor(k,A);if(void 0===R){var j=Object.getPrototypeOf(k);return null===j?void 0:O(j,A,V)}if("value"in R)return R.value;var ce=R.get;return void 0===ce?void 0:ce.call(V)},ee=function q(O){return O&&O.__esModule?O:{default:O}}(Z(0)),Q=Z(27);var $=["alt","height","width"],N=function(O){function k(){return function F(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")}(this,k),function x(O,k){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!k||"object"!=typeof k&&"function"!=typeof k?O:k}(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return function I(O,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function, not "+typeof k);O.prototype=Object.create(k&&k.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(O,k):O.__proto__=k)}(k,O),ye(k,[{key:"format",value:function(V,R){$.indexOf(V)>-1?R?this.domNode.setAttribute(V,R):this.domNode.removeAttribute(V):pe(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,V,R)}}],[{key:"create",value:function(V){var R=pe(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,V);return"string"==typeof V&&R.setAttribute("src",this.sanitize(V)),R}},{key:"formats",value:function(V){return $.reduce(function(R,j){return V.hasAttribute(j)&&(R[j]=V.getAttribute(j)),R},{})}},{key:"match",value:function(V){return/\.(jpe?g|gif|png)$/.test(V)||/^data:image\/.+;base64/.test(V)}},{key:"sanitize",value:function(V){return(0,Q.sanitize)(V,["http","https","data"])?V:"//:0"}},{key:"value",value:function(V){return V.getAttribute("src")}}]),k}(ee.default.Embed);N.blotName="image",N.tagName="IMG",Y.default=N},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var ye=function(){function O(k,A){for(var V=0;V<A.length;V++){var R=A[V];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(k,R.key,R)}}return function(k,A,V){return A&&O(k.prototype,A),V&&O(k,V),k}}(),pe=function O(k,A,V){null===k&&(k=Function.prototype);var R=Object.getOwnPropertyDescriptor(k,A);if(void 0===R){var j=Object.getPrototypeOf(k);return null===j?void 0:O(j,A,V)}if("value"in R)return R.value;var ce=R.get;return void 0===ce?void 0:ce.call(V)},ue=Z(4),Q=function q(O){return O&&O.__esModule?O:{default:O}}(Z(27));var $=["height","width"],N=function(O){function k(){return function F(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")}(this,k),function x(O,k){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!k||"object"!=typeof k&&"function"!=typeof k?O:k}(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return function I(O,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function, not "+typeof k);O.prototype=Object.create(k&&k.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(O,k):O.__proto__=k)}(k,O),ye(k,[{key:"format",value:function(V,R){$.indexOf(V)>-1?R?this.domNode.setAttribute(V,R):this.domNode.removeAttribute(V):pe(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,V,R)}}],[{key:"create",value:function(V){var R=pe(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,V);return R.setAttribute("frameborder","0"),R.setAttribute("allowfullscreen",!0),R.setAttribute("src",this.sanitize(V)),R}},{key:"formats",value:function(V){return $.reduce(function(R,j){return V.hasAttribute(j)&&(R[j]=V.getAttribute(j)),R},{})}},{key:"sanitize",value:function(V){return Q.default.sanitize(V)}},{key:"value",value:function(V){return V.getAttribute("src")}}]),k}(ue.BlockEmbed);N.blotName="video",N.className="ql-video",N.tagName="IFRAME",Y.default=N},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.default=Y.FormulaBlot=void 0;var ye=function(){function V(R,j){for(var ce=0;ce<j.length;ce++){var ie=j[ce];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(R,ie.key,ie)}}return function(R,j,ce){return j&&V(R.prototype,j),ce&&V(R,ce),R}}(),pe=function V(R,j,ce){null===R&&(R=Function.prototype);var ie=Object.getOwnPropertyDescriptor(R,j);if(void 0===ie){var se=Object.getPrototypeOf(R);return null===se?void 0:V(se,j,ce)}if("value"in ie)return ie.value;var _e=ie.get;return void 0===_e?void 0:_e.call(ce)},ee=I(Z(35)),q=I(Z(5)),x=I(Z(9));function I(V){return V&&V.__esModule?V:{default:V}}function $(V,R){if(!(V instanceof R))throw new TypeError("Cannot call a class as a function")}function N(V,R){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!R||"object"!=typeof R&&"function"!=typeof R?V:R}function O(V,R){if("function"!=typeof R&&null!==R)throw new TypeError("Super expression must either be null or a function, not "+typeof R);V.prototype=Object.create(R&&R.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(V,R):V.__proto__=R)}var k=function(V){function R(){return $(this,R),N(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return O(R,V),ye(R,null,[{key:"create",value:function(ce){var ie=pe(R.__proto__||Object.getPrototypeOf(R),"create",this).call(this,ce);return"string"==typeof ce&&(window.katex.render(ce,ie,{throwOnError:!1,errorColor:"#f00"}),ie.setAttribute("data-value",ce)),ie}},{key:"value",value:function(ce){return ce.getAttribute("data-value")}}]),R}(ee.default);k.blotName="formula",k.className="ql-formula",k.tagName="SPAN";var A=function(V){function R(){$(this,R);var j=N(this,(R.__proto__||Object.getPrototypeOf(R)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return j}return O(R,V),ye(R,null,[{key:"register",value:function(){q.default.register(k,!0)}}]),R}(x.default);Y.FormulaBlot=k,Y.default=A},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.default=Y.CodeToken=Y.CodeBlock=void 0;var ye=function(){function ce(ie,se){for(var _e=0;_e<se.length;_e++){var J=se[_e];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(ie,J.key,J)}}return function(ie,se,_e){return se&&ce(ie.prototype,se),_e&&ce(ie,_e),ie}}(),pe=function ce(ie,se,_e){null===ie&&(ie=Function.prototype);var J=Object.getOwnPropertyDescriptor(ie,se);if(void 0===J){var G=Object.getPrototypeOf(ie);return null===G?void 0:ce(G,se,_e)}if("value"in J)return J.value;var U=J.get;return void 0===U?void 0:U.call(_e)},ee=N(Z(0)),q=N(Z(5)),x=N(Z(9));function N(ce){return ce&&ce.__esModule?ce:{default:ce}}function O(ce,ie){if(!(ce instanceof ie))throw new TypeError("Cannot call a class as a function")}function k(ce,ie){if(!ce)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!ie||"object"!=typeof ie&&"function"!=typeof ie?ce:ie}function A(ce,ie){if("function"!=typeof ie&&null!==ie)throw new TypeError("Super expression must either be null or a function, not "+typeof ie);ce.prototype=Object.create(ie&&ie.prototype,{constructor:{value:ce,enumerable:!1,writable:!0,configurable:!0}}),ie&&(Object.setPrototypeOf?Object.setPrototypeOf(ce,ie):ce.__proto__=ie)}var V=function(ce){function ie(){return O(this,ie),k(this,(ie.__proto__||Object.getPrototypeOf(ie)).apply(this,arguments))}return A(ie,ce),ye(ie,[{key:"replaceWith",value:function(_e){this.domNode.textContent=this.domNode.textContent,this.attach(),pe(ie.prototype.__proto__||Object.getPrototypeOf(ie.prototype),"replaceWith",this).call(this,_e)}},{key:"highlight",value:function(_e){var J=this.domNode.textContent;this.cachedText!==J&&((J.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=_e(J),this.domNode.normalize(),this.attach()),this.cachedText=J)}}]),ie}(N(Z(13)).default);V.className="ql-syntax";var R=new ee.default.Attributor.Class("token","hljs",{scope:ee.default.Scope.INLINE}),j=function(ce){function ie(se,_e){O(this,ie);var J=k(this,(ie.__proto__||Object.getPrototypeOf(ie)).call(this,se,_e));if("function"!=typeof J.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var G=null;return J.quill.on(q.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(G),G=setTimeout(function(){J.highlight(),G=null},J.options.interval)}),J.highlight(),J}return A(ie,ce),ye(ie,null,[{key:"register",value:function(){q.default.register(R,!0),q.default.register(V,!0)}}]),ye(ie,[{key:"highlight",value:function(){var _e=this;if(!this.quill.selection.composing){this.quill.update(q.default.sources.USER);var J=this.quill.getSelection();this.quill.scroll.descendants(V).forEach(function(G){G.highlight(_e.options.highlight)}),this.quill.update(q.default.sources.SILENT),null!=J&&this.quill.setSelection(J,q.default.sources.SILENT)}}}]),ie}(x.default);j.DEFAULTS={highlight:null==window.hljs?null:function(ce){return window.hljs.highlightAuto(ce).value},interval:1e3},Y.CodeBlock=V,Y.CodeToken=R,Y.default=j},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(qe,Y){qe.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(qe,Y){qe.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(qe,Y){qe.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(qe,Y){qe.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(qe,Y){qe.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(qe,Y,Z){"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.default=Y.BubbleTooltip=void 0;var ye=function ie(se,_e,J){null===se&&(se=Function.prototype);var G=Object.getOwnPropertyDescriptor(se,_e);if(void 0===G){var U=Object.getPrototypeOf(se);return null===U?void 0:ie(U,_e,J)}if("value"in G)return G.value;var B=G.get;return void 0===B?void 0:B.call(J)},pe=function(){function ie(se,_e){for(var J=0;J<_e.length;J++){var G=_e[J];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(se,G.key,G)}}return function(se,_e,J){return _e&&ie(se.prototype,_e),J&&ie(se,J),se}}(),ee=O(Z(3)),q=O(Z(8)),F=Z(43),x=O(F),I=Z(15),N=O(Z(41));function O(ie){return ie&&ie.__esModule?ie:{default:ie}}function k(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")}function A(ie,se){if(!ie)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!se||"object"!=typeof se&&"function"!=typeof se?ie:se}function V(ie,se){if("function"!=typeof se&&null!==se)throw new TypeError("Super expression must either be null or a function, not "+typeof se);ie.prototype=Object.create(se&&se.prototype,{constructor:{value:ie,enumerable:!1,writable:!0,configurable:!0}}),se&&(Object.setPrototypeOf?Object.setPrototypeOf(ie,se):ie.__proto__=se)}var R=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],j=function(ie){function se(_e,J){k(this,se),null!=J.modules.toolbar&&null==J.modules.toolbar.container&&(J.modules.toolbar.container=R);var G=A(this,(se.__proto__||Object.getPrototypeOf(se)).call(this,_e,J));return G.quill.container.classList.add("ql-bubble"),G}return V(se,ie),pe(se,[{key:"extendToolbar",value:function(J){this.tooltip=new ce(this.quill,this.options.bounds),this.tooltip.root.appendChild(J.container),this.buildButtons([].slice.call(J.container.querySelectorAll("button")),N.default),this.buildPickers([].slice.call(J.container.querySelectorAll("select")),N.default)}}]),se}(x.default);j.DEFAULTS=(0,ee.default)(!0,{},x.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(se){se?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var ce=function(ie){function se(_e,J){k(this,se);var G=A(this,(se.__proto__||Object.getPrototypeOf(se)).call(this,_e,J));return G.quill.on(q.default.events.EDITOR_CHANGE,function(U,B,ae,ve){if(U===q.default.events.SELECTION_CHANGE)if(null!=B&&B.length>0&&ve===q.default.sources.USER){G.show(),G.root.style.left="0px",G.root.style.width="",G.root.style.width=G.root.offsetWidth+"px";var Ue=G.quill.getLines(B.index,B.length);if(1===Ue.length)G.position(G.quill.getBounds(B));else{var je=Ue[Ue.length-1],dt=G.quill.getIndex(je),Ae=Math.min(je.length()-1,B.index+B.length-dt),ke=G.quill.getBounds(new I.Range(dt,Ae));G.position(ke)}}else document.activeElement!==G.textbox&&G.quill.hasFocus()&&G.hide()}),G}return V(se,ie),pe(se,[{key:"listen",value:function(){var J=this;ye(se.prototype.__proto__||Object.getPrototypeOf(se.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){J.root.classList.remove("ql-editing")}),this.quill.on(q.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!J.root.classList.contains("ql-hidden")){var G=J.quill.getSelection();null!=G&&J.position(J.quill.getBounds(G))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(J){var G=ye(se.prototype.__proto__||Object.getPrototypeOf(se.prototype),"position",this).call(this,J),U=this.root.querySelector(".ql-tooltip-arrow");if(U.style.marginLeft="",0===G)return G;U.style.marginLeft=-1*G-U.offsetWidth/2+"px"}}]),se}(F.BaseTooltip);ce.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),Y.BubbleTooltip=ce,Y.default=j},function(qe,Y,Z){qe.exports=Z(63)}]).default},814:(pi,qe,Y)=>{var Z=Y(495),ye=Y(850),pe=Y(704),ue=Y(114),ee=Y(40),Q=Y(478),q=Y(454);q.alea=Z,q.xor128=ye,q.xorwow=pe,q.xorshift7=ue,q.xor4096=ee,q.tychei=Q,pi.exports=q},495:function(pi,qe,Y){var Z;!function(ye,pe,ue){function ee(x){var I=this,$=function F(){var x=4022871197;return function($){$=String($);for(var N=0;N<$.length;N++){var O=.02519603282416938*(x+=$.charCodeAt(N));O-=x=O>>>0,x=(O*=x)>>>0,x+=4294967296*(O-=x)}return 2.3283064365386963e-10*(x>>>0)}}();I.next=function(){var N=2091639*I.s0+2.3283064365386963e-10*I.c;return I.s0=I.s1,I.s1=I.s2,I.s2=N-(I.c=0|N)},I.c=1,I.s0=$(" "),I.s1=$(" "),I.s2=$(" "),I.s0-=$(x),I.s0<0&&(I.s0+=1),I.s1-=$(x),I.s1<0&&(I.s1+=1),I.s2-=$(x),I.s2<0&&(I.s2+=1),$=null}function Q(x,I){return I.c=x.c,I.s0=x.s0,I.s1=x.s1,I.s2=x.s2,I}function q(x,I){var $=new ee(x),N=I&&I.state,O=$.next;return O.int32=function(){return 4294967296*$.next()|0},O.double=function(){return O()+11102230246251565e-32*(2097152*O()|0)},O.quick=O,N&&("object"==typeof N&&Q(N,$),O.state=function(){return Q($,{})}),O}pe&&pe.exports?pe.exports=q:Y.amdD&&Y.amdO?void 0!==(Z=function(){return q}.call(qe,Y,qe,pe))&&(pe.exports=Z):this.alea=q}(0,pi=Y.nmd(pi))},478:function(pi,qe,Y){var Z;!function(ye,pe,ue){function ee(F){var x=this,I="";x.next=function(){var N=x.b,O=x.c,k=x.d,A=x.a;return N=N<<25^N>>>7^O,O=O-k|0,k=k<<24^k>>>8^A,A=A-N|0,x.b=N=N<<20^N>>>12^O,x.c=O=O-k|0,x.d=k<<16^O>>>16^A,x.a=A-N|0},x.a=0,x.b=0,x.c=-1640531527,x.d=1367130551,F===Math.floor(F)?(x.a=F/4294967296|0,x.b=0|F):I+=F;for(var $=0;$<I.length+20;$++)x.b^=0|I.charCodeAt($),x.next()}function Q(F,x){return x.a=F.a,x.b=F.b,x.c=F.c,x.d=F.d,x}function q(F,x){var I=new ee(F),$=x&&x.state,N=function(){return(I.next()>>>0)/4294967296};return N.double=function(){do{var A=((I.next()>>>11)+(I.next()>>>0)/4294967296)/(1<<21)}while(0===A);return A},N.int32=I.next,N.quick=N,$&&("object"==typeof $&&Q($,I),N.state=function(){return Q(I,{})}),N}pe&&pe.exports?pe.exports=q:Y.amdD&&Y.amdO?void 0!==(Z=function(){return q}.call(qe,Y,qe,pe))&&(pe.exports=Z):this.tychei=q}(0,pi=Y.nmd(pi))},850:function(pi,qe,Y){var Z;!function(ye,pe,ue){function ee(F){var x=this,I="";x.x=0,x.y=0,x.z=0,x.w=0,x.next=function(){var N=x.x^x.x<<11;return x.x=x.y,x.y=x.z,x.z=x.w,x.w^=x.w>>>19^N^N>>>8},F===(0|F)?x.x=F:I+=F;for(var $=0;$<I.length+64;$++)x.x^=0|I.charCodeAt($),x.next()}function Q(F,x){return x.x=F.x,x.y=F.y,x.z=F.z,x.w=F.w,x}function q(F,x){var I=new ee(F),$=x&&x.state,N=function(){return(I.next()>>>0)/4294967296};return N.double=function(){do{var A=((I.next()>>>11)+(I.next()>>>0)/4294967296)/(1<<21)}while(0===A);return A},N.int32=I.next,N.quick=N,$&&("object"==typeof $&&Q($,I),N.state=function(){return Q(I,{})}),N}pe&&pe.exports?pe.exports=q:Y.amdD&&Y.amdO?void 0!==(Z=function(){return q}.call(qe,Y,qe,pe))&&(pe.exports=Z):this.xor128=q}(0,pi=Y.nmd(pi))},40:function(pi,qe,Y){var Z;!function(ye,pe,ue){function ee(F){var x=this;x.next=function(){var k,A,$=x.w,N=x.X,O=x.i;return x.w=$=$+1640531527|0,A=N[O+34&127],k=N[O=O+1&127],A^=A<<13,k^=k<<17,A=N[O]=(A^=A>>>15)^(k^=k>>>12),x.i=O,A+($^$>>>16)|0},function I($,N){var O,k,A,V,R,j=[],ce=128;for(N===(0|N)?(k=N,N=null):(N+="\0",k=0,ce=Math.max(ce,N.length)),A=0,V=-32;V<ce;++V)N&&(k^=N.charCodeAt((V+32)%N.length)),0===V&&(R=k),k^=k<<10,k^=k>>>15,k^=k<<4,k^=k>>>13,V>=0&&(A=0==(O=j[127&V]^=k+(R=R+1640531527|0))?A+1:0);for(A>=128&&(j[127&(N&&N.length||0)]=-1),A=127,V=512;V>0;--V)k=j[A+34&127],O=j[A=A+1&127],k^=k<<13,O^=O<<17,j[A]=(k^=k>>>15)^(O^=O>>>12);$.w=R,$.X=j,$.i=A}(x,F)}function Q(F,x){return x.i=F.i,x.w=F.w,x.X=F.X.slice(),x}function q(F,x){null==F&&(F=+new Date);var I=new ee(F),$=x&&x.state,N=function(){return(I.next()>>>0)/4294967296};return N.double=function(){do{var A=((I.next()>>>11)+(I.next()>>>0)/4294967296)/(1<<21)}while(0===A);return A},N.int32=I.next,N.quick=N,$&&($.X&&Q($,I),N.state=function(){return Q(I,{})}),N}pe&&pe.exports?pe.exports=q:Y.amdD&&Y.amdO?void 0!==(Z=function(){return q}.call(qe,Y,qe,pe))&&(pe.exports=Z):this.xor4096=q}(0,pi=Y.nmd(pi))},114:function(pi,qe,Y){var Z;!function(ye,pe,ue){function ee(F){var x=this;x.next=function(){var O,k,$=x.x,N=x.i;return O=$[N],k=(O^=O>>>7)^O<<24,k^=(O=$[N+1&7])^O>>>10,k^=(O=$[N+3&7])^O>>>3,k^=(O=$[N+4&7])^O<<7,O=$[N+7&7],$[N]=k^=(O^=O<<13)^O<<9,x.i=N+1&7,k},function I($,N){var O,A=[];if(N===(0|N))A[0]=N;else for(N=""+N,O=0;O<N.length;++O)A[7&O]=A[7&O]<<15^N.charCodeAt(O)+A[O+1&7]<<13;for(;A.length<8;)A.push(0);for(O=0;O<8&&0===A[O];++O);for(8==O&&(A[7]=-1),$.x=A,$.i=0,O=256;O>0;--O)$.next()}(x,F)}function Q(F,x){return x.x=F.x.slice(),x.i=F.i,x}function q(F,x){null==F&&(F=+new Date);var I=new ee(F),$=x&&x.state,N=function(){return(I.next()>>>0)/4294967296};return N.double=function(){do{var A=((I.next()>>>11)+(I.next()>>>0)/4294967296)/(1<<21)}while(0===A);return A},N.int32=I.next,N.quick=N,$&&($.x&&Q($,I),N.state=function(){return Q(I,{})}),N}pe&&pe.exports?pe.exports=q:Y.amdD&&Y.amdO?void 0!==(Z=function(){return q}.call(qe,Y,qe,pe))&&(pe.exports=Z):this.xorshift7=q}(0,pi=Y.nmd(pi))},704:function(pi,qe,Y){var Z;!function(ye,pe,ue){function ee(F){var x=this,I="";x.next=function(){var N=x.x^x.x>>>2;return x.x=x.y,x.y=x.z,x.z=x.w,x.w=x.v,(x.d=x.d+362437|0)+(x.v=x.v^x.v<<4^N^N<<1)|0},x.x=0,x.y=0,x.z=0,x.w=0,x.v=0,F===(0|F)?x.x=F:I+=F;for(var $=0;$<I.length+64;$++)x.x^=0|I.charCodeAt($),$==I.length&&(x.d=x.x<<10^x.x>>>4),x.next()}function Q(F,x){return x.x=F.x,x.y=F.y,x.z=F.z,x.w=F.w,x.v=F.v,x.d=F.d,x}function q(F,x){var I=new ee(F),$=x&&x.state,N=function(){return(I.next()>>>0)/4294967296};return N.double=function(){do{var A=((I.next()>>>11)+(I.next()>>>0)/4294967296)/(1<<21)}while(0===A);return A},N.int32=I.next,N.quick=N,$&&("object"==typeof $&&Q($,I),N.state=function(){return Q(I,{})}),N}pe&&pe.exports?pe.exports=q:Y.amdD&&Y.amdO?void 0!==(Z=function(){return q}.call(qe,Y,qe,pe))&&(pe.exports=Z):this.xorwow=q}(0,pi=Y.nmd(pi))},454:function(pi,qe,Y){var Z;!function(ye,pe,ue){var O,ee=256,x=ue.pow(ee,6),I=ue.pow(2,52),$=2*I,N=ee-1;function k(se,_e,J){var G=[],U=j(R((_e=1==_e?{entropy:!0}:_e||{}).entropy?[se,ie(pe)]:se??function ce(){try{var se;return O&&(se=O.randomBytes)?se=se(ee):(se=new Uint8Array(ee),(ye.crypto||ye.msCrypto).getRandomValues(se)),ie(se)}catch{var _e=ye.navigator,J=_e&&_e.plugins;return[+new Date,ye,J,ye.screen,ie(pe)]}}(),3),G),B=new A(G),ae=function(){for(var ve=B.g(6),Ue=x,je=0;ve<I;)ve=(ve+je)*ee,Ue*=ee,je=B.g(1);for(;ve>=$;)ve/=2,Ue/=2,je>>>=1;return(ve+je)/Ue};return ae.int32=function(){return 0|B.g(4)},ae.quick=function(){return B.g(4)/4294967296},ae.double=ae,j(ie(B.S),pe),(_e.pass||J||function(ve,Ue,je,dt){return dt&&(dt.S&&V(dt,B),ve.state=function(){return V(B,{})}),je?(ue.random=ve,Ue):ve})(ae,U,"global"in _e?_e.global:this==ue,_e.state)}function A(se){var _e,J=se.length,G=this,U=0,B=G.i=G.j=0,ae=G.S=[];for(J||(se=[J++]);U<ee;)ae[U]=U++;for(U=0;U<ee;U++)ae[U]=ae[B=N&B+se[U%J]+(_e=ae[U])],ae[B]=_e;(G.g=function(ve){for(var Ue,je=0,dt=G.i,Ae=G.j,ke=G.S;ve--;)Ue=ke[dt=N&dt+1],je=je*ee+ke[N&(ke[dt]=ke[Ae=N&Ae+Ue])+(ke[Ae]=Ue)];return G.i=dt,G.j=Ae,je})(ee)}function V(se,_e){return _e.i=se.i,_e.j=se.j,_e.S=se.S.slice(),_e}function R(se,_e){var U,J=[],G=typeof se;if(_e&&"object"==G)for(U in se)try{J.push(R(se[U],_e-1))}catch{}return J.length?J:"string"==G?se:se+"\0"}function j(se,_e){for(var G,J=se+"",U=0;U<J.length;)_e[N&U]=N&(G^=19*_e[N&U])+J.charCodeAt(U++);return ie(_e)}function ie(se){return String.fromCharCode.apply(0,se)}if(j(ue.random(),pe),pi.exports){pi.exports=k;try{O=Y(234)}catch{}}else void 0!==(Z=function(){return k}.call(qe,Y,qe,pi))&&(pi.exports=Z)}(typeof self<"u"?self:this,[],Math)},817:()=>{},590:()=>{},530:()=>{},108:()=>{},551:()=>{},234:()=>{}},pi=>{pi(pi.s=3)}]);