"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([["apps_concierge_src_app_asset-manager_asset-manager_module_ts"],{7699:(fi,W,s)=>{s.r(W),s.d(W,{AppAssetManangerModule:()=>gi});var c=s(6477),_=s(6585),Ne=s(6958),k=s(867),Ee=s(5778),e=s(6839),p=s(9542),u=s(7728);const Fe=["button"],Re=["*"],X=new e.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),ee=new e.OlP("MatButtonToggleGroup"),Pe={provide:p.JU,useExisting:(0,e.Gpc)(()=>ie),multi:!0};let te=0;class ne{constructor(r,t){this.source=r,this.value=t}}let ie=(()=>{class n{get name(){return this._name}set name(t){this._name=t,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(t){this._vertical=(0,k.Ig)(t)}get value(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(i=>i.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}get selected(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=(0,k.Ig)(t),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(t){this._disabled=(0,k.Ig)(t),this._markButtonsForCheck()}constructor(t,i){this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+te++,this.valueChange=new e.vpe,this.change=new e.vpe,this.appearance=i&&i.appearance?i.appearance:"standard"}ngOnInit(){this._selectionModel=new Ee.Ov(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked))}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_emitChangeEvent(t){const i=new ne(t,this.value);this._controlValueAccessorChangeFn(i.value),this.change.emit(i)}_syncButtonToggle(t,i,o=!1,a=!1){!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?i?this._selectionModel.select(t):this._selectionModel.deselect(t):a=!0,a?Promise.resolve().then(()=>this._updateModelValue(t,o)):this._updateModelValue(t,o)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(i=>null!=t.value&&i===t.value):t.value===this._rawValue)}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(i=>this._selectValue(i))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>t.checked=!1)}_selectValue(t){const i=this._buttonToggles.find(o=>null!=o.value&&o.value===t);i&&(i.checked=!0,this._selectionModel.select(i))}_updateModelValue(t,i){i&&this._emitChangeEvent(t),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(t=>t._markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(X,8))},n.\u0275dir=e.lG2({type:n,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,i,o){if(1&t&&e.Suo(o,oe,5),2&t){let a;e.iGM(a=e.CRH())&&(i._buttonToggles=a)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,i){2&t&&(e.uIk("aria-disabled",i.disabled),e.ekj("mat-button-toggle-vertical",i.vertical)("mat-button-toggle-group-appearance-standard","standard"===i.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[e._Bn([Pe,{provide:ee,useExisting:n}])]}),n})();const Je=(0,u.Kr)(class{});let oe=(()=>{class n extends Je{get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){const i=(0,k.Ig)(t);i!==this._checked&&(this._checked=i,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=(0,k.Ig)(t)}constructor(t,i,o,a,l,d){super(),this._changeDetectorRef=i,this._elementRef=o,this._focusMonitor=a,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new e.vpe;const y=Number(l);this.tabIndex=y||0===y?y:null,this.buttonToggleGroup=t,this.appearance=d&&d.appearance?d.appearance:"standard"}ngOnInit(){const t=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+te++,t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){const t=!!this._isSingleSelector()||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new ne(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ee,8),e.Y36(e.sBO),e.Y36(e.SBq),e.Y36(Ne.tE),e.$8M("tabindex"),e.Y36(X,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["mat-button-toggle"]],viewQuery:function(t,i){if(1&t&&e.Gf(Fe,5),2&t){let o;e.iGM(o=e.CRH())&&(i._buttonElement=o.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,i){1&t&&e.NdJ("focus",function(){return i.focus()}),2&t&&(e.uIk("aria-label",null)("aria-labelledby",null)("id",i.id)("name",null),e.ekj("mat-button-toggle-standalone",!i.buttonToggleGroup)("mat-button-toggle-checked",i.checked)("mat-button-toggle-disabled",i.disabled)("mat-button-toggle-appearance-standard","standard"===i.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[e.qOj],ngContentSelectors:Re,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,i){if(1&t&&(e.F$t(),e.TgZ(0,"button",0,1),e.NdJ("click",function(){return i._onButtonClick()}),e.TgZ(2,"span",2),e.Hsn(3),e.qZA()(),e._UZ(4,"span",3)(5,"span",4)),2&t){const o=e.MAs(1);e.Q6J("id",i.buttonId)("disabled",i.disabled||null),e.uIk("tabindex",i.disabled?-1:i.tabIndex)("aria-pressed",i.checked)("name",i._getButtonName())("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby),e.xp6(5),e.Q6J("matRippleTrigger",o)("matRippleDisabled",i.disableRipple||i.disabled)}},dependencies:[u.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),n})(),Qe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.BQ,u.si,u.BQ]}),n})();var re=s(6297),Be=s(2035),je=s(4564);let He=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[je.vT]}),n})();var Ge=s(9941),Ye=s(2218);s(2223);let Q=(()=>{class n{constructor(){this.changes=new Ye.xQ,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ot={provide:Q,deps:[[new e.FiY,new e.tp0,Q]],useFactory:function it(n){return n||new Q}};let st=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[ot,u.rD],imports:[u.BQ,c.ez,Be.eL,He,Ge.Ps,u.si,u.BQ]}),n})();var lt=s(3045),I=s(2128),h=s(1670),N=s(5375),m=s(1426),ct=s(2886),q=s(1810),pt=s(9377),dt=s(3200),L=s(4505),C=s(7716),S=s(9095),ce=s(8759),U=s(9128),ut=s(823),b=s(6942),_t=s(9151),mt=s(6116),gt=s(3910),g=s(5504),ft=s(308);let x=(()=>{class n extends m.cx{get form(){return this._form}constructor(t){super(),this._spaces=t,this._options=new L.X({view:"grid"}),this._change=new L.X(0),this._poll=new L.X(0),this._form=(0,g.PG)(),this._loading=new L.X(!1),this.loading=this._loading.asObservable(),this.options=this._options.asObservable(),this.products=this._change.pipe((0,S.w)(()=>(this._loading.next(!0),(0,g.iF)())),(0,ce.b)(()=>this._loading.next(!1)),(0,U.d)(1)),this.purchase_orders=this._change.pipe((0,S.w)(()=>(this._loading.next(!0),(0,g.TB)())),(0,ce.b)(()=>this._loading.next(!1)),(0,U.d)(1)),this.requests=(0,C.aj)([this._poll,this._change,this._spaces.initialised]).pipe((0,ut.b)(200),(0,S.w)(i=>(0,N.F2)({period_start:(0,q.Z)((0,pt.Z)(Date.now())),period_end:(0,q.Z)((0,dt.Z)(Date.now())),type:"asset-request"})),(0,b.U)(i=>i.map(o=>new N.$N({...o,extension_data:{...o.extension_data,space:this._spaces.find(o.extension_data.space_id)}}))),(0,U.d)(1)),this.filtered_requests=(0,C.aj)([this.requests,this._options]).pipe((0,b.U)(([i,o])=>{const a=(o.search||"").toLowerCase();return a?i.filter(l=>l.user_name.toLowerCase().includes(a)||l.extension_data.location_name.toLowerCase().includes(a)||l.extension_data.assets.find(d=>d.name.toLowerCase().includes(a))||l.status.includes(a)||l.extension_data.tracking.includes(a)):i})),this.categories=(0,C.aj)([this._options,this._change]).pipe((0,S.w)(()=>(0,g.vD)()),(0,U.d)(1)),this.active_product=this._options.pipe((0,_t.h)(({active_item:i})=>!!i),(0,mt.g)("active_item"),(0,S.w)(i=>(0,g.ue)(i.active_item)),(0,U.d)(1)),this.active_product_requests=this.active_product.pipe((0,S.w)(i=>this.requests.pipe((0,b.U)(o=>o.filter(a=>i.assets.find(l=>l.id===a.asset_id))))),(0,b.U)(i=>i.filter(o=>"declined"!==o.status))),this.filtered_products=(0,C.aj)([this.products,this._options]).pipe((0,b.U)(([i,o])=>o.search?i.filter(a=>a.name.toLowerCase().includes(o.search.toLowerCase())):i)),this.product_mapping=this.filtered_products.pipe((0,b.U)(i=>{const o={_count:i.length},a=(0,m.Tw)(i.map(l=>l.category_id));for(const l of a)o[l]=i.filter(d=>d.category_id===l);return o}))}startPolling(t=15e3){return this.interval("polling",()=>this._poll.next(Date.now()),t),()=>this.stopPolling()}stopPolling(){this.clearInterval("polling")}resetForm(){this._form=(0,g.PG)()}setOptions(t){this._options.next({...this._options.getValue(),...t})}postChange(){this.timeout("change",()=>this._change.next(Date.now()),1e3)}setStatus(t,i){var o=this;return(0,h.Z)(function*(){const a=yield(0,N.Wp)(t.id,{...t,approved:"approved"===i,rejected:"declined"===i}).toPromise();return o._change.next(Date.now()),a})()}setTracking(t,i){var o=this;return(0,h.Z)(function*(){const a=yield(0,N.Wp)(t.id,{...t,extension_data:{...t.extension_data,tracking:i}}).toPromise();return o._change.next(Date.now()),a})()}deleteActiveProduct(){var t=this;return(0,h.Z)(function*(){const i=yield t.active_product.pipe((0,gt.q)(1)).toPromise();i?.id&&(yield(0,g.RE)(i.id).toPromise(),t._change.next(Date.now()),(0,m.t5)("Successfully deleted asset"))})()}postForm(){var t=this;return(0,h.Z)(function*(){if(!t.form?.valid)return;const i=t.form.value,o={...i},a=["other_data","id","name","quantity","category","purchase_date","brand","images"];for(const d of a)delete o[d];i.other_data=(0,ft.sWL)(o,[void 0,null,""]);const l=yield(0,g.U)(i).toPromise();return t._change.next(Date.now()),(0,m.t5)(`Successfully ${i.id?"updated":"created"} asset`),t.resetForm(),l.id})()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(ct.sK))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var v=s(8750),w=s(380),A=s(5306);const ht=function(){return["/asset-manager","manage","purchase-order"]};function vt(n,r){1&n&&(e.TgZ(0,"a",1),e._uU(1," Add Purchase Order "),e.qZA()),2&n&&e.Q6J("routerLink",e.DdM(1,ht))}function xt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"mat-button-toggle-group",8),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.setOptions({view:o}))}),e.ALo(1,"async"),e.TgZ(2,"mat-button-toggle",9)(3,"div",10)(4,"app-icon"),e._uU(5,"view_module"),e.qZA()()(),e.TgZ(6,"mat-button-toggle",11)(7,"div",10)(8,"app-icon"),e._uU(9,"view_list"),e.qZA()()()()}if(2&n){const t=e.oxw();let i;e.Q6J("ngModel",null==(i=e.lcZ(1,1,t.options))?null:i.view)}}const bt=function(){return["/asset-manager","manage","group"]};let pe=(()=>{class n{constructor(t){this._state=t,this.active="",this.options=this._state.options,this.setOptions=i=>this._state.setOptions(i)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x))},n.\u0275cmp=e.Xpm({type:n,selectors:[["asset-manager-topbar"]],inputs:{active:"active"},decls:11,vars:7,consts:[[1,"w-full","px-4","py-2","bg-white","dark:bg-neutral-700","flex","items-center","space-x-4"],["btn","","matRipple","",1,"secondary",3,"routerLink"],["btn","","matRipple","","class","secondary",3,"routerLink",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],[1,"flex-1"],["appearance","outline",1,"h-[3.25rem]"],["matPrefix","",1,"text-2xl","relative","top-1","-left-1"],["matInput","","placeholder","Search products and requests",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value","grid"],[1,"flex","items-center","justify-center","h-10","w-6","text-xl"],["value","list"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"a",1),e._uU(2," Add Product "),e.qZA(),e.YNc(3,vt,2,2,"a",2),e.YNc(4,xt,10,3,"mat-button-toggle-group",3),e._UZ(5,"div",4),e.TgZ(6,"mat-form-field",5)(7,"app-icon",6),e._uU(8," search "),e.qZA(),e.TgZ(9,"input",7),e.NdJ("ngModelChange",function(a){return i.setOptions({search:a})}),e.ALo(10,"async"),e.qZA()()()),2&t){let o;e.xp6(1),e.Q6J("routerLink",e.DdM(6,bt)),e.xp6(2),e.Q6J("ngIf","purchase-orders"===i.active),e.xp6(1),e.Q6J("ngIf","items"===i.active),e.xp6(5),e.Q6J("ngModel",null==(o=e.lcZ(10,4,i.options))?null:o.search)}},dependencies:[c.O5,v.KE,v.qo,w.Nt,u.wG,p.Fj,p.JJ,p.On,A.o,ie,oe,_.rH,c.Ov]}),n})();const Tt=function(){return["/asset-manager","list","requests"]},yt=function(){return["/asset-manager","list","items"]},At=function(){return["/asset-manager","list","purchase-orders"]};let de=(()=>{class n{constructor(t){this._router=t,this.active="requests"}ngOnInit(){this.active=this._router.url.includes("requests")?"requests":this._router.url.includes("items")?"items":"purchase-orders"}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["asset-listing"]],decls:11,vars:11,consts:[[3,"active"],[1,"flex","flex-col","flex-1","h-1/2","w-full","px-4"],["mat-tab-nav-bar",""],["mat-tab-link","",3,"routerLink","routerLinkActive","active","click"],["mat-tab-link","",3,"routerLink","active","click"],[1,"flex-1","h-1/2","w-full","overflow-visible"]],template:function(t,i){1&t&&(e._UZ(0,"asset-manager-topbar",0),e.TgZ(1,"div",1)(2,"nav",2)(3,"a",3),e.NdJ("click",function(){return i.active="requests"}),e._uU(4," Requests "),e.qZA(),e.TgZ(5,"a",4),e.NdJ("click",function(){return i.active="items"}),e._uU(6," Products "),e.qZA(),e.TgZ(7,"a",4),e.NdJ("click",function(){return i.active="purchase-orders"}),e._uU(8," Purchase Orders "),e.qZA()(),e.TgZ(9,"div",5),e._UZ(10,"router-outlet"),e.qZA()()),2&t&&(e.Q6J("active",i.active),e.xp6(3),e.Q6J("routerLink",e.DdM(8,Tt))("routerLinkActive","active")("active","requests"===i.active),e.xp6(2),e.Q6J("routerLink",e.DdM(9,yt))("active","items"===i.active),e.xp6(2),e.Q6J("routerLink",e.DdM(10,At))("active","purchase-orders"===i.active))},dependencies:[I.BU,I.Nj,_.lC,_.rH,_.Od,pe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%}\n/*# sourceMappingURL=asset-listing.component.ts-angular-inline--104.css.map*/"]}),n})();var Zt=s(4945);const Ct=["asset-manager",""];let ue=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["","asset-manager",""]],attrs:Ct,decls:3,vars:0,consts:[[1,"relative","w-1/2","flex-1","bg-gray-200","dark:bg-neutral-600","overflow-hidden"]],template:function(t,i){1&t&&(e._UZ(0,"sidebar"),e.TgZ(1,"main",0),e._UZ(2,"router-outlet"),e.qZA())},dependencies:[Zt.k,_.lC],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%;background:var(--bg)}\n/*# sourceMappingURL=asset-manager.component.ts-angular-inline--105.css.map*/"]}),n})();var B=s(2921),j=s(5912),St=s(5670),T=s(9314),M=s(7486),wt=s(9136),H=s(1110);let E=(()=>{class n{transform(t,i="_",o=" "){return(t||"").split(i).join(o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"splitjoin",type:n,pure:!0}),n})();function Mt(n,r){if(1&n&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",(null==t.selected.extension_data||null==t.selected.extension_data.space||null==t.selected.extension_data.space.level?null:t.selected.extension_data.space.level.display_name)||(null==t.selected.extension_data||null==t.selected.extension_data.space||null==t.selected.extension_data.space.level?null:t.selected.extension_data.space.level.name)," ")}}const _e=function(){return{display:"none"}},kt=function(n,r){return{"#Zones":n,"#zones":r}};function It(n,r){if(1&n&&e._UZ(0,"i-map",16),2&n){const t=e.oxw();e.Q6J("src",null==t.selected.extension_data||null==t.selected.extension_data.space||null==t.selected.extension_data.space.level?null:t.selected.extension_data.space.level.map_id)("styles",e.WLB(5,kt,e.DdM(3,_e),e.DdM(4,_e)))("features",t.selected_feature)}}function qt(n,r){1&n&&(e.TgZ(0,"p",17),e._uU(1," Select a space from the list to view map location "),e.qZA())}function Lt(n,r){if(1&n&&e._uU(0),2&n){const t=r.data,i=e.oxw();let o;e.hij(" ",(null==(o=i.level(t))?null:o.display_name)||"N/A"," ")}}function Ut(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(o){return o.stopPropagation()}),e.TgZ(1,"div",19),e._uU(2),e.ALo(3,"splitjoin"),e.qZA(),e.TgZ(4,"app-icon",20),e._uU(5,"expand_more"),e.qZA()(),e.TgZ(6,"mat-menu",21,22)(8,"button",23),e.NdJ("click",function(){const a=e.CHM(t).row,l=e.oxw();return e.KtG(l.setTracking(a,"in_storage"))}),e._uU(9," In Storage "),e.qZA(),e.TgZ(10,"button",23),e.NdJ("click",function(){const a=e.CHM(t).row,l=e.oxw();return e.KtG(l.setTracking(a,"in_transit"))}),e._uU(11," In Transit "),e.qZA(),e.TgZ(12,"button",23),e.NdJ("click",function(){const a=e.CHM(t).row,l=e.oxw();return e.KtG(l.setTracking(a,"at_location"))}),e._uU(13," At Location "),e.qZA()()}if(2&n){const t=r.row,i=e.MAs(7),o=e.oxw();e.Q6J("matMenuTriggerFor",i)("disabled",o.loading[t.id]),e.xp6(2),e.hij(" ",e.lcZ(3,3,null==t.extension_data?null:t.extension_data.tracking)||"In Storage"," ")}}const Ot=function(){return["zones","description","tracking","user_name"]},Dt=function(){return["Level","Space","Tracking","Requestee"]},Nt=function(){return["4r","flex","10r","6r"]},Et=function(n,r){return{tracking:n,zones:r}};let me=(()=>{class n{updateFeatures(){const t=this.selected.extension_data?.space||{};this.selected_feature=this.selected?[{location:t.map_id,content:B.qL,z_index:99,data:{message:`${t.display_name||t.name} is here`}}]:[]}setTracking(t,i){var o=this;return(0,h.Z)(function*(){o.loading[t.id]=!0,yield o._state.setTracking(t,i),o.loading[t.id]=!1})()}constructor(t,i){this._state=t,this._org=i,this.asset=this._state.active_product,this.requests=this._state.active_product_requests,this.loading={}}level(t){return this._org.levelWithID(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x),e.Y36(j.w7))},n.\u0275cmp=e.Xpm({type:n,selectors:[["asset-location-modal"]],decls:24,vars:20,consts:[[1,"p-6","relative"],["icon","","matRipple","","mat-dialog-close","",1,"absolute","top-4","right-4"],[1,"font-medium","mb-2"],["appearance","outline",1,"h-[3.5rem]","mb-2"],["matPrefix",""],["matInput","","placeholder","Search..."],[1,"flex","items-center","space-x-4","w-[90vw]","text-sm"],[1,"flex-1","h-[60vh]","w-1/2","border","border-gray-300","bg-gray-50","overflow-auto"],[3,"dataSource","columns","display_column","column_size","template","row_clicked"],[1,"flex-1","h-[60vh]","w-1/2","border","border-gray-300","bg-gray-100","relative","flex","items-center","justify-center"],["class","absolute top-4 left-4 bg-white px-4 py-2 rounded-3xl border border-gray-300",4,"ngIf"],[3,"src","styles","features",4,"ngIf","ngIfElse"],["empty_state",""],["level_template",""],["tracking_template",""],[1,"absolute","top-4","left-4","bg-white","px-4","py-2","rounded-3xl","border","border-gray-300"],[3,"src","styles","features"],[1,"opacity-30"],["matRipple","",1,"bg-none","w-full","flex","items-center","px-2","py-1","text-left",3,"matMenuTriggerFor","disabled","click"],[1,"capitalize","flex-1"],[1,"text-2xl"],[1,"w-36"],["tracking_menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"button",1)(2,"app-icon"),e._uU(3,"close"),e.qZA()(),e.TgZ(4,"h2",2),e._uU(5),e.ALo(6,"async"),e.ALo(7,"async"),e.qZA(),e.TgZ(8,"mat-form-field",3)(9,"app-icon",4),e._uU(10,"search"),e.qZA(),e._UZ(11,"input",5),e.qZA(),e.TgZ(12,"div",6)(13,"div",7)(14,"custom-table",8),e.NdJ("row_clicked",function(a){return i.selected=a,i.updateFeatures()}),e.qZA()(),e.TgZ(15,"div",9),e.YNc(16,Mt,2,1,"div",10),e.YNc(17,It,1,8,"i-map",11),e.qZA()()(),e.YNc(18,qt,2,0,"ng-template",null,12,e.W1O),e.YNc(20,Lt,1,1,"ng-template",null,13,e.W1O),e.YNc(22,Ut,14,5,"ng-template",null,14,e.W1O)),2&t){const o=e.MAs(19),a=e.MAs(21),l=e.MAs(23);let d;e.xp6(5),e.AsE(" ",null==(d=e.lcZ(6,10,i.asset))?null:d.name," in use location: ",null==(d=e.lcZ(7,12,i.requests))?null:d.length," "),e.xp6(9),e.Q6J("dataSource",i.requests)("columns",e.DdM(14,Ot))("display_column",e.DdM(15,Dt))("column_size",e.DdM(16,Nt))("template",e.WLB(17,Et,l,a)),e.xp6(2),e.Q6J("ngIf",i.selected),e.xp6(1),e.Q6J("ngIf",i.selected)("ngIfElse",o)}},dependencies:[c.O5,v.KE,v.qo,w.Nt,T.VK,T.OP,T.p6,M.ZT,u.wG,A.o,wt.p,H.C,c.Ov,E]}),n})();var O=s(5312),Ft=s(3970),Rt=s(2581),Pt=s(158);function Jt(n,r){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"async"),e.BQk()),2&n){const t=e.oxw(2);let i;e.xp6(1),e.hij(" ",(null==(i=e.lcZ(2,1,t.item))?null:i.description)||"~No Description~"," ")}}function Qt(n,r){1&n&&(e.TgZ(0,"span",43),e._uU(1,"No Description"),e.qZA())}function Bt(n,r){if(1&n&&(e.TgZ(0,"a",49),e.ALo(1,"safe"),e.TgZ(2,"app-icon",21),e._uU(3," download "),e.qZA()()),2&n){const t=e.oxw().$implicit;e.Q6J("href",e.xi3(1,1,t.url,"url"),e.LSH)}}const ge=function(){return["/asset-manager","manage","purchase-order"]},fe=function(n,r){return{id:n,group_id:r}};function jt(n,r){if(1&n&&(e.TgZ(0,"div",45)(1,"label"),e._uU(2),e.qZA(),e.TgZ(3,"div",46),e._uU(4),e.qZA(),e.TgZ(5,"div"),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.TgZ(8,"a",47),e.ALo(9,"async"),e.TgZ(10,"app-icon",21),e._uU(11,"edit"),e.qZA()(),e.YNc(12,Bt,4,4,"a",48),e.qZA()),2&n){const t=r.$implicit,i=e.oxw(3);let o;e.xp6(2),e.Oqu(t.purchase_order_number),e.xp6(2),e.hij(" ",t.invoice_number," "),e.xp6(2),e.Oqu(e.xi3(7,6,t.price,i.code)),e.xp6(2),e.Q6J("routerLink",e.DdM(11,ge))("queryParams",e.WLB(12,fe,t.id,null==(o=e.lcZ(9,9,i.item))?null:o.id)),e.xp6(4),e.Q6J("ngIf",t.url)}}const G=function(){return[]};function Ht(n,r){if(1&n&&(e.TgZ(0,"div",37),e.YNc(1,jt,13,15,"div",44),e.ALo(2,"async"),e.qZA()),2&n){const t=e.oxw(2);let i;e.xp6(1),e.Q6J("ngForOf",(null==(i=e.lcZ(2,1,t.item))?null:i.purchase_orders)||e.DdM(3,G))}}function Gt(n,r){1&n&&(e.TgZ(0,"span",43),e._uU(1," No Model no. "),e.qZA())}const he=function(){return["/asset-manager","manage","asset"]};function Yt(n,r){if(1&n&&(e.TgZ(0,"div",45)(1,"div",50),e._uU(2),e.YNc(3,Gt,2,0,"span",51),e.qZA(),e.TgZ(4,"div",46),e._uU(5),e.qZA(),e.TgZ(6,"div"),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"a",47),e.ALo(10,"async"),e.TgZ(11,"app-icon",21),e._uU(12,"edit"),e.qZA()()()),2&n){const t=r.$implicit,i=e.oxw(3);let o;e.xp6(2),e.hij(" ",t.model_number," "),e.xp6(1),e.Q6J("ngIf",!t.model_number),e.xp6(2),e.hij(" ",t.serial_number," "),e.xp6(2),e.hij(" ",e.xi3(8,6,1e3*t.end_of_life_date,"mediumDate")," "),e.xp6(2),e.Q6J("routerLink",e.DdM(11,he))("queryParams",e.WLB(12,fe,t.id,null==(o=e.lcZ(10,9,i.item))?null:o.id))}}function Vt(n,r){if(1&n&&(e.TgZ(0,"div",37),e.YNc(1,Yt,13,15,"div",44),e.ALo(2,"async"),e.qZA()),2&n){const t=e.oxw(2);let i;e.xp6(1),e.Q6J("ngForOf",(null==(i=e.lcZ(2,1,t.item))?null:i.assets)||e.DdM(3,G))}}const zt=function(){return["/asset-manager","list","items"]},Kt=function(){return["/asset-manager","manage","group"]},$t=function(n){return{id:n}},ve=function(n){return{group_id:n}};function Wt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"a",7)(3,"div",8)(4,"app-icon",9),e._uU(5,"arrow_back"),e.qZA(),e.TgZ(6,"div",10),e._uU(7,"Back"),e.qZA()()(),e.TgZ(8,"div",11)(9,"span"),e._uU(10,"Assets"),e.qZA(),e.TgZ(11,"span")(12,"app-icon",12),e._uU(13,"chevron_right"),e.qZA()(),e.TgZ(14,"span"),e._uU(15),e.ALo(16,"async"),e.qZA(),e.TgZ(17,"span")(18,"app-icon",12),e._uU(19,"chevron_right"),e.qZA()(),e.TgZ(20,"span"),e._uU(21),e.ALo(22,"async"),e.qZA()()(),e.TgZ(23,"div",8)(24,"div",13),e._UZ(25,"image-carousel",14),e.ALo(26,"async"),e.qZA(),e.TgZ(27,"div",15)(28,"div",16)(29,"div",17),e._uU(30),e.ALo(31,"async"),e.qZA(),e.TgZ(32,"div",18)(33,"a",19),e.ALo(34,"async"),e.TgZ(35,"div",20)(36,"app-icon",21),e._uU(37,"edit"),e.qZA(),e.TgZ(38,"div",22),e._uU(39,"Edit"),e.qZA()()(),e._UZ(40,"div",23),e.TgZ(41,"button",24)(42,"div",25)(43,"app-icon",21),e._uU(44,"delete"),e.qZA(),e.TgZ(45,"div",22),e._uU(46,"Delete"),e.qZA()()()()(),e.TgZ(47,"div",26),e.YNc(48,Jt,3,3,"ng-container",27),e.ALo(49,"async"),e.YNc(50,Qt,2,0,"ng-template",null,28,e.W1O),e.qZA(),e.TgZ(52,"div",29)(53,"div",30)(54,"div",31),e._uU(55),e.ALo(56,"async"),e.ALo(57,"async"),e.qZA()(),e.TgZ(58,"div",30)(59,"div",31),e._uU(60),e.ALo(61,"async"),e.qZA(),e.TgZ(62,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.viewLocations())}),e.ALo(63,"async"),e.ALo(64,"async"),e._uU(65," View Locations "),e.qZA()()()()(),e.TgZ(66,"mat-tab-group",33)(67,"mat-tab",34)(68,"div",35)(69,"h3",36),e._uU(70,"General"),e.qZA(),e.TgZ(71,"div",37)(72,"div",38)(73,"label"),e._uU(74,"Brand"),e.qZA(),e.TgZ(75,"div"),e._uU(76),e.ALo(77,"async"),e.qZA()()()()(),e.TgZ(78,"mat-tab",39)(79,"div",35)(80,"h3",36),e._uU(81,"Timeline"),e.qZA(),e.TgZ(82,"div",37)(83,"div",38)(84,"label"),e._uU(85,"Purchase Date"),e.qZA(),e.TgZ(86,"div"),e._uU(87),e.ALo(88,"date"),e.ALo(89,"async"),e.qZA()(),e.TgZ(90,"div",38)(91,"label"),e._uU(92,"Good Until"),e.qZA(),e.TgZ(93,"div"),e._uU(94),e.ALo(95,"date"),e.ALo(96,"async"),e.qZA()()(),e.TgZ(97,"h3",36),e._uU(98,"Purchase Orders"),e.qZA(),e.TgZ(99,"a",40),e.ALo(100,"async"),e._uU(101," Add Purchase Order "),e.qZA(),e.YNc(102,Ht,3,4,"div",41),e.ALo(103,"async"),e.qZA()(),e.TgZ(104,"mat-tab",42)(105,"div",35)(106,"h3",36),e._uU(107,"Assets"),e.qZA(),e.TgZ(108,"a",40),e.ALo(109,"async"),e._uU(110," Add Asset "),e.qZA(),e.YNc(111,Vt,3,4,"div",41),e.ALo(112,"async"),e.qZA()()()()}if(2&n){const t=e.MAs(51),i=e.oxw(),o=e.MAs(5),a=e.MAs(7),l=e.MAs(9);let d,y,F,R,Z,D,P,qe,J,Le,Ue,z,Oe,K,De,$;e.xp6(2),e.Q6J("routerLink",e.DdM(66,zt)),e.xp6(13),e.Oqu(null==(d=e.lcZ(16,24,i.item))||null==d.category?null:d.category.name),e.xp6(6),e.Oqu(null==(y=e.lcZ(22,26,i.item))?null:y.name),e.xp6(4),e.Q6J("images",(null==(F=e.lcZ(26,28,i.item))?null:F.images)||e.DdM(67,G)),e.xp6(5),e.hij(" ",null==(R=e.lcZ(31,30,i.item))?null:R.name," "),e.xp6(3),e.Q6J("routerLink",e.DdM(68,Kt))("queryParams",e.VKq(69,$t,null==(Z=e.lcZ(34,32,i.item))?null:Z.id)),e.xp6(9),e.Q6J("content",o),e.xp6(6),e.Q6J("ngIf",null==(D=e.lcZ(49,34,i.item))?null:D.description)("ngIfElse",t),e.xp6(7),e.hij(" Available: ",(null==(P=e.lcZ(56,36,i.item))?null:P.assets.length)-(null==(P=e.lcZ(57,38,i.requests))?null:P.length)||0," "),e.xp6(5),e.hij(" In Use: ",(null==(qe=e.lcZ(61,40,i.requests))?null:qe.length)||0," "),e.xp6(2),e.Q6J("disabled",(null==(J=e.lcZ(63,42,i.item))?null:J.assets.length)-(null==(J=e.lcZ(64,44,i.requests))?null:J.length)!=0),e.xp6(14),e.hij(" ",(null==(Le=e.lcZ(77,46,i.item))?null:Le.brand)||"~None~"," "),e.xp6(11),e.hij(" ",e.xi3(88,48,null==(Ue=e.lcZ(89,51,i.item))?null:Ue.purchase_date,"mediumDate")," "),e.xp6(7),e.hij(" ",e.xi3(95,53,1e3*(null==(z=e.lcZ(96,56,i.item))||null==z.assets[0]?null:z.assets[0].end_of_life_date),"mediumDate")," "),e.xp6(5),e.Q6J("routerLink",e.DdM(71,ge))("queryParams",e.VKq(72,ve,null==(Oe=e.lcZ(100,58,i.item))?null:Oe.id)),e.xp6(3),e.Q6J("ngIf",null==(K=e.lcZ(103,60,i.item))||null==K.purchase_orders?null:K.purchase_orders.length)("ngIfElse",a),e.xp6(6),e.Q6J("routerLink",e.DdM(74,he))("queryParams",e.VKq(75,ve,null==(De=e.lcZ(109,62,i.item))?null:De.id)),e.xp6(3),e.Q6J("ngIf",null==($=e.lcZ(112,64,i.item))||null==$.assets?null:$.assets.length)("ngIfElse",l)}}function Xt(n,r){1&n&&(e.TgZ(0,"div",52),e._UZ(1,"mat-spinner",53),e.TgZ(2,"p"),e._uU(3,"Loading product details..."),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("diameter",32))}function en(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",56)(1,"p"),e._uU(2,"Are you sure you want to permanently delete this product?"),e.qZA(),e.TgZ(3,"div",57)(4,"button",58),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.closeTooltip())}),e._uU(5," No "),e.qZA(),e.TgZ(6,"button",59),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.deleteAsset())}),e._uU(7," Yes, delete "),e.qZA()()()}}function tn(n,r){1&n&&(e.TgZ(0,"div",60),e._UZ(1,"mat-spinner",53),e.TgZ(2,"p"),e._uU(3,"Deleting product details..."),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("diameter",32))}function nn(n,r){if(1&n&&(e.YNc(0,en,8,0,"div",54),e.YNc(1,tn,4,1,"ng-template",null,55,e.W1O)),2&n){const t=e.MAs(2),i=e.oxw();e.Q6J("ngIf",!i.deleting)("ngIfElse",t)}}function on(n,r){1&n&&(e.TgZ(0,"div",61),e._uU(1,"No purchase orders"),e.qZA())}function rn(n,r){1&n&&(e.TgZ(0,"div",61),e._uU(1,"No assets"),e.qZA())}let xe=(()=>{class n extends m.cx{deleteAsset(){var t=this;return(0,h.Z)(function*(){t.deleting=!0,yield t._state.deleteActiveProduct(),t.deleting=!1,t._router.navigate(["/asset-manager","list","items"]),t.closeTooltip()})()}closeTooltip(){this._tooltip_el?.close()}get code(){return this._org.currency_code}constructor(t,i,o,a,l){super(),this._route=t,this._router=i,this._state=o,this._dialog=a,this._org=l,this.loading=!1,this.deleting=!1,this.item=this._state.active_product,this.requests=this._state.active_product_requests}viewLocations(){this._dialog.open(me)}ngOnInit(){this.loading=!0,this.subscription("route.params",this._route.paramMap.subscribe(t=>{t.has("id")&&this._state.setOptions({active_item:t.get("id")})})),this.timeout("no_asset",()=>this._router.navigate(["/asset-mananger"]),1e3),this._state.active_product.pipe((0,St.P)(t=>!!t)).subscribe(()=>{this.clearTimeout("no_asset"),this.loading=!1})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.gz),e.Y36(_.F0),e.Y36(x),e.Y36(M.uw),e.Y36(j.w7))},n.\u0275cmp=e.Xpm({type:n,selectors:[["asset-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(B.Xo,5),2&t){let o;e.iGM(o=e.CRH())&&(i._tooltip_el=o.first)}},features:[e.qOj],decls:10,vars:4,consts:[["class","h-full w-full flex flex-col",4,"ngIf","ngIfElse"],["loading_state",""],["delete_tooltip",""],["empty_invoices",""],["empty_items",""],[1,"h-full","w-full","flex","flex-col"],[1,"flex","items-center","space-x-4","p-2","bg-white","border-b","border-gray-200"],["btn","","matRipple","",1,"inverse",3,"routerLink"],[1,"flex","items-center"],[1,"text-xl"],[1,"mr-2"],[1,"flex","items-center","space-x-2","font-medium"],[1,"text-2xl"],[1,"bg-white","dark:bg-neutral-700","flex-1","w-1/2","h-[22.5rem]"],[3,"images"],[1,"w-[32rem]","h-[22.5rem]","px-4","flex","flex-col"],[1,"w-full","flex","items-center","justify-between","border-b","border-gray-300","dark:border-neutral-500"],[1,"font-medium"],[1,"flex","items-center","text-sm"],["button","","btn","","matRipple","",1,"clear",3,"routerLink","queryParams"],[1,"flex","items-center","text-blue-600","hover:text-blue-900"],[1,"text-lg"],[1,"mr-2","underline"],[1,"w-px","h-4","bg-gray-300"],["btn","","matRipple","",1,"clear"],["customTooltip","",1,"flex","items-center","text-blue-600","hover:text-blue-900",3,"content"],[1,"py-4","w-full","flex-1","h-1/2","overflow-auto"],[4,"ngIf","ngIfElse"],["no_desc_state",""],[1,"rounded","bg-white","dark:bg-neutral-700","shadow","border","border-gray-300","dark:border-neutral-500","w-full","divide-y","divide-gray-200","dark:divide-neutral-500"],[1,"flex","items-center","justify-between","p-3"],[1,"pl-2"],["btn","","matRipple","",3,"disabled","click"],[1,"flex-1","h-px"],["label","Specifications"],[1,"max-w-[768px]","mx-auto","p-4"],[1,"p-2"],["data-table","",1,"bg-white","dark:bg-neutral-700","border","border-gray-300","dark:border-neutral-500"],[1,"flex","items-center","p-2"],["label","Purchase information"],["btn","","matRipple","",1,"mb-2",3,"routerLink","queryParams"],["data-table","","class","bg-white dark:bg-neutral-700 border border-gray-300 dark:border-neutral-500",4,"ngIf","ngIfElse"],["label","Assets"],[1,"opacity-30"],["class","flex items-center p-2 space-x-2",4,"ngFor","ngForOf"],[1,"flex","items-center","p-2","space-x-2"],[1,"flex-1"],[3,"routerLink","queryParams"],["class","underline","target","_blank","ref","noreferer noopener",3,"href",4,"ngIf"],["target","_blank","ref","noreferer noopener",1,"underline",3,"href"],[1,"font-medium","text-sm"],["class","opacity-30",4,"ngIf"],[1,"h-full","w-full","flex","flex-col","items-center","justify-center"],[3,"diameter"],["class","p-4 bg-white dark:bg-neutral-700 rounded my-2 text-center w-[18rem]",4,"ngIf","ngIfElse"],["delete_loading",""],[1,"p-4","bg-white","dark:bg-neutral-700","rounded","my-2","text-center","w-[18rem]"],[1,"flex","items-center","space-x-2","mt-6"],["btn","","matRipple","",1,"inverse","flex-1","w-24",3,"click"],["btn","","matRipple","",1,"error","flex-1","w-24",3,"click"],[1,"p-4","bg-white","dark:bg-neutral-700","rounded","my-2","w-64","h-36","flex","flex-col","items-center","justify-center","space-y-2"],[1,"p-2","opacity-30"]],template:function(t,i){if(1&t&&(e.YNc(0,Wt,113,77,"div",0),e.ALo(1,"async"),e.YNc(2,Xt,4,1,"ng-template",null,1,e.W1O),e.YNc(4,nn,3,2,"ng-template",null,2,e.W1O),e.YNc(6,on,2,0,"ng-template",null,3,e.W1O),e.YNc(8,rn,2,0,"ng-template",null,4,e.W1O)),2&t){const o=e.MAs(3);e.Q6J("ngIf",!i.loading&&e.lcZ(1,2,i.item))("ngIfElse",o)}},dependencies:[c.sg,c.O5,O.Ou,u.wG,A.o,Ft.X,Rt.K,I.uX,I.SP,_.rH,c.Ov,c.H9,c.uU,Pt.y],styles:["[data-table]>div[_ngcontent-%COMP%]:nth-child(2n){background:#0001}label[_ngcontent-%COMP%]{width:10rem;min-width:0}\n/*# sourceMappingURL=asset-view.component.ts-angular-inline--106.css.map*/"]}),n})();var be=s(9685),an=s(1799);let Te=(()=>{class n{transform(t,i=!0){let o=(0,an.Z)({days:Math.floor(t/1440),hours:Math.floor(t/60%24),minutes:Math.floor(t%60)});return i?o.replace(" day","d").replace(" hour","hr").replace(" minute","min"):o}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"duration",type:n,pure:!0}),n})();function sn(n,r){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.xp6(1),e.AsE(" ",t.amount||1,"\xd7 ",t.name," ")}}const ln=function(n){return{name:n}},cn=function(){return[]};function pn(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.request=null,e.KtG(o.requestChange.emit(o.request))}),e.TgZ(1,"div",2),e.NdJ("click",function(o){return o.stopPropagation()}),e.TgZ(2,"button",3),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.request=null,e.KtG(o.requestChange.emit(o.request))}),e.TgZ(3,"app-icon"),e._uU(4,"close"),e.qZA()(),e.TgZ(5,"div",4),e._UZ(6,"a-user-avatar",5),e.TgZ(7,"div",6)(8,"div",7),e._uU(9),e.qZA(),e.TgZ(10,"div",8)(11,"app-icon"),e._uU(12,"mail"),e.qZA(),e.TgZ(13,"a",9),e._uU(14),e.qZA()(),e.TgZ(15,"div",8)(16,"app-icon"),e._uU(17,"call"),e.qZA(),e.TgZ(18,"a",9),e._uU(19),e.qZA()(),e.TgZ(20,"div",8)(21,"app-icon"),e._uU(22,"work_outline"),e.qZA(),e.TgZ(23,"div"),e._uU(24),e.qZA()()()(),e.TgZ(25,"div",10)(26,"div",11)(27,"div",12)(28,"app-icon",13),e._uU(29,"send"),e.qZA()(),e.TgZ(30,"div",7),e._uU(31,"Assets Requested"),e.qZA()(),e.TgZ(32,"div",14),e.YNc(33,sn,2,2,"div",15),e.qZA(),e.TgZ(34,"div",16)(35,"div",12)(36,"app-icon",13),e._uU(37,"event"),e.qZA()(),e.TgZ(38,"div",7),e._uU(39,"Date For"),e.qZA()(),e.TgZ(40,"div",17),e._uU(41),e.ALo(42,"date"),e.qZA(),e.TgZ(43,"div",16)(44,"div",12)(45,"app-icon",13),e._uU(46,"schedule"),e.qZA()(),e.TgZ(47,"div",7),e._uU(48,"Period"),e.qZA()(),e.TgZ(49,"div",17),e._uU(50),e.ALo(51,"date"),e.ALo(52,"date"),e.ALo(53,"duration"),e.qZA(),e.TgZ(54,"div",16)(55,"div",12)(56,"app-icon",13),e._uU(57,"place"),e.qZA()(),e.TgZ(58,"div",7),e._uU(59,"Floor"),e.qZA()(),e.TgZ(60,"div",17),e._uU(61),e.qZA(),e.TgZ(62,"div",16)(63,"div",12)(64,"app-icon",13),e._uU(65,"meeting_room"),e.qZA()(),e.TgZ(66,"div",7),e._uU(67,"Room"),e.qZA()(),e.TgZ(68,"div",17),e._uU(69),e.qZA(),e.TgZ(70,"div",18)(71,"button",19)(72,"app-icon",20),e._uU(73),e.qZA(),e.TgZ(74,"div",21),e._uU(75),e.qZA(),e.TgZ(76,"app-icon",22),e._uU(77,"expand_more"),e.qZA()(),e.TgZ(78,"mat-menu",23,24)(80,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.setStatus("approved"))}),e._uU(81," Approve "),e.qZA(),e.TgZ(82,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.setStatus("declined"))}),e._uU(83," Decline "),e.qZA()(),e.TgZ(84,"button",26)(85,"div",21),e._uU(86),e.ALo(87,"splitjoin"),e.qZA(),e.TgZ(88,"app-icon",22),e._uU(89,"expand_more"),e.qZA()(),e.TgZ(90,"mat-menu",23,27)(92,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.setTracking("in_storage"))}),e._uU(93," In Storage "),e.qZA(),e.TgZ(94,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.setTracking("in_transit"))}),e._uU(95," In Transit "),e.qZA(),e.TgZ(96,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.setTracking("at_location"))}),e._uU(97," At Location "),e.qZA()()()()()()}if(2&n){const t=e.MAs(79),i=e.MAs(91),o=e.oxw();e.xp6(6),e.Q6J("user",e.VKq(46,ln,o.request.user_name)),e.xp6(3),e.Oqu(o.request.user_name),e.xp6(4),e.Q6J("href","mailto:"+o.request.user_email,e.LSH),e.xp6(1),e.hij(" ",o.request.user_email||"staff@place.tech"," "),e.xp6(4),e.Q6J("href","tel:"+o.request.user_phone,e.LSH),e.xp6(1),e.hij(" ",o.request.user_phone||"04 1234 5678"," "),e.xp6(5),e.Oqu(o.request.user_company||"PlaceOS"),e.xp6(9),e.Q6J("ngForOf",(null==o.request.extension_data?null:o.request.extension_data.assets)||e.DdM(48,cn)),e.xp6(8),e.hij(" ",e.xi3(42,33,o.request.date,"mediumDate")," "),e.xp6(9),e.lnq(" ",e.xi3(51,36,o.request.date,"shortTime")," \u2013 ",e.xi3(52,39,o.request.date+60*o.request.duration*1e3,"shortTime")," (",e.lcZ(53,42,o.request.duration),") "),e.xp6(11),e.hij(" ",(null==o.request.extension_data||null==o.request.extension_data.space||null==o.request.extension_data.space.level?null:o.request.extension_data.space.level.display_name)||(null==o.request.extension_data||null==o.request.extension_data.space||null==o.request.extension_data.space.level?null:o.request.extension_data.space.level.name)," "),e.xp6(8),e.hij(" ",(null==o.request.extension_data||null==o.request.extension_data.space?null:o.request.extension_data.space.display_name)||(null==o.request.extension_data||null==o.request.extension_data.space?null:o.request.extension_data.space.name)," "),e.xp6(2),e.ekj("bg-green-600","approved"===o.request.status)("bg-red-600","declined"===o.request.status)("bg-yellow-400","tentative"===o.request.status),e.Q6J("matMenuTriggerFor",t)("disabled",o.loading),e.xp6(1),e.ekj("text-green-600","approved"===o.request.status)("text-red-600","declined"===o.request.status)("text-yellow-400","tentative"===o.request.status),e.xp6(1),e.hij(" ","approved"===o.request.status?"done":"declined"===o.request.status?"close":"warning"," "),e.xp6(2),e.hij(" ",o.request.status," "),e.xp6(9),e.Q6J("matMenuTriggerFor",i)("disabled",o.loading),e.xp6(2),e.hij(" ",e.lcZ(87,44,null==o.request.extension_data?null:o.request.extension_data.tracking)," ")}}let ye=(()=>{class n{constructor(t){this._state=t,this.requestChange=new e.vpe,this.loading=!1}setStatus(t){var i=this;return(0,h.Z)(function*(){i.loading=!0,yield i._state.setStatus(i.request,t),i.request.status=t,i.loading=!1})()}setTracking(t){var i=this;return(0,h.Z)(function*(){i.loading=!0,yield i._state.setTracking(i.request,t),i.request.extension_data.tracking=t,i.loading=!1})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x))},n.\u0275cmp=e.Xpm({type:n,selectors:[["asset-request-details"]],inputs:{request:"request"},outputs:{requestChange:"requestChange"},decls:1,vars:1,consts:[["class","fixed inset-0 bg-black/50 z-50",3,"click",4,"ngIf"],[1,"fixed","inset-0","bg-black/50","z-50",3,"click"],[1,"absolute","inset-y-0","right-0","bg-white","dark:bg-neutral-700","w-[480px]",3,"click"],["icon","","matRipple","",1,"absolute","top-1","right-1",3,"click"],[1,"border-b","border-gray-200","dark:border-neutral-500","px-2","py-4","flex","space-x-4"],[1,"text-xl",3,"user"],["details","",1,"space-y-1"],[1,"font-medium"],[1,"flex","items-center","text-sm","space-x-2"],[1,"underline",3,"href"],[1,"px-3","py-4","relative"],[1,"flex","items-center","space-x-4"],[1,"h-6","w-6","rounded-full","text-secondary","bg-gray-200","dark:bg-neutral-600","flex","items-center","justify-center"],[1,"text-sm"],[1,"pl-10","flex","flex-col","mt-1"],[4,"ngFor","ngForOf"],[1,"flex","items-center","space-x-4","mt-4"],[1,"pl-10","mt-1"],[1,"absolute","top-4","right-4","text-sm"],["matRipple","",1,"rounded-3xl","!bg-opacity-20","flex","items-center","px-2","py-1","w-full","text-left","space-x-2","mb-4",3,"matMenuTriggerFor","disabled"],[1,"text-xl"],[1,"capitalize","flex-1"],[1,"text-2xl"],[1,"w-36"],["menu","matMenu"],["mat-menu-item","",3,"click"],["matRipple","",1,"bg-none","w-full","flex","items-center","px-2","py-1","text-left","border","border-gray-200","dark:border-neutral-700","rounded-none",3,"matMenuTriggerFor","disabled"],["tracking_menu","matMenu"]],template:function(t,i){1&t&&e.YNc(0,pn,98,49,"div",0),2&t&&e.Q6J("ngIf",i.request)},dependencies:[c.sg,c.O5,T.VK,T.OP,T.p6,u.wG,A.o,be.k,c.uU,E,Te]}),n})();const dn=function(n){return{name:n}};function un(n,r){if(1&n&&(e.TgZ(0,"div",13),e._UZ(1,"a-user-avatar",14),e.TgZ(2,"div",15),e._uU(3),e.qZA()()),2&n){const t=r.row;e.xp6(1),e.Q6J("user",e.VKq(2,dn,t.user_name)),e.xp6(2),e.Oqu(t.user_name)}}function _n(n,r){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.xp6(1),e.AsE(" ",t.amount||1,"\xd7 ",t.name," ")}}const mn=function(){return[]};function gn(n,r){if(1&n&&(e.TgZ(0,"div",16),e.YNc(1,_n,2,2,"div",17),e.qZA()),2&n){const t=r.row;e.xp6(1),e.Q6J("ngForOf",(null==t.extension_data?null:t.extension_data.assets)||e.DdM(1,mn))}}function fn(n,r){1&n&&(e._uU(0),e.ALo(1,"date")),2&n&&e.hij(" ",e.xi3(1,1,r.row.date,"mediumDate")," ")}function hn(n,r){if(1&n&&e._uU(0),2&n){const t=r.data,i=e.oxw();let o;e.hij(" ",(null==(o=i.level(t))?null:o.display_name)||"N/A"," ")}}function vn(n,r){if(1&n&&(e._uU(0),e.ALo(1,"date"),e.ALo(2,"date")),2&n){const t=r.row;e.AsE(" ",e.xi3(1,2,t.date,"shortTime")," \u2013 ",e.xi3(2,5,t.date+60*t.duration*1e3,"shortTime")," ")}}function xn(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(o){return o.stopPropagation()}),e.TgZ(1,"app-icon",19),e._uU(2),e.qZA(),e.TgZ(3,"div",20),e._uU(4),e.qZA(),e.TgZ(5,"app-icon",21),e._uU(6,"expand_more"),e.qZA()(),e.TgZ(7,"mat-menu",22,23)(9,"button",24),e.NdJ("click",function(){const a=e.CHM(t).row,l=e.oxw();return e.KtG(l.setStatus(a,"approved"))}),e._uU(10," Approve "),e.qZA(),e.TgZ(11,"button",24),e.NdJ("click",function(){const a=e.CHM(t).row,l=e.oxw();return e.KtG(l.setStatus(a,"declined"))}),e._uU(12," Decline "),e.qZA()()}if(2&n){const t=r.row,i=e.MAs(8),o=e.oxw();e.ekj("bg-green-600","approved"===t.status)("bg-red-600","declined"===t.status)("bg-yellow-400","tentative"===t.status),e.Q6J("matMenuTriggerFor",i)("disabled",o.loading[t.id]),e.xp6(1),e.ekj("text-green-600","approved"===t.status)("text-red-600","declined"===t.status)("text-yellow-400","tentative"===t.status),e.xp6(1),e.hij(" ","approved"===t.status?"done":"declined"===t.status?"close":"warning"," "),e.xp6(2),e.Oqu(t.status)}}function bn(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(o){return o.stopPropagation()}),e.TgZ(1,"div",20),e._uU(2),e.ALo(3,"splitjoin"),e.qZA(),e.TgZ(4,"app-icon",21),e._uU(5,"expand_more"),e.qZA()(),e.TgZ(6,"mat-menu",22,26)(8,"button",24),e.NdJ("click",function(){const a=e.CHM(t).row,l=e.oxw();return e.KtG(l.setTracking(a,"in_storage"))}),e._uU(9," In Storage "),e.qZA(),e.TgZ(10,"button",24),e.NdJ("click",function(){const a=e.CHM(t).row,l=e.oxw();return e.KtG(l.setTracking(a,"in_transit"))}),e._uU(11," In Transit "),e.qZA(),e.TgZ(12,"button",24),e.NdJ("click",function(){const a=e.CHM(t).row,l=e.oxw();return e.KtG(l.setTracking(a,"at_location"))}),e._uU(13," At Location "),e.qZA()()}if(2&n){const t=r.row,i=e.MAs(7),o=e.oxw();e.Q6J("matMenuTriggerFor",i)("disabled",o.loading[t.id]),e.xp6(2),e.hij(" ",e.lcZ(3,3,null==t.extension_data?null:t.extension_data.tracking)||"In Storage"," ")}}const Tn=function(){return["user","name","date","period","zones","description","approval","tracking"]},yn=function(){return["Requester","Asset Requested","Date for","Period","Floor","Room","Approval","Tracking"]},An=function(){return["flex","12r","","9.5r","6r","12r","10r","10r"]},Zn=function(n,r,t,i,o,a,l){return{user:n,assets:r,date:t,period:i,approval:o,tracking:a,location_floor:l}};let Ae=(()=>{class n extends m.cx{setStatus(t,i){var o=this;return(0,h.Z)(function*(){o.loading[t.id]=!0,yield o._state.setStatus(t,i),o.loading[t.id]=!1})()}setTracking(t,i){var o=this;return(0,h.Z)(function*(){o.loading[t.id]=!0,yield o._state.setTracking(t,i),o.loading[t.id]=!1})()}constructor(t,i){super(),this._state=t,this._org=i,this.requests=this._state.filtered_requests,this.filters=this._state.options,this.loading={}}level(t){return this._org.levelWithID(t)}ngOnInit(){this.subscription("polling",this._state.startPolling())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x),e.Y36(j.w7))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-asset-request-list"]],features:[e.qOj],decls:24,vars:26,consts:[[1,"relative","-left-4","w-[calc(100%+2rem)]","mt-4","h-[calc(100%-1rem)]","flex","flex-col"],[1,"bg-white","dark:bg-neutral-700","p-4","border-t","border-b","border-gray-300","dark:border-neutral-500"],[1,"opacity-60","text-sm"],[1,"w-full","overflow-auto","h-1/2","flex-1"],["asset-requests","",1,"block","min-w-[82rem]","text-sm",3,"dataSource","columns","display_column","column_size","template","empty","row_clicked"],["user_template",""],["assets_template",""],["date_template",""],["level_template",""],["period_template",""],["approval_template",""],["tracking_template",""],[3,"request","requestChange"],[1,"flex","items-center","space-x-2"],[3,"user"],[1,"flex-1"],[1,"flex","flex-col"],[4,"ngFor","ngForOf"],["matRipple","",1,"rounded-3xl","!bg-opacity-20","flex","items-center","px-2","py-1","w-full","text-left","space-x-2",3,"matMenuTriggerFor","disabled","click"],[1,"text-xl"],[1,"capitalize","flex-1"],[1,"text-2xl"],[1,"w-36"],["menu","matMenu"],["mat-menu-item","",3,"click"],["matRipple","",1,"bg-none","w-full","flex","items-center","px-2","py-1","text-left",3,"matMenuTriggerFor","disabled","click"],["tracking_menu","matMenu"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.ALo(4,"async"),e.ALo(5,"async"),e.qZA()(),e.TgZ(6,"div",3)(7,"custom-table",4),e.NdJ("row_clicked",function(a){return i.request=a}),e.ALo(8,"async"),e.qZA()()(),e.YNc(9,un,4,4,"ng-template",null,5,e.W1O),e.YNc(11,gn,2,2,"ng-template",null,6,e.W1O),e.YNc(13,fn,2,4,"ng-template",null,7,e.W1O),e.YNc(15,hn,1,1,"ng-template",null,8,e.W1O),e.YNc(17,vn,3,8,"ng-template",null,9,e.W1O),e.YNc(19,xn,13,16,"ng-template",null,10,e.W1O),e.YNc(21,bn,14,5,"ng-template",null,11,e.W1O),e.TgZ(23,"asset-request-details",12),e.NdJ("requestChange",function(a){return i.request=a}),e.qZA()),2&t){const o=e.MAs(10),a=e.MAs(12),l=e.MAs(14),d=e.MAs(16),y=e.MAs(18),F=e.MAs(20),R=e.MAs(22);let Z,D;e.xp6(3),e.AsE(" ",null==(Z=e.lcZ(4,9,i.requests))?null:Z.length," asset request","1"===(null==(Z=e.lcZ(5,11,i.requests))?null:Z.length)?"":"s"," "),e.xp6(4),e.Q6J("dataSource",i.requests)("columns",e.DdM(15,Tn))("display_column",e.DdM(16,yn))("column_size",e.DdM(17,An))("template",e.Hh0(18,Zn,o,a,l,y,F,R,d))("empty",null!=(D=e.lcZ(8,13,i.filters))&&D.search?"No matching asset requests":"There are no asset requests for the currently selected date."),e.xp6(16),e.Q6J("request",i.request)}},dependencies:[c.sg,T.VK,T.OP,T.p6,u.wG,A.o,be.k,H.C,ye,c.Ov,c.uU,E],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%}\n/*# sourceMappingURL=asset-request-list.component.ts-angular-inline--107.css.map*/"]}),n})();function Cn(n,r){if(1&n&&e._UZ(0,"img",21),2&n){const t=e.oxw().$implicit;e.Q6J("src",t.images[0],e.LSH)}}function Sn(n,r){1&n&&e._UZ(0,"img",22)}const Ze=function(n){return["/asset-manager","view",n]};function wn(n,r){if(1&n&&(e.TgZ(0,"a",15)(1,"div",16),e.YNc(2,Cn,1,1,"img",17),e.YNc(3,Sn,1,0,"ng-template",null,18,e.W1O),e.qZA(),e.TgZ(5,"div")(6,"div",19),e._uU(7),e.qZA(),e.TgZ(8,"div",20),e._uU(9),e.qZA()()()),2&n){const t=r.$implicit,i=e.MAs(4);e.Q6J("routerLink",e.VKq(6,Ze,t.id)),e.xp6(2),e.Q6J("ngIf",null==t.images?null:t.images.length)("ngIfElse",i),e.xp6(5),e.hij(" ",t.name," "),e.xp6(2),e.AsE(" In Storage: ",(t.count||0)-((null==t.locations?null:t.locations.length)||0),"/",t.count||0," ")}}function Mn(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",13),e.YNc(2,wn,10,8,"a",14),e.ALo(3,"async"),e.qZA(),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",e.lcZ(3,1,i.products)[t.id])}}function kn(n,r){if(1&n&&e._UZ(0,"img",21),2&n){const t=e.oxw().$implicit;e.Q6J("src",t.images[0],e.LSH)}}function In(n,r){1&n&&e._UZ(0,"img",28)}function qn(n,r){if(1&n&&(e.TgZ(0,"a",25)(1,"div",26),e.YNc(2,kn,1,1,"img",17),e.YNc(3,In,1,0,"ng-template",null,18,e.W1O),e.qZA(),e.TgZ(5,"div",27)(6,"div",19),e._uU(7),e.qZA(),e.TgZ(8,"div",20),e._uU(9),e.qZA()()()),2&n){const t=r.$implicit,i=e.MAs(4);e.Q6J("routerLink",e.VKq(6,Ze,t.id)),e.xp6(2),e.Q6J("ngIf",null==t.images?null:t.images.length)("ngIfElse",i),e.xp6(5),e.hij(" ",t.name," "),e.xp6(2),e.AsE(" In Storage: ",(t.count||0)-((null==t.locations?null:t.locations.length)||0),"/",t.count||0," ")}}function Ln(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",23),e.YNc(2,qn,10,8,"a",24),e.ALo(3,"async"),e.qZA(),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",e.lcZ(3,1,i.products)[t.id])}}function Un(n,r){if(1&n&&(e.TgZ(0,"div",6)(1,"h2",7)(2,"span",8),e._uU(3),e.qZA(),e.TgZ(4,"span",9),e._uU(5),e.ALo(6,"async"),e.ALo(7,"async"),e.qZA()(),e.ynx(8,10),e.ALo(9,"async"),e.YNc(10,Mn,4,3,"ng-container",11),e.YNc(11,Ln,4,3,"ng-container",12),e.BQk(),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(3),e.Oqu(null==t?null:t.name),e.xp6(2),e.AsE(" (",null==e.lcZ(6,5,i.products)[t.id]?null:e.lcZ(6,5,i.products)[t.id].length," item",1===(null==e.lcZ(7,7,i.products)[t.id]?null:e.lcZ(7,7,i.products)[t.id].length)?"":"s",") "),e.xp6(3),e.Q6J("ngSwitch",e.lcZ(9,9,i.options).view),e.xp6(2),e.Q6J("ngSwitchCase","list")}}function On(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Un,12,11,"div",5),e.ALo(2,"async"),e.BQk()),2&n){const t=r.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==e.lcZ(2,1,i.products)[t.id]?null:e.lcZ(2,1,i.products)[t.id].length)}}function Dn(n,r){if(1&n&&(e.TgZ(0,"div",3),e.YNc(1,On,3,3,"ng-container",4),e.ALo(2,"async"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.categories))}}function Nn(n,r){1&n&&e._UZ(0,"mat-progress-bar",29)}const En=function(){return["/asset-manager","manage","group"]};function Fn(n,r){1&n&&(e.TgZ(0,"a",33),e._uU(1," Create New Product "),e.qZA()),2&n&&e.Q6J("routerLink",e.DdM(1,En))}function Rn(n,r){if(1&n&&(e.TgZ(0,"div",30)(1,"p",31),e._uU(2),e.ALo(3,"async"),e.qZA(),e.YNc(4,Fn,2,2,"a",32),e.ALo(5,"async"),e.qZA()),2&n){const t=e.oxw();let i,o;e.xp6(2),e.hij(" ",null!=(i=e.lcZ(3,2,t.options))&&i.search?"No matching assets found":"No assets available. Create a new asset with the button below"," "),e.xp6(2),e.Q6J("ngIf",!(null!=(o=e.lcZ(5,4,t.options))&&o.search))}}let Ce=(()=>{class n{constructor(t){this._state=t,this.loading=this._state.loading,this.options=this._state.options,this.categories=this._state.categories,this.products=this._state.product_mapping}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-asset-item-list"]],decls:7,vars:9,consts:[["class","overflow-auto pb-2 w-full h-full",4,"ngIf","ngIfElse"],["mode","indeterminate",4,"ngIf"],["empty_state",""],[1,"overflow-auto","pb-2","w-full","h-full"],[4,"ngFor","ngForOf"],["class","",4,"ngIf"],[1,""],[1,"py-2"],[1,"font-medium"],[1,"text-xs"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"rounded","overflow-hidden","bg-white","dark:bg-neutral-700","border","border-gray-300","divide-y","divide-gray-200","dark:border-neutral-500"],["matRipple","","class","flex items-center text-left space-x-4 p-4 border border-black/0 hover:border-indigo-400 rounded",3,"routerLink",4,"ngFor","ngForOf"],["matRipple","",1,"flex","items-center","text-left","space-x-4","p-4","border","border-black/0","hover:border-indigo-400","rounded",3,"routerLink"],[1,"h-12","w-12","flex","items-center","justify-center","border","border-gray-200","bg-gray-100","dark:border-neutral-500","p-2"],["class","max-w-full max-h-full object-contain",3,"src",4,"ngIf","ngIfElse"],["placeholder",""],[1,"truncate"],[1,"text-xs","opacity-60"],[1,"max-w-full","max-h-full","object-contain",3,"src"],["src","assets/icons/asset-placeholder.svg",1,"m-auto"],[1,"flex","items-center","overflow-hidden","flex-wrap","-mx-2","w-full"],["matRipple","","class","bg-white dark:bg-neutral-700 rounded shadow w-40 h-44 text-left m-2 border border-gray-200 hover:border-indigo-400",3,"routerLink",4,"ngFor","ngForOf"],["matRipple","",1,"bg-white","dark:bg-neutral-700","rounded","shadow","w-40","h-44","text-left","m-2","border","border-gray-200","hover:border-indigo-400",3,"routerLink"],[1,"w-full","h-32","flex","items-center","justify-center","p-2","bg-gray-100"],[1,"border-t","border-gray-200","dark:border-neutral-500","w-full","px-3","py-1"],["src","assets/icons/asset-placeholder.svg",1,"m-auto","w-16"],["mode","indeterminate"],[1,"flex","flex-col","items-center","justify-center","p-8","space-y-4","h-full","w-full"],[1,"opacity-40"],["button","","btn","","matRipple","",3,"routerLink",4,"ngIf"],["button","","btn","","matRipple","",3,"routerLink"]],template:function(t,i){if(1&t&&(e.YNc(0,Dn,3,3,"div",0),e.ALo(1,"async"),e.ALo(2,"async"),e.YNc(3,Nn,1,0,"mat-progress-bar",1),e.ALo(4,"async"),e.YNc(5,Rn,6,6,"ng-template",null,2,e.W1O)),2&t){const o=e.MAs(6);let a;e.Q6J("ngIf",(null==(a=e.lcZ(1,3,i.categories))?null:a.length)&&(null==(a=e.lcZ(2,5,i.products))?null:a._count))("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",e.lcZ(4,7,i.loading))}},dependencies:[c.sg,c.O5,c.RF,c.n9,c.ED,re.pW,u.wG,_.rH,c.Ov],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}\n/*# sourceMappingURL=asset-item-list.component.ts-angular-inline--108.css.map*/"]}),n})();var Pn=s(2779),Se=s(2306);const Jn=function(n){return["/asset-manager","view",n]},Qn=function(){return["/asset-manager","list","purchase-orders"]};function Bn(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"header",4)(2,"h2",5),e._uU(3),e.qZA()(),e.TgZ(4,"main",6)(5,"div",7)(6,"label",8),e._uU(7," Order Number"),e.TgZ(8,"span"),e._uU(9,"*"),e.qZA()(),e.TgZ(10,"mat-form-field",9),e._UZ(11,"input",10),e.TgZ(12,"mat-error"),e._uU(13,"Order number is required"),e.qZA()()(),e.TgZ(14,"div",7)(15,"label",11),e._uU(16," Invoice Number"),e.TgZ(17,"span"),e._uU(18,"*"),e.qZA()(),e.TgZ(19,"mat-form-field",9),e._UZ(20,"input",12),e.TgZ(21,"mat-error"),e._uU(22,"Invoice number is required"),e.qZA()()(),e.TgZ(23,"div",7)(24,"label",13),e._uU(25," Purchase Date"),e.TgZ(26,"span"),e._uU(27,"*"),e.qZA()(),e._UZ(28,"a-date-field",14),e.qZA(),e.TgZ(29,"div",15)(30,"div",7)(31,"label",16),e._uU(32," Expected Service Start Date "),e.qZA(),e._UZ(33,"a-date-field",17),e.qZA(),e.TgZ(34,"div",7)(35,"label",18),e._uU(36," Expected Service End Date "),e.qZA(),e._UZ(37,"a-date-field",19),e.qZA()()(),e.TgZ(38,"footer",20)(39,"a",21),e._uU(40," Cancel "),e.qZA(),e.TgZ(41,"button",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.save())}),e._uU(42," Save "),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(3),e.hij(" ",t.form.value.id?"Edit":"Add"," Purchase Order "),e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(24),e.Q6J("from",t.from),e.xp6(5),e.Q6J("from",t.from),e.xp6(6),e.Q6J("routerLink",t.product_id?e.VKq(5,Jn,t.product_id):e.DdM(7,Qn))}}function jn(n,r){if(1&n&&(e.TgZ(0,"div",23),e._UZ(1,"mat-spinner",24),e.TgZ(2,"p"),e._uU(3),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("diameter",32),e.xp6(2),e.Oqu(t.loading)}}let we=(()=>{class n extends m.cx{constructor(t,i,o){super(),this._state=t,this._route=i,this._router=o,this.form=(0,g.dY)(),this.loading="",this.from=(0,Pn.Z)(Date.now(),-5)}ngOnInit(){var t=this;this.subscription("route.query",this._route.queryParamMap.subscribe(function(){var i=(0,h.Z)(function*(o){if(o.get("id")){t.loading="Loading purchase order details...";const a=yield(0,g.l5)(o.get("id")).toPromise().catch(()=>null);a||((0,m.cB)("Unable to load purchase order details."),t._router.navigate(["/asset-manager"])),t.form.patchValue({...a,order_number:a.purchase_order_number,purchase_date:1e3*a.purchase_date,expected_service_end_date:1e3*a.expected_service_end_date,expected_service_start_date:1e3*a.expected_service_start_date}),t.loading=""}o.get("group_id")&&(t.product_id=o.get("group_id"))});return function(o){return i.apply(this,arguments)}}()))}save(){var t=this;return(0,h.Z)(function*(){if(!t.form.valid)return;t.loading="Saving Product...";const i=t.form.value;i.purchase_date=(0,q.Z)(i.purchase_date),i.expected_service_start_date=(0,q.Z)(i.expected_service_end_date),i.expected_service_end_date=(0,q.Z)(i.expected_service_end_date),yield(0,g.aS)(i).toPromise().catch(a=>{throw t.loading="",(0,m.cB)(`Error saving purchase order.: ${a.message}`),a}),t.form.reset(),t.loading="",t._state.postChange(),(0,m.t5)("Successfully saved purchase order."),t._router.navigate(["/asset-manager","view",t.product_id])})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x),e.Y36(_.gz),e.Y36(_.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["asset-purchase-order-form"]],features:[e.qOj],decls:4,vars:2,consts:[[1,"absolute","inset-0","bg-white"],["class","h-full max-w-[32rem] mx-auto flex flex-col",4,"ngIf","ngIfElse"],["load_state",""],[1,"h-full","max-w-[32rem]","mx-auto","flex","flex-col"],[1,"p-4"],[1,"text-center","text-xl","font-medium"],[1,"flex-1","h-1/2","overflow-auto",3,"formGroup"],[1,"flex","flex-col","space-y-2"],["for","order-number"],["appearance","outline"],["matInput","","name","order-number","placeholder","Order Number","formControlName","order_number"],["for","invoice-number"],["matInput","","name","invoice-number","placeholder","Invoice Number","formControlName","invoice_number"],["for","purchase-date"],["name","purchase-date","formControlName","purchase_date",3,"from"],[1,"flex","space-x-2"],["for","depreciation-start-date"],["name","depreciation-start-date","formControlName","expected_service_start_date",3,"from"],["for","depreciation-end-date"],["name","depreciation-end-date","formControlName","expected_service_end_date"],[1,"flex","justify-end","space-x-2","p-2","border-t","border-gray-100"],["btn","","matRipple","",1,"w-32","inverse",3,"routerLink"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Bn,43,8,"div",1),e.qZA(),e.YNc(2,jn,4,2,"ng-template",null,2,e.W1O)),2&t){const o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[c.O5,v.KE,v.TO,w.Nt,O.Ou,u.wG,p.Fj,p.JJ,p.JL,p.sg,p.u,Se.Q,_.rH]}),n})();var Y=s(6508);function Hn(n,r){1&n&&(e.TgZ(0,"button",6)(1,"app-icon"),e._uU(2,"close"),e.qZA()())}function Gn(n,r){if(1&n&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Yn(n,r){if(1&n&&(e.TgZ(0,"main",7)(1,"div",8)(2,"label",9),e._uU(3,"Name"),e.TgZ(4,"span"),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"mat-form-field",10),e._UZ(7,"input",11),e.TgZ(8,"mat-error"),e._uU(9,"Name is required"),e.qZA()()(),e.TgZ(10,"div",8)(11,"label",9),e._uU(12,"Parent Category"),e.qZA(),e.TgZ(13,"mat-form-field",10)(14,"mat-select",12),e.ALo(15,"async"),e.YNc(16,Gn,2,2,"mat-option",13),e.ALo(17,"async"),e.qZA()()()()),2&n){const t=e.oxw();let i;e.Q6J("formGroup",t.form),e.xp6(14),e.Q6J("disabled",!(null!=(i=e.lcZ(15,3,t.categories))&&i.length)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(17,5,t.categories))}}function Vn(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"footer",15)(1,"a",16),e._uU(2,"Cancel"),e.qZA(),e.TgZ(3,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.save())}),e._uU(4,"Save"),e.qZA()()}}function zn(n,r){1&n&&(e.TgZ(0,"div",18),e._UZ(1,"mat-spinner",19),e.TgZ(2,"p",20),e._uU(3,"Saving Category..."),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("diameter",32))}let V=(()=>{class n{constructor(t,i,o){this._state=i,this._dialog_ref=o,this.loading=!1,this.form=(0,g.rx)(),this.categories=this._state.categories.pipe((0,b.U)(a=>a.filter(l=>l.parent_id!==this.form.value.id))),t?.category&&this.form.patchValue(t.category)}save(){var t=this;return(0,h.Z)(function*(){if(!t.form.valid)return;t.loading=!0,t._dialog_ref.disableClose=!0;const i=t.form.value,o=yield(0,g.Di)(i).toPromise().catch(a=>{throw t.loading=!1,t._dialog_ref.disableClose=!1,(0,m.cB)(`Error saving category: ${a.message}`),a});t.form.reset(),t.loading=!1,t._dialog_ref.close(o)})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(M.WI),e.Y36(x),e.Y36(M.so))},n.\u0275cmp=e.Xpm({type:n,selectors:[["asset-category-form"]],decls:8,vars:5,consts:[[1,"flex","items-center","p-2"],[1,"text-center","text-xl","font-medium"],["btn","","icon","","matRipple","","mat-dialog-close","",4,"ngIf"],["class","flex-1 h-1/2 overflow-auto p-2 w-[20rem] max-w-[80vw]",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex justify-end space-x-2 p-2 border-t border-gray-100",4,"ngIf"],["load_state",""],["btn","","icon","","matRipple","","mat-dialog-close",""],[1,"flex-1","h-1/2","overflow-auto","p-2","w-[20rem]","max-w-[80vw]",3,"formGroup"],[1,"flex","flex-col","space-y-2"],["for","name"],["appearance","outline"],["matInput","","name","name","placeholder","Category Name","formControlName","name"],["formControlName","parent_id","placeholder","No Parent",3,"disabled"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex","justify-end","space-x-2","p-2","border-t","border-gray-100"],["btn","","matRipple","","mat-dialog-close","",1,"w-32","inverse"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"flex","flex-col","items-center","justify-center","p-8"],[3,"diameter"],[1,"mt-4"]],template:function(t,i){if(1&t&&(e.TgZ(0,"header",0)(1,"h2",1),e._uU(2),e.qZA(),e.YNc(3,Hn,3,0,"button",2),e.qZA(),e.YNc(4,Yn,18,7,"main",3),e.YNc(5,Vn,5,0,"footer",4),e.YNc(6,zn,4,1,"ng-template",null,5,e.W1O)),2&t){const o=e.MAs(7);e.xp6(2),e.hij(" ",i.form.value.id?"Edit":"Add"," Category "),e.xp6(1),e.Q6J("ngIf",!i.loading),e.xp6(1),e.Q6J("ngIf",!i.loading)("ngIfElse",o),e.xp6(1),e.Q6J("ngIf",!i.loading)}},dependencies:[c.sg,c.O5,v.KE,v.TO,w.Nt,Y.gD,u.ey,O.Ou,M.ZT,u.wG,p.Fj,p.JJ,p.JL,p.sg,p.u,A.o,c.Ov]}),n})();function Kn(n,r){if(1&n&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.purchase_order_number||t.invoice_number," ")}}function $n(n,r){1&n&&(e.TgZ(0,"mat-option",33),e._uU(1," No purchase orders "),e.qZA()),2&n&&e.Q6J("disabled",!0)}const Wn=function(){return{standalone:!0}},Xn=function(){return["/asset-manager"]};function ei(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"header",4)(2,"h2",5),e._uU(3),e.qZA()(),e.TgZ(4,"main",6)(5,"div",7)(6,"label",8),e._uU(7,"Product"),e.TgZ(8,"span"),e._uU(9,"*"),e.qZA()(),e.TgZ(10,"mat-form-field",9),e._UZ(11,"input",10),e.qZA()(),e.TgZ(12,"div",11)(13,"label",12),e._uU(14,"Description"),e.qZA(),e.TgZ(15,"mat-form-field",9),e._UZ(16,"textarea",13),e.TgZ(17,"mat-error"),e._uU(18,"Description is required"),e.qZA()()(),e.TgZ(19,"div",14)(20,"div",7)(21,"label",15),e._uU(22," Serial Number"),e.TgZ(23,"span"),e._uU(24,"*"),e.qZA()(),e.TgZ(25,"mat-form-field",9),e._UZ(26,"input",16),e.TgZ(27,"mat-error"),e._uU(28,"Serial Number is required"),e.qZA()()(),e.TgZ(29,"div",7)(30,"label",17),e._uU(31,"Identifier"),e.qZA(),e.TgZ(32,"mat-form-field",9),e._UZ(33,"input",18),e.TgZ(34,"mat-error"),e._uU(35,"Identifier is required"),e.qZA()()()(),e.TgZ(36,"div",19)(37,"div",7)(38,"label",20),e._uU(39," Purchase Order ID "),e.TgZ(40,"span"),e._uU(41,"*"),e.qZA()(),e.TgZ(42,"mat-form-field",9)(43,"mat-select",21),e.YNc(44,Kn,2,2,"mat-option",22),e.ALo(45,"async"),e.YNc(46,$n,2,1,"mat-option",23),e.ALo(47,"async"),e.qZA(),e.TgZ(48,"mat-error"),e._uU(49," Purchase Order ID is required "),e.qZA()()(),e.TgZ(50,"div",7)(51,"label",24),e._uU(52,"Purchase Price"),e.qZA(),e.TgZ(53,"mat-form-field",9)(54,"span",25),e._uU(55,"$"),e.qZA(),e._UZ(56,"input",26),e.TgZ(57,"mat-error"),e._uU(58,"Purchase Price is required"),e.qZA()()()(),e.TgZ(59,"div",11)(60,"label",27),e._uU(61,"End of Life Date"),e.qZA(),e._UZ(62,"a-date-field",28),e.qZA()(),e.TgZ(63,"footer",29)(64,"a",30),e._uU(65," Cancel "),e.qZA(),e.TgZ(66,"button",31),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.save())}),e._uU(67," Save "),e.qZA()()()}if(2&n){const t=e.oxw();let i;e.xp6(3),e.hij(" ",t.form.value.id?"Edit":"Add"," Asset "),e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(7),e.Q6J("ngModel",(null==t.product?null:t.product.name)||"No Product")("ngModelOptions",e.DdM(12,Wn))("disabled",!0),e.xp6(33),e.Q6J("ngForOf",e.lcZ(45,8,t.purchase_orders)),e.xp6(2),e.Q6J("ngIf",!(null!=(i=e.lcZ(47,10,t.purchase_orders))&&i.length)),e.xp6(18),e.Q6J("routerLink",e.DdM(13,Xn))}}function ti(n,r){if(1&n&&(e.TgZ(0,"div",34),e._UZ(1,"mat-spinner",35),e.TgZ(2,"p"),e._uU(3),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("diameter",32),e.xp6(2),e.Oqu(t.loading)}}let Me=(()=>{class n extends m.cx{constructor(t,i,o){super(),this._state=t,this._route=i,this._router=o,this.form=(0,g.PG)(),this.purchase_orders=this._state.purchase_orders,this.loading=""}ngOnInit(){var t=this;this.subscription("route.query",this._route.queryParamMap.subscribe(function(){var i=(0,h.Z)(function*(o){if(o.get("id")){t.loading="Loading Asset Details...";const a=yield(0,g.dq)(o.get("id")).toPromise().catch(()=>null);a||((0,m.cB)("Unable to load asset details."),t._router.navigate(["/asset-manager"])),t.form.patchValue(a),t.loading=""}if(o.get("group_id")){t.loading="Loading Product Details...";const a=yield(0,g.L)(o.get("group_id")).toPromise().catch(()=>null);a||((0,m.cB)("Unable to load associated product details."),t._router.navigate(["/asset-manager"])),t.product=a,t.form.patchValue({type_id:a.id}),t.loading=""}});return function(o){return i.apply(this,arguments)}}()))}save(){var t=this;return(0,h.Z)(function*(){if(!t.form.valid)return(0,m.cB)(`Some fields are invalid. [${(0,m.RD)(t.form)}]`);t.loading="Saving Product...";const i=t.form.value;yield(0,g.U)(i).toPromise().catch(a=>{throw t.loading="",(0,m.cB)(`Error saving asset: ${a.message}`),a}),t.form.reset(),t.loading="",t._state.postChange(),t._router.navigate(["/asset-manager","view",t.product?.id])})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x),e.Y36(_.gz),e.Y36(_.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["asset-form"]],features:[e.qOj],decls:4,vars:2,consts:[[1,"absolute","inset-0","bg-white"],["class","h-full max-w-[32rem] mx-auto flex flex-col",4,"ngIf","ngIfElse"],["load_state",""],[1,"h-full","max-w-[32rem]","mx-auto","flex","flex-col"],[1,"p-4"],[1,"text-center","text-xl","font-medium"],[1,"flex-1","h-1/2","overflow-auto",3,"formGroup"],[1,"flex","flex-1","flex-col","space-y-2"],["for","name"],["appearance","outline"],["matInput","",3,"ngModel","ngModelOptions","disabled"],[1,"flex","flex-col","space-y-2"],["for","description"],["matInput","","name","description","placeholder","Description of the product","formControlName","description"],[1,"flex","items-center","space-x-2"],["for","serial-number"],["matInput","","name","serial-number","placeholder","Serial Number","formControlName","serial_number"],["for","identifier"],["matInput","","name","identifier","placeholder","Identifier, Asset ID or Barcode","formControlName","identifier"],[1,"flex","space-x-2"],["for","purchase-order-id"],["formControlName","purchase_order_id","placeholder","Select Purchase Order"],[3,"value",4,"ngFor","ngForOf"],["class","opacity-60",3,"disabled",4,"ngIf"],["for","purchase-price"],["matPrefix",""],["matInput","","type","number","name","purchase-price","placeholder","Identifier","formControlName","purchase_price"],["for","end-of-life-date"],["name","end-of-life-date","formControlName","end_of_life_date"],[1,"flex","justify-end","space-x-2","p-2","border-t","border-gray-100"],["btn","","matRipple","",1,"w-32","inverse",3,"routerLink"],["btn","","matRipple","",1,"w-32",3,"click"],[3,"value"],[1,"opacity-60",3,"disabled"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,ei,68,14,"div",1),e.qZA(),e.YNc(2,ti,4,2,"ng-template",null,2,e.W1O)),2&t){const o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[c.sg,c.O5,v.KE,v.TO,v.qo,w.Nt,Y.gD,u.ey,O.Ou,u.wG,p.Fj,p.wV,p.JJ,p.JL,p.On,p.sg,p.u,Se.Q,_.rH,c.Ov]}),n})();var ni=s(3670);function ii(n,r){if(1&n&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}const oi=function(n){return["/asset-manager","view",n]},ri=function(){return["/asset-manager","list","items"]};function ai(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"header",4)(2,"h2",5),e._uU(3),e.qZA()(),e.TgZ(4,"main",6)(5,"div",7)(6,"label",8),e._uU(7,"Name"),e.TgZ(8,"span"),e._uU(9,"*"),e.qZA()(),e.TgZ(10,"mat-form-field",9),e._UZ(11,"input",10),e.TgZ(12,"mat-error"),e._uU(13,"Name is required"),e.qZA()()(),e.TgZ(14,"div",7)(15,"label",8),e._uU(16,"Category"),e.TgZ(17,"span"),e._uU(18,"*"),e.qZA()(),e.TgZ(19,"mat-form-field",9)(20,"mat-select",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.current_category=o.form.value.category_id)}),e.YNc(21,ii,2,2,"mat-option",12),e.ALo(22,"async"),e.TgZ(23,"mat-option",13),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.newCategory())}),e.TgZ(24,"div",14)(25,"app-icon"),e._uU(26,"add"),e.qZA(),e.TgZ(27,"p"),e._uU(28,"New Category"),e.qZA()()()(),e.TgZ(29,"mat-error"),e._uU(30,"Category is required"),e.qZA()()(),e.TgZ(31,"div",7)(32,"label",15),e._uU(33,"Brand"),e.TgZ(34,"span"),e._uU(35,"*"),e.qZA()(),e.TgZ(36,"mat-form-field",9),e._UZ(37,"input",16),e.TgZ(38,"mat-error"),e._uU(39,"Brand is required"),e.qZA()()(),e.TgZ(40,"div",7)(41,"label",17),e._uU(42,"Description"),e.qZA(),e.TgZ(43,"mat-form-field",9),e._UZ(44,"textarea",18),e.TgZ(45,"mat-error"),e._uU(46,"Description is required"),e.qZA()()(),e.TgZ(47,"div",7)(48,"label",19),e._uU(49,"Images"),e.qZA(),e._UZ(50,"image-list-field",20),e.qZA()(),e.TgZ(51,"footer",21)(52,"a",22),e._uU(53," Cancel "),e.qZA(),e.TgZ(54,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.save())}),e._uU(55," Save "),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(3),e.hij(" ",t.form.value.id?"Edit":"Add"," Product "),e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(17),e.Q6J("ngForOf",e.lcZ(22,4,t.categories)),e.xp6(31),e.Q6J("routerLink",t.form.value.id?e.VKq(6,oi,t.form.value.id):e.DdM(8,ri))}}function si(n,r){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"mat-spinner",26),e.TgZ(2,"p"),e._uU(3),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("diameter",32),e.xp6(2),e.Oqu(t.loading)}}let ke=(()=>{class n extends m.cx{constructor(t,i,o,a){super(),this._state=t,this._route=i,this._router=o,this._dialog=a,this.form=(0,g.UN)(),this.new_category=new L.X(null),this.categories=(0,C.aj)([this._state.categories,this.new_category]).pipe((0,b.U)(([l,d])=>d?(0,m.Tw)([...l,d],"id"):l)),this.loading=""}ngOnInit(){var t=this;this.subscription("route.query",this._route.queryParamMap.subscribe(function(){var i=(0,h.Z)(function*(o){if(o.get("id")){t.loading="Loading Product Details...";const a=yield(0,g.L)(o.get("id")).toPromise().catch(()=>null);a||((0,m.cB)("Unable to load product details."),t._router.navigate(["/asset-manager"])),t.form.patchValue(a),t.loading=""}});return function(o){return i.apply(this,arguments)}}()))}newCategory(){this.form.patchValue({category_id:this.current_category}),this._dialog.open(V).afterClosed().subscribe(i=>{i&&(this._state.postChange(),this.new_category.next(i),this.form.patchValue({category_id:i.id}))})}save(){var t=this;return(0,h.Z)(function*(){if(!t.form.valid)return;t.loading="Saving Product...";const i=t.form.value,o=yield(0,g.E$)(i).toPromise().catch(a=>{throw t.loading="",(0,m.cB)(`Error saving Product: ${a.message}`),a});t.form.reset(),t.loading="",t._state.postChange(),t._router.navigate(["/asset-manager","view",o.id])})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x),e.Y36(_.gz),e.Y36(_.F0),e.Y36(M.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["asset-group-form"]],features:[e.qOj],decls:4,vars:2,consts:[[1,"absolute","inset-0","bg-white"],["class","h-full max-w-[32rem] mx-auto flex flex-col",4,"ngIf","ngIfElse"],["load_state",""],[1,"h-full","max-w-[32rem]","mx-auto","flex","flex-col"],[1,"p-4"],[1,"text-center","text-xl","font-medium"],[1,"flex-1","h-1/2","overflow-auto","p-2",3,"formGroup"],[1,"flex","flex-col","space-y-2"],["for","name"],["appearance","outline"],["matInput","","name","name","placeholder","Name of the product","formControlName","name"],["formControlName","category_id","placeholder","Category of Product",3,"click"],[3,"value",4,"ngFor","ngForOf"],[1,"relative",3,"click"],[1,"flex","items-center","space-x-2"],["for","brand"],["matInput","","name","brand","placeholder","Brand of the product","formControlName","brand"],["for","description"],["matInput","","name","description","placeholder","Description of the product","formControlName","description"],["for","images"],["name","images","formControlName","images"],[1,"flex","justify-end","space-x-2","p-2","border-t","border-gray-100"],["btn","","matRipple","",1,"w-32","inverse",3,"routerLink"],["btn","","matRipple","",1,"w-32",3,"click"],[3,"value"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,ai,56,9,"div",1),e.qZA(),e.YNc(2,si,4,2,"ng-template",null,2,e.W1O)),2&t){const o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[c.sg,c.O5,v.KE,v.TO,w.Nt,Y.gD,u.ey,O.Ou,u.wG,p.Fj,p.JJ,p.JL,p.sg,p.u,ni.h,A.o,_.rH,c.Ov]}),n})();function li(n,r){1&n&&(e.TgZ(0,"span",5),e._uU(1,"No Date set"),e.qZA())}function ci(n,r){if(1&n&&(e.YNc(0,li,2,0,"span",4),e._uU(1),e.ALo(2,"date")),2&n){const t=r.data;e.Q6J("ngIf",!t),e.xp6(1),e.hij(" ",t?e.xi3(2,2,1e3*t,"mediumDate"):""," ")}}const pi=function(){return["purchase_order_number","invoice_number","purchase_date","expected_service_start_date","expected_service_end_date"]},di=function(){return["Order Number","Invoice Number","Purchase Date","Depreciation Start","Depreciation End"]},ui=function(){return["flex","10r","12r","12r","12r"]},_i=function(n,r,t){return{purchase_date:n,expected_service_start_date:r,expected_service_end_date:t}};const mi=[{path:"",component:ue,children:[{path:"list",component:de,children:[{path:"items",component:Ce},{path:"requests",component:Ae},{path:"purchase-orders",component:(()=>{class n{constructor(t,i){this._state=t,this._router=i,this.now=Date.now(),this.purchase_orders=(0,C.aj)([this._state.options,this._state.purchase_orders]).pipe((0,b.U)(([{search:o},a])=>a.filter(l=>!o||l.order_number.toLowerCase().includes(o.toLowerCase())||l.invoice_number.toLowerCase().includes(o.toLowerCase())))),this.filters=this._state.options}editOrder(t){this._router.navigate(["/asset-manager","manage","purchase-order"],{queryParams:{id:t.id}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x),e.Y36(_.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-asset-purchase-order-list"]],decls:6,vars:15,consts:[[1,"relative","-left-4","w-[calc(100%+2rem)]","mt-4","h-[calc(100%-1rem)]","flex","flex-col"],[1,"w-full","overflow-auto","h-1/2","flex-1"],["purchase-orders","",1,"block","min-w-[60rem]","text-sm",3,"dataSource","columns","display_column","column_size","template","empty","row_clicked"],["date_template",""],["class","opacity-30",4,"ngIf"],[1,"opacity-30"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"custom-table",2),e.NdJ("row_clicked",function(a){return i.editOrder(a)}),e.ALo(3,"async"),e.qZA()()(),e.YNc(4,ci,3,5,"ng-template",null,3,e.W1O)),2&t){const o=e.MAs(5);let a;e.xp6(2),e.Q6J("dataSource",i.purchase_orders)("columns",e.DdM(8,pi))("display_column",e.DdM(9,di))("column_size",e.DdM(10,ui))("template",e.kEZ(11,_i,o,o,o))("empty",null!=(a=e.lcZ(3,6,i.filters))&&a.search?"No matching purchase orders found.":"There are purchase orders for this building.")}},dependencies:[c.O5,H.C,c.Ov,c.uU],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%}\n/*# sourceMappingURL=asset-purchase-order-list.component.ts-angular-inline--109.css.map*/"]}),n})()},{path:"**",redirectTo:"requests"}]},{path:"view/:id",component:xe},{path:"manage",children:[{path:"group",component:ke},{path:"asset",component:Me},{path:"category",component:V},{path:"purchase-order",component:we}]},{path:"**",redirectTo:"list/requests"}]},{path:"**",redirectTo:""}];let gi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,lt.v,B.Kk,Qe,re.Cv,I.Nh,st,_.Bz.forChild(mi)]}),n})()}}]);
//# sourceMappingURL=apps_concierge_src_app_asset-manager_asset-manager_module_ts.js.map