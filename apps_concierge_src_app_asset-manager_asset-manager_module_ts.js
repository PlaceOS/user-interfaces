"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([["apps_concierge_src_app_asset-manager_asset-manager_module_ts"],{3203:(_t,se,l)=>{l.r(se),l.d(se,{AppAssetManangerModule:()=>Oi});var p=l(316),h=l(6842),U=l(9864),ue=l(6354),I=l(9168),me=l(2102),ie=l(3680),oe=l(4879),e=l(8559),_e=l(7699),ae=l(3119),fe=l(1536),z=l(9273),X=l(7464);const Ie=["*"];function Ce(n,a){1&n&&e.SdG(0)}let q=(()=>{class n{constructor(t){this._elementRef=t}focus(){this._elementRef.nativeElement.focus()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(e.aKT))};static#t=this.\u0275dir=e.FsC({type:n,selectors:[["","cdkStepHeader",""]],hostAttrs:["role","tab"],standalone:!0})}return n})(),B=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(e.C4Q))};static#t=this.\u0275dir=e.FsC({type:n,selectors:[["","cdkStepLabel",""]],standalone:!0})}return n})(),he=0;const re=new e.nKC("STEPPER_GLOBAL_OPTIONS");let J=(()=>{class n{get completed(){return null==this._completedOverride?this._getDefaultCompleted():this._completedOverride}set completed(t){this._completedOverride=t}_getDefaultCompleted(){return this.stepControl?this.stepControl.valid&&this.interacted:this.interacted}get hasError(){return null==this._customError?this._getDefaultError():this._customError}set hasError(t){this._customError=t}_getDefaultError(){return this.stepControl&&this.stepControl.invalid&&this.interacted}constructor(t,s){this._stepper=t,this.interacted=!1,this.interactedStream=new e.bkB,this.editable=!0,this.optional=!1,this._completedOverride=null,this._customError=null,this._stepperOptions=s||{},this._displayDefaultIndicatorType=!1!==this._stepperOptions.displayDefaultIndicatorType}select(){this._stepper.selected=this}reset(){this.interacted=!1,null!=this._completedOverride&&(this._completedOverride=!1),null!=this._customError&&(this._customError=!1),this.stepControl&&this.stepControl.reset()}ngOnChanges(){this._stepper._stateChanged()}_markAsInteracted(){this.interacted||(this.interacted=!0,this.interactedStream.emit(this))}_showError(){return this._stepperOptions.showError??null!=this._customError}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU((0,e.Rfq)(()=>H)),e.rXU(re,8))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["cdk-step"]],contentQueries:function(s,i,o){if(1&s&&e.wni(o,B,5),2&s){let r;e.mGM(r=e.lsd())&&(i.stepLabel=r.first)}},viewQuery:function(s,i){if(1&s&&e.GBs(e.C4Q,7),2&s){let o;e.mGM(o=e.lsd())&&(i.content=o.first)}},inputs:{stepControl:"stepControl",label:"label",errorMessage:"errorMessage",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],state:"state",editable:[2,"editable","editable",e.L39],optional:[2,"optional","optional",e.L39],completed:[2,"completed","completed",e.L39],hasError:[2,"hasError","hasError",e.L39]},outputs:{interactedStream:"interacted"},exportAs:["cdkStep"],standalone:!0,features:[e.GFd,e.OA$,e.aNF],ngContentSelectors:Ie,decls:1,vars:0,template:function(s,i){1&s&&(e.NAR(),e.DNE(0,Ce,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}return n})(),H=(()=>{class n{get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this.steps&&this._steps?(this._isValidIndex(t),this.selected?._markAsInteracted(),this._selectedIndex!==t&&!this._anyControlsInvalidOrPending(t)&&(t>=this._selectedIndex||this.steps.toArray()[t].editable)&&this._updateSelectedItemIndex(t)):this._selectedIndex=t}get selected(){return this.steps?this.steps.toArray()[this.selectedIndex]:void 0}set selected(t){this.selectedIndex=t&&this.steps?this.steps.toArray().indexOf(t):-1}get orientation(){return this._orientation}set orientation(t){this._orientation=t,this._keyManager&&this._keyManager.withVerticalOrientation("vertical"===t)}constructor(t,s,i){this._dir=t,this._changeDetectorRef=s,this._elementRef=i,this._destroyed=new ae.B7,this.steps=new e.rOR,this._sortedHeaders=new e.rOR,this.linear=!1,this._selectedIndex=0,this.selectionChange=new e.bkB,this.selectedIndexChange=new e.bkB,this._orientation="horizontal",this._groupId=he++}ngAfterContentInit(){this._steps.changes.pipe((0,z.Z)(this._steps),(0,X.Q)(this._destroyed)).subscribe(t=>{this.steps.reset(t.filter(s=>s._stepper===this)),this.steps.notifyOnChanges()})}ngAfterViewInit(){this._stepHeader.changes.pipe((0,z.Z)(this._stepHeader),(0,X.Q)(this._destroyed)).subscribe(t=>{this._sortedHeaders.reset(t.toArray().sort((s,i)=>s._elementRef.nativeElement.compareDocumentPosition(i._elementRef.nativeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)),this._sortedHeaders.notifyOnChanges()}),this._keyManager=new me.Bu(this._sortedHeaders).withWrap().withHomeAndEnd().withVerticalOrientation("vertical"===this._orientation),(this._dir?this._dir.change:(0,fe.of)()).pipe((0,z.Z)(this._layoutDirection()),(0,X.Q)(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.updateActiveItem(this._selectedIndex),this.steps.changes.subscribe(()=>{this.selected||(this._selectedIndex=Math.max(this._selectedIndex-1,0))}),this._isValidIndex(this._selectedIndex)||(this._selectedIndex=0)}ngOnDestroy(){this._keyManager?.destroy(),this.steps.destroy(),this._sortedHeaders.destroy(),this._destroyed.next(),this._destroyed.complete()}next(){this.selectedIndex=Math.min(this._selectedIndex+1,this.steps.length-1)}previous(){this.selectedIndex=Math.max(this._selectedIndex-1,0)}reset(){this._updateSelectedItemIndex(0),this.steps.forEach(t=>t.reset()),this._stateChanged()}_getStepLabelId(t){return`cdk-step-label-${this._groupId}-${t}`}_getStepContentId(t){return`cdk-step-content-${this._groupId}-${t}`}_stateChanged(){this._changeDetectorRef.markForCheck()}_getAnimationDirection(t){const s=t-this._selectedIndex;return s<0?"rtl"===this._layoutDirection()?"next":"previous":s>0?"rtl"===this._layoutDirection()?"previous":"next":"current"}_getIndicatorType(t,s="number"){const i=this.steps.toArray()[t],o=this._isCurrentStep(t);return i._displayDefaultIndicatorType?this._getDefaultIndicatorLogic(i,o):this._getGuidelineLogic(i,o,s)}_getDefaultIndicatorLogic(t,s){return t._showError()&&t.hasError&&!s?"error":!t.completed||s?"number":t.editable?"edit":"done"}_getGuidelineLogic(t,s,i="number"){return t._showError()&&t.hasError&&!s?"error":t.completed&&!s?"done":t.completed&&s?i:t.editable&&s?"edit":i}_isCurrentStep(t){return this._selectedIndex===t}_getFocusIndex(){return this._keyManager?this._keyManager.activeItemIndex:this._selectedIndex}_updateSelectedItemIndex(t){const s=this.steps.toArray();this.selectionChange.emit({selectedIndex:t,previouslySelectedIndex:this._selectedIndex,selectedStep:s[t],previouslySelectedStep:s[this._selectedIndex]}),this._containsFocus()?this._keyManager.setActiveItem(t):this._keyManager.updateActiveItem(t),this._selectedIndex=t,this.selectedIndexChange.emit(this._selectedIndex),this._stateChanged()}_onKeydown(t){const s=(0,oe.rp)(t),i=t.keyCode,o=this._keyManager;null==o.activeItemIndex||s||i!==oe.t6&&i!==oe.Fm?o.setFocusOrigin("keyboard").onKeydown(t):(this.selectedIndex=o.activeItemIndex,t.preventDefault())}_anyControlsInvalidOrPending(t){return!!(this.linear&&t>=0)&&this.steps.toArray().slice(0,t).some(s=>{const i=s.stepControl;return(i?i.invalid||i.pending||!s.interacted:!s.completed)&&!s.optional&&!s._completedOverride})}_layoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_containsFocus(){const t=this._elementRef.nativeElement,s=(0,_e.vc)();return t===s||t.contains(s)}_isValidIndex(t){return t>-1&&(!this.steps||t<this.steps.length)}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(ie.dS,8),e.rXU(e.gRc),e.rXU(e.aKT))};static#t=this.\u0275dir=e.FsC({type:n,selectors:[["","cdkStepper",""]],contentQueries:function(s,i,o){if(1&s&&(e.wni(o,J,5),e.wni(o,q,5)),2&s){let r;e.mGM(r=e.lsd())&&(i._steps=r),e.mGM(r=e.lsd())&&(i._stepHeader=r)}},inputs:{linear:[2,"linear","linear",e.L39],selectedIndex:[2,"selectedIndex","selectedIndex",e.Udg],selected:"selected",orientation:"orientation"},outputs:{selectionChange:"selectionChange",selectedIndexChange:"selectedIndexChange"},exportAs:["cdkStepper"],standalone:!0,features:[e.GFd]})}return n})(),Re=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({imports:[ie.jI]})}return n})();var g=l(5060),D=l(2833),we=l(2672),A=l(1963),k=l(5443),Me=l(6109),v=l(7172);function ft(n,a){if(1&n&&e.eu8(0,2),2&n){const t=e.XpG();e.Y8G("ngTemplateOutlet",t.iconOverrides[t.state])("ngTemplateOutletContext",t._getIconContext())}}function ht(n,a){if(1&n&&(e.j41(0,"span",7),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.JRh(t._getDefaultTextForState(t.state))}}function gt(n,a){if(1&n&&(e.j41(0,"span",8),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.JRh(t._intl.completedLabel)}}function vt(n,a){if(1&n&&(e.j41(0,"span",8),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.JRh(t._intl.editableLabel)}}function bt(n,a){if(1&n&&(e.DNE(0,gt,2,1,"span",8)(1,vt,2,1,"span",8),e.j41(2,"mat-icon",7),e.EFF(3),e.k0s()),2&n){const t=e.XpG(2);e.vxM("done"===t.state?0:"edit"===t.state?1:-1),e.R7$(3),e.JRh(t._getDefaultTextForState(t.state))}}function xt(n,a){if(1&n&&e.DNE(0,ht,2,1,"span",7)(1,bt,4,2,"mat-icon",7),2&n){let t;const s=e.XpG();e.vxM("number"===(t=s.state)?0:1)}}function yt(n,a){1&n&&(e.j41(0,"div",4),e.eu8(1,9),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngTemplateOutlet",a.template))}function kt(n,a){if(1&n&&(e.j41(0,"div",4),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.JRh(t.label)}}function Ft(n,a){if(1&n&&(e.j41(0,"div",5),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.JRh(t._intl.optionalLabel)}}function It(n,a){if(1&n&&(e.j41(0,"div",6),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.JRh(t.errorMessage)}}const Ae=["*"];function Ct(n,a){}function jt(n,a){if(1&n&&(e.SdG(0),e.DNE(1,Ct,0,0,"ng-template",0)),2&n){const t=e.XpG();e.R7$(),e.Y8G("cdkPortalOutlet",t._portal)}}const Se=(n,a)=>({step:n,i:a}),Ge=n=>({animationDuration:n}),De=(n,a)=>({value:n,params:a});function Tt(n,a){1&n&&e.SdG(0)}function Et(n,a){1&n&&e.nrm(0,"div",6)}function Rt(n,a){if(1&n&&(e.eu8(0,5),e.DNE(1,Et,1,0,"div",6)),2&n){const t=a.$implicit,s=a.$index,i=a.$count;e.XpG(2);const o=e.sdS(4);e.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",e.l_i(3,Se,t,s)),e.R7$(),e.vxM(s!==i-1?1:-1)}}function wt(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",7),e.bIt("@horizontalStepTransition.done",function(i){e.eBV(t);const o=e.XpG(2);return e.Njj(o._animationDone.next(i))}),e.eu8(1,8),e.k0s()}if(2&n){const t=a.$implicit,s=a.$index,i=e.XpG(2);e.AVh("mat-horizontal-stepper-content-inactive",i.selectedIndex!==s),e.Y8G("@horizontalStepTransition",e.l_i(8,De,i._getAnimationDirection(s),e.eq3(6,Ge,i._getAnimationDuration())))("id",i._getStepContentId(s)),e.BMQ("aria-labelledby",i._getStepLabelId(s)),e.R7$(),e.Y8G("ngTemplateOutlet",t.content)}}function Mt(n,a){if(1&n&&(e.j41(0,"div",1)(1,"div",2),e.Z7z(2,Rt,2,6,null,null,e.fX1),e.k0s(),e.j41(4,"div",3),e.Z7z(5,wt,2,11,"div",4,e.fX1),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.Dyx(t.steps),e.R7$(3),e.Dyx(t.steps)}}function At(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",9),e.eu8(1,5),e.j41(2,"div",10)(3,"div",11),e.bIt("@verticalStepTransition.done",function(i){e.eBV(t);const o=e.XpG(2);return e.Njj(o._animationDone.next(i))}),e.j41(4,"div",12),e.eu8(5,8),e.k0s()()()()}if(2&n){const t=a.$implicit,s=a.$index,i=a.$count,o=e.XpG(2),r=e.sdS(4);e.R7$(),e.Y8G("ngTemplateOutlet",r)("ngTemplateOutletContext",e.l_i(10,Se,t,s)),e.R7$(),e.AVh("mat-stepper-vertical-line",s!==i-1),e.R7$(),e.AVh("mat-vertical-stepper-content-inactive",o.selectedIndex!==s),e.Y8G("@verticalStepTransition",e.l_i(15,De,o._getAnimationDirection(s),e.eq3(13,Ge,o._getAnimationDuration())))("id",o._getStepContentId(s)),e.BMQ("aria-labelledby",o._getStepLabelId(s)),e.R7$(2),e.Y8G("ngTemplateOutlet",t.content)}}function St(n,a){if(1&n&&e.Z7z(0,At,6,18,"div",9,e.fX1),2&n){const t=e.XpG();e.Dyx(t.steps)}}function Gt(n,a){if(1&n){const t=e.RV6();e.j41(0,"mat-step-header",13),e.bIt("click",function(){const i=e.eBV(t).step;return e.Njj(i.select())})("keydown",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o._onKeydown(i))}),e.k0s()}if(2&n){const t=a.step,s=a.i,i=e.XpG();e.AVh("mat-horizontal-stepper-header","horizontal"===i.orientation)("mat-vertical-stepper-header","vertical"===i.orientation),e.Y8G("tabIndex",i._getFocusIndex()===s?0:-1)("id",i._getStepLabelId(s))("index",s)("state",i._getIndicatorType(s,t.state))("label",t.stepLabel||t.label)("selected",i.selectedIndex===s)("active",i._stepIsNavigable(s,t))("optional",t.optional)("errorMessage",t.errorMessage)("iconOverrides",i._iconOverrides)("disableRipple",i.disableRipple||!i._stepIsNavigable(s,t))("color",t.color||i.color),e.BMQ("aria-posinset",s+1)("aria-setsize",i.steps.length)("aria-controls",i._getStepContentId(s))("aria-selected",i.selectedIndex==s)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null)("aria-disabled",!i._stepIsNavigable(s,t)||null)}}let ge=(()=>{class n extends B{static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=e.xGo(n)))(i||n)}})();static#t=this.\u0275dir=e.FsC({type:n,selectors:[["","matStepLabel",""]],standalone:!0,features:[e.Vt3]})}return n})(),le=(()=>{class n{constructor(){this.changes=new ae.B7,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Nt={provide:le,deps:[[new e.Xx1,new e.kdw,le]],useFactory:function Dt(n){return n||new le}};let ve=(()=>{class n extends q{constructor(t,s,i,o){super(i),this._intl=t,this._focusMonitor=s,this._intlSubscription=t.changes.subscribe(()=>o.markForCheck())}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._intlSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,s){t?this._focusMonitor.focusVia(this._elementRef,t,s):this._elementRef.nativeElement.focus(s)}_stringLabel(){return this.label instanceof ge?null:this.label}_templateLabel(){return this.label instanceof ge?this.label:null}_getHostElement(){return this._elementRef.nativeElement}_getIconContext(){return{index:this.index,active:this.active,optional:this.optional}}_getDefaultTextForState(t){return"number"==t?`${this.index+1}`:"edit"==t?"create":"error"==t?"warning":t}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(le),e.rXU(me.FN),e.rXU(e.aKT),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["mat-step-header"]],hostAttrs:["role","tab",1,"mat-step-header"],hostVars:2,hostBindings:function(s,i){2&s&&e.HbH("mat-"+(i.color||"primary"))},inputs:{state:"state",label:"label",errorMessage:"errorMessage",iconOverrides:"iconOverrides",index:"index",selected:"selected",active:"active",optional:"optional",disableRipple:"disableRipple",color:"color"},standalone:!0,features:[e.Vt3,e.aNF],decls:10,vars:17,consts:[["matRipple","",1,"mat-step-header-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-step-icon-content"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mat-step-label"],[1,"mat-step-text-label"],[1,"mat-step-optional"],[1,"mat-step-sub-label-error"],["aria-hidden","true"],[1,"cdk-visually-hidden"],[3,"ngTemplateOutlet"]],template:function(s,i){if(1&s&&(e.nrm(0,"div",0),e.j41(1,"div")(2,"div",1),e.DNE(3,ft,1,2,"ng-container",2)(4,xt,2,1),e.k0s()(),e.j41(5,"div",3),e.DNE(6,yt,2,1,"div",4)(7,kt,2,1,"div",4)(8,Ft,2,1,"div",5)(9,It,2,1,"div",6),e.k0s()),2&s){let o;e.Y8G("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disableRipple),e.R7$(),e.ZvI("mat-step-icon-state-",i.state," mat-step-icon"),e.AVh("mat-step-icon-selected",i.selected),e.R7$(2),e.vxM(i.iconOverrides&&i.iconOverrides[i.state]?3:4),e.R7$(2),e.AVh("mat-step-label-active",i.active)("mat-step-label-selected",i.selected)("mat-step-label-error","error"==i.state),e.R7$(),e.vxM((o=i._templateLabel())?6:i._stringLabel()?7:-1,o),e.R7$(2),e.vxM(i.optional&&"error"!=i.state?8:-1),e.R7$(),e.vxM("error"===i.state?9:-1)}},dependencies:[g.r6,p.T3,D.An],styles:['.mat-step-header{overflow:hidden;outline:none;cursor:pointer;position:relative;box-sizing:content-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-step-header:focus .mat-focus-indicator::before{content:""}.mat-step-header:hover[aria-disabled=true]{cursor:default}.mat-step-header:hover:not([aria-disabled]),.mat-step-header:hover[aria-disabled=false]{background-color:var(--mat-stepper-header-hover-state-layer-color);border-radius:var(--mat-stepper-header-hover-state-layer-shape)}.mat-step-header.cdk-keyboard-focused,.mat-step-header.cdk-program-focused{background-color:var(--mat-stepper-header-focus-state-layer-color);border-radius:var(--mat-stepper-header-focus-state-layer-shape)}@media(hover: none){.mat-step-header:hover{background:none}}.cdk-high-contrast-active .mat-step-header{outline:solid 1px}.cdk-high-contrast-active .mat-step-header[aria-selected=true] .mat-step-label{text-decoration:underline}.cdk-high-contrast-active .mat-step-header[aria-disabled=true]{outline-color:GrayText}.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-label,.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-icon,.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-optional{color:GrayText}.mat-step-optional{font-size:12px;color:var(--mat-stepper-header-optional-label-text-color)}.mat-step-sub-label-error{font-size:12px;font-weight:normal}.mat-step-icon{border-radius:50%;height:24px;width:24px;flex-shrink:0;position:relative;color:var(--mat-stepper-header-icon-foreground-color);background-color:var(--mat-stepper-header-icon-background-color)}.mat-step-icon-content{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:flex}.mat-step-icon .mat-icon{font-size:16px;height:16px;width:16px}.mat-step-icon-state-error{background-color:var(--mat-stepper-header-error-state-icon-background-color);color:var(--mat-stepper-header-error-state-icon-foreground-color)}.mat-step-icon-state-error .mat-icon{font-size:24px;height:24px;width:24px}.mat-step-label{display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:50px;vertical-align:middle;font-family:var(--mat-stepper-header-label-text-font);font-size:var(--mat-stepper-header-label-text-size);font-weight:var(--mat-stepper-header-label-text-weight);color:var(--mat-stepper-header-label-text-color)}.mat-step-label.mat-step-label-active{color:var(--mat-stepper-header-selected-state-label-text-color)}.mat-step-label.mat-step-label-error{color:var(--mat-stepper-header-error-state-label-text-color);font-size:var(--mat-stepper-header-error-state-label-text-size)}.mat-step-label.mat-step-label-selected{font-size:var(--mat-stepper-header-selected-state-label-text-size);font-weight:var(--mat-stepper-header-selected-state-label-text-weight)}.mat-step-text-label{text-overflow:ellipsis;overflow:hidden}.mat-step-header .mat-step-header-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-step-icon-selected{background-color:var(--mat-stepper-header-selected-state-icon-background-color);color:var(--mat-stepper-header-selected-state-icon-foreground-color)}.mat-step-icon-state-done{background-color:var(--mat-stepper-header-done-state-icon-background-color);color:var(--mat-stepper-header-done-state-icon-foreground-color)}.mat-step-icon-state-edit{background-color:var(--mat-stepper-header-edit-state-icon-background-color);color:var(--mat-stepper-header-edit-state-icon-foreground-color)}'],encapsulation:2,changeDetection:0})}return n})();const Le={horizontalStepTransition:(0,v.hZ)("horizontalStepTransition",[(0,v.wk)("previous",(0,v.iF)({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"})),(0,v.wk)("current",(0,v.iF)({transform:"none",visibility:"inherit"})),(0,v.wk)("next",(0,v.iF)({transform:"translate3d(100%, 0, 0)",visibility:"hidden"})),(0,v.kY)("* => *",(0,v.Os)([(0,v.i0)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)"),(0,v.P)("@*",(0,v.MA)(),{optional:!0})]),{params:{animationDuration:"500ms"}})]),verticalStepTransition:(0,v.hZ)("verticalStepTransition",[(0,v.wk)("previous",(0,v.iF)({height:"0px",visibility:"hidden"})),(0,v.wk)("next",(0,v.iF)({height:"0px",visibility:"hidden"})),(0,v.wk)("current",(0,v.iF)({height:"*",visibility:"inherit"})),(0,v.kY)("* <=> current",(0,v.Os)([(0,v.i0)("{{animationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)"),(0,v.P)("@*",(0,v.MA)(),{optional:!0})]),{params:{animationDuration:"225ms"}})])};let $t=(()=>{class n{constructor(t){this.templateRef=t}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(e.C4Q))};static#t=this.\u0275dir=e.FsC({type:n,selectors:[["ng-template","matStepperIcon",""]],inputs:{name:[0,"matStepperIcon","name"]},standalone:!0})}return n})(),Lt=(()=>{class n{constructor(t){this._template=t}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(e.C4Q))};static#t=this.\u0275dir=e.FsC({type:n,selectors:[["ng-template","matStepContent",""]],standalone:!0})}return n})(),Ot=(()=>{class n extends J{constructor(t,s,i,o){super(t,o),this._errorStateMatcher=s,this._viewContainerRef=i,this._isSelected=we.y.EMPTY,this.stepLabel=void 0}ngAfterContentInit(){this._isSelected=this._stepper.steps.changes.pipe((0,A.n)(()=>this._stepper.selectionChange.pipe((0,k.T)(t=>t.selectedStep===this),(0,z.Z)(this._stepper.selected===this)))).subscribe(t=>{t&&this._lazyContent&&!this._portal&&(this._portal=new I.VA(this._lazyContent._template,this._viewContainerRef))})}ngOnDestroy(){this._isSelected.unsubscribe()}isErrorState(t,s){return this._errorStateMatcher.isErrorState(t,s)||!!(t&&t.invalid&&this.interacted)}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU((0,e.Rfq)(()=>Oe)),e.rXU(g.es,4),e.rXU(e.c1b),e.rXU(re,8))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["mat-step"]],contentQueries:function(s,i,o){if(1&s&&(e.wni(o,ge,5),e.wni(o,Lt,5)),2&s){let r;e.mGM(r=e.lsd())&&(i.stepLabel=r.first),e.mGM(r=e.lsd())&&(i._lazyContent=r.first)}},hostAttrs:["hidden",""],inputs:{color:"color"},exportAs:["matStep"],standalone:!0,features:[e.Jv_([{provide:g.es,useExisting:n},{provide:J,useExisting:n}]),e.Vt3,e.aNF],ngContentSelectors:Ae,decls:1,vars:0,consts:[[3,"cdkPortalOutlet"]],template:function(s,i){1&s&&(e.NAR(),e.DNE(0,jt,2,1,"ng-template"))},dependencies:[I.I3],encapsulation:2,changeDetection:0})}return n})(),Oe=(()=>{class n extends H{get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t)?t+"ms":t}constructor(t,s,i){super(t,s,i),this._stepHeader=void 0,this._steps=void 0,this.steps=new e.rOR,this.animationDone=new e.bkB,this.labelPosition="end",this.headerPosition="top",this._iconOverrides={},this._animationDone=new ae.B7,this._animationDuration="",this._isServer=!(0,e.WQX)(_e.OD).isBrowser;const o=i.nativeElement.nodeName.toLowerCase();this.orientation="mat-vertical-stepper"===o?"vertical":"horizontal"}ngAfterContentInit(){super.ngAfterContentInit(),this._icons.forEach(({name:t,templateRef:s})=>this._iconOverrides[t]=s),this.steps.changes.pipe((0,X.Q)(this._destroyed)).subscribe(()=>{this._stateChanged()}),this._animationDone.pipe((0,Me.F)((t,s)=>t.fromState===s.fromState&&t.toState===s.toState),(0,X.Q)(this._destroyed)).subscribe(t=>{"current"===t.toState&&this.animationDone.emit()})}_stepIsNavigable(t,s){return s.completed||this.selectedIndex===t||!this.linear}_getAnimationDuration(){return this.animationDuration?this.animationDuration:"horizontal"===this.orientation?"500ms":"225ms"}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(ie.dS,8),e.rXU(e.gRc),e.rXU(e.aKT))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["mat-stepper"],["mat-vertical-stepper"],["mat-horizontal-stepper"],["","matStepper",""]],contentQueries:function(s,i,o){if(1&s&&(e.wni(o,Ot,5),e.wni(o,$t,5)),2&s){let r;e.mGM(r=e.lsd())&&(i._steps=r),e.mGM(r=e.lsd())&&(i._icons=r)}},viewQuery:function(s,i){if(1&s&&e.GBs(ve,5),2&s){let o;e.mGM(o=e.lsd())&&(i._stepHeader=o)}},hostAttrs:["role","tablist"],hostVars:11,hostBindings:function(s,i){2&s&&(e.BMQ("aria-orientation",i.orientation),e.AVh("mat-stepper-horizontal","horizontal"===i.orientation)("mat-stepper-vertical","vertical"===i.orientation)("mat-stepper-label-position-end","horizontal"===i.orientation&&"end"==i.labelPosition)("mat-stepper-label-position-bottom","horizontal"===i.orientation&&"bottom"==i.labelPosition)("mat-stepper-header-position-bottom","bottom"===i.headerPosition))},inputs:{disableRipple:"disableRipple",color:"color",labelPosition:"labelPosition",headerPosition:"headerPosition",animationDuration:"animationDuration"},outputs:{animationDone:"animationDone"},exportAs:["matStepper","matVerticalStepper","matHorizontalStepper"],standalone:!0,features:[e.Jv_([{provide:H,useExisting:n}]),e.Vt3,e.aNF],ngContentSelectors:Ae,decls:5,vars:2,consts:[["stepTemplate",""],[1,"mat-horizontal-stepper-wrapper"],[1,"mat-horizontal-stepper-header-container"],[1,"mat-horizontal-content-container"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id","mat-horizontal-stepper-content-inactive"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mat-stepper-horizontal-line"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id"],[3,"ngTemplateOutlet"],[1,"mat-step"],[1,"mat-vertical-content-container"],["role","tabpanel",1,"mat-vertical-stepper-content",3,"id"],[1,"mat-vertical-content"],[3,"click","keydown","tabIndex","id","index","state","label","selected","active","optional","errorMessage","iconOverrides","disableRipple","color"]],template:function(s,i){if(1&s&&(e.NAR(),e.DNE(0,Tt,1,0)(1,Mt,7,0,"div",1)(2,St,2,0)(3,Gt,1,23,"ng-template",null,0,e.C5r)),2&s){let o;e.vxM(i._isServer?0:-1),e.R7$(),e.vxM("horizontal"===(o=i.orientation)?1:"vertical"===o?2:-1)}},dependencies:[p.T3,ve],styles:['.mat-stepper-vertical,.mat-stepper-horizontal{display:block;font-family:var(--mat-stepper-container-text-font);background:var(--mat-stepper-container-color)}.mat-horizontal-stepper-header-container{white-space:nowrap;display:flex;align-items:center}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header-container{align-items:flex-start}.mat-stepper-header-position-bottom .mat-horizontal-stepper-header-container{order:1}.mat-stepper-horizontal-line{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin:0 -16px;min-width:32px;border-top-color:var(--mat-stepper-line-color)}.mat-stepper-label-position-bottom .mat-stepper-horizontal-line{margin:0;min-width:0;position:relative;top:calc(calc((var(--mat-stepper-header-height) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{border-top-width:1px;border-top-style:solid;content:"";display:inline-block;height:0;position:absolute;width:calc(50% - 20px)}.mat-horizontal-stepper-header{display:flex;height:72px;overflow:hidden;align-items:center;padding:0 24px;height:var(--mat-stepper-header-height)}.mat-horizontal-stepper-header .mat-step-icon{margin-right:8px;flex:none}[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:8px}.mat-horizontal-stepper-header::before,.mat-horizontal-stepper-header::after{border-top-color:var(--mat-stepper-line-color)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{padding:calc((var(--mat-stepper-header-height) - 24px) / 2) 24px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::after{top:calc(calc((var(--mat-stepper-header-height) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{box-sizing:border-box;flex-direction:column;height:auto}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{right:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before{left:0}[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:last-child::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:first-child::after{display:none}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-label{padding:16px 0 0 0;text-align:center;width:100%}.mat-vertical-stepper-header{display:flex;align-items:center;height:24px;padding:calc((var(--mat-stepper-header-height) - 24px) / 2) 24px}.mat-vertical-stepper-header .mat-step-icon{margin-right:12px}[dir=rtl] .mat-vertical-stepper-header .mat-step-icon{margin-right:0;margin-left:12px}.mat-horizontal-stepper-wrapper{display:flex;flex-direction:column}.mat-horizontal-stepper-content{outline:0}.mat-horizontal-stepper-content.mat-horizontal-stepper-content-inactive{height:0;overflow:hidden}.mat-horizontal-stepper-content:not(.mat-horizontal-stepper-content-inactive){visibility:inherit !important}.mat-horizontal-content-container{overflow:hidden;padding:0 24px 24px 24px}.cdk-high-contrast-active .mat-horizontal-content-container{outline:solid 1px}.mat-stepper-header-position-bottom .mat-horizontal-content-container{padding:24px 24px 0 24px}.mat-vertical-content-container{margin-left:36px;border:0;position:relative}.cdk-high-contrast-active .mat-vertical-content-container{outline:solid 1px}[dir=rtl] .mat-vertical-content-container{margin-left:0;margin-right:36px}.mat-stepper-vertical-line::before{content:"";position:absolute;left:0;border-left-width:1px;border-left-style:solid;border-left-color:var(--mat-stepper-line-color);top:calc(8px - calc((var(--mat-stepper-header-height) - 24px) / 2));bottom:calc(8px - calc((var(--mat-stepper-header-height) - 24px) / 2))}[dir=rtl] .mat-stepper-vertical-line::before{left:auto;right:0}.mat-vertical-stepper-content{overflow:hidden;outline:0}.mat-vertical-stepper-content:not(.mat-vertical-stepper-content-inactive){visibility:inherit !important}.mat-vertical-content{padding:0 24px 24px 24px}.mat-step:last-child .mat-vertical-content-container{border:none}'],encapsulation:2,data:{animation:[Le.horizontalStepTransition,Le.verticalStepTransition]},changeDetection:0})}return n})(),Vt=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({providers:[Nt,g.es],imports:[g.yE,p.MD,I.jc,Re,D.m_,g.pZ,Oe,ve,g.yE]})}return n})();var Pt=l(363),m=l(9204),Q=l(7915),d=l(2333),Xt=l(2168),Ve=l(3240),qt=l(6441),W=l(9908),L=l(521),j=l(2175),Pe=l(6e3),O=l(7841),Bt=l(9803),be=l(8627),Yt=l(9314),ce=l(3602),pe=l(7871),_=l(7236),Z=l(3998),S=l(2185),M=l(2587),N=l(9434);function Ut(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",6)(1,"div",7),e.EFF(2),e.k0s(),e.j41(3,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,o=e.XpG();return e.Njj(o.edit(i))}),e.j41(4,"app-icon"),e.EFF(5,"edit"),e.k0s()(),e.j41(6,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,o=e.XpG();return e.Njj(o.remove(i))}),e.j41(7,"app-icon"),e.EFF(8,"delete"),e.k0s()()()}if(2&n){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.name)}}function zt(n,a){if(1&n&&(e.qex(0),e.DNE(1,Ut,9,1,"div",5),e.bVm()),2&n){const t=a.$implicit;e.R7$(),e.Y8G("ngIf",t.id)}}let Xe=(()=>{class n{constructor(t,s){var i=this;this._data=t,this._dialog_ref=s,this.changed=new e.bkB,this.list=this._data.list,this.edit=this._data.edit,this.remove=function(){var o=(0,m.A)(function*(r){yield(0,_.y3)(r.id).toPromise(),i.changed.emit()});return function(r){return o.apply(this,arguments)}}()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(M.Vh),e.rXU(M.CP))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-category-management-modal"]],decls:14,vars:3,consts:[["btn","","icon","","matRipple","","mat-dialog-close",""],[1,"overflow-y-auto","min-w-[20rem]","divide-y","divide-base-200","max-h-[65vh]"],["btn","","matRipple","",1,"flex","items-center","justify-center","space-x-2","w-[calc(100%-1rem)]","m-2",3,"click"],[1,"truncate"],[4,"ngFor","ngForOf"],["class","flex items-center space-x-2 hover:bg-base-200:bg-base-300 p-2",4,"ngIf"],[1,"flex","items-center","space-x-2","hover:bg-base-200:bg-base-300","p-2"],[1,"flex-1","truncate"],["btn","","icon","","matRipple","",3,"click"]],template:function(s,i){1&s&&(e.j41(0,"header")(1,"h2"),e.EFF(2,"Manage Categories"),e.k0s(),e.j41(3,"button",0)(4,"app-icon"),e.EFF(5,"close"),e.k0s()()(),e.j41(6,"main",1)(7,"button",2),e.bIt("click",function(){return i.edit()}),e.j41(8,"div",3),e.EFF(9,"New Category"),e.k0s(),e.j41(10,"app-icon"),e.EFF(11,"add"),e.k0s()(),e.DNE(12,zt,2,1,"ng-container",4),e.nI1(13,"async"),e.k0s()),2&s&&(e.R7$(12),e.Y8G("ngForOf",e.bMT(13,1,i.list)))},dependencies:[p.Sq,p.bT,M.tx,g.r6,N.R,p.Jj]})}return n})();var F=l(4950),V=l(7984),K=l(5175),Y=l(1134),f=l(4456);function Jt(n,a){1&n&&(e.j41(0,"button",6)(1,"app-icon"),e.EFF(2,"close"),e.k0s()())}function Ht(n,a){if(1&n&&(e.j41(0,"mat-option",14),e.EFF(1),e.k0s()),2&n){const t=a.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function Qt(n,a){if(1&n&&(e.j41(0,"main",7)(1,"div",8)(2,"label",9),e.EFF(3,"Name"),e.j41(4,"span"),e.EFF(5,"*"),e.k0s()(),e.j41(6,"mat-form-field",10),e.nrm(7,"input",11),e.j41(8,"mat-error"),e.EFF(9,"Name is required"),e.k0s()()(),e.j41(10,"div",8)(11,"label",9),e.EFF(12,"Parent Category"),e.k0s(),e.j41(13,"mat-form-field",10)(14,"mat-select",12),e.nI1(15,"async"),e.DNE(16,Ht,2,2,"mat-option",13),e.nI1(17,"async"),e.k0s()()()()),2&n){let t;const s=e.XpG();e.Y8G("formGroup",s.form),e.R7$(14),e.Y8G("disabled",!(null!=(t=e.bMT(15,3,s.categories))&&t.length)),e.R7$(2),e.Y8G("ngForOf",e.bMT(17,5,s.categories))}}function Wt(n,a){if(1&n){const t=e.RV6();e.j41(0,"footer",15)(1,"a",16),e.EFF(2,"Cancel"),e.k0s(),e.j41(3,"button",17),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.save())}),e.EFF(4,"Save"),e.k0s()()}}function Zt(n,a){1&n&&(e.j41(0,"div",18),e.nrm(1,"mat-spinner",19),e.j41(2,"p",20),e.EFF(3,"Saving Category..."),e.k0s()()),2&n&&(e.R7$(),e.Y8G("diameter",32))}let xe=(()=>{class n{constructor(t,s,i){this._state=s,this._dialog_ref=i,this.loading=!1,this.form=(0,_.SY)(),this.categories=this._state.categories.pipe((0,k.T)(o=>o.filter(r=>r.parent_category_id!==this.form.value.id))),t?.category&&this.form.patchValue(t.category)}save(){var t=this;return(0,m.A)(function*(){if(!t.form.valid)return;t.loading=!0,t._dialog_ref.disableClose=!0;const s=t.form.value,i=yield(0,_.qG)(s).toPromise().catch(o=>{throw t.loading=!1,t._dialog_ref.disableClose=!1,(0,d.UG)(`Error saving category: ${o.message}`),o});t.form.reset(),t.loading=!1,t._dialog_ref.close(i)})()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(M.Vh),e.rXU(C),e.rXU(M.CP))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-category-form"]],decls:8,vars:5,consts:[["load_state",""],[1,"flex","items-center","p-2"],[1,"text-center","text-xl","font-medium"],["btn","","icon","","matRipple","","mat-dialog-close","",4,"ngIf"],["class","flex-1 h-1/2 overflow-auto p-2 w-[20rem] max-w-[80vw]",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex justify-end space-x-2 p-2 border-t border-base-200",4,"ngIf"],["btn","","icon","","matRipple","","mat-dialog-close",""],[1,"flex-1","h-1/2","overflow-auto","p-2","w-[20rem]","max-w-[80vw]",3,"formGroup"],[1,"flex","flex-col","space-y-2"],["for","name"],["appearance","outline"],["matInput","","name","name","placeholder","Category Name","formControlName","name"],["formControlName","parent_category_id","placeholder","No Parent",3,"disabled"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex","justify-end","space-x-2","p-2","border-t","border-base-200"],["btn","","matRipple","","mat-dialog-close","",1,"w-32","inverse"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"flex","flex-col","items-center","justify-center","p-8"],[3,"diameter"],[1,"mt-4"]],template:function(s,i){if(1&s&&(e.j41(0,"header",1)(1,"h2",2),e.EFF(2),e.k0s(),e.DNE(3,Jt,3,0,"button",3),e.k0s(),e.DNE(4,Qt,18,7,"main",4)(5,Wt,5,0,"footer",5)(6,Zt,4,1,"ng-template",null,0,e.C5r)),2&s){const o=e.sdS(7);e.R7$(2),e.SpI(" ",i.form.value.id?"Edit":"Add"," Category "),e.R7$(),e.Y8G("ngIf",!i.loading),e.R7$(),e.Y8G("ngIf",!i.loading)("ngIfElse",o),e.R7$(),e.Y8G("ngIf",!i.loading)}},dependencies:[p.Sq,p.bT,F.rl,F.TL,V.fg,K.VO,g.wT,Y.LG,M.tx,g.r6,f.me,f.BC,f.cb,f.j4,f.JD,N.R,p.Jj]})}return n})();var ee=l(6815),Kt=l(3747);let C=(()=>{class n extends d.Tv{get form(){return this._form}get is_new_ui(){return location.hash.includes("new")||location.pathname.includes("new")}get base_route(){return this.is_new_ui?"/book/assets/new":"/book/assets"}constructor(t,s,i,o){super(),this._spaces=t,this._org=s,this._dialog=i,this._settings=o,this._options=new L.t({view:"grid"}),this._change=new L.t(0),this._poll=new L.t(0),this._extra_assets=new L.t([]),this._form=(0,_.QP)(),this._loading=new L.t(!1),this.loading=this._loading.asObservable(),this.options=this._options.asObservable(),this.extra_assets=this._extra_assets.asObservable(),this.products=(0,j.zV)([this._change,this._org.active_building]).pipe((0,A.n)(()=>(this._loading.next(!0),(0,_.iZ)({zone_id:this._org.building?.id}))),(0,Pe.M)(r=>this._loading.next(!1)),(0,O.t)(1)),this.purchase_orders=this._change.pipe((0,A.n)(()=>(this._loading.next(!0),(0,_.fc)())),(0,Pe.M)(()=>this._loading.next(!1)),(0,O.t)(1)),this.requests=(0,j.zV)([this._options,this._org.active_building,this._org.active_region,this._poll,this._change,this._spaces.initialised]).pipe((0,Bt.B)(200),(0,A.n)(([{date:r},c,u])=>{const b=(0,Ve.o)(r||Date.now()).valueOf(),x=(0,qt.D)(r||Date.now()).valueOf(),T=this._settings.get("app.use_region")?this._org.buildingsForRegion().map($=>$.id).join(","):c?.id;return(0,Q.tj)({zones:T,period_start:(0,W._)(b),period_end:(0,W._)(x),type:"asset-request"}).pipe((0,k.T)($=>$.map(E=>new Q.Qr({...E,extension_data:{...E.extension_data,space:this._spaces.find(E.extension_data.space_id)}})).filter(E=>{const R=E.linked_event||E.linked_bookings[0];if(!R)return!1;const P=new Kt.Y({...E.extension_data?.request});P._time=R.date||1e3*R.event_start||1e3*R.booking_start||b;const Fe=R.date_end||1e3*R.event_end||1e3*R.booking_end||x;return P?.deliver_at>=b&&P?.deliver_at<x&&P?.deliver_at<Fe})))}),(0,O.t)(1)),this.filtered_requests=(0,j.zV)([this.requests,this._options]).pipe((0,k.T)(([r,c])=>{const u=(c.search||"").toLowerCase();return u?r.filter(b=>b.user_name.toLowerCase().includes(u)||b.title.toLowerCase().includes(u)||b.extension_data.location_name?.toLowerCase().includes(u)||b.extension_data.assets?.find(x=>x.name.toLowerCase().includes(u))||b.status.includes(u)||b.extension_data.tracking?.includes(u)):r})),this.categories=(0,j.zV)([this._options,this._change]).pipe((0,A.n)(()=>(0,_.vt)()),(0,k.T)(r=>[new _.$C({id:"",name:"Uncategorised"}),...r]),(0,O.t)(1)),this.active_product=(0,j.zV)([this._options,this._org.active_building,this._change]).pipe((0,be.p)(([{active_item:r}])=>!!r),(0,k.T)(([r,c])=>[r.active_item,c]),(0,Me.F)(),(0,A.n)(([r])=>(0,_.E4)(r,{zone_id:this._org.building.id})),(0,O.t)(1)),this.active_product_requests=this.active_product.pipe((0,A.n)(r=>this.requests.pipe((0,k.T)(c=>c.filter(u=>r.assets.find(b=>b.id===u.asset_id))))),(0,k.T)(r=>r.filter(c=>"declined"!==c.status))),this.filtered_products=(0,j.zV)([this.products,this._options]).pipe((0,k.T)(([r,c])=>c.search?r.filter(u=>u.name.toLowerCase().includes(c.search.toLowerCase())):r)),this.product_mapping=(0,j.zV)([this.filtered_products,this.categories]).pipe((0,k.T)(([r,c])=>{const u={_count:r.length};r.forEach(x=>x.category_id=c.find(T=>T.id===x.category_id)?x.category_id:"");const b=(0,d.Am)(r.map(x=>x.category_id));for(const x of b)u[x]=r.filter(T=>T.category_id===x);return u})),this.settings=(0,j.zV)([this._org.active_building,this._change]).pipe((0,be.p)(([r])=>!!r),(0,A.n)(([r])=>(0,Z.bpY)(r.id,"assets-settings").pipe((0,Yt.W)(c=>(0,fe.of)({})))),(0,k.T)(r=>r.details||{}),(0,O.t)(1)),this.availability=this.settings.pipe((0,k.T)(r=>r.disabled_rooms||[]))}startPolling(t=15e3){return this.interval("polling",()=>this._poll.next(Date.now()),t),()=>this.stopPolling()}stopPolling(){this.clearInterval("polling")}resetForm(){this._form=(0,_.QP)()}manageCategories(){const t=this._dialog.open(Xe,{data:{list:this.categories,edit:s=>this.editCategory(s)}});this.subscription("category_modal",t.componentInstance.changed.subscribe(()=>this._change.next(Date.now()))),t.afterClosed().subscribe(()=>this.unsub("category_modal"))}editCategory(t={}){var s=this;return(0,m.A)(function*(){const o=yield s._dialog.open(xe,{data:{category:t}}).afterClosed().toPromise();return o?(s._change.next(Date.now()),o):null})()}setExtraAssets(t){this._extra_assets.next(t)}setOptions(t){this._options.next({...this._options.getValue(),...t})}postChange(){this.timeout("change",()=>this._change.next(Date.now()),1e3)}setStatus(t,s){var i=this;return(0,m.A)(function*(){let o=t;return"declined"===s?o=yield(0,Q.vB)(t.id).toPromise():"approved"===s&&(o=yield(0,Q.DD)(t.id).toPromise()),i._change.next(Date.now()),o})()}setTracking(t,s){var i=this;return(0,m.A)(function*(){const o=yield(0,Q.vq)(t.id,{...t.toJSON(),extension_data:{...t.extension_data,tracking:s}}).toPromise();return i._change.next(Date.now()),o})()}deleteActiveProduct(){var t=this;return(0,m.A)(function*(){const s=yield t.active_product.pipe((0,ce.s)(1)).toPromise();s?.id&&(yield(0,_.nP)(s.id).toPromise(),t._change.next(Date.now()),(0,d.VX)("Successfully deleted asset"))})()}postForm(){var t=this;return(0,m.A)(function*(){if(!t.form?.valid)return;const s=t.form.value,i={...s},o=["other_data","id","name","quantity","category","purchase_date","brand","images"];for(const c of o)delete i[c];s.other_data=(0,Z.jv5)(i,[void 0,null,""]);const r=yield(0,_.We)(s).toPromise();return t._change.next(Date.now()),(0,d.VX)(`Successfully ${s.id?"updated":"created"} asset`),t.resetForm(),r.id})()}editConfig(){var t=this;return(0,m.A)(function*(){const s=yield t.getConfig(t._org.building.id),i=yield t.products.pipe((0,ce.s)(1)).toPromise(),o=(0,d.Am)((0,d.Bq)(i.map(u=>[u.name]))),r=t._dialog.open(ee.Rt,{data:{resource_name:"Assets",config:s,types:o,require_notes:!1}}),c=yield Promise.race([r.componentInstance.event.pipe((0,pe.$)(u=>"done"===u.reason)).toPromise(),r.afterClosed().toPromise()]);"done"===c?.reason&&t.updateConfig(t._org.building.id,c.metadata).then(()=>r.close(),()=>r.componentInstance.loading=!1)})()}getConfig(t=this._org.building.id){return(0,m.A)(function*(){const s=(yield(0,Z.bpY)(t,"assets_config").toPromise()).details;return s instanceof Array?s:[]})()}updateConfig(t,s){return(0,Z.D58)(t,{id:t,name:"assets_config",details:s,description:`Assets config for ${t}`}).toPromise()}saveSettings(t){var s=this;return(0,m.A)(function*(){const i=yield s.settings.pipe((0,ce.s)(1)).toPromise(),o=yield(0,Z.D58)(s._org.building.id,{id:s._org.building.id,name:"assets-settings",details:{...i,...t},description:`Assets settings for ${s._org.building.id}`}).toPromise();return s._change.next(Date.now()),o})()}static#e=this.\u0275fac=function(s){return new(s||n)(e.KVO(Xt.bh),e.KVO(S.yb),e.KVO(M.bZ),e.KVO(d.h$))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var te=l(8223),qe=l(640);const en=n=>[n,"manage","group"],tn=n=>[n,"manage","purchase-order"];function nn(n,a){if(1&n&&(e.j41(0,"a",11),e.EFF(1," Add Product "),e.k0s()),2&n){const t=e.XpG();e.Y8G("routerLink",e.eq3(1,en,t.base_route))}}function sn(n,a){if(1&n&&(e.j41(0,"a",11),e.EFF(1," Add Purchase Order "),e.k0s()),2&n){const t=e.XpG();e.Y8G("routerLink",e.eq3(1,tn,t.base_route))}}function on(n,a){if(1&n){const t=e.RV6();e.j41(0,"mat-button-toggle-group",12),e.nI1(1,"async"),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.setOptions({view:i}))}),e.j41(2,"mat-button-toggle",13)(3,"div",14)(4,"app-icon",15),e.EFF(5,"view_module"),e.k0s()()(),e.j41(6,"mat-button-toggle",16)(7,"div",14)(8,"app-icon",15),e.EFF(9,"view_list"),e.k0s()()()()}if(2&n){let t;const s=e.XpG();e.Y8G("ngModel",null==(t=e.bMT(1,1,s.options))?null:t.view)}}function an(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",17),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.editConfig())}),e.j41(1,"app-icon"),e.EFF(2,"menu_book"),e.k0s()()}}function rn(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",18),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.setRoomAvailability())}),e.j41(1,"app-icon"),e.EFF(2,"event_available"),e.k0s()()}}function ln(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.manageCategories())}),e.j41(1,"app-icon"),e.EFF(2,"list_alt"),e.k0s()()}}function cn(n,a){if(1&n&&(e.j41(0,"mat-option",24),e.EFF(1),e.k0s()),2&n){const t=a.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.display_name||t.name," ")}}function pn(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",20)(1,"mat-form-field",21)(2,"mat-select",22),e.nI1(3,"async"),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.setBuilding(i))}),e.DNE(4,cn,2,2,"mat-option",23),e.nI1(5,"async"),e.k0s()()()}if(2&n){let t;const s=e.XpG();e.R7$(2),e.Y8G("ngModel",null==(t=e.bMT(3,2,s.building))?null:t.id),e.R7$(2),e.Y8G("ngForOf",e.bMT(5,4,s.buildings))}}let Be=(()=>{class n extends d.Tv{get base_route(){return this._state.base_route}get use_region(){return!!this._settings.get("app.use_region")}setBuilding(t){const s=this._org.buildings.find(i=>i.id===t);s&&(this._org.building=s)}constructor(t,s,i,o){super(),this._state=t,this._org=s,this._settings=i,this._dialog=o,this.active="",this.options=this._state.options,this.region=this._org.active_region,this.building=this._org.active_building,this.buildings=this._org.active_buildings,this.setOptions=r=>this._state.setOptions(r),this.manageCategories=()=>this._state.manageCategories(),this.editConfig=()=>this._state.editConfig()}setRoomAvailability(){var t=this;return(0,m.A)(function*(){const s=t._dialog.open(ee.DJ,{data:{type:"Assets",disabled_rooms:yield t._state.availability.pipe((0,ce.s)(1)).toPromise()}});t.subscription("room-availability",s.componentInstance.change.subscribe(function(){var i=(0,m.A)(function*(o){yield t._state.saveSettings({disabled_rooms:o}).catch(),s.componentInstance.loading=!1});return function(o){return i.apply(this,arguments)}}()))})()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(C),e.rXU(S.yb),e.rXU(d.h$),e.rXU(M.bZ))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-manager-topbar"]],inputs:{active:"active"},features:[e.Vt3],decls:15,vars:12,consts:[[1,"w-full","px-8","pt-4","pb-2","bg-base-100","flex","items-center","space-x-2"],["btn","","matRipple","","class","secondary",3,"routerLink",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],[1,"flex-1"],["btn","","icon","","matRipple","","class","bg-secondary text-secondary-content rounded h-12 w-12","matTooltip","Edit Config",3,"click",4,"ngIf"],["btn","","icon","","matRipple","","class","bg-secondary text-secondary-content rounded h-12 w-12","matTooltip","Room Availability",3,"click",4,"ngIf"],["btn","","icon","","matRipple","","class","bg-secondary text-secondary-content rounded h-12 w-12","matTooltip","Manage Categories",3,"click",4,"ngIf"],["appearance","outline",1,"no-subscript"],["matPrefix","",1,"text-2xl","relative","top-1","-left-1"],["matInput","","placeholder","Search products and requests",3,"ngModelChange","ngModel"],["class","flex items-center space-x-2 px-4 pb-2",4,"ngIf"],["btn","","matRipple","",1,"secondary",3,"routerLink"],[3,"ngModelChange","ngModel"],["value","grid","matTooltip","View as Grid"],[1,"flex","items-center","justify-center","h-12","w-8"],[1,"text-2xl"],["value","list","matTooltip","View as List"],["btn","","icon","","matRipple","","matTooltip","Edit Config",1,"bg-secondary","text-secondary-content","rounded","h-12","w-12",3,"click"],["btn","","icon","","matRipple","","matTooltip","Room Availability",1,"bg-secondary","text-secondary-content","rounded","h-12","w-12",3,"click"],["btn","","icon","","matRipple","","matTooltip","Manage Categories",1,"bg-secondary","text-secondary-content","rounded","h-12","w-12",3,"click"],[1,"flex","items-center","space-x-2","px-4","pb-2"],["appearance","outline",1,"no-subscript","w-48"],["placeholder","All Buildings",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(s,i){if(1&s&&(e.j41(0,"div",0),e.DNE(1,nn,2,3,"a",1)(2,sn,2,3,"a",1)(3,on,10,3,"mat-button-toggle-group",2),e.nrm(4,"div",3),e.DNE(5,an,3,0,"button",4)(6,rn,3,0,"button",5)(7,ln,3,0,"button",6),e.j41(8,"mat-form-field",7)(9,"app-icon",8),e.EFF(10," search "),e.k0s(),e.j41(11,"input",9),e.nI1(12,"async"),e.bIt("ngModelChange",function(r){return i.setOptions({search:r})}),e.k0s()()(),e.DNE(13,pn,6,6,"div",10),e.nI1(14,"async")),2&s){let o,r;e.R7$(),e.Y8G("ngIf","items"===i.active),e.R7$(),e.Y8G("ngIf","purchase-orders"===i.active),e.R7$(),e.Y8G("ngIf","items"===i.active),e.R7$(2),e.Y8G("ngIf","items"===i.active),e.R7$(),e.Y8G("ngIf","items"===i.active),e.R7$(),e.Y8G("ngIf","items"===i.active),e.R7$(4),e.Y8G("ngModel",null==(o=e.bMT(12,8,i.options))?null:o.search),e.R7$(2),e.Y8G("ngIf",i.use_region&&(null==(r=e.bMT(14,10,i.building))?null:r.length))}},dependencies:[p.Sq,p.bT,F.rl,F.JW,V.fg,K.VO,g.wT,qe.oV,g.r6,f.me,f.BC,f.vS,N.R,U.ec,U.pc,h.Wk,p.Jj]})}return n})();const dn=n=>[n,"list","items"],un=n=>[n,"list","purchase-orders"],mn=n=>[n,"list","requests"];function _n(n,a){if(1&n){const t=e.RV6();e.j41(0,"a",7),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.active="requests")}),e.EFF(1," Requests "),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("routerLink",e.eq3(3,mn,t.base_route))("routerLinkActive","active")("active","requests"===t.active)}}function fn(n,a){if(1&n){const t=e.RV6();e.j41(0,"nav",4),e.DNE(1,_n,2,5,"a",5),e.j41(2,"a",6),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.active="items")}),e.EFF(3," Products "),e.k0s(),e.j41(4,"a",6),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.active="purchase-orders")}),e.EFF(5," Purchase Orders "),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.is_new),e.R7$(),e.Y8G("routerLink",e.eq3(5,dn,t.base_route))("active","items"===t.active),e.R7$(2),e.Y8G("routerLink",e.eq3(7,un,t.base_route))("active","purchase-orders"===t.active)}}let Ye=(()=>{class n extends d.Tv{get base_route(){return this._state.base_route}constructor(t,s){super(),this._router=t,this._state=s,this.active="requests",this.is_new=!1}ngOnInit(){this.is_new=this._router.url.includes("new"),this.active=this._router.url.includes("requests")?"requests":this._router.url.includes("items")?"items":"purchase-orders",this.subscription("router.events",this._router.events.subscribe(t=>{t instanceof h.wF&&(this.is_new=this._router.url.includes("new"),this.active=this._router.url.includes("requests")?"requests":this._router.url.includes("items")?"items":"purchase-orders")}))}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(h.Ix),e.rXU(C))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-listing"]],features:[e.Vt3],decls:5,vars:2,consts:[[3,"active"],[1,"flex","flex-col","flex-1","h-1/2","w-full","px-8"],["mat-tab-nav-bar","",4,"ngIf"],[1,"flex-1","h-1/2","w-full","overflow-visible"],["mat-tab-nav-bar",""],["mat-tab-link","",3,"routerLink","routerLinkActive","active","click",4,"ngIf"],["mat-tab-link","",3,"click","routerLink","active"],["mat-tab-link","",3,"click","routerLink","routerLinkActive","active"]],template:function(s,i){1&s&&(e.nrm(0,"asset-manager-topbar",0),e.j41(1,"div",1),e.DNE(2,fn,6,9,"nav",2),e.j41(3,"div",3),e.nrm(4,"router-outlet"),e.k0s()()),2&s&&(e.Y8G("active",i.active),e.R7$(2),e.Y8G("ngIf",!i.is_new||"requests"!==i.active))},dependencies:[p.bT,te.Bu,te.Ql,h.n3,h.Wk,h.wQ,Be],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%}\n\n/*# sourceMappingURL=asset-listing.component.ts-angular-inline--114.css.map*/"]})}return n})();var hn=l(4605);const gn=["asset-manager",""];let Ue=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["","asset-manager",""]],attrs:gn,decls:3,vars:0,consts:[[1,"relative","w-1/2","flex-1","bg-base-100","overflow-hidden"]],template:function(s,i){1&s&&(e.nrm(0,"sidebar"),e.j41(1,"main",0),e.nrm(2,"router-outlet"),e.k0s())},dependencies:[hn.k,h.n3],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%;background:var(--b1)}\n\n/*# sourceMappingURL=asset-manager.component.ts-angular-inline--115.css.map*/"]})}return n})();var vn=l(2011),G=l(1034),bn=l(4918),ne=l(8328);let de=(()=>{class n{transform(t,s="_",i=" "){return(t||"").split(s).join(i)}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275pipe=e.EJ8({name:"splitjoin",type:n,pure:!0})}return n})();const xn=n=>({key:"zone",name:"Level",content:n}),yn=()=>({key:"description",name:"Space"}),kn=n=>({key:"tracking",name:"Tracking",content:n}),Fn=()=>({key:"user_name",name:"Requestee"}),In=(n,a,t,s)=>[n,a,t,s],ze=()=>({display:"none"}),Cn=(n,a)=>({"#Zones":n,"#zones":a});function jn(n,a){if(1&n&&(e.j41(0,"div",16),e.EFF(1),e.k0s()),2&n){let t;const s=e.XpG();e.R7$(),e.SpI(" ",(null==(t=s.level(s.selected.zone))?null:t.display_name)||"N/A"," ")}}function Tn(n,a){if(1&n&&e.nrm(0,"interactive-map",17),2&n){let t;const s=e.XpG();e.Y8G("src",(null==(t=s.level(s.selected.zone))?null:t.map_id)||"")("styles",e.l_i(5,Cn,e.lJ4(3,ze),e.lJ4(4,ze)))("features",s.selected_feature)}}function En(n,a){1&n&&(e.j41(0,"p",18),e.EFF(1," Select a space from the list to view map location "),e.k0s())}function Rn(n,a){if(1&n&&(e.j41(0,"div",19),e.EFF(1),e.k0s()),2&n){let t;const s=a.data,i=e.XpG();e.R7$(),e.SpI(" ",(null==(t=i.level(s))?null:t.display_name)||"N/A"," ")}}function wn(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",20)(1,"button",21),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())}),e.j41(2,"div",22),e.EFF(3),e.nI1(4,"splitjoin"),e.k0s(),e.j41(5,"app-icon",23),e.EFF(6,"expand_more"),e.k0s()()(),e.j41(7,"mat-menu",null,3)(9,"button",24),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG();return e.Njj(o.setTracking(i,"in_storage"))}),e.j41(10,"div",25)(11,"app-icon",23),e.EFF(12,"inventory"),e.k0s(),e.j41(13,"div",26),e.EFF(14,"In Storage"),e.k0s()()(),e.j41(15,"button",24),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG();return e.Njj(o.setTracking(i,"in_transit"))}),e.j41(16,"div",25)(17,"app-icon",23),e.EFF(18,"trolley"),e.k0s(),e.j41(19,"div",26),e.EFF(20,"In Transit"),e.k0s()()(),e.j41(21,"button",24),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG();return e.Njj(o.setTracking(i,"at_location"))}),e.j41(22,"div",25)(23,"app-icon",23),e.EFF(24,"place"),e.k0s(),e.j41(25,"div",26),e.EFF(26,"At Location"),e.k0s()()()()}if(2&n){const t=a.row,s=e.sdS(8),i=e.XpG();e.R7$(),e.Y8G("matMenuTriggerFor",s)("disabled",i.loading[t.id]),e.R7$(2),e.SpI(" ",e.bMT(4,3,null==t.extension_data?null:t.extension_data.tracking)||"In Storage"," ")}}let Je=(()=>{class n{updateFeatures(){var t=this;return(0,m.A)(function*(){const s=yield t._space.transform(t.selected.extension_data?.location_id);t.selected_feature=t.selected?[{location:s.map_id,content:ee.VT,z_index:99,data:{message:`${s.display_name||s.name} is here`}}]:[]})()}setTracking(t,s){var i=this;return(0,m.A)(function*(){i.loading[t.id]=!0,yield i._state.setTracking(t,s),i.loading[t.id]=!1})()}constructor(t,s){this._state=t,this._org=s,this.asset=this._state.active_product,this.requests=this._state.active_product_requests,this._space=new vn.J(this._org),this.loading={}}level(t){return this._org.levelWithID(t)}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(C),e.rXU(S.yb))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-location-modal"]],decls:24,vars:23,consts:[["empty_state",""],["level_template",""],["tracking_template",""],["tracking_menu","matMenu"],[1,"p-6","relative"],["icon","","matRipple","","mat-dialog-close","",1,"absolute","top-4","right-4"],[1,"font-medium","mb-2"],["appearance","outline",1,"h-[3.5rem]","mb-2"],["matPrefix",""],["matInput","","placeholder","Search..."],[1,"flex","items-center","space-x-4","w-[90vw]","text-sm"],[1,"flex-1","h-[60vh]","w-1/2","border","border-base-200","bg-base-200","overflow-auto"],["empty_message","No requested assets for this product",1,"block","w-full",3,"row_clicked","data","columns","sortable"],[1,"flex-1","h-[60vh]","w-1/2","border","border-base-200","bg-base-200","relative","flex","items-center","justify-center"],["class","absolute top-4 left-4 bg-base-100 px-4 py-2 rounded-3xl border border-base-200",4,"ngIf"],[3,"src","styles","features",4,"ngIf","ngIfElse"],[1,"absolute","top-4","left-4","bg-base-100","px-4","py-2","rounded-3xl","border","border-base-200"],[3,"src","styles","features"],[1,"opacity-30"],[1,"p-4"],[1,"px-4","py-2"],["matRipple","",1,"bg-none","w-full","flex","items-center","px-2","py-1","text-left","rounded",3,"click","matMenuTriggerFor","disabled"],[1,"capitalize","flex-1","min-w-32"],[1,"text-2xl"],["mat-menu-item","",3,"click"],[1,"flex","items-center","space-x-2"],[1,"pr-2"]],template:function(s,i){if(1&s){const o=e.RV6();e.j41(0,"div",4)(1,"button",5)(2,"app-icon"),e.EFF(3,"close"),e.k0s()(),e.j41(4,"h2",6),e.EFF(5),e.nI1(6,"async"),e.nI1(7,"async"),e.k0s(),e.j41(8,"mat-form-field",7)(9,"app-icon",8),e.EFF(10,"search"),e.k0s(),e.nrm(11,"input",9),e.k0s(),e.j41(12,"div",10)(13,"div",11)(14,"simple-table",12),e.bIt("row_clicked",function(c){return e.eBV(o),i.selected=c,e.Njj(i.updateFeatures())}),e.k0s()(),e.j41(15,"div",13),e.DNE(16,jn,2,1,"div",14)(17,Tn,1,8,"interactive-map",15),e.k0s()()(),e.DNE(18,En,2,0,"ng-template",null,0,e.C5r)(20,Rn,2,1,"ng-template",null,1,e.C5r)(22,wn,27,5,"ng-template",null,2,e.C5r)}if(2&s){let o;const r=e.sdS(19),c=e.sdS(21),u=e.sdS(23);e.R7$(5),e.Lme(" ",null==(o=e.bMT(6,8,i.asset))?null:o.name," in use location: ",null==(o=e.bMT(7,10,i.requests))?null:o.length," "),e.R7$(9),e.Y8G("data",i.requests)("columns",e.ziG(18,In,e.eq3(12,xn,c),e.lJ4(14,yn),e.eq3(15,kn,u),e.lJ4(17,Fn)))("sortable",!0),e.R7$(2),e.Y8G("ngIf",i.selected),e.R7$(),e.Y8G("ngIf",i.selected)("ngIfElse",r)}},dependencies:[p.bT,F.rl,F.JW,V.fg,G.kk,G.fb,G.Cp,M.tx,g.r6,N.R,bn.S,ne.O,p.Jj,de]})}return n})();var Mn=l(9675),An=l(2238),Sn=l(5277);const Gn=n=>[n,"list","items"],Dn=()=>[],Nn=n=>[n,"manage","group"],$n=n=>({id:n}),He=n=>[n,"manage","asset"],ye=n=>({group_id:n}),Ln=n=>[n,"manage","asset-bulk"],On=()=>({key:"id",name:"ID"}),Vn=()=>({key:"identifier",name:"Label/Friendly Name"}),Pn=()=>({key:"serial_number",name:"Serial Number"}),Qe=n=>({key:"actions",name:" ",content:n,size:"5.5rem",sortable:!1}),Xn=(n,a,t,s)=>[n,a,t,s],We=n=>[n,"manage","purchase-order"],qn=()=>({key:"purchase_order_number",name:"PO Number"}),Bn=()=>({key:"invoice_number",name:"Invoice Number"}),Yn=n=>({key:"expected_service_start_date",name:"Service Start",content:n}),Un=n=>({key:"expected_service_end_date",name:"Service End",content:n}),zn=(n,a,t,s,i)=>[n,a,t,s,i],Ze=(n,a)=>({id:n,group_id:a});function Jn(n,a){if(1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"async"),e.bVm()),2&n){let t;const s=e.XpG(2);e.R7$(),e.SpI(" ",(null==(t=e.bMT(2,1,s.item))?null:t.description)||"~No Description~"," ")}}function Hn(n,a){1&n&&(e.j41(0,"span",50),e.EFF(1,"No Description"),e.k0s())}function Qn(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",51)(1,"a",52),e.nI1(2,"async"),e.j41(3,"app-icon"),e.EFF(4,"edit"),e.k0s()(),e.j41(5,"button",53),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG(2);return e.Njj(o.removeAsset(i))}),e.j41(6,"app-icon"),e.EFF(7,"delete"),e.k0s()()()}if(2&n){let t;const s=a.row,i=e.XpG(2);e.R7$(),e.Y8G("routerLink",e.eq3(4,He,i.base_route))("queryParams",e.l_i(6,Ze,s.id,null==(t=e.bMT(2,2,i.item))?null:t.id))}}function Wn(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",51)(1,"a",54)(2,"app-icon",26),e.EFF(3,"edit"),e.k0s()(),e.j41(4,"button",55),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG(2);return e.Njj(o.removePurchaseOrder(i))}),e.j41(5,"app-icon",26),e.EFF(6,"delete"),e.k0s()()()}if(2&n){const t=a.row,s=e.XpG(2);e.R7$(),e.Y8G("routerLink",e.eq3(2,We,s.base_route))("queryParams",e.l_i(4,Ze,t.id,null==t?null:t.id))}}function Zn(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"a",12)(3,"div",13)(4,"app-icon",14),e.EFF(5,"arrow_back"),e.k0s(),e.j41(6,"div",15),e.EFF(7,"Back"),e.k0s()()(),e.j41(8,"div",16)(9,"span"),e.EFF(10,"Assets"),e.k0s(),e.j41(11,"span")(12,"app-icon",17),e.EFF(13,"chevron_right"),e.k0s()(),e.j41(14,"span"),e.EFF(15),e.nI1(16,"async"),e.k0s(),e.j41(17,"span")(18,"app-icon",17),e.EFF(19,"chevron_right"),e.k0s()(),e.j41(20,"span"),e.EFF(21),e.nI1(22,"async"),e.k0s()()(),e.j41(23,"div",13)(24,"div",18),e.nrm(25,"image-carousel",19),e.nI1(26,"async"),e.k0s(),e.j41(27,"div",20)(28,"div",21)(29,"div",22),e.EFF(30),e.nI1(31,"async"),e.k0s(),e.j41(32,"div",23)(33,"a",24),e.nI1(34,"async"),e.j41(35,"div",25)(36,"app-icon",26),e.EFF(37,"edit"),e.k0s(),e.j41(38,"div",27),e.EFF(39,"Edit"),e.k0s()()(),e.nrm(40,"div",28),e.j41(41,"button",29)(42,"div",30)(43,"app-icon",26),e.EFF(44,"delete"),e.k0s(),e.j41(45,"div",27),e.EFF(46,"Delete"),e.k0s()()()()(),e.j41(47,"div",31),e.DNE(48,Jn,3,3,"ng-container",32),e.nI1(49,"async"),e.DNE(50,Hn,2,0,"ng-template",null,5,e.C5r),e.k0s(),e.j41(52,"div",33)(53,"div",34)(54,"div",35),e.EFF(55),e.nI1(56,"async"),e.nI1(57,"async"),e.k0s()(),e.j41(58,"div",34)(59,"div",35),e.EFF(60),e.nI1(61,"async"),e.k0s(),e.j41(62,"button",36),e.nI1(63,"async"),e.nI1(64,"async"),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.viewLocations())}),e.EFF(65," View Locations "),e.k0s()()()()(),e.j41(66,"mat-tab-group",37)(67,"mat-tab",38)(68,"div",39)(69,"div",40)(70,"a",41),e.nI1(71,"async"),e.EFF(72," Add Asset "),e.k0s(),e.j41(73,"a",41),e.nI1(74,"async"),e.EFF(75," Bulk Add Asset "),e.k0s()(),e.nrm(76,"simple-table",42),e.DNE(77,Qn,8,9,"ng-template",null,6,e.C5r),e.k0s()(),e.j41(79,"mat-tab",43)(80,"div",39)(81,"h3",44),e.EFF(82,"General"),e.k0s(),e.j41(83,"div",45)(84,"div",46)(85,"label"),e.EFF(86,"Brand"),e.k0s(),e.j41(87,"div"),e.EFF(88),e.nI1(89,"async"),e.k0s()()()()(),e.j41(90,"mat-tab",47)(91,"div",39)(92,"a",48),e.nI1(93,"async"),e.EFF(94," Add Purchase Order "),e.k0s(),e.nrm(95,"simple-table",49),e.nI1(96,"async"),e.DNE(97,Wn,7,7,"ng-template",null,7,e.C5r),e.k0s()()()()}if(2&n){let t,s,i,o,r,c,u,b,x,T,$,E,R,P;const ke=e.sdS(51),Fe=e.sdS(78),Vi=e.sdS(98),y=e.XpG(),mt=e.sdS(5),Pi=e.sdS(7);e.R7$(2),e.Y8G("routerLink",e.eq3(58,Gn,y.base_route)),e.R7$(13),e.JRh(null==(t=e.bMT(16,26,y.item))||null==t.category?null:t.category.name),e.R7$(6),e.JRh(null==(s=e.bMT(22,28,y.item))?null:s.name),e.R7$(4),e.Y8G("images",(null==(i=e.bMT(26,30,y.item))?null:i.images)||e.lJ4(60,Dn)),e.R7$(5),e.SpI(" ",null==(o=e.bMT(31,32,y.item))?null:o.name," "),e.R7$(3),e.Y8G("routerLink",e.eq3(61,Nn,y.base_route))("queryParams",e.eq3(63,$n,null==(r=e.bMT(34,34,y.item))?null:r.id)),e.R7$(9),e.Y8G("content",Pi),e.R7$(6),e.Y8G("ngIf",null==(c=e.bMT(49,36,y.item))?null:c.description)("ngIfElse",ke),e.R7$(7),e.SpI(" Available: ",e.bMT(56,38,y.asset_list).length-(null==(u=e.bMT(57,40,y.requests))?null:u.length)||0," "),e.R7$(5),e.SpI(" In Use: ",(null==(b=e.bMT(61,42,y.requests))?null:b.length)||0," "),e.R7$(2),e.Y8G("disabled",e.bMT(63,44,y.asset_list).length-(null==(x=e.bMT(64,46,y.requests))?null:x.length)!=0),e.R7$(8),e.Y8G("routerLink",e.eq3(65,He,y.base_route))("queryParams",e.eq3(67,ye,null==(T=e.bMT(71,48,y.item))?null:T.id)),e.R7$(3),e.Y8G("routerLink",e.eq3(69,Ln,y.base_route))("queryParams",e.eq3(71,ye,null==($=e.bMT(74,50,y.item))?null:$.id)),e.R7$(3),e.Y8G("data",y.asset_list)("columns",e.ziG(78,Xn,e.lJ4(73,On),e.lJ4(74,Vn),e.lJ4(75,Pn),e.eq3(76,Qe,Fe)))("sortable",!0),e.R7$(12),e.SpI(" ",(null==(E=e.bMT(89,52,y.item))?null:E.brand)||"~None~"," "),e.R7$(4),e.Y8G("routerLink",e.eq3(83,We,y.base_route))("queryParams",e.eq3(85,ye,null==(R=e.bMT(93,54,y.item))?null:R.id)),e.R7$(3),e.Y8G("data",null==(P=e.bMT(96,56,y.item))?null:P.purchase_orders)("columns",e.s1E(95,zn,e.lJ4(87,qn),e.lJ4(88,Bn),e.eq3(89,Yn,mt),e.eq3(91,Un,mt),e.eq3(93,Qe,Vi)))("sortable",!0)}}function Kn(n,a){1&n&&(e.j41(0,"div",56),e.nrm(1,"mat-spinner",57),e.j41(2,"p"),e.EFF(3,"Loading product details..."),e.k0s()()),2&n&&(e.R7$(),e.Y8G("diameter",32))}function es(n,a){1&n&&(e.j41(0,"span",50),e.EFF(1," No Date "),e.k0s())}function ts(n,a){if(1&n&&(e.j41(0,"div",58),e.EFF(1),e.nI1(2,"date"),e.DNE(3,es,2,0,"span",59),e.k0s()),2&n){const t=a.data;e.R7$(),e.SpI(" ",e.i5U(2,2,1e3*t,"mediumDate")," "),e.R7$(2),e.Y8G("ngIf",!t)}}function ns(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",61)(1,"p"),e.EFF(2,"Are you sure you want to permanently delete this product?"),e.k0s(),e.j41(3,"div",62)(4,"button",63),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.closeTooltip())}),e.EFF(5," No "),e.k0s(),e.j41(6,"button",64),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.deleteAsset())}),e.EFF(7," Yes, delete "),e.k0s()()()}}function ss(n,a){1&n&&(e.j41(0,"div",65),e.nrm(1,"mat-spinner",57),e.j41(2,"p"),e.EFF(3,"Deleting product details..."),e.k0s()()),2&n&&(e.R7$(),e.Y8G("diameter",32))}function is(n,a){if(1&n&&e.DNE(0,ns,8,0,"div",60)(1,ss,4,1,"ng-template",null,8,e.C5r),2&n){const t=e.sdS(2),s=e.XpG();e.Y8G("ngIf",!s.deleting)("ngIfElse",t)}}function os(n,a){1&n&&(e.j41(0,"div",66),e.EFF(1,"No purchase orders"),e.k0s())}function as(n,a){1&n&&(e.j41(0,"div",66),e.EFF(1,"No assets"),e.k0s())}let Ke=(()=>{class n extends d.Tv{deleteAsset(){var t=this;return(0,m.A)(function*(){t.deleting=!0,yield t._state.deleteActiveProduct(),t.deleting=!1,t._router.navigate([t._state.base_route,"list","items"]),t.closeTooltip()})()}closeTooltip(){this._tooltip_el?.close()}get code(){return this._org.currency_code}get base_route(){return this._state.base_route}constructor(t,s,i,o,r){super(),this._route=t,this._router=s,this._state=i,this._dialog=o,this._org=r,this.loading=!1,this.deleting=!1,this.item=this._state.active_product,this.asset_list=(0,j.zV)([this.item,this._state.extra_assets]).pipe((0,k.T)(([c,u])=>c?(0,d.Am)([...c.assets,...u.filter(b=>b.type_id===c.id)],"id"):[])),this.requests=this._state.active_product_requests.pipe((0,k.T)(c=>c.filter(u=>u.date<=Date.now()&&(0,Mn.z)(u.date,u.duration).valueOf()>=Date.now())))}viewLocations(){this._dialog.open(Je)}ngOnInit(){this.loading=!0,this.subscription("route.params",this._route.paramMap.subscribe(t=>{t.has("id")&&this._state.setOptions({active_item:t.get("id")})})),this.timeout("no_asset",()=>this._router.navigate([this._state.base_route]),1e3),this._state.active_product.pipe((0,pe.$)(t=>!!t)).subscribe(()=>{this.clearTimeout("no_asset"),this.loading=!1})}removeAsset(t){var s=this;return(0,m.A)(function*(){const i=yield(0,d.GE)({title:"Delete asset",content:"Are you sure you want to delete this asset?",confirm_text:"Delete",icon:{content:"delete"}},s._dialog);if("done"!==i.reason)return;i.loading("Deleting asset..."),yield(0,_.AO)(t.id).toPromise(),yield(0,_.hi)(t.id);const o=yield s._state.active_product.pipe((0,pe.$)()).toPromise();s._state.setOptions({active_item:""}),setTimeout(()=>s._state.setOptions({active_item:o.id}),1e3),i.close()})()}removePurchaseOrder(t){var s=this;return(0,m.A)(function*(){const i=yield(0,d.GE)({title:"Delete purchase order",content:"Are you sure you want to delete this purchase order?",confirm_text:"Delete",icon:{content:"delete"}},s._dialog);if("done"!==i.reason)return;i.loading("Deleting purchase order..."),yield(0,_.ro)(t.id).toPromise();const o=yield s._state.active_product.pipe((0,pe.$)()).toPromise();s._state.setOptions({active_item:""}),setTimeout(()=>s._state.setOptions({active_item:o.id}),1e3),i.close()})()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(h.nX),e.rXU(h.Ix),e.rXU(C),e.rXU(M.bZ),e.rXU(S.yb))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-view"]],viewQuery:function(s,i){if(1&s&&e.GBs(ee.In,5),2&s){let o;e.mGM(o=e.lsd())&&(i._tooltip_el=o.first)}},features:[e.Vt3],decls:12,vars:4,consts:[["loading_state",""],["date_template",""],["delete_tooltip",""],["empty_invoices",""],["empty_items",""],["no_desc_state",""],["action_template",""],["po_action_template",""],["delete_loading",""],["class","h-full w-full flex flex-col",4,"ngIf","ngIfElse"],[1,"h-full","w-full","flex","flex-col"],[1,"flex","items-center","space-x-4","p-2","bg-base-100","border-b","border-base-200"],["btn","","matRipple","",1,"inverse",3,"routerLink"],[1,"flex","items-center"],[1,"text-xl"],[1,"mr-2"],[1,"flex","items-center","space-x-2","font-medium"],[1,"text-2xl"],[1,"bg-base-100","flex-1","w-1/2","h-[22.5rem]"],[3,"images"],[1,"w-[32rem]","h-[22.5rem]","px-4","flex","flex-col"],[1,"w-full","flex","items-center","justify-between","border-b","border-base-200"],[1,"font-medium"],[1,"flex","items-center","text-sm"],["btn","","matRipple","",1,"clear",3,"routerLink","queryParams"],[1,"flex","items-center","text-blue-600","hover:text-blue-900"],[1,"text-lg"],[1,"mr-2","underline"],[1,"w-px","h-4","bg-base-200"],["btn","","matRipple","",1,"clear"],["customTooltip","",1,"flex","items-center","text-blue-600","hover:text-blue-900",3,"content"],[1,"py-4","w-full","flex-1","h-1/2","overflow-auto"],[4,"ngIf","ngIfElse"],[1,"rounded","bg-base-100","shadow","border","border-base-200","w-full","divide-y","divide-base-200"],[1,"flex","items-center","justify-between","p-3"],[1,"pl-2"],["btn","","matRipple","",3,"click","disabled"],[1,"flex-1","h-px"],["label","Assets"],[1,"max-w-[768px]","mx-auto","p-4"],[1,"flex","w-full","items-center","space-x-2","mb-2"],["btn","","matRipple","",1,"flex-1",3,"routerLink","queryParams"],["empty_message","No assets for this product",1,"min-w-[40rem]","block","text-sm",3,"data","columns","sortable"],["label","Specifications"],[1,"p-2"],["data-table","",1,"bg-base-100","border","border-base-200"],[1,"flex","items-center","p-2"],["label","Purchase information"],["btn","","matRipple","",1,"mb-2",3,"routerLink","queryParams"],["asset-purchases","","empty_message","No purchase orders for this product",1,"min-w-[40rem]","block","text-sm",3,"data","columns","sortable"],[1,"opacity-30"],[1,"flex","w-full","items-center","justify-end","p-2"],["icon","","matRipple","","matTooltip","Edit Asset",3,"routerLink","queryParams"],["icon","","matRipple","","matTooltip","Remove Asset",1,"text-error",3,"click"],["icon","","matRipple","",3,"routerLink","queryParams"],["icon","","matRipple","",1,"text-error",3,"click"],[1,"h-full","w-full","flex","flex-col","items-center","justify-center"],[3,"diameter"],[1,"p-4"],["class","opacity-30",4,"ngIf"],["class","p-4 bg-base-100 rounded my-2 text-center w-[18rem]",4,"ngIf","ngIfElse"],[1,"p-4","bg-base-100","rounded","my-2","text-center","w-[18rem]"],[1,"flex","items-center","space-x-2","mt-6"],["btn","","matRipple","",1,"inverse","flex-1","w-24",3,"click"],["btn","","matRipple","",1,"error","flex-1","w-24",3,"click"],[1,"p-4","bg-base-100","rounded","my-2","w-64","h-36","flex","flex-col","items-center","justify-center","space-y-2"],[1,"p-2","opacity-30"]],template:function(s,i){if(1&s&&(e.DNE(0,Zn,99,101,"div",9),e.nI1(1,"async"),e.DNE(2,Kn,4,1,"ng-template",null,0,e.C5r)(4,ts,4,5,"ng-template",null,1,e.C5r)(6,is,3,2,"ng-template",null,2,e.C5r)(8,os,2,0,"ng-template",null,3,e.C5r)(10,as,2,0,"ng-template",null,4,e.C5r)),2&s){const o=e.sdS(3);e.Y8G("ngIf",!i.loading&&e.bMT(1,2,i.item))("ngIfElse",o)}},dependencies:[p.bT,qe.oV,Y.LG,g.r6,N.R,An.I,Sn.H,ne.O,te.mq,te.T8,h.Wk,p.Jj,p.vh],styles:["[_nghost-%COMP%]{height:100%}[data-table][_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2n){background:#0001}label[_ngcontent-%COMP%]{width:10rem;min-width:0}\n\n/*# sourceMappingURL=asset-view.component.ts-angular-inline--116.css.map*/"]})}return n})();var rs=l(4584),ls=l(3574),cs=l(9134);let et=(()=>{class n{transform(t,s=!0){let i=(0,cs.a)({days:Math.floor(t/1440),hours:Math.floor(t/60%24),minutes:Math.floor(t%60)});return s?i.replace(" day","d").replace(" hour","hr").replace(" minute","min"):i}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275pipe=e.EJ8({name:"duration",type:n,pure:!0})}return n})();const ps=n=>({name:n});function ds(n,a){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.j41(2,"span",29),e.EFF(3),e.k0s()()),2&n){const t=a.$implicit;e.R7$(),e.SpI(" ",t.name," "),e.R7$(2),e.SpI(" x",t.quantity," ")}}function us(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",3),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return i.request=null,e.Njj(i.requestChange.emit(i.request))}),e.nrm(1,"div",4),e.j41(2,"div",5),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())}),e.j41(3,"button",6),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return i.request=null,e.Njj(i.requestChange.emit(i.request))}),e.j41(4,"app-icon"),e.EFF(5,"close"),e.k0s()(),e.j41(6,"div",7),e.nrm(7,"a-user-avatar",8),e.j41(8,"div",9)(9,"div",10),e.EFF(10),e.k0s(),e.j41(11,"div",11)(12,"app-icon"),e.EFF(13,"mail"),e.k0s(),e.j41(14,"a",12),e.EFF(15),e.k0s()(),e.j41(16,"div",11)(17,"app-icon"),e.EFF(18,"call"),e.k0s(),e.j41(19,"a",12),e.EFF(20),e.k0s()(),e.j41(21,"div",11)(22,"app-icon"),e.EFF(23,"work_outline"),e.k0s(),e.j41(24,"div"),e.EFF(25),e.k0s()()()(),e.j41(26,"div",13)(27,"div",14)(28,"div",15)(29,"app-icon",16),e.EFF(30,"send"),e.k0s()(),e.j41(31,"div",10),e.EFF(32,"Asset Requested"),e.k0s()(),e.j41(33,"div",17),e.DNE(34,ds,4,2,"div",18),e.k0s(),e.j41(35,"div",19)(36,"div",15)(37,"app-icon",16),e.EFF(38,"event"),e.k0s()(),e.j41(39,"div",10),e.EFF(40,"Date For"),e.k0s()(),e.j41(41,"div",20),e.EFF(42),e.nI1(43,"date"),e.k0s(),e.j41(44,"div",19)(45,"div",15)(46,"app-icon",16),e.EFF(47,"schedule"),e.k0s()(),e.j41(48,"div",10),e.EFF(49,"Period"),e.k0s()(),e.j41(50,"div",20),e.EFF(51),e.nI1(52,"date"),e.nI1(53,"date"),e.nI1(54,"duration"),e.k0s(),e.j41(55,"div",19)(56,"div",15)(57,"app-icon",16),e.EFF(58,"place"),e.k0s()(),e.j41(59,"div",10),e.EFF(60,"Floor"),e.k0s()(),e.j41(61,"div",20),e.EFF(62),e.k0s(),e.j41(63,"div",19)(64,"div",15)(65,"app-icon",16),e.EFF(66,"meeting_room"),e.k0s()(),e.j41(67,"div",10),e.EFF(68,"Room"),e.k0s()(),e.j41(69,"div",20),e.EFF(70),e.k0s(),e.j41(71,"div",21)(72,"button",22)(73,"app-icon",23),e.EFF(74),e.k0s(),e.j41(75,"div",24),e.EFF(76),e.k0s(),e.j41(77,"app-icon",25),e.EFF(78,"expand_more"),e.k0s()(),e.j41(79,"mat-menu",26,0)(81,"button",27),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.setStatus("approved"))}),e.EFF(82," Approve "),e.k0s(),e.j41(83,"button",27),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.setStatus("declined"))}),e.EFF(84," Decline "),e.k0s()(),e.j41(85,"button",28)(86,"div",24),e.EFF(87),e.nI1(88,"splitjoin"),e.k0s(),e.j41(89,"app-icon",25),e.EFF(90,"expand_more"),e.k0s()(),e.j41(91,"mat-menu",26,1)(93,"button",27),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.setTracking("in_storage"))}),e.EFF(94," In Storage "),e.k0s(),e.j41(95,"button",27),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.setTracking("in_transit"))}),e.EFF(96," In Transit "),e.k0s(),e.j41(97,"button",27),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.setTracking("at_location"))}),e.EFF(98," At Location "),e.k0s()()()()()()}if(2&n){let t;const s=e.sdS(80),i=e.sdS(92),o=e.XpG();e.R7$(7),e.Y8G("user",e.eq3(46,ps,o.request.user_name)),e.R7$(3),e.JRh(o.request.user_name),e.R7$(4),e.Y8G("href","mailto:"+o.request.user_email,e.B4B),e.R7$(),e.SpI(" ",o.request.user_email||"staff@place.tech"," "),e.R7$(4),e.Y8G("href","tel:"+o.request.user_phone,e.B4B),e.R7$(),e.SpI(" ",o.request.user_phone||"04 1234 5678"," "),e.R7$(5),e.JRh(o.request.user_company||"PlaceOS"),e.R7$(9),e.Y8G("ngForOf",o.items),e.R7$(8),e.SpI(" ",e.i5U(43,33,o.request.date,"EEEE, MMMM d, y")," "),e.R7$(9),e.E5c(" ",e.i5U(52,36,o.request.date,o.time_format)," \u2013 ",e.i5U(53,39,o.request.date+60*o.request.duration*1e3,o.time_format)," (",e.bMT(54,42,o.request.duration),") "),e.R7$(11),e.SpI(" ",(null==(t=o.level(o.request.zones))?null:t.display_name)||"N/A"," "),e.R7$(8),e.SpI(" ",o.request.description," "),e.R7$(2),e.AVh("bg-success","approved"===o.request.status)("bg-error","declined"===o.request.status)("bg-warning","tentative"===o.request.status),e.Y8G("matMenuTriggerFor",s)("disabled",o.loading),e.R7$(),e.AVh("text-green-600","approved"===o.request.status)("text-red-600","declined"===o.request.status)("text-yellow-400","tentative"===o.request.status),e.R7$(),e.SpI(" ","approved"===o.request.status?"done":"declined"===o.request.status?"close":"warning"," "),e.R7$(2),e.SpI(" ",o.request.status," "),e.R7$(9),e.Y8G("matMenuTriggerFor",i)("disabled",o.loading),e.R7$(2),e.SpI(" ",e.bMT(88,44,null==o.request.extension_data?null:o.request.extension_data.tracking)||"In Storage"," ")}}let tt=(()=>{class n{get items(){return this.request?.extension_data?.request?.items||[]}get time_format(){return this._settings.time_format}constructor(t,s,i){this._state=t,this._org=s,this._settings=i,this.requestChange=new e.bkB,this.loading=!1}level(t){return this._org.levelWithID(t)}setStatus(t){var s=this;return(0,m.A)(function*(){s.loading=!0,yield s._state.setStatus(s.request,t),s.request.status=t,s.loading=!1})()}setTracking(t){var s=this;return(0,m.A)(function*(){s.loading=!0,yield s._state.setTracking(s.request,t),s.request.extension_data.tracking=t,s.loading=!1})()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(C),e.rXU(S.yb),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-request-details"]],inputs:{request:"request"},outputs:{requestChange:"requestChange"},decls:1,vars:1,consts:[["menu","matMenu"],["tracking_menu","matMenu"],["class","fixed inset-0 z-50",3,"click",4,"ngIf"],[1,"fixed","inset-0","z-50",3,"click"],[1,"absolute","inset-0","bg-black","opacity-50"],[1,"absolute","inset-y-0","right-0","bg-base-100","w-[480px]",3,"click"],["icon","","matRipple","",1,"absolute","top-1","right-1",3,"click"],[1,"border-b","border-base-200","px-2","py-4","flex","space-x-4"],[1,"text-xl",3,"user"],["details","",1,"space-y-1"],[1,"font-medium"],[1,"flex","items-center","text-sm","space-x-2"],[1,"underline",3,"href"],[1,"px-3","py-4","relative"],[1,"flex","items-center","space-x-4"],[1,"h-6","w-6","rounded-full","text-secondary","bg-base-200","flex","items-center","justify-center"],[1,"text-sm"],[1,"pl-10","flex","flex-col","mt-1"],[4,"ngFor","ngForOf"],[1,"flex","items-center","space-x-4","mt-4"],[1,"pl-10","mt-1"],[1,"absolute","top-4","right-4","text-sm"],["matRipple","",1,"rounded-3xl","!bg-opacity-20","flex","items-center","px-2","py-1","w-full","text-left","space-x-2","mb-4",3,"matMenuTriggerFor","disabled"],[1,"text-xl"],[1,"capitalize","flex-1"],[1,"text-2xl"],[1,"w-36"],["mat-menu-item","",3,"click"],["matRipple","",1,"bg-none","w-full","flex","items-center","px-2","py-1","text-left","border","border-base-200","rounded-none",3,"matMenuTriggerFor","disabled"],[1,"text-xs","bg-success","text-success-content","px-2","py-1","rounded"]],template:function(s,i){1&s&&e.DNE(0,us,99,48,"div",2),2&s&&e.Y8G("ngIf",i.request)},dependencies:[p.Sq,p.bT,G.kk,G.fb,G.Cp,g.r6,N.R,ls.a,p.vh,de,et]})}return n})();const ms=n=>({key:"user_name",name:"Requester",content:n}),_s=n=>({key:"date",name:"Deliver At",content:n,size:"8rem"}),fs=n=>({key:"assets",name:"Asset",content:n,sortable:!1}),hs=n=>({key:"zones",name:"Floor",content:n,size:"9rem",sortable:!1}),gs=()=>({key:"description",name:"Location"}),vs=n=>({key:"status",name:"Approval",content:n,size:"11rem"}),bs=n=>({key:"tracking",name:"Tracking",content:n,size:"12rem",sortable:!1}),xs=(n,a,t,s,i,o,r)=>[n,a,t,s,i,o,r],ys=()=>[];function ks(n,a){if(1&n&&(e.j41(0,"div",16)(1,"div"),e.EFF(2),e.k0s(),e.j41(3,"div",17),e.EFF(4),e.nI1(5,"date"),e.nI1(6,"date"),e.k0s()()),2&n){const t=a.row,s=e.XpG();e.R7$(2),e.JRh(t.user_name),e.R7$(2),e.Lme(" ",e.i5U(5,3,s.date(t),"MMM d, "+s.time_format)," \u2013 ",e.i5U(6,6,s.date(t)+60*t.duration*1e3,"MMM d, "+s.time_format)," ")}}function Fs(n,a){if(1&n&&(e.j41(0,"div")(1,"span",20),e.EFF(2),e.k0s(),e.EFF(3),e.k0s()),2&n){const t=a.$implicit;e.R7$(2),e.SpI(" ",t.quantity||1,"\xd7 "),e.R7$(),e.SpI(" ",t.name," ")}}function Is(n,a){if(1&n&&(e.j41(0,"div",18),e.DNE(1,Fs,4,2,"div",19),e.k0s()),2&n){const t=a.row;e.R7$(),e.Y8G("ngForOf",(null==t.extension_data||null==t.extension_data.request?null:t.extension_data.request.items)||e.lJ4(1,ys))}}function Cs(n,a){if(1&n&&(e.j41(0,"div",21),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&n){const t=a.row,s=e.XpG();e.R7$(),e.SpI(" ",e.i5U(2,1,t.date+60*(null==t.extension_data||null==t.extension_data.request?null:t.extension_data.request.deliver_offset)*1e3+24*(null==t.extension_data||null==t.extension_data.request?null:t.extension_data.request.deliver_day_offset)*60*60*1e3,"MMM d, "+s.time_format)," ")}}function js(n,a){1&n&&(e.j41(0,"span",23),e.EFF(1,"N/A"),e.k0s())}function Ts(n,a){if(1&n&&(e.j41(0,"div",21),e.EFF(1),e.DNE(2,js,2,0,"span",22),e.k0s()),2&n){let t;const s=a.data,i=e.XpG();e.R7$(),e.SpI(" ",null==(t=i.level(s))?null:t.display_name," "),e.R7$(),e.Y8G("ngIf",!i.level(s))}}function Es(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",24)(1,"button",25),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())}),e.j41(2,"app-icon",26),e.EFF(3),e.k0s(),e.j41(4,"div",27),e.EFF(5),e.k0s(),e.j41(6,"app-icon",28),e.EFF(7,"expand_more"),e.k0s()()(),e.j41(8,"mat-menu",null,6)(10,"button",29),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG();return e.Njj(o.setStatus(i,"approved"))}),e.j41(11,"div",30)(12,"app-icon",28),e.EFF(13,"event_available"),e.k0s(),e.j41(14,"div",31),e.EFF(15,"Approve Asset Request"),e.k0s()()(),e.j41(16,"button",29),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG();return e.Njj(o.setStatus(i,"declined"))}),e.j41(17,"div",30)(18,"app-icon",28),e.EFF(19,"event_busy"),e.k0s(),e.j41(20,"div",31),e.EFF(21,"Decline Asset Request"),e.k0s()()()()}if(2&n){const t=a.row,s=e.sdS(9),i=e.XpG();e.R7$(),e.AVh("bg-success","approved"===t.status)("bg-error","declined"===t.status)("bg-warning","tentative"===t.status)("text-success-content","approved"===t.status)("text-error-content","declined"===t.status)("text-warning-content","tentative"===t.status),e.Y8G("matMenuTriggerFor",s)("disabled",i.loading[t.id]),e.R7$(2),e.SpI(" ","approved"===t.status?"done":"declined"===t.status?"close":"warning"," "),e.R7$(2),e.JRh(t.status)}}function Rs(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",24)(1,"button",32),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())}),e.j41(2,"div",33),e.EFF(3),e.nI1(4,"splitjoin"),e.k0s(),e.j41(5,"app-icon",28),e.EFF(6,"expand_more"),e.k0s()()(),e.j41(7,"mat-menu",null,7)(9,"button",29),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG();return e.Njj(o.setTracking(i,"in_storage"))}),e.j41(10,"div",30)(11,"app-icon",28),e.EFF(12,"inventory"),e.k0s(),e.j41(13,"div",31),e.EFF(14,"In Storage"),e.k0s()()(),e.j41(15,"button",29),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG();return e.Njj(o.setTracking(i,"in_transit"))}),e.j41(16,"div",30)(17,"app-icon",28),e.EFF(18,"trolley"),e.k0s(),e.j41(19,"div",31),e.EFF(20,"In Transit"),e.k0s()()(),e.j41(21,"button",29),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG();return e.Njj(o.setTracking(i,"at_location"))}),e.j41(22,"div",30)(23,"app-icon",28),e.EFF(24,"place"),e.k0s(),e.j41(25,"div",31),e.EFF(26,"At Location"),e.k0s()()()()}if(2&n){const t=a.row,s=e.sdS(8),i=e.XpG();e.R7$(),e.Y8G("matMenuTriggerFor",s)("disabled",i.loading[t.id]),e.R7$(2),e.SpI(" ",e.bMT(4,3,null==t.extension_data?null:t.extension_data.tracking)||"In Storage"," ")}}let nt=(()=>{class n extends d.Tv{date(t){return t.all_day?(0,Ve.o)(t.date).valueOf():t.date}setStatus(t,s){var i=this;return(0,m.A)(function*(){i.loading[t.id]=!0,yield i._state.setStatus(t,s),i.loading[t.id]=!1})()}setTracking(t,s){var i=this;return(0,m.A)(function*(){i.loading[t.id]=!0,yield i._state.setTracking(t,s),i.loading[t.id]=!1})()}get time_format(){return this._settings.time_format}constructor(t,s,i){super(),this._state=t,this._org=s,this._settings=i,this.requests=this._state.filtered_requests,this.filters=this._state.options,this.loading={},this.setDate=o=>this._state.setOptions({date:o})}level(t){return this._org.levelWithID(t)}ngOnInit(){this.subscription("polling",this._state.startPolling())}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(C),e.rXU(S.yb),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-asset-request-list"]],features:[e.Vt3],decls:26,vars:40,consts:[["user_template",""],["assets_template",""],["date_template",""],["level_template",""],["approval_template",""],["tracking_template",""],["menu","matMenu"],["tracking_menu","matMenu"],[1,"relative","w-full","h-[calc(100%-1rem)]","flex","flex-col"],[1,"flex","items-center","justify-between"],[1,"opacity-60","text-sm","p-4"],[3,"dateChange","date"],[1,"w-full","overflow-auto","h-1/2","flex-1","pt-2"],["asset-requests","",1,"block","min-w-[82rem]","text-sm",3,"row_clicked","data","filter","columns","empty_message","sortable"],[1,"w-full","h-20"],[3,"requestChange","request"],[1,"flex","flex-col","px-4","py-2","text-left"],[1,"text-xs","opacity-30"],[1,"flex","flex-col","p-4"],[4,"ngFor","ngForOf"],[1,"font-mono","text-sm"],[1,"p-4"],["class","opacity-30",4,"ngIf"],[1,"opacity-30"],[1,"px-4","py-2"],["matRipple","",1,"rounded-3xl","!bg-opacity-20","flex","items-center","px-2","py-1","w-full","text-left","space-x-2",3,"click","matMenuTriggerFor","disabled"],[1,"text-xl"],[1,"capitalize","flex-1"],[1,"text-2xl"],["mat-menu-item","",3,"click"],[1,"flex","items-center","space-x-2"],[1,"pr-2"],["matRipple","",1,"bg-none","w-full","flex","items-center","px-2","py-1","text-left","rounded",3,"click","matMenuTriggerFor","disabled"],[1,"capitalize","flex-1","min-w-32"]],template:function(s,i){if(1&s){const o=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10),e.EFF(3),e.nI1(4,"async"),e.nI1(5,"async"),e.k0s(),e.j41(6,"date-options",11),e.nI1(7,"async"),e.bIt("dateChange",function(c){return e.eBV(o),e.Njj(i.setDate(c))}),e.k0s()(),e.j41(8,"div",12)(9,"simple-table",13),e.nI1(10,"async"),e.nI1(11,"async"),e.bIt("row_clicked",function(c){return e.eBV(o),e.Njj(i.request=c)}),e.k0s(),e.nrm(12,"div",14),e.k0s()(),e.DNE(13,ks,7,9,"ng-template",null,0,e.C5r)(15,Is,2,2,"ng-template",null,1,e.C5r)(17,Cs,3,4,"ng-template",null,2,e.C5r)(19,Ts,3,2,"ng-template",null,3,e.C5r)(21,Es,22,16,"ng-template",null,4,e.C5r)(23,Rs,27,5,"ng-template",null,5,e.C5r),e.j41(25,"asset-request-details",15),e.mxI("requestChange",function(c){return e.eBV(o),e.DH7(i.request,c)||(i.request=c),e.Njj(c)}),e.k0s()}if(2&s){let o,r,c,u;const b=e.sdS(14),x=e.sdS(16),T=e.sdS(18),$=e.sdS(20),E=e.sdS(22),R=e.sdS(24);e.R7$(3),e.Lme(" ",null==(o=e.bMT(4,9,i.requests))?null:o.length," asset request","1"===(null==(o=e.bMT(5,11,i.requests))?null:o.length)?"":"s"," "),e.R7$(3),e.Y8G("date",null==(r=e.bMT(7,13,i.filters))?null:r.date),e.R7$(3),e.Y8G("data",i.requests)("filter",null==(c=e.bMT(10,15,i.filters))?null:c.search)("columns",e.sGs(32,xs,e.eq3(19,ms,b),e.eq3(21,_s,T),e.eq3(23,fs,x),e.eq3(25,hs,$),e.lJ4(27,gs),e.eq3(28,vs,E),e.eq3(30,bs,R)))("empty_message",null!=(u=e.bMT(11,17,i.filters))&&u.search?"No matching asset requests":"There are no asset requests for the currently selected date.")("sortable",!0),e.R7$(16),e.R50("request",i.request)}},dependencies:[p.Sq,p.bT,rs.o,G.kk,G.fb,G.Cp,g.r6,N.R,ne.O,tt,p.Jj,p.vh,de],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%}\n\n/*# sourceMappingURL=asset-request-list.component.ts-angular-inline--117.css.map*/"]})}return n})();var ws=l(3208);const st=(n,a)=>[n,"view",a],Ms=n=>[n,"manage","group"];function As(n,a){if(1&n&&e.nrm(0,"img",22),2&n){const t=e.XpG().$implicit;e.Y8G("source",t.images[0])}}function Ss(n,a){1&n&&e.nrm(0,"img",23)}function Gs(n,a){if(1&n&&(e.j41(0,"div",24),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" Assets: ",t.asset_count||(null==t.assets?null:t.assets.length)||0," ")}}function Ds(n,a){if(1&n&&(e.j41(0,"a",16)(1,"div",17),e.DNE(2,As,1,1,"img",18)(3,Ss,1,0,"ng-template",null,1,e.C5r),e.k0s(),e.j41(5,"div",19)(6,"div",20),e.EFF(7),e.k0s(),e.DNE(8,Gs,2,1,"div",21),e.k0s()()),2&n){const t=a.$implicit,s=e.sdS(4),i=e.XpG(5);e.Y8G("routerLink",e.l_i(5,st,i.base_route,t.id)),e.R7$(2),e.Y8G("ngIf",null==t.images?null:t.images.length)("ngIfElse",s),e.R7$(5),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngIf",t.asset_count||(null==t.assets?null:t.assets.length))}}function Ns(n,a){if(1&n&&(e.qex(0),e.j41(1,"div",14),e.DNE(2,Ds,9,8,"a",15),e.nI1(3,"async"),e.k0s(),e.bVm()),2&n){const t=e.XpG(2).$implicit,s=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",e.bMT(3,1,s.products)[t.id])}}function $s(n,a){if(1&n&&e.nrm(0,"img",22),2&n){const t=e.XpG().$implicit;e.Y8G("source",t.images[0])}}function Ls(n,a){1&n&&e.nrm(0,"img",30)}function Os(n,a){if(1&n&&(e.j41(0,"div",24),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" Assets: ",t.asset_count||(null==t.assets?null:t.assets.length)||0," ")}}function Vs(n,a){if(1&n&&(e.j41(0,"a",27)(1,"div",28),e.DNE(2,$s,1,1,"img",18)(3,Ls,1,0,"ng-template",null,1,e.C5r),e.k0s(),e.j41(5,"div",29)(6,"div",20),e.EFF(7),e.k0s(),e.DNE(8,Os,2,1,"div",21),e.k0s()()),2&n){const t=a.$implicit,s=e.sdS(4),i=e.XpG(5);e.Y8G("routerLink",e.l_i(5,st,i.base_route,t.id)),e.R7$(2),e.Y8G("ngIf",null==t.images?null:t.images.length)("ngIfElse",s),e.R7$(5),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngIf",t.asset_count||(null==t.assets?null:t.assets.length))}}function Ps(n,a){if(1&n&&(e.qex(0),e.j41(1,"div",25),e.DNE(2,Vs,9,8,"a",26),e.nI1(3,"async"),e.k0s(),e.bVm()),2&n){const t=e.XpG(2).$implicit,s=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",e.bMT(3,1,s.products)[t.id])}}function Xs(n,a){if(1&n&&(e.j41(0,"div",7)(1,"h2",8)(2,"span",9),e.EFF(3),e.k0s(),e.j41(4,"span",10),e.EFF(5),e.nI1(6,"async"),e.nI1(7,"async"),e.k0s()(),e.qex(8,11),e.nI1(9,"async"),e.DNE(10,Ns,4,3,"ng-container",12)(11,Ps,4,3,"ng-container",13),e.bVm(),e.k0s()),2&n){let t;const s=e.XpG().$implicit,i=e.XpG(2);e.R7$(3),e.JRh(null==s?null:s.name),e.R7$(2),e.Lme(" (",null==(t=e.bMT(6,5,i.products)[s.id])?null:t.length," item",1===(null==(t=e.bMT(7,7,i.products)[s.id])?null:t.length)?"":"s",") "),e.R7$(3),e.Y8G("ngSwitch",e.bMT(9,9,i.options).view),e.R7$(2),e.Y8G("ngSwitchCase","list")}}function qs(n,a){if(1&n&&(e.qex(0),e.DNE(1,Xs,12,11,"div",6),e.nI1(2,"async"),e.bVm()),2&n){let t;const s=a.$implicit,i=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==(t=e.bMT(2,1,i.products)[s.id])?null:t.length)}}function Bs(n,a){if(1&n&&(e.j41(0,"div",4),e.DNE(1,qs,3,3,"ng-container",5),e.nI1(2,"async"),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",e.bMT(2,1,t.categories))}}function Ys(n,a){1&n&&e.nrm(0,"mat-progress-bar",31)}function Us(n,a){if(1&n&&(e.j41(0,"a",35),e.EFF(1," Create New Product "),e.k0s()),2&n){const t=e.XpG(2);e.Y8G("routerLink",e.eq3(1,Ms,t.base_route))}}function zs(n,a){if(1&n&&(e.j41(0,"div",32)(1,"p",33),e.EFF(2),e.nI1(3,"async"),e.k0s(),e.DNE(4,Us,2,3,"a",34),e.nI1(5,"async"),e.k0s()),2&n){let t,s;const i=e.XpG();e.R7$(2),e.SpI(" ",null!=(t=e.bMT(3,2,i.options))&&t.search?"No matching assets found":"No assets available. Create a new asset with the button below"," "),e.R7$(2),e.Y8G("ngIf",!(null!=(s=e.bMT(5,4,i.options))&&s.search))}}let it=(()=>{class n{get base_route(){return this._state.base_route}constructor(t){this._state=t,this.loading=this._state.loading,this.options=this._state.options,this.categories=this._state.categories,this.products=this._state.product_mapping}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(C))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-asset-item-list"]],decls:7,vars:9,consts:[["empty_state",""],["placeholder",""],["class","overflow-auto pb-2 w-full h-full",4,"ngIf","ngIfElse"],["mode","indeterminate",4,"ngIf"],[1,"overflow-auto","pb-2","w-full","h-full"],[4,"ngFor","ngForOf"],["class","",4,"ngIf"],[1,""],[1,"py-2"],[1,"font-medium"],[1,"text-xs"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"rounded","overflow-hidden","bg-base-100","border","border-base-200","divide-y","divide-base-200"],["matRipple","","class","flex items-center text-left space-x-4 p-4 border border-base-200 hover:border-indigo-400 rounded",3,"routerLink",4,"ngFor","ngForOf"],["matRipple","",1,"flex","items-center","text-left","space-x-4","p-4","border","border-base-200","hover:border-indigo-400","rounded",3,"routerLink"],[1,"h-12","w-12","flex","items-center","justify-center","border","border-base-200","bg-base-200","overflow-hidden"],["auth","","class","min-w-full min-h-full object-cover",3,"source",4,"ngIf","ngIfElse"],[1,"flex-1","flex","flex-col","justify-center"],[1,"truncate"],["class","text-xs opacity-60",4,"ngIf"],["auth","",1,"min-w-full","min-h-full","object-cover",3,"source"],["src","assets/icons/asset-placeholder.svg",1,"m-auto"],[1,"text-xs","opacity-60"],[1,"flex","items-center","overflow-hidden","flex-wrap","-mx-2","w-full"],["matRipple","","class","bg-base-100 rounded shadow w-40 h-44 text-left m-2 border border-base-200 hover:border-indigo-400 flex flex-col",3,"routerLink",4,"ngFor","ngForOf"],["matRipple","",1,"bg-base-100","rounded","shadow","w-40","h-44","text-left","m-2","border","border-base-200","hover:border-indigo-400","flex","flex-col",3,"routerLink"],[1,"w-full","h-32","flex","items-center","justify-center","bg-base-200","overflow-hidden"],[1,"border-t","border-base-200","w-full","px-3","py-1","flex-1","flex","flex-col","justify-center"],["src","assets/icons/asset-placeholder.svg",1,"m-auto","w-16"],["mode","indeterminate"],[1,"flex","flex-col","items-center","justify-center","p-8","space-y-4","h-full","w-full"],[1,"opacity-40"],["btn","","matRipple","",3,"routerLink",4,"ngIf"],["btn","","matRipple","",3,"routerLink"]],template:function(s,i){if(1&s&&(e.DNE(0,Bs,3,3,"div",2),e.nI1(1,"async"),e.nI1(2,"async"),e.DNE(3,Ys,1,0,"mat-progress-bar",3),e.nI1(4,"async"),e.DNE(5,zs,6,6,"ng-template",null,0,e.C5r)),2&s){let o;const r=e.sdS(6);e.Y8G("ngIf",(null==(o=e.bMT(1,3,i.categories))?null:o.length)&&(null==(o=e.bMT(2,5,i.products))?null:o._count))("ngIfElse",r),e.R7$(3),e.Y8G("ngIf",e.bMT(4,7,i.loading))}},dependencies:[p.Sq,p.bT,p.ux,p.e1,p.fG,ue.HM,g.r6,ws.U,h.Wk,p.Jj],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}\n\n/*# sourceMappingURL=asset-item-list.component.ts-angular-inline--118.css.map*/"]})}return n})();var Js=l(4938),Hs=l(9608);const Qs=(n,a)=>[n,"view",a],Ws=n=>[n,"list","purchase-orders"],Zs=()=>[],Ks=()=>({key:"name",name:"Name"}),ei=()=>({key:"identifier",name:"Label/Friendly Name"}),ti=()=>({key:"serial_number",name:"Serial Number"}),ni=n=>({key:"actions",name:" ",content:n}),si=(n,a,t,s)=>[n,a,t,s];function ii(n,a){if(1&n&&(e.j41(0,"h3",30),e.EFF(1),e.nI1(2,"async"),e.k0s()),2&n){let t;const s=e.XpG(2);e.R7$(),e.SpI(" Associated Assets (",(null==(t=e.bMT(2,1,s.asset_list))?null:t.length)||"0",") ")}}function oi(n,a){if(1&n&&(e.nrm(0,"simple-table",31),e.nI1(1,"async")),2&n){const t=e.XpG(2);e.Y8G("data",e.bMT(1,2,t.asset_list)||e.lJ4(4,Zs))("columns",e.ziG(10,si,e.lJ4(5,Ks),e.lJ4(6,ei),e.lJ4(7,ti),e.eq3(8,ni,t.action_template)))}}function ai(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",3)(1,"header",4)(2,"h2",5),e.EFF(3),e.k0s()(),e.j41(4,"main",6)(5,"div",7)(6,"label",8),e.EFF(7," Order Number"),e.j41(8,"span"),e.EFF(9,"*"),e.k0s()(),e.j41(10,"mat-form-field",9),e.nrm(11,"input",10),e.j41(12,"mat-error"),e.EFF(13,"Order number is required"),e.k0s()()(),e.j41(14,"div",7)(15,"label",11),e.EFF(16," Invoice Number "),e.k0s(),e.j41(17,"mat-form-field",9),e.nrm(18,"input",12),e.j41(19,"mat-error"),e.EFF(20,"Invoice number is required"),e.k0s()()(),e.j41(21,"div",13)(22,"div",14)(23,"label",15),e.EFF(24," Purchase Date "),e.k0s(),e.nrm(25,"a-date-field",16),e.k0s(),e.j41(26,"div",14)(27,"label",17),e.EFF(28," Purchase Price "),e.k0s(),e.j41(29,"mat-form-field",18)(30,"div",19),e.EFF(31,"$"),e.k0s(),e.nrm(32,"input",20),e.k0s()()(),e.j41(33,"div",13)(34,"div",7)(35,"label",21),e.EFF(36," Expected Service Start Date "),e.k0s(),e.nrm(37,"a-date-field",22),e.k0s(),e.j41(38,"div",7)(39,"label",23),e.EFF(40," Expected Service End Date "),e.k0s(),e.nrm(41,"a-date-field",24),e.k0s()(),e.DNE(42,ii,3,3,"h3",25)(43,oi,2,15,"simple-table",26),e.k0s(),e.j41(44,"footer",27)(45,"a",28),e.EFF(46," Cancel "),e.k0s(),e.j41(47,"button",29),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.save())}),e.EFF(48," Save "),e.k0s()()()}if(2&n){const t=e.XpG();e.R7$(3),e.SpI(" ",t.form.value.id?"Edit":"Add"," Purchase Order "),e.R7$(),e.Y8G("formGroup",t.form),e.R7$(21),e.Y8G("from",t.from),e.R7$(7),e.Y8G("from",t.from),e.R7$(5),e.Y8G("from",t.from),e.R7$(5),e.Y8G("ngIf",null==t.item?null:t.item.id),e.R7$(),e.Y8G("ngIf",null==t.item?null:t.item.id),e.R7$(2),e.Y8G("routerLink",t.product_id?e.l_i(8,Qs,t.base_route,t.product_id):e.eq3(11,Ws,t.base_route))}}function ri(n,a){if(1&n&&(e.j41(0,"div",32),e.nrm(1,"mat-spinner",33),e.j41(2,"p"),e.EFF(3),e.k0s()()),2&n){const t=e.XpG();e.R7$(),e.Y8G("diameter",32),e.R7$(2),e.JRh(t.loading)}}let ot=(()=>{class n extends d.Tv{get base_route(){return this._state.base_route}constructor(t,s,i,o){var r;super(),r=this,this._state=t,this._route=s,this._router=i,this._org=o,this.form=(0,_.fF)(),this.loading="",this._id=new L.t(""),this.from=(0,Js.e)(Date.now(),-5),this.asset_list=(0,j.zV)([this._id,this._org.active_building]).pipe((0,be.p)(([c,u])=>!!c&&!!u),(0,A.n)(([c])=>(0,_._B)({order_id:c})),(0,A.n)(function(){var c=(0,m.A)(function*(u){const b=yield(0,_.FK)({zone_id:r._org.building.id,limit:500}).toPromise();return u.map(x=>({...x,name:b.find(T=>T.id===x.asset_type_id)?.name||x.id}))});return function(u){return c.apply(this,arguments)}}()),(0,O.t)(1))}ngOnInit(){var t=this;this.subscription("route.query",this._route.queryParamMap.subscribe(function(){var s=(0,m.A)(function*(i){if(i.get("id")){t.loading="Loading purchase order details...";const o=yield(0,_.N6)(i.get("id")).toPromise().catch(()=>null);o||((0,d.UG)("Unable to load purchase order details."),t._router.navigate([t.base_route])),t.form.patchValue({...o,order_number:o.purchase_order_number,purchase_date:1e3*o.purchase_date,expected_service_end_date:1e3*o.expected_service_end_date,expected_service_start_date:1e3*o.expected_service_start_date}),t.item=o,t._id.next(o.id),t.loading=""}i.get("group_id")&&(t.product_id=i.get("group_id"))});return function(i){return s.apply(this,arguments)}}())),this._state.setOptions({active_item:null})}save(){var t=this;return(0,m.A)(function*(){if(!t.form.valid)return;t.loading="Saving Product...";const s=t.form.value;s.purchase_date=(0,W._)(s.purchase_date)||null,s.expected_service_start_date=(0,W._)(s.expected_service_start_date)||t.item?.expected_service_start_date||null,s.expected_service_end_date=(0,W._)(s.expected_service_end_date)||t.item?.expected_service_end_date||null,yield(0,_.Dt)(s).toPromise().catch(o=>{throw t.loading="",(0,d.UG)(`Error saving purchase order.: ${o.message}`),o}),t.form.reset(),(0,d.VX)("Successfully saved purchase order."),t._state.postChange(),t._router.navigate(t.product_id?[t.base_route,"view",t.product_id]:[t.base_route,"list","purchase-orders"]),t.loading=""})()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(C),e.rXU(h.nX),e.rXU(h.Ix),e.rXU(S.yb))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-purchase-order-form"]],features:[e.Vt3],decls:4,vars:2,consts:[["load_state",""],[1,"absolute","inset-0","bg-base-100"],["class","h-full max-w-[32rem] mx-auto flex flex-col",4,"ngIf","ngIfElse"],[1,"h-full","max-w-[32rem]","mx-auto","flex","flex-col"],[1,"p-4"],[1,"text-center","text-xl","font-medium"],[1,"flex-1","h-1/2","overflow-auto",3,"formGroup"],[1,"flex","flex-col","space-y-2"],["for","order-number"],["appearance","outline"],["matInput","","name","order-number","placeholder","Order Number","formControlName","order_number"],["for","invoice-number"],["matInput","","name","invoice-number","placeholder","Invoice Number","formControlName","invoice_number"],[1,"flex","space-x-2"],[1,"flex-1","flex","flex-col","space-y-2"],["for","purchase-date"],["name","purchase-date","formControlName","purchase_date",3,"from"],["for","unit-price"],["appearance","outline",1,"w-full"],["matPrefix",""],["matInput","","name","unit-price","formControlName","unit_price",3,"from"],["for","depreciation-start-date"],["name","depreciation-start-date","formControlName","expected_service_start_date",3,"from"],["for","depreciation-end-date"],["name","depreciation-end-date","formControlName","expected_service_end_date"],["class","font-medium mb-2",4,"ngIf"],["class","w-full block text-sm","empty_message","No assets for this purchase order",3,"data","columns",4,"ngIf"],[1,"flex","justify-end","space-x-2","p-2","border-t","border-base-200"],["btn","","matRipple","",1,"w-32","inverse",3,"routerLink"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"font-medium","mb-2"],["empty_message","No assets for this purchase order",1,"w-full","block","text-sm",3,"data","columns"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]],template:function(s,i){if(1&s&&(e.j41(0,"div",1),e.DNE(1,ai,49,13,"div",2),e.k0s(),e.DNE(2,ri,4,2,"ng-template",null,0,e.C5r)),2&s){const o=e.sdS(3);e.R7$(),e.Y8G("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[p.bT,F.rl,F.TL,F.JW,V.fg,Y.LG,g.r6,f.me,f.BC,f.cb,f.j4,f.JD,Hs.G,ne.O,h.Wk,p.Jj]})}return n})();const li=()=>({standalone:!0}),ci=(n,a)=>[n,"view",a],pi=n=>[n];function di(n,a){if(1&n&&(e.j41(0,"mat-option",24),e.EFF(1),e.k0s()),2&n){const t=a.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.purchase_order_number||t.invoice_number," ")}}function ui(n,a){1&n&&(e.j41(0,"mat-option",25),e.EFF(1," No purchase orders "),e.k0s()),2&n&&e.Y8G("disabled",!0)}function mi(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",3)(1,"header",4)(2,"h2",5),e.EFF(3),e.k0s()(),e.j41(4,"main",6)(5,"div",7)(6,"label",8),e.EFF(7,"Product"),e.k0s(),e.j41(8,"mat-form-field",9),e.nrm(9,"input",10),e.k0s()(),e.j41(10,"div",11)(11,"div",7)(12,"label",12),e.EFF(13," Serial Number "),e.k0s(),e.j41(14,"mat-form-field",9),e.nrm(15,"input",13),e.j41(16,"mat-error"),e.EFF(17,"Serial Number is required"),e.k0s()()(),e.j41(18,"div",7)(19,"label",14),e.EFF(20,"Label/Friendly Name"),e.k0s(),e.j41(21,"mat-form-field",9),e.nrm(22,"input",15),e.j41(23,"mat-error"),e.EFF(24," Label/Friendly Name is required "),e.k0s()()()(),e.j41(25,"div",7)(26,"label",16),e.EFF(27," Purchase Order ID "),e.k0s(),e.j41(28,"mat-form-field",9)(29,"mat-select",17),e.DNE(30,di,2,2,"mat-option",18),e.nI1(31,"async"),e.DNE(32,ui,2,1,"mat-option",19),e.nI1(33,"async"),e.k0s(),e.j41(34,"mat-error"),e.EFF(35," Purchase Order ID is required "),e.k0s()()(),e.j41(36,"div",7)(37,"label",12),e.EFF(38,"Barcode"),e.k0s(),e.j41(39,"mat-form-field",9),e.nrm(40,"input",20),e.j41(41,"mat-error"),e.EFF(42,"Barcode is required"),e.k0s()()()(),e.j41(43,"footer",21)(44,"a",22),e.EFF(45," Cancel "),e.k0s(),e.j41(46,"button",23),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.save())}),e.EFF(47," Save "),e.k0s()()()}if(2&n){let t;const s=e.XpG();e.R7$(3),e.SpI(" ",s.form.value.id?"Edit":"Add"," Asset "),e.R7$(),e.Y8G("formGroup",s.form),e.R7$(5),e.Y8G("ngModel",(null==s.product?null:s.product.name)||"No Product")("ngModelOptions",e.lJ4(12,li))("disabled",!0),e.R7$(21),e.Y8G("ngForOf",e.bMT(31,8,s.purchase_orders)),e.R7$(2),e.Y8G("ngIf",!(null!=(t=e.bMT(33,10,s.purchase_orders))&&t.length)),e.R7$(12),e.Y8G("routerLink",s.product?e.l_i(13,ci,s.base_route,s.product.id):e.eq3(16,pi,s.base_route))}}function _i(n,a){if(1&n&&(e.j41(0,"div",26),e.nrm(1,"mat-spinner",27),e.j41(2,"p"),e.EFF(3),e.k0s()()),2&n){const t=e.XpG();e.R7$(),e.Y8G("diameter",32),e.R7$(2),e.JRh(t.loading)}}let at=(()=>{class n extends d.Tv{get base_route(){return this._state.base_route}constructor(t,s,i,o){super(),this._state=t,this._route=s,this._router=i,this._org=o,this.form=(0,_.QP)(),this.purchase_orders=this._state.purchase_orders,this.loading=""}ngOnInit(){var t=this;this.subscription("route.query",this._route.queryParamMap.subscribe(function(){var s=(0,m.A)(function*(i){if(i.get("id")){t.loading="Loading Asset Details...";const o=yield(0,_.qA)(i.get("id")).toPromise().catch(()=>null);o||((0,d.UG)("Unable to load asset details."),t._router.navigate([t.base_route])),t.form.patchValue(o),t.loading=""}if(i.get("group_id")){t.loading="Loading Product Details...";const o=yield(0,_.RF)(i.get("group_id")).toPromise().catch(()=>null);o||((0,d.UG)("Unable to load associated product details."),t._router.navigate([t.base_route])),t.product=o,t.form.patchValue({type_id:o.id}),t.loading=""}});return function(i){return s.apply(this,arguments)}}())),this._state.setOptions({active_item:null})}save(){var t=this;return(0,m.A)(function*(){if(!t.form.valid)return(0,d.UG)(`Some fields are invalid. [${(0,d.F7)(t.form)}]`);t.loading="Saving Product...";const s=t.form.value,i=yield(0,_.We)({...s,zone_id:t._org.building.id}).toPromise().catch(o=>{throw t.loading="",(0,d.UG)(`Error saving asset: ${o.message}`),o});t.form.reset(),t._state.postChange(),t._state.setExtraAssets([i].map(o=>({...o,type_id:t.product.id}))),(0,d.VX)("Asset saved successfully."),t._router.navigate([t.base_route,"view",t.product?.id]),t.loading=""})()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(C),e.rXU(h.nX),e.rXU(h.Ix),e.rXU(S.yb))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-form"]],features:[e.Vt3],decls:4,vars:2,consts:[["load_state",""],[1,"absolute","inset-0","bg-base-100"],["class","h-full max-w-[32rem] mx-auto flex flex-col",4,"ngIf","ngIfElse"],[1,"h-full","max-w-[32rem]","mx-auto","flex","flex-col"],[1,"p-4"],[1,"text-center","text-xl","font-medium"],[1,"flex-1","h-1/2","overflow-auto",3,"formGroup"],[1,"flex","flex-1","flex-col","space-y-2"],["for","name"],["appearance","outline"],["matInput","",3,"ngModel","ngModelOptions","disabled"],[1,"flex","items-center","space-x-2"],["for","serial-number"],["matInput","","name","serial-number","placeholder","Serial Number","formControlName","serial_number"],["for","identifier"],["matInput","","name","identifier","placeholder","Identifier, Asset ID or Barcode","formControlName","identifier"],["for","purchase-order-id"],["formControlName","purchase_order_id","placeholder","Select Purchase Order"],[3,"value",4,"ngFor","ngForOf"],["class","opacity-60",3,"disabled",4,"ngIf"],["matInput","","name","barcode","placeholder","Barcode","formControlName","barcode"],[1,"flex","justify-end","space-x-2","p-2","border-t","border-base-200"],["btn","","matRipple","",1,"w-32","inverse",3,"routerLink"],["btn","","matRipple","",1,"w-32",3,"click"],[3,"value"],[1,"opacity-60",3,"disabled"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]],template:function(s,i){if(1&s&&(e.j41(0,"div",1),e.DNE(1,mi,48,18,"div",2),e.k0s(),e.DNE(2,_i,4,2,"ng-template",null,0,e.C5r)),2&s){const o=e.sdS(3);e.R7$(),e.Y8G("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[p.Sq,p.bT,F.rl,F.TL,V.fg,K.VO,g.wT,Y.LG,g.r6,f.me,f.BC,f.cb,f.vS,f.j4,f.JD,h.Wk,p.Jj]})}return n})();var fi=l(6864);const hi=(n,a)=>[n,"view",a],gi=n=>[n,"list","items"];function vi(n,a){if(1&n&&(e.j41(0,"mat-option",24),e.EFF(1),e.k0s()),2&n){const t=a.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function bi(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",3)(1,"header",4)(2,"h2",5),e.EFF(3),e.k0s()(),e.j41(4,"main",6)(5,"div",7)(6,"label",8),e.EFF(7,"Name"),e.j41(8,"span"),e.EFF(9,"*"),e.k0s()(),e.j41(10,"mat-form-field",9),e.nrm(11,"input",10),e.j41(12,"mat-error"),e.EFF(13,"Name is required"),e.k0s()()(),e.j41(14,"div",7)(15,"label",8),e.EFF(16,"Category"),e.j41(17,"span"),e.EFF(18,"*"),e.k0s()(),e.j41(19,"mat-form-field",9)(20,"mat-select",11),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.current_category=i.form.value.category_id)}),e.DNE(21,vi,2,2,"mat-option",12),e.nI1(22,"async"),e.j41(23,"mat-option",13),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.newCategory())}),e.j41(24,"div",14)(25,"app-icon"),e.EFF(26,"add"),e.k0s(),e.j41(27,"p"),e.EFF(28,"New Category"),e.k0s()()()(),e.j41(29,"mat-error"),e.EFF(30,"Category is required"),e.k0s()()(),e.j41(31,"div",7)(32,"label",15),e.EFF(33,"Brand"),e.j41(34,"span"),e.EFF(35,"*"),e.k0s()(),e.j41(36,"mat-form-field",9),e.nrm(37,"input",16),e.j41(38,"mat-error"),e.EFF(39,"Brand is required"),e.k0s()()(),e.j41(40,"div",7)(41,"label",17),e.EFF(42,"Description"),e.k0s(),e.j41(43,"mat-form-field",9),e.nrm(44,"textarea",18),e.j41(45,"mat-error"),e.EFF(46,"Description is required"),e.k0s()()(),e.j41(47,"div",7)(48,"label",19),e.EFF(49,"Images"),e.k0s(),e.nrm(50,"image-list-field",20),e.k0s()(),e.j41(51,"footer",21)(52,"a",22),e.EFF(53," Cancel "),e.k0s(),e.j41(54,"button",23),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.save())}),e.EFF(55," Save "),e.k0s()()()}if(2&n){const t=e.XpG();e.R7$(3),e.SpI(" ",t.form.value.id?"Edit":"Add"," Product "),e.R7$(),e.Y8G("formGroup",t.form),e.R7$(17),e.Y8G("ngForOf",e.bMT(22,4,t.categories)),e.R7$(31),e.Y8G("routerLink",t.form.value.id?e.l_i(6,hi,t.base_route,t.form.value.id):e.eq3(9,gi,t.base_route))}}function xi(n,a){if(1&n&&(e.j41(0,"div",25),e.nrm(1,"mat-spinner",26),e.j41(2,"p"),e.EFF(3),e.k0s()()),2&n){const t=e.XpG();e.R7$(),e.Y8G("diameter",32),e.R7$(2),e.JRh(t.loading)}}let rt=(()=>{class n extends d.Tv{get base_route(){return this._state.base_route}constructor(t,s,i,o){super(),this._state=t,this._route=s,this._router=i,this._dialog=o,this.form=(0,_.rC)(),this.new_category=new L.t(null),this.categories=(0,j.zV)([this._state.categories,this.new_category]).pipe((0,k.T)(([r,c])=>c?(0,d.Am)([...r,c],"id"):r)),this.loading=""}ngOnInit(){var t=this;this.subscription("route.query",this._route.queryParamMap.subscribe(function(){var s=(0,m.A)(function*(i){if(i.get("id")){t.loading="Loading Product Details...";const o=yield(0,_.RF)(i.get("id")).toPromise().catch(()=>null);o||((0,d.UG)("Unable to load product details."),t._router.navigate([t.base_route])),t.form.patchValue(o),t.loading=""}});return function(i){return s.apply(this,arguments)}}()))}newCategory(){var t=this;return(0,m.A)(function*(){t.form.patchValue({category_id:t.current_category});const s=yield t._state.editCategory();s&&(t.new_category.next(s),t.form.patchValue({category_id:s.id}))})()}save(){var t=this;return(0,m.A)(function*(){if(!t.form.valid)return;t.loading="Saving Product...";const s=t.form.value,i=yield(0,_.N3)(s).toPromise().catch(o=>{throw t.loading="",(0,d.UG)(`Error saving Product: ${o.message}`),o});t.form.reset(),t.loading="",t._state.postChange(),t._router.navigate([t.base_route,"view",i.id])})()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(C),e.rXU(h.nX),e.rXU(h.Ix),e.rXU(M.bZ))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-group-form"]],features:[e.Vt3],decls:4,vars:2,consts:[["load_state",""],[1,"absolute","inset-0","bg-base-100"],["class","h-full max-w-[32rem] mx-auto flex flex-col",4,"ngIf","ngIfElse"],[1,"h-full","max-w-[32rem]","mx-auto","flex","flex-col"],[1,"p-4"],[1,"text-center","text-xl","font-medium"],[1,"flex-1","h-1/2","overflow-auto","p-2",3,"formGroup"],[1,"flex","flex-col","space-y-2"],["for","name"],["appearance","outline"],["matInput","","name","name","placeholder","Name of the product","formControlName","name"],["formControlName","category_id","placeholder","Category of Product",3,"click"],[3,"value",4,"ngFor","ngForOf"],[1,"relative",3,"click"],[1,"flex","items-center","space-x-2"],["for","brand"],["matInput","","name","brand","placeholder","Brand of the product","formControlName","brand"],["for","description"],["matInput","","name","description","placeholder","Description of the product","formControlName","description"],["for","images"],["name","images","formControlName","images"],[1,"flex","justify-end","space-x-2","p-2","border-t","border-base-200"],["btn","","matRipple","",1,"w-32","inverse",3,"routerLink"],["btn","","matRipple","",1,"w-32",3,"click"],[3,"value"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]],template:function(s,i){if(1&s&&(e.j41(0,"div",1),e.DNE(1,bi,56,11,"div",2),e.k0s(),e.DNE(2,xi,4,2,"ng-template",null,0,e.C5r)),2&s){const o=e.sdS(3);e.R7$(),e.Y8G("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[p.Sq,p.bT,F.rl,F.TL,V.fg,K.VO,g.wT,Y.LG,g.r6,f.me,f.BC,f.cb,f.j4,f.JD,fi.$,N.R,h.Wk,p.Jj]})}return n})();const yi=()=>({key:"purchase_order_number",name:"PO Number"}),ki=()=>({key:"invoice_number",name:"Invoice Number"}),Fi=n=>({key:"purchase_date",name:"Purchase Date",content:n}),Ii=n=>({key:"expected_service_start_date",name:"Service Start",content:n}),Ci=n=>({key:"expected_service_end_date",name:"Service End",content:n}),ji=(n,a,t,s,i)=>[n,a,t,s,i];function Ti(n,a){1&n&&(e.j41(0,"span",6),e.EFF(1,"No Date"),e.k0s())}function Ei(n,a){if(1&n&&(e.j41(0,"div",4),e.DNE(1,Ti,2,0,"span",5),e.EFF(2),e.nI1(3,"date"),e.k0s()),2&n){const t=a.data;e.R7$(),e.Y8G("ngIf",!t),e.R7$(),e.SpI(" ",t?e.i5U(3,2,1e3*t,"mediumDate"):""," ")}}let lt=(()=>{class n{constructor(t,s){this._state=t,this._router=s,this.now=Date.now(),this.purchase_orders=(0,j.zV)([this._state.options,this._state.purchase_orders]).pipe((0,k.T)(([{search:i},o])=>o.filter(r=>!i||r.purchase_order_number.toLowerCase().includes(i.toLowerCase())||r.invoice_number?.toLowerCase().includes(i.toLowerCase())))),this.filters=this._state.options}editOrder(t){this._router.navigate([this._state.base_route,"manage","purchase-order"],{queryParams:{id:t.id}})}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(C),e.rXU(h.Ix))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-asset-purchase-order-list"]],decls:7,vars:23,consts:[["date_template",""],[1,"relative","-left-4","w-[calc(100%+2rem)]","mt-4","h-[calc(100%-1rem)]","flex","flex-col"],[1,"w-full","overflow-auto","h-1/2","flex-1","p-4"],["purchase-orders","",1,"min-w-[52rem]","block","text-sm",3,"row_clicked","data","columns","empty_message","filter","sortable"],[1,"p-4"],["class","opacity-30",4,"ngIf"],[1,"opacity-30"]],template:function(s,i){if(1&s){const o=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"simple-table",3),e.nI1(3,"async"),e.nI1(4,"async"),e.bIt("row_clicked",function(c){return e.eBV(o),e.Njj(i.editOrder(c))}),e.k0s()()(),e.DNE(5,Ei,4,5,"ng-template",null,0,e.C5r)}if(2&s){let o,r;const c=e.sdS(6);e.R7$(2),e.Y8G("data",i.purchase_orders)("columns",e.s1E(17,ji,e.lJ4(9,yi),e.lJ4(10,ki),e.eq3(11,Fi,c),e.eq3(13,Ii,c),e.eq3(15,Ci,c)))("empty_message",null!=(o=e.bMT(3,5,i.filters))&&o.search?"No matching purchase orders found.":"There are purchase orders for this building.")("filter",null==(r=e.bMT(4,7,i.filters))?null:r.search)("sortable",!0)}},dependencies:[p.bT,ne.O,p.Jj,p.vh],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%}\n\n/*# sourceMappingURL=asset-purchase-order-list.component.ts-angular-inline--119.css.map*/"]})}return n})();const ct=()=>({standalone:!0}),Ri=(n,a)=>[n,"view",a],wi=n=>[n];function Mi(n,a){if(1&n&&(e.j41(0,"mat-option",23),e.EFF(1),e.k0s()),2&n){const t=a.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.purchase_order_number||t.invoice_number," ")}}function Ai(n,a){1&n&&(e.j41(0,"mat-option",24),e.EFF(1," No purchase orders "),e.k0s()),2&n&&e.Y8G("disabled",!0)}function Si(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",3)(1,"header",4)(2,"h2",5),e.EFF(3),e.k0s()(),e.j41(4,"main",6)(5,"div",7)(6,"label",8),e.EFF(7,"Product"),e.k0s(),e.j41(8,"mat-form-field",9),e.nrm(9,"input",10),e.k0s()(),e.j41(10,"div",11)(11,"div",7)(12,"label",12),e.EFF(13," Number of Assets to create "),e.k0s(),e.j41(14,"mat-form-field",9)(15,"input",13),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.count,i)||(o.count=i),e.Njj(i)}),e.k0s()()()(),e.j41(16,"div",7)(17,"label",14),e.EFF(18,"Label/Friendly Name"),e.k0s(),e.j41(19,"mat-form-field",9),e.nrm(20,"input",15),e.j41(21,"mat-error"),e.EFF(22," Label/Friendly Name is required "),e.k0s()()(),e.j41(23,"div",7)(24,"label",16),e.EFF(25," Purchase Order ID "),e.k0s(),e.j41(26,"mat-form-field",9)(27,"mat-select",17),e.DNE(28,Mi,2,2,"mat-option",18),e.nI1(29,"async"),e.DNE(30,Ai,2,1,"mat-option",19),e.nI1(31,"async"),e.k0s(),e.j41(32,"mat-error"),e.EFF(33," Purchase Order ID is required "),e.k0s()()()(),e.j41(34,"footer",20)(35,"a",21),e.EFF(36," Cancel "),e.k0s(),e.j41(37,"button",22),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.save())}),e.EFF(38," Save "),e.k0s()()()}if(2&n){let t;const s=e.XpG();e.R7$(3),e.SpI(" Bulk ",s.form.value.id?"Edit":"Add"," Asset "),e.R7$(),e.Y8G("formGroup",s.form),e.R7$(5),e.Y8G("ngModel",(null==s.product?null:s.product.name)||"No Product")("ngModelOptions",e.lJ4(14,ct))("disabled",!0),e.R7$(6),e.R50("ngModel",s.count),e.Y8G("ngModelOptions",e.lJ4(15,ct)),e.R7$(13),e.Y8G("ngForOf",e.bMT(29,10,s.purchase_orders)),e.R7$(2),e.Y8G("ngIf",!(null!=(t=e.bMT(31,12,s.purchase_orders))&&t.length)),e.R7$(5),e.Y8G("routerLink",s.product?e.l_i(16,Ri,s.base_route,s.product.id):e.eq3(19,wi,s.base_route))}}function Gi(n,a){if(1&n&&(e.j41(0,"div",25),e.nrm(1,"mat-spinner",26),e.j41(2,"p"),e.EFF(3),e.k0s()()),2&n){const t=e.XpG();e.R7$(),e.Y8G("diameter",32),e.R7$(2),e.JRh(t.loading)}}let pt=(()=>{class n extends d.Tv{get base_route(){return this._state.base_route}constructor(t,s,i,o){super(),this._state=t,this._route=s,this._router=i,this._org=o,this.form=(0,_.QP)(),this.purchase_orders=this._state.purchase_orders,this.count=2,this.loading=""}ngOnInit(){var t=this;this.subscription("route.query",this._route.queryParamMap.subscribe(function(){var s=(0,m.A)(function*(i){if(i.get("id")){t.loading="Loading Asset Details...";const o=yield(0,_.qA)(i.get("id")).toPromise().catch(()=>null);o||((0,d.UG)("Unable to load asset details."),t._router.navigate([t.base_route])),t.form.patchValue(o),t.loading=""}if(i.get("group_id")){t.loading="Loading Product Details...";const o=yield(0,_.RF)(i.get("group_id")).toPromise().catch(()=>null);o||((0,d.UG)("Unable to load associated product details."),t._router.navigate([t.base_route])),t.product=o,t.form.patchValue({type_id:o.id}),t.loading=""}});return function(i){return s.apply(this,arguments)}}())),this._state.setOptions({active_item:null}),this.count=2}save(){var t=this;return(0,m.A)(function*(){if(!t.count&&t.count<1)return(0,d.UG)("Please enter a valid number of assets to add.");if(!t.form.valid)return(0,d.UG)(`Some fields are invalid. [${(0,d.F7)(t.form)}]`);t.loading="Saving Product...";const s=t.form.value,i=yield(0,_.G1)(new Array(t.count).fill({...s,zone_id:t._org.building.id})).toPromise().catch(o=>{throw t.loading="",(0,d.UG)(`Error saving asset: ${o.message}`),o});t._state.setExtraAssets(i.map(o=>({...o,type_id:t.product.id}))),t.form.reset(),t._state.postChange(),(0,d.VX)(`Asset added ${i.length} successfully.`),t._router.navigate([t.base_route,"view",t.product?.id]),t.loading=""})()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(C),e.rXU(h.nX),e.rXU(h.Ix),e.rXU(S.yb))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-bulk-form"]],features:[e.Vt3],decls:4,vars:2,consts:[["load_state",""],[1,"absolute","inset-0","bg-base-100"],["class","h-full max-w-[32rem] mx-auto flex flex-col",4,"ngIf","ngIfElse"],[1,"h-full","max-w-[32rem]","mx-auto","flex","flex-col"],[1,"p-4"],[1,"text-center","text-xl","font-medium"],[1,"flex-1","h-1/2","overflow-auto",3,"formGroup"],[1,"flex","flex-1","flex-col","space-y-2"],["for","name"],["appearance","outline"],["matInput","",3,"ngModel","ngModelOptions","disabled"],[1,"flex","items-center","space-x-2"],["for","count"],["matInput","","name","count","type","number","placeholder","Number of assets to add",3,"ngModelChange","ngModel","ngModelOptions"],["for","identifier"],["matInput","","name","identifier","placeholder","Identifier, Asset ID or Barcode","formControlName","identifier"],["for","purchase-order-id"],["formControlName","purchase_order_id","placeholder","Select Purchase Order"],[3,"value",4,"ngFor","ngForOf"],["class","opacity-60",3,"disabled",4,"ngIf"],[1,"flex","justify-end","space-x-2","p-2","border-t","border-base-200"],["btn","","matRipple","",1,"w-32","inverse",3,"routerLink"],["btn","","matRipple","",1,"w-32",3,"click"],[3,"value"],[1,"opacity-60",3,"disabled"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]],template:function(s,i){if(1&s&&(e.j41(0,"div",1),e.DNE(1,Si,39,21,"div",2),e.k0s(),e.DNE(2,Gi,4,2,"ng-template",null,0,e.C5r)),2&s){const o=e.sdS(3);e.R7$(),e.Y8G("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[p.Sq,p.bT,F.rl,F.TL,V.fg,K.VO,g.wT,Y.LG,g.r6,f.me,f.Q0,f.BC,f.cb,f.vS,f.j4,f.JD,h.Wk,p.Jj]})}return n})();var Di=l(5189),Ni=l(6843);const $i=["asset-manager",""];const ut=[{path:"list",component:Ye,children:[{path:"items",component:it},{path:"requests",component:nt},{path:"purchase-orders",component:lt},{path:"**",redirectTo:"requests"}]},{path:"view/:id",component:Ke},{path:"manage",children:[{path:"group",component:rt},{path:"asset",component:at},{path:"asset-bulk",component:pt},{path:"category",component:xe},{path:"purchase-order",component:ot}]},{path:"**",redirectTo:"list/requests"}],Li=[{path:"new",component:(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["","asset-manager",""]],attrs:$i,decls:5,vars:0,consts:[[1,"flex","flex-1","h-px"],[1,"flex","flex-col","flex-1","w-1/2","h-full"]],template:function(s,i){1&s&&(e.nrm(0,"app-topbar"),e.j41(1,"div",0),e.nrm(2,"app-sidebar"),e.j41(3,"main",1),e.nrm(4,"router-outlet"),e.k0s()())},dependencies:[Di.S,Ni.c,h.n3],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background-color:var(--b1)}\n\n/*# sourceMappingURL=new-asset-manager.component.ts-angular-inline--120.css.map*/"]})}return n})(),children:ut},{path:"",component:Ue,children:ut},{path:"**",redirectTo:""}];let Oi=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({imports:[p.MD,Pt.r,ee.hI,U.Vg,ue.PO,te.RI,Vt,h.iI.forChild(Li)]})}return n})()},7915:(_t,se,l)=>{l.d(se,{Qr:()=>U.Q,nx:()=>h.n,SG:()=>p.S,DD:()=>I.DD,Z$:()=>I.Z$,u3:()=>I.u3,tj:()=>I.tj,WE:()=>I.WE,vB:()=>I.vB,X0:()=>I.X0,tl:()=>I.tl,DO:()=>I.DO,vq:()=>I.vq});var p=l(4148),h=l(8379),U=l(3857),I=(l(7141),l(8026));l(2333),l(5762),l(3367),l(7254),l(8796),l(1781),l(7547),l(7642)}}]);
//# sourceMappingURL=apps_concierge_src_app_asset-manager_asset-manager_module_ts.js.map