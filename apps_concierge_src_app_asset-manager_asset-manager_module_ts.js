"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([["apps_concierge_src_app_asset-manager_asset-manager_module_ts"],{33203:(Ti,ue,l)=>{l.r(ue),l.d(ue,{AppAssetManangerModule:()=>Fi});var p=l(60316),h=l(26842),K=l(59864),me=l(26354),ee=l(9168),_e=l(72102),te=l(63680),ne=l(74879),e=l(68559),fe=l(17699),se=l(33119),he=l(71536),z=l(89273),O=l(67464);const it=["*"];function ot(n,r){1&n&&e.SdG(0)}let ge=(()=>{class n{constructor(t){this._elementRef=t}focus(){this._elementRef.nativeElement.focus()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(e.aKT))};static#t=this.\u0275dir=e.FsC({type:n,selectors:[["","cdkStepHeader",""]],hostAttrs:["role","tab"],standalone:!0})}return n})(),ve=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(e.C4Q))};static#t=this.\u0275dir=e.FsC({type:n,selectors:[["","cdkStepLabel",""]],standalone:!0})}return n})(),rt=0;const be=new e.nKC("STEPPER_GLOBAL_OPTIONS");let ie=(()=>{class n{get completed(){return null==this._completedOverride?this._getDefaultCompleted():this._completedOverride}set completed(t){this._completedOverride=t}_getDefaultCompleted(){return this.stepControl?this.stepControl.valid&&this.interacted:this.interacted}get hasError(){return null==this._customError?this._getDefaultError():this._customError}set hasError(t){this._customError=t}_getDefaultError(){return this.stepControl&&this.stepControl.invalid&&this.interacted}constructor(t,s){this._stepper=t,this.interacted=!1,this.interactedStream=new e.bkB,this.editable=!0,this.optional=!1,this._completedOverride=null,this._customError=null,this._stepperOptions=s||{},this._displayDefaultIndicatorType=!1!==this._stepperOptions.displayDefaultIndicatorType}select(){this._stepper.selected=this}reset(){this.interacted=!1,null!=this._completedOverride&&(this._completedOverride=!1),null!=this._customError&&(this._customError=!1),this.stepControl&&this.stepControl.reset()}ngOnChanges(){this._stepper._stateChanged()}_markAsInteracted(){this.interacted||(this.interacted=!0,this.interactedStream.emit(this))}_showError(){return this._stepperOptions.showError??null!=this._customError}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU((0,e.Rfq)(()=>oe)),e.rXU(be,8))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["cdk-step"]],contentQueries:function(s,i,o){if(1&s&&e.wni(o,ve,5),2&s){let a;e.mGM(a=e.lsd())&&(i.stepLabel=a.first)}},viewQuery:function(s,i){if(1&s&&e.GBs(e.C4Q,7),2&s){let o;e.mGM(o=e.lsd())&&(i.content=o.first)}},inputs:{stepControl:"stepControl",label:"label",errorMessage:"errorMessage",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],state:"state",editable:[2,"editable","editable",e.L39],optional:[2,"optional","optional",e.L39],completed:[2,"completed","completed",e.L39],hasError:[2,"hasError","hasError",e.L39]},outputs:{interactedStream:"interacted"},exportAs:["cdkStep"],standalone:!0,features:[e.GFd,e.OA$,e.aNF],ngContentSelectors:it,decls:1,vars:0,template:function(s,i){1&s&&(e.NAR(),e.DNE(0,ot,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}return n})(),oe=(()=>{class n{get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this.steps&&this._steps?(this._isValidIndex(t),this.selected?._markAsInteracted(),this._selectedIndex!==t&&!this._anyControlsInvalidOrPending(t)&&(t>=this._selectedIndex||this.steps.toArray()[t].editable)&&this._updateSelectedItemIndex(t)):this._selectedIndex=t}get selected(){return this.steps?this.steps.toArray()[this.selectedIndex]:void 0}set selected(t){this.selectedIndex=t&&this.steps?this.steps.toArray().indexOf(t):-1}get orientation(){return this._orientation}set orientation(t){this._orientation=t,this._keyManager&&this._keyManager.withVerticalOrientation("vertical"===t)}constructor(t,s,i){this._dir=t,this._changeDetectorRef=s,this._elementRef=i,this._destroyed=new se.B7,this.steps=new e.rOR,this._sortedHeaders=new e.rOR,this.linear=!1,this._selectedIndex=0,this.selectionChange=new e.bkB,this.selectedIndexChange=new e.bkB,this._orientation="horizontal",this._groupId=rt++}ngAfterContentInit(){this._steps.changes.pipe((0,z.Z)(this._steps),(0,O.Q)(this._destroyed)).subscribe(t=>{this.steps.reset(t.filter(s=>s._stepper===this)),this.steps.notifyOnChanges()})}ngAfterViewInit(){this._stepHeader.changes.pipe((0,z.Z)(this._stepHeader),(0,O.Q)(this._destroyed)).subscribe(t=>{this._sortedHeaders.reset(t.toArray().sort((s,i)=>s._elementRef.nativeElement.compareDocumentPosition(i._elementRef.nativeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)),this._sortedHeaders.notifyOnChanges()}),this._keyManager=new _e.Bu(this._sortedHeaders).withWrap().withHomeAndEnd().withVerticalOrientation("vertical"===this._orientation),(this._dir?this._dir.change:(0,he.of)()).pipe((0,z.Z)(this._layoutDirection()),(0,O.Q)(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.updateActiveItem(this._selectedIndex),this.steps.changes.subscribe(()=>{this.selected||(this._selectedIndex=Math.max(this._selectedIndex-1,0))}),this._isValidIndex(this._selectedIndex)||(this._selectedIndex=0)}ngOnDestroy(){this._keyManager?.destroy(),this.steps.destroy(),this._sortedHeaders.destroy(),this._destroyed.next(),this._destroyed.complete()}next(){this.selectedIndex=Math.min(this._selectedIndex+1,this.steps.length-1)}previous(){this.selectedIndex=Math.max(this._selectedIndex-1,0)}reset(){this._updateSelectedItemIndex(0),this.steps.forEach(t=>t.reset()),this._stateChanged()}_getStepLabelId(t){return`cdk-step-label-${this._groupId}-${t}`}_getStepContentId(t){return`cdk-step-content-${this._groupId}-${t}`}_stateChanged(){this._changeDetectorRef.markForCheck()}_getAnimationDirection(t){const s=t-this._selectedIndex;return s<0?"rtl"===this._layoutDirection()?"next":"previous":s>0?"rtl"===this._layoutDirection()?"previous":"next":"current"}_getIndicatorType(t,s="number"){const i=this.steps.toArray()[t],o=this._isCurrentStep(t);return i._displayDefaultIndicatorType?this._getDefaultIndicatorLogic(i,o):this._getGuidelineLogic(i,o,s)}_getDefaultIndicatorLogic(t,s){return t._showError()&&t.hasError&&!s?"error":!t.completed||s?"number":t.editable?"edit":"done"}_getGuidelineLogic(t,s,i="number"){return t._showError()&&t.hasError&&!s?"error":t.completed&&!s?"done":t.completed&&s?i:t.editable&&s?"edit":i}_isCurrentStep(t){return this._selectedIndex===t}_getFocusIndex(){return this._keyManager?this._keyManager.activeItemIndex:this._selectedIndex}_updateSelectedItemIndex(t){const s=this.steps.toArray();this.selectionChange.emit({selectedIndex:t,previouslySelectedIndex:this._selectedIndex,selectedStep:s[t],previouslySelectedStep:s[this._selectedIndex]}),this._containsFocus()?this._keyManager.setActiveItem(t):this._keyManager.updateActiveItem(t),this._selectedIndex=t,this.selectedIndexChange.emit(this._selectedIndex),this._stateChanged()}_onKeydown(t){const s=(0,ne.rp)(t),i=t.keyCode,o=this._keyManager;null==o.activeItemIndex||s||i!==ne.t6&&i!==ne.Fm?o.setFocusOrigin("keyboard").onKeydown(t):(this.selectedIndex=o.activeItemIndex,t.preventDefault())}_anyControlsInvalidOrPending(t){return!!(this.linear&&t>=0)&&this.steps.toArray().slice(0,t).some(s=>{const i=s.stepControl;return(i?i.invalid||i.pending||!s.interacted:!s.completed)&&!s.optional&&!s._completedOverride})}_layoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_containsFocus(){const t=this._elementRef.nativeElement,s=(0,fe.vc)();return t===s||t.contains(s)}_isValidIndex(t){return t>-1&&(!this.steps||t<this.steps.length)}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(te.dS,8),e.rXU(e.gRc),e.rXU(e.aKT))};static#t=this.\u0275dir=e.FsC({type:n,selectors:[["","cdkStepper",""]],contentQueries:function(s,i,o){if(1&s&&(e.wni(o,ie,5),e.wni(o,ge,5)),2&s){let a;e.mGM(a=e.lsd())&&(i._steps=a),e.mGM(a=e.lsd())&&(i._stepHeader=a)}},inputs:{linear:[2,"linear","linear",e.L39],selectedIndex:[2,"selectedIndex","selectedIndex",e.Udg],selected:"selected",orientation:"orientation"},outputs:{selectionChange:"selectionChange",selectedIndexChange:"selectedIndexChange"},exportAs:["cdkStepper"],standalone:!0,features:[e.GFd]})}return n})(),at=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({imports:[te.jI]})}return n})();var v=l(85060),xe=l(52833),lt=l(12672),E=l(71963),F=l(35443),ye=l(6109),g=l(47172);function ct(n,r){if(1&n&&e.eu8(0,2),2&n){const t=e.XpG();e.Y8G("ngTemplateOutlet",t.iconOverrides[t.state])("ngTemplateOutletContext",t._getIconContext())}}function pt(n,r){if(1&n&&(e.j41(0,"span",7),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.JRh(t._getDefaultTextForState(t.state))}}function dt(n,r){if(1&n&&(e.j41(0,"span",8),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.JRh(t._intl.completedLabel)}}function ut(n,r){if(1&n&&(e.j41(0,"span",8),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.JRh(t._intl.editableLabel)}}function mt(n,r){if(1&n&&(e.DNE(0,dt,2,1,"span",8)(1,ut,2,1,"span",8),e.j41(2,"mat-icon",7),e.EFF(3),e.k0s()),2&n){const t=e.XpG(2);e.vxM("done"===t.state?0:"edit"===t.state?1:-1),e.R7$(3),e.JRh(t._getDefaultTextForState(t.state))}}function _t(n,r){if(1&n&&e.DNE(0,pt,2,1,"span",7)(1,mt,4,2,"mat-icon",7),2&n){let t;const s=e.XpG();e.vxM("number"===(t=s.state)?0:1)}}function ft(n,r){1&n&&(e.j41(0,"div",4),e.eu8(1,9),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngTemplateOutlet",r.template))}function ht(n,r){if(1&n&&(e.j41(0,"div",4),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.JRh(t.label)}}function gt(n,r){if(1&n&&(e.j41(0,"div",5),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.JRh(t._intl.optionalLabel)}}function vt(n,r){if(1&n&&(e.j41(0,"div",6),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.JRh(t.errorMessage)}}const Fe=["*"];function bt(n,r){}function xt(n,r){if(1&n&&(e.SdG(0),e.DNE(1,bt,0,0,"ng-template",0)),2&n){const t=e.XpG();e.R7$(),e.Y8G("cdkPortalOutlet",t._portal)}}const ke=(n,r)=>({step:n,i:r}),Ce=n=>({animationDuration:n}),Ie=(n,r)=>({value:n,params:r});function yt(n,r){1&n&&e.SdG(0)}function Ft(n,r){1&n&&e.nrm(0,"div",6)}function kt(n,r){if(1&n&&(e.eu8(0,5),e.DNE(1,Ft,1,0,"div",6)),2&n){const t=r.$implicit,s=r.$index,i=r.$count;e.XpG(2);const o=e.sdS(4);e.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",e.l_i(3,ke,t,s)),e.R7$(),e.vxM(s!==i-1?1:-1)}}function Ct(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",7),e.bIt("@horizontalStepTransition.done",function(i){e.eBV(t);const o=e.XpG(2);return e.Njj(o._animationDone.next(i))}),e.eu8(1,8),e.k0s()}if(2&n){const t=r.$implicit,s=r.$index,i=e.XpG(2);e.AVh("mat-horizontal-stepper-content-inactive",i.selectedIndex!==s),e.Y8G("@horizontalStepTransition",e.l_i(8,Ie,i._getAnimationDirection(s),e.eq3(6,Ce,i._getAnimationDuration())))("id",i._getStepContentId(s)),e.BMQ("aria-labelledby",i._getStepLabelId(s)),e.R7$(),e.Y8G("ngTemplateOutlet",t.content)}}function It(n,r){if(1&n&&(e.j41(0,"div",1)(1,"div",2),e.Z7z(2,kt,2,6,null,null,e.fX1),e.k0s(),e.j41(4,"div",3),e.Z7z(5,Ct,2,11,"div",4,e.fX1),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.Dyx(t.steps),e.R7$(3),e.Dyx(t.steps)}}function jt(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",9),e.eu8(1,5),e.j41(2,"div",10)(3,"div",11),e.bIt("@verticalStepTransition.done",function(i){e.eBV(t);const o=e.XpG(2);return e.Njj(o._animationDone.next(i))}),e.j41(4,"div",12),e.eu8(5,8),e.k0s()()()()}if(2&n){const t=r.$implicit,s=r.$index,i=r.$count,o=e.XpG(2),a=e.sdS(4);e.R7$(),e.Y8G("ngTemplateOutlet",a)("ngTemplateOutletContext",e.l_i(10,ke,t,s)),e.R7$(),e.AVh("mat-stepper-vertical-line",s!==i-1),e.R7$(),e.AVh("mat-vertical-stepper-content-inactive",o.selectedIndex!==s),e.Y8G("@verticalStepTransition",e.l_i(15,Ie,o._getAnimationDirection(s),e.eq3(13,Ce,o._getAnimationDuration())))("id",o._getStepContentId(s)),e.BMQ("aria-labelledby",o._getStepLabelId(s)),e.R7$(2),e.Y8G("ngTemplateOutlet",t.content)}}function Tt(n,r){if(1&n&&e.Z7z(0,jt,6,18,"div",9,e.fX1),2&n){const t=e.XpG();e.Dyx(t.steps)}}function Et(n,r){if(1&n){const t=e.RV6();e.j41(0,"mat-step-header",13),e.bIt("click",function(){const i=e.eBV(t).step;return e.Njj(i.select())})("keydown",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o._onKeydown(i))}),e.k0s()}if(2&n){const t=r.step,s=r.i,i=e.XpG();e.AVh("mat-horizontal-stepper-header","horizontal"===i.orientation)("mat-vertical-stepper-header","vertical"===i.orientation),e.Y8G("tabIndex",i._getFocusIndex()===s?0:-1)("id",i._getStepLabelId(s))("index",s)("state",i._getIndicatorType(s,t.state))("label",t.stepLabel||t.label)("selected",i.selectedIndex===s)("active",i._stepIsNavigable(s,t))("optional",t.optional)("errorMessage",t.errorMessage)("iconOverrides",i._iconOverrides)("disableRipple",i.disableRipple||!i._stepIsNavigable(s,t))("color",t.color||i.color),e.BMQ("aria-posinset",s+1)("aria-setsize",i.steps.length)("aria-controls",i._getStepContentId(s))("aria-selected",i.selectedIndex==s)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null)("aria-disabled",!i._stepIsNavigable(s,t)||null)}}let re=(()=>{class n extends ve{static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=e.xGo(n)))(i||n)}})();static#t=this.\u0275dir=e.FsC({type:n,selectors:[["","matStepLabel",""]],standalone:!0,features:[e.Vt3]})}return n})(),J=(()=>{class n{constructor(){this.changes=new se.B7,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const wt={provide:J,deps:[[new e.Xx1,new e.kdw,J]],useFactory:function Rt(n){return n||new J}};let ae=(()=>{class n extends ge{constructor(t,s,i,o){super(i),this._intl=t,this._focusMonitor=s,this._intlSubscription=t.changes.subscribe(()=>o.markForCheck())}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._intlSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,s){t?this._focusMonitor.focusVia(this._elementRef,t,s):this._elementRef.nativeElement.focus(s)}_stringLabel(){return this.label instanceof re?null:this.label}_templateLabel(){return this.label instanceof re?this.label:null}_getHostElement(){return this._elementRef.nativeElement}_getIconContext(){return{index:this.index,active:this.active,optional:this.optional}}_getDefaultTextForState(t){return"number"==t?`${this.index+1}`:"edit"==t?"create":"error"==t?"warning":t}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(J),e.rXU(_e.FN),e.rXU(e.aKT),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["mat-step-header"]],hostAttrs:["role","tab",1,"mat-step-header"],hostVars:2,hostBindings:function(s,i){2&s&&e.HbH("mat-"+(i.color||"primary"))},inputs:{state:"state",label:"label",errorMessage:"errorMessage",iconOverrides:"iconOverrides",index:"index",selected:"selected",active:"active",optional:"optional",disableRipple:"disableRipple",color:"color"},standalone:!0,features:[e.Vt3,e.aNF],decls:10,vars:17,consts:[["matRipple","",1,"mat-step-header-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-step-icon-content"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mat-step-label"],[1,"mat-step-text-label"],[1,"mat-step-optional"],[1,"mat-step-sub-label-error"],["aria-hidden","true"],[1,"cdk-visually-hidden"],[3,"ngTemplateOutlet"]],template:function(s,i){if(1&s&&(e.nrm(0,"div",0),e.j41(1,"div")(2,"div",1),e.DNE(3,ct,1,2,"ng-container",2)(4,_t,2,1),e.k0s()(),e.j41(5,"div",3),e.DNE(6,ft,2,1,"div",4)(7,ht,2,1,"div",4)(8,gt,2,1,"div",5)(9,vt,2,1,"div",6),e.k0s()),2&s){let o;e.Y8G("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disableRipple),e.R7$(),e.ZvI("mat-step-icon-state-",i.state," mat-step-icon"),e.AVh("mat-step-icon-selected",i.selected),e.R7$(2),e.vxM(i.iconOverrides&&i.iconOverrides[i.state]?3:4),e.R7$(2),e.AVh("mat-step-label-active",i.active)("mat-step-label-selected",i.selected)("mat-step-label-error","error"==i.state),e.R7$(),e.vxM((o=i._templateLabel())?6:i._stringLabel()?7:-1,o),e.R7$(2),e.vxM(i.optional&&"error"!=i.state?8:-1),e.R7$(),e.vxM("error"===i.state?9:-1)}},dependencies:[v.r6,p.T3,xe.An],styles:['.mat-step-header{overflow:hidden;outline:none;cursor:pointer;position:relative;box-sizing:content-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-step-header:focus .mat-focus-indicator::before{content:""}.mat-step-header:hover[aria-disabled=true]{cursor:default}.mat-step-header:hover:not([aria-disabled]),.mat-step-header:hover[aria-disabled=false]{background-color:var(--mat-stepper-header-hover-state-layer-color);border-radius:var(--mat-stepper-header-hover-state-layer-shape)}.mat-step-header.cdk-keyboard-focused,.mat-step-header.cdk-program-focused{background-color:var(--mat-stepper-header-focus-state-layer-color);border-radius:var(--mat-stepper-header-focus-state-layer-shape)}@media(hover: none){.mat-step-header:hover{background:none}}.cdk-high-contrast-active .mat-step-header{outline:solid 1px}.cdk-high-contrast-active .mat-step-header[aria-selected=true] .mat-step-label{text-decoration:underline}.cdk-high-contrast-active .mat-step-header[aria-disabled=true]{outline-color:GrayText}.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-label,.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-icon,.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-optional{color:GrayText}.mat-step-optional{font-size:12px;color:var(--mat-stepper-header-optional-label-text-color)}.mat-step-sub-label-error{font-size:12px;font-weight:normal}.mat-step-icon{border-radius:50%;height:24px;width:24px;flex-shrink:0;position:relative;color:var(--mat-stepper-header-icon-foreground-color);background-color:var(--mat-stepper-header-icon-background-color)}.mat-step-icon-content{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:flex}.mat-step-icon .mat-icon{font-size:16px;height:16px;width:16px}.mat-step-icon-state-error{background-color:var(--mat-stepper-header-error-state-icon-background-color);color:var(--mat-stepper-header-error-state-icon-foreground-color)}.mat-step-icon-state-error .mat-icon{font-size:24px;height:24px;width:24px}.mat-step-label{display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:50px;vertical-align:middle;font-family:var(--mat-stepper-header-label-text-font);font-size:var(--mat-stepper-header-label-text-size);font-weight:var(--mat-stepper-header-label-text-weight);color:var(--mat-stepper-header-label-text-color)}.mat-step-label.mat-step-label-active{color:var(--mat-stepper-header-selected-state-label-text-color)}.mat-step-label.mat-step-label-error{color:var(--mat-stepper-header-error-state-label-text-color);font-size:var(--mat-stepper-header-error-state-label-text-size)}.mat-step-label.mat-step-label-selected{font-size:var(--mat-stepper-header-selected-state-label-text-size);font-weight:var(--mat-stepper-header-selected-state-label-text-weight)}.mat-step-text-label{text-overflow:ellipsis;overflow:hidden}.mat-step-header .mat-step-header-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-step-icon-selected{background-color:var(--mat-stepper-header-selected-state-icon-background-color);color:var(--mat-stepper-header-selected-state-icon-foreground-color)}.mat-step-icon-state-done{background-color:var(--mat-stepper-header-done-state-icon-background-color);color:var(--mat-stepper-header-done-state-icon-foreground-color)}.mat-step-icon-state-edit{background-color:var(--mat-stepper-header-edit-state-icon-background-color);color:var(--mat-stepper-header-edit-state-icon-foreground-color)}'],encapsulation:2,changeDetection:0})}return n})();const Ee={horizontalStepTransition:(0,g.hZ)("horizontalStepTransition",[(0,g.wk)("previous",(0,g.iF)({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"})),(0,g.wk)("current",(0,g.iF)({transform:"none",visibility:"inherit"})),(0,g.wk)("next",(0,g.iF)({transform:"translate3d(100%, 0, 0)",visibility:"hidden"})),(0,g.kY)("* => *",(0,g.Os)([(0,g.i0)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)"),(0,g.P)("@*",(0,g.MA)(),{optional:!0})]),{params:{animationDuration:"500ms"}})]),verticalStepTransition:(0,g.hZ)("verticalStepTransition",[(0,g.wk)("previous",(0,g.iF)({height:"0px",visibility:"hidden"})),(0,g.wk)("next",(0,g.iF)({height:"0px",visibility:"hidden"})),(0,g.wk)("current",(0,g.iF)({height:"*",visibility:"inherit"})),(0,g.kY)("* <=> current",(0,g.Os)([(0,g.i0)("{{animationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)"),(0,g.P)("@*",(0,g.MA)(),{optional:!0})]),{params:{animationDuration:"225ms"}})])};let Mt=(()=>{class n{constructor(t){this.templateRef=t}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(e.C4Q))};static#t=this.\u0275dir=e.FsC({type:n,selectors:[["ng-template","matStepperIcon",""]],inputs:{name:[0,"matStepperIcon","name"]},standalone:!0})}return n})(),At=(()=>{class n{constructor(t){this._template=t}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(e.C4Q))};static#t=this.\u0275dir=e.FsC({type:n,selectors:[["ng-template","matStepContent",""]],standalone:!0})}return n})(),St=(()=>{class n extends ie{constructor(t,s,i,o){super(t,o),this._errorStateMatcher=s,this._viewContainerRef=i,this._isSelected=lt.y.EMPTY,this.stepLabel=void 0}ngAfterContentInit(){this._isSelected=this._stepper.steps.changes.pipe((0,E.n)(()=>this._stepper.selectionChange.pipe((0,F.T)(t=>t.selectedStep===this),(0,z.Z)(this._stepper.selected===this)))).subscribe(t=>{t&&this._lazyContent&&!this._portal&&(this._portal=new ee.VA(this._lazyContent._template,this._viewContainerRef))})}ngOnDestroy(){this._isSelected.unsubscribe()}isErrorState(t,s){return this._errorStateMatcher.isErrorState(t,s)||!!(t&&t.invalid&&this.interacted)}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU((0,e.Rfq)(()=>Re)),e.rXU(v.es,4),e.rXU(e.c1b),e.rXU(be,8))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["mat-step"]],contentQueries:function(s,i,o){if(1&s&&(e.wni(o,re,5),e.wni(o,At,5)),2&s){let a;e.mGM(a=e.lsd())&&(i.stepLabel=a.first),e.mGM(a=e.lsd())&&(i._lazyContent=a.first)}},hostAttrs:["hidden",""],inputs:{color:"color"},exportAs:["matStep"],standalone:!0,features:[e.Jv_([{provide:v.es,useExisting:n},{provide:ie,useExisting:n}]),e.Vt3,e.aNF],ngContentSelectors:Fe,decls:1,vars:0,consts:[[3,"cdkPortalOutlet"]],template:function(s,i){1&s&&(e.NAR(),e.DNE(0,xt,2,1,"ng-template"))},dependencies:[ee.I3],encapsulation:2,changeDetection:0})}return n})(),Re=(()=>{class n extends oe{get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t)?t+"ms":t}constructor(t,s,i){super(t,s,i),this._stepHeader=void 0,this._steps=void 0,this.steps=new e.rOR,this.animationDone=new e.bkB,this.labelPosition="end",this.headerPosition="top",this._iconOverrides={},this._animationDone=new se.B7,this._animationDuration="",this._isServer=!(0,e.WQX)(fe.OD).isBrowser;const o=i.nativeElement.nodeName.toLowerCase();this.orientation="mat-vertical-stepper"===o?"vertical":"horizontal"}ngAfterContentInit(){super.ngAfterContentInit(),this._icons.forEach(({name:t,templateRef:s})=>this._iconOverrides[t]=s),this.steps.changes.pipe((0,O.Q)(this._destroyed)).subscribe(()=>{this._stateChanged()}),this._animationDone.pipe((0,ye.F)((t,s)=>t.fromState===s.fromState&&t.toState===s.toState),(0,O.Q)(this._destroyed)).subscribe(t=>{"current"===t.toState&&this.animationDone.emit()})}_stepIsNavigable(t,s){return s.completed||this.selectedIndex===t||!this.linear}_getAnimationDuration(){return this.animationDuration?this.animationDuration:"horizontal"===this.orientation?"500ms":"225ms"}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(te.dS,8),e.rXU(e.gRc),e.rXU(e.aKT))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["mat-stepper"],["mat-vertical-stepper"],["mat-horizontal-stepper"],["","matStepper",""]],contentQueries:function(s,i,o){if(1&s&&(e.wni(o,St,5),e.wni(o,Mt,5)),2&s){let a;e.mGM(a=e.lsd())&&(i._steps=a),e.mGM(a=e.lsd())&&(i._icons=a)}},viewQuery:function(s,i){if(1&s&&e.GBs(ae,5),2&s){let o;e.mGM(o=e.lsd())&&(i._stepHeader=o)}},hostAttrs:["role","tablist"],hostVars:11,hostBindings:function(s,i){2&s&&(e.BMQ("aria-orientation",i.orientation),e.AVh("mat-stepper-horizontal","horizontal"===i.orientation)("mat-stepper-vertical","vertical"===i.orientation)("mat-stepper-label-position-end","horizontal"===i.orientation&&"end"==i.labelPosition)("mat-stepper-label-position-bottom","horizontal"===i.orientation&&"bottom"==i.labelPosition)("mat-stepper-header-position-bottom","bottom"===i.headerPosition))},inputs:{disableRipple:"disableRipple",color:"color",labelPosition:"labelPosition",headerPosition:"headerPosition",animationDuration:"animationDuration"},outputs:{animationDone:"animationDone"},exportAs:["matStepper","matVerticalStepper","matHorizontalStepper"],standalone:!0,features:[e.Jv_([{provide:oe,useExisting:n}]),e.Vt3,e.aNF],ngContentSelectors:Fe,decls:5,vars:2,consts:[["stepTemplate",""],[1,"mat-horizontal-stepper-wrapper"],[1,"mat-horizontal-stepper-header-container"],[1,"mat-horizontal-content-container"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id","mat-horizontal-stepper-content-inactive"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mat-stepper-horizontal-line"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id"],[3,"ngTemplateOutlet"],[1,"mat-step"],[1,"mat-vertical-content-container"],["role","tabpanel",1,"mat-vertical-stepper-content",3,"id"],[1,"mat-vertical-content"],[3,"click","keydown","tabIndex","id","index","state","label","selected","active","optional","errorMessage","iconOverrides","disableRipple","color"]],template:function(s,i){if(1&s&&(e.NAR(),e.DNE(0,yt,1,0)(1,It,7,0,"div",1)(2,Tt,2,0)(3,Et,1,23,"ng-template",null,0,e.C5r)),2&s){let o;e.vxM(i._isServer?0:-1),e.R7$(),e.vxM("horizontal"===(o=i.orientation)?1:"vertical"===o?2:-1)}},dependencies:[p.T3,ae],styles:['.mat-stepper-vertical,.mat-stepper-horizontal{display:block;font-family:var(--mat-stepper-container-text-font);background:var(--mat-stepper-container-color)}.mat-horizontal-stepper-header-container{white-space:nowrap;display:flex;align-items:center}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header-container{align-items:flex-start}.mat-stepper-header-position-bottom .mat-horizontal-stepper-header-container{order:1}.mat-stepper-horizontal-line{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin:0 -16px;min-width:32px;border-top-color:var(--mat-stepper-line-color)}.mat-stepper-label-position-bottom .mat-stepper-horizontal-line{margin:0;min-width:0;position:relative;top:calc(calc((var(--mat-stepper-header-height) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{border-top-width:1px;border-top-style:solid;content:"";display:inline-block;height:0;position:absolute;width:calc(50% - 20px)}.mat-horizontal-stepper-header{display:flex;height:72px;overflow:hidden;align-items:center;padding:0 24px;height:var(--mat-stepper-header-height)}.mat-horizontal-stepper-header .mat-step-icon{margin-right:8px;flex:none}[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:8px}.mat-horizontal-stepper-header::before,.mat-horizontal-stepper-header::after{border-top-color:var(--mat-stepper-line-color)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{padding:calc((var(--mat-stepper-header-height) - 24px) / 2) 24px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::after{top:calc(calc((var(--mat-stepper-header-height) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{box-sizing:border-box;flex-direction:column;height:auto}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{right:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before{left:0}[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:last-child::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:first-child::after{display:none}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-label{padding:16px 0 0 0;text-align:center;width:100%}.mat-vertical-stepper-header{display:flex;align-items:center;height:24px;padding:calc((var(--mat-stepper-header-height) - 24px) / 2) 24px}.mat-vertical-stepper-header .mat-step-icon{margin-right:12px}[dir=rtl] .mat-vertical-stepper-header .mat-step-icon{margin-right:0;margin-left:12px}.mat-horizontal-stepper-wrapper{display:flex;flex-direction:column}.mat-horizontal-stepper-content{outline:0}.mat-horizontal-stepper-content.mat-horizontal-stepper-content-inactive{height:0;overflow:hidden}.mat-horizontal-stepper-content:not(.mat-horizontal-stepper-content-inactive){visibility:inherit !important}.mat-horizontal-content-container{overflow:hidden;padding:0 24px 24px 24px}.cdk-high-contrast-active .mat-horizontal-content-container{outline:solid 1px}.mat-stepper-header-position-bottom .mat-horizontal-content-container{padding:24px 24px 0 24px}.mat-vertical-content-container{margin-left:36px;border:0;position:relative}.cdk-high-contrast-active .mat-vertical-content-container{outline:solid 1px}[dir=rtl] .mat-vertical-content-container{margin-left:0;margin-right:36px}.mat-stepper-vertical-line::before{content:"";position:absolute;left:0;border-left-width:1px;border-left-style:solid;border-left-color:var(--mat-stepper-line-color);top:calc(8px - calc((var(--mat-stepper-header-height) - 24px) / 2));bottom:calc(8px - calc((var(--mat-stepper-header-height) - 24px) / 2))}[dir=rtl] .mat-stepper-vertical-line::before{left:auto;right:0}.mat-vertical-stepper-content{overflow:hidden;outline:0}.mat-vertical-stepper-content:not(.mat-vertical-stepper-content-inactive){visibility:inherit !important}.mat-vertical-content{padding:0 24px 24px 24px}.mat-step:last-child .mat-vertical-content-container{border:none}'],encapsulation:2,data:{animation:[Ee.horizontalStepTransition,Ee.verticalStepTransition]},changeDetection:0})}return n})(),Gt=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({providers:[wt,v.es],imports:[v.yE,p.MD,ee.jc,at,xe.m_,v.pZ,Re,ae,v.yE]})}return n})();var Dt=l(40363),m=l(89204),P=l(57915),d=l(82333),Nt=l(22168),we=l(27419),$t=l(13264),X=l(67450),G=l(90521),j=l(42175),Me=l(66e3),D=l(7841),Lt=l(19803),le=l(8627),Vt=l(29314),H=l(33602),Q=l(57871),_=l(97236),q=l(3998),A=l(12185),T=l(12587),S=l(69434);function Ot(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",6)(1,"div",7),e.EFF(2),e.k0s(),e.j41(3,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,o=e.XpG();return e.Njj(o.edit(i))}),e.j41(4,"app-icon"),e.EFF(5,"edit"),e.k0s()(),e.j41(6,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,o=e.XpG();return e.Njj(o.remove(i))}),e.j41(7,"app-icon"),e.EFF(8,"delete"),e.k0s()()()}if(2&n){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.name)}}function Pt(n,r){if(1&n&&(e.qex(0),e.DNE(1,Ot,9,1,"div",5),e.bVm()),2&n){const t=r.$implicit;e.R7$(),e.Y8G("ngIf",t.id)}}let Ae=(()=>{class n{constructor(t,s){var i=this;this._data=t,this._dialog_ref=s,this.changed=new e.bkB,this.list=this._data.list,this.edit=this._data.edit,this.remove=function(){var o=(0,m.A)(function*(a){yield(0,_.y3)(a.id).toPromise(),i.changed.emit()});return function(a){return o.apply(this,arguments)}}()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(T.Vh),e.rXU(T.CP))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-category-management-modal"]],decls:14,vars:3,consts:[["btn","","icon","","matRipple","","mat-dialog-close",""],[1,"overflow-y-auto","min-w-[20rem]","divide-y","divide-base-200","max-h-[65vh]"],["btn","","matRipple","",1,"flex","items-center","justify-center","space-x-2","w-[calc(100%-1rem)]","m-2",3,"click"],[1,"truncate"],[4,"ngFor","ngForOf"],["class","flex items-center space-x-2 hover:bg-base-200:bg-base-300 p-2",4,"ngIf"],[1,"flex","items-center","space-x-2","hover:bg-base-200:bg-base-300","p-2"],[1,"flex-1","truncate"],["btn","","icon","","matRipple","",3,"click"]],template:function(s,i){1&s&&(e.j41(0,"header")(1,"h2"),e.EFF(2,"Manage Categories"),e.k0s(),e.j41(3,"button",0)(4,"app-icon"),e.EFF(5,"close"),e.k0s()()(),e.j41(6,"main",1)(7,"button",2),e.bIt("click",function(){return i.edit()}),e.j41(8,"div",3),e.EFF(9,"New Category"),e.k0s(),e.j41(10,"app-icon"),e.EFF(11,"add"),e.k0s()(),e.DNE(12,Pt,2,1,"ng-container",4),e.nI1(13,"async"),e.k0s()),2&s&&(e.R7$(12),e.Y8G("ngForOf",e.bMT(13,1,i.list)))},dependencies:[p.Sq,p.bT,T.tx,v.r6,S.R,p.Jj]})}return n})();var k=l(24950),N=l(87984),W=l(25175),$=l(41134),f=l(34456);function Xt(n,r){1&n&&(e.j41(0,"button",6)(1,"app-icon"),e.EFF(2,"close"),e.k0s()())}function qt(n,r){if(1&n&&(e.j41(0,"mat-option",14),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function Bt(n,r){if(1&n&&(e.j41(0,"main",7)(1,"div",8)(2,"label",9),e.EFF(3,"Name"),e.j41(4,"span"),e.EFF(5,"*"),e.k0s()(),e.j41(6,"mat-form-field",10),e.nrm(7,"input",11),e.j41(8,"mat-error"),e.EFF(9,"Name is required"),e.k0s()()(),e.j41(10,"div",8)(11,"label",9),e.EFF(12,"Parent Category"),e.k0s(),e.j41(13,"mat-form-field",10)(14,"mat-select",12),e.nI1(15,"async"),e.DNE(16,qt,2,2,"mat-option",13),e.nI1(17,"async"),e.k0s()()()()),2&n){let t;const s=e.XpG();e.Y8G("formGroup",s.form),e.R7$(14),e.Y8G("disabled",!(null!=(t=e.bMT(15,3,s.categories))&&t.length)),e.R7$(2),e.Y8G("ngForOf",e.bMT(17,5,s.categories))}}function Yt(n,r){if(1&n){const t=e.RV6();e.j41(0,"footer",15)(1,"a",16),e.EFF(2,"Cancel"),e.k0s(),e.j41(3,"button",17),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.save())}),e.EFF(4,"Save"),e.k0s()()}}function Ut(n,r){1&n&&(e.j41(0,"div",18),e.nrm(1,"mat-spinner",19),e.j41(2,"p",20),e.EFF(3,"Saving Category..."),e.k0s()()),2&n&&(e.R7$(),e.Y8G("diameter",32))}let ce=(()=>{class n{constructor(t,s,i){this._state=s,this._dialog_ref=i,this.loading=!1,this.form=(0,_.SY)(),this.categories=this._state.categories.pipe((0,F.T)(o=>o.filter(a=>a.parent_category_id!==this.form.value.id))),t?.category&&this.form.patchValue(t.category)}save(){var t=this;return(0,m.A)(function*(){if(!t.form.valid)return;t.loading=!0,t._dialog_ref.disableClose=!0;const s=t.form.value,i=yield(0,_.qG)(s).toPromise().catch(o=>{throw t.loading=!1,t._dialog_ref.disableClose=!1,(0,d.UG)(`Error saving category: ${o.message}`),o});t.form.reset(),t.loading=!1,t._dialog_ref.close(i)})()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(T.Vh),e.rXU(I),e.rXU(T.CP))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-category-form"]],decls:8,vars:5,consts:[["load_state",""],[1,"flex","items-center","p-2"],[1,"text-center","text-xl","font-medium"],["btn","","icon","","matRipple","","mat-dialog-close","",4,"ngIf"],["class","flex-1 h-1/2 overflow-auto p-2 w-[20rem] max-w-[80vw]",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex justify-end space-x-2 p-2 border-t border-base-200",4,"ngIf"],["btn","","icon","","matRipple","","mat-dialog-close",""],[1,"flex-1","h-1/2","overflow-auto","p-2","w-[20rem]","max-w-[80vw]",3,"formGroup"],[1,"flex","flex-col","space-y-2"],["for","name"],["appearance","outline"],["matInput","","name","name","placeholder","Category Name","formControlName","name"],["formControlName","parent_category_id","placeholder","No Parent",3,"disabled"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex","justify-end","space-x-2","p-2","border-t","border-base-200"],["btn","","matRipple","","mat-dialog-close","",1,"w-32","inverse"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"flex","flex-col","items-center","justify-center","p-8"],[3,"diameter"],[1,"mt-4"]],template:function(s,i){if(1&s&&(e.j41(0,"header",1)(1,"h2",2),e.EFF(2),e.k0s(),e.DNE(3,Xt,3,0,"button",3),e.k0s(),e.DNE(4,Bt,18,7,"main",4)(5,Yt,5,0,"footer",5)(6,Ut,4,1,"ng-template",null,0,e.C5r)),2&s){const o=e.sdS(7);e.R7$(2),e.SpI(" ",i.form.value.id?"Edit":"Add"," Category "),e.R7$(),e.Y8G("ngIf",!i.loading),e.R7$(),e.Y8G("ngIf",!i.loading)("ngIfElse",o),e.R7$(),e.Y8G("ngIf",!i.loading)}},dependencies:[p.Sq,p.bT,k.rl,k.TL,N.fg,W.VO,v.wT,$.LG,T.tx,v.r6,f.me,f.BC,f.cb,f.j4,f.JD,S.R,p.Jj]})}return n})();var B=l(46815),zt=l(33747);let I=(()=>{class n extends d.Tv{get form(){return this._form}get is_new_ui(){return location.hash.includes("new")||location.pathname.includes("new")}get base_route(){return this.is_new_ui?"/book/assets/new":"/book/assets"}constructor(t,s,i){super(),this._spaces=t,this._org=s,this._dialog=i,this._options=new G.t({view:"grid"}),this._change=new G.t(0),this._poll=new G.t(0),this._extra_assets=new G.t([]),this._form=(0,_.QP)(),this._loading=new G.t(!1),this.loading=this._loading.asObservable(),this.options=this._options.asObservable(),this.extra_assets=this._extra_assets.asObservable(),this.products=(0,j.zV)([this._change,this._org.active_building]).pipe((0,E.n)(()=>(this._loading.next(!0),(0,_.iZ)({zone_id:this._org.building?.id}))),(0,Me.M)(o=>this._loading.next(!1)),(0,D.t)(1)),this.purchase_orders=this._change.pipe((0,E.n)(()=>(this._loading.next(!0),(0,_.fc)())),(0,Me.M)(()=>this._loading.next(!1)),(0,D.t)(1)),this.requests=(0,j.zV)([this._options,this._org.active_building,this._poll,this._change,this._spaces.initialised]).pipe((0,Lt.B)(200),(0,E.n)(([{date:o},a])=>{const c=(0,we.A)(o||Date.now()).valueOf(),u=(0,$t.A)(o||Date.now()).valueOf();return(0,P.tj)({zones:a?.id,period_start:(0,X.A)(c),period_end:(0,X.A)(u),type:"asset-request"}).pipe((0,F.T)(x=>x.map(y=>new P.Qr({...y,extension_data:{...y.extension_data,space:this._spaces.find(y.extension_data.space_id)}})).filter(y=>{const C=y.linked_event||y.linked_bookings[0];if(!C)return!1;const M=new zt.Y({...y.extension_data?.request});M._time=C.date||1e3*C.event_start||1e3*C.booking_start||c;const V=C.date_end||1e3*C.event_end||1e3*C.booking_end||u;return M?.deliver_at>=c&&M?.deliver_at<u&&M?.deliver_at<V})))}),(0,D.t)(1)),this.filtered_requests=(0,j.zV)([this.requests,this._options]).pipe((0,F.T)(([o,a])=>{const c=(a.search||"").toLowerCase();return console.log("Requests:",o,c),c?o.filter(u=>u.user_name.toLowerCase().includes(c)||u.title.toLowerCase().includes(c)||u.extension_data.location_name?.toLowerCase().includes(c)||u.extension_data.assets?.find(x=>x.name.toLowerCase().includes(c))||u.status.includes(c)||u.extension_data.tracking?.includes(c)):o})),this.categories=(0,j.zV)([this._options,this._change]).pipe((0,E.n)(()=>(0,_.vt)()),(0,F.T)(o=>[new _.$C({id:"",name:"Uncategorised"}),...o]),(0,D.t)(1)),this.active_product=(0,j.zV)([this._options,this._org.active_building,this._change]).pipe((0,le.p)(([{active_item:o}])=>!!o),(0,F.T)(([o,a])=>[o.active_item,a]),(0,ye.F)(),(0,E.n)(([o])=>(0,_.E4)(o,{zone_id:this._org.building.id})),(0,D.t)(1)),this.active_product_requests=this.active_product.pipe((0,E.n)(o=>this.requests.pipe((0,F.T)(a=>a.filter(c=>o.assets.find(u=>u.id===c.asset_id))))),(0,F.T)(o=>o.filter(a=>"declined"!==a.status))),this.filtered_products=(0,j.zV)([this.products,this._options]).pipe((0,F.T)(([o,a])=>a.search?o.filter(c=>c.name.toLowerCase().includes(a.search.toLowerCase())):o)),this.product_mapping=(0,j.zV)([this.filtered_products,this.categories]).pipe((0,F.T)(([o,a])=>{const c={_count:o.length};o.forEach(x=>x.category_id=a.find(y=>y.id===x.category_id)?x.category_id:"");const u=(0,d.Am)(o.map(x=>x.category_id));for(const x of u)c[x]=o.filter(y=>y.category_id===x);return c})),this.settings=(0,j.zV)([this._org.active_building,this._change]).pipe((0,le.p)(([o])=>!!o),(0,E.n)(([o])=>(0,q.bpY)(o.id,"assets-settings").pipe((0,Vt.W)(a=>(0,he.of)({})))),(0,F.T)(o=>o.details||{}),(0,D.t)(1)),this.availability=this.settings.pipe((0,F.T)(o=>o.disabled_rooms||[]))}startPolling(t=15e3){return this.interval("polling",()=>this._poll.next(Date.now()),t),()=>this.stopPolling()}stopPolling(){this.clearInterval("polling")}resetForm(){this._form=(0,_.QP)()}manageCategories(){const t=this._dialog.open(Ae,{data:{list:this.categories,edit:s=>this.editCategory(s)}});this.subscription("category_modal",t.componentInstance.changed.subscribe(()=>this._change.next(Date.now()))),t.afterClosed().subscribe(()=>this.unsub("category_modal"))}editCategory(t={}){var s=this;return(0,m.A)(function*(){const o=yield s._dialog.open(ce,{data:{category:t}}).afterClosed().toPromise();return o?(s._change.next(Date.now()),o):null})()}setExtraAssets(t){this._extra_assets.next(t)}setOptions(t){this._options.next({...this._options.getValue(),...t})}postChange(){this.timeout("change",()=>this._change.next(Date.now()),1e3)}setStatus(t,s){var i=this;return(0,m.A)(function*(){let o=t;return"declined"===s?o=yield(0,P.vB)(t.id).toPromise():"approved"===s&&(o=yield(0,P.DD)(t.id).toPromise()),i._change.next(Date.now()),o})()}setTracking(t,s){var i=this;return(0,m.A)(function*(){const o=yield(0,P.vq)(t.id,{...t.toJSON(),extension_data:{...t.extension_data,tracking:s}}).toPromise();return i._change.next(Date.now()),o})()}deleteActiveProduct(){var t=this;return(0,m.A)(function*(){const s=yield t.active_product.pipe((0,H.s)(1)).toPromise();s?.id&&(yield(0,_.nP)(s.id).toPromise(),t._change.next(Date.now()),(0,d.VX)("Successfully deleted asset"))})()}postForm(){var t=this;return(0,m.A)(function*(){if(!t.form?.valid)return;const s=t.form.value,i={...s},o=["other_data","id","name","quantity","category","purchase_date","brand","images"];for(const c of o)delete i[c];s.other_data=(0,q.jv5)(i,[void 0,null,""]);const a=yield(0,_.We)(s).toPromise();return t._change.next(Date.now()),(0,d.VX)(`Successfully ${s.id?"updated":"created"} asset`),t.resetForm(),a.id})()}editConfig(){var t=this;return(0,m.A)(function*(){const s=yield t.getConfig(t._org.building.id),i=yield t.products.pipe((0,H.s)(1)).toPromise(),o=(0,d.Am)((0,d.Bq)(i.map(u=>[u.name]))),a=t._dialog.open(B.Rt,{data:{resource_name:"Assets",config:s,types:o,require_notes:!1}}),c=yield Promise.race([a.componentInstance.event.pipe((0,Q.$)(u=>"done"===u.reason)).toPromise(),a.afterClosed().toPromise()]);"done"===c?.reason&&t.updateConfig(t._org.building.id,c.metadata).then(()=>a.close(),()=>a.componentInstance.loading=!1)})()}getConfig(t=this._org.building.id){return(0,m.A)(function*(){const s=(yield(0,q.bpY)(t,"assets_config").toPromise()).details;return s instanceof Array?s:[]})()}updateConfig(t,s){return(0,q.D58)(t,{id:t,name:"assets_config",details:s,description:`Assets config for ${t}`}).toPromise()}saveSettings(t){var s=this;return(0,m.A)(function*(){const i=yield s.settings.pipe((0,H.s)(1)).toPromise(),o=yield(0,q.D58)(s._org.building.id,{id:s._org.building.id,name:"assets-settings",details:{...i,...t},description:`Assets settings for ${s._org.building.id}`}).toPromise();return s._change.next(Date.now()),o})()}static#e=this.\u0275fac=function(s){return new(s||n)(e.KVO(Nt.bh),e.KVO(A.yb),e.KVO(T.bZ))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Y=l(38223),Jt=l(80640);const Ht=n=>[n,"manage","group"],Qt=n=>[n,"manage","purchase-order"];function Wt(n,r){if(1&n&&(e.j41(0,"a",10),e.EFF(1," Add Product "),e.k0s()),2&n){const t=e.XpG();e.Y8G("routerLink",e.eq3(1,Ht,t.base_route))}}function Zt(n,r){if(1&n&&(e.j41(0,"a",10),e.EFF(1," Add Purchase Order "),e.k0s()),2&n){const t=e.XpG();e.Y8G("routerLink",e.eq3(1,Qt,t.base_route))}}function Kt(n,r){if(1&n){const t=e.RV6();e.j41(0,"mat-button-toggle-group",11),e.nI1(1,"async"),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.setOptions({view:i}))}),e.j41(2,"mat-button-toggle",12)(3,"div",13)(4,"app-icon"),e.EFF(5,"view_module"),e.k0s()()(),e.j41(6,"mat-button-toggle",14)(7,"div",13)(8,"app-icon"),e.EFF(9,"view_list"),e.k0s()()()()}if(2&n){let t;const s=e.XpG();e.Y8G("ngModel",null==(t=e.bMT(1,1,s.options))?null:t.view)}}function en(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",15),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.editConfig())}),e.j41(1,"app-icon"),e.EFF(2,"menu_book"),e.k0s()()}}function tn(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.setRoomAvailability())}),e.j41(1,"app-icon"),e.EFF(2,"event_available"),e.k0s()()}}function nn(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",17),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.manageCategories())}),e.j41(1,"app-icon"),e.EFF(2,"list_alt"),e.k0s()()}}let Se=(()=>{class n extends d.Tv{get base_route(){return this._state.base_route}constructor(t,s){super(),this._state=t,this._dialog=s,this.active="",this.options=this._state.options,this.setOptions=i=>this._state.setOptions(i),this.manageCategories=()=>this._state.manageCategories(),this.editConfig=()=>this._state.editConfig()}setRoomAvailability(){var t=this;return(0,m.A)(function*(){const s=t._dialog.open(B.DJ,{data:{type:"Assets",disabled_rooms:yield t._state.availability.pipe((0,H.s)(1)).toPromise()}});t.subscription("room-availability",s.componentInstance.change.subscribe(function(){var i=(0,m.A)(function*(o){yield t._state.saveSettings({disabled_rooms:o}).catch(),s.componentInstance.loading=!1});return function(o){return i.apply(this,arguments)}}()))})()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(I),e.rXU(T.bZ))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-manager-topbar"]],inputs:{active:"active"},features:[e.Vt3],decls:13,vars:9,consts:[[1,"w-full","px-4","py-2","bg-base-100","flex","items-center","space-x-4"],["btn","","matRipple","","class","secondary",3,"routerLink",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],[1,"flex-1"],["btn","","icon","","matRipple","","class","border border-base-200","matTooltip","Edit Config",3,"click",4,"ngIf"],["btn","","icon","","matRipple","","class","border border-base-200","matTooltip","Room Availability",3,"click",4,"ngIf"],["btn","","icon","","matRipple","","class","border border-base-200","matTooltip","Manage Categories",3,"click",4,"ngIf"],["appearance","outline",1,"h-[3.25rem]"],["matPrefix","",1,"text-2xl","relative","top-1","-left-1"],["matInput","","placeholder","Search products and requests",3,"ngModelChange","ngModel"],["btn","","matRipple","",1,"secondary",3,"routerLink"],[3,"ngModelChange","ngModel"],["value","grid"],[1,"flex","items-center","justify-center","h-10","w-6","text-xl"],["value","list"],["btn","","icon","","matRipple","","matTooltip","Edit Config",1,"border","border-base-200",3,"click"],["btn","","icon","","matRipple","","matTooltip","Room Availability",1,"border","border-base-200",3,"click"],["btn","","icon","","matRipple","","matTooltip","Manage Categories",1,"border","border-base-200",3,"click"]],template:function(s,i){if(1&s&&(e.j41(0,"div",0),e.DNE(1,Wt,2,3,"a",1)(2,Zt,2,3,"a",1)(3,Kt,10,3,"mat-button-toggle-group",2),e.nrm(4,"div",3),e.DNE(5,en,3,0,"button",4)(6,tn,3,0,"button",5)(7,nn,3,0,"button",6),e.j41(8,"mat-form-field",7)(9,"app-icon",8),e.EFF(10," search "),e.k0s(),e.j41(11,"input",9),e.nI1(12,"async"),e.bIt("ngModelChange",function(a){return i.setOptions({search:a})}),e.k0s()()()),2&s){let o;e.R7$(),e.Y8G("ngIf","items"===i.active),e.R7$(),e.Y8G("ngIf","purchase-orders"===i.active),e.R7$(),e.Y8G("ngIf","items"===i.active),e.R7$(2),e.Y8G("ngIf","items"===i.active),e.R7$(),e.Y8G("ngIf","items"===i.active),e.R7$(),e.Y8G("ngIf","items"===i.active),e.R7$(4),e.Y8G("ngModel",null==(o=e.bMT(12,7,i.options))?null:o.search)}},dependencies:[p.bT,k.rl,k.JW,N.fg,Jt.oV,v.r6,f.me,f.BC,f.vS,S.R,K.ec,K.pc,h.Wk,p.Jj]})}return n})();const sn=n=>[n,"list","items"],on=n=>[n,"list","purchase-orders"],rn=n=>[n,"list","requests"];function an(n,r){if(1&n){const t=e.RV6();e.j41(0,"a",7),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.active="requests")}),e.EFF(1," Requests "),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("routerLink",e.eq3(3,rn,t.base_route))("routerLinkActive","active")("active","requests"===t.active)}}function ln(n,r){if(1&n){const t=e.RV6();e.j41(0,"nav",4),e.DNE(1,an,2,5,"a",5),e.j41(2,"a",6),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.active="items")}),e.EFF(3," Products "),e.k0s(),e.j41(4,"a",6),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.active="purchase-orders")}),e.EFF(5," Purchase Orders "),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.is_new),e.R7$(),e.Y8G("routerLink",e.eq3(5,sn,t.base_route))("active","items"===t.active),e.R7$(2),e.Y8G("routerLink",e.eq3(7,on,t.base_route))("active","purchase-orders"===t.active)}}let Ge=(()=>{class n extends d.Tv{get base_route(){return this._state.base_route}constructor(t,s){super(),this._router=t,this._state=s,this.active="requests",this.is_new=!1}ngOnInit(){this.is_new=this._router.url.includes("new"),this.active=this._router.url.includes("requests")?"requests":this._router.url.includes("items")?"items":"purchase-orders",this.subscription("router.events",this._router.events.subscribe(t=>{t instanceof h.wF&&(this.is_new=this._router.url.includes("new"),this.active=this._router.url.includes("requests")?"requests":this._router.url.includes("items")?"items":"purchase-orders")}))}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(h.Ix),e.rXU(I))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-listing"]],features:[e.Vt3],decls:5,vars:2,consts:[[3,"active"],[1,"flex","flex-col","flex-1","h-1/2","w-full","px-4"],["mat-tab-nav-bar","",4,"ngIf"],[1,"flex-1","h-1/2","w-full","overflow-visible"],["mat-tab-nav-bar",""],["mat-tab-link","",3,"routerLink","routerLinkActive","active","click",4,"ngIf"],["mat-tab-link","",3,"click","routerLink","active"],["mat-tab-link","",3,"click","routerLink","routerLinkActive","active"]],template:function(s,i){1&s&&(e.nrm(0,"asset-manager-topbar",0),e.j41(1,"div",1),e.DNE(2,ln,6,9,"nav",2),e.j41(3,"div",3),e.nrm(4,"router-outlet"),e.k0s()()),2&s&&(e.Y8G("active",i.active),e.R7$(2),e.Y8G("ngIf",!i.is_new||"requests"!==i.active))},dependencies:[p.bT,Y.Bu,Y.Ql,h.n3,h.Wk,h.wQ,Se],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%}\n\n/*# sourceMappingURL=asset-listing.component.ts-angular-inline--116.css.map*/"]})}return n})();var cn=l(74605);const pn=["asset-manager",""];let De=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["","asset-manager",""]],attrs:pn,decls:3,vars:0,consts:[[1,"relative","w-1/2","flex-1","bg-base-100","overflow-hidden"]],template:function(s,i){1&s&&(e.nrm(0,"sidebar"),e.j41(1,"main",0),e.nrm(2,"router-outlet"),e.k0s())},dependencies:[cn.k,h.n3],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%;background:var(--b1)}\n\n/*# sourceMappingURL=asset-manager.component.ts-angular-inline--117.css.map*/"]})}return n})();var dn=l(22011),w=l(31034),un=l(24918),U=l(12993);let Z=(()=>{class n{transform(t,s="_",i=" "){return(t||"").split(s).join(i)}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275pipe=e.EJ8({name:"splitjoin",type:n,pure:!0})}return n})();const mn=()=>["zones","description","tracking","user_name"],_n=()=>["Level","Space","Tracking","Requestee"],fn=()=>["4r","flex","10r","6r"],hn=(n,r)=>({tracking:n,zones:r}),Ne=()=>({display:"none"}),gn=(n,r)=>({"#Zones":n,"#zones":r});function vn(n,r){if(1&n&&(e.j41(0,"div",16),e.EFF(1),e.k0s()),2&n){let t;const s=e.XpG();e.R7$(),e.SpI(" ",(null==(t=s.level(s.selected.zone))?null:t.display_name)||"N/A"," ")}}function bn(n,r){if(1&n&&e.nrm(0,"interactive-map",17),2&n){let t;const s=e.XpG();e.Y8G("src",(null==(t=s.level(s.selected.zone))?null:t.map_id)||"")("styles",e.l_i(5,gn,e.lJ4(3,Ne),e.lJ4(4,Ne)))("features",s.selected_feature)}}function xn(n,r){1&n&&(e.j41(0,"p",18),e.EFF(1," Select a space from the list to view map location "),e.k0s())}function yn(n,r){if(1&n&&e.EFF(0),2&n){let t;const s=r.data,i=e.XpG();e.SpI(" ",(null==(t=i.level(s))?null:t.display_name)||"N/A"," ")}}function Fn(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())}),e.j41(1,"div",20),e.EFF(2),e.nI1(3,"splitjoin"),e.k0s(),e.j41(4,"app-icon",21),e.EFF(5,"expand_more"),e.k0s()(),e.j41(6,"mat-menu",22,3)(8,"button",23),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG();return e.Njj(o.setTracking(i,"in_storage"))}),e.EFF(9," In Storage "),e.k0s(),e.j41(10,"button",23),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG();return e.Njj(o.setTracking(i,"in_transit"))}),e.EFF(11," In Transit "),e.k0s(),e.j41(12,"button",23),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG();return e.Njj(o.setTracking(i,"at_location"))}),e.EFF(13," At Location "),e.k0s()()}if(2&n){const t=r.row,s=e.sdS(7),i=e.XpG();e.Y8G("matMenuTriggerFor",s)("disabled",i.loading[t.id]),e.R7$(2),e.SpI(" ",e.bMT(3,3,null==t.extension_data?null:t.extension_data.tracking)||"In Storage"," ")}}let $e=(()=>{class n{updateFeatures(){var t=this;return(0,m.A)(function*(){const s=yield t._space.transform(t.selected.extension_data?.location_id);t.selected_feature=t.selected?[{location:s.map_id,content:B.VT,z_index:99,data:{message:`${s.display_name||s.name} is here`}}]:[]})()}setTracking(t,s){var i=this;return(0,m.A)(function*(){i.loading[t.id]=!0,yield i._state.setTracking(t,s),i.loading[t.id]=!1})()}constructor(t,s,i){this._state=t,this._org=s,this._space=i,this.asset=this._state.active_product,this.requests=this._state.active_product_requests,this.loading={}}level(t){return this._org.levelWithID(t)}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(I),e.rXU(A.yb),e.rXU(dn.J))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-location-modal"]],decls:24,vars:20,consts:[["empty_state",""],["level_template",""],["tracking_template",""],["tracking_menu","matMenu"],[1,"p-6","relative"],["icon","","matRipple","","mat-dialog-close","",1,"absolute","top-4","right-4"],[1,"font-medium","mb-2"],["appearance","outline",1,"h-[3.5rem]","mb-2"],["matPrefix",""],["matInput","","placeholder","Search..."],[1,"flex","items-center","space-x-4","w-[90vw]","text-sm"],[1,"flex-1","h-[60vh]","w-1/2","border","border-base-200","bg-base-200","overflow-auto"],[3,"row_clicked","dataSource","columns","display_column","column_size","template"],[1,"flex-1","h-[60vh]","w-1/2","border","border-base-200","bg-base-200","relative","flex","items-center","justify-center"],["class","absolute top-4 left-4 bg-base-100 px-4 py-2 rounded-3xl border border-base-200",4,"ngIf"],[3,"src","styles","features",4,"ngIf","ngIfElse"],[1,"absolute","top-4","left-4","bg-base-100","px-4","py-2","rounded-3xl","border","border-base-200"],[3,"src","styles","features"],[1,"opacity-30"],["matRipple","",1,"bg-none","w-full","flex","items-center","px-2","py-1","text-left",3,"click","matMenuTriggerFor","disabled"],[1,"capitalize","flex-1"],[1,"text-2xl"],[1,"w-36"],["mat-menu-item","",3,"click"]],template:function(s,i){if(1&s){const o=e.RV6();e.j41(0,"div",4)(1,"button",5)(2,"app-icon"),e.EFF(3,"close"),e.k0s()(),e.j41(4,"h2",6),e.EFF(5),e.nI1(6,"async"),e.nI1(7,"async"),e.k0s(),e.j41(8,"mat-form-field",7)(9,"app-icon",8),e.EFF(10,"search"),e.k0s(),e.nrm(11,"input",9),e.k0s(),e.j41(12,"div",10)(13,"div",11)(14,"custom-table",12),e.bIt("row_clicked",function(c){return e.eBV(o),i.selected=c,e.Njj(i.updateFeatures())}),e.k0s()(),e.j41(15,"div",13),e.DNE(16,vn,2,1,"div",14)(17,bn,1,8,"interactive-map",15),e.k0s()()(),e.DNE(18,xn,2,0,"ng-template",null,0,e.C5r)(20,yn,1,1,"ng-template",null,1,e.C5r)(22,Fn,14,5,"ng-template",null,2,e.C5r)}if(2&s){let o;const a=e.sdS(19),c=e.sdS(21),u=e.sdS(23);e.R7$(5),e.Lme(" ",null==(o=e.bMT(6,10,i.asset))?null:o.name," in use location: ",null==(o=e.bMT(7,12,i.requests))?null:o.length," "),e.R7$(9),e.Y8G("dataSource",i.requests)("columns",e.lJ4(14,mn))("display_column",e.lJ4(15,_n))("column_size",e.lJ4(16,fn))("template",e.l_i(17,hn,u,c)),e.R7$(2),e.Y8G("ngIf",i.selected),e.R7$(),e.Y8G("ngIf",i.selected)("ngIfElse",a)}},dependencies:[p.bT,k.rl,k.JW,N.fg,w.kk,w.fb,w.Cp,T.tx,v.r6,S.R,un.S,U.r,p.Jj,Z]})}return n})();var kn=l(53838),Cn=l(22238),In=l(65277);const jn=n=>[n,"list","items"],pe=()=>[],Tn=n=>[n,"manage","group"],En=n=>({id:n}),Le=n=>[n,"manage","asset"],de=n=>({group_id:n}),Rn=n=>[n,"manage","asset-bulk"],wn=()=>["id","identifier","serial_number","actions"],Mn=()=>["ID","Label/Friendly Name","Serial Number"," "],An=()=>["10r","14r","8r","flex"],Sn=n=>({actions:n}),Ve=n=>[n,"manage","purchase-order"],Gn=()=>["purchase_order_number","invoice_number","expected_service_start_date","expected_service_end_date","actions"],Dn=()=>["Order Number","Invoice Number","Service Start","Service End"," "],Nn=()=>["10r","10r","10r","10r","flex"],$n=(n,r,t)=>({actions:n,expected_service_start_date:r,expected_service_end_date:t}),Oe=(n,r)=>({id:n,group_id:r});function Ln(n,r){if(1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"async"),e.bVm()),2&n){let t;const s=e.XpG(2);e.R7$(),e.SpI(" ",(null==(t=e.bMT(2,1,s.item))?null:t.description)||"~No Description~"," ")}}function Vn(n,r){1&n&&(e.j41(0,"span",49),e.EFF(1,"No Description"),e.k0s())}function On(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",50)(1,"a",51),e.nI1(2,"async"),e.j41(3,"app-icon",26),e.EFF(4,"edit"),e.k0s()(),e.j41(5,"button",52),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG(2);return e.Njj(o.removeAsset(i))}),e.j41(6,"app-icon",26),e.EFF(7,"delete"),e.k0s()()()}if(2&n){let t;const s=r.row,i=e.XpG(2);e.R7$(),e.Y8G("routerLink",e.eq3(4,Le,i.base_route))("queryParams",e.l_i(6,Oe,s.id,null==(t=e.bMT(2,2,i.item))?null:t.id))}}function Pn(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",50)(1,"a",51)(2,"app-icon",26),e.EFF(3,"edit"),e.k0s()(),e.j41(4,"button",52),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG(2);return e.Njj(o.removePurchaseOrder(i))}),e.j41(5,"app-icon",26),e.EFF(6,"delete"),e.k0s()()()}if(2&n){const t=r.row,s=e.XpG(2);e.R7$(),e.Y8G("routerLink",e.eq3(2,Ve,s.base_route))("queryParams",e.l_i(4,Oe,t.id,null==t?null:t.id))}}function Xn(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"a",12)(3,"div",13)(4,"app-icon",14),e.EFF(5,"arrow_back"),e.k0s(),e.j41(6,"div",15),e.EFF(7,"Back"),e.k0s()()(),e.j41(8,"div",16)(9,"span"),e.EFF(10,"Assets"),e.k0s(),e.j41(11,"span")(12,"app-icon",17),e.EFF(13,"chevron_right"),e.k0s()(),e.j41(14,"span"),e.EFF(15),e.nI1(16,"async"),e.k0s(),e.j41(17,"span")(18,"app-icon",17),e.EFF(19,"chevron_right"),e.k0s()(),e.j41(20,"span"),e.EFF(21),e.nI1(22,"async"),e.k0s()()(),e.j41(23,"div",13)(24,"div",18),e.nrm(25,"image-carousel",19),e.nI1(26,"async"),e.k0s(),e.j41(27,"div",20)(28,"div",21)(29,"div",22),e.EFF(30),e.nI1(31,"async"),e.k0s(),e.j41(32,"div",23)(33,"a",24),e.nI1(34,"async"),e.j41(35,"div",25)(36,"app-icon",26),e.EFF(37,"edit"),e.k0s(),e.j41(38,"div",27),e.EFF(39,"Edit"),e.k0s()()(),e.nrm(40,"div",28),e.j41(41,"button",29)(42,"div",30)(43,"app-icon",26),e.EFF(44,"delete"),e.k0s(),e.j41(45,"div",27),e.EFF(46,"Delete"),e.k0s()()()()(),e.j41(47,"div",31),e.DNE(48,Ln,3,3,"ng-container",32),e.nI1(49,"async"),e.DNE(50,Vn,2,0,"ng-template",null,5,e.C5r),e.k0s(),e.j41(52,"div",33)(53,"div",34)(54,"div",35),e.EFF(55),e.nI1(56,"async"),e.nI1(57,"async"),e.k0s()(),e.j41(58,"div",34)(59,"div",35),e.EFF(60),e.nI1(61,"async"),e.k0s(),e.j41(62,"button",36),e.nI1(63,"async"),e.nI1(64,"async"),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.viewLocations())}),e.EFF(65," View Locations "),e.k0s()()()()(),e.j41(66,"mat-tab-group",37)(67,"mat-tab",38)(68,"div",39)(69,"h3",40),e.EFF(70,"Assets"),e.k0s(),e.j41(71,"div",41)(72,"a",42),e.nI1(73,"async"),e.EFF(74," Add Asset "),e.k0s(),e.j41(75,"a",42),e.nI1(76,"async"),e.EFF(77," Bulk Add Asset "),e.k0s()(),e.nrm(78,"custom-table",43),e.nI1(79,"async"),e.DNE(80,On,8,9,"ng-template",null,6,e.C5r),e.k0s()(),e.j41(82,"mat-tab",44)(83,"div",39)(84,"h3",40),e.EFF(85,"General"),e.k0s(),e.j41(86,"div",45)(87,"div",46)(88,"label"),e.EFF(89,"Brand"),e.k0s(),e.j41(90,"div"),e.EFF(91),e.nI1(92,"async"),e.k0s()()()()(),e.j41(93,"mat-tab",47)(94,"div",39)(95,"h3",40),e.EFF(96,"Purchase Orders"),e.k0s(),e.j41(97,"a",48),e.nI1(98,"async"),e.EFF(99," Add Purchase Order "),e.k0s(),e.nrm(100,"custom-table",43),e.nI1(101,"async"),e.DNE(102,Pn,7,7,"ng-template",null,7,e.C5r),e.k0s()()()()}if(2&n){let t,s,i,o,a,c,u,x,y,C,M,L,V,nt;const ki=e.sdS(51),Ci=e.sdS(81),Ii=e.sdS(103),b=e.XpG(),st=e.sdS(5),ji=e.sdS(7);e.R7$(2),e.Y8G("routerLink",e.eq3(64,jn,b.base_route)),e.R7$(13),e.JRh(null==(t=e.bMT(16,30,b.item))||null==t.category?null:t.category.name),e.R7$(6),e.JRh(null==(s=e.bMT(22,32,b.item))?null:s.name),e.R7$(4),e.Y8G("images",(null==(i=e.bMT(26,34,b.item))?null:i.images)||e.lJ4(66,pe)),e.R7$(5),e.SpI(" ",null==(o=e.bMT(31,36,b.item))?null:o.name," "),e.R7$(3),e.Y8G("routerLink",e.eq3(67,Tn,b.base_route))("queryParams",e.eq3(69,En,null==(a=e.bMT(34,38,b.item))?null:a.id)),e.R7$(9),e.Y8G("content",ji),e.R7$(6),e.Y8G("ngIf",null==(c=e.bMT(49,40,b.item))?null:c.description)("ngIfElse",ki),e.R7$(7),e.SpI(" Available: ",e.bMT(56,42,b.asset_list).length-(null==(u=e.bMT(57,44,b.requests))?null:u.length)||0," "),e.R7$(5),e.SpI(" In Use: ",(null==(x=e.bMT(61,46,b.requests))?null:x.length)||0," "),e.R7$(2),e.Y8G("disabled",e.bMT(63,48,b.asset_list).length-(null==(y=e.bMT(64,50,b.requests))?null:y.length)!=0),e.R7$(10),e.Y8G("routerLink",e.eq3(71,Le,b.base_route))("queryParams",e.eq3(73,de,null==(C=e.bMT(73,52,b.item))?null:C.id)),e.R7$(3),e.Y8G("routerLink",e.eq3(75,Rn,b.base_route))("queryParams",e.eq3(77,de,null==(M=e.bMT(76,54,b.item))?null:M.id)),e.R7$(3),e.Y8G("dataSource",e.bMT(79,56,b.asset_list)||e.lJ4(79,pe))("columns",e.lJ4(80,wn))("display_column",e.lJ4(81,Mn))("column_size",e.lJ4(82,An))("template",e.eq3(83,Sn,Ci)),e.R7$(13),e.SpI(" ",(null==(L=e.bMT(92,58,b.item))?null:L.brand)||"~None~"," "),e.R7$(6),e.Y8G("routerLink",e.eq3(85,Ve,b.base_route))("queryParams",e.eq3(87,de,null==(V=e.bMT(98,60,b.item))?null:V.id)),e.R7$(3),e.Y8G("dataSource",(null==(nt=e.bMT(101,62,b.item))?null:nt.purchase_orders)||e.lJ4(89,pe))("columns",e.lJ4(90,Gn))("display_column",e.lJ4(91,Dn))("column_size",e.lJ4(92,Nn))("template",e.sMw(93,$n,Ii,st,st))}}function qn(n,r){1&n&&(e.j41(0,"div",53),e.nrm(1,"mat-spinner",54),e.j41(2,"p"),e.EFF(3,"Loading product details..."),e.k0s()()),2&n&&(e.R7$(),e.Y8G("diameter",32))}function Bn(n,r){1&n&&(e.j41(0,"span",49),e.EFF(1," No Date "),e.k0s())}function Yn(n,r){if(1&n&&(e.EFF(0),e.nI1(1,"date"),e.DNE(2,Bn,2,0,"span",55)),2&n){const t=r.data;e.SpI(" ",e.i5U(1,2,1e3*t,"mediumDate")," "),e.R7$(2),e.Y8G("ngIf",!t)}}function Un(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",57)(1,"p"),e.EFF(2,"Are you sure you want to permanently delete this product?"),e.k0s(),e.j41(3,"div",58)(4,"button",59),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.closeTooltip())}),e.EFF(5," No "),e.k0s(),e.j41(6,"button",60),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.deleteAsset())}),e.EFF(7," Yes, delete "),e.k0s()()()}}function zn(n,r){1&n&&(e.j41(0,"div",61),e.nrm(1,"mat-spinner",54),e.j41(2,"p"),e.EFF(3,"Deleting product details..."),e.k0s()()),2&n&&(e.R7$(),e.Y8G("diameter",32))}function Jn(n,r){if(1&n&&e.DNE(0,Un,8,0,"div",56)(1,zn,4,1,"ng-template",null,8,e.C5r),2&n){const t=e.sdS(2),s=e.XpG();e.Y8G("ngIf",!s.deleting)("ngIfElse",t)}}function Hn(n,r){1&n&&(e.j41(0,"div",62),e.EFF(1,"No purchase orders"),e.k0s())}function Qn(n,r){1&n&&(e.j41(0,"div",62),e.EFF(1,"No assets"),e.k0s())}let Pe=(()=>{class n extends d.Tv{deleteAsset(){var t=this;return(0,m.A)(function*(){t.deleting=!0,yield t._state.deleteActiveProduct(),t.deleting=!1,t._router.navigate([t._state.base_route,"list","items"]),t.closeTooltip()})()}closeTooltip(){this._tooltip_el?.close()}get code(){return this._org.currency_code}get base_route(){return this._state.base_route}constructor(t,s,i,o,a){super(),this._route=t,this._router=s,this._state=i,this._dialog=o,this._org=a,this.loading=!1,this.deleting=!1,this.item=this._state.active_product,this.asset_list=(0,j.zV)([this.item,this._state.extra_assets]).pipe((0,F.T)(([c,u])=>c?(0,d.Am)([...c.assets,...u.filter(x=>x.type_id===c.id)],"id"):[])),this.requests=this._state.active_product_requests.pipe((0,F.T)(c=>c.filter(u=>u.date<=Date.now()&&(0,kn.A)(u.date,u.duration).valueOf()>=Date.now())))}viewLocations(){this._dialog.open($e)}ngOnInit(){this.loading=!0,this.subscription("route.params",this._route.paramMap.subscribe(t=>{t.has("id")&&this._state.setOptions({active_item:t.get("id")})})),this.timeout("no_asset",()=>this._router.navigate([this._state.base_route]),1e3),this._state.active_product.pipe((0,Q.$)(t=>!!t)).subscribe(()=>{this.clearTimeout("no_asset"),this.loading=!1})}removeAsset(t){var s=this;return(0,m.A)(function*(){const i=yield(0,d.GE)({title:"Delete asset",content:"Are you sure you want to delete this asset?",confirm_text:"Delete",icon:{content:"delete"}},s._dialog);if("done"!==i.reason)return;i.loading("Deleting asset..."),yield(0,_.AO)(t.id).toPromise(),yield(0,_.hi)(t.id);const o=yield s._state.active_product.pipe((0,Q.$)()).toPromise();s._state.setOptions({active_item:""}),setTimeout(()=>s._state.setOptions({active_item:o.id}),1e3),i.close()})()}removePurchaseOrder(t){var s=this;return(0,m.A)(function*(){const i=yield(0,d.GE)({title:"Delete purchase order",content:"Are you sure you want to delete this purchase order?",confirm_text:"Delete",icon:{content:"delete"}},s._dialog);if("done"!==i.reason)return;i.loading("Deleting purchase order..."),yield(0,_.ro)(t.id).toPromise();const o=yield s._state.active_product.pipe((0,Q.$)()).toPromise();s._state.setOptions({active_item:""}),setTimeout(()=>s._state.setOptions({active_item:o.id}),1e3),i.close()})()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(h.nX),e.rXU(h.Ix),e.rXU(I),e.rXU(T.bZ),e.rXU(A.yb))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-view"]],viewQuery:function(s,i){if(1&s&&e.GBs(B.In,5),2&s){let o;e.mGM(o=e.lsd())&&(i._tooltip_el=o.first)}},features:[e.Vt3],decls:12,vars:4,consts:[["loading_state",""],["date_template",""],["delete_tooltip",""],["empty_invoices",""],["empty_items",""],["no_desc_state",""],["action_template",""],["po_action_template",""],["delete_loading",""],["class","h-full w-full flex flex-col",4,"ngIf","ngIfElse"],[1,"h-full","w-full","flex","flex-col"],[1,"flex","items-center","space-x-4","p-2","bg-base-100","border-b","border-base-200"],["btn","","matRipple","",1,"inverse",3,"routerLink"],[1,"flex","items-center"],[1,"text-xl"],[1,"mr-2"],[1,"flex","items-center","space-x-2","font-medium"],[1,"text-2xl"],[1,"bg-base-100","flex-1","w-1/2","h-[22.5rem]"],[3,"images"],[1,"w-[32rem]","h-[22.5rem]","px-4","flex","flex-col"],[1,"w-full","flex","items-center","justify-between","border-b","border-base-200"],[1,"font-medium"],[1,"flex","items-center","text-sm"],["btn","","matRipple","",1,"clear",3,"routerLink","queryParams"],[1,"flex","items-center","text-blue-600","hover:text-blue-900"],[1,"text-lg"],[1,"mr-2","underline"],[1,"w-px","h-4","bg-base-200"],["btn","","matRipple","",1,"clear"],["customTooltip","",1,"flex","items-center","text-blue-600","hover:text-blue-900",3,"content"],[1,"py-4","w-full","flex-1","h-1/2","overflow-auto"],[4,"ngIf","ngIfElse"],[1,"rounded","bg-base-100","shadow","border","border-base-200","w-full","divide-y","divide-base-200"],[1,"flex","items-center","justify-between","p-3"],[1,"pl-2"],["btn","","matRipple","",3,"click","disabled"],[1,"flex-1","h-px"],["label","Assets"],[1,"max-w-[768px]","mx-auto","p-4"],[1,"p-2"],[1,"flex","w-full","items-center","space-x-2","mb-2"],["btn","","matRipple","",1,"flex-1",3,"routerLink","queryParams"],["asset-view","","empty","No assets for this product",1,"w-full","block","text-sm",3,"dataSource","columns","display_column","column_size","template"],["label","Specifications"],["data-table","",1,"bg-base-100","border","border-base-200"],[1,"flex","items-center","p-2"],["label","Purchase information"],["btn","","matRipple","",1,"mb-2",3,"routerLink","queryParams"],[1,"opacity-30"],[1,"flex","w-full","items-center","justify-end"],["btn","","icon","","matRipple","",1,"clear",3,"routerLink","queryParams"],["btn","","icon","","matRipple","",3,"click"],[1,"h-full","w-full","flex","flex-col","items-center","justify-center"],[3,"diameter"],["class","opacity-30",4,"ngIf"],["class","p-4 bg-base-100 rounded my-2 text-center w-[18rem]",4,"ngIf","ngIfElse"],[1,"p-4","bg-base-100","rounded","my-2","text-center","w-[18rem]"],[1,"flex","items-center","space-x-2","mt-6"],["btn","","matRipple","",1,"inverse","flex-1","w-24",3,"click"],["btn","","matRipple","",1,"error","flex-1","w-24",3,"click"],[1,"p-4","bg-base-100","rounded","my-2","w-64","h-36","flex","flex-col","items-center","justify-center","space-y-2"],[1,"p-2","opacity-30"]],template:function(s,i){if(1&s&&(e.DNE(0,Xn,104,97,"div",9),e.nI1(1,"async"),e.DNE(2,qn,4,1,"ng-template",null,0,e.C5r)(4,Yn,3,5,"ng-template",null,1,e.C5r)(6,Jn,3,2,"ng-template",null,2,e.C5r)(8,Hn,2,0,"ng-template",null,3,e.C5r)(10,Qn,2,0,"ng-template",null,4,e.C5r)),2&s){const o=e.sdS(3);e.Y8G("ngIf",!i.loading&&e.bMT(1,2,i.item))("ngIfElse",o)}},dependencies:[p.bT,$.LG,v.r6,S.R,U.r,Cn.I,In.H,Y.mq,Y.T8,h.Wk,p.Jj,p.vh],styles:["[_nghost-%COMP%]{height:100%}[data-table][_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2n){background:#0001}label[_ngcontent-%COMP%]{width:10rem;min-width:0}\n\n/*# sourceMappingURL=asset-view.component.ts-angular-inline--118.css.map*/"]})}return n})();var Wn=l(94584),Xe=l(23574),Zn=l(5689);let qe=(()=>{class n{transform(t,s=!0){let i=(0,Zn.A)({days:Math.floor(t/1440),hours:Math.floor(t/60%24),minutes:Math.floor(t%60)});return s?i.replace(" day","d").replace(" hour","hr").replace(" minute","min"):i}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275pipe=e.EJ8({name:"duration",type:n,pure:!0})}return n})();const Kn=n=>({name:n});function es(n,r){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.j41(2,"span",29),e.EFF(3),e.k0s()()),2&n){const t=r.$implicit;e.R7$(),e.SpI(" ",t.name," "),e.R7$(2),e.SpI(" x",t.quantity," ")}}function ts(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",3),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return i.request=null,e.Njj(i.requestChange.emit(i.request))}),e.nrm(1,"div",4),e.j41(2,"div",5),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())}),e.j41(3,"button",6),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return i.request=null,e.Njj(i.requestChange.emit(i.request))}),e.j41(4,"app-icon"),e.EFF(5,"close"),e.k0s()(),e.j41(6,"div",7),e.nrm(7,"a-user-avatar",8),e.j41(8,"div",9)(9,"div",10),e.EFF(10),e.k0s(),e.j41(11,"div",11)(12,"app-icon"),e.EFF(13,"mail"),e.k0s(),e.j41(14,"a",12),e.EFF(15),e.k0s()(),e.j41(16,"div",11)(17,"app-icon"),e.EFF(18,"call"),e.k0s(),e.j41(19,"a",12),e.EFF(20),e.k0s()(),e.j41(21,"div",11)(22,"app-icon"),e.EFF(23,"work_outline"),e.k0s(),e.j41(24,"div"),e.EFF(25),e.k0s()()()(),e.j41(26,"div",13)(27,"div",14)(28,"div",15)(29,"app-icon",16),e.EFF(30,"send"),e.k0s()(),e.j41(31,"div",10),e.EFF(32,"Asset Requested"),e.k0s()(),e.j41(33,"div",17),e.DNE(34,es,4,2,"div",18),e.k0s(),e.j41(35,"div",19)(36,"div",15)(37,"app-icon",16),e.EFF(38,"event"),e.k0s()(),e.j41(39,"div",10),e.EFF(40,"Date For"),e.k0s()(),e.j41(41,"div",20),e.EFF(42),e.nI1(43,"date"),e.k0s(),e.j41(44,"div",19)(45,"div",15)(46,"app-icon",16),e.EFF(47,"schedule"),e.k0s()(),e.j41(48,"div",10),e.EFF(49,"Period"),e.k0s()(),e.j41(50,"div",20),e.EFF(51),e.nI1(52,"date"),e.nI1(53,"date"),e.nI1(54,"duration"),e.k0s(),e.j41(55,"div",19)(56,"div",15)(57,"app-icon",16),e.EFF(58,"place"),e.k0s()(),e.j41(59,"div",10),e.EFF(60,"Floor"),e.k0s()(),e.j41(61,"div",20),e.EFF(62),e.k0s(),e.j41(63,"div",19)(64,"div",15)(65,"app-icon",16),e.EFF(66,"meeting_room"),e.k0s()(),e.j41(67,"div",10),e.EFF(68,"Room"),e.k0s()(),e.j41(69,"div",20),e.EFF(70),e.k0s(),e.j41(71,"div",21)(72,"button",22)(73,"app-icon",23),e.EFF(74),e.k0s(),e.j41(75,"div",24),e.EFF(76),e.k0s(),e.j41(77,"app-icon",25),e.EFF(78,"expand_more"),e.k0s()(),e.j41(79,"mat-menu",26,0)(81,"button",27),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.setStatus("approved"))}),e.EFF(82," Approve "),e.k0s(),e.j41(83,"button",27),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.setStatus("declined"))}),e.EFF(84," Decline "),e.k0s()(),e.j41(85,"button",28)(86,"div",24),e.EFF(87),e.nI1(88,"splitjoin"),e.k0s(),e.j41(89,"app-icon",25),e.EFF(90,"expand_more"),e.k0s()(),e.j41(91,"mat-menu",26,1)(93,"button",27),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.setTracking("in_storage"))}),e.EFF(94," In Storage "),e.k0s(),e.j41(95,"button",27),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.setTracking("in_transit"))}),e.EFF(96," In Transit "),e.k0s(),e.j41(97,"button",27),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.setTracking("at_location"))}),e.EFF(98," At Location "),e.k0s()()()()()()}if(2&n){let t;const s=e.sdS(80),i=e.sdS(92),o=e.XpG();e.R7$(7),e.Y8G("user",e.eq3(46,Kn,o.request.user_name)),e.R7$(3),e.JRh(o.request.user_name),e.R7$(4),e.Y8G("href","mailto:"+o.request.user_email,e.B4B),e.R7$(),e.SpI(" ",o.request.user_email||"staff@place.tech"," "),e.R7$(4),e.Y8G("href","tel:"+o.request.user_phone,e.B4B),e.R7$(),e.SpI(" ",o.request.user_phone||"04 1234 5678"," "),e.R7$(5),e.JRh(o.request.user_company||"PlaceOS"),e.R7$(9),e.Y8G("ngForOf",o.items),e.R7$(8),e.SpI(" ",e.i5U(43,33,o.request.date,"EEEE, MMMM d, y")," "),e.R7$(9),e.E5c(" ",e.i5U(52,36,o.request.date,o.time_format)," \u2013 ",e.i5U(53,39,o.request.date+60*o.request.duration*1e3,o.time_format)," (",e.bMT(54,42,o.request.duration),") "),e.R7$(11),e.SpI(" ",(null==(t=o.level(o.request.zones))?null:t.display_name)||"N/A"," "),e.R7$(8),e.SpI(" ",o.request.description," "),e.R7$(2),e.AVh("bg-success","approved"===o.request.status)("bg-error","declined"===o.request.status)("bg-warning","tentative"===o.request.status),e.Y8G("matMenuTriggerFor",s)("disabled",o.loading),e.R7$(),e.AVh("text-green-600","approved"===o.request.status)("text-red-600","declined"===o.request.status)("text-yellow-400","tentative"===o.request.status),e.R7$(),e.SpI(" ","approved"===o.request.status?"done":"declined"===o.request.status?"close":"warning"," "),e.R7$(2),e.SpI(" ",o.request.status," "),e.R7$(9),e.Y8G("matMenuTriggerFor",i)("disabled",o.loading),e.R7$(2),e.SpI(" ",e.bMT(88,44,null==o.request.extension_data?null:o.request.extension_data.tracking)||"In Storage"," ")}}let Be=(()=>{class n{get items(){return this.request?.extension_data?.request?.items||[]}get time_format(){return this._settings.time_format}constructor(t,s,i){this._state=t,this._org=s,this._settings=i,this.requestChange=new e.bkB,this.loading=!1}level(t){return this._org.levelWithID(t)}setStatus(t){var s=this;return(0,m.A)(function*(){s.loading=!0,yield s._state.setStatus(s.request,t),s.request.status=t,s.loading=!1})()}setTracking(t){var s=this;return(0,m.A)(function*(){s.loading=!0,yield s._state.setTracking(s.request,t),s.request.extension_data.tracking=t,s.loading=!1})()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(I),e.rXU(A.yb),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-request-details"]],inputs:{request:"request"},outputs:{requestChange:"requestChange"},decls:1,vars:1,consts:[["menu","matMenu"],["tracking_menu","matMenu"],["class","fixed inset-0 z-50",3,"click",4,"ngIf"],[1,"fixed","inset-0","z-50",3,"click"],[1,"absolute","inset-0","bg-black","opacity-50"],[1,"absolute","inset-y-0","right-0","bg-base-100","w-[480px]",3,"click"],["icon","","matRipple","",1,"absolute","top-1","right-1",3,"click"],[1,"border-b","border-base-200","px-2","py-4","flex","space-x-4"],[1,"text-xl",3,"user"],["details","",1,"space-y-1"],[1,"font-medium"],[1,"flex","items-center","text-sm","space-x-2"],[1,"underline",3,"href"],[1,"px-3","py-4","relative"],[1,"flex","items-center","space-x-4"],[1,"h-6","w-6","rounded-full","text-secondary","bg-base-200","flex","items-center","justify-center"],[1,"text-sm"],[1,"pl-10","flex","flex-col","mt-1"],[4,"ngFor","ngForOf"],[1,"flex","items-center","space-x-4","mt-4"],[1,"pl-10","mt-1"],[1,"absolute","top-4","right-4","text-sm"],["matRipple","",1,"rounded-3xl","!bg-opacity-20","flex","items-center","px-2","py-1","w-full","text-left","space-x-2","mb-4",3,"matMenuTriggerFor","disabled"],[1,"text-xl"],[1,"capitalize","flex-1"],[1,"text-2xl"],[1,"w-36"],["mat-menu-item","",3,"click"],["matRipple","",1,"bg-none","w-full","flex","items-center","px-2","py-1","text-left","border","border-base-200","rounded-none",3,"matMenuTriggerFor","disabled"],[1,"text-xs","bg-success","text-success-content","px-2","py-1","rounded"]],template:function(s,i){1&s&&e.DNE(0,ts,99,48,"div",2),2&s&&e.Y8G("ngIf",i.request)},dependencies:[p.Sq,p.bT,w.kk,w.fb,w.Cp,v.r6,S.R,Xe.a,p.vh,Z,qe]})}return n})();const ns=()=>["user","assets","date","period","zones","description","approval","tracking"],ss=()=>["Requester","Asset","Deliver At","Meeting Time","Floor","Location","Approval","Tracking"],is=()=>["flex","12r","","8r","6r","12r","10r","10r"],os=(n,r,t,s,i,o,a)=>({user:n,assets:r,date:t,period:s,approval:i,tracking:o,zones:a}),rs=n=>({name:n}),as=()=>[];function ls(n,r){if(1&n&&(e.j41(0,"div",16),e.nrm(1,"a-user-avatar",17),e.j41(2,"div",18),e.EFF(3),e.k0s()()),2&n){const t=r.row;e.R7$(),e.Y8G("user",e.eq3(2,rs,t.user_name)),e.R7$(2),e.JRh(t.user_name)}}function cs(n,r){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.R7$(),e.Lme(" ",t.quantity||1,"\xd7 ",t.name," ")}}function ps(n,r){if(1&n&&(e.j41(0,"div",19),e.DNE(1,cs,2,2,"div",20),e.k0s()),2&n){const t=r.row;e.R7$(),e.Y8G("ngForOf",(null==t.extension_data||null==t.extension_data.request?null:t.extension_data.request.items)||e.lJ4(1,as))}}function ds(n,r){if(1&n&&(e.EFF(0),e.nI1(1,"date")),2&n){const t=r.row,s=e.XpG();e.SpI(" ",e.i5U(1,1,null==t.extension_data||null==t.extension_data.request?null:t.extension_data.request.deliver_at,"MMM d, "+s.time_format)," ")}}function us(n,r){if(1&n&&e.EFF(0),2&n){let t;const s=r.data,i=e.XpG();e.SpI(" ",(null==(t=i.level(s))?null:t.display_name)||"N/A"," ")}}function ms(n,r){if(1&n&&(e.EFF(0),e.nI1(1,"date"),e.nrm(2,"br"),e.EFF(3),e.nI1(4,"date")),2&n){const t=r.row,s=e.XpG();e.SpI(" ",e.i5U(1,2,s.date(t),"MMM d, "+s.time_format)," "),e.R7$(3),e.SpI(" ",e.i5U(4,5,s.date(t)+60*t.duration*1e3,"MMM d, "+s.time_format)," ")}}function _s(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",21),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())}),e.j41(1,"app-icon",22),e.EFF(2),e.k0s(),e.j41(3,"div",23),e.EFF(4),e.k0s(),e.j41(5,"app-icon",24),e.EFF(6,"expand_more"),e.k0s()(),e.j41(7,"mat-menu",25,7)(9,"button",26),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG();return e.Njj(o.setStatus(i,"approved"))}),e.EFF(10," Approve "),e.k0s(),e.j41(11,"button",26),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG();return e.Njj(o.setStatus(i,"declined"))}),e.EFF(12," Decline "),e.k0s()()}if(2&n){const t=r.row,s=e.sdS(8),i=e.XpG();e.AVh("bg-success","approved"===t.status)("bg-error","declined"===t.status)("bg-warning","tentative"===t.status)("text-success-content","approved"===t.status)("text-error-content","declined"===t.status)("text-warning-content","tentative"===t.status),e.Y8G("matMenuTriggerFor",s)("disabled",i.loading[t.id]),e.R7$(2),e.SpI(" ","approved"===t.status?"done":"declined"===t.status?"close":"warning"," "),e.R7$(2),e.JRh(t.status)}}function fs(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",27),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())}),e.j41(1,"div",23),e.EFF(2),e.nI1(3,"splitjoin"),e.k0s(),e.j41(4,"app-icon",24),e.EFF(5,"expand_more"),e.k0s()(),e.j41(6,"mat-menu",25,8)(8,"button",26),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG();return e.Njj(o.setTracking(i,"in_storage"))}),e.EFF(9," In Storage "),e.k0s(),e.j41(10,"button",26),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG();return e.Njj(o.setTracking(i,"in_transit"))}),e.EFF(11," In Transit "),e.k0s(),e.j41(12,"button",26),e.bIt("click",function(){const i=e.eBV(t).row,o=e.XpG();return e.Njj(o.setTracking(i,"at_location"))}),e.EFF(13," At Location "),e.k0s()()}if(2&n){const t=r.row,s=e.sdS(7),i=e.XpG();e.Y8G("matMenuTriggerFor",s)("disabled",i.loading[t.id]),e.R7$(2),e.SpI(" ",e.bMT(3,3,null==t.extension_data?null:t.extension_data.tracking)||"In Storage"," ")}}let Ye=(()=>{class n extends d.Tv{date(t){return t.all_day?(0,we.A)(t.date).valueOf():t.date}setStatus(t,s){var i=this;return(0,m.A)(function*(){i.loading[t.id]=!0,yield i._state.setStatus(t,s),i.loading[t.id]=!1})()}setTracking(t,s){var i=this;return(0,m.A)(function*(){i.loading[t.id]=!0,yield i._state.setTracking(t,s),i.loading[t.id]=!1})()}get time_format(){return this._settings.time_format}constructor(t,s,i){super(),this._state=t,this._org=s,this._settings=i,this.requests=this._state.filtered_requests,this.filters=this._state.options,this.loading={},this.setDate=o=>this._state.setOptions({date:o})}level(t){return this._org.levelWithID(t)}ngOnInit(){this.subscription("polling",this._state.startPolling())}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(I),e.rXU(A.yb),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-asset-request-list"]],features:[e.Vt3],decls:26,vars:29,consts:[["user_template",""],["assets_template",""],["date_template",""],["level_template",""],["period_template",""],["approval_template",""],["tracking_template",""],["menu","matMenu"],["tracking_menu","matMenu"],[1,"relative","-left-4","w-[calc(100%+2rem)]","mt-4","h-[calc(100%-1rem)]","flex","flex-col"],[1,"bg-base-100","px-4","border-t","border-b","border-base-200","flex","items-center","justify-between"],[1,"opacity-60","text-sm"],[3,"dateChange","date"],[1,"w-full","overflow-auto","h-1/2","flex-1","p-4"],["asset-requests","",1,"block","min-w-[82rem]","text-sm",3,"row_clicked","dataSource","columns","display_column","column_size","template","empty"],[3,"requestChange","request"],[1,"flex","items-center","space-x-2"],[3,"user"],[1,"flex-1"],[1,"flex","flex-col"],[4,"ngFor","ngForOf"],["matRipple","",1,"rounded-3xl","!bg-opacity-20","flex","items-center","px-2","py-1","w-full","text-left","space-x-2",3,"click","matMenuTriggerFor","disabled"],[1,"text-xl"],[1,"capitalize","flex-1"],[1,"text-2xl"],[1,"w-36"],["mat-menu-item","",3,"click"],["matRipple","",1,"bg-none","w-full","flex","items-center","px-2","py-1","text-left",3,"click","matMenuTriggerFor","disabled"]],template:function(s,i){if(1&s){const o=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"div",11),e.EFF(3),e.nI1(4,"async"),e.nI1(5,"async"),e.k0s(),e.j41(6,"date-options",12),e.nI1(7,"async"),e.bIt("dateChange",function(c){return e.eBV(o),e.Njj(i.setDate(c))}),e.k0s()(),e.j41(8,"div",13)(9,"custom-table",14),e.nI1(10,"async"),e.bIt("row_clicked",function(c){return e.eBV(o),e.Njj(i.request=c)}),e.k0s()()(),e.DNE(11,ls,4,4,"ng-template",null,0,e.C5r)(13,ps,2,2,"ng-template",null,1,e.C5r)(15,ds,2,4,"ng-template",null,2,e.C5r)(17,us,1,1,"ng-template",null,3,e.C5r)(19,ms,5,8,"ng-template",null,4,e.C5r)(21,_s,13,16,"ng-template",null,5,e.C5r)(23,fs,14,5,"ng-template",null,6,e.C5r),e.j41(25,"asset-request-details",15),e.mxI("requestChange",function(c){return e.eBV(o),e.DH7(i.request,c)||(i.request=c),e.Njj(c)}),e.k0s()}if(2&s){let o,a,c;const u=e.sdS(12),x=e.sdS(14),y=e.sdS(16),C=e.sdS(18),M=e.sdS(20),L=e.sdS(22),V=e.sdS(24);e.R7$(3),e.Lme(" ",null==(o=e.bMT(4,10,i.requests))?null:o.length," asset request","1"===(null==(o=e.bMT(5,12,i.requests))?null:o.length)?"":"s"," "),e.R7$(3),e.Y8G("date",null==(a=e.bMT(7,14,i.filters))?null:a.date),e.R7$(3),e.Y8G("dataSource",i.requests)("columns",e.lJ4(18,ns))("display_column",e.lJ4(19,ss))("column_size",e.lJ4(20,is))("template",e.sGs(21,os,u,x,y,M,L,V,C))("empty",null!=(c=e.bMT(10,16,i.filters))&&c.search?"No matching asset requests":"There are no asset requests for the currently selected date."),e.R7$(16),e.R50("request",i.request)}},dependencies:[p.Sq,Wn.o,w.kk,w.fb,w.Cp,v.r6,S.R,Xe.a,U.r,Be,p.Jj,p.vh,Z],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%}\n\n/*# sourceMappingURL=asset-request-list.component.ts-angular-inline--119.css.map*/"]})}return n})();var hs=l(93208);const Ue=(n,r)=>[n,"view",r],gs=n=>[n,"manage","group"];function vs(n,r){if(1&n&&e.nrm(0,"img",22),2&n){const t=e.XpG().$implicit;e.Y8G("source",t.images[0])}}function bs(n,r){1&n&&e.nrm(0,"img",23)}function xs(n,r){if(1&n&&(e.j41(0,"div",24),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" Assets: ",t.asset_count||(null==t.assets?null:t.assets.length)||0," ")}}function ys(n,r){if(1&n&&(e.j41(0,"a",16)(1,"div",17),e.DNE(2,vs,1,1,"img",18)(3,bs,1,0,"ng-template",null,1,e.C5r),e.k0s(),e.j41(5,"div",19)(6,"div",20),e.EFF(7),e.k0s(),e.DNE(8,xs,2,1,"div",21),e.k0s()()),2&n){const t=r.$implicit,s=e.sdS(4),i=e.XpG(5);e.Y8G("routerLink",e.l_i(5,Ue,i.base_route,t.id)),e.R7$(2),e.Y8G("ngIf",null==t.images?null:t.images.length)("ngIfElse",s),e.R7$(5),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngIf",t.asset_count||(null==t.assets?null:t.assets.length))}}function Fs(n,r){if(1&n&&(e.qex(0),e.j41(1,"div",14),e.DNE(2,ys,9,8,"a",15),e.nI1(3,"async"),e.k0s(),e.bVm()),2&n){const t=e.XpG(2).$implicit,s=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",e.bMT(3,1,s.products)[t.id])}}function ks(n,r){if(1&n&&e.nrm(0,"img",22),2&n){const t=e.XpG().$implicit;e.Y8G("source",t.images[0])}}function Cs(n,r){1&n&&e.nrm(0,"img",30)}function Is(n,r){if(1&n&&(e.j41(0,"div",24),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" Assets: ",t.asset_count||(null==t.assets?null:t.assets.length)||0," ")}}function js(n,r){if(1&n&&(e.j41(0,"a",27)(1,"div",28),e.DNE(2,ks,1,1,"img",18)(3,Cs,1,0,"ng-template",null,1,e.C5r),e.k0s(),e.j41(5,"div",29)(6,"div",20),e.EFF(7),e.k0s(),e.DNE(8,Is,2,1,"div",21),e.k0s()()),2&n){const t=r.$implicit,s=e.sdS(4),i=e.XpG(5);e.Y8G("routerLink",e.l_i(5,Ue,i.base_route,t.id)),e.R7$(2),e.Y8G("ngIf",null==t.images?null:t.images.length)("ngIfElse",s),e.R7$(5),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngIf",t.asset_count||(null==t.assets?null:t.assets.length))}}function Ts(n,r){if(1&n&&(e.qex(0),e.j41(1,"div",25),e.DNE(2,js,9,8,"a",26),e.nI1(3,"async"),e.k0s(),e.bVm()),2&n){const t=e.XpG(2).$implicit,s=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",e.bMT(3,1,s.products)[t.id])}}function Es(n,r){if(1&n&&(e.j41(0,"div",7)(1,"h2",8)(2,"span",9),e.EFF(3),e.k0s(),e.j41(4,"span",10),e.EFF(5),e.nI1(6,"async"),e.nI1(7,"async"),e.k0s()(),e.qex(8,11),e.nI1(9,"async"),e.DNE(10,Fs,4,3,"ng-container",12)(11,Ts,4,3,"ng-container",13),e.bVm(),e.k0s()),2&n){let t;const s=e.XpG().$implicit,i=e.XpG(2);e.R7$(3),e.JRh(null==s?null:s.name),e.R7$(2),e.Lme(" (",null==(t=e.bMT(6,5,i.products)[s.id])?null:t.length," item",1===(null==(t=e.bMT(7,7,i.products)[s.id])?null:t.length)?"":"s",") "),e.R7$(3),e.Y8G("ngSwitch",e.bMT(9,9,i.options).view),e.R7$(2),e.Y8G("ngSwitchCase","list")}}function Rs(n,r){if(1&n&&(e.qex(0),e.DNE(1,Es,12,11,"div",6),e.nI1(2,"async"),e.bVm()),2&n){let t;const s=r.$implicit,i=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==(t=e.bMT(2,1,i.products)[s.id])?null:t.length)}}function ws(n,r){if(1&n&&(e.j41(0,"div",4),e.DNE(1,Rs,3,3,"ng-container",5),e.nI1(2,"async"),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",e.bMT(2,1,t.categories))}}function Ms(n,r){1&n&&e.nrm(0,"mat-progress-bar",31)}function As(n,r){if(1&n&&(e.j41(0,"a",35),e.EFF(1," Create New Product "),e.k0s()),2&n){const t=e.XpG(2);e.Y8G("routerLink",e.eq3(1,gs,t.base_route))}}function Ss(n,r){if(1&n&&(e.j41(0,"div",32)(1,"p",33),e.EFF(2),e.nI1(3,"async"),e.k0s(),e.DNE(4,As,2,3,"a",34),e.nI1(5,"async"),e.k0s()),2&n){let t,s;const i=e.XpG();e.R7$(2),e.SpI(" ",null!=(t=e.bMT(3,2,i.options))&&t.search?"No matching assets found":"No assets available. Create a new asset with the button below"," "),e.R7$(2),e.Y8G("ngIf",!(null!=(s=e.bMT(5,4,i.options))&&s.search))}}let ze=(()=>{class n{get base_route(){return this._state.base_route}constructor(t){this._state=t,this.loading=this._state.loading,this.options=this._state.options,this.categories=this._state.categories,this.products=this._state.product_mapping}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(I))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-asset-item-list"]],decls:7,vars:9,consts:[["empty_state",""],["placeholder",""],["class","overflow-auto pb-2 w-full h-full",4,"ngIf","ngIfElse"],["mode","indeterminate",4,"ngIf"],[1,"overflow-auto","pb-2","w-full","h-full"],[4,"ngFor","ngForOf"],["class","",4,"ngIf"],[1,""],[1,"py-2"],[1,"font-medium"],[1,"text-xs"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"rounded","overflow-hidden","bg-base-100","border","border-base-200","divide-y","divide-base-200"],["matRipple","","class","flex items-center text-left space-x-4 p-4 border border-base-200 hover:border-indigo-400 rounded",3,"routerLink",4,"ngFor","ngForOf"],["matRipple","",1,"flex","items-center","text-left","space-x-4","p-4","border","border-base-200","hover:border-indigo-400","rounded",3,"routerLink"],[1,"h-12","w-12","flex","items-center","justify-center","border","border-base-200","bg-base-200","overflow-hidden"],["auth","","class","min-w-full min-h-full object-cover",3,"source",4,"ngIf","ngIfElse"],[1,"flex-1","flex","flex-col","justify-center"],[1,"truncate"],["class","text-xs opacity-60",4,"ngIf"],["auth","",1,"min-w-full","min-h-full","object-cover",3,"source"],["src","assets/icons/asset-placeholder.svg",1,"m-auto"],[1,"text-xs","opacity-60"],[1,"flex","items-center","overflow-hidden","flex-wrap","-mx-2","w-full"],["matRipple","","class","bg-base-100 rounded shadow w-40 h-44 text-left m-2 border border-base-200 hover:border-indigo-400 flex flex-col",3,"routerLink",4,"ngFor","ngForOf"],["matRipple","",1,"bg-base-100","rounded","shadow","w-40","h-44","text-left","m-2","border","border-base-200","hover:border-indigo-400","flex","flex-col",3,"routerLink"],[1,"w-full","h-32","flex","items-center","justify-center","bg-base-200","overflow-hidden"],[1,"border-t","border-base-200","w-full","px-3","py-1","flex-1","flex","flex-col","justify-center"],["src","assets/icons/asset-placeholder.svg",1,"m-auto","w-16"],["mode","indeterminate"],[1,"flex","flex-col","items-center","justify-center","p-8","space-y-4","h-full","w-full"],[1,"opacity-40"],["btn","","matRipple","",3,"routerLink",4,"ngIf"],["btn","","matRipple","",3,"routerLink"]],template:function(s,i){if(1&s&&(e.DNE(0,ws,3,3,"div",2),e.nI1(1,"async"),e.nI1(2,"async"),e.DNE(3,Ms,1,0,"mat-progress-bar",3),e.nI1(4,"async"),e.DNE(5,Ss,6,6,"ng-template",null,0,e.C5r)),2&s){let o;const a=e.sdS(6);e.Y8G("ngIf",(null==(o=e.bMT(1,3,i.categories))?null:o.length)&&(null==(o=e.bMT(2,5,i.products))?null:o._count))("ngIfElse",a),e.R7$(3),e.Y8G("ngIf",e.bMT(4,7,i.loading))}},dependencies:[p.Sq,p.bT,p.ux,p.e1,p.fG,me.HM,v.r6,hs.U,h.Wk,p.Jj],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}\n\n/*# sourceMappingURL=asset-item-list.component.ts-angular-inline--120.css.map*/"]})}return n})();var Gs=l(71689),Ds=l(19608);const Ns=(n,r)=>[n,"view",r],$s=n=>[n,"list","purchase-orders"],Ls=()=>[],Vs=()=>["name","identifier","serial_number","actions"],Os=()=>["Name","Label/Friendly Name","Serial Number"," "],Ps=()=>["10r","11r","8r","flex"],Xs=n=>({actions:n});function qs(n,r){if(1&n&&(e.j41(0,"h3",30),e.EFF(1),e.nI1(2,"async"),e.k0s()),2&n){let t;const s=e.XpG(2);e.R7$(),e.SpI(" Associated Assets (",(null==(t=e.bMT(2,1,s.asset_list))?null:t.length)||"0",") ")}}function Bs(n,r){if(1&n&&(e.nrm(0,"custom-table",31),e.nI1(1,"async")),2&n){const t=e.XpG(2);e.Y8G("dataSource",e.bMT(1,5,t.asset_list)||e.lJ4(7,Ls))("columns",e.lJ4(8,Vs))("display_column",e.lJ4(9,Os))("column_size",e.lJ4(10,Ps))("template",e.eq3(11,Xs,t.action_template))}}function Ys(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",3)(1,"header",4)(2,"h2",5),e.EFF(3),e.k0s()(),e.j41(4,"main",6)(5,"div",7)(6,"label",8),e.EFF(7," Order Number"),e.j41(8,"span"),e.EFF(9,"*"),e.k0s()(),e.j41(10,"mat-form-field",9),e.nrm(11,"input",10),e.j41(12,"mat-error"),e.EFF(13,"Order number is required"),e.k0s()()(),e.j41(14,"div",7)(15,"label",11),e.EFF(16," Invoice Number "),e.k0s(),e.j41(17,"mat-form-field",9),e.nrm(18,"input",12),e.j41(19,"mat-error"),e.EFF(20,"Invoice number is required"),e.k0s()()(),e.j41(21,"div",13)(22,"div",14)(23,"label",15),e.EFF(24," Purchase Date "),e.k0s(),e.nrm(25,"a-date-field",16),e.k0s(),e.j41(26,"div",14)(27,"label",17),e.EFF(28," Purchase Price "),e.k0s(),e.j41(29,"mat-form-field",18)(30,"div",19),e.EFF(31,"$"),e.k0s(),e.nrm(32,"input",20),e.k0s()()(),e.j41(33,"div",13)(34,"div",7)(35,"label",21),e.EFF(36," Expected Service Start Date "),e.k0s(),e.nrm(37,"a-date-field",22),e.k0s(),e.j41(38,"div",7)(39,"label",23),e.EFF(40," Expected Service End Date "),e.k0s(),e.nrm(41,"a-date-field",24),e.k0s()(),e.DNE(42,qs,3,3,"h3",25)(43,Bs,2,13,"custom-table",26),e.k0s(),e.j41(44,"footer",27)(45,"a",28),e.EFF(46," Cancel "),e.k0s(),e.j41(47,"button",29),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.save())}),e.EFF(48," Save "),e.k0s()()()}if(2&n){const t=e.XpG();e.R7$(3),e.SpI(" ",t.form.value.id?"Edit":"Add"," Purchase Order "),e.R7$(),e.Y8G("formGroup",t.form),e.R7$(21),e.Y8G("from",t.from),e.R7$(7),e.Y8G("from",t.from),e.R7$(5),e.Y8G("from",t.from),e.R7$(5),e.Y8G("ngIf",null==t.item?null:t.item.id),e.R7$(),e.Y8G("ngIf",null==t.item?null:t.item.id),e.R7$(2),e.Y8G("routerLink",t.product_id?e.l_i(8,Ns,t.base_route,t.product_id):e.eq3(11,$s,t.base_route))}}function Us(n,r){if(1&n&&(e.j41(0,"div",32),e.nrm(1,"mat-spinner",33),e.j41(2,"p"),e.EFF(3),e.k0s()()),2&n){const t=e.XpG();e.R7$(),e.Y8G("diameter",32),e.R7$(2),e.JRh(t.loading)}}let Je=(()=>{class n extends d.Tv{get base_route(){return this._state.base_route}constructor(t,s,i,o){var a;super(),a=this,this._state=t,this._route=s,this._router=i,this._org=o,this.form=(0,_.fF)(),this.loading="",this._id=new G.t(""),this.from=(0,Gs.A)(Date.now(),-5),this.asset_list=(0,j.zV)([this._id,this._org.active_building]).pipe((0,le.p)(([c,u])=>!!c&&!!u),(0,E.n)(([c])=>(0,_._B)({order_id:c})),(0,E.n)(function(){var c=(0,m.A)(function*(u){const x=yield(0,_.FK)({zone_id:a._org.building.id,limit:500}).toPromise();return u.map(y=>({...y,name:x.find(C=>C.id===y.asset_type_id)?.name||y.id}))});return function(u){return c.apply(this,arguments)}}()),(0,D.t)(1))}ngOnInit(){var t=this;this.subscription("route.query",this._route.queryParamMap.subscribe(function(){var s=(0,m.A)(function*(i){if(i.get("id")){t.loading="Loading purchase order details...";const o=yield(0,_.N6)(i.get("id")).toPromise().catch(()=>null);o||((0,d.UG)("Unable to load purchase order details."),t._router.navigate([t.base_route])),t.form.patchValue({...o,order_number:o.purchase_order_number,purchase_date:1e3*o.purchase_date,expected_service_end_date:1e3*o.expected_service_end_date,expected_service_start_date:1e3*o.expected_service_start_date}),t.item=o,t._id.next(o.id),t.loading=""}i.get("group_id")&&(t.product_id=i.get("group_id"))});return function(i){return s.apply(this,arguments)}}())),this._state.setOptions({active_item:null})}save(){var t=this;return(0,m.A)(function*(){if(!t.form.valid)return;t.loading="Saving Product...";const s=t.form.value;s.purchase_date=(0,X.A)(s.purchase_date)||null,s.expected_service_start_date=(0,X.A)(s.expected_service_start_date)||t.item?.expected_service_start_date||null,s.expected_service_end_date=(0,X.A)(s.expected_service_end_date)||t.item?.expected_service_end_date||null,yield(0,_.Dt)(s).toPromise().catch(o=>{throw t.loading="",(0,d.UG)(`Error saving purchase order.: ${o.message}`),o}),t.form.reset(),(0,d.VX)("Successfully saved purchase order."),t._state.postChange(),t._router.navigate(t.product_id?[t.base_route,"view",t.product_id]:[t.base_route,"list","purchase-orders"]),t.loading=""})()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(I),e.rXU(h.nX),e.rXU(h.Ix),e.rXU(A.yb))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-purchase-order-form"]],features:[e.Vt3],decls:4,vars:2,consts:[["load_state",""],[1,"absolute","inset-0","bg-base-100"],["class","h-full max-w-[32rem] mx-auto flex flex-col",4,"ngIf","ngIfElse"],[1,"h-full","max-w-[32rem]","mx-auto","flex","flex-col"],[1,"p-4"],[1,"text-center","text-xl","font-medium"],[1,"flex-1","h-1/2","overflow-auto",3,"formGroup"],[1,"flex","flex-col","space-y-2"],["for","order-number"],["appearance","outline"],["matInput","","name","order-number","placeholder","Order Number","formControlName","order_number"],["for","invoice-number"],["matInput","","name","invoice-number","placeholder","Invoice Number","formControlName","invoice_number"],[1,"flex","space-x-2"],[1,"flex-1","flex","flex-col","space-y-2"],["for","purchase-date"],["name","purchase-date","formControlName","purchase_date",3,"from"],["for","unit-price"],["appearance","outline",1,"w-full"],["matPrefix",""],["matInput","","name","unit-price","formControlName","unit_price",3,"from"],["for","depreciation-start-date"],["name","depreciation-start-date","formControlName","expected_service_start_date",3,"from"],["for","depreciation-end-date"],["name","depreciation-end-date","formControlName","expected_service_end_date"],["class","font-medium mb-2",4,"ngIf"],["asset-view","","class","w-full block text-sm","empty","No assets for this purchase order",3,"dataSource","columns","display_column","column_size","template",4,"ngIf"],[1,"flex","justify-end","space-x-2","p-2","border-t","border-base-200"],["btn","","matRipple","",1,"w-32","inverse",3,"routerLink"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"font-medium","mb-2"],["asset-view","","empty","No assets for this purchase order",1,"w-full","block","text-sm",3,"dataSource","columns","display_column","column_size","template"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]],template:function(s,i){if(1&s&&(e.j41(0,"div",1),e.DNE(1,Ys,49,13,"div",2),e.k0s(),e.DNE(2,Us,4,2,"ng-template",null,0,e.C5r)),2&s){const o=e.sdS(3);e.R7$(),e.Y8G("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[p.bT,k.rl,k.TL,k.JW,N.fg,$.LG,v.r6,f.me,f.BC,f.cb,f.j4,f.JD,Ds.G,U.r,h.Wk,p.Jj]})}return n})();const zs=()=>({standalone:!0}),Js=(n,r)=>[n,"view",r],Hs=n=>[n];function Qs(n,r){if(1&n&&(e.j41(0,"mat-option",24),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.purchase_order_number||t.invoice_number," ")}}function Ws(n,r){1&n&&(e.j41(0,"mat-option",25),e.EFF(1," No purchase orders "),e.k0s()),2&n&&e.Y8G("disabled",!0)}function Zs(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",3)(1,"header",4)(2,"h2",5),e.EFF(3),e.k0s()(),e.j41(4,"main",6)(5,"div",7)(6,"label",8),e.EFF(7,"Product"),e.k0s(),e.j41(8,"mat-form-field",9),e.nrm(9,"input",10),e.k0s()(),e.j41(10,"div",11)(11,"div",7)(12,"label",12),e.EFF(13," Serial Number "),e.k0s(),e.j41(14,"mat-form-field",9),e.nrm(15,"input",13),e.j41(16,"mat-error"),e.EFF(17,"Serial Number is required"),e.k0s()()(),e.j41(18,"div",7)(19,"label",14),e.EFF(20,"Label/Friendly Name"),e.k0s(),e.j41(21,"mat-form-field",9),e.nrm(22,"input",15),e.j41(23,"mat-error"),e.EFF(24," Label/Friendly Name is required "),e.k0s()()()(),e.j41(25,"div",7)(26,"label",16),e.EFF(27," Purchase Order ID "),e.k0s(),e.j41(28,"mat-form-field",9)(29,"mat-select",17),e.DNE(30,Qs,2,2,"mat-option",18),e.nI1(31,"async"),e.DNE(32,Ws,2,1,"mat-option",19),e.nI1(33,"async"),e.k0s(),e.j41(34,"mat-error"),e.EFF(35," Purchase Order ID is required "),e.k0s()()(),e.j41(36,"div",7)(37,"label",12),e.EFF(38,"Barcode"),e.k0s(),e.j41(39,"mat-form-field",9),e.nrm(40,"input",20),e.j41(41,"mat-error"),e.EFF(42,"Barcode is required"),e.k0s()()()(),e.j41(43,"footer",21)(44,"a",22),e.EFF(45," Cancel "),e.k0s(),e.j41(46,"button",23),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.save())}),e.EFF(47," Save "),e.k0s()()()}if(2&n){let t;const s=e.XpG();e.R7$(3),e.SpI(" ",s.form.value.id?"Edit":"Add"," Asset "),e.R7$(),e.Y8G("formGroup",s.form),e.R7$(5),e.Y8G("ngModel",(null==s.product?null:s.product.name)||"No Product")("ngModelOptions",e.lJ4(12,zs))("disabled",!0),e.R7$(21),e.Y8G("ngForOf",e.bMT(31,8,s.purchase_orders)),e.R7$(2),e.Y8G("ngIf",!(null!=(t=e.bMT(33,10,s.purchase_orders))&&t.length)),e.R7$(12),e.Y8G("routerLink",s.product?e.l_i(13,Js,s.base_route,s.product.id):e.eq3(16,Hs,s.base_route))}}function Ks(n,r){if(1&n&&(e.j41(0,"div",26),e.nrm(1,"mat-spinner",27),e.j41(2,"p"),e.EFF(3),e.k0s()()),2&n){const t=e.XpG();e.R7$(),e.Y8G("diameter",32),e.R7$(2),e.JRh(t.loading)}}let He=(()=>{class n extends d.Tv{get base_route(){return this._state.base_route}constructor(t,s,i,o){super(),this._state=t,this._route=s,this._router=i,this._org=o,this.form=(0,_.QP)(),this.purchase_orders=this._state.purchase_orders,this.loading=""}ngOnInit(){var t=this;this.subscription("route.query",this._route.queryParamMap.subscribe(function(){var s=(0,m.A)(function*(i){if(i.get("id")){t.loading="Loading Asset Details...";const o=yield(0,_.qA)(i.get("id")).toPromise().catch(()=>null);o||((0,d.UG)("Unable to load asset details."),t._router.navigate([t.base_route])),t.form.patchValue(o),t.loading=""}if(i.get("group_id")){t.loading="Loading Product Details...";const o=yield(0,_.RF)(i.get("group_id")).toPromise().catch(()=>null);o||((0,d.UG)("Unable to load associated product details."),t._router.navigate([t.base_route])),t.product=o,t.form.patchValue({type_id:o.id}),t.loading=""}});return function(i){return s.apply(this,arguments)}}())),this._state.setOptions({active_item:null})}save(){var t=this;return(0,m.A)(function*(){if(!t.form.valid)return(0,d.UG)(`Some fields are invalid. [${(0,d.F7)(t.form)}]`);t.loading="Saving Product...";const s=t.form.value,i=yield(0,_.We)({...s,zone_id:t._org.building.id}).toPromise().catch(o=>{throw t.loading="",(0,d.UG)(`Error saving asset: ${o.message}`),o});t.form.reset(),t._state.postChange(),t._state.setExtraAssets([i].map(o=>({...o,type_id:t.product.id}))),(0,d.VX)("Asset saved successfully."),t._router.navigate([t.base_route,"view",t.product?.id]),t.loading=""})()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(I),e.rXU(h.nX),e.rXU(h.Ix),e.rXU(A.yb))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-form"]],features:[e.Vt3],decls:4,vars:2,consts:[["load_state",""],[1,"absolute","inset-0","bg-base-100"],["class","h-full max-w-[32rem] mx-auto flex flex-col",4,"ngIf","ngIfElse"],[1,"h-full","max-w-[32rem]","mx-auto","flex","flex-col"],[1,"p-4"],[1,"text-center","text-xl","font-medium"],[1,"flex-1","h-1/2","overflow-auto",3,"formGroup"],[1,"flex","flex-1","flex-col","space-y-2"],["for","name"],["appearance","outline"],["matInput","",3,"ngModel","ngModelOptions","disabled"],[1,"flex","items-center","space-x-2"],["for","serial-number"],["matInput","","name","serial-number","placeholder","Serial Number","formControlName","serial_number"],["for","identifier"],["matInput","","name","identifier","placeholder","Identifier, Asset ID or Barcode","formControlName","identifier"],["for","purchase-order-id"],["formControlName","purchase_order_id","placeholder","Select Purchase Order"],[3,"value",4,"ngFor","ngForOf"],["class","opacity-60",3,"disabled",4,"ngIf"],["matInput","","name","barcode","placeholder","Barcode","formControlName","barcode"],[1,"flex","justify-end","space-x-2","p-2","border-t","border-base-200"],["btn","","matRipple","",1,"w-32","inverse",3,"routerLink"],["btn","","matRipple","",1,"w-32",3,"click"],[3,"value"],[1,"opacity-60",3,"disabled"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]],template:function(s,i){if(1&s&&(e.j41(0,"div",1),e.DNE(1,Zs,48,18,"div",2),e.k0s(),e.DNE(2,Ks,4,2,"ng-template",null,0,e.C5r)),2&s){const o=e.sdS(3);e.R7$(),e.Y8G("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[p.Sq,p.bT,k.rl,k.TL,N.fg,W.VO,v.wT,$.LG,v.r6,f.me,f.BC,f.cb,f.vS,f.j4,f.JD,h.Wk,p.Jj]})}return n})();var ei=l(56864);const ti=(n,r)=>[n,"view",r],ni=n=>[n,"list","items"];function si(n,r){if(1&n&&(e.j41(0,"mat-option",24),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function ii(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",3)(1,"header",4)(2,"h2",5),e.EFF(3),e.k0s()(),e.j41(4,"main",6)(5,"div",7)(6,"label",8),e.EFF(7,"Name"),e.j41(8,"span"),e.EFF(9,"*"),e.k0s()(),e.j41(10,"mat-form-field",9),e.nrm(11,"input",10),e.j41(12,"mat-error"),e.EFF(13,"Name is required"),e.k0s()()(),e.j41(14,"div",7)(15,"label",8),e.EFF(16,"Category"),e.j41(17,"span"),e.EFF(18,"*"),e.k0s()(),e.j41(19,"mat-form-field",9)(20,"mat-select",11),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.current_category=i.form.value.category_id)}),e.DNE(21,si,2,2,"mat-option",12),e.nI1(22,"async"),e.j41(23,"mat-option",13),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.newCategory())}),e.j41(24,"div",14)(25,"app-icon"),e.EFF(26,"add"),e.k0s(),e.j41(27,"p"),e.EFF(28,"New Category"),e.k0s()()()(),e.j41(29,"mat-error"),e.EFF(30,"Category is required"),e.k0s()()(),e.j41(31,"div",7)(32,"label",15),e.EFF(33,"Brand"),e.j41(34,"span"),e.EFF(35,"*"),e.k0s()(),e.j41(36,"mat-form-field",9),e.nrm(37,"input",16),e.j41(38,"mat-error"),e.EFF(39,"Brand is required"),e.k0s()()(),e.j41(40,"div",7)(41,"label",17),e.EFF(42,"Description"),e.k0s(),e.j41(43,"mat-form-field",9),e.nrm(44,"textarea",18),e.j41(45,"mat-error"),e.EFF(46,"Description is required"),e.k0s()()(),e.j41(47,"div",7)(48,"label",19),e.EFF(49,"Images"),e.k0s(),e.nrm(50,"image-list-field",20),e.k0s()(),e.j41(51,"footer",21)(52,"a",22),e.EFF(53," Cancel "),e.k0s(),e.j41(54,"button",23),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.save())}),e.EFF(55," Save "),e.k0s()()()}if(2&n){const t=e.XpG();e.R7$(3),e.SpI(" ",t.form.value.id?"Edit":"Add"," Product "),e.R7$(),e.Y8G("formGroup",t.form),e.R7$(17),e.Y8G("ngForOf",e.bMT(22,4,t.categories)),e.R7$(31),e.Y8G("routerLink",t.form.value.id?e.l_i(6,ti,t.base_route,t.form.value.id):e.eq3(9,ni,t.base_route))}}function oi(n,r){if(1&n&&(e.j41(0,"div",25),e.nrm(1,"mat-spinner",26),e.j41(2,"p"),e.EFF(3),e.k0s()()),2&n){const t=e.XpG();e.R7$(),e.Y8G("diameter",32),e.R7$(2),e.JRh(t.loading)}}let Qe=(()=>{class n extends d.Tv{get base_route(){return this._state.base_route}constructor(t,s,i,o){super(),this._state=t,this._route=s,this._router=i,this._dialog=o,this.form=(0,_.rC)(),this.new_category=new G.t(null),this.categories=(0,j.zV)([this._state.categories,this.new_category]).pipe((0,F.T)(([a,c])=>c?(0,d.Am)([...a,c],"id"):a)),this.loading=""}ngOnInit(){var t=this;this.subscription("route.query",this._route.queryParamMap.subscribe(function(){var s=(0,m.A)(function*(i){if(i.get("id")){t.loading="Loading Product Details...";const o=yield(0,_.RF)(i.get("id")).toPromise().catch(()=>null);o||((0,d.UG)("Unable to load product details."),t._router.navigate([t.base_route])),t.form.patchValue(o),t.loading=""}});return function(i){return s.apply(this,arguments)}}()))}newCategory(){var t=this;return(0,m.A)(function*(){t.form.patchValue({category_id:t.current_category});const s=yield t._state.editCategory();s&&(t.new_category.next(s),t.form.patchValue({category_id:s.id}))})()}save(){var t=this;return(0,m.A)(function*(){if(!t.form.valid)return;t.loading="Saving Product...";const s=t.form.value,i=yield(0,_.N3)(s).toPromise().catch(o=>{throw t.loading="",(0,d.UG)(`Error saving Product: ${o.message}`),o});t.form.reset(),t.loading="",t._state.postChange(),t._router.navigate([t.base_route,"view",i.id])})()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(I),e.rXU(h.nX),e.rXU(h.Ix),e.rXU(T.bZ))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-group-form"]],features:[e.Vt3],decls:4,vars:2,consts:[["load_state",""],[1,"absolute","inset-0","bg-base-100"],["class","h-full max-w-[32rem] mx-auto flex flex-col",4,"ngIf","ngIfElse"],[1,"h-full","max-w-[32rem]","mx-auto","flex","flex-col"],[1,"p-4"],[1,"text-center","text-xl","font-medium"],[1,"flex-1","h-1/2","overflow-auto","p-2",3,"formGroup"],[1,"flex","flex-col","space-y-2"],["for","name"],["appearance","outline"],["matInput","","name","name","placeholder","Name of the product","formControlName","name"],["formControlName","category_id","placeholder","Category of Product",3,"click"],[3,"value",4,"ngFor","ngForOf"],[1,"relative",3,"click"],[1,"flex","items-center","space-x-2"],["for","brand"],["matInput","","name","brand","placeholder","Brand of the product","formControlName","brand"],["for","description"],["matInput","","name","description","placeholder","Description of the product","formControlName","description"],["for","images"],["name","images","formControlName","images"],[1,"flex","justify-end","space-x-2","p-2","border-t","border-base-200"],["btn","","matRipple","",1,"w-32","inverse",3,"routerLink"],["btn","","matRipple","",1,"w-32",3,"click"],[3,"value"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]],template:function(s,i){if(1&s&&(e.j41(0,"div",1),e.DNE(1,ii,56,11,"div",2),e.k0s(),e.DNE(2,oi,4,2,"ng-template",null,0,e.C5r)),2&s){const o=e.sdS(3);e.R7$(),e.Y8G("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[p.Sq,p.bT,k.rl,k.TL,N.fg,W.VO,v.wT,$.LG,v.r6,f.me,f.BC,f.cb,f.j4,f.JD,ei.$,S.R,h.Wk,p.Jj]})}return n})();const ri=()=>["purchase_order_number","invoice_number","purchase_date","expected_service_start_date","expected_service_end_date"],ai=()=>["Order Number","Invoice Number","Purchase Date","Depreciation Start","Depreciation End"],li=()=>["flex","10r","10r","10r","10r"],ci=(n,r,t)=>({purchase_date:n,expected_service_start_date:r,expected_service_end_date:t});function pi(n,r){1&n&&(e.j41(0,"span",5),e.EFF(1,"No Date set"),e.k0s())}function di(n,r){if(1&n&&(e.DNE(0,pi,2,0,"span",4),e.EFF(1),e.nI1(2,"date")),2&n){const t=r.data;e.Y8G("ngIf",!t),e.R7$(),e.SpI(" ",t?e.i5U(2,2,1e3*t,"mediumDate"):""," ")}}let We=(()=>{class n{constructor(t,s){this._state=t,this._router=s,this.now=Date.now(),this.purchase_orders=(0,j.zV)([this._state.options,this._state.purchase_orders]).pipe((0,F.T)(([{search:i},o])=>o.filter(a=>!i||a.purchase_order_number.toLowerCase().includes(i.toLowerCase())||a.invoice_number?.toLowerCase().includes(i.toLowerCase())))),this.filters=this._state.options}editOrder(t){this._router.navigate([this._state.base_route,"manage","purchase-order"],{queryParams:{id:t.id}})}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(I),e.rXU(h.Ix))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-asset-purchase-order-list"]],decls:6,vars:15,consts:[["date_template",""],[1,"relative","-left-4","w-[calc(100%+2rem)]","mt-4","h-[calc(100%-1rem)]","flex","flex-col"],[1,"w-full","overflow-auto","h-1/2","flex-1","p-4"],["purchase-orders","",1,"block","min-w-[52rem]","text-sm",3,"row_clicked","dataSource","columns","display_column","column_size","template","empty"],["class","opacity-30",4,"ngIf"],[1,"opacity-30"]],template:function(s,i){if(1&s){const o=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"custom-table",3),e.nI1(3,"async"),e.bIt("row_clicked",function(c){return e.eBV(o),e.Njj(i.editOrder(c))}),e.k0s()()(),e.DNE(4,di,3,5,"ng-template",null,0,e.C5r)}if(2&s){let o;const a=e.sdS(5);e.R7$(2),e.Y8G("dataSource",i.purchase_orders)("columns",e.lJ4(8,ri))("display_column",e.lJ4(9,ai))("column_size",e.lJ4(10,li))("template",e.sMw(11,ci,a,a,a))("empty",null!=(o=e.bMT(3,6,i.filters))&&o.search?"No matching purchase orders found.":"There are purchase orders for this building.")}},dependencies:[p.bT,U.r,p.Jj,p.vh],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%}\n\n/*# sourceMappingURL=asset-purchase-order-list.component.ts-angular-inline--121.css.map*/"]})}return n})();const Ze=()=>({standalone:!0}),ui=(n,r)=>[n,"view",r],mi=n=>[n];function _i(n,r){if(1&n&&(e.j41(0,"mat-option",23),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.purchase_order_number||t.invoice_number," ")}}function fi(n,r){1&n&&(e.j41(0,"mat-option",24),e.EFF(1," No purchase orders "),e.k0s()),2&n&&e.Y8G("disabled",!0)}function hi(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",3)(1,"header",4)(2,"h2",5),e.EFF(3),e.k0s()(),e.j41(4,"main",6)(5,"div",7)(6,"label",8),e.EFF(7,"Product"),e.k0s(),e.j41(8,"mat-form-field",9),e.nrm(9,"input",10),e.k0s()(),e.j41(10,"div",11)(11,"div",7)(12,"label",12),e.EFF(13," Number of Assets to create "),e.k0s(),e.j41(14,"mat-form-field",9)(15,"input",13),e.mxI("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.DH7(o.count,i)||(o.count=i),e.Njj(i)}),e.k0s()()()(),e.j41(16,"div",7)(17,"label",14),e.EFF(18,"Label/Friendly Name"),e.k0s(),e.j41(19,"mat-form-field",9),e.nrm(20,"input",15),e.j41(21,"mat-error"),e.EFF(22," Label/Friendly Name is required "),e.k0s()()(),e.j41(23,"div",7)(24,"label",16),e.EFF(25," Purchase Order ID "),e.k0s(),e.j41(26,"mat-form-field",9)(27,"mat-select",17),e.DNE(28,_i,2,2,"mat-option",18),e.nI1(29,"async"),e.DNE(30,fi,2,1,"mat-option",19),e.nI1(31,"async"),e.k0s(),e.j41(32,"mat-error"),e.EFF(33," Purchase Order ID is required "),e.k0s()()()(),e.j41(34,"footer",20)(35,"a",21),e.EFF(36," Cancel "),e.k0s(),e.j41(37,"button",22),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.save())}),e.EFF(38," Save "),e.k0s()()()}if(2&n){let t;const s=e.XpG();e.R7$(3),e.SpI(" Bulk ",s.form.value.id?"Edit":"Add"," Asset "),e.R7$(),e.Y8G("formGroup",s.form),e.R7$(5),e.Y8G("ngModel",(null==s.product?null:s.product.name)||"No Product")("ngModelOptions",e.lJ4(14,Ze))("disabled",!0),e.R7$(6),e.R50("ngModel",s.count),e.Y8G("ngModelOptions",e.lJ4(15,Ze)),e.R7$(13),e.Y8G("ngForOf",e.bMT(29,10,s.purchase_orders)),e.R7$(2),e.Y8G("ngIf",!(null!=(t=e.bMT(31,12,s.purchase_orders))&&t.length)),e.R7$(5),e.Y8G("routerLink",s.product?e.l_i(16,ui,s.base_route,s.product.id):e.eq3(19,mi,s.base_route))}}function gi(n,r){if(1&n&&(e.j41(0,"div",25),e.nrm(1,"mat-spinner",26),e.j41(2,"p"),e.EFF(3),e.k0s()()),2&n){const t=e.XpG();e.R7$(),e.Y8G("diameter",32),e.R7$(2),e.JRh(t.loading)}}let Ke=(()=>{class n extends d.Tv{get base_route(){return this._state.base_route}constructor(t,s,i,o){super(),this._state=t,this._route=s,this._router=i,this._org=o,this.form=(0,_.QP)(),this.purchase_orders=this._state.purchase_orders,this.count=2,this.loading=""}ngOnInit(){var t=this;this.subscription("route.query",this._route.queryParamMap.subscribe(function(){var s=(0,m.A)(function*(i){if(i.get("id")){t.loading="Loading Asset Details...";const o=yield(0,_.qA)(i.get("id")).toPromise().catch(()=>null);o||((0,d.UG)("Unable to load asset details."),t._router.navigate([t.base_route])),t.form.patchValue(o),t.loading=""}if(i.get("group_id")){t.loading="Loading Product Details...";const o=yield(0,_.RF)(i.get("group_id")).toPromise().catch(()=>null);o||((0,d.UG)("Unable to load associated product details."),t._router.navigate([t.base_route])),t.product=o,t.form.patchValue({type_id:o.id}),t.loading=""}});return function(i){return s.apply(this,arguments)}}())),this._state.setOptions({active_item:null}),this.count=2}save(){var t=this;return(0,m.A)(function*(){if(!t.count&&t.count<1)return(0,d.UG)("Please enter a valid number of assets to add.");if(!t.form.valid)return(0,d.UG)(`Some fields are invalid. [${(0,d.F7)(t.form)}]`);t.loading="Saving Product...";const s=t.form.value,i=yield(0,_.G1)(new Array(t.count).fill({...s,zone_id:t._org.building.id})).toPromise().catch(o=>{throw t.loading="",(0,d.UG)(`Error saving asset: ${o.message}`),o});t._state.setExtraAssets(i.map(o=>({...o,type_id:t.product.id}))),t.form.reset(),t._state.postChange(),(0,d.VX)(`Asset added ${i.length} successfully.`),t._router.navigate([t.base_route,"view",t.product?.id]),t.loading=""})()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(I),e.rXU(h.nX),e.rXU(h.Ix),e.rXU(A.yb))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["asset-bulk-form"]],features:[e.Vt3],decls:4,vars:2,consts:[["load_state",""],[1,"absolute","inset-0","bg-base-100"],["class","h-full max-w-[32rem] mx-auto flex flex-col",4,"ngIf","ngIfElse"],[1,"h-full","max-w-[32rem]","mx-auto","flex","flex-col"],[1,"p-4"],[1,"text-center","text-xl","font-medium"],[1,"flex-1","h-1/2","overflow-auto",3,"formGroup"],[1,"flex","flex-1","flex-col","space-y-2"],["for","name"],["appearance","outline"],["matInput","",3,"ngModel","ngModelOptions","disabled"],[1,"flex","items-center","space-x-2"],["for","count"],["matInput","","name","count","type","number","placeholder","Number of assets to add",3,"ngModelChange","ngModel","ngModelOptions"],["for","identifier"],["matInput","","name","identifier","placeholder","Identifier, Asset ID or Barcode","formControlName","identifier"],["for","purchase-order-id"],["formControlName","purchase_order_id","placeholder","Select Purchase Order"],[3,"value",4,"ngFor","ngForOf"],["class","opacity-60",3,"disabled",4,"ngIf"],[1,"flex","justify-end","space-x-2","p-2","border-t","border-base-200"],["btn","","matRipple","",1,"w-32","inverse",3,"routerLink"],["btn","","matRipple","",1,"w-32",3,"click"],[3,"value"],[1,"opacity-60",3,"disabled"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]],template:function(s,i){if(1&s&&(e.j41(0,"div",1),e.DNE(1,hi,39,21,"div",2),e.k0s(),e.DNE(2,gi,4,2,"ng-template",null,0,e.C5r)),2&s){const o=e.sdS(3);e.R7$(),e.Y8G("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[p.Sq,p.bT,k.rl,k.TL,N.fg,W.VO,v.wT,$.LG,v.r6,f.me,f.Q0,f.BC,f.cb,f.vS,f.j4,f.JD,h.Wk,p.Jj]})}return n})();var vi=l(45189),bi=l(96843);const xi=["asset-manager",""];const tt=[{path:"list",component:Ge,children:[{path:"items",component:ze},{path:"requests",component:Ye},{path:"purchase-orders",component:We},{path:"**",redirectTo:"requests"}]},{path:"view/:id",component:Pe},{path:"manage",children:[{path:"group",component:Qe},{path:"asset",component:He},{path:"asset-bulk",component:Ke},{path:"category",component:ce},{path:"purchase-order",component:Je}]},{path:"**",redirectTo:"list/requests"}],yi=[{path:"new",component:(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["","asset-manager",""]],attrs:xi,decls:5,vars:0,consts:[[1,"flex","flex-1","h-px"],[1,"flex","flex-col","flex-1","w-1/2","h-full"]],template:function(s,i){1&s&&(e.nrm(0,"app-topbar"),e.j41(1,"div",0),e.nrm(2,"app-sidebar"),e.j41(3,"main",1),e.nrm(4,"router-outlet"),e.k0s()())},dependencies:[vi.S,bi.c,h.n3],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background-color:var(--b1)}\n\n/*# sourceMappingURL=new-asset-manager.component.ts-angular-inline--122.css.map*/"]})}return n})(),children:tt},{path:"",component:De,children:tt},{path:"**",redirectTo:""}];let Fi=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({imports:[p.MD,Dt.r,B.hI,K.Vg,me.PO,Y.RI,Gt,h.iI.forChild(yi)]})}return n})()}}]);
//# sourceMappingURL=apps_concierge_src_app_asset-manager_asset-manager_module_ts.js.map