"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([["apps_concierge_src_app_asset-manager_asset-manager_module_ts"],{11436:(Ms,de,l)=>{l.r(de),l.d(de,{AppAssetManangerModule:()=>qs});var p=l(26575),f=l(92649),W=l(10727),ue=l(78173),X=l(83517),_e=l(93170),ee=l(24565),te=l(30554),e=l(29039),me=l(73274),ne=l(32484),ge=l(9681),G=l(1062),P=l(13303);function lt(n,a){1&n&&e.Hsn(0)}const ct=["*"];let fe=(()=>{class n{constructor(t){this._elementRef=t}focus(){this._elementRef.nativeElement.focus()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.SBq))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","cdkStepHeader",""]],hostAttrs:["role","tab"],standalone:!0})}return n})(),he=(()=>{class n{constructor(t){this.template=t}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.Rgc))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","cdkStepLabel",""]],standalone:!0})}return n})(),pt=0;const xe=new e.OlP("STEPPER_GLOBAL_OPTIONS");let oe=(()=>{class n{get completed(){return null==this._completedOverride?this._getDefaultCompleted():this._completedOverride}set completed(t){this._completedOverride=t}_getDefaultCompleted(){return this.stepControl?this.stepControl.valid&&this.interacted:this.interacted}get hasError(){return null==this._customError?this._getDefaultError():this._customError}set hasError(t){this._customError=t}_getDefaultError(){return this.stepControl&&this.stepControl.invalid&&this.interacted}constructor(t,o){this._stepper=t,this.interacted=!1,this.interactedStream=new e.vpe,this.editable=!0,this.optional=!1,this._completedOverride=null,this._customError=null,this._stepperOptions=o||{},this._displayDefaultIndicatorType=!1!==this._stepperOptions.displayDefaultIndicatorType}select(){this._stepper.selected=this}reset(){this.interacted=!1,null!=this._completedOverride&&(this._completedOverride=!1),null!=this._customError&&(this._customError=!1),this.stepControl&&this.stepControl.reset()}ngOnChanges(){this._stepper._stateChanged()}_markAsInteracted(){this.interacted||(this.interacted=!0,this.interactedStream.emit(this))}_showError(){return this._stepperOptions.showError??null!=this._customError}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36((0,e.Gpc)(()=>se)),e.Y36(xe,8))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["cdk-step"]],contentQueries:function(o,s,i){if(1&o&&e.Suo(i,he,5),2&o){let r;e.iGM(r=e.CRH())&&(s.stepLabel=r.first)}},viewQuery:function(o,s){if(1&o&&e.Gf(e.Rgc,7),2&o){let i;e.iGM(i=e.CRH())&&(s.content=i.first)}},inputs:{stepControl:"stepControl",label:"label",errorMessage:"errorMessage",ariaLabel:[e.lbL.None,"aria-label","ariaLabel"],ariaLabelledby:[e.lbL.None,"aria-labelledby","ariaLabelledby"],state:"state",editable:[e.lbL.HasDecoratorInputTransform,"editable","editable",e.VuI],optional:[e.lbL.HasDecoratorInputTransform,"optional","optional",e.VuI],completed:[e.lbL.HasDecoratorInputTransform,"completed","completed",e.VuI],hasError:[e.lbL.HasDecoratorInputTransform,"hasError","hasError",e.VuI]},outputs:{interactedStream:"interacted"},exportAs:["cdkStep"],standalone:!0,features:[e.Xq5,e.TTD,e.jDz],ngContentSelectors:ct,decls:1,vars:0,template:function(o,s){1&o&&(e.F$t(),e.YNc(0,lt,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}return n})(),se=(()=>{class n{get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this.steps&&this._steps?(this._isValidIndex(t),this.selected?._markAsInteracted(),this._selectedIndex!==t&&!this._anyControlsInvalidOrPending(t)&&(t>=this._selectedIndex||this.steps.toArray()[t].editable)&&this._updateSelectedItemIndex(t)):this._selectedIndex=t}get selected(){return this.steps?this.steps.toArray()[this.selectedIndex]:void 0}set selected(t){this.selectedIndex=t&&this.steps?this.steps.toArray().indexOf(t):-1}get orientation(){return this._orientation}set orientation(t){this._orientation=t,this._keyManager&&this._keyManager.withVerticalOrientation("vertical"===t)}constructor(t,o,s){this._dir=t,this._changeDetectorRef=o,this._elementRef=s,this._destroyed=new ne.xQ,this.steps=new e.n_E,this._sortedHeaders=new e.n_E,this.linear=!1,this._selectedIndex=0,this.selectionChange=new e.vpe,this.selectedIndexChange=new e.vpe,this._orientation="horizontal",this._groupId=pt++}ngAfterContentInit(){this._steps.changes.pipe((0,G.O)(this._steps),(0,P.R)(this._destroyed)).subscribe(t=>{this.steps.reset(t.filter(o=>o._stepper===this)),this.steps.notifyOnChanges()})}ngAfterViewInit(){this._stepHeader.changes.pipe((0,G.O)(this._stepHeader),(0,P.R)(this._destroyed)).subscribe(t=>{this._sortedHeaders.reset(t.toArray().sort((o,s)=>o._elementRef.nativeElement.compareDocumentPosition(s._elementRef.nativeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)),this._sortedHeaders.notifyOnChanges()}),this._keyManager=new _e.Em(this._sortedHeaders).withWrap().withHomeAndEnd().withVerticalOrientation("vertical"===this._orientation),(this._dir?this._dir.change:(0,ge.of)()).pipe((0,G.O)(this._layoutDirection()),(0,P.R)(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.updateActiveItem(this._selectedIndex),this.steps.changes.subscribe(()=>{this.selected||(this._selectedIndex=Math.max(this._selectedIndex-1,0))}),this._isValidIndex(this._selectedIndex)||(this._selectedIndex=0)}ngOnDestroy(){this._keyManager?.destroy(),this.steps.destroy(),this._sortedHeaders.destroy(),this._destroyed.next(),this._destroyed.complete()}next(){this.selectedIndex=Math.min(this._selectedIndex+1,this.steps.length-1)}previous(){this.selectedIndex=Math.max(this._selectedIndex-1,0)}reset(){this._updateSelectedItemIndex(0),this.steps.forEach(t=>t.reset()),this._stateChanged()}_getStepLabelId(t){return`cdk-step-label-${this._groupId}-${t}`}_getStepContentId(t){return`cdk-step-content-${this._groupId}-${t}`}_stateChanged(){this._changeDetectorRef.markForCheck()}_getAnimationDirection(t){const o=t-this._selectedIndex;return o<0?"rtl"===this._layoutDirection()?"next":"previous":o>0?"rtl"===this._layoutDirection()?"previous":"next":"current"}_getIndicatorType(t,o="number"){const s=this.steps.toArray()[t],i=this._isCurrentStep(t);return s._displayDefaultIndicatorType?this._getDefaultIndicatorLogic(s,i):this._getGuidelineLogic(s,i,o)}_getDefaultIndicatorLogic(t,o){return t._showError()&&t.hasError&&!o?"error":!t.completed||o?"number":t.editable?"edit":"done"}_getGuidelineLogic(t,o,s="number"){return t._showError()&&t.hasError&&!o?"error":t.completed&&!o?"done":t.completed&&o?s:t.editable&&o?"edit":s}_isCurrentStep(t){return this._selectedIndex===t}_getFocusIndex(){return this._keyManager?this._keyManager.activeItemIndex:this._selectedIndex}_updateSelectedItemIndex(t){const o=this.steps.toArray();this.selectionChange.emit({selectedIndex:t,previouslySelectedIndex:this._selectedIndex,selectedStep:o[t],previouslySelectedStep:o[this._selectedIndex]}),this._containsFocus()?this._keyManager.setActiveItem(t):this._keyManager.updateActiveItem(t),this._selectedIndex=t,this.selectedIndexChange.emit(this._selectedIndex),this._stateChanged()}_onKeydown(t){const o=(0,te.Vb)(t),s=t.keyCode,i=this._keyManager;null==i.activeItemIndex||o||s!==te.L_&&s!==te.K5?i.setFocusOrigin("keyboard").onKeydown(t):(this.selectedIndex=i.activeItemIndex,t.preventDefault())}_anyControlsInvalidOrPending(t){return!!(this.linear&&t>=0)&&this.steps.toArray().slice(0,t).some(o=>{const s=o.stepControl;return(s?s.invalid||s.pending||!o.interacted:!o.completed)&&!o.optional&&!o._completedOverride})}_layoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_containsFocus(){const t=this._elementRef.nativeElement,o=(0,me.ht)();return t===o||t.contains(o)}_isValidIndex(t){return t>-1&&(!this.steps||t<this.steps.length)}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(ee.Is,8),e.Y36(e.sBO),e.Y36(e.SBq))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","cdkStepper",""]],contentQueries:function(o,s,i){if(1&o&&(e.Suo(i,oe,5),e.Suo(i,fe,5)),2&o){let r;e.iGM(r=e.CRH())&&(s._steps=r),e.iGM(r=e.CRH())&&(s._stepHeader=r)}},inputs:{linear:[e.lbL.HasDecoratorInputTransform,"linear","linear",e.VuI],selectedIndex:[e.lbL.HasDecoratorInputTransform,"selectedIndex","selectedIndex",e.Cb_],selected:"selected",orientation:"orientation"},outputs:{selectionChange:"selectionChange",selectedIndexChange:"selectedIndexChange"},exportAs:["cdkStepper"],standalone:!0,features:[e.Xq5]})}return n})(),dt=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[ee.vT]})}return n})();var x=l(10257),ve=l(51886),ut=l(24646),M=l(36520),Z=l(47422),be=l(45083),h=l(12501);function _t(n,a){if(1&n&&e.GkF(0,2),2&n){const t=e.oxw();e.Q6J("ngTemplateOutlet",t.iconOverrides[t.state])("ngTemplateOutletContext",t._getIconContext())}}function mt(n,a){if(1&n&&(e.TgZ(0,"span",7),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(),e.Oqu(t._getDefaultTextForState(t.state))}}function gt(n,a){if(1&n&&(e.TgZ(0,"span",9),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(),e.Oqu(t._intl.completedLabel)}}function ft(n,a){if(1&n&&(e.TgZ(0,"span",9),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(),e.Oqu(t._intl.editableLabel)}}function ht(n,a){if(1&n&&(e.YNc(0,gt,2,1,"span",8)(1,ft,2,1),e.TgZ(2,"mat-icon",7),e._uU(3),e.qZA()),2&n){const t=e.oxw(2);e.um2(0,"done"===t.state?0:"edit"===t.state?1:-1),e.xp6(3),e.Oqu(t._getDefaultTextForState(t.state))}}function xt(n,a){if(1&n&&e.YNc(0,mt,2,1)(1,ht,4,2),2&n){const t=e.oxw();let o;e.um2(0,"number"===(o=t.state)?0:1)}}function vt(n,a){1&n&&(e.TgZ(0,"div",10),e.GkF(1,11),e.qZA()),2&n&&(e.xp6(),e.Q6J("ngTemplateOutlet",a.template))}function bt(n,a){if(1&n&&(e.TgZ(0,"div",10),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(),e.Oqu(t.label)}}function Zt(n,a){if(1&n&&(e.TgZ(0,"div",12),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(),e.Oqu(t._intl.optionalLabel)}}function At(n,a){if(1&n&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(),e.Oqu(t.errorMessage)}}function Tt(n,a){}function yt(n,a){if(1&n&&(e.Hsn(0),e.YNc(1,Tt,0,0,"ng-template",0)),2&n){const t=e.oxw();e.xp6(),e.Q6J("cdkPortalOutlet",t._portal)}}const Ze=["*"];function wt(n,a){1&n&&e.Hsn(0)}function Ct(n,a){1&n&&e._UZ(0,"div",6)}const Ae=(n,a)=>({step:n,i:a});function qt(n,a){if(1&n&&(e.GkF(0,4),e.YNc(1,Ct,1,0,"div",5)),2&n){const t=a.$implicit,o=a.$index,s=a.$count;e.oxw(2);const i=e.MAs(4);e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.WLB(3,Ae,t,o)),e.xp6(),e.um2(1,o!==s-1?1:-1)}}const Te=n=>({animationDuration:n}),ye=(n,a)=>({value:n,params:a});function Mt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",7),e.NdJ("@horizontalStepTransition.done",function(s){e.CHM(t);const i=e.oxw(2);return e.KtG(i._animationDone.next(s))}),e.GkF(1,8),e.qZA()}if(2&n){const t=a.$implicit,o=a.$index,s=e.oxw(2);e.ekj("mat-horizontal-stepper-content-inactive",s.selectedIndex!==o),e.Q6J("@horizontalStepTransition",e.WLB(8,ye,s._getAnimationDirection(o),e.VKq(6,Te,s._getAnimationDuration())))("id",s._getStepContentId(o)),e.uIk("aria-labelledby",s._getStepLabelId(o)),e.xp6(),e.Q6J("ngTemplateOutlet",t.content)}}function kt(n,a){if(1&n&&(e.TgZ(0,"div",1)(1,"div",2),e.SjG(2,qt,2,6,null,null,e.x6l),e.qZA(),e.TgZ(4,"div",3),e.SjG(5,Mt,2,11,"div",9,e.x6l),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.wJu(t.steps),e.xp6(3),e.wJu(t.steps)}}function It(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",10),e.GkF(1,4),e.TgZ(2,"div",11)(3,"div",12),e.NdJ("@verticalStepTransition.done",function(s){e.CHM(t);const i=e.oxw(2);return e.KtG(i._animationDone.next(s))}),e.TgZ(4,"div",13),e.GkF(5,8),e.qZA()()()()}if(2&n){const t=a.$implicit,o=a.$index,s=a.$count,i=e.oxw(2),r=e.MAs(4);e.xp6(),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.WLB(10,Ae,t,o)),e.xp6(),e.ekj("mat-stepper-vertical-line",o!==s-1),e.xp6(),e.ekj("mat-vertical-stepper-content-inactive",i.selectedIndex!==o),e.Q6J("@verticalStepTransition",e.WLB(15,ye,i._getAnimationDirection(o),e.VKq(13,Te,i._getAnimationDuration())))("id",i._getStepContentId(o)),e.uIk("aria-labelledby",i._getStepLabelId(o)),e.xp6(2),e.Q6J("ngTemplateOutlet",t.content)}}function Ut(n,a){if(1&n&&e.SjG(0,It,6,18,"div",14,e.x6l),2&n){const t=e.oxw();e.wJu(t.steps)}}function Lt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-step-header",15),e.NdJ("click",function(){const i=e.CHM(t).step;return e.KtG(i.select())})("keydown",function(s){e.CHM(t);const i=e.oxw();return e.KtG(i._onKeydown(s))}),e.qZA()}if(2&n){const t=a.step,o=a.i,s=e.oxw();e.ekj("mat-horizontal-stepper-header","horizontal"===s.orientation)("mat-vertical-stepper-header","vertical"===s.orientation),e.Q6J("tabIndex",s._getFocusIndex()===o?0:-1)("id",s._getStepLabelId(o))("index",o)("state",s._getIndicatorType(o,t.state))("label",t.stepLabel||t.label)("selected",s.selectedIndex===o)("active",s._stepIsNavigable(o,t))("optional",t.optional)("errorMessage",t.errorMessage)("iconOverrides",s._iconOverrides)("disableRipple",s.disableRipple||!s._stepIsNavigable(o,t))("color",t.color||s.color),e.uIk("aria-posinset",o+1)("aria-setsize",s.steps.length)("aria-controls",s._getStepContentId(o))("aria-selected",s.selectedIndex==o)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null)("aria-disabled",!s._stepIsNavigable(o,t)||null)}}let ie=(()=>{class n extends he{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.n5z(n)))(s||n)}})();static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","matStepLabel",""]],standalone:!0,features:[e.qOj]})}return n})(),H=(()=>{class n{constructor(){this.changes=new ne.xQ,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const St={provide:H,deps:[[new e.FiY,new e.tp0,H]],useFactory:function Ot(n){return n||new H}};let ae=(()=>{class n extends fe{constructor(t,o,s,i){super(s),this._intl=t,this._focusMonitor=o,this._intlSubscription=t.changes.subscribe(()=>i.markForCheck())}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._intlSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,o){t?this._focusMonitor.focusVia(this._elementRef,t,o):this._elementRef.nativeElement.focus(o)}_stringLabel(){return this.label instanceof ie?null:this.label}_templateLabel(){return this.label instanceof ie?this.label:null}_getHostElement(){return this._elementRef.nativeElement}_getIconContext(){return{index:this.index,active:this.active,optional:this.optional}}_getDefaultTextForState(t){return"number"==t?`${this.index+1}`:"edit"==t?"create":"error"==t?"warning":t}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(H),e.Y36(_e.tE),e.Y36(e.SBq),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["mat-step-header"]],hostAttrs:["role","tab",1,"mat-step-header"],hostVars:2,hostBindings:function(o,s){2&o&&e.Tol("mat-"+(s.color||"primary"))},inputs:{state:"state",label:"label",errorMessage:"errorMessage",iconOverrides:"iconOverrides",index:"index",selected:"selected",active:"active",optional:"optional",disableRipple:"disableRipple",color:"color"},standalone:!0,features:[e.qOj,e.jDz],decls:10,vars:17,consts:[["matRipple","",1,"mat-step-header-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-step-icon-content"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mat-step-label"],["class","mat-step-text-label"],["class","mat-step-optional"],["class","mat-step-sub-label-error"],["aria-hidden","true"],["class","cdk-visually-hidden"],[1,"cdk-visually-hidden"],[1,"mat-step-text-label"],[3,"ngTemplateOutlet"],[1,"mat-step-optional"],[1,"mat-step-sub-label-error"]],template:function(o,s){if(1&o&&(e._UZ(0,"div",0),e.TgZ(1,"div")(2,"div",1),e.YNc(3,_t,1,2,"ng-container",2)(4,xt,2,1),e.qZA()(),e.TgZ(5,"div",3),e.YNc(6,vt,2,1,"div",4)(7,bt,2,1)(8,Zt,2,1,"div",5)(9,At,2,1,"div",6),e.qZA()),2&o){let i;e.Q6J("matRippleTrigger",s._getHostElement())("matRippleDisabled",s.disableRipple),e.xp6(),e.Gre("mat-step-icon-state-",s.state," mat-step-icon"),e.ekj("mat-step-icon-selected",s.selected),e.xp6(2),e.um2(3,s.iconOverrides&&s.iconOverrides[s.state]?3:4),e.xp6(2),e.ekj("mat-step-label-active",s.active)("mat-step-label-selected",s.selected)("mat-step-label-error","error"==s.state),e.xp6(),e.um2(6,(i=s._templateLabel())?6:s._stringLabel()?7:-1,i),e.xp6(2),e.um2(8,s.optional&&"error"!=s.state?8:-1),e.xp6(),e.um2(9,"error"===s.state?9:-1)}},dependencies:[x.wG,p.tP,ve.Hw],styles:['.mat-step-header{overflow:hidden;outline:none;cursor:pointer;position:relative;box-sizing:content-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-step-header:focus .mat-focus-indicator::before{content:""}.mat-step-header:hover[aria-disabled=true]{cursor:default}.mat-step-header:hover:not([aria-disabled]),.mat-step-header:hover[aria-disabled=false]{background-color:var(--mat-stepper-header-hover-state-layer-color)}.mat-step-header.cdk-keyboard-focused,.mat-step-header.cdk-program-focused{background-color:var(--mat-stepper-header-focus-state-layer-color)}@media(hover: none){.mat-step-header:hover{background:none}}.cdk-high-contrast-active .mat-step-header{outline:solid 1px}.cdk-high-contrast-active .mat-step-header[aria-selected=true] .mat-step-label{text-decoration:underline}.cdk-high-contrast-active .mat-step-header[aria-disabled=true]{outline-color:GrayText}.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-label,.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-icon,.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-optional{color:GrayText}.mat-step-optional{font-size:12px;color:var(--mat-stepper-header-optional-label-text-color)}.mat-step-sub-label-error{font-size:12px;font-weight:normal}.mat-step-icon{border-radius:50%;height:24px;width:24px;flex-shrink:0;position:relative;color:var(--mat-stepper-header-icon-foreground-color);background-color:var(--mat-stepper-header-icon-background-color)}.mat-step-icon-content{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:flex}.mat-step-icon .mat-icon{font-size:16px;height:16px;width:16px}.mat-step-icon-state-error{background-color:var(--mat-stepper-header-error-state-icon-background-color);color:var(--mat-stepper-header-error-state-icon-foreground-color)}.mat-step-icon-state-error .mat-icon{font-size:24px;height:24px;width:24px}.mat-step-label{display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:50px;vertical-align:middle;font-family:var(--mat-stepper-header-label-text-font);font-size:var(--mat-stepper-header-label-text-size);font-weight:var(--mat-stepper-header-label-text-weight);color:var(--mat-stepper-header-label-text-color)}.mat-step-label.mat-step-label-active{color:var(--mat-stepper-header-selected-state-label-text-color)}.mat-step-label.mat-step-label-error{color:var(--mat-stepper-header-error-state-label-text-color);font-size:var(--mat-stepper-header-error-state-label-text-size)}.mat-step-label.mat-step-label-selected{font-size:var(--mat-stepper-header-selected-state-label-text-size);font-weight:var(--mat-stepper-header-selected-state-label-text-weight)}.mat-step-text-label{text-overflow:ellipsis;overflow:hidden}.mat-step-header .mat-step-header-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-step-icon-selected{background-color:var(--mat-stepper-header-selected-state-icon-background-color);color:var(--mat-stepper-header-selected-state-icon-foreground-color)}.mat-step-icon-state-done{background-color:var(--mat-stepper-header-done-state-icon-background-color);color:var(--mat-stepper-header-done-state-icon-foreground-color)}.mat-step-icon-state-edit{background-color:var(--mat-stepper-header-edit-state-icon-background-color);color:var(--mat-stepper-header-edit-state-icon-foreground-color)}'],encapsulation:2,changeDetection:0})}return n})();const qe={horizontalStepTransition:(0,h.X$)("horizontalStepTransition",[(0,h.SB)("previous",(0,h.oB)({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"})),(0,h.SB)("current",(0,h.oB)({transform:"none",visibility:"inherit"})),(0,h.SB)("next",(0,h.oB)({transform:"translate3d(100%, 0, 0)",visibility:"hidden"})),(0,h.eR)("* => *",(0,h.ru)([(0,h.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)"),(0,h.IO)("@*",(0,h.pV)(),{optional:!0})]),{params:{animationDuration:"500ms"}})]),verticalStepTransition:(0,h.X$)("verticalStepTransition",[(0,h.SB)("previous",(0,h.oB)({height:"0px",visibility:"hidden"})),(0,h.SB)("next",(0,h.oB)({height:"0px",visibility:"hidden"})),(0,h.SB)("current",(0,h.oB)({height:"*",visibility:"inherit"})),(0,h.eR)("* <=> current",(0,h.ru)([(0,h.jt)("{{animationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)"),(0,h.IO)("@*",(0,h.pV)(),{optional:!0})]),{params:{animationDuration:"225ms"}})])};let Nt=(()=>{class n{constructor(t){this.templateRef=t}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.Rgc))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["ng-template","matStepperIcon",""]],inputs:{name:[e.lbL.None,"matStepperIcon","name"]},standalone:!0})}return n})(),Dt=(()=>{class n{constructor(t){this._template=t}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(e.Rgc))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["ng-template","matStepContent",""]],standalone:!0})}return n})(),Ft=(()=>{class n extends oe{constructor(t,o,s,i){super(t,i),this._errorStateMatcher=o,this._viewContainerRef=s,this._isSelected=ut.w.EMPTY,this.stepLabel=void 0}ngAfterContentInit(){this._isSelected=this._stepper.steps.changes.pipe((0,M.w)(()=>this._stepper.selectionChange.pipe((0,Z.U)(t=>t.selectedStep===this),(0,G.O)(this._stepper.selected===this)))).subscribe(t=>{t&&this._lazyContent&&!this._portal&&(this._portal=new X.UE(this._lazyContent._template,this._viewContainerRef))})}ngOnDestroy(){this._isSelected.unsubscribe()}isErrorState(t,o){return this._errorStateMatcher.isErrorState(t,o)||!!(t&&t.invalid&&this.interacted)}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36((0,e.Gpc)(()=>Me)),e.Y36(x.rD,4),e.Y36(e.s_b),e.Y36(xe,8))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["mat-step"]],contentQueries:function(o,s,i){if(1&o&&(e.Suo(i,ie,5),e.Suo(i,Dt,5)),2&o){let r;e.iGM(r=e.CRH())&&(s.stepLabel=r.first),e.iGM(r=e.CRH())&&(s._lazyContent=r.first)}},hostAttrs:["hidden",""],inputs:{color:"color"},exportAs:["matStep"],standalone:!0,features:[e._Bn([{provide:x.rD,useExisting:n},{provide:oe,useExisting:n}]),e.qOj,e.jDz],ngContentSelectors:Ze,decls:1,vars:0,consts:[[3,"cdkPortalOutlet"]],template:function(o,s){1&o&&(e.F$t(),e.YNc(0,yt,2,1,"ng-template"))},dependencies:[X.Pl],encapsulation:2,changeDetection:0})}return n})(),Me=(()=>{class n extends se{get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t)?t+"ms":t}constructor(t,o,s){super(t,o,s),this._stepHeader=void 0,this._steps=void 0,this.steps=new e.n_E,this.animationDone=new e.vpe,this.labelPosition="end",this.headerPosition="top",this._iconOverrides={},this._animationDone=new ne.xQ,this._animationDuration="",this._isServer=!(0,e.f3M)(me.t4).isBrowser;const i=s.nativeElement.nodeName.toLowerCase();this.orientation="mat-vertical-stepper"===i?"vertical":"horizontal"}ngAfterContentInit(){super.ngAfterContentInit(),this._icons.forEach(({name:t,templateRef:o})=>this._iconOverrides[t]=o),this.steps.changes.pipe((0,P.R)(this._destroyed)).subscribe(()=>{this._stateChanged()}),this._animationDone.pipe((0,be.x)((t,o)=>t.fromState===o.fromState&&t.toState===o.toState),(0,P.R)(this._destroyed)).subscribe(t=>{"current"===t.toState&&this.animationDone.emit()})}_stepIsNavigable(t,o){return o.completed||this.selectedIndex===t||!this.linear}_getAnimationDuration(){return this.animationDuration?this.animationDuration:"horizontal"===this.orientation?"500ms":"225ms"}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(ee.Is,8),e.Y36(e.sBO),e.Y36(e.SBq))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["mat-stepper"],["mat-vertical-stepper"],["mat-horizontal-stepper"],["","matStepper",""]],contentQueries:function(o,s,i){if(1&o&&(e.Suo(i,Ft,5),e.Suo(i,Nt,5)),2&o){let r;e.iGM(r=e.CRH())&&(s._steps=r),e.iGM(r=e.CRH())&&(s._icons=r)}},viewQuery:function(o,s){if(1&o&&e.Gf(ae,5),2&o){let i;e.iGM(i=e.CRH())&&(s._stepHeader=i)}},hostAttrs:["role","tablist"],hostVars:11,hostBindings:function(o,s){2&o&&(e.uIk("aria-orientation",s.orientation),e.ekj("mat-stepper-horizontal","horizontal"===s.orientation)("mat-stepper-vertical","vertical"===s.orientation)("mat-stepper-label-position-end","horizontal"===s.orientation&&"end"==s.labelPosition)("mat-stepper-label-position-bottom","horizontal"===s.orientation&&"bottom"==s.labelPosition)("mat-stepper-header-position-bottom","bottom"===s.headerPosition))},inputs:{disableRipple:"disableRipple",color:"color",labelPosition:"labelPosition",headerPosition:"headerPosition",animationDuration:"animationDuration"},outputs:{animationDone:"animationDone"},exportAs:["matStepper","matVerticalStepper","matHorizontalStepper"],standalone:!0,features:[e._Bn([{provide:se,useExisting:n}]),e.qOj,e.jDz],ngContentSelectors:Ze,decls:5,vars:2,consts:[["stepTemplate",""],[1,"mat-horizontal-stepper-wrapper"],[1,"mat-horizontal-stepper-header-container"],[1,"mat-horizontal-content-container"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","mat-stepper-horizontal-line"],[1,"mat-stepper-horizontal-line"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id"],[3,"ngTemplateOutlet"],["class","mat-horizontal-stepper-content","role","tabpanel",3,"id","mat-horizontal-stepper-content-inactive"],[1,"mat-step"],[1,"mat-vertical-content-container"],["role","tabpanel",1,"mat-vertical-stepper-content",3,"id"],[1,"mat-vertical-content"],["class","mat-step"],[3,"tabIndex","id","index","state","label","selected","active","optional","errorMessage","iconOverrides","disableRipple","color","click","keydown"]],template:function(o,s){if(1&o&&(e.F$t(),e.YNc(0,wt,1,0)(1,kt,7,0)(2,Ut,2,0)(3,Lt,1,23,"ng-template",null,0,e.W1O)),2&o){let i;e.um2(0,s._isServer?0:-1),e.xp6(),e.um2(1,"horizontal"===(i=s.orientation)?1:"vertical"===i?2:-1)}},dependencies:[p.tP,ae],styles:['.mat-stepper-vertical,.mat-stepper-horizontal{display:block;font-family:var(--mat-stepper-container-text-font);background:var(--mat-stepper-container-color)}.mat-horizontal-stepper-header-container{white-space:nowrap;display:flex;align-items:center}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header-container{align-items:flex-start}.mat-stepper-header-position-bottom .mat-horizontal-stepper-header-container{order:1}.mat-stepper-horizontal-line{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin:0 -16px;min-width:32px;border-top-color:var(--mat-stepper-line-color)}.mat-stepper-label-position-bottom .mat-stepper-horizontal-line{margin:0;min-width:0;position:relative;top:calc(calc((var(--mat-stepper-header-height) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{border-top-width:1px;border-top-style:solid;content:"";display:inline-block;height:0;position:absolute;width:calc(50% - 20px)}.mat-horizontal-stepper-header{display:flex;height:72px;overflow:hidden;align-items:center;padding:0 24px;height:var(--mat-stepper-header-height)}.mat-horizontal-stepper-header .mat-step-icon{margin-right:8px;flex:none}[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:8px}.mat-horizontal-stepper-header::before,.mat-horizontal-stepper-header::after{border-top-color:var(--mat-stepper-line-color)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{padding:calc((var(--mat-stepper-header-height) - 24px) / 2) 24px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::after{top:calc(calc((var(--mat-stepper-header-height) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{box-sizing:border-box;flex-direction:column;height:auto}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{right:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before{left:0}[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:last-child::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:first-child::after{display:none}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-label{padding:16px 0 0 0;text-align:center;width:100%}.mat-vertical-stepper-header{display:flex;align-items:center;height:24px;padding:calc((var(--mat-stepper-header-height) - 24px) / 2) 24px}.mat-vertical-stepper-header .mat-step-icon{margin-right:12px}[dir=rtl] .mat-vertical-stepper-header .mat-step-icon{margin-right:0;margin-left:12px}.mat-horizontal-stepper-wrapper{display:flex;flex-direction:column}.mat-horizontal-stepper-content{outline:0}.mat-horizontal-stepper-content.mat-horizontal-stepper-content-inactive{height:0;overflow:hidden}.mat-horizontal-stepper-content:not(.mat-horizontal-stepper-content-inactive){visibility:inherit !important}.mat-horizontal-content-container{overflow:hidden;padding:0 24px 24px 24px}.cdk-high-contrast-active .mat-horizontal-content-container{outline:solid 1px}.mat-stepper-header-position-bottom .mat-horizontal-content-container{padding:24px 24px 0 24px}.mat-vertical-content-container{margin-left:36px;border:0;position:relative}.cdk-high-contrast-active .mat-vertical-content-container{outline:solid 1px}[dir=rtl] .mat-vertical-content-container{margin-left:0;margin-right:36px}.mat-stepper-vertical-line::before{content:"";position:absolute;left:0;border-left-width:1px;border-left-style:solid;border-left-color:var(--mat-stepper-line-color);top:calc(8px - calc((var(--mat-stepper-header-height) - 24px) / 2));bottom:calc(8px - calc((var(--mat-stepper-header-height) - 24px) / 2))}[dir=rtl] .mat-stepper-vertical-line::before{left:auto;right:0}.mat-vertical-stepper-content{overflow:hidden;outline:0}.mat-vertical-stepper-content:not(.mat-vertical-stepper-content-inactive){visibility:inherit !important}.mat-vertical-content{padding:0 24px 24px 24px}.mat-step:last-child .mat-vertical-content-container{border:none}'],encapsulation:2,data:{animation:[qe.horizontalStepTransition,qe.verticalStepTransition]},changeDetection:0})}return n})(),Jt=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({providers:[St,x.rD],imports:[x.BQ,p.ez,X.eL,dt,ve.Ps,x.si,Me,ae,x.BQ]})}return n})();var Pt=l(97910),_=l(71670),R=l(78466),u=l(22798),Rt=l(47049),ke=l(57016),Et=l(4512),E=l(67343),O=l(70462),w=l(28159),Ie=l(15746),S=l(680),Qt=l(95933),re=l(85046),Yt=l(58175),B=l(46939),V=l(17627),m=l(36285),Q=l(47298),U=l(93121),q=l(17401),L=l(94888);function jt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7),e._uU(2),e.qZA(),e.TgZ(3,"button",8),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,i=e.oxw();return e.KtG(i.edit(s))}),e.TgZ(4,"app-icon"),e._uU(5,"edit"),e.qZA()(),e.TgZ(6,"button",8),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,i=e.oxw();return e.KtG(i.remove(s))}),e.TgZ(7,"app-icon"),e._uU(8,"delete"),e.qZA()()()}if(2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.name)}}function zt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,jt,9,1,"div",5),e.BQk()),2&n){const t=a.$implicit;e.xp6(),e.Q6J("ngIf",t.id)}}let Ue=(()=>{class n{constructor(t,o){var s=this;this._data=t,this._dialog_ref=o,this.changed=new e.vpe,this.list=this._data.list,this.edit=this._data.edit,this.remove=function(){var i=(0,_.Z)(function*(r){yield(0,m.Qd)(r.id).toPromise(),s.changed.emit()});return function(r){return i.apply(this,arguments)}}()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(q.WI),e.Y36(q.so))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["asset-category-management-modal"]],decls:14,vars:3,consts:[["btn","","icon","","matRipple","","mat-dialog-close",""],[1,"overflow-y-auto","min-w-[20rem]","divide-y","divide-base-200","max-h-[65vh]"],["btn","","matRipple","",1,"flex","items-center","justify-center","space-x-2","w-[calc(100%-1rem)]","m-2",3,"click"],[1,"truncate"],[4,"ngFor","ngForOf"],["class","flex items-center space-x-2 hover:bg-base-200:bg-base-300 p-2",4,"ngIf"],[1,"flex","items-center","space-x-2","hover:bg-base-200:bg-base-300","p-2"],[1,"flex-1","truncate"],["btn","","icon","","matRipple","",3,"click"]],template:function(o,s){1&o&&(e.TgZ(0,"header")(1,"h2"),e._uU(2,"Manage Categories"),e.qZA(),e.TgZ(3,"button",0)(4,"app-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"main",1)(7,"button",2),e.NdJ("click",function(){return s.edit()}),e.TgZ(8,"div",3),e._uU(9,"New Category"),e.qZA(),e.TgZ(10,"app-icon"),e._uU(11,"add"),e.qZA()(),e.YNc(12,zt,2,1,"ng-container",4),e.ALo(13,"async"),e.qZA()),2&o&&(e.xp6(12),e.Q6J("ngForOf",e.lcZ(13,1,s.list)))},dependencies:[p.sg,p.O5,q.ZT,x.wG,L.o,p.Ov]})}return n})();var A=l(71268),N=l(99674),K=l(96355),J=l(33910),g=l(28849);function Gt(n,a){1&n&&(e.TgZ(0,"button",6)(1,"app-icon"),e._uU(2,"close"),e.qZA()())}function Ht(n,a){if(1&n&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(),e.hij(" ",t.name," ")}}function Bt(n,a){if(1&n&&(e.TgZ(0,"main",7)(1,"div",8)(2,"label",9),e._uU(3,"Name"),e.TgZ(4,"span"),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"mat-form-field",10),e._UZ(7,"input",11),e.TgZ(8,"mat-error"),e._uU(9,"Name is required"),e.qZA()()(),e.TgZ(10,"div",8)(11,"label",9),e._uU(12,"Parent Category"),e.qZA(),e.TgZ(13,"mat-form-field",10)(14,"mat-select",12),e.ALo(15,"async"),e.YNc(16,Ht,2,2,"mat-option",13),e.ALo(17,"async"),e.qZA()()()()),2&n){const t=e.oxw();let o;e.Q6J("formGroup",t.form),e.xp6(14),e.Q6J("disabled",!(null!=(o=e.lcZ(15,3,t.categories))&&o.length)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(17,5,t.categories))}}function Vt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"footer",15)(1,"a",16),e._uU(2,"Cancel"),e.qZA(),e.TgZ(3,"button",17),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.save())}),e._uU(4,"Save"),e.qZA()()}}function Kt(n,a){1&n&&(e.TgZ(0,"div",18),e._UZ(1,"mat-spinner",19),e.TgZ(2,"p",20),e._uU(3,"Saving Category..."),e.qZA()()),2&n&&(e.xp6(),e.Q6J("diameter",32))}let le=(()=>{class n{constructor(t,o,s){this._state=o,this._dialog_ref=s,this.loading=!1,this.form=(0,m.rx)(),this.categories=this._state.categories.pipe((0,Z.U)(i=>i.filter(r=>r.parent_category_id!==this.form.value.id))),t?.category&&this.form.patchValue(t.category)}save(){var t=this;return(0,_.Z)(function*(){if(!t.form.valid)return;t.loading=!0,t._dialog_ref.disableClose=!0;const o=t.form.value,s=yield(0,m.Di)(o).toPromise().catch(i=>{throw t.loading=!1,t._dialog_ref.disableClose=!1,(0,u.cB)(`Error saving category: ${i.message}`),i});t.form.reset(),t.loading=!1,t._dialog_ref.close(s)})()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(q.WI),e.Y36(y),e.Y36(q.so))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["asset-category-form"]],decls:8,vars:5,consts:[[1,"flex","items-center","p-2"],[1,"text-center","text-xl","font-medium"],["btn","","icon","","matRipple","","mat-dialog-close","",4,"ngIf"],["class","flex-1 h-1/2 overflow-auto p-2 w-[20rem] max-w-[80vw]",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex justify-end space-x-2 p-2 border-t border-base-200",4,"ngIf"],["load_state",""],["btn","","icon","","matRipple","","mat-dialog-close",""],[1,"flex-1","h-1/2","overflow-auto","p-2","w-[20rem]","max-w-[80vw]",3,"formGroup"],[1,"flex","flex-col","space-y-2"],["for","name"],["appearance","outline"],["matInput","","name","name","placeholder","Category Name","formControlName","name"],["formControlName","parent_category_id","placeholder","No Parent",3,"disabled"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex","justify-end","space-x-2","p-2","border-t","border-base-200"],["btn","","matRipple","","mat-dialog-close","",1,"w-32","inverse"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"flex","flex-col","items-center","justify-center","p-8"],[3,"diameter"],[1,"mt-4"]],template:function(o,s){if(1&o&&(e.TgZ(0,"header",0)(1,"h2",1),e._uU(2),e.qZA(),e.YNc(3,Gt,3,0,"button",2),e.qZA(),e.YNc(4,Bt,18,7,"main",3)(5,Vt,5,0,"footer",4)(6,Kt,4,1,"ng-template",null,5,e.W1O)),2&o){const i=e.MAs(7);e.xp6(2),e.hij(" ",s.form.value.id?"Edit":"Add"," Category "),e.xp6(),e.Q6J("ngIf",!s.loading),e.xp6(),e.Q6J("ngIf",!s.loading)("ngIfElse",i),e.xp6(),e.Q6J("ngIf",!s.loading)}},dependencies:[p.sg,p.O5,A.KE,A.TO,N.Nt,K.gD,x.ey,J.Ou,q.ZT,x.wG,g.Fj,g.JJ,g.JL,g.sg,g.u,L.o,p.Ov]})}return n})();var Y=l(11862),$t=l(75111);let y=(()=>{class n extends u.cx{get form(){return this._form}get is_new_ui(){return location.hash.includes("new")||location.pathname.includes("new")}get base_route(){return this.is_new_ui?"/book/assets/new":"/book/assets"}constructor(t,o,s){super(),this._spaces=t,this._org=o,this._dialog=s,this._options=new O.X({view:"grid"}),this._change=new O.X(0),this._poll=new O.X(0),this._extra_assets=new O.X([]),this._form=(0,m.PG)(),this._loading=new O.X(!1),this.loading=this._loading.asObservable(),this.options=this._options.asObservable(),this.extra_assets=this._extra_assets.asObservable(),this.products=(0,w.aj)([this._change,this._org.active_building]).pipe((0,M.w)(()=>(this._loading.next(!0),(0,m.AS)({zone_id:this._org.building?.id}))),(0,Ie.b)(i=>this._loading.next(!1)),(0,S.d)(1)),this.purchase_orders=this._change.pipe((0,M.w)(()=>(this._loading.next(!0),(0,m.TB)())),(0,Ie.b)(()=>this._loading.next(!1)),(0,S.d)(1)),this.requests=(0,w.aj)([this._options,this._org.active_building,this._poll,this._change,this._spaces.initialised]).pipe((0,Qt.b)(200),(0,M.w)(([{date:i},r])=>{const c=(0,ke.Z)(i||Date.now()).valueOf(),d=(0,Et.Z)(i||Date.now()).valueOf();return(0,R.F2)({zones:r?.id,period_start:(0,E.Z)(c),period_end:(0,E.Z)(d),type:"asset-request"}).pipe((0,Z.U)(v=>v.map(b=>new R.$N({...b,extension_data:{...b.extension_data,space:this._spaces.find(b.extension_data.space_id)}})).filter(b=>{const T=b.linked_event||b.linked_bookings[0];if(!T)return!1;const C=new $t.T({...b.extension_data?.request});C._time=T.date||1e3*T.event_start||1e3*T.booking_start||c;const F=T.date_end||1e3*T.event_end||1e3*T.booking_end||d;return C?.deliver_at>=c&&C?.deliver_at<d&&C?.deliver_at<F})))}),(0,S.d)(1)),this.filtered_requests=(0,w.aj)([this.requests,this._options]).pipe((0,Z.U)(([i,r])=>{const c=(r.search||"").toLowerCase();return console.log("Requests:",i,c),c?i.filter(d=>d.user_name.toLowerCase().includes(c)||d.title.toLowerCase().includes(c)||d.extension_data.location_name?.toLowerCase().includes(c)||d.extension_data.assets?.find(v=>v.name.toLowerCase().includes(c))||d.status.includes(c)||d.extension_data.tracking?.includes(c)):i})),this.categories=(0,w.aj)([this._options,this._change]).pipe((0,M.w)(()=>(0,m.vD)()),(0,Z.U)(i=>[new m.fd({id:"",name:"Uncategorised"}),...i]),(0,S.d)(1)),this.active_product=(0,w.aj)([this._options,this._org.active_building,this._change]).pipe((0,re.h)(([{active_item:i}])=>!!i),(0,Z.U)(([i,r])=>[i.active_item,r]),(0,be.x)(),(0,M.w)(([i])=>(0,m.ue)(i,{zone_id:this._org.building.id})),(0,S.d)(1)),this.active_product_requests=this.active_product.pipe((0,M.w)(i=>this.requests.pipe((0,Z.U)(r=>r.filter(c=>i.assets.find(d=>d.id===c.asset_id))))),(0,Z.U)(i=>i.filter(r=>"declined"!==r.status))),this.filtered_products=(0,w.aj)([this.products,this._options]).pipe((0,Z.U)(([i,r])=>r.search?i.filter(c=>c.name.toLowerCase().includes(r.search.toLowerCase())):i)),this.product_mapping=(0,w.aj)([this.filtered_products,this.categories]).pipe((0,Z.U)(([i,r])=>{const c={_count:i.length};i.forEach(v=>v.category_id=r.find(b=>b.id===v.category_id)?v.category_id:"");const d=(0,u.Tw)(i.map(v=>v.category_id));for(const v of d)c[v]=i.filter(b=>b.category_id===v);return c})),this.settings=(0,w.aj)([this._org.active_building,this._change]).pipe((0,re.h)(([i])=>!!i),(0,M.w)(([i])=>(0,Q.rlq)(i.id,"assets-settings").pipe((0,Yt.K)(r=>(0,ge.of)({})))),(0,Z.U)(i=>i.details||{}),(0,S.d)(1)),this.availability=this.settings.pipe((0,Z.U)(i=>i.disabled_rooms||[]))}startPolling(t=15e3){return this.interval("polling",()=>this._poll.next(Date.now()),t),()=>this.stopPolling()}stopPolling(){this.clearInterval("polling")}resetForm(){this._form=(0,m.PG)()}manageCategories(){const t=this._dialog.open(Ue,{data:{list:this.categories,edit:o=>this.editCategory(o)}});this.subscription("category_modal",t.componentInstance.changed.subscribe(()=>this._change.next(Date.now()))),t.afterClosed().subscribe(()=>this.unsub("category_modal"))}editCategory(t={}){var o=this;return(0,_.Z)(function*(){const i=yield o._dialog.open(le,{data:{category:t}}).afterClosed().toPromise();return i?(o._change.next(Date.now()),i):null})()}setExtraAssets(t){this._extra_assets.next(t)}setOptions(t){this._options.next({...this._options.getValue(),...t})}postChange(){this.timeout("change",()=>this._change.next(Date.now()),1e3)}setStatus(t,o){var s=this;return(0,_.Z)(function*(){let i=t;return"declined"===o?i=yield(0,R.FP)(t.id).toPromise():"approved"===o&&(i=yield(0,R.jT)(t.id).toPromise()),s._change.next(Date.now()),i})()}setTracking(t,o){var s=this;return(0,_.Z)(function*(){const i=yield(0,R.Wp)(t.id,{...t.toJSON(),extension_data:{...t.extension_data,tracking:o}}).toPromise();return s._change.next(Date.now()),i})()}deleteActiveProduct(){var t=this;return(0,_.Z)(function*(){const o=yield t.active_product.pipe((0,B.q)(1)).toPromise();o?.id&&(yield(0,m.RE)(o.id).toPromise(),t._change.next(Date.now()),(0,u.t5)("Successfully deleted asset"))})()}postForm(){var t=this;return(0,_.Z)(function*(){if(!t.form?.valid)return;const o=t.form.value,s={...o},i=["other_data","id","name","quantity","category","purchase_date","brand","images"];for(const c of i)delete s[c];o.other_data=(0,Q.sWL)(s,[void 0,null,""]);const r=yield(0,m.U)(o).toPromise();return t._change.next(Date.now()),(0,u.t5)(`Successfully ${o.id?"updated":"created"} asset`),t.resetForm(),r.id})()}editConfig(){var t=this;return(0,_.Z)(function*(){const o=yield t.getConfig(t._org.building.id),s=yield t.products.pipe((0,B.q)(1)).toPromise(),i=(0,u.Tw)((0,u.xH)(s.map(d=>[d.name]))),r=t._dialog.open(Y.uX,{data:{resource_name:"Assets",config:o,types:i,require_notes:!1}}),c=yield Promise.race([r.componentInstance.event.pipe((0,V.P)(d=>"done"===d.reason)).toPromise(),r.afterClosed().toPromise()]);"done"===c?.reason&&t.updateConfig(t._org.building.id,c.metadata).then(()=>r.close(),()=>r.componentInstance.loading=!1)})()}getConfig(t=this._org.building.id){return(0,_.Z)(function*(){const o=(yield(0,Q.rlq)(t,"assets_config").toPromise()).details;return o instanceof Array?o:[]})()}updateConfig(t,o){return(0,Q.Ymr)(t,{id:t,name:"assets_config",details:o,description:`Assets config for ${t}`}).toPromise()}saveSettings(t){var o=this;return(0,_.Z)(function*(){const s=yield o.settings.pipe((0,B.q)(1)).toPromise(),i=yield(0,Q.Ymr)(o._org.building.id,{id:o._org.building.id,name:"assets-settings",details:{...s,...t},description:`Assets settings for ${o._org.building.id}`}).toPromise();return o._change.next(Date.now()),i})()}static#e=this.\u0275fac=function(o){return new(o||n)(e.LFG(Rt.sK),e.LFG(U.w7),e.LFG(q.uw))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var j=l(60989),Wt=l(60702);const Xt=n=>[n,"manage","group"];function en(n,a){if(1&n&&(e.TgZ(0,"a",10),e._uU(1," Add Product "),e.qZA()),2&n){const t=e.oxw();e.Q6J("routerLink",e.VKq(1,Xt,t.base_route))}}const tn=n=>[n,"manage","purchase-order"];function nn(n,a){if(1&n&&(e.TgZ(0,"a",10),e._uU(1," Add Purchase Order "),e.qZA()),2&n){const t=e.oxw();e.Q6J("routerLink",e.VKq(1,tn,t.base_route))}}function on(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-button-toggle-group",11),e.NdJ("ngModelChange",function(s){e.CHM(t);const i=e.oxw();return e.KtG(i.setOptions({view:s}))}),e.ALo(1,"async"),e.TgZ(2,"mat-button-toggle",12)(3,"div",13)(4,"app-icon"),e._uU(5,"view_module"),e.qZA()()(),e.TgZ(6,"mat-button-toggle",14)(7,"div",13)(8,"app-icon"),e._uU(9,"view_list"),e.qZA()()()()}if(2&n){const t=e.oxw();let o;e.Q6J("ngModel",null==(o=e.lcZ(1,1,t.options))?null:o.view)}}function sn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.editConfig())}),e.TgZ(1,"app-icon"),e._uU(2,"menu_book"),e.qZA()()}}function an(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setRoomAvailability())}),e.TgZ(1,"app-icon"),e._uU(2,"event_available"),e.qZA()()}}function rn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.manageCategories())}),e.TgZ(1,"app-icon"),e._uU(2,"list_alt"),e.qZA()()}}let Le=(()=>{class n extends u.cx{get base_route(){return this._state.base_route}constructor(t,o){super(),this._state=t,this._dialog=o,this.active="",this.options=this._state.options,this.setOptions=s=>this._state.setOptions(s),this.manageCategories=()=>this._state.manageCategories(),this.editConfig=()=>this._state.editConfig()}setRoomAvailability(){var t=this;return(0,_.Z)(function*(){const o=t._dialog.open(Y.z4,{data:{type:"Assets",disabled_rooms:yield t._state.availability.pipe((0,B.q)(1)).toPromise()}});t.subscription("room-availability",o.componentInstance.change.subscribe(function(){var s=(0,_.Z)(function*(i){yield t._state.saveSettings({disabled_rooms:i}).catch(),o.componentInstance.loading=!1});return function(i){return s.apply(this,arguments)}}()))})()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(y),e.Y36(q.uw))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["asset-manager-topbar"]],inputs:{active:"active"},features:[e.qOj],decls:13,vars:9,consts:[[1,"w-full","px-4","py-2","bg-base-100","flex","items-center","space-x-4"],["btn","","matRipple","","class","secondary",3,"routerLink",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],[1,"flex-1"],["btn","","icon","","matRipple","","class","border border-base-200","matTooltip","Edit Config",3,"click",4,"ngIf"],["btn","","icon","","matRipple","","class","border border-base-200","matTooltip","Room Availability",3,"click",4,"ngIf"],["btn","","icon","","matRipple","","class","border border-base-200","matTooltip","Manage Categories",3,"click",4,"ngIf"],["appearance","outline",1,"h-[3.25rem]"],["matPrefix","",1,"text-2xl","relative","top-1","-left-1"],["matInput","","placeholder","Search products and requests",3,"ngModel","ngModelChange"],["btn","","matRipple","",1,"secondary",3,"routerLink"],[3,"ngModel","ngModelChange"],["value","grid"],[1,"flex","items-center","justify-center","h-10","w-6","text-xl"],["value","list"],["btn","","icon","","matRipple","","matTooltip","Edit Config",1,"border","border-base-200",3,"click"],["btn","","icon","","matRipple","","matTooltip","Room Availability",1,"border","border-base-200",3,"click"],["btn","","icon","","matRipple","","matTooltip","Manage Categories",1,"border","border-base-200",3,"click"]],template:function(o,s){if(1&o&&(e.TgZ(0,"div",0),e.YNc(1,en,2,3,"a",1)(2,nn,2,3,"a",1)(3,on,10,3,"mat-button-toggle-group",2),e._UZ(4,"div",3),e.YNc(5,sn,3,0,"button",4)(6,an,3,0,"button",5)(7,rn,3,0,"button",6),e.TgZ(8,"mat-form-field",7)(9,"app-icon",8),e._uU(10," search "),e.qZA(),e.TgZ(11,"input",9),e.NdJ("ngModelChange",function(r){return s.setOptions({search:r})}),e.ALo(12,"async"),e.qZA()()()),2&o){let i;e.xp6(),e.Q6J("ngIf","items"===s.active),e.xp6(),e.Q6J("ngIf","purchase-orders"===s.active),e.xp6(),e.Q6J("ngIf","items"===s.active),e.xp6(2),e.Q6J("ngIf","items"===s.active),e.xp6(),e.Q6J("ngIf","items"===s.active),e.xp6(),e.Q6J("ngIf","items"===s.active),e.xp6(4),e.Q6J("ngModel",null==(i=e.lcZ(12,7,s.options))?null:i.search)}},dependencies:[p.O5,A.KE,A.qo,N.Nt,Wt.gM,x.wG,g.Fj,g.JJ,g.On,L.o,W.A9,W.Yi,f.rH,p.Ov]})}return n})();const ln=n=>[n,"list","requests"];function cn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"a",7),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.active="requests")}),e._uU(1," Requests "),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("routerLink",e.VKq(3,ln,t.base_route))("routerLinkActive","active")("active","requests"===t.active)}}const pn=n=>[n,"list","items"],dn=n=>[n,"list","purchase-orders"];function un(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"nav",4),e.YNc(1,cn,2,5,"a",5),e.TgZ(2,"a",6),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.active="items")}),e._uU(3," Products "),e.qZA(),e.TgZ(4,"a",6),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.active="purchase-orders")}),e._uU(5," Purchase Orders "),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(),e.Q6J("ngIf",!t.is_new),e.xp6(),e.Q6J("routerLink",e.VKq(5,pn,t.base_route))("active","items"===t.active),e.xp6(2),e.Q6J("routerLink",e.VKq(7,dn,t.base_route))("active","purchase-orders"===t.active)}}let Oe=(()=>{class n extends u.cx{get base_route(){return this._state.base_route}constructor(t,o){super(),this._router=t,this._state=o,this.active="requests",this.is_new=!1}ngOnInit(){this.is_new=this._router.url.includes("new"),this.active=this._router.url.includes("requests")?"requests":this._router.url.includes("items")?"items":"purchase-orders",this.subscription("router.events",this._router.events.subscribe(t=>{t instanceof f.m2&&(this.is_new=this._router.url.includes("new"),this.active=this._router.url.includes("requests")?"requests":this._router.url.includes("items")?"items":"purchase-orders")}))}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(f.F0),e.Y36(y))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["asset-listing"]],features:[e.qOj],decls:5,vars:2,consts:[[3,"active"],[1,"flex","flex-col","flex-1","h-1/2","w-full","px-4"],["mat-tab-nav-bar","",4,"ngIf"],[1,"flex-1","h-1/2","w-full","overflow-visible"],["mat-tab-nav-bar",""],["mat-tab-link","",3,"routerLink","routerLinkActive","active","click",4,"ngIf"],["mat-tab-link","",3,"routerLink","active","click"],["mat-tab-link","",3,"routerLink","routerLinkActive","active","click"]],template:function(o,s){1&o&&(e._UZ(0,"asset-manager-topbar",0),e.TgZ(1,"div",1),e.YNc(2,un,6,9,"nav",2),e.TgZ(3,"div",3),e._UZ(4,"router-outlet"),e.qZA()()),2&o&&(e.Q6J("active",s.active),e.xp6(2),e.Q6J("ngIf",!s.is_new||"requests"!==s.active))},dependencies:[p.O5,j.BU,j.Nj,f.lC,f.rH,f.Od,Le],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%}\n\n/*# sourceMappingURL=asset-listing.component.ts-angular-inline--115.css.map*/"]})}return n})();var _n=l(42349);const mn=["asset-manager",""];let Se=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["","asset-manager",""]],attrs:mn,decls:3,vars:0,consts:[[1,"relative","w-1/2","flex-1","bg-base-100","overflow-hidden"]],template:function(o,s){1&o&&(e._UZ(0,"sidebar"),e.TgZ(1,"main",0),e._UZ(2,"router-outlet"),e.qZA())},dependencies:[_n.k,f.lC],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%;background:var(--b1)}\n\n/*# sourceMappingURL=asset-manager.component.ts-angular-inline--116.css.map*/"]})}return n})();var gn=l(60942),I=l(78128),fn=l(51674),z=l(27442);let $=(()=>{class n{transform(t,o="_",s=" "){return(t||"").split(o).join(s)}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275pipe=e.Yjl({name:"splitjoin",type:n,pure:!0})}return n})();function hn(n,a){if(1&n&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&n){const t=e.oxw();let o;e.xp6(),e.hij(" ",(null==(o=t.level(t.selected.zone))?null:o.display_name)||"N/A"," ")}}const Ne=()=>({display:"none"}),xn=(n,a)=>({"#Zones":n,"#zones":a});function vn(n,a){if(1&n&&e._UZ(0,"i-map",16),2&n){const t=e.oxw();let o;e.Q6J("src",(null==(o=t.level(t.selected.zone))?null:o.map_id)||"")("styles",e.WLB(5,xn,e.DdM(3,Ne),e.DdM(4,Ne)))("features",t.selected_feature)}}function bn(n,a){1&n&&(e.TgZ(0,"p",17),e._uU(1," Select a space from the list to view map location "),e.qZA())}function Zn(n,a){if(1&n&&e._uU(0),2&n){const t=a.data,o=e.oxw();let s;e.hij(" ",(null==(s=o.level(t))?null:s.display_name)||"N/A"," ")}}function An(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(s){return s.stopPropagation()}),e.TgZ(1,"div",19),e._uU(2),e.ALo(3,"splitjoin"),e.qZA(),e.TgZ(4,"app-icon",20),e._uU(5,"expand_more"),e.qZA()(),e.TgZ(6,"mat-menu",21,22)(8,"button",23),e.NdJ("click",function(){const i=e.CHM(t).row,r=e.oxw();return e.KtG(r.setTracking(i,"in_storage"))}),e._uU(9," In Storage "),e.qZA(),e.TgZ(10,"button",23),e.NdJ("click",function(){const i=e.CHM(t).row,r=e.oxw();return e.KtG(r.setTracking(i,"in_transit"))}),e._uU(11," In Transit "),e.qZA(),e.TgZ(12,"button",23),e.NdJ("click",function(){const i=e.CHM(t).row,r=e.oxw();return e.KtG(r.setTracking(i,"at_location"))}),e._uU(13," At Location "),e.qZA()()}if(2&n){const t=a.row,o=e.MAs(7),s=e.oxw();e.Q6J("matMenuTriggerFor",o)("disabled",s.loading[t.id]),e.xp6(2),e.hij(" ",e.lcZ(3,3,null==t.extension_data?null:t.extension_data.tracking)||"In Storage"," ")}}const Tn=()=>["zones","description","tracking","user_name"],yn=()=>["Level","Space","Tracking","Requestee"],wn=()=>["4r","flex","10r","6r"],Cn=(n,a)=>({tracking:n,zones:a});let De=(()=>{class n{updateFeatures(){var t=this;return(0,_.Z)(function*(){const o=yield t._space.transform(t.selected.extension_data?.location_id);t.selected_feature=t.selected?[{location:o.map_id,content:Y.qL,z_index:99,data:{message:`${o.display_name||o.name} is here`}}]:[]})()}setTracking(t,o){var s=this;return(0,_.Z)(function*(){s.loading[t.id]=!0,yield s._state.setTracking(t,o),s.loading[t.id]=!1})()}constructor(t,o,s){this._state=t,this._org=o,this._space=s,this.asset=this._state.active_product,this.requests=this._state.active_product_requests,this.loading={}}level(t){return this._org.levelWithID(t)}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(y),e.Y36(U.w7),e.Y36(gn.X))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["asset-location-modal"]],decls:24,vars:20,consts:[[1,"p-6","relative"],["icon","","matRipple","","mat-dialog-close","",1,"absolute","top-4","right-4"],[1,"font-medium","mb-2"],["appearance","outline",1,"h-[3.5rem]","mb-2"],["matPrefix",""],["matInput","","placeholder","Search..."],[1,"flex","items-center","space-x-4","w-[90vw]","text-sm"],[1,"flex-1","h-[60vh]","w-1/2","border","border-base-200","bg-base-200","overflow-auto"],[3,"dataSource","columns","display_column","column_size","template","row_clicked"],[1,"flex-1","h-[60vh]","w-1/2","border","border-base-200","bg-base-200","relative","flex","items-center","justify-center"],["class","absolute top-4 left-4 bg-base-100 px-4 py-2 rounded-3xl border border-base-200",4,"ngIf"],[3,"src","styles","features",4,"ngIf","ngIfElse"],["empty_state",""],["level_template",""],["tracking_template",""],[1,"absolute","top-4","left-4","bg-base-100","px-4","py-2","rounded-3xl","border","border-base-200"],[3,"src","styles","features"],[1,"opacity-30"],["matRipple","",1,"bg-none","w-full","flex","items-center","px-2","py-1","text-left",3,"matMenuTriggerFor","disabled","click"],[1,"capitalize","flex-1"],[1,"text-2xl"],[1,"w-36"],["tracking_menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(o,s){if(1&o&&(e.TgZ(0,"div",0)(1,"button",1)(2,"app-icon"),e._uU(3,"close"),e.qZA()(),e.TgZ(4,"h2",2),e._uU(5),e.ALo(6,"async"),e.ALo(7,"async"),e.qZA(),e.TgZ(8,"mat-form-field",3)(9,"app-icon",4),e._uU(10,"search"),e.qZA(),e._UZ(11,"input",5),e.qZA(),e.TgZ(12,"div",6)(13,"div",7)(14,"custom-table",8),e.NdJ("row_clicked",function(r){return s.selected=r,s.updateFeatures()}),e.qZA()(),e.TgZ(15,"div",9),e.YNc(16,hn,2,1,"div",10)(17,vn,1,8,"i-map",11),e.qZA()()(),e.YNc(18,bn,2,0,"ng-template",null,12,e.W1O)(20,Zn,1,1,"ng-template",null,13,e.W1O)(22,An,14,5,"ng-template",null,14,e.W1O)),2&o){const i=e.MAs(19),r=e.MAs(21),c=e.MAs(23);let d;e.xp6(5),e.AsE(" ",null==(d=e.lcZ(6,10,s.asset))?null:d.name," in use location: ",null==(d=e.lcZ(7,12,s.requests))?null:d.length," "),e.xp6(9),e.Q6J("dataSource",s.requests)("columns",e.DdM(14,Tn))("display_column",e.DdM(15,yn))("column_size",e.DdM(16,wn))("template",e.WLB(17,Cn,c,r)),e.xp6(2),e.Q6J("ngIf",s.selected),e.xp6(),e.Q6J("ngIf",s.selected)("ngIfElse",i)}},dependencies:[p.O5,A.KE,A.qo,N.Nt,I.VK,I.OP,I.p6,q.ZT,x.wG,L.o,fn.p,z.C,p.Ov,$]})}return n})();var qn=l(58415),Mn=l(33884),kn=l(11624);function In(n,a){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"async"),e.BQk()),2&n){const t=e.oxw(2);let o;e.xp6(),e.hij(" ",(null==(o=e.lcZ(2,1,t.item))?null:o.description)||"~No Description~"," ")}}function Un(n,a){1&n&&(e.TgZ(0,"span",48),e._uU(1,"No Description"),e.qZA())}const Fe=n=>[n,"manage","asset"],Je=(n,a)=>({id:n,group_id:a});function Ln(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",49)(1,"a",50),e.ALo(2,"async"),e.TgZ(3,"app-icon",22),e._uU(4,"edit"),e.qZA()(),e.TgZ(5,"button",51),e.NdJ("click",function(){const i=e.CHM(t).row,r=e.oxw(2);return e.KtG(r.removeAsset(i))}),e.TgZ(6,"app-icon",22),e._uU(7,"delete"),e.qZA()()()}if(2&n){const t=a.row,o=e.oxw(2);let s;e.xp6(),e.Q6J("routerLink",e.VKq(4,Fe,o.base_route))("queryParams",e.WLB(6,Je,t.id,null==(s=e.lcZ(2,2,o.item))?null:s.id))}}const Pe=n=>[n,"manage","purchase-order"];function On(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",49)(1,"a",50)(2,"app-icon",22),e._uU(3,"edit"),e.qZA()(),e.TgZ(4,"button",51),e.NdJ("click",function(){const i=e.CHM(t).row,r=e.oxw(2);return e.KtG(r.removePurchaseOrder(i))}),e.TgZ(5,"app-icon",22),e._uU(6,"delete"),e.qZA()()()}if(2&n){const t=a.row,o=e.oxw(2);e.xp6(),e.Q6J("routerLink",e.VKq(2,Pe,o.base_route))("queryParams",e.WLB(4,Je,t.id,null==t?null:t.id))}}const Sn=n=>[n,"list","items"],ce=()=>[],Nn=n=>[n,"manage","group"],Dn=n=>({id:n}),pe=n=>({group_id:n}),Fn=n=>[n,"manage","asset-bulk"],Jn=()=>["id","identifier","serial_number","actions"],Pn=()=>["ID","Label/Friendly Name","Serial Number"," "],Rn=()=>["10r","14r","8r","flex"],En=n=>({actions:n}),Qn=()=>["purchase_order_number","invoice_number","expected_service_start_date","expected_service_end_date","actions"],Yn=()=>["Order Number","Invoice Number","Service Start","Service End"," "],jn=()=>["10r","10r","10r","10r","flex"],zn=(n,a,t)=>({actions:n,expected_service_start_date:a,expected_service_end_date:t});function Gn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"a",8)(3,"div",9)(4,"app-icon",10),e._uU(5,"arrow_back"),e.qZA(),e.TgZ(6,"div",11),e._uU(7,"Back"),e.qZA()()(),e.TgZ(8,"div",12)(9,"span"),e._uU(10,"Assets"),e.qZA(),e.TgZ(11,"span")(12,"app-icon",13),e._uU(13,"chevron_right"),e.qZA()(),e.TgZ(14,"span"),e._uU(15),e.ALo(16,"async"),e.qZA(),e.TgZ(17,"span")(18,"app-icon",13),e._uU(19,"chevron_right"),e.qZA()(),e.TgZ(20,"span"),e._uU(21),e.ALo(22,"async"),e.qZA()()(),e.TgZ(23,"div",9)(24,"div",14),e._UZ(25,"image-carousel",15),e.ALo(26,"async"),e.qZA(),e.TgZ(27,"div",16)(28,"div",17)(29,"div",18),e._uU(30),e.ALo(31,"async"),e.qZA(),e.TgZ(32,"div",19)(33,"a",20),e.ALo(34,"async"),e.TgZ(35,"div",21)(36,"app-icon",22),e._uU(37,"edit"),e.qZA(),e.TgZ(38,"div",23),e._uU(39,"Edit"),e.qZA()()(),e._UZ(40,"div",24),e.TgZ(41,"button",25)(42,"div",26)(43,"app-icon",22),e._uU(44,"delete"),e.qZA(),e.TgZ(45,"div",23),e._uU(46,"Delete"),e.qZA()()()()(),e.TgZ(47,"div",27),e.YNc(48,In,3,3,"ng-container",28),e.ALo(49,"async"),e.YNc(50,Un,2,0,"ng-template",null,29,e.W1O),e.qZA(),e.TgZ(52,"div",30)(53,"div",31)(54,"div",32),e._uU(55),e.ALo(56,"async"),e.ALo(57,"async"),e.qZA()(),e.TgZ(58,"div",31)(59,"div",32),e._uU(60),e.ALo(61,"async"),e.qZA(),e.TgZ(62,"button",33),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.viewLocations())}),e.ALo(63,"async"),e.ALo(64,"async"),e._uU(65," View Locations "),e.qZA()()()()(),e.TgZ(66,"mat-tab-group",34)(67,"mat-tab",35)(68,"div",36)(69,"h3",37),e._uU(70,"Assets"),e.qZA(),e.TgZ(71,"div",38)(72,"a",39),e.ALo(73,"async"),e._uU(74," Add Asset "),e.qZA(),e.TgZ(75,"a",39),e.ALo(76,"async"),e._uU(77," Bulk Add Asset "),e.qZA()(),e._UZ(78,"custom-table",40),e.ALo(79,"async"),e.YNc(80,Ln,8,9,"ng-template",null,41,e.W1O),e.qZA()(),e.TgZ(82,"mat-tab",42)(83,"div",36)(84,"h3",37),e._uU(85,"General"),e.qZA(),e.TgZ(86,"div",43)(87,"div",44)(88,"label"),e._uU(89,"Brand"),e.qZA(),e.TgZ(90,"div"),e._uU(91),e.ALo(92,"async"),e.qZA()()()()(),e.TgZ(93,"mat-tab",45)(94,"div",36)(95,"h3",37),e._uU(96,"Purchase Orders"),e.qZA(),e.TgZ(97,"a",46),e.ALo(98,"async"),e._uU(99," Add Purchase Order "),e.qZA(),e._UZ(100,"custom-table",40),e.ALo(101,"async"),e.YNc(102,On,7,7,"ng-template",null,47,e.W1O),e.qZA()()()()}if(2&n){const t=e.MAs(51),o=e.MAs(81),s=e.MAs(103),i=e.oxw(),r=e.MAs(7),c=e.MAs(5);let d,v,b,T,C,D,F,tt,nt,ot,st,it,at,rt;e.xp6(2),e.Q6J("routerLink",e.VKq(64,Sn,i.base_route)),e.xp6(13),e.Oqu(null==(d=e.lcZ(16,30,i.item))||null==d.category?null:d.category.name),e.xp6(6),e.Oqu(null==(v=e.lcZ(22,32,i.item))?null:v.name),e.xp6(4),e.Q6J("images",(null==(b=e.lcZ(26,34,i.item))?null:b.images)||e.DdM(66,ce)),e.xp6(5),e.hij(" ",null==(T=e.lcZ(31,36,i.item))?null:T.name," "),e.xp6(3),e.Q6J("routerLink",e.VKq(67,Nn,i.base_route))("queryParams",e.VKq(69,Dn,null==(C=e.lcZ(34,38,i.item))?null:C.id)),e.xp6(9),e.Q6J("content",r),e.xp6(6),e.Q6J("ngIf",null==(D=e.lcZ(49,40,i.item))?null:D.description)("ngIfElse",t),e.xp6(7),e.hij(" Available: ",e.lcZ(56,42,i.asset_list).length-(null==(F=e.lcZ(57,44,i.requests))?null:F.length)||0," "),e.xp6(5),e.hij(" In Use: ",(null==(tt=e.lcZ(61,46,i.requests))?null:tt.length)||0," "),e.xp6(2),e.Q6J("disabled",e.lcZ(63,48,i.asset_list).length-(null==(nt=e.lcZ(64,50,i.requests))?null:nt.length)!=0),e.xp6(10),e.Q6J("routerLink",e.VKq(71,Fe,i.base_route))("queryParams",e.VKq(73,pe,null==(ot=e.lcZ(73,52,i.item))?null:ot.id)),e.xp6(3),e.Q6J("routerLink",e.VKq(75,Fn,i.base_route))("queryParams",e.VKq(77,pe,null==(st=e.lcZ(76,54,i.item))?null:st.id)),e.xp6(3),e.Q6J("dataSource",e.lcZ(79,56,i.asset_list)||e.DdM(79,ce))("columns",e.DdM(80,Jn))("display_column",e.DdM(81,Pn))("column_size",e.DdM(82,Rn))("template",e.VKq(83,En,o)),e.xp6(13),e.hij(" ",(null==(it=e.lcZ(92,58,i.item))?null:it.brand)||"~None~"," "),e.xp6(6),e.Q6J("routerLink",e.VKq(85,Pe,i.base_route))("queryParams",e.VKq(87,pe,null==(at=e.lcZ(98,60,i.item))?null:at.id)),e.xp6(3),e.Q6J("dataSource",(null==(rt=e.lcZ(101,62,i.item))?null:rt.purchase_orders)||e.DdM(89,ce))("columns",e.DdM(90,Qn))("display_column",e.DdM(91,Yn))("column_size",e.DdM(92,jn))("template",e.kEZ(93,zn,s,c,c))}}function Hn(n,a){1&n&&(e.TgZ(0,"div",52),e._UZ(1,"mat-spinner",53),e.TgZ(2,"p"),e._uU(3,"Loading product details..."),e.qZA()()),2&n&&(e.xp6(),e.Q6J("diameter",32))}function Bn(n,a){1&n&&(e.TgZ(0,"span",48),e._uU(1," No Date "),e.qZA())}function Vn(n,a){if(1&n&&(e._uU(0),e.ALo(1,"date"),e.YNc(2,Bn,2,0,"span",54)),2&n){const t=a.data;e.hij(" ",e.xi3(1,2,1e3*t,"mediumDate")," "),e.xp6(2),e.Q6J("ngIf",!t)}}function Kn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",57)(1,"p"),e._uU(2,"Are you sure you want to permanently delete this product?"),e.qZA(),e.TgZ(3,"div",58)(4,"button",59),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.closeTooltip())}),e._uU(5," No "),e.qZA(),e.TgZ(6,"button",60),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.deleteAsset())}),e._uU(7," Yes, delete "),e.qZA()()()}}function $n(n,a){1&n&&(e.TgZ(0,"div",61),e._UZ(1,"mat-spinner",53),e.TgZ(2,"p"),e._uU(3,"Deleting product details..."),e.qZA()()),2&n&&(e.xp6(),e.Q6J("diameter",32))}function Wn(n,a){if(1&n&&e.YNc(0,Kn,8,0,"div",55)(1,$n,4,1,"ng-template",null,56,e.W1O),2&n){const t=e.MAs(2),o=e.oxw();e.Q6J("ngIf",!o.deleting)("ngIfElse",t)}}function Xn(n,a){1&n&&(e.TgZ(0,"div",62),e._uU(1,"No purchase orders"),e.qZA())}function eo(n,a){1&n&&(e.TgZ(0,"div",62),e._uU(1,"No assets"),e.qZA())}let Re=(()=>{class n extends u.cx{deleteAsset(){var t=this;return(0,_.Z)(function*(){t.deleting=!0,yield t._state.deleteActiveProduct(),t.deleting=!1,t._router.navigate([t._state.base_route,"list","items"]),t.closeTooltip()})()}closeTooltip(){this._tooltip_el?.close()}get code(){return this._org.currency_code}get base_route(){return this._state.base_route}constructor(t,o,s,i,r){super(),this._route=t,this._router=o,this._state=s,this._dialog=i,this._org=r,this.loading=!1,this.deleting=!1,this.item=this._state.active_product,this.asset_list=(0,w.aj)([this.item,this._state.extra_assets]).pipe((0,Z.U)(([c,d])=>c?(0,u.Tw)([...c.assets,...d.filter(v=>v.type_id===c.id)],"id"):[])),this.requests=this._state.active_product_requests.pipe((0,Z.U)(c=>c.filter(d=>d.date<=Date.now()&&(0,qn.Z)(d.date,d.duration).valueOf()>=Date.now())))}viewLocations(){this._dialog.open(De)}ngOnInit(){this.loading=!0,this.subscription("route.params",this._route.paramMap.subscribe(t=>{t.has("id")&&this._state.setOptions({active_item:t.get("id")})})),this.timeout("no_asset",()=>this._router.navigate([this._state.base_route]),1e3),this._state.active_product.pipe((0,V.P)(t=>!!t)).subscribe(()=>{this.clearTimeout("no_asset"),this.loading=!1})}removeAsset(t){var o=this;return(0,_.Z)(function*(){const s=yield(0,u._5)({title:"Delete asset",content:"Are you sure you want to delete this asset?",confirm_text:"Delete",icon:{content:"delete"}},o._dialog);if("done"!==s.reason)return;s.loading("Deleting asset..."),yield(0,m.mo)(t.id).toPromise(),yield(0,m.E5)(t.id);const i=yield o._state.active_product.pipe((0,V.P)()).toPromise();o._state.setOptions({active_item:""}),setTimeout(()=>o._state.setOptions({active_item:i.id}),1e3),s.close()})()}removePurchaseOrder(t){var o=this;return(0,_.Z)(function*(){const s=yield(0,u._5)({title:"Delete purchase order",content:"Are you sure you want to delete this purchase order?",confirm_text:"Delete",icon:{content:"delete"}},o._dialog);if("done"!==s.reason)return;s.loading("Deleting purchase order..."),yield(0,m.Nv)(t.id).toPromise();const i=yield o._state.active_product.pipe((0,V.P)()).toPromise();o._state.setOptions({active_item:""}),setTimeout(()=>o._state.setOptions({active_item:i.id}),1e3),s.close()})()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(f.gz),e.Y36(f.F0),e.Y36(y),e.Y36(q.uw),e.Y36(U.w7))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["asset-view"]],viewQuery:function(o,s){if(1&o&&e.Gf(Y.Xo,5),2&o){let i;e.iGM(i=e.CRH())&&(s._tooltip_el=i.first)}},features:[e.qOj],decls:12,vars:4,consts:[["class","h-full w-full flex flex-col",4,"ngIf","ngIfElse"],["loading_state",""],["date_template",""],["delete_tooltip",""],["empty_invoices",""],["empty_items",""],[1,"h-full","w-full","flex","flex-col"],[1,"flex","items-center","space-x-4","p-2","bg-base-100","border-b","border-base-200"],["btn","","matRipple","",1,"inverse",3,"routerLink"],[1,"flex","items-center"],[1,"text-xl"],[1,"mr-2"],[1,"flex","items-center","space-x-2","font-medium"],[1,"text-2xl"],[1,"bg-base-100","flex-1","w-1/2","h-[22.5rem]"],[3,"images"],[1,"w-[32rem]","h-[22.5rem]","px-4","flex","flex-col"],[1,"w-full","flex","items-center","justify-between","border-b","border-base-200"],[1,"font-medium"],[1,"flex","items-center","text-sm"],["btn","","matRipple","",1,"clear",3,"routerLink","queryParams"],[1,"flex","items-center","text-blue-600","hover:text-blue-900"],[1,"text-lg"],[1,"mr-2","underline"],[1,"w-px","h-4","bg-base-200"],["btn","","matRipple","",1,"clear"],["customTooltip","",1,"flex","items-center","text-blue-600","hover:text-blue-900",3,"content"],[1,"py-4","w-full","flex-1","h-1/2","overflow-auto"],[4,"ngIf","ngIfElse"],["no_desc_state",""],[1,"rounded","bg-base-100","shadow","border","border-base-200","w-full","divide-y","divide-base-200"],[1,"flex","items-center","justify-between","p-3"],[1,"pl-2"],["btn","","matRipple","",3,"disabled","click"],[1,"flex-1","h-px"],["label","Assets"],[1,"max-w-[768px]","mx-auto","p-4"],[1,"p-2"],[1,"flex","w-full","items-center","space-x-2","mb-2"],["btn","","matRipple","",1,"flex-1",3,"routerLink","queryParams"],["asset-view","","empty","No assets for this product",1,"w-full","block","text-sm",3,"dataSource","columns","display_column","column_size","template"],["action_template",""],["label","Specifications"],["data-table","",1,"bg-base-100","border","border-base-200"],[1,"flex","items-center","p-2"],["label","Purchase information"],["btn","","matRipple","",1,"mb-2",3,"routerLink","queryParams"],["po_action_template",""],[1,"opacity-30"],[1,"flex","w-full","items-center","justify-end"],["btn","","icon","","matRipple","",1,"clear",3,"routerLink","queryParams"],["btn","","icon","","matRipple","",3,"click"],[1,"h-full","w-full","flex","flex-col","items-center","justify-center"],[3,"diameter"],["class","opacity-30",4,"ngIf"],["class","p-4 bg-base-100 rounded my-2 text-center w-[18rem]",4,"ngIf","ngIfElse"],["delete_loading",""],[1,"p-4","bg-base-100","rounded","my-2","text-center","w-[18rem]"],[1,"flex","items-center","space-x-2","mt-6"],["btn","","matRipple","",1,"inverse","flex-1","w-24",3,"click"],["btn","","matRipple","",1,"error","flex-1","w-24",3,"click"],[1,"p-4","bg-base-100","rounded","my-2","w-64","h-36","flex","flex-col","items-center","justify-center","space-y-2"],[1,"p-2","opacity-30"]],template:function(o,s){if(1&o&&(e.YNc(0,Gn,104,97,"div",0),e.ALo(1,"async"),e.YNc(2,Hn,4,1,"ng-template",null,1,e.W1O)(4,Vn,3,5,"ng-template",null,2,e.W1O)(6,Wn,3,2,"ng-template",null,3,e.W1O)(8,Xn,2,0,"ng-template",null,4,e.W1O)(10,eo,2,0,"ng-template",null,5,e.W1O)),2&o){const i=e.MAs(3);e.Q6J("ngIf",!s.loading&&e.lcZ(1,2,s.item))("ngIfElse",i)}},dependencies:[p.O5,J.Ou,x.wG,L.o,z.C,Mn.X,kn.K,j.uX,j.SP,f.rH,p.Ov,p.uU],styles:["[_nghost-%COMP%]{height:100%}[data-table][_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2n){background:#0001}label[_ngcontent-%COMP%]{width:10rem;min-width:0}\n\n/*# sourceMappingURL=asset-view.component.ts-angular-inline--117.css.map*/"]})}return n})();var to=l(11771),Ee=l(32882),no=l(6324);let Qe=(()=>{class n{transform(t,o=!0){let s=(0,no.Z)({days:Math.floor(t/1440),hours:Math.floor(t/60%24),minutes:Math.floor(t%60)});return o?s.replace(" day","d").replace(" hour","hr").replace(" minute","min"):s}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275pipe=e.Yjl({name:"duration",type:n,pure:!0})}return n})();function oo(n,a){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.TgZ(2,"span",29),e._uU(3),e.qZA()()),2&n){const t=a.$implicit;e.xp6(),e.hij(" ",t.name," "),e.xp6(2),e.hij(" x",t.quantity," ")}}const so=n=>({name:n});function io(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return s.request=null,e.KtG(s.requestChange.emit(s.request))}),e._UZ(1,"div",2),e.TgZ(2,"div",3),e.NdJ("click",function(s){return s.stopPropagation()}),e.TgZ(3,"button",4),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return s.request=null,e.KtG(s.requestChange.emit(s.request))}),e.TgZ(4,"app-icon"),e._uU(5,"close"),e.qZA()(),e.TgZ(6,"div",5),e._UZ(7,"a-user-avatar",6),e.TgZ(8,"div",7)(9,"div",8),e._uU(10),e.qZA(),e.TgZ(11,"div",9)(12,"app-icon"),e._uU(13,"mail"),e.qZA(),e.TgZ(14,"a",10),e._uU(15),e.qZA()(),e.TgZ(16,"div",9)(17,"app-icon"),e._uU(18,"call"),e.qZA(),e.TgZ(19,"a",10),e._uU(20),e.qZA()(),e.TgZ(21,"div",9)(22,"app-icon"),e._uU(23,"work_outline"),e.qZA(),e.TgZ(24,"div"),e._uU(25),e.qZA()()()(),e.TgZ(26,"div",11)(27,"div",12)(28,"div",13)(29,"app-icon",14),e._uU(30,"send"),e.qZA()(),e.TgZ(31,"div",8),e._uU(32,"Asset Requested"),e.qZA()(),e.TgZ(33,"div",15),e.YNc(34,oo,4,2,"div",16),e.qZA(),e.TgZ(35,"div",17)(36,"div",13)(37,"app-icon",14),e._uU(38,"event"),e.qZA()(),e.TgZ(39,"div",8),e._uU(40,"Date For"),e.qZA()(),e.TgZ(41,"div",18),e._uU(42),e.ALo(43,"date"),e.qZA(),e.TgZ(44,"div",17)(45,"div",13)(46,"app-icon",14),e._uU(47,"schedule"),e.qZA()(),e.TgZ(48,"div",8),e._uU(49,"Period"),e.qZA()(),e.TgZ(50,"div",18),e._uU(51),e.ALo(52,"date"),e.ALo(53,"date"),e.ALo(54,"duration"),e.qZA(),e.TgZ(55,"div",17)(56,"div",13)(57,"app-icon",14),e._uU(58,"place"),e.qZA()(),e.TgZ(59,"div",8),e._uU(60,"Floor"),e.qZA()(),e.TgZ(61,"div",18),e._uU(62),e.qZA(),e.TgZ(63,"div",17)(64,"div",13)(65,"app-icon",14),e._uU(66,"meeting_room"),e.qZA()(),e.TgZ(67,"div",8),e._uU(68,"Room"),e.qZA()(),e.TgZ(69,"div",18),e._uU(70),e.qZA(),e.TgZ(71,"div",19)(72,"button",20)(73,"app-icon",21),e._uU(74),e.qZA(),e.TgZ(75,"div",22),e._uU(76),e.qZA(),e.TgZ(77,"app-icon",23),e._uU(78,"expand_more"),e.qZA()(),e.TgZ(79,"mat-menu",24,25)(81,"button",26),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setStatus("approved"))}),e._uU(82," Approve "),e.qZA(),e.TgZ(83,"button",26),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setStatus("declined"))}),e._uU(84," Decline "),e.qZA()(),e.TgZ(85,"button",27)(86,"div",22),e._uU(87),e.ALo(88,"splitjoin"),e.qZA(),e.TgZ(89,"app-icon",23),e._uU(90,"expand_more"),e.qZA()(),e.TgZ(91,"mat-menu",24,28)(93,"button",26),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setTracking("in_storage"))}),e._uU(94," In Storage "),e.qZA(),e.TgZ(95,"button",26),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setTracking("in_transit"))}),e._uU(96," In Transit "),e.qZA(),e.TgZ(97,"button",26),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.setTracking("at_location"))}),e._uU(98," At Location "),e.qZA()()()()()()}if(2&n){const t=e.MAs(80),o=e.MAs(92),s=e.oxw();let i;e.xp6(7),e.Q6J("user",e.VKq(46,so,s.request.user_name)),e.xp6(3),e.Oqu(s.request.user_name),e.xp6(4),e.Q6J("href","mailto:"+s.request.user_email,e.LSH),e.xp6(),e.hij(" ",s.request.user_email||"staff@place.tech"," "),e.xp6(4),e.Q6J("href","tel:"+s.request.user_phone,e.LSH),e.xp6(),e.hij(" ",s.request.user_phone||"04 1234 5678"," "),e.xp6(5),e.Oqu(s.request.user_company||"PlaceOS"),e.xp6(9),e.Q6J("ngForOf",s.items),e.xp6(8),e.hij(" ",e.xi3(43,33,s.request.date,"EEEE, MMMM d, y")," "),e.xp6(9),e.lnq(" ",e.xi3(52,36,s.request.date,s.time_format)," \u2013 ",e.xi3(53,39,s.request.date+60*s.request.duration*1e3,s.time_format)," (",e.lcZ(54,42,s.request.duration),") "),e.xp6(11),e.hij(" ",(null==(i=s.level(s.request.zones))?null:i.display_name)||"N/A"," "),e.xp6(8),e.hij(" ",s.request.description," "),e.xp6(2),e.ekj("bg-success","approved"===s.request.status)("bg-error","declined"===s.request.status)("bg-warning","tentative"===s.request.status),e.Q6J("matMenuTriggerFor",t)("disabled",s.loading),e.xp6(),e.ekj("text-green-600","approved"===s.request.status)("text-red-600","declined"===s.request.status)("text-yellow-400","tentative"===s.request.status),e.xp6(),e.hij(" ","approved"===s.request.status?"done":"declined"===s.request.status?"close":"warning"," "),e.xp6(2),e.hij(" ",s.request.status," "),e.xp6(9),e.Q6J("matMenuTriggerFor",o)("disabled",s.loading),e.xp6(2),e.hij(" ",e.lcZ(88,44,null==s.request.extension_data?null:s.request.extension_data.tracking)||"In Storage"," ")}}let Ye=(()=>{class n{get items(){return this.request?.extension_data?.request?.items||[]}get time_format(){return this._settings.time_format}constructor(t,o,s){this._state=t,this._org=o,this._settings=s,this.requestChange=new e.vpe,this.loading=!1}level(t){return this._org.levelWithID(t)}setStatus(t){var o=this;return(0,_.Z)(function*(){o.loading=!0,yield o._state.setStatus(o.request,t),o.request.status=t,o.loading=!1})()}setTracking(t){var o=this;return(0,_.Z)(function*(){o.loading=!0,yield o._state.setTracking(o.request,t),o.request.extension_data.tracking=t,o.loading=!1})()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(y),e.Y36(U.w7),e.Y36(u.gb))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["asset-request-details"]],inputs:{request:"request"},outputs:{requestChange:"requestChange"},decls:1,vars:1,consts:[["class","fixed inset-0 z-50",3,"click",4,"ngIf"],[1,"fixed","inset-0","z-50",3,"click"],[1,"absolute","inset-0","bg-black","opacity-50"],[1,"absolute","inset-y-0","right-0","bg-base-100","w-[480px]",3,"click"],["icon","","matRipple","",1,"absolute","top-1","right-1",3,"click"],[1,"border-b","border-base-200","px-2","py-4","flex","space-x-4"],[1,"text-xl",3,"user"],["details","",1,"space-y-1"],[1,"font-medium"],[1,"flex","items-center","text-sm","space-x-2"],[1,"underline",3,"href"],[1,"px-3","py-4","relative"],[1,"flex","items-center","space-x-4"],[1,"h-6","w-6","rounded-full","text-secondary","bg-base-200","flex","items-center","justify-center"],[1,"text-sm"],[1,"pl-10","flex","flex-col","mt-1"],[4,"ngFor","ngForOf"],[1,"flex","items-center","space-x-4","mt-4"],[1,"pl-10","mt-1"],[1,"absolute","top-4","right-4","text-sm"],["matRipple","",1,"rounded-3xl","!bg-opacity-20","flex","items-center","px-2","py-1","w-full","text-left","space-x-2","mb-4",3,"matMenuTriggerFor","disabled"],[1,"text-xl"],[1,"capitalize","flex-1"],[1,"text-2xl"],[1,"w-36"],["menu","matMenu"],["mat-menu-item","",3,"click"],["matRipple","",1,"bg-none","w-full","flex","items-center","px-2","py-1","text-left","border","border-base-200","rounded-none",3,"matMenuTriggerFor","disabled"],["tracking_menu","matMenu"],[1,"text-xs","bg-success","text-success-content","px-2","py-1","rounded"]],template:function(o,s){1&o&&e.YNc(0,io,99,48,"div",0),2&o&&e.Q6J("ngIf",s.request)},dependencies:[p.sg,p.O5,I.VK,I.OP,I.p6,x.wG,L.o,Ee.k,p.uU,$,Qe]})}return n})();const ao=n=>({name:n});function ro(n,a){if(1&n&&(e.TgZ(0,"div",14),e._UZ(1,"a-user-avatar",15),e.TgZ(2,"div",16),e._uU(3),e.qZA()()),2&n){const t=a.row;e.xp6(),e.Q6J("user",e.VKq(2,ao,t.user_name)),e.xp6(2),e.Oqu(t.user_name)}}function lo(n,a){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(),e.AsE(" ",t.quantity||1,"\xd7 ",t.name," ")}}const co=()=>[];function po(n,a){if(1&n&&(e.TgZ(0,"div",17),e.YNc(1,lo,2,2,"div",18),e.qZA()),2&n){const t=a.row;e.xp6(),e.Q6J("ngForOf",(null==t.extension_data||null==t.extension_data.request?null:t.extension_data.request.items)||e.DdM(1,co))}}function uo(n,a){if(1&n&&(e._uU(0),e.ALo(1,"date")),2&n){const t=a.row,o=e.oxw();e.hij(" ",e.xi3(1,1,null==t.extension_data||null==t.extension_data.request?null:t.extension_data.request.deliver_at,"MMM d, "+o.time_format)," ")}}function _o(n,a){if(1&n&&e._uU(0),2&n){const t=a.data,o=e.oxw();let s;e.hij(" ",(null==(s=o.level(t))?null:s.display_name)||"N/A"," ")}}function mo(n,a){if(1&n&&(e._uU(0),e.ALo(1,"date"),e._UZ(2,"br"),e._uU(3),e.ALo(4,"date")),2&n){const t=a.row,o=e.oxw();e.hij(" ",e.xi3(1,2,o.date(t),"MMM d, "+o.time_format)," "),e.xp6(3),e.hij(" ",e.xi3(4,5,o.date(t)+60*t.duration*1e3,"MMM d, "+o.time_format)," ")}}function go(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(s){return s.stopPropagation()}),e.TgZ(1,"app-icon",20),e._uU(2),e.qZA(),e.TgZ(3,"div",21),e._uU(4),e.qZA(),e.TgZ(5,"app-icon",22),e._uU(6,"expand_more"),e.qZA()(),e.TgZ(7,"mat-menu",23,24)(9,"button",25),e.NdJ("click",function(){const i=e.CHM(t).row,r=e.oxw();return e.KtG(r.setStatus(i,"approved"))}),e._uU(10," Approve "),e.qZA(),e.TgZ(11,"button",25),e.NdJ("click",function(){const i=e.CHM(t).row,r=e.oxw();return e.KtG(r.setStatus(i,"declined"))}),e._uU(12," Decline "),e.qZA()()}if(2&n){const t=a.row,o=e.MAs(8),s=e.oxw();e.ekj("bg-success","approved"===t.status)("bg-error","declined"===t.status)("bg-warning","tentative"===t.status)("text-success-content","approved"===t.status)("text-error-content","declined"===t.status)("text-warning-content","tentative"===t.status),e.Q6J("matMenuTriggerFor",o)("disabled",s.loading[t.id]),e.xp6(2),e.hij(" ","approved"===t.status?"done":"declined"===t.status?"close":"warning"," "),e.xp6(2),e.Oqu(t.status)}}function fo(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(s){return s.stopPropagation()}),e.TgZ(1,"div",21),e._uU(2),e.ALo(3,"splitjoin"),e.qZA(),e.TgZ(4,"app-icon",22),e._uU(5,"expand_more"),e.qZA()(),e.TgZ(6,"mat-menu",23,27)(8,"button",25),e.NdJ("click",function(){const i=e.CHM(t).row,r=e.oxw();return e.KtG(r.setTracking(i,"in_storage"))}),e._uU(9," In Storage "),e.qZA(),e.TgZ(10,"button",25),e.NdJ("click",function(){const i=e.CHM(t).row,r=e.oxw();return e.KtG(r.setTracking(i,"in_transit"))}),e._uU(11," In Transit "),e.qZA(),e.TgZ(12,"button",25),e.NdJ("click",function(){const i=e.CHM(t).row,r=e.oxw();return e.KtG(r.setTracking(i,"at_location"))}),e._uU(13," At Location "),e.qZA()()}if(2&n){const t=a.row,o=e.MAs(7),s=e.oxw();e.Q6J("matMenuTriggerFor",o)("disabled",s.loading[t.id]),e.xp6(2),e.hij(" ",e.lcZ(3,3,null==t.extension_data?null:t.extension_data.tracking)||"In Storage"," ")}}const ho=()=>["user","assets","date","period","zones","description","approval","tracking"],xo=()=>["Requester","Asset","Deliver At","Meeting Time","Floor","Location","Approval","Tracking"],vo=()=>["flex","12r","","8r","6r","12r","10r","10r"],bo=(n,a,t,o,s,i,r)=>({user:n,assets:a,date:t,period:o,approval:s,tracking:i,zones:r});let je=(()=>{class n extends u.cx{date(t){return t.all_day?(0,ke.Z)(t.date).valueOf():t.date}setStatus(t,o){var s=this;return(0,_.Z)(function*(){s.loading[t.id]=!0,yield s._state.setStatus(t,o),s.loading[t.id]=!1})()}setTracking(t,o){var s=this;return(0,_.Z)(function*(){s.loading[t.id]=!0,yield s._state.setTracking(t,o),s.loading[t.id]=!1})()}get time_format(){return this._settings.time_format}constructor(t,o,s){super(),this._state=t,this._org=o,this._settings=s,this.requests=this._state.filtered_requests,this.filters=this._state.options,this.loading={},this.setDate=i=>this._state.setOptions({date:i})}level(t){return this._org.levelWithID(t)}ngOnInit(){this.subscription("polling",this._state.startPolling())}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(y),e.Y36(U.w7),e.Y36(u.gb))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-asset-request-list"]],features:[e.qOj],decls:26,vars:29,consts:[[1,"relative","-left-4","w-[calc(100%+2rem)]","mt-4","h-[calc(100%-1rem)]","flex","flex-col"],[1,"bg-base-100","px-4","border-t","border-b","border-base-200","flex","items-center","justify-between"],[1,"opacity-60","text-sm"],[3,"date","dateChange"],[1,"w-full","overflow-auto","h-1/2","flex-1","p-4"],["asset-requests","",1,"block","min-w-[82rem]","text-sm",3,"dataSource","columns","display_column","column_size","template","empty","row_clicked"],["user_template",""],["assets_template",""],["date_template",""],["level_template",""],["period_template",""],["approval_template",""],["tracking_template",""],[3,"request","requestChange"],[1,"flex","items-center","space-x-2"],[3,"user"],[1,"flex-1"],[1,"flex","flex-col"],[4,"ngFor","ngForOf"],["matRipple","",1,"rounded-3xl","!bg-opacity-20","flex","items-center","px-2","py-1","w-full","text-left","space-x-2",3,"matMenuTriggerFor","disabled","click"],[1,"text-xl"],[1,"capitalize","flex-1"],[1,"text-2xl"],[1,"w-36"],["menu","matMenu"],["mat-menu-item","",3,"click"],["matRipple","",1,"bg-none","w-full","flex","items-center","px-2","py-1","text-left",3,"matMenuTriggerFor","disabled","click"],["tracking_menu","matMenu"]],template:function(o,s){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.ALo(4,"async"),e.ALo(5,"async"),e.qZA(),e.TgZ(6,"date-options",3),e.NdJ("dateChange",function(r){return s.setDate(r)}),e.ALo(7,"async"),e.qZA()(),e.TgZ(8,"div",4)(9,"custom-table",5),e.NdJ("row_clicked",function(r){return s.request=r}),e.ALo(10,"async"),e.qZA()()(),e.YNc(11,ro,4,4,"ng-template",null,6,e.W1O)(13,po,2,2,"ng-template",null,7,e.W1O)(15,uo,2,4,"ng-template",null,8,e.W1O)(17,_o,1,1,"ng-template",null,9,e.W1O)(19,mo,5,8,"ng-template",null,10,e.W1O)(21,go,13,16,"ng-template",null,11,e.W1O)(23,fo,14,5,"ng-template",null,12,e.W1O),e.TgZ(25,"asset-request-details",13),e.NdJ("requestChange",function(r){return s.request=r}),e.qZA()),2&o){const i=e.MAs(12),r=e.MAs(14),c=e.MAs(16),d=e.MAs(18),v=e.MAs(20),b=e.MAs(22),T=e.MAs(24);let C,D,F;e.xp6(3),e.AsE(" ",null==(C=e.lcZ(4,10,s.requests))?null:C.length," asset request","1"===(null==(C=e.lcZ(5,12,s.requests))?null:C.length)?"":"s"," "),e.xp6(3),e.Q6J("date",null==(D=e.lcZ(7,14,s.filters))?null:D.date),e.xp6(3),e.Q6J("dataSource",s.requests)("columns",e.DdM(18,ho))("display_column",e.DdM(19,xo))("column_size",e.DdM(20,vo))("template",e.Hh0(21,bo,i,r,c,v,b,T,d))("empty",null!=(F=e.lcZ(10,16,s.filters))&&F.search?"No matching asset requests":"There are no asset requests for the currently selected date."),e.xp6(16),e.Q6J("request",s.request)}},dependencies:[p.sg,to.E,I.VK,I.OP,I.p6,x.wG,L.o,Ee.k,z.C,Ye,p.Ov,p.uU,$],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%}\n\n/*# sourceMappingURL=asset-request-list.component.ts-angular-inline--118.css.map*/"]})}return n})();var Zo=l(78075);function Ao(n,a){if(1&n&&e._UZ(0,"img",22),2&n){const t=e.oxw().$implicit;e.Q6J("source",t.images[0])}}function To(n,a){1&n&&e._UZ(0,"img",23)}function yo(n,a){if(1&n&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(),e.hij(" Assets: ",t.asset_count||(null==t.assets?null:t.assets.length)||0," ")}}const ze=(n,a)=>[n,"view",a];function wo(n,a){if(1&n&&(e.TgZ(0,"a",15)(1,"div",16),e.YNc(2,Ao,1,1,"img",17)(3,To,1,0,"ng-template",null,18,e.W1O),e.qZA(),e.TgZ(5,"div",19)(6,"div",20),e._uU(7),e.qZA(),e.YNc(8,yo,2,1,"div",21),e.qZA()()),2&n){const t=a.$implicit,o=e.MAs(4),s=e.oxw(5);e.Q6J("routerLink",e.WLB(5,ze,s.base_route,t.id)),e.xp6(2),e.Q6J("ngIf",null==t.images?null:t.images.length)("ngIfElse",o),e.xp6(5),e.hij(" ",t.name," "),e.xp6(),e.Q6J("ngIf",t.asset_count||(null==t.assets?null:t.assets.length))}}function Co(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",13),e.YNc(2,wo,9,8,"a",14),e.ALo(3,"async"),e.qZA(),e.BQk()),2&n){const t=e.oxw(2).$implicit,o=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",e.lcZ(3,1,o.products)[t.id])}}function qo(n,a){if(1&n&&e._UZ(0,"img",22),2&n){const t=e.oxw().$implicit;e.Q6J("source",t.images[0])}}function Mo(n,a){1&n&&e._UZ(0,"img",30)}function ko(n,a){if(1&n&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(),e.hij(" Assets: ",t.asset_count||(null==t.assets?null:t.assets.length)||0," ")}}function Io(n,a){if(1&n&&(e.TgZ(0,"a",27)(1,"div",28),e.YNc(2,qo,1,1,"img",17)(3,Mo,1,0,"ng-template",null,18,e.W1O),e.qZA(),e.TgZ(5,"div",29)(6,"div",20),e._uU(7),e.qZA(),e.YNc(8,ko,2,1,"div",21),e.qZA()()),2&n){const t=a.$implicit,o=e.MAs(4),s=e.oxw(5);e.Q6J("routerLink",e.WLB(5,ze,s.base_route,t.id)),e.xp6(2),e.Q6J("ngIf",null==t.images?null:t.images.length)("ngIfElse",o),e.xp6(5),e.hij(" ",t.name," "),e.xp6(),e.Q6J("ngIf",t.asset_count||(null==t.assets?null:t.assets.length))}}function Uo(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",25),e.YNc(2,Io,9,8,"a",26),e.ALo(3,"async"),e.qZA(),e.BQk()),2&n){const t=e.oxw(2).$implicit,o=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",e.lcZ(3,1,o.products)[t.id])}}function Lo(n,a){if(1&n&&(e.TgZ(0,"div",6)(1,"h2",7)(2,"span",8),e._uU(3),e.qZA(),e.TgZ(4,"span",9),e._uU(5),e.ALo(6,"async"),e.ALo(7,"async"),e.qZA()(),e.ynx(8,10),e.ALo(9,"async"),e.YNc(10,Co,4,3,"ng-container",11)(11,Uo,4,3,"ng-container",12),e.BQk(),e.qZA()),2&n){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(3),e.Oqu(null==t?null:t.name),e.xp6(2),e.AsE(" (",null==e.lcZ(6,5,o.products)[t.id]?null:e.lcZ(6,5,o.products)[t.id].length," item",1===(null==e.lcZ(7,7,o.products)[t.id]?null:e.lcZ(7,7,o.products)[t.id].length)?"":"s",") "),e.xp6(3),e.Q6J("ngSwitch",e.lcZ(9,9,o.options).view),e.xp6(2),e.Q6J("ngSwitchCase","list")}}function Oo(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Lo,12,11,"div",5),e.ALo(2,"async"),e.BQk()),2&n){const t=a.$implicit,o=e.oxw(2);e.xp6(),e.Q6J("ngIf",null==e.lcZ(2,1,o.products)[t.id]?null:e.lcZ(2,1,o.products)[t.id].length)}}function So(n,a){if(1&n&&(e.TgZ(0,"div",3),e.YNc(1,Oo,3,3,"ng-container",4),e.ALo(2,"async"),e.qZA()),2&n){const t=e.oxw();e.xp6(),e.Q6J("ngForOf",e.lcZ(2,1,t.categories))}}function No(n,a){1&n&&e._UZ(0,"mat-progress-bar",31)}const Do=n=>[n,"manage","group"];function Fo(n,a){if(1&n&&(e.TgZ(0,"a",35),e._uU(1," Create New Product "),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("routerLink",e.VKq(1,Do,t.base_route))}}function Jo(n,a){if(1&n&&(e.TgZ(0,"div",32)(1,"p",33),e._uU(2),e.ALo(3,"async"),e.qZA(),e.YNc(4,Fo,2,3,"a",34),e.ALo(5,"async"),e.qZA()),2&n){const t=e.oxw();let o,s;e.xp6(2),e.hij(" ",null!=(o=e.lcZ(3,2,t.options))&&o.search?"No matching assets found":"No assets available. Create a new asset with the button below"," "),e.xp6(2),e.Q6J("ngIf",!(null!=(s=e.lcZ(5,4,t.options))&&s.search))}}let Ge=(()=>{class n{get base_route(){return this._state.base_route}constructor(t){this._state=t,this.loading=this._state.loading,this.options=this._state.options,this.categories=this._state.categories,this.products=this._state.product_mapping}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(y))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-asset-item-list"]],decls:7,vars:9,consts:[["class","overflow-auto pb-2 w-full h-full",4,"ngIf","ngIfElse"],["mode","indeterminate",4,"ngIf"],["empty_state",""],[1,"overflow-auto","pb-2","w-full","h-full"],[4,"ngFor","ngForOf"],["class","",4,"ngIf"],[1,""],[1,"py-2"],[1,"font-medium"],[1,"text-xs"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"rounded","overflow-hidden","bg-base-100","border","border-base-200","divide-y","divide-base-200"],["matRipple","","class","flex items-center text-left space-x-4 p-4 border border-base-200 hover:border-indigo-400 rounded",3,"routerLink",4,"ngFor","ngForOf"],["matRipple","",1,"flex","items-center","text-left","space-x-4","p-4","border","border-base-200","hover:border-indigo-400","rounded",3,"routerLink"],[1,"h-12","w-12","flex","items-center","justify-center","border","border-base-200","bg-base-200","overflow-hidden"],["auth","","class","min-w-full min-h-full object-cover",3,"source",4,"ngIf","ngIfElse"],["placeholder",""],[1,"flex-1","flex","flex-col","justify-center"],[1,"truncate"],["class","text-xs opacity-60",4,"ngIf"],["auth","",1,"min-w-full","min-h-full","object-cover",3,"source"],["src","assets/icons/asset-placeholder.svg",1,"m-auto"],[1,"text-xs","opacity-60"],[1,"flex","items-center","overflow-hidden","flex-wrap","-mx-2","w-full"],["matRipple","","class","bg-base-100 rounded shadow w-40 h-44 text-left m-2 border border-base-200 hover:border-indigo-400 flex flex-col",3,"routerLink",4,"ngFor","ngForOf"],["matRipple","",1,"bg-base-100","rounded","shadow","w-40","h-44","text-left","m-2","border","border-base-200","hover:border-indigo-400","flex","flex-col",3,"routerLink"],[1,"w-full","h-32","flex","items-center","justify-center","bg-base-200","overflow-hidden"],[1,"border-t","border-base-200","w-full","px-3","py-1","flex-1","flex","flex-col","justify-center"],["src","assets/icons/asset-placeholder.svg",1,"m-auto","w-16"],["mode","indeterminate"],[1,"flex","flex-col","items-center","justify-center","p-8","space-y-4","h-full","w-full"],[1,"opacity-40"],["btn","","matRipple","",3,"routerLink",4,"ngIf"],["btn","","matRipple","",3,"routerLink"]],template:function(o,s){if(1&o&&(e.YNc(0,So,3,3,"div",0),e.ALo(1,"async"),e.ALo(2,"async"),e.YNc(3,No,1,0,"mat-progress-bar",1),e.ALo(4,"async"),e.YNc(5,Jo,6,6,"ng-template",null,2,e.W1O)),2&o){const i=e.MAs(6);let r;e.Q6J("ngIf",(null==(r=e.lcZ(1,3,s.categories))?null:r.length)&&(null==(r=e.lcZ(2,5,s.products))?null:r._count))("ngIfElse",i),e.xp6(3),e.Q6J("ngIf",e.lcZ(4,7,s.loading))}},dependencies:[p.sg,p.O5,p.RF,p.n9,p.ED,ue.pW,x.wG,Zo.A,f.rH,p.Ov],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}\n\n/*# sourceMappingURL=asset-item-list.component.ts-angular-inline--119.css.map*/"]})}return n})();var Po=l(66577),Ro=l(46362);function Eo(n,a){if(1&n&&(e.TgZ(0,"h3",30),e._uU(1),e.ALo(2,"async"),e.qZA()),2&n){const t=e.oxw(2);let o;e.xp6(),e.hij(" Associated Assets (",(null==(o=e.lcZ(2,1,t.asset_list))?null:o.length)||"0",") ")}}const Qo=()=>[],Yo=()=>["name","identifier","serial_number","actions"],jo=()=>["Name","Label/Friendly Name","Serial Number"," "],zo=()=>["10r","11r","8r","flex"],Go=n=>({actions:n});function Ho(n,a){if(1&n&&(e._UZ(0,"custom-table",31),e.ALo(1,"async")),2&n){const t=e.oxw(2);e.Q6J("dataSource",e.lcZ(1,5,t.asset_list)||e.DdM(7,Qo))("columns",e.DdM(8,Yo))("display_column",e.DdM(9,jo))("column_size",e.DdM(10,zo))("template",e.VKq(11,Go,t.action_template))}}const Bo=(n,a)=>[n,"view",a],Vo=n=>[n,"list","purchase-orders"];function Ko(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"header",4)(2,"h2",5),e._uU(3),e.qZA()(),e.TgZ(4,"main",6)(5,"div",7)(6,"label",8),e._uU(7," Order Number"),e.TgZ(8,"span"),e._uU(9,"*"),e.qZA()(),e.TgZ(10,"mat-form-field",9),e._UZ(11,"input",10),e.TgZ(12,"mat-error"),e._uU(13,"Order number is required"),e.qZA()()(),e.TgZ(14,"div",7)(15,"label",11),e._uU(16," Invoice Number "),e.qZA(),e.TgZ(17,"mat-form-field",9),e._UZ(18,"input",12),e.TgZ(19,"mat-error"),e._uU(20,"Invoice number is required"),e.qZA()()(),e.TgZ(21,"div",13)(22,"div",14)(23,"label",15),e._uU(24," Purchase Date "),e.qZA(),e._UZ(25,"a-date-field",16),e.qZA(),e.TgZ(26,"div",14)(27,"label",17),e._uU(28," Purchase Price "),e.qZA(),e.TgZ(29,"mat-form-field",18)(30,"div",19),e._uU(31,"$"),e.qZA(),e._UZ(32,"input",20),e.qZA()()(),e.TgZ(33,"div",13)(34,"div",7)(35,"label",21),e._uU(36," Expected Service Start Date "),e.qZA(),e._UZ(37,"a-date-field",22),e.qZA(),e.TgZ(38,"div",7)(39,"label",23),e._uU(40," Expected Service End Date "),e.qZA(),e._UZ(41,"a-date-field",24),e.qZA()(),e.YNc(42,Eo,3,3,"h3",25)(43,Ho,2,13,"custom-table",26),e.qZA(),e.TgZ(44,"footer",27)(45,"a",28),e._uU(46," Cancel "),e.qZA(),e.TgZ(47,"button",29),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.save())}),e._uU(48," Save "),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(3),e.hij(" ",t.form.value.id?"Edit":"Add"," Purchase Order "),e.xp6(),e.Q6J("formGroup",t.form),e.xp6(21),e.Q6J("from",t.from),e.xp6(7),e.Q6J("from",t.from),e.xp6(5),e.Q6J("from",t.from),e.xp6(5),e.Q6J("ngIf",null==t.item?null:t.item.id),e.xp6(),e.Q6J("ngIf",null==t.item?null:t.item.id),e.xp6(2),e.Q6J("routerLink",t.product_id?e.WLB(8,Bo,t.base_route,t.product_id):e.VKq(11,Vo,t.base_route))}}function $o(n,a){if(1&n&&(e.TgZ(0,"div",32),e._UZ(1,"mat-spinner",33),e.TgZ(2,"p"),e._uU(3),e.qZA()()),2&n){const t=e.oxw();e.xp6(),e.Q6J("diameter",32),e.xp6(2),e.Oqu(t.loading)}}let He=(()=>{class n extends u.cx{get base_route(){return this._state.base_route}constructor(t,o,s,i){var r;super(),r=this,this._state=t,this._route=o,this._router=s,this._org=i,this.form=(0,m.dY)(),this.loading="",this._id=new O.X(""),this.from=(0,Po.Z)(Date.now(),-5),this.asset_list=(0,w.aj)([this._id,this._org.active_building]).pipe((0,re.h)(([c,d])=>!!c&&!!d),(0,M.w)(([c])=>(0,m.Q6)({order_id:c})),(0,M.w)(function(){var c=(0,_.Z)(function*(d){const v=yield(0,m.iF)({zone_id:r._org.building.id,limit:500}).toPromise();return d.map(b=>({...b,name:v.find(T=>T.id===b.asset_type_id)?.name||b.id}))});return function(d){return c.apply(this,arguments)}}()),(0,S.d)(1))}ngOnInit(){var t=this;this.subscription("route.query",this._route.queryParamMap.subscribe(function(){var o=(0,_.Z)(function*(s){if(s.get("id")){t.loading="Loading purchase order details...";const i=yield(0,m.l5)(s.get("id")).toPromise().catch(()=>null);i||((0,u.cB)("Unable to load purchase order details."),t._router.navigate([t.base_route])),t.form.patchValue({...i,order_number:i.purchase_order_number,purchase_date:1e3*i.purchase_date,expected_service_end_date:1e3*i.expected_service_end_date,expected_service_start_date:1e3*i.expected_service_start_date}),t.item=i,t._id.next(i.id),t.loading=""}s.get("group_id")&&(t.product_id=s.get("group_id"))});return function(s){return o.apply(this,arguments)}}())),this._state.setOptions({active_item:null})}save(){var t=this;return(0,_.Z)(function*(){if(!t.form.valid)return;t.loading="Saving Product...";const o=t.form.value;o.purchase_date=(0,E.Z)(o.purchase_date)||null,o.expected_service_start_date=(0,E.Z)(o.expected_service_start_date)||t.item?.expected_service_start_date||null,o.expected_service_end_date=(0,E.Z)(o.expected_service_end_date)||t.item?.expected_service_end_date||null,yield(0,m.aS)(o).toPromise().catch(i=>{throw t.loading="",(0,u.cB)(`Error saving purchase order.: ${i.message}`),i}),t.form.reset(),(0,u.t5)("Successfully saved purchase order."),t._state.postChange(),t._router.navigate(t.product_id?[t.base_route,"view",t.product_id]:[t.base_route,"list","purchase-orders"]),t.loading=""})()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(y),e.Y36(f.gz),e.Y36(f.F0),e.Y36(U.w7))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["asset-purchase-order-form"]],features:[e.qOj],decls:4,vars:2,consts:[[1,"absolute","inset-0","bg-base-100"],["class","h-full max-w-[32rem] mx-auto flex flex-col",4,"ngIf","ngIfElse"],["load_state",""],[1,"h-full","max-w-[32rem]","mx-auto","flex","flex-col"],[1,"p-4"],[1,"text-center","text-xl","font-medium"],[1,"flex-1","h-1/2","overflow-auto",3,"formGroup"],[1,"flex","flex-col","space-y-2"],["for","order-number"],["appearance","outline"],["matInput","","name","order-number","placeholder","Order Number","formControlName","order_number"],["for","invoice-number"],["matInput","","name","invoice-number","placeholder","Invoice Number","formControlName","invoice_number"],[1,"flex","space-x-2"],[1,"flex-1","flex","flex-col","space-y-2"],["for","purchase-date"],["name","purchase-date","formControlName","purchase_date",3,"from"],["for","unit-price"],["appearance","outline",1,"w-full"],["matPrefix",""],["matInput","","name","unit-price","formControlName","unit_price",3,"from"],["for","depreciation-start-date"],["name","depreciation-start-date","formControlName","expected_service_start_date",3,"from"],["for","depreciation-end-date"],["name","depreciation-end-date","formControlName","expected_service_end_date"],["class","font-medium mb-2",4,"ngIf"],["asset-view","","class","w-full block text-sm","empty","No assets for this purchase order",3,"dataSource","columns","display_column","column_size","template",4,"ngIf"],[1,"flex","justify-end","space-x-2","p-2","border-t","border-base-200"],["btn","","matRipple","",1,"w-32","inverse",3,"routerLink"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"font-medium","mb-2"],["asset-view","","empty","No assets for this purchase order",1,"w-full","block","text-sm",3,"dataSource","columns","display_column","column_size","template"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]],template:function(o,s){if(1&o&&(e.TgZ(0,"div",0),e.YNc(1,Ko,49,13,"div",1),e.qZA(),e.YNc(2,$o,4,2,"ng-template",null,2,e.W1O)),2&o){const i=e.MAs(3);e.xp6(),e.Q6J("ngIf",!s.loading)("ngIfElse",i)}},dependencies:[p.O5,A.KE,A.TO,A.qo,N.Nt,J.Ou,x.wG,g.Fj,g.JJ,g.JL,g.sg,g.u,Ro.Q,z.C,f.rH,p.Ov]})}return n})();function Wo(n,a){if(1&n&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(),e.hij(" ",t.purchase_order_number||t.invoice_number," ")}}function Xo(n,a){1&n&&(e.TgZ(0,"mat-option",25),e._uU(1," No purchase orders "),e.qZA()),2&n&&e.Q6J("disabled",!0)}const es=()=>({standalone:!0}),ts=(n,a)=>[n,"view",a],ns=n=>[n];function os(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"header",4)(2,"h2",5),e._uU(3),e.qZA()(),e.TgZ(4,"main",6)(5,"div",7)(6,"label",8),e._uU(7,"Product"),e.qZA(),e.TgZ(8,"mat-form-field",9),e._UZ(9,"input",10),e.qZA()(),e.TgZ(10,"div",11)(11,"div",7)(12,"label",12),e._uU(13," Serial Number "),e.qZA(),e.TgZ(14,"mat-form-field",9),e._UZ(15,"input",13),e.TgZ(16,"mat-error"),e._uU(17,"Serial Number is required"),e.qZA()()(),e.TgZ(18,"div",7)(19,"label",14),e._uU(20,"Label/Friendly Name"),e.qZA(),e.TgZ(21,"mat-form-field",9),e._UZ(22,"input",15),e.TgZ(23,"mat-error"),e._uU(24," Label/Friendly Name is required "),e.qZA()()()(),e.TgZ(25,"div",7)(26,"label",16),e._uU(27," Purchase Order ID "),e.qZA(),e.TgZ(28,"mat-form-field",9)(29,"mat-select",17),e.YNc(30,Wo,2,2,"mat-option",18),e.ALo(31,"async"),e.YNc(32,Xo,2,1,"mat-option",19),e.ALo(33,"async"),e.qZA(),e.TgZ(34,"mat-error"),e._uU(35," Purchase Order ID is required "),e.qZA()()(),e.TgZ(36,"div",7)(37,"label",12),e._uU(38,"Barcode"),e.qZA(),e.TgZ(39,"mat-form-field",9),e._UZ(40,"input",20),e.TgZ(41,"mat-error"),e._uU(42,"Barcode is required"),e.qZA()()()(),e.TgZ(43,"footer",21)(44,"a",22),e._uU(45," Cancel "),e.qZA(),e.TgZ(46,"button",23),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.save())}),e._uU(47," Save "),e.qZA()()()}if(2&n){const t=e.oxw();let o;e.xp6(3),e.hij(" ",t.form.value.id?"Edit":"Add"," Asset "),e.xp6(),e.Q6J("formGroup",t.form),e.xp6(5),e.Q6J("ngModel",(null==t.product?null:t.product.name)||"No Product")("ngModelOptions",e.DdM(12,es))("disabled",!0),e.xp6(21),e.Q6J("ngForOf",e.lcZ(31,8,t.purchase_orders)),e.xp6(2),e.Q6J("ngIf",!(null!=(o=e.lcZ(33,10,t.purchase_orders))&&o.length)),e.xp6(12),e.Q6J("routerLink",t.product?e.WLB(13,ts,t.base_route,t.product.id):e.VKq(16,ns,t.base_route))}}function ss(n,a){if(1&n&&(e.TgZ(0,"div",26),e._UZ(1,"mat-spinner",27),e.TgZ(2,"p"),e._uU(3),e.qZA()()),2&n){const t=e.oxw();e.xp6(),e.Q6J("diameter",32),e.xp6(2),e.Oqu(t.loading)}}let Be=(()=>{class n extends u.cx{get base_route(){return this._state.base_route}constructor(t,o,s,i){super(),this._state=t,this._route=o,this._router=s,this._org=i,this.form=(0,m.PG)(),this.purchase_orders=this._state.purchase_orders,this.loading=""}ngOnInit(){var t=this;this.subscription("route.query",this._route.queryParamMap.subscribe(function(){var o=(0,_.Z)(function*(s){if(s.get("id")){t.loading="Loading Asset Details...";const i=yield(0,m.dq)(s.get("id")).toPromise().catch(()=>null);i||((0,u.cB)("Unable to load asset details."),t._router.navigate([t.base_route])),t.form.patchValue(i),t.loading=""}if(s.get("group_id")){t.loading="Loading Product Details...";const i=yield(0,m.L)(s.get("group_id")).toPromise().catch(()=>null);i||((0,u.cB)("Unable to load associated product details."),t._router.navigate([t.base_route])),t.product=i,t.form.patchValue({type_id:i.id}),t.loading=""}});return function(s){return o.apply(this,arguments)}}())),this._state.setOptions({active_item:null})}save(){var t=this;return(0,_.Z)(function*(){if(!t.form.valid)return(0,u.cB)(`Some fields are invalid. [${(0,u.RD)(t.form)}]`);t.loading="Saving Product...";const o=t.form.value,s=yield(0,m.U)({...o,zone_id:t._org.building.id}).toPromise().catch(i=>{throw t.loading="",(0,u.cB)(`Error saving asset: ${i.message}`),i});t.form.reset(),t._state.postChange(),t._state.setExtraAssets([s].map(i=>({...i,type_id:t.product.id}))),(0,u.t5)("Asset saved successfully."),t._router.navigate([t.base_route,"view",t.product?.id]),t.loading=""})()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(y),e.Y36(f.gz),e.Y36(f.F0),e.Y36(U.w7))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["asset-form"]],features:[e.qOj],decls:4,vars:2,consts:[[1,"absolute","inset-0","bg-base-100"],["class","h-full max-w-[32rem] mx-auto flex flex-col",4,"ngIf","ngIfElse"],["load_state",""],[1,"h-full","max-w-[32rem]","mx-auto","flex","flex-col"],[1,"p-4"],[1,"text-center","text-xl","font-medium"],[1,"flex-1","h-1/2","overflow-auto",3,"formGroup"],[1,"flex","flex-1","flex-col","space-y-2"],["for","name"],["appearance","outline"],["matInput","",3,"ngModel","ngModelOptions","disabled"],[1,"flex","items-center","space-x-2"],["for","serial-number"],["matInput","","name","serial-number","placeholder","Serial Number","formControlName","serial_number"],["for","identifier"],["matInput","","name","identifier","placeholder","Identifier, Asset ID or Barcode","formControlName","identifier"],["for","purchase-order-id"],["formControlName","purchase_order_id","placeholder","Select Purchase Order"],[3,"value",4,"ngFor","ngForOf"],["class","opacity-60",3,"disabled",4,"ngIf"],["matInput","","name","barcode","placeholder","Barcode","formControlName","barcode"],[1,"flex","justify-end","space-x-2","p-2","border-t","border-base-200"],["btn","","matRipple","",1,"w-32","inverse",3,"routerLink"],["btn","","matRipple","",1,"w-32",3,"click"],[3,"value"],[1,"opacity-60",3,"disabled"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]],template:function(o,s){if(1&o&&(e.TgZ(0,"div",0),e.YNc(1,os,48,18,"div",1),e.qZA(),e.YNc(2,ss,4,2,"ng-template",null,2,e.W1O)),2&o){const i=e.MAs(3);e.xp6(),e.Q6J("ngIf",!s.loading)("ngIfElse",i)}},dependencies:[p.sg,p.O5,A.KE,A.TO,N.Nt,K.gD,x.ey,J.Ou,x.wG,g.Fj,g.JJ,g.JL,g.On,g.sg,g.u,f.rH,p.Ov]})}return n})();var is=l(64035);function as(n,a){if(1&n&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(),e.hij(" ",t.name," ")}}const rs=(n,a)=>[n,"view",a],ls=n=>[n,"list","items"];function cs(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"header",4)(2,"h2",5),e._uU(3),e.qZA()(),e.TgZ(4,"main",6)(5,"div",7)(6,"label",8),e._uU(7,"Name"),e.TgZ(8,"span"),e._uU(9,"*"),e.qZA()(),e.TgZ(10,"mat-form-field",9),e._UZ(11,"input",10),e.TgZ(12,"mat-error"),e._uU(13,"Name is required"),e.qZA()()(),e.TgZ(14,"div",7)(15,"label",8),e._uU(16,"Category"),e.TgZ(17,"span"),e._uU(18,"*"),e.qZA()(),e.TgZ(19,"mat-form-field",9)(20,"mat-select",11),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.current_category=s.form.value.category_id)}),e.YNc(21,as,2,2,"mat-option",12),e.ALo(22,"async"),e.TgZ(23,"mat-option",13),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.newCategory())}),e.TgZ(24,"div",14)(25,"app-icon"),e._uU(26,"add"),e.qZA(),e.TgZ(27,"p"),e._uU(28,"New Category"),e.qZA()()()(),e.TgZ(29,"mat-error"),e._uU(30,"Category is required"),e.qZA()()(),e.TgZ(31,"div",7)(32,"label",15),e._uU(33,"Brand"),e.TgZ(34,"span"),e._uU(35,"*"),e.qZA()(),e.TgZ(36,"mat-form-field",9),e._UZ(37,"input",16),e.TgZ(38,"mat-error"),e._uU(39,"Brand is required"),e.qZA()()(),e.TgZ(40,"div",7)(41,"label",17),e._uU(42,"Description"),e.qZA(),e.TgZ(43,"mat-form-field",9),e._UZ(44,"textarea",18),e.TgZ(45,"mat-error"),e._uU(46,"Description is required"),e.qZA()()(),e.TgZ(47,"div",7)(48,"label",19),e._uU(49,"Images"),e.qZA(),e._UZ(50,"image-list-field",20),e.qZA()(),e.TgZ(51,"footer",21)(52,"a",22),e._uU(53," Cancel "),e.qZA(),e.TgZ(54,"button",23),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.save())}),e._uU(55," Save "),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(3),e.hij(" ",t.form.value.id?"Edit":"Add"," Product "),e.xp6(),e.Q6J("formGroup",t.form),e.xp6(17),e.Q6J("ngForOf",e.lcZ(22,4,t.categories)),e.xp6(31),e.Q6J("routerLink",t.form.value.id?e.WLB(6,rs,t.base_route,t.form.value.id):e.VKq(9,ls,t.base_route))}}function ps(n,a){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"mat-spinner",26),e.TgZ(2,"p"),e._uU(3),e.qZA()()),2&n){const t=e.oxw();e.xp6(),e.Q6J("diameter",32),e.xp6(2),e.Oqu(t.loading)}}let Ve=(()=>{class n extends u.cx{get base_route(){return this._state.base_route}constructor(t,o,s,i){super(),this._state=t,this._route=o,this._router=s,this._dialog=i,this.form=(0,m.UN)(),this.new_category=new O.X(null),this.categories=(0,w.aj)([this._state.categories,this.new_category]).pipe((0,Z.U)(([r,c])=>c?(0,u.Tw)([...r,c],"id"):r)),this.loading=""}ngOnInit(){var t=this;this.subscription("route.query",this._route.queryParamMap.subscribe(function(){var o=(0,_.Z)(function*(s){if(s.get("id")){t.loading="Loading Product Details...";const i=yield(0,m.L)(s.get("id")).toPromise().catch(()=>null);i||((0,u.cB)("Unable to load product details."),t._router.navigate([t.base_route])),t.form.patchValue(i),t.loading=""}});return function(s){return o.apply(this,arguments)}}()))}newCategory(){var t=this;return(0,_.Z)(function*(){t.form.patchValue({category_id:t.current_category});const o=yield t._state.editCategory();o&&(t.new_category.next(o),t.form.patchValue({category_id:o.id}))})()}save(){var t=this;return(0,_.Z)(function*(){if(!t.form.valid)return;t.loading="Saving Product...";const o=t.form.value,s=yield(0,m.E$)(o).toPromise().catch(i=>{throw t.loading="",(0,u.cB)(`Error saving Product: ${i.message}`),i});t.form.reset(),t.loading="",t._state.postChange(),t._router.navigate([t.base_route,"view",s.id])})()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(y),e.Y36(f.gz),e.Y36(f.F0),e.Y36(q.uw))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["asset-group-form"]],features:[e.qOj],decls:4,vars:2,consts:[[1,"absolute","inset-0","bg-base-100"],["class","h-full max-w-[32rem] mx-auto flex flex-col",4,"ngIf","ngIfElse"],["load_state",""],[1,"h-full","max-w-[32rem]","mx-auto","flex","flex-col"],[1,"p-4"],[1,"text-center","text-xl","font-medium"],[1,"flex-1","h-1/2","overflow-auto","p-2",3,"formGroup"],[1,"flex","flex-col","space-y-2"],["for","name"],["appearance","outline"],["matInput","","name","name","placeholder","Name of the product","formControlName","name"],["formControlName","category_id","placeholder","Category of Product",3,"click"],[3,"value",4,"ngFor","ngForOf"],[1,"relative",3,"click"],[1,"flex","items-center","space-x-2"],["for","brand"],["matInput","","name","brand","placeholder","Brand of the product","formControlName","brand"],["for","description"],["matInput","","name","description","placeholder","Description of the product","formControlName","description"],["for","images"],["name","images","formControlName","images"],[1,"flex","justify-end","space-x-2","p-2","border-t","border-base-200"],["btn","","matRipple","",1,"w-32","inverse",3,"routerLink"],["btn","","matRipple","",1,"w-32",3,"click"],[3,"value"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]],template:function(o,s){if(1&o&&(e.TgZ(0,"div",0),e.YNc(1,cs,56,11,"div",1),e.qZA(),e.YNc(2,ps,4,2,"ng-template",null,2,e.W1O)),2&o){const i=e.MAs(3);e.xp6(),e.Q6J("ngIf",!s.loading)("ngIfElse",i)}},dependencies:[p.sg,p.O5,A.KE,A.TO,N.Nt,K.gD,x.ey,J.Ou,x.wG,g.Fj,g.JJ,g.JL,g.sg,g.u,is.h,L.o,f.rH,p.Ov]})}return n})();function ds(n,a){1&n&&(e.TgZ(0,"span",5),e._uU(1,"No Date set"),e.qZA())}function us(n,a){if(1&n&&(e.YNc(0,ds,2,0,"span",4),e._uU(1),e.ALo(2,"date")),2&n){const t=a.data;e.Q6J("ngIf",!t),e.xp6(),e.hij(" ",t?e.xi3(2,2,1e3*t,"mediumDate"):""," ")}}const _s=()=>["purchase_order_number","invoice_number","purchase_date","expected_service_start_date","expected_service_end_date"],ms=()=>["Order Number","Invoice Number","Purchase Date","Depreciation Start","Depreciation End"],gs=()=>["flex","10r","10r","10r","10r"],fs=(n,a,t)=>({purchase_date:n,expected_service_start_date:a,expected_service_end_date:t});let Ke=(()=>{class n{constructor(t,o){this._state=t,this._router=o,this.now=Date.now(),this.purchase_orders=(0,w.aj)([this._state.options,this._state.purchase_orders]).pipe((0,Z.U)(([{search:s},i])=>i.filter(r=>!s||r.purchase_order_number.toLowerCase().includes(s.toLowerCase())||r.invoice_number?.toLowerCase().includes(s.toLowerCase())))),this.filters=this._state.options}editOrder(t){this._router.navigate([this._state.base_route,"manage","purchase-order"],{queryParams:{id:t.id}})}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(y),e.Y36(f.F0))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-asset-purchase-order-list"]],decls:6,vars:15,consts:[[1,"relative","-left-4","w-[calc(100%+2rem)]","mt-4","h-[calc(100%-1rem)]","flex","flex-col"],[1,"w-full","overflow-auto","h-1/2","flex-1","p-4"],["purchase-orders","",1,"block","min-w-[52rem]","text-sm",3,"dataSource","columns","display_column","column_size","template","empty","row_clicked"],["date_template",""],["class","opacity-30",4,"ngIf"],[1,"opacity-30"]],template:function(o,s){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"custom-table",2),e.NdJ("row_clicked",function(r){return s.editOrder(r)}),e.ALo(3,"async"),e.qZA()()(),e.YNc(4,us,3,5,"ng-template",null,3,e.W1O)),2&o){const i=e.MAs(5);let r;e.xp6(2),e.Q6J("dataSource",s.purchase_orders)("columns",e.DdM(8,_s))("display_column",e.DdM(9,ms))("column_size",e.DdM(10,gs))("template",e.kEZ(11,fs,i,i,i))("empty",null!=(r=e.lcZ(3,6,s.filters))&&r.search?"No matching purchase orders found.":"There are purchase orders for this building.")}},dependencies:[p.O5,z.C,p.Ov,p.uU],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%}\n\n/*# sourceMappingURL=asset-purchase-order-list.component.ts-angular-inline--120.css.map*/"]})}return n})();function hs(n,a){if(1&n&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(),e.hij(" ",t.purchase_order_number||t.invoice_number," ")}}function xs(n,a){1&n&&(e.TgZ(0,"mat-option",24),e._uU(1," No purchase orders "),e.qZA()),2&n&&e.Q6J("disabled",!0)}const $e=()=>({standalone:!0}),vs=(n,a)=>[n,"view",a],bs=n=>[n];function Zs(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"header",4)(2,"h2",5),e._uU(3),e.qZA()(),e.TgZ(4,"main",6)(5,"div",7)(6,"label",8),e._uU(7,"Product"),e.qZA(),e.TgZ(8,"mat-form-field",9),e._UZ(9,"input",10),e.qZA()(),e.TgZ(10,"div",11)(11,"div",7)(12,"label",12),e._uU(13," Number of Assets to create "),e.qZA(),e.TgZ(14,"mat-form-field",9)(15,"input",13),e.NdJ("ngModelChange",function(s){e.CHM(t);const i=e.oxw();return e.KtG(i.count=s)}),e.qZA()()()(),e.TgZ(16,"div",7)(17,"label",14),e._uU(18,"Label/Friendly Name"),e.qZA(),e.TgZ(19,"mat-form-field",9),e._UZ(20,"input",15),e.TgZ(21,"mat-error"),e._uU(22," Label/Friendly Name is required "),e.qZA()()(),e.TgZ(23,"div",7)(24,"label",16),e._uU(25," Purchase Order ID "),e.qZA(),e.TgZ(26,"mat-form-field",9)(27,"mat-select",17),e.YNc(28,hs,2,2,"mat-option",18),e.ALo(29,"async"),e.YNc(30,xs,2,1,"mat-option",19),e.ALo(31,"async"),e.qZA(),e.TgZ(32,"mat-error"),e._uU(33," Purchase Order ID is required "),e.qZA()()()(),e.TgZ(34,"footer",20)(35,"a",21),e._uU(36," Cancel "),e.qZA(),e.TgZ(37,"button",22),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.save())}),e._uU(38," Save "),e.qZA()()()}if(2&n){const t=e.oxw();let o;e.xp6(3),e.hij(" Bulk ",t.form.value.id?"Edit":"Add"," Asset "),e.xp6(),e.Q6J("formGroup",t.form),e.xp6(5),e.Q6J("ngModel",(null==t.product?null:t.product.name)||"No Product")("ngModelOptions",e.DdM(14,$e))("disabled",!0),e.xp6(6),e.Q6J("ngModel",t.count)("ngModelOptions",e.DdM(15,$e)),e.xp6(13),e.Q6J("ngForOf",e.lcZ(29,10,t.purchase_orders)),e.xp6(2),e.Q6J("ngIf",!(null!=(o=e.lcZ(31,12,t.purchase_orders))&&o.length)),e.xp6(5),e.Q6J("routerLink",t.product?e.WLB(16,vs,t.base_route,t.product.id):e.VKq(19,bs,t.base_route))}}function As(n,a){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"mat-spinner",26),e.TgZ(2,"p"),e._uU(3),e.qZA()()),2&n){const t=e.oxw();e.xp6(),e.Q6J("diameter",32),e.xp6(2),e.Oqu(t.loading)}}let We=(()=>{class n extends u.cx{get base_route(){return this._state.base_route}constructor(t,o,s,i){super(),this._state=t,this._route=o,this._router=s,this._org=i,this.form=(0,m.PG)(),this.purchase_orders=this._state.purchase_orders,this.count=2,this.loading=""}ngOnInit(){var t=this;this.subscription("route.query",this._route.queryParamMap.subscribe(function(){var o=(0,_.Z)(function*(s){if(s.get("id")){t.loading="Loading Asset Details...";const i=yield(0,m.dq)(s.get("id")).toPromise().catch(()=>null);i||((0,u.cB)("Unable to load asset details."),t._router.navigate([t.base_route])),t.form.patchValue(i),t.loading=""}if(s.get("group_id")){t.loading="Loading Product Details...";const i=yield(0,m.L)(s.get("group_id")).toPromise().catch(()=>null);i||((0,u.cB)("Unable to load associated product details."),t._router.navigate([t.base_route])),t.product=i,t.form.patchValue({type_id:i.id}),t.loading=""}});return function(s){return o.apply(this,arguments)}}())),this._state.setOptions({active_item:null}),this.count=2}save(){var t=this;return(0,_.Z)(function*(){if(!t.count&&t.count<1)return(0,u.cB)("Please enter a valid number of assets to add.");if(!t.form.valid)return(0,u.cB)(`Some fields are invalid. [${(0,u.RD)(t.form)}]`);t.loading="Saving Product...";const o=t.form.value,s=yield(0,m.NI)(new Array(t.count).fill({...o,zone_id:t._org.building.id})).toPromise().catch(i=>{throw t.loading="",(0,u.cB)(`Error saving asset: ${i.message}`),i});t._state.setExtraAssets(s.map(i=>({...i,type_id:t.product.id}))),t.form.reset(),t._state.postChange(),(0,u.t5)(`Asset added ${s.length} successfully.`),t._router.navigate([t.base_route,"view",t.product?.id]),t.loading=""})()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(y),e.Y36(f.gz),e.Y36(f.F0),e.Y36(U.w7))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["asset-bulk-form"]],features:[e.qOj],decls:4,vars:2,consts:[[1,"absolute","inset-0","bg-base-100"],["class","h-full max-w-[32rem] mx-auto flex flex-col",4,"ngIf","ngIfElse"],["load_state",""],[1,"h-full","max-w-[32rem]","mx-auto","flex","flex-col"],[1,"p-4"],[1,"text-center","text-xl","font-medium"],[1,"flex-1","h-1/2","overflow-auto",3,"formGroup"],[1,"flex","flex-1","flex-col","space-y-2"],["for","name"],["appearance","outline"],["matInput","",3,"ngModel","ngModelOptions","disabled"],[1,"flex","items-center","space-x-2"],["for","count"],["matInput","","name","count","type","number","placeholder","Number of assets to add",3,"ngModel","ngModelOptions","ngModelChange"],["for","identifier"],["matInput","","name","identifier","placeholder","Identifier, Asset ID or Barcode","formControlName","identifier"],["for","purchase-order-id"],["formControlName","purchase_order_id","placeholder","Select Purchase Order"],[3,"value",4,"ngFor","ngForOf"],["class","opacity-60",3,"disabled",4,"ngIf"],[1,"flex","justify-end","space-x-2","p-2","border-t","border-base-200"],["btn","","matRipple","",1,"w-32","inverse",3,"routerLink"],["btn","","matRipple","",1,"w-32",3,"click"],[3,"value"],[1,"opacity-60",3,"disabled"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]],template:function(o,s){if(1&o&&(e.TgZ(0,"div",0),e.YNc(1,Zs,39,21,"div",1),e.qZA(),e.YNc(2,As,4,2,"ng-template",null,2,e.W1O)),2&o){const i=e.MAs(3);e.xp6(),e.Q6J("ngIf",!s.loading)("ngIfElse",i)}},dependencies:[p.sg,p.O5,A.KE,A.TO,N.Nt,K.gD,x.ey,J.Ou,x.wG,g.Fj,g.wV,g.JJ,g.JL,g.On,g.sg,g.u,f.rH,p.Ov]})}return n})();var Ts=l(33005),ys=l(19842);const ws=["asset-manager",""];const et=[{path:"list",component:Oe,children:[{path:"items",component:Ge},{path:"requests",component:je},{path:"purchase-orders",component:Ke},{path:"**",redirectTo:"requests"}]},{path:"view/:id",component:Re},{path:"manage",children:[{path:"group",component:Ve},{path:"asset",component:Be},{path:"asset-bulk",component:We},{path:"category",component:le},{path:"purchase-order",component:He}]},{path:"**",redirectTo:"list/requests"}],Cs=[{path:"new",component:(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["","asset-manager",""]],attrs:ws,decls:5,vars:0,consts:[[1,"flex","flex-1","h-px"],[1,"flex","flex-col","flex-1","w-1/2","h-full"]],template:function(o,s){1&o&&(e._UZ(0,"app-topbar"),e.TgZ(1,"div",0),e._UZ(2,"app-sidebar"),e.TgZ(3,"main",1),e._UZ(4,"router-outlet"),e.qZA()())},dependencies:[Ts.O,ys.u,f.lC],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background-color:var(--b1)}\n\n/*# sourceMappingURL=new-asset-manager.component.ts-angular-inline--121.css.map*/"]})}return n})(),children:et},{path:"",component:Se,children:et},{path:"**",redirectTo:""}];let qs=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[p.ez,Pt.v,Y.Kk,W.vV,ue.Cv,j.Nh,Jt,f.Bz.forChild(Cs)]})}return n})()}}]);
//# sourceMappingURL=apps_concierge_src_app_asset-manager_asset-manager_module_ts.js.map