(self.webpackChunkplaceos=self.webpackChunkplaceos||[]).push([["default-libs_explore_src_index_ts"],{3098:(t,e,s)=>{"use strict";s.d(e,{Xp:()=>$,ck:()=>g.c,P2:()=>H});var i=s(1511),n=s(6073),o=s(2347),a=s(7521),l=s(2522),r=s(6899),d=s(9604),u=s(4762),c=s(8223),p=s(3530),h=s(2619),_=s(1496),g=s(8284);s(6898),s(6283),s(4786),s(1522);var m=s(6817),f=(s(611),s(4587),s(9996));s(4266),s(9633);var b=s(4608);s(8239),s(9720);var v=s(5980),x=s(1548),Z=(s(6756),s(9980));s(7806);const w={free:"#43a047",pending:"#ffb300",reserved:"#e65100",busy:"#e53935","not-bookable":"#757575",unknown:"#757575"};s(1314);var k=s(8512),y=s(3080),T=s(4689),A=s(7727),O=s(4914),U=s(205),q=s(8125),C=s(6839),M=s(5087),I=s(3779);const P=["dot"],j=["explore-device-info",""];function z(t,e){if(1&t&&(h.TgZ(0,"p",12),h.TgZ(1,"label"),h._uU(2,"Manufacturer:"),h.qZA(),h._uU(3),h.qZA()),2&t){const t=h.oxw(2);h.xp6(3),h.hij(" ",t.manufacturer," ")}}function J(t,e){if(1&t&&(h.TgZ(0,"p",13),h.TgZ(1,"label"),h._uU(2,"OS:"),h.qZA(),h._uU(3),h.qZA()),2&t){const t=h.oxw(2);h.xp6(3),h.hij(" ",t.os,"")}}function G(t,e){if(1&t&&(h.TgZ(0,"p",14),h.TgZ(1,"label"),h._uU(2,"SSID:"),h.qZA(),h._uU(3),h.qZA()),2&t){const t=h.oxw(2);h.xp6(3),h.hij(" ",t.ssid,"")}}function N(t,e){if(1&t&&(h.TgZ(0,"p",15),h.TgZ(1,"label"),h._uU(2,"Username:"),h.qZA(),h._uU(3),h.qZA()),2&t){const t=h.oxw(2);h.xp6(3),h.hij(" ",(null==t.user?null:t.user.name)||(null==t.user?null:t.user.username)||t.username," ")}}function X(t,e){if(1&t&&(h.TgZ(0,"p",16),h.TgZ(1,"label"),h._uU(2,"Type:"),h.qZA(),h._uU(3),h.qZA()),2&t){const t=h.oxw(2);h.xp6(3),h.hij(" ",t.user.type," ")}}function L(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",4),h.NdJ("mouseleave",function(){return h.CHM(t),h.oxw().close()}),h._UZ(1,"div",5),h.TgZ(2,"div",6),h.TgZ(3,"p"),h.TgZ(4,"label"),h._uU(5,"MAC:"),h.qZA(),h._uU(6),h.qZA(),h.TgZ(7,"p"),h.TgZ(8,"label"),h._uU(9,"Accuracy:"),h.qZA(),h._uU(10),h.qZA(),h.TgZ(11,"p"),h.TgZ(12,"label"),h._uU(13,"Last Seen:"),h.qZA(),h._uU(14),h.qZA(),h.YNc(15,z,4,1,"p",7),h.YNc(16,J,4,1,"p",8),h.YNc(17,G,4,1,"p",9),h.YNc(18,N,4,1,"p",10),h.YNc(19,X,4,1,"p",11),h.qZA(),h.qZA()}if(2&t){const t=h.oxw();h.xp6(6),h.hij(" ",t.mac,""),h.xp6(4),h.hij(" ",t.variance,"m"),h.xp6(4),h.hij(" ",t.last_seen,""),h.xp6(1),h.Q6J("ngIf",t.manufacturer),h.xp6(1),h.Q6J("ngIf",t.os),h.xp6(1),h.Q6J("ngIf",t.ssid),h.xp6(1),h.Q6J("ngIf",t.username),h.xp6(1),h.Q6J("ngIf",t.user)}}let Y=(()=>{class t{constructor(t,e,s){var i;this._details=t,this._element=e,this._overlay=s,this.username="",this.user=this._details.user,this.mac=this._details.mac,this.manufacturer=this._details.manufacturer,this.os=this._details.os,this.ssid=this._details.ssid,this.variance=null===(i=this._details.variance)||void 0===i?void 0:i.toFixed(2),this.diameter=100*this._details.variance,this.bg_color=this._details.bg_color||this.distance_color,this.overlay_ref=null,this.onEnter=()=>this.loadUser(),this.onLeave=()=>this.close(),this.onClick=()=>this.loadUser(),this.onTouch=()=>this.loadUser()}get last_seen(){return(0,M.Z)(1e3*(this._details.last_seen||0),{addSuffix:!0})}get distance(){return Math.abs((0,I.Z)(1e3*(this._details.last_seen||0),new Date))}get distance_color(){return this.distance<10?"#43a047":this.distance<20?"#ffb300":"#e53935"}ngOnInit(t=0){t>10||setTimeout(()=>{var e;const s=null===(e=this._element.nativeElement.parentElement)||void 0===e?void 0:e.parentElement;if(!s)return this.ngOnInit(++t);const i=parseInt(s.style.top,10)/100,n=parseInt(s.style.left,10)/100;this.y_pos=i>=.5?"bottom":"top",this.x_pos=n>=.5?"end":"start"},200)}loadUser(){return(0,u.mG)(this,void 0,void 0,function*(){if(this.open(),this.username)return;const t=(0,m.rTZ)(this._details.system,"LocationServices");if(t){this.username="Loading...";const e=yield t.execute("check_ownership_of",[this.mac]).catch(t=>null);this.username=e&&e.assigned_to?e.assigned_to:""}})}open(){this.overlay_ref&&this.close(),this._portal&&(this.overlay_ref=this._overlay.create({positionStrategy:this._overlay.position().flexibleConnectedTo(this._dot).withPositions([{originX:"start"===this.x_pos?"end":"start",originY:"top"===this.y_pos?"bottom":"top",overlayX:this.x_pos||"end",overlayY:this.y_pos||"bottom"}])}),this.overlay_ref.attach(this._portal))}close(){this.overlay_ref&&(this.overlay_ref.dispose(),this.overlay_ref=null)}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(o.ui),h.Y36(h.SBq),h.Y36(l.aV))},t.\u0275cmp=h.Xpm({type:t,selectors:[["","explore-device-info",""]],viewQuery:function(t,e){if(1&t&&(h.Gf(r.ig,5),h.Gf(P,5)),2&t){let t;h.iGM(t=h.CRH())&&(e._portal=t.first),h.iGM(t=h.CRH())&&(e._dot=t.first)}},hostBindings:function(t,e){1&t&&h.NdJ("mouseenter",function(){return e.onEnter()})("mouseleave",function(){return e.onLeave()})("click",function(){return e.onClick()})("touchend",function(){return e.onTouch()})},attrs:j,decls:4,vars:4,consts:[["name","radius",1,"radius","absolute","center","bg-blue-600","bg-opacity-25","border-4","border-dashed","border-blue-600","rounded-full",3,"mouseenter"],["name","dot",1,"h-2","w-2","absolute","center","rounded-full","pointer-events-auto","shadow"],["dot",""],["cdk-portal",""],["name","device-info",1,"w-64","rounded","bg-white","p-4","top-0","left-0","shadow","pointer-events-none",3,"mouseleave"],[1,"arrow"],[1,"details"],["type","",4,"ngIf"],["os","",4,"ngIf"],["ssid","",4,"ngIf"],["username","",4,"ngIf"],["user","",4,"ngIf"],["type",""],["os",""],["ssid",""],["username",""],["user",""]],template:function(t,e){1&t&&(h.TgZ(0,"div",0),h.NdJ("mouseenter",function(){return e.loadUser()}),h.qZA(),h._UZ(1,"div",1,2),h.YNc(3,L,20,8,"ng-template",3)),2&t&&(h.Akn("height: "+e.diameter+"%; width: "+e.diameter+"%;"),h.xp6(1),h.Udp("background-color",e.bg_color))},directives:[r.bH,i.O5],styles:["[_nghost-%COMP%]{pointer-events:auto}[_nghost-%COMP%] > [name=dot][_ngcontent-%COMP%]{background-color:#616161}[_nghost-%COMP%]:hover > [name=radius][_ngcontent-%COMP%]{opacity:1}[name=radius][_ngcontent-%COMP%]{opacity:0;transition:opacity .2s;pointer-events:none}"]}),t})();function S(t,e){if(1&t&&(h.TgZ(0,"p",6),h._uU(1),h.qZA()),2&t){const t=h.oxw();h.xp6(1),h.Oqu(t.user)}}function F(t,e){if(1&t&&(h.TgZ(0,"p",7),h._uU(1),h.ALo(2,"date"),h.ALo(3,"date"),h.qZA()),2&t){const t=h.oxw();h.xp6(1),h.AsE(" ",h.xi3(2,2,t.start,"shortTime")," \u2013 ",h.xi3(3,5,t.end,"shortTime")," ")}}let Q=(()=>{class t{constructor(t,e){this._details=t,this._element=e,this.map_id=this._details.map_id,this.user=this._details.user,this.start=this._details.start,this.end=this._details.end}ngOnInit(t=0){t>10||setTimeout(()=>{var e;const s=null===(e=this._element.nativeElement.parentElement)||void 0===e?void 0:e.parentElement;if(!s)return this.ngOnInit(++t);const i=parseInt(s.style.top,10)/100,n=parseInt(s.style.left,10)/100;this.y_pos=i>=.5?"bottom":"top",this.x_pos=n>=.5?"right":"left"},200)}get available_until(){return""}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(o.ui),h.Y36(h.SBq))},t.\u0275cmp=h.Xpm({type:t,selectors:[["explore-desk-info"]],decls:7,vars:6,consts:[["name","space-info",3,"id"],[1,"arrow"],[1,"details"],["map-id","",1,"m-0","font-medium"],["user","","class","mt-2 text-sm",4,"ngIf"],["start","","class","mt-1 text-sm",4,"ngIf"],["user","",1,"mt-2","text-sm"],["start","",1,"mt-1","text-sm"]],template:function(t,e){1&t&&(h.TgZ(0,"div",0),h._UZ(1,"div",1),h.TgZ(2,"div",2),h.TgZ(3,"h4",3),h._uU(4),h.qZA(),h.YNc(5,S,2,1,"p",4),h.YNc(6,F,4,8,"p",5),h.qZA(),h.qZA()),2&t&&(h.Tol("absolute rounded bg-white p-4 top-0 left-0 shadow "+e.x_pos+" "+e.y_pos),h.Q6J("id",e.map_id),h.xp6(4),h.Oqu(e.map_id),h.xp6(1),h.Q6J("ngIf",e.user),h.xp6(1),h.Q6J("ngIf",e.start))},directives:[i.O5],pipes:[i.uU],styles:["[_nghost-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);pointer-events:none;z-index:1}[name=space-info][_ngcontent-%COMP%]{width:16rem}[name=status][_ngcontent-%COMP%]{background-color:#43a047;font-weight:500}[name=status].busy[_ngcontent-%COMP%]{background-color:#e53935}[name=status].pending[_ngcontent-%COMP%]{background-color:#ffb300}[name=status].not-bookable[_ngcontent-%COMP%]{background-color:#757575}"]}),t})();var V=s(6762),D=s(5089);const E=function(){return{standalone:!0}};function B(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"main",5),h.TgZ(1,"div",6),h.TgZ(2,"div",7),h.TgZ(3,"label"),h._uU(4,"Date"),h.qZA(),h.TgZ(5,"a-date-field",8),h._uU(6," Date and time must be in the future "),h.qZA(),h.qZA(),h.qZA(),h.TgZ(7,"div",6),h.TgZ(8,"div",9),h.TgZ(9,"label"),h._uU(10,"Start Time"),h.qZA(),h.TgZ(11,"a-time-field",10),h.NdJ("ngModelChange",function(e){return h.CHM(t),h.oxw().form.patchValue({date:e})}),h.qZA(),h.qZA(),h.TgZ(12,"div",9),h.TgZ(13,"label"),h._uU(14,"End Time"),h.qZA(),h._UZ(15,"a-duration-field",11),h.qZA(),h.qZA(),h.qZA()}if(2&t){const t=h.oxw();let e;h.Q6J("formGroup",t.form),h.xp6(5),h.Q6J("to",t.book_until),h.xp6(6),h.Q6J("ngModel",t.form.value.date)("ngModelOptions",h.DdM(8,E)),h.xp6(4),h.Q6J("time",null==(e=t.form.get("date"))?null:e.value)("max",720)("min",60)("step",60)}}let W=(()=>{class t{constructor(t){this._data=t,this.form=new n.cw({date:new n.NI(t.date),duration:new n.NI(t.duration)})}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(b.WI))},t.\u0275cmp=h.Xpm({type:t,selectors:[["set-datetime-modal"]],decls:10,vars:2,consts:[["classs","flex items-center justify-between"],["mat-icon-button","","mat-dialog-close",""],["class","w-[24rem] pt-4",3,"formGroup",4,"ngIf"],[1,"w-full","p-2","border-t","border-gray-200","flex","items-center","justify-center"],["mat-button","",1,"w-32",3,"mat-dialog-close"],[1,"w-[24rem]","pt-4",3,"formGroup"],[1,"flex","flex-col","sm:flex-row","space-x-0","sm:space-x-2","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],[1,"flex","flex-col","flex-1","w-full","sm:w-1/4"],["formControlName","date",3,"to"],[1,"flex","flex-col","flex-1","w-full","sm:w-1/3"],[3,"ngModel","ngModelOptions","ngModelChange"],["formControlName","duration",3,"time","max","min","step"]],template:function(t,e){1&t&&(h.TgZ(0,"header",0),h.TgZ(1,"h2"),h._uU(2,"Set date and time"),h.qZA(),h.TgZ(3,"button",1),h.TgZ(4,"app-icon"),h._uU(5,"close"),h.qZA(),h.qZA(),h.qZA(),h.YNc(6,B,16,9,"main",2),h.TgZ(7,"footer",3),h.TgZ(8,"button",4),h._uU(9,"Continue"),h.qZA(),h.qZA()),2&t&&(h.xp6(6),h.Q6J("ngIf",e.form),h.xp6(2),h.Q6J("mat-dialog-close",e.form.value))},directives:[v.lW,b.ZT,x.o,i.O5,n.JL,n.sg,V.Q,n.JJ,n.u,D.N,n.On,Z.B],styles:[""]}),t})(),$=(()=>{class t extends c.KG{constructor(t,e,s,i,n){super(),this._state=t,this._org=e,this._settings=s,this._bookings=i,this._dialog=n,this._in_use=new k.X([]),this._options=new k.X({}),this._desks=new k.X([]),this._reserved=new k.X([]),this._statuses={},this._users={},this._poll=new k.X(0),this._desk_bookings=(0,y.aj)([this._state.level,this._poll]).pipe((0,T.w)(([t])=>(0,C.F2)({period_start:(0,O.Z)((0,U.Z)(new Date)),period_end:(0,O.Z)((0,q.Z)(new Date)),type:"desk",zones:t.id}))),this.desk_list=this._state.level.pipe((0,T.w)(t=>(0,m.rlq)(t.id,{name:"desks"}).pipe((0,f.U)(e=>(e.details instanceof Array?e.details:[]).map(e=>new _.nk(Object.assign(Object.assign({},e),{zone:t})))))),(0,A.K)(t=>[])),this._bind=this._state.level.pipe((0,f.U)(t=>{var e,s;if(this._statuses={},this.unsubWith("lvl"),!t)return;const i=this._org.buildings.find(e=>e.id===t.parent_id);if(!i)return;const n=(null===(e=i.bindings)||void 0===e?void 0:e.area_management)||(null===(s=this._org.organisation.bindings)||void 0===s?void 0:s.area_management);if(!n)return;let o=(0,m.rTZ)(n,"AreaManagement").binding(t.id);this.subscription("lvl-in_use",o.listen().subscribe(t=>this.processBindingChange(t||{},n))),this.subscription("lvl-in_use_bind",o.bind()),o=(0,m.rTZ)(n,"AreaManagement").binding(`${t.id}:desk_ids`),this.subscription("lvl-desks_list",o.listen().subscribe(t=>this._desks.next(t||[]))),this.subscription("lvl-desk_list_bind",o.bind())})),this._state_change=(0,y.aj)([this.desk_list,this._in_use,this._reserved,this._options]).pipe((0,f.U)(([t,e,s])=>{this._statuses={};for(const{id:i,bookable:n}of t){const t=e.some(t=>i===t),o=s.some(t=>i===t);this._statuses[i]=n?t?o?"reserved":"busy":"free":"not-bookable"}this.processDesks(t)})),this.init()}init(){return(0,u.mG)(this,void 0,void 0,function*(){yield this._org.initialised.pipe((0,p.P)(t=>t)).toPromise(),this.setOptions({enable_booking:!1!==this._settings.get("app.desks.enabled")}),this.subscription("bind",this._bind.subscribe()),this.subscription("changes",this._state_change.subscribe()),this.subscription("desks",this.desk_list.subscribe(t=>this.processDesks(t)))})}startPolling(t=3e4){this.subscription("desks_in_use_bookings",this._desk_bookings.subscribe(t=>this._in_use.next(t.map(t=>t.asset_id)))),this.interval("poll",()=>this._poll.next((new Date).valueOf()),t)}stopPolling(){this.clearInterval("poll")}setOptions(t){this._options.next(Object.assign(Object.assign({},this._options.getValue()),t))}processBindingChange({value:t},e){const s=(t||[]).filter(t=>!["desk","booking"].includes(t.location)),i=(t||[]).filter(t=>"desk"===t.location||"booking"===t.location&&"desk"===t.type);this._in_use.next(i.map(t=>t.map_id||t.asset_id)),this._reserved.next(i.filter(t=>!t.at_location).map(t=>t.map_id||t.asset_id)),this.processDevices(s,e),this.timeout("update",()=>this.updateStatus(),100)}updateStatus(){const t={},e=this._settings.get("app.explore.colors")||{};for(const s in this._statuses)this._statuses[s]&&(t[`#${s}`]={fill:e[`desk-${this._statuses[s]}`]||e[`${this._statuses[s]}`]||w[`${this._statuses[s]}`],opacity:.6});this._state.setStyles("desks",t)}processDevices(t,e){var s,i;const n=[];for(const o of t){const t=o.x/o.map_width,a=o.y/o.map_height;n.push({location:{x:(null===(s=o.coordinates_from)||void 0===s?void 0:s.includes("right"))?1-t:t,y:(null===(i=o.coordinates_from)||void 0===i?void 0:i.includes("bottom"))?1-a:a},content:Y,data:Object.assign(Object.assign({},o),{system:e})})}this._state.setFeatures("devices",n)}processDesks(t){const e=[],s=[],i=this._options.getValue();for(const n of t){if(e.push({location:n.id,content:Q,hover:!0,data:{map_id:n.name,user:this._users[n.map_id]||n.staff_name,status:this._statuses[n.map_id]},z_index:20}),!n.bookable)continue;const t=()=>(0,u.mG)(this,void 0,void 0,function*(){var t,e;this._bookings.newForm();const{date:s,duration:o}=yield this._setBookingTime(this._bookings.form.value.date,this._bookings.form.value.duration);this._bookings.form.patchValue({asset_id:n.id,date:s,duration:o,map_id:(null==n?void 0:n.map_id)||(null==n?void 0:n.id),description:n.name,user:i.host||(0,c.ar)(),booking_type:"desk",zones:n.zone?[null===(t=n.zone)||void 0===t?void 0:t.parent_id,null===(e=n.zone)||void 0===e?void 0:e.id]:[]}),yield this._bookings.confirmPost(),(0,c.t5)(`Successfull booked desk ${n.name||n.id}`)});s.push({id:n.id,action:"click",callback:t}),s.push({id:n.id,action:"touchend",callback:t})}this._state.setActions("desks",this._options.getValue().enable_booking?s:[]),this._state.setFeatures("desks",e),this.timeout("update",()=>this.updateStatus(),100)}_setBookingTime(t,e){return(0,u.mG)(this,void 0,void 0,function*(){if(this._settings.get("app.desks.allow_time_changes")){const s=this._dialog.open(W,{data:{date:t,duration:e}}),i=yield s.afterClosed().toPromise();if(!i)throw"User cancelled";t=i.date,e=i.duration}return{date:t,duration:e}})}}return t.\u0275fac=function(e){return new(e||t)(h.LFG(g.c),h.LFG(_.w7),h.LFG(c.gb),h.LFG(C.fy),h.LFG(b.uw))},t.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac}),t})();s(7209),s(7256),s(2571),s(878),s(7701),s(4019),s(8303),s(5205),s(84);let H=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[i.ez,o.Kk,n.u5,n.UX,a.rP,l.U8,r.eL,d.W9]]}),t})()},8284:(t,e,s)=>{"use strict";s.d(e,{c:()=>_});var i=s(4762),n=s(8512),o=s(3080),a=s(9996),l=s(7701),r=s(3530),d=s(3835),u=s(8223),c=s(2619),p=s(1496),h=s(7209);let _=(()=>{class t extends u.KG{constructor(t,e,s){super(),this._org=t,this._spaces=e,this._settings=s,this._level=new n.X(null),this._positions=new n.X({zoom:1,center:{x:.5,y:.5}}),this._styles=new n.X({}),this._features=new n.X({}),this._actions=new n.X({}),this._labels=new n.X({}),this._options=new n.X({disable:["zones","devices"]}),this._message=new n.X(""),this.level=this._level.asObservable(),this.message=this._message.asObservable(),this.spaces=(0,o.aj)([this._level,this._spaces.list]).pipe((0,a.U)(([t,e])=>e.filter(e=>e.zones.includes(null==t?void 0:t.id)))),this.map_url=this._level.pipe((0,a.U)(t=>(t?t.map_id:"")||"")),this.map_positions=this._positions.asObservable(),this.map_features=(0,o.aj)([this._features,this._options]).pipe((0,l.b)(200),(0,a.U)(([t,e])=>{var s,i;let n=[];for(const o in t)(null===(s=e.disable)||void 0===s?void 0:s.includes(o))||(null===(i=e.disable_features)||void 0===i?void 0:i.includes(o))||(n=n.concat(t[o]));return n})),this.map_actions=(0,o.aj)([this._actions,this._options]).pipe((0,l.b)(200),(0,a.U)(([t,e])=>{var s,i;let n=[];for(const o in t)(null===(s=e.disable)||void 0===s?void 0:s.includes(o))||(null===(i=e.disable_actions)||void 0===i?void 0:i.includes(o))||(n=n.concat(t[o]));return n})),this.map_labels=(0,o.aj)([this._labels,this._options]).pipe((0,l.b)(200),(0,a.U)(([t,e])=>{var s,i;let n=[];for(const o in t)(null===(s=e.disable)||void 0===s?void 0:s.includes(o))||(null===(i=e.disable_labels)||void 0===i?void 0:i.includes(o))||(n=n.concat(t[o]));return n})),this.map_styles=(0,o.aj)([this._styles,this._options]).pipe((0,l.b)(200),(0,a.U)(([t,e])=>{var s,i,n;let o={text:{display:"none"}};for(const a in t)(null===(s=e.disable)||void 0===s?void 0:s.includes(a))||(null===(i=e.disable_styles)||void 0===i?void 0:i.includes(a))||(o=Object.assign(Object.assign({},o),t[a]));return(null===(n=e.disable)||void 0===n?void 0:n.includes("zones"))&&(o["#zones"]={display:"none"},o["#Zones"]={display:"none"}),o})),this.options=this._options.asObservable(),this.init()}get positions(){return this._positions.getValue()}get active_level(){return this._level.getValue()}init(){return(0,i.mG)(this,void 0,void 0,function*(){yield this._org.initialised.pipe((0,r.P)(t=>t)).toPromise(),this._org.active_building.pipe((0,d.h)(t=>!!t)).subscribe(t=>{const e=this._level.getValue(),s=this._org.levelsForBuilding(t);!s.find(t=>(null==e?void 0:e.id)===t.id)&&s.length&&this.setLevel(s[0].id),this._settings.get("app.explore.disable_actions")&&this.setOptions({disable_actions:this._settings.get("app.explore.disable_actions")}),this._settings.get("app.explore.disable_labels")&&this.setOptions({disable_labels:this._settings.get("app.explore.disable_labels")}),this._settings.get("app.explore.disable_features")&&this.setOptions({disable_features:this._settings.get("app.explore.disable_features")}),this._settings.get("app.explore.disable_styles")&&this.setOptions({disable_styles:this._settings.get("app.explore.disable_styles")})})})}setOptions(t){const e=this._options.getValue(),s=(0,u.Tw)([...t.disable||e.disable,...this._settings.get("app.explore.disable")||[]]);this._options.next(Object.assign(Object.assign(Object.assign({},this._options.getValue()),t),{disable:s}))}setLevel(t){const e=this._org.levelWithID([t]);e&&this._level.next(e)}setStyles(t,e){const s=this._styles.getValue();s[t]=e,this._styles.next(s)}setFeatures(t,e){const s=this._features.getValue();s[t]=e,this._features.next(s)}setActions(t,e){const s=this._actions.getValue();s[t]=e,this._actions.next(s)}setLabels(t,e){const s=this._labels.getValue();s[t]=e,this._labels.next(s)}setPositions(t,e){this._positions.next({zoom:t,center:e})}}return t.\u0275fac=function(e){return new(e||t)(c.LFG(p.w7),c.LFG(h.sK),c.LFG(u.gb))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},2571:(t,e,s)=>{"use strict";s.d(e,{s:()=>l});var i=s(2619),n=s(8284),o=s(5980),a=s(1548);let l=(()=>{class t{constructor(t){this._state=t,this.zoomIn=()=>this._state.setPositions(Math.min(10,1.2*this._state.positions.zoom),this._state.positions.center),this.zoomOut=()=>this._state.setPositions(Math.max(1,this._state.positions.zoom*(1/1.2)),this._state.positions.center),this.reset=()=>this._state.setPositions(1,{x:.5,y:.5})}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(n.c))},t.\u0275cmp=i.Xpm({type:t,selectors:[["explore-zoom-controls"]],decls:9,vars:0,consts:[["z-in","","mat-icon-button","",1,"bg-white",3,"click"],["z-out","","mat-icon-button","",1,"bg-white",3,"click"],["reset","","mat-icon-button","",1,"bg-white",3,"click"]],template:function(t,e){1&t&&(i.TgZ(0,"button",0),i.NdJ("click",function(){return e.zoomIn()}),i.TgZ(1,"app-icon"),i._uU(2,"add"),i.qZA(),i.qZA(),i.TgZ(3,"button",1),i.NdJ("click",function(){return e.zoomOut()}),i.TgZ(4,"app-icon"),i._uU(5,"remove"),i.qZA(),i.qZA(),i.TgZ(6,"button",2),i.NdJ("click",function(){return e.reset()}),i.TgZ(7,"app-icon"),i._uU(8,"autorenew"),i.qZA(),i.qZA())},directives:[o.lW,a.o],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;padding:.5rem}button[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:0}button[_ngcontent-%COMP%]:first-child{border-radius:.25rem .25rem 0 0;border-bottom:none}button[_ngcontent-%COMP%]:last-child{border-radius:0 0 .25rem .25rem;border-top:none}"]}),t})()}}]);
//# sourceMappingURL=default-libs_explore_src_index_ts.js.map