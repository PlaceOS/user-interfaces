"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([["apps_concierge_src_app_room-manager_room-manager_module_ts"],{9909:(oo,M,a)=>{a.r(M),a.d(M,{RoomManagerModule:()=>m});var u=a(4666),f=a(2508),h=a(9885),R=a(3045),T=a(2886),Z=a(6150),o=a(2560),b=a(4945),x=a(1670),y=a(6221),C=a(308),L=a(4505),z=a(4139),A=a(7716),F=a(9151),U=a(9095),v=a(6942),O=a(7418),S=a(9128);class c{}c.\u0275fac=function(e){return new(e||c)},c.\u0275cmp=o.Xpm({type:c,selectors:[["room-modal"]],decls:0,vars:0,template:function(e,t){}});var Y=a(1484);class r{constructor(e,t){this._org=e,this._dialog=t,this._options=new L.X({}),this.options=this._options.asObservable(),this.room_list=this._org.active_building.pipe((0,F.h)(n=>!!n?.id),(0,U.w)(n=>(0,C.vIL)({zone_id:n.id}).pipe((0,v.U)(({data:l})=>l),(0,O.K)(()=>(0,z.of)([])))),(0,v.U)(n=>n.filter(l=>this._org.levelWithID(l.zones)).sort((l,i)=>l.name.localeCompare(i.name))),(0,S.d)(1)),this.filtered_rooms=(0,A.aj)([this.room_list,this._options]).pipe((0,v.U)(([n,l])=>(l.zone&&(n=n.filter(i=>i.zones.includes(l.zone))),l.search&&(n=n.filter(i=>i.name.toLowerCase().includes(l.search.toLowerCase()))),n)))}setFilters(e){this._options.next({...this._options.getValue(),...e})}setSearchString(e){this._options.next({...this._options.getValue(),search:e})}editRoom(e=new C.G6j){this._dialog.open(c,{data:{room:e}})}}r.\u0275fac=function(e){return new(e||r)(o.LFG(y.w7),o.LFG(Y.uw))},r.\u0275prov=o.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"});var j=a(9112),J=a(5670),P=a(9396),N=a(5074),D=a(7371),E=a(207);function I(s,e){if(1&s&&(o.TgZ(0,"mat-option",3),o._uU(1),o.qZA()),2&s){const t=e.$implicit;o.Q6J("value",t.id),o.xp6(1),o.hij(" ",t.display_name||t.name," ")}}class p extends j.cx{get building(){return this._org.building}constructor(e,t,n,l){super(),this._manager=e,this._org=t,this._route=n,this._router=l,this.levels=this._org.active_levels,this.filters=this._manager.options,this.setFilters=i=>this._manager.setFilters(i),this.setSearch=i=>this._manager.setSearchString(i),this.updateZones=i=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_id:i}}),this._manager.setFilters({zone:i})}}ngOnInit(){var e=this;return(0,x.Z)(function*(){yield e._org.initialised.pipe((0,J.P)(t=>t)).toPromise(),e.subscription("route.query",e._route.queryParamMap.subscribe(t=>{if(t.has("zone_id")){const n=t.get("zone_id");if(n.length){const l=e._org.levelWithID([n]);if(!l)return;e._org.building=e._org.buildings.find(i=>i.id===l.parent_id),e.setFilters({zone:n})}}})),e.subscription("levels",e._org.active_levels.subscribe(t=>{var n=t.find(l=>l.id===n);!n&&t.length&&(n=t[0].id),e.updateZones(n)})),e.setSearch("")})()}}p.\u0275fac=function(e){return new(e||p)(o.Y36(r),o.Y36(y.w7),o.Y36(h.gz),o.Y36(h.F0))},p.\u0275cmp=o.Xpm({type:p,selectors:[["room-manager-topbar"]],features:[o.qOj],decls:10,vars:7,consts:[[1,"flex","items-center","bg-white","dark:bg-neutral-700","h-20","px-4","border-b","border-gray-300","dark:border-neutral-500","space-x-2"],["appearance","outline"],["placeholder","All Levels",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-1","w-2"],[1,"mr-2",3,"modelChange"]],template:function(e,t){if(1&e&&(o.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-select",2),o.NdJ("ngModelChange",function(l){return t.updateZones(l)}),o.ALo(3,"async"),o.TgZ(4,"mat-option",3),o._uU(5,"All Levels"),o.qZA(),o.YNc(6,I,2,2,"mat-option",4),o.ALo(7,"async"),o.qZA()(),o._UZ(8,"div",5),o.TgZ(9,"searchbar",6),o.NdJ("modelChange",function(l){return t.setSearch(l)}),o.qZA()()),2&e){let n;o.xp6(2),o.Q6J("ngModel",null==(n=o.lcZ(3,3,t.filters))?null:n.zone),o.xp6(2),o.Q6J("value",t.building.id),o.xp6(2),o.Q6J("ngForOf",o.lcZ(7,5,t.levels))}},dependencies:[u.sg,f.JJ,f.On,P.U,N.KE,D.gD,E.ey,u.Ov],styles:["mat-form-field[_ngcontent-%COMP%]{height:3.25rem}\n/*# sourceMappingURL=room-manager-topbar.component.ts-angular-inline--153.css.map*/"]});var Q=a(6896),W=a(5306),X=a(1110),B=a(3838);function G(s,e){if(1&s&&(o._uU(0),o.ALo(1,"level"),o.ALo(2,"level")),2&s){const t=e.data;let n;o.hij(" ",(null==(n=o.lcZ(1,1,t))?null:n.display_name)||(null==(n=o.lcZ(2,3,t))?null:n.name)," ")}}function w(s,e){if(1&s&&(o.TgZ(0,"div",5)(1,"app-icon"),o._uU(2),o.qZA()()),2&s){const t=e.data;o.ekj("bg-red-500",!t)("bg-green-500",t),o.xp6(2),o.Oqu(t?"done":"close")}}function K(s,e){1&s&&(o.TgZ(0,"div",6)(1,"button",7)(2,"app-icon"),o._uU(3,"edit"),o.qZA()(),o.TgZ(4,"button",8)(5,"app-icon"),o._uU(6,"more_horiz"),o.qZA()()())}const V=function(){return["display_name","zones","capacity","type","bookable","actions"]},$=function(){return["Room Name","Level","Capacity","Room Type","Bookable"," "]},H=function(){return["flex","8r","6r","8r","6r","12r"]},_=function(s,e,t){return{bookable:s,zones:e,actions:t}};class d{constructor(e){this._manager=e,this.rooms=this._manager.filtered_rooms}}d.\u0275fac=function(e){return new(e||d)(o.Y36(r))},d.\u0275cmp=o.Xpm({type:d,selectors:[["room-list"]],decls:8,vars:12,consts:[[1,"absolute","inset-0","overflow-auto"],["empty","No rooms for selected level or building",1,"block","min-w-[56rem]","w-full","h-full",3,"dataSource","columns","display_column","column_size","template"],["level_template",""],["bool_template",""],["action_template",""],[1,"rounded","h-8","w-8","flex","items-center","justify-center","text-2xl","text-white","mx-auto"],[1,"w-full","flex","justify-end","space-x-2"],["btn","","icon","","matTooltip","Edit Room"],["btn","","icon","","matTooltip","Room Details"]],template:function(e,t){if(1&e&&(o.TgZ(0,"div",0),o._UZ(1,"custom-table",1),o.qZA(),o.YNc(2,G,3,5,"ng-template",null,2,o.W1O),o.YNc(4,w,3,5,"ng-template",null,3,o.W1O),o.YNc(6,K,7,0,"ng-template",null,4,o.W1O)),2&e){const n=o.MAs(3),l=o.MAs(5),i=o.MAs(7);o.xp6(1),o.Q6J("dataSource",t.rooms)("columns",o.DdM(5,V))("display_column",o.DdM(6,$))("column_size",o.DdM(7,H))("template",o.kEZ(8,_,l,n,i))}},dependencies:[Q.gM,W.o,X.C,B.M]});class g{}g.\u0275fac=function(e){return new(e||g)},g.\u0275cmp=o.Xpm({type:g,selectors:[["","app-weekview",""]],attrs:["app-weekview",""],decls:4,vars:0,consts:[[1,"relative","overflow-hidden","flex","flex-col"],[1,"block","w-full"],[1,"block","w-full","relative","flex-1","h-1/2"]],template:function(e,t){1&e&&(o._UZ(0,"sidebar"),o.TgZ(1,"main",0),o._UZ(2,"room-manager-topbar",1)(3,"room-list",2),o.qZA())},dependencies:[b.k,p,d],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%;background:var(--bg)}sidebar[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;min-width:50%;height:100%}\n/*# sourceMappingURL=room-manager.component.ts-angular-inline--152.css.map*/"]});const q=[{path:"",component:g}];class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=o.oAB({type:m}),m.\u0275inj=o.cJS({imports:[u.ez,f.u5,R.v,T.YR,Z.PP,h.Bz.forChild(q)]})}}]);
//# sourceMappingURL=apps_concierge_src_app_room-manager_room-manager_module_ts.js.map