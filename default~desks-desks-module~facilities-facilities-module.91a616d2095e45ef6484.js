(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"2h+Z":function(t,n,e){"use strict";e.d(n,"a",(function(){return a}));var o=e("Rc+I"),s=e("EM62"),i=e("2kYt");function r(t,n){if(1&t&&(s.Vb(0,"p",6),s.Lc(1),s.Ub()),2&t){const t=s.jc();s.Db(1),s.Mc(t.user)}}function c(t,n){if(1&t&&(s.Vb(0,"p",7),s.Lc(1),s.kc(2,"date"),s.kc(3,"date"),s.Ub()),2&t){const t=s.jc();s.Db(1),s.Oc(" ",s.mc(2,2,t.start,"shortTime")," \u2013 ",s.mc(3,5,t.end,"shortTime")," ")}}let a=(()=>{class t{constructor(t,n){this._details=t,this._element=n,this.map_id=this._details.map_id,this.user=this._details.user,this.start=this._details.start,this.end=this._details.end}ngOnInit(t=0){t>10||setTimeout(()=>{var n;const e=null===(n=this._element.nativeElement.parentElement)||void 0===n?void 0:n.parentElement;if(!e)return this.ngOnInit(++t);const o=parseInt(e.style.top,10)/100,s=parseInt(e.style.left,10)/100;this.y_pos=o>=.5?"bottom":"top",this.x_pos=s>=.5?"right":"left"},200)}get available_until(){return""}}return t.\u0275fac=function(n){return new(n||t)(s.Pb(o.d),s.Pb(s.m))},t.\u0275cmp=s.Jb({type:t,selectors:[["explore-desk-info"]],decls:7,vars:6,consts:[["name","space-info",3,"id"],[1,"arrow"],[1,"details"],[1,"m-0","font-medium"],["class","mt-2 text-sm",4,"ngIf"],["class","mt-1 text-sm",4,"ngIf"],[1,"mt-2","text-sm"],[1,"mt-1","text-sm"]],template:function(t,n){1&t&&(s.Vb(0,"div",0),s.Qb(1,"div",1),s.Vb(2,"div",2),s.Vb(3,"h4",3),s.Lc(4),s.Ub(),s.Jc(5,r,2,1,"p",4),s.Jc(6,c,4,8,"p",5),s.Ub(),s.Ub()),2&t&&(s.Fb("absolute rounded bg-white p-4 top-0 left-0 shadow "+n.x_pos+" "+n.y_pos),s.pc("id",n.map_id),s.Db(4),s.Mc(n.map_id),s.Db(1),s.pc("ngIf",n.user),s.Db(1),s.pc("ngIf",n.start))},directives:[i.n],pipes:[i.f],styles:["[_nghost-%COMP%] {\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                pointer-events: none;\n                z-index: 1;\n            }\n\n            [name='space-info'][_ngcontent-%COMP%] {\n                width: 16rem;\n            }\n\n            [name='status'][_ngcontent-%COMP%] {\n                background-color: #43a047;\n                font-weight: 500;\n            }\n\n            [name='status'].busy[_ngcontent-%COMP%] {\n                background-color: #e53935;\n            }\n\n            [name='status'].pending[_ngcontent-%COMP%] {\n                background-color: #ffb300;\n            }\n\n            [name='status'].not-bookable[_ngcontent-%COMP%] {\n                background-color: #757575;\n            }"]}),t})()},"7JBE":function(t,n,e){"use strict";e.d(n,"a",(function(){return o.a})),e("pu6a");var o=e("9Yl1")},KuCG:function(t,n,e){"use strict";e.d(n,"a",(function(){return i}));var o=e("JuBR"),s=e("mrqE");function i(t){Object(s.a)(1,arguments);var n=Object(o.a)(t);return n.setHours(23,59,59,999),n}},T50y:function(t,n,e){"use strict";e.d(n,"a",(function(){return m}));var o=e("C05f"),s=e("HM3f"),i=e("YtkY"),r=e("jOdJ"),c=e("xVbo"),a=e("20lr"),l=e("EM62"),b=e("dJst"),u=e("6CBO");let m=(()=>{class t extends a.c{constructor(t,n,e){super(),this._org=t,this._spaces=n,this._settings=e,this._level=new o.a(null),this._positions=new o.a({zoom:1,center:{x:.5,y:.5}}),this._styles=new o.a({}),this._features=new o.a({}),this._actions=new o.a({}),this._labels=new o.a({}),this._options=new o.a({}),this.level=this._level.asObservable(),this.spaces=Object(s.b)([this._level,this._spaces.list]).pipe(Object(i.a)(t=>t[1].filter(n=>n.zones.includes(t[0].id)))),this.map_url=this._level.pipe(Object(i.a)(t=>(t?t.map_id:"")||"")),this.map_positions=this._positions.asObservable(),this.map_features=Object(s.b)([this._features,this._options]).pipe(Object(i.a)(t=>{const[n,e]=t;let o=[];for(const s in n)("devices"!==s||e.show_zones&&!1!==this._settings.get("app.explore.display_devices"))&&(o=o.concat(n[s]));return o})),this.map_actions=this._actions.pipe(Object(i.a)(t=>Object.values(t).reduce((t,n)=>t.concat(n),[]))),this.map_labels=Object(s.b)([this._labels,this._options]).pipe(Object(i.a)(t=>{const[n,e]=t;let o=[];for(const s in n)("zones"!==s||e.show_zones)&&(o=o.concat(n[s]));return o})),this.map_styles=Object(s.b)([this._styles,this._options]).pipe(Object(i.a)(t=>{const[n,e]=t,o=Object.keys(n).reduce((t,e)=>Object.assign(Object.assign({},t),n[e]),{});return e.show_zones||(o["#zones"]={display:"none"},o["#Zones"]={display:"none"}),o.text={display:"none"},o})),this.options=this._options.asObservable(),this._org.initialised.pipe(Object(r.a)(t=>t)).subscribe(()=>{this.subscription("building",this._org.active_building.pipe(Object(c.a)(t=>!!t)).subscribe(t=>{const n=this._level.getValue(),e=this._org.levelsForBuilding(t);!e.find(t=>(null==n?void 0:n.id)===t.id)&&e.length&&this.setLevel(e[0].id)}))})}get positions(){return this._positions.getValue()}setOptions(t){this._options.next(Object.assign(Object.assign({},this._options.getValue()),t))}setLevel(t){const n=this._org.levelWithID([t]);n&&this._level.next(n)}setStyles(t,n){const e=this._styles.getValue();e[t]=n,this._styles.next(e)}setFeatures(t,n){const e=this._features.getValue();e[t]=n,this._features.next(e)}setActions(t,n){const e=this._actions.getValue();e[t]=n,this._actions.next(e)}setLabels(t,n){const e=this._labels.getValue();e[t]=n,this._labels.next(e)}setPositions(t,n){this._positions.next({zoom:t,center:n})}}return t.\u0275fac=function(n){return new(n||t)(l.cc(b.c),l.cc(u.c),l.cc(a.f))},t.\u0275prov=l.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},aAMe:function(t,n,e){"use strict";e.d(n,"a",(function(){return a})),e.d(n,"b",(function(){return c.a})),e.d(n,"c",(function(){return b})),e("/It1"),e("C05f"),e("HM3f"),e("20lr"),e("eZII");var o=e("Rc+I"),s=e("EM62"),i=e("2kYt");e("D57K"),e("OZ4H"),e("7JBE"),e("PBFl"),e("ukpX");var r=e("nIj0");e("29Wa"),e("Cd2c"),e("gpkD"),e("csyo");var c=e("T50y");const a={free:"#43a047",pending:"#ffb300",reserved:"#3949ab",busy:"#e53935","not-bookable":"#757575",unknown:"#757575"};e("JuBR"),e("mrqE"),e("BySP"),e("dI1K"),e("njY1"),e("2h+Z"),e("dJst"),e("R7+U"),e("mFH5"),e("jOdJ"),e("mjT4"),e("sEIs"),e("6CBO"),e("lYMz"),e("gGs/");var l=e("k8N0");e("YtkY"),e("ulve");let b=(()=>{class t{}return t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({factory:function(n){return new(n||t)},imports:[[i.c,o.b,r.h,r.p,l.b]]}),t})()},"gGs/":function(t,n,e){"use strict";e.d(n,"a",(function(){return c}));var o=e("EM62"),s=e("T50y"),i=e("PBFl"),r=e("ukpX");let c=(()=>{class t{constructor(t){this._state=t,this.zoomIn=()=>this._state.setPositions(Math.min(10,1.2*this._state.positions.zoom),this._state.positions.center),this.zoomOut=()=>this._state.setPositions(Math.max(1,this._state.positions.zoom*(1/1.2)),this._state.positions.center),this.reset=()=>this._state.setPositions(1,{x:.5,y:.5})}}return t.\u0275fac=function(n){return new(n||t)(o.Pb(s.a))},t.\u0275cmp=o.Jb({type:t,selectors:[["explore-zoom-controls"]],decls:9,vars:0,consts:[["mat-icon-button","",1,"bg-white",3,"click"],["className","material-icons"]],template:function(t,n){1&t&&(o.Vb(0,"button",0),o.fc("click",(function(){return n.zoomIn()})),o.Vb(1,"app-icon",1),o.Lc(2,"add"),o.Ub(),o.Ub(),o.Vb(3,"button",0),o.fc("click",(function(){return n.zoomOut()})),o.Vb(4,"app-icon",1),o.Lc(5,"remove"),o.Ub(),o.Ub(),o.Vb(6,"button",0),o.fc("click",(function(){return n.reset()})),o.Vb(7,"app-icon",1),o.Lc(8,"autorenew"),o.Ub(),o.Ub())},directives:[i.b,r.a],styles:["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                padding: .5rem;\n            }\n\n            button[_ngcontent-%COMP%] {\n                border: 1px solid #ccc;\n                border-radius: 0;\n            }\n\n            button[_ngcontent-%COMP%]:first-child {\n                border-radius: 0.25rem 0.25rem 0 0;\n                border-bottom: none;\n            }\n\n            button[_ngcontent-%COMP%]:last-child {\n                border-radius: 0 0 0.25rem 0.25rem;\n                border-top: none;\n            }"]}),t})()},mjT4:function(t,n,e){"use strict";e.d(n,"a",(function(){return y})),e.d(n,"c",(function(){return I.a})),e.d(n,"b",(function(){return k}));var o=e("MIKl"),s=e("EM62"),i=e("2kYt"),r=e("nIj0"),c=e("29Wa"),a=e("Cd2c"),l=e("+Tre");function b(t,n){1&t&&(s.Vb(0,"mat-error"),s.Lc(1,"Name is required"),s.Ub())}function u(t,n){if(1&t&&(s.Vb(0,"div",4),s.Vb(1,"label",5),s.Lc(2,"Name"),s.Vb(3,"span"),s.Lc(4,"*"),s.Ub(),s.Lc(5,":"),s.Ub(),s.Vb(6,"mat-form-field",6),s.Qb(7,"input",7),s.Jc(8,b,2,0,"mat-error",8),s.Ub(),s.Ub()),2&t){const t=s.jc(2);s.Db(1),s.Hb("error",t.form.controls.name.invalid&&t.form.controls.name.touched),s.Db(7),s.pc("ngIf",t.form.controls.name.invalid)}}function m(t,n){1&t&&(s.Vb(0,"mat-error"),s.Lc(1,"A valid email is required"),s.Ub())}function p(t,n){if(1&t&&(s.Vb(0,"div",4),s.Vb(1,"label",9),s.Lc(2,"Email"),s.Vb(3,"span"),s.Lc(4,"*"),s.Ub(),s.Lc(5,":"),s.Ub(),s.Vb(6,"mat-form-field",6),s.Qb(7,"input",10),s.Jc(8,m,2,0,"mat-error",8),s.Ub(),s.Ub()),2&t){const t=s.jc(2);s.Db(1),s.Hb("error",t.form.controls.email.invalid&&t.form.controls.email.touched),s.Db(7),s.pc("ngIf",t.form.controls.email.invalid)}}function f(t,n){1&t&&(s.Vb(0,"mat-error"),s.Lc(1,"Organisation is required"),s.Ub())}function d(t,n){if(1&t&&(s.Vb(0,"div",4),s.Vb(1,"label",11),s.Lc(2,"Organisation"),s.Vb(3,"span"),s.Lc(4,"*"),s.Ub(),s.Lc(5,":"),s.Ub(),s.Vb(6,"mat-form-field",6),s.Qb(7,"input",12),s.Jc(8,f,2,0,"mat-error",8),s.Ub(),s.Ub()),2&t){const t=s.jc(2);s.Db(1),s.Hb("error",t.form.controls.organisation.invalid&&t.form.controls.organisation.touched),s.Db(7),s.pc("ngIf",t.form.controls.organisation.invalid)}}function h(t,n){1&t&&(s.Vb(0,"mat-error"),s.Lc(1,"Phone format is invalid"),s.Ub())}function _(t,n){if(1&t&&(s.Vb(0,"div",4),s.Vb(1,"label",13),s.Lc(2,"Phone:"),s.Ub(),s.Vb(3,"mat-form-field",6),s.Qb(4,"input",14),s.Jc(5,h,2,0,"mat-error",8),s.Ub(),s.Ub()),2&t){const t=s.jc(2);s.Db(1),s.Hb("error",t.form.controls.phone.invalid&&t.form.controls.phone.touched),s.Db(4),s.pc("ngIf",t.form.controls.phone.invalid)}}function g(t,n){1&t&&(s.Vb(0,"div",4),s.Vb(1,"mat-checkbox",15),s.Lc(2,"Assistance required"),s.Ub(),s.Ub())}function v(t,n){1&t&&(s.Vb(0,"div",4),s.Vb(1,"mat-checkbox",16),s.Lc(2,"Visit expected"),s.Ub(),s.Ub())}function O(t,n){if(1&t&&(s.Vb(0,"div",1),s.Vb(1,"form",2),s.Jc(2,u,9,3,"div",3),s.Jc(3,p,9,3,"div",3),s.Jc(4,d,9,3,"div",3),s.Jc(5,_,6,3,"div",3),s.Jc(6,g,3,0,"div",3),s.Jc(7,v,3,0,"div",3),s.Ub(),s.Ub()),2&t){const t=s.jc();s.Db(1),s.pc("formGroup",t.form),s.Db(1),s.pc("ngIf",t.form.controls.name),s.Db(1),s.pc("ngIf",t.form.controls.email),s.Db(1),s.pc("ngIf",t.form.controls.organisation),s.Db(1),s.pc("ngIf",t.form.controls.phone),s.Db(1),s.pc("ngIf",t.form.controls.assistance_required),s.Db(1),s.pc("ngIf",t.form.controls.visit_expected)}}let V=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=s.Jb({type:t,selectors:[["user-form"]],inputs:{form:"form"},decls:1,vars:1,consts:[["class","user form",4,"ngIf"],[1,"user","form"],[3,"formGroup"],["class","field",4,"ngIf"],[1,"field"],["for","name"],["appearance","outline"],["matInput","","name","name","placeholder","Name","formControlName","name"],[4,"ngIf"],["for","email"],["matInput","","name","email","placeholder","Email Address","formControlName","email"],["for","organisation"],["matInput","","name","organisation","placeholder","Organisation","formControlName","organisation"],["for","phone"],["matInput","","name","phone","placeholder","Phone","formControlName","phone"],["color","primary","formControlName","assistance_required"],["color","primary","formControlName","visit_expected"]],template:function(t,n){1&t&&s.Jc(0,O,8,7,"div",0),2&t&&s.pc("ngIf",n.form)},directives:[i.n,r.r,r.m,r.g,c.c,a.b,r.c,r.l,r.e,c.b,l.a],styles:["label[_ngcontent-%COMP%]{min-width:100%;margin-right:1em;font-weight:700;font-size:.8em;width:100%;margin-top:0;margin-bottom:.5em}label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--pending)}label.error[_ngcontent-%COMP%]{color:var(--error)}.field[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),t})();e("/It1"),e("20lr"),e("xuqh"),e("vobO"),e("mqs+");class y{constructor(t){this.type=t.type||t.location||"other",this.position=t.position||t.map_id||{x:t.x/t.map_width,y:t.y/t.map_height},this.variance=t.variance||0,this.last_seen=t.last_seen||Math.floor((new Date).valueOf()/1e3),this.level=t.level,this.building=t.building,this.at_location=!!t.at_location}}e("D57K");var I=e("Vai6"),w=(e("HTl7"),e("OZ4H")),U=e("Rc+I"),j=e("PBFl"),x=e("ukpX"),M=e("csyo");let k=(()=>{class t{}return t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({factory:function(n){return new(n||t)},imports:[[i.c,r.h,r.p,w.f,U.b,l.b]]}),t})();s.Bc(o.a,[w.h,j.b,w.d,x.a,w.e,i.n,V,w.c,M.b],[])}}]);
//# sourceMappingURL=default~desks-desks-module~facilities-facilities-module.91a616d2095e45ef6484.js.map