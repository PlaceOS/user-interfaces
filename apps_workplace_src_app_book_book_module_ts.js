(self.webpackChunkplaceos=self.webpackChunkplaceos||[]).push([["apps_workplace_src_app_book_book_module_ts"],{3986:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BookModule:()=>Ut});var i=n(1511),o=n(6073),s=n(9861),a=n(4230),l=n(2619),r=n(1522),c=n(4621);
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
const u=["button"],d=["*"],g=new l.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),p=new l.OlP("MatButtonToggleGroup"),m={provide:o.JU,useExisting:(0,l.Gpc)(()=>_),multi:!0};let h=0;class f{constructor(e,t){this.source=e,this.value=t}}let _=(()=>{class e{constructor(e,t){this._changeDetector=e,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+h++,this.valueChange=new l.vpe,this.change=new l.vpe,this.appearance=t&&t.appearance?t.appearance:"standard"}get name(){return this._name}set name(e){this._name=e,this._buttonToggles&&this._buttonToggles.forEach(e=>{e.name=this._name,e._markForCheck()})}get vertical(){return this._vertical}set vertical(e){this._vertical=(0,s.Ig)(e)}get value(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(e=>e.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}get selected(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=(0,s.Ig)(e)}get disabled(){return this._disabled}set disabled(e){this._disabled=(0,s.Ig)(e),this._buttonToggles&&this._buttonToggles.forEach(e=>e._markForCheck())}ngOnInit(){this._selectionModel=new a.Ov(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked))}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_emitChangeEvent(){const e=this.selected,t=Array.isArray(e)?e[e.length-1]:e,n=new f(t,this.value);this._controlValueAccessorChangeFn(n.value),this.change.emit(n)}_syncButtonToggle(e,t,n=!1,i=!1){this.multiple||!this.selected||e.checked||(this.selected.checked=!1),this._selectionModel?t?this._selectionModel.select(e):this._selectionModel.deselect(e):i=!0,i?Promise.resolve().then(()=>this._updateModelValue(n)):this._updateModelValue(n)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return void 0!==this._rawValue&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(t=>null!=e.value&&t===e.value):e.value===this._rawValue)}_setSelectionByValue(e){this._rawValue=e,this._buttonToggles&&(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(e=>this._selectValue(e))):(this._clearSelection(),this._selectValue(e)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>e.checked=!1)}_selectValue(e){const t=this._buttonToggles.find(t=>null!=t.value&&t.value===e);t&&(t.checked=!0,this._selectionModel.select(t))}_updateModelValue(e){e&&this._emitChangeEvent(),this.valueChange.emit(this.value)}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(l.sBO),l.Y36(g,8))},e.\u0275dir=l.lG2({type:e,selectors:[["mat-button-toggle-group"]],contentQueries:function(e,t,n){if(1&e&&l.Suo(n,b,5),2&e){let e;l.iGM(e=l.CRH())&&(t._buttonToggles=e)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(e,t){2&e&&(l.uIk("aria-disabled",t.disabled),l.ekj("mat-button-toggle-vertical",t.vertical)("mat-button-toggle-group-appearance-standard","standard"===t.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[l._Bn([m,{provide:p,useExisting:e}])]}),e})();class v{}const Z=(0,r.Kr)(v);let b=(()=>{class e extends Z{constructor(e,t,n,i,o,s){super(),this._changeDetectorRef=t,this._elementRef=n,this._focusMonitor=i,this._isSingleSelector=!1,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new l.vpe;const a=Number(o);this.tabIndex=a||0===a?a:null,this.buttonToggleGroup=e,this.appearance=s&&s.appearance?s.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){const t=(0,s.Ig)(e);t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=(0,s.Ig)(e)}ngOnInit(){const e=this.buttonToggleGroup;this._isSingleSelector=e&&!e.multiple,this.id=this.id||"mat-button-toggle-"+h++,this._isSingleSelector&&(this.name=e.name),e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){const e=!!this._isSingleSelector||!this._checked;e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new f(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(p,8),l.Y36(l.sBO),l.Y36(l.SBq),l.Y36(c.tE),l.$8M("tabindex"),l.Y36(g,8))},e.\u0275cmp=l.Xpm({type:e,selectors:[["mat-button-toggle"]],viewQuery:function(e,t){if(1&e&&l.Gf(u,5),2&e){let e;l.iGM(e=l.CRH())&&(t._buttonElement=e.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(e,t){1&e&&l.NdJ("focus",function(){return t.focus()}),2&e&&(l.uIk("aria-label",null)("aria-labelledby",null)("id",t.id)("name",null),l.ekj("mat-button-toggle-standalone",!t.buttonToggleGroup)("mat-button-toggle-checked",t.checked)("mat-button-toggle-disabled",t.disabled)("mat-button-toggle-appearance-standard","standard"===t.appearance))},inputs:{disableRipple:"disableRipple",ariaLabelledby:["aria-labelledby","ariaLabelledby"],tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled",id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],value:"value"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[l.qOj],ngContentSelectors:d,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(e,t){if(1&e&&(l.F$t(),l.TgZ(0,"button",0,1),l.NdJ("click",function(){return t._onButtonClick()}),l.TgZ(2,"span",2),l.Hsn(3),l.qZA(),l.qZA(),l._UZ(4,"span",3),l._UZ(5,"span",4)),2&e){const e=l.MAs(1);l.Q6J("id",t.buttonId)("disabled",t.disabled||null),l.uIk("tabindex",t.disabled?-1:t.tabIndex)("aria-pressed",t.checked)("name",t.name||null)("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledby),l.xp6(5),l.Q6J("matRippleTrigger",e)("matRippleDisabled",t.disableRipple||t.disabled)}},directives:[r.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}\n"],encapsulation:2,changeDetection:0}),e})(),x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[r.BQ,r.si],r.BQ]}),e})();
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var w=n(6898),A=n(4892),y=n(2142);let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Xpm({type:e,selectors:[["placeos-book"]],decls:5,vars:0,consts:[[1,"flex-1","flex","sm:flex-row","flex-col-reverse","h-1/2"],[1,"relative","z-10"],[1,"relative","flex","flex-col","flex-1","h-1/2","sm:h-auto","overflow-hidden"]],template:function(e,t){1&e&&(l._UZ(0,"topbar"),l.TgZ(1,"div",0),l._UZ(2,"nav-menu",1),l.TgZ(3,"main",2),l._UZ(4,"router-outlet"),l.qZA(),l.qZA())},directives:[A.o,y.D,w.lC],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}"]}),e})();class k{static hasCamera(){return navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then(e=>e.some(e=>"videoinput"===e.kind)).catch(()=>!1):Promise.resolve(!1)}constructor(e,t,n=this._onDecodeError.bind(this),i=k.DEFAULT_CANVAS_SIZE,o="environment"){this.$video=e,this.$canvas=document.createElement("canvas"),this._onDecode=t,this._preferredFacingMode=o,this._active=!1,this._paused=!1,this._flashOn=!1,"number"==typeof n?(i=n,console.warn("You're using a deprecated version of the QrScanner constructor which will be removed in the future")):this._onDecodeError=n,this.$canvas.width=i,this.$canvas.height=i,this._sourceRect={x:0,y:0,width:i,height:i},this._updateSourceRect=this._updateSourceRect.bind(this),this._onPlay=this._onPlay.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this.$video.playsInline=!0,this.$video.muted=!0,this.$video.disablePictureInPicture=!0,this.$video.addEventListener("loadedmetadata",this._updateSourceRect),this.$video.addEventListener("play",this._onPlay),document.addEventListener("visibilitychange",this._onVisibilityChange),this._qrEnginePromise=k.createQrEngine()}hasFlash(){if(!("ImageCapture"in window))return Promise.resolve(!1);const e=this.$video.srcObject?this.$video.srcObject.getVideoTracks()[0]:null;return e?new ImageCapture(e).getPhotoCapabilities().then(e=>e.fillLightMode.includes("flash")).catch(e=>(console.warn(e),!1)):Promise.reject("Camera not started or not available")}isFlashOn(){return this._flashOn}toggleFlash(){return this._setFlash(!this._flashOn)}turnFlashOff(){return this._setFlash(!1)}turnFlashOn(){return this._setFlash(!0)}destroy(){this.$video.removeEventListener("loadedmetadata",this._updateSourceRect),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),this.stop(),k._postWorkerMessage(this._qrEnginePromise,"close")}start(){if(this._active&&!this._paused)return Promise.resolve();if("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,this._paused=!1,document.hidden)return Promise.resolve();if(clearTimeout(this._offTimeout),this._offTimeout=null,this.$video.srcObject)return this.$video.play(),Promise.resolve();let e=this._preferredFacingMode;return this._getCameraStream(e,!0).catch(()=>(e="environment"===e?"user":"environment",this._getCameraStream())).then(t=>{e=this._getFacingMode(t)||e,this.$video.srcObject=t,this.$video.play(),this._setVideoMirror(e)}).catch(e=>{throw this._active=!1,e})}stop(){this.pause(),this._active=!1}pause(){this._paused=!0,this._active&&(this.$video.pause(),this._offTimeout||(this._offTimeout=setTimeout(()=>{const e=this.$video.srcObject?this.$video.srcObject.getTracks():[];for(const t of e)t.stop();this.$video.srcObject=null,this._offTimeout=null},300)))}static scanImage(e,t=null,n=null,i=null,o=!1,s=!1){const a=n instanceof Worker;let l=Promise.all([n||k.createQrEngine(),k._loadImage(e)]).then(([e,s])=>{let l;return n=e,[i,l]=this._drawToCanvas(s,t,i,o),n instanceof Worker?(a||n.postMessage({type:"inversionMode",data:"both"}),new Promise((e,t)=>{let o,s,a;s=i=>{"qrResult"===i.data.type&&(n.removeEventListener("message",s),n.removeEventListener("error",a),clearTimeout(o),null!==i.data.data?e(i.data.data):t(k.NO_QR_CODE_FOUND))},a=e=>{n.removeEventListener("message",s),n.removeEventListener("error",a),clearTimeout(o),t("Scanner error: "+(e?e.message||e:"Unknown Error"))},n.addEventListener("message",s),n.addEventListener("error",a),o=setTimeout(()=>a("timeout"),1e4);const r=l.getImageData(0,0,i.width,i.height);n.postMessage({type:"decode",data:r},[r.data.buffer])})):new Promise((e,t)=>{const o=setTimeout(()=>t("Scanner error: timeout"),1e4);n.detect(i).then(n=>{n.length?e(n[0].rawValue):t(k.NO_QR_CODE_FOUND)}).catch(e=>t("Scanner error: "+(e.message||e))).finally(()=>clearTimeout(o))})});return t&&s&&(l=l.catch(()=>k.scanImage(e,null,n,i,o))),l=l.finally(()=>{a||k._postWorkerMessage(n,"close")}),l}setGrayscaleWeights(e,t,n,i=!0){k._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:t,blue:n,useIntegerApproximation:i})}setInversionMode(e){k._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static createQrEngine(e=k.WORKER_PATH){return("BarcodeDetector"in window?BarcodeDetector.getSupportedFormats():Promise.resolve([])).then(t=>-1!==t.indexOf("qr_code")?new BarcodeDetector({formats:["qr_code"]}):new Worker(e))}_onPlay(){this._updateSourceRect(),this._scanFrame()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_updateSourceRect(){const e=Math.min(this.$video.videoWidth,this.$video.videoHeight),t=Math.round(2/3*e);this._sourceRect.width=this._sourceRect.height=t,this._sourceRect.x=(this.$video.videoWidth-t)/2,this._sourceRect.y=(this.$video.videoHeight-t)/2}_scanFrame(){if(!this._active||this.$video.paused||this.$video.ended)return!1;requestAnimationFrame(()=>{this.$video.readyState<=1?this._scanFrame():this._qrEnginePromise.then(e=>k.scanImage(this.$video,this._sourceRect,e,this.$canvas,!0)).then(this._onDecode,e=>{this._active&&(-1!==(e.message||e).indexOf("service unavailable")&&(this._qrEnginePromise=k.createQrEngine()),this._onDecodeError(e))}).then(()=>this._scanFrame())})}_onDecodeError(e){e!==k.NO_QR_CODE_FOUND&&console.log(e)}_getCameraStream(e,t=!1){const n=[{width:{min:1024}},{width:{min:768}},{}];return e&&(t&&(e={exact:e}),n.forEach(t=>t.facingMode=e)),this._getMatchingCameraStream(n)}_getMatchingCameraStream(e){return navigator.mediaDevices&&0!==e.length?navigator.mediaDevices.getUserMedia({video:e.shift()}).catch(()=>this._getMatchingCameraStream(e)):Promise.reject("Camera not found.")}_setFlash(e){return this.hasFlash().then(t=>t?this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:e}]}):Promise.reject("No flash available")).then(()=>this._flashOn=e)}_setVideoMirror(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}_getFacingMode(e){const t=e.getVideoTracks()[0];return t?/rear|back|environment/i.test(t.label)?"environment":/front|user|face/i.test(t.label)?"user":null:null}static _drawToCanvas(e,t=null,n=null,i=!1){n=n||document.createElement("canvas");const o=t&&t.x?t.x:0,s=t&&t.y?t.y:0,a=t&&t.width?t.width:e.width||e.videoWidth,l=t&&t.height?t.height:e.height||e.videoHeight;i||n.width===a&&n.height===l||(n.width=a,n.height=l);const r=n.getContext("2d",{alpha:!1});return r.imageSmoothingEnabled=!1,r.drawImage(e,o,s,a,l,0,0,n.width,n.height),[n,r]}static _loadImage(e){if(e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||window.ImageBitmap&&e instanceof window.ImageBitmap||window.OffscreenCanvas&&e instanceof window.OffscreenCanvas)return Promise.resolve(e);if(e instanceof Image)return k._awaitImageLoad(e).then(()=>e);if(e instanceof File||e instanceof Blob||e instanceof URL||"string"==typeof e){const t=new Image;return t.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e,k._awaitImageLoad(t).then(()=>((e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(t.src),t))}return Promise.reject("Unsupported image type.")}static _awaitImageLoad(e){return new Promise((t,n)=>{if(e.complete&&0!==e.naturalWidth)t();else{let i,o;i=()=>{e.removeEventListener("load",i),e.removeEventListener("error",o),t()},o=()=>{e.removeEventListener("load",i),e.removeEventListener("error",o),n("Image load error")},e.addEventListener("load",i),e.addEventListener("error",o)}})}static _postWorkerMessage(e,t,n){return Promise.resolve(e).then(e=>{e instanceof Worker&&e.postMessage({type:t,data:n})})}}k.DEFAULT_CANVAS_SIZE=400,k.NO_QR_CODE_FOUND="No QR code found",k.WORKER_PATH="qr-scanner-worker.min.js";var q=n(6756),M=n(5980);const O=["video"];function U(e,t){1&e&&(l.TgZ(0,"div",11),l.TgZ(1,"h2",12),l._uU(2," Scan QR Code "),l.qZA(),l.TgZ(3,"span",13),l._uU(4," Scan the QR code outisde a PlaceOS room or space. "),l.qZA(),l.qZA())}function C(e,t){1&e&&(l.TgZ(0,"div",11),l.TgZ(1,"h2",12),l._uU(2," Enter Room ID "),l.qZA(),l.TgZ(3,"span",13),l._uU(4," Enter the room ID number outisde a PlaceOS room or space. "),l.qZA(),l.qZA())}let J=(()=>{class e{constructor(e){this._router=e,this.is_scanning=!0,this.menu=new l.vpe(!1)}ngOnDestroy(){this._video_el.nativeElement.srcObject&&this._video_el.nativeElement.srcObject.getTracks().forEach(e=>null==e?void 0:e.stop()),this._qr_scanner.stop()}ngOnInit(){navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(e=>this._video_el.nativeElement.srcObject=e).catch(e=>console.error("Unable to fetch media devices!",e)),this._qr_scanner=new k(this._video_el.nativeElement,e=>this.handleQrCode(e)),this._qr_scanner.start()}handleQrCode(e){const t=e;if(t.indexOf("/#/")>0){const e=/[?&]([^=#]+)=([^&#]*)/g,n={};let i;for(;i=e.exec(t);)n[i[1]]=i[2];this._router.navigate([t.split("/#")[1].split("?")[0]],n)}}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(w.F0))},e.\u0275cmp=l.Xpm({type:e,selectors:[["book-code-flow"]],viewQuery:function(e,t){if(1&e&&l.Gf(O,7),2&e){let e;l.iGM(e=l.CRH())&&(t._video_el=e.first)}},outputs:{menu:"menu"},decls:16,vars:9,consts:[[1,"flex-1","overflow-hidden","flex","items-center","justify-center","bg-black","relative"],["id","video",1,"min-w-full","min-h-full","object-cover"],["video",""],[1,"absolute","text-white","text-center","inset-0","flex","flex-col","items-center","justify-center"],["class","flex flex-col z-10 justify-end items-center relative",4,"ngIf"],[1,"flex","items-center","justify-center"],["box","",1,"rounded-2xl","h-64","w-64","transition-all","flex","items-center","justify-center","p-8","m-8","space-x-2"],[1,"uppercase"],["matInput","","name","booking-id","placeholder","e.g. 12102910",1,"border-none","bg-none","w-full","text-3xl","text-left",3,"ngModel","ngModelChange"],[1,"m-4","p-2","flex","items-center","space-x-2","bg-white","bg-opacity-50","rounded"],["mat-button","",3,"click"],[1,"flex","flex-col","z-10","justify-end","items-center","relative"],[1,"text-3xl","mb-1","uppercase","subpixel-antialiased"],[1,"mb-4"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l._UZ(1,"video",1,2),l.TgZ(3,"div",3),l.YNc(4,U,5,0,"div",4),l.YNc(5,C,5,0,"div",4),l.TgZ(6,"div",5),l.TgZ(7,"div",6),l.TgZ(8,"span",7),l._uU(9,"Booking ID"),l.qZA(),l.TgZ(10,"input",8),l.NdJ("ngModelChange",function(e){return t.room_code=e}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"div",9),l.TgZ(12,"button",10),l.NdJ("click",function(){return t.is_scanning=!0}),l._uU(13," Scan Code "),l.qZA(),l.TgZ(14,"button",10),l.NdJ("click",function(){return t.is_scanning=!1}),l._uU(15," Enter Code "),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(4),l.Q6J("ngIf",t.is_scanning),l.xp6(1),l.Q6J("ngIf",!t.is_scanning),l.xp6(2),l.ekj("input",!t.is_scanning),l.xp6(3),l.Q6J("ngModel",t.room_code),l.xp6(2),l.Tol("flex-1 text-black border-none w-40 "+(t.is_scanning?"bg-white":"bg-transparent hover:bg-white bg-opacity-50")),l.xp6(2),l.Tol("flex-1 text-black border-none w-40 "+(t.is_scanning?"bg-transparent hover:bg-white bg-opacity-50":"bg-white")))},directives:[i.O5,q.Nt,o.Fj,o.JJ,o.On,M.lW],styles:["[_nghost-%COMP%]{width:100%;height:100vh;display:flex;flex-direction:column}[box][_ngcontent-%COMP%]{box-shadow:0 0 0 100vw rgba(0,0,0,.5)}[box][_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:none}[box].input[_ngcontent-%COMP%]{width:32rem!important;max-width:calc(100% - 2rem)!important;padding:1rem!important;height:4rem!important;color:#000!important;background:#fff;box-shadow:0 0 0 100vw rgba(0,0,0,.8)}[box].input[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:initial}[box][_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:var(--heading-font);font-weight:500;text-transform:uppercase;letter-spacing:.05em}"]}),e})();var Q=n(4762),F=n(9962),N=n(3530),L=n(8142),E=n(9294),D=n(4441),I=n(3080),S=n(8512),j=n(6238),P=n(9996),B=n(7701),Y=n(859),$=n(1548),R=n(8055),V=n(6283),G=n(4786);const z=function(){return{standalone:!0}};function H(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",12),l.TgZ(1,"mat-button-toggle-group",13),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw(2).setOptions({group:"group"===t})}),l.ALo(2,"async"),l.TgZ(3,"mat-button-toggle",14),l._uU(4," Single "),l.qZA(),l.TgZ(5,"mat-button-toggle",15),l._uU(6," Group "),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw(2);let t;l.xp6(1),l.Q6J("ngModel",null!=(t=l.lcZ(2,2,e.options))&&t.group?"group":"single")("ngModelOptions",l.DdM(4,z))}}function W(e,t){if(1&e&&(l.TgZ(0,"mat-option",19),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.Q6J("value",e),l.xp6(1),l.hij(" ",e.display_name||e.name," ")}}function X(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",4),l.TgZ(1,"label"),l._uU(2,"Building"),l.qZA(),l.TgZ(3,"mat-form-field",16),l.TgZ(4,"mat-select",17),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw(2).building=t})("ngModelChange",function(t){return l.CHM(e),l.oxw(2).setOptions({zone_id:null==t?null:t.id})}),l.YNc(5,W,2,2,"mat-option",18),l.ALo(6,"async"),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw(2);l.xp6(4),l.Q6J("ngModel",e.building)("ngModelOptions",l.DdM(5,z)),l.xp6(1),l.Q6J("ngForOf",l.lcZ(6,3,e.buildings))}}function K(e,t){if(1&e&&(l.TgZ(0,"mat-option",19),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.Q6J("value",e.id),l.xp6(1),l.hij(" ",e.display_name||e.name," ")}}function ee(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",4),l.TgZ(1,"label"),l._uU(2,"Level"),l.qZA(),l.TgZ(3,"mat-form-field",16),l.TgZ(4,"mat-select",20),l.NdJ("ngModelChange",function(t){l.CHM(e);const n=l.oxw(2);return n.setOptions({zone_id:t||n.building.id})}),l.YNc(5,K,2,2,"mat-option",18),l.ALo(6,"async"),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw(2);l.xp6(4),l.Q6J("disabled",!e.building)("ngModelOptions",l.DdM(5,z)),l.xp6(1),l.Q6J("ngForOf",l.lcZ(6,3,e.levels))}}const te=function(){return[]};function ne(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",7),l.TgZ(1,"label"),l._uU(2,"Group Members"),l.qZA(),l.TgZ(3,"a-user-list-field",21),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw(2).setOptions({members:t})}),l.ALo(4,"async"),l.qZA(),l.qZA()}if(2&e){const e=l.oxw(2);let t;l.xp6(3),l.Q6J("simple",!0)("ngModel",(null==(t=l.lcZ(4,3,e.options))?null:t.members)||l.DdM(5,te))("ngModelOptions",l.DdM(6,z))}}function ie(e,t){if(1&e&&(l.TgZ(0,"mat-option",19),l.TgZ(1,"span",26),l._uU(2),l.qZA(),l.qZA()),2&e){const e=t.$implicit;l.Q6J("value",e),l.xp6(2),l.Oqu(e)}}function oe(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",3),l.TgZ(1,"div",22),l.TgZ(2,"label"),l._uU(3,"Recurrence Period"),l.qZA(),l.TgZ(4,"mat-form-field",16),l.TgZ(5,"mat-select",23),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw(2).setOptions({pattern:t})}),l.ALo(6,"async"),l.TgZ(7,"mat-option",24),l._uU(8,"None"),l.qZA(),l.YNc(9,ie,3,2,"mat-option",18),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"div",22),l.TgZ(11,"label"),l._uU(12,"Recurrence End"),l.qZA(),l.TgZ(13,"a-date-field",25),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw(2).setOptions({recurr_end:t})}),l.ALo(14,"async"),l.ALo(15,"async"),l.ALo(16,"async"),l._uU(17," Date and time must be in the future "),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw(2);let t,n,i;l.xp6(5),l.Q6J("ngModel",null==(t=l.lcZ(6,6,e.options))?null:t.recurrence_pattern)("ngModelOptions",l.DdM(14,z)),l.xp6(4),l.Q6J("ngForOf",e.recurrence_options),l.xp6(4),l.Q6J("disabled",!(null!=(n=l.lcZ(14,8,e.options))&&n.pattern)||"none"===(null==(n=l.lcZ(15,10,e.options))?null:n.pattern))("ngModel",(null==(i=l.lcZ(16,12,e.options))?null:i.recurr_end)||(null==e.form||null==e.form.value?null:e.form.value.date))("ngModelOptions",l.DdM(15,z))}}function se(e,t){if(1&e&&(l.TgZ(0,"mat-option",29),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.Q6J("value",e),l.xp6(1),l.hij(" ",e," ")}}function ae(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",7),l.TgZ(1,"label"),l._uU(2,"Desk Features"),l.qZA(),l.TgZ(3,"mat-form-field",8),l.TgZ(4,"mat-select",27),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw(2).setOptions({features:t||[]})}),l.ALo(5,"async"),l.YNc(6,se,2,2,"mat-option",28),l.ALo(7,"async"),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw(2);let t;l.xp6(4),l.Q6J("ngModel",(null==(t=l.lcZ(5,3,e.options))?null:t.features)||l.DdM(7,te))("ngModelOptions",l.DdM(8,z)),l.xp6(2),l.Q6J("ngForOf",l.lcZ(7,5,e.features))}}function le(e,t){if(1&e&&(l.TgZ(0,"form",1),l.YNc(1,H,7,5,"div",2),l.TgZ(2,"div",3),l.TgZ(3,"div",4),l.TgZ(4,"label"),l._uU(5,"Date"),l.qZA(),l.TgZ(6,"a-date-field",5),l._uU(7," Date and time must be in the future "),l.qZA(),l.qZA(),l.YNc(8,X,7,6,"div",6),l.ALo(9,"async"),l.YNc(10,ee,7,6,"div",6),l.ALo(11,"async"),l.qZA(),l.TgZ(12,"div",7),l.TgZ(13,"label"),l._uU(14,"Reason"),l.qZA(),l.TgZ(15,"mat-form-field",8),l._UZ(16,"input",9),l.qZA(),l.qZA(),l.YNc(17,ne,5,7,"div",10),l.ALo(18,"async"),l.YNc(19,oe,18,16,"div",11),l.YNc(20,ae,8,9,"div",10),l.ALo(21,"async"),l.qZA()),2&e){const e=l.oxw();let t,n,i,o;l.Q6J("formGroup",e.form),l.xp6(1),l.Q6J("ngIf",e.allow_groups),l.xp6(7),l.Q6J("ngIf",(null==(t=l.lcZ(9,7,e.buildings))?null:t.length)>1),l.xp6(2),l.Q6J("ngIf",(null==(n=l.lcZ(11,9,e.levels))?null:n.length)>1),l.xp6(7),l.Q6J("ngIf",null==(i=l.lcZ(18,11,e.options))?null:i.group),l.xp6(2),l.Q6J("ngIf",e.can_recurr),l.xp6(1),l.Q6J("ngIf",null==(o=l.lcZ(21,13,e.features))?null:o.length)}}let re=(()=>{class e{constructor(e,t,n){this._state=e,this._org=t,this._settings=n,this.buildings=this._org.building_list,this.levels=this._org.active_levels,this.options=this._state.options,this.features=this._state.features,this.recurrence_options=["daily","weekly","monthly"],this.setOptions=e=>this._state.setOptions(e)}get building(){return this._org.building}set building(e){this._org.building=e}get can_recurr(){return this._settings.get("app.desks.recurrence_allowed")}get allow_groups(){return this._settings.get("app.desks.allow_groups")}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(L.x4),l.Y36(E.w7),l.Y36(F.gb))},e.\u0275cmp=l.Xpm({type:e,selectors:[["detailed-book-desks-form"]],inputs:{form:"form"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["class","w-[640px] max-w-[calc(100%-2rem)] mx-auto mb-4",4,"ngIf"],[1,"flex","flex-col","sm:flex-row","space-x-0","sm:space-x-2","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],[1,"flex","flex-col","flex-1","w-full","sm:w-1/4"],["formControlName","date"],["class","flex flex-col flex-1 w-full sm:w-1/4",4,"ngIf"],[1,"flex","flex-col","flex-1","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],["appearance","outline",1,"w-full"],["matInput","","formControlName","description","placeholder","Reason for booking..."],["class","flex flex-col flex-1 w-[640px] max-w-[calc(100%-2rem)] mx-auto",4,"ngIf"],["class","flex flex-col sm:flex-row space-x-0 sm:space-x-2 w-[640px] max-w-[calc(100%-2rem)] mx-auto",4,"ngIf"],[1,"w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","mb-4"],[1,"w-full",3,"ngModel","ngModelOptions","ngModelChange"],["value","single",1,"w-1/2"],["value","group",1,"w-1/2"],["appearance","outline"],["placeholder","Select building",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placeholder","Any Level","ngModel","",3,"disabled","ngModelOptions","ngModelChange"],[3,"simple","ngModel","ngModelOptions","ngModelChange"],[1,"flex","flex-col","flex-1","w-full","sm:w-1/3"],["placeholder","None",3,"ngModel","ngModelOptions","ngModelChange"],["value","none"],[3,"disabled","ngModel","ngModelOptions","ngModelChange"],[1,"capitalize"],["multiple","","placeholder","Any Feature",3,"ngModel","ngModelOptions","ngModelChange"],["class","capitalize",3,"value",4,"ngFor","ngForOf"],[1,"capitalize",3,"value"]],template:function(e,t){1&e&&l.YNc(0,le,22,15,"form",0),2&e&&l.Q6J("ngIf",t.form)},directives:[i.O5,o._Y,o.JL,o.sg,o.JJ,o.u,V.KE,q.Nt,o.Fj,_,o.On,b,G.gD,i.sg,r.ey],pipes:[i.Ov],styles:[""]}),e})();var ce=n(7256),ue=n(7806);function de(e,t){if(1&e&&(l.TgZ(0,"div",27),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.xp6(1),l.hij(" ",e," ")}}const ge=function(){return[]};function pe(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"li",20),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw().setActiveDesk(t)}),l.TgZ(1,"app-icon",21),l._uU(2,"place"),l.qZA(),l.TgZ(3,"div",22),l.TgZ(4,"div",23),l._uU(5),l.qZA(),l.TgZ(6,"div",24),l._uU(7),l.qZA(),l.TgZ(8,"div",25),l.YNc(9,de,2,1,"div",26),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit,n=l.oxw();l.ekj("border-primary",(null==n.active_desk?null:n.active_desk.id)===e.id),l.uIk("desk-id",e.id),l.xp6(5),l.Oqu(e.name),l.xp6(2),l.hij(" ",(null==e.zone?null:e.zone.display_name)||e.zone.name||"<No Level>"," "),l.xp6(2),l.Q6J("ngForOf",e.features||l.DdM(6,ge))}}function me(e,t){if(1&e&&(l.TgZ(0,"div",28),l._uU(1),l.ALo(2,"async"),l.ALo(3,"async"),l.qZA()),2&e){const e=l.oxw();let t;l.xp6(1),l.hij(" ",(null==(t=l.lcZ(2,1,e.level))?null:t.display_name)||(null==(t=l.lcZ(3,3,e.level))?null:t.name)," ")}}function he(e,t){if(1&e&&(l.TgZ(0,"div",29),l._UZ(1,"mat-spinner",30),l.TgZ(2,"p"),l._uU(3),l.ALo(4,"async"),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("diameter",32),l.xp6(2),l.Oqu(l.lcZ(4,2,e.loading))}}function fe(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",31),l.TgZ(1,"div",32),l.TgZ(2,"div",23),l._uU(3),l.qZA(),l.TgZ(4,"div",24),l._uU(5),l.qZA(),l.qZA(),l.TgZ(6,"div",33),l.TgZ(7,"button",34),l.NdJ("click",function(){return l.CHM(e),l.oxw().setActiveDesk(null)}),l._uU(8," Clear "),l.qZA(),l.TgZ(9,"button",35),l.NdJ("click",function(){return l.CHM(e),l.oxw().makeBooking()}),l._uU(10," Book "),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(3),l.Oqu(e.active_desk.name),l.xp6(2),l.hij(" ",(null==e.active_desk.zone?null:e.active_desk.zone.display_name)||e.active_desk.zone.name||"<No Level>"," ")}}const _e=function(){return["/book","desks","form"]};let ve=(()=>{class e extends F.KG{constructor(e,t){super(),this._state=e,this._explore=t,this.url=this._explore.map_url,this.styles=this._explore.map_styles,this.positions=this._explore.map_positions,this.features=this._explore.map_features,this.actions=this._explore.map_actions,this.labels=this._explore.map_labels,this.level=this._explore.level,this.desks=this._state.available_assets,this.loading=this._state.loading,this.form=this._state.form,this.option_details=(0,I.aj)([this._state.options,this.form.valueChanges.pipe((0,j.O)({}))]).pipe((0,P.U)(([e])=>{var t,n;const i=this._state.form,o=(0,F.IO)({pattern:e.pattern,end:e.recurr_end,start:i.value.date,interval:1,days_of_week:-1}),s=`${(0,D.Z)(i.value.date,"dd MMM yyyy")}${e.pattern&&"none"!==e.pattern?", "+o:""}${e.group?", "+e.group:""}, ${(null===(t=e.features)||void 0===t?void 0:t.length)||"Any"} Feature${((null===(n=e.features)||void 0===n?void 0:n.length)||0)<2?"":"s"}`;return e.zone_id&&this._explore.setLevel(e.zone_id),s})),this._active_desk=new S.X(null),this.makeBooking=()=>this._state.confirmPost()}get active_desk(){return this._active_desk.getValue()}ngOnInit(){this.subscription("assets-statue",(0,I.aj)([this._state.assets,this._state.available_assets,this._active_desk]).pipe((0,B.b)(200)).subscribe(([e,t])=>{const n={},i=[];for(const o of e){const e=o.bookable&&t.find(e=>e.id===o.id);n[`#${o.map_id||o.id}`]={fill:o.bookable?t.find(e=>e.id===o.id)?"#43a047":"#e53935":"#999",opacity:.6},e&&i.push({id:o.map_id||o.id,action:"click",callback:()=>this.setActiveDesk(o)})}this._explore.setStyles("desks",n),this._explore.setActions("desks",i),this._explore.setFeatures("desks",this.active_desk?[{location:this.active_desk.map_id||this.active_desk.id,content:'\n                    <span class="flex h-2 w-2 rounded-full absolute top-1/4 left-1/4 transform -translate-x-1/2 -translate-y-1/2" >\n                        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>\n                        <span class="relative inline-flex rounded-full h-2 w-2 bg-primary"></span>\n                    </span>'}]:[])}))}setActiveDesk(e){var t;this._explore.setLevel(null===(t=null==e?void 0:e.zone)||void 0===t?void 0:t.id),this._active_desk.next(e),this._state.form.patchValue({asset_id:null==e?void 0:e.id})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(L.x4),l.Y36(Y.ck))},e.\u0275cmp=l.Xpm({type:e,selectors:[["desk-flow-map"]],features:[l.qOj],decls:38,vars:42,consts:[["topbar","",1,""],["button","","mat-button","",1,"clear","h-[2.75rem]","text-white",3,"routerLink"],[1,"flex","items-center","justify-center","h-full"],[1,"text-xl"],[1,"ml-2","mx-4"],[1,"flex","flex-col","flex-1","h-1/2","w-full"],[1,"text-2xl","px-4","pt-4","text-center"],[1,"my-4","mx-auto","w-[640px]","max-w-[calc(100vw-2rem)]",3,"matMenuTriggerFor"],["menu","matMenu"],[1,"pt-4","max-h-[65vh]","overflow-auto",3,"click"],[3,"form"],["listing","",1,"flex","flex-1","h-1/2","relative","space-x-2"],[1,"list-style-none","w-full","sm:w-[20rem]","bg-gray-100","p-2","pb-32","overflow-auto","h-full","rounded-tr-lg","space-y-2"],[1,"px-2","sticky","top-0","bg-gray-100","w-full","z-10"],["matRipple","","class","flex items-center p-2 bg-white rounded shadow cursor-pointer space-x-2 min-h-[5rem] border",3,"border-primary","click",4,"ngFor","ngForOf"],[1,"hidden","sm:block","flex-1","bg-gray-200","rounded-tl-lg","border-l","border-t","border-gray-300","relative","overflow-hidden","h-full"],[3,"src","zoom","center","styles","features","actions","labels","focus"],["class","absolute top-2 left-2 bg-white rounded-3xl h-10 px-3 flex items-center border border-gray-300",4,"ngIf"],["class","absolute inset-0 bg-white bg-opacity-60 flex flex-col items-center justify-center space-y-2 !m-0 z-20",4,"ngIf"],["selection","","class","absolute bottom-2 left-1/2 transform -translate-x-1/2 p-2 bg-white shadow rounded w-[24rem] max-w-[calc(100vw-1rem)] space-y-2 !m-0 border border-gray-200",4,"ngIf"],["matRipple","",1,"flex","items-center","p-2","bg-white","rounded","shadow","cursor-pointer","space-x-2","min-h-[5rem]","border",3,"click"],[1,"text-2xl"],[1,"flex","flex-col","w-1/2","flex-1"],["name","",1,""],["level","",1,"text-xs"],["features","",1,"w-full","flex","flex-wrap"],["class","text-xs bg-primary text-white rounded-xl px-2 py-1 mt-1 mr-2",4,"ngFor","ngForOf"],[1,"text-xs","bg-primary","text-white","rounded-xl","px-2","py-1","mt-1","mr-2"],[1,"absolute","top-2","left-2","bg-white","rounded-3xl","h-10","px-3","flex","items-center","border","border-gray-300"],[1,"absolute","inset-0","bg-white","bg-opacity-60","flex","flex-col","items-center","justify-center","space-y-2","!m-0","z-20"],[3,"diameter"],["selection","",1,"absolute","bottom-2","left-1/2","transform","-translate-x-1/2","p-2","bg-white","shadow","rounded","w-[24rem]","max-w-[calc(100vw-1rem)]","space-y-2","!m-0","border","border-gray-200"],[1,""],[1,"flex","items-center","space-x-2"],["mat-button","",1,"inverse","flex-1",3,"click"],["mat-button","",1,"flex-1",3,"click"]],template:function(e,t){if(1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"a",1),l.TgZ(2,"div",2),l.TgZ(3,"app-icon",3),l._uU(4,"arrow_back"),l.qZA(),l.TgZ(5,"span",4),l._uU(6,"Back"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"div",5),l.TgZ(8,"h2",6),l._uU(9,"Available Desks"),l.qZA(),l.TgZ(10,"an-action-field",7),l._uU(11),l.ALo(12,"async"),l.qZA(),l.TgZ(13,"mat-menu",null,8),l.TgZ(15,"div",9),l.NdJ("click",function(e){return e.stopPropagation(),e.preventDefault}),l._UZ(16,"detailed-book-desks-form",10),l.qZA(),l.qZA(),l.TgZ(17,"div",11),l.TgZ(18,"ul",12),l.TgZ(19,"div",13),l._uU(20),l.ALo(21,"async"),l.qZA(),l.YNc(22,pe,10,7,"li",14),l.ALo(23,"async"),l.qZA(),l.TgZ(24,"div",15),l._UZ(25,"i-map",16),l.ALo(26,"async"),l.ALo(27,"async"),l.ALo(28,"async"),l.ALo(29,"async"),l.ALo(30,"async"),l.ALo(31,"async"),l.ALo(32,"async"),l.YNc(33,me,4,5,"div",17),l.ALo(34,"async"),l.qZA(),l.YNc(35,he,5,4,"div",18),l.ALo(36,"async"),l.YNc(37,fe,11,2,"div",19),l.qZA(),l.qZA()),2&e){const e=l.MAs(14);let n,i,o;l.xp6(1),l.Q6J("routerLink",l.DdM(41,_e)),l.xp6(9),l.Q6J("matMenuTriggerFor",e),l.xp6(1),l.hij(" ",l.lcZ(12,17,t.option_details)||"No Filters"," "),l.xp6(5),l.Q6J("form",t.form),l.xp6(4),l.hij(" ",(null==(n=l.lcZ(21,19,t.desks))?null:n.length)||"0"," matches available "),l.xp6(2),l.Q6J("ngForOf",l.lcZ(23,21,t.desks)),l.xp6(3),l.Q6J("src",l.lcZ(26,23,t.url))("zoom",null==(i=l.lcZ(27,25,t.positions))?null:i.zoom)("center",null==(o=l.lcZ(28,27,t.positions))?null:o.center)("styles",l.lcZ(29,29,t.styles))("features",l.lcZ(30,31,t.features))("actions",l.lcZ(31,33,t.actions))("labels",l.lcZ(32,35,t.labels))("focus",(null==t.active_desk?null:t.active_desk.map_id)||(null==t.active_desk?null:t.active_desk.id)),l.xp6(8),l.Q6J("ngIf",l.lcZ(34,37,t.level)),l.xp6(2),l.Q6J("ngIf",l.lcZ(36,39,t.loading)),l.xp6(2),l.Q6J("ngIf",t.active_desk)}},directives:[M.zs,w.yS,$.o,R.p6,R.VK,re,i.sg,ce.p,i.O5,ue.$g,M.lW],pipes:[i.Ov],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[topbar][_ngcontent-%COMP%]{background-color:#00539f}"]}),e})();const Ze=function(){return["/book","desks","map"]};let be=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Xpm({type:e,selectors:[["desk-flow-confirm"]],decls:7,vars:2,consts:[["topbar","",1,""],["button","","mat-button","",1,"clear","h-[2.75rem]","text-white",3,"routerLink"],[1,"flex","items-center","justify-center","h-full"],[1,"text-xl"],[1,"ml-2","mx-4"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"a",1),l.TgZ(2,"div",2),l.TgZ(3,"app-icon",3),l._uU(4,"arrow_back"),l.qZA(),l.TgZ(5,"span",4),l._uU(6,"Back"),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(1),l.Q6J("routerLink",l.DdM(1,Ze)))},directives:[M.zs,w.yS,$.o],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[topbar][_ngcontent-%COMP%]{background-color:#00539f}"]}),e})();const xe=function(e){return["/book",e]},we=function(){return{}},Ae=function(){return["/schedule"]},ye=function(e){return{email:e}};let Te=(()=>{class e{constructor(){this.route="spaces",this.type="space"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Xpm({type:e,selectors:[["flow-success"]],inputs:{calendar:"calendar",route:"route",type:"type"},decls:13,vars:11,consts:[["name","success",1,"fixed","inset-0","flex","flex-col","bg-secondary","items-center","justify-center","z-50"],[1,"text-4xl","rounded-full","bg-white","text-success","mb-4"],[1,"text-center","text-lg","text-white","mb-4"],[1,"flex","items-center","space-x-2"],["button","","mat-button","",1,"w-32",3,"routerLink","queryParams"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"app-icon"),l._uU(3,"done"),l.qZA(),l.qZA(),l.TgZ(4,"div",2),l._uU(5),l._UZ(6,"br"),l._uU(7," An event has been added to your calendar "),l.qZA(),l.TgZ(8,"div",3),l.TgZ(9,"a",4),l._uU(10," New Booking "),l.qZA(),l.TgZ(11,"a",4),l._uU(12," My Day "),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(5),l.hij(" Thank you, you ",t.type," booking was successful!"),l.xp6(4),l.Q6J("routerLink",l.VKq(5,xe,t.route))("queryParams",l.DdM(7,we)),l.xp6(2),l.Q6J("routerLink",l.DdM(8,Ae))("queryParams",l.VKq(9,ye,t.calendar)))},directives:[$.o,M.zs,w.yS],styles:[""]}),e})();var ke=n(3848),qe=n(804),Me=n(999),Oe=n(860),Ue=n.n(Oe);function Ce(e,t){if(1&e&&(l.TgZ(0,"mat-option",22),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.Q6J("value",e.value),l.xp6(1),l.hij(" ",e.name," ")}}function Je(e,t){if(1&e&&(l.TgZ(0,"mat-option",22),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.Q6J("value",e.id),l.xp6(1),l.hij(" ",e.display_name||e.name," ")}}let Qe=(()=>{class e{constructor(e,t,n){this._state=e,this._router=t,this._org=n,this.time=0,this.level="",this.quick_times=[{name:"Now",value:0},{name:"Tomorrow",value:Ue()((0,ke.Z)(new Date,1),9).valueOf()}],this.levels=[],this.clearForm=()=>{this.time=0,this.level=this._org.building.id,this._state.clearForm()}}get is_edit(){var e,t;return!!(null===(t=null===(e=this.form)||void 0===e?void 0:e.get("id"))||void 0===t?void 0:t.value)}get form(){return this._state.form}ngOnInit(){var e,t;return(0,Q.mG)(this,void 0,void 0,function*(){yield this._org.initialised.pipe((0,N.P)(e=>e)),yield this._org.active_levels.pipe((0,N.P)(e=>(null==e?void 0:e.length)>0)),this.level=null===(e=this._org.building)||void 0===e?void 0:e.id,this.levels=[{id:null===(t=this._org.building)||void 0===t?void 0:t.id,name:"Any Level"},...this._org.levelsForBuilding(this._org.building)]})}quickBook(){this.form.patchValue({date:(this.time<1440?(0,qe.Z)((0,Me.Z)(new Date,{nearestTo:5}),this.time):Ue()((0,ke.Z)(new Date,1),8)).valueOf(),title:"Ad-hoc Desk Booking"}),this.findDesk()}findDesk(){this.form.markAllAsTouched(),this.form.valid&&this._router.navigate(["/book","desks","map"])}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(L.x4),l.Y36(w.F0),l.Y36(E.w7))},e.\u0275cmp=l.Xpm({type:e,selectors:[["desk-flow-form"]],decls:39,vars:8,consts:[["quick","",1,"text-white"],[1,"w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","pb-2"],[1,"text-xl","uppercase","font-medium","mb-2","mt-4"],[1,"flex","flex-col","sm:flex-row","space-x-0","sm:space-x-2"],["overlay","","appearance","outline",1,"sm:flex-2","h-[3.25rem]"],["name","time","placeholder","Now",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","level","placeholder","Any Level",3,"ngModel","ngModelChange"],["mat-button","",1,"sm:flex-1","h-[2.75rem]","mt-1","mb-2",3,"click"],[1,"flex","items-center","justify-center"],[1,"text-xl"],[1,"ml-2","mx-4"],[1,"bg-gray-300"],[1,"w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],[1,"text-xl","uppercase","font-medium","my-4"],[1,"flex-1","min-h-[50%]"],[1,"text-xl","uppercase","font-medium","mb-2","mt-4","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],[3,"form"],[1,"mb-4","border-b","border-gray-300","w-full"],[1,"flex","flex-col","sm:flex-row","items-center","justify-center","space-x-0","space-y-2","sm:space-y-0","sm:space-x-2","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","mb-4"],["mat-button","",1,"sm:flex-1","w-full","sm:w-auto","h-[2.75rem]","inverse",3,"click"],["mat-button","",1,"sm:flex-1","w-full","sm:w-auto","h-[2.75rem]",3,"click"],[3,"value"]],template:function(e,t){1&e&&(l.TgZ(0,"section",0),l.TgZ(1,"div",1),l.TgZ(2,"h2",2),l._uU(3," Quick Book Desk "),l.qZA(),l.TgZ(4,"div",3),l.TgZ(5,"mat-form-field",4),l.TgZ(6,"mat-select",5),l.NdJ("ngModelChange",function(e){return t.time=e}),l.YNc(7,Ce,2,2,"mat-option",6),l.qZA(),l.qZA(),l.TgZ(8,"mat-form-field",4),l.TgZ(9,"mat-select",7),l.NdJ("ngModelChange",function(e){return t.level=e}),l.YNc(10,Je,2,2,"mat-option",6),l.qZA(),l.qZA(),l.TgZ(11,"button",8),l.NdJ("click",function(){return t.quickBook()}),l.TgZ(12,"div",9),l.TgZ(13,"app-icon",10),l._uU(14,"search"),l.qZA(),l.TgZ(15,"span",11),l._uU(16,"Find Desk"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(17,"section",12),l.TgZ(18,"div",13),l.TgZ(19,"h2",14),l._uU(20,"OR"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(21,"section",15),l.TgZ(22,"h2",16),l._uU(23),l.qZA(),l._UZ(24,"detailed-book-desks-form",17),l._UZ(25,"div",18),l.TgZ(26,"div",19),l.TgZ(27,"button",20),l.NdJ("click",function(){return t.clearForm()}),l.TgZ(28,"div",9),l.TgZ(29,"app-icon",10),l._uU(30,"clear"),l.qZA(),l.TgZ(31,"span",11),l._uU(32),l.qZA(),l.qZA(),l.qZA(),l.TgZ(33,"button",21),l.NdJ("click",function(){return t.findDesk()}),l.TgZ(34,"div",9),l.TgZ(35,"app-icon",10),l._uU(36,"search"),l.qZA(),l.TgZ(37,"span",11),l._uU(38),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(6),l.Q6J("ngModel",t.time),l.xp6(1),l.Q6J("ngForOf",t.quick_times),l.xp6(2),l.Q6J("ngModel",t.level),l.xp6(1),l.Q6J("ngForOf",t.levels),l.xp6(13),l.hij(" ",t.is_edit?"Edit":"Detailed"," Booking "),l.xp6(1),l.Q6J("form",t.form),l.xp6(8),l.Oqu(t.is_edit?"Cancel Edit":"Clear Form"),l.xp6(6),l.Oqu(t.is_edit?"Update Desk":"Find Desk"))},directives:[V.KE,G.gD,o.JJ,o.On,i.sg,M.lW,$.o,re,r.ey],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column;overflow:auto}[quick][_ngcontent-%COMP%]{background-color:#007ac8}"]}),e})();function Fe(e,t){1&e&&(l.ynx(0),l._UZ(1,"desk-flow-map"),l.BQk())}function Ne(e,t){1&e&&(l.ynx(0),l._UZ(1,"desk-flow-confirm"),l.BQk())}function Le(e,t){if(1&e&&(l.ynx(0),l._UZ(1,"flow-success",4),l.BQk()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("calendar",null==e.last_success?null:e.last_success.user_email)}}function Ee(e,t){1&e&&(l.ynx(0),l._UZ(1,"desk-flow-form"),l.BQk())}let De=(()=>{class e extends F.KG{constructor(e,t,n){super(),this._state=e,this._route=t,this._org=n}get view(){return this._state.view}get last_success(){return this._state.last_success}ngOnInit(){return(0,Q.mG)(this,void 0,void 0,function*(){yield this._org.initialised.pipe((0,N.P)(e=>e)).toPromise(),this._state.loadForm(),this._state.form||this._state.newForm(),this.subscription("route.params",this._route.paramMap.subscribe(e=>{e.has("step")&&this._state.setView(e.get("step"))})),this.subscription("route.query",this._route.queryParamMap.subscribe(e=>{e.has("success")&&this._state.setView(e.get("success"))}))})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(L.x4),l.Y36(w.gz),l.Y36(E.w7))},e.\u0275cmp=l.Xpm({type:e,selectors:[["placeos-book-desk-flow"]],features:[l.qOj],decls:6,vars:4,consts:[[1,"bg-white","h-full","w-full"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["type","desk","route","desks",3,"calendar"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.ynx(1,1),l.YNc(2,Fe,2,0,"ng-container",2),l.YNc(3,Ne,2,0,"ng-container",2),l.YNc(4,Le,2,1,"ng-container",2),l.YNc(5,Ee,2,0,"ng-container",3),l.BQk(),l.qZA()),2&e&&(l.xp6(1),l.Q6J("ngSwitch",t.view),l.xp6(1),l.Q6J("ngSwitchCase","map"),l.xp6(1),l.Q6J("ngSwitchCase","confirm"),l.xp6(1),l.Q6J("ngSwitchCase","success"))},directives:[i.RF,i.n9,i.ED,ve,be,Te,Qe],styles:["[_nghost-%COMP%]{height:100%;width:100%}"]}),e})();var Ie=n(3356),Se=n(3835),je=n(611),Pe=n(7209),Be=n(7531),Ye=n(4608);let $e=(()=>{class e{constructor(e){this._dialog=e,this.bookChange=new l.vpe}bookSpace(){this.book=!this.book,this.bookChange.emit(this.book)}viewLocation(){this._dialog.open(Be.k,{width:"32em",maxWidth:"95vw",maxHeight:"95vh",data:{space:this.space}})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(Ye.uw))},e.\u0275cmp=l.Xpm({type:e,selectors:[["space-flow-find-item"]],inputs:{space:"space",multiple:"multiple",book:"book"},outputs:{bookChange:"bookChange"},decls:19,vars:8,consts:[[1,"flex","items-center","bg-white","p-2","my-2","shadow","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","rounded"],[1,"flex","flex-col","flex-1","space-y-2"],[1,"flex","items-center"],[1,"p-2","rounded-full","bg-gray-300","mr-2"],[1,"flex","flex-col","space-y-2","ml-2"],["mat-button","",3,"click"],["mat-button","",1,"inverse",3,"click"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"app-icon"),l._uU(5,"place"),l.qZA(),l.qZA(),l.TgZ(6,"span"),l._uU(7),l.qZA(),l.qZA(),l.TgZ(8,"div",2),l.TgZ(9,"div",3),l.TgZ(10,"app-icon"),l._uU(11,"group"),l.qZA(),l.qZA(),l.TgZ(12,"span"),l._uU(13),l.qZA(),l.qZA(),l.qZA(),l.TgZ(14,"div",4),l.TgZ(15,"button",5),l.NdJ("click",function(){return t.bookSpace()}),l._uU(16),l.qZA(),l.TgZ(17,"button",6),l.NdJ("click",function(){return t.viewLocation()}),l._uU(18," Map "),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(7),l.AsE("",(null==t.space||null==t.space.level?null:t.space.level.display_name)||(null==t.space||null==t.space.level?null:t.space.level.name),", ",(null==t.space?null:t.space.display_name)||(null==t.space?null:t.space.name),""),l.xp6(6),l.hij("",(null==t.space?null:t.space.capacity)||0," People"),l.xp6(2),l.ekj("bg-pending",t.book)("border-pending",t.book),l.xp6(1),l.hij(" ",t.multiple?t.book?"Remove":"Select":"Book"," "))},directives:[$.o,M.lW],styles:["button[_ngcontent-%COMP%]{width:8rem}"]}),e})();function Re(e,t){if(1&e&&(l.TgZ(0,"mat-option",21),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.Q6J("value",e),l.xp6(1),l.hij(" ",e.display_name||e.name," ")}}function Ve(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"mat-form-field",19),l.TgZ(1,"mat-select",20),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().setBuilding(t)}),l.ALo(2,"async"),l.YNc(3,Re,2,2,"mat-option",13),l.ALo(4,"async"),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngModel",l.lcZ(2,2,e.building)),l.xp6(2),l.Q6J("ngForOf",l.lcZ(4,4,e.buildings))}}function Ge(e,t){if(1&e&&(l.TgZ(0,"mat-option",21),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.Q6J("value",e.id),l.xp6(1),l.hij(" ",e.display_name||e.name," ")}}function ze(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"mat-form-field",22),l.TgZ(1,"mat-select",23),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().setOptions({zone_ids:[t]})}),l.ALo(2,"async"),l.ALo(3,"async"),l.YNc(4,Ge,2,2,"mat-option",13),l.ALo(5,"async"),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();let t;l.xp6(1),l.Q6J("ngModel",null!=(t=l.lcZ(2,2,e.options))&&null!=t.zone_ids&&t.zone_ids.length?null==(t=l.lcZ(3,4,e.options))?null:t.zone_ids[0]:""),l.xp6(3),l.Q6J("ngForOf",l.lcZ(5,6,e.levels))}}function He(e,t){if(1&e&&(l.TgZ(0,"mat-option",21),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.Q6J("value",e.value),l.xp6(1),l.hij(" ",e.name," ")}}function We(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"space-flow-find-item",26),l.NdJ("bookChange",function(t){const n=l.CHM(e).$implicit;return l.oxw(3).book_space[n.id]=t})("bookChange",function(t){const n=l.CHM(e).$implicit;return l.oxw(3).handleBookEvent(n,t)}),l.qZA()}if(2&e){const e=t.$implicit,n=l.oxw(3);l.Q6J("space",e)("multiple",n.multiple)("book",n.book_space[e.id])}}function Xe(e,t){if(1&e&&(l.ynx(0),l.YNc(1,We,1,3,"space-flow-find-item",24),l.ALo(2,"async"),l.TgZ(3,"p",25),l._uU(4," End of available spaces list "),l.qZA(),l.BQk()),2&e){const e=l.oxw(2);l.xp6(1),l.Q6J("ngForOf",l.lcZ(2,1,e.spaces))}}function Ke(e,t){if(1&e&&(l.ynx(0),l.YNc(1,Xe,5,3,"ng-container",15),l.ALo(2,"async"),l.BQk()),2&e){const e=l.oxw(),t=l.MAs(27);let n;l.xp6(1),l.Q6J("ngIf",(null==(n=l.lcZ(2,2,e.spaces))?null:n.length)>0)("ngIfElse",t)}}function et(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",35),l.TgZ(1,"div",36),l.TgZ(2,"div"),l._uU(3),l.qZA(),l.TgZ(4,"div",37),l._uU(5),l.qZA(),l.qZA(),l.TgZ(6,"button",38),l.NdJ("click",function(t){const n=l.CHM(e).$implicit;return l.oxw(2).handleBookEvent(n,!1),t.stopPropagation()}),l.TgZ(7,"app-icon"),l._uU(8,"close"),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit;l.xp6(3),l.Oqu(e.display_name||e.name),l.xp6(2),l.AsE(" ",(null==e.level?null:e.level.display_name)||(null==e.level?null:e.level.name)," ~ ",e.capacity||"2+"," People ")}}function tt(e,t){1&e&&(l.TgZ(0,"div",39),l._uU(1," No selected spaces "),l.qZA())}function nt(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",27),l.TgZ(1,"div",28),l.TgZ(2,"div",29),l._uU(3),l.qZA(),l.TgZ(4,"button",30),l.NdJ("click",function(){return l.CHM(e),l.oxw().confirmBooking()}),l._uU(5," Book "),l.qZA(),l.qZA(),l.TgZ(6,"mat-menu",31,32),l.YNc(8,et,9,3,"div",33),l.YNc(9,tt,2,0,"div",34),l.qZA(),l.qZA()}if(2&e){const e=l.MAs(7),t=l.oxw();l.xp6(2),l.Q6J("matMenuTriggerFor",e),l.xp6(1),l.hij(" ",t.space_list.length," space(s) selected "),l.xp6(1),l.Q6J("disabled",!t.space_list.length),l.xp6(4),l.Q6J("ngForOf",t.space_list),l.xp6(1),l.Q6J("ngIf",!(null!=t.space_list&&t.space_list.length))}}function it(e,t){1&e&&(l.TgZ(0,"div",40),l._UZ(1,"mat-spinner",41),l.TgZ(2,"p"),l._uU(3,"Retrieving available spaces..."),l.qZA(),l.qZA()),2&e&&(l.xp6(1),l.Q6J("diameter",32))}function ot(e,t){1&e&&(l.TgZ(0,"div",42),l.TgZ(1,"p"),l._uU(2," No available spaces for selected time, capacity or level(s) "),l.qZA(),l.qZA())}const st=function(){return["/book","spaces","form"]};let at=(()=>{class e{constructor(e,t,n,i,o){this._org=e,this._spaces=t,this._state=n,this._settings=i,this._router=o,this.book_space={},this.quick_capacities=[{name:"Any Capacity",value:0},{name:"Small (1 - 4)",value:1},{name:"Medium (5 - 12)",value:5},{name:"Large (13 - 32)",value:13},{name:"Huge (32+)",value:33}],this.space_list=[],this.buildings=this._org.building_list,this.building=this._org.active_building,this.levels=(0,I.aj)([this.building,this._state.options]).pipe((0,Se.h)(([e])=>!!e),(0,P.U)(([e])=>[{id:this._org.building.id,name:"All Levels"},...this._org.levelsForBuilding(e)])),this.loading=this._state.loading,this.options=this._state.options,this.spaces=this._state.available_spaces,this.setOptions=e=>this._state.setOptions(e)}setBuilding(e){return(0,Q.mG)(this,void 0,void 0,function*(){const t=yield this.options.pipe((0,je.q)(1)).toPromise();e&&(this._org.building=e);const n=this._org.levelsForBuilding(this._org.building);!n.find(e=>{var n;return null===(n=t.zone_ids)||void 0===n?void 0:n.includes(e.id)})&&n.length&&this.setOptions({zone_ids:[n[0].id]})})}get multiple(){var e;return null===(e=this._settings.get("app.booking.multiple_spaces"))||void 0===e||e}ngOnInit(){var e,t;return(0,Q.mG)(this,void 0,void 0,function*(){yield this._org.initialised.pipe((0,N.P)(e=>!!e)).toPromise(),yield this._spaces.initialised.pipe((0,N.P)(e=>!!e)).toPromise(),this.setBuilding(this._org.building),this.book_space={};const n=(null===(t=null===(e=this._state.form)||void 0===e?void 0:e.get("resources"))||void 0===t?void 0:t.value)||[];console.log("Resources:",n),n.forEach(e=>this.book_space[e.id]=!0),this.space_list=this._spaces.filter(e=>this.book_space[e.id])})}handleBookEvent(e,t){this.multiple?this.book_space[e.id]=t:(this.book_space={},this.book_space[e.id]=t,this.confirmBooking()),this.space_list=this._spaces.filter(e=>this.book_space[e.id])}confirmBooking(){const e=this._spaces.filter(e=>this.book_space[e.id]);this._state.form.patchValue({resources:e,system:e[0]}),this._router.navigate(["/book","spaces","confirm"])}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(E.w7),l.Y36(Pe.sK),l.Y36(Ie.pB),l.Y36(F.gb),l.Y36(w.F0))},e.\u0275cmp=l.Xpm({type:e,selectors:[["space-flow-find"]],decls:28,vars:17,consts:[["topbar","",1,""],["button","","mat-button","",1,"clear","h-[2.75rem]","text-white",3,"routerLink"],[1,"flex","items-center","justify-center","h-full"],[1,"text-xl"],[1,"ml-2","mx-4"],["filters",""],[1,"w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","py-4"],[1,"text-xl","uppercase","font-medium","text-white"],[1,"flex","flex-col","items-center","sm:flex-row","space-x-0","sm:space-x-2"],["overlay","","buildings","","class","w-full sm:w-auto sm:flex-1 h-[3.25rem]","appearance","outline",4,"ngIf"],["class","w-full sm:w-auto sm:flex-1 h-[3.25rem]","overlay","","appearance","outline",4,"ngIf"],["overlay","","appearance","outline",1,"w-full","sm:w-auto","sm:flex-1","h-[3.25rem]","hidden","sm:block"],["placeholder","Any Capacity",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-1","w-full","bg-gray-100","overflow-auto"],[4,"ngIf","ngIfElse"],["class","bg-white border-t border-gray-200",4,"ngIf"],["load_state",""],["empty_state",""],["overlay","","buildings","","appearance","outline",1,"w-full","sm:w-auto","sm:flex-1","h-[3.25rem]"],["placeholder","Select Building...",3,"ngModel","ngModelChange"],[3,"value"],["overlay","","appearance","outline",1,"w-full","sm:w-auto","sm:flex-1","h-[3.25rem]"],["placeholder","Level",3,"ngModel","ngModelChange"],["class","w-[640px] max-w-[calc(100%-2rem)] mx-auto ",3,"space","multiple","book","bookChange",4,"ngFor","ngForOf"],[1,"p-4","text-center","opacity-60"],[1,"w-[640px]","max-w-[calc(100%-2rem)]","mx-auto",3,"space","multiple","book","bookChange"],[1,"bg-white","border-t","border-gray-200"],[1,"flex","items-center","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","p-2"],[1,"flex-1","underline",3,"matMenuTriggerFor"],["mat-button","",1,"w-32",3,"disabled","click"],["yPosition","above"],["menu","matMenu"],["class","flex items-center pointer-events-none leading-tight","mat-menu-item","",4,"ngFor","ngForOf"],["mat-menu-item","","class"," opacity-60",4,"ngIf"],["mat-menu-item","",1,"flex","items-center","pointer-events-none","leading-tight"],[1,"flex","flex-col","mr-4"],[1,"text-xs","opacity-70"],["mat-icon-button","",1,"pointer-events-auto",3,"click"],["mat-menu-item","",1,"opacity-60"],[1,"h-full","w-full","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"],[1,"h-full","w-full","flex","flex-col","items-center","justify-center","space-y-2","p-8","text-center"]],template:function(e,t){if(1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"a",1),l.TgZ(2,"div",2),l.TgZ(3,"app-icon",3),l._uU(4,"arrow_back"),l.qZA(),l.TgZ(5,"span",4),l._uU(6,"Back"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"div",5),l.TgZ(8,"div",6),l.TgZ(9,"h2",7),l._uU(10," Available Spaces "),l.qZA(),l.TgZ(11,"div",8),l.YNc(12,Ve,5,6,"mat-form-field",9),l.ALo(13,"async"),l.YNc(14,ze,6,8,"mat-form-field",10),l.ALo(15,"async"),l.TgZ(16,"mat-form-field",11),l.TgZ(17,"mat-select",12),l.NdJ("ngModelChange",function(e){return t.setOptions({capacity:e})}),l.ALo(18,"async"),l.YNc(19,He,2,2,"mat-option",13),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(20,"div",14),l.YNc(21,Ke,3,4,"ng-container",15),l.ALo(22,"async"),l.qZA(),l.YNc(23,nt,10,5,"div",16),l.YNc(24,it,4,1,"ng-template",null,17,l.W1O),l.YNc(26,ot,3,0,"ng-template",null,18,l.W1O)),2&e){const e=l.MAs(25);let n,i,o;l.xp6(1),l.Q6J("routerLink",l.DdM(16,st)),l.xp6(11),l.Q6J("ngIf",(null==(n=l.lcZ(13,8,t.buildings))?null:n.length)>1),l.xp6(2),l.Q6J("ngIf",(null==(i=l.lcZ(15,10,t.levels))?null:i.length)>0),l.xp6(3),l.Q6J("ngModel",null==(o=l.lcZ(18,12,t.options))?null:o.capacity),l.xp6(2),l.Q6J("ngForOf",t.quick_capacities),l.xp6(2),l.Q6J("ngIf",!l.lcZ(22,14,t.loading))("ngIfElse",e),l.xp6(2),l.Q6J("ngIf",t.multiple)}},directives:[M.zs,w.yS,$.o,i.O5,V.KE,G.gD,o.JJ,o.On,i.sg,r.ey,$e,R.p6,M.lW,R.VK,R.OP,ue.$g],pipes:[i.Ov],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[topbar][_ngcontent-%COMP%]{background-color:#00539f}[filters][_ngcontent-%COMP%]{background-color:#007ac8}"]}),e})();var lt=n(5969);function rt(e,t){if(1&e&&(l.TgZ(0,"div",20),l.TgZ(1,"span"),l._uU(2),l.qZA(),l.TgZ(3,"button",21),l._uU(4," Map "),l.qZA(),l.qZA()),2&e){const e=t.$implicit;l.xp6(2),l.AsE("",e.display_name||e.name," [",(null==e.level?null:e.level.display_name)||(null==e.level?null:e.level.name),"]")}}function ct(e,t){if(1&e&&(l.TgZ(0,"div",22),l._UZ(1,"a-user-avatar",23),l.TgZ(2,"span"),l._uU(3),l.qZA(),l.qZA()),2&e){const e=t.$implicit;l.xp6(1),l.Q6J("user",e),l.xp6(2),l.Oqu(e.name||e.email)}}function ut(e,t){1&e&&(l.TgZ(0,"span"),l._uU(1,"Confirm"),l.qZA())}function dt(e,t){1&e&&l._UZ(0,"mat-spinner",24),2&e&&l.Q6J("diameter",24)}const gt=function(){return["/book","spaces","find"]},pt=function(){return["/book","spaces","form"]};let mt=(()=>{class e{constructor(e){this._state=e,this.show_spaces=!1,this.show_people=!1,this.loading=!1,this.postForm=()=>(0,Q.mG)(this,void 0,void 0,function*(){this.loading=!0,console.log("Form:",this.form),yield this._state.postForm().catch(e=>(0,F.cB)(e)),this.loading=!1})}get form(){return this._state.form}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(Ie.pB))},e.\u0275cmp=l.Xpm({type:e,selectors:[["space-flow-confirm"]],decls:59,vars:38,consts:[["topbar","",1,""],["button","","mat-button","",1,"clear","h-[2.75rem]","text-white",3,"routerLink"],[1,"flex","items-center","justify-center","h-full"],[1,"text-xl"],[1,"ml-2","mx-4"],[1,"flex","flex-col","items-center","space-y-2","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","mb-4"],[1,"text-xl","uppercase","font-medium","w-full","my-4"],[1,"flex","items-center","py-2","space-x-2","border-b","border-gray-200","w-full"],[1,"p-2","rounded-full","bg-gray-300","mr-2"],[1,"flex-1","truncate"],["mat-button","",1,"clear","underline",3,"routerLink"],[1,"border-b","border-gray-200","w-full"],[1,"flex","items-center","py-2","space-x-2"],["mat-button","",1,"clear","bg-transparent","border-none","underline",3,"disabled","click"],["list","",1,"overflow-hidden"],["class","flex items-center h-10 pl-12",4,"ngFor","ngForOf"],["class","flex items-center h-12 pl-12 space-x-2",4,"ngFor","ngForOf"],["mat-button","",1,"w-32",3,"disabled","click"],[4,"ngIf"],["class","mx-auto",3,"diameter",4,"ngIf"],[1,"flex","items-center","h-10","pl-12"],["mat-button","",1,"bg-transparent","border-none","underline"],[1,"flex","items-center","h-12","pl-12","space-x-2"],[1,"text-sm",3,"user"],[1,"mx-auto",3,"diameter"]],template:function(e,t){if(1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"a",1),l.TgZ(2,"div",2),l.TgZ(3,"app-icon",3),l._uU(4,"arrow_back"),l.qZA(),l.TgZ(5,"span",4),l._uU(6,"Back"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"div",5),l.TgZ(8,"h2",6),l._uU(9," Your meeting details "),l.qZA(),l.TgZ(10,"div",7),l.TgZ(11,"div",8),l.TgZ(12,"app-icon"),l._uU(13,"event"),l.qZA(),l.qZA(),l.TgZ(14,"div",9),l._uU(15),l.ALo(16,"date"),l.ALo(17,"date"),l.ALo(18,"date"),l.qZA(),l.TgZ(19,"a",10),l._uU(20,"Edit"),l.qZA(),l.qZA(),l.TgZ(21,"div",7),l.TgZ(22,"div",8),l.TgZ(23,"app-icon"),l._uU(24,"schedule"),l.qZA(),l.qZA(),l.TgZ(25,"div",9),l._uU(26),l.qZA(),l.TgZ(27,"a",10),l._uU(28,"Edit"),l.qZA(),l.qZA(),l.TgZ(29,"div",11),l.TgZ(30,"div",12),l.TgZ(31,"div",8),l.TgZ(32,"app-icon"),l._uU(33,"place"),l.qZA(),l.qZA(),l.TgZ(34,"div",9),l._uU(35),l.qZA(),l.TgZ(36,"button",13),l.NdJ("click",function(){return t.show_spaces=!t.show_spaces}),l._uU(37),l.qZA(),l.TgZ(38,"a",10),l._uU(39,"Edit"),l.qZA(),l.qZA(),l.TgZ(40,"div",14),l.YNc(41,rt,5,2,"div",15),l.qZA(),l.qZA(),l.TgZ(42,"div",11),l.TgZ(43,"div",12),l.TgZ(44,"div",8),l.TgZ(45,"app-icon"),l._uU(46,"group"),l.qZA(),l.qZA(),l.TgZ(47,"div",9),l._uU(48),l.qZA(),l.TgZ(49,"button",13),l.NdJ("click",function(){return t.show_people=!t.show_people}),l._uU(50),l.qZA(),l.TgZ(51,"a",10),l._uU(52,"Edit"),l.qZA(),l.qZA(),l.TgZ(53,"div",14),l.YNc(54,ct,4,2,"div",16),l.qZA(),l.qZA(),l.TgZ(55,"button",17),l.NdJ("click",function(){return t.postForm()}),l.YNc(56,ut,2,0,"span",18),l.YNc(57,dt,1,1,"mat-spinner",19),l.qZA(),l.qZA(),l._uU(58," < ")),2&e){let e,n,i,o,s,a,r,c,u,d;l.xp6(1),l.Q6J("routerLink",l.DdM(33,gt)),l.xp6(14),l.lnq(" ",l.xi3(16,24,null==(e=t.form.get("date"))?null:e.value,"longDate")," at ",l.xi3(17,27,null==(e=t.form.get("date"))?null:e.value,"shortTime")," ~ ",l.xi3(18,30,(null==(e=t.form.get("date"))?null:e.value)+60*(null==(e=t.form.get("duration"))?null:e.value)*1e3,"shortTime")," "),l.xp6(4),l.Q6J("routerLink",l.DdM(34,pt)),l.xp6(7),l.hij(" ",null==(n=t.form.get("duration"))?null:n.value," minutes "),l.xp6(1),l.Q6J("routerLink",l.DdM(35,pt)),l.xp6(8),l.hij(" ",null==(i=t.form.get("resources"))||null==i.value?null:i.value.length," Space(s) "),l.xp6(1),l.Q6J("disabled",!(null!=(o=t.form.get("resources"))&&null!=o.value&&o.value.length)),l.xp6(1),l.hij(" ",t.show_spaces?"Hide":"Show"," "),l.xp6(1),l.Q6J("routerLink",l.DdM(36,gt)),l.xp6(2),l.Udp("height",t.show_spaces?2.5*(null==(s=t.form.get("resources"))||null==s.value?null:s.value.length)+"rem":"0"),l.xp6(1),l.Q6J("ngForOf",null==(a=t.form.get("resources"))?null:a.value),l.xp6(7),l.hij(" ",(null==(r=t.form.get("attendees"))||null==r.value?null:r.value.length)||0," Attendee(s) "),l.xp6(1),l.Q6J("disabled",!(null!=(c=t.form.get("attendees"))&&null!=c.value&&c.value.length)),l.xp6(1),l.hij(" ",t.show_people?"Hide":"Show"," "),l.xp6(1),l.Q6J("routerLink",l.DdM(37,pt)),l.xp6(2),l.Udp("height",t.show_people?3*(null==(u=t.form.get("attendees"))||null==u.value?null:u.value.length)+"rem":"0"),l.xp6(1),l.Q6J("ngForOf",null==(d=t.form.get("attendees"))?null:d.value),l.xp6(1),l.Q6J("disabled",t.loading),l.xp6(1),l.Q6J("ngIf",!t.loading),l.xp6(1),l.Q6J("ngIf",t.loading)}},directives:[M.zs,w.yS,$.o,M.lW,i.sg,i.O5,lt.k,ue.$g],pipes:[i.uU],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[topbar][_ngcontent-%COMP%]{background-color:#00539f}[list][_ngcontent-%COMP%]{transition:height .2s}"]}),e})();var ht=n(847);function ft(e,t){if(1&e&&(l.TgZ(0,"form",1),l.TgZ(1,"section",2),l.TgZ(2,"div",3),l.TgZ(3,"div",4),l.TgZ(4,"label"),l._uU(5,"Date"),l.qZA(),l.TgZ(6,"a-date-field",5),l._uU(7," Date and time must be in the future "),l.qZA(),l.qZA(),l.TgZ(8,"div",4),l.TgZ(9,"label"),l._uU(10,"Start Time"),l.qZA(),l._UZ(11,"a-time-field",5),l.qZA(),l.TgZ(12,"div",4),l.TgZ(13,"label"),l._uU(14,"End Time"),l.qZA(),l._UZ(15,"a-duration-field",6),l.qZA(),l.qZA(),l.qZA(),l.TgZ(16,"section",2),l.TgZ(17,"div",7),l.TgZ(18,"label"),l._uU(19,"Attendees"),l.qZA(),l._UZ(20,"a-user-list-field",8),l.qZA(),l.qZA(),l.TgZ(21,"section",2),l.TgZ(22,"div",9),l.TgZ(23,"div",10),l.TgZ(24,"label"),l._uU(25,"Meeting Subject "),l.TgZ(26,"span"),l._uU(27,"*"),l.qZA(),l.qZA(),l.TgZ(28,"mat-form-field",11),l._UZ(29,"input",12),l.TgZ(30,"mat-error"),l._uU(31,"Meeting Subject is required"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(32,"div",13),l.TgZ(33,"label"),l._uU(34,"Notes"),l.qZA(),l.TgZ(35,"mat-form-field",11),l._UZ(36,"textarea",14),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){const e=l.oxw();let t;l.Q6J("formGroup",e.form),l.xp6(15),l.Q6J("time",null==(t=e.form.get("date"))?null:t.value)}}let _t=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Xpm({type:e,selectors:[["detailed-book-space-form"]],inputs:{form:"form"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"mb-4","border-b","border-gray-300"],[1,"flex","flex-col","sm:flex-row","space-x-0","sm:space-x-2","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],[1,"flex","flex-col","flex-1","w-full","sm:w-1/3"],["formControlName","date"],["formControlName","duration",3,"time"],[1,"flex","flex-col","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],["formControlName","attendees"],[1,"w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],[1,"flex","flex-col"],["appearance","outline"],["matInput","","formControlName","title","placeholder","Meeting title"],[1,"flex","flex-col","resize-y"],["matInput","","formControlName","body","placeholder","Add meeting notes here..."]],template:function(e,t){1&e&&l.YNc(0,ft,37,2,"form",0),2&e&&l.Q6J("ngIf",t.form)},directives:[i.O5,o._Y,o.JL,o.sg,o.JJ,o.u,V.KE,q.Nt,o.Fj,V.TO],styles:[""]}),e})();function vt(e,t){if(1&e&&(l.TgZ(0,"mat-option",20),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.Q6J("value",e.value),l.xp6(1),l.hij(" ",e.name," ")}}function Zt(e,t){if(1&e&&(l.TgZ(0,"mat-option",20),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.Q6J("value",e.value),l.xp6(1),l.hij(" ",e.name," ")}}function bt(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"section",11),l.TgZ(1,"div",12),l.TgZ(2,"h2",13),l._uU(3," Quick Book Space "),l.qZA(),l.TgZ(4,"div",14),l.TgZ(5,"mat-form-field",15),l.TgZ(6,"mat-select",16),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().time=t}),l.YNc(7,vt,2,2,"mat-option",17),l.qZA(),l.qZA(),l.TgZ(8,"mat-form-field",15),l.TgZ(9,"mat-select",18),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().capacity=t}),l.YNc(10,Zt,2,2,"mat-option",17),l.qZA(),l.qZA(),l.TgZ(11,"button",19),l.NdJ("click",function(){return l.CHM(e),l.oxw().quickBook()}),l.TgZ(12,"div",7),l.TgZ(13,"app-icon",8),l._uU(14,"search"),l.qZA(),l.TgZ(15,"span",9),l._uU(16,"Find Space"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(6),l.Q6J("ngModel",e.time),l.xp6(1),l.Q6J("ngForOf",e.quick_times),l.xp6(2),l.Q6J("ngModel",e.capacity),l.xp6(1),l.Q6J("ngForOf",e.quick_capacities)}}function xt(e,t){1&e&&(l.TgZ(0,"section",21),l.TgZ(1,"div",22),l.TgZ(2,"h2",23),l._uU(3,"OR"),l.qZA(),l.qZA(),l.qZA())}let wt=(()=>{class e{constructor(e,t){this._state=e,this._router=t,this.time=0,this.capacity=0,this.quick_times=[{name:"Now",value:0},{name:"Later Today",value:120},{name:"Tomorrow",value:(0,ht.Z)((0,ke.Z)(new Date,1),9).valueOf()}],this.quick_capacities=[{name:"Any Capacity",value:0},{name:"Small (1 - 4)",value:1},{name:"Medium (5 - 12)",value:5},{name:"Large (13 - 32)",value:13},{name:"Huge (32+)",value:33}],this.clearForm=()=>{this.time=this.capacity=0,this._state.clearForm()}}get is_edit(){var e,t;return!!(null===(t=null===(e=this.form)||void 0===e?void 0:e.get("id"))||void 0===t?void 0:t.value)}get form(){return this._state.form}quickBook(){this.form.patchValue({date:(this.time<1440?(0,qe.Z)((0,Me.Z)(new Date,{nearestTo:5}),this.time):(0,ht.Z)((0,ke.Z)(new Date,1),8)).valueOf(),title:"Ad-hoc Meeting"}),this._state.setOptions({capacity:this.capacity}),this._router.navigate(["/book","spaces","find"])}findSpace(){this.form.markAllAsTouched(),this.form.valid&&this._router.navigate(["/book","spaces","find"])}confirmBooking(){this.form.markAllAsTouched(),this.form.valid&&this._router.navigate(["/book","spaces","confirm"])}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(Ie.pB),l.Y36(w.F0))},e.\u0275cmp=l.Xpm({type:e,selectors:[["space-flow-form"]],decls:25,vars:7,consts:[["quick","","class","text-white",4,"ngIf"],["class","bg-gray-300",4,"ngIf"],[1,"flex-1","min-h-[50%]"],[1,"text-xl","uppercase","font-medium","mb-2","mt-4","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],[3,"form"],[1,"flex","flex-col","sm:flex-row","items-center","justify-center","space-x-0","space-y-2","sm:space-y-0","sm:space-x-2","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","mb-4"],["mat-button","",1,"sm:flex-1","w-full","sm:w-auto","h-[2.75rem]","inverse",3,"click"],[1,"flex","items-center","justify-center"],[1,"text-xl"],[1,"ml-2","mx-4"],["mat-button","",1,"sm:flex-1","w-full","sm:w-auto","h-[2.75rem]",3,"click"],["quick","",1,"text-white"],[1,"w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","pb-2"],[1,"text-xl","uppercase","font-medium","mb-2","mt-4"],[1,"flex","flex-col","sm:flex-row","space-x-0","sm:space-x-2"],["overlay","","appearance","outline",1,"sm:flex-2","h-[3.25rem]"],["name","time","placeholder","Now",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","capacity","placeholder","Any Capacity",3,"ngModel","ngModelChange"],["mat-button","",1,"sm:flex-1","h-[2.75rem]","mt-1","mb-2",3,"click"],[3,"value"],[1,"bg-gray-300"],[1,"w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],[1,"text-xl","uppercase","font-medium","my-4"]],template:function(e,t){1&e&&(l.YNc(0,bt,17,4,"section",0),l.YNc(1,xt,4,0,"section",1),l.TgZ(2,"section",2),l.TgZ(3,"h2",3),l._uU(4),l.qZA(),l._UZ(5,"detailed-book-space-form",4),l.TgZ(6,"div",5),l.TgZ(7,"button",6),l.NdJ("click",function(){return t.clearForm()}),l.TgZ(8,"div",7),l.TgZ(9,"app-icon",8),l._uU(10,"clear"),l.qZA(),l.TgZ(11,"span",9),l._uU(12),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"button",10),l.NdJ("click",function(){return t.findSpace()}),l.TgZ(14,"div",7),l.TgZ(15,"app-icon",8),l._uU(16,"search"),l.qZA(),l.TgZ(17,"span",9),l._uU(18),l.qZA(),l.qZA(),l.qZA(),l.TgZ(19,"button",10),l.NdJ("click",function(){return t.confirmBooking()}),l.TgZ(20,"div",7),l.TgZ(21,"app-icon",8),l._uU(22,"event_available"),l.qZA(),l.TgZ(23,"span",9),l._uU(24),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.Q6J("ngIf",!t.is_edit),l.xp6(1),l.Q6J("ngIf",!t.is_edit),l.xp6(3),l.hij(" ",t.is_edit?"Edit":"Detailed"," Booking "),l.xp6(1),l.Q6J("form",t.form),l.xp6(7),l.Oqu(t.is_edit?"Cancel Edit":"Clear Form"),l.xp6(6),l.Oqu(t.is_edit?"Update Spaces":"Find Space"),l.xp6(6),l.Oqu(t.is_edit?"Confirm changes":"Book without Space"))},directives:[i.O5,_t,M.lW,$.o,V.KE,G.gD,o.JJ,o.On,i.sg,r.ey],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column;overflow:auto}[quick][_ngcontent-%COMP%]{background-color:#007ac8}"]}),e})();function At(e,t){1&e&&(l.ynx(0),l._UZ(1,"space-flow-find"),l.BQk())}function yt(e,t){1&e&&(l.ynx(0),l._UZ(1,"space-flow-confirm"),l.BQk())}function Tt(e,t){if(1&e&&(l.ynx(0),l._UZ(1,"flow-success",4),l.BQk()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("calendar",null==e.last_success?null:e.last_success.host)}}function kt(e,t){1&e&&(l.ynx(0),l._UZ(1,"space-flow-form"),l.BQk())}let qt=(()=>{class e extends F.KG{constructor(e,t){super(),this._state=e,this._route=t}get view(){return this._state.view}get last_success(){return this._state.last_success}ngOnInit(){this._state.loadForm(),this._state.form||this._state.newForm(),this.subscription("route.params",this._route.paramMap.subscribe(e=>{e.has("step")&&this._state.setView(e.get("step"))})),this.subscription("route.query",this._route.queryParamMap.subscribe(e=>{e.has("success")&&this._state.setView(e.get("success"))}))}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(Ie.pB),l.Y36(w.gz))},e.\u0275cmp=l.Xpm({type:e,selectors:[["placeos-book-space-flow"]],features:[l.qOj],decls:6,vars:4,consts:[[1,"bg-white","h-full","w-full"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"calendar"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.ynx(1,1),l.YNc(2,At,2,0,"ng-container",2),l.YNc(3,yt,2,0,"ng-container",2),l.YNc(4,Tt,2,1,"ng-container",2),l.YNc(5,kt,2,0,"ng-container",3),l.BQk(),l.qZA()),2&e&&(l.xp6(1),l.Q6J("ngSwitch",t.view),l.xp6(1),l.Q6J("ngSwitchCase","find"),l.xp6(1),l.Q6J("ngSwitchCase","confirm"),l.xp6(1),l.Q6J("ngSwitchCase","success"))},directives:[i.RF,i.n9,i.ED,at,mt,Te,wt],styles:["[_nghost-%COMP%]{height:100%;width:100%}"]}),e})();var Mt=n(1781);const Ot=[{path:"",component:T,children:[{path:"code",component:J},{path:"desks",redirectTo:"desks/form"},{path:"desks/:step",component:De},{path:"spaces",redirectTo:"spaces/form"},{path:"spaces/:step",component:qt},{path:"*",redirectTo:"spaces/form"}]},{path:"*",redirectTo:"spaces/form"}];let Ut=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[i.ez,Mt.v,o.UX,x,o.u5,w.Bz.forChild(Ot)]]}),e})()},7216:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")},e.exports=t.default},4430:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)},e.exports=t.default},860:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,s.default)(2,arguments);var n=(0,o.default)(e),a=(0,i.default)(t);return n.setHours(a),n};var i=a(n(4430)),o=a(n(7888)),s=a(n(7216));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},7888:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,o.default)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))};var i,o=(i=n(7216))&&i.__esModule?i:{default:i};e.exports=t.default}}]);
//# sourceMappingURL=apps_workplace_src_app_book_book_module_ts.js.map