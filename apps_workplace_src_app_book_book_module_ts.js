"use strict";(self.webpackChunkworkplace=self.webpackChunkworkplace||[]).push([["apps_workplace_src_app_book_book_module_ts"],{3687:(m_,Le,p)=>{p.r(Le),p.d(Le,{BookModule:()=>p_});var _=p(6477),d=p(9542),F=p(854),Lt=p(6958),ae=p(867),It=p(5778),e=p(9445),h=p(7728);const Rt=["button"],Dt=["*"],Ie=new e.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),Re=new e.OlP("MatButtonToggleGroup"),qt={provide:d.JU,useExisting:(0,e.Gpc)(()=>Ue),multi:!0};let De=0;class qe{constructor(a,t){this.source=a,this.value=t}}let Ue=(()=>{class o{get name(){return this._name}set name(t){this._name=t,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(t){this._vertical=(0,ae.Ig)(t)}get value(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(n=>n.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}get selected(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=(0,ae.Ig)(t),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(t){this._disabled=(0,ae.Ig)(t),this._markButtonsForCheck()}constructor(t,n){this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+De++,this.valueChange=new e.vpe,this.change=new e.vpe,this.appearance=n&&n.appearance?n.appearance:"standard"}ngOnInit(){this._selectionModel=new It.Ov(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked))}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_emitChangeEvent(t){const n=new qe(t,this.value);this._controlValueAccessorChangeFn(n.value),this.change.emit(n)}_syncButtonToggle(t,n,i=!1,s=!1){!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?n?this._selectionModel.select(t):this._selectionModel.deselect(t):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(t,i)):this._updateModelValue(t,i)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(n=>null!=t.value&&n===t.value):t.value===this._rawValue)}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(n=>this._selectValue(n))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>t.checked=!1)}_selectValue(t){const n=this._buttonToggles.find(i=>null!=i.value&&i.value===t);n&&(n.checked=!0,this._selectionModel.select(n))}_updateModelValue(t,n){n&&this._emitChangeEvent(t),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(t=>t._markForCheck())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(Ie,8))},o.\u0275dir=e.lG2({type:o,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,n,i){if(1&t&&e.Suo(i,$e,5),2&t){let s;e.iGM(s=e.CRH())&&(n._buttonToggles=s)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,n){2&t&&(e.uIk("aria-disabled",n.disabled),e.ekj("mat-button-toggle-vertical",n.vertical)("mat-button-toggle-group-appearance-standard","standard"===n.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[e._Bn([qt,{provide:Re,useExisting:o}])]}),o})();const Ut=(0,h.Kr)(class{});let $e=(()=>{class o extends Ut{get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){const n=(0,ae.Ig)(t);n!==this._checked&&(this._checked=n,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=(0,ae.Ig)(t)}constructor(t,n,i,s,l,r){super(),this._changeDetectorRef=n,this._elementRef=i,this._focusMonitor=s,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new e.vpe;const c=Number(l);this.tabIndex=c||0===c?c:null,this.buttonToggleGroup=t,this.appearance=r&&r.appearance?r.appearance:"standard"}ngOnInit(){const t=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+De++,t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){const t=!!this._isSingleSelector()||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new qe(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Re,8),e.Y36(e.sBO),e.Y36(e.SBq),e.Y36(Lt.tE),e.$8M("tabindex"),e.Y36(Ie,8))},o.\u0275cmp=e.Xpm({type:o,selectors:[["mat-button-toggle"]],viewQuery:function(t,n){if(1&t&&e.Gf(Rt,5),2&t){let i;e.iGM(i=e.CRH())&&(n._buttonElement=i.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,n){1&t&&e.NdJ("focus",function(){return n.focus()}),2&t&&(e.uIk("aria-label",null)("aria-labelledby",null)("id",n.id)("name",null),e.ekj("mat-button-toggle-standalone",!n.buttonToggleGroup)("mat-button-toggle-checked",n.checked)("mat-button-toggle-disabled",n.disabled)("mat-button-toggle-appearance-standard","standard"===n.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[e.qOj],ngContentSelectors:Dt,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,n){if(1&t&&(e.F$t(),e.TgZ(0,"button",0,1),e.NdJ("click",function(){return n._onButtonClick()}),e.TgZ(2,"span",2),e.Hsn(3),e.qZA()(),e._UZ(4,"span",3)(5,"span",4)),2&t){const i=e.MAs(1);e.Q6J("id",n.buttonId)("disabled",n.disabled||null),e.uIk("tabindex",n.disabled?-1:n.tabIndex)("aria-pressed",n.checked)("name",n._getButtonName())("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby),e.xp6(5),e.Q6J("matRippleTrigger",i)("matRippleDisabled",n.disableRipple||n.disabled)}},dependencies:[h.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),o})(),$t=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.BQ,h.si,h.BQ]}),o})();var $=p(5763),se=p(3874),b=p(3496),le=p(2556),L=p(7672),A=p(7486),R=p(9314),re=p(2128),_e=p(8046),Y=p(2423),w=p(8750),Kt=p(9816),Gt=p(9861),u=p(3610);const Wt=[{id:"after_hour",name:"After Hour of Day"},{id:"before_hour",name:"Before Hour of Day"},{id:"min_length",name:"Min. Meeting Length"},{id:"max_length",name:"Max. Meeting Length"},{id:"is_before",name:"Is Hours before Meeting"},{id:"within_hours",name:"Within Hours before Meeting"},{id:"visitor_type",name:"Visitor Type"},{id:"groups",name:"User in Groups"}];var v=p(5306),J=p(6508),D=p(380);function Jt(o,a){1&o&&(e.TgZ(0,"button",7)(1,"app-icon"),e._uU(2,"close"),e.qZA()())}function Qt(o,a){if(1&o&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Bt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",16)(1,"mat-form-field",10)(2,"mat-select",17),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit;return e.KtG(l[0]=i)}),e.YNc(3,Qt,2,2,"mat-option",18),e.qZA()(),e.TgZ(4,"mat-form-field",10)(5,"input",19),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit;return e.KtG(l[1]=i)}),e.qZA(),e.TgZ(6,"mat-error"),e._uU(7,"Rule value is required"),e.qZA()(),e.TgZ(8,"button",12),e.NdJ("click",function(){const s=e.CHM(t).index,l=e.oxw().$implicit;return e.KtG(l.rules.splice(s,1))}),e.TgZ(9,"app-icon"),e._uU(10,"delete"),e.qZA()()()}if(2&o){const t=a.$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t[0]),e.xp6(1),e.Q6J("ngForOf",n.rule_types),e.xp6(2),e.Q6J("ngModel",t[1])}}function Yt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9)(2,"mat-form-field",10)(3,"input",11),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit;return e.KtG(l.name=i)}),e.qZA(),e.TgZ(4,"mat-error"),e._uU(5,"Ruleset name is required"),e.qZA()(),e.TgZ(6,"button",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return s.rules.push(["",""]),e.KtG(l.show_rules=s.id)}),e.TgZ(7,"app-icon"),e._uU(8,"add"),e.qZA()(),e.TgZ(9,"button",13),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.show_rules=l.show_rules!==s.id?s.id:"")}),e.TgZ(10,"app-icon"),e._uU(11),e.qZA()(),e.TgZ(12,"button",12),e.NdJ("click",function(){const s=e.CHM(t).index,l=e.oxw();return e.KtG(l.rulesets.splice(s,1))}),e.TgZ(13,"app-icon"),e._uU(14,"delete"),e.qZA()()(),e.TgZ(15,"div",14),e.YNc(16,Bt,11,3,"div",15),e.qZA()()}if(2&o){const t=a.$implicit,n=e.oxw();e.xp6(3),e.Q6J("ngModel",t.name),e.xp6(6),e.Q6J("disabled",!t.rules.length),e.xp6(2),e.Oqu(n.show_rules===t.id?"expand_less":"expand_more"),e.xp6(4),e.Udp("height",(n.show_rules===t.id?5*t.rules.length:0)+"em"),e.xp6(1),e.Q6J("ngForOf",t.rules)}}let Ke=(()=>{class o extends u.cx{get new_id(){return"ruleset-"+Math.floor(99999999*Math.random())}constructor(t){super(),this._data=t,this.event=new e.vpe,this.loading=!1,this.require_notes=this._data.require_notes,this.rule_types=Wt,this.rulesets=(t.config||[]).map(n=>(n.rules=n.rules.map(i=>[i[0],JSON.stringify(i[1])]),n))}saveNotesSetting(t){this.timeout("save-notes",()=>this._data.saveNotes?this._data.saveNotes(t):"",1e3)}saveChanges(){this.loading=!0;const t=this.rulesets.map(n=>({...n,rules:n.rules.map(i=>{let s=i[1];try{s=JSON.parse(i[1])}catch{}return[i[0],s]})}));this.event.emit({reason:"done",metadata:t})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["catering-config-modal"]],outputs:{event:"event"},features:[e.qOj],decls:14,vars:3,consts:[["icon","","mat-dialog-close","",4,"ngIf"],[1,"overflow-auto","text-center","max-w-lg","px-4","pt-2","pb-4"],[1,"m-2",3,"ngModel","ngModelChange"],["matRipple","",3,"click"],["class","ruleset",4,"ngFor","ngForOf"],[1,"flex","p-2","items-center","justify-center","border-t","border-solid","border-gray-300"],["btn","","matRipple","",1,"mx-auto","w-32",3,"click"],["icon","","mat-dialog-close",""],[1,"ruleset"],[1,"flex"],["appearance","outline",1,"flex-1"],["matInput","","name","name","placeholder","Zone ID, Category or Tag","required","",3,"ngModel","ngModelChange"],["icon","","matRipple","",1,"mb-6",3,"click"],["icon","","matRipple","",1,"mb-6",3,"disabled","click"],["name","rules",1,"bg-gray-100","rounded","overflow-hidden"],["class","flex items-center px-2 h-20 space-x-2",4,"ngFor","ngForOf"],[1,"flex","items-center","px-2","h-20","space-x-2"],["name","booking-type","placeholder","Select Rule",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","name","value","placeholder","Rule value","required","",3,"ngModel","ngModelChange"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"header")(1,"h3"),e._uU(2,"Edit Catering Configuration"),e.qZA(),e.YNc(3,Jt,3,0,"button",0),e.qZA(),e.TgZ(4,"main",1)(5,"mat-checkbox",2),e.NdJ("ngModelChange",function(s){return n.saveNotesSetting(s)}),e._uU(6," Require notes for orders "),e.qZA(),e._UZ(7,"br"),e.TgZ(8,"button",3),e.NdJ("click",function(){return n.rulesets.push({id:n.new_id,rules:[]})}),e._uU(9," New Ruleset "),e.qZA(),e.YNc(10,Yt,17,6,"div",4),e.qZA(),e.TgZ(11,"footer",5)(12,"button",6),e.NdJ("click",function(){return n.saveChanges()}),e._uU(13," Save Changes "),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("ngIf",!n.loading),e.xp6(2),e.Q6J("ngModel",n.require_notes),e.xp6(5),e.Q6J("ngForOf",n.rulesets))},dependencies:[_.sg,_.O5,h.ey,A.ZT,L.oG,d.Fj,d.JJ,d.Q7,d.On,v.o,w.KE,w.TO,J.gD,h.wG,D.Nt],styles:["[name=rules][_ngcontent-%COMP%]{transition:height .2s}\n/*# sourceMappingURL=catering-config-modal.component.ts-angular-inline--87.css.map*/"]}),o})();var Ze=p(4387),S=p(2962),M=p(5312),X=p(1031),Ce=p(2793),jt=p(3670);function Ht(o,a){1&o&&(e.TgZ(0,"button",6)(1,"app-icon"),e._uU(2,"close"),e.qZA()())}function Xt(o,a){if(1&o&&(e.TgZ(0,"div",17)(1,"label",18),e._uU(2," Name"),e.TgZ(3,"span"),e._uU(4,"*"),e.qZA(),e._uU(5,": "),e.qZA(),e.TgZ(6,"mat-form-field",19),e._UZ(7,"input",20),e.TgZ(8,"mat-error"),e._uU(9,"Name is required"),e.qZA()()()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("error",t.form.controls.name.invalid&&t.form.controls.name.touched)}}function zt(o,a){if(1&o&&(e.TgZ(0,"div",17)(1,"label",21),e._uU(2," Category"),e.TgZ(3,"span"),e._uU(4,"*"),e.qZA(),e._uU(5,": "),e.qZA(),e.TgZ(6,"mat-form-field",19),e._UZ(7,"input",22),e.TgZ(8,"mat-error"),e._uU(9,"Category is required"),e.qZA()()()),2&o){const t=e.oxw(2),n=e.MAs(9);e.xp6(1),e.ekj("error",t.form.controls.category.invalid&&t.form.controls.category.touched),e.xp6(6),e.Q6J("matAutocomplete",n)}}function Vt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"mat-chip-row",29),e.NdJ("removed",function(){const s=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.removeTag(s))}),e._uU(1),e.TgZ(2,"button",30)(3,"app-icon"),e._uU(4,"cancel"),e.qZA()()()}if(2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t," "),e.xp6(1),e.uIk("aria-label","Remove "+t)}}function en(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",17)(1,"label",23),e.SDv(2,24),e.qZA(),e.TgZ(3,"mat-form-field",19)(4,"mat-chip-grid",25,26),e.YNc(6,Vt,5,2,"mat-chip-row",27),e.qZA(),e.TgZ(7,"input",28),e.NdJ("matChipInputTokenEnd",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.addTag(i))}),e.qZA()()()}if(2&o){const t=e.MAs(5),n=e.oxw(2);e.xp6(1),e.ekj("error",n.form.controls.tags.invalid&&n.form.controls.tags.touched),e.xp6(5),e.Q6J("ngForOf",n.tag_list),e.xp6(1),e.Q6J("matChipInputFor",t)("matChipInputSeparatorKeyCodes",n.separators)("matChipInputAddOnBlur",!0)}}function tn(o,a){1&o&&(e.TgZ(0,"div",17)(1,"label",31),e._uU(2,"Description:"),e.qZA(),e.TgZ(3,"mat-form-field",19),e._UZ(4,"textarea",32),e.qZA()())}function nn(o,a){if(1&o&&(e.TgZ(0,"div",17)(1,"label",18),e._uU(2," Unit Price"),e.TgZ(3,"span"),e._uU(4,"*"),e.qZA(),e._uU(5,": "),e.qZA(),e.TgZ(6,"mat-form-field",19),e._UZ(7,"input",33),e.TgZ(8,"mat-error"),e._uU(9,"Unit Price is required"),e.qZA()()()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("error",t.form.controls.unit_price.invalid&&t.form.controls.unit_price.touched)}}function on(o,a){1&o&&(e.TgZ(0,"div",17)(1,"label",34),e.SDv(2,35),e.qZA(),e._UZ(3,"image-list-field",36),e.qZA())}const ce=function(){return{standalone:!0}};function an(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"form",7)(1,"div",8),e.YNc(2,Xt,10,2,"div",9),e.YNc(3,zt,10,3,"div",9),e.qZA(),e.YNc(4,en,8,6,"div",9),e.YNc(5,tn,5,0,"div",9),e.YNc(6,nn,10,2,"div",9),e.TgZ(7,"div",10)(8,"label",11),e._uU(9,"Accept Points?"),e.qZA(),e.TgZ(10,"mat-checkbox",12),e._uU(11),e.qZA()(),e.TgZ(12,"div",13)(13,"mat-checkbox",14),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(i?s.addTag({value:"Gluten Free"}):s.removeTag("Gluten Free"))}),e._uU(14," Gluten Free (GF) "),e.qZA(),e.TgZ(15,"mat-checkbox",14),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(i?s.addTag({value:"Vegan"}):s.removeTag("Vegan"))}),e._uU(16," Vegan (VG) "),e.qZA(),e.TgZ(17,"mat-checkbox",14),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(i?s.addTag({value:"Vegetarian"}):s.removeTag("Vegetarian"))}),e._uU(18," Vegetarian (V) "),e.qZA(),e.TgZ(19,"mat-checkbox",14),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(i?s.addTag({value:"Contains Dairy"}):s.removeTag("Contains Dairy"))}),e._uU(20," Contains Dairy (D) "),e.qZA(),e.TgZ(21,"mat-checkbox",14),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(i?s.addTag({value:"Contains Nuts"}):s.removeTag("Contains Nuts"))}),e._uU(22," Contains Nuts (N) "),e.qZA()(),e.TgZ(23,"div",10)(24,"label",15),e._uU(25,"Discount Cap"),e.qZA(),e._UZ(26,"a-counter",16),e.qZA(),e.YNc(27,on,4,0,"div",9),e.qZA()}if(2&o){const t=e.oxw();let n;e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("ngIf",t.form.controls.name),e.xp6(1),e.Q6J("ngIf",t.form.controls.category),e.xp6(1),e.Q6J("ngIf",t.form.controls.tags),e.xp6(1),e.Q6J("ngIf",t.form.controls.description),e.xp6(1),e.Q6J("ngIf",t.form.controls.unit_price),e.xp6(5),e.Oqu(null!=(n=t.form.get("accept_points"))&&n.value?"No":"Yes"),e.xp6(2),e.Q6J("ngModel",t.hasTag("Gluten Free"))("ngModelOptions",e.DdM(22,ce)),e.xp6(2),e.Q6J("ngModel",t.hasTag("Vegan"))("ngModelOptions",e.DdM(23,ce)),e.xp6(2),e.Q6J("ngModel",t.hasTag("Vegetarian"))("ngModelOptions",e.DdM(24,ce)),e.xp6(2),e.Q6J("ngModel",t.hasTag("Contains Dairy"))("ngModelOptions",e.DdM(25,ce)),e.xp6(2),e.Q6J("ngModel",t.hasTag("Contains Nuts"))("ngModelOptions",e.DdM(26,ce)),e.xp6(5),e.Q6J("min",0)("max",100)("step",5)("render_fn",t.renderPercent),e.xp6(1),e.Q6J("ngIf",t.form.controls.images)}}function sn(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"footer",37)(1,"button",38),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.saveChanges())}),e._uU(2," Save "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.form.dirty)}}function ln(o,a){1&o&&(e.TgZ(0,"div",39),e._UZ(1,"mat-spinner",40),e.TgZ(2,"p"),e._uU(3,"Saving catering item..."),e.qZA()())}function rn(o,a){if(1&o&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}let Ge=(()=>{class o{get item(){return this._data.item||new S.U}get categories(){return this._data.categories||[]}get tag_list(){return this.form.controls.tags.value}renderPercent(t=0){return`${t}%`}hasTag(t){return this.tag_list.includes(t)}constructor(t){this._data=t,this.event=new e.vpe,this.form=new d.cw({name:new d.NI(this.item.name||"",[d.kI.required]),description:new d.NI(this.item.description||""),category:new d.NI(this.item.category||"",[d.kI.required]),unit_price:new d.NI(this.item.unit_price,[d.kI.required]),tags:new d.NI(this.item.tags||[]),accept_points:new d.NI(this.item.accept_points||!1),discount_cap:new d.NI(this.item.discount_cap||0),images:new d.NI(this.item.images||[])}),this.loading=!1,this.separators=[Ze.K5,Ze.OC,Ze.L_]}addTag(t){if(!this.form||!this.form.controls.tags)return;this.form.controls.tags.markAsDirty();const n=t.input,i=t.value,s=this.tag_list;(i||"").trim()&&(s.push(i),this.form.controls.tags.setValue(s)),n&&(n.value="")}removeTag(t){if(!this.form||!this.form.controls.tags)return;const n=this.tag_list;this.form.controls.tags.markAsDirty();const i=n.indexOf(t);i>=0&&(n.splice(i,1),this.form.controls.tags.setValue(n))}saveChanges(){this.loading=!0,this.event.emit({reason:"done",metadata:{item:new S.U({...this.item,id:this.item.id||`item-${(0,u.Iy)(99999999)}`,...this.form.value})}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["catering-item-modal"]],outputs:{event:"event"},decls:11,vars:6,consts:function(){let a,t,n;return a=$localize`:@@tagsLabel␟800ffadd463cfe152c5af3fa9f13803ab2e77b93␟4746186018558508280: Tags: `,t=$localize`:@@zoneTagsPlaceholder␟c133beffffe3288bbdbf8572a32910c33ce14991␟2194594490376201833:Item tags e.g. Gluten Free, Vegan etc.`,n=$localize`:@@imagesLabel␟e5d9e00faa06714d7671b164cad364b26f4c585b␟5137125764814732349:Images:`,[["icon","","matRipple","","mat-dialog-close","",4,"ngIf"],["class","p-4 overflow-auto max-h-[65vh]",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex p-2 items-center justify-center border-t border-solid border-gray-300",4,"ngIf"],["load_state",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["icon","","matRipple","","mat-dialog-close",""],[1,"p-4","overflow-auto","max-h-[65vh]",3,"formGroup"],[1,"flex","items-center","space-x-2"],["class","flex flex-col",4,"ngIf"],[1,"flex","items-center"],[1,"flex-none","w-28","min-w-0"],["formControlName","accept_points"],["list","",1,"flex","items-center","flex-wrap","max-w-lg"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"flex-1","w-24","min-w-0"],["formControlName","discount_cap",1,"border","border-gray-200","rounded",3,"min","max","step","render_fn"],[1,"flex","flex-col"],["for","title"],["appearance","outline"],["matInput","","name","name","placeholder","Item name","formControlName","name"],["for","category"],["matInput","","name","category","placeholder","Category","formControlName","category",3,"matAutocomplete"],["for","tags"],a,["aria-label","Item Tags"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],["name","tags","placeholder",t,3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[3,"removed"],["matChipRemove",""],["for","description"],["matInput","","name","description","placeholder","Item Description","formControlName","description"],["matInput","","name","unit-price","type","number","placeholder","Unit Price","formControlName","unit_price"],["for","images"],n,["name","images","formControlName","images"],[1,"flex","p-2","items-center","justify-center","border-t","border-solid","border-gray-300"],["btn","","matRipple","",3,"disabled","click"],[1,"flex","flex-col","items-center","p-8","space-y-2","w-64"],["diameter","32"],[3,"value"]]},template:function(t,n){if(1&t&&(e.TgZ(0,"header")(1,"h3"),e._uU(2),e.qZA(),e.YNc(3,Ht,3,0,"button",0),e.qZA(),e.YNc(4,an,28,27,"form",1),e.YNc(5,sn,3,1,"footer",2),e.YNc(6,ln,4,0,"ng-template",null,3,e.W1O),e.TgZ(8,"mat-autocomplete",null,4),e.YNc(10,rn,2,2,"mat-option",5),e.qZA()),2&t){const i=e.MAs(7);e.xp6(2),e.hij("",n.item.id?"Edit":"Add"," Item"),e.xp6(1),e.Q6J("ngIf",!n.loading),e.xp6(1),e.Q6J("ngIf",n.form&&!n.loading)("ngIfElse",i),e.xp6(1),e.Q6J("ngIf",!n.loading),e.xp6(5),e.Q6J("ngForOf",n.categories)}},dependencies:[_.sg,_.O5,le.XC,h.ey,le.ZL,A.ZT,L.oG,d._Y,d.Fj,d.wV,d.JJ,d.JL,d.On,d.sg,d.u,v.o,w.KE,w.TO,h.wG,D.Nt,M.Ou,X.RA,X.oH,X.qH,X.z3,Ce.R,jt.h],styles:["[list][_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin:.5rem}\n/*# sourceMappingURL=catering-item-modal.component.ts-angular-inline--88.css.map*/"]}),o})();var f=p(1670),q=p(7502),P=p(4505),xe=p(4139),ve=p(9151),de=p(9095),Fe=p(7418),Z=p(6942),ue=p(8759),pe=p(9128),N=p(5670),y=p(3910),O=p(5912),We=p(3245);function _n(o,a){1&o&&(e.TgZ(0,"button",6)(1,"app-icon"),e._uU(2,"close"),e.qZA()())}function cn(o,a){if(1&o&&(e.TgZ(0,"div",9)(1,"label",10),e._uU(2," Name"),e.TgZ(3,"span"),e._uU(4,"*"),e.qZA(),e._uU(5,": "),e.qZA(),e.TgZ(6,"mat-form-field",11),e._UZ(7,"input",12),e.TgZ(8,"mat-error"),e._uU(9,"Name is required"),e.qZA()()()),2&o){const t=e.oxw(2);e.xp6(1),e.ekj("error",t.form.controls.name.invalid&&t.form.controls.name.touched)}}function dn(o,a){if(1&o&&(e.TgZ(0,"div",9)(1,"label",13),e._uU(2," Type"),e.TgZ(3,"span"),e._uU(4,"*"),e.qZA(),e._uU(5,": "),e.qZA(),e.TgZ(6,"mat-form-field",11),e._UZ(7,"input",14),e.TgZ(8,"mat-error"),e._uU(9,"Type is required"),e.qZA()()()),2&o){const t=e.oxw(2),n=e.MAs(9);e.xp6(1),e.ekj("error",t.form.controls.group.invalid&&t.form.controls.group.touched),e.xp6(6),e.Q6J("matAutocomplete",n)}}function un(o,a){1&o&&(e.TgZ(0,"div",9)(1,"label",10),e._uU(2,"Unit Price:"),e.qZA(),e.TgZ(3,"mat-form-field",11),e._UZ(4,"input",15),e.qZA()())}function pn(o,a){1&o&&(e.TgZ(0,"div",9)(1,"mat-checkbox",16),e._uU(2," Can select multiple of type "),e.qZA()())}function mn(o,a){if(1&o&&(e.TgZ(0,"form",7),e.YNc(1,cn,10,2,"div",8),e.YNc(2,dn,10,3,"div",8),e.YNc(3,un,5,0,"div",8),e.YNc(4,pn,3,0,"div",8),e.qZA()),2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("ngIf",t.form.controls.name),e.xp6(1),e.Q6J("ngIf",t.form.controls.group),e.xp6(1),e.Q6J("ngIf",t.form.controls.unit_price),e.xp6(1),e.Q6J("ngIf",t.form.controls.multiple)}}function gn(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"footer",17)(1,"button",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.saveChanges())}),e._uU(2," Save "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.form.dirty)}}function fn(o,a){1&o&&(e.TgZ(0,"div",19),e._UZ(1,"mat-spinner",20),e.TgZ(2,"p"),e._uU(3,"Saving catering item option..."),e.qZA()())}function hn(o,a){if(1&o&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}let Je=(()=>{class o{get option(){return this._data.option}get types(){return this._data.types||[]}constructor(t){this._data=t,this.event=new e.vpe,this.form=new d.cw({name:new d.NI(this.option.name||"",[d.kI.required]),group:new d.NI(this.option.group||"",[d.kI.required]),unit_price:new d.NI(this.option.unit_price),multiple:new d.NI(!!this.option.multiple,[])}),this.loading=!1}saveChanges(){this.loading=!0;const t={...this.option,id:this.option.id||`option-${(0,We.Iy)(99999999)}`,...this.form.value};this.event.emit({reason:"done",metadata:{item:new S.U({...this._data.parent,options:this._data.parent.options.filter(n=>n.id!==t.id).concat([t])})}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["catering-option-modal"]],outputs:{event:"event"},decls:11,vars:6,consts:[["icon","","mat-dialog-close","",4,"ngIf"],["class","p-4 overflow-auto max-h-[65vh]",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex p-2 items-center justify-center border-t border-solid border-gray-300",4,"ngIf"],["load_state",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["icon","","mat-dialog-close",""],[1,"p-4","overflow-auto","max-h-[65vh]",3,"formGroup"],["class","flex flex-col",4,"ngIf"],[1,"flex","flex-col"],["for","title"],["appearance","outline"],["matInput","","name","name","placeholder","Item name","formControlName","name"],["for","group"],["matInput","","name","group","placeholder","Type of option e.g. Number of sugars","formControlName","group",3,"matAutocomplete"],["matInput","","name","unit-price","type","number","placeholder","Unit Price","formControlName","unit_price"],["name","multiple","formControlName","multiple"],[1,"flex","p-2","items-center","justify-center","border-t","border-solid","border-gray-300"],["btn","","matRipple","",3,"disabled","click"],["loading","",1,"flex","flex-col","items-center","p-8","space-y-2","w-64"],["diameter","32"],[3,"value"]],template:function(t,n){if(1&t&&(e.TgZ(0,"header")(1,"h3"),e._uU(2),e.qZA(),e.YNc(3,_n,3,0,"button",0),e.qZA(),e.YNc(4,mn,5,5,"form",1),e.YNc(5,gn,3,1,"footer",2),e.YNc(6,fn,4,0,"ng-template",null,3,e.W1O),e.TgZ(8,"mat-autocomplete",null,4),e.YNc(10,hn,2,2,"mat-option",5),e.qZA()),2&t){const i=e.MAs(7);e.xp6(2),e.hij("",n.option.id?"Edit":"Add"," Item Option"),e.xp6(1),e.Q6J("ngIf",!n.loading),e.xp6(1),e.Q6J("ngIf",n.form&&!n.loading)("ngIfElse",i),e.xp6(1),e.Q6J("ngIf",!n.loading),e.xp6(5),e.Q6J("ngForOf",n.types)}},dependencies:[_.sg,_.O5,le.XC,h.ey,le.ZL,A.ZT,L.oG,d._Y,d.Fj,d.wV,d.JJ,d.JL,d.sg,d.u,v.o,w.KE,w.TO,h.wG,D.Nt,M.Ou]}),o})();var K=p(5163),Te=p(475),Cn=p(2757),xn=p(1170),vn=p(7367);function Qe(o,a){(0,xn.Z)(2,arguments);var t=(0,vn.Z)(a);return(0,Cn.Z)(o,-t)}var Be=p(1233),z=p(6119),Ye=p(8025);const Ne={};function je(o,a,t){let n=!0;for(const i of a)if(o.category===i.name||o.tags.includes(i.name)||t.resources.find(s=>s.zones.includes(i.name))||t.space?.zones.includes(i.name)||"*"===i.name){let s=0;for(const l of i.rules){const r=new Date(t.date);switch(l[0]){case"is_before":s+=(0,Te.Z)(Date.now(),Qe(r,l[1]))?1:0;break;case"within_hours":s+=(0,Be.Z)(Date.now(),Qe(r,l[1]))?1:0;break;case"after_hour":s+=(0,Be.Z)(r,(0,z.Z)(r,l[1]))?1:0;break;case"before_hour":s+=(0,Te.Z)(r,(0,z.Z)(r,l[1]))?1:0;break;case"min_length":s+=t.duration>=(0,Ye.H1)(l[1])?1:0;break;case"max_length":s+=t.duration<=(0,Ye.H1)(l[1])?1:0;break;case"visitor_type":s+=t.ext("visitor_type")===l[1]?1:0;break;default:s+=1}}n=s>=i.rules.length}return n}function Tn(o,a){1&o&&(e.TgZ(0,"div",17),e._uU(1," Options Available "),e.qZA())}function bn(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"a-counter",18),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw().$implicit,l=e.oxw(5);return e.KtG(l.updateItemQuantity(s,i))}),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("ngModel",t.quantity)}}function On(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",20)(2,"button",21)(3,"app-icon"),e._uU(4,"remove"),e.qZA()()(),e.TgZ(5,"div",22),e._uU(6),e.qZA(),e.TgZ(7,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,s=e.oxw(5);return e.KtG(s.addItem(i))}),e.TgZ(8,"app-icon"),e._uU(9,"add"),e.qZA()()()}if(2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("matTooltip",t.quantity?"Items with options must be removed from order confirmation page":""),e.xp6(1),e.Q6J("disabled",!0),e.xp6(4),e.hij(" ",t.quantity," ")}}function An(o,a){if(1&o&&(e.TgZ(0,"div",11)(1,"div",12)(2,"div",12),e._uU(3),e.qZA(),e.YNc(4,Tn,2,0,"div",13),e.qZA(),e.TgZ(5,"div",14),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.YNc(8,bn,1,1,"a-counter",15),e.YNc(9,On,10,3,"div",16),e.qZA()),2&o){const t=a.$implicit,n=e.oxw(5);e.xp6(3),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",t.options.length),e.xp6(2),e.hij(" ",e.xi3(7,5,t.unit_price/100,n.code)," "),e.xp6(2),e.Q6J("ngIf",!t.options.length),e.xp6(1),e.Q6J("ngIf",t.options.length)}}const He=function(){return{}};function wn(o,a){if(1&o&&(e.TgZ(0,"mat-tab",8)(1,"div",9),e.YNc(2,An,10,8,"div",10),e.qZA()()),2&o){const t=e.oxw().$implicit,n=e.oxw(3);e.Q6J("label",t),e.xp6(2),e.Q6J("ngForOf",(n.menu_items||e.DdM(2,He))[t])}}function Mn(o,a){if(1&o&&(e.ynx(0),e.YNc(1,wn,3,3,"mat-tab",7),e.BQk()),2&o){const t=a.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",(n.menu_items||e.DdM(1,He))[t].length)}}function Zn(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-tab-group"),e.YNc(2,Mn,2,2,"ng-container",6),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.categories)}}function Nn(o,a){if(1&o&&(e.TgZ(0,"div",4),e.YNc(1,Zn,3,1,"ng-container",5),e.qZA()),2&o){const t=e.oxw(),n=e.MAs(5);e.xp6(1),e.Q6J("ngIf",!t.show_order_details)("ngIfElse",n)}}function En(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",26),e._uU(2," Cancel "),e.qZA(),e.TgZ(3,"button",27),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.show_order_details=!0)}),e._uU(4," Confirm "),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("disabled",!t.order.item_count)("matBadge",t.order.item_count)("matBadgeHidden",!t.order.item_count)}}function Sn(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.show_order_details=!1)}),e._uU(1," Back "),e.qZA(),e.TgZ(2,"button",29),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.saveOrder())}),e._uU(3," Save Order "),e.qZA()}}function yn(o,a){if(1&o&&(e.TgZ(0,"footer",24),e.YNc(1,En,5,3,"ng-container",5),e.YNc(2,Sn,4,0,"ng-template",null,25,e.W1O),e.qZA()),2&o){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf",!n.show_order_details)("ngIfElse",t)}}function kn(o,a){if(1&o&&(e.TgZ(0,"div",30),e._UZ(1,"mat-spinner",31),e.TgZ(2,"p"),e._uU(3),e.qZA()()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.loading)}}function Pn(o,a){if(1&o&&(e.TgZ(0,"div",37),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("matTooltip",n.optionsFor(t)),e.xp6(1),e.AsE(" ",t.options.length," option",1===t.options.length?"":"s"," selected ")}}function Ln(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",34)(1,"div",12)(2,"div",12),e._uU(3),e.qZA(),e.YNc(4,Pn,2,3,"div",35),e.qZA(),e.TgZ(5,"div",14),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.TgZ(8,"a-counter",36),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.updateItemQuantity(l,i))}),e.qZA()()}if(2&o){const t=a.$implicit,n=e.oxw(2);e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",t.options.length),e.xp6(2),e.hij(" ",e.xi3(7,4,t.total_cost/100,n.code)," "),e.xp6(2),e.Q6J("ngModel",t.quantity)}}function In(o,a){if(1&o&&(e.TgZ(0,"header",32)(1,"h3"),e._uU(2,"Confirm Order"),e.qZA()(),e.TgZ(3,"div",9),e.YNc(4,Ln,9,7,"div",33),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.order.items)}}let Xe=(()=>{class o extends u.cx{get code(){return this._org.currency_code}constructor(t,n){super(),this._org=t,this._data=n,this.event=new e.vpe,this.loading="",this.menu_items={},this.categories=[],this.loading="Loading menu..."}ngOnInit(){var t=this;return(0,f.Z)(function*(){t.loading="Loading menu...",t.order=new K.G(t._data.order),t.rules=yield t._data.getCateringConfig(t.order.event?.space?.level?.parent_id),t._data.menu.subscribe(n=>{t.loading="Loading menu...";const i=(0,u.Tw)(n.map(l=>l.category)),s={};for(const l of i)s[l]=n.filter(r=>r.category===l&&je(r,t.rules,t.order.event));t.categories=i,t.menu_items=s,t.updateMenuQuantities(),t.timeout("clear_loading",()=>t.loading="",1e3)})})()}addItem(t,n=!0){const i=this.order.items.find(s=>s.id===t.id&&s.options.length===s.options.reduce((l,r)=>l+(t.options.find(c=>r.id===c.id)?1:0),0));n&&t.options?.length?this._data.selectOptions(t.options).then(s=>{const l=new S.U({...t,options:s});this.addItem(l,!1)}):this.order=new K.G(i?{...this.order,items:this.order.items.filter(s=>!(s.id===t.id&&s.options_string===t.options_string)).concat([new S.U({...t,quantity:i.quantity+1})])}:{...this.order,items:this.order.items.concat([new S.U({...t,quantity:1})])}),this.updateMenuQuantities()}removeItem(t){this.order=new K.G({...this.order,items:this.order.items.filter(n=>n.id!==t.id&&n.options_string===t.options_string)}),this.updateMenuQuantities()}updateItemQuantity(t,n){const i=this.order.items.find(l=>l.id===t.id&&l.options_string===t.options_string);let s=[...this.order.items];s=i?this.order.items.filter(l=>!(l.id===t.id&&l.options_string===t.options_string)).concat([new S.U({...t,quantity:n})]):this.order.items.concat([new S.U({...t,quantity:n})]),s.sort((l,r)=>l.name.localeCompare(r.name)),this.order=new K.G({...this.order,items:s}),this.updateMenuQuantities()}updateMenuQuantities(){for(const t in this.menu_items)for(const n of this.menu_items[t])n.quantity=this.order.items.reduce((i,s)=>s.id===n.id?i+s.quantity:i,0)}optionsFor(t){return t.options.map(n=>n.name).join("\n")}saveOrder(){this.event.emit({reason:"done",metadata:{order:this.order}})}confirmOrder(){this.show_order_details=!0}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(O.w7),e.Y36(A.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-catering-order-modal"]],outputs:{event:"event"},features:[e.qOj],decls:6,vars:3,consts:[["class","main min-w-[20rem]",4,"ngIf","ngIfElse"],["class","flex items-center justify-center space-x-2 p-2 border-t border-gray-200",4,"ngIf"],["load_state",""],["order_details",""],[1,"main","min-w-[20rem]"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[3,"label",4,"ngIf"],[3,"label"],[1,"list"],["item","","class","flex items-center p-2 border-b border-gray-200",4,"ngFor","ngForOf"],["item","",1,"flex","items-center","p-2","border-b","border-gray-200"],[1,"flex-1","w-1/2"],["class","text-xs no-underline",4,"ngIf"],[1,"bg-primary","text-xs","rounded","px-4","py-2","mx-2","text-white","font-medium"],["ngDefaultControl","",3,"ngModel","ngModelChange",4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"text-xs","no-underline"],["ngDefaultControl","",3,"ngModel","ngModelChange"],[1,"flex","items-center"],[3,"matTooltip"],["icon","","matRipple","",3,"disabled"],[1,"count","h-12","w-12","flex","items-center","justify-center"],["icon","","matRipple","",3,"click"],[1,"flex","items-center","justify-center","space-x-2","p-2","border-t","border-gray-200"],["order_actions",""],["btn","","matRipple","","mat-dialog-close","",1,"inverse"],["confirm","","btn","","matRipple","","matBadgeColor","warn",3,"disabled","matBadge","matBadgeHidden","click"],["matRipple","",1,"inverse",3,"click"],["save","","btn","","matRipple","",3,"click"],[1,"flex","flex-col","w-64","p-8","items-center","space-y-2"],["diameter","32"],[1,"h-[3.25rem]"],["item","","class","flex items-center p-2 border-b border-gray-50",4,"ngFor","ngForOf"],["item","",1,"flex","items-center","p-2","border-b","border-gray-50"],["class","text-xs underline",3,"matTooltip",4,"ngIf"],[3,"ngModel","ngModelChange"],[1,"text-xs","underline",3,"matTooltip"]],template:function(t,n){if(1&t&&(e.YNc(0,Nn,2,2,"div",0),e.YNc(1,yn,4,2,"footer",1),e.YNc(2,kn,4,1,"ng-template",null,2,e.W1O),e.YNc(4,In,5,1,"ng-template",null,3,e.W1O)),2&t){const i=e.MAs(3);e.Q6J("ngIf",!n.loading)("ngIfElse",i),e.xp6(1),e.Q6J("ngIf",!n.loading)}},dependencies:[_.sg,_.O5,re.uX,re.SP,A.ZT,Y.gM,d.Fj,d.JJ,d.On,v.o,h.wG,M.Ou,Ce.R,_.H9],styles:[".list[_ngcontent-%COMP%]{height:24em;min-width:32em;max-width:calc(100vw - 1em)}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:12em}input[_ngcontent-%COMP%]{position:relative;width:100%;padding:1em;border:none;border-radius:0!important;border-top:1px solid #ccc;border-bottom:1px solid #ccc;outline:none;font-size:1em}input[_ngcontent-%COMP%]:focus{border:none;border-top:2px solid var(--primary);border-bottom:2px solid var(--primary);box-shadow:none}input.error[_ngcontent-%COMP%]::placeholder{color:rgba(var(--error),.45)}\n/*# sourceMappingURL=catering-order-modal.component.ts-angular-inline--89.css.map*/"]}),o})();function Rn(o,a){if(1&o&&(e.TgZ(0,"div",18),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.hij(" +",e.xi3(2,1,t.unit_price/100,n.code)," ")}}function Dn(o,a){if(1&o&&(e.TgZ(0,"mat-radio-button",14)(1,"div",15)(2,"div",16),e._uU(3),e.qZA(),e.YNc(4,Rn,3,4,"div",17),e.qZA()()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(3),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",t.unit_price)}}function qn(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-radio-group",10),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw().$implicit,l=e.oxw();return e.KtG(l.updateGroupOption(s,i))}),e.TgZ(2,"mat-radio-button",11)(3,"span",12),e._uU(4,"None"),e.qZA()(),e.YNc(5,Dn,5,3,"mat-radio-button",13),e.qZA(),e.BQk()}if(2&o){const t=e.oxw().$implicit;e.xp6(5),e.Q6J("ngForOf",null==t?null:t.options)}}function Un(o,a){if(1&o&&(e.TgZ(0,"div",18),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.hij(" +",e.xi3(2,1,t.unit_price/100,n.code)," ")}}function $n(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"mat-checkbox",20),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.option_state[l.id]=i)}),e.TgZ(1,"div",15)(2,"div",16),e._uU(3),e.qZA(),e.YNc(4,Un,3,4,"div",17),e.qZA()()}if(2&o){const t=a.$implicit,n=e.oxw(3);e.Q6J("ngModel",n.option_state[t.id]),e.xp6(3),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",t.unit_price)}}function Kn(o,a){if(1&o&&e.YNc(0,$n,5,3,"mat-checkbox",19),2&o){const t=e.oxw().$implicit;e.Q6J("ngForOf",null==t?null:t.options)}}function Gn(o,a){if(1&o&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2),e.qZA(),e.TgZ(3,"div",7),e.YNc(4,qn,6,1,"ng-container",8),e.YNc(5,Kn,1,1,"ng-template",null,9,e.W1O),e.qZA()()),2&o){const t=a.$implicit,n=e.MAs(6);e.uIk("group",t.name),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Q6J("ngIf",!t.multiple)("ngIfElse",n)}}let ze=(()=>{class o{constructor(t){this._data=t,this.event=new e.vpe,this.option_state={},this.code=this._data.code;const n=(0,We.Tw)(this._data.options.map(s=>s.group||"Other")),i=[];for(const s of n){const l=this._data.options.filter(r=>r.group===s);i.push({name:s,multiple:!!l.find(r=>r.multiple),options:l})}this.groups=i}updateGroupOption(t,n){for(const i of t.options)this.option_state[i.id]=i.id===n}saveOptions(){const t=this._data.options.filter(n=>this.option_state[n.id]);this.event.emit({reason:"done",metadata:{options:t}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-catering-options-modal"]],outputs:{event:"event"},decls:11,vars:1,consts:[["icon","","mat-dialog-close",""],[1,"overflow-auto"],["class","pt-1 pb-2 border-b border-gray-200",4,"ngFor","ngForOf"],[1,"p-2"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"pt-1","pb-2","border-b","border-gray-200"],[1,"font-medium","p-2","capitalize"],[1,"flex","flex-col","pl-6"],[4,"ngIf","ngIfElse"],["multi_options",""],["aria-label","Select an option","ngModel","",1,"flex","flex-col",3,"ngModelChange"],["value","",1,"my-1","mx-0"],[1,"font-medium","p-2"],["class","my-1 mx-0",3,"value",4,"ngFor","ngForOf"],[1,"my-1","mx-0",3,"value"],[1,"flex","items-center","justify-center"],[1,"font-medium","p-2","flex-1","w-1/2"],["class","opacity-60 text-xs",4,"ngIf"],[1,"opacity-60","text-xs"],[3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"header")(1,"h3"),e._uU(2,"Select options"),e.qZA(),e.TgZ(3,"button",0)(4,"app-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"main",1),e.YNc(7,Gn,7,4,"div",2),e.qZA(),e.TgZ(8,"footer",3)(9,"button",4),e.NdJ("click",function(){return n.saveOptions()}),e._uU(10," Save "),e.qZA()()),2&t&&(e.xp6(7),e.Q6J("ngForOf",n.groups))},dependencies:[_.sg,_.O5,A.ZT,L.oG,_e.VQ,_e.U0,d.JJ,d.On,v.o,h.wG,_.H9],styles:["main[_ngcontent-%COMP%]{min-height:24em;width:24rem;max-width:calc(100vw - 2rem)}\n/*# sourceMappingURL=catering-order-options-modal.component.ts-angular-inline--90.css.map*/"]}),o})();function Wn(o,a){1&o&&(e.TgZ(0,"button",4)(1,"app-icon"),e._uU(2,"close"),e.qZA()())}function Jn(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"main")(1,"div",5)(2,"app-icon",6),e._uU(3,"upload"),e.qZA(),e.TgZ(4,"p"),e._uU(5,"Click to select file or Drag and drop files"),e.qZA(),e.TgZ(6,"input",7),e.NdJ("change",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.handleFileEvent(i))}),e.qZA()(),e.TgZ(7,"div",8)(8,"button",9),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.downloadTemplate())}),e._uU(9," Download Template "),e.qZA()()()}}function Qn(o,a){if(1&o&&(e.TgZ(0,"main",10),e._UZ(1,"mat-spinner",11),e.TgZ(2,"p"),e._uU(3),e.qZA()()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.loading)}}let Ve=(()=>{class o{constructor(){this.event=new e.vpe}handleFileEvent(t){this.loading="Processing menu data...";const n=t.target;if(!n?.files)return this.loading="";const i=n.files;if(!i.length)return this.loading="";const s=i[0],l=new FileReader;l.addEventListener("loadend",r=>{const m=(0,u.n5)(r.target.result);this.loading="",this.event.emit({reason:"done",metadata:m.filter(g=>"item"===(g.type||"").toLowerCase()).map(g=>new S.U({...g,options:m.filter(C=>"option"===(C.type||"").toLowerCase()&&C.tags===g.id).map(C=>({id:C.id,name:C.name,group:C.category,multiple:C.multiple,unit_price:C.unit_price}))}))})}),l.readAsText(s)}downloadTemplate(){(0,u.Sv)("import-menu-template.csv","ID,Type,Name,Unit Price,Category,Description,Tags,Multiple\nitem-1,item,Coffee,200,Drink,Wake Up,,\noption-1,option,1 Sugar,20,Sugars,,item-1,false")}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["catering-import-menu-modal"]],outputs:{event:"event"},decls:7,vars:3,consts:[[1,"h-12","bg-primary","flex","items-center","justify-between","px-4"],["icon","","mat-dialog-close","",4,"ngIf"],[4,"ngIf","ngIfElse"],["load_state",""],["icon","","mat-dialog-close",""],[1,"relative","flex","flex-col","items-center","justify-center","space-y-2","h-[24rem]","w-[24rem]","border-4","border-gray-200","border-dashed","rounded-xl","hover:bg-gray-100","m-4","p-4","cursor-pointer"],[1,"text-4xl"],["type","file",1,"absolute","inset-0","opacity-0",3,"change"],[1,"flex","items-center","justify-center","px-4","pb-4"],["matRipple","",1,"clear","underline","w-48",3,"click"],[1,"flex","flex-col","items-center","justify-center","space-y-2","p-8","h-[24rem]","w-[24rem]"],["diameter","32"]],template:function(t,n){if(1&t&&(e.TgZ(0,"header",0)(1,"h2"),e._uU(2,"Import Catering Menu"),e.qZA(),e.YNc(3,Wn,3,0,"button",1),e.qZA(),e.YNc(4,Jn,10,0,"main",2),e.YNc(5,Qn,4,1,"ng-template",null,3,e.W1O)),2&t){const i=e.MAs(6);e.xp6(3),e.Q6J("ngIf",!n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading)("ngIfElse",i)}},dependencies:[_.O5,A.ZT,v.o,h.wG,M.Ou]}),o})(),me=(()=>{class o extends u.cx{get is_editable(){return!this.zone||this.zone===this._org.building?.id}get categories(){const t=this._menu.getValue();return(0,u.Tw)(t.map(n=>n.category))}constructor(t,n,i){var s;super(),s=this,this._org=t,this._dialog=n,this._settings=i,this._updated=new P.X(0),this._menu=new P.X([]),this._loading=new P.X(!1),this._currency=new P.X("USD"),this.menu=this._menu.asObservable(),this.loading=this._loading.asObservable(),this.currency=this._currency.asObservable(),this.settings=this._org.active_building.pipe((0,ve.h)(l=>!!l),(0,de.w)(l=>(0,q.rlq)(l.id,"catering-settings").pipe((0,Fe.K)(r=>(0,xe.of)({})))),(0,Z.U)(l=>l.details||{}),(0,ue.b)(l=>this._settings.post("require_catering_notes",!!l?.require_notes)),(0,pe.d)(1)),this.charge_codes=this.settings.pipe((0,Z.U)(l=>l.charge_codes||[])),this.availability=this.settings.pipe((0,Z.U)(l=>l.disabled_rooms||[])),this.zone="",this.subscription("building",this._org.active_building.subscribe(function(){var l=(0,f.Z)(function*(r){if(r){const c=(yield s.getCateringForZone(r.id)).map(m=>new S.U(m));s._currency.next(s._settings.get("app.currency")||r.currency||"USD"),s._menu.next(c)}});return function(r){return l.apply(this,arguments)}}()))}manageCateringOrder(t){var n=this;return(0,f.Z)(function*(){const i=n._dialog.open(Xe,{data:{code:n._currency.getValue(),order:t,menu:n.menu,loading:n.loading,getCateringConfig:l=>n.getCateringConfig(l),selectOptions:l=>n.selectOptions(l)}}),s=yield Promise.race([i.componentInstance.event.pipe((0,N.P)(l=>"done"===l.reason)).toPromise(),i.afterClosed().toPromise()]);return i.close(),s?.metadata?.order||t})()}addItem(t=new S.U){var n=this;return(0,f.Z)(function*(){const i=n._dialog.open(Ge,{data:{item:t,categories:n.categories}}),s=yield Promise.race([i.componentInstance.event.pipe((0,N.P)(c=>"done"===c.reason)).toPromise(),i.afterClosed().toPromise()]);if("done"!==s?.reason)return;const l=n._menu.getValue(),r=l.findIndex(c=>c.id===t.id);r>=0?l.splice(r,1,s.metadata.item):l.push(s.metadata.item),n.updateMenu(n._org.building.id,l).then(()=>{n._menu.next([...l]),i.close()},()=>i.componentInstance.loading=!1)})()}updateItem(t){const n=this._menu.getValue(),i=n.findIndex(s=>s.id===t.id);i>=0?n.splice(i,1,t):n.push(t),this.updateMenu(this._org.building.id,n).then(()=>this._menu.next([...n]))}addOption(t,n={}){var i=this;return(0,f.Z)(function*(){const s=(0,u.Tw)(t.options.map(g=>g.group)),l=i._dialog.open(Je,{data:{parent:t,option:n,types:s}}),r=yield Promise.race([l.componentInstance.event.pipe((0,N.P)(g=>"done"===g.reason)).toPromise(),l.afterClosed().toPromise()]);if("done"!==r?.reason)return;const c=i._menu.getValue(),m=c.findIndex(g=>g.id===t.id);m>=0?c.splice(m,1,r.metadata.item):c.push(r.metadata.item),i.updateMenu(i._org.building.id,c).then(()=>{i._menu.next([...c]),l.close()},()=>l.componentInstance.loading=!1)})()}selectOptions(t){var n=this;return(0,f.Z)(function*(){const i=n._dialog.open(ze,{data:{code:n._currency.getValue(),options:t}}),s=yield Promise.race([i.componentInstance.event.pipe((0,N.P)(l=>"done"===l.reason)).toPromise(),i.afterClosed().toPromise()]);return"done"!==s?.reason?[]:(i.close(),s.metadata.options)})()}deleteItem(t){var n=this;return(0,f.Z)(function*(){const i=yield(0,u._5)({title:"Delete Catering Item",content:`Are you sure you wish to remove the catering item ${t.name} from the menu?`,icon:{type:"icon",class:"material-icons",content:"delete"}},n._dialog);if("done"!==i.reason)return;i.loading("Removing catering item...");const s=n._menu.getValue().filter(l=>t.id!==l.id);n.updateMenu(n._org.building.id,s).then(()=>{n._menu.next([...s]),i.close()},()=>i.loading(""))})()}deleteOption(t,n){var i=this;return(0,f.Z)(function*(){const s=yield(0,u._5)({title:"Delete Catering Item Option",content:`Are you sure you wish to remove the catering option "${n.name}" from "${t.name}"?`,icon:{type:"icon",class:"material-icons",content:"delete"}},i._dialog);if("done"!==s.reason)return;s.loading("Removing catering item option...");const l=i._menu.getValue();l.splice(l.findIndex(r=>r.id===t.id),1,new S.U({...t,options:t.options.filter(r=>r.id!==n.id)})),i.updateMenu(i._org.building.id,l).then(()=>{i._menu.next([...l]),s.close()},()=>s.loading(""))})()}editConfig(){var t=this;return(0,f.Z)(function*(){const n=yield t.getCateringConfig(t._org.building.id),{require_notes:i}=yield t.settings.pipe((0,y.q)(1)).toPromise(),s=t._menu.getValue(),l=(0,u.Tw)((0,u.xH)(s.map(m=>[m.category,...m.tags]))),r=t._dialog.open(Ke,{data:{config:n,types:l,require_notes:i,saveNotes:m=>t.saveSettings({require_notes:m})}}),c=yield Promise.race([r.componentInstance.event.pipe((0,N.P)(m=>"done"===m.reason)).toPromise(),r.afterClosed().toPromise()]);"done"===c?.reason&&t.updateConfig(t._org.building.id,c.metadata).then(()=>r.close(),()=>r.componentInstance.loading=!1)})()}importMenu(){var t=this;return(0,f.Z)(function*(){const n=t._dialog.open(Ve),i=yield Promise.race([n.componentInstance.event.pipe((0,N.P)(c=>"done"===c.reason)).toPromise(),n.afterClosed().toPromise()]);if("done"!==i?.reason)return;n.componentInstance.loading="Updating menu...";const s=t._menu.getValue(),l=t._org.building,r=(0,u.Tw)(i.metadata.concat(s),"id");yield t.updateMenu(l.id,r).catch(c=>{throw(0,u.cB)("Error importing catering menu"),n.close(),c}),(0,u.t5)(`Successfully imported catering menu. ${i.metadata.length} item(s) added.`),n.close()})()}updateMenu(t,n){return(0,q.Ymr)(t,{id:t,name:"catering",details:n,description:`Catering menu for ${t}`}).toPromise()}saveSettings(t){var n=this;return(0,f.Z)(function*(){const i=yield n.settings.pipe((0,y.q)(1)).toPromise();return(0,q.Ymr)(n._org.building.id,{id:n._org.building.id,name:"catering-settings",details:{...i,...t},description:`Catering settings for ${n._org.building.id}`}).toPromise()})()}getCateringForZone(t){return(0,f.Z)(function*(){const n=(yield(0,q.rlq)(t,"catering").toPromise()).details;return n instanceof Array?n:[]})()}getCateringConfig(t=this._org.building.id){return(0,f.Z)(function*(){const n=(yield(0,q.rlq)(t,"catering_config").toPromise()).details;return n instanceof Array?n:[]})()}updateConfig(t,n){return(0,q.Ymr)(t,{id:t,name:"catering_config",details:n,description:`Catering menu config for ${t}`}).toPromise()}addItemToOrder(t,n){let i=t.items;const s=i.find(r=>r.id===n.id&&n.options?.length===r.options?.reduce((c,m)=>c+(n.options.find(g=>m.id===g.id)?1:0),0));return s?s.quantity+=1:i=i.concat([new S.U({...n,quantity:1})]),new K.G({...t,items:i,event:null})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(O.w7),e.LFG(A.uw),e.LFG(u.gb))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var j=p(7716),nt=p(823),U=p(1810),ot=p(9377),ge=p(3200);p(4211),p(3902);let be=(()=>{class o{get currency_code(){return this._org.currency_code}constructor(t,n){this._org=t,this._settings=n,this._options=new P.X({}),this._filters=new P.X({search:"",tags:[],categories:[]}),this._loading=new P.X(""),this.loading=this._loading.asObservable(),this.filters=this._filters.asObservable(),this.settings=this._org.active_building.pipe((0,ve.h)(i=>!!i),(0,de.w)(i=>(0,q.rlq)(i.id,"catering-settings").pipe((0,Fe.K)(s=>(0,xe.of)({})))),(0,Z.U)(i=>i.details),(0,ue.b)(i=>this._settings.post("require_catering_notes",!!i?.require_notes)),(0,pe.d)(1)),this.charge_codes=this.settings.pipe((0,Z.U)(i=>i.charge_codes||[])),this.availability=this.settings.pipe((0,Z.U)(i=>i.disabled_rooms||[])),this.available_menu=(0,j.aj)([this._options,this._org.active_building]).pipe((0,ve.h)(([i,s])=>!!s),(0,de.w)(([{zone:i},s])=>(this._loading.next("[Menu]"),(0,q.rlq)(i||s.id,"catering").pipe((0,Z.U)(l=>l.details.map(r=>new S.U(r))),(0,Fe.K)(l=>[])))),(0,ue.b)(i=>this._loading.next("")),(0,pe.d)(1)),this.categories=this.available_menu.pipe((0,Z.U)(i=>(0,u.Tw)(i.map(s=>s.category)))),this.filtered_menu=(0,j.aj)([this._filters,this.available_menu]).pipe((0,de.w)(function(){var i=(0,f.Z)(function*([{search:s,tags:l,categories:r,zone_id:c,date:m,duration:g,resources:C},E]){const T=yield function Fn(o,a=!1){return o?((!Ne[o]||a)&&(Ne[o]=(0,q.rlq)(o,"catering_config").pipe((0,Z.U)(t=>t.details instanceof Array?t.details:[]),(0,Fe.K)(t=>(0,xe.of)([])))),Ne[o]):(0,xe.of)([])}(c).toPromise();let x=(s=s.toLowerCase())?E.filter(I=>I.name.toLowerCase().includes(s)):E;return x=l.length?x.filter(I=>l.every(H=>I.tags.includes(H))):x,x=r.length?x.filter(I=>r.includes(I.category)):x,x=x.filter(I=>je(I,T,{date:m,duration:g,resources:C})),x});return function(s){return i.apply(this,arguments)}}()),(0,pe.d)(1))}setOptions(t){this._options.next({...this._options.getValue(),...t})}setFilters(t){this._filters.next({...this._filters.getValue(),...t})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(O.w7),e.LFG(u.gb))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var lt=p(4475);function bo(o,a){if(1&o&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.item.quantity||"1"," ")}}function Oo(o,a){if(1&o&&e._UZ(0,"img",19),2&o){const t=e.oxw();e.Q6J("source",t.item.images[0])}}function Ao(o,a){1&o&&e._UZ(0,"img",20)}function wo(o,a){if(1&o&&(e.TgZ(0,"p",21),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,t.item.unit_price/100,t.code)," ")}}function Mo(o,a){if(1&o&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.options," ")}}function Zo(o,a){1&o&&(e.TgZ(0,"div",23),e._uU(1," GF "),e.qZA())}function No(o,a){1&o&&(e.TgZ(0,"div",24),e._uU(1," VG "),e.qZA())}function Eo(o,a){1&o&&(e.TgZ(0,"div",25),e._uU(1," V "),e.qZA())}function So(o,a){1&o&&(e.TgZ(0,"div",26),e._uU(1," D "),e.qZA())}function yo(o,a){1&o&&(e.TgZ(0,"div",27),e._uU(1," N "),e.qZA())}let rt=(()=>{class o{constructor(){this.active=!1,this.selected=!1,this.favourite=!1,this.code="USD",this.toggleFav=new e.vpe,this.select=new e.vpe}get options(){return this.item.option_list?.map(t=>t.name).join(", ")}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["catering-item-list-item"]],inputs:{item:"item",active:"active",selected:"selected",favourite:"favourite",code:"code"},outputs:{toggleFav:"toggleFav",select:"select"},decls:24,vars:17,consts:[["item","",1,"relative","p-2","rounded-lg","w-full","shadow","border","bg-white","dark:bg-neutral-600","border-gray-200","dark:border-neutral-500","sm:w-[20rem]"],["matRipple","","name","select-catering-item",1,"w-full","h-full","flex","items-center",3,"click"],[1,"relative","w-16","h-16","rounded-xl","bg-black/20","mr-4","overflow-hidden","border","border-gray-100","dark:border-neutral-600","flex","items-center","justify-center"],["class","absolute top-1 left-1 border border-white bg-black/50 rounded-full h-6 w-6 flex items-center justify-center text-white text-xs",4,"ngIf"],["auth","","class","object-cover min-h-full min-w-full",3,"source",4,"ngIf","ngIfElse"],["placeholder",""],[1,"space-y-2","text-left","flex-1"],[1,"font-medium","flex","flex-col","pr-10"],[1,"opacity-60","text-xs"],[1,"flex","items-center","text-sm","space-x-1"],["class","flex-1 w-px bg-white rounded",4,"ngIf"],["class","text-xs px-2 py-1 rounded-2xl shadow border border-gray-100",4,"ngIf"],["class","text-xs h-5 w-7 rounded-xl shadow bg-green-500 flex items-center justify-center",4,"ngIf"],["class","text-xs h-5 w-7 rounded-xl shadow bg-blue-600 flex items-center justify-center",4,"ngIf"],["class","text-xs h-5 w-7 rounded-xl shadow bg-blue-400 flex items-center justify-center",4,"ngIf"],["class","text-xs h-5 w-7 rounded-xl shadow bg-yellow-500 flex items-center justify-center",4,"ngIf"],["class","text-xs h-5 w-7 rounded-xl shadow bg-orange-600 flex items-center justify-center",4,"ngIf"],["icon","","matRipple","","name","toggle-catering-item-favourite",1,"absolute","top-1","right-1",3,"click"],[1,"absolute","top-1","left-1","border","border-white","bg-black/50","rounded-full","h-6","w-6","flex","items-center","justify-center","text-white","text-xs"],["auth","",1,"object-cover","min-h-full","min-w-full",3,"source"],["src","assets/icons/catering-placeholder.svg",1,"m-auto"],[1,"flex-1","w-px","bg-white","rounded"],[1,"text-xs","px-2","py-1","rounded-2xl","shadow","border","border-gray-100"],[1,"text-xs","h-5","w-7","rounded-xl","shadow","bg-green-500","flex","items-center","justify-center"],[1,"text-xs","h-5","w-7","rounded-xl","shadow","bg-blue-600","flex","items-center","justify-center"],[1,"text-xs","h-5","w-7","rounded-xl","shadow","bg-blue-400","flex","items-center","justify-center"],[1,"text-xs","h-5","w-7","rounded-xl","shadow","bg-yellow-500","flex","items-center","justify-center"],[1,"text-xs","h-5","w-7","rounded-xl","shadow","bg-orange-600","flex","items-center","justify-center"]],template:function(t,n){if(1&t&&(e.TgZ(0,"li",0)(1,"button",1),e.NdJ("click",function(){return n.select.emit()}),e.TgZ(2,"div",2),e.YNc(3,bo,2,1,"div",3),e.YNc(4,Oo,1,1,"img",4),e.YNc(5,Ao,1,0,"ng-template",null,5,e.W1O),e.qZA(),e.TgZ(7,"div",6)(8,"div",7)(9,"div"),e._uU(10),e.qZA(),e.TgZ(11,"div",8),e._uU(12),e.qZA()(),e.TgZ(13,"div",9),e.YNc(14,wo,3,4,"p",10),e.YNc(15,Mo,2,1,"div",11),e.YNc(16,Zo,2,0,"div",12),e.YNc(17,No,2,0,"div",13),e.YNc(18,Eo,2,0,"div",14),e.YNc(19,So,2,0,"div",15),e.YNc(20,yo,2,0,"div",16),e.qZA()()(),e.TgZ(21,"button",17),e.NdJ("click",function(){return n.toggleFav.emit()}),e.TgZ(22,"app-icon"),e._uU(23),e.qZA()()()),2&t){const i=e.MAs(6);e.ekj("!border-black",n.active),e.xp6(3),e.Q6J("ngIf",n.item.quantity&&n.selected),e.xp6(1),e.Q6J("ngIf",null==n.item.images?null:n.item.images.length)("ngIfElse",i),e.xp6(6),e.Oqu(n.item.name||"Item"),e.xp6(2),e.hij(" ",n.item.category," "),e.xp6(2),e.Q6J("ngIf",n.item.unit_price),e.xp6(1),e.Q6J("ngIf",null==n.item.option_list?null:n.item.option_list.length),e.xp6(1),e.Q6J("ngIf",null==n.item.tags?null:n.item.tags.includes("Gluten Free")),e.xp6(1),e.Q6J("ngIf",null==n.item.tags?null:n.item.tags.includes("Vegan")),e.xp6(1),e.Q6J("ngIf",null==n.item.tags?null:n.item.tags.includes("Vegetarian")),e.xp6(1),e.Q6J("ngIf",null==n.item.tags?null:n.item.tags.includes("Contains Dairy")),e.xp6(1),e.Q6J("ngIf",null==n.item.tags?null:n.item.tags.includes("Contains Nuts")),e.xp6(1),e.ekj("text-blue-400",n.favourite),e.xp6(2),e.Oqu(n.favourite?"favorite":"favorite_border")}},dependencies:[_.O5,v.o,lt.A,h.wG,_.H9]}),o})();function ko(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"catering-item-list-item",9),e.NdJ("toggleFav",function(){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.toggleFav.emit(s.id))})("select",function(){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.selectItem(s,!0))}),e.qZA()}if(2&o){const t=a.$implicit,n=e.oxw(2);e.Q6J("item",t)("active",n.active===t.custom_id)("selected",!0)("favourite",n.isFavourite(t.id))}}function Po(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2,"Ordered Items"),e.qZA(),e.TgZ(3,"p",3),e._uU(4),e.ALo(5,"async"),e.qZA(),e.TgZ(6,"ul",7),e.YNc(7,ko,1,4,"catering-item-list-item",8),e.ALo(8,"async"),e.qZA(),e.BQk()),2&o){const t=e.oxw();let n;e.xp6(4),e.hij(" ",(null==(n=e.lcZ(5,2,t.list))?null:n.length)||0," items(s) "),e.xp6(3),e.Q6J("ngForOf",e.lcZ(8,4,t.list))}}function Lo(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"catering-item-list-item",12),e.NdJ("toggleFav",function(){const s=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.toggleFav(s.id))})("select",function(){const s=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.selectItem(s,!0))}),e.qZA()}if(2&o){const t=a.$implicit,n=e.oxw(3);e.Q6J("item",t)("active",n.active===t.custom_id)("selected",n.selected.includes(t.custom_id))("favourite",n.isFavourite(t.id))("code",n.code)}}function Io(o,a){if(1&o&&(e.TgZ(0,"ul",7),e.YNc(1,Lo,1,5,"catering-item-list-item",11),e.ALo(2,"async"),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.item_list))}}function Ro(o,a){if(1&o&&(e.ynx(0),e.YNc(1,Io,3,3,"ul",10),e.ALo(2,"async"),e.BQk()),2&o){const t=e.oxw(),n=e.MAs(11);let i;e.xp6(1),e.Q6J("ngIf",null==(i=e.lcZ(2,2,t.item_list))?null:i.length)("ngIfElse",n)}}function Do(o,a){1&o&&(e.TgZ(0,"div",13)(1,"p",14),e._uU(2," No available items for selected time and/or filters "),e.qZA()())}function qo(o,a){1&o&&(e.TgZ(0,"div",15),e._UZ(1,"mat-spinner",16),e.TgZ(2,"p",17),e._uU(3,"Finding available items..."),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("diameter",32))}let _t=(()=>{class o{get code(){return this._state.currency_code}constructor(t){this._state=t,this.active="",this.selected="",this.selected_items=[],this.favorites=[],this.toggleFav=new e.vpe,this.onSelect=new e.vpe,this.list=new P.X([]),this.loading=this._state.loading,this.item_list=this._state.filtered_menu}ngOnChanges(t){t.selected_items&&this.list.next(this.selected_items||[])}isFavourite(t){return this.favorites?.includes(t)}selectItem(t,n=!1){this.onSelect.emit(t),n&&t.options?.forEach(i=>delete i.active)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(be))},o.\u0275cmp=e.Xpm({type:o,selectors:[["catering-item-list"]],inputs:{active:"active",selected:"selected",selected_items:"selected_items",favorites:"favorites"},outputs:{toggleFav:"toggleFav",onSelect:"onSelect"},features:[e.TTD],decls:14,vars:10,consts:[[1,"w-full","h-full","overflow-auto","py-2"],[4,"ngIf"],[1,"font-bold","px-2"],["count","",1,"text-sm","opacity-60","mb-2","px-2"],[4,"ngIf","ngIfElse"],["empty_state",""],["load_state",""],[1,"list-style-none","space-y-2","p-2"],["class","block",3,"item","active","selected","favourite","toggleFav","select",4,"ngFor","ngForOf"],[1,"block",3,"item","active","selected","favourite","toggleFav","select"],["class","list-style-none space-y-2 p-2",4,"ngIf","ngIfElse"],["class","block",3,"item","active","selected","favourite","code","toggleFav","select",4,"ngFor","ngForOf"],[1,"block",3,"item","active","selected","favourite","code","toggleFav","select"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"],["loading","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"],[1,"opacity-30"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Po,9,6,"ng-container",1),e.ALo(2,"async"),e.TgZ(3,"h3",2),e._uU(4,"Results"),e.qZA(),e.TgZ(5,"p",3),e._uU(6),e.ALo(7,"async"),e.qZA(),e.YNc(8,Ro,3,4,"ng-container",4),e.ALo(9,"async"),e.qZA(),e.YNc(10,Do,3,0,"ng-template",null,5,e.W1O),e.YNc(12,qo,4,1,"ng-template",null,6,e.W1O)),2&t){const i=e.MAs(13);let s,l;e.xp6(1),e.Q6J("ngIf",null==(s=e.lcZ(2,4,n.list))?null:s.length),e.xp6(5),e.hij(" ",(null==(l=e.lcZ(7,6,n.item_list))?null:l.length)||0," result(s) found "),e.xp6(2),e.Q6J("ngIf",!e.lcZ(9,8,n.loading))("ngIfElse",i)}},dependencies:[_.sg,_.O5,M.Ou,rt,_.Ov]}),o})();var Uo=p(2581);function $o(o,a){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.xi3(2,1,t.item.unit_price/100,t.code)," ")}}function Ko(o,a){if(1&o&&(e.TgZ(0,"div",20),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t," ")}}function Go(o,a){if(1&o&&(e.TgZ(0,"div",34),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(4);e.xp6(1),e.hij(" +",e.xi3(2,1,t.unit_price/100,n.code)," ")}}function Wo(o,a){if(1&o&&(e.TgZ(0,"mat-radio-button",30)(1,"div",31)(2,"div",32),e._uU(3),e.qZA(),e.YNc(4,Go,3,4,"div",33),e.qZA()()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(3),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",t.unit_price)}}function Jo(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-radio-group",25),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.group_state[s.name]=i)})("ngModelChange",function(i){e.CHM(t);const s=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.updateGroupOption(s,i))}),e.TgZ(2,"mat-radio-button",26)(3,"span",27),e.SDv(4,28),e.qZA()(),e.YNc(5,Wo,5,3,"mat-radio-button",29),e.qZA(),e.BQk()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngModel",n.group_state[t.name])("disabled",null==n.item?null:n.item.in_order),e.xp6(4),e.Q6J("ngForOf",null==t?null:t.options)}}function Qo(o,a){if(1&o&&(e.TgZ(0,"div",34),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(4);e.xp6(1),e.hij(" +",e.xi3(2,1,t.unit_price/100,n.code)," ")}}function Bo(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"mat-checkbox",36),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit,r=e.oxw(4);return e.KtG(r.option_state[l.id]=i)})("ngModelChange",function(i){const l=e.CHM(t).$implicit,r=e.oxw(4);return e.KtG(r.updateCheckedState(l.id,i))}),e.TgZ(1,"div",18)(2,"div",37),e._uU(3),e.qZA(),e.YNc(4,Qo,3,4,"div",33),e.qZA()()}if(2&o){const t=a.$implicit,n=e.oxw(4);e.Q6J("ngModel",n.option_state[t.id])("disabled",null==n.item?null:n.item.in_order),e.xp6(3),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",t.unit_price)}}function Yo(o,a){if(1&o&&e.YNc(0,Bo,5,4,"mat-checkbox",35),2&o){const t=e.oxw().$implicit;e.Q6J("ngForOf",null==t?null:t.options)}}function jo(o,a){if(1&o&&(e.TgZ(0,"div",21)(1,"div",22),e._uU(2),e.qZA(),e.TgZ(3,"div",23),e.YNc(4,Jo,6,3,"ng-container",0),e.YNc(5,Yo,1,1,"ng-template",null,24,e.W1O),e.qZA()()),2&o){const t=a.$implicit,n=e.MAs(6);e.uIk("group",t.name),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.Q6J("ngIf",!t.multiple)("ngIfElse",n)}}function Ho(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"section",2),e._UZ(2,"image-carousel",3),e.TgZ(3,"button",4),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.close.emit())}),e.TgZ(4,"app-icon"),e._uU(5,"arrow_back"),e.qZA()(),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleFav.emit())}),e.TgZ(7,"app-icon"),e._uU(8),e.qZA()()(),e.TgZ(9,"div",6)(10,"section",7)(11,"div")(12,"h2",8),e._uU(13),e.qZA(),e.YNc(14,$o,3,4,"p",9),e.qZA(),e.TgZ(15,"a-counter",10),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.item.quantity=i)})("ngModelChange",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.active?i.activeChange.emit(i.active):"")}),e.qZA()(),e.TgZ(16,"section",11),e.YNc(17,Ko,2,1,"div",12),e.qZA(),e._UZ(18,"hr"),e.TgZ(19,"section",13)(20,"div",14),e.YNc(21,jo,7,4,"div",15),e.qZA()()(),e.TgZ(22,"div",16)(23,"button",17),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.active=!i.active,e.KtG(i.activeChange.emit(i.active))}),e.TgZ(24,"div",18)(25,"app-icon",19),e._uU(26),e.qZA(),e.TgZ(27,"p"),e._uU(28),e.qZA()()()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("images",t.item.images),e.xp6(4),e.ekj("text-white",!t.fav)("text-blue-400",t.fav),e.xp6(2),e.Oqu(t.fav?"favorite":"favorite_border"),e.xp6(5),e.hij(" ",t.item.name," "),e.xp6(1),e.Q6J("ngIf",t.item.unit_price),e.xp6(1),e.Q6J("ngModel",t.item.quantity)("min",1)("max",t.item.count||10),e.xp6(2),e.Q6J("ngForOf",t.item.tags),e.xp6(4),e.Q6J("ngForOf",t.groups),e.xp6(2),e.ekj("inverse",t.active),e.xp6(3),e.Oqu(t.active?"remove":"add"),e.xp6(2),e.hij(" ",t.active?"Remove this item":"Add this item"," ")}}function Xo(o,a){1&o&&(e.TgZ(0,"div",38)(1,"p",39),e.SDv(2,40),e.qZA()())}let ct=(()=>{class o{constructor(){this.active=!1,this.fav=!1,this.code="USD",this.toggleFav=new e.vpe,this.activeChange=new e.vpe,this.close=new e.vpe,this.option_state={},this.group_state={}}ngOnChanges(t){t.item&&this.item&&this._update()}updateGroupOption(t,n){if(t){this.group_state[t.name]=n;for(const i of t.options)i.active=i.id===n}}updateCheckedState(t,n){const i=this.item?.options.find(s=>s.id===t);i&&(i.active=n)}_update(){if(!this.item)return;this.item.quantity||(this.item.quantity=1),this.option_state={},this.group_state={};const t=(0,u.Tw)(this.item.options.map(i=>i.group||"Other")),n=[];for(const i of t){const s=this.item.options.filter(l=>l.group===i);n.push({name:i,multiple:!!s.find(l=>l.multiple),options:s})}if(this.groups=n,this.item.option_list)for(const i of this.item.option_list){const s=this.item.options.find(l=>l.id===i.id);s&&(s.active=!0,this.option_state[i.id]=!0,this.updateGroupOption(this.groups.find(l=>l.name===s.group),s.id))}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["catering-item-details"]],inputs:{item:"item",active:"active",fav:"fav",code:"code"},outputs:{toggleFav:"toggleFav",activeChange:"activeChange",close:"close"},features:[e.TTD],decls:3,vars:2,consts:function(){let a,t;return a=$localize`:␟a2f14a73f7a6e94479f67423cc51102da8d6f524␟6252070156626006029:None`,t=$localize`:␟0fab86098296160aef9d98a89e252bee5cf35141␟2528715266490787662: Select an item to view it's details `,[[4,"ngIf","ngIfElse"],["empty_state",""],["image","",1,"relative","w-full","h-64","sm:h-40","bg-black/20"],[1,"absolute","inset-0",3,"images"],["icon","","matRipple","","name","close-catering-item-details",1,"absolute","top-2","left-2","bg-black/40","sm:hidden","text-white",3,"click"],["icon","","matRipple","","name","toggle-catering-item-favourite-details",1,"absolute","top-2","right-2","bg-black/40",3,"click"],[1,"p-2","space-y-2","flex-1","h-1/2","overflow-auto"],["actions","",1,"z-0","flex","items-center","justify-between"],[1,"text-xl","font-medium","mb-2","mt-4"],[4,"ngIf"],[3,"ngModel","min","max","ngModelChange"],[1,"flex","items-center","flex-wrap"],["class","px-2 py-1 rounded-2xl bg-gray-200 dark:bg-neutral-500 text-sm capitalize m-1",4,"ngFor","ngForOf"],["details","",1,"space-y-2"],[1,"flex","flex-col","flex-wrap"],["class","min-w-1/2 flex-1",4,"ngFor","ngForOf"],[1,"px-2","pt-2","pb-[5.5rem]","border-t","border-gray-200","shadow","sm:hidden"],["btn","","matRipple","","name","select-catering-item-details",1,"w-full",3,"click"],[1,"flex","items-center","justify-center"],[1,"text-2xl"],[1,"px-2","py-1","rounded-2xl","bg-gray-200","dark:bg-neutral-500","text-sm","capitalize","m-1"],[1,"min-w-1/2","flex-1"],[1,"font-medium","p-2","capitalize"],[1,"flex","flex-col","pl-4"],["multi_options",""],["aria-label","Select an option",1,"flex","flex-col",3,"ngModel","disabled","ngModelChange"],["value","",1,"m-0"],[1,"font-medium","p-2"],a,["class","m-0",3,"value",4,"ngFor","ngForOf"],[1,"m-0",3,"value"],[1,"flex","items-center","justify-center","max-w-[calc(100vw-4rem)]","sm:max-w-[15rem]"],[1,"font-medium","p-2","flex-1","w-1/2","whitespace-normal"],["class","opacity-60 text-xs",4,"ngIf"],[1,"opacity-60","text-xs"],[3,"ngModel","disabled","ngModelChange",4,"ngFor","ngForOf"],[3,"ngModel","disabled","ngModelChange"],[1,"font-medium","p-2","flex-1","w-1/2"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"],t]},template:function(t,n){if(1&t&&(e.YNc(0,Ho,29,17,"ng-container",0),e.YNc(1,Xo,3,0,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",n.item)("ngIfElse",i)}},dependencies:[_.sg,_.O5,L.oG,_e.VQ,_e.U0,d.JJ,d.On,v.o,Uo.K,h.wG,Ce.R,_.H9],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:30%;min-width:20rem;height:100%;min-height:65vh}\n/*# sourceMappingURL=catering-item-details.component.ts-angular-inline--96.css.map*/"]}),o})();function zo(o,a){1&o&&(e.TgZ(0,"h3",7),e.SDv(1,8),e.qZA())}function Vo(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"mat-checkbox",9),e.NdJ("ngModelChange",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.toggleCategory(s))}),e.ALo(1,"async"),e._uU(2),e.qZA()}if(2&o){const t=a.$implicit,n=e.oxw();let i;e.Q6J("ngModel",null==(i=e.lcZ(1,3,n.filters))||null==i.categories?null:i.categories.includes(t)),e.uIk("name",t),e.xp6(2),e.hij(" ",t," ")}}const ei={coffee:'<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <g clip-path="url(#clip0_605_8664)">\n    <path d="M38.388 21.2474C37.8243 20.7996 37.1598 20.4847 36.4474 20.3278C35.735 20.1708 34.9944 20.1762 34.2846 20.3434C34.2476 19.7774 34.2049 19.2037 34.1483 18.6155C34.1243 18.3664 34.0043 18.1349 33.8119 17.9668C33.6195 17.7986 33.3687 17.706 33.1088 17.707H1.26151C1.00166 17.706 0.750839 17.7986 0.558442 17.9668C0.366045 18.1349 0.246035 18.3664 0.222073 18.6155C-0.42931 25.3581 0.106585 30.5307 4.80024 35.4799C8.88062 39.7819 15.7271 39.9998 17.0599 39.9998H17.3047C18.6375 39.9998 25.4863 39.7774 29.5643 35.4799C30.5412 34.4597 31.3937 33.3353 32.1052 32.1286C32.2481 32.1199 32.3875 32.0819 32.514 32.0174C34.0959 31.2139 35.6169 30.3039 37.0656 29.2943C38.3815 28.4227 39.3664 27.1618 39.871 25.7028C40.0702 24.9006 40.0372 24.0612 39.7758 23.2757C39.5144 22.4902 39.0344 21.7887 38.388 21.2474ZM28.0329 34.13C24.4699 37.8905 18.0323 37.9984 17.3093 37.9984H17.0645C16.3426 37.9984 9.90389 37.8872 6.34092 34.13C2.37257 29.9436 1.75351 25.466 2.21549 19.7085H32.1583C32.6214 25.4649 32.0024 29.9425 28.0329 34.13ZM37.8498 25.2091C37.4485 26.2369 36.7212 27.117 35.771 27.7243C35.024 28.2636 34.2434 28.7582 33.4334 29.2053C34.1268 27.0036 34.4428 24.7078 34.3689 22.4082C34.3839 22.4027 34.3989 22.4082 34.4139 22.3982C34.8447 22.2182 35.3192 22.1579 35.7837 22.2242C36.2482 22.2905 36.6841 22.4808 37.0421 22.7733C37.4001 23.0659 37.6658 23.4491 37.8092 23.8796C37.9525 24.3101 37.9678 24.7707 37.8533 25.2091H37.8498Z" fill="currentcolor"/>\n    <path d="M9.43243 8.16274C9.85735 8.48322 10.2069 8.88673 10.4582 9.34669C10.7094 9.80666 10.8565 10.3126 10.89 10.8313C10.7939 11.9569 10.2754 13.0103 9.43128 13.7946C9.32937 13.883 9.24664 13.9899 9.18786 14.1092C9.12907 14.2286 9.0954 14.3579 9.08878 14.4898C9.08216 14.6217 9.10275 14.7536 9.14931 14.8778C9.19588 15.002 9.26753 15.1161 9.36012 15.2136C9.45271 15.311 9.56442 15.3898 9.6888 15.4455C9.81319 15.5012 9.9478 15.5326 10.0849 15.538C10.2219 15.5433 10.3587 15.5225 10.4874 15.4767C10.6161 15.4309 10.734 15.3611 10.8345 15.2712C12.1048 14.1093 12.8679 12.5254 12.9688 10.8413C12.9432 10.042 12.7392 9.25727 12.3708 8.5405C12.0023 7.82373 11.478 7.19166 10.8334 6.68722C10.4067 6.38353 10.055 5.99283 9.80341 5.54303C9.55184 5.09323 9.40662 4.59547 9.37815 4.08534C9.51392 3.18283 10.0073 2.36595 10.7548 1.80591C10.9718 1.64618 11.1147 1.41065 11.1528 1.15024C11.1908 0.889843 11.1208 0.625512 10.958 0.414392C10.7951 0.203272 10.5525 0.062327 10.2826 0.0220596C10.0127 -0.0182078 9.73715 0.0454338 9.51559 0.199206C8.90219 0.651996 8.39004 1.21933 8.0098 1.86721C7.62956 2.5151 7.38907 3.2302 7.30273 3.9697C7.30292 4.77855 7.49485 5.5767 7.86392 6.30333C8.23298 7.02996 8.76944 7.66592 9.43243 8.16274Z" fill="currentcolor"/>\n    <path d="M23.0984 8.16274C23.5234 8.48322 23.8729 8.88673 24.1242 9.34669C24.3754 9.80666 24.5225 10.3126 24.556 10.8313C24.4599 11.9569 23.9414 13.0103 23.0973 13.7946C22.9954 13.883 22.9126 13.9899 22.8539 14.1092C22.7951 14.2286 22.7614 14.3579 22.7548 14.4898C22.7482 14.6217 22.7687 14.7536 22.8153 14.8778C22.8619 15.002 22.9335 15.1161 23.0261 15.2136C23.1187 15.311 23.2304 15.3898 23.3548 15.4455C23.4792 15.5012 23.6138 15.5326 23.7509 15.538C23.8879 15.5433 24.0247 15.5225 24.1534 15.4767C24.2821 15.4309 24.4 15.3611 24.5005 15.2712C25.7708 14.1093 26.5339 12.5254 26.6348 10.8413C26.6092 10.042 26.4052 9.25727 26.0368 8.5405C25.6683 7.82373 25.144 7.19166 24.4994 6.68722C24.0727 6.38353 23.721 5.99283 23.4694 5.54303C23.2178 5.09323 23.0726 4.59547 23.0442 4.08534C23.1799 3.18283 23.6733 2.36595 24.4208 1.80591C24.6378 1.64618 24.7807 1.41065 24.8188 1.15024C24.8568 0.889843 24.7868 0.625512 24.624 0.414392C24.4611 0.203272 24.2185 0.062327 23.9486 0.0220596C23.6787 -0.0182078 23.4032 0.0454338 23.1816 0.199206C22.5682 0.651996 22.0561 1.21933 21.6758 1.86721C21.2956 2.5151 21.0551 3.2302 20.9688 3.9697C20.9689 4.77855 21.1609 5.5767 21.5299 6.30333C21.899 7.02996 22.4355 7.66592 23.0984 8.16274Z" fill="currentcolor"/>\n    <path d="M16.2645 8.16274C16.6894 8.48322 17.039 8.88673 17.2902 9.34669C17.5414 9.80666 17.6886 10.3126 17.722 10.8313C17.626 11.9569 17.1074 13.0103 16.2633 13.7946C16.1614 13.883 16.0787 13.9899 16.0199 14.1092C15.9611 14.2286 15.9274 14.3579 15.9208 14.4898C15.9142 14.6217 15.9348 14.7536 15.9813 14.8778C16.0279 15.002 16.0996 15.1161 16.1922 15.2136C16.2847 15.311 16.3964 15.3898 16.5208 15.4455C16.6452 15.5012 16.7798 15.5326 16.9169 15.538C17.054 15.5433 17.1908 15.5225 17.3194 15.4767C17.4481 15.4309 17.5661 15.3611 17.6666 15.2712C18.9368 14.1093 19.6999 12.5254 19.8009 10.8413C19.7752 10.042 19.5713 9.25727 19.2028 8.5405C18.8343 7.82373 18.31 7.19166 17.6654 6.68722C17.2387 6.38353 16.887 5.99283 16.6354 5.54303C16.3839 5.09323 16.2386 4.59547 16.2102 4.08534C16.346 3.18283 16.8393 2.36595 17.5869 1.80591C17.8038 1.64618 17.9468 1.41065 17.9848 1.15024C18.0228 0.889843 17.9528 0.625512 17.79 0.414392C17.6271 0.203272 17.3845 0.062327 17.1146 0.0220596C16.8447 -0.0182078 16.5692 0.0454338 16.3476 0.199206C15.7342 0.651996 15.2221 1.21933 14.8418 1.86721C14.4616 2.5151 14.2211 3.2302 14.1348 3.9697C14.1349 4.77855 14.3269 5.5767 14.6959 6.30333C15.065 7.02996 15.6015 7.66592 16.2645 8.16274Z" fill="currentcolor"/>\n    <path d="M7.16328 29.7138C5.86597 27.7051 5.17938 25.3866 5.18141 23.0212C5.18141 22.7558 5.07191 22.5013 4.87697 22.3136C4.68204 22.1259 4.41765 22.0205 4.14198 22.0205C3.8663 22.0205 3.60191 22.1259 3.40698 22.3136C3.21204 22.5013 3.10254 22.7558 3.10254 23.0212C3.10081 25.7653 3.89738 28.4551 5.40201 30.7857C5.55001 31.0072 5.78275 31.1637 6.04976 31.2211C6.31677 31.2784 6.59652 31.2322 6.82832 31.0923C7.06012 30.9524 7.22529 30.7301 7.288 30.4737C7.35071 30.2174 7.30588 29.9475 7.16328 29.7227V29.7138Z" fill="currentcolor"/>\n    <path d="M9.06498 32.7103C8.94112 32.6482 8.84235 32.548 8.78434 32.4257C8.73082 32.3026 8.65227 32.1911 8.55334 32.0977C8.45441 32.0043 8.33708 31.9309 8.20825 31.8818C8.07942 31.8327 7.9417 31.8089 7.80317 31.8118C7.66464 31.8146 7.5281 31.8441 7.40159 31.8986C7.27508 31.953 7.16115 32.0312 7.06649 32.1286C6.97184 32.226 6.89837 32.3407 6.8504 32.4658C6.80244 32.591 6.78094 32.7241 6.78719 32.8574C6.79344 32.9906 6.8273 33.1213 6.88678 33.2418C7.13536 33.7758 7.56332 34.2136 8.10177 34.4849C8.34682 34.6079 8.63256 34.6321 8.89616 34.5523C9.15975 34.4724 9.37959 34.295 9.50732 34.0591C9.63505 33.8232 9.6602 33.5481 9.57725 33.2943C9.49429 33.0405 9.31003 32.8289 9.06498 32.7059V32.7103Z" fill="currentcolor"/>\n    </g>\n    <defs>\n    <clipPath id="clip0_605_8664">\n    <rect width="40" height="40" fill="white"/>\n    </clipPath>\n    </defs>\n    </svg>\n    ',drinks:'<svg width="28" height="39" viewBox="0 0 28 39" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <g clip-path="url(#clip0_598_8203)">\n    <path d="M0 0L0.662157 8.11078C0.662157 8.12619 0.653028 8.1394 0.653028 8.15481C0.658117 8.18851 0.664982 8.22193 0.673584 8.25496L3.1852 39H25.1048L28.0034 0H0ZM25.7932 1.98093L25.4085 7.16985C25.3982 7.16985 25.3902 7.16985 25.3799 7.16985H2.64519L2.22279 1.98642L25.7932 1.98093ZM23.1948 37.0191H5.08147L2.80846 9.14527H25.2612L23.1948 37.0191Z" fill="currentcolor"/>\n    <path d="M6.24983 23.3122C6.28864 23.3122 6.32861 23.3122 6.364 23.3122C6.49825 23.2972 6.6281 23.2567 6.74613 23.1933C6.86415 23.1298 6.96804 23.0445 7.05181 22.9423C7.13559 22.8401 7.19762 22.7229 7.23436 22.5975C7.2711 22.4722 7.28181 22.341 7.26589 22.2117C7.0661 20.5444 6.86517 18.8155 6.66538 17.0855C6.4576 15.2861 6.24869 13.4846 6.03862 11.7502C5.99894 11.4962 5.85848 11.267 5.64686 11.111C5.43525 10.955 5.16904 10.8843 4.90438 10.9138C4.63973 10.9434 4.39731 11.0708 4.22831 11.2694C4.0593 11.4679 3.9769 11.722 3.9985 11.978C4.20628 13.7091 4.41522 15.5084 4.623 17.3056C4.82392 19.0378 5.02485 20.77 5.22578 22.4395C5.25574 22.6807 5.37661 22.9029 5.56542 23.0638C5.75424 23.2247 5.99781 23.3131 6.24983 23.3122Z" fill="currentcolor"/>\n    <path d="M6.05485 24.414C5.9204 24.4288 5.79029 24.469 5.67201 24.5323C5.55372 24.5957 5.44958 24.6809 5.36557 24.7832C5.28156 24.8854 5.21933 25.0027 5.18245 25.1282C5.14557 25.2537 5.13477 25.385 5.15067 25.5145L5.31392 26.8857C5.34197 27.1276 5.46141 27.351 5.64945 27.5134C5.83748 27.6758 6.08096 27.7658 6.33341 27.7662C6.37223 27.7662 6.41105 27.7662 6.44759 27.7607C6.5817 27.7462 6.71152 27.7063 6.82966 27.6434C6.9478 27.5806 7.05194 27.4959 7.13612 27.3942C7.22029 27.2925 7.28287 27.1758 7.32027 27.0508C7.35766 26.9258 7.36913 26.7949 7.35404 26.6656L7.1908 25.2889C7.15839 25.0286 7.02114 24.791 6.80864 24.6273C6.59614 24.4636 6.32541 24.387 6.05485 24.414Z" fill="currentcolor"/>\n    </g>\n    <defs>\n    <clipPath id="clip0_598_8203">\n    <rect width="28" height="39" fill="white"/>\n    </clipPath>\n    </defs>\n    </svg>\n    ',snacks:'<svg width="44" height="30" viewBox="0 0 44 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M39.9739 12.3839H39.9673C39.8416 11.3068 39.529 10.2613 39.0441 9.29623C38.2937 7.89066 37.2396 6.67826 35.9616 5.75118C34.6837 4.82411 33.2156 4.20677 31.669 3.94605C31.658 3.94605 31.6471 3.94605 31.635 3.94605C29.7116 1.41671 26.4577 0.0219894 22.162 0.00292969C17.7851 0.0287164 14.3819 1.44362 12.4015 3.94605C12.3773 3.94605 12.3553 3.94605 12.3312 3.94605C10.7845 4.20721 9.31631 4.82484 8.03823 5.75207C6.76016 6.6793 5.70574 7.89174 4.95505 9.29734C4.47112 10.2623 4.15888 11.3074 4.03289 12.3839H4.02631C2.34137 14.0479 1.12087 16.1402 0.490328 18.4457C-0.140217 20.7512 -0.15805 23.1866 0.438675 25.5015C1.16762 28.1328 2.30494 29.6228 3.81991 29.9323C4.02143 29.975 4.22667 29.9968 4.43249 29.9973C5.03503 29.925 5.61546 29.722 6.13483 29.4017C6.6542 29.0815 7.1005 28.6516 7.44377 28.1407C8.13563 27.3077 8.96125 26.601 9.88529 26.0508C10.6588 25.658 11.4715 25.3513 12.3092 25.136C12.7407 25.007 13.2105 24.8624 13.7122 24.6875C14.2182 24.7717 14.7299 24.8148 15.2426 24.8164C16.5191 24.8132 17.7827 24.5561 18.963 24.0597C19.2243 24.1678 19.4915 24.2603 19.7633 24.3366C20.4624 24.5255 21.1737 24.6634 21.892 24.7492C21.9649 24.7584 22.0386 24.7584 22.1115 24.7492C22.8298 24.6634 23.5411 24.5255 24.2402 24.3366C24.5121 24.2602 24.7794 24.1674 25.0405 24.0585C26.6985 24.7663 28.5179 24.9843 30.2913 24.6875C30.7941 24.8568 31.2639 25.0014 31.6954 25.136C32.5326 25.3518 33.3449 25.6585 34.1182 26.0508C35.0422 26.6006 35.8675 27.3074 36.5586 28.1407C36.9021 28.6516 37.3486 29.0816 37.8682 29.4018C38.3877 29.722 38.9683 29.925 39.571 29.9973C39.7765 29.9968 39.9813 29.975 40.1825 29.9323C41.6986 29.6228 42.8359 28.1317 43.5648 25.5015C44.1604 23.1863 44.1418 20.7509 43.5107 18.4455C42.8796 16.1401 41.6588 14.0479 39.9739 12.3839ZM8.94886 24.276C7.83296 24.927 6.83512 25.7694 5.99906 26.7661C5.09447 27.7561 4.76074 28.07 4.20854 27.9568C3.49936 27.8111 2.83628 26.7459 2.34227 24.9543C1.92223 23.3112 1.86627 21.5932 2.17848 19.9252C2.4907 18.2572 3.16322 16.6814 4.14706 15.3124C4.29059 16.0686 4.52165 16.8048 4.83539 17.5054C6.01506 20.1182 8.00316 22.2624 10.4935 23.6078C9.96108 23.7857 9.44437 24.0092 8.94886 24.276ZM14.1514 22.7266C13.9962 22.6555 13.8256 22.6265 13.6562 22.6425C12.1235 22.2411 10.6976 21.4958 9.48221 20.461C8.26685 19.4261 7.2926 18.1277 6.63029 16.66C6.16216 15.6502 5.92631 14.5445 5.94077 13.4274C5.95523 12.3102 6.21962 11.2112 6.71373 10.2145C7.64306 8.45293 9.17618 7.10357 11.0193 6.42493C9.99726 9.36013 10.6472 13.6553 12.7165 17.6365C13.6785 19.5654 15.0132 21.2752 16.6401 22.6627C15.8195 22.8232 14.9787 22.8448 14.1514 22.7266ZM23.7451 22.3903C23.1716 22.5448 22.5889 22.6613 22.0007 22.7389C21.4117 22.6614 20.8283 22.5449 20.254 22.3903C18.2033 21.8521 16.0374 19.7219 14.462 16.6925C12.6704 13.2438 12.0469 9.47672 12.8834 7.09538C14.473 2.55356 19.9093 2.03223 22.1653 2.01765C25.4445 2.03783 29.66 2.93475 31.1157 7.09538C31.9501 9.4756 31.3353 13.2427 29.5393 16.6903C27.9628 19.7197 25.798 21.851 23.7451 22.3891V22.3903ZM27.3579 22.6649C28.9873 21.2782 30.3233 19.5673 31.2848 17.6365C33.353 13.6542 34.0019 9.36013 32.9798 6.42493C34.8231 7.1032 36.3564 8.45266 37.2854 10.2145C37.7798 11.2111 38.0446 12.31 38.0594 13.4271C38.0743 14.5442 37.8388 15.6501 37.371 16.66C36.7089 18.1267 35.7356 19.4246 34.5215 20.4595C33.3074 21.4945 31.883 22.2405 30.3517 22.6436C30.1773 22.6248 30.0013 22.6546 29.8423 22.73C29.0162 22.8474 28.1769 22.825 27.3579 22.6638V22.6649ZM41.6601 24.9555C41.165 26.7493 40.5009 27.8122 39.7939 27.9579C39.2516 28.07 38.9156 27.7595 38.0033 26.7673C37.1671 25.7707 36.1693 24.9284 35.0536 24.2772C34.5589 24.0089 34.0429 23.7839 33.5111 23.6045C36.0014 22.2591 37.9895 20.1148 39.1692 17.502C39.4825 16.8016 39.7135 16.0659 39.8575 15.3101C40.8408 16.6799 41.5127 18.2562 41.8245 19.9245C42.1364 21.5927 42.0802 23.311 41.6601 24.9543V24.9555Z" fill="currentColor"/>\n    <path d="M17.3428 15.7782C16.1626 13.048 15.7674 10.0313 16.2032 7.08028C16.2231 6.94931 16.2174 6.81565 16.1867 6.68691C16.1559 6.55816 16.1006 6.43686 16.024 6.32994C15.9473 6.22302 15.8508 6.13257 15.7399 6.06375C15.629 5.99493 15.5059 5.94908 15.3777 5.92884C15.2495 5.90859 15.1186 5.91434 14.9925 5.94576C14.8665 5.97717 14.7477 6.03365 14.643 6.11194C14.5383 6.19023 14.4497 6.2888 14.3824 6.40205C14.315 6.5153 14.2701 6.641 14.2503 6.77197C13.7579 10.1061 14.2045 13.5144 15.538 16.5989C15.5889 16.7227 15.6636 16.8349 15.7575 16.9289C15.8515 17.0229 15.9628 17.0967 16.0851 17.1462C16.2074 17.1956 16.3381 17.2197 16.4695 17.2168C16.601 17.214 16.7306 17.1844 16.8507 17.1298C16.9709 17.0752 17.0791 16.9966 17.1691 16.8987C17.2591 16.8008 17.3291 16.6855 17.3749 16.5597C17.4208 16.4338 17.4415 16.2998 17.436 16.1656C17.4305 16.0315 17.3988 15.8997 17.3428 15.7782Z" fill="currentColor"/>\n    <path d="M19.696 19.2067C19.2865 18.9533 18.9569 18.5852 18.7464 18.146C18.6921 18.023 18.6143 17.9124 18.5174 17.8206C18.4206 17.7288 18.3067 17.6578 18.1825 17.6118C18.0583 17.5658 17.9263 17.5456 17.7944 17.5526C17.6625 17.5596 17.5333 17.5935 17.4144 17.6524C17.2955 17.7112 17.1894 17.7939 17.1023 17.8953C17.0153 17.9968 16.949 18.1151 16.9075 18.2432C16.866 18.3712 16.85 18.5065 16.8606 18.641C16.8712 18.7755 16.908 18.9065 16.969 19.0262C17.3477 19.8156 17.9407 20.4772 18.6772 20.9321C18.7884 21.0004 18.9117 21.0457 19.0401 21.0654C19.1684 21.085 19.2993 21.0786 19.4253 21.0466C19.5512 21.0146 19.6698 20.9576 19.7741 20.8788C19.8785 20.8 19.9666 20.701 20.0335 20.5874C20.1004 20.4738 20.1448 20.3478 20.164 20.2168C20.1832 20.0857 20.177 19.952 20.1456 19.8234C20.1143 19.6947 20.0585 19.5737 19.9813 19.4671C19.9041 19.3605 19.8072 19.2705 19.696 19.2022V19.2067Z" fill="currentColor"/>\n    </svg>\n    ',meals:'<svg width="44" height="47" viewBox="0 0 44 47" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <g clip-path="url(#clip0_598_8219)">\n    <path d="M42.941 2.11595C42.7415 1.9851 42.4981 1.93888 42.2644 1.98745C42.0307 2.03602 41.8259 2.1754 41.695 2.37496L34.006 14.102C33.3796 13.6496 32.7178 13.2483 32.027 12.902C32.0551 12.8557 32.0786 12.8068 32.097 12.756L35.4431 1.14795C35.5094 0.91841 35.4818 0.671927 35.3663 0.46273C35.2509 0.253533 35.0571 0.098759 34.8275 0.0324549C34.598 -0.0338492 34.3515 -0.0062506 34.1423 0.109178C33.9331 0.224607 33.7783 0.41841 33.712 0.647954L30.382 12.202C28.8498 11.6558 27.2357 11.3751 25.609 11.372C23.5868 11.3208 21.5789 11.7248 19.7337 12.5541C17.8886 13.3834 16.2534 14.6167 14.949 16.163C13.472 15.5617 11.8698 15.3326 10.2834 15.4959C8.69704 15.6593 7.17511 16.21 5.85156 17.0996C4.528 17.9893 3.44339 19.1906 2.69314 20.5978C1.94289 22.0051 1.54999 23.5752 1.54904 25.17H0.900049C0.781014 25.1699 0.663159 25.1936 0.553309 25.2394C0.443459 25.2853 0.343801 25.3524 0.260096 25.4371C0.176391 25.5217 0.110305 25.6221 0.0656684 25.7325C0.0210317 25.8428 -0.00126705 25.9609 5.5571e-05 26.08C0.0892682 29.5951 1.16582 33.0142 3.10662 35.9464C5.04743 38.8786 7.77413 41.2054 10.975 42.661V45.147C10.975 45.3856 11.0699 45.6146 11.2386 45.7834C11.4074 45.9521 11.6364 46.047 11.8751 46.047H29.692C29.9307 46.047 30.1596 45.9521 30.3284 45.7834C30.4972 45.6146 30.592 45.3856 30.592 45.147V42.665C33.7927 41.2092 36.5191 38.8822 38.4597 35.9501C40.4004 33.018 41.4768 29.599 41.566 26.084C41.5674 25.9649 41.5451 25.8468 41.5004 25.7365C41.4558 25.6261 41.3897 25.5257 41.306 25.4411C41.2223 25.3565 41.1226 25.2893 41.0128 25.2434C40.9029 25.1976 40.7851 25.1739 40.666 25.174H39.976C39.82 21.3924 38.1759 17.8258 35.402 15.251L43.197 3.36196C43.3282 3.16274 43.3749 2.91961 43.3269 2.68598C43.2789 2.45235 43.1401 2.24733 42.941 2.11595ZM11.292 17.249C13.3949 17.2513 15.4113 18.0864 16.9 19.5716C18.3887 21.0568 19.2286 23.0711 19.236 25.174H18.476C18.4537 23.2835 17.6871 21.4779 16.3423 20.149C14.9976 18.82 13.1832 18.0747 11.2925 18.0747C9.4019 18.0747 7.58747 18.82 6.24273 20.149C4.89799 21.4779 4.13134 23.2835 4.10903 25.174H3.34905C3.35619 23.0712 4.1959 21.0569 5.68447 19.5717C7.17304 18.0865 9.18928 17.2513 11.292 17.249ZM30.46 25.174C30.3295 24.0738 29.829 23.0506 29.0406 22.2723C28.2521 21.494 27.2226 21.0067 26.1208 20.8904C25.019 20.7742 23.9104 21.0358 22.9769 21.6324C22.0433 22.2291 21.3403 23.1252 20.983 24.174C20.8976 23.3879 20.7156 22.6154 20.441 21.874C21.2275 20.8287 22.312 20.0461 23.5519 19.6292C24.7917 19.2124 26.1287 19.1807 27.3869 19.5384C28.6451 19.8962 29.7655 20.6265 30.6005 21.6334C31.4356 22.6402 31.9461 23.8763 32.065 25.179L30.46 25.174ZM28.66 25.174H22.555C22.6942 24.4666 23.0746 23.8296 23.6314 23.3717C24.1882 22.9138 24.8867 22.6634 25.6075 22.6634C26.3284 22.6634 27.0269 22.9138 27.5837 23.3717C28.1404 23.8296 28.5209 24.4666 28.66 25.174ZM33.8661 25.174C33.7524 23.5697 33.1734 22.0335 32.1999 20.7533C31.2265 19.4731 29.9008 18.5046 28.3853 17.9663C26.8698 17.428 25.2303 17.3434 23.6674 17.7227C22.1045 18.102 20.6862 18.9288 19.5861 20.102C19.3425 19.7013 19.0704 19.3187 18.772 18.957C19.6483 18.0285 20.7095 17.2942 21.8871 16.8014C23.0648 16.3086 24.3327 16.0683 25.609 16.096C28.0701 16.1 30.4374 17.0409 32.2298 18.7275C34.0222 20.414 35.1053 22.7196 35.259 25.176L33.8661 25.174ZM15.376 25.174C15.376 24.0911 14.9459 23.0525 14.1802 22.2868C13.4145 21.5211 12.3759 21.091 11.2931 21.091C10.2102 21.091 9.17165 21.5211 8.40594 22.2868C7.64023 23.0525 7.21005 24.0911 7.21005 25.174H5.91003C5.92931 23.7594 6.5048 22.4093 7.51193 21.4158C8.51906 20.4223 9.87684 19.8653 11.2915 19.8653C12.7062 19.8653 14.064 20.4223 15.0712 21.4158C16.0783 22.4093 16.6537 23.7594 16.673 25.174H15.376ZM13.576 25.174H9.01205C9.02455 24.5769 9.27051 24.0085 9.6972 23.5906C10.1239 23.1728 10.6973 22.9387 11.2945 22.9387C11.8918 22.9387 12.4652 23.1728 12.8919 23.5906C13.3186 24.0085 13.5646 24.5769 13.5771 25.174H13.576ZM12.7761 44.251V43.132H28.792V44.251H12.7761ZM29.136 41.332H12.436C9.52258 40.1406 6.99281 38.1712 5.12332 35.6389C3.25383 33.1066 2.11663 30.109 1.83605 26.974H39.7281C39.4482 30.1081 38.3122 33.1051 36.4441 35.6373C34.5761 38.1695 32.048 40.1395 29.136 41.332ZM38.178 25.174H37.0601C36.9048 22.2401 35.6312 19.4773 33.5013 17.4538C31.3713 15.4303 28.547 14.2998 25.609 14.295C24.0957 14.2643 22.5927 14.55 21.1962 15.1338C19.7996 15.7176 18.5404 16.5865 17.499 17.685C17.2087 17.4481 16.9052 17.2277 16.5901 17.025C17.7218 15.7645 19.1155 14.7668 20.6734 14.1017C22.2314 13.4367 23.9159 13.1204 25.609 13.175C28.8438 13.1792 31.9531 14.4275 34.2929 16.6611C36.6327 18.8948 38.0237 21.9428 38.178 25.174Z" fill="currentColor"/>\n    <path d="M3.39209 30.1722C4.045 32.6025 5.31628 34.8222 7.08209 36.6152C7.16443 36.7021 7.26327 36.7717 7.37286 36.8199C7.48244 36.8682 7.60056 36.8941 7.72027 36.8961C7.83999 36.8981 7.95888 36.8762 8.07003 36.8317C8.18118 36.7872 8.28235 36.7209 8.36758 36.6368C8.45281 36.5528 8.52038 36.4525 8.56637 36.342C8.61237 36.2314 8.63585 36.1128 8.63543 35.9931C8.63501 35.8733 8.6107 35.7549 8.56393 35.6447C8.51716 35.5344 8.44888 35.4347 8.36306 35.3512C6.81633 33.7796 5.70257 31.8346 5.13006 29.7052C5.1013 29.589 5.04966 29.4797 4.97815 29.3837C4.90663 29.2878 4.81669 29.207 4.71359 29.1462C4.61049 29.0854 4.49631 29.0458 4.37771 29.0297C4.25912 29.0136 4.1385 29.0213 4.02291 29.0523C3.90733 29.0834 3.7991 29.1372 3.70456 29.2106C3.61001 29.284 3.53106 29.3755 3.47232 29.4798C3.41357 29.584 3.3762 29.699 3.36242 29.8179C3.34865 29.9368 3.35875 30.0572 3.39209 30.1722Z" fill="#323232"/>\n    <path d="M10.5356 39.5502C10.7282 39.6767 10.962 39.7245 11.1889 39.6838C11.4157 39.643 11.6182 39.5168 11.7547 39.3312C11.8913 39.1456 11.9514 38.9146 11.9227 38.6859C11.8941 38.4573 11.7788 38.2483 11.6006 38.1022L10.3336 37.1752C10.1407 37.0392 9.90209 36.9844 9.66918 37.0226C9.43627 37.0609 9.2277 37.1891 9.08843 37.3797C8.94915 37.5702 8.89031 37.8079 8.92458 38.0414C8.95884 38.2749 9.08345 38.4857 9.27159 38.6282L10.5356 39.5502Z" fill="#323232"/>\n    </g>\n    <defs>\n    <clipPath id="clip0_598_8219">\n    <rect width="43.348" height="46.051" fill="white"/>\n    </clipPath>\n    </defs>\n    </svg>'};let dt=(()=>{class o{constructor(t){this._state=t,this.search=!1,this.icons=ei,this.filters=this._state.filters,this.setFilters=n=>this._state.setFilters(n),this.categories=this._state.categories}toggleCategory(t){var n=this;return(0,f.Z)(function*(){const{categories:i}=yield n.filters.pipe((0,y.q)(1)).toPromise();i.includes(t)?n.setFilters({categories:i.filter(s=>s!==t)}):n.setFilters({categories:[...i,t]})})()}toggleTag(t){var n=this;return(0,f.Z)(function*(){const{tags:i}=yield n.filters.pipe((0,y.q)(1)).toPromise();i.includes(t)?n.setFilters({tags:i.filter(s=>s!==t)}):n.setFilters({tags:[...i,t]})})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(be))},o.\u0275cmp=e.Xpm({type:o,selectors:[["catering-item-filters"]],inputs:{search:"search"},decls:10,vars:13,consts:function(){let a;return a=$localize`:␟24300e769843b029b0346b3ea18e51e4e97a3502␟3888583854485349732: Catergories `,[[1,"px-4","mt-3","mb-2"],["appearance","outline",1,"w-full","h-14"],["matPrefix","",1,"text-xl"],["matInput","","placeholder","Search menu...",3,"ngModel","ngModelChange"],["class","hidden sm:block font-medium px-2 py-4",4,"ngIf"],[1,"flex","flex-col","px-2","space-y-4"],[3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[1,"hidden","sm:block","font-medium","px-2","py-4"],a,[3,"ngModel","ngModelChange"]]},template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"app-icon",2),e._uU(3,"search"),e.qZA(),e.TgZ(4,"input",3),e.NdJ("ngModelChange",function(s){return n.setFilters({search:s})}),e.ALo(5,"async"),e.qZA()()(),e.YNc(6,zo,2,0,"h3",4),e.TgZ(7,"div",5),e.YNc(8,Vo,3,5,"mat-checkbox",6),e.ALo(9,"async"),e.qZA()),2&t){let i;e.ekj("sm:hidden",!n.search),e.xp6(4),e.Q6J("ngModel",null==(i=e.lcZ(5,9,n.filters))?null:i.search),e.xp6(2),e.Q6J("ngIf",!n.search),e.xp6(1),e.ekj("sm:hidden",n.search)("sm:pt-1",!n.search),e.xp6(1),e.Q6J("ngForOf",e.lcZ(9,11,n.categories))}},dependencies:[_.sg,_.O5,L.oG,d.Fj,d.JJ,d.On,v.o,w.KE,w.qo,D.Nt,_.Ov],styles:["[_nghost-%COMP%]{min-width:16rem}\n/*# sourceMappingURL=catering-item-filters.component.ts-angular-inline--97.css.map*/"]}),o})();function ti(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.displayed=null)}),e.SDv(1,25),e.qZA()}}const ni=[];let ut=(()=>{class o{get favorites(){return this._settings.get("favourite_menu_items")||ni}get selected_ids(){return this.selected.map(t=>t.custom_id).join(",")}get count(){return this.selected.reduce((t,n)=>t+n.quantity,0)}get code(){return this._org.currency_code}constructor(t,n,i,s){this._settings=t,this._order=n,this._org=i,this._data=s,this.displayed=null,this.selected=[...this._data[0]||[]],this._order.setFilters(this._data[1])}isSelected(t){return t&&this.selected_ids.includes(t)}setSelected(t,n){const i=this.selected.filter(s=>s.custom_id!==t.custom_id);if(n){const s=new S.U({...t,in_order:!0});i.push(s),this.displayed=s}this.selected=i}toggleFavourite(t){const n=this.favorites;n.includes(t.id)?this._settings.saveUserSetting("favourite_menu_items",n.filter(s=>s!==t.id)):this._settings.saveUserSetting("favourite_menu_items",[...n,t.id])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.gb),e.Y36(be),e.Y36(O.w7),e.Y36(A.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["new-catering-order-modal"]],decls:32,vars:25,consts:function(){let a,t,n,i,s;return a=$localize`:␟737cdc02079fb61b2944ecf62f908ab35efb2d5a␟2076287131803615740:Add Catering`,t=$localize`:␟30d3439b0e0095fe69503245f3bd7a2e9498be7c␟8443571736703532556: View List `,n=$localize`:␟18843b85d1a4f17fefafd07bc5cde636dca44295␟819716823718458903:Back to form`,i=$localize`:␟523976668707aada89243171aa2abc1402656c5b␟4024487187516268099: ${"\ufffd0\ufffd"}:INTERPOLATION: items(s) added `,s=$localize`:␟ccda1d41ca79703a85a3a598c1d97e040a32b766␟874721418273731876: Back `,[[1,"w-[100vw]","h-[100vh]","sm:relative","sm:w-auto","sm:h-auto","flex","flex-col","bg-white","dark:bg-neutral-700"],[1,"flex","items-center","space-x-4","w-full"],["icon","","matRipple","",1,"bg-black/20",3,"mat-dialog-close"],a,[1,"flex-1","flex","items-center","divide-x","divide-gray-200","dark:divide-neutral-500","min-h-[65vh]","h-[65vh]","sm:max-h-[65vh]","sm:max-w-[95vw]","w-full","overflow-hidden"],[1,"h-full","hidden","sm:block","sm:max-w-[12rem]","sm:h-[65vh]","sm:max-h-full"],[1,"flex","flex-col","items-center","flex-1","w-1/2","h-full","sm:h-[65vh]"],[1,"w-full","border-b","border-gray-200","dark:border-neutral-500",3,"search"],[1,"flex-1","h-1/2","w-full","overflow-hidden",3,"active","selected","selected_items","favorites","toggleFav","onSelect"],[1,"h-full","w-full","sm:h-[65vh]","absolute","sm:relative","sm:flex","sm:max-w-[16rem]","z-20","bg-white","dark:bg-neutral-700",3,"item","active","code","fav","activeChange","toggleFav","close"],[1,"flex","sm:hidden","flex-col-reverse","items-center","justify-end","px-2","pt-2","pb-[5.5rem]","border-t","border-gray-200","dark:border-neutral-500","w-full"],["btn","","matRipple","","name","catering-item-return","class","inverse sm:hidden w-full sm:w-auto",3,"click",4,"ngIf"],["btn","","matRipple","","name","save-catering-item",1,"w-full","sm:w-auto","sm:mb-0",3,"mat-dialog-close"],t,[1,"hidden","sm:flex","items-center","justify-between","p-2","border-t","border-gray-200","dark:border-neutral-500","w-full"],["btn","","matRipple","","name","catering-item-return",1,"clear","text-primary",3,"mat-dialog-close"],[1,"flex","items-center"],[1,"text-xl"],[1,"mr-1","underline"],n,[1,"opacity-60","text-sm"],i,["btn","","matRipple","","name","toggle-catering-item",3,"disabled","click"],[1,"mr-1"],["btn","","matRipple","","name","catering-item-return",1,"inverse","sm:hidden","w-full","sm:w-auto",3,"click"],s]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"header",1)(2,"button",2)(3,"app-icon"),e._uU(4,"close"),e.qZA()(),e.TgZ(5,"h3"),e.SDv(6,3),e.qZA()(),e.TgZ(7,"main",4),e._UZ(8,"catering-item-filters",5),e.TgZ(9,"div",6),e._UZ(10,"catering-item-filters",7),e.TgZ(11,"catering-item-list",8),e.NdJ("toggleFav",function(s){return n.toggleFavourite(s)})("onSelect",function(s){return n.displayed=s}),e.qZA()(),e.TgZ(12,"catering-item-details",9),e.NdJ("activeChange",function(s){return n.setSelected(n.displayed,s)})("toggleFav",function(){return n.toggleFavourite(n.displayed)})("close",function(){return n.displayed=null}),e.qZA()(),e.TgZ(13,"footer",10),e.YNc(14,ti,2,0,"button",11),e.TgZ(15,"button",12),e.SDv(16,13),e.qZA()(),e.TgZ(17,"footer",14)(18,"button",15)(19,"div",16)(20,"app-icon",17),e._uU(21,"arrow_back"),e.qZA(),e.TgZ(22,"div",18),e.SDv(23,19),e.qZA()()(),e.TgZ(24,"p",20),e.SDv(25,21),e.qZA(),e.TgZ(26,"button",22),e.NdJ("click",function(){return n.setSelected(n.displayed,!n.isSelected(null==n.displayed?null:n.displayed.custom_id))}),e.TgZ(27,"div",16)(28,"app-icon",17),e._uU(29),e.qZA(),e.TgZ(30,"div",23),e._uU(31),e.qZA()()()()()),2&t&&(e.xp6(2),e.Q6J("mat-dialog-close",n.selected),e.xp6(8),e.Q6J("search",!0),e.xp6(1),e.Q6J("active",null==n.displayed?null:n.displayed.custom_id)("selected",n.selected_ids)("selected_items",n.selected)("favorites",n.favorites),e.xp6(1),e.ekj("hidden",!n.displayed)("inset-0",n.displayed),e.Q6J("item",n.displayed)("active",n.selected_ids.includes((null==n.displayed?null:n.displayed.custom_id)||""))("code",n.code)("fav",!!n.displayed&&n.favorites.includes((null==n.displayed?null:n.displayed.id)||"")),e.xp6(2),e.Q6J("ngIf",n.displayed),e.xp6(1),e.ekj("mb-2",n.displayed),e.Q6J("mat-dialog-close",n.selected),e.xp6(3),e.Q6J("mat-dialog-close",n.selected),e.xp6(7),e.pQV(n.count),e.QtT(25),e.xp6(1),e.ekj("inverse",n.isSelected(null==n.displayed?null:n.displayed.custom_id)),e.Q6J("disabled",!n.displayed),e.xp6(3),e.Oqu(n.isSelected(null==n.displayed?null:n.displayed.custom_id)?"remove":"add"),e.xp6(2),e.hij(" ",n.isSelected(null==n.displayed?null:n.displayed.custom_id)?"Remove from Booking":"Add to booking"," "))},dependencies:[_.O5,A.ZT,v.o,h.wG,_t,ct,dt]}),o})();function oi(o,a){if(1&o&&e._UZ(0,"img",16),2&o){const t=e.oxw().$implicit;e.Q6J("source",t.images[0])}}function ii(o,a){1&o&&e._UZ(0,"img",17)}function ai(o,a){if(1&o&&(e.TgZ(0,"span",18),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("matTooltip",n.optionList(t)),e.xp6(1),e.hij(" ",(null==t.option_list?null:t.option_list.length)||"0"," option(s) ")}}function si(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5),e.YNc(2,oi,1,1,"img",6),e.YNc(3,ii,1,0,"ng-template",null,7,e.W1O),e.qZA(),e.TgZ(5,"div",8)(6,"div",9),e._uU(7),e.YNc(8,ai,2,2,"span",10),e.qZA(),e.TgZ(9,"div"),e._uU(10),e.qZA(),e.TgZ(11,"div",11)(12,"button",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.addItems(s))}),e.TgZ(13,"div",13)(14,"app-icon"),e._uU(15,"edit"),e.qZA(),e._uU(16," Change "),e.qZA()(),e.TgZ(17,"button",14),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.removeItem(s))}),e.TgZ(18,"div",13)(19,"app-icon"),e._uU(20,"close"),e.qZA(),e._uU(21," Remove "),e.qZA()()()(),e.TgZ(22,"button",15),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.toggleFavourite(s))}),e.TgZ(23,"app-icon"),e._uU(24),e.qZA()()()}if(2&o){const t=a.$implicit,n=e.MAs(4),i=e.oxw();e.xp6(2),e.Q6J("ngIf",null==t.images?null:t.images.length)("ngIfElse",n),e.xp6(5),e.hij(" ",t.name||"Item"," "),e.xp6(1),e.Q6J("ngIf",null==t.option_list?null:t.option_list.length),e.xp6(2),e.hij("",t.quantity," requested"),e.xp6(12),e.ekj("text-blue-400",i.favorites.includes(t.id)),e.xp6(2),e.Oqu(i.favorites.includes(t.id)?"favorite":"favorite_border")}}const li=[];let pt=(()=>{class o{get favorites(){return this._settings.get("favourite_menu_items")||li}constructor(t,n){this._settings=t,this._dialog=n,this.options={},this.items=[],this.disabled=!1,this.selected=[],this.registerOnChange=i=>this._onChange=i,this.registerOnTouched=i=>this._onTouch=i,this.setDisabledState=i=>this.disabled=i}setValue(t){this.items=t,this._onChange&&this._onChange(this.items)}writeValue(t){this.items=t||[]}removeItem(t){const n=this.items.filter(i=>i.id!==t.id);this.setValue(n)}addItems(t){this._dialog.open(ut,{data:[this.items,this.options]}).afterClosed().subscribe(i=>{i&&this.setValue(i)})}optionList(t){return t.option_list?.map(n=>n.name).join("\n")}toggleFavourite(t){const n=this.favorites;n.includes(t.id)?this._settings.saveUserSetting("favourite_menu_items",n.filter(s=>s!==t.id)):this._settings.saveUserSetting("favourite_menu_items",[...n,t.id])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.gb),e.Y36(A.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["catering-list-field"]],inputs:{options:"options"},features:[e._Bn([{provide:d.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0}])],decls:8,vars:2,consts:[["list","",1,"space-y-2"],["space","","class","relative p-2 rounded-lg w-full flex items-center shadow border border-gray-200",4,"ngFor","ngForOf"],["btn","","matRipple","","name","add-catering-item",1,"w-full","inverse","mt-2",3,"disabled","click"],[1,"flex","items-center","justify-center","space-x-2"],["space","",1,"relative","p-2","rounded-lg","w-full","flex","items-center","shadow","border","border-gray-200"],[1,"w-16","h-16","rounded-xl","bg-black/20","mr-4","overflow-hidden","flex","items-center","justify-center"],["auth","","class","object-cover min-h-full min-w-full",3,"source",4,"ngIf","ngIfElse"],["placeholder",""],[1,"pb-4"],[1,"font-medium","flex","items-center"],["class","text-xs opacity-60 ml-4 font-normal",3,"matTooltip",4,"ngIf"],[1,"absolute","bottom-0","right-0","flex","items-center","justify-end","text-xs"],["btn","","matRipple","","name","edit-catering-item",1,"clear",3,"click"],[1,"flex","items-center","space-x-2"],["btn","","matRipple","","name","remove-catering-item",1,"clear",3,"click"],["icon","","matRipple","","name","toggle-catering-item-favourite",1,"absolute","top-1","right-1",3,"click"],["auth","",1,"object-cover","min-h-full","min-w-full",3,"source"],["src","assets/icons/catering-placeholder.svg",1,"m-auto"],[1,"text-xs","opacity-60","ml-4","font-normal",3,"matTooltip"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,si,25,8,"div",1),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return n.addItems()}),e.TgZ(3,"div",3)(4,"app-icon"),e._uU(5,"search"),e.qZA(),e.TgZ(6,"span"),e._uU(7,"Add Item"),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.items),e.xp6(1),e.Q6J("disabled",n.disabled))},dependencies:[_.sg,_.O5,Y.gM,v.o,lt.A,h.wG]}),o})();p(8840);let hi=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[_.ez,R.Tx,re.Nh,le.Bb,A.Is,L.p9,_e.Fk,Y.AV,d.u5,d.UX,Gt.K,w.lN,Kt.W9]}),o})();var Ci=p(4187),xi=p(6012);function vi(o,a){1&o&&e._UZ(0,"topbar")}function Fi(o,a){1&o&&e._UZ(0,"footer-menu",4)}let Ti=(()=>{class o{get hide_nav(){return"true"===localStorage.getItem("PlaceOS.hide_nav")}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["placeos-book"]],decls:5,vars:2,consts:[[4,"ngIf"],[1,"flex-1","flex","sm:flex-row","flex-col-reverse","h-1/2"],[1,"flex","flex-col","flex-1","h-1/2","sm:h-auto","overflow-hidden"],["class","z-10",4,"ngIf"],[1,"z-10"]],template:function(t,n){1&t&&(e.YNc(0,vi,1,0,"topbar",0),e.TgZ(1,"div",1)(2,"main",2),e._UZ(3,"router-outlet"),e.qZA()(),e.YNc(4,Fi,1,0,"footer-menu",3)),2&t&&(e.Q6J("ngIf",!n.hide_nav),e.xp6(4),e.Q6J("ngIf",!n.hide_nav))},dependencies:[_.O5,Ci.o,xi.i,F.lC],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}\n/*# sourceMappingURL=book.component.ts-angular-inline--99.css.map*/"]}),o})();var k=p(5915),Oe=p(2317);const bi=(()=>{class o{constructor(t,n,i,s,l){this._legacyCanvasSize=o.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=t,this.$canvas=document.createElement("canvas"),i&&"object"==typeof i?this._onDecode=n:(console.warn(i||s||l?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=n),this._onDecodeError=(n="object"==typeof i?i:{}).onDecodeError||("function"==typeof i?i:this._onDecodeError),this._calculateScanRegion=n.calculateScanRegion||("function"==typeof s?s:this._calculateScanRegion),this._preferredCamera=n.preferredCamera||l||this._preferredCamera,this._legacyCanvasSize="number"==typeof i?i:"number"==typeof s?s:this._legacyCanvasSize,this._maxScansPerSecond=n.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),t.disablePictureInPicture=!0,t.playsInline=!0,t.muted=!0;let r=!1;if(t.hidden&&(t.hidden=!1,r=!0),document.body.contains(t)||(document.body.appendChild(t),r=!0),i=t.parentElement,n.highlightScanRegion||n.highlightCodeOutline){if(s=!!n.overlay,this.$overlay=n.overlay||document.createElement("div"),(l=this.$overlay.style).position="absolute",l.display="none",l.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!s&&n.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}i.insertBefore(this.$overlay,this.$video.nextSibling)}n.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(t),requestAnimationFrame(()=>{let c=window.getComputedStyle(t);"none"===c.display&&(t.style.setProperty("display","block","important"),r=!0),"visible"!==c.visibility&&(t.style.setProperty("visibility","visible","important"),r=!0),r&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),t.style.opacity="0",t.style.width="0",t.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),t.addEventListener("play",this._onPlay),t.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=o.createQrEngine()}static set WORKER_PATH(t){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static hasCamera(){return(0,f.Z)(function*(){try{return!!(yield o.listCameras(!1)).length}catch{return!1}})()}static listCameras(t=!1){return(0,f.Z)(function*(){if(!navigator.mediaDevices)return[];let i,n=function(){var s=(0,f.Z)(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(l=>"videoinput"===l.kind)});return function(){return s.apply(this,arguments)}}();try{t&&(yield n()).every(s=>!s.label)&&(i=yield navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(yield n()).map((s,l)=>({id:s.deviceId,label:s.label||(0===l?"Default Camera":`Camera ${l+1}`)}))}finally{i&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),o._stopVideoStream(i))}})()}hasFlash(){var t=this;return(0,f.Z)(function*(){let n;try{if(t.$video.srcObject){if(!(t.$video.srcObject instanceof MediaStream))return!1;n=t.$video.srcObject}else n=(yield t._getCameraStream()).stream;return"torch"in n.getVideoTracks()[0].getSettings()}catch{return!1}finally{n&&n!==t.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),o._stopVideoStream(n))}})()}isFlashOn(){return this._flashOn}toggleFlash(){var t=this;return(0,f.Z)(function*(){t._flashOn?yield t.turnFlashOff():yield t.turnFlashOn()})()}turnFlashOn(){var t=this;return(0,f.Z)(function*(){if(!t._flashOn&&!t._destroyed&&(t._flashOn=!0,t._active&&!t._paused))try{if(!(yield t.hasFlash()))throw"No flash available";yield t.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(n){throw t._flashOn=!1,n}})()}turnFlashOff(){var t=this;return(0,f.Z)(function*(){t._flashOn&&(t._flashOn=!1,yield t._restartVideoStream())})()}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),o._postWorkerMessage(this._qrEnginePromise,"close")}start(){var t=this;return(0,f.Z)(function*(){if(t._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!t._active||t._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),t._active=!0,!document.hidden))if(t._paused=!1,t.$video.srcObject)yield t.$video.play();else try{let{stream:n,facingMode:i}=yield t._getCameraStream();!t._active||t._paused?o._stopVideoStream(n):(t._setVideoMirror(i),t.$video.srcObject=n,yield t.$video.play(),t._flashOn&&(t._flashOn=!1,t.turnFlashOn().catch(()=>{})))}catch(n){if(!t._paused)throw t._active=!1,n}})()}stop(){this.pause(),this._active=!1}pause(t=!1){var n=this;return(0,f.Z)(function*(){if(n._paused=!0,!n._active)return!0;n.$video.pause(),n.$overlay&&(n.$overlay.style.display="none");let i=()=>{n.$video.srcObject instanceof MediaStream&&(o._stopVideoStream(n.$video.srcObject),n.$video.srcObject=null)};return t?(i(),!0):(yield new Promise(s=>setTimeout(s,300)),!!n._paused&&(i(),!0))})()}setCamera(t){var n=this;return(0,f.Z)(function*(){t!==n._preferredCamera&&(n._preferredCamera=t,yield n._restartVideoStream())})()}static scanImage(t,n,i,s,l=!1,r=!1){return(0,f.Z)(function*(){let c,m=!1;n&&("scanRegion"in n||"qrEngine"in n||"canvas"in n||"disallowCanvasResizing"in n||"alsoTryWithoutScanRegion"in n||"returnDetailedScanResult"in n)?(c=n.scanRegion,i=n.qrEngine,s=n.canvas,l=n.disallowCanvasResizing||!1,r=n.alsoTryWithoutScanRegion||!1,m=!0):console.warn(n||i||s||l||r?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),n=!!i;try{let g,C,E;if([i,g]=yield Promise.all([i||o.createQrEngine(),o._loadImage(t)]),[s,C]=o._drawToCanvas(g,c,s,l),i instanceof Worker){let T=i;n||o._postWorkerMessageSync(T,"inversionMode","both"),E=yield new Promise((x,I)=>{let H,ie,Q,Me=-1;ie=B=>{B.data.id===Me&&(T.removeEventListener("message",ie),T.removeEventListener("error",Q),clearTimeout(H),null!==B.data.data?x({data:B.data.data,cornerPoints:o._convertPoints(B.data.cornerPoints,c)}):I(o.NO_QR_CODE_FOUND))},Q=B=>{T.removeEventListener("message",ie),T.removeEventListener("error",Q),clearTimeout(H),I("Scanner error: "+(B?B.message||B:"Unknown Error"))},T.addEventListener("message",ie),T.addEventListener("error",Q),H=setTimeout(()=>Q("timeout"),1e4);let he=C.getImageData(0,0,s.width,s.height);Me=o._postWorkerMessageSync(T,"decode",he,[he.data.buffer])})}else E=yield Promise.race([new Promise((T,x)=>window.setTimeout(()=>x("Scanner error: timeout"),1e4)),(0,f.Z)(function*(){try{var[T]=yield i.detect(s);if(!T)throw o.NO_QR_CODE_FOUND;return{data:T.rawValue,cornerPoints:o._convertPoints(T.cornerPoints,c)}}catch(x){if(/not implemented|service unavailable/.test(T=x.message||x))return o._disableBarcodeDetector=!0,o.scanImage(t,{scanRegion:c,canvas:s,disallowCanvasResizing:l,alsoTryWithoutScanRegion:r});throw`Scanner error: ${T}`}})()]);return m?E:E.data}catch(g){if(!c||!r)throw g;let C=yield o.scanImage(t,{qrEngine:i,canvas:s,disallowCanvasResizing:l});return m?C:C.data}finally{n||o._postWorkerMessage(i,"close")}})()}setGrayscaleWeights(t,n,i,s=!0){o._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:t,green:n,blue:i,useIntegerApproximation:s})}setInversionMode(t){o._postWorkerMessage(this._qrEnginePromise,"inversionMode",t)}static createQrEngine(t){return(0,f.Z)(function*(){if(t&&console.warn("Specifying a worker path is not required and not supported anymore."),t=()=>p.e("node_modules_qr-scanner_qr-scanner-worker_min_js").then(p.bind(p,9872)).then(i=>i.createWorker()),o._disableBarcodeDetector||!("BarcodeDetector"in window)||!BarcodeDetector.getSupportedFormats||!(yield BarcodeDetector.getSupportedFormats()).includes("qr_code"))return t();let n=navigator.userAgentData;return n&&n.brands.some(({brand:i})=>/Chromium/i.test(i))&&/mac ?OS/i.test(n.platform)&&(yield n.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:i,platformVersion:s})=>/arm/i.test(i||"arm")&&13<=parseInt(s||"13")).catch(()=>!0))?t():new BarcodeDetector({formats:["qr_code"]})})()}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(t){let n=Math.round(.6666666666666666*Math.min(t.videoWidth,t.videoHeight));return{x:Math.round((t.videoWidth-n)/2),y:Math.round((t.videoHeight-n)/2),width:n,height:n,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var t=this.$video,n=t.videoWidth,i=t.videoHeight,s=t.offsetWidth,l=t.offsetHeight,r=t.offsetLeft,c=t.offsetTop,m=window.getComputedStyle(t),g=m.objectFit,C=n/i,E=s/l;switch(g){case"none":var T=n,x=i;break;case"fill":T=s,x=l;break;default:("cover"===g?C>E:C<E)?T=(x=l)*C:x=(T=s)/C,"scale-down"===g&&(T=Math.min(T,n),x=Math.min(x,i))}var[I,H]=m.objectPosition.split(" ").map((Q,Me)=>{const he=parseFloat(Q);return Q.endsWith("%")?(Me?l-x:s-T)*he/100:he});E=this._scanRegion.height||i,g=this._scanRegion.x||0;var ie=this._scanRegion.y||0;(C=this.$overlay.style).width=(m=this._scanRegion.width||n)/n*T+"px",C.height=E/i*x+"px",C.top=`${c+H+ie/i*x}px`,i=/scaleX\(-1\)/.test(t.style.transform),C.left=`${r+(i?s-I-T:I)+(i?n-g-m:g)/n*T}px`,C.transform=t.style.transform}})}static _convertPoints(t,n){if(!n)return t;let i=n.x||0,s=n.y||0,l=n.width&&n.downScaledWidth?n.width/n.downScaledWidth:1;n=n.height&&n.downScaledHeight?n.height/n.downScaledHeight:1;for(let r of t)r.x=r.x*l+i,r.y=r.y*n+s;return t}_scanFrame(){var t=this;!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)((0,f.Z)(function*(){if(!(1>=t.$video.readyState)){var n=Date.now()-t._lastScanTimestamp,i=1e3/t._maxScansPerSecond;n<i&&(yield new Promise(l=>setTimeout(l,i-n))),t._lastScanTimestamp=Date.now();try{var s=yield o.scanImage(t.$video,{scanRegion:t._scanRegion,qrEngine:t._qrEnginePromise,canvas:t.$canvas})}catch(l){if(!t._active)return;t._onDecodeError(l)}!o._disableBarcodeDetector||(yield t._qrEnginePromise)instanceof Worker||(t._qrEnginePromise=o.createQrEngine()),s?(t._onDecode?t._onDecode(s):t._legacyOnDecode&&t._legacyOnDecode(s.data),t.$codeOutlineHighlight&&(clearTimeout(t._codeOutlineHighlightRemovalTimeout),t._codeOutlineHighlightRemovalTimeout=void 0,t.$codeOutlineHighlight.setAttribute("viewBox",`${t._scanRegion.x||0} ${t._scanRegion.y||0} ${t._scanRegion.width||t.$video.videoWidth} ${t._scanRegion.height||t.$video.videoHeight}`),t.$codeOutlineHighlight.firstElementChild.setAttribute("points",s.cornerPoints.map(({x:l,y:r})=>`${l},${r}`).join(" ")),t.$codeOutlineHighlight.style.display="")):t.$codeOutlineHighlight&&!t._codeOutlineHighlightRemovalTimeout&&(t._codeOutlineHighlightRemovalTimeout=setTimeout(()=>t.$codeOutlineHighlight.style.display="none",100))}t._scanFrame()}))}_onDecodeError(t){t!==o.NO_QR_CODE_FOUND&&console.log(t)}_getCameraStream(){var t=this;return(0,f.Z)(function*(){if(!navigator.mediaDevices)throw"Camera not found.";let n=/^(environment|user)$/.test(t._preferredCamera)?"facingMode":"deviceId",i=[{width:{min:1024}},{width:{min:768}},{}],s=i.map(l=>Object.assign({},l,{[n]:{exact:t._preferredCamera}}));for(let l of[...s,...i])try{let r=yield navigator.mediaDevices.getUserMedia({video:l,audio:!1});return{stream:r,facingMode:t._getFacingMode(r)||(l.facingMode?t._preferredCamera:"environment"===t._preferredCamera?"user":"environment")}}catch{}throw"Camera not found."})()}_restartVideoStream(){var t=this;return(0,f.Z)(function*(){let n=t._paused;(yield t.pause(!0))&&!n&&t._active&&(yield t.start())})()}static _stopVideoStream(t){for(let n of t.getTracks())n.stop(),t.removeTrack(n)}_setVideoMirror(t){this.$video.style.transform="scaleX("+("user"===t?-1:1)+")"}_getFacingMode(t){return(t=t.getVideoTracks()[0])?/rear|back|environment/i.test(t.label)?"environment":/front|user|face/i.test(t.label)?"user":null:null}static _drawToCanvas(t,n,i,s=!1){i=i||document.createElement("canvas");let l=n&&n.x?n.x:0,r=n&&n.y?n.y:0,c=n&&n.width?n.width:t.videoWidth||t.width,m=n&&n.height?n.height:t.videoHeight||t.height;return s||(s=n&&n.downScaledWidth?n.downScaledWidth:c,n=n&&n.downScaledHeight?n.downScaledHeight:m,i.width!==s&&(i.width=s),i.height!==n&&(i.height=n)),(n=i.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,n.drawImage(t,l,r,c,m,0,0,i.width,i.height),[i,n]}static _loadImage(t){return(0,f.Z)(function*(){if(t instanceof Image)return yield o._awaitImageLoad(t),t;if(t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||t instanceof SVGImageElement||"OffscreenCanvas"in window&&t instanceof OffscreenCanvas||"ImageBitmap"in window&&t instanceof ImageBitmap)return t;if(!(t instanceof File||t instanceof Blob||t instanceof URL||"string"==typeof t))throw"Unsupported image type.";{let n=new Image;n.src=t instanceof File||t instanceof Blob?URL.createObjectURL(t):t.toString();try{return yield o._awaitImageLoad(n),n}finally{(t instanceof File||t instanceof Blob)&&URL.revokeObjectURL(n.src)}}})()}static _awaitImageLoad(t){return(0,f.Z)(function*(){t.complete&&0!==t.naturalWidth||(yield new Promise((n,i)=>{let s=l=>{t.removeEventListener("load",s),t.removeEventListener("error",s),l instanceof ErrorEvent?i("Image load error"):n()};t.addEventListener("load",s),t.addEventListener("error",s)}))})()}static _postWorkerMessage(t,n,i,s){return(0,f.Z)(function*(){return o._postWorkerMessageSync(yield t,n,i,s)})()}static _postWorkerMessageSync(t,n,i,s){if(!(t instanceof Worker))return-1;let l=o._workerMessageId++;return t.postMessage({id:l,type:n,data:i},s),l}}return o.DEFAULT_CANVAS_SIZE=400,o.NO_QR_CODE_FOUND="No QR code found",o._disableBarcodeDetector=!1,o._workerMessageId=0,o})(),Oi=["video"];function Ai(o,a){1&o&&(e.TgZ(0,"div",13)(1,"h2",14),e._uU(2," Scan QR Code "),e.qZA(),e.TgZ(3,"span",15),e._uU(4," Scan the QR code outisde a PlaceOS room or space. "),e.qZA()())}function wi(o,a){1&o&&(e.TgZ(0,"div",13)(1,"h2",14),e._uU(2," Enter Room ID "),e.qZA(),e.TgZ(3,"span",15),e._uU(4," Enter the room ID number outisde a PlaceOS room or space. "),e.qZA()())}function Mi(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",2),e._UZ(1,"video",3,4),e.TgZ(3,"div",5),e.YNc(4,Ai,5,0,"div",6),e.YNc(5,wi,5,0,"div",6),e.TgZ(6,"div",7)(7,"div",8)(8,"span",9),e._uU(9,"Booking ID"),e.qZA(),e.TgZ(10,"input",10),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.room_code=i)}),e.qZA()()(),e.TgZ(11,"div",11)(12,"button",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.is_scanning=!0)}),e._uU(13," Scan Code "),e.qZA(),e.TgZ(14,"button",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.is_scanning=!1)}),e._uU(15," Enter Code "),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.is_scanning),e.xp6(1),e.Q6J("ngIf",!t.is_scanning),e.xp6(2),e.ekj("input",!t.is_scanning),e.xp6(3),e.Q6J("ngModel",t.room_code),e.xp6(2),e.Tol("flex-1 text-black border-none w-40 "+(t.is_scanning?"bg-white dark:bg-neutral-600":"bg-transparent hover:bg-white hover:dark:bg-neutral-600 bg-opacity-50")),e.xp6(2),e.Tol("flex-1 text-black border-none w-40 "+(t.is_scanning?"bg-transparent hover:bg-white hover:dark:bg-neutral-600 bg-opacity-50":"bg-white dark:bg-neutral-600"))}}function Zi(o,a){1&o&&(e.TgZ(0,"div",16),e._UZ(1,"mat-spinner",17),e.TgZ(2,"p"),e._uU(3,"Checking in booking..."),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("diameter",32))}let Ni=(()=>{class o extends u.cx{constructor(t,n,i,s){super(),this._router=t,this._route=n,this._event_form=i,this._booking_form=s,this.menu=new e.vpe(!1),this.is_scanning=!0,this.loading=!1}ngOnDestroy(){this._video_el?.nativeElement?.srcObject&&this._video_el.nativeElement.srcObject.getTracks().forEach(t=>t?.stop()),this._qr_scanner?.stop()}ngOnInit(){this.subscription("route.query",this._route.queryParamMap.subscribe(t=>{t.has("asset_id")&&this._checkinBooking(t.get("asset_id")),t.has("space_id")&&this._checkinEvent(t.get("space_id"),t.get("email"))}))}ngAfterViewInit(){!navigator.mediaDevices?.getUserMedia||this.loading||(navigator.mediaDevices.getUserMedia({video:!0}).then(t=>this._video_el.nativeElement.srcObject=t).catch(t=>console.error("Unable to fetch media devices!",t)),this._qr_scanner=new bi(this._video_el.nativeElement,t=>this.handleQrCode(t)),this._qr_scanner.start())}handleQrCode(t){const n=t;if(n.indexOf("/#/")>0){const s=/[?&]([^=#]+)=([^&#]*)/g,l={};let r;for(;r=s.exec(n);)l[r[1]]=r[2];this._router.navigate([n.split("/#")[1].split("?")[0]],l)}}_checkinBooking(t,n="desk"){var i=this;return(0,f.Z)(function*(){i.loading=!0;let s=yield(0,b.F2)({period_start:(0,U.Z)(Date.now()),period_end:(0,U.Z)((0,Oe.Z)(Date.now(),5)),type:n,email:(0,u.ar)().email}).toPromise().catch(r=>[]);const l=s.find(r=>r.asset_id===t);if(l)yield(0,b.FD)(l.id,!0).toPromise().catch(r=>{throw(0,u.cB)(`Unable to checkin booking with resource "${t}"`),i.loading=!1,r}),i._router.navigate(["/book","code","success"]);else{s=yield(0,b.F2)({period_start:(0,U.Z)(Date.now()),period_end:(0,U.Z)((0,ge.Z)(Date.now())),type:n}).toPromise().catch(c=>[]);let r=s.find(c=>c.asset_id===t);if(r)return void i._router.navigate(["/book","code","error"],{queryParams:{type:"not_started",asset_id:t}});if(s=yield(0,b.F2)({period_start:(0,U.Z)(Date.now()),period_end:(0,U.Z)((0,Oe.Z)(Date.now(),5)),type:n}).toPromise().catch(c=>[]),r=s.find(c=>c.asset_id===t),r)return void i._router.navigate(["/book","code","error"],{queryParams:{type:"wrong_resource",asset_id:t}});i._router.navigate(["/book","code","error"],{queryParams:{type:"no_booking",asset_id:t}}),i._booking_form.newForm(new b.$N({asset_id:t,type:n})),i._booking_form.setOptions({type:n})}i.loading=!1})()}_checkinEvent(t,n){var i=this;return(0,f.Z)(function*(){n||(n=(0,u.ar)().email),i.loading=!0;const l=(yield(0,k.u$)({period_start:(0,U.Z)(Date.now()),period_end:(0,U.Z)(Date.now()+3e5)}).toPromise().catch(r=>[])).find(r=>r.resources.find(c=>c.id===t||c.email===t));if(l)yield(0,k.rq)(l.id,n,!0).toPromise().catch(r=>{throw(0,u.cB)(`Unable to checkin event with resource "${t}"`),i.loading=!1,r}),i._router.navigate(["/book","code","success"]),i.loading=!1;else{const r=yield(0,q.hMA)(t).toPromise();r&&i._event_form.newForm(new k.ym({system:r})),i._router.navigate(["/book","meeting"])}i.loading=!1})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(F.F0),e.Y36(F.gz),e.Y36(k.MH),e.Y36(b.fy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["book-code-flow"]],viewQuery:function(t,n){if(1&t&&e.Gf(Oi,5),2&t){let i;e.iGM(i=e.CRH())&&(n._video_el=i.first)}},outputs:{menu:"menu"},features:[e.qOj],decls:3,vars:2,consts:[["class","flex-1 overflow-hidden flex items-center justify-center bg-black relative",4,"ngIf","ngIfElse"],["load_state",""],[1,"flex-1","overflow-hidden","flex","items-center","justify-center","bg-black","relative"],["id","video",1,"min-w-full","min-h-full","object-cover"],["video",""],[1,"absolute","text-white","text-center","inset-0","flex","flex-col","items-center","justify-center"],["class","flex flex-col z-10 justify-end items-center relative",4,"ngIf"],[1,"flex","items-center","justify-center"],["box","",1,"rounded-2xl","h-64","w-64","transition-all","flex","items-center","justify-center","p-8","m-8","space-x-2"],[1,"uppercase"],["matInput","","name","booking-id","placeholder","e.g. 12102910",1,"border-none","bg-none","w-full","text-3xl","text-left",3,"ngModel","ngModelChange"],[1,"m-4","p-2","flex","items-center","space-x-2","bg-white","bg-opacity-50","rounded"],["matRipple","",3,"click"],[1,"flex","flex-col","z-10","justify-end","items-center","relative"],[1,"text-3xl","mb-1","uppercase","subpixel-antialiased"],[1,"mb-4"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]],template:function(t,n){if(1&t&&(e.YNc(0,Mi,16,9,"div",0),e.YNc(1,Zi,4,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",!n.loading)("ngIfElse",i)}},dependencies:[_.O5,h.wG,D.Nt,M.Ou,d.Fj,d.JJ,d.On],styles:["[_nghost-%COMP%]{position:relative;width:100%;height:100vh;display:flex;flex-direction:column;background:#f0f0f0}[box][_ngcontent-%COMP%]{box-shadow:0 0 0 100vw #00000080}[box][_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:none}[box].input[_ngcontent-%COMP%]{width:32rem!important;max-width:calc(100% - 2rem)!important;padding:1rem!important;height:4rem!important;color:#000!important;background:white;box-shadow:0 0 0 100vw #000c}[box].input[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:initial}[box][_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:var(--heading-font);font-weight:500;text-transform:uppercase;letter-spacing:.05em}\n/*# sourceMappingURL=code-flow.component.ts-angular-inline--100.css.map*/"]}),o})();var G=p(312),mt=p(5692),V=p(2306),ee=p(1022),te=p(7303),Ae=p(6471),gt=p(9697);const W=function(){return{standalone:!0}};function Ei(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",11)(1,"mat-button-toggle-group",12),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.setOptions({group:"group"===i}))}),e.ALo(2,"async"),e.TgZ(3,"mat-button-toggle",13),e._uU(4," Single "),e.qZA(),e.TgZ(5,"mat-button-toggle",14),e._uU(6," Group "),e.qZA()()()}if(2&o){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngModel",null!=(n=e.lcZ(2,2,t.options))&&n.group?"group":"single")("ngModelOptions",e.DdM(4,W))}}function Si(o,a){if(1&o&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.display_name||t.name," ")}}function yi(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",4)(1,"label"),e._uU(2,"Building"),e.qZA(),e.TgZ(3,"mat-form-field",15)(4,"mat-select",16),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.building=i)})("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.setOptions({zone_id:null==i?null:i.id}))}),e.YNc(5,Si,2,2,"mat-option",17),e.ALo(6,"async"),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.building)("ngModelOptions",e.DdM(5,W)),e.xp6(1),e.Q6J("ngForOf",e.lcZ(6,3,t.buildings))}}function ki(o,a){if(1&o&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.display_name||t.name," ")}}function Pi(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",4)(1,"label"),e._uU(2,"Level"),e.qZA(),e.TgZ(3,"mat-form-field",15)(4,"mat-select",19),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.setOptions({zone_id:i||s.building.id}))}),e.YNc(5,ki,2,2,"mat-option",17),e.ALo(6,"async"),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("disabled",!t.building)("ngModelOptions",e.DdM(5,W)),e.xp6(1),e.Q6J("ngForOf",e.lcZ(6,3,t.levels))}}function Li(o,a){1&o&&(e.TgZ(0,"mat-checkbox",25),e._uU(1," All Day "),e.qZA())}function Ii(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",20)(2,"label"),e._uU(3,"Start Time"),e.qZA(),e.TgZ(4,"a-time-field",21),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.form.patchValue({date:i}))}),e.qZA()(),e.TgZ(5,"div",22)(6,"label"),e._uU(7,"End Time"),e.qZA(),e._UZ(8,"a-duration-field",23),e.YNc(9,Li,2,0,"mat-checkbox",24),e.qZA()()}if(2&o){const t=e.oxw(2);let n;e.xp6(4),e.Q6J("ngModel",t.form.value.date)("ngModelOptions",e.DdM(8,W)),e.xp6(4),e.Q6J("time",null==(n=t.form.get("date"))?null:n.value)("max",720)("min",60)("step",60)("disabled",t.form.value.all_day),e.xp6(1),e.Q6J("ngIf",t.allow_all_day)}}function Ri(o,a){1&o&&(e.TgZ(0,"div",26)(1,"label"),e._uU(2,"Host"),e.qZA(),e._UZ(3,"a-user-search-field",27),e.qZA())}function Di(o,a){1&o&&(e.TgZ(0,"div",28)(1,"label"),e._uU(2,"Details"),e.qZA(),e.TgZ(3,"mat-form-field",29),e._UZ(4,"input",30),e.qZA()())}const ft=function(){return[]};function qi(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",28)(1,"label"),e._uU(2,"Group Members"),e.qZA(),e.TgZ(3,"a-user-list-field",31),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.setOptions({members:i}))}),e.ALo(4,"async"),e.qZA()()}if(2&o){const t=e.oxw(2);let n;e.xp6(3),e.Q6J("simple",!0)("ngModel",(null==(n=e.lcZ(4,3,t.options))?null:n.members)||e.DdM(5,ft))("ngModelOptions",e.DdM(6,W))}}function Ui(o,a){if(1&o&&(e.TgZ(0,"mat-option",18)(1,"span",35),e._uU(2),e.qZA()()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(2),e.Oqu(t)}}function $i(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",20)(2,"label"),e._uU(3,"Recurrence Period"),e.qZA(),e.TgZ(4,"mat-form-field",15)(5,"mat-select",32),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.setOptions({pattern:i}))}),e.ALo(6,"async"),e.TgZ(7,"mat-option",33),e._uU(8,"None"),e.qZA(),e.YNc(9,Ui,3,2,"mat-option",17),e.qZA()()(),e.TgZ(10,"div",20)(11,"label"),e._uU(12,"Recurrence End"),e.qZA(),e.TgZ(13,"a-date-field",34),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.setOptions({recurr_end:i}))}),e.ALo(14,"async"),e.ALo(15,"async"),e.ALo(16,"async"),e._uU(17," Date and time must be in the future "),e.qZA()()()}if(2&o){const t=e.oxw(2);let n,i,s;e.xp6(5),e.Q6J("ngModel",null==(n=e.lcZ(6,7,t.options))?null:n.recurrence_pattern)("ngModelOptions",e.DdM(15,W)),e.xp6(4),e.Q6J("ngForOf",t.recurrence_options),e.xp6(4),e.Q6J("disabled",!(null!=(i=e.lcZ(14,9,t.options))&&i.pattern)||"none"===(null==(i=e.lcZ(15,11,t.options))?null:i.pattern))("ngModel",(null==(s=e.lcZ(16,13,t.options))?null:s.recurr_end)||(null==t.form||null==t.form.value?null:t.form.value.date))("ngModelOptions",e.DdM(16,W))("to",t.book_until)}}function Ki(o,a){if(1&o&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Gi(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",28)(1,"label"),e._uU(2,"Desk Features"),e.qZA(),e.TgZ(3,"mat-form-field",29)(4,"mat-select",36),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.setOptions({features:i||[]}))}),e.ALo(5,"async"),e.YNc(6,Ki,2,2,"mat-option",37),e.ALo(7,"async"),e.qZA()()()}if(2&o){const t=e.oxw(2);let n;e.xp6(4),e.Q6J("ngModel",(null==(n=e.lcZ(5,3,t.options))?null:n.features)||e.DdM(7,ft))("ngModelOptions",e.DdM(8,W)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(7,5,t.features))}}function Wi(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",39)(1,"mat-checkbox",21),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.form.patchValue({secondary_resource:i?"locker":""}))}),e._uU(2," Require locker "),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",!!t.form.value.secondary_resource)("ngModelOptions",e.DdM(2,W))}}function Ji(o,a){if(1&o&&(e.TgZ(0,"form",1),e.YNc(1,Ei,7,5,"div",2),e.TgZ(2,"div",3)(3,"div",4)(4,"label"),e._uU(5,"Date"),e.qZA(),e.TgZ(6,"a-date-field",5),e._uU(7," Date and time must be in the future "),e.qZA()(),e.YNc(8,yi,7,6,"div",6),e.ALo(9,"async"),e.YNc(10,Pi,7,6,"div",6),e.ALo(11,"async"),e.qZA(),e.YNc(12,Ii,10,9,"div",7),e.YNc(13,Ri,4,0,"div",8),e.YNc(14,Di,5,0,"div",9),e.YNc(15,qi,5,7,"div",9),e.ALo(16,"async"),e.YNc(17,$i,18,17,"div",7),e.YNc(18,Gi,8,9,"div",9),e.ALo(19,"async"),e.YNc(20,Wi,3,3,"div",10),e.qZA()),2&o){const t=e.oxw();let n,i,s,l;e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("ngIf",t.allow_groups),e.xp6(5),e.Q6J("to",t.book_until),e.xp6(2),e.Q6J("ngIf",(null==(n=e.lcZ(9,12,t.buildings))?null:n.length)>1),e.xp6(2),e.Q6J("ngIf",(null==(i=e.lcZ(11,14,t.levels))?null:i.length)>1),e.xp6(2),e.Q6J("ngIf",t.allow_time_changes),e.xp6(1),e.Q6J("ngIf",t.can_book_for_others),e.xp6(1),e.Q6J("ngIf",t.needs_reason),e.xp6(1),e.Q6J("ngIf",null==(s=e.lcZ(16,16,t.options))?null:s.group),e.xp6(2),e.Q6J("ngIf",t.can_recurr),e.xp6(1),e.Q6J("ngIf",null==(l=e.lcZ(19,18,t.features))?null:l.length),e.xp6(2),e.Q6J("ngIf",t.can_book_lockers)}}let ht=(()=>{class o{get building(){return this._org.building}set building(t){this._org.building=t}get can_book_lockers(){return this._settings.get("app.desks.can_book_lockers")}get can_book_for_others(){return this._settings.get("app.desks.can_book_for_others")}get can_recurr(){return this._settings.get("app.desks.recurrence_allowed")}get allow_groups(){return this._settings.get("app.desks.allow_groups")}get needs_reason(){return!0===this._settings.get("app.desks.needs_reason")}get allow_time_changes(){return!!this._settings.get("app.desks.allow_time_changes")}get allow_all_day(){return this.allow_time_changes&&!!this._settings.get("app.desks.allow_all_day")}get book_until(){return(0,ge.Z)((0,G.Z)(Date.now(),this._settings.get("app.desks.available_period")||90))}constructor(t,n,i){this._state=t,this._org=n,this._settings=i,this.buildings=this._org.building_list,this.levels=this._org.active_levels,this.options=this._state.options,this.features=this._state.features,this.recurrence_options=["daily","weekly","monthly"],this.setOptions=s=>this._state.setOptions(s)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.fy),e.Y36(O.w7),e.Y36(u.gb))},o.\u0275cmp=e.Xpm({type:o,selectors:[["detailed-book-desks-form"]],inputs:{form:"form"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["class","w-[640px] max-w-[calc(100%-2rem)] mx-auto mb-4",4,"ngIf"],[1,"flex","flex-col","sm:flex-row","space-x-0","sm:space-x-2","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],[1,"flex","flex-col","flex-1","w-full","sm:w-1/4"],["formControlName","date",3,"to"],["class","flex flex-col flex-1 w-full sm:w-1/4",4,"ngIf"],["class","flex flex-col sm:flex-row space-x-0 sm:space-x-2 w-[640px] max-w-[calc(100%-2rem)] mx-auto",4,"ngIf"],["class","flex flex-col w-[640px] max-w-[calc(100%-2rem)] mx-auto",4,"ngIf"],["class","flex flex-col flex-1 w-[640px] max-w-[calc(100%-2rem)] mx-auto",4,"ngIf"],["class","flex flex-col flex-1 w-[640px] max-w-[calc(100%-2rem)] mx-auto mb-4",4,"ngIf"],[1,"w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","mb-4"],[1,"w-full",3,"ngModel","ngModelOptions","ngModelChange"],["value","single",1,"w-1/2"],["value","group",1,"w-1/2"],["appearance","outline"],["placeholder","Select building",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placeholder","Any Level","ngModel","",3,"disabled","ngModelOptions","ngModelChange"],[1,"flex","flex-col","flex-1","w-full","sm:w-1/3"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"flex","flex-col","flex-1","w-full","sm:w-1/3","relative"],["formControlName","duration",3,"time","max","min","step","disabled"],["formControlName","all_day","class","absolute top-0 right-0",4,"ngIf"],["formControlName","all_day",1,"absolute","top-0","right-0"],[1,"flex","flex-col","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],["formControlName","user"],[1,"flex","flex-col","flex-1","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],["appearance","outline",1,"w-full"],["matInput","","formControlName","description","placeholder","Reason for booking..."],[3,"simple","ngModel","ngModelOptions","ngModelChange"],["placeholder","None",3,"ngModel","ngModelOptions","ngModelChange"],["value","none"],[3,"disabled","ngModel","ngModelOptions","to","ngModelChange"],[1,"capitalize"],["multiple","","placeholder","Any Feature",3,"ngModel","ngModelOptions","ngModelChange"],["class","capitalize",3,"value",4,"ngFor","ngForOf"],[1,"capitalize",3,"value"],[1,"flex","flex-col","flex-1","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","mb-4"]],template:function(t,n){1&t&&e.YNc(0,Ji,21,20,"form",0),2&t&&e.Q6J("ngIf",n.form)},dependencies:[_.sg,_.O5,h.ey,w.KE,J.gD,D.Nt,L.oG,V.Q,ee.B,te.N,Ae.E,gt.d,d._Y,d.Fj,d.JJ,d.JL,d.On,d.sg,d.u,Ue,$e,_.Ov]}),o})();function Qi(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.findDesk())}),e.TgZ(1,"div",6)(2,"app-icon",7),e._uU(3,"search"),e.qZA(),e.TgZ(4,"span",8),e._uU(5),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(5),e.Oqu(t.is_edit?"Update Desk":"Find Desk")}}function Bi(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.allocateDesk())}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.is_edit?"Update Desk":"Book Desk"," ")}}let Yi=(()=>{class o{get is_edit(){return!!this.form?.get("id")?.value}get auto_allocation(){return!!this._settings.get("app.desks.auto_allocation")}get form(){return this._state.form}constructor(t,n,i,s){this._state=t,this._router=n,this._org=i,this._settings=s,this.time=0,this.level="",this.quick_times=[{name:"Now",value:0},{name:"Tomorrow",value:(0,z.Z)((0,G.Z)(new Date,1),9).valueOf()}],this.levels=[],this.clearForm=()=>{this.time=0,this.level=this._org.building.id,this._state.clearForm()}}ngOnInit(){var t=this;return(0,f.Z)(function*(){yield t._org.initialised.pipe((0,N.P)(n=>n)),yield t._org.active_levels.pipe((0,N.P)(n=>n?.length>0)),t.level=t._org.building?.id,t.levels=[{id:t._org.building?.id,name:"Any Level"},...t._org.levelsForBuilding(t._org.building)]})()}quickBook(){this.form.patchValue({date:(this.time<1440?(0,Oe.Z)((0,mt.Z)(new Date,{nearestTo:5}),this.time):(0,z.Z)((0,G.Z)(new Date,1),8)).valueOf(),title:"Ad-hoc Desk Booking"}),this.findDesk()}findDesk(){this.form.markAllAsTouched(),this.form.patchValue({asset_id:" "}),this.form.valid&&(this.form.patchValue({asset_id:""}),this._router.navigate(["/book","desks","map"]))}allocateDesk(){var t=this;return(0,f.Z)(function*(){if(t.form.markAllAsTouched(),t.form.patchValue({asset_id:" "}),!t.form.valid)return(0,u.cB)(`Some fields are invalid. [${(0,u.RD)(t.form).join(", ")}]`);const n=t._settings.get("app.departments")||{"*":{level:t._org.levelsForBuilding()[0]?.id,centered_at:{x:.5,y:.5}}},i=(0,u.ar)().groups.find(C=>C in n)??"*";if(!n[i])return void t._router.navigate(["/book","desks","map"]);const{level:s,centered_at:l}=n[i],r=t._org.levelWithID([s]);if(!r)return void t._router.navigate(["/book","desks","map"]);const c=yield t._state.available_resources.pipe((0,y.q)(1)).toPromise(),m=s.map_id?yield(0,b.gV)(r.map_id,l,c.map(C=>C?.map_id||C?.id||"")):c[(0,u.Iy)(c.length)].id,g=c.find(C=>C.map_id===m||C.id===m);g?(t._state.form.patchValue({asset_id:g?.id,asset_name:g.name||g.id,map_id:g?.map_id||g?.id,description:g.name||g.id,booking_type:"desk",zones:g.zone?[g.zone?.parent_id,g.zone?.id]:[]}),yield t._state.confirmPost().catch(C=>console.error(C))):t._router.navigate(["/book","desks","map"])})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.fy),e.Y36(F.F0),e.Y36(O.w7),e.Y36(u.gb))},o.\u0275cmp=e.Xpm({type:o,selectors:[["desk-flow-form"]],decls:15,vars:5,consts:[["form","",1,"flex-1","min-h-[50%]"],[1,"text-xl","uppercase","font-medium","mb-2","mt-4","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],[3,"form"],[1,"mb-4","border-b","border-gray-300","dark:border-neutral-500","w-full"],[1,"flex","flex-col","sm:flex-row","items-center","justify-center","space-x-0","space-y-2","sm:space-y-0","sm:space-x-2","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","mb-4"],["btn","","matRipple","","clear","",1,"sm:flex-1","w-full","sm:w-auto","h-[2.75rem]","inverse",3,"click"],[1,"flex","items-center","justify-center"],[1,"text-xl"],[1,"ml-2","mx-4"],["class","sm:flex-1 w-full sm:w-auto h-[2.75rem]","find","","btn","","matRipple","",3,"click",4,"ngIf","ngIfElse"],["alloc_button",""],["find","","btn","","matRipple","",1,"sm:flex-1","w-full","sm:w-auto","h-[2.75rem]",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"section",0)(1,"h2",1),e._uU(2),e.qZA(),e._UZ(3,"detailed-book-desks-form",2)(4,"div",3),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return n.clearForm()}),e.TgZ(7,"div",6)(8,"app-icon",7),e._uU(9,"clear"),e.qZA(),e.TgZ(10,"span",8),e._uU(11),e.qZA()()(),e.YNc(12,Qi,6,1,"button",9),e.qZA()(),e.YNc(13,Bi,2,1,"ng-template",null,10,e.W1O)),2&t){const i=e.MAs(14);e.xp6(2),e.hij(" ",n.is_edit?"Edit":"Detailed"," Desk Booking "),e.xp6(1),e.Q6J("form",n.form),e.xp6(8),e.Oqu(n.is_edit?"Cancel Edit":"Clear Form"),e.xp6(1),e.Q6J("ngIf",!n.auto_allocation)("ngIfElse",i)}},dependencies:[_.O5,v.o,h.wG,ht],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column;overflow:auto}[quick][_ngcontent-%COMP%]{background-color:#007ac8}\n/*# sourceMappingURL=form.component.ts-angular-inline--103.css.map*/"]}),o})();var Ct=p(5148),ji=p(5722),xt=p(9136),vt=p(6817);function Hi(o,a){if(1&o&&(e.TgZ(0,"div",25),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t," ")}}const Xi=function(){return[]};function zi(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"li",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.setActiveDesk(s))}),e.TgZ(1,"app-icon",19),e._uU(2,"place"),e.qZA(),e.TgZ(3,"div",20)(4,"div",21),e._uU(5),e.qZA(),e.TgZ(6,"div",22),e._uU(7),e.qZA(),e.TgZ(8,"div",23),e.YNc(9,Hi,2,1,"div",24),e.qZA()()()}if(2&o){const t=a.$implicit,n=e.oxw();e.ekj("border-primary",(null==n.active_desk?null:n.active_desk.id)===t.id),e.uIk("desk-id",t.id),e.xp6(5),e.Oqu(t.name||t.id),e.xp6(2),e.hij(" ",(null==t.zone?null:t.zone.display_name)||(null==t.zone?null:t.zone.name)||"<No Level>"," "),e.xp6(2),e.Q6J("ngForOf",t.features||e.DdM(6,Xi))}}function Vi(o,a){if(1&o&&(e.TgZ(0,"div",29),e._uU(1),e.ALo(2,"async"),e.ALo(3,"async"),e.qZA()),2&o){const t=e.oxw(2);let n;e.xp6(1),e.hij(" ",(null==(n=e.lcZ(2,1,t.level))?null:n.display_name)||(null==(n=e.lcZ(3,3,t.level))?null:n.name)," ")}}function ea(o,a){if(1&o&&(e.TgZ(0,"div",26),e._UZ(1,"i-map",27),e.ALo(2,"async"),e.ALo(3,"async"),e.ALo(4,"async"),e.ALo(5,"async"),e.ALo(6,"async"),e.ALo(7,"async"),e.ALo(8,"async"),e.YNc(9,Vi,4,5,"div",28),e.ALo(10,"async"),e.qZA()),2&o){const t=e.oxw();let n,i;e.xp6(1),e.Q6J("src",e.lcZ(2,9,t.url))("zoom",null==(n=e.lcZ(3,11,t.positions))?null:n.zoom)("center",null==(i=e.lcZ(4,13,t.positions))?null:i.center)("styles",e.lcZ(5,15,t.styles))("features",e.lcZ(6,17,t.features))("actions",e.lcZ(7,19,t.actions))("labels",e.lcZ(8,21,t.labels))("focus",(null==t.active_desk?null:t.active_desk.map_id)||(null==t.active_desk?null:t.active_desk.id)),e.xp6(8),e.Q6J("ngIf",e.lcZ(10,23,t.level))}}function ta(o,a){if(1&o&&(e.TgZ(0,"div",30),e._UZ(1,"mat-spinner",31),e.TgZ(2,"p"),e._uU(3),e.ALo(4,"async"),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("diameter",32),e.xp6(2),e.Oqu(e.lcZ(4,2,t.loading))}}function na(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",33)(2,"div",21),e._uU(3),e.qZA(),e.TgZ(4,"div",22),e._uU(5),e.qZA()(),e.TgZ(6,"div",34)(7,"button",35),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.setActiveDesk(null))}),e._uU(8," Clear "),e.qZA(),e.TgZ(9,"button",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.makeBooking())}),e._uU(10," Book "),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.active_desk.name),e.xp6(2),e.hij(" ",(null==t.active_desk.zone?null:t.active_desk.zone.display_name)||t.active_desk.zone.name||"<No Level>"," ")}}const oa=function(){return["/book","desks","form"]};let ia=(()=>{class o extends u.cx{get active_desk(){return this._active_desk.getValue()}get hide_map(){return!!this._settings.get("app.desks.hide_map")}constructor(t,n,i){super(),this._state=t,this._settings=n,this._explore=i,this.url=this._explore.map_url,this.styles=this._explore.map_styles,this.positions=this._explore.map_positions,this.features=this._explore.map_features,this.actions=this._explore.map_actions,this.labels=this._explore.map_labels,this.level=this._explore.level,this.desks=this._state.available_resources,this.loading=this._state.loading,this.form=this._state.form,this.option_details=(0,j.aj)([this._state.options,this.form.valueChanges.pipe((0,ji.O)({}))]).pipe((0,Z.U)(([s])=>{const l=this._state.form,r=(0,u.IO)({pattern:s.pattern,end:s.recurr_end,start:l.value.date,interval:1,days_of_week:[]}),c=`${(0,Ct.Z)(l.value.date,"dd MMM yyyy")}${s.pattern&&"none"!==s.pattern?", "+r:""}${s.group?", "+s.group:""}, ${s.features?.length||"Any"} Feature${(s.features?.length||0)<2?"":"s"}`;return s.zone_id&&this._explore.setLevel(s.zone_id),c})),this._active_desk=new P.X(null),this.makeBooking=()=>this._state.confirmPost()}ngOnInit(){this.subscription("assets-statue",(0,j.aj)([this._state.resources,this._state.available_resources,this._active_desk]).pipe((0,nt.b)(200)).subscribe(([t,n])=>{const i={},s=[];for(const l of t){const r=l.bookable&&n.find(c=>c.id===l.id);i[`#${l.map_id||l.id}`]={fill:l.bookable?n.find(c=>c.id===l.id)?"#43a047":"#e53935":"#999",opacity:.6},r&&s.push({id:l.map_id||l.id,action:"click",callback:()=>this.setActiveDesk(l)})}this._explore.setStyles("desks",i),this._explore.setActions("desks",s),this._explore.setFeatures("desks",this.active_desk?[{location:this.active_desk.map_id||this.active_desk.id,content:'\n                    <span class="flex h-4 w-4 rounded-full absolute top-1/4 left-1/4 transform -translate-x-1/2 -translate-y-1/2 border-[3px] border-white dark:border-neutral-4\xe500 shadow" >\n                        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>\n                        <span class="relative inline-flex rounded-full h-full w-full bg-primary"></span>\n                    </span>'}]:[])}))}setActiveDesk(t){this._explore.setLevel(t?.zone?.id),this._active_desk.next(t),this._state.form.patchValue({asset_id:t?.id,asset_name:t.name,map_id:t?.map_id||t?.id,description:t.name,booking_type:"desk",zones:t.zone?[t.zone?.parent_id,t.zone?.id]:[]})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.fy),e.Y36(u.gb),e.Y36(se.ck))},o.\u0275cmp=e.Xpm({type:o,selectors:[["desk-flow-map"]],features:[e.qOj],decls:28,vars:22,consts:[["topbar","",1,""],["button","","btn","","matRipple","",1,"clear","h-[2.75rem]","text-white",3,"routerLink"],[1,"flex","items-center","justify-center","h-full"],[1,"text-xl"],[1,"ml-2","mx-4"],[1,"flex","flex-col","flex-1","h-1/2","w-full"],[1,"text-2xl","px-4","pt-4","text-center"],[1,"my-4","mx-auto","w-[640px]","max-w-[calc(100vw-2rem)]",3,"matMenuTriggerFor"],["menu","matMenu"],[1,"pt-4","max-h-[65vh]","overflow-auto",3,"click"],[3,"form"],["listing","",1,"flex","flex-1","h-1/2","relative","space-x-2"],[1,"list-style-none","w-full","sm:w-[20rem]","max-w-[48rem]","mx-auto","bg-gray-100","dark:bg-neutral-600","pb-32","overflow-auto","h-full","rounded-tr-lg","space-y-2"],[1,"py-2","px-4","sticky","top-0","inset-x-0","bg-gray-100","dark:bg-neutral-600","border-b","border-gray-200","dark:border-neutral-500","z-10"],["matRipple","","class","flex items-center p-2 mx-2 bg-white dark:bg-neutral-700 rounded shadow cursor-pointer space-x-2 min-h-[5rem] border",3,"border-primary","click",4,"ngFor","ngForOf"],["class","hidden sm:block flex-1 bg-gray-200 dark:bg-neutral-600 rounded-tl-lg border-l border-t border-gray-300 dark:border-neutral-500 relative overflow-hidden h-full",4,"ngIf"],["class","absolute inset-0 bg-white dark:bg-neutral-700 bg-opacity-60 flex flex-col items-center justify-center space-y-2 !m-0 z-20",4,"ngIf"],["selection","","class","absolute bottom-2 left-1/2 transform -translate-x-1/2 p-2 bg-white dark:bg-neutral-700 shadow rounded w-[24rem] max-w-[calc(100vw-1rem)] space-y-2 !m-0 border border-gray-200",4,"ngIf"],["matRipple","",1,"flex","items-center","p-2","mx-2","bg-white","dark:bg-neutral-700","rounded","shadow","cursor-pointer","space-x-2","min-h-[5rem]","border",3,"click"],[1,"text-2xl"],[1,"flex","flex-col","w-1/2","flex-1"],["name","",1,""],["level","",1,"text-xs"],["features","",1,"w-full","flex","flex-wrap"],["class","text-xs bg-primary text-white rounded-xl px-2 py-1 mt-1 mr-2",4,"ngFor","ngForOf"],[1,"text-xs","bg-primary","text-white","rounded-xl","px-2","py-1","mt-1","mr-2"],[1,"hidden","sm:block","flex-1","bg-gray-200","dark:bg-neutral-600","rounded-tl-lg","border-l","border-t","border-gray-300","dark:border-neutral-500","relative","overflow-hidden","h-full"],[3,"src","zoom","center","styles","features","actions","labels","focus"],["class","absolute top-2 left-2 bg-white dark:bg-neutral-700 rounded-3xl h-10 px-3 flex items-center border border-gray-300 dark:border-neutral-500",4,"ngIf"],[1,"absolute","top-2","left-2","bg-white","dark:bg-neutral-700","rounded-3xl","h-10","px-3","flex","items-center","border","border-gray-300","dark:border-neutral-500"],[1,"absolute","inset-0","bg-white","dark:bg-neutral-700","bg-opacity-60","flex","flex-col","items-center","justify-center","space-y-2","!m-0","z-20"],[3,"diameter"],["selection","",1,"absolute","bottom-2","left-1/2","transform","-translate-x-1/2","p-2","bg-white","dark:bg-neutral-700","shadow","rounded","w-[24rem]","max-w-[calc(100vw-1rem)]","space-y-2","!m-0","border","border-gray-200"],[1,""],[1,"flex","items-center","space-x-2"],["matRipple","",1,"inverse","flex-1",3,"click"],["matRipple","",1,"flex-1",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"a",1)(2,"div",2)(3,"app-icon",3),e._uU(4,"arrow_back"),e.qZA(),e.TgZ(5,"span",4),e._uU(6,"Back"),e.qZA()()()(),e.TgZ(7,"div",5)(8,"h2",6),e._uU(9,"Available Desks"),e.qZA(),e.TgZ(10,"an-action-field",7),e._uU(11),e.ALo(12,"async"),e.qZA(),e.TgZ(13,"mat-menu",null,8)(15,"div",9),e.NdJ("click",function(s){return s.stopPropagation(),s.preventDefault}),e._UZ(16,"detailed-book-desks-form",10),e.qZA()(),e.TgZ(17,"div",11)(18,"ul",12)(19,"div",13),e._uU(20),e.ALo(21,"async"),e.qZA(),e.YNc(22,zi,10,7,"li",14),e.ALo(23,"async"),e.qZA(),e.YNc(24,ea,11,25,"div",15),e.YNc(25,ta,5,4,"div",16),e.ALo(26,"async"),e.YNc(27,na,11,2,"div",17),e.qZA()()),2&t){const i=e.MAs(14);let s;e.xp6(1),e.Q6J("routerLink",e.DdM(21,oa)),e.xp6(9),e.Q6J("matMenuTriggerFor",i),e.xp6(1),e.hij(" ",e.lcZ(12,13,n.option_details)||"No Filters"," "),e.xp6(5),e.Q6J("form",n.form),e.xp6(2),e.ekj("!w-full",n.hide_map)("rounded-tl-lg",n.hide_map),e.xp6(2),e.hij(" ",(null==(s=e.lcZ(21,15,n.desks))?null:s.length)||"0"," matches available "),e.xp6(2),e.Q6J("ngForOf",e.lcZ(23,17,n.desks)),e.xp6(2),e.Q6J("ngIf",!n.hide_map),e.xp6(1),e.Q6J("ngIf",e.lcZ(26,19,n.loading)),e.xp6(2),e.Q6J("ngIf",n.active_desk)}},dependencies:[_.sg,_.O5,v.o,xt.p,R.VK,R.p6,h.wG,M.Ou,vt.s,F.rH,ht,_.Ov],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[topbar][_ngcontent-%COMP%]{background-color:#00539f}\n/*# sourceMappingURL=map.component.ts-angular-inline--104.css.map*/"]}),o})();const aa=function(){return["/book","desks","map"]};let sa=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["desk-flow-confirm"]],decls:7,vars:2,consts:[["topbar","",1,""],["btn","","matRipple","",1,"clear","h-[2.75rem]","text-white",3,"routerLink"],[1,"flex","items-center","justify-center","h-full"],[1,"text-xl"],[1,"ml-2","mx-4"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"a",1)(2,"div",2)(3,"app-icon",3),e._uU(4,"arrow_back"),e.qZA(),e.TgZ(5,"span",4),e._uU(6,"Back"),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("routerLink",e.DdM(1,aa)))},dependencies:[v.o,h.wG,F.rH],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[topbar][_ngcontent-%COMP%]{background-color:#00539f}\n/*# sourceMappingURL=confirm.component.ts-angular-inline--102.css.map*/"]}),o})();function la(o,a){1&o&&e._UZ(0,"br")}const ra=function(o){return["/book",o]},_a=function(){return{}},ca=function(){return["/schedule"]},da=function(o){return{email:o}};let Ee=(()=>{class o{constructor(){this.extra="",this.route="spaces",this.type="space"}get is_host(){return this.calendar===(0,u.ar)()?.email}get title(){return this.is_host?"your":"the host'"}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["flow-success"]],inputs:{calendar:"calendar",extra:"extra",route:"route",type:"type"},decls:15,vars:14,consts:[["name","success",1,"fixed","inset-0","flex","flex-col","bg-indigo-900","items-center","justify-center","z-50"],[1,"text-7xl","rounded-full","bg-white","text-success","mb-4"],[1,"text-center","text-lg","text-white","mb-4","leading-10"],[4,"ngIf"],[1,"flex","items-center","space-x-2"],["btn","","matRipple","",1,"w-32","border","border-white",3,"routerLink","queryParams"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"app-icon"),e._uU(3,"done"),e.qZA()(),e.TgZ(4,"div",2),e._uU(5),e._UZ(6,"br"),e._uU(7),e.YNc(8,la,1,0,"br",3),e._uU(9),e.qZA(),e.TgZ(10,"div",4)(11,"a",5),e._uU(12," New Booking "),e.qZA(),e.TgZ(13,"a",5),e._uU(14," Your Bookings "),e.qZA()()()),2&t&&(e.xp6(5),e.hij(" Thank you, your ",n.type," booking was successful!"),e.xp6(2),e.hij(" ",n.extra," "),e.xp6(1),e.Q6J("ngIf",n.extra),e.xp6(1),e.hij(" An event has been added to ",n.title," calendar "),e.xp6(2),e.Q6J("routerLink",e.VKq(8,ra,n.route))("queryParams",e.DdM(10,_a)),e.xp6(2),e.Q6J("routerLink",e.DdM(11,ca))("queryParams",e.VKq(12,da,n.calendar)))},dependencies:[_.O5,v.o,h.wG,F.rH]}),o})();function ua(o,a){1&o&&(e.ynx(0),e._UZ(1,"desk-flow-map"),e.BQk())}function pa(o,a){1&o&&(e.ynx(0),e._UZ(1,"desk-flow-confirm"),e.BQk())}function ma(o,a){if(1&o&&(e.ynx(0),e._UZ(1,"flow-success",4),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("calendar",null==t.last_success?null:t.last_success.user_email)("extra",null!=t.last_success&&null!=t.last_success.extension_data&&t.last_success.extension_data.secondary_resource?"Locker E-093 has been allocated for this booking.":"")}}function ga(o,a){1&o&&(e.ynx(0),e._UZ(1,"desk-flow-form"),e.BQk())}let fa=(()=>{class o extends u.cx{get view(){return this._state.view}get last_success(){return this._state.last_success}constructor(t,n,i){super(),this._state=t,this._route=n,this._org=i}ngOnInit(){var t=this;return(0,f.Z)(function*(){yield t._org.initialised.pipe((0,N.P)(n=>n)).toPromise(),t._state.loadForm(),t._state.form||t._state.newForm(),t._state.form.patchValue({booking_type:"desk"}),t.subscription("route.params",t._route.paramMap.subscribe(n=>{n.has("step")&&t._state.setView(n.get("step"))})),t.subscription("route.query",t._route.queryParamMap.subscribe(n=>{n.has("success")&&t._state.setView(n.get("success"))}))})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.fy),e.Y36(F.gz),e.Y36(O.w7))},o.\u0275cmp=e.Xpm({type:o,selectors:[["placeos-book-desk-flow"]],features:[e.qOj],decls:6,vars:4,consts:[[1,"bg-white","dark:bg-neutral-700","h-full","w-full"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["type","desk","route","desks",3,"calendar","extra"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.ynx(1,1),e.YNc(2,ua,2,0,"ng-container",2),e.YNc(3,pa,2,0,"ng-container",2),e.YNc(4,ma,2,2,"ng-container",2),e.YNc(5,ga,2,0,"ng-container",3),e.BQk(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngSwitch",n.view),e.xp6(1),e.Q6J("ngSwitchCase","map"),e.xp6(1),e.Q6J("ngSwitchCase","confirm"),e.xp6(1),e.Q6J("ngSwitchCase","success"))},dependencies:[_.RF,_.n9,_.ED,Yi,ia,sa,Ee],styles:["[_nghost-%COMP%]{position:relative;height:100%;width:100%}\n/*# sourceMappingURL=desk-flow.component.ts-angular-inline--101.css.map*/"]}),o})();var Ft=p(3474),Tt=p(7948);function ha(o,a){1&o&&(e.TgZ(0,"mat-checkbox",22),e._uU(1," All Day "),e.qZA())}function Ca(o,a){if(1&o&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.display_name||t.name," ")}}const Se=function(){return{standalone:!0}};function xa(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",26)(1,"mat-select",27),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(3);return e.KtG(s.setBuilding(i))}),e.YNc(2,Ca,2,2,"mat-option",28),e.ALo(3,"async"),e.qZA()()}if(2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngModel",t.building)("ngModelOptions",e.DdM(5,Se)),e.xp6(1),e.Q6J("ngForOf",e.lcZ(3,3,t.buildings))}}function va(o,a){if(1&o&&(e.TgZ(0,"div",23)(1,"label",24),e._uU(2,"Building"),e.qZA(),e.YNc(3,xa,4,6,"mat-form-field",25),e.ALo(4,"async"),e.qZA()),2&o){const t=e.oxw(2);let n;e.xp6(3),e.Q6J("ngIf",(null==(n=e.lcZ(4,1,t.buildings))?null:n.length)>1)}}function Fa(o,a){if(1&o&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Ta(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",23)(1,"label",30),e._uU(2,"Features"),e.qZA(),e.TgZ(3,"mat-form-field",31)(4,"mat-select",32),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.optionsChange.emit({features:i}))}),e.YNc(5,Fa,2,2,"mat-option",28),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("placeholder","Any "+t.features_label)("ngModel",null==t.options?null:t.options.features)("ngModelOptions",e.DdM(4,Se)),e.xp6(1),e.Q6J("ngForOf",t.features)}}function ba(o,a){1&o&&(e.TgZ(0,"div",35)(1,"label",36),e._uU(2,"Host"),e.TgZ(3,"span"),e._uU(4,"*"),e.qZA()(),e._UZ(5,"host-select-field",37),e.qZA())}function Oa(o,a){if(1&o&&(e.TgZ(0,"div",38)(1,"label",39),e._uU(2,"Attendees"),e.qZA(),e._UZ(3,"a-user-list-field",40),e.qZA()),2&o){const t=e.oxw(3);e.xp6(3),e.Q6J("hideActions",t.hide_actions)}}function Aa(o,a){if(1&o&&(e.TgZ(0,"section",2),e.YNc(1,ba,6,0,"div",33),e.YNc(2,Oa,4,1,"div",34),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.can_book_for_others),e.xp6(1),e.Q6J("ngIf",!t.hide_attendees)}}function wa(o,a){1&o&&(e.TgZ(0,"div",41)(1,"label",42),e._uU(2,"Notes"),e.qZA(),e._UZ(3,"rich-text-input",43),e.qZA())}function Ma(o,a){1&o&&(e.TgZ(0,"div",48),e._uU(1," Add catering "),e.qZA())}function Za(o,a){if(1&o&&(e.TgZ(0,"div",49)(1,"div",50),e._uU(2),e.qZA(),e.TgZ(3,"div",51),e._uU(4),e.ALo(5,"currency"),e.qZA()()),2&o){const t=e.oxw(3);e.xp6(2),e.hij(" ",null==t.form?null:t.form.value.catering[0].item_count," item(s) "),e.xp6(2),e.hij(" ",e.xi3(5,2,(null==t.form?null:t.form.value.catering[0].total_cost)/100,t.code)," ")}}function Na(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",44)(1,"label"),e._uU(2,"Catering"),e.qZA(),e.TgZ(3,"an-action-field",45),e.NdJ("onAction",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.editCatering())}),e.YNc(4,Ma,2,0,"div",46),e.YNc(5,Za,6,5,"div",47),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("ngIf",!(null!=t.form&&null!=t.form.value.catering&&t.form.value.catering.length)),e.xp6(1),e.Q6J("ngIf",null==t.form||null==t.form.value.catering?null:t.form.value.catering.length)}}function Ea(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"form",1)(1,"section",2)(2,"div",3)(3,"div",4)(4,"label",5),e._uU(5,"Date"),e.qZA(),e.TgZ(6,"a-date-field",6),e._uU(7," Date and time must be in the future "),e.qZA()(),e.TgZ(8,"div",4)(9,"label",7),e._uU(10,"Start Time"),e.qZA(),e.TgZ(11,"a-time-field",8),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.form.patchValue({date:i}))}),e.qZA()(),e.TgZ(12,"div",9)(13,"label",10),e._uU(14,"End Time"),e.qZA(),e._UZ(15,"a-duration-field",11),e.YNc(16,ha,2,0,"mat-checkbox",12),e.qZA()(),e.TgZ(17,"div",3),e.YNc(18,va,5,3,"div",13),e.YNc(19,Ta,6,5,"div",13),e.qZA()(),e.YNc(20,Aa,3,2,"section",14),e.TgZ(21,"section",2)(22,"div",15)(23,"div",16)(24,"label",17),e._uU(25,"Meeting Subject "),e.TgZ(26,"span"),e._uU(27,"*"),e.qZA()(),e.TgZ(28,"mat-form-field",18),e._UZ(29,"input",19),e.TgZ(30,"mat-error"),e._uU(31,"Meeting Subject is required"),e.qZA()()(),e.YNc(32,wa,4,0,"div",20),e.YNc(33,Na,6,2,"div",21),e.qZA()()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(11),e.Q6J("ngModel",t.form.value.date)("ngModelOptions",e.DdM(11,Se)),e.xp6(4),e.Q6J("time",t.form.value.date)("max",t.max_duration),e.xp6(1),e.Q6J("ngIf",t.allow_all_day),e.xp6(2),e.Q6J("ngIf",t.show_features&&(null==t.features?null:t.features.length)),e.xp6(1),e.Q6J("ngIf",t.show_features&&(null==t.features?null:t.features.length)),e.xp6(1),e.Q6J("ngIf",t.can_book_for_others||!t.hide_attendees),e.xp6(12),e.Q6J("ngIf",!t.hide_notes),e.xp6(1),e.Q6J("ngIf",t.has_catering)}}let Sa=(()=>{class o{get building(){return this._org.building}get has_catering(){return!!this._settings.get("app.events.has_catering")}get hide_actions(){return!!this._settings.get("app.events.hide_user_actions")}get hide_notes(){return!!this._settings.get("app.events.hide_notes")}get hide_attendees(){return!!this._settings.get("app.events.hide_attendees")}get can_book_for_others(){return this._settings.get("app.events.can_book_for_others")}get allow_all_day(){return this._settings.get("app.events.allow_all_day")}get max_duration(){return this._settings.get("app.events.max_duration")||240}get show_features(){return!!this._settings.get("app.events.features_on_form")}get features_label(){return this._settings.get("app.events.features_label")||"feature"}get code(){return this._org.currency_code}constructor(t,n,i){var s=this;this._catering=t,this._org=n,this._settings=i,this.features=[],this.optionsChange=new e.vpe,this.buildings=this._org.building_list,this.setBuilding=l=>this._org.building=l,this.editCatering=(0,f.Z)(function*(){return s.form.patchValue({catering:[yield s._catering.manageCateringOrder((s.form.value.catering?s.form.value.catering[0]:null)||new K.G)]})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(me),e.Y36(O.w7),e.Y36(u.gb))},o.\u0275cmp=e.Xpm({type:o,selectors:[["detailed-book-space-form"]],inputs:{form:"form",options:"options",features:"features"},outputs:{optionsChange:"optionsChange"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"mb-4","border-b","border-gray-300","dark:border-neutral-500"],[1,"flex","flex-col","sm:flex-row","space-x-0","sm:space-x-2","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],[1,"flex","flex-col","flex-1","w-full","sm:w-1/3"],["for","date"],["name","date","formControlName","date"],["for","start-time"],["name","start-time",3,"ngModel","ngModelOptions","ngModelChange"],[1,"flex","flex-col","flex-1","w-full","sm:w-1/3","relative"],["for","end-time"],["name","end-time","formControlName","duration",3,"time","max"],["formControlName","all_day","class","absolute top-0 right-0",4,"ngIf"],["class","flex flex-col flex-1 w-full",4,"ngIf"],["class","mb-4 border-b border-gray-300 dark:border-neutral-500",4,"ngIf"],[1,"w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],[1,"flex","flex-col"],["for","title"],["appearance","outline"],["name","title","matInput","","formControlName","title","placeholder","Meeting title"],["class","flex flex-col resize-y mb-4",4,"ngIf"],["class","flex flex-col mb-4",4,"ngIf"],["formControlName","all_day",1,"absolute","top-0","right-0"],[1,"flex","flex-col","flex-1","w-full"],["for","building"],["overlay","","buildings","","class","w-full h-[3.25rem]","appearance","outline",4,"ngIf"],["overlay","","buildings","","appearance","outline",1,"w-full","h-[3.25rem]"],["placeholder","Select Building...",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["for","features"],["overlay","","appearance","outline",1,"w-full","h-[3.25rem]"],["multiple","",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],["class","flex flex-col w-[640px] max-w-[calc(100%-2rem)] mx-auto",4,"ngIf"],["class","flex flex-col w-[640px] max-w-[calc(100%-2rem)] mx-auto mb-2",4,"ngIf"],[1,"flex","flex-col","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],["for","host"],["name","host","formControlName","organiser"],[1,"flex","flex-col","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","mb-2"],["for","attendees"],["name","attendees","formControlName","attendees",3,"hideActions"],[1,"flex","flex-col","resize-y","mb-4"],["for","notes"],["name","notes","formControlName","body","placeholder","Add meeting notes here..."],[1,"flex","flex-col","mb-4"],[3,"onAction"],["class","opacity-40",4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"opacity-40"],[1,"flex","items-center"],[1,"flex-1","w-1/2"],[1,"text-xs","opacity-60","px-4"]],template:function(t,n){1&t&&e.YNc(0,Ea,34,12,"form",0),2&t&&e.Q6J("ngIf",n.form)},dependencies:[_.sg,_.O5,h.ey,w.KE,w.TO,J.gD,D.Nt,L.oG,vt.s,V.Q,ee.B,te.N,Ae.E,Ft.n,Tt.d,d._Y,d.Fj,d.JJ,d.JL,d.On,d.sg,d.u,_.Ov,_.H9]}),o})();function ya(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.confirmBooking())}),e.TgZ(1,"div",5)(2,"app-icon",6),e._uU(3,"event_available"),e.qZA(),e.TgZ(4,"span",7),e._uU(5),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(5),e.Oqu(t.is_edit?"Confirm changes":"Book without Space")}}let ka=(()=>{class o{get is_edit(){return!!this.form?.value?.id}get form(){return this._state.form}get allow_standalone_bookings(){return this._settings.get("app.events.allow_standalone_bookings")}constructor(t,n,i){this._state=t,this._settings=n,this._router=i,this.time=0,this.capacity=0,this.quick_times=[{name:"Now",value:0},{name:"Later Today",value:120},{name:"Tomorrow",value:(0,z.Z)((0,G.Z)(new Date,1),9).valueOf()}],this.quick_capacities=[{name:"Any Capacity",value:0},{name:"Small (1 - 4)",value:1},{name:"Medium (5 - 12)",value:5},{name:"Large (13 - 32)",value:13},{name:"Huge (32+)",value:33}],this.options=this._state.options,this.features=this._state.features,this.setOptions=s=>this._state.setOptions(s),this.clearForm=()=>{this.time=this.capacity=0,this._state.clearForm()}}quickBook(){this.form.value.host||this.form.patchValue({host:(0,u.ar)()?.email}),this.form.patchValue({date:(this.time<1440?(0,Oe.Z)((0,mt.Z)(new Date,{nearestTo:5}),this.time):(0,z.Z)((0,G.Z)(new Date,1),8)).valueOf(),title:"Ad-hoc Meeting"}),this._state.setOptions({capacity:this.capacity}),this._router.navigate(["/book","spaces","find"])}findSpace(){if(this.form.markAllAsTouched(),this.form.value.host||this.form.patchValue({host:(0,u.ar)()?.email}),!this.form.valid)return(0,u.cB)(`Some fields are invalid. [${(0,u.RD)(this.form).join(", ")}]`);this._router.navigate(["/book","spaces","find"])}confirmBooking(){if(this.form.value.host||this.form.patchValue({host:(0,u.ar)()?.email}),this.form.markAllAsTouched(),!this.form.valid)return(0,u.cB)(`Some fields are invalid. [${(0,u.RD)(this.form).join(", ")}]`);this._router.navigate(["/book","spaces","confirm"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(k.MH),e.Y36(u.gb),e.Y36(F.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["space-flow-form"]],decls:20,vars:11,consts:[["form","",1,"flex-1","min-h-[50%]"],[1,"text-xl","uppercase","font-medium","mb-2","mt-4","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],[3,"form","options","features","optionsChange"],[1,"flex","flex-col","sm:flex-row","items-center","justify-center","space-x-0","space-y-2","sm:space-y-0","sm:space-x-2","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","mb-4"],["btn","","matRipple","","clear","",1,"sm:flex-1","w-full","sm:w-auto","h-[2.75rem]","inverse",3,"click"],[1,"flex","items-center","justify-center"],[1,"text-xl"],[1,"ml-2","mx-4"],["btn","","matRipple","","find-space","",1,"sm:flex-1","w-full","sm:w-auto","h-[2.75rem]",3,"click"],["class","sm:flex-1 w-full sm:w-auto h-[2.75rem]","btn","","matRipple","","standalone","",3,"click",4,"ngIf"],["btn","","matRipple","","standalone","",1,"sm:flex-1","w-full","sm:w-auto","h-[2.75rem]",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"section",0)(1,"h2",1),e._uU(2),e.qZA(),e.TgZ(3,"detailed-book-space-form",2),e.NdJ("optionsChange",function(s){return n.setOptions(s)}),e.ALo(4,"async"),e.ALo(5,"async"),e.qZA(),e.TgZ(6,"div",3)(7,"button",4),e.NdJ("click",function(){return n.clearForm()}),e.TgZ(8,"div",5)(9,"app-icon",6),e._uU(10,"clear"),e.qZA(),e.TgZ(11,"span",7),e._uU(12),e.qZA()()(),e.TgZ(13,"button",8),e.NdJ("click",function(){return n.findSpace()}),e.TgZ(14,"div",5)(15,"app-icon",6),e._uU(16,"search"),e.qZA(),e.TgZ(17,"span",7),e._uU(18),e.qZA()()(),e.YNc(19,ya,6,1,"button",9),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",n.is_edit?"Edit":"Detailed"," Space Booking "),e.xp6(1),e.Q6J("form",n.form)("options",e.lcZ(4,7,n.options))("features",e.lcZ(5,9,n.features)),e.xp6(9),e.Oqu(n.is_edit?"Cancel Edit":"Clear Form"),e.xp6(6),e.Oqu(n.is_edit?"Update Spaces":"Find Space"),e.xp6(1),e.Q6J("ngIf",n.is_edit||n.allow_standalone_bookings))},dependencies:[_.O5,v.o,h.wG,Sa,_.Ov],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column;overflow:auto}[quick][_ngcontent-%COMP%]{background-color:#007ac8}\n/*# sourceMappingURL=form.component.ts-angular-inline--109.css.map*/"]}),o})();var ne=p(6198),bt=(p(2886),p(6725));let Pa=(()=>{class o{constructor(t){this._dialog=t,this.bookChange=new e.vpe}bookSpace(){this.book=!this.multiple||!this.book,this.bookChange.emit(this.book)}viewLocation(){this._dialog.open(bt.p6,{maxWidth:"95vw",maxHeight:"95vh",data:{item:this.space}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["space-flow-find-item"]],inputs:{space:"space",multiple:"multiple",book:"book"},outputs:{bookChange:"bookChange"},decls:19,vars:8,consts:[[1,"flex","items-center","bg-white","dark:bg-neutral-700","p-2","my-2","shadow","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","rounded"],[1,"flex","flex-col","flex-1","space-y-2"],[1,"flex","items-center"],[1,"p-2","rounded-full","bg-gray-300","dark:bg-neutral-600","mr-2"],[1,"flex","flex-col","space-y-2","ml-2"],["matRipple","","book","",3,"click"],["locate","","btn","","matRipple","",1,"inverse",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-icon"),e._uU(5,"place"),e.qZA()(),e.TgZ(6,"span"),e._uU(7),e.qZA()(),e.TgZ(8,"div",2)(9,"div",3)(10,"app-icon"),e._uU(11,"group"),e.qZA()(),e.TgZ(12,"span"),e._uU(13),e.qZA()()(),e.TgZ(14,"div",4)(15,"button",5),e.NdJ("click",function(){return n.bookSpace()}),e._uU(16),e.qZA(),e.TgZ(17,"button",6),e.NdJ("click",function(){return n.viewLocation()}),e._uU(18," Map "),e.qZA()()()),2&t&&(e.xp6(7),e.AsE("",(null==n.space||null==n.space.level?null:n.space.level.display_name)||(null==n.space||null==n.space.level?null:n.space.level.name),", ",(null==n.space?null:n.space.display_name)||(null==n.space?null:n.space.name),""),e.xp6(6),e.hij("",(null==n.space?null:n.space.capacity)||0," People"),e.xp6(2),e.ekj("bg-pending",n.multiple&&n.book)("border-pending",n.multiple&&n.book),e.xp6(1),e.hij(" ",n.multiple?n.book?"Remove":"Select":"Book"," "))},dependencies:[v.o,h.wG],styles:["button[_ngcontent-%COMP%]{width:8rem}\n/*# sourceMappingURL=find-item.component.ts-angular-inline--107.css.map*/"]}),o})();function La(o,a){if(1&o&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.display_name||t.name," ")}}function Ia(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",20)(1,"mat-select",21),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.setBuilding(i))}),e.ALo(2,"async"),e.YNc(3,La,2,2,"mat-option",13),e.ALo(4,"async"),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",e.lcZ(2,2,t.building)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(4,4,t.buildings))}}function Ra(o,a){if(1&o&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.display_name||t.name," ")}}function Da(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",23)(1,"mat-select",24),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.setOptions({zone_ids:[i]}))}),e.ALo(2,"async"),e.ALo(3,"async"),e.YNc(4,Ra,2,2,"mat-option",13),e.ALo(5,"async"),e.qZA()()}if(2&o){const t=e.oxw();let n;e.xp6(1),e.Q6J("ngModel",null!=(n=e.lcZ(2,2,t.options))&&null!=n.zone_ids&&n.zone_ids.length?null==(n=e.lcZ(3,4,t.options))?null:n.zone_ids[0]:""),e.xp6(3),e.Q6J("ngForOf",e.lcZ(5,6,t.levels))}}function qa(o,a){if(1&o&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.name," ")}}function Ua(o,a){if(1&o&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function $a(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",11)(1,"mat-select",25),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.setOptions({features:i}))}),e.ALo(2,"async"),e.YNc(3,Ua,2,2,"mat-option",13),e.ALo(4,"async"),e.qZA()()}if(2&o){const t=e.oxw();let n;e.xp6(1),e.Q6J("placeholder","Any "+t.features_label)("ngModel",null==(n=e.lcZ(2,3,t.options))?null:n.features),e.xp6(2),e.Q6J("ngForOf",e.lcZ(4,5,t.features))}}function Ka(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"space-flow-find-item",28),e.NdJ("bookChange",function(i){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.handleBookEvent(l,i))}),e.qZA()}if(2&o){const t=a.$implicit,n=e.oxw(3);e.Q6J("space",t)("multiple",n.multiple)("book",n.book_space[t.id])}}function Ga(o,a){if(1&o&&(e.ynx(0),e.YNc(1,Ka,1,3,"space-flow-find-item",26),e.ALo(2,"async"),e.TgZ(3,"p",27),e._uU(4," End of available spaces list "),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.spaces))}}function Wa(o,a){if(1&o&&(e.ynx(0),e.YNc(1,Ga,5,3,"ng-container",16),e.ALo(2,"async"),e.BQk()),2&o){const t=e.oxw(),n=e.MAs(29);let i;e.xp6(1),e.Q6J("ngIf",(null==(i=e.lcZ(2,2,t.spaces))?null:i.length)>0)("ngIfElse",n)}}function Ja(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",37)(1,"div",38)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",39),e._uU(5),e.qZA()(),e.TgZ(6,"button",40),e.NdJ("click",function(i){const l=e.CHM(t).$implicit;return e.oxw(2).handleBookEvent(l,!1),e.KtG(i.stopPropagation())}),e.TgZ(7,"app-icon"),e._uU(8,"close"),e.qZA()()()}if(2&o){const t=a.$implicit;e.xp6(3),e.Oqu(t.display_name||t.name),e.xp6(2),e.AsE(" ",(null==t.level?null:t.level.display_name)||(null==t.level?null:t.level.name)," ~ ",t.capacity||"2+"," People ")}}function Qa(o,a){1&o&&(e.TgZ(0,"div",41),e._uU(1," No selected spaces "),e.qZA())}function Ba(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",29)(1,"div",30)(2,"div",31),e._uU(3),e.qZA(),e.TgZ(4,"button",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.confirmBooking())}),e._uU(5," Book "),e.qZA()(),e.TgZ(6,"mat-menu",33,34),e.YNc(8,Ja,9,3,"div",35),e.YNc(9,Qa,2,0,"div",36),e.qZA()()}if(2&o){const t=e.MAs(7),n=e.oxw();e.xp6(2),e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.hij(" ",null==n.space_list?null:n.space_list.length," space(s) selected "),e.xp6(1),e.Q6J("disabled",!(null!=n.space_list&&n.space_list.length)),e.xp6(4),e.Q6J("ngForOf",n.space_list),e.xp6(1),e.Q6J("ngIf",!(null!=n.space_list&&n.space_list.length))}}function Ya(o,a){1&o&&(e.TgZ(0,"div",42),e._UZ(1,"mat-spinner",43),e.TgZ(2,"p"),e._uU(3,"Retrieving available spaces..."),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("diameter",32))}function ja(o,a){1&o&&(e.TgZ(0,"div",44)(1,"p"),e._uU(2," No available spaces for selected time, capacity or level(s) "),e.qZA()())}const Ha=function(){return["/book","spaces","form"]};let Xa=(()=>{class o{setBuilding(t){var n=this;return(0,f.Z)(function*(){const i=yield n.options.pipe((0,y.q)(1)).toPromise();t&&(n._org.building=t);const s=n._org.levelsForBuilding(n._org.building);!s.find(r=>i.zone_ids?.includes(r.id))&&s.length&&n.setOptions({zone_ids:[s[0].id]})})()}get multiple(){return this._settings.get("app.events.multiple_spaces")??!1}get features_label(){return this._settings.get("app.events.features_label")||"feature"}constructor(t,n,i,s,l){this._org=t,this._state=n,this._settings=i,this._router=s,this._space_pipe=l,this.book_space={},this.quick_capacities=[{name:"Any Capacity",value:0},{name:"Small (1 - 4)",value:1},{name:"Medium (5 - 12)",value:5},{name:"Large (13 - 32)",value:13},{name:"Huge (32+)",value:33}],this.space_list=[],this.buildings=this._org.building_list,this.building=this._org.active_building,this.levels=(0,j.aj)([this.building,this._state.options]).pipe((0,ve.h)(([r])=>!!r),(0,Z.U)(([r])=>[{id:this._org.building.id,name:"All Levels"},...this._org.levelsForBuilding(r)])),this.loading=this._state.loading,this.options=this._state.options,this.spaces=this._state.available_spaces,this.features=this._state.features,this.setOptions=r=>this._state.setOptions(r)}ngOnInit(){var t=this;return(0,f.Z)(function*(){yield t._org.initialised.pipe((0,N.P)(i=>!!i)).toPromise(),t.setBuilding(t._org.building),t.book_space={},(t._state.form?.get("resources")?.value||[]).forEach(i=>t.book_space[i.id]=!0),t.space_list=yield t._getSpaceList()})()}handleBookEvent(t,n=!0){var i=this;return(0,f.Z)(function*(){i.multiple?i.book_space[t.id]=n:(i.book_space={},i.book_space[t.id]=n,i.confirmBooking()),i.space_list=yield i._getSpaceList()})()}confirmBooking(){var t=this;return(0,f.Z)(function*(){const n=yield t._getSpaceList();t._state.form.patchValue({resources:n,system:n[0]}),t._router.navigate(["/book","spaces","confirm"])})()}_getSpaceList(){const t=Object.keys(this.book_space).filter(n=>this.book_space[n]);return t.length?Promise.all(t.map(n=>this._space_pipe.transform(n))):Promise.resolve([])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(O.w7),e.Y36(k.MH),e.Y36(u.gb),e.Y36(F.F0),e.Y36(ne.X))},o.\u0275cmp=e.Xpm({type:o,selectors:[["space-flow-find"]],features:[e._Bn([ne.X])],decls:30,vars:20,consts:[["topbar","",1,""],["button","","btn","","matRipple","",1,"clear","h-[2.75rem]","text-white",3,"routerLink"],[1,"flex","items-center","justify-center","h-full"],[1,"text-xl"],[1,"ml-2","mx-4"],["filters",""],[1,"w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","py-4"],[1,"text-xl","uppercase","font-medium","text-white"],[1,"flex","flex-col","items-center","sm:flex-row","space-x-0","sm:space-x-2"],["overlay","","buildings","","class","w-full sm:w-px sm:flex-1 h-[3.25rem]","appearance","outline",4,"ngIf"],["class","w-full sm:w-px sm:flex-1 h-[3.25rem]","overlay","","appearance","outline",4,"ngIf"],["overlay","","appearance","outline",1,"w-full","sm:w-px","sm:flex-1","h-[3.25rem]","hidden","sm:block"],["placeholder","Any Capacity",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","w-full sm:w-px sm:flex-1 h-[3.25rem] hidden sm:block","overlay","","appearance","outline",4,"ngIf"],[1,"flex-1","w-full","bg-gray-100","dark:bg-neutral-600","overflow-auto"],[4,"ngIf","ngIfElse"],["class","bg-white dark:bg-neutral-700 border-t border-gray-200",4,"ngIf"],["load_state",""],["empty_state",""],["overlay","","buildings","","appearance","outline",1,"w-full","sm:w-px","sm:flex-1","h-[3.25rem]"],["placeholder","Select Building...",3,"ngModel","ngModelChange"],[3,"value"],["overlay","","appearance","outline",1,"w-full","sm:w-px","sm:flex-1","h-[3.25rem]"],["placeholder","Level",3,"ngModel","ngModelChange"],["multiple","",3,"placeholder","ngModel","ngModelChange"],["class","w-[640px] max-w-[calc(100%-2rem)] mx-auto ",3,"space","multiple","book","bookChange",4,"ngFor","ngForOf"],[1,"p-4","text-center","opacity-60"],[1,"w-[640px]","max-w-[calc(100%-2rem)]","mx-auto",3,"space","multiple","book","bookChange"],[1,"bg-white","dark:bg-neutral-700","border-t","border-gray-200"],[1,"flex","items-center","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","p-2"],[1,"flex-1","underline",3,"matMenuTriggerFor"],["btn","","matRipple","",1,"w-32",3,"disabled","click"],["yPosition","above"],["menu","matMenu"],["class","flex items-center pointer-events-none leading-tight","mat-menu-item","",4,"ngFor","ngForOf"],["mat-menu-item","","class"," opacity-60",4,"ngIf"],["mat-menu-item","",1,"flex","items-center","pointer-events-none","leading-tight"],[1,"flex","flex-col","mr-4"],[1,"text-xs","opacity-70"],["icon","","matRipple","",1,"pointer-events-auto",3,"click"],["mat-menu-item","",1,"opacity-60"],[1,"h-full","w-full","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"],[1,"h-full","w-full","flex","flex-col","items-center","justify-center","space-y-2","p-8","text-center"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"a",1)(2,"div",2)(3,"app-icon",3),e._uU(4,"arrow_back"),e.qZA(),e.TgZ(5,"span",4),e._uU(6,"Back"),e.qZA()()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"h2",7),e._uU(10," Available Spaces "),e.qZA(),e.TgZ(11,"div",8),e.YNc(12,Ia,5,6,"mat-form-field",9),e.ALo(13,"async"),e.YNc(14,Da,6,8,"mat-form-field",10),e.ALo(15,"async"),e.TgZ(16,"mat-form-field",11)(17,"mat-select",12),e.NdJ("ngModelChange",function(s){return n.setOptions({capacity:s})}),e.ALo(18,"async"),e.YNc(19,qa,2,2,"mat-option",13),e.qZA()(),e.YNc(20,$a,5,7,"mat-form-field",14),e.ALo(21,"async"),e.qZA()()(),e.TgZ(22,"div",15),e.YNc(23,Wa,3,4,"ng-container",16),e.ALo(24,"async"),e.qZA(),e.YNc(25,Ba,10,5,"div",17),e.YNc(26,Ya,4,1,"ng-template",null,18,e.W1O),e.YNc(28,ja,3,0,"ng-template",null,19,e.W1O)),2&t){const i=e.MAs(27);let s,l,r,c;e.xp6(1),e.Q6J("routerLink",e.DdM(19,Ha)),e.xp6(11),e.Q6J("ngIf",(null==(s=e.lcZ(13,9,n.buildings))?null:s.length)>1),e.xp6(2),e.Q6J("ngIf",(null==(l=e.lcZ(15,11,n.levels))?null:l.length)>0),e.xp6(3),e.Q6J("ngModel",null==(r=e.lcZ(18,13,n.options))?null:r.capacity),e.xp6(2),e.Q6J("ngForOf",n.quick_capacities),e.xp6(1),e.Q6J("ngIf",null==(c=e.lcZ(21,15,n.features))?null:c.length),e.xp6(3),e.Q6J("ngIf",!e.lcZ(24,17,n.loading))("ngIfElse",i),e.xp6(2),e.Q6J("ngIf",n.multiple)}},dependencies:[_.sg,_.O5,v.o,h.ey,R.VK,R.OP,R.p6,w.KE,J.gD,h.wG,M.Ou,d.JJ,d.On,F.rH,Pa,_.Ov],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[topbar][_ngcontent-%COMP%]{background-color:var(--secondary-dark)}[filters][_ngcontent-%COMP%]{background-color:var(--secondary)}\n/*# sourceMappingURL=find.component.ts-angular-inline--108.css.map*/"]}),o})();var za=p(9685),Va=p(2193);function es(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.AsE(" at ",e.xi3(2,2,t.form.value.date,"shortTime")," ~ ",e.xi3(3,5,t.form.value.date+60*t.form.value.duration*1e3,"shortTime")," ")}}function ts(o,a){1&o&&(e.TgZ(0,"button",23),e._uU(1," Map "),e.qZA())}function ns(o,a){if(1&o&&(e.TgZ(0,"div",21)(1,"span"),e._uU(2),e.qZA(),e.YNc(3,ts,2,0,"button",22),e.qZA()),2&o){const t=a.$implicit,n=e.oxw();e.xp6(2),e.AsE("",t.display_name||t.name," [",(null==t.level?null:t.level.display_name)||(null==t.level?null:t.level.name),"]"),e.xp6(1),e.Q6J("ngIf",n.can_view_location)}}function os(o,a){if(1&o&&(e.TgZ(0,"div",24),e._UZ(1,"a-user-avatar",25),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&o){const t=a.$implicit;e.xp6(1),e.Q6J("user",t),e.xp6(2),e.Oqu(t.name||t.email)}}function is(o,a){if(1&o&&(e.TgZ(0,"div",31),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("matTooltip",n.optionsFor(t)),e.xp6(1),e.AsE(" ",t.options.length," option",1===t.options.length?"":"s"," selected ")}}function as(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",27)(2,"div",27),e._uU(3),e.qZA(),e.YNc(4,is,2,3,"div",28),e.qZA(),e.TgZ(5,"div",29),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.TgZ(8,"a-counter",30),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit;return e.KtG(l.quantity=i)}),e.qZA()()}if(2&o){const t=a.$implicit,n=e.oxw(2);e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",t.options.length),e.xp6(2),e.hij(" ",e.xi3(7,4,t.total_cost/100,n.code)," "),e.xp6(2),e.Q6J("ngModel",t.quantity)}}const we=function(){return["/book","spaces","form"]};function ss(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13)(2,"div",8)(3,"app-icon"),e._uU(4,"group"),e.qZA()(),e.TgZ(5,"div",9),e._uU(6),e.qZA(),e.TgZ(7,"button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.show_catering=!i.show_catering)}),e._uU(8),e.qZA(),e.TgZ(9,"a",11),e._uU(10,"Edit"),e.qZA()(),e.TgZ(11,"div",15),e.YNc(12,as,9,7,"div",17),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(6),e.hij(" ",(null==t.form.value.catering[0]?null:t.form.value.catering[0].item_count)||0," Catering Item(s) "),e.xp6(2),e.hij(" ",t.show_people?"Hide":"Show"," "),e.xp6(1),e.Q6J("routerLink",e.DdM(6,we)),e.xp6(2),e.Udp("height",t.show_catering?3*(null==t.form.value.catering[0]?null:t.form.value.catering[0].items.length)+"rem":"0"),e.xp6(1),e.Q6J("ngForOf",null==t.form.value.catering[0]?null:t.form.value.catering[0].items)}}function ls(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1,"Confirm"),e.qZA())}function rs(o,a){1&o&&e._UZ(0,"mat-spinner",32),2&o&&e.Q6J("diameter",24)}const Ot=function(){return["/book","spaces","find"]};let _s=(()=>{class o{optionsFor(t){return t.options.map(n=>n.name).join("\n")}get can_view_location(){return!this._settings.get("app.no_maps")}get form(){return this._state.form}get code(){return this._org.currency_code}constructor(t,n,i){var s=this;this._org=t,this._state=n,this._settings=i,this.show_spaces=!1,this.show_people=!1,this.show_catering=!1,this.loading=!1,this.postForm=(0,f.Z)(function*(){s.loading=!0,yield s._state.postForm().catch(l=>(0,u.cB)(l instanceof Object?l.message||"Bad Request":l)),s.loading=!1})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(O.w7),e.Y36(k.MH),e.Y36(u.gb))},o.\u0275cmp=e.Xpm({type:o,selectors:[["space-flow-confirm"]],decls:60,vars:34,consts:[["topbar","",1,""],["button","","btn","","matRipple","",1,"clear","h-[2.75rem]","text-white",3,"routerLink"],[1,"flex","items-center","justify-center","h-full"],[1,"text-xl"],[1,"ml-2","mx-4"],[1,"flex","flex-col","items-center","space-y-2","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","mb-4"],[1,"text-xl","uppercase","font-medium","w-full","my-4"],[1,"flex","items-center","py-2","space-x-2","border-b","border-gray-200","w-full"],[1,"p-2","rounded-full","bg-gray-300","dark:bg-neutral-600","mr-2"],[1,"flex-1","truncate"],[4,"ngIf"],["btn","","matRipple","",1,"clear","underline",3,"routerLink"],[1,"border-b","border-gray-200","w-full"],[1,"flex","items-center","py-2","space-x-2"],["matRipple","",1,"clear","bg-transparent","border-none","underline",3,"disabled","click"],["list","",1,"overflow-hidden"],["class","flex items-center h-10 pl-12",4,"ngFor","ngForOf"],["class","flex items-center h-12 pl-12 space-x-2",4,"ngFor","ngForOf"],["class","border-b border-gray-200 w-full",4,"ngIf"],["matRipple","","confirm","",1,"w-32",3,"disabled","click"],["class","mx-auto",3,"diameter",4,"ngIf"],[1,"flex","items-center","h-10","pl-12"],["matRipple","","class","bg-transparent border-none underline",4,"ngIf"],["matRipple","",1,"bg-transparent","border-none","underline"],[1,"flex","items-center","h-12","pl-12","space-x-2"],[1,"text-sm",3,"user"],["matRipple","",1,"clear","bg-transparent","border-none","underline",3,"click"],[1,"flex-1","w-1/2"],["class","text-xs underline",3,"matTooltip",4,"ngIf"],[1,"bg-primary","text-xs","rounded","px-4","py-2","mx-2","text-white","font-medium"],[3,"ngModel","ngModelChange"],[1,"text-xs","underline",3,"matTooltip"],[1,"mx-auto",3,"diameter"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"a",1)(2,"div",2)(3,"app-icon",3),e._uU(4,"arrow_back"),e.qZA(),e.TgZ(5,"span",4),e._uU(6,"Back"),e.qZA()()()(),e.TgZ(7,"div",5)(8,"h2",6),e._uU(9," Your meeting details "),e.qZA(),e.TgZ(10,"div",7)(11,"div",8)(12,"app-icon"),e._uU(13,"event"),e.qZA()(),e.TgZ(14,"div",9),e._uU(15),e.ALo(16,"date"),e.YNc(17,es,4,8,"span",10),e.qZA(),e.TgZ(18,"a",11),e._uU(19,"Edit"),e.qZA()(),e.TgZ(20,"div",7)(21,"div",8)(22,"app-icon"),e._uU(23,"schedule"),e.qZA()(),e.TgZ(24,"div",9),e._uU(25),e.ALo(26,"duration"),e.qZA(),e.TgZ(27,"a",11),e._uU(28," Edit "),e.qZA()(),e.TgZ(29,"div",12)(30,"div",13)(31,"div",8)(32,"app-icon"),e._uU(33,"place"),e.qZA()(),e.TgZ(34,"div",9),e._uU(35),e.qZA(),e.TgZ(36,"button",14),e.NdJ("click",function(){return n.show_spaces=!n.show_spaces}),e._uU(37),e.qZA(),e.TgZ(38,"a",11),e._uU(39,"Edit"),e.qZA()(),e.TgZ(40,"div",15),e.YNc(41,ns,4,3,"div",16),e.qZA()(),e.TgZ(42,"div",12)(43,"div",13)(44,"div",8)(45,"app-icon"),e._uU(46,"group"),e.qZA()(),e.TgZ(47,"div",9),e._uU(48),e.qZA(),e.TgZ(49,"button",14),e.NdJ("click",function(){return n.show_people=!n.show_people}),e._uU(50),e.qZA(),e.TgZ(51,"a",11),e._uU(52,"Edit"),e.qZA()(),e.TgZ(53,"div",15),e.YNc(54,os,4,2,"div",17),e.qZA()(),e.YNc(55,ss,13,7,"div",18),e.TgZ(56,"button",19),e.NdJ("click",function(){return n.postForm()}),e.YNc(57,ls,2,0,"span",10),e.YNc(58,rs,1,1,"mat-spinner",20),e.qZA()(),e._uU(59," < ")),2&t){let i,s,l,r,c,m,g,C;e.xp6(1),e.Q6J("routerLink",e.DdM(29,Ot)),e.xp6(14),e.hij(" ",e.xi3(16,24,n.form.value.date,"longDate")," "),e.xp6(2),e.Q6J("ngIf",!n.form.value.all_day),e.xp6(1),e.Q6J("routerLink",e.DdM(30,we)),e.xp6(7),e.hij(" ",n.form.value.all_day?"All Day":e.lcZ(26,27,n.form.value.duration)," "),e.xp6(2),e.Q6J("routerLink",e.DdM(31,we)),e.xp6(8),e.hij(" ",null==(i=n.form.get("resources"))||null==i.value?null:i.value.length," Space(s) "),e.xp6(1),e.Q6J("disabled",!(null!=(s=n.form.get("resources"))&&null!=s.value&&s.value.length)),e.xp6(1),e.hij(" ",n.show_spaces?"Hide":"Show"," "),e.xp6(1),e.Q6J("routerLink",e.DdM(32,Ot)),e.xp6(2),e.Udp("height",n.show_spaces?2.5*(null==(l=n.form.get("resources"))||null==l.value?null:l.value.length)+"rem":"0"),e.xp6(1),e.Q6J("ngForOf",null==(r=n.form.get("resources"))?null:r.value),e.xp6(7),e.hij(" ",(null==(c=n.form.get("attendees"))||null==c.value?null:c.value.length)||0," Attendee(s) "),e.xp6(1),e.Q6J("disabled",!(null!=(m=n.form.get("attendees"))&&null!=m.value&&m.value.length)),e.xp6(1),e.hij(" ",n.show_people?"Hide":"Show"," "),e.xp6(1),e.Q6J("routerLink",e.DdM(33,we)),e.xp6(2),e.Udp("height",n.show_people?3*(null==(g=n.form.get("attendees"))||null==g.value?null:g.value.length)+"rem":"0"),e.xp6(1),e.Q6J("ngForOf",null==(C=n.form.get("attendees"))?null:C.value),e.xp6(1),e.Q6J("ngIf",null==n.form.value.catering?null:n.form.value.catering.length),e.xp6(1),e.Q6J("disabled",n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading),e.xp6(1),e.Q6J("ngIf",n.loading)}},dependencies:[_.sg,_.O5,v.o,za.k,h.wG,M.Ou,Y.gM,Ce.R,d.JJ,d.On,F.rH,_.H9,_.uU,Va.u],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[topbar][_ngcontent-%COMP%]{background-color:#00539f}[list][_ngcontent-%COMP%]{transition:height .2s}\n/*# sourceMappingURL=confirm.component.ts-angular-inline--106.css.map*/"]}),o})();function cs(o,a){1&o&&(e.ynx(0),e._UZ(1,"space-flow-find"),e.BQk())}function ds(o,a){1&o&&(e.ynx(0),e._UZ(1,"space-flow-confirm"),e.BQk())}function us(o,a){if(1&o&&(e.ynx(0),e._UZ(1,"flow-success",4),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("calendar",null==t.last_success?null:t.last_success.host)}}function ps(o,a){1&o&&(e.ynx(0),e._UZ(1,"space-flow-form"),e.BQk())}let ms=(()=>{class o extends u.cx{get view(){return this._state.view}get last_success(){return this._state.last_success}constructor(t,n){super(),this._state=t,this._route=n}ngOnInit(){this._state.loadForm(),this.subscription("route.params",this._route.paramMap.subscribe(t=>{t.has("step")&&this._state.setView(t.get("step"))})),this.subscription("route.query",this._route.queryParamMap.subscribe(t=>{t.has("success")&&this._state.setView(t.get("success"))}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(k.MH),e.Y36(F.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["placeos-book-space-flow"]],features:[e.qOj],decls:6,vars:4,consts:[[1,"bg-white","dark:bg-neutral-700","h-full","w-full"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"calendar"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.ynx(1,1),e.YNc(2,cs,2,0,"ng-container",2),e.YNc(3,ds,2,0,"ng-container",2),e.YNc(4,us,2,1,"ng-container",2),e.YNc(5,ps,2,0,"ng-container",3),e.BQk(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngSwitch",n.view),e.xp6(1),e.Q6J("ngSwitchCase","find"),e.xp6(1),e.Q6J("ngSwitchCase","confirm"),e.xp6(1),e.Q6J("ngSwitchCase","success"))},dependencies:[_.RF,_.n9,_.ED,ka,Xa,_s,Ee],styles:["[_nghost-%COMP%]{position:relative;height:100%;width:100%}\n/*# sourceMappingURL=space-flow.component.ts-angular-inline--105.css.map*/"]}),o})();var gs=p(3696),fs=p(8461);const hs=function(){return{}};function Cs(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.setDate(s.id))}),e.ALo(1,"async"),e.TgZ(2,"p",15),e._uU(3),e.qZA(),e.TgZ(4,"p",16),e._uU(5),e.ALo(6,"async"),e.qZA(),e.TgZ(7,"p",17),e._uU(8,"Available"),e.qZA()()}if(2&o){const t=a.$implicit,n=e.oxw(2);let i;e.ekj("selected",t.id===(null==(i=e.lcZ(1,4,n.options))?null:i.date)),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.hij(" ",(e.lcZ(6,6,n.counts)||e.DdM(8,hs))[t.id]||"0"," ")}}function xs(o,a){if(1&o&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.display_name||t.name," ")}}function vs(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",18)(1,"mat-form-field",19)(2,"mat-select",20),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.setLevel(null==i?null:i.id))}),e.ALo(3,"async"),e.YNc(4,xs,2,2,"mat-option",21),e.ALo(5,"async"),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",e.lcZ(3,2,t.level)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(5,4,t.levels))}}function Fs(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.setActive(s))}),e.ALo(1,"async"),e.TgZ(2,"div",24),e._uU(3),e.qZA(),e.TgZ(4,"div",25),e._uU(5),e.qZA()()}if(2&o){const t=a.$implicit,n=e.oxw(2);let i;e.ekj("active",(null==(i=e.lcZ(1,4,n.active_space))?null:i.id)===t.id),e.xp6(3),e.hij("Bay No. ",t.name,""),e.xp6(2),e.hij(" ",n.levelName(t.zone_id)," ")}}function Ts(o,a){1&o&&(e.TgZ(0,"p",29),e._uU(1," Note that your existing parking space reservation will be replaced "),e.qZA())}function bs(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",26)(1,"p"),e._uU(2),e.ALo(3,"async"),e.qZA(),e.YNc(4,Ts,2,0,"p",27),e.ALo(5,"async"),e.TgZ(6,"button",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.reserveSpace())}),e._uU(7," Reserve Space "),e.qZA()()}if(2&o){const t=e.oxw(2);let n;e.xp6(2),e.hij(" Parking Bay No. ",e.lcZ(3,2,t.active_space).name," selected. "),e.xp6(2),e.Q6J("ngIf",null==(n=e.lcZ(5,4,t.existing))?null:n.length)}}function Os(o,a){if(1&o&&(e.TgZ(0,"div",30)(1,"p"),e._uU(2),e.ALo(3,"async"),e.ALo(4,"async"),e.qZA()()),2&o){const t=e.oxw(2);let n;e.xp6(2),e.hij(" Parking is not available for ",(null==(n=e.lcZ(3,1,t.building))?null:n.display_name)||(null==(n=e.lcZ(4,3,t.building))?null:n.name)," ")}}function As(o,a){if(1&o&&(e.TgZ(0,"div",2)(1,"div",3),e.YNc(2,Cs,9,9,"button",4),e.qZA(),e.TgZ(3,"div",5)(4,"div",6),e.YNc(5,vs,6,6,"div",7),e.ALo(6,"async"),e.TgZ(7,"p"),e._uU(8),e.ALo(9,"async"),e.qZA(),e.YNc(10,Fs,6,6,"button",8),e.ALo(11,"async"),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"i-map",10),e.ALo(14,"async"),e.ALo(15,"async"),e.ALo(16,"async"),e.ALo(17,"async"),e.ALo(18,"async"),e.ALo(19,"async"),e.ALo(20,"async"),e._UZ(21,"explore-zoom-controls",11),e.qZA(),e.YNc(22,bs,8,6,"div",12),e.ALo(23,"async"),e.YNc(24,Os,5,5,"div",13),e.ALo(25,"async"),e.qZA()()),2&o){const t=e.oxw();let n,i,s,l,r;e.xp6(2),e.Q6J("ngForOf",t.dates),e.xp6(3),e.Q6J("ngIf",(null==(n=e.lcZ(6,13,t.levels))?null:n.length)>1),e.xp6(3),e.hij("",null==(i=e.lcZ(9,15,t.available))?null:i.length," space(s) available"),e.xp6(2),e.Q6J("ngForOf",e.lcZ(11,17,t.available)),e.xp6(3),e.Q6J("src",e.lcZ(14,19,t.url))("zoom",null==(s=e.lcZ(15,21,t.positions))?null:s.zoom)("center",null==(l=e.lcZ(16,23,t.positions))?null:l.center)("styles",e.lcZ(17,25,t.styles))("features",e.lcZ(18,27,t.features))("actions",e.lcZ(19,29,t.actions))("labels",e.lcZ(20,31,t.labels)),e.xp6(9),e.Q6J("ngIf",e.lcZ(23,33,t.active_space)),e.xp6(2),e.Q6J("ngIf",!(null!=(r=e.lcZ(25,35,t.levels))&&r.length))}}function ws(o,a){1&o&&(e.TgZ(0,"div",32),e._UZ(1,"mat-spinner",33),e.TgZ(2,"p"),e._uU(3,"Reserving parking space..."),e.qZA()())}function Ms(o,a){if(1&o&&(e.YNc(0,ws,4,0,"div",31),e.ALo(1,"async")),2&o){const t=e.oxw();let n;e.Q6J("ngIf",!(null!=(n=e.lcZ(1,1,t.levels))&&n.length))}}let Zs=(()=>{class o extends u.cx{constructor(t){super(),this._details=t,this.zoom=1,this.ratio=1,this.subscription("zoom",this._details.zoom$?.subscribe(n=>this.zoom=n)),this.subscription("ratio",this._details.ratio$?.subscribe(n=>this.ratio=n))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(bt.ui))},o.\u0275cmp=e.Xpm({type:o,selectors:[["space-ping"]],features:[e.qOj],decls:2,vars:2,consts:[[1,"absolute","inset-0","pointer-events-auto"],[1,"absolute","inset-0","animate-ping","border-4","border-green-600"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.qZA()),2&t&&e.Udp("transform","scale("+n.zoom*n.ratio+")")},encapsulation:2}),o})(),Ns=(()=>{class o extends u.cx{levelName(t){const n=this._org.levelWithID([t]);return n?.display_name||n?.name||""}setActive(t){t===this.active_space.getValue()?this.active_space.next(null):(this._booking.form.patchValue({asset_id:t.id,asset_name:t.name}),this.active_space.next(t))}constructor(t,n,i,s,l){var r;super(),r=this,this._state=t,this._parking=n,this._org=i,this._booking=s,this._router=l,this.url=this._state.map_url,this.styles=this._state.map_styles,this.positions=this._state.map_positions,this.features=this._state.map_features,this.actions=this._state.map_actions,this.labels=this._state.map_labels,this.building=this._org.active_building,this.level=this._state.level,this.levels=this._parking.levels,this.available=this._parking.available_spaces,this.counts=this._parking.week_availablility,this.options=this._parking.options,this.existing=this._parking.existing_event,this.loading=this._booking.loading,this.active_space=new P.X(null),this.dates=new Array(7).fill(0).map((c,m)=>({id:(0,ot.Z)((0,G.Z)(Date.now(),m)).valueOf(),name:(0,Ct.Z)((0,G.Z)(Date.now(),m),"EEE, dd MMM"),available:0})),this.setDate=c=>this._parking.setOptions({date:c}),this.setLevel=c=>this._state.setLevel(c),this.reserveSpace=(0,f.Z)(function*(){const c=yield r._parking.existing_event.pipe((0,y.q)(1)).toPromise();c.length&&r._booking.form.patchValue({id:c[0].id}),yield r._booking.postForm(),r._router.navigate(["book","parking","success"])})}ngOnInit(){var t=this;return(0,f.Z)(function*(){yield t._org.initialised.pipe((0,N.P)(n=>n)).toPromise(),t._state.reset(),t.subscription("levels",t._parking.levels.subscribe(n=>{t._state.setLevel(n[0]?.id)})),t.subscription("spaces",t._parking.available_spaces.subscribe(n=>{t._state.setActions("parking_spaces",(n||[]).map(i=>({id:i.map_id,action:"click",callback:()=>t.setActive(i)})))})),t.subscription("active_space",t.active_space.subscribe(n=>{if(!n)return t._state.setFeatures("parking_space",[]);t._state.setFeatures("parking_space",[{location:n.map_id,content:Zs,full_size:!0,z_index:0}])}))})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(se.ck),e.Y36(se.pi),e.Y36(O.w7),e.Y36(b.fy),e.Y36(F.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["parking-flow-map"]],features:[e._Bn([se.pi]),e.qOj],decls:4,vars:4,consts:[["class","w-full h-full flex flex-col items-center relative",4,"ngIf","ngIfElse"],["load_state",""],[1,"w-full","h-full","flex","flex-col","items-center","relative"],[1,"p-4","flex","items-center","justify-center","bg-secondary","w-full","shadow","z-10","text-white","space-x-2"],["matRipple","","class","border border-white flex flex-col items-center justify-center h-24 w-28 rounded",3,"selected","click",4,"ngFor","ngForOf"],[1,"flex","w-full","h-1/2","flex-1","z-0"],[1,"p-2","sm:w-[18rem]","w-full","h-full","bg-gray-50","dark:bg-neutral-600","shadow","border-r","border-gray-200","dark:border-neutral-500","z-10","overflow-auto","space-y-2"],["class","bg-white dark:bg-neutral-700 sticky top-0 w-full z-10",4,"ngIf"],["matRipple","","class","flex items-center justify-between bg-white dark:bg-neutral-700 rounded-lg border border-gray-200 p-2 w-full",3,"active","click",4,"ngFor","ngForOf"],[1,"bg-gray-200","dark:bg-neutral-600","flex-1","w-1/2","h-full","z-0","relative","hidden","sm:block"],[3,"src","zoom","center","styles","features","actions","labels"],[1,"absolute","bottom-0","right-0"],["class","absolute left-1/2 bottom-2 -translate-x-1/2 bg-white dark:bg-neutral-800 shadow rounded p-4 flex flex-col space-y-2",4,"ngIf"],["class","absolute inset-0 bg-white/80 flex flex-col items-center justify-center z-50",4,"ngIf"],["matRipple","",1,"border","border-white","flex","flex-col","items-center","justify-center","h-24","w-28","rounded",3,"click"],[1,"mb-2","font-medium"],[1,"text-2xl"],[1,"text-sm"],[1,"bg-white","dark:bg-neutral-700","sticky","top-0","w-full","z-10"],["appearance","outline",1,"w-full","h-[3.25rem]"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matRipple","",1,"flex","items-center","justify-between","bg-white","dark:bg-neutral-700","rounded-lg","border","border-gray-200","p-2","w-full",3,"click"],[1,"text-lg"],[1,"opacity-60"],[1,"absolute","left-1/2","bottom-2","-translate-x-1/2","bg-white","dark:bg-neutral-800","shadow","rounded","p-4","flex","flex-col","space-y-2"],["class","p-2 rounded text-sm max-w-[20rem] text-center text-pending leading-tight",4,"ngIf"],["btn","","matRipple","",3,"click"],[1,"p-2","rounded","text-sm","max-w-[20rem]","text-center","text-pending","leading-tight"],[1,"absolute","inset-0","bg-white/80","flex","flex-col","items-center","justify-center","z-50"],["class","absolute inset-0 bg-white/80 flex flex-col items-center justify-center z-50 space-y-2",4,"ngIf"],[1,"absolute","inset-0","bg-white/80","flex","flex-col","items-center","justify-center","z-50","space-y-2"],["diameter","32"]],template:function(t,n){if(1&t&&(e.YNc(0,As,26,37,"div",0),e.ALo(1,"async"),e.YNc(2,Ms,2,3,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(3);e.Q6J("ngIf",!e.lcZ(1,2,n.loading))("ngIfElse",i)}},dependencies:[_.sg,_.O5,xt.p,h.ey,w.KE,J.gD,h.wG,M.Ou,d.JJ,d.On,fs.s,_.Ov],styles:[".active[_ngcontent-%COMP%]{background-color:var(--primary)!important;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#fff!important;color:#000d}\n/*# sourceMappingURL=parking-flow-map.component.ts-angular-inline--111.css.map*/"]}),o})(),At=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["parking-flow-confirm"]],decls:0,vars:0,template:function(t,n){}}),o})();function Es(o,a){1&o&&(e.ynx(0),e._UZ(1,"parking-flow-confirm"),e.BQk())}function Ss(o,a){if(1&o&&(e.ynx(0),e._UZ(1,"flow-success",4),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("calendar",null==t.last_success?null:t.last_success.host)}}function ys(o,a){1&o&&(e.ynx(0),e._UZ(1,"parking-flow-map"),e.BQk())}let ks=(()=>{class o extends u.cx{get view(){return this._state.view}get last_success(){return this._state.last_success}constructor(t,n){super(),this._state=t,this._route=n}ngOnInit(){this._state.setOptions({type:"parking"}),this._state.loadForm(),this._state.form||this._state.newForm(),this.subscription("route.params",this._route.paramMap.subscribe(t=>{t.has("step")&&this._state.setView(t.get("step"))})),this.subscription("route.query",this._route.queryParamMap.subscribe(t=>{t.has("success")&&this._state.setView(t.get("success"))}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.fy),e.Y36(F.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["placeos-book-parking-flow"]],features:[e.qOj],decls:5,vars:3,consts:[[1,"bg-white","dark:bg-neutral-700","h-full","w-full"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["route","parking","type","parking",3,"calendar"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.ynx(1,1),e.YNc(2,Es,2,0,"ng-container",2),e.YNc(3,Ss,2,1,"ng-container",2),e.YNc(4,ys,2,0,"ng-container",3),e.BQk(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngSwitch",n.view),e.xp6(1),e.Q6J("ngSwitchCase","confirm"),e.xp6(1),e.Q6J("ngSwitchCase","success"))},dependencies:[_.RF,_.n9,_.ED,Ns,At,Ee],styles:["[_nghost-%COMP%]{position:relative;height:100%;width:100%}\n/*# sourceMappingURL=parking-flow.component.ts-angular-inline--110.css.map*/"]}),o})();var Ps=p(3149),wt=p(5398),ye=p(7202);function Ls(o,a){1&o&&(e.TgZ(0,"button",19)(1,"app-icon"),e._uU(2,"close"),e.qZA()())}function Is(o,a){if(1&o&&(e.TgZ(0,"div",10)(1,"app-icon"),e._uU(2,"update"),e.qZA(),e.TgZ(3,"div",11),e._uU(4),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.Oqu(t.formatted_recurrence)}}function Rs(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"div",10)(2,"app-icon"),e._uU(3,"layers"),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.qZA()(),e.BQk()),2&o){const t=a.$implicit,n=e.oxw(2);e.xp6(5),e.AsE(" ",(null==n.level?null:n.level.display_name)||(null==n.level?null:n.level.name),", ",t.display_name||t.name," ")}}function Ds(o,a){if(1&o&&(e.TgZ(0,"div",7)(1,"div",8)(2,"app-icon"),e._uU(3,"done"),e.qZA()(),e.TgZ(4,"h3",9),e.SDv(5,20),e.qZA(),e.YNc(6,Rs,6,2,"ng-container",21),e.TgZ(7,"div",10)(8,"app-icon"),e._uU(9,"place"),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.qZA()()()),2&o){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.event.resources),e.xp6(5),e.Oqu(t.location)}}function qs(o,a){if(1&o&&(e.TgZ(0,"mat-chip")(1,"div",27)(2,"app-icon",28),e._uU(3,"business"),e.qZA(),e._uU(4),e.qZA()()),2&o){const t=a.$implicit;e.xp6(4),e.hij(" ",t.name||t.email," ")}}function Us(o,a){if(1&o&&(e.TgZ(0,"div",22)(1,"div",8)(2,"app-icon"),e._uU(3,"done"),e.qZA()(),e.TgZ(4,"h3",9),e.SDv(5,23),e.qZA(),e.TgZ(6,"div",24)(7,"mat-chip-list",25,26),e.YNc(9,qs,5,1,"mat-chip",21),e.qZA()()()),2&o){const t=e.oxw();e.xp6(5),e.pQV(t.event.attendees.length)(t.event.attendees.length),e.QtT(5),e.xp6(4),e.Q6J("ngForOf",t.event.attendees)}}function $s(o,a){if(1&o&&(e.TgZ(0,"div",40)(1,"div",33),e._uU(2),e.qZA()()),2&o){const t=a.$implicit;e.Q6J("matTooltip",t.name),e.xp6(2),e.hij(" ",t.name," ")}}function Ks(o,a){if(1&o&&(e.TgZ(0,"div",41),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",e.xi3(2,1,t.unit_price_with_options/100,n.code)," ea ")}}function Gs(o,a){if(1&o&&(e.TgZ(0,"div",10)(1,"div",35),e._uU(2),e.qZA(),e.TgZ(3,"div",36),e._uU(4),e.qZA(),e.TgZ(5,"div",10),e.YNc(6,$s,3,2,"div",37),e.qZA(),e.YNc(7,Ks,3,4,"div",38),e.TgZ(8,"div",39),e._uU(9),e.ALo(10,"currency"),e.qZA()()),2&o){const t=a.$implicit,n=e.oxw(3);e.xp6(2),e.hij(" \xd7",t.quantity," "),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Q6J("ngForOf",t.option_list),e.xp6(1),e.Q6J("ngIf",t.quantity>1),e.xp6(2),e.hij(" ",e.xi3(10,5,t.total_cost/100,n.code)," ")}}function Ws(o,a){if(1&o&&(e.TgZ(0,"div",7)(1,"div",8)(2,"app-icon"),e._uU(3,"done"),e.qZA()(),e.TgZ(4,"h3",9),e.SDv(5,29),e.qZA(),e.TgZ(6,"div",30),e.YNc(7,Gs,11,8,"div",31),e.TgZ(8,"div",32)(9,"div",33),e._uU(10,"Total:"),e.qZA(),e.TgZ(11,"div",34),e._uU(12),e.ALo(13,"currency"),e.qZA()()()()),2&o){const t=e.oxw(2);e.xp6(7),e.Q6J("ngForOf",t.catering_order),e.xp6(5),e.hij(" ",e.xi3(13,2,t.catering_order.total_cost/100,t.code)," ")}}function Js(o,a){if(1&o&&(e.TgZ(0,"div",27)(1,"div",44),e._uU(2),e.qZA(),e.TgZ(3,"div",36),e._uU(4),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",t.amount," "),e.xp6(2),e.Oqu(t.name)}}function Qs(o,a){if(1&o&&(e.TgZ(0,"div",7)(1,"div",8)(2,"app-icon"),e._uU(3,"done"),e.qZA()(),e.TgZ(4,"h3",9),e.SDv(5,42),e.qZA(),e.YNc(6,Js,5,2,"div",43),e.qZA()),2&o){const t=e.oxw(2);e.xp6(6),e.Q6J("ngForOf",t.event.assets)}}function Bs(o,a){if(1&o&&(e.TgZ(0,"div",6),e.YNc(1,Ws,14,5,"div",14),e.YNc(2,Qs,7,1,"div",14),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.event.catering?null:t.event.catering.length),e.xp6(1),e.Q6J("ngIf",null==t.event.assets?null:t.event.assets.length)}}function Ys(o,a){if(1&o&&(e.TgZ(0,"div",22)(1,"div",8)(2,"app-icon"),e._uU(3,"done"),e.qZA()(),e.TgZ(4,"h3",9),e.SDv(5,45),e.qZA(),e._UZ(6,"div",46),e.ALo(7,"sanitize"),e.qZA()),2&o){const t=e.oxw();e.xp6(6),e.Q6J("innerHTML",e.lcZ(7,1,t.event.body),e.oJD)}}function js(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.postForm())}),e.SDv(1,48),e.qZA()}}let Hs=(()=>{class o extends u.cx{ngOnInit(){var t=this;return(0,f.Z)(function*(){t._space=(yield t._space_pipe.transform(t.event.resources[0]?.email))||t._space})()}get event(){return this._event_form.form.getRawValue()}get space(){return this.event.resources[0]}get level(){return this._org.levelWithID(this.space.zones)}get location(){const t=this._org.buildings.find(n=>this.space.zones.includes(n.id));return t?.address||t?.display_name||t?.name}get code(){return this._org.currency_code}get formatted_recurrence(){return(0,k.IO)({...this.event.recurrence,start:this.event.date||this.event.recurrence.start})}constructor(t,n,i,s,l){var r;super(),r=this,this._event_form=t,this._org=n,this._space_pipe=i,this._dialog_ref=s,this._dialog=l,this.show_close=!1,this.loading=this._event_form.loading,this.catering_order=this.event.catering[0]?.items||this.event.catering||[],this.postForm=(0,f.Z)(function*(){if(!r.space){const m=yield(0,u._5)({title:"Make Booking without a Room",content:"You are creating a booking without a room, are you sure?",icon:{content:"event_available"}},r._dialog);if("done"!==m.reason)return;m.close()}(yield r._event_form.postForm().catch(m=>((0,u.cB)(m),!1)))&&r.dismiss(!0)}),this.cancelPost=()=>this._event_form.cancelPostForm(),this.dismiss=c=>this._dialog_ref?.close(c),this._space=this.event.resources[0]}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(k.MH),e.Y36(O.w7),e.Y36(ne.X),e.Y36(A.so,8),e.Y36(A.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["meeting-flow-confirm-modal"]],inputs:{show_close:"show_close"},features:[e._Bn([ne.X]),e.qOj],decls:35,vars:25,consts:function(){let a,t,n,i,s,l,r,c;return a=$localize`:␟0cd25444b7557b2f0c8453f99ac6ac586e2734ef␟5359169455682005018:Confirm Meeting booking`,t=$localize`:␟7ace4094f7f2f91e71cf8e2a5602a04062a20a47␟2833154702556922571:Booked Room`,n=$localize`:␟c5594e72436351a54e7ea9bf29633f268a7fb4cc␟2881938321285403712:{VAR_PLURAL, plural, =1 {Attendee } other {Attendees }}`,n=e.Zx4(n,{VAR_PLURAL:"\ufffd1\ufffd"}),i=$localize`:␟fefdc4e5a41940aedc80a7f0018e6d80486047f5␟1751846422096489161: ${"\ufffd0\ufffd"}:INTERPOLATION: ${n}:ICU: `,s=$localize`:␟c83ae01dc090addaaeb41ad9255bc2321f333169␟5431495212207850952:Catering`,l=$localize`:␟ee8f8008bae6ce3a49840c4e1d39b4af23d4c263␟1647750822609779679:Assets`,r=$localize`:␟fcde58253a4cfd52c228eebdae74e1be7a1ab714␟8104421162933956065:Notes`,c=$localize`:␟0ad83be7464a0a2e8d100342e144bc3fbc789f9d␟3141803775366633134: Confirm `,[["header","",1,"p-4","flex","items-center","justify-center","border-b","border-grey-200","relative"],["icon","","name","close-meeting-confirm","matRipple","","mat-dialog-close","","class","absolute left-2 top-1/2 -translate-y-1/2",4,"ngIf"],[1,"text-xl","font-medium"],a,["diameter","32",1,"absolute","right-2","top-1/2","-translate-y-1/2"],[1,"min-w-[48rem]","divide-y","divide-gray-300","p-4","space-y-4"],[1,"flex","divide-x","divide-gray-300"],[1,"pr-4","py-4","pl-16","relative","space-y-2","flex-1"],[1,"absolute","top-4","left-4","flex","items-center","justify-center","rounded-full","border","border-success","text-success","text-2xl"],[1,"text-xl","!mt-0"],[1,"flex","items-center","space-x-2"],["date",""],["class","flex items-center space-x-2",4,"ngIf"],["time",""],["class","pr-4 py-4 pl-16 relative space-y-2 flex-1",4,"ngIf"],["class","pr-4 py-4 pl-16 relative space-y-2",4,"ngIf"],["class","flex divide-x divide-gray-300",4,"ngIf"],[1,"p-2","border-t","border-gray-200","flex","items-center","justify-end"],["btn","","name","confirm-meeting","matRipple","","class","w-32",3,"click",4,"ngIf"],["icon","","name","close-meeting-confirm","matRipple","","mat-dialog-close","",1,"absolute","left-2","top-1/2","-translate-y-1/2"],t,[4,"ngFor","ngForOf"],[1,"pr-4","py-4","pl-16","relative","space-y-2"],i,["attendee-list",""],["aria-label","User selection"],["chipList",""],[1,"flex","items-center"],[1,"mr-2"],s,[1,"space-y-2"],["class","flex items-center space-x-2",4,"ngFor","ngForOf"],[1,"w-full","bg-gray-200","flex","justify-end","p-2"],[1,"font-medium"],[1,"font-mono","text-right","min-w-[6rem]"],["count","",1,"flex","items-center","justify-center","min-w-[2rem]","h-8","rounded-full","bg-gray-200"],["name","",1,"flex-1"],["class","flex items-center text-xs px-2 py-1 rounded-2xl bg-gray-100",3,"matTooltip",4,"ngFor","ngForOf"],["price","","class","font-mono text-right p-2 text-sm",4,"ngIf"],["total-price","",1,"font-mono","min-w-[6rem]","text-right","p-2"],[1,"flex","items-center","text-xs","px-2","py-1","rounded-2xl","bg-gray-100",3,"matTooltip"],["price","",1,"font-mono","text-right","p-2","text-sm"],l,["class","flex items-center",4,"ngFor","ngForOf"],["count","",1,"flex","items-center","justify-center","w-12","h-12","rounded-full"],r,[3,"innerHTML"],["btn","","name","confirm-meeting","matRipple","",1,"w-32",3,"click"],c]},template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ls,3,0,"button",1),e.TgZ(2,"h2",2),e.SDv(3,3),e.qZA(),e._UZ(4,"mat-spinner",4),e.ALo(5,"async"),e.qZA(),e.TgZ(6,"main",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"app-icon"),e._uU(11,"done"),e.qZA()(),e.TgZ(12,"h3",9),e._uU(13),e.qZA(),e.TgZ(14,"div",10)(15,"app-icon"),e._uU(16,"today"),e.qZA(),e.TgZ(17,"div",11),e._uU(18),e.ALo(19,"date"),e.qZA()(),e.YNc(20,Is,5,1,"div",12),e.TgZ(21,"div",10)(22,"app-icon"),e._uU(23,"schedule"),e.qZA(),e.TgZ(24,"div",13),e._uU(25),e.ALo(26,"date"),e.ALo(27,"date"),e.qZA()()(),e.YNc(28,Ds,12,2,"div",14),e.qZA(),e.YNc(29,Us,10,3,"div",15),e.YNc(30,Bs,3,2,"div",16),e.YNc(31,Ys,8,3,"div",15),e.qZA(),e.TgZ(32,"footer",17),e.YNc(33,js,2,0,"button",18),e.ALo(34,"async"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.show_close),e.xp6(3),e.ekj("opacity-0",!e.lcZ(5,12,n.loading)),e.xp6(9),e.hij(" ",n.event.title||"Meeting Details"," "),e.xp6(5),e.Oqu(e.xi3(19,14,n.event.date,"fullDate")),e.xp6(2),e.Q6J("ngIf",null==n.event.recurrence?null:n.event.recurrence.pattern),e.xp6(5),e.hij(" ",n.event.all_day?"All Day":e.xi3(26,17,n.event.date,"shortTime")+" - "+e.xi3(27,20,n.event.date+60*n.event.duration*1e3,"h:mm a (z)")," "),e.xp6(3),e.Q6J("ngIf",n.event.resources.length),e.xp6(1),e.Q6J("ngIf",n.event.attendees.length),e.xp6(1),e.Q6J("ngIf",(null==n.event.catering?null:n.event.catering.length)||(null==n.event.assets?null:n.event.assets.length)),e.xp6(1),e.Q6J("ngIf",n.event.body),e.xp6(2),e.Q6J("ngIf",!e.lcZ(34,23,n.loading)))},dependencies:[_.sg,_.O5,v.o,h.wG,A.ZT,M.Ou,X.HS,Y.gM,_.Ov,_.H9,_.uU,ye.n]}),o})();function Xs(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.dismiss())}),e.TgZ(1,"app-icon"),e._uU(2,"close"),e.qZA()()}}function zs(o,a){1&o&&e._UZ(0,"mat-spinner",16)}function Vs(o,a){if(1&o&&(e.TgZ(0,"div",7)(1,"app-icon"),e._uU(2,"update"),e.qZA(),e.TgZ(3,"div",8),e._uU(4),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.Oqu(t.formatted_recurrence)}}function el(o,a){if(1&o&&(e.TgZ(0,"mat-chip")(1,"div",23)(2,"app-icon",24),e._uU(3,"business"),e.qZA(),e._uU(4),e.qZA()()),2&o){const t=a.$implicit;e.xp6(4),e.hij(" ",t.name||t.email," ")}}function tl(o,a){if(1&o&&(e.TgZ(0,"section",17)(1,"app-icon",5),e._uU(2,"done"),e.qZA(),e.TgZ(3,"div",6)(4,"h3"),e.SDv(5,18),e.qZA(),e.TgZ(6,"div",19)(7,"mat-chip-list",20,21),e.YNc(9,el,5,1,"mat-chip",22),e.qZA()()()()),2&o){const t=e.oxw();e.xp6(5),e.pQV(t.event.attendees.length)(t.event.attendees.length),e.QtT(5),e.xp6(4),e.Q6J("ngForOf",t.event.attendees)}}function nl(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"div",7)(2,"app-icon"),e._uU(3,"meeting_room"),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.qZA()(),e.BQk()),2&o){const t=a.$implicit,n=e.oxw(2);e.xp6(5),e.AsE(" ",(null==n.level?null:n.level.display_name)||(null==n.level?null:n.level.name),", ",t.display_name||t.name," ")}}function ol(o,a){if(1&o&&(e.TgZ(0,"section",25)(1,"app-icon",5),e._uU(2,"done"),e.qZA(),e.TgZ(3,"div",6)(4,"h3"),e.SDv(5,26),e.qZA(),e.YNc(6,nl,6,2,"ng-container",22),e.TgZ(7,"div",7)(8,"app-icon"),e._uU(9,"place"),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.qZA()()()()),2&o){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.event.resources),e.xp6(5),e.Oqu(t.location)}}function il(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.postForm())}),e.SDv(1,28),e.qZA()}}let Mt=(()=>{class o extends u.cx{ngOnInit(){var t=this;return(0,f.Z)(function*(){t._space=(yield t._space_pipe.transform(t.event.resources[0].email))||t._space})()}get formatted_recurrence(){return(0,k.IO)({...this.event.recurrence,start:this.event.date||this.event.recurrence.start})}get event(){return this._event_form.form.value}get space(){return this._space}get level(){return this._org.levelWithID(this.space.zones)}get location(){const t=this._org.buildings.find(n=>this.space.zones.includes(n.id));return t?.address||t?.display_name||t?.name}constructor(t,n,i,s,l){var r;super(),r=this,this._event_form=t,this._org=n,this._space_pipe=i,this._sheet_ref=s,this._dialog=l,this.show_close=!1,this.loading=this._event_form.loading,this.postForm=(0,f.Z)(function*(){!r.space&&"done"!==(yield(0,u._5)({title:"Make Booking without a Room",content:"You are creating a booking without a room, are you sure?",icon:{content:"event_available"}},r._dialog)).reason||(yield r._event_form.postForm().catch(c=>{throw(0,u.cB)(c),c}),r.dismiss(!0))}),this.cancelPost=()=>this._event_form.cancelPostForm(),this.dismiss=c=>this._sheet_ref?.dismiss(c),this._space=this.event.resources[0]}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(k.MH),e.Y36(O.w7),e.Y36(ne.X),e.Y36($.oL,8),e.Y36(A.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["meeting-flow-confirm"]],inputs:{show_close:"show_close"},features:[e._Bn([ne.X]),e.qOj],decls:31,vars:22,consts:function(){let a,t,n,i,s;return a=$localize`:␟0cd25444b7557b2f0c8453f99ac6ac586e2734ef␟5359169455682005018:Confirm Meeting booking`,t=$localize`:␟4b21718d2cf1162c66e915d086412945cb82f5c5␟2503133629493199843:{VAR_PLURAL, plural, =1 {attendee } other {attendees }}`,t=e.Zx4(t,{VAR_PLURAL:"\ufffd1\ufffd"}),n=$localize`:␟107fd539cb631844739e297e9d5474c7fec90b32␟5235780670058538300: ${"\ufffd0\ufffd"}:INTERPOLATION: ${t}:ICU: `,i=$localize`:␟7ace4094f7f2f91e71cf8e2a5602a04062a20a47␟2833154702556922571:Booked Room`,s=$localize`:␟0ad83be7464a0a2e8d100342e144bc3fbc789f9d␟3141803775366633134: Confirm `,[["icon","","matRipple","","name","close-meeting-confirm",3,"click",4,"ngIf"],[1,"flex","items-center","justify-between","px-2"],a,["diameter","32",4,"ngIf"],["period","",1,"flex","space-x-1","px-2"],[1,"text-success","mt-1"],["details","",1,"leading-6"],[1,"flex","items-center","space-x-2"],["date",""],["class","flex items-center space-x-2",4,"ngIf"],["time",""],["attendees","","class","flex space-x-1 px-2",4,"ngIf"],["spaces","","class","flex space-x-1 px-2",4,"ngIf"],[1,"p-2","w-full","border-t","border-gray-200","mt-4"],["btn","","name","confirm-meeting","matRipple","","class","w-full",3,"click",4,"ngIf"],["icon","","matRipple","","name","close-meeting-confirm",3,"click"],["diameter","32"],["attendees","",1,"flex","space-x-1","px-2"],n,["attendee-list",""],["aria-label","User selection"],["chipList",""],[4,"ngFor","ngForOf"],[1,"flex","items-center"],[1,"mr-2"],["spaces","",1,"flex","space-x-1","px-2"],i,["btn","","name","confirm-meeting","matRipple","",1,"w-full",3,"click"],s]},template:function(t,n){1&t&&(e.YNc(0,Xs,3,0,"button",0),e.TgZ(1,"header",1)(2,"h2"),e.SDv(3,2),e.qZA(),e.YNc(4,zs,1,0,"mat-spinner",3),e.ALo(5,"async"),e.qZA(),e.TgZ(6,"section",4)(7,"app-icon",5),e._uU(8,"done"),e.qZA(),e.TgZ(9,"div",6)(10,"h3"),e._uU(11),e.qZA(),e.TgZ(12,"div",7)(13,"app-icon"),e._uU(14,"today"),e.qZA(),e.TgZ(15,"div",8),e._uU(16),e.ALo(17,"date"),e.qZA()(),e.YNc(18,Vs,5,1,"div",9),e.TgZ(19,"div",7)(20,"app-icon"),e._uU(21,"schedule"),e.qZA(),e.TgZ(22,"div",10),e._uU(23),e.ALo(24,"date"),e.ALo(25,"date"),e.qZA()()()(),e.YNc(26,tl,10,3,"section",11),e.YNc(27,ol,12,2,"section",12),e.TgZ(28,"footer",13),e.YNc(29,il,2,0,"button",14),e.ALo(30,"async"),e.qZA()),2&t&&(e.Q6J("ngIf",n.show_close),e.xp6(4),e.Q6J("ngIf",e.lcZ(5,9,n.loading)),e.xp6(7),e.Oqu(n.event.title||"Meeting Details"),e.xp6(5),e.Oqu(e.xi3(17,11,n.event.date,"fullDate")),e.xp6(2),e.Q6J("ngIf",null==n.event.recurrence?null:n.event.recurrence.pattern),e.xp6(5),e.hij(" ",n.event.all_day?"All Day":e.xi3(24,14,n.event.date,"shortTime")+" - "+e.xi3(25,17,n.event.date+60*n.event.duration*1e3,"h:mm a (z)")," "),e.xp6(3),e.Q6J("ngIf",n.event.attendees.length),e.xp6(1),e.Q6J("ngIf",null==n.space?null:n.space.id),e.xp6(2),e.Q6J("ngIf",!e.lcZ(30,20,n.loading)))},dependencies:[_.sg,_.O5,v.o,h.wG,M.Ou,X.HS,_.Ov,_.uU],styles:["section[_ngcontent-%COMP%] > app-icon[_ngcontent-%COMP%]{font-size:1.5rem}h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:medium;margin-bottom:.5rem}h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:medium;margin:.5rem 0}\n/*# sourceMappingURL=meeting-flow-confirm.component.ts-angular-inline--113.css.map*/"]}),o})();var al=p(6813),Zt=p(9254),sl=p(1662),fe=p(8699);function ll(o,a){1&o&&(e.TgZ(0,"mat-checkbox",18),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FORM.ALL_DAY")," "))}function rl(o,a){1&o&&(e.TgZ(0,"div",19)(1,"label",20),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"span"),e._uU(5,"*"),e.qZA()(),e._UZ(6,"host-select-field",21),e.qZA()),2&o&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"FORM.HOST"),""))}function _l(o,a){1&o&&(e.TgZ(0,"mat-checkbox",25),e._uU(1," Update all future events "),e.qZA())}function cl(o,a){if(1&o&&(e.TgZ(0,"div",19)(1,"label",22),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"span"),e._uU(5,"*"),e.qZA()(),e._UZ(6,"recurrence-field",23),e.YNc(7,_l,2,0,"mat-checkbox",24),e.qZA()),2&o){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,3,"FORM.RECURRENCE"),""),e.xp6(4),e.Q6J("date",t.form.value.date),e.xp6(1),e.Q6J("ngIf",t.form.value.id)}}const ke=function(){return{standalone:!0}};function dl(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"label",4),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-form-field",5),e._UZ(7,"input",6),e.TgZ(8,"mat-error"),e._uU(9),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"div",3)(12,"label",7),e._uU(13),e.ALo(14,"translate"),e.TgZ(15,"span"),e._uU(16,"*"),e.qZA()(),e.TgZ(17,"a-date-field",8),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.form.patchValue({date:i}))}),e._uU(18),e.ALo(19,"translate"),e.qZA()()(),e.TgZ(20,"div",9)(21,"div",10)(22,"label",11),e._uU(23),e.ALo(24,"translate"),e.TgZ(25,"span"),e._uU(26,"*"),e.qZA()(),e.TgZ(27,"a-time-field",12),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.form.patchValue({date:i}))}),e.qZA()(),e.TgZ(28,"div",13)(29,"label",14),e._uU(30),e.ALo(31,"translate"),e.TgZ(32,"span"),e._uU(33,"*"),e.qZA()(),e.TgZ(34,"a-duration-field",15),e._uU(35," Meeting must end at a future time. "),e.qZA(),e.YNc(36,ll,3,3,"mat-checkbox",16),e.qZA()(),e.YNc(37,rl,7,3,"div",17),e.YNc(38,cl,8,5,"div",17),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(4),e.Oqu(e.lcZ(5,21,"FORM.TITLE")),e.xp6(5),e.Oqu(e.lcZ(10,23,"FORM.TITLE_ERROR")),e.xp6(4),e.hij(" ",e.lcZ(14,25,"FORM.DATE"),""),e.xp6(4),e.Q6J("ngModel",t.form.value.date)("ngModelOptions",e.DdM(33,ke))("to",t.end_date),e.xp6(1),e.hij(" ",e.lcZ(19,27,"FORM.DATE_ERROR")," "),e.xp6(5),e.hij(" ",e.lcZ(24,29,"FORM.START_TIME")," "),e.xp6(4),e.Q6J("ngModel",t.form.value.date)("ngModelOptions",e.DdM(34,ke))("disabled",t.form.value.all_day),e.xp6(3),e.hij(" ",e.lcZ(31,31,"FORM.END_TIME"),""),e.xp6(4),e.Q6J("disabled",t.form.value.all_day)("time",null==t.form||null==t.form.value?null:t.form.value.date)("max",t.max_duration)("ngModelOptions",e.DdM(35,ke))("force",t.form.value.all_day?"All Day":""),e.xp6(2),e.Q6J("ngIf",t.allow_all_day),e.xp6(1),e.Q6J("ngIf",t.can_book_for_others),e.xp6(1),e.Q6J("ngIf",t.allow_recurrence)}}let ul=(()=>{class o{get max_duration(){return this._settings.get("app.events.max_duration")||480}get can_book_for_others(){return this._settings.get("app.events.can_book_for_others")}get allow_all_day(){return this._settings.get("app.events.allow_all_day")}get allow_recurrence(){return this._settings.get("app.events.allow_recurrence")}get end_date(){return(0,ge.Z)((0,G.Z)(Date.now(),this._settings.get("app.events.allowed_future_days")||180))}constructor(t){this._settings=t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.gb))},o.\u0275cmp=e.Xpm({type:o,selectors:[["meeting-form-details"]],inputs:{form:"form"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"flex","items-center","flex-wrap","sm:space-x-2"],[1,"flex-1","min-w-[256px]"],["for","title"],["appearance","outline",1,"w-full"],["matInput","","name","title","formControlName","title","placeholder","e.g. Team Meeting"],["for","date"],["name","date",3,"ngModel","ngModelOptions","to","ngModelChange"],[1,"flex","items-center","space-x-2"],[1,"flex-1","w-1/3"],["for","start-time"],["name","start-time",3,"ngModel","ngModelOptions","disabled","ngModelChange"],[1,"flex-1","w-1/3","relative"],["for","end-time"],["name","end-time","formControlName","duration",3,"disabled","time","max","ngModelOptions","force"],["formControlName","all_day","class","absolute -top-2 right-0",4,"ngIf"],["class","w-full flex flex-col",4,"ngIf"],["formControlName","all_day",1,"absolute","-top-2","right-0"],[1,"w-full","flex","flex-col"],["for","host"],["name","host","formControlName","organiser"],["for","recurrence"],["name","recurrence","formControlName","recurrence",3,"date"],["formControlName","update_master",4,"ngIf"],["formControlName","update_master"]],template:function(t,n){1&t&&e.YNc(0,dl,39,36,"div",0),2&t&&e.Q6J("ngIf",n.form)},dependencies:[_.O5,w.KE,w.TO,D.Nt,L.oG,V.Q,ee.B,te.N,Tt.d,sl.t,d.Fj,d.JJ,d.JL,d.On,d.sg,d.u,fe.X$],encapsulation:2}),o})();const pl=["confirm_ref"],ml=["input"];function gl(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"section",5)(1,"h3",6)(2,"div",7),e._uU(3," 2 "),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"div",9),e.TgZ(8,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.findAvailableTime())}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.hide_block.attendees=!i.hide_block.attendees)}),e.TgZ(12,"app-icon"),e._uU(13),e.qZA()()(),e.TgZ(14,"div",11),e._UZ(15,"a-user-list-field",24),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(5),e.hij(" ",e.lcZ(6,5,"FORM.ATTENDEES")," "),e.xp6(4),e.hij(" ",e.lcZ(10,7,"WPA.AVAILABILITY")," "),e.xp6(4),e.Oqu(t.hide_block.attendees?"expand_more":"expand_less"),e.xp6(1),e.Q6J("@show",t.hide_block.attendees?"hide":"show"),e.xp6(1),e.Q6J("guests",t.allow_externals)}}function fl(o,a){1&o&&(e.TgZ(0,"div",25),e._uU(1," The selected room has less capacity than the number of meeting attendees. "),e.qZA())}function hl(o,a){if(1&o&&(e.TgZ(0,"mat-option",36),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}const Cl=function(){return{standalone:!0}};function xl(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",30),e.NdJ("openedChange",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.focusInput())}),e.TgZ(1,"mat-select",31)(2,"input",32,33),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(3);return e.KtG(s.code_filter.next(i))}),e.qZA(),e._UZ(4,"mat-option",34),e.YNc(5,hl,2,2,"mat-option",35),e.ALo(6,"async"),e.qZA(),e.TgZ(7,"mat-error"),e._uU(8," Catering charge code is required "),e.qZA()()}if(2&o){const t=e.oxw(3);e.xp6(2),e.Q6J("ngModel",t.code_filter.getValue())("ngModelOptions",e.DdM(5,Cl)),e.xp6(3),e.Q6J("ngForOf",e.lcZ(6,3,t.filtered_codes))}}function vl(o,a){if(1&o&&(e.TgZ(0,"mat-form-field",37),e.ALo(1,"async"),e._UZ(2,"textarea",38),e.TgZ(3,"mat-error"),e._uU(4," Catering Order notes are required "),e.qZA()()),2&o){const t=e.oxw(3);e.ekj("mt-2",!e.lcZ(1,2,(null==t.form.value.catering?null:t.form.value.catering.length)&&t.has_codes))}}const Fl=function(o,a,t){return{date:o,duration:a,zone_id:t}};function Tl(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"section",5)(1,"h3",6)(2,"div",7),e._uU(3," 4 "),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"div",9),e.TgZ(8,"button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.hide_block.catering=!i.hide_block.catering)}),e.TgZ(9,"app-icon"),e._uU(10),e.qZA()()(),e.TgZ(11,"div",11),e._UZ(12,"catering-list-field",27),e.YNc(13,xl,9,6,"mat-form-field",28),e.ALo(14,"async"),e.YNc(15,vl,5,4,"mat-form-field",29),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(5),e.hij(" ",e.lcZ(6,6,"WPA.CATERING")," "),e.xp6(5),e.Oqu(t.hide_block.catering?"expand_more":"expand_less"),e.xp6(1),e.Q6J("@show",t.hide_block.catering?"hide":"show"),e.xp6(1),e.Q6J("options",e.kEZ(10,Fl,t.form.value.date,t.form.value.duration,null!=t.form.value&&null!=t.form.value.resources&&t.form.value.resources.length?null==t.form.value||null==t.form.value.resources[0]||null==t.form.value.resources[0].level?null:t.form.value.resources[0].level.parent_id:"")),e.xp6(1),e.Q6J("ngIf",e.lcZ(14,8,(null==t.form.value.catering?null:t.form.value.catering.length)&&t.has_codes)),e.xp6(2),e.Q6J("ngIf",null==t.form.value.catering?null:t.form.value.catering.length)}}function bl(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"section",5)(1,"h3",6)(2,"div",7),e._uU(3),e.ALo(4,"async"),e.qZA(),e.TgZ(5,"div",8),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"div",9),e.TgZ(9,"button",39),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.hide_block.assets=!i.hide_block.assets)}),e.TgZ(10,"app-icon"),e._uU(11),e.qZA()()(),e.TgZ(12,"div",11),e._UZ(13,"asset-list-field",40),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,6,t.has_catering)?"5":"4"," "),e.xp6(3),e.hij(" ",e.lcZ(7,8,"WPA.ASSETS")," "),e.xp6(5),e.Oqu(t.hide_block.assets?"expand_more":"expand_less"),e.xp6(1),e.Q6J("@show",t.hide_block.assets?"hide":"show"),e.xp6(1),e.Q6J("date",t.form.value.date)("duration",t.form.value.duration)}}function Ol(o,a){if(1&o&&(e.TgZ(0,"section",5)(1,"h3",41)(2,"div",7),e._uU(3),e.ALo(4,"async"),e.ALo(5,"async"),e.qZA(),e.TgZ(6,"div",8),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"div",42)(10,"label",43),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"rich-text-input",44),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,3,t.has_catering)&&t.has_assets?"6":e.lcZ(5,5,t.has_catering)||t.has_assets?"5":"4"," "),e.xp6(4),e.hij(" ",e.lcZ(8,7,"FORM.NOTES")," "),e.xp6(4),e.hij(" ",e.lcZ(12,9,"WPA.NOTES_INFO")," ")}}function Al(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"form",4)(1,"section",5)(2,"h3",6)(3,"div",7),e._uU(4," 1 "),e.qZA(),e.TgZ(5,"div",8),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"div",9),e.TgZ(9,"button",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.hide_block.details=!i.hide_block.details)}),e.TgZ(10,"app-icon"),e._uU(11),e.qZA()()(),e.TgZ(12,"div",11),e._UZ(13,"meeting-form-details",12),e.qZA()(),e.YNc(14,gl,16,9,"section",13),e.TgZ(15,"section",5)(16,"h3",6)(17,"div",7),e._uU(18," 3 "),e.qZA(),e.TgZ(19,"div",8),e._uU(20),e.ALo(21,"translate"),e.qZA(),e._UZ(22,"div",9),e.TgZ(23,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.hide_block.resources=!i.hide_block.resources)}),e.TgZ(24,"app-icon"),e._uU(25),e.qZA()()(),e.TgZ(26,"div",15),e.YNc(27,fl,2,0,"div",16),e._UZ(28,"space-list-field",17),e.qZA()(),e.YNc(29,Tl,16,14,"section",13),e.ALo(30,"async"),e.YNc(31,bl,14,10,"section",13),e.YNc(32,Ol,14,11,"section",13),e.TgZ(33,"section",18)(34,"button",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.viewConfirm())}),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"button",20),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e._uU(38," "),e.SDv(39,21),e._uU(40),e.ALo(41,"translate"),e.qZA()()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(6),e.hij(" ",e.lcZ(7,16,"WPA.DETAILS")," "),e.xp6(5),e.Oqu(t.hide_block.details?"expand_more":"expand_less"),e.xp6(1),e.Q6J("@show",t.hide_block.details?"hide":"show"),e.xp6(1),e.Q6J("form",t.form),e.xp6(1),e.Q6J("ngIf",!t.hide_attendees),e.xp6(6),e.hij(" ",e.lcZ(21,18,"WPA.ROOM")," "),e.xp6(5),e.Oqu(t.hide_block.resources?"expand_more":"expand_less"),e.xp6(1),e.Q6J("@show",t.hide_block.resources?"hide":"show"),e.xp6(1),e.Q6J("ngIf",!t.strict_capacity_check&&t.total_capacity&&t.total_capacity<=(null==t.form.value.attendees?null:t.form.value.attendees.length)),e.xp6(2),e.Q6J("ngIf",e.lcZ(30,20,t.has_catering)),e.xp6(2),e.Q6J("ngIf",t.has_assets),e.xp6(1),e.Q6J("ngIf",!t.hide_notes),e.xp6(3),e.hij(" ",e.lcZ(36,22,"WPA.CONFIRM_MEETING")," "),e.xp6(4),e.pQV(!!t.form.value.id),e.QtT(39),e.xp6(1),e.hij(" ",e.lcZ(41,24,"WPA.CLEAR_FORM")," ")}}let wl=(()=>{class o extends u.cx{get form(){return this._state.form}get has_assets(){return!!this._settings.get("app.events.has_assets")}get hide_notes(){return!!this._settings.get("app.events.hide_notes")}get hide_attendees(){return!!this._settings.get("app.events.hide_attendees")}get allow_externals(){return this._settings.get("app.events.allow_externals")}get strict_capacity_check(){return this._settings.get("app.events.strict_capacity_check")}get total_capacity(){return this.form.value.resources?.reduce((t,n)=>t+n.capacity,0)||0}get attendee_count(){const t=(0,u.ar)();let n=this.form.value.attendees?.length||0;return this.form.value.attendees.find(i=>i.email.toLowerCase()===t.email.toLowerCase())||(n+=1),n}constructor(t,n,i,s,l,r,c,m){super(),this._state=t,this._catering=n,this._settings=i,this._router=s,this._dialog=l,this._bottom_sheet=r,this._org=c,this._idle=m,this.hide_block={},this.code_filter=new P.X(""),this.has_catering=this._catering.available_menu.pipe((0,Z.U)(g=>g.length>0)),this.has_codes=this._catering.charge_codes.pipe((0,Z.U)(g=>g.length>0),(0,ue.b)(g=>{g||(this.form.get("catering_charge_code").setValidators([]),this.form.updateValueAndValidity())})),this.filtered_codes=(0,j.aj)([this.code_filter,this._catering.charge_codes]).pipe((0,Z.U)(([g,C])=>C.filter(E=>E.toLowerCase().includes(g.toLowerCase())))),this.clearForm=()=>this._state.resetForm(),this.viewConfirm=()=>(this.form.value.host||this.form.patchValue({host:(0,u.ar)()?.email}),this.strict_capacity_check&&this.attendee_count>this.total_capacity?(0,u.cB)("Attendee count is greater than the capacity of the selected rooms"):(this.form.markAllAsTouched(),this.form.valid?this._settings.get("app.events.no_standalone")&&!this.form.value.resources.length?(0,u.cB)("You need to select a room to make a booking"):this._settings.get("app.events.booking_unavailable")?this._state.openEventLinkModal():void(window.innerWidth>=768?(this.dialog_ref=this._dialog.open(Hs),this.dialog_ref.componentInstance.show_close=!0,this.dialog_ref.afterClosed().subscribe(g=>{g&&(this.unsubWith("idle"),this._router.navigate(["/book","meeting","success"]),this._state.setView("success"))})):(this.sheet_ref=this._bottom_sheet.open(Mt),this.sheet_ref.instance.show_close=!0,this.sheet_ref.afterDismissed().subscribe(g=>{g&&(this.unsubWith("idle"),this._router.navigate(["/book","meeting","success"]),this._state.setView("success"))}))):(0,u.cB)(`Some fields are invalid. [${(0,u.RD)(this.form).join(", ")}]`)))}ngOnInit(){var t=this;return(0,f.Z)(function*(){yield t._org.initialised.pipe((0,N.P)(n=>n)).toPromise(),t.subscription("space_changes",t.form.controls.resources.valueChanges.subscribe(n=>t._checkCateringEligibility(n))),t.subscription("date_changes",t.form.controls.date.valueChanges.subscribe(n=>t._checkCateringEligibility(t.form.value.resources))),t.subscription("duration_changes",t.form.controls.duration.valueChanges.subscribe(n=>t._checkCateringEligibility(t.form.value.resources))),t._catering.setOptions({zone:""}),t._checkCateringEligibility(t.form.value.resources||[]),t.subscription("idle-listen",t._idle.idleFor(60*(t._settings.get("app.idle_timeout")||5)*1e3).subscribe((0,f.Z)(function*(){t.unsub("idle"),yield(0,u._5)({title:"Idle Timeout",content:"Your form data is out of date",icon:{content:"update"}},t._dialog),t._state.newForm(),location.reload()})))})()}focusInput(){this.timeout("input-focus",()=>{this._input_el.nativeElement.value="",this._input_el?.nativeElement?.focus()},300)}findAvailableTime(){const{attendees:t,organiser:n,date:i,duration:s}=this.form.value,l=this._dialog.open(Ps.u,{data:{users:t,host:n||(0,u.ar)(),date:i,duration:s}});l.afterClosed().subscribe(r=>{r&&this.form.patchValue({date:l.componentInstance.date,attendees:l.componentInstance.users.getValue(),duration:l.componentInstance.duration})})}_checkCateringEligibility(t){var n=this;return(0,f.Z)(function*(){if(t?.length){yield(0,wt.H)(100).toPromise();const i=n.form.getRawValue();n._catering.setFilters({search:"",date:i.date,duration:i.duration,resources:t,zone_id:n._org.levelWithID(t[0].zones)?.parent_id,tags:[],categories:[]}),yield(0,wt.H)(500).toPromise();const s=yield n._catering.filtered_menu.pipe((0,y.q)(1)).toPromise(),l=yield n._catering.availability.pipe((0,y.q)(1)).toPromise();!t.every(c=>s.filter(m=>!m.hide_for_zones.find(g=>c.zones.includes(g))).length>0)||l.find(c=>t.find(m=>m.id===c))?(n.form.patchValue({catering:[]}),n.form.controls.catering.disable(),(0,u.Zd)("Catering is unavailable for some of the selected spaces.")):n.form.controls.catering.enable()}else n.form.controls.catering.disable()})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(k.MH),e.Y36(be),e.Y36(u.gb),e.Y36(F.F0),e.Y36(A.uw),e.Y36($.ch),e.Y36(O.w7),e.Y36(u.im))},o.\u0275cmp=e.Xpm({type:o,selectors:[["meeting-flow-form"]],viewQuery:function(t,n){if(1&t&&(e.Gf(pl,5),e.Gf(ml,5)),2&t){let i;e.iGM(i=e.CRH())&&(n._confirm_ref=i.first),e.iGM(i=e.CRH())&&(n._input_el=i.first)}},features:[e.qOj],decls:6,vars:5,consts:function(){let a;return a=$localize`:␟e26549266cb03cd521fa0036d18ea57004186570␟1405384778004392663:{VAR_SELECT, select, true {Reset } false {Clear }}`,a=e.Zx4(a,{VAR_SELECT:"\ufffd0\ufffd"}),[[1,"h-full","w-full","bg-gray-100","dark:bg-neutral-900","overflow-auto"],[1,"max-w-full","w-[48rem]","mx-auto","sm:my-4","bg-white","dark:bg-[#1F2021]","border","border-gray-300","dark:border-neutral-700"],[1,"w-full","p-4","sm:py-4","sm:px-16","text-2xl","font-medium","border-b","border-gray-300","dark:border-neutral-700"],["class","p-0 sm:py-4 sm:px-16 divide-y divide-gray-300 space-y-2",3,"formGroup",4,"ngIf"],[1,"p-0","sm:py-4","sm:px-16","divide-y","divide-gray-300","space-y-2",3,"formGroup"],[1,"p-2"],[1,"space-x-2","flex","items-center"],[1,"bg-black/20","rounded-full","h-6","w-6","flex","items-center","justify-center"],[1,"text-xl"],[1,"flex-1","w-px"],["icon","","name","toggle-details-meeting","matRipple","",3,"click"],[1,"overflow-hidden"],[1,"mt-4",3,"form"],["class","p-2",4,"ngIf"],["icon","","name","toggle-spaces-meeting","matRipple","",3,"click"],[1,"overflow-hidden","flex","flex-col","items-center"],["class","bg-yellow-500 rounded shadow p-2 text-xs mx-auto my-2 text-black inline-flex",4,"ngIf"],["formControlName","resources",1,"w-full"],[1,"flex","flex-col","sm:flex-row","items-center","sm:space-x-2","p-2"],["btn","","name","open-meeting-confirm","matRipple","","confirm","",1,"mb-2","sm:mb-0","w-full","sm:w-auto",3,"click"],["btn","","name","clear-form-meeting","matRipple","","clear-form","",1,"inverse","w-full","sm:w-auto",3,"click"],a,["matRipple","","name","find-attendee-availability",1,"bg-none","underline","text-xs","text-blue-500",3,"click"],["icon","","name","toggle-attendees-meeting","matRipple","",3,"click"],["formControlName","attendees",1,"mt-4",3,"guests"],[1,"bg-yellow-500","rounded","shadow","p-2","text-xs","mx-auto","my-2","text-black","inline-flex"],["icon","","name","toggle-catering-meeting","matRipple","",3,"click"],["formControlName","catering",3,"options"],["appearance","outline","class","w-full mt-2",3,"openedChange",4,"ngIf"],["appearance","outline","class","w-full",3,"mt-2",4,"ngIf"],["appearance","outline",1,"w-full","mt-2",3,"openedChange"],["formControlName","catering_charge_code","placeholder","Charge Code"],["placeholder","Search charge codes...",1,"sticky","top-0","bg-white","px-4","py-3","text-base","border-x-0","border-t-0","border-b","focus:border-b","border-gray-200","w-full","rounded-none","z-50",3,"ngModel","ngModelOptions","ngModelChange"],["input",""],[1,"hidden"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["appearance","outline",1,"w-full"],["matInput","","formControlName","catering_notes","placeholder","Extra catering details..."],["icon","","name","toggle-assets-meeting","matRipple","",3,"click"],["formControlName","assets",3,"date","duration"],[1,"space-x-2","flex","items-center","mb-4"],[1,"w-full","flex","flex-col"],["for","notes"],["name","notes","formControlName","body","placeholder","Notes..."]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,Al,42,26,"form",3),e.qZA()()),2&t&&(e.xp6(3),e.AsE(" ",n.form.value.id?"Edit":"Book"," ",e.lcZ(4,3,"WPA.BOOK_MEETING_HEADING")," "),e.xp6(2),e.Q6J("ngIf",n.form))},dependencies:[_.sg,_.O5,v.o,h.ey,w.KE,w.TO,J.gD,h.wG,D.Nt,Ae.E,al.M,Ft.n,Zt.k,d._Y,d.Fj,d.JJ,d.JL,d.On,pt,d.sg,d.u,ul,_.Ov,fe.X$],encapsulation:2,data:{animation:[u.X7]}}),o})();function Ml(o,a){1&o&&(e.tHW(0,5,2),e._UZ(1,"span"),e.N_p())}function Zl(o,a){if(1&o&&(e.tHW(0,5,1),e.TgZ(1,"span"),e.YNc(2,Ml,2,0,"span",6),e.qZA(),e.N_p()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.level),e.pQV((null==t.level?null:t.level.display_name)||(null==t.level?null:t.level.name))((null==t.space?null:t.space.display_name)||(null==t.space?null:t.space.name)),e.QtT(0)}}function Nl(o,a){1&o&&(e.tHW(0,5,3),e._UZ(1,"span"),e.N_p())}const El=function(){return["/"]};let Sl=(()=>{class o{get last_event(){return this._event_form.last_success}get space(){return this.last_event.space}get level(){return this._org.levelWithID(this.space?.zones)}constructor(t,n){this._event_form=t,this._org=n}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(k.MH),e.Y36(O.w7))},o.\u0275cmp=e.Xpm({type:o,selectors:[["meeting-flow-success"]],decls:17,vars:22,consts:function(){let a;return a=$localize`:␟69a7d020448f33a82a5dc46a32de98959bc33584␟2292968970509212584: Your ${"\ufffd*8:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_SPAN_1: room booking for ${"\ufffd0:1\ufffd"}:INTERPOLATION:${"\ufffd*2:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_SPAN:,${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:1\ufffd\ufffd/*8:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*9:3\ufffd]"}:CLOSE_TAG_SPAN: ${"\ufffd1:1\ufffd"}:INTERPOLATION_1: ${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:1\ufffd\ufffd/*8:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*9:3\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd*9:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_SPAN_2:meeting${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:1\ufffd\ufffd/*8:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*9:3\ufffd]"}:CLOSE_TAG_SPAN: has been successfully booked for the ${"\ufffd0\ufffd"}:INTERPOLATION_2: at ${"\ufffd1\ufffd"}:INTERPOLATION_3:-${"\ufffd2\ufffd"}:INTERPOLATION_4:. `,a=e.Zx4(a),[[1,"absolute","inset-0","bg-white","dark:bg-neutral-600","flex","flex-col","z-50"],[1,"flex-1","flex","flex-col","items-center","justify-center","space-y-2","p-8"],[1,"text-2xl","font-medium"],["src","assets/icons/success.svg"],[1,"text-center","max-w-[32rem]"],a,[4,"ngIf"],[1,"p-2","w-full","border-t","border-gray-200","dark:bg-neutral-500","mt-4","flex","items-center","justify-center"],["btn","","name","meeting-created-continue","matRipple","",1,"w-full","max-w-[32rem]",3,"routerLink"]]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"main",1)(2,"h2",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"img",3),e.TgZ(6,"p",4),e.tHW(7,5),e.YNc(8,Zl,3,3,"span",6),e.YNc(9,Nl,2,0,"span",6),e.ALo(10,"date"),e.ALo(11,"date"),e.ALo(12,"date"),e.N_p(),e.qZA()(),e.TgZ(13,"footer",7)(14,"a",8),e._uU(15),e.ALo(16,"translate"),e.qZA()()()),2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,8,"WPA.BOOKING_CONFIRMED")," "),e.xp6(5),e.Q6J("ngIf",n.space),e.xp6(1),e.Q6J("ngIf",!n.space),e.xp6(3),e.pQV(e.xi3(10,10,n.last_event.date,"mediumDate"))(e.xi3(11,13,n.last_event.date,"shortTime"))(e.xi3(12,16,n.last_event.date+60*n.last_event.duration*1e3,"shortTime")),e.QtT(7),e.xp6(2),e.Q6J("routerLink",e.DdM(21,El)),e.xp6(1),e.hij(" ",e.lcZ(16,19,"WPA.BOOKING_DONE_CONTINUE")," "))},dependencies:[_.O5,h.wG,F.rH,_.uU,fe.X$]}),o})();function yl(o,a){1&o&&e._UZ(0,"meeting-flow-success")}function kl(o,a){1&o&&e._UZ(0,"meeting-flow-confirm")}function Pl(o,a){1&o&&e._UZ(0,"meeting-flow-form")}let Ll=(()=>{class o extends u.cx{get view(){return this._state.view}get last_success(){return this._state.last_success}constructor(t,n){super(),this._state=t,this._route=n}ngOnInit(){this._state.loadForm(),this._state.listenForStatusChanges(),this.subscription("route.params",this._route.paramMap.subscribe(t=>{t.has("step")&&this._state.setView(t.get("step"))})),this.subscription("route.query",this._route.queryParamMap.subscribe(t=>{t.has("success")&&this._state.setView("success")}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(k.MH),e.Y36(F.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["placeos-book-meeting-flow"]],features:[e.qOj],decls:4,vars:3,consts:[[1,"bg-white","dark:bg-neutral-900","h-full","w-full","z-50",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,yl,1,0,"meeting-flow-success",1),e.YNc(2,kl,1,0,"meeting-flow-confirm",1),e.YNc(3,Pl,1,0,"meeting-flow-form",2),e.qZA()),2&t&&(e.Q6J("ngSwitch",n.view),e.xp6(1),e.Q6J("ngSwitchCase","success"),e.xp6(1),e.Q6J("ngSwitchCase","confirm"))},dependencies:[_.RF,_.n9,_.ED,wl,Mt,Sl],styles:["[_nghost-%COMP%]{height:100%;width:100%}\n/*# sourceMappingURL=meeting-flow.component.ts-angular-inline--112.css.map*/"]}),o})();var Nt=p(6361);function Il(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.dismiss())}),e.TgZ(1,"app-icon"),e._uU(2,"close"),e.qZA()()}}function Rl(o,a){1&o&&e._UZ(0,"mat-spinner",16)}function Dl(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"div",21)(2,"app-icon"),e._uU(3,"arrow_upward"),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.qZA()(),e.BQk()),2&o){const t=a.$implicit;e.xp6(5),e.Oqu(t)}}function ql(o,a){if(1&o&&(e.TgZ(0,"section",17)(1,"app-icon",6),e._uU(2,"done"),e.qZA(),e.TgZ(3,"div",7)(4,"h3",18),e._uU(5),e.qZA(),e.TgZ(6,"div",8)(7,"app-icon"),e._uU(8,"person"),e.qZA(),e.TgZ(9,"span"),e.SDv(10,19),e.qZA()(),e.TgZ(11,"div",8)(12,"app-icon"),e._uU(13,"place"),e.qZA(),e.TgZ(14,"div"),e._uU(15),e.qZA()(),e.YNc(16,Dl,6,1,"ng-container",20),e.qZA()()),2&o){const t=e.oxw();e.xp6(5),e.hij(" ",(null==t.booking_asset?null:t.booking_asset.name)||(null==t.booking_asset?null:t.booking_asset.id)||""," "),e.xp6(10),e.Oqu(t.location),e.xp6(1),e.Q6J("ngForOf",t.booking_asset.features)}}function Ul(o,a){if(1&o&&(e.TgZ(0,"div",25)(1,"div",26),e._uU(2),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",t.amount," "),e.xp6(2),e.Oqu(t.name)}}function $l(o,a){if(1&o&&(e.TgZ(0,"section",22)(1,"app-icon",6),e._uU(2,"done"),e.qZA(),e.TgZ(3,"div",7)(4,"h3"),e.SDv(5,23),e.qZA(),e.YNc(6,Ul,5,2,"div",24),e.qZA()()),2&o){const t=e.oxw();e.xp6(5),e.pQV(t.assets_count),e.QtT(5),e.xp6(1),e.Q6J("ngForOf",t.assets)}}function Kl(o,a){1&o&&(e.TgZ(0,"section",22)(1,"app-icon",6),e._uU(2,"done"),e.qZA(),e.TgZ(3,"div",7)(4,"h3"),e.SDv(5,27),e.qZA(),e.TgZ(6,"div",25)(7,"span"),e._uU(8,"Locker E-043"),e.qZA()()()())}function Gl(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.postForm())}),e.SDv(1,29),e.qZA()}}let Wl=(()=>{class o extends u.cx{get booking(){return this._state.form.value}get assets(){return this.booking.assets||null}get needs_locker(){return!!this.booking.secondary_resource}get assets_count(){return this.assets?.length?this.assets.reduce((t,n)=>t+n.amount,0):0}get booking_asset(){return this.booking.booking_asset}get location(){const t=this._org.buildings.find(i=>i.id===this.booking_asset?.zone?.parent_id),n=this._org.levels.find(i=>i.id===this.booking_asset?.zone?.id);return`${n?.display_name||n?.name}${t?",":""} ${t?.address||t?.display_name||t?.name||""}`}constructor(t,n,i){var s;super(),s=this,this._state=t,this._org=n,this._sheet_ref=i,this.show_close=!1,this.loading=this._state.loading,this.postForm=(0,f.Z)(function*(){try{(yield s._state.options.pipe((0,y.q)(1)).toPromise())?.group?yield s._state.postFormForGroup():yield s._state.postForm(),s.dismiss(!0)}catch(l){console.log("Booking Error:",l),(0,u.cB)("string"==typeof l?l:"Desk unavailable at the selected time")}}),this.dismiss=l=>this._sheet_ref?.dismiss(l)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.fy),e.Y36(O.w7),e.Y36($.oL,8))},o.\u0275cmp=e.Xpm({type:o,selectors:[["new-desk-flow-confirm"]],inputs:{show_close:"show_close"},features:[e.qOj],decls:31,vars:22,consts:function(){let a,t,n,i,s;return a=$localize`:␟0882dc9e94f4d0eb3cd1bd084b002f11dcbf97a4␟872571517031618480:Confirm Desk Booking`,t=$localize`:␟f3cd229363e020d7ceb13bb351bb87f86dda78ef␟6431414344811875961:Single desk`,n=$localize`:␟baacc4ba232f9320250b9871e259ccb844857f15␟3853466990357051325:${"\ufffd0\ufffd"}:INTERPOLATION: Asset(s)`,i=$localize`:␟831b916fccb1f3e17a1e16c1d7dbd5cb34ab9aaf␟1356827781051284287:Requested Locker`,s=$localize`:␟0ad83be7464a0a2e8d100342e144bc3fbc789f9d␟3141803775366633134: Confirm `,[["icon","","name","close-desk-confirm","matRipple","",3,"click",4,"ngIf"],[1,"flex","items-center","justify-between","px-2"],[1,"text-2xl","font-medium","mb-2"],a,["diameter","32",4,"ngIf"],["period","",1,"flex","space-x-1","py-4","px-2"],[1,"text-success"],["details","",1,"leading-6"],[1,"flex","items-center","space-x-2"],["date",""],["time",""],["desk","","class","flex space-x-1 py-4 px-2 border-t dark:border-neutral-500",4,"ngIf"],["assets","","class","flex space-x-1 py-4 px-2 border-t dark:border-neutral-500",4,"ngIf"],[1,"p-2","w-full","border-t","border-gray-200","dark:border-neutral-500","mt-4"],["name","confirm-desk","btn","","matRipple","","class","w-full",3,"click",4,"ngIf"],["icon","","name","close-desk-confirm","matRipple","",3,"click"],["diameter","32"],["desk","",1,"flex","space-x-1","py-4","px-2","border-t","dark:border-neutral-500"],["name",""],t,[4,"ngFor","ngForOf"],["features","",1,"flex","items-center","space-x-2"],["assets","",1,"flex","space-x-1","py-4","px-2","border-t","dark:border-neutral-500"],n,["class","flex space-x-2",4,"ngFor","ngForOf"],[1,"flex","space-x-2"],[1,"h-5","w-5","bg-gray-100","dark:bg-neutral-600","rounded-full"],i,["name","confirm-desk","btn","","matRipple","",1,"w-full",3,"click"],s]},template:function(t,n){1&t&&(e.YNc(0,Il,3,0,"button",0),e.TgZ(1,"header",1)(2,"h2",2),e.SDv(3,3),e.qZA(),e.YNc(4,Rl,1,0,"mat-spinner",4),e.ALo(5,"async"),e.qZA(),e.TgZ(6,"section",5)(7,"app-icon",6),e._uU(8,"done"),e.qZA(),e.TgZ(9,"div",7)(10,"h3"),e._uU(11),e.qZA(),e.TgZ(12,"div",8)(13,"app-icon"),e._uU(14,"calendar_today"),e.qZA(),e.TgZ(15,"div",9),e._uU(16),e.ALo(17,"date"),e.qZA()(),e.TgZ(18,"div",8)(19,"app-icon"),e._uU(20,"schedule"),e.qZA(),e.TgZ(21,"div",10),e._uU(22),e.ALo(23,"date"),e.ALo(24,"date"),e.qZA()()()(),e.YNc(25,ql,17,3,"section",11),e.YNc(26,$l,7,2,"section",12),e.YNc(27,Kl,9,0,"section",12),e.TgZ(28,"footer",13),e.YNc(29,Gl,2,0,"button",14),e.ALo(30,"async"),e.qZA()),2&t&&(e.Q6J("ngIf",n.show_close),e.xp6(4),e.Q6J("ngIf",e.lcZ(5,9,n.loading)),e.xp6(7),e.Oqu(n.booking.title||"~Untitled~"),e.xp6(5),e.Oqu(e.xi3(17,11,n.booking.date,"fullDate")),e.xp6(6),e.hij(" ",n.booking.all_day?"All Day":e.xi3(23,14,n.booking.date,"shortTime")+" - "+e.xi3(24,17,n.booking.date+60*n.booking.duration*1e3,"h:mm a (z)")," "),e.xp6(3),e.Q6J("ngIf",null==n.booking_asset?null:n.booking_asset.id),e.xp6(1),e.Q6J("ngIf",null==n.assets?null:n.assets.length),e.xp6(1),e.Q6J("ngIf",n.needs_locker),e.xp6(2),e.Q6J("ngIf",!e.lcZ(30,20,n.loading)))},dependencies:[_.sg,_.O5,v.o,h.wG,M.Ou,_.Ov,_.uU],styles:["section[_ngcontent-%COMP%] > app-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-top:.3rem}h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:medium;margin:.5rem 0}\n/*# sourceMappingURL=new-desk-flow-confirm.component.ts-angular-inline--115.css.map*/"]}),o})();var Jl=p(321);function Ql(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"section",31)(1,"button",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.setOptions({group:!1,members:[]}))}),e.ALo(2,"async"),e.ALo(3,"async"),e.TgZ(4,"app-icon",33),e._uU(5,"person"),e.qZA(),e.TgZ(6,"div",34),e.SDv(7,35),e.qZA(),e._UZ(8,"div",36),e.ALo(9,"async"),e.ALo(10,"async"),e.qZA(),e.TgZ(11,"button",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.setOptions({group:!0}))}),e.ALo(12,"async"),e.ALo(13,"async"),e.TgZ(14,"app-icon",33),e._uU(15,"group_add"),e.qZA(),e.TgZ(16,"div",34),e.SDv(17,37),e.qZA(),e._UZ(18,"div",36),e.ALo(19,"async"),e.ALo(20,"async"),e.qZA()()}if(2&o){const t=e.oxw(2);let n,i,s,l,r,c,m,g;e.xp6(1),e.ekj("text-primary",!(null!=(n=e.lcZ(2,16,t.options))&&n.group))("opacity-60",null==(i=e.lcZ(3,18,t.options))?null:i.group),e.xp6(7),e.ekj("bg-gray-200",null==(s=e.lcZ(9,20,t.options))?null:s.group)("bg-primary",!(null!=(l=e.lcZ(10,22,t.options))&&l.group)),e.xp6(3),e.ekj("text-primary",null==(r=e.lcZ(12,24,t.options))?null:r.group)("opacity-60",!(null!=(c=e.lcZ(13,26,t.options))&&c.group)),e.xp6(7),e.ekj("bg-gray-200",!(null!=(m=e.lcZ(19,28,t.options))&&m.group))("bg-primary",null==(g=e.lcZ(20,30,t.options))?null:g.group)}}function Bl(o,a){1&o&&(e.TgZ(0,"div",38)(1,"label",11),e._uU(2,"Host"),e.TgZ(3,"span"),e._uU(4,"*"),e.qZA()(),e._UZ(5,"a-user-search-field",39),e.qZA())}function Yl(o,a){1&o&&(e.TgZ(0,"mat-checkbox",40),e.SDv(1,41),e.qZA())}const Pe=function(){return{standalone:!0}};function jl(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",20)(2,"mat-checkbox",42),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.form.patchValue({secondary_resource:i?"locker":""}))}),e.SDv(3,43),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngModel",!!t.form.value.secondary_resource)("ngModelOptions",e.DdM(2,Pe))}}const Hl=function(){return[]};function Xl(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"section",3)(1,"h3",44)(2,"div",5),e._uU(3," 2 "),e.qZA(),e.TgZ(4,"div",6),e.SDv(5,45),e.qZA(),e._UZ(6,"div",46),e.qZA(),e.TgZ(7,"div",47)(8,"a-user-list-field",48),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.setOptions({members:i}))}),e.ALo(9,"async"),e.qZA()()()}if(2&o){const t=e.oxw(2);let n;e.xp6(8),e.Q6J("ngModel",(null==(n=e.lcZ(9,2,t.options))?null:n.members)||e.DdM(4,Hl))("ngModelOptions",e.DdM(5,Pe))}}function zl(o,a){1&o&&(e.TgZ(0,"p",52),e._uU(1," Desks nearby to the selected desk will booked for group members "),e.qZA())}function Vl(o,a){if(1&o&&(e.TgZ(0,"section",3)(1,"h3",4)(2,"div",5),e._uU(3),e.ALo(4,"async"),e.qZA(),e.TgZ(5,"div",6),e.SDv(6,49),e.qZA()(),e._UZ(7,"desk-list-field",50),e.YNc(8,zl,2,0,"p",51),e.ALo(9,"async"),e.qZA()),2&o){const t=e.oxw(2);let n,i;e.xp6(3),e.hij(" ",null!=(n=e.lcZ(4,2,t.options))&&n.group?3:2," "),e.xp6(5),e.Q6J("ngIf",null==(i=e.lcZ(9,4,t.options))?null:i.group)}}function er(o,a){if(1&o&&(e.TgZ(0,"section",3)(1,"h3",4)(2,"div",5),e._uU(3),e.ALo(4,"async"),e.qZA(),e.TgZ(5,"div",6),e.SDv(6,53),e.qZA()(),e._UZ(7,"asset-list-field",54),e.qZA()),2&o){const t=e.oxw(2);let n;e.xp6(3),e.hij(" ",null!=(n=e.lcZ(4,3,t.options))&&n.group?4:3," "),e.xp6(4),e.Q6J("date",t.form.value.date)("duration",t.form.value.duration)}}function tr(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.YNc(1,Ql,21,32,"section",2),e.TgZ(2,"section",3)(3,"h3",4)(4,"div",5),e._uU(5," 1 "),e.qZA(),e.TgZ(6,"div",6),e.SDv(7,7),e.qZA()(),e.YNc(8,Bl,6,0,"div",8),e.ALo(9,"async"),e.TgZ(10,"div",9)(11,"div",10)(12,"label",11),e._uU(13,"Add Title"),e.TgZ(14,"span"),e._uU(15,"*"),e.qZA()(),e.TgZ(16,"mat-form-field",12),e._UZ(17,"input",13),e.TgZ(18,"mat-error"),e.SDv(19,14),e.qZA()()(),e.TgZ(20,"div",10)(21,"label",15),e.tHW(22,16),e._UZ(23,"span"),e.N_p(),e.qZA(),e.TgZ(24,"a-date-field",17),e.SDv(25,18),e.qZA()()(),e.TgZ(26,"div",19)(27,"div",20)(28,"label",21),e.tHW(29,22),e._UZ(30,"span"),e.N_p(),e.qZA(),e.TgZ(31,"a-time-field",23),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.form.patchValue({date:i}))}),e.qZA()(),e.TgZ(32,"div",24)(33,"label",25),e.tHW(34,26),e._UZ(35,"span"),e.N_p(),e.qZA(),e._UZ(36,"a-duration-field",27),e.YNc(37,Yl,2,0,"mat-checkbox",28),e.qZA()(),e.YNc(38,jl,4,3,"div",29),e.qZA(),e.YNc(39,Xl,10,6,"section",30),e.ALo(40,"async"),e.YNc(41,Vl,10,6,"section",30),e.YNc(42,er,8,5,"section",30),e.qZA()}if(2&o){const t=e.oxw();let n,i,s;e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("ngIf",t.allow_groups),e.xp6(1),e.ekj("!border-none",t.allow_groups),e.xp6(6),e.Q6J("ngIf",t.can_book_for_others&&!(null!=(n=e.lcZ(9,19,t.options))&&n.group)),e.xp6(16),e.Q6J("to",t.end_date),e.xp6(7),e.Q6J("ngModel",t.form.value.date)("ngModelOptions",e.DdM(23,Pe))("disabled",t.form.value.all_day),e.xp6(5),e.Q6J("time",null==(i=t.form.get("date"))?null:i.value)("max",720)("min",60)("step",60)("force",t.form.value.all_day?"All Day":""),e.xp6(1),e.Q6J("ngIf",t.allow_all_day),e.xp6(1),e.Q6J("ngIf",t.can_book_lockers),e.xp6(1),e.Q6J("ngIf",null==(s=e.lcZ(40,21,t.options))?null:s.group),e.xp6(2),e.Q6J("ngIf",t.form.contains("resources")),e.xp6(1),e.Q6J("ngIf",t.has_assets)}}let nr=(()=>{class o extends u.cx{get building(){return this._org.building}set building(t){this._org.building=t}get can_book_for_others(){return this._settings.get("app.desks.can_book_for_others")}get can_book_lockers(){return this._settings.get("app.desks.can_book_lockers")}get can_recurr(){return this._settings.get("app.desks.recurrence_allowed")}get allow_groups(){return this._settings.get("app.desks.allow_groups")}get has_assets(){return!!this._settings.get("app.desks.has_assets")}get needs_reason(){return!0===this._settings.get("app.desks.needs_reason")}get allow_time_changes(){return!!this._settings.get("app.desks.allow_time_changes")}get allow_all_day(){return this.allow_time_changes&&!!this._settings.get("app.desks.allow_all_day")}get end_date(){return(0,ge.Z)((0,G.Z)(Date.now(),this._settings.get("app.desks.available_period")||90))}constructor(t,n,i){super(),this._state=t,this._org=n,this._settings=i,this.find=new e.vpe,this.buildings=this._org.building_list,this.levels=this._org.active_levels,this.options=this._state.options,this.features=this._state.features,this.from_id=!1,this.recurrence_options=["daily","weekly","monthly"],this.setOptions=s=>this._state.setOptions(s),this.setFeature=(s,l)=>this._state.setFeature(s,l)}ngOnChanges(t){t.form&&this.form&&this.selected_desk?.id&&this.form.patchValue({resources:[this.selected_desk]})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.fy),e.Y36(O.w7),e.Y36(u.gb))},o.\u0275cmp=e.Xpm({type:o,selectors:[["new-desk-form-details"]],inputs:{form:"form"},outputs:{find:"find"},features:[e.qOj,e.TTD],decls:1,vars:1,consts:function(){let a,t,n,i,s,l,r,c,m,g,C,E,T;return a=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,t=$localize`:␟3501a14ee1e89ea7009e8c9d1d6796a9ac9c3718␟4954033536980360307:Booking title is required.`,n=$localize`:␟04cfb5fd033651743bc4b9408bd52ba4ee894070␟3158758063619980932:Date${"\ufffd#23\ufffd"}:START_TAG_SPAN:*${"\ufffd/#23\ufffd"}:CLOSE_TAG_SPAN:`,i=$localize`:␟407bcc42df8640bf3b85c58145c8d24572bb47b6␟6682406734296000735: Date and time must be in the future `,s=$localize`:␟02d39ddac5bbf95c424df03d5f0d22cc257556bd␟4735431816432396893: Start Time${"\ufffd#30\ufffd"}:START_TAG_SPAN:*${"\ufffd/#30\ufffd"}:CLOSE_TAG_SPAN:`,l=$localize`:␟96ca8377bef76dbcd3eb3b4d39e5414763c7033b␟7899923133926994657: End Time${"\ufffd#35\ufffd"}:START_TAG_SPAN:*${"\ufffd/#35\ufffd"}:CLOSE_TAG_SPAN:`,r=$localize`:␟ee6b1f617dd5320b23fbed018c38ac092db5e40a␟3413004253239957216:Single`,c=$localize`:␟4c90059afafb7e160384d9f512797c95bb95c6dc␟8623978917681527907:Group`,m=$localize`:␟8a5018aa2d4dd0e8a98f4499d4b7b4a9255441a5␟8093595438228616861: All Day `,g=$localize`:␟f1701d7a0d6bfb739979f9e406793d97acd138e3␟8675972661523566351: Require locker `,C=$localize`:␟60ae849c087ccc322073478a12b2504433fbdd61␟9086691296106045671:Group Members`,E=$localize`:␟654c7e59b2003acf985bee710bad11e8cdd461f8␟6078724721705612215:Desk`,T=$localize`:␟1bdfc0dfd2ac89f5d0d2af3a66e5e959d094b39c␟8637135334686190699:Request Asset`,[["class","p-0 sm:py-4 sm:px-16 divide-y divide-gray-300 space-y-2",3,"formGroup",4,"ngIf"],[1,"p-0","sm:py-4","sm:px-16","divide-y","divide-gray-300","space-y-2",3,"formGroup"],["class","flex items-center",4,"ngIf"],[1,"p-2"],[1,"space-x-2","flex","items-center","mb-4"],[1,"bg-black/20","rounded-full","h-6","w-6","flex","items-center","justify-center"],[1,"text-xl"],a,["class","w-full",4,"ngIf"],[1,"flex","items-center","flex-wrap","sm:space-x-2"],[1,"flex-1","min-w-[256px]"],["for","title"],["appearance","outline",1,"w-full"],["matInput","","name","title","formControlName","title","placeholder","e.g. Focus Time"],t,["for","date"],n,["name","date","formControlName","date",3,"to"],i,[1,"flex","items-center","space-x-2"],[1,"flex-1","w-1/3"],["for","start-time"],s,["name","start-time",3,"ngModel","ngModelOptions","disabled","ngModelChange"],[1,"flex-1","w-1/3","relative"],["for","end-time"],l,["name","end-time","formControlName","duration",3,"time","max","min","step","force"],["formControlName","all_day","class","absolute -top-2 right-0",4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],["class","p-2",4,"ngIf"],[1,"flex","items-center"],["matRipple","",1,"relative","h-16","flex","items-center","justify-center","flex-1","space-x-2",3,"click"],[1,"text-2xl"],[1,""],r,[1,"absolute","h-2","inset-x-0","bottom-0","!m-0"],c,[1,"w-full"],["formControlName","user"],["formControlName","all_day",1,"absolute","-top-2","right-0"],m,[3,"ngModel","ngModelOptions","ngModelChange"],g,[1,"space-x-2","flex","items-center"],C,[1,"flex-1","w-px"],[1,"overflow-hidden"],[1,"mt-4",3,"ngModel","ngModelOptions","ngModelChange"],E,["formControlName","resources"],["class","text-center rounded px-2 py-1 bg-yellow-400 shadow text-xs",4,"ngIf"],[1,"text-center","rounded","px-2","py-1","bg-yellow-400","shadow","text-xs"],T,["formControlName","assets",3,"date","duration"]]},template:function(t,n){1&t&&e.YNc(0,tr,43,24,"div",0),2&t&&e.Q6J("ngIf",n.form)},dependencies:[_.O5,v.o,w.KE,w.TO,h.wG,D.Nt,L.oG,V.Q,ee.B,te.N,Ae.E,gt.d,Jl.A,Zt.k,d.Fj,d.JJ,d.JL,d.On,d.sg,d.u,_.Ov],encapsulation:2}),o})(),or=(()=>{class o{get form(){return this._state.form}constructor(t,n,i,s,l){this._state=t,this._router=n,this._org=i,this._bottom_sheet=s,this._settings=l,this.level="",this.levels=[],this.clearForm=()=>{this.level=this._org.building.id,this._state.clearForm()},this.viewConfirm=()=>{if(!this.form.valid)return(0,u.cB)(`Some fields are invalid. [${(0,u.RD)(this.form).join(", ")}]`);this.sheet_ref=this._bottom_sheet.open(Wl),this.sheet_ref.instance.show_close=!0,this.sheet_ref.afterDismissed().subscribe(r=>{r&&(this._state.setView("success"),this._router.navigate(["/book","new-desks","success"]))})}}ngOnInit(){var t=this;return(0,f.Z)(function*(){yield t._org.initialised.pipe((0,N.P)(n=>n)),yield t._org.active_levels.pipe((0,N.P)(n=>n?.length>0)),t._state.setOptions({type:"desk"}),t.level=t._org.building?.id,t.levels=[{id:t._org.building?.id,name:"Any Level"},...t._org.levelsForBuilding(t._org.building)],(0,Te.Z)(t.form.value.date,Date.now())&&t.form.patchValue({date:(0,Nt.Z)(Date.now()).valueOf()})})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.fy),e.Y36(F.F0),e.Y36(O.w7),e.Y36($.ch),e.Y36(u.gb))},o.\u0275cmp=e.Xpm({type:o,selectors:[["new-desk-flow-form"]],decls:9,vars:1,consts:function(){let a,t;return a=$localize`:␟4bea0720f004b37b457bf013e0b7f72a2adcb9b1␟7639597883564022112: Book Desk `,t=$localize`:␟ba76c84c2e66f5a18f3856c7839505c55fba682f␟1406658621282821522: Confirm Desk `,[[1,"h-full","w-full","bg-gray-100","dark:bg-neutral-600","overflow-auto"],[1,"max-w-full","w-[48rem]","mx-auto","sm:my-4","bg-white","dark:bg-neutral-700","border","border-gray-300","dark:border-neutral-500"],[1,"w-full","p-4","sm:py-4","sm:px-16","text-2xl","font-medium","border-b","border-gray-300","dark:border-neutral-500"],a,[3,"form"],[1,"sm:mb-2","border-b","border-gray-300","dark:border-neutral-500","w-full"],[1,"flex","flex-col","sm:flex-row","items-center","sm:space-x-2","p-2","sm:px-16","sm:mb-2"],["btn","","name","open-desk-confirm","matRipple","","confirm","",1,"w-full","sm:w-auto",3,"click"],t]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e.SDv(3,3),e.qZA(),e._UZ(4,"new-desk-form-details",4)(5,"div",5),e.TgZ(6,"section",6)(7,"button",7),e.NdJ("click",function(){return n.viewConfirm()}),e.SDv(8,8),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("form",n.form))},dependencies:[h.wG,nr],encapsulation:2}),o})();var oe=p(9497),Et=p(158);function ir(o,a){if(1&o&&(e.tHW(0,6,1),e._UZ(1,"span",13),e.N_p()),2&o){const t=e.oxw();e.xp6(1),e.pQV((null==t.last_event||null==t.last_event.attendees?null:t.last_event.attendees.length)+1),e.QtT(0)}}function ar(o,a){if(1&o&&(e.tHW(0,6,2),e._UZ(1,"span",14),e.N_p()),2&o){const t=e.oxw();e.xp6(1),e.pQV(null==t.last_event||null==t.last_event.extension_data||null==t.last_event.extension_data.assets?null:t.last_event.extension_data.assets.length),e.QtT(0)}}function sr(o,a){if(1&o&&(e.TgZ(0,"div",15)(1,"a",16),e.ALo(2,"sanitize"),e._UZ(3,"img",17),e.TgZ(4,"span"),e.SDv(5,18),e.qZA()(),e.TgZ(6,"a",19),e.ALo(7,"sanitize"),e._UZ(8,"img",20),e.TgZ(9,"span"),e.SDv(10,21),e.qZA()(),e.TgZ(11,"a",22),e.ALo(12,"safe"),e.TgZ(13,"app-icon",23),e._uU(14,"download"),e.qZA(),e.TgZ(15,"span"),e.SDv(16,24),e.qZA()()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("href",e.xi3(2,3,t.outlook_link,"url"),e.LSH),e.xp6(5),e.Q6J("href",e.xi3(7,6,t.google_link,"url"),e.LSH),e.xp6(5),e.Q6J("href",e.xi3(12,9,t.ical_link,"url"),e.LSH)}}const lr=function(){return["/"]};let rr=(()=>{class o{get location(){const t=this.last_event?.extension_data?.booking_asset;return t&&t.zone?`, ${t.zone.display_name||t.zone.name||t.zone.id}`:""}get last_event(){return this._state.last_success}get show_links(){return this._settings.get("app.desks.show_calendar_links")}constructor(t,n){this._state=t,this._settings=n,this.outlook_link="",this.google_link="",this.ical_link="",this.viewCalendarLinks=()=>this._state.openBookingLinkModal()}ngOnInit(){this.outlook_link=(0,oe.Y$)(this.last_event),this.google_link=(0,oe.T$)(this.last_event),this.ical_link=(0,oe.KS)(this.last_event)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.fy),e.Y36(u.gb))},o.\u0275cmp=e.Xpm({type:o,selectors:[["new-desk-flow-success"]],decls:16,vars:20,consts:function(){let a,t,n,i,s,l;return a=$localize`:␟56ae814b08614e0ea7d03f8c2f6deb8385091857␟3615288463984354959: ${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd1\ufffd"}:INTERPOLATION_1: Booked! `,t=$localize`:␟44c59d98706bc456a0feecbb41601eec38da367e␟1969482015227334006: Great, thanks! `,n=$localize`:␟9dd07d9578d948bb44744aaaae6b1d85c9a31c93␟5367460715325618232: Your ${"\ufffd*7:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_SPAN: group of ${"\ufffd0:1\ufffd"}:INTERPOLATION: ${"[\ufffd/#1:1\ufffd\ufffd/*7:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*8:2\ufffd]"}:CLOSE_TAG_SPAN: desk${"\ufffd0\ufffd"}:INTERPOLATION_1: has been successfully booked ${"\ufffd*8:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_SPAN_1: including ${"\ufffd0:2\ufffd"}:INTERPOLATION_2: asset(s) ${"[\ufffd/#1:1\ufffd\ufffd/*7:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*8:2\ufffd]"}:CLOSE_TAG_SPAN: for the ${"\ufffd1\ufffd"}:INTERPOLATION_3: at ${"\ufffd2\ufffd"}:INTERPOLATION_4:-${"\ufffd3\ufffd"}:INTERPOLATION_5:. `,n=e.Zx4(n),i=$localize`:␟11765fae755306c1287745a7ddb4461aae072a68␟7547869007893180695:Add to Outlook`,s=$localize`:␟fa6bd0f777a40a0f26b09751bf006c7337d547ac␟2479867054818994962:Add to Google Calendar`,l=$localize`:␟1af54061e7f4bcfb1048ffaa05c9b8f7c4b41679␟4894641609416495396:Download iCal File`,[[1,"absolute","inset-0","bg-white","dark:bg-neutral-600","flex","flex-col","z-50"],[1,"flex-1","flex","flex-col","items-center","justify-center","space-y-2","p-8"],[1,"text-2xl","font-medium","text-center"],a,["src","assets/icons/success.svg"],[1,"text-center"],n,["group","",4,"ngIf"],["assets","",4,"ngIf"],["class","flex flex-col items-center space-y-4 p-4 relative",4,"ngIf"],[1,"p-2","w-full","border-t","border-gray-200","dark:border-neutral-500","mt-4","flex","items-center","justify-center"],["btn","","name","desk-confirm-continue","matRipple","",1,"w-full","max-w-[32rem]","mx-auto",3,"routerLink"],t,["group",""],["assets",""],[1,"flex","flex-col","items-center","space-y-4","p-4","relative"],["btn","","matRipple","","name","desk-outlook-link","target","_blank","rel","noopener noreferer",1,"flex","items-center","p-2","space-x-2","pr-4","w-64","rounded","inverse",3,"href"],["src","assets/icons/outlook.svg",1,"w-6"],i,["btn","","matRipple","","name","desk-google-link","target","_blank","rel","noopener noreferer",1,"flex","items-center","p-2","space-x-2","pr-4","w-64","rounded","inverse",3,"href"],["src","assets/icons/gcal.svg",1,"w-6"],s,["btn","","matRipple","","name","desk-ical-link","target","_blank","rel","noopener noreferer",1,"flex","items-center","p-2","space-x-2","pr-4","w-64","rounded","inverse",3,"href"],[1,"text-xl"],l]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"main",1)(2,"h2",2),e.SDv(3,3),e.qZA(),e._UZ(4,"img",4),e.TgZ(5,"p",5),e.tHW(6,6),e.YNc(7,ir,2,1,"span",7),e.YNc(8,ar,2,1,"span",8),e.ALo(9,"date"),e.ALo(10,"date"),e.ALo(11,"date"),e.N_p(),e.qZA(),e.YNc(12,sr,17,12,"div",9),e.qZA(),e.TgZ(13,"footer",10)(14,"a",11),e.SDv(15,12),e.qZA()()()),2&t&&(e.xp6(3),e.pQV(n.last_event.asset_name||n.last_event.asset_id)(n.location),e.QtT(3),e.xp6(4),e.Q6J("ngIf",null==n.last_event||null==n.last_event.attendees?null:n.last_event.attendees.length),e.xp6(1),e.Q6J("ngIf",null==n.last_event||null==n.last_event.extension_data||null==n.last_event.extension_data.assets?null:n.last_event.extension_data.assets.length),e.xp6(3),e.pQV(null!=n.last_event&&null!=n.last_event.attendees&&n.last_event.attendees.length?"s":"")(e.xi3(9,10,n.last_event.date,"mediumDate"))(e.xi3(10,13,n.last_event.date,"shortTime"))(e.xi3(11,16,n.last_event.date+60*n.last_event.duration*1e3,"shortTime")),e.QtT(6),e.xp6(1),e.Q6J("ngIf",n.show_links),e.xp6(2),e.Q6J("routerLink",e.DdM(19,lr)))},dependencies:[_.O5,v.o,h.wG,F.rH,_.uU,Et.y,ye.n],encapsulation:2}),o})();function _r(o,a){1&o&&(e.ynx(0),e._UZ(1,"new-desk-flow-success"),e.BQk())}function cr(o,a){1&o&&(e.ynx(0),e._UZ(1,"new-desk-flow-form"),e.BQk())}let dr=(()=>{class o extends u.cx{get view(){return this._state.view}get last_success(){return this._state.last_success}constructor(t,n,i){super(),this._state=t,this._route=n,this._org=i}ngOnInit(){var t=this;return(0,f.Z)(function*(){yield t._org.initialised.pipe((0,N.P)(n=>n)).toPromise(),t._state.loadForm(),t._state.setOptions({type:"desk"}),t._state.form.patchValue({booking_type:"desk"}),t.subscription("route.params",t._route.paramMap.subscribe(n=>{n.has("step")&&t._state.setView(n.get("step"))})),t.subscription("route.query",t._route.queryParamMap.subscribe(function(){var n=(0,f.Z)(function*(i){if(i.has("success")&&t._state.setView(i.get("success")),i.has("asset_id")){const s=i.get("asset_id");let r=(yield t._state.resources.pipe((0,y.q)(1)).toPromise()).find(c=>c.id===s);if(!r)return(0,u.QD)("Unable to find desk with given asset ID.");t._state.form.patchValue({resources:[new O.nk({id:r.id,name:r.name||r.id})]})}});return function(i){return n.apply(this,arguments)}}()))})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.fy),e.Y36(F.gz),e.Y36(O.w7))},o.\u0275cmp=e.Xpm({type:o,selectors:[["placeos-new-book-desk-flow"]],features:[e.qOj],decls:4,vars:2,consts:[[1,"bg-white","dark:bg-neutral-900","h-full","w-full","z-50"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.ynx(1,1),e.YNc(2,_r,2,0,"ng-container",2),e.YNc(3,cr,2,0,"ng-container",3),e.BQk(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngSwitch",n.view),e.xp6(1),e.Q6J("ngSwitchCase","success"))},dependencies:[_.RF,_.n9,_.ED,or,rr],styles:["[_nghost-%COMP%]{height:100%;width:100%}\n/*# sourceMappingURL=new-desk-flow.component.ts-angular-inline--114.css.map*/"]}),o})();var ur=p(9761);let pr=(()=>{class o{constructor(t){this._router=t}onDone(){this._router.navigate(["/"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(F.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["placeos-book-space-flow"]],decls:3,vars:0,consts:[[1,"bg-gray-100","dark:bg-neutral-600","h-full","w-full","overflow-auto"],[1,"w-full","h-full","sm:h-auto","max-w-[640px]","mx-auto","sm:my-4","bg-white","shadow","border","border-gray-200","dark:border-neutral-500","overflow-hidden"],[3,"done"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"invite-visitor-form",2),e.NdJ("done",function(){return n.onDone()}),e.qZA()()())},dependencies:[ur.C],styles:["[_nghost-%COMP%]{position:relative;height:100%;width:100%}\n/*# sourceMappingURL=visitor-flow.component.ts-angular-inline--116.css.map*/"]}),o})();function mr(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.dismiss())}),e.TgZ(1,"app-icon"),e._uU(2,"close"),e.qZA()()}}function gr(o,a){1&o&&e._UZ(0,"mat-spinner",16)}function fr(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"div",21)(2,"app-icon"),e._uU(3,"arrow_upward"),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.qZA()(),e.BQk()),2&o){const t=a.$implicit;e.xp6(5),e.Oqu(t)}}function hr(o,a){if(1&o&&(e.TgZ(0,"section",17)(1,"app-icon",6),e._uU(2,"done"),e.qZA(),e.TgZ(3,"div",7)(4,"h3",18),e._uU(5),e.qZA(),e.TgZ(6,"div",8)(7,"app-icon"),e._uU(8,"person"),e.qZA(),e.TgZ(9,"span"),e.SDv(10,19),e.qZA()(),e.TgZ(11,"div",8)(12,"app-icon"),e._uU(13,"place"),e.qZA(),e.TgZ(14,"div"),e._uU(15),e.qZA()(),e.YNc(16,fr,6,1,"ng-container",20),e.qZA()()),2&o){const t=e.oxw();e.xp6(5),e.hij(" ",(null==t.booking_asset?null:t.booking_asset.name)||(null==t.booking_asset?null:t.booking_asset.id)||""," "),e.xp6(10),e.Oqu(t.location),e.xp6(1),e.Q6J("ngForOf",t.booking_asset.features)}}function Cr(o,a){if(1&o&&(e.TgZ(0,"div",25)(1,"div",26),e._uU(2),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",t.amount," "),e.xp6(2),e.Oqu(t.name)}}function xr(o,a){if(1&o&&(e.TgZ(0,"section",22)(1,"app-icon",6),e._uU(2,"done"),e.qZA(),e.TgZ(3,"div",7)(4,"h3"),e.SDv(5,23),e.qZA(),e.YNc(6,Cr,5,2,"div",24),e.qZA()()),2&o){const t=e.oxw();e.xp6(5),e.pQV(t.assets_count),e.QtT(5),e.xp6(1),e.Q6J("ngForOf",t.assets)}}function vr(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.postForm())}),e.SDv(1,28),e.qZA()}}let Fr=(()=>{class o extends u.cx{get booking(){return this._state.form.value}get assets(){return this.booking.assets||null}get assets_count(){return this.assets?.length?this.assets.reduce((t,n)=>t+n.amount,0):0}get booking_asset(){return this.booking.booking_asset}get location(){const t=this._org.buildings.find(i=>i.id===this.booking_asset?.zone?.parent_id),n=this._org.levels.find(i=>i.id===this.booking_asset?.zone?.id);return`${n?.display_name||n?.name}${t?",":""} ${t?.address||t?.display_name||t?.name||""}`}constructor(t,n,i){var s;super(),s=this,this._state=t,this._org=n,this._sheet_ref=i,this.show_close=!1,this.loading=this._state.loading,this.postForm=(0,f.Z)(function*(){yield s._state.postForm(),s.dismiss(!0)}),this.dismiss=l=>this._sheet_ref?.dismiss(l)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.fy),e.Y36(O.w7),e.Y36($.oL,8))},o.\u0275cmp=e.Xpm({type:o,selectors:[["new-parking-flow-confirm"]],inputs:{show_close:"show_close"},features:[e.qOj],decls:30,vars:21,consts:function(){let a,t,n,i;return a=$localize`:␟6ac3300544e83db3f24ae1c1021893d886c0a744␟6045786788889963176: Confirm Parking Reservation `,t=$localize`:␟f07b4a195d4f2e886e6648ea01409e8747490a41␟3161111465515562669:Car Park`,n=$localize`:␟baacc4ba232f9320250b9871e259ccb844857f15␟3853466990357051325:${"\ufffd0\ufffd"}:INTERPOLATION: Asset(s)`,i=$localize`:␟0ad83be7464a0a2e8d100342e144bc3fbc789f9d␟3141803775366633134: Confirm `,[["close","","icon","","matRipple","",3,"click",4,"ngIf"],[1,"flex","items-center","justify-between","px-2"],[1,"text-2xl","font-medium","mb-2"],a,["diameter","32",4,"ngIf"],["period","",1,"flex","space-x-1","py-4","px-2"],[1,"text-success"],["details","",1,"leading-6"],[1,"flex","items-center","space-x-2"],["date",""],["time",""],["resource","","class","flex space-x-1 py-4 px-2 border-t",4,"ngIf"],["assets","","class","flex space-x-1 py-4 px-2 border-t",4,"ngIf"],[1,"p-2","w-full","border-t","border-gray-200","mt-4"],["confirm","","btn","","matRipple","","class","w-full",3,"click",4,"ngIf"],["close","","icon","","matRipple","",3,"click"],["diameter","32"],["resource","",1,"flex","space-x-1","py-4","px-2","border-t"],["name",""],t,[4,"ngFor","ngForOf"],["features","",1,"flex","items-center","space-x-2"],["assets","",1,"flex","space-x-1","py-4","px-2","border-t"],n,["class","flex space-x-2",4,"ngFor","ngForOf"],[1,"flex","space-x-2"],[1,"h-5","w-5","bg-gray-100","rounded-full"],["confirm","","btn","","matRipple","",1,"w-full",3,"click"],i]},template:function(t,n){1&t&&(e.YNc(0,mr,3,0,"button",0),e.TgZ(1,"header",1)(2,"h2",2),e.SDv(3,3),e.qZA(),e.YNc(4,gr,1,0,"mat-spinner",4),e.ALo(5,"async"),e.qZA(),e.TgZ(6,"section",5)(7,"app-icon",6),e._uU(8,"done"),e.qZA(),e.TgZ(9,"div",7)(10,"h3"),e._uU(11),e.qZA(),e.TgZ(12,"div",8)(13,"app-icon"),e._uU(14,"calendar_today"),e.qZA(),e.TgZ(15,"div",9),e._uU(16),e.ALo(17,"date"),e.qZA()(),e.TgZ(18,"div",8)(19,"app-icon"),e._uU(20,"schedule"),e.qZA(),e.TgZ(21,"div",10),e._uU(22),e.ALo(23,"date"),e.ALo(24,"date"),e.qZA()()()(),e.YNc(25,hr,17,3,"section",11),e.YNc(26,xr,7,2,"section",12),e.TgZ(27,"footer",13),e.YNc(28,vr,2,0,"button",14),e.ALo(29,"async"),e.qZA()),2&t&&(e.Q6J("ngIf",n.show_close),e.xp6(4),e.Q6J("ngIf",e.lcZ(5,8,n.loading)),e.xp6(7),e.Oqu(n.booking.title||"~Untitled~"),e.xp6(5),e.Oqu(e.xi3(17,10,n.booking.date,"fullDate")),e.xp6(6),e.hij(" ",n.booking.all_day?"All Day":e.xi3(23,13,n.booking.date,"shortTime")+" - "+e.xi3(24,16,n.booking.date+60*n.booking.duration*1e3,"h:mm a (z)")," "),e.xp6(3),e.Q6J("ngIf",null==n.booking_asset?null:n.booking_asset.id),e.xp6(1),e.Q6J("ngIf",null==n.assets?null:n.assets.length),e.xp6(2),e.Q6J("ngIf",!e.lcZ(29,19,n.loading)))},dependencies:[_.sg,_.O5,v.o,h.wG,M.Ou,_.Ov,_.uU],styles:["section[_ngcontent-%COMP%] > app-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-top:.3rem}h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:medium;margin:.5rem 0}\n/*# sourceMappingURL=parking-flow-confirm.component.ts-angular-inline--118.css.map*/"]}),o})();var Tr=p(1474);function br(o,a){if(1&o&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.display_name||t.name," ")}}function Or(o,a){1&o&&(e.TgZ(0,"mat-checkbox",28),e.SDv(1,29),e.qZA())}const St=function(){return{standalone:!0}};function Ar(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"label",4),e.tHW(4,5),e._UZ(5,"span"),e.N_p(),e.qZA(),e.TgZ(6,"mat-form-field",6)(7,"mat-select",7),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.setBuilding(i))}),e.ALo(8,"async"),e.YNc(9,br,2,2,"mat-option",8),e.ALo(10,"async"),e.qZA(),e.TgZ(11,"mat-error"),e.SDv(12,9),e.qZA()()()(),e.TgZ(13,"div",2)(14,"div",3)(15,"label",4),e.tHW(16,10),e._UZ(17,"span"),e.N_p(),e.qZA(),e.TgZ(18,"mat-form-field",6),e._UZ(19,"input",11),e.TgZ(20,"mat-error"),e.SDv(21,12),e.qZA()()(),e.TgZ(22,"div",3)(23,"label",13),e.tHW(24,14),e._UZ(25,"span"),e.N_p(),e.qZA(),e.TgZ(26,"a-date-field",15),e.SDv(27,16),e.qZA()()(),e.TgZ(28,"div",17)(29,"div",18)(30,"label",19),e.tHW(31,20),e._UZ(32,"span"),e.N_p(),e.qZA(),e.TgZ(33,"a-time-field",21),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.form.patchValue({date:i}))}),e.qZA()(),e.TgZ(34,"div",22)(35,"label",23),e.tHW(36,24),e._UZ(37,"span"),e.N_p(),e.qZA(),e._UZ(38,"a-duration-field",25),e.YNc(39,Or,2,0,"mat-checkbox",26),e.qZA()()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(7),e.Q6J("ngModel",e.lcZ(8,9,t.building))("ngModelOptions",e.DdM(13,St)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(10,11,t.building_list)),e.xp6(24),e.Q6J("ngModel",t.form.value.date)("ngModelOptions",e.DdM(14,St)),e.xp6(5),e.Q6J("time",null==t.form||null==t.form.value?null:t.form.value.date)("max",t.max_duration),e.xp6(1),e.Q6J("ngIf",t.allow_all_day)}}let wr=(()=>{class o extends u.cx{get max_duration(){return this._settings.get("app.bookings.max_duration")||480}get allow_all_day(){return this._settings.get("app.bookings.allow_all_day")}constructor(t,n){super(),this._settings=t,this._org=n,this.building=this._org.active_building,this.building_list=this._org.building_list,this.setBuilding=i=>this._org.building=i}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.gb),e.Y36(O.w7))},o.\u0275cmp=e.Xpm({type:o,selectors:[["parking-form-details"]],inputs:{form:"form"},features:[e.qOj],decls:1,vars:1,consts:function(){let a,t,n,i,s,l,r,c,m;return a=$localize`:␟029554be61f13a5f5f40b24ff6a076e8cf3ce232␟5030059473688609624:Building${"\ufffd#5\ufffd"}:START_TAG_SPAN:*${"\ufffd/#5\ufffd"}:CLOSE_TAG_SPAN:`,t=$localize`:␟08e3d128bec28b1e0d78c758b98afd2af8a9b9db␟3928125525365975257:Building is required`,n=$localize`:␟cdeff056c80e8cb677a396ccfd5935d3ccacbaaa␟553839126299245827:Add Title${"\ufffd#17\ufffd"}:START_TAG_SPAN:*${"\ufffd/#17\ufffd"}:CLOSE_TAG_SPAN:`,i=$localize`:␟0c2de7385a88f7877e11c22c4e44db7f8ddfdc9c␟6959098405177292139:Meeting title is required.`,s=$localize`:␟04cfb5fd033651743bc4b9408bd52ba4ee894070␟3158758063619980932:Date${"\ufffd#25\ufffd"}:START_TAG_SPAN:*${"\ufffd/#25\ufffd"}:CLOSE_TAG_SPAN:`,l=$localize`:␟e06c2195d60fdee7b259bd3ff16eb3d594c42b2b␟608708688936992021: Date and time must be in the future `,r=$localize`:␟34a7595cdc15925514038224946986bfd90dc0ed␟3039786638368843634:Start Time${"\ufffd#32\ufffd"}:START_TAG_SPAN:*${"\ufffd/#32\ufffd"}:CLOSE_TAG_SPAN:`,c=$localize`:␟85d5c3a89bab9a7475a7db095089e161586cb7a1␟5960185837188220843:End Time${"\ufffd#37\ufffd"}:START_TAG_SPAN:*${"\ufffd/#37\ufffd"}:CLOSE_TAG_SPAN:`,m=$localize`:␟d7f43e20f3a729fa3de32bc7a1f709ccd722eae5␟835486935962207481: All Day `,[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"flex","items-center","flex-wrap","sm:space-x-2"],[1,"flex-1","min-w-[256px]"],["for","title"],a,["appearance","outline",1,"w-full"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],t,n,["matInput","","name","title","formControlName","title","placeholder","e.g. Team Meeting"],i,["for","date"],s,["name","date","formControlName","date"],l,[1,"flex","items-center","space-x-2"],[1,"flex-1","w-1/3"],["for","start-time"],r,["name","start-time",3,"ngModel","ngModelOptions","ngModelChange"],[1,"flex-1","w-1/3","relative"],["for","end-time"],c,["name","end-time","formControlName","duration",3,"time","max"],["formControlName","all_day","class","absolute -top-2 right-0",4,"ngIf"],[3,"value"],["formControlName","all_day",1,"absolute","-top-2","right-0"],m]},template:function(t,n){1&t&&e.YNc(0,Ar,40,15,"div",0),2&t&&e.Q6J("ngIf",n.form)},dependencies:[_.sg,_.O5,h.ey,w.KE,w.TO,J.gD,D.Nt,L.oG,V.Q,ee.B,te.N,d.Fj,d.JJ,d.JL,d.On,d.sg,d.u,_.Ov]}),o})(),Mr=(()=>{class o extends u.cx{get form(){return this._state.form}constructor(t,n,i,s){super(),this._state=t,this._settings=n,this._router=i,this._bottom_sheet=s,this.hide_block={},this.clearForm=()=>this._state.resetForm(),this.viewConfirm=()=>{if(!this.form.valid)return(0,u.cB)(`Some fields are invalid. [${(0,u.RD)(this.form).join(", ")}]`);this.sheet_ref=this._bottom_sheet.open(Fr),this.sheet_ref.instance.show_close=!0,this.sheet_ref.afterDismissed().subscribe(l=>{l&&(this._router.navigate(["/book","new-parking","success"]),this._state.setView("success"))})}}ngOnInit(){this._state.setOptions({type:"parking"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.fy),e.Y36(u.gb),e.Y36(F.F0),e.Y36($.ch))},o.\u0275cmp=e.Xpm({type:o,selectors:[["parking-flow-form"]],features:[e.qOj],decls:34,vars:8,consts:function(){let a,t,n,i,s;return a=$localize`:␟1a35d8abd8af5fbdc560fef43534a449dee57c33␟6157089537932930617: ${"\ufffd0\ufffd"}:INTERPOLATION: Parking Reservation `,t=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,n=$localize`:␟52d92107e6b2e533468a728409354191bc7b0618␟8946906119075338535:Space`,i=$localize`:␟7b837f0569edc83611ec018993bf131599b941b6␟425357839768260226: Confirm Reservation `,s=$localize`:␟a6bac7e54de03807f0b5486f4f9f9add5ec00fb2␟1889608407849557875: ${"\ufffd0\ufffd"}:INTERPOLATION: Form `,[[1,"h-full","w-full","bg-gray-100","dark:bg-neutral-600","overflow-auto"],[1,"max-w-full","w-[48rem]","mx-auto","sm:my-4","bg-white","dark:bg-neutral-700","border","border-gray-300","dark:border-neutral-500"],[1,"w-full","p-4","sm:py-4","sm:px-16","text-2xl","font-medium","border-b","border-gray-300","dark:border-neutral-500"],a,[1,"p-0","sm:py-4","sm:px-16","divide-y","divide-gray-300","space-y-2",3,"formGroup"],[1,"p-2"],[1,"space-x-2","flex","items-center"],[1,"bg-black/20","rounded-full","h-6","w-6","flex","items-center","justify-center"],[1,"text-xl"],t,[1,"flex-1","w-px"],["icon","","matRipple","",3,"click"],[1,"overflow-hidden"],[1,"mt-4",3,"form"],n,["formControlName","resources"],[1,"flex","flex-col","sm:flex-row","items-center","sm:space-x-2","p-2"],["btn","","matRipple","","confirm","",1,"mb-2","sm:mb-0","w-full","sm:w-auto",3,"click"],i,["btn","","matRipple","","clear-form","",1,"inverse","w-full","sm:w-auto",3,"click"],s]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e.SDv(3,3),e.qZA(),e.TgZ(4,"form",4)(5,"section",5)(6,"h3",6)(7,"div",7),e._uU(8," 1 "),e.qZA(),e.TgZ(9,"div",8),e.SDv(10,9),e.qZA(),e._UZ(11,"div",10),e.TgZ(12,"button",11),e.NdJ("click",function(){return n.hide_block.details=!n.hide_block.details}),e.TgZ(13,"app-icon"),e._uU(14),e.qZA()()(),e.TgZ(15,"div",12),e._UZ(16,"parking-form-details",13),e.qZA()(),e.TgZ(17,"section",5)(18,"h3",6)(19,"div",7),e._uU(20," 2 "),e.qZA(),e.TgZ(21,"div",8),e.SDv(22,14),e.qZA(),e._UZ(23,"div",10),e.TgZ(24,"button",11),e.NdJ("click",function(){return n.hide_block.space=!n.hide_block.space}),e.TgZ(25,"app-icon"),e._uU(26),e.qZA()()(),e.TgZ(27,"div",12),e._UZ(28,"parking-space-list-field",15),e.qZA()(),e.TgZ(29,"section",16)(30,"button",17),e.NdJ("click",function(){return n.viewConfirm()}),e.SDv(31,18),e.qZA(),e.TgZ(32,"button",19),e.NdJ("click",function(){return n.clearForm()}),e.SDv(33,20),e.qZA()()()()()),2&t&&(e.xp6(3),e.pQV(n.form.value.id?"Edit":"Book"),e.QtT(3),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(10),e.Oqu(n.hide_block.details?"expand_more":"expand_less"),e.xp6(1),e.Q6J("@show",n.hide_block.details?"hide":"show"),e.xp6(1),e.Q6J("form",n.form),e.xp6(10),e.Oqu(n.hide_block.space?"expand_more":"expand_less"),e.xp6(1),e.Q6J("@show",n.hide_block.space?"hide":"show"),e.xp6(6),e.pQV(n.form.value.id?"Reset":"Clear"),e.QtT(33))},dependencies:[v.o,h.wG,Tr.h,d._Y,d.JJ,d.JL,d.sg,d.u,wr],data:{animation:[u.X7]}}),o})();const Zr=function(){return["/"]};let Nr=(()=>{class o{get location(){const t=this.last_event?.extension_data?.booking_asset;return t&&t.zone?`, ${t.zone.display_name||t.zone.name||t.zone.id}`:""}get last_event(){return this._state.last_success}constructor(t){this._state=t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.fy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["parking-flow-success"]],decls:14,vars:16,consts:function(){let a,t,n;return a=$localize`:␟21cad50e7a6d698f282551d4331fbd036f1dbfbd␟8243507933110259384:Parking Space Confirmed!`,t=$localize`:␟25c4a16c36095489227adae7799a3c73d367be35␟8902696609937191558: Your ${"\ufffd#6\ufffd"}:START_TAG_SPAN: parking space reservation for ${"\ufffd0\ufffd"}:INTERPOLATION: at ${"\ufffd1\ufffd"}:INTERPOLATION_1:, ${"\ufffd/#6\ufffd"}:CLOSE_TAG_SPAN:has been successfully booked for the ${"\ufffd2\ufffd"}:INTERPOLATION_2: at ${"\ufffd3\ufffd"}:INTERPOLATION_3:-${"\ufffd4\ufffd"}:INTERPOLATION_4:. `,n=$localize`:␟ebdb7427e661a3194bc5c3619482b7d363ddbb3c␟5973872115846779659: Great, thanks! `,[[1,"absolute","inset-0","bg-white","flex","flex-col","z-50"],[1,"flex-1","flex","flex-col","items-center","justify-center","space-y-2","p-8"],[1,"text-2xl","font-medium"],a,[1,"text-center","max-w-[32rem]"],t,["src","assets/icons/parking-success.svg"],[1,"p-2","w-full","border-t","border-gray-200","mt-4","flex","items-center","justify-center"],["button","","btn","","matRipple","",1,"w-full","max-w-[32rem]",3,"routerLink"],n]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"main",1)(2,"h2",2),e.SDv(3,3),e.qZA(),e.TgZ(4,"p",4),e.tHW(5,5),e._UZ(6,"span"),e.ALo(7,"date"),e.ALo(8,"date"),e.ALo(9,"date"),e.N_p(),e.qZA(),e._UZ(10,"img",6),e.qZA(),e.TgZ(11,"footer",7)(12,"a",8),e.SDv(13,9),e.qZA()()()),2&t&&(e.xp6(9),e.pQV(n.last_event.asset_name)(n.location)(e.xi3(7,6,n.last_event.date,"mediumDate"))(e.xi3(8,9,n.last_event.date,"shortTime"))(e.xi3(9,12,n.last_event.date+60*n.last_event.duration*1e3,"shortTime")),e.QtT(5),e.xp6(3),e.Q6J("routerLink",e.DdM(15,Zr)))},dependencies:[h.wG,F.rH,_.uU]}),o})();function Er(o,a){1&o&&e._UZ(0,"parking-flow-success")}function Sr(o,a){1&o&&e._UZ(0,"parking-flow-confirm")}function yr(o,a){1&o&&e._UZ(0,"parking-flow-form")}let kr=(()=>{class o extends u.cx{get view(){return this._state.view}get last_success(){return this._state.last_success}constructor(t,n){super(),this._state=t,this._route=n}ngOnInit(){this._state.loadForm(),this._state.form||this._state.newForm(),this._state.setOptions({type:"parking"}),this._state.form.patchValue({booking_type:"parking"}),this.subscription("route.params",this._route.paramMap.subscribe(t=>{t.has("step")&&this._state.setView(t.get("step"))})),this.subscription("route.query",this._route.queryParamMap.subscribe(t=>{t.has("success")&&this._state.setView("success")}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.fy),e.Y36(F.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["placeos-new-parking-flow"]],features:[e.qOj],decls:4,vars:3,consts:[[1,"bg-white","dark:bg-neutral-900","h-full","w-full","z-50",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Er,1,0,"parking-flow-success",1),e.YNc(2,Sr,1,0,"parking-flow-confirm",1),e.YNc(3,yr,1,0,"parking-flow-form",2),e.qZA()),2&t&&(e.Q6J("ngSwitch",n.view),e.xp6(1),e.Q6J("ngSwitchCase","success"),e.xp6(1),e.Q6J("ngSwitchCase","confirm"))},dependencies:[_.RF,_.n9,_.ED,At,Mr,Nr],styles:["[_nghost-%COMP%]{height:100%;width:100%}\n/*# sourceMappingURL=new-parking-flow.component.ts-angular-inline--117.css.map*/"]}),o})();const Pr=function(){return["/"]};let Lr=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["code-flow-success"]],decls:13,vars:11,consts:[[1,"absolute","inset-0","bg-white","dark:bg-neutral-600","flex","flex-col","z-50"],[1,"flex-1","flex","flex-col","items-center","justify-center","space-y-2","p-8"],[1,"text-2xl","font-medium"],["src","assets/icons/success.svg"],[1,"text-center","max-w-[32rem]"],[1,"p-2","w-full","border-t","border-gray-200","dark:bg-neutral-500","mt-4","flex","items-center","justify-center"],["button","","btn","","matRipple","",1,"w-full","max-w-[32rem]",3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"main",1)(2,"h2",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"img",3),e.TgZ(6,"p",4),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"footer",5)(10,"a",6),e._uU(11),e.ALo(12,"translate"),e.qZA()()()),2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,4,"WPA.RESOURCE_CHECKED_IN")," "),e.xp6(4),e.hij(" ",e.lcZ(8,6,"WPA.CHECKED_IN")," "),e.xp6(3),e.Q6J("routerLink",e.DdM(10,Pr)),e.xp6(1),e.hij(" ",e.lcZ(12,8,"WPA.BOOKING_DONE_CONTINUE")," "))},dependencies:[h.wG,F.rH,fe.X$]}),o})();function Ir(o,a){1&o&&(e.ynx(0),e._uU(1," Booking has not started yet. Please try again once the booking has commenced. "),e.BQk())}function Rr(o,a){1&o&&(e.ynx(0),e._uU(1," You have booking with a difference resource. "),e.BQk())}function Dr(o,a){1&o&&(e.ynx(0),e._uU(1," You do not have a booking. Would you like to book the set resource? "),e.BQk())}const qr=function(){return["/book","code"]},yt=function(o){return{asset_id:o}};function Ur(o,a){if(1&o&&(e.TgZ(0,"a",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=e.oxw();e.Q6J("routerLink",e.DdM(5,qr))("queryParams",e.VKq(6,yt,t.asset_id)),e.xp6(1),e.hij(" ",e.lcZ(2,3,"WPA.TRY_AGAIN")," ")}}const $r=function(){return["/book","new-desk"]};function Kr(o,a){if(1&o&&(e.TgZ(0,"a",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=e.oxw();e.Q6J("routerLink",e.DdM(5,$r))("queryParams",e.VKq(6,yt,t.asset_id)),e.xp6(1),e.hij(" ",e.lcZ(2,3,"WPA.BOOK")," ")}}const Gr=function(){return["/"]};let Wr=(()=>{class o extends u.cx{constructor(t,n){super(),this._route=t,this._state=n,this.type="other",this.asset=null}ngOnInit(){var t=this;this.subscription("route.query",this._route.queryParamMap.subscribe(function(){var n=(0,f.Z)(function*(i){t.type=i.get("type")});return function(i){return n.apply(this,arguments)}}()))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(F.gz),e.Y36(b.fy))},o.\u0275cmp=e.Xpm({type:o,selectors:[["code-flow-success"]],features:[e.qOj],decls:17,vars:13,consts:[[1,"absolute","inset-0","bg-white","dark:bg-neutral-600","flex","flex-col","z-50"],[1,"flex-1","flex","flex-col","items-center","justify-center","space-y-2","p-8"],[1,"text-2xl","font-medium"],[1,"py-4"],["src","assets/icons/not-found.svg",1,"h-64"],[1,"text-center","max-w-[32rem]",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"p-2","w-full","border-t","border-gray-200","dark:bg-neutral-500","mt-4","flex","items-center","justify-center","space-x-2"],["button","","btn","","matRipple","","class","w-full max-w-[32rem]",3,"routerLink","queryParams",4,"ngIf"],["button","","btn","","matRipple","",1,"w-full","max-w-[32rem]","inverse",3,"routerLink"],["button","","btn","","matRipple","",1,"w-full","max-w-[32rem]",3,"routerLink","queryParams"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"main",1)(2,"h2",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3),e._UZ(6,"img",4),e.qZA(),e.TgZ(7,"p",5),e.YNc(8,Ir,2,0,"ng-container",6),e.YNc(9,Rr,2,0,"ng-container",6),e.YNc(10,Dr,2,0,"ng-container",7),e.qZA()(),e.TgZ(11,"footer",8),e.YNc(12,Ur,3,8,"a",9),e.YNc(13,Kr,3,8,"a",9),e.TgZ(14,"a",10),e._uU(15),e.ALo(16,"translate"),e.qZA()()()),2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,8,"WPA.RESOURCE_CHECKED_IN_FAILED")," "),e.xp6(4),e.Q6J("ngSwitch",n.type),e.xp6(1),e.Q6J("ngSwitchCase","not_started"),e.xp6(1),e.Q6J("ngSwitchCase","wrong_resource"),e.xp6(3),e.Q6J("ngIf","not_started"===n.type),e.xp6(1),e.Q6J("ngIf","no_booking"===n.type),e.xp6(1),e.Q6J("routerLink",e.DdM(12,Gr)),e.xp6(1),e.hij(" ",e.lcZ(16,10,"COMMON.CONTINUE")," "))},dependencies:[_.O5,_.RF,_.n9,_.ED,h.wG,F.rH,fe.X$]}),o})();function Jr(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.dismiss())}),e.TgZ(1,"app-icon"),e._uU(2,"close"),e.qZA()()}}function Qr(o,a){1&o&&e._UZ(0,"mat-spinner",16)}function Br(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"div",20)(2,"app-icon"),e._uU(3,"arrow_upward"),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.qZA()(),e.BQk()),2&o){const t=a.$implicit;e.xp6(5),e.Oqu(t)}}function Yr(o,a){if(1&o&&(e.TgZ(0,"section",17)(1,"app-icon",6),e._uU(2,"done"),e.qZA(),e.TgZ(3,"div",7)(4,"h3",18),e._uU(5),e.qZA(),e.TgZ(6,"div",8)(7,"app-icon"),e._uU(8,"place"),e.qZA(),e.TgZ(9,"div"),e._uU(10),e.qZA()(),e.YNc(11,Br,6,1,"ng-container",19),e.qZA()()),2&o){const t=e.oxw();e.xp6(5),e.hij(" ",(null==t.booking_asset?null:t.booking_asset.name)||(null==t.booking_asset?null:t.booking_asset.id)||""," "),e.xp6(5),e.Oqu(t.location),e.xp6(1),e.Q6J("ngForOf",t.booking_asset.features)}}function jr(o,a){if(1&o&&(e.TgZ(0,"div",24)(1,"div",25),e._uU(2),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()),2&o){const t=a.$implicit;e.xp6(2),e.hij(" ",t.amount," "),e.xp6(2),e.Oqu(t.name)}}function Hr(o,a){if(1&o&&(e.TgZ(0,"section",21)(1,"app-icon",6),e._uU(2,"done"),e.qZA(),e.TgZ(3,"div",7)(4,"h3"),e.SDv(5,22),e.qZA(),e.YNc(6,jr,5,2,"div",23),e.qZA()()),2&o){const t=e.oxw();e.xp6(5),e.pQV(t.assets_count),e.QtT(5),e.xp6(1),e.Q6J("ngForOf",t.assets)}}function Xr(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.postForm())}),e.SDv(1,27),e.qZA()}}let kt=(()=>{class o extends u.cx{get booking(){return this._state.form.value}get assets(){return this.booking.assets||null}get assets_count(){return this.assets?.length?this.assets.reduce((t,n)=>t+n.amount,0):0}get booking_asset(){return this.booking.booking_asset}get location(){const t=this._org.buildings.find(i=>i.id===this.booking_asset?.zone?.parent_id),n=this._org.levels.find(i=>i.id===this.booking_asset?.zone?.id);return`${n?.display_name||n?.name}${t?",":""} ${t?.address||t?.display_name||t?.name||""}`}constructor(t,n,i){var s;super(),s=this,this._state=t,this._org=n,this._sheet_ref=i,this.show_close=!1,this.loading=this._state.loading,this.postForm=(0,f.Z)(function*(){try{(yield s._state.options.pipe((0,y.q)(1)).toPromise())?.group?yield s._state.postFormForGroup():yield s._state.postForm(),s.dismiss(!0)}catch(l){(0,u.cB)(l)}}),this.dismiss=l=>this._sheet_ref?.dismiss(l)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.fy),e.Y36(O.w7),e.Y36($.oL,8))},o.\u0275cmp=e.Xpm({type:o,selectors:[["locker-flow-confirm"]],inputs:{show_close:"show_close"},features:[e.qOj],decls:30,vars:21,consts:function(){let a,t,n;return a=$localize`:␟5cb1d8d18d99e0e2c93fc6b4d5da4de04b3f6df9␟5263686136994697433: Confirm Locker Booking `,t=$localize`:␟baacc4ba232f9320250b9871e259ccb844857f15␟3853466990357051325:${"\ufffd0\ufffd"}:INTERPOLATION: Asset(s)`,n=$localize`:␟0ad83be7464a0a2e8d100342e144bc3fbc789f9d␟3141803775366633134: Confirm `,[["icon","","name","close-locker-confirm","matRipple","",3,"click",4,"ngIf"],[1,"flex","items-center","justify-between","px-2"],[1,"text-2xl","font-medium","mb-2"],a,["diameter","32",4,"ngIf"],["period","",1,"flex","space-x-1","py-4","px-2"],[1,"text-success"],["details","",1,"leading-6"],[1,"flex","items-center","space-x-2"],["date",""],["time",""],["locker","","class","flex space-x-1 py-4 px-2 border-t dark:border-neutral-500",4,"ngIf"],["assets","","class","flex space-x-1 py-4 px-2 border-t dark:border-neutral-500",4,"ngIf"],[1,"p-2","w-full","border-t","border-gray-200","dark:border-neutral-500","mt-4"],["name","confirm-locker","btn","","matRipple","","class","w-full",3,"click",4,"ngIf"],["icon","","name","close-locker-confirm","matRipple","",3,"click"],["diameter","32"],["locker","",1,"flex","space-x-1","py-4","px-2","border-t","dark:border-neutral-500"],["name",""],[4,"ngFor","ngForOf"],["features","",1,"flex","items-center","space-x-2"],["assets","",1,"flex","space-x-1","py-4","px-2","border-t","dark:border-neutral-500"],t,["class","flex space-x-2",4,"ngFor","ngForOf"],[1,"flex","space-x-2"],[1,"h-5","w-5","bg-gray-100","dark:bg-neutral-600","rounded-full"],["name","confirm-locker","btn","","matRipple","",1,"w-full",3,"click"],n]},template:function(t,n){1&t&&(e.YNc(0,Jr,3,0,"button",0),e.TgZ(1,"header",1)(2,"h2",2),e.SDv(3,3),e.qZA(),e.YNc(4,Qr,1,0,"mat-spinner",4),e.ALo(5,"async"),e.qZA(),e.TgZ(6,"section",5)(7,"app-icon",6),e._uU(8,"done"),e.qZA(),e.TgZ(9,"div",7)(10,"h3"),e._uU(11),e.qZA(),e.TgZ(12,"div",8)(13,"app-icon"),e._uU(14,"calendar_today"),e.qZA(),e.TgZ(15,"div",9),e._uU(16),e.ALo(17,"date"),e.qZA()(),e.TgZ(18,"div",8)(19,"app-icon"),e._uU(20,"schedule"),e.qZA(),e.TgZ(21,"div",10),e._uU(22),e.ALo(23,"date"),e.ALo(24,"date"),e.qZA()()()(),e.YNc(25,Yr,12,3,"section",11),e.YNc(26,Hr,7,2,"section",12),e.TgZ(27,"footer",13),e.YNc(28,Xr,2,0,"button",14),e.ALo(29,"async"),e.qZA()),2&t&&(e.Q6J("ngIf",n.show_close),e.xp6(4),e.Q6J("ngIf",e.lcZ(5,8,n.loading)),e.xp6(7),e.Oqu(n.booking.title||"~Untitled~"),e.xp6(5),e.Oqu(e.xi3(17,10,n.booking.date,"fullDate")),e.xp6(6),e.hij(" ",n.booking.all_day?"All Day":e.xi3(23,13,n.booking.date,"shortTime")+" - "+e.xi3(24,16,n.booking.date+60*n.booking.duration*1e3,"h:mm a (z)")," "),e.xp6(3),e.Q6J("ngIf",null==n.booking_asset?null:n.booking_asset.id),e.xp6(1),e.Q6J("ngIf",null==n.assets?null:n.assets.length),e.xp6(2),e.Q6J("ngIf",!e.lcZ(29,19,n.loading)))},dependencies:[_.sg,_.O5,v.o,h.wG,M.Ou,_.Ov,_.uU],styles:["section[_ngcontent-%COMP%] > app-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-top:.3rem}h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:medium;margin:.5rem 0}\n/*# sourceMappingURL=locker-flow-confirm.component.ts-angular-inline--120.css.map*/"]}),o})();var zr=p(8161);function Vr(o,a){if(1&o&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.display_name||t.name," ")}}function e_(o,a){if(1&o&&(e.TgZ(0,"section",2)(1,"h3",3)(2,"div",4),e._uU(3),e.ALo(4,"async"),e.qZA(),e.TgZ(5,"div",5),e.SDv(6,28),e.qZA()(),e._UZ(7,"locker-list-field",29),e.qZA()),2&o){const t=e.oxw(2);let n;e.xp6(3),e.hij(" ",null!=(n=e.lcZ(4,1,t.options))&&n.group?3:2," ")}}const Pt=function(){return{standalone:!0}};function t_(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"section",2)(2,"h3",3)(3,"div",4),e._uU(4," 1 "),e.qZA(),e.TgZ(5,"div",5),e.SDv(6,6),e.qZA()(),e.TgZ(7,"div",7)(8,"div",8)(9,"label",9),e.tHW(10,10),e._UZ(11,"span"),e.N_p(),e.qZA(),e.TgZ(12,"mat-form-field",11)(13,"mat-select",12),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.building=i)}),e.YNc(14,Vr,2,2,"mat-option",13),e.ALo(15,"async"),e.qZA()()(),e.TgZ(16,"div",8)(17,"label",9),e.tHW(18,14),e._UZ(19,"span"),e.N_p(),e.qZA(),e.TgZ(20,"a-date-field",15),e.SDv(21,16),e.qZA()()(),e.TgZ(22,"div",17)(23,"div",18)(24,"label",19),e.tHW(25,20),e._UZ(26,"span"),e.N_p(),e.qZA(),e.TgZ(27,"a-time-field",21),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.form.patchValue({date:i}))}),e.qZA()(),e.TgZ(28,"div",22)(29,"label",23),e.tHW(30,24),e._UZ(31,"span"),e.N_p(),e.qZA(),e._UZ(32,"a-duration-field",25),e.qZA()()(),e.YNc(33,e_,8,3,"section",26),e.qZA()}if(2&o){const t=e.oxw();let n;e.Q6J("formGroup",t.form),e.xp6(1),e.ekj("!border-none",t.allow_groups),e.xp6(12),e.Q6J("ngModel",t.building)("ngModelOptions",e.DdM(17,Pt)),e.xp6(1),e.Q6J("ngForOf",e.lcZ(15,15,t.buildings)),e.xp6(13),e.Q6J("ngModel",t.form.value.date)("ngModelOptions",e.DdM(18,Pt))("disabled",t.form.value.duration>1439),e.xp6(5),e.Q6J("time",null==(n=t.form.get("date"))?null:n.value)("max",720)("min",60)("step",60)("custom_options",t.custom_durations),e.xp6(1),e.Q6J("ngIf",t.form.contains("resources"))}}let n_=(()=>{class o extends u.cx{get building(){return this._org.building}set building(t){this._org.building=t}constructor(t,n,i){super(),this._state=t,this._org=n,this._settings=i,this.find=new e.vpe,this.buildings=this._org.building_list,this.levels=this._org.active_levels,this.options=this._state.options,this.features=this._state.features,this.from_id=!1,this.custom_durations=[],this.recurrence_options=["daily","weekly","monthly"],this.setOptions=s=>this._state.setOptions(s),this.setFeature=(s,l)=>this._state.setFeature(s,l)}ngOnChanges(t){t.form&&this.form&&(this.subscription("change",this.form.get("resources")?.valueChanges?.subscribe(n=>n?.length?this.setBookingAsset(n[0]):"")),this.subscription("date",this.form.get("date")?.valueChanges?.subscribe(n=>this._setCustomDateOptions())),this._setCustomDateOptions())}_setCustomDateOptions(){for(const t of[1,2,3,4,5,6,7])this.custom_durations.push(24*t*60)}setBookingAsset(t){this._state.form.patchValue({asset_id:void 0}),t&&(this.selected_locker=t,this._state.form.patchValue({asset_id:t?.id,asset_name:t.name,map_id:t?.bank_id||t?.id,description:t.name,booking_type:"locker",zones:[this.building.id],booking_asset:t}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.fy),e.Y36(O.w7),e.Y36(u.gb))},o.\u0275cmp=e.Xpm({type:o,selectors:[["new-locker-form-details"]],inputs:{form:"form"},outputs:{find:"find"},features:[e.qOj,e.TTD],decls:1,vars:1,consts:function(){let a,t,n,i,s,l,r;return a=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,t=$localize`:␟029554be61f13a5f5f40b24ff6a076e8cf3ce232␟5030059473688609624:Building${"\ufffd#11\ufffd"}:START_TAG_SPAN:*${"\ufffd/#11\ufffd"}:CLOSE_TAG_SPAN:`,n=$localize`:␟04cfb5fd033651743bc4b9408bd52ba4ee894070␟3158758063619980932:Date${"\ufffd#19\ufffd"}:START_TAG_SPAN:*${"\ufffd/#19\ufffd"}:CLOSE_TAG_SPAN:`,i=$localize`:␟407bcc42df8640bf3b85c58145c8d24572bb47b6␟6682406734296000735: Date and time must be in the future `,s=$localize`:␟34a7595cdc15925514038224946986bfd90dc0ed␟3039786638368843634:Start Time${"\ufffd#26\ufffd"}:START_TAG_SPAN:*${"\ufffd/#26\ufffd"}:CLOSE_TAG_SPAN:`,l=$localize`:␟85d5c3a89bab9a7475a7db095089e161586cb7a1␟5960185837188220843:End Time${"\ufffd#31\ufffd"}:START_TAG_SPAN:*${"\ufffd/#31\ufffd"}:CLOSE_TAG_SPAN:`,r=$localize`:␟cfeb28f668205a4c947451135df7c73fc4761a36␟2574467213728266360:Locker`,[["class","p-0 sm:py-4 sm:px-16 divide-y divide-gray-300 space-y-2",3,"formGroup",4,"ngIf"],[1,"p-0","sm:py-4","sm:px-16","divide-y","divide-gray-300","space-y-2",3,"formGroup"],[1,"p-2"],[1,"space-x-2","flex","items-center","mb-4"],[1,"bg-black/20","rounded-full","h-6","w-6","flex","items-center","justify-center"],[1,"text-xl"],a,[1,"flex","items-center","flex-wrap","sm:space-x-2"],[1,"flex-1","min-w-[256px]"],["for","date"],t,["appearance","outline",1,"w-full"],["placeholder","Select Building",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],n,["name","date","formControlName","date"],i,[1,"flex","items-center","space-x-2"],[1,"flex-1","w-1/3"],["for","start-time"],s,["name","start-time",3,"ngModel","ngModelOptions","disabled","ngModelChange"],[1,"flex-1","w-1/3","relative"],["for","end-time"],l,["name","end-time","formControlName","duration",3,"time","max","min","step","custom_options"],["class","p-2",4,"ngIf"],[3,"value"],r,["formControlName","resources"]]},template:function(t,n){1&t&&e.YNc(0,t_,34,19,"div",0),2&t&&e.Q6J("ngIf",n.form)},dependencies:[_.sg,_.O5,h.ey,w.KE,J.gD,V.Q,ee.B,te.N,zr.b,d.JJ,d.JL,d.On,d.sg,d.u,_.Ov],encapsulation:2}),o})(),o_=(()=>{class o{get form(){return this._state.form}constructor(t,n,i,s,l){this._state=t,this._router=n,this._org=i,this._bottom_sheet=s,this._settings=l,this.level="",this.levels=[],this.clearForm=()=>{this.level=this._org.building.id,this._state.clearForm()},this.viewConfirm=()=>{if(!this.form.valid)return(0,u.cB)(`Some fields are invalid. [${(0,u.RD)(this.form).join(", ")}]`);this.sheet_ref=this._bottom_sheet.open(kt),this.sheet_ref.instance.show_close=!0,this.sheet_ref.afterDismissed().subscribe(r=>{r&&(this._router.navigate(["/book","locker","success"]),this._state.setView("success"))})}}ngOnInit(){var t=this;return(0,f.Z)(function*(){yield t._org.initialised.pipe((0,N.P)(n=>n)),yield t._org.active_levels.pipe((0,N.P)(n=>n?.length>0)),t._state.setOptions({type:"locker"}),t.level=t._org.building?.id,t.levels=[{id:t._org.building?.id,name:"Any Level"},...t._org.levelsForBuilding(t._org.building)],(0,Te.Z)(t.form.value.date,Date.now())&&t.form.patchValue({date:(0,Nt.Z)(Date.now()).valueOf()})})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.fy),e.Y36(F.F0),e.Y36(O.w7),e.Y36($.ch),e.Y36(u.gb))},o.\u0275cmp=e.Xpm({type:o,selectors:[["locker-flow-form"]],decls:9,vars:1,consts:function(){let a,t;return a=$localize`:␟ecdd561f3cc9dadc3395a6718c34fe2eb8523cff␟7333761466495468987: Book Locker `,t=$localize`:␟3cc63e7ab039b2d8a39ee9e99b0856f8d954bb09␟8662817993552634890: Confirm Locker `,[[1,"h-full","w-full","bg-gray-100","dark:bg-neutral-600","overflow-auto"],[1,"max-w-full","w-[48rem]","mx-auto","sm:my-4","bg-white","dark:bg-neutral-700","border","border-gray-300","dark:border-neutral-500"],[1,"w-full","p-4","sm:py-4","sm:px-16","text-2xl","font-medium","border-b","border-gray-300","dark:border-neutral-500"],a,[3,"form"],[1,"sm:mb-2","border-b","border-gray-300","dark:border-neutral-500","w-full"],[1,"flex","flex-col","sm:flex-row","items-center","sm:space-x-2","p-2","sm:px-16","sm:mb-2"],["btn","","name","open-locker-confirm","matRipple","","confirm","",1,"w-full","sm:w-auto",3,"click"],t]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e.SDv(3,3),e.qZA(),e._UZ(4,"new-locker-form-details",4)(5,"div",5),e.TgZ(6,"section",6)(7,"button",7),e.NdJ("click",function(){return n.viewConfirm()}),e.SDv(8,8),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("form",n.form))},dependencies:[h.wG,n_],encapsulation:2}),o})();function i_(o,a){if(1&o&&(e.tHW(0,6,1),e._UZ(1,"span",13),e.N_p()),2&o){const t=e.oxw();e.xp6(1),e.pQV((null==t.last_event||null==t.last_event.attendees?null:t.last_event.attendees.length)+1),e.QtT(0)}}function a_(o,a){if(1&o&&(e.tHW(0,6,2),e._UZ(1,"span",14),e.N_p()),2&o){const t=e.oxw();e.xp6(1),e.pQV(null==t.last_event||null==t.last_event.extension_data||null==t.last_event.extension_data.assets?null:t.last_event.extension_data.assets.length),e.QtT(0)}}function s_(o,a){if(1&o&&(e.TgZ(0,"div",15)(1,"a",16),e.ALo(2,"sanitize"),e._UZ(3,"img",17),e.TgZ(4,"span"),e.SDv(5,18),e.qZA()(),e.TgZ(6,"a",19),e.ALo(7,"sanitize"),e._UZ(8,"img",20),e.TgZ(9,"span"),e.SDv(10,21),e.qZA()(),e.TgZ(11,"a",22),e.ALo(12,"safe"),e.TgZ(13,"app-icon",23),e._uU(14,"download"),e.qZA(),e.TgZ(15,"span"),e.SDv(16,24),e.qZA()()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("href",e.xi3(2,3,t.outlook_link,"url"),e.LSH),e.xp6(5),e.Q6J("href",e.xi3(7,6,t.google_link,"url"),e.LSH),e.xp6(5),e.Q6J("href",e.xi3(12,9,t.ical_link,"url"),e.LSH)}}const l_=function(){return["/"]};let r_=(()=>{class o{get location(){const t=this.last_event?.extension_data?.booking_asset;return t&&t.zone?`, ${t.zone.display_name||t.zone.name||t.zone.id}`:""}get last_event(){return this._state.last_success}get show_links(){return this._settings.get("app.lockers.show_calendar_links")}constructor(t,n){this._state=t,this._settings=n,this.outlook_link="",this.google_link="",this.ical_link="",this.viewCalendarLinks=()=>this._state.openBookingLinkModal()}ngOnInit(){this.outlook_link=(0,oe.Y$)(this.last_event),this.google_link=(0,oe.T$)(this.last_event),this.ical_link=(0,oe.KS)(this.last_event)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.fy),e.Y36(u.gb))},o.\u0275cmp=e.Xpm({type:o,selectors:[["locker-flow-success"]],decls:16,vars:20,consts:function(){let a,t,n,i,s,l;return a=$localize`:␟56ae814b08614e0ea7d03f8c2f6deb8385091857␟3615288463984354959: ${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd1\ufffd"}:INTERPOLATION_1: Booked! `,t=$localize`:␟44c59d98706bc456a0feecbb41601eec38da367e␟1969482015227334006: Great, thanks! `,n=$localize`:␟f8e43af7c911e350d57ca5052775d82ff6d85b35␟1097739721492078612: Your ${"\ufffd*7:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_SPAN: group of ${"\ufffd0:1\ufffd"}:INTERPOLATION: ${"[\ufffd/#1:1\ufffd\ufffd/*7:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*8:2\ufffd]"}:CLOSE_TAG_SPAN: locker${"\ufffd0\ufffd"}:INTERPOLATION_1: has been successfully booked ${"\ufffd*8:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_SPAN_1: including ${"\ufffd0:2\ufffd"}:INTERPOLATION_2: asset(s) ${"[\ufffd/#1:1\ufffd\ufffd/*7:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*8:2\ufffd]"}:CLOSE_TAG_SPAN: for the ${"\ufffd1\ufffd"}:INTERPOLATION_3: at ${"\ufffd2\ufffd"}:INTERPOLATION_4:-${"\ufffd3\ufffd"}:INTERPOLATION_5:. `,n=e.Zx4(n),i=$localize`:␟11765fae755306c1287745a7ddb4461aae072a68␟7547869007893180695:Add to Outlook`,s=$localize`:␟fa6bd0f777a40a0f26b09751bf006c7337d547ac␟2479867054818994962:Add to Google Calendar`,l=$localize`:␟1af54061e7f4bcfb1048ffaa05c9b8f7c4b41679␟4894641609416495396:Download iCal File`,[[1,"absolute","inset-0","bg-white","dark:bg-neutral-600","flex","flex-col","z-50"],[1,"flex-1","flex","flex-col","items-center","justify-center","space-y-2","p-8"],[1,"text-2xl","font-medium","text-center"],a,["src","assets/icons/locker-success.svg"],[1,"text-center"],n,["group","",4,"ngIf"],["assets","",4,"ngIf"],["class","flex flex-col items-center space-y-4 p-4 relative",4,"ngIf"],[1,"p-2","w-full","border-t","border-gray-200","dark:border-neutral-500","mt-4","flex","items-center","justify-center"],["btn","","name","locker-confirm-continue","matRipple","",1,"w-full","max-w-[32rem]","mx-auto",3,"routerLink"],t,["group",""],["assets",""],[1,"flex","flex-col","items-center","space-y-4","p-4","relative"],["btn","","matRipple","","name","locker-outlook-link","target","_blank","rel","noopener noreferer",1,"flex","items-center","p-2","space-x-2","pr-4","w-64","rounded","inverse",3,"href"],["src","assets/icons/outlook.svg",1,"w-6"],i,["btn","","matRipple","","name","locker-google-link","target","_blank","rel","noopener noreferer",1,"flex","items-center","p-2","space-x-2","pr-4","w-64","rounded","inverse",3,"href"],["src","assets/icons/gcal.svg",1,"w-6"],s,["btn","","matRipple","","name","locker-ical-link","target","_blank","rel","noopener noreferer",1,"flex","items-center","p-2","space-x-2","pr-4","w-64","rounded","inverse",3,"href"],[1,"text-xl"],l]},template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"main",1)(2,"h2",2),e.SDv(3,3),e.qZA(),e._UZ(4,"img",4),e.TgZ(5,"p",5),e.tHW(6,6),e.YNc(7,i_,2,1,"span",7),e.YNc(8,a_,2,1,"span",8),e.ALo(9,"date"),e.ALo(10,"date"),e.ALo(11,"date"),e.N_p(),e.qZA(),e.YNc(12,s_,17,12,"div",9),e.qZA(),e.TgZ(13,"footer",10)(14,"a",11),e.SDv(15,12),e.qZA()()()),2&t&&(e.xp6(3),e.pQV(n.last_event.asset_name||n.last_event.asset_id)(n.location),e.QtT(3),e.xp6(4),e.Q6J("ngIf",null==n.last_event||null==n.last_event.attendees?null:n.last_event.attendees.length),e.xp6(1),e.Q6J("ngIf",null==n.last_event||null==n.last_event.extension_data||null==n.last_event.extension_data.assets?null:n.last_event.extension_data.assets.length),e.xp6(3),e.pQV(null!=n.last_event&&null!=n.last_event.attendees&&n.last_event.attendees.length?"s":"")(e.xi3(9,10,n.last_event.date,"mediumDate"))(e.xi3(10,13,n.last_event.date,"shortTime"))(e.xi3(11,16,n.last_event.date+60*n.last_event.duration*1e3,"shortTime")),e.QtT(6),e.xp6(1),e.Q6J("ngIf",n.show_links),e.xp6(2),e.Q6J("routerLink",e.DdM(19,l_)))},dependencies:[_.O5,v.o,h.wG,F.rH,_.uU,Et.y,ye.n],encapsulation:2}),o})();function __(o,a){1&o&&e._UZ(0,"locker-flow-success")}function c_(o,a){1&o&&e._UZ(0,"locker-flow-confirm")}function d_(o,a){1&o&&e._UZ(0,"locker-flow-form")}const u_=[{path:"",component:Ti,children:[{path:"code",component:Ni},{path:"code/success",component:Lr},{path:"code/error",component:Wr},{path:"new-desk",redirectTo:"new-desks/form"},{path:"new-desks/:step",component:dr},{path:"desks",redirectTo:"desks/form"},{path:"desks/:step",component:fa},{path:"spaces",redirectTo:"spaces/form"},{path:"spaces/:step",component:ms},{path:"meeting",redirectTo:"meeting/form"},{path:"meeting/:step",component:Ll},{path:"parking",redirectTo:"parking/form"},{path:"parking/:step",component:ks},{path:"new-parking",redirectTo:"new-parking/form"},{path:"new-parking/:step",component:kr},{path:"visitor",redirectTo:"visitor/form"},{path:"visitor/:step",component:pr},{path:"locker",redirectTo:"locker/form"},{path:"locker/:step",component:(()=>{class o extends u.cx{get view(){return this._state.view}get last_success(){return this._state.last_success}constructor(t,n){super(),this._state=t,this._route=n}ngOnInit(){this._state.loadForm(),this._state.listenForStatusChanges(),this.subscription("route.params",this._route.paramMap.subscribe(t=>{t.has("step")&&this._state.setView(t.get("step"))})),this.subscription("route.query",this._route.queryParamMap.subscribe(t=>{t.has("success")&&this._state.setView("success")}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(k.MH),e.Y36(F.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["placeos-book-locker-flow"]],features:[e.qOj],decls:4,vars:3,consts:[[1,"bg-white","dark:bg-neutral-900","h-full","w-full","z-50",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,__,1,0,"locker-flow-success",1),e.YNc(2,c_,1,0,"locker-flow-confirm",1),e.YNc(3,d_,1,0,"locker-flow-form",2),e.qZA()),2&t&&(e.Q6J("ngSwitch",n.view),e.xp6(1),e.Q6J("ngSwitchCase","success"),e.xp6(1),e.Q6J("ngSwitchCase","confirm"))},dependencies:[_.RF,_.n9,_.ED,o_,kt,r_],styles:["[_nghost-%COMP%]{height:100%;width:100%}\n/*# sourceMappingURL=locker-flow.component.ts-angular-inline--119.css.map*/"]}),o})()},{path:"*",redirectTo:"spaces/form"}]},{path:"*",redirectTo:"spaces/form"}];let p_=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[_.ez,gs.v,d.u5,hi,se.P2,d.UX,$t,$._r,b.EP,F.Bz.forChild(u_)]}),o})()}}]);
//# sourceMappingURL=apps_workplace_src_app_book_book_module_ts.js.map