"use strict";(self.webpackChunkworkplace=self.webpackChunkworkplace||[]).push([["apps_workplace_src_app_book_book_module_ts"],{10313:($_,Be,p)=>{p.r(Be),p.d(Be,{BookModule:()=>y_});var c=p(60316),m=p(34456),b=p(19805),we=p(59864),J=p(15244),fe=p(71864),R=p(57915),ge=p(79771),D=p(97024),M=p(12587),G=p(31034),Ne=p(38223),he=p(53804),q=p(80640),I=p(24950),yt=p(63046),$t=p(30846),ye=p(74879),e=p(68559),d=p(21157),P=p(25892),F=p(85060),E=p(69434),X=p(87984),S=p(41134),_e=p(12772),Re=p(55507),Pt=p(56864);const Fe=()=>({standalone:!0});function At(o,a){1&o&&(e.j41(0,"button",9)(1,"app-icon"),e.EFF(2,"close"),e.k0s()())}function Dt(o,a){if(1&o&&(e.j41(0,"div",20)(1,"label",21),e.EFF(2," Name"),e.j41(3,"span"),e.EFF(4,"*"),e.k0s(),e.EFF(5,": "),e.k0s(),e.j41(6,"mat-form-field",22),e.nrm(7,"input",23),e.j41(8,"mat-error"),e.EFF(9,"Name is required"),e.k0s()()()),2&o){const t=e.XpG(2);e.R7$(),e.AVh("error",t.form.controls.name.invalid&&t.form.controls.name.touched)}}function Gt(o,a){if(1&o&&(e.j41(0,"div",20)(1,"label",24),e.EFF(2," Category"),e.j41(3,"span"),e.EFF(4,"*"),e.k0s(),e.EFF(5,": "),e.k0s(),e.j41(6,"mat-form-field",22),e.nrm(7,"input",25),e.j41(8,"mat-error"),e.EFF(9,"Category is required"),e.k0s()()()),2&o){const t=e.XpG(2),n=e.sdS(9);e.R7$(),e.AVh("error",t.form.controls.category.invalid&&t.form.controls.category.touched),e.R7$(6),e.Y8G("matAutocomplete",n)}}function Lt(o,a){if(1&o){const t=e.RV6();e.j41(0,"mat-chip-row",30),e.bIt("removed",function(){const i=e.eBV(t).$implicit,s=e.XpG(3);return e.Njj(s.removeTag(i))}),e.EFF(1),e.j41(2,"button",31)(3,"app-icon"),e.EFF(4,"cancel"),e.k0s()()()}if(2&o){const t=a.$implicit;e.R7$(),e.SpI(" ",t," "),e.R7$(),e.BMQ("aria-label","Remove "+t)}}function jt(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",20)(1,"label",26),e.pXf(2,3),e.k0s(),e.j41(3,"mat-form-field",22)(4,"mat-chip-grid",27,2),e.DNE(6,Lt,5,2,"mat-chip-row",28),e.k0s(),e.j41(7,"input",29),e.bIt("matChipInputTokenEnd",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.addTag(i))}),e.k0s()()()}if(2&o){const t=e.sdS(5),n=e.XpG(2);e.R7$(),e.AVh("error",n.form.controls.tags.invalid&&n.form.controls.tags.touched),e.R7$(5),e.Y8G("ngForOf",n.tag_list),e.R7$(),e.Y8G("matChipInputFor",t)("matChipInputSeparatorKeyCodes",n.separators)("matChipInputAddOnBlur",!0)}}function Xt(o,a){1&o&&(e.j41(0,"div",20)(1,"label",32),e.EFF(2,"Description:"),e.k0s(),e.j41(3,"mat-form-field",22),e.nrm(4,"textarea",33),e.k0s()())}function Bt(o,a){if(1&o&&(e.j41(0,"div",20)(1,"label",21),e.EFF(2," Unit Price"),e.j41(3,"span"),e.EFF(4,"*"),e.k0s(),e.EFF(5,": "),e.k0s(),e.j41(6,"mat-form-field",22),e.nrm(7,"input",34),e.j41(8,"mat-error"),e.EFF(9,"Unit Price is required"),e.k0s()()()),2&o){const t=e.XpG(2);e.R7$(),e.AVh("error",t.form.controls.unit_price.invalid&&t.form.controls.unit_price.touched)}}function Wt(o,a){1&o&&(e.j41(0,"div",20)(1,"label",35),e.pXf(2,4),e.k0s(),e.nrm(3,"image-list-field",36),e.k0s())}function Vt(o,a){if(1&o){const t=e.RV6();e.j41(0,"form",10)(1,"div",11),e.DNE(2,Dt,10,2,"div",12)(3,Gt,10,3,"div",12),e.k0s(),e.DNE(4,jt,8,6,"div",12)(5,Xt,5,0,"div",12)(6,Bt,10,2,"div",12),e.j41(7,"div",13)(8,"label",14),e.EFF(9,"Accept Points?"),e.k0s(),e.j41(10,"mat-checkbox",15),e.EFF(11),e.k0s()(),e.j41(12,"div",16)(13,"mat-checkbox",17),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.Njj(i?s.addTag({value:"Gluten Free"}):s.removeTag("Gluten Free"))}),e.EFF(14," Gluten Free (GF) "),e.k0s(),e.j41(15,"mat-checkbox",17),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.Njj(i?s.addTag({value:"Vegan"}):s.removeTag("Vegan"))}),e.EFF(16," Vegan (VG) "),e.k0s(),e.j41(17,"mat-checkbox",17),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.Njj(i?s.addTag({value:"Vegetarian"}):s.removeTag("Vegetarian"))}),e.EFF(18," Vegetarian (V) "),e.k0s(),e.j41(19,"mat-checkbox",17),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.Njj(i?s.addTag({value:"Contains Dairy"}):s.removeTag("Contains Dairy"))}),e.EFF(20," Contains Dairy (D) "),e.k0s(),e.j41(21,"mat-checkbox",17),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.Njj(i?s.addTag({value:"Contains Nuts"}):s.removeTag("Contains Nuts"))}),e.EFF(22," Contains Nuts (N) "),e.k0s()(),e.j41(23,"div",13)(24,"label",18),e.EFF(25,"Discount Cap"),e.k0s(),e.nrm(26,"a-counter",19),e.k0s(),e.DNE(27,Wt,4,0,"div",12),e.k0s()}if(2&o){let t;const n=e.XpG();e.Y8G("formGroup",n.form),e.R7$(2),e.Y8G("ngIf",n.form.controls.name),e.R7$(),e.Y8G("ngIf",n.form.controls.category),e.R7$(),e.Y8G("ngIf",n.form.controls.tags),e.R7$(),e.Y8G("ngIf",n.form.controls.description),e.R7$(),e.Y8G("ngIf",n.form.controls.unit_price),e.R7$(5),e.JRh(null!=(t=n.form.get("accept_points"))&&t.value?"No":"Yes"),e.R7$(2),e.Y8G("ngModel",n.hasTag("Gluten Free"))("ngModelOptions",e.lJ4(22,Fe)),e.R7$(2),e.Y8G("ngModel",n.hasTag("Vegan"))("ngModelOptions",e.lJ4(23,Fe)),e.R7$(2),e.Y8G("ngModel",n.hasTag("Vegetarian"))("ngModelOptions",e.lJ4(24,Fe)),e.R7$(2),e.Y8G("ngModel",n.hasTag("Contains Dairy"))("ngModelOptions",e.lJ4(25,Fe)),e.R7$(2),e.Y8G("ngModel",n.hasTag("Contains Nuts"))("ngModelOptions",e.lJ4(26,Fe)),e.R7$(5),e.Y8G("min",0)("max",100)("step",5)("render_fn",n.renderPercent),e.R7$(),e.Y8G("ngIf",n.form.controls.images)}}function Kt(o,a){if(1&o){const t=e.RV6();e.j41(0,"footer",37)(1,"button",38),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.saveChanges())}),e.EFF(2," Save "),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(),e.Y8G("disabled",!t.form.dirty)}}function Yt(o,a){1&o&&(e.j41(0,"div",39),e.nrm(1,"mat-spinner",40),e.j41(2,"p"),e.EFF(3,"Saving catering item..."),e.k0s()())}function Ut(o,a){if(1&o&&(e.j41(0,"mat-option",41),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}let We=(()=>{class o{get item(){return this._data.item||new P.T}get categories(){return this._data.categories||[]}get tag_list(){return this.form.controls.tags.value}renderPercent(t=0){return`${t}%`}hasTag(t){return this.tag_list.includes(t)}constructor(t){this._data=t,this.event=new e.bkB,this.form=new m.gE({name:new m.MJ(this.item.name||"",[m.k0.required]),description:new m.MJ(this.item.description||""),category:new m.MJ(this.item.category||"",[m.k0.required]),unit_price:new m.MJ(this.item.unit_price,[m.k0.required]),tags:new m.MJ(this.item.tags||[]),accept_points:new m.MJ(this.item.accept_points||!1),discount_cap:new m.MJ(this.item.discount_cap||0),images:new m.MJ(this.item.images||[])}),this.loading=!1,this.separators=[ye.Fm,ye.KE,ye.t6]}addTag(t){if(!this.form||!this.form.controls.tags)return;this.form.controls.tags.markAsDirty();const n=t.input,i=t.value,s=this.tag_list;(i||"").trim()&&(s.push(i),this.form.controls.tags.setValue(s)),n&&(n.value="")}removeTag(t){if(!this.form||!this.form.controls.tags)return;const n=this.tag_list;this.form.controls.tags.markAsDirty();const i=n.indexOf(t);i>=0&&(n.splice(i,1),this.form.controls.tags.setValue(n))}saveChanges(){this.loading=!0,this.event.emit({reason:"done",metadata:{item:new P.T({...this.item,id:this.item.id||`item-${(0,d.HO)(99999999)}`,...this.form.value})}})}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(M.Vh))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["catering-item-modal"]],outputs:{event:"event"},decls:11,vars:6,consts:()=>{let t,n,i;return t=$localize`:@@zoneTagsPlaceholder␟c133beffffe3288bbdbf8572a32910c33ce14991␟2194594490376201833:Item tags e.g. Gluten Free, Vegan etc.`,n=$localize`:@@tagsLabel␟800ffadd463cfe152c5af3fa9f13803ab2e77b93␟4746186018558508280: Tags: `,i=$localize`:@@imagesLabel␟e5d9e00faa06714d7671b164cad364b26f4c585b␟5137125764814732349:Images:`,[["load_state",""],["auto","matAutocomplete"],["chipList",""],n,i,["icon","","matRipple","","mat-dialog-close","",4,"ngIf"],["class","p-4 overflow-auto max-h-[65vh]",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex p-2 items-center justify-center border-t border-solid border-base-200",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["icon","","matRipple","","mat-dialog-close",""],[1,"p-4","overflow-auto","max-h-[65vh]",3,"formGroup"],[1,"flex","items-center","space-x-2"],["class","flex flex-col",4,"ngIf"],[1,"flex","items-center"],[1,"flex-none","w-28","min-w-0"],["formControlName","accept_points"],["list","",1,"flex","items-center","flex-wrap","max-w-lg"],[3,"ngModelChange","ngModel","ngModelOptions"],[1,"flex-1","w-24","min-w-0"],["formControlName","discount_cap",1,"border","border-base-200","rounded",3,"min","max","step","render_fn"],[1,"flex","flex-col"],["for","title"],["appearance","outline"],["matInput","","name","name","placeholder","Item name","formControlName","name"],["for","category"],["matInput","","name","category","placeholder","Category","formControlName","category",3,"matAutocomplete"],["for","tags"],["aria-label","Item Tags"],[3,"removed",4,"ngFor","ngForOf"],["name","tags","placeholder",t,3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],[3,"removed"],["matChipRemove",""],["for","description"],["matInput","","name","description","placeholder","Item Description","formControlName","description"],["matInput","","name","unit-price","type","number","placeholder","Unit Price","formControlName","unit_price"],["for","images"],["name","images","formControlName","images"],[1,"flex","p-2","items-center","justify-center","border-t","border-solid","border-base-200"],["btn","","matRipple","",3,"click","disabled"],[1,"flex","flex-col","items-center","p-8","space-y-2","w-64"],["diameter","32"],[3,"value"]]},template:function(n,i){if(1&n&&(e.j41(0,"header")(1,"h3"),e.EFF(2),e.k0s(),e.DNE(3,At,3,0,"button",5),e.k0s(),e.DNE(4,Vt,28,27,"form",6)(5,Kt,3,1,"footer",7)(6,Yt,4,0,"ng-template",null,0,e.C5r),e.j41(8,"mat-autocomplete",null,1),e.DNE(10,Ut,2,2,"mat-option",8),e.k0s()),2&n){const s=e.sdS(7);e.R7$(2),e.SpI("",i.item.id?"Edit":"Add"," Item"),e.R7$(),e.Y8G("ngIf",!i.loading),e.R7$(),e.Y8G("ngIf",i.form&&!i.loading)("ngIfElse",s),e.R7$(),e.Y8G("ngIf",!i.loading),e.R7$(5),e.Y8G("ngForOf",i.categories)}},dependencies:[c.Sq,c.bT,ge.$3,F.wT,ge.pN,M.tx,D.So,m.qT,m.me,m.Q0,m.BC,m.cb,m.vS,m.j4,m.JD,E.R,I.rl,I.TL,F.r6,X.fg,S.LG,_e.HW,_e.D7,_e.Zv,_e.jH,Re.s,Pt.$],styles:["[list][_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin:.5rem}\n\n/*# sourceMappingURL=catering-item-modal.component.ts-angular-inline--94.css.map*/"]})}return o})();var h=p(89204),V=p(46484),w=p(90521),B=p(42175),oe=p(71536),ke=p(8627),ie=p(71963),Ce=p(29314),x=p(35443),ve=p(66e3),be=p(7841),N=p(57871),W=p(33602),T=p(12185),Ve=p(64217);function zt(o,a){1&o&&(e.j41(0,"button",6)(1,"app-icon"),e.EFF(2,"close"),e.k0s()())}function Jt(o,a){if(1&o&&(e.j41(0,"div",9)(1,"label",10),e.EFF(2," Name"),e.j41(3,"span"),e.EFF(4,"*"),e.k0s(),e.EFF(5,": "),e.k0s(),e.j41(6,"mat-form-field",11),e.nrm(7,"input",12),e.j41(8,"mat-error"),e.EFF(9,"Name is required"),e.k0s()()()),2&o){const t=e.XpG(2);e.R7$(),e.AVh("error",t.form.controls.name.invalid&&t.form.controls.name.touched)}}function qt(o,a){if(1&o&&(e.j41(0,"div",9)(1,"label",13),e.EFF(2," Type"),e.j41(3,"span"),e.EFF(4,"*"),e.k0s(),e.EFF(5,": "),e.k0s(),e.j41(6,"mat-form-field",11),e.nrm(7,"input",14),e.j41(8,"mat-error"),e.EFF(9,"Type is required"),e.k0s()()()),2&o){const t=e.XpG(2),n=e.sdS(9);e.R7$(),e.AVh("error",t.form.controls.group.invalid&&t.form.controls.group.touched),e.R7$(6),e.Y8G("matAutocomplete",n)}}function Ht(o,a){1&o&&(e.j41(0,"div",9)(1,"label",10),e.EFF(2,"Unit Price:"),e.k0s(),e.j41(3,"mat-form-field",11),e.nrm(4,"input",15),e.k0s()())}function Zt(o,a){1&o&&(e.j41(0,"div",9)(1,"mat-checkbox",16),e.EFF(2," Can select multiple of type "),e.k0s()())}function Qt(o,a){if(1&o&&(e.j41(0,"form",7),e.DNE(1,Jt,10,2,"div",8)(2,qt,10,3,"div",8)(3,Ht,5,0,"div",8)(4,Zt,3,0,"div",8),e.k0s()),2&o){const t=e.XpG();e.Y8G("formGroup",t.form),e.R7$(),e.Y8G("ngIf",t.form.controls.name),e.R7$(),e.Y8G("ngIf",t.form.controls.group),e.R7$(),e.Y8G("ngIf",t.form.controls.unit_price),e.R7$(),e.Y8G("ngIf",t.form.controls.multiple)}}function en(o,a){if(1&o){const t=e.RV6();e.j41(0,"footer",17)(1,"button",18),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.saveChanges())}),e.EFF(2," Save "),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(),e.Y8G("disabled",!t.form.dirty)}}function tn(o,a){1&o&&(e.j41(0,"div",19),e.nrm(1,"mat-spinner",20),e.j41(2,"p"),e.EFF(3,"Saving catering item option..."),e.k0s()())}function nn(o,a){if(1&o&&(e.j41(0,"mat-option",21),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}let Ke=(()=>{class o{get option(){return this._data.option}get types(){return this._data.types||[]}constructor(t){this._data=t,this.event=new e.bkB,this.form=new m.gE({name:new m.MJ(this.option.name||"",[m.k0.required]),group:new m.MJ(this.option.group||"",[m.k0.required]),unit_price:new m.MJ(this.option.unit_price),multiple:new m.MJ(!!this.option.multiple,[])}),this.loading=!1}saveChanges(){this.loading=!0;const t={...this.option,id:this.option.id||`option-${(0,Ve.HO)(99999999)}`,...this.form.value};this.event.emit({reason:"done",metadata:{item:new P.T({...this._data.parent,options:this._data.parent.options.filter(n=>n.id!==t.id).concat([t])})}})}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(M.Vh))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["catering-option-modal"]],outputs:{event:"event"},decls:11,vars:6,consts:[["load_state",""],["auto","matAutocomplete"],["icon","","mat-dialog-close","",4,"ngIf"],["class","p-4 overflow-auto max-h-[65vh]",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex p-2 items-center justify-center border-t border-solid border-base-200",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["icon","","mat-dialog-close",""],[1,"p-4","overflow-auto","max-h-[65vh]",3,"formGroup"],["class","flex flex-col",4,"ngIf"],[1,"flex","flex-col"],["for","title"],["appearance","outline"],["matInput","","name","name","placeholder","Item name","formControlName","name"],["for","group"],["matInput","","name","group","placeholder","Type of option e.g. Number of sugars","formControlName","group",3,"matAutocomplete"],["matInput","","name","unit-price","type","number","placeholder","Unit Price","formControlName","unit_price"],["name","multiple","formControlName","multiple"],[1,"flex","p-2","items-center","justify-center","border-t","border-solid","border-base-200"],["btn","","matRipple","",3,"click","disabled"],["loading","",1,"flex","flex-col","items-center","p-8","space-y-2","w-64"],["diameter","32"],[3,"value"]],template:function(n,i){if(1&n&&(e.j41(0,"header")(1,"h3"),e.EFF(2),e.k0s(),e.DNE(3,zt,3,0,"button",2),e.k0s(),e.DNE(4,Qt,5,5,"form",3)(5,en,3,1,"footer",4)(6,tn,4,0,"ng-template",null,0,e.C5r),e.j41(8,"mat-autocomplete",null,1),e.DNE(10,nn,2,2,"mat-option",5),e.k0s()),2&n){const s=e.sdS(7);e.R7$(2),e.SpI("",i.option.id?"Edit":"Add"," Item Option"),e.R7$(),e.Y8G("ngIf",!i.loading),e.R7$(),e.Y8G("ngIf",i.form&&!i.loading)("ngIfElse",s),e.R7$(),e.Y8G("ngIf",!i.loading),e.R7$(5),e.Y8G("ngForOf",i.types)}},dependencies:[c.Sq,c.bT,ge.$3,F.wT,ge.pN,M.tx,D.So,m.qT,m.me,m.Q0,m.BC,m.cb,m.j4,m.JD,E.R,I.rl,I.TL,F.r6,X.fg,S.LG]})}return o})();var $e=p(54351),y=p(75555),Oe=p(92561),Ye=p(42611),Ue=p(65220),ce=p(12121);const Pe={};function ze(o,a,t){let n=!0;for(const i of a)if(o.category===i.name||o.tags.includes(i.name)||t.resources.find(s=>s.zones.includes(i.name))||t.space?.zones.includes(i.name)||"*"===i.name){let s=0;for(const l of i.rules){const r=new Date(t.date);switch(l[0]){case"is_before":s+=(0,Oe.A)(Date.now(),(0,Ye.A)(r,l[1]))?1:0;break;case"within_hours":s+=(0,Ue.A)(Date.now(),(0,Ye.A)(r,l[1]))?1:0;break;case"after_hour":s+=(0,Ue.A)(r,(0,ce.A)(r,l[1]))?1:0;break;case"before_hour":s+=(0,Oe.A)(r,(0,ce.A)(r,l[1]))?1:0;break;case"min_length":s+=t.duration>=(0,d.II)(l[1])?1:0;break;case"max_length":s+=t.duration<=(0,d.II)(l[1])?1:0;break;case"visitor_type":s+=t.ext("visitor_type")===l[1]?1:0;break;default:s+=1}}n=s>=i.rules.length}return n}const Je=()=>({});function sn(o,a){1&o&&(e.j41(0,"div",18),e.EFF(1," Options Available "),e.k0s())}function an(o,a){if(1&o){const t=e.RV6();e.j41(0,"a-counter",19),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG().$implicit,l=e.XpG(5);return e.Njj(l.updateItemQuantity(s,i))}),e.k0s()}if(2&o){const t=e.XpG().$implicit;e.Y8G("ngModel",t.quantity)}}function ln(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",20)(1,"div",21)(2,"button",22)(3,"app-icon"),e.EFF(4,"remove"),e.k0s()()(),e.j41(5,"div",23),e.EFF(6),e.k0s(),e.j41(7,"button",24),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,s=e.XpG(5);return e.Njj(s.addItem(i))}),e.j41(8,"app-icon"),e.EFF(9,"add"),e.k0s()()()}if(2&o){const t=e.XpG().$implicit;e.R7$(),e.Y8G("matTooltip",t.quantity?"Items with options must be removed from order confirmation page":""),e.R7$(),e.Y8G("disabled",!0),e.R7$(4),e.SpI(" ",t.quantity," ")}}function rn(o,a){if(1&o&&(e.j41(0,"div",12)(1,"div",13)(2,"div",13),e.EFF(3),e.k0s(),e.DNE(4,sn,2,0,"div",14),e.k0s(),e.j41(5,"div",15),e.EFF(6),e.nI1(7,"currency"),e.k0s(),e.DNE(8,an,1,1,"a-counter",16)(9,ln,10,3,"div",17),e.k0s()),2&o){const t=a.$implicit,n=e.XpG(5);e.R7$(3),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngIf",t.options.length),e.R7$(2),e.SpI(" ",e.i5U(7,5,t.unit_price/100,n.code)," "),e.R7$(2),e.Y8G("ngIf",!t.options.length),e.R7$(),e.Y8G("ngIf",t.options.length)}}function _n(o,a){if(1&o&&(e.j41(0,"mat-tab",9)(1,"div",10),e.DNE(2,rn,10,8,"div",11),e.k0s()()),2&o){const t=e.XpG().$implicit,n=e.XpG(3);e.Y8G("label",t),e.R7$(2),e.Y8G("ngForOf",(n.menu_items||e.lJ4(2,Je))[t])}}function cn(o,a){if(1&o&&(e.qex(0),e.DNE(1,_n,3,3,"mat-tab",8),e.bVm()),2&o){const t=a.$implicit,n=e.XpG(3);e.R7$(),e.Y8G("ngIf",(n.menu_items||e.lJ4(1,Je))[t].length)}}function dn(o,a){if(1&o&&(e.qex(0),e.j41(1,"mat-tab-group"),e.DNE(2,cn,2,2,"ng-container",7),e.k0s(),e.bVm()),2&o){const t=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",t.categories)}}function mn(o,a){if(1&o&&(e.j41(0,"div",5),e.DNE(1,dn,3,1,"ng-container",6),e.k0s()),2&o){const t=e.XpG(),n=e.sdS(5);e.R7$(),e.Y8G("ngIf",!t.show_order_details)("ngIfElse",n)}}function pn(o,a){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"button",26),e.EFF(2," Cancel "),e.k0s(),e.j41(3,"button",27),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.show_order_details=!0)}),e.EFF(4," Confirm "),e.k0s(),e.bVm()}if(2&o){const t=e.XpG(2);e.R7$(3),e.Y8G("disabled",!t.order.item_count)("matBadge",t.order.item_count)("matBadgeHidden",!t.order.item_count)}}function un(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",28),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.show_order_details=!1)}),e.EFF(1," Back "),e.k0s(),e.j41(2,"button",29),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.saveOrder())}),e.EFF(3," Save Order "),e.k0s()}}function fn(o,a){if(1&o&&(e.j41(0,"footer",25),e.DNE(1,pn,5,3,"ng-container",6)(2,un,4,0,"ng-template",null,2,e.C5r),e.k0s()),2&o){const t=e.sdS(3),n=e.XpG();e.R7$(),e.Y8G("ngIf",!n.show_order_details)("ngIfElse",t)}}function gn(o,a){if(1&o&&(e.j41(0,"div",30),e.nrm(1,"mat-spinner",31),e.j41(2,"p"),e.EFF(3),e.k0s()()),2&o){const t=e.XpG();e.R7$(3),e.JRh(t.loading)}}function hn(o,a){if(1&o&&(e.j41(0,"div",35),e.EFF(1),e.k0s()),2&o){const t=e.XpG().$implicit,n=e.XpG(2);e.Y8G("matTooltip",n.optionsFor(t)),e.R7$(),e.Lme(" ",t.options.length," option",1===t.options.length?"":"s"," selected ")}}function Fn(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",12)(1,"div",13)(2,"div",13),e.EFF(3),e.k0s(),e.DNE(4,hn,2,3,"div",33),e.k0s(),e.j41(5,"div",15),e.EFF(6),e.nI1(7,"currency"),e.k0s(),e.j41(8,"a-counter",34),e.bIt("ngModelChange",function(i){const s=e.eBV(t).$implicit,l=e.XpG(2);return e.Njj(l.updateItemQuantity(s,i))}),e.k0s()()}if(2&o){const t=a.$implicit,n=e.XpG(2);e.R7$(3),e.JRh(t.name),e.R7$(),e.Y8G("ngIf",t.options.length),e.R7$(2),e.SpI(" ",e.i5U(7,4,t.total_cost/100,n.code)," "),e.R7$(2),e.Y8G("ngModel",t.quantity)}}function Cn(o,a){if(1&o&&(e.j41(0,"header",32)(1,"h3"),e.EFF(2,"Confirm Order"),e.k0s()(),e.j41(3,"div",10),e.DNE(4,Fn,9,7,"div",11),e.k0s()),2&o){const t=e.XpG();e.R7$(4),e.Y8G("ngForOf",t.order.items)}}let qe=(()=>{class o extends d.Tv{get code(){return this._org.currency_code}constructor(t,n){super(),this._org=t,this._data=n,this.event=new e.bkB,this.loading="",this.menu_items={},this.categories=[],this.loading="Loading menu..."}ngOnInit(){var t=this;return(0,h.A)(function*(){t.loading="Loading menu...",t.order=new y.M(t._data.order),t.rules=yield t._data.getCateringConfig(t.order.event?.space?.level?.parent_id),t._data.menu.subscribe(n=>{t.loading="Loading menu...";const i=(0,d.Am)(n.map(l=>l.category)),s={};for(const l of i)s[l]=n.filter(r=>r.category===l&&ze(r,t.rules,t.order.event));t.categories=i,t.menu_items=s,t.updateMenuQuantities(),t.timeout("clear_loading",()=>t.loading="",1e3)})})()}addItem(t,n=!0){const i=this.order.items.find(s=>s.id===t.id&&s.options.length===s.options.reduce((l,r)=>l+(t.options.find(_=>r.id===_.id)?1:0),0));n&&t.options?.length?this._data.selectOptions(t.options).then(s=>{const l=new P.T({...t,options:s});this.addItem(l,!1)}):this.order=new y.M(i?{...this.order,items:this.order.items.filter(s=>!(s.id===t.id&&s.options_string===t.options_string)).concat([new P.T({...t,quantity:i.quantity+1})])}:{...this.order,items:this.order.items.concat([new P.T({...t,quantity:1})])}),this.updateMenuQuantities()}removeItem(t){this.order=new y.M({...this.order,items:this.order.items.filter(n=>n.id!==t.id&&n.options_string===t.options_string)}),this.updateMenuQuantities()}updateItemQuantity(t,n){const i=this.order.items.find(l=>l.id===t.id&&l.options_string===t.options_string);let s=[...this.order.items];s=i?this.order.items.filter(l=>!(l.id===t.id&&l.options_string===t.options_string)).concat([new P.T({...t,quantity:n})]):this.order.items.concat([new P.T({...t,quantity:n})]),s.sort((l,r)=>l.name.localeCompare(r.name)),this.order=new y.M({...this.order,items:s}),this.updateMenuQuantities()}updateMenuQuantities(){for(const t in this.menu_items)for(const n of this.menu_items[t])n.quantity=this.order.items.reduce((i,s)=>s.id===n.id?i+s.quantity:i,0)}optionsFor(t){return t.options.map(n=>n.name).join("\n")}saveOrder(){this.event.emit({reason:"done",metadata:{order:this.order}})}confirmOrder(){this.show_order_details=!0}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(T.yb),e.rXU(M.Vh))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-catering-order-modal"]],outputs:{event:"event"},features:[e.Vt3],decls:6,vars:3,consts:[["load_state",""],["order_details",""],["order_actions",""],["class","main min-w-[20rem]",4,"ngIf","ngIfElse"],["class","flex items-center justify-center space-x-2 p-2 border-t border-base-200",4,"ngIf"],[1,"main","min-w-[20rem]"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[3,"label",4,"ngIf"],[3,"label"],[1,"list"],["item","","class","flex items-center p-2 border-b border-base-200",4,"ngFor","ngForOf"],["item","",1,"flex","items-center","p-2","border-b","border-base-200"],[1,"flex-1","w-1/2"],["class","text-xs no-underline",4,"ngIf"],[1,"bg-primary","text-xs","rounded","px-4","py-2","mx-2","text-white","font-medium"],["ngDefaultControl","",3,"ngModel","ngModelChange",4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"text-xs","no-underline"],["ngDefaultControl","",3,"ngModelChange","ngModel"],[1,"flex","items-center"],[3,"matTooltip"],["icon","","matRipple","",3,"disabled"],[1,"count","h-12","w-12","flex","items-center","justify-center"],["icon","","matRipple","",3,"click"],[1,"flex","items-center","justify-center","space-x-2","p-2","border-t","border-base-200"],["btn","","matRipple","","mat-dialog-close","",1,"inverse"],["confirm","","btn","","matRipple","","matBadgeColor","warn",3,"click","disabled","matBadge","matBadgeHidden"],["matRipple","",1,"inverse",3,"click"],["save","","btn","","matRipple","",3,"click"],[1,"flex","flex-col","w-64","p-8","items-center","space-y-2"],["diameter","32"],[1,"h-[3.25rem]"],["class","text-xs underline",3,"matTooltip",4,"ngIf"],[3,"ngModelChange","ngModel"],[1,"text-xs","underline",3,"matTooltip"]],template:function(n,i){if(1&n&&e.DNE(0,mn,2,2,"div",3)(1,fn,4,2,"footer",4)(2,gn,4,1,"ng-template",null,0,e.C5r)(4,Cn,5,1,"ng-template",null,1,e.C5r),2&n){const s=e.sdS(3);e.Y8G("ngIf",!i.loading)("ngIfElse",s),e.R7$(),e.Y8G("ngIf",!i.loading)}},dependencies:[c.Sq,c.bT,Ne.mq,Ne.T8,M.tx,q.oV,m.me,m.BC,m.vS,E.R,F.r6,S.LG,Re.s,c.oe],styles:[".list[_ngcontent-%COMP%]{height:24em;min-width:32em;max-width:calc(100vw - 1em)}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:12em}input[_ngcontent-%COMP%]{position:relative;width:100%;padding:1em;border:none;border-radius:0!important;border-top:1px solid #ccc;border-bottom:1px solid #ccc;outline:none;font-size:1em}input[_ngcontent-%COMP%]:focus{border:none;border-top:2px solid var(--s);border-bottom:2px solid var(--s);box-shadow:none}input.error[_ngcontent-%COMP%]::placeholder{color:rgba(var(--error),.45)}\n\n/*# sourceMappingURL=catering-order-modal.component.ts-angular-inline--95.css.map*/"]})}return o})();function vn(o,a){if(1&o&&(e.j41(0,"div",18),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&o){const t=e.XpG().$implicit,n=e.XpG(3);e.R7$(),e.SpI(" +",e.i5U(2,1,t.unit_price/100,n.code)," ")}}function bn(o,a){if(1&o&&(e.j41(0,"mat-radio-button",14)(1,"div",15)(2,"div",16),e.EFF(3),e.k0s(),e.DNE(4,vn,3,4,"div",17),e.k0s()()),2&o){const t=a.$implicit;e.Y8G("value",t.id),e.R7$(3),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngIf",t.unit_price)}}function En(o,a){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"mat-radio-group",10),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG().$implicit,l=e.XpG();return e.Njj(l.updateGroupOption(s,i))}),e.j41(2,"mat-radio-button",11)(3,"span",12),e.EFF(4,"None"),e.k0s()(),e.DNE(5,bn,5,3,"mat-radio-button",13),e.k0s(),e.bVm()}if(2&o){const t=e.XpG().$implicit;e.R7$(5),e.Y8G("ngForOf",null==t?null:t.options)}}function Rn(o,a){if(1&o&&(e.j41(0,"div",18),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&o){const t=e.XpG().$implicit,n=e.XpG(3);e.R7$(),e.SpI(" +",e.i5U(2,1,t.unit_price/100,n.code)," ")}}function kn(o,a){if(1&o){const t=e.RV6();e.j41(0,"mat-checkbox",20),e.mxI("ngModelChange",function(i){const s=e.eBV(t).$implicit,l=e.XpG(3);return e.DH7(l.option_state[s.id],i)||(l.option_state[s.id]=i),e.Njj(i)}),e.j41(1,"div",15)(2,"div",16),e.EFF(3),e.k0s(),e.DNE(4,Rn,3,4,"div",17),e.k0s()()}if(2&o){const t=a.$implicit,n=e.XpG(3);e.R50("ngModel",n.option_state[t.id]),e.R7$(3),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngIf",t.unit_price)}}function On(o,a){if(1&o&&e.DNE(0,kn,5,3,"mat-checkbox",19),2&o){const t=e.XpG().$implicit;e.Y8G("ngForOf",null==t?null:t.options)}}function Tn(o,a){if(1&o&&(e.j41(0,"div",6)(1,"div",7),e.EFF(2),e.k0s(),e.j41(3,"div",8),e.DNE(4,En,6,1,"ng-container",9)(5,On,1,1,"ng-template",null,0,e.C5r),e.k0s()()),2&o){const t=a.$implicit,n=e.sdS(6);e.BMQ("group",t.name),e.R7$(2),e.JRh(t.name),e.R7$(2),e.Y8G("ngIf",!t.multiple)("ngIfElse",n)}}let He=(()=>{class o{constructor(t){this._data=t,this.event=new e.bkB,this.option_state={},this.code=this._data.code;const n=(0,Ve.Am)(this._data.options.map(s=>s.group||"Other")),i=[];for(const s of n){const l=this._data.options.filter(r=>r.group===s);i.push({name:s,multiple:!!l.find(r=>r.multiple),options:l})}this.groups=i}updateGroupOption(t,n){for(const i of t.options)this.option_state[i.id]=i.id===n}saveOptions(){const t=this._data.options.filter(n=>this.option_state[n.id]);this.event.emit({reason:"done",metadata:{options:t}})}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(M.Vh))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-catering-options-modal"]],outputs:{event:"event"},decls:11,vars:1,consts:[["multi_options",""],["icon","","mat-dialog-close",""],[1,"overflow-auto"],["class","pt-1 pb-2 border-b border-base-200",4,"ngFor","ngForOf"],[1,"p-2"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"pt-1","pb-2","border-b","border-base-200"],[1,"font-medium","p-2","capitalize"],[1,"flex","flex-col","pl-6"],[4,"ngIf","ngIfElse"],["aria-label","Select an option","ngModel","",1,"flex","flex-col",3,"ngModelChange"],["value","",1,"my-1","mx-0"],[1,"font-medium","p-2"],["class","my-1 mx-0",3,"value",4,"ngFor","ngForOf"],[1,"my-1","mx-0",3,"value"],[1,"flex","items-center","justify-center"],[1,"font-medium","p-2","flex-1","w-1/2"],["class","opacity-60 text-xs",4,"ngIf"],[1,"opacity-60","text-xs"],[3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[3,"ngModelChange","ngModel"]],template:function(n,i){1&n&&(e.j41(0,"header")(1,"h3"),e.EFF(2,"Select options"),e.k0s(),e.j41(3,"button",1)(4,"app-icon"),e.EFF(5,"close"),e.k0s()()(),e.j41(6,"main",2),e.DNE(7,Tn,7,4,"div",3),e.k0s(),e.j41(8,"footer",4)(9,"button",5),e.bIt("click",function(){return i.saveOptions()}),e.EFF(10," Save "),e.k0s()()),2&n&&(e.R7$(7),e.Y8G("ngForOf",i.groups))},dependencies:[c.Sq,c.bT,M.tx,D.So,he.VT,he._g,m.BC,m.vS,E.R,F.r6,c.oe],styles:["main[_ngcontent-%COMP%]{min-height:24em;width:24rem;max-width:calc(100vw - 2rem)}\n\n/*# sourceMappingURL=catering-order-options-modal.component.ts-angular-inline--96.css.map*/"]})}return o})();function Mn(o,a){1&o&&(e.j41(0,"button",4)(1,"app-icon"),e.EFF(2,"close"),e.k0s()())}function In(o,a){if(1&o){const t=e.RV6();e.j41(0,"main")(1,"div",5)(2,"app-icon",6),e.EFF(3,"upload"),e.k0s(),e.j41(4,"p"),e.EFF(5,"Click to select file or Drag and drop files"),e.k0s(),e.j41(6,"input",7),e.bIt("change",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.handleFileEvent(i))}),e.k0s()(),e.j41(7,"div",8)(8,"button",9),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.downloadTemplate())}),e.EFF(9," Download Template "),e.k0s()()()}}function xn(o,a){if(1&o&&(e.j41(0,"main",10),e.nrm(1,"mat-spinner",11),e.j41(2,"p"),e.EFF(3),e.k0s()()),2&o){const t=e.XpG();e.R7$(3),e.JRh(t.loading)}}let Ze=(()=>{class o{constructor(){this.event=new e.bkB}handleFileEvent(t){this.loading="Processing menu data...";const n=t.target;if(!n?.files)return this.loading="";const i=n.files;if(!i.length)return this.loading="";const s=i[0],l=new FileReader;l.addEventListener("loadend",r=>{const u=(0,d.a6)(r.target.result);this.loading="",this.event.emit({reason:"done",metadata:u.filter(g=>"item"===(g.type||"").toLowerCase()).map(g=>new P.T({...g,options:u.filter(f=>"option"===(f.type||"").toLowerCase()&&f.tags===g.id).map(f=>({id:f.id,name:f.name,group:f.category,multiple:f.multiple,unit_price:f.unit_price}))}))})}),l.readAsText(s)}downloadTemplate(){(0,d.PE)("import-menu-template.csv","ID,Type,Name,Unit Price,Category,Description,Tags,Multiple\nitem-1,item,Coffee,200,Drink,Wake Up,,\noption-1,option,1 Sugar,20,Sugars,,item-1,false")}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["catering-import-menu-modal"]],outputs:{event:"event"},decls:7,vars:3,consts:[["load_state",""],[1,"h-12","bg-primary","flex","items-center","justify-between","px-4"],["icon","","mat-dialog-close","",4,"ngIf"],[4,"ngIf","ngIfElse"],["icon","","mat-dialog-close",""],[1,"relative","flex","flex-col","items-center","justify-center","space-y-2","h-[24rem]","w-[24rem]","border-4","border-base-200","border-dashed","rounded-xl","hover:bg-base-200","m-4","p-4","cursor-pointer"],[1,"text-4xl"],["type","file",1,"absolute","inset-0","opacity-0",3,"change"],[1,"flex","items-center","justify-center","px-4","pb-4"],["matRipple","",1,"clear","underline","w-48",3,"click"],[1,"flex","flex-col","items-center","justify-center","space-y-2","p-8","h-[24rem]","w-[24rem]"],["diameter","32"]],template:function(n,i){if(1&n&&(e.j41(0,"header",1)(1,"h2"),e.EFF(2,"Import Catering Menu"),e.k0s(),e.DNE(3,Mn,3,0,"button",2),e.k0s(),e.DNE(4,In,10,0,"main",3)(5,xn,4,1,"ng-template",null,0,e.C5r)),2&n){const s=e.sdS(6);e.R7$(3),e.Y8G("ngIf",!i.loading),e.R7$(),e.Y8G("ngIf",!i.loading)("ngIfElse",s)}},dependencies:[c.bT,M.tx,E.R,F.r6,S.LG]})}return o})(),Ae=(()=>{class o extends d.Tv{get is_editable(){return!this.zone||this.zone===this._org.building?.id}get categories(){const t=this._menu.getValue();return(0,d.Am)(t.map(n=>n.category))}constructor(t,n,i){var s;super(),s=this,this._org=t,this._dialog=n,this._settings=i,this._updated=new w.t(0),this._menu=new w.t([]),this._loading=new w.t(!1),this._currency=new w.t("USD"),this._change=new w.t(0),this.menu=this._menu.asObservable(),this.loading=this._loading.asObservable(),this.currency=this._currency.asObservable(),this.settings=(0,B.zV)([this._org.active_building,this._change]).pipe((0,ke.p)(([l])=>!!l),(0,ie.n)(([l])=>(0,V.bpY)(l.id,"catering-settings").pipe((0,Ce.W)(r=>(0,oe.of)({})))),(0,x.T)(l=>l.details||{}),(0,ve.M)(l=>this._settings.post("require_catering_notes",!!l?.require_notes)),(0,be.t)(1)),this.charge_codes=this.settings.pipe((0,x.T)(l=>l.charge_codes||[])),this.availability=this.settings.pipe((0,x.T)(l=>l.disabled_rooms||[])),this.zone="",this.subscription("building",this._org.active_building.subscribe(function(){var l=(0,h.A)(function*(r){if(r){const _=(yield s.getCateringForZone(r.id)).map(u=>new P.T(u));s._currency.next(s._settings.get("app.currency")||r.currency||"USD"),s._menu.next(_)}});return function(r){return l.apply(this,arguments)}}()))}manageCateringOrder(t){var n=this;return(0,h.A)(function*(){const i=n._dialog.open(qe,{data:{code:n._currency.getValue(),order:t,menu:n.menu,loading:n.loading,getCateringConfig:l=>n.getCateringConfig(l),selectOptions:l=>n.selectOptions(l)}}),s=yield Promise.race([i.componentInstance.event.pipe((0,N.$)(l=>"done"===l.reason)).toPromise(),i.afterClosed().toPromise()]);return i.close(),s?.metadata?.order||t})()}addItem(t=new P.T){var n=this;return(0,h.A)(function*(){const i=n._dialog.open(We,{data:{item:t,categories:n.categories}}),s=yield Promise.race([i.componentInstance.event.pipe((0,N.$)(_=>"done"===_.reason)).toPromise(),i.afterClosed().toPromise()]);if("done"!==s?.reason)return;const l=n._menu.getValue(),r=l.findIndex(_=>_.id===t.id);r>=0?l.splice(r,1,s.metadata.item):l.push(s.metadata.item),n.updateMenu(n._org.building.id,l).then(()=>{n._menu.next([...l]),i.close()},()=>i.componentInstance.loading=!1)})()}updateItem(t){const n=this._menu.getValue(),i=n.findIndex(s=>s.id===t.id);i>=0?n.splice(i,1,t):n.push(t),this.updateMenu(this._org.building.id,n).then(()=>this._menu.next([...n]))}addOption(t,n={}){var i=this;return(0,h.A)(function*(){const s=(0,d.Am)(t.options.map(g=>g.group)),l=i._dialog.open(Ke,{data:{parent:t,option:n,types:s}}),r=yield Promise.race([l.componentInstance.event.pipe((0,N.$)(g=>"done"===g.reason)).toPromise(),l.afterClosed().toPromise()]);if("done"!==r?.reason)return;const _=i._menu.getValue(),u=_.findIndex(g=>g.id===t.id);u>=0?_.splice(u,1,r.metadata.item):_.push(r.metadata.item),i.updateMenu(i._org.building.id,_).then(()=>{i._menu.next([..._]),l.close()},()=>l.componentInstance.loading=!1)})()}selectOptions(t){var n=this;return(0,h.A)(function*(){const i=n._dialog.open(He,{data:{code:n._currency.getValue(),options:t}}),s=yield Promise.race([i.componentInstance.event.pipe((0,N.$)(l=>"done"===l.reason)).toPromise(),i.afterClosed().toPromise()]);return"done"!==s?.reason?[]:(i.close(),s.metadata.options)})()}deleteItem(t){var n=this;return(0,h.A)(function*(){const i=yield(0,d.GE)({title:"Delete Catering Item",content:`Are you sure you wish to remove the catering item ${t.name} from the menu?`,icon:{type:"icon",class:"material-icons",content:"delete"}},n._dialog);if("done"!==i.reason)return;i.loading("Removing catering item...");const s=n._menu.getValue().filter(l=>t.id!==l.id);n.updateMenu(n._org.building.id,s).then(()=>{n._menu.next([...s]),i.close()},()=>i.loading(""))})()}deleteOption(t,n){var i=this;return(0,h.A)(function*(){const s=yield(0,d.GE)({title:"Delete Catering Item Option",content:`Are you sure you wish to remove the catering option "${n.name}" from "${t.name}"?`,icon:{type:"icon",class:"material-icons",content:"delete"}},i._dialog);if("done"!==s.reason)return;s.loading("Removing catering item option...");const l=i._menu.getValue();l.splice(l.findIndex(r=>r.id===t.id),1,new P.T({...t,options:t.options.filter(r=>r.id!==n.id)})),i.updateMenu(i._org.building.id,l).then(()=>{i._menu.next([...l]),s.close()},()=>s.loading(""))})()}editConfig(){var t=this;return(0,h.A)(function*(){const n=yield t.getCateringConfig(t._org.building.id),{require_notes:i}=yield t.settings.pipe((0,W.s)(1)).toPromise(),s=t._menu.getValue(),l=(0,d.Am)((0,d.Bq)(s.map(u=>[u.category,...u.tags]))),r=t._dialog.open($e.Rt,{data:{config:n,types:l,require_notes:i,saveNotes:u=>t.saveSettings({require_notes:u})}}),_=yield Promise.race([r.componentInstance.event.pipe((0,N.$)(u=>"done"===u.reason)).toPromise(),r.afterClosed().toPromise()]);"done"===_?.reason&&t.updateConfig(t._org.building.id,_.metadata).then(()=>r.close(),()=>r.componentInstance.loading=!1)})()}importMenu(){var t=this;return(0,h.A)(function*(){const n=t._dialog.open(Ze),i=yield Promise.race([n.componentInstance.event.pipe((0,N.$)(_=>"done"===_.reason)).toPromise(),n.afterClosed().toPromise()]);if("done"!==i?.reason)return;n.componentInstance.loading="Updating menu...";const s=t._menu.getValue(),l=t._org.building,r=(0,d.Am)(i.metadata.concat(s),"id");yield t.updateMenu(l.id,r).catch(_=>{throw(0,d.UG)("Error importing catering menu"),n.close(),_}),(0,d.VX)(`Successfully imported catering menu. ${i.metadata.length} item(s) added.`),n.close()})()}updateMenu(t,n){return(0,V.D58)(t,{id:t,name:"catering",details:n,description:`Catering menu for ${t}`}).toPromise()}saveSettings(t){var n=this;return(0,h.A)(function*(){const i=yield n.settings.pipe((0,W.s)(1)).toPromise(),s=yield(0,V.D58)(n._org.building.id,{id:n._org.building.id,name:"catering-settings",details:{...i,...t},description:`Catering settings for ${n._org.building.id}`}).toPromise();return n._change.next(Date.now()),s})()}getCateringForZone(t){return(0,h.A)(function*(){const n=(yield(0,V.bpY)(t,"catering").toPromise()).details;return n instanceof Array?n:[]})()}getCateringConfig(t=this._org.building.id){return(0,h.A)(function*(){const n=(yield(0,V.bpY)(t,"catering_config").toPromise()).details;return n instanceof Array?n:[]})()}updateConfig(t,n){return(0,V.D58)(t,{id:t,name:"catering_config",details:n,description:`Catering menu config for ${t}`}).toPromise()}addItemToOrder(t,n){let i=t.items;const s=i.find(r=>r.id===n.id&&n.options?.length===r.options?.reduce((_,u)=>_+(n.options.find(g=>u.id===g.id)?1:0),0));return s?s.quantity+=1:i=i.concat([new P.T({...n,quantity:1})]),new y.M({...t,items:i,event:null})}static#e=this.\u0275fac=function(n){return new(n||o)(e.KVO(T.yb),e.KVO(M.bZ),e.KVO(d.h$))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Te=p(19803),K=p(67450),se=p(27419),Y=p(13264),ee=p(61031);p(51416),p(6727),p(88328);let Ie=(()=>{class o{get currency_code(){return this._org.currency_code}constructor(t,n){this._org=t,this._settings=n,this._options=new w.t({}),this._filters=new w.t({search:"",tags:[],categories:[]}),this._loading=new w.t(""),this.loading=this._loading.asObservable(),this.filters=this._filters.asObservable(),this.settings=this._org.active_building.pipe((0,ke.p)(i=>!!i),(0,ie.n)(i=>(0,V.bpY)(i.id,"catering-settings").pipe((0,Ce.W)(s=>(0,oe.of)({})))),(0,x.T)(i=>i.details),(0,ve.M)(i=>this._settings.post("require_catering_notes",!!i?.require_notes)),(0,be.t)(1)),this.charge_codes=this.settings.pipe((0,x.T)(i=>i.charge_codes||[])),this.availability=this.settings.pipe((0,x.T)(i=>i.disabled_rooms||[])),this.available_menu=(0,B.zV)([this._options,this._org.active_building]).pipe((0,ke.p)(([i,s])=>!!s),(0,ie.n)(([{zone:i},s])=>(this._loading.next("[Menu]"),(0,V.bpY)(i||s.id,"catering").pipe((0,x.T)(l=>(l.details instanceof Array?l.details:[]).map(r=>new P.T(r))),(0,Ce.W)(l=>[])))),(0,ve.M)(i=>this._loading.next("")),(0,be.t)(1)),this.categories=this.available_menu.pipe((0,x.T)(i=>(0,d.Am)(i.map(s=>s.category)))),this.filtered_menu=(0,B.zV)([this._filters,this.available_menu]).pipe((0,ie.n)(function(){var i=(0,h.A)(function*([{search:s,tags:l,categories:r,zone_id:_,date:u,duration:g,resources:f},k]){const C=yield function on(o,a=!1){return o?((!Pe[o]||a)&&(Pe[o]=(0,V.bpY)(o,"catering_config").pipe((0,x.T)(t=>t.details instanceof Array?t.details:[]),(0,Ce.W)(t=>(0,oe.of)([])))),Pe[o]):(0,oe.of)([])}(_).toPromise();let v=(s=s.toLowerCase())?k.filter(O=>O.name.toLowerCase().includes(s)):k;return v=l.length?v.filter(O=>l.every(A=>O.tags.includes(A))):v,v=r.length?v.filter(O=>r.includes(O.category)):v,v=v.filter(O=>ze(O,C,{date:u,duration:g,resources:f})),v});return function(s){return i.apply(this,arguments)}}()),(0,be.t)(1))}setOptions(t){this._options.next({...this._options.getValue(),...t})}setFilters(t){this._filters.next({...this._filters.getValue(),...t})}getFilters(){return{...this._filters.getValue()}}static#e=this.\u0275fac=function(n){return new(n||o)(e.KVO(T.yb),e.KVO(d.h$))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var bo=p(93208);function Eo(o,a){if(1&o&&(e.j41(0,"div",17),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.item.quantity||"1"," ")}}function Ro(o,a){if(1&o&&e.nrm(0,"img",18),2&o){const t=e.XpG();e.Y8G("source",t.item.images[0])}}function ko(o,a){1&o&&e.nrm(0,"img",19)}function Oo(o,a){if(1&o&&(e.j41(0,"p",20),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.SpI(" ",e.i5U(2,1,t.item.unit_price/100,t.code)," ")}}function To(o,a){if(1&o&&(e.j41(0,"div",21),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.options," ")}}function Mo(o,a){1&o&&(e.j41(0,"div",22),e.EFF(1," GF "),e.k0s())}function Io(o,a){1&o&&(e.j41(0,"div",23),e.EFF(1," VG "),e.k0s())}function xo(o,a){1&o&&(e.j41(0,"div",23),e.EFF(1," V "),e.k0s())}function So(o,a){1&o&&(e.j41(0,"div",24),e.EFF(1," D "),e.k0s())}function wo(o,a){1&o&&(e.j41(0,"div",25),e.EFF(1," N "),e.k0s())}let it=(()=>{class o{constructor(){this.active=!1,this.selected=!1,this.favourite=!1,this.code="USD",this.toggleFav=new e.bkB,this.select=new e.bkB}get options(){return this.item.option_list?.map(t=>t.name).join(", ")}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["catering-item-list-item"]],inputs:{item:"item",active:"active",selected:"selected",favourite:"favourite",code:"code"},outputs:{toggleFav:"toggleFav",select:"select"},decls:24,vars:17,consts:[["placeholder",""],["item","","matRipple","",1,"relative","p-2","rounded-lg","w-full","shadow","border","bg-base-100","border-base-200","sm:w-[20rem]"],["name","select-catering-item",1,"w-full","h-full","flex","items-center","z-0",3,"click"],[1,"relative","w-16","h-16","rounded-xl","bg-neutral","mr-4","overflow-hidden","border","border-base-200","flex","items-center","justify-center"],["class","absolute top-1 left-1 border border-white bg-neutral rounded-full h-6 w-6 flex items-center justify-center text-white text-xs",4,"ngIf"],["auth","","class","object-cover min-h-full min-w-full",3,"source",4,"ngIf","ngIfElse"],[1,"space-y-2","text-left","flex-1"],[1,"font-medium","flex","flex-col","pr-10"],[1,"opacity-60","text-xs"],[1,"flex","items-center","text-sm","space-x-1"],["class","flex-1 w-px bg-base-100 rounded",4,"ngIf"],["class","text-xs px-2 py-1 rounded-2xl shadow border border-base-200",4,"ngIf"],["class","text-xs h-5 w-7 rounded-xl shadow bg-success flex items-center justify-center",4,"ngIf"],["class","text-xs h-5 w-7 rounded-xl shadow bg-info flex items-center justify-center",4,"ngIf"],["class","text-xs h-5 w-7 rounded-xl shadow bg-warning flex items-center justify-center",4,"ngIf"],["class","text-xs h-5 w-7 rounded-xl shadow bg-orange-600 flex items-center justify-center",4,"ngIf"],["icon","","matRipple","","name","toggle-catering-item-favourite",1,"absolute","top-1","right-1",3,"click"],[1,"absolute","top-1","left-1","border","border-white","bg-neutral","rounded-full","h-6","w-6","flex","items-center","justify-center","text-white","text-xs"],["auth","",1,"object-cover","min-h-full","min-w-full",3,"source"],["src","assets/icons/catering-placeholder.svg",1,"m-auto"],[1,"flex-1","w-px","bg-base-100","rounded"],[1,"text-xs","px-2","py-1","rounded-2xl","shadow","border","border-base-200"],[1,"text-xs","h-5","w-7","rounded-xl","shadow","bg-success","flex","items-center","justify-center"],[1,"text-xs","h-5","w-7","rounded-xl","shadow","bg-info","flex","items-center","justify-center"],[1,"text-xs","h-5","w-7","rounded-xl","shadow","bg-warning","flex","items-center","justify-center"],[1,"text-xs","h-5","w-7","rounded-xl","shadow","bg-orange-600","flex","items-center","justify-center"]],template:function(n,i){if(1&n){const s=e.RV6();e.j41(0,"li",1)(1,"button",2),e.bIt("click",function(){return e.eBV(s),e.Njj(i.select.emit())}),e.j41(2,"div",3),e.DNE(3,Eo,2,1,"div",4)(4,Ro,1,1,"img",5)(5,ko,1,0,"ng-template",null,0,e.C5r),e.k0s(),e.j41(7,"div",6)(8,"div",7)(9,"div"),e.EFF(10),e.k0s(),e.j41(11,"div",8),e.EFF(12),e.k0s()(),e.j41(13,"div",9),e.DNE(14,Oo,3,4,"p",10)(15,To,2,1,"div",11)(16,Mo,2,0,"div",12)(17,Io,2,0,"div",13)(18,xo,2,0,"div",13)(19,So,2,0,"div",14)(20,wo,2,0,"div",15),e.k0s()()(),e.j41(21,"button",16),e.bIt("click",function(){return e.eBV(s),e.Njj(i.toggleFav.emit())}),e.j41(22,"app-icon"),e.EFF(23),e.k0s()()()}if(2&n){const s=e.sdS(6);e.AVh("!border-base-200",i.active),e.R7$(3),e.Y8G("ngIf",i.item.quantity&&i.selected),e.R7$(),e.Y8G("ngIf",null==i.item.images?null:i.item.images.length)("ngIfElse",s),e.R7$(6),e.JRh(i.item.name||"Item"),e.R7$(2),e.SpI(" ",i.item.category," "),e.R7$(2),e.Y8G("ngIf",i.item.unit_price),e.R7$(),e.Y8G("ngIf",null==i.item.option_list?null:i.item.option_list.length),e.R7$(),e.Y8G("ngIf",null==i.item.tags?null:i.item.tags.includes("Gluten Free")),e.R7$(),e.Y8G("ngIf",null==i.item.tags?null:i.item.tags.includes("Vegan")),e.R7$(),e.Y8G("ngIf",null==i.item.tags?null:i.item.tags.includes("Vegetarian")),e.R7$(),e.Y8G("ngIf",null==i.item.tags?null:i.item.tags.includes("Contains Dairy")),e.R7$(),e.Y8G("ngIf",null==i.item.tags?null:i.item.tags.includes("Contains Nuts")),e.R7$(),e.AVh("text-blue-400",i.favourite),e.R7$(2),e.JRh(i.favourite?"favorite":"favorite_border")}},dependencies:[c.bT,E.R,bo.U,F.r6,c.oe]})}return o})();function No(o,a){if(1&o){const t=e.RV6();e.j41(0,"catering-item-list-item",9),e.bIt("toggleFav",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.toggleFav.emit(i.id))})("select",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.selectItem(i,!0))}),e.k0s()}if(2&o){const t=a.$implicit,n=e.XpG(2);e.Y8G("item",t)("active",n.active===t.custom_id)("selected",!0)("favourite",n.isFavourite(t.id))}}function yo(o,a){if(1&o&&(e.qex(0),e.j41(1,"h3",4),e.EFF(2,"Ordered Items"),e.k0s(),e.j41(3,"p",5),e.EFF(4),e.nI1(5,"async"),e.k0s(),e.j41(6,"ul",7),e.DNE(7,No,1,4,"catering-item-list-item",8),e.nI1(8,"async"),e.k0s(),e.bVm()),2&o){let t;const n=e.XpG();e.R7$(4),e.SpI(" ",(null==(t=e.bMT(5,2,n.list))?null:t.length)||0," items(s) "),e.R7$(3),e.Y8G("ngForOf",e.bMT(8,4,n.list))}}function $o(o,a){if(1&o){const t=e.RV6();e.j41(0,"catering-item-list-item",12),e.bIt("toggleFav",function(){const i=e.eBV(t).$implicit,s=e.XpG(3);return e.Njj(s.toggleFav(i.id))})("select",function(){const i=e.eBV(t).$implicit,s=e.XpG(3);return e.Njj(s.selectItem(i,!0))}),e.k0s()}if(2&o){const t=a.$implicit,n=e.XpG(3);e.Y8G("item",t)("active",n.active===t.custom_id)("selected",n.selected.includes(t.custom_id))("favourite",n.isFavourite(t.id))("code",n.code)}}function Po(o,a){if(1&o&&(e.j41(0,"ul",7),e.DNE(1,$o,1,5,"catering-item-list-item",11),e.nI1(2,"async"),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",e.bMT(2,1,t.item_list))}}function Ao(o,a){if(1&o&&(e.qex(0),e.DNE(1,Po,3,3,"ul",10),e.nI1(2,"async"),e.bVm()),2&o){let t;const n=e.XpG(),i=e.sdS(11);e.R7$(),e.Y8G("ngIf",null==(t=e.bMT(2,2,n.item_list))?null:t.length)("ngIfElse",i)}}function Do(o,a){1&o&&(e.j41(0,"div",13)(1,"p",14),e.EFF(2," No available items for selected time and/or filters "),e.k0s()())}function Go(o,a){1&o&&(e.j41(0,"div",15),e.nrm(1,"mat-spinner",16),e.j41(2,"p",17),e.EFF(3,"Finding available items..."),e.k0s()()),2&o&&(e.R7$(),e.Y8G("diameter",32))}let st=(()=>{class o{get code(){return this._state.currency_code}constructor(t){this._state=t,this.active="",this.selected="",this.selected_items=[],this.favorites=[],this.toggleFav=new e.bkB,this.onSelect=new e.bkB,this.list=new w.t([]),this.loading=this._state.loading,this.item_list=this._state.filtered_menu}ngOnChanges(t){t.selected_items&&this.list.next(this.selected_items||[])}isFavourite(t){return this.favorites?.includes(t)}selectItem(t,n=!1){this.onSelect.emit(t),n&&t.options?.forEach(i=>delete i.active)}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(Ie))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["catering-item-list"]],inputs:{active:"active",selected:"selected",selected_items:"selected_items",favorites:"favorites"},outputs:{toggleFav:"toggleFav",onSelect:"onSelect"},features:[e.OA$],decls:14,vars:10,consts:[["empty_state",""],["load_state",""],[1,"w-full","h-full","overflow-auto","py-2"],[4,"ngIf"],[1,"font-bold","px-2"],["count","",1,"text-sm","opacity-60","mb-2","px-2"],[4,"ngIf","ngIfElse"],[1,"list-style-none","space-y-2","p-2"],["class","block",3,"item","active","selected","favourite","toggleFav","select",4,"ngFor","ngForOf"],[1,"block",3,"toggleFav","select","item","active","selected","favourite"],["class","list-style-none space-y-2 p-2",4,"ngIf","ngIfElse"],["class","block",3,"item","active","selected","favourite","code","toggleFav","select",4,"ngFor","ngForOf"],[1,"block",3,"toggleFav","select","item","active","selected","favourite","code"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"],["loading","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"],[1,"opacity-30"]],template:function(n,i){if(1&n&&(e.j41(0,"div",2),e.DNE(1,yo,9,6,"ng-container",3),e.nI1(2,"async"),e.j41(3,"h3",4),e.EFF(4,"Results"),e.k0s(),e.j41(5,"p",5),e.EFF(6),e.nI1(7,"async"),e.k0s(),e.DNE(8,Ao,3,4,"ng-container",6),e.nI1(9,"async"),e.k0s(),e.DNE(10,Do,3,0,"ng-template",null,0,e.C5r)(12,Go,4,1,"ng-template",null,1,e.C5r)),2&n){let s,l;const r=e.sdS(13);e.R7$(),e.Y8G("ngIf",null==(s=e.bMT(2,4,i.list))?null:s.length),e.R7$(5),e.SpI(" ",(null==(l=e.bMT(7,6,i.item_list))?null:l.length)||0," result(s) found "),e.R7$(2),e.Y8G("ngIf",!e.bMT(9,8,i.loading))("ngIfElse",r)}},dependencies:[c.Sq,c.bT,S.LG,it,c.Jj]})}return o})();var Lo=p(65277);function jo(o,a){if(1&o&&(e.j41(0,"p"),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.SpI(" ",e.i5U(2,1,t.item.unit_price/100,t.code)," ")}}function Xo(o,a){if(1&o&&(e.j41(0,"div",23),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.R7$(),e.SpI(" ",t," ")}}function Bo(o,a){if(1&o&&(e.j41(0,"div",35),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&o){const t=e.XpG().$implicit,n=e.XpG(4);e.R7$(),e.SpI(" +",e.i5U(2,1,t.unit_price/100,n.code)," ")}}function Wo(o,a){if(1&o&&(e.j41(0,"mat-radio-button",31)(1,"div",32)(2,"div",33),e.EFF(3),e.k0s(),e.DNE(4,Bo,3,4,"div",34),e.k0s()()),2&o){const t=a.$implicit;e.Y8G("value",t.id),e.R7$(3),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngIf",t.unit_price)}}function Vo(o,a){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"mat-radio-group",27),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG().$implicit,l=e.XpG(2);return e.DH7(l.group_state[s.name],i)||(l.group_state[s.name]=i),e.Njj(i)}),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.updateGroupOption(s,i))}),e.j41(2,"mat-radio-button",28)(3,"span",29),e.pXf(4,2),e.k0s()(),e.DNE(5,Wo,5,3,"mat-radio-button",30),e.k0s(),e.bVm()}if(2&o){const t=e.XpG().$implicit,n=e.XpG(2);e.R7$(),e.R50("ngModel",n.group_state[t.name]),e.Y8G("disabled",null==n.item?null:n.item.in_order),e.R7$(4),e.Y8G("ngForOf",null==t?null:t.options)}}function Ko(o,a){if(1&o&&(e.j41(0,"div",35),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&o){const t=e.XpG().$implicit,n=e.XpG(4);e.R7$(),e.SpI(" +",e.i5U(2,1,t.unit_price/100,n.code)," ")}}function Yo(o,a){if(1&o){const t=e.RV6();e.j41(0,"mat-checkbox",37),e.mxI("ngModelChange",function(i){const s=e.eBV(t).$implicit,l=e.XpG(4);return e.DH7(l.option_state[s.id],i)||(l.option_state[s.id]=i),e.Njj(i)}),e.bIt("ngModelChange",function(i){const s=e.eBV(t).$implicit,l=e.XpG(4);return e.Njj(l.updateCheckedState(s.id,i))}),e.j41(1,"div",21)(2,"div",38),e.EFF(3),e.k0s(),e.DNE(4,Ko,3,4,"div",34),e.k0s()()}if(2&o){const t=a.$implicit,n=e.XpG(4);e.R50("ngModel",n.option_state[t.id]),e.Y8G("disabled",null==n.item?null:n.item.in_order),e.R7$(3),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngIf",t.unit_price)}}function Uo(o,a){if(1&o&&e.DNE(0,Yo,5,4,"mat-checkbox",36),2&o){const t=e.XpG().$implicit;e.Y8G("ngForOf",null==t?null:t.options)}}function zo(o,a){if(1&o&&(e.j41(0,"div",24)(1,"div",25),e.EFF(2),e.k0s(),e.j41(3,"div",26),e.DNE(4,Vo,6,3,"ng-container",4)(5,Uo,1,1,"ng-template",null,1,e.C5r),e.k0s()()),2&o){const t=a.$implicit,n=e.sdS(6);e.BMQ("group",t.name),e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.Y8G("ngIf",!t.multiple)("ngIfElse",n)}}function Jo(o,a){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"section",5),e.nrm(2,"image-carousel",6),e.j41(3,"button",7),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.close.emit())}),e.j41(4,"app-icon"),e.EFF(5,"arrow_back"),e.k0s()(),e.j41(6,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleFav.emit())}),e.j41(7,"app-icon"),e.EFF(8),e.k0s()()(),e.j41(9,"div",9)(10,"section",10)(11,"div")(12,"h2",11),e.EFF(13),e.k0s(),e.DNE(14,jo,3,4,"p",12),e.k0s(),e.j41(15,"a-counter",13),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.item.quantity,i)||(s.item.quantity=i),e.Njj(i)}),e.bIt("ngModelChange",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.active?i.activeChange.emit(i.active):"")}),e.k0s()(),e.j41(16,"section",14),e.DNE(17,Xo,2,1,"div",15),e.k0s(),e.nrm(18,"hr"),e.j41(19,"section",16)(20,"div",17),e.DNE(21,zo,7,4,"div",18),e.k0s()()(),e.j41(22,"div",19)(23,"button",20),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return i.active=!i.active,e.Njj(i.activeChange.emit(i.active))}),e.j41(24,"div",21)(25,"app-icon",22),e.EFF(26),e.k0s(),e.j41(27,"p"),e.EFF(28),e.k0s()()()(),e.bVm()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("images",t.item.images),e.R7$(4),e.AVh("text-white",!t.fav)("text-blue-400",t.fav),e.R7$(2),e.JRh(t.fav?"favorite":"favorite_border"),e.R7$(5),e.SpI(" ",t.item.name," "),e.R7$(),e.Y8G("ngIf",t.item.unit_price),e.R7$(),e.R50("ngModel",t.item.quantity),e.Y8G("min",1)("max",t.item.count||10),e.R7$(2),e.Y8G("ngForOf",t.item.tags),e.R7$(4),e.Y8G("ngForOf",t.groups),e.R7$(2),e.AVh("inverse",t.active),e.R7$(3),e.JRh(t.active?"remove":"add"),e.R7$(2),e.SpI(" ",t.active?"Remove this item":"Add this item"," ")}}function qo(o,a){1&o&&(e.j41(0,"div",39)(1,"p",40),e.pXf(2,3),e.k0s()())}let at=(()=>{class o{constructor(){this.active=!1,this.fav=!1,this.code="USD",this.toggleFav=new e.bkB,this.activeChange=new e.bkB,this.close=new e.bkB,this.option_state={},this.group_state={}}ngOnChanges(t){t.item&&this.item&&this._update()}updateGroupOption(t,n){if(t){this.group_state[t.name]=n;for(const i of t.options)i.active=i.id===n}}updateCheckedState(t,n){const i=this.item?.options.find(s=>s.id===t);i&&(i.active=n)}_update(){if(!this.item)return;this.item.quantity||(this.item.quantity=1),this.option_state={},this.group_state={};const t=(0,d.Am)(this.item.options.map(i=>i.group||"Other")),n=[];for(const i of t){const s=this.item.options.filter(l=>l.group===i);n.push({name:i,multiple:!!s.find(l=>l.multiple),options:s})}if(this.groups=n,this.item.option_list)for(const i of this.item.option_list){const s=this.item.options.find(l=>l.id===i.id);s&&(s.active=!0,this.option_state[i.id]=!0,this.updateGroupOption(this.groups.find(l=>l.name===s.group),s.id))}}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["catering-item-details"]],inputs:{item:"item",active:"active",fav:"fav",code:"code"},outputs:{toggleFav:"toggleFav",activeChange:"activeChange",close:"close"},features:[e.OA$],decls:3,vars:2,consts:()=>{let t,n;return t=$localize`:␟a2f14a73f7a6e94479f67423cc51102da8d6f524␟6252070156626006029:None`,n=$localize`:␟0fab86098296160aef9d98a89e252bee5cf35141␟2528715266490787662: Select an item to view it's details `,[["empty_state",""],["multi_options",""],t,n,[4,"ngIf","ngIfElse"],["image","",1,"relative","w-full","h-64","sm:h-40","bg-neutral"],[1,"absolute","inset-0",3,"images"],["icon","","matRipple","","name","close-catering-item-details",1,"absolute","top-2","left-2","bg-neutral","sm:hidden","text-white",3,"click"],["icon","","matRipple","","name","toggle-catering-item-favourite-details",1,"absolute","top-2","right-2","bg-neutral",3,"click"],[1,"p-2","space-y-2","flex-1","h-1/2","overflow-auto"],["actions","",1,"z-0","flex","items-center","justify-between"],[1,"text-xl","font-medium","mb-2","mt-4"],[4,"ngIf"],[3,"ngModelChange","ngModel","min","max"],[1,"flex","items-center","flex-wrap"],["class","px-2 py-1 rounded-2xl bg-base-200 text-sm capitalize m-1",4,"ngFor","ngForOf"],["details","",1,"space-y-2"],[1,"flex","flex-col","flex-wrap"],["class","min-w-1/2 flex-1",4,"ngFor","ngForOf"],[1,"px-2","pt-2","pb-[5.5rem]","border-t","border-base-200","shadow","sm:hidden"],["btn","","matRipple","","name","select-catering-item-details",1,"w-full",3,"click"],[1,"flex","items-center","justify-center"],[1,"text-2xl"],[1,"px-2","py-1","rounded-2xl","bg-base-200","text-sm","capitalize","m-1"],[1,"min-w-1/2","flex-1"],[1,"font-medium","p-2","capitalize"],[1,"flex","flex-col","pl-4"],["aria-label","Select an option",1,"flex","flex-col",3,"ngModelChange","ngModel","disabled"],["value","",1,"m-0"],[1,"font-medium","p-2"],["class","m-0",3,"value",4,"ngFor","ngForOf"],[1,"m-0",3,"value"],[1,"flex","items-center","justify-center","max-w-[calc(100vw-4rem)]","sm:max-w-[15rem]"],[1,"font-medium","p-2","flex-1","w-1/2","whitespace-normal"],["class","opacity-60 text-xs",4,"ngIf"],[1,"opacity-60","text-xs"],[3,"ngModel","disabled","ngModelChange",4,"ngFor","ngForOf"],[3,"ngModelChange","ngModel","disabled"],[1,"font-medium","p-2","flex-1","w-1/2"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"]]},template:function(n,i){if(1&n&&e.DNE(0,Jo,29,17,"ng-container",4)(1,qo,3,0,"ng-template",null,0,e.C5r),2&n){const s=e.sdS(2);e.Y8G("ngIf",i.item)("ngIfElse",s)}},dependencies:[c.Sq,c.bT,D.So,he.VT,he._g,m.BC,m.vS,E.R,Lo.H,F.r6,Re.s,c.oe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:30%;min-width:20rem;height:100%;min-height:65vh}\n\n/*# sourceMappingURL=catering-item-details.component.ts-angular-inline--100.css.map*/"]})}return o})();var L=p(88402),H=p(53838),lt=p(80433),te=p(25175),ae=p(83476);function Ho(o,a){1&o&&(e.j41(0,"h3",11),e.pXf(1,0),e.k0s())}function Zo(o,a){if(1&o&&(e.j41(0,"mat-option",19),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&o){const t=a.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",e.i5U(2,2,t.value,"mediumDate")," ")}}function Qo(o,a){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"label"),e.EFF(2,"Deliver Date:"),e.k0s(),e.j41(3,"mat-form-field",16)(4,"mat-select",17),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.DH7(s.offset_day,i)||(s.offset_day=i),e.Njj(i)}),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.offset_dayChange.next(i))}),e.DNE(5,Zo,3,5,"mat-option",18),e.k0s()(),e.bVm()}if(2&o){const t=e.XpG(2);e.R7$(4),e.R50("ngModel",t.offset_day),e.R7$(),e.Y8G("ngForOf",t.day_options)}}function ei(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",12)(1,"mat-checkbox",13),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.at_time,i)||(s.at_time=i),e.Njj(i)}),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.at_timeChange.next(i))}),e.EFF(2," Exact Time "),e.k0s(),e.DNE(3,Qo,6,2,"ng-container",14),e.j41(4,"label"),e.EFF(5,"Deliver After:"),e.k0s(),e.j41(6,"a-duration-field",15),e.nI1(7,"async"),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.offset,i)||(s.offset=i),e.Njj(i)}),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.offsetChange.next(i))}),e.k0s()()}if(2&o){let t;const n=e.XpG();e.R7$(),e.R50("ngModel",n.at_time),e.Y8G("matTooltip",n.exact_tooltip),e.R7$(2),e.Y8G("ngIf",n.day_options.length>1),e.R7$(3),e.R50("ngModel",n.offset),e.Y8G("time",n.offset_day>0?n.start_of_date:null==(t=e.bMT(7,9,n.filters))?null:t.date)("step",n.step_interval)("min",n.min_offset)("max",n.max_offset)("use_24hr",n.use_24hr)}}function ti(o,a){1&o&&(e.j41(0,"h3",20),e.pXf(1,1),e.k0s())}function ni(o,a){if(1&o){const t=e.RV6();e.j41(0,"mat-checkbox",17),e.nI1(1,"async"),e.bIt("ngModelChange",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.toggleCategory(i))}),e.EFF(2),e.k0s()}if(2&o){let t;const n=a.$implicit,i=e.XpG();e.Y8G("ngModel",null==(t=e.bMT(1,3,i.filters))||null==t.categories?null:t.categories.includes(n)),e.BMQ("name",n),e.R7$(2),e.SpI(" ",n," ")}}const oi={coffee:'<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <g clip-path="url(#clip0_605_8664)">\n    <path d="M38.388 21.2474C37.8243 20.7996 37.1598 20.4847 36.4474 20.3278C35.735 20.1708 34.9944 20.1762 34.2846 20.3434C34.2476 19.7774 34.2049 19.2037 34.1483 18.6155C34.1243 18.3664 34.0043 18.1349 33.8119 17.9668C33.6195 17.7986 33.3687 17.706 33.1088 17.707H1.26151C1.00166 17.706 0.750839 17.7986 0.558442 17.9668C0.366045 18.1349 0.246035 18.3664 0.222073 18.6155C-0.42931 25.3581 0.106585 30.5307 4.80024 35.4799C8.88062 39.7819 15.7271 39.9998 17.0599 39.9998H17.3047C18.6375 39.9998 25.4863 39.7774 29.5643 35.4799C30.5412 34.4597 31.3937 33.3353 32.1052 32.1286C32.2481 32.1199 32.3875 32.0819 32.514 32.0174C34.0959 31.2139 35.6169 30.3039 37.0656 29.2943C38.3815 28.4227 39.3664 27.1618 39.871 25.7028C40.0702 24.9006 40.0372 24.0612 39.7758 23.2757C39.5144 22.4902 39.0344 21.7887 38.388 21.2474ZM28.0329 34.13C24.4699 37.8905 18.0323 37.9984 17.3093 37.9984H17.0645C16.3426 37.9984 9.90389 37.8872 6.34092 34.13C2.37257 29.9436 1.75351 25.466 2.21549 19.7085H32.1583C32.6214 25.4649 32.0024 29.9425 28.0329 34.13ZM37.8498 25.2091C37.4485 26.2369 36.7212 27.117 35.771 27.7243C35.024 28.2636 34.2434 28.7582 33.4334 29.2053C34.1268 27.0036 34.4428 24.7078 34.3689 22.4082C34.3839 22.4027 34.3989 22.4082 34.4139 22.3982C34.8447 22.2182 35.3192 22.1579 35.7837 22.2242C36.2482 22.2905 36.6841 22.4808 37.0421 22.7733C37.4001 23.0659 37.6658 23.4491 37.8092 23.8796C37.9525 24.3101 37.9678 24.7707 37.8533 25.2091H37.8498Z" fill="currentcolor"/>\n    <path d="M9.43243 8.16274C9.85735 8.48322 10.2069 8.88673 10.4582 9.34669C10.7094 9.80666 10.8565 10.3126 10.89 10.8313C10.7939 11.9569 10.2754 13.0103 9.43128 13.7946C9.32937 13.883 9.24664 13.9899 9.18786 14.1092C9.12907 14.2286 9.0954 14.3579 9.08878 14.4898C9.08216 14.6217 9.10275 14.7536 9.14931 14.8778C9.19588 15.002 9.26753 15.1161 9.36012 15.2136C9.45271 15.311 9.56442 15.3898 9.6888 15.4455C9.81319 15.5012 9.9478 15.5326 10.0849 15.538C10.2219 15.5433 10.3587 15.5225 10.4874 15.4767C10.6161 15.4309 10.734 15.3611 10.8345 15.2712C12.1048 14.1093 12.8679 12.5254 12.9688 10.8413C12.9432 10.042 12.7392 9.25727 12.3708 8.5405C12.0023 7.82373 11.478 7.19166 10.8334 6.68722C10.4067 6.38353 10.055 5.99283 9.80341 5.54303C9.55184 5.09323 9.40662 4.59547 9.37815 4.08534C9.51392 3.18283 10.0073 2.36595 10.7548 1.80591C10.9718 1.64618 11.1147 1.41065 11.1528 1.15024C11.1908 0.889843 11.1208 0.625512 10.958 0.414392C10.7951 0.203272 10.5525 0.062327 10.2826 0.0220596C10.0127 -0.0182078 9.73715 0.0454338 9.51559 0.199206C8.90219 0.651996 8.39004 1.21933 8.0098 1.86721C7.62956 2.5151 7.38907 3.2302 7.30273 3.9697C7.30292 4.77855 7.49485 5.5767 7.86392 6.30333C8.23298 7.02996 8.76944 7.66592 9.43243 8.16274Z" fill="currentcolor"/>\n    <path d="M23.0984 8.16274C23.5234 8.48322 23.8729 8.88673 24.1242 9.34669C24.3754 9.80666 24.5225 10.3126 24.556 10.8313C24.4599 11.9569 23.9414 13.0103 23.0973 13.7946C22.9954 13.883 22.9126 13.9899 22.8539 14.1092C22.7951 14.2286 22.7614 14.3579 22.7548 14.4898C22.7482 14.6217 22.7687 14.7536 22.8153 14.8778C22.8619 15.002 22.9335 15.1161 23.0261 15.2136C23.1187 15.311 23.2304 15.3898 23.3548 15.4455C23.4792 15.5012 23.6138 15.5326 23.7509 15.538C23.8879 15.5433 24.0247 15.5225 24.1534 15.4767C24.2821 15.4309 24.4 15.3611 24.5005 15.2712C25.7708 14.1093 26.5339 12.5254 26.6348 10.8413C26.6092 10.042 26.4052 9.25727 26.0368 8.5405C25.6683 7.82373 25.144 7.19166 24.4994 6.68722C24.0727 6.38353 23.721 5.99283 23.4694 5.54303C23.2178 5.09323 23.0726 4.59547 23.0442 4.08534C23.1799 3.18283 23.6733 2.36595 24.4208 1.80591C24.6378 1.64618 24.7807 1.41065 24.8188 1.15024C24.8568 0.889843 24.7868 0.625512 24.624 0.414392C24.4611 0.203272 24.2185 0.062327 23.9486 0.0220596C23.6787 -0.0182078 23.4032 0.0454338 23.1816 0.199206C22.5682 0.651996 22.0561 1.21933 21.6758 1.86721C21.2956 2.5151 21.0551 3.2302 20.9688 3.9697C20.9689 4.77855 21.1609 5.5767 21.5299 6.30333C21.899 7.02996 22.4355 7.66592 23.0984 8.16274Z" fill="currentcolor"/>\n    <path d="M16.2645 8.16274C16.6894 8.48322 17.039 8.88673 17.2902 9.34669C17.5414 9.80666 17.6886 10.3126 17.722 10.8313C17.626 11.9569 17.1074 13.0103 16.2633 13.7946C16.1614 13.883 16.0787 13.9899 16.0199 14.1092C15.9611 14.2286 15.9274 14.3579 15.9208 14.4898C15.9142 14.6217 15.9348 14.7536 15.9813 14.8778C16.0279 15.002 16.0996 15.1161 16.1922 15.2136C16.2847 15.311 16.3964 15.3898 16.5208 15.4455C16.6452 15.5012 16.7798 15.5326 16.9169 15.538C17.054 15.5433 17.1908 15.5225 17.3194 15.4767C17.4481 15.4309 17.5661 15.3611 17.6666 15.2712C18.9368 14.1093 19.6999 12.5254 19.8009 10.8413C19.7752 10.042 19.5713 9.25727 19.2028 8.5405C18.8343 7.82373 18.31 7.19166 17.6654 6.68722C17.2387 6.38353 16.887 5.99283 16.6354 5.54303C16.3839 5.09323 16.2386 4.59547 16.2102 4.08534C16.346 3.18283 16.8393 2.36595 17.5869 1.80591C17.8038 1.64618 17.9468 1.41065 17.9848 1.15024C18.0228 0.889843 17.9528 0.625512 17.79 0.414392C17.6271 0.203272 17.3845 0.062327 17.1146 0.0220596C16.8447 -0.0182078 16.5692 0.0454338 16.3476 0.199206C15.7342 0.651996 15.2221 1.21933 14.8418 1.86721C14.4616 2.5151 14.2211 3.2302 14.1348 3.9697C14.1349 4.77855 14.3269 5.5767 14.6959 6.30333C15.065 7.02996 15.6015 7.66592 16.2645 8.16274Z" fill="currentcolor"/>\n    <path d="M7.16328 29.7138C5.86597 27.7051 5.17938 25.3866 5.18141 23.0212C5.18141 22.7558 5.07191 22.5013 4.87697 22.3136C4.68204 22.1259 4.41765 22.0205 4.14198 22.0205C3.8663 22.0205 3.60191 22.1259 3.40698 22.3136C3.21204 22.5013 3.10254 22.7558 3.10254 23.0212C3.10081 25.7653 3.89738 28.4551 5.40201 30.7857C5.55001 31.0072 5.78275 31.1637 6.04976 31.2211C6.31677 31.2784 6.59652 31.2322 6.82832 31.0923C7.06012 30.9524 7.22529 30.7301 7.288 30.4737C7.35071 30.2174 7.30588 29.9475 7.16328 29.7227V29.7138Z" fill="currentcolor"/>\n    <path d="M9.06498 32.7103C8.94112 32.6482 8.84235 32.548 8.78434 32.4257C8.73082 32.3026 8.65227 32.1911 8.55334 32.0977C8.45441 32.0043 8.33708 31.9309 8.20825 31.8818C8.07942 31.8327 7.9417 31.8089 7.80317 31.8118C7.66464 31.8146 7.5281 31.8441 7.40159 31.8986C7.27508 31.953 7.16115 32.0312 7.06649 32.1286C6.97184 32.226 6.89837 32.3407 6.8504 32.4658C6.80244 32.591 6.78094 32.7241 6.78719 32.8574C6.79344 32.9906 6.8273 33.1213 6.88678 33.2418C7.13536 33.7758 7.56332 34.2136 8.10177 34.4849C8.34682 34.6079 8.63256 34.6321 8.89616 34.5523C9.15975 34.4724 9.37959 34.295 9.50732 34.0591C9.63505 33.8232 9.6602 33.5481 9.57725 33.2943C9.49429 33.0405 9.31003 32.8289 9.06498 32.7059V32.7103Z" fill="currentcolor"/>\n    </g>\n    <defs>\n    <clipPath id="clip0_605_8664">\n    <rect width="40" height="40" fill="white"/>\n    </clipPath>\n    </defs>\n    </svg>\n    ',drinks:'<svg width="28" height="39" viewBox="0 0 28 39" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <g clip-path="url(#clip0_598_8203)">\n    <path d="M0 0L0.662157 8.11078C0.662157 8.12619 0.653028 8.1394 0.653028 8.15481C0.658117 8.18851 0.664982 8.22193 0.673584 8.25496L3.1852 39H25.1048L28.0034 0H0ZM25.7932 1.98093L25.4085 7.16985C25.3982 7.16985 25.3902 7.16985 25.3799 7.16985H2.64519L2.22279 1.98642L25.7932 1.98093ZM23.1948 37.0191H5.08147L2.80846 9.14527H25.2612L23.1948 37.0191Z" fill="currentcolor"/>\n    <path d="M6.24983 23.3122C6.28864 23.3122 6.32861 23.3122 6.364 23.3122C6.49825 23.2972 6.6281 23.2567 6.74613 23.1933C6.86415 23.1298 6.96804 23.0445 7.05181 22.9423C7.13559 22.8401 7.19762 22.7229 7.23436 22.5975C7.2711 22.4722 7.28181 22.341 7.26589 22.2117C7.0661 20.5444 6.86517 18.8155 6.66538 17.0855C6.4576 15.2861 6.24869 13.4846 6.03862 11.7502C5.99894 11.4962 5.85848 11.267 5.64686 11.111C5.43525 10.955 5.16904 10.8843 4.90438 10.9138C4.63973 10.9434 4.39731 11.0708 4.22831 11.2694C4.0593 11.4679 3.9769 11.722 3.9985 11.978C4.20628 13.7091 4.41522 15.5084 4.623 17.3056C4.82392 19.0378 5.02485 20.77 5.22578 22.4395C5.25574 22.6807 5.37661 22.9029 5.56542 23.0638C5.75424 23.2247 5.99781 23.3131 6.24983 23.3122Z" fill="currentcolor"/>\n    <path d="M6.05485 24.414C5.9204 24.4288 5.79029 24.469 5.67201 24.5323C5.55372 24.5957 5.44958 24.6809 5.36557 24.7832C5.28156 24.8854 5.21933 25.0027 5.18245 25.1282C5.14557 25.2537 5.13477 25.385 5.15067 25.5145L5.31392 26.8857C5.34197 27.1276 5.46141 27.351 5.64945 27.5134C5.83748 27.6758 6.08096 27.7658 6.33341 27.7662C6.37223 27.7662 6.41105 27.7662 6.44759 27.7607C6.5817 27.7462 6.71152 27.7063 6.82966 27.6434C6.9478 27.5806 7.05194 27.4959 7.13612 27.3942C7.22029 27.2925 7.28287 27.1758 7.32027 27.0508C7.35766 26.9258 7.36913 26.7949 7.35404 26.6656L7.1908 25.2889C7.15839 25.0286 7.02114 24.791 6.80864 24.6273C6.59614 24.4636 6.32541 24.387 6.05485 24.414Z" fill="currentcolor"/>\n    </g>\n    <defs>\n    <clipPath id="clip0_598_8203">\n    <rect width="28" height="39" fill="white"/>\n    </clipPath>\n    </defs>\n    </svg>\n    ',snacks:'<svg width="44" height="30" viewBox="0 0 44 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M39.9739 12.3839H39.9673C39.8416 11.3068 39.529 10.2613 39.0441 9.29623C38.2937 7.89066 37.2396 6.67826 35.9616 5.75118C34.6837 4.82411 33.2156 4.20677 31.669 3.94605C31.658 3.94605 31.6471 3.94605 31.635 3.94605C29.7116 1.41671 26.4577 0.0219894 22.162 0.00292969C17.7851 0.0287164 14.3819 1.44362 12.4015 3.94605C12.3773 3.94605 12.3553 3.94605 12.3312 3.94605C10.7845 4.20721 9.31631 4.82484 8.03823 5.75207C6.76016 6.6793 5.70574 7.89174 4.95505 9.29734C4.47112 10.2623 4.15888 11.3074 4.03289 12.3839H4.02631C2.34137 14.0479 1.12087 16.1402 0.490328 18.4457C-0.140217 20.7512 -0.15805 23.1866 0.438675 25.5015C1.16762 28.1328 2.30494 29.6228 3.81991 29.9323C4.02143 29.975 4.22667 29.9968 4.43249 29.9973C5.03503 29.925 5.61546 29.722 6.13483 29.4017C6.6542 29.0815 7.1005 28.6516 7.44377 28.1407C8.13563 27.3077 8.96125 26.601 9.88529 26.0508C10.6588 25.658 11.4715 25.3513 12.3092 25.136C12.7407 25.007 13.2105 24.8624 13.7122 24.6875C14.2182 24.7717 14.7299 24.8148 15.2426 24.8164C16.5191 24.8132 17.7827 24.5561 18.963 24.0597C19.2243 24.1678 19.4915 24.2603 19.7633 24.3366C20.4624 24.5255 21.1737 24.6634 21.892 24.7492C21.9649 24.7584 22.0386 24.7584 22.1115 24.7492C22.8298 24.6634 23.5411 24.5255 24.2402 24.3366C24.5121 24.2602 24.7794 24.1674 25.0405 24.0585C26.6985 24.7663 28.5179 24.9843 30.2913 24.6875C30.7941 24.8568 31.2639 25.0014 31.6954 25.136C32.5326 25.3518 33.3449 25.6585 34.1182 26.0508C35.0422 26.6006 35.8675 27.3074 36.5586 28.1407C36.9021 28.6516 37.3486 29.0816 37.8682 29.4018C38.3877 29.722 38.9683 29.925 39.571 29.9973C39.7765 29.9968 39.9813 29.975 40.1825 29.9323C41.6986 29.6228 42.8359 28.1317 43.5648 25.5015C44.1604 23.1863 44.1418 20.7509 43.5107 18.4455C42.8796 16.1401 41.6588 14.0479 39.9739 12.3839ZM8.94886 24.276C7.83296 24.927 6.83512 25.7694 5.99906 26.7661C5.09447 27.7561 4.76074 28.07 4.20854 27.9568C3.49936 27.8111 2.83628 26.7459 2.34227 24.9543C1.92223 23.3112 1.86627 21.5932 2.17848 19.9252C2.4907 18.2572 3.16322 16.6814 4.14706 15.3124C4.29059 16.0686 4.52165 16.8048 4.83539 17.5054C6.01506 20.1182 8.00316 22.2624 10.4935 23.6078C9.96108 23.7857 9.44437 24.0092 8.94886 24.276ZM14.1514 22.7266C13.9962 22.6555 13.8256 22.6265 13.6562 22.6425C12.1235 22.2411 10.6976 21.4958 9.48221 20.461C8.26685 19.4261 7.2926 18.1277 6.63029 16.66C6.16216 15.6502 5.92631 14.5445 5.94077 13.4274C5.95523 12.3102 6.21962 11.2112 6.71373 10.2145C7.64306 8.45293 9.17618 7.10357 11.0193 6.42493C9.99726 9.36013 10.6472 13.6553 12.7165 17.6365C13.6785 19.5654 15.0132 21.2752 16.6401 22.6627C15.8195 22.8232 14.9787 22.8448 14.1514 22.7266ZM23.7451 22.3903C23.1716 22.5448 22.5889 22.6613 22.0007 22.7389C21.4117 22.6614 20.8283 22.5449 20.254 22.3903C18.2033 21.8521 16.0374 19.7219 14.462 16.6925C12.6704 13.2438 12.0469 9.47672 12.8834 7.09538C14.473 2.55356 19.9093 2.03223 22.1653 2.01765C25.4445 2.03783 29.66 2.93475 31.1157 7.09538C31.9501 9.4756 31.3353 13.2427 29.5393 16.6903C27.9628 19.7197 25.798 21.851 23.7451 22.3891V22.3903ZM27.3579 22.6649C28.9873 21.2782 30.3233 19.5673 31.2848 17.6365C33.353 13.6542 34.0019 9.36013 32.9798 6.42493C34.8231 7.1032 36.3564 8.45266 37.2854 10.2145C37.7798 11.2111 38.0446 12.31 38.0594 13.4271C38.0743 14.5442 37.8388 15.6501 37.371 16.66C36.7089 18.1267 35.7356 19.4246 34.5215 20.4595C33.3074 21.4945 31.883 22.2405 30.3517 22.6436C30.1773 22.6248 30.0013 22.6546 29.8423 22.73C29.0162 22.8474 28.1769 22.825 27.3579 22.6638V22.6649ZM41.6601 24.9555C41.165 26.7493 40.5009 27.8122 39.7939 27.9579C39.2516 28.07 38.9156 27.7595 38.0033 26.7673C37.1671 25.7707 36.1693 24.9284 35.0536 24.2772C34.5589 24.0089 34.0429 23.7839 33.5111 23.6045C36.0014 22.2591 37.9895 20.1148 39.1692 17.502C39.4825 16.8016 39.7135 16.0659 39.8575 15.3101C40.8408 16.6799 41.5127 18.2562 41.8245 19.9245C42.1364 21.5927 42.0802 23.311 41.6601 24.9543V24.9555Z" fill="currentColor"/>\n    <path d="M17.3428 15.7782C16.1626 13.048 15.7674 10.0313 16.2032 7.08028C16.2231 6.94931 16.2174 6.81565 16.1867 6.68691C16.1559 6.55816 16.1006 6.43686 16.024 6.32994C15.9473 6.22302 15.8508 6.13257 15.7399 6.06375C15.629 5.99493 15.5059 5.94908 15.3777 5.92884C15.2495 5.90859 15.1186 5.91434 14.9925 5.94576C14.8665 5.97717 14.7477 6.03365 14.643 6.11194C14.5383 6.19023 14.4497 6.2888 14.3824 6.40205C14.315 6.5153 14.2701 6.641 14.2503 6.77197C13.7579 10.1061 14.2045 13.5144 15.538 16.5989C15.5889 16.7227 15.6636 16.8349 15.7575 16.9289C15.8515 17.0229 15.9628 17.0967 16.0851 17.1462C16.2074 17.1956 16.3381 17.2197 16.4695 17.2168C16.601 17.214 16.7306 17.1844 16.8507 17.1298C16.9709 17.0752 17.0791 16.9966 17.1691 16.8987C17.2591 16.8008 17.3291 16.6855 17.3749 16.5597C17.4208 16.4338 17.4415 16.2998 17.436 16.1656C17.4305 16.0315 17.3988 15.8997 17.3428 15.7782Z" fill="currentColor"/>\n    <path d="M19.696 19.2067C19.2865 18.9533 18.9569 18.5852 18.7464 18.146C18.6921 18.023 18.6143 17.9124 18.5174 17.8206C18.4206 17.7288 18.3067 17.6578 18.1825 17.6118C18.0583 17.5658 17.9263 17.5456 17.7944 17.5526C17.6625 17.5596 17.5333 17.5935 17.4144 17.6524C17.2955 17.7112 17.1894 17.7939 17.1023 17.8953C17.0153 17.9968 16.949 18.1151 16.9075 18.2432C16.866 18.3712 16.85 18.5065 16.8606 18.641C16.8712 18.7755 16.908 18.9065 16.969 19.0262C17.3477 19.8156 17.9407 20.4772 18.6772 20.9321C18.7884 21.0004 18.9117 21.0457 19.0401 21.0654C19.1684 21.085 19.2993 21.0786 19.4253 21.0466C19.5512 21.0146 19.6698 20.9576 19.7741 20.8788C19.8785 20.8 19.9666 20.701 20.0335 20.5874C20.1004 20.4738 20.1448 20.3478 20.164 20.2168C20.1832 20.0857 20.177 19.952 20.1456 19.8234C20.1143 19.6947 20.0585 19.5737 19.9813 19.4671C19.9041 19.3605 19.8072 19.2705 19.696 19.2022V19.2067Z" fill="currentColor"/>\n    </svg>\n    ',meals:'<svg width="44" height="47" viewBox="0 0 44 47" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <g clip-path="url(#clip0_598_8219)">\n    <path d="M42.941 2.11595C42.7415 1.9851 42.4981 1.93888 42.2644 1.98745C42.0307 2.03602 41.8259 2.1754 41.695 2.37496L34.006 14.102C33.3796 13.6496 32.7178 13.2483 32.027 12.902C32.0551 12.8557 32.0786 12.8068 32.097 12.756L35.4431 1.14795C35.5094 0.91841 35.4818 0.671927 35.3663 0.46273C35.2509 0.253533 35.0571 0.098759 34.8275 0.0324549C34.598 -0.0338492 34.3515 -0.0062506 34.1423 0.109178C33.9331 0.224607 33.7783 0.41841 33.712 0.647954L30.382 12.202C28.8498 11.6558 27.2357 11.3751 25.609 11.372C23.5868 11.3208 21.5789 11.7248 19.7337 12.5541C17.8886 13.3834 16.2534 14.6167 14.949 16.163C13.472 15.5617 11.8698 15.3326 10.2834 15.4959C8.69704 15.6593 7.17511 16.21 5.85156 17.0996C4.528 17.9893 3.44339 19.1906 2.69314 20.5978C1.94289 22.0051 1.54999 23.5752 1.54904 25.17H0.900049C0.781014 25.1699 0.663159 25.1936 0.553309 25.2394C0.443459 25.2853 0.343801 25.3524 0.260096 25.4371C0.176391 25.5217 0.110305 25.6221 0.0656684 25.7325C0.0210317 25.8428 -0.00126705 25.9609 5.5571e-05 26.08C0.0892682 29.5951 1.16582 33.0142 3.10662 35.9464C5.04743 38.8786 7.77413 41.2054 10.975 42.661V45.147C10.975 45.3856 11.0699 45.6146 11.2386 45.7834C11.4074 45.9521 11.6364 46.047 11.8751 46.047H29.692C29.9307 46.047 30.1596 45.9521 30.3284 45.7834C30.4972 45.6146 30.592 45.3856 30.592 45.147V42.665C33.7927 41.2092 36.5191 38.8822 38.4597 35.9501C40.4004 33.018 41.4768 29.599 41.566 26.084C41.5674 25.9649 41.5451 25.8468 41.5004 25.7365C41.4558 25.6261 41.3897 25.5257 41.306 25.4411C41.2223 25.3565 41.1226 25.2893 41.0128 25.2434C40.9029 25.1976 40.7851 25.1739 40.666 25.174H39.976C39.82 21.3924 38.1759 17.8258 35.402 15.251L43.197 3.36196C43.3282 3.16274 43.3749 2.91961 43.3269 2.68598C43.2789 2.45235 43.1401 2.24733 42.941 2.11595ZM11.292 17.249C13.3949 17.2513 15.4113 18.0864 16.9 19.5716C18.3887 21.0568 19.2286 23.0711 19.236 25.174H18.476C18.4537 23.2835 17.6871 21.4779 16.3423 20.149C14.9976 18.82 13.1832 18.0747 11.2925 18.0747C9.4019 18.0747 7.58747 18.82 6.24273 20.149C4.89799 21.4779 4.13134 23.2835 4.10903 25.174H3.34905C3.35619 23.0712 4.1959 21.0569 5.68447 19.5717C7.17304 18.0865 9.18928 17.2513 11.292 17.249ZM30.46 25.174C30.3295 24.0738 29.829 23.0506 29.0406 22.2723C28.2521 21.494 27.2226 21.0067 26.1208 20.8904C25.019 20.7742 23.9104 21.0358 22.9769 21.6324C22.0433 22.2291 21.3403 23.1252 20.983 24.174C20.8976 23.3879 20.7156 22.6154 20.441 21.874C21.2275 20.8287 22.312 20.0461 23.5519 19.6292C24.7917 19.2124 26.1287 19.1807 27.3869 19.5384C28.6451 19.8962 29.7655 20.6265 30.6005 21.6334C31.4356 22.6402 31.9461 23.8763 32.065 25.179L30.46 25.174ZM28.66 25.174H22.555C22.6942 24.4666 23.0746 23.8296 23.6314 23.3717C24.1882 22.9138 24.8867 22.6634 25.6075 22.6634C26.3284 22.6634 27.0269 22.9138 27.5837 23.3717C28.1404 23.8296 28.5209 24.4666 28.66 25.174ZM33.8661 25.174C33.7524 23.5697 33.1734 22.0335 32.1999 20.7533C31.2265 19.4731 29.9008 18.5046 28.3853 17.9663C26.8698 17.428 25.2303 17.3434 23.6674 17.7227C22.1045 18.102 20.6862 18.9288 19.5861 20.102C19.3425 19.7013 19.0704 19.3187 18.772 18.957C19.6483 18.0285 20.7095 17.2942 21.8871 16.8014C23.0648 16.3086 24.3327 16.0683 25.609 16.096C28.0701 16.1 30.4374 17.0409 32.2298 18.7275C34.0222 20.414 35.1053 22.7196 35.259 25.176L33.8661 25.174ZM15.376 25.174C15.376 24.0911 14.9459 23.0525 14.1802 22.2868C13.4145 21.5211 12.3759 21.091 11.2931 21.091C10.2102 21.091 9.17165 21.5211 8.40594 22.2868C7.64023 23.0525 7.21005 24.0911 7.21005 25.174H5.91003C5.92931 23.7594 6.5048 22.4093 7.51193 21.4158C8.51906 20.4223 9.87684 19.8653 11.2915 19.8653C12.7062 19.8653 14.064 20.4223 15.0712 21.4158C16.0783 22.4093 16.6537 23.7594 16.673 25.174H15.376ZM13.576 25.174H9.01205C9.02455 24.5769 9.27051 24.0085 9.6972 23.5906C10.1239 23.1728 10.6973 22.9387 11.2945 22.9387C11.8918 22.9387 12.4652 23.1728 12.8919 23.5906C13.3186 24.0085 13.5646 24.5769 13.5771 25.174H13.576ZM12.7761 44.251V43.132H28.792V44.251H12.7761ZM29.136 41.332H12.436C9.52258 40.1406 6.99281 38.1712 5.12332 35.6389C3.25383 33.1066 2.11663 30.109 1.83605 26.974H39.7281C39.4482 30.1081 38.3122 33.1051 36.4441 35.6373C34.5761 38.1695 32.048 40.1395 29.136 41.332ZM38.178 25.174H37.0601C36.9048 22.2401 35.6312 19.4773 33.5013 17.4538C31.3713 15.4303 28.547 14.2998 25.609 14.295C24.0957 14.2643 22.5927 14.55 21.1962 15.1338C19.7996 15.7176 18.5404 16.5865 17.499 17.685C17.2087 17.4481 16.9052 17.2277 16.5901 17.025C17.7218 15.7645 19.1155 14.7668 20.6734 14.1017C22.2314 13.4367 23.9159 13.1204 25.609 13.175C28.8438 13.1792 31.9531 14.4275 34.2929 16.6611C36.6327 18.8948 38.0237 21.9428 38.178 25.174Z" fill="currentColor"/>\n    <path d="M3.39209 30.1722C4.045 32.6025 5.31628 34.8222 7.08209 36.6152C7.16443 36.7021 7.26327 36.7717 7.37286 36.8199C7.48244 36.8682 7.60056 36.8941 7.72027 36.8961C7.83999 36.8981 7.95888 36.8762 8.07003 36.8317C8.18118 36.7872 8.28235 36.7209 8.36758 36.6368C8.45281 36.5528 8.52038 36.4525 8.56637 36.342C8.61237 36.2314 8.63585 36.1128 8.63543 35.9931C8.63501 35.8733 8.6107 35.7549 8.56393 35.6447C8.51716 35.5344 8.44888 35.4347 8.36306 35.3512C6.81633 33.7796 5.70257 31.8346 5.13006 29.7052C5.1013 29.589 5.04966 29.4797 4.97815 29.3837C4.90663 29.2878 4.81669 29.207 4.71359 29.1462C4.61049 29.0854 4.49631 29.0458 4.37771 29.0297C4.25912 29.0136 4.1385 29.0213 4.02291 29.0523C3.90733 29.0834 3.7991 29.1372 3.70456 29.2106C3.61001 29.284 3.53106 29.3755 3.47232 29.4798C3.41357 29.584 3.3762 29.699 3.36242 29.8179C3.34865 29.9368 3.35875 30.0572 3.39209 30.1722Z" fill="#323232"/>\n    <path d="M10.5356 39.5502C10.7282 39.6767 10.962 39.7245 11.1889 39.6838C11.4157 39.643 11.6182 39.5168 11.7547 39.3312C11.8913 39.1456 11.9514 38.9146 11.9227 38.6859C11.8941 38.4573 11.7788 38.2483 11.6006 38.1022L10.3336 37.1752C10.1407 37.0392 9.90209 36.9844 9.66918 37.0226C9.43627 37.0609 9.2277 37.1891 9.08843 37.3797C8.94915 37.5702 8.89031 37.8079 8.92458 38.0414C8.95884 38.2749 9.08345 38.4857 9.27159 38.6282L10.5356 39.5502Z" fill="#323232"/>\n    </g>\n    <defs>\n    <clipPath id="clip0_598_8219">\n    <rect width="43.348" height="46.051" fill="white"/>\n    </clipPath>\n    </defs>\n    </svg>'};let rt=(()=>{class o extends d.Tv{get start_of_date(){return(0,se.A)((0,L.A)(this._state.getFilters().date,this.offset_day)).valueOf()}get min_offset(){return this.offset_day>0?0:this._min_offset}get step_interval(){return this._settings.get("app.catering.step_interval")||5}get max_offset(){const t=Math.min((0,Y.A)((0,L.A)(this._state.getFilters().date,this.offset_day)).valueOf(),(0,H.A)(this._state.getFilters().date,this._state.getFilters().duration).valueOf()),n=(0,lt.A)(t,this._state.getFilters().date);return Math.min(n,Math.min(1439,this._max_offset))}get use_24hr(){return this._settings.get("app.use_24_hour_time")}constructor(t,n){super(),this._state=t,this._settings=n,this.search=!1,this.at_time=!1,this.at_timeChange=new e.bkB,this.offset=0,this.offsetChange=new e.bkB,this.offset_day=0,this.offset_dayChange=new e.bkB,this._min_offset=0,this._max_offset=60,this.icons=oi,this.filters=this._state.filters,this.setFilters=i=>this._state.setFilters(i),this.categories=this._state.categories,this.exact_tooltip="Deliver at exactly specified time. \nNote that changes to the booking will not be \nreflected in the order if this is set.",this.day_options=[]}ngOnInit(){this._min_offset=Math.max(this._settings.get("app.catering.min_offset"),0),this.subscription("filters",this._state.filters.subscribe(()=>{this._max_offset=Math.max(15,(this._state.getFilters().duration||60)-this._settings.get("app.catering.end_offset")),this._updateDayOptions()})),this._updateDayOptions()}toggleCategory(t){var n=this;return(0,h.A)(function*(){const{categories:i}=yield n.filters.pipe((0,W.s)(1)).toPromise();i.includes(t)?n.setFilters({categories:i.filter(s=>s!==t)}):n.setFilters({categories:[...i,t]})})()}toggleTag(t){var n=this;return(0,h.A)(function*(){const{tags:i}=yield n.filters.pipe((0,W.s)(1)).toPromise();i.includes(t)?n.setFilters({tags:i.filter(s=>s!==t)}):n.setFilters({tags:[...i,t]})})()}_updateDayOptions(){const{date:t,duration:n}=this._state.getFilters();if(n<=1440)return this.day_options=[];let i=(0,se.A)(t),s=0;const l=(0,Y.A)((0,H.A)(t,n)).valueOf(),r=[];for(;i.valueOf()<=l;)r.push({id:s,value:i.valueOf()}),i=(0,L.A)(i,1),s++;this.day_options=r}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(Ie),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["catering-item-filters"]],inputs:{search:"search",at_time:"at_time",offset:"offset",offset_day:"offset_day"},outputs:{at_timeChange:"at_timeChange",offsetChange:"offsetChange",offset_dayChange:"offset_dayChange"},features:[e.Vt3],decls:12,vars:15,consts:()=>{let t,n;return t=$localize`:␟07b96192315617e1c3c3f020fed4749eafda31eb␟637156553417356107: Options `,n=$localize`:␟24300e769843b029b0346b3ea18e51e4e97a3502␟3888583854485349732: Catergories `,[t,n,[1,"px-4","mt-3","mb-2"],["appearance","outline",1,"w-full","h-14"],["matPrefix","",1,"text-xl"],["matInput","","placeholder","Search menu...",3,"ngModelChange","ngModel"],["class","hidden sm:block font-medium px-2 py-2",4,"ngIf"],["class","flex flex-col px-2",4,"ngIf"],["class","hidden sm:block font-medium px-2 py-4",4,"ngIf"],[1,"flex","flex-col","px-2","space-y-4"],[3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[1,"hidden","sm:block","font-medium","px-2","py-2"],[1,"flex","flex-col","px-2"],[3,"ngModelChange","ngModel","matTooltip"],[4,"ngIf"],[3,"ngModelChange","ngModel","time","step","min","max","use_24hr"],["appearance","outline",1,"w-full","no-subscript","mb-4"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"hidden","sm:block","font-medium","px-2","py-4"]]},template:function(n,i){if(1&n&&(e.j41(0,"div",2)(1,"mat-form-field",3)(2,"app-icon",4),e.EFF(3,"search"),e.k0s(),e.j41(4,"input",5),e.nI1(5,"async"),e.bIt("ngModelChange",function(l){return i.setFilters({search:l})}),e.k0s()()(),e.DNE(6,Ho,2,0,"h3",6)(7,ei,8,11,"div",7)(8,ti,2,0,"h3",8),e.j41(9,"div",9),e.DNE(10,ni,3,5,"mat-checkbox",10),e.nI1(11,"async"),e.k0s()),2&n){let s;e.AVh("sm:hidden",!i.search),e.R7$(4),e.Y8G("ngModel",null==(s=e.bMT(5,11,i.filters))?null:s.search),e.R7$(2),e.Y8G("ngIf",!i.search),e.R7$(),e.Y8G("ngIf",!i.search),e.R7$(),e.Y8G("ngIf",!i.search),e.R7$(),e.AVh("sm:hidden",i.search)("sm:pt-1",!i.search),e.R7$(),e.Y8G("ngForOf",e.bMT(11,13,i.categories))}},dependencies:[c.Sq,c.bT,F.wT,D.So,q.oV,m.me,m.BC,m.vS,E.R,I.rl,I.JW,te.VO,X.fg,ae.y,c.Jj,c.vh],styles:["[_nghost-%COMP%]{min-width:16rem}\n\n/*# sourceMappingURL=catering-item-filters.component.ts-angular-inline--101.css.map*/"]})}return o})();function ii(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",25),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.displayed=null)}),e.pXf(1,4),e.k0s()}}const si=[];let _t=(()=>{class o{get favorites(){return this._settings.get("favourite_menu_items")||si}get selected_ids(){return this.selected.map(t=>t.custom_id).join(",")}get count(){return this.selected.reduce((t,n)=>t+n.quantity,0)}get code(){return this._org.currency_code}constructor(t,n,i,s){this._settings=t,this._order=n,this._org=i,this._data=s,this.displayed=null,this.selected=[...this._data.items||[]],this.exact_time=this._data.exact_time??!1;const{duration:l}=this._data.details;this._order.setFilters(this._data.details),this.offset=Math.min(Math.max(this._settings.get("app.catering.min_offset"),this._data.offset||0),(l||60)-this._settings.get("app.catering.end_offset")),this.offset_day=this._data.offset_day||0}isSelected(t){return t&&this.selected_ids.includes(t)}setSelected(t,n){const i=this.selected.filter(s=>s.custom_id!==t.custom_id);if(n){const s=new P.T({...t,in_order:!0});i.push(s),this.displayed=s}this.selected=i}toggleFavourite(t){const n=this.favorites;n.includes(t.id)?this._settings.saveUserSetting("favourite_menu_items",n.filter(s=>s!==t.id)):this._settings.saveUserSetting("favourite_menu_items",[...n,t.id])}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(d.h$),e.rXU(Ie),e.rXU(T.yb),e.rXU(M.Vh))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["new-catering-order-modal"]],decls:32,vars:28,consts:()=>{let t,n,i,s,l;return t=$localize`:␟737cdc02079fb61b2944ecf62f908ab35efb2d5a␟2076287131803615740:Add Catering`,n=$localize`:␟30d3439b0e0095fe69503245f3bd7a2e9498be7c␟8443571736703532556: View List `,i=$localize`:␟18843b85d1a4f17fefafd07bc5cde636dca44295␟819716823718458903:Back to form`,s=$localize`:␟523976668707aada89243171aa2abc1402656c5b␟4024487187516268099: ${"\ufffd0\ufffd"}:INTERPOLATION: items(s) added `,l=$localize`:␟ccda1d41ca79703a85a3a598c1d97e040a32b766␟874721418273731876: Back `,[t,n,i,s,l,[1,"w-[100vw]","h-[100vh]","sm:relative","sm:w-auto","sm:h-auto","flex","flex-col","bg-base-100"],[1,"flex","items-center","space-x-4","w-full"],["icon","","matRipple","",1,"bg-neutral",3,"mat-dialog-close"],[1,"flex-1","flex","items-center","divide-x","divide-base-200","min-h-[65vh]","h-[65vh]","sm:max-h-[65vh]","sm:max-w-[95vw]","w-full","overflow-hidden"],[1,"h-full","hidden","sm:block","sm:max-w-[12rem]","sm:h-[65vh]","sm:max-h-full",3,"at_timeChange","offsetChange","offset_dayChange","at_time","offset","offset_day"],[1,"flex","flex-col","items-center","flex-1","w-1/2","h-full","sm:h-[65vh]"],[1,"w-full","border-b","border-base-200",3,"search"],[1,"flex-1","h-1/2","w-full","overflow-hidden",3,"toggleFav","onSelect","active","selected","selected_items","favorites"],[1,"h-full","w-full","sm:h-[65vh]","absolute","sm:relative","sm:flex","sm:max-w-[16rem]","z-20","bg-base-100",3,"activeChange","toggleFav","close","item","active","code","fav"],[1,"flex","sm:hidden","flex-col-reverse","items-center","justify-end","px-2","pt-2","pb-[5.5rem]","border-t","border-base-200","w-full"],["btn","","matRipple","","name","catering-item-return","class","inverse sm:hidden w-full sm:w-auto",3,"click",4,"ngIf"],["btn","","matRipple","","name","save-catering-item",1,"w-full","sm:w-auto","sm:mb-0",3,"mat-dialog-close"],[1,"hidden","sm:flex","items-center","justify-between","p-2","border-t","border-base-200","w-full"],["btn","","matRipple","","name","catering-item-return",1,"clear","text-secondary",3,"mat-dialog-close"],[1,"flex","items-center"],[1,"text-xl"],[1,"mr-1","underline"],[1,"opacity-60","text-sm"],["btn","","matRipple","","name","toggle-catering-item",3,"click","disabled"],[1,"mr-1"],["btn","","matRipple","","name","catering-item-return",1,"inverse","sm:hidden","w-full","sm:w-auto",3,"click"]]},template:function(n,i){1&n&&(e.j41(0,"div",5)(1,"header",6)(2,"button",7)(3,"app-icon"),e.EFF(4,"close"),e.k0s()(),e.j41(5,"h3"),e.pXf(6,0),e.k0s()(),e.j41(7,"main",8)(8,"catering-item-filters",9),e.mxI("at_timeChange",function(l){return e.DH7(i.exact_time,l)||(i.exact_time=l),l})("offsetChange",function(l){return e.DH7(i.offset,l)||(i.offset=l),l})("offset_dayChange",function(l){return e.DH7(i.offset_day,l)||(i.offset_day=l),l}),e.k0s(),e.j41(9,"div",10),e.nrm(10,"catering-item-filters",11),e.j41(11,"catering-item-list",12),e.bIt("toggleFav",function(l){return i.toggleFavourite(l)})("onSelect",function(l){return i.displayed=l}),e.k0s()(),e.j41(12,"catering-item-details",13),e.bIt("activeChange",function(l){return i.setSelected(i.displayed,l)})("toggleFav",function(){return i.toggleFavourite(i.displayed)})("close",function(){return i.displayed=null}),e.k0s()(),e.j41(13,"footer",14),e.DNE(14,ii,2,0,"button",15),e.j41(15,"button",16),e.pXf(16,1),e.k0s()(),e.j41(17,"footer",17)(18,"button",18)(19,"div",19)(20,"app-icon",20),e.EFF(21,"arrow_back"),e.k0s(),e.j41(22,"div",21),e.pXf(23,2),e.k0s()()(),e.j41(24,"p",22),e.pXf(25,3),e.k0s(),e.j41(26,"button",23),e.bIt("click",function(){return i.setSelected(i.displayed,!i.isSelected(null==i.displayed?null:i.displayed.custom_id))}),e.j41(27,"div",19)(28,"app-icon",20),e.EFF(29),e.k0s(),e.j41(30,"div",24),e.EFF(31),e.k0s()()()()()),2&n&&(e.R7$(2),e.Y8G("mat-dialog-close",i.selected),e.R7$(6),e.R50("at_time",i.exact_time)("offset",i.offset)("offset_day",i.offset_day),e.R7$(2),e.Y8G("search",!0),e.R7$(),e.Y8G("active",null==i.displayed?null:i.displayed.custom_id)("selected",i.selected_ids)("selected_items",i.selected)("favorites",i.favorites),e.R7$(),e.AVh("hidden",!i.displayed)("inset-0",i.displayed),e.Y8G("item",i.displayed)("active",i.selected_ids.includes((null==i.displayed?null:i.displayed.custom_id)||""))("code",i.code)("fav",!!i.displayed&&i.favorites.includes((null==i.displayed?null:i.displayed.id)||"")),e.R7$(2),e.Y8G("ngIf",i.displayed),e.R7$(),e.AVh("mb-2",i.displayed),e.Y8G("mat-dialog-close",i.selected),e.R7$(3),e.Y8G("mat-dialog-close",i.selected),e.R7$(7),e.uP7(i.count),e.nnv(25),e.R7$(),e.AVh("inverse",i.isSelected(null==i.displayed?null:i.displayed.custom_id)),e.Y8G("disabled",!i.displayed),e.R7$(3),e.JRh(i.isSelected(null==i.displayed?null:i.displayed.custom_id)?"remove":"add"),e.R7$(2),e.SpI(" ",i.isSelected(null==i.displayed?null:i.displayed.custom_id)?"Remove from Booking":"Add to booking"," "))},dependencies:[c.bT,M.tx,E.R,F.r6,st,at,rt]})}return o})();function ai(o,a){if(1&o&&(e.j41(0,"div",16)(1,"app-icon"),e.EFF(2,"priority_high"),e.k0s()()),2&o){const t=e.XpG(2);e.Y8G("matTooltip",t.err_tooltip)}}function li(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",17),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,s=e.XpG();return e.Njj(s.duplicateOrder(i))}),e.j41(1,"app-icon"),e.EFF(2,"content_copy"),e.k0s()()}}function ri(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",18),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,s=e.XpG();return e.Njj(s.editOrder(i))}),e.j41(1,"app-icon"),e.EFF(2,"edit"),e.k0s()()}}function _i(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,s=e.XpG();return e.Njj(s.removeOrder(i))}),e.j41(1,"app-icon"),e.EFF(2,"delete"),e.k0s()()}}function ci(o,a){if(1&o&&(e.j41(0,"span",27),e.EFF(1),e.k0s()),2&o){const t=e.XpG().$implicit,n=e.XpG(2);e.Y8G("matTooltip",n.optionList(t)),e.R7$(),e.SpI(" ",(null==t.option_list?null:t.option_list.length)||"0"," option(s) ")}}function di(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",28),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,s=e.XpG().$implicit,l=e.XpG();return e.Njj(l.removeOrderItem(s,i))}),e.j41(1,"app-icon"),e.EFF(2,"delete"),e.k0s()()}}function mi(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",20)(1,"div",21),e.EFF(2),e.DNE(3,ci,2,2,"span",22),e.k0s(),e.j41(4,"div",23),e.EFF(5),e.k0s(),e.j41(6,"div",24),e.EFF(7),e.nI1(8,"currency"),e.k0s(),e.DNE(9,di,3,0,"button",25),e.j41(10,"button",26),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.toggleFavourite(i))}),e.j41(11,"app-icon"),e.EFF(12),e.k0s()()()}if(2&o){const t=a.$implicit,n=e.XpG(2);e.R7$(2),e.SpI(" ",t.name||"Item"," "),e.R7$(),e.Y8G("ngIf",null==t.option_list?null:t.option_list.length),e.R7$(2),e.SpI(" x",t.quantity," "),e.R7$(2),e.SpI(" ",e.i5U(8,9,t.unit_price_with_options/100,n.currency_code)," ea "),e.R7$(2),e.Y8G("ngIf",!n.disabled),e.R7$(),e.AVh("text-blue-400",n.favorites.includes(t.id)),e.Y8G("matTooltip",n.favorites.includes(t.id)?"Remove from favourites":"Add to favourites"),e.R7$(2),e.JRh(n.favorites.includes(t.id)?"favorite":"favorite_border")}}function pi(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div"),e.EFF(5),e.nI1(6,"date"),e.nI1(7,"date"),e.k0s(),e.DNE(8,ai,3,1,"div",8),e.k0s(),e.j41(9,"div",9),e.EFF(10),e.nI1(11,"currency"),e.k0s()(),e.DNE(12,li,3,0,"button",10)(13,ri,3,0,"button",11)(14,_i,3,0,"button",12),e.j41(15,"button",13),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.show_order[i.id]=!s.show_order[i.id])}),e.j41(16,"app-icon"),e.EFF(17),e.k0s()()(),e.j41(18,"div",14),e.DNE(19,mi,13,12,"div",15),e.k0s()()}if(2&o){const t=a.$implicit,n=e.XpG();e.AVh("border-error",n.end_time<t.deliver_at)("border-base-300",n.end_time>=t.deliver_at),e.R7$(5),e.Lme(" Order for ",e.i5U(6,16,t.deliver_at_time,"mediumDate")," at ",e.i5U(7,19,t.deliver_at_time,n.time_format)," "),e.R7$(3),e.Y8G("ngIf",n.end_time<t.deliver_at),e.R7$(2),e.Lme(" ",t.item_count," item(s) for ",e.i5U(11,22,t.total_cost/100,n.currency_code)," "),e.R7$(2),e.Y8G("ngIf",!n.disabled),e.R7$(),e.Y8G("ngIf",!n.disabled),e.R7$(),e.Y8G("ngIf",!n.disabled),e.R7$(),e.Y8G("matTooltip",n.show_order[t.id]?"Hide order items":"Show order items"),e.R7$(2),e.SpI(" ",n.show_order[t.id]?"expand_less":"expand_more"," "),e.R7$(),e.Y8G("@show",n.show_order[t.id]?"show":"hide"),e.R7$(),e.Y8G("ngForOf",t.items)}}const ui=[];let ct=(()=>{class o{get favorites(){return this._settings.get("favourite_menu_items")||ui}get end_time(){const t=(this.options.date||Date.now())+60*(this.options.duration||30)*1e3;return this.options.all_day?(0,Y.A)(t).valueOf():t}get time_format(){return this._settings.time_format||"shortTime"}get currency_code(){return this._org.building?.currency||"USD"}constructor(t,n,i){this._settings=t,this._org=n,this._dialog=i,this.options={},this.orders=[],this.show_order={},this.disabled=!1,this.err_tooltip="Delivery time is outside of the event time.\nThis order will be ignored.",this.selected=[],this.registerOnChange=s=>this._onChange=s,this.registerOnTouched=s=>this._onTouch=s,this.setDisabledState=s=>this.disabled=s}setValue(t){this.orders=t,this._onChange&&this._onChange(this.orders)}ngOnChanges(t){t.options&&(this.orders=(this.orders||[]).map(n=>new y.M({...n,event:this.options})))}writeValue(t){this.orders=(t||[]).map(n=>new y.M({...n,event:this.options}))}removeOrder(t){const n=this.orders.filter(i=>i.id!==t.id);this.setValue(n)}duplicateOrder(t){const n=new y.M({...t,id:`order-${(0,d.DU)(8)}`});this.setValue([...this.orders,n])}removeOrderItem(t,n){const i=new y.M({...t,items:t.items.filter(l=>l.custom_id!==n.custom_id)}),s=this.orders.filter(l=>l.id!==t.id);this.setValue(i.items.length>0?[...s,i]:s)}editOrder(t=new y.M){const n=this._dialog.open(_t,{data:{items:t.items,details:{...this.options,date:this.options.all_day?(0,se.A)(this.options.date).valueOf():this.options.date,duration:this.options.all_day?Math.max(1440,this.options.duration):this.options.duration},exact_time:!!t.deliver_time,offset:t.deliver_offset,offset_day:t.deliver_day_offset}});n.afterClosed().subscribe(i=>{const s=this.orders.filter(_=>_.id!==t.id);if(!i?.length)return;const l=new Date(this.options.date);for(const _ of i){_.options=[..._.options.map(u=>({...u}))];for(const u of _.options){const g=_.option_list.find(f=>f.id===u.id);u.active=!!g}}const r=new y.M({...t,items:i,event:this.options,deliver_offset:n.componentInstance.offset,deliver_time:n.componentInstance.exact_time?l.getHours()+l.getMinutes()/60:null,deliver_day_offset:n.componentInstance.offset_day||0});r.item_count<=0||this.setValue([...s,r])})}optionList(t){return t.option_list?.map(n=>n.name).join("\n")}toggleFavourite(t){const n=this.favorites;n.includes(t.id)?this._settings.saveUserSetting("favourite_menu_items",n.filter(s=>s!==t.id)):this._settings.saveUserSetting("favourite_menu_items",[...n,t.id])}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(d.h$),e.rXU(T.yb),e.rXU(M.bZ))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["catering-list-field"]],inputs:{options:"options"},features:[e.Jv_([{provide:m.kq,useExisting:(0,e.Rfq)(()=>o),multi:!0}]),e.OA$],decls:8,vars:2,consts:[["list","",1,"space-y-2"],["order","","class","border shadow bg-base-100 rounded-xl overflow-hidden",3,"border-error","border-base-300",4,"ngFor","ngForOf"],["btn","","matRipple","","name","add-catering-item",1,"w-full","inverse","mt-2",3,"click","disabled"],[1,"flex","items-center","justify-center","space-x-2"],["order","",1,"border","shadow","bg-base-100","rounded-xl","overflow-hidden"],[1,"flex","items-center","space-x-2","p-4"],[1,"flex-1"],[1,"flex","items-center","space-x-4"],["class","flex items-center justify-center h-6 w-6 rounded-full bg-error text-error-content",3,"matTooltip",4,"ngIf"],[1,"text-xs","opacity-60"],["icon","","matRipple","","matTooltip","Duplicate Order",3,"click",4,"ngIf"],["icon","","matRipple","","matTooltip","Edit Order",3,"click",4,"ngIf"],["icon","","matRipple","","matTooltip","Remove Order","class","text-error",3,"click",4,"ngIf"],["icon","","matRipple","",3,"click","matTooltip"],[1,"flex","flex-col","bg-base-200","divide-y","divide-base-100"],["class","flex items-center px-4 py-1 space-x-2 hover:opacity-90",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-center","h-6","w-6","rounded-full","bg-error","text-error-content",3,"matTooltip"],["icon","","matRipple","","matTooltip","Duplicate Order",3,"click"],["icon","","matRipple","","matTooltip","Edit Order",3,"click"],["icon","","matRipple","","matTooltip","Remove Order",1,"text-error",3,"click"],[1,"flex","items-center","px-4","py-1","space-x-2","hover:opacity-90"],[1,"flex","items-center","flex-1"],["class","text-xs opacity-60 ml-4 font-normal",3,"matTooltip",4,"ngIf"],[1,"rounded","bg-success","text-success-content","text-xs","px-2","py-1"],[1,"rounded","bg-info","text-info-content","text-xs","px-2","py-1"],["icon","","matRipple","","matTooltip","Remove Order Item","class","text-error",3,"click",4,"ngIf"],["icon","","matRipple","","name","toggle-catering-item-favourite",3,"click","matTooltip"],[1,"text-xs","opacity-60","ml-4","font-normal",3,"matTooltip"],["icon","","matRipple","","matTooltip","Remove Order Item",1,"text-error",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"div",0),e.DNE(1,pi,20,25,"div",1),e.k0s(),e.j41(2,"button",2),e.bIt("click",function(){return i.editOrder()}),e.j41(3,"div",3)(4,"app-icon"),e.EFF(5,"search"),e.k0s(),e.j41(6,"span"),e.EFF(7,"Add Order"),e.k0s()()()),2&n&&(e.R7$(),e.Y8G("ngForOf",i.orders),e.R7$(),e.Y8G("disabled",i.disabled))},dependencies:[c.Sq,c.bT,q.oV,E.R,F.r6,c.oe,c.vh],data:{animation:[d.Ft]}})}return o})(),Ci=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.$C({type:o});static#n=this.\u0275inj=e.G2t({imports:[c.MD,G.Cn,Ne.RI,ge.jL,M.hM,D.g7,he.Wk,q.uc,m.YN,m.X1,$t.h,I.RG,yt.cQ,S.D6]})}return o})();var vi=p(17434),bi=p(10895);function Ei(o,a){1&o&&e.nrm(0,"topbar")}function Ri(o,a){1&o&&e.nrm(0,"footer-menu",4)}let ki=(()=>{class o{get hide_nav(){return"true"===localStorage.getItem("PlaceOS.hide_nav")}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["placeos-book"]],decls:5,vars:2,consts:[[4,"ngIf"],[1,"flex-1","flex","sm:flex-row","flex-col-reverse","h-1/2"],[1,"flex","flex-col","flex-1","h-1/2","sm:h-auto","overflow-hidden"],["class","z-10",4,"ngIf"],[1,"z-10"]],template:function(n,i){1&n&&(e.DNE(0,Ei,1,0,"topbar",0),e.j41(1,"div",1)(2,"main",2),e.nrm(3,"router-outlet"),e.k0s()(),e.DNE(4,Ri,1,0,"footer-menu",3)),2&n&&(e.Y8G("ngIf",!i.hide_nav),e.R7$(4),e.Y8G("ngIf",!i.hide_nav))},dependencies:[c.bT,vi.G,bi.e,b.n3],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}\n\n/*# sourceMappingURL=book.component.ts-angular-inline--102.css.map*/"]})}return o})();var $=p(68113);const Oi=(()=>{class o{constructor(t,n,i,s,l){this._legacyCanvasSize=o.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=t,this.$canvas=document.createElement("canvas"),i&&"object"==typeof i?this._onDecode=n:(console.warn(i||s||l?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=n),this._onDecodeError=(n="object"==typeof i?i:{}).onDecodeError||("function"==typeof i?i:this._onDecodeError),this._calculateScanRegion=n.calculateScanRegion||("function"==typeof s?s:this._calculateScanRegion),this._preferredCamera=n.preferredCamera||l||this._preferredCamera,this._legacyCanvasSize="number"==typeof i?i:"number"==typeof s?s:this._legacyCanvasSize,this._maxScansPerSecond=n.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),t.disablePictureInPicture=!0,t.playsInline=!0,t.muted=!0;let r=!1;if(t.hidden&&(t.hidden=!1,r=!0),document.body.contains(t)||(document.body.appendChild(t),r=!0),i=t.parentElement,n.highlightScanRegion||n.highlightCodeOutline){if(s=!!n.overlay,this.$overlay=n.overlay||document.createElement("div"),(l=this.$overlay.style).position="absolute",l.display="none",l.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!s&&n.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}i.insertBefore(this.$overlay,this.$video.nextSibling)}n.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(t),requestAnimationFrame(()=>{let _=window.getComputedStyle(t);"none"===_.display&&(t.style.setProperty("display","block","important"),r=!0),"visible"!==_.visibility&&(t.style.setProperty("visibility","visible","important"),r=!0),r&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),t.style.opacity="0",t.style.width="0",t.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),t.addEventListener("play",this._onPlay),t.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=o.createQrEngine()}static set WORKER_PATH(t){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static hasCamera(){return(0,h.A)(function*(){try{return!!(yield o.listCameras(!1)).length}catch{return!1}})()}static listCameras(t=!1){return(0,h.A)(function*(){if(!navigator.mediaDevices)return[];let i,n=function(){var s=(0,h.A)(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(l=>"videoinput"===l.kind)});return function(){return s.apply(this,arguments)}}();try{t&&(yield n()).every(s=>!s.label)&&(i=yield navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(yield n()).map((s,l)=>({id:s.deviceId,label:s.label||(0===l?"Default Camera":`Camera ${l+1}`)}))}finally{i&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),o._stopVideoStream(i))}})()}hasFlash(){var t=this;return(0,h.A)(function*(){let n;try{if(t.$video.srcObject){if(!(t.$video.srcObject instanceof MediaStream))return!1;n=t.$video.srcObject}else n=(yield t._getCameraStream()).stream;return"torch"in n.getVideoTracks()[0].getSettings()}catch{return!1}finally{n&&n!==t.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),o._stopVideoStream(n))}})()}isFlashOn(){return this._flashOn}toggleFlash(){var t=this;return(0,h.A)(function*(){t._flashOn?yield t.turnFlashOff():yield t.turnFlashOn()})()}turnFlashOn(){var t=this;return(0,h.A)(function*(){if(!t._flashOn&&!t._destroyed&&(t._flashOn=!0,t._active&&!t._paused))try{if(!(yield t.hasFlash()))throw"No flash available";yield t.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(n){throw t._flashOn=!1,n}})()}turnFlashOff(){var t=this;return(0,h.A)(function*(){t._flashOn&&(t._flashOn=!1,yield t._restartVideoStream())})()}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),o._postWorkerMessage(this._qrEnginePromise,"close")}start(){var t=this;return(0,h.A)(function*(){if(t._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!t._active||t._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),t._active=!0,!document.hidden))if(t._paused=!1,t.$video.srcObject)yield t.$video.play();else try{let{stream:n,facingMode:i}=yield t._getCameraStream();!t._active||t._paused?o._stopVideoStream(n):(t._setVideoMirror(i),t.$video.srcObject=n,yield t.$video.play(),t._flashOn&&(t._flashOn=!1,t.turnFlashOn().catch(()=>{})))}catch(n){if(!t._paused)throw t._active=!1,n}})()}stop(){this.pause(),this._active=!1}pause(t=!1){var n=this;return(0,h.A)(function*(){if(n._paused=!0,!n._active)return!0;n.$video.pause(),n.$overlay&&(n.$overlay.style.display="none");let i=()=>{n.$video.srcObject instanceof MediaStream&&(o._stopVideoStream(n.$video.srcObject),n.$video.srcObject=null)};return t?(i(),!0):(yield new Promise(s=>setTimeout(s,300)),!!n._paused&&(i(),!0))})()}setCamera(t){var n=this;return(0,h.A)(function*(){t!==n._preferredCamera&&(n._preferredCamera=t,yield n._restartVideoStream())})()}static scanImage(t,n,i,s,l=!1,r=!1){return(0,h.A)(function*(){let _,u=!1;n&&("scanRegion"in n||"qrEngine"in n||"canvas"in n||"disallowCanvasResizing"in n||"alsoTryWithoutScanRegion"in n||"returnDetailedScanResult"in n)?(_=n.scanRegion,i=n.qrEngine,s=n.canvas,l=n.disallowCanvasResizing||!1,r=n.alsoTryWithoutScanRegion||!1,u=!0):console.warn(n||i||s||l||r?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),n=!!i;try{let g,f,k;if([i,g]=yield Promise.all([i||o.createQrEngine(),o._loadImage(t)]),[s,f]=o._drawToCanvas(g,_,s,l),i instanceof Worker){let C=i;n||o._postWorkerMessageSync(C,"inversionMode","both"),k=yield new Promise((v,O)=>{let A,U,j,ne=-1;U=z=>{z.data.id===ne&&(C.removeEventListener("message",U),C.removeEventListener("error",j),clearTimeout(A),null!==z.data.data?v({data:z.data.data,cornerPoints:o._convertPoints(z.data.cornerPoints,_)}):O(o.NO_QR_CODE_FOUND))},j=z=>{C.removeEventListener("message",U),C.removeEventListener("error",j),clearTimeout(A),O("Scanner error: "+(z?z.message||z:"Unknown Error"))},C.addEventListener("message",U),C.addEventListener("error",j),A=setTimeout(()=>j("timeout"),1e4);let Q=f.getImageData(0,0,s.width,s.height);ne=o._postWorkerMessageSync(C,"decode",Q,[Q.data.buffer])})}else k=yield Promise.race([new Promise((C,v)=>window.setTimeout(()=>v("Scanner error: timeout"),1e4)),(0,h.A)(function*(){try{var[C]=yield i.detect(s);if(!C)throw o.NO_QR_CODE_FOUND;return{data:C.rawValue,cornerPoints:o._convertPoints(C.cornerPoints,_)}}catch(v){if(/not implemented|service unavailable/.test(C=v.message||v))return o._disableBarcodeDetector=!0,o.scanImage(t,{scanRegion:_,canvas:s,disallowCanvasResizing:l,alsoTryWithoutScanRegion:r});throw`Scanner error: ${C}`}})()]);return u?k:k.data}catch(g){if(!_||!r)throw g;let f=yield o.scanImage(t,{qrEngine:i,canvas:s,disallowCanvasResizing:l});return u?f:f.data}finally{n||o._postWorkerMessage(i,"close")}})()}setGrayscaleWeights(t,n,i,s=!0){o._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:t,green:n,blue:i,useIntegerApproximation:s})}setInversionMode(t){o._postWorkerMessage(this._qrEnginePromise,"inversionMode",t)}static createQrEngine(t){return(0,h.A)(function*(){if(t&&console.warn("Specifying a worker path is not required and not supported anymore."),t=()=>p.e("node_modules_qr-scanner_qr-scanner-worker_min_js").then(p.bind(p,45614)).then(i=>i.createWorker()),o._disableBarcodeDetector||!("BarcodeDetector"in window)||!BarcodeDetector.getSupportedFormats||!(yield BarcodeDetector.getSupportedFormats()).includes("qr_code"))return t();let n=navigator.userAgentData;return n&&n.brands.some(({brand:i})=>/Chromium/i.test(i))&&/mac ?OS/i.test(n.platform)&&(yield n.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:i,platformVersion:s})=>/arm/i.test(i||"arm")&&13<=parseInt(s||"13")).catch(()=>!0))?t():new BarcodeDetector({formats:["qr_code"]})})()}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(t){let n=Math.round(.6666666666666666*Math.min(t.videoWidth,t.videoHeight));return{x:Math.round((t.videoWidth-n)/2),y:Math.round((t.videoHeight-n)/2),width:n,height:n,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var t=this.$video,n=t.videoWidth,i=t.videoHeight,s=t.offsetWidth,l=t.offsetHeight,r=t.offsetLeft,_=t.offsetTop,u=window.getComputedStyle(t),g=u.objectFit,f=n/i,k=s/l;switch(g){case"none":var C=n,v=i;break;case"fill":C=s,v=l;break;default:("cover"===g?f>k:f<k)?C=(v=l)*f:v=(C=s)/f,"scale-down"===g&&(C=Math.min(C,n),v=Math.min(v,i))}var[O,A]=u.objectPosition.split(" ").map((j,ne)=>{const Q=parseFloat(j);return j.endsWith("%")?(ne?l-v:s-C)*Q/100:Q});k=this._scanRegion.height||i,g=this._scanRegion.x||0;var U=this._scanRegion.y||0;(f=this.$overlay.style).width=(u=this._scanRegion.width||n)/n*C+"px",f.height=k/i*v+"px",f.top=`${_+A+U/i*v}px`,i=/scaleX\(-1\)/.test(t.style.transform),f.left=`${r+(i?s-O-C:O)+(i?n-g-u:g)/n*C}px`,f.transform=t.style.transform}})}static _convertPoints(t,n){if(!n)return t;let i=n.x||0,s=n.y||0,l=n.width&&n.downScaledWidth?n.width/n.downScaledWidth:1;n=n.height&&n.downScaledHeight?n.height/n.downScaledHeight:1;for(let r of t)r.x=r.x*l+i,r.y=r.y*n+s;return t}_scanFrame(){var t=this;!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)((0,h.A)(function*(){if(!(1>=t.$video.readyState)){var n=Date.now()-t._lastScanTimestamp,i=1e3/t._maxScansPerSecond;n<i&&(yield new Promise(l=>setTimeout(l,i-n))),t._lastScanTimestamp=Date.now();try{var s=yield o.scanImage(t.$video,{scanRegion:t._scanRegion,qrEngine:t._qrEnginePromise,canvas:t.$canvas})}catch(l){if(!t._active)return;t._onDecodeError(l)}!o._disableBarcodeDetector||(yield t._qrEnginePromise)instanceof Worker||(t._qrEnginePromise=o.createQrEngine()),s?(t._onDecode?t._onDecode(s):t._legacyOnDecode&&t._legacyOnDecode(s.data),t.$codeOutlineHighlight&&(clearTimeout(t._codeOutlineHighlightRemovalTimeout),t._codeOutlineHighlightRemovalTimeout=void 0,t.$codeOutlineHighlight.setAttribute("viewBox",`${t._scanRegion.x||0} ${t._scanRegion.y||0} ${t._scanRegion.width||t.$video.videoWidth} ${t._scanRegion.height||t.$video.videoHeight}`),t.$codeOutlineHighlight.firstElementChild.setAttribute("points",s.cornerPoints.map(({x:l,y:r})=>`${l},${r}`).join(" ")),t.$codeOutlineHighlight.style.display="")):t.$codeOutlineHighlight&&!t._codeOutlineHighlightRemovalTimeout&&(t._codeOutlineHighlightRemovalTimeout=setTimeout(()=>t.$codeOutlineHighlight.style.display="none",100))}t._scanFrame()}))}_onDecodeError(t){t!==o.NO_QR_CODE_FOUND&&console.log(t)}_getCameraStream(){var t=this;return(0,h.A)(function*(){if(!navigator.mediaDevices)throw"Camera not found.";let n=/^(environment|user)$/.test(t._preferredCamera)?"facingMode":"deviceId",i=[{width:{min:1024}},{width:{min:768}},{}],s=i.map(l=>Object.assign({},l,{[n]:{exact:t._preferredCamera}}));for(let l of[...s,...i])try{let r=yield navigator.mediaDevices.getUserMedia({video:l,audio:!1});return{stream:r,facingMode:t._getFacingMode(r)||(l.facingMode?t._preferredCamera:"environment"===t._preferredCamera?"user":"environment")}}catch{}throw"Camera not found."})()}_restartVideoStream(){var t=this;return(0,h.A)(function*(){let n=t._paused;(yield t.pause(!0))&&!n&&t._active&&(yield t.start())})()}static _stopVideoStream(t){for(let n of t.getTracks())n.stop(),t.removeTrack(n)}_setVideoMirror(t){this.$video.style.transform="scaleX("+("user"===t?-1:1)+")"}_getFacingMode(t){return(t=t.getVideoTracks()[0])?/rear|back|environment/i.test(t.label)?"environment":/front|user|face/i.test(t.label)?"user":null:null}static _drawToCanvas(t,n,i,s=!1){i=i||document.createElement("canvas");let l=n&&n.x?n.x:0,r=n&&n.y?n.y:0,_=n&&n.width?n.width:t.videoWidth||t.width,u=n&&n.height?n.height:t.videoHeight||t.height;return s||(s=n&&n.downScaledWidth?n.downScaledWidth:_,n=n&&n.downScaledHeight?n.downScaledHeight:u,i.width!==s&&(i.width=s),i.height!==n&&(i.height=n)),(n=i.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,n.drawImage(t,l,r,_,u,0,0,i.width,i.height),[i,n]}static _loadImage(t){return(0,h.A)(function*(){if(t instanceof Image)return yield o._awaitImageLoad(t),t;if(t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||t instanceof SVGImageElement||"OffscreenCanvas"in window&&t instanceof OffscreenCanvas||"ImageBitmap"in window&&t instanceof ImageBitmap)return t;if(!(t instanceof File||t instanceof Blob||t instanceof URL||"string"==typeof t))throw"Unsupported image type.";{let n=new Image;n.src=t instanceof File||t instanceof Blob?URL.createObjectURL(t):t.toString();try{return yield o._awaitImageLoad(n),n}finally{(t instanceof File||t instanceof Blob)&&URL.revokeObjectURL(n.src)}}})()}static _awaitImageLoad(t){return(0,h.A)(function*(){t.complete&&0!==t.naturalWidth||(yield new Promise((n,i)=>{let s=l=>{t.removeEventListener("load",s),t.removeEventListener("error",s),l instanceof ErrorEvent?i("Image load error"):n()};t.addEventListener("load",s),t.addEventListener("error",s)}))})()}static _postWorkerMessage(t,n,i,s){return(0,h.A)(function*(){return o._postWorkerMessageSync(yield t,n,i,s)})()}static _postWorkerMessageSync(t,n,i,s){if(!(t instanceof Worker))return-1;let l=o._workerMessageId++;return t.postMessage({id:l,type:n,data:i},s),l}}return o.DEFAULT_CANVAS_SIZE=400,o.NO_QR_CODE_FOUND="No QR code found",o._disableBarcodeDetector=!1,o._workerMessageId=0,o})(),Ti=["video"];function Mi(o,a){1&o&&(e.j41(0,"div",13)(1,"h2",14),e.EFF(2," Scan QR Code "),e.k0s(),e.j41(3,"span",15),e.EFF(4," Scan the QR code outisde a PlaceOS room or space. "),e.k0s()())}function Ii(o,a){1&o&&(e.j41(0,"div",13)(1,"h2",14),e.EFF(2," Enter Room ID "),e.k0s(),e.j41(3,"span",15),e.EFF(4," Enter the room ID number outisde a PlaceOS room or space. "),e.k0s()())}function xi(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",3),e.nrm(1,"video",4,1),e.j41(3,"div",5),e.DNE(4,Mi,5,0,"div",6)(5,Ii,5,0,"div",6),e.j41(6,"div",7)(7,"div",8)(8,"span",9),e.EFF(9,"Booking ID"),e.k0s(),e.j41(10,"input",10),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.room_code,i)||(s.room_code=i),e.Njj(i)}),e.k0s()()(),e.j41(11,"div",11)(12,"button",12),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.is_scanning=!0)}),e.EFF(13," Scan Code "),e.k0s(),e.j41(14,"button",12),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.is_scanning=!1)}),e.EFF(15," Enter Code "),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(4),e.Y8G("ngIf",t.is_scanning),e.R7$(),e.Y8G("ngIf",!t.is_scanning),e.R7$(2),e.AVh("input",!t.is_scanning),e.R7$(3),e.R50("ngModel",t.room_code),e.R7$(2),e.HbH("flex-1 text-black border-none w-40 "+(t.is_scanning?"bg-base-100":"bg-transparent hover:bg-base-100 hover:dark:bg-neutral-600 bg-opacity-50")),e.R7$(2),e.HbH("flex-1 text-black border-none w-40 "+(t.is_scanning?"bg-transparent hover:bg-base-100 hover:dark:bg-neutral-600 bg-opacity-50":"bg-base-100"))}}function Si(o,a){1&o&&(e.j41(0,"div",16),e.nrm(1,"mat-spinner",17),e.j41(2,"p"),e.EFF(3,"Checking in booking..."),e.k0s()()),2&o&&(e.R7$(),e.Y8G("diameter",32))}let wi=(()=>{class o extends d.Tv{constructor(t,n,i,s){super(),this._router=t,this._route=n,this._event_form=i,this._booking_form=s,this.menu=new e.bkB(!1),this.is_scanning=!0,this.loading=!1}ngOnDestroy(){this._video_el?.nativeElement?.srcObject&&this._video_el.nativeElement.srcObject.getTracks().forEach(t=>t?.stop()),this._qr_scanner?.stop()}ngOnInit(){this.subscription("route.query",this._route.queryParamMap.subscribe(t=>{t.has("asset_id")&&this._checkinBooking(t.get("asset_id")),t.has("space_id")&&this._checkinEvent(t.get("space_id"),t.get("email"))}))}ngAfterViewInit(){!navigator.mediaDevices?.getUserMedia||this.loading||(navigator.mediaDevices.getUserMedia({video:!0}).then(t=>this._video_el.nativeElement.srcObject=t).catch(t=>console.error("Unable to fetch media devices!",t)),this._qr_scanner=new Oi(this._video_el.nativeElement,t=>this.handleQrCode(t)),this._qr_scanner.start())}handleQrCode(t){const n=t;if(n.indexOf("/#/")>0){const s=/[?&]([^=#]+)=([^&#]*)/g,l={};let r;for(;r=s.exec(n);)l[r[1]]=r[2];this._router.navigate([n.split("/#")[1].split("?")[0]],l)}}_checkinBooking(t,n="desk"){var i=this;return(0,h.A)(function*(){i.loading=!0;let s=yield(0,R.tj)({period_start:(0,K.A)(Date.now()),period_end:(0,K.A)((0,H.A)(Date.now(),5)),type:n,email:(0,d.Ny)().email}).toPromise().catch(r=>[]);const l=s.find(r=>r.asset_id===t);if(l)yield(0,R.Z$)(l.id,!0).toPromise().catch(r=>{throw(0,d.UG)(`Unable to checkin booking with resource "${t}"`),i.loading=!1,r}),i._router.navigate(["/book","code","success"]);else{s=yield(0,R.tj)({period_start:(0,K.A)(Date.now()),period_end:(0,K.A)((0,Y.A)(Date.now())),type:n}).toPromise().catch(_=>[]);let r=s.find(_=>_.asset_id===t);if(r)return void i._router.navigate(["/book","code","error"],{queryParams:{type:"not_started",asset_id:t}});if(s=yield(0,R.tj)({period_start:(0,K.A)(Date.now()),period_end:(0,K.A)((0,H.A)(Date.now(),5)),type:n}).toPromise().catch(_=>[]),r=s.find(_=>_.asset_id===t),r)return void i._router.navigate(["/book","code","error"],{queryParams:{type:"wrong_resource",asset_id:t}});i._router.navigate(["/book","code","error"],{queryParams:{type:"no_booking",asset_id:t}}),i._booking_form.newForm(new R.Qr({asset_id:t,type:n})),i._booking_form.setOptions({type:n})}i.loading=!1})()}_checkinEvent(t,n){var i=this;return(0,h.A)(function*(){n||(n=(0,d.Ny)().email),i.loading=!0;const l=(yield(0,$.UU)({period_start:(0,K.A)(Date.now()),period_end:(0,K.A)(Date.now()+3e5)}).toPromise().catch(r=>[])).find(r=>r.resources.find(_=>_.id===t||_.email===t));if(l)yield(0,$.OA)(l.id,n,!0).toPromise().catch(r=>{throw(0,d.UG)(`Unable to checkin event with resource "${t}"`),i.loading=!1,r}),i._router.navigate(["/book","code","success"]),i.loading=!1;else{const r=yield(0,V.V4n)(t).toPromise();r&&i._event_form.newForm(new $.LR({system:r})),i._router.navigate(["/book","meeting"])}i.loading=!1})()}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(b.Ix),e.rXU(b.nX),e.rXU($.Ws),e.rXU(R.nx))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["book-code-flow"]],viewQuery:function(n,i){if(1&n&&e.GBs(Ti,5),2&n){let s;e.mGM(s=e.lsd())&&(i._video_el=s.first)}},outputs:{menu:"menu"},features:[e.Vt3],decls:3,vars:2,consts:[["load_state",""],["video",""],["class","flex-1 overflow-hidden flex items-center justify-center bg-neutral relative",4,"ngIf","ngIfElse"],[1,"flex-1","overflow-hidden","flex","items-center","justify-center","bg-neutral","relative"],["id","video",1,"min-w-full","min-h-full","object-cover"],[1,"absolute","text-white","text-center","inset-0","flex","flex-col","items-center","justify-center"],["class","flex flex-col z-10 justify-end items-center relative",4,"ngIf"],[1,"flex","items-center","justify-center"],["box","",1,"rounded-2xl","h-64","w-64","transition-all","flex","items-center","justify-center","p-8","m-8","space-x-2"],[1,"uppercase"],["matInput","","name","booking-id","placeholder","e.g. 12102910",1,"border-none","bg-none","w-full","text-3xl","text-left",3,"ngModelChange","ngModel"],[1,"m-4","p-2","flex","items-center","space-x-2","bg-base-100","bg-opacity-50","rounded"],["matRipple","",3,"click"],[1,"flex","flex-col","z-10","justify-end","items-center","relative"],[1,"text-3xl","mb-1","uppercase","subpixel-antialiased"],[1,"mb-4"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]],template:function(n,i){if(1&n&&e.DNE(0,xi,16,9,"div",2)(1,Si,4,1,"ng-template",null,0,e.C5r),2&n){const s=e.sdS(2);e.Y8G("ngIf",!i.loading)("ngIfElse",s)}},dependencies:[c.bT,F.r6,X.fg,S.LG,m.me,m.BC,m.vS],styles:["[_nghost-%COMP%]{position:relative;width:100%;height:100vh;display:flex;flex-direction:column;background:#f0f0f0}[box][_ngcontent-%COMP%]{box-shadow:0 0 0 100vw #00000080}[box][_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:none}[box].input[_ngcontent-%COMP%]{width:32rem!important;max-width:calc(100% - 2rem)!important;padding:1rem!important;height:4rem!important;color:#000!important;background:#fff;box-shadow:0 0 0 100vw #000c}[box].input[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:initial}[box][_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:var(--heading-font);font-weight:500;text-transform:uppercase;letter-spacing:.05em}\n\n/*# sourceMappingURL=code-flow.component.ts-angular-inline--103.css.map*/"]})}return o})();var dt=p(46264),de=p(19608),me=p(81413),xe=p(840),mt=p(18e3);const Z=()=>({standalone:!0}),pt=()=>[];function Ni(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",11)(1,"mat-button-toggle-group",12),e.nI1(2,"async"),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.setOptions({group:"group"===i}))}),e.j41(3,"mat-button-toggle",13),e.EFF(4," Single "),e.k0s(),e.j41(5,"mat-button-toggle",14),e.EFF(6," Group "),e.k0s()()()}if(2&o){let t;const n=e.XpG(2);e.R7$(),e.Y8G("ngModel",null!=(t=e.bMT(2,2,n.options))&&t.group?"group":"single")("ngModelOptions",e.lJ4(4,Z))}}function yi(o,a){if(1&o&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t.display_name||t.name," ")}}function $i(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",4)(1,"label"),e.EFF(2,"Building"),e.k0s(),e.j41(3,"mat-form-field",15)(4,"mat-select",16),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.DH7(s.building,i)||(s.building=i),e.Njj(i)}),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.setOptions({zone_id:null==i?null:i.id}))}),e.DNE(5,yi,2,2,"mat-option",17),e.nI1(6,"async"),e.k0s()()()}if(2&o){const t=e.XpG(2);e.R7$(4),e.R50("ngModel",t.building),e.Y8G("ngModelOptions",e.lJ4(5,Z)),e.R7$(),e.Y8G("ngForOf",e.bMT(6,3,t.buildings))}}function Pi(o,a){if(1&o&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.display_name||t.name," ")}}function Ai(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",4)(1,"label"),e.EFF(2,"Level"),e.k0s(),e.j41(3,"mat-form-field",15)(4,"mat-select",19),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.setOptions({zone_id:i||s.building.id}))}),e.DNE(5,Pi,2,2,"mat-option",17),e.nI1(6,"async"),e.k0s()()()}if(2&o){const t=e.XpG(2);e.R7$(4),e.Y8G("disabled",!t.building)("ngModelOptions",e.lJ4(5,Z)),e.R7$(),e.Y8G("ngForOf",e.bMT(6,3,t.levels))}}function Di(o,a){1&o&&(e.j41(0,"mat-checkbox",25),e.EFF(1," All Day "),e.k0s())}function Gi(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",3)(1,"div",20)(2,"label"),e.EFF(3,"Start Time"),e.k0s(),e.j41(4,"a-time-field",21),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.form.patchValue({date:i}))}),e.k0s()(),e.j41(5,"div",22)(6,"label"),e.EFF(7,"End Time"),e.k0s(),e.nrm(8,"a-duration-field",23),e.DNE(9,Di,2,0,"mat-checkbox",24),e.k0s()()}if(2&o){let t;const n=e.XpG(2);e.R7$(4),e.Y8G("ngModel",n.form.value.date)("ngModelOptions",e.lJ4(8,Z)),e.R7$(4),e.Y8G("time",null==(t=n.form.get("date"))?null:t.value)("max",600)("min",60)("step",60)("disabled",n.form.value.all_day),e.R7$(),e.Y8G("ngIf",n.allow_all_day)}}function Li(o,a){1&o&&(e.j41(0,"div",26)(1,"label"),e.EFF(2,"Host"),e.k0s(),e.nrm(3,"a-user-search-field",27),e.k0s())}function ji(o,a){1&o&&(e.j41(0,"div",28)(1,"label"),e.EFF(2,"Details"),e.k0s(),e.j41(3,"mat-form-field",29),e.nrm(4,"input",30),e.k0s()())}function Xi(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",28)(1,"label"),e.EFF(2,"Group Members"),e.k0s(),e.j41(3,"a-user-list-field",31),e.nI1(4,"async"),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.setOptions({members:i}))}),e.k0s()()}if(2&o){let t;const n=e.XpG(2);e.R7$(3),e.Y8G("simple",!0)("ngModel",(null==(t=e.bMT(4,3,n.options))?null:t.members)||e.lJ4(5,pt))("ngModelOptions",e.lJ4(6,Z))}}function Bi(o,a){if(1&o&&(e.j41(0,"mat-option",18)(1,"span",35),e.EFF(2),e.k0s()()),2&o){const t=a.$implicit;e.Y8G("value",t),e.R7$(2),e.JRh(t)}}function Wi(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",3)(1,"div",20)(2,"label"),e.EFF(3,"Recurrence Period"),e.k0s(),e.j41(4,"mat-form-field",15)(5,"mat-select",32),e.nI1(6,"async"),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.setOptions({pattern:i}))}),e.j41(7,"mat-option",33),e.EFF(8,"None"),e.k0s(),e.DNE(9,Bi,3,2,"mat-option",17),e.k0s()()(),e.j41(10,"div",20)(11,"label"),e.EFF(12,"Recurrence End"),e.k0s(),e.j41(13,"a-date-field",34),e.nI1(14,"async"),e.nI1(15,"async"),e.nI1(16,"async"),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.setOptions({recurr_end:i}))}),e.EFF(17," Date and time must be in the future "),e.k0s()()()}if(2&o){let t,n,i;const s=e.XpG(2);e.R7$(5),e.Y8G("ngModel",null==(t=e.bMT(6,7,s.options))?null:t.recurrence_pattern)("ngModelOptions",e.lJ4(15,Z)),e.R7$(4),e.Y8G("ngForOf",s.recurrence_options),e.R7$(4),e.Y8G("disabled",!(null!=(n=e.bMT(14,9,s.options))&&n.pattern)||"none"===(null==(n=e.bMT(15,11,s.options))?null:n.pattern))("ngModel",(null==(i=e.bMT(16,13,s.options))?null:i.recurr_end)||(null==s.form||null==s.form.value?null:s.form.value.date))("ngModelOptions",e.lJ4(16,Z))("to",s.book_until)}}function Vi(o,a){if(1&o&&(e.j41(0,"mat-option",38),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function Ki(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",28)(1,"label"),e.EFF(2,"Desk Features"),e.k0s(),e.j41(3,"mat-form-field",29)(4,"mat-select",36),e.nI1(5,"async"),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.setOptions({features:i||[]}))}),e.DNE(6,Vi,2,2,"mat-option",37),e.nI1(7,"async"),e.k0s()()()}if(2&o){let t;const n=e.XpG(2);e.R7$(4),e.Y8G("ngModel",(null==(t=e.bMT(5,3,n.options))?null:t.features)||e.lJ4(7,pt))("ngModelOptions",e.lJ4(8,Z)),e.R7$(2),e.Y8G("ngForOf",e.bMT(7,5,n.features))}}function Yi(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",39)(1,"mat-checkbox",21),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.form.patchValue({secondary_resource:i?"locker":""}))}),e.EFF(2," Require locker "),e.k0s()()}if(2&o){const t=e.XpG(2);e.R7$(),e.Y8G("ngModel",!!t.form.value.secondary_resource)("ngModelOptions",e.lJ4(2,Z))}}function Ui(o,a){if(1&o&&(e.j41(0,"form",1),e.DNE(1,Ni,7,5,"div",2),e.j41(2,"div",3)(3,"div",4)(4,"label"),e.EFF(5,"Date"),e.k0s(),e.j41(6,"a-date-field",5),e.EFF(7," Date and time must be in the future "),e.k0s()(),e.DNE(8,$i,7,6,"div",6),e.nI1(9,"async"),e.DNE(10,Ai,7,6,"div",6),e.nI1(11,"async"),e.k0s(),e.DNE(12,Gi,10,9,"div",7)(13,Li,4,0,"div",8)(14,ji,5,0,"div",9)(15,Xi,5,7,"div",9),e.nI1(16,"async"),e.DNE(17,Wi,18,17,"div",7)(18,Ki,8,9,"div",9),e.nI1(19,"async"),e.DNE(20,Yi,3,3,"div",10),e.k0s()),2&o){let t,n,i,s;const l=e.XpG();e.Y8G("formGroup",l.form),e.R7$(),e.Y8G("ngIf",l.allow_groups),e.R7$(5),e.Y8G("to",l.book_until),e.R7$(2),e.Y8G("ngIf",(null==(t=e.bMT(9,12,l.buildings))?null:t.length)>1),e.R7$(2),e.Y8G("ngIf",(null==(n=e.bMT(11,14,l.levels))?null:n.length)>1),e.R7$(2),e.Y8G("ngIf",l.allow_time_changes),e.R7$(),e.Y8G("ngIf",l.can_book_for_others),e.R7$(),e.Y8G("ngIf",l.needs_reason),e.R7$(),e.Y8G("ngIf",null==(i=e.bMT(16,16,l.options))?null:i.group),e.R7$(2),e.Y8G("ngIf",l.can_recurr),e.R7$(),e.Y8G("ngIf",null==(s=e.bMT(19,18,l.features))?null:s.length),e.R7$(2),e.Y8G("ngIf",l.can_book_lockers)}}let ut=(()=>{class o{get building(){return this._org.building}set building(t){this._org.building=t}get can_book_lockers(){return this._settings.get("app.desks.can_book_lockers")}get can_book_for_others(){return this._settings.get("app.desks.can_book_for_others")}get can_recurr(){return this._settings.get("app.desks.recurrence_allowed")}get allow_groups(){return this._settings.get("app.desks.allow_groups")}get needs_reason(){return!0===this._settings.get("app.desks.needs_reason")}get allow_time_changes(){return!!this._settings.get("app.desks.allow_time_changes")}get allow_all_day(){return this.allow_time_changes&&!!this._settings.get("app.desks.allow_all_day")}get book_until(){return(0,Y.A)((0,L.A)(Date.now(),this._settings.get("app.desks.available_period")||90))}constructor(t,n,i){this._state=t,this._org=n,this._settings=i,this.buildings=this._org.building_list,this.levels=this._org.active_levels,this.options=this._state.options,this.features=this._state.features,this.recurrence_options=["daily","weekly","monthly"],this.setOptions=s=>this._state.setOptions(s)}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(R.nx),e.rXU(T.yb),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["detailed-book-desks-form"]],inputs:{form:"form"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["class","w-[640px] max-w-[calc(100%-2rem)] mx-auto mb-4",4,"ngIf"],[1,"flex","flex-col","sm:flex-row","space-x-0","sm:space-x-2","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],[1,"flex","flex-col","flex-1","w-full","sm:w-1/4"],["formControlName","date",3,"to"],["class","flex flex-col flex-1 w-full sm:w-1/4",4,"ngIf"],["class","flex flex-col sm:flex-row space-x-0 sm:space-x-2 w-[640px] max-w-[calc(100%-2rem)] mx-auto",4,"ngIf"],["class","flex flex-col w-[640px] max-w-[calc(100%-2rem)] mx-auto",4,"ngIf"],["class","flex flex-col flex-1 w-[640px] max-w-[calc(100%-2rem)] mx-auto",4,"ngIf"],["class","flex flex-col flex-1 w-[640px] max-w-[calc(100%-2rem)] mx-auto mb-4",4,"ngIf"],[1,"w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","mb-4"],[1,"w-full",3,"ngModelChange","ngModel","ngModelOptions"],["value","single",1,"w-1/2"],["value","group",1,"w-1/2"],["appearance","outline"],["placeholder","Select building",3,"ngModelChange","ngModel","ngModelOptions"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placeholder","Any Level","ngModel","",3,"ngModelChange","disabled","ngModelOptions"],[1,"flex","flex-col","flex-1","w-full","sm:w-1/3"],[3,"ngModelChange","ngModel","ngModelOptions"],[1,"flex","flex-col","flex-1","w-full","sm:w-1/3","relative"],["formControlName","duration",3,"time","max","min","step","disabled"],["formControlName","all_day","class","absolute top-0 right-0",4,"ngIf"],["formControlName","all_day",1,"absolute","top-0","right-0"],[1,"flex","flex-col","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],["formControlName","user",1,"mb-4"],[1,"flex","flex-col","flex-1","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],["appearance","outline",1,"w-full"],["matInput","","formControlName","description","placeholder","Reason for booking..."],[3,"ngModelChange","simple","ngModel","ngModelOptions"],["placeholder","None",3,"ngModelChange","ngModel","ngModelOptions"],["value","none"],[3,"ngModelChange","disabled","ngModel","ngModelOptions","to"],[1,"capitalize"],["multiple","","placeholder","Any Feature",3,"ngModelChange","ngModel","ngModelOptions"],["class","capitalize",3,"value",4,"ngFor","ngForOf"],[1,"capitalize",3,"value"],[1,"flex","flex-col","flex-1","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","mb-4"]],template:function(n,i){1&n&&e.DNE(0,Ui,21,20,"form",0),2&n&&e.Y8G("ngIf",i.form)},dependencies:[c.Sq,c.bT,F.wT,I.rl,te.VO,X.fg,D.So,we.ec,we.pc,de.G,ae.y,me.t,xe.T,mt.$,m.qT,m.me,m.BC,m.cb,m.vS,m.j4,m.JD,c.Jj]})}return o})();function zi(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",11),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.findDesk())}),e.j41(1,"div",7)(2,"app-icon",8),e.EFF(3,"search"),e.k0s(),e.j41(4,"span",9),e.EFF(5),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(5),e.JRh(t.is_edit?"Update Desk":"Find Desk")}}function Ji(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",11),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.allocateDesk())}),e.EFF(1),e.k0s()}if(2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.is_edit?"Update Desk":"Book Desk"," ")}}let qi=(()=>{class o{get is_edit(){return!!this.form?.get("id")?.value}get auto_allocation(){return!!this._settings.get("app.desks.auto_allocation")}get form(){return this._state.form}constructor(t,n,i,s){this._state=t,this._router=n,this._org=i,this._settings=s,this.time=0,this.level="",this.quick_times=[{name:"Now",value:0},{name:"Tomorrow",value:(0,ce.A)((0,L.A)(new Date,1),9).valueOf()}],this.levels=[],this.clearForm=()=>{this.time=0,this.level=this._org.building.id,this._state.clearForm()}}ngOnInit(){var t=this;return(0,h.A)(function*(){yield t._org.initialised.pipe((0,N.$)(n=>n)),yield t._org.active_levels.pipe((0,N.$)(n=>n?.length>0)),t.level=t._org.building?.id,t.levels=[{id:t._org.building?.id,name:"Any Level"},...t._org.levelsForBuilding(t._org.building)]})()}quickBook(){this.form.patchValue({date:(this.time<1440?(0,H.A)((0,dt.A)(new Date,{nearestTo:5}),this.time):(0,ce.A)((0,L.A)(new Date,1),8)).valueOf(),title:"Ad-hoc Desk Booking"}),this.findDesk()}findDesk(){this.form.markAllAsTouched(),this.form.patchValue({asset_id:" "}),this.form.valid&&(this.form.patchValue({asset_id:""}),this._router.navigate(["/book","desks","map"]))}allocateDesk(){var t=this;return(0,h.A)(function*(){if(t.form.markAllAsTouched(),t.form.patchValue({asset_id:" "}),!t.form.valid)return(0,d.UG)(`Some fields are invalid. [${(0,d.F7)(t.form).join(", ")}]`);const n=t._settings.get("app.departments")||{"*":{level:t._org.levelsForBuilding()[0]?.id,centered_at:{x:.5,y:.5}}},i=(0,d.Ny)().groups.find(f=>f in n)??"*";if(!n[i])return void t._router.navigate(["/book","desks","map"]);const{level:s,centered_at:l}=n[i],r=t._org.levelWithID([s]);if(!r)return void t._router.navigate(["/book","desks","map"]);const _=yield t._state.available_resources.pipe((0,W.s)(1)).toPromise(),u=s.map_id?yield(0,R.Jm)(r.map_id,l,_.map(f=>f?.map_id||f?.id||"")):_[(0,d.HO)(_.length)].id,g=_.find(f=>f.map_id===u||f.id===u);g?(t._state.form.patchValue({asset_id:g?.id,asset_name:g.name||g.id,map_id:g?.map_id||g?.id,description:g.name||g.id,booking_type:"desk",zones:g.zone?[g.zone?.parent_id,g.zone?.id]:[]}),yield t._state.confirmPost().catch(f=>console.error(f))):t._router.navigate(["/book","desks","map"])})()}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(R.nx),e.rXU(b.Ix),e.rXU(T.yb),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["desk-flow-form"]],decls:15,vars:5,consts:[["alloc_button",""],["form","",1,"flex-1","min-h-[50%]"],[1,"text-xl","uppercase","font-medium","mb-2","mt-4","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],[3,"form"],[1,"mb-4","border-b","border-base-200","w-full"],[1,"flex","flex-col","sm:flex-row","items-center","justify-center","space-x-0","space-y-2","sm:space-y-0","sm:space-x-2","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","mb-4"],["btn","","matRipple","","clear","",1,"sm:flex-1","w-full","sm:w-auto","h-[2.75rem]","inverse",3,"click"],[1,"flex","items-center","justify-center"],[1,"text-xl"],[1,"ml-2","mx-4"],["class","sm:flex-1 w-full sm:w-auto h-[2.75rem]","find","","btn","","matRipple","",3,"click",4,"ngIf","ngIfElse"],["find","","btn","","matRipple","",1,"sm:flex-1","w-full","sm:w-auto","h-[2.75rem]",3,"click"]],template:function(n,i){if(1&n){const s=e.RV6();e.j41(0,"section",1)(1,"h2",2),e.EFF(2),e.k0s(),e.nrm(3,"detailed-book-desks-form",3)(4,"div",4),e.j41(5,"div",5)(6,"button",6),e.bIt("click",function(){return e.eBV(s),e.Njj(i.clearForm())}),e.j41(7,"div",7)(8,"app-icon",8),e.EFF(9,"clear"),e.k0s(),e.j41(10,"span",9),e.EFF(11),e.k0s()()(),e.DNE(12,zi,6,1,"button",10),e.k0s()(),e.DNE(13,Ji,2,1,"ng-template",null,0,e.C5r)}if(2&n){const s=e.sdS(14);e.R7$(2),e.SpI(" ",i.is_edit?"Edit":"Detailed"," Desk Booking "),e.R7$(),e.Y8G("form",i.form),e.R7$(8),e.JRh(i.is_edit?"Cancel Edit":"Clear Form"),e.R7$(),e.Y8G("ngIf",!i.auto_allocation)("ngIfElse",s)}},dependencies:[c.bT,E.R,F.r6,ut],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column;overflow:auto}[quick][_ngcontent-%COMP%]{background-color:#007ac8}\n\n/*# sourceMappingURL=form.component.ts-angular-inline--106.css.map*/"]})}return o})();var Hi=p(89273),ft=p(24918),gt=p(79842);const Zi=()=>["/book","desks","form"],Qi=()=>[];function es(o,a){if(1&o&&(e.j41(0,"div",25),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.R7$(),e.SpI(" ",t," ")}}function ts(o,a){if(1&o){const t=e.RV6();e.j41(0,"li",18),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.setActiveDesk(i))}),e.j41(1,"app-icon",19),e.EFF(2,"place"),e.k0s(),e.j41(3,"div",20)(4,"div",21),e.EFF(5),e.k0s(),e.j41(6,"div",22),e.EFF(7),e.k0s(),e.j41(8,"div",23),e.DNE(9,es,2,1,"div",24),e.k0s()()()}if(2&o){const t=a.$implicit,n=e.XpG();e.AVh("border-primary",(null==n.active_desk?null:n.active_desk.id)===t.id),e.BMQ("desk-id",t.id),e.R7$(5),e.JRh(t.name||t.id),e.R7$(2),e.SpI(" ",(null==t.zone?null:t.zone.display_name)||(null==t.zone?null:t.zone.name)||"<No Level>"," "),e.R7$(2),e.Y8G("ngForOf",t.features||e.lJ4(6,Qi))}}function ns(o,a){if(1&o&&(e.j41(0,"div",29),e.EFF(1),e.nI1(2,"async"),e.nI1(3,"async"),e.k0s()),2&o){let t;const n=e.XpG(2);e.R7$(),e.SpI(" ",(null==(t=e.bMT(2,1,n.level))?null:t.display_name)||(null==(t=e.bMT(3,3,n.level))?null:t.name)," ")}}function os(o,a){if(1&o&&(e.j41(0,"div",26),e.nrm(1,"interactive-map",27),e.nI1(2,"async"),e.nI1(3,"async"),e.nI1(4,"async"),e.nI1(5,"async"),e.nI1(6,"async"),e.nI1(7,"async"),e.nI1(8,"async"),e.DNE(9,ns,4,5,"div",28),e.nI1(10,"async"),e.k0s()),2&o){let t,n;const i=e.XpG();e.R7$(),e.Y8G("src",e.bMT(2,9,i.url))("zoom",null==(t=e.bMT(3,11,i.positions))?null:t.zoom)("center",null==(n=e.bMT(4,13,i.positions))?null:n.center)("styles",e.bMT(5,15,i.styles))("features",e.bMT(6,17,i.features))("actions",e.bMT(7,19,i.actions))("labels",e.bMT(8,21,i.labels))("focus",(null==i.active_desk?null:i.active_desk.map_id)||(null==i.active_desk?null:i.active_desk.id)),e.R7$(8),e.Y8G("ngIf",e.bMT(10,23,i.level))}}function is(o,a){if(1&o&&(e.j41(0,"div",30),e.nrm(1,"mat-spinner",31),e.j41(2,"p"),e.EFF(3),e.nI1(4,"async"),e.k0s()()),2&o){const t=e.XpG();e.R7$(),e.Y8G("diameter",32),e.R7$(2),e.JRh(e.bMT(4,2,t.loading))}}function ss(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",32)(1,"div",33)(2,"div",21),e.EFF(3),e.k0s(),e.j41(4,"div",22),e.EFF(5),e.k0s()(),e.j41(6,"div",34)(7,"button",35),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.setActiveDesk(null))}),e.EFF(8," Clear "),e.k0s(),e.j41(9,"button",36),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.makeBooking())}),e.EFF(10," Book "),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(3),e.JRh(t.active_desk.name),e.R7$(2),e.SpI(" ",(null==t.active_desk.zone?null:t.active_desk.zone.display_name)||t.active_desk.zone.name||"<No Level>"," ")}}let as=(()=>{class o extends d.Tv{get active_desk(){return this._active_desk.getValue()}get hide_map(){return!!this._settings.get("app.desks.hide_map")}constructor(t,n,i){super(),this._state=t,this._settings=n,this._explore=i,this.url=this._explore.map_url,this.styles=this._explore.map_styles,this.positions=this._explore.map_positions,this.features=this._explore.map_features,this.actions=this._explore.map_actions,this.labels=this._explore.map_labels,this.level=this._explore.level,this.desks=this._state.available_resources,this.loading=this._state.loading,this.form=this._state.form,this.option_details=(0,B.zV)([this._state.options,this.form.valueChanges.pipe((0,Hi.Z)({}))]).pipe((0,x.T)(([s])=>{const l=this._state.form,r=(0,d.qq)({pattern:s.pattern,end:s.recurr_end,start:l.value.date,interval:1,days_of_week:[]}),_=`${(0,ee.A)(l.value.date,"dd MMM yyyy")}${s.pattern&&"none"!==s.pattern?", "+r:""}${s.group?", "+s.group:""}, ${s.features?.length||"Any"} Feature${(s.features?.length||0)<2?"":"s"}`;return s.zone_id&&this._explore.setLevel(s.zone_id),_})),this._active_desk=new w.t(null),this.makeBooking=()=>this._state.confirmPost()}ngOnInit(){this.subscription("assets-statue",(0,B.zV)([this._state.resources,this._state.available_resources,this._active_desk]).pipe((0,Te.B)(200)).subscribe(([t,n])=>{const i={},s=[];for(const l of t){const r=l.bookable&&n.find(_=>_.id===l.id);i[`#${l.map_id||l.id}`]={fill:l.bookable?n.find(_=>_.id===l.id)?"#43a047":"#e53935":"#999",opacity:.6},r&&s.push({id:l.map_id||l.id,action:"click",callback:()=>this.setActiveDesk(l)})}this._explore.setStyles("desks",i),this._explore.setActions("desks",s),this._explore.setFeatures("desks",this.active_desk?[{location:this.active_desk.map_id||this.active_desk.id,content:'\n                    <span class="flex h-4 w-4 rounded-full absolute top-1/4 left-1/4 transform -translate-x-1/2 -translate-y-1/2 border-[3px] border-white\xe500 shadow" >\n                        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>\n                        <span class="relative inline-flex rounded-full h-full w-full bg-primary"></span>\n                    </span>'}]:[])}))}setActiveDesk(t){this._explore.setLevel(t?.zone?.id),this._active_desk.next(t),this._state.form.patchValue({asset_id:t?.id,asset_name:t.name,map_id:t?.map_id||t?.id,description:t.name,booking_type:"desk",zones:t.zone?[t.zone?.parent_id,t.zone?.id]:[]})}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(R.nx),e.rXU(d.h$),e.rXU(fe.Oe))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["desk-flow-map"]],features:[e.Vt3],decls:28,vars:22,consts:[["menu","matMenu"],["topbar","",1,""],["btn","","matRipple","",1,"clear","h-[2.75rem]","text-white",3,"routerLink"],[1,"flex","items-center","justify-center","h-full"],[1,"text-xl"],[1,"ml-2","mx-4"],[1,"flex","flex-col","flex-1","h-1/2","w-full"],[1,"text-2xl","px-4","pt-4","text-center"],[1,"my-4","mx-auto","w-[640px]","max-w-[calc(100vw-2rem)]",3,"matMenuTriggerFor"],[1,"pt-4","max-h-[65vh]","overflow-auto",3,"click"],[3,"form"],["listing","",1,"flex","flex-1","h-1/2","relative","space-x-2"],[1,"list-style-none","w-full","sm:w-[20rem]","max-w-[48rem]","mx-auto","bg-base-200","pb-32","overflow-auto","h-full","rounded-tr-lg","space-y-2"],[1,"py-2","px-4","sticky","top-0","inset-x-0","bg-base-200","border-b","border-base-200","z-10"],["matRipple","","class","flex items-center p-2 mx-2 bg-base-100 rounded shadow cursor-pointer space-x-2 min-h-[5rem] border",3,"border-primary","click",4,"ngFor","ngForOf"],["class","hidden sm:block flex-1 bg-base-200 rounded-tl-lg border-l border-t border-base-200 relative overflow-hidden h-full",4,"ngIf"],["class","absolute inset-0 bg-base-100 bg-opacity-60 flex flex-col items-center justify-center space-y-2 !m-0 z-20",4,"ngIf"],["selection","","class","absolute bottom-2 left-1/2 transform -translate-x-1/2 p-2 bg-base-100 shadow rounded w-[24rem] max-w-[calc(100vw-1rem)] space-y-2 !m-0 border border-base-200",4,"ngIf"],["matRipple","",1,"flex","items-center","p-2","mx-2","bg-base-100","rounded","shadow","cursor-pointer","space-x-2","min-h-[5rem]","border",3,"click"],[1,"text-2xl"],[1,"flex","flex-col","w-1/2","flex-1"],["name","",1,""],["level","",1,"text-xs"],["features","",1,"w-full","flex","flex-wrap"],["class","text-xs bg-primary text-white rounded-xl px-2 py-1 mt-1 mr-2",4,"ngFor","ngForOf"],[1,"text-xs","bg-primary","text-white","rounded-xl","px-2","py-1","mt-1","mr-2"],[1,"hidden","sm:block","flex-1","bg-base-200","rounded-tl-lg","border-l","border-t","border-base-200","relative","overflow-hidden","h-full"],[3,"src","zoom","center","styles","features","actions","labels","focus"],["class","absolute top-2 left-2 bg-base-100 rounded-3xl h-10 px-3 flex items-center border border-base-200",4,"ngIf"],[1,"absolute","top-2","left-2","bg-base-100","rounded-3xl","h-10","px-3","flex","items-center","border","border-base-200"],[1,"absolute","inset-0","bg-base-100","bg-opacity-60","flex","flex-col","items-center","justify-center","space-y-2","!m-0","z-20"],[3,"diameter"],["selection","",1,"absolute","bottom-2","left-1/2","transform","-translate-x-1/2","p-2","bg-base-100","shadow","rounded","w-[24rem]","max-w-[calc(100vw-1rem)]","space-y-2","!m-0","border","border-base-200"],[1,""],[1,"flex","items-center","space-x-2"],["matRipple","",1,"inverse","flex-1",3,"click"],["matRipple","",1,"flex-1",3,"click"]],template:function(n,i){if(1&n){const s=e.RV6();e.j41(0,"div",1)(1,"a",2)(2,"div",3)(3,"app-icon",4),e.EFF(4,"arrow_back"),e.k0s(),e.j41(5,"span",5),e.EFF(6,"Back"),e.k0s()()()(),e.j41(7,"div",6)(8,"h2",7),e.EFF(9,"Available Desks"),e.k0s(),e.j41(10,"an-action-field",8),e.EFF(11),e.nI1(12,"async"),e.k0s(),e.j41(13,"mat-menu",null,0)(15,"div",9),e.bIt("click",function(r){return e.eBV(s),r.stopPropagation(),e.Njj(r.preventDefault)}),e.nrm(16,"detailed-book-desks-form",10),e.k0s()(),e.j41(17,"div",11)(18,"ul",12)(19,"div",13),e.EFF(20),e.nI1(21,"async"),e.k0s(),e.DNE(22,ts,10,7,"li",14),e.nI1(23,"async"),e.k0s(),e.DNE(24,os,11,25,"div",15)(25,is,5,4,"div",16),e.nI1(26,"async"),e.DNE(27,ss,11,2,"div",17),e.k0s()()}if(2&n){let s;const l=e.sdS(14);e.R7$(),e.Y8G("routerLink",e.lJ4(21,Zi)),e.R7$(9),e.Y8G("matMenuTriggerFor",l),e.R7$(),e.SpI(" ",e.bMT(12,13,i.option_details)||"No Filters"," "),e.R7$(5),e.Y8G("form",i.form),e.R7$(2),e.AVh("!w-full",i.hide_map)("rounded-tl-lg",i.hide_map),e.R7$(2),e.SpI(" ",(null==(s=e.bMT(21,15,i.desks))?null:s.length)||"0"," matches available "),e.R7$(2),e.Y8G("ngForOf",e.bMT(23,17,i.desks)),e.R7$(2),e.Y8G("ngIf",!i.hide_map),e.R7$(),e.Y8G("ngIf",e.bMT(26,19,i.loading)),e.R7$(2),e.Y8G("ngIf",i.active_desk)}},dependencies:[c.Sq,c.bT,E.R,ft.S,G.kk,G.Cp,F.r6,S.LG,gt.W,b.Wk,ut,c.Jj],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[topbar][_ngcontent-%COMP%]{background-color:#00539f}\n\n/*# sourceMappingURL=map.component.ts-angular-inline--107.css.map*/"]})}return o})();const ls=()=>["/book","desks","map"];let rs=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["desk-flow-confirm"]],decls:7,vars:2,consts:[["topbar","",1,""],["btn","","matRipple","",1,"clear","h-[2.75rem]","text-white",3,"routerLink"],[1,"flex","items-center","justify-center","h-full"],[1,"text-xl"],[1,"ml-2","mx-4"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"a",1)(2,"div",2)(3,"app-icon",3),e.EFF(4,"arrow_back"),e.k0s(),e.j41(5,"span",4),e.EFF(6,"Back"),e.k0s()()()()),2&n&&(e.R7$(),e.Y8G("routerLink",e.lJ4(1,ls)))},dependencies:[E.R,F.r6,b.Wk],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[topbar][_ngcontent-%COMP%]{background-color:#00539f}\n\n/*# sourceMappingURL=confirm.component.ts-angular-inline--105.css.map*/"]})}return o})();const _s=o=>["/book",o],cs=()=>({}),ds=()=>["/schedule"],ms=o=>({email:o});function ps(o,a){1&o&&e.nrm(0,"br")}let De=(()=>{class o{constructor(){this.extra="",this.route="spaces",this.type="space"}get is_host(){return this.calendar===(0,d.Ny)()?.email}get title(){return this.is_host?"your":"the host'"}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["flow-success"]],inputs:{calendar:"calendar",extra:"extra",route:"route",type:"type"},decls:15,vars:14,consts:[["name","success",1,"fixed","inset-0","flex","flex-col","bg-indigo-900","items-center","justify-center","z-50"],[1,"text-7xl","rounded-full","bg-base-100","text-success","mb-4"],[1,"text-center","text-lg","text-white","mb-4","leading-10"],[4,"ngIf"],[1,"flex","items-center","space-x-2"],["btn","","matRipple","",1,"w-32","border","border-white",3,"routerLink","queryParams"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"app-icon"),e.EFF(3,"done"),e.k0s()(),e.j41(4,"div",2),e.EFF(5),e.nrm(6,"br"),e.EFF(7),e.DNE(8,ps,1,0,"br",3),e.EFF(9),e.k0s(),e.j41(10,"div",4)(11,"a",5),e.EFF(12," New Booking "),e.k0s(),e.j41(13,"a",5),e.EFF(14," Your Bookings "),e.k0s()()()),2&n&&(e.R7$(5),e.SpI(" Thank you, your ",i.type," booking was successful!"),e.R7$(2),e.SpI(" ",i.extra," "),e.R7$(),e.Y8G("ngIf",i.extra),e.R7$(),e.SpI(" An event has been added to ",i.title," calendar "),e.R7$(2),e.Y8G("routerLink",e.eq3(8,_s,i.route))("queryParams",e.lJ4(10,cs)),e.R7$(2),e.Y8G("routerLink",e.lJ4(11,ds))("queryParams",e.eq3(12,ms,i.calendar)))},dependencies:[c.bT,E.R,F.r6,b.Wk]})}return o})();function us(o,a){1&o&&(e.qex(0),e.nrm(1,"desk-flow-map"),e.bVm())}function fs(o,a){1&o&&(e.qex(0),e.nrm(1,"desk-flow-confirm"),e.bVm())}function gs(o,a){if(1&o&&(e.qex(0),e.nrm(1,"flow-success",4),e.bVm()),2&o){const t=e.XpG();e.R7$(),e.Y8G("calendar",null==t.last_success?null:t.last_success.user_email)("extra",null!=t.last_success&&null!=t.last_success.extension_data&&t.last_success.extension_data.secondary_resource?"Locker E-093 has been allocated for this booking.":"")}}function hs(o,a){1&o&&(e.qex(0),e.nrm(1,"desk-flow-form"),e.bVm())}let Fs=(()=>{class o extends d.Tv{get view(){return this._state.view}get last_success(){return this._state.last_success}constructor(t,n,i){super(),this._state=t,this._route=n,this._org=i}ngOnInit(){var t=this;return(0,h.A)(function*(){yield t._org.initialised.pipe((0,N.$)(n=>n)).toPromise(),t._state.loadForm(),t._state.form||t._state.newForm(),t._state.form.patchValue({booking_type:"desk"}),t.subscription("route.params",t._route.paramMap.subscribe(n=>{n.has("step")&&t._state.setView(n.get("step"))})),t.subscription("route.query",t._route.queryParamMap.subscribe(n=>{n.has("success")&&t._state.setView(n.get("success"))}))})()}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(R.nx),e.rXU(b.nX),e.rXU(T.yb))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["placeos-book-desk-flow"]],features:[e.Vt3],decls:6,vars:4,consts:[[1,"bg-base-100","h-full","w-full"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["type","desk","route","desks",3,"calendar","extra"]],template:function(n,i){1&n&&(e.j41(0,"div",0),e.qex(1,1),e.DNE(2,us,2,0,"ng-container",2)(3,fs,2,0,"ng-container",2)(4,gs,2,2,"ng-container",2)(5,hs,2,0,"ng-container",3),e.bVm(),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngSwitch",i.view),e.R7$(),e.Y8G("ngSwitchCase","map"),e.R7$(),e.Y8G("ngSwitchCase","confirm"),e.R7$(),e.Y8G("ngSwitchCase","success"))},dependencies:[c.ux,c.e1,c.fG,qi,as,rs,De],styles:["[_nghost-%COMP%]{position:relative;height:100%;width:100%}\n\n/*# sourceMappingURL=desk-flow.component.ts-angular-inline--104.css.map*/"]})}return o})();var ht=p(81772),Ft=p(65347);const Ge=()=>({standalone:!0});function Cs(o,a){1&o&&(e.j41(0,"mat-checkbox",22),e.EFF(1," All Day "),e.k0s())}function vs(o,a){if(1&o&&(e.j41(0,"mat-option",29),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t.display_name||t.name," ")}}function bs(o,a){if(1&o){const t=e.RV6();e.j41(0,"mat-form-field",26)(1,"mat-select",27),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG(3);return e.Njj(s.setBuilding(i))}),e.DNE(2,vs,2,2,"mat-option",28),e.nI1(3,"async"),e.k0s()()}if(2&o){const t=e.XpG(3);e.R7$(),e.Y8G("ngModel",t.building)("ngModelOptions",e.lJ4(5,Ge)),e.R7$(),e.Y8G("ngForOf",e.bMT(3,3,t.buildings))}}function Es(o,a){if(1&o&&(e.j41(0,"div",23)(1,"label",24),e.EFF(2,"Building"),e.k0s(),e.DNE(3,bs,4,6,"mat-form-field",25),e.nI1(4,"async"),e.k0s()),2&o){let t;const n=e.XpG(2);e.R7$(3),e.Y8G("ngIf",(null==(t=e.bMT(4,1,n.buildings))?null:t.length)>1)}}function Rs(o,a){if(1&o&&(e.j41(0,"mat-option",29),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function ks(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",23)(1,"label",30),e.EFF(2,"Features"),e.k0s(),e.j41(3,"mat-form-field",31)(4,"mat-select",32),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.optionsChange.emit({features:i}))}),e.DNE(5,Rs,2,2,"mat-option",28),e.k0s()()()}if(2&o){const t=e.XpG(2);e.R7$(4),e.Y8G("placeholder","Any "+t.features_label)("ngModel",null==t.options?null:t.options.features)("ngModelOptions",e.lJ4(4,Ge)),e.R7$(),e.Y8G("ngForOf",t.features)}}function Os(o,a){1&o&&(e.j41(0,"div",35)(1,"label",36),e.EFF(2,"Host"),e.j41(3,"span"),e.EFF(4,"*"),e.k0s()(),e.nrm(5,"host-select-field",37),e.k0s())}function Ts(o,a){if(1&o&&(e.j41(0,"div",38)(1,"label",39),e.EFF(2,"Attendees"),e.k0s(),e.nrm(3,"a-user-list-field",40),e.k0s()),2&o){const t=e.XpG(3);e.R7$(3),e.Y8G("hide_actions",t.hide_actions)}}function Ms(o,a){if(1&o&&(e.j41(0,"section",2),e.DNE(1,Os,6,0,"div",33)(2,Ts,4,1,"div",34),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.can_book_for_others),e.R7$(),e.Y8G("ngIf",!t.hide_attendees)}}function Is(o,a){1&o&&(e.j41(0,"div",41)(1,"label",42),e.EFF(2,"Notes"),e.k0s(),e.nrm(3,"rich-text-input",43),e.k0s())}function xs(o,a){1&o&&(e.j41(0,"div",48),e.EFF(1," Add catering "),e.k0s())}function Ss(o,a){if(1&o&&(e.j41(0,"div",49)(1,"div",50),e.EFF(2),e.k0s(),e.j41(3,"div",51),e.EFF(4),e.nI1(5,"currency"),e.k0s()()),2&o){const t=e.XpG(3);e.R7$(2),e.SpI(" ",null==t.form?null:t.form.value.catering[0].item_count," item(s) "),e.R7$(2),e.SpI(" ",e.i5U(5,2,(null==t.form?null:t.form.value.catering[0].total_cost)/100,t.code)," ")}}function ws(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",44)(1,"label"),e.EFF(2,"Catering"),e.k0s(),e.j41(3,"an-action-field",45),e.bIt("onAction",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.editCatering())}),e.DNE(4,xs,2,0,"div",46)(5,Ss,6,5,"div",47),e.k0s()()}if(2&o){const t=e.XpG(2);e.R7$(4),e.Y8G("ngIf",!(null!=t.form&&null!=t.form.value.catering&&t.form.value.catering.length)),e.R7$(),e.Y8G("ngIf",null==t.form||null==t.form.value.catering?null:t.form.value.catering.length)}}function Ns(o,a){if(1&o){const t=e.RV6();e.j41(0,"form",1)(1,"section",2)(2,"div",3)(3,"div",4)(4,"label",5),e.EFF(5,"Date"),e.k0s(),e.j41(6,"a-date-field",6),e.EFF(7," Date and time must be in the future "),e.k0s()(),e.j41(8,"div",4)(9,"label",7),e.EFF(10,"Start Time"),e.k0s(),e.j41(11,"a-time-field",8),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.form.patchValue({date:i}))}),e.k0s()(),e.j41(12,"div",9)(13,"label",10),e.EFF(14,"End Time"),e.k0s(),e.nrm(15,"a-duration-field",11),e.DNE(16,Cs,2,0,"mat-checkbox",12),e.k0s()(),e.j41(17,"div",3),e.DNE(18,Es,5,3,"div",13)(19,ks,6,5,"div",13),e.k0s()(),e.DNE(20,Ms,3,2,"section",14),e.j41(21,"section",2)(22,"div",15)(23,"div",16)(24,"label",17),e.EFF(25,"Meeting Subject "),e.j41(26,"span"),e.EFF(27,"*"),e.k0s()(),e.j41(28,"mat-form-field",18),e.nrm(29,"input",19),e.j41(30,"mat-error"),e.EFF(31,"Meeting Subject is required"),e.k0s()()(),e.DNE(32,Is,4,0,"div",20)(33,ws,6,2,"div",21),e.k0s()()()}if(2&o){const t=e.XpG();e.Y8G("formGroup",t.form),e.R7$(11),e.Y8G("ngModel",t.form.value.date)("ngModelOptions",e.lJ4(11,Ge)),e.R7$(4),e.Y8G("time",t.form.value.date)("max",t.max_duration),e.R7$(),e.Y8G("ngIf",t.allow_all_day),e.R7$(2),e.Y8G("ngIf",t.show_features&&(null==t.features?null:t.features.length)),e.R7$(),e.Y8G("ngIf",t.show_features&&(null==t.features?null:t.features.length)),e.R7$(),e.Y8G("ngIf",t.can_book_for_others||!t.hide_attendees),e.R7$(12),e.Y8G("ngIf",!t.hide_notes),e.R7$(),e.Y8G("ngIf",t.has_catering)}}let ys=(()=>{class o{get building(){return this._org.building}get has_catering(){return!!this._settings.get("app.events.has_catering")}get hide_actions(){return!!this._settings.get("app.events.hide_user_actions")}get hide_notes(){return!!this._settings.get("app.events.hide_notes")}get hide_attendees(){return!!this._settings.get("app.events.hide_attendees")}get can_book_for_others(){return this._settings.get("app.events.can_book_for_others")}get allow_all_day(){return this._settings.get("app.events.allow_all_day")}get max_duration(){return this._settings.get("app.events.max_duration")||240}get show_features(){return!!this._settings.get("app.events.features_on_form")}get features_label(){return this._settings.get("app.events.features_label")||"feature"}get code(){return this._org.currency_code}constructor(t,n,i){var s=this;this._catering=t,this._org=n,this._settings=i,this.features=[],this.optionsChange=new e.bkB,this.buildings=this._org.building_list,this.setBuilding=l=>this._org.building=l,this.editCatering=(0,h.A)(function*(){return s.form.patchValue({catering:[yield s._catering.manageCateringOrder((s.form.value.catering?s.form.value.catering[0]:null)||new y.M)]})})}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(Ae),e.rXU(T.yb),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["detailed-book-space-form"]],inputs:{form:"form",options:"options",features:"features"},outputs:{optionsChange:"optionsChange"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"mb-4","border-b","border-base-200"],[1,"flex","flex-col","sm:flex-row","space-x-0","sm:space-x-2","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],[1,"flex","flex-col","flex-1","w-full","sm:w-1/3"],["for","date"],["name","date","formControlName","date"],["for","start-time"],["name","start-time",3,"ngModelChange","ngModel","ngModelOptions"],[1,"flex","flex-col","flex-1","w-full","sm:w-1/3","relative"],["for","end-time"],["name","end-time","formControlName","duration",3,"time","max"],["formControlName","all_day","class","absolute top-0 right-0",4,"ngIf"],["class","flex flex-col flex-1 w-full",4,"ngIf"],["class","mb-4 border-b border-base-200",4,"ngIf"],[1,"w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],[1,"flex","flex-col"],["for","title"],["appearance","outline"],["name","title","matInput","","formControlName","title","placeholder","Meeting title"],["class","flex flex-col resize-y mb-4",4,"ngIf"],["class","flex flex-col mb-4",4,"ngIf"],["formControlName","all_day",1,"absolute","top-0","right-0"],[1,"flex","flex-col","flex-1","w-full"],["for","building"],["overlay","","buildings","","class","w-full h-[3.25rem]","appearance","outline",4,"ngIf"],["overlay","","buildings","","appearance","outline",1,"w-full","h-[3.25rem]"],["placeholder","Select Building...",3,"ngModelChange","ngModel","ngModelOptions"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["for","features"],["overlay","","appearance","outline",1,"w-full","h-[3.25rem]"],["multiple","",3,"ngModelChange","placeholder","ngModel","ngModelOptions"],["class","flex flex-col w-[640px] max-w-[calc(100%-2rem)] mx-auto",4,"ngIf"],["class","flex flex-col w-[640px] max-w-[calc(100%-2rem)] mx-auto mb-2",4,"ngIf"],[1,"flex","flex-col","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],["for","host"],["name","host","formControlName","organiser"],[1,"flex","flex-col","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","mb-2"],["for","attendees"],["name","attendees","formControlName","attendees",3,"hide_actions"],[1,"flex","flex-col","resize-y","mb-4"],["for","notes"],["name","notes","formControlName","body","placeholder","Add meeting notes here..."],[1,"flex","flex-col","mb-4"],[3,"onAction"],["class","opacity-40",4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"opacity-40"],[1,"flex","items-center"],[1,"flex-1","w-1/2"],[1,"text-xs","opacity-60","px-4"]],template:function(n,i){1&n&&e.DNE(0,Ns,34,12,"form",0),2&n&&e.Y8G("ngIf",i.form)},dependencies:[c.Sq,c.bT,F.wT,I.rl,I.TL,te.VO,X.fg,D.So,gt.W,de.G,ae.y,me.t,xe.T,ht.d,Ft.I,m.qT,m.me,m.BC,m.cb,m.vS,m.j4,m.JD,c.Jj,c.oe]})}return o})();function $s(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",10),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.confirmBooking())}),e.j41(1,"div",5)(2,"app-icon",6),e.EFF(3,"event_available"),e.k0s(),e.j41(4,"span",7),e.EFF(5),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(5),e.JRh(t.is_edit?"Confirm changes":"Book without Space")}}let Ps=(()=>{class o{get is_edit(){return!!this.form?.value?.id}get form(){return this._state.form}get allow_standalone_bookings(){return this._settings.get("app.events.allow_standalone_bookings")}constructor(t,n,i){this._state=t,this._settings=n,this._router=i,this.time=0,this.capacity=0,this.quick_times=[{name:"Now",value:0},{name:"Later Today",value:120},{name:"Tomorrow",value:(0,ce.A)((0,L.A)(new Date,1),9).valueOf()}],this.quick_capacities=[{name:"Any Capacity",value:0},{name:"Small (1 - 4)",value:1},{name:"Medium (5 - 12)",value:5},{name:"Large (13 - 32)",value:13},{name:"Huge (32+)",value:33}],this.options=this._state.options,this.features=this._state.features,this.setOptions=s=>this._state.setOptions(s),this.clearForm=()=>{this.time=this.capacity=0,this._state.clearForm()}}quickBook(){this.form.value.host||this.form.patchValue({host:(0,d.Ny)()?.email}),this.form.patchValue({date:(this.time<1440?(0,H.A)((0,dt.A)(new Date,{nearestTo:5}),this.time):(0,ce.A)((0,L.A)(new Date,1),8)).valueOf(),title:"Ad-hoc Meeting"}),this._state.setOptions({capacity:this.capacity}),this._router.navigate(["/book","spaces","find"])}findSpace(){if(this.form.markAllAsTouched(),this.form.value.host||this.form.patchValue({host:(0,d.Ny)()?.email}),!this.form.valid)return(0,d.UG)(`Some fields are invalid. [${(0,d.F7)(this.form).join(", ")}]`);this._router.navigate(["/book","spaces","find"])}confirmBooking(){if(this.form.value.host||this.form.patchValue({host:(0,d.Ny)()?.email}),this.form.markAllAsTouched(),!this.form.valid)return(0,d.UG)(`Some fields are invalid. [${(0,d.F7)(this.form).join(", ")}]`);this._router.navigate(["/book","spaces","confirm"])}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU($.Ws),e.rXU(d.h$),e.rXU(b.Ix))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["space-flow-form"]],decls:20,vars:11,consts:[["form","",1,"flex-1","min-h-[50%]"],[1,"text-xl","uppercase","font-medium","mb-2","mt-4","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto"],[3,"optionsChange","form","options","features"],[1,"flex","flex-col","sm:flex-row","items-center","justify-center","space-x-0","space-y-2","sm:space-y-0","sm:space-x-2","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","mb-4"],["btn","","matRipple","","clear","",1,"sm:flex-1","w-full","sm:w-auto","h-[2.75rem]","inverse",3,"click"],[1,"flex","items-center","justify-center"],[1,"text-xl"],[1,"ml-2","mx-4"],["btn","","matRipple","","find-space","",1,"sm:flex-1","w-full","sm:w-auto","h-[2.75rem]",3,"click"],["class","sm:flex-1 w-full sm:w-auto h-[2.75rem]","btn","","matRipple","","standalone","",3,"click",4,"ngIf"],["btn","","matRipple","","standalone","",1,"sm:flex-1","w-full","sm:w-auto","h-[2.75rem]",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"section",0)(1,"h2",1),e.EFF(2),e.k0s(),e.j41(3,"detailed-book-space-form",2),e.nI1(4,"async"),e.nI1(5,"async"),e.bIt("optionsChange",function(l){return i.setOptions(l)}),e.k0s(),e.j41(6,"div",3)(7,"button",4),e.bIt("click",function(){return i.clearForm()}),e.j41(8,"div",5)(9,"app-icon",6),e.EFF(10,"clear"),e.k0s(),e.j41(11,"span",7),e.EFF(12),e.k0s()()(),e.j41(13,"button",8),e.bIt("click",function(){return i.findSpace()}),e.j41(14,"div",5)(15,"app-icon",6),e.EFF(16,"search"),e.k0s(),e.j41(17,"span",7),e.EFF(18),e.k0s()()(),e.DNE(19,$s,6,1,"button",9),e.k0s()()),2&n&&(e.R7$(2),e.SpI(" ",i.is_edit?"Edit":"Detailed"," Space Booking "),e.R7$(),e.Y8G("form",i.form)("options",e.bMT(4,7,i.options))("features",e.bMT(5,9,i.features)),e.R7$(9),e.JRh(i.is_edit?"Cancel Edit":"Clear Form"),e.R7$(6),e.JRh(i.is_edit?"Update Spaces":"Find Space"),e.R7$(),e.Y8G("ngIf",i.is_edit||i.allow_standalone_bookings))},dependencies:[c.bT,E.R,F.r6,ys,c.Jj],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column;overflow:auto}[quick][_ngcontent-%COMP%]{background-color:#007ac8}\n\n/*# sourceMappingURL=form.component.ts-angular-inline--112.css.map*/"]})}return o})();var pe=p(22011);p(22168);let As=(()=>{class o{constructor(t){this._dialog=t,this.bookChange=new e.bkB}bookSpace(){this.book=!this.multiple||!this.book,this.bookChange.emit(this.book)}viewLocation(){this._dialog.open($e.VJ,{maxWidth:"95vw",maxHeight:"95vh",data:{item:this.space}})}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(M.bZ))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["space-flow-find-item"]],inputs:{space:"space",multiple:"multiple",book:"book"},outputs:{bookChange:"bookChange"},decls:19,vars:8,consts:[[1,"flex","items-center","bg-base-100","p-2","my-2","shadow","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","rounded"],[1,"flex","flex-col","flex-1","space-y-2"],[1,"flex","items-center"],[1,"p-2","rounded-full","bg-base-200","mr-2"],[1,"flex","flex-col","space-y-2","ml-2"],["matRipple","","book","",3,"click"],["locate","","btn","","matRipple","",1,"inverse",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-icon"),e.EFF(5,"place"),e.k0s()(),e.j41(6,"span"),e.EFF(7),e.k0s()(),e.j41(8,"div",2)(9,"div",3)(10,"app-icon"),e.EFF(11,"group"),e.k0s()(),e.j41(12,"span"),e.EFF(13),e.k0s()()(),e.j41(14,"div",4)(15,"button",5),e.bIt("click",function(){return i.bookSpace()}),e.EFF(16),e.k0s(),e.j41(17,"button",6),e.bIt("click",function(){return i.viewLocation()}),e.EFF(18," Map "),e.k0s()()()),2&n&&(e.R7$(7),e.Lme("",(null==i.space||null==i.space.level?null:i.space.level.display_name)||(null==i.space||null==i.space.level?null:i.space.level.name),", ",(null==i.space?null:i.space.display_name)||(null==i.space?null:i.space.name),""),e.R7$(6),e.SpI("",(null==i.space?null:i.space.capacity)||0," People"),e.R7$(2),e.AVh("bg-warning",i.multiple&&i.book)("border-pending",i.multiple&&i.book),e.R7$(),e.SpI(" ",i.multiple?i.book?"Remove":"Select":"Book"," "))},dependencies:[E.R,F.r6],styles:["button[_ngcontent-%COMP%]{width:8rem}\n\n/*# sourceMappingURL=find-item.component.ts-angular-inline--110.css.map*/"]})}return o})();const Ds=()=>["/book","spaces","form"];function Gs(o,a){if(1&o&&(e.j41(0,"mat-option",23),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t.display_name||t.name," ")}}function Ls(o,a){if(1&o){const t=e.RV6();e.j41(0,"mat-form-field",21)(1,"mat-select",22),e.nI1(2,"async"),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.setBuilding(i))}),e.DNE(3,Gs,2,2,"mat-option",16),e.nI1(4,"async"),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(),e.Y8G("ngModel",e.bMT(2,2,t.building)),e.R7$(2),e.Y8G("ngForOf",e.bMT(4,4,t.buildings))}}function js(o,a){if(1&o&&(e.j41(0,"mat-option",23),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.display_name||t.name," ")}}function Xs(o,a){if(1&o){const t=e.RV6();e.j41(0,"mat-form-field",24)(1,"mat-select",25),e.nI1(2,"async"),e.nI1(3,"async"),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.setOptions({zone_ids:[i]}))}),e.DNE(4,js,2,2,"mat-option",16),e.nI1(5,"async"),e.k0s()()}if(2&o){let t;const n=e.XpG();e.R7$(),e.Y8G("ngModel",null!=(t=e.bMT(2,2,n.options))&&null!=t.zone_ids&&t.zone_ids.length?null==(t=e.bMT(3,4,n.options))?null:t.zone_ids[0]:""),e.R7$(3),e.Y8G("ngForOf",e.bMT(5,6,n.levels))}}function Bs(o,a){if(1&o&&(e.j41(0,"mat-option",23),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI(" ",t.name," ")}}function Ws(o,a){if(1&o&&(e.j41(0,"mat-option",23),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function Vs(o,a){if(1&o){const t=e.RV6();e.j41(0,"mat-form-field",14)(1,"mat-select",26),e.nI1(2,"async"),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.setOptions({features:i}))}),e.DNE(3,Ws,2,2,"mat-option",16),e.nI1(4,"async"),e.k0s()()}if(2&o){let t;const n=e.XpG();e.R7$(),e.Y8G("placeholder","Any "+n.features_label)("ngModel",null==(t=e.bMT(2,3,n.options))?null:t.features),e.R7$(2),e.Y8G("ngForOf",e.bMT(4,5,n.features))}}function Ks(o,a){if(1&o){const t=e.RV6();e.j41(0,"space-flow-find-item",29),e.bIt("bookChange",function(i){const s=e.eBV(t).$implicit,l=e.XpG(3);return e.Njj(l.handleBookEvent(s,i))}),e.k0s()}if(2&o){const t=a.$implicit,n=e.XpG(3);e.Y8G("space",t)("multiple",n.multiple)("book",n.book_space[t.id])}}function Ys(o,a){if(1&o&&(e.qex(0),e.DNE(1,Ks,1,3,"space-flow-find-item",27),e.nI1(2,"async"),e.j41(3,"p",28),e.EFF(4," End of available spaces list "),e.k0s(),e.bVm()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",e.bMT(2,1,t.spaces))}}function Us(o,a){if(1&o&&(e.qex(0),e.DNE(1,Ys,5,3,"ng-container",19),e.nI1(2,"async"),e.bVm()),2&o){let t;const n=e.XpG(),i=e.sdS(29);e.R7$(),e.Y8G("ngIf",(null==(t=e.bMT(2,2,n.spaces))?null:t.length)>0)("ngIfElse",i)}}function zs(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",37)(1,"div",38)(2,"div"),e.EFF(3),e.k0s(),e.j41(4,"div",39),e.EFF(5),e.k0s()(),e.j41(6,"button",40),e.bIt("click",function(i){const s=e.eBV(t).$implicit;return e.XpG(2).handleBookEvent(s,!1),e.Njj(i.stopPropagation())}),e.j41(7,"app-icon"),e.EFF(8,"close"),e.k0s()()()}if(2&o){const t=a.$implicit;e.R7$(3),e.JRh(t.display_name||t.name),e.R7$(2),e.Lme(" ",(null==t.level?null:t.level.display_name)||(null==t.level?null:t.level.name)," ~ ",t.capacity||"2+"," People ")}}function Js(o,a){1&o&&(e.j41(0,"div",41),e.EFF(1," No selected spaces "),e.k0s())}function qs(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",30)(1,"div",31)(2,"div",32),e.EFF(3),e.k0s(),e.j41(4,"button",33),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.confirmBooking())}),e.EFF(5," Book "),e.k0s()(),e.j41(6,"mat-menu",34,2),e.DNE(8,zs,9,3,"div",35)(9,Js,2,0,"div",36),e.k0s()()}if(2&o){const t=e.sdS(7),n=e.XpG();e.R7$(2),e.Y8G("matMenuTriggerFor",t),e.R7$(),e.SpI(" ",null==n.space_list?null:n.space_list.length," space(s) selected "),e.R7$(),e.Y8G("disabled",!(null!=n.space_list&&n.space_list.length)),e.R7$(4),e.Y8G("ngForOf",n.space_list),e.R7$(),e.Y8G("ngIf",!(null!=n.space_list&&n.space_list.length))}}function Hs(o,a){1&o&&(e.j41(0,"div",42),e.nrm(1,"mat-spinner",43),e.j41(2,"p"),e.EFF(3,"Retrieving available spaces..."),e.k0s()()),2&o&&(e.R7$(),e.Y8G("diameter",32))}function Zs(o,a){1&o&&(e.j41(0,"div",44)(1,"p"),e.EFF(2," No available spaces for selected time, capacity or level(s) "),e.k0s()())}let Qs=(()=>{class o{setBuilding(t){var n=this;return(0,h.A)(function*(){const i=yield n.options.pipe((0,W.s)(1)).toPromise();t&&(n._org.building=t);const s=n._org.levelsForBuilding(n._org.building);!s.find(r=>i.zone_ids?.includes(r.id))&&s.length&&n.setOptions({zone_ids:[s[0].id]})})()}get multiple(){return this._settings.get("app.events.multiple_spaces")??!1}get features_label(){return this._settings.get("app.events.features_label")||"feature"}constructor(t,n,i,s,l){this._org=t,this._state=n,this._settings=i,this._router=s,this._space_pipe=l,this.book_space={},this.quick_capacities=[{name:"Any Capacity",value:0},{name:"Small (1 - 4)",value:1},{name:"Medium (5 - 12)",value:5},{name:"Large (13 - 32)",value:13},{name:"Huge (32+)",value:33}],this.space_list=[],this.buildings=this._org.building_list,this.building=this._org.active_building,this.levels=(0,B.zV)([this.building,this._state.options]).pipe((0,ke.p)(([r])=>!!r),(0,x.T)(([r])=>[{id:this._org.building.id,name:"All Levels"},...this._org.levelsForBuilding(r)])),this.loading=this._state.loading,this.options=this._state.options,this.spaces=this._state.available_spaces,this.features=this._state.features,this.setOptions=r=>this._state.setOptions(r)}ngOnInit(){var t=this;return(0,h.A)(function*(){yield t._org.initialised.pipe((0,N.$)(i=>!!i)).toPromise(),t.setBuilding(t._org.building),t.book_space={},(t._state.form?.get("resources")?.value||[]).forEach(i=>t.book_space[i.id]=!0),t.space_list=yield t._getSpaceList()})()}handleBookEvent(t,n=!0){var i=this;return(0,h.A)(function*(){i.multiple?i.book_space[t.id]=n:(i.book_space={},i.book_space[t.id]=n,i.confirmBooking()),i.space_list=yield i._getSpaceList()})()}confirmBooking(){var t=this;return(0,h.A)(function*(){const n=yield t._getSpaceList();t._state.form.patchValue({resources:n,system:n[0]}),t._router.navigate(["/book","spaces","confirm"])})()}_getSpaceList(){const t=Object.keys(this.book_space).filter(n=>this.book_space[n]);return t.length?Promise.all(t.map(n=>this._space_pipe.transform(n))):Promise.resolve([])}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(T.yb),e.rXU($.Ws),e.rXU(d.h$),e.rXU(b.Ix),e.rXU(pe.J))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["space-flow-find"]],features:[e.Jv_([pe.J])],decls:30,vars:20,consts:[["load_state",""],["empty_state",""],["menu","matMenu"],["topbar","",1,""],["btn","","matRipple","",1,"clear","h-[2.75rem]","text-white",3,"routerLink"],[1,"flex","items-center","justify-center","h-full"],[1,"text-xl"],[1,"ml-2","mx-4"],["filters",""],[1,"w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","py-4"],[1,"text-xl","uppercase","font-medium","text-white"],[1,"flex","flex-col","items-center","sm:flex-row","space-x-0","sm:space-x-2"],["overlay","","buildings","","class","w-full sm:w-px sm:flex-1 h-[3.25rem]","appearance","outline",4,"ngIf"],["class","w-full sm:w-px sm:flex-1 h-[3.25rem]","overlay","","appearance","outline",4,"ngIf"],["overlay","","appearance","outline",1,"w-full","sm:w-px","sm:flex-1","h-[3.25rem]","hidden","sm:block"],["placeholder","Any Capacity",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","w-full sm:w-px sm:flex-1 h-[3.25rem] hidden sm:block","overlay","","appearance","outline",4,"ngIf"],[1,"flex-1","w-full","bg-base-200","overflow-auto"],[4,"ngIf","ngIfElse"],["class","bg-base-100 border-t border-base-200",4,"ngIf"],["overlay","","buildings","","appearance","outline",1,"w-full","sm:w-px","sm:flex-1","h-[3.25rem]"],["placeholder","Select Building...",3,"ngModelChange","ngModel"],[3,"value"],["overlay","","appearance","outline",1,"w-full","sm:w-px","sm:flex-1","h-[3.25rem]"],["placeholder","Level",3,"ngModelChange","ngModel"],["multiple","",3,"ngModelChange","placeholder","ngModel"],["class","w-[640px] max-w-[calc(100%-2rem)] mx-auto ",3,"space","multiple","book","bookChange",4,"ngFor","ngForOf"],[1,"p-4","text-center","opacity-60"],[1,"w-[640px]","max-w-[calc(100%-2rem)]","mx-auto",3,"bookChange","space","multiple","book"],[1,"bg-base-100","border-t","border-base-200"],[1,"flex","items-center","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","p-2"],[1,"flex-1","underline",3,"matMenuTriggerFor"],["btn","","matRipple","",1,"w-32",3,"click","disabled"],["yPosition","above"],["class","flex items-center pointer-events-none leading-tight","mat-menu-item","",4,"ngFor","ngForOf"],["mat-menu-item","","class"," opacity-60",4,"ngIf"],["mat-menu-item","",1,"flex","items-center","pointer-events-none","leading-tight"],[1,"flex","flex-col","mr-4"],[1,"text-xs","opacity-70"],["icon","","matRipple","",1,"pointer-events-auto",3,"click"],["mat-menu-item","",1,"opacity-60"],[1,"h-full","w-full","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"],[1,"h-full","w-full","flex","flex-col","items-center","justify-center","space-y-2","p-8","text-center"]],template:function(n,i){if(1&n){const s=e.RV6();e.j41(0,"div",3)(1,"a",4)(2,"div",5)(3,"app-icon",6),e.EFF(4,"arrow_back"),e.k0s(),e.j41(5,"span",7),e.EFF(6,"Back"),e.k0s()()()(),e.j41(7,"div",8)(8,"div",9)(9,"h2",10),e.EFF(10," Available Spaces "),e.k0s(),e.j41(11,"div",11),e.DNE(12,Ls,5,6,"mat-form-field",12),e.nI1(13,"async"),e.DNE(14,Xs,6,8,"mat-form-field",13),e.nI1(15,"async"),e.j41(16,"mat-form-field",14)(17,"mat-select",15),e.nI1(18,"async"),e.bIt("ngModelChange",function(r){return e.eBV(s),e.Njj(i.setOptions({capacity:r}))}),e.DNE(19,Bs,2,2,"mat-option",16),e.k0s()(),e.DNE(20,Vs,5,7,"mat-form-field",17),e.nI1(21,"async"),e.k0s()()(),e.j41(22,"div",18),e.DNE(23,Us,3,4,"ng-container",19),e.nI1(24,"async"),e.k0s(),e.DNE(25,qs,10,5,"div",20)(26,Hs,4,1,"ng-template",null,0,e.C5r)(28,Zs,3,0,"ng-template",null,1,e.C5r)}if(2&n){let s,l,r,_;const u=e.sdS(27);e.R7$(),e.Y8G("routerLink",e.lJ4(19,Ds)),e.R7$(11),e.Y8G("ngIf",(null==(s=e.bMT(13,9,i.buildings))?null:s.length)>1),e.R7$(2),e.Y8G("ngIf",(null==(l=e.bMT(15,11,i.levels))?null:l.length)>0),e.R7$(3),e.Y8G("ngModel",null==(r=e.bMT(18,13,i.options))?null:r.capacity),e.R7$(2),e.Y8G("ngForOf",i.quick_capacities),e.R7$(),e.Y8G("ngIf",null==(_=e.bMT(21,15,i.features))?null:_.length),e.R7$(3),e.Y8G("ngIf",!e.bMT(24,17,i.loading))("ngIfElse",u),e.R7$(2),e.Y8G("ngIf",i.multiple)}},dependencies:[c.Sq,c.bT,E.R,F.wT,G.kk,G.fb,G.Cp,I.rl,te.VO,F.r6,S.LG,m.BC,m.vS,b.Wk,As,c.Jj],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[topbar][_ngcontent-%COMP%]{background-color:var(--secondary-dark)}[filters][_ngcontent-%COMP%]{background-color:var(--p)}\n\n/*# sourceMappingURL=find.component.ts-angular-inline--111.css.map*/"]})}return o})();var ea=p(23574),ta=p(17022);const Ct=()=>["/book","spaces","find"],Se=()=>["/book","spaces","form"];function na(o,a){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"date"),e.nI1(3,"date"),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Lme(" at ",e.i5U(2,2,t.form.value.date,"shortTime")," ~ ",e.i5U(3,5,t.form.value.date+60*t.form.value.duration*1e3,"shortTime")," ")}}function oa(o,a){1&o&&(e.j41(0,"button",23),e.EFF(1," Map "),e.k0s())}function ia(o,a){if(1&o&&(e.j41(0,"div",21)(1,"span"),e.EFF(2),e.k0s(),e.DNE(3,oa,2,0,"button",22),e.k0s()),2&o){const t=a.$implicit,n=e.XpG();e.R7$(2),e.Lme("",t.display_name||t.name," [",(null==t.level?null:t.level.display_name)||(null==t.level?null:t.level.name),"]"),e.R7$(),e.Y8G("ngIf",n.can_view_location)}}function sa(o,a){if(1&o&&(e.j41(0,"div",24),e.nrm(1,"a-user-avatar",25),e.j41(2,"span"),e.EFF(3),e.k0s()()),2&o){const t=a.$implicit;e.R7$(),e.Y8G("user",t),e.R7$(2),e.JRh(t.name||t.email)}}function aa(o,a){if(1&o&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&o){const t=e.XpG().$implicit,n=e.XpG(2);e.Y8G("matTooltip",n.optionsFor(t)),e.R7$(),e.Lme(" ",t.options.length," option",1===t.options.length?"":"s"," selected ")}}function la(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",24)(1,"div",27)(2,"div",27),e.EFF(3),e.k0s(),e.DNE(4,aa,2,3,"div",28),e.k0s(),e.j41(5,"div",29),e.EFF(6),e.nI1(7,"currency"),e.k0s(),e.j41(8,"a-counter",30),e.mxI("ngModelChange",function(i){const s=e.eBV(t).$implicit;return e.DH7(s.quantity,i)||(s.quantity=i),e.Njj(i)}),e.k0s()()}if(2&o){const t=a.$implicit,n=e.XpG(2);e.R7$(3),e.JRh(t.name),e.R7$(),e.Y8G("ngIf",t.options.length),e.R7$(2),e.SpI(" ",e.i5U(7,4,t.total_cost/100,n.code)," "),e.R7$(2),e.R50("ngModel",t.quantity)}}function ra(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",12)(1,"div",13)(2,"div",8)(3,"app-icon"),e.EFF(4,"group"),e.k0s()(),e.j41(5,"div",9),e.EFF(6),e.k0s(),e.j41(7,"button",26),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.show_catering=!i.show_catering)}),e.EFF(8),e.k0s(),e.j41(9,"a",11),e.EFF(10,"Edit"),e.k0s()(),e.j41(11,"div",15),e.DNE(12,la,9,7,"div",17),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(6),e.SpI(" ",(null==t.form.value.catering[0]?null:t.form.value.catering[0].item_count)||0," Catering Item(s) "),e.R7$(2),e.SpI(" ",t.show_people?"Hide":"Show"," "),e.R7$(),e.Y8G("routerLink",e.lJ4(6,Se)),e.R7$(2),e.xc7("height",t.show_catering?3*(null==t.form.value.catering[0]?null:t.form.value.catering[0].items.length)+"rem":"0"),e.R7$(),e.Y8G("ngForOf",null==t.form.value.catering[0]?null:t.form.value.catering[0].items)}}function _a(o,a){1&o&&(e.j41(0,"span"),e.EFF(1,"Confirm"),e.k0s())}function ca(o,a){1&o&&e.nrm(0,"mat-spinner",32),2&o&&e.Y8G("diameter",24)}let da=(()=>{class o{optionsFor(t){return t.options.map(n=>n.name).join("\n")}get can_view_location(){return!this._settings.get("app.no_maps")}get form(){return this._state.form}get code(){return this._org.currency_code}constructor(t,n,i){var s=this;this._org=t,this._state=n,this._settings=i,this.show_spaces=!1,this.show_people=!1,this.show_catering=!1,this.loading=!1,this.postForm=(0,h.A)(function*(){s.loading=!0,yield s._state.postForm().catch(l=>(0,d.UG)(l instanceof Object?l.message||"Bad Request":l)),s.loading=!1})}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(T.yb),e.rXU($.Ws),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["space-flow-confirm"]],decls:60,vars:34,consts:[["topbar","",1,""],["button","","btn","","matRipple","",1,"clear","h-[2.75rem]","text-white",3,"routerLink"],[1,"flex","items-center","justify-center","h-full"],[1,"text-xl"],[1,"ml-2","mx-4"],[1,"flex","flex-col","items-center","space-y-2","w-[640px]","max-w-[calc(100%-2rem)]","mx-auto","mb-4"],[1,"text-xl","uppercase","font-medium","w-full","my-4"],[1,"flex","items-center","py-2","space-x-2","border-b","border-base-200","w-full"],[1,"p-2","rounded-full","bg-base-200","mr-2"],[1,"flex-1","truncate"],[4,"ngIf"],["btn","","matRipple","",1,"clear","underline",3,"routerLink"],[1,"border-b","border-base-200","w-full"],[1,"flex","items-center","py-2","space-x-2"],["matRipple","",1,"clear","bg-transparent","border-none","underline",3,"click","disabled"],["list","",1,"overflow-hidden"],["class","flex items-center h-10 pl-12",4,"ngFor","ngForOf"],["class","flex items-center h-12 pl-12 space-x-2",4,"ngFor","ngForOf"],["class","border-b border-base-200 w-full",4,"ngIf"],["matRipple","","confirm","",1,"w-32",3,"click","disabled"],["class","mx-auto",3,"diameter",4,"ngIf"],[1,"flex","items-center","h-10","pl-12"],["matRipple","","class","bg-transparent border-none underline",4,"ngIf"],["matRipple","",1,"bg-transparent","border-none","underline"],[1,"flex","items-center","h-12","pl-12","space-x-2"],[1,"text-sm",3,"user"],["matRipple","",1,"clear","bg-transparent","border-none","underline",3,"click"],[1,"flex-1","w-1/2"],["class","text-xs underline",3,"matTooltip",4,"ngIf"],[1,"bg-primary","text-xs","rounded","px-4","py-2","mx-2","text-white","font-medium"],[3,"ngModelChange","ngModel"],[1,"text-xs","underline",3,"matTooltip"],[1,"mx-auto",3,"diameter"]],template:function(n,i){if(1&n&&(e.j41(0,"div",0)(1,"a",1)(2,"div",2)(3,"app-icon",3),e.EFF(4,"arrow_back"),e.k0s(),e.j41(5,"span",4),e.EFF(6,"Back"),e.k0s()()()(),e.j41(7,"div",5)(8,"h2",6),e.EFF(9," Your meeting details "),e.k0s(),e.j41(10,"div",7)(11,"div",8)(12,"app-icon"),e.EFF(13,"event"),e.k0s()(),e.j41(14,"div",9),e.EFF(15),e.nI1(16,"date"),e.DNE(17,na,4,8,"span",10),e.k0s(),e.j41(18,"a",11),e.EFF(19,"Edit"),e.k0s()(),e.j41(20,"div",7)(21,"div",8)(22,"app-icon"),e.EFF(23,"schedule"),e.k0s()(),e.j41(24,"div",9),e.EFF(25),e.nI1(26,"duration"),e.k0s(),e.j41(27,"a",11),e.EFF(28," Edit "),e.k0s()(),e.j41(29,"div",12)(30,"div",13)(31,"div",8)(32,"app-icon"),e.EFF(33,"place"),e.k0s()(),e.j41(34,"div",9),e.EFF(35),e.k0s(),e.j41(36,"button",14),e.bIt("click",function(){return i.show_spaces=!i.show_spaces}),e.EFF(37),e.k0s(),e.j41(38,"a",11),e.EFF(39,"Edit"),e.k0s()(),e.j41(40,"div",15),e.DNE(41,ia,4,3,"div",16),e.k0s()(),e.j41(42,"div",12)(43,"div",13)(44,"div",8)(45,"app-icon"),e.EFF(46,"group"),e.k0s()(),e.j41(47,"div",9),e.EFF(48),e.k0s(),e.j41(49,"button",14),e.bIt("click",function(){return i.show_people=!i.show_people}),e.EFF(50),e.k0s(),e.j41(51,"a",11),e.EFF(52,"Edit"),e.k0s()(),e.j41(53,"div",15),e.DNE(54,sa,4,2,"div",17),e.k0s()(),e.DNE(55,ra,13,7,"div",18),e.j41(56,"button",19),e.bIt("click",function(){return i.postForm()}),e.DNE(57,_a,2,0,"span",10)(58,ca,1,1,"mat-spinner",20),e.k0s()(),e.EFF(59," < ")),2&n){let s,l,r,_,u,g,f,k;e.R7$(),e.Y8G("routerLink",e.lJ4(29,Ct)),e.R7$(14),e.SpI(" ",e.i5U(16,24,i.form.value.date,"longDate")," "),e.R7$(2),e.Y8G("ngIf",!i.form.value.all_day),e.R7$(),e.Y8G("routerLink",e.lJ4(30,Se)),e.R7$(7),e.SpI(" ",i.form.value.all_day?"All Day":e.bMT(26,27,i.form.value.duration)," "),e.R7$(2),e.Y8G("routerLink",e.lJ4(31,Se)),e.R7$(8),e.SpI(" ",null==(s=i.form.get("resources"))||null==s.value?null:s.value.length," Space(s) "),e.R7$(),e.Y8G("disabled",!(null!=(l=i.form.get("resources"))&&null!=l.value&&l.value.length)),e.R7$(),e.SpI(" ",i.show_spaces?"Hide":"Show"," "),e.R7$(),e.Y8G("routerLink",e.lJ4(32,Ct)),e.R7$(2),e.xc7("height",i.show_spaces?2.5*(null==(r=i.form.get("resources"))||null==r.value?null:r.value.length)+"rem":"0"),e.R7$(),e.Y8G("ngForOf",null==(_=i.form.get("resources"))?null:_.value),e.R7$(7),e.SpI(" ",(null==(u=i.form.get("attendees"))||null==u.value?null:u.value.length)||0," Attendee(s) "),e.R7$(),e.Y8G("disabled",!(null!=(g=i.form.get("attendees"))&&null!=g.value&&g.value.length)),e.R7$(),e.SpI(" ",i.show_people?"Hide":"Show"," "),e.R7$(),e.Y8G("routerLink",e.lJ4(33,Se)),e.R7$(2),e.xc7("height",i.show_people?3*(null==(f=i.form.get("attendees"))||null==f.value?null:f.value.length)+"rem":"0"),e.R7$(),e.Y8G("ngForOf",null==(k=i.form.get("attendees"))?null:k.value),e.R7$(),e.Y8G("ngIf",null==i.form.value.catering?null:i.form.value.catering.length),e.R7$(),e.Y8G("disabled",i.loading),e.R7$(),e.Y8G("ngIf",!i.loading),e.R7$(),e.Y8G("ngIf",i.loading)}},dependencies:[c.Sq,c.bT,E.R,ea.a,F.r6,S.LG,q.oV,Re.s,m.BC,m.vS,b.Wk,c.oe,c.vh,ta.b],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[topbar][_ngcontent-%COMP%]{background-color:#00539f}[list][_ngcontent-%COMP%]{transition:height .2s}\n\n/*# sourceMappingURL=confirm.component.ts-angular-inline--109.css.map*/"]})}return o})();function ma(o,a){1&o&&(e.qex(0),e.nrm(1,"space-flow-find"),e.bVm())}function pa(o,a){1&o&&(e.qex(0),e.nrm(1,"space-flow-confirm"),e.bVm())}function ua(o,a){if(1&o&&(e.qex(0),e.nrm(1,"flow-success",4),e.bVm()),2&o){const t=e.XpG();e.R7$(),e.Y8G("calendar",null==t.last_success?null:t.last_success.host)}}function fa(o,a){1&o&&(e.qex(0),e.nrm(1,"space-flow-form"),e.bVm())}let ga=(()=>{class o extends d.Tv{get view(){return this._state.view}get last_success(){return this._state.last_success}constructor(t,n){super(),this._state=t,this._route=n}ngOnInit(){this._state.loadForm(),this.subscription("route.params",this._route.paramMap.subscribe(t=>{t.has("step")&&this._state.setView(t.get("step"))})),this.subscription("route.query",this._route.queryParamMap.subscribe(t=>{t.has("success")&&this._state.setView(t.get("success"))}))}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU($.Ws),e.rXU(b.nX))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["placeos-book-space-flow"]],features:[e.Vt3],decls:6,vars:4,consts:[[1,"bg-base-100","h-full","w-full"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"calendar"]],template:function(n,i){1&n&&(e.j41(0,"div",0),e.qex(1,1),e.DNE(2,ma,2,0,"ng-container",2)(3,pa,2,0,"ng-container",2)(4,ua,2,1,"ng-container",2)(5,fa,2,0,"ng-container",3),e.bVm(),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngSwitch",i.view),e.R7$(),e.Y8G("ngSwitchCase","find"),e.R7$(),e.Y8G("ngSwitchCase","confirm"),e.R7$(),e.Y8G("ngSwitchCase","success"))},dependencies:[c.ux,c.e1,c.fG,Ps,Qs,da,De],styles:["[_nghost-%COMP%]{position:relative;height:100%;width:100%}\n\n/*# sourceMappingURL=space-flow.component.ts-angular-inline--108.css.map*/"]})}return o})();var ha=p(16591),Fa=p(69801);const Ca=()=>({});function va(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",14),e.nI1(1,"async"),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.setDate(i.id))}),e.j41(2,"p",15),e.EFF(3),e.k0s(),e.j41(4,"p",16),e.EFF(5),e.nI1(6,"async"),e.k0s(),e.j41(7,"p",17),e.EFF(8,"Available"),e.k0s()()}if(2&o){let t;const n=a.$implicit,i=e.XpG(2);e.AVh("selected",n.id===(null==(t=e.bMT(1,4,i.options))?null:t.date)),e.R7$(3),e.JRh(n.name),e.R7$(2),e.SpI(" ",(e.bMT(6,6,i.counts)||e.lJ4(8,Ca))[n.id]||"0"," ")}}function ba(o,a){if(1&o&&(e.j41(0,"mat-option",22),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t.display_name||t.name," ")}}function Ea(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",18)(1,"mat-form-field",19)(2,"mat-select",20),e.nI1(3,"async"),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.setLevel(null==i?null:i.id))}),e.DNE(4,ba,2,2,"mat-option",21),e.nI1(5,"async"),e.k0s()()()}if(2&o){const t=e.XpG(2);e.R7$(2),e.Y8G("ngModel",e.bMT(3,2,t.level)),e.R7$(2),e.Y8G("ngForOf",e.bMT(5,4,t.levels))}}function Ra(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",23),e.nI1(1,"async"),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.setActive(i))}),e.j41(2,"div",24),e.EFF(3),e.k0s(),e.j41(4,"div",25),e.EFF(5),e.k0s()()}if(2&o){let t;const n=a.$implicit,i=e.XpG(2);e.AVh("active",(null==(t=e.bMT(1,4,i.active_space))?null:t.id)===n.id),e.R7$(3),e.SpI("Bay No. ",n.name,""),e.R7$(2),e.SpI(" ",i.levelName(n.zone_id)," ")}}function ka(o,a){1&o&&(e.j41(0,"p",29),e.EFF(1," Note that your existing parking space reservation will be replaced "),e.k0s())}function Oa(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",26)(1,"p"),e.EFF(2),e.nI1(3,"async"),e.k0s(),e.DNE(4,ka,2,0,"p",27),e.nI1(5,"async"),e.j41(6,"button",28),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.reserveSpace())}),e.EFF(7," Reserve Space "),e.k0s()()}if(2&o){let t;const n=e.XpG(2);e.R7$(2),e.SpI(" Parking Bay No. ",e.bMT(3,2,n.active_space).name," selected. "),e.R7$(2),e.Y8G("ngIf",null==(t=e.bMT(5,4,n.existing))?null:t.length)}}function Ta(o,a){if(1&o&&(e.j41(0,"div",30)(1,"p"),e.EFF(2),e.nI1(3,"async"),e.nI1(4,"async"),e.k0s()()),2&o){let t;const n=e.XpG(2);e.R7$(2),e.SpI(" Parking is not available for ",(null==(t=e.bMT(3,1,n.building))?null:t.display_name)||(null==(t=e.bMT(4,3,n.building))?null:t.name)," ")}}function Ma(o,a){if(1&o&&(e.j41(0,"div",2)(1,"div",3),e.DNE(2,va,9,9,"button",4),e.k0s(),e.j41(3,"div",5)(4,"div",6),e.DNE(5,Ea,6,6,"div",7),e.nI1(6,"async"),e.j41(7,"p"),e.EFF(8),e.nI1(9,"async"),e.k0s(),e.DNE(10,Ra,6,6,"button",8),e.nI1(11,"async"),e.k0s(),e.j41(12,"div",9),e.nrm(13,"interactive-map",10),e.nI1(14,"async"),e.nI1(15,"async"),e.nI1(16,"async"),e.nI1(17,"async"),e.nI1(18,"async"),e.nI1(19,"async"),e.nI1(20,"async"),e.nrm(21,"explore-zoom-controls",11),e.k0s(),e.DNE(22,Oa,8,6,"div",12),e.nI1(23,"async"),e.DNE(24,Ta,5,5,"div",13),e.nI1(25,"async"),e.k0s()()),2&o){let t,n,i,s,l;const r=e.XpG();e.R7$(2),e.Y8G("ngForOf",r.dates),e.R7$(3),e.Y8G("ngIf",(null==(t=e.bMT(6,13,r.levels))?null:t.length)>1),e.R7$(3),e.SpI("",null==(n=e.bMT(9,15,r.available))?null:n.length," space(s) available"),e.R7$(2),e.Y8G("ngForOf",e.bMT(11,17,r.available)),e.R7$(3),e.Y8G("src",e.bMT(14,19,r.url))("zoom",null==(i=e.bMT(15,21,r.positions))?null:i.zoom)("center",null==(s=e.bMT(16,23,r.positions))?null:s.center)("styles",e.bMT(17,25,r.styles))("features",e.bMT(18,27,r.features))("actions",e.bMT(19,29,r.actions))("labels",e.bMT(20,31,r.labels)),e.R7$(9),e.Y8G("ngIf",e.bMT(23,33,r.active_space)),e.R7$(2),e.Y8G("ngIf",!(null!=(l=e.bMT(25,35,r.levels))&&l.length))}}function Ia(o,a){1&o&&(e.j41(0,"div",32),e.nrm(1,"mat-spinner",33),e.j41(2,"p"),e.EFF(3,"Reserving parking space..."),e.k0s()())}function xa(o,a){if(1&o&&(e.DNE(0,Ia,4,0,"div",31),e.nI1(1,"async")),2&o){let t;const n=e.XpG();e.Y8G("ngIf",!(null!=(t=e.bMT(1,1,n.levels))&&t.length))}}let Sa=(()=>{class o extends d.Tv{constructor(t){super(),this._details=t,this.zoom=1,this.ratio=1,this.subscription("zoom",this._details.zoom$?.subscribe(n=>this.zoom=n)),this.subscription("ratio",this._details.ratio$?.subscribe(n=>this.ratio=n))}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU($e.Nw))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["space-ping"]],features:[e.Vt3],decls:2,vars:2,consts:[[1,"absolute","inset-0","pointer-events-auto"],[1,"absolute","inset-0","animate-ping","border-4","border-green-600"]],template:function(n,i){1&n&&(e.j41(0,"div",0),e.nrm(1,"div",1),e.k0s()),2&n&&e.xc7("transform","scale("+i.zoom*i.ratio+")")},encapsulation:2})}return o})(),wa=(()=>{class o extends d.Tv{levelName(t){const n=this._org.levelWithID([t]);return n?.display_name||n?.name||""}setActive(t){t===this.active_space.getValue()?this.active_space.next(null):(this._booking.form.patchValue({asset_id:t.id,asset_name:t.name}),this.active_space.next(t))}constructor(t,n,i,s,l){var r;super(),r=this,this._state=t,this._parking=n,this._org=i,this._booking=s,this._router=l,this.url=this._state.map_url,this.styles=this._state.map_styles,this.positions=this._state.map_positions,this.features=this._state.map_features,this.actions=this._state.map_actions,this.labels=this._state.map_labels,this.building=this._org.active_building,this.level=this._state.level,this.levels=this._parking.levels,this.available=this._parking.available_spaces,this.counts=this._parking.week_availablility,this.options=this._parking.options,this.existing=this._parking.existing_event,this.loading=this._booking.loading,this.active_space=new w.t(null),this.dates=new Array(7).fill(0).map((_,u)=>({id:(0,se.A)((0,L.A)(Date.now(),u)).valueOf(),name:(0,ee.A)((0,L.A)(Date.now(),u),"EEE, dd MMM"),available:0})),this.setDate=_=>this._parking.setOptions({date:_}),this.setLevel=_=>this._state.setLevel(_),this.reserveSpace=(0,h.A)(function*(){const _=yield r._parking.existing_event.pipe((0,W.s)(1)).toPromise();_.length&&r._booking.form.patchValue({id:_[0].id}),yield r._booking.postForm(),r._router.navigate(["book","parking","success"])})}ngOnInit(){var t=this;return(0,h.A)(function*(){yield t._org.initialised.pipe((0,N.$)(n=>n)).toPromise(),t._state.reset(),t.subscription("levels",t._parking.levels.subscribe(n=>{t._state.setLevel(n[0]?.id)})),t.subscription("spaces",t._parking.available_spaces.subscribe(n=>{t._state.setActions("parking_spaces",(n||[]).map(i=>({id:i.map_id,action:"click",callback:()=>t.setActive(i)})))})),t.subscription("active_space",t.active_space.subscribe(n=>{if(!n)return t._state.setFeatures("parking_space",[]);t._state.setFeatures("parking_space",[{location:n.map_id,content:Sa,full_size:!0,z_index:0}])}))})()}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(fe.Oe),e.rXU(fe.XU),e.rXU(T.yb),e.rXU(R.nx),e.rXU(b.Ix))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["parking-flow-map"]],features:[e.Jv_([fe.XU]),e.Vt3],decls:4,vars:4,consts:[["load_state",""],["class","w-full h-full flex flex-col items-center relative",4,"ngIf","ngIfElse"],[1,"w-full","h-full","flex","flex-col","items-center","relative"],[1,"p-4","flex","items-center","justify-center","bg-secondary","w-full","shadow","z-10","text-white","space-x-2"],["matRipple","","class","border border-white flex flex-col items-center justify-center h-24 w-28 rounded",3,"selected","click",4,"ngFor","ngForOf"],[1,"flex","w-full","h-1/2","flex-1","z-0"],[1,"p-2","sm:w-[18rem]","w-full","h-full","bg-base-200","shadow","border-r","border-base-200","z-10","overflow-auto","space-y-2"],["class","bg-base-100 sticky top-0 w-full z-10",4,"ngIf"],["matRipple","","class","flex items-center justify-between bg-base-100 rounded-lg border border-base-200 p-2 w-full",3,"active","click",4,"ngFor","ngForOf"],[1,"bg-base-200","flex-1","w-1/2","h-full","z-0","relative","hidden","sm:block"],[3,"src","zoom","center","styles","features","actions","labels"],[1,"absolute","bottom-0","right-0"],["class","absolute left-1/2 bottom-2 -translate-x-1/2 bg-base-100 shadow rounded p-4 flex flex-col space-y-2",4,"ngIf"],["class","absolute inset-0 bg-base-100/80 flex flex-col items-center justify-center z-50",4,"ngIf"],["matRipple","",1,"border","border-white","flex","flex-col","items-center","justify-center","h-24","w-28","rounded",3,"click"],[1,"mb-2","font-medium"],[1,"text-2xl"],[1,"text-sm"],[1,"bg-base-100","sticky","top-0","w-full","z-10"],["appearance","outline",1,"w-full","h-[3.25rem]"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matRipple","",1,"flex","items-center","justify-between","bg-base-100","rounded-lg","border","border-base-200","p-2","w-full",3,"click"],[1,"text-lg"],[1,"opacity-60"],[1,"absolute","left-1/2","bottom-2","-translate-x-1/2","bg-base-100","shadow","rounded","p-4","flex","flex-col","space-y-2"],["class","p-2 rounded text-sm max-w-[20rem] text-center text-pending leading-tight",4,"ngIf"],["btn","","matRipple","",3,"click"],[1,"p-2","rounded","text-sm","max-w-[20rem]","text-center","text-pending","leading-tight"],[1,"absolute","inset-0","bg-base-100/80","flex","flex-col","items-center","justify-center","z-50"],["class","absolute inset-0 bg-base-100/80 flex flex-col items-center justify-center z-50 space-y-2",4,"ngIf"],[1,"absolute","inset-0","bg-base-100/80","flex","flex-col","items-center","justify-center","z-50","space-y-2"],["diameter","32"]],template:function(n,i){if(1&n&&(e.DNE(0,Ma,26,37,"div",1),e.nI1(1,"async"),e.DNE(2,xa,2,3,"ng-template",null,0,e.C5r)),2&n){const s=e.sdS(3);e.Y8G("ngIf",!e.bMT(1,2,i.loading))("ngIfElse",s)}},dependencies:[c.Sq,c.bT,ft.S,F.wT,I.rl,te.VO,F.r6,S.LG,m.BC,m.vS,Fa.l,c.Jj],styles:[".active[_ngcontent-%COMP%]{background-color:var(--s)!important;color:#fff}.selected[_ngcontent-%COMP%]{background-color:#fff!important;color:#000d}\n\n/*# sourceMappingURL=parking-flow-map.component.ts-angular-inline--114.css.map*/"]})}return o})(),vt=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["parking-flow-confirm"]],decls:0,vars:0,template:function(n,i){}})}return o})();function Na(o,a){1&o&&(e.qex(0),e.nrm(1,"parking-flow-confirm"),e.bVm())}function ya(o,a){if(1&o&&(e.qex(0),e.nrm(1,"flow-success",4),e.bVm()),2&o){const t=e.XpG();e.R7$(),e.Y8G("calendar",null==t.last_success?null:t.last_success.host)}}function $a(o,a){1&o&&(e.qex(0),e.nrm(1,"parking-flow-map"),e.bVm())}let Pa=(()=>{class o extends d.Tv{get view(){return this._state.view}get last_success(){return this._state.last_success}constructor(t,n){super(),this._state=t,this._route=n}ngOnInit(){this._state.setOptions({type:"parking"}),this._state.loadForm(),this._state.form||this._state.newForm(),this.subscription("route.params",this._route.paramMap.subscribe(t=>{t.has("step")&&this._state.setView(t.get("step"))})),this.subscription("route.query",this._route.queryParamMap.subscribe(t=>{t.has("success")&&this._state.setView(t.get("success"))}))}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(R.nx),e.rXU(b.nX))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["placeos-book-parking-flow"]],features:[e.Vt3],decls:5,vars:3,consts:[[1,"bg-base-100","h-full","w-full"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["route","parking","type","parking",3,"calendar"]],template:function(n,i){1&n&&(e.j41(0,"div",0),e.qex(1,1),e.DNE(2,Na,2,0,"ng-container",2)(3,ya,2,1,"ng-container",2)(4,$a,2,0,"ng-container",3),e.bVm(),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngSwitch",i.view),e.R7$(),e.Y8G("ngSwitchCase","confirm"),e.R7$(),e.Y8G("ngSwitchCase","success"))},dependencies:[c.ux,c.e1,c.fG,wa,vt,De],styles:["[_nghost-%COMP%]{position:relative;height:100%;width:100%}\n\n/*# sourceMappingURL=parking-flow.component.ts-angular-inline--113.css.map*/"]})}return o})();var Aa=p(68390),Da=p(97236),bt=p(33747),Le=p(54616);function Ga(o,a){1&o&&(e.j41(0,"button",25)(1,"app-icon"),e.EFF(2,"close"),e.k0s()())}function La(o,a){if(1&o&&(e.j41(0,"div",17)(1,"app-icon"),e.EFF(2,"update"),e.k0s(),e.j41(3,"div",18),e.EFF(4),e.k0s()()),2&o){const t=e.XpG();e.R7$(4),e.JRh(t.formatted_recurrence)}}function ja(o,a){if(1&o&&(e.qex(0),e.j41(1,"div",17)(2,"app-icon"),e.EFF(3,"layers"),e.k0s(),e.j41(4,"div"),e.EFF(5),e.k0s()(),e.bVm()),2&o){const t=a.$implicit,n=e.XpG(2);e.R7$(5),e.Lme(" ",(null==n.level?null:n.level.display_name)||(null==n.level?null:n.level.name),", ",t.display_name||t.name," ")}}function Xa(o,a){if(1&o&&(e.j41(0,"div",14)(1,"div",15)(2,"app-icon"),e.EFF(3,"done"),e.k0s()(),e.j41(4,"h3",16),e.pXf(5,2),e.k0s(),e.DNE(6,ja,6,2,"ng-container",26),e.j41(7,"div",17)(8,"app-icon"),e.EFF(9,"place"),e.k0s(),e.j41(10,"div"),e.EFF(11),e.k0s()()()),2&o){const t=e.XpG();e.R7$(6),e.Y8G("ngForOf",t.event.resources),e.R7$(5),e.JRh(t.location)}}function Ba(o,a){if(1&o&&(e.j41(0,"mat-chip")(1,"div",30)(2,"app-icon",31),e.EFF(3,"business"),e.k0s(),e.EFF(4),e.k0s()()),2&o){const t=a.$implicit;e.R7$(4),e.SpI(" ",t.name||t.email," ")}}function Wa(o,a){if(1&o&&(e.j41(0,"div",27)(1,"div",15)(2,"app-icon"),e.EFF(3,"done"),e.k0s()(),e.j41(4,"h3",16),e.pXf(5,3),e.k0s(),e.j41(6,"div",28)(7,"mat-chip-list",29,0),e.DNE(9,Ba,5,1,"mat-chip",26),e.k0s()()()),2&o){const t=e.XpG();e.R7$(5),e.uP7(t.event.attendees.length)(t.event.attendees.length),e.nnv(5),e.R7$(4),e.Y8G("ngForOf",t.event.attendees)}}function Va(o,a){if(1&o&&(e.j41(0,"div",44)(1,"app-icon"),e.EFF(2,"priority_high"),e.k0s()()),2&o){const t=e.XpG(4);e.Y8G("matTooltip",t.err_tooltip)}}function Ka(o,a){if(1&o&&(e.j41(0,"span",50),e.EFF(1),e.k0s()),2&o){const t=e.XpG().$implicit,n=e.XpG(4);e.Y8G("matTooltip",n.optionList(t)),e.R7$(),e.SpI(" ",(null==t.option_list?null:t.option_list.length)||"0"," option(s) ")}}function Ya(o,a){if(1&o&&(e.j41(0,"div",45)(1,"div",46)(2,"span",37),e.EFF(3),e.k0s(),e.DNE(4,Ka,2,2,"span",47),e.k0s(),e.j41(5,"div",48),e.EFF(6),e.k0s(),e.j41(7,"div",49),e.EFF(8),e.nI1(9,"currency"),e.k0s(),e.j41(10,"div",49),e.EFF(11),e.nI1(12,"currency"),e.k0s()()),2&o){const t=a.$implicit,n=e.XpG(4);e.R7$(3),e.JRh(t.name||"Item"),e.R7$(),e.Y8G("ngIf",null==t.option_list?null:t.option_list.length),e.R7$(2),e.SpI(" x",t.quantity," "),e.R7$(2),e.SpI(" ",e.i5U(9,5,t.unit_price_with_options/100,n.currency_code)," ea "),e.R7$(3),e.SpI(" ",e.i5U(12,8,t.total_cost/100,n.currency_code)," ")}}function Ua(o,a){if(1&o&&(e.j41(0,"div",34)(1,"div",35)(2,"div",36)(3,"div",37),e.EFF(4),e.nI1(5,"date"),e.k0s(),e.DNE(6,Va,3,1,"div",38),e.nrm(7,"div",39),e.j41(8,"div",40),e.EFF(9),e.k0s(),e.j41(10,"div",41),e.EFF(11),e.nI1(12,"currency"),e.k0s()()(),e.j41(13,"div",42),e.DNE(14,Ya,13,11,"div",43),e.k0s()()),2&o){const t=a.$implicit,n=e.XpG(3);e.AVh("border-error",n.end_time<t.deliver_at)("border-base-300",n.end_time>=t.deliver_at),e.R7$(4),e.SpI(" Order at ",e.i5U(5,9,t.deliver_at,"MMM d, "+n.time_format)," "),e.R7$(2),e.Y8G("ngIf",n.end_time<t.deliver_at),e.R7$(3),e.SpI(" ",t.item_count," item(s) "),e.R7$(2),e.SpI(" Total: ",e.i5U(12,12,t.total_cost/100,n.currency_code)," "),e.R7$(3),e.Y8G("ngForOf",t.items)}}function za(o,a){if(1&o&&(e.j41(0,"div",14)(1,"div",15)(2,"app-icon"),e.EFF(3,"done"),e.k0s()(),e.j41(4,"h3",16),e.pXf(5,4),e.k0s(),e.j41(6,"div",32),e.DNE(7,Ua,15,15,"div",33),e.k0s()()),2&o){const t=e.XpG(2);e.R7$(7),e.Y8G("ngForOf",t.catering_orders)}}function Ja(o,a){if(1&o&&(e.j41(0,"div",44)(1,"app-icon"),e.EFF(2,"priority_high"),e.k0s()()),2&o){const t=e.XpG().$implicit,n=e.XpG(3);e.Y8G("matTooltip",n.err_tooltip(t))}}function qa(o,a){if(1&o&&(e.j41(0,"div",45)(1,"div",46)(2,"span",37),e.EFF(3),e.k0s()(),e.j41(4,"div",48),e.EFF(5),e.k0s()()),2&o){const t=a.$implicit;e.R7$(3),e.JRh(t.name||"Item"),e.R7$(2),e.SpI(" x",t.quantity," ")}}function Ha(o,a){if(1&o&&(e.j41(0,"div",52)(1,"div",35)(2,"div",36)(3,"div",37),e.EFF(4),e.nI1(5,"date"),e.k0s(),e.DNE(6,Ja,3,1,"div",38),e.nrm(7,"div",39),e.j41(8,"div",40),e.EFF(9),e.k0s()()(),e.j41(10,"div",42),e.DNE(11,qa,6,2,"div",43),e.k0s()()),2&o){const t=a.$implicit,n=e.XpG(3);e.AVh("border-error",n.end_time<t.deliver_at)("border-base-300",n.end_time>=t.deliver_at),e.R7$(4),e.SpI(" Requested for ",e.i5U(5,8,t.deliver_at_time,"MMM d, "+n.time_format)," "),e.R7$(2),e.Y8G("ngIf",n.end_time<t.deliver_at||t.conflict),e.R7$(3),e.SpI(" ",t.item_count," item(s) "),e.R7$(2),e.Y8G("ngForOf",t.items)}}function Za(o,a){if(1&o&&(e.j41(0,"div",14)(1,"div",15)(2,"app-icon"),e.EFF(3),e.k0s()(),e.j41(4,"h3",16),e.pXf(5,5),e.k0s(),e.DNE(6,Ha,12,11,"div",51),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.AVh("!border-error",t.has_conflict)("!text-error",t.has_conflict),e.R7$(2),e.JRh(t.has_conflict?"close":"done"),e.R7$(3),e.Y8G("ngForOf",t.assets)}}function Qa(o,a){if(1&o&&(e.j41(0,"div",13),e.DNE(1,za,8,1,"div",21)(2,Za,7,6,"div",21),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.event.catering?null:t.event.catering.length),e.R7$(),e.Y8G("ngIf",null==t.assets?null:t.assets.length)}}function el(o,a){if(1&o&&(e.j41(0,"div",27)(1,"div",15)(2,"app-icon"),e.EFF(3,"done"),e.k0s()(),e.j41(4,"h3",16),e.pXf(5,6),e.k0s(),e.nrm(6,"div",53),e.nI1(7,"sanitize"),e.k0s()),2&o){const t=e.XpG();e.R7$(6),e.Y8G("innerHTML",e.bMT(7,1,t.event.body),e.npT)}}function tl(o,a){if(1&o){const t=e.RV6();e.j41(0,"footer",54)(1,"button",55),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.postForm())}),e.pXf(2,7),e.k0s()()}}let nl=(()=>{class o extends d.Tv{err_tooltip(t){return t.conflict?"Some of the items are not available for the selected date and time.":"Delivery time is outside of the event time.\nThis order will be ignored."}get has_conflict(){return this.assets?.some(t=>t.conflict)}get is_multiday(){return this.event.duration>1440}get time_format(){return this._settings.time_format}get end_time(){return this.event.all_day?(0,Y.A)(this.event.date_end).valueOf():this.event.date_end}get event(){return this._event_form.form.getRawValue()}get space(){return this.event.resources[0]}get level(){return this._org.levelWithID(this.space.zones)}get location(){const t=this._org.buildings.find(n=>this.space.zones.includes(n.id));return t?.address||t?.display_name||t?.name}get code(){return this._org.currency_code}get formatted_recurrence(){return(0,$.qq)({...this.event.recurrence,start:this.event.date||this.event.recurrence.start})}constructor(t,n,i,s,l,r){var _;super(),_=this,this._event_form=t,this._org=n,this._space_pipe=i,this._dialog_ref=s,this._dialog=l,this._settings=r,this.show_close=!1,this._loading=new w.t(!1),this.loading=(0,B.zV)([this._event_form.loading,this._loading]).pipe((0,x.T)(([u,g])=>u||g)),this.postForm=(0,h.A)(function*(){if(!_.space){const g=yield(0,d.GE)({title:"Make Booking without a Room",content:"You are creating a booking without a room, are you sure?",icon:{content:"event_available"}},_._dialog);if("done"!==g.reason)return;g.close()}(yield _._event_form.postForm().catch(g=>((0,d.UG)(g),!1)))&&_.dismiss(!0)}),this.cancelPost=()=>this._event_form.cancelPostForm(),this.dismiss=u=>this._dialog_ref?.close(u),this._space=this.event.resources[0]}ngOnInit(){var t=this;return(0,h.A)(function*(){const n=t.event.all_day?(0,se.A)(t.event.date).valueOf():t.event.date;t.catering_orders=t.event.catering?.map(r=>new y.M({...r,event:{...t.event,date:n,date_end:(0,H.A)(n,t.event.duration).valueOf()}})),t.assets=t.event.assets?.map(r=>new bt.Y({...r,event:t.event})),t._space=(yield t._space_pipe.transform(t.event.resources[0]?.email))||t._space;const i=!t._event_form.event||t.event.resources[0]?.id!==t._event_form.event?.space?.id,s=!t._event_form.event||t.event.date!==t._event_form.event.date||t.event.date_end!==t._event_form.event.date_end,l=t._event_form.form.value;console.log("Changes:",i,s),t._loading.next(!0),yield(0,Da.en)(t._event_form.event||{},{date:t.event.date,duration:t.event.duration,host:t.event.host,all_day:t.event.all_day,location_name:t._space?.display_name||t._space?.name||"",location_id:t._space?.id||"",zones:t._space?.level?.parent_id?[t._space?.level?.parent_id]:[t._org.building?.id],reset_state:s},l.assets,i||s).catch(r=>(0,d.UG)(r)),t.timeout("update_assets",()=>{t.assets=l.assets?.map(r=>new bt.Y({...r,event:l})),t._event_form.form.patchValue({assets:l.assets})},100),t.timeout("assets",()=>console.log("Assets",l.assets)),t._loading.next(!1)})()}optionList(t){return t.option_list?.map(n=>n.name).join("\n")}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU($.Ws),e.rXU(T.yb),e.rXU(pe.J),e.rXU(M.CP,8),e.rXU(M.bZ),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["meeting-flow-confirm-modal"]],inputs:{show_close:"show_close"},features:[e.Jv_([pe.J]),e.Vt3],decls:38,vars:37,consts:()=>{let t,n,i,s,l,r,_,u;return t=$localize`:␟0cd25444b7557b2f0c8453f99ac6ac586e2734ef␟5359169455682005018:Confirm Meeting booking`,n=$localize`:␟7ace4094f7f2f91e71cf8e2a5602a04062a20a47␟2833154702556922571:Booked Room`,i=$localize`:␟c5594e72436351a54e7ea9bf29633f268a7fb4cc␟2881938321285403712:{VAR_PLURAL, plural, =1 {Attendee } other {Attendees }}`,i=e.k04(i,{VAR_PLURAL:"\ufffd1\ufffd"}),s=$localize`:␟fefdc4e5a41940aedc80a7f0018e6d80486047f5␟1751846422096489161: ${"\ufffd0\ufffd"}:INTERPOLATION: ${i}:ICU: `,l=$localize`:␟c83ae01dc090addaaeb41ad9255bc2321f333169␟5431495212207850952:Catering`,r=$localize`:␟ee8f8008bae6ce3a49840c4e1d39b4af23d4c263␟1647750822609779679:Assets`,_=$localize`:␟fcde58253a4cfd52c228eebdae74e1be7a1ab714␟8104421162933956065:Notes`,u=$localize`:␟0ad83be7464a0a2e8d100342e144bc3fbc789f9d␟3141803775366633134: Confirm `,[["chipList",""],t,n,s,l,r,_,u,["header","",1,"p-4","flex","items-center","justify-center","border-b","border-base-200","relative"],["icon","","name","close-meeting-confirm","matRipple","","mat-dialog-close","","class","absolute left-2 top-1/2 -translate-y-1/2",4,"ngIf"],[1,"text-xl","font-medium"],["diameter","32",1,"absolute","right-2","top-1/2","-translate-y-1/2"],[1,"flex-1","min-w-[48rem]","divide-y","divide-base-200","p-4","space-y-4","max-h-[65vh]","overflow-auto"],[1,"flex","divide-x","divide-base-200"],[1,"pr-4","py-4","pl-16","relative","space-y-2","flex-1"],[1,"absolute","top-4","left-4","flex","items-center","justify-center","rounded-full","border","border-success","text-success","text-2xl"],[1,"text-xl","!mt-0"],[1,"flex","items-center","space-x-2"],["date",""],["class","flex items-center space-x-2",4,"ngIf"],["time",""],["class","pr-4 py-4 pl-16 relative space-y-2 flex-1",4,"ngIf"],["class","pr-4 py-4 pl-16 relative space-y-2",4,"ngIf"],["class","flex divide-x divide-base-200",4,"ngIf"],["class","p-2 border-t border-base-200 flex items-center justify-end",4,"ngIf"],["icon","","name","close-meeting-confirm","matRipple","","mat-dialog-close","",1,"absolute","left-2","top-1/2","-translate-y-1/2"],[4,"ngFor","ngForOf"],[1,"pr-4","py-4","pl-16","relative","space-y-2"],["attendee-list",""],["aria-label","User selection"],[1,"flex","items-center"],[1,"mr-2"],[1,"flex","flex-col","space-y-2"],["order","","class","border bg-base-100 rounded-xl overflow-hidden",3,"border-error","border-base-300",4,"ngFor","ngForOf"],["order","",1,"border","bg-base-100","rounded-xl","overflow-hidden"],[1,"flex","items-center","space-x-2","p-3"],[1,"flex-1","flex","items-center","space-x-2"],[1,"text-sm"],["class","flex items-center justify-center h-6 w-6 rounded-full bg-error text-error-content",3,"matTooltip",4,"ngIf"],[1,"flex-1"],[1,"text-xs","bg-success","text-success-content","px-2","py-1","rounded"],[1,"text-xs","bg-info","text-info-content","px-2","py-1","rounded"],[1,"flex","flex-col","bg-base-200","divide-y","divide-base-100"],["class","flex items-center px-3 py-1 space-x-2 hover:opacity-90",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-center","h-6","w-6","rounded-full","bg-error","text-error-content",3,"matTooltip"],[1,"flex","items-center","px-3","py-1","space-x-2","hover:opacity-90"],[1,"flex","items-center","flex-1"],["class","text-xs opacity-60 ml-4 font-normal",3,"matTooltip",4,"ngIf"],[1,"rounded","bg-success","text-success-content","text-xs","px-2","py-1"],[1,"rounded","bg-info","text-info-content","text-xs","px-2","py-1"],[1,"text-xs","opacity-60","ml-4","font-normal",3,"matTooltip"],["request","","class","border bg-base-100 rounded-xl overflow-hidden",3,"border-error","border-base-300",4,"ngFor","ngForOf"],["request","",1,"border","bg-base-100","rounded-xl","overflow-hidden"],[3,"innerHTML"],[1,"p-2","border-t","border-base-200","flex","items-center","justify-end"],["btn","","name","confirm-meeting","matRipple","",1,"w-32",3,"click"]]},template:function(n,i){1&n&&(e.j41(0,"div",8),e.DNE(1,Ga,3,0,"button",9),e.j41(2,"h2",10),e.pXf(3,1),e.k0s(),e.nrm(4,"mat-spinner",11),e.nI1(5,"async"),e.k0s(),e.j41(6,"main",12)(7,"div",13)(8,"div",14)(9,"div",15)(10,"app-icon"),e.EFF(11,"done"),e.k0s()(),e.j41(12,"h3",16),e.EFF(13),e.k0s(),e.j41(14,"div",17)(15,"app-icon"),e.EFF(16,"today"),e.k0s(),e.j41(17,"div",18),e.EFF(18),e.nI1(19,"date"),e.k0s()(),e.DNE(20,La,5,1,"div",19),e.j41(21,"div",17)(22,"app-icon"),e.EFF(23,"schedule"),e.k0s(),e.j41(24,"div",20),e.EFF(25),e.nI1(26,"date"),e.nI1(27,"date"),e.nI1(28,"date"),e.nI1(29,"date"),e.nI1(30,"date"),e.nI1(31,"date"),e.k0s()()(),e.DNE(32,Xa,12,2,"div",21),e.k0s(),e.DNE(33,Wa,10,3,"div",22)(34,Qa,3,2,"div",23)(35,el,8,3,"div",22),e.k0s(),e.DNE(36,tl,3,0,"footer",24),e.nI1(37,"async")),2&n&&(e.R7$(),e.Y8G("ngIf",i.show_close),e.R7$(3),e.AVh("opacity-0",!e.bMT(5,12,i.loading)),e.R7$(9),e.SpI(" ",i.event.title||"Meeting Details"," "),e.R7$(5),e.JRh(e.i5U(19,14,i.event.date,"fullDate")),e.R7$(2),e.Y8G("ngIf",null==i.event.recurrence?null:i.event.recurrence.pattern),e.R7$(5),e.SpI(" ",i.is_multiday?e.i5U(26,17,i.event.date,"MMM d")+(i.event.all_day?"":e.i5U(27,20,i.event.date,", "+i.time_format))+" - "+e.i5U(28,23,i.event.date_end,"MMM d")+(i.event.all_day?"":e.i5U(29,26,i.event.date_end,", "+i.time_format)):i.event.all_day?"All Day":e.i5U(30,29,i.event.date,i.time_format)+" - "+e.i5U(31,32,i.event.date+60*i.event.duration*1e3,i.time_format+" (z)")," "),e.R7$(7),e.Y8G("ngIf",i.event.resources.length),e.R7$(),e.Y8G("ngIf",i.event.attendees.length),e.R7$(),e.Y8G("ngIf",(null==i.event.catering?null:i.event.catering.length)||(null==i.event.assets?null:i.event.assets.length)),e.R7$(),e.Y8G("ngIf",i.event.body),e.R7$(),e.Y8G("ngIf",!e.bMT(37,35,i.loading)))},dependencies:[c.Sq,c.bT,E.R,F.r6,M.tx,S.LG,_e.Jl,q.oV,c.Jj,c.oe,c.vh,Le.a]})}return o})();function ol(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.dismiss())}),e.j41(1,"app-icon"),e.EFF(2,"close"),e.k0s()()}}function il(o,a){1&o&&e.nrm(0,"mat-spinner",20)}function sl(o,a){if(1&o&&(e.j41(0,"div",11)(1,"app-icon"),e.EFF(2,"update"),e.k0s(),e.j41(3,"div",12),e.EFF(4),e.k0s()()),2&o){const t=e.XpG();e.R7$(4),e.JRh(t.formatted_recurrence)}}function al(o,a){if(1&o&&(e.j41(0,"mat-chip")(1,"div",25)(2,"app-icon",26),e.EFF(3,"business"),e.k0s(),e.EFF(4),e.k0s()()),2&o){const t=a.$implicit;e.R7$(4),e.SpI(" ",t.name||t.email," ")}}function ll(o,a){if(1&o&&(e.j41(0,"section",21)(1,"app-icon",9),e.EFF(2,"done"),e.k0s(),e.j41(3,"div",10)(4,"h3"),e.pXf(5,2),e.k0s(),e.j41(6,"div",22)(7,"mat-chip-list",23,0),e.DNE(9,al,5,1,"mat-chip",24),e.k0s()()()()),2&o){const t=e.XpG();e.R7$(5),e.uP7(t.event.attendees.length)(t.event.attendees.length),e.nnv(5),e.R7$(4),e.Y8G("ngForOf",t.event.attendees)}}function rl(o,a){if(1&o&&(e.qex(0),e.j41(1,"div",11)(2,"app-icon"),e.EFF(3,"meeting_room"),e.k0s(),e.j41(4,"div"),e.EFF(5),e.k0s()(),e.bVm()),2&o){const t=a.$implicit,n=e.XpG(2);e.R7$(5),e.Lme(" ",(null==n.level?null:n.level.display_name)||(null==n.level?null:n.level.name),", ",t.display_name||t.name," ")}}function _l(o,a){if(1&o&&(e.j41(0,"section",27)(1,"app-icon",9),e.EFF(2,"done"),e.k0s(),e.j41(3,"div",10)(4,"h3"),e.pXf(5,3),e.k0s(),e.DNE(6,rl,6,2,"ng-container",24),e.j41(7,"div",11)(8,"app-icon"),e.EFF(9,"place"),e.k0s(),e.j41(10,"div"),e.EFF(11),e.k0s()()()()),2&o){const t=e.XpG();e.R7$(6),e.Y8G("ngForOf",t.event.resources),e.R7$(5),e.JRh(t.location)}}function cl(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",28),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.postForm())}),e.pXf(1,4),e.k0s()}}let Et=(()=>{class o extends d.Tv{get is_multiday(){return this.event.duration>1440}get time_format(){return this._settings.time_format}get formatted_recurrence(){return(0,$.qq)({...this.event.recurrence,start:this.event.date||this.event.recurrence.start})}get event(){return this._event_form.form.getRawValue()}get space(){return this._space}get level(){return this._org.levelWithID(this.space.zones)}get location(){const t=this._org.buildings.find(n=>this.space.zones.includes(n.id));return t?.address||t?.display_name||t?.name}constructor(t,n,i,s,l,r){var _;super(),_=this,this._sheet_ref=t,this._event_form=n,this._org=i,this._space_pipe=s,this._dialog=l,this._settings=r,this.show_close=!1,this.loading=this._event_form.loading,this.postForm=(0,h.A)(function*(){!_.space&&"done"!==(yield(0,d.GE)({title:"Make Booking without a Room",content:"You are creating a booking without a room, are you sure?",icon:{content:"event_available"}},_._dialog)).reason||(yield _._event_form.postForm().catch(u=>{throw(0,d.UG)(u),u}),_.dismiss(!0))}),this.cancelPost=()=>this._event_form.cancelPostForm(),this.dismiss=u=>this._sheet_ref?.dismiss(u),this._space=this.event.resources[0]}ngOnInit(){var t=this;return(0,h.A)(function*(){t._space=(yield t._space_pipe.transform(t.event.resources[0].email))||t._space})()}optionList(t){return t.option_list?.map(n=>n.name).join("\n")}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(J.eN,8),e.rXU($.Ws),e.rXU(T.yb),e.rXU(pe.J),e.rXU(M.bZ),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["meeting-flow-confirm"]],inputs:{show_close:"show_close"},features:[e.Jv_([pe.J]),e.Vt3],decls:35,vars:34,consts:()=>{let t,n,i,s,l;return t=$localize`:␟0cd25444b7557b2f0c8453f99ac6ac586e2734ef␟5359169455682005018:Confirm Meeting booking`,n=$localize`:␟4b21718d2cf1162c66e915d086412945cb82f5c5␟2503133629493199843:{VAR_PLURAL, plural, =1 {attendee } other {attendees }}`,n=e.k04(n,{VAR_PLURAL:"\ufffd1\ufffd"}),i=$localize`:␟107fd539cb631844739e297e9d5474c7fec90b32␟5235780670058538300: ${"\ufffd0\ufffd"}:INTERPOLATION: ${n}:ICU: `,s=$localize`:␟7ace4094f7f2f91e71cf8e2a5602a04062a20a47␟2833154702556922571:Booked Room`,l=$localize`:␟0ad83be7464a0a2e8d100342e144bc3fbc789f9d␟3141803775366633134: Confirm `,[["chipList",""],t,i,s,l,["icon","","matRipple","","name","close-meeting-confirm",3,"click",4,"ngIf"],[1,"flex","items-center","justify-between","px-2"],["diameter","32",4,"ngIf"],["period","",1,"flex","space-x-1","px-2"],[1,"text-success","mt-1"],["details","",1,"leading-6"],[1,"flex","items-center","space-x-2"],["date",""],["class","flex items-center space-x-2",4,"ngIf"],["time",""],["attendees","","class","flex space-x-1 px-2",4,"ngIf"],["spaces","","class","flex space-x-1 px-2",4,"ngIf"],[1,"p-2","w-full","border-t","border-base-200","mt-4"],["btn","","name","confirm-meeting","matRipple","","class","w-full",3,"click",4,"ngIf"],["icon","","matRipple","","name","close-meeting-confirm",3,"click"],["diameter","32"],["attendees","",1,"flex","space-x-1","px-2"],["attendee-list",""],["aria-label","User selection"],[4,"ngFor","ngForOf"],[1,"flex","items-center"],[1,"mr-2"],["spaces","",1,"flex","space-x-1","px-2"],["btn","","name","confirm-meeting","matRipple","",1,"w-full",3,"click"]]},template:function(n,i){1&n&&(e.DNE(0,ol,3,0,"button",5),e.j41(1,"header",6)(2,"h2"),e.pXf(3,1),e.k0s(),e.DNE(4,il,1,0,"mat-spinner",7),e.nI1(5,"async"),e.k0s(),e.j41(6,"section",8)(7,"app-icon",9),e.EFF(8,"done"),e.k0s(),e.j41(9,"div",10)(10,"h3"),e.EFF(11),e.k0s(),e.j41(12,"div",11)(13,"app-icon"),e.EFF(14,"today"),e.k0s(),e.j41(15,"div",12),e.EFF(16),e.nI1(17,"date"),e.k0s()(),e.DNE(18,sl,5,1,"div",13),e.j41(19,"div",11)(20,"app-icon"),e.EFF(21,"schedule"),e.k0s(),e.j41(22,"div",14),e.EFF(23),e.nI1(24,"date"),e.nI1(25,"date"),e.nI1(26,"date"),e.nI1(27,"date"),e.nI1(28,"date"),e.nI1(29,"date"),e.k0s()()()(),e.DNE(30,ll,10,3,"section",15)(31,_l,12,2,"section",16),e.j41(32,"footer",17),e.DNE(33,cl,2,0,"button",18),e.nI1(34,"async"),e.k0s()),2&n&&(e.Y8G("ngIf",i.show_close),e.R7$(4),e.Y8G("ngIf",e.bMT(5,9,i.loading)),e.R7$(7),e.JRh(i.event.title||"Meeting Details"),e.R7$(5),e.JRh(e.i5U(17,11,i.event.date,"fullDate")),e.R7$(2),e.Y8G("ngIf",null==i.event.recurrence?null:i.event.recurrence.pattern),e.R7$(5),e.SpI(" ",i.is_multiday?e.i5U(24,14,i.event.date,"MMM d")+(i.event.all_day?"":e.i5U(25,17,i.event.date,", "+i.time_format))+" - "+e.i5U(26,20,i.event.date_end,"MMM d")+(i.event.all_day?"":e.i5U(27,23,i.event.date_end,", "+i.time_format)):i.event.all_day?"All Day":e.i5U(28,26,i.event.date,i.time_format)+" - "+e.i5U(29,29,i.event.date+60*i.event.duration*1e3,i.time_format+" (z)")," "),e.R7$(7),e.Y8G("ngIf",i.event.attendees.length),e.R7$(),e.Y8G("ngIf",null==i.space?null:i.space.id),e.R7$(2),e.Y8G("ngIf",!e.bMT(34,32,i.loading)))},dependencies:[c.Sq,c.bT,E.R,F.r6,S.LG,_e.Jl,c.Jj,c.vh],styles:["section[_ngcontent-%COMP%] > app-icon[_ngcontent-%COMP%]{font-size:1.5rem}h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:medium;margin-bottom:.5rem}h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:medium;margin:.5rem 0}\n\n/*# sourceMappingURL=meeting-flow-confirm.component.ts-angular-inline--116.css.map*/"]})}return o})();var dl=p(46088),ml=p(84809),Rt=p(83618),kt=p(65646),pl=p(5689),ul=p(83138),Ee=p(597);const Ot=()=>({standalone:!0});function fl(o,a){1&o&&(e.j41(0,"mat-checkbox",15),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"FORM.ALL_DAY")," "))}function gl(o,a){if(1&o&&(e.j41(0,"div",11)(1,"label",12),e.EFF(2),e.nI1(3,"translate"),e.j41(4,"span"),e.EFF(5,"*"),e.k0s()(),e.j41(6,"a-date-field",13),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.DNE(9,fl,3,3,"mat-checkbox",14),e.k0s()),2&o){const t=e.XpG(2);e.R7$(2),e.SpI(" ",e.bMT(3,4,"FORM.DATE"),""),e.R7$(4),e.Y8G("to",t.end_date),e.R7$(),e.SpI(" ",e.bMT(8,6,"FORM.DATE_ERROR")," "),e.R7$(2),e.Y8G("ngIf",t.allow_all_day)}}function hl(o,a){1&o&&(e.j41(0,"mat-checkbox",15),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"FORM.ALL_DAY")," "))}function Fl(o,a){if(1&o&&(e.j41(0,"div",2)(1,"div",11)(2,"label",12),e.EFF(3),e.nI1(4,"translate"),e.j41(5,"span"),e.EFF(6,"*"),e.k0s()(),e.j41(7,"a-date-field",13),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.DNE(10,hl,3,3,"mat-checkbox",14),e.k0s(),e.j41(11,"div",11)(12,"label",12),e.EFF(13),e.nI1(14,"translate"),e.j41(15,"span"),e.EFF(16,"*"),e.k0s()(),e.j41(17,"a-date-field",16),e.EFF(18),e.nI1(19,"translate"),e.k0s()()()),2&o){const t=e.XpG(2);e.R7$(3),e.SpI(" ",e.bMT(4,8,"FORM.DATE"),""),e.R7$(4),e.Y8G("to",t.end_date),e.R7$(),e.SpI(" ",e.bMT(9,10,"FORM.DATE_ERROR")," "),e.R7$(2),e.Y8G("ngIf",t.allow_all_day),e.R7$(3),e.SpI(" ",e.bMT(14,12,"FORM.END_DATE"),""),e.R7$(4),e.Y8G("from",t.start_date)("to",t.end_date),e.R7$(),e.SpI(" ",e.bMT(19,14,"FORM.DATE_ERROR")," ")}}function Cl(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",18)(1,"label",22),e.EFF(2),e.nI1(3,"translate"),e.j41(4,"span"),e.EFF(5,"*"),e.k0s()(),e.j41(6,"a-time-field",23),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG(3);return e.Njj(s.form.patchValue({date_end:i}))}),e.k0s()()}if(2&o){let t;const n=e.XpG(3);e.R7$(2),e.SpI(" ",e.bMT(3,6,"FORM.END_TIME"),""),e.R7$(4),e.Y8G("ngModel",n.form.value.date_end)("ngModelOptions",e.lJ4(8,Ot))("from",(null==n.form||null==(t=n.form.getRawValue())?null:t.date)+18e5)("use_24hr",n.use_24hr)("extra_info_fn",n.duration_info)}}function vl(o,a){if(1&o&&(e.j41(0,"div",18)(1,"label",22),e.EFF(2),e.nI1(3,"translate"),e.j41(4,"span"),e.EFF(5,"*"),e.k0s()(),e.nrm(6,"a-duration-field",24),e.k0s()),2&o){let t;const n=e.XpG(3);e.R7$(2),e.SpI(" ",e.bMT(3,4,"FORM.END_TIME"),""),e.R7$(4),e.Y8G("time",null==n.form||null==(t=n.form.getRawValue())?null:t.date)("max",n.max_duration)("use_24hr",n.use_24hr)}}function bl(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",17)(1,"div",18)(2,"label",19),e.EFF(3),e.nI1(4,"translate"),e.j41(5,"span"),e.EFF(6,"*"),e.k0s()(),e.j41(7,"a-time-field",20),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.form.patchValue({date:i}))}),e.k0s()(),e.DNE(8,Cl,7,9,"div",21)(9,vl,7,6,"div",21),e.k0s()}if(2&o){const t=e.XpG(2);e.R7$(3),e.SpI(" ",e.bMT(4,6,"FORM.START_TIME")," "),e.R7$(4),e.Y8G("ngModel",t.form.getRawValue().date)("ngModelOptions",e.lJ4(8,Ot))("use_24hr",t.use_24hr),e.R7$(),e.Y8G("ngIf",t.allow_multiday),e.R7$(),e.Y8G("ngIf",!t.allow_multiday)}}function El(o,a){1&o&&(e.j41(0,"div",25)(1,"label",26),e.EFF(2),e.nI1(3,"translate"),e.j41(4,"span"),e.EFF(5,"*"),e.k0s()(),e.nrm(6,"host-select-field",27),e.k0s()),2&o&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"FORM.HOST"),""))}function Rl(o,a){1&o&&(e.j41(0,"mat-checkbox",31),e.EFF(1," Update all future events "),e.k0s())}function kl(o,a){if(1&o&&(e.j41(0,"div",25)(1,"label",28),e.EFF(2),e.nI1(3,"translate"),e.j41(4,"span"),e.EFF(5,"*"),e.k0s()(),e.nrm(6,"recurrence-field",29),e.DNE(7,Rl,2,0,"mat-checkbox",30),e.k0s()),2&o){const t=e.XpG(2);e.R7$(2),e.SpI(" ",e.bMT(3,3,"FORM.RECURRENCE"),""),e.R7$(4),e.Y8G("date",t.form.getRawValue().date),e.R7$(),e.Y8G("ngIf",t.form.value.id)}}function Ol(o,a){if(1&o&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"label",4),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.j41(6,"mat-form-field",5),e.nrm(7,"input",6),e.j41(8,"mat-error"),e.EFF(9),e.nI1(10,"translate"),e.k0s()()(),e.DNE(11,gl,10,8,"div",7),e.k0s(),e.DNE(12,Fl,20,16,"div",8)(13,bl,10,9,"div",9)(14,El,7,3,"div",10)(15,kl,8,5,"div",10),e.k0s()),2&o){const t=e.XpG();e.Y8G("formGroup",t.form),e.R7$(4),e.JRh(e.bMT(5,8,"FORM.TITLE")),e.R7$(5),e.JRh(e.bMT(10,10,"FORM.TITLE_ERROR")),e.R7$(2),e.Y8G("ngIf",!t.allow_multiday),e.R7$(),e.Y8G("ngIf",t.allow_multiday),e.R7$(),e.Y8G("ngIf",!t.form.value.all_day),e.R7$(),e.Y8G("ngIf",t.can_book_for_others),e.R7$(),e.Y8G("ngIf",t.allow_recurrence)}}let Tl=(()=>{class o{get max_duration(){return this._settings.get("app.events.max_duration")||480}get can_book_for_others(){return this._settings.get("app.events.can_book_for_others")}get allow_all_day(){return this._settings.get("app.events.allow_all_day")}get allow_recurrence(){return this._settings.get("app.events.allow_recurrence")&&this.form.value.duration<=1440}get allow_multiday(){return this._settings.get("app.events.allow_multiday")||this._event_form.is_multiday}get start_date(){const t=this.form.getRawValue().date,n=this.form.getRawValue().date_end;return(0,ee.A)(t,"yyyy-MM-dd")!==(0,ee.A)(n,"yyyy-MM-dd")?(0,se.A)(t).valueOf():(0,H.A)(t,30).valueOf()}get end_date(){return(0,Y.A)((0,L.A)(Date.now(),this._settings.get("app.events.allowed_future_days")||180)).valueOf()}get use_24hr(){return this._settings.get("app.use_24_hour_time")}constructor(t,n){this._settings=t,this._event_form=n,this.force_time=(0,kt.A)(Date.now(),{hours:6,minutes:0}).valueOf(),this.duration_info=i=>{const s=this.form.getRawValue().date;if((0,ee.A)(s,"yyyy-MM-dd")!==(0,ee.A)(i,"yyyy-MM-dd"))return"";const l=(0,lt.A)(i,s);return` (${(0,pl.A)({hours:Math.floor(l/60),minutes:l%60})})`}}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(d.h$),e.rXU($.Ws))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["meeting-form-details"]],inputs:{form:"form"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"flex","items-center","flex-wrap","sm:space-x-2"],[1,"flex-1","min-w-[256px]"],["for","title"],["appearance","outline",1,"w-full"],["matInput","","name","title","formControlName","title","placeholder","e.g. Team Meeting"],["class","flex-1 min-w-[256px] relative",4,"ngIf"],["class","flex items-center flex-wrap sm:space-x-2",4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],["class","w-full flex flex-col",4,"ngIf"],[1,"flex-1","min-w-[256px]","relative"],["for","date"],["name","date","formControlName","date",3,"to"],["formControlName","all_day","class","absolute -top-2 right-2",4,"ngIf"],["formControlName","all_day",1,"absolute","-top-2","right-2"],["name","date","formControlName","date_end",3,"from","to"],[1,"flex","items-center","space-x-2"],[1,"flex-1","w-1/3"],["for","start-time"],["name","start-time",3,"ngModelChange","ngModel","ngModelOptions","use_24hr"],["class","flex-1 w-1/3",4,"ngIf"],["for","end-time"],["name","end-time",3,"ngModelChange","ngModel","ngModelOptions","from","use_24hr","extra_info_fn"],["name","end-time","formControlName","duration",3,"time","max","use_24hr"],[1,"w-full","flex","flex-col"],["for","host"],["name","host","formControlName","organiser"],["for","recurrence"],["name","recurrence","formControlName","recurrence",3,"date"],["formControlName","update_master",4,"ngIf"],["formControlName","update_master"]],template:function(n,i){1&n&&e.DNE(0,Ol,16,12,"div",0),2&n&&e.Y8G("ngIf",i.form)},dependencies:[c.bT,I.rl,I.TL,X.fg,D.So,de.G,ae.y,me.t,Ft.I,ul.E,m.me,m.BC,m.cb,m.vS,m.j4,m.JD,Ee.D9],encapsulation:2})}return o})();const Ml=["confirm_ref"],Il=["input"],Tt=(o,a,t,n)=>({date:o,duration:a,all_day:t,zone_id:n}),xl=()=>({standalone:!0});function Sl(o,a){if(1&o){const t=e.RV6();e.j41(0,"section",7)(1,"h3",8)(2,"div",9),e.EFF(3," 2 "),e.k0s(),e.j41(4,"div",10),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.nrm(7,"div",11),e.j41(8,"button",23),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.findAvailableTime())}),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.j41(11,"button",24),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.hide_block.attendees=!i.hide_block.attendees)}),e.j41(12,"app-icon"),e.EFF(13),e.k0s()()(),e.j41(14,"div",13),e.nrm(15,"a-user-list-field",25),e.k0s()()}if(2&o){const t=e.XpG(2);e.R7$(5),e.SpI(" ",e.bMT(6,6,"FORM.ATTENDEES")," "),e.R7$(4),e.SpI(" ",e.bMT(10,8,"WPA.AVAILABILITY")," "),e.R7$(4),e.JRh(t.hide_block.attendees?"expand_more":"expand_less"),e.R7$(),e.Y8G("@show",t.hide_block.attendees?"hide":"show"),e.R7$(),e.Y8G("time",t.form.value.date)("guests",t.allow_externals)}}function wl(o,a){1&o&&(e.j41(0,"div",26),e.EFF(1," The selected room has less capacity than the number of meeting attendees. "),e.k0s())}function Nl(o,a){if(1&o&&(e.j41(0,"mat-option",36),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function yl(o,a){if(1&o){const t=e.RV6();e.j41(0,"mat-form-field",31),e.bIt("openedChange",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.focusInput())}),e.j41(1,"mat-select",32)(2,"input",33,0),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG(3);return e.Njj(s.code_filter.next(i))}),e.k0s(),e.nrm(4,"mat-option",34),e.DNE(5,Nl,2,2,"mat-option",35),e.nI1(6,"async"),e.k0s(),e.j41(7,"mat-error"),e.EFF(8," Catering charge code is required "),e.k0s()()}if(2&o){const t=e.XpG(3);e.R7$(2),e.Y8G("ngModel",t.code_filter.getValue())("ngModelOptions",e.lJ4(5,xl)),e.R7$(3),e.Y8G("ngForOf",e.bMT(6,3,t.filtered_codes))}}function $l(o,a){if(1&o&&(e.j41(0,"mat-form-field",37),e.nI1(1,"async"),e.nrm(2,"textarea",38),e.j41(3,"mat-error"),e.EFF(4," Catering Order notes are required "),e.k0s()()),2&o){const t=e.XpG(3);e.AVh("mt-2",!e.bMT(1,2,(null==t.form.value.catering?null:t.form.value.catering.length)&&t.has_codes))}}function Pl(o,a){if(1&o){const t=e.RV6();e.j41(0,"section",7)(1,"h3",8)(2,"div",9),e.EFF(3," 4 "),e.k0s(),e.j41(4,"div",10),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.nrm(7,"div",11),e.j41(8,"button",27),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.hide_block.catering=!i.hide_block.catering)}),e.j41(9,"app-icon"),e.EFF(10),e.k0s()()(),e.j41(11,"div",13),e.nrm(12,"catering-list-field",28),e.DNE(13,yl,9,6,"mat-form-field",29),e.nI1(14,"async"),e.DNE(15,$l,5,4,"mat-form-field",30),e.k0s()()}if(2&o){const t=e.XpG(2);e.R7$(5),e.SpI(" ",e.bMT(6,6,"WPA.CATERING")," "),e.R7$(5),e.JRh(t.hide_block.catering?"expand_more":"expand_less"),e.R7$(),e.Y8G("@show",t.hide_block.catering?"hide":"show"),e.R7$(),e.Y8G("options",e.ziG(10,Tt,t.form.getRawValue().date,t.form.value.duration,t.form.value.all_day,null!=t.form.value&&null!=t.form.value.resources&&t.form.value.resources.length?null==t.form.value||null==t.form.value.resources[0]||null==t.form.value.resources[0].level?null:t.form.value.resources[0].level.parent_id:"")),e.R7$(),e.Y8G("ngIf",e.bMT(14,8,(null==t.form.value.catering?null:t.form.value.catering.length)&&t.has_codes)),e.R7$(2),e.Y8G("ngIf",null==t.form.value.catering?null:t.form.value.catering.length)}}function Al(o,a){if(1&o){const t=e.RV6();e.j41(0,"section",7)(1,"h3",8)(2,"div",9),e.EFF(3),e.nI1(4,"async"),e.k0s(),e.j41(5,"div",10),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.nrm(8,"div",11),e.j41(9,"button",39),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.hide_block.assets=!i.hide_block.assets)}),e.j41(10,"app-icon"),e.EFF(11),e.k0s()()(),e.j41(12,"div",13),e.nrm(13,"asset-list-field",40),e.k0s()()}if(2&o){const t=e.XpG(2);e.R7$(3),e.SpI(" ",e.bMT(4,6,t.has_catering)?"5":"4"," "),e.R7$(3),e.SpI(" ",e.bMT(7,8,"WPA.ASSETS")," "),e.R7$(5),e.JRh(t.hide_block.assets?"expand_more":"expand_less"),e.R7$(),e.Y8G("@show",t.hide_block.assets?"hide":"show"),e.R7$(),e.Y8G("options",e.ziG(10,Tt,t.form.getRawValue().date,t.form.value.duration,t.form.value.all_day,null!=t.form.value&&null!=t.form.value.resources&&t.form.value.resources.length?null==t.form.value||null==t.form.value.resources[0]||null==t.form.value.resources[0].level?null:t.form.value.resources[0].level.parent_id:""))("rejected_ids",t.invalid_assets)}}function Dl(o,a){if(1&o&&(e.j41(0,"section",7)(1,"h3",41)(2,"div",9),e.EFF(3),e.nI1(4,"async"),e.nI1(5,"async"),e.k0s(),e.j41(6,"div",10),e.EFF(7),e.nI1(8,"translate"),e.k0s()(),e.j41(9,"div",42)(10,"label",43),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.nrm(13,"rich-text-input",44),e.k0s()()),2&o){const t=e.XpG(2);e.R7$(3),e.SpI(" ",e.bMT(4,3,t.has_catering)&&t.has_assets?"6":e.bMT(5,5,t.has_catering)||t.has_assets?"5":"4"," "),e.R7$(4),e.SpI(" ",e.bMT(8,7,"FORM.NOTES")," "),e.R7$(4),e.SpI(" ",e.bMT(12,9,"WPA.NOTES_INFO")," ")}}function Gl(o,a){if(1&o){const t=e.RV6();e.j41(0,"form",6)(1,"section",7)(2,"h3",8)(3,"div",9),e.EFF(4," 1 "),e.k0s(),e.j41(5,"div",10),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.nrm(8,"div",11),e.j41(9,"button",12),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.hide_block.details=!i.hide_block.details)}),e.j41(10,"app-icon"),e.EFF(11),e.k0s()()(),e.j41(12,"div",13),e.nrm(13,"meeting-form-details",14),e.k0s()(),e.DNE(14,Sl,16,10,"section",15),e.j41(15,"section",7)(16,"h3",8)(17,"div",9),e.EFF(18," 3 "),e.k0s(),e.j41(19,"div",10),e.EFF(20),e.nI1(21,"translate"),e.k0s(),e.nrm(22,"div",11),e.j41(23,"button",16),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.hide_block.resources=!i.hide_block.resources)}),e.j41(24,"app-icon"),e.EFF(25),e.k0s()()(),e.j41(26,"div",17),e.DNE(27,wl,2,0,"div",18),e.nrm(28,"space-list-field",19),e.k0s()(),e.DNE(29,Pl,16,15,"section",15),e.nI1(30,"async"),e.DNE(31,Al,14,15,"section",15)(32,Dl,14,11,"section",15),e.j41(33,"section",20)(34,"button",21),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.viewConfirm())}),e.EFF(35),e.nI1(36,"translate"),e.k0s(),e.j41(37,"button",22),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.clearForm())}),e.EFF(38," "),e.pXf(39,1),e.EFF(40),e.nI1(41,"translate"),e.k0s()()()}if(2&o){const t=e.XpG();e.Y8G("formGroup",t.form),e.R7$(6),e.SpI(" ",e.bMT(7,17,"WPA.DETAILS")," "),e.R7$(5),e.JRh(t.hide_block.details?"expand_more":"expand_less"),e.R7$(),e.Y8G("@show",t.hide_block.details?"hide":"show"),e.R7$(),e.Y8G("form",t.form),e.R7$(),e.Y8G("ngIf",!t.hide_attendees),e.R7$(6),e.SpI(" ",e.bMT(21,19,"WPA.ROOM")," "),e.R7$(5),e.JRh(t.hide_block.resources?"expand_more":"expand_less"),e.R7$(),e.Y8G("@show",t.hide_block.resources?"hide":"show"),e.R7$(),e.Y8G("ngIf",!t.strict_capacity_check&&t.total_capacity&&t.total_capacity<=(null==t.form.value.attendees?null:t.form.value.attendees.length)),e.R7$(),e.Y8G("multiday",t.allow_multiday),e.R7$(),e.Y8G("ngIf",e.bMT(30,21,t.has_catering)),e.R7$(2),e.Y8G("ngIf",t.has_assets),e.R7$(),e.Y8G("ngIf",!t.hide_notes),e.R7$(3),e.SpI(" ",e.bMT(36,23,"WPA.CONFIRM_MEETING")," "),e.R7$(4),e.uP7(!!t.form.value.id),e.nnv(39),e.R7$(),e.SpI(" ",e.bMT(41,25,"WPA.CLEAR_FORM")," ")}}let Ll=(()=>{class o extends d.Tv{get form(){return this._state.form}get event(){return this._state.event}get has_assets(){return!!this._settings.get("app.events.has_assets")}get hide_notes(){return!!this._settings.get("app.events.hide_notes")}get hide_attendees(){return!!this._settings.get("app.events.hide_attendees")}get allow_externals(){return this._settings.get("app.events.allow_externals")}get strict_capacity_check(){return this._settings.get("app.events.strict_capacity_check")}get total_capacity(){return this.form.value.resources?.reduce((t,n)=>t+n.capacity,0)||0}get allow_multiday(){return this._settings.get("app.events.allow_multiday")||this._state.is_multiday}get attendee_count(){const t=(0,d.Ny)();let n=this.form.value.attendees?.length||0;return this.form.value.attendees.find(i=>i.email.toLowerCase()===t.email.toLowerCase())||(n+=1),n}constructor(t,n,i,s,l,r,_,u,g){super(),this._state=t,this._catering=n,this._assets=i,this._settings=s,this._router=l,this._dialog=r,this._bottom_sheet=_,this._org=u,this._idle=g,this.hide_block={},this.code_filter=new w.t(""),this.invalid_assets=[],this.has_catering=this._catering.available_menu.pipe((0,x.T)(f=>f.length>0)),this.has_codes=this._catering.charge_codes.pipe((0,x.T)(f=>f.length>0),(0,ve.M)(f=>{f||(this.form.get("catering_charge_code").setValidators([]),this.form.updateValueAndValidity())})),this.filtered_codes=(0,B.zV)([this.code_filter,this._catering.charge_codes]).pipe((0,x.T)(([f,k])=>k.filter(C=>C.toLowerCase().includes(f.toLowerCase())))),this._space_list=new w.t([]),this._assets_available=this._space_list.pipe((0,Te.B)(300),(0,ie.n)(f=>{if(!f?.length)return(0,oe.of)(!1);const k=this.form.getRawValue();return this._assets.setOptions({date:k.date,duration:k.duration,resources:f,zone_id:this._org.levelWithID(f[0].zones)?.parent_id,tags:[],categories:[]}),(0,B.zV)([this._assets.filtered_assets,this._assets.disabled_rooms]).pipe((0,x.T)(([C,v])=>{if(f.every(le=>C.filter(re=>!re.hide_for_zones?.find(Xe=>le.zones.includes(Xe))).length>0)&&!v.find(le=>f.find(re=>re.id===le)))return!0;const A=this._state.event,{id:U,assets:j,date:ne,date_end:Q}=this.form.getRawValue();return(!U||j?.length&&(ne!==A.date||Q!==A.date_end))&&(this.form.patchValue({assets:[]}),(0,d.WS)("Assets are unavailable for some of the selected spaces.")),!1}))})),this._catering_available=this._space_list.pipe((0,Te.B)(300),(0,ie.n)(f=>{if(!f?.length)return(0,oe.of)(!1);const k=this.form.getRawValue();return this._catering.setFilters({search:"",date:k.date,duration:k.duration,resources:f,zone_id:this._org.levelWithID(f[0].zones)?.parent_id,tags:[],categories:[]}),(0,B.zV)([this._catering.filtered_menu,this._catering.availability]).pipe((0,x.T)(([C,v])=>{if(f.every(le=>C.filter(re=>!re.hide_for_zones.find(Xe=>le.zones.includes(Xe))).length>0)&&!v.find(le=>f.find(re=>re.id===le)))return!0;const A=this._state.event,{id:U,catering:j,date:ne,date_end:Q}=this.form.getRawValue();return(!U||j?.length&&(ne!==A.date||Q!==A.date_end))&&(this.form.patchValue({catering:[]}),(0,d.WS)("Catering is unavailable for some of the selected spaces.")),!1}))})),this.clearForm=()=>this._state.resetForm(),this.viewConfirm=()=>(this.form.value.host||this.form.patchValue({host:(0,d.Ny)()?.email}),this.strict_capacity_check&&this.attendee_count>this.total_capacity?(0,d.UG)("Attendee count is greater than the capacity of the selected rooms"):(this.form.markAllAsTouched(),this.form.valid?this._settings.get("app.events.no_standalone")&&!this.form.value.resources.length?(0,d.UG)("You need to select a room to make a booking"):this._settings.get("app.events.booking_unavailable")?this._state.openEventLinkModal():void(window.innerWidth>=768?(this.dialog_ref=this._dialog.open(nl),this.dialog_ref.componentInstance.show_close=!0,this.dialog_ref.afterClosed().subscribe(f=>{f&&(this.unsubWith("idle"),this._router.navigate(["/book","meeting","success"]),this._state.setView("success"))})):(this.sheet_ref=this._bottom_sheet.open(Et),this.sheet_ref.instance.show_close=!0,this.sheet_ref.afterDismissed().subscribe(f=>{f&&(this.unsubWith("idle"),this._router.navigate(["/book","meeting","success"]),this._state.setView("success"))}))):(0,d.UG)(`Some fields are invalid. [${(0,d.F7)(this.form).join(", ")}]`)))}_updateValidAssets(){if(this.invalid_assets=[],!this.event?.id)return;const t=this.form.value.assets||[],n=this.event?.linked_bookings||[];this.invalid_assets=t.filter(i=>!i._changed&&!n.find(s=>s.extension_data?.request_id===i.id)).map(i=>i.id)}ngOnInit(){var t=this;return(0,h.A)(function*(){yield t._org.initialised.pipe((0,N.$)(n=>n)).toPromise(),t.subscription("asset_changes",t.form.controls.assets.valueChanges.subscribe(()=>t._updateValidAssets()));for(const n of["resources","date","duration","date_end"])t.subscription(`${n}_changes`,t.form.controls[n].valueChanges.subscribe(()=>t.timeout("check_resources",()=>t._space_list.next(t.form.value.resources||[]))));t._catering.setOptions({zone:""}),t._space_list.next(t.form.value.resources||[]),t.subscription("assets_available",t._assets_available.subscribe(n=>{n?t.form.controls.assets.enable():t.form.controls.assets.disable()})),t.subscription("catering_available",t._catering_available.subscribe(n=>{n?t.form.controls.catering.enable():t.form.controls.catering.disable()})),t.subscription("idle-listen",t._idle.idleFor(60*(t._settings.get("app.idle_timeout")||5)*1e3).subscribe((0,h.A)(function*(){t.unsub("idle"),yield(0,d.GE)({title:"Idle Timeout",content:"Your form data is out of date",icon:{content:"update"},confirm_text:"Refresh"},t._dialog),t._state.newForm(),location.reload()}))),t.timeout("init_valid_assets",()=>t._updateValidAssets(),1e3)})()}focusInput(){this.timeout("input-focus",()=>{this._input_el.nativeElement.value="",this._input_el?.nativeElement?.focus()},300)}findAvailableTime(){const{attendees:t,organiser:n,date:i,duration:s}=this.form.value,l=this._dialog.open(Aa.X1,{data:{users:t,host:n||(0,d.Ny)(),date:i,duration:s}});l.afterClosed().subscribe(r=>{r&&this.form.patchValue({date:l.componentInstance.date,attendees:l.componentInstance.users.getValue(),duration:l.componentInstance.duration})})}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU($.Ws),e.rXU(Ie),e.rXU(dl.R),e.rXU(d.h$),e.rXU(b.Ix),e.rXU(M.bZ),e.rXU(J.VK),e.rXU(T.yb),e.rXU(d.MH))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["meeting-flow-form"]],viewQuery:function(n,i){if(1&n&&(e.GBs(Ml,5),e.GBs(Il,5)),2&n){let s;e.mGM(s=e.lsd())&&(i._confirm_ref=s.first),e.mGM(s=e.lsd())&&(i._input_el=s.first)}},features:[e.Vt3],decls:6,vars:5,consts:()=>{let t;return t=$localize`:␟e26549266cb03cd521fa0036d18ea57004186570␟1405384778004392663:{VAR_SELECT, select, true {Reset } false {Clear }}`,t=e.k04(t,{VAR_SELECT:"\ufffd0\ufffd"}),[["input",""],t,[1,"h-full","w-full","bg-base-200","overflow-auto"],[1,"max-w-full","w-[48rem]","mx-auto","sm:my-4","bg-base-100","border","border-base-300"],[1,"w-full","p-4","sm:py-4","sm:px-16","text-2xl","font-medium","border-b","border-base-300"],["class","p-0 sm:py-4 sm:px-16 divide-y divide-base-200 space-y-2",3,"formGroup",4,"ngIf"],[1,"p-0","sm:py-4","sm:px-16","divide-y","divide-base-200","space-y-2",3,"formGroup"],[1,"p-2"],[1,"space-x-2","flex","items-center"],[1,"bg-base-200","rounded-full","h-6","w-6","flex","items-center","justify-center"],[1,"text-xl"],[1,"flex-1","w-px"],["icon","","name","toggle-details-meeting","matRipple","",3,"click"],[1,"overflow-hidden"],[1,"mt-4",3,"form"],["class","p-2",4,"ngIf"],["icon","","name","toggle-spaces-meeting","matRipple","",3,"click"],[1,"overflow-hidden","flex","flex-col","items-center"],["class","bg-warning text-warning-content rounded shadow p-2 text-xs mx-auto my-2 inline-flex",4,"ngIf"],["formControlName","resources",1,"w-full",3,"multiday"],[1,"flex","flex-col","sm:flex-row","items-center","sm:space-x-2","p-2"],["btn","","name","open-meeting-confirm","matRipple","","confirm","",1,"mb-2","sm:mb-0","w-full","sm:w-auto",3,"click"],["btn","","name","clear-form-meeting","matRipple","","clear-form","",1,"inverse","w-full","sm:w-auto",3,"click"],["matRipple","","name","find-attendee-availability",1,"bg-none","underline","text-xs","text-info",3,"click"],["icon","","name","toggle-attendees-meeting","matRipple","",3,"click"],["formControlName","attendees",1,"mt-4",3,"time","guests"],[1,"bg-warning","text-warning-content","rounded","shadow","p-2","text-xs","mx-auto","my-2","inline-flex"],["icon","","name","toggle-catering-meeting","matRipple","",3,"click"],["formControlName","catering",3,"options"],["appearance","outline","class","w-full mt-2",3,"openedChange",4,"ngIf"],["appearance","outline","class","w-full",3,"mt-2",4,"ngIf"],["appearance","outline",1,"w-full","mt-2",3,"openedChange"],["formControlName","catering_charge_code","placeholder","Charge Code"],["placeholder","Search charge codes...",1,"sticky","top-0","bg-base-100","px-4","py-3","text-base","border-x-0","border-t-0","border-b","focus:border-b","border-base-200","w-full","rounded-none","z-50",3,"ngModelChange","ngModel","ngModelOptions"],[1,"hidden"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["appearance","outline",1,"w-full"],["matInput","","formControlName","catering_notes","placeholder","Extra catering details..."],["icon","","name","toggle-assets-meeting","matRipple","",3,"click"],["formControlName","assets",3,"options","rejected_ids"],[1,"space-x-2","flex","items-center","mb-4"],[1,"w-full","flex","flex-col"],["for","notes"],["name","notes","formControlName","body","placeholder","Notes..."]]},template:function(n,i){1&n&&(e.j41(0,"div",2)(1,"div",3)(2,"h2",4),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.DNE(5,Gl,42,27,"form",5),e.k0s()()),2&n&&(e.R7$(3),e.Lme(" ",i.form.value.id?"Edit":"Book"," ",e.bMT(4,3,"WPA.BOOK_MEETING_HEADING")," "),e.R7$(2),e.Y8G("ngIf",i.form))},dependencies:[c.Sq,c.bT,E.R,F.wT,I.rl,I.TL,te.VO,F.r6,X.fg,xe.T,ml.K,ht.d,Rt.Q,m.qT,m.me,m.BC,m.cb,m.vS,ct,m.j4,m.JD,Tl,c.Jj,Ee.D9],encapsulation:2,data:{animation:[d.Ft]}})}return o})();const jl=()=>["/"];function Xl(o,a){1&o&&(e.PLo(0,0,2),e.nrm(1,"span"),e.YFu())}function Bl(o,a){if(1&o&&(e.PLo(0,0,1),e.j41(1,"span"),e.DNE(2,Xl,2,0,"span",6),e.k0s(),e.YFu()),2&o){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",t.level),e.uP7((null==t.level?null:t.level.display_name)||(null==t.level?null:t.level.name))((null==t.space?null:t.space.display_name)||(null==t.space?null:t.space.name)),e.nnv(0)}}function Wl(o,a){1&o&&(e.PLo(0,0,3),e.nrm(1,"span"),e.YFu())}function Vl(o,a){if(1&o&&(e.PLo(0,0,4),e.nrm(1,"span"),e.nI1(2,"date"),e.nI1(3,"date"),e.YFu()),2&o){const t=e.XpG();e.R7$(3),e.uP7(e.i5U(2,2,t.last_event.date,t.time_format))(e.i5U(3,5,t.last_event.date+60*t.last_event.duration*1e3,t.time_format)),e.nnv(0)}}function Kl(o,a){1&o&&(e.j41(0,"p"),e.EFF(1," Please allow up to 5 minutes for you booking to be approved. "),e.k0s())}let Yl=(()=>{class o{get last_event(){return this._event_form.last_success}get space(){return this.last_event.space}get level(){return this._org.levelWithID(this.space?.zones)}get time_format(){return this._settings.time_format}constructor(t,n,i){this._event_form=t,this._org=n,this._settings=i}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU($.Ws),e.rXU(T.yb),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["meeting-flow-success"]],decls:17,vars:16,consts:()=>{let t;return t=$localize`:␟e1282d0c22e56ac0dbb84506339593df729e6612␟2432279147622715319: Your ${"\ufffd*8:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_SPAN_1: room booking for ${"\ufffd0:1\ufffd"}:INTERPOLATION:${"\ufffd*2:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_SPAN:,${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:1\ufffd\ufffd/*8:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*9:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*11:4\ufffd]"}:CLOSE_TAG_SPAN: ${"\ufffd1:1\ufffd"}:INTERPOLATION_1: ${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:1\ufffd\ufffd/*8:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*9:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*11:4\ufffd]"}:CLOSE_TAG_SPAN:${"\ufffd*9:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_SPAN_2:meeting${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:1\ufffd\ufffd/*8:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*9:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*11:4\ufffd]"}:CLOSE_TAG_SPAN: has been successfully booked for ${"\ufffd0\ufffd"}:INTERPOLATION_2:${"\ufffd*11:4\ufffd\ufffd#1:4\ufffd"}:START_TAG_SPAN_3: at ${"\ufffd0:4\ufffd"}:INTERPOLATION_3:-${"\ufffd1:4\ufffd"}:INTERPOLATION_4:${"[\ufffd/#1:2\ufffd\ufffd/*2:2\ufffd|\ufffd/#1:1\ufffd\ufffd/*8:1\ufffd|\ufffd/#1:3\ufffd\ufffd/*9:3\ufffd|\ufffd/#1:4\ufffd\ufffd/*11:4\ufffd]"}:CLOSE_TAG_SPAN:. `,t=e.k04(t),[t,[1,"absolute","inset-0","bg-base-100","flex","flex-col","z-50","overflow-auto"],[1,"flex-1","flex","flex-col","items-center","justify-center","space-y-2","p-8"],[1,"text-2xl","font-medium"],["src","assets/icons/success.svg"],[1,"text-center","max-w-[32rem]"],[4,"ngIf"],[1,"sticky","bottom-0","bg-base-100","p-2","w-full","border-t","border-base-200","mt-4","flex","items-center","justify-center"],["btn","","name","meeting-created-continue","matRipple","",1,"w-full","max-w-[32rem]",3,"routerLink"]]},template:function(n,i){1&n&&(e.j41(0,"div",1)(1,"main",2)(2,"h2",3),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.nrm(5,"img",4),e.j41(6,"p",5),e.PLo(7,0),e.DNE(8,Bl,3,3,"span",6)(9,Wl,2,0,"span",6),e.nI1(10,"date"),e.DNE(11,Vl,4,8,"span",6),e.YFu(),e.k0s(),e.DNE(12,Kl,2,0,"p",6),e.k0s(),e.j41(13,"footer",7)(14,"a",8),e.EFF(15),e.nI1(16,"translate"),e.k0s()()()),2&n&&(e.R7$(3),e.SpI(" ",e.bMT(4,8,"WPA.BOOKING_CONFIRMED")," "),e.R7$(5),e.Y8G("ngIf",i.space),e.R7$(),e.Y8G("ngIf",!i.space),e.R7$(2),e.Y8G("ngIf",!(null!=i.last_event&&i.last_event.all_day)),e.uP7(e.i5U(10,10,i.last_event.date,"mediumDate")),e.nnv(7),e.R7$(),e.Y8G("ngIf",!0),e.R7$(2),e.Y8G("routerLink",e.lJ4(15,jl)),e.R7$(),e.SpI(" ",e.bMT(16,13,"WPA.BOOKING_DONE_CONTINUE")," "))},dependencies:[c.bT,F.r6,b.Wk,c.vh,Ee.D9]})}return o})();function Ul(o,a){1&o&&e.nrm(0,"meeting-flow-success")}function zl(o,a){1&o&&e.nrm(0,"meeting-flow-confirm")}function Jl(o,a){1&o&&e.nrm(0,"meeting-flow-form")}let ql=(()=>{class o extends d.Tv{get view(){return this._state.view}get last_success(){return this._state.last_success}constructor(t,n){super(),this._state=t,this._route=n}ngOnInit(){this._state.loadForm(),this._state.listenForStatusChanges(),this.subscription("route.params",this._route.paramMap.subscribe(t=>{t.has("step")&&this._state.setView(t.get("step"))})),this.subscription("route.query",this._route.queryParamMap.subscribe(t=>{t.has("success")&&this._state.setView("success")}))}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU($.Ws),e.rXU(b.nX))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["placeos-book-meeting-flow"]],features:[e.Vt3],decls:4,vars:3,consts:[[1,"bg-base-100","h-full","w-full","z-50",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(n,i){1&n&&(e.j41(0,"div",0),e.DNE(1,Ul,1,0,"meeting-flow-success",1)(2,zl,1,0,"meeting-flow-confirm",1)(3,Jl,1,0,"meeting-flow-form",2),e.k0s()),2&n&&(e.Y8G("ngSwitch",i.view),e.R7$(),e.Y8G("ngSwitchCase","success"),e.R7$(),e.Y8G("ngSwitchCase","confirm"))},dependencies:[c.ux,c.e1,c.fG,Ll,Et,Yl],styles:["[_nghost-%COMP%]{height:100%;width:100%}\n\n/*# sourceMappingURL=meeting-flow.component.ts-angular-inline--115.css.map*/"]})}return o})();var Mt=p(46247);function Hl(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.dismiss())}),e.j41(1,"app-icon"),e.EFF(2,"close"),e.k0s()()}}function Zl(o,a){1&o&&e.nrm(0,"mat-spinner",23)}function Ql(o,a){if(1&o&&(e.qex(0),e.j41(1,"div",27)(2,"app-icon"),e.EFF(3,"arrow_upward"),e.k0s(),e.j41(4,"div"),e.EFF(5),e.k0s()(),e.bVm()),2&o){const t=a.$implicit;e.R7$(5),e.JRh(t)}}function er(o,a){if(1&o&&(e.j41(0,"section",24)(1,"app-icon",10),e.EFF(2,"done"),e.k0s(),e.j41(3,"div",11)(4,"h3",25),e.EFF(5),e.k0s(),e.j41(6,"div",12)(7,"app-icon"),e.EFF(8,"person"),e.k0s(),e.j41(9,"span"),e.pXf(10,2),e.nI1(11,"async"),e.k0s()(),e.j41(12,"div",12)(13,"app-icon"),e.EFF(14,"place"),e.k0s(),e.j41(15,"div"),e.EFF(16),e.k0s()(),e.DNE(17,Ql,6,1,"ng-container",26),e.k0s()()),2&o){const t=e.XpG();e.R7$(5),e.SpI(" ",(null==t.booking_asset?null:t.booking_asset.name)||(null==t.booking_asset?null:t.booking_asset.id)||""," "),e.R7$(6),e.uP7(e.bMT(11,4,t.is_group)?"Multiple Desks":"Single desk"),e.nnv(10),e.R7$(5),e.JRh(t.location),e.R7$(),e.Y8G("ngForOf",t.booking_asset.features)}}function tr(o,a){if(1&o&&(e.j41(0,"div",37)(1,"app-icon"),e.EFF(2,"priority_high"),e.k0s()()),2&o){const t=e.XpG(2);e.Y8G("matTooltip",t.err_tooltip)}}function nr(o,a){if(1&o&&(e.j41(0,"div",38)(1,"div",39)(2,"span",31),e.EFF(3),e.k0s()(),e.j41(4,"div",40),e.EFF(5),e.k0s()()),2&o){const t=a.$implicit;e.R7$(3),e.JRh(t.name||"Item"),e.R7$(2),e.SpI(" x",t.quantity," ")}}function or(o,a){if(1&o&&(e.j41(0,"div",28)(1,"div",29)(2,"div",30)(3,"div",31),e.EFF(4),e.nI1(5,"date"),e.k0s(),e.DNE(6,tr,3,1,"div",32),e.nrm(7,"div",33),e.j41(8,"div",34),e.EFF(9),e.k0s()()(),e.j41(10,"div",35),e.DNE(11,nr,6,2,"div",36),e.k0s()()),2&o){const t=a.$implicit,n=e.XpG();e.AVh("border-error",n.end_time<t.deliver_at)("border-base-300",n.end_time>=t.deliver_at),e.R7$(4),e.SpI(" Requested for ",e.i5U(5,8,t.deliver_at_time,"MMM d, "+n.time_format)," "),e.R7$(2),e.Y8G("ngIf",n.end_time<t.deliver_at),e.R7$(3),e.SpI(" ",t.item_count," item(s) "),e.R7$(2),e.Y8G("ngForOf",t.items)}}function ir(o,a){1&o&&(e.j41(0,"section",41)(1,"app-icon",10),e.EFF(2,"done"),e.k0s(),e.j41(3,"div",11)(4,"h3"),e.pXf(5,3),e.k0s(),e.j41(6,"div",42)(7,"span"),e.EFF(8,"Locker E-043"),e.k0s()()()())}function sr(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",43),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.postForm())}),e.pXf(1,4),e.k0s()}}let ar=(()=>{class o extends d.Tv{get end_time(){const t=(0,H.A)(this.booking.date,this.booking.duration).valueOf();return this.booking.all_day?(0,Y.A)(t).valueOf():t}get booking(){return this._state.form.value}get time_format(){return this._settings.time_format}get assets(){return this.booking.assets||null}get needs_locker(){return!!this.booking.secondary_resource}get assets_count(){return this.assets?.length?this.assets.reduce((t,n)=>t+n.amount,0):0}get booking_asset(){return this.booking.booking_asset}get location(){const t=this._org.buildings.find(i=>i.id===this.booking_asset?.zone?.parent_id),n=this._org.levels.find(i=>i.id===this.booking_asset?.zone?.id);return`${n?.display_name||n?.name}${t?",":""} ${t?.address||t?.display_name||t?.name||""}`}constructor(t,n,i,s){var l;super(),l=this,this._state=t,this._org=n,this._sheet_ref=i,this._settings=s,this.show_close=!1,this.loading=this._state.loading,this.is_group=this._state.options.pipe((0,x.T)(r=>r.group)),this.postForm=(0,h.A)(function*(){try{(yield l._state.options.pipe((0,W.s)(1)).toPromise())?.group?yield l._state.postFormForGroup():yield l._state.postForm(),l.dismiss(!0)}catch(r){console.log("Booking Error:",r),(0,d.UG)("string"==typeof r?r:"Desk unavailable at the selected time")}}),this.dismiss=r=>this._sheet_ref?.dismiss(r)}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(R.nx),e.rXU(T.yb),e.rXU(J.eN,8),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["new-desk-flow-confirm"]],inputs:{show_close:"show_close"},features:[e.Vt3],decls:37,vars:22,consts:()=>{let t,n,i,s,l;return t=$localize`:␟0882dc9e94f4d0eb3cd1bd084b002f11dcbf97a4␟872571517031618480:Confirm Desk Booking`,n=$localize`:␟4b8cba19f9eb95db1c00134cd15d0e8eae6c731d␟6782085745205604711:Asset Requests`,i=$localize`:␟2e54d53aea262fcc59bd5a376f94c6c0b7b1b633␟750051277779103741:${"\ufffd0\ufffd"}:INTERPOLATION:`,s=$localize`:␟831b916fccb1f3e17a1e16c1d7dbd5cb34ab9aaf␟1356827781051284287:Requested Locker`,l=$localize`:␟0ad83be7464a0a2e8d100342e144bc3fbc789f9d␟3141803775366633134: Confirm `,[t,n,i,s,l,["icon","","name","close-desk-confirm","matRipple","","class","absolute right-2 top-2 bg-base-200",3,"click",4,"ngIf"],[1,"flex","items-center","justify-between","px-4","pt-4"],[1,"text-2xl","font-medium","mb-2"],["diameter","32",4,"ngIf"],["period","",1,"flex","space-x-1","py-4","px-2"],[1,"text-success"],["details","",1,"leading-6"],[1,"flex","items-center","space-x-2"],["date",""],["time",""],["desk","","class","flex space-x-1 py-4 px-2 border-t border-neutral",4,"ngIf"],["assets","",1,"flex","space-x-1","py-4","px-2","border-t","max-h-[50vh]","overflow-auto"],["details","",1,"flex-1","leading-6","w-1/2","pr-2"],["request","","class","border bg-base-100 rounded-xl overflow-hidden",3,"border-error","border-base-300",4,"ngFor","ngForOf"],["locker","","class","flex space-x-1 py-4 px-2 border-t",4,"ngIf"],[1,"p-2","w-full","border-t","border-base-200","mt-4"],["name","confirm-desk","btn","","matRipple","","class","w-full",3,"click",4,"ngIf"],["icon","","name","close-desk-confirm","matRipple","",1,"absolute","right-2","top-2","bg-base-200",3,"click"],["diameter","32"],["desk","",1,"flex","space-x-1","py-4","px-2","border-t","border-neutral"],["name",""],[4,"ngFor","ngForOf"],["features","",1,"flex","items-center","space-x-2"],["request","",1,"border","bg-base-100","rounded-xl","overflow-hidden"],[1,"flex","items-center","space-x-2","p-3"],[1,"flex-1","flex","items-center","space-x-2"],[1,"text-sm"],["class","flex items-center justify-center h-6 w-6 rounded-full bg-error text-error-content",3,"matTooltip",4,"ngIf"],[1,"flex-1"],[1,"text-xs","bg-success","text-success-content","px-2","py-1","rounded"],[1,"flex","flex-col","bg-base-200","divide-y","divide-base-100"],["class","flex items-center px-3 py-1 space-x-2 hover:opacity-90",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-center","h-6","w-6","rounded-full","bg-error","text-error-content",3,"matTooltip"],[1,"flex","items-center","px-3","py-1","space-x-2","hover:opacity-90"],[1,"flex","items-center","flex-1"],[1,"rounded","bg-success","text-success-content","text-xs","px-2","py-1"],["locker","",1,"flex","space-x-1","py-4","px-2","border-t"],[1,"flex","space-x-2"],["name","confirm-desk","btn","","matRipple","",1,"w-full",3,"click"]]},template:function(n,i){1&n&&(e.DNE(0,Hl,3,0,"button",5),e.j41(1,"header",6)(2,"h2",7),e.pXf(3,0),e.k0s(),e.DNE(4,Zl,1,0,"mat-spinner",8),e.nI1(5,"async"),e.k0s(),e.j41(6,"section",9)(7,"app-icon",10),e.EFF(8,"done"),e.k0s(),e.j41(9,"div",11)(10,"h3"),e.EFF(11),e.k0s(),e.j41(12,"div",12)(13,"app-icon"),e.EFF(14,"calendar_today"),e.k0s(),e.j41(15,"div",13),e.EFF(16),e.nI1(17,"date"),e.k0s()(),e.j41(18,"div",12)(19,"app-icon"),e.EFF(20,"schedule"),e.k0s(),e.j41(21,"div",14),e.EFF(22),e.nI1(23,"date"),e.nI1(24,"date"),e.k0s()()()(),e.DNE(25,er,18,6,"section",15),e.j41(26,"section",16)(27,"app-icon",10),e.EFF(28,"done"),e.k0s(),e.j41(29,"div",17)(30,"h3"),e.pXf(31,1),e.k0s(),e.DNE(32,or,12,11,"div",18),e.k0s()(),e.DNE(33,ir,9,0,"section",19),e.j41(34,"footer",20),e.DNE(35,sr,2,0,"button",21),e.nI1(36,"async"),e.k0s()),2&n&&(e.Y8G("ngIf",i.show_close),e.R7$(4),e.Y8G("ngIf",e.bMT(5,9,i.loading)),e.R7$(7),e.JRh(i.booking.title||"~Untitled~"),e.R7$(5),e.JRh(e.i5U(17,11,i.booking.date,"fullDate")),e.R7$(6),e.SpI(" ",i.booking.all_day?"All Day":e.i5U(23,14,i.booking.date,i.time_format)+" - "+e.i5U(24,17,i.booking.date+60*i.booking.duration*1e3,i.time_format+" (z)")," "),e.R7$(3),e.Y8G("ngIf",null==i.booking_asset?null:i.booking_asset.id),e.R7$(7),e.Y8G("ngForOf",i.assets),e.R7$(),e.Y8G("ngIf",i.needs_locker),e.R7$(2),e.Y8G("ngIf",!e.bMT(36,20,i.loading)))},dependencies:[c.Sq,c.bT,E.R,F.r6,S.LG,q.oV,c.Jj,c.vh],styles:["section[_ngcontent-%COMP%] > app-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-top:.3rem}h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:medium;margin:.5rem 0}\n\n/*# sourceMappingURL=new-desk-flow-confirm.component.ts-angular-inline--118.css.map*/"]})}return o})();var lr=p(56416);const je=()=>({standalone:!0}),rr=()=>[],_r=(o,a,t)=>({date:o,duration:a,all_day:t});function cr(o,a){if(1&o){const t=e.RV6();e.j41(0,"section",32)(1,"button",33),e.nI1(2,"async"),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.setOptions({group:!1,members:[]}))}),e.j41(3,"app-icon",34),e.EFF(4,"person"),e.k0s(),e.j41(5,"div",35),e.pXf(6,4),e.k0s(),e.nrm(7,"div",36),e.nI1(8,"async"),e.nI1(9,"async"),e.k0s(),e.j41(10,"button",33),e.nI1(11,"async"),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.setOptions({group:!0}))}),e.j41(12,"app-icon",34),e.EFF(13,"group_add"),e.k0s(),e.j41(14,"div",35),e.pXf(15,5),e.k0s(),e.nrm(16,"div",36),e.nI1(17,"async"),e.nI1(18,"async"),e.k0s()()}if(2&o){let t,n,i,s,l,r;const _=e.XpG(2);e.R7$(),e.AVh("text-secondary",!(null!=(t=e.bMT(2,12,_.options))&&t.group)),e.R7$(6),e.AVh("bg-base-200",null==(n=e.bMT(8,14,_.options))?null:n.group)("bg-secondary",!(null!=(i=e.bMT(9,16,_.options))&&i.group)),e.R7$(3),e.AVh("text-secondary",null==(s=e.bMT(11,18,_.options))?null:s.group),e.R7$(6),e.AVh("bg-base-200",!(null!=(l=e.bMT(17,20,_.options))&&l.group))("bg-secondary",null==(r=e.bMT(18,22,_.options))?null:r.group)}}function dr(o,a){1&o&&(e.j41(0,"div",37)(1,"label",23),e.EFF(2,"Host"),e.j41(3,"span"),e.EFF(4,"*"),e.k0s()(),e.nrm(5,"a-user-search-field",38),e.k0s())}function mr(o,a){1&o&&(e.j41(0,"mat-checkbox",39),e.pXf(1,6),e.k0s())}function pr(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",40)(1,"div",41)(2,"label",42),e.PLo(3,7),e.nrm(4,"span"),e.YFu(),e.k0s(),e.j41(5,"a-time-field",43),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.form.patchValue({date:i}))}),e.k0s()(),e.j41(6,"div",41)(7,"label",44),e.PLo(8,8),e.nrm(9,"span"),e.YFu(),e.k0s(),e.nrm(10,"a-duration-field",45),e.k0s()()}if(2&o){let t;const n=e.XpG(2);e.R7$(5),e.Y8G("ngModel",n.form.value.date)("ngModelOptions",e.lJ4(8,je))("use_24hr",n.use_24hr),e.R7$(5),e.Y8G("time",null==(t=n.form.get("date"))?null:t.value)("max",600)("min",60)("step",60)("use_24hr",n.use_24hr)}}function ur(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",40)(1,"div",41)(2,"mat-checkbox",46),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.form.patchValue({secondary_resource:i?"locker":""}))}),e.pXf(3,9),e.k0s()()()}if(2&o){const t=e.XpG(2);e.R7$(2),e.Y8G("ngModel",!!t.form.value.secondary_resource)("ngModelOptions",e.lJ4(2,je))}}function fr(o,a){if(1&o){const t=e.RV6();e.j41(0,"section",16)(1,"h3",47)(2,"div",18),e.EFF(3," 2 "),e.k0s(),e.j41(4,"div",19),e.pXf(5,10),e.k0s(),e.nrm(6,"div",48),e.k0s(),e.j41(7,"div",49)(8,"a-user-list-field",50),e.nI1(9,"async"),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.setOptions({members:i}))}),e.k0s()()()}if(2&o){let t;const n=e.XpG(2);e.R7$(8),e.Y8G("ngModel",(null==(t=e.bMT(9,2,n.options))?null:t.members)||e.lJ4(4,rr))("ngModelOptions",e.lJ4(5,je))}}function gr(o,a){1&o&&(e.j41(0,"p",53),e.EFF(1," Desks nearby to the selected desk will booked for group members "),e.k0s())}function hr(o,a){if(1&o&&(e.j41(0,"section",16)(1,"h3",17)(2,"div",18),e.EFF(3),e.nI1(4,"async"),e.k0s(),e.j41(5,"div",19),e.pXf(6,11),e.k0s()(),e.nrm(7,"desk-list-field",51),e.DNE(8,gr,2,0,"p",52),e.nI1(9,"async"),e.k0s()),2&o){let t,n;const i=e.XpG(2);e.R7$(3),e.SpI(" ",null!=(t=e.bMT(4,2,i.options))&&t.group?3:2," "),e.R7$(5),e.Y8G("ngIf",null==(n=e.bMT(9,4,i.options))?null:n.group)}}function Fr(o,a){if(1&o&&(e.j41(0,"section",16)(1,"h3",17)(2,"div",18),e.EFF(3),e.nI1(4,"async"),e.k0s(),e.j41(5,"div",19),e.pXf(6,12),e.k0s()(),e.nrm(7,"asset-list-field",54),e.k0s()),2&o){let t;const n=e.XpG(2);e.R7$(3),e.SpI(" ",null!=(t=e.bMT(4,2,n.options))&&t.group?4:3," "),e.R7$(4),e.Y8G("options",e.sMw(4,_r,n.form.getRawValue().date,n.form.value.duration,n.form.value.all_day))}}function Cr(o,a){if(1&o&&(e.j41(0,"div",14),e.DNE(1,cr,19,24,"section",15),e.j41(2,"section",16)(3,"h3",17)(4,"div",18),e.EFF(5," 1 "),e.k0s(),e.j41(6,"div",19),e.pXf(7,0),e.k0s()(),e.DNE(8,dr,6,0,"div",20),e.nI1(9,"async"),e.j41(10,"div",21)(11,"div",22)(12,"label",23),e.EFF(13,"Add Title"),e.j41(14,"span"),e.EFF(15,"*"),e.k0s()(),e.j41(16,"mat-form-field",24),e.nrm(17,"input",25),e.j41(18,"mat-error"),e.pXf(19,1),e.k0s()()(),e.j41(20,"div",26)(21,"label",27),e.PLo(22,2),e.nrm(23,"span"),e.YFu(),e.k0s(),e.j41(24,"a-date-field",28),e.pXf(25,3),e.k0s(),e.DNE(26,mr,2,0,"mat-checkbox",29),e.k0s()(),e.DNE(27,pr,11,9,"div",30)(28,ur,4,3,"div",30),e.k0s(),e.DNE(29,fr,10,6,"section",31),e.nI1(30,"async"),e.DNE(31,hr,10,6,"section",31)(32,Fr,8,8,"section",31),e.k0s()),2&o){let t,n;const i=e.XpG();e.Y8G("formGroup",i.form),e.R7$(),e.Y8G("ngIf",i.allow_groups),e.R7$(),e.AVh("!border-none",i.allow_groups),e.R7$(6),e.Y8G("ngIf",i.can_book_for_others&&!(null!=(t=e.bMT(9,12,i.options))&&t.group)),e.R7$(16),e.Y8G("to",i.end_date),e.R7$(2),e.Y8G("ngIf",i.allow_all_day),e.R7$(),e.Y8G("ngIf",!i.form.value.all_day),e.R7$(),e.Y8G("ngIf",i.can_book_lockers),e.R7$(),e.Y8G("ngIf",null==(n=e.bMT(30,14,i.options))?null:n.group),e.R7$(2),e.Y8G("ngIf",i.form.contains("resources")),e.R7$(),e.Y8G("ngIf",i.has_assets)}}let vr=(()=>{class o extends d.Tv{get building(){return this._org.building}set building(t){this._org.building=t}get can_book_for_others(){return this._settings.get("app.desks.can_book_for_others")}get can_book_lockers(){return this._settings.get("app.desks.can_book_lockers")}get can_recurr(){return this._settings.get("app.desks.recurrence_allowed")}get allow_groups(){return this._settings.get("app.desks.allow_groups")}get has_assets(){return!!this._settings.get("app.desks.has_assets")}get needs_reason(){return!0===this._settings.get("app.desks.needs_reason")}get allow_time_changes(){return!!this._settings.get("app.desks.allow_time_changes")}get allow_all_day(){return this.allow_time_changes&&!!this._settings.get("app.desks.allow_all_day")}get end_date(){return(0,Y.A)((0,L.A)(Date.now(),this._settings.get("app.desks.available_period")||90)).valueOf()}get use_24hr(){return this._settings.get("app.use_24_hour_time")}constructor(t,n,i){super(),this._state=t,this._org=n,this._settings=i,this.find=new e.bkB,this.buildings=this._org.building_list,this.levels=this._org.active_levels,this.options=this._state.options,this.features=this._state.features,this.force_time=(0,kt.A)(Date.now(),{hours:6,minutes:0}).valueOf(),this.from_id=!1,this.recurrence_options=["daily","weekly","monthly"],this.setOptions=s=>this._state.setOptions(s),this.setFeature=(s,l)=>this._state.setFeature(s,l)}ngOnChanges(t){t.form&&this.form&&this.selected_desk?.id&&this.form.patchValue({resources:[this.selected_desk]})}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(R.nx),e.rXU(T.yb),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["new-desk-form-details"]],inputs:{form:"form"},outputs:{find:"find"},features:[e.Vt3,e.OA$],decls:1,vars:1,consts:()=>{let t,n,i,s,l,r,_,u,g,f,k,C,v;return t=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,n=$localize`:␟3501a14ee1e89ea7009e8c9d1d6796a9ac9c3718␟4954033536980360307:Booking title is required.`,i=$localize`:␟04cfb5fd033651743bc4b9408bd52ba4ee894070␟3158758063619980932:Date${"\ufffd#23\ufffd"}:START_TAG_SPAN:*${"\ufffd/#23\ufffd"}:CLOSE_TAG_SPAN:`,s=$localize`:␟407bcc42df8640bf3b85c58145c8d24572bb47b6␟6682406734296000735: Date and time must be in the future `,l=$localize`:␟ee6b1f617dd5320b23fbed018c38ac092db5e40a␟3413004253239957216:Single`,r=$localize`:␟4c90059afafb7e160384d9f512797c95bb95c6dc␟8623978917681527907:Group`,_=$localize`:␟8a5018aa2d4dd0e8a98f4499d4b7b4a9255441a5␟8093595438228616861: All Day `,u=$localize`:␟02d39ddac5bbf95c424df03d5f0d22cc257556bd␟4735431816432396893: Start Time${"\ufffd#4\ufffd"}:START_TAG_SPAN:*${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:`,g=$localize`:␟96ca8377bef76dbcd3eb3b4d39e5414763c7033b␟7899923133926994657: End Time${"\ufffd#9\ufffd"}:START_TAG_SPAN:*${"\ufffd/#9\ufffd"}:CLOSE_TAG_SPAN:`,f=$localize`:␟f1701d7a0d6bfb739979f9e406793d97acd138e3␟8675972661523566351: Require locker `,k=$localize`:␟60ae849c087ccc322073478a12b2504433fbdd61␟9086691296106045671:Group Members`,C=$localize`:␟654c7e59b2003acf985bee710bad11e8cdd461f8␟6078724721705612215:Desk`,v=$localize`:␟1bdfc0dfd2ac89f5d0d2af3a66e5e959d094b39c␟8637135334686190699:Request Asset`,[t,n,i,s,l,r,_,u,g,f,k,C,v,["class","p-0 sm:py-4 sm:px-16 divide-y divide-base-200 space-y-2",3,"formGroup",4,"ngIf"],[1,"p-0","sm:py-4","sm:px-16","divide-y","divide-base-200","space-y-2",3,"formGroup"],["class","flex items-center",4,"ngIf"],[1,"p-2"],[1,"space-x-2","flex","items-center","mb-4"],[1,"bg-base-200","rounded-full","h-6","w-6","flex","items-center","justify-center"],[1,"text-xl"],["class","w-full",4,"ngIf"],[1,"flex","items-center","flex-wrap","sm:space-x-2"],[1,"flex-1","min-w-[256px]"],["for","title"],["appearance","outline",1,"w-full"],["matInput","","name","title","formControlName","title","placeholder","e.g. Focus Time"],[1,"flex-1","min-w-[256px]","relative"],["for","date"],["name","date","formControlName","date",3,"to"],["formControlName","all_day","class","absolute -top-2 right-0",4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],["class","p-2",4,"ngIf"],[1,"flex","items-center"],["matRipple","",1,"relative","h-16","flex","items-center","justify-center","flex-1","space-x-2",3,"click"],[1,"text-2xl"],[1,""],[1,"absolute","h-1","inset-x-0","bottom-0","!m-0"],[1,"w-full"],["formControlName","user",1,"mb-4"],["formControlName","all_day",1,"absolute","-top-2","right-0"],[1,"flex","items-center","space-x-2"],[1,"flex-1","w-1/3"],["for","start-time"],["name","start-time",3,"ngModelChange","ngModel","ngModelOptions","use_24hr"],["for","end-time"],["name","end-time","formControlName","duration",3,"time","max","min","step","use_24hr"],[3,"ngModelChange","ngModel","ngModelOptions"],[1,"space-x-2","flex","items-center"],[1,"flex-1","w-px"],[1,"overflow-hidden"],[1,"mt-4",3,"ngModelChange","ngModel","ngModelOptions"],["formControlName","resources"],["class","text-center rounded px-2 py-1 bg-warning shadow text-xs",4,"ngIf"],[1,"text-center","rounded","px-2","py-1","bg-warning","shadow","text-xs"],["formControlName","assets",3,"options"]]},template:function(n,i){1&n&&e.DNE(0,Cr,33,16,"div",13),2&n&&e.Y8G("ngIf",i.form)},dependencies:[c.bT,E.R,I.rl,I.TL,F.r6,X.fg,D.So,de.G,ae.y,me.t,xe.T,mt.$,lr.d,Rt.Q,m.me,m.BC,m.cb,m.vS,m.j4,m.JD,c.Jj],encapsulation:2})}return o})(),br=(()=>{class o{get form(){return this._state.form}constructor(t,n,i,s,l){this._state=t,this._router=n,this._org=i,this._bottom_sheet=s,this._settings=l,this.level="",this.levels=[],this.clearForm=()=>{this.level=this._org.building.id,this._state.clearForm()},this.viewConfirm=()=>{const{asset_id:r,resources:_}=this.form.getRawValue();if(_?.length&&!r&&this.form.patchValue({asset_id:_[0].id}),!this.form.valid)return(0,d.UG)(`Some fields are invalid. [${(0,d.F7)(this.form).join(", ")}]`);this.sheet_ref=this._bottom_sheet.open(ar),this.sheet_ref.instance.show_close=!0,this.sheet_ref.afterDismissed().subscribe(u=>{u&&(this._state.setView("success"),this._router.navigate(["/book","new-desks","success"]))})}}ngOnInit(){var t=this;return(0,h.A)(function*(){yield t._org.initialised.pipe((0,N.$)(n=>n)),yield t._org.active_levels.pipe((0,N.$)(n=>n?.length>0)),t._state.setOptions({type:"desk"}),t.level=t._org.building?.id,t.levels=[{id:t._org.building?.id,name:"Any Level"},...t._org.levelsForBuilding(t._org.building)],(0,Oe.A)(t.form.value.date,Date.now())&&t.form.patchValue({date:(0,Mt.A)(Date.now()).valueOf()})})()}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(R.nx),e.rXU(b.Ix),e.rXU(T.yb),e.rXU(J.VK),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["new-desk-flow-form"]],decls:9,vars:1,consts:()=>{let t,n;return t=$localize`:␟4bea0720f004b37b457bf013e0b7f72a2adcb9b1␟7639597883564022112: Book Desk `,n=$localize`:␟ba76c84c2e66f5a18f3856c7839505c55fba682f␟1406658621282821522: Confirm Desk `,[t,n,[1,"h-full","w-full","bg-base-200","overflow-auto"],[1,"max-w-full","w-[48rem]","mx-auto","sm:my-4","bg-base-100","border","border-base-200"],[1,"w-full","p-4","sm:py-4","sm:px-16","text-2xl","font-medium","border-b","border-base-200"],[3,"form"],[1,"sm:mb-2","border-b","border-base-200","w-full"],[1,"flex","flex-col","sm:flex-row","items-center","sm:space-x-2","p-2","sm:px-16","sm:mb-2"],["btn","","name","open-desk-confirm","matRipple","","confirm","",1,"w-full","sm:w-auto",3,"click"]]},template:function(n,i){1&n&&(e.j41(0,"div",2)(1,"div",3)(2,"h2",4),e.pXf(3,0),e.k0s(),e.nrm(4,"new-desk-form-details",5)(5,"div",6),e.j41(6,"section",7)(7,"button",8),e.bIt("click",function(){return i.viewConfirm()}),e.pXf(8,1),e.k0s()()()()),2&n&&(e.R7$(4),e.Y8G("form",i.form))},dependencies:[F.r6,vr],encapsulation:2})}return o})();var ue=p(44571),It=p(26781);const Er=()=>["/"];function Rr(o,a){if(1&o&&(e.PLo(0,1,1),e.nrm(1,"span",17),e.YFu()),2&o){const t=e.XpG();e.R7$(),e.uP7((null==t.last_event||null==t.last_event.attendees?null:t.last_event.attendees.length)+1),e.nnv(0)}}function kr(o,a){if(1&o&&(e.PLo(0,1,2),e.nrm(1,"span",18),e.YFu()),2&o){const t=e.XpG();e.R7$(),e.uP7(null==t.last_event||null==t.last_event.extension_data||null==t.last_event.extension_data.assets?null:t.last_event.extension_data.assets.length),e.nnv(0)}}function Or(o,a){if(1&o&&(e.PLo(0,1,3),e.nrm(1,"span"),e.nI1(2,"date"),e.nI1(3,"date"),e.YFu()),2&o){const t=e.XpG();e.R7$(3),e.uP7(e.i5U(2,2,t.last_event.date,t.time_format))(e.i5U(3,5,t.last_event.date+60*t.last_event.duration*1e3,t.time_format)),e.nnv(0)}}function Tr(o,a){1&o&&(e.j41(0,"p"),e.EFF(1," Please allow up to 5 minutes for you booking to be approved. "),e.k0s())}function Mr(o,a){if(1&o&&(e.j41(0,"div",19)(1,"a",20),e.nI1(2,"sanitize"),e.nrm(3,"img",21),e.j41(4,"span"),e.pXf(5,3),e.k0s()(),e.j41(6,"a",22),e.nI1(7,"sanitize"),e.nrm(8,"img",23),e.j41(9,"span"),e.pXf(10,4),e.k0s()(),e.j41(11,"a",24),e.nI1(12,"safe"),e.j41(13,"app-icon",25),e.EFF(14,"download"),e.k0s(),e.j41(15,"span"),e.pXf(16,5),e.k0s()()()),2&o){const t=e.XpG();e.R7$(),e.Y8G("href",e.i5U(2,3,t.outlook_link,"url"),e.B4B),e.R7$(5),e.Y8G("href",e.i5U(7,6,t.google_link,"url"),e.B4B),e.R7$(5),e.Y8G("href",e.i5U(12,9,t.ical_link,"url"),e.B4B)}}let Ir=(()=>{class o{get location(){const t=this.last_event?.extension_data?.booking_asset;return t&&t.zone?`, ${t.zone.display_name||t.zone.name||t.zone.id}`:""}get last_event(){return this._state.last_success}get show_links(){return this._settings.get("app.desks.show_calendar_links")}get time_format(){return this._settings.time_format}constructor(t,n){this._state=t,this._settings=n,this.outlook_link="",this.google_link="",this.ical_link="",this.viewCalendarLinks=()=>this._state.openBookingLinkModal()}ngOnInit(){const t={...this.last_event,location:`${this.location}, ${this.last_event.asset_name||""}`};this.outlook_link=(0,ue.gP)(t),this.google_link=(0,ue.dB)(t),this.ical_link=(0,ue._V)(t)}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(R.nx),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["new-desk-flow-success"]],decls:16,vars:14,consts:()=>{let t,n,i,s,l,r;return t=$localize`:␟56ae814b08614e0ea7d03f8c2f6deb8385091857␟3615288463984354959: ${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd1\ufffd"}:INTERPOLATION_1: Booked! `,n=$localize`:␟c93764e0c6332aee43d1bd9ec3a5bec10603b2ea␟9049792294203576457: Your ${"\ufffd*7:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_SPAN: group of ${"\ufffd0:1\ufffd"}:INTERPOLATION: ${"[\ufffd/#1:1\ufffd\ufffd/*7:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*8:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*10:3\ufffd]"}:CLOSE_TAG_SPAN: desk${"\ufffd0\ufffd"}:INTERPOLATION_1: has been successfully booked ${"\ufffd*8:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_SPAN_1: including ${"\ufffd0:2\ufffd"}:INTERPOLATION_2: asset(s) ${"[\ufffd/#1:1\ufffd\ufffd/*7:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*8:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*10:3\ufffd]"}:CLOSE_TAG_SPAN: for ${"\ufffd1\ufffd"}:INTERPOLATION_3: ${"\ufffd*10:3\ufffd\ufffd#1:3\ufffd"}:START_TAG_SPAN_2: at ${"\ufffd0:3\ufffd"}:INTERPOLATION_4:-${"\ufffd1:3\ufffd"}:INTERPOLATION_5:${"[\ufffd/#1:1\ufffd\ufffd/*7:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*8:2\ufffd|\ufffd/#1:3\ufffd\ufffd/*10:3\ufffd]"}:CLOSE_TAG_SPAN:. `,n=e.k04(n),i=$localize`:␟44c59d98706bc456a0feecbb41601eec38da367e␟1969482015227334006: Great, thanks! `,s=$localize`:␟11765fae755306c1287745a7ddb4461aae072a68␟7547869007893180695:Add to Outlook`,l=$localize`:␟fa6bd0f777a40a0f26b09751bf006c7337d547ac␟2479867054818994962:Add to Google Calendar`,r=$localize`:␟1af54061e7f4bcfb1048ffaa05c9b8f7c4b41679␟4894641609416495396:Download iCal File`,[t,n,i,s,l,r,[1,"absolute","inset-0","bg-base-100","flex","flex-col","z-50","overflow-auto"],[1,"flex-1","flex","flex-col","items-center","justify-center","space-y-2","p-8"],[1,"text-2xl","font-medium","text-center"],["src","assets/icons/success.svg"],[1,"text-center"],["group","",4,"ngIf"],["assets","",4,"ngIf"],[4,"ngIf"],["class","flex flex-col items-center space-y-4 p-4 relative",4,"ngIf"],[1,"sticky","bottom-0","p-2","w-full","border-t","bg-base-100","border-base-200","mt-4","flex","items-center","justify-center"],["btn","","name","desk-confirm-continue","matRipple","",1,"w-full","max-w-[32rem]","mx-auto",3,"routerLink"],["group",""],["assets",""],[1,"flex","flex-col","items-center","space-y-4","p-4","relative"],["btn","","matRipple","","name","desk-outlook-link","target","_blank","rel","noopener noreferer",1,"flex","items-center","p-2","space-x-2","pr-4","w-64","rounded","inverse",3,"href"],["src","assets/icons/outlook.svg",1,"w-6"],["btn","","matRipple","","name","desk-google-link","target","_blank","rel","noopener noreferer",1,"flex","items-center","p-2","space-x-2","pr-4","w-64","rounded","inverse",3,"href"],["src","assets/icons/gcal.svg",1,"w-6"],["btn","","matRipple","","name","desk-ical-link","target","_blank","rel","noopener noreferer",1,"flex","items-center","p-2","space-x-2","pr-4","w-64","rounded","inverse",3,"href"],[1,"text-xl"]]},template:function(n,i){1&n&&(e.j41(0,"div",6)(1,"main",7)(2,"h2",8),e.pXf(3,0),e.k0s(),e.nrm(4,"img",9),e.j41(5,"p",10),e.PLo(6,1),e.DNE(7,Rr,2,1,"span",11)(8,kr,2,1,"span",12),e.nI1(9,"date"),e.DNE(10,Or,4,8,"span",13),e.YFu(),e.k0s(),e.DNE(11,Tr,2,0,"p",13)(12,Mr,17,12,"div",14),e.k0s(),e.j41(13,"footer",15)(14,"a",16),e.pXf(15,2),e.k0s()()()),2&n&&(e.R7$(3),e.uP7(i.last_event.asset_name||i.last_event.asset_id)(i.location),e.nnv(3),e.R7$(4),e.Y8G("ngIf",null==i.last_event||null==i.last_event.attendees?null:i.last_event.attendees.length),e.R7$(),e.Y8G("ngIf",null==i.last_event||null==i.last_event.extension_data||null==i.last_event.extension_data.assets?null:i.last_event.extension_data.assets.length),e.R7$(2),e.Y8G("ngIf",!(null!=i.last_event&&i.last_event.all_day)),e.uP7(null!=i.last_event&&null!=i.last_event.attendees&&i.last_event.attendees.length?"s":"")(e.i5U(9,10,i.last_event.date,"mediumDate")),e.nnv(6),e.R7$(),e.Y8G("ngIf",!0),e.R7$(),e.Y8G("ngIf",i.show_links),e.R7$(2),e.Y8G("routerLink",e.lJ4(13,Er)))},dependencies:[c.bT,E.R,F.r6,b.Wk,c.vh,It.m,Le.a],encapsulation:2})}return o})();function xr(o,a){1&o&&(e.qex(0),e.nrm(1,"new-desk-flow-success"),e.bVm())}function Sr(o,a){1&o&&(e.qex(0),e.nrm(1,"new-desk-flow-form"),e.bVm())}let wr=(()=>{class o extends d.Tv{get view(){return this._state.view}get last_success(){return this._state.last_success}constructor(t,n,i){super(),this._state=t,this._route=n,this._org=i}ngOnInit(){var t=this;return(0,h.A)(function*(){yield t._org.initialised.pipe((0,N.$)(n=>n)).toPromise(),t._state.loadForm(),t._state.setOptions({type:"desk"}),t._state.form.patchValue({booking_type:"desk"}),t.subscription("route.params",t._route.paramMap.subscribe(n=>{n.has("step")&&t._state.setView(n.get("step"))})),t.subscription("route.query",t._route.queryParamMap.subscribe(function(){var n=(0,h.A)(function*(i){if(i.has("success")&&t._state.setView(i.get("success")),i.has("asset_id")){const s=i.get("asset_id");let r=(yield t._state.resources.pipe((0,W.s)(1)).toPromise()).find(_=>_.id===s);if(!r)return(0,d.uA)("Unable to find desk with given asset ID.");t._state.form.patchValue({resources:[new T.gB({id:r.id,name:r.name||r.id})]})}});return function(i){return n.apply(this,arguments)}}()))})()}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(R.nx),e.rXU(b.nX),e.rXU(T.yb))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["placeos-new-book-desk-flow"]],features:[e.Vt3],decls:4,vars:2,consts:[[1,"bg-base-100","h-full","w-full","z-50"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(n,i){1&n&&(e.j41(0,"div",0),e.qex(1,1),e.DNE(2,xr,2,0,"ng-container",2)(3,Sr,2,0,"ng-container",3),e.bVm(),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngSwitch",i.view),e.R7$(),e.Y8G("ngSwitchCase","success"))},dependencies:[c.ux,c.e1,c.fG,br,Ir],styles:["[_nghost-%COMP%]{height:100%;width:100%}\n\n/*# sourceMappingURL=new-desk-flow.component.ts-angular-inline--117.css.map*/"]})}return o})();var Nr=p(68874);let yr=(()=>{class o{constructor(t){this._router=t}onDone(){this._router.navigate(["/"])}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(b.Ix))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["placeos-book-space-flow"]],decls:3,vars:0,consts:[[1,"bg-base-200","h-full","w-full","overflow-auto"],[1,"w-full","h-full","sm:h-auto","max-w-[48rem]","mx-auto","sm:my-4","bg-base-100","shadow","border","border-base-200","overflow-hidden"],[3,"done"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"invite-visitor-form",2),e.bIt("done",function(){return i.onDone()}),e.k0s()()())},dependencies:[Nr.j],styles:["[_nghost-%COMP%]{position:relative;height:100%;width:100%}\n\n/*# sourceMappingURL=visitor-flow.component.ts-angular-inline--119.css.map*/"]})}return o})();function $r(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",18),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.dismiss())}),e.j41(1,"app-icon"),e.EFF(2,"close"),e.k0s()()}}function Pr(o,a){1&o&&e.nrm(0,"mat-spinner",19)}function Ar(o,a){if(1&o&&(e.qex(0),e.j41(1,"div",23)(2,"app-icon"),e.EFF(3,"arrow_upward"),e.k0s(),e.j41(4,"div"),e.EFF(5),e.k0s()(),e.bVm()),2&o){const t=a.$implicit;e.R7$(5),e.JRh(t)}}function Dr(o,a){if(1&o&&(e.j41(0,"section",20)(1,"app-icon",9),e.EFF(2,"done"),e.k0s(),e.j41(3,"div",10)(4,"h3",21),e.EFF(5),e.k0s(),e.j41(6,"div",11)(7,"app-icon"),e.EFF(8,"person"),e.k0s(),e.j41(9,"span"),e.pXf(10,1),e.k0s()(),e.j41(11,"div",11)(12,"app-icon"),e.EFF(13,"place"),e.k0s(),e.j41(14,"div"),e.EFF(15),e.k0s()(),e.DNE(16,Ar,6,1,"ng-container",22),e.k0s()()),2&o){const t=e.XpG();e.R7$(5),e.SpI(" ",(null==t.booking_asset?null:t.booking_asset.name)||(null==t.booking_asset?null:t.booking_asset.id)||""," "),e.R7$(10),e.JRh(t.location),e.R7$(),e.Y8G("ngForOf",t.booking_asset.features)}}function Gr(o,a){if(1&o&&(e.j41(0,"div",26)(1,"div",27),e.EFF(2),e.k0s(),e.j41(3,"span"),e.EFF(4),e.k0s()()),2&o){const t=a.$implicit;e.R7$(2),e.SpI(" ",t.amount," "),e.R7$(2),e.JRh(t.name)}}function Lr(o,a){if(1&o&&(e.j41(0,"section",24)(1,"app-icon",9),e.EFF(2,"done"),e.k0s(),e.j41(3,"div",10)(4,"h3"),e.pXf(5,2),e.k0s(),e.DNE(6,Gr,5,2,"div",25),e.k0s()()),2&o){const t=e.XpG();e.R7$(5),e.uP7(t.assets_count),e.nnv(5),e.R7$(),e.Y8G("ngForOf",t.assets)}}function jr(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",28),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.postForm())}),e.pXf(1,3),e.k0s()}}let Xr=(()=>{class o extends d.Tv{get time_format(){return this._settings.time_format}get booking(){return this._state.form.value}get assets(){return this.booking.assets||null}get assets_count(){return this.assets?.length?this.assets.reduce((t,n)=>t+n.amount,0):0}get booking_asset(){return this.booking.booking_asset}get location(){const t=this._org.buildings.find(i=>i.id===this.booking_asset?.zone?.parent_id),n=this._org.levels.find(i=>i.id===this.booking_asset?.zone?.id);return`${n?.display_name||n?.name}${t?",":""} ${t?.address||t?.display_name||t?.name||""}`}constructor(t,n,i,s){var l;super(),l=this,this._state=t,this._org=n,this._sheet_ref=i,this._settings=s,this.show_close=!1,this.loading=this._state.loading,this.postForm=(0,h.A)(function*(){yield l._state.postForm().catch(r=>{throw(0,d.UG)(`Unable to complete booking. ${r}`),r}),l.dismiss(!0)}),this.dismiss=r=>this._sheet_ref?.dismiss(r)}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(R.nx),e.rXU(T.yb),e.rXU(J.eN,8),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["new-parking-flow-confirm"]],inputs:{show_close:"show_close"},features:[e.Vt3],decls:30,vars:21,consts:()=>{let t,n,i,s;return t=$localize`:␟6ac3300544e83db3f24ae1c1021893d886c0a744␟6045786788889963176: Confirm Parking Reservation `,n=$localize`:␟f07b4a195d4f2e886e6648ea01409e8747490a41␟3161111465515562669:Car Park`,i=$localize`:␟baacc4ba232f9320250b9871e259ccb844857f15␟3853466990357051325:${"\ufffd0\ufffd"}:INTERPOLATION: Asset(s)`,s=$localize`:␟0ad83be7464a0a2e8d100342e144bc3fbc789f9d␟3141803775366633134: Confirm `,[t,n,i,s,["close","","icon","","matRipple","",3,"click",4,"ngIf"],[1,"flex","items-center","justify-between","px-2"],[1,"text-2xl","font-medium","mb-2"],["diameter","32",4,"ngIf"],["period","",1,"flex","space-x-1","py-4","px-2"],[1,"text-success"],["details","",1,"leading-6"],[1,"flex","items-center","space-x-2"],["date",""],["time",""],["resource","","class","flex space-x-1 py-4 px-2 border-t",4,"ngIf"],["assets","","class","flex space-x-1 py-4 px-2 border-t",4,"ngIf"],[1,"p-2","w-full","border-t","border-base-200","mt-4"],["confirm","","btn","","matRipple","","class","w-full",3,"click",4,"ngIf"],["close","","icon","","matRipple","",3,"click"],["diameter","32"],["resource","",1,"flex","space-x-1","py-4","px-2","border-t"],["name",""],[4,"ngFor","ngForOf"],["features","",1,"flex","items-center","space-x-2"],["assets","",1,"flex","space-x-1","py-4","px-2","border-t"],["class","flex space-x-2",4,"ngFor","ngForOf"],[1,"flex","space-x-2"],[1,"h-5","w-5","bg-base-200","rounded-full"],["confirm","","btn","","matRipple","",1,"w-full",3,"click"]]},template:function(n,i){1&n&&(e.DNE(0,$r,3,0,"button",4),e.j41(1,"header",5)(2,"h2",6),e.pXf(3,0),e.k0s(),e.DNE(4,Pr,1,0,"mat-spinner",7),e.nI1(5,"async"),e.k0s(),e.j41(6,"section",8)(7,"app-icon",9),e.EFF(8,"done"),e.k0s(),e.j41(9,"div",10)(10,"h3"),e.EFF(11),e.k0s(),e.j41(12,"div",11)(13,"app-icon"),e.EFF(14,"calendar_today"),e.k0s(),e.j41(15,"div",12),e.EFF(16),e.nI1(17,"date"),e.k0s()(),e.j41(18,"div",11)(19,"app-icon"),e.EFF(20,"schedule"),e.k0s(),e.j41(21,"div",13),e.EFF(22),e.nI1(23,"date"),e.nI1(24,"date"),e.k0s()()()(),e.DNE(25,Dr,17,3,"section",14)(26,Lr,7,2,"section",15),e.j41(27,"footer",16),e.DNE(28,jr,2,0,"button",17),e.nI1(29,"async"),e.k0s()),2&n&&(e.Y8G("ngIf",i.show_close),e.R7$(4),e.Y8G("ngIf",e.bMT(5,8,i.loading)),e.R7$(7),e.JRh(i.booking.title||"~Untitled~"),e.R7$(5),e.JRh(e.i5U(17,10,i.booking.date,"fullDate")),e.R7$(6),e.SpI(" ",i.booking.all_day?"All Day":e.i5U(23,13,i.booking.date,i.time_format)+" - "+e.i5U(24,16,i.booking.date+60*i.booking.duration*1e3,i.time_format+" (z)")," "),e.R7$(3),e.Y8G("ngIf",null==i.booking_asset?null:i.booking_asset.id),e.R7$(),e.Y8G("ngIf",null==i.assets?null:i.assets.length),e.R7$(2),e.Y8G("ngIf",!e.bMT(29,19,i.loading)))},dependencies:[c.Sq,c.bT,E.R,F.r6,S.LG,c.Jj,c.vh],styles:["section[_ngcontent-%COMP%] > app-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-top:.3rem}h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:medium;margin:.5rem 0}\n\n/*# sourceMappingURL=parking-flow-confirm.component.ts-angular-inline--121.css.map*/"]})}return o})();var Br=p(24844);const xt=()=>({standalone:!0});function Wr(o,a){if(1&o&&(e.j41(0,"mat-option",28),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t.display_name||t.name," ")}}function Vr(o,a){1&o&&(e.j41(0,"mat-checkbox",29),e.pXf(1,8),e.k0s())}function Kr(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"div",12)(3,"label",13),e.PLo(4,0),e.nrm(5,"span"),e.YFu(),e.k0s(),e.j41(6,"mat-form-field",14)(7,"mat-select",15),e.nI1(8,"async"),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.setBuilding(i))}),e.DNE(9,Wr,2,2,"mat-option",16),e.nI1(10,"async"),e.k0s(),e.j41(11,"mat-error"),e.pXf(12,1),e.k0s()()()(),e.j41(13,"div",11)(14,"div",12)(15,"label",13),e.PLo(16,2),e.nrm(17,"span"),e.YFu(),e.k0s(),e.j41(18,"mat-form-field",14),e.nrm(19,"input",17),e.j41(20,"mat-error"),e.pXf(21,3),e.k0s()()(),e.j41(22,"div",12)(23,"label",18),e.PLo(24,4),e.nrm(25,"span"),e.YFu(),e.k0s(),e.j41(26,"a-date-field",19),e.pXf(27,5),e.k0s()()(),e.j41(28,"div",20)(29,"div",21)(30,"label",22),e.PLo(31,6),e.nrm(32,"span"),e.YFu(),e.k0s(),e.j41(33,"a-time-field",23),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.form.patchValue({date:i}))}),e.k0s()(),e.j41(34,"div",24)(35,"label",25),e.PLo(36,7),e.nrm(37,"span"),e.YFu(),e.k0s(),e.nrm(38,"a-duration-field",26),e.DNE(39,Vr,2,0,"mat-checkbox",27),e.k0s()()()}if(2&o){const t=e.XpG();e.Y8G("formGroup",t.form),e.R7$(7),e.Y8G("ngModel",e.bMT(8,11,t.building))("ngModelOptions",e.lJ4(15,xt)),e.R7$(2),e.Y8G("ngForOf",e.bMT(10,13,t.building_list)),e.R7$(24),e.Y8G("ngModel",t.form.value.date)("ngModelOptions",e.lJ4(16,xt))("use_24hr",t.use_24hr),e.R7$(5),e.Y8G("time",null==t.form||null==t.form.value?null:t.form.value.date)("max",t.max_duration)("use_24hr",t.use_24hr),e.R7$(),e.Y8G("ngIf",t.allow_all_day)}}let Yr=(()=>{class o extends d.Tv{get max_duration(){return this._settings.get("app.bookings.max_duration")||480}get allow_all_day(){return this._settings.get("app.bookings.allow_all_day")}get use_24hr(){return this._settings.get("app.use_24_hour_time")}constructor(t,n){super(),this._settings=t,this._org=n,this.building=this._org.active_building,this.building_list=this._org.building_list,this.setBuilding=i=>this._org.building=i}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(d.h$),e.rXU(T.yb))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["parking-form-details"]],inputs:{form:"form"},features:[e.Vt3],decls:1,vars:1,consts:()=>{let t,n,i,s,l,r,_,u,g;return t=$localize`:␟029554be61f13a5f5f40b24ff6a076e8cf3ce232␟5030059473688609624:Building${"\ufffd#5\ufffd"}:START_TAG_SPAN:*${"\ufffd/#5\ufffd"}:CLOSE_TAG_SPAN:`,n=$localize`:␟08e3d128bec28b1e0d78c758b98afd2af8a9b9db␟3928125525365975257:Building is required`,i=$localize`:␟cdeff056c80e8cb677a396ccfd5935d3ccacbaaa␟553839126299245827:Add Title${"\ufffd#17\ufffd"}:START_TAG_SPAN:*${"\ufffd/#17\ufffd"}:CLOSE_TAG_SPAN:`,s=$localize`:␟0c2de7385a88f7877e11c22c4e44db7f8ddfdc9c␟6959098405177292139:Meeting title is required.`,l=$localize`:␟04cfb5fd033651743bc4b9408bd52ba4ee894070␟3158758063619980932:Date${"\ufffd#25\ufffd"}:START_TAG_SPAN:*${"\ufffd/#25\ufffd"}:CLOSE_TAG_SPAN:`,r=$localize`:␟e06c2195d60fdee7b259bd3ff16eb3d594c42b2b␟608708688936992021: Date and time must be in the future `,_=$localize`:␟34a7595cdc15925514038224946986bfd90dc0ed␟3039786638368843634:Start Time${"\ufffd#32\ufffd"}:START_TAG_SPAN:*${"\ufffd/#32\ufffd"}:CLOSE_TAG_SPAN:`,u=$localize`:␟85d5c3a89bab9a7475a7db095089e161586cb7a1␟5960185837188220843:End Time${"\ufffd#37\ufffd"}:START_TAG_SPAN:*${"\ufffd/#37\ufffd"}:CLOSE_TAG_SPAN:`,g=$localize`:␟d7f43e20f3a729fa3de32bc7a1f709ccd722eae5␟835486935962207481: All Day `,[t,n,i,s,l,r,_,u,g,[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"flex","items-center","flex-wrap","sm:space-x-2"],[1,"flex-1","min-w-[256px]"],["for","title"],["appearance","outline",1,"w-full"],[3,"ngModelChange","ngModel","ngModelOptions"],[3,"value",4,"ngFor","ngForOf"],["matInput","","name","title","formControlName","title","placeholder","e.g. Team Meeting"],["for","date"],["name","date","formControlName","date"],[1,"flex","items-center","space-x-2"],[1,"flex-1","w-1/3"],["for","start-time"],["name","start-time",3,"ngModelChange","ngModel","ngModelOptions","use_24hr"],[1,"flex-1","w-1/3","relative"],["for","end-time"],["name","end-time","formControlName","duration",3,"time","max","use_24hr"],["formControlName","all_day","class","absolute -top-2 right-0",4,"ngIf"],[3,"value"],["formControlName","all_day",1,"absolute","-top-2","right-0"]]},template:function(n,i){1&n&&e.DNE(0,Kr,40,17,"div",9),2&n&&e.Y8G("ngIf",i.form)},dependencies:[c.Sq,c.bT,F.wT,I.rl,I.TL,te.VO,X.fg,D.So,de.G,ae.y,me.t,m.me,m.BC,m.cb,m.vS,m.j4,m.JD,c.Jj]})}return o})(),Ur=(()=>{class o extends d.Tv{get form(){return this._state.form}constructor(t,n,i,s){super(),this._state=t,this._settings=n,this._router=i,this._bottom_sheet=s,this.hide_block={},this.clearForm=()=>this._state.resetForm(),this.viewConfirm=()=>{if(!this.form.valid)return(0,d.UG)(`Some fields are invalid. [${(0,d.F7)(this.form).join(", ")}]`);this.sheet_ref=this._bottom_sheet.open(Xr),this.sheet_ref.instance.show_close=!0,this.sheet_ref.afterDismissed().subscribe(l=>{l&&(this._router.navigate(["/book","new-parking","success"]),this._state.setView("success"))})}}ngOnInit(){this._state.setOptions({type:"parking"})}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(R.nx),e.rXU(d.h$),e.rXU(b.Ix),e.rXU(J.VK))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["parking-flow-form"]],features:[e.Vt3],decls:34,vars:8,consts:()=>{let t,n,i,s,l;return t=$localize`:␟1a35d8abd8af5fbdc560fef43534a449dee57c33␟6157089537932930617: ${"\ufffd0\ufffd"}:INTERPOLATION: Parking Reservation `,n=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,i=$localize`:␟52d92107e6b2e533468a728409354191bc7b0618␟8946906119075338535:Space`,s=$localize`:␟7b837f0569edc83611ec018993bf131599b941b6␟425357839768260226: Confirm Reservation `,l=$localize`:␟a6bac7e54de03807f0b5486f4f9f9add5ec00fb2␟1889608407849557875: ${"\ufffd0\ufffd"}:INTERPOLATION: Form `,[t,n,i,s,l,[1,"h-full","w-full","bg-base-200","overflow-auto"],[1,"max-w-full","w-[48rem]","mx-auto","sm:my-4","bg-base-100","border","border-base-200"],[1,"w-full","p-4","sm:py-4","sm:px-16","text-2xl","font-medium","border-b","border-base-200"],[1,"p-0","sm:py-4","sm:px-16","divide-y","divide-base-200","space-y-2",3,"formGroup"],[1,"p-2"],[1,"space-x-2","flex","items-center"],[1,"bg-base-200","rounded-full","h-6","w-6","flex","items-center","justify-center"],[1,"text-xl"],[1,"flex-1","w-px"],["icon","","matRipple","",3,"click"],[1,"overflow-hidden"],[1,"mt-4",3,"form"],["formControlName","resources"],[1,"flex","flex-col","sm:flex-row","items-center","sm:space-x-2","p-2"],["btn","","matRipple","","confirm","",1,"mb-2","sm:mb-0","w-full","sm:w-auto",3,"click"],["btn","","matRipple","","clear-form","",1,"inverse","w-full","sm:w-auto",3,"click"]]},template:function(n,i){1&n&&(e.j41(0,"div",5)(1,"div",6)(2,"h2",7),e.pXf(3,0),e.k0s(),e.j41(4,"form",8)(5,"section",9)(6,"h3",10)(7,"div",11),e.EFF(8," 1 "),e.k0s(),e.j41(9,"div",12),e.pXf(10,1),e.k0s(),e.nrm(11,"div",13),e.j41(12,"button",14),e.bIt("click",function(){return i.hide_block.details=!i.hide_block.details}),e.j41(13,"app-icon"),e.EFF(14),e.k0s()()(),e.j41(15,"div",15),e.nrm(16,"parking-form-details",16),e.k0s()(),e.j41(17,"section",9)(18,"h3",10)(19,"div",11),e.EFF(20," 2 "),e.k0s(),e.j41(21,"div",12),e.pXf(22,2),e.k0s(),e.nrm(23,"div",13),e.j41(24,"button",14),e.bIt("click",function(){return i.hide_block.space=!i.hide_block.space}),e.j41(25,"app-icon"),e.EFF(26),e.k0s()()(),e.j41(27,"div",15),e.nrm(28,"parking-space-list-field",17),e.k0s()(),e.j41(29,"section",18)(30,"button",19),e.bIt("click",function(){return i.viewConfirm()}),e.pXf(31,3),e.k0s(),e.j41(32,"button",20),e.bIt("click",function(){return i.clearForm()}),e.pXf(33,4),e.k0s()()()()()),2&n&&(e.R7$(3),e.uP7(i.form.value.id?"Edit":"Book"),e.nnv(3),e.R7$(),e.Y8G("formGroup",i.form),e.R7$(10),e.JRh(i.hide_block.details?"expand_more":"expand_less"),e.R7$(),e.Y8G("@show",i.hide_block.details?"hide":"show"),e.R7$(),e.Y8G("form",i.form),e.R7$(10),e.JRh(i.hide_block.space?"expand_more":"expand_less"),e.R7$(),e.Y8G("@show",i.hide_block.space?"hide":"show"),e.R7$(6),e.uP7(i.form.value.id?"Reset":"Clear"),e.nnv(33))},dependencies:[E.R,F.r6,Br.I,m.qT,m.BC,m.cb,m.j4,m.JD,Yr],data:{animation:[d.Ft]}})}return o})();const zr=()=>["/"];let Jr=(()=>{class o{get location(){const t=this.last_event?.extension_data?.booking_asset;return t&&t.zone?`, ${t.zone.display_name||t.zone.name||t.zone.id}`:""}get last_event(){return this._state.last_success}get time_format(){return this._settings.time_format}constructor(t,n){this._state=t,this._settings=n}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(R.nx),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["parking-flow-success"]],decls:14,vars:16,consts:()=>{let t,n,i;return t=$localize`:␟89673c29a2b2fc5cf95cc874cfb1744844dab556␟687518245434887327: Parking Space Confirmed! `,n=$localize`:␟10559c4bdb7ab46dc0a827866ec96a5ff1b017c7␟8284353961713581605: Your ${"\ufffd#6\ufffd"}:START_TAG_SPAN: parking space reservation for ${"\ufffd0\ufffd"}:INTERPOLATION: at ${"\ufffd1\ufffd"}:INTERPOLATION_1:, ${"\ufffd/#6\ufffd"}:CLOSE_TAG_SPAN:has been successfully booked for the ${"\ufffd2\ufffd"}:INTERPOLATION_2: at ${"\ufffd3\ufffd"}:INTERPOLATION_3:-${"\ufffd4\ufffd"}:INTERPOLATION_4:. `,i=$localize`:␟44c59d98706bc456a0feecbb41601eec38da367e␟1969482015227334006: Great, thanks! `,[t,n,i,[1,"absolute","inset-0","bg-base-100","flex","flex-col","z-50","overflow-auto"],[1,"flex-1","flex","flex-col","items-center","justify-center","space-y-2","p-8"],[1,"text-2xl","font-medium"],[1,"text-center","max-w-[32rem]"],["src","assets/icons/parking-success.svg"],[1,"sticky","bottom-0","bg-base-100","p-2","w-full","border-t","border-base-200","mt-4","flex","items-center","justify-center"],["btn","","matRipple","",1,"w-full","max-w-[32rem]",3,"routerLink"]]},template:function(n,i){1&n&&(e.j41(0,"div",3)(1,"main",4)(2,"h2",5),e.pXf(3,0),e.k0s(),e.j41(4,"p",6),e.PLo(5,1),e.nrm(6,"span"),e.nI1(7,"date"),e.nI1(8,"date"),e.nI1(9,"date"),e.YFu(),e.k0s(),e.nrm(10,"img",7),e.k0s(),e.j41(11,"footer",8)(12,"a",9),e.pXf(13,2),e.k0s()()()),2&n&&(e.R7$(9),e.uP7(i.last_event.asset_name)(i.location)(e.i5U(7,6,i.last_event.date,"mediumDate"))(e.i5U(8,9,i.last_event.date,i.time_format))(e.i5U(9,12,i.last_event.date+60*i.last_event.duration*1e3,i.time_format)),e.nnv(5),e.R7$(3),e.Y8G("routerLink",e.lJ4(15,zr)))},dependencies:[F.r6,b.Wk,c.vh]})}return o})();function qr(o,a){1&o&&e.nrm(0,"parking-flow-success")}function Hr(o,a){1&o&&e.nrm(0,"parking-flow-confirm")}function Zr(o,a){1&o&&e.nrm(0,"parking-flow-form")}let Qr=(()=>{class o extends d.Tv{get view(){return this._state.view}get last_success(){return this._state.last_success}constructor(t,n){super(),this._state=t,this._route=n}ngOnInit(){this._state.loadForm(),this._state.form||this._state.newForm(),this._state.setOptions({type:"parking"}),this._state.form.patchValue({booking_type:"parking"}),this.subscription("route.params",this._route.paramMap.subscribe(t=>{t.has("step")&&this._state.setView(t.get("step"))})),this.subscription("route.query",this._route.queryParamMap.subscribe(t=>{t.has("success")&&this._state.setView("success")}))}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(R.nx),e.rXU(b.nX))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["placeos-new-parking-flow"]],features:[e.Vt3],decls:4,vars:3,consts:[[1,"bg-base-100","h-full","w-full","z-50",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(n,i){1&n&&(e.j41(0,"div",0),e.DNE(1,qr,1,0,"parking-flow-success",1)(2,Hr,1,0,"parking-flow-confirm",1)(3,Zr,1,0,"parking-flow-form",2),e.k0s()),2&n&&(e.Y8G("ngSwitch",i.view),e.R7$(),e.Y8G("ngSwitchCase","success"),e.R7$(),e.Y8G("ngSwitchCase","confirm"))},dependencies:[c.ux,c.e1,c.fG,vt,Ur,Jr],styles:["[_nghost-%COMP%]{height:100%;width:100%}\n\n/*# sourceMappingURL=new-parking-flow.component.ts-angular-inline--120.css.map*/"]})}return o})();const e_=()=>["/"];let t_=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["code-flow-success"]],decls:13,vars:11,consts:[[1,"absolute","inset-0","bg-base-100","flex","flex-col","z-50"],[1,"flex-1","flex","flex-col","items-center","justify-center","space-y-2","p-8"],[1,"text-2xl","font-medium"],["src","assets/icons/success.svg"],[1,"text-center","max-w-[32rem]"],[1,"p-2","w-full","border-t","border-base-200","mt-4","flex","items-center","justify-center"],["btn","","matRipple","",1,"w-full","max-w-[32rem]",3,"routerLink"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"main",1)(2,"h2",2),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.nrm(5,"img",3),e.j41(6,"p",4),e.EFF(7),e.nI1(8,"translate"),e.k0s()(),e.j41(9,"footer",5)(10,"a",6),e.EFF(11),e.nI1(12,"translate"),e.k0s()()()),2&n&&(e.R7$(3),e.SpI(" ",e.bMT(4,4,"WPA.RESOURCE_CHECKED_IN")," "),e.R7$(4),e.SpI(" ",e.bMT(8,6,"WPA.CHECKED_IN")," "),e.R7$(3),e.Y8G("routerLink",e.lJ4(10,e_)),e.R7$(),e.SpI(" ",e.bMT(12,8,"WPA.BOOKING_DONE_CONTINUE")," "))},dependencies:[F.r6,b.Wk,Ee.D9]})}return o})();const n_=()=>["/"],o_=()=>["/book","code"],St=o=>({asset_id:o}),i_=()=>["/book","new-desk"];function s_(o,a){1&o&&(e.qex(0),e.EFF(1," Booking has not started yet. Please try again once the booking has commenced. "),e.bVm())}function a_(o,a){1&o&&(e.qex(0),e.EFF(1," You have booking with a difference resource. "),e.bVm())}function l_(o,a){1&o&&(e.qex(0),e.EFF(1," You do not have a booking. Would you like to book the set resource? "),e.bVm())}function r_(o,a){if(1&o&&(e.j41(0,"a",11),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o){const t=e.XpG();e.Y8G("routerLink",e.lJ4(5,o_))("queryParams",e.eq3(6,St,t.asset_id)),e.R7$(),e.SpI(" ",e.bMT(2,3,"WPA.TRY_AGAIN")," ")}}function __(o,a){if(1&o&&(e.j41(0,"a",11),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o){const t=e.XpG();e.Y8G("routerLink",e.lJ4(5,i_))("queryParams",e.eq3(6,St,t.asset_id)),e.R7$(),e.SpI(" ",e.bMT(2,3,"WPA.BOOK")," ")}}let c_=(()=>{class o extends d.Tv{constructor(t,n){super(),this._route=t,this._state=n,this.type="other",this.asset=null,this.asset_id=""}ngOnInit(){this.subscription("route.query",this._route.queryParamMap.subscribe(t=>{this.type=t.get("type"),this.asset_id=t.get("asset_id")}))}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(b.nX),e.rXU(R.nx))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["code-flow-success"]],features:[e.Vt3],decls:17,vars:13,consts:[[1,"absolute","inset-0","bg-base-100","flex","flex-col","z-50"],[1,"flex-1","flex","flex-col","items-center","justify-center","space-y-2","p-8"],[1,"text-2xl","font-medium"],[1,"py-4"],["src","assets/icons/not-found.svg",1,"h-64"],[1,"text-center","max-w-[32rem]",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"p-2","w-full","border-t","border-base-200","mt-4","flex","items-center","justify-center","space-x-2"],["btn","","matRipple","","class","w-full max-w-[32rem]",3,"routerLink","queryParams",4,"ngIf"],["btn","","matRipple","",1,"w-full","max-w-[32rem]","inverse",3,"routerLink"],["btn","","matRipple","",1,"w-full","max-w-[32rem]",3,"routerLink","queryParams"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"main",1)(2,"h2",2),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"div",3),e.nrm(6,"img",4),e.k0s(),e.j41(7,"p",5),e.DNE(8,s_,2,0,"ng-container",6)(9,a_,2,0,"ng-container",6)(10,l_,2,0,"ng-container",7),e.k0s()(),e.j41(11,"footer",8),e.DNE(12,r_,3,8,"a",9)(13,__,3,8,"a",9),e.j41(14,"a",10),e.EFF(15),e.nI1(16,"translate"),e.k0s()()()),2&n&&(e.R7$(3),e.SpI(" ",e.bMT(4,8,"WPA.RESOURCE_CHECKED_IN_FAILED")," "),e.R7$(4),e.Y8G("ngSwitch",i.type),e.R7$(),e.Y8G("ngSwitchCase","not_started"),e.R7$(),e.Y8G("ngSwitchCase","wrong_resource"),e.R7$(3),e.Y8G("ngIf","not_started"===i.type),e.R7$(),e.Y8G("ngIf","no_booking"===i.type),e.R7$(),e.Y8G("routerLink",e.lJ4(12,n_)),e.R7$(),e.SpI(" ",e.bMT(16,10,"COMMON.CONTINUE")," "))},dependencies:[c.bT,c.ux,c.e1,c.fG,F.r6,b.Wk,Ee.D9]})}return o})();function d_(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",17),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.dismiss())}),e.j41(1,"app-icon"),e.EFF(2,"close"),e.k0s()()}}function m_(o,a){1&o&&e.nrm(0,"mat-spinner",18)}function p_(o,a){if(1&o&&(e.qex(0),e.j41(1,"div",22)(2,"app-icon"),e.EFF(3,"arrow_upward"),e.k0s(),e.j41(4,"div"),e.EFF(5),e.k0s()(),e.bVm()),2&o){const t=a.$implicit;e.R7$(5),e.JRh(t)}}function u_(o,a){if(1&o&&(e.j41(0,"section",19)(1,"app-icon",8),e.EFF(2,"done"),e.k0s(),e.j41(3,"div",9)(4,"h3",20),e.EFF(5),e.k0s(),e.j41(6,"div",10)(7,"app-icon"),e.EFF(8,"place"),e.k0s(),e.j41(9,"div"),e.EFF(10),e.k0s()(),e.DNE(11,p_,6,1,"ng-container",21),e.k0s()()),2&o){const t=e.XpG();e.R7$(5),e.SpI(" ",(null==t.booking_asset?null:t.booking_asset.name)||(null==t.booking_asset?null:t.booking_asset.id)||""," "),e.R7$(5),e.JRh(t.location),e.R7$(),e.Y8G("ngForOf",t.booking_asset.features)}}function f_(o,a){if(1&o&&(e.j41(0,"div",25)(1,"div",26),e.EFF(2),e.k0s(),e.j41(3,"span"),e.EFF(4),e.k0s()()),2&o){const t=a.$implicit;e.R7$(2),e.SpI(" ",t.amount," "),e.R7$(2),e.JRh(t.name)}}function g_(o,a){if(1&o&&(e.j41(0,"section",23)(1,"app-icon",8),e.EFF(2,"done"),e.k0s(),e.j41(3,"div",9)(4,"h3"),e.pXf(5,1),e.k0s(),e.DNE(6,f_,5,2,"div",24),e.k0s()()),2&o){const t=e.XpG();e.R7$(5),e.uP7(t.assets_count),e.nnv(5),e.R7$(),e.Y8G("ngForOf",t.assets)}}function h_(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",27),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.postForm())}),e.pXf(1,2),e.k0s()}}let wt=(()=>{class o extends d.Tv{get time_format(){return this._settings.time_format}get booking(){return this._state.form.value}get assets(){return this.booking.assets||null}get assets_count(){return this.assets?.length?this.assets.reduce((t,n)=>t+n.amount,0):0}get booking_asset(){return this.booking.booking_asset}get location(){const t=this._org.buildings.find(i=>i.id===this.booking_asset?.zone?.parent_id),n=this._org.levels.find(i=>i.id===this.booking_asset?.zone?.id);return`${n?.display_name||n?.name}${t?",":""} ${t?.address||t?.display_name||t?.name||""}`}constructor(t,n,i,s){var l;super(),l=this,this._state=t,this._org=n,this._sheet_ref=i,this._settings=s,this.show_close=!1,this.loading=this._state.loading,this.postForm=(0,h.A)(function*(){try{(yield l._state.options.pipe((0,W.s)(1)).toPromise())?.group?yield l._state.postFormForGroup():yield l._state.postForm(),l.dismiss(!0)}catch(r){(0,d.UG)(r)}}),this.dismiss=r=>this._sheet_ref?.dismiss(r)}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(R.nx),e.rXU(T.yb),e.rXU(J.eN,8),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["locker-flow-confirm"]],inputs:{show_close:"show_close"},features:[e.Vt3],decls:30,vars:21,consts:()=>{let t,n,i;return t=$localize`:␟5cb1d8d18d99e0e2c93fc6b4d5da4de04b3f6df9␟5263686136994697433: Confirm Locker Booking `,n=$localize`:␟baacc4ba232f9320250b9871e259ccb844857f15␟3853466990357051325:${"\ufffd0\ufffd"}:INTERPOLATION: Asset(s)`,i=$localize`:␟0ad83be7464a0a2e8d100342e144bc3fbc789f9d␟3141803775366633134: Confirm `,[t,n,i,["icon","","name","close-locker-confirm","matRipple","",3,"click",4,"ngIf"],[1,"flex","items-center","justify-between","px-2"],[1,"text-2xl","font-medium","mb-2"],["diameter","32",4,"ngIf"],["period","",1,"flex","space-x-1","py-4","px-2"],[1,"text-success"],["details","",1,"leading-6"],[1,"flex","items-center","space-x-2"],["date",""],["time",""],["locker","","class","flex space-x-1 py-4 px-2 border-t",4,"ngIf"],["assets","","class","flex space-x-1 py-4 px-2 border-t",4,"ngIf"],[1,"p-2","w-full","border-t","border-base-200","mt-4"],["name","confirm-locker","btn","","matRipple","","class","w-full",3,"click",4,"ngIf"],["icon","","name","close-locker-confirm","matRipple","",3,"click"],["diameter","32"],["locker","",1,"flex","space-x-1","py-4","px-2","border-t"],["name",""],[4,"ngFor","ngForOf"],["features","",1,"flex","items-center","space-x-2"],["assets","",1,"flex","space-x-1","py-4","px-2","border-t"],["class","flex space-x-2",4,"ngFor","ngForOf"],[1,"flex","space-x-2"],[1,"h-5","w-5","bg-base-200","rounded-full"],["name","confirm-locker","btn","","matRipple","",1,"w-full",3,"click"]]},template:function(n,i){1&n&&(e.DNE(0,d_,3,0,"button",3),e.j41(1,"header",4)(2,"h2",5),e.pXf(3,0),e.k0s(),e.DNE(4,m_,1,0,"mat-spinner",6),e.nI1(5,"async"),e.k0s(),e.j41(6,"section",7)(7,"app-icon",8),e.EFF(8,"done"),e.k0s(),e.j41(9,"div",9)(10,"h3"),e.EFF(11),e.k0s(),e.j41(12,"div",10)(13,"app-icon"),e.EFF(14,"calendar_today"),e.k0s(),e.j41(15,"div",11),e.EFF(16),e.nI1(17,"date"),e.k0s()(),e.j41(18,"div",10)(19,"app-icon"),e.EFF(20,"schedule"),e.k0s(),e.j41(21,"div",12),e.EFF(22),e.nI1(23,"date"),e.nI1(24,"date"),e.k0s()()()(),e.DNE(25,u_,12,3,"section",13)(26,g_,7,2,"section",14),e.j41(27,"footer",15),e.DNE(28,h_,2,0,"button",16),e.nI1(29,"async"),e.k0s()),2&n&&(e.Y8G("ngIf",i.show_close),e.R7$(4),e.Y8G("ngIf",e.bMT(5,8,i.loading)),e.R7$(7),e.JRh(i.booking.title||"~Untitled~"),e.R7$(5),e.JRh(e.i5U(17,10,i.booking.date,"fullDate")),e.R7$(6),e.SpI(" ",i.booking.all_day?"All Day":e.i5U(23,13,i.booking.date,i.time_format)+" - "+e.i5U(24,16,i.booking.date+60*i.booking.duration*1e3,i.time_format+" (z)")," "),e.R7$(3),e.Y8G("ngIf",null==i.booking_asset?null:i.booking_asset.id),e.R7$(),e.Y8G("ngIf",null==i.assets?null:i.assets.length),e.R7$(2),e.Y8G("ngIf",!e.bMT(29,19,i.loading)))},dependencies:[c.Sq,c.bT,E.R,F.r6,S.LG,c.Jj,c.vh],styles:["section[_ngcontent-%COMP%] > app-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-top:.3rem}h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:medium;margin:.5rem 0}\n\n/*# sourceMappingURL=locker-flow-confirm.component.ts-angular-inline--123.css.map*/"]})}return o})();var F_=p(71511);const Nt=()=>({standalone:!0});function C_(o,a){if(1&o&&(e.j41(0,"mat-option",28),e.EFF(1),e.k0s()),2&o){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t.display_name||t.name," ")}}function v_(o,a){if(1&o&&(e.j41(0,"section",9)(1,"h3",10)(2,"div",11),e.EFF(3),e.nI1(4,"async"),e.k0s(),e.j41(5,"div",12),e.pXf(6,6),e.k0s()(),e.nrm(7,"locker-list-field",29),e.k0s()),2&o){let t;const n=e.XpG(2);e.R7$(3),e.SpI(" ",null!=(t=e.bMT(4,1,n.options))&&t.group?3:2," ")}}function b_(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",8)(1,"section",9)(2,"h3",10)(3,"div",11),e.EFF(4," 1 "),e.k0s(),e.j41(5,"div",12),e.pXf(6,0),e.k0s()(),e.j41(7,"div",13)(8,"div",14)(9,"label",15),e.PLo(10,1),e.nrm(11,"span"),e.YFu(),e.k0s(),e.j41(12,"mat-form-field",16)(13,"mat-select",17),e.mxI("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.DH7(s.building,i)||(s.building=i),e.Njj(i)}),e.DNE(14,C_,2,2,"mat-option",18),e.nI1(15,"async"),e.k0s()()(),e.j41(16,"div",14)(17,"label",15),e.PLo(18,2),e.nrm(19,"span"),e.YFu(),e.k0s(),e.j41(20,"a-date-field",19),e.pXf(21,3),e.k0s()()(),e.j41(22,"div",20)(23,"div",21)(24,"label",22),e.PLo(25,4),e.nrm(26,"span"),e.YFu(),e.k0s(),e.j41(27,"a-time-field",23),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.form.patchValue({date:i}))}),e.k0s()(),e.j41(28,"div",24)(29,"label",25),e.PLo(30,5),e.nrm(31,"span"),e.YFu(),e.k0s(),e.nrm(32,"a-duration-field",26),e.k0s()()(),e.DNE(33,v_,8,3,"section",27),e.k0s()}if(2&o){let t;const n=e.XpG();e.Y8G("formGroup",n.form),e.R7$(),e.AVh("!border-none",n.allow_groups),e.R7$(12),e.R50("ngModel",n.building),e.Y8G("ngModelOptions",e.lJ4(19,Nt)),e.R7$(),e.Y8G("ngForOf",e.bMT(15,17,n.buildings)),e.R7$(13),e.Y8G("ngModel",n.form.value.date)("ngModelOptions",e.lJ4(20,Nt))("use_24hr",n.use_24hr)("disabled",n.form.value.duration>1439),e.R7$(5),e.Y8G("time",null==(t=n.form.get("date"))?null:t.value)("max",600)("min",60)("step",60)("use_24hr",n.use_24hr)("custom_options",n.custom_durations),e.R7$(),e.Y8G("ngIf",n.form.contains("resources"))}}let E_=(()=>{class o extends d.Tv{get building(){return this._org.building}set building(t){this._org.building=t}get use_24hr(){return this._settings.get("app.use_24_hour_time")}constructor(t,n,i){super(),this._state=t,this._org=n,this._settings=i,this.find=new e.bkB,this.buildings=this._org.building_list,this.levels=this._org.active_levels,this.options=this._state.options,this.features=this._state.features,this.from_id=!1,this.custom_durations=[],this.recurrence_options=["daily","weekly","monthly"],this.setOptions=s=>this._state.setOptions(s),this.setFeature=(s,l)=>this._state.setFeature(s,l)}ngOnChanges(t){t.form&&this.form&&(this.subscription("change",this.form.get("resources")?.valueChanges?.subscribe(n=>n?.length?this.setBookingAsset(n[0]):"")),this.subscription("date",this.form.get("date")?.valueChanges?.subscribe(n=>this._setCustomDateOptions())),this._setCustomDateOptions())}_setCustomDateOptions(){for(const t of[1,2,3,4,5,6,7])this.custom_durations.push(24*t*60)}setBookingAsset(t){this._state.form.patchValue({asset_id:void 0}),t&&(this.selected_locker=t,this._state.form.patchValue({asset_id:t?.id,asset_name:t.name,map_id:t?.bank_id||t?.id,description:t.name,booking_type:"locker",zones:[this.building.id],booking_asset:t}))}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(R.nx),e.rXU(T.yb),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["new-locker-form-details"]],inputs:{form:"form"},outputs:{find:"find"},features:[e.Vt3,e.OA$],decls:1,vars:1,consts:()=>{let t,n,i,s,l,r,_;return t=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,n=$localize`:␟029554be61f13a5f5f40b24ff6a076e8cf3ce232␟5030059473688609624:Building${"\ufffd#11\ufffd"}:START_TAG_SPAN:*${"\ufffd/#11\ufffd"}:CLOSE_TAG_SPAN:`,i=$localize`:␟04cfb5fd033651743bc4b9408bd52ba4ee894070␟3158758063619980932:Date${"\ufffd#19\ufffd"}:START_TAG_SPAN:*${"\ufffd/#19\ufffd"}:CLOSE_TAG_SPAN:`,s=$localize`:␟407bcc42df8640bf3b85c58145c8d24572bb47b6␟6682406734296000735: Date and time must be in the future `,l=$localize`:␟02d39ddac5bbf95c424df03d5f0d22cc257556bd␟4735431816432396893: Start Time${"\ufffd#26\ufffd"}:START_TAG_SPAN:*${"\ufffd/#26\ufffd"}:CLOSE_TAG_SPAN:`,r=$localize`:␟96ca8377bef76dbcd3eb3b4d39e5414763c7033b␟7899923133926994657: End Time${"\ufffd#31\ufffd"}:START_TAG_SPAN:*${"\ufffd/#31\ufffd"}:CLOSE_TAG_SPAN:`,_=$localize`:␟cfeb28f668205a4c947451135df7c73fc4761a36␟2574467213728266360:Locker`,[t,n,i,s,l,r,_,["class","p-0 sm:py-4 sm:px-16 divide-y divide-base-200 space-y-2",3,"formGroup",4,"ngIf"],[1,"p-0","sm:py-4","sm:px-16","divide-y","divide-base-200","space-y-2",3,"formGroup"],[1,"p-2"],[1,"space-x-2","flex","items-center","mb-4"],[1,"bg-base-200","rounded-full","h-6","w-6","flex","items-center","justify-center"],[1,"text-xl"],[1,"flex","items-center","flex-wrap","sm:space-x-2"],[1,"flex-1","min-w-[256px]"],["for","date"],["appearance","outline",1,"w-full"],["placeholder","Select Building",3,"ngModelChange","ngModel","ngModelOptions"],[3,"value",4,"ngFor","ngForOf"],["name","date","formControlName","date"],[1,"flex","items-center","space-x-2"],[1,"flex-1","w-1/3"],["for","start-time"],["name","start-time",3,"ngModelChange","ngModel","ngModelOptions","use_24hr","disabled"],[1,"flex-1","w-1/3","relative"],["for","end-time"],["name","end-time","formControlName","duration",3,"time","max","min","step","use_24hr","custom_options"],["class","p-2",4,"ngIf"],[3,"value"],["formControlName","resources"]]},template:function(n,i){1&n&&e.DNE(0,b_,34,21,"div",7),2&n&&e.Y8G("ngIf",i.form)},dependencies:[c.Sq,c.bT,F.wT,I.rl,te.VO,de.G,ae.y,me.t,F_.g,m.BC,m.cb,m.vS,m.j4,m.JD,c.Jj],encapsulation:2})}return o})(),R_=(()=>{class o{get form(){return this._state.form}constructor(t,n,i,s,l){this._state=t,this._router=n,this._org=i,this._bottom_sheet=s,this._settings=l,this.level="",this.levels=[],this.clearForm=()=>{this.level=this._org.building.id,this._state.clearForm()},this.viewConfirm=()=>{if(!this.form.valid)return(0,d.UG)(`Some fields are invalid. [${(0,d.F7)(this.form).join(", ")}]`);this.sheet_ref=this._bottom_sheet.open(wt),this.sheet_ref.instance.show_close=!0,this.sheet_ref.afterDismissed().subscribe(r=>{r&&(this._router.navigate(["/book","locker","success"]),this._state.setView("success"))})}}ngOnInit(){var t=this;return(0,h.A)(function*(){yield t._org.initialised.pipe((0,N.$)(n=>n)),yield t._org.active_levels.pipe((0,N.$)(n=>n?.length>0)),t._state.setOptions({type:"locker"}),t.level=t._org.building?.id,t.levels=[{id:t._org.building?.id,name:"Any Level"},...t._org.levelsForBuilding(t._org.building)],(0,Oe.A)(t.form.value.date,Date.now())&&t.form.patchValue({date:(0,Mt.A)(Date.now()).valueOf()})})()}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(R.nx),e.rXU(b.Ix),e.rXU(T.yb),e.rXU(J.VK),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["locker-flow-form"]],decls:9,vars:1,consts:()=>{let t,n;return t=$localize`:␟ecdd561f3cc9dadc3395a6718c34fe2eb8523cff␟7333761466495468987: Book Locker `,n=$localize`:␟3cc63e7ab039b2d8a39ee9e99b0856f8d954bb09␟8662817993552634890: Confirm Locker `,[t,n,[1,"h-full","w-full","bg-base-200","overflow-auto"],[1,"max-w-full","w-[48rem]","mx-auto","sm:my-4","bg-base-100","border","border-base-200"],[1,"w-full","p-4","sm:py-4","sm:px-16","text-2xl","font-medium","border-b","border-base-200"],[3,"form"],[1,"sm:mb-2","border-b","border-base-200","w-full"],[1,"flex","flex-col","sm:flex-row","items-center","sm:space-x-2","p-2","sm:px-16","sm:mb-2"],["btn","","name","open-locker-confirm","matRipple","","confirm","",1,"w-full","sm:w-auto",3,"click"]]},template:function(n,i){1&n&&(e.j41(0,"div",2)(1,"div",3)(2,"h2",4),e.pXf(3,0),e.k0s(),e.nrm(4,"new-locker-form-details",5)(5,"div",6),e.j41(6,"section",7)(7,"button",8),e.bIt("click",function(){return i.viewConfirm()}),e.pXf(8,1),e.k0s()()()()),2&n&&(e.R7$(4),e.Y8G("form",i.form))},dependencies:[F.r6,E_],encapsulation:2})}return o})();const k_=()=>["/"];function O_(o,a){if(1&o&&(e.PLo(0,1,1),e.nrm(1,"span",16),e.YFu()),2&o){const t=e.XpG();e.R7$(),e.uP7((null==t.last_event||null==t.last_event.attendees?null:t.last_event.attendees.length)+1),e.nnv(0)}}function T_(o,a){if(1&o&&(e.PLo(0,1,2),e.nrm(1,"span",17),e.YFu()),2&o){const t=e.XpG();e.R7$(),e.uP7(null==t.last_event||null==t.last_event.extension_data||null==t.last_event.extension_data.assets?null:t.last_event.extension_data.assets.length),e.nnv(0)}}function M_(o,a){if(1&o&&(e.j41(0,"div",18)(1,"a",19),e.nI1(2,"sanitize"),e.nrm(3,"img",20),e.j41(4,"span"),e.pXf(5,3),e.k0s()(),e.j41(6,"a",21),e.nI1(7,"sanitize"),e.nrm(8,"img",22),e.j41(9,"span"),e.pXf(10,4),e.k0s()(),e.j41(11,"a",23),e.nI1(12,"safe"),e.j41(13,"app-icon",24),e.EFF(14,"download"),e.k0s(),e.j41(15,"span"),e.pXf(16,5),e.k0s()()()),2&o){const t=e.XpG();e.R7$(),e.Y8G("href",e.i5U(2,3,t.outlook_link,"url"),e.B4B),e.R7$(5),e.Y8G("href",e.i5U(7,6,t.google_link,"url"),e.B4B),e.R7$(5),e.Y8G("href",e.i5U(12,9,t.ical_link,"url"),e.B4B)}}let I_=(()=>{class o{get location(){const t=this.last_event?.extension_data?.booking_asset;return t&&t.zone?`, ${t.zone.display_name||t.zone.name||t.zone.id}`:""}get last_event(){return this._state.last_success}get show_links(){return this._settings.get("app.lockers.show_calendar_links")}get time_format(){return this._settings.time_format}constructor(t,n){this._state=t,this._settings=n,this.outlook_link="",this.google_link="",this.ical_link="",this.viewCalendarLinks=()=>this._state.openBookingLinkModal()}ngOnInit(){this.outlook_link=(0,ue.gP)(this.last_event),this.google_link=(0,ue.dB)(this.last_event),this.ical_link=(0,ue._V)(this.last_event)}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(R.nx),e.rXU(d.h$))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["locker-flow-success"]],decls:16,vars:20,consts:()=>{let t,n,i,s,l,r;return t=$localize`:␟56ae814b08614e0ea7d03f8c2f6deb8385091857␟3615288463984354959: ${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd1\ufffd"}:INTERPOLATION_1: Booked! `,n=$localize`:␟9631ac199ec721b8eff7a017d47c099527c27338␟5403951825450100006: Your ${"\ufffd*7:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_SPAN: group of ${"\ufffd0:1\ufffd"}:INTERPOLATION: ${"[\ufffd/#1:1\ufffd\ufffd/*7:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*8:2\ufffd]"}:CLOSE_TAG_SPAN: locker${"\ufffd0\ufffd"}:INTERPOLATION_1: has been successfully booked ${"\ufffd*8:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_SPAN_1: including ${"\ufffd0:2\ufffd"}:INTERPOLATION_2: asset(s) ${"[\ufffd/#1:1\ufffd\ufffd/*7:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*8:2\ufffd]"}:CLOSE_TAG_SPAN: for the ${"\ufffd1\ufffd"}:INTERPOLATION_3: at ${"\ufffd2\ufffd"}:INTERPOLATION_4:-${"\ufffd3\ufffd"}:INTERPOLATION_5:. `,n=e.k04(n),i=$localize`:␟44c59d98706bc456a0feecbb41601eec38da367e␟1969482015227334006: Great, thanks! `,s=$localize`:␟11765fae755306c1287745a7ddb4461aae072a68␟7547869007893180695:Add to Outlook`,l=$localize`:␟fa6bd0f777a40a0f26b09751bf006c7337d547ac␟2479867054818994962:Add to Google Calendar`,r=$localize`:␟1af54061e7f4bcfb1048ffaa05c9b8f7c4b41679␟4894641609416495396:Download iCal File`,[t,n,i,s,l,r,[1,"absolute","inset-0","bg-base-100","flex","flex-col","z-50","overflow-auto"],[1,"flex-1","flex","flex-col","items-center","justify-center","space-y-2","p-8"],[1,"text-2xl","font-medium","text-center"],["src","assets/icons/locker-success.svg"],[1,"text-center"],["group","",4,"ngIf"],["assets","",4,"ngIf"],["class","flex flex-col items-center space-y-4 p-4 relative",4,"ngIf"],[1,"sticky","bottom-0","bg-base-100","p-2","w-full","border-t","border-base-200","mt-4","flex","items-center","justify-center"],["btn","","name","locker-confirm-continue","matRipple","",1,"w-full","max-w-[32rem]","mx-auto",3,"routerLink"],["group",""],["assets",""],[1,"flex","flex-col","items-center","space-y-4","p-4","relative"],["btn","","matRipple","","name","locker-outlook-link","target","_blank","rel","noopener noreferer",1,"flex","items-center","p-2","space-x-2","pr-4","w-64","rounded","inverse",3,"href"],["src","assets/icons/outlook.svg",1,"w-6"],["btn","","matRipple","","name","locker-google-link","target","_blank","rel","noopener noreferer",1,"flex","items-center","p-2","space-x-2","pr-4","w-64","rounded","inverse",3,"href"],["src","assets/icons/gcal.svg",1,"w-6"],["btn","","matRipple","","name","locker-ical-link","target","_blank","rel","noopener noreferer",1,"flex","items-center","p-2","space-x-2","pr-4","w-64","rounded","inverse",3,"href"],[1,"text-xl"]]},template:function(n,i){1&n&&(e.j41(0,"div",6)(1,"main",7)(2,"h2",8),e.pXf(3,0),e.k0s(),e.nrm(4,"img",9),e.j41(5,"p",10),e.PLo(6,1),e.DNE(7,O_,2,1,"span",11)(8,T_,2,1,"span",12),e.nI1(9,"date"),e.nI1(10,"date"),e.nI1(11,"date"),e.YFu(),e.k0s(),e.DNE(12,M_,17,12,"div",13),e.k0s(),e.j41(13,"footer",14)(14,"a",15),e.pXf(15,2),e.k0s()()()),2&n&&(e.R7$(3),e.uP7(i.last_event.asset_name||i.last_event.asset_id)(i.location),e.nnv(3),e.R7$(4),e.Y8G("ngIf",null==i.last_event||null==i.last_event.attendees?null:i.last_event.attendees.length),e.R7$(),e.Y8G("ngIf",null==i.last_event||null==i.last_event.extension_data||null==i.last_event.extension_data.assets?null:i.last_event.extension_data.assets.length),e.R7$(3),e.uP7(null!=i.last_event&&null!=i.last_event.attendees&&i.last_event.attendees.length?"s":"")(e.i5U(9,10,i.last_event.date,"mediumDate"))(e.i5U(10,13,i.last_event.date,i.time_format))(e.i5U(11,16,i.last_event.date+60*i.last_event.duration*1e3,i.time_format)),e.nnv(6),e.R7$(),e.Y8G("ngIf",i.show_links),e.R7$(2),e.Y8G("routerLink",e.lJ4(19,k_)))},dependencies:[c.bT,E.R,F.r6,b.Wk,c.vh,It.m,Le.a],encapsulation:2})}return o})();function x_(o,a){1&o&&e.nrm(0,"locker-flow-success")}function S_(o,a){1&o&&e.nrm(0,"locker-flow-confirm")}function w_(o,a){1&o&&e.nrm(0,"locker-flow-form")}const N_=[{path:"",component:ki,children:[{path:"code",component:wi},{path:"code/success",component:t_},{path:"code/error",component:c_},{path:"new-desk",redirectTo:"new-desks/form"},{path:"new-desks",redirectTo:"new-desks/form"},{path:"new-desks/:step",component:wr},{path:"new-desk",redirectTo:"new-desks/form"},{path:"desks",redirectTo:"desks/form"},{path:"desks/:step",component:Fs},{path:"spaces",redirectTo:"spaces/form"},{path:"spaces/:step",component:ga},{path:"meeting",redirectTo:"meeting/form"},{path:"meeting/:step",component:ql},{path:"parking",redirectTo:"parking/form"},{path:"parking/:step",component:Pa},{path:"new-parking",redirectTo:"new-parking/form"},{path:"new-parking/:step",component:Qr},{path:"visitor",redirectTo:"visitor/form"},{path:"visitor/:step",component:yr},{path:"locker",redirectTo:"locker/form"},{path:"locker/:step",component:(()=>{class o extends d.Tv{get view(){return this._state.view}get last_success(){return this._state.last_success}constructor(t,n){super(),this._state=t,this._route=n}ngOnInit(){this._state.loadForm(),this._state.listenForStatusChanges(),this.subscription("route.params",this._route.paramMap.subscribe(t=>{t.has("step")&&this._state.setView(t.get("step"))})),this.subscription("route.query",this._route.queryParamMap.subscribe(t=>{t.has("success")&&this._state.setView("success")}))}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU($.Ws),e.rXU(b.nX))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["placeos-book-locker-flow"]],features:[e.Vt3],decls:4,vars:3,consts:[[1,"bg-base-100","h-full","w-full","z-50",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(n,i){1&n&&(e.j41(0,"div",0),e.DNE(1,x_,1,0,"locker-flow-success",1)(2,S_,1,0,"locker-flow-confirm",1)(3,w_,1,0,"locker-flow-form",2),e.k0s()),2&n&&(e.Y8G("ngSwitch",i.view),e.R7$(),e.Y8G("ngSwitchCase","success"),e.R7$(),e.Y8G("ngSwitchCase","confirm"))},dependencies:[c.ux,c.e1,c.fG,R_,wt,I_],styles:["[_nghost-%COMP%]{height:100%;width:100%}\n\n/*# sourceMappingURL=locker-flow.component.ts-angular-inline--122.css.map*/"]})}return o})()},{path:"*",redirectTo:"spaces/form"}]},{path:"*",redirectTo:"spaces/form"}];let y_=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.$C({type:o});static#n=this.\u0275inj=e.G2t({imports:[c.MD,ha.p,m.YN,Ci,fe.Rp,m.X1,we.Vg,J.vF,R.SG,b.iI.forChild(N_)]})}return o})()}}]);
//# sourceMappingURL=apps_workplace_src_app_book_book_module_ts.js.map