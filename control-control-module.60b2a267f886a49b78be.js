(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{dgxB:function(t,e,n){"use strict";n.r(e),n.d(e,"ControlModule",(function(){return D}));var o=n("2kYt"),i=n("sEIs"),a=n("20lr"),c=n("EM62"),s=n("e81E"),r=n("jOdJ"),l=n("6CBO"),g=n("dJst"),d=n("ek5h"),p=n("ukpX"),m=n("PBFl"),b=n("81Qw");function h(t,e){if(1&t&&c.Qb(0,"div",13),2&t){const t=c.jc(2);c.Ic("background-image","url("+t.space.image+")")}}const f=function(){return{type:"icon",class:"material-icons",content:"account_circle"}},u=function(){return["/explore"]},_=function(t){return{space:t}};function w(t,e){if(1&t&&(c.Vb(0,"div",1),c.Vb(1,"div",2),c.Lc(2,h,1,2,"div",3),c.Qb(3,"div",4),c.Vb(4,"div",5),c.Nc(5),c.Ub(),c.Vb(6,"div",6),c.Vb(7,"div",7),c.Nc(8),c.Ub(),c.Vb(9,"div",8),c.Qb(10,"app-icon",9),c.Nc(11),c.Ub(),c.Ub(),c.Ub(),c.Vb(12,"div",10),c.Vb(13,"a",11),c.Nc(14," Find "),c.Ub(),c.Vb(15,"a",12),c.kc(16,"safe"),c.Nc(17," Control "),c.Ub(),c.Ub(),c.Ub()),2&t){const t=c.jc();c.Hb("with-image",t.show_image),c.Db(2),c.qc("ngIf",t.show_image&&t.space.image),c.Db(3),c.Oc(t.space.name),c.Db(3),c.Oc(t.location),c.Db(2),c.qc("icon",c.tc(13,f)),c.Db(1),c.Pc(" ",t.space.capacity||"0"," "),c.Db(2),c.qc("routerLink",c.tc(14,u))("queryParams",c.uc(15,_,t.space.id)),c.Db(2),c.qc("href",c.mc(16,10,t.space.support_url,"url"),c.Cc)}}let C=(()=>{class t{constructor(t,e){this._settings=t,this._org=e}get show_image(){return this._settings.get("app.space_display.show_images")}get location(){if(!this.space)return"Unable to determine location";const t=this.space.level,e=this._org.buildings.find(e=>e.id===t.parent_id);return`${e?e.name+", ":""}${t.name}`}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(a.f),c.Pb(g.c))},t.\u0275cmp=c.Jb({type:t,selectors:[["a-control-space-list-item"]],inputs:{space:"space"},decls:1,vars:1,consts:[["class","space-details",3,"with-image",4,"ngIf"],[1,"space-details"],[1,"details"],["class","image",3,"background-image",4,"ngIf"],[1,"overlay"],[1,"name"],[1,"info"],[1,"location"],[1,"capacity"],[3,"icon"],[1,"actions"],["mat-button","","color","primary","button","",3,"routerLink","queryParams"],["mat-button","","color","primary","button","",3,"href"],[1,"image"]],template:function(t,e){1&t&&c.Lc(0,w,18,17,"div",0),2&t&&c.qc("ngIf",e.space)},directives:[o.n,p.a,m.a,i.f],pipes:[b.b],styles:[".space-details[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;width:768px;max-width:calc(100vw - 2em);margin:.5em auto;background-color:#fff;flex-wrap:wrap;border-radius:4px;overflow:hidden;--tw-shadow:0 1px 3px 0 rgba(0,0,0,0.1),0 1px 2px 0 rgba(0,0,0,0.06);transition:box-shadow .2s,top .2s;top:0}.space-details[_ngcontent-%COMP%], .space-details[_ngcontent-%COMP%]:hover{box-shadow:var(--tw-ring-offset-shadow,0 0 transparent),var(--tw-ring-shadow,0 0 transparent),var(--tw-shadow)}.space-details[_ngcontent-%COMP%]:hover{--tw-shadow:0 10px 15px -3px rgba(0,0,0,0.1),0 4px 6px -2px rgba(0,0,0,0.05);top:-2px}.space-details[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{display:none}.with-image[_ngcontent-%COMP%]{padding-top:0;width:480px}.with-image[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{display:initial;background-color:rgba(var(--font-dark),.65);color:var(--font-light);transition:opacity .2s}.with-image[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%], .with-image[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0}.with-image[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{overflow:hidden;background-position:50%;background-size:cover}.with-image[_ngcontent-%COMP%]:hover   .details[_ngcontent-%COMP%]   .capacity[_ngcontent-%COMP%], .with-image[_ngcontent-%COMP%]:hover   .details[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%], .with-image[_ngcontent-%COMP%]:hover   .details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{filter:drop-shadow(0 0 2px black);color:#fff}.with-image[_ngcontent-%COMP%]:hover   .details[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{opacity:0}.with-image[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{position:relative;height:6em;width:24em;margin:0 auto 0 0;max-width:24em;overflow:hidden}.with-image[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .capacity[_ngcontent-%COMP%], .with-image[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%], .with-image[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{transition:filter .2s}@media screen and (max-width:639px){.with-image[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{height:12em}}.with-image[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{position:absolute;bottom:2em;color:var(--font-light)}.with-image[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{position:absolute;bottom:1em;color:hsla(0,0%,100%,.65);width:calc(100% - 2em)}.details[_ngcontent-%COMP%]{flex:1;min-width:50%;padding:.5em 1em}@media screen and (max-width:639px){.details[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;padding:1em;margin-bottom:.5em;min-width:99%}}.info[_ngcontent-%COMP%]{display:flex;align-items:center;color:rgba(var(--font-dark),.65)}.name[_ngcontent-%COMP%]{font-size:1.2em}.location[_ngcontent-%COMP%]{font-size:.8em;flex:1;min-width:50%}.actions[_ngcontent-%COMP%], .capacity[_ngcontent-%COMP%]{display:flex;align-items:center}.actions[_ngcontent-%COMP%]{justify-content:center;flex-direction:column}@media screen and (max-width:639px){.actions[_ngcontent-%COMP%]{flex-direction:row;flex:1;margin-bottom:.5em}}a[_ngcontent-%COMP%]{width:8em;margin:.5em .5em 0}a[_ngcontent-%COMP%]:last-child{margin-bottom:.5em}@media screen and (max-width:639px){a[_ngcontent-%COMP%]{width:12em;margin:.5em}}"]}),t})();function O(t,e){if(1&t&&(c.Vb(0,"div",7),c.Qb(1,"a-control-space-list-item",8),c.Ub()),2&t){const t=e.$implicit;c.Db(1),c.qc("space",t)}}function v(t,e){if(1&t&&(c.Vb(0,"div",5),c.Lc(1,O,2,1,"div",6),c.Ub()),2&t){const t=c.jc();c.Db(1),c.qc("ngForOf",t.filtered_list)}}const P=function(){return{type:"icon",class:"material-icons",content:"close"}};function M(t,e){if(1&t&&(c.Vb(0,"div",5),c.Vb(1,"div",9),c.Vb(2,"div",10),c.Qb(3,"app-icon",11),c.Ub(),c.Vb(4,"div",12),c.Nc(5),c.Ub(),c.Ub(),c.Ub()),2&t){const t=c.jc();c.Db(3),c.qc("icon",c.tc(2,P)),c.Db(2),c.Pc(" ",t.search_str?' No matches for "'+t.search_str+'"':"No controllable spaces"," ")}}let x=(()=>{class t extends a.c{constructor(t,e){super(),this._spaces=t,this._org=e,this.space_list=[]}ngOnInit(){this._spaces.initialised.pipe(Object(r.a)(t=>t)).subscribe(()=>{this.space_list=this._spaces.filter(t=>!!t.support_url),this.space_list.sort((t,e)=>{const n=this._org.buildings.find(e=>e.id===t.level.parent_id),o=(t.name||"").toLowerCase(),i=((t.level?t.level.name:"")||"").toLowerCase(),a=((n?n.name:"")||"").toLowerCase(),c=this._org.buildings.find(t=>t.id===e.level.parent_id),s=(e.name||"").toLowerCase(),r=((e.level?e.level.name:"")||"").toLowerCase(),l=((c?c.name:"")||"").toLowerCase();return a.localeCompare(l)||i.localeCompare(r)||o.localeCompare(s)})})}get filtered_list(){const t=(this.search_str||"").toLowerCase();return(this.space_list||[]).filter(e=>{const n=this._org.buildings.find(t=>t.id===e.level.parent_id),o=(e.name||"").toLowerCase(),i=((e.level?e.level.name:"")||"").toLowerCase(),a=((n?n.name:"")||"").toLowerCase();return o.indexOf(t)>=0||i&&i.indexOf(t)>=0||a&&a.indexOf(t)>=0})}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(l.d),c.Pb(g.c))},t.\u0275cmp=c.Jb({type:t,selectors:[["a-control-space-list"]],features:[c.Ab],decls:6,vars:5,consts:[[1,"control-list"],[1,"filter"],[3,"value","loading","autofocus","valueChange"],["class","list",4,"ngIf","ngIfElse"],["empty_state",""],[1,"list"],["class","item",4,"ngFor","ngForOf"],[1,"item"],[3,"space"],[1,"info-block"],[1,"icon"],[3,"icon"],[1,"text"]],template:function(t,e){if(1&t&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Vb(2,"a-searchbar",2),c.fc("valueChange",(function(t){return e.search_str=t})),c.Ub(),c.Ub(),c.Lc(3,v,2,1,"div",3),c.Ub(),c.Lc(4,M,6,3,"ng-template",null,4,c.Mc)),2&t){const t=c.xc(5);c.Db(2),c.qc("value",e.search_str)("loading",e.loading)("autofocus",!0),c.Db(1),c.qc("ngIf",e.filtered_list.length)("ngIfElse",t)}},directives:[d.a,o.n,o.m,C,p.a],styles:[".control-list[_ngcontent-%COMP%], [_nghost-%COMP%]{height:100%;width:100%}.filter[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10}.control-list[_ngcontent-%COMP%]{position:relative;overflow:auto;background-color:var(--bg)}"]}),t})();var y=n("C9Ki"),U=n("d4mj");let V=(()=>{class t extends a.c{constructor(t){super(),this._settings=t}ngOnInit(){this._settings.title="Control"}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(a.f))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-control"]],features:[c.Ab],decls:8,vars:2,consts:[[1,"control","page"],[1,"header"],[3,"menu","menuChange"],[1,"body"],[1,"footer"],[3,"show","showChange"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"header",1),c.Vb(2,"a-topbar-header",2),c.fc("menuChange",(function(t){return e.show_menu=t})),c.Ub(),c.Ub(),c.Vb(3,"main",3),c.Qb(4,"a-control-space-list"),c.Ub(),c.Vb(5,"footer",4),c.Qb(6,"a-footer-menu"),c.Ub(),c.Ub(),c.Vb(7,"a-overlay-menu",5),c.fc("showChange",(function(t){return e.show_menu=t})),c.Ub()),2&t&&(c.Db(2),c.qc("menu",e.show_menu),c.Db(5),c.qc("show",e.show_menu))},directives:[s.a,x,y.a,U.a],styles:[".page[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;flex-direction:column}.page[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.body[_ngcontent-%COMP%]{min-width:50%;flex:1;z-index:0;min-height:50%}"]}),t})();var k=n("R3Ii");const L=[{path:"",component:V}];let D=(()=>{class t{}return t.\u0275mod=c.Nb({type:t}),t.\u0275inj=c.Mb({factory:function(e){return new(e||t)},imports:[[o.c,i.g.forChild(L),k.a]]}),t})()}}]);
//# sourceMappingURL=control-control-module.60b2a267f886a49b78be.js.map