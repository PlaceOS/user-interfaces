{"version":3,"file":"apps_concierge_src_app_signage_signage_module_ts.js","mappings":"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","sources":["./apps/concierge/src/app/signage/search-overlay.component.ts","./apps/concierge/src/app/signage/signage-display-modal.component.ts","./apps/concierge/src/app/signage/signage-displays.component.ts","./apps/concierge/src/app/signage/signage-item-playlists.component.ts","./apps/concierge/src/app/signage/signage-media-list.component.ts","./apps/concierge/src/app/signage/signage-media-modal.component.ts","./apps/concierge/src/app/signage/signage-media-preview-modal.component.ts","./apps/concierge/src/app/signage/signage-media.component.ts","./apps/concierge/src/app/signage/signage-playlist-media-list.component.ts","./apps/concierge/src/app/signage/signage-playlist-modal.component.ts","./apps/concierge/src/app/signage/signage-state.service.ts","./apps/concierge/src/app/signage/signage-topbar.component.ts","./apps/concierge/src/app/signage/signage-zones.component.ts","./apps/concierge/src/app/signage/signage.component.ts","./apps/concierge/src/app/signage/signage.module.ts"],"sourcesContent":["import {\n    Component,\n    EventEmitter,\n    Input,\n    Output,\n    SimpleChanges,\n    TemplateRef,\n} from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\n@Component({\n    selector: 'search-overlay',\n    template: `\n        <div\n            class=\"absolute inset-0 flex flex-col p-8 items-center\"\n            (click)=\"close.next()\"\n            (window:keydown.esc)=\"close.next()\"\n        >\n            <div class=\"absolute inset-0 bg-base-content opacity-70 z-0\"></div>\n            <div\n                class=\"relative mb-4 w-[32rem] max-w-[calc(100%-2rem)] mx-auto z-10\"\n                (click)=\"$event.stopPropagation()\"\n            >\n                <input\n                    class=\"rounded-[4rem] text-xl text-base-content bg-base-100 border border-base-300 shadow pl-14 pr-6 py-4 w-full\"\n                    [ngModel]=\"search.getValue()\"\n                    (ngModelChange)=\"search.next($event)\"\n                    placeholder=\"Search...\"\n                />\n                <app-icon\n                    class=\"absolute left-3 top-1/2 -translate-y-1/2 text-3xl pointer-events-none\"\n                >\n                    search\n                </app-icon>\n            </div>\n            <div\n                class=\"overflow-auto max-h-[65%] w-[32rem] max-w-[calc(100%-2rem)] mx-auto rounded z-10\"\n                (click)=\"$event.stopPropagation()\"\n            >\n                @for (item of item_list; track item) {\n                    <button\n                        matRipple\n                        class=\"w-full text-left\"\n                        (click)=\"selected.next(item)\"\n                    >\n                        @if (result_template) {\n                            <ng-container\n                                *ngTemplateOutlet=\"\n                                    result_template;\n                                    context: { item: item }\n                                \"\n                            ></ng-container>\n                        } @else {\n                            <div\n                                class=\"p-4 w-full bg-base-100 hover:bg-base-200 border border-base-300\"\n                            >\n                                {{ item.name || item }}\n                            </div>\n                        }\n                    </button>\n                }\n                @if (!item_list?.length) {\n                    <button\n                        matRipple\n                        class=\"w-full p-4 text-base-100\"\n                        (click)=\"close.next()\"\n                    >\n                        <div class=\"opacity-30\">\n                            No items available to select\n                        </div>\n                    </button>\n                }\n            </div>\n            <button\n                icon\n                matRipple\n                class=\"absolute top-10 right-8 text-base-100 text-xl h-12 w-12\"\n            >\n                <app-icon>close</app-icon>\n            </button>\n        </div>\n    `,\n    styles: [``],\n})\nexport class SearchOverlayComponent<T extends {} = any> {\n    @Input() public item_list: T[] = [];\n    @Input() public result_template: TemplateRef<any>;\n\n    @Output() public selected = new EventEmitter<T>();\n    @Output() public close = new EventEmitter<void>();\n\n    public readonly search = new BehaviorSubject('');\n    private _items = new BehaviorSubject<T[]>([]);\n\n    public ngOnChanges(changes: SimpleChanges) {\n        if (changes.item_list) {\n            this._items.next(this.item_list || []);\n        }\n    }\n}\n","import { Component, Inject } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { unique } from '@placeos/common';\nimport { OrganisationService } from '@placeos/organisation';\nimport { addSystem, PlaceSystem, updateSystem } from '@placeos/ts-client';\n\n@Component({\n    selector: 'signage-display-modal',\n    template: `\n        <header\n            class=\"flex items-center justify-between border-b border-base-300 p-2\"\n        >\n            <h1 class=\"p-2 font-medium text-xl\">\n                {{ display.id ? 'Edit' : 'New' }} Display\n            </h1>\n            <button icon matRipple mat-dialog-close *ngIf=\"!loading\">\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main\n            [formGroup]=\"form\"\n            class=\"p-4 flex flex-col w-[32rem] max-w-[calc(100vw-2rem)]\"\n            *ngIf=\"!loading; else load_state\"\n        >\n            <div class=\"flex flex-col\">\n                <label for=\"name\">Name<span required>*</span></label>\n                <mat-form-field appearance=\"outline\" class=\"w-full\">\n                    <input\n                        matInput\n                        name=\"name\"\n                        placeholder=\"Name\"\n                        formControlName=\"name\"\n                        required\n                    />\n                    <mat-error>Name is required</mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"flex flex-col\">\n                <label for=\"description\">Description</label>\n                <mat-form-field appearance=\"outline\" class=\"w-full\">\n                    <textarea\n                        matInput\n                        name=\"description\"\n                        placeholder=\"Description\"\n                        formControlName=\"description\"\n                        class=\"min-h-32\"\n                    ></textarea>\n                </mat-form-field>\n            </div>\n            <div class=\"flex flex-col\">\n                <label for=\"orientation\">Orientation</label>\n                <mat-form-field appearance=\"outline\" class=\"w-full\">\n                    <mat-select\n                        name=\"orientation\"\n                        formControlName=\"orientation\"\n                        placeholder=\"Unspecified\"\n                    >\n                        <mat-option value=\"unspecified\">\n                            Unspecified\n                        </mat-option>\n                        <mat-option value=\"landscape\">Landscape</mat-option>\n                        <mat-option value=\"portrait\">Portrait</mat-option>\n                        <mat-option value=\"square\">Square</mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </div>\n        </main>\n        <footer\n            *ngIf=\"!loading\"\n            class=\"flex justify-end p-4 border-t border-base-200\"\n        >\n            <button btn matRipple class=\"w-32\" (click)=\"save()\">Save</button>\n        </footer>\n        <ng-template #load_state>\n            <main class=\"flex flex-col items-center justify-center p-8\">\n                <mat-spinner [diameter]=\"32\"></mat-spinner>\n                <p class=\"mt-4\">Saving display...</p>\n            </main>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class SignageDisplayModalComponent {\n    public loading = false;\n    public readonly display = this._data.display;\n\n    public readonly form = new FormGroup({\n        id: new FormControl(this._data.display?.id || ''),\n        name: new FormControl(this._data.display?.display_name || '', [\n            Validators.required,\n        ]),\n        description: new FormControl(this._data.display?.description || ''),\n        orientation: new FormControl(\n            this._data.display?.orientation || 'unspecified',\n        ),\n    });\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA) private _data: { display?: PlaceSystem },\n        private _dialog_ref: MatDialogRef<SignageDisplayModalComponent>,\n        private _org: OrganisationService,\n    ) {}\n\n    public async save() {\n        this.form.markAllAsTouched();\n        this.form.updateValueAndValidity();\n        if (this.form.invalid) return;\n        this.loading = true;\n        const form_value = this.form.getRawValue();\n        const new_display = new PlaceSystem({\n            ...form_value,\n            name: `SIGNAGE ${form_value.name}`,\n            display_name: form_value.name,\n            signage: true,\n            zones: unique(\n                [\n                    this._org.organisation.id,\n                    this._org.region?.id,\n                    this._org.building?.id,\n                    ...this.display.zones,\n                ].filter((_) => !!_),\n            ),\n        });\n        const method = this.display.id\n            ? updateSystem(this.display.id, new_display)\n            : addSystem(new_display);\n        const result = await method.toPromise();\n        this._dialog_ref.close(result);\n    }\n}\n","import { Component } from '@angular/core';\nimport { BehaviorSubject, combineLatest } from 'rxjs';\nimport { SignageStateService } from './signage-state.service';\nimport { map, shareReplay, switchMap, take, tap } from 'rxjs/operators';\nimport { ActivatedRoute } from '@angular/router';\nimport { AsyncHandler, notifySuccess, SettingsService } from '@placeos/common';\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\nimport {\n    listSystemTriggers,\n    SignagePlaylist,\n    updateSystem,\n    updateTrigger,\n} from '@placeos/ts-client';\n\n@Component({\n    selector: 'signage-displays',\n    template: `\n        <div class=\"relative h-full w-full overflow-visible flex space-x-4\">\n            <div sidebar class=\"w-64 h-full flex flex-col space-y-4 py-4\">\n                <h3 class=\"text-xl font-medium text-center\">Displays</h3>\n                <mat-form-field\n                    appearance=\"outline\"\n                    class=\"w-full no-subscript\"\n                >\n                    <input\n                        matInput\n                        placeholder=\"Search...\"\n                        [ngModel]=\"search.getValue()\"\n                        (ngModelChange)=\"search.next($event)\"\n                    />\n                </mat-form-field>\n                @if ((displays | async)?.length > 0) {\n                    <div class=\"h-1/2 flex-1 w-full overflow-auto space-y-2\">\n                        @for (display of displays | async; track display.id) {\n                            <a\n                                matRipple\n                                class=\"w-full px-6 rounded-3xl min-h-12 flex items-center hover:bg-base-200 truncate z-10\"\n                                [class.!bg-secondary]=\"\n                                    selected.getValue() === display.id\n                                \"\n                                [class.text-secondary-content]=\"\n                                    selected.getValue() === display.id\n                                \"\n                                [routerLink]=\"[]\"\n                                [queryParams]=\"{ display: display.id }\"\n                            >\n                                {{ display.display_name || display.name }}\n                            </a>\n                            @if (\n                                (active_display | async)?.id === display.id &&\n                                !switching\n                            ) {\n                                @for (\n                                    trigger of triggers | async;\n                                    track trigger.id\n                                ) {\n                                    <div\n                                        class=\"relative flex items-center space-x-2 z-0\"\n                                    >\n                                        <div class=\"w-6\">\n                                            <div\n                                                class=\"absolute h-16 w-4 border-b-2 border-l-2 border-base-300 top-1/2 left-6 -translate-y-full\"\n                                            ></div>\n                                        </div>\n                                        <a\n                                            matRipple\n                                            class=\"w-1/2 flex-1 px-6 rounded-3xl min-h-12 flex items-center hover:bg-base-200 truncate\"\n                                            [class.!bg-secondary]=\"\n                                                selected_trigger.getValue() ===\n                                                trigger?.id\n                                            \"\n                                            [class.text-secondary-content]=\"\n                                                selected_trigger.getValue() ===\n                                                trigger?.id\n                                            \"\n                                            [routerLink]=\"[]\"\n                                            [queryParams]=\"{\n                                                display: display.id,\n                                                trigger: trigger?.id,\n                                            }\"\n                                        >\n                                            <span class=\"max-w-full truncate\">{{\n                                                trigger?.display_name ||\n                                                    trigger?.name ||\n                                                    'Trigger'\n                                            }}</span>\n                                        </a>\n                                    </div>\n                                }\n                            }\n                        }\n                    </div>\n                } @else {\n                    <div\n                        class=\"flex flex-col items-center justify-center p-8 space-y-2 opacity-30\"\n                    >\n                        <app-icon class=\"text-6xl\">hide_image</app-icon>\n                        <p class=\"text-center\">\n                            {{\n                                search.getValue()\n                                    ? 'No matching displays found'\n                                    : 'No displays'\n                            }}\n                        </p>\n                    </div>\n                }\n            </div>\n            <div\n                class=\"relative flex flex-col flex-1 w-1/2 h-full overflow-auto rounded-lg border border-base-300 p-4 shadow space-y-4\"\n            >\n                @if (active_display | async) {\n                    <signage-item-playlists\n                        class=\"flex flex-col flex-1\"\n                        [item]=\"\n                            (active_trigger | async) || (active_display | async)\n                        \"\n                        [name]=\"\n                            (active_trigger | async) ? 'trigger' : 'display'\n                        \"\n                        [extra]=\"\n                            (active_trigger | async)\n                                ? ''\n                                : (active_display | async)?.orientation\n                        \"\n                        (add)=\"this.adding = true\"\n                        (remove)=\"removePlaylist($event)\"\n                        (ondrop)=\"drop($event)\"\n                    >\n                        <div\n                            class=\"flex flex-wrap items-center overflow-auto mt-4\"\n                            *ngIf=\"!(active_trigger | async)\"\n                        >\n                            @for (\n                                zone of (active_display | async)?.zones;\n                                track zone\n                            ) {\n                                <a\n                                    class=\"px-2 py-1 font-mono text-xs bg-base-200 rounded whitespace-nowrap m-1\"\n                                    matRipple\n                                    [routerLink]=\"['/signage', 'zones']\"\n                                    [queryParams]=\"{ zone: zone }\"\n                                >\n                                    {{\n                                        (zone | zone | async)?.display_name ||\n                                            (zone | zone | async)?.name\n                                    }}\n                                </a>\n                            }\n                            <button\n                                class=\"underline font-mono text-xs px-2 py-1 rounded m-1\"\n                                matRipple\n                            >\n                                Add Zone\n                            </button>\n                        </div>\n                        <button\n                            icon\n                            matRipple\n                            [matMenuTriggerFor]=\"menu\"\n                            class=\"absolute top-2 right-2 !m-0\"\n                        >\n                            <app-icon>more_vert</app-icon>\n                        </button>\n                        <mat-menu #menu=\"matMenu\">\n                            <a\n                                mat-menu-item\n                                [href]=\"\n                                    signage_path +\n                                    '/#/signage/' +\n                                    (active_display | async)?.id\n                                \"\n                                target=\"_blank\"\n                                ref=\"noopener noreferrer\"\n                            >\n                                <div class=\"flex items-center space-x-2\">\n                                    <app-icon class=\"text-2xl\"\n                                        >open_in_new</app-icon\n                                    >\n                                    <div class=\"pr-2\">Open Signage Player</div>\n                                </div>\n                            </a>\n                            <button mat-menu-item (click)=\"removeDisplay()\">\n                                <div class=\"flex items-center space-x-2\">\n                                    <app-icon class=\"text-2xl text-error\"\n                                        >delete</app-icon\n                                    >\n                                    <div class=\"pr-2\">Remove Display</div>\n                                </div>\n                            </button>\n                        </mat-menu>\n                    </signage-item-playlists>\n                } @else {\n                    <div\n                        class=\"absolute inset-0 flex flex-col items-center justify-center space-y-2 opacity-30\"\n                    >\n                        <app-icon class=\"text-6xl\">desktop_windows</app-icon>\n                        <p>Select a display from the left to view playlists</p>\n                    </div>\n                }\n                <search-overlay\n                    *ngIf=\"adding\"\n                    [item_list]=\"playlists | async\"\n                    (selected)=\"addPlaylist($event)\"\n                    (close)=\"adding = false\"\n                ></search-overlay>\n            </div>\n        </div>\n    `,\n    styles: [``],\n})\nexport class SignageDisplaysComponent extends AsyncHandler {\n    public adding = false;\n    public switching = false;\n    public readonly search = new BehaviorSubject<string>('');\n    public readonly loading = this._state.loading;\n    public readonly displays = combineLatest([\n        this.search,\n        this._state.displays,\n    ]).pipe(\n        map(([search, list]) =>\n            list.filter((_) =>\n                _.name.toLowerCase().includes(search.toLowerCase()),\n            ),\n        ),\n    );\n    public readonly selected = new BehaviorSubject('');\n    public readonly selected_trigger = new BehaviorSubject('');\n    public readonly active_display = combineLatest([\n        this.displays,\n        this.selected,\n    ]).pipe(map(([displays, id]) => displays.find((item) => item.id === id)));\n\n    public readonly triggers = this.selected.pipe(\n        switchMap((id) => listSystemTriggers(id)),\n        map((_) => _.data),\n        tap((_) => setTimeout(() => (this.switching = false), 200)),\n        shareReplay(1),\n    );\n\n    public readonly active_trigger = combineLatest([\n        this.triggers,\n        this.selected_trigger,\n        this.selected,\n    ]).pipe(\n        map(([list, id, sys_id]) =>\n            list.find(\n                (item) => item.id === id && item.control_system_id === sys_id,\n            ),\n        ),\n    );\n\n    public readonly playlists = combineLatest([\n        this.active_display,\n        this.active_trigger,\n        this._state.playlists,\n        this._state.has_changed,\n    ]).pipe(\n        map(([display, trigger, playlists]) =>\n            playlists.filter(\n                (_) =>\n                    !(trigger || display)?.playlists.find((id) => _.id === id),\n            ),\n        ),\n    );\n\n    public readonly removeDisplay = async () =>\n        this._state.removeDisplay(\n            await this.active_display.pipe(take(1)).toPromise(),\n        );\n\n    public get signage_path() {\n        return this._settings.get('app.signage_path') || '/signage';\n    }\n\n    constructor(\n        private _state: SignageStateService,\n        private _route: ActivatedRoute,\n        private _settings: SettingsService,\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'route.params',\n            this._route.queryParamMap.subscribe((params) => {\n                this.switching =\n                    params.get('display') !== this.selected.getValue();\n                this.selected.next(params.get('display') || '');\n                this.selected_trigger.next(params.get('trigger') || '');\n            }),\n        );\n    }\n\n    public async addPlaylist(playlist: SignagePlaylist) {\n        const display = await this.active_display.pipe(take(1)).toPromise();\n        const trigger = await this.active_trigger.pipe(take(1)).toPromise();\n        const item = trigger || display;\n        const playlists = [...item.playlists, playlist.id];\n        const method: any = trigger ? updateTrigger : updateSystem;\n        await method(\n            item.id,\n            { playlists, version: display.version },\n            'patch',\n        ).toPromise();\n        notifySuccess(\n            `Successfully added playlist to the ${trigger ? 'trigger' : 'display'}`,\n        );\n        this._state.changed();\n        this.adding = false;\n    }\n\n    public async removePlaylist(playlist: SignagePlaylist) {\n        const display = await this.active_display.pipe(take(1)).toPromise();\n        const trigger = await this.active_trigger.pipe(take(1)).toPromise();\n        const item = trigger || display;\n        const playlists = item.playlists.filter((id) => playlist.id !== id);\n        const method: any = trigger ? updateTrigger : updateSystem;\n        await method(\n            item.id,\n            { playlists, version: display.version },\n            'patch',\n        ).toPromise();\n        notifySuccess(\n            `Successfully removed playlist from ${trigger ? 'trigger' : 'display'}`,\n        );\n        this._state.changed();\n        this.adding = false;\n    }\n\n    public async drop(event: CdkDragDrop<SignagePlaylist[]>) {\n        const display = await this.active_display.pipe(take(1)).toPromise();\n        const trigger = await this.active_trigger.pipe(take(1)).toPromise();\n        const item = trigger || display;\n        const old_playlist = item.playlists;\n        const playlists = [...old_playlist];\n        moveItemInArray(playlists, event.previousIndex, event.currentIndex);\n        (item as any).playlists = playlists;\n        this._state.changed();\n        const method: any = trigger ? updateTrigger : updateSystem;\n        await method(item.id, { playlists, version: display.version }, 'patch')\n            .toPromise()\n            .catch((e) => {\n                (item as any).playlists = old_playlist;\n                this._state.changed();\n                throw e;\n            });\n        notifySuccess(\n            `Successfully re-ordered playlists on ${trigger ? 'trigger' : 'display'}`,\n        );\n        this._state.changed();\n    }\n}\n","import {\n    Component,\n    EventEmitter,\n    Input,\n    Output,\n    SimpleChanges,\n} from '@angular/core';\nimport { BehaviorSubject, combineLatest } from 'rxjs';\nimport { SignageStateService } from './signage-state.service';\nimport { map, startWith, tap } from 'rxjs/operators';\nimport { SignagePlaylist } from '@placeos/ts-client';\n\nconst PLAYLIST_ITEM_COUNTS = {};\n\n@Component({\n    selector: `signage-item-playlists`,\n    template: `\n        <div class=\"flex items-center justify-center space-x-2\">\n            <h3 class=\"text-xl font-medium\">\n                {{ item?.display_name || item?.name }}\n            </h3>\n            <div\n                *ngIf=\"extra\"\n                class=\"px-2 py-1 text-xs font-mono bg-base-200 rounded-lg uppercase\"\n            >\n                {{ extra }}\n            </div>\n        </div>\n        <ng-content></ng-content>\n        @if ((active_playlists | async).length > 0 && item) {\n            <div\n                cdkDropList\n                class=\"flex-1 h-1/2 overflow-auto flex flex-col space-y-2 mt-4\"\n                (cdkDropListDropped)=\"ondrop.next($event)\"\n            >\n                @for (item of active_playlists | async; track item.id) {\n                    <div\n                        cdkDrag\n                        class=\"w-full bg-base-100 h-20 rounded-lg flex items-center p-2 space-x-2 border border-base-300\"\n                    >\n                        <div\n                            class=\"h-20 w-full border-4 border-dashed border-base-400 bg-base-300 rounded-xl\"\n                            *cdkDragPlaceholder\n                        ></div>\n                        <button\n                            matRipple\n                            cdkDragHandle\n                            class=\"flex items-center justify-center w-6 h-full rounded hover:bg-base-200\"\n                            matTooltip=\"Drag to reorder\"\n                        >\n                            <app-icon>drag_handle</app-icon>\n                        </button>\n                        <div class=\"text-base-content flex-1 w-1/2\">\n                            <div class=\"truncate\">\n                                {{ item.name }}\n                            </div>\n                            <div class=\"truncate text-sm opacity-30\">\n                                {{ playlistCount(item.id) || 0 }} Media items\n                            </div>\n                        </div>\n                        <button\n                            icon\n                            matRipple\n                            aria-label=\"Media Actions\"\n                            [matMenuTriggerFor]=\"menu\"\n                        >\n                            <app-icon>more_vert</app-icon>\n                        </button>\n                        <mat-menu #menu=\"matMenu\">\n                            <a\n                                mat-menu-item\n                                [routerLink]=\"['/signage', 'media']\"\n                                [queryParams]=\"{\n                                    playlist: item.id,\n                                }\"\n                            >\n                                <div class=\"flex items-center space-x-2\">\n                                    <app-icon class=\"text-2xl\">\n                                        visibility\n                                    </app-icon>\n                                    <div class=\"pr-2\">View Playlist</div>\n                                </div>\n                            </a>\n                            <button mat-menu-item (click)=\"remove.next(item)\">\n                                <div class=\"flex items-center space-x-2\">\n                                    <app-icon class=\"text-2xl text-error\">\n                                        delete\n                                    </app-icon>\n                                    <div class=\"pr-2\">Remove Playlist</div>\n                                </div>\n                            </button>\n                        </mat-menu>\n                    </div>\n                }\n            </div>\n            <button btn matRipple (click)=\"add.emit()\">Add Playlist</button>\n        } @else {\n            <div\n                class=\"flex flex-col items-center justify-center p-8 space-y-2 mx-auto flex-1\"\n            >\n                <div\n                    class=\"flex flex-col items-center justify-center opacity-30\"\n                >\n                    <app-icon class=\"text-6xl\">hide_image</app-icon>\n                    <p>No playlists in {{ name }}.</p>\n                </div>\n                <button btn matRipple (click)=\"add.emit()\" class=\"w-40\">\n                    Add Playlist\n                </button>\n            </div>\n        }\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n            }\n        `,\n    ],\n})\nexport class SignageItemPlaylistsComponent {\n    @Input() public item: any;\n    @Input() public name: string = 'zone';\n    @Input() public extra: string = '';\n    @Output() public readonly add = new EventEmitter();\n    @Output() public readonly remove = new EventEmitter<SignagePlaylist>();\n    @Output() public readonly ondrop = new EventEmitter<any>();\n\n    private _playlist_ids = new BehaviorSubject<string[]>([]);\n\n    public readonly active_playlists = combineLatest([\n        this._state.playlists,\n        this._playlist_ids,\n        this._state.has_changed,\n    ]).pipe(\n        map(([playlists, ids]) =>\n            ids.map((id) => playlists.find((_) => _.id === id)),\n        ),\n        tap((playlists) => {\n            for (const item of playlists) {\n                const old_counts = PLAYLIST_ITEM_COUNTS[item.id];\n                if (\n                    old_counts &&\n                    old_counts.last_updated > item.updated_at * 1000\n                ) {\n                    continue;\n                }\n                this._state.getPlaylistMedia(item.id).then((media) => {\n                    PLAYLIST_ITEM_COUNTS[item.id] = {\n                        count: media.length,\n                        last_updated: Date.now(),\n                    };\n                });\n            }\n        }),\n        startWith([]),\n    );\n\n    public playlistCount(id: string) {\n        return PLAYLIST_ITEM_COUNTS[id]?.count || 0;\n    }\n\n    constructor(private _state: SignageStateService) {}\n\n    public ngOnChanges(changes: SimpleChanges) {\n        if (changes.item) {\n            this._playlist_ids.next(this.item?.playlists || []);\n        }\n    }\n}\n","import { Component, Input, SimpleChanges, ViewChild } from '@angular/core';\nimport { BehaviorSubject, combineLatest } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { SignageStateService } from './signage-state.service';\nimport { SignageMedia } from '@placeos/ts-client';\nimport { CdkDropList } from '@angular/cdk/drag-drop';\nimport { getUnixTime, startOfMinute } from 'date-fns';\n\n@Component({\n    selector: 'signage-media-list',\n    template: `\n        <div class=\"p-4\">\n            <h3 class=\"text-xl font-medium text-center mb-4\">Media</h3>\n            <mat-form-field appearance=\"outline\" class=\"w-full no-subscript\">\n                <input\n                    matInput\n                    placeholder=\"Search...\"\n                    [ngModel]=\"search.getValue()\"\n                    (ngModelChange)=\"search.next($event)\"\n                />\n            </mat-form-field>\n        </div>\n        @if ((media | async)?.length > 0) {\n            <div\n                class=\"grid w-full gap-4 md:grid-cols-2 lg:grid-cols-3 p-4\"\n                cdkDropList\n                id=\"media-list\"\n                [cdkDropListData]=\"media | async\"\n                [cdkDropListConnectedTo]=\"playlist_ids\"\n                (cdkDropListDropped)=\"drop($event)\"\n            >\n                @for (media of media | async; track media.id) {\n                    <div\n                        class=\"relative bg-base-100 rounded-lg flex flex-col items-center justify-center p-3 hover:opacity-80 border border-base-300\"\n                        cdkDrag\n                    >\n                        @if (media.valid_from && now < media.valid_from) {\n                            <div\n                                class=\"absolute inset-0 z-0 bg-warning opacity-10 rounded-lg\"\n                            ></div>\n                        } @else if (\n                            media.valid_until && now > media.valid_until\n                        ) {\n                            <div\n                                class=\"absolute inset-0 z-0 bg-error opacity-10 rounded-lg\"\n                            ></div>\n                        }\n                        <div\n                            class=\"min-h-10 min-w-10 border-4 rounded-2xl border-base-400 bg-base-300 border-dashed flex items-center justify-center\"\n                            *cdkDragPlaceholder\n                        >\n                            <app-icon class=\"text-2xl text-base-100\">\n                                add\n                            </app-icon>\n                        </div>\n                        <div\n                            preview\n                            class=\"relative w-full h-36 bg-base-200 rounded-lg overflow-hidden\"\n                        >\n                            <img\n                                auth\n                                [source]=\"media.thumbnail_url\"\n                                *ngIf=\"media.thumbnail_url\"\n                                class=\"w-full h-full object-contain rounded-lg\"\n                            />\n                            <div\n                                class=\"absolute top-1 left-1 px-2 py-1 text-xs rounded-lg capitalize font-mono\"\n                                [class.bg-info]=\"media.media_type === 'video'\"\n                                [class.text-info-content]=\"\n                                    media.media_type === 'video'\n                                \"\n                                [class.bg-warning]=\"\n                                    media.media_type === 'image'\n                                \"\n                                [class.text-warning-content]=\"\n                                    media.media_type === 'image'\n                                \"\n                            >\n                                {{ media.media_type }}\n                            </div>\n                            <div\n                                class=\"absolute bottom-1 right-1 px-2 py-1 text-xs rounded-lg bg-info text-info-content capitalize font-mono\"\n                                *ngIf=\"media.play_time\"\n                            >\n                                {{ media.play_time / 1000 | mediaDuration }}\n                            </div>\n                        </div>\n                        <div\n                            class=\"flex items-center justify-between w-full relative top-1\"\n                        >\n                            <div\n                                class=\"text-base-content truncate flex-1 w-1/2\"\n                                [matTooltip]=\"media.name\"\n                            >\n                                {{ media.name }}\n                            </div>\n                            <button\n                                icon\n                                matRipple\n                                [matMenuTriggerFor]=\"menu\"\n                                aria-label=\"Media Actions\"\n                            >\n                                <app-icon>more_vert</app-icon>\n                            </button>\n                            <mat-menu #menu=\"matMenu\">\n                                <button mat-menu-item (click)=\"editItem(media)\">\n                                    <div class=\"flex items-center space-x-2\">\n                                        <app-icon class=\"text-2xl\"\n                                            >edit</app-icon\n                                        >\n                                        <div class=\"pr-2\">Edit Media Item</div>\n                                    </div>\n                                </button>\n                                <button\n                                    mat-menu-item\n                                    (click)=\"previewItem(media)\"\n                                >\n                                    <div class=\"flex items-center space-x-2\">\n                                        <app-icon class=\"text-2xl\"\n                                            >visibility</app-icon\n                                        >\n                                        <div class=\"pr-2\">\n                                            Preview Media Item\n                                        </div>\n                                    </div>\n                                </button>\n                                <button\n                                    mat-menu-item\n                                    (click)=\"removeItem(media)\"\n                                >\n                                    <div class=\"flex items-center space-x-2\">\n                                        <app-icon class=\"text-2xl text-error\">\n                                            delete\n                                        </app-icon>\n                                        <div class=\"pr-2\">\n                                            Remove Media Item\n                                        </div>\n                                    </div>\n                                </button>\n                            </mat-menu>\n                        </div>\n                    </div>\n                }\n            </div>\n        } @else {\n            <div\n                class=\"flex flex-col items-center justify-center p-8 space-y-2 opacity-30 mx-auto flex-1\"\n            >\n                <app-icon class=\"text-6xl\">hide_image</app-icon>\n                <p>No media found.</p>\n            </div>\n        }\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n            }\n        `,\n    ],\n})\nexport class SignageMediaListComponent {\n    @Input() public playlist_count = 0;\n    public readonly search = new BehaviorSubject<string>('');\n    public readonly media = combineLatest([\n        this.search,\n        this._state.media,\n    ]).pipe(\n        map(([search, media]) =>\n            media.filter((_) =>\n                _.name.toLowerCase().includes(search.toLowerCase()),\n            ),\n        ),\n    );\n\n    public playlist_ids: string[] = [];\n\n    public get now() {\n        return getUnixTime(startOfMinute(Date.now()));\n    }\n\n    public readonly previewItem = (item: SignageMedia) =>\n        this._state.previewMedia(item);\n\n    public readonly editItem = (item: SignageMedia) =>\n        this._state.editMedia(item);\n\n    public readonly removeItem = async (item: SignageMedia) =>\n        this._state.removeMedia(item);\n\n    constructor(private _state: SignageStateService) {}\n\n    public ngOnChanges(changes: SimpleChanges) {\n        if (changes.playlist_count) {\n            this.playlist_ids = new Array(this.playlist_count)\n                .fill(0)\n                .map((_, idx) => `playlist-${idx}`);\n        }\n    }\n\n    public drop(event) {}\n}\n","import { Component, Inject } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { notifySuccess } from '@placeos/common';\nimport { SignageMedia, updateSignageMedia } from '@placeos/ts-client';\nimport { MediaAnimation } from '@placeos/ts-client/dist/esm/signage/media.class';\nimport { addYears, endOfDay, getUnixTime, startOfDay } from 'date-fns';\n\n@Component({\n    selector: 'signage-media-modal',\n    template: `\n        <header\n            class=\"flex items-center justify-between border-b border-base-300\"\n        >\n            <h2 class=\"p-2 text-xl font-medium\">\n                {{ item.id ? 'Edit' : 'New' }} Media Item\n            </h2>\n            <button icon matRipple mat-dialog-close *ngIf=\"!loading\">\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main\n            class=\"p-4 max-w-[calc(100vw-2rem)] w-[32rem] max-h-[65vh] overflow-auto\"\n            [formGroup]=\"form\"\n            *ngIf=\"!loading; else load_state\"\n        >\n            <div class=\"flex flex-col\">\n                <button\n                    matRipple\n                    class=\"relative w-full h-48 mx-auto bg-base-300 rounded-xl overflow-hidden mb-4\"\n                    (click)=\"preview()\"\n                >\n                    <img\n                        class=\"h-full w-full object-contain object-center\"\n                        auth\n                        [source]=\"thumbnail || url\"\n                    />\n                    <div\n                        class=\"absolute top-2 left-2 px-2 py-1 rounded text-xs bg-base-400 capitalize\"\n                    >\n                        {{ media_type }}\n                    </div>\n                </button>\n                <label for=\"name\">Name</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"name\"\n                        formControlName=\"name\"\n                        placeholder=\"Media Name\"\n                    />\n                    <mat-error>A name is required</mat-error>\n                </mat-form-field>\n                @if (media_type === 'video') {\n                    <div class=\"flex items-center space-x-4\">\n                        <label for=\"start-time\" class=\"w-auto min-w-0 m-0\"\n                            >Start Time</label\n                        >\n                        <div class=\"text-xs font-mono\">\n                            {{\n                                form.value.start_time / 1000\n                                    | mediaDuration: true\n                            }}\n                        </div>\n                    </div>\n                    <mat-slider\n                        min=\"0\"\n                        [max]=\"(item.video_length || 300000) - 1000\"\n                        step=\"100\"\n                    >\n                        <input\n                            name=\"start-time\"\n                            matSliderThumb\n                            formControlName=\"start_time\"\n                        />\n                    </mat-slider>\n                }\n                <div class=\"flex items-center space-x-4\">\n                    <label for=\"play-time\" class=\"w-auto min-w-0 m-0\">\n                        Play Time</label\n                    >\n                    <div class=\"text-xs font-mono\">\n                        @if (form.value.play_time) {\n                            {{\n                                form.value.play_time / 1000\n                                    | mediaDuration: true\n                            }}\n                        } @else {\n                            <span class=\"opacity-30\">\n                                Default ({{\n                                    item.video_length\n                                        ? (item.video_length / 1000\n                                          | mediaDuration)\n                                        : ''\n                                }})\n                            </span>\n                        }\n                    </div>\n                </div>\n                <mat-slider\n                    [min]=\"form.value.start_time\"\n                    [max]=\"item.video_length || 300000\"\n                    step=\"100\"\n                >\n                    <input\n                        name=\"play-time\"\n                        matSliderThumb\n                        formControlName=\"play_time\"\n                    />\n                </mat-slider>\n                <label for=\"animation\">Animation</label>\n                <mat-form-field appearance=\"outline\">\n                    <mat-select\n                        name=\"animation\"\n                        formControlName=\"animation\"\n                        placeholder=\"Playlist Default\"\n                    >\n                        <mat-option [value]=\"0\">Playlist Default</mat-option>\n                        <mat-option [value]=\"1\">Cut</mat-option>\n                        <mat-option [value]=\"2\">Cross Fade</mat-option>\n                        <mat-option [value]=\"3\">Slide Top</mat-option>\n                        <mat-option [value]=\"4\">Slide Left</mat-option>\n                        <mat-option [value]=\"5\">Slide Right</mat-option>\n                        <mat-option [value]=\"6\">Slide Bottom</mat-option>\n                    </mat-select>\n                </mat-form-field>\n                <label for=\"description\">Description</label>\n                <mat-form-field appearance=\"outline\" class=\"w-full\">\n                    <textarea\n                        matInput\n                        name=\"description\"\n                        placeholder=\"Description\"\n                        formControlName=\"description\"\n                        class=\"min-h-32\"\n                    ></textarea>\n                </mat-form-field>\n                <div class=\"flex space-x-4\">\n                    <div class=\"flex-1\">\n                        <label for=\"valid-from\">Valid From</label>\n                        <a-date-field\n                            name=\"valid-from\"\n                            formControlName=\"valid_from\"\n                        ></a-date-field>\n                    </div>\n                    <div class=\"flex-1\">\n                        <label for=\"valid-until\">Valid Until</label>\n                        <a-date-field\n                            name=\"valid-until\"\n                            [from]=\"form.value.valid_from\"\n                            formControlName=\"valid_until\"\n                        ></a-date-field>\n                    </div>\n                </div>\n            </div>\n        </main>\n        <footer\n            *ngIf=\"!loading\"\n            class=\"flex justify-end p-4 border-t border-base-300\"\n        >\n            <button btn matRipple class=\"w-32\" (click)=\"saveMedia()\">\n                Save\n            </button>\n        </footer>\n        <ng-template #load_state>\n            <main\n                class=\"flex flex-col items-center justify-center p-8 max-w-[calc(100vw-2rem)] min-h-64 w-[32rem] space-y-4\"\n            >\n                <mat-spinner diameter=\"32\"></mat-spinner>\n                <p>Saving media item...</p>\n            </main>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class SignageMediaModalComponent {\n    public loading = false;\n    public readonly item = this._data.media;\n    public readonly file = this._data.file;\n    public readonly thumbnail =\n        this._data.file_thumbnail || this._data.media.thumbnail_url;\n\n    public readonly form = new FormGroup({\n        name: new FormControl('', [Validators.required]),\n        description: new FormControl(''),\n        animation: new FormControl<MediaAnimation>(MediaAnimation.Default),\n        start_time: new FormControl(0),\n        play_time: new FormControl<number | null>(null),\n        valid_from: new FormControl(startOfDay(Date.now()).valueOf()),\n        valid_until: new FormControl(\n            addYears(endOfDay(Date.now()), 10).valueOf(),\n        ),\n    });\n\n    private _file_url: string;\n\n    public readonly preview = () =>\n        this._data.preview({\n            media_url: this.url,\n            media_type: this.media_type,\n            name: this.form.value.name,\n        });\n\n    public get media_type() {\n        if (!this.file) return this.item.media_type;\n        return (\n            (this.file.type.includes('video')\n                ? 'video'\n                : this.file.type.includes('image')\n                  ? 'image'\n                  : '') || this.item.media_type\n        );\n    }\n\n    public get url() {\n        if (this.item.id) return this.item.media_url;\n        if (this._file_url) return this._file_url;\n        this._file_url = URL.createObjectURL(this.file);\n        return this._file_url;\n    }\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA)\n        private _data: {\n            media: SignageMedia;\n            file?: File;\n            file_metadata?: [boolean, number];\n            file_thumbnail?: string;\n            onAdd: (f, m) => Promise<SignageMedia>;\n            preview: (url) => void;\n        },\n        private _dialog_ref: MatDialogRef<SignageMediaModalComponent>,\n    ) {\n        this.form.patchValue({\n            ...this._data.media,\n            valid_from: this._data.media.valid_from * 1000,\n            valid_until: this._data.media.valid_until * 1000,\n        });\n        if (this._data.file) {\n            this.form.patchValue({\n                name: this._data.file.name,\n            });\n        }\n        if (this._data.file_metadata) {\n            (this.item as any).video_length = Math.floor(\n                this._data.file_metadata[1] * 1000,\n            );\n        }\n    }\n\n    public ngOnDestroy() {\n        if (this._file_url) URL.revokeObjectURL(this._file_url);\n    }\n\n    public async saveMedia() {\n        this.form.markAllAsTouched();\n        this.form.updateValueAndValidity();\n        if (!this.form.valid) return;\n        this.loading = true;\n        this._dialog_ref.disableClose = true;\n        const form_value = this.form.getRawValue();\n        const new_media = {\n            ...this.item,\n            ...form_value,\n            valid_from: getUnixTime(new Date(form_value.valid_from)),\n            valid_until: getUnixTime(form_value.valid_until),\n        };\n        const onError = (e) => {\n            this._dialog_ref.disableClose = false;\n            this.loading = false;\n            throw e;\n        };\n        if (this.item.id) {\n            await updateSignageMedia(this.item.id, new_media)\n                .toPromise()\n                .catch(onError);\n        } else {\n            await this._data.onAdd(this.file, new_media).catch(onError);\n        }\n        this._dialog_ref.disableClose = false;\n        this._dialog_ref.close();\n        notifySuccess('Successfully saved media item.');\n    }\n}\n","import { Component, EventEmitter, Inject, Output } from '@angular/core';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\n\n@Component({\n    selector: 'signage-media-preview-modal',\n    template: `\n        <header\n            class=\"flex items-center justify-between p-2 border-b border-base-300\"\n        >\n            <h1 class=\"px-2\">Preview - {{ name }}</h1>\n            <button icon matRipple mat-dialog-close>\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main class=\"bg-base-200\" *ngIf=\"!loading; else load_state\">\n            <div\n                class=\"max-w-[80vw] max-h-[65vh] w-[80vw] h-[65vh] flex items-center justify-center\"\n            >\n                <img\n                    *ngIf=\"type === 'image'\"\n                    class=\"w-full h-full object-contain object-center\"\n                    auth\n                    [source]=\"resource.toString()\"\n                />\n                <video\n                    *ngIf=\"type === 'video'\"\n                    class=\"w-full h-full object-contain object-center\"\n                    auth\n                    [source]=\"resource.toString()\"\n                    autoplay\n                    controls\n                ></video>\n            </div>\n        </main>\n        <footer\n            *ngIf=\"can_save && !loading\"\n            class=\"p-2 flex items-center justify-end space-x-2 border-t border-base-300\"\n        >\n            <button btn matRipple class=\"w-32\" (click)=\"save.emit()\">\n                Save Media\n            </button>\n        </footer>\n        <ng-template #load_state>\n            <main\n                class=\"flex flex-col items-center justify-center p-8 w-[28rem] h-[20rem] max-w-[80vw] max-h-[65vh]\"\n            >\n                <mat-spinner [diameter]=\"32\"></mat-spinner>\n                <p>{{ loading }}</p>\n            </main>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class SignageMediaPreviewModalComponent {\n    @Output() public readonly save = new EventEmitter<any>();\n    public loading = '';\n    public readonly resource = this._data.url;\n    public readonly type = this._data.type;\n    public readonly name = this._data.name;\n    public readonly file = this._data.file;\n    public readonly can_save = this._data.save !== false;\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA)\n        private _data: {\n            url: URL;\n            type: 'image' | 'video';\n            save: boolean;\n            name: string;\n            file?: File;\n        },\n    ) {}\n}\n","import { Component, ViewChild } from '@angular/core';\n\nimport { SignageStateService } from './signage-state.service';\nimport { AsyncHandler, unique } from '@placeos/common';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { BehaviorSubject, combineLatest } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { SignageMediaListComponent } from './signage-media-list.component';\nimport { listSignagePlaylistMedia, SignagePlaylist } from '@placeos/ts-client';\nimport { CdkDragDrop } from '@angular/cdk/drag-drop';\n\n@Component({\n    selector: 'signage-media',\n    template: `\n        <div class=\"relative h-full w-full overflow-visible flex space-x-4\">\n            <div\n                sidebar\n                class=\"w-64 h-full flex flex-col space-y-4 py-4 overflow-auto\"\n            >\n                <h3 class=\"text-xl font-medium text-center\">Playlists</h3>\n                <mat-form-field\n                    appearance=\"outline\"\n                    class=\"w-full no-subscript\"\n                >\n                    <input\n                        matInput\n                        placeholder=\"Search...\"\n                        [ngModel]=\"search.getValue()\"\n                        (ngModelChange)=\"search.next($event)\"\n                    />\n                </mat-form-field>\n                <a\n                    matRipple\n                    class=\"w-full px-6 rounded-3xl min-h-12 flex items-center hover:bg-base-200\"\n                    [class.!bg-secondary]=\"!selected_playlist\"\n                    [class.text-secondary-content]=\"!selected_playlist\"\n                    [routerLink]=\"[]\"\n                    [queryParams]=\"{ playlist: '' }\"\n                >\n                    All Media\n                </a>\n                <hr class=\"w-full\" />\n                @if ((playlists | async)?.length > 0) {\n                    @for (playlist of playlists | async; track playlist.id) {\n                        <a\n                            matRipple\n                            class=\"w-full px-6 rounded-3xl h-12 min-h-12 flex items-center hover:bg-base-200\"\n                            [class.!bg-secondary]=\"\n                                selected_playlist === playlist.id\n                            \"\n                            [class.text-secondary-content]=\"\n                                selected_playlist === playlist.id\n                            \"\n                            [routerLink]=\"[]\"\n                            [queryParams]=\"{ playlist: playlist.id }\"\n                            cdkDropList\n                            [id]=\"'playlist-' + $index\"\n                            [cdkDropListConnectedTo]=\"[\n                                'media-list',\n                                'playlist-list',\n                            ]\"\n                            (cdkDropListDropped)=\"\n                                selected_playlist === playlist.id\n                                    ? ''\n                                    : drop(playlist, $event)\n                            \"\n                        >\n                            <div class=\"flex-1\">\n                                {{ playlist.name }}\n                            </div>\n                        </a>\n                    }\n                } @else {\n                    <div\n                        class=\"flex flex-col items-center justify-center p-8 space-y-2 opacity-30\"\n                    >\n                        <app-icon class=\"text-6xl\">hide_image</app-icon>\n                        <p class=\"text-center\">\n                            {{\n                                search.getValue()\n                                    ? 'No matching playlists found'\n                                    : 'No playlists'\n                            }}\n                        </p>\n                    </div>\n                    <button\n                        *ngIf=\"!search.getValue()\"\n                        btn\n                        matRipple\n                        class=\"inverse\"\n                        (click)=\"addPlaylist()\"\n                    >\n                        <div class=\"flex items-center justify-center w-full\">\n                            <app-icon class=\"text-2xl\">add</app-icon>\n                            <span class=\"ml-2 mr-4\">Add Playlist</span>\n                        </div>\n                    </button>\n                }\n            </div>\n            <div\n                class=\"relative flex-1 w-1/2 h-full overflow-hidden rounded-lg border border-base-300 shadow\"\n                (dragover)=\"onEnter($event)\"\n                (dragenter)=\"onEnter($event)\"\n                (window:drop)=\"hideOverlay($event)\"\n            >\n                <div class=\"h-full w-full overflow-auto\">\n                    <signage-media-list\n                        *ngIf=\"!selected_playlist\"\n                        [playlist_count]=\"(playlists | async)?.length\"\n                    ></signage-media-list>\n                    <signage-playlist-media-list\n                        *ngIf=\"selected_playlist\"\n                        [playlist]=\"selected_playlist\"\n                        [playlist_count]=\"(playlists | async)?.length\"\n                    ></signage-playlist-media-list>\n                </div>\n                <div\n                    class=\"absolute inset-0\"\n                    *ngIf=\"show_dropzone\"\n                    (dragleave)=\"hideOverlay($event)\"\n                    (drop)=\"previewFile($event)\"\n                >\n                    <div\n                        class=\"absolute inset-0 bg-base-content opacity-60\"\n                    ></div>\n                    <div\n                        class=\"absolute inset-4 border-4 border-dashed border-base-300 flex flex-col items-center justify-center rounded-2xl text-base-100 space-y-4\"\n                    >\n                        <app-icon class=\"text-6xl\">cloud_upload</app-icon>\n                        <p>Drop Media to upload</p>\n                    </div>\n                    <input\n                        type=\"file\"\n                        (change)=\"previewFile($event)\"\n                        class=\"absolute inset-0 opacity-0\"\n                    />\n                </div>\n            </div>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                min-height: 100%;\n            }\n        `,\n    ],\n})\nexport class SignageMediaComponent extends AsyncHandler {\n    public readonly search = new BehaviorSubject<string>('');\n    public readonly loading = this._state.loading;\n    public readonly playlists = combineLatest([\n        this.search,\n        this._state.playlists,\n    ]).pipe(\n        map(([search, list]) =>\n            list.filter((_) =>\n                _.name.toLowerCase().includes(search.toLowerCase()),\n            ),\n        ),\n    );\n    public selected_playlist = '';\n    public show_dropzone = false;\n\n    public readonly addPlaylist = async () => {\n        const result = await this._state.editPlaylist();\n        if (result) {\n            this._router.navigate([\n                '/signage/media',\n                { query: { playlist: result.id } },\n            ]);\n        }\n    };\n    public readonly previewMedia = (item) => this._state.previewMedia(item);\n    public readonly previewFile = (event) =>\n        this._state.previewFileFromInput(event, this.selected_playlist);\n\n    public onEnter(e) {\n        this.clearTimeout('hide_overlay');\n        this.show_dropzone = e?.dataTransfer?.types.includes('Files');\n    }\n\n    public hideOverlay(e) {\n        if (!this.show_dropzone) return;\n        if (!(e.target instanceof HTMLInputElement)) {\n            e.preventDefault();\n        }\n        this.timeout('hide_overlay', () => (this.show_dropzone = false));\n    }\n\n    constructor(\n        private _state: SignageStateService,\n        private _router: Router,\n        private _route: ActivatedRoute,\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'route.params',\n            this._route.queryParamMap.subscribe((params) => {\n                if (params.has('playlist')) {\n                    this.selected_playlist = params.get('playlist');\n                }\n            }),\n        );\n    }\n\n    public async drop(\n        playlist: SignagePlaylist,\n        event: CdkDragDrop<SignagePlaylist[]>,\n    ) {\n        const media = event.previousContainer.data[event.previousIndex];\n        const media_list = await listSignagePlaylistMedia(\n            playlist.id,\n        ).toPromise();\n        const new_media_list = [...media_list.items, media.id];\n        await this._state.updatePlaylistMedia(playlist.id, new_media_list);\n    }\n}\n","import { Component, Input, SimpleChanges } from '@angular/core';\nimport { BehaviorSubject, combineLatest, of } from 'rxjs';\nimport { SignageStateService } from './signage-state.service';\nimport {\n    catchError,\n    debounceTime,\n    filter,\n    map,\n    shareReplay,\n    startWith,\n    switchMap,\n    take,\n} from 'rxjs/operators';\nimport {\n    listSignagePlaylistMedia,\n    MediaAnimation,\n    SignageMedia,\n    SignagePlaylist,\n} from '@placeos/ts-client';\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\nimport { Router } from '@angular/router';\nimport { getUnixTime, startOfMinute } from 'date-fns';\n\n@Component({\n    selector: 'signage-playlist-media-list',\n    template: `\n        <div class=\"flex flex-col space-y-4 relative p-4 h-full w-full\">\n            <h3 class=\"text-xl font-medium text-center\">\n                Playlist - {{ (selected_playlist | async)?.name }}\n            </h3>\n            <button\n                icon\n                matRipple\n                [matMenuTriggerFor]=\"menu\"\n                class=\"absolute top-2 right-2 !m-0\"\n            >\n                <app-icon>more_vert</app-icon>\n            </button>\n            <mat-menu #menu=\"matMenu\">\n                <button mat-menu-item (click)=\"editPlaylist()\">\n                    <div class=\"flex items-center space-x-2\">\n                        <app-icon class=\"text-2xl\">edit</app-icon>\n                        <div class=\"pr-2\">Edit Playlist</div>\n                    </div>\n                </button>\n                <button mat-menu-item (click)=\"removePlaylist()\">\n                    <div class=\"flex items-center space-x-2\">\n                        <app-icon class=\"text-2xl text-error\">delete</app-icon>\n                        <div class=\"pr-2\">Remove Playlist</div>\n                    </div>\n                </button>\n            </mat-menu>\n            <div details class=\"flex items-center flex-wrap\">\n                <div\n                    class=\"ml-2 text-xs px-2 py-1 m-1 rounded\"\n                    [class.bg-success]=\"(selected_playlist | async)?.enabled\"\n                    [class.text-success-content]=\"\n                        (selected_playlist | async)?.enabled\n                    \"\n                    [class.bg-error]=\"!(selected_playlist | async)?.enabled\"\n                    [class.text-error-content]=\"\n                        !(selected_playlist | async)?.enabled\n                    \"\n                >\n                    {{\n                        (selected_playlist | async)?.enabled\n                            ? 'Enabled'\n                            : 'Disabled'\n                    }}\n                </div>\n                <div\n                    class=\"ml-2 text-xs px-2 py-1 m-1 rounded bg-secondary text-secondary-content\"\n                    *ngIf=\"(selected_playlist | async)?.random\"\n                >\n                    Shuffle ON\n                </div>\n                <div\n                    class=\"text-xs px-2 py-1 m-1 \"\n                    matTooltip=\"Default Transition Animation\"\n                >\n                    Animation:\n                    <span\n                        class=\"ml-1 uppercase bg-base-200 px-2 py-1 rounded\"\n                        >{{\n                            animation_name(\n                                (selected_playlist | async)?.default_animation\n                            )\n                        }}</span\n                    >\n                </div>\n                <div\n                    class=\"text-xs px-2 py-1 m-1\"\n                    matTooltip=\"Default Playback Duration\"\n                >\n                    Duration:\n                    <span\n                        class=\"ml-1 font-mono bg-base-200 px-2 py-1 rounded\"\n                        >{{\n                            (selected_playlist | async)?.default_duration / 1000\n                                | mediaDuration\n                        }}</span\n                    >\n                </div>\n                <div\n                    class=\"text-xs px-2 py-1 m-1\"\n                    matTooltip=\"Prefered Orientation\"\n                >\n                    Orientation:\n                    <span\n                        class=\"ml-1 uppercase bg-base-200 px-2 py-1 rounded\"\n                        >{{ (selected_playlist | async)?.orientation }}</span\n                    >\n                </div>\n            </div>\n            @if ((media | async).length > 0) {\n                <div\n                    cdkDropList\n                    class=\"flex-1 h-1/2 overflow-auto flex flex-col space-y-2\"\n                    id=\"playlist-list\"\n                    [cdkDropListData]=\"media | async\"\n                    [cdkDropListConnectedTo]=\"playlist_ids\"\n                    (cdkDropListDropped)=\"drop($event)\"\n                >\n                    <ng-container *ngFor=\"let item of media | async\">\n                        <div\n                            cdkDrag\n                            class=\"relative w-full bg-base-100 h-20 rounded-lg flex items-center p-2 space-x-2 border border-base-300\"\n                        >\n                            @if (item.valid_from && now < item.valid_from) {\n                                <div\n                                    class=\"absolute inset-0 z-0 bg-warning opacity-10 rounded-lg\"\n                                ></div>\n                            } @else if (\n                                item.valid_until && now > item.valid_until\n                            ) {\n                                <div\n                                    class=\"absolute inset-0 z-0 bg-error opacity-10 rounded-lg\"\n                                ></div>\n                            }\n                            <div\n                                class=\"min-h-10 min-w-10 border-4 rounded-2xl border-base-400 bg-base-300 border-dashed flex items-center justify-center\"\n                                *cdkDragPlaceholder\n                            >\n                                <app-icon class=\"text-2xl text-base-100\">\n                                    add\n                                </app-icon>\n                            </div>\n                            <button\n                                matRipple\n                                cdkDragHandle\n                                class=\"flex items-center justify-center w-6 h-full rounded hover:bg-base-200\"\n                                matTooltip=\"Drag to reorder\"\n                            >\n                                <app-icon>drag_handle</app-icon>\n                            </button>\n                            <div\n                                preview\n                                class=\"w-[4.5rem] h-16 bg-base-200 rounded-lg overflow-hidden\"\n                            >\n                                <img\n                                    auth\n                                    [source]=\"item.thumbnail_url\"\n                                    class=\"w-full h-full object-contain\"\n                                />\n                            </div>\n                            <div\n                                class=\"text-base-content truncate flex-1 w-1/2\"\n                            >\n                                {{ item.name }}\n                            </div>\n                            <button\n                                icon\n                                matRipple\n                                aria-label=\"Media Actions\"\n                                [matMenuTriggerFor]=\"menu\"\n                            >\n                                <app-icon>more_vert</app-icon>\n                            </button>\n                            <mat-menu #menu=\"matMenu\">\n                                <button mat-menu-item (click)=\"editItem(item)\">\n                                    <div class=\"flex items-center space-x-2\">\n                                        <app-icon class=\"text-2xl\">\n                                            edit\n                                        </app-icon>\n                                        <div class=\"pr-2\">Edit Media Item</div>\n                                    </div>\n                                </button>\n                                <button\n                                    mat-menu-item\n                                    (click)=\"previewItem(item)\"\n                                >\n                                    <div class=\"flex items-center space-x-2\">\n                                        <app-icon class=\"text-2xl\">\n                                            visibility\n                                        </app-icon>\n                                        <div class=\"pr-2\">\n                                            Preview Media Item\n                                        </div>\n                                    </div>\n                                </button>\n                                <button\n                                    mat-menu-item\n                                    (click)=\"removeItem(item)\"\n                                >\n                                    <div class=\"flex items-center space-x-2\">\n                                        <app-icon class=\"text-2xl text-error\">\n                                            delete\n                                        </app-icon>\n                                        <div class=\"pr-2\">\n                                            Remove Media Item\n                                        </div>\n                                    </div>\n                                </button>\n                            </mat-menu>\n                        </div>\n                    </ng-container>\n                </div>\n            } @else {\n                <div\n                    class=\"flex flex-col items-center justify-center p-8 space-y-2 opacity-30 mx-auto flex-1\"\n                >\n                    <app-icon class=\"text-6xl\">hide_image</app-icon>\n                    <p>No media in playlist.</p>\n                </div>\n            }\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                height: 100%;\n            }\n        `,\n    ],\n})\nexport class SignagePlaylistMediaListComponent {\n    @Input() public playlist = '';\n    @Input() public playlist_count = 0;\n\n    public playlist_ids: string[] = [];\n\n    private _playlist = new BehaviorSubject<string>('');\n\n    public readonly editPlaylist = async () => {\n        const playlist = await this.selected_playlist.pipe(take(1)).toPromise();\n        this._state.editPlaylist(playlist);\n    };\n\n    public readonly removeItem = async (item: SignageMedia) => {\n        const playlist = await this._playlist_media.pipe(take(1)).toPromise();\n        const list = playlist.items.filter((_) => _ !== item.id);\n        await this._state.updatePlaylistMedia(this.playlist, list);\n        this._playlist.next(this.playlist);\n    };\n\n    public readonly previewItem = (item: SignageMedia) =>\n        this._state.previewMedia(item);\n\n    public readonly editItem = (item: SignageMedia) =>\n        this._state.editMedia(item);\n\n    public readonly removePlaylist = async () => {\n        this._state.removePlaylist(\n            await this.selected_playlist.pipe(take(1)).toPromise(),\n        );\n        this._router.navigate(['/signage/media', {}]);\n    };\n\n    public readonly selected_playlist = combineLatest([\n        this._playlist,\n        this._state.playlists,\n    ]).pipe(\n        map(([playlist, list]) => {\n            const item = list.find((_) => _.id === playlist);\n            if (!item) this._router.navigate(['/signage/media', {}]);\n            return item;\n        }),\n    );\n\n    private _playlist_media = this._playlist.pipe(\n        filter((playlist) => !!playlist),\n        debounceTime(300),\n        switchMap((playlist) =>\n            listSignagePlaylistMedia(playlist).pipe(\n                catchError(() => of({ id: '', items: [] })),\n            ),\n        ),\n        shareReplay(1),\n    );\n\n    public readonly media = combineLatest([\n        this._playlist_media,\n        this._state.media,\n    ]).pipe(\n        map(([playlist, media]) =>\n            playlist.items\n                .map((_) => media.find((m) => m.id === _))\n                .filter((_) => _),\n        ),\n        startWith([]),\n    );\n\n    public get now() {\n        return getUnixTime(startOfMinute(Date.now()));\n    }\n\n    constructor(\n        private _state: SignageStateService,\n        private _router: Router,\n    ) {}\n\n    public ngOnChanges(changes: SimpleChanges) {\n        if (changes.playlist) {\n            this._playlist.next(this.playlist);\n        }\n        if (changes.playlist_count) {\n            this.playlist_ids = new Array(this.playlist_count)\n                .fill(0)\n                .map((_, idx) => `playlist-${idx}`);\n        }\n    }\n\n    public animation_name(value: MediaAnimation) {\n        switch (value) {\n            case MediaAnimation.Cut:\n                return 'Cut';\n            case MediaAnimation.CrossFade:\n                return 'Cross Fade';\n            case MediaAnimation.SlideBottom:\n                return 'Slide Bottom';\n            case MediaAnimation.SlideLeft:\n                return 'Slide Left';\n            case MediaAnimation.SlideRight:\n                return 'Slide Right';\n            case MediaAnimation.SlideTop:\n                return 'Slide Top';\n        }\n        return 'Default';\n    }\n\n    public async drop(event: CdkDragDrop<SignageMedia[]>) {\n        if (event.previousIndex === event.currentIndex) return;\n        const id = await this._playlist.pipe(take(1)).toPromise();\n        const playlist = await this._playlist_media.pipe(take(1)).toPromise();\n        if (!id && playlist) return;\n        const list = [...playlist.items];\n        moveItemInArray(list, event.previousIndex, event.currentIndex);\n        await this._state.updatePlaylistMedia(id, list);\n        this._playlist.next(this.playlist);\n    }\n}\n","import {\n    MAT_DIALOG_DATA,\n    MatDialog,\n    MatDialogRef,\n} from '@angular/material/dialog';\nimport { SignageStateService } from './signage-state.service';\nimport { Component, ElementRef, Inject, ViewChild } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { BehaviorSubject } from 'rxjs';\nimport { notifyError } from '@placeos/common';\nimport { MediaAnimation } from '@placeos/ts-client/dist/esm/signage/media.class';\nimport { SignagePlaylist } from '@placeos/ts-client';\nimport { addYears, endOfDay, getUnixTime, startOfDay } from 'date-fns';\n\n@Component({\n    selector: 'signage-playlist-modal',\n    template: `\n        <header\n            class=\"flex items-center justify-between border-b border-base-300\"\n        >\n            <h1 class=\"p-2 font-medium text-xl\">\n                {{ playlist.id ? 'Edit' : 'New' }} Playlist\n            </h1>\n            <button icon matRipple mat-dialog-close *ngIf=\"!loading\">\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main\n            [formGroup]=\"form\"\n            class=\"p-4 flex flex-col w-[32rem] max-w-[calc(100vw-2rem)]\"\n            *ngIf=\"!loading; else load_state\"\n        >\n            <label for=\"name\">Name<span required>*</span></label>\n            <mat-form-field appearance=\"outline\" class=\"w-full\">\n                <input\n                    matInput\n                    name=\"name\"\n                    placeholder=\"Name\"\n                    formControlName=\"name\"\n                />\n                <mat-error>Name is required</mat-error>\n            </mat-form-field>\n            <div class=\"flex items-center space-x-8 mb-4\">\n                <mat-checkbox formControlName=\"enabled\">Enabled</mat-checkbox>\n                <mat-checkbox formControlName=\"random\">\n                    Shuffle Playback\n                </mat-checkbox>\n            </div>\n            <div class=\"flex items-center space-x-4\">\n                <label\n                    for=\"default-duration\"\n                    class=\"w-auto min-w-0 m-0 space-x-2 flex items-center\"\n                >\n                    <div>Default Play Time</div>\n                    <app-icon\n                        class=\"text-xl\"\n                        matTooltip=\"Default length of time to hold images on screen\"\n                    >\n                        info\n                    </app-icon>\n                </label>\n                <div class=\"text-xs font-mono\">\n                    {{ form.value.default_duration / 1000 | mediaDuration }}\n                </div>\n            </div>\n            <mat-slider min=\"5000\" max=\"300000\" step=\"1000\">\n                <input\n                    name=\"default-duration\"\n                    matSliderThumb\n                    formControlName=\"default_duration\"\n                />\n            </mat-slider>\n            <div class=\"flex space-x-2\">\n                <div class=\"flex-1\">\n                    <label for=\"orientation\">Orientation</label>\n                    <mat-form-field appearance=\"outline\" class=\"w-full\">\n                        <mat-select\n                            name=\"orientation\"\n                            formControlName=\"orientation\"\n                            placeholder=\"Unspecified\"\n                        >\n                            <mat-option value=\"unspecified\">\n                                Unspecified\n                            </mat-option>\n                            <mat-option value=\"landscape\">Landscape</mat-option>\n                            <mat-option value=\"portrait\">Portrait</mat-option>\n                            <mat-option value=\"square\">Square</mat-option>\n                        </mat-select>\n                    </mat-form-field>\n                </div>\n                <div class=\"flex-1\">\n                    <label for=\"animation\">Animation</label>\n                    <mat-form-field appearance=\"outline\" class=\"w-full\">\n                        <mat-select\n                            name=\"animation\"\n                            formControlName=\"default_animation\"\n                            placeholder=\"Playlist Default\"\n                        >\n                            <mat-option [value]=\"1\">Cut</mat-option>\n                            <mat-option [value]=\"2\">Cross Fade</mat-option>\n                            <mat-option [value]=\"3\">Slide Top</mat-option>\n                            <mat-option [value]=\"4\">Slide Left</mat-option>\n                            <mat-option [value]=\"5\">Slide Right</mat-option>\n                            <mat-option [value]=\"6\">Slide Bottom</mat-option>\n                        </mat-select>\n                    </mat-form-field>\n                </div>\n            </div>\n            <label for=\"description\">Description</label>\n            <mat-form-field appearance=\"outline\" class=\"w-full\">\n                <textarea\n                    matInput\n                    name=\"description\"\n                    placeholder=\"Description\"\n                    formControlName=\"description\"\n                    class=\"min-h-32\"\n                ></textarea>\n            </mat-form-field>\n            <div class=\"flex space-x-4\">\n                <div class=\"flex-1\">\n                    <label for=\"valid-from\">Valid From</label>\n                    <a-date-field\n                        name=\"valid-from\"\n                        formControlName=\"valid_from\"\n                    ></a-date-field>\n                </div>\n                <div class=\"flex-1\">\n                    <label for=\"valid-until\">Valid Until</label>\n                    <a-date-field\n                        name=\"valid-until\"\n                        [from]=\"form.value.valid_from\"\n                        formControlName=\"valid_until\"\n                        [disabled]=\"!form.value.valid_from\"\n                    ></a-date-field>\n                </div>\n            </div>\n        </main>\n        <footer\n            class=\"p-4 flex items-center justify-end space-x-2 border-t border-base-300\"\n            *ngIf=\"!loading\"\n        >\n            <button btn matRipple class=\"w-32\" (click)=\"savePlaylist()\">\n                Save Playlist\n            </button>\n        </footer>\n        <ng-template #load_state>\n            <main class=\"flex flex-col items-center justify-center p-8\">\n                <mat-spinner [diameter]=\"32\"></mat-spinner>\n                <p class=\"mt-4\">Saving Playlist...</p>\n            </main>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class SignagePlaylistModalComponent {\n    public loading = false;\n    public readonly playlist = this._data;\n    public readonly media = this._state.media;\n\n    public readonly search = new BehaviorSubject('');\n\n    public readonly form = new FormGroup({\n        id: new FormControl(this.playlist.id || ''),\n        name: new FormControl(this.playlist.name || '', [Validators.required]),\n        description: new FormControl(this.playlist.description || ''),\n        default_animation: new FormControl<MediaAnimation>(\n            this.playlist.default_animation || MediaAnimation.Cut,\n        ),\n        orientation: new FormControl(\n            this.playlist.orientation || 'unspecified',\n        ),\n        enabled: new FormControl(this.playlist.enabled),\n        random: new FormControl(this.playlist.random),\n        default_duration: new FormControl(\n            Math.max(this.playlist.default_duration || 15 * 1000, 5000),\n        ),\n        valid_from: new FormControl(this.playlist.valid_from * 1000),\n        valid_until: new FormControl(this.playlist.valid_until * 1000),\n    });\n\n    @ViewChild('search_input')\n    public search_input: ElementRef<HTMLInputElement>;\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA) private _data: SignagePlaylist = {} as any,\n        private _state: SignageStateService,\n        private _dialog: MatDialog,\n        private _dialog_ref: MatDialogRef<SignagePlaylistModalComponent>,\n    ) {}\n\n    public async savePlaylist() {\n        this.form.markAllAsTouched();\n        this.form.updateValueAndValidity();\n        if (this.form.invalid) return;\n        this.loading = true;\n        const form_value = this.form.getRawValue();\n        const result = await this._state\n            .savePlaylist({\n                ...form_value,\n                valid_from: getUnixTime(form_value.valid_from),\n                valid_until: getUnixTime(form_value.valid_until),\n            })\n            .catch((_) => {\n                notifyError('Error saving playlist');\n                this.loading = false;\n                throw _;\n            });\n        this._dialog_ref.close(result);\n    }\n}\n","import { Injectable } from '@angular/core';\nimport {\n    AsyncHandler,\n    notifyError,\n    notifySuccess,\n    openConfirmModal,\n    SettingsService,\n    uploadFile,\n} from '@placeos/common';\nimport { OrganisationService } from '@placeos/organisation';\nimport {\n    addSignageMedia,\n    addSignagePlaylist,\n    listSignagePlaylistMedia,\n    PlaceSystem,\n    querySignageMedia,\n    querySignagePlaylists,\n    querySystems,\n    queryZones,\n    removeSignageMedia,\n    removeSignagePlaylist,\n    removeSystem,\n    SignageMedia,\n    SignagePlaylist,\n    updateSignageMedia,\n    updateSignagePlaylist,\n    updateSignagePlaylistMedia,\n    updateSystem,\n} from '@placeos/ts-client';\nimport { Attachment } from '@placeos/users';\nimport { BehaviorSubject, Observable, combineLatest, of } from 'rxjs';\nimport {\n    catchError,\n    debounceTime,\n    filter,\n    map,\n    shareReplay,\n    switchMap,\n} from 'rxjs/operators';\n\nimport { MatDialog } from '@angular/material/dialog';\nimport { SignageMediaPreviewModalComponent } from './signage-media-preview-modal.component';\nimport { SignagePlaylistModalComponent } from './signage-playlist-modal.component';\nimport { SignageMediaModalComponent } from './signage-media-modal.component';\nimport { SignageDisplayModalComponent } from './signage-display-modal.component';\n\nfunction dataURLtoBlob(dataURL) {\n    // Split the data URL to get the mime type and the data\n    const [prefix, data] = dataURL.split(',');\n    const mimeType = prefix.split(':')[1].split(';')[0];\n\n    // Convert base64 to raw binary data\n    const byteString = atob(data);\n\n    // Create an ArrayBuffer and fill it with the binary data\n    const arrayBuffer = new ArrayBuffer(byteString.length);\n    const uint8Array = new Uint8Array(arrayBuffer);\n    for (let i = 0; i < byteString.length; i++) {\n        uint8Array[i] = byteString.charCodeAt(i);\n    }\n\n    // Create and return the Blob\n    return new Blob([arrayBuffer], { type: mimeType });\n}\n\nfunction dataURLtoFile(dataURL, filename) {\n    // Split the data URL to get the mime type and the data\n    const [prefix, data] = dataURL.split(',');\n    const mimeType = prefix.split(':')[1].split(';')[0];\n\n    // Convert base64 to raw binary data\n    const byteString = atob(data);\n\n    // Create an ArrayBuffer and fill it with the binary data\n    const arrayBuffer = new ArrayBuffer(byteString.length);\n    const uint8Array = new Uint8Array(arrayBuffer);\n    for (let i = 0; i < byteString.length; i++) {\n        uint8Array[i] = byteString.charCodeAt(i);\n    }\n\n    // Create and return the File\n    return new File([uint8Array], filename, { type: mimeType });\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class SignageStateService extends AsyncHandler {\n    private _loading = new BehaviorSubject(false);\n    private _change = new BehaviorSubject(0);\n    private _active_upload = new BehaviorSubject<Attachment>(null);\n\n    public readonly loading = this._loading.asObservable();\n    public readonly has_changed = this._change.asObservable();\n\n    public readonly media: Observable<SignageMedia[]> = combineLatest([\n        this._org.active_building,\n        this._change,\n    ]).pipe(\n        filter(([_]) => !!_?.id),\n        debounceTime(300),\n        switchMap(([bld]) => querySignageMedia({ limit: 2500 } as any)),\n        map((_) => _.data.sort((a, b) => b.created_at - a.created_at)),\n        shareReplay(1),\n    );\n\n    public readonly playlists: Observable<SignagePlaylist[]> = combineLatest([\n        this._org.active_building,\n        this._change,\n    ]).pipe(\n        filter(([_]) => !!_?.id),\n        debounceTime(300),\n        switchMap(() => querySignagePlaylists({ limit: 500 } as any)),\n        map((_) => (_.data || []).sort((a, b) => a.name.localeCompare(b.name))),\n        shareReplay(1),\n    );\n\n    public readonly displays: Observable<PlaceSystem[]> = combineLatest([\n        this._org.active_region,\n        this._org.active_building,\n        this._change,\n    ]).pipe(\n        filter(([region, bld]) => !!bld?.id),\n        switchMap(([region, bld]) =>\n            querySystems({\n                zone_id:\n                    (this._settings.get('app.use_region') ? region?.id : '') ||\n                    bld?.id,\n                limit: 500,\n                signage: true,\n            }).pipe(\n                map((_) =>\n                    (_.data || [])\n                        .sort((a, b) =>\n                            (a.display_name || a.name).localeCompare(\n                                b.display_name || b.name,\n                            ),\n                        )\n                        .filter((_) => _.signage),\n                ),\n            ),\n        ),\n        shareReplay(1),\n    );\n\n    public readonly zones = combineLatest([\n        this._org.active_building,\n        this._change,\n    ]).pipe(\n        switchMap(([bld]) =>\n            queryZones({\n                limit: 250,\n            } as any).pipe(catchError(() => of({ data: [] }))),\n        ),\n        map((_) =>\n            (_.data || []).sort((a, b) =>\n                (a.display_name || a.name).localeCompare(\n                    b.display_name || b.name,\n                ),\n            ),\n        ),\n    );\n\n    public changed() {\n        this._change.next(Date.now());\n    }\n\n    constructor(\n        private _org: OrganisationService,\n        private _dialog: MatDialog,\n        private _settings: SettingsService,\n    ) {\n        super();\n    }\n\n    public editPlaylist(playlist: SignagePlaylist = new SignagePlaylist({})) {\n        return new Promise<SignagePlaylist | null>((resolve) => {\n            const ref = this._dialog.open(SignagePlaylistModalComponent, {\n                data: playlist,\n            });\n            ref.afterClosed().subscribe((result) => {\n                this.timeout('changed', () => this._change.next(Date.now()));\n                resolve(result);\n            });\n        });\n    }\n\n    public editMedia(\n        media: SignageMedia = new SignageMedia({}),\n        file?: File,\n        playlist_id: string = '',\n    ) {\n        return new Promise<SignagePlaylist | null>(async (resolve) => {\n            const ref = this._dialog.open(SignageMediaModalComponent, {\n                data: {\n                    media,\n                    file,\n                    file_metadata: file\n                        ? await this._getMediaMetadata(file)\n                        : [media.orientation === 'landscape', 0],\n                    file_thumbnail: file\n                        ? await this._generateThumbnail(file, 1024, 720)\n                        : '',\n                    playlist_id,\n                    onAdd: (f, m) => this.addMedia(f, m),\n                    preview: (item) => this.previewMedia(item),\n                },\n            });\n            ref.afterClosed().subscribe((result) => {\n                this.timeout('changed', () => this._change.next(Date.now()));\n                resolve(result);\n            });\n        });\n    }\n\n    public async editDisplay(display: PlaceSystem = new PlaceSystem({})) {\n        console.log('Edit Display:', display);\n        const ref = this._dialog.open(SignageDisplayModalComponent, {\n            data: { display },\n        });\n        const result = await ref.afterClosed().toPromise();\n        this.timeout('changed', () => this._change.next(Date.now()));\n        return result;\n    }\n\n    public async removeDisplay(display: PlaceSystem) {\n        const result = await openConfirmModal(\n            {\n                title: `Remove Display`,\n                content: `\n                Are you sure you wish to remove the display \"<strong>${display.display_name}</strong>\"?\n                `,\n                icon: { content: 'delete' },\n            },\n            this._dialog,\n        );\n        if (result.reason !== 'done') return;\n        result.loading('Removing display...');\n        if (display.map_id || display.email || display.module_list.length > 0) {\n            await updateSystem(display.id, {\n                signage: false,\n            } as any).toPromise();\n        } else {\n            await removeSystem(display.id).toPromise();\n        }\n        this._change.next(Date.now());\n        result.close();\n    }\n\n    public async savePlaylist(playlist: Partial<SignagePlaylist>) {\n        const call = playlist.id\n            ? updateSignagePlaylist(playlist.id, playlist)\n            : addSignagePlaylist(playlist);\n        const new_playlist = await call.toPromise();\n        notifySuccess(`Successfully saved playlist.`);\n        this._change.next(Date.now());\n    }\n\n    public async removePlaylist(playlist: SignagePlaylist) {\n        if (!playlist?.id) return;\n        const result = await openConfirmModal(\n            {\n                title: `Remove Playlist`,\n                content: `\n            Are you sure you wish to remove the playlist \"<strong>${playlist.name}</strong>\"?<br/><br/>`,\n                icon: { content: 'delete' },\n            },\n            this._dialog,\n        );\n        if (result.reason !== 'done') return;\n        await removeSignagePlaylist(playlist.id).toPromise();\n        notifySuccess(`Successfully removed playlist.`);\n        this._change.next(Date.now());\n        result.close();\n    }\n\n    public async updatePlaylistMedia(playlist_id: string, list: string[]) {\n        await updateSignagePlaylistMedia(playlist_id, list).toPromise();\n        notifySuccess(`Successfully updated playlist media.`);\n    }\n\n    public getPlaylistMedia(playlist_id: string) {\n        return listSignagePlaylistMedia(playlist_id)\n            .toPromise()\n            .then((_) => _.items);\n    }\n\n    public previewMedia(item: SignageMedia) {\n        const ref = this._dialog.open(SignageMediaPreviewModalComponent, {\n            data: {\n                url: item.media_url,\n                type: item.media_type,\n                name: item.name,\n                save: false,\n            },\n        });\n    }\n\n    public previewFileFromInput(event, playlist_id: string = '') {\n        const element: HTMLInputElement = event.target as any;\n        /* istanbul ignore else */\n        if (!element?.files?.length) return;\n        const files: FileList = element.files;\n        const file = files[0];\n        if (\n            file &&\n            (file.type.includes('image') || file.type.includes('video'))\n        ) {\n            this.editMedia(undefined, file, playlist_id);\n        } else {\n            notifyError('Invalid file type.');\n        }\n    }\n\n    public previewFileMedia(media: File, playlist_id: string = '') {\n        const url = URL.createObjectURL(media);\n        const type = media.type.includes('image') ? 'image' : 'video';\n        const ref = this._dialog.open(SignageMediaPreviewModalComponent, {\n            data: { url, type, name: media.name, save: true, file: media },\n        });\n        ref.afterClosed().subscribe(() => URL.revokeObjectURL(url));\n        ref.componentInstance.save.subscribe(async () => {\n            ref.componentInstance.loading = 'Saving...';\n            const new_media = await this.addMedia(media).catch((e) => {\n                notifyError('Error saving media.');\n                ref.componentInstance.loading = '';\n                throw e;\n            });\n            if (playlist_id && new_media.id) {\n                const media_list =\n                    await listSignagePlaylistMedia(playlist_id).toPromise();\n                const new_media_list = [...media_list.items, new_media.id];\n                await updateSignagePlaylistMedia(\n                    playlist_id,\n                    new_media_list,\n                ).toPromise();\n            }\n            ref.close();\n        });\n    }\n\n    public async addMedia(\n        file: File,\n        media_item: SignageMedia = new SignageMedia({}),\n    ) {\n        const upload = (file) =>\n            new Promise<{ id: string; link: string }>((resolve, reject) => {\n                let state = null;\n                let resolved = false;\n                uploadFile(file).subscribe(\n                    (s) => {\n                        state = s;\n                        if (s.link) {\n                            resolved = true;\n                            resolve({ id: s.upload.id, link: s.link });\n                        }\n                    },\n                    reject,\n                    () => (!resolved ? resolve(state) : null),\n                );\n            });\n        const [is_landscape, _] = await this._getMediaMetadata(file);\n        const thumbnail_image = await this._generateThumbnail(\n            file,\n            1280,\n            720,\n        ).catch((_) => null);\n        const media = await upload(file);\n        let thumbnail = null;\n        if (thumbnail_image) {\n            thumbnail = await upload(\n                dataURLtoFile(thumbnail_image, `thumb+${file.name}`),\n            );\n        }\n        const data = {\n            ...new SignageMedia({\n                ...media_item,\n                name: media_item.name || file.name,\n                media_id: media.id,\n                media_uri: media.link,\n                media_type: file.type.includes('image') ? 'image' : 'video',\n                orientation: is_landscape ? 'landscape' : 'portrait',\n                thumbnail_id: thumbnail.id,\n            }),\n        };\n        for (const key in data) {\n            if (!data[key]) delete data[key];\n        }\n        const result = await addSignageMedia(data).toPromise();\n        this._active_upload.next(null);\n        this._change.next(Date.now());\n        return result;\n    }\n\n    public async updateMedia(item: SignageMedia) {\n        if (!item?.id) return;\n        await updateSignageMedia(item.id, item).toPromise();\n    }\n\n    public async removeMedia(item: SignageMedia) {\n        if (!item?.id) return;\n        const result = await openConfirmModal(\n            {\n                title: `Remove Media item`,\n                content: `\n                Are you sure you wish to remove the media item \"<strong>${item.name}</strong>\"?<br/><br/>\n                <i class=\"text-sm\">The item will be removed from all playlists and the files deleted from storage.</i>\n                `,\n                icon: { content: 'delete' },\n            },\n            this._dialog,\n        );\n        if (result.reason !== 'done') return;\n        result.loading('Removing media...');\n        await removeSignageMedia(item.id).toPromise();\n        this._change.next(Date.now());\n        result.close();\n    }\n\n    private _getMediaMetadata(file: File) {\n        return new Promise<[boolean, number]>((resolve) => {\n            const url = URL.createObjectURL(file);\n            // file is loaded\n            if (file.type.includes('video')) {\n                let video = document.createElement('video');\n                video.src = url.toString();\n                video.addEventListener('loadedmetadata', () => {\n                    const { videoWidth, videoHeight } = video;\n                    resolve([videoWidth > videoHeight, video.duration]);\n                });\n                video.load();\n            } else {\n                let img = new Image();\n                img.onload = () => resolve([img.width > img.height, 0]);\n                img.src = url.toString(); // is the data URL because called with readAsDataURL\n            }\n        });\n    }\n\n    private async _generateThumbnail(\n        file: File,\n        max_width: number,\n        max_height: number,\n    ) {\n        console.log('File:', file, max_width, max_height);\n        if (file.type.includes('video')) {\n            return this._generateVideoThumbnail(file, max_width, max_height);\n        } else {\n            return this._generateImageThumbnail(file, max_width, max_height);\n        }\n    }\n\n    private _generateImageThumbnail(\n        file: File,\n        max_width: number,\n        max_height: number,\n    ) {\n        return new Promise<string>((resolve, reject) => {\n            const img = new Image();\n            img.src = URL.createObjectURL(file);\n            console.log('Image:', img.src);\n\n            img.onload = () => {\n                const image = this._generateThumbnailFromResource(\n                    img,\n                    img.width,\n                    img.height,\n                    max_width,\n                    max_height,\n                );\n                URL.revokeObjectURL(img.src);\n                resolve(image);\n            };\n\n            img.onerror = reject;\n        });\n    }\n\n    private _generateVideoThumbnail(\n        file: File,\n        max_width: number,\n        max_height: number,\n    ) {\n        return new Promise<string>((resolve, reject) => {\n            // Create video element\n            const video = document.createElement('video');\n            video.autoplay = true;\n            video.muted = true;\n            video.src = URL.createObjectURL(file);\n\n            video.onloadeddata = () => {\n                const image = this._generateThumbnailFromResource(\n                    video,\n                    video.videoWidth,\n                    video.videoHeight,\n                    max_width,\n                    max_height,\n                );\n\n                // Clean up\n                URL.revokeObjectURL(video.src);\n                resolve(image);\n            };\n\n            video.onerror = reject;\n        });\n    }\n\n    private _generateThumbnailFromResource(\n        data,\n        source_width,\n        source_height,\n        max_width: number,\n        max_height: number,\n    ) {\n        // Create canvas element\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n\n        // Calculate thumbnail dimensions\n        let thumbnailWidth = source_width;\n        let thumbnailHeight = source_height;\n        const aspectRatio = thumbnailWidth / thumbnailHeight;\n\n        if (thumbnailWidth > max_width) {\n            thumbnailWidth = max_height;\n            thumbnailHeight = thumbnailWidth / aspectRatio;\n        }\n\n        if (thumbnailHeight > max_height) {\n            thumbnailHeight = max_width;\n            thumbnailWidth = thumbnailHeight * aspectRatio;\n        }\n\n        canvas.width = thumbnailWidth;\n        canvas.height = thumbnailHeight;\n\n        // Draw video frame on canvas\n        ctx.drawImage(data, 0, 0, thumbnailWidth, thumbnailHeight);\n\n        // Convert canvas to data URL\n        const dataURL = canvas.toDataURL('image/jpeg');\n\n        return dataURL;\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { first } from 'rxjs/operators';\n\nimport { AsyncHandler } from '@placeos/common';\nimport { OrganisationService } from '@placeos/organisation';\nimport { SignageStateService } from './signage-state.service';\n\n@Component({\n    selector: 'signage-topbar',\n    template: `\n        <div\n            class=\"flex items-center bg-base-100 h-20 px-4 border-b border-base-200 space-x-2\"\n        >\n            <!-- <mat-form-field appearance=\"outline\">\n                <mat-select\n                    multiple\n                    [(ngModel)]=\"zones\"\n                    (ngModelChange)=\"updateZones($event)\"\n                    placeholder=\"All Levels\"\n                >\n                    <mat-option\n                        *ngFor=\"let level of levels | async\"\n                        [value]=\"level.id\"\n                    >\n                        {{ level.display_name || level.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-slide-toggle\n                class=\"m-2\"\n                [ngModel]=\"(filters | async)?.only_onsite\"\n                (ngModelChange)=\"setFilters({ only_onsite: $event })\"\n                ><div class=\"text-xs\">Onsite Only</div></mat-slide-toggle\n            >\n            <div class=\"flex-1 w-2\"></div>\n            <searchbar\n                class=\"mr-2\"\n                (modelChange)=\"setSearch($event)\"\n            ></searchbar> -->\n        </div>\n    `,\n    styles: [\n        `\n            mat-form-field {\n                height: 3.25em;\n                width: 8em;\n            }\n        `,\n    ],\n})\nexport class SignageTopbarComponent extends AsyncHandler implements OnInit {\n    /** List of selected levels */\n    public zones: string[] = [];\n    /** List of levels for the active building */\n    public readonly levels = this._org.active_levels;\n\n    // public readonly filters = this._state.filters;\n    // /** Set filtered date */\n    // public readonly setDate = (date) => this._state.setFilters({ date });\n    // /** Set filtered date */\n    // public readonly setFilters = (filters) => this._state.setFilters(filters);\n    // /** Set filter string */\n    // public readonly setSearch = (str) => this._state.setSearchString(str);\n    // /** Update active zones for desks */\n    // public readonly updateZones = (zones) => {\n    //     this._router.navigate([], {\n    //         relativeTo: this._route,\n    //         queryParams: { zone_ids: zones.join(',') },\n    //     });\n    //     this._state.setFilters({ zones });\n    // };\n\n    constructor(\n        private _state: SignageStateService,\n        private _org: OrganisationService,\n        private _route: ActivatedRoute,\n        private _router: Router\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe((params) => {\n                if (params.has('zone_ids')) {\n                    const zones = params.get('zone_ids').split(',');\n                    if (zones.length) {\n                        const level = this._org.levelWithID(zones);\n                        if (!level) {\n                            return;\n                        }\n                        this._org.building = this._org.buildings.find(\n                            (bld) => bld.id === level.parent_id\n                        );\n                        this.zones = zones;\n                    }\n                }\n            })\n        );\n        this.subscription(\n            'levels',\n            this._org.active_levels.subscribe((levels) => {\n                this.zones = this.zones.filter((zone) =>\n                    levels.find((lvl) => lvl.id === zone)\n                );\n                if (!this.zones.length && levels.length) {\n                    this.zones.push(levels[0].id);\n                }\n                // this.updateZones(this.zones);\n            })\n        );\n        // this.setSearch('');\n    }\n}\n","import { Component } from '@angular/core';\nimport { BehaviorSubject, combineLatest } from 'rxjs';\nimport { SignageStateService } from './signage-state.service';\nimport {\n    map,\n    shareReplay,\n    startWith,\n    switchMap,\n    take,\n    tap,\n} from 'rxjs/operators';\nimport { ActivatedRoute } from '@angular/router';\nimport { AsyncHandler, notifySuccess, unique } from '@placeos/common';\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\nimport {\n    listZoneTriggers,\n    SignagePlaylist,\n    updateTrigger,\n    updateZone,\n} from '@placeos/ts-client';\n\n@Component({\n    selector: 'signage-zones',\n    template: `\n        <div class=\"relative h-full w-full overflow-visible flex space-x-4\">\n            <div sidebar class=\"w-64 h-full flex flex-col space-y-4 py-4\">\n                <h3 class=\"text-xl font-medium text-center\">Zones</h3>\n                <mat-form-field\n                    appearance=\"outline\"\n                    class=\"w-full no-subscript\"\n                >\n                    <input\n                        matInput\n                        placeholder=\"Search...\"\n                        [ngModel]=\"search.getValue()\"\n                        (ngModelChange)=\"search.next($event)\"\n                    />\n                </mat-form-field>\n                @if ((zones | async)?.length > 0) {\n                    <div class=\"h-1/2 flex-1 w-full overflow-auto space-y-2\">\n                        @for (zone of zones | async; track zone.id) {\n                            <a\n                                matRipple\n                                class=\"w-full px-6 rounded-3xl min-h-12 flex items-center hover:bg-base-200 truncate z-10\"\n                                [class.!bg-secondary]=\"\n                                    selected.getValue() === zone.id\n                                \"\n                                [class.text-secondary-content]=\"\n                                    selected.getValue() === zone.id\n                                \"\n                                [routerLink]=\"[]\"\n                                [queryParams]=\"{ zone: zone.id }\"\n                            >\n                                {{ zone.display_name || zone.name }}\n                            </a>\n                            @if (\n                                (active_zone | async)?.id === zone.id &&\n                                !switching\n                            ) {\n                                @for (\n                                    trigger of triggers | async;\n                                    track trigger.id\n                                ) {\n                                    <div\n                                        class=\"relative flex items-center space-x-2 z-0\"\n                                    >\n                                        <div class=\"w-6\">\n                                            <div\n                                                class=\"absolute h-16 w-4 border-b-2 border-l-2 border-base-300 top-1/2 left-6 -translate-y-full\"\n                                            ></div>\n                                        </div>\n                                        <a\n                                            matRipple\n                                            class=\"w-full px-6 rounded-3xl min-h-12 flex items-center hover:bg-base-200 truncate\"\n                                            [class.!bg-secondary]=\"\n                                                selected_trigger.getValue() ===\n                                                trigger?.id\n                                            \"\n                                            [class.text-secondary-content]=\"\n                                                selected_trigger.getValue() ===\n                                                trigger?.id\n                                            \"\n                                            [routerLink]=\"[]\"\n                                            [queryParams]=\"{\n                                                zone: zone.id,\n                                                trigger: trigger?.id,\n                                            }\"\n                                        >\n                                            {{\n                                                trigger?.display_name ||\n                                                    trigger?.name ||\n                                                    'Trigger'\n                                            }}\n                                        </a>\n                                    </div>\n                                }\n                            }\n                        }\n                    </div>\n                } @else {\n                    <div\n                        class=\"flex flex-col items-center justify-center p-8 space-y-2 opacity-30\"\n                    >\n                        <app-icon class=\"text-6xl\">hide_image</app-icon>\n                        <p class=\"text-center\">\n                            {{\n                                search.getValue()\n                                    ? 'No matching zones found'\n                                    : 'No zones'\n                            }}\n                        </p>\n                    </div>\n                }\n            </div>\n            <div\n                class=\"relative flex flex-col flex-1 w-1/2 h-full overflow-auto rounded-lg border border-base-300 p-4 shadow space-y-4\"\n            >\n                @if (active_zone | async) {\n                    <signage-item-playlists\n                        class=\"flex flex-col flex-1\"\n                        [item]=\"\n                            (active_trigger | async) || (active_zone | async)\n                        \"\n                        [name]=\"(active_trigger | async) ? 'trigger' : 'zone'\"\n                        (add)=\"this.adding = true\"\n                        (remove)=\"removePlaylist($event)\"\n                        (ondrop)=\"drop($event)\"\n                    ></signage-item-playlists>\n                } @else {\n                    <div\n                        class=\"absolute inset-0 flex flex-col items-center justify-center space-y-2 opacity-30\"\n                    >\n                        <app-icon class=\"text-6xl\">desktop_windows</app-icon>\n                        <p>Select a zone from the left to view playlists</p>\n                    </div>\n                }\n                <search-overlay\n                    *ngIf=\"adding\"\n                    [item_list]=\"playlists | async\"\n                    (selected)=\"addPlaylist($event)\"\n                    (close)=\"adding = false\"\n                ></search-overlay>\n            </div>\n        </div>\n    `,\n    styles: [``],\n})\nexport class SignageZonesComponent extends AsyncHandler {\n    public adding = false;\n    public switching = false;\n    public readonly search = new BehaviorSubject<string>('');\n    public readonly loading = this._state.loading;\n    public readonly zones = combineLatest([\n        this.search,\n        this._state.zones,\n    ]).pipe(\n        map(([search, list]) =>\n            list.filter((_) =>\n                _.name.toLowerCase().includes(search.toLowerCase()),\n            ),\n        ),\n    );\n    public readonly selected = new BehaviorSubject('');\n    public readonly selected_trigger = new BehaviorSubject('');\n    public readonly active_zone = combineLatest([\n        this.zones,\n        this.selected,\n    ]).pipe(map(([zones, id]) => zones.find((item) => item.id === id)));\n\n    public readonly triggers = this.selected.pipe(\n        switchMap((id) => listZoneTriggers(id)),\n        map((_) => _.data),\n        tap((_) => setTimeout(() => (this.switching = false), 100)),\n        shareReplay(1),\n    );\n\n    public readonly active_trigger = combineLatest([\n        this.triggers,\n        this.selected_trigger,\n    ]).pipe(map(([list, id]) => list.find((item) => item.id === id)));\n\n    public readonly playlists = combineLatest([\n        this.active_zone,\n        this.active_trigger,\n        this._state.playlists,\n        this._state.has_changed,\n    ]).pipe(\n        map(([zone, trigger, playlists]) =>\n            playlists.filter(\n                (_) => !(trigger || zone)?.playlists.find((id) => _.id === id),\n            ),\n        ),\n    );\n\n    constructor(\n        private _state: SignageStateService,\n        private _route: ActivatedRoute,\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'route.params',\n            this._route.queryParamMap.subscribe((params) => {\n                this.switching =\n                    params.get('zone') !== this.selected.getValue();\n                this.selected.next(params.get('zone') || '');\n                this.selected_trigger.next(params.get('trigger') || '');\n            }),\n        );\n    }\n\n    public async addPlaylist(playlist: SignagePlaylist) {\n        const zone = await this.active_zone.pipe(take(1)).toPromise();\n        const trigger = await this.active_trigger.pipe(take(1)).toPromise();\n        const item = trigger || zone;\n        const playlists = [...item.playlists, playlist.id];\n        const method: any = trigger ? updateTrigger : updateZone;\n        await method(\n            item.id,\n            { playlists, version: zone.version },\n            'patch',\n        ).toPromise();\n        notifySuccess(\n            `Successfully added playlist to the ${trigger ? 'trigger' : 'zone'}`,\n        );\n        this._state.changed();\n        this.adding = false;\n    }\n\n    public async removePlaylist(playlist: SignagePlaylist) {\n        const zone = await this.active_zone.pipe(take(1)).toPromise();\n        const trigger = await this.active_trigger.pipe(take(1)).toPromise();\n        const item = trigger || zone;\n        const playlists = item.filter((id) => playlist.id !== id);\n        const method: any = trigger ? updateTrigger : updateZone;\n        await method(\n            item.id,\n            { playlists, version: zone.version },\n            'patch',\n        ).toPromise();\n        notifySuccess(\n            `Successfully removed playlist from ${trigger ? 'trigger' : 'zone'}`,\n        );\n        this._state.changed();\n        this.adding = false;\n    }\n\n    public async drop(event: CdkDragDrop<SignagePlaylist[]>) {\n        const zone = await this.active_zone.pipe(take(1)).toPromise();\n        const trigger = await this.active_trigger.pipe(take(1)).toPromise();\n        const item = trigger || zone;\n        const old_playlist = item.playlists;\n        const playlists = [...old_playlist];\n        moveItemInArray(playlists, event.previousIndex, event.currentIndex);\n        (item as any).playlists = playlists;\n        this._state.changed();\n        const method: any = trigger ? updateTrigger : updateZone;\n        await method(item.id, { playlists, version: zone.version }, 'patch')\n            .toPromise()\n            .catch((e) => {\n                (item as any).playlists = old_playlist;\n                this._state.changed();\n                throw e;\n            });\n        notifySuccess(\n            `Successfully re-ordered playlists on ${trigger ? 'trigger' : 'zone'}`,\n        );\n        this._state.changed();\n    }\n}\n","import { Component, OnInit } from '@angular/core';\n\nimport { SignageStateService } from './signage-state.service';\nimport { NavigationEnd, Router } from '@angular/router';\nimport { AsyncHandler } from '@placeos/common';\n\n@Component({\n    selector: '[app-new-staff]',\n    template: `\n        <app-topbar></app-topbar>\n        <div class=\"flex flex-1 h-px\">\n            <app-sidebar></app-sidebar>\n            <main class=\"flex flex-col flex-1 w-1/2 h-full\">\n                <div class=\"p-8 h-28 flex items-center justify-between\">\n                    <h2 class=\"text-2xl font-medium\">\n                        Digital Signage Management\n                    </h2>\n                    <button\n                        btn\n                        matRipple\n                        class=\"w-40\"\n                        *ngIf=\"\n                            active_link === 'Media' ||\n                            active_link === 'Displays'\n                        \"\n                        (click)=\"newItem(active_link)\"\n                    >\n                        Add {{ singular(active_link) }}\n                    </button>\n                </div>\n                <div class=\"px-8\">\n                    <nav mat-tab-nav-bar [tabPanel]=\"tabPanel\">\n                        @for (link of links; track link) {\n                            <a\n                                mat-tab-link\n                                [routerLink]=\"'/signage/' + (link | lowercase)\"\n                                (click)=\"active_link = link\"\n                                [active]=\"active_link == link\"\n                            >\n                                {{ link }}\n                            </a>\n                        }\n                    </nav>\n                </div>\n                <mat-tab-nav-panel\n                    class=\"flex-1 h-1/2 overflow-auto px-8 py-4\"\n                    #tabPanel\n                >\n                    <router-outlet></router-outlet>\n                </mat-tab-nav-panel>\n            </main>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n                background-color: var(--b1);\n            }\n        `,\n    ],\n})\nexport class SignageComponent extends AsyncHandler implements OnInit {\n    public readonly loading = this._state.loading;\n    public links = ['Media', 'Displays', 'Zones'];\n    public active_link = this.links[0];\n\n    public readonly previewFile = (event) =>\n        this._state.previewFileFromInput(event);\n\n    public singular(name: string) {\n        if (name === 'Media') return 'Playlist';\n        if (name === 'Playlists') return 'Playlist';\n        if (name === 'Displays') return 'Display';\n        return '';\n    }\n\n    public async newItem(name: string) {\n        let result = null;\n        switch (name) {\n            case 'Media':\n            case 'Playlists':\n                result = await this._state.editPlaylist();\n                if (result) {\n                    this._router.navigate(['/signage/media'], {\n                        queryParams: { playlist: result.id },\n                    });\n                }\n                break;\n            case 'Displays':\n                result = await this._state.editDisplay();\n                if (!result) return;\n                this._router.navigate(['/signage/displays'], {\n                    queryParams: { display: result.id },\n                });\n                break;\n        }\n    }\n\n    constructor(\n        private _state: SignageStateService,\n        private _router: Router,\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'route.query',\n            this._router.events.subscribe((event) => {\n                if (event instanceof NavigationEnd) {\n                    this.active_link = this.links.find((_) =>\n                        this._router.url.includes(_.toLowerCase()),\n                    );\n                }\n            }),\n        );\n        this.active_link = this.links.find((_) =>\n            this._router.url.includes(_.toLowerCase()),\n        );\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule, Type } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Route } from '@angular/router';\nimport { DragDropModule } from '@angular/cdk/drag-drop';\n\nimport { UIModule } from '../ui/ui.module';\nimport { SignageComponent } from './signage.component';\nimport { SignageTopbarComponent } from './signage-topbar.component';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { SignageMediaComponent } from './signage-media.component';\nimport { SignageMediaPreviewModalComponent } from './signage-media-preview-modal.component';\nimport { ComponentsModule } from '@placeos/components';\nimport { SignagePlaylistModalComponent } from './signage-playlist-modal.component';\nimport { SignagePlaylistMediaListComponent } from './signage-playlist-media-list.component';\nimport { SignageMediaListComponent } from './signage-media-list.component';\nimport { SignageDisplaysComponent } from './signage-displays.component';\nimport { SearchOverlayComponent } from './search-overlay.component';\nimport { SignageZonesComponent } from './signage-zones.component';\nimport { SignageItemPlaylistsComponent } from './signage-item-playlists.component';\nimport { SignageMediaModalComponent } from './signage-media-modal.component';\nimport { SignageDisplayModalComponent } from './signage-display-modal.component';\n\nconst ROUTES: Route[] = [\n    {\n        path: '',\n        component: SignageComponent,\n        children: [\n            { path: '', redirectTo: 'media', pathMatch: 'full' },\n            { path: 'media', component: SignageMediaComponent },\n            { path: 'displays', component: SignageDisplaysComponent },\n            { path: 'zones', component: SignageZonesComponent },\n            { path: '*', redirectTo: 'media', pathMatch: 'full' },\n        ],\n    },\n];\n\nexport const COMPONENTS: Type<any>[] = [\n    SignageComponent,\n    SignageTopbarComponent,\n    SignageMediaComponent,\n    SignageMediaModalComponent,\n    SignageMediaPreviewModalComponent,\n    SignagePlaylistModalComponent,\n    SignageMediaListComponent,\n    SignagePlaylistMediaListComponent,\n\n    SignageDisplaysComponent,\n    SignageDisplayModalComponent,\n    SignageZonesComponent,\n    SearchOverlayComponent,\n    SignageItemPlaylistsComponent,\n];\n\n@NgModule({\n    declarations: [...COMPONENTS],\n    imports: [\n        CommonModule,\n        FormsModule,\n        UIModule,\n        ComponentsModule,\n        RouterModule.forChild(ROUTES),\n        MatTabsModule,\n        DragDropModule,\n    ],\n})\nexport class SignageModule {}\n"],"names":["EventEmitter","SimpleChanges","TemplateRef","BehaviorSubject","i0","ɵɵelementContainer","ɵɵtemplate","SearchOverlayComponent_For_8_Conditional_1_ng_container_0_Template","ɵɵproperty","ctx_r2","result_template","ɵɵpureFunction1","_c0","item_r2","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","name","ɵɵlistener","SearchOverlayComponent_For_8_Template_button_click_0_listener","ɵɵrestoreView","_r1","$implicit","ɵɵnextContext","ɵɵresetView","selected","next","SearchOverlayComponent_For_8_Conditional_1_Template","SearchOverlayComponent_For_8_Conditional_2_Template","ɵɵconditional","SearchOverlayComponent_Conditional_9_Template_button_click_0_listener","_r4","close","SearchOverlayComponent","constructor","item_list","search","_items","ngOnChanges","changes","_","_2","selectors","inputs","outputs","features","ɵɵNgOnChangesFeature","decls","vars","consts","template","SearchOverlayComponent_Template","rf","ctx","SearchOverlayComponent_Template_div_click_0_listener","SearchOverlayComponent_Template_div_keydown_esc_0_listener","ɵɵresolveWindow","ɵɵelement","SearchOverlayComponent_Template_div_click_2_listener","$event","stopPropagation","SearchOverlayComponent_Template_input_ngModelChange_3_listener","SearchOverlayComponent_Template_div_click_6_listener","ɵɵrepeaterCreate","SearchOverlayComponent_For_8_Template","ɵɵrepeaterTrackByIdentity","SearchOverlayComponent_Conditional_9_Template","getValue","ɵɵrepeater","length","FormControl","FormGroup","Validators","MAT_DIALOG_DATA","MatDialogRef","unique","OrganisationService","addSystem","PlaceSystem","updateSystem","ctx_r0","form","SignageDisplayModalComponent_footer_5_Template_button_click_1_listener","_r2","save","SignageDisplayModalComponent","_data","_dialog_ref","_org","loading","display","id","display_name","required","description","orientation","_this","_asyncToGenerator","markAllAsTouched","updateValueAndValidity","invalid","form_value","getRawValue","new_display","signage","zones","organisation","region","building","filter","method","result","toPromise","ɵɵdirectiveInject","i1","i2","SignageDisplayModalComponent_Template","SignageDisplayModalComponent_button_3_Template","SignageDisplayModalComponent_main_4_Template","SignageDisplayModalComponent_footer_5_Template","SignageDisplayModalComponent_ng_template_6_Template","ɵɵtemplateRefExtractor","load_state_r3","combineLatest","SignageStateService","map","shareReplay","switchMap","take","tap","ActivatedRoute","AsyncHandler","notifySuccess","SettingsService","moveItemInArray","listSystemTriggers","updateTrigger","ɵɵclassProp","selected_trigger","trigger_r1","ɵɵpureFunction0","ɵɵpureFunction2","_c2","display_r2","ɵɵtextInterpolate","SignageDisplaysComponent_Conditional_6_For_2_Conditional_2_For_1_Template","_forTrack0","ɵɵpipeBind1","triggers","SignageDisplaysComponent_Conditional_6_For_2_Conditional_2_Template","_c1","tmp_16_0","active_display","switching","SignageDisplaysComponent_Conditional_6_For_2_Template","displays","_c3","_c4","zone_r5","tmp_15_0","SignageDisplaysComponent_Conditional_10_div_6_For_2_Template","tmp_3_0","SignageDisplaysComponent_Conditional_10_Template_signage_item_playlists_add_0_listener","adding","SignageDisplaysComponent_Conditional_10_Template_signage_item_playlists_remove_0_listener","removePlaylist","SignageDisplaysComponent_Conditional_10_Template_signage_item_playlists_ondrop_0_listener","drop","SignageDisplaysComponent_Conditional_10_div_6_Template","SignageDisplaysComponent_Conditional_10_Template_button_click_20_listener","removeDisplay","active_trigger","tmp_4_0","menu_r6","signage_path","tmp_7_0","ɵɵsanitizeUrl","SignageDisplaysComponent_search_overlay_13_Template_search_overlay_selected_0_listener","_r7","addPlaylist","SignageDisplaysComponent_search_overlay_13_Template_search_overlay_close_0_listener","playlists","SignageDisplaysComponent","_settings","get","_state","_route","this","pipe","list","toLowerCase","includes","find","item","data","setTimeout","sys_id","control_system_id","has_changed","trigger","ngOnInit","subscription","queryParamMap","subscribe","params","playlist","_this2","version","changed","_this3","event","_this4","old_playlist","previousIndex","currentIndex","catch","e","i3","ɵɵInheritDefinitionFeature","SignageDisplaysComponent_Template","SignageDisplaysComponent_Template_input_ngModelChange_5_listener","SignageDisplaysComponent_Conditional_6_Template","SignageDisplaysComponent_Conditional_8_Template","SignageDisplaysComponent_Conditional_10_Template","SignageDisplaysComponent_Conditional_12_Template","SignageDisplaysComponent_search_overlay_13_Template","tmp_1_0","startWith","extra","SignageItemPlaylistsComponent_Conditional_5_For_2_div_1_Template","SignageItemPlaylistsComponent_Conditional_5_For_2_Template_button_click_21_listener","item_r4","_r3","remove","playlistCount","menu_r5","SignageItemPlaylistsComponent_Conditional_5_Template_div_cdkDropListDropped_0_listener","ondrop","SignageItemPlaylistsComponent_Conditional_5_For_2_Template","SignageItemPlaylistsComponent_Conditional_5_Template_button_click_4_listener","add","emit","active_playlists","SignageItemPlaylistsComponent_Conditional_7_Template_button_click_6_listener","_r6","PLAYLIST_ITEM_COUNTS","SignageItemPlaylistsComponent","count","_playlist_ids","ids","old_counts","last_updated","updated_at","getPlaylistMedia","then","media","Date","now","ngContentSelectors","SignageItemPlaylistsComponent_Template","SignageItemPlaylistsComponent_div_3_Template","ɵɵprojection","SignageItemPlaylistsComponent_Conditional_5_Template","SignageItemPlaylistsComponent_Conditional_7_Template","getUnixTime","startOfMinute","media_r4","thumbnail_url","play_time","SignageMediaListComponent_Conditional_5_For_3_Conditional_1_Template","SignageMediaListComponent_Conditional_5_For_3_Conditional_2_Template","SignageMediaListComponent_Conditional_5_For_3_div_3_Template","SignageMediaListComponent_Conditional_5_For_3_img_5_Template","SignageMediaListComponent_Conditional_5_For_3_div_8_Template","SignageMediaListComponent_Conditional_5_For_3_Template_button_click_17_listener","ctx_r1","editItem","SignageMediaListComponent_Conditional_5_For_3_Template_button_click_23_listener","previewItem","SignageMediaListComponent_Conditional_5_For_3_Template_button_click_29_listener","removeItem","valid_from","valid_until","media_type","SignageMediaListComponent_Conditional_5_Template_div_cdkDropListDropped_0_listener","SignageMediaListComponent_Conditional_5_For_3_Template","playlist_ids","SignageMediaListComponent","playlist_count","previewMedia","editMedia","_ref","removeMedia","_x","apply","arguments","Array","fill","idx","SignageMediaListComponent_Template","SignageMediaListComponent_Template_input_ngModelChange_4_listener","SignageMediaListComponent_Conditional_5_Template","SignageMediaListComponent_Conditional_7_Template","updateSignageMedia","MediaAnimation","addYears","endOfDay","startOfDay","ɵɵpipeBind2","value","start_time","video_length","SignageMediaModalComponent_main_4_Template_button_click_2_listener","preview","SignageMediaModalComponent_main_4_Conditional_12_Template","SignageMediaModalComponent_main_4_Conditional_17_Template","SignageMediaModalComponent_main_4_Conditional_18_Template","thumbnail","url","SignageMediaModalComponent_footer_5_Template_button_click_1_listener","saveMedia","SignageMediaModalComponent","file","type","media_url","_file_url","URL","createObjectURL","file_thumbnail","animation","Default","valueOf","patchValue","file_metadata","Math","floor","ngOnDestroy","revokeObjectURL","valid","disableClose","new_media","onError","onAdd","SignageMediaModalComponent_Template","SignageMediaModalComponent_button_3_Template","SignageMediaModalComponent_main_4_Template","SignageMediaModalComponent_footer_5_Template","SignageMediaModalComponent_ng_template_6_Template","load_state_r4","resource","toString","SignageMediaPreviewModalComponent_main_6_img_2_Template","SignageMediaPreviewModalComponent_main_6_video_3_Template","SignageMediaPreviewModalComponent_footer_7_Template_button_click_1_listener","SignageMediaPreviewModalComponent","can_save","SignageMediaPreviewModalComponent_Template","SignageMediaPreviewModalComponent_main_6_Template","SignageMediaPreviewModalComponent_footer_7_Template","SignageMediaPreviewModalComponent_ng_template_8_Template","Router","listSignagePlaylistMedia","SignageMediaComponent_Conditional_9_For_1_Template_a_cdkDropListDropped_0_listener","playlist_r2","selected_playlist","$index_r4","SignageMediaComponent_Conditional_9_For_1_Template","SignageMediaComponent_Conditional_11_button_5_Template_button_click_0_listener","_r5","SignageMediaComponent_Conditional_11_button_5_Template","tmp_2_0","SignageMediaComponent_div_16_Template_div_dragleave_0_listener","hideOverlay","SignageMediaComponent_div_16_Template_div_drop_0_listener","previewFile","SignageMediaComponent_div_16_Template_input_change_7_listener","SignageMediaComponent","onEnter","clearTimeout","show_dropzone","dataTransfer","types","target","HTMLInputElement","preventDefault","timeout","_router","editPlaylist","navigate","query","previewFileFromInput","has","previousContainer","media_list","new_media_list","items","updatePlaylistMedia","SignageMediaComponent_Template","SignageMediaComponent_Template_input_ngModelChange_5_listener","SignageMediaComponent_Conditional_9_Template","SignageMediaComponent_Conditional_11_Template","SignageMediaComponent_Template_div_dragover_12_listener","SignageMediaComponent_Template_div_dragenter_12_listener","SignageMediaComponent_Template_div_drop_12_listener","SignageMediaComponent_signage_media_list_14_Template","SignageMediaComponent_signage_playlist_media_list_15_Template","SignageMediaComponent_div_16_Template","tmp_5_0","of","catchError","debounceTime","SignageMedia","ɵɵelementContainerStart","SignagePlaylistMediaListComponent_Conditional_47_ng_container_2_Conditional_2_Template","SignagePlaylistMediaListComponent_Conditional_47_ng_container_2_Conditional_3_Template","SignagePlaylistMediaListComponent_Conditional_47_ng_container_2_div_4_Template","SignagePlaylistMediaListComponent_Conditional_47_ng_container_2_Template_button_click_17_listener","item_r5","SignagePlaylistMediaListComponent_Conditional_47_ng_container_2_Template_button_click_23_listener","SignagePlaylistMediaListComponent_Conditional_47_ng_container_2_Template_button_click_29_listener","SignagePlaylistMediaListComponent_Conditional_47_Template_div_cdkDropListDropped_0_listener","SignagePlaylistMediaListComponent_Conditional_47_ng_container_2_Template","SignagePlaylistMediaListComponent","_playlist","_ref2","_playlist_media","m","animation_name","Cut","CrossFade","SlideBottom","SlideLeft","SlideRight","SlideTop","SignagePlaylistMediaListComponent_Template","SignagePlaylistMediaListComponent_Template_button_click_9_listener","SignagePlaylistMediaListComponent_Template_button_click_15_listener","SignagePlaylistMediaListComponent_div_29_Template","SignagePlaylistMediaListComponent_Conditional_47_Template","SignagePlaylistMediaListComponent_Conditional_49_Template","menu_r7","enabled","tmp_6_0","tmp_8_0","random","tmp_9_0","default_animation","tmp_10_0","default_duration","tmp_11_0","MatDialog","ElementRef","notifyError","SignagePlaylist","SignagePlaylistModalComponent_footer_5_Template_button_click_1_listener","savePlaylist","SignagePlaylistModalComponent","_dialog","max","viewQuery","SignagePlaylistModalComponent_Query","SignagePlaylistModalComponent_button_3_Template","SignagePlaylistModalComponent_main_4_Template","SignagePlaylistModalComponent_footer_5_Template","SignagePlaylistModalComponent_ng_template_6_Template","openConfirmModal","uploadFile","addSignageMedia","addSignagePlaylist","querySignageMedia","querySignagePlaylists","querySystems","queryZones","removeSignageMedia","removeSignagePlaylist","removeSystem","updateSignagePlaylist","updateSignagePlaylistMedia","dataURLtoBlob","dataURL","prefix","split","mimeType","byteString","atob","arrayBuffer","ArrayBuffer","uint8Array","Uint8Array","i","charCodeAt","Blob","dataURLtoFile","filename","File","_change","_loading","_active_upload","asObservable","active_building","bld","limit","sort","a","b","created_at","localeCompare","active_region","zone_id","Promise","resolve","ref","open","afterClosed","playlist_id","_getMediaMetadata","_generateThumbnail","f","addMedia","editDisplay","console","log","title","content","icon","reason","map_id","email","module_list","call","new_playlist","_this5","element","files","undefined","previewFileMedia","_this6","componentInstance","media_item","_this7","upload","reject","state","resolved","s","link","is_landscape","thumbnail_image","media_id","media_uri","thumbnail_id","key","updateMedia","_this8","video","document","createElement","src","addEventListener","videoWidth","videoHeight","duration","load","img","Image","onload","width","height","max_width","max_height","_this9","_generateVideoThumbnail","_generateImageThumbnail","image","_generateThumbnailFromResource","onerror","autoplay","muted","onloadeddata","source_width","source_height","canvas","getContext","thumbnailWidth","thumbnailHeight","aspectRatio","drawImage","toDataURL","ɵɵinject","factory","ɵfac","providedIn","first","SignageTopbarComponent","levels","active_levels","initialised","level","levelWithID","buildings","parent_id","zone","lvl","push","SignageTopbarComponent_Template","listZoneTriggers","updateZone","zone_r2","SignageZonesComponent_Conditional_6_For_2_Conditional_2_For_1_Template","SignageZonesComponent_Conditional_6_For_2_Conditional_2_Template","active_zone","SignageZonesComponent_Conditional_6_For_2_Template","SignageZonesComponent_Conditional_10_Template_signage_item_playlists_add_0_listener","SignageZonesComponent_Conditional_10_Template_signage_item_playlists_remove_0_listener","SignageZonesComponent_Conditional_10_Template_signage_item_playlists_ondrop_0_listener","SignageZonesComponent_search_overlay_13_Template_search_overlay_selected_0_listener","SignageZonesComponent_search_overlay_13_Template_search_overlay_close_0_listener","SignageZonesComponent","SignageZonesComponent_Template","SignageZonesComponent_Template_input_ngModelChange_5_listener","SignageZonesComponent_Conditional_6_Template","SignageZonesComponent_Conditional_8_Template","SignageZonesComponent_Conditional_10_Template","SignageZonesComponent_Conditional_12_Template","SignageZonesComponent_search_overlay_13_Template","NavigationEnd","SignageComponent_button_7_Template_button_click_0_listener","newItem","active_link","singular","SignageComponent_For_11_Template_a_click_0_listener","link_r4","SignageComponent","queryParams","links","events","attrs","SignageComponent_Template","SignageComponent_button_7_Template","SignageComponent_For_11_Template","tabPanel_r5","CommonModule","Type","FormsModule","RouterModule","DragDropModule","UIModule","MatTabsModule","ComponentsModule","ROUTES","path","component","children","redirectTo","pathMatch","COMPONENTS","SignageModule","_3","forChild","declarations","imports"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}