"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([[408],{8408:(k_,N,i)=>{i.r(N),i.d(N,{RoomManagerModule:()=>j_});var f=i(4755),s=i(9401),S=i(5055),q=i(3045),C=i(2886),j=i(7577),_=i(2223),k=i(4945),g=i(5861),M=i(5912),c=i(8186),A=i(591),T=i(3426),B=i(1086),V=i(2198),H=i(7545),O=i(4850),__=i(7221),e_=i(5154),u=i(2840),d=i(1426),E=i(6286),p=i(9114),o_=i(8097),P=i(787),v=i(1217),t_=i(1292),h=i(3649),n_=i(8467),I=i(7184),a_=i(1022),i_=i(3670),U=i(5306),R=i(6996);function l_(o,a){1&o&&(_.TgZ(0,"button",4)(1,"app-icon"),_._uU(2,"close"),_.qZA()())}function r_(o,a){if(1&o&&(_.TgZ(0,"mat-option",30),_._uU(1),_.qZA()),2&o){const e=a.$implicit;_.Q6J("value",e.id),_.xp6(1),_.hij(" ",e.display_name||e.name," ")}}function m_(o,a){if(1&o&&(_.TgZ(0,"div",19)(1,"label",27),_.tHW(2,28),_._UZ(3,"span"),_.N_p(),_.qZA(),_.TgZ(4,"mat-form-field",21)(5,"mat-select",29),_.YNc(6,r_,2,2,"mat-option",25),_.ALo(7,"async"),_.qZA(),_.TgZ(8,"mat-error"),_._uU(9,"Level is required"),_.qZA()()()),2&o){const e=_.oxw(3);_.xp6(1),_.ekj("error",e.form.controls.zone.invalid&&e.form.controls.zone.touched),_.xp6(5),_.Q6J("ngForOf",_.lcZ(7,3,e.levels))}}function s_(o,a){1&o&&(_.TgZ(0,"mat-error"),_.SDv(1,36),_.qZA())}function c_(o,a){if(1&o&&(_.TgZ(0,"div",31)(1,"label",32),_.tHW(2,33),_._UZ(3,"span"),_.N_p(),_.qZA(),_.TgZ(4,"mat-form-field",21),_._UZ(5,"input",34),_.YNc(6,s_,2,0,"mat-error",35),_.qZA()()),2&o){const e=_.oxw(3);_.xp6(1),_.ekj("error",e.form.controls.name.invalid&&e.form.controls.name.touched),_.xp6(5),_.Q6J("ngIf",e.form.controls.name.invalid)}}function d_(o,a){1&o&&(_.TgZ(0,"mat-error"),_.SDv(1,40),_.qZA())}function f_(o,a){if(1&o&&(_.TgZ(0,"div",31)(1,"label",37),_.SDv(2,38),_.qZA(),_.TgZ(3,"mat-form-field",21),_._UZ(4,"input",39),_.YNc(5,d_,2,0,"mat-error",35),_.qZA()()),2&o){const e=_.oxw(3);_.xp6(1),_.ekj("error",e.form.controls.email.invalid&&e.form.controls.email.touched),_.xp6(4),_.Q6J("ngIf",e.form.controls.email.invalid)}}function R_(o,a){1&o&&(_.TgZ(0,"div",31)(1,"label",41),_.SDv(2,42),_.qZA(),_.TgZ(3,"mat-form-field",21),_._UZ(4,"input",43),_.qZA()())}function O_(o,a){1&o&&(_.TgZ(0,"div",31)(1,"label",44),_.SDv(2,45),_.qZA(),_.TgZ(3,"mat-form-field",21),_._UZ(4,"input",46),_.qZA()())}function E_(o,a){1&o&&(_.TgZ(0,"mat-error"),_.SDv(1,50),_.qZA())}function p_(o,a){if(1&o&&(_.TgZ(0,"div",31)(1,"label",47),_.SDv(2,48),_.qZA(),_.TgZ(3,"mat-form-field",21),_._UZ(4,"input",49),_.YNc(5,E_,2,0,"mat-error",35),_.qZA()()),2&o){const e=_.oxw(3);_.xp6(1),_.ekj("error",e.form.controls.capacity.invalid&&e.form.controls.capacity.touched),_.xp6(4),_.Q6J("ngIf",e.form.controls.capacity.invalid)}}function S_(o,a){1&o&&(_.TgZ(0,"div",19)(1,"mat-checkbox",51),_.SDv(2,52),_.qZA()())}function g_(o,a){1&o&&(_.TgZ(0,"div",19)(1,"label",53),_.SDv(2,54),_.qZA(),_.TgZ(3,"mat-form-field",21),_._UZ(4,"textarea",55),_.qZA()())}function M_(o,a){if(1&o){const e=_.EpF();_.TgZ(0,"mat-chip-row",61),_.NdJ("removed",function(){const l=_.CHM(e).$implicit,r=_.oxw(4);return _.KtG(r.removeFeature(l))}),_._uU(1),_.TgZ(2,"app-icon",62),_._uU(3,"close"),_.qZA()()}if(2&o){const e=a.$implicit;_.Q6J("selectable",!0)("removable",!0),_.xp6(1),_.hij(" ",e," ")}}function u_(o,a){if(1&o){const e=_.EpF();_.TgZ(0,"div",19)(1,"label"),_.SDv(2,56),_.qZA(),_.TgZ(3,"mat-form-field",21)(4,"mat-chip-grid",57,58),_.YNc(6,M_,4,3,"mat-chip-row",59),_.TgZ(7,"input",60),_.NdJ("matChipInputTokenEnd",function(n){_.CHM(e);const l=_.oxw(3);return _.KtG(l.addFeature(n))}),_.qZA()()()()}if(2&o){const e=_.MAs(5),t=_.oxw(3);_.xp6(1),_.ekj("error",t.form.controls.features.invalid&&t.form.controls.features.touched),_.xp6(5),_.Q6J("ngForOf",t.feature_list),_.xp6(1),_.Q6J("matChipInputFor",e)("matChipInputSeparatorKeyCodes",t.separators)("matChipInputAddOnBlur",!0)}}function N_(o,a){1&o&&(_.TgZ(0,"div",19)(1,"label",63),_.SDv(2,64),_.qZA(),_.TgZ(3,"mat-form-field",21),_._UZ(4,"input",65),_.qZA()())}function C_(o,a){if(1&o&&(_.TgZ(0,"mat-option",30),_._uU(1),_.qZA()),2&o){const e=a.$implicit;_.Q6J("value",e),_.xp6(1),_.Oqu(e)}}function A_(o,a){1&o&&(_.TgZ(0,"mat-option",66),_._uU(1," No matching timezones "),_.qZA()),2&o&&_.Q6J("disabled",!0)}function T_(o,a){1&o&&(_.TgZ(0,"div",19)(1,"label",67),_.SDv(2,68),_.qZA(),_._UZ(3,"image-list-field",69),_.qZA())}function P_(o,a){if(1&o&&(_.TgZ(0,"form",7),_.YNc(1,m_,10,5,"div",8),_.TgZ(2,"div",9),_.YNc(3,c_,7,3,"div",10),_.YNc(4,f_,6,3,"div",10),_.qZA(),_.TgZ(5,"div",9),_.YNc(6,R_,5,0,"div",10),_.YNc(7,O_,5,0,"div",10),_.qZA(),_.TgZ(8,"div",11)(9,"div",12)(10,"label",13),_._uU(11," Default Setup Duration "),_.TgZ(12,"app-icon",14),_._uU(13," info_outline "),_.qZA()(),_._UZ(14,"a-duration-field",15),_.qZA(),_.TgZ(15,"div",12)(16,"label",16),_._uU(17," Default Breakdown Duration "),_.TgZ(18,"app-icon",17),_._uU(19," info_outline "),_.qZA()(),_._UZ(20,"a-duration-field",18),_.qZA()(),_.TgZ(21,"div",9),_.YNc(22,p_,6,3,"div",10),_.YNc(23,S_,3,0,"div",8),_.qZA(),_.YNc(24,g_,5,0,"div",8),_.YNc(25,u_,8,6,"div",8),_.YNc(26,N_,5,0,"div",8),_.TgZ(27,"div",19)(28,"label",20),_._uU(29,"Timezone"),_.qZA(),_.TgZ(30,"mat-form-field",21)(31,"app-icon",22),_._uU(32,"search"),_.qZA(),_._UZ(33,"input",23),_.qZA(),_.TgZ(34,"mat-autocomplete",null,24),_.YNc(36,C_,2,2,"mat-option",25),_.YNc(37,A_,2,1,"mat-option",26),_.qZA()(),_.YNc(38,T_,4,0,"div",8),_.qZA()),2&o){const e=_.MAs(35),t=_.oxw(2);_.Q6J("formGroup",t.form),_.xp6(1),_.Q6J("ngIf",t.form.controls.zone),_.xp6(2),_.Q6J("ngIf",t.form.controls.name),_.xp6(1),_.Q6J("ngIf",t.form.controls.email),_.xp6(2),_.Q6J("ngIf",t.form.controls.display_name),_.xp6(1),_.Q6J("ngIf",t.form.controls.display_name),_.xp6(1),_.Q6J("formGroup",t.settings_form),_.xp6(6),_.Q6J("min",0),_.xp6(6),_.Q6J("min",0),_.xp6(2),_.Q6J("ngIf",t.form.controls.capacity),_.xp6(1),_.Q6J("ngIf",t.form.controls.bookable),_.xp6(1),_.Q6J("ngIf",t.form.controls.description),_.xp6(1),_.Q6J("ngIf",t.form.controls.features),_.xp6(1),_.Q6J("ngIf",t.form.controls.map_id),_.xp6(7),_.Q6J("matAutocomplete",e),_.xp6(3),_.Q6J("ngForOf",t.filtered_timezones),_.xp6(1),_.Q6J("ngIf",!t.timezones.length),_.xp6(1),_.Q6J("ngIf",t.form.controls.images)}}function v_(o,a){if(1&o&&(_.TgZ(0,"main",5),_.YNc(1,P_,39,18,"form",6),_.qZA()),2&o){const e=_.oxw();_.xp6(1),_.Q6J("ngIf",e.form)}}function h_(o,a){if(1&o){const e=_.EpF();_.TgZ(0,"footer",70)(1,"button",71),_.NdJ("click",function(){_.CHM(e);const n=_.oxw();return _.KtG(n.save())}),_._uU(2,"Save"),_.qZA()()}}function I_(o,a){1&o&&(_.TgZ(0,"div",72),_._UZ(1,"mat-spinner",73),_.TgZ(2,"p",74),_._uU(3,"Saving room..."),_.qZA()())}let U_=(()=>{class o extends d.cx{get feature_list(){return this.form.controls.features.value}constructor(e,t,n){super(),this._data=e,this._dialog_ref=t,this._org=n,this.loading=!1,this.timezones=[],this.filtered_timezones=[],this.levels=this._org.active_levels,this.form=(0,C.ji)(this._data.room),this.settings_form=new s.cw({setup:new s.NI(0),breakdown:new s.NI(0)}),this.encryption_levels=[{id:c.sUp.None,name:"None"},{id:c.sUp.Support,name:"Support"},{id:c.sUp.Admin,name:"Admin"},{id:c.sUp.NeverDisplay,name:"Never Display"}],this.query_fn=l=>(0,c.I0G)({q:l}).pipe((0,O.U)(r=>r.data)),this.separators=[u.K5,u.OC,u.L_]}ngOnInit(){var e=this;return(0,g.Z)(function*(){const{details:t}=yield(0,c.rlq)(e._org.organisation.id,"settings").toPromise(),n=(0,d.Wn)(["events","overflow"],t)||{};e._data.room.id&&n[e._data.room.id]&&e.settings_form.patchValue(n[e._data.room.id])})()}ngOnChanges(e){e.form&&(this.updateTimezoneList(),this.subscription("tz-change",this.form.valueChanges.subscribe(({timezone:t})=>this.filtered_timezones=this.timezones.filter(n=>n.toLowerCase().includes(t.toLowerCase())))))}addFeature(e){if(!this.form||!this.form.controls.features)return;const t=e.input,n=e.value,l=this.feature_list;(n||"").trim()&&(l.push(n),this.form.controls.features.setValue(l)),t&&(t.value="")}removeFeature(e){if(!this.form||!this.form.controls.features)return;const t=this.feature_list,n=t.indexOf(e);n>=0&&(t.splice(n,1),this.form.controls.features.setValue(t))}updateTimezoneList(){const e=this.form?.value?.timezone||"";this.timezones=d.sM,this.filtered_timezones=this.timezones.filter(t=>t.toLowerCase().includes(e.toLowerCase()))}save(){var e=this;return(0,g.Z)(function*(){if(!e.form.valid)return(0,d.cB)(`Some form fields are invalid. [${(0,d.RD)(e.form).join(", ")}]`);console.log("Form:",e.form.value),e.form.value.id||e.form.patchValue({display_name:e.form.value.display_name||e.form.value.name,zones:(0,d.Tw)([e._org.organisation.id,e._org.building.parent_id,e._org.building.id,`${e.form.value.zone?.id||e.form.value.zone||""}`]).filter(r=>r)}),e.loading=!0,e._dialog_ref.disableClose=!0;const t=e.form.getRawValue(),{details:n}=yield(0,c.rlq)(e._org.organisation.id,"settings").toPromise(),l=(0,d.Wn)(["events","overflow"],n)||{};l[t.id]=e.settings_form.value,yield(0,c.Ymr)(e._org.organisation.id,{name:"settings",details:{...n,events:{...n.events||{},overflow:l}},description:""}).toPromise(),yield(t.id?(0,c.EQg)(t.id,t):(0,c.tgw)(t)).toPromise(),e._dialog_ref.disableClose=!1,e._dialog_ref.close(!0),e.loading=!1})()}}return o.\u0275fac=function(e){return new(e||o)(_.Y36(E.WI),_.Y36(E.so),_.Y36(M.w7))},o.\u0275cmp=_.Xpm({type:o,selectors:[["room-form-modal"]],features:[_.qOj,_.TTD],decls:8,vars:5,consts:function(){let a,e,t,n,l,r,Z,G,y,D,F,$,Y,z,w,W,J,K,X,Q;return a=$localize`:@@zoneLabel␟805d5ab24c829f98df246a63541ee827ce04a4c4␟6308222021008136210: Level${"\ufffd#3\ufffd"}:START_TAG_SPAN:*${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN:: `,e=$localize`:@@nameLabel␟ce22d533a3bc86b04d363cdacf055e861f719107␟253967969926135345: Name${"\ufffd#3\ufffd"}:START_TAG_SPAN:*${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN:: `,t=$localize`:@@systemNamePlaceholder␟412d74982a750ad38d528a416090cad259267cf7␟3270670506078615677:Room Name`,n=$localize`:@@systemNameError␟a76167ad44bb224b5e970e7cdce5e03ba50bbf34␟4944106304667909261:Room name is required`,l=$localize`:@@emailLabel␟7e7d6d1958ec577b1f852c495aa8abb88a5a4e8c␟3680148548084285501: Email: `,r=$localize`:@@systemEmailPlaceholder␟796480f8af4a196dc6343cf00d09c7841f270f3a␟3140960526772549616:Room Email`,Z=$localize`:@@emailError␟66a4553914df830f0bc1dd1f0a42c57fd85864de␟6407494155279173358:A valid email is required`,G=$localize`:@@displayNameLabel␟e966586c3aadb81b0555b483a36f46776d9792c8␟6691873398244034720:Display Name: `,y=$localize`:@@displayNamePlaceholder␟e438ba78cbafdb5bcbce0820bfaad995a504f222␟3013055597615607317:Display Name`,D=$localize`:@@codeNameLabel␟61275d3a79a1234bf3fcb50f72d8dc798ef57e27␟7610172352109675938:Code: `,F=$localize`:@@codeNamePlaceholder␟68572de01b84c678be4bf8a27b990ecac2f41ce9␟8186013988289067040:Code`,$=$localize`:@@capacityLabel␟4fdfe5d0bf8898e5def2c3f9d5971f5e23e753d9␟255201359546348839: Capacity: `,Y=$localize`:@@capacityPlaceholder␟ce9dfdc6dccb28dc75a78c704e09dc18fb02dcfa␟7825570888384392250:Capacity`,z=$localize`:@@capacityError␟dedde35e8848b99432791a4326aa103b8ec774c4␟8134498951699811316: A valid positive number is required `,w=$localize`:@@bookableLabel␟96462a3176e48f64fd7d25d58a6d49afe4628700␟414602767324525018: Bookable `,W=$localize`:@@descriptionLabel␟4a22c6843133f0b0d7dc0d28f864f2f90c1de7ad␟6996799422725544865:Description:`,J=$localize`:@@featuresLabel␟048b3adb78b9aabee65dbb43d9c5aadcda49015f␟1939786999396738714: Features: `,K=$localize`:@@mapIdLabel␟46a8087017d0d929ed6d398ba5d3a5ea1be7ab9b␟1613414518051599973:Map ID:`,X=$localize`:@@mapIdPlaceholder␟8936f99965a07edd4b09a0e4120f4dd5de79604d␟609514156045819245:Map SVG ID selector e.g. area-01.10-status`,Q=$localize`:@@imagesLabel␟e5d9e00faa06714d7671b164cad364b26f4c585b␟5137125764814732349:Images:`,[["btn","","icon","","mat-dialog-close","",4,"ngIf"],["class","max-h-[65vh] overflow-y-auto overflow-x-hidden p-4",4,"ngIf","ngIfElse"],["class","p-2 flex justify-end border-t border-gray-200",4,"ngIf"],["load_state",""],["btn","","icon","","mat-dialog-close",""],[1,"max-h-[65vh]","overflow-y-auto","overflow-x-hidden","p-4"],["system","","class","flex flex-col w-[36rem] max-w-[calc(100vw-4rem)]",3,"formGroup",4,"ngIf"],["system","",1,"flex","flex-col","w-[36rem]","max-w-[calc(100vw-4rem)]",3,"formGroup"],["class","flex flex-col",4,"ngIf"],[1,"flex","space-x-2"],["class","flex flex-col flex-1",4,"ngIf"],[1,"flex","space-x-2",3,"formGroup"],[1,"flex-1","flex","flex-col","space-y-2"],["for","setup",1,"flex","items-center"],["matTooltip","Time before a meeting needed for setup and preparation for the upcoming meeting",1,"ml-2"],["name","setup","formControlName","setup",3,"min"],["for","breakdown",1,"flex","items-center"],["matTooltip","Time after a meeting needed for cleaning and preparation for next meeting",1,"ml-2"],["name","breakdown","formControlName","breakdown",3,"min"],[1,"flex","flex-col"],["for","timezone"],["appearance","outline"],["matPrefix","",1,"text-2xl"],["matInput","","formControlName","timezone","placeholder","Room timezone",3,"matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"disabled",4,"ngIf"],["for","zone"],a,["formControlName","zone","placeholder","Select Level"],[3,"value"],[1,"flex","flex-col","flex-1"],["for","system-name"],e,["matInput","","name","system-name","placeholder",t,"formControlName","name","required",""],[4,"ngIf"],n,["for","system-email"],l,["matInput","","name","system-email","placeholder",r,"formControlName","email"],Z,["for","display-name"],G,["matInput","","name","display-name","placeholder",y,"formControlName","display_name"],["for","code-name"],D,["matInput","","name","code-name","placeholder",F,"formControlName","code"],["for","capacity"],$,["matInput","","name","capacity","type","number","placeholder",Y,"formControlName","capacity"],z,["name","bookable","formControlName","bookable"],w,["for","description"],W,["matInput","","name","description","placeholder","Description","formControlName","description"],J,["aria-label","Room features"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","New feature...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[3,"selectable","removable","removed"],["matChipRemove",""],["for","map_id"],K,["matInput","","name","map_id","placeholder",X,"formControlName","map_id"],[3,"disabled"],["for","images"],Q,["name","images","formControlName","images"],[1,"p-2","flex","justify-end","border-t","border-gray-200"],["btn","",1,"w-32",3,"click"],[1,"flex","flex-col","items-center","justify-center","w-64","h-64"],["diameter","32"],[1,"mt-4"]]},template:function(e,t){if(1&e&&(_.TgZ(0,"header")(1,"h2"),_._uU(2),_.qZA(),_.YNc(3,l_,3,0,"button",0),_.qZA(),_.YNc(4,v_,2,1,"main",1),_.YNc(5,h_,3,0,"footer",2),_.YNc(6,I_,4,0,"ng-template",null,3,_.W1O)),2&e){const n=_.MAs(7);_.xp6(2),_.hij("",t.form.value.id?"Edit":"Add"," Room"),_.xp6(1),_.Q6J("ngIf",!t.loading),_.xp6(1),_.Q6J("ngIf",!t.loading)("ngIfElse",n),_.xp6(1),_.Q6J("ngIf",!t.loading)}},dependencies:[f.sg,f.O5,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.Q7,p.KE,p.TO,p.qo,o_.Nt,P.gD,v.ey,t_.oG,h.gM,n_.Ou,E.ZT,I.XC,I.ZL,s.sg,s.u,a_.B,i_.h,U.o,R.RA,R.oH,R.qH,R.z3,f.Ov],styles:["mat-checkbox[_ngcontent-%COMP%]{margin-top:2.5em;margin-bottom:1.5em}@media screen and (max-width: 640px){mat-checkbox[_ngcontent-%COMP%]{margin-top:0}}"]}),o})(),b=(()=>{class o{constructor(e,t){this._org=e,this._dialog=t,this._options=new A.X({}),this._change=new A.X(0),this.options=this._options.asObservable(),this.room_list=(0,T.aj)([this._org.active_building,this._change]).pipe((0,V.h)(([n])=>!!n?.id),(0,H.w)(([n])=>(0,c.vIL)({zone_id:n.id}).pipe((0,O.U)(({data:l})=>l),(0,__.K)(()=>(0,B.of)([])))),(0,O.U)(n=>n.filter(l=>this._org.levelWithID(l.zones)).sort((l,r)=>l.name.localeCompare(r.name))),(0,e_.d)(1)),this.filtered_rooms=(0,T.aj)([this.room_list,this._options]).pipe((0,O.U)(([n,l])=>(l.zone&&(n=n.filter(r=>r.zones.includes(l.zone))),l.search&&(n=n.filter(r=>r.name.toLowerCase().includes(l.search.toLowerCase()))),n)))}setFilters(e){this._options.next({...this._options.getValue(),...e})}setSearchString(e){this._options.next({...this._options.getValue(),search:e})}editRoom(e=new c.G6j){this._dialog.open(U_,{data:{room:e}}).afterClosed().subscribe(n=>{n&&setTimeout(()=>this._change.next(Date.now()),300)})}}return o.\u0275fac=function(e){return new(e||o)(_.LFG(M.w7),_.LFG(E.uw))},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var b_=i(7224),x_=i(9396);function L_(o,a){if(1&o&&(_.TgZ(0,"mat-option",3),_._uU(1),_.qZA()),2&o){const e=a.$implicit;_.Q6J("value",e.id),_.xp6(1),_.hij(" ",e.display_name||e.name," ")}}let x=(()=>{class o extends d.cx{get building(){return this._org.building}constructor(e,t,n,l){super(),this._manager=e,this._org=t,this._route=n,this._router=l,this.levels=this._org.active_levels,this.filters=this._manager.options,this.setFilters=r=>this._manager.setFilters(r),this.setSearch=r=>this._manager.setSearchString(r),this.updateZones=r=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_id:r}}),this._manager.setFilters({zone:r})},this.newRoom=()=>this._manager.editRoom()}ngOnInit(){var e=this;return(0,g.Z)(function*(){yield e._org.initialised.pipe((0,b_.P)(t=>t)).toPromise(),e.subscription("route.query",e._route.queryParamMap.subscribe(t=>{if(t.has("zone_id")){const n=t.get("zone_id");if(n.length){const l=e._org.levelWithID([n]);if(!l)return;e._org.building=e._org.buildings.find(r=>r.id===l.parent_id),e.setFilters({zone:n})}}})),e.subscription("levels",e._org.active_levels.subscribe(t=>{var n=t.find(l=>l.id===n);!n&&t.length&&(n=t[0].id),e.updateZones(n)})),e.setSearch("")})()}}return o.\u0275fac=function(e){return new(e||o)(_.Y36(b),_.Y36(M.w7),_.Y36(S.gz),_.Y36(S.F0))},o.\u0275cmp=_.Xpm({type:o,selectors:[["room-manager-topbar"]],features:[_.qOj],decls:12,vars:7,consts:[[1,"flex","items-center","bg-white","dark:bg-neutral-700","h-20","px-4","border-b","border-gray-300","dark:border-neutral-500","space-x-2"],["appearance","outline"],["placeholder","All Levels",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["btn","",1,"w-32",3,"click"],[1,"flex-1","w-2"],[1,"mr-2",3,"modelChange"]],template:function(e,t){if(1&e&&(_.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-select",2),_.NdJ("ngModelChange",function(l){return t.updateZones(l)}),_.ALo(3,"async"),_.TgZ(4,"mat-option",3),_._uU(5,"All Levels"),_.qZA(),_.YNc(6,L_,2,2,"mat-option",4),_.ALo(7,"async"),_.qZA()(),_.TgZ(8,"button",5),_.NdJ("click",function(){return t.newRoom()}),_._uU(9,"New Room"),_.qZA(),_._UZ(10,"div",6),_.TgZ(11,"searchbar",7),_.NdJ("modelChange",function(l){return t.setSearch(l)}),_.qZA()()),2&e){let n;_.xp6(2),_.Q6J("ngModel",null==(n=_.lcZ(3,3,t.filters))?null:n.zone),_.xp6(2),_.Q6J("value",null==t.building?null:t.building.id),_.xp6(2),_.Q6J("ngForOf",_.lcZ(7,5,t.levels))}},dependencies:[f.sg,s.JJ,s.On,x_.U,p.KE,P.gD,v.ey,f.Ov],styles:["mat-form-field[_ngcontent-%COMP%]{height:3.25rem}"]}),o})();var Z_=i(1110),G_=i(3838);function y_(o,a){if(1&o&&(_._uU(0),_.ALo(1,"level"),_.ALo(2,"level")),2&o){const e=a.data;let t;_.hij(" ",(null==(t=_.lcZ(1,1,e))?null:t.display_name)||(null==(t=_.lcZ(2,3,e))?null:t.name)," ")}}function D_(o,a){if(1&o&&(_.TgZ(0,"div",5)(1,"app-icon"),_._uU(2),_.qZA()()),2&o){const e=a.data;_.ekj("bg-red-500",!e)("bg-green-500",e),_.xp6(2),_.Oqu(e?"done":"close")}}function F_(o,a){if(1&o){const e=_.EpF();_.TgZ(0,"div",6)(1,"button",7),_.NdJ("click",function(){const l=_.CHM(e).row,r=_.oxw();return _.KtG(r.editRoom(l))}),_.TgZ(2,"app-icon"),_._uU(3,"edit"),_.qZA()()()}}const $_=function(){return["display_name","zones","capacity","type","bookable","actions"]},Y_=function(){return["Room Name","Level","Capacity","Room Type","Bookable"," "]},z_=function(){return["flex","8r","6r","8r","6r","8r"]},w_=function(o,a,e){return{bookable:o,zones:a,actions:e}};let L=(()=>{class o{constructor(e){this._manager=e,this.rooms=this._manager.filtered_rooms,this.editRoom=t=>this._manager.editRoom(t)}}return o.\u0275fac=function(e){return new(e||o)(_.Y36(b))},o.\u0275cmp=_.Xpm({type:o,selectors:[["room-list"]],decls:8,vars:12,consts:[[1,"absolute","inset-0","overflow-auto"],["empty","No rooms for selected level or building",1,"block","min-w-[48rem]","w-full","h-full",3,"dataSource","columns","display_column","column_size","template"],["level_template",""],["bool_template",""],["action_template",""],[1,"rounded","h-8","w-8","flex","items-center","justify-center","text-2xl","text-white","mx-auto"],[1,"w-full","flex","justify-end","space-x-2"],["btn","","icon","","matTooltip","Edit Room",3,"click"]],template:function(e,t){if(1&e&&(_.TgZ(0,"div",0),_._UZ(1,"custom-table",1),_.qZA(),_.YNc(2,y_,3,5,"ng-template",null,2,_.W1O),_.YNc(4,D_,3,5,"ng-template",null,3,_.W1O),_.YNc(6,F_,4,0,"ng-template",null,4,_.W1O)),2&e){const n=_.MAs(3),l=_.MAs(5),r=_.MAs(7);_.xp6(1),_.Q6J("dataSource",t.rooms)("columns",_.DdM(5,$_))("display_column",_.DdM(6,Y_))("column_size",_.DdM(7,z_))("template",_.kEZ(8,w_,l,n,r))}},dependencies:[h.gM,U.o,Z_.C,G_.M]}),o})();const W_=["app-room-manager",""];let J_=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=_.Xpm({type:o,selectors:[["","app-room-manager",""]],attrs:W_,decls:4,vars:0,consts:[[1,"relative","overflow-hidden","flex","flex-col"],[1,"block","w-full"],[1,"block","w-full","relative","flex-1","h-1/2"]],template:function(e,t){1&e&&(_._UZ(0,"sidebar"),_.TgZ(1,"main",0),_._UZ(2,"room-manager-topbar",1)(3,"room-list",2),_.qZA())},dependencies:[k.k,x,L],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%;background:var(--bg)}sidebar[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;min-width:50%;height:100%}"]}),o})();var K_=i(6866),X_=i(3320);const Q_=["app-new-room-manager",""],q_=[{path:"",component:J_},{path:"new",component:(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=_.Xpm({type:o,selectors:[["","app-new-room-manager",""]],attrs:Q_,decls:6,vars:0,consts:[[1,"flex","flex-1","h-px"],[1,"flex","flex-col","flex-1","w-1/2","h-full"],[1,"block","w-full"],[1,"block","w-full","relative","flex-1","h-1/2"]],template:function(e,t){1&e&&(_._UZ(0,"app-topbar"),_.TgZ(1,"div",0),_._UZ(2,"app-sidebar"),_.TgZ(3,"main",1),_._UZ(4,"room-manager-topbar",2)(5,"room-list",3),_.qZA()())},dependencies:[K_.O,X_.u,x,L],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background-color:#fff}sidebar[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;min-width:50%;height:100%}"]}),o})()}];let j_=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=_.oAB({type:o}),o.\u0275inj=_.cJS({imports:[f.ez,s.u5,q.v,C.YR,j.PP,R.Hi,S.Bz.forChild(q_)]}),o})()}}]);