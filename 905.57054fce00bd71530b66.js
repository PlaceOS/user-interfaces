(self.webpackChunkplaceos=self.webpackChunkplaceos||[]).push([[905],{8239:(e,t,n)=>{"use strict";n.d(t,{f:()=>s});var r=n(3779),a=n(8583);class s{constructor(e={}){this.id=e.id||"",this.name=e.name||"",this.primary=!!e.primary,this.summary=e.summary||"",this.can_edit=!!e.can_edit,this.resource=new a.T(e.resource||e.system),this.availability=(e.availability||[]).map(({starts_at:e,ends_at:t,date:n,duration:a,status:s})=>({date:new Date(n,e).valueOf(),duration:a||(0,r.Z)(t,e),status:s})),this.hidden=!!e.hidden}}},9720:(e,t,n)=>{"use strict";n.d(t,{mD:()=>d,tS:()=>l});var r=n(8908),a=n(9996),s=n(3206),i=n(8583),o=n(8239);const c="/api/staff/v1/calendars",u=e=>(0,a.U)(t=>t.filter(e=>!!e.resource).map(t=>new i.T(Object.assign(Object.assign({},t.resource),{level:null==e?void 0:e.levelWithID(t.resource.zones),availability:t.availability}))).filter(e=>e.bookable));function d(e,t){return function(e){const t=(0,s.UK)(e);return(0,r.U2M)(`${c}/availability${t?"?"+t:""}`).pipe((0,a.U)(e=>e.map(e=>new o.f(e))))}(e).pipe(u(t))}function l(e,t){const n=(0,s.UK)(e);return(0,r.U2M)(`${c}/free_busy${n?"?"+n:""}`).pipe((0,a.U)(e=>e.map(e=>new o.f(e))),u(t))}},6905:(e,t,n)=>{"use strict";n.d(t,{ym:()=>r.y,rq:()=>l,r7:()=>N,ry:()=>d,Vh:()=>u}),n(3206),n(9294),n(9720);var r=n(648),a=n(8908),s=n(9996),i=n(2775),o=n(7271);const c="/api/staff/v1/events";function u(e,t={}){const n=(0,i.U)(t);return(0,a.U2M)(`${c}/${encodeURIComponent(e)}${n?"?"+n:""}`).pipe((0,s.U)(e=>new r.y(e)))}const d=(e,t)=>{var n;return null===(n=e)||void 0===n||delete n.status,e.id?function(e,t,n={},o="patch"){const u=(0,i.U)(n);return("patch"===o?a.r$K:a.gzd)(`${c}/${encodeURIComponent(e)}${u?"?"+u:""}`,"patch"===o?t:new r.y(t).toJSON()).pipe((0,s.U)(e=>new r.y(e)))}(e.id,e,t):function(e){return(0,a.v_Q)(`${c}`,new r.y(e).toJSON()).pipe((0,s.U)(e=>new r.y(e)))}(e)};function l(e,t,n,r={}){const u=(0,i.U)(Object.assign(Object.assign({},r),{state:n}));return(0,a.v_Q)(`${c}/${encodeURIComponent(e)}/guests/${t}/checkin${u?"?"+u:""}`,"").pipe((0,s.U)(e=>new o.OO(e)))}var p=n(6073),w=n(6925),v=n(1948),I=n(5090),y=n(6280),g=n(8774),h=n(804);const m=e=>{var t;return(null===(t=e.parent)||void 0===t?void 0:t.get("date"))&&(0,g.Z)(new Date,(0,h.Z)(e.parent.get("date").value,e.value))?{duration:!0}:null};function N(e){const t=new p.cw({id:new p.NI(e.id),host:new p.NI(e.host||"",[p.kI.required]),organiser:new p.NI(e.organiser||{},[p.kI.required]),creator:new p.NI(e.creator,[p.kI.required]),calendar:new p.NI(e.calendar),attendees:new p.NI(e.attendees||[]),resources:new p.NI(e.resources||[]),title:new p.NI(e.title,[p.kI.required]),body:new p.NI(e.body),private:new p.NI(e.private),date:new p.NI(e.date,[p.kI.required]),duration:new p.NI(e.duration,[m]),all_day:new p.NI(e.all_day),recurring:new p.NI(e.recurring),recurrence:new p.NI(e.recurrence),recurring_master_id:new p.NI(e.recurring_master_id),master:new p.NI(e.master),attachments:new p.NI(e.attachments),catering:new p.NI(e.extension_data.catering||[]),visitor_type:new p.NI(e.ext("visitor_type")),location:new p.NI(e.location),needs_space:new p.NI(!0),needs_parking:new p.NI(e.ext("needs_parking")||!1),system:new p.NI(e.system)});return t.get("organiser").valueChanges.subscribe(e=>t.controls.host.setValue(null==e?void 0:e.email)),t.get("resources").valueChanges.subscribe(e=>t.controls.system.setValue(e.length?e[0]:null)),e.id&&(t.get("host").disable(),t.get("organiser").disable()),"started"===e.state&&t.get("date").disable(),t}n(391),(0,w.Z)(function(e,t){(0,y.Z)(2,arguments);var n=(0,I.Z)(e),r=(0,v.Z)(t);return n.setMinutes(r),n}(function(e,t){(0,y.Z)(2,arguments);var n=(0,I.Z)(e),r=(0,v.Z)(t);return n.setHours(r),n}(new Date,6),0),{days:-1})}}]);