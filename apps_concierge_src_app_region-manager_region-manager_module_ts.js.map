{"version":3,"file":"apps_concierge_src_app_region-manager_region-manager_module_ts.js","mappings":"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","sources":["./apps/concierge/src/app/region-manager/region-list.component.ts","./apps/concierge/src/app/region-manager/region-management.service.ts","./apps/concierge/src/app/region-manager/region-manager.component.ts","./apps/concierge/src/app/region-manager/region-manager.module.ts","./apps/concierge/src/app/region-manager/region-modal.component.ts","./libs/users/src/index.ts","./libs/users/src/lib/location.class.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { RegionManagementService } from './region-management.service';\nimport { notifySuccess } from '@placeos/common';\nimport { Clipboard } from '@angular/cdk/clipboard';\n\n@Component({\n    selector: 'region-list',\n    template: `\n        <div class=\"absolute inset-0 overflow-auto px-8\">\n            <simple-table\n                class=\"min-w-[32rem] block text-sm\"\n                [data]=\"regions\"\n                empty_message=\"No Regions\"\n                [columns]=\"[\n                    {\n                        key: 'display_name',\n                        name: 'Building Name',\n                        content: name_template\n                    },\n                    { key: 'building_count', name: 'Buildings', size: '8rem' },\n                    {\n                        key: 'actions',\n                        name: ' ',\n                        content: action_template,\n                        size: '3rem',\n                        sortable: false\n                    }\n                ]\"\n                [sortable]=\"true\"\n            ></simple-table>\n            <div class=\"w-full h-20\"></div>\n        </div>\n        <ng-template #name_template let-row=\"row\" let-data=\"data\">\n            <button\n                class=\"px-4 py-2 text-left leading-tight\"\n                (click)=\"copyToClipboard(row.id)\"\n            >\n                <div class=\"\">{{ data }}</div>\n                <div class=\"text-[0.625rem] opacity-30 font-mono\">\n                    {{ row.id }}\n                </div>\n            </button>\n        </ng-template>\n        <ng-template #action_template let-row=\"row\">\n            <div class=\"w-full flex justify-end space-x-2\">\n                <button\n                    icon\n                    matRipple\n                    class=\"h-12 w-12 rounded\"\n                    [matMenuTriggerFor]=\"menu\"\n                >\n                    <app-icon>more_vert</app-icon>\n                </button>\n                <mat-menu #menu=\"matMenu\">\n                    <button mat-menu-item (click)=\"editMetadata(row)\">\n                        <div class=\"flex items-center space-x-2\">\n                            <app-icon>edit_square</app-icon>\n                            <span>App Configuration</span>\n                        </div>\n                    </button>\n                    <button mat-menu-item (click)=\"editRegion(row)\">\n                        <div class=\"flex items-center space-x-2\">\n                            <app-icon>edit</app-icon>\n                            <span>Edit Region</span>\n                        </div>\n                    </button>\n                    <button mat-menu-item (click)=\"removeRegion(row)\">\n                        <div class=\"flex items-center space-x-2 text-red-500\">\n                            <app-icon class=\"text-error\">delete</app-icon>\n                            <span>Delete Region</span>\n                        </div>\n                    </button>\n                </mat-menu>\n            </div>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class RegionListComponent {\n    public readonly regions = this._manager.filtered_regions;\n\n    public readonly editRegion = (region) => this._manager.editRegion(region);\n    public readonly removeRegion = (region) =>\n        this._manager.removeRegion(region);\n    public readonly editMetadata = (region) =>\n        this._manager.editRegionMetadata(region);\n\n    public readonly copyToClipboard = (id: string) => {\n        const success = this._clipboard.copy(id);\n        if (success) notifySuccess('Region ID copied to clipboard.');\n    };\n\n    constructor(\n        private _manager: RegionManagementService,\n        private _clipboard: Clipboard\n    ) {}\n}\n","import { Injectable } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { OrganisationService, Region } from '@placeos/organisation';\nimport { PlaceZone, removeZone } from '@placeos/ts-client';\nimport { BehaviorSubject, combineLatest } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { RegionModalComponent } from './region-modal.component';\nimport { AppSettingsModalComponent } from '../ui/app-settings-modal.component';\nimport { notifySuccess, openConfirmModal } from '@placeos/common';\n\nexport interface RegionListOptions {\n    search?: string;\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class RegionManagementService {\n    private _options = new BehaviorSubject<RegionListOptions>({});\n    private _change = new BehaviorSubject(0);\n\n    public options = this._options.asObservable();\n\n    public readonly filtered_regions = combineLatest([\n        this._org.building_list,\n        this._org.region_list,\n        this._options,\n    ]).pipe(\n        map(([buildings, list, options]) => {\n            if (options.search) {\n                list = list.filter((_) =>\n                    _.name.toLowerCase().includes(options.search.toLowerCase())\n                );\n            }\n            for (const region of list) {\n                (region as any).building_count = buildings.filter(\n                    (bld) => bld.parent_id === region.id\n                ).length;\n            }\n            return list;\n        })\n    );\n\n    constructor(\n        private _org: OrganisationService,\n        private _dialog: MatDialog\n    ) {}\n\n    public setFilters(options: Partial<RegionListOptions>) {\n        this._options.next({ ...this._options.getValue(), ...options });\n    }\n\n    public setSearchString(search: string) {\n        this._options.next({ ...this._options.getValue(), search });\n    }\n\n    public editRegion(region: PlaceZone = new PlaceZone()) {\n        const ref = this._dialog.open(RegionModalComponent, {\n            data: region,\n        });\n        ref.afterClosed().subscribe((data) => {\n            if (data) this._org.addZone(data);\n        });\n    }\n\n    public editRegionMetadata(region: PlaceZone = new PlaceZone()) {\n        const ref = this._dialog.open(AppSettingsModalComponent, {\n            data: { zone: region },\n        });\n        ref.afterClosed().subscribe((data) => {\n            if (data) setTimeout(() => location.reload(), 300);\n        });\n    }\n\n    public async removeRegion(region: Region) {\n        const ref = await openConfirmModal(\n            {\n                title: 'Remove Building',\n                content: `Are you sure you want to remove the building \"${region.name}\"?`,\n                icon: { content: 'delete_forever' },\n                confirm_text: 'Remove',\n            },\n            this._dialog\n        );\n        if (ref.reason !== 'done') return ref.close();\n        ref.loading('Removing building...');\n        await removeZone(region.id).toPromise();\n        this._org.removeZone({ id: region.id, tags: ['region'] } as any);\n        notifySuccess('Successfully removed building.');\n        ref.close();\n    }\n}\n","import { Component } from '@angular/core';\nimport { RegionManagementService } from './region-management.service';\n\n@Component({\n    selector: '[app-region-manager]',\n    template: `\n        <app-topbar></app-topbar>\n        <div class=\"flex flex-1 h-px\">\n            <app-sidebar></app-sidebar>\n            <main class=\"flex flex-col flex-1 w-1/2 h-full\">\n                <header\n                    class=\"flex items-center justify-between mb-2 px-8 pt-4 pb-8\"\n                >\n                    <h2 class=\"text-2xl font-medium\">Region Management</h2>\n                    <button btn matRipple (click)=\"newRegion()\" class=\"w-40\">\n                        Add Region\n                    </button>\n                </header>\n                <region-list\n                    class=\"block w-full relative flex-1 h-1/2\"\n                ></region-list>\n            </main>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n                background-color: var(--b1);\n            }\n\n            sidebar {\n                height: 100%;\n            }\n\n            main {\n                display: flex;\n                flex-direction: column;\n                flex: 1;\n                min-width: 50%;\n                height: 100%;\n            }\n        `,\n    ],\n})\nexport class RegionManagerComponent {\n    public readonly newRegion = () => this._state.editRegion();\n\n    constructor(private readonly _state: RegionManagementService) {}\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Route } from '@angular/router';\n\nimport { UIModule } from '../ui/ui.module';\n\nimport { SharedSpacesModule } from '@placeos/spaces';\nimport { SharedUsersModule } from '@placeos/users';\n\nimport { RegionManagerComponent } from './region-manager.component';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { RegionListComponent } from './region-list.component';\nimport { RegionModalComponent } from './region-modal.component';\n\nconst ROUTES: Route[] = [\n    { path: '', component: RegionManagerComponent },\n    { path: 'new', component: RegionManagerComponent },\n];\n\n@NgModule({\n    declarations: [\n        RegionManagerComponent,\n        RegionListComponent,\n        RegionModalComponent,\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        UIModule,\n        SharedSpacesModule,\n        SharedUsersModule,\n        MatChipsModule,\n        RouterModule.forChild(ROUTES),\n    ],\n})\nexport class RegionManagerModule {}\n","import { Component, Inject } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport {\n    AsyncHandler,\n    TIMEZONES_IANA,\n    getInvalidFields,\n    notifyError,\n} from '@placeos/common';\nimport { Region, OrganisationService } from '@placeos/organisation';\nimport { addZone, authority, updateZone } from '@placeos/ts-client';\n\n@Component({\n    selector: 'region-modal',\n    template: `\n        <header>\n            <h2>{{ form.value.id ? 'Edit' : 'Add' }} Region</h2>\n            <button btn icon mat-dialog-close *ngIf=\"!loading\">\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main\n            class=\"max-h-[65vh] overflow-y-auto overflow-x-hidden p-4\"\n            *ngIf=\"!loading; else load_state\"\n        >\n            <form\n                system\n                class=\"flex flex-col w-[36rem] max-w-[calc(100vw-4rem)]\"\n                *ngIf=\"form\"\n                [formGroup]=\"form\"\n            >\n                <div class=\"flex flex-col\" *ngIf=\"form.controls.display_name\">\n                    <label for=\"display-name\" i18n=\"@@displayNameLabel\">\n                        Display Name:\n                    </label>\n                    <mat-form-field appearance=\"outline\">\n                        <input\n                            matInput\n                            name=\"display-name\"\n                            placeholder=\"Display Name\"\n                            i18n-placeholder=\"@@displayNamePlaceholder\"\n                            formControlName=\"display_name\"\n                        />\n                    </mat-form-field>\n                </div>\n                <div class=\"flex flex-col\">\n                    <label for=\"display-name\" i18n=\"@@displayNameLabel\">\n                        Timezone:\n                    </label>\n                    <mat-form-field appearance=\"outline\">\n                        <app-icon matPrefix class=\"text-2xl\">search</app-icon>\n                        <input\n                            matInput\n                            formControlName=\"timezone\"\n                            placeholder=\"Building timezone\"\n                            [matAutocomplete]=\"auto\"\n                        />\n                    </mat-form-field>\n                    <mat-autocomplete #auto=\"matAutocomplete\">\n                        <mat-option\n                            *ngFor=\"let tz of filtered_timezones\"\n                            [value]=\"tz\"\n                            >{{ tz }}</mat-option\n                        >\n                        <mat-option *ngIf=\"!timezones.length\" [disabled]=\"true\">\n                            No matching timezones\n                        </mat-option>\n                    </mat-autocomplete>\n                </div>\n            </form>\n        </main>\n        <footer\n            class=\"p-2 flex justify-end border-t border-base-200\"\n            *ngIf=\"!loading\"\n        >\n            <button btn class=\"w-32\" (click)=\"save()\">Save</button>\n        </footer>\n        <ng-template #load_state>\n            <div class=\"flex flex-col items-center justify-center w-64 h-64\">\n                <mat-spinner diameter=\"32\"></mat-spinner>\n                <p class=\"mt-4\">Saving region...</p>\n            </div>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class RegionModalComponent extends AsyncHandler {\n    public loading = false;\n    public readonly building_list = this._org.building_list;\n\n    public timezones: string[] = [];\n    public filtered_timezones: string[] = [];\n\n    public readonly form = new FormGroup({\n        id: new FormControl(this._data?.id || ''),\n        display_name: new FormControl(this._data?.display_name || '', [\n            Validators.required,\n        ]),\n        timezone: new FormControl(\n            Intl?.DateTimeFormat()?.resolvedOptions()?.timeZone || ''\n        ),\n        parent_id: new FormControl(this._org.organisation.id),\n    });\n\n    constructor(\n        private _org: OrganisationService,\n        @Inject(MAT_DIALOG_DATA) private _data: Region | undefined,\n        private _dialog_ref: MatDialogRef<RegionModalComponent>\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this._updateTimezoneList();\n        this.subscription(\n            'tz-change',\n            this.form.valueChanges.subscribe(\n                ({ timezone }) =>\n                    (this.filtered_timezones = this.timezones.filter((_) =>\n                        _.toLowerCase().includes(timezone.toLowerCase())\n                    ))\n            )\n        );\n    }\n\n    public async save() {\n        if (!this.form.valid) {\n            return notifyError(\n                `Some form fields are invalid. [${getInvalidFields(\n                    this.form\n                ).join(', ')}]`\n            );\n        }\n        const data: any = this.form.getRawValue();\n        data.tags = ['region'];\n        this.loading = true;\n        const resp = await (data.id\n            ? updateZone(data.id, {\n                  ...data,\n                  name: `REGION ${authority().description} ${\n                      data.display_name\n                  }`,\n              })\n            : addZone({\n                  ...data,\n                  name: `REGION ${authority().description} ${\n                      data.display_name\n                  }`,\n              })\n        )\n            .toPromise()\n            .catch();\n        if (resp.id) this._dialog_ref.close(resp);\n        this.loading = false;\n    }\n\n    private _updateTimezoneList() {\n        const timezone = this.form?.value?.timezone || '';\n        this.timezones = TIMEZONES_IANA;\n        this.filtered_timezones = this.timezones.filter((_) =>\n            _.toLowerCase().includes(timezone.toLowerCase())\n        );\n    }\n}\n","export * from './lib/users.module';\nexport * from './lib/new-user-modal.component';\nexport * from './lib/find-availability-modal/find-availability-modal.component';\nexport * from './lib/user-form.component';\nexport * from './lib/location.class';\nexport * from './lib/user.class';\nexport * from './lib/user.utilities';\nexport * from './lib/users.module';\nexport * from './lib/guests.fn';\nexport * from './lib/staff.fn';\n","import { HashMap } from '@placeos/common';\nimport { getUnixTime } from 'date-fns';\n\nexport class MapLocation {\n    /** Source that the location was generated */\n    public type: 'desk' | 'wireless' | 'meeting' | 'other';\n    /** Details of the location */\n    public position: string | { x: number, y: number };\n    /** Accuracy of the location data */\n    public variance: number;\n    /** Unix epoch in seconds that the data was last updated */\n    public last_seen: number;\n    /** ID of the level associated with the location */\n    public level: string;\n    /** ID of the building associated with the location */\n    public building: string;\n    /** Whether user is currently at the location if fixed */\n    public at_location: boolean;\n    /**  */\n    public coordinates_from:\n        | 'top-left'\n        | 'top-right'\n        | 'bottom-left'\n        | 'bottom-right';\n\n    constructor(_data: HashMap = {}) {\n        this.type = _data.type || _data.location || 'other';\n        this.position = _data.position ||\n            _data.map_id || _data.asset_id || {\n                x: _data.x / _data.map_width || 0,\n                y: _data.y / _data.map_height || 0,\n            };\n        this.variance = _data.variance || 0;\n        this.last_seen = _data.last_seen || getUnixTime(new Date());\n        this.level = _data.level;\n        this.building = _data.building;\n        this.at_location = !!_data.at_location;\n        this.coordinates_from = _data.coordinates_from || 'top-left';\n    }\n}\n"],"names":["RegionManagementService","notifySuccess","Clipboard","i0","ɵɵelementStart","ɵɵlistener","RegionListComponent_ng_template_3_Template_button_click_0_listener","row_r2","ɵɵrestoreView","_r1","row","ctx_r2","ɵɵnextContext","ɵɵresetView","copyToClipboard","id","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","data_r4","ɵɵtextInterpolate1","RegionListComponent_ng_template_5_Template_button_click_6_listener","row_r6","_r5","editMetadata","RegionListComponent_ng_template_5_Template_button_click_12_listener","editRegion","RegionListComponent_ng_template_5_Template_button_click_18_listener","removeRegion","ɵɵproperty","menu_r7","RegionListComponent","constructor","_manager","_clipboard","regions","filtered_regions","region","editRegionMetadata","success","copy","_","ɵɵdirectiveInject","i1","i2","_2","selectors","decls","vars","consts","template","RegionListComponent_Template","rf","ctx","ɵɵelement","ɵɵtemplate","RegionListComponent_ng_template_3_Template","ɵɵtemplateRefExtractor","RegionListComponent_ng_template_5_Template","ɵɵpureFunction3","_c3","ɵɵpureFunction1","_c0","name_template_r8","ɵɵpureFunction0","_c1","_c2","action_template_r9","MatDialog","OrganisationService","PlaceZone","removeZone","BehaviorSubject","combineLatest","map","RegionModalComponent","AppSettingsModalComponent","openConfirmModal","_org","_dialog","_options","_change","options","asObservable","building_list","region_list","pipe","buildings","list","search","filter","name","toLowerCase","includes","building_count","bld","parent_id","length","setFilters","next","getValue","setSearchString","ref","open","data","afterClosed","subscribe","addZone","zone","setTimeout","location","reload","_this","_asyncToGenerator","title","content","icon","confirm_text","reason","close","loading","toPromise","tags","ɵɵinject","factory","ɵfac","providedIn","RegionManagerComponent","_state","newRegion","attrs","RegionManagerComponent_Template","RegionManagerComponent_Template_button_click_7_listener","CommonModule","FormsModule","RouterModule","UIModule","SharedSpacesModule","SharedUsersModule","MatChipsModule","ROUTES","path","component","RegionManagerModule","_3","forChild","declarations","imports","FormControl","FormGroup","Validators","MAT_DIALOG_DATA","MatDialogRef","AsyncHandler","TIMEZONES_IANA","getInvalidFields","notifyError","Region","authority","updateZone","ɵɵi18n","tz_r1","RegionModalComponent_main_4_form_1_div_1_Template","RegionModalComponent_main_4_form_1_mat_option_11_Template","RegionModalComponent_main_4_form_1_mat_option_12_Template","form","controls","display_name","auto_r2","filtered_timezones","timezones","RegionModalComponent_main_4_form_1_Template","RegionModalComponent_footer_5_Template_button_click_1_listener","_r4","save","_data","_dialog_ref","required","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","organisation","ngOnInit","_updateTimezoneList","subscription","valueChanges","valid","join","getRawValue","resp","description","catch","value","features","ɵɵInheritDefinitionFeature","i18n_0","ngI18nClosureMode","$localize","RegionModalComponent_button_3_Template","RegionModalComponent_main_4_Template","RegionModalComponent_footer_5_Template","RegionModalComponent_ng_template_6_Template","load_state_r5","getUnixTime","MapLocation","type","position","map_id","asset_id","x","map_width","y","map_height","variance","last_seen","Date","level","building","at_location","coordinates_from"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}