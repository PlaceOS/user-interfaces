"use strict";(self.webpackChunkworkplace=self.webpackChunkworkplace||[]).push([[97],{97:(K,u,r)=>{r.r(u),r.d(u,{DirectoryModule:()=>H});var c=r(6814),h=r(4641),g=r(2079),d=r(6776),x=r(2068),_=r(5222),v=r(6124),m=r(6129),y=r(356),e=r(9212),l=r(6223),U=r(3299),C=r(9252),T=r(4888),p=r(4170),Z=r(8582),L=r(5940),w=r(2882),I=r(3680),J=r(6318);function D(s,i){if(1&s&&e._UZ(0,"a-user-avatar",9),2&s){const t=e.oxw(2);e.Q6J("user",t.user)}}function Q(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"a",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.sendCallEvent())}),e.ALo(1,"safe"),e._uU(2," Call "),e.qZA()}if(2&s){const t=e.oxw(2);e.Q6J("href",e.xi3(1,1,"tel:"+t.user.phone,"url"),e.LSH)}}const A=()=>["/explore"],M=s=>({user:s});function O(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",1),e.YNc(1,D,1,1,"a-user-avatar",2),e.TgZ(2,"div",3)(3,"div",4),e._uU(4),e.qZA(),e.TgZ(5,"a",5),e.ALo(6,"safe"),e._uU(7),e.qZA()(),e.TgZ(8,"div",6)(9,"a",7),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.sendLocateEvent())}),e._uU(10," Locate "),e.qZA(),e.YNc(11,Q,3,4,"a",8),e.qZA()()}if(2&s){const t=e.oxw();e.ekj("with-image",t.show_image),e.xp6(),e.Q6J("ngIf",t.show_image),e.xp6(3),e.Oqu(t.user.name),e.xp6(),e.Q6J("href",e.xi3(6,9,"mailto:"+t.user.email,"url"),e.LSH),e.xp6(2),e.hij(" ",t.user.email," "),e.xp6(2),e.Q6J("routerLink",e.DdM(12,A))("queryParams",e.VKq(13,M,t.user.email)),e.xp6(2),e.Q6J("ngIf",t.user.phone)}}let N=(()=>{class s{get show_image(){return this._settings.get("app.users.show_avatars")}sendLocateEvent(){}sendCallEvent(){}constructor(t){this._settings=t}static#e=this.\u0275fac=function(n){return new(n||s)(e.Y36(m.gb))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["a-directory-user-list-item"]],inputs:{user:"user"},decls:1,vars:1,consts:[["class","flex flex-wrap items-center sm:space-x-4 bg-base-100 hover:bg-base-200 overflow-hidden p-4 mb-2",3,"with-image",4,"ngIf"],[1,"flex","flex-wrap","items-center","sm:space-x-4","bg-base-100","hover:bg-base-200","overflow-hidden","p-4","mb-2"],[3,"user",4,"ngIf"],[1,"flex","flex-col","flex-1","w-1/2","ml-4","sm:ml-0"],[1,"name"],["name","email",1,"text-sm","underline",3,"href"],[1,"flex","w-full","sm:w-auto","sm:flex-col","items-center","space-x-2","sm:space-x-0","sm:space-y-2","mt-4","sm:mt-0"],["btn","","matRipple","","locate","",1,"w-32","flex-1","sm:flex-none",3,"routerLink","queryParams","click"],["btn","","matRipple","","class","w-32 flex-1 sm:flex-nones","call","",3,"href","click",4,"ngIf"],[3,"user"],["btn","","matRipple","","call","",1,"w-32","flex-1","sm:flex-nones",3,"href","click"]],template:function(n,o){1&n&&e.YNc(0,O,12,15,"div",0),2&n&&e.Q6J("ngIf",o.user)},dependencies:[c.O5,h.rH,w.k,I.wG,J.y]})}return s})();const E=["a-directory-user-list",""];function F(s,i){1&s&&e._UZ(0,"mat-spinner",10),2&s&&e.Q6J("diameter",32)}function Y(s,i){1&s&&e._UZ(0,"a-directory-user-list-item",15),2&s&&e.Q6J("user",i.$implicit)}function S(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"div",13),e._uU(2),e.qZA(),e.YNc(3,Y,1,1,"a-directory-user-list-item",14),e.BQk()),2&s){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(2),e.hij(" ",t," "),e.xp6(),e.Q6J("ngForOf",n.groupedUsers[t])}}function j(s,i){if(1&s&&(e.ynx(0),e.YNc(1,S,4,2,"ng-container",12),e.BQk()),2&s){const t=i.$implicit,n=e.oxw(2);e.xp6(),e.Q6J("ngIf",n.groupedUsers[t].length)}}function $(s,i){if(1&s&&(e.ynx(0),e.YNc(1,j,2,1,"ng-container",11),e.BQk()),2&s){const t=e.oxw();e.xp6(),e.Q6J("ngForOf",t.letters)}}function b(s,i){if(1&s&&(e.TgZ(0,"div",16)(1,"app-icon",17),e._uU(2),e.qZA(),e.TgZ(3,"div",18),e._uU(4),e.qZA()()),2&s){const t=e.oxw();e.xp6(2),e.Oqu(t.search_str&&t.search_str.length>=t.min_search_length?"close":"arrow_upward"),e.xp6(2),e.hij(" ",t.search_str&&t.search_str.length>=t.min_search_length?' No matches for "'+t.search_str+'"':"Type above to search for users"," ")}}const P="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");let R=(()=>{class s extends m.cx{get min_search_length(){const t=this._settings.get("app.users.min_search_length");return"number"==typeof t&&t>=0?t:3}constructor(t){super(),this._settings=t,this.user_list=[],this.groupedUsers={},this.search$=new g.xQ,this.search_results$=this.search$.pipe((0,d.b)(400),(0,x.x)(),(0,_.w)(n=>(this.loading=!0,n.length>=this.min_search_length?(0,y.VE)(n).toPromise().catch(()=>[]):Promise.resolve(this.user_list||[]))),(0,v.U)(n=>(this.loading=!1,n)))}ngOnInit(){this.subscription("search_results",this.search_results$.subscribe(t=>{this.user_list=t,this.buildGroups(this.user_list)})),this.search$.next("")}get letters(){return P}buildGroups(t){const n=t.sort((o,a)=>o.name.localeCompare(a.name));for(const o of this.letters)this.groupedUsers[o]=n.filter(a=>a.name.startsWith(o))}static#e=this.\u0275fac=function(n){return new(n||s)(e.Y36(m.gb))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["","a-directory-user-list",""]],features:[e.qOj],attrs:E,decls:14,vars:4,consts:[[1,"flex-1","flex","sm:flex-row","flex-col-reverse","h-1/2"],[1,"relative","z-0","flex","flex-col","flex-1","h-1/2","sm:h-auto","overflow-hidden"],[1,"w-full","flex","items-center","justify-center","p-2"],["overlay","","appearance","outline",1,"rounded"],["matPrefix","",1,"text-xl"],["matInput","","placeholder","Search for a person...",3,"ngModel","ngModelChange"],["matSuffix","","class","top-2",3,"diameter",4,"ngIf"],[1,"flex-1","h-1/2","w-full"],[4,"ngIf","ngIfElse"],["empty_state",""],["matSuffix","",1,"top-2",3,"diameter"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"py-2","px-4","font-medium"],[3,"user",4,"ngFor","ngForOf"],[3,"user"],[1,"flex","flex-col","items-center","p-8"],[1,"text-5xl"],[1,"text"]],template:function(n,o){if(1&n&&(e._UZ(0,"topbar"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"mat-form-field",3)(5,"app-icon",4),e._uU(6,"search"),e.qZA(),e.TgZ(7,"input",5),e.NdJ("ngModelChange",function(f){return o.search_str=f})("ngModelChange",function(f){return o.search$.next(f)}),e.qZA(),e.YNc(8,F,1,1,"mat-spinner",6),e.qZA()(),e.TgZ(9,"main",7),e.YNc(10,$,2,1,"ng-container",8),e.qZA()()(),e._UZ(11,"footer-menu"),e.YNc(12,b,5,2,"ng-template",null,9,e.W1O)),2&n){const a=e.MAs(13);e.xp6(7),e.Q6J("ngModel",o.search_str),e.xp6(),e.Q6J("ngIf",o.loading),e.xp6(2),e.Q6J("ngIf",o.groupedUsers&&o.user_list.length)("ngIfElse",a)}},dependencies:[c.sg,c.O5,l.Fj,l.JJ,l.On,U.o,C.i,T.o,p.KE,p.qo,p.R9,Z.Nt,L.Ou,N],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background:#f0f0f0}mat-form-field[_ngcontent-%COMP%]{width:48rem;max-width:calc(100% - 2rem)}"]})}return s})();var B=r(7427);const G=[{path:"",component:R}];let H=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275mod=e.oAB({type:s});static#s=this.\u0275inj=e.cJS({imports:[c.ez,l.u5,h.Bz.forChild(G),B.v]})}return s})()}}]);