"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([[51],{7051:(V,G,a)=>{a.d(G,{$N:()=>M.$,fy:()=>p_.f,EP:()=>c_,jT:()=>O.jT,FD:()=>O.FD,ad:()=>O.ad,F2:()=>O.F2,FP:()=>O.FP,km:()=>O.km,Fo:()=>O.Fo,Wp:()=>O.Wp});var t=a(6895),N=a(4006),k=a(4859),c=a(6709),x=a(9602),i=a(5938),v=a(9549),h=a(4144),D=a(1572),$=a(1948),y=a(4693),B=a(4110),_=a(4650),M=a(6962),T=a(5861),g=a(9112),E=a(6725),d=a(6221),p=a(9756),r=a(9833),u=a(9925),O=a(354),I=a(5306),b=a(9136),Q=a(2581),j=a(8255),K=a(3238);function C_(o,n){1&o&&_._UZ(0,"div",22)}function M_(o,n){if(1&o&&(_.TgZ(0,"div",23),_._UZ(1,"image-carousel",24),_.qZA()),2&o){const e=_.oxw();_.xp6(1),_.Q6J("images",null==e.booking||null==e.booking.extension_data?null:e.booking.extension_data.images)}}function H(o,n){if(1&o&&(_.TgZ(0,"div",31)(1,"app-icon"),_._uU(2),_.qZA(),_.TgZ(3,"div",32),_._uU(4),_.qZA()()),2&o){const e=_.oxw(3);_.xp6(2),_.Oqu(e.booking.checked_in?"done":"arrow_back"),_.xp6(2),_.hij(" ",e.booking.checked_in?"Checked in":"Check in"," ")}}function R(o,n){1&o&&_._UZ(0,"mat-spinner",33),2&o&&_.Q6J("diameter",32)}function A(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"button",28),_.NdJ("click",function(){_.CHM(e);const l=_.oxw(2);return _.KtG(l.toggleCheckedIn())}),_.YNc(1,H,5,2,"div",29),_.YNc(2,R,1,1,"ng-template",null,30,_.W1O),_.qZA()}if(2&o){const e=_.MAs(3),s=_.oxw(2);_.ekj("bg-green-600",s.booking.checked_in),_.Q6J("disabled",s.checking_in),_.xp6(1),_.Q6J("ngIf",!s.checking_in)("ngIfElse",e)}}function f(o,n){if(1&o&&(_.TgZ(0,"div",25),_.YNc(1,A,4,5,"button",26),_.TgZ(2,"button",27)(3,"app-icon"),_._uU(4,"more_horiz"),_.qZA()()()),2&o){const e=_.oxw(),s=_.MAs(46);_.xp6(1),_.Q6J("ngIf",!e.auto_checkin),_.xp6(1),_.Q6J("matMenuTriggerFor",s)}}const P=function(){return{disable_pan:!0,disable_zoom:!0}};function C(o,n){if(1&o&&_._UZ(0,"interactive-map",34),2&o){const e=_.oxw();_.Q6J("src",null==e.level?null:e.level.map_id)("features",e.features)("options",_.DdM(3,P))}}function U(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"button",35),_.NdJ("click",function(){_.CHM(e);const l=_.oxw();return _.KtG(l.remove.emit())}),_.TgZ(1,"app-icon"),_._uU(2,"delete"),_.qZA(),_.TgZ(3,"div"),_.SDv(4,36),_.qZA()()}}function X(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"button",35),_.NdJ("click",function(){_.CHM(e);const l=_.oxw();return _.KtG(l.end.emit())}),_.TgZ(1,"app-icon"),_._uU(2,"delete"),_.qZA(),_.TgZ(3,"div"),_.SDv(4,37),_.qZA()()}}class w{get level(){return this._org.levelWithID(this.booking?.zones||[])}get building(){return this._org.buildings.find(n=>(this.booking?.zones||[]).includes(n.id))}get auto_checkin(){return this._settings.get(`app.${this.booking?.type||"bookings"}.auto_checkin`)}get is_in_progress(){const n=Date.now(),e=1e3*this.booking?.booking_start;return this.booking?.all_day?e<=n:e<=n&&n<=1e3*this.booking?.booking_end}constructor(n,e,s,l){this._booking=n,this._settings=e,this._org=s,this._dialog=l,this.edit=new _.vpe,this.remove=new _.vpe,this.end=new _.vpe,this.booking=this._booking,this.hide_map=!1,this.checking_in=!1,this.features=[{location:this.booking?.asset_id,content:E.qL}]}get period(){if(this.booking?.all_day)return"All Day";const n=this.booking?.date||Date.now(),e=this.booking?.duration||60,s=(0,p.Z)(n,e),l=(0,r.Z)({hours:Math.floor(e/60),minutes:e%60}).replace(" hour","hr").replace(" minute","min");return`${(0,u.Z)(n,"h:mm a")} - ${(0,u.Z)(s,"h:mm a")} (${l})`}toggleCheckedIn(){var n=this;return(0,T.Z)(function*(){n.checking_in=!0,yield(0,O.FD)(n.booking.id,!n.booking.checked_in).toPromise(),n.booking.checked_in=!n.booking.checked_in,(0,g.t5)("Successfully "+(n.booking.checked_in?"checked in":"ended booking")),n.checking_in=!1})()}viewLocation(){this.hide_map=!0,this._dialog.open(E.p6,{maxWidth:"95vw",maxHeight:"95vh",data:{item:{id:this._booking.asset_id,name:this._booking.asset_name,map_id:this._booking.extension_data.map_id,level:this.level}}}).afterClosed().subscribe(()=>this.hide_map=!1)}}w.\u0275fac=function(n){return new(n||w)(_.Y36(i.WI),_.Y36(g.gb),_.Y36(d.w7),_.Y36(i.uw))},w.\u0275cmp=_.Xpm({type:w,selectors:[["booking-details-modal"]],outputs:{edit:"edit",remove:"remove",end:"end"},decls:49,vars:36,consts:function(){let o,n,e;return o=$localize`:␟2c8ce65c566300dc9063f69c615fda2e3a6b896a␟2102851380219026584: Details `,n=$localize`:␟55883ef2b67c24d30f999a5ade421493fdc9e14a␟1139994899162365077:Delete booking`,e=$localize`:␟2f3dfd27ad1999e91bb66ad271f967d6e543956f␟834898868131691573:End booking`,[[1,"w-[100vw]","h-[100vh]","sm:relative","sm:inset-auto","sm:w-[51rem]","sm:h-auto","sm:max-h-[80vh]","bg-white","sm:bg-gray-100","sm:dark:bg-neutral-600","dark:bg-neutral-700","sm:rounded","overflow-auto","space-y-2","pb-2"],[1,"sm:flex","flex-col","items-center","pb-4","max-h-screen","sm:max-h-[80vh]","sm:px-16","sm:border-b","bg-white","dark:bg-neutral-700","border-gray-300","dark:border-neutral-500"],["class","h-8 w-full sm:hidden block",4,"ngIf"],["class","bg-black/20 dark:bg-white/20 w-full h-64 sm:rounded-b overflow-hidden",4,"ngIf"],["title","",1,"px-3","mt-2","text-xl","font-medium","w-full"],[1,"sm:flex","items-center","justify-between","w-full"],[1,"flex","m-2"],[1,"flex","items-center","bg-opacity-30","rounded-2xl","p-1","text-sm","space-x-2","pr-2","font-medium"],[1,"rounded-full","h-5","w-5","flex","items-center","justify-center","text-white"],[1,"pr-1"],["actions","","class","flex items-center space-x-2 px-2",4,"ngIf"],[1,"sm:flex","flex-wrap","sm:px-12"],[1,"sm:p-4","sm:bg-white","sm:dark:bg-neutral-700","rounded","sm:m-2","sm:border","border-gray-200","dark:border-neutral-500","flex-grow-[4]","min-w-1/3","sm:w-[16rem]"],[1,"px-3","mt-2","text-lg","font-medium","mb-2"],o,[1,"flex","items-center","px-2","space-x-2"],["map","",1,"mt-4","sm:my-2","h-64","sm:h-48","relative","border","border-gray-200","dark:border-neutral-500","overflow-hidden","rounded","sm:bg-white","m-2","flex-grow-[3]","min-w-1/3","w-[calc(100%-1rem)]","p-2","sm:w-[16rem]",3,"click"],["class","pointer-events-none",3,"src","features","options",4,"ngIf"],["icon","","matRipple","","mat-dialog-close","",1,"absolute","top-0","left-2","bg-black/30","text-white"],["xPosition","before"],["menu","matMenu"],["mat-menu-item","","class","flex items-center space-x-2 text-base",3,"click",4,"ngIf"],[1,"h-8","w-full","sm:hidden","block"],[1,"bg-black/20","dark:bg-white/20","w-full","h-64","sm:rounded-b","overflow-hidden"],[1,"w-full","h-64",3,"images"],["actions","",1,"flex","items-center","space-x-2","px-2"],["btn","","matRipple","","class","flex-1 h-10 border-none",3,"bg-green-600","disabled","click",4,"ngIf"],["icon","","matRipple","",1,"bg-primary","rounded","text-white","h-10","w-10",3,"matMenuTriggerFor"],["btn","","matRipple","",1,"flex-1","h-10","border-none",3,"disabled","click"],["class","flex items-center space-x-2 justify-center",4,"ngIf","ngIfElse"],["loading_state",""],[1,"flex","items-center","space-x-2","justify-center"],[1,"mr-4"],[1,"mx-auto",3,"diameter"],[1,"pointer-events-none",3,"src","features","options"],["mat-menu-item","",1,"flex","items-center","space-x-2","text-base",3,"click"],n,e]},template:function(n,e){1&n&&(_.TgZ(0,"div",0)(1,"div",1),_.YNc(2,C_,1,0,"div",2),_.YNc(3,M_,2,1,"div",3),_.TgZ(4,"h3",4),_._uU(5),_.qZA(),_.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"app-icon"),_._uU(11),_.qZA()(),_.TgZ(12,"div",9),_._uU(13),_.qZA()()(),_.YNc(14,f,5,2,"div",10),_.qZA()(),_.TgZ(15,"div",11)(16,"div",12)(17,"h3",13),_.SDv(18,14),_.qZA(),_.TgZ(19,"div",15)(20,"app-icon"),_._uU(21,"event"),_.qZA(),_.TgZ(22,"div"),_._uU(23),_.ALo(24,"date"),_.qZA()(),_.TgZ(25,"div",15)(26,"app-icon"),_._uU(27,"schedule"),_.qZA(),_.TgZ(28,"div"),_._uU(29),_.qZA()(),_.TgZ(30,"div",15)(31,"app-icon"),_._uU(32,"map"),_.qZA(),_.TgZ(33,"div"),_._uU(34),_.qZA()(),_.TgZ(35,"div",15)(36,"app-icon"),_._uU(37,"place"),_.qZA(),_.TgZ(38,"div"),_._uU(39),_.qZA()()(),_.TgZ(40,"button",16),_.NdJ("click",function(){return e.viewLocation()}),_.YNc(41,C,1,4,"interactive-map",17),_.qZA()(),_.TgZ(42,"button",18)(43,"app-icon"),_._uU(44,"close"),_.qZA()()(),_.TgZ(45,"mat-menu",19,20),_.YNc(47,U,5,0,"button",21),_.YNc(48,X,5,0,"button",21),_.qZA()),2&n&&(_.xp6(2),_.Q6J("ngIf",!(null!=e.booking&&null!=e.booking.extension_data&&null!=e.booking.extension_data.images&&e.booking.extension_data.images.length)),_.xp6(1),_.Q6J("ngIf",null==e.booking||null==e.booking.extension_data||null==e.booking.extension_data.images?null:e.booking.extension_data.images.length),_.xp6(1),_.ekj("pt-4",!(null!=e.booking&&null!=e.booking.extension_data&&e.booking.extension_data.images)),_.xp6(1),_.hij(" ",e.booking.title," "),_.xp6(3),_.ekj("bg-green-600",!e.booking.is_done&&"approved"===(null==e.booking?null:e.booking.status))("bg-yellow-500",!e.booking.is_done&&"tentative"===(null==e.booking?null:e.booking.status))("bg-red-600",!e.booking.is_done&&"declined"===(null==e.booking?null:e.booking.status))("bg-gray-300",e.booking.is_done),_.xp6(1),_.ekj("bg-success",!e.booking.is_done&&"approved"===(null==e.booking?null:e.booking.status))("text-pending",!e.booking.is_done&&"tentative"===(null==e.booking?null:e.booking.status))("bg-error",!e.booking.is_done&&"declined"===(null==e.booking?null:e.booking.status))("text-neutral-600",e.booking.is_done),_.xp6(2),_.hij(" ",e.booking.is_done?"not_interested":"approved"===(null==e.booking?null:e.booking.status)?"done":"tentative"===(null==e.booking?null:e.booking.status)?"warning":"close"," "),_.xp6(2),_.Oqu(e.period),_.xp6(1),_.Q6J("ngIf",!e.booking.is_done),_.xp6(9),_.Oqu(_.xi3(24,33,e.booking.date,"EEEE, dd LLLL y")),_.xp6(6),_.Oqu(e.period),_.xp6(5),_.AsE(" ",(null==e.level?null:e.level.display_name)||(null==e.level?null:e.level.name),", ",e.booking.asset_name||e.booking.asset_id," "),_.xp6(5),_.AsE(" ",(null==e.building?null:e.building.display_name)||(null==e.building?null:e.building.name)," ",null!=e.building&&e.building.address?", "+e.building.address:""," "),_.xp6(2),_.Q6J("ngIf",!e.hide_map),_.xp6(6),_.Q6J("ngIf",!e.is_in_progress),_.xp6(1),_.Q6J("ngIf",e.is_in_progress))},dependencies:[t.O5,i.ZT,D.Ou,I.o,b.p,Q.K,j.VK,j.OP,j.p6,K.wG,t.uU]});var f_=a(4871),S_=a(565),T_=a(2641),W=a(3007);function W_(o,n){if(1&o&&(_.TgZ(0,"span",6),_._uU(1),_.qZA()),2&o){const e=_.oxw(2);_.xp6(1),_.hij("",e.day,", ")}}function J_(o,n){if(1&o&&(_.TgZ(0,"h4",3),_.YNc(1,W_,2,1,"span",4),_._uU(2),_.ALo(3,"date"),_.TgZ(4,"span",5),_._uU(5),_.ALo(6,"date"),_.qZA()()),2&o){const e=_.oxw();_.xp6(1),_.Q6J("ngIf",e.show_day),_.xp6(1),_.hij(" ",_.xi3(3,3,null==e.booking?null:e.booking.date,"h:mm a")," "),_.xp6(3),_.hij("(",_.xi3(6,6,null==e.booking?null:e.booking.date,"z"),")")}}function X_(o,n){if(1&o&&(_.TgZ(0,"app-icon"),_._uU(1),_.qZA()),2&o){const e=_.oxw(2);_.xp6(1),_.Oqu(e.type)}}function q_(o,n){if(1&o&&(_.TgZ(0,"div",15)(1,"app-icon"),_._uU(2,"place"),_.qZA(),_.TgZ(3,"div",17),_._uU(4),_.qZA()()),2&o){const e=_.oxw(2);_.xp6(4),_.Oqu(e.location)}}const Q_=function(){return["./"]},z_=function(o){return{booking:o}};function V_(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"a",7),_.NdJ("click",function(){_.CHM(e);const l=_.oxw();return _.KtG(l.viewDetails())}),_.TgZ(1,"div",8)(2,"h4",9),_._uU(3),_.qZA(),_.TgZ(4,"div",10)(5,"div",11)(6,"div",12)(7,"app-icon"),_._uU(8),_.qZA()(),_.TgZ(9,"div",13),_._uU(10),_.qZA()()(),_.TgZ(11,"div",14)(12,"div",15),_.YNc(13,X_,2,1,"app-icon",16),_.TgZ(14,"div",17),_._uU(15),_.qZA()(),_.YNc(16,q_,5,1,"div",18),_.qZA(),_.TgZ(17,"app-icon",19),_._uU(18," chevron_right "),_.qZA()()()}if(2&o){const e=_.oxw(),s=_.MAs(3);_.Q6J("routerLink",_.DdM(25,Q_))("queryParams",_.VKq(26,z_,null==e.booking?null:e.booking.id)),_.xp6(3),_.Oqu(null==e.booking?null:e.booking.title),_.xp6(2),_.ekj("bg-green-600",!e.booking.is_done&&"approved"===(null==e.booking?null:e.booking.status))("bg-yellow-500",!e.booking.is_done&&"tentative"===(null==e.booking?null:e.booking.status))("bg-red-600",!e.booking.is_done&&"declined"===(null==e.booking?null:e.booking.status))("bg-gray-300",e.booking.is_done),_.xp6(1),_.ekj("bg-success",!e.booking.is_done&&"approved"===(null==e.booking?null:e.booking.status))("text-pending",!e.booking.is_done&&"tentative"===(null==e.booking?null:e.booking.status))("bg-error",!e.booking.is_done&&"declined"===(null==e.booking?null:e.booking.status))("text-neutral-600",e.booking.is_done),_.xp6(2),_.hij(" ",e.booking.is_done?"not_interested":"approved"===(null==e.booking?null:e.booking.status)?"done":"tentative"===(null==e.booking?null:e.booking.status)?"warning":"close"," "),_.xp6(2),_.Oqu(e.period),_.xp6(3),_.Q6J("ngIf","desk"!==e.type)("ngIfElse",s),_.xp6(2),_.hij(" ",(null==e.booking?null:e.booking.description)||(null==e.booking?null:e.booking.asset_id)," "),_.xp6(1),_.Q6J("ngIf",e.location)}}function j_(o,n){1&o&&_._UZ(0,"img",20)}class g_ extends f_.c{constructor(n,e,s){super(),this._dialog=n,this._route=e,this._org=s,this.show_day=!1,this.edit=new _.vpe,this.remove=new _.vpe,this.end=new _.vpe}ngOnInit(){this.subscription("route.query",this._route.queryParamMap.subscribe(n=>n.has("booking")&&this.booking?.id===n.get("event")?this.viewDetails():""))}get type(){return"desk"===this.booking?.type?"desk":"parking"===this.booking?.type?"drive_eta":"book"}get day(){const n=this.booking?.date||Date.now();return`${(0,T_.Z)(Date.now(),n)?"Today":(0,u.Z)(n,"EEEE")}`}get location(){const n=this._org.levelWithID(this.booking?.zones||[]);return`${n?.display_name||n?.name||""}`}get period(){if(this.booking?.all_day)return"All Day";const n=this.booking?.date||Date.now(),e=this.booking?.duration||60,s=(0,p.Z)(n,e),l=(0,r.Z)({hours:Math.floor(e/60),minutes:e%60}).replace(" hour","hr").replace(" minute","min");return`${(0,u.Z)(n,"h:mm a")} - ${(0,u.Z)(s,"h:mm a")} (${l})`}viewDetails(){this.booking&&this.timeout("open",()=>{const n=this._dialog.open(w,{data:this.booking});this.subscription("edit",n.componentInstance.edit.subscribe(()=>this.edit.emit())),this.subscription("remove",n.componentInstance.remove.subscribe(()=>this.remove.emit())),this.subscription("end",n.componentInstance.end.subscribe(()=>this.end.emit()))})}}g_.\u0275fac=function(n){return new(n||g_)(_.Y36(i.uw),_.Y36(W.gz),_.Y36(S_.w))},g_.\u0275cmp=_.Xpm({type:g_,selectors:[["booking-card"]],inputs:{booking:"booking",show_day:"show_day"},outputs:{edit:"edit",remove:"remove",end:"end"},features:[_.qOj],decls:4,vars:2,consts:[["class","mb-2 flex items-center",4,"ngIf"],["name","view-booking-details","class","w-full cursor-pointer overflow-hidden relative",3,"routerLink","queryParams","click",4,"ngIf"],["desk_icon",""],[1,"mb-2","flex","items-center"],["day","",4,"ngIf"],[1,"text-xs","px-2"],["day",""],["name","view-booking-details",1,"w-full","cursor-pointer","overflow-hidden","relative",3,"routerLink","queryParams","click"],[1,"w-full","bg-white","dark:bg-[#1F2021]","rounded-xl","shadow","py-4","relative"],[1,"px-4","text-lg"],[1,"flex","mx-4","my-2"],[1,"flex","items-center","bg-opacity-30","rounded-2xl","p-1","text-base","space-x-2","pr-2","font-medium"],[1,"rounded-full","h-5","w-5","flex","items-center","justify-center","text-white"],[1,"pr-1"],[1,"flex","flex-wrap","flex-col","sm:flex-row","sm:divide-x","divide-neutral-500","py-2","space-y-2","sm:space-y-0"],[1,"flex","items-center","px-4"],[4,"ngIf","ngIfElse"],[1,"mx-2","truncate"],["class","flex items-center px-4",4,"ngIf"],[1,"absolute","top-1/2","right-1","text-4xl","-translate-y-1/2"],["src","assets/icons/desk-outline.svg",1,"w-5","h-5"]],template:function(n,e){1&n&&(_.YNc(0,J_,7,9,"h4",0),_.YNc(1,V_,19,28,"a",1),_.YNc(2,j_,1,0,"ng-template",null,2,_.W1O)),2&n&&(_.Q6J("ngIf",e.booking),_.xp6(1),_.Q6J("ngIf",e.booking))},dependencies:[t.O5,I.o,t.uU],styles:["[_nghost-%COMP%]{display:block;width:100%;overflow:hidden;position:relative}"]});var F_=a(2329),H_=a(9697);function _e(o,n){1&o&&(_.TgZ(0,"button",5)(1,"i",6),_._uU(2,"close"),_.qZA()())}function ee(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"div",18)(1,"label"),_.SDv(2,19),_.qZA(),_.TgZ(3,"a-user-search-field",20),_.NdJ("ngModelChange",function(l){_.CHM(e);const S=_.oxw(2);return _.KtG(S.host=l)}),_.qZA()()}if(2&o){const e=_.oxw(2);_.xp6(3),_.Q6J("ngModel",e.host)}}function te(o,n){if(1&o&&(_.TgZ(0,"div"),_._uU(1),_.ALo(2,"date"),_.qZA()),2&o){const e=_.oxw(2);_.xp6(1),_.hij(" ",_.xi3(2,1,e.date,"mediumDate")," ")}}function ne(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"a-date-field",20),_.NdJ("ngModelChange",function(l){_.CHM(e);const S=_.oxw(2);return _.KtG(S.date=l)}),_.qZA()}if(2&o){const e=_.oxw(2);_.Q6J("ngModel",e.date)}}function oe(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"div",21)(1,"label"),_.SDv(2,22),_.qZA(),_.TgZ(3,"mat-form-field",23)(4,"input",24),_.NdJ("ngModelChange",function(l){_.CHM(e);const S=_.oxw(2);return _.KtG(S.reason=l)}),_.qZA()()()}if(2&o){const e=_.oxw(2);_.xp6(4),_.Q6J("ngModel",e.reason)}}function ie(o,n){if(1&o){const e=_.EpF();_.ynx(0),_.TgZ(1,"main",7),_.YNc(2,ee,4,1,"div",8),_.TgZ(3,"div",9)(4,"label"),_.SDv(5,10),_.qZA(),_.YNc(6,te,3,4,"div",11),_.YNc(7,ne,1,1,"a-date-field",12),_.qZA(),_.YNc(8,oe,5,1,"div",13),_.TgZ(9,"p"),_.SDv(10,14),_.qZA()(),_.TgZ(11,"footer",15)(12,"button",16),_.NdJ("click",function(){_.CHM(e);const l=_.oxw();return _.KtG(l.confirm())}),_.SDv(13,17),_.qZA()(),_.BQk()}if(2&o){const e=_.oxw();_.xp6(2),_.Q6J("ngIf",e.can_set_host),_.xp6(4),_.Q6J("ngIf",!e.can_set_date),_.xp6(1),_.Q6J("ngIf",e.can_set_date),_.xp6(1),_.Q6J("ngIf",!e.hide_reason),_.xp6(2),_.pQV(1===e.desks.length?"":"s")(e.desk_list)((null==e.level?null:e.level.display_name)||(null==e.level?null:e.level.name)),_.QtT(10)}}function se(o,n){if(1&o&&(_.TgZ(0,"main",25),_._UZ(1,"mat-spinner",26),_.TgZ(2,"p"),_._uU(3),_.qZA()()),2&o){const e=_.oxw();_.xp6(1),_.Q6J("diameter",48),_.xp6(2),_.Oqu(e.loading)}}class t_{get desk_list(){return this.desks.map(n=>n.name).join(", ")}get hide_reason(){return!!this._settings.get("app.desks.hide_reason")}get can_set_host(){return!!this._settings.get("app.desks.can_book_for_others")}constructor(n,e){this._data=n,this._settings=e,this.event=new _.vpe,this.desks=this._data.desks||[],this.date=this._data.date,this.host=this._data.host,this.can_set_date=this._data.can_set_date,this.reason=this._data.reason,this.level=this._data.level}confirm(){this.loading="Requesting desk booking...",this.event.emit({reason:"done"})}}t_.\u0275fac=function(n){return new(n||t_)(_.Y36(i.WI),_.Y36(g.gb))},t_.\u0275cmp=_.Xpm({type:t_,selectors:[["desk-flow-confirm-modal-component"]],outputs:{event:"event"},decls:8,vars:3,consts:function(){let o,n,e,s,l,S;return o=$localize`:␟d513554c23b779e029147a285f1f84f1479488fc␟1554073776118278895:Confirm Booking`,n=$localize`:␟2f933b826a570836cab04f683970a2d22068458c␟3973931101896534797:Date`,e=$localize`:␟5012a6a10d31e79f5865c2fc7f680b84a14accca␟4161419473863623687: Your desk${"\ufffd0\ufffd"}:INTERPOLATION: will be ${"\ufffd1\ufffd"}:INTERPOLATION_1: on ${"\ufffd2\ufffd"}:INTERPOLATION_2: `,s=$localize`:␟68e710782ccb5398b3acb8844caf0b199da2c3da␟9178182467454450952:Confirm`,l=$localize`:␟fe22ca53e651df951dac25b67c17894b0980f767␟6641024648411549335:Host`,S=$localize`:␟4ba250869daa372b54d24fafc0ea934769ee4076␟4775550080689015987:Reason`,[o,[1,"flex-1"],["icon","","mat-dialog-close","",4,"ngIf"],[4,"ngIf","ngIfElse"],["load_state",""],["icon","","mat-dialog-close",""],[1,"material-icons"],[1,"p-4"],["host","","class","flex flex-col",4,"ngIf"],["date","",1,"mb-4"],n,[4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["reason","","class","flex flex-col mb-4",4,"ngIf"],e,[1,"flex","items-center","justify-center","p-2"],["btn","","matRipple","",3,"click"],s,["host","",1,"flex","flex-col"],l,[3,"ngModel","ngModelChange"],["reason","",1,"flex","flex-col","mb-4"],S,["appearance","outline"],["matInput","","placeholder","Reason",3,"ngModel","ngModelChange"],["load","",1,"flex","flex-col","p-12","items-center","justify-center"],[1,"mb-4",3,"diameter"]]},template:function(n,e){if(1&n&&(_.TgZ(0,"header")(1,"h2"),_.SDv(2,0),_.qZA(),_._UZ(3,"div",1),_.YNc(4,_e,3,0,"button",2),_.qZA(),_.YNc(5,ie,14,7,"ng-container",3),_.YNc(6,se,4,2,"ng-template",null,4,_.W1O)),2&n){const s=_.MAs(7);_.xp6(4),_.Q6J("ngIf",!e.loading),_.xp6(1),_.Q6J("ngIf",!e.loading)("ngIfElse",s)}},dependencies:[t.O5,N.Fj,N.JJ,N.On,h.Nt,v.KE,i.ZT,D.Ou,F_.Q,H_.d,K.wG,t.uU],styles:["main[_ngcontent-%COMP%]{width:24rem;max-width:calc(100vw - 4.5rem)}"]});var b_=a(4282),A_=(a(5417),a(2075),a(8297),a(9921),a(718),a(6485),a(7224)),D_=a(8296),U_=a(3245),p_=a(2084),P_=a(1529),v_=a(7957),k_=a(1022),x_=a(7303),ge=a(6471),L_=a(4385);function pe(o,n){if(1&o&&(_.TgZ(0,"mat-option",35),_._uU(1),_.qZA()),2&o){const e=n.$implicit;_.Q6J("value",e.id),_.xp6(1),_.hij(" ",e.display_name||e.name," ")}}const ue=function(){return{standalone:!0}};function Ee(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"div",15)(1,"label",31),_.tHW(2,32),_._UZ(3,"span"),_.N_p(),_.qZA(),_.TgZ(4,"mat-form-field",29)(5,"mat-select",33),_.NdJ("ngModelChange",function(l){_.CHM(e);const S=_.oxw(4);return _.KtG(S.form.patchValue({zones:[l]}))}),_.YNc(6,pe,2,2,"mat-option",34),_.ALo(7,"async"),_.qZA()()()}if(2&o){const e=_.oxw(4);_.xp6(5),_.Q6J("ngModel",e.form.value.zones[0])("ngModelOptions",_.DdM(5,ue)),_.xp6(1),_.Q6J("ngForOf",_.lcZ(7,3,e.buildings))}}function Oe(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"mat-option",48),_.NdJ("click",function(){const S=_.CHM(e).$implicit,m=_.oxw(5);return _.KtG(m.setVisitor(S))}),_.TgZ(1,"div",49)(2,"div"),_._uU(3),_.qZA(),_.TgZ(4,"div",50),_._uU(5),_.qZA()()()}if(2&o){const e=n.$implicit;_.Q6J("value",e.name),_.xp6(3),_.Oqu(e.name),_.xp6(2),_.AsE(" ",e.email," ",e.company?"| "+e.company:""," ")}}function me(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"mat-option",48),_.NdJ("click",function(){const S=_.CHM(e).$implicit,m=_.oxw(5);return _.KtG(m.setVisitor(S))}),_.TgZ(1,"div",49)(2,"div"),_._uU(3),_.qZA(),_.TgZ(4,"div",50),_._uU(5),_.qZA()()()}if(2&o){const e=n.$implicit;_.Q6J("value",e.email),_.xp6(3),_.Oqu(e.name),_.xp6(2),_.AsE(" ",e.email," ",e.company?"| "+e.company:""," ")}}function fe(o,n){if(1&o){const e=_.EpF();_.ynx(0),_.TgZ(1,"div",15)(2,"label",36),_.tHW(3,37),_._UZ(4,"span"),_.N_p(),_.qZA(),_.TgZ(5,"mat-form-field",29)(6,"input",38),_.NdJ("focus",function(){_.CHM(e);const l=_.oxw(4);return _.KtG(l.filterVisitors(l.form.value.asset_name))}),_.qZA()(),_.TgZ(7,"mat-autocomplete",null,39),_.YNc(9,Oe,6,4,"mat-option",40),_.qZA()(),_.TgZ(10,"div",15)(11,"label",41),_.tHW(12,42),_._UZ(13,"span"),_.N_p(),_.qZA(),_.TgZ(14,"mat-form-field",29)(15,"input",43),_.NdJ("focus",function(){_.CHM(e);const l=_.oxw(4);return _.KtG(l.filterVisitors(l.form.value.asset_id))}),_.qZA(),_.TgZ(16,"mat-error"),_.SDv(17,44),_.qZA()(),_.TgZ(18,"mat-autocomplete",null,45),_.YNc(20,me,6,4,"mat-option",40),_.qZA()(),_.TgZ(21,"div",15)(22,"label",36),_.SDv(23,46),_.qZA(),_.TgZ(24,"mat-form-field",29),_._UZ(25,"input",47),_.qZA()(),_.BQk()}if(2&o){const e=_.MAs(8),s=_.MAs(19),l=_.oxw(4);_.xp6(6),_.Q6J("matAutocomplete",e),_.xp6(3),_.Q6J("ngForOf",l.filtered_visitors),_.xp6(6),_.Q6J("matAutocomplete",s),_.xp6(5),_.Q6J("ngForOf",l.filtered_visitors)}}function Te(o,n){if(1&o&&(_.TgZ(0,"form",13),_.YNc(1,Ee,8,6,"div",14),_.TgZ(2,"div",15)(3,"label",16),_.tHW(4,17),_._UZ(5,"span"),_.N_p(),_.qZA(),_._UZ(6,"a-date-field",18),_.qZA(),_.TgZ(7,"div",19)(8,"div",20)(9,"label",21),_.tHW(10,22),_._UZ(11,"span"),_.N_p(),_.qZA(),_._UZ(12,"a-time-field",23),_.qZA(),_.TgZ(13,"div",20)(14,"label",24),_.tHW(15,25),_._UZ(16,"span"),_.N_p(),_.qZA(),_._UZ(17,"a-duration-field",26),_.qZA()(),_.YNc(18,fe,26,4,"ng-container",0),_.TgZ(19,"div",15)(20,"label",27),_.SDv(21,28),_.qZA(),_.TgZ(22,"mat-form-field",29),_._UZ(23,"input",30),_.qZA()()()),2&o){const e=_.oxw(3),s=_.MAs(6);_.Q6J("formGroup",e.form),_.xp6(1),_.Q6J("ngIf",(null==e.buildings?null:e.buildings.length)>1),_.xp6(16),_.Q6J("time",e.form.value.date),_.xp6(1),_.Q6J("ngIf",!e.multiple)("ngIfElse",s)}}function Ie(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"div",5)(1,"div",6)(2,"h2",7),_.SDv(3,8),_.qZA()(),_.YNc(4,Te,24,5,"form",9),_.TgZ(5,"div",10)(6,"button",11),_.NdJ("click",function(){_.CHM(e);const l=_.oxw(2);return _.KtG(l.sendInvite())}),_.SDv(7,12),_.qZA()()()}if(2&o){const e=_.oxw(2);_.xp6(4),_.Q6J("ngIf",e.form)}}function Ne(o,n){if(1&o&&(_.ynx(0),_.YNc(1,Ie,8,1,"div",4),_.ALo(2,"async"),_.BQk()),2&o){const e=_.oxw(),s=_.MAs(4);_.xp6(1),_.Q6J("ngIf",!_.lcZ(2,2,e.loading))("ngIfElse",s)}}function Re(o,n){if(1&o&&(_.tHW(0,54,1),_.GkF(1),_.N_p()),2&o){const e=_.oxw(2);_.xp6(1),_.pQV((null==e.last_success?null:e.last_success.asset_name)||(null==e.last_success?null:e.last_success.asset_id)),_.QtT(0)}}function Ce(o,n){if(1&o&&(_.tHW(0,54,2),_.GkF(1),_.N_p()),2&o){const e=_.oxw(2);_.xp6(1),_.pQV(e.last_count)(1==e.last_count?"":"s"),_.QtT(0)}}function Me(o,n){if(1&o&&(_.tHW(0,57,1),_.GkF(1),_.N_p()),2&o){const e=_.oxw(2);_.xp6(1),_.pQV((null==e.last_success?null:e.last_success.asset_name)||(null==e.last_success?null:e.last_success.asset_id)),_.QtT(0)}}function Fe(o,n){if(1&o&&(_.tHW(0,57,2),_.GkF(1),_.N_p()),2&o){const e=_.oxw(2);_.xp6(1),_.pQV(e.last_count)(1==e.last_count?"":"s"),_.QtT(0)}}function Ae(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"div",51)(1,"div",52)(2,"h2",53),_.tHW(3,54),_.YNc(4,Re,2,1,"ng-container",55),_.YNc(5,Ce,2,2,"ng-container",55),_.N_p(),_.qZA(),_._UZ(6,"img",56),_.TgZ(7,"p"),_.tHW(8,57),_.TgZ(9,"i"),_.YNc(10,Me,2,1,"ng-container",55),_.YNc(11,Fe,2,2,"ng-container",55),_.qZA(),_.ALo(12,"date"),_.ALo(13,"date"),_.N_p(),_.qZA()(),_.TgZ(14,"div",58)(15,"div",59)(16,"button",60),_.NdJ("click",function(){_.CHM(e);const l=_.oxw();return _.KtG(l.onDone())}),_.SDv(17,61),_.qZA(),_.TgZ(18,"button",60),_.NdJ("click",function(){_.CHM(e);const l=_.oxw();return _.KtG(l.sent=!1)}),_.SDv(19,62),_.qZA()()()()}if(2&o){const e=_.oxw();_.xp6(4),_.Q6J("ngIf",!e.multiple),_.xp6(1),_.Q6J("ngIf",e.multiple),_.xp6(5),_.Q6J("ngIf",!e.multiple),_.xp6(1),_.Q6J("ngIf",e.multiple),_.xp6(2),_.pQV((null==e.building?null:e.building.display_name)||(null==e.building?null:e.building.name))(_.xi3(12,7,null==e.last_success?null:e.last_success.date,"mediumDate"))(_.xi3(13,10,null==e.last_success?null:e.last_success.date,"shortTime")),_.QtT(8)}}function De(o,n){1&o&&(_.TgZ(0,"div",63),_._UZ(1,"mat-spinner",64),_.TgZ(2,"p"),_.SDv(3,65),_.qZA()()),2&o&&(_.xp6(1),_.Q6J("diameter",32))}function ve(o,n){if(1&o&&(_.TgZ(0,"div",66)(1,"label",36),_.tHW(2,67),_._UZ(3,"span"),_.N_p(),_.qZA(),_._UZ(4,"a-user-list-field",68),_.qZA()),2&o){const e=_.oxw();_.Q6J("formGroup",e.form),_.xp6(4),_.Q6J("guests_only",!0)}}class u_ extends g.cx{get multiple(){return this._settings.get("app.booking.multiple_visitors")}get building(){return this._org.building}get form(){return this._service.form}constructor(n,e,s){super(),this._service=n,this._settings=e,this._org=s,this.done=new _.vpe,this.sent=!1,this.loading=this._service.loading,this.buildings=this._org.active_buildings,this.last_success=this._service.last_success,this.last_count=0,this.visitors=[],this.filtered_visitors=[]}ngOnInit(){var n=this;return(0,T.Z)(function*(){n.sent=!1,n._service.clearOldState(),yield n.initFormZone(),n.form.get("asset_id").setValidators([N.kI.required,N.kI.email]);const e=n._settings.get("visitor-invitees")||[];for(const s of e){const[l,S,m]=s.split("|");n.visitors.push({email:l,name:S,company:m})}n.filterVisitors(""),n.subscription("email",n.form.get("asset_id").valueChanges.subscribe(s=>n.filterVisitors(s))),n.subscription("name",n.form.get("asset_name").valueChanges.subscribe(s=>n.filterVisitors(s))),n.multiple&&n.form.patchValue({asset_id:"multiple@place.tech"})})()}setVisitor(n){this.form.patchValue({asset_id:n.email,asset_name:n.name,company:n.company})}filterVisitors(n){const e=(n||"").toLowerCase();this.filtered_visitors=this.visitors.filter(({email:s,name:l,company:S})=>s.toLowerCase().includes(e)||l.toLowerCase().includes(e)||S.toLowerCase().includes(e))}onDone(){this.done.emit(),this.sent=!1}sendInvite(){var n=this;return(0,T.Z)(function*(){if(n.form.markAllAsTouched(),!n.form.valid||n.multiple&&!n.form.value.assets.length)return(0,D_.cB)(`Some fields are invalid. [${(0,U_.RD)(n.form).join(", ")||"visitors"}]`);const{asset_id:e,asset_name:s,company:l}=n.form.value,m=`${e}|${s}|${l}`,L=n._settings.get("visitor-invitees")||[];n._settings.saveUserSetting("visitor-invitees",[...L.filter(F=>!F.includes(e)),m]),yield n.multiple?n._bookForMany():n._bookForOne(),n.last_success=n._service.last_success,yield n.initFormZone(),n.sent=!0})()}initFormZone(){var n=this;return(0,T.Z)(function*(){yield n._org.initialised.pipe((0,A_.P)(e=>e)).toPromise(),n._service.setOptions({type:"visitor"}),n.form.patchValue({zones:[n._org.building?.id]})})()}_bookForOne(){var n=this;return(0,T.Z)(function*(){const e=n.form.value;n.form.patchValue({name:e.asset_name,attendees:[new P_.n5({name:e.asset_name,email:e.asset_id,organisation:e.company})]}),yield n._service.postForm().catch(s=>{throw(0,D_.cB)(s),s})})()}_bookForMany(){var n=this;return(0,T.Z)(function*(){const e=`grp-${(0,U_.O1)(8)}`,s=n.form.value,l=s.assets;n.last_count=l.length;for(const S of l)S.email&&(n.form.patchValue({...s,asset_id:S.email,asset_name:S.name,description:e,name:S.name,assets:[],attendees:[new P_.n5({name:S.name,email:S.email,organisation:S.company||S.organisation})]}),yield n._service.postForm().catch(m=>{throw(0,D_.cB)(m),m}))})()}}function Le(o,n){if(1&o&&_._UZ(0,"image-carousel",25),2&o){const e=_.oxw(2);_.Q6J("images",e.space.images)}}u_.\u0275fac=function(n){return new(n||u_)(_.Y36(p_.f),_.Y36(g.gb),_.Y36(S_.w))},u_.\u0275cmp=_.Xpm({type:u_,selectors:[["invite-visitor-form"]],outputs:{done:"done"},features:[_.qOj],decls:7,vars:2,consts:function(){let o,n,e,s,l,S,m,L,F,q,z,Y,N_,J,d_,R_,w_,Y_;return o=$localize`:␟5ce047ca92a7474d89cf5b08a9913b0a93d28404␟4809719174148656467:Invite Visitor`,n=$localize`:␟207022d8123aa7a8693ff4c53cd28fea3d5bdff2␟994966389368964414: Send Visitor Invite `,e=$localize`:␟04cfb5fd033651743bc4b9408bd52ba4ee894070␟3158758063619980932:Date${"\ufffd#5\ufffd"}:START_TAG_SPAN:*${"\ufffd/#5\ufffd"}:CLOSE_TAG_SPAN:`,s=$localize`:␟eac10bd97a4b6b06a0221c661de781836b7a1e1c␟145741817832495807: Start Time${"\ufffd#11\ufffd"}:START_TAG_SPAN:*${"\ufffd/#11\ufffd"}:CLOSE_TAG_SPAN:`,l=$localize`:␟85d5c3a89bab9a7475a7db095089e161586cb7a1␟5960185837188220843:End Time${"\ufffd#16\ufffd"}:START_TAG_SPAN:*${"\ufffd/#16\ufffd"}:CLOSE_TAG_SPAN:`,S=$localize`:␟8aaaa9966e2e05be99e9b239f3b257767366b8bf␟495507623260232513:Reason for visit`,m=$localize`:␟029554be61f13a5f5f40b24ff6a076e8cf3ce232␟5030059473688609624:Building${"\ufffd#3\ufffd"}:START_TAG_SPAN:*${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN:`,L=$localize`:␟a2a7f73f9ff1df08f9f055ead8f1b25a91c060a3␟4333771954088602266:Select building`,F=$localize`:␟cf671ca02377cd191d8b3c68c7befb5984469f16␟4464638374806874490:Visitor Name${"\ufffd#4\ufffd"}:START_TAG_SPAN:*${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:`,q=$localize`:␟df470c6a7cce24cc7887968eabb3ee0c1bbd3f7c␟195607823904920605: Visitor Email${"\ufffd#13\ufffd"}:START_TAG_SPAN:*${"\ufffd/#13\ufffd"}:CLOSE_TAG_SPAN:`,z=$localize`:␟66a4553914df830f0bc1dd1f0a42c57fd85864de␟6407494155279173358:A valid email is required`,Y=$localize`:␟6ef0619a37140118b9e640c6cc36ee4e9fb4372a␟1826215573205981970:Company`,N_=$localize`:␟af6a082ad33b2635f588016703e454c8fb7f7e0f␟7858372686370953213: Great, thanks `,J=$localize`:␟63356c3f7d6177e1e29a68e272010f75eacb3c97␟3676425961094889121: Book Another Visitor `,d_=$localize`:␟3813db8d52465bf6153aa3eab78e731607297455␟2924076986947727128: Visitor invite sent to ${"\ufffd*4:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER: ${"\ufffd0:1\ufffd"}:INTERPOLATION: ${"[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*5:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_NG_CONTAINER_1: ${"\ufffd0:2\ufffd"}:INTERPOLATION_1: visitor${"\ufffd1:2\ufffd"}:INTERPOLATION_2: ${"[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_TAG_NG_CONTAINER:`,d_=_.Zx4(d_),R_=$localize`:␟38065decae495a48a4becaac6b9d99a6c157f75d␟1736021785242784159: Invite has been sent to ${"\ufffd#9\ufffd"}:START_ITALIC_TEXT:${"\ufffd*10:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER: ${"\ufffd0:1\ufffd"}:INTERPOLATION: ${"[\ufffd/#1:1\ufffd\ufffd/*10:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*11:2\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*11:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_NG_CONTAINER_1: ${"\ufffd0:2\ufffd"}:INTERPOLATION_1: visitor${"\ufffd1:2\ufffd"}:INTERPOLATION_2: ${"[\ufffd/#1:1\ufffd\ufffd/*10:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*11:2\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd/#9\ufffd"}:CLOSE_ITALIC_TEXT: to attend ${"\ufffd0\ufffd"}:INTERPOLATION_3: from ${"\ufffd1\ufffd"}:INTERPOLATION_4: at ${"\ufffd2\ufffd"}:INTERPOLATION_5: `,R_=_.Zx4(R_),w_=$localize`:␟59c7bf21621b0422b39735ebc6af2ccb26d894e3␟6183159301460846057:Sending invitation...`,Y_=$localize`:␟6e457c162b83dc787ae4a7a9bda0ca1f3b021b6c␟5958588135415093025:Visitors${"\ufffd#3\ufffd"}:START_TAG_SPAN:*${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN:`,[[4,"ngIf","ngIfElse"],["send_state",""],["load_state",""],["multi_state",""],["class","relative flex flex-col bg-white dark:bg-neutral-700 overflow-auto max-h-full",4,"ngIf","ngIfElse"],[1,"relative","flex","flex-col","bg-white","dark:bg-neutral-700","overflow-auto","max-h-full"],[1,"w-full","border-b","border-gray-200","dark:border-neutral-500","px-4","py-2"],[1,"text-2xl"],o,["class","p-4",3,"formGroup",4,"ngIf"],[1,"sticky","p-4","border-t","bg-white","border-gray-200","dark:border-neutral-500","bottom-0"],["btn","","matRipple","","send","",1,"w-full","sm:w-auto",3,"click"],n,[1,"p-4",3,"formGroup"],["class","flex flex-col",4,"ngIf"],[1,"flex","flex-col"],["for","date"],e,["name","date","formControlName","date"],[1,"flex","items-center","space-x-2"],[1,"flex-1","flex","flex-col","w-1/3"],["for","start-time"],s,["name","start-time","formControlName","date"],["for","end-time"],l,["name","end-time","formControlName","duration",3,"time"],["for","reason"],S,["appearance","outline"],["name","reason","matInput","","formControlName","description","placeholder","e.g. Meeting Catchup"],["for","building"],m,["name","building","placeholder",L,3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["for","visitor-name"],F,["matInput","","name","visitor-name","formControlName","asset_name","placeholder","Name of the visitor",3,"matAutocomplete","focus"],["name_auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["for","visitor-email"],q,["matInput","","name","visitor-email","type","email","formControlName","asset_id","placeholder","Email of the visitor",3,"matAutocomplete","focus"],z,["email_auto","matAutocomplete"],Y,["matInput","","name","company","formControlName","company","placeholder","Company of the visitor"],[3,"value","click"],[1,"flex","flex-col","leading-tight"],[1,"text-xs","opacity-60"],["sent","",1,"absolute","inset-0","bg-white","dark:bg-neutral-700","flex","flex-col","items-center","justify-center","text-center"],[1,"w-full","max-w-[32rem]","flex-1","h-1/2","space-y-2","m-8"],[1,"text-3xl"],d_,[4,"ngIf"],["src","assets/icons/sent.svg",1,"mx-auto"],R_,[1,"w-full","p-2","border-t","border-gray-200","dark:border-neutral-500"],[1,"mx-auto","flex","items-center","space-x-2","w-full","max-w-[32rem]"],["btn","","matRipple","",1,"flex-1",3,"click"],N_,J,["loading","",1,"relative","flex","flex-col","items-center","justify-center","rounded","overflow-hidden","w-full","h-full","min-h-[18rem]"],[3,"diameter"],w_,[1,"flex","flex-col",3,"formGroup"],Y_,["formControlName","assets",3,"guests_only"]]},template:function(n,e){if(1&n&&(_.YNc(0,Ne,3,4,"ng-container",0),_.YNc(1,Ae,20,13,"ng-template",null,1,_.W1O),_.YNc(3,De,4,1,"ng-template",null,2,_.W1O),_.YNc(5,ve,5,2,"ng-template",null,3,_.W1O)),2&n){const s=_.MAs(2);_.Q6J("ngIf",!e.sent)("ngIfElse",s)}},dependencies:[t.sg,t.O5,N._Y,N.Fj,N.JJ,N.JL,N.On,N.sg,N.u,h.Nt,v.KE,v.TO,D.Ou,v_.XC,K.ey,v_.ZL,F_.Q,k_.B,x_.N,ge.E,L_.gD,K.wG,t.Ov,t.uU]});const he=function(){return{disable_pan:!0,disable_zoom:!0}};function be(o,n){if(1&o){const e=_.EpF();_.ynx(0),_.TgZ(1,"section",2),_.YNc(2,Le,1,1,"image-carousel",3),_.TgZ(3,"button",4),_.NdJ("click",function(){_.CHM(e);const l=_.oxw();return _.KtG(l.close.emit())}),_.TgZ(4,"app-icon"),_._uU(5,"arrow_back"),_.qZA()(),_.TgZ(6,"button",5),_.NdJ("click",function(){_.CHM(e);const l=_.oxw();return _.KtG(l.toggleFav.emit())}),_.TgZ(7,"app-icon"),_._uU(8),_.qZA()()(),_.TgZ(9,"div",6)(10,"section",7)(11,"h2",8),_._uU(12),_.qZA()(),_._UZ(13,"hr"),_.TgZ(14,"section",9)(15,"h2",10),_.SDv(16,11),_.qZA(),_.TgZ(17,"div",12)(18,"app-icon"),_._uU(19,"people"),_.qZA(),_.TgZ(20,"p"),_.SDv(21,13),_.qZA()(),_.TgZ(22,"div",12)(23,"app-icon"),_._uU(24,"meeting_room"),_.qZA(),_.TgZ(25,"p"),_._uU(26),_.qZA()(),_.TgZ(27,"div",12)(28,"app-icon"),_._uU(29,"place"),_.qZA(),_.TgZ(30,"p"),_._uU(31),_.qZA()()(),_._UZ(32,"hr"),_.TgZ(33,"section",14)(34,"h2",10),_.SDv(35,15),_.qZA(),_.TgZ(36,"div",12)(37,"app-icon"),_._uU(38,"people"),_.qZA(),_.TgZ(39,"p"),_.SDv(40,16),_.qZA()(),_.TgZ(41,"div",12)(42,"app-icon"),_._uU(43,"restaurant"),_.qZA(),_.TgZ(44,"p"),_.SDv(45,17),_.qZA()(),_.TgZ(46,"div",12)(47,"app-icon"),_._uU(48,"edit"),_.qZA(),_.TgZ(49,"p"),_.SDv(50,18),_.qZA()()(),_.TgZ(51,"section",19),_._UZ(52,"interactive-map",20),_.qZA()(),_.TgZ(53,"div",21)(54,"button",22),_.NdJ("click",function(){_.CHM(e);const l=_.oxw();return l.active=!l.active,_.KtG(l.activeChange.emit(l.active))}),_.TgZ(55,"div",23)(56,"app-icon",24),_._uU(57),_.qZA(),_.TgZ(58,"p"),_._uU(59),_.qZA()()()(),_.BQk()}if(2&o){const e=_.oxw();_.xp6(1),_.ekj("sm:h-40",null==e.space.images?null:e.space.images.length)("h-64",null==e.space.images?null:e.space.images.length)("sm:h-0",!(null!=e.space.images&&e.space.images.length))("h-12",!(null!=e.space.images&&e.space.images.length))("!bg-transparent",!(null!=e.space.images&&e.space.images.length)),_.xp6(1),_.Q6J("ngIf",null==e.space.images?null:e.space.images.length),_.xp6(4),_.ekj("text-white",!e.fav)("text-blue-400",e.fav),_.xp6(2),_.Oqu(e.fav?"favorite":"favorite_border"),_.xp6(4),_.hij(" ",e.space.display_name||e.space.name," "),_.xp6(9),_.pQV(e.space.capacity),_.QtT(21),_.xp6(5),_.hij(" ",(null==e.level?null:e.level.display_name)||(null==e.level?null:e.level.name)," "),_.xp6(5),_.hij(" ",(null==e.building?null:e.building.address)||(null==e.building?null:e.building.display_name)||(null==e.building?null:e.building.name)," "),_.xp6(21),_.Q6J("src",e.map_url)("features",e.features)("options",_.DdM(27,he)),_.xp6(2),_.ekj("inverse",e.active),_.xp6(3),_.Oqu(e.active?"remove":"add"),_.xp6(2),_.hij(" ",e.active?"Remove this room":"Add this room"," ")}}function Ue(o,n){1&o&&(_.TgZ(0,"div",26)(1,"p",27),_.SDv(2,28),_.qZA()())}class n_{get level(){return this._org.levelWithID([this.space?.zone.id])||this.space?.zone}get building(){return this._org.buildings.find(n=>this.space?.zone.id===n.id||this.space?.zone.parent_id===n.id)}constructor(n){this._org=n,this.fav=!1,this.active=!1,this.activeChange=new _.vpe,this.close=new _.vpe,this.toggleFav=new _.vpe,this.map_url="",this.features=[]}ngOnChanges(n){n.space&&this.space&&this._updateFeature()}_updateFeature(){this.map_url=this.level?.map_id,this.features=[{location:this.space?.map_id,content:E.qL}]}}n_.\u0275fac=function(n){return new(n||n_)(_.Y36(d.w7))},n_.\u0275cmp=_.Xpm({type:n_,selectors:[["parking-space-details"]],inputs:{space:"space",fav:"fav",active:"active"},outputs:{activeChange:"activeChange",close:"close",toggleFav:"toggleFav"},features:[_.TTD],decls:3,vars:2,consts:function(){let o,n,e,s,l,S,m;return o=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,n=$localize`:␟2fe5caca246424da5e7fcee12a1fe341335e1286␟2731085793954892186:${"\ufffd0\ufffd"}:INTERPOLATION: People`,e=$localize`:␟45b5b90d7df8adeb648858761739fa700117c0d5␟3223773701700202859:Room Facilities`,s=$localize`:␟49db2433248cbe017b956cb5baefb0196dd788f1␟2658260878259066313:WiFi Available`,l=$localize`:␟551b6a6b5ecee7d32448ac4ef3a1fb883dd8e13c␟8309048761278776852:Catering Available`,S=$localize`:␟9169207ff2581dc7ac8b9125088b0cb3dc789824␟3473226617663475632:Whiteboard`,m=$localize`:␟2d39d1ca65d735d7f800e458ce54af6a25652395␟7182911930527299079: Select a space to view it's details `,[[4,"ngIf","ngIfElse"],["empty_state",""],["image","",1,"relative","w-full","bg-black/20"],["class","absolute inset-0",3,"images",4,"ngIf"],["icon","","matRipple","","close","",1,"absolute","top-2","left-2","bg-black/40","sm:hidden","text-white",3,"click"],["icon","","matRipple","","fav","",1,"absolute","top-2","right-2","bg-black/40",3,"click"],[1,"p-2","space-y-2","flex-1","h-1/2","overflow-auto"],["actions","",1,"z-0"],[1,"text-xl","font-medium","mb-2","mt-4"],["details","",1,"space-y-2"],[1,"text-xl","font-medium"],o,[1,"flex","items-center","space-x-2"],n,["facilities","",1,"space-y-2"],e,s,l,S,["map","",1,"w-full","mx-auto","h-64","sm:h-48","relative","border","border-gray-200","overflow-hidden","rounded"],[1,"pointer-events-none",3,"src","features","options"],[1,"p-2","border-t","border-gray-200","shadow","sm:hidden"],["btn","","matRipple","",1,"w-full",3,"click"],[1,"flex","items-center","justify-center"],[1,"text-2xl"],[1,"absolute","inset-0",3,"images"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"],m]},template:function(n,e){if(1&n&&(_.YNc(0,be,60,28,"ng-container",0),_.YNc(1,Ue,3,0,"ng-template",null,1,_.W1O)),2&n){const s=_.MAs(2);_.Q6J("ngIf",e.space)("ngIfElse",s)}},dependencies:[t.O5,I.o,b.p,Q.K,K.wG],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:30%;min-width:20rem;height:100%;min-height:65vh}"]});var K_=a(9830),Z_=a(2986),__=a(4850),B_=a(8242);function Pe(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"button",37),_.NdJ("click",function(){_.CHM(e);const l=_.oxw();return _.KtG(l.close())}),_.TgZ(1,"app-icon"),_._uU(2,"keyboard_arrow_left"),_.qZA()()}}function ke(o,n){if(1&o&&(_.TgZ(0,"mat-option",38),_._uU(1),_.qZA()),2&o){const e=n.$implicit;_.Q6J("value",e.id),_.xp6(1),_.AsE(" ",e.bld,", ",e.display_name||e.name," ")}}const I_=function(){return{standalone:!0}};function xe(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"div",31)(1,"div",42),_._uU(2),_.qZA(),_.TgZ(3,"mat-checkbox",43),_.NdJ("ngModelChange",function(l){const m=_.CHM(e).$implicit,L=_.oxw(2);return _.KtG(L.toggleFeature(m,l))}),_.ALo(4,"async"),_.qZA()()}if(2&o){const e=n.$implicit,s=_.oxw(2);let l;_.xp6(2),_.Oqu(e),_.xp6(1),_.Q6J("ngModel",null==(l=_.lcZ(4,3,s.options))||null==l.features?null:l.features.includes(e))("ngModelOptions",_.DdM(5,I_))}}function Ke(o,n){if(1&o&&(_.TgZ(0,"section",39)(1,"h2",8),_.SDv(2,40),_.qZA(),_.YNc(3,xe,5,6,"div",41),_.ALo(4,"async"),_.qZA()),2&o){const e=_.oxw();_.xp6(3),_.Q6J("ngForOf",_.lcZ(4,1,e.features))}}function Ze(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"div",44)(1,"button",45),_.NdJ("click",function(){_.CHM(e);const l=_.oxw();return _.KtG(l.close())}),_.SDv(2,46),_.qZA()()}}class e_{get bld(){return this._org.building}get form(){return this._form.form}get max_duration(){return this._settings.get("app.events.max_duration")||480}constructor(n,e,s,l){this._bsheet_ref=n,this._settings=e,this._form=s,this._org=l,this.can_close=!1,this.options=this._form.options,this.levels=this._org.level_list.pipe((0,__.U)(S=>{for(const m of S){const L=this._org.buildings.find(F=>F.id===m.parent_id);m.bld=L?.display_name||L?.name||""}return S})),this.features=this._form.features,this.close=()=>this._bsheet_ref.dismiss(),this.setOptions=S=>this._form.setOptions(S),this.can_close=!!this._bsheet_ref}toggleFeature(n,e){var s=this;return(0,T.Z)(function*(){const{features:l}=yield s.options.pipe((0,Z_.q)(1)).toPromise(),S=(l||[]).filter(m=>n!==m);e&&S.push(n),s.setOptions({features:S})})()}}function Be(o,n){if(1&o&&(_.TgZ(0,"div",15),_._uU(1),_.qZA()),2&o){const e=_.oxw();_.xp6(1),_.hij(" ",e.location," ")}}function Ge(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"div",16)(1,"p"),_._uU(2),_.qZA(),_.TgZ(3,"button",17),_.NdJ("click",function(){const S=_.CHM(e).$implicit,m=_.oxw();return _.KtG(m.removeFeature(S))}),_.TgZ(4,"app-icon"),_._uU(5,"close"),_.qZA()()()}if(2&o){const e=n.$implicit;_.xp6(2),_.Oqu(e)}}e_.\u0275fac=function(n){return new(n||e_)(_.Y36(B_.oL,8),_.Y36(g.gb),_.Y36(p_.f),_.Y36(d.w7))},e_.\u0275cmp=_.Xpm({type:e_,selectors:[["parking-space-filters"]],decls:46,vars:26,consts:function(){let o,n,e,s,l,S,m,L,F,q,z;return o=$localize`:␟36173168a4643aa78634e9242a63f3a40862f166␟7173310086383878456:Space Filters`,n=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,e=$localize`:␟ed31c09fd77c36238c13d83635f3fe5294c733d2␟471816275243265264:Location`,s=$localize`:␟04cfb5fd033651743bc4b9408bd52ba4ee894070␟3158758063619980932:Date${"\ufffd#21\ufffd"}:START_TAG_SPAN:*${"\ufffd/#21\ufffd"}:CLOSE_TAG_SPAN:`,l=$localize`:␟e06c2195d60fdee7b259bd3ff16eb3d594c42b2b␟608708688936992021: Date and time must be in the future `,S=$localize`:␟34a7595cdc15925514038224946986bfd90dc0ed␟3039786638368843634:Start Time${"\ufffd#28\ufffd"}:START_TAG_SPAN:*${"\ufffd/#28\ufffd"}:CLOSE_TAG_SPAN:`,m=$localize`:␟85d5c3a89bab9a7475a7db095089e161586cb7a1␟5960185837188220843:End Time${"\ufffd#33\ufffd"}:START_TAG_SPAN:*${"\ufffd/#33\ufffd"}:CLOSE_TAG_SPAN:`,L=$localize`:␟62ab0c2bf8d16ce7baf2c8b1da2c561d99522256␟4158925728608139729:Favourites`,F=$localize`:␟ac378c0b437746af89a84b4909ab5b83c5ff55a3␟165958440274527719: Only show favourite spaces `,q=$localize`:␟bf10c600bd861cfd0a23f4759562ee0ae9dbe19f␟1551920764795208868:Facilities`,z=$localize`:␟c17e2cc448524a39eb83b2937cea3235a2e8bf37␟2296888311792137027: Apply Filters `,[[1,"flex","items-center","border-b","border-gray-200","pb-2","sm:hidden"],[1,"flex-1","pl-2"],["icon","","matRipple","","close","",3,"click",4,"ngIf"],[1,"font-medium","flex-2","text-center"],o,[1,"flex-1"],[1,"max-h-[65vh]","p-2","overflow-y-auto","overflow-x-hidden","divide-y","divide-gray-200","w-full","max-w-[100vw]",3,"formGroup"],["details",""],[1,"text-lg","font-medium"],n,[1,"flex-1","min-w-[256px]","flex","flex-col"],["for","location"],e,["appearance","outline",1,"w-full"],["name","location",3,"ngModel","ngModelOptions","placeholder","multiple","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-1","min-w-[256px]"],["for","date"],s,["name","date","formControlName","date"],l,[1,"flex","items-center","space-x-2"],[1,"flex-1","w-1/3"],["for","start-time"],S,["name","start-time",3,"ngModel","ngModelOptions","ngModelChange"],["for","end-time"],m,["name","end-time","formControlName","duration",3,"time","max"],["favs","",1,"space-y-2","pb-4"],L,[1,"flex","items-center"],["for","fav",1,"flex-1","w-1/2"],F,["name","fav",3,"ngModel","ngModelOptions","ngModelChange"],["features","","class","space-y-2",4,"ngIf"],["class","px-2 pt-2 w-full border-t border-gray-200",4,"ngIf"],["icon","","matRipple","","close","",3,"click"],[3,"value"],["features","",1,"space-y-2"],q,["class","flex items-center",4,"ngFor","ngForOf"],["for","feat",1,"flex-1","w-1/2"],["name","feat",3,"ngModel","ngModelOptions","ngModelChange"],[1,"px-2","pt-2","w-full","border-t","border-gray-200"],["btn","","matRipple","","close","",1,"w-full",3,"click"],z]},template:function(n,e){if(1&n&&(_.TgZ(0,"div",0)(1,"div",1),_.YNc(2,Pe,3,0,"button",2),_.qZA(),_.TgZ(3,"h3",3),_.SDv(4,4),_.qZA(),_._UZ(5,"div",5),_.qZA(),_.TgZ(6,"form",6)(7,"section",7)(8,"h2",8),_.SDv(9,9),_.qZA(),_.TgZ(10,"div",10)(11,"label",11),_.SDv(12,12),_.qZA(),_.TgZ(13,"mat-form-field",13)(14,"mat-select",14),_.NdJ("ngModelChange",function(l){return e.setOptions({zone_ids:l})}),_.ALo(15,"async"),_.YNc(16,ke,2,3,"mat-option",15),_.ALo(17,"async"),_.qZA()()(),_.TgZ(18,"div",16)(19,"label",17),_.tHW(20,18),_._UZ(21,"span"),_.N_p(),_.qZA(),_.TgZ(22,"a-date-field",19),_.SDv(23,20),_.qZA()(),_.TgZ(24,"div",21)(25,"div",22)(26,"label",23),_.tHW(27,24),_._UZ(28,"span"),_.N_p(),_.qZA(),_.TgZ(29,"a-time-field",25),_.NdJ("ngModelChange",function(l){return e.form.patchValue({date:l})}),_.qZA()(),_.TgZ(30,"div",22)(31,"label",26),_.tHW(32,27),_._UZ(33,"span"),_.N_p(),_.qZA(),_._UZ(34,"a-duration-field",28),_.qZA()()(),_.TgZ(35,"section",29)(36,"h2",8),_.SDv(37,30),_.qZA(),_.TgZ(38,"div",31)(39,"div",32),_.SDv(40,33),_.qZA(),_.TgZ(41,"mat-checkbox",34),_.NdJ("ngModelChange",function(l){return e.setOptions({show_fav:l})}),_.ALo(42,"async"),_.qZA()()(),_.YNc(43,Ke,5,3,"section",35),_.ALo(44,"async"),_.qZA(),_.YNc(45,Ze,3,0,"div",36)),2&n){let s,l,S;_.xp6(2),_.Q6J("ngIf",e.can_close),_.xp6(4),_.Q6J("formGroup",e.form),_.xp6(8),_.Q6J("ngModel",null==(s=_.lcZ(15,15,e.options))?null:s.zone_ids)("ngModelOptions",_.DdM(23,I_))("placeholder",(null==e.bld?null:e.bld.display_name)||(null==e.bld?null:e.bld.name))("multiple",!0),_.xp6(2),_.Q6J("ngForOf",_.lcZ(17,17,e.levels)),_.xp6(13),_.Q6J("ngModel",e.form.value.date)("ngModelOptions",_.DdM(24,I_)),_.xp6(5),_.Q6J("time",null==e.form||null==e.form.value?null:e.form.value.date)("max",e.max_duration),_.xp6(7),_.Q6J("ngModel",null==(l=_.lcZ(42,19,e.options))?null:l.show_fav)("ngModelOptions",_.DdM(25,I_)),_.xp6(2),_.Q6J("ngIf",null==(S=_.lcZ(44,21,e.features))?null:S.length),_.xp6(2),_.Q6J("ngIf",e.can_close)}},dependencies:[t.sg,t.O5,N._Y,N.JJ,N.JL,N.On,N.sg,N.u,v.KE,c.oG,K.ey,F_.Q,k_.B,x_.N,I.o,L_.gD,K.wG,t.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:100vw}"]});class o_ extends g.cx{get start(){return this._event_form.form.value.date}get end(){const{date:n,duration:e}=this._event_form.form.value;return n+60*e*1e3}constructor(n,e,s){super(),this._bsheet=n,this._event_form=e,this._org=s,this.view="list",this.viewChange=new _.vpe,this.options=this._event_form.options,this.location="",this.editFilters=()=>this._bsheet.open(e_)}ngOnInit(){this.subscription("opts",this.options.subscribe(({zone_ids:n})=>this._updateLocation(n)))}removeFeature(n){var e=this;return(0,T.Z)(function*(){const s=yield e._event_form.options.pipe((0,Z_.q)(1)).toPromise();e._event_form.setOptions({...s,features:(s.features||[]).filter(l=>l!==n)})})()}_updateLocation(n=[]){const s=this._org.levelWithID(n)||this._org.building;this.location=s?.display_name||s?.name||""}}o_.\u0275fac=function(n){return new(n||o_)(_.Y36(B_.ch),_.Y36(K_.MH),_.Y36(d.w7))},o_.\u0275cmp=_.Xpm({type:o_,selectors:[["parking-space-filters-display"]],inputs:{view:"view"},outputs:{viewChange:"viewChange"},features:[_.qOj],decls:22,vars:23,consts:function(){let o,n,e,s;return o=$localize`:␟19eaa5cd51d70d9ea957eecac78cfd811e9b93d8␟5208858215712453646: Filters `,n=$localize`:␟992a9a6a193a56c5b8846dc972c5e1977ee5f1aa␟8553228906889869186: Map `,e=$localize`:␟4b286e90831dd637c5cd3eb20544664ee7112669␟7787942140742011951: List `,s=$localize`:␟e1bcafb95323d9492bfdfa190a129131e6255cdb␟7211304359187007121: Min. ${"\ufffd0\ufffd"}:INTERPOLATION: People `,[["actions","",1,"sm:hidden","space-x-2","flex","items-center","p-2"],["matRipple","","filters","",1,"flex-1","w-1/2",3,"click"],o,[1,"flex","items-center"],["matRipple","","map","",1,"rounded-l","rounded-r-none",3,"click"],n,["matRipple","","list","",1,"rounded-r","rounded-l-none",3,"click"],e,["filters","",1,"flex","items-center","flex-wrap","p-2"],["filter-item","","zone","","class","dark:border-neutral-500",4,"ngIf"],["filter-item","","date","",1,"dark:border-neutral-500"],["filter-item","","time","",1,"dark:border-neutral-500"],["filter-item","","count","",1,"dark:border-neutral-500"],s,["filter-item","",4,"ngFor","ngForOf"],["filter-item","","zone","",1,"dark:border-neutral-500"],["filter-item",""],["icon","","matRipple","",1,"-mr-4","dark:border-neutral-500",3,"click"]]},template:function(n,e){if(1&n&&(_.TgZ(0,"section",0)(1,"button",1),_.NdJ("click",function(){return e.editFilters()}),_.SDv(2,2),_.qZA(),_.TgZ(3,"div",3)(4,"button",4),_.NdJ("click",function(){return e.view="map",e.viewChange.emit(e.view)}),_.SDv(5,5),_.qZA(),_.TgZ(6,"button",6),_.NdJ("click",function(){return e.view="list",e.viewChange.emit(e.view)}),_.SDv(7,7),_.qZA()()(),_.TgZ(8,"section",8),_.YNc(9,Be,2,1,"div",9),_.TgZ(10,"div",10),_._uU(11),_.ALo(12,"date"),_.qZA(),_.TgZ(13,"div",11),_._uU(14),_.ALo(15,"date"),_.ALo(16,"date"),_.qZA(),_.TgZ(17,"div",12),_.SDv(18,13),_.ALo(19,"async"),_.qZA(),_.YNc(20,Ge,6,1,"div",14),_.ALo(21,"async"),_.qZA()),2&n){let s,l;_.xp6(4),_.ekj("inverse","map"!==e.view),_.xp6(2),_.ekj("inverse","list"!==e.view),_.xp6(3),_.Q6J("ngIf",e.location),_.xp6(2),_.hij(" ",_.xi3(12,10,e.start,"mediumDate")," "),_.xp6(3),_.AsE(" ",_.xi3(15,13,e.start,"shortTime")," \u2014 ",_.xi3(16,16,e.end,"shortTime")," "),_.xp6(5),_.pQV((null==(s=_.lcZ(19,19,e.options))?null:s.capcaity)||2),_.QtT(18),_.xp6(1),_.Q6J("ngForOf",null==(l=_.lcZ(21,21,e.options))?null:l.features)}},dependencies:[t.sg,t.O5,I.o,K.wG,t.Ov,t.uU],styles:["[filter-item][_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 1rem;height:2rem;font-size:.875rem;border:1px solid rgba(0,0,0,.2);border-radius:1.25rem;margin-right:.5rem;margin-bottom:.5rem}[filter-item][_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.1)}[filter-item][_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:.5rem}"]});var $e=a(3426);function ye(o,n){1&o&&(_.TgZ(0,"div",22)(1,"app-icon"),_._uU(2,"done"),_.qZA()())}function we(o,n){if(1&o&&_._UZ(0,"img",23),2&o){const e=_.oxw().$implicit;_.Q6J("src",e.images[0],_.LSH)}}function Ye(o,n){1&o&&_._UZ(0,"img",24)}function We(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"li",10)(1,"button",11),_.NdJ("click",function(){const S=_.CHM(e).$implicit,m=_.oxw(3);return _.KtG(m.selectSpace(S))}),_.TgZ(2,"div",12),_.YNc(3,ye,3,0,"div",13),_.YNc(4,we,1,1,"img",14),_.YNc(5,Ye,1,0,"ng-template",null,15,_.W1O),_.qZA(),_.TgZ(7,"div",16)(8,"div",17),_._uU(9),_.qZA(),_.TgZ(10,"div",18)(11,"app-icon",19),_._uU(12,"place"),_.qZA(),_.TgZ(13,"p"),_._uU(14),_.qZA()(),_.TgZ(15,"div",18)(16,"app-icon",19),_._uU(17,"people"),_.qZA(),_.TgZ(18,"p"),_.SDv(19,20),_.qZA()()()(),_.TgZ(20,"button",21),_.NdJ("click",function(){const S=_.CHM(e).$implicit,m=_.oxw(3);return _.KtG(m.toggleFav.emit(S))}),_.TgZ(21,"app-icon"),_._uU(22),_.qZA()()()}if(2&o){const e=n.$implicit,s=_.MAs(6),l=_.oxw(3);_.ekj("!border-blue-400",l.active===e.id),_.xp6(3),_.Q6J("ngIf",l.selected.includes(e.id)),_.xp6(1),_.Q6J("ngIf",null==e.images?null:e.images.length)("ngIfElse",s),_.xp6(5),_.hij(" ",e.name||"Meeting Space"," "),_.xp6(5),_.hij(" ",e.location||(null==e.level?null:e.level.display_name)||(null==e.level?null:e.level.name)," "),_.xp6(5),_.pQV(e.capacity<1?2:e.capacity),_.QtT(19),_.xp6(1),_.ekj("text-blue-400",l.isFavourite(e.id)),_.xp6(2),_.Oqu(l.isFavourite(e.id)?"favorite":"favorite_border")}}function Je(o,n){if(1&o&&(_.TgZ(0,"ul",8),_.YNc(1,We,23,11,"li",9),_.ALo(2,"async"),_.qZA()),2&o){const e=_.oxw(2);_.xp6(1),_.Q6J("ngForOf",_.lcZ(2,1,e.assets))}}function Xe(o,n){if(1&o&&(_.ynx(0),_.YNc(1,Je,3,3,"ul",7),_.ALo(2,"async"),_.BQk()),2&o){const e=_.oxw(),s=_.MAs(8);let l;_.xp6(1),_.Q6J("ngIf",null==(l=_.lcZ(2,2,e.assets))?null:l.length)("ngIfElse",s)}}function qe(o,n){1&o&&(_.TgZ(0,"div",25)(1,"p",26),_.SDv(2,27),_.qZA()())}function Qe(o,n){1&o&&(_.TgZ(0,"div",28),_._UZ(1,"mat-spinner",29),_.TgZ(2,"p",30),_.SDv(3,31),_.qZA()()),2&o&&(_.xp6(1),_.Q6J("diameter",32))}class i_{constructor(n){this._form=n,this.active="",this.selected="",this.favorites=[],this.onSelect=new _.vpe,this.toggleFav=new _.vpe,this.assets=(0,$e.aj)([this._form.options,this._form.available_resources]).pipe((0,__.U)(([{show_fav:e},s])=>s.filter(l=>!e||this.isFavourite(l.id)))),this.loading=this._form.loading}isFavourite(n){return this.favorites.includes(n)}selectSpace(n){this.onSelect.emit(n)}}function ze(o,n){1&o&&_._UZ(0,"div",16)}function Ve(o,n){1&o&&(_.TgZ(0,"app-icon",17),_._uU(1," done "),_.qZA())}i_.\u0275fac=function(n){return new(n||i_)(_.Y36(p_.f))},i_.\u0275cmp=_.Xpm({type:i_,selectors:[["parking-space-list"]],inputs:{active:"active",selected:"selected",favorites:"favorites"},outputs:{onSelect:"onSelect",toggleFav:"toggleFav"},decls:11,vars:7,consts:function(){let o,n,e,s,l;return o=$localize`:␟80ed5b776a26a78099e230e0e89d96c33ba44e24␟5968132631442328843:Results`,n=$localize`:␟dd662afda8b27e3c6818b705321ddcc36bd571c0␟4264834071624535187: ${"\ufffd0\ufffd"}:INTERPOLATION: result(s) found `,e=$localize`:␟08719ea79f574b595da7d187fda2fa8c491b5de7␟4552898751936658514: ${"\ufffd0\ufffd"}:INTERPOLATION: People `,s=$localize`:␟027c29534f5dc45741b226edfebb3f7f578384b0␟3831747985282777621: No available spaces for selected time and/or filters `,l=$localize`:␟8dad32dda6491a1051df9156e98031c0e634b413␟126579492602011343:Finding available spaces...`,[[1,"font-bold"],o,["count","",1,"text-sm","opacity-60","mb-4"],n,[4,"ngIf","ngIfElse"],["empty_state",""],["load_state",""],["class","list-style-none space-y-2",4,"ngIf","ngIfElse"],[1,"list-style-none","space-y-2"],["space","","class","relative p-2 rounded-lg w-full shadow border bg-white dark:bg-neutral-700 border-gray-200 dark:border-neutral-500",3,"!border-blue-400",4,"ngFor","ngForOf"],["space","",1,"relative","p-2","rounded-lg","w-full","shadow","border","bg-white","dark:bg-neutral-700","border-gray-200","dark:border-neutral-500"],["matRipple","","select","",1,"w-full","h-full","flex","items-center",3,"click"],[1,"relative","w-20","h-20","rounded-xl","bg-black/20","dark:bg-white/30","mr-4","overflow-hidden","flex","items-center","justify-center"],["class","absolute top-1 left-1 border border-white bg-black/50 rounded-full h-6 w-6 flex items-center justify-center text-white",4,"ngIf"],["class","object-cover h-full",3,"src",4,"ngIf","ngIfElse"],["placeholder",""],[1,"space-y-2"],[1,"font-medium","truncate","mr-10"],[1,"flex","items-center","text-sm","space-x-2"],[1,"text-blue-500"],e,["icon","","matRipple","","fav","",1,"absolute","top-1","right-1",3,"click"],[1,"absolute","top-1","left-1","border","border-white","bg-black/50","rounded-full","h-6","w-6","flex","items-center","justify-center","text-white"],[1,"object-cover","h-full",3,"src"],["src","assets/icons/car-placeholder.svg",1,"m-auto"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"],s,["loading","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"],[1,"opacity-30"],l]},template:function(n,e){if(1&n&&(_.TgZ(0,"h3",0),_.SDv(1,1),_.qZA(),_.TgZ(2,"p",2),_.SDv(3,3),_.ALo(4,"async"),_.qZA(),_.YNc(5,Xe,3,4,"ng-container",4),_.ALo(6,"async"),_.YNc(7,qe,3,0,"ng-template",null,5,_.W1O),_.YNc(9,Qe,4,1,"ng-template",null,6,_.W1O)),2&n){const s=_.MAs(10);let l;_.xp6(4),_.pQV((null==(l=_.lcZ(4,3,e.assets))?null:l.length)||0),_.QtT(3),_.xp6(1),_.Q6J("ngIf",!_.lcZ(6,5,e.loading))("ngIfElse",s)}},dependencies:[t.sg,t.O5,D.Ou,I.o,K.wG,t.Ov],styles:["[_nghost-%COMP%]{width:100%;height:100%;padding:.5rem;overflow:auto}"]});class s_{get selected(){return!0===this._data.selected}constructor(n){this._data=n}}s_.\u0275fac=function(n){return new(n||s_)(_.Y36(E.ui))},s_.\u0275cmp=_.Xpm({type:s_,selectors:[["parking-space-location-pin"]],decls:17,vars:2,consts:[[1,"absolute","bottom-0","left-1/2","-translate-x-1/2"],["width","66","height","80","viewBox","0 0 66 80","fill","none","xmlns","http://www.w3.org/2000/svg"],["filter","url(#filter0_d_1065_10313)"],["d","M19.724 53.0408C25.0871 60.3435 30.5582 65.8583 31.0184 66.3178C31.4558 66.755 32.0489 67.0007 32.6674 67.0008H32.6678C33.2863 67.0007 33.8795 66.755 34.3169 66.3178C34.7771 65.8583 40.2481 60.3435 45.6112 53.0408C48.2928 49.3894 50.963 45.2701 52.9663 41.0957C54.9629 36.935 56.3331 32.6459 56.3342 28.6724C56.364 25.5564 55.7725 22.4657 54.5941 19.5809C53.415 16.6946 51.6722 14.0724 49.4675 11.8677C47.2629 9.66308 44.6407 7.92024 41.7544 6.74121C38.8711 5.5634 35.782 4.97184 32.6676 5.00103C29.5533 4.97184 26.4642 5.5634 23.5809 6.74121C20.6946 7.92024 18.0724 9.66308 15.8677 11.8677C13.6631 14.0724 11.9202 16.6946 10.7412 19.5809C9.56278 22.4657 8.97122 25.5565 9.00108 28.6726C9.0022 32.646 10.3724 36.9351 12.369 41.0957C14.3723 45.2701 17.0425 49.3894 19.724 53.0408Z","fill","#309251","stroke","#0B421D","stroke-width","2"],["id","filter0_d_1065_10313","x","0","y","0","width","65.3353","height","80.001","filterUnits","userSpaceOnUse","color-interpolation-filters","sRGB"],["flood-opacity","0","result","BackgroundImageFix"],["in","SourceAlpha","type","matrix","values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0","result","hardAlpha"],["dy","4"],["stdDeviation","4"],["in2","hardAlpha","operator","out"],["type","matrix","values","0 0 0 0 0.0196078 0 0 0 0 0.109804 0 0 0 0 0.172549 0 0 0 0.2 0"],["mode","normal","in2","BackgroundImageFix","result","effect1_dropShadow_1065_10313"],["mode","normal","in","SourceGraphic","in2","effect1_dropShadow_1065_10313","result","shape"],[1,"absolute","top-0","left-0","w-full","h-3/4","flex","items-center","justify-center"],["class","relative z-10 h-4 w-4 rounded-full bg-white border-2 border-[#0B421D]",4,"ngIf"],["class","relative text-white z-10 text-2xl",4,"ngIf"],[1,"relative","z-10","h-4","w-4","rounded-full","bg-white","border-2","border-[#0B421D]"],[1,"relative","text-white","z-10","text-2xl"]],template:function(n,e){1&n&&(_.TgZ(0,"div",0),_.O4$(),_.TgZ(1,"svg",1)(2,"g",2),_._UZ(3,"path",3),_.qZA(),_.TgZ(4,"defs")(5,"filter",4),_._UZ(6,"feFlood",5)(7,"feColorMatrix",6)(8,"feOffset",7)(9,"feGaussianBlur",8)(10,"feComposite",9)(11,"feColorMatrix",10)(12,"feBlend",11)(13,"feBlend",12),_.qZA()()(),_.kcU(),_.TgZ(14,"div",13),_.YNc(15,ze,1,0,"div",14),_.YNc(16,Ve,2,0,"app-icon",15),_.qZA()()),2&n&&(_.xp6(15),_.Q6J("ngIf",!e.selected),_.xp6(1),_.Q6J("ngIf",e.selected))},dependencies:[t.O5,I.o],encapsulation:2});var je=a(13);function He(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"i-map",10),_.NdJ("zoomChange",function(l){_.CHM(e);const S=_.oxw();return _.KtG(S.zoom=l)})("centerChange",function(l){_.CHM(e);const S=_.oxw();return _.KtG(S.center=l)}),_.ALo(1,"async"),_.ALo(2,"async"),_.qZA()}if(2&o){const e=_.oxw();_.Q6J("src",e.map_url)("features",_.lcZ(1,5,e.features))("actions",_.lcZ(2,7,e.actions))("zoom",e.zoom)("center",e.center)}}function _t(o,n){if(1&o&&(_.TgZ(0,"mat-option",11),_._uU(1),_.qZA()),2&o){const e=n.$implicit;_.Q6J("value",e),_.xp6(1),_.hij(" ",e.display_name||e.name," ")}}class l_ extends g.cx{get map_url(){return this.level?.map_id||""}constructor(n){super(),this._event_form=n,this.selected=[],this.is_displayed=!1,this.onSelect=new _.vpe,this.zoom=1,this.center={x:.5,y:.5},this._seletedSpace=e=>()=>this.onSelect.emit(e),this.level=null,this.levels=this._event_form.available_spaces.pipe((0,__.U)(e=>(0,g.Tw)(e.map(({level:s})=>s)))),this.features=this._event_form.available_spaces.pipe((0,je.b)(1e3),(0,__.U)(e=>e.map(s=>({location:s.map_id,content:s_,data:{...s,selected:this.selected.includes(s.id)}})))),this.actions=this._event_form.available_spaces.pipe((0,__.U)(e=>e.map(s=>({id:s.map_id,action:["touchend","mouseup"],callback:this._seletedSpace(s)}))))}ngOnInit(){this.subscription("spaces",this._event_form.available_spaces.subscribe(n=>{!this.level&&n.length&&(this.level=n[0].level)}))}setZoom(n){this.zoom=Math.max(.5,Math.min(10,n))}resetMap(){this.zoom=1,this.center={x:.5,y:.5}}}function et(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"parking-space-list",25),_.NdJ("toggleFav",function(l){_.CHM(e);const S=_.oxw();return _.KtG(S.toggleFavourite(l))})("onSelect",function(l){_.CHM(e);const S=_.oxw();return _.KtG(S.displayed=l)}),_.qZA()}if(2&o){const e=_.oxw();_.Q6J("active",null==e.displayed?null:e.displayed.id)("selected",e.selected_ids)("favorites",e.favorites)}}function tt(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"button",26),_.NdJ("click",function(){_.CHM(e);const l=_.oxw();return _.KtG(l.displayed=null)}),_.SDv(1,27),_.qZA()}}function nt(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"parking-space-map",28),_.NdJ("onSelect",function(l){_.CHM(e);const S=_.oxw();return _.KtG(S.displayed=l)}),_.qZA()}if(2&o){const e=_.oxw();_.Q6J("selected",e.selected_ids)("is_displayed",!!e.displayed)}}l_.\u0275fac=function(n){return new(n||l_)(_.Y36(K_.MH))},l_.\u0275cmp=_.Xpm({type:l_,selectors:[["parking-space-map"]],inputs:{selected:"selected",is_displayed:"is_displayed"},outputs:{onSelect:"onSelect"},features:[_.qOj],decls:18,vars:5,consts:[[3,"src","features","actions","zoom","center","zoomChange","centerChange",4,"ngIf"],[1,"absolute","inset-x-0","top-0","bg-white","p-2","border-b","border-gray-200"],["levels","","appearance","outline",1,"w-full","h-[3.25rem]"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["zoom","",1,"absolute","bottom-2","right-2","rounded-lg","border","border-gray-200","bg-white","flex","flex-col","overflow-hidden"],["zoom-in","","icon","","matRipple","",3,"click"],[1,"border-t","border-gray-200","w-full"],["zoom-out","","icon","","matRipple","",3,"click"],["reset","","icon","","matRipple","",3,"click"],[3,"src","features","actions","zoom","center","zoomChange","centerChange"],[3,"value"]],template:function(n,e){1&n&&(_.YNc(0,He,3,9,"i-map",0),_.TgZ(1,"div",1)(2,"mat-form-field",2)(3,"mat-select",3),_.NdJ("ngModelChange",function(l){return e.level=l}),_.YNc(4,_t,2,2,"mat-option",4),_.ALo(5,"async"),_.qZA()()(),_.TgZ(6,"div",5)(7,"button",6),_.NdJ("click",function(){return e.setZoom(1.1*e.zoom)}),_.TgZ(8,"app-icon"),_._uU(9,"zoom_in"),_.qZA()(),_._UZ(10,"div",7),_.TgZ(11,"button",8),_.NdJ("click",function(){return e.setZoom(e.zoom*(1/1.1))}),_.TgZ(12,"app-icon"),_._uU(13,"zoom_out"),_.qZA()(),_._UZ(14,"div",7),_.TgZ(15,"button",9),_.NdJ("click",function(){return e.resetMap()}),_.TgZ(16,"app-icon"),_._uU(17,"refresh"),_.qZA()()()),2&n&&(_.Q6J("ngIf",!e.is_displayed),_.xp6(3),_.Q6J("ngModel",e.level),_.xp6(1),_.Q6J("ngForOf",_.lcZ(5,3,e.levels)))},dependencies:[t.sg,t.O5,N.JJ,N.On,v.KE,K.ey,I.o,b.p,L_.gD,K.wG,t.Ov],styles:["[_nghost-%COMP%]{position:relative;background:rgba(0,0,0,.05);padding-top:4rem}button[_ngcontent-%COMP%]{border-radius:0}"]});const E_="favourite_parking_spaces";class a_{get selected_ids(){return this.selected.map(n=>n.id).join(",")}get favorites(){return this._settings.get(E_)||[]}constructor(n,e,s,l){this._dialog_ref=n,this._settings=e,this._event_form=s,this._data=l,this.selected=[],this.view="list",this.selected=[...l.spaces||[]],this._event_form.setOptions(l.options)}isSelected(n){return n&&this.selected_ids.includes(n)}setSelected(n,e){const s=this.selected.filter(l=>l.id!==n.id);e&&s.push(n),this.selected=s,!this._data.options.group&&e&&this._dialog_ref.close([n])}toggleFavourite(n){const e=this.favorites;e.includes(n.id)?this._settings.saveUserSetting(E_,e.filter(l=>l!==n.id)):this._settings.saveUserSetting(E_,[...e,n.id])}}a_.\u0275fac=function(n){return new(n||a_)(_.Y36(i.so),_.Y36(g.gb),_.Y36(p_.f),_.Y36(i.WI))},a_.\u0275cmp=_.Xpm({type:a_,selectors:[["parking-space-select-modal"]],decls:34,vars:21,consts:function(){let o,n,e,s,l;return o=$localize`:␟8db1ccf77dfb75785bcf8e9090ad65ea6ab69884␟6275162452894389177:Find Parking Space`,n=$localize`:␟30d3439b0e0095fe69503245f3bd7a2e9498be7c␟8443571736703532556: View List `,e=$localize`:␟18843b85d1a4f17fefafd07bc5cde636dca44295␟819716823718458903:Back to form`,s=$localize`:␟f5e618f8255889ca7743db771c50b6181b8eb362␟7685760017883569970: ${"\ufffd0\ufffd"}:INTERPOLATION: bay(s) added `,l=$localize`:␟ccda1d41ca79703a85a3a598c1d97e040a32b766␟874721418273731876: Back `,[[1,"w-[100vw]","h-[100vh]","sm:relative","sm:w-auto","sm:h-auto","flex","flex-col","bg-white","dark:bg-neutral-700"],[1,"flex","items-center","space-x-4","w-full"],["icon","","matRipple","","mat-dialog-close","",1,"bg-black/20"],o,[1,"flex-1","flex","items-center","divide-x","divide-gray-200","dark:divide-neutral-500","min-h-[65vh]","h-[65vh]","sm:max-h-[65vh]","sm:max-w-[95vw]","w-full","overflow-hidden"],[1,"h-full","hidden","sm:flex","max-w-[20rem]","sm:h-[65vh]","sm:max-h-full"],[1,"flex","flex-col","items-center","flex-1","w-1/2","h-full","sm:h-[65vh]"],[1,"w-full","border-b","border-gray-200","dark:border-neutral-500",3,"view","viewChange"],["class","flex-1 h-1/2 bg-black/5 dark:bg-white/10",3,"active","selected","favorites","toggleFav","onSelect",4,"ngIf","ngIfElse"],[1,"h-full","w-full","sm:h-[65vh]","absolute","sm:relative","sm:flex","sm:max-w-[20rem]","z-20","bg-white","dark:bg-neutral-600","block",3,"space","active","fav","activeChange","toggleFav","close"],[1,"flex","sm:hidden","flex-col-reverse","items-center","justify-end","p-2","border-t","border-gray-200","dark:border-neutral-500","w-full"],["btn","","matRipple","","return","","class","inverse sm:hidden w-full",3,"click",4,"ngIf"],["btn","","matRipple","","save","",1,"w-full","sm:w-32","sm:mb-0",3,"mat-dialog-close"],n,[1,"hidden","sm:flex","items-center","justify-between","p-2","border-t","border-gray-200","dark:border-neutral-500","w-full"],["btn","","matRipple","",1,"clear","text-primary",3,"mat-dialog-close"],[1,"flex","items-center"],[1,"text-xl"],[1,"mr-1","underline"],e,[1,"opacity-60","text-sm"],s,["btn","","matRipple","",3,"disabled","click"],[1,"mr-1"],["map_view",""],[1,"flex-1","h-1/2","bg-black/5","dark:bg-white/10",3,"active","selected","favorites","toggleFav","onSelect"],["btn","","matRipple","","return","",1,"inverse","sm:hidden","w-full",3,"click"],l,[1,"flex-1","h-1/2","w-full",3,"selected","is_displayed","onSelect"]]},template:function(n,e){if(1&n&&(_.TgZ(0,"div",0)(1,"header",1)(2,"button",2)(3,"app-icon"),_._uU(4,"close"),_.qZA()(),_.TgZ(5,"h3"),_.SDv(6,3),_.qZA()(),_.TgZ(7,"main",4),_._UZ(8,"parking-space-filters",5),_.TgZ(9,"div",6)(10,"parking-space-filters-display",7),_.NdJ("viewChange",function(l){return e.view=l}),_.qZA(),_.YNc(11,et,1,3,"parking-space-list",8),_.qZA(),_.TgZ(12,"parking-space-details",9),_.NdJ("activeChange",function(l){return e.setSelected(e.displayed,l)})("toggleFav",function(){return e.toggleFavourite(e.displayed)})("close",function(){return e.displayed=null}),_.qZA()(),_.TgZ(13,"footer",10),_.YNc(14,tt,2,0,"button",11),_.TgZ(15,"button",12),_.SDv(16,13),_.qZA()(),_.TgZ(17,"footer",14)(18,"button",15)(19,"div",16)(20,"app-icon",17),_._uU(21,"arrow_back"),_.qZA(),_.TgZ(22,"div",18),_.SDv(23,19),_.qZA()()(),_.TgZ(24,"p",20),_.SDv(25,21),_.qZA(),_.TgZ(26,"button",22),_.NdJ("click",function(){return e.setSelected(e.displayed,!e.isSelected(null==e.displayed?null:e.displayed.id))}),_.TgZ(27,"div",16)(28,"app-icon",17),_._uU(29),_.qZA(),_.TgZ(30,"div",23),_._uU(31),_.qZA()()()()(),_.YNc(32,nt,1,2,"ng-template",null,24,_.W1O)),2&n){const s=_.MAs(33);_.xp6(10),_.Q6J("view",e.view),_.xp6(1),_.Q6J("ngIf","list"===e.view)("ngIfElse",s),_.xp6(1),_.ekj("hidden",!e.displayed)("inset-0",e.displayed),_.Q6J("space",e.displayed)("active",e.selected_ids.includes(null==e.displayed?null:e.displayed.id))("fav",e.displayed&&e.favorites.includes(null==e.displayed?null:e.displayed.id)),_.xp6(2),_.Q6J("ngIf",e.displayed),_.xp6(1),_.ekj("mb-2",e.displayed),_.Q6J("mat-dialog-close",e.selected),_.xp6(3),_.Q6J("mat-dialog-close",e.selected),_.xp6(7),_.pQV(e.selected.length),_.QtT(25),_.xp6(1),_.ekj("inverse",e.isSelected(null==e.displayed?null:e.displayed.id)),_.Q6J("disabled",!e.displayed),_.xp6(3),_.Oqu(e.isSelected(null==e.displayed?null:e.displayed.id)?"remove":"add"),_.xp6(2),_.hij(" ",e.isSelected(null==e.displayed?null:e.displayed.id)?"Remove from Booking":"Add to booking"," ")}},dependencies:[t.O5,i.ZT,I.o,K.wG,e_,o_,i_,l_,n_]});var ot=a(719);function it(o,n){if(1&o&&_._UZ(0,"img",23),2&o){const e=_.oxw().$implicit;_.Q6J("src",e.images[0],_.LSH)}}function st(o,n){1&o&&_._UZ(0,"img",24)}function lt(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"div",7)(1,"div",8),_.YNc(2,it,1,1,"img",9),_.YNc(3,st,1,0,"ng-template",null,10,_.W1O),_.qZA(),_.TgZ(5,"div",11)(6,"div",12),_._uU(7),_.qZA(),_.TgZ(8,"div",13)(9,"app-icon",14),_._uU(10,"place"),_.qZA(),_.TgZ(11,"p"),_._uU(12),_.qZA()(),_.TgZ(13,"div",13)(14,"app-icon",14),_._uU(15,"people"),_.qZA(),_.TgZ(16,"p"),_.SDv(17,15),_.qZA()(),_.TgZ(18,"div",16)(19,"button",17),_.NdJ("click",function(){const S=_.CHM(e).$implicit,m=_.oxw();return _.KtG(m.changeResources(S))}),_.TgZ(20,"div",18),_.tHW(21,19),_._UZ(22,"app-icon"),_.N_p(),_.qZA()(),_.TgZ(23,"button",20),_.NdJ("click",function(){const S=_.CHM(e).$implicit,m=_.oxw();return _.KtG(m.removeResource(S))}),_.TgZ(24,"div",18),_.tHW(25,21),_._UZ(26,"app-icon"),_.N_p(),_.qZA()()()(),_.TgZ(27,"button",22),_.NdJ("click",function(){_.CHM(e);const l=_.oxw();return _.KtG(l.toggleFavourite(l.asset))}),_.TgZ(28,"app-icon"),_._uU(29),_.qZA()()()}if(2&o){const e=n.$implicit,s=_.MAs(4),l=_.oxw();_.xp6(2),_.Q6J("ngIf",null==e.images?null:e.images.length)("ngIfElse",s),_.xp6(5),_.hij(" ",e.name||"Meeting Resource"," "),_.xp6(5),_.Oqu(e.location),_.xp6(5),_.pQV(e.capacity<1?2:e.capacity)(e.capacity),_.QtT(17),_.xp6(10),_.ekj("text-blue-400",l.favorites.includes(null==l.asset?null:l.asset.id)),_.xp6(2),_.Oqu(l.favorites.includes(null==l.asset?null:l.asset.id)?"favorite":"favorite_border")}}const at=[];class r_{get favorites(){return this._settings.get("favourite_spaces")||at}constructor(n,e){this._settings=n,this._dialog=e,this.room_size=3,this.spaces=[],this.disabled=!1,this.registerOnChange=s=>this._onChange=s,this.registerOnTouched=s=>this._onTouch=s,this.setDisabledState=s=>this.disabled=s}changeResources(){this._dialog.open(a_,{data:{spaces:this.spaces,options:{capacity:this.room_size}}}).afterClosed().subscribe(e=>{e&&this.setValue(e)})}removeResource(n){this.setValue(this.spaces.filter(e=>e.id!==n.id))}setValue(n){this.spaces=n,this._onChange&&this._onChange(this.spaces)}writeValue(n){this.spaces=n||[]}toggleFavourite(n){const e=this.favorites;e.includes(n.id)?this._settings.saveUserSetting(E_,e.filter(l=>l!==n.id)):this._settings.saveUserSetting(E_,[...e,n.id])}}r_.\u0275fac=function(n){return new(n||r_)(_.Y36(ot.g),_.Y36(i.uw))},r_.\u0275cmp=_.Xpm({type:r_,selectors:[["parking-space-list-field"]],features:[_._Bn([{provide:N.JU,useExisting:(0,_.Gpc)(()=>r_),multi:!0}])],decls:10,vars:1,consts:function(){let o,n,e,s,l;return o=$localize`:␟45491a2ead2b592aec7b4d19300c0715230f334d␟1439078713747050312:Add Parking Resource`,n=$localize`:␟ed210c8c0f2511082633f06a2c94b8410f6cd9bf␟426413428618668868:{VAR_PLURAL, plural, =1 {Person } other {People
                            }}`,n=_.Zx4(n,{VAR_PLURAL:"\ufffd1\ufffd"}),e=$localize`:␟ddc17cbb67fd49c13c14733c877b09fb9bd86d87␟686822217414553756: ${"\ufffd0\ufffd"}:INTERPOLATION: ${n}:ICU: `,s=$localize`:␟ca9092fdbbb85e5828de77fdf85c49b918cec128␟559636443235347532:${"\ufffd#22\ufffd"}:START_TAG_APP_ICON:edit${"\ufffd/#22\ufffd"}:CLOSE_TAG_APP_ICON: Change `,l=$localize`:␟a386ba350cdee69beeb12a908d96f0724ddc2054␟2582674642057285571:${"\ufffd#26\ufffd"}:START_TAG_APP_ICON:close${"\ufffd/#26\ufffd"}:CLOSE_TAG_APP_ICON: Remove `,[["list","",1,"space-y-2"],["space","","class","relative p-2 rounded-lg w-full flex items-center shadow border border-gray-200",4,"ngFor","ngForOf"],["btn","","matRipple","","add-space","",1,"w-full","inverse","mt-2",3,"click"],[1,"flex","items-center","justify-center","space-x-2"],o,[1,"flex","items-center","flex-wrap","sm:space-x-2","mb-2"],[1,"flex-1","min-w-[256px]","space-y-2"],["space","",1,"relative","p-2","rounded-lg","w-full","flex","items-center","shadow","border","border-gray-200"],[1,"w-24","h-24","rounded-xl","bg-black/20","mr-4","overflow-hidden","flex","items-center","justify-center"],["class","object-cover h-full",3,"src",4,"ngIf","ngIfElse"],["placeholder",""],[1,"space-y-2","pb-4"],[1,"font-medium"],[1,"flex","items-center","text-sm","space-x-2"],[1,"text-blue-500"],e,[1,"absolute","bottom-0","right-0","flex","items-center","justify-end","text-xs"],["btn","","matRipple","","edit-space","",1,"clear",3,"click"],[1,"flex","items-center","space-x-2"],s,["btn","","matRipple","","remove-space","",1,"clear",3,"click"],l,["icon","","matRipple","","fav","",1,"absolute","top-1","right-1",3,"click"],[1,"object-cover","h-full",3,"src"],["src","assets/icons/car-placeholder.svg",1,"m-auto"]]},template:function(n,e){1&n&&(_.TgZ(0,"div",0),_.YNc(1,lt,30,9,"div",1),_.qZA(),_.TgZ(2,"button",2),_.NdJ("click",function(){return e.changeResources()}),_.TgZ(3,"div",3)(4,"app-icon"),_._uU(5,"search"),_.qZA(),_.TgZ(6,"span"),_.SDv(7,4),_.qZA()()(),_.TgZ(8,"div",5),_._UZ(9,"div",6),_.qZA()),2&n&&(_.xp6(1),_.Q6J("ngForOf",e.spaces))},dependencies:[t.sg,t.O5,I.o,K.wG]}),a(321),a(4367);var dt=a(6888),G_=a(266);function St(o,n){if(1&o){const e=_.EpF();_.TgZ(0,"button",2),_.NdJ("click",function(){const S=_.CHM(e).$implicit,m=_.oxw();return _.KtG(m.clicked.emit(S))}),_._UZ(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6),_.TgZ(5,"div",7),_._uU(6),_.qZA(),_._UZ(7,"div",8),_.qZA()}if(2&o){const e=n.$implicit,s=_.oxw();_.Udp("grid-column-start",e.position[0]+1)("grid-row-start",e.position[1]+1)("grid-column-end",e.position[0]+(e.size[0]+1))("background-color",s.status(e))("grid-row-end",e.position[1]+(e.size[1]+1)),_.Q6J("matTooltip",e.name)("disabled",!1===e.bookable),_.xp6(6),_.hij(" ",e.name," ")}}const gt=function(){return[]};class O_{get columns(){let n=1;for(const e of this.bank?.lockers||[]){const s=e.position[0]+e.size[0];s>n&&(n=s)}return n}constructor(n){this._settings=n,this.bank_status={10:"busy",7:"pending"},this.clicked=new _.vpe}status(n){const e=this._settings.get("app.explore.colors")||{},s=this.bank_status[n.id]||"free";return e[`lockers-${s}`]||e[`${s}`]||dt.y[`${s}`]}}O_.\u0275fac=function(n){return new(n||O_)(_.Y36(g.gb))},O_.\u0275cmp=_.Xpm({type:O_,selectors:[["locker-grid"]],inputs:{bank:"bank",bank_status:"bank_status"},outputs:{clicked:"clicked"},decls:2,vars:6,consts:[[1,"grid","gap-2","overflow-hidden","h-full","min-h-[75vh]","min-w-[60vw]","p-2"],["matRipple","","class","relative border border-black/20 rounded bg-teal-300 overflow-hidden",3,"grid-column-start","grid-row-start","grid-column-end","background-color","grid-row-end","matTooltip","disabled","click",4,"ngFor","ngForOf"],["matRipple","",1,"relative","border","border-black/20","rounded","bg-teal-300","overflow-hidden",3,"matTooltip","disabled","click"],["handle","",1,"absolute","top-1/2","-translate-y-1/2","left-2","w-1","h-6","bg-black/20","rounded"],["vent","",1,"absolute","left-1/2","-translate-x-1/2","top-2","w-3/5","h-1","bg-black/20","rounded-t"],["vent","",1,"absolute","left-1/2","-translate-x-1/2","top-4","w-3/5","h-1","bg-black/20","rounded-t"],["vent","",1,"absolute","left-1/2","-translate-x-1/2","top-6","w-3/5","h-1","bg-black/20","rounded-t"],[1,"absolute","left-1/2","-translate-x-1/2","top-8","text-[0.6rem]","font-medium","text-black/60"],[1,"absolute","inset-0","hover:bg-black/10"]],template:function(n,e){1&n&&(_.TgZ(0,"div",0),_.YNc(1,St,8,13,"button",1),_.qZA()),2&n&&(_.Udp("grid-template-columns","repeat("+e.columns+", 1fr)")("grid-template-rows","repeat("+(null==e.bank?null:e.bank.height)+", 1fr)"),_.xp6(1),_.Q6J("ngForOf",(null==e.bank?null:e.bank.lockers)||_.DdM(5,gt)))},dependencies:[t.sg,K.wG,G_.gM],styles:["button[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.75;background-color:#ccc!important}"]});class c_{}c_.\u0275fac=function(n){return new(n||c_)},c_.\u0275mod=_.oAB({type:c_}),c_.\u0275inj=_.cJS({providers:[N.UX],imports:[t.ez,N.u5,N.UX,$.Fk,h.c,v.lN,x.FA,k.ot,i.Is,D.Cq,c.p9,v_.Bb,B.W,y.K,K.si,G_.AV]}),a(1980);var h_=a(9972),$_=a(8115),y_=a(2722);class m_{constructor(n,e){this._org=n,this._dialog=e,this.can_set_date=!0,this.error_on_host=!0}bookDesk({desks:n,host:e,reason:s,attendees:l,date:S}){var m=this;return(0,T.Z)(function*(){if(m.error_on_host&&!e)return(0,g.cB)("You need to select a host to book a desk.");e=e||(0,g.ar)(),s=s||"";const L=m._org.levelWithID(n[0].zone instanceof Array?n[0].zone:[n[0].zone?.id]);let F=m._dialog.open(b_.I),q=yield Promise.race([F.componentInstance.event.pipe((0,A_.P)(J=>"done"===J.reason)).toPromise(),F.afterClosed().pipe((0,__.U)(J=>null)).toPromise()]);if(!q||(F.close(),F=m._dialog.open(t_,{data:{host:e,desks:n,date:S?new Date(S):new Date,reason:s,level:L,can_set_date:m.can_set_date}}),q=yield Promise.race([F.componentInstance.event.pipe((0,A_.P)(J=>"done"===J.reason)).toPromise(),F.afterClosed().pipe((0,__.U)(J=>null)).toPromise()]),!q))return;if(S=F.componentInstance.date||S,s=F.componentInstance.reason||s,!(e=F.componentInstance.host||e))return F.close(),(0,g.cB)("You need to select a host to book a desk. ");if(F.componentInstance.loading="Checking for existing desk bookings...",(yield(0,O.F2)({type:"desk",period_start:(0,h_.Z)((0,$_.Z)(S||new Date)),period_end:(0,h_.Z)((0,y_.Z)(S||new Date))}).toPromise()).filter(J=>J.user_email.toLowerCase()===e.email.toLowerCase())?.length)return F.close(),(0,g.cB)("You currently already have a desk booked for the selected date.");F.componentInstance.loading="Booking desk...";const N_=[e,...l||[]];return yield Promise.all([n.map((J,d_)=>m.makeDeskBooking(J,e,S.valueOf()||(new Date).valueOf(),s,N_[d_]))]),(0,g.t5)("Successfully booked desk"),F.close(),!0})()}makeDeskBooking(n,e,s,l,S=null){var m=this;return(0,T.Z)(function*(){const L=`${n.zone?.name}-${n.id}`,F=m._org.levelWithID(n.zone instanceof Array?n.zone:[n.zone?.id]),q=n.zone?.id?[n.zone?.id,F?.parent_id]:[F?.parent_id],z={booking_start:(0,h_.Z)((0,$_.Z)(s)),user_id:S?.id||e.id,user_name:S?.name||e.name,user_email:S?.email||e.email,booking_end:Math.floor((0,y_.Z)(s).valueOf()/1e3),asset_id:n.id,asset_name:n.name,title:l,description:L,zones:q,booking_type:"desk",extension_data:{map_id:n?.map_id||n?.id,groups:n.groups,for_user:S?.email}};return(0,O.km)(z).toPromise()})()}}m_.\u0275fac=function(n){return new(n||m_)(_.LFG(d.w7),_.LFG(i.uw))},m_.\u0275prov=_.Yz7({token:m_,factory:m_.\u0275fac,providedIn:"root"}),a(7121)},321:(V,G,a)=>{a.d(G,{A:()=>d});var t=a(4650),N=a(4006),k=a(719),c=a(6485),x=a(5938),i=a(6895),v=a(6709),h=a(5306),D=a(3238);const $=function(){return[]},y=function(){return{standalone:!0}};function B(p,r){if(1&p){const u=t.EpF();t.TgZ(0,"mat-checkbox",27),t.NdJ("ngModelChange",function(I){const Q=t.CHM(u).$implicit,j=t.oxw(3);return t.KtG(j.setFeature(Q,I))}),t._uU(1),t.qZA()}if(2&p){const u=r.$implicit,O=t.oxw(3);t.Q6J("ngModel",(O.selected_features||t.DdM(3,$)).includes(u))("ngModelOptions",t.DdM(4,y)),t.xp6(1),t.hij(" ",u," ")}}function _(p,r){if(1&p&&(t.TgZ(0,"div",23)(1,"label",24),t._uU(2,"Type"),t.qZA(),t.TgZ(3,"div",25),t.YNc(4,B,2,5,"mat-checkbox",26),t.qZA()()),2&p){const u=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",u.features)}}function M(p,r){if(1&p&&t._UZ(0,"img",28),2&p){const u=t.oxw().$implicit;t.Q6J("src",u.images[0],t.LSH)}}function T(p,r){1&p&&t._UZ(0,"img",29)}function g(p,r){if(1&p){const u=t.EpF();t.TgZ(0,"div",7),t.YNc(1,_,5,1,"div",8),t.TgZ(2,"div",9),t.YNc(3,M,1,1,"img",10),t.YNc(4,T,1,0,"ng-template",null,11,t.W1O),t.qZA(),t.TgZ(6,"div",12)(7,"div",13),t._uU(8),t.qZA(),t.TgZ(9,"div",14)(10,"app-icon",15),t._uU(11,"place"),t.qZA(),t.TgZ(12,"p"),t._uU(13),t.qZA()(),t.TgZ(14,"div",16)(15,"button",17),t.NdJ("click",function(){const b=t.CHM(u).$implicit,Q=t.oxw();return t.KtG(Q.changeResources(b))}),t.TgZ(16,"div",18),t.tHW(17,19),t._UZ(18,"app-icon"),t.N_p(),t.qZA()(),t.TgZ(19,"button",20),t.NdJ("click",function(){const b=t.CHM(u).$implicit,Q=t.oxw();return t.KtG(Q.removeResource(b))}),t.TgZ(20,"div",18),t.tHW(21,21),t._UZ(22,"app-icon"),t.N_p(),t.qZA()()()(),t.TgZ(23,"button",22),t.NdJ("click",function(){t.CHM(u);const I=t.oxw();return t.KtG(I.toggleFavourite(I.asset))}),t.TgZ(24,"app-icon"),t._uU(25),t.qZA()()()}if(2&p){const u=r.$implicit,O=t.MAs(5),I=t.oxw();t.xp6(1),t.Q6J("ngIf",null==I.features?null:I.features.length),t.xp6(2),t.Q6J("ngIf",null==u.images?null:u.images.length)("ngIfElse",O),t.xp6(5),t.hij(" ",u.name||"Desk"," "),t.xp6(5),t.Oqu((null==u.zone?null:u.zone.display_name)||(null==u.zone?null:u.zone.name)),t.xp6(10),t.ekj("text-blue-400",I.favorites.includes(null==I.asset?null:I.asset.id)),t.xp6(2),t.Oqu(I.favorites.includes(null==I.asset?null:I.asset.id)?"favorite":"favorite_border")}}const E=[];class d{get favorites(){return this._settings.get(c.v)||E}constructor(r,u){this._settings=r,this._dialog=u,this.features=[],this.room_size=3,this.items=[],this.disabled=!1,this.selected_features=[],this.registerOnChange=O=>this._onChange=O,this.registerOnTouched=O=>this._onTouch=O,this.setDisabledState=O=>this.disabled=O}changeResources(){const r=this._dialog.open(c.t,{data:{items:this.items,options:{capacity:this.room_size}}});r.afterClosed().subscribe(u=>{u||(u=r.componentInstance.selected),this.setValue(u)})}removeResource(r){this.setValue(this.items.filter(u=>u.id!==r.id))}setValue(r){this.items=r,this._onChange&&this._onChange(this.items)}writeValue(r){this.items=r||[]}toggleFavourite(r){const u=this.favorites;u.includes(r.id)?this._settings.saveUserSetting(c.v,u.filter(I=>I!==r.id)):this._settings.saveUserSetting(c.v,[...u,r.id])}}d.\u0275fac=function(r){return new(r||d)(t.Y36(k.g),t.Y36(x.uw))},d.\u0275cmp=t.Xpm({type:d,selectors:[["desk-list-field"]],inputs:{features:"features"},features:[t._Bn([{provide:N.JU,useExisting:(0,t.Gpc)(()=>d),multi:!0}])],decls:10,vars:1,consts:function(){let p,r,u;return p=$localize`:␟76b072e559d819bff20d8a487e73f64b3afe4f86␟1087109089519255800:Add Desk`,r=$localize`:␟ca9092fdbbb85e5828de77fdf85c49b918cec128␟559636443235347532:${"\ufffd#18\ufffd"}:START_TAG_APP_ICON:edit${"\ufffd/#18\ufffd"}:CLOSE_TAG_APP_ICON: Change `,u=$localize`:␟a386ba350cdee69beeb12a908d96f0724ddc2054␟2582674642057285571:${"\ufffd#22\ufffd"}:START_TAG_APP_ICON:close${"\ufffd/#22\ufffd"}:CLOSE_TAG_APP_ICON: Remove `,[["list","",1,"space-y-2"],["desk","","class","relative p-2 rounded-lg w-full flex items-center shadow border border-gray-200",4,"ngFor","ngForOf"],["btn","","matRipple","","name","add-desk",1,"w-full","inverse","mt-2",3,"click"],[1,"flex","items-center","justify-center","space-x-2"],p,[1,"flex","items-center","flex-wrap","sm:space-x-2","mb-2"],[1,"flex-1","min-w-[256px]","space-y-2"],["desk","",1,"relative","p-2","rounded-lg","w-full","flex","items-center","shadow","border","border-gray-200"],["class","flex flex-col",4,"ngIf"],[1,"w-20","h-20","rounded-xl","bg-black/20","mr-4","overflow-hidden","flex","items-center","justify-center"],["class","min-h-full object-cover",3,"src",4,"ngIf","ngIfElse"],["placeholder",""],[1,"space-y-2","pb-4"],[1,"font-medium"],[1,"flex","items-center","text-sm","space-x-2"],[1,"text-blue-500"],[1,"absolute","bottom-0","right-0","flex","items-center","justify-end","text-xs"],["btn","","matRipple","","name","edit-desk",1,"clear",3,"click"],[1,"flex","items-center","space-x-2"],r,["btn","","matRipple","","name","remove-desk",1,"clear",3,"click"],u,["icon","","matRipple","","name","toggle-desk-favourite",1,"absolute","top-1","right-1",3,"click"],[1,"flex","flex-col"],["for","title"],["features","",1,"flex","items-center","flex-wrap","space-x-2"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngFor","ngForOf"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"min-h-full","object-cover",3,"src"],["src","assets/icons/desk-placeholder.svg",1,"m-auto"]]},template:function(r,u){1&r&&(t.TgZ(0,"div",0),t.YNc(1,g,26,8,"div",1),t.qZA(),t.TgZ(2,"button",2),t.NdJ("click",function(){return u.changeResources()}),t.TgZ(3,"div",3)(4,"app-icon"),t._uU(5,"search"),t.qZA(),t.TgZ(6,"span"),t.SDv(7,4),t.qZA()()(),t.TgZ(8,"div",5),t._UZ(9,"div",6),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngForOf",u.items))},dependencies:[i.sg,i.O5,N.JJ,N.On,v.oG,h.o,D.wG]})},5417:(V,G,a)=>{a.d(G,{v:()=>T});var t=a(4650),N=a(4702),k=a(6895),c=a(5306),x=a(9136),i=a(2581),v=a(3238);function h(g,E){if(1&g&&t._UZ(0,"image-carousel",21),2&g){const d=t.oxw(2);t.Q6J("images",d.desk.images)}}function D(g,E){if(1&g&&(t.TgZ(0,"div",25)(1,"div",26),t._uU(2),t.qZA()()),2&g){const d=E.$implicit;t.xp6(2),t.Oqu(d)}}const $=function(){return[]};function y(g,E){if(1&g&&(t.TgZ(0,"section",22)(1,"h2",10),t.SDv(2,23),t.qZA(),t.YNc(3,D,3,1,"div",24),t.qZA()),2&g){const d=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",d.desk.features||t.DdM(1,$))}}const B=function(){return{disable_pan:!0,disable_zoom:!0}};function _(g,E){if(1&g){const d=t.EpF();t.ynx(0),t.TgZ(1,"section",2),t.YNc(2,h,1,1,"image-carousel",3),t.TgZ(3,"button",4),t.NdJ("click",function(){t.CHM(d);const r=t.oxw();return t.KtG(r.close.emit())}),t.TgZ(4,"app-icon"),t._uU(5,"arrow_back"),t.qZA()(),t.TgZ(6,"button",5),t.NdJ("click",function(){t.CHM(d);const r=t.oxw();return t.KtG(r.toggleFav.emit())}),t.TgZ(7,"app-icon"),t._uU(8),t.qZA()()(),t.TgZ(9,"div",6)(10,"section",7)(11,"h2",8),t._uU(12),t.qZA()(),t.TgZ(13,"section",9)(14,"h2",10),t._uU(15,"Details"),t.qZA(),t.TgZ(16,"div",11)(17,"app-icon"),t._uU(18,"person"),t.qZA(),t.TgZ(19,"p"),t.SDv(20,12),t.qZA()(),t.TgZ(21,"div",11)(22,"app-icon"),t._uU(23,"desk"),t.qZA(),t.TgZ(24,"p"),t._uU(25),t.qZA()(),t.TgZ(26,"div",11)(27,"app-icon"),t._uU(28,"place"),t.qZA(),t.TgZ(29,"p"),t._uU(30),t.qZA()()(),t.YNc(31,y,4,2,"section",13),t.TgZ(32,"section",14),t._UZ(33,"interactive-map",15),t.qZA()(),t.TgZ(34,"div",16)(35,"button",17),t.NdJ("click",function(){t.CHM(d);const r=t.oxw();return r.active=!r.active,t.KtG(r.activeChange.emit(r.active))}),t.TgZ(36,"div",18)(37,"app-icon",19),t._uU(38),t.qZA(),t.TgZ(39,"p"),t.SDv(40,20),t.qZA()()()(),t.BQk()}if(2&g){const d=t.oxw();t.xp6(1),t.ekj("sm:h-64",null==d.desk.images?null:d.desk.images.length)("h-40",null==d.desk.images?null:d.desk.images.length)("sm:h-0",!(null!=d.desk.images&&d.desk.images.length))("h-12",!(null!=d.desk.images&&d.desk.images.length))("!bg-transparent",!(null!=d.desk.images&&d.desk.images.length)),t.xp6(1),t.Q6J("ngIf",null==d.desk.images?null:d.desk.images.length),t.xp6(4),t.ekj("text-white",!d.fav)("text-blue-400",d.fav),t.xp6(2),t.Oqu(d.fav?"favorite":"favorite_border"),t.xp6(4),t.hij(" ",d.desk.display_name||d.desk.name||d.desk.id," "),t.xp6(13),t.hij(" ",d.desk.display_name||d.desk.name||d.desk.id," "),t.xp6(5),t.Oqu((null==d.desk.zone?null:d.desk.zone.display_name)||(null==d.desk.zone?null:d.desk.zone.name)),t.xp6(1),t.Q6J("ngIf",null==d.desk.features?null:d.desk.features.length),t.xp6(2),t.Q6J("src",d.map_url)("features",d.features)("options",t.DdM(27,B)),t.xp6(2),t.ekj("inverse",d.active),t.xp6(3),t.Oqu(d.active?"remove":"add"),t.xp6(2),t.pQV(d.active),t.QtT(40)}}function M(g,E){1&g&&(t.TgZ(0,"div",27)(1,"p",28),t.SDv(2,29),t.qZA()())}class T{constructor(){this.fav=!1,this.active=!1,this.close=new t.vpe,this.toggleFav=new t.vpe,this.activeChange=new t.vpe,this.map_url="",this.features=[]}ngOnChanges(E){E.desk&&this.desk&&this.updateFeature()}updateFeature(){this.map_url=this.desk.zone.map_id,this.features=[{location:this.desk.map_id||this.desk.id,content:N.q}]}}T.\u0275fac=function(E){return new(E||T)},T.\u0275cmp=t.Xpm({type:T,selectors:[["desk-details"]],inputs:{desk:"desk",fav:"fav",active:"active"},outputs:{close:"close",toggleFav:"toggleFav",activeChange:"activeChange"},features:[t.TTD],decls:3,vars:2,consts:function(){let g,E,d,p,r;return g=$localize`:␟f3cd229363e020d7ceb13bb351bb87f86dda78ef␟6431414344811875961:Single desk`,E=$localize`:␟193cbdbbcae6ad83fa2f2ac8d7dcb6b41c384a89␟2952235329246771628:{VAR_SELECT, select, true {Remove from booking } false {Add to booking }}`,E=t.Zx4(E,{VAR_SELECT:"\ufffd0\ufffd"}),d=$localize`:␟fc6b8194e480db3111367487d3a97bdf5a6333a7␟5607930927273386767: ${E}:ICU: `,p=$localize`:␟bf10c600bd861cfd0a23f4759562ee0ae9dbe19f␟1551920764795208868:Facilities`,r=$localize`:␟c6efe811f5410838382ce9adb2636cb75d783ebc␟4621791550614740403: Select a desk to view it's details `,[[4,"ngIf","ngIfElse"],["emptyState",""],["image","",1,"relative","w-full","bg-black/20"],["class","absolute inset-0",3,"images",4,"ngIf"],["icon","","matRipple","","name","close-desk-details",1,"absolute","top-2","left-2","bg-black/40","sm:hidden","text-white",3,"click"],["icon","","matRipple","","name","toggle-desk-favourite-details",1,"absolute","top-2","right-2","bg-black/40",3,"click"],[1,"p-2","space-y-2","flex-1","h-[calc(100%-19.75rem)]","overflow-auto"],["actions","",1,"z-0","pb-2","border-b"],[1,"text-xl","font-medium","mb-2","mt-4"],["details","",1,"space-y-2","pb-2","border-b","dark:border-neutral-500"],[1,"text-xl","font-medium"],[1,"flex","items-center","space-x-2"],g,["facilities","","class","space-y-2 pb-2 border-b dark:border-neutral-500",4,"ngIf"],["map","",1,"w-full","mx-auto","h-64","sm:h-48","relative","border","border-gray-200","dark:border-neutral-500","overflow-hidden","rounded"],[1,"pointer-events-none",3,"src","features","options"],[1,"px-2","pt-2","pb-[5.5rem]","border-t","border-gray-200","dark:border-neutral-500","shadow","sm:hidden"],["btn","","matRipple","","name","toggle-desk-details",1,"w-full",3,"click"],[1,"flex","items-center","justify-center"],[1,"text-2xl"],d,[1,"absolute","inset-0",3,"images"],["facilities","",1,"space-y-2","pb-2","border-b","dark:border-neutral-500"],p,["class","flex items-center flex-wrap space-x-2",4,"ngFor","ngForOf"],[1,"flex","items-center","flex-wrap","space-x-2"],["for","feat",1,"flex-1","w-1/2"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"],r]},template:function(E,d){if(1&E&&(t.YNc(0,_,41,28,"ng-container",0),t.YNc(1,M,3,0,"ng-template",null,1,t.W1O)),2&E){const p=t.MAs(2);t.Q6J("ngIf",d.desk)("ngIfElse",p)}},dependencies:[k.sg,k.O5,c.o,x.p,i.K,v.wG],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:30%;min-width:20rem;height:100%;min-height:65vh;background:white}"]})},2075:(V,G,a)=>{a.d(G,{x:()=>_});var t=a(4650),N=a(9112),k=a(8297),c=a(2084),x=a(2722),i=a(8242),v=a(6895),h=a(5306),D=a(3238);function $(M,T){if(1&M){const g=t.EpF();t.TgZ(0,"div",13)(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"button",14),t.NdJ("click",function(){const p=t.CHM(g).$implicit,r=t.oxw();return t.KtG(r.setFeature(p,!1))}),t.TgZ(4,"app-icon"),t._uU(5,"close"),t.qZA()()()}if(2&M){const g=T.$implicit;t.xp6(2),t.Oqu(g)}}function y(M,T){if(1&M){const g=t.EpF();t.TgZ(0,"div",15)(1,"span"),t.SDv(2,16),t.qZA(),t.TgZ(3,"button",17),t.NdJ("click",function(){t.CHM(g);const d=t.oxw();return t.KtG(d.setOptions({show_fav:!1}))}),t.TgZ(4,"app-icon"),t._uU(5,"close"),t.qZA()()()}}const B=function(){return[]};class _ extends N.cx{get start(){return this._state.form.value.date}get end(){const{date:T,duration:g,all_day:E}=this._state.form.value;return E?(0,x.Z)(T):T+60*g*1e3}constructor(T,g){super(),this._bsheet=T,this._state=g,this.view="list",this.viewChange=new t.vpe,this.options=this._state.options,this.setOptions=E=>this._state.setOptions(E),this.setFeature=(E,d)=>this._state.setFeature(E,d),this.editFilter=()=>this._bsheet.open(k.o)}}_.\u0275fac=function(T){return new(T||_)(t.Y36(i.ch),t.Y36(c.f))},_.\u0275cmp=t.Xpm({type:_,selectors:[["desk-filters-display"]],inputs:{view:"view"},outputs:{viewChange:"viewChange"},features:[t.qOj],decls:20,vars:23,consts:function(){let M,T,g,E;return M=$localize`:␟19eaa5cd51d70d9ea957eecac78cfd811e9b93d8␟5208858215712453646: Filters `,T=$localize`:␟992a9a6a193a56c5b8846dc972c5e1977ee5f1aa␟8553228906889869186: Map `,g=$localize`:␟4b286e90831dd637c5cd3eb20544664ee7112669␟7787942140742011951: List `,E=$localize`:␟d6ad8326be48837fe776a268abc758d1c7ba4f05␟1305804744685886428:Favourites Only`,[["actions","",1,"sm:hidden","space-x-2","flex","flex-row","items-center","p-2"],["btn","","matRipple","","name","edit-desk-filters",1,"flex-1","w-1/2",3,"click"],M,[1,"flex","items-center"],["btn","","matRipple","","name","view-desk-map",1,"rounded-l","rounded-r-none",3,"click"],T,["btn","","matRipple","","name","view-desk-list",1,"rounded-r","rounded-l-none",3,"click"],g,["filters","",1,"flex","items-center","flex-wrap","p-2"],["filter-item","","date",""],["filter-item","","time",""],["filter-item","","features","",4,"ngFor","ngForOf"],["filter-item","",4,"ngIf"],["filter-item","","features",""],["icon","","matRipple","","name","remove-desk-filter",1,"-mr-4",3,"click"],["filter-item",""],E,["icon","","matRipple","","name","remove-desk-favs-filter",1,"-mr-4",3,"click"]]},template:function(T,g){if(1&T&&(t.TgZ(0,"section",0)(1,"button",1),t.NdJ("click",function(){return g.editFilter()}),t.SDv(2,2),t.qZA(),t.TgZ(3,"div",3)(4,"button",4),t.NdJ("click",function(){return g.view="map",g.viewChange.emit(g.view)}),t.SDv(5,5),t.qZA(),t.TgZ(6,"button",6),t.NdJ("click",function(){return g.view="list",g.viewChange.emit(g.view)}),t.SDv(7,7),t.qZA()()(),t.TgZ(8,"section",8)(9,"div",9),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"div",10),t._uU(13),t.ALo(14,"date"),t.ALo(15,"date"),t.qZA(),t.YNc(16,$,6,1,"div",11),t.ALo(17,"async"),t.YNc(18,y,6,0,"div",12),t.ALo(19,"async"),t.qZA()),2&T){let E,d;t.xp6(4),t.ekj("inverse","map"!==g.view),t.xp6(2),t.ekj("inverse","list"!==g.view),t.xp6(4),t.Oqu(t.xi3(11,9,g.start,"mediumDate")),t.xp6(3),t.AsE(" ",t.xi3(14,12,g.start,"shortTime")," \u2014 ",t.xi3(15,15,g.end,"shortTime")," "),t.xp6(3),t.Q6J("ngForOf",(null==(E=t.lcZ(17,18,g.options))?null:E.features)||t.DdM(22,B)),t.xp6(2),t.Q6J("ngIf",null==(d=t.lcZ(19,20,g.options))?null:d.show_fav)}},dependencies:[v.sg,v.O5,h.o,D.wG,v.Ov,v.uU],styles:["[filter-item][_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 1rem;height:2rem;font-size:.875rem;border:1px solid rgba(0,0,0,.2);border-radius:1.25rem;margin-right:.5rem;margin-bottom:.5rem}[filter-item][_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.1)}[filter-item][_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:.5rem}"]})},8297:(V,G,a)=>{a.d(G,{o:()=>H});var t=a(9112),N=a(2722),k=a(5650),c=a(565),x=a(2084),i=a(4650),v=a(8242),h=a(6895),D=a(4006),$=a(9549),y=a(6709),B=a(3238),_=a(2329),M=a(1022),T=a(7303),g=a(5306),E=a(4385),d=a(9383);function p(R,A){if(1&R){const f=i.EpF();i.TgZ(0,"button",29),i.NdJ("click",function(){i.CHM(f);const C=i.oxw();return i.KtG(C.close())}),i.TgZ(1,"app-icon"),i._uU(2,"keyboard_arrow_left"),i.qZA()()}}function r(R,A){if(1&R&&(i.TgZ(0,"mat-option",35),i._uU(1),i.qZA()),2&R){const f=A.$implicit;i.Q6J("value",f),i.xp6(1),i.hij(" ",f.display_name||f.name," ")}}const u=function(){return{standalone:!0}};function O(R,A){if(1&R){const f=i.EpF();i.TgZ(0,"div",30)(1,"label"),i.SDv(2,31),i.qZA(),i.TgZ(3,"mat-form-field",32)(4,"mat-select",33),i.NdJ("ngModelChange",function(C){i.CHM(f);const U=i.oxw();return i.KtG(U.building=C)})("ngModelChange",function(C){i.CHM(f);const U=i.oxw();return i.KtG(U.setOptions({zone_id:null==C?null:C.id}))}),i.YNc(5,r,2,2,"mat-option",34),i.ALo(6,"async"),i.qZA()()()}if(2&R){const f=i.oxw();i.xp6(4),i.Q6J("ngModel",f.building)("ngModelOptions",i.DdM(5,u)),i.xp6(1),i.Q6J("ngForOf",i.lcZ(6,3,f.buildings))}}function I(R,A){if(1&R&&(i.TgZ(0,"mat-option",35),i._uU(1),i.qZA()),2&R){const f=A.$implicit;i.Q6J("value",f.id),i.xp6(1),i.hij(" ",f.display_name||f.name," ")}}function b(R,A){if(1&R){const f=i.EpF();i.TgZ(0,"div",30)(1,"label"),i._uU(2,"Level"),i.qZA(),i.TgZ(3,"mat-form-field",36)(4,"mat-select",37),i.NdJ("ngModelChange",function(C){i.CHM(f);const U=i.oxw();return i.KtG(U.setOptions({zone_id:C||U.building.id}))}),i.YNc(5,I,2,2,"mat-option",34),i.ALo(6,"async"),i.qZA()()()}if(2&R){const f=i.oxw();i.xp6(4),i.Q6J("disabled",!f.building)("ngModelOptions",i.DdM(5,u)),i.xp6(1),i.Q6J("ngForOf",i.lcZ(6,3,f.levels))}}function Q(R,A){1&R&&(i.TgZ(0,"div",38)(1,"mat-checkbox",39),i.SDv(2,40),i.qZA()())}const j=function(){return[]};function K(R,A){if(1&R){const f=i.EpF();i.TgZ(0,"div",44)(1,"div",45),i._uU(2),i.qZA(),i.TgZ(3,"mat-checkbox",46),i.NdJ("ngModelChange",function(C){const X=i.CHM(f).$implicit,w=i.oxw(2);return i.KtG(w.setFeature(X,C))}),i.ALo(4,"async"),i.qZA()()}if(2&R){const f=A.$implicit,P=i.oxw(2);let C;i.xp6(2),i.Oqu(f),i.xp6(1),i.Q6J("ngModel",((null==(C=i.lcZ(4,3,P.options))?null:C.features)||i.DdM(5,j)).includes(f))("ngModelOptions",i.DdM(6,u))}}function C_(R,A){if(1&R&&(i.TgZ(0,"section",41)(1,"h2",8),i.SDv(2,42),i.qZA(),i.YNc(3,K,5,7,"div",43),i.ALo(4,"async"),i.qZA()),2&R){const f=i.oxw();i.xp6(3),i.Q6J("ngForOf",i.lcZ(4,1,f.features))}}function M_(R,A){if(1&R){const f=i.EpF();i.TgZ(0,"div",47)(1,"button",48),i.NdJ("click",function(){i.CHM(f);const C=i.oxw();return i.KtG(C.close())}),i.SDv(2,49),i.qZA()()}}class H{get building(){return this._org.building}set building(A){this._org.building=A}get allow_time_changes(){return!!this._settings.get("app.desks.allow_time_changes")}get allow_all_day(){return this.allow_time_changes&&!!this._settings.get("app.desks.allow_all_day")}get end_date(){return(0,N.Z)((0,k.Z)(Date.now(),this._settings.get("app.desks.available_period")||90))}constructor(A,f,P,C){this._bsheet_ref=A,this._state=f,this._org=P,this._settings=C,this.can_close=!1,this.options=this._state.options,this.features=this._state.features,this.buildings=this._org.active_buildings,this.levels=this._org.active_levels,this.form=this._state.form,this.close=()=>this._bsheet_ref.dismiss(),this.setOptions=U=>this._state.setOptions(U),this.setFeature=(U,X)=>this._state.setFeature(U,X),this.setLevel=U=>{},this.can_close=!!this._bsheet_ref}}H.\u0275fac=function(A){return new(A||H)(i.Y36(v.oL,8),i.Y36(x.f),i.Y36(c.w),i.Y36(t.gb))},H.\u0275cmp=i.Xpm({type:H,selectors:[["desk-filters"]],decls:43,vars:36,consts:function(){let R,A,f,P,C,U,X,w,f_,S_,T_;return R=$localize`:␟a42190bd19b1cc93828e70bd0ef7a119f4c22aca␟7734428352389083660:Desk Filters`,A=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,f=$localize`:␟2f933b826a570836cab04f683970a2d22068458c␟3973931101896534797:Date`,P=$localize`:␟7c0a71d337783e527c1c8e91e433b301c5b1d8a8␟4204880191779081093:Start Time`,C=$localize`:␟e1f10d9bf4d3c37490cd5bf82007444ae7af46b1␟3845185958891849368:End Time`,U=$localize`:␟bde3d9fd949ba4c6014b8e64c1362753bca1cf0c␟5010873675481014004: ${"\ufffd0\ufffd"}:INTERPOLATION: `,X=$localize`:␟cd942cf7297cb47f1a116efdedff1c8547c6ea3e␟5737771872454551963: ${"\ufffd0\ufffd"}:INTERPOLATION: `,w=$localize`:␟6e8be3c170a661414dbcf0e4be5ce2ba65f62615␟5782981899482871069:Building`,f_=$localize`:␟d7f43e20f3a729fa3de32bc7a1f709ccd722eae5␟835486935962207481: All Day `,S_=$localize`:␟f61c6867295f3b53d23557021f2f4e0aa1d0b8fc␟8650499415827640724:Type`,T_=$localize`:␟c17e2cc448524a39eb83b2937cea3235a2e8bf37␟2296888311792137027: Apply Filters `,[[1,"flex","rounded-t-md","items-center","border-b","border-gray-200","dark:border-neutral-500","pb-2","sm:p-4"],[1,"flex-1","pl-2"],["icon","","matRipple","","name","close-desk-filters","class","sm:hidden",3,"click",4,"ngIf"],[1,"font-medium","flex-2","text-center"],R,[1,"flex-1"],[1,"max-h-[65vh]","p-2","overflow-y-auto","overflow-x-hidden","divide-y","divide-gray-200","w-full","max-w-[100vw]","sm:max-w-[30vw]",3,"formGroup"],["details",""],[1,"text-lg","font-medium"],A,["class","flex-1 min-w-[256px] flex flex-col",4,"ngIf"],[1,"flex-1","min-w-[256px]"],f,["name","date","formControlName","date",3,"to"],[1,"flex","items-center","space-x-2"],[1,"flex-1","w-1/3"],P,["name","start-time",3,"ngModel","ngModelOptions","ngModelChange"],C,["formControlName","duration",3,"time","max","min","step","disabled"],["class","flex justify-end -mt-2 mb-2",4,"ngIf"],["favs","",1,"space-y-2","pb-4"],U,[1,"flex","items-center"],["for","fav",1,"flex-1","w-1/2"],X,["name","fav",3,"ngModel","ngModelOptions","ngModelChange"],["class","space-y-2","features","",4,"ngIf"],["class","px-2 py-2 w-full border-t border-gray-200",4,"ngIf"],["icon","","matRipple","","name","close-desk-filters",1,"sm:hidden",3,"click"],[1,"flex-1","min-w-[256px]","flex","flex-col"],w,["appearance","outline",1,"w-full"],["name","building","placeholder","Select building",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["appearance","outline"],["placeholder","Any Level","ngModel","",3,"disabled","ngModelOptions","ngModelChange"],[1,"flex","justify-end","-mt-2","mb-2"],["formControlName","all_day"],f_,["features","",1,"space-y-2"],S_,["class","flex items-center flex-wrap space-x-2",4,"ngFor","ngForOf"],[1,"flex","items-center","flex-wrap","space-x-2"],["for","feat",1,"flex-1","w-1/2"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"px-2","py-2","w-full","border-t","border-gray-200"],["btn","","matRipple","","name","apply-desk-filters",1,"w-full",3,"click"],T_]},template:function(A,f){if(1&A&&(i.TgZ(0,"div",0)(1,"div",1),i.YNc(2,p,3,0,"button",2),i.qZA(),i.TgZ(3,"h3",3),i.SDv(4,4),i.qZA(),i._UZ(5,"div",5),i.qZA(),i.TgZ(6,"form",6)(7,"section",7)(8,"h2",8),i.SDv(9,9),i.qZA(),i.YNc(10,O,7,6,"div",10),i.ALo(11,"async"),i.YNc(12,b,7,6,"div",10),i.ALo(13,"async"),i.TgZ(14,"div",11)(15,"label"),i.SDv(16,12),i.qZA(),i.TgZ(17,"a-date-field",13),i._uU(18),i.ALo(19,"translate"),i.qZA()(),i.TgZ(20,"div",14)(21,"div",15)(22,"label"),i.SDv(23,16),i.qZA(),i.TgZ(24,"a-time-field",17),i.NdJ("ngModelChange",function(C){return f.form.patchValue({date:C})}),i.qZA()(),i.TgZ(25,"div",15)(26,"label"),i.SDv(27,18),i.qZA(),i._UZ(28,"a-duration-field",19),i.qZA()(),i.YNc(29,Q,3,0,"div",20),i.qZA(),i.TgZ(30,"section",21)(31,"h2",8),i.SDv(32,22),i.ALo(33,"translate"),i.qZA(),i.TgZ(34,"div",23)(35,"div",24),i.SDv(36,25),i.ALo(37,"translate"),i.qZA(),i.TgZ(38,"mat-checkbox",26),i.NdJ("ngModelChange",function(C){return f.setOptions({show_fav:C})}),i.ALo(39,"async"),i.qZA()()(),i.YNc(40,C_,5,3,"section",27),i.ALo(41,"async"),i.qZA(),i.YNc(42,M_,3,0,"div",28)),2&A){let P,C,U,X,w;i.xp6(2),i.Q6J("ngIf",f.can_close),i.xp6(4),i.Q6J("formGroup",f.form),i.xp6(4),i.Q6J("ngIf",null==(P=i.lcZ(11,20,f.buildings))?null:P.length),i.xp6(2),i.Q6J("ngIf",(null==(C=i.lcZ(13,22,f.levels))?null:C.length)>1),i.xp6(5),i.Q6J("to",f.end_date),i.xp6(1),i.hij(" ",i.lcZ(19,24,"FORM.DATE_ERROR")," "),i.xp6(6),i.Q6J("ngModel",f.form.value.date)("ngModelOptions",i.DdM(34,u)),i.xp6(4),i.Q6J("time",null==(U=f.form.get("date"))?null:U.value)("max",720)("min",60)("step",60)("disabled",f.form.value.all_day),i.xp6(1),i.Q6J("ngIf",f.allow_all_day),i.xp6(4),i.pQV(i.lcZ(33,26,"COMMON.FAVOURITES")),i.QtT(32),i.xp6(4),i.pQV(i.lcZ(37,28,"DESKS.SHOW_FAVOURITES")),i.QtT(36),i.xp6(1),i.Q6J("ngModel",null==(X=i.lcZ(39,30,f.options))?null:X.show_fav)("ngModelOptions",i.DdM(35,u)),i.xp6(2),i.Q6J("ngIf",null==(w=i.lcZ(41,32,f.features))?null:w.length),i.xp6(2),i.Q6J("ngIf",f.can_close)}},dependencies:[h.sg,h.O5,D._Y,D.JJ,D.JL,D.On,D.sg,D.u,$.KE,y.oG,B.ey,_.Q,M.B,T.N,g.o,E.gD,B.wG,h.Ov,d.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:100vw}"]})},9921:(V,G,a)=>{a.d(G,{D:()=>E});var t=a(4650),N=a(3426),k=a(4850),c=a(2084),x=a(6895),i=a(1572),v=a(5306),h=a(3238);function D(d,p){1&d&&(t.TgZ(0,"div",22)(1,"app-icon"),t._uU(2,"done"),t.qZA()())}function $(d,p){if(1&d&&t._UZ(0,"img",23),2&d){const r=t.oxw().$implicit;t.Q6J("src",r.images[0],t.LSH)}}function y(d,p){1&d&&t._UZ(0,"img",24)}function B(d,p){if(1&d){const r=t.EpF();t.TgZ(0,"li",10)(1,"button",11),t.NdJ("click",function(){const I=t.CHM(r).$implicit,b=t.oxw(3);return t.KtG(b.selectDesk(I))}),t.TgZ(2,"div",12),t.YNc(3,D,3,0,"div",13),t.YNc(4,$,1,1,"img",14),t.YNc(5,y,1,0,"ng-template",null,15,t.W1O),t.qZA(),t.TgZ(7,"div",16)(8,"span",17),t._uU(9),t.qZA(),t.TgZ(10,"div",18)(11,"app-icon",19),t._uU(12,"place"),t.qZA(),t.TgZ(13,"p",20),t._uU(14),t.qZA()()()(),t.TgZ(15,"button",21),t.NdJ("click",function(){const I=t.CHM(r).$implicit,b=t.oxw(3);return t.KtG(b.toggleFav.emit(I))}),t.TgZ(16,"app-icon"),t._uU(17),t.qZA()()()}if(2&d){const r=p.$implicit,u=t.MAs(6),O=t.oxw(3);t.ekj("!border-blue-400",O.active===r.id),t.xp6(3),t.Q6J("ngIf",O.selected.includes(r.id)),t.xp6(1),t.Q6J("ngIf",null==r.images?null:r.images.length)("ngIfElse",u),t.xp6(5),t.hij(" ",r.name||r.id||"Desk"," "),t.xp6(5),t.hij(" ",(null==r.zone?null:r.zone.display_name)||(null==r.zone?null:r.zone.name)||"<No Level>"," "),t.xp6(1),t.ekj("text-blue-400",O.isFavourite(r.id)),t.xp6(2),t.Oqu(O.isFavourite(r.id)?"favorite":"favorite_border")}}function _(d,p){if(1&d&&(t.TgZ(0,"ul",8),t.YNc(1,B,18,10,"li",9),t.ALo(2,"async"),t.qZA()),2&d){const r=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,r.desks))}}function M(d,p){if(1&d&&(t.ynx(0),t.YNc(1,_,3,3,"ul",7),t.ALo(2,"async"),t.BQk()),2&d){const r=t.oxw(),u=t.MAs(10);let O;t.xp6(1),t.Q6J("ngIf",null==(O=t.lcZ(2,2,r.desks))?null:O.length)("ngIfElse",u)}}function T(d,p){1&d&&(t.TgZ(0,"div",25),t._UZ(1,"mat-spinner",26),t.TgZ(2,"p",27),t._uU(3,"Finding available desks..."),t.qZA()()),2&d&&(t.xp6(1),t.Q6J("diameter",32))}function g(d,p){1&d&&(t.TgZ(0,"div",28)(1,"p",29),t._uU(2," No available desk for selected time and/or filters "),t.qZA()())}class E{constructor(p){this._state=p,this.active="",this.selected="",this.favorites=[],this.onSelect=new t.vpe,this.toggleFav=new t.vpe,this.desks=(0,N.aj)([this._state.options,this._state.available_resources]).pipe((0,k.U)(([{show_fav:r},u])=>u.filter(O=>!r||this.isFavourite(O.id)))),this.loading=this._state.loading}isFavourite(p){return this.favorites.includes(p)}selectDesk(p){this.onSelect.emit(p)}}E.\u0275fac=function(p){return new(p||E)(t.Y36(c.f))},E.\u0275cmp=t.Xpm({type:E,selectors:[["desk-list"]],inputs:{active:"active",selected:"selected",favorites:"favorites"},outputs:{onSelect:"onSelect",toggleFav:"toggleFav"},decls:11,vars:7,consts:function(){let d,p;return d=$localize`:␟80ed5b776a26a78099e230e0e89d96c33ba44e24␟5968132631442328843:Results`,p=$localize`:␟99a2ae2a83b9fba5f9d4547746782447904ccf7b␟1931205204318295377: ${"\ufffd0\ufffd"}:INTERPOLATION: result(s) found `,[[1,"font-bold"],d,["count","",1,"text-sm","opacity-60","mb-4"],p,[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],["class","list-style-none space-y-2",4,"ngIf","ngIfElse"],[1,"list-style-none","space-y-2"],["desk","","class","relative rounded-lg w-full shadow border bg-white dark:bg-neutral-600 border-gray-200 dark:border-neutral-500 overflow-hidden",3,"!border-blue-400",4,"ngFor","ngForOf"],["desk","",1,"relative","rounded-lg","w-full","shadow","border","bg-white","dark:bg-neutral-600","border-gray-200","dark:border-neutral-500","overflow-hidden"],["name","select-desk","matRipple","",1,"w-full","h-full","flex","p-2",3,"click"],[1,"relative","w-20","h-20","rounded-xl","bg-black/20","mr-4","flex","items-center","justify-center"],["class","absolute top-1 left-1 border border-white bg-black/50 rounded-full h-6 w-6 flex items-center justify-center text-white",4,"ngIf"],["class","object-cover h-full",3,"src",4,"ngIf","ngIfElse"],["placeholder",""],[1,"space-y-2","pt-2","flex-1","text-left"],[1,"font-medium"],[1,"flex","items-center","text-sm","space-x-2"],[1,"text-blue-500"],[1,"text-xs"],["icon","","matRipple","","name","toggle-desk-favourite",1,"absolute","top-1","right-1",3,"click"],[1,"absolute","top-1","left-1","border","border-white","bg-black/50","rounded-full","h-6","w-6","flex","items-center","justify-center","text-white"],[1,"object-cover","h-full",3,"src"],["src","assets/icons/desk-placeholder.svg",1,"m-auto"],["loading","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"],[1,"opacity-30"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"]]},template:function(p,r){if(1&p&&(t.TgZ(0,"h3",0),t.SDv(1,1),t.qZA(),t.TgZ(2,"p",2),t.SDv(3,3),t.ALo(4,"async"),t.qZA(),t.YNc(5,M,3,4,"ng-container",4),t.ALo(6,"async"),t.YNc(7,T,4,1,"ng-template",null,5,t.W1O),t.YNc(9,g,3,0,"ng-template",null,6,t.W1O)),2&p){const u=t.MAs(8);let O,I;t.xp6(4),t.pQV((null==(O=t.lcZ(4,3,r.desks))?null:O.length)||0),t.QtT(3),t.xp6(1),t.Q6J("ngIf",!(null!=(I=t.lcZ(6,5,r.loading))&&I.length))("ngIfElse",u)}},dependencies:[x.sg,x.O5,i.Ou,v.o,h.wG,x.Ov],styles:["[_nghost-%COMP%]{width:100%;height:100%;padding:.5rem;background:rgba(0,0,0,.05);overflow-y:auto}"]})},718:(V,G,a)=>{a.d(G,{p:()=>M});var t=a(4650),N=a(9112),k=a(4850),c=a(2084),x=a(6895),i=a(4006),v=a(9549),h=a(3238),D=a(5306),$=a(9136),y=a(4385);function B(T,g){if(1&T&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&T){const E=g.$implicit;t.Q6J("value",E),t.xp6(1),t.hij(" ",E.display_name||E.name," ")}}const _=function(){return{standalone:!0}};class M extends N.cx{get map_url(){return this.level?.map_id||""}constructor(g){super(),this._state=g,this.is_displayed=!1,this.onSelect=new t.vpe,this.desks=this._state.available_resources,this.loading=this._state.loading,this.zoom=1,this.center={x:.5,y:.5},this.setOptions=E=>this._state.setOptions(E),this.levels=this._state.available_resources.pipe((0,k.U)(E=>(0,N.Tw)(E.map(d=>d.zone),"id"))),this.actions=this._state.available_resources.pipe((0,k.U)(E=>E.map(d=>({id:d.map_id||d.id,action:["touchend","mouseup"],callback:()=>this.selectDesk(d)})))),this.features=this._state.available_resources.pipe((0,k.U)(E=>E.map(d=>({location:d.map_id||d.id,content:'<span class="flex h-4 w-4 rounded-full absolute top-1/4 left-1/4 transform -translate-x-1/2 -translate-y-1/2 border-[3px] shadow" >\n                            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-800 opacity-75"></span>\n                            <span class="relative inline-flex rounded-full h-full w-full bg-green-800"></span>\n                        </span>'}))))}ngOnInit(){this.subscription("levels_update",this.levels.subscribe(g=>{g.find(E=>E.id===this.level?.id)||(this.level=g[0])}))}selectDesk(g){this.onSelect.emit(g)}setZoom(g){this.zoom=Math.max(.5,Math.min(10,g))}resetMap(){this.zoom=1,this.center={x:.5,y:.5}}}M.\u0275fac=function(g){return new(g||M)(t.Y36(c.f))},M.\u0275cmp=t.Xpm({type:M,selectors:[["desk-map"]],inputs:{is_displayed:"is_displayed"},outputs:{onSelect:"onSelect"},features:[t.qOj],decls:20,vars:15,consts:[[3,"src","zoom","center","features","actions","zoomChange","centerChange"],[1,"absolute","inset-x-0","top-0","bg-white","p-2","border-b","border-gray-200"],["levels","","appearance","outline",1,"w-full","h-[3.25rem]"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["zoom","",1,"absolute","bottom-2","right-2","rounded-lg","border","border-gray-200","bg-white","flex","flex-col","overflow-hidden"],["zoom-in","","icon","","matRipple","",3,"click"],[1,"border-t","border-gray-200","w-full"],["zoom-out","","icon","","matRipple","",3,"click"],["reset","","icon","","matRipple","",3,"click"],[3,"value"]],template:function(g,E){1&g&&(t.TgZ(0,"i-map",0),t.NdJ("zoomChange",function(p){return E.zoom=p})("centerChange",function(p){return E.center=p}),t.ALo(1,"async"),t.ALo(2,"async"),t.qZA(),t.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"mat-select",3),t.NdJ("ngModelChange",function(p){return E.level=p}),t.YNc(6,B,2,2,"mat-option",4),t.ALo(7,"async"),t.qZA()()(),t.TgZ(8,"div",5)(9,"button",6),t.NdJ("click",function(){return E.setZoom(1.1*E.zoom)}),t.TgZ(10,"app-icon"),t._uU(11,"zoom_in"),t.qZA()(),t._UZ(12,"div",7),t.TgZ(13,"button",8),t.NdJ("click",function(){return E.setZoom(E.zoom*(1/1.1))}),t.TgZ(14,"app-icon"),t._uU(15,"zoom_out"),t.qZA()(),t._UZ(16,"div",7),t.TgZ(17,"button",9),t.NdJ("click",function(){return E.resetMap()}),t.TgZ(18,"app-icon"),t._uU(19,"refresh"),t.qZA()()()),2&g&&(t.Q6J("src",E.map_url)("zoom",E.zoom)("center",E.center)("features",t.lcZ(1,8,E.features))("actions",t.lcZ(2,10,E.actions)),t.xp6(5),t.Q6J("ngModel",E.level)("ngModelOptions",t.DdM(14,_)),t.xp6(1),t.Q6J("ngForOf",t.lcZ(7,12,E.levels)))},dependencies:[x.sg,i.JJ,i.On,v.KE,h.ey,D.o,$.p,y.gD,h.wG,x.Ov],styles:["[_nghost-%COMP%]{position:relative;background:rgba(0,0,0,.05);padding-top:4rem}button[_ngcontent-%COMP%]{border-radius:0}"]})},6485:(V,G,a)=>{a.d(G,{t:()=>E,v:()=>g});var t=a(5938),N=a(9112),k=a(2084),c=a(4650),x=a(6895),i=a(5306),v=a(3238),h=a(5417),D=a(8297),$=a(2075),y=a(9921),B=a(718);function _(d,p){if(1&d){const r=c.EpF();c.TgZ(0,"desk-list",29),c.NdJ("toggleFav",function(O){c.CHM(r);const I=c.oxw();return c.KtG(I.toggleFavourite(O))})("onSelect",function(O){c.CHM(r);const I=c.oxw();return c.KtG(I.displayed=O)}),c.qZA()}if(2&d){const r=c.oxw();c.Q6J("active",null==r.displayed?null:r.displayed.id)("selected",r.selected_ids)("favorites",r.favorites)}}function M(d,p){if(1&d){const r=c.EpF();c.TgZ(0,"button",30),c.NdJ("click",function(){c.CHM(r);const O=c.oxw();return c.KtG(O.displayed=null)}),c.SDv(1,31),c.qZA()}}function T(d,p){if(1&d){const r=c.EpF();c.TgZ(0,"desk-map",32),c.NdJ("onSelect",function(O){c.CHM(r);const I=c.oxw();return c.KtG(I.displayed=O)}),c.qZA()}if(2&d){const r=c.oxw();c.Q6J("is_displayed",!!r.displayed)}}const g="favourite_desks";class E{get selected_ids(){return this.selected.map(p=>p.id).join(",")}get favorites(){return this._settings.get(g)||[]}constructor(p,r,u,O){this._dialog_ref=p,this._settings=r,this._event_form=u,this._data=O,this.selected=[],this.view="list",this.selected=[...O.items||[]],this._event_form.setOptions(O.options)}isSelected(p){return p&&this.selected_ids.includes(p)}setSelected(p,r){const u=this.selected.filter(O=>O.id!==p.id);r&&u.push(p),this.selected=u,!this._data.options.group&&r&&this._dialog_ref.close([p])}toggleFavourite(p){const r=this.favorites;r.includes(p.id)?this._settings.saveUserSetting(g,r.filter(O=>O!==p.id)):this._settings.saveUserSetting(g,[...r,p.id])}}E.\u0275fac=function(p){return new(p||E)(c.Y36(t.so),c.Y36(N.gb),c.Y36(k.f),c.Y36(t.WI))},E.\u0275cmp=c.Xpm({type:E,selectors:[["desk-select-modal"]],decls:39,vars:25,consts:function(){let d,p,r,u,O,I;return d=$localize`:␟4221741642af22ed8e17ee106c326def85e70c61␟1749010714240797250:Find Desk`,p=$localize`:␟30d3439b0e0095fe69503245f3bd7a2e9498be7c␟8443571736703532556: View List `,r=$localize`:␟18843b85d1a4f17fefafd07bc5cde636dca44295␟819716823718458903:Back to form`,u=$localize`:␟f566e50852be3f327b040870cbf63b59ea3b8d8c␟3611851363359647609: ${"\ufffd0\ufffd"}:INTERPOLATION: desk(s) added `,O=$localize`:␟f45c34c7afdabef75762747a20f4113d65eb2312␟6426755559249487826: ${"\ufffd0\ufffd"}:INTERPOLATION: `,I=$localize`:␟ccda1d41ca79703a85a3a598c1d97e040a32b766␟874721418273731876: Back `,[[1,"w-[100vw]","h-[100vh]","sm:relative","sm:w-auto","sm:h-auto","flex","flex-col","bg-white","dark:bg-neutral-700"],[1,"flex","items-center","space-x-4","w-full"],["icon","","mat-dialog-close","",1,"bg-black/20"],d,[1,"hidden","sm:flex","items-center","justify-end","flex-1"],["btn","","matRipple","","name","view-desk-map",1,"rounded-l","rounded-r-none",3,"click"],["btn","","matRipple","","name","view-desk-list",1,"rounded-r","rounded-l-none",3,"click"],[1,"flex-1","flex","items-center","divide-x","divide-gray-200","dark:divide-neutral-500","min-h-[65vh]","h-[65vh]","sm:max-h-[65vh]","sm:max-w-[95vw]","w-full","overflow-hidden"],[1,"h-full","hidden","sm:flex","max-w-[20rem]","sm:h-[65vh]","sm:max-h-full"],[1,"flex","flex-col","items-center","flex-1","w-1/2","h-full","sm:h-[65vh]"],[1,"w-full","border-b","border-gray-200","dark:border-neutral-500",3,"view","viewChange"],["class","flex-1 h-1/2 bg-black/5 dark:bg-white/10",3,"active","selected","favorites","toggleFav","onSelect",4,"ngIf","ngIfElse"],[1,"h-full","w-full","sm:h-[65vh]","absolute","sm:relative","sm:flex","sm:max-w-[20rem]","z-20","bg-white","dark:bg-neutral-600","block",3,"desk","active","fav","activeChange","toggleFav","close"],[1,"flex","sm:hidden","flex-col-reverse","items-center","justify-end","px-2","pt-2","pb-[5.5rem]","border-t","border-gray-200","dark:border-neutral-500","w-full"],["btn","","matRipple","","name","desk-return","class","inverse sm:hidden w-full",3,"click",4,"ngIf"],["btn","","matRipple","","name","save-desks",1,"w-full","sm:w-32","sm:mb-0",3,"mat-dialog-close"],p,[1,"hidden","sm:flex","items-center","justify-between","p-2","border-t","border-gray-200","dark:border-neutral-500","w-full"],["btn","","matRipple","","name","desk-return",1,"clear","text-primary",3,"mat-dialog-close"],[1,"flex","items-center"],[1,"text-xl"],[1,"mr-1","underline"],r,[1,"opacity-60","text-sm"],u,["btn","","matRipple","","name","toggle-desk",3,"disabled","click"],[1,"mr-1"],O,["map_view",""],[1,"flex-1","h-1/2","bg-black/5","dark:bg-white/10",3,"active","selected","favorites","toggleFav","onSelect"],["btn","","matRipple","","name","desk-return",1,"inverse","sm:hidden","w-full",3,"click"],I,[1,"flex-1","h-1/2","w-full",3,"is_displayed","onSelect"]]},template:function(p,r){if(1&p&&(c.TgZ(0,"div",0)(1,"header",1)(2,"button",2)(3,"app-icon"),c._uU(4,"close"),c.qZA()(),c.TgZ(5,"h3"),c.SDv(6,3),c.qZA(),c.TgZ(7,"div",4)(8,"button",5),c.NdJ("click",function(){return r.view="map"}),c._uU(9," Map "),c.qZA(),c.TgZ(10,"button",6),c.NdJ("click",function(){return r.view="list"}),c._uU(11," List "),c.qZA()()(),c.TgZ(12,"main",7),c._UZ(13,"desk-filters",8),c.TgZ(14,"div",9)(15,"desk-filters-display",10),c.NdJ("viewChange",function(O){return r.view=O}),c.qZA(),c.YNc(16,_,1,3,"desk-list",11),c.qZA(),c.TgZ(17,"desk-details",12),c.NdJ("activeChange",function(O){return r.setSelected(r.displayed,O)})("toggleFav",function(){return r.toggleFavourite(r.displayed)})("close",function(){return r.displayed=null}),c.qZA()(),c.TgZ(18,"footer",13),c.YNc(19,M,2,0,"button",14),c.TgZ(20,"button",15),c.SDv(21,16),c.qZA()(),c.TgZ(22,"footer",17)(23,"button",18)(24,"div",19)(25,"app-icon",20),c._uU(26,"arrow_back"),c.qZA(),c.TgZ(27,"div",21),c.SDv(28,22),c.qZA()()(),c.TgZ(29,"p",23),c.SDv(30,24),c.qZA(),c.TgZ(31,"button",25),c.NdJ("click",function(){return r.setSelected(r.displayed,!r.isSelected(null==r.displayed?null:r.displayed.id))}),c.TgZ(32,"div",19)(33,"app-icon",20),c._uU(34),c.qZA(),c.TgZ(35,"div",26),c.SDv(36,27),c.qZA()()()()(),c.YNc(37,T,1,1,"ng-template",null,28,c.W1O)),2&p){const u=c.MAs(38);c.xp6(8),c.ekj("inverse","map"!==r.view),c.xp6(2),c.ekj("inverse","list"!==r.view),c.xp6(5),c.Q6J("view",r.view),c.xp6(1),c.Q6J("ngIf","list"===r.view)("ngIfElse",u),c.xp6(1),c.ekj("hidden",!r.displayed)("inset-0",r.displayed),c.Q6J("desk",r.displayed)("active",r.selected_ids.includes(null==r.displayed?null:r.displayed.id))("fav",r.displayed&&r.favorites.includes(null==r.displayed?null:r.displayed.id)),c.xp6(2),c.Q6J("ngIf",r.displayed),c.xp6(1),c.ekj("mb-2",r.displayed),c.Q6J("mat-dialog-close",r.selected),c.xp6(3),c.Q6J("mat-dialog-close",r.selected),c.xp6(7),c.pQV(r.selected.length),c.QtT(30),c.xp6(1),c.ekj("inverse",r.isSelected(null==r.displayed?null:r.displayed.id)),c.Q6J("disabled",!r.displayed),c.xp6(3),c.Oqu(r.isSelected(null==r.displayed?null:r.displayed.id)?"remove":"add"),c.xp6(2),c.pQV(r.isSelected(null==r.displayed?null:r.displayed.id)?"Remove from Booking":"Add to booking"),c.QtT(36)}},dependencies:[x.O5,t.ZT,i.o,v.wG,h.v,D.o,$.x,y.D,B.p],encapsulation:2})}}]);