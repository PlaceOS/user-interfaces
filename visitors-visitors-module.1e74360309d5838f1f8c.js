(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"2sop":function(e,t,n){"use strict";n.r(t),n.d(t,"VisitorsModule",(function(){return ee}));var i=n("2kYt"),s=n("nIj0"),o=n("sEIs"),l=n("oRDy"),c=n("EM62"),a=n("D57K"),r=n("20lr"),d=n("eZII"),u=n("zYp8"),h=n("9MvL"),b=n("JS2V"),v=n("KuCG"),g=n("C05f"),f=n("HM3f"),m=n("mWib"),p=n("TLy2"),_=n("YtkY"),w=n("wqq/");let k=(()=>{class e extends r.c{constructor(e){super(),this._events=e,this._filters=new g.a({}),this._search=new g.a(""),this._loading=new g.a(!1),this.loading=this._loading.asObservable(),this.filters=this._filters.asObservable(),this.events=Object(f.b)([this._filters]).pipe(Object(m.a)(500),Object(p.a)(e=>{this._loading.next(!0);const[t]=e,n=t.date?new Date(t.date):new Date,i=(t.show_week?Object(u.a)(n):Object(h.a)(n)).valueOf(),s=(t.show_week?Object(b.a)(n):Object(v.a)(n)).valueOf();return this._events.query({period_start:Math.floor(i/1e3),period_end:Math.floor(s/1e3),zone_ids:(t.zones||[]).join(",")})}),Object(_.a)(e=>(this._loading.next(!1),this._filters.getValue().all_bookings?e:e.filter(e=>e.has_visitors&&e.attendees.length>1))),Object(w.a)()),this.filtered_events=Object(f.b)([this._search,this.events]).pipe(Object(_.a)(e=>{const[t,n]=e,i=t.toLowerCase();return n.filter(e=>e.attendees.find(e=>e.name.toLowerCase().includes(i)||e.email.toLowerCase().includes(i)))}))}get search(){return this._search.getValue()}setFilters(e){this._filters.next(Object.assign(Object.assign({},this._filters.getValue()),e))}setSearchString(e){this._search.next(e)}startPolling(e=3e4){this.interval("poll",()=>this.setFilters(this._filters.getValue()),e)}stopPolling(){this.clearInterval("poll")}checkGuestIn(e,t){var n,i;return Object(a.a)(this,void 0,void 0,(function*(){const s=yield this._events.checkInGuest(e.id,t.id,{system_id:(null===(n=e.system)||void 0===n?void 0:n.id)||(null===(i=e.resources[0])||void 0===i?void 0:i.id),state:!0}).catch(n=>{throw Object(r.l)(`Error checking in ${t.name} for ${e.organiser.name}'s meeting`),n});Object(r.n)(`Successfully checked in ${t.name} for ${e.organiser.name}'s meeting`);const o=Object(r.x)([s,...e.attendees],"email");return o.sort((e,t)=>e.organizer?-1:e.email.localeCompare(t.email)),new d.a(Object.assign(Object.assign({},e),{attendees:o}))}))}checkGuestOut(e,t){var n,i;return Object(a.a)(this,void 0,void 0,(function*(){const s=yield this._events.checkInGuest(e.id,t.id,{system_id:(null===(n=e.system)||void 0===n?void 0:n.id)||(null===(i=e.resources[0])||void 0===i?void 0:i.id),state:!1}).catch(n=>{throw Object(r.l)(`Error checking out ${t.name} from ${e.organiser.name}'s meeting`),n});Object(r.n)(`Successfully checked out ${t.name} from ${e.organiser.name}'s meeting`);const o=Object(r.x)([s,...e.attendees],"email");return o.sort((e,t)=>e.organizer?-1:e.email.localeCompare(t.email)),new d.a(Object.assign(Object.assign({},e),{attendees:o}))}))}checkAllGuestsIn(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=e.attendees.filter(e=>e.is_external&&!e.checked_in);if(t.length<=0)throw new Error("No Guests to checkin");const n=yield Promise.all(t.map(t=>{var n,i;return this._events.checkInGuest(e.id,t.id,{system_id:(null===(n=e.system)||void 0===n?void 0:n.id)||(null===(i=e.resources[0])||void 0===i?void 0:i.id),state:!0})})).catch(t=>{throw Object(r.l)(`Error checking in all guests for ${e.organiser.name}'s meeting`),t});Object(r.n)(`Successfully checked in all guests for ${e.organiser.name}'s meeting`);const i=Object(r.x)([...n,...e.attendees],"email");return i.sort((e,t)=>e.organizer?-1:e.email.localeCompare(t.email)),new d.a(Object.assign(Object.assign({},e),{attendees:i}))}))}checkAllGuestsOut(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=e.attendees.filter(e=>e.is_external&&e.checked_in&&!e.organizer);if(t.length<=0)throw new Error("No Guests to checkout");const n=yield Promise.all(t.map(t=>{var n,i;return this._events.checkInGuest(e.id,t.id,{system_id:(null===(n=e.system)||void 0===n?void 0:n.id)||(null===(i=e.resources[0])||void 0===i?void 0:i.id),state:!1})})).catch(t=>{throw Object(r.l)(`Error checking out all guests from ${e.organiser.name}'s meeting`),t});Object(r.n)(`Successfully checked out all guests from ${e.organiser.name}'s meeting`);const i=Object(r.x)([...n,...e.attendees],"email");return i.sort((e,t)=>e.organizer?-1:e.email.localeCompare(t.email)),new d.a(Object.assign(Object.assign({},e),{attendees:i}))}))}}return e.\u0275fac=function(t){return new(t||e)(c.cc(d.b))},e.\u0275prov=c.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var y=n("UfDH"),O=n("jOdJ"),j=n("dJst"),V=n("29Wa"),x=n("R7+U"),C=n("k8N0"),U=n("wobF"),M=n("wrRZ"),D=n("mFH5");function P(e,t){if(1&e&&(c.Vb(0,"mat-option",8),c.Lc(1),c.Ub()),2&e){const e=t.$implicit;c.pc("value",e.id),c.Db(1),c.Nc(" ",e.display_name||e.name," ")}}let I=(()=>{class e extends r.c{constructor(e,t,n,i){super(),this._state=e,this._org=t,this._route=n,this._router=i,this.zones=[],this.levels=this._org.active_levels,this.filters=this._state.filters,this.setDate=e=>this._state.setFilters({date:e}),this.setFilters=e=>this._state.setFilters(e),this.setSearch=e=>this._state.setSearchString(e),this.updateZones=e=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_ids:e.join(",")}}),this._state.setFilters({zones:e})}}ngOnInit(){return Object(a.a)(this,void 0,void 0,(function*(){yield this._org.initialised.pipe(Object(O.a)(e=>e)).toPromise(),this.subscription("route.query",this._route.queryParamMap.subscribe(e=>{if(e.has("zone_ids")){const t=e.get("zone_ids").split(",");if(t.length){const e=this._org.levelWithID(t);if(!e)return;this._org.building=this._org.buildings.find(t=>t.id===e.parent_id),this.zones=t}}})),this.subscription("levels",this._org.active_levels.subscribe(e=>{this.zones=this.zones.filter(t=>e.find(e=>e.id===t)),!this.zones.length&&e.length&&this.zones.push(e[0].id),this.updateZones(this.zones)})),this.setSearch("")}))}}return e.\u0275fac=function(t){return new(t||e)(c.Pb(k),c.Pb(j.c),c.Pb(o.a),c.Pb(o.d))},e.\u0275cmp=c.Jb({type:e,selectors:[["visitors-topbar"]],features:[c.Ab],decls:15,vars:10,consts:[["appearance","outline"],["multiple","","placeholder","All Levels",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"m-2",3,"ngModel","ngModelChange"],[1,"text-xs"],[1,"flex-1","w-2"],[1,"mr-2",3,"modelChange"],[3,"dateChange"],[3,"value"]],template:function(e,t){if(1&e&&(c.Vb(0,"mat-form-field",0),c.Vb(1,"mat-select",1),c.fc("ngModelChange",(function(e){return t.zones=e}))("ngModelChange",(function(e){return t.updateZones(e)})),c.Jc(2,P,2,2,"mat-option",2),c.kc(3,"async"),c.Ub(),c.Ub(),c.Vb(4,"mat-slide-toggle",3),c.fc("ngModelChange",(function(e){return t.setFilters({all_bookings:e})})),c.kc(5,"async"),c.Vb(6,"div",4),c.Lc(7,"All Bookings"),c.Ub(),c.Ub(),c.Vb(8,"mat-slide-toggle",3),c.fc("ngModelChange",(function(e){return t.setFilters({show_week:e})})),c.kc(9,"async"),c.Vb(10,"div",4),c.Lc(11,"Show Week"),c.Ub(),c.Ub(),c.Qb(12,"div",5),c.Vb(13,"searchbar",6),c.fc("modelChange",(function(e){return t.setSearch(e)})),c.Ub(),c.Vb(14,"date-options",7),c.fc("dateChange",(function(e){return t.setDate(e)})),c.Ub()),2&e){let e=null,n=null;c.Db(1),c.pc("ngModel",t.zones),c.Db(1),c.pc("ngForOf",c.lc(3,4,t.levels)),c.Db(2),c.pc("ngModel",null==(e=c.lc(5,6,t.filters))?null:e.all_bookings),c.Db(4),c.pc("ngModel",null==(n=c.lc(9,8,t.filters))?null:n.show_week)}},directives:[V.c,x.a,s.l,s.o,i.m,C.a,U.a,M.a,D.j],pipes:[i.b],styles:["[_nghost-%COMP%] {\n                display: flex;\n                align-items: center;\n                background-color: #fff;\n                height: 5em;\n                padding: 0 1em;\n                border-bottom: 1px solid #ccc;\n            }\n\n            [_nghost-%COMP%]    > *[_ngcontent-%COMP%]    + *[_ngcontent-%COMP%] {\n                margin-left: 0.5rem;\n            }\n\n            mat-form-field[_ngcontent-%COMP%] {\n                height: 3.25em;\n                width: 8em;\n            }"]}),e})();var L=n("ZnXB"),z=n("Y2X+"),G=n("PBFl"),J=n("ukpX");function F(e,t){1&e&&(c.Vb(0,"i",13),c.Lc(1,"face"),c.Ub())}function T(e,t){if(1&e&&(c.Tb(0),c.Jc(1,F,2,0,"i",12),c.Sb()),2&e){const e=c.jc(),t=c.vc(3);c.Db(1),c.pc("ngIf",!(null!=e.visitor&&e.visitor.checked_in))("ngIfElse",t)}}function E(e,t){1&e&&(c.Vb(0,"i",14),c.Lc(1,"done"),c.Ub())}function S(e,t){1&e&&(c.Vb(0,"i",15),c.Lc(1,"assignment_ind"),c.Ub())}let A=(()=>{class e{constructor(e,t){this._state=e,this._events=t,this.eventChange=new c.o,this.checkin=()=>Object(a.a)(this,void 0,void 0,(function*(){this.loading="checkin",this.event=yield this._state.checkGuestIn(this.event,this.visitor).catch(e=>this.event),this.eventChange.emit(this.event),this.loading=""})),this.toggleRemote=()=>Object(a.a)(this,void 0,void 0,(function*(){var e;this.loading="remote";const t=this.event.remote.filter(e=>e!==this.visitor.email);this.remote||t.push(this.visitor.email);const n=new d.a(Object.assign(Object.assign({},this.event.toJSON()),{remote:t})).toJSON();console.log("Remote:",t,n),this.event=yield this._events.update(this.event.id,n,{system_id:null===(e=this.event.system)||void 0===e?void 0:e.id},"patch").catch(e=>(Object(r.l)("Error setting visitor status. Error: "+(e.statusText||e.message||e)),this.event)),this.eventChange.emit(this.event),this.loading=""})),this.checkout=()=>Object(a.a)(this,void 0,void 0,(function*(){this.loading="checkout",this.event=yield this._state.checkGuestOut(this.event,this.visitor).catch(e=>this.event),this.eventChange.emit(this.event),this.loading=""}))}get remote(){var e;return!!(null===(e=this.event)||void 0===e?void 0:e.remote.find(e=>{var t;return e===(null===(t=this.visitor)||void 0===t?void 0:t.email)}))}}return e.\u0275fac=function(t){return new(t||e)(c.Pb(k),c.Pb(d.b))},e.\u0275cmp=c.Jb({type:e,selectors:[["visitor-details"]],inputs:{event:"event",visitor:"visitor"},outputs:{eventChange:"eventChange"},decls:16,vars:17,consts:[[1,"w-12","text-lg","flex","justify-center"],[4,"ngIf","ngIfElse"],["checkin_state",""],["host_state",""],["flex","",1,"p-2","flex-1"],[1,"w-40","p-2","flex","items-center","justify-end"],["className","material-icons",3,"matTooltip","loading","content","click"],["matTooltip","Checkin Guest","className","material-icons","content","event_available",3,"loading","state","click"],["matTooltip","Checkout Guest","className","material-icons","content","event_busy",3,"loading","click"],["mat-icon-button","",3,"href","matTooltip"],["className","material-icons"],[1,"w-16","p-2"],["class","p-2 rounded-full material-icons border-2 border-dotted border-gray-600",4,"ngIf","ngIfElse"],[1,"p-2","rounded-full","material-icons","border-2","border-dotted","border-gray-600"],[1,"p-2","rounded-full","material-icons","bg-green-600","border-2","border-green-600","text-white"],[1,"p-2","rounded-full","material-icons","bg-blue-600","border-2","border-blue-600","text-white"]],template:function(e,t){if(1&e&&(c.Vb(0,"div",0),c.Jc(1,T,2,2,"ng-container",1),c.Jc(2,E,2,0,"ng-template",null,2,c.Kc),c.Jc(4,S,2,0,"ng-template",null,3,c.Kc),c.Ub(),c.Vb(6,"div",4),c.Lc(7),c.Ub(),c.Vb(8,"div",5),c.Vb(9,"action-icon",6),c.fc("click",(function(){return t.toggleRemote()})),c.Ub(),c.Vb(10,"action-icon",7),c.fc("click",(function(){return t.checkin()})),c.Ub(),c.Vb(11,"action-icon",8),c.fc("click",(function(){return t.checkout()})),c.Ub(),c.Vb(12,"a",9),c.Vb(13,"app-icon",10),c.Lc(14,"email"),c.Ub(),c.Ub(),c.Ub(),c.Qb(15,"div",11)),2&e){const e=c.vc(5);c.Db(1),c.pc("ngIf",!t.visitor.organizer)("ngIfElse",e),c.Db(6),c.Mc((null==t.visitor?null:t.visitor.name)||(null==t.visitor?null:t.visitor.email)),c.Db(2),c.Hb("invisible",!(null!=t.visitor&&t.visitor.is_external)||(null==t.visitor?null:t.visitor.organizer)),c.pc("matTooltip",t.remote?"Set as In-Person Visitor":"Set as Remote Visitior")("loading","remote"===t.loading)("content",t.remote?"tap_and_play":"business"),c.Db(1),c.Hb("invisible",!(null!=t.visitor&&t.visitor.is_external)||(null==t.visitor?null:t.visitor.organizer)),c.pc("loading","checkin"===t.loading)("state",null!=t.visitor&&t.visitor.checked_in?"success":""),c.Db(1),c.Hb("invisible",!(null!=t.visitor&&t.visitor.is_external)||(null==t.visitor?null:t.visitor.organizer)),c.pc("loading","checkout"===t.loading),c.Db(1),c.pc("href","mailto:"+(null==t.visitor?null:t.visitor.email),c.Ac)("matTooltip",null!=t.visitor&&t.visitor.organizer?"Email Host":"Email Guest")}},directives:[i.n,L.a,z.a,G.a,J.a],styles:["[_nghost-%COMP%] {\n                display: flex;\n                align-items: center;\n                width: 100%;\n                padding: 0 0.5rem;\n            }\n\n            [_nghost-%COMP%]    > div[_ngcontent-%COMP%] {\n                display: flex;\n                align-items: center;\n                height: 100%;\n                border-bottom: 1px solid #ccc;\n                height: 3.5rem;\n            }\n\n            [_nghost-%COMP%]    > div[_ngcontent-%COMP%]:first-child {\n                border: none;\n            }\n\n            .invisible[_ngcontent-%COMP%] {\n                opacity: 0;\n                pointer-events: none;\n            }"]}),e})();function N(e,t){1&e&&(c.Vb(0,"i",17),c.Lc(1,"event"),c.Ub())}function $(e,t){1&e&&(c.Vb(0,"i",17),c.Lc(1,"close"),c.Ub())}function Q(e,t){1&e&&(c.Vb(0,"i",17),c.Lc(1,"done"),c.Ub())}function H(e,t){if(1&e){const e=c.Wb();c.Vb(0,"div",18),c.Qb(1,"div",19),c.Vb(2,"visitor-details",20),c.fc("eventChange",(function(t){return c.yc(e),c.jc().event=t})),c.Ub(),c.Ub()}if(2&e){const e=t.$implicit,n=c.jc();c.Db(2),c.pc("visitor",e)("event",n.event),c.Eb("disabled",!n.matches[e.email])}}let q=(()=>{class e extends r.c{constructor(e){super(),this._state=e,this.matches={},this.filters=this._state.filters,this.checkinGuests=()=>Object(a.a)(this,void 0,void 0,(function*(){this.loading="checkin",this.event=yield this._state.checkAllGuestsIn(this.event).catch(e=>this.event),this.loading=""})),this.checkoutGuests=()=>Object(a.a)(this,void 0,void 0,(function*(){this.loading="checkout",this.event=yield this._state.checkAllGuestsOut(this.event).catch(e=>this.event),this.loading=""}))}get guestCount(){var e;return(null===(e=this.event)||void 0===e?void 0:e.attendees.reduce((e,t)=>e+(t.is_external&&!t.organizer?1:0),0))||0}get has_search(){return this._state.search}ngOnInit(){this.subscription("events",this._state.filtered_events.subscribe(()=>this.updateMatches()))}updateMatches(){this.matches={};const e=(this._state.search||"").toLowerCase();for(const t of this.event.attendees)this.matches[t.email]=!e||t.email.toLowerCase().includes(e)||t.name.toLowerCase().includes(e)}}return e.\u0275fac=function(t){return new(t||e)(c.Pb(k))},e.\u0275cmp=c.Jb({type:e,selectors:[["visitor-event"]],inputs:{event:"event"},features:[c.Ab],decls:28,vars:25,consts:[[1,"flex","items-center","px-2","bg-gray-100"],[1,"w-12","text-lg","flex","justify-center"],["class","p-2 rounded-full material-icons bg-gray-400",4,"ngIf"],[1,"w-24","p-2"],[1,"w-48","p-2"],["flex","",1,"p-2","flex-1"],[1,"w-64","p-2","truncate"],[1,"w-32","p-2","flex","items-center","justify-end"],["matTooltip","Checkin All Guests","className","material-icons","content","event_available",3,"loading","disabled","click"],["matTooltip","Checkout All Guests","className","material-icons","content","event_busy",3,"loading","disabled","click"],["mat-icon-button","","matTooltip","Email Host",3,"href"],["className","material-icons"],[1,"w-16","p-2"],["mat-icon-button","",3,"disabled","matTooltip","click"],["attendees","",1,"w-full","overflow-hidden","relative","border-b","border-gray-300"],["bar","",1,"absolute","top-0","bg-gray-400","z-10"],["visitor","","class","relative w-full pl-12 bg-gray-200",4,"ngFor","ngForOf"],[1,"p-2","rounded-full","material-icons","bg-gray-400"],["visitor","",1,"relative","w-full","pl-12","bg-gray-200"],["l-bar","",1,"absolute","bg-gray-400"],[3,"visitor","event","eventChange"]],template:function(e,t){if(1&e&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Jc(2,N,2,0,"i",2),c.Jc(3,$,2,0,"i",2),c.Jc(4,Q,2,0,"i",2),c.Ub(),c.Vb(5,"div",3),c.Lc(6),c.kc(7,"date"),c.kc(8,"async"),c.Ub(),c.Vb(9,"div",4),c.Lc(10),c.Ub(),c.Vb(11,"div",5),c.Lc(12),c.Ub(),c.Vb(13,"div",6),c.Lc(14),c.Ub(),c.Vb(15,"div",7),c.Vb(16,"action-icon",8),c.fc("click",(function(){return t.checkinGuests()})),c.Ub(),c.Vb(17,"action-icon",9),c.fc("click",(function(){return t.checkoutGuests()})),c.Ub(),c.Vb(18,"a",10),c.Vb(19,"app-icon",11),c.Lc(20,"email"),c.Ub(),c.Ub(),c.Ub(),c.Vb(21,"div",12),c.Vb(22,"button",13),c.fc("click",(function(){return t.show_attendees=!t.show_attendees})),c.Vb(23,"app-icon",11),c.Lc(24),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(25,"div",14),c.Qb(26,"div",15),c.Jc(27,H,3,3,"div",16),c.Ub()),2&e){let e=null;c.Db(2),c.pc("ngIf","cancelled"!==(null==t.event?null:t.event.status)&&"done"!==(null==t.event?null:t.event.state)),c.Db(1),c.pc("ngIf","cancelled"===(null==t.event?null:t.event.status)),c.Db(1),c.pc("ngIf","done"===(null==t.event?null:t.event.state)&&"cancelled"!==(null==t.event?null:t.event.status)),c.Db(2),c.Mc(c.mc(7,20,null==t.event?null:t.event.date,null!=(e=c.lc(8,23,t.filters))&&e.show_week?"MMM d, h:mm a":"shortTime")),c.Db(4),c.Nc(" ",(null==t.event||null==t.event.organiser?null:t.event.organiser.name)||(null==t.event||null==t.event.organiser?null:t.event.organiser.email)," "),c.Db(2),c.Mc(null==t.event?null:t.event.title),c.Db(2),c.Mc(null==t.event?null:t.event.location),c.Db(2),c.pc("loading","checkin"===t.loading)("disabled",t.guestCount<=0),c.Db(1),c.pc("loading","checkout"===t.loading)("disabled",t.guestCount<=0),c.Db(1),c.pc("href","mailto:"+(null==t.event||null==t.event.organiser?null:t.event.organiser.email),c.Ac),c.Db(4),c.pc("disabled",!(null!=t.event&&null!=t.event.attendees&&t.event.attendees.length))("matTooltip",t.show_attendees||t.has_search?"Hide Attendees":"Show Attendees"),c.Db(2),c.Mc(t.show_attendees?"keyboard_arrow_down":"keyboard_arrow_right"),c.Db(1),c.Gc("height",t.show_attendees||t.has_search?3.5*t.event.attendees.length+"rem":"0rem"),c.Db(1),c.Gc("height","calc("+(3.5*(t.event.attendees.length-1)+1.75)+"rem + 1px)"),c.Db(1),c.pc("ngForOf",t.event.attendees)}},directives:[i.n,L.a,z.a,G.a,J.a,G.b,i.m,A],pipes:[i.f,i.b],styles:['[_nghost-%COMP%] {\n                width: 100%;\n            }\n\n            visitor-details[_ngcontent-%COMP%] {\n                transition: opacity 200ms;\n            }\n\n            [attendees][_ngcontent-%COMP%] {\n                transition: height 200ms;\n            }\n\n            [visitor][_ngcontent-%COMP%] {\n                height: 3.5rem;\n            }\n\n            [bar][_ngcontent-%COMP%] {\n                width: 2px;\n                left: calc(2rem - 1px);\n            }\n\n            [l-bar][_ngcontent-%COMP%] {\n                height: 2px;\n                left: 2rem;\n                top: calc(50% - 1px);\n                width: 1rem;\n            }\n\n            [disabled="true"][_ngcontent-%COMP%] {\n                opacity: 0.35;\n            }']}),e})();function B(e,t){1&e&&c.Qb(0,"visitor-event",13),2&e&&c.pc("event",t.$implicit)}function R(e,t){if(1&e&&(c.Tb(0),c.Jc(1,B,1,1,"visitor-event",12),c.kc(2,"async"),c.Sb()),2&e){const e=c.jc();c.Db(1),c.pc("ngForOf",c.lc(2,2,e.bookings))("ngForTrackBy",e.trackByFn)}}function Z(e,t){1&e&&(c.Vb(0,"div",14),c.Vb(1,"p",15),c.Lc(2," There are no visitors for the currently selected date. "),c.Ub(),c.Ub())}let K=(()=>{class e{constructor(e){this._state=e,this.bookings=this._state.filtered_events}trackByFn(e,t){return t?t.id:void 0}}return e.\u0275fac=function(t){return new(t||e)(c.Pb(k))},e.\u0275cmp=c.Jb({type:e,selectors:[["visitor-listings"]],decls:19,vars:4,consts:[[1,"w-full","flex-1","text-sm"],[1,"w-full","flex","items-center","bg-white","border-b","border-gray-500","p-2","font-medium"],[1,"w-12","p-2"],[1,"w-24","p-2"],[1,"w-48","p-2"],["flex","",1,"p-2","flex-1"],[1,"w-64","p-2"],[1,"w-32","p-2"],[1,"w-16","p-2"],[1,"w-full","flex-1","overflow-auto"],[4,"ngIf","ngIfElse"],["empty_state",""],[3,"event",4,"ngFor","ngForOf","ngForTrackBy"],[3,"event"],[1,"h-full","w-full","flex","items-center","justify-center"],[1,"p-8"]],template:function(e,t){if(1&e&&(c.Vb(0,"div",0),c.Vb(1,"div",1),c.Qb(2,"div",2),c.Vb(3,"div",3),c.Lc(4,"Time"),c.Ub(),c.Vb(5,"div",4),c.Lc(6,"Host"),c.Ub(),c.Vb(7,"div",5),c.Lc(8,"Title"),c.Ub(),c.Vb(9,"div",6),c.Lc(10,"Location"),c.Ub(),c.Vb(11,"div",7),c.Lc(12,"Actions"),c.Ub(),c.Qb(13,"div",8),c.Ub(),c.Vb(14,"div",9),c.Jc(15,R,3,4,"ng-container",10),c.kc(16,"async"),c.Ub(),c.Ub(),c.Jc(17,Z,3,0,"ng-template",null,11,c.Kc)),2&e){const e=c.vc(18);let n=null;c.Db(15),c.pc("ngIf",null==(n=c.lc(16,2,t.bookings))?null:n.length)("ngIfElse",e)}},directives:[i.n,i.m,q],pipes:[i.b],styles:[""]}),e})();var W=n("66mq");function Y(e,t){1&e&&c.Qb(0,"mat-progress-bar",4)}const X=[{path:"",component:(()=>{class e{constructor(e){this._state=e,this.loading=this._state.loading}ngOnInit(){this._state.startPolling()}ngOnDestroy(){this._state.stopPolling()}}return e.\u0275fac=function(t){return new(t||e)(c.Pb(k))},e.\u0275cmp=c.Jb({type:e,selectors:[["app-visitors"]],decls:6,vars:3,consts:[[1,"relative","overflow-hidden","flex-1","flex","flex-col"],[1,"w-full"],[1,"w-full","flex-1","h-0"],["class","w-full","mode","indeterminate",4,"ngIf"],["mode","indeterminate",1,"w-full"]],template:function(e,t){1&e&&(c.Qb(0,"sidebar"),c.Vb(1,"main",0),c.Qb(2,"visitors-topbar",1),c.Qb(3,"visitor-listings",2),c.Jc(4,Y,1,0,"mat-progress-bar",3),c.kc(5,"async"),c.Ub()),2&e&&(c.Db(4),c.pc("ngIf",c.lc(5,1,t.loading)))},directives:[y.a,I,K,i.n,W.a],pipes:[i.b],styles:["[_nghost-%COMP%] {\n                display: flex;\n                height: 100%;\n                width: 100%;\n            }"]}),e})()}];let ee=(()=>{class e{}return e.\u0275mod=c.Nb({type:e}),e.\u0275inj=c.Mb({factory:function(t){return new(t||e)},imports:[[i.c,s.h,l.a,o.g.forChild(X)]]}),e})()}}]);
//# sourceMappingURL=visitors-visitors-module.1e74360309d5838f1f8c.js.map