{"version":3,"sources":["./src/app/control/space-list/space-list.component.ts","./src/app/control/space-list/space-list.component.html","./src/app/control/space-list/item/item.component.ts","./src/app/control/space-list/item/item.component.html","./src/app/control/control.module.ts","./src/app/control/control.component.ts","./src/app/control/control.component.html"],"names":[],"mappings":"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","file":"control-control-module.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { first } from 'rxjs/operators';\n\nimport { BaseClass } from '@user-interfaces/common';\nimport { OrganisationService } from '@user-interfaces/organisation';\nimport { Space, SpacesService } from '@user-interfaces/spaces';\n\n@Component({\n    selector: 'a-control-space-list',\n    templateUrl: './space-list.component.html',\n    styleUrls: ['./space-list.component.scss']\n})\nexport class ControlSpaceListComponent extends BaseClass implements OnInit {\n    /** List of controllable spaces */\n    public space_list: Space[] = [];\n    /** Filter string */\n    public search_str: string;\n    /** Whether space list is being filtered */\n    public loading: boolean;\n\n    constructor(private _spaces: SpacesService, private _org: OrganisationService) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this._spaces.initialised.pipe(first(_ => _)).subscribe(() => {\n            this.space_list = this._spaces.filter(space => !!space.support_url);\n            this.space_list.sort((a, b) => {\n                const bld_a = this._org.buildings.find(\n                    building => building.id === a.level.parent_id\n                );\n                const space_a_name = (a.name || '').toLowerCase();\n                const level_a_name = ((a.level ? a.level.name : '') || '').toLowerCase();\n                const bld_a_name = ((bld_a ? bld_a.name : '') || '').toLowerCase();\n                const bld_b = this._org.buildings.find(\n                    building => building.id === b.level.parent_id\n                );\n                const space_b_name = (b.name || '').toLowerCase();\n                const level_b_name = ((b.level ? b.level.name : '') || '').toLowerCase();\n                const bld_b_name = ((bld_b ? bld_b.name : '') || '').toLowerCase();\n                return (\n                    bld_a_name.localeCompare(bld_b_name) ||\n                    level_a_name.localeCompare(level_b_name) ||\n                    space_a_name.localeCompare(space_b_name)\n                );\n            });\n        });\n    }\n\n    /** List of spaces filtered using the search string */\n    public get filtered_list(): Space[] {\n        const search = (this.search_str || '').toLowerCase();\n        return (this.space_list || []).filter(space => {\n            const bld = this._org.buildings.find(\n                building => building.id === space.level.parent_id\n            );\n            const space_name = (space.name || '').toLowerCase();\n            const level_name = ((space.level ? space.level.name : '') || '').toLowerCase();\n            const bld_name = ((bld ? bld.name : '') || '').toLowerCase();\n            return (\n                space_name.indexOf(search) >= 0 ||\n                (level_name && level_name.indexOf(search) >= 0) ||\n                (bld_name && bld_name.indexOf(search) >= 0)\n            );\n        });\n    }\n}\n","<div class=\"control-list\">\n    <div class=\"filter\">\n        <a-searchbar [(value)]=\"search_str\" [loading]=\"loading\" [autofocus]=\"true\"></a-searchbar>\n    </div>\n    <div class=\"list\" *ngIf=\"filtered_list.length; else empty_state\">\n        <div class=\"item\" *ngFor=\"let space of filtered_list\">\n            <a-control-space-list-item [space]=\"space\"></a-control-space-list-item>\n        </div>\n    </div>\n</div>\n<ng-template #empty_state>\n    <div class=\"list\">\n        <div class=\"info-block\">\n            <div class=\"icon\">\n                <app-icon\n                    [icon]=\"{ type: 'icon', class: 'material-icons', content: 'close' }\"\n                ></app-icon>\n            </div>\n            <div class=\"text\">\n                {{ search_str ? ' No matches for \"' + search_str + '\"' : 'No controllable spaces' }}\n            </div>\n        </div>\n    </div>\n</ng-template>\n","import { Component, Input } from '@angular/core';\n\nimport { SettingsService } from '@user-interfaces/common';\nimport { OrganisationService } from '@user-interfaces/organisation';\nimport { Space } from '@user-interfaces/spaces';\n\n\n@Component({\n    selector: 'a-control-space-list-item',\n    templateUrl: './item.component.html',\n    styleUrls: ['./item.component.scss']\n})\nexport class ControlSpaceListItemComponent {\n    /** Space to display */\n    @Input() public space: Space;\n\n    public get show_image() {\n        return this._settings.get('app.space_display.show_images');\n    }\n\n    /** Display location of the space */\n    public get location(): string {\n        if (!this.space) {\n            return 'Unable to determine location';\n        }\n        const level = this.space.level;\n        const bld = this._org.buildings.find(building => building.id === level.parent_id);\n        return `${bld ? bld.name + ', ' : ''}${level.name}`;\n    }\n\n    constructor(private _settings: SettingsService, private _org: OrganisationService) { }\n}\n","<div class=\"space-details\" *ngIf=\"space\" [class.with-image]=\"show_image\">\n    <div class=\"details\">\n        <div\n            class=\"image\"\n            *ngIf=\"show_image && space.image\"\n            [style.background-image]=\"'url(' + space.image + ')'\"\n        ></div>\n        <div class=\"overlay\"></div>\n        <div class=\"name\">{{ space.name }}</div>\n        <div class=\"info\">\n            <div class=\"location\">{{ location }}</div>\n            <div class=\"capacity\">\n                <app-icon\n                    [icon]=\"{ type: 'icon', class: 'material-icons', content: 'account_circle' }\"\n                ></app-icon>\n                {{ space.capacity || '0' }}\n            </div>\n        </div>\n    </div>\n    <div class=\"actions\">\n        <a\n            mat-button\n            color=\"primary\"\n            button\n            [routerLink]=\"['/explore']\"\n            [queryParams]=\"{ space: space.id }\"\n        >\n            Find\n        </a>\n        <a mat-button color=\"primary\" button [href]=\"space.support_url | safe: 'url'\">\n            Control\n        </a>\n    </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule, Route } from '@angular/router';\n\nimport { ControlComponent } from './control.component';\nimport { SharedContentModule } from '../ui/shared.module';\nimport { ControlSpaceListComponent } from './space-list/space-list.component';\nimport { ControlSpaceListItemComponent } from './space-list/item/item.component';\n\nconst ROUTES: Route[] = [\n    { path: '', component: ControlComponent }\n];\n\n@NgModule({\n    declarations: [ControlComponent, ControlSpaceListComponent, ControlSpaceListItemComponent],\n    imports: [\n        CommonModule,\n        RouterModule.forChild(ROUTES),\n        SharedContentModule\n    ]\n})\nexport class ControlModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { BaseClass, SettingsService } from '@user-interfaces/common';\n\n@Component({\n    selector: 'app-control',\n    templateUrl: './control.component.html',\n    styleUrls: ['./control.component.scss']\n})\nexport class ControlComponent extends BaseClass implements OnInit {\n    /** Whether to show the overlay menu */\n    public show_menu: boolean;\n\n    constructor(private _settings: SettingsService) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this._settings.title = 'Control';\n    }\n}\n","<div class=\"control page\">\n    <header class=\"header\">\n        <a-topbar-header [(menu)]=\"show_menu\"></a-topbar-header>\n    </header>\n    <main class=\"body\">\n        <a-control-space-list></a-control-space-list>\n    </main>\n    <footer class=\"footer\">\n        <a-footer-menu></a-footer-menu>\n    </footer>\n</div>\n<a-overlay-menu [(show)]=\"show_menu\"></a-overlay-menu>\n"],"sourceRoot":"webpack:///"}