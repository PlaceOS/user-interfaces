(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{mjT4:function(t,e,n){"use strict";n.d(e,"a",(function(){return C})),n.d(e,"b",(function(){return E})),n.d(e,"c",(function(){return S})),n.d(e,"d",(function(){return T}));var i=n("EM62"),o=n("OZ4H"),c=n("20lr"),s=n("xuqh"),a=n("HTl7");function r(t,e){if(1&t&&(i.Vb(0,"div",7),i.Qb(1,"user-form",8),i.Ub()),2&t){const t=i.hc();i.Db(1),i.nc("form",t.form)}}function l(t,e){if(1&t){const t=i.Wb();i.Vb(0,"footer"),i.Vb(1,"button",9),i.Ic(2,"Cancel"),i.Ub(),i.Vb(3,"button",10),i.dc("click",(function(){return i.vc(t),i.hc().saveChanges()})),i.Ic(4,"Save"),i.Ub(),i.Ub()}}function b(t,e){1&t&&(i.Vb(0,"div",7),i.Vb(1,"div",11),i.Vb(2,"div",12),i.Qb(3,"mat-spinner",13),i.Ub(),i.Vb(4,"div",14),i.Ic(5,"Saving attendee..."),i.Ub(),i.Ub(),i.Ub())}const d=function(){return{type:"icon",class:"material-icons",content:"close"}};let u=(()=>{class t extends c.b{constructor(t){super(),this._data=t,this.event=new i.o}ngOnInit(){this.user=this._data.user||{},this.form=Object(a.c)(this.user)}saveChanges(){if(this.form.markAllAsTouched(),this.form.valid){const t=new s.c(Object.assign(Object.assign({},this.form.value),{type:"external",visit_expected:!this.form.value.email.endsWith("place.tech")}));this.event.emit({reason:"done",metadata:t})}}}return t.\u0275fac=function(e){return new(e||t)(i.Pb(o.a))},t.\u0275cmp=i.Jb({type:t,selectors:[["new-user-modal"]],outputs:{event:"event"},features:[i.Ab],decls:12,vars:6,consts:[["mat-dialog-title","",1,"heading"],[1,"flex-1"],["mat-icon-button","","mat-dialog-close",""],[3,"icon"],["class","body",4,"ngIf","ngIfElse"],[4,"ngIf"],["load_state",""],[1,"body"],[3,"form"],["mat-button","","mat-dialog-close","",1,"inverse"],["mat-button","",3,"click"],[1,"info-block"],[1,"icon"],["diameter","32"],[1,"text"]],template:function(t,e){if(1&t&&(i.Vb(0,"header"),i.Vb(1,"div",0),i.Ic(2),i.Ub(),i.Qb(3,"div",1),i.Vb(4,"button",2),i.Qb(5,"app-icon",3),i.Ub(),i.Ub(),i.Vb(6,"mat-dialog-content"),i.Gc(7,r,2,1,"div",4),i.Ub(),i.Vb(8,"mat-dialog-actions"),i.Gc(9,l,5,0,"footer",5),i.Ub(),i.Gc(10,b,6,0,"ng-template",null,6,i.Hc)),2&t){const t=i.sc(11);i.Db(2),i.Kc("",null!=e.user&&e.user.id?"Edit":"Add"," External Attendee"),i.Db(3),i.nc("icon",i.oc(5,d)),i.Db(2),i.nc("ngIf",!e.loading)("ngIfElse",t),i.Db(2),i.nc("ngIf",!e.loading)}},styles:[".body[_ngcontent-%COMP%]{position:relative;flex-direction:column;min-height:20em!important}.body[_ngcontent-%COMP%], footer[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}footer[_ngcontent-%COMP%]{justify-content:center;padding:.35em;border-top:1px solid #ccc}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:8em}.icon[_ngcontent-%COMP%]{height:1.2em;width:1.2em;display:flex;align-items:center;justify-content:center;font-size:2em}.content[_ngcontent-%COMP%]{width:16rem;text-align:center;font-size:.8em}app-icon[_ngcontent-%COMP%]{transition:font-size .2s}.close[_ngcontent-%COMP%]{font-size:1em;cursor:pointer}.close[_ngcontent-%COMP%]:hover   app-icon[_ngcontent-%COMP%]{font-size:.8em}button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:1rem;margin:0 .25em}"]}),t})();var f=n("2kYt"),p=n("nIj0"),g=n("29Wa"),m=n("Cd2c"),h=n("+Tre");function v(t,e){1&t&&(i.Vb(0,"mat-error"),i.Ic(1,"Name is required"),i.Ub())}function _(t,e){if(1&t&&(i.Vb(0,"div",4),i.Vb(1,"label",5),i.Ic(2,"Name"),i.Vb(3,"span"),i.Ic(4,"*"),i.Ub(),i.Ic(5,":"),i.Ub(),i.Vb(6,"mat-form-field",6),i.Qb(7,"input",7),i.Gc(8,v,2,0,"mat-error",8),i.Ub(),i.Ub()),2&t){const t=i.hc(2);i.Db(1),i.Hb("error",t.form.controls.name.invalid&&t.form.controls.name.touched),i.Db(7),i.nc("ngIf",t.form.controls.name.invalid)}}function O(t,e){1&t&&(i.Vb(0,"mat-error"),i.Ic(1,"A valid email is required"),i.Ub())}function y(t,e){if(1&t&&(i.Vb(0,"div",4),i.Vb(1,"label",9),i.Ic(2,"Email"),i.Vb(3,"span"),i.Ic(4,"*"),i.Ub(),i.Ic(5,":"),i.Ub(),i.Vb(6,"mat-form-field",6),i.Qb(7,"input",10),i.Gc(8,O,2,0,"mat-error",8),i.Ub(),i.Ub()),2&t){const t=i.hc(2);i.Db(1),i.Hb("error",t.form.controls.email.invalid&&t.form.controls.email.touched),i.Db(7),i.nc("ngIf",t.form.controls.email.invalid)}}function V(t,e){1&t&&(i.Vb(0,"mat-error"),i.Ic(1,"Organisation is required"),i.Ub())}function U(t,e){if(1&t&&(i.Vb(0,"div",4),i.Vb(1,"label",11),i.Ic(2,"Organisation"),i.Vb(3,"span"),i.Ic(4,"*"),i.Ub(),i.Ic(5,":"),i.Ub(),i.Vb(6,"mat-form-field",6),i.Qb(7,"input",12),i.Gc(8,V,2,0,"mat-error",8),i.Ub(),i.Ub()),2&t){const t=i.hc(2);i.Db(1),i.Hb("error",t.form.controls.organisation.invalid&&t.form.controls.organisation.touched),i.Db(7),i.nc("ngIf",t.form.controls.organisation.invalid)}}function I(t,e){1&t&&(i.Vb(0,"mat-error"),i.Ic(1,"Phone format is invalid"),i.Ub())}function j(t,e){if(1&t&&(i.Vb(0,"div",4),i.Vb(1,"label",13),i.Ic(2,"Phone:"),i.Ub(),i.Vb(3,"mat-form-field",6),i.Qb(4,"input",14),i.Gc(5,I,2,0,"mat-error",8),i.Ub(),i.Ub()),2&t){const t=i.hc(2);i.Db(1),i.Hb("error",t.form.controls.phone.invalid&&t.form.controls.phone.touched),i.Db(4),i.nc("ngIf",t.form.controls.phone.invalid)}}function w(t,e){1&t&&(i.Vb(0,"div",4),i.Vb(1,"mat-checkbox",15),i.Ic(2,"Assistance required"),i.Ub(),i.Ub())}function D(t,e){1&t&&(i.Vb(0,"div",4),i.Vb(1,"mat-checkbox",16),i.Ic(2,"Visit expected"),i.Ub(),i.Ub())}function x(t,e){if(1&t&&(i.Vb(0,"div",1),i.Vb(1,"form",2),i.Gc(2,_,9,3,"div",3),i.Gc(3,y,9,3,"div",3),i.Gc(4,U,9,3,"div",3),i.Gc(5,j,6,3,"div",3),i.Gc(6,w,3,0,"div",3),i.Gc(7,D,3,0,"div",3),i.Ub(),i.Ub()),2&t){const t=i.hc();i.Db(1),i.nc("formGroup",t.form),i.Db(1),i.nc("ngIf",t.form.controls.name),i.Db(1),i.nc("ngIf",t.form.controls.email),i.Db(1),i.nc("ngIf",t.form.controls.organisation),i.Db(1),i.nc("ngIf",t.form.controls.phone),i.Db(1),i.nc("ngIf",t.form.controls.assistance_required),i.Db(1),i.nc("ngIf",t.form.controls.visit_expected)}}let M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Jb({type:t,selectors:[["user-form"]],inputs:{form:"form"},decls:1,vars:1,consts:[["class","user form",4,"ngIf"],[1,"user","form"],[3,"formGroup"],["class","field",4,"ngIf"],[1,"field"],["for","name"],["appearance","outline"],["matInput","","name","name","placeholder","Name","formControlName","name"],[4,"ngIf"],["for","email"],["matInput","","name","email","placeholder","Email Address","formControlName","email"],["for","organisation"],["matInput","","name","organisation","placeholder","Organisation","formControlName","organisation"],["for","phone"],["matInput","","name","phone","placeholder","Phone","formControlName","phone"],["color","primary","formControlName","assistance_required"],["color","primary","formControlName","visit_expected"]],template:function(t,e){1&t&&i.Gc(0,x,8,7,"div",0),2&t&&i.nc("ngIf",e.form)},directives:[f.n,p.r,p.m,p.g,g.c,m.b,p.c,p.l,p.e,g.b,h.a],styles:["label[_ngcontent-%COMP%]{min-width:100%;margin-right:1em;font-weight:700;font-size:.8em;width:100%;margin-top:0;margin-bottom:.5em}label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--pending)}label.error[_ngcontent-%COMP%]{color:var(--error)}.field[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),t})();class C{constructor(t){this.type=t.type||t.location||"other",this.position=t.position||t.map_id||{x:t.x/t.map_width,y:t.y/t.map_height},this.variance=t.variance||0,this.last_seen=t.last_seen||Math.floor((new Date).valueOf()/1e3),this.level=t.level,this.building=t.building,this.at_location=!!t.at_location}}var k=n("Rc+I"),P=n("PBFl"),G=n("0/Ep"),z=n("csyo");let E=(()=>{class t{}return t.\u0275mod=i.Nb({type:t}),t.\u0275inj=i.Mb({factory:function(e){return new(e||t)},imports:[[f.c,p.h,p.p,o.f,k.b,h.b]]}),t})();i.yc(u,[o.h,P.b,o.d,G.a,o.e,f.n,M,o.c,z.b],[]);var R=n("/It1"),Q=n("YtkY"),A=(n("SUR7"),n("SQ91"));const J="/api/staff/v1/people";function S(t){const e=Object(A.a)({q:t});return Object(R.d)(`${J}${e?"?"+e:""}`).pipe(Object(Q.a)(t=>t.map(t=>new s.b(t))))}function T(t){return Object(R.d)(`${J}/${encodeURIComponent(t)}`).pipe(Object(Q.a)(t=>new s.b(t)))}},uHdG:function(t,e,n){"use strict";n.r(e),n.d(e,"ReportsModule",(function(){return bt}));var i=n("2kYt"),o=n("nIj0"),c=n("sEIs"),s=n("oRDy"),a=n("EM62"),r=n("UfDH"),l=n("D57K"),b=n("jOdJ"),d=n("20lr"),u=n("/It1"),f=n("05Mk"),p=n("eZII"),g=n("9MvL"),m=n("KuCG"),h=n("JuBR"),v=n("njY1"),_=n("mrqE"),O=864e5;function y(t,e){Object(_.a)(2,arguments);var n=Object(g.a)(t),i=Object(g.a)(e),o=n.getTime()-Object(v.a)(n),c=i.getTime()-Object(v.a)(i);return Math.round((o-c)/O)}function V(t,e){var n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}var U=n("CzDk"),I=n("ZTXN"),j=n("C05f"),w=n("ROBh"),D=n("HM3f"),x=n("mWib"),M=n("TLy2"),C=n("4e/d"),k=n("YtkY"),P=n("wqq/"),G=n("dJst");let z=(()=>{class t{constructor(t){this._org=t,this._generate=new I.b,this._loading=new j.a(""),this._active_bookings=new j.a([]),this._options=new j.a({start:new Date,end:new Date}),this._bookings_list=this._generate.pipe(Object(x.a)(500),Object(M.a)(t=>{var e;console.log("Report:",t);const n=this._options.getValue();if(this._loading.next("Loading report details..."),!(null==n?void 0:n.type)&&!(null===(e=null==n?void 0:n.zones)||void 0===e?void 0:e.length))return Object(w.a)([]);const i=Object(g.a)((null==n?void 0:n.start)?new Date(n.start):new Date).valueOf(),o=Object(m.a)((null==n?void 0:n.end)?new Date(n.end):i).valueOf(),c=(null==n?void 0:n.zones)?n.zones.filter(t=>"All"!==t).join(","):"",s={period_start:Math.floor(i/1e3),period_end:Math.floor(o/1e3)};return"desks"===n.type?Object(f.d)(Object.assign(Object.assign({},s),{zones:c,type:"desk"})):Object(p.d)(Object.assign(Object.assign({},s),{zone_ids:c}))}),Object(C.a)(t=>[]),Object(k.a)(t=>(this._loading.next(""),(null==t?void 0:t.length)||Object(d.m)("No bookings for the selected levels and period"),this._active_bookings.next(t||[]),t)),Object(P.a)()),this.loading=this._loading.asObservable(),this.options=this._options.asObservable(),this.bookings=this._active_bookings.asObservable(),this.counts=this._options.pipe(Object(x.a)(500),Object(M.a)(t=>{const e=(t.zones||[]).filter(t=>-1!==t&&"All"!==t);return Promise.all(e.map(t=>Object(u.s)(t,{name:"desks"}).pipe(Object(k.a)(e=>[t,e.details.length])).toPromise()))}),Object(C.a)(t=>[]),Object(k.a)(t=>{const e={};return this._active_bookings.next([]),t.forEach(([t,n])=>e[t]=n),e}),Object(P.a)()),this.stats=Object(D.b)([this.counts,this.bookings]).pipe(Object(k.a)(([t,e])=>e[0]instanceof p.a?function(t,e=8){const n=t.reduce((t,e)=>t+e.attendees.length,0),i=t.reduce((t,e)=>t+e.system.capacity,0),o=t.reduce((t,e)=>t+e.duration,0)/(60*e),c=n/i;return{count:t.length,avg_length:t.reduce((t,e)=>t+e.duration,0)/t.length,efficiency:(o+c)/2,total_users:n,total_capacity:i,occupancy:c,utilisation:o,events:t}}(e,8*this.duration):function(t,e=1,n={}){console.log("Counts:",n);const i=Object.keys(n).reduce((t,e)=>t+(n[e]||0),0);return{total:i,count:t.length,utilisation:t.length/i,events:t}}(e||[],this.duration,t))),this._bookings_list.subscribe(t=>t)}get duration(){const t=this._options.getValue();return Math.abs(function(t,e){Object(_.a)(2,arguments);var n=Object(h.a)(t),i=Object(h.a)(e),o=V(n,i),c=Math.abs(y(n,i));n.setDate(n.getDate()-o*c);var s=V(n,i)===-o,a=o*(c-s);return 0===a?0:a}(t.start,t.end))}generateReport(){console.log("Report"),this._generate.next((new Date).valueOf())}setOptions(t){var e,n,i,o,c,s,a;(null===(e=t.zones)||void 0===e?void 0:e.includes("All"))?t.zones=["All",...this._org.levelsForBuilding(this._org.building).map(t=>t.id)]:t.zones&&(null===(i=null===(n=this._options.getValue())||void 0===n?void 0:n.zones)||void 0===i?void 0:i.includes("All"))&&(t.zones=[]),(null===(o=t.start)||void 0===o?void 0:o.valueOf())!==(null===(c=this._options.getValue().start)||void 0===c?void 0:c.valueOf())&&(null===(s=t.end)||void 0===s?void 0:s.valueOf())!==(null===(a=this._options.getValue().end)||void 0===a?void 0:a.valueOf())&&this._options.next(Object.assign(Object.assign({},this._options.getValue()),t))}downloadReport(){const t=this._options.getValue(),e=this._active_bookings.getValue();Object(d.i)(`report+${t.type}+${Object(U.a)(t.start,"yyyy-MM-dd")}+${Object(U.a)(t.end,"yyyy-MM-dd")}.csv`,Object(d.l)(e.map(t=>{const e=t.toJSON();return delete e.zones,delete e.server_names,e})))}}return t.\u0275fac=function(e){return new(e||t)(a.ac(G.c))},t.\u0275prov=a.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var E=n("29Wa"),R=n("R7+U"),Q=n("mFH5"),A=n("gcUQ"),J=n("PBFl"),S=n("csyo");function T(t,e){if(1&t&&(a.Vb(0,"mat-option",13),a.Ic(1),a.Ub()),2&t){const t=e.$implicit;a.nc("value",t.id),a.Db(1),a.Kc(" ",t.display_name||t.name," ")}}function F(t,e){1&t&&a.Qb(0,"mat-spinner",14),2&t&&a.nc("diameter",32)}function H(t,e){1&t&&(a.Vb(0,"p"),a.Ic(1,"Generate Report"),a.Ub())}let N=(()=>{class t extends d.b{constructor(t,e,n){super(),this._state=t,this._org=e,this._route=n,this.zones=[],this.types=[{id:"internal",name:"Internal"},{id:"external",name:"External"},{id:"cancelled",name:"Cancelled"}],this.type_list=this.types.map(t=>""+t.id),this.levels=this._org.active_levels,this.loading=this._state.loading,this.bookings=this._state.bookings,this.options=this._state.options,this.generateReport=()=>this._state.generateReport(),this.downloadReport=()=>this._state.downloadReport(),this.setStartDate=t=>this._state.setOptions({start:new Date(t)}),this.setEndDate=t=>this._state.setOptions({end:new Date(t)}),this.setZones=t=>this._state.setOptions({zones:t})}ngOnInit(){return Object(l.a)(this,void 0,void 0,(function*(){yield this._org.initialised.pipe(Object(b.a)(t=>t)).toPromise(),this.subscription("route.query",this._route.queryParamMap.subscribe(t=>{if(t.has("zone_ids")){const e=t.get("zone_ids").split(",");if(e.length){const t=this._org.levelWithID(e);if(!t)return;this._org.building=this._org.buildings.find(e=>e.id===t.parent_id),this.setZones(e)}}}))}))}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(z),a.Pb(G.c),a.Pb(c.a))},t.\u0275cmp=a.Jb({type:t,selectors:[["reports-options"]],features:[a.Ab],decls:26,vars:26,consts:[["appearance","outline",1,"w-48"],["multiple","","placeholder","Select Levels...",3,"ngModel","ngModelChange"],["value","All"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"w-64"],[3,"rangePicker"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["mat-button","",1,"ml-4",3,"disabled","click"],[3,"diameter",4,"ngIf"],[4,"ngIf"],[3,"value"],[3,"diameter"]],template:function(t,e){if(1&t&&(a.Vb(0,"mat-form-field",0),a.Vb(1,"mat-select",1),a.dc("ngModelChange",(function(t){return e.setZones(t)})),a.ic(2,"async"),a.Vb(3,"mat-option",2),a.Ic(4,"All Levels"),a.Ub(),a.Gc(5,T,2,2,"mat-option",3),a.ic(6,"async"),a.Ub(),a.Ub(),a.Vb(7,"mat-form-field",4),a.Vb(8,"mat-date-range-input",5),a.Vb(9,"input",6),a.dc("ngModelChange",(function(t){return t?e.setStartDate(t):""})),a.ic(10,"async"),a.Ub(),a.Vb(11,"input",7),a.dc("ngModelChange",(function(t){return t?e.setEndDate(t):""})),a.ic(12,"async"),a.Ub(),a.Ub(),a.Qb(13,"mat-datepicker-toggle",8),a.Qb(14,"mat-date-range-picker",null,9),a.Ub(),a.Vb(16,"button",10),a.dc("click",(function(){return e.generateReport()})),a.ic(17,"async"),a.Gc(18,F,1,1,"mat-spinner",11),a.ic(19,"async"),a.Gc(20,H,2,0,"p",12),a.ic(21,"async"),a.Ub(),a.Vb(22,"button",10),a.dc("click",(function(){return e.downloadReport()})),a.ic(23,"async"),a.Vb(24,"p"),a.Ic(25,"Download Report"),a.Ub(),a.Ub()),2&t){const t=a.sc(15);let n=null,i=null,o=null,c=null;a.Db(1),a.nc("ngModel",null==(n=a.jc(2,10,e.options))?null:n.zones),a.Db(4),a.nc("ngForOf",a.jc(6,12,e.levels)),a.Db(3),a.nc("rangePicker",t),a.Db(1),a.nc("ngModel",null==(i=a.jc(10,14,e.options))?null:i.start),a.Db(2),a.nc("ngModel",null==(o=a.jc(12,16,e.options))?null:o.end),a.Db(2),a.nc("for",t),a.Db(3),a.nc("disabled",!!a.jc(17,18,e.loading)),a.Db(2),a.nc("ngIf",a.jc(19,20,e.loading)),a.Db(2),a.nc("ngIf",!a.jc(21,22,e.loading)),a.Db(2),a.nc("disabled",!(null!=(c=a.jc(23,24,e.bookings))&&c.length))}},directives:[E.c,R.a,o.l,o.o,Q.j,i.m,A.a,A.h,o.c,A.g,A.f,E.f,A.b,J.b,i.n,S.b],pipes:[i.b],styles:["[_nghost-%COMP%] {\n                display: flex;\n                align-items: center;\n                background-color: #fff;\n                height: 5em;\n                padding: 0 1em;\n            }\n\n            button[_ngcontent-%COMP%] {\n                min-width: 0;\n                padding: 0 0.85rem;\n            }\n\n            mat-form-field[_ngcontent-%COMP%] {\n                height: 3.25em;\n                margin-left: 1em;\n            }\n\n            mat-slide-toggle[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\n                width: 5.5em;\n                white-space: initial;\n                line-height: 1.2em;\n            }"]}),t})(),q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Jb({type:t,selectors:[["app-reports"]],decls:5,vars:0,consts:[[1,"h-full"],[1,"relative","overflow-hidden","flex","flex-col","flex-1","w-1/2","h-full"],[1,"flex-1","h-1/2","w-full","overflow-auto"]],template:function(t,e){1&t&&(a.Qb(0,"sidebar",0),a.Vb(1,"main",1),a.Qb(2,"reports-options"),a.Vb(3,"div",2),a.Qb(4,"router-outlet"),a.Ub(),a.Ub())},directives:[r.a,N,c.h],styles:["[_nghost-%COMP%] {\n                display: flex;\n                height: 100%;\n                width: 100%;\n            }"]}),t})();var B=n("6CBO"),K=n("mjT4"),L=n("QHQ3");const Y=["report-spaces",""];function $(t,e){if(1&t&&(a.Tb(0),a.Vb(1,"div",3),a.Vb(2,"div",4),a.Vb(3,"h3"),a.Ic(4,"Total Bookings"),a.Ub(),a.Vb(5,"p"),a.Ic(6),a.ic(7,"async"),a.Ub(),a.Ub(),a.Vb(8,"div",4),a.Vb(9,"h3"),a.Ic(10,"Average Bookings Length"),a.Ub(),a.Vb(11,"p"),a.Ic(12),a.ic(13,"async"),a.Ub(),a.Ub(),a.Ub(),a.Vb(14,"div",5),a.Vb(15,"div",6),a.Vb(16,"h3"),a.Ic(17,"Overall Efficiency"),a.Ub(),a.Vb(18,"p"),a.Ic(19),a.ic(20,"async"),a.Ub(),a.Ub(),a.Vb(21,"div",7),a.Vb(22,"div",8),a.Vb(23,"div",9),a.Vb(24,"h3"),a.Ic(25,"Total Attendees"),a.Ub(),a.Vb(26,"p"),a.Ic(27),a.ic(28,"async"),a.Ub(),a.Ub(),a.Vb(29,"div",9),a.Vb(30,"h3"),a.Ic(31,"Total Capacity"),a.Ub(),a.Vb(32,"p"),a.Ic(33),a.ic(34,"async"),a.Ub(),a.Ub(),a.Ub(),a.Vb(35,"h3"),a.Ic(36,"Occupancy"),a.Ub(),a.Vb(37,"p"),a.Ic(38),a.ic(39,"async"),a.Ub(),a.Ub(),a.Vb(40,"div",10),a.Vb(41,"h3"),a.Ic(42,"Utilisation"),a.Ub(),a.Vb(43,"p"),a.Ic(44),a.ic(45,"async"),a.Ub(),a.Ub(),a.Ub(),a.Sb()),2&t){const t=a.hc(2);a.Db(6),a.Jc(a.jc(7,7,t.total_count)||0),a.Db(6),a.Jc(a.jc(13,9,t.avg_length)||"None"),a.Db(7),a.Kc("",a.jc(20,11,t.efficiency)||0,"%"),a.Db(8),a.Jc(a.jc(28,13,t.total_users)||0),a.Db(6),a.Jc(a.jc(34,15,t.total_capacity)||0),a.Db(5),a.Kc("",a.jc(39,17,t.occupancy)||0,"%"),a.Db(6),a.Kc("",a.jc(45,19,t.utilisation)||0,"%")}}function W(t,e){if(1&t&&(a.Tb(0),a.Gc(1,$,46,21,"ng-container",0),a.ic(2,"async"),a.Sb()),2&t){const t=a.hc(),e=a.sc(5);a.Db(1),a.nc("ngIf",a.jc(2,2,t.total_count))("ngIfElse",e)}}function Z(t,e){1&t&&(a.Vb(0,"div",11),a.Qb(1,"mat-spinner",12),a.Vb(2,"p",13),a.Ic(3,"Loading report data..."),a.Ub(),a.Ub()),2&t&&(a.Db(1),a.nc("diameter",32))}function X(t,e){1&t&&(a.Vb(0,"div",11),a.Vb(1,"p",13),a.Ic(2," Select levels and time period to generate a report. "),a.Ub(),a.Ub())}let tt=(()=>{class t{constructor(t){this._state=t,this.total_count=this._state.stats.pipe(Object(k.a)(t=>t.count||0)),this.avg_length=this._state.stats.pipe(Object(k.a)(t=>Object(L.a)({minutes:t.avg_length||0}))),this.efficiency=this._state.stats.pipe(Object(k.a)(t=>(100*(t.efficiency||0)).toFixed(1))),this.total_users=this._state.stats.pipe(Object(k.a)(t=>t.total_users||0)),this.total_capacity=this._state.stats.pipe(Object(k.a)(t=>t.total_capacity||0)),this.occupancy=this._state.stats.pipe(Object(k.a)(t=>(100*(t.occupancy||0)).toFixed(1))),this.utilisation=this._state.stats.pipe(Object(k.a)(t=>(100*(t.utilisation||0)).toFixed(1))),this.loading=this._state.loading}ngOnInit(){this._state.setOptions({type:"events"})}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(z))},t.\u0275cmp=a.Jb({type:t,selectors:[["","report-spaces",""]],attrs:Y,decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],[1,"m-4","p-4","rounded","bg-white","shadow","flex","justify-center","items-center","space-x-2"],[1,"flex","flex-col","items-center","flex-1"],[1,"m-4","p-4","rounded","flex","justify-center","items-center","space-x-4","text-center"],[1,"flex","flex-col","items-center","justify-center","bg-primary","text-white","shadow","rounded","p-4","w-48","h-48"],[1,"flex","flex-col","items-center","bg-primary","text-white","border-4","border-primary","shadow","overflow-hidden","rounded","pb-4","w-48","h-48"],[1,"flex","divide-x-4","divide-primary","mb-4"],[1,"flex","flex-col","items-center","justify-center","flex-1","bg-gray-200","text-black"],[1,"flex","flex-col","items-center","justify-center","bg-primary","text-white","rounded","p-4","w-48","h-48"],[1,"h-full","w-full","flex","flex-col","items-center","p-8"],[1,"mb-4",3,"diameter"],["simple",""]],template:function(t,e){if(1&t&&(a.Gc(0,W,3,4,"ng-container",0),a.ic(1,"async"),a.Gc(2,Z,4,1,"ng-template",null,1,a.Hc),a.Gc(4,X,3,0,"ng-template",null,2,a.Hc)),2&t){const t=a.sc(3);a.nc("ngIf",!a.jc(1,2,e.loading))("ngIfElse",t)}},directives:[i.n,S.b],pipes:[i.b],styles:["h3[_ngcontent-%COMP%] {\n                font-weight: 500;\n            }\n\n            p[_ngcontent-%COMP%]:not([simple]) {\n                font-size: 1.75rem;\n            }"]}),t})();var et=n("R3DB"),nt=n("XyEp");const it=["report-desks",""];function ot(t,e){if(1&t&&(a.Vb(0,"div",11),a.Vb(1,"div",7),a.Ic(2),a.ic(3,"date"),a.Ub(),a.Vb(4,"div",8),a.Ic(5),a.Ub(),a.Vb(6,"div",8),a.Ic(7),a.Ub(),a.Vb(8,"div",8),a.Ic(9),a.Ub(),a.Vb(10,"div",8),a.Ic(11),a.Ub(),a.Ub()),2&t){const t=e.$implicit;a.Db(2),a.Kc(" ",a.kc(3,6,t.date,"longDate")," "),a.Db(3),a.Lc("",t.free||0," / ",t.total||0,""),a.Db(2),a.Jc(t.approved||0),a.Db(2),a.Jc(t.count||0),a.Db(2),a.Kc("",t.utilisation,"%")}}function ct(t,e){if(1&t&&(a.Tb(0),a.Vb(1,"div",3),a.Vb(2,"div",4),a.Vb(3,"h3"),a.Ic(4,"Total Bookings"),a.Ub(),a.Vb(5,"p"),a.Ic(6),a.ic(7,"async"),a.Ub(),a.Ub(),a.Vb(8,"div",4),a.Vb(9,"h3"),a.Ic(10,"Utilisation"),a.Ub(),a.Vb(11,"p"),a.Ic(12),a.ic(13,"async"),a.Ub(),a.Ub(),a.Ub(),a.Vb(14,"div",5),a.Vb(15,"div",6),a.Vb(16,"div",7),a.Ic(17,"Date"),a.Ub(),a.Vb(18,"div",8),a.Ic(19,"Free Desks"),a.Ub(),a.Vb(20,"div",8),a.Ic(21,"Approved Bookings"),a.Ub(),a.Vb(22,"div",8),a.Ic(23,"Total Requests"),a.Ub(),a.Vb(24,"div",8),a.Ic(25,"Utilisation"),a.Ub(),a.Ub(),a.Vb(26,"div",9),a.Gc(27,ot,12,9,"div",10),a.ic(28,"async"),a.Ub(),a.Ub(),a.Sb()),2&t){const t=a.hc(2);a.Db(6),a.Jc(a.jc(7,3,t.total_count)||0),a.Db(6),a.Kc("",a.jc(13,5,t.utilisation)||0,"%"),a.Db(15),a.nc("ngForOf",a.jc(28,7,t.day_list))}}function st(t,e){if(1&t&&(a.Tb(0),a.Gc(1,ct,29,9,"ng-container",0),a.ic(2,"async"),a.Sb()),2&t){const t=a.hc(),e=a.sc(5);a.Db(1),a.nc("ngIf",a.jc(2,2,t.total_count))("ngIfElse",e)}}function at(t,e){1&t&&(a.Vb(0,"div",12),a.Qb(1,"mat-spinner",13),a.Vb(2,"p",14),a.Ic(3,"Loading report data..."),a.Ub(),a.Ub()),2&t&&(a.Db(1),a.nc("diameter",32))}function rt(t,e){1&t&&(a.Vb(0,"div",12),a.Vb(1,"p",14),a.Ic(2," Select levels and time period to generate a report. "),a.Ub(),a.Ub())}const lt=[{path:"",component:q,children:[{path:"spaces",component:tt},{path:"desks",component:(()=>{class t{constructor(t){this._state=t,this.total_count=this._state.stats.pipe(Object(k.a)(t=>t.count||0)),this.utilisation=this._state.stats.pipe(Object(k.a)(t=>(100*(t.utilisation||0)).toFixed(1))),this.loading=this._state.loading,this.day_list=Object(D.b)([this._state.options,this._state.stats]).pipe(Object(k.a)(([t,e])=>{const{start:n,end:i}=t;let o=n;const c=[];for(;Object(et.a)(o,i);){const t=Object(g.a)(o).valueOf(),n=Object(m.a)(t).valueOf(),i=e.events.filter(e=>Object(d.v)(t,n,e.date,e.date+60*e.duration*1e3));c.push({date:t,total:e.total,free:e.total-i.length,approved:i.reduce((t,e)=>t+(e.approved?1:0),0),count:i.length,utilisation:(i.length/e.total*100).toFixed(1)}),o=Object(nt.a)(o,1)}return c}))}ngOnInit(){this._state.setOptions({type:"desks"})}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(z))},t.\u0275cmp=a.Jb({type:t,selectors:[["","report-desks",""]],attrs:it,decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],[1,"m-4","p-4","rounded","bg-white","shadow","flex","justify-center","items-center","space-x-2"],[1,"flex","flex-col","items-center","flex-1"],[1,"m-4","rounded","bg-white","shadow"],["table-head","",1,"flex","items-center","font-medium","border-b","border-gray-200"],[1,"w-1/3","p-4"],[1,"w-1/6","p-4"],["table-body",""],["table-row","","class","flex items-center border-b border-gray-200",4,"ngFor","ngForOf"],["table-row","",1,"flex","items-center","border-b","border-gray-200"],[1,"h-full","w-full","flex","flex-col","items-center","p-8"],[1,"mb-4",3,"diameter"],["simple",""]],template:function(t,e){if(1&t&&(a.Gc(0,st,3,4,"ng-container",0),a.ic(1,"async"),a.Gc(2,at,4,1,"ng-template",null,1,a.Hc),a.Gc(4,rt,3,0,"ng-template",null,2,a.Hc)),2&t){const t=a.sc(3);a.nc("ngIf",!a.jc(1,2,e.loading))("ngIfElse",t)}},directives:[i.n,i.m,S.b],pipes:[i.b,i.f],styles:["h3[_ngcontent-%COMP%] {\n                font-weight: 500;\n            }\n\n            p[_ngcontent-%COMP%]:not([simple]) {\n                font-size: 1.75rem;\n            }"]}),t})()},{path:"**",redirectTo:"desks"}]}];let bt=(()=>{class t{}return t.\u0275mod=a.Nb({type:t}),t.\u0275inj=a.Mb({factory:function(e){return new(e||t)},imports:[[i.c,o.h,s.a,B.a,K.b,c.g.forChild(lt)]]}),t})()}}]);
//# sourceMappingURL=reports-reports-module.12d8cfcfacd0649e5747.js.map