(self.webpackChunkplaceos=self.webpackChunkplaceos||[]).push([[231],{4231:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CateringModule:()=>P});var i=n(1511),s=n(6073),r=n(6898),o=n(5109),a=n(33),c=n(787),u=n(3206),g=n(2619),l=n(1490),d=n(4762),h=n(3530),p=n(1496),f=n(5510),m=n(6283),_=n(4786),b=n(3708),v=n(1522),Z=n(5980);function x(e,t){if(1&e&&(g.TgZ(0,"mat-option",6),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.Q6J("value",e.id),g.xp6(1),g.hij(" ",e.display_name||e.name," ")}}function w(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",7),g.NdJ("click",function(){return g.CHM(e),g.oxw().addItem()}),g._uU(1," Add Item "),g.qZA()}}function C(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"button",7),g.NdJ("click",function(){return g.CHM(e),g.oxw().editConfig()}),g._uU(1," Edit Config "),g.qZA()}}let M=(()=>{class e extends u.KG{constructor(e,t,n,i,s){super(),this._orders=e,this._catering=t,this._org=n,this._route=i,this._router=s,this.zones=[],this.levels=this._org.active_levels,this.setDate=e=>this._orders.filters=Object.assign(Object.assign({},this._orders.filters),{date:e}),this.updateZones=e=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_ids:e.join(",")}}),this._orders.filters=Object.assign(Object.assign({},this._orders.filters),{zones:[e]})},this.addItem=()=>this._catering.addItem(),this.editConfig=()=>this._catering.editConfig()}ngOnInit(){return(0,d.mG)(this,void 0,void 0,function*(){yield this._org.initialised.pipe((0,h.P)(e=>e)).toPromise(),this.subscription("route.query",this._route.queryParamMap.subscribe(e=>{if(e.has("zone_ids")){const t=e.get("zone_ids").split(",");if(!t.length)return;const n=this._org.levelWithID(t);if(this.zones=t,!n)return;this._org.building=this._org.buildings.find(e=>e.id===n.parent_id)}})),this.subscription("route.params",this._route.paramMap.subscribe(e=>this.page=e.has("view")?e.get("view"):"")),this.subscription("levels",this._org.active_levels.subscribe(e=>{this.zones=this.zones.filter(t=>e.find(e=>e.id===t)),!this.zones.length&&e.length&&this.zones.push(e[0].id),this.updateZones(this.zones)}))})}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(f.Ii),g.Y36(f.jW),g.Y36(p.w7),g.Y36(r.gz),g.Y36(r.F0))},e.\u0275cmp=g.Xpm({type:e,selectors:[["catering-topbar"]],features:[g.qOj],decls:8,vars:6,consts:[["appearance","outline"],["multiple","","placeholder","All Levels",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-button","",3,"click",4,"ngIf"],[1,"flex-1","w-2"],[3,"dateChange"],[3,"value"],["mat-button","",3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"mat-form-field",0),g.TgZ(1,"mat-select",1),g.NdJ("ngModelChange",function(e){return t.zones=e})("ngModelChange",function(e){return t.updateZones(e)}),g.YNc(2,x,2,2,"mat-option",2),g.ALo(3,"async"),g.qZA(),g.qZA(),g.YNc(4,w,2,0,"button",3),g.YNc(5,C,2,0,"button",3),g._UZ(6,"div",4),g.TgZ(7,"date-options",5),g.NdJ("dateChange",function(e){return t.setDate(e)}),g.qZA()),2&e&&(g.xp6(1),g.Q6J("ngModel",t.zones),g.xp6(1),g.Q6J("ngForOf",g.lcZ(3,4,t.levels)),g.xp6(2),g.Q6J("ngIf","menu"===t.page),g.xp6(1),g.Q6J("ngIf","menu"===t.page))},directives:[m.KE,_.gD,s.JJ,s.On,i.sg,i.O5,b.E,v.ey,Z.lW],pipes:[i.Ov],styles:["[_nghost-%COMP%]{display:flex;align-items:center;background-color:#fff;height:5em;padding:0 1em;border-bottom:1px solid #ccc}[_nghost-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:.5rem}mat-form-field[_ngcontent-%COMP%]{height:3.25em;width:8em}"]}),e})();var O=n(4135),y=n(2552);const k=["app-catering",""];function q(e,t){1&e&&g._UZ(0,"catering-order-list",5)}function z(e,t){1&e&&g._UZ(0,"catering-menu",5)}const A=function(){return["/catering","menu"]},T=function(){return["/catering","orders"]};function J(e,t){1&e&&(g.TgZ(0,"div",6),g.TgZ(1,"a",7),g.TgZ(2,"div",8),g._UZ(3,"div",9),g.TgZ(4,"span",10),g._uU(5,"Menus and Pricing"),g.qZA(),g.qZA(),g.TgZ(6,"div",11),g._uU(7," View and Edit Menus and Pricing "),g.qZA(),g.qZA(),g.TgZ(8,"a",7),g.TgZ(9,"div",8),g._UZ(10,"div",9),g.TgZ(11,"span",10),g._uU(12,"Today's Orders"),g.qZA(),g.qZA(),g.TgZ(13,"div",11),g._uU(14," View Catering Orders and their statuses upon arrival "),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.xp6(1),g.Q6J("routerLink",g.DdM(6,A)),g.xp6(1),g.Udp("background-image","url(assets/menus.jpg)"),g.xp6(6),g.Q6J("routerLink",g.DdM(7,T)),g.xp6(1),g.Udp("background-image","url(assets/orders.jpg)"))}let j=(()=>{class e extends u.KG{constructor(e){super(),this._route=e}ngOnInit(){this.subscription("route.params",this._route.paramMap.subscribe(e=>this.page=e.has("view")?e.get("view"):""))}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(r.gz))},e.\u0275cmp=g.Xpm({type:e,selectors:[["","app-catering",""]],features:[g.qOj],attrs:k,decls:7,vars:3,consts:[[1,"relative","w-full","flex","flex-col"],[1,"relative","z-10"],[3,"ngSwitch"],["class","flex-1",4,"ngSwitchCase"],["class","flex flex-1 items-center justify-center",4,"ngSwitchDefault"],[1,"flex-1"],[1,"flex","flex-1","items-center","justify-center"],["matRipple","",1,"rounded","flex","flex-col","items-center","bg-white","shadow","text-black",3,"routerLink"],["name","img",1,"relative","w-full","flex","flex-1","items-center","justify-center","text-2xl","text-white","bg-center","bg-cover"],[1,"absolute","inset-0","bg-black","opacity-60","z-0"],[1,"z-10"],[1,"p-2","h-14","w-full","text-sm","text-center","flex","items-center","justify-center"]],template:function(e,t){1&e&&(g._UZ(0,"sidebar"),g.TgZ(1,"main",0),g._UZ(2,"catering-topbar",1),g.ynx(3,2),g.YNc(4,q,1,0,"catering-order-list",3),g.YNc(5,z,1,0,"catering-menu",3),g.YNc(6,J,15,8,"div",4),g.BQk(),g.qZA()),2&e&&(g.xp6(3),g.Q6J("ngSwitch",t.page),g.xp6(1),g.Q6J("ngSwitchCase","orders"),g.xp6(1),g.Q6J("ngSwitchCase","menu"))},directives:[l.k,M,i.RF,i.n9,i.ED,O.I,y.B,r.yS,v.wG],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%;background:var(--bg)}a[_ngcontent-%COMP%]{width:28rem;height:16rem;margin-left:.5rem;text-decoration:none;transition:background .2s}a[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.00392156862745098)!important}a[_ngcontent-%COMP%]:first-child{margin:0}"]}),e})();const U=[{path:"",component:j},{path:":view",component:j}];let P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[i.ez,s.u5,c.v,o.Nh,a.Hi,f.uy,r.Bz.forChild(U)]]}),e})()}}]);