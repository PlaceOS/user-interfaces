{"version":3,"file":"apps_concierge_src_app_events_events_module_ts.js","mappings":"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","names":["EventsComponent","static","this","t","core","Xpm","selectors","attrs","_c0","decls","vars","consts","template","rf","ctx","i0","EventStateService","AsyncHandler","changed","_changed","next","Date","now","period","_options","getValue","constructor","_settings","_org","_dialog","_router","super","BehaviorSubject","event_list","combineLatest","active_building","pipe","filter","bld","switchMap","options","queryBookings","period_start","getUnixTime","startOfDay","Math","max","date","period_end","endOfDay","end","type","zones","zone_ids","join","id","map","list","sort","a","b","shareReplay","asObservable","setOptions","value","viewEvent","event","_this","ref","open","GroupEventDetailsModalComponent","data","booking","concierge","subscription","componentInstance","edit","subscribe","navigate","remove","_asyncToGenerator","removeEvent","close","_this2","result","openConfirmModal","title","content","icon","confirm_text","reason","loading","removeBooking","toPromise","catch","e","notifyError","notifySuccess","i1","i2","i3","i4","Yz7","factory","Éµfac","providedIn","item_r16","images","EventListingComponent_ng_template_1_img_9_Template","length","ctx_r0","time_format","duration","tmp_5_0","linked_event","system_id","address","EventListingComponent_ng_template_3_span_4_Template","tmp_0_0","item_r19","display_name","EventListingComponent_ng_template_5_span_3_Template","item_r21","item_r23","attendees","user_email","EventListingComponent_ng_template_7_ng_template_2_Template","_r25","ctx_r28","checkedInList","item_r27","EventListingComponent_ng_template_9_ng_template_2_Template","_r29","ctx_r8","checkedInCount","EventListingComponent_ng_template_11_div_0_Template","row_r31","permission","item_r33","state","row_r34","_r37","row","ctx_r36","ctx_r38","_r35","EventListingComponent","_state","user","checked_in","EventListingComponent_ng_template_1_Template","EventListingComponent_ng_template_3_Template","EventListingComponent_ng_template_5_Template","EventListingComponent_ng_template_7_Template","EventListingComponent_ng_template_9_Template","EventListingComponent_ng_template_11_Template","EventListingComponent_ng_template_13_Template","EventListingComponent_ng_template_15_Template","_c1","_c2","_c3","_c4","_r1","_r3","_r5","_r7","_r9","_r13","_r11","_r15","hour_r4","i_r5","date_r6","event_r13","_r18","$implicit","ctx_r17","EventWeekViewComponent_div_12_button_1_ng_template_6_Template","offset","ctx_r12","now_offset","EventWeekViewComponent_div_12_button_1_Template","EventWeekViewComponent_div_12_div_3_Template","i_r10","ctx_r3","event_day_map","dateString","date_r9","isCurrentDay","EventWeekViewComponent","format","startOfMinute","valueOf","getHours","getMinutes","days","Array","fill","_","idx","hours","start","push","startWith","ngOnInit","addDays","features","EventWeekViewComponent_div_7_Template","EventWeekViewComponent_div_10_Template","EventWeekViewComponent_div_11_Template","EventWeekViewComponent_div_12_Template","weekday_r2","event_r8","EventMonthViewComponent_div_3_button_4_ng_template_6_Template","_r10","_r6","ctx_r5","day_r3","event_r15","_r17","ctx_r16","EventMonthViewComponent_div_3_button_4_Template","EventMonthViewComponent_div_3_button_7_Template","EventMonthViewComponent_div_3_button_11_Template","is_month","is_today","ctx_r1","EventMonthViewComponent","offset_weekday","get","month","weekdays","month_days","_setMonthDays","_setWeekdays","startOfWeek","startOfMonth","weekStartsOn","from","keys","i","isSameDay","isSameMonth","EventMonthViewComponent_div_2_Template","EventMonthViewComponent_div_3_Template","EventCalendarComponent","_route","setPeriod","relativeTo","queryParams","queryParamsHandling","nextPeriod","take","range","addWeeks","addMonths","previousPeriod","EventCalendarComponent_span_2_Template","EventCalendarComponent_event_week_view_24_Template","EventCalendarComponent_ng_template_26_Template","tmp_1_0","range_r3","display","ctx_r2","EventsListComponent","distinctUntilChanged","view","period_list","_generatePeriods","_initPeriod","queryParamMap","q","has","setPeriodType","timeout","parseInt","item","find","selected_range","setView","set_route","periods","period_type","end_date","week_offset","$event","EventsListComponent_mat_option_33_Template","EventsListComponent_event_listing_35_Template","EventsListComponent_event_calendar_36_Template","tag_r10","_r12","ctx_r11","removeTag","_r14","ctx_r13","form","patchValue","ctx_r15","date_end","getRawValue","use_24hr","tmp_7_0","duration_info","tz_r16","building_r20","name","level_r21","room_r22","_r24","ctx_r23","controls","setValue","parent_id","setBuilding","EventManageComponent_div_0_ng_container_90_mat_option_5_Template","ctx_r25","setLevel","EventManageComponent_div_0_ng_container_90_mat_option_13_Template","EventManageComponent_div_0_ng_container_90_mat_option_24_Template","ctx_r9","building_zone","building_list","level_zone","active_levels","tmp_6_0","available_spaces","EventManageComponent_div_0_mat_chip_row_28_Template","_r27","ctx_r26","addTag","EventManageComponent_div_0_div_58_Template","EventManageComponent_div_0_mat_option_68_Template","EventManageComponent_div_0_mat_option_69_Template","ctx_r29","attendance_type","ctx_r30","ctx_r31","EventManageComponent_div_0_ng_container_90_Template","ctx_r32","save","tag_list","separators","start_date","all_day","filtered_timezones","timezones","EMPTY","EventManageComponent","tags","max_duration","buildings","includes","building","levelWithID","_form_state","_event_form","ENTER","COMMA","SPACE","time","diff","differenceInMinutes","formatDuration","floor","minutes","initialised","first","booking_type","asset_id","currentUser","email","randomString","unique","organisation","location","paramMap","_ref","params","showBooking","newForm","console","log","CalendarEvent","secondary_resource","StaffUser","user_id","user_name","_x","apply","arguments","valueChanges","value_name","_updateTimezoneList","level","new_zones","input","chipInput","inputElement","feature_list","trim","existing_tag","index","indexOf","splice","markAllAsTouched","valid","getInvalidFields","event_id","space","s","resources","postForm","ical_uid","description","res","_ref2","_x2","timezone","TIMEZONES_IANA","toLowerCase","i5","i6","i18n_0","$localize","EventManageComponent_div_0_Template","EventManageComponent_ng_template_1_Template","_r2","ROUTES","path","component","children","redirectTo","EventsModule","oAB","cJS","CommonModule","FormsModule","UIModule","SharedSpacesModule","SharedBookingsModule","SharedEventsModule","FormFieldsModule","RouterModule","forChild","MapLocation","_data","position","map_id","x","map_width","y","map_height","variance","last_seen","at_location","coordinates_from"],"sourceRoot":"webpack:///","sources":["./apps/concierge/src/app/events/events.component.ts","./apps/concierge/src/app/events/event-state.service.ts","./apps/concierge/src/app/events/event-listing.component.ts","./apps/concierge/src/app/events/event-week-view.component.ts","./apps/concierge/src/app/events/event-month-view.component.ts","./apps/concierge/src/app/events/event-calendar.component.ts","./apps/concierge/src/app/events/events-list.component.ts","./apps/concierge/src/app/events/event-manage.component.ts","./apps/concierge/src/app/events/events.module.ts","./libs/users/src/lib/location.class.ts"],"sourcesContent":["import { Component } from '@angular/core';\n\n@Component({\n    selector: '[app-events]',\n    template: `\n        <app-topbar></app-topbar>\n        <div class=\"flex flex-1 h-px\">\n            <app-sidebar></app-sidebar>\n            <main class=\"relative flex flex-col flex-1 w-1/2 h-full\">\n                <router-outlet></router-outlet>\n            </main>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n                background-color: var(--b1);\n            }\n        `,\n    ],\n})\nexport class EventsComponent {}\n","import { Injectable } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { Router } from '@angular/router';\nimport {\n    Booking,\n    GroupEventDetailsModalComponent,\n    queryBookings,\n    removeBooking,\n} from '@placeos/bookings';\nimport {\n    AsyncHandler,\n    SettingsService,\n    notifyError,\n    notifySuccess,\n    openConfirmModal,\n} from '@placeos/common';\nimport { OrganisationService } from '@placeos/organisation';\nimport { endOfDay, getUnixTime, startOfDay } from 'date-fns';\nimport { BehaviorSubject, combineLatest } from 'rxjs';\nimport { filter, map, shareReplay, switchMap } from 'rxjs/operators';\n\nexport interface GroupEventOptions {\n    period: 'week' | 'month';\n    date?: number;\n    end?: number;\n    zone_ids?: string[];\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class EventStateService extends AsyncHandler {\n    private _options = new BehaviorSubject<GroupEventOptions>({\n        period: 'week',\n    });\n    private _changed = new BehaviorSubject(0);\n\n    public readonly event_list = combineLatest([\n        this._org.active_building,\n        this._options,\n        this._changed,\n    ]).pipe(\n        filter(([bld]) => !!bld),\n        switchMap(([bld, options]) =>\n            queryBookings({\n                period_start: getUnixTime(\n                    startOfDay(Math.max(Date.now(), options.date))\n                ),\n                period_end: getUnixTime(\n                    endOfDay(options.end || options.date || Date.now())\n                ),\n                type: 'group-event',\n                zones: options.zone_ids?.join(',') || bld.id,\n            })\n        ),\n        map((list) => list.sort((a, b) => a.date - b.date)),\n        shareReplay(1)\n    );\n\n    public readonly options = this._options.asObservable();\n\n    public changed() {\n        this._changed.next(Date.now());\n    }\n\n    public get period() {\n        return this._options.getValue()?.period;\n    }\n\n    constructor(\n        private _settings: SettingsService,\n        private _org: OrganisationService,\n        private _dialog: MatDialog,\n        private _router: Router\n    ) {\n        super();\n    }\n\n    public setOptions(options: Partial<GroupEventOptions>) {\n        this._options.next({ ...this._options.value, ...options });\n    }\n\n    public viewEvent(event: Booking) {\n        const ref = this._dialog.open(GroupEventDetailsModalComponent, {\n            data: { booking: event, concierge: true },\n        });\n        this.subscription(\n            `edit:${event.id}`,\n            ref.componentInstance.edit.subscribe(() => {\n                this._router.navigate([\n                    '/entertainment',\n                    'events',\n                    'manage',\n                    event.id,\n                ]);\n            })\n        );\n        this.subscription(\n            `remove:${event.id}`,\n            ref.componentInstance.remove.subscribe(async () => {\n                await this.removeEvent(event);\n                ref.close();\n            })\n        );\n    }\n\n    public async removeEvent(event: Booking) {\n        const result = await openConfirmModal(\n            {\n                title: 'Delete Event',\n                content: `Are you sure you want to delete the event \"${event.title}\"?`,\n                icon: { content: 'delete' },\n                confirm_text: 'Delete',\n            },\n            this._dialog\n        );\n        if (result.reason !== 'done') return;\n        result.loading('Deleting event...');\n        await removeBooking(event.id)\n            .toPromise()\n            .catch((e) => {\n                notifyError(e);\n                result.close();\n                throw e;\n            });\n        result.close();\n        notifySuccess('Successfully deleted event.');\n        this._changed.next(Date.now());\n    }\n}\n","import { Component } from '@angular/core';\nimport { SettingsService } from '@placeos/common';\nimport { EventStateService } from './event-state.service';\nimport { User } from '@placeos/users';\n\n@Component({\n    selector: 'event-listing',\n    template: `\n        <custom-table\n            class=\"min-w-[72rem] block\"\n            [dataSource]=\"event_list\"\n            [columns]=\"[\n                'date',\n                'level',\n                'room',\n                'interested',\n                'attending',\n                'status',\n                'permissions',\n                'actions'\n            ]\"\n            [display_column]=\"[\n                'Event',\n                'Level',\n                'Room',\n                'Interested',\n                'Attending',\n                'Status',\n                'Published',\n                ' '\n            ]\"\n            [column_size]=\"[\n                '24r',\n                'flex',\n                '10r',\n                '6r',\n                '6r',\n                '8r',\n                '5r',\n                '3.5r'\n            ]\"\n            [template]=\"{\n                date: event_template,\n                level: level_template,\n                room: room_template,\n                interested: interested_template,\n                attending: attending_template,\n                status: status_template,\n                permissions: published_template,\n                actions: actions_template\n            }\"\n        ></custom-table>\n        <ng-template #event_template let-item=\"row\">\n            <div class=\"flex items-center space-x-2\">\n                <div date class=\"flex flex-col items-center leading-tight w-8\">\n                    <div\n                        month\n                        class=\"text-sm font-medium relative top-0.5 opacity-60\"\n                    >\n                        {{ item.date | date: 'MMM' }}\n                    </div>\n                    <div day class=\"text-2xl font-light relative -top-0.5\">\n                        {{ item.date | date: 'd' }}\n                    </div>\n                </div>\n                <div\n                    class=\"flex items-center justify-center h-12 w-12 rounded overflow-hidden bg-base-200\"\n                >\n                    <img\n                        *ngIf=\"item.images?.length\"\n                        auth\n                        [source]=\"item.images[0]\"\n                        class=\"min-h-full min-w-full\"\n                    />\n                </div>\n                <div details class=\"flex flex-col\">\n                    <div class=\"text-sm\">{{ item.title }}</div>\n                    <div class=\"text-xs opacity-40\">\n                        {{ item.date | date: 'EEEE, ' + time_format }} &ndash;\n                        {{\n                            item.date + item.duration * 60 * 1000\n                                | date: time_format + ' (z)'\n                        }}\n                    </div>\n                    <div class=\"text-xs\">\n                        {{\n                            (\n                                (item.linked_event?.system_id | space | async)\n                                    ?.zones | building\n                            )?.address\n                        }}\n                    </div>\n                </div>\n            </div>\n        </ng-template>\n        <ng-template #level_template let-item=\"row\">\n            {{\n                ((item.linked_event?.system_id | space | async)?.zones | level)\n                    ?.display_name\n            }}\n            <span *ngIf=\"!item.linked_event?.system_id\" class=\"opacity-30\">\n                No Level\n            </span>\n        </ng-template>\n        <ng-template #room_template let-item=\"row\">\n            {{ (item.linked_event?.system_id | space | async)?.display_name }}\n            <span *ngIf=\"!item.linked_event?.system_id\" class=\"opacity-30\">\n                No Room\n            </span>\n        </ng-template>\n        <ng-template #interested_template let-item=\"row\">\n            <button\n                matRipple\n                customTooltip\n                [content]=\"view_attendees\"\n                class=\"px-2 rounded h-full w-full flex items-center justify-center\"\n                [disabled]=\"!item.attendees?.length\"\n            >\n                {{ item.attendees?.length || 0 }}\n            </button>\n            <ng-template #view_attendees>\n                <div\n                    class=\"relative w-[20rem] h-[28rem] overflow-auto bg-white rounded shadow\"\n                >\n                    <attendee-list\n                        [list]=\"item.attendees\"\n                        [host]=\"item.user_email\"\n                        [hide_close]=\"true\"\n                        [custom_title]=\"'Interested'\"\n                    ></attendee-list>\n                </div>\n            </ng-template>\n        </ng-template>\n        <ng-template #attending_template let-item=\"row\">\n            <button\n                matRipple\n                customTooltip\n                [content]=\"view_attendees\"\n                class=\"px-2 rounded h-full w-full flex items-center justify-center\"\n                [disabled]=\"!checkedInCount(item.attendees)\"\n            >\n                {{ checkedInCount(item.attendees) }}\n            </button>\n            <ng-template #view_attendees>\n                <div\n                    class=\"relative w-[20rem] h-[28rem] overflow-auto bg-white rounded shadow\"\n                >\n                    <attendee-list\n                        [list]=\"checkedInList(item.attendees)\"\n                        [host]=\"item.user_email\"\n                        [hide_close]=\"true\"\n                    ></attendee-list>\n                </div>\n            </ng-template>\n        </ng-template>\n        <ng-template #published_template let-row=\"row\">\n            <div\n                *ngIf=\"row.permission === 'OPEN' || row.permission === 'open'\"\n                class=\"rounded h-8 w-8 flex items-center justify-center text-2xl bg-success text-success-content mx-auto\"\n            >\n                <app-icon>done</app-icon>\n            </div>\n        </ng-template>\n        <ng-template #status_template let-item=\"row\">\n            <div\n                class=\"px-4 py-1 rounded-full\"\n                [class.bg-success]=\"\n                    item.state !== 'done' && item.state !== 'in_progress'\n                \"\n                [class.text-success-content]=\"\n                    item.state !== 'done' && item.state !== 'in_progress'\n                \"\n                [class.bg-warning]=\"item.state === 'in_progress'\"\n                [class.text-warning-content]=\"item.state === 'in_progress'\"\n                [class.bg-base-200]=\"item.state === 'done'\"\n                [class.text-base-content]=\"item.state === 'done'\"\n            >\n                {{\n                    item.state === 'done'\n                        ? 'Done'\n                        : item.state === 'in_progress'\n                        ? 'In Progress'\n                        : 'Active'\n                }}\n            </div>\n        </ng-template>\n        <ng-template #actions_template let-row=\"row\">\n            <div class=\"w-full flex items-center justify-end space-x-2\">\n                <button\n                    icon\n                    matRipple\n                    [matMenuTriggerFor]=\"menu\"\n                    [disabled]=\"row.state === 'done'\"\n                >\n                    <app-icon>more_vert</app-icon>\n                </button>\n            </div>\n            <mat-menu #menu=\"matMenu\">\n                <button mat-menu-item [disabled]=\"true\">\n                    <div class=\"flex items-center space-x-2\">\n                        <app-icon class=\"text-2xl\">\n                            confirmation_number\n                        </app-icon>\n                        <div class=\"mr-2\">Promote Event</div>\n                    </div>\n                </button>\n                <button mat-menu-item (click)=\"viewEvent(row)\">\n                    <div class=\"flex items-center space-x-2\">\n                        <app-icon class=\"text-2xl\">visibility</app-icon>\n                        <div class=\"mr-2\">View Event</div>\n                    </div>\n                </button>\n                <a\n                    mat-menu-item\n                    [routerLink]=\"[\n                        '/entertainment',\n                        'events',\n                        'manage',\n                        row?.id\n                    ]\"\n                >\n                    <div class=\"flex items-center space-x-2\">\n                        <app-icon class=\"text-2xl\">edit</app-icon>\n                        <div class=\"mr-2\">Edit Event</div>\n                    </div>\n                </a>\n                <button mat-menu-item [disabled]=\"true\">\n                    <div class=\"flex items-center space-x-2\">\n                        <app-icon class=\"text-2xl\">content_copy</app-icon>\n                        <div class=\"mr-2\">Copy URL</div>\n                    </div>\n                </button>\n                <button mat-menu-item (click)=\"removeEvent(row)\">\n                    <div class=\"flex items-center space-x-2\">\n                        <app-icon class=\"text-2xl text-error\">delete</app-icon>\n                        <div class=\"mr-2\">Delete Event</div>\n                    </div>\n                </button>\n            </mat-menu>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class EventListingComponent {\n    public readonly event_list = this._state.event_list;\n\n    public readonly viewEvent = (event: any) => this._state.viewEvent(event);\n    public readonly removeEvent = (event: any) =>\n        this._state.removeEvent(event);\n\n    public get time_format() {\n        return this._settings.time_format;\n    }\n\n    constructor(\n        private _settings: SettingsService,\n        private _state: EventStateService\n    ) {}\n\n    public checkedInCount(attendees: User[]) {\n        if (!attendees?.length) return 0;\n        return attendees.filter((user: User) => user.checked_in).length;\n    }\n\n    public checkedInList(attendees: User[]) {\n        if (!attendees?.length) return [];\n        return attendees.filter((user: User) => user.checked_in);\n    }\n}\n","import { Component } from '@angular/core';\nimport { AsyncHandler } from '@placeos/common';\nimport { EventStateService } from './event-state.service';\nimport { addDays, format, startOfMinute } from 'date-fns';\nimport { map, shareReplay, startWith } from 'rxjs/operators';\nimport { Booking, GroupEventDetailsModalComponent } from '@placeos/bookings';\nimport { MatDialog } from '@angular/material/dialog';\nimport { Router } from '@angular/router';\n\n@Component({\n    selector: 'event-week-view',\n    template: `\n        <div class=\"absolute inset-0 overflow-auto flex\">\n            <div\n                class=\"sticky left-0 w-24 min-h-full flex flex-col items-end z-20 bg-base-100\"\n            >\n                <div\n                    header\n                    class=\"sticky top-0 h-16 min-h-16 flex justify-end z-10\"\n                >\n                    <div class=\"bg-base-100 pt-6 h-10\">\n                        <div class=\"opacity-30 text-xs px-2\">\n                            {{ now | date: 'zzzz' }}\n                        </div>\n                    </div>\n                </div>\n                <div\n                    *ngFor=\"let hour of hours; let i = index\"\n                    class=\"relative min-h-10 w-full flex-1 bg-base-100\"\n                >\n                    <div\n                        hour\n                        class=\"absolute top-0 right-1 -translate-y-1/2 whitespace-nowrap text-xs opacity-60\"\n                    >\n                        {{ hour }} {{ i >= 12 ? 'PM' : 'AM' }}\n                    </div>\n                </div>\n            </div>\n            <div class=\"relative min-w-[84rem] min-h-full z-10\">\n                <div\n                    header\n                    class=\"sticky flex top-0 h-16 min-h-16 border-b border-base-200 bg-base-100 z-10\"\n                >\n                    <div\n                        *ngFor=\"let date of days\"\n                        date\n                        class=\"flex flex-col items-center justify-center p-4 min-w-48 flex-1 border-r border-base-200\"\n                    >\n                        <div class=\"text-sm opacity-60\">\n                            {{ date | date: 'EEEE' }}\n                        </div>\n                        <div>{{ date | date: 'd' }}</div>\n                    </div>\n                </div>\n                <div\n                    *ngFor=\"let hour of hours; let i = index\"\n                    class=\"relative flex min-h-10 min-w-[84rem] flex-1 border-x border-b border-base-200 pointer-events-none\"\n                ></div>\n                <div\n                    *ngFor=\"let date of days; let i = index\"\n                    date\n                    class=\"absolute top-16 left-0 w-[calc(100%/7)] h-[60rem] flex-1 border-r border-base-200 pointer-events-none\"\n                    [style.transform]=\"'translateX(' + i * 100 + '%)'\"\n                >\n                    <button\n                        *ngFor=\"\n                            let event of (event_day_map | async)[\n                                dateString(date)\n                            ] || []\n                        \"\n                        matRipple\n                        class=\"absolute inset-x-1 bg-base-100 rounded border border-base-200 hover:border-info shadow pl-3 pr-2 py-1 overflow-hidden pointer-events-auto\"\n                        [style.top]=\"event.offset * 100 + '%'\"\n                        [style.height]=\"event.length * 100 + '%'\"\n                        (click)=\"viewEvent(event)\"\n                    >\n                        <div\n                            class=\"absolute left-0 inset-y-0 bg-info w-1.5\"\n                        ></div>\n                        <div class=\"text-sm opacity-60 h-full text-left\">\n                            {{ event.date | date: 'shortTime' }} &mdash;\n                            {{ event.title }}\n                        </div>\n                        <div\n                            class=\"absolute inset-0\"\n                            customTooltip\n                            [content]=\"event_card\"\n                            xPosition=\"center\"\n                            yPosition=\"bottom\"\n                            [hover]=\"true\"\n                        ></div>\n                        <ng-template #event_card>\n                            <div class=\"p-2 pointer-events-none\">\n                                <group-event-card\n                                    [event]=\"event\"\n                                ></group-event-card>\n                            </div>\n                        </ng-template>\n                    </button>\n                    <div\n                        now\n                        *ngIf=\"isCurrentDay(date)\"\n                        class=\"absolute inset-x-0 h-0 border-y-2 border-base-content\"\n                        [style.top]=\"now_offset * 100 + '%'\"\n                    >\n                        <div\n                            class=\"absolute left-0 top-0 -translate-x-1/2 -translate-y-1/2 h-4 w-4 rounded-full bg-base-content\"\n                        ></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `,\n    styles: [``],\n})\nexport class EventWeekViewComponent extends AsyncHandler {\n    public days = new Array(7).fill(0).map((_, idx) => idx + 1);\n    public readonly hours = new Array(24)\n        .fill(0)\n        .map((_, idx) => (idx % 12 ? idx % 12 : 12));\n    public readonly event_list = this._state.event_list;\n    public readonly event_day_map = this.event_list.pipe(\n        map((list) => {\n            const map = {};\n            for (const event of list) {\n                const date = format(event.date, 'yyyy-MM-dd');\n                if (!map[date]) map[date] = [];\n                const start = new Date(event.date);\n                map[date].push({\n                    ...event,\n                    offset:\n                        (start.getHours() * 60 + start.getMinutes()) /\n                        (24 * 60),\n                    length: event.duration / (24 * 60),\n                });\n            }\n            return map;\n        }),\n        startWith({}),\n        shareReplay(1)\n    );\n\n    public readonly viewEvent = (event: any) => this._state.viewEvent(event);\n\n    public dateString(date: number) {\n        if (!date) return '';\n        return format(date, 'yyyy-MM-dd');\n    }\n\n    public isCurrentDay(date: number) {\n        if (!date) return false;\n        return format(Date.now(), 'yyyy-MM-dd') === format(date, 'yyyy-MM-dd');\n    }\n\n    public get now() {\n        return startOfMinute(Date.now()).valueOf();\n    }\n\n    public get now_offset() {\n        const now = new Date(this.now);\n        return (now.getHours() * 60 + now.getMinutes()) / (24 * 60);\n    }\n\n    constructor(\n        private _state: EventStateService,\n        private _dialog: MatDialog,\n        private _router: Router\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'date',\n            this._state.options.subscribe(({ date }) => {\n                if (!date) return;\n                this.days = this.days.map((_, idx) =>\n                    addDays(date, idx).valueOf()\n                );\n            })\n        );\n    }\n}\n","import { Component } from '@angular/core';\nimport { EventStateService } from './event-state.service';\nimport { AsyncHandler, SettingsService } from '@placeos/common';\nimport {\n    format,\n    addDays,\n    isSameDay,\n    isSameMonth,\n    startOfDay,\n    startOfMonth,\n    startOfWeek,\n} from 'date-fns';\nimport { map, shareReplay, startWith } from 'rxjs/operators';\nimport { MatDialog } from '@angular/material/dialog';\nimport { Router } from '@angular/router';\n\n@Component({\n    selector: 'event-month-view',\n    template: `\n        <div class=\"absolute inset-0 overflow-auto\">\n            <div\n                class=\"grid grid-cols-7 min-w-full w-[80rem] min-h-full h-[56rem] m-2 border-b border-base-200 \"\n            >\n                <div\n                    weekday\n                    *ngFor=\"let weekday of weekdays\"\n                    class=\"relative flex items-center justify-center text-sm opacity-60 p-2 h-12\"\n                >\n                    {{ weekday | date: 'EEEE' }}\n                </div>\n                <div\n                    monthday\n                    *ngFor=\"let day of month_days\"\n                    class=\"relative border border-base-200 flex flex-col space-y-1\"\n                >\n                    <div\n                        class=\"rounded-full w-8 h-8 flex items-center justify-center mt-1 ml-1\"\n                        [class.opacity-30]=\"!day.is_month\"\n                        [class.bg-secondary]=\"day.is_today\"\n                        [class.text-secondary-content]=\"day.is_today\"\n                    >\n                        {{ day.id | date: 'd' }}\n                    </div>\n                    <button\n                        matRipple\n                        *ngFor=\"\n                            let event of (event_day_map | async)[\n                                dateString(day.id)\n                            ] || [] | slice: 0:3\n                        \"\n                        (click)=\"viewEvent(event)\"\n                        class=\"relative w-[calc(100%-0.5rem)] h-7 bg-base-100 rounded border border-base-200 hover:border-info shadow pl-3 pr-2 py-1 overflow-hidden mx-1\"\n                    >\n                        <div\n                            class=\"absolute left-0 inset-y-0 bg-info w-1.5\"\n                        ></div>\n                        <div\n                            class=\"text-sm opacity-60 h-full text-left truncate\"\n                        >\n                            {{ event.date | date: 'shortTime' }} &mdash;\n                            {{ event.title }}\n                        </div>\n                        <div\n                            class=\"absolute inset-0\"\n                            customTooltip\n                            [content]=\"event_card\"\n                            xPosition=\"center\"\n                            yPosition=\"bottom\"\n                            [hover]=\"true\"\n                        ></div>\n                        <ng-template #event_card>\n                            <div class=\"p-2 pointer-events-none\">\n                                <group-event-card\n                                    [event]=\"event\"\n                                ></group-event-card>\n                            </div>\n                        </ng-template>\n                    </button>\n                    <button\n                        matRipple\n                        *ngIf=\"\n                            ((event_day_map | async)[dateString(day.id)] || [])\n                                .length > 3\n                        \"\n                        matTooltip=\"More events\"\n                        class=\"relative w-[calc(100%-0.5rem)] h-7 rounded pl-3 pr-2 py-1 overflow-hidden mx-1 underline text-sm\"\n                        [matMenuTriggerFor]=\"menu\"\n                    >\n                        {{\n                            ((event_day_map | async)[dateString(day.id)] || [])\n                                .length - 3\n                        }}\n                        more event(s)\n                    </button>\n                    <mat-menu #menu=\"matMenu\">\n                        <button\n                            mat-menu-item\n                            *ngFor=\"\n                                let event of (event_day_map | async)[\n                                    dateString(day.id)\n                                ] || [] | slice: 3\n                            \"\n                            (click)=\"viewEvent(event)\"\n                        >\n                            <div class=\"flex items-center space-x-4\">\n                                <div class=\"flex-1\">{{ event.title }}</div>\n                                <div\n                                    class=\"text-xs opacity-60 py-1 px-2 rounded bg-base-200 text-base-content\"\n                                >\n                                    {{ event.date | date: 'shortTime' }}\n                                </div>\n                            </div>\n                        </button>\n                    </mat-menu>\n                </div>\n            </div>\n        </div>\n    `,\n    styles: [\n        `\n            .grid {\n                grid-template-rows: 3rem repeat(6, minmax(0, 1fr));\n            }\n        `,\n    ],\n})\nexport class EventMonthViewComponent extends AsyncHandler {\n    public month = startOfDay(Date.now()).valueOf();\n    public weekdays = [];\n\n    public month_days = [];\n    public readonly event_list = this._state.event_list;\n    public readonly event_day_map = this.event_list.pipe(\n        map((list) => {\n            const map = {};\n            for (const event of list) {\n                const date = format(event.date, 'yyyy-MM-dd');\n                if (!map[date]) map[date] = [];\n                const start = new Date(event.date);\n                map[date].push({\n                    ...event,\n                    offset:\n                        (start.getHours() * 60 + start.getMinutes()) /\n                        (24 * 60),\n                    length: event.duration / (24 * 60),\n                });\n            }\n            return map;\n        }),\n        startWith({}),\n        shareReplay(1)\n    );\n\n    public readonly viewEvent = (event: any) => this._state.viewEvent(event);\n\n    public dateString(date: number) {\n        if (!date) return '';\n        return format(date, 'yyyy-MM-dd');\n    }\n\n    public get offset_weekday() {\n        return this._settings.get('app.week_start') || 0;\n    }\n\n    constructor(\n        private _state: EventStateService,\n        private _settings: SettingsService,\n        private _dialog: MatDialog,\n        private _router: Router\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'date',\n            this._state.options.subscribe(({ date }) => {\n                this.month = date;\n                this._setMonthDays();\n                this._setWeekdays();\n            })\n        );\n        this._setMonthDays();\n        this._setWeekdays();\n    }\n\n    private _setMonthDays() {\n        const start = startOfWeek(startOfMonth(this.month), {\n            weekStartsOn: this.offset_weekday as any,\n        });\n        this.month_days = Array.from(Array(7 * 6).keys()).map((i) => {\n            const date = addDays(start, i).valueOf();\n            return {\n                id: date,\n                is_today: isSameDay(date, Date.now()),\n                is_month: isSameMonth(date, this.month),\n            };\n        });\n    }\n\n    private _setWeekdays() {\n        const start = startOfWeek(Date.now(), {\n            weekStartsOn: this.offset_weekday as any,\n        });\n        this.weekdays = Array.from(Array(7).keys()).map((i) =>\n            addDays(start, i)\n        );\n    }\n}\n","import { Component, Input } from '@angular/core';\nimport { SettingsService } from '@placeos/common';\nimport { EventStateService } from './event-state.service';\nimport { map, shareReplay, take } from 'rxjs/operators';\nimport { addMonths, addWeeks, format } from 'date-fns';\nimport { ActivatedRoute, Router } from '@angular/router';\n\n@Component({\n    selector: 'event-calendar',\n    template: `\n        <div class=\"flex items-center border-y border-base-200 w-full\">\n            <div class=\"flex-1 px-2 py-4\">\n                <span *ngIf=\"is_today | async\" class=\"text-info text-xs\">{{\n                    (period | async) === 'week' ? 'This Week' : 'This Month'\n                }}</span>\n            </div>\n            <div class=\"flex-2 flex items-center justify-center space-x-2\">\n                <div class=\"font-medium pl-4\">\n                    {{ (options | async)?.date | date: 'MMM yyyy' }}\n                </div>\n                <button icon matRipple (click)=\"previousPeriod()\">\n                    <app-icon>chevron_left</app-icon>\n                </button>\n                <button icon matRipple (click)=\"nextPeriod()\">\n                    <app-icon>chevron_right</app-icon>\n                </button>\n            </div>\n            <div class=\"flex-1 flex items-center justify-end space-x-2 py-2\">\n                <button\n                    btn\n                    matRipple\n                    class=\"rounded-3xl\"\n                    [class.inverse]=\"(period | async) !== 'week'\"\n                    (click)=\"setPeriod('week')\"\n                >\n                    Week\n                </button>\n                <button\n                    btn\n                    matRipple\n                    class=\"rounded-3xl\"\n                    [class.inverse]=\"(period | async) !== 'month'\"\n                    (click)=\"setPeriod('month')\"\n                >\n                    Month\n                </button>\n            </div>\n        </div>\n        <div class=\"w-full h-4\"></div>\n        <div class=\"relative flex-1 h-1/2 w-full overflow-auto\">\n            <event-week-view\n                *ngIf=\"(period | async) !== 'month'; else month_calendar\"\n            ></event-week-view>\n            <ng-template #month_calendar>\n                <event-month-view></event-month-view>\n            </ng-template>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n            }\n        `,\n    ],\n})\nexport class EventCalendarComponent {\n    public readonly period = this._state.options.pipe(map((_) => _.period));\n\n    public readonly options = this._state.options;\n    public readonly is_today = this.options.pipe(\n        map((_) => _.date <= Date.now() && _.end > Date.now())\n    );\n    public readonly event_list = this._state.event_list;\n    public readonly event_day_map = this.event_list.pipe(\n        map((list) => {\n            const map = {};\n            for (const event of list) {\n                const date = format(event.date, 'yyyy-MM-dd');\n                if (!map[date]) map[date] = [];\n                map[date].push(event);\n            }\n            return map;\n        }),\n        shareReplay(1)\n    );\n\n    public get time_format() {\n        return this._settings.time_format;\n    }\n\n    constructor(\n        private _settings: SettingsService,\n        private _state: EventStateService,\n        private _router: Router,\n        private _route: ActivatedRoute\n    ) {}\n\n    public setPeriod(period: 'week' | 'month') {\n        this._state.setOptions({ period });\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: { period },\n            queryParamsHandling: 'merge',\n        });\n    }\n\n    public async nextPeriod() {\n        const { date, period } = await this.options.pipe(take(1)).toPromise();\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: {\n                range:\n                    period === 'week'\n                        ? addWeeks(date, 1).valueOf()\n                        : addMonths(date, 1).valueOf(),\n            },\n            queryParamsHandling: 'merge',\n        });\n    }\n\n    public async previousPeriod() {\n        const { date, period } = await this.options.pipe(take(1)).toPromise();\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: {\n                range:\n                    period === 'week'\n                        ? addWeeks(date, -1).valueOf()\n                        : addMonths(date, -1).valueOf(),\n            },\n            queryParamsHandling: 'merge',\n        });\n    }\n}\n","import { Component } from '@angular/core';\nimport { AsyncHandler, SettingsService } from '@placeos/common';\nimport { EventStateService } from './event-state.service';\nimport {\n    addDays,\n    addMonths,\n    endOfDay,\n    startOfMonth,\n    startOfWeek,\n    format,\n    addWeeks,\n} from 'date-fns';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { distinctUntilChanged, map, take } from 'rxjs/operators';\n\n@Component({\n    selector: 'app-event-list',\n    template: `\n        <div class=\"absolute inset-0 flex flex-col\">\n            <div class=\"flex items-center justify-between p-8\">\n                <h2 class=\"text-2xl font-medium\">Events</h2>\n                <a\n                    btn\n                    matRipple\n                    [routerLink]=\"['/entertainment', 'events', 'manage']\"\n                >\n                    <div class=\"ml-2\">Create Event</div>\n                    <app-icon class=\"text-2xl\">chevron_right</app-icon>\n                </a>\n            </div>\n            <div filters class=\"flex items-center px-8 space-x-2 pb-4\">\n                <button\n                    btn\n                    matRipple\n                    class=\"rounded-3xl\"\n                    [class.inverse]=\"view !== 'list'\"\n                    (click)=\"setView('list')\"\n                >\n                    <div class=\"flex items-center space-x-2\">\n                        <app-icon class=\"text-xl\">list</app-icon>\n                        <div class=\"pr-2\">List</div>\n                    </div>\n                </button>\n                <button\n                    btn\n                    matRipple\n                    class=\"rounded-3xl\"\n                    [class.inverse]=\"view !== 'calendar'\"\n                    (click)=\"setView('calendar')\"\n                >\n                    <div class=\"flex items-center space-x-2\">\n                        <app-icon class=\"text-xl\">event</app-icon>\n                        <div class=\"pr-2\">Calendar</div>\n                    </div>\n                </button>\n                <div class=\"h-full px-2\">\n                    <div class=\"w-px h-full bg-base-300\"></div>\n                </div>\n                <mat-form-field appearance=\"outline\" class=\"w-32 no-subscript\">\n                    <mat-select\n                        [ngModel]=\"period | async\"\n                        (ngModelChange)=\"setPeriodType($event)\"\n                    >\n                        <mat-option value=\"week\">Week</mat-option>\n                        <mat-option value=\"month\">Month</mat-option>\n                    </mat-select>\n                </mat-form-field>\n                <mat-form-field appearance=\"outline\" class=\"w-64 no-subscript\">\n                    <mat-select\n                        [(ngModel)]=\"selected_range\"\n                        (ngModelChange)=\"setPeriod($event)\"\n                    >\n                        <mat-option\n                            [value]=\"range.id\"\n                            *ngFor=\"let range of period_list\"\n                        >\n                            {{ range.display }}\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </div>\n            <div\n                class=\"h-1/2 flex-1 w-full px-8 overflow-auto relative\"\n                [class.mb-4]=\"view === 'list'\"\n            >\n                <event-listing *ngIf=\"view === 'list'\"></event-listing>\n                <event-calendar\n                    *ngIf=\"view === 'calendar'\"\n                    [period]=\"period | async\"\n                ></event-calendar>\n            </div>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                flex: 1;\n            }\n        `,\n    ],\n})\nexport class EventsListComponent extends AsyncHandler {\n    public readonly period = this._state.options.pipe(\n        map((_) => _.period),\n        distinctUntilChanged()\n    );\n\n    public view: 'list' | 'calendar' = 'list';\n    public period_list = [];\n    public selected_range: number;\n\n    constructor(\n        private _settings: SettingsService,\n        private _state: EventStateService,\n        private _router: Router,\n        private _route: ActivatedRoute\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'period',\n            this.period.subscribe(() => {\n                this._generatePeriods();\n                this._initPeriod();\n            })\n        );\n        this._generatePeriods();\n        this._initPeriod();\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe((q) => {\n                if (q.has('view')) {\n                    this.view = q.get('view') as 'list' | 'calendar';\n                }\n                if (q.has('period') && q.get('period') !== this._state.period) {\n                    this.setPeriodType(\n                        q.get('period') as 'week' | 'month',\n                        false\n                    );\n                }\n                this._generatePeriods();\n\n                if (q.has('range')) {\n                    this.timeout('update', () => {\n                        const id = parseInt(q.get('range'), 10);\n                        const item = this.period_list.find(\n                            (_) => id >= _.start && id < _.end\n                        ) ||\n                            this.period_list[0] || {\n                                start: id,\n                                end:\n                                    this._state.period === 'week'\n                                        ? addWeeks(id, 1).valueOf()\n                                        : addMonths(id, 1).valueOf(),\n                            };\n                        this.selected_range = item.id || id;\n                        this._state.setOptions({\n                            date: item.start,\n                            end: item.end,\n                        });\n                        this.setPeriod(this.selected_range);\n                    });\n                }\n            })\n        );\n    }\n\n    public setView(view: 'list' | 'calendar') {\n        this.view = view;\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: { view: view },\n            queryParamsHandling: 'merge',\n        });\n    }\n\n    public setPeriodType(type: 'week' | 'month', set_route = true) {\n        this._state.setOptions({ period: type });\n        if (set_route) {\n            this._router.navigate([], {\n                relativeTo: this._route,\n                queryParams: { period: type },\n                queryParamsHandling: 'merge',\n            });\n        }\n    }\n\n    public setPeriod(id: number) {\n        this.timeout('set_period', () => {\n            const item =\n                this.period_list.find((_) => id >= _.start && id < _.end) ||\n                this.period_list[0];\n            if (!item) return;\n            this.selected_range = item.id;\n            const { start, end } = item;\n            this._state.setOptions({ date: start, end });\n            this._router.navigate([], {\n                relativeTo: this._route,\n                queryParams: { range: id },\n                queryParamsHandling: 'merge',\n            });\n        });\n    }\n\n    private _generatePeriods() {\n        this.timeout('generate_periods', async () => {\n            const periods = [];\n            const period_type = await this.period.pipe(take(1)).toPromise();\n            let date = Date.now();\n            const end_date = addDays(date, 12 * 30).valueOf();\n            const week_offset = this._settings.get('app.week_start') || 0;\n            if (period_type === 'month') {\n                date = startOfMonth(date).valueOf();\n            } else if (period_type === 'week') {\n                date = startOfWeek(date, {\n                    weekStartsOn: week_offset,\n                }).valueOf();\n            }\n            while (date < end_date) {\n                if (period_type === 'week') {\n                    const end = endOfDay(addDays(date, 6)).valueOf();\n                    periods.push({\n                        id: date,\n                        start: date,\n                        end,\n                        display: `${format(\n                            Math.max(Date.now(), date),\n                            'EEE, do MMM'\n                        )} â ${format(end, 'do MMM')}`,\n                    });\n                    date = addDays(date, 7).valueOf();\n                } else if (period_type === 'month') {\n                    const end = addDays(addMonths(date, 1), -1).valueOf();\n                    periods.push({\n                        id: date,\n                        start: date,\n                        end,\n                        display: `${format(date, 'MMMM yyyy')}`,\n                    });\n                    date = addMonths(date, 1).valueOf();\n                } else break;\n            }\n            this.period_list = periods;\n        });\n    }\n\n    private _initPeriod() {\n        this.timeout(\n            'update',\n            () => {\n                if (this.period_list.length) {\n                    this.setPeriod(this.period_list[0].id);\n                    this.selected_range = this.period_list[0].id;\n                }\n            },\n            350\n        );\n    }\n}\n","import { COMMA, ENTER, SPACE } from '@angular/cdk/keycodes';\nimport { Component } from '@angular/core';\nimport { MatChipInputEvent } from '@angular/material/chips';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport {\n    BookingFormService,\n    removeBooking,\n    showBooking,\n} from '@placeos/bookings';\nimport {\n    AsyncHandler,\n    SettingsService,\n    TIMEZONES_IANA,\n    currentUser,\n    getInvalidFields,\n    notifyError,\n    randomString,\n    unique,\n} from '@placeos/common';\nimport {\n    Building,\n    BuildingLevel,\n    OrganisationService,\n} from '@placeos/organisation';\nimport { first, startWith, take } from 'rxjs/operators';\nimport { EventStateService } from './event-state.service';\nimport {\n    differenceInMinutes,\n    format,\n    formatDuration,\n    startOfDay,\n} from 'date-fns';\nimport { CalendarEvent, EventFormService, removeEvent } from '@placeos/events';\nimport { StaffUser, User } from '@placeos/users';\n\nconst EMPTY = [];\n\n@Component({\n    selector: 'app-event-manage',\n    template: `\n        <div\n            class=\"absolute inset-0 bg-base-100 overflow-auto\"\n            *ngIf=\"!loading; else load_state\"\n        >\n            <a\n                icon\n                matRipple\n                class=\"sticky top-2 right-2 ml-auto\"\n                [routerLink]=\"['/entertainment', 'events']\"\n            >\n                <app-icon>close</app-icon>\n            </a>\n            <form\n                class=\"flex flex-col w-[40rem] max-w-full mx-auto px-4\"\n                [formGroup]=\"form\"\n            >\n                <h3 class=\"py-4 text-2xl font-medium\">\n                    {{ form.value.id ? 'Edit' : 'New' }} Group Event\n                </h3>\n                <section class=\"flex flex-col space-y-2\">\n                    <label for=\"title\">Event Title<span>*</span></label>\n                    <ng-container>\n                        <mat-form-field appearance=\"outline\" class=\"w-full\">\n                            <input\n                                matInput\n                                name=\"title\"\n                                formControlName=\"title\"\n                                placeholder=\"e.g. Team Meeting\"\n                            />\n                            <mat-error>\n                                {{ 'FORM.TITLE_ERROR' | translate }}\n                            </mat-error>\n                        </mat-form-field>\n                        <label for=\"host\">Organiser<span>*</span></label>\n                        <a-user-search-field\n                            class=\"block\"\n                            name=\"host\"\n                            formControlName=\"user\"\n                        ></a-user-search-field>\n                        <label for=\"tags\">Tags</label>\n                        <mat-form-field\n                            appearance=\"outline\"\n                            class=\"no-subscript\"\n                        >\n                            <mat-chip-grid #chipList aria-label=\"Event Tags\">\n                                <mat-chip-row\n                                    *ngFor=\"let tag of tag_list\"\n                                    [selectable]=\"true\"\n                                    [removable]=\"true\"\n                                    (removed)=\"removeTag(tag)\"\n                                >\n                                    {{ tag }}\n                                    <app-icon matChipRemove>close</app-icon>\n                                </mat-chip-row>\n                                <input\n                                    placeholder=\"Add new tags relevant to this event...\"\n                                    [matChipInputFor]=\"chipList\"\n                                    [matChipInputSeparatorKeyCodes]=\"separators\"\n                                    [matChipInputAddOnBlur]=\"true\"\n                                    (matChipInputTokenEnd)=\"addTag($event)\"\n                                />\n                            </mat-chip-grid>\n                        </mat-form-field>\n                        <div class=\"py-4 flex items-center space-x-8\">\n                            <mat-checkbox formControlName=\"featured\">\n                                Featured\n                            </mat-checkbox>\n                            <mat-checkbox\n                                [ngModel]=\"form.value.permission === 'OPEN'\"\n                                [ngModelOptions]=\"{ standalone: true }\"\n                                (ngModelChange)=\"\n                                    form.patchValue({\n                                        permission: $event ? 'OPEN' : 'PRIVATE'\n                                    })\n                                \"\n                            >\n                                Publish\n                            </mat-checkbox>\n                        </div>\n                    </ng-container>\n                    <!-- END BASIC DETAILS -->\n                    <div class=\"w-full h-px bg-base-200\"></div>\n                    <h3 class=\"py-4 text-2xl font-medium\">Date and Time</h3>\n                    <ng-container>\n                        <div class=\"flex items-center flex-wrap sm:space-x-2\">\n                            <div class=\"flex-1 min-w-[256px] relative\">\n                                <label for=\"date\">\n                                    {{ 'FORM.DATE' | translate }}<span>*</span>\n                                </label>\n                                <a-date-field\n                                    name=\"date\"\n                                    formControlName=\"date\"\n                                    [to]=\"end_date\"\n                                >\n                                    {{ 'FORM.DATE_ERROR' | translate }}\n                                </a-date-field>\n                            </div>\n                            <div class=\"flex-1 min-w-[256px] relative\">\n                                <label for=\"date\">\n                                    {{ 'FORM.END_DATE' | translate\n                                    }}<span>*</span>\n                                </label>\n                                <a-date-field\n                                    name=\"date\"\n                                    formControlName=\"date_end\"\n                                    [from]=\"start_date\"\n                                    [to]=\"end_date\"\n                                >\n                                    {{ 'FORM.DATE_ERROR' | translate }}\n                                </a-date-field>\n                            </div>\n                        </div>\n                        <div\n                            class=\"flex items-center space-x-2\"\n                            *ngIf=\"!form.value.all_day\"\n                        >\n                            <div class=\"flex-1 w-1/3\">\n                                <label for=\"start-time\">\n                                    {{ 'FORM.START_TIME' | translate }}\n                                    <span>*</span>\n                                </label>\n                                <a-time-field\n                                    name=\"start-time\"\n                                    [ngModel]=\"form.getRawValue().date\"\n                                    (ngModelChange)=\"\n                                        form.patchValue({ date: $event })\n                                    \"\n                                    [ngModelOptions]=\"{ standalone: true }\"\n                                    [use_24hr]=\"use_24hr\"\n                                ></a-time-field>\n                            </div>\n                            <div class=\"flex-1 w-1/3\">\n                                <label for=\"end-time\">\n                                    {{ 'FORM.END_TIME' | translate\n                                    }}<span>*</span>\n                                </label>\n                                <a-time-field\n                                    name=\"end-time\"\n                                    [ngModel]=\"\n                                        form.value.date_end ||\n                                        form.value.date +\n                                            form.value.duration * 60 * 1000\n                                    \"\n                                    (ngModelChange)=\"\n                                        form.patchValue({ date_end: $event })\n                                    \"\n                                    [ngModelOptions]=\"{ standalone: true }\"\n                                    [from]=\"\n                                        form?.getRawValue()?.date +\n                                        30 * 60 * 1000\n                                    \"\n                                    [use_24hr]=\"use_24hr\"\n                                    [extra_info_fn]=\"duration_info\"\n                                ></a-time-field>\n                            </div>\n                        </div>\n                        <div class=\"flex flex-col\">\n                            <label for=\"display-name\" i18n=\"@@displayNameLabel\">\n                                Timezone:\n                            </label>\n                            <mat-form-field appearance=\"outline\">\n                                <app-icon matPrefix class=\"text-2xl\">\n                                    search\n                                </app-icon>\n                                <input\n                                    matInput\n                                    formControlName=\"timezone\"\n                                    placeholder=\"Timezone\"\n                                    [matAutocomplete]=\"auto\"\n                                />\n                            </mat-form-field>\n                            <mat-autocomplete #auto=\"matAutocomplete\">\n                                <mat-option\n                                    *ngFor=\"let tz of filtered_timezones\"\n                                    [value]=\"tz\"\n                                >\n                                    {{ tz }}\n                                </mat-option>\n                                <mat-option\n                                    *ngIf=\"!timezones.length\"\n                                    [disabled]=\"true\"\n                                >\n                                    No matching timezones\n                                </mat-option>\n                            </mat-autocomplete>\n                        </div>\n                    </ng-container>\n                    <!-- END DATE TIME -->\n                    <div class=\"w-full h-px bg-base-200\"></div>\n                    <h3 class=\"py-4 text-2xl font-medium\">Location</h3>\n                    <ng-container>\n                        <div class=\"flex items-center space-x-2 pb-2\">\n                            <button\n                                btn\n                                matRipple\n                                class=\"flex-1\"\n                                [class.inverse]=\"false\"\n                                [class.inverse]=\"\n                                    form.value.attendance_type !== 'ONSITE'\n                                \"\n                                (click)=\"\n                                    form.patchValue({\n                                        attendance_type: 'ONSITE'\n                                    })\n                                \"\n                            >\n                                <app-icon class=\"text-2xl\">domain</app-icon>\n                                <div class=\"mx-2\">On Premise</div>\n                            </button>\n                            <button\n                                btn\n                                matRipple\n                                class=\"flex-1\"\n                                [class.inverse]=\"\n                                    form.value.attendance_type !== 'ONLINE'\n                                \"\n                                (click)=\"\n                                    form.patchValue({\n                                        attendance_type: 'ONLINE'\n                                    })\n                                \"\n                            >\n                                <app-icon class=\"text-2xl\">laptop_mac</app-icon>\n                                <div class=\"mx-2\">Online Only</div>\n                            </button>\n                            <button\n                                btn\n                                matRipple\n                                class=\"flex-1\"\n                                [class.inverse]=\"\n                                    form.value.attendance_type !== 'ANY'\n                                \"\n                                (click)=\"\n                                    form.patchValue({ attendance_type: 'ANY' })\n                                \"\n                            >\n                                <app-icon class=\"text-2xl\">add</app-icon>\n                                <div class=\"mx-2\">Both</div>\n                            </button>\n                        </div>\n                        <ng-container\n                            *ngIf=\"form.value.attendance_type !== 'ONLINE'\"\n                        >\n                            <label for=\"location\">Building Location</label>\n                            <mat-form-field appearance=\"outline\">\n                                <mat-select\n                                    [ngModel]=\"building_zone\"\n                                    [ngModelOptions]=\"{ standalone: true }\"\n                                    (ngModelChange)=\"\n                                        form.controls.zones.setValue([\n                                            $event.parent_id,\n                                            $event.id\n                                        ]);\n                                        setBuilding($event)\n                                    \"\n                                    placeholder=\"Select Building\"\n                                >\n                                    <mat-option\n                                        *ngFor=\"\n                                            let building of building_list\n                                                | async\n                                        \"\n                                        [value]=\"building\"\n                                    >\n                                        {{\n                                            building.display_name ||\n                                                building.name\n                                        }}\n                                    </mat-option>\n                                </mat-select>\n                            </mat-form-field>\n                            <div class=\"flex space-x-2\">\n                                <div class=\"flex flex-col flex-[2]\">\n                                    <label for=\"level\">Level</label>\n                                    <mat-form-field appearance=\"outline\">\n                                        <mat-select\n                                            [ngModel]=\"level_zone\"\n                                            [ngModelOptions]=\"{\n                                                standalone: true\n                                            }\"\n                                            (ngModelChange)=\"setLevel($event)\"\n                                            placeholder=\"Select Level\"\n                                        >\n                                            <mat-option\n                                                *ngFor=\"\n                                                    let level of active_levels\n                                                        | async\n                                                \"\n                                                [value]=\"level\"\n                                            >\n                                                {{\n                                                    level.display_name ||\n                                                        level.name\n                                                }}\n                                            </mat-option>\n                                        </mat-select>\n                                    </mat-form-field>\n                                </div>\n                                <div class=\"flex flex-col flex-[3]\">\n                                    <label for=\"level\">Room</label>\n                                    <mat-form-field appearance=\"outline\">\n                                        <mat-select\n                                            formControlName=\"secondary_resource\"\n                                            [disabled]=\"\n                                                (available_spaces | async)\n                                                    ?.length === 0\n                                            \"\n                                            placeholder=\"Select Room\"\n                                        >\n                                            <mat-option><i>None</i></mat-option>\n                                            <mat-option\n                                                *ngFor=\"\n                                                    let room of available_spaces\n                                                        | async\n                                                \"\n                                                [value]=\"room.id\"\n                                            >\n                                                {{\n                                                    room.display_name ||\n                                                        room.name\n                                                }}\n                                            </mat-option>\n                                        </mat-select>\n                                    </mat-form-field>\n                                </div>\n                            </div>\n                        </ng-container>\n                    </ng-container>\n                    <!-- END LOCATION -->\n                    <div class=\"w-full h-px bg-base-200\"></div>\n                    <h3 class=\"py-4 text-2xl font-medium\">Event Information</h3>\n                    <ng-container>\n                        <label for=\"title\">Event Description</label>\n                        <rich-text-input\n                            formControlName=\"description\"\n                        ></rich-text-input>\n                        <label for=\"tags\">Images</label>\n                        <image-list-field\n                            formControlName=\"images\"\n                        ></image-list-field>\n                    </ng-container>\n                </section>\n                <div\n                    class=\"flex justify-end space-x-2 sticky bottom-0 w-full bg-base-100 py-4\"\n                >\n                    <a\n                        btn\n                        matRipple\n                        class=\"inverse w-32\"\n                        [routerLink]=\"['/entertainment', 'events']\"\n                    >\n                        Cancel\n                    </a>\n                    <button btn matRipple class=\"w-32\" (click)=\"save()\">\n                        Save\n                    </button>\n                </div>\n            </form>\n        </div>\n        <ng-template #load_state>\n            <div\n                class=\"absolute inset-0 bg-base-100 flex flex-col items-center justify-center space-y-4\"\n            >\n                <mat-spinner diameter=\"48\"></mat-spinner>\n                <p>Saving event...</p>\n            </div>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class EventManageComponent extends AsyncHandler {\n    public loading = false;\n    public timezones: string[] = [];\n    public filtered_timezones: string[] = [];\n\n    public readonly form = this._form_state.form;\n    public readonly separators: number[] = [ENTER, COMMA, SPACE];\n    public readonly building_list = this._org.building_list;\n    public readonly active_levels = this._org.active_levels;\n    public readonly available_spaces = this._event_form.available_spaces;\n\n    public get tag_list() {\n        return this.form.getRawValue().tags || EMPTY;\n    }\n\n    public get max_duration() {\n        return this._settings.get('app.events.max_duration') || 480;\n    }\n\n    public get use_24hr() {\n        return this._settings.get('app.use_24_hour_time');\n    }\n\n    public get building_zone() {\n        const zones = this.form.getRawValue().zones || [];\n        const building = this._org.buildings.find((b) => zones.includes(b.id));\n        return building || this._org.building;\n    }\n\n    public get level_zone() {\n        const zones = this.form.getRawValue().zones;\n        const level = this._org.levelWithID(zones);\n        return level;\n    }\n\n    public readonly duration_info = (time: number) => {\n        const date = this.form.getRawValue().date;\n        if (format(date, 'yyyy-MM-dd') !== format(time, 'yyyy-MM-dd'))\n            return '';\n        const diff = differenceInMinutes(time, date);\n        return ` (${formatDuration({\n            hours: Math.floor(diff / 60),\n            minutes: diff % 60,\n        })})`;\n    };\n\n    constructor(\n        private _form_state: BookingFormService,\n        private _event_form: EventFormService,\n        private _state: EventStateService,\n        private _route: ActivatedRoute,\n        private _router: Router,\n        private _org: OrganisationService,\n        private _settings: SettingsService\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        this._form_state.setOptions({ type: 'group-event' });\n        this.form.patchValue({\n            booking_type: 'group-event',\n            asset_id: `${\n                currentUser()?.name || currentUser()?.email\n            } [${randomString(4)}]`,\n            permission: 'OPEN',\n            zones: unique([\n                this._org.organisation.id,\n                this._org.building.id,\n                this._org.building.parent_id,\n            ]),\n            location:\n                this._org.building.address || this._org.building.display_name,\n            user: currentUser(),\n            attendance_type: 'ONSITE',\n        });\n        this.subscription(\n            'route.params',\n            this._route.paramMap.subscribe(async (params) => {\n                if (params.has('id')) {\n                    const booking = await showBooking(\n                        params.get('id')\n                    ).toPromise();\n                    if (!booking)\n                        return this._router.navigate([\n                            '/entertainment',\n                            'events',\n                        ]);\n                    this._form_state.newForm(booking);\n                    console.log('Booking:', booking.tags);\n                    if (booking.linked_event) {\n                        this._event_form.newForm(\n                            new CalendarEvent(booking.linked_event)\n                        );\n                        this.form.patchValue({\n                            secondary_resource: booking.linked_event.system_id,\n                        });\n                    }\n                    this.form.patchValue({\n                        tags: booking.tags,\n                        user: new StaffUser({\n                            id: booking.user_id,\n                            email: booking.user_email,\n                            name: booking.user_name,\n                        }),\n                    });\n                }\n            })\n        );\n        this.subscription(\n            'form_change',\n            this.form.valueChanges\n                .pipe(startWith(this.form.value))\n                .subscribe(() => {\n                    this._event_form.form.patchValue(this.form.value);\n                    this._event_form.setOptions({\n                        zone_ids: [\n                            this.level_zone?.id || this.building_zone?.id,\n                        ],\n                    });\n                })\n        );\n        this.subscription(\n            'organiser_change',\n            this.form.controls.user.valueChanges.subscribe((value) => {\n                const name = value?.name || value?.email;\n                const value_name =\n                    (name ? `${name} [${randomString(4)}]` : '') ||\n                    this.form.getRawValue().asset_id;\n                this.form.patchValue({ asset_id: value_name });\n            })\n        );\n        this._updateTimezoneList();\n        this.subscription(\n            'tz-change',\n            this.form.valueChanges.subscribe(() => this._updateTimezoneList())\n        );\n    }\n\n    public setBuilding(bld: Building) {\n        this._org.building = bld;\n    }\n\n    public setLevel(level: BuildingLevel) {\n        const new_zones = unique([\n            this._org.organisation.id,\n            this._org.building.parent_id,\n            this._org.building.id,\n            level.id,\n        ]);\n        this.form.controls.zones.setValue(new_zones);\n    }\n\n    /**\n     * Add a feature to the list of features for the item\n     * @param event Input event\n     */\n    public addTag(event: MatChipInputEvent): void {\n        if (!this.form || !this.form.controls.tags) return;\n        const input = event.chipInput.inputElement;\n        const value = event.value;\n        const feature_list = this.tag_list;\n        if ((value || '').trim()) {\n            feature_list.push(value);\n            this.form.controls.tags.setValue(feature_list);\n        }\n        if (input) input.value = '';\n    }\n\n    /**\n     * Remove tag from the list\n     * @param existing_tag Feature to remove\n     */\n    public removeTag(existing_tag: string): void {\n        if (!this.form || !this.form.controls.tags) return;\n        const tag_list = this.tag_list;\n        const index = tag_list.indexOf(existing_tag);\n\n        if (index >= 0) {\n            tag_list.splice(index, 1);\n            this.form.controls.tags.setValue(tag_list);\n        }\n    }\n\n    public async save() {\n        this.form.markAllAsTouched();\n        if (!this.form.valid) {\n            return notifyError(\n                `Some form fields are invalid. [${getInvalidFields(this.form)}]`\n            );\n        }\n        this.loading = true;\n        const booking = this._form_state.booking;\n        // Remove Old Event if linked\n        if (\n            booking?.id &&\n            (booking.linked_event || this.form.getRawValue().secondary_resource)\n        ) {\n            if (booking.linked_event) {\n                await removeEvent(booking.linked_event.event_id)\n                    .toPromise()\n                    .catch((e) => {\n                        notifyError(e);\n                        this.loading = false;\n                        throw e;\n                    });\n            }\n            await removeBooking(booking.id)\n                .toPromise()\n                .catch((e) => {\n                    notifyError(e);\n                    this.loading = false;\n                    throw e;\n                });\n            this._form_state.form.patchValue({ id: null });\n        }\n        // Create event if linked to a space\n        if (this.form.getRawValue().secondary_resource) {\n            const spaces = await this.available_spaces\n                .pipe(take(1))\n                .toPromise();\n            const space = spaces.find(\n                (s) => s.id === this.form.getRawValue().secondary_resource\n            );\n            const value = { ...this.form.getRawValue() };\n            delete value.id;\n            console.log('Event value:', value);\n            this._event_form.form.patchValue({\n                ...value,\n                id: null,\n                resources: [space],\n            });\n            const event = await this._event_form.postForm().catch((e) => {\n                notifyError(e);\n                this.loading = false;\n                throw e;\n            });\n            console.log('Event:', event);\n            if (!event) return;\n            this.form.patchValue({\n                ical_uid: event.ical_uid,\n                event_id: event.id,\n                location: space.display_name || space.name,\n            });\n        }\n        if (!this.form.getRawValue().description)\n            this.form.patchValue({ description: ' ' });\n        const date = this.form.getRawValue().date;\n        const res = await this._form_state.postForm().catch(async (e) => {\n            notifyError(e);\n            if (this.form.getRawValue().event_id) {\n                await removeEvent(this.form.getRawValue().event_id).toPromise();\n            }\n        });\n        this._state.changed();\n        this.loading = false;\n        if (res) {\n            this._router.navigate(['/entertainment', 'events'], {\n                queryParams: { range: startOfDay(date).valueOf() },\n            });\n        }\n    }\n\n    private _updateTimezoneList() {\n        const timezone = this.form?.value?.timezone || '';\n        this.timezones = TIMEZONES_IANA;\n        this.filtered_timezones = this.timezones.filter((_) =>\n            _.toLowerCase().includes(timezone.toLowerCase())\n        );\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { EventsComponent } from './events.component';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Route, RouterModule } from '@angular/router';\n\nimport { UIModule } from '../ui/ui.module';\nimport { EventsListComponent } from './events-list.component';\nimport { EventManageComponent } from './event-manage.component';\nimport { SharedSpacesModule } from '@placeos/spaces';\n\nimport { FormFieldsModule } from '@placeos/form-fields';\nimport { EventListingComponent } from './event-listing.component';\nimport { EventWeekViewComponent } from './event-week-view.component';\nimport { EventMonthViewComponent } from './event-month-view.component';\nimport { EventCalendarComponent } from './event-calendar.component';\nimport { SharedBookingsModule } from '@placeos/bookings';\nimport { SharedEventsModule } from '@placeos/events';\n\nconst ROUTES: Route[] = [\n    {\n        path: '',\n        component: EventsComponent,\n        children: [{ path: '', component: EventsListComponent }],\n    },\n    { path: 'manage', component: EventManageComponent },\n    { path: 'manage/:id', component: EventManageComponent },\n    { path: '**', redirectTo: '' },\n];\n\n@NgModule({\n    declarations: [\n        EventsComponent,\n        EventsListComponent,\n        EventManageComponent,\n        EventListingComponent,\n        EventCalendarComponent,\n        EventWeekViewComponent,\n        EventMonthViewComponent,\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        UIModule,\n        SharedSpacesModule,\n        SharedBookingsModule,\n        SharedEventsModule,\n        FormFieldsModule,\n        RouterModule.forChild(ROUTES),\n    ],\n})\nexport class EventsModule {}\n","import { HashMap } from '@placeos/common';\nimport { getUnixTime } from 'date-fns';\n\nexport class MapLocation {\n    /** Source that the location was generated */\n    public type: 'desk' | 'wireless' | 'meeting' | 'other';\n    /** Details of the location */\n    public position: string | { x: number, y: number };\n    /** Accuracy of the location data */\n    public variance: number;\n    /** Unix epoch in seconds that the data was last updated */\n    public last_seen: number;\n    /** ID of the level associated with the location */\n    public level: string;\n    /** ID of the building associated with the location */\n    public building: string;\n    /** Whether user is currently at the location if fixed */\n    public at_location: boolean;\n    /**  */\n    public coordinates_from:\n        | 'top-left'\n        | 'top-right'\n        | 'bottom-left'\n        | 'bottom-right';\n\n    constructor(_data: HashMap = {}) {\n        this.type = _data.type || _data.location || 'other';\n        this.position = _data.position ||\n            _data.map_id || _data.asset_id || {\n                x: _data.x / _data.map_width || 0,\n                y: _data.y / _data.map_height || 0,\n            };\n        this.variance = _data.variance || 0;\n        this.last_seen = _data.last_seen || getUnixTime(new Date());\n        this.level = _data.level;\n        this.building = _data.building;\n        this.at_location = !!_data.at_location;\n        this.coordinates_from = _data.coordinates_from || 'top-left';\n    }\n}\n"],"x_google_ignoreList":[]}