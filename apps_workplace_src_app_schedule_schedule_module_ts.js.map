{"version":3,"file":"apps_workplace_src_app_schedule_schedule_module_ts.js","mappings":"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","names":["i0","ScheduleListItemComponent","type","this","item","Booking","has_ended","id","isAfter","Date","date","duration","icon","status","asset_id","booking_type","content","src","selectors","ScheduleListComponent","constructor","_state","addMonths","today","options","loading","calendars","pipe","map","_","start","o","setOptions","events","list","items","max_date","found","filter","isSameDay","length","valueOf","addDays","user","currentUser","ngOnInit","startPolling","ngOnDestroy","stopPolling","setDate","updateDate","index","event","i","event_list","take","toPromise","scrollTo","findIndex","_viewport","position","top","Math","round","behavior","trackByFn","idx","undefined","CdkVirtualScrollViewport","ctx","ScheduleViewBookingComponent","BaseClass","_route","_router","_dialog","_bookings","_settings","super","is_host","user_email","email","can_view_location","get","all_day","formatDuration","hours","floor","minutes","addMinutes","subscription","paramMap","subscribe","params","has","t","showBooking","catch","timeout","navigate","viewLocation","open","MapLocateModalComponent","maxWidth","maxHeight","data","map_id","extension_data","name","description","zones","editEvent","newForm","confirmDelete","details","openConfirmModal","title","reason","rejectBooking","e","notifyError","notifySuccess","close","ScheduleViewEventComponent","_events","_spaces","host","parts","split","newCalendarEventFromBooking","showEvent","system_id","optionsFor","join","space","find","removeBooking","removeEvent","ROUTES","path","component","ScheduleComponent","children","redirectTo","AppScheduleModule","CommonModule","FormsModule","SharedComponentModule","SharedUsersModule","ScrollingModule","RouterModule"],"sourceRoot":"webpack:///","sources":["./apps/workplace/src/app/schedule/schedule-list-item.component.ts","./apps/workplace/src/app/schedule/schedule-list.component.ts","./apps/workplace/src/app/schedule/schedule-view-booking.component.ts","./apps/workplace/src/app/schedule/schedule-view-event.component.ts","./apps/workplace/src/app/schedule/schedule.module.ts","./apps/workplace/src/app/schedule/schedule.component.ts"],"sourcesContent":["import { Component, Input } from '@angular/core';\nimport { Booking } from '@placeos/bookings';\nimport { CalendarEvent } from '@placeos/events';\nimport { isAfter } from 'date-fns';\nimport { BookingLike } from './schedule-state.service';\n\n@Component({\n    selector: '[schedule-list-item]',\n    template: `\n        <ng-container *ngIf=\"item\" [ngSwitch]=\"item?.id\">\n            <div date *ngSwitchCase=\"'date'\">\n                <div class=\"mx-4 w-full h-12 text-xl flex items-center\">\n                    {{ item.date | date: 'longDate' }} ({{ item.duration }})\n                </div>\n                <div\n                    class=\"mx-4 w-full h-10 text-lg text-center font-normal opacity-60\"\n                    *ngIf=\"!item.duration\"\n                >\n                    No events for {{ item.date | date: 'longDate' }}\n                </div>\n            </div>\n            <a\n                mat-button\n                item\n                *ngSwitchDefault\n                class=\"rounded-none my-1 mx-4 w-[calc(100%-2rem)] h-20 bg-white dark:bg-neutral-700 hover:shadow p-0\"\n                [class.opacity-50]=\"has_ended\"\n                [routerLink]=\"[\n                    '/schedule',\n                    'view',\n                    item?.id + (((item?.system?.email) | space | async)?.id ? '|' + ((item?.system?.email) | space | async)?.id : ''),\n                    type\n                ]\"\n            >\n                <div\n                    class=\"flex items-center border border-gray-200 dark:border-neutral-500\"\n                >\n                    <div\n                        status\n                        class=\"h-20 w-20 flex flex-col items-center justify-center text-white leading-tight\"\n                        [class.bg-success]=\"status === 'approved'\"\n                        [class.bg-pending]=\"status === 'tentative'\"\n                        [class.bg-error]=\"status === 'declined'\"\n                    >\n                        <app-icon class=\"text-2xl\" [icon]=\"icon\"></app-icon>\n                        <div class=\"font-normal\">\n                            {{\n                                item?.all_day\n                                    ? 'All Day'\n                                    : (item?.date | date: 'shortTime')\n                            }}\n                        </div>\n                        <div class=\"capitalize text-xs font-medium\">\n                            ({{ status }})\n                        </div>\n                    </div>\n                    <div class=\"flex-1 flex flex-col text-left p-2\">\n                        <div class=\"text-xl pl-1\">\n                            {{ item?.title || 'Untitled Event' }}\n                        </div>\n                        <div\n                            class=\"flex items-center font-normal\"\n                            *ngIf=\"item?.location || item?.description\"\n                        >\n                            <app-icon class=\"text-lg mr-1\">place</app-icon>\n                            <span>\n                                {{\n                                    item?.location || item?.description\n                                        | slice: 0:255\n                                }}\n                            </span>\n                        </div>\n                    </div>\n                </div>\n            </a>\n        </ng-container>\n    `,\n})\nexport class ScheduleListItemComponent {\n    @Input() public item: BookingLike;\n\n    public get type() {\n        return this.item instanceof Booking ? 'booking' : 'event';\n    }\n\n    public get has_ended() {\n        return (\n            !this.item ||\n            this.item.id === 'date' ||\n            isAfter(new Date(), this.item.date + this.item.duration * 60 * 1000)\n        );\n    }\n\n    public get icon() {\n        if (this.status === 'declined') return 'event_busy';\n        if (this.item.asset_id) {\n            switch ((this.item as Booking).booking_type) {\n                case 'room':\n                    return { content: 'meeting_room' };\n                case 'desk':\n                    return { type: 'img', src: 'assets/img/desk.svg' };\n                case 'parking':\n                    return { content: 'local_parking' };\n            }\n        }\n        return { content: 'event' };\n    }\n\n    public get status() {\n        if (!this.item || this.item.id === 'date') return 'declined';\n        return this.item.status;\n    }\n}\n","import { CdkVirtualScrollViewport } from '@angular/cdk/scrolling';\nimport { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { currentUser } from '@placeos/common';\nimport { addDays, addMonths, isSameDay } from 'date-fns';\nimport { map, take } from 'rxjs/operators';\nimport { BookingLike, ScheduleStateService } from './schedule-state.service';\n\n@Component({\n    selector: 'schedule-list',\n    template: `\n        <div\n            class=\"w-full h-16 flex items-center justify-between bg-white dark:bg-neutral-700 border-b border-gray-300 dark:border-neutral-900 shadow p-2\"\n        >\n            <mat-form-field appearance=\"outline\" class=\"h-[3.25rem]\">\n                <mat-select\n                    [ngModel]=\"(options | async)?.calendar\"\n                    (ngModelChange)=\"setOptions({ calendar: $event })\"\n                    [placeholder]=\"user?.name\"\n                >\n                    <mat-option *ngFor=\"let cal of calendars | async\" [value]=\"cal.id\">{{\n                        (cal.id | user | async)?.name || cal.id\n                    }}</mat-option>\n                </mat-select>\n            </mat-form-field>\n            <div class=\"flex items-center space-x-2\">\n                <button\n                    mat-button\n                    class=\"clear underline\"\n                    [matMenuTriggerFor]=\"legend\"\n                >\n                    Legend\n                </button>\n                <button mat-icon-button class=\"relative\" #dateMenu>\n                    <app-icon>event</app-icon>\n                    <input\n                        matInput\n                        class=\"opacity-0 absolute inset-0\"\n                        [ngModel]=\"date | async\"\n                        (ngModelChange)=\"scrollTo($event)\"\n                        [matDatepicker]=\"picker\"\n                        [min]=\"today\"\n                        [max]=\"max_date\"\n                    />\n\n                    <mat-datepicker-toggle\n                        class=\"opacity-0 absolute inset-0\"\n                        matSuffix\n                        [for]=\"picker\"\n                    ></mat-datepicker-toggle>\n                </button>\n                <mat-datepicker #picker></mat-datepicker>\n            </div>\n        </div>\n        <div\n            class=\"w-full flex-1 overflow-hidden bg-gray-100 dark:bg-neutral-600\"\n        >\n            <cdk-virtual-scroll-viewport\n                itemSize=\"88\"\n                class=\"h-full w-full\"\n                (scrolledIndexChange)=\"updateDate($event)\"\n            >\n                <div\n                    schedule-list-item\n                    *cdkVirtualFor=\"\n                        let item of event_list | async;\n                        trackBy: trackByFn\n                    \"\n                    [item]=\"item\"\n                ></div>\n            </cdk-virtual-scroll-viewport>\n        </div>\n        <mat-progress-bar\n            mode=\"indeterminate\"\n            class=\"w-full\"\n            *ngIf=\"loading | async\"\n        ></mat-progress-bar>\n        <mat-menu #legend=\"matMenu\" xPosition=\"before\">\n            <div class=\"flex items-center px-4 py-2 hover:bg-black/60\">\n                <div class=\"bg-success h-2 w-2 rounded-full mr-4\"></div>\n                Approved\n            </div>\n            <div class=\"flex items-center px-4 py-2 hover:bg-black/60\">\n                <div class=\"bg-pending h-2 w-2 rounded-full mr-4\"></div>\n                Tentative\n            </div>\n            <div class=\"flex items-center px-4 py-2 hover:bg-black/60\">\n                <div class=\"bg-error h-2 w-2 rounded-full mr-4\"></div>\n                Declined\n            </div>\n        </mat-menu>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n            }\n        `,\n    ],\n})\nexport class ScheduleListComponent implements OnInit, OnDestroy {\n    public readonly today = new Date();\n    public readonly max_date = addMonths(this.today, 4);\n    public readonly options = this._state.options;\n    public readonly loading = this._state.loading;\n    public readonly calendars = this._state.calendars;\n\n    public readonly date = this.options.pipe(map((_) => new Date(_.start)));\n\n    public readonly setOptions = (o) => this._state.setOptions(o);\n\n    public readonly event_list = this._state.events.pipe(\n        map((list) => {\n            let items = [];\n            let start = new Date(this.today);\n            while (start < this.max_date) {\n                const found = list.filter((_) => isSameDay(start, _.date));\n                items = found.length\n                    ? [\n                          ...items,\n                          {\n                              id: 'date',\n                              date: start.valueOf(),\n                              duration: found.length,\n                          },\n                          ...found,\n                      ]\n                    : [\n                          ...items,\n                          { id: 'date', date: start.valueOf(), duration: 0 },\n                      ];\n                start = addDays(start, 1);\n            }\n            return items;\n        })\n    );\n\n    public get user() {\n        return currentUser();\n    }\n\n    @ViewChild(CdkVirtualScrollViewport, { static: true })\n    private _viewport: CdkVirtualScrollViewport;\n\n    constructor(private _state: ScheduleStateService) {}\n\n    public ngOnInit() {\n        this._state.startPolling();\n    }\n\n    public ngOnDestroy() {\n        this._state.stopPolling();\n    }\n\n    public setDate(date: Date) {\n        this._state.setOptions({ start: date.valueOf() });\n    }\n\n    public async updateDate(index) {\n        const events = (await this.event_list.pipe(take(1)).toPromise()) || [];\n        const event = events[index] || {};\n        if (event) this.setDate(event.date);\n    }\n\n    public async scrollTo(date: Date) {\n        const events = await this.event_list.pipe(take(1)).toPromise();\n        const index = events.findIndex(\n            (_) => _.id === 'date' && isSameDay(_.date, date)\n        );\n        if (index >= 0 && this._viewport) {\n            let position = 0;\n            for (let i = 0; i < events.length && i < index; i++) {\n                if (events[i].id === 'date' && events[i].duration > 0)\n                    position += 88 / 88;\n                else position += 1;\n            }\n            this._viewport.scrollTo({\n                top: Math.round(position * 88),\n                behavior: 'smooth',\n            });\n        }\n        this.setDate(date);\n    }\n\n    /* istanbul ignore next */\n    public trackByFn(idx: number, event: BookingLike) {\n        return event ? `${event.id}|${event.date}` : undefined;\n    }\n}\n","import { Component, Input } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport {\n    Booking,\n    BookingFormService,\n    rejectBooking,\n    showBooking,\n} from '@placeos/bookings';\nimport {\n    BaseClass,\n    currentUser,\n    notifyError,\n    notifySuccess,\n    openConfirmModal,\n    SettingsService,\n} from '@placeos/common';\nimport { addMinutes, formatDuration, isAfter } from 'date-fns';\nimport { MapLocateModalComponent } from '@placeos/components';\n\n@Component({\n    selector: 'schedule-view-booking',\n    template: `\n        <div topbar class=\"\">\n            <a\n                button\n                class=\"clear h-[2.75rem] text-white\"\n                mat-button\n                [routerLink]=\"['/schedule']\"\n            >\n                <div class=\"flex items-center justify-center h-full\">\n                    <app-icon class=\"text-xl\">arrow_back</app-icon>\n                    <span class=\"ml-2 mx-4\">Back</span>\n                </div>\n            </a>\n        </div>\n        <div\n            class=\"flex-1 w-full flex flex-col items-center bg-gray-200 dark:bg-neutral-600 p-4 overflow-auto\"\n        >\n            <div\n                class=\"max-w-full w-[28rem] bg-white dark:bg-neutral-700 border border-gray-300 dark:border-neutral-500 px-4 pb-4 divide-y divide-gray-300 dark:divide-neutral-500\"\n                *ngIf=\"event; else load_state\"\n            >\n                <h2 class=\"text-xl uppercase font-medium w-full my-4\">\n                    {{ event.title }}\n                </h2>\n                <div\n                    class=\"flex items-center py-2 space-x-2 w-full !border-none\"\n                >\n                    <div class=\"p-2 rounded-full bg-gray-300 dark:bg-neutral-600 mr-2\">\n                        <app-icon>event</app-icon>\n                    </div>\n                    <div class=\"flex-1 truncate\">\n                        {{ event.date | date: 'longDate' }}\n                        <span\n                            *ngIf=\"\n                                !event.all_day && event.duration < 12 * 60;\n                            \"\n                        >\n                            at {{ event.date | date: 'shortTime' }} ~\n                            {{\n                                event.date + event.duration * 60 * 1000\n                                    | date: 'shortTime'\n                            }}\n                        </span>\n                    </div>\n                </div>\n                <div\n                    class=\"flex items-center py-2 space-x-2 w-full\"\n                >\n                    <div class=\"p-2 rounded-full bg-gray-300 dark:bg-neutral-600 mr-2\">\n                        <app-icon>schedule</app-icon>\n                    </div>\n                    <div class=\"flex-1 truncate\">{{ !event.all_day && event.duration < 12 * 60 ? duration : 'All Day' }}</div>\n                </div>\n                <div\n                    class=\"flex items-center py-2 space-x-2 w-full\"\n                    *ngIf=\"event.asset_id\"\n                >\n                    <div class=\"p-2 rounded-full bg-gray-300 dark:bg-neutral-600 mr-2\">\n                        <app-icon>menu_book</app-icon>\n                    </div>\n                    <div class=\"flex-1 truncate\">\n                        {{ event.description || '&lt;No Asset&gt;' }}\n                    </div>\n                    <button\n                        mat-button\n                        locate\n                        *ngIf=\"event.extension_data.map_id && can_view_location\"\n                        class=\"bg-transparent border-none underline text-black\"\n                        (click)=\"viewLocation()\"\n                    >\n                        Map\n                    </button>\n                </div>\n                <div\n                    class=\"flex items-center justify-center space-x-2 mt-4 !border-none\"\n                    *ngIf=\"!has_ended && is_host\"\n                >\n                    <button\n                        mat-button\n                        remove\n                        class=\"w-32 error inverse\"\n                        [disabled]=\"loading\"\n                        (click)=\"confirmDelete()\"\n                    >\n                        {{ is_host ? 'Delete' : 'Decline' }} Event\n                    </button>\n                </div>\n            </div>\n        </div>\n        <ng-template #load_state>\n            <div\n                class=\"h-full w-full flex flex-col items-center justify-center space-y-2\"\n            >\n                <mat-spinner [diameter]=\"32\"></mat-spinner>\n                <p>Loading booking data...</p>\n            </div>\n        </ng-template>\n    `,\n    styles: [\n        `\n            :host {\n                height: 100%;\n                width: 100%;\n                display: flex;\n                flex-direction: column;\n            }\n\n            [topbar] {\n                background-color: #00539f;\n            }\n\n            [list] {\n                transition: height 200ms;\n            }\n        `,\n    ],\n})\nexport class ScheduleViewBookingComponent extends BaseClass {\n    @Input() public event: Booking;\n\n    public get is_host() {\n        return this.event?.user_email === currentUser()?.email;\n    }\n\n    public get can_view_location() {\n        return !this._settings.get('app.no_maps');\n    }\n\n    public get duration() {\n        return this.event.all_day || this.event.duration >= 12 * 60 ? 'All Day' : formatDuration({\n            hours: Math.floor(this.event?.duration / 60),\n            minutes: this.event?.duration % 60,\n        });\n    }\n\n    public get has_ended() {\n        return (\n            this.event &&\n            isAfter(\n                new Date(),\n                addMinutes(this.event.date, this.event.duration)\n            )\n        );\n    }\n\n    constructor(\n        private _route: ActivatedRoute,\n        private _router: Router,\n        private _dialog: MatDialog,\n        private _bookings: BookingFormService,\n        private _settings: SettingsService\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'route.params',\n            this._route.paramMap.subscribe(async (params) => {\n                if (params.has('id')) {\n                    this.event = await showBooking(params.get('id'))\n                        .toPromise()\n                        .catch(() => null);\n                }\n            })\n        );\n        this.timeout(\n            'return',\n            () => (!this.event ? this._router.navigate(['/schedule']) : ''),\n            8 * 1000\n        );\n    }\n\n    public viewLocation() {\n        this._dialog.open(MapLocateModalComponent, {\n            maxWidth: '95vw',\n            maxHeight: '95vh',\n            data: {\n                item: {\n                    id: this.event.asset_id,\n                    map_id: this.event.extension_data.map_id,\n                    name: this.event.description,\n                    zones: this.event.zones,\n                },\n            },\n        });\n    }\n\n    public editEvent() {\n        this._bookings.newForm(this.event);\n        this._router.navigate(['/book', 'desks', 'form']);\n    }\n\n    public async confirmDelete() {\n        const details = await openConfirmModal(\n            {\n                title: `${this.is_host ? 'Delete' : 'Decline'} event`,\n                content: `Are you sure you wish to ${\n                    this.is_host ? 'delete' : 'decline'\n                } this event?`,\n                icon: { content: this.is_host ? 'delete' : 'event_busy' },\n            },\n            this._dialog\n        );\n        if (details.reason !== 'done') return;\n        details.loading('Removing booking...');\n        await rejectBooking(this.event.id)\n            .toPromise()\n            .catch((e) => {\n                details.loading('');\n                notifyError(`Error removing booking. ${e}`);\n                throw e;\n            });\n        notifySuccess('Successfully removed booking.');\n        this._router.navigate(['/schedule']);\n        details.close();\n    }\n}\n","import { Component, Input } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport {\n    BaseClass,\n    notifyError,\n    notifySuccess,\n    openConfirmModal,\n    SettingsService,\n} from '@placeos/common';\nimport {\n    CalendarEvent,\n    EventFormService,\n    newCalendarEventFromBooking,\n    removeEvent,\n    showEvent,\n} from '@placeos/events';\nimport { Space, SpacesService } from '@placeos/spaces';\nimport { formatDuration } from 'date-fns';\nimport { MapLocateModalComponent } from '@placeos/components';\nimport { removeBooking, showBooking } from '@placeos/bookings';\nimport { map } from 'rxjs/operators';\nimport { CateringItem } from '@placeos/catering';\n\n@Component({\n    selector: 'schedule-view-event',\n    template: `\n        <div topbar class=\"\">\n            <a\n                button\n                class=\"clear h-[2.75rem] text-white\"\n                mat-button\n                [routerLink]=\"['/schedule']\"\n            >\n                <div class=\"flex items-center justify-center h-full\">\n                    <app-icon class=\"text-xl\">arrow_back</app-icon>\n                    <span class=\"ml-2 mx-4\">Back</span>\n                </div>\n            </a>\n        </div>\n        <div\n            class=\"flex-1 w-full flex flex-col items-center bg-gray-200 dark:bg-neutral-600 p-4 overflow-auto\"\n        >\n            <div\n                class=\"max-w-full w-[28rem] bg-white dark:bg-neutral-700 border border-gray-300 dark:border-neutral-500 px-4 pb-4 divide-y divide-gray-300 dark:divide-neutral-500\"\n                *ngIf=\"event; else load_state\"\n            >\n                <h2 class=\"text-xl uppercase font-medium w-full my-4\">\n                    {{ event.title }}\n                </h2>\n                <div\n                    class=\"flex items-center py-2 space-x-2 w-full !border-none\"\n                >\n                    <div\n                        class=\"p-2 rounded-full bg-gray-300 dark:bg-neutral-600 mr-2\"\n                    >\n                        <app-icon>event</app-icon>\n                    </div>\n                    <div class=\"flex-1 truncate\">\n                        {{ event.date | date: 'longDate' }}\n                        <span *ngIf=\"!event.all_day\"\n                            >at {{ event.date | date: 'shortTime' }} ~\n                            {{\n                                event.date + event.duration * 60 * 1000\n                                    | date: 'shortTime'\n                            }}</span\n                        >\n                    </div>\n                </div>\n                <div class=\"flex items-center py-2 space-x-2 w-full\">\n                    <div\n                        class=\"p-2 rounded-full bg-gray-300 dark:bg-neutral-600 mr-2\"\n                    >\n                        <app-icon>schedule</app-icon>\n                    </div>\n                    <div class=\"flex-1 truncate\">{{ duration }}</div>\n                </div>\n                <div class=\"w-full\">\n                    <div class=\"flex items-center py-2 space-x-2 \">\n                        <div\n                            class=\"p-2 rounded-full bg-gray-300 dark:bg-neutral-600 mr-2\"\n                        >\n                            <app-icon>place</app-icon>\n                        </div>\n                        <div class=\"flex-1 truncate\">\n                            {{ event.resources?.length }} Space(s)\n                        </div>\n                        <button\n                            mat-button\n                            [disabled]=\"!event.resources?.length\"\n                            class=\"clear bg-transparent border-none underline\"\n                            (click)=\"show_spaces = !show_spaces\"\n                        >\n                            {{ show_spaces ? 'Hide' : 'Show' }}\n                        </button>\n                    </div>\n                    <div\n                        list\n                        [style.height]=\"\n                            !show_spaces\n                                ? '0'\n                                : event.resources?.length * 2.5 + 'rem'\n                        \"\n                        class=\"overflow-hidden\"\n                    >\n                        <div\n                            class=\"flex items-center h-10 pl-12\"\n                            *ngFor=\"let space of event.resources\"\n                        >\n                            <span class=\"flex-1 truncate\">\n                                {{ space.display_name || space.name }} [{{\n                                    space.level?.display_name ||\n                                        space.level?.name\n                                }}]\n                            </span>\n                            <span\n                                class=\"h-2 w-2 rounded mr-2\"\n                                [class.bg-success]=\"\n                                    space.response_status === 'accepted'\n                                \"\n                                [class.bg-pending]=\"\n                                    space.response_status === 'tentative'\n                                \"\n                                [class.bg-error]=\"\n                                    space.response_status === 'declined'\n                                \"\n                            ></span>\n                            <button\n                                mat-button\n                                locate\n                                class=\"bg-transparent border-none underline text-black\"\n                                (click)=\"viewLocation(space)\"\n                                *ngIf=\"can_view_location\"\n                            >\n                                Map\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"w-full\">\n                    <div class=\"flex items-center py-2 space-x-2 \">\n                        <div\n                            class=\"p-2 rounded-full bg-gray-300 dark:bg-neutral-600 mr-2\"\n                        >\n                            <app-icon>group</app-icon>\n                        </div>\n                        <div class=\"flex-1 truncate\">\n                            {{ event.attendees?.length || 0 }}\n                            Attendee(s)\n                        </div>\n                        <button\n                            mat-button\n                            [disabled]=\"!event.attendees?.length\"\n                            class=\"clear bg-transparent border-none underline\"\n                            (click)=\"show_people = !show_people\"\n                        >\n                            {{ show_people ? 'Hide' : 'Show' }}\n                        </button>\n                    </div>\n                    <div\n                        list\n                        [style.height]=\"\n                            !show_people\n                                ? '0'\n                                : event.attendees.length * 3 + 'rem'\n                        \"\n                        class=\"overflow-hidden\"\n                    >\n                        <div\n                            class=\"flex items-center h-12 pl-12 pr-2 space-x-2\"\n                            *ngFor=\"let user of event.attendees\"\n                        >\n                            <a-user-avatar\n                                class=\"text-sm\"\n                                [user]=\"user\"\n                            ></a-user-avatar>\n                            <span class=\"flex-1 truncate\">{{\n                                user.name || user.email\n                            }}</span>\n                            <span\n                                class=\"h-2 w-2 rounded mr-4\"\n                                [class.bg-success]=\"\n                                    user.response_status === 'accepted'\n                                \"\n                                [class.bg-pending]=\"\n                                    user.response_status === 'tentative'\n                                \"\n                                [class.bg-error]=\"\n                                    user.response_status === 'declined'\n                                \"\n                            ></span>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"w-full\" *ngIf=\"event.extension_data.catering?.length\">\n                    <div\n                        class=\"border-b border-gray-200 w-full\"\n                    >\n                        <div class=\"flex items-center py-2 space-x-2 \">\n                            <div\n                                class=\"p-2 rounded-full bg-gray-300 dark:bg-neutral-600 mr-2\"\n                            >\n                                <app-icon>group</app-icon>\n                            </div>\n                            <div class=\"flex-1 truncate\">\n                                {{ event.extension_data.catering[0]?.item_count || 0 }}\n                                Catering Item(s)\n                            </div>\n                            <button\n                                mat-button\n                                class=\"clear bg-transparent border-none underline\"\n                                (click)=\"show_catering = !show_catering\"\n                            >\n                                {{ show_people ? 'Hide' : 'Show' }}\n                            </button>\n                        </div>\n                        <div\n                            list\n                            [style.height]=\"\n                                !show_catering\n                                    ? '0'\n                                    : event.extension_data.catering[0]?.items.length * 3 +\n                                      'rem'\n                            \"\n                            class=\"overflow-hidden\"\n                        >\n                            <div\n                                class=\"flex items-center h-12 pl-12 space-x-2\"\n                                *ngFor=\"let item of event.extension_data.catering[0]?.items\"\n                            >\n                                <div class=\"flex-1 w-1/2\">\n                                    <div class=\"flex-1 w-1/2\">\n                                        {{ item.name }}\n                                    </div>\n                                    <div\n                                        class=\"text-xs underline\"\n                                        *ngIf=\"item.options.length\"\n                                        [matTooltip]=\"optionsFor(item)\"\n                                    >\n                                        {{ item.options.length }} option{{\n                                            item.options.length === 1 ? '' : 's'\n                                        }}\n                                        selected\n                                    </div>\n                                </div>\n                                <div\n                                    class=\"bg-primary text-xs rounded px-4 py-2 mx-2 text-white font-medium\"\n                                >\n                                    {{ item.total_cost / 100 | currency }}\n                                </div>\n                                <div class=\"m-2 bg-neutral-500 text-white h-8 w-8 rounded-full flex items-center justify-center text-sm\">\n                                    {{ item.quantity }}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"w-full\">\n                    <div\n                        class=\"flex items-center py-2 space-x-2 w-full\"\n                        *ngIf=\"event.body\"\n                    >\n                        <div\n                            class=\"p-2 rounded-full bg-gray-300 dark:bg-neutral-600 mr-2\"\n                        >\n                            <app-icon>event_note</app-icon>\n                        </div>\n                        <div\n                            class=\"flex-1 w-1/2 overflow-auto\"\n                            notes\n                            [innerHTML]=\"event.body | sanitize\"\n                        ></div>\n                    </div>\n                </div>\n                <div\n                    class=\"flex items-center justify-center space-x-2 mt-4 !border-none\"\n                    *ngIf=\"event.state !== 'done'\"\n                >\n                    <button\n                        mat-button\n                        edit\n                        class=\"w-32\"\n                        [disabled]=\"loading\"\n                        (click)=\"editEvent()\"\n                        *ngIf=\"is_host\"\n                    >\n                        Edit Event\n                    </button>\n                    <button\n                        mat-button\n                        remove\n                        class=\"w-32 error inverse\"\n                        [disabled]=\"loading\"\n                        (click)=\"confirmDelete()\"\n                    >\n                        {{ is_host ? 'Delete' : 'Decline' }} Event\n                    </button>\n                </div>\n            </div>\n        </div>\n        <ng-template #load_state>\n            <div\n                class=\"h-full w-full flex flex-col items-center justify-center space-y-2\"\n            >\n                <mat-spinner [diameter]=\"32\"></mat-spinner>\n                <p>Loading event data...</p>\n            </div>\n        </ng-template>\n    `,\n    styles: [\n        `\n            :host {\n                height: 100%;\n                width: 100%;\n                display: flex;\n                flex-direction: column;\n            }\n\n            [topbar] {\n                background-color: #00539f;\n            }\n\n            [list] {\n                transition: height 200ms;\n            }\n        `,\n    ],\n})\nexport class ScheduleViewEventComponent extends BaseClass {\n    @Input() public event: CalendarEvent;\n\n    public get is_host() {\n        return this.event?.host;\n    }\n\n    public get can_view_location() {\n        return !this._settings.get('app.no_maps');\n    }\n\n    public get duration() {\n        return this.event.all_day\n            ? 'All Day'\n            : formatDuration({\n                  hours: Math.floor(this.event?.duration / 60),\n                  minutes: this.event?.duration % 60,\n              });\n    }\n\n    constructor(\n        private _route: ActivatedRoute,\n        private _router: Router,\n        private _dialog: MatDialog,\n        private _events: EventFormService,\n        private _spaces: SpacesService,\n        private _settings: SettingsService\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'route.params',\n            this._route.paramMap.subscribe(async (params) => {\n                if (params.has('id')) {\n                    const parts = params.get('id').split('|');\n                    this.event = this._settings.get('app.no_user_calendar')\n                        ? await showBooking(parts[0])\n                              .pipe(map((_) => newCalendarEventFromBooking(_)))\n                              .toPromise()\n                        : await showEvent(parts[0], { system_id: parts[1] }).toPromise();\n                }\n            })\n        );\n        this.timeout(\n            'return',\n            () => (!this.event ? this._router.navigate(['/schedule']) : ''),\n            8 * 1000\n        );\n    }\n\n    public optionsFor(item: CateringItem) {\n        return item.options.map((i) => i.name).join('\\n');\n    }\n\n    public viewLocation(space: Space) {\n        space = this._spaces.find(space.id || space.email) || space;\n        this._dialog.open(MapLocateModalComponent, {\n            maxWidth: '95vw',\n            maxHeight: '95vh',\n            data: { item: space },\n        });\n    }\n\n    public editEvent() {\n        if ('event_start' in this.event) {\n            this._events.newForm(this.event);\n            this._router.navigate(['/book', 'spaces', 'form']);\n        }\n    }\n\n    public async confirmDelete() {\n        const details = await openConfirmModal(\n            {\n                title: `${this.is_host ? 'Delete' : 'Decline'} event`,\n                content: `Are you sure you wish to ${\n                    this.is_host ? 'delete' : 'decline'\n                } this event?`,\n                icon: { content: this.is_host ? 'delete' : 'event_busy' },\n            },\n            this._dialog\n        );\n        if (details.reason !== 'done') return;\n        details.loading('Removing event...');\n        await (this._settings.get('app.no_user_calendar')\n            ? removeBooking\n            : removeEvent)(this.event.id)\n            .toPromise()\n            .catch((e) => {\n                details.loading('');\n                notifyError(`Error removing event. ${e}`);\n                throw e;\n            });\n        notifySuccess('Successfully removed event.');\n        this._router.navigate(['/schedule']);\n        details.close();\n    }\n}\n","import { ScrollingModule } from '@angular/cdk/scrolling';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { Route, RouterModule } from '@angular/router';\nimport { SharedUsersModule } from '@placeos/users';\nimport { SharedComponentModule } from '../components/shared.module';\nimport { ScheduleListItemComponent } from './schedule-list-item.component';\nimport { ScheduleListComponent } from './schedule-list.component';\nimport { ScheduleViewBookingComponent } from './schedule-view-booking.component';\nimport { ScheduleViewEventComponent } from './schedule-view-event.component';\nimport { ScheduleComponent } from './schedule.component';\n\nconst ROUTES: Route[] = [\n    {\n        path: '',\n        component: ScheduleComponent,\n        children: [\n            { path: '', component: ScheduleListComponent },\n            { path: 'view/:id/booking', component: ScheduleViewBookingComponent },\n            { path: 'view/:id/event', component: ScheduleViewEventComponent },\n        ],\n    },\n    { path: '*', redirectTo: '' },\n];\n\n@NgModule({\n    declarations: [\n        ScheduleComponent,\n        ScheduleListComponent,\n        ScheduleListItemComponent,\n        ScheduleViewBookingComponent,\n        ScheduleViewEventComponent\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        SharedComponentModule,\n        SharedUsersModule,\n        ScrollingModule,\n        RouterModule.forChild(ROUTES),\n    ],\n})\nexport class AppScheduleModule {}\n","import { Component } from '@angular/core';\n\n@Component({\n    selector: 'schedule',\n    template: `\n        <topbar></topbar>\n        <div class=\"flex-1 flex sm:flex-row flex-col-reverse h-1/2\">\n            <main\n                class=\"relative flex flex-col flex-1 h-1/2 sm:h-auto overflow-hidden\"\n            >\n                <router-outlet></router-outlet>\n            </main>\n        </div>\n        <footer-menu></footer-menu>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n            }\n        `,\n    ],\n})\nexport class ScheduleComponent {}\n"],"x_google_ignoreList":[]}