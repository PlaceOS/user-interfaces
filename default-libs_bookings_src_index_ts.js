"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([["default-libs_bookings_src_index_ts"],{9232:(Jn,Fe,a)=>{a.d(Fe,{$N:()=>Be.$,jT:()=>O.jT,FD:()=>O.FD,ad:()=>O.ad,F2:()=>O.F2,FP:()=>O.FP,km:()=>O.km,Fo:()=>O.Fo,Wp:()=>O.Wp});var c=a(4666),d=a(2508),De=a(4522),ne=a(4792),ke=a(2298),T=a(5699),M=a(5074),ce=a(1267),A=a(1708),xe=a(2922),Re=a(4693),Ze=a(5170),e=a(2560),Be=a(6962),v=a(3918),f=a(9112),re=a(6725),X=a(6221),Ie=a(2317),Ce=a(1799),z=a(3861),O=a(354),m=a(5306),Q=a(9136),de=a(2581),pe=a(8589),u=a(207);function Ge(o,n){1&o&&e._UZ(0,"div",23)}function $e(o,n){if(1&o&&(e.TgZ(0,"div",24),e._UZ(1,"image-carousel",25),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("images",null==t.booking||null==t.booking.extension_data?null:t.booking.extension_data.images)}}function ye(o,n){if(1&o&&(e.TgZ(0,"div",32)(1,"app-icon"),e._uU(2),e.qZA(),e.TgZ(3,"div",33),e._uU(4),e.qZA()()),2&o){const t=e.oxw(3);e.xp6(2),e.Oqu(t.booking.checked_in?"done":"arrow_back"),e.xp6(2),e.hij(" ",t.booking.checked_in?"Checked in":"Check in"," ")}}function Pe(o,n){1&o&&e._UZ(0,"mat-spinner",34),2&o&&e.Q6J("diameter",32)}function Ke(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.toggleCheckedIn())}),e.YNc(1,ye,5,2,"div",30),e.YNc(2,Pe,1,1,"ng-template",null,31,e.W1O),e.qZA()}if(2&o){const t=e.MAs(3),i=e.oxw(2);e.ekj("bg-green-600",i.booking.checked_in),e.Q6J("disabled",i.checking_in),e.xp6(1),e.Q6J("ngIf",!i.checking_in)("ngIfElse",t)}}function we(o,n){if(1&o&&(e.TgZ(0,"div",26),e.YNc(1,Ke,4,5,"button",27),e.TgZ(2,"button",28)(3,"app-icon"),e._uU(4,"more_horiz"),e.qZA()()()),2&o){const t=e.oxw(),i=e.MAs(46);e.xp6(1),e.Q6J("ngIf",!t.auto_checkin),e.xp6(1),e.Q6J("matMenuTriggerFor",i)}}const qe=function(){return{disable_pan:!0,disable_zoom:!0}};class F{constructor(n,t,i){this._booking=n,this._settings=t,this._org=i,this.edit=new e.vpe,this.remove=new e.vpe,this.booking=this._booking,this.checking_in=!1,this.features=[{location:this.booking?.asset_id,content:re.qL}]}get level(){return this._org.levelWithID(this.booking?.zones||[])}get building(){return this._org.buildings.find(n=>(this.booking?.zones||[]).includes(n.id))}get auto_checkin(){return this._settings.get(`app.${this.booking?.type||"bookings"}.auto_checkin`)}get period(){if(this.booking?.all_day)return"All Day";const n=this.booking?.date||Date.now(),t=this.booking?.duration||60,i=(0,Ie.Z)(n,t),_=(0,Ce.Z)({hours:Math.floor(t/60),minutes:t%60}).replace(" hour","hr").replace(" minute","min");return`${(0,z.Z)(n,"h:mm a")} - ${(0,z.Z)(i,"h:mm a")} (${_})`}toggleCheckedIn(){var n=this;return(0,v.Z)(function*(){n.checking_in=!0,yield(0,O.FD)(n.booking.id,!n.booking.checked_in).toPromise(),n.booking.checked_in=!n.booking.checked_in,(0,f.t5)("Successfully "+(n.booking.checked_in?"checked in":"ended booking")),n.checking_in=!1})()}}F.\u0275fac=function(n){return new(n||F)(e.Y36(T.WI),e.Y36(f.gb),e.Y36(X.w7))},F.\u0275cmp=e.Xpm({type:F,selectors:[["booking-details-modal"]],outputs:{edit:"edit",remove:"remove"},decls:52,vars:37,consts:function(){let o,n;return o=$localize`:␟2c8ce65c566300dc9063f69c615fda2e3a6b896a␟2102851380219026584: Details `,n=$localize`:␟2f3dfd27ad1999e91bb66ad271f967d6e543956f␟834898868131691573:End booking`,[[1,"w-[100vw]","h-[100vh]","sm:relative","sm:inset-auto","sm:w-[51rem]","sm:h-auto","sm:max-h-[80vh]","bg-white","sm:bg-gray-100","sm:dark:bg-neutral-600","dark:bg-neutral-700","sm:rounded","overflow-auto","space-y-2","pb-2"],[1,"sm:flex","flex-col","items-center","pb-4","max-h-screen","sm:max-h-[80vh]","sm:px-16","sm:border-b","bg-white","dark:bg-neutral-700","border-gray-300","dark:border-neutral-500"],["class","h-8 w-full sm:hidden block",4,"ngIf"],["class","bg-black/20 dark:bg-white/20 w-full h-64 sm:rounded-b overflow-hidden",4,"ngIf"],["title","",1,"px-3","mt-2","text-xl","font-medium","w-full"],[1,"sm:flex","items-center","justify-between","w-full"],[1,"flex","m-2"],[1,"flex","items-center","bg-opacity-30","rounded-2xl","p-1","text-sm","space-x-2","pr-2","font-medium"],[1,"rounded-full","h-5","w-5","flex","items-center","justify-center","text-white"],[1,"pr-1"],["actions","","class","flex items-center space-x-2 px-2",4,"ngIf"],[1,"sm:flex","flex-wrap","sm:px-12"],[1,"sm:p-4","sm:bg-white","sm:dark:bg-neutral-700","rounded","sm:m-2","sm:border","border-gray-200","dark:border-neutral-500","flex-grow-[4]","min-w-1/3","sm:w-[16rem]"],[1,"px-3","mt-2","text-lg","font-medium","mb-2"],o,[1,"flex","items-center","px-2","space-x-2"],["map","",1,"mt-4","sm:my-2","h-64","sm:h-48","relative","border","border-gray-200","dark:border-neutral-500","overflow-hidden","rounded","sm:bg-white","m-2","flex-grow-[3]","min-w-1/3","p-2","sm:w-[16rem]"],[1,"pointer-events-none",3,"src","features","options"],["icon","","matRipple","","mat-dialog-close","",1,"absolute","top-0","left-2","bg-black/30","text-white"],["xPosition","before"],["menu","matMenu"],["mat-menu-item","",1,"flex","items-center","space-x-2","text-base",3,"click"],n,[1,"h-8","w-full","sm:hidden","block"],[1,"bg-black/20","dark:bg-white/20","w-full","h-64","sm:rounded-b","overflow-hidden"],[1,"w-full","h-64",3,"images"],["actions","",1,"flex","items-center","space-x-2","px-2"],["btn","","matRipple","","class","flex-1 h-10 border-none",3,"bg-green-600","disabled","click",4,"ngIf"],["icon","","matRipple","",1,"bg-primary","rounded","text-white","h-10","w-10",3,"matMenuTriggerFor"],["btn","","matRipple","",1,"flex-1","h-10","border-none",3,"disabled","click"],["class","flex items-center space-x-2 justify-center",4,"ngIf","ngIfElse"],["loading_state",""],[1,"flex","items-center","space-x-2","justify-center"],[1,"mr-4"],[1,"mx-auto",3,"diameter"]]},template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Ge,1,0,"div",2),e.YNc(3,$e,2,1,"div",3),e.TgZ(4,"h3",4),e._uU(5),e.qZA(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"app-icon"),e._uU(11),e.qZA()(),e.TgZ(12,"div",9),e._uU(13),e.qZA()()(),e.YNc(14,we,5,2,"div",10),e.qZA()(),e.TgZ(15,"div",11)(16,"div",12)(17,"h3",13),e.SDv(18,14),e.qZA(),e.TgZ(19,"div",15)(20,"app-icon"),e._uU(21,"event"),e.qZA(),e.TgZ(22,"div"),e._uU(23),e.ALo(24,"date"),e.qZA()(),e.TgZ(25,"div",15)(26,"app-icon"),e._uU(27,"schedule"),e.qZA(),e.TgZ(28,"div"),e._uU(29),e.qZA()(),e.TgZ(30,"div",15)(31,"app-icon"),e._uU(32,"map"),e.qZA(),e.TgZ(33,"div"),e._uU(34),e.qZA()(),e.TgZ(35,"div",15)(36,"app-icon"),e._uU(37,"place"),e.qZA(),e.TgZ(38,"div"),e._uU(39),e.qZA()()(),e.TgZ(40,"div",16),e._UZ(41,"interactive-map",17),e.qZA()(),e.TgZ(42,"button",18)(43,"app-icon"),e._uU(44,"close"),e.qZA()()(),e.TgZ(45,"mat-menu",19,20)(47,"button",21),e.NdJ("click",function(){return t.remove.emit()}),e.TgZ(48,"app-icon"),e._uU(49,"delete"),e.qZA(),e.TgZ(50,"div"),e.SDv(51,22),e.qZA()()()),2&n&&(e.xp6(2),e.Q6J("ngIf",!(null!=t.booking&&null!=t.booking.extension_data&&null!=t.booking.extension_data.images&&t.booking.extension_data.images.length)),e.xp6(1),e.Q6J("ngIf",null==t.booking||null==t.booking.extension_data||null==t.booking.extension_data.images?null:t.booking.extension_data.images.length),e.xp6(1),e.ekj("pt-4",!(null!=t.booking&&null!=t.booking.extension_data&&t.booking.extension_data.images)),e.xp6(1),e.hij(" ",t.booking.title," "),e.xp6(3),e.ekj("bg-green-600",!t.booking.is_done&&"approved"===(null==t.booking?null:t.booking.status))("bg-yellow-500",!t.booking.is_done&&"tentative"===(null==t.booking?null:t.booking.status))("bg-red-600",!t.booking.is_done&&"declined"===(null==t.booking?null:t.booking.status))("bg-gray-300",t.booking.is_done),e.xp6(1),e.ekj("bg-success",!t.booking.is_done&&"approved"===(null==t.booking?null:t.booking.status))("text-pending",!t.booking.is_done&&"tentative"===(null==t.booking?null:t.booking.status))("bg-error",!t.booking.is_done&&"declined"===(null==t.booking?null:t.booking.status))("text-neutral-600",t.booking.is_done),e.xp6(2),e.hij(" ",t.booking.is_done?"not_interested":"approved"===(null==t.booking?null:t.booking.status)?"done":"tentative"===(null==t.booking?null:t.booking.status)?"warning":"close"," "),e.xp6(2),e.Oqu(t.period),e.xp6(1),e.Q6J("ngIf",!t.booking.is_done),e.xp6(9),e.Oqu(e.xi3(24,33,t.booking.date,"EEEE, dd LLLL y")),e.xp6(6),e.Oqu(t.period),e.xp6(5),e.AsE(" ",(null==t.level?null:t.level.display_name)||(null==t.level?null:t.level.name),", ",t.booking.asset_name||t.booking.asset_id," "),e.xp6(5),e.AsE(" ",(null==t.building?null:t.building.display_name)||(null==t.building?null:t.building.name)," ",null!=t.building&&t.building.address?", "+t.building.address:""," "),e.xp6(2),e.Q6J("src",null==t.level?null:t.level.map_id)("features",t.features)("options",e.DdM(36,qe)))},dependencies:[c.O5,T.ZT,A.Ou,m.o,Q.p,de.K,pe.VK,pe.OP,pe.p6,u.wG,c.uU]});var Je=a(4871),ge=a(565),Ue=a(5845),Xe=a(9885);function ze(o,n){if(1&o&&(e.TgZ(0,"span",6),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij("",t.day,", ")}}function Qe(o,n){if(1&o&&(e.TgZ(0,"h4",3),e.YNc(1,ze,2,1,"span",4),e._uU(2),e.ALo(3,"date"),e.TgZ(4,"span",5),e._uU(5),e.ALo(6,"date"),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.show_day),e.xp6(1),e.hij(" ",e.xi3(3,3,null==t.booking?null:t.booking.date,"h:mm a")," "),e.xp6(3),e.hij("(",e.xi3(6,6,null==t.booking?null:t.booking.date,"z"),")")}}function Ye(o,n){if(1&o&&(e.TgZ(0,"app-icon"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.type)}}function Ve(o,n){if(1&o&&(e.TgZ(0,"div",15)(1,"app-icon"),e._uU(2,"place"),e.qZA(),e.TgZ(3,"div",17),e._uU(4),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(4),e.Oqu(t.location)}}const je=function(){return["./"]},He=function(o){return{booking:o}};function We(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"a",7),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.viewDetails())}),e.TgZ(1,"div",8)(2,"h4",9),e._uU(3),e.qZA(),e.TgZ(4,"div",10)(5,"div",11)(6,"div",12)(7,"app-icon"),e._uU(8),e.qZA()(),e.TgZ(9,"div",13),e._uU(10),e.qZA()()(),e.TgZ(11,"div",14)(12,"div",15),e.YNc(13,Ye,2,1,"app-icon",16),e.TgZ(14,"div",17),e._uU(15),e.qZA()(),e.YNc(16,Ve,5,1,"div",18),e.qZA(),e.TgZ(17,"app-icon",19),e._uU(18," chevron_right "),e.qZA()()()}if(2&o){const t=e.oxw(),i=e.MAs(3);e.Q6J("routerLink",e.DdM(25,je))("queryParams",e.VKq(26,He,null==t.booking?null:t.booking.id)),e.xp6(3),e.Oqu(null==t.booking?null:t.booking.title),e.xp6(2),e.ekj("bg-green-600",!t.booking.is_done&&"approved"===(null==t.booking?null:t.booking.status))("bg-yellow-500",!t.booking.is_done&&"tentative"===(null==t.booking?null:t.booking.status))("bg-red-600",!t.booking.is_done&&"declined"===(null==t.booking?null:t.booking.status))("bg-gray-300",t.booking.is_done),e.xp6(1),e.ekj("bg-success",!t.booking.is_done&&"approved"===(null==t.booking?null:t.booking.status))("text-pending",!t.booking.is_done&&"tentative"===(null==t.booking?null:t.booking.status))("bg-error",!t.booking.is_done&&"declined"===(null==t.booking?null:t.booking.status))("text-neutral-600",t.booking.is_done),e.xp6(2),e.hij(" ",t.booking.is_done?"not_interested":"approved"===(null==t.booking?null:t.booking.status)?"done":"tentative"===(null==t.booking?null:t.booking.status)?"warning":"close"," "),e.xp6(2),e.Oqu(t.period),e.xp6(3),e.Q6J("ngIf","desk"!==t.type)("ngIfElse",i),e.xp6(2),e.hij(" ",(null==t.booking?null:t.booking.description)||(null==t.booking?null:t.booking.asset_id)," "),e.xp6(1),e.Q6J("ngIf",t.location)}}function et(o,n){1&o&&e._UZ(0,"img",20)}class Y extends Je.c{constructor(n,t,i){super(),this._dialog=n,this._route=t,this._org=i,this.show_day=!1,this.edit=new e.vpe,this.remove=new e.vpe}ngOnInit(){this.subscription("route.query",this._route.queryParamMap.subscribe(n=>n.has("booking")&&this.booking?.id===n.get("event")?this.viewDetails():""))}get type(){return"desk"===this.booking?.type?"desk":"parking"===this.booking?.type?"drive_eta":"book"}get day(){const n=this.booking?.date||Date.now();return`${(0,Ue.Z)(Date.now(),n)?"Today":(0,z.Z)(n,"EEEE")}`}get location(){const n=this._org.levelWithID(this.booking?.zones||[]);return`${n?.display_name||n?.name||""}`}get period(){if(this.booking?.all_day)return"All Day";const n=this.booking?.date||Date.now(),t=this.booking?.duration||60,i=(0,Ie.Z)(n,t),_=(0,Ce.Z)({hours:Math.floor(t/60),minutes:t%60}).replace(" hour","hr").replace(" minute","min");return`${(0,z.Z)(n,"h:mm a")} - ${(0,z.Z)(i,"h:mm a")} (${_})`}viewDetails(){!this.booking||this.timeout("open",()=>{const n=this._dialog.open(F,{data:this.booking});this.subscription("edit",n.componentInstance.edit.subscribe(()=>this.edit.emit())),this.subscription("remove",n.componentInstance.remove.subscribe(()=>this.remove.emit()))})}}Y.\u0275fac=function(n){return new(n||Y)(e.Y36(T.uw),e.Y36(Xe.gz),e.Y36(ge.w))},Y.\u0275cmp=e.Xpm({type:Y,selectors:[["booking-card"]],inputs:{booking:"booking",show_day:"show_day"},outputs:{edit:"edit",remove:"remove"},features:[e.qOj],decls:4,vars:2,consts:[["class","mb-2 flex items-center",4,"ngIf"],["name","view-booking-details","class","w-full cursor-pointer overflow-hidden relative",3,"routerLink","queryParams","click",4,"ngIf"],["desk_icon",""],[1,"mb-2","flex","items-center"],["day","",4,"ngIf"],[1,"text-xs","px-2"],["day",""],["name","view-booking-details",1,"w-full","cursor-pointer","overflow-hidden","relative",3,"routerLink","queryParams","click"],[1,"w-full","bg-white","dark:bg-[#1F2021]","rounded-xl","shadow","py-4","relative"],[1,"px-4","text-lg"],[1,"flex","mx-4","my-2"],[1,"flex","items-center","bg-opacity-30","rounded-2xl","p-1","text-base","space-x-2","pr-2","font-medium"],[1,"rounded-full","h-5","w-5","flex","items-center","justify-center","text-white"],[1,"pr-1"],[1,"flex","flex-wrap","flex-col","sm:flex-row","sm:divide-x","divide-neutral-500","py-2","space-y-2","sm:space-y-0"],[1,"flex","items-center","px-4"],[4,"ngIf","ngIfElse"],[1,"mx-2","truncate"],["class","flex items-center px-4",4,"ngIf"],[1,"absolute","top-1/2","right-1","text-4xl","-translate-y-1/2"],["src","assets/icons/desk-outline.svg",1,"w-5","h-5"]],template:function(n,t){1&n&&(e.YNc(0,Qe,7,9,"h4",0),e.YNc(1,We,19,28,"a",1),e.YNc(2,et,1,0,"ng-template",null,2,e.W1O)),2&n&&(e.Q6J("ngIf",t.booking),e.xp6(1),e.Q6J("ngIf",t.booking))},dependencies:[c.O5,m.o,c.uU],styles:["[_nghost-%COMP%]{display:block;width:100%;overflow:hidden;position:relative}\n/*# sourceMappingURL=booking-card.component.ts-angular-inline--69.css.map*/"]});var oe=a(2306),tt=a(9697);function nt(o,n){1&o&&(e.TgZ(0,"button",5)(1,"i",6),e._uU(2,"close"),e.qZA()())}function ot(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",18)(1,"label"),e.SDv(2,19),e.qZA(),e.TgZ(3,"a-user-search-field",20),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw(2);return e.KtG(s.host=_)}),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.host)}}function it(o,n){if(1&o&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.xi3(2,1,t.date,"mediumDate")," ")}}function _t(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"a-date-field",20),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw(2);return e.KtG(s.date=_)}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("ngModel",t.date)}}function st(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",21)(1,"label"),e.SDv(2,22),e.qZA(),e.TgZ(3,"mat-form-field",23)(4,"input",24),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw(2);return e.KtG(s.reason=_)}),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.reason)}}function lt(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"main",7),e.YNc(2,ot,4,1,"div",8),e.TgZ(3,"div",9)(4,"label"),e.SDv(5,10),e.qZA(),e.YNc(6,it,3,4,"div",11),e.YNc(7,_t,1,1,"a-date-field",12),e.qZA(),e.YNc(8,st,5,1,"div",13),e.TgZ(9,"p"),e.SDv(10,14),e.qZA()(),e.TgZ(11,"footer",15)(12,"button",16),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.confirm())}),e.SDv(13,17),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.can_set_host),e.xp6(4),e.Q6J("ngIf",!t.can_set_date),e.xp6(1),e.Q6J("ngIf",t.can_set_date),e.xp6(1),e.Q6J("ngIf",!t.hide_reason),e.xp6(2),e.pQV(1===t.desks.length?"":"s")(t.desk_list)((null==t.level?null:t.level.display_name)||(null==t.level?null:t.level.name)),e.QtT(10)}}function at(o,n){if(1&o&&(e.TgZ(0,"main",25),e._UZ(1,"mat-spinner",26),e.TgZ(2,"p"),e._uU(3),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("diameter",48),e.xp6(2),e.Oqu(t.loading)}}class D{constructor(n,t){this._data=n,this._settings=t,this.event=new e.vpe,this.desks=this._data.desks||[],this.date=this._data.date,this.host=this._data.host,this.can_set_date=this._data.can_set_date,this.reason=this._data.reason,this.level=this._data.level}get desk_list(){return this.desks.map(n=>n.name).join(", ")}get hide_reason(){return!!this._settings.get("app.desks.hide_reason")}get can_set_host(){return!!this._settings.get("app.desks.can_book_for_others")}confirm(){this.loading="Requesting desk booking...",this.event.emit({reason:"done"})}}D.\u0275fac=function(n){return new(n||D)(e.Y36(T.WI),e.Y36(f.gb))},D.\u0275cmp=e.Xpm({type:D,selectors:[["desk-flow-confirm-modal-component"]],outputs:{event:"event"},decls:8,vars:3,consts:function(){let o,n,t,i,_,s;return o=$localize`:␟d513554c23b779e029147a285f1f84f1479488fc␟1554073776118278895:Confirm Booking`,n=$localize`:␟2f933b826a570836cab04f683970a2d22068458c␟3973931101896534797:Date`,t=$localize`:␟5012a6a10d31e79f5865c2fc7f680b84a14accca␟4161419473863623687: Your desk${"\ufffd0\ufffd"}:INTERPOLATION: will be ${"\ufffd1\ufffd"}:INTERPOLATION_1: on ${"\ufffd2\ufffd"}:INTERPOLATION_2: `,i=$localize`:␟68e710782ccb5398b3acb8844caf0b199da2c3da␟9178182467454450952:Confirm`,_=$localize`:␟fe22ca53e651df951dac25b67c17894b0980f767␟6641024648411549335:Host`,s=$localize`:␟4ba250869daa372b54d24fafc0ea934769ee4076␟4775550080689015987:Reason`,[o,[1,"flex-1"],["icon","","mat-dialog-close","",4,"ngIf"],[4,"ngIf","ngIfElse"],["load_state",""],["icon","","mat-dialog-close",""],[1,"material-icons"],[1,"p-4"],["host","","class","flex flex-col",4,"ngIf"],["date","",1,"mb-4"],n,[4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["reason","","class","flex flex-col mb-4",4,"ngIf"],t,[1,"flex","items-center","justify-center","p-2"],["btn","","matRipple","",3,"click"],i,["host","",1,"flex","flex-col"],_,[3,"ngModel","ngModelChange"],["reason","",1,"flex","flex-col","mb-4"],s,["appearance","outline"],["matInput","","placeholder","Reason",3,"ngModel","ngModelChange"],["load","",1,"flex","flex-col","p-12","items-center","justify-center"],[1,"mb-4",3,"diameter"]]},template:function(n,t){if(1&n&&(e.TgZ(0,"header")(1,"h2"),e.SDv(2,0),e.qZA(),e._UZ(3,"div",1),e.YNc(4,nt,3,0,"button",2),e.qZA(),e.YNc(5,lt,14,7,"ng-container",3),e.YNc(6,at,4,2,"ng-template",null,4,e.W1O)),2&n){const i=e.MAs(7);e.xp6(4),e.Q6J("ngIf",!t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading)("ngIfElse",i)}},dependencies:[c.O5,d.Fj,d.JJ,d.On,ce.Nt,M.KE,T.ZT,A.Ou,oe.Q,tt.d,u.wG,c.uU],styles:["main[_ngcontent-%COMP%]{width:24rem;max-width:calc(100vw - 4.5rem)}\n/*# sourceMappingURL=desk-confirm-modal.component.ts-angular-inline--70.css.map*/"]});var Oe=a(4282),ct=a(4702);function rt(o,n){if(1&o&&e._UZ(0,"image-carousel",21),2&o){const t=e.oxw(2);e.Q6J("images",t.desk.images)}}function dt(o,n){if(1&o&&(e.TgZ(0,"div",25)(1,"div",26),e._uU(2),e.qZA()()),2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}const pt=function(){return[]};function gt(o,n){if(1&o&&(e.TgZ(0,"section",22)(1,"h2",10),e.SDv(2,23),e.qZA(),e.YNc(3,dt,3,1,"div",24),e.qZA()),2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",t.desk.features||e.DdM(1,pt))}}const ut=function(){return{disable_pan:!0,disable_zoom:!0}};function ft(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"section",2),e.YNc(2,rt,1,1,"image-carousel",3),e.TgZ(3,"button",4),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.close.emit())}),e.TgZ(4,"app-icon"),e._uU(5,"arrow_back"),e.qZA()(),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.toggleFav.emit())}),e.TgZ(7,"app-icon"),e._uU(8),e.qZA()()(),e.TgZ(9,"div",6)(10,"section",7)(11,"h2",8),e._uU(12),e.qZA()(),e.TgZ(13,"section",9)(14,"h2",10),e._uU(15,"Details"),e.qZA(),e.TgZ(16,"div",11)(17,"app-icon"),e._uU(18,"person"),e.qZA(),e.TgZ(19,"p"),e.SDv(20,12),e.qZA()(),e.TgZ(21,"div",11)(22,"app-icon"),e._uU(23,"desk"),e.qZA(),e.TgZ(24,"p"),e._uU(25),e.qZA()(),e.TgZ(26,"div",11)(27,"app-icon"),e._uU(28,"place"),e.qZA(),e.TgZ(29,"p"),e._uU(30),e.qZA()()(),e.YNc(31,gt,4,2,"section",13),e.TgZ(32,"section",14),e._UZ(33,"interactive-map",15),e.qZA()(),e.TgZ(34,"div",16)(35,"button",17),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return _.active=!_.active,e.KtG(_.activeChange.emit(_.active))}),e.TgZ(36,"div",18)(37,"app-icon",19),e._uU(38),e.qZA(),e.TgZ(39,"p"),e.SDv(40,20),e.qZA()()()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(1),e.ekj("sm:h-64",null==t.desk.images?null:t.desk.images.length)("h-40",null==t.desk.images?null:t.desk.images.length)("sm:h-0",!(null!=t.desk.images&&t.desk.images.length))("h-12",!(null!=t.desk.images&&t.desk.images.length))("!bg-transparent",!(null!=t.desk.images&&t.desk.images.length)),e.xp6(1),e.Q6J("ngIf",null==t.desk.images?null:t.desk.images.length),e.xp6(4),e.ekj("text-white",!t.fav)("text-blue-400",t.fav),e.xp6(2),e.Oqu(t.fav?"favorite":"favorite_border"),e.xp6(4),e.hij(" ",t.desk.display_name||t.desk.name||t.desk.id," "),e.xp6(13),e.hij(" ",t.desk.display_name||t.desk.name||t.desk.id," "),e.xp6(5),e.Oqu((null==t.desk.zone?null:t.desk.zone.display_name)||(null==t.desk.zone?null:t.desk.zone.name)),e.xp6(1),e.Q6J("ngIf",null==t.desk.features?null:t.desk.features.length),e.xp6(2),e.Q6J("src",t.map_url)("features",t.features)("options",e.DdM(27,ut)),e.xp6(2),e.ekj("inverse",t.active),e.xp6(3),e.Oqu(t.active?"remove":"add"),e.xp6(2),e.pQV(t.active),e.QtT(40)}}function mt(o,n){1&o&&(e.TgZ(0,"div",27)(1,"p",28),e.SDv(2,29),e.qZA()())}class k{constructor(){this.fav=!1,this.active=!1,this.close=new e.vpe,this.toggleFav=new e.vpe,this.activeChange=new e.vpe,this.map_url="",this.features=[]}ngOnChanges(n){n.desk&&this.desk&&this.updateFeature()}updateFeature(){this.map_url=this.desk.zone.map_id,this.features=[{location:this.desk.map_id||this.desk.id,content:ct.q}]}}k.\u0275fac=function(n){return new(n||k)},k.\u0275cmp=e.Xpm({type:k,selectors:[["desk-details"]],inputs:{desk:"desk",fav:"fav",active:"active"},outputs:{close:"close",toggleFav:"toggleFav",activeChange:"activeChange"},features:[e.TTD],decls:3,vars:2,consts:function(){let o,n,t,i,_;return o=$localize`:␟f3cd229363e020d7ceb13bb351bb87f86dda78ef␟6431414344811875961:Single desk`,n=$localize`:␟193cbdbbcae6ad83fa2f2ac8d7dcb6b41c384a89␟2952235329246771628:{VAR_SELECT, select, true {Remove from booking } false {Add to booking }}`,n=e.Zx4(n,{VAR_SELECT:"\ufffd0\ufffd"}),t=$localize`:␟fc6b8194e480db3111367487d3a97bdf5a6333a7␟5607930927273386767: ${n}:ICU: `,i=$localize`:␟bf10c600bd861cfd0a23f4759562ee0ae9dbe19f␟1551920764795208868:Facilities`,_=$localize`:␟c6efe811f5410838382ce9adb2636cb75d783ebc␟4621791550614740403: Select a desk to view it's details `,[[4,"ngIf","ngIfElse"],["emptyState",""],["image","",1,"relative","w-full","bg-black/20"],["class","absolute inset-0",3,"images",4,"ngIf"],["icon","","matRipple","","name","close-desk-details",1,"absolute","top-2","left-2","bg-black/40","sm:hidden","text-white",3,"click"],["icon","","matRipple","","name","toggle-desk-favourite-details",1,"absolute","top-2","right-2","bg-black/40",3,"click"],[1,"p-2","space-y-2","flex-1","h-[calc(100%-19.75rem)]","overflow-auto"],["actions","",1,"z-0","pb-2","border-b"],[1,"text-xl","font-medium","mb-2","mt-4"],["details","",1,"space-y-2","pb-2","border-b","dark:border-neutral-500"],[1,"text-xl","font-medium"],[1,"flex","items-center","space-x-2"],o,["facilities","","class","space-y-2 pb-2 border-b dark:border-neutral-500",4,"ngIf"],["map","",1,"w-full","mx-auto","h-64","sm:h-48","relative","border","border-gray-200","dark:border-neutral-500","overflow-hidden","rounded"],[1,"pointer-events-none",3,"src","features","options"],[1,"px-2","pt-2","pb-[5.5rem]","border-t","border-gray-200","dark:border-neutral-500","shadow","sm:hidden"],["btn","","matRipple","","name","toggle-desk-details",1,"w-full",3,"click"],[1,"flex","items-center","justify-center"],[1,"text-2xl"],t,[1,"absolute","inset-0",3,"images"],["facilities","",1,"space-y-2","pb-2","border-b","dark:border-neutral-500"],i,["class","flex items-center flex-wrap space-x-2",4,"ngFor","ngForOf"],[1,"flex","items-center","flex-wrap","space-x-2"],["for","feat",1,"flex-1","w-1/2"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"],_]},template:function(n,t){if(1&n&&(e.YNc(0,ft,41,28,"ng-container",0),e.YNc(1,mt,3,0,"ng-template",null,1,e.W1O)),2&n){const i=e.MAs(2);e.Q6J("ngIf",t.desk)("ngIfElse",i)}},dependencies:[c.sg,c.O5,m.o,Q.p,de.K,u.wG],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:30%;min-width:20rem;height:100%;min-height:65vh;background:white}\n/*# sourceMappingURL=desk-details.component.ts-angular-inline--71.css.map*/"]});var ie=a(3200),St=a(312),N=a(8929),_e=a(4865),ue=a(1022),fe=a(7303),V=a(7371),Tt=a(8699);function It(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.close())}),e.TgZ(1,"app-icon"),e._uU(2,"keyboard_arrow_left"),e.qZA()()}}function Ct(o,n){if(1&o&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.display_name||t.name," ")}}const j=function(){return{standalone:!0}};function Ot(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",30)(1,"label"),e.SDv(2,31),e.qZA(),e.TgZ(3,"mat-form-field",32)(4,"mat-select",33),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.building=_)})("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.setOptions({zone_id:null==_?null:_.id}))}),e.YNc(5,Ct,2,2,"mat-option",34),e.ALo(6,"async"),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.building)("ngModelOptions",e.DdM(5,j)),e.xp6(1),e.Q6J("ngForOf",e.lcZ(6,3,t.buildings))}}function Et(o,n){if(1&o&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.display_name||t.name," ")}}function Lt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",30)(1,"label"),e._uU(2,"Level"),e.qZA(),e.TgZ(3,"mat-form-field",36)(4,"mat-select",37),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.setOptions({zone_id:_||s.building.id}))}),e.YNc(5,Et,2,2,"mat-option",34),e.ALo(6,"async"),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("disabled",!t.building)("ngModelOptions",e.DdM(5,j)),e.xp6(1),e.Q6J("ngForOf",e.lcZ(6,3,t.levels))}}function Nt(o,n){1&o&&(e.TgZ(0,"div",38)(1,"mat-checkbox",39),e.SDv(2,40),e.qZA()())}const Mt=function(){return[]};function vt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",44)(1,"div",45),e._uU(2),e.qZA(),e.TgZ(3,"mat-checkbox",46),e.NdJ("ngModelChange",function(_){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.setFeature(l,_))}),e.ALo(4,"async"),e.qZA()()}if(2&o){const t=n.$implicit,i=e.oxw(2);let _;e.xp6(2),e.Oqu(t),e.xp6(1),e.Q6J("ngModel",((null==(_=e.lcZ(4,3,i.options))?null:_.features)||e.DdM(5,Mt)).includes(t))("ngModelOptions",e.DdM(6,j))}}function bt(o,n){if(1&o&&(e.TgZ(0,"section",41)(1,"h2",8),e.SDv(2,42),e.qZA(),e.YNc(3,vt,5,7,"div",43),e.ALo(4,"async"),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",e.lcZ(4,1,t.features))}}function ht(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",47)(1,"button",48),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.close())}),e.SDv(2,49),e.qZA()()}}class b{constructor(n,t,i,_){this._bsheet_ref=n,this._state=t,this._org=i,this._settings=_,this.can_close=!1,this.options=this._state.options,this.features=this._state.features,this.buildings=this._org.active_buildings,this.levels=this._org.active_levels,this.form=this._state.form,this.close=()=>this._bsheet_ref.dismiss(),this.setOptions=s=>this._state.setOptions(s),this.setFeature=(s,l)=>this._state.setFeature(s,l),this.setLevel=s=>{},this.can_close=!!this._bsheet_ref}get building(){return this._org.building}set building(n){this._org.building=n}get allow_time_changes(){return!!this._settings.get("app.desks.allow_time_changes")}get allow_all_day(){return this.allow_time_changes&&!!this._settings.get("app.desks.allow_all_day")}get end_date(){return(0,ie.Z)((0,St.Z)(Date.now(),this._settings.get("app.desks.available_period")||90))}}function At(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",13)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"button",14),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.setFeature(s,!1))}),e.TgZ(4,"app-icon"),e._uU(5,"close"),e.qZA()()()}if(2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}function Ft(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",15)(1,"span"),e.SDv(2,16),e.qZA(),e.TgZ(3,"button",17),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.setOptions({show_fav:!1}))}),e.TgZ(4,"app-icon"),e._uU(5,"close"),e.qZA()()()}}b.\u0275fac=function(n){return new(n||b)(e.Y36(_e.oL,8),e.Y36(N.f),e.Y36(ge.w),e.Y36(f.gb))},b.\u0275cmp=e.Xpm({type:b,selectors:[["desk-filters"]],decls:43,vars:36,consts:function(){let o,n,t,i,_,s,l,r,p,I,L;return o=$localize`:␟a42190bd19b1cc93828e70bd0ef7a119f4c22aca␟7734428352389083660:Desk Filters`,n=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,t=$localize`:␟2f933b826a570836cab04f683970a2d22068458c␟3973931101896534797:Date`,i=$localize`:␟7c0a71d337783e527c1c8e91e433b301c5b1d8a8␟4204880191779081093:Start Time`,_=$localize`:␟e1f10d9bf4d3c37490cd5bf82007444ae7af46b1␟3845185958891849368:End Time`,s=$localize`:␟bde3d9fd949ba4c6014b8e64c1362753bca1cf0c␟5010873675481014004: ${"\ufffd0\ufffd"}:INTERPOLATION: `,l=$localize`:␟cd942cf7297cb47f1a116efdedff1c8547c6ea3e␟5737771872454551963: ${"\ufffd0\ufffd"}:INTERPOLATION: `,r=$localize`:␟6e8be3c170a661414dbcf0e4be5ce2ba65f62615␟5782981899482871069:Building`,p=$localize`:␟d7f43e20f3a729fa3de32bc7a1f709ccd722eae5␟835486935962207481: All Day `,I=$localize`:␟f61c6867295f3b53d23557021f2f4e0aa1d0b8fc␟8650499415827640724:Type`,L=$localize`:␟c17e2cc448524a39eb83b2937cea3235a2e8bf37␟2296888311792137027: Apply Filters `,[[1,"flex","rounded-t-md","items-center","border-b","border-gray-200","dark:border-neutral-500","pb-2","sm:p-4"],[1,"flex-1","pl-2"],["icon","","matRipple","","name","close-desk-filters","class","sm:hidden",3,"click",4,"ngIf"],[1,"font-medium","flex-2","text-center"],o,[1,"flex-1"],[1,"max-h-[65vh]","p-2","overflow-y-auto","overflow-x-hidden","divide-y","divide-gray-200","w-full","max-w-[100vw]","sm:max-w-[30vw]",3,"formGroup"],["details",""],[1,"text-lg","font-medium"],n,["class","flex-1 min-w-[256px] flex flex-col",4,"ngIf"],[1,"flex-1","min-w-[256px]"],t,["name","date","formControlName","date",3,"to"],[1,"flex","items-center","space-x-2"],[1,"flex-1","w-1/3"],i,["name","start-time",3,"ngModel","ngModelOptions","ngModelChange"],_,["formControlName","duration",3,"time","max","min","step","disabled"],["class","flex justify-end -mt-2 mb-2",4,"ngIf"],["favs","",1,"space-y-2","pb-4"],s,[1,"flex","items-center"],["for","fav",1,"flex-1","w-1/2"],l,["name","fav",3,"ngModel","ngModelOptions","ngModelChange"],["class","space-y-2","features","",4,"ngIf"],["class","px-2 py-2 w-full border-t border-gray-200",4,"ngIf"],["icon","","matRipple","","name","close-desk-filters",1,"sm:hidden",3,"click"],[1,"flex-1","min-w-[256px]","flex","flex-col"],r,["appearance","outline",1,"w-full"],["name","building","placeholder","Select building",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["appearance","outline"],["placeholder","Any Level","ngModel","",3,"disabled","ngModelOptions","ngModelChange"],[1,"flex","justify-end","-mt-2","mb-2"],["formControlName","all_day"],p,["features","",1,"space-y-2"],I,["class","flex items-center flex-wrap space-x-2",4,"ngFor","ngForOf"],[1,"flex","items-center","flex-wrap","space-x-2"],["for","feat",1,"flex-1","w-1/2"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"px-2","py-2","w-full","border-t","border-gray-200"],["btn","","matRipple","","name","apply-desk-filters",1,"w-full",3,"click"],L]},template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,It,3,0,"button",2),e.qZA(),e.TgZ(3,"h3",3),e.SDv(4,4),e.qZA(),e._UZ(5,"div",5),e.qZA(),e.TgZ(6,"form",6)(7,"section",7)(8,"h2",8),e.SDv(9,9),e.qZA(),e.YNc(10,Ot,7,6,"div",10),e.ALo(11,"async"),e.YNc(12,Lt,7,6,"div",10),e.ALo(13,"async"),e.TgZ(14,"div",11)(15,"label"),e.SDv(16,12),e.qZA(),e.TgZ(17,"a-date-field",13),e._uU(18),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"div",14)(21,"div",15)(22,"label"),e.SDv(23,16),e.qZA(),e.TgZ(24,"a-time-field",17),e.NdJ("ngModelChange",function(_){return t.form.patchValue({date:_})}),e.qZA()(),e.TgZ(25,"div",15)(26,"label"),e.SDv(27,18),e.qZA(),e._UZ(28,"a-duration-field",19),e.qZA()(),e.YNc(29,Nt,3,0,"div",20),e.qZA(),e.TgZ(30,"section",21)(31,"h2",8),e.SDv(32,22),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"div",23)(35,"div",24),e.SDv(36,25),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"mat-checkbox",26),e.NdJ("ngModelChange",function(_){return t.setOptions({show_fav:_})}),e.ALo(39,"async"),e.qZA()()(),e.YNc(40,bt,5,3,"section",27),e.ALo(41,"async"),e.qZA(),e.YNc(42,ht,3,0,"div",28)),2&n){let i,_,s,l,r;e.xp6(2),e.Q6J("ngIf",t.can_close),e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(4),e.Q6J("ngIf",null==(i=e.lcZ(11,20,t.buildings))?null:i.length),e.xp6(2),e.Q6J("ngIf",(null==(_=e.lcZ(13,22,t.levels))?null:_.length)>1),e.xp6(5),e.Q6J("to",t.end_date),e.xp6(1),e.hij(" ",e.lcZ(19,24,"FORM.DATE_ERROR")," "),e.xp6(6),e.Q6J("ngModel",t.form.value.date)("ngModelOptions",e.DdM(34,j)),e.xp6(4),e.Q6J("time",null==(s=t.form.get("date"))?null:s.value)("max",720)("min",60)("step",60)("disabled",t.form.value.all_day),e.xp6(1),e.Q6J("ngIf",t.allow_all_day),e.xp6(4),e.pQV(e.lcZ(33,26,"COMMON.FAVOURITES")),e.QtT(32),e.xp6(4),e.pQV(e.lcZ(37,28,"DESKS.SHOW_FAVOURITES")),e.QtT(36),e.xp6(1),e.Q6J("ngModel",null==(l=e.lcZ(39,30,t.options))?null:l.show_fav)("ngModelOptions",e.DdM(35,j)),e.xp6(2),e.Q6J("ngIf",null==(r=e.lcZ(41,32,t.features))?null:r.length),e.xp6(2),e.Q6J("ngIf",t.can_close)}},dependencies:[c.sg,c.O5,d._Y,d.JJ,d.JL,d.On,d.sg,d.u,M.KE,ne.oG,u.ey,oe.Q,ue.B,fe.N,m.o,V.gD,u.wG,c.Ov,Tt.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:100vw}\n/*# sourceMappingURL=desk-filters.component.ts-angular-inline--72.css.map*/"]});const Dt=function(){return[]};class x extends f.cx{constructor(n,t){super(),this._bsheet=n,this._state=t,this.view="list",this.viewChange=new e.vpe,this.options=this._state.options,this.setOptions=i=>this._state.setOptions(i),this.setFeature=(i,_)=>this._state.setFeature(i,_),this.editFilter=()=>this._bsheet.open(b)}get start(){return this._state.form.value.date}get end(){const{date:n,duration:t,all_day:i}=this._state.form.value;return i?(0,ie.Z)(n):n+60*t*1e3}}x.\u0275fac=function(n){return new(n||x)(e.Y36(_e.ch),e.Y36(N.f))},x.\u0275cmp=e.Xpm({type:x,selectors:[["desk-filters-display"]],inputs:{view:"view"},outputs:{viewChange:"viewChange"},features:[e.qOj],decls:20,vars:23,consts:function(){let o,n,t,i;return o=$localize`:␟19eaa5cd51d70d9ea957eecac78cfd811e9b93d8␟5208858215712453646: Filters `,n=$localize`:␟992a9a6a193a56c5b8846dc972c5e1977ee5f1aa␟8553228906889869186: Map `,t=$localize`:␟4b286e90831dd637c5cd3eb20544664ee7112669␟7787942140742011951: List `,i=$localize`:␟d6ad8326be48837fe776a268abc758d1c7ba4f05␟1305804744685886428:Favourites Only`,[["actions","",1,"sm:hidden","space-x-2","flex","flex-row","items-center","p-2"],["btn","","matRipple","","name","edit-desk-filters",1,"flex-1","w-1/2",3,"click"],o,[1,"flex","items-center"],["btn","","matRipple","","name","view-desk-map",1,"rounded-l","rounded-r-none",3,"click"],n,["btn","","matRipple","","name","view-desk-list",1,"rounded-r","rounded-l-none",3,"click"],t,["filters","",1,"flex","items-center","flex-wrap","p-2"],["filter-item","","date",""],["filter-item","","time",""],["filter-item","","features","",4,"ngFor","ngForOf"],["filter-item","",4,"ngIf"],["filter-item","","features",""],["icon","","matRipple","","name","remove-desk-filter",1,"-mr-4",3,"click"],["filter-item",""],i,["icon","","matRipple","","name","remove-desk-favs-filter",1,"-mr-4",3,"click"]]},template:function(n,t){if(1&n&&(e.TgZ(0,"section",0)(1,"button",1),e.NdJ("click",function(){return t.editFilter()}),e.SDv(2,2),e.qZA(),e.TgZ(3,"div",3)(4,"button",4),e.NdJ("click",function(){return t.view="map",t.viewChange.emit(t.view)}),e.SDv(5,5),e.qZA(),e.TgZ(6,"button",6),e.NdJ("click",function(){return t.view="list",t.viewChange.emit(t.view)}),e.SDv(7,7),e.qZA()()(),e.TgZ(8,"section",8)(9,"div",9),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"div",10),e._uU(13),e.ALo(14,"date"),e.ALo(15,"date"),e.qZA(),e.YNc(16,At,6,1,"div",11),e.ALo(17,"async"),e.YNc(18,Ft,6,0,"div",12),e.ALo(19,"async"),e.qZA()),2&n){let i,_;e.xp6(4),e.ekj("inverse","map"!==t.view),e.xp6(2),e.ekj("inverse","list"!==t.view),e.xp6(4),e.Oqu(e.xi3(11,9,t.start,"mediumDate")),e.xp6(3),e.AsE(" ",e.xi3(14,12,t.start,"shortTime")," \u2014 ",e.xi3(15,15,t.end,"shortTime")," "),e.xp6(3),e.Q6J("ngForOf",(null==(i=e.lcZ(17,18,t.options))?null:i.features)||e.DdM(22,Dt)),e.xp6(2),e.Q6J("ngIf",null==(_=e.lcZ(19,20,t.options))?null:_.show_fav)}},dependencies:[c.sg,c.O5,m.o,u.wG,c.Ov,c.uU],styles:["[filter-item][_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 1rem;height:2rem;font-size:.875rem;border:1px solid rgba(0,0,0,.2);border-radius:1.25rem;margin-right:.5rem;margin-bottom:.5rem}[filter-item][_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.1)}[filter-item][_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:.5rem}\n/*# sourceMappingURL=desk-filters-display.component.ts-angular-inline--73.css.map*/"]});var Ee=a(7716),E=a(6942);function kt(o,n){1&o&&(e.TgZ(0,"div",22)(1,"app-icon"),e._uU(2,"done"),e.qZA()())}function xt(o,n){if(1&o&&e._UZ(0,"img",23),2&o){const t=e.oxw().$implicit;e.Q6J("src",t.images[0],e.LSH)}}function Rt(o,n){1&o&&e._UZ(0,"img",24)}function Zt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"li",10)(1,"button",11),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.selectDesk(s))}),e.TgZ(2,"div",12),e.YNc(3,kt,3,0,"div",13),e.YNc(4,xt,1,1,"img",14),e.YNc(5,Rt,1,0,"ng-template",null,15,e.W1O),e.qZA(),e.TgZ(7,"div",16)(8,"span",17),e._uU(9),e.qZA(),e.TgZ(10,"div",18)(11,"app-icon",19),e._uU(12,"place"),e.qZA(),e.TgZ(13,"p",20),e._uU(14),e.qZA()()()(),e.TgZ(15,"button",21),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.toggleFav.emit(s))}),e.TgZ(16,"app-icon"),e._uU(17),e.qZA()()()}if(2&o){const t=n.$implicit,i=e.MAs(6),_=e.oxw(3);e.ekj("!border-blue-400",_.active===t.id),e.xp6(3),e.Q6J("ngIf",_.selected.includes(t.id)),e.xp6(1),e.Q6J("ngIf",null==t.images?null:t.images.length)("ngIfElse",i),e.xp6(5),e.hij(" ",t.name||t.id||"Desk"," "),e.xp6(5),e.hij(" ",(null==t.zone?null:t.zone.display_name)||(null==t.zone?null:t.zone.name)||"<No Level>"," "),e.xp6(1),e.ekj("text-blue-400",_.isFavourite(t.id)),e.xp6(2),e.Oqu(_.isFavourite(t.id)?"favorite":"favorite_border")}}function Bt(o,n){if(1&o&&(e.TgZ(0,"ul",8),e.YNc(1,Zt,18,10,"li",9),e.ALo(2,"async"),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.desks))}}function Gt(o,n){if(1&o&&(e.ynx(0),e.YNc(1,Bt,3,3,"ul",7),e.ALo(2,"async"),e.BQk()),2&o){const t=e.oxw(),i=e.MAs(10);let _;e.xp6(1),e.Q6J("ngIf",null==(_=e.lcZ(2,2,t.desks))?null:_.length)("ngIfElse",i)}}function $t(o,n){1&o&&(e.TgZ(0,"div",25),e._UZ(1,"mat-spinner",26),e.TgZ(2,"p",27),e._uU(3,"Finding available desks..."),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("diameter",32))}function yt(o,n){1&o&&(e.TgZ(0,"div",28)(1,"p",29),e._uU(2," No available desk for selected time and/or filters "),e.qZA()())}class R{constructor(n){this._state=n,this.active="",this.selected="",this.favorites=[],this.onSelect=new e.vpe,this.toggleFav=new e.vpe,this.desks=(0,Ee.aj)([this._state.options,this._state.available_assets]).pipe((0,E.U)(([{show_fav:t},i])=>i.filter(_=>!t||this.isFavourite(_.id)))),this.loading=this._state.loading}isFavourite(n){return this.favorites.includes(n)}selectDesk(n){this.onSelect.emit(n)}}function Pt(o,n){if(1&o&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.display_name||t.name," ")}}R.\u0275fac=function(n){return new(n||R)(e.Y36(N.f))},R.\u0275cmp=e.Xpm({type:R,selectors:[["desk-list"]],inputs:{active:"active",selected:"selected",favorites:"favorites"},outputs:{onSelect:"onSelect",toggleFav:"toggleFav"},decls:11,vars:7,consts:function(){let o,n;return o=$localize`:␟80ed5b776a26a78099e230e0e89d96c33ba44e24␟5968132631442328843:Results`,n=$localize`:␟99a2ae2a83b9fba5f9d4547746782447904ccf7b␟1931205204318295377: ${"\ufffd0\ufffd"}:INTERPOLATION: result(s) found `,[[1,"font-bold"],o,["count","",1,"text-sm","opacity-60","mb-4"],n,[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],["class","list-style-none space-y-2",4,"ngIf","ngIfElse"],[1,"list-style-none","space-y-2"],["desk","","class","relative rounded-lg w-full shadow border bg-white dark:bg-neutral-600 border-gray-200 dark:border-neutral-500 overflow-hidden",3,"!border-blue-400",4,"ngFor","ngForOf"],["desk","",1,"relative","rounded-lg","w-full","shadow","border","bg-white","dark:bg-neutral-600","border-gray-200","dark:border-neutral-500","overflow-hidden"],["name","select-desk","matRipple","",1,"w-full","h-full","flex","p-2",3,"click"],[1,"relative","w-20","h-20","rounded-xl","bg-black/20","mr-4","flex","items-center","justify-center"],["class","absolute top-1 left-1 border border-white bg-black/50 rounded-full h-6 w-6 flex items-center justify-center text-white",4,"ngIf"],["class","object-cover h-full",3,"src",4,"ngIf","ngIfElse"],["placeholder",""],[1,"space-y-2","pt-2","flex-1","text-left"],[1,"font-medium"],[1,"flex","items-center","text-sm","space-x-2"],[1,"text-blue-500"],[1,"text-xs"],["icon","","matRipple","","name","toggle-desk-favourite",1,"absolute","top-1","right-1",3,"click"],[1,"absolute","top-1","left-1","border","border-white","bg-black/50","rounded-full","h-6","w-6","flex","items-center","justify-center","text-white"],[1,"object-cover","h-full",3,"src"],["src","assets/icons/desk-placeholder.svg",1,"m-auto"],["loading","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"],[1,"opacity-30"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"]]},template:function(n,t){if(1&n&&(e.TgZ(0,"h3",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"p",2),e.SDv(3,3),e.ALo(4,"async"),e.qZA(),e.YNc(5,Gt,3,4,"ng-container",4),e.ALo(6,"async"),e.YNc(7,$t,4,1,"ng-template",null,5,e.W1O),e.YNc(9,yt,3,0,"ng-template",null,6,e.W1O)),2&n){const i=e.MAs(8);let _,s;e.xp6(4),e.pQV((null==(_=e.lcZ(4,3,t.desks))?null:_.length)||0),e.QtT(3),e.xp6(1),e.Q6J("ngIf",!(null!=(s=e.lcZ(6,5,t.loading))&&s.length))("ngIfElse",i)}},dependencies:[c.sg,c.O5,A.Ou,m.o,u.wG,c.Ov],styles:["[_nghost-%COMP%]{width:100%;height:100%;padding:.5rem;background:rgba(0,0,0,.05);overflow-y:auto}\n/*# sourceMappingURL=desk-list.component.ts-angular-inline--74.css.map*/"]});const Kt=function(){return{standalone:!0}};class Z extends f.cx{constructor(n){super(),this._state=n,this.is_displayed=!1,this.onSelect=new e.vpe,this.desks=this._state.available_assets,this.loading=this._state.loading,this.zoom=1,this.center={x:.5,y:.5},this.setOptions=t=>this._state.setOptions(t),this.levels=this._state.available_assets.pipe((0,E.U)(t=>(0,f.Tw)(t.map(i=>i.zone),"id"))),this.actions=this._state.available_assets.pipe((0,E.U)(t=>t.map(i=>({id:i.map_id||i.id,action:["touchend","mouseup"],callback:()=>this.selectDesk(i)})))),this.features=this._state.available_assets.pipe((0,E.U)(t=>t.map(i=>({location:i.map_id||i.id,content:'<span class="flex h-4 w-4 rounded-full absolute top-1/4 left-1/4 transform -translate-x-1/2 -translate-y-1/2 border-[3px] shadow" >\n                            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-800 opacity-75"></span>\n                            <span class="relative inline-flex rounded-full h-full w-full bg-green-800"></span>\n                        </span>'}))))}get map_url(){return this.level?.map_id||""}ngOnInit(){this.subscription("levels_update",this.levels.subscribe(n=>{n.find(t=>t.id===this.level?.id)||(this.level=n[0])}))}selectDesk(n){this.onSelect.emit(n)}setZoom(n){this.zoom=Math.max(.5,Math.min(10,n))}resetMap(){this.zoom=1,this.center={x:.5,y:.5}}}function wt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"desk-list",29),e.NdJ("toggleFav",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.toggleFavourite(_))})("onSelect",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.displayed=_)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("active",null==t.displayed?null:t.displayed.id)("selected",t.selected_ids)("favorites",t.favorites)}}function qt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.displayed=null)}),e.SDv(1,31),e.qZA()}}function Jt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"desk-map",32),e.NdJ("onSelect",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.displayed=_)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("is_displayed",!!t.displayed)}}Z.\u0275fac=function(n){return new(n||Z)(e.Y36(N.f))},Z.\u0275cmp=e.Xpm({type:Z,selectors:[["desk-map"]],inputs:{is_displayed:"is_displayed"},outputs:{onSelect:"onSelect"},features:[e.qOj],decls:20,vars:15,consts:[[3,"src","zoom","center","features","actions","zoomChange","centerChange"],[1,"absolute","inset-x-0","top-0","bg-white","p-2","border-b","border-gray-200"],["levels","","appearance","outline",1,"w-full","h-[3.25rem]"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["zoom","",1,"absolute","bottom-2","right-2","rounded-lg","border","border-gray-200","bg-white","flex","flex-col","overflow-hidden"],["zoom-in","","icon","","matRipple","",3,"click"],[1,"border-t","border-gray-200","w-full"],["zoom-out","","icon","","matRipple","",3,"click"],["reset","","icon","","matRipple","",3,"click"],[3,"value"]],template:function(n,t){1&n&&(e.TgZ(0,"i-map",0),e.NdJ("zoomChange",function(_){return t.zoom=_})("centerChange",function(_){return t.center=_}),e.ALo(1,"async"),e.ALo(2,"async"),e.qZA(),e.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"mat-select",3),e.NdJ("ngModelChange",function(_){return t.level=_}),e.YNc(6,Pt,2,2,"mat-option",4),e.ALo(7,"async"),e.qZA()()(),e.TgZ(8,"div",5)(9,"button",6),e.NdJ("click",function(){return t.setZoom(1.1*t.zoom)}),e.TgZ(10,"app-icon"),e._uU(11,"zoom_in"),e.qZA()(),e._UZ(12,"div",7),e.TgZ(13,"button",8),e.NdJ("click",function(){return t.setZoom(t.zoom*(1/1.1))}),e.TgZ(14,"app-icon"),e._uU(15,"zoom_out"),e.qZA()(),e._UZ(16,"div",7),e.TgZ(17,"button",9),e.NdJ("click",function(){return t.resetMap()}),e.TgZ(18,"app-icon"),e._uU(19,"refresh"),e.qZA()()()),2&n&&(e.Q6J("src",t.map_url)("zoom",t.zoom)("center",t.center)("features",e.lcZ(1,8,t.features))("actions",e.lcZ(2,10,t.actions)),e.xp6(5),e.Q6J("ngModel",t.level)("ngModelOptions",e.DdM(14,Kt)),e.xp6(1),e.Q6J("ngForOf",e.lcZ(7,12,t.levels)))},dependencies:[c.sg,d.JJ,d.On,M.KE,u.ey,m.o,Q.p,V.gD,u.wG,c.Ov],styles:["[_nghost-%COMP%]{position:relative;background:rgba(0,0,0,.05);padding-top:4rem}button[_ngcontent-%COMP%]{border-radius:0}\n/*# sourceMappingURL=desk-map.component.ts-angular-inline--75.css.map*/"]});const B="favourite_desks";class G{constructor(n,t,i,_){this._dialog_ref=n,this._settings=t,this._event_form=i,this._data=_,this.selected=[],this.view="list",this.selected=[..._.items||[]],this._event_form.setOptions(_.options)}get selected_ids(){return this.selected.map(n=>n.id).join(",")}get favorites(){return this._settings.get(B)||[]}isSelected(n){return n&&this.selected_ids.includes(n)}setSelected(n,t){const i=this.selected.filter(_=>_.id!==n.id);t&&i.push(n),this.selected=i,!this._data.options.group&&t&&this._dialog_ref.close([n])}toggleFavourite(n){const t=this.favorites;t.includes(n.id)?this._settings.saveUserSetting(B,t.filter(_=>_!==n.id)):this._settings.saveUserSetting(B,[...t,n.id])}}G.\u0275fac=function(n){return new(n||G)(e.Y36(T.so),e.Y36(f.gb),e.Y36(N.f),e.Y36(T.WI))},G.\u0275cmp=e.Xpm({type:G,selectors:[["desk-select-modal"]],decls:39,vars:25,consts:function(){let o,n,t,i,_,s;return o=$localize`:␟4221741642af22ed8e17ee106c326def85e70c61␟1749010714240797250:Find Desk`,n=$localize`:␟30d3439b0e0095fe69503245f3bd7a2e9498be7c␟8443571736703532556: View List `,t=$localize`:␟18843b85d1a4f17fefafd07bc5cde636dca44295␟819716823718458903:Back to form`,i=$localize`:␟f566e50852be3f327b040870cbf63b59ea3b8d8c␟3611851363359647609: ${"\ufffd0\ufffd"}:INTERPOLATION: desk(s) added `,_=$localize`:␟f45c34c7afdabef75762747a20f4113d65eb2312␟6426755559249487826: ${"\ufffd0\ufffd"}:INTERPOLATION: `,s=$localize`:␟ccda1d41ca79703a85a3a598c1d97e040a32b766␟874721418273731876: Back `,[[1,"w-[100vw]","h-[100vh]","sm:relative","sm:w-auto","sm:h-auto","flex","flex-col","bg-white","dark:bg-neutral-700"],[1,"flex","items-center","space-x-4","w-full"],["icon","","mat-dialog-close","",1,"bg-black/20"],o,[1,"hidden","sm:flex","items-center","justify-end","flex-1"],["btn","","matRipple","","name","view-desk-map",1,"rounded-l","rounded-r-none",3,"click"],["btn","","matRipple","","name","view-desk-list",1,"rounded-r","rounded-l-none",3,"click"],[1,"flex-1","flex","items-center","divide-x","divide-gray-200","dark:divide-neutral-500","min-h-[65vh]","h-[65vh]","sm:max-h-[65vh]","sm:max-w-[95vw]","w-full","overflow-hidden"],[1,"h-full","hidden","sm:flex","max-w-[20rem]","sm:h-[65vh]","sm:max-h-full"],[1,"flex","flex-col","items-center","flex-1","w-1/2","h-full","sm:h-[65vh]"],[1,"w-full","border-b","border-gray-200","dark:border-neutral-500",3,"view","viewChange"],["class","flex-1 h-1/2 bg-black/5 dark:bg-white/10",3,"active","selected","favorites","toggleFav","onSelect",4,"ngIf","ngIfElse"],[1,"h-full","w-full","sm:h-[65vh]","absolute","sm:relative","sm:flex","sm:max-w-[20rem]","z-20","bg-white","dark:bg-neutral-600","block",3,"desk","active","fav","activeChange","toggleFav","close"],[1,"flex","sm:hidden","flex-col-reverse","items-center","justify-end","px-2","pt-2","pb-[5.5rem]","border-t","border-gray-200","dark:border-neutral-500","w-full"],["btn","","matRipple","","name","desk-return","class","inverse sm:hidden w-full",3,"click",4,"ngIf"],["btn","","matRipple","","name","save-desks",1,"w-full","sm:w-32","sm:mb-0",3,"mat-dialog-close"],n,[1,"hidden","sm:flex","items-center","justify-between","p-2","border-t","border-gray-200","dark:border-neutral-500","w-full"],["btn","","matRipple","","name","desk-return",1,"clear","text-primary",3,"mat-dialog-close"],[1,"flex","items-center"],[1,"text-xl"],[1,"mr-1","underline"],t,[1,"opacity-60","text-sm"],i,["btn","","matRipple","","name","toggle-desk",3,"disabled","click"],[1,"mr-1"],_,["map_view",""],[1,"flex-1","h-1/2","bg-black/5","dark:bg-white/10",3,"active","selected","favorites","toggleFav","onSelect"],["btn","","matRipple","","name","desk-return",1,"inverse","sm:hidden","w-full",3,"click"],s,[1,"flex-1","h-1/2","w-full",3,"is_displayed","onSelect"]]},template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"header",1)(2,"button",2)(3,"app-icon"),e._uU(4,"close"),e.qZA()(),e.TgZ(5,"h3"),e.SDv(6,3),e.qZA(),e.TgZ(7,"div",4)(8,"button",5),e.NdJ("click",function(){return t.view="map"}),e._uU(9," Map "),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return t.view="list"}),e._uU(11," List "),e.qZA()()(),e.TgZ(12,"main",7),e._UZ(13,"desk-filters",8),e.TgZ(14,"div",9)(15,"desk-filters-display",10),e.NdJ("viewChange",function(_){return t.view=_}),e.qZA(),e.YNc(16,wt,1,3,"desk-list",11),e.qZA(),e.TgZ(17,"desk-details",12),e.NdJ("activeChange",function(_){return t.setSelected(t.displayed,_)})("toggleFav",function(){return t.toggleFavourite(t.displayed)})("close",function(){return t.displayed=null}),e.qZA()(),e.TgZ(18,"footer",13),e.YNc(19,qt,2,0,"button",14),e.TgZ(20,"button",15),e.SDv(21,16),e.qZA()(),e.TgZ(22,"footer",17)(23,"button",18)(24,"div",19)(25,"app-icon",20),e._uU(26,"arrow_back"),e.qZA(),e.TgZ(27,"div",21),e.SDv(28,22),e.qZA()()(),e.TgZ(29,"p",23),e.SDv(30,24),e.qZA(),e.TgZ(31,"button",25),e.NdJ("click",function(){return t.setSelected(t.displayed,!t.isSelected(null==t.displayed?null:t.displayed.id))}),e.TgZ(32,"div",19)(33,"app-icon",20),e._uU(34),e.qZA(),e.TgZ(35,"div",26),e.SDv(36,27),e.qZA()()()()(),e.YNc(37,Jt,1,1,"ng-template",null,28,e.W1O)),2&n){const i=e.MAs(38);e.xp6(8),e.ekj("inverse","map"!==t.view),e.xp6(2),e.ekj("inverse","list"!==t.view),e.xp6(5),e.Q6J("view",t.view),e.xp6(1),e.Q6J("ngIf","list"===t.view)("ngIfElse",i),e.xp6(1),e.ekj("hidden",!t.displayed)("inset-0",t.displayed),e.Q6J("desk",t.displayed)("active",t.selected_ids.includes(null==t.displayed?null:t.displayed.id))("fav",t.displayed&&t.favorites.includes(null==t.displayed?null:t.displayed.id)),e.xp6(2),e.Q6J("ngIf",t.displayed),e.xp6(1),e.ekj("mb-2",t.displayed),e.Q6J("mat-dialog-close",t.selected),e.xp6(3),e.Q6J("mat-dialog-close",t.selected),e.xp6(7),e.pQV(t.selected.length),e.QtT(30),e.xp6(1),e.ekj("inverse",t.isSelected(null==t.displayed?null:t.displayed.id)),e.Q6J("disabled",!t.displayed),e.xp6(3),e.Oqu(t.isSelected(null==t.displayed?null:t.displayed.id)?"remove":"add"),e.xp6(2),e.pQV(t.isSelected(null==t.displayed?null:t.displayed.id)?"Remove from Booking":"Add to booking"),e.QtT(36)}},dependencies:[c.O5,T.ZT,m.o,u.wG,k,b,x,R,Z],encapsulation:2});var me=a(5670),Le=a(8296),Ut=a(3245),Xt=a(711),Se=a(8550);function zt(o,n){if(1&o&&(e.TgZ(0,"mat-option",46),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.display_name||t.name," ")}}const Qt=function(){return{standalone:!0}};function Yt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",14)(1,"label",42),e.tHW(2,43),e._UZ(3,"span"),e.N_p(),e.qZA(),e.TgZ(4,"mat-form-field",28)(5,"mat-select",44),e.NdJ("ngModelChange",function(_){e.CHM(t);const s=e.oxw(4);return e.KtG(s.form.patchValue({zones:[_]}))}),e.YNc(6,zt,2,2,"mat-option",45),e.ALo(7,"async"),e.qZA()()()}if(2&o){const t=e.oxw(4);e.xp6(5),e.Q6J("ngModel",t.form.value.zones[0])("ngModelOptions",e.DdM(5,Qt)),e.xp6(1),e.Q6J("ngForOf",e.lcZ(7,3,t.buildings))}}function Vt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"mat-option",47),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(4);return e.KtG(l.setVisitor(s))}),e.TgZ(1,"div",48)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",49),e._uU(5),e.qZA()()()}if(2&o){const t=n.$implicit;e.Q6J("value",t.name),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.AsE(" ",t.email," ",t.company?"| "+t.company:""," ")}}function jt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"mat-option",47),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(4);return e.KtG(l.setVisitor(s))}),e.TgZ(1,"div",48)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",49),e._uU(5),e.qZA()()()}if(2&o){const t=n.$implicit;e.Q6J("value",t.email),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.AsE(" ",t.email," ",t.company?"| "+t.company:""," ")}}function Ht(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"form",12),e.YNc(1,Yt,8,6,"div",13),e.TgZ(2,"div",14)(3,"label",15),e.tHW(4,16),e._UZ(5,"span"),e.N_p(),e.qZA(),e._UZ(6,"a-date-field",17),e.qZA(),e.TgZ(7,"div",18)(8,"div",19)(9,"label",20),e.tHW(10,21),e._UZ(11,"span"),e.N_p(),e.qZA(),e._UZ(12,"a-time-field",22),e.qZA(),e.TgZ(13,"div",19)(14,"label",23),e.tHW(15,24),e._UZ(16,"span"),e.N_p(),e.qZA(),e._UZ(17,"a-duration-field",25),e.qZA()(),e.TgZ(18,"div",14)(19,"label",26),e.tHW(20,27),e._UZ(21,"span"),e.N_p(),e.qZA(),e.TgZ(22,"mat-form-field",28)(23,"input",29),e.NdJ("focus",function(){e.CHM(t);const _=e.oxw(3);return e.KtG(_.filterVisitors(_.form.value.asset_name))}),e.qZA()(),e.TgZ(24,"mat-autocomplete",null,30),e.YNc(26,Vt,6,4,"mat-option",31),e.qZA()(),e.TgZ(27,"div",14)(28,"label",32),e.tHW(29,33),e._UZ(30,"span"),e.N_p(),e.qZA(),e.TgZ(31,"mat-form-field",28)(32,"input",34),e.NdJ("focus",function(){e.CHM(t);const _=e.oxw(3);return e.KtG(_.filterVisitors(_.form.value.asset_id))}),e.qZA(),e.TgZ(33,"mat-error"),e.SDv(34,35),e.qZA()(),e.TgZ(35,"mat-autocomplete",null,36),e.YNc(37,jt,6,4,"mat-option",31),e.qZA()(),e.TgZ(38,"div",14)(39,"label",26),e.SDv(40,37),e.qZA(),e.TgZ(41,"mat-form-field",28),e._UZ(42,"input",38),e.qZA()(),e.TgZ(43,"div",14)(44,"label",39),e.SDv(45,40),e.qZA(),e.TgZ(46,"mat-form-field",28),e._UZ(47,"input",41),e.qZA()()()}if(2&o){const t=e.MAs(25),i=e.MAs(36),_=e.oxw(3);e.Q6J("formGroup",_.form),e.xp6(1),e.Q6J("ngIf",(null==_.buildings?null:_.buildings.length)>1),e.xp6(16),e.Q6J("time",_.form.value.date),e.xp6(6),e.Q6J("matAutocomplete",t),e.xp6(3),e.Q6J("ngForOf",_.filtered_visitors),e.xp6(6),e.Q6J("matAutocomplete",i),e.xp6(5),e.Q6J("ngForOf",_.filtered_visitors)}}function Wt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"h2",6),e.SDv(3,7),e.qZA()(),e.YNc(4,Ht,48,7,"form",8),e.TgZ(5,"div",9)(6,"button",10),e.NdJ("click",function(){e.CHM(t);const _=e.oxw(2);return e.KtG(_.sendInvite())}),e.SDv(7,11),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("ngIf",t.form)}}function en(o,n){if(1&o&&(e.ynx(0),e.YNc(1,Wt,8,1,"div",3),e.ALo(2,"async"),e.BQk()),2&o){const t=e.oxw(),i=e.MAs(4);e.xp6(1),e.Q6J("ngIf",!e.lcZ(2,2,t.loading))("ngIfElse",i)}}function tn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",50)(1,"div",51)(2,"h2",52),e.SDv(3,53),e.qZA(),e._UZ(4,"img",54),e.TgZ(5,"p"),e.tHW(6,55),e._UZ(7,"i"),e.ALo(8,"date"),e.ALo(9,"date"),e.N_p(),e.qZA()(),e.TgZ(10,"div",56)(11,"div",57)(12,"button",58),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.onDone())}),e.SDv(13,59),e.qZA(),e.TgZ(14,"button",58),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.sent=!1)}),e.SDv(15,60),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(3),e.pQV((null==t.last_success?null:t.last_success.asset_name)||(null==t.last_success?null:t.last_success.asset_id)),e.QtT(3),e.xp6(6),e.pQV((null==t.last_success?null:t.last_success.asset_name)||(null==t.last_success?null:t.last_success.asset_id))((null==t.building?null:t.building.display_name)||(null==t.building?null:t.building.name))(e.xi3(8,5,null==t.last_success?null:t.last_success.date,"mediumDate"))(e.xi3(9,8,null==t.last_success?null:t.last_success.date,"shortTime")),e.QtT(6)}}function nn(o,n){1&o&&(e.TgZ(0,"div",61),e._UZ(1,"mat-spinner",62),e.TgZ(2,"p"),e.SDv(3,63),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("diameter",32))}class H extends f.cx{constructor(n,t,i){super(),this._service=n,this._settings=t,this._org=i,this.done=new e.vpe,this.sent=!1,this.loading=this._service.loading,this.buildings=this._org.active_buildings,this.last_success=this._service.last_success,this.visitors=[],this.filtered_visitors=[]}get building(){return this._org.building}get form(){return this._service.form}ngOnInit(){var n=this;return(0,v.Z)(function*(){n.sent=!1,n._service.clearOldState(),yield n.initFormZone(),n.form.get("asset_id").setValidators([d.kI.required,d.kI.email]);const t=n._settings.get("visitor-invitees")||[];for(const i of t){const[_,s,l]=i.split("|");n.visitors.push({email:_,name:s,company:l})}n.filterVisitors(""),n.subscription("email",n.form.get("asset_id").valueChanges.subscribe(i=>n.filterVisitors(i))),n.subscription("name",n.form.get("asset_name").valueChanges.subscribe(i=>n.filterVisitors(i)))})()}setVisitor(n){this.form.patchValue({asset_id:n.email,asset_name:n.name,company:n.company})}filterVisitors(n){const t=n.toLowerCase();this.filtered_visitors=this.visitors.filter(({email:i,name:_,company:s})=>i.toLowerCase().includes(t)||_.toLowerCase().includes(t)||s.toLowerCase().includes(t))}onDone(){this.done.emit(),this.sent=!1}sendInvite(){var n=this;return(0,v.Z)(function*(){if(n.form.markAllAsTouched(),!n.form.valid)return(0,Le.cB)(`Some fields are invalid. [${(0,Ut.RD)(n.form)}]`);const{asset_id:t,asset_name:i,company:_}=n.form.value,s=`${t}|${i}|${_}`,l=n._settings.get("visitor-invitees")||[];n._settings.saveUserSetting("visitor-invitees",[...l.filter(p=>!p.includes(t)),s]);const r=n.form.value;n.form.patchValue({name:r.asset_name,attendees:[new Xt.n5({name:r.asset_name,email:r.asset_id,organisation:r.company})]}),n.booking=yield n._service.postForm().catch(p=>{throw(0,Le.cB)(p),p}),n.last_success=n._service.last_success,yield n.initFormZone(),n.sent=!0})()}initFormZone(){var n=this;return(0,v.Z)(function*(){yield n._org.initialised.pipe((0,me.P)(t=>t)).toPromise(),n._service.setOptions({type:"visitor"}),n.form.patchValue({zones:[n._org.building?.id]})})()}}function on(o,n){if(1&o&&e._UZ(0,"image-carousel",25),2&o){const t=e.oxw(2);e.Q6J("images",t.space.images)}}H.\u0275fac=function(n){return new(n||H)(e.Y36(N.f),e.Y36(f.gb),e.Y36(ge.w))},H.\u0275cmp=e.Xpm({type:H,selectors:[["invite-visitor-form"]],outputs:{done:"done"},features:[e.qOj],decls:5,vars:2,consts:function(){let o,n,t,i,_,s,l,r,p,I,L,g,le,C,ae,he,Ae;return o=$localize`:␟5ce047ca92a7474d89cf5b08a9913b0a93d28404␟4809719174148656467:Invite Visitor`,n=$localize`:␟207022d8123aa7a8693ff4c53cd28fea3d5bdff2␟994966389368964414: Send Visitor Invite `,t=$localize`:␟04cfb5fd033651743bc4b9408bd52ba4ee894070␟3158758063619980932:Date${"\ufffd#5\ufffd"}:START_TAG_SPAN:*${"\ufffd/#5\ufffd"}:CLOSE_TAG_SPAN:`,i=$localize`:␟eac10bd97a4b6b06a0221c661de781836b7a1e1c␟145741817832495807: Start Time${"\ufffd#11\ufffd"}:START_TAG_SPAN:*${"\ufffd/#11\ufffd"}:CLOSE_TAG_SPAN:`,_=$localize`:␟85d5c3a89bab9a7475a7db095089e161586cb7a1␟5960185837188220843:End Time${"\ufffd#16\ufffd"}:START_TAG_SPAN:*${"\ufffd/#16\ufffd"}:CLOSE_TAG_SPAN:`,s=$localize`:␟cf671ca02377cd191d8b3c68c7befb5984469f16␟4464638374806874490:Visitor Name${"\ufffd#21\ufffd"}:START_TAG_SPAN:*${"\ufffd/#21\ufffd"}:CLOSE_TAG_SPAN:`,l=$localize`:␟6d94427b2307c85d5a1179f6bd7dfdd6b65813ec␟8511396184262742071: Visitor Email${"\ufffd#30\ufffd"}:START_TAG_SPAN:*${"\ufffd/#30\ufffd"}:CLOSE_TAG_SPAN:`,r=$localize`:␟66a4553914df830f0bc1dd1f0a42c57fd85864de␟6407494155279173358:A valid email is required`,p=$localize`:␟6ef0619a37140118b9e640c6cc36ee4e9fb4372a␟1826215573205981970:Company`,I=$localize`:␟8aaaa9966e2e05be99e9b239f3b257767366b8bf␟495507623260232513:Reason for visit`,L=$localize`:␟029554be61f13a5f5f40b24ff6a076e8cf3ce232␟5030059473688609624:Building${"\ufffd#3\ufffd"}:START_TAG_SPAN:*${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN:`,g=$localize`:␟a2a7f73f9ff1df08f9f055ead8f1b25a91c060a3␟4333771954088602266:Select building`,le=$localize`:␟b48da24e0c6d5c2a77da5e461d6617fb0bf29443␟3601699416285298060: Visitor invite sent to ${"\ufffd0\ufffd"}:INTERPOLATION: `,C=$localize`:␟947d16f767358cd30c3747bc33d7202b1d4c7f34␟7358174424653803527: Invite has been sent to ${"\ufffd#7\ufffd"}:START_ITALIC_TEXT:${"\ufffd0\ufffd"}:INTERPOLATION:${"\ufffd/#7\ufffd"}:CLOSE_ITALIC_TEXT: to attend ${"\ufffd1\ufffd"}:INTERPOLATION_1: from ${"\ufffd2\ufffd"}:INTERPOLATION_2: at ${"\ufffd3\ufffd"}:INTERPOLATION_3: `,ae=$localize`:␟af6a082ad33b2635f588016703e454c8fb7f7e0f␟7858372686370953213: Great, thanks `,he=$localize`:␟63356c3f7d6177e1e29a68e272010f75eacb3c97␟3676425961094889121: Book Another Visitor `,Ae=$localize`:␟59c7bf21621b0422b39735ebc6af2ccb26d894e3␟6183159301460846057:Sending invitation...`,[[4,"ngIf","ngIfElse"],["send_state",""],["load_state",""],["class","relative flex flex-col bg-white dark:bg-neutral-700 overflow-auto max-h-full",4,"ngIf","ngIfElse"],[1,"relative","flex","flex-col","bg-white","dark:bg-neutral-700","overflow-auto","max-h-full"],[1,"w-full","border-b","border-gray-200","dark:border-neutral-500","px-4","py-2"],[1,"text-2xl"],o,["class","p-4",3,"formGroup",4,"ngIf"],[1,"sticky","p-4","border-t","bg-white","border-gray-200","dark:border-neutral-500","bottom-0"],["btn","","matRipple","","send","",1,"w-full","sm:w-auto",3,"click"],n,[1,"p-4",3,"formGroup"],["class","flex flex-col",4,"ngIf"],[1,"flex","flex-col"],["for","date"],t,["name","date","formControlName","date"],[1,"flex","items-center","space-x-2"],[1,"flex-1","flex","flex-col","w-1/3"],["for","start-time"],i,["name","start-time","formControlName","date"],["for","end-time"],_,["name","end-time","formControlName","duration",3,"time"],["for","visitor-name"],s,["appearance","outline"],["matInput","","name","visitor-name","formControlName","asset_name","placeholder","Name of the visitor",3,"matAutocomplete","focus"],["name_auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["for","visitor-email"],l,["matInput","","name","visitor-email","type","email","formControlName","asset_id","placeholder","Email of the visitor",3,"matAutocomplete","focus"],r,["email_auto","matAutocomplete"],p,["matInput","","name","company","formControlName","company","placeholder","Company of the visitor"],["for","reason"],I,["name","reason","matInput","","formControlName","description","placeholder","e.g. Meeting Catchup"],["for","building"],L,["name","building","placeholder",g,3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"value","click"],[1,"flex","flex-col","leading-tight"],[1,"text-xs","opacity-60"],["sent","",1,"absolute","inset-0","bg-white","dark:bg-neutral-700","flex","flex-col","items-center","justify-center","text-center"],[1,"w-full","max-w-[32rem]","flex-1","h-1/2","space-y-2","m-8"],[1,"text-3xl"],le,["src","assets/icons/sent.svg",1,"mx-auto"],C,[1,"w-full","p-2","border-t","border-gray-200","dark:border-neutral-500"],[1,"mx-auto","flex","items-center","space-x-2","w-full","max-w-[32rem]"],["matRipple","",1,"flex-1",3,"click"],ae,he,["loading","",1,"relative","flex","flex-col","items-center","justify-center","rounded","overflow-hidden","w-full","h-full","min-h-[18rem]"],[3,"diameter"],Ae]},template:function(n,t){if(1&n&&(e.YNc(0,en,3,4,"ng-container",0),e.YNc(1,tn,16,11,"ng-template",null,1,e.W1O),e.YNc(3,nn,4,1,"ng-template",null,2,e.W1O)),2&n){const i=e.MAs(2);e.Q6J("ngIf",!t.sent)("ngIfElse",i)}},dependencies:[c.sg,c.O5,d._Y,d.Fj,d.JJ,d.JL,d.On,d.sg,d.u,ce.Nt,M.KE,M.TO,A.Ou,Se.XC,u.ey,Se.ZL,oe.Q,ue.B,fe.N,V.gD,u.wG,c.Ov,c.uU]});const _n=function(){return{disable_pan:!0,disable_zoom:!0}};function sn(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"section",2),e.YNc(2,on,1,1,"image-carousel",3),e.TgZ(3,"button",4),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.close.emit())}),e.TgZ(4,"app-icon"),e._uU(5,"arrow_back"),e.qZA()(),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.toggleFav.emit())}),e.TgZ(7,"app-icon"),e._uU(8),e.qZA()()(),e.TgZ(9,"div",6)(10,"section",7)(11,"h2",8),e._uU(12),e.qZA()(),e._UZ(13,"hr"),e.TgZ(14,"section",9)(15,"h2",10),e.SDv(16,11),e.qZA(),e.TgZ(17,"div",12)(18,"app-icon"),e._uU(19,"people"),e.qZA(),e.TgZ(20,"p"),e.SDv(21,13),e.qZA()(),e.TgZ(22,"div",12)(23,"app-icon"),e._uU(24,"meeting_room"),e.qZA(),e.TgZ(25,"p"),e._uU(26),e.qZA()(),e.TgZ(27,"div",12)(28,"app-icon"),e._uU(29,"place"),e.qZA(),e.TgZ(30,"p"),e._uU(31),e.qZA()()(),e._UZ(32,"hr"),e.TgZ(33,"section",14)(34,"h2",10),e.SDv(35,15),e.qZA(),e.TgZ(36,"div",12)(37,"app-icon"),e._uU(38,"people"),e.qZA(),e.TgZ(39,"p"),e.SDv(40,16),e.qZA()(),e.TgZ(41,"div",12)(42,"app-icon"),e._uU(43,"restaurant"),e.qZA(),e.TgZ(44,"p"),e.SDv(45,17),e.qZA()(),e.TgZ(46,"div",12)(47,"app-icon"),e._uU(48,"edit"),e.qZA(),e.TgZ(49,"p"),e.SDv(50,18),e.qZA()()(),e.TgZ(51,"section",19),e._UZ(52,"interactive-map",20),e.qZA()(),e.TgZ(53,"div",21)(54,"button",22),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return _.active=!_.active,e.KtG(_.activeChange.emit(_.active))}),e.TgZ(55,"div",23)(56,"app-icon",24),e._uU(57),e.qZA(),e.TgZ(58,"p"),e._uU(59),e.qZA()()()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(1),e.ekj("sm:h-40",null==t.space.images?null:t.space.images.length)("h-64",null==t.space.images?null:t.space.images.length)("sm:h-0",!(null!=t.space.images&&t.space.images.length))("h-12",!(null!=t.space.images&&t.space.images.length))("!bg-transparent",!(null!=t.space.images&&t.space.images.length)),e.xp6(1),e.Q6J("ngIf",null==t.space.images?null:t.space.images.length),e.xp6(4),e.ekj("text-white",!t.fav)("text-blue-400",t.fav),e.xp6(2),e.Oqu(t.fav?"favorite":"favorite_border"),e.xp6(4),e.hij(" ",t.space.display_name||t.space.name," "),e.xp6(9),e.pQV(t.space.capacity),e.QtT(21),e.xp6(5),e.hij(" ",(null==t.level?null:t.level.display_name)||(null==t.level?null:t.level.name)," "),e.xp6(5),e.hij(" ",(null==t.building?null:t.building.address)||(null==t.building?null:t.building.display_name)||(null==t.building?null:t.building.name)," "),e.xp6(21),e.Q6J("src",t.map_url)("features",t.features)("options",e.DdM(27,_n)),e.xp6(2),e.ekj("inverse",t.active),e.xp6(3),e.Oqu(t.active?"remove":"add"),e.xp6(2),e.hij(" ",t.active?"Remove this room":"Add this room"," ")}}function ln(o,n){1&o&&(e.TgZ(0,"div",26)(1,"p",27),e.SDv(2,28),e.qZA()())}class ${constructor(n){this._org=n,this.fav=!1,this.active=!1,this.activeChange=new e.vpe,this.close=new e.vpe,this.toggleFav=new e.vpe,this.map_url="",this.features=[]}get level(){return this._org.levelWithID([this.space?.zone.id])||this.space?.zone}get building(){return this._org.buildings.find(n=>this.space?.zone.id===n.id||this.space?.zone.parent_id===n.id)}ngOnChanges(n){n.space&&this.space&&this._updateFeature()}_updateFeature(){this.map_url=this.level?.map_id,this.features=[{location:this.space?.map_id,content:re.qL}]}}$.\u0275fac=function(n){return new(n||$)(e.Y36(X.w7))},$.\u0275cmp=e.Xpm({type:$,selectors:[["parking-space-details"]],inputs:{space:"space",fav:"fav",active:"active"},outputs:{activeChange:"activeChange",close:"close",toggleFav:"toggleFav"},features:[e.TTD],decls:3,vars:2,consts:function(){let o,n,t,i,_,s,l;return o=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,n=$localize`:␟2fe5caca246424da5e7fcee12a1fe341335e1286␟2731085793954892186:${"\ufffd0\ufffd"}:INTERPOLATION: People`,t=$localize`:␟45b5b90d7df8adeb648858761739fa700117c0d5␟3223773701700202859:Room Facilities`,i=$localize`:␟49db2433248cbe017b956cb5baefb0196dd788f1␟2658260878259066313:WiFi Available`,_=$localize`:␟551b6a6b5ecee7d32448ac4ef3a1fb883dd8e13c␟8309048761278776852:Catering Available`,s=$localize`:␟9169207ff2581dc7ac8b9125088b0cb3dc789824␟3473226617663475632:Whiteboard`,l=$localize`:␟2d39d1ca65d735d7f800e458ce54af6a25652395␟7182911930527299079: Select a space to view it's details `,[[4,"ngIf","ngIfElse"],["empty_state",""],["image","",1,"relative","w-full","bg-black/20"],["class","absolute inset-0",3,"images",4,"ngIf"],["icon","","matRipple","","close","",1,"absolute","top-2","left-2","bg-black/40","sm:hidden","text-white",3,"click"],["icon","","matRipple","","fav","",1,"absolute","top-2","right-2","bg-black/40",3,"click"],[1,"p-2","space-y-2","flex-1","h-1/2","overflow-auto"],["actions","",1,"z-0"],[1,"text-xl","font-medium","mb-2","mt-4"],["details","",1,"space-y-2"],[1,"text-xl","font-medium"],o,[1,"flex","items-center","space-x-2"],n,["facilities","",1,"space-y-2"],t,i,_,s,["map","",1,"w-full","mx-auto","h-64","sm:h-48","relative","border","border-gray-200","overflow-hidden","rounded"],[1,"pointer-events-none",3,"src","features","options"],[1,"p-2","border-t","border-gray-200","shadow","sm:hidden"],["btn","","matRipple","",1,"w-full",3,"click"],[1,"flex","items-center","justify-center"],[1,"text-2xl"],[1,"absolute","inset-0",3,"images"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"],l]},template:function(n,t){if(1&n&&(e.YNc(0,sn,60,28,"ng-container",0),e.YNc(1,ln,3,0,"ng-template",null,1,e.W1O)),2&n){const i=e.MAs(2);e.Q6J("ngIf",t.space)("ngIfElse",i)}},dependencies:[c.O5,m.o,Q.p,de.K,u.wG],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:30%;min-width:20rem;height:100%;min-height:65vh}\n/*# sourceMappingURL=parking-details.component.ts-angular-inline--76.css.map*/"]});var Ne=a(9830),Me=a(3910);function an(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.close())}),e.TgZ(1,"app-icon"),e._uU(2,"keyboard_arrow_left"),e.qZA()()}}function cn(o,n){if(1&o&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE(" ",t.bld,", ",t.display_name||t.name," ")}}const se=function(){return{standalone:!0}};function rn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",42),e._uU(2),e.qZA(),e.TgZ(3,"mat-checkbox",43),e.NdJ("ngModelChange",function(_){const l=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.toggleFeature(l,_))}),e.ALo(4,"async"),e.qZA()()}if(2&o){const t=n.$implicit,i=e.oxw(2);let _;e.xp6(2),e.Oqu(t),e.xp6(1),e.Q6J("ngModel",null==(_=e.lcZ(4,3,i.options))||null==_.features?null:_.features.includes(t))("ngModelOptions",e.DdM(5,se))}}function dn(o,n){if(1&o&&(e.TgZ(0,"section",39)(1,"h2",8),e.SDv(2,40),e.qZA(),e.YNc(3,rn,5,6,"div",41),e.ALo(4,"async"),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",e.lcZ(4,1,t.features))}}function pn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",44)(1,"button",45),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.close())}),e.SDv(2,46),e.qZA()()}}class h{constructor(n,t,i,_){this._bsheet_ref=n,this._settings=t,this._form=i,this._org=_,this.can_close=!1,this.options=this._form.options,this.levels=this._org.level_list.pipe((0,E.U)(s=>{for(const l of s){const r=this._org.buildings.find(p=>p.id===l.parent_id);l.bld=r?.display_name||r?.name||""}return s})),this.features=this._form.features,this.close=()=>this._bsheet_ref.dismiss(),this.setOptions=s=>this._form.setOptions(s),this.can_close=!!this._bsheet_ref}get bld(){return this._org.building}get form(){return this._form.form}get max_duration(){return this._settings.get("app.events.max_duration")||480}toggleFeature(n,t){var i=this;return(0,v.Z)(function*(){const{features:_}=yield i.options.pipe((0,Me.q)(1)).toPromise(),s=(_||[]).filter(l=>n!==l);t&&s.push(n),i.setOptions({features:s})})()}}function gn(o,n){if(1&o&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.location," ")}}function un(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",16)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"button",17),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.removeFeature(s))}),e.TgZ(4,"app-icon"),e._uU(5,"close"),e.qZA()()()}if(2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}h.\u0275fac=function(n){return new(n||h)(e.Y36(_e.oL,8),e.Y36(f.gb),e.Y36(N.f),e.Y36(X.w7))},h.\u0275cmp=e.Xpm({type:h,selectors:[["parking-space-filters"]],decls:46,vars:26,consts:function(){let o,n,t,i,_,s,l,r,p,I,L;return o=$localize`:␟36173168a4643aa78634e9242a63f3a40862f166␟7173310086383878456:Space Filters`,n=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,t=$localize`:␟ed31c09fd77c36238c13d83635f3fe5294c733d2␟471816275243265264:Location`,i=$localize`:␟04cfb5fd033651743bc4b9408bd52ba4ee894070␟3158758063619980932:Date${"\ufffd#21\ufffd"}:START_TAG_SPAN:*${"\ufffd/#21\ufffd"}:CLOSE_TAG_SPAN:`,_=$localize`:␟e06c2195d60fdee7b259bd3ff16eb3d594c42b2b␟608708688936992021: Date and time must be in the future `,s=$localize`:␟34a7595cdc15925514038224946986bfd90dc0ed␟3039786638368843634:Start Time${"\ufffd#28\ufffd"}:START_TAG_SPAN:*${"\ufffd/#28\ufffd"}:CLOSE_TAG_SPAN:`,l=$localize`:␟85d5c3a89bab9a7475a7db095089e161586cb7a1␟5960185837188220843:End Time${"\ufffd#33\ufffd"}:START_TAG_SPAN:*${"\ufffd/#33\ufffd"}:CLOSE_TAG_SPAN:`,r=$localize`:␟62ab0c2bf8d16ce7baf2c8b1da2c561d99522256␟4158925728608139729:Favourites`,p=$localize`:␟ac378c0b437746af89a84b4909ab5b83c5ff55a3␟165958440274527719: Only show favourite spaces `,I=$localize`:␟bf10c600bd861cfd0a23f4759562ee0ae9dbe19f␟1551920764795208868:Facilities`,L=$localize`:␟c17e2cc448524a39eb83b2937cea3235a2e8bf37␟2296888311792137027: Apply Filters `,[[1,"flex","items-center","border-b","border-gray-200","pb-2","sm:hidden"],[1,"flex-1","pl-2"],["icon","","matRipple","","close","",3,"click",4,"ngIf"],[1,"font-medium","flex-2","text-center"],o,[1,"flex-1"],[1,"max-h-[65vh]","p-2","overflow-y-auto","overflow-x-hidden","divide-y","divide-gray-200","w-full","max-w-[100vw]",3,"formGroup"],["details",""],[1,"text-lg","font-medium"],n,[1,"flex-1","min-w-[256px]","flex","flex-col"],["for","location"],t,["appearance","outline",1,"w-full"],["name","location",3,"ngModel","ngModelOptions","placeholder","multiple","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-1","min-w-[256px]"],["for","date"],i,["name","date","formControlName","date"],_,[1,"flex","items-center","space-x-2"],[1,"flex-1","w-1/3"],["for","start-time"],s,["name","start-time",3,"ngModel","ngModelOptions","ngModelChange"],["for","end-time"],l,["name","end-time","formControlName","duration",3,"time","max"],["favs","",1,"space-y-2","pb-4"],r,[1,"flex","items-center"],["for","fav",1,"flex-1","w-1/2"],p,["name","fav",3,"ngModel","ngModelOptions","ngModelChange"],["features","","class","space-y-2",4,"ngIf"],["class","px-2 pt-2 w-full border-t border-gray-200",4,"ngIf"],["icon","","matRipple","","close","",3,"click"],[3,"value"],["features","",1,"space-y-2"],I,["class","flex items-center",4,"ngFor","ngForOf"],["for","feat",1,"flex-1","w-1/2"],["name","feat",3,"ngModel","ngModelOptions","ngModelChange"],[1,"px-2","pt-2","w-full","border-t","border-gray-200"],["btn","","matRipple","","close","",1,"w-full",3,"click"],L]},template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,an,3,0,"button",2),e.qZA(),e.TgZ(3,"h3",3),e.SDv(4,4),e.qZA(),e._UZ(5,"div",5),e.qZA(),e.TgZ(6,"form",6)(7,"section",7)(8,"h2",8),e.SDv(9,9),e.qZA(),e.TgZ(10,"div",10)(11,"label",11),e.SDv(12,12),e.qZA(),e.TgZ(13,"mat-form-field",13)(14,"mat-select",14),e.NdJ("ngModelChange",function(_){return t.setOptions({zone_ids:_})}),e.ALo(15,"async"),e.YNc(16,cn,2,3,"mat-option",15),e.ALo(17,"async"),e.qZA()()(),e.TgZ(18,"div",16)(19,"label",17),e.tHW(20,18),e._UZ(21,"span"),e.N_p(),e.qZA(),e.TgZ(22,"a-date-field",19),e.SDv(23,20),e.qZA()(),e.TgZ(24,"div",21)(25,"div",22)(26,"label",23),e.tHW(27,24),e._UZ(28,"span"),e.N_p(),e.qZA(),e.TgZ(29,"a-time-field",25),e.NdJ("ngModelChange",function(_){return t.form.patchValue({date:_})}),e.qZA()(),e.TgZ(30,"div",22)(31,"label",26),e.tHW(32,27),e._UZ(33,"span"),e.N_p(),e.qZA(),e._UZ(34,"a-duration-field",28),e.qZA()()(),e.TgZ(35,"section",29)(36,"h2",8),e.SDv(37,30),e.qZA(),e.TgZ(38,"div",31)(39,"div",32),e.SDv(40,33),e.qZA(),e.TgZ(41,"mat-checkbox",34),e.NdJ("ngModelChange",function(_){return t.setOptions({show_fav:_})}),e.ALo(42,"async"),e.qZA()()(),e.YNc(43,dn,5,3,"section",35),e.ALo(44,"async"),e.qZA(),e.YNc(45,pn,3,0,"div",36)),2&n){let i,_,s;e.xp6(2),e.Q6J("ngIf",t.can_close),e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(8),e.Q6J("ngModel",null==(i=e.lcZ(15,15,t.options))?null:i.zone_ids)("ngModelOptions",e.DdM(23,se))("placeholder",(null==t.bld?null:t.bld.display_name)||(null==t.bld?null:t.bld.name))("multiple",!0),e.xp6(2),e.Q6J("ngForOf",e.lcZ(17,17,t.levels)),e.xp6(13),e.Q6J("ngModel",t.form.value.date)("ngModelOptions",e.DdM(24,se)),e.xp6(5),e.Q6J("time",null==t.form||null==t.form.value?null:t.form.value.date)("max",t.max_duration),e.xp6(7),e.Q6J("ngModel",null==(_=e.lcZ(42,19,t.options))?null:_.show_fav)("ngModelOptions",e.DdM(25,se)),e.xp6(2),e.Q6J("ngIf",null==(s=e.lcZ(44,21,t.features))?null:s.length),e.xp6(2),e.Q6J("ngIf",t.can_close)}},dependencies:[c.sg,c.O5,d._Y,d.JJ,d.JL,d.On,d.sg,d.u,M.KE,ne.oG,u.ey,oe.Q,ue.B,fe.N,m.o,V.gD,u.wG,c.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:100vw}\n/*# sourceMappingURL=parking-filters.component.ts-angular-inline--77.css.map*/"]});class y extends f.cx{constructor(n,t,i){super(),this._bsheet=n,this._event_form=t,this._org=i,this.view="list",this.viewChange=new e.vpe,this.options=this._event_form.options,this.location="",this.editFilters=()=>this._bsheet.open(h)}get start(){return this._event_form.form.value.date}get end(){const{date:n,duration:t}=this._event_form.form.value;return n+60*t*1e3}ngOnInit(){this.subscription("opts",this.options.subscribe(({zone_ids:n})=>this._updateLocation(n)))}removeFeature(n){var t=this;return(0,v.Z)(function*(){const i=yield t._event_form.options.pipe((0,Me.q)(1)).toPromise();t._event_form.setOptions({...i,features:(i.features||[]).filter(_=>_!==n)})})()}_updateLocation(n=[]){const i=this._org.levelWithID(n)||this._org.building;this.location=i?.display_name||i?.name||""}}function fn(o,n){1&o&&(e.TgZ(0,"div",22)(1,"app-icon"),e._uU(2,"done"),e.qZA()())}function mn(o,n){if(1&o&&e._UZ(0,"img",23),2&o){const t=e.oxw().$implicit;e.Q6J("src",t.images[0],e.LSH)}}function Sn(o,n){1&o&&e._UZ(0,"img",24)}function Tn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"li",10)(1,"button",11),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.selectSpace(s))}),e.TgZ(2,"div",12),e.YNc(3,fn,3,0,"div",13),e.YNc(4,mn,1,1,"img",14),e.YNc(5,Sn,1,0,"ng-template",null,15,e.W1O),e.qZA(),e.TgZ(7,"div",16)(8,"div",17),e._uU(9),e.qZA(),e.TgZ(10,"div",18)(11,"app-icon",19),e._uU(12,"place"),e.qZA(),e.TgZ(13,"p"),e._uU(14),e.qZA()(),e.TgZ(15,"div",18)(16,"app-icon",19),e._uU(17,"people"),e.qZA(),e.TgZ(18,"p"),e.SDv(19,20),e.qZA()()()(),e.TgZ(20,"button",21),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.toggleFav.emit(s))}),e.TgZ(21,"app-icon"),e._uU(22),e.qZA()()()}if(2&o){const t=n.$implicit,i=e.MAs(6),_=e.oxw(3);e.ekj("!border-blue-400",_.active===t.id),e.xp6(3),e.Q6J("ngIf",_.selected.includes(t.id)),e.xp6(1),e.Q6J("ngIf",null==t.images?null:t.images.length)("ngIfElse",i),e.xp6(5),e.hij(" ",t.name||"Meeting Space"," "),e.xp6(5),e.hij(" ",t.location||(null==t.level?null:t.level.display_name)||(null==t.level?null:t.level.name)," "),e.xp6(5),e.pQV(t.capacity<1?2:t.capacity),e.QtT(19),e.xp6(1),e.ekj("text-blue-400",_.isFavourite(t.id)),e.xp6(2),e.Oqu(_.isFavourite(t.id)?"favorite":"favorite_border")}}function In(o,n){if(1&o&&(e.TgZ(0,"ul",8),e.YNc(1,Tn,23,11,"li",9),e.ALo(2,"async"),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.assets))}}function Cn(o,n){if(1&o&&(e.ynx(0),e.YNc(1,In,3,3,"ul",7),e.ALo(2,"async"),e.BQk()),2&o){const t=e.oxw(),i=e.MAs(8);let _;e.xp6(1),e.Q6J("ngIf",null==(_=e.lcZ(2,2,t.assets))?null:_.length)("ngIfElse",i)}}function On(o,n){1&o&&(e.TgZ(0,"div",25)(1,"p",26),e.SDv(2,27),e.qZA()())}function En(o,n){1&o&&(e.TgZ(0,"div",28),e._UZ(1,"mat-spinner",29),e.TgZ(2,"p",30),e.SDv(3,31),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("diameter",32))}y.\u0275fac=function(n){return new(n||y)(e.Y36(_e.ch),e.Y36(Ne.MH),e.Y36(X.w7))},y.\u0275cmp=e.Xpm({type:y,selectors:[["parking-space-filters-display"]],inputs:{view:"view"},outputs:{viewChange:"viewChange"},features:[e.qOj],decls:22,vars:23,consts:function(){let o,n,t,i;return o=$localize`:␟19eaa5cd51d70d9ea957eecac78cfd811e9b93d8␟5208858215712453646: Filters `,n=$localize`:␟992a9a6a193a56c5b8846dc972c5e1977ee5f1aa␟8553228906889869186: Map `,t=$localize`:␟4b286e90831dd637c5cd3eb20544664ee7112669␟7787942140742011951: List `,i=$localize`:␟e1bcafb95323d9492bfdfa190a129131e6255cdb␟7211304359187007121: Min. ${"\ufffd0\ufffd"}:INTERPOLATION: People `,[["actions","",1,"sm:hidden","space-x-2","flex","items-center","p-2"],["matRipple","","filters","",1,"flex-1","w-1/2",3,"click"],o,[1,"flex","items-center"],["matRipple","","map","",1,"rounded-l","rounded-r-none",3,"click"],n,["matRipple","","list","",1,"rounded-r","rounded-l-none",3,"click"],t,["filters","",1,"flex","items-center","flex-wrap","p-2"],["filter-item","","zone","","class","dark:border-neutral-500",4,"ngIf"],["filter-item","","date","",1,"dark:border-neutral-500"],["filter-item","","time","",1,"dark:border-neutral-500"],["filter-item","","count","",1,"dark:border-neutral-500"],i,["filter-item","",4,"ngFor","ngForOf"],["filter-item","","zone","",1,"dark:border-neutral-500"],["filter-item",""],["icon","","matRipple","",1,"-mr-4","dark:border-neutral-500",3,"click"]]},template:function(n,t){if(1&n&&(e.TgZ(0,"section",0)(1,"button",1),e.NdJ("click",function(){return t.editFilters()}),e.SDv(2,2),e.qZA(),e.TgZ(3,"div",3)(4,"button",4),e.NdJ("click",function(){return t.view="map",t.viewChange.emit(t.view)}),e.SDv(5,5),e.qZA(),e.TgZ(6,"button",6),e.NdJ("click",function(){return t.view="list",t.viewChange.emit(t.view)}),e.SDv(7,7),e.qZA()()(),e.TgZ(8,"section",8),e.YNc(9,gn,2,1,"div",9),e.TgZ(10,"div",10),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"div",11),e._uU(14),e.ALo(15,"date"),e.ALo(16,"date"),e.qZA(),e.TgZ(17,"div",12),e.SDv(18,13),e.ALo(19,"async"),e.qZA(),e.YNc(20,un,6,1,"div",14),e.ALo(21,"async"),e.qZA()),2&n){let i,_;e.xp6(4),e.ekj("inverse","map"!==t.view),e.xp6(2),e.ekj("inverse","list"!==t.view),e.xp6(3),e.Q6J("ngIf",t.location),e.xp6(2),e.hij(" ",e.xi3(12,10,t.start,"mediumDate")," "),e.xp6(3),e.AsE(" ",e.xi3(15,13,t.start,"shortTime")," \u2014 ",e.xi3(16,16,t.end,"shortTime")," "),e.xp6(5),e.pQV((null==(i=e.lcZ(19,19,t.options))?null:i.capcaity)||2),e.QtT(18),e.xp6(1),e.Q6J("ngForOf",null==(_=e.lcZ(21,21,t.options))?null:_.features)}},dependencies:[c.sg,c.O5,m.o,u.wG,c.Ov,c.uU],styles:["[filter-item][_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 1rem;height:2rem;font-size:.875rem;border:1px solid rgba(0,0,0,.2);border-radius:1.25rem;margin-right:.5rem;margin-bottom:.5rem}[filter-item][_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.1)}[filter-item][_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:.5rem}\n/*# sourceMappingURL=parking-filters-display.component.ts-angular-inline--78.css.map*/"]});class P{constructor(n){this._form=n,this.active="",this.selected="",this.favorites=[],this.onSelect=new e.vpe,this.toggleFav=new e.vpe,this.assets=(0,Ee.aj)([this._form.options,this._form.available_assets]).pipe((0,E.U)(([{show_fav:t},i])=>i.filter(_=>!t||this.isFavourite(_.id)))),this.loading=this._form.loading}isFavourite(n){return this.favorites.includes(n)}selectSpace(n){this.onSelect.emit(n)}}function Ln(o,n){1&o&&e._UZ(0,"div",16)}function Nn(o,n){1&o&&(e.TgZ(0,"app-icon",17),e._uU(1," done "),e.qZA())}P.\u0275fac=function(n){return new(n||P)(e.Y36(N.f))},P.\u0275cmp=e.Xpm({type:P,selectors:[["parking-space-list"]],inputs:{active:"active",selected:"selected",favorites:"favorites"},outputs:{onSelect:"onSelect",toggleFav:"toggleFav"},decls:11,vars:7,consts:function(){let o,n,t,i,_;return o=$localize`:␟80ed5b776a26a78099e230e0e89d96c33ba44e24␟5968132631442328843:Results`,n=$localize`:␟dd662afda8b27e3c6818b705321ddcc36bd571c0␟4264834071624535187: ${"\ufffd0\ufffd"}:INTERPOLATION: result(s) found `,t=$localize`:␟08719ea79f574b595da7d187fda2fa8c491b5de7␟4552898751936658514: ${"\ufffd0\ufffd"}:INTERPOLATION: People `,i=$localize`:␟027c29534f5dc45741b226edfebb3f7f578384b0␟3831747985282777621: No available spaces for selected time and/or filters `,_=$localize`:␟8dad32dda6491a1051df9156e98031c0e634b413␟126579492602011343:Finding available spaces...`,[[1,"font-bold"],o,["count","",1,"text-sm","opacity-60","mb-4"],n,[4,"ngIf","ngIfElse"],["empty_state",""],["load_state",""],["class","list-style-none space-y-2",4,"ngIf","ngIfElse"],[1,"list-style-none","space-y-2"],["space","","class","relative p-2 rounded-lg w-full shadow border bg-white dark:bg-neutral-700 border-gray-200 dark:border-neutral-500",3,"!border-blue-400",4,"ngFor","ngForOf"],["space","",1,"relative","p-2","rounded-lg","w-full","shadow","border","bg-white","dark:bg-neutral-700","border-gray-200","dark:border-neutral-500"],["matRipple","","select","",1,"w-full","h-full","flex","items-center",3,"click"],[1,"relative","w-20","h-20","rounded-xl","bg-black/20","dark:bg-white/30","mr-4","overflow-hidden","flex","items-center","justify-center"],["class","absolute top-1 left-1 border border-white bg-black/50 rounded-full h-6 w-6 flex items-center justify-center text-white",4,"ngIf"],["class","object-cover h-full",3,"src",4,"ngIf","ngIfElse"],["placeholder",""],[1,"space-y-2"],[1,"font-medium","truncate","mr-10"],[1,"flex","items-center","text-sm","space-x-2"],[1,"text-blue-500"],t,["icon","","matRipple","","fav","",1,"absolute","top-1","right-1",3,"click"],[1,"absolute","top-1","left-1","border","border-white","bg-black/50","rounded-full","h-6","w-6","flex","items-center","justify-center","text-white"],[1,"object-cover","h-full",3,"src"],["src","assets/icons/car-placeholder.svg",1,"m-auto"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"],i,["loading","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"],[1,"opacity-30"],_]},template:function(n,t){if(1&n&&(e.TgZ(0,"h3",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"p",2),e.SDv(3,3),e.ALo(4,"async"),e.qZA(),e.YNc(5,Cn,3,4,"ng-container",4),e.ALo(6,"async"),e.YNc(7,On,3,0,"ng-template",null,5,e.W1O),e.YNc(9,En,4,1,"ng-template",null,6,e.W1O)),2&n){const i=e.MAs(10);let _;e.xp6(4),e.pQV((null==(_=e.lcZ(4,3,t.assets))?null:_.length)||0),e.QtT(3),e.xp6(1),e.Q6J("ngIf",!e.lcZ(6,5,t.loading))("ngIfElse",i)}},dependencies:[c.sg,c.O5,A.Ou,m.o,u.wG,c.Ov],styles:["[_nghost-%COMP%]{width:100%;height:100%;padding:.5rem;overflow:auto}\n/*# sourceMappingURL=parking-list.component.ts-angular-inline--79.css.map*/"]});class K{constructor(n){this._data=n}get selected(){return!0===this._data.selected}}K.\u0275fac=function(n){return new(n||K)(e.Y36(re.ui))},K.\u0275cmp=e.Xpm({type:K,selectors:[["parking-space-location-pin"]],decls:17,vars:2,consts:[[1,"absolute","bottom-0","left-1/2","-translate-x-1/2"],["width","66","height","80","viewBox","0 0 66 80","fill","none","xmlns","http://www.w3.org/2000/svg"],["filter","url(#filter0_d_1065_10313)"],["d","M19.724 53.0408C25.0871 60.3435 30.5582 65.8583 31.0184 66.3178C31.4558 66.755 32.0489 67.0007 32.6674 67.0008H32.6678C33.2863 67.0007 33.8795 66.755 34.3169 66.3178C34.7771 65.8583 40.2481 60.3435 45.6112 53.0408C48.2928 49.3894 50.963 45.2701 52.9663 41.0957C54.9629 36.935 56.3331 32.6459 56.3342 28.6724C56.364 25.5564 55.7725 22.4657 54.5941 19.5809C53.415 16.6946 51.6722 14.0724 49.4675 11.8677C47.2629 9.66308 44.6407 7.92024 41.7544 6.74121C38.8711 5.5634 35.782 4.97184 32.6676 5.00103C29.5533 4.97184 26.4642 5.5634 23.5809 6.74121C20.6946 7.92024 18.0724 9.66308 15.8677 11.8677C13.6631 14.0724 11.9202 16.6946 10.7412 19.5809C9.56278 22.4657 8.97122 25.5565 9.00108 28.6726C9.0022 32.646 10.3724 36.9351 12.369 41.0957C14.3723 45.2701 17.0425 49.3894 19.724 53.0408Z","fill","#309251","stroke","#0B421D","stroke-width","2"],["id","filter0_d_1065_10313","x","0","y","0","width","65.3353","height","80.001","filterUnits","userSpaceOnUse","color-interpolation-filters","sRGB"],["flood-opacity","0","result","BackgroundImageFix"],["in","SourceAlpha","type","matrix","values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0","result","hardAlpha"],["dy","4"],["stdDeviation","4"],["in2","hardAlpha","operator","out"],["type","matrix","values","0 0 0 0 0.0196078 0 0 0 0 0.109804 0 0 0 0 0.172549 0 0 0 0.2 0"],["mode","normal","in2","BackgroundImageFix","result","effect1_dropShadow_1065_10313"],["mode","normal","in","SourceGraphic","in2","effect1_dropShadow_1065_10313","result","shape"],[1,"absolute","top-0","left-0","w-full","h-3/4","flex","items-center","justify-center"],["class","relative z-10 h-4 w-4 rounded-full bg-white border-2 border-[#0B421D]",4,"ngIf"],["class","relative text-white z-10 text-2xl",4,"ngIf"],[1,"relative","z-10","h-4","w-4","rounded-full","bg-white","border-2","border-[#0B421D]"],[1,"relative","text-white","z-10","text-2xl"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.O4$(),e.TgZ(1,"svg",1)(2,"g",2),e._UZ(3,"path",3),e.qZA(),e.TgZ(4,"defs")(5,"filter",4),e._UZ(6,"feFlood",5)(7,"feColorMatrix",6)(8,"feOffset",7)(9,"feGaussianBlur",8)(10,"feComposite",9)(11,"feColorMatrix",10)(12,"feBlend",11)(13,"feBlend",12),e.qZA()()(),e.kcU(),e.TgZ(14,"div",13),e.YNc(15,Ln,1,0,"div",14),e.YNc(16,Nn,2,0,"app-icon",15),e.qZA()()),2&n&&(e.xp6(15),e.Q6J("ngIf",!t.selected),e.xp6(1),e.Q6J("ngIf",t.selected))},dependencies:[c.O5,m.o],encapsulation:2});var Mn=a(823);function vn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"i-map",10),e.NdJ("zoomChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.zoom=_)})("centerChange",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.center=_)}),e.ALo(1,"async"),e.ALo(2,"async"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("src",t.map_url)("features",e.lcZ(1,5,t.features))("actions",e.lcZ(2,7,t.actions))("zoom",t.zoom)("center",t.center)}}function bn(o,n){if(1&o&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.display_name||t.name," ")}}class w extends f.cx{constructor(n){super(),this._event_form=n,this.selected=[],this.is_displayed=!1,this.onSelect=new e.vpe,this.zoom=1,this.center={x:.5,y:.5},this._seletedSpace=t=>()=>this.onSelect.emit(t),this.level=null,this.levels=this._event_form.available_spaces.pipe((0,E.U)(t=>(0,f.Tw)(t.map(({level:i})=>i)))),this.features=this._event_form.available_spaces.pipe((0,Mn.b)(1e3),(0,E.U)(t=>t.map(i=>({location:i.map_id,content:K,data:{...i,selected:this.selected.includes(i.id)}})))),this.actions=this._event_form.available_spaces.pipe((0,E.U)(t=>t.map(i=>({id:i.map_id,action:["touchend","mouseup"],callback:this._seletedSpace(i)}))))}get map_url(){return this.level?.map_id||""}ngOnInit(){this.subscription("spaces",this._event_form.available_spaces.subscribe(n=>{!this.level&&n.length&&(this.level=n[0].level)}))}setZoom(n){this.zoom=Math.max(.5,Math.min(10,n))}resetMap(){this.zoom=1,this.center={x:.5,y:.5}}}function hn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"parking-space-list",25),e.NdJ("toggleFav",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.toggleFavourite(_))})("onSelect",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.displayed=_)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("active",null==t.displayed?null:t.displayed.id)("selected",t.selected_ids)("favorites",t.favorites)}}function An(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.displayed=null)}),e.SDv(1,27),e.qZA()}}function Fn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"parking-space-map",28),e.NdJ("onSelect",function(_){e.CHM(t);const s=e.oxw();return e.KtG(s.displayed=_)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("selected",t.selected_ids)("is_displayed",!!t.displayed)}}w.\u0275fac=function(n){return new(n||w)(e.Y36(Ne.MH))},w.\u0275cmp=e.Xpm({type:w,selectors:[["parking-space-map"]],inputs:{selected:"selected",is_displayed:"is_displayed"},outputs:{onSelect:"onSelect"},features:[e.qOj],decls:18,vars:5,consts:[[3,"src","features","actions","zoom","center","zoomChange","centerChange",4,"ngIf"],[1,"absolute","inset-x-0","top-0","bg-white","p-2","border-b","border-gray-200"],["levels","","appearance","outline",1,"w-full","h-[3.25rem]"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["zoom","",1,"absolute","bottom-2","right-2","rounded-lg","border","border-gray-200","bg-white","flex","flex-col","overflow-hidden"],["zoom-in","","icon","","matRipple","",3,"click"],[1,"border-t","border-gray-200","w-full"],["zoom-out","","icon","","matRipple","",3,"click"],["reset","","icon","","matRipple","",3,"click"],[3,"src","features","actions","zoom","center","zoomChange","centerChange"],[3,"value"]],template:function(n,t){1&n&&(e.YNc(0,vn,3,9,"i-map",0),e.TgZ(1,"div",1)(2,"mat-form-field",2)(3,"mat-select",3),e.NdJ("ngModelChange",function(_){return t.level=_}),e.YNc(4,bn,2,2,"mat-option",4),e.ALo(5,"async"),e.qZA()()(),e.TgZ(6,"div",5)(7,"button",6),e.NdJ("click",function(){return t.setZoom(1.1*t.zoom)}),e.TgZ(8,"app-icon"),e._uU(9,"zoom_in"),e.qZA()(),e._UZ(10,"div",7),e.TgZ(11,"button",8),e.NdJ("click",function(){return t.setZoom(t.zoom*(1/1.1))}),e.TgZ(12,"app-icon"),e._uU(13,"zoom_out"),e.qZA()(),e._UZ(14,"div",7),e.TgZ(15,"button",9),e.NdJ("click",function(){return t.resetMap()}),e.TgZ(16,"app-icon"),e._uU(17,"refresh"),e.qZA()()()),2&n&&(e.Q6J("ngIf",!t.is_displayed),e.xp6(3),e.Q6J("ngModel",t.level),e.xp6(1),e.Q6J("ngForOf",e.lcZ(5,3,t.levels)))},dependencies:[c.sg,c.O5,d.JJ,d.On,M.KE,u.ey,m.o,Q.p,V.gD,u.wG,c.Ov],styles:["[_nghost-%COMP%]{position:relative;background:rgba(0,0,0,.05);padding-top:4rem}button[_ngcontent-%COMP%]{border-radius:0}\n/*# sourceMappingURL=parking-map.component.ts-angular-inline--80.css.map*/"]});const W="favourite_parking_spaces";class q{constructor(n,t,i,_){this._dialog_ref=n,this._settings=t,this._event_form=i,this._data=_,this.selected=[],this.view="list",this.selected=[..._.spaces||[]],this._event_form.setOptions(_.options)}get selected_ids(){return this.selected.map(n=>n.id).join(",")}get favorites(){return this._settings.get(W)||[]}isSelected(n){return n&&this.selected_ids.includes(n)}setSelected(n,t){const i=this.selected.filter(_=>_.id!==n.id);t&&i.push(n),this.selected=i,!this._data.options.group&&t&&this._dialog_ref.close([n])}toggleFavourite(n){const t=this.favorites;t.includes(n.id)?this._settings.saveUserSetting(W,t.filter(_=>_!==n.id)):this._settings.saveUserSetting(W,[...t,n.id])}}q.\u0275fac=function(n){return new(n||q)(e.Y36(T.so),e.Y36(f.gb),e.Y36(N.f),e.Y36(T.WI))},q.\u0275cmp=e.Xpm({type:q,selectors:[["parking-space-select-modal"]],decls:34,vars:21,consts:function(){let o,n,t,i,_;return o=$localize`:␟8db1ccf77dfb75785bcf8e9090ad65ea6ab69884␟6275162452894389177:Find Parking Space`,n=$localize`:␟30d3439b0e0095fe69503245f3bd7a2e9498be7c␟8443571736703532556: View List `,t=$localize`:␟18843b85d1a4f17fefafd07bc5cde636dca44295␟819716823718458903:Back to form`,i=$localize`:␟f5e618f8255889ca7743db771c50b6181b8eb362␟7685760017883569970: ${"\ufffd0\ufffd"}:INTERPOLATION: bay(s) added `,_=$localize`:␟ccda1d41ca79703a85a3a598c1d97e040a32b766␟874721418273731876: Back `,[[1,"w-[100vw]","h-[100vh]","sm:relative","sm:w-auto","sm:h-auto","flex","flex-col","bg-white","dark:bg-neutral-700"],[1,"flex","items-center","space-x-4","w-full"],["icon","","matRipple","","mat-dialog-close","",1,"bg-black/20"],o,[1,"flex-1","flex","items-center","divide-x","divide-gray-200","dark:divide-neutral-500","min-h-[65vh]","h-[65vh]","sm:max-h-[65vh]","sm:max-w-[95vw]","w-full","overflow-hidden"],[1,"h-full","hidden","sm:flex","max-w-[20rem]","sm:h-[65vh]","sm:max-h-full"],[1,"flex","flex-col","items-center","flex-1","w-1/2","h-full","sm:h-[65vh]"],[1,"w-full","border-b","border-gray-200","dark:border-neutral-500",3,"view","viewChange"],["class","flex-1 h-1/2 bg-black/5 dark:bg-white/10",3,"active","selected","favorites","toggleFav","onSelect",4,"ngIf","ngIfElse"],[1,"h-full","w-full","sm:h-[65vh]","absolute","sm:relative","sm:flex","sm:max-w-[20rem]","z-20","bg-white","dark:bg-neutral-600","block",3,"space","active","fav","activeChange","toggleFav","close"],[1,"flex","sm:hidden","flex-col-reverse","items-center","justify-end","p-2","border-t","border-gray-200","dark:border-neutral-500","w-full"],["btn","","matRipple","","return","","class","inverse sm:hidden w-full",3,"click",4,"ngIf"],["btn","","matRipple","","save","",1,"w-full","sm:w-32","sm:mb-0",3,"mat-dialog-close"],n,[1,"hidden","sm:flex","items-center","justify-between","p-2","border-t","border-gray-200","dark:border-neutral-500","w-full"],["btn","","matRipple","",1,"clear","text-primary",3,"mat-dialog-close"],[1,"flex","items-center"],[1,"text-xl"],[1,"mr-1","underline"],t,[1,"opacity-60","text-sm"],i,["btn","","matRipple","",3,"disabled","click"],[1,"mr-1"],["map_view",""],[1,"flex-1","h-1/2","bg-black/5","dark:bg-white/10",3,"active","selected","favorites","toggleFav","onSelect"],["btn","","matRipple","","return","",1,"inverse","sm:hidden","w-full",3,"click"],_,[1,"flex-1","h-1/2","w-full",3,"selected","is_displayed","onSelect"]]},template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"header",1)(2,"button",2)(3,"app-icon"),e._uU(4,"close"),e.qZA()(),e.TgZ(5,"h3"),e.SDv(6,3),e.qZA()(),e.TgZ(7,"main",4),e._UZ(8,"parking-space-filters",5),e.TgZ(9,"div",6)(10,"parking-space-filters-display",7),e.NdJ("viewChange",function(_){return t.view=_}),e.qZA(),e.YNc(11,hn,1,3,"parking-space-list",8),e.qZA(),e.TgZ(12,"parking-space-details",9),e.NdJ("activeChange",function(_){return t.setSelected(t.displayed,_)})("toggleFav",function(){return t.toggleFavourite(t.displayed)})("close",function(){return t.displayed=null}),e.qZA()(),e.TgZ(13,"footer",10),e.YNc(14,An,2,0,"button",11),e.TgZ(15,"button",12),e.SDv(16,13),e.qZA()(),e.TgZ(17,"footer",14)(18,"button",15)(19,"div",16)(20,"app-icon",17),e._uU(21,"arrow_back"),e.qZA(),e.TgZ(22,"div",18),e.SDv(23,19),e.qZA()()(),e.TgZ(24,"p",20),e.SDv(25,21),e.qZA(),e.TgZ(26,"button",22),e.NdJ("click",function(){return t.setSelected(t.displayed,!t.isSelected(null==t.displayed?null:t.displayed.id))}),e.TgZ(27,"div",16)(28,"app-icon",17),e._uU(29),e.qZA(),e.TgZ(30,"div",23),e._uU(31),e.qZA()()()()(),e.YNc(32,Fn,1,2,"ng-template",null,24,e.W1O)),2&n){const i=e.MAs(33);e.xp6(10),e.Q6J("view",t.view),e.xp6(1),e.Q6J("ngIf","list"===t.view)("ngIfElse",i),e.xp6(1),e.ekj("hidden",!t.displayed)("inset-0",t.displayed),e.Q6J("space",t.displayed)("active",t.selected_ids.includes(null==t.displayed?null:t.displayed.id))("fav",t.displayed&&t.favorites.includes(null==t.displayed?null:t.displayed.id)),e.xp6(2),e.Q6J("ngIf",t.displayed),e.xp6(1),e.ekj("mb-2",t.displayed),e.Q6J("mat-dialog-close",t.selected),e.xp6(3),e.Q6J("mat-dialog-close",t.selected),e.xp6(7),e.pQV(t.selected.length),e.QtT(25),e.xp6(1),e.ekj("inverse",t.isSelected(null==t.displayed?null:t.displayed.id)),e.Q6J("disabled",!t.displayed),e.xp6(3),e.Oqu(t.isSelected(null==t.displayed?null:t.displayed.id)?"remove":"add"),e.xp6(2),e.hij(" ",t.isSelected(null==t.displayed?null:t.displayed.id)?"Remove from Booking":"Add to booking"," ")}},dependencies:[c.O5,T.ZT,m.o,u.wG,h,y,P,w,$]});var ve=a(719);function Dn(o,n){if(1&o&&e._UZ(0,"img",23),2&o){const t=e.oxw().$implicit;e.Q6J("src",t.images[0],e.LSH)}}function kn(o,n){1&o&&e._UZ(0,"img",24)}function xn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",8),e.YNc(2,Dn,1,1,"img",9),e.YNc(3,kn,1,0,"ng-template",null,10,e.W1O),e.qZA(),e.TgZ(5,"div",11)(6,"div",12),e._uU(7),e.qZA(),e.TgZ(8,"div",13)(9,"app-icon",14),e._uU(10,"place"),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.qZA()(),e.TgZ(13,"div",13)(14,"app-icon",14),e._uU(15,"people"),e.qZA(),e.TgZ(16,"p"),e.SDv(17,15),e.qZA()(),e.TgZ(18,"div",16)(19,"button",17),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.changeResources(s))}),e.TgZ(20,"div",18),e.tHW(21,19),e._UZ(22,"app-icon"),e.N_p(),e.qZA()(),e.TgZ(23,"button",20),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.removeResource(s))}),e.TgZ(24,"div",18),e.tHW(25,21),e._UZ(26,"app-icon"),e.N_p(),e.qZA()()()(),e.TgZ(27,"button",22),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.toggleFavourite(_.asset))}),e.TgZ(28,"app-icon"),e._uU(29),e.qZA()()()}if(2&o){const t=n.$implicit,i=e.MAs(4),_=e.oxw();e.xp6(2),e.Q6J("ngIf",null==t.images?null:t.images.length)("ngIfElse",i),e.xp6(5),e.hij(" ",t.name||"Meeting Resource"," "),e.xp6(5),e.Oqu(t.location),e.xp6(5),e.pQV(t.capacity<1?2:t.capacity)(t.capacity),e.QtT(17),e.xp6(10),e.ekj("text-blue-400",_.favorites.includes(null==_.asset?null:_.asset.id)),e.xp6(2),e.Oqu(_.favorites.includes(null==_.asset?null:_.asset.id)?"favorite":"favorite_border")}}const Rn=[];class J{constructor(n,t){this._settings=n,this._dialog=t,this.room_size=3,this.spaces=[],this.disabled=!1,this.registerOnChange=i=>this._onChange=i,this.registerOnTouched=i=>this._onTouch=i,this.setDisabledState=i=>this.disabled=i}get favorites(){return this._settings.get("favourite_spaces")||Rn}changeResources(){this._dialog.open(q,{data:{spaces:this.spaces,options:{capacity:this.room_size}}}).afterClosed().subscribe(t=>{!t||this.setValue(t)})}removeResource(n){this.setValue(this.spaces.filter(t=>t.id!==n.id))}setValue(n){this.spaces=n,this._onChange&&this._onChange(this.spaces)}writeValue(n){this.spaces=n||[]}toggleFavourite(n){const t=this.favorites;t.includes(n.id)?this._settings.saveUserSetting(W,t.filter(_=>_!==n.id)):this._settings.saveUserSetting(W,[...t,n.id])}}J.\u0275fac=function(n){return new(n||J)(e.Y36(ve.g),e.Y36(T.uw))},J.\u0275cmp=e.Xpm({type:J,selectors:[["parking-space-list-field"]],features:[e._Bn([{provide:d.JU,useExisting:(0,e.Gpc)(()=>J),multi:!0}])],decls:10,vars:1,consts:function(){let o,n,t,i,_;return o=$localize`:␟45491a2ead2b592aec7b4d19300c0715230f334d␟1439078713747050312:Add Parking Resource`,n=$localize`:␟ed210c8c0f2511082633f06a2c94b8410f6cd9bf␟426413428618668868:{VAR_PLURAL, plural, =1 {Person } other {People
                            }}`,n=e.Zx4(n,{VAR_PLURAL:"\ufffd1\ufffd"}),t=$localize`:␟ddc17cbb67fd49c13c14733c877b09fb9bd86d87␟686822217414553756: ${"\ufffd0\ufffd"}:INTERPOLATION: ${n}:ICU: `,i=$localize`:␟ca9092fdbbb85e5828de77fdf85c49b918cec128␟559636443235347532:${"\ufffd#22\ufffd"}:START_TAG_APP_ICON:edit${"\ufffd/#22\ufffd"}:CLOSE_TAG_APP_ICON: Change `,_=$localize`:␟a386ba350cdee69beeb12a908d96f0724ddc2054␟2582674642057285571:${"\ufffd#26\ufffd"}:START_TAG_APP_ICON:close${"\ufffd/#26\ufffd"}:CLOSE_TAG_APP_ICON: Remove `,[["list","",1,"space-y-2"],["space","","class","relative p-2 rounded-lg w-full flex items-center shadow border border-gray-200",4,"ngFor","ngForOf"],["btn","","matRipple","","add-space","",1,"w-full","inverse","mt-2",3,"click"],[1,"flex","items-center","justify-center","space-x-2"],o,[1,"flex","items-center","flex-wrap","sm:space-x-2","mb-2"],[1,"flex-1","min-w-[256px]","space-y-2"],["space","",1,"relative","p-2","rounded-lg","w-full","flex","items-center","shadow","border","border-gray-200"],[1,"w-24","h-24","rounded-xl","bg-black/20","mr-4","overflow-hidden","flex","items-center","justify-center"],["class","object-cover h-full",3,"src",4,"ngIf","ngIfElse"],["placeholder",""],[1,"space-y-2","pb-4"],[1,"font-medium"],[1,"flex","items-center","text-sm","space-x-2"],[1,"text-blue-500"],t,[1,"absolute","bottom-0","right-0","flex","items-center","justify-end","text-xs"],["btn","","matRipple","","edit-space","",1,"clear",3,"click"],[1,"flex","items-center","space-x-2"],i,["btn","","matRipple","","remove-space","",1,"clear",3,"click"],_,["icon","","matRipple","","fav","",1,"absolute","top-1","right-1",3,"click"],[1,"object-cover","h-full",3,"src"],["src","assets/icons/car-placeholder.svg",1,"m-auto"]]},template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,xn,30,9,"div",1),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return t.changeResources()}),e.TgZ(3,"div",3)(4,"app-icon"),e._uU(5,"search"),e.qZA(),e.TgZ(6,"span"),e.SDv(7,4),e.qZA()()(),e.TgZ(8,"div",5),e._UZ(9,"div",6),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngForOf",t.spaces))},dependencies:[c.sg,c.O5,m.o,u.wG]});const Zn=function(){return[]},Bn=function(){return{standalone:!0}};function Gn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"mat-checkbox",27),e.NdJ("ngModelChange",function(_){const l=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.setFeature(l,_))}),e._uU(1),e.qZA()}if(2&o){const t=n.$implicit,i=e.oxw(3);e.Q6J("ngModel",(i.selected_features||e.DdM(3,Zn)).includes(t))("ngModelOptions",e.DdM(4,Bn)),e.xp6(1),e.hij(" ",t," ")}}function $n(o,n){if(1&o&&(e.TgZ(0,"div",23)(1,"label",24),e._uU(2,"Type"),e.qZA(),e.TgZ(3,"div",25),e.YNc(4,Gn,2,5,"mat-checkbox",26),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.features)}}function yn(o,n){if(1&o&&e._UZ(0,"img",28),2&o){const t=e.oxw().$implicit;e.Q6J("src",t.images[0],e.LSH)}}function Pn(o,n){1&o&&e._UZ(0,"img",29)}function Kn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",7),e.YNc(1,$n,5,1,"div",8),e.TgZ(2,"div",9),e.YNc(3,yn,1,1,"img",10),e.YNc(4,Pn,1,0,"ng-template",null,11,e.W1O),e.qZA(),e.TgZ(6,"div",12)(7,"div",13),e._uU(8),e.qZA(),e.TgZ(9,"div",14)(10,"app-icon",15),e._uU(11,"place"),e.qZA(),e.TgZ(12,"p"),e._uU(13),e.qZA()(),e.TgZ(14,"div",16)(15,"button",17),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.changeResources(s))}),e.TgZ(16,"div",18),e.tHW(17,19),e._UZ(18,"app-icon"),e.N_p(),e.qZA()(),e.TgZ(19,"button",20),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.removeResource(s))}),e.TgZ(20,"div",18),e.tHW(21,21),e._UZ(22,"app-icon"),e.N_p(),e.qZA()()()(),e.TgZ(23,"button",22),e.NdJ("click",function(){e.CHM(t);const _=e.oxw();return e.KtG(_.toggleFavourite(_.asset))}),e.TgZ(24,"app-icon"),e._uU(25),e.qZA()()()}if(2&o){const t=n.$implicit,i=e.MAs(5),_=e.oxw();e.xp6(1),e.Q6J("ngIf",null==_.features?null:_.features.length),e.xp6(2),e.Q6J("ngIf",null==t.images?null:t.images.length)("ngIfElse",i),e.xp6(5),e.hij(" ",t.name||"Desk"," "),e.xp6(5),e.Oqu((null==t.zone?null:t.zone.display_name)||(null==t.zone?null:t.zone.name)),e.xp6(10),e.ekj("text-blue-400",_.favorites.includes(null==_.asset?null:_.asset.id)),e.xp6(2),e.Oqu(_.favorites.includes(null==_.asset?null:_.asset.id)?"favorite":"favorite_border")}}const wn=[];class U{constructor(n,t){this._settings=n,this._dialog=t,this.features=[],this.room_size=3,this.items=[],this.disabled=!1,this.selected_features=[],this.registerOnChange=i=>this._onChange=i,this.registerOnTouched=i=>this._onTouch=i,this.setDisabledState=i=>this.disabled=i}get favorites(){return this._settings.get(B)||wn}changeResources(){const n=this._dialog.open(G,{data:{items:this.items,options:{capacity:this.room_size}}});n.afterClosed().subscribe(t=>{t||(t=n.componentInstance.selected),this.setValue(t)})}removeResource(n){this.setValue(this.items.filter(t=>t.id!==n.id))}setValue(n){this.items=n,this._onChange&&this._onChange(this.items)}writeValue(n){this.items=n||[]}toggleFavourite(n){const t=this.favorites;t.includes(n.id)?this._settings.saveUserSetting(B,t.filter(_=>_!==n.id)):this._settings.saveUserSetting(B,[...t,n.id])}}U.\u0275fac=function(n){return new(n||U)(e.Y36(ve.g),e.Y36(T.uw))},U.\u0275cmp=e.Xpm({type:U,selectors:[["desk-list-field"]],inputs:{features:"features"},features:[e._Bn([{provide:d.JU,useExisting:(0,e.Gpc)(()=>U),multi:!0}])],decls:10,vars:1,consts:function(){let o,n,t;return o=$localize`:␟76b072e559d819bff20d8a487e73f64b3afe4f86␟1087109089519255800:Add Desk`,n=$localize`:␟ca9092fdbbb85e5828de77fdf85c49b918cec128␟559636443235347532:${"\ufffd#18\ufffd"}:START_TAG_APP_ICON:edit${"\ufffd/#18\ufffd"}:CLOSE_TAG_APP_ICON: Change `,t=$localize`:␟a386ba350cdee69beeb12a908d96f0724ddc2054␟2582674642057285571:${"\ufffd#22\ufffd"}:START_TAG_APP_ICON:close${"\ufffd/#22\ufffd"}:CLOSE_TAG_APP_ICON: Remove `,[["list","",1,"space-y-2"],["desk","","class","relative p-2 rounded-lg w-full flex items-center shadow border border-gray-200",4,"ngFor","ngForOf"],["btn","","matRipple","","name","add-desk",1,"w-full","inverse","mt-2",3,"click"],[1,"flex","items-center","justify-center","space-x-2"],o,[1,"flex","items-center","flex-wrap","sm:space-x-2","mb-2"],[1,"flex-1","min-w-[256px]","space-y-2"],["desk","",1,"relative","p-2","rounded-lg","w-full","flex","items-center","shadow","border","border-gray-200"],["class","flex flex-col",4,"ngIf"],[1,"w-20","h-20","rounded-xl","bg-black/20","mr-4","overflow-hidden","flex","items-center","justify-center"],["class","min-h-full object-cover",3,"src",4,"ngIf","ngIfElse"],["placeholder",""],[1,"space-y-2","pb-4"],[1,"font-medium"],[1,"flex","items-center","text-sm","space-x-2"],[1,"text-blue-500"],[1,"absolute","bottom-0","right-0","flex","items-center","justify-end","text-xs"],["btn","","matRipple","","name","edit-desk",1,"clear",3,"click"],[1,"flex","items-center","space-x-2"],n,["btn","","matRipple","","name","remove-desk",1,"clear",3,"click"],t,["icon","","matRipple","","name","toggle-desk-favourite",1,"absolute","top-1","right-1",3,"click"],[1,"flex","flex-col"],["for","title"],["features","",1,"flex","items-center","flex-wrap","space-x-2"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngFor","ngForOf"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"min-h-full","object-cover",3,"src"],["src","assets/icons/desk-placeholder.svg",1,"m-auto"]]},template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,Kn,26,8,"div",1),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return t.changeResources()}),e.TgZ(3,"div",3)(4,"app-icon"),e._uU(5,"search"),e.qZA(),e.TgZ(6,"span"),e.SDv(7,4),e.qZA()()(),e.TgZ(8,"div",5),e._UZ(9,"div",6),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngForOf",t.items))},dependencies:[c.sg,c.O5,d.JJ,d.On,ne.oG,m.o,u.wG]}),a(4367);class ee{}ee.\u0275fac=function(n){return new(n||ee)},ee.\u0275mod=e.oAB({type:ee}),ee.\u0275inj=e.cJS({providers:[d.UX],imports:[c.ez,d.u5,d.UX,xe.Fk,ce.c,M.lN,ke.FA,De.ot,T.Is,A.Cq,ne.p9,Se.Bb,Ze.W,Re.K,u.si]}),a(1980);var Te=a(1810),be=a(9377);class te{constructor(n,t){this._org=n,this._dialog=t,this.can_set_date=!0,this.error_on_host=!0}bookDesk({desks:n,host:t,reason:i,attendees:_,date:s}){var l=this;return(0,v.Z)(function*(){if(l.error_on_host&&!t)return(0,f.cB)("You need to select a host to book a desk.");t=t||(0,f.ar)(),i=i||"";const r=l._org.levelWithID(n[0].zone instanceof Array?n[0].zone:[n[0].zone?.id]);let p=l._dialog.open(Oe.I),I=yield Promise.race([p.componentInstance.event.pipe((0,me.P)(C=>"done"===C.reason)).toPromise(),p.afterClosed().pipe((0,E.U)(C=>null)).toPromise()]);if(!I||(p.close(),p=l._dialog.open(D,{data:{host:t,desks:n,date:s?new Date(s):new Date,reason:i,level:r,can_set_date:l.can_set_date}}),I=yield Promise.race([p.componentInstance.event.pipe((0,me.P)(C=>"done"===C.reason)).toPromise(),p.afterClosed().pipe((0,E.U)(C=>null)).toPromise()]),!I))return;if(s=p.componentInstance.date||s,i=p.componentInstance.reason||i,!(t=p.componentInstance.host||t))return p.close(),(0,f.cB)("You need to select a host to book a desk. ");if(p.componentInstance.loading="Checking for existing desk bookings...",(yield(0,O.F2)({type:"desk",period_start:(0,Te.Z)((0,be.Z)(s||new Date)),period_end:(0,Te.Z)((0,ie.Z)(s||new Date))}).toPromise()).filter(C=>C.user_email.toLowerCase()===t.email.toLowerCase())?.length)return p.close(),(0,f.cB)("You currently already have a desk booked for the selected date.");p.componentInstance.loading="Booking desk...";const le=[t,..._||[]];return yield Promise.all([n.map((C,ae)=>l.makeDeskBooking(C,t,s.valueOf()||(new Date).valueOf(),i,le[ae]))]),(0,f.t5)("Successfully booked desk"),p.close(),!0})()}makeDeskBooking(n,t,i,_,s=null){var l=this;return(0,v.Z)(function*(){const r=`${n.zone?.name}-${n.id}`,p=l._org.levelWithID(n.zone instanceof Array?n.zone:[n.zone?.id]),I=n.zone?.id?[n.zone?.id,p?.parent_id]:[p?.parent_id],L={booking_start:(0,Te.Z)((0,be.Z)(i)),user_id:s?.id||t.id,user_name:s?.name||t.name,user_email:s?.email||t.email,booking_end:Math.floor((0,ie.Z)(i).valueOf()/1e3),asset_id:n.id,asset_name:n.name,title:_,description:r,zones:I,booking_type:"desk",extension_data:{map_id:n?.map_id||n?.id,groups:n.groups,for_user:s?.email}};return(0,O.km)(L).toPromise()})()}}te.\u0275fac=function(n){return new(n||te)(e.LFG(X.w7),e.LFG(T.uw))},te.\u0275prov=e.Yz7({token:te,factory:te.\u0275fac,providedIn:"root"})}}]);
//# sourceMappingURL=default-libs_bookings_src_index_ts.js.map