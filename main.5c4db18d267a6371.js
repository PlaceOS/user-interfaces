(self.webpackChunkassistant_panel=self.webpackChunkassistant_panel||[]).push([[792],{785:(cn,Nt,ye)=>{"use strict";var ut={};ye.r(ut),ye.d(ut,{CompositeArrayBuffer:()=>oh,browserFiles:()=>cmt,browserHTTPRequest:()=>mmt,concatenateArrayBuffers:()=>Ebe,copyModel:()=>Fft,decodeWeights:()=>ybe,decodeWeightsStream:()=>Sbe,encodeWeights:()=>xG,fromMemory:()=>gmt,fromMemorySync:()=>Zbe,getLoadHandlers:()=>Cft,getModelArtifactsForJSON:()=>AG,getModelArtifactsForJSONSync:()=>kbe,getModelArtifactsInfoForJSON:()=>l2,getSaveHandlers:()=>Dbe,getWeightSpecs:()=>NG,http:()=>XG,isHTTPScheme:()=>KG,listModels:()=>Oft,loadWeights:()=>dmt,moveModel:()=>Lft,registerLoadRouter:()=>wft,registerSaveRouter:()=>yft,removeModel:()=>Rft,weightsLoaderFactory:()=>qbe,withSaveHandler:()=>bmt,withSaveHandlerSync:()=>vmt});var _n={};ye.r(_n),ye.d(_n,{assertParamsValid:()=>ej,computeFlatOffset:()=>ij,computeOutShape:()=>tj,getNormalizedAxes:()=>Imt,isSliceContinous:()=>nj,maskToAxes:()=>Tmt,parseSliceParams:()=>TL,sliceInfo:()=>sj,startForAxis:()=>cve,startIndicesWithElidedDims:()=>ove,stopForAxis:()=>uve,stopIndicesWithElidedDims:()=>ave,stridesForAxis:()=>lve,stridesWithElidedDims:()=>ive});var It={};ye.r(It),ye.d(It,{conv2d:()=>cye,depthwiseConv2d:()=>qvt,matMul:()=>jj});var Mt={};ye.r(Mt),ye.d(Mt,{collectGatherOpShapeInfo:()=>vH,computeOutShape:()=>jye,segOpComputeOptimalWindowSize:()=>Gye});var dt={};ye.r(dt),ye.d(dt,{ERF_A1:()=>rH,ERF_A2:()=>oH,ERF_A3:()=>aH,ERF_A4:()=>lH,ERF_A5:()=>cH,ERF_P:()=>sH,PARALLELIZE_THRESHOLD:()=>Jj,RowPartitionType:()=>wp,SELU_SCALE:()=>JL,SELU_SCALEALPHA:()=>QL,applyActivation:()=>XL,assertAndGetBroadcastShape:()=>mi,assertAxesAreInnerMostDims:()=>Pa,assertParamsConsistent:()=>Qj,assignToTypedArray:()=>Iye,axesAreInnerMostDims:()=>mj,calculateShapes:()=>Bv,checkEinsumDimSizes:()=>fH,checkPadOnDimRoundingMode:()=>wl,combineLocations:()=>Pve,combineRaggedTensorToTensorShapes:()=>yye,complexWithEvenIndex:()=>Eye,complexWithOddIndex:()=>Tye,computeConv2DInfo:()=>Ca,computeConv3DInfo:()=>F_,computeDefaultPad:()=>oj,computeDilation2DInfo:()=>c2,computeOptimalWindowSize:()=>ZL,computeOutAndReduceShapes:()=>Sa,computeOutShape:()=>yp,computePool2DInfo:()=>ed,computePool3DInfo:()=>Vf,convertConv2DDataFormat:()=>zf,decodeEinsumEquation:()=>hH,eitherStridesOrDilationsAreOne:()=>La,expandShapeToKeepDim:()=>_o,exponent:()=>Dye,exponents:()=>kye,fromStringArrayToUint8:()=>Hye,fromUint8ToStringArray:()=>jf,getAxesPermutation:()=>Gr,getBroadcastDims:()=>Hw,getComplexWithIndex:()=>uH,getEinsumComputePath:()=>mH,getEinsumPermutation:()=>pH,getFusedBiasGradient:()=>KL,getFusedDyActivation:()=>qL,getImageCenter:()=>eH,getInnerMostAxes:()=>go,getPermuted:()=>x2,getRaggedRank:()=>Cye,getReductionAxes:()=>Yo,getReshaped:()=>S2,getReshapedPermuted:()=>E2,getRowPartitionTypesHelper:()=>wye,getSliceBeginCoords:()=>tH,getSliceSize:()=>nH,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>Nye,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>Oye,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>Rye,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>Pye,getSparseReshapeInputOutputMismatchErrorMessage:()=>Bye,getSparseReshapeInputOutputMultipleErrorMessage:()=>$ye,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>Fye,getSparseReshapeNegativeOutputDimErrorMessage:()=>Lye,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>Uye,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>bH,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>Vye,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>zye,getUndoAxesPermutation:()=>$_,isIdentityPermutation:()=>_H,log:()=>Npt,mergeRealAndImagArrays:()=>Gf,prepareAndValidate:()=>iH,prepareSplitSize:()=>gH,segment_util:()=>Mt,shouldFuse:()=>YL,slice_util:()=>_n,splitRealAndImagArrays:()=>xye,stridesOrDilationsArePositive:()=>Nv,tupleValuesAreOne:()=>L_,upcastType:()=>Sc,validateDefaultValueShape:()=>Sye,validateInput:()=>Fj,validateUpdateShape:()=>nye,warn:()=>uu});var tt={};ye.r(tt),ye.d(tt,{json:()=>PSt});var _t={};ye.r(_t),ye.d(_t,{json:()=>$St});var Re={};ye.r(Re),ye.d(Re,{json:()=>BSt});var X={};ye.r(X),ye.d(X,{json:()=>VSt});var ke={};ye.r(ke),ye.d(ke,{json:()=>zSt});var de={};ye.r(de),ye.d(de,{json:()=>USt});var ee={};ye.r(ee),ye.d(ee,{json:()=>GSt});var ie={};ye.r(ie),ye.d(ie,{json:()=>jSt});var J={};ye.r(J),ye.d(J,{json:()=>HSt});var De={};ye.r(De),ye.d(De,{json:()=>WSt});var ze={};ye.r(ze),ye.d(ze,{json:()=>qSt});var ht={};ye.r(ht),ye.d(ht,{json:()=>KSt});var Et={};ye.r(Et),ye.d(Et,{json:()=>XSt});var Ft={};ye.r(Ft),ye.d(Ft,{json:()=>YSt});var Ot={};ye.r(Ot),ye.d(Ot,{json:()=>ZSt});var $t={};ye.r($t),ye.d($t,{json:()=>QSt});var Ht={};ye.r(Ht),ye.d(Ht,{json:()=>JSt});var Ut={};ye.r(Ut),ye.d(Ut,{json:()=>ext});var Xe={};ye.r(Xe),ye.d(Xe,{json:()=>txt});var Me={};ye.r(Me),ye.d(Me,{OP_SCOPE_SUFFIX:()=>gbe,abs:()=>Xo,acos:()=>hve,acosh:()=>pve,add:()=>lt,addN:()=>Omt,all:()=>rj,any:()=>IL,argMax:()=>Ww,argMin:()=>fve,asin:()=>mve,asinh:()=>_ve,atan:()=>gve,atan2:()=>bve,atanh:()=>vve,avgPool:()=>kL,avgPool3d:()=>yve,basicLSTMCell:()=>n_t,batchNorm:()=>h2,batchNorm2d:()=>wve,batchNorm3d:()=>Cve,batchNorm4d:()=>Sve,batchToSpaceND:()=>DL,bincount:()=>xve,bitwiseAnd:()=>d_t,booleanMaskAsync:()=>Ivt,broadcastArgs:()=>p_t,broadcastTo:()=>Kw,buffer:()=>Di,cast:()=>Rt,ceil:()=>Eve,clipByValue:()=>xc,clone:()=>Lf,complex:()=>A_,concat:()=>mo,concat1d:()=>Tve,concat2d:()=>Ive,concat3d:()=>kve,concat4d:()=>Dve,conv1d:()=>lj,conv2d:()=>P_,conv2dTranspose:()=>uj,conv3d:()=>Ave,conv3dTranspose:()=>Nve,cos:()=>AL,cosh:()=>dj,cosineWindow:()=>zj,cumprod:()=>ML,cumsum:()=>hj,denseBincount:()=>pj,depthToSpace:()=>Ove,depthwiseConv2d:()=>p2,diag:()=>L_t,dilation2d:()=>Rve,div:()=>pn,divNoNan:()=>Fve,dot:()=>Lve,dropout:()=>aye,einsum:()=>Xw,elu:()=>f2,enclosingPowerOfTwo:()=>lye,ensureShape:()=>H_t,equal:()=>ah,erf:()=>fj,euclideanNorm:()=>Bve,exp:()=>Ec,expandDims:()=>nl,expm1:()=>Vve,eye:()=>_j,fft:()=>HL,fill:()=>jw,floor:()=>g2,floorDiv:()=>UG,fused:()=>It,gather:()=>b2,gatherND:()=>Pvt,greater:()=>Tc,greaterEqual:()=>B_,ifft:()=>C2,imag:()=>NL,image:()=>rd,inTopKAsync:()=>zvt,irfft:()=>Oj,isFinite:()=>zve,isInf:()=>Uve,isNaN:()=>Gve,leakyRelu:()=>OL,less:()=>v2,lessEqual:()=>Rv,linalg:()=>bye,linspace:()=>fgt,localResponseNormalization:()=>jve,log:()=>pu,log1p:()=>RL,logSigmoid:()=>Hve,logSoftmax:()=>gj,logSumExp:()=>FL,logicalAnd:()=>bp,logicalNot:()=>LL,logicalOr:()=>bj,logicalXor:()=>Wve,losses:()=>E1t,lowerBound:()=>kgt,matMul:()=>Hi,max:()=>td,maxPool:()=>$L,maxPool3d:()=>qve,maxPoolWithArgmax:()=>Ngt,maximum:()=>Bf,mean:()=>to,meshgrid:()=>Rgt,min:()=>m2,minimum:()=>Fv,mirrorPad:()=>Kve,mod:()=>Xve,moments:()=>BL,movingAverage:()=>Avt,mul:()=>pe,multiRNNCell:()=>Vgt,multinomial:()=>Ugt,neg:()=>kr,norm:()=>_2,notEqual:()=>Zw,oneHot:()=>yj,ones:()=>Ic,onesLike:()=>fu,op:()=>re,outerProduct:()=>qgt,pad:()=>V_,pad1d:()=>Ygt,pad2d:()=>Qgt,pad3d:()=>ebt,pad4d:()=>nbt,pool:()=>Yve,pow:()=>$f,prelu:()=>zL,print:()=>Pbe,prod:()=>Zve,raggedGather:()=>ubt,raggedRange:()=>hbt,raggedTensorToTensor:()=>fbt,rand:()=>_bt,randomGamma:()=>Sbt,randomNormal:()=>Sj,randomStandardNormal:()=>Tbt,randomUniform:()=>Lv,randomUniformInt:()=>Dbt,range:()=>Jw,real:()=>y2,reciprocal:()=>Qve,relu:()=>vp,relu6:()=>xj,reshape:()=>ge,reverse:()=>id,reverse1d:()=>Lbt,reverse2d:()=>$bt,reverse3d:()=>Vbt,reverse4d:()=>Ubt,rfft:()=>WL,round:()=>Ej,rsqrt:()=>Tj,scalar:()=>En,scatterND:()=>Nvt,searchSorted:()=>vj,selu:()=>Ij,separableConv2d:()=>kj,setdiff1dAsync:()=>Kbt,sigmoid:()=>gp,sign:()=>Jve,signal:()=>x1t,sin:()=>Aj,sinh:()=>Mj,slice:()=>is,slice1d:()=>UL,slice2d:()=>Nj,slice3d:()=>GL,slice4d:()=>w2,softmax:()=>jL,softplus:()=>Yw,spaceToBatchND:()=>VL,sparse:()=>T1t,sparseToDense:()=>Fvt,spectral:()=>S1t,split:()=>kc,sqrt:()=>Fa,square:()=>lr,squaredDifference:()=>Rj,squeeze:()=>Pv,stack:()=>Kl,step:()=>eC,stridedSlice:()=>eye,string:()=>I1t,sub:()=>Xt,sum:()=>un,tan:()=>tye,tanh:()=>Ov,tensor:()=>hu,tensor1d:()=>il,tensor2d:()=>$v,tensor3d:()=>Qbe,tensor4d:()=>fvt,tensor5d:()=>mvt,tensor6d:()=>_vt,tensorScatterUpdate:()=>bvt,tile:()=>nd,topk:()=>iye,transpose:()=>ss,truncatedNormal:()=>Lj,unique:()=>sye,unsortedSegmentSum:()=>Pj,unstack:()=>sd,upperBound:()=>xvt,variable:()=>rye,where:()=>tl,whereAsync:()=>oye,zeros:()=>Zo,zerosLike:()=>ns});var L={};ye.r(L),ye.d(L,{mx:()=>awe,XI:()=>OW,Nk:()=>pwe,f6:()=>fwe,ct:()=>owe,YG:()=>mwe,hH:()=>_we,z3:()=>vwe,sG:()=>wwe,uM:()=>Swe,vS:()=>Twe,qB:()=>Iwe,GG:()=>kwe,lg:()=>Awe,rq:()=>Dwe,cu:()=>Nwe,WR:()=>Mwe,GE:()=>Owe,px:()=>Rwe,jC:()=>Fwe,He:()=>Pwe,hE:()=>$we,BF:()=>RW,Dk:()=>Vwe,cl:()=>zwe,_B:()=>Hwe,ub:()=>qwe,_f:()=>Xwe,Ku:()=>Qwe,qy:()=>Jwe,Zy:()=>eCe,bu:()=>Yv,zv:()=>REt,dH:()=>cwe,HS:()=>hwe,yH:()=>nCe,l3:()=>iCe,z9:()=>VW,x6:()=>aAt,_m:()=>sCe,eW:()=>rCe,GK:()=>oCe,SP:()=>aCe,yr:()=>lCe,dl:()=>xwe,Dw:()=>cCe,xT:()=>dCe,_X:()=>MW,wz:()=>pCe});var we={};function _e(t,n){return Object.is(t,n)}ye.r(we),ye.d(we,{Attributor:()=>Op,AttributorStore:()=>vP,BlockBlot:()=>lk,ClassAttributor:()=>mh,ContainerBlot:()=>yP,EmbedBlot:()=>yu,InlineBlot:()=>Oq,LeafBlot:()=>El,ParentBlot:()=>_h,Registry:()=>OC,Scope:()=>vn,ScrollBlot:()=>Fq,StyleAttributor:()=>og,TextBlot:()=>wP});let Ve=null,qe=!1,Be=1;const rt=Symbol("SIGNAL");function Je(t){const n=Ve;return Ve=t,n}const Jt={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Mn(t){if(qe)throw new Error("");if(null===Ve)return;Ve.consumerOnSignalRead(t);const n=Ve.nextProducerIndex++;wh(Ve),n<Ve.producerNode.length&&Ve.producerNode[n]!==t&&so(Ve)&&Nr(Ve.producerNode[n],Ve.producerIndexOfThis[n]),Ve.producerNode[n]!==t&&(Ve.producerNode[n]=t,Ve.producerIndexOfThis[n]=so(Ve)?As(t,Ve,n):0),Ve.producerLastReadVersion[n]=t.version}function In(t){if((!so(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Be)){if(!t.producerMustRecompute(t)&&!hs(t))return t.dirty=!1,void(t.lastCleanEpoch=Be);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Be}}function tr(t){if(void 0===t.liveConsumerNode)return;const n=qe;qe=!0;try{for(const e of t.liveConsumerNode)e.dirty||yi(e)}finally{qe=n}}function dr(){return!1!==Ve?.consumerAllowSignalWrites}function yi(t){t.dirty=!0,tr(t),t.consumerMarkedDirty?.(t)}function rs(t){return t&&(t.nextProducerIndex=0),Je(t)}function os(t,n){if(Je(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(so(t))for(let e=t.nextProducerIndex;e<t.producerNode.length;e++)Nr(t.producerNode[e],t.producerIndexOfThis[e]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function hs(t){wh(t);for(let n=0;n<t.producerNode.length;n++){const e=t.producerNode[n],i=t.producerLastReadVersion[n];if(i!==e.version||(In(e),i!==e.version))return!0}return!1}function vs(t){if(wh(t),so(t))for(let n=0;n<t.producerNode.length;n++)Nr(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function As(t,n,e){if(vg(t),0===t.liveConsumerNode.length&&gy(t))for(let i=0;i<t.producerNode.length;i++)t.producerIndexOfThis[i]=As(t.producerNode[i],t,i);return t.liveConsumerIndexOfThis.push(e),t.liveConsumerNode.push(n)-1}function Nr(t,n){if(vg(t),1===t.liveConsumerNode.length&&gy(t))for(let i=0;i<t.producerNode.length;i++)Nr(t.producerNode[i],t.producerIndexOfThis[i]);const e=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[e],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[e],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const i=t.liveConsumerIndexOfThis[n],s=t.liveConsumerNode[n];wh(s),s.producerIndexOfThis[i]=n}}function so(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function wh(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function vg(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function gy(t){return void 0!==t.producerNode}function by(t){const n=Object.create(vy);n.computation=t;const e=()=>{if(In(n),Mn(n),n.value===$p)throw n.error;return n.value};return e[rt]=n,e}const Ch=Symbol("UNSET"),Pp=Symbol("COMPUTING"),$p=Symbol("ERRORED"),vy={...Jt,value:Ch,dirty:!0,error:null,equal:_e,producerMustRecompute:t=>t.value===Ch||t.value===Pp,producerRecomputeValue(t){if(t.value===Pp)throw new Error("Detected cycle in computations.");const n=t.value;t.value=Pp;const e=rs(t);let i;try{i=t.computation()}catch(s){i=$p,t.error=s}finally{os(t,e)}n!==Ch&&n!==$p&&i!==$p&&t.equal(n,i)?t.value=n:(t.value=i,t.version++)}};let Bp=function xu(){throw new Error};function yy(){Bp()}let wd=null;function wg(t,n){dr()||yy(),t.equal(t.value,n)||(t.value=n,function Cy(t){t.version++,function vi(){Be++}(),tr(t),wd?.()}(t))}const sm={...Jt,equal:_e,value:void 0};const Cd=()=>{},Rc={...Jt,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{null!==t.schedule&&t.schedule(t.ref)},hasRun:!1,cleanupFn:Cd};function Sd(t){return"function"==typeof t}let xd=!1;const Ua={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const n=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+n.stack)}else xd&&console.log("RxJS: Back to a better error behavior. Thank you. <3");xd=t},get useDeprecatedSynchronousErrorHandling(){return xd}};function tc(t){setTimeout(()=>{throw t},0)}const Sh={closed:!0,next(t){},error(t){if(Ua.useDeprecatedSynchronousErrorHandling)throw t;tc(t)},complete(){}},Fc=Array.isArray||(t=>t&&"number"==typeof t.length);function zp(t){return null!==t&&"object"==typeof t}const Gp=(()=>{function t(n){return Error.call(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((e,i)=>`${i+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n,this}return t.prototype=Object.create(Error.prototype),t})();class rn{constructor(n){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,n&&(this._ctorUnsubscribe=!0,this._unsubscribe=n)}unsubscribe(){let n;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:i,_unsubscribe:s,_subscriptions:r}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof rn)e.remove(this);else if(null!==e)for(let o=0;o<e.length;++o)e[o].remove(this);if(Sd(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(o){n=o instanceof Gp?Sy(o.errors):[o]}}if(Fc(r)){let o=-1,a=r.length;for(;++o<a;){const l=r[o];if(zp(l))try{l.unsubscribe()}catch(c){n=n||[],c instanceof Gp?n=n.concat(Sy(c.errors)):n.push(c)}}}if(n)throw new Gp(n)}add(n){let e=n;if(!n)return rn.EMPTY;switch(typeof n){case"function":e=new rn(n);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof rn)){const r=e;e=new rn,e._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+n+" added to Subscription.")}let{_parentOrParents:i}=e;if(null===i)e._parentOrParents=this;else if(i instanceof rn){if(i===this)return e;e._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return e;i.push(this)}const s=this._subscriptions;return null===s?this._subscriptions=[e]:s.push(e),e}remove(n){const e=this._subscriptions;if(e){const i=e.indexOf(n);-1!==i&&e.splice(i,1)}}}var t;function Sy(t){return t.reduce((n,e)=>n.concat(e instanceof Gp?e.errors:e),[])}rn.EMPTY=((t=new rn).closed=!0,t);const om="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class Mi extends rn{constructor(n,e,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Sh;break;case 1:if(!n){this.destination=Sh;break}if("object"==typeof n){n instanceof Mi?(this.syncErrorThrowable=n.syncErrorThrowable,this.destination=n,n.add(this)):(this.syncErrorThrowable=!0,this.destination=new am(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new am(this,n,e,i)}}[om](){return this}static create(n,e,i){const s=new Mi(n,e,i);return s.syncErrorThrowable=!1,s}next(n){this.isStopped||this._next(n)}error(n){this.isStopped||(this.isStopped=!0,this._error(n))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(n){this.destination.next(n)}_error(n){this.destination.error(n),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:n}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=n,this}}class am extends Mi{constructor(n,e,i,s){super(),this._parentSubscriber=n;let r,o=this;Sd(e)?r=e:e&&(r=e.next,i=e.error,s=e.complete,e!==Sh&&(o=Object.create(e),Sd(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=r,this._error=i,this._complete=s}next(n){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;Ua.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,n)&&this.unsubscribe():this.__tryOrUnsub(this._next,n)}}error(n){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:i}=Ua;if(this._error)i&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,n),this.unsubscribe()):(this.__tryOrUnsub(this._error,n),this.unsubscribe());else if(e.syncErrorThrowable)i?(e.syncErrorValue=n,e.syncErrorThrown=!0):tc(n),this.unsubscribe();else{if(this.unsubscribe(),i)throw n;tc(n)}}}complete(){if(!this.isStopped){const{_parentSubscriber:n}=this;if(this._complete){const e=()=>this._complete.call(this._context);Ua.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?(this.__tryOrSetError(n,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(n,e){try{n.call(this._context,e)}catch(i){if(this.unsubscribe(),Ua.useDeprecatedSynchronousErrorHandling)throw i;tc(i)}}__tryOrSetError(n,e,i){if(!Ua.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,i)}catch(s){return Ua.useDeprecatedSynchronousErrorHandling?(n.syncErrorValue=s,n.syncErrorThrown=!0,!0):(tc(s),!0)}return!1}_unsubscribe(){const{_parentSubscriber:n}=this;this._context=null,this._parentSubscriber=null,n.unsubscribe()}}const jp="function"==typeof Symbol&&Symbol.observable||"@@observable";function lm(t){return t}function xy(t){return 0===t.length?lm:1===t.length?t[0]:function(e){return t.reduce((i,s)=>s(i),e)}}let Pn=(()=>{class t{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,s){const{operator:r}=this,o=function tS(t,n,e){if(t){if(t instanceof Mi)return t;if(t[om])return t[om]()}return t||n||e?new Mi(t,n,e):new Mi(Sh)}(e,i,s);if(o.add(r?r.call(o,this.source):this.source||Ua.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),Ua.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){Ua.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=i),function sa(t){for(;t;){const{closed:n,destination:e,isStopped:i}=t;if(n||i)return!1;t=e&&e instanceof Mi?e:null}return!0}(e)?e.error(i):console.warn(i)}}forEach(e,i){return new(i=Ey(i))((s,r)=>{let o;o=this.subscribe(a=>{try{e(a)}catch(l){r(l),o&&o.unsubscribe()}},r,s)})}_subscribe(e){const{source:i}=this;return i&&i.subscribe(e)}[jp](){return this}pipe(...e){return 0===e.length?this:xy(e)(this)}toPromise(e){return new(e=Ey(e))((i,s)=>{let r;this.subscribe(o=>r=o,o=>s(o),()=>i(r))})}}return t.create=n=>new t(n),t})();function Ey(t){if(t||(t=Ua.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const Ed=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class Ty extends rn{constructor(n,e){super(),this.subject=n,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const n=this.subject,e=n.observers;if(this.subject=null,!e||0===e.length||n.isStopped||n.closed)return;const i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}class Iy extends Mi{constructor(n){super(n),this.destination=n}}let ot=(()=>{class t extends Pn{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[om](){return new Iy(this)}lift(e){const i=new Sg(this,this);return i.operator=e,i}next(e){if(this.closed)throw new Ed;if(!this.isStopped){const{observers:i}=this,s=i.length,r=i.slice();for(let o=0;o<s;o++)r[o].next(e)}}error(e){if(this.closed)throw new Ed;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:i}=this,s=i.length,r=i.slice();for(let o=0;o<s;o++)r[o].error(e);this.observers.length=0}complete(){if(this.closed)throw new Ed;this.isStopped=!0;const{observers:e}=this,i=e.length,s=e.slice();for(let r=0;r<i;r++)s[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new Ed;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new Ed;return this.hasError?(e.error(this.thrownError),rn.EMPTY):this.isStopped?(e.complete(),rn.EMPTY):(this.observers.push(e),new Ty(this,e))}asObservable(){const e=new Pn;return e.source=this,e}}return t.create=(n,e)=>new Sg(n,e),t})();class Sg extends ot{constructor(n,e){super(),this.destination=n,this.source=e}next(n){const{destination:e}=this;e&&e.next&&e.next(n)}error(n){const{destination:e}=this;e&&e.error&&this.destination.error(n)}complete(){const{destination:n}=this;n&&n.complete&&this.destination.complete()}_subscribe(n){const{source:e}=this;return e?this.source.subscribe(n):rn.EMPTY}}class at extends ot{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return e&&!e.closed&&n.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Ed;return this._value}next(n){super.next(this._value=n)}}function me(t,n){return function(i){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new iS(t,n))}}class iS{constructor(n,e){this.project=n,this.thisArg=e}call(n,e){return e.subscribe(new sS(n,this.project,this.thisArg))}}class sS extends Mi{constructor(n,e,i){super(n),this.project=e,this.count=0,this.thisArg=i||this}_next(n){let e;try{e=this.project.call(this.thisArg,n,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const LX="https://g.co/ng/security#xss";class Fe extends Error{constructor(n,e){super(function Ly(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,e)),this.code=n}}function qp(t){return{toString:t}.toString()}const $y="__parameters__";function Vy(t,n,e){return qp(()=>{const i=function u4(t){return function(...e){if(t){const i=t(...e);for(const s in i)this[s]=i[s]}}}(n);function s(...r){if(this instanceof s)return i.apply(this,r),this;const o=new s(...r);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty($y)?l[$y]:Object.defineProperty(l,$y,{value:[]})[$y];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return e&&(s.prototype=Object.create(e.prototype)),s.prototype.ngMetadataName=t,s.annotationCls=s,s})}const Or=globalThis;function qs(t){for(let n in t)if(t[n]===qs)return n;throw Error("Could not find renamed property on target object.")}function Y2e(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function ra(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ra).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function d4(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const Z2e=qs({__forward_ref__:qs});function wn(t){return t.__forward_ref__=wn,t.toString=function(){return ra(this())},t}function Xn(t){return qk(t)?t():t}function qk(t){return"function"==typeof t&&t.hasOwnProperty(Z2e)&&t.__forward_ref__===wn}function pm(t,n,e){t!=n&&function Un(t,n,e,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${e} ${i} ${n} <=Actual]`))}(e,t,n,"==")}function Pe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function kn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Kk(t){return VX(t,Yk)||VX(t,zX)}function VX(t,n){return t.hasOwnProperty(n)?t[n]:null}function Xk(t){return t&&(t.hasOwnProperty(h4)||t.hasOwnProperty(ike))?t[h4]:null}const Yk=qs({\u0275prov:qs}),h4=qs({\u0275inj:qs}),zX=qs({ngInjectableDef:qs}),ike=qs({ngInjectorDef:qs});class Ne{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Pe({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function g4(t){return t&&!!t.\u0275providers}const fS=qs({\u0275cmp:qs}),b4=qs({\u0275dir:qs}),v4=qs({\u0275pipe:qs}),GX=qs({\u0275mod:qs}),Kp=qs({\u0275fac:qs}),mS=qs({__NG_ELEMENT_ID__:qs}),jX=qs({__NG_ENV_ID__:qs});function di(t){return"string"==typeof t?t:null==t?"":String(t)}function y4(t,n){throw new Fe(-201,!1)}var qi=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(qi||{});let w4;function HX(){return w4}function nc(t){const n=w4;return w4=t,n}function WX(t,n,e){const i=Kk(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&qi.Optional?null:void 0!==n?n:void y4()}const _S={},C4="__NG_DI_FLAG__",Zk="ngTempTokenPath",cke=/\n/gm,qX="__source";let zy;function fm(t){const n=zy;return zy=t,n}function hke(t,n=qi.Default){if(void 0===zy)throw new Fe(-203,!1);return null===zy?WX(t,void 0,n):zy.get(t,n&qi.Optional?null:void 0,n)}function ae(t,n=qi.Default){return(HX()||hke)(Xn(t),n)}function xe(t,n=qi.Default){return ae(t,Qk(n))}function Qk(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function S4(t){const n=[];for(let e=0;e<t.length;e++){const i=Xn(t[e]);if(Array.isArray(i)){if(0===i.length)throw new Fe(900,!1);let s,r=qi.Default;for(let o=0;o<i.length;o++){const a=i[o],l=pke(a);"number"==typeof l?-1===l?s=a.token:r|=l:s=a}n.push(ae(s,r))}else n.push(ae(i))}return n}function gS(t,n){return t[C4]=n,t.prototype[C4]=n,t}function pke(t){return t[C4]}const XX=gS(Vy("Inject",t=>({token:t})),-1),Ih=gS(Vy("Optional"),8),Xp=gS(Vy("SkipSelf"),4);function Og(t,n){return t.hasOwnProperty(Kp)?t[Kp]:null}function Uy(t,n){t.forEach(e=>Array.isArray(e)?Uy(e,n):n(e))}function YX(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function Jk(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Vc(t,n,e){let i=Gy(t,n);return i>=0?t[1|i]=e:(i=~i,function ZX(t,n,e,i){let s=t.length;if(s==n)t.push(e,i);else if(1===s)t.push(i,t[0]),t[0]=e;else{for(s--,t.push(t[s-1],t[s]);s>n;)t[s]=t[s-2],s--;t[n]=e,t[n+1]=i}}(t,i,n,e)),i}function E4(t,n){const e=Gy(t,n);if(e>=0)return t[1|e]}function Gy(t,n){return function QX(t,n,e){let i=0,s=t.length>>e;for(;s!==i;){const r=i+(s-i>>1),o=t[r<<e];if(n===o)return r<<e;o>n?s=r:i=r+1}return~(s<<e)}(t,n,1)}const kh={},ys=[],Dd=new Ne(""),JX=new Ne("",-1),T4=new Ne("");class tD{get(n,e=_S){if(e===_S){const i=new Error(`NullInjectorError: No provider for ${ra(n)}!`);throw i.name="NullInjectorError",i}return e}}var nD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(nD||{}),Ad=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ad||{}),mm=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(mm||{});function vke(t,n,e){let i=t.length;for(;;){const s=t.indexOf(n,e);if(-1===s)return s;if(0===s||t.charCodeAt(s-1)<=32){const r=n.length;if(s+r===i||t.charCodeAt(s+r)<=32)return s}e=s+1}}function I4(t,n,e){let i=0;for(;i<e.length;){const s=e[i];if("number"==typeof s){if(0!==s)break;i++;const r=e[i++],o=e[i++],a=e[i++];t.setAttribute(n,o,a,r)}else{const r=s,o=e[++i];tY(r)?t.setProperty(n,r,o):t.setAttribute(n,r,o),i++}}return i}function eY(t){return 3===t||4===t||6===t}function tY(t){return 64===t.charCodeAt(0)}function bS(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){const s=n[i];"number"==typeof s?e=s:0===e||nY(t,e,s,null,-1===e||2===e?n[++i]:null)}}return t}function nY(t,n,e,i,s){let r=0,o=t.length;if(-1===n)o=-1;else for(;r<t.length;){const a=t[r++];if("number"==typeof a){if(a===n){o=-1;break}if(a>n){o=r-1;break}}}for(;r<t.length;){const a=t[r];if("number"==typeof a)break;if(a===e){if(null===i)return void(null!==s&&(t[r+1]=s));if(i===t[r+1])return void(t[r+2]=s)}r++,null!==i&&r++,null!==s&&r++}-1!==o&&(t.splice(o,0,n),r=o+1),t.splice(r++,0,e),null!==i&&t.splice(r++,0,i),null!==s&&t.splice(r++,0,s)}const iY="ng-template";function yke(t,n,e,i){let s=0;if(i){for(;s<n.length&&"string"==typeof n[s];s+=2)if("class"===n[s]&&-1!==vke(n[s+1].toLowerCase(),e,0))return!0}else if(k4(t))return!1;if(s=n.indexOf(1,s),s>-1){let r;for(;++s<n.length&&"string"==typeof(r=n[s]);)if(r.toLowerCase()===e)return!0}return!1}function k4(t){return 4===t.type&&t.value!==iY}function wke(t,n,e){return n===(4!==t.type||e?t.value:iY)}function Cke(t,n,e){let i=4;const s=t.attrs,r=null!==s?function Eke(t){for(let n=0;n<t.length;n++)if(eY(t[n]))return n;return t.length}(s):0;let o=!1;for(let a=0;a<n.length;a++){const l=n[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!wke(t,l,e)||""===l&&1===n.length){if(Md(i))return!1;o=!0}}else if(8&i){if(null===s||!yke(t,s,l,e)){if(Md(i))return!1;o=!0}}else{const c=n[++a],u=Ske(l,s,k4(t),e);if(-1===u){if(Md(i))return!1;o=!0;continue}if(""!==c){let d;if(d=u>r?"":s[u+1].toLowerCase(),2&i&&c!==d){if(Md(i))return!1;o=!0}}}}else{if(!o&&!Md(i)&&!Md(l))return!1;if(o&&Md(l))continue;o=!1,i=l|1&i}}return Md(i)||o}function Md(t){return!(1&t)}function Ske(t,n,e,i){if(null===n)return-1;let s=0;if(i||!e){let r=!1;for(;s<n.length;){const o=n[s];if(o===t)return s;if(3===o||6===o)r=!0;else{if(1===o||2===o){let a=n[++s];for(;"string"==typeof a;)a=n[++s];continue}if(4===o)break;if(0===o){s+=4;continue}}s+=r?1:2}return-1}return function Tke(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const i=t[e];if("number"==typeof i)return-1;if(i===n)return e;e++}return-1}(n,t)}function sY(t,n,e=!1){for(let i=0;i<n.length;i++)if(Cke(t,n[i],e))return!0;return!1}function Ike(t,n){e:for(let e=0;e<n.length;e++){const i=n[e];if(t.length===i.length){for(let s=0;s<t.length;s++)if(t[s]!==i[s])continue e;return!0}}return!1}function rY(t,n){return t?":not("+n.trim()+")":n}function kke(t){let n=t[0],e=1,i=2,s="",r=!1;for(;e<t.length;){let o=t[e];if("string"==typeof o)if(2&i){const a=t[++e];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?s+="."+o:4&i&&(s+=" "+o);else""!==s&&!Md(o)&&(n+=rY(r,s),s=""),i=o,r=r||!Md(i);e++}return""!==s&&(n+=rY(r,s)),n}function Se(t){return qp(()=>{const n=aY(t),e={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===nD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ad.Emulated,styles:t.styles||ys,_:null,schemas:t.schemas||null,tView:null,id:""};lY(e);const i=t.dependencies;return e.directiveDefs=iD(i,!1),e.pipeDefs=iD(i,!0),e.id=function Rke(t){let n=0;const e=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const s of e)n=Math.imul(31,n)+s.charCodeAt(0)|0;return n+=2147483648,"c"+n}(e),e})}function Mke(t){return Gi(t)||oa(t)}function Nke(t){return null!==t}function Nn(t){return qp(()=>({type:t.type,bootstrap:t.bootstrap||ys,declarations:t.declarations||ys,imports:t.imports||ys,exports:t.exports||ys,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function oY(t,n){if(null==t)return kh;const e={};for(const i in t)if(t.hasOwnProperty(i)){const s=t[i];let r,o,a=mm.None;Array.isArray(s)?(a=s[0],r=s[1],o=s[2]??r):(r=s,o=s),n?(e[r]=a!==mm.None?[i,a]:i,n[r]=o):e[r]=i}return e}function He(t){return qp(()=>{const n=aY(t);return lY(n),n})}function nr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Gi(t){return t[fS]||null}function oa(t){return t[b4]||null}function ja(t){return t[v4]||null}function cl(t,n){const e=t[GX]||null;if(!e&&!0===n)throw new Error(`Type ${ra(t)} does not have '\u0275mod' property.`);return e}function aY(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||kh,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||ys,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:oY(t.inputs,n),outputs:oY(t.outputs),debugInfo:null}}function lY(t){t.features?.forEach(n=>n(t))}function iD(t,n){if(!t)return null;const e=n?ja:Mke;return()=>("function"==typeof t?t():t).map(i=>e(i)).filter(Nke)}function jy(t){return{\u0275providers:t}}function Fke(...t){return{\u0275providers:D4(0,t),\u0275fromNgModule:!0}}function D4(t,...n){const e=[],i=new Set;let s;const r=o=>{e.push(o)};return Uy(n,o=>{const a=o;sD(a,r,[],i)&&(s||=[],s.push(a))}),void 0!==s&&cY(s,r),e}function cY(t,n){for(let e=0;e<t.length;e++){const{ngModule:i,providers:s}=t[e];A4(s,r=>{n(r,i)})}}function sD(t,n,e,i){if(!(t=Xn(t)))return!1;let s=null,r=Xk(t);const o=!r&&Gi(t);if(r||o){if(o&&!o.standalone)return!1;s=t}else{const l=t.ngModule;if(r=Xk(l),!r)return!1;s=l}const a=i.has(s);if(o){if(a)return!1;if(i.add(s),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)sD(c,n,e,i)}}else{if(!r)return!1;{if(null!=r.imports&&!a){let c;i.add(s);try{Uy(r.imports,u=>{sD(u,n,e,i)&&(c||=[],c.push(u))})}finally{}void 0!==c&&cY(c,n)}if(!a){const c=Og(s)||(()=>new s);n({provide:s,useFactory:c,deps:ys},s),n({provide:T4,useValue:s,multi:!0},s),n({provide:Dd,useValue:()=>ae(s),multi:!0},s)}const l=r.providers;if(null!=l&&!a){const c=t;A4(l,u=>{n(u,c)})}}}return s!==t&&void 0!==t.providers}function A4(t,n){for(let e of t)g4(e)&&(e=e.\u0275providers),Array.isArray(e)?A4(e,n):n(e)}const Lke=qs({provide:String,useValue:qs});function M4(t){return null!==t&&"object"==typeof t&&Lke in t}function Rg(t){return"function"==typeof t}const N4=new Ne(""),rD={},$ke={};let O4;function oD(){return void 0===O4&&(O4=new tD),O4}class ul{}class Hy extends ul{get destroyed(){return this._destroyed}constructor(n,e,i,s){super(),this.parent=e,this.source=i,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,F4(n,o=>this.processProvider(o)),this.records.set(JX,Wy(void 0,this)),s.has("environment")&&this.records.set(ul,Wy(void 0,this));const r=this.records.get(N4);null!=r&&"string"==typeof r.value&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(T4,ys,qi.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const n=Je(null);try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Je(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const e=fm(this),i=nc(void 0);try{return n()}finally{fm(e),nc(i)}}get(n,e=_S,i=qi.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(jX))return n[jX](this);i=Qk(i);const r=fm(this),o=nc(void 0);try{if(!(i&qi.SkipSelf)){let l=this.records.get(n);if(void 0===l){const c=function Gke(t){return"function"==typeof t||"object"==typeof t&&t instanceof Ne}(n)&&Kk(n);l=c&&this.injectableDefInScope(c)?Wy(R4(n),rD):null,this.records.set(n,l)}if(null!=l)return this.hydrate(n,l)}return(i&qi.Self?oD():this.parent).get(n,e=i&qi.Optional&&e===_S?null:e)}catch(a){if("NullInjectorError"===a.name){if((a[Zk]=a[Zk]||[]).unshift(ra(n)),r)throw a;return function fke(t,n,e,i){const s=t[Zk];throw n[qX]&&s.unshift(n[qX]),t.message=function mke(t,n,e,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let s=ra(n);if(Array.isArray(n))s=n.map(ra).join(" -> ");else if("object"==typeof n){let r=[];for(let o in n)if(n.hasOwnProperty(o)){let a=n[o];r.push(o+":"+("string"==typeof a?JSON.stringify(a):ra(a)))}s=`{${r.join(", ")}}`}return`${e}${i?"("+i+")":""}[${s}]: ${t.replace(cke,"\n  ")}`}("\n"+t.message,s,e,i),t.ngTokenPath=s,t[Zk]=null,t}(a,n,"R3InjectorError",this.source)}throw a}finally{nc(o),fm(r)}}resolveInjectorInitializers(){const n=Je(null),e=fm(this),i=nc(void 0);try{const r=this.get(Dd,ys,qi.Self);for(const o of r)o()}finally{fm(e),nc(i),Je(n)}}toString(){const n=[],e=this.records;for(const i of e.keys())n.push(ra(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Fe(205,!1)}processProvider(n){let e=Rg(n=Xn(n))?n:Xn(n&&n.provide);const i=function Vke(t){return M4(t)?Wy(void 0,t.useValue):Wy(hY(t),rD)}(n);if(!Rg(n)&&!0===n.multi){let s=this.records.get(e);s||(s=Wy(void 0,rD,!0),s.factory=()=>S4(s.multi),this.records.set(e,s)),e=n,s.multi.push(n)}this.records.set(e,i)}hydrate(n,e){const i=Je(null);try{return e.value===rD&&(e.value=$ke,e.value=e.factory()),"object"==typeof e.value&&e.value&&function Uke(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{Je(i)}}injectableDefInScope(n){if(!n.providedIn)return!1;const e=Xn(n.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){const e=this._onDestroyHooks.indexOf(n);-1!==e&&this._onDestroyHooks.splice(e,1)}}function R4(t){const n=Kk(t),e=null!==n?n.factory:Og(t);if(null!==e)return e;if(t instanceof Ne)throw new Fe(204,!1);if(t instanceof Function)return function Bke(t){if(t.length>0)throw new Fe(204,!1);const e=function nke(t){return t&&(t[Yk]||t[zX])||null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new Fe(204,!1)}function hY(t,n,e){let i;if(Rg(t)){const s=Xn(t);return Og(s)||R4(s)}if(M4(t))i=()=>Xn(t.useValue);else if(function dY(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...S4(t.deps||[]));else if(function uY(t){return!(!t||!t.useExisting)}(t))i=()=>ae(Xn(t.useExisting));else{const s=Xn(t&&(t.useClass||t.provide));if(!function zke(t){return!!t.deps}(t))return Og(s)||R4(s);i=()=>new s(...S4(t.deps))}return i}function Wy(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function F4(t,n){for(const e of t)Array.isArray(e)?F4(e,n):e&&g4(e)?F4(e.\u0275providers,n):n(e)}function Dh(t,n){t instanceof Hy&&t.assertNotDestroyed();const i=fm(t),s=nc(void 0);try{return n()}finally{fm(i),nc(s)}}function pY(){return void 0!==HX()||null!=function dke(){return zy}()}function L4(t){if(!pY())throw new Fe(-203,!1)}const $r=0,yt=1,On=2,Lo=3,Nd=4,Ha=5,Tl=6,Ky=7,Cr=8,Po=9,Ah=10,ei=11,yS=12,mY=13,Xy=14,Br=15,Fg=16,Yy=17,Yp=18,Zy=19,_Y=20,gm=21,lD=22,ku=23,gn=25,$4=1,Mh=7,Qy=9,Co=10;var uD=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(uD||{});function la(t){return Array.isArray(t)&&"object"==typeof t[$4]}function dl(t){return Array.isArray(t)&&!0===t[$4]}function B4(t){return!!(4&t.flags)}function Lg(t){return t.componentOffset>-1}function dD(t){return!(1&~t.flags)}function Od(t){return!!t.template}function CS(t){return!!(512&t[On])}class tDe{constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function wY(t,n,e,i){null!==n?n.applyValueToInputSignal(n,i):t[e]=i}function Rn(){return CY}function CY(t){return t.type.prototype.ngOnChanges&&(t.setInput=iDe),nDe}function nDe(){const t=xY(this),n=t?.current;if(n){const e=t.previous;if(e===kh)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function iDe(t,n,e,i,s){const r=this.declaredInputs[i],o=xY(t)||function sDe(t,n){return t[SY]=n}(t,{previous:kh,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[r];a[r]=new tDe(c&&c.currentValue,e,l===kh),wY(t,n,s,e)}Rn.ngInherit=!0;const SY="__ngSimpleChanges__";function xY(t){return t[SY]||null}const Nh=function(t,n,e){},EY="svg";function ws(t){for(;Array.isArray(t);)t=t[$r];return t}function SS(t,n){return ws(n[t])}function Il(t,n){return ws(n[t.index])}function xS(t,n){return t.data[n]}function Pg(t,n){return t[n]}function zc(t,n){const e=n[t];return la(e)?e:e[$r]}function j4(t){return!(128&~t[On])}function Du(t,n){return null==n?null:t[n]}function IY(t){t[Yy]=0}function kY(t){1024&t[On]||(t[On]|=1024,j4(t)&&pD(t))}function hD(t){return!!(9216&t[On]||t[ku]?.dirty)}function H4(t){t[Ah].changeDetectionScheduler?.notify(8),64&t[On]&&(t[On]|=1024),hD(t)&&pD(t)}function pD(t){t[Ah].changeDetectionScheduler?.notify(0);let n=Zp(t);for(;null!==n&&!(8192&n[On])&&(n[On]|=8192,j4(n));)n=Zp(n)}function fD(t,n){if(!(256&~t[On]))throw new Fe(911,!1);null===t[gm]&&(t[gm]=[]),t[gm].push(n)}function Zp(t){const n=t[Lo];return dl(n)?n[Lo]:n}const ti={lFrame:zY(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let AY=!1;function MY(){return ti.bindingsEnabled}function $g(){return null!==ti.skipHydrationRootTNode}function Ue(){return ti.lFrame.lView}function Fi(){return ti.lFrame.tView}function B(t){return ti.lFrame.contextLView=t,t[Cr]}function V(t){return ti.lFrame.contextLView=null,t}function Ks(){let t=NY();for(;null!==t&&64===t.type;)t=t.parent;return t}function NY(){return ti.lFrame.currentTNode}function ES(){const t=ti.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function Rd(t,n){const e=ti.lFrame;e.currentTNode=t,e.isParent=n}function K4(){return ti.lFrame.isParent}function X4(){ti.lFrame.isParent=!1}function FY(){return AY}function LY(t){AY=t}function kl(){const t=ti.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function Qp(){return ti.lFrame.bindingIndex}function Fd(){return ti.lFrame.bindingIndex++}function Jp(t){const n=ti.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function $Y(t){ti.lFrame.inI18n=t}function bDe(t,n){const e=ti.lFrame;e.bindingIndex=e.bindingRootIndex=t,Y4(n)}function Y4(t){ti.lFrame.currentDirectiveIndex=t}function Z4(t){const n=ti.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}function Q4(){return ti.lFrame.currentQueryIndex}function _D(t){ti.lFrame.currentQueryIndex=t}function yDe(t){const n=t[yt];return 2===n.type?n.declTNode:1===n.type?t[Ha]:null}function BY(t,n,e){if(e&qi.SkipSelf){let s=n,r=t;for(;!(s=s.parent,null!==s||e&qi.Host||(s=yDe(r),null===s||(r=r[Xy],10&s.type))););if(null===s)return!1;n=s,t=r}const i=ti.lFrame=VY();return i.currentTNode=n,i.lView=t,!0}function J4(t){const n=VY(),e=t[yt];ti.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function VY(){const t=ti.lFrame,n=null===t?null:t.child;return null===n?zY(t):n}function zY(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function UY(){const t=ti.lFrame;return ti.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const GY=UY;function e$(){const t=UY();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Wa(){return ti.lFrame.selectedIndex}function Bg(t){ti.lFrame.selectedIndex=t}function Sr(){const t=ti.lFrame;return xS(t.tView,t.selectedIndex)}function ka(){ti.lFrame.currentNamespace=EY}function bm(){!function SDe(){ti.lFrame.currentNamespace=null}()}let HY=!0;function TS(){return HY}function Oh(t){HY=t}function gD(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){const r=t.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=r;o&&(t.contentHooks??=[]).push(-e,o),a&&((t.contentHooks??=[]).push(e,a),(t.contentCheckHooks??=[]).push(e,a)),l&&(t.viewHooks??=[]).push(-e,l),c&&((t.viewHooks??=[]).push(e,c),(t.viewCheckHooks??=[]).push(e,c)),null!=u&&(t.destroyHooks??=[]).push(e,u)}}function bD(t,n,e){WY(t,n,3,e)}function vD(t,n,e,i){(3&t[On])===e&&WY(t,n,e,i)}function t$(t,n){let e=t[On];(3&e)===n&&(e&=16383,e+=1,t[On]=e)}function WY(t,n,e,i){const r=i??-1,o=n.length-1;let a=0;for(let l=void 0!==i?65535&t[Yy]:0;l<o;l++)if("number"==typeof n[l+1]){if(a=n[l],null!=i&&a>=i)break}else n[l]<0&&(t[Yy]+=65536),(a<r||-1==r)&&(EDe(t,e,n,l),t[Yy]=(4294901760&t[Yy])+l+2),l++}function qY(t,n){Nh(4,t,n);const e=Je(null);try{n.call(t)}finally{Je(e),Nh(5,t,n)}}function EDe(t,n,e,i){const s=e[i]<0,r=e[i+1],a=t[s?-e[i]:e[i]];s?t[On]>>14<t[Yy]>>16&&(3&t[On])===n&&(t[On]+=16384,qY(a,r)):qY(a,r)}const Jy=-1;class IS{constructor(n,e,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}const i$={};class Vg{constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,i){i=Qk(i);const s=this.injector.get(n,i$,i);return s!==i$||e===i$?s:this.parentInjector.get(n,e,i)}}function s$(t){return t!==Jy}function kS(t){return 32767&t}function DS(t,n){let e=function DDe(t){return t>>16}(t),i=n;for(;e>0;)i=i[Xy],e--;return i}let r$=!0;function yD(t){const n=r$;return r$=t,n}const XY=255,YY=5;let MDe=0;const Rh={};function wD(t,n){const e=ZY(t,n);if(-1!==e)return e;const i=n[yt];i.firstCreatePass&&(t.injectorIndex=n.length,o$(i.data,t),o$(n,null),o$(i.blueprint,null));const s=CD(t,n),r=t.injectorIndex;if(s$(s)){const o=kS(s),a=DS(s,n),l=a[yt].data;for(let c=0;c<8;c++)n[r+c]=a[o+c]|l[o+c]}return n[r+8]=s,r}function o$(t,n){t.push(0,0,0,0,0,0,0,0,n)}function ZY(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function CD(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,i=null,s=n;for(;null!==s;){if(i=sZ(s),null===i)return Jy;if(e++,s=s[Xy],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return Jy}function a$(t,n,e){!function NDe(t,n,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(mS)&&(i=e[mS]),null==i&&(i=e[mS]=MDe++);const s=i&XY;n.data[t+(s>>YY)]|=1<<s}(t,n,e)}function QY(t,n,e){if(e&qi.Optional||void 0!==t)return t;y4()}function JY(t,n,e,i){if(e&qi.Optional&&void 0===i&&(i=null),!(e&(qi.Self|qi.Host))){const s=t[Po],r=nc(void 0);try{return s?s.get(n,i,e&qi.Optional):WX(n,i,e&qi.Optional)}finally{nc(r)}}return QY(i,0,e)}function eZ(t,n,e,i=qi.Default,s){if(null!==t){if(2048&n[On]&&!(i&qi.Self)){const o=function PDe(t,n,e,i,s){let r=t,o=n;for(;null!==r&&null!==o&&2048&o[On]&&!(512&o[On]);){const a=tZ(r,o,e,i|qi.Self,Rh);if(a!==Rh)return a;let l=r.parent;if(!l){const c=o[_Y];if(c){const u=c.get(e,Rh,i);if(u!==Rh)return u}l=sZ(o),o=o[Xy]}r=l}return s}(t,n,e,i,Rh);if(o!==Rh)return o}const r=tZ(t,n,e,i,Rh);if(r!==Rh)return r}return JY(n,e,i,s)}function tZ(t,n,e,i,s){const r=function FDe(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(mS)?t[mS]:void 0;return"number"==typeof n?n>=0?n&XY:LDe:n}(e);if("function"==typeof r){if(!BY(n,t,i))return i&qi.Host?QY(s,0,i):JY(n,e,i,s);try{let o;if(o=r(i),null!=o||i&qi.Optional)return o;y4()}finally{GY()}}else if("number"==typeof r){let o=null,a=ZY(t,n),l=Jy,c=i&qi.Host?n[Br][Ha]:null;for((-1===a||i&qi.SkipSelf)&&(l=-1===a?CD(t,n):n[a+8],l!==Jy&&iZ(i,!1)?(o=n[yt],a=kS(l),n=DS(l,n)):a=-1);-1!==a;){const u=n[yt];if(nZ(r,a,u.data)){const d=RDe(a,n,e,o,i,c);if(d!==Rh)return d}l=n[a+8],l!==Jy&&iZ(i,n[yt].data[a+8]===c)&&nZ(r,a,n)?(o=u,a=kS(l),n=DS(l,n)):a=-1}}return s}function RDe(t,n,e,i,s,r){const o=n[yt],a=o.data[t+8],u=SD(a,o,e,null==i?Lg(a)&&r$:i!=o&&!!(3&a.type),s&qi.Host&&r===a);return null!==u?zg(n,o,u,a):Rh}function SD(t,n,e,i,s){const r=t.providerIndexes,o=n.data,a=1048575&r,l=t.directiveStart,u=r>>20,h=s?a+u:t.directiveEnd;for(let p=i?a:a+u;p<h;p++){const f=o[p];if(p<l&&e===f||p>=l&&f.type===e)return p}if(s){const p=o[l];if(p&&Od(p)&&p.type===e)return l}return null}function zg(t,n,e,i){let s=t[e];const r=n.data;if(function TDe(t){return t instanceof IS}(s)){const o=s;o.resolving&&function oke(t,n){throw n&&n.join(" > "),new Fe(-200,t)}(function Ns(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():di(t)}(r[e]));const a=yD(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?nc(o.injectImpl):null;BY(t,i,qi.Default);try{s=t[e]=o.factory(void 0,r,t,i),n.firstCreatePass&&e>=i.directiveStart&&function xDe(t,n,e){const{ngOnChanges:i,ngOnInit:s,ngDoCheck:r}=n.type.prototype;if(i){const o=CY(n);(e.preOrderHooks??=[]).push(t,o),(e.preOrderCheckHooks??=[]).push(t,o)}s&&(e.preOrderHooks??=[]).push(0-t,s),r&&((e.preOrderHooks??=[]).push(t,r),(e.preOrderCheckHooks??=[]).push(t,r))}(e,r[e],n)}finally{null!==c&&nc(c),yD(a),o.resolving=!1,GY()}}return s}function nZ(t,n,e){return!!(e[n+(t>>YY)]&1<<t)}function iZ(t,n){return!(t&qi.Self||t&qi.Host&&n)}class ca{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return eZ(this._tNode,this._lView,n,Qk(i),e)}}function LDe(){return new ca(Ks(),Ue())}function $n(t){return qp(()=>{const n=t.prototype.constructor,e=n[Kp]||l$(n),i=Object.prototype;let s=Object.getPrototypeOf(t.prototype).constructor;for(;s&&s!==i;){const r=s[Kp]||l$(s);if(r&&r!==e)return r;s=Object.getPrototypeOf(s)}return r=>new r})}function l$(t){return qk(t)?()=>{const n=l$(Xn(t));return n&&n()}:Og(t)}function sZ(t){const n=t[yt],e=n.type;return 2===e?n.declTNode:1===e?t[Ha]:null}function sc(t){return function ODe(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const i=e.length;let s=0;for(;s<i;){const r=e[s];if(eY(r))break;if(0===r)s+=2;else if("number"==typeof r)for(s++;s<i&&"string"==typeof e[s];)s++;else{if(r===n)return e[s+1];s+=2}}}return null}(Ks(),t)}function cZ(t,n=null,e=null,i){const s=uZ(t,n,e,i);return s.resolveInjectorInitializers(),s}function uZ(t,n=null,e=null,i,s=new Set){const r=[e||ys,Fke(t)];return i=i||("object"==typeof t?void 0:ra(t)),new Hy(r,n||oD(),i||null,s)}class ci{static#e=this.THROW_IF_NOT_FOUND=_S;static#t=this.NULL=new tD;static create(n,e){if(Array.isArray(n))return cZ({name:""},e,n,"");{const i=n.name??"";return cZ({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Pe({token:ci,providedIn:"any",factory:()=>ae(JX)});static#i=this.__NG_ELEMENT_ID__=-1}new Ne("").__NG_ELEMENT_ID__=t=>{const n=Ks();if(null===n)throw new Fe(204,!1);if(2&n.type)return n.value;if(t&qi.Optional)return null;throw new Fe(204,!1)};function u$(t){return t.ngOriginalError}const hZ=!0;let AS=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=qDe;static#t=this.__NG_ENV_ID__=e=>e}return t})();class WDe extends AS{constructor(n){super(),this._lView=n}onDestroy(n){return fD(this._lView,n),()=>function W4(t,n){if(null===t[gm])return;const e=t[gm].indexOf(n);-1!==e&&t[gm].splice(e,1)}(this._lView,n)}}function qDe(){return new WDe(Ue())}let ef=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new at(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>new t})}return t})();const Ae=class KDe extends ot{constructor(n=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=n,pY()&&(this.destroyRef=xe(AS,{optional:!0})??void 0,this.pendingTasks=xe(ef,{optional:!0})??void 0)}emit(n){const e=Je(null);try{super.next(n)}finally{Je(e)}}subscribe(n,e,i){let s=n,r=e||(()=>null),o=i;if(n&&"object"==typeof n){const l=n;s=l.next?.bind(l),r=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(r=this.wrapInTimeout(r),s&&(s=this.wrapInTimeout(s)),o&&(o=this.wrapInTimeout(o)));const a=super.subscribe({next:s,error:r,complete:o});return n instanceof rn&&n.add(a),a}wrapInTimeout(n){return e=>{const i=this.pendingTasks?.add();setTimeout(()=>{n(e),void 0!==i&&this.pendingTasks?.remove(i)})}}};function ED(...t){}function pZ(t){let n,e;function i(){t=ED;try{void 0!==e&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(e),void 0!==n&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{t(),i()}),"function"==typeof requestAnimationFrame&&(e=requestAnimationFrame(()=>{t(),i()})),()=>i()}function fZ(t){return queueMicrotask(()=>t()),()=>{t=ED}}const d$="isAngularZone",TD=d$+"_ID";let XDe=0;class Lt{constructor(n){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ae(!1),this.onMicrotaskEmpty=new Ae(!1),this.onStable=new Ae(!1),this.onError=new Ae(!1);const{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:s=!1,scheduleInRootZone:r=hZ}=n;if(typeof Zone>"u")throw new Fe(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!s&&i,o.shouldCoalesceRunChangeDetection=s,o.callbackScheduled=!1,o.scheduleInRootZone=r,function QDe(t){const n=()=>{!function ZDe(t){function n(){pZ(()=>{t.callbackScheduled=!1,p$(t),t.isCheckStableRunning=!0,h$(t),t.isCheckStableRunning=!1})}t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,t.scheduleInRootZone?Zone.root.run(()=>{n()}):t._outer.run(()=>{n()}),p$(t))}(t)},e=XDe++;t._inner=t._inner.fork({name:"angular",properties:{[d$]:!0,[TD]:e,[TD+e]:!0},onInvokeTask:(i,s,r,o,a,l)=>{if(function JDe(t){return gZ(t,"__ignore_ng_zone__")}(l))return i.invokeTask(r,o,a,l);try{return mZ(t),i.invokeTask(r,o,a,l)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&n(),_Z(t)}},onInvoke:(i,s,r,o,a,l,c)=>{try{return mZ(t),i.invoke(r,o,a,l,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function eAe(t){return gZ(t,"__scheduler_tick__")}(l)&&n(),_Z(t)}},onHasTask:(i,s,r,o)=>{i.hasTask(r,o),s===r&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,p$(t),h$(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,s,r,o)=>(i.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(d$)}static assertInAngularZone(){if(!Lt.isInAngularZone())throw new Fe(909,!1)}static assertNotInAngularZone(){if(Lt.isInAngularZone())throw new Fe(909,!1)}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,s){const r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+s,n,YDe,ED,ED);try{return r.runTask(o,e,i)}finally{r.cancelTask(o)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}}const YDe={};function h$(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function p$(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function mZ(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function _Z(t){t._nesting--,h$(t)}class f${constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ae,this.onMicrotaskEmpty=new Ae,this.onStable=new Ae,this.onError=new Ae}run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,s){return n.apply(e,i)}}function gZ(t,n){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[n]}class Ld{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&u$(n);for(;e&&u$(e);)e=u$(e);return e||null}}const nAe=new Ne("",{providedIn:"root",factory:()=>{const t=xe(Lt),n=xe(Ld);return e=>t.runOutsideAngular(()=>n.handleError(e))}});function iAe(){return n1(Ks(),Ue())}function n1(t,n){return new vt(Il(t,n))}let vt=(()=>{class t{constructor(e){this.nativeElement=e}static#e=this.__NG_ELEMENT_ID__=iAe}return t})();function vZ(t){return t instanceof vt?t.nativeElement:t}function sAe(){return this._results[Symbol.iterator]()}class vm{static#e=Symbol.iterator;get changes(){return this._changes??=new Ae}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const e=vm.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=sAe)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){this.dirty=!1;const i=function ic(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function bke(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let s=t[i],r=n[i];if(e&&(s=e(s),r=e(r)),r!==s)return!1}return!0}(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function NS(t){return!(128&~t.flags)}const _$=new Map;let oAe=0;function g$(t){_$.delete(t[Zy])}const ID="__ngContext__";function hl(t,n){la(n)?(t[ID]=n[Zy],function lAe(t){_$.set(t[Zy],t)}(n)):t[ID]=n}function DZ(t){return MZ(t[yS])}function AZ(t){return MZ(t[Nd])}function MZ(t){for(;null!==t&&!dl(t);)t=t[Nd];return t}let v$;function ym(){if(void 0!==v$)return v$;if(typeof document<"u")return document;throw new Fe(210,!1)}const Ug=new Ne("",{providedIn:"root",factory:()=>EAe}),EAe="ng",BZ=new Ne(""),Au=new Ne("",{providedIn:"platform",factory:()=>"unknown"}),ua=new Ne(""),y$=new Ne("",{providedIn:"root",factory:()=>ym().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let VZ=()=>null;function I$(t,n,e=!1){return VZ(t,n,e)}const KZ=new Ne("",{providedIn:"root",factory:()=>!1});let LD,PD;function a1(t){return function N$(){if(void 0===LD&&(LD=null,Or.trustedTypes))try{LD=Or.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return LD}()?.createHTML(t)||t}function ZZ(t){return function O$(){if(void 0===PD&&(PD=null,Or.trustedTypes))try{PD=Or.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return PD}()?.createHTML(t)||t}class jg{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${LX})`}}class BAe extends jg{getTypeName(){return"HTML"}}class VAe extends jg{getTypeName(){return"Style"}}class zAe extends jg{getTypeName(){return"Script"}}class UAe extends jg{getTypeName(){return"URL"}}class GAe extends jg{getTypeName(){return"ResourceURL"}}function Uc(t){return t instanceof jg?t.changingThisBreaksApplicationSecurity:t}function Fh(t,n){const e=function jAe(t){return t instanceof jg&&t.getTypeName()||null}(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${LX})`)}return e===n}function eQ(t){const n=new ZAe(t);return function QAe(){try{return!!(new window.DOMParser).parseFromString(a1(""),"text/html")}catch{return!1}}()?new YAe(n):n}class YAe{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(a1(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.firstChild?.remove(),e)}catch{return null}}}class ZAe{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const e=this.inertDocument.createElement("template");return e.innerHTML=a1(n),e}}const JAe=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function $D(t){return(t=String(t)).match(JAe)?t:"unsafe:"+t}function tf(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function BS(...t){const n={};for(const e of t)for(const i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}const tQ=tf("area,br,col,hr,img,wbr"),nQ=tf("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),iQ=tf("rp,rt"),R$=BS(tQ,BS(nQ,tf("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),BS(iQ,tf("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),BS(iQ,nQ)),F$=tf("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),sQ=BS(F$,tf("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),tf("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),eMe=tf("script,style,template");class tMe{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,i=!0,s=[];for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)s.push(e),e=sMe(e);else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=iMe(e);if(r){e=r;break}e=s.pop()}return this.buf.join("")}startElement(n){const e=rQ(n).toLowerCase();if(!R$.hasOwnProperty(e))return this.sanitizedSomething=!0,!eMe.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=n.attributes;for(let s=0;s<i.length;s++){const r=i.item(s),o=r.name,a=o.toLowerCase();if(!sQ.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=r.value;F$[a]&&(l=$D(l)),this.buf.push(" ",o,'="',aQ(l),'"')}return this.buf.push(">"),!0}endElement(n){const e=rQ(n).toLowerCase();R$.hasOwnProperty(e)&&!tQ.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(aQ(n))}}function iMe(t){const n=t.nextSibling;if(n&&t!==n.previousSibling)throw oQ(n);return n}function sMe(t){const n=t.firstChild;if(n&&function nMe(t,n){return(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(t,n))throw oQ(n);return n}function rQ(t){const n=t.nodeName;return"string"==typeof n?n:"FORM"}function oQ(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}const rMe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,oMe=/([^\#-~ |!])/g;function aQ(t){return t.replace(/&/g,"&amp;").replace(rMe,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(oMe,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let BD;function lQ(t,n){let e=null;try{BD=BD||eQ(t);let i=n?String(n):"";e=BD.getInertBodyElement(i);let s=5,r=i;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,i=r,r=e.innerHTML,e=BD.getInertBodyElement(i)}while(i!==r);return a1((new tMe).sanitizeChildren(L$(e)||e))}finally{if(e){const i=L$(e)||e;for(;i.firstChild;)i.firstChild.remove()}}}function L$(t){return"content"in t&&function aMe(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Mu=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Mu||{});function Nu(t){const n=VS();return n?ZZ(n.sanitize(Mu.HTML,t)||""):Fh(t,"HTML")?ZZ(Uc(t)):lQ(ym(),di(t))}function qa(t){const n=VS();return n?n.sanitize(Mu.URL,t)||"":Fh(t,"URL")?Uc(t):$D(di(t))}function VS(){const t=Ue();return t&&t[Ah].sanitizer}const pMe=/^>|^->|<!--|-->|--!>|<!-$/g,fMe=/(<|>)/g,mMe="\u200b$1\u200b";function Gc(t){return t.ownerDocument.defaultView}function jc(t){return t instanceof Function?t():t}function Hc(t){return"browser"===(t??xe(ci)).get(Au)}var wm=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(wm||{});let B$;function V$(t,n){return B$(t,n)}function c1(t,n,e,i,s){if(null!=i){let r,o=!1;dl(i)?r=i:la(i)&&(o=!0,i=i[$r]);const a=ws(i);0===t&&null!==e?null==s?SQ(n,e,a):Hg(n,e,a,s||null,!0):1===t&&null!==e?Hg(n,e,a,s||null,!0):2===t?US(n,a,o):3===t&&n.destroyNode(a),null!=r&&function RMe(t,n,e,i,s){const r=e[Mh];r!==ws(e)&&c1(n,t,i,r,s);for(let a=Co;a<e.length;a++){const l=e[a];HD(l[yt],l,t,n,i,r)}}(n,t,r,e,s)}}function z$(t,n){return t.createText(n)}function vQ(t,n,e){t.setValue(n,e)}function U$(t,n){return t.createComment(function dQ(t){return t.replace(pMe,n=>n.replace(fMe,mMe))}(n))}function UD(t,n,e){return t.createElement(n,e)}function yQ(t,n){n[Ah].changeDetectionScheduler?.notify(9),HD(t,n,n[ei],2,null,null)}function wQ(t,n){const e=t[Qy],i=n[Lo];(la(i)||n[Br]!==i[Lo][Br])&&(t[On]|=uD.HasTransplantedViews),null===e?t[Qy]=[n]:e.push(n)}function G$(t,n){const e=t[Qy],i=e.indexOf(n);e.splice(i,1)}function zS(t,n){if(t.length<=Co)return;const e=Co+n,i=t[e];if(i){const s=i[Fg];null!==s&&s!==t&&G$(s,i),n>0&&(t[e-1][Nd]=i[Nd]);const r=Jk(t,Co+n);!function TMe(t,n){yQ(t,n),n[$r]=null,n[Ha]=null}(i[yt],i);const o=r[Yp];null!==o&&o.detachView(r[yt]),i[Lo]=null,i[Nd]=null,i[On]&=-129}return i}function GD(t,n){if(!(256&n[On])){const e=n[ei];e.destroyNode&&HD(t,n,e,3,null,null),function kMe(t){let n=t[yS];if(!n)return j$(t[yt],t);for(;n;){let e=null;if(la(n))e=n[yS];else{const i=n[Co];i&&(e=i)}if(!e){for(;n&&!n[Nd]&&n!==t;)la(n)&&j$(n[yt],n),n=n[Lo];null===n&&(n=t),la(n)&&j$(n[yt],n),e=n&&n[Nd]}n=e}}(n)}}function j$(t,n){if(256&n[On])return;const e=Je(null);try{n[On]&=-129,n[On]|=256,n[ku]&&vs(n[ku]),function MMe(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let i=0;i<e.length;i+=2){const s=n[e[i]];if(!(s instanceof IS)){const r=e[i+1];if(Array.isArray(r))for(let o=0;o<r.length;o+=2){const a=s[r[o]],l=r[o+1];Nh(4,a,l);try{l.call(a)}finally{Nh(5,a,l)}}else{Nh(4,s,r);try{r.call(s)}finally{Nh(5,s,r)}}}}}(t,n),function AMe(t,n){const e=t.cleanup,i=n[Ky];if(null!==e)for(let r=0;r<e.length-1;r+=2)if("string"==typeof e[r]){const o=e[r+3];o>=0?i[o]():i[-o].unsubscribe(),r+=2}else e[r].call(i[e[r+1]]);null!==i&&(n[Ky]=null);const s=n[gm];if(null!==s){n[gm]=null;for(let r=0;r<s.length;r++)(0,s[r])()}}(t,n),1===n[yt].type&&n[ei].destroy();const i=n[Fg];if(null!==i&&dl(n[Lo])){i!==n[Lo]&&G$(i,n);const s=n[Yp];null!==s&&s.detachView(t)}g$(n)}finally{Je(e)}}function H$(t,n,e){return CQ(t,n.parent,e)}function CQ(t,n,e){let i=n;for(;null!==i&&168&i.type;)i=(n=i).parent;if(null===i)return e[$r];{const{componentOffset:s}=i;if(s>-1){const{encapsulation:r}=t.data[i.directiveStart+s];if(r===Ad.None||r===Ad.Emulated)return null}return Il(i,e)}}function Hg(t,n,e,i,s){t.insertBefore(n,e,i,s)}function SQ(t,n,e){t.appendChild(n,e)}function xQ(t,n,e,i,s){null!==i?Hg(t,n,e,i,s):SQ(t,n,e)}function W$(t,n){return t.parentNode(n)}function EQ(t,n,e){return IQ(t,n,e)}function TQ(t,n,e){return 40&t.type?Il(t,e):null}let q$,IQ=TQ;function kQ(t,n){IQ=t,q$=n}function jD(t,n,e,i){const s=H$(t,i,n),r=n[ei],a=EQ(i.parent||n[Ha],i,n);if(null!=s)if(Array.isArray(e))for(let l=0;l<e.length;l++)xQ(r,s,e[l],a,!1);else xQ(r,s,e,a,!1);void 0!==q$&&q$(r,i,n,e,s)}function Wg(t,n){if(null!==n){const e=n.type;if(3&e)return Il(n,t);if(4&e)return K$(-1,t[n.index]);if(8&e){const i=n.child;if(null!==i)return Wg(t,i);{const s=t[n.index];return dl(s)?K$(-1,s):ws(s)}}if(128&e)return Wg(t,n.next);if(32&e)return V$(n,t)()||ws(t[n.index]);{const i=DQ(t,n);return null!==i?Array.isArray(i)?i[0]:Wg(Zp(t[Br]),i):Wg(t,n.next)}}return null}function DQ(t,n){return null!==n?t[Br][Ha].projection[n.projection]:null}function K$(t,n){const e=Co+t+1;if(e<n.length){const i=n[e],s=i[yt].firstChild;if(null!==s)return Wg(i,s)}return n[Mh]}function US(t,n,e){t.removeChild(null,n,e)}function X$(t,n,e,i,s,r,o){for(;null!=e;){if(128===e.type){e=e.next;continue}const a=i[e.index],l=e.type;if(o&&0===n&&(a&&hl(ws(a),i),e.flags|=2),32&~e.flags)if(8&l)X$(t,n,e.child,i,s,r,!1),c1(n,t,s,a,r);else if(32&l){const c=V$(e,i);let u;for(;u=c();)c1(n,t,s,u,r);c1(n,t,s,a,r)}else 16&l?MQ(t,n,i,e,s,r):c1(n,t,s,a,r);e=o?e.projectionNext:e.next}}function HD(t,n,e,i,s,r){X$(e,i,t.firstChild,n,s,r,!1)}function MQ(t,n,e,i,s,r){const o=e[Br],l=o[Ha].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)c1(n,t,s,l[c],r);else{let c=l;const u=o[Lo];NS(i)&&(c.flags|=128),X$(t,n,c,u,s,r,!0)}}function NQ(t,n,e){""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function OQ(t,n,e){const{mergedAttrs:i,classes:s,styles:r}=e;null!==i&&I4(t,n,i),null!==s&&NQ(t,n,s),null!==r&&function LMe(t,n,e){t.setAttribute(n,"style",e)}(t,n,r)}const hi={};function b(t=1){RQ(Fi(),Ue(),Wa()+t,!1)}function RQ(t,n,e,i){if(!i)if(3&~n[On]){const r=t.preOrderHooks;null!==r&&vD(n,r,0,e)}else{const r=t.preOrderCheckHooks;null!==r&&bD(n,r,e)}Bg(e)}function I(t,n=qi.Default){const e=Ue();return null===e?ae(t,n):eZ(Ks(),e,Xn(t),n)}function GS(){throw new Error("invalid")}function FQ(t,n,e,i,s,r){const o=Je(null);try{let a=null;s&mm.SignalBased&&(a=n[i][rt]),null!==a&&void 0!==a.transformFn&&(r=a.transformFn(r)),s&mm.HasDecoratorInputTransform&&(r=t.inputTransforms[i].call(n,r)),null!==t.setInput?t.setInput(n,a,r,e,i):wY(n,a,i,r)}finally{Je(o)}}function WD(t,n,e,i,s,r,o,a,l,c,u){const d=n.blueprint.slice();return d[$r]=s,d[On]=204|i,(null!==c||t&&2048&t[On])&&(d[On]|=2048),IY(d),d[Lo]=d[Xy]=t,d[Cr]=e,d[Ah]=o||t&&t[Ah],d[ei]=a||t&&t[ei],d[Po]=l||t&&t[Po]||null,d[Ha]=r,d[Zy]=function aAe(){return oAe++}(),d[Tl]=u,d[_Y]=c,d[Br]=2==n.type?t[Br]:d,d}function qg(t,n,e,i,s){let r=t.data[n];if(null===r)r=Y$(t,n,e,i,s),function gDe(){return ti.lFrame.inI18n}()&&(r.flags|=32);else if(64&r.type){r.type=e,r.value=i,r.attrs=s;const o=ES();r.injectorIndex=null===o?-1:o.injectorIndex}return Rd(r,!0),r}function Y$(t,n,e,i,s){const r=NY(),o=K4(),l=t.data[n]=function jMe(t,n,e,i,s,r){let o=n?n.injectorIndex:-1,a=0;return $g()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:s,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?r:r&&r.parent,e,n,i,s);return null===t.firstChild&&(t.firstChild=l),null!==r&&(o?null==r.child&&null!==l.parent&&(r.child=l):null===r.next&&(r.next=l,l.prev=r)),l}function jS(t,n,e,i){if(0===e)return-1;const s=n.length;for(let r=0;r<e;r++)n.push(i),t.blueprint.push(i),t.data.push(null);return s}function LQ(t,n,e,i,s){const r=Wa(),o=2&i;try{Bg(-1),o&&n.length>gn&&RQ(t,n,gn,!1),Nh(o?2:0,s),e(i,s)}finally{Bg(r),Nh(o?3:1,s)}}function Z$(t,n,e){if(B4(n)){const i=Je(null);try{const r=n.directiveEnd;for(let o=n.directiveStart;o<r;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,e[o],o)}}finally{Je(i)}}}function Q$(t,n,e){MY()&&(function ZMe(t,n,e,i){const s=e.directiveStart,r=e.directiveEnd;Lg(e)&&function sNe(t,n,e){const i=Il(n,t),s=PQ(e);let o=16;e.signals?o=4096:e.onPush&&(o=64);const a=qD(t,WD(t,s,null,o,i,n,null,t[Ah].rendererFactory.createRenderer(i,e),null,null,null));t[n.index]=a}(n,e,t.data[s+e.componentOffset]),t.firstCreatePass||wD(e,n),hl(i,n);const o=e.initialInputs;for(let a=s;a<r;a++){const l=t.data[a],c=zg(n,t,a,e);hl(c,n),null!==o&&rNe(0,a-s,c,l,0,o),Od(l)&&(zc(e.index,n)[Cr]=zg(n,t,a,e))}}(t,n,e,Il(e,n)),!(64&~e.flags)&&UQ(t,n,e))}function J$(t,n,e=Il){const i=n.localNames;if(null!==i){let s=n.index+1;for(let r=0;r<i.length;r+=2){const o=i[r+1],a=-1===o?e(n,t):t[o];t[s++]=a}}}function PQ(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=e8(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function e8(t,n,e,i,s,r,o,a,l,c,u){const d=gn+i,h=d+s,p=function $Me(t,n){const e=[];for(let i=0;i<n;i++)e.push(i<t?null:hi);return e}(d,h),f="function"==typeof c?c():c;return p[yt]={type:t,blueprint:p,template:e,queries:null,viewQuery:a,declTNode:n,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof r?r():r,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1,ssrId:u}}let $Q=()=>null;function BQ(t,n,e,i,s){for(let r in n){if(!n.hasOwnProperty(r))continue;const o=n[r];if(void 0===o)continue;i??={};let a,l=mm.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=r;if(null!==s){if(!s.hasOwnProperty(r))continue;c=s[r]}0===t?VQ(i,e,c,a,l):VQ(i,e,c,a)}return i}function VQ(t,n,e,i,s){let r;t.hasOwnProperty(e)?(r=t[e]).push(n,i):r=t[e]=[n,i],void 0!==s&&r.push(s)}function oc(t,n,e,i,s,r,o,a){const l=Il(n,e);let u,c=n.inputs;!a&&null!=c&&(u=c[i])?(r8(t,e,u,i,s),Lg(n)&&function qMe(t,n){const e=zc(n,t);16&e[On]||(e[On]|=64)}(e,n.index)):3&n.type&&(i=function WMe(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),s=null!=o?o(s,n.value||"",i):s,r.setProperty(l,i,s))}function t8(t,n,e,i){if(MY()){const s=null===i?null:{"":-1},r=function JMe(t,n){const e=t.directiveRegistry;let i=null,s=null;if(e)for(let r=0;r<e.length;r++){const o=e[r];if(sY(n,o.selectors,!1))if(i||(i=[]),Od(o))if(null!==o.findHostDirectiveDefs){const a=[];s=s||new Map,o.findHostDirectiveDefs(o,a,s),i.unshift(...a,o),n8(t,n,a.length)}else i.unshift(o),n8(t,n,0);else s=s||new Map,o.findHostDirectiveDefs?.(o,i,s),i.push(o)}return null===i?null:[i,s]}(t,e);let o,a;null===r?o=a=null:[o,a]=r,null!==o&&zQ(t,n,e,o,s,a),s&&function eNe(t,n,e){if(n){const i=t.localNames=[];for(let s=0;s<n.length;s+=2){const r=e[n[s+1]];if(null==r)throw new Fe(-301,!1);i.push(n[s],r)}}}(e,i,s)}e.mergedAttrs=bS(e.mergedAttrs,e.attrs)}function zQ(t,n,e,i,s,r){for(let c=0;c<i.length;c++)a$(wD(e,n),t,i[c].type);!function nNe(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}(e,t.data.length,i.length);for(let c=0;c<i.length;c++){const u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=jS(t,n,i.length,null);for(let c=0;c<i.length;c++){const u=i[c];e.mergedAttrs=bS(e.mergedAttrs,u.hostAttrs),iNe(t,e,n,l,u),tNe(l,u,s),null!==u.contentQueries&&(e.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}!function HMe(t,n,e){const s=n.directiveEnd,r=t.data,o=n.attrs,a=[];let l=null,c=null;for(let u=n.directiveStart;u<s;u++){const d=r[u],h=e?e.get(d):null,f=h?h.outputs:null;l=BQ(0,d.inputs,u,l,h?h.inputs:null),c=BQ(1,d.outputs,u,c,f);const g=null===l||null===o||k4(n)?null:oNe(l,u,o);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(n.flags|=8),l.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=a,n.inputs=l,n.outputs=c}(t,e,r)}function UQ(t,n,e){const i=e.directiveStart,s=e.directiveEnd,r=e.index,o=function vDe(){return ti.lFrame.currentDirectiveIndex}();try{Bg(r);for(let a=i;a<s;a++){const l=t.data[a],c=n[a];Y4(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&QMe(l,c)}}finally{Bg(-1),Y4(o)}}function QMe(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function n8(t,n,e){n.componentOffset=e,(t.components??=[]).push(n.index)}function tNe(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;Od(n)&&(e[""]=t)}}function iNe(t,n,e,i,s){t.data[i]=s;const r=s.factory||(s.factory=Og(s.type)),o=new IS(r,Od(s),I);t.blueprint[i]=o,e[i]=o,function XMe(t,n,e,i,s){const r=s.hostBindings;if(r){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~n.index;(function YMe(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(o)!=a&&o.push(a),o.push(e,i,r)}}(t,n,i,jS(t,e,s.hostVars,hi),s)}function i8(t,n,e,i,s,r,o){if(null==r)t.removeAttribute(n,s,e);else{const a=null==o?di(r):o(r,i||"",s);t.setAttribute(n,s,a,e)}}function rNe(t,n,e,i,s,r){const o=r[n];if(null!==o)for(let a=0;a<o.length;)FQ(i,e,o[a++],o[a++],o[a++],o[a++])}function oNe(t,n,e){let i=null,s=0;for(;s<e.length;){const r=e[s];if(0!==r)if(5!==r){if("number"==typeof r)break;if(t.hasOwnProperty(r)){null===i&&(i=[]);const o=t[r];for(let a=0;a<o.length;a+=3)if(o[a]===n){i.push(r,o[a+1],o[a+2],e[s+1]);break}}s+=2}else s+=2;else s+=4}return i}function GQ(t,n,e,i){return[t,!0,0,n,null,i,null,e,null,null]}function jQ(t,n){const e=t.contentQueries;if(null!==e){const i=Je(null);try{for(let s=0;s<e.length;s+=2){const o=e[s+1];if(-1!==o){const a=t.data[o];_D(e[s]),a.contentQueries(2,n[o],o)}}}finally{Je(i)}}}function qD(t,n){return t[yS]?t[mY][Nd]=n:t[yS]=n,t[mY]=n,n}function s8(t,n,e){_D(0);const i=Je(null);try{n(t,e)}finally{Je(i)}}function HQ(t){return t[Ky]??=[]}function WQ(t){return t.cleanup??=[]}function qQ(t,n,e){return(null===t||Od(t))&&(e=function G4(t){for(;Array.isArray(t);){if("object"==typeof t[$4])return t;t=t[$r]}return null}(e[n.index])),e[ei]}function KD(t,n){const e=t[Po],i=e?e.get(Ld,null):null;i&&i.handleError(n)}function r8(t,n,e,i,s){for(let r=0;r<e.length;){const o=e[r++],a=e[r++],l=e[r++];FQ(t.data[o],n[o],i,a,l,s)}}function nf(t,n,e){const i=SS(n,t);vQ(t[ei],i,e)}function aNe(t,n){const e=zc(n,t),i=e[yt];!function lNe(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])}(i,e);const s=e[$r];null!==s&&null===e[Tl]&&(e[Tl]=I$(s,e[Po])),o8(i,e,e[Cr])}function o8(t,n,e){J4(n);try{const i=t.viewQuery;null!==i&&s8(1,i,e);const s=t.template;null!==s&&LQ(t,n,s,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),n[Yp]?.finishViewCreation(t),t.staticContentQueries&&jQ(t,n),t.staticViewQueries&&s8(2,t.viewQuery,e);const r=t.components;null!==r&&function cNe(t,n){for(let e=0;e<n.length;e++)aNe(t,n[e])}(n,r)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[On]&=-5,e$()}}function u1(t,n,e,i){const s=Je(null);try{const r=n.tView,l=WD(t,r,e,4096&t[On]?4096:16,null,n,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null);l[Fg]=t[n.index];const u=t[Yp];return null!==u&&(l[Yp]=u.createEmbeddedView(r)),o8(r,l,e),l}finally{Je(s)}}function KQ(t,n){const e=Co+n;if(e<t.length)return t[e]}function Kg(t,n){return!n||null===n.firstChild||NS(t)}function d1(t,n,e,i=!0){const s=n[yt];if(function DMe(t,n,e,i){const s=Co+i,r=e.length;i>0&&(e[s-1][Nd]=n),i<r-Co?(n[Nd]=e[s],YX(e,Co+i,n)):(e.push(n),n[Nd]=null),n[Lo]=e;const o=n[Fg];null!==o&&e!==o&&wQ(o,n);const a=n[Yp];null!==a&&a.insertView(t),H4(n),n[On]|=128}(s,n,t,e),i){const o=K$(e,t),a=n[ei],l=W$(a,t[Mh]);null!==l&&function IMe(t,n,e,i,s,r){i[$r]=s,i[Ha]=n,HD(t,i,e,1,s,r)}(s,t[Ha],a,n,l,o)}const r=n[Tl];null!==r&&null!==r.firstChild&&(r.firstChild=null)}function a8(t,n){const e=zS(t,n);return void 0!==e&&GD(e[yt],e),e}function HS(t,n,e,i,s=!1){for(;null!==e;){if(128===e.type){e=s?e.projectionNext:e.next;continue}const r=n[e.index];null!==r&&i.push(ws(r)),dl(r)&&XQ(r,i);const o=e.type;if(8&o)HS(t,n,e.child,i);else if(32&o){const a=V$(e,n);let l;for(;l=a();)i.push(l)}else if(16&o){const a=DQ(n,e);if(Array.isArray(a))i.push(...a);else{const l=Zp(n[Br]);HS(l[yt],l,a,i,!0)}}e=s?e.projectionNext:e.next}return i}function XQ(t,n){for(let e=Co;e<t.length;e++){const i=t[e],s=i[yt].firstChild;null!==s&&HS(i[yt],i,s,n)}t[Mh]!==t[$r]&&n.push(t[Mh])}let YQ=[];const pNe={...Jt,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{pD(t.lView)},consumerOnSignalRead(){this.lView[ku]=this}},mNe={...Jt,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let n=Zp(t.lView);for(;n&&!ZQ(n[yt]);)n=Zp(n);n&&kY(n)},consumerOnSignalRead(){this.lView[ku]=this}};function ZQ(t){return 2!==t.type}const _Ne=100;function XD(t,n=!0,e=0){const i=t[Ah],s=i.rendererFactory;s.begin?.();try{!function gNe(t,n){const e=FY();try{LY(!0),l8(t,n);let i=0;for(;hD(t);){if(i===_Ne)throw new Fe(103,!1);i++,l8(t,1)}}finally{LY(e)}}(t,e)}catch(o){throw n&&KD(t,o),o}finally{s.end?.(),i.inlineEffectRunner?.flush()}}function bNe(t,n,e,i){const s=n[On];if(!(256&~s))return;n[Ah].inlineEffectRunner?.flush(),J4(n);let a=!0,l=null,c=null;ZQ(t)?(c=function uNe(t){return t[ku]??function dNe(t){const n=YQ.pop()??Object.create(pNe);return n.lView=t,n}(t)}(n),l=rs(c)):null===function zt(){return Ve}()?(a=!1,c=function fNe(t){const n=t[ku]??Object.create(mNe);return n.lView=t,n}(n),l=rs(c)):n[ku]&&(vs(n[ku]),n[ku]=null);try{IY(n),function PY(t){return ti.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&LQ(t,n,e,2,i);const u=!(3&~s);if(u){const p=t.preOrderCheckHooks;null!==p&&bD(n,p,null)}else{const p=t.preOrderHooks;null!==p&&vD(n,p,0,null),t$(n,0)}if(function vNe(t){for(let n=DZ(t);null!==n;n=AZ(n)){if(!(n[On]&uD.HasTransplantedViews))continue;const e=n[Qy];for(let i=0;i<e.length;i++)kY(e[i])}}(n),JQ(n,0),null!==t.contentQueries&&jQ(t,n),u){const p=t.contentCheckHooks;null!==p&&bD(n,p)}else{const p=t.contentHooks;null!==p&&vD(n,p,1),t$(n,1)}!function PMe(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const s=e[i];if(s<0)Bg(~s);else{const r=s,o=e[++i],a=e[++i];bDe(o,r),a(2,n[r])}}}finally{Bg(-1)}}(t,n);const d=t.components;null!==d&&tJ(n,d,0);const h=t.viewQuery;if(null!==h&&s8(2,h,i),u){const p=t.viewCheckHooks;null!==p&&bD(n,p)}else{const p=t.viewHooks;null!==p&&vD(n,p,2),t$(n,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[lD]){for(const p of n[lD])p();n[lD]=null}n[On]&=-73}catch(u){throw pD(n),u}finally{null!==c&&(os(c,l),a&&function hNe(t){t.lView[ku]!==t&&(t.lView=null,YQ.push(t))}(c)),e$()}}function JQ(t,n){for(let e=DZ(t);null!==e;e=AZ(e))for(let i=Co;i<e.length;i++)eJ(e[i],n)}function yNe(t,n,e){eJ(zc(n,t),e)}function eJ(t,n){j4(t)&&l8(t,n)}function l8(t,n){const i=t[yt],s=t[On],r=t[ku];let o=!!(0===n&&16&s);if(o||=!!(64&s&&0===n),o||=!!(1024&s),o||=!(!r?.dirty||!hs(r)),o||=!1,r&&(r.dirty=!1),t[On]&=-9217,o)bNe(i,t,i.template,t[Cr]);else if(8192&s){JQ(t,1);const a=i.components;null!==a&&tJ(t,a,1)}}function tJ(t,n,e){for(let i=0;i<n.length;i++)yNe(t,n[i],e)}function WS(t,n){const e=FY()?64:1088;for(t[Ah].changeDetectionScheduler?.notify(n);t;){t[On]|=e;const i=Zp(t);if(CS(t)&&!i)return t;t=i}return null}class qS{get rootNodes(){const n=this._lView,e=n[yt];return HS(e,n,e.firstChild,[])}constructor(n,e,i=!0){this._lView=n,this._cdRefInjectingView=e,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Cr]}set context(n){this._lView[Cr]=n}get destroyed(){return!(256&~this._lView[On])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Lo];if(dl(n)){const e=n[8],i=e?e.indexOf(this):-1;i>-1&&(zS(n,i),Jk(e,i))}this._attachedToViewContainer=!1}GD(this._lView[yt],this._lView)}onDestroy(n){fD(this._lView,n)}markForCheck(){WS(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[On]&=-129}reattach(){H4(this._lView),this._lView[On]|=128}detectChanges(){this._lView[On]|=1024,XD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const n=CS(this._lView),e=this._lView[Fg];null!==e&&!n&&G$(e,this._lView),yQ(this._lView[yt],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Fe(902,!1);this._appRef=n;const e=CS(this._lView),i=this._lView[Fg];null!==i&&!e&&wQ(i,this._lView),H4(this._lView)}}let hr=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=SNe}return t})();const wNe=hr,CNe=class extends wNe{constructor(n,e,i){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,e){return this.createEmbeddedViewImpl(n,e)}createEmbeddedViewImpl(n,e,i){const s=u1(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:e,dehydratedView:i});return new qS(s)}};function SNe(){return YD(Ks(),Ue())}function YD(t,n){return 4&t.type?new CNe(n,t,n1(t,n)):null}function sJ(t,n,e){const i=n.insertBeforeIndex,s=Array.isArray(i)?i[0]:i;return null===s?TQ(t,0,e):ws(e[s])}function rJ(t,n,e,i,s){const r=n.insertBeforeIndex;if(Array.isArray(r)){let o=i,a=null;if(3&n.type||(a=o,o=s),null!==o&&-1===n.componentOffset)for(let l=1;l<r.length;l++)Hg(t,o,e[r[l]],a,!1)}}function oJ(t,n){if(t.push(n),t.length>1)for(let e=t.length-2;e>=0;e--){const i=t[e];aJ(i)||NNe(i,n)&&null===ONe(i)&&RNe(i,n.index)}}function aJ(t){return!(64&t.type)}function NNe(t,n){return aJ(n)||t.index>n.index}function ONe(t){const n=t.insertBeforeIndex;return Array.isArray(n)?n[0]:n}function RNe(t,n){const e=t.insertBeforeIndex;Array.isArray(e)?e[0]=n:(kQ(sJ,rJ),t.insertBeforeIndex=n)}function ZS(t,n){const e=t.data[n];return null===e||"string"==typeof e?null:e.hasOwnProperty("currentCaseLViewIndex")?e:e.value}function PNe(t,n,e){const i=Y$(t,e,64,null,null);return oJ(n,i),i}function QD(t,n){const e=n[t.currentCaseLViewIndex];return null===e?e:e<0?~e:e}function lJ(t){return t>>>17}function cJ(t){return(131070&t)>>>1}function h8(t,n,e){t.index=0;const i=QD(n,e);t.removes=null!==i?n.remove[i]:ys}function JD(t){if(t.index<t.removes.length){const n=t.removes[t.index++];return n>0?t.lView[n]:(t.stack.push(t.index,t.removes),h8(t,t.lView[yt].data[~n],t.lView),JD(t))}return 0===t.stack.length?null:(t.removes=t.stack.pop(),t.index=t.stack.pop(),JD(t))}function BNe(){const t={stack:[],index:-1};return function n(e,i){for(t.lView=i;t.stack.length;)t.stack.pop();return h8(t,e.value,i),JD.bind(null,t)}}let gJ=()=>{},vJ=()=>{},CJ=()=>null;function Yg(t,n){return CJ(t,n)}class p1{}const tx=new Ne("",{providedIn:"root",factory:()=>!1}),SJ=new Ne(""),v8=new Ne("");class mOe{}class xJ{}class gOe{resolveComponentFactory(n){throw function _Oe(t){const n=Error(`No component factory found for ${ra(t)}.`);return n.ngComponent=t,n}(n)}}class f1{static#e=this.NULL=new gOe}class nA{}let Pd=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function bOe(){const t=Ue(),e=zc(Ks().index,t);return(la(e)?e:t)[ei]}()}return t})(),vOe=(()=>{class t{static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>null})}return t})();function sA(t,n,e){let i=e?t.styles:null,s=e?t.classes:null,r=0;if(null!==n)for(let o=0;o<n.length;o++){const a=n[o];"number"==typeof a?r=a:1==r?s=d4(s,a):2==r&&(i=d4(i,a+": "+n[++o]+";"))}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=s:t.classesWithoutHost=s}class kJ extends f1{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=Gi(n);return new sx(e,this.ngModule)}}function DJ(t,n){const e=[];for(const i in t){if(!t.hasOwnProperty(i))continue;const s=t[i];if(void 0===s)continue;const r=Array.isArray(s),o=r?s[0]:s;e.push(n?{propName:o,templateName:i,isSignal:!!((r?s[1]:mm.None)&mm.SignalBased)}:{propName:o,templateName:i})}return e}class sx extends xJ{get inputs(){const n=this.componentDef,e=n.inputTransforms,i=DJ(n.inputs,!0);if(null!==e)for(const s of i)e.hasOwnProperty(s.propName)&&(s.transform=e[s.propName]);return i}get outputs(){return DJ(this.componentDef.outputs,!1)}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function Dke(t){return t.map(kke).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}create(n,e,i,s){const r=Je(null);try{let o=(s=s||this.ngModule)instanceof ul?s:s?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new Vg(n,o):n,l=a.get(nA,null);if(null===l)throw new Fe(407,!1);const d={rendererFactory:l,sanitizer:a.get(vOe,null),inlineEffectRunner:null,changeDetectionScheduler:a.get(p1,null)},h=l.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",f=i?function BMe(t,n,e,i){const r=i.get(KZ,!1)||e===Ad.ShadowDom,o=t.selectRootElement(n,r);return function VMe(t){$Q(t)}(o),o}(h,i,this.componentDef.encapsulation,a):UD(h,p,function COe(t){const n=t.toLowerCase();return"svg"===n?EY:"math"===n?"math":null}(p));let g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let v=null;null!==f&&(v=I$(f,a,!0));const y=e8(0,null,null,1,0,null,null,null,null,null,null),w=WD(null,y,null,g,null,null,d,h,a,null,v);J4(w);let x,T,k=null;try{const R=this.componentDef;let N,D=null;R.findHostDirectiveDefs?(N=[],D=new Map,R.findHostDirectiveDefs(R,N,D),N.push(R)):N=[R];const F=function xOe(t,n){const e=t[yt],i=gn;return t[i]=n,qg(e,i,2,"#host",null)}(w,f);k=function EOe(t,n,e,i,s,r,o){const a=s[yt];!function TOe(t,n,e,i){for(const s of t)n.mergedAttrs=bS(n.mergedAttrs,s.hostAttrs);null!==n.mergedAttrs&&(sA(n,n.mergedAttrs,!0),null!==e&&OQ(i,e,n))}(i,t,n,o);let l=null;null!==n&&(l=I$(n,s[Po]));const c=r.rendererFactory.createRenderer(n,e);let u=16;e.signals?u=4096:e.onPush&&(u=64);const d=WD(s,PQ(e),null,u,s[t.index],t,r,c,null,null,l);return a.firstCreatePass&&n8(a,t,i.length-1),qD(s,d),s[t.index]=d}(F,f,R,N,w,d,h),T=xS(y,gn),f&&function kOe(t,n,e,i){if(i)I4(t,e,["ng-version","18.2.3"]);else{const{attrs:s,classes:r}=function Ake(t){const n=[],e=[];let i=1,s=2;for(;i<t.length;){let r=t[i];if("string"==typeof r)2===s?""!==r&&n.push(r,t[++i]):8===s&&e.push(r);else{if(!Md(s))break;s=r}i++}return{attrs:n,classes:e}}(n.selectors[0]);s&&I4(t,e,s),r&&r.length>0&&NQ(t,e,r.join(" "))}}(h,R,f,i),void 0!==e&&function DOe(t,n,e){const i=t.projection=[];for(let s=0;s<n.length;s++){const r=e[s];i.push(null!=r?Array.from(r):null)}}(T,this.ngContentSelectors,e),x=function IOe(t,n,e,i,s,r){const o=Ks(),a=s[yt],l=Il(o,s);zQ(a,s,o,e,null,i);for(let u=0;u<e.length;u++)hl(zg(s,a,o.directiveStart+u,o),s);UQ(a,s,o),l&&hl(l,s);const c=zg(s,a,o.directiveStart+o.componentOffset,o);if(t[Cr]=s[Cr]=c,null!==r)for(const u of r)u(c,n);return Z$(a,o,s),c}(k,R,N,D,w,[AOe]),o8(y,w,null)}catch(R){throw null!==k&&g$(k),g$(w),R}finally{e$()}return new SOe(this.componentType,x,n1(T,w),w,T)}finally{Je(r)}}}class SOe extends mOe{constructor(n,e,i,s,r){super(),this.location=i,this._rootLView=s,this._tNode=r,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new qS(s,void 0,!1),this.componentType=n}setInput(n,e){const i=this._tNode.inputs;let s;if(null!==i&&(s=i[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;const r=this._rootLView;r8(r[yt],r,s,n,e),this.previousInputValues.set(n,e),WS(zc(this._tNode.index,r),1)}}get injector(){return new ca(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function AOe(){const t=Ks();gD(Ue()[yt],t)}let Kr=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=MOe}return t})();function MOe(){return NJ(Ks(),Ue())}const NOe=Kr,AJ=class extends NOe{constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return n1(this._hostTNode,this._hostLView)}get injector(){return new ca(this._hostTNode,this._hostLView)}get parentInjector(){const n=CD(this._hostTNode,this._hostLView);if(s$(n)){const e=DS(n,this._hostLView),i=kS(n);return new ca(e[yt].data[i+8],e)}return new ca(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=MJ(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-Co}createEmbeddedView(n,e,i){let s,r;"number"==typeof i?s=i:null!=i&&(s=i.index,r=i.injector);const o=Yg(this._lContainer,n.ssrId),a=n.createEmbeddedViewImpl(e||{},r,o);return this.insertImpl(a,s,Kg(this._hostTNode,o)),a}createComponent(n,e,i,s,r){const o=n&&!function vS(t){return"function"==typeof t}(n);let a;if(o)a=e;else{const f=e||{};a=f.index,i=f.injector,s=f.projectableNodes,r=f.environmentInjector||f.ngModuleRef}const l=o?n:new sx(Gi(n)),c=i||this.parentInjector;if(!r&&null==l.ngModule){const g=(o?c:this.parentInjector).get(ul,null);g&&(r=g)}const u=Gi(l.componentType??{}),d=Yg(this._lContainer,u?.id??null),p=l.create(c,s,d?.firstChild??null,r);return this.insertImpl(p.hostView,a,Kg(this._hostTNode,d)),p}insert(n,e){return this.insertImpl(n,e,!0)}insertImpl(n,e,i){const s=n._lView;if(function lDe(t){return dl(t[Lo])}(s)){const a=this.indexOf(n);if(-1!==a)this.detach(a);else{const l=s[Lo],c=new AJ(l,l[Ha],l[Lo]);c.detach(c.indexOf(n))}}const r=this._adjustIndex(e),o=this._lContainer;return d1(o,s,r,i),n.attachToViewContainerRef(),YX(C8(o),r,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=MJ(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),i=zS(this._lContainer,e);i&&(Jk(C8(this._lContainer),e),GD(i[yt],i))}detach(n){const e=this._adjustIndex(n,-1),i=zS(this._lContainer,e);return i&&null!=Jk(C8(this._lContainer),e)?new qS(i):null}_adjustIndex(n,e=0){return n??this.length+e}};function MJ(t){return t[8]}function C8(t){return t[8]||(t[8]=[])}function NJ(t,n){let e;const i=n[t.index];return dl(i)?e=i:(e=GQ(i,n,null,t),n[t.index]=e,qD(n,e)),OJ(e,n,t,i),new AJ(e,t,n)}let OJ=function FJ(t,n,e,i){if(t[Mh])return;let s;s=8&e.type?ws(i):function OOe(t,n){const e=t[ei],i=e.createComment(""),s=Il(n,t);return Hg(e,W$(e,s),i,function NMe(t,n){return t.nextSibling(n)}(e,s),!1),i}(n,e),t[Mh]=s},S8=()=>!1;class x8{constructor(n){this.queryList=n,this.matches=null}clone(){return new x8(this.queryList)}setDirty(){this.queryList.setDirty()}}class E8{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const i=null!==n.contentQueries?n.contentQueries[0]:e.length,s=[];for(let r=0;r<i;r++){const o=e.getByIndex(r);s.push(this.queries[o.indexInDeclarationView].clone())}return new E8(s)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==A8(n,e).matches&&this.queries[e].setDirty()}}class LJ{constructor(n,e,i=null){this.flags=e,this.read=i,this.predicate="string"==typeof n?function zOe(t){return t.split(",").map(n=>n.trim())}(n):n}}class T8{constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){const s=null!==e?e.length:0,r=this.getByIndex(i).embeddedTView(n,s);r&&(r.indexInDeclarationView=i,null!==e?e.push(r):e=[r])}return null!==e?new T8(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class I8{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new I8(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1&~this.metadata.flags){const e=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let s=0;s<i.length;s++){const r=i[s];this.matchTNodeWithReadOption(n,e,POe(e,r)),this.matchTNodeWithReadOption(n,e,SD(e,n,r,!1,!1))}else i===hr?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,SD(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(null!==i){const s=this.metadata.read;if(null!==s)if(s===vt||s===Kr||s===hr&&4&e.type)this.addMatch(e.index,-2);else{const r=SD(e,n,s,!1,!1);null!==r&&this.addMatch(e.index,r)}else this.addMatch(e.index,i)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function POe(t,n){const e=t.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1];return null}function BOe(t,n,e,i){return-1===e?function $Oe(t,n){return 11&t.type?n1(t,n):4&t.type?YD(t,n):null}(n,t):-2===e?function VOe(t,n,e){return e===vt?n1(n,t):e===hr?YD(n,t):e===Kr?NJ(n,t):void 0}(t,n,i):zg(t,t[yt],e,n)}function PJ(t,n,e,i){const s=n[Yp].queries[i];if(null===s.matches){const r=t.data,o=e.matches,a=[];for(let l=0;null!==o&&l<o.length;l+=2){const c=o[l];a.push(c<0?null:BOe(n,r[c],o[l+1],e.metadata.read))}s.matches=a}return s.matches}function k8(t,n,e,i){const s=t.queries.getByIndex(e),r=s.matches;if(null!==r){const o=PJ(t,n,s,e);for(let a=0;a<r.length;a+=2){const l=r[a];if(l>0)i.push(o[a/2]);else{const c=r[a+1],u=n[-l];for(let d=Co;d<u.length;d++){const h=u[d];h[Fg]===h[Lo]&&k8(h[yt],h,c,i)}if(null!==u[Qy]){const d=u[Qy];for(let h=0;h<d.length;h++){const p=d[h];k8(p[yt],p,c,i)}}}}}return i}function D8(t,n){return t[Yp].queries[n].queryList}function $J(t,n,e){const i=new vm(!(4&~e));return function GMe(t,n,e,i){const s=HQ(n);s.push(e),t.firstCreatePass&&WQ(t).push(i,s.length-1)}(t,n,i,i.destroy),(n[Yp]??=new E8).queries.push(new x8(i))-1}function VJ(t,n,e,i){const s=Fi();if(s.firstCreatePass){const r=Ks();zJ(s,new LJ(n,e,i),r.index),function UOe(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(s,t),!(2&~e)&&(s.staticContentQueries=!0)}return $J(s,Ue(),e)}function zJ(t,n,e){null===t.queries&&(t.queries=new T8),t.queries.track(new I8(n,e))}function A8(t,n){return t.queries.getByIndex(n)}function UJ(t,n){const e=t[yt],i=A8(e,n);return i.crossesNgTemplate?k8(e,t,n,[]):PJ(e,t,i,n)}const GJ=new Set;function Dl(t){GJ.has(t)||(GJ.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function rA(t){return"function"==typeof t&&void 0!==t[rt]}function xm(t,n){Dl("NgSignals");const e=function yg(t){const n=Object.create(sm);n.value=t;const e=()=>(Mn(n),n.value);return e[rt]=n,e}(t),i=e[rt];return n?.equal&&(i.equal=n.equal),e.set=s=>wg(i,s),e.update=s=>function eS(t,n){dr()||yy(),wg(t,n(t.value))}(i,s),e.asReadonly=jJ.bind(e),e}function jJ(){const t=this[rt];if(void 0===t.readonlyFn){const n=()=>this();n[rt]=t,t.readonlyFn=n}return t.readonlyFn}function HJ(t){return rA(t)&&"function"==typeof t.set}function M8(t,n){let e;const i=by(()=>{e._dirtyCounter();const s=function GOe(t,n){const e=t._lView,i=t._queryIndex;if(void 0===e||void 0===i||4&e[On])return n?void 0:ys;const s=D8(e,i),r=UJ(e,i);return s.reset(r,vZ),n?s.first:s._changesDetected||void 0===t._flatValue?t._flatValue=s.toArray():t._flatValue}(e,t);if(n&&void 0===s)throw new Fe(-951,!1);return s});return e=i[rt],e._dirtyCounter=xm(0),e._flatValue=void 0,i}function YJ(t,n){return function WJ(){return M8(!0,!1)}()}const HOe=(YJ.required=function jOe(t,n){return function qJ(){return M8(!0,!0)}()},YJ);function Ze(t){let n=function iee(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const i=[t];for(;n;){let s;if(Od(t))s=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Fe(903,!1);s=n.\u0275dir}if(s){if(e){i.push(s);const o=t;o.inputs=aA(t.inputs),o.inputTransforms=aA(t.inputTransforms),o.declaredInputs=aA(t.declaredInputs),o.outputs=aA(t.outputs);const a=s.hostBindings;a&&sRe(t,a);const l=s.viewQuery,c=s.contentQueries;if(l&&nRe(t,l),c&&iRe(t,c),eRe(t,s),Y2e(t.outputs,s.outputs),Od(s)&&s.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(s.data.animation)}}const r=s.features;if(r)for(let o=0;o<r.length;o++){const a=r[o];a&&a.ngInherit&&a(t),a===Ze&&(e=!1)}}n=Object.getPrototypeOf(n)}!function tRe(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){const s=t[i];s.hostVars=n+=s.hostVars,s.hostAttrs=bS(s.hostAttrs,e=bS(e,s.hostAttrs))}}(i)}function eRe(t,n){for(const e in n.inputs){if(!n.inputs.hasOwnProperty(e)||t.inputs.hasOwnProperty(e))continue;const i=n.inputs[e];if(void 0!==i&&(t.inputs[e]=i,t.declaredInputs[e]=n.declaredInputs[e],null!==n.inputTransforms)){const s=Array.isArray(i)?i[0]:i;if(!n.inputTransforms.hasOwnProperty(s))continue;t.inputTransforms??={},t.inputTransforms[s]=n.inputTransforms[s]}}}function aA(t){return t===kh?{}:t===ys?[]:t}function nRe(t,n){const e=t.viewQuery;t.viewQuery=e?(i,s)=>{n(i,s),e(i,s)}:n}function iRe(t,n){const e=t.contentQueries;t.contentQueries=e?(i,s,r)=>{n(i,s,r),e(i,s,r)}:n}function sRe(t,n){const e=t.hostBindings;t.hostBindings=e?(i,s)=>{n(i,s),e(i,s)}:n}function Li(t){const n=t.inputConfig,e={};for(const i in n)if(n.hasOwnProperty(i)){const s=n[i];Array.isArray(s)&&s[3]&&(e[i]=s[3])}t.inputTransforms=e}class Zg{}class lee{}class N8 extends Zg{constructor(n,e,i,s=!0){super(),this.ngModuleType=n,this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kJ(this);const r=cl(n);this._bootstrapComponents=jc(r.bootstrap),this._r3Injector=uZ(n,e,[{provide:Zg,useValue:this},{provide:f1,useValue:this.componentFactoryResolver},...i],ra(n),new Set(["environment"])),s&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class O8 extends lee{constructor(n){super(),this.moduleType=n}create(n){return new N8(this.moduleType,n,[])}}class cee extends Zg{constructor(n){super(),this.componentFactoryResolver=new kJ(this),this.instance=null;const e=new Hy([...n.providers,{provide:Zg,useValue:this},{provide:f1,useValue:this.componentFactoryResolver}],n.parent||oD(),n.debugName,new Set(["environment"]));this.injector=e,n.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function lA(t,n,e=null){return new cee({providers:t,parent:n,debugName:e,runEnvironmentInitializers:!0}).injector}function cA(t){return!!function R8(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Ph(t,n,e){return t[n]=e}function So(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function Qg(t,n,e,i){const s=So(t,n,e);return So(t,n+1,i)||s}function uA(t,n,e,i,s){const r=Qg(t,n,e,i);return So(t,n+2,s)||r}function ax(t,n,e,i,s,r,o,a,l,c){const u=e+gn,d=n.firstCreatePass?function mRe(t,n,e,i,s,r,o,a,l){const c=n.consts,u=qg(n,t,4,o||null,a||null);t8(n,e,u,Du(c,l)),gD(n,u);const d=u.tView=e8(2,u,i,s,r,n.directiveRegistry,n.pipeRegistry,null,n.schemas,c,null);return null!==n.queries&&(n.queries.template(n,u),d.queries=n.queries.embeddedTView(u)),u}(u,n,t,i,s,r,o,a,l):n.data[u];Rd(d,!1);const h=uee(n,t,d,e);TS()&&jD(n,t,h,d),hl(h,t);const p=GQ(h,t,h,d);return t[u]=p,qD(t,p),function RJ(t,n,e){return S8(t,n,e)}(p,d,t),dD(d)&&Q$(n,t,d),null!=l&&J$(t,d,c),d}function O(t,n,e,i,s,r,o,a){const l=Ue(),c=Fi();return ax(l,c,t,n,e,i,s,Du(c.consts,r),o,a),O}let uee=function dee(t,n,e,i){return Oh(!0),n[ei].createComment("")};var b1=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(b1||{});let gee=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>new t})}return t})();class ux{constructor(){this.ngZone=xe(Lt),this.scheduler=xe(p1),this.errorHandler=xe(Ld,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static#e=this.PHASES=[b1.EarlyRead,b1.Write,b1.MixedReadWrite,b1.Read];execute(){this.executing=!0;for(const n of ux.PHASES)for(const e of this.sequences)if(!e.erroredOrDestroyed&&e.hooks[n])try{e.pipelinedValue=this.ngZone.runOutsideAngular(()=>e.hooks[n](e.pipelinedValue))}catch(i){e.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(const n of this.sequences)n.afterRun(),n.once&&this.sequences.delete(n);for(const n of this.deferredRegistrations)this.sequences.add(n);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(n){this.executing?this.deferredRegistrations.add(n):(this.sequences.add(n),this.scheduler.notify(6))}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}static#t=this.\u0275prov=Pe({token:ux,providedIn:"root",factory:()=>new ux})}class vRe{constructor(n,e,i,s){this.impl=n,this.hooks=e,this.once=i,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=s.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}}function L8(t,n){!n?.injector&&L4();const e=n?.injector??xe(ci);return Hc(e)?(Dl("NgAfterRender"),bee(t,e,n,!1)):vee}function pl(t,n){!n?.injector&&L4();const e=n?.injector??xe(ci);return Hc(e)?(Dl("NgAfterNextRender"),bee(t,e,n,!0)):vee}function bee(t,n,e,i){const s=n.get(gee);s.impl??=n.get(ux);const o=new vRe(s.impl,function yRe(t,n){if(t instanceof Function){const e=[void 0,void 0,void 0,void 0];return e[n]=t,e}return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}(t,e?.phase??b1.MixedReadWrite),i,n.get(AS));return s.impl.register(o),o}const vee={destroy(){}};function wt(t,n,e,i){const s=Ue();return So(s,Fd(),n)&&(Fi(),function Lh(t,n,e,i,s,r){const o=Il(t,n);i8(n[ei],o,r,t.value,e,i,s)}(Sr(),s,t,n,e,i)),wt}function E1(t,n,e,i){return So(t,Fd(),e)?n+di(e)+i:hi}function _A(t,n){return t<<17|n<<2}function Tm(t){return t>>17&32767}function W8(t){return 2|t}function eb(t){return(131068&t)>>2}function q8(t,n){return-131069&t|n<<2}function K8(t){return 1|t}function Hee(t,n,e,i){const s=t[e+1],r=null===n;let o=i?Tm(s):eb(s),a=!1;for(;0!==o&&(!1===a||r);){const c=t[o+1];nFe(t[o],n)&&(a=!0,t[o+1]=i?K8(c):W8(c)),o=i?Tm(c):eb(c)}a&&(t[e+1]=i?W8(s):K8(s))}function nFe(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Gy(t,n)>=0}const da={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Wee(t){return t.substring(da.key,da.keyEnd)}function qee(t,n){const e=da.textEnd;return e===n?-1:(n=da.keyEnd=function oFe(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}(t,da.key=n,e),O1(t,n,e))}function O1(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function C(t,n,e){const i=Ue();return So(i,Fd(),n)&&oc(Fi(),Sr(),i,t,n,i[ei],e,!1),C}function X8(t,n,e,i,s){const o=s?"class":"style";r8(t,e,n.inputs[o],o,i)}function Hn(t,n,e){return Bd(t,n,e,!1),Hn}function Oe(t,n){return Bd(t,n,null,!0),Oe}function $o(t){Vd(mFe,$h,t,!0)}function $h(t,n){for(let e=function sFe(t){return function Xee(t){da.key=0,da.keyEnd=0,da.value=0,da.valueEnd=0,da.textEnd=t.length}(t),qee(t,O1(t,0,da.textEnd))}(n);e>=0;e=qee(n,e))Vc(t,Wee(n),!0)}function Bd(t,n,e,i){const s=Ue(),r=Fi(),o=Jp(2);r.firstUpdatePass&&Jee(r,t,o,i),n!==hi&&So(s,o,n)&&tte(r,r.data[Wa()],s,s[ei],t,s[o+1]=function gFe(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=ra(Uc(t)))),t}(n,e),i,o)}function Vd(t,n,e,i){const s=Fi(),r=Jp(2);s.firstUpdatePass&&Jee(s,null,r,i);const o=Ue();if(e!==hi&&So(o,r,e)){const a=s.data[Wa()];if(ite(a,i)&&!Qee(s,r)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(e=d4(l,e||"")),X8(s,a,o,e,i)}else!function _Fe(t,n,e,i,s,r,o,a){s===hi&&(s=ys);let l=0,c=0,u=0<s.length?s[0]:null,d=0<r.length?r[0]:null;for(;null!==u||null!==d;){const h=l<s.length?s[l+1]:void 0,p=c<r.length?r[c+1]:void 0;let g,f=null;u===d?(l+=2,c+=2,h!==p&&(f=d,g=p)):null===d||null!==u&&u<d?(l+=2,f=u):(c+=2,f=d,g=p),null!==f&&tte(t,n,e,i,f,g,o,a),u=l<s.length?s[l]:null,d=c<r.length?r[c]:null}}(s,a,o,o[ei],o[r+1],o[r+1]=function fFe(t,n,e){if(null==e||""===e)return ys;const i=[],s=Uc(e);if(Array.isArray(s))for(let r=0;r<s.length;r++)t(i,s[r],!0);else if("object"==typeof s)for(const r in s)s.hasOwnProperty(r)&&t(i,r,s[r]);else"string"==typeof s&&n(i,s);return i}(t,n,e),i,r)}}function Qee(t,n){return n>=t.expandoStartIndex}function Jee(t,n,e,i){const s=t.data;if(null===s[e+1]){const r=s[Wa()],o=Qee(t,e);ite(r,i)&&null===n&&!o&&(n=!1),n=function uFe(t,n,e,i){const s=Z4(t);let r=i?n.residualClasses:n.residualStyles;if(null===s)0===(i?n.classBindings:n.styleBindings)&&(e=hx(e=Y8(null,t,n,e,i),n.attrs,i),r=null);else{const o=n.directiveStylingLast;if(-1===o||t[o]!==s)if(e=Y8(s,t,n,e,i),null===r){let l=function dFe(t,n,e){const i=e?n.classBindings:n.styleBindings;if(0!==eb(i))return t[Tm(i)]}(t,n,i);void 0!==l&&Array.isArray(l)&&(l=Y8(null,t,n,l[1],i),l=hx(l,n.attrs,i),function hFe(t,n,e,i){t[Tm(e?n.classBindings:n.styleBindings)]=i}(t,n,i,l))}else r=function pFe(t,n,e){let i;const s=n.directiveEnd;for(let r=1+n.directiveStylingLast;r<s;r++)i=hx(i,t[r].hostAttrs,e);return hx(i,n.attrs,e)}(t,n,i)}return void 0!==r&&(i?n.residualClasses=r:n.residualStyles=r),e}(s,r,n,i),function eFe(t,n,e,i,s,r){let o=r?n.classBindings:n.styleBindings,a=Tm(o),l=eb(o);t[i]=e;let u,c=!1;if(Array.isArray(e)?(u=e[1],(null===u||Gy(e,u)>0)&&(c=!0)):u=e,s)if(0!==l){const h=Tm(t[a+1]);t[i+1]=_A(h,a),0!==h&&(t[h+1]=q8(t[h+1],i)),t[a+1]=function QRe(t,n){return 131071&t|n<<17}(t[a+1],i)}else t[i+1]=_A(a,0),0!==a&&(t[a+1]=q8(t[a+1],i)),a=i;else t[i+1]=_A(l,0),0===a?a=i:t[l+1]=q8(t[l+1],i),l=i;c&&(t[i+1]=W8(t[i+1])),Hee(t,u,i,!0),Hee(t,u,i,!1),function tFe(t,n,e,i,s){const r=s?t.residualClasses:t.residualStyles;null!=r&&"string"==typeof n&&Gy(r,n)>=0&&(e[i+1]=K8(e[i+1]))}(n,u,t,i,r),o=_A(a,l),r?n.classBindings=o:n.styleBindings=o}(s,r,n,e,o,i)}}function Y8(t,n,e,i,s){let r=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(r=n[a],i=hx(i,r.hostAttrs,s),r!==t);)a++;return null!==t&&(e.directiveStylingLast=a),i}function hx(t,n,e){const i=e?1:2;let s=-1;if(null!==n)for(let r=0;r<n.length;r++){const o=n[r];"number"==typeof o?s=o:s===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Vc(t,o,!!e||n[++r]))}return void 0===t?null:t}function mFe(t,n,e){const i=String(n);""!==i&&!i.includes(" ")&&Vc(t,i,e)}function tte(t,n,e,i,s,r,o,a){if(!(3&n.type))return;const l=t.data,c=l[a+1],u=function JRe(t){return!(1&~t)}(c)?nte(l,n,e,s,eb(c),o):void 0;gA(u)||(gA(r)||function ZRe(t){return!(2&~t)}(c)&&(r=nte(l,null,e,s,a,o)),function FMe(t,n,e,i,s){if(n)s?t.addClass(e,i):t.removeClass(e,i);else{let r=-1===i.indexOf("-")?void 0:wm.DashCase;null==s?t.removeStyle(e,i,r):("string"==typeof s&&s.endsWith("!important")&&(s=s.slice(0,-10),r|=wm.Important),t.setStyle(e,i,s,r))}}(i,o,SS(Wa(),e),s,r))}function nte(t,n,e,i,s,r){const o=null===n;let a;for(;s>0;){const l=t[s],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=e[s+1];h===hi&&(h=d?ys:void 0);let p=d?E4(h,i):u===i?h:void 0;if(c&&!gA(p)&&(p=E4(l,i)),gA(p)&&(a=p,o))return a;const f=t[s+1];s=o?Tm(f):eb(f)}if(null!==n){let l=r?n.residualClasses:n.residualStyles;null!=l&&(a=E4(l,i))}return a}function gA(t){return void 0!==t}function ite(t,n){return!!(t.flags&(n?8:16))}class IFe{destroy(n){}updateValue(n,e){}swap(n,e){const i=Math.min(n,e),s=Math.max(n,e),r=this.detach(s);if(s-i>1){const o=this.detach(i);this.attach(i,r),this.attach(s,o)}else this.attach(i,r)}move(n,e){this.attach(e,this.detach(n))}}function Z8(t,n,e,i,s){return t===e&&Object.is(n,i)?1:Object.is(s(t,n),s(e,i))?-1:0}function Q8(t,n,e,i){return!(void 0===n||!n.has(i)||(t.attach(e,n.get(i)),n.delete(i),0))}function rte(t,n,e,i,s){if(Q8(t,n,i,e(i,s)))t.updateValue(i,s);else{const r=t.create(i,s);t.attach(i,r)}}function ote(t,n,e,i){const s=new Set;for(let r=n;r<=e;r++)s.add(i(r,t.at(r)));return s}class ate{constructor(){this.kvMap=new Map,this._vMap=void 0}has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;const e=this.kvMap.get(n);return void 0!==this._vMap&&this._vMap.has(e)?(this.kvMap.set(n,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,e){if(this.kvMap.has(n)){let i=this.kvMap.get(n);void 0===this._vMap&&(this._vMap=new Map);const s=this._vMap;for(;s.has(i);)i=s.get(i);s.set(i,e)}else this.kvMap.set(n,e)}forEach(n){for(let[e,i]of this.kvMap)if(n(i,e),void 0!==this._vMap){const s=this._vMap;for(;s.has(i);)i=s.get(i),n(i,e)}}}function Bn(t,n){Dl("NgControlFlow");const e=Ue(),i=Fd(),s=e[i]!==hi?e[i]:-1,r=-1!==s?bA(e,gn+s):void 0;if(So(e,i,t)){const a=Je(null);try{if(void 0!==r&&a8(r,0),-1!==t){const l=gn+t,c=bA(e,l),u=J8(e[yt],l),d=Yg(c,u.tView.ssrId);d1(c,u1(e,u,n,{dehydratedView:d}),0,Kg(u,d))}}finally{Je(a)}}else if(void 0!==r){const a=KQ(r,0);void 0!==a&&(a[Cr]=n)}}class DFe{constructor(n,e,i){this.lContainer=n,this.$implicit=e,this.$index=i}get $count(){return this.lContainer.length-Co}}function lte(t){return t}function cte(t,n){return n}class AFe{constructor(n,e,i){this.hasEmptyBlock=n,this.trackByFn=e,this.liveCollection=i}}function R1(t,n,e,i,s,r,o,a,l,c,u,d,h){Dl("NgControlFlow");const p=Ue(),f=Fi(),g=void 0!==l,v=Ue(),y=a?o.bind(v[Br][Cr]):o,w=new AFe(g,y);v[gn+t]=w,ax(p,f,t+1,n,e,i,s,Du(f.consts,r)),g&&ax(p,f,t+2,l,c,u,d,Du(f.consts,h))}class MFe extends IFe{constructor(n,e,i){super(),this.lContainer=n,this.hostLView=e,this.templateTNode=i,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Co}at(n){return this.getLView(n)[Cr].$implicit}attach(n,e){const i=e[Tl];this.needsIndexUpdate||=n!==this.length,d1(this.lContainer,e,n,Kg(this.templateTNode,i))}detach(n){return this.needsIndexUpdate||=n!==this.length-1,function NFe(t,n){return zS(t,n)}(this.lContainer,n)}create(n,e){const i=Yg(this.lContainer,this.templateTNode.tView.ssrId),s=u1(this.hostLView,this.templateTNode,new DFe(this.lContainer,e,n),{dehydratedView:i});return this.operationsCounter?.recordCreate(),s}destroy(n){GD(n[yt],n),this.operationsCounter?.recordDestroy()}updateValue(n,e){this.getLView(n)[Cr].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[Cr].$index=n}getLView(n){return function OFe(t,n){return KQ(t,n)}(this.lContainer,n)}}function F1(t){const n=Je(null),e=Wa();try{const i=Ue(),s=i[yt],r=i[e],o=e+1,a=bA(i,o);if(void 0===r.liveCollection){const c=J8(s,o);r.liveCollection=new MFe(a,i,c)}else r.liveCollection.reset();const l=r.liveCollection;if(function kFe(t,n,e){let i,s,r=0,o=t.length-1;if(Array.isArray(n)){let l=n.length-1;for(;r<=o&&r<=l;){const c=t.at(r),u=n[r],d=Z8(r,c,r,u,e);if(0!==d){d<0&&t.updateValue(r,u),r++;continue}const h=t.at(o),p=n[l],f=Z8(o,h,l,p,e);if(0!==f){f<0&&t.updateValue(o,p),o--,l--;continue}const g=e(r,c),v=e(o,h),y=e(r,u);if(Object.is(y,v)){const w=e(l,p);Object.is(w,g)?(t.swap(r,o),t.updateValue(o,p),l--,o--):t.move(o,r),t.updateValue(r,u),r++}else if(i??=new ate,s??=ote(t,r,o,e),Q8(t,i,r,y))t.updateValue(r,u),r++,o++;else if(s.has(y))i.set(g,t.detach(r)),o--;else{const w=t.create(r,n[r]);t.attach(r,w),r++,o++}}for(;r<=l;)rte(t,i,e,r,n[r]),r++}else if(null!=n){const l=n[Symbol.iterator]();let c=l.next();for(;!c.done&&r<=o;){const u=t.at(r),d=c.value,h=Z8(r,u,r,d,e);if(0!==h)h<0&&t.updateValue(r,d),r++,c=l.next();else{i??=new ate,s??=ote(t,r,o,e);const p=e(r,d);if(Q8(t,i,r,p))t.updateValue(r,d),r++,o++,c=l.next();else if(s.has(p)){const f=e(r,u);i.set(f,t.detach(r)),o--}else t.attach(r,t.create(r,d)),r++,o++,c=l.next()}}for(;!c.done;)rte(t,i,e,t.length,c.value),c=l.next()}for(;r<=o;)t.destroy(t.detach(o--));i?.forEach(l=>{t.destroy(l)})}(l,t,r.trackByFn),l.updateIndexes(),r.hasEmptyBlock){const c=Fd(),u=0===l.length;if(So(i,c,u)){const d=e+2,h=bA(i,d);if(u){const p=J8(s,d),f=Yg(h,p.tView.ssrId);d1(h,u1(i,p,void 0,{dehydratedView:f}),0,Kg(p,f))}else a8(h,0)}}}finally{Je(n)}}function bA(t,n){return t[n]}function J8(t,n){return xS(t,n)}function m(t,n,e,i){const s=Ue(),r=Fi(),o=gn+t,a=s[ei],l=r.firstCreatePass?function RFe(t,n,e,i,s,r){const o=n.consts,l=qg(n,t,2,i,Du(o,s));return t8(n,e,l,Du(o,r)),null!==l.attrs&&sA(l,l.attrs,!1),null!==l.mergedAttrs&&sA(l,l.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,l),l}(o,r,s,n,e,i):r.data[o],c=ute(r,s,l,a,n,t);s[o]=c;const u=dD(l);return Rd(l,!0),OQ(a,c,l),!function _1(t){return!(32&~t.flags)}(l)&&TS()&&jD(r,s,c,l),0===function cDe(){return ti.lFrame.elementDepthCount}()&&hl(c,s),function uDe(){ti.lFrame.elementDepthCount++}(),u&&(Q$(r,s,l),Z$(r,l,s)),null!==i&&J$(s,l),m}function _(){let t=Ks();K4()?X4():(t=t.parent,Rd(t,!1));const n=t;(function hDe(t){return ti.skipHydrationRootTNode===t})(n)&&function _De(){ti.skipHydrationRootTNode=null}(),function dDe(){ti.lFrame.elementDepthCount--}();const e=Fi();return e.firstCreatePass&&(gD(e,t),B4(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function IDe(t){return!!(8&t.flags)}(n)&&X8(e,n,Ue(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function kDe(t){return!!(16&t.flags)}(n)&&X8(e,n,Ue(),n.stylesWithoutHost,!1),_}function q(t,n,e,i){return m(t,n,e,i),_(),q}let ute=(t,n,e,i,s,r)=>(Oh(!0),UD(i,s,function jY(){return ti.lFrame.currentNamespace}()));function Wt(t,n,e){const i=Ue(),s=Fi(),r=t+gn,o=s.firstCreatePass?function PFe(t,n,e,i,s){const r=n.consts,o=Du(r,i),a=qg(n,t,8,"ng-container",o);return null!==o&&sA(a,o,!0),t8(n,e,a,Du(r,s)),null!==n.queries&&n.queries.elementStart(n,a),a}(r,s,i,n,e):s.data[r];Rd(o,!0);const a=dte(s,i,o,t);return i[r]=a,TS()&&jD(s,i,a,o),hl(a,i),dD(o)&&(Q$(s,i,o),Z$(s,o,i)),null!=e&&J$(i,o),Wt}function qt(){let t=Ks();const n=Fi();return K4()?X4():(t=t.parent,Rd(t,!1)),n.firstCreatePass&&(gD(n,t),B4(t)&&n.queries.elementEnd(t)),qt}function Es(t,n,e){return Wt(t,n,e),qt(),Es}let dte=(t,n,e,i)=>(Oh(!0),U$(n[ei],""));function se(){return Ue()}function fl(t,n,e){const i=Ue();return So(i,Fd(),n)&&oc(Fi(),Sr(),i,t,n,i[ei],e,!0),fl}function px(t,n,e){const i=Ue();if(So(i,Fd(),n)){const r=Fi(),o=Sr();oc(r,o,i,t,n,qQ(Z4(r.data),o,i),e,!0)}return px}const tb=void 0;var zFe=["en",[["a","p"],["AM","PM"],tb],[["AM","PM"],tb,tb],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],tb,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],tb,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",tb,"{1} 'at' {0}",tb],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function VFe(t){const e=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}];let L1={};function Al(t){const n=function UFe(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=pte(n);if(e)return e;const i=n.split("-")[0];if(e=pte(i),e)return e;if("en"===i)return zFe;throw new Fe(701,!1)}function pte(t){return t in L1||(L1[t]=Or.ng&&Or.ng.common&&Or.ng.common.locales&&Or.ng.common.locales[t]),L1[t]}var xr=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(xr||{});const GFe=["zero","one","two","few","many"],vA="en-US",yA={marker:"element"},wA={marker:"ICU"};var ac=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}(ac||{});let fte=vA,fx=0,mx=0;let _x=(t,n,e,i)=>(Oh(!0),function mte(t,n,e){const i=t[ei];switch(e){case Node.COMMENT_NODE:return U$(i,n);case Node.TEXT_NODE:return z$(i,n);case Node.ELEMENT_NODE:return UD(i,n,null)}}(t,e,i));function _te(t,n,e,i){const s=e[ei];let o,r=null;for(let a=0;a<n.length;a++){const l=n[a];if("string"==typeof l){const c=n[++a];null===e[c]&&(e[c]=_x(e,c,l,Node.TEXT_NODE))}else if("number"==typeof l)switch(1&l){case 0:const c=lJ(l);let u,d;if(null===r&&(r=c,o=W$(s,i)),c===r?(u=i,d=o):(u=null,d=ws(e[c])),null!==d){const g=cJ(l);Hg(s,d,e[g],u,!1);const y=ZS(t,g);if(null!==y&&"object"==typeof y){const w=QD(y,e);null!==w&&_te(t,y.create[w],e,e[y.anchorIdx])}}break;case 1:const p=n[++a],f=n[++a];i8(s,SS(l>>>1,e),null,null,p,f,null)}else switch(l){case wA:const c=n[++a],u=n[++a];null===e[u]&&hl(e[u]=_x(e,u,c,Node.COMMENT_NODE),e);break;case yA:const d=n[++a],h=n[++a];null===e[h]&&hl(e[h]=_x(e,h,d,Node.ELEMENT_NODE),e)}}}function gte(t,n,e,i,s){for(let r=0;r<e.length;r++){const o=e[r],a=e[++r];if(o&s){let l="";for(let c=r+1;c<=r+a;c++){const u=e[c];if("string"==typeof u)l+=u;else if("number"==typeof u)if(u<0)l+=di(n[i-u]);else{const d=u>>>2;switch(3&u){case 1:const h=e[++c],p=e[++c],f=t.data[d];"string"==typeof f?i8(n[ei],n[d],null,f,h,l,p):oc(t,f,n,h,l,n[ei],p,!1);break;case 0:const g=n[d];null!==g&&vQ(n[ei],g,l);break;case 2:JFe(t,ZS(t,d),n,l);break;case 3:bte(t,ZS(t,d),i,n)}}}}else{const l=e[r+1];if(l>0&&!(3&~l)){const u=ZS(t,l>>>2);n[u.currentCaseLViewIndex]<0&&bte(t,u,i,n)}}r+=a}}function bte(t,n,e,i){let s=i[n.currentCaseLViewIndex];if(null!==s){let r=fx;s<0&&(s=i[n.currentCaseLViewIndex]=~s,r=-1),gte(t,i,n.update[s],e,r)}}function JFe(t,n,e,i){const s=function eLe(t,n){let e=t.cases.indexOf(n);if(-1===e)switch(t.type){case 1:{const i=function jFe(t,n){const e=function hte(t){return Al(t)[xr.PluralCase]}(n)(parseInt(t,10)),i=GFe[e];return void 0!==i?i:"other"}(n,function qFe(){return fte}());e=t.cases.indexOf(i),-1===e&&"other"!==i&&(e=t.cases.indexOf("other"));break}case 0:e=t.cases.indexOf("other")}return-1===e?null:e}(n,i);if(QD(n,e)!==s&&(vte(t,n,e),e[n.currentCaseLViewIndex]=null===s?null:~s,null!==s)){const o=e[n.anchorIdx];o&&_te(t,n.create[s],e,o),function rOe(t,n,e){vJ(t,n,e)}(e,n.anchorIdx,s)}}function vte(t,n,e){let i=QD(n,e);if(null!==i){const s=n.remove[i];for(let r=0;r<s.length;r++){const o=s[r];if(o>0){const a=SS(o,e);null!==a&&US(e[ei],a)}else vte(t,ZS(t,~o),e)}}}const CA=/\ufffd(\d+):?\d*\ufffd/gi,nLe=/\ufffd(\d+)\ufffd/,wte=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,gx="\ufffd",iLe=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,sLe=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,rLe=/\uE500/g;function Cte(t,n,e,i,s,r,o){const a=jS(t,i,1,null);let l=a<<ac.SHIFT,c=ES();n===c&&(c=null),null===c&&(l|=ac.APPEND_EAGERLY),o&&(l|=ac.COMMENT,function EMe(t){void 0===B$&&(B$=t())}(BNe)),s.push(l,null===r?"":r);const u=Y$(t,a,o?32:1,null===r?"":r,null);oJ(e,u);const d=u.index;return Rd(u,!1),null!==c&&n!==c&&function LNe(t,n){let e=t.insertBeforeIndex;null===e?(kQ(sJ,rJ),e=t.insertBeforeIndex=[null,n]):(pm(Array.isArray(e),!0,"Expecting array here"),e.push(n))}(c,d),u}function lLe(t,n,e,i,s,r,o,a){const l=a.match(CA),u=Cte(n,e,i,o,s,l?null:a,!1).index;l&&bx(r,a,u,null,0,null),t.push({kind:0,index:u})}function bx(t,n,e,i,s,r){const o=t.length,a=o+1;t.push(null,null);const l=o+2,c=n.split(CA);let u=0;for(let d=0;d<c.length;d++){const h=c[d];if(1&d){const p=s+parseInt(h,10);t.push(-1-p),u|=Ste(p)}else""!==h&&t.push(h)}return t.push(e<<2|(i?1:0)),i&&t.push(i,r),t[o]=u,t[a]=t.length-l,u}function Ste(t){return 1<<Math.min(t,31)}function xte(t){let n,r,e="",i=0,s=!1;for(;null!==(n=iLe.exec(t));)s?n[0]===`${gx}/*${r}${gx}`&&(i=n.index,s=!1):(e+=t.substring(i,n.index+n[0].length),r=n[1],s=!0);return e+=t.slice(i),e}function Ete(t,n,e,i,s,r,o){let a=0;const l={type:r.type,currentCaseLViewIndex:jS(n,e,1,null),anchorIdx:o,cases:[],create:[],remove:[],update:[]};(function mLe(t,n,e){t.push(Ste(n.mainBinding),2,-1-n.mainBinding,e<<2|2)})(i,r,o),function FNe(t,n,e){const i=t.data[n];null===i?t.data[n]=e:i.value=e}(n,o,l);const c=r.values,u=[];for(let d=0;d<c.length;d++){const h=c[d],p=[];for(let g=0;g<h.length;g++){const v=h[g];if("string"!=typeof v){const y=p.push(v)-1;h[g]=`\x3c!--\ufffd${y}\ufffd--\x3e`}}const f=[];u.push(f),a=pLe(f,n,l,e,i,s,r.cases[d],h.join(""),p)|a}a&&function _Le(t,n,e){t.push(n,1,e<<2|3)}(i,a,o),t.push({kind:3,index:o,cases:u,currentCaseLViewIndex:l.currentCaseLViewIndex})}function hLe(t){const n=[],e=[];let i=1,s=0;const r=e5(t=t.replace(wte,function(o,a,l){return i="select"===l?0:1,s=parseInt(a.slice(1),10),""}));for(let o=0;o<r.length;){let a=r[o++].trim();1===i&&(a=a.replace(/\s*(?:=)?(\w+)\s*/,"$1")),a.length&&n.push(a);const l=e5(r[o++]);n.length>e.length&&e.push(l)}return{type:i,mainBinding:s,cases:n,values:e}}function e5(t){if(!t)return[];let n=0;const e=[],i=[],s=/[{}]/g;let r;for(s.lastIndex=0;r=s.exec(t);){const a=r.index;if("}"==r[0]){if(e.pop(),0==e.length){const l=t.substring(n,a);wte.test(l)?i.push(hLe(l)):i.push(l),n=a+1}}else{if(0==e.length){const l=t.substring(n,a);i.push(l),n=a+1}e.push("{")}}const o=t.substring(n);return i.push(o),i}function pLe(t,n,e,i,s,r,o,a,l){const c=[],u=[],d=[];e.cases.push(o),e.create.push(c),e.remove.push(u),e.update.push(d);const p=eQ(ym()).getInertBodyElement(a),f=L$(p)||p;return f?Tte(t,n,e,i,s,c,u,d,f,r,l,0):0}function Tte(t,n,e,i,s,r,o,a,l,c,u,d){let h=0,p=l.firstChild;for(;p;){const f=jS(n,i,1,null);switch(p.nodeType){case Node.ELEMENT_NODE:const g=p,v=g.tagName.toLowerCase();if(R$.hasOwnProperty(v)){t5(r,yA,v,c,f),n.data[f]=v;const T=g.attributes;for(let R=0;R<T.length;R++){const N=T.item(R),D=N.name.toLowerCase();N.value.match(CA)?sQ.hasOwnProperty(D)&&bx(a,N.value,f,N.name,0,F$[D]?$D:null):gLe(r,f,N)}const k={kind:1,index:f,children:[]};t.push(k),h=Tte(k.children,n,e,i,s,r,o,a,p,f,u,d+1)|h,Ite(o,f,d)}break;case Node.TEXT_NODE:const y=p.textContent||"",w=y.match(CA);t5(r,null,w?"":y,c,f),Ite(o,f,d),w&&(h=bx(a,y,f,null,0,null)|h),t.push({kind:0,index:f});break;case Node.COMMENT_NODE:const x=nLe.exec(p.textContent||"");if(x){const k=u[parseInt(x[1],10)];t5(r,wA,"",c,f),Ete(t,n,i,s,c,k,f),fLe(o,f,d)}}p=p.nextSibling}return h}function Ite(t,n,e){0===e&&t.push(n)}function fLe(t,n,e){0===e&&(t.push(~n),t.push(n))}function t5(t,n,e,i,s){null!==n&&t.push(n),t.push(e,s,function $Ne(t,n,e){return t|n<<17|e<<1}(0,i,s))}function gLe(t,n,e){t.push(n<<1|1,e.name,e.value)}const bLe=/\[(\ufffd.+?\ufffd?)\]/,vLe=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,yLe=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,wLe=/{([A-Z0-9_]+)}/g,CLe=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,SLe=/\/\*/,xLe=/\d+\:(\d+)/;function Pi(t,n,e=-1){const i=Fi(),s=Ue(),r=gn+t,o=Du(i.consts,n),a=ES();i.firstCreatePass&&function aLe(t,n,e,i,s,r){const o=ES(),a=[],l=[],c=[[]],u=[[]];s=function dLe(t,n){if(function dJ(t){return-1===t}(n))return xte(t);{const e=t.indexOf(`:${n}${gx}`)+2+n.toString().length,i=t.search(new RegExp(`${gx}\\/\\*\\d+:${n}${gx}`));return xte(t.substring(e,i))}}(s,r);const d=function oLe(t){return t.replace(rLe," ")}(s).split(sLe);for(let h=0;h<d.length;h++){let p=d[h];if(1&h){const f=47===p.charCodeAt(0),g=p.charCodeAt(f?1:0),v=gn+Number.parseInt(p.substring(f?2:1));if(f)c.shift(),u.shift(),Rd(ES(),!1);else{const y=PNe(t,c[0],v);c.unshift([]),Rd(y,!0);const w={kind:2,index:v,children:[],type:35===g?0:1};u[0].push(w),u.unshift(w.children)}}else{const f=e5(p);for(let g=0;g<f.length;g++){let v=f[g];if(1&g){const y=v;if("object"!=typeof y)throw new Error(`Unable to parse ICU expression in "${s}" message.`);const x=Cte(t,o,c[0],e,a,"",!0).index;Ete(u[0],t,e,l,n,y,x)}else""!==v&&lLe(u[0],t,o,c[0],a,l,e,v)}}}t.data[i]={create:a,update:l,ast:u[0],parentTNodeIndex:n}}(i,null===a?0:a.index,s,r,o,e),2===i.type?s[Br][On]|=32:s[On]|=32;const l=i.data[r],u=CQ(i,a===s[Ha]?null:a,s),d=a&&8&a.type?s[a.index]:null;(function XNe(t,n,e,i){gJ(t,n,e,i)})(s,r,a,e),function QFe(t,n,e,i){const s=t[ei];for(let r=0;r<n.length;r++){const o=n[r++],c=(o&ac.APPEND_EAGERLY)===ac.APPEND_EAGERLY,u=o>>>ac.SHIFT;let d=t[u],h=!1;null===d&&(d=t[u]=_x(t,u,n[r],(o&ac.COMMENT)===ac.COMMENT?Node.COMMENT_NODE:Node.TEXT_NODE),h=TS()),c&&null!==e&&h&&Hg(s,e,d,i,!1)}}(s,l.create,u,d),$Y(!0)}function $i(){$Y(!1)}function oe(t,n,e){Pi(t,n,e),$i()}function Vn(t){return function KFe(t){t&&(fx|=1<<Math.min(mx,31)),mx++}(So(Ue(),Fd(),t)),Vn}function Gn(t){!function XFe(t,n,e){if(mx>0){const i=t.data[e];gte(t,n,Array.isArray(i)?i:i.update,Qp()-mx-1,fx)}fx=0,mx=0}(Fi(),Ue(),t+gn)}function nb(t,n={}){return function ELe(t,n={}){let e=t;if(bLe.test(t)){const i={},s=[0];e=e.replace(vLe,(r,o,a)=>{const l=o||a,c=i[l]||[];if(c.length||(l.split("|").forEach(g=>{const v=g.match(xLe),y=v?parseInt(v[1],10):0,w=SLe.test(g);c.push([y,w,g])}),i[l]=c),!c.length)throw new Error(`i18n postprocess: unmatched placeholder - ${l}`);const u=s[s.length-1];let d=0;for(let g=0;g<c.length;g++)if(c[g][0]===u){d=g;break}const[h,p,f]=c[d];return p?s.pop():u!==h&&s.push(h),c.splice(d,1),f})}return Object.keys(n).length&&(e=e.replace(yLe,(i,s,r,o,a,l)=>n.hasOwnProperty(r)?`${s}${n[r]}${l}`:i),e=e.replace(wLe,(i,s)=>n.hasOwnProperty(s)?n[s]:i),e=e.replace(CLe,(i,s)=>{if(n.hasOwnProperty(s)){const r=n[s];if(!r.length)throw new Error(`i18n postprocess: unmatched ICU - ${i} with key: ${s}`);return r.shift()}return i})),e}(t,n)}let Dte=(t,n,e)=>{};function P(t,n,e,i){const s=Ue(),r=Fi(),o=Ks();return n5(r,s,s[ei],o,t,n,i),P}function vx(t,n){const e=Ks(),i=Ue(),s=Fi();return n5(s,i,qQ(Z4(s.data),e,i),e,t,n),vx}function n5(t,n,e,i,s,r,o){const a=dD(i),c=t.firstCreatePass&&WQ(t),u=n[Cr],d=HQ(n);let h=!0;if(3&i.type||o){const g=Il(i,n),v=o?o(g):g,y=d.length,w=o?T=>o(ws(T[i.index])):i.index;let x=null;if(!o&&a&&(x=function ILe(t,n,e,i){const s=t.cleanup;if(null!=s)for(let r=0;r<s.length-1;r+=2){const o=s[r];if(o===e&&s[r+1]===i){const a=n[Ky],l=s[r+2];return a.length>l?a[l]:null}"string"==typeof o&&(r+=2)}return null}(t,n,s,i.index)),null!==x)(x.__ngLastListenerFn__||x).__ngNextListenerFn__=r,x.__ngLastListenerFn__=r,h=!1;else{r=Nte(i,n,u,r),Dte(g,s,r);const T=e.listen(v,s,r);d.push(r,T),c&&c.push(s,w,y,y+1)}}else r=Nte(i,n,u,r);const p=i.outputs;let f;if(h&&null!==p&&(f=p[s])){const g=f.length;if(g)for(let v=0;v<g;v+=2){const k=n[f[v]][f[v+1]].subscribe(r),R=d.length;d.push(r,k),c&&c.push(s,i.index,R,-(R+1))}}}function Mte(t,n,e,i){const s=Je(null);try{return Nh(6,n,e),!1!==e(i)}catch(r){return KD(t,r),!1}finally{Nh(7,n,e),Je(s)}}function Nte(t,n,e,i){return function s(r){if(r===Function)return i;WS(t.componentOffset>-1?zc(t.index,n):n,5);let a=Mte(n,e,i,r),l=s.__ngNextListenerFn__;for(;l;)a=Mte(n,e,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function E(t=1){return function wDe(t){return(ti.lFrame.contextLView=function DY(t,n){for(;t>0;)n=n[Xy],t--;return n}(t,ti.lFrame.contextLView))[Cr]}(t)}function kLe(t,n){let e=null;const i=function xke(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(!(1&e))return n[e+1]}return null}(t);for(let s=0;s<n.length;s++){const r=n[s];if("*"!==r){if(null===i?sY(t,r,!0):Ike(i,r))return s}else e=s}return e}function Si(t){const n=Ue()[Br][Ha];if(!n.projection){const i=n.projection=function eD(t,n){const e=[];for(let i=0;i<t;i++)e.push(n);return e}(t?t.length:1,null),s=i.slice();let r=n.child;for(;null!==r;){if(128!==r.type){const o=t?kLe(r,t):0;null!==o&&(s[o]?s[o].projectionNext=r:i[o]=r,s[o]=r)}r=r.next}}}function en(t,n=0,e,i,s,r){const o=Ue(),a=Fi(),l=i?t+1:null;null!==l&&ax(o,a,l,i,s,r,null,e);const c=qg(a,gn+t,16,null,e||null);null===c.projection&&(c.projection=n),X4();const d=!o[Tl]||$g();null===o[Br][Ha].projection[c.projection]&&null!==l?function DLe(t,n,e){const i=gn+e,s=n.data[i],r=t[i],o=Yg(r,s.tView.ssrId);d1(r,u1(t,s,void 0,{dehydratedView:o}),0,Kg(s,o))}(o,a,l):d&&32&~c.flags&&function OMe(t,n,e){MQ(n[ei],0,n,e,H$(t,e,n),EQ(e.parent||n[Ha],e,n))}(a,o,c)}function Bi(t,n,e,i){VJ(t,n,e,i)}function Gt(t,n,e){!function BJ(t,n,e){const i=Fi();return i.firstCreatePass&&(zJ(i,new LJ(t,n,e),-1),!(2&~n)&&(i.staticViewQueries=!0)),$J(i,Ue(),n)}(t,n,e)}function nt(t){const n=Ue(),e=Fi(),i=Q4();_D(i+1);const s=A8(e,i);if(t.dirty&&function aDe(t){return!(4&~t[On])}(n)===!(2&~s.metadata.flags)){if(null===s.matches)t.reset([]);else{const r=UJ(n,i);t.reset(r,vZ),t.notifyOnChanges()}return!0}return!1}function it(){return D8(Ue(),Q4())}function Ute(t,n,e,i,s){!function XJ(t,n){const e=t[rt];e._lView=Ue(),e._queryIndex=n,e._queryList=D8(e._lView,n),e._queryList.onDirty(()=>e._dirtyCounter.update(i=>i+1))}(n,VJ(t,e,i,s))}function xt(t){return Pg(function OY(){return ti.lFrame.contextLView}(),gn+t)}function S(t,n=""){const e=Ue(),i=Fi(),s=t+gn,r=i.firstCreatePass?qg(i,s,1,n,null):i.data[s],o=Jte(i,e,r,n,t);e[s]=o,TS()&&jD(i,e,o,r),Rd(r,!1)}let Jte=(t,n,e,i,s)=>(Oh(!0),z$(n[ei],i));function Ye(t){return K("",t,""),Ye}function K(t,n,e){const i=Ue(),s=E1(i,t,n,e);return s!==hi&&nf(i,Wa(),s),K}function Os(t,n,e,i,s){const r=Ue(),o=function T1(t,n,e,i,s,r){const a=Qg(t,Qp(),e,s);return Jp(2),a?n+di(e)+i+di(s)+r:hi}(r,t,n,e,i,s);return o!==hi&&nf(r,Wa(),o),Os}function ib(t,n,e,i,s,r,o){const a=Ue(),l=function I1(t,n,e,i,s,r,o,a){const c=uA(t,Qp(),e,s,o);return Jp(3),c?n+di(e)+i+di(s)+r+di(o)+a:hi}(a,t,n,e,i,s,r,o);return l!==hi&&nf(a,Wa(),l),ib}function ni(t,n,e){HJ(n)&&(n=n());const i=Ue();return So(i,Fd(),n)&&oc(Fi(),Sr(),i,t,n,i[ei],e,!1),ni}function jn(t,n){const e=HJ(t);return e&&t.set(n),e}function ii(t,n){const e=Ue(),i=Fi(),s=Ks();return n5(i,e,e[ei],s,t,n),ii}function r5(t,n,e,i,s){if(t=Xn(t),Array.isArray(t))for(let r=0;r<t.length;r++)r5(t[r],n,e,i,s);else{const r=Fi(),o=Ue(),a=Ks();let l=Rg(t)?t:Xn(t.provide);const c=hY(t),u=1048575&a.providerIndexes,d=a.directiveStart,h=a.providerIndexes>>20;if(Rg(t)||!t.multi){const p=new IS(c,s,I),f=a5(l,n,s?u:u+h,d);-1===f?(a$(wD(a,o),r,l),o5(r,t,n.length),n.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),e.push(p),o.push(p)):(e[f]=p,o[f]=p)}else{const p=a5(l,n,u+h,d),f=a5(l,n,u,u+h),v=f>=0&&e[f];if(s&&!v||!s&&!(p>=0&&e[p])){a$(wD(a,o),r,l);const y=function qLe(t,n,e,i,s){const r=new IS(t,e,I);return r.multi=[],r.index=n,r.componentProviders=0,lne(r,s,i&&!e),r}(s?WLe:HLe,e.length,s,i,c);!s&&v&&(e[f].providerFactory=y),o5(r,t,n.length,0),n.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),e.push(y),o.push(y)}else o5(r,t,p>-1?p:f,lne(e[s?f:p],c,!s&&i));!s&&i&&v&&e[f].componentProviders++}}}function o5(t,n,e,i){const s=Rg(n),r=function Pke(t){return!!t.useClass}(n);if(s||r){const l=(r?Xn(n.useClass):n).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!s&&n.multi){const u=c.indexOf(e);-1===u?c.push(e,[i,l]):c[u+1].push(i,l)}else c.push(e,l)}}}function lne(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function a5(t,n,e,i){for(let s=e;s<i;s++)if(n[s]===t)return s;return-1}function HLe(t,n,e,i){return l5(this.multi,[])}function WLe(t,n,e,i){const s=this.multi;let r;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=zg(e,e[yt],this.providerFactory.index,i);r=a.slice(0,o),l5(s,r);for(let l=o;l<a.length;l++)r.push(a[l])}else r=[],l5(s,r);return r}function l5(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function bt(t,n=[]){return e=>{e.providersResolver=(i,s)=>function jLe(t,n,e){const i=Fi();if(i.firstCreatePass){const s=Od(t);r5(e,i.data,i.blueprint,s,!0),r5(n,i.data,i.blueprint,s,!1)}}(i,s?s(t):t,n)}}let KLe=(()=>{class t{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const i=D4(0,e.type),s=i.length>0?lA([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,s)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Pe({token:t,providedIn:"environment",factory:()=>new t(ae(ul))})}return t})();function Ln(t){Dl("NgStandalone"),t.getStandaloneInjector=n=>n.get(KLe).getOrCreateStandaloneInjector(t)}function Ts(t,n,e){const i=t.\u0275cmp;i.directiveDefs=iD(n,!1),i.pipeDefs=iD(e,!0)}function tn(t,n,e){const i=kl()+t,s=Ue();return s[i]===hi?Ph(s,i,e?n.call(e):n()):function ox(t,n){return t[n]}(s,i)}function yx(t,n){const e=t[n];return e===hi?void 0:e}function fne(t,n,e,i,s,r){const o=n+e;return So(t,o,s)?Ph(t,o+1,r?i.call(r,s):i(s)):yx(t,o+1)}function mne(t,n,e,i,s,r,o){const a=n+e;return Qg(t,a,s,r)?Ph(t,a+2,o?i.call(o,s,r):i(s,r)):yx(t,a+2)}function _ne(t,n,e,i,s,r,o,a){const l=n+e;return uA(t,l,s,r,o)?Ph(t,l+3,a?i.call(a,s,r,o):i(s,r,o)):yx(t,l+3)}function H(t,n){const e=Fi();let i;const s=t+gn;e.firstCreatePass?(i=function t3e(t,n){if(n)for(let e=n.length-1;e>=0;e--){const i=n[e];if(t===i.name)return i}}(n,e.pipeRegistry),e.data[s]=i,i.onDestroy&&(e.destroyHooks??=[]).push(s,i.onDestroy)):i=e.data[s];const r=i.factory||(i.factory=Og(i.type)),a=nc(I);try{const l=yD(!1),c=r();return yD(l),function s5(t,n,e,i){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=i}(e,Ue(),s,c),c}finally{nc(a)}}function ne(t,n,e){const i=t+gn,s=Ue(),r=Pg(s,i);return wx(s,i)?fne(s,kl(),n,r.transform,e,r):r.transform(e)}function At(t,n,e,i){const s=t+gn,r=Ue(),o=Pg(r,s);return wx(r,s)?mne(r,kl(),n,o.transform,e,i,o):o.transform(e,i)}function zd(t,n,e,i,s){const r=t+gn,o=Ue(),a=Pg(o,r);return wx(o,r)?_ne(o,kl(),n,a.transform,e,i,s,a):a.transform(e,i,s)}function wx(t,n){return t[yt].data[n].pure}function ln(t,n){return YD(t,n)}class sb{constructor(n){this.full=n;const e=n.split(".");this.major=e[0],this.minor=e[1],this.patch=e.slice(2).join(".")}}const f5=new sb("18.2.3");let Rne=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Bne=new Ne(""),kA=new Ne("");let b5,_5=(()=>{class t{constructor(e,i,s){this._ngZone=e,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,b5||(function Y3e(t){b5=t}(s),s.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Lt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,s){let r=-1;i&&i>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==r),e()},i)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:s})}whenStable(e,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,s),this._runCallbacksIfReady()}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,s){return[]}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Lt),ae(g5),ae(kA))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})(),g5=(()=>{class t{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return b5?.findTestabilityInTree(this,e,i)??null}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function xx(t){return!!t&&"function"==typeof t.then}function Vne(t){return!!t&&"function"==typeof t.subscribe}const Ex=new Ne("");let zne=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=xe(Ex,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const s of this.appInits){const r=s();if(xx(r))e.push(r);else if(Vne(r)){const o=new Promise((a,l)=>{r.subscribe({complete:a,error:l})});e.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(s=>{this.reject(s)}),0===e.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const DA=new Ne("");function Gne(t,n){return Array.isArray(n)?n.reduce(Gne,t):{...t,...n}}let qc=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=xe(nAe),this.afterRenderManager=xe(gee),this.zonelessEnabled=xe(tx),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ot,this.afterTick=new ot,this.componentTypes=[],this.components=[],this.isStable=xe(ef).hasPendingTasks.pipe(me(e=>!e)),this._injector=xe(ul)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:s=>{s&&i()}})}).finally(()=>{e.unsubscribe()})}get injector(){return this._injector}bootstrap(e,i){const s=e instanceof xJ;if(!this._injector.get(zne).done)throw!s&&function _m(t){const n=Gi(t)||oa(t)||ja(t);return null!==n&&n.standalone}(e),new Fe(405,!1);let o;o=s?e:this._injector.get(f1).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const a=function Z3e(t){return t.isBoundToModule}(o)?void 0:this._injector.get(Zg),c=o.create(ci.NULL,[],i||o.selector,a),u=c.location.nativeElement,d=c.injector.get(Bne,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),AA(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Fe(101,!1);const e=Je(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,Je(e),this.afterTick.next()}}synchronize(){let e=null;this._injector.destroyed||(e=this._injector.get(nA,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;0!==this.dirtyFlags&&i++<10;)this.synchronizeOnce(e)}synchronizeOnce(e){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,7&this.dirtyFlags){const i=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:r}of this._views)ePe(s,r,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),7&this.dirtyFlags)return}else e?.begin?.(),e?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:e})=>hD(e))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;AA(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const i=this._injector.get(DA,[]);[...this._bootstrapListeners,...i].forEach(s=>s(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>AA(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Fe(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function AA(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function ePe(t,n,e,i){(e||hD(t))&&XD(t,n,e&&!i?0:1)}class tPe{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let Hne=(()=>{class t{compileModuleSync(e){return new O8(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),r=jc(cl(e).declarations).reduce((o,a)=>{const l=Gi(a);return l&&o.push(new sx(l)),o},[]);return new tPe(i,r)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),sPe=(()=>{class t{constructor(){this.zone=xe(Lt),this.changeDetectionScheduler=xe(p1),this.applicationRef=xe(qc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function v5({ngZoneFactory:t,ignoreChangesOutsideZone:n,scheduleInRootZone:e}){return t??=()=>new Lt({...y5(),scheduleInRootZone:e}),[{provide:Lt,useFactory:t},{provide:Dd,multi:!0,useFactory:()=>{const i=xe(sPe,{optional:!0});return()=>i.initialize()}},{provide:Dd,multi:!0,useFactory:()=>{const i=xe(oPe);return()=>{i.initialize()}}},!0===n?{provide:SJ,useValue:!0}:[],{provide:v8,useValue:e??hZ}]}function y5(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}let oPe=(()=>{class t{constructor(){this.subscription=new rn,this.initialized=!1,this.zone=xe(Lt),this.pendingTasks=xe(ef)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Lt.assertNotInAngularZone(),queueMicrotask(()=>{null!==e&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Lt.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Tx=(()=>{class t{constructor(){this.appRef=xe(qc),this.taskService=xe(ef),this.ngZone=xe(Lt),this.zonelessEnabled=xe(tx),this.disableScheduling=xe(SJ,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new rn,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(TD):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(xe(v8,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof f$||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&5===e)return;switch(e){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 7:this.appRef.deferredDirtyFlags|=8;break;default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;const i=this.useMicrotaskScheduler?fZ:pZ;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>i(()=>this.tick())):this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(TD+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(e),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,fZ(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const sf=new Ne("",{providedIn:"root",factory:()=>xe(sf,qi.Optional|qi.SkipSelf)||function aPe(){return typeof $localize<"u"&&$localize.locale||vA}()}),lPe=new Ne("",{providedIn:"root",factory:()=>"USD"}),C5=new Ne("");function NA(t){return!!t.platformInjector}let Zne=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const s=i?.scheduleInRootZone,o=i?.ignoreChangesOutsideZone,a=[v5({ngZoneFactory:()=>function tAe(t="zone.js",n){return"noop"===t?new f$:"zone.js"===t?new Lt(n):t}(i?.ngZone,{...y5({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}),scheduleInRootZone:s}),ignoreChangesOutsideZone:o}),{provide:p1,useExisting:Tx}],l=function uRe(t,n,e){return new N8(t,n,e,!1)}(e.moduleType,this.injector,a);return function Yne(t){const n=NA(t)?t.r3Injector:t.moduleRef.injector,e=n.get(Lt);return e.run(()=>{NA(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();const i=n.get(Ld,null);let s;if(e.runOutsideAngular(()=>{s=e.onError.subscribe({next:r=>{i.handleError(r)}})}),NA(t)){const r=()=>n.destroy(),o=t.platformInjector.get(C5);o.add(r),n.onDestroy(()=>{s.unsubscribe(),o.delete(r)})}else t.moduleRef.onDestroy(()=>{AA(t.allPlatformModules,t.moduleRef),s.unsubscribe()});return function J3e(t,n,e){try{const i=e();return xx(i)?i.catch(s=>{throw n.runOutsideAngular(()=>t.handleError(s)),s}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}(i,e,()=>{const r=n.get(zne);return r.runInitializers(),r.donePromise.then(()=>{if(function WFe(t){"string"==typeof t&&(fte=t.toLowerCase().replace(/_/g,"-"))}(n.get(sf,vA)||vA),NA(t)){const a=n.get(qc);return void 0!==t.rootComponent&&a.bootstrap(t.rootComponent),a}return function pPe(t,n){const e=t.injector.get(qc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>e.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new Fe(-403,!1);t.instance.ngDoBootstrap(e)}n.push(t)}(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}({moduleRef:l,allPlatformModules:this._modules})}bootstrapModule(e,i=[]){const s=Gne({},i);return function iPe(t,n,e){const i=new O8(e);return Promise.resolve(i)}(0,0,e).then(r=>this.bootstrapModuleFactory(r,s))}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Fe(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const e=this._injector.get(C5,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||t)(ae(ci))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Im=null;const Qne=new Ne("");function Jne(t,n,e=[]){const i=`Platform: ${n}`,s=new Ne(i);return(r=[])=>{let o=S5();if(!o||o.injector.get(Qne,!1)){const a=[...e,...r,{provide:s,useValue:!0}];t?t(a):function fPe(t){if(Im&&!Im.get(Qne,!1))throw new Fe(400,!1);(function Une(){!function Vp(t){Bp=t}(()=>{throw new Fe(600,!1)})})(),Im=t;const n=t.get(Zne);(function tie(t){t.get(BZ,null)?.forEach(e=>e())})(t)}(function eie(t=[],n){return ci.create({name:n,providers:[{provide:N4,useValue:"platform"},{provide:C5,useValue:new Set([()=>Im=null])},...t]})}(a,i))}return function mPe(){const n=S5();if(!n)throw new Fe(401,!1);return n}()}}function S5(){return Im?.get(Zne)??null}let wi=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=gPe}return t})();function gPe(t){return function bPe(t,n,e){if(Lg(t)&&!e){const i=zc(t.index,n);return new qS(i,i)}return 175&t.type?new qS(n[Br],n):null}(Ks(),Ue(),!(16&~t))}class oie{constructor(){}supports(n){return cA(n)}create(n){return new SPe(n)}}const CPe=(t,n)=>n;class SPe{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||CPe}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,s=0,r=null;for(;e||i;){const o=!i||e&&e.currentIndex<lie(i,s,r)?e:i,a=lie(o,s,r),l=o.currentIndex;if(o===i)s--,i=i._nextRemoved;else if(e=e._next,null==o.previousIndex)s++;else{r||(r=[]);const c=a-s,u=l-s;if(c!=u){for(let h=0;h<c;h++){const p=h<r.length?r[h]:r[h]=0,f=p+h;u<=f&&f<c&&(r[h]=p+1)}r[o.previousIndex]=u-c}}a!==l&&n(o,a,l)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!cA(n))throw new Fe(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let s,r,o,e=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let a=0;a<this.length;a++)r=n[a],o=this._trackByFn(a,r),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,r,o,a)),Object.is(e.item,r)||this._addIdentityChange(e,r)):(e=this._mismatch(e,r,o,a),i=!0),e=e._next}else s=0,function pRe(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[Symbol.iterator]();let i;for(;!(i=e.next()).done;)n(i.value)}}(n,a=>{o=this._trackByFn(s,a),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,a,o,s)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,s),i=!0),e=e._next,s++}),this.length=s;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,s){let r;return null===n?r=this._itTail:(r=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,r,s)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,s))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,r,s)):n=this._addAfter(new xPe(e,i),r,s),n}_verifyReinsertion(n,e,i,s){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==r?n=this._reinsertAfter(r,n._prev,s):n.currentIndex!=s&&(n.currentIndex=s,this._addToMoves(n,s)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const s=n._prevRemoved,r=n._nextRemoved;return null===s?this._removalsHead=r:s._nextRemoved=r,null===r?this._removalsTail=s:r._prevRemoved=s,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){const s=null===e?this._itHead:e._next;return n._next=s,n._prev=e,null===s?this._itTail=n:s._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new aie),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,i=n._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new aie),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class xPe{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class EPe{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const e=n._prevDup,i=n._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class aie{constructor(){this.map=new Map}put(n){const e=n.trackById;let i=this.map.get(e);i||(i=new EPe,this.map.set(e,i)),i.add(n)}get(n,e){const s=this.map.get(n);return s?s.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lie(t,n,e){const i=t.previousIndex;if(null===i)return i;let s=0;return e&&i<e.length&&(s=e[i]),i+n+s}function uie(){return new rf([new oie])}let rf=(()=>{class t{static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:uie});constructor(e){this.factories=e}static create(e,i){if(null!=i){const s=i.factories.slice();e=e.concat(s)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||uie()),deps:[[t,new Xp,new Ih]]}}find(e){const i=this.factories.find(s=>s.supports(e));if(null!=i)return i;throw new Fe(901,!1)}}return t})();const APe=Jne(null,"core",[]);let MPe=(()=>{class t{constructor(e){}static#e=this.\u0275fac=function(i){return new(i||t)(ae(qc))};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({})}return t})();const Iie=new Ne("");function ft(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function Xr(t,n=NaN){return isNaN(parseFloat(t))||isNaN(Number(t))?n:Number(t)}function ob(t,n){Dl("NgSignals");const e=by(t);return n?.equal&&(e[rt].equal=n.equal),e}function Ud(t){const n=Je(null);try{return t()}finally{Je(n)}}const c4e=new Ne("",{providedIn:"root",factory:()=>xe(u4e)});let u4e=(()=>{class t{static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>new d4e})}return t})();class d4e{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=xe(ef),this.taskId=null}scheduleEffect(n){if(this.enqueue(n),null===this.taskId){const e=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(e),this.taskId=null})}}enqueue(n){const e=n.creationZone;this.queues.has(e)||this.queues.set(e,new Set);const i=this.queues.get(e);i.has(n)||(this.queuedEffectCount++,i.add(n))}flush(){for(;this.queuedEffectCount>0;)for(const[n,e]of this.queues)null===n?this.flushQueue(e):n.run(()=>this.flushQueue(e))}flushQueue(n){for(const e of n)n.delete(e),this.queuedEffectCount--,e.run()}}class h4e{constructor(n,e,i,s,r,o){this.scheduler=n,this.effectFn=e,this.creationZone=i,this.injector=r,this.watcher=function rm(t,n,e){const i=Object.create(Rc);e&&(i.consumerAllowSignalWrites=!0),i.fn=t,i.schedule=n;const s=l=>{i.cleanupFn=l};return i.ref={notify:()=>yi(i),run:()=>{if(null===i.fn)return;if(function Ct(){return qe}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(i.dirty=!1,i.hasRun&&!hs(i))return;i.hasRun=!0;const l=rs(i);try{i.cleanupFn(),i.cleanupFn=Cd,i.fn(s)}finally{os(i,l)}},cleanup:()=>i.cleanupFn(),destroy:()=>function o(l){(function r(l){return null===l.fn&&null===l.schedule})(l)||(vs(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=Cd)}(i),[rt]:i},i.ref}(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}runEffect(n){try{this.effectFn(n)}catch(e){this.injector.get(Ld,null,{optional:!0})?.handleError(e)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}let $ie=null;function km(){return $ie}class m4e{}const Yn=new Ne("");let M5=(()=>{class t{historyGo(e){throw new Error("")}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:()=>xe(g4e),providedIn:"platform"})}return t})();const _4e=new Ne("");let g4e=(()=>{class t extends M5{constructor(){super(),this._doc=xe(Yn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return km().getBaseHref(this._doc)}onPopState(e){const i=km().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=km().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,s){this._history.pushState(e,i,s)}replaceState(e,i,s){this._history.replaceState(e,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function N5(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function Bie(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function af(t){return t&&"?"!==t[0]?"?"+t:t}let ab=(()=>{class t{historyGo(e){throw new Error("")}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:()=>xe(zie),providedIn:"root"})}return t})();const Vie=new Ne("");let zie=(()=>{class t extends ab{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??xe(Yn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return N5(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+af(this._platformLocation.search),s=this._platformLocation.hash;return s&&e?`${i}${s}`:i}pushState(e,i,s,r){const o=this.prepareExternalUrl(s+af(r));this._platformLocation.pushState(e,i,o)}replaceState(e,i,s,r){const o=this.prepareExternalUrl(s+af(r));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||t)(ae(M5),ae(Vie,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),b4e=(()=>{class t extends ab{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){const i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=N5(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,s,r){let o=this.prepareExternalUrl(s+af(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,i,o)}replaceState(e,i,s,r){let o=this.prepareExternalUrl(s+af(r));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||t)(ae(M5),ae(Vie,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})(),lb=(()=>{class t{constructor(e){this._subject=new Ae,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function w4e(t){if(new RegExp("^(https?:)?//").test(t)){const[,e]=t.split(/\/\/[^\/]+/);return e}return t}(Bie(Uie(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+af(i))}normalize(e){return t.stripTrailingSlash(function y4e(t,n){if(!t||!n.startsWith(t))return n;const e=n.substring(t.length);return""===e||["/",";","?","#"].includes(e[0])?e:n}(this._basePath,Uie(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",s=null){this._locationStrategy.pushState(s,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+af(i)),s)}replaceState(e,i="",s=null){this._locationStrategy.replaceState(s,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+af(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(s=>s(e,i))}subscribe(e,i,s){return this._subject.subscribe({next:e,error:i,complete:s})}static#e=this.normalizeQueryParams=af;static#t=this.joinWithSlash=N5;static#n=this.stripTrailingSlash=Bie;static#i=this.\u0275fac=function(i){return new(i||t)(ae(ab))};static#s=this.\u0275prov=Pe({token:t,factory:()=>function v4e(){return new lb(ae(ab))}(),providedIn:"root"})}return t})();function Uie(t){return t.replace(/\/index.html$/,"")}const Gie={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var UA=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(UA||{}),Nl=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Nl||{}),pr=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(pr||{}),Kc=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Kc||{});const Bo={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function GA(t,n){return Fu(Al(t)[xr.DateFormat],n)}function jA(t,n){return Fu(Al(t)[xr.TimeFormat],n)}function HA(t,n){return Fu(Al(t)[xr.DateTimeFormat],n)}function Ru(t,n){const e=Al(t),i=e[xr.NumberSymbols][n];if(typeof i>"u"){if(n===Bo.CurrencyDecimal)return e[xr.NumberSymbols][Bo.Decimal];if(n===Bo.CurrencyGroup)return e[xr.NumberSymbols][Bo.Group]}return i}function jie(t){if(!t[xr.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[xr.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Fu(t,n){for(let e=n;e>-1;e--)if(typeof t[e]<"u")return t[e];throw new Error("Locale data API: locale data undefined")}function R5(t){const[n,e]=t.split(":");return{hours:+n,minutes:+e}}const F4e=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,WA={},L4e=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var lf=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(lf||{}),Rs=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(Rs||{}),Fs=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(Fs||{});function P4e(t,n,e,i){let s=function W4e(t){if(qie(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[s,r=1,o=1]=t.split("-").map(a=>+a);return qA(s,r-1,o)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let i;if(i=t.match(F4e))return function q4e(t){const n=new Date(0);let e=0,i=0;const s=t[8]?n.setUTCFullYear:n.setFullYear,r=t[8]?n.setUTCHours:n.setHours;t[9]&&(e=Number(t[9]+t[10]),i=Number(t[9]+t[11])),s.call(n,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-e,a=Number(t[5]||0)-i,l=Number(t[6]||0),c=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return r.call(n,o,a,l,c),n}(i)}const n=new Date(t);if(!qie(n))throw new Error(`Unable to convert "${t}" into a date`);return n}(t);n=cf(e,n)||n;let a,o=[];for(;n;){if(a=L4e.exec(n),!a){o.push(n);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;n=u}}let l=s.getTimezoneOffset();i&&(l=Wie(i,l),s=function H4e(t,n,e){const i=e?-1:1,s=t.getTimezoneOffset();return function j4e(t,n){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+n),t}(t,i*(Wie(n,s)-s))}(s,i,!0));let c="";return o.forEach(u=>{const d=function G4e(t){if(L5[t])return L5[t];let n;switch(t){case"G":case"GG":case"GGG":n=Er(Fs.Eras,pr.Abbreviated);break;case"GGGG":n=Er(Fs.Eras,pr.Wide);break;case"GGGGG":n=Er(Fs.Eras,pr.Narrow);break;case"y":n=Vo(Rs.FullYear,1,0,!1,!0);break;case"yy":n=Vo(Rs.FullYear,2,0,!0,!0);break;case"yyy":n=Vo(Rs.FullYear,3,0,!1,!0);break;case"yyyy":n=Vo(Rs.FullYear,4,0,!1,!0);break;case"Y":n=ZA(1);break;case"YY":n=ZA(2,!0);break;case"YYY":n=ZA(3);break;case"YYYY":n=ZA(4);break;case"M":case"L":n=Vo(Rs.Month,1,1);break;case"MM":case"LL":n=Vo(Rs.Month,2,1);break;case"MMM":n=Er(Fs.Months,pr.Abbreviated);break;case"MMMM":n=Er(Fs.Months,pr.Wide);break;case"MMMMM":n=Er(Fs.Months,pr.Narrow);break;case"LLL":n=Er(Fs.Months,pr.Abbreviated,Nl.Standalone);break;case"LLLL":n=Er(Fs.Months,pr.Wide,Nl.Standalone);break;case"LLLLL":n=Er(Fs.Months,pr.Narrow,Nl.Standalone);break;case"w":n=F5(1);break;case"ww":n=F5(2);break;case"W":n=F5(1,!0);break;case"d":n=Vo(Rs.Date,1);break;case"dd":n=Vo(Rs.Date,2);break;case"c":case"cc":n=Vo(Rs.Day,1);break;case"ccc":n=Er(Fs.Days,pr.Abbreviated,Nl.Standalone);break;case"cccc":n=Er(Fs.Days,pr.Wide,Nl.Standalone);break;case"ccccc":n=Er(Fs.Days,pr.Narrow,Nl.Standalone);break;case"cccccc":n=Er(Fs.Days,pr.Short,Nl.Standalone);break;case"E":case"EE":case"EEE":n=Er(Fs.Days,pr.Abbreviated);break;case"EEEE":n=Er(Fs.Days,pr.Wide);break;case"EEEEE":n=Er(Fs.Days,pr.Narrow);break;case"EEEEEE":n=Er(Fs.Days,pr.Short);break;case"a":case"aa":case"aaa":n=Er(Fs.DayPeriods,pr.Abbreviated);break;case"aaaa":n=Er(Fs.DayPeriods,pr.Wide);break;case"aaaaa":n=Er(Fs.DayPeriods,pr.Narrow);break;case"b":case"bb":case"bbb":n=Er(Fs.DayPeriods,pr.Abbreviated,Nl.Standalone,!0);break;case"bbbb":n=Er(Fs.DayPeriods,pr.Wide,Nl.Standalone,!0);break;case"bbbbb":n=Er(Fs.DayPeriods,pr.Narrow,Nl.Standalone,!0);break;case"B":case"BB":case"BBB":n=Er(Fs.DayPeriods,pr.Abbreviated,Nl.Format,!0);break;case"BBBB":n=Er(Fs.DayPeriods,pr.Wide,Nl.Format,!0);break;case"BBBBB":n=Er(Fs.DayPeriods,pr.Narrow,Nl.Format,!0);break;case"h":n=Vo(Rs.Hours,1,-12);break;case"hh":n=Vo(Rs.Hours,2,-12);break;case"H":n=Vo(Rs.Hours,1);break;case"HH":n=Vo(Rs.Hours,2);break;case"m":n=Vo(Rs.Minutes,1);break;case"mm":n=Vo(Rs.Minutes,2);break;case"s":n=Vo(Rs.Seconds,1);break;case"ss":n=Vo(Rs.Seconds,2);break;case"S":n=Vo(Rs.FractionalSeconds,1);break;case"SS":n=Vo(Rs.FractionalSeconds,2);break;case"SSS":n=Vo(Rs.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":n=XA(lf.Short);break;case"ZZZZZ":n=XA(lf.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=XA(lf.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":n=XA(lf.Long);break;default:return null}return L5[t]=n,n}(u);c+=d?d(s,e,l):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function qA(t,n,e){const i=new Date(0);return i.setFullYear(t,n,e),i.setHours(0,0,0),i}function cf(t,n){const e=function S4e(t){return Al(t)[xr.LocaleId]}(t);if(WA[e]??={},WA[e][n])return WA[e][n];let i="";switch(n){case"shortDate":i=GA(t,Kc.Short);break;case"mediumDate":i=GA(t,Kc.Medium);break;case"longDate":i=GA(t,Kc.Long);break;case"fullDate":i=GA(t,Kc.Full);break;case"shortTime":i=jA(t,Kc.Short);break;case"mediumTime":i=jA(t,Kc.Medium);break;case"longTime":i=jA(t,Kc.Long);break;case"fullTime":i=jA(t,Kc.Full);break;case"short":const s=cf(t,"shortTime"),r=cf(t,"shortDate");i=KA(HA(t,Kc.Short),[s,r]);break;case"medium":const o=cf(t,"mediumTime"),a=cf(t,"mediumDate");i=KA(HA(t,Kc.Medium),[o,a]);break;case"long":const l=cf(t,"longTime"),c=cf(t,"longDate");i=KA(HA(t,Kc.Long),[l,c]);break;case"full":const u=cf(t,"fullTime"),d=cf(t,"fullDate");i=KA(HA(t,Kc.Full),[u,d])}return i&&(WA[e][n]=i),i}function KA(t,n){return n&&(t=t.replace(/\{([^}]+)}/g,function(e,i){return null!=n&&i in n?n[i]:e})),t}function Gd(t,n,e="-",i,s){let r="";(t<0||s&&t<=0)&&(s?t=1-t:(t=-t,r=e));let o=String(t);for(;o.length<n;)o="0"+o;return i&&(o=o.slice(o.length-n)),r+o}function Vo(t,n,e=0,i=!1,s=!1){return function(r,o){let a=function B4e(t,n){switch(t){case Rs.FullYear:return n.getFullYear();case Rs.Month:return n.getMonth();case Rs.Date:return n.getDate();case Rs.Hours:return n.getHours();case Rs.Minutes:return n.getMinutes();case Rs.Seconds:return n.getSeconds();case Rs.FractionalSeconds:return n.getMilliseconds();case Rs.Day:return n.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,r);if((e>0||a>-e)&&(a+=e),t===Rs.Hours)0===a&&-12===e&&(a=12);else if(t===Rs.FractionalSeconds)return function $4e(t,n){return Gd(t,3).substring(0,n)}(a,n);const l=Ru(o,Bo.MinusSign);return Gd(a,n,l,i,s)}}function Er(t,n,e=Nl.Format,i=!1){return function(s,r){return function V4e(t,n,e,i,s,r){switch(e){case Fs.Months:return function T4e(t,n,e){const i=Al(t),r=Fu([i[xr.MonthsFormat],i[xr.MonthsStandalone]],n);return Fu(r,e)}(n,s,i)[t.getMonth()];case Fs.Days:return function E4e(t,n,e){const i=Al(t),r=Fu([i[xr.DaysFormat],i[xr.DaysStandalone]],n);return Fu(r,e)}(n,s,i)[t.getDay()];case Fs.DayPeriods:const o=t.getHours(),a=t.getMinutes();if(r){const c=function A4e(t){const n=Al(t);return jie(n),(n[xr.ExtraData][2]||[]).map(i=>"string"==typeof i?R5(i):[R5(i[0]),R5(i[1])])}(n),u=function M4e(t,n,e){const i=Al(t);jie(i);const r=Fu([i[xr.ExtraData][0],i[xr.ExtraData][1]],n)||[];return Fu(r,e)||[]}(n,s,i),d=c.findIndex(h=>{if(Array.isArray(h)){const[p,f]=h,g=o>=p.hours&&a>=p.minutes,v=o<f.hours||o===f.hours&&a<f.minutes;if(p.hours<f.hours){if(g&&v)return!0}else if(g||v)return!0}else if(h.hours===o&&h.minutes===a)return!0;return!1});if(-1!==d)return u[d]}return function x4e(t,n,e){const i=Al(t),r=Fu([i[xr.DayPeriodsFormat],i[xr.DayPeriodsStandalone]],n);return Fu(r,e)}(n,s,i)[o<12?0:1];case Fs.Eras:return function I4e(t,n){return Fu(Al(t)[xr.Eras],n)}(n,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(s,r,t,n,e,i)}}function XA(t){return function(n,e,i){const s=-1*i,r=Ru(e,Bo.MinusSign),o=s>0?Math.floor(s/60):Math.ceil(s/60);switch(t){case lf.Short:return(s>=0?"+":"")+Gd(o,2,r)+Gd(Math.abs(s%60),2,r);case lf.ShortGMT:return"GMT"+(s>=0?"+":"")+Gd(o,1,r);case lf.Long:return"GMT"+(s>=0?"+":"")+Gd(o,2,r)+":"+Gd(Math.abs(s%60),2,r);case lf.Extended:return 0===i?"Z":(s>=0?"+":"")+Gd(o,2,r)+":"+Gd(Math.abs(s%60),2,r);default:throw new Error(`Unknown zone width "${t}"`)}}}const z4e=0,YA=4;function Hie(t){const n=t.getDay(),e=0===n?-3:YA-n;return qA(t.getFullYear(),t.getMonth(),t.getDate()+e)}function F5(t,n=!1){return function(e,i){let s;if(n){const r=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,o=e.getDate();s=1+Math.floor((o+r)/7)}else{const r=Hie(e),o=function U4e(t){const n=qA(t,z4e,1).getDay();return qA(t,0,1+(n<=YA?YA:YA+7)-n)}(r.getFullYear()),a=r.getTime()-o.getTime();s=1+Math.round(a/6048e5)}return Gd(s,t,Ru(i,Bo.MinusSign))}}function ZA(t,n=!1){return function(e,i){return Gd(Hie(e).getFullYear(),t,Ru(i,Bo.MinusSign),n)}}const L5={};function Wie(t,n){t=t.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(e)?n:e}function qie(t){return t instanceof Date&&!isNaN(t.valueOf())}const K4e=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Kie=22,QA=".",Ax="0",X4e=";",Y4e=",",P5="#";function Q4e(t,n,e,i,s){const o=function B5(t,n="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split(X4e),s=i[0],r=i[1],o=-1!==s.indexOf(QA)?s.split(QA):[s.substring(0,s.lastIndexOf(Ax)+1),s.substring(s.lastIndexOf(Ax)+1)],a=o[0],l=o[1]||"";e.posPre=a.substring(0,a.indexOf(P5));for(let u=0;u<l.length;u++){const d=l.charAt(u);d===Ax?e.minFrac=e.maxFrac=u+1:d===P5?e.maxFrac=u+1:e.posSuf+=d}const c=a.split(Y4e);if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,r){const u=s.length-e.posPre.length-e.posSuf.length,d=r.indexOf(P5);e.negPre=r.substring(0,d).replace(/'/g,""),e.negSuf=r.slice(d+u).replace(/'/g,"")}else e.negPre=n+e.posPre,e.negSuf=e.posSuf;return e}(function O5(t,n){return Al(t)[xr.NumberFormats][n]}(n,UA.Currency),Ru(n,Bo.MinusSign));return o.minFrac=function R4e(t){let n;const e=Gie[t];return e&&(n=e[2]),"number"==typeof n?n:2}(i),o.maxFrac=o.minFrac,function $5(t,n,e,i,s,r,o=!1){let a="",l=!1;if(isFinite(t)){let c=function n$e(t){let i,s,r,o,a,n=Math.abs(t)+"",e=0;for((s=n.indexOf(QA))>-1&&(n=n.replace(QA,"")),(r=n.search(/e/i))>0?(s<0&&(s=r),s+=+n.slice(r+1),n=n.substring(0,r)):s<0&&(s=n.length),r=0;n.charAt(r)===Ax;r++);if(r===(a=n.length))i=[0],s=1;else{for(a--;n.charAt(a)===Ax;)a--;for(s-=r,i=[],o=0;r<=a;r++,o++)i[o]=Number(n.charAt(r))}return s>Kie&&(i=i.splice(0,Kie-1),e=s-1,s=1),{digits:i,exponent:e,integerLen:s}}(t);o&&(c=function t$e(t){if(0===t.digits[0])return t;const n=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===n?t.digits.push(0,0):1===n&&t.digits.push(0),t.integerLen+=2),t}(c));let u=n.minInt,d=n.minFrac,h=n.maxFrac;if(r){const w=r.match(K4e);if(null===w)throw new Error(`${r} is not a valid digit info`);const x=w[1],T=w[3],k=w[5];null!=x&&(u=V5(x)),null!=T&&(d=V5(T)),null!=k?h=V5(k):null!=T&&d>h&&(h=d)}!function i$e(t,n,e){if(n>e)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${e}).`);let i=t.digits,s=i.length-t.integerLen;const r=Math.min(Math.max(n,s),e);let o=r+t.integerLen,a=i[o];if(o>0){i.splice(Math.max(t.integerLen,o));for(let d=o;d<i.length;d++)i[d]=0}else{s=Math.max(0,s),t.integerLen=1,i.length=Math.max(1,o=r+1),i[0]=0;for(let d=1;d<o;d++)i[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[o-1]++;for(;s<Math.max(0,r);s++)i.push(0);let l=0!==r;const c=n+t.integerLen,u=i.reduceRight(function(d,h,p,f){return f[p]=(h+=d)<10?h:h-10,l&&(0===f[p]&&p>=c?f.pop():l=!1),h>=10?1:0},0);u&&(i.unshift(u),t.integerLen++)}(c,d,h);let p=c.digits,f=c.integerLen;const g=c.exponent;let v=[];for(l=p.every(w=>!w);f<u;f++)p.unshift(0);for(;f<0;f++)p.unshift(0);f>0?v=p.splice(f,p.length):(v=p,p=[0]);const y=[];for(p.length>=n.lgSize&&y.unshift(p.splice(-n.lgSize,p.length).join(""));p.length>n.gSize;)y.unshift(p.splice(-n.gSize,p.length).join(""));p.length&&y.unshift(p.join("")),a=y.join(Ru(e,i)),v.length&&(a+=Ru(e,s)+v.join("")),g&&(a+=Ru(e,Bo.Exponential)+"+"+g)}else a=Ru(e,Bo.Infinity);return a=t<0&&!l?n.negPre+a+n.negSuf:n.posPre+a+n.posSuf,a}(t,o,n,Bo.CurrencyGroup,Bo.CurrencyDecimal,s).replace("\xa4",e).replace("\xa4","").trim()}function V5(t){const n=parseInt(t);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+t);return n}function Zie(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const i=e.indexOf("="),[s,r]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(s.trim()===n)return decodeURIComponent(r)}return null}const U5=/\s+/,Qie=[];let JA=(()=>{class t{constructor(e,i){this._ngEl=e,this._renderer=i,this.initialClasses=Qie,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(U5):Qie}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(U5):e}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const i of e)this._updateState(i,!0);else if(null!=e)for(const i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){const s=this.stateMap.get(e);void 0!==s?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const i=e[0],s=e[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(e,i){(e=e.trim()).length>0&&e.split(U5).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(Pd))};static#t=this.\u0275dir=He({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}return t})(),G5=(()=>{class t{constructor(e){this._viewContainerRef=e,this.ngComponentOutlet=null,this._inputsUsed=new Map}_needToReCreateNgModuleInstance(e){return void 0!==e.ngComponentOutletNgModule||void 0!==e.ngComponentOutletNgModuleFactory}_needToReCreateComponentInstance(e){return void 0!==e.ngComponentOutlet||void 0!==e.ngComponentOutletContent||void 0!==e.ngComponentOutletInjector||this._needToReCreateNgModuleInstance(e)}ngOnChanges(e){if(this._needToReCreateComponentInstance(e)&&(this._viewContainerRef.clear(),this._inputsUsed.clear(),this._componentRef=void 0,this.ngComponentOutlet)){const i=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;this._needToReCreateNgModuleInstance(e)&&(this._moduleRef?.destroy(),this._moduleRef=this.ngComponentOutletNgModule?function cRe(t,n){return new N8(t,n??null,[])}(this.ngComponentOutletNgModule,Jie(i)):this.ngComponentOutletNgModuleFactory?this.ngComponentOutletNgModuleFactory.create(Jie(i)):void 0),this._componentRef=this._viewContainerRef.createComponent(this.ngComponentOutlet,{injector:i,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent})}}ngDoCheck(){if(this._componentRef){if(this.ngComponentOutletInputs)for(const e of Object.keys(this.ngComponentOutletInputs))this._inputsUsed.set(e,!0);this._applyInputStateDiff(this._componentRef)}}ngOnDestroy(){this._moduleRef?.destroy()}_applyInputStateDiff(e){for(const[i,s]of this._inputsUsed)s?(e.setInput(i,this.ngComponentOutletInputs[i]),this._inputsUsed.set(i,!1)):(e.setInput(i,void 0),this._inputsUsed.delete(i))}static#e=this.\u0275fac=function(i){return new(i||t)(I(Kr))};static#t=this.\u0275dir=He({type:t,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInputs:"ngComponentOutletInputs",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},standalone:!0,features:[Rn]})}return t})();function Jie(t){return t.get(Zg).injector}class r$e{constructor(n,e,i,s){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let on=(()=>{class t{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,s){this._viewContainer=e,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((s,r,o)=>{if(null==s.previousIndex)i.createEmbeddedView(this._template,new r$e(s.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===r?void 0:r);else if(null!==r){const a=i.get(r);i.move(a,o),ese(a,s)}});for(let s=0,r=i.length;s<r;s++){const a=i.get(s).context;a.index=s,a.count=r,a.ngForOf=this._ngForOf}e.forEachIdentityChange(s=>{ese(i.get(s.currentIndex),s)})}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||t)(I(Kr),I(hr),I(rf))};static#t=this.\u0275dir=He({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function ese(t,n){t.context.$implicit=n.item}let mt=(()=>{class t{constructor(e,i){this._viewContainer=e,this._context=new o$e,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){tse("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){tse("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||t)(I(Kr),I(hr))};static#t=this.\u0275dir=He({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class o$e{constructor(){this.$implicit=null,this.ngIf=null}}function tse(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${ra(n)}'.`)}class j5{constructor(n,e){this._viewContainerRef=n,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(n){n&&!this._created?this.create():!n&&this._created&&this.destroy()}}let Dm=(()=>{class t{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const i=e===this._ngSwitch;return this._lastCasesMatched||=i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const i of this._defaultViews)i.enforceState(e)}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=He({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}return t})(),V1=(()=>{class t{constructor(e,i,s){this.ngSwitch=s,s._addCase(),this._view=new j5(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static#e=this.\u0275fac=function(i){return new(i||t)(I(Kr),I(hr),I(Dm,9))};static#t=this.\u0275dir=He({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}return t})(),z1=(()=>{class t{constructor(e,i,s){s._addDefault(new j5(e,i))}static#e=this.\u0275fac=function(i){return new(i||t)(I(Kr),I(hr),I(Dm,9))};static#t=this.\u0275dir=He({type:t,selectors:[["","ngSwitchDefault",""]],standalone:!0})}return t})(),cb=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(this._shouldRecreateView(e)){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const s=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,i,s)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,i,s),get:(e,i,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,s)}})}static#e=this.\u0275fac=function(i){return new(i||t)(I(Kr))};static#t=this.\u0275dir=He({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Rn]})}return t})();function jd(t,n){return new Fe(2100,!1)}class c$e{createSubscription(n,e){return Ud(()=>n.subscribe({next:e,error:i=>{throw i}}))}dispose(n){Ud(()=>n.unsubscribe())}}class u$e{createSubscription(n,e){return n.then(e,i=>{throw i})}dispose(n){}}const d$e=new u$e,h$e=new c$e;let xi=(()=>{class t{constructor(e){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(xx(e))return d$e;if(Vne(e))return h$e;throw jd()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||t)(I(wi,16))};static#t=this.\u0275pipe=nr({name:"async",type:t,pure:!1,standalone:!0})}return t})();const b$e=new Ne(""),v$e=new Ne("");let fs=(()=>{class t{constructor(e,i,s){this.locale=e,this.defaultTimezone=i,this.defaultOptions=s}transform(e,i,s,r){if(null==e||""===e||e!=e)return null;try{return P4e(e,i??this.defaultOptions?.dateFormat??"mediumDate",r||this.locale,s??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw jd()}}static#e=this.\u0275fac=function(i){return new(i||t)(I(sf,16),I(b$e,24),I(v$e,24))};static#t=this.\u0275pipe=nr({name:"date",type:t,pure:!0,standalone:!0})}return t})(),H5=(()=>{class t{constructor(e,i="USD"){this._locale=e,this._defaultCurrencyCode=i}transform(e,i=this._defaultCurrencyCode,s="symbol",r,o){if(!function W5(t){return!(null==t||""===t||t!=t)}(e))return null;o||=this._locale,"boolean"==typeof s&&(s=s?"symbol":"code");let a=i||this._defaultCurrencyCode;"code"!==s&&(a="symbol"===s||"symbol-narrow"===s?function N4e(t,n,e="en"){const i=function k4e(t){return Al(t)[xr.Currencies]}(e)[t]||Gie[t]||[],s=i[1];return"narrow"===n&&"string"==typeof s?s:i[0]||t}(a,"symbol"===s?"wide":"narrow",o):s);try{return Q4e(function q5(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}(e),o,a,i,r)}catch(l){throw jd()}}static#e=this.\u0275fac=function(i){return new(i||t)(I(sf,16),I(lPe,16))};static#t=this.\u0275pipe=nr({name:"currency",type:t,pure:!0,standalone:!0})}return t})();let U1=(()=>{class t{transform(e,i,s){if(null==e)return null;if(!this.supports(e))throw jd();return e.slice(i,s)}supports(e){return"string"==typeof e||Array.isArray(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275pipe=nr({name:"slice",type:t,pure:!1,standalone:!0})}return t})(),Ka=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({})}return t})();const sse="browser";function eM(t){return t===sse}function rse(t){return"server"===t}let D$e=(()=>{class t{static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>eM(xe(Au))?new A$e(xe(Yn),window):new N$e})}return t})();class A$e{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(n){this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){const e=function M$e(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let s=i.currentNode;for(;s;){const r=s.shadowRoot;if(r){const o=r.getElementById(n)||r.querySelector(`[name="${n}"]`);if(o)return o}s=i.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){this.window.history.scrollRestoration=n}scrollToElement(n){const e=n.getBoundingClientRect(),i=e.left+this.window.pageXOffset,s=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(i-r[0],s-r[1])}}class N$e{setOffset(n){}getScrollPosition(){return[0,0]}scrollToPosition(n){}scrollToAnchor(n){}setHistoryScrollRestoration(n){}}class ose{}class o8e extends m4e{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Z5 extends o8e{static makeCurrent(){!function f4e(t){$ie??=t}(new Z5)}onAndCancel(n,e,i){return n.addEventListener(e,i),()=>{n.removeEventListener(e,i)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.remove()}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function a8e(){return Ox=Ox||document.querySelector("base"),Ox?Ox.getAttribute("href"):null}();return null==e?null:function l8e(t){return new URL(t,document.baseURI).pathname}(e)}resetBaseElement(){Ox=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return Zie(document.cookie,n)}}let Ox=null,u8e=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const sM=new Ne("");let _se=(()=>{class t{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(s=>{s.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,s){return this._findPluginFor(i).addEventListener(e,i,s)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(r=>r.supports(e)),!i)throw new Fe(5101,!1);return this._eventNameToPlugin.set(e,i),i}static#e=this.\u0275fac=function(i){return new(i||t)(ae(sM),ae(Lt))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();class Q5{constructor(n){this._doc=n}}const J5="ng-app-id";let gse=(()=>{class t{constructor(e,i,s,r={}){this.doc=e,this.appId=i,this.nonce=s,this.platformId=r,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=rse(r),this.resetHostNodes()}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.elements?.forEach(s=>s.remove()),i.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${J5}="${this.appId}"]`);if(e?.length){const i=new Map;return e.forEach(s=>{null!=s.textContent&&i.set(s.textContent,s)}),i}return null}changeUsageCount(e,i){const s=this.styleRef;if(s.has(e)){const r=s.get(e);return r.usage+=i,r.usage}return s.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){const s=this.styleNodesInDOM,r=s?.get(i);if(r?.parentNode===e)return s.delete(i),r.removeAttribute(J5),r;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(J5,this.appId),e.appendChild(o),o}}addStyleToHost(e,i){const s=this.getStyleElement(e,i),r=this.styleRef,o=r.get(i)?.elements;o?o.push(s):r.set(i,{elements:[s],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Yn),ae(Ug),ae(y$,8),ae(Au))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const eB={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},tB=/%COMP%/g,f8e=new Ne("",{providedIn:"root",factory:()=>!0});function vse(t,n){return n.map(e=>e.replace(tB,t))}let nB=(()=>{class t{constructor(e,i,s,r,o,a,l,c=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=r,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=rse(a),this.defaultRenderer=new iB(e,o,l,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ad.ShadowDom&&(i={...i,encapsulation:Ad.Emulated});const s=this.getOrCreateRenderer(e,i);return s instanceof wse?s.applyToHost(e):s instanceof sB&&s.applyStyles(),s}getOrCreateRenderer(e,i){const s=this.rendererByCompId;let r=s.get(i.id);if(!r){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case Ad.Emulated:r=new wse(l,c,i,this.appId,u,o,a,d);break;case Ad.ShadowDom:return new b8e(l,c,e,i,o,a,this.nonce,d);default:r=new sB(l,c,i,u,o,a,d)}s.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||t)(ae(_se),ae(gse),ae(Ug),ae(f8e),ae(Yn),ae(Au),ae(Lt),ae(y$))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();class iB{constructor(n,e,i,s){this.eventManager=n,this.doc=e,this.ngZone=i,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,e){return e?this.doc.createElementNS(eB[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(yse(n)?n.content:n).appendChild(e)}insertBefore(n,e,i){n&&(yse(n)?n.content:n).insertBefore(e,i)}removeChild(n,e){e.remove()}selectRootElement(n,e){let i="string"==typeof n?this.doc.querySelector(n):n;if(!i)throw new Fe(-5104,!1);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,s){if(s){e=s+":"+e;const r=eB[s];r?n.setAttributeNS(r,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const s=eB[i];s?n.removeAttributeNS(s,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,s){s&(wm.DashCase|wm.Important)?n.style.setProperty(e,i,s&wm.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&wm.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){null!=n&&(n[e]=i)}setValue(n,e){n.nodeValue=e}listen(n,e,i){if("string"==typeof n&&!(n=km().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${e}`);return this.eventManager.addEventListener(n,e,this.decoratePreventDefault(i))}decoratePreventDefault(n){return e=>{if("__ngUnwrap__"===e)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))&&e.preventDefault()}}}function yse(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class b8e extends iB{constructor(n,e,i,s,r,o,a,l){super(n,r,o,l),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=vse(s.id,s.styles);for(const u of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(null,e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class sB extends iB{constructor(n,e,i,s,r,o,a,l){super(n,r,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=s,this.styles=l?vse(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class wse extends sB{constructor(n,e,i,s,r,o,a,l){const c=s+"-"+i.id;super(n,e,i,r,o,a,l,c),this.contentAttr=function m8e(t){return"_ngcontent-%COMP%".replace(tB,t)}(c),this.hostAttr=function _8e(t){return"_nghost-%COMP%".replace(tB,t)}(c)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}let v8e=(()=>{class t extends Q5{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,s){return e.addEventListener(i,s,!1),()=>this.removeEventListener(e,i,s)}removeEventListener(e,i,s){return e.removeEventListener(i,s)}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Yn))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})(),y8e=(()=>{class t extends Q5{constructor(e){super(e),this.delegate=xe(Iie,{optional:!0})}supports(e){return!!this.delegate&&this.delegate.supports(e)}addEventListener(e,i,s){return this.delegate.addEventListener(e,i,s)}removeEventListener(e,i,s){return this.delegate.removeEventListener(e,i,s)}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Yn))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const Cse=["alt","control","meta","shift"],w8e={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},C8e={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let S8e=(()=>{class t extends Q5{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,s){const r=t.parseEventName(i),o=t.eventCallback(r.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>km().onAndCancel(e,r.domEventName,o))}static parseEventName(e){const i=e.toLowerCase().split("."),s=i.shift();if(0===i.length||"keydown"!==s&&"keyup"!==s)return null;const r=t._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),Cse.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=r,0!=i.length||0===r.length)return null;const l={};return l.domEventName=s,l.fullKey=o,l}static matchEventFullKeyCode(e,i){let s=w8e[e.key]||e.key,r="";return i.indexOf("code.")>-1&&(s=e.code,r="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Cse.forEach(o=>{o!==s&&(0,C8e[o])(e)&&(r+=o+".")}),r+=s,r===i)}static eventCallback(e,i,s){return r=>{t.matchEventFullKeyCode(r,e)&&s.runGuarded(()=>i(r))}}static _normalizeKey(e){return"esc"===e?"escape":e}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Yn))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const xse=[{provide:Au,useValue:sse},{provide:BZ,useValue:function x8e(){Z5.makeCurrent()},multi:!0},{provide:Yn,useFactory:function T8e(){return function xAe(t){v$=t}(document),document},deps:[]}],I8e=Jne(APe,"browser",xse),k8e=new Ne(""),Ese=[{provide:kA,useClass:class c8e{addToWindow(n){Or.getAngularTestability=(i,s=!0)=>{const r=n.findTestabilityInTree(i,s);if(null==r)throw new Fe(5103,!1);return r},Or.getAllAngularTestabilities=()=>n.getAllTestabilities(),Or.getAllAngularRootElements=()=>n.getAllRootElements(),Or.frameworkStabilizers||(Or.frameworkStabilizers=[]),Or.frameworkStabilizers.push(i=>{const s=Or.getAllAngularTestabilities();let r=s.length;const o=function(){r--,0==r&&i()};s.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(n,e,i){return null==e?null:n.getTestability(e)??(i?km().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:Bne,useClass:_5,deps:[Lt,g5,kA]},{provide:_5,useClass:_5,deps:[Lt,g5,kA]}],Tse=[{provide:N4,useValue:"root"},{provide:Ld,useFactory:function E8e(){return new Ld},deps:[]},{provide:sM,useClass:v8e,multi:!0,deps:[Yn,Lt,Au]},{provide:sM,useClass:S8e,multi:!0,deps:[Yn]},{provide:sM,useClass:y8e,multi:!0},nB,gse,_se,{provide:nA,useExisting:nB},{provide:ose,useClass:u8e,deps:[]},[]];let Ise=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:Ug,useValue:e.appId}]}}static#e=this.\u0275fac=function(i){return new(i||t)(ae(k8e,12))};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:[...Tse,...Ese],imports:[Ka,MPe]})}return t})(),rB=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Yn))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),oB=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(i){let s=null;return s=i?new(i||t):ae(N8e),s},providedIn:"root"})}return t})(),N8e=(()=>{class t extends oB{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case Mu.NONE:return i;case Mu.HTML:return Fh(i,"HTML")?Uc(i):lQ(this._doc,String(i)).toString();case Mu.STYLE:return Fh(i,"Style")?Uc(i):i;case Mu.SCRIPT:if(Fh(i,"Script"))return Uc(i);throw new Fe(5200,!1);case Mu.URL:return Fh(i,"URL")?Uc(i):$D(String(i));case Mu.RESOURCE_URL:if(Fh(i,"ResourceURL"))return Uc(i);throw new Fe(5201,!1);default:throw new Fe(5202,!1)}}bypassSecurityTrustHtml(e){return function HAe(t){return new BAe(t)}(e)}bypassSecurityTrustStyle(e){return function WAe(t){return new VAe(t)}(e)}bypassSecurityTrustScript(e){return function qAe(t){return new zAe(t)}(e)}bypassSecurityTrustUrl(e){return function KAe(t){return new UAe(t)}(e)}bypassSecurityTrustResourceUrl(e){return function XAe(t){return new GAe(t)}(e)}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Yn))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var si=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(si||{});const uf="*";function zo(t,n){return{type:si.Trigger,name:t,definitions:n,options:{}}}function Cs(t,n=null){return{type:si.Animate,styles:n,timings:t}}function Rx(t,n=null){return{type:si.Group,steps:t,options:n}}function bn(t){return{type:si.Style,styles:t,offset:null}}function Xs(t,n,e){return{type:si.State,name:t,styles:n,options:e}}function j1(t){return{type:si.Keyframes,steps:t}}function ms(t,n,e=null){return{type:si.Transition,expr:t,animation:n,options:e}}function H1(t=null){return{type:si.AnimateChild,options:t}}function W1(t,n,e=null){return{type:si.Query,selector:t,animation:n,options:e}}class Fx{constructor(n=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class Ase{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let e=0,i=0,s=0;const r=this.players.length;0==r?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==r&&this._onFinish()}),o.onDestroy(()=>{++i==r&&this._onDestroy()}),o.onStart(()=>{++s==r&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const e=n*this.totalTime;this.players.forEach(i=>{const s=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(s)})}getPosition(){const n=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}function Mse(t){return new Fe(3e3,!1)}function Am(t){switch(t.length){case 0:return new Fx;case 1:return t[0];default:return new Ase(t)}}function Nse(t,n,e=new Map,i=new Map){const s=[],r=[];let o=-1,a=null;if(n.forEach(l=>{const c=l.get("offset"),u=c==o,d=u&&a||new Map;l.forEach((h,p)=>{let f=p,g=h;if("offset"!==p)switch(f=t.normalizePropertyName(f,s),g){case"!":g=e.get(p);break;case uf:g=i.get(p);break;default:g=t.normalizeStyleValue(p,f,g,s)}d.set(f,g)}),u||r.push(d),a=d,o=c}),s.length)throw function o5e(){return new Fe(3502,!1)}();return r}function lB(t,n,e,i){switch(n){case"start":t.onStart(()=>i(e&&cB(e,"start",t)));break;case"done":t.onDone(()=>i(e&&cB(e,"done",t)));break;case"destroy":t.onDestroy(()=>i(e&&cB(e,"destroy",t)))}}function cB(t,n,e){const r=uB(t.element,t.triggerName,t.fromState,t.toState,n||t.phaseName,e.totalTime??t.totalTime,!!e.disabled),o=t._data;return null!=o&&(r._data=o),r}function uB(t,n,e,i,s="",r=0,o){return{element:t,triggerName:n,fromState:e,toState:i,phaseName:s,totalTime:r,disabled:!!o}}function Xc(t,n,e){let i=t.get(n);return i||t.set(n,i=e),i}function Ose(t){const n=t.indexOf(":");return[t.substring(1,n),t.slice(n+1)]}const b5e=typeof document>"u"?null:document.documentElement;function dB(t){const n=t.parentNode||t.host||null;return n===b5e?null:n}let db=null,Rse=!1;function Fse(t,n){for(;n;){if(n===t)return!0;n=dB(n)}return!1}function Lse(t,n,e){if(e)return Array.from(t.querySelectorAll(n));const i=t.querySelector(n);return i?[i]:[]}let hB=(()=>{class t{validateStyleProperty(e){return function y5e(t){db||(db=function w5e(){return typeof document<"u"?document.body:null}()||{},Rse=!!db.style&&"WebkitAppearance"in db.style);let n=!0;return db.style&&!function v5e(t){return"ebkit"==t.substring(1,6)}(t)&&(n=t in db.style,!n&&Rse&&(n="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in db.style)),n}(e)}containsElement(e,i){return Fse(e,i)}getParentElement(e){return dB(e)}query(e,i,s){return Lse(e,i,s)}computeStyle(e,i,s){return s||""}animate(e,i,s,r,o,a=[],l){return new Fx(s,r)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();class pB{static#e=this.NOOP=new hB}class fB{}const S5e=1e3,mB="ng-enter",oM="ng-leave",aM="ng-trigger",lM=".ng-trigger",$se="ng-animating",_B=".ng-animating";function df(t){if("number"==typeof t)return t;const n=t.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:gB(parseFloat(n[1]),n[2])}function gB(t,n){return"s"===n?t*S5e:t}function cM(t,n,e){return t.hasOwnProperty("duration")?t:function E5e(t,n,e){let s,r=0,o="";if("string"==typeof t){const a=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return n.push(Mse()),{duration:0,delay:0,easing:""};s=gB(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(r=gB(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else s=t;if(!e){let a=!1,l=n.length;s<0&&(n.push(function $8e(){return new Fe(3100,!1)}()),a=!0),r<0&&(n.push(function B8e(){return new Fe(3101,!1)}()),a=!0),a&&n.splice(l,0,Mse())}return{duration:s,delay:r,easing:o}}(t,n,e)}function Bh(t,n,e){n.forEach((i,s)=>{const r=vB(s);e&&!e.has(s)&&e.set(s,t.style[r]),t.style[r]=i})}function hb(t,n){n.forEach((e,i)=>{const s=vB(i);t.style[s]=""})}function Lx(t){return Array.isArray(t)?1==t.length?t[0]:function O8e(t,n=null){return{type:si.Sequence,steps:t,options:n}}(t):t}const bB=new RegExp("{{\\s*(.+?)\\s*}}","g");function Vse(t){let n=[];if("string"==typeof t){let e;for(;e=bB.exec(t);)n.push(e[1]);bB.lastIndex=0}return n}function Px(t,n,e){const i=`${t}`,s=i.replace(bB,(r,o)=>{let a=n[o];return null==a&&(e.push(function z8e(){return new Fe(3003,!1)}()),a=""),a.toString()});return s==i?t:s}const k5e=/-+([a-z0-9])/g;function vB(t){return t.replace(k5e,(...n)=>n[1].toUpperCase())}function Yc(t,n,e){switch(n.type){case si.Trigger:return t.visitTrigger(n,e);case si.State:return t.visitState(n,e);case si.Transition:return t.visitTransition(n,e);case si.Sequence:return t.visitSequence(n,e);case si.Group:return t.visitGroup(n,e);case si.Animate:return t.visitAnimate(n,e);case si.Keyframes:return t.visitKeyframes(n,e);case si.Style:return t.visitStyle(n,e);case si.Reference:return t.visitReference(n,e);case si.AnimateChild:return t.visitAnimateChild(n,e);case si.AnimateRef:return t.visitAnimateRef(n,e);case si.Query:return t.visitQuery(n,e);case si.Stagger:return t.visitStagger(n,e);default:throw function U8e(){return new Fe(3004,!1)}()}}function yB(t,n){return window.getComputedStyle(t)[n]}const M5e=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class zse extends fB{normalizePropertyName(n,e){return vB(n)}normalizeStyleValue(n,e,i,s){let r="";const o=i.toString().trim();if(M5e.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)r="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&s.push(function G8e(){return new Fe(3005,!1)}())}return o+r}}const uM="*";const dM=new Set(["true","1"]),hM=new Set(["false","0"]);function Use(t,n){const e=dM.has(t)||hM.has(t),i=dM.has(n)||hM.has(n);return(s,r)=>{let o=t==uM||t==s,a=n==uM||n==r;return!o&&e&&"boolean"==typeof s&&(o=s?dM.has(t):hM.has(t)),!a&&i&&"boolean"==typeof r&&(a=r?dM.has(n):hM.has(n)),o&&a}}const F5e=new RegExp("s*:selfs*,?","g");function wB(t,n,e,i){return new L5e(t).build(n,e,i)}class L5e{constructor(n){this._driver=n}build(n,e,i){const s=new B5e(e);return this._resetContextStyleTimingState(s),Yc(this,Lx(n),s)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,e){let i=e.queryCount=0,s=e.depCount=0;const r=[],o=[];return"@"==n.name.charAt(0)&&e.errors.push(function j8e(){return new Fe(3006,!1)}()),n.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==si.State){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,r.push(this.visitState(l,e))}),l.name=c}else if(a.type==si.Transition){const l=this.visitTransition(a,e);i+=l.queryCount,s+=l.depCount,o.push(l)}else e.errors.push(function H8e(){return new Fe(3007,!1)}())}),{type:si.Trigger,name:n.name,states:r,transitions:o,queryCount:i,depCount:s,options:null}}visitState(n,e){const i=this.visitStyle(n.styles,e),s=n.options&&n.options.params||null;if(i.containsDynamicStyles){const r=new Set,o=s||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Vse(l).forEach(c=>{o.hasOwnProperty(c)||r.add(c)})})}),r.size&&e.errors.push(function W8e(){return new Fe(3008,!1)}(0,r.values()))}return{type:si.State,name:n.name,style:i,options:s?{params:s}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;const i=Yc(this,Lx(n.animation),e),s=function N5e(t,n){const e=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(i=>function O5e(t,n,e){if(":"==t[0]){const l=function R5e(t,n){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return n.push(function n5e(){return new Fe(3016,!1)}()),"* => *"}}(t,e);if("function"==typeof l)return void n.push(l);t=l}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function t5e(){return new Fe(3015,!1)}()),n;const s=i[1],r=i[2],o=i[3];n.push(Use(s,o)),"<"==r[0]&&(s!=uM||o!=uM)&&n.push(Use(o,s))}(i,e,n)):e.push(t),e}(n.expr,e.errors);return{type:si.Transition,matchers:s,animation:i,queryCount:e.queryCount,depCount:e.depCount,options:pb(n.options)}}visitSequence(n,e){return{type:si.Sequence,steps:n.steps.map(i=>Yc(this,i,e)),options:pb(n.options)}}visitGroup(n,e){const i=e.currentTime;let s=0;const r=n.steps.map(o=>{e.currentTime=i;const a=Yc(this,o,e);return s=Math.max(s,e.currentTime),a});return e.currentTime=s,{type:si.Group,steps:r,options:pb(n.options)}}visitAnimate(n,e){const i=function z5e(t,n){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return CB(cM(t,n).duration,0,"");const e=t;if(e.split(/\s+/).some(r=>"{"==r.charAt(0)&&"{"==r.charAt(1))){const r=CB(0,0,"");return r.dynamic=!0,r.strValue=e,r}const s=cM(e,n);return CB(s.duration,s.delay,s.easing)}(n.timings,e.errors);e.currentAnimateTimings=i;let s,r=n.styles?n.styles:bn({});if(r.type==si.Keyframes)s=this.visitKeyframes(r,e);else{let o=n.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=bn(c)}e.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,e);l.isEmptyStep=a,s=l}return e.currentAnimateTimings=null,{type:si.Animate,timings:i,style:s,options:null}}visitStyle(n,e){const i=this._makeStyleAst(n,e);return this._validateStyleAst(i,e),i}_makeStyleAst(n,e){const i=[],s=Array.isArray(n.styles)?n.styles:[n.styles];for(let a of s)"string"==typeof a?a===uf?i.push(a):e.errors.push(new Fe(3002,!1)):i.push(new Map(Object.entries(a)));let r=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!r))for(let l of a.values())if(l.toString().indexOf("{{")>=0){r=!0;break}}),{type:si.Style,styles:i,easing:o,offset:n.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(n,e){const i=e.currentAnimateTimings;let s=e.currentTime,r=e.currentTime;i&&r>0&&(r-=i.duration+i.delay),n.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=e.collectedStyles.get(e.currentQuerySelector),u=c.get(l);let d=!0;u&&(r!=s&&r>=u.startTime&&s<=u.endTime&&(e.errors.push(function K8e(){return new Fe(3010,!1)}()),d=!1),r=u.startTime),d&&c.set(l,{startTime:r,endTime:s}),e.options&&function I5e(t,n,e){const i=n.params||{},s=Vse(t);s.length&&s.forEach(r=>{i.hasOwnProperty(r)||e.push(function V8e(){return new Fe(3001,!1)}())})}(a,e.options,e.errors)})})}visitKeyframes(n,e){const i={type:si.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function X8e(){return new Fe(3011,!1)}()),i;let r=0;const o=[];let a=!1,l=!1,c=0;const u=n.steps.map(y=>{const w=this._makeStyleAst(y,e);let x=null!=w.offset?w.offset:function V5e(t){if("string"==typeof t)return null;let n=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;n=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const e=t;n=parseFloat(e.get("offset")),e.delete("offset")}return n}(w.styles),T=0;return null!=x&&(r++,T=w.offset=x),l=l||T<0||T>1,a=a||T<c,c=T,o.push(T),w});l&&e.errors.push(function Y8e(){return new Fe(3012,!1)}()),a&&e.errors.push(function Z8e(){return new Fe(3200,!1)}());const d=n.steps.length;let h=0;r>0&&r<d?e.errors.push(function Q8e(){return new Fe(3202,!1)}()):0==r&&(h=1/(d-1));const p=d-1,f=e.currentTime,g=e.currentAnimateTimings,v=g.duration;return u.forEach((y,w)=>{const x=h>0?w==p?1:h*w:o[w],T=x*v;e.currentTime=f+g.delay+T,g.duration=T,this._validateStyleAst(y,e),y.offset=x,i.styles.push(y)}),i}visitReference(n,e){return{type:si.Reference,animation:Yc(this,Lx(n.animation),e),options:pb(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:si.AnimateChild,options:pb(n.options)}}visitAnimateRef(n,e){return{type:si.AnimateRef,animation:this.visitReference(n.animation,e),options:pb(n.options)}}visitQuery(n,e){const i=e.currentQuerySelector,s=n.options||{};e.queryCount++,e.currentQuery=n;const[r,o]=function P5e(t){const n=!!t.split(/\s*,\s*/).find(e=>":self"==e);return n&&(t=t.replace(F5e,"")),t=t.replace(/@\*/g,lM).replace(/@\w+/g,e=>lM+"-"+e.slice(1)).replace(/:animating/g,_B),[t,n]}(n.selector);e.currentQuerySelector=i.length?i+" "+r:r,Xc(e.collectedStyles,e.currentQuerySelector,new Map);const a=Yc(this,Lx(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:si.Query,selector:r,limit:s.limit||0,optional:!!s.optional,includeSelf:o,animation:a,originalSelector:n.selector,options:pb(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(function J8e(){return new Fe(3013,!1)}());const i="full"===n.timings?{duration:0,delay:0,easing:"full"}:cM(n.timings,e.errors,!0);return{type:si.Stagger,animation:Yc(this,Lx(n.animation),e),timings:i,options:null}}}class B5e{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function pb(t){return t?(t={...t}).params&&(t.params=function $5e(t){return t?{...t}:null}(t.params)):t={},t}function CB(t,n,e){return{duration:t,delay:n,easing:e}}function SB(t,n,e,i,s,r,o=null,a=!1){return{type:1,element:t,keyframes:n,preStyleProps:e,postStyleProps:i,duration:s,delay:r,totalTime:s+r,easing:o,subTimeline:a}}class pM{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,e){let i=this._map.get(n);i||this._map.set(n,i=[]),i.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const j5e=new RegExp(":enter","g"),W5e=new RegExp(":leave","g");function xB(t,n,e,i,s,r=new Map,o=new Map,a,l,c=[]){return(new q5e).buildKeyframes(t,n,e,i,s,r,o,a,l,c)}class q5e{buildKeyframes(n,e,i,s,r,o,a,l,c,u=[]){c=c||new pM;const d=new EB(n,e,c,s,r,u,[]);d.options=l;const h=l.delay?df(l.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,l),Yc(this,i,d);const p=d.timelines.filter(f=>f.containsAnimation());if(p.length&&a.size){let f;for(let g=p.length-1;g>=0;g--){const v=p[g];if(v.element===e){f=v;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,d.errors,l)}return p.length?p.map(f=>f.buildKeyframes()):[SB(e,[],[],[],0,h,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){const i=e.subInstructions.get(e.element);if(i){const s=e.createSubContext(n.options),r=e.currentTimeline.currentTime,o=this._visitSubInstructions(i,s,s.options);r!=o&&e.transformIntoNewTimeline(o)}e.previousNode=n}visitAnimateRef(n,e){const i=e.createSubContext(n.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,i),this.visitReference(n.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,i){for(const s of n){const r=s?.delay;if(r){const o="number"==typeof r?r:df(Px(r,s?.params??{},e.errors));i.delayNextStep(o)}}}_visitSubInstructions(n,e,i){let r=e.currentTimeline.currentTime;const o=null!=i.duration?df(i.duration):null,a=null!=i.delay?df(i.delay):null;return 0!==o&&n.forEach(l=>{const c=e.appendInstructionToTimeline(l,o,a);r=Math.max(r,c.duration+c.delay)}),r}visitReference(n,e){e.updateOptions(n.options,!0),Yc(this,n.animation,e),e.previousNode=n}visitSequence(n,e){const i=e.subContextCount;let s=e;const r=n.options;if(r&&(r.params||r.delay)&&(s=e.createSubContext(r),s.transformIntoNewTimeline(),null!=r.delay)){s.previousNode.type==si.Style&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=fM);const o=df(r.delay);s.delayNextStep(o)}n.steps.length&&(n.steps.forEach(o=>Yc(this,o,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>i&&s.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){const i=[];let s=e.currentTimeline.currentTime;const r=n.options&&n.options.delay?df(n.options.delay):0;n.steps.forEach(o=>{const a=e.createSubContext(n.options);r&&a.delayNextStep(r),Yc(this,o,a),s=Math.max(s,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(s),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){const i=n.strValue;return cM(e.params?Px(i,e.params,e.errors):i,e.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){const i=e.currentAnimateTimings=this._visitTiming(n.timings,e),s=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),s.snapshotCurrentStyles());const r=n.style;r.type==si.Keyframes?this.visitKeyframes(r,e):(e.incrementTime(i.duration),this.visitStyle(r,e),s.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){const i=e.currentTimeline,s=e.currentAnimateTimings;!s&&i.hasCurrentStyleProperties()&&i.forwardFrame();const r=s&&s.easing||n.easing;n.isEmptyStep?i.applyEmptyStep(r):i.setStyles(n.styles,r,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){const i=e.currentAnimateTimings,s=e.currentTimeline.duration,r=i.duration,a=e.createSubContext().currentTimeline;a.easing=i.easing,n.styles.forEach(l=>{a.forwardTime((l.offset||0)*r),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(s+r),e.previousNode=n}visitQuery(n,e){const i=e.currentTimeline.currentTime,s=n.options||{},r=s.delay?df(s.delay):0;r&&(e.previousNode.type===si.Style||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=fM);let o=i;const a=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!s.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{e.currentQueryIndex=u;const d=e.createSubContext(n.options,c);r&&d.delayNextStep(r),c===e.element&&(l=d.currentTimeline),Yc(this,n.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){const i=e.parentContext,s=e.currentTimeline,r=n.timings,o=Math.abs(r.duration),a=o*(e.currentQueryTotal-1);let l=o*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=e.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;Yc(this,n.animation,e),e.previousNode=n,i.currentStaggerTime=s.currentTime-d+(s.startTime-i.currentTimeline.startTime)}}const fM={};class EB{constructor(n,e,i,s,r,o,a,l){this._driver=n,this.element=e,this.subInstructions=i,this._enterClassName=s,this._leaveClassName=r,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=fM,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new mM(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;const i=n;let s=this.options;null!=i.duration&&(s.duration=df(i.duration)),null!=i.delay&&(s.delay=df(i.delay));const r=i.params;if(r){let o=s.params;o||(o=this.options.params={}),Object.keys(r).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=Px(r[a],o,this.errors))})}}_copyOptions(){const n={};if(this.options){const e=this.options.params;if(e){const i=n.params={};Object.keys(e).forEach(s=>{i[s]=e[s]})}}return n}createSubContext(n=null,e,i){const s=e||this.element,r=new EB(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,i||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(n),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(n){return this.previousNode=fM,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,i){const s={duration:e??n.duration,delay:this.currentTimeline.currentTime+(i??0)+n.delay,easing:""},r=new K5e(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,s,n.stretchStartingKeyframe);return this.timelines.push(r),s}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,i,s,r,o){let a=[];if(s&&a.push(this.element),n.length>0){n=(n=n.replace(j5e,"."+this._enterClassName)).replace(W5e,"."+this._leaveClassName);let c=this._driver.query(this.element,n,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!r&&0==a.length&&o.push(function e5e(){return new Fe(3014,!1)}()),a}}class mM{constructor(n,e,i,s){this._driver=n,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=s,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new mM(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||uf),this._currentKeyframe.set(e,uf);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,i,s){e&&this._previousKeyframe.set("easing",e);const r=s&&s.params||{},o=function X5e(t,n){const e=new Map;let i;return t.forEach(s=>{if("*"===s){i??=n.keys();for(let r of i)e.set(r,uf)}else for(let[r,o]of s)e.set(r,o)}),e}(n,this._globalTimelineStyles);for(let[a,l]of o){const c=Px(l,r,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??uf),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,i)=>{const s=this._styleSummary.get(i);(!s||e.time>s.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((a,l)=>{const c=new Map([...this._backFill,...a]);c.forEach((u,d)=>{"!"===u?n.add(d):u===uf&&e.add(d)}),i||c.set("offset",l/this.duration),s.push(c)});const r=[...n.values()],o=[...e.values()];if(i){const a=s[0],l=new Map(a);a.set("offset",0),l.set("offset",1),s=[a,l]}return SB(this.element,s,r,o,this.duration,this.startTime,this.easing,!1)}}class K5e extends mM{constructor(n,e,i,s,r,o,a=!1){super(n,e,o.delay),this.keyframes=i,this.preStyleProps=s,this.postStyleProps=r,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:i,easing:s}=this.timings;if(this._stretchStartingKeyframe&&e){const r=[],o=i+e,a=e/o,l=new Map(n[0]);l.set("offset",0),r.push(l);const c=new Map(n[0]);c.set("offset",Hse(a)),r.push(c);const u=n.length-1;for(let d=1;d<=u;d++){let h=new Map(n[d]);const p=h.get("offset");h.set("offset",Hse((e+p*i)/o)),r.push(h)}i=o,e=0,s="",n=r}return SB(this.element,n,this.preStyleProps,this.postStyleProps,i,e,s,!0)}}function Hse(t,n=3){const e=Math.pow(10,n-1);return Math.round(t*e)/e}function Wse(t,n,e,i,s,r,o,a,l,c,u,d,h){return{type:0,element:t,triggerName:n,isRemovalTransition:s,fromState:e,fromStyles:r,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const TB={};class qse{constructor(n,e,i){this._triggerName=n,this.ast=e,this._stateStyles=i}match(n,e,i,s){return function Y5e(t,n,e,i,s){return t.some(r=>r(n,e,i,s))}(this.ast.matchers,n,e,i,s)}buildStyles(n,e,i){let s=this._stateStyles.get("*");return void 0!==n&&(s=this._stateStyles.get(n?.toString())||s),s?s.buildStyles(e,i):new Map}build(n,e,i,s,r,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||TB,f=this.buildStyles(i,a&&a.params||TB,d),g=l&&l.params||TB,v=this.buildStyles(s,g,d),y=new Set,w=new Map,x=new Map,T="void"===s,k={params:Kse(g,h),delay:this.ast.options?.delay},R=u?[]:xB(n,e,this.ast.animation,r,o,f,v,k,c,d);let N=0;return R.forEach(D=>{N=Math.max(D.duration+D.delay,N)}),d.length?Wse(e,this._triggerName,i,s,T,f,v,[],[],w,x,N,d):(R.forEach(D=>{const F=D.element,$=Xc(w,F,new Set);D.preStyleProps.forEach(Q=>$.add(Q));const j=Xc(x,F,new Set);D.postStyleProps.forEach(Q=>j.add(Q)),F!==e&&y.add(F)}),Wse(e,this._triggerName,i,s,T,f,v,R,[...y.values()],w,x,N))}}function Kse(t,n){const e={...n};return Object.entries(t).forEach(([i,s])=>{null!=s&&(e[i]=s)}),e}class Z5e{constructor(n,e,i){this.styles=n,this.defaultParams=e,this.normalizer=i}buildStyles(n,e){const i=new Map,s=Kse(n,this.defaultParams);return this.styles.styles.forEach(r=>{"string"!=typeof r&&r.forEach((o,a)=>{o&&(o=Px(o,s,e));const l=this.normalizer.normalizePropertyName(a,e);o=this.normalizer.normalizeStyleValue(a,l,o,e),i.set(a,o)})}),i}}class J5e{constructor(n,e,i){this.name=n,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(s=>{this.states.set(s.name,new Z5e(s.style,s.options&&s.options.params||{},i))}),Xse(this.states,"true","1"),Xse(this.states,"false","0"),e.transitions.forEach(s=>{this.transitionFactories.push(new qse(n,s,this.states))}),this.fallbackTransition=function eBe(t,n){return new qse(t,{type:si.Transition,animation:{type:si.Sequence,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,i,s){return this.transitionFactories.find(o=>o.match(n,e,i,s))||null}matchStyles(n,e,i){return this.fallbackTransition.buildStyles(n,e,i)}}function Xse(t,n,e){t.has(n)?t.has(e)||t.set(e,t.get(n)):t.has(e)&&t.set(n,t.get(e))}const tBe=new pM;class nBe{constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,e){const i=[],r=wB(this._driver,e,i,[]);if(i.length)throw function a5e(){return new Fe(3503,!1)}();this._animations.set(n,r)}_buildPlayer(n,e,i){const s=n.element,r=Nse(this._normalizer,n.keyframes,e,i);return this._driver.animate(s,r,n.duration,n.delay,n.easing,[],!0)}create(n,e,i={}){const s=[],r=this._animations.get(n);let o;const a=new Map;if(r?(o=xB(this._driver,e,r,mB,oM,new Map,new Map,i,tBe,s),o.forEach(u=>{const d=Xc(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(s.push(function l5e(){return new Fe(3300,!1)}()),o=[]),s.length)throw function c5e(){return new Fe(3504,!1)}();a.forEach((u,d)=>{u.forEach((h,p)=>{u.set(p,this._driver.computeStyle(d,p,uf))})});const c=Am(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(n,c),c.onDestroy(()=>this.destroy(n)),this.players.push(c),c}destroy(n){const e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(n){const e=this._playersById.get(n);if(!e)throw function u5e(){return new Fe(3301,!1)}();return e}listen(n,e,i,s){const r=uB(e,"","","");return lB(this._getPlayer(n),i,r,s),()=>{}}command(n,e,i,s){if("register"==i)return void this.register(n,s[0]);if("create"==i)return void this.create(n,e,s[0]||{});const r=this._getPlayer(n);switch(i){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(n)}}}const Yse="ng-animate-queued",IB="ng-animate-disabled",aBe=[],Zse={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},lBe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Hd="__ng_removed";class kB{get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;const i=n&&n.hasOwnProperty("value");if(this.value=function hBe(t){return t??null}(i?n.value:n),i){const{value:r,...o}=n;this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const e=n.params;if(e){const i=this.options.params;Object.keys(e).forEach(s=>{null==i[s]&&(i[s]=e[s])})}}}const $x="void",DB=new kB($x);class cBe{constructor(n,e,i){this.id=n,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,Lu(e,this._hostClassName)}listen(n,e,i,s){if(!this._triggers.has(e))throw function d5e(){return new Fe(3302,!1)}();if(null==i||0==i.length)throw function h5e(){return new Fe(3303,!1)}();if(!function pBe(t){return"start"==t||"done"==t}(i))throw function p5e(){return new Fe(3400,!1)}();const r=Xc(this._elementListeners,n,[]),o={name:e,phase:i,callback:s};r.push(o);const a=Xc(this._engine.statesByElement,n,new Map);return a.has(e)||(Lu(n,aM),Lu(n,aM+"-"+e),a.set(e,DB)),()=>{this._engine.afterFlush(()=>{const l=r.indexOf(o);l>=0&&r.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(n,e){return!this._triggers.has(n)&&(this._triggers.set(n,e),!0)}_getTrigger(n){const e=this._triggers.get(n);if(!e)throw function f5e(){return new Fe(3401,!1)}();return e}trigger(n,e,i,s=!0){const r=this._getTrigger(e),o=new AB(this.id,e,n);let a=this._engine.statesByElement.get(n);a||(Lu(n,aM),Lu(n,aM+"-"+e),this._engine.statesByElement.set(n,a=new Map));let l=a.get(e);const c=new kB(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=DB),c.value!==$x&&l.value===c.value){if(!function _Be(t,n){const e=Object.keys(t),i=Object.keys(n);if(e.length!=i.length)return!1;for(let s=0;s<e.length;s++){const r=e[s];if(!n.hasOwnProperty(r)||t[r]!==n[r])return!1}return!0}(l.params,c.params)){const g=[],v=r.matchStyles(l.value,l.params,g),y=r.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{hb(n,v),Bh(n,y)})}return}const h=Xc(this._engine.playersByElement,n,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==e&&g.queued&&g.destroy()});let p=r.matchTransition(l.value,c.value,n,c.params),f=!1;if(!p){if(!s)return;p=r.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:p,fromState:l,toState:c,player:o,isFallbackTransition:f}),f||(Lu(n,Yse),o.onStart(()=>{q1(n,Yse)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);const v=this._engine.playersByElement.get(n);if(v){let y=v.indexOf(o);y>=0&&v.splice(y,1)}}),this.players.push(o),h.push(o),o}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(s=>s.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const e=this._engine.playersByElement.get(n);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){const i=this._engine.driver.query(n,lM,!0);i.forEach(s=>{if(s[Hd])return;const r=this._engine.fetchNamespacesByElement(s);r.size?r.forEach(o=>o.triggerLeaveAnimation(s,e,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(n,e,i,s){const r=this._engine.statesByElement.get(n),o=new Map;if(r){const a=[];if(r.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(n,c,$x,s);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,o),i&&Am(a).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const e=this._elementListeners.get(n),i=this._engine.statesByElement.get(n);if(e&&i){const s=new Set;e.forEach(r=>{const o=r.name;if(s.has(o))return;s.add(o);const l=this._triggers.get(o).fallbackTransition,c=i.get(o)||DB,u=new kB($x),d=new AB(this.id,o,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(n,e){const i=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let s=!1;if(i.totalAnimations){const r=i.players.length?i.playersByQueriedElement.get(n):[];if(r&&r.length)s=!0;else{let o=n;for(;o=o.parentNode;)if(i.statesByElement.get(o)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(n),s)i.markElementAsRemoved(this.id,n,!1,e);else{const r=n[Hd];(!r||r===Zse)&&(i.afterFlush(()=>this.clearElementCache(n)),i.destroyInnerAnimations(n),i._onRemovalComplete(n,e))}}insertNode(n,e){Lu(n,this._hostClassName)}drainQueuedTransitions(n){const e=[];return this._queue.forEach(i=>{const s=i.player;if(s.destroyed)return;const r=i.element,o=this._elementListeners.get(r);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=uB(r,i.triggerName,i.fromState.value,i.toState.value);l._data=n,lB(i.player,a.phase,l,a.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):e.push(i)}),this._queue=[],e.sort((i,s)=>{const r=i.transition.ast.depCount,o=s.transition.ast.depCount;return 0==r||0==o?r-o:this._engine.driver.containsElement(i.element,s.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}}class uBe{_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,i){this.bodyNode=n,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,r)=>{}}get queuedPlayers(){const n=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&n.push(i)})}),n}createNamespace(n,e){const i=new cBe(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[n]=i}_balanceNamespaceList(n,e){const i=this._namespaceList,s=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(e);for(;a;){const l=s.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,n),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(n)}else i.push(n);return s.set(e,n),n}register(n,e){let i=this._namespaceLookup[n];return i||(i=this.createNamespace(n,e)),i}registerTrigger(n,e,i){let s=this._namespaceLookup[n];s&&s.register(e,i)&&this.totalAnimations++}destroy(n,e){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(n);this.namespacesByHostElement.delete(i.hostElement);const s=this._namespaceList.indexOf(i);s>=0&&this._namespaceList.splice(s,1),i.destroy(e),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const e=new Set,i=this.statesByElement.get(n);if(i)for(let s of i.values())if(s.namespaceId){const r=this._fetchNamespace(s.namespaceId);r&&e.add(r)}return e}trigger(n,e,i,s){if(_M(e)){const r=this._fetchNamespace(n);if(r)return r.trigger(e,i,s),!0}return!1}insertNode(n,e,i,s){if(!_M(e))return;const r=e[Hd];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(n){const o=this._fetchNamespace(n);o&&o.insertNode(e,i)}s&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),Lu(n,IB)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),q1(n,IB))}removeNode(n,e,i){if(_M(e)){const s=n?this._fetchNamespace(n):null;s?s.removeNode(e,i):this.markElementAsRemoved(n,e,!1,i);const r=this.namespacesByHostElement.get(e);r&&r.id!==n&&r.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(n,e,i,s,r){this.collectedLeaveElements.push(e),e[Hd]={namespaceId:n,setForRemoval:s,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:r}}listen(n,e,i,s,r){return _M(e)?this._fetchNamespace(n).listen(e,i,s,r):()=>{}}_buildInstruction(n,e,i,s,r){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,i,s,n.fromState.options,n.toState.options,e,r)}destroyInnerAnimations(n){let e=this.driver.query(n,lM,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(n,_B,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(n){const e=this.playersByElement.get(n);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(n){const e=this.playersByQueriedElement.get(n);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Am(this.players).onDone(()=>n());n()})}processLeaveNode(n){const e=n[Hd];if(e&&e.setForRemoval){if(n[Hd]=Zse,e.namespaceId){this.destroyInnerAnimations(n);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(IB)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,s)=>this._balanceNamespaceList(i,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Lu(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,n)}finally{for(let s=0;s<i.length;s++)i[s]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Am(e).onDone(()=>{i.forEach(s=>s())}):i.forEach(s=>s())}}reportError(n){throw function m5e(){return new Fe(3402,!1)}()}_flushAnimations(n,e){const i=new pM,s=[],r=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(Z=>{u.add(Z);const le=this.driver.query(Z,".ng-animate-queued",!0);for(let te=0;te<le.length;te++)u.add(le[te])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),p=ere(h,this.collectedEnterElements),f=new Map;let g=0;p.forEach((Z,le)=>{const te=mB+g++;f.set(le,te),Z.forEach(be=>Lu(be,te))});const v=[],y=new Set,w=new Set;for(let Z=0;Z<this.collectedLeaveElements.length;Z++){const le=this.collectedLeaveElements[Z],te=le[Hd];te&&te.setForRemoval&&(v.push(le),y.add(le),te.hasAnimation?this.driver.query(le,".ng-star-inserted",!0).forEach(be=>y.add(be)):w.add(le))}const x=new Map,T=ere(h,Array.from(y));T.forEach((Z,le)=>{const te=oM+g++;x.set(le,te),Z.forEach(be=>Lu(be,te))}),n.push(()=>{p.forEach((Z,le)=>{const te=f.get(le);Z.forEach(be=>q1(be,te))}),T.forEach((Z,le)=>{const te=x.get(le);Z.forEach(be=>q1(be,te))}),v.forEach(Z=>{this.processLeaveNode(Z)})});const k=[],R=[];for(let Z=this._namespaceList.length-1;Z>=0;Z--)this._namespaceList[Z].drainQueuedTransitions(e).forEach(te=>{const be=te.player,fe=te.element;if(k.push(be),this.collectedEnterElements.length){const Dt=fe[Hd];if(Dt&&Dt.setForMove){if(Dt.previousTriggersValues&&Dt.previousTriggersValues.has(te.triggerName)){const sn=Dt.previousTriggersValues.get(te.triggerName),jt=this.statesByElement.get(te.element);if(jt&&jt.has(te.triggerName)){const Fn=jt.get(te.triggerName);Fn.value=sn,jt.set(te.triggerName,Fn)}}return void be.destroy()}}const Te=!d||!this.driver.containsElement(d,fe),et=x.get(fe),We=f.get(fe),Qe=this._buildInstruction(te,i,We,et,Te);if(Qe.errors&&Qe.errors.length)return void R.push(Qe);if(Te)return be.onStart(()=>hb(fe,Qe.fromStyles)),be.onDestroy(()=>Bh(fe,Qe.toStyles)),void s.push(be);if(te.isFallbackTransition)return be.onStart(()=>hb(fe,Qe.fromStyles)),be.onDestroy(()=>Bh(fe,Qe.toStyles)),void s.push(be);const gt=[];Qe.timelines.forEach(Dt=>{Dt.stretchStartingKeyframe=!0,this.disabledNodes.has(Dt.element)||gt.push(Dt)}),Qe.timelines=gt,i.append(fe,Qe.timelines),o.push({instruction:Qe,player:be,element:fe}),Qe.queriedElements.forEach(Dt=>Xc(a,Dt,[]).push(be)),Qe.preStyleProps.forEach((Dt,sn)=>{if(Dt.size){let jt=l.get(sn);jt||l.set(sn,jt=new Set),Dt.forEach((Fn,ri)=>jt.add(ri))}}),Qe.postStyleProps.forEach((Dt,sn)=>{let jt=c.get(sn);jt||c.set(sn,jt=new Set),Dt.forEach((Fn,ri)=>jt.add(ri))})});if(R.length){const Z=[];R.forEach(le=>{Z.push(function _5e(){return new Fe(3505,!1)}())}),k.forEach(le=>le.destroy()),this.reportError(Z)}const N=new Map,D=new Map;o.forEach(Z=>{const le=Z.element;i.has(le)&&(D.set(le,le),this._beforeAnimationBuild(Z.player.namespaceId,Z.instruction,N))}),s.forEach(Z=>{const le=Z.element;this._getPreviousPlayers(le,!1,Z.namespaceId,Z.triggerName,null).forEach(be=>{Xc(N,le,[]).push(be),be.destroy()})});const F=v.filter(Z=>nre(Z,l,c)),$=new Map;Jse($,this.driver,w,c,uf).forEach(Z=>{nre(Z,l,c)&&F.push(Z)});const Q=new Map;p.forEach((Z,le)=>{Jse(Q,this.driver,new Set(Z),l,"!")}),F.forEach(Z=>{const le=$.get(Z),te=Q.get(Z);$.set(Z,new Map([...le?.entries()??[],...te?.entries()??[]]))});const Y=[],ce=[],Ce={};o.forEach(Z=>{const{element:le,player:te,instruction:be}=Z;if(i.has(le)){if(u.has(le))return te.onDestroy(()=>Bh(le,be.toStyles)),te.disabled=!0,te.overrideTotalTime(be.totalTime),void s.push(te);let fe=Ce;if(D.size>1){let et=le;const We=[];for(;et=et.parentNode;){const Qe=D.get(et);if(Qe){fe=Qe;break}We.push(et)}We.forEach(Qe=>D.set(Qe,fe))}const Te=this._buildAnimation(te.namespaceId,be,N,r,Q,$);if(te.setRealPlayer(Te),fe===Ce)Y.push(te);else{const et=this.playersByElement.get(fe);et&&et.length&&(te.parentPlayer=Am(et)),s.push(te)}}else hb(le,be.fromStyles),te.onDestroy(()=>Bh(le,be.toStyles)),ce.push(te),u.has(le)&&s.push(te)}),ce.forEach(Z=>{const le=r.get(Z.element);if(le&&le.length){const te=Am(le);Z.setRealPlayer(te)}}),s.forEach(Z=>{Z.parentPlayer?Z.syncPlayerEvents(Z.parentPlayer):Z.destroy()});for(let Z=0;Z<v.length;Z++){const le=v[Z],te=le[Hd];if(q1(le,oM),te&&te.hasAnimation)continue;let be=[];if(a.size){let Te=a.get(le);Te&&Te.length&&be.push(...Te);let et=this.driver.query(le,_B,!0);for(let We=0;We<et.length;We++){let Qe=a.get(et[We]);Qe&&Qe.length&&be.push(...Qe)}}const fe=be.filter(Te=>!Te.destroyed);fe.length?fBe(this,le,fe):this.processLeaveNode(le)}return v.length=0,Y.forEach(Z=>{this.players.push(Z),Z.onDone(()=>{Z.destroy();const le=this.players.indexOf(Z);this.players.splice(le,1)}),Z.play()}),Y}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,i,s,r){let o=[];if(e){const a=this.playersByQueriedElement.get(n);a&&(o=a)}else{const a=this.playersByElement.get(n);if(a){const l=!r||r==$x;a.forEach(c=>{c.queued||!l&&c.triggerName!=s||o.push(c)})}}return(i||s)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||s&&s!=a.triggerName))),o}_beforeAnimationBuild(n,e,i){const r=e.element,o=e.isRemovalTransition?void 0:n,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const c=l.element,u=c!==r,d=Xc(i,c,[]);this._getPreviousPlayers(c,u,o,a,e.toState).forEach(p=>{const f=p.getRealPlayer();f.beforeDestroy&&f.beforeDestroy(),p.destroy(),d.push(p)})}hb(r,e.fromStyles)}_buildAnimation(n,e,i,s,r,o){const a=e.triggerName,l=e.element,c=[],u=new Set,d=new Set,h=e.timelines.map(f=>{const g=f.element;u.add(g);const v=g[Hd];if(v&&v.removedBeforeQueried)return new Fx(f.duration,f.delay);const y=g!==l,w=function mBe(t){const n=[];return tre(t,n),n}((i.get(g)||aBe).map(N=>N.getRealPlayer())).filter(N=>!!N.element&&N.element===g),x=r.get(g),T=o.get(g),k=Nse(this._normalizer,f.keyframes,x,T),R=this._buildPlayer(f,k,w);if(f.subTimeline&&s&&d.add(g),y){const N=new AB(n,a,g);N.setRealPlayer(R),c.push(N)}return R});c.forEach(f=>{Xc(this.playersByQueriedElement,f.element,[]).push(f),f.onDone(()=>function dBe(t,n,e){let i=t.get(n);if(i){if(i.length){const s=i.indexOf(e);i.splice(s,1)}0==i.length&&t.delete(n)}return i}(this.playersByQueriedElement,f.element,f))}),u.forEach(f=>Lu(f,$se));const p=Am(h);return p.onDestroy(()=>{u.forEach(f=>q1(f,$se)),Bh(l,e.toStyles)}),d.forEach(f=>{Xc(s,f,[]).push(p)}),p}_buildPlayer(n,e,i){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,i):new Fx(n.duration,n.delay)}}class AB{constructor(n,e,i){this.namespaceId=n,this.triggerName=e,this.element=i,this._player=new Fx,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,i)=>{e.forEach(s=>lB(n,i,void 0,s))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){Xc(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const e=this._player;e.triggerCallback&&e.triggerCallback(n)}}function _M(t){return t&&1===t.nodeType}function Qse(t,n){const e=t.style.display;return t.style.display=n??"none",e}function Jse(t,n,e,i,s){const r=[];e.forEach(l=>r.push(Qse(l)));const o=[];i.forEach((l,c)=>{const u=new Map;l.forEach(d=>{const h=n.computeStyle(c,d,s);u.set(d,h),(!h||0==h.length)&&(c[Hd]=lBe,o.push(c))}),t.set(c,u)});let a=0;return e.forEach(l=>Qse(l,r[a++])),o}function ere(t,n){const e=new Map;if(t.forEach(a=>e.set(a,[])),0==n.length)return e;const s=new Set(n),r=new Map;function o(a){if(!a)return 1;let l=r.get(a);if(l)return l;const c=a.parentNode;return l=e.has(c)?c:s.has(c)?1:o(c),r.set(a,l),l}return n.forEach(a=>{const l=o(a);1!==l&&e.get(l).push(a)}),e}function Lu(t,n){t.classList?.add(n)}function q1(t,n){t.classList?.remove(n)}function fBe(t,n,e){Am(e).onDone(()=>t.processLeaveNode(n))}function tre(t,n){for(let e=0;e<t.length;e++){const i=t[e];i instanceof Ase?tre(i.players,n):n.push(i)}}function nre(t,n,e){const i=e.get(t);if(!i)return!1;let s=n.get(t);return s?i.forEach(r=>s.add(r)):n.set(t,i),e.delete(t),!0}class Bx{constructor(n,e,i){this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(s,r)=>{},this._transitionEngine=new uBe(n.body,e,i),this._timelineEngine=new nBe(n.body,e,i),this._transitionEngine.onRemovalComplete=(s,r)=>this.onRemovalComplete(s,r)}registerTrigger(n,e,i,s,r){const o=n+"-"+s;let a=this._triggerCache[o];if(!a){const l=[],u=wB(this._driver,r,l,[]);if(l.length)throw function r5e(){return new Fe(3404,!1)}();a=function Q5e(t,n,e){return new J5e(t,n,e)}(s,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,s,a)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,i,s){this._transitionEngine.insertNode(n,e,i,s)}onRemove(n,e,i){this._transitionEngine.removeNode(n,e,i)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,i,s){if("@"==i.charAt(0)){const[r,o]=Ose(i);this._timelineEngine.command(r,e,o,s)}else this._transitionEngine.trigger(n,e,i,s)}listen(n,e,i,s,r){if("@"==i.charAt(0)){const[o,a]=Ose(i);return this._timelineEngine.listen(o,e,a,r)}return this._transitionEngine.listen(n,e,i,s,r)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}}class Vx{static#e=this.initialStylesByElement=new WeakMap;constructor(n,e,i){this._element=n,this._startStyles=e,this._endStyles=i,this._state=0;let s=Vx.initialStylesByElement.get(n);s||Vx.initialStylesByElement.set(n,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Bh(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Bh(this._element,this._initialStyles),this._endStyles&&(Bh(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Vx.initialStylesByElement.delete(this._element),this._startStyles&&(hb(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(hb(this._element,this._endStyles),this._endStyles=null),Bh(this._element,this._initialStyles),this._state=3)}}function MB(t){let n=null;return t.forEach((e,i)=>{(function bBe(t){return"display"===t||"position"===t})(i)&&(n=n||new Map,n.set(i,e))}),n}class ire{constructor(n,e,i,s){this.element=n,this.keyframes=e,this.options=i,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map;const e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const e=[];return n.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(n,e,i){return n.animate(this._convertKeyframesToObject(e),i)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,s)=>{"offset"!==s&&n.set(s,this._finished?i:yB(this.element,s))}),this.currentSnapshot=n}triggerCallback(n){const e="start"===n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class sre{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}containsElement(n,e){return Fse(n,e)}getParentElement(n){return dB(n)}query(n,e,i){return Lse(n,e,i)}computeStyle(n,e,i){return yB(n,e)}animate(n,e,i,s,r,o=[]){const l={duration:i,delay:s,fill:0==s?"both":"forwards"};r&&(l.easing=r);const c=new Map,u=o.filter(p=>p instanceof ire);(function D5e(t,n){return 0===t||0===n})(i,s)&&u.forEach(p=>{p.currentSnapshot.forEach((f,g)=>c.set(g,f))});let d=function T5e(t){return t.length?t[0]instanceof Map?t:t.map(n=>new Map(Object.entries(n))):[]}(e).map(p=>new Map(p));d=function A5e(t,n,e){if(e.size&&n.length){let i=n[0],s=[];if(e.forEach((r,o)=>{i.has(o)||s.push(o),i.set(o,r)}),s.length)for(let r=1;r<n.length;r++){let o=n[r];s.forEach(a=>o.set(a,yB(t,a)))}}return n}(n,d,c);const h=function gBe(t,n){let e=null,i=null;return Array.isArray(n)&&n.length?(e=MB(n[0]),n.length>1&&(i=MB(n[n.length-1]))):n instanceof Map&&(e=MB(n)),e||i?new Vx(t,e,i):null}(n,d);return new ire(n,d,l,h)}}const rre="@.disabled";class ore{constructor(n,e,i,s){this.namespaceId=n,this.delegate=e,this.engine=i,this._onDestroy=s,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,i,s=!0){this.delegate.insertBefore(n,e,i),this.engine.onInsert(this.namespaceId,e,n,s)}removeChild(n,e,i){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,i,s){this.delegate.setAttribute(n,e,i,s)}removeAttribute(n,e,i){this.delegate.removeAttribute(n,e,i)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,i,s){this.delegate.setStyle(n,e,i,s)}removeStyle(n,e,i){this.delegate.removeStyle(n,e,i)}setProperty(n,e,i){"@"==e.charAt(0)&&e==rre?this.disableAnimations(n,!!i):this.delegate.setProperty(n,e,i)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,i){return this.delegate.listen(n,e,i)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}}class vBe extends ore{constructor(n,e,i,s,r){super(e,i,s,r),this.factory=n,this.namespaceId=e}setProperty(n,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==rre?this.disableAnimations(n,i=void 0===i||!!i):this.engine.process(this.namespaceId,n,e.slice(1),i):this.delegate.setProperty(n,e,i)}listen(n,e,i){if("@"==e.charAt(0)){const s=function yBe(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(n);let r=e.slice(1),o="";return"@"!=r.charAt(0)&&([r,o]=function wBe(t){const n=t.indexOf(".");return[t.substring(0,n),t.slice(n+1)]}(r)),this.engine.listen(this.namespaceId,s,r,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(n,e,i)}}class CBe{constructor(n,e,i){this.delegate=n,this.engine=e,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=(s,r)=>{r?.removeChild(null,s)}}createRenderer(n,e){const s=this.delegate.createRenderer(n,e);if(!n||!e?.data?.animation){const c=this._rendererCache;let u=c.get(s);return u||(u=new ore("",s,this.engine,()=>c.delete(s)),c.set(s,u)),u}const r=e.id,o=e.id+"-"+this._currentId;this._currentId++,this.engine.register(o,n);const a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(r,o,n,c.name,c)};return e.data.animation.forEach(a),new vBe(this,o,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(n,e,i){if(n>=0&&n<this._microtaskId)return void this._zone.run(()=>e(i));const s=this._animationCallbacksBuffer;0==s.length&&queueMicrotask(()=>{this._zone.run(()=>{s.forEach(r=>{const[o,a]=r;o(a)}),this._animationCallbacksBuffer=[]})}),s.push([e,i])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}let SBe=(()=>{class t extends Bx{constructor(e,i,s){super(e,i,s)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Yn),ae(pB),ae(fB))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const are=[{provide:fB,useFactory:function xBe(){return new zse}},{provide:Bx,useClass:SBe},{provide:nA,useFactory:function EBe(t,n,e){return new CBe(t,n,e)},deps:[nB,Bx,Lt]}],NB=[{provide:pB,useFactory:()=>new sre},{provide:ua,useValue:"BrowserAnimations"},...are],lre=[{provide:pB,useClass:hB},{provide:ua,useValue:"NoopAnimations"},...are];let TBe=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?lre:NB}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:NB,imports:[Ise]})}return t})();function cre(t,n,e,i,s,r,o){try{var a=t[r](o),l=a.value}catch(c){return void e(c)}a.done?n(l):Promise.resolve(l).then(i,s)}function z(t){return function(){var n=this,e=arguments;return new Promise(function(i,s){var r=t.apply(n,e);function o(l){cre(r,i,s,o,a,"next",l)}function a(l){cre(r,i,s,o,a,"throw",l)}o(void 0)})}}function K1(t){return t&&"function"==typeof t.schedule}const ure=t=>n=>{for(let e=0,i=t.length;e<i&&!n.closed;e++)n.next(t[e]);n.complete()};function OB(t,n){return new Pn(e=>{const i=new rn;let s=0;return i.add(n.schedule(function(){s!==t.length?(e.next(t[s++]),e.closed||i.add(this.schedule())):e.complete()})),i})}function bM(t,n){return n?OB(t,n):new Pn(ure(t))}function Ge(...t){let n=t[t.length-1];return K1(n)?(t.pop(),OB(t,n)):bM(t)}const Mm=function kBe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),dre=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function hre(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const RB=t=>{if(t&&"function"==typeof t[jp])return(t=>n=>{const e=t[jp]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(n)})(t);if(dre(t))return ure(t);if(hre(t))return(t=>n=>(t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,tc),n))(t);if(t&&"function"==typeof t[Mm])return(t=>n=>{const e=t[Mm]();for(;;){let i;try{i=e.next()}catch(s){return n.error(s),n}if(i.done){n.complete();break}if(n.next(i.value),n.closed)break}return"function"==typeof e.return&&n.add(()=>{e.return&&e.return()}),n})(t);{const e=`You provided ${zp(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(e)}};function ao(t,n){return n?function LBe(t,n){if(null!=t){if(function RBe(t){return t&&"function"==typeof t[jp]}(t))return function MBe(t,n){return new Pn(e=>{const i=new rn;return i.add(n.schedule(()=>{const s=t[jp]();i.add(s.subscribe({next(r){i.add(n.schedule(()=>e.next(r)))},error(r){i.add(n.schedule(()=>e.error(r)))},complete(){i.add(n.schedule(()=>e.complete()))}}))})),i})}(t,n);if(hre(t))return function NBe(t,n){return new Pn(e=>{const i=new rn;return i.add(n.schedule(()=>t.then(s=>{i.add(n.schedule(()=>{e.next(s),i.add(n.schedule(()=>e.complete()))}))},s=>{i.add(n.schedule(()=>e.error(s)))}))),i})}(t,n);if(dre(t))return OB(t,n);if(function FBe(t){return t&&"function"==typeof t[Mm]}(t)||"string"==typeof t)return function OBe(t,n){if(!t)throw new Error("Iterable cannot be null");return new Pn(e=>{const i=new rn;let s;return i.add(()=>{s&&"function"==typeof s.return&&s.return()}),i.add(n.schedule(()=>{s=t[Mm](),i.add(n.schedule(function(){if(e.closed)return;let r,o;try{const a=s.next();r=a.value,o=a.done}catch(a){return void e.error(a)}o?e.complete():(e.next(r),this.schedule())}))})),i})}(t,n)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,n):t instanceof Pn?t:new Pn(RB(t))}class Nm extends Mi{constructor(n){super(),this.parent=n}_next(n){this.parent.notifyNext(n)}_error(n){this.parent.notifyError(n),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Om extends Mi{notifyNext(n){this.destination.next(n)}notifyError(n){this.destination.error(n)}notifyComplete(){this.destination.complete()}}function Rm(t,n){if(n.closed)return;if(t instanceof Pn)return t.subscribe(n);let e;try{e=RB(t)(n)}catch(i){n.error(i)}return e}function ml(t,n,e=Number.POSITIVE_INFINITY){return"function"==typeof n?i=>i.pipe(ml((s,r)=>ao(t(s,r)).pipe(me((o,a)=>n(s,o,r,a))),e)):("number"==typeof n&&(e=n),i=>i.lift(new PBe(t,e)))}class PBe{constructor(n,e=Number.POSITIVE_INFINITY){this.project=n,this.concurrent=e}call(n,e){return e.subscribe(new $Be(n,this.project,this.concurrent))}}class $Be extends Om{constructor(n,e,i=Number.POSITIVE_INFINITY){super(n),this.project=e,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(n){this.active<this.concurrent?this._tryNext(n):this.buffer.push(n)}_tryNext(n){let e;const i=this.index++;try{e=this.project(n,i)}catch(s){return void this.destination.error(s)}this.active++,this._innerSub(e)}_innerSub(n){const e=new Nm(this),i=this.destination;i.add(e);const s=Rm(n,e);s!==e&&i.add(s)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(n){this.destination.next(n)}notifyComplete(){const n=this.buffer;this.active--,n.length>0?this._next(n.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function fb(t,n){return ml(t,n,1)}function Zt(t,n){return function(i){return i.lift(new BBe(t,n))}}class BBe{constructor(n,e){this.predicate=n,this.thisArg=e}call(n,e){return e.subscribe(new VBe(n,this.predicate,this.thisArg))}}class VBe extends Mi{constructor(n,e,i){super(n),this.predicate=e,this.thisArg=i,this.count=0}_next(n){let e;try{e=this.predicate.call(this.thisArg,n,this.count++)}catch(i){return void this.destination.error(i)}e&&this.destination.next(n)}}function zx(t){return n=>n.lift(new zBe(t))}class zBe{constructor(n){this.callback=n}call(n,e){return e.subscribe(new UBe(n,this.callback))}}class UBe extends Mi{constructor(n,e){super(n),this.add(new rn(e))}}function Kt(t,n){return"function"==typeof n?e=>e.pipe(Kt((i,s)=>ao(t(i,s)).pipe(me((r,o)=>n(i,r,s,o))))):e=>e.lift(new GBe(t))}class GBe{constructor(n){this.project=n}call(n,e){return e.subscribe(new jBe(n,this.project))}}class jBe extends Om{constructor(n,e){super(n),this.project=e,this.index=0}_next(n){let e;const i=this.index++;try{e=this.project(n,i)}catch(s){return void this.destination.error(s)}this._innerSub(e)}_innerSub(n){const e=this.innerSubscription;e&&e.unsubscribe();const i=new Nm(this),s=this.destination;s.add(i),this.innerSubscription=Rm(n,i),this.innerSubscription!==i&&s.add(this.innerSubscription)}_complete(){const{innerSubscription:n}=this;(!n||n.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(n){this.destination.next(n)}}class vM{}class yM{}class Pu{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const s=e.slice(0,i),r=s.toLowerCase(),o=e.slice(i+1).trim();this.maybeSetNormalizedName(s,r),this.headers.has(r)?this.headers.get(r).push(o):this.headers.set(r,[o])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof Pu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new Pu;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Pu?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(n.name,e);const s=("a"===n.op?this.headers.get(e):void 0)||[];s.push(...i),this.headers.set(e,s);break;case"d":const r=n.value;if(r){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===r.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(n,e){const i=(Array.isArray(e)?e:[e]).map(r=>r.toString()),s=n.toLowerCase();this.headers.set(s,i),this.maybeSetNormalizedName(n,s)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class HBe{encodeKey(n){return pre(n)}encodeValue(n){return pre(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const qBe=/%(\d[a-f0-9])/gi,KBe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function pre(t){return encodeURIComponent(t).replace(qBe,(n,e)=>KBe[e]??n)}function wM(t){return`${t}`}class Fm{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new HBe,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function WBe(t,n){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(s=>{const r=s.indexOf("="),[o,a]=-1==r?[n.decodeKey(s),""]:[n.decodeKey(s.slice(0,r)),n.decodeValue(s.slice(r+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const i=n.fromObject[e],s=Array.isArray(i)?i.map(wM):[wM(i)];this.map.set(e,s)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(i=>{const s=n[i];Array.isArray(s)?s.forEach(r=>{e.push({param:i,value:r,op:"a"})}):e.push({param:i,value:s,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new Fm({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(wM(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let i=this.map.get(n.param)||[];const s=i.indexOf(wM(n.value));-1!==s&&i.splice(s,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class XBe{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function fre(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function mre(t){return typeof Blob<"u"&&t instanceof Blob}function _re(t){return typeof FormData<"u"&&t instanceof FormData}class Ux{constructor(n,e,i,s){let r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function YBe(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==i?i:null,r=s):r=i,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params),this.transferCache=r.transferCache),this.headers??=new Pu,this.context??=new XBe,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new Fm,this.urlWithParams=e}serializeBody(){return null===this.body?null:"string"==typeof this.body||fre(this.body)||mre(this.body)||_re(this.body)||function ZBe(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Fm?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||_re(this.body)?null:mre(this.body)?this.body.type||null:fre(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Fm?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,i=n.url||this.url,s=n.responseType||this.responseType,r=n.transferCache??this.transferCache,o=void 0!==n.body?n.body:this.body,a=n.withCredentials??this.withCredentials,l=n.reportProgress??this.reportProgress;let c=n.headers||this.headers,u=n.params||this.params;const d=n.context??this.context;return void 0!==n.setHeaders&&(c=Object.keys(n.setHeaders).reduce((h,p)=>h.set(p,n.setHeaders[p]),c)),n.setParams&&(u=Object.keys(n.setParams).reduce((h,p)=>h.set(p,n.setParams[p]),u)),new Ux(e,i,o,{params:u,headers:c,context:d,reportProgress:l,responseType:s,withCredentials:a,transferCache:r})}}var Lm=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Lm||{});class FB{constructor(n,e=200,i="OK"){this.headers=n.headers||new Pu,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class CM extends FB{constructor(n={}){super(n),this.type=Lm.ResponseHeader}clone(n={}){return new CM({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class mb extends FB{constructor(n={}){super(n),this.type=Lm.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new mb({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class _b extends FB{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function LB(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}let bre=(()=>{class t{constructor(e){this.handler=e}request(e,i,s={}){let r;if(e instanceof Ux)r=e;else{let l,c;l=s.headers instanceof Pu?s.headers:new Pu(s.headers),s.params&&(c=s.params instanceof Fm?s.params:new Fm({fromObject:s.params})),r=new Ux(e,i,void 0!==s.body?s.body:null,{headers:l,context:s.context,params:c,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}const o=Ge(r).pipe(fb(l=>this.handler.handle(l)));if(e instanceof Ux||"events"===s.observe)return o;const a=o.pipe(Zt(l=>l instanceof mb));switch(s.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return a.pipe(me(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(me(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(me(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(me(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Fm).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,s={}){return this.request("PATCH",e,LB(s,i))}post(e,i,s={}){return this.request("POST",e,LB(s,i))}put(e,i,s={}){return this.request("PUT",e,LB(s,i))}static#e=this.\u0275fac=function(i){return new(i||t)(ae(vM))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const e6e=/^\)\]\}',?\n/;function vre(t){if(t.url)return t.url;const n="X-Request-URL".toLocaleLowerCase();return t.headers.get(n)}let PB=(()=>{class t{constructor(){this.fetchImpl=xe(n6e,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e)),this.ngZone=xe(Lt)}handle(e){return new Pn(i=>{const s=new AbortController;return this.doRequest(e,s.signal,i).then($B,r=>i.error(new _b({error:r}))),()=>s.abort()})}doRequest(e,i,s){var r=this;return z(function*(){const o=r.createRequestInit(e);let a;try{const f=r.ngZone.runOutsideAngular(()=>r.fetchImpl(e.urlWithParams,{signal:i,...o}));(function i6e(t){t.then($B,$B)})(f),s.next({type:Lm.Sent}),a=yield f}catch(f){return void s.error(new _b({error:f,status:f.status??0,statusText:f.statusText,url:e.urlWithParams,headers:f.headers}))}const l=new Pu(a.headers),c=a.statusText,u=vre(a)??e.urlWithParams;let d=a.status,h=null;if(e.reportProgress&&s.next(new CM({headers:l,status:d,statusText:c,url:u})),a.body){const f=a.headers.get("content-length"),g=[],v=a.body.getReader();let w,x,y=0;const T=typeof Zone<"u"&&Zone.current;yield r.ngZone.runOutsideAngular(z(function*(){for(;;){const{done:R,value:N}=yield v.read();if(R)break;if(g.push(N),y+=N.length,e.reportProgress){x="text"===e.responseType?(x??"")+(w??=new TextDecoder).decode(N,{stream:!0}):void 0;const D=()=>s.next({type:Lm.DownloadProgress,total:f?+f:void 0,loaded:y,partialText:x});T?T.run(D):D()}}}));const k=r.concatChunks(g,y);try{const R=a.headers.get("Content-Type")??"";h=r.parseBody(e,k,R)}catch(R){return void s.error(new _b({error:R,headers:new Pu(a.headers),status:a.status,statusText:a.statusText,url:vre(a)??e.urlWithParams}))}}0===d&&(d=h?200:0),d>=200&&d<300?(s.next(new mb({body:h,headers:l,status:d,statusText:c,url:u})),s.complete()):s.error(new _b({error:h,headers:l,status:d,statusText:c,url:u}))})()}parseBody(e,i,s){switch(e.responseType){case"json":const r=(new TextDecoder).decode(i).replace(e6e,"");return""===r?null:JSON.parse(r);case"text":return(new TextDecoder).decode(i);case"blob":return new Blob([i],{type:s});case"arraybuffer":return i.buffer}}createRequestInit(e){const i={},s=e.withCredentials?"include":void 0;if(e.headers.forEach((r,o)=>i[r]=o.join(",")),e.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){const r=e.detectContentTypeHeader();null!==r&&(i["Content-Type"]=r)}return{body:e.serializeBody(),method:e.method,headers:i,credentials:s}}concatChunks(e,i){const s=new Uint8Array(i);let r=0;for(const o of e)s.set(o,r),r+=o.length;return s}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();class n6e{}function $B(){}function yre(t,n){return n(t)}function s6e(t,n){return(e,i)=>n.intercept(e,{handle:s=>t(s,i)})}const o6e=new Ne(""),Gx=new Ne(""),wre=new Ne(""),Cre=new Ne("",{providedIn:"root",factory:()=>!0});function a6e(){let t=null;return(n,e)=>{null===t&&(t=(xe(o6e,{optional:!0})??[]).reduceRight(s6e,yre));const i=xe(ef);if(xe(Cre)){const r=i.add();return t(n,e).pipe(zx(()=>i.remove(r)))}return t(n,e)}}let Sre=(()=>{class t extends vM{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=xe(ef),this.contributeToStability=xe(Cre)}handle(e){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(Gx),...this.injector.get(wre,[])]));this.chain=i.reduceRight((s,r)=>function r6e(t,n,e){return(i,s)=>Dh(e,()=>n(i,r=>t(r,s)))}(s,r,this.injector),yre)}if(this.contributeToStability){const i=this.pendingTasks.add();return this.chain(e,s=>this.backend.handle(s)).pipe(zx(()=>this.pendingTasks.remove(i)))}return this.chain(e,i=>this.backend.handle(i))}static#e=this.\u0275fac=function(i){return new(i||t)(ae(yM),ae(ul))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const h6e=/^\)\]\}',?\n/;let Ere=(()=>{class t{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Fe(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?ao(i.\u0275loadImpl()):Ge(null)).pipe(Kt(()=>new Pn(r=>{const o=i.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((g,v)=>o.setRequestHeader(g,v.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const g=e.detectContentTypeHeader();null!==g&&o.setRequestHeader("Content-Type",g)}if(e.responseType){const g=e.responseType.toLowerCase();o.responseType="json"!==g?g:"text"}const a=e.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const g=o.statusText||"OK",v=new Pu(o.getAllResponseHeaders()),y=function p6e(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(o)||e.url;return l=new CM({headers:v,status:o.status,statusText:g,url:y}),l},u=()=>{let{headers:g,status:v,statusText:y,url:w}=c(),x=null;204!==v&&(x=typeof o.response>"u"?o.responseText:o.response),0===v&&(v=x?200:0);let T=v>=200&&v<300;if("json"===e.responseType&&"string"==typeof x){const k=x;x=x.replace(h6e,"");try{x=""!==x?JSON.parse(x):null}catch(R){x=k,T&&(T=!1,x={error:R,text:x})}}T?(r.next(new mb({body:x,headers:g,status:v,statusText:y,url:w||void 0})),r.complete()):r.error(new _b({error:x,headers:g,status:v,statusText:y,url:w||void 0}))},d=g=>{const{url:v}=c(),y=new _b({error:g,status:o.status||0,statusText:o.statusText||"Unknown Error",url:v||void 0});r.error(y)};let h=!1;const p=g=>{h||(r.next(c()),h=!0);let v={type:Lm.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),"text"===e.responseType&&o.responseText&&(v.partialText=o.responseText),r.next(v)},f=g=>{let v={type:Lm.UploadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),r.next(v)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),e.reportProgress&&(o.addEventListener("progress",p),null!==a&&o.upload&&o.upload.addEventListener("progress",f)),o.send(a),r.next({type:Lm.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",d),e.reportProgress&&(o.removeEventListener("progress",p),null!==a&&o.upload&&o.upload.removeEventListener("progress",f)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||t)(ae(ose))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const BB=new Ne(""),Tre=new Ne("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Ire=new Ne("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class kre{}let _6e=(()=>{class t{constructor(e,i,s){this.doc=e,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Zie(e,this.cookieName),this.lastCookieString=e),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Yn),ae(Au),ae(Tre))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();function g6e(t,n){const e=t.url.toLowerCase();if(!xe(BB)||"GET"===t.method||"HEAD"===t.method||e.startsWith("http://")||e.startsWith("https://"))return n(t);const i=xe(kre).getToken(),s=xe(Ire);return null!=i&&!t.headers.has(s)&&(t=t.clone({headers:t.headers.set(s,i)})),n(t)}var Pm=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(Pm||{});function Dre(...t){const n=[bre,Ere,Sre,{provide:vM,useExisting:Sre},{provide:yM,useFactory:()=>xe(PB,{optional:!0})??xe(Ere)},{provide:Gx,useValue:g6e,multi:!0},{provide:BB,useValue:!0},{provide:kre,useClass:_6e}];for(const e of t)n.push(...e.\u0275providers);return jy(n)}const Are=new Ne("");function Mre(){return function gb(t,n){return{\u0275kind:t,\u0275providers:n}}(Pm.LegacyInterceptors,[{provide:Are,useFactory:a6e},{provide:Gx,useExisting:Are,multi:!0}])}function $m(...t){if(1===t.length){const n=t[0];if(Fc(n))return xM(n,null);if(zp(n)&&Object.getPrototypeOf(n)===Object.prototype){const e=Object.keys(n);return xM(e.map(i=>n[i]),e)}}if("function"==typeof t[t.length-1]){const n=t.pop();return xM(t=1===t.length&&Fc(t[0])?t[0]:t,null).pipe(me(e=>n(...e)))}return xM(t,null)}function xM(t,n){return new Pn(e=>{const i=t.length;if(0===i)return void e.complete();const s=new Array(i);let r=0,o=0;for(let a=0;a<i;a++){const l=ao(t[a]);let c=!1;e.add(l.subscribe({next:u=>{c||(c=!0,o++),s[a]=u},error:u=>e.error(u),complete:()=>{r++,(r===i||!c)&&(o===i&&e.next(n?n.reduce((u,d,h)=>(u[d]=s[h],u),{}):s),e.complete())}}))}})}let Bre=(()=>{class t{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static#e=this.\u0275fac=function(i){return new(i||t)(I(Pd),I(vt))};static#t=this.\u0275dir=He({type:t})}return t})(),bb=(()=>{class t extends Bre{static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=$n(t)))(s||t)}})();static#t=this.\u0275dir=He({type:t,features:[Ze]})}return t})();const Ki=new Ne(""),I6e={provide:Ki,useExisting:wn(()=>Yr),multi:!0},D6e=new Ne("");let Yr=(()=>{class t extends Bre{constructor(e,i,s){super(e,i),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function k6e(){const t=km()?km().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static#e=this.\u0275fac=function(i){return new(i||t)(I(Pd),I(vt),I(D6e,8))};static#t=this.\u0275dir=He({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){1&i&&P("input",function(o){return s._handleInput(o.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(o){return s._compositionEnd(o.target.value)})},features:[bt([I6e]),Ze]})}return t})();function Bm(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function zre(t){return null!=t&&"number"==typeof t.length}const To=new Ne(""),Vm=new Ne(""),A6e=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Zr{static min(n){return function Ure(t){return n=>{if(Bm(n.value)||Bm(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null}}(n)}static max(n){return function Gre(t){return n=>{if(Bm(n.value)||Bm(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null}}(n)}static required(n){return function jre(t){return Bm(t.value)?{required:!0}:null}(n)}static requiredTrue(n){return function Hre(t){return!0===t.value?null:{required:!0}}(n)}static email(n){return function Wre(t){return Bm(t.value)||A6e.test(t.value)?null:{email:!0}}(n)}static minLength(n){return function qre(t){return n=>Bm(n.value)||!zre(n.value)?null:n.value.length<t?{minlength:{requiredLength:t,actualLength:n.value.length}}:null}(n)}static maxLength(n){return Kre(n)}static pattern(n){return function Xre(t){if(!t)return EM;let n,e;return"string"==typeof t?(e="","^"!==t.charAt(0)&&(e+="^"),e+=t,"$"!==t.charAt(t.length-1)&&(e+="$"),n=new RegExp(e)):(e=t.toString(),n=t),i=>{if(Bm(i.value))return null;const s=i.value;return n.test(s)?null:{pattern:{requiredPattern:e,actualValue:s}}}}(n)}static nullValidator(n){return null}static compose(n){return toe(n)}static composeAsync(n){return noe(n)}}function Kre(t){return n=>zre(n.value)&&n.value.length>t?{maxlength:{requiredLength:t,actualLength:n.value.length}}:null}function EM(t){return null}function Yre(t){return null!=t}function Zre(t){return xx(t)?ao(t):t}function Qre(t){let n={};return t.forEach(e=>{n=null!=e?{...n,...e}:n}),0===Object.keys(n).length?null:n}function Jre(t,n){return n.map(e=>e(t))}function eoe(t){return t.map(n=>function M6e(t){return!t.validate}(n)?n:e=>n.validate(e))}function toe(t){if(!t)return null;const n=t.filter(Yre);return 0==n.length?null:function(e){return Qre(Jre(e,n))}}function VB(t){return null!=t?toe(eoe(t)):null}function noe(t){if(!t)return null;const n=t.filter(Yre);return 0==n.length?null:function(e){return $m(Jre(e,n).map(Zre)).pipe(me(Qre))}}function zB(t){return null!=t?noe(eoe(t)):null}function ioe(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function soe(t){return t._rawValidators}function roe(t){return t._rawAsyncValidators}function UB(t){return t?Array.isArray(t)?t:[t]:[]}function TM(t,n){return Array.isArray(t)?t.includes(n):t===n}function ooe(t,n){const e=UB(n);return UB(t).forEach(s=>{TM(e,s)||e.push(s)}),e}function aoe(t,n){return UB(n).filter(e=>!TM(t,e))}class loe{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=VB(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=zB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class Ol extends loe{get formDirective(){return null}get path(){return null}}class lc extends loe{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class coe{constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let pi=(()=>{class t extends coe{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||t)(I(lc,2))};static#t=this.\u0275dir=He({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){2&i&&Oe("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Ze]})}return t})(),cc=(()=>{class t extends coe{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||t)(I(Ol,10))};static#t=this.\u0275dir=He({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){2&i&&Oe("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Ze]})}return t})();const jx="VALID",kM="INVALID",X1="PENDING",Hx="DISABLED";class Y1{}class doe extends Y1{constructor(n,e){super(),this.value=n,this.source=e}}class HB extends Y1{constructor(n,e){super(),this.pristine=n,this.source=e}}class WB extends Y1{constructor(n,e){super(),this.touched=n,this.source=e}}class DM extends Y1{constructor(n,e){super(),this.status=n,this.source=e}}class L6e extends Y1{constructor(n){super(),this.source=n}}class P6e extends Y1{constructor(n){super(),this.source=n}}function qB(t){return(AM(t)?t.validators:t)||null}function KB(t,n){return(AM(n)?n.asyncValidators:t)||null}function AM(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class XB{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ob(()=>this.statusReactive()),this.statusReactive=xm(void 0),this._pristine=ob(()=>this.pristineReactive()),this.pristineReactive=xm(!0),this._touched=ob(()=>this.touchedReactive()),this.touchedReactive=xm(!1),this._events=new ot,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return Ud(this.statusReactive)}set status(n){Ud(()=>this.statusReactive.set(n))}get valid(){return this.status===jx}get invalid(){return this.status===kM}get pending(){return this.status==X1}get disabled(){return this.status===Hx}get enabled(){return this.status!==Hx}get pristine(){return Ud(this.pristineReactive)}set pristine(n){Ud(()=>this.pristineReactive.set(n))}get dirty(){return!this.pristine}get touched(){return Ud(this.touchedReactive)}set touched(n){Ud(()=>this.touchedReactive.set(n))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(ooe(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(ooe(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(aoe(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(aoe(n,this._rawAsyncValidators))}hasValidator(n){return TM(this._rawValidators,n)}hasAsyncValidator(n){return TM(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){const e=!1===this.touched;this.touched=!0;const i=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched({...n,sourceControl:i}),e&&!1!==n.emitEvent&&this._events.next(new WB(!0,i))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(n))}markAsUntouched(n={}){const e=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const i=n.sourceControl??this;this._forEachChild(s=>{s.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:i})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,i),e&&!1!==n.emitEvent&&this._events.next(new WB(!1,i))}markAsDirty(n={}){const e=!0===this.pristine;this.pristine=!1;const i=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty({...n,sourceControl:i}),e&&!1!==n.emitEvent&&this._events.next(new HB(!1,i))}markAsPristine(n={}){const e=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const i=n.sourceControl??this;this._forEachChild(s=>{s.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,i),e&&!1!==n.emitEvent&&this._events.next(new HB(!0,i))}markAsPending(n={}){this.status=X1;const e=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new DM(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending({...n,sourceControl:e})}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Hx,this.errors=null,this._forEachChild(s=>{s.disable({...n,onlySelf:!0})}),this._updateValue();const i=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new doe(this.value,i)),this._events.next(new DM(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:e},this),this._onDisabledChange.forEach(s=>s(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=jx,this._forEachChild(i=>{i.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:e},this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n,e){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jx||this.status===X1)&&this._runAsyncValidator(i,n.emitEvent)}const e=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new doe(this.value,e)),this._events.next(new DM(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity({...n,sourceControl:e})}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hx:jx}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,e){if(this.asyncValidator){this.status=X1,this._hasOwnPendingAsyncValidator={emitEvent:!1!==e};const i=Zre(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(s=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(s,{emitEvent:e,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent,this,e.shouldHaveEmitted)}get(n){let e=n;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,s)=>i&&i._find(s),this)}getError(n,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,e,i){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||i)&&this._events.next(new DM(this.status,e)),this._parent&&this._parent._updateControlsErrors(n,e,i)}_initObservables(){this.valueChanges=new Ae,this.statusChanges=new Ae}_calculateStatus(){return this._allControlsDisabled()?Hx:this.errors?kM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(X1)?X1:this._anyControlsHaveStatus(kM)?kM:jx}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,e){const i=!this._anyControlsDirty(),s=this.pristine!==i;this.pristine=i,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,e),s&&this._events.next(new HB(this.pristine,e))}_updateTouched(n={},e){this.touched=this._anyControlsTouched(),this._events.next(new WB(this.touched,e)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,e)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){AM(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function $6e(t){return Array.isArray(t)?VB(t):t||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function B6e(t){return Array.isArray(t)?zB(t):t||null}(this._rawAsyncValidators)}}class Rl extends XB{constructor(n,e,i){super(qB(e),KB(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){(function poe(t,n,e){t._forEachChild((i,s)=>{if(void 0===e[s])throw new Fe(1002,"")})})(this,0,n),Object.keys(n).forEach(i=>{(function hoe(t,n,e){const i=t.controls;if(!(n?Object.keys(i):i).length)throw new Fe(1e3,"");if(!i[e])throw new Fe(1001,"")})(this,!0,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(i=>{const s=this.controls[i];s&&s.patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,s)=>{i.reset(n?n[s]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&n(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,s)=>((i.enabled||this.disabled)&&(e[s]=i.value),e))}_reduceChildren(n,e){let i=n;return this._forEachChild((s,r)=>{i=e(i,s,r)}),i}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}const vb=new Ne("CallSetDisabledState",{providedIn:"root",factory:()=>Wx}),Wx="always";function MM(t,n){return[...n.path,t]}function qx(t,n,e=Wx){YB(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||"always"===e)&&n.valueAccessor.setDisabledState?.(t.disabled),function U6e(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&foe(t,n)})}(t,n),function j6e(t,n){const e=(i,s)=>{n.valueAccessor.writeValue(i),s&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function G6e(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&foe(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function z6e(t,n){if(n.valueAccessor.setDisabledState){const e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function NM(t,n,e=!0){const i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),RM(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function OM(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function YB(t,n){const e=soe(t);null!==n.validator?t.setValidators(ioe(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const i=roe(t);null!==n.asyncValidator?t.setAsyncValidators(ioe(i,n.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const s=()=>t.updateValueAndValidity();OM(n._rawValidators,s),OM(n._rawAsyncValidators,s)}function RM(t,n){let e=!1;if(null!==t){if(null!==n.validator){const s=soe(t);if(Array.isArray(s)&&s.length>0){const r=s.filter(o=>o!==n.validator);r.length!==s.length&&(e=!0,t.setValidators(r))}}if(null!==n.asyncValidator){const s=roe(t);if(Array.isArray(s)&&s.length>0){const r=s.filter(o=>o!==n.asyncValidator);r.length!==s.length&&(e=!0,t.setAsyncValidators(r))}}}const i=()=>{};return OM(n._rawValidators,i),OM(n._rawAsyncValidators,i),e}function foe(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function moe(t,n){YB(t,n)}function QB(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}function _oe(t,n){t._syncPendingControls(),n.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function JB(t,n){if(!n)return null;let e,i,s;return Array.isArray(n),n.forEach(r=>{r.constructor===Yr?e=r:function q6e(t){return Object.getPrototypeOf(t.constructor)===bb}(r)?i=r:s=r}),s||i||e||null}const X6e={provide:Ol,useExisting:wn(()=>Z1)},Kx=Promise.resolve();let Z1=(()=>{class t extends Ol{get submitted(){return Ud(this.submittedReactive)}constructor(e,i,s){super(),this.callSetDisabledState=s,this._submitted=ob(()=>this.submittedReactive()),this.submittedReactive=xm(!1),this._directives=new Set,this.ngSubmit=new Ae,this.form=new Rl({},VB(e),zB(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Kx.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),qx(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Kx.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Kx.then(()=>{const i=this._findContainer(e.path),s=new Rl({});moe(s,e),i.registerControl(e.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Kx.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Kx.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),_oe(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static#e=this.\u0275fac=function(i){return new(i||t)(I(To,10),I(Vm,10),I(vb,8))};static#t=this.\u0275dir=He({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){1&i&&P("submit",function(o){return s.onSubmit(o)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[bt([X6e]),Ze]})}return t})();function goe(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function boe(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const Ke=class extends XB{constructor(n=null,e,i){super(qB(e),KB(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),AM(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=boe(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){goe(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){goe(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){boe(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};let voe=(()=>{class t extends Ol{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return MM(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=$n(t)))(s||t)}})();static#t=this.\u0275dir=He({type:t,features:[Ze]})}return t})();const Q6e={provide:lc,useExisting:wn(()=>Vi)},woe=Promise.resolve();let Vi=(()=>{class t extends lc{constructor(e,i,s,r,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new Ke,this._registered=!1,this.name="",this.update=new Ae,this._parent=e,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=JB(0,r)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),QB(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){qx(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){woe.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,s=0!==i&&ft(i);woe.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?MM(e,this._parent):[e]}static#e=this.\u0275fac=function(i){return new(i||t)(I(Ol,9),I(To,10),I(Vm,10),I(Ki,10),I(wi,8),I(vb,8))};static#t=this.\u0275dir=He({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[bt([Q6e]),Ze,Rn]})}return t})(),hf=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=He({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})();const J6e={provide:Ki,useExisting:wn(()=>e6),multi:!0};let e6=(()=>{class t extends bb{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=$n(t)))(s||t)}})();static#t=this.\u0275dir=He({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){1&i&&P("input",function(o){return s.onChange(o.target.value)})("blur",function(){return s.onTouched()})},features:[bt([J6e]),Ze]})}return t})();const t6=new Ne(""),sVe={provide:Ol,useExisting:wn(()=>pa)};let pa=(()=>{class t extends Ol{get submitted(){return Ud(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}constructor(e,i,s){super(),this.callSetDisabledState=s,this._submitted=ob(()=>this._submittedReactive()),this._submittedReactive=xm(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ae,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(RM(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return qx(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){NM(e.control||null,e,!1),function K6e(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),_oe(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new L6e(this.control)),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new P6e(this.form))}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,s=this.form.get(e.path);i!==s&&(NM(i||null,e),(t=>t instanceof Ke)(s)&&(qx(s,e,this.callSetDisabledState),e.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);moe(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function H6e(t,n){return RM(t,n)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){YB(this.form,this),this._oldForm&&RM(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||t)(I(To,10),I(Vm,10),I(vb,8))};static#t=this.\u0275dir=He({type:t,selectors:[["","formGroup",""]],hostBindings:function(i,s){1&i&&P("submit",function(o){return s.onSubmit(o)})("reset",function(){return s.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[bt([sVe]),Ze,Rn]})}return t})();const rVe={provide:Ol,useExisting:wn(()=>FM)};let FM=(()=>{class t extends voe{constructor(e,i,s){super(),this.name=null,this._parent=e,this._setValidators(i),this._setAsyncValidators(s)}_checkParentType(){Eoe(this._parent)}static#e=this.\u0275fac=function(i){return new(i||t)(I(Ol,13),I(To,10),I(Vm,10))};static#t=this.\u0275dir=He({type:t,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},features:[bt([rVe]),Ze]})}return t})();const oVe={provide:Ol,useExisting:wn(()=>n6)};let n6=(()=>{class t extends Ol{constructor(e,i,s){super(),this.name=null,this._parent=e,this._setValidators(i),this._setAsyncValidators(s)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return MM(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){Eoe(this._parent)}static#e=this.\u0275fac=function(i){return new(i||t)(I(Ol,13),I(To,10),I(Vm,10))};static#t=this.\u0275dir=He({type:t,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},features:[bt([oVe]),Ze]})}return t})();function Eoe(t){return!(t instanceof FM||t instanceof pa||t instanceof n6)}const aVe={provide:lc,useExisting:wn(()=>Fl)};let Fl=(()=>{class t extends lc{set isDisabled(e){}static#e=this._ngModelWarningSentOnce=!1;constructor(e,i,s,r,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new Ae,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=JB(0,r)}ngOnChanges(e){this._added||this._setUpControl(),QB(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return MM(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(i){return new(i||t)(I(Ol,13),I(To,10),I(Vm,10),I(Ki,10),I(t6,8))};static#n=this.\u0275dir=He({type:t,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[bt([aVe]),Ze,Rn]})}return t})();let yb=(()=>{class t{constructor(){this._validator=EM}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):EM,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=He({type:t,features:[Rn]})}return t})();const yVe={provide:To,useExisting:wn(()=>r6),multi:!0};let r6=(()=>{class t extends yb{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>function koe(t){return"number"==typeof t?t:parseInt(t,10)}(e),this.createValidator=e=>Kre(e)}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=$n(t)))(s||t)}})();static#t=this.\u0275dir=He({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,s){2&i&&wt("maxlength",s._enabled?s.maxlength:null)},inputs:{maxlength:"maxlength"},features:[bt([yVe]),Ze]})}return t})(),Foe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({})}return t})(),pf=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:vb,useValue:e.callSetDisabledState??Wx}]}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[Foe]})}return t})(),$u=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:t6,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:vb,useValue:e.callSetDisabledState??Wx}]}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[Foe]})}return t})();function Zc(t){return!!t&&(t instanceof Pn||"function"==typeof t.lift&&"function"==typeof t.subscribe)}class SVe extends Mi{notifyNext(n,e,i,s,r){this.destination.next(e)}notifyError(n,e){this.destination.error(n)}notifyComplete(n){this.destination.complete()}}class xVe extends Mi{constructor(n,e,i){super(),this.parent=n,this.outerValue=e,this.outerIndex=i,this.index=0}_next(n){this.parent.notifyNext(this.outerValue,n,this.outerIndex,this.index++,this)}_error(n){this.parent.notifyError(n,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function EVe(t,n,e,i,s=new xVe(t,e,i)){if(!s.closed)return n instanceof Pn?n.subscribe(s):RB(n)(s)}const Loe={};function Vt(...t){let n,e;return K1(t[t.length-1])&&(e=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Fc(t[0])&&(t=t[0]),bM(t,e).lift(new TVe(n))}class TVe{constructor(n){this.resultSelector=n}call(n,e){return e.subscribe(new IVe(n,this.resultSelector))}}class IVe extends SVe{constructor(n,e){super(n),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(n){this.values.push(Loe),this.observables.push(n)}_complete(){const n=this.observables,e=n.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let i=0;i<e;i++)this.add(EVe(this,n[i],void 0,i))}}notifyComplete(n){0==(this.active-=1)&&this.destination.complete()}notifyNext(n,e,i){const s=this.values,o=this.toRespond?s[i]===Loe?--this.toRespond:this.toRespond:0;s[i]=e,0===o&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}_tryResultSelector(n){let e;try{e=this.resultSelector.apply(this,n)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}const $M=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function Q1(t=Number.POSITIVE_INFINITY){return ml(lm,t)}function wb(...t){return function kVe(){return Q1(1)}()(Ge(...t))}const ff=new Pn(t=>t.complete());function BM(t){return t?function DVe(t){return new Pn(n=>t.schedule(()=>n.complete()))}(t):ff}function Vh(t){return new Pn(n=>{let e;try{e=t()}catch(s){return void n.error(s)}return(e?ao(e):BM()).subscribe(n)})}function zm(t,n){return new Pn(n?e=>n.schedule(AVe,0,{error:t,subscriber:e}):e=>e.error(t))}function AVe({error:t,subscriber:n}){n.error(t)}function o6(){return function(n){return n.lift(new MVe(n))}}class MVe{constructor(n){this.connectable=n}call(n,e){const{connectable:i}=this;i._refCount++;const s=new NVe(n,i),r=e.subscribe(s);return s.closed||(s.connection=i.connect()),r}}class NVe extends Mi{constructor(n,e){super(n),this.connectable=e}_unsubscribe(){const{connectable:n}=this;if(!n)return void(this.connection=null);this.connectable=null;const e=n._refCount;if(e<=0)return void(this.connection=null);if(n._refCount=e-1,e>1)return void(this.connection=null);const{connection:i}=this,s=n._connection;this.connection=null,s&&(!i||s===i)&&s.unsubscribe()}}class VM extends Pn{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let n=this._connection;return n||(this._isComplete=!1,n=this._connection=new rn,n.add(this.source.subscribe(new RVe(this.getSubject(),this))),n.closed&&(this._connection=null,n=rn.EMPTY)),n}refCount(){return o6()(this)}}const OVe=(()=>{const t=VM.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class RVe extends Iy{constructor(n,e){super(n),this.connectable=e}_error(n){this._unsubscribe(),super._error(n)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const n=this.connectable;if(n){this.connectable=null;const e=n._connection;n._refCount=0,n._subject=null,n._connection=null,e&&e.unsubscribe()}}}const Poe=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Zn(t){return n=>0===t?BM():n.lift(new LVe(t))}class LVe{constructor(n){if(this.total=n,this.total<0)throw new Poe}call(n,e){return e.subscribe(new PVe(n,this.total))}}class PVe extends Mi{constructor(n,e){super(n),this.total=e,this.count=0}_next(n){const e=this.total,i=++this.count;i<=e&&(this.destination.next(n),i===e&&(this.destination.complete(),this.unsubscribe()))}}function Uo(...t){const n=t[t.length-1];return K1(n)?(t.pop(),e=>wb(t,e,n)):e=>wb(t,e)}function Xx(t=null){return n=>n.lift(new $Ve(t))}class $Ve{constructor(n){this.defaultValue=n}call(n,e){return e.subscribe(new BVe(n,this.defaultValue))}}class BVe extends Mi{constructor(n,e){super(n),this.defaultValue=e,this.isEmpty=!0}_next(n){this.isEmpty=!1,this.destination.next(n)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function $oe(t=UVe){return n=>n.lift(new VVe(t))}class VVe{constructor(n){this.errorFactory=n}call(n,e){return e.subscribe(new zVe(n,this.errorFactory))}}class zVe extends Mi{constructor(n,e){super(n),this.errorFactory=e,this.hasValue=!1}_next(n){this.hasValue=!0,this.destination.next(n)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(e){n=e}this.destination.error(n)}}}function UVe(){return new $M}function as(t,n){const e=arguments.length>=2;return i=>i.pipe(t?Zt((s,r)=>t(s,r,i)):lm,Zn(1),e?Xx(n):$oe(()=>new $M))}function mf(){}function gi(t,n,e){return function(s){return s.lift(new GVe(t,n,e))}}class GVe{constructor(n,e,i){this.nextOrObserver=n,this.error=e,this.complete=i}call(n,e){return e.subscribe(new jVe(n,this.nextOrObserver,this.error,this.complete))}}class jVe extends Mi{constructor(n,e,i,s){super(n),this._tapNext=mf,this._tapError=mf,this._tapComplete=mf,this._tapError=i||mf,this._tapComplete=s||mf,Sd(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||mf,this._tapError=e.error||mf,this._tapComplete=e.complete||mf)}_next(n){try{this._tapNext.call(this._context,n)}catch(e){return void this.destination.error(e)}this.destination.next(n)}_error(n){try{this._tapError.call(this._context,n)}catch(e){return void this.destination.error(e)}this.destination.error(n)}_complete(){try{this._tapComplete.call(this._context)}catch(n){return void this.destination.error(n)}return this.destination.complete()}}function Xi(t){return function(e){const i=new HVe(t),s=e.lift(i);return i.caught=s}}class HVe{constructor(n){this.selector=n}call(n,e){return e.subscribe(new WVe(n,this.selector,this.caught))}}class WVe extends Om{constructor(n,e,i){super(n),this.selector=e,this.caught=i}error(n){if(!this.isStopped){let e;try{e=this.selector(n,this.caught)}catch(r){return void super.error(r)}this._unsubscribeAndRecycle();const i=new Nm(this);this.add(i);const s=Rm(e,i);s!==i&&this.add(s)}}}class KVe{constructor(n,e,i=!1){this.accumulator=n,this.seed=e,this.hasSeed=i}call(n,e){return e.subscribe(new XVe(n,this.accumulator,this.seed,this.hasSeed))}}class XVe extends Mi{constructor(n,e,i,s){super(n),this.accumulator=e,this._seed=i,this.hasSeed=s,this.index=0}get seed(){return this._seed}set seed(n){this.hasSeed=!0,this._seed=n}_next(n){if(this.hasSeed)return this._tryNext(n);this.seed=n,this.destination.next(n)}_tryNext(n){const e=this.index++;let i;try{i=this.accumulator(this.seed,n,e)}catch(s){this.destination.error(s)}this.seed=i,this.destination.next(i)}}function a6(t){return function(e){return 0===t?BM():e.lift(new YVe(t))}}class YVe{constructor(n){if(this.total=n,this.total<0)throw new Poe}call(n,e){return e.subscribe(new ZVe(n,this.total))}}class ZVe extends Mi{constructor(n,e){super(n),this.total=e,this.ring=new Array,this.count=0}_next(n){const e=this.ring,i=this.total,s=this.count++;e.length<i?e.push(n):e[s%i]=n}_complete(){const n=this.destination;let e=this.count;if(e>0){const i=this.count>=this.total?this.total:this.count,s=this.ring;for(let r=0;r<i;r++){const o=e++%i;n.next(s[o])}}n.complete()}}class eze{constructor(n){this.value=n}call(n,e){return e.subscribe(new tze(n,this.value))}}class tze extends Mi{constructor(n,e){super(n),this.value=e}_next(n){this.destination.next(this.value)}}function Ni(t){return n=>n.lift(new nze(t))}class nze{constructor(n){this.notifier=n}call(n,e){const i=new ize(n),s=Rm(this.notifier,new Nm(i));return s&&!i.seenValue?(i.add(s),e.subscribe(i)):i}}class ize extends Om{constructor(n){super(n),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}const Oi="primary",Yx=Symbol("RouteTitle");class sze{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function J1(t){return new sze(t)}function rze(t,n,e){const i=e.path.split("/");if(i.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||i.length<t.length))return null;const s={};for(let r=0;r<i.length;r++){const o=i[r],a=t[r];if(":"===o[0])s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:s}}function zh(t,n){const e=t?l6(t):void 0,i=n?l6(n):void 0;if(!e||!i||e.length!=i.length)return!1;let s;for(let r=0;r<e.length;r++)if(s=e[r],!Boe(t[s],n[s]))return!1;return!0}function l6(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Boe(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),i=[...n].sort();return e.every((s,r)=>i[r]===s)}return t===n}function Voe(t){return t.length>0?t[t.length-1]:null}function Um(t){return Zc(t)?t:xx(t)?ao(Promise.resolve(t)):Ge(t)}const aze={exact:function Goe(t,n,e){if(!Sb(t.segments,n.segments)||!zM(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!Goe(t.children[i],n.children[i],e))return!1;return!0},subset:joe},zoe={exact:function lze(t,n){return zh(t,n)},subset:function cze(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>Boe(t[e],n[e]))},ignored:()=>!0};function Uoe(t,n,e){return aze[e.paths](t.root,n.root,e.matrixParams)&&zoe[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function joe(t,n,e){return Hoe(t,n,n.segments,e)}function Hoe(t,n,e,i){if(t.segments.length>e.length){const s=t.segments.slice(0,e.length);return!(!Sb(s,e)||n.hasChildren()||!zM(s,e,i))}if(t.segments.length===e.length){if(!Sb(t.segments,e)||!zM(t.segments,e,i))return!1;for(const s in n.children)if(!t.children[s]||!joe(t.children[s],n.children[s],i))return!1;return!0}{const s=e.slice(0,t.segments.length),r=e.slice(t.segments.length);return!!(Sb(t.segments,s)&&zM(t.segments,s,i)&&t.children[Oi])&&Hoe(t.children[Oi],n,r,i)}}function zM(t,n,e){return n.every((i,s)=>zoe[e](t[s].parameters,i.parameters))}class Cb{constructor(n=new ir([],{}),e={},i=null){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=J1(this.queryParams),this._queryParamMap}toString(){return hze.serialize(this)}}class ir{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return GM(this)}}class Zx{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=J1(this.parameters),this._parameterMap}toString(){return Koe(this)}}function Sb(t,n){return t.length===n.length&&t.every((e,i)=>e.path===n[i].path)}let e0=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:()=>new UM,providedIn:"root"})}return t})();class UM{parse(n){const e=new Sze(n);return new Cb(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${Qx(n.root,!0)}`,i=function mze(t){const n=Object.entries(t).map(([e,i])=>Array.isArray(i)?i.map(s=>`${jM(e)}=${jM(s)}`).join("&"):`${jM(e)}=${jM(i)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}(n.queryParams),s="string"==typeof n.fragment?`#${function pze(t){return encodeURI(t)}(n.fragment)}`:"";return`${e}${i}${s}`}}const hze=new UM;function GM(t){return t.segments.map(n=>Koe(n)).join("/")}function Qx(t,n){if(!t.hasChildren())return GM(t);if(n){const e=t.children[Oi]?Qx(t.children[Oi],!1):"",i=[];return Object.entries(t.children).forEach(([s,r])=>{s!==Oi&&i.push(`${s}:${Qx(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function dze(t,n){let e=[];return Object.entries(t.children).forEach(([i,s])=>{i===Oi&&(e=e.concat(n(s,i)))}),Object.entries(t.children).forEach(([i,s])=>{i!==Oi&&(e=e.concat(n(s,i)))}),e}(t,(i,s)=>s===Oi?[Qx(t.children[Oi],!1)]:[`${s}:${Qx(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Oi]?`${GM(t)}/${e[0]}`:`${GM(t)}/(${e.join("//")})`}}function Woe(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jM(t){return Woe(t).replace(/%3B/gi,";")}function c6(t){return Woe(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function HM(t){return decodeURIComponent(t)}function qoe(t){return HM(t.replace(/\+/g,"%20"))}function Koe(t){return`${c6(t.path)}${function fze(t){return Object.entries(t).map(([n,e])=>`;${c6(n)}=${c6(e)}`).join("")}(t.parameters)}`}const _ze=/^[^\/()?;#]+/;function u6(t){const n=t.match(_ze);return n?n[0]:""}const gze=/^[^\/()?;=#]+/,vze=/^[^=?&#]+/,wze=/^[^&#]+/;class Sze{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ir([],{}):new ir([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[Oi]=new ir(n,e)),i}parseSegment(){const n=u6(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Fe(4009,!1);return this.capture(n),new Zx(HM(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=function bze(t){const n=t.match(gze);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const s=u6(this.remaining);s&&(i=s,this.capture(i))}n[HM(e)]=HM(i)}parseQueryParam(n){const e=function yze(t){const n=t.match(vze);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const o=function Cze(t){const n=t.match(wze);return n?n[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const s=qoe(e),r=qoe(i);if(n.hasOwnProperty(s)){let o=n[s];Array.isArray(o)||(o=[o],n[s]=o),o.push(r)}else n[s]=r}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=u6(this.remaining),s=this.remaining[i.length];if("/"!==s&&")"!==s&&";"!==s)throw new Fe(4010,!1);let r;i.indexOf(":")>-1?(r=i.slice(0,i.indexOf(":")),this.capture(r),this.capture(":")):n&&(r=Oi);const o=this.parseChildren();e[r]=1===Object.keys(o).length?o[Oi]:new ir([],o),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Fe(4011,!1)}}function Xoe(t){return t.segments.length>0?new ir([],{[Oi]:t}):t}function Yoe(t){const n={};for(const[i,s]of Object.entries(t.children)){const r=Yoe(s);if(i===Oi&&0===r.segments.length&&r.hasChildren())for(const[o,a]of Object.entries(r.children))n[o]=a;else(r.segments.length>0||r.hasChildren())&&(n[i]=r)}return function xze(t){if(1===t.numberOfChildren&&t.children[Oi]){const n=t.children[Oi];return new ir(t.segments.concat(n.segments),n.children)}return t}(new ir(t.segments,n))}function xb(t){return t instanceof Cb}function Zoe(t){let n;const s=Xoe(function e(r){const o={};for(const l of r.children){const c=e(l);o[l.outlet]=c}const a=new ir(r.url,o);return r===t&&(n=a),a}(t.root));return n??s}function Qoe(t,n,e,i){let s=t;for(;s.parent;)s=s.parent;if(0===n.length)return d6(s,s,s,e,i);const r=function Tze(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new eae(!0,0,t);let n=0,e=!1;const i=t.reduce((s,r,o)=>{if("object"==typeof r&&null!=r){if(r.outlets){const a={};return Object.entries(r.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...s,{outlets:a}]}if(r.segmentPath)return[...s,r.segmentPath]}return"string"!=typeof r?[...s,r]:0===o?(r.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?n++:""!=a&&s.push(a))}),s):[...s,r]},[]);return new eae(e,n,i)}(n);if(r.toRoot())return d6(s,s,new ir([],{}),e,i);const o=function Ize(t,n,e){if(t.isAbsolute)return new qM(n,!0,0);if(!e)return new qM(n,!1,NaN);if(null===e.parent)return new qM(e,!0,0);const i=WM(t.commands[0])?0:1;return function kze(t,n,e){let i=t,s=n,r=e;for(;r>s;){if(r-=s,i=i.parent,!i)throw new Fe(4005,!1);s=i.segments.length}return new qM(i,!1,s-r)}(e,e.segments.length-1+i,t.numberOfDoubleDots)}(r,s,t),a=o.processChildren?eE(o.segmentGroup,o.index,r.commands):tae(o.segmentGroup,o.index,r.commands);return d6(s,o.segmentGroup,a,e,i)}function WM(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Jx(t){return"object"==typeof t&&null!=t&&t.outlets}function d6(t,n,e,i,s){let o,r={};i&&Object.entries(i).forEach(([l,c])=>{r[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=t===n?e:Joe(t,n,e);const a=Xoe(Yoe(o));return new Cb(a,r,s)}function Joe(t,n,e){const i={};return Object.entries(t.children).forEach(([s,r])=>{i[s]=r===n?e:Joe(r,n,e)}),new ir(t.segments,i)}class eae{constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&WM(i[0]))throw new Fe(4003,!1);const s=i.find(Jx);if(s&&s!==Voe(i))throw new Fe(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qM{constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}}function tae(t,n,e){if(t??=new ir([],{}),0===t.segments.length&&t.hasChildren())return eE(t,n,e);const i=function Aze(t,n,e){let i=0,s=n;const r={match:!1,pathIndex:0,commandIndex:0};for(;s<t.segments.length;){if(i>=e.length)return r;const o=t.segments[s],a=e[i];if(Jx(a))break;const l=`${a}`,c=i<e.length-1?e[i+1]:null;if(s>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!iae(l,c,o))return r;i+=2}else{if(!iae(l,{},o))return r;i++}s++}return{match:!0,pathIndex:s,commandIndex:i}}(t,n,e),s=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const r=new ir(t.segments.slice(0,i.pathIndex),{});return r.children[Oi]=new ir(t.segments.slice(i.pathIndex),t.children),eE(r,0,s)}return i.match&&0===s.length?new ir(t.segments,{}):i.match&&!t.hasChildren()?h6(t,n,e):i.match?eE(t,0,s):h6(t,n,e)}function eE(t,n,e){if(0===e.length)return new ir(t.segments,{});{const i=function Dze(t){return Jx(t[0])?t[0].outlets:{[Oi]:t}}(e),s={};if(Object.keys(i).some(r=>r!==Oi)&&t.children[Oi]&&1===t.numberOfChildren&&0===t.children[Oi].segments.length){const r=eE(t.children[Oi],n,e);return new ir(t.segments,r.children)}return Object.entries(i).forEach(([r,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(s[r]=tae(t.children[r],n,o))}),Object.entries(t.children).forEach(([r,o])=>{void 0===i[r]&&(s[r]=o)}),new ir(t.segments,s)}}function h6(t,n,e){const i=t.segments.slice(0,n);let s=0;for(;s<e.length;){const r=e[s];if(Jx(r)){const l=Mze(r.outlets);return new ir(i,l)}if(0===s&&WM(e[0])){i.push(new Zx(t.segments[n].path,nae(e[0]))),s++;continue}const o=Jx(r)?r.outlets[Oi]:`${r}`,a=s<e.length-1?e[s+1]:null;o&&a&&WM(a)?(i.push(new Zx(o,nae(a))),s+=2):(i.push(new Zx(o,{})),s++)}return new ir(i,{})}function Mze(t){const n={};return Object.entries(t).forEach(([e,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(n[e]=h6(new ir([],{}),0,i))}),n}function nae(t){const n={};return Object.entries(t).forEach(([e,i])=>n[e]=`${i}`),n}function iae(t,n,e){return t==e.path&&zh(n,e.parameters)}const tE="imperative";var ls=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ls||{});class Uh{constructor(n,e){this.id=n,this.url=e}}class nE extends Uh{constructor(n,e,i="imperative",s=null){super(n,e),this.type=ls.NavigationStart,this.navigationTrigger=i,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bu extends Uh{constructor(n,e,i){super(n,e),this.urlAfterRedirects=i,this.type=ls.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Qc=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Qc||{}),KM=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(KM||{});class Gm extends Uh{constructor(n,e,i,s){super(n,e),this.reason=i,this.code=s,this.type=ls.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class t0 extends Uh{constructor(n,e,i,s){super(n,e),this.reason=i,this.code=s,this.type=ls.NavigationSkipped}}class XM extends Uh{constructor(n,e,i,s){super(n,e),this.error=i,this.target=s,this.type=ls.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class sae extends Uh{constructor(n,e,i,s){super(n,e),this.urlAfterRedirects=i,this.state=s,this.type=ls.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nze extends Uh{constructor(n,e,i,s){super(n,e),this.urlAfterRedirects=i,this.state=s,this.type=ls.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oze extends Uh{constructor(n,e,i,s,r){super(n,e),this.urlAfterRedirects=i,this.state=s,this.shouldActivate=r,this.type=ls.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Rze extends Uh{constructor(n,e,i,s){super(n,e),this.urlAfterRedirects=i,this.state=s,this.type=ls.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rae extends Uh{constructor(n,e,i,s){super(n,e),this.urlAfterRedirects=i,this.state=s,this.type=ls.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fze{constructor(n){this.route=n,this.type=ls.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Lze{constructor(n){this.route=n,this.type=ls.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Pze{constructor(n){this.snapshot=n,this.type=ls.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $ze{constructor(n){this.snapshot=n,this.type=ls.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bze{constructor(n){this.snapshot=n,this.type=ls.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vze{constructor(n){this.snapshot=n,this.type=ls.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oae{constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i,this.type=ls.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class p6{}class YM{constructor(n,e){this.url=n,this.navigationBehaviorOptions=e}}function Wd(t){return t.outlet||Oi}function iE(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class Wze{get injector(){return iE(this.route?.snapshot)??this.rootInjector}set injector(n){}constructor(n){this.rootInjector=n,this.outlet=null,this.route=null,this.children=new sE(this.rootInjector),this.attachRef=null}}let sE=(()=>{class t{constructor(e){this.rootInjector=e,this.contexts=new Map}onChildOutletCreated(e,i){const s=this.getOrCreateContext(e);s.outlet=i,this.contexts.set(e,s)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Wze(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static#e=this.\u0275fac=function(i){return new(i||t)(ae(ul))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class aae{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=f6(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){const e=f6(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=m6(n,this._root);return e.length<2?[]:e[e.length-2].children.map(s=>s.value).filter(s=>s!==n)}pathFromRoot(n){return m6(n,this._root).map(e=>e.value)}}function f6(t,n){if(t===n.value)return n;for(const e of n.children){const i=f6(t,e);if(i)return i}return null}function m6(t,n){if(t===n.value)return[n];for(const e of n.children){const i=m6(t,e);if(i.length)return i.unshift(n),i}return[]}class qd{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function n0(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class lae extends aae{constructor(n,e){super(n),this.snapshot=e,_6(this,n)}toString(){return this.snapshot.toString()}}function cae(t){const n=function qze(t){const r=new QM([],{},{},"",{},Oi,t,null,{});return new uae("",new qd(r,[]))}(t),e=new at([new Zx("",{})]),i=new at({}),s=new at({}),r=new at({}),o=new at(""),a=new uc(e,i,r,o,s,Oi,t,n.root);return a.snapshot=n.root,new lae(new qd(a,[]),n)}class uc{constructor(n,e,i,s,r,o,a,l){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=s,this.dataSubject=r,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(me(c=>c[Yx]))??Ge(void 0),this.url=n,this.params=e,this.queryParams=i,this.fragment=s,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(me(n=>J1(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(me(n=>J1(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ZM(t,n,e="emptyOnly"){let i;const{routeConfig:s}=t;return i=null===n||"always"!==e&&""!==s?.path&&(n.component||n.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...n.params,...t.params},data:{...n.data,...t.data},resolve:{...t.data,...n.data,...s?.data,...t._resolvedData}},s&&hae(s)&&(i.resolve[Yx]=s.title),i}class QM{get title(){return this.data?.[Yx]}constructor(n,e,i,s,r,o,a,l,c){this.url=n,this.params=e,this.queryParams=i,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=J1(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=J1(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class uae extends aae{constructor(n,e){super(e),this.url=n,_6(this,e)}toString(){return dae(this._root)}}function _6(t,n){n.value._routerState=t,n.children.forEach(e=>_6(t,e))}function dae(t){const n=t.children.length>0?` { ${t.children.map(dae).join(", ")} } `:"";return`${t.value}${n}`}function g6(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,zh(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),zh(n.params,e.params)||t.paramsSubject.next(e.params),function oze(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!zh(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.urlSubject.next(e.url),zh(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function b6(t,n){const e=zh(t.params,n.params)&&function uze(t,n){return Sb(t,n)&&t.every((e,i)=>zh(e.parameters,n[i].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||b6(t.parent,n.parent))}function hae(t){return"string"==typeof t.title||null===t.title}let v6=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Oi,this.activateEvents=new Ae,this.deactivateEvents=new Ae,this.attachEvents=new Ae,this.detachEvents=new Ae,this.parentContexts=xe(sE),this.location=xe(Kr),this.changeDetector=xe(wi),this.inputBinder=xe(JM,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:s}=e.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Fe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Fe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Fe(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Fe(4013,!1);this._activatedRoute=e;const s=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new y6(e,a,s.injector);this.activated=s.createComponent(o,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=He({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Rn]})}return t})();class y6{__ngOutletInjector(n){return new y6(this.route,this.childContexts,n)}constructor(n,e,i){this.route=n,this.childContexts=e,this.parent=i}get(n,e){return n===uc?this.route:n===sE?this.childContexts:this.parent.get(n,e)}}const JM=new Ne("");let pae=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:i}=e,s=Vt([i.queryParams,i.params,i.data]).pipe(Kt(([r,o,a],l)=>(a={...r,...o,...a},0===l?Ge(a):Promise.resolve(a)))).subscribe(r=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(e);const o=function p4e(t){const n=Gi(t);if(!n)return null;const e=new sx(n);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}(i.component);if(o)for(const{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,r[a]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,s)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();function rE(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=n.value;const s=function Xze(t,n,e){return n.children.map(i=>{for(const s of e.children)if(t.shouldReuseRoute(i.value,s.value.snapshot))return rE(t,i,s);return rE(t,i)})}(t,n,e);return new qd(i,s)}{if(t.shouldAttach(n.value)){const r=t.retrieve(n.value);if(null!==r){const o=r.route;return o.value._futureSnapshot=n.value,o.children=n.children.map(a=>rE(t,a)),o}}const i=function Yze(t){return new uc(new at(t.url),new at(t.params),new at(t.queryParams),new at(t.fragment),new at(t.data),t.outlet,t.component,t)}(n.value),s=n.children.map(r=>rE(t,r));return new qd(i,s)}}class w6{constructor(n,e){this.redirectTo=n,this.navigationBehaviorOptions=e}}const fae="ngNavigationCancelingError";function eN(t,n){const{redirectTo:e,navigationBehaviorOptions:i}=xb(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,s=mae(!1,Qc.Redirect);return s.url=e,s.navigationBehaviorOptions=i,s}function mae(t,n){const e=new Error(`NavigationCancelingError: ${t||""}`);return e[fae]=!0,e.cancellationCode=n,e}function _ae(t){return!!t&&t[fae]}class Jze{constructor(n,e,i,s,r){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=s,this.inputBindingEnabled=r}activate(n){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),g6(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){const s=n0(e);n.children.forEach(r=>{const o=r.value.outlet;this.deactivateRoutes(r,s[o],i),delete s[o]}),Object.values(s).forEach(r=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(n,e,i){const s=n.value,r=e?e.value:null;if(s===r)if(s.component){const o=i.getContext(s.outlet);o&&this.deactivateChildRoutes(n,e,o.children)}else this.deactivateChildRoutes(n,e,i);else r&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const i=e.getContext(n.value.outlet),s=i&&n.value.component?i.children:e,r=n0(n);for(const o of Object.values(r))this.deactivateRouteAndItsChildren(o,s);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:o,route:n,contexts:a})}}deactivateRouteAndOutlet(n,e){const i=e.getContext(n.value.outlet),s=i&&n.value.component?i.children:e,r=n0(n);for(const o of Object.values(r))this.deactivateRouteAndItsChildren(o,s);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,e,i){const s=n0(e);n.children.forEach(r=>{this.activateRoutes(r,s[r.value.outlet],i),this.forwardEvent(new Vze(r.value.snapshot))}),n.children.length&&this.forwardEvent(new $ze(n.value.snapshot))}activateRoutes(n,e,i){const s=n.value,r=e?e.value:null;if(g6(s),s===r)if(s.component){const o=i.getOrCreateContext(s.outlet);this.activateChildRoutes(n,e,o.children)}else this.activateChildRoutes(n,e,i);else if(s.component){const o=i.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),g6(a.route.value),this.activateChildRoutes(n,null,o.children)}else o.attachRef=null,o.route=s,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(n,null,o.children)}else this.activateChildRoutes(n,null,i)}}class gae{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class tN{constructor(n,e){this.component=n,this.route=e}}function e7e(t,n,e){const i=t._root;return oE(i,n?n._root:null,e,[i.value])}function s0(t,n){const e=Symbol(),i=n.get(t,e);return i===e?"function"!=typeof t||function tke(t){return null!==Kk(t)}(t)?n.get(t):t:i}function oE(t,n,e,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=n0(n);return t.children.forEach(o=>{(function n7e(t,n,e,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const r=t.value,o=n?n.value:null,a=e?e.getContext(t.value.outlet):null;if(o&&r.routeConfig===o.routeConfig){const l=function i7e(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!Sb(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Sb(t.url,n.url)||!zh(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!b6(t,n)||!zh(t.queryParams,n.queryParams);default:return!b6(t,n)}}(o,r,r.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new gae(i)):(r.data=o.data,r._resolvedData=o._resolvedData),oE(t,n,r.component?a?a.children:null:e,i,s),l&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new tN(a.outlet.component,o))}else o&&aE(n,a,s),s.canActivateChecks.push(new gae(i)),oE(t,null,r.component?a?a.children:null:e,i,s)})(o,r[o.value.outlet],e,i.concat([o.value]),s),delete r[o.value.outlet]}),Object.entries(r).forEach(([o,a])=>aE(a,e.getContext(o),s)),s}function aE(t,n,e){const i=n0(t),s=t.value;Object.entries(i).forEach(([r,o])=>{aE(o,s.component?n?n.children.getContext(r):null:n,e)}),e.canDeactivateChecks.push(new tN(s.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,s))}function lE(t){return"function"==typeof t}function bae(t){return t instanceof $M||"EmptyError"===t?.name}const nN=Symbol("INITIAL_VALUE");function r0(){return Kt(t=>Vt(t.map(n=>n.pipe(Zn(1),Uo(nN)))).pipe(me(n=>{for(const e of n)if(!0!==e){if(e===nN)return nN;if(!1===e||u7e(e))return e}return!0}),Zt(n=>n!==nN),Zn(1)))}function u7e(t){return xb(t)||t instanceof w6}function vae(t){return function nS(...t){return xy(t)}(gi(n=>{if("boolean"!=typeof n)throw eN(0,n)}),me(n=>!0===n))}class C6{constructor(n){this.segmentGroup=n||null}}class iN extends Error{constructor(n){super(),this.urlTree=n}}function o0(t){return zm(new C6(t))}class S7e{constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){let i=[],s=e.root;for(;;){if(i=i.concat(s.segments),0===s.numberOfChildren)return Ge(i);if(s.numberOfChildren>1||!s.children[Oi])return zm(new Fe(4e3,!1));s=s.children[Oi]}}applyRedirectCommands(n,e,i,s,r){if("string"!=typeof e){const a=e,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,params:p,data:f,title:g}=s,v=Dh(r,()=>a({params:p,data:f,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,title:g}));if(v instanceof Cb)throw new iN(v);e=v}const o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,i);if("/"===e[0])throw new iN(o);return o}applyRedirectCreateUrlTree(n,e,i,s){const r=this.createSegmentGroup(n,e.root,i,s);return new Cb(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const i={};return Object.entries(n).forEach(([s,r])=>{if("string"==typeof r&&":"===r[0]){const a=r.substring(1);i[s]=e[a]}else i[s]=r}),i}createSegmentGroup(n,e,i,s){const r=this.createSegments(n,e.segments,i,s);let o={};return Object.entries(e.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(n,l,i,s)}),new ir(r,o)}createSegments(n,e,i,s){return e.map(r=>":"===r.path[0]?this.findPosParam(n,r,s):this.findOrReturn(r,i))}findPosParam(n,e,i){const s=i[e.path.substring(1)];if(!s)throw new Fe(4001,!1);return s}findOrReturn(n,e){let i=0;for(const s of e){if(s.path===n.path)return e.splice(i),s;i++}return n}}const S6={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function x7e(t,n,e,i,s){const r=yae(t,n,e);return r.matched?(i=function zze(t,n){return t.providers&&!t._injector&&(t._injector=lA(t.providers,n,`Route: ${t.path}`)),t._injector??n}(n,i),function y7e(t,n,e,i){const s=n.canMatch;return s&&0!==s.length?Ge(s.map(o=>{const a=s0(o,t);return Um(function c7e(t){return t&&lE(t.canMatch)}(a)?a.canMatch(n,e):Dh(t,()=>a(n,e)))})).pipe(r0(),vae()):Ge(!0)}(i,n,e).pipe(me(o=>!0===o?r:{...S6}))):Ge(r)}function yae(t,n,e){if("**"===n.path)return function E7e(t){return{matched:!0,parameters:t.length>0?Voe(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(e);if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?{...S6}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const s=(n.matcher||rze)(e,t,n);if(!s)return{...S6};const r={};Object.entries(s.posParams??{}).forEach(([a,l])=>{r[a]=l.path});const o=s.consumed.length>0?{...r,...s.consumed[s.consumed.length-1].parameters}:r;return{matched:!0,consumedSegments:s.consumed,remainingSegments:e.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function wae(t,n,e,i){return e.length>0&&function k7e(t,n,e){return e.some(i=>sN(t,n,i)&&Wd(i)!==Oi)}(t,e,i)?{segmentGroup:new ir(n,I7e(i,new ir(e,t.children))),slicedSegments:[]}:0===e.length&&function D7e(t,n,e){return e.some(i=>sN(t,n,i))}(t,e,i)?{segmentGroup:new ir(t.segments,T7e(t,e,i,t.children)),slicedSegments:e}:{segmentGroup:new ir(t.segments,t.children),slicedSegments:e}}function T7e(t,n,e,i){const s={};for(const r of e)if(sN(t,n,r)&&!i[Wd(r)]){const o=new ir([],{});s[Wd(r)]=o}return{...i,...s}}function I7e(t,n){const e={};e[Oi]=n;for(const i of t)if(""===i.path&&Wd(i)!==Oi){const s=new ir([],{});e[Wd(i)]=s}return e}function sN(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}class M7e{}class R7e{constructor(n,e,i,s,r,o,a){this.injector=n,this.configLoader=e,this.rootComponentType=i,this.config=s,this.urlTree=r,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new S7e(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(n){return new Fe(4002,`'${n.segmentGroup}'`)}recognize(){const n=wae(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(me(({children:e,rootSnapshot:i})=>{const s=new qd(i,e),r=new uae("",s),o=function Eze(t,n,e=null,i=null){return Qoe(Zoe(t),n,e,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(o),{state:r,tree:o}}))}match(n){const e=new QM([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Oi,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,Oi,e).pipe(me(i=>({children:i,rootSnapshot:e})),Xi(i=>{if(i instanceof iN)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof C6?this.noMatchError(i):i}))}processSegmentGroup(n,e,i,s,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(n,e,i,r):this.processSegment(n,e,i,i.segments,s,!0,r).pipe(me(o=>o instanceof qd?[o]:[]))}processChildren(n,e,i,s){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return ao(r).pipe(fb(o=>{const a=i.children[o],l=function Hze(t,n){const e=t.filter(i=>Wd(i)===n);return e.push(...t.filter(i=>Wd(i)!==n)),e}(e,o);return this.processSegmentGroup(n,l,a,o,s)}),function qVe(t,n){let e=!1;return arguments.length>=2&&(e=!0),function(s){return s.lift(new KVe(t,n,e))}}((o,a)=>(o.push(...a),o)),Xx(null),function QVe(t,n){const e=arguments.length>=2;return i=>i.pipe(t?Zt((s,r)=>t(s,r,i)):lm,a6(1),e?Xx(n):$oe(()=>new $M))}(),ml(o=>{if(null===o)return o0(i);const a=Cae(o);return function F7e(t){t.sort((n,e)=>n.value.outlet===Oi?-1:e.value.outlet===Oi?1:n.value.outlet.localeCompare(e.value.outlet))}(a),Ge(a)}))}processSegment(n,e,i,s,r,o,a){return ao(e).pipe(fb(l=>this.processSegmentAgainstRoute(l._injector??n,e,l,i,s,r,o,a).pipe(Xi(c=>{if(c instanceof C6)return Ge(null);throw c}))),as(l=>!!l),Xi(l=>{if(bae(l))return function A7e(t,n,e){return 0===n.length&&!t.children[e]}(i,s,r)?Ge(new M7e):o0(i);throw l}))}processSegmentAgainstRoute(n,e,i,s,r,o,a,l){return Wd(i)===o||o!==Oi&&sN(s,r,i)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,s,i,r,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(n,s,e,i,r,o,l):o0(s):o0(s)}expandSegmentAgainstRouteUsingRedirect(n,e,i,s,r,o,a){const{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=yae(e,s,r);if(!l)return o0(e);"string"==typeof s.redirectTo&&"/"===s.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const p=new QM(r,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Sae(s),Wd(s),s.component??s._loadedComponent??null,s,xae(s)),f=ZM(p,a,this.paramsInheritanceStrategy);p.params=Object.freeze(f.params),p.data=Object.freeze(f.data);const g=this.applyRedirects.applyRedirectCommands(u,s.redirectTo,d,p,n);return this.applyRedirects.lineralizeSegments(s,g).pipe(ml(v=>this.processSegment(n,i,e,v.concat(h),o,!1,a)))}matchSegmentAgainstRoute(n,e,i,s,r,o){const a=x7e(e,i,s,n);return"**"===i.path&&(e.children={}),a.pipe(Kt(l=>l.matched?this.getChildConfig(n=i._injector??n,i,s).pipe(Kt(({routes:c})=>{const u=i._loadedInjector??n,{parameters:d,consumedSegments:h,remainingSegments:p}=l,f=new QM(h,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Sae(i),Wd(i),i.component??i._loadedComponent??null,i,xae(i)),g=ZM(f,o,this.paramsInheritanceStrategy);f.params=Object.freeze(g.params),f.data=Object.freeze(g.data);const{segmentGroup:v,slicedSegments:y}=wae(e,h,p,c);if(0===y.length&&v.hasChildren())return this.processChildren(u,c,v,f).pipe(me(x=>new qd(f,x)));if(0===c.length&&0===y.length)return Ge(new qd(f,[]));const w=Wd(i)===r;return this.processSegment(u,c,v,y,w?Oi:r,!0,f).pipe(me(x=>new qd(f,x instanceof qd?[x]:[])))})):o0(e)))}getChildConfig(n,e,i){return e.children?Ge({routes:e.children,injector:n}):e.loadChildren?void 0!==e._loadedRoutes?Ge({routes:e._loadedRoutes,injector:e._loadedInjector}):function v7e(t,n,e,i){const s=n.canLoad;return void 0===s||0===s.length?Ge(!0):Ge(s.map(o=>{const a=s0(o,t);return Um(function r7e(t){return t&&lE(t.canLoad)}(a)?a.canLoad(n,e):Dh(t,()=>a(n,e)))})).pipe(r0(),vae())}(n,e,i).pipe(ml(s=>s?this.configLoader.loadChildren(n,e).pipe(gi(r=>{e._loadedRoutes=r.routes,e._loadedInjector=r.injector})):function C7e(){return zm(mae(!1,Qc.GuardRejected))}())):Ge({routes:[],injector:n})}}function L7e(t){const n=t.value.routeConfig;return n&&""===n.path}function Cae(t){const n=[],e=new Set;for(const i of t){if(!L7e(i)){n.push(i);continue}const s=n.find(r=>i.value.routeConfig===r.value.routeConfig);void 0!==s?(s.children.push(...i.children),e.add(s)):n.push(i)}for(const i of e){const s=Cae(i.children);n.push(new qd(i.value,s))}return n.filter(i=>!e.has(i))}function Sae(t){return t.data||{}}function xae(t){return t.resolve||{}}function Eae(t){const n=t.children.map(e=>Eae(e)).flat();return[t,...n]}function x6(t){return Kt(n=>{const e=t(n);return e?ao(e).pipe(me(()=>n)):Ge(n)})}let Tae=(()=>{class t{buildTitle(e){let i,s=e.root;for(;void 0!==s;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(r=>r.outlet===Oi);return i}getResolvedTitleForRoute(e){return e.data[Yx]}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:()=>xe(U7e),providedIn:"root"})}return t})(),U7e=(()=>{class t extends Tae{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||t)(ae(rB))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const a0=new Ne("",{providedIn:"root",factory:()=>({})});let Iae=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Se({type:t,selectors:[["ng-component"]],standalone:!0,features:[Ln],decls:1,vars:0,template:function(i,s){1&i&&q(0,"router-outlet")},dependencies:[v6],encapsulation:2})}return t})();function E6(t){const n=t.children&&t.children.map(E6),e=n?{...t,children:n}:{...t};return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==Oi&&(e.component=Iae),e}const l0=new Ne("");let T6=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=xe(Hne)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Ge(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=Um(e.loadComponent()).pipe(me(kae),gi(r=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=r}),zx(()=>{this.componentLoaders.delete(e)})),s=new VM(i,()=>new ot).pipe(o6());return this.componentLoaders.set(e,s),s}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Ge({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const r=function G7e(t,n,e,i){return Um(t.loadChildren()).pipe(me(kae),ml(s=>s instanceof lee||Array.isArray(s)?Ge(s):ao(n.compileModuleAsync(s))),me(s=>{i&&i(t);let r,o,a=!1;return Array.isArray(s)?(o=s,!0):(r=s.create(e).injector,o=r.get(l0,[],{optional:!0,self:!0}).flat()),{routes:o.map(E6),injector:r}}))}(i,this.compiler,e,this.onLoadEndListener).pipe(zx(()=>{this.childrenLoaders.delete(i)})),o=new VM(r,()=>new ot).pipe(o6());return this.childrenLoaders.set(i,o),o}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kae(t){return function j7e(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let I6=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:()=>xe(H7e),providedIn:"root"})}return t})(),H7e=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Dae=new Ne(""),Aae=new Ne("");function W7e(t,n,e){const i=t.get(Aae),s=t.get(Yn);return t.get(Lt).runOutsideAngular(()=>{if(!s.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(c=>setTimeout(c));let r;const o=new Promise(c=>{r=c}),a=s.startViewTransition(()=>(r(),function q7e(t){return new Promise(n=>{pl({read:()=>setTimeout(n)},{injector:t})})}(t))),{onViewTransitionCreated:l}=i;return l&&Dh(t,()=>l({transition:a,from:n,to:e})),o})}const Mae=new Ne("");let rN=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ot,this.transitionAbortSubject=new ot,this.configLoader=xe(T6),this.environmentInjector=xe(ul),this.urlSerializer=xe(e0),this.rootContexts=xe(sE),this.location=xe(lb),this.inputBindingEnabled=null!==xe(JM,{optional:!0}),this.titleStrategy=xe(Tae),this.options=xe(a0,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=xe(I6),this.createViewTransition=xe(Dae,{optional:!0}),this.navigationErrorHandler=xe(Mae,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ge(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new Lze(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new Fze(s))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e,i,s){return this.transitions=new at({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:tE,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Zt(r=>0!==r.id),me(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Kt(r=>{let o=!1,a=!1;return Ge(r).pipe(Kt(l=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Qc.SupersededByNewNavigation),ff;this.currentTransition=r,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:"string"==typeof l.extras.browserUrl?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!c&&"reload"!==(l.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const d="";return this.events.next(new t0(l.id,this.urlSerializer.serialize(l.rawUrl),d,KM.IgnoredSameUrlNavigation)),l.resolve(!1),ff}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Ge(l).pipe(Kt(d=>{const h=this.transitions?.getValue();return this.events.next(new nE(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?ff:Promise.resolve(d)}),function P7e(t,n,e,i,s,r){return ml(o=>function N7e(t,n,e,i,s,r,o="emptyOnly"){return new R7e(t,n,e,i,s,o,r).recognize()}(t,n,e,i,o.extractedUrl,s,r).pipe(me(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),gi(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects};const h=new sae(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:d,extractedUrl:h,source:p,restoredState:f,extras:g}=l,v=new nE(d,this.urlSerializer.serialize(h),p,f);this.events.next(v);const y=cae(this.rootComponentType).snapshot;return this.currentTransition=r={...l,targetSnapshot:y,urlAfterRedirects:h,extras:{...g,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=h,Ge(r)}{const d="";return this.events.next(new t0(l.id,this.urlSerializer.serialize(l.extractedUrl),d,KM.IgnoredByUrlHandlingStrategy)),l.resolve(!1),ff}}),gi(l=>{const c=new Nze(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),me(l=>(this.currentTransition=r={...l,guards:e7e(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},r)),function d7e(t,n){return ml(e=>{const{targetSnapshot:i,currentSnapshot:s,guards:{canActivateChecks:r,canDeactivateChecks:o}}=e;return 0===o.length&&0===r.length?Ge({...e,guardsResult:!0}):function h7e(t,n,e,i){return ao(t).pipe(ml(s=>function b7e(t,n,e,i,s){const r=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return r&&0!==r.length?Ge(r.map(a=>{const l=iE(n)??s,c=s0(a,l);return Um(function l7e(t){return t&&lE(t.canDeactivate)}(c)?c.canDeactivate(t,n,e,i):Dh(l,()=>c(t,n,e,i))).pipe(as())})).pipe(r0()):Ge(!0)}(s.component,s.route,e,n,i)),as(s=>!0!==s,!0))}(o,i,s,t).pipe(ml(a=>a&&function s7e(t){return"boolean"==typeof t}(a)?function p7e(t,n,e,i){return ao(n).pipe(fb(s=>wb(function m7e(t,n){return null!==t&&n&&n(new Pze(t)),Ge(!0)}(s.route.parent,i),function f7e(t,n){return null!==t&&n&&n(new Bze(t)),Ge(!0)}(s.route,i),function g7e(t,n,e){const i=n[n.length-1],r=n.slice(0,n.length-1).reverse().map(o=>function t7e(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(o)).filter(o=>null!==o).map(o=>Vh(()=>Ge(o.guards.map(l=>{const c=iE(o.node)??e,u=s0(l,c);return Um(function a7e(t){return t&&lE(t.canActivateChild)}(u)?u.canActivateChild(i,t):Dh(c,()=>u(i,t))).pipe(as())})).pipe(r0())));return Ge(r).pipe(r0())}(t,s.path,e),function _7e(t,n,e){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return Ge(!0);const s=i.map(r=>Vh(()=>{const o=iE(n)??e,a=s0(r,o);return Um(function o7e(t){return t&&lE(t.canActivate)}(a)?a.canActivate(n,t):Dh(o,()=>a(n,t))).pipe(as())}));return Ge(s).pipe(r0())}(t,s.route,e))),as(s=>!0!==s,!0))}(i,r,t,n):Ge(a)),me(a=>({...e,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),gi(l=>{if(r.guardsResult=l.guardsResult,l.guardsResult&&"boolean"!=typeof l.guardsResult)throw eN(0,l.guardsResult);const c=new Oze(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),Zt(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",Qc.GuardRejected),!1)),x6(l=>{if(l.guards.canActivateChecks.length)return Ge(l).pipe(gi(c=>{const u=new Rze(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Kt(c=>{let u=!1;return Ge(c).pipe(function $7e(t,n){return ml(e=>{const{targetSnapshot:i,guards:{canActivateChecks:s}}=e;if(!s.length)return Ge(e);const r=new Set(s.map(l=>l.route)),o=new Set;for(const l of r)if(!o.has(l))for(const c of Eae(l))o.add(c);let a=0;return ao(o).pipe(fb(l=>r.has(l)?function B7e(t,n,e,i){const s=t.routeConfig,r=t._resolve;return void 0!==s?.title&&!hae(s)&&(r[Yx]=s.title),function V7e(t,n,e,i){const s=l6(t);if(0===s.length)return Ge({});const r={};return ao(s).pipe(ml(o=>function z7e(t,n,e,i){const s=iE(n)??i,r=s0(t,s);return Um(r.resolve?r.resolve(n,e):Dh(s,()=>r(n,e)))}(t[o],n,e,i).pipe(as(),gi(a=>{if(a instanceof w6)throw eN(new UM,a);r[o]=a}))),a6(1),function JVe(t){return n=>n.lift(new eze(t))}(r),Xi(o=>bae(o)?ff:zm(o)))}(r,t,n,i).pipe(me(o=>(t._resolvedData=o,t.data=ZM(t,t.parent,e).resolve,null)))}(l,i,t,n):(l.data=ZM(l,l.parent,t).resolve,Ge(void 0))),gi(()=>a++),a6(1),ml(l=>a===o.size?Ge(e):ff))})}(this.paramsInheritanceStrategy,this.environmentInjector),gi({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",Qc.NoDataFromResolver)}}))}),gi(c=>{const u=new rae(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),x6(l=>{const c=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(gi(h=>{u.component=h}),me(()=>{})));for(const h of u.children)d.push(...c(h));return d};return Vt(c(l.targetSnapshot.root)).pipe(Xx(null),Zn(1))}),x6(()=>this.afterPreactivation()),Kt(()=>{const{currentSnapshot:l,targetSnapshot:c}=r,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?ao(u).pipe(me(()=>r)):Ge(r)}),me(l=>{const c=function Kze(t,n,e){const i=rE(t,n._root,e?e._root:void 0);return new lae(i,n)}(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=r={...l,targetRouterState:c},this.currentNavigation.targetRouterState=c,r}),gi(()=>{this.events.next(new p6)}),((t,n,e,i)=>me(s=>(new Jze(n,s.targetRouterState,s.currentRouterState,e,i).activate(t),s)))(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Zn(1),gi({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Bu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Ni(this.transitionAbortSubject.pipe(gi(l=>{throw l}))),zx(()=>{!o&&!a&&this.cancelNavigationTransition(r,"",Qc.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Xi(l=>{if(a=!0,_ae(l))this.events.next(new Gm(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode)),function Zze(t){return _ae(t)&&xb(t.url)}(l)?this.events.next(new YM(l.url,l.navigationBehaviorOptions)):r.resolve(!1);else{const c=new XM(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);try{const u=Dh(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof w6){const{message:d,cancellationCode:h}=eN(0,u);this.events.next(new Gm(r.id,this.urlSerializer.serialize(r.extractedUrl),d,h)),this.events.next(new YM(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(c);const d=e.errorHandler(l);r.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return ff}))}))}cancelNavigationTransition(e,i,s){const r=new Gm(e.id,this.urlSerializer.serialize(e.extractedUrl),i,s);this.events.next(r),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function K7e(t){return t!==tE}let X7e=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:()=>xe(Z7e),providedIn:"root"})}return t})();class Y7e{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}let Z7e=(()=>{class t extends Y7e{static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=$n(t)))(s||t)}})();static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Nae=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:()=>xe(Q7e),providedIn:"root"})}return t})(),Q7e=(()=>{class t extends Nae{constructor(){super(...arguments),this.location=xe(lb),this.urlSerializer=xe(e0),this.options=xe(a0,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=xe(I6),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Cb,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=cae(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{"popstate"===i.type&&e(i.url,i.state)})}handleRouterEvent(e,i){if(e instanceof nE)this.stateMemento=this.createStateMemento();else if(e instanceof t0)this.rawUrlTree=i.initialUrl;else if(e instanceof sae){if("eager"===this.urlUpdateStrategy&&!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else e instanceof p6?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):e instanceof Gm&&(e.code===Qc.GuardRejected||e.code===Qc.NoDataFromResolver)?this.restoreHistory(i):e instanceof XM?this.restoreHistory(i,!0):e instanceof Bu&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,i){const s=e instanceof Cb?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(s,"",o)}else{const r={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(s,"",r)}}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-this.browserPageId;0!==r?this.location.historyGo(r):this.currentUrlTree===e.finalUrl&&0===r&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=$n(t)))(s||t)}})();static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var cE=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(cE||{});function Oae(t,n){t.events.pipe(Zt(e=>e instanceof Bu||e instanceof Gm||e instanceof XM||e instanceof t0),me(e=>e instanceof Bu||e instanceof t0?cE.COMPLETE:e instanceof Gm&&(e.code===Qc.Redirect||e.code===Qc.SupersededByNewNavigation)?cE.REDIRECTING:cE.FAILED),Zt(e=>e!==cE.REDIRECTING),Zn(1)).subscribe(()=>{n()})}function J7e(t){throw t}const e9e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},t9e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let lo=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=xe(Rne),this.stateManager=xe(Nae),this.options=xe(a0,{optional:!0})||{},this.pendingTasks=xe(ef),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=xe(rN),this.urlSerializer=xe(e0),this.location=xe(lb),this.urlHandlingStrategy=xe(I6),this._events=new ot,this.errorHandler=this.options.errorHandler||J7e,this.navigated=!1,this.routeReuseStrategy=xe(X7e),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=xe(l0,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!xe(JM,{optional:!0}),this.eventsSubscription=new rn,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(i=>{try{const s=this.navigationTransitions.currentTransition,r=this.navigationTransitions.currentNavigation;if(null!==s&&null!==r)if(this.stateManager.handleRouterEvent(i,r),i instanceof Gm&&i.code!==Qc.Redirect&&i.code!==Qc.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Bu)this.navigated=!0;else if(i instanceof YM){const o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l={browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||"eager"===this.urlUpdateStrategy||K7e(s.source),...o};this.scheduleNavigation(a,tE,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}(function i9e(t){return!(t instanceof p6||t instanceof YM)})(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),tE,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",i)},0)})}navigateToSyncWithBrowser(e,i,s){const r={replaceUrl:!0},o=s?.navigationId?s:null;if(s){const l={...s};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(r.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,i,o,r)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(E6),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){const{relativeTo:s,queryParams:r,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o;let d,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u={...this.currentUrlTree.queryParams,...r};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}null!==u&&(u=this.removeEmptyProps(u));try{d=Zoe(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||"/"!==e[0][0])&&(e=[]),d=this.currentUrlTree.root}return Qoe(d,e,u,c??null)}navigateByUrl(e,i={skipLocationChange:!1}){const s=xb(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(r,tE,null,i)}navigate(e,i={skipLocationChange:!1}){return function n9e(t){for(let n=0;n<t.length;n++)if(null==t[n])throw new Fe(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let s;if(s=!0===i?{...e9e}:!1===i?{...t9e}:i,xb(e))return Uoe(this.currentUrlTree,e,s);const r=this.parseUrl(e);return Uoe(this.currentUrlTree,r,s)}removeEmptyProps(e){return Object.entries(e).reduce((i,[s,r])=>(null!=r&&(i[s]=r),i),{})}scheduleNavigation(e,i,s,r,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,l=h});const u=this.pendingTasks.add();return Oae(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:r,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Rae{}let o9e=(()=>{class t{constructor(e,i,s,r,o){this.router=e,this.injector=s,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Zt(e=>e instanceof Bu),fb(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const s=[];for(const r of i){r.providers&&!r._injector&&(r._injector=lA(r.providers,e,`Route: ${r.path}`));const o=r._injector??e,a=r._loadedInjector??o;(r.loadChildren&&!r._loadedRoutes&&void 0===r.canLoad||r.loadComponent&&!r._loadedComponent)&&s.push(this.preloadConfig(o,r)),(r.children||r._loadedRoutes)&&s.push(this.processRoutes(a,r.children??r._loadedRoutes))}return ao(s).pipe(Q1())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let s;s=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):Ge(null);const r=s.pipe(ml(o=>null===o?Ge(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));return i.loadComponent&&!i._loadedComponent?ao([r,this.loader.loadComponent(i)]).pipe(Q1()):r})}static#e=this.\u0275fac=function(i){return new(i||t)(ae(lo),ae(Hne),ae(ul),ae(Rae),ae(T6))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const D6=new Ne("");let Fae=(()=>{class t{constructor(e,i,s,r,o={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=s,this.zone=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof nE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Bu?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof t0&&e.code===KM.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof oae&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new oae(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){GS()};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();function Gh(t,n){return{\u0275kind:t,\u0275providers:n}}function Pae(){const t=xe(ci);return n=>{const e=t.get(qc);if(n!==e.components[0])return;const i=t.get(lo),s=t.get($ae);1===t.get(A6)&&i.initialNavigation(),t.get(Bae,null,qi.Optional)?.setUpPreloading(),t.get(D6,null,qi.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const $ae=new Ne("",{factory:()=>new ot}),A6=new Ne("",{providedIn:"root",factory:()=>1}),Bae=new Ne("");function u9e(t){return Gh(0,[{provide:Bae,useExisting:o9e},{provide:Rae,useExisting:t}])}function h9e(t){return Gh(9,[{provide:Dae,useValue:W7e},{provide:Aae,useValue:{skipNextTransition:!!t?.skipInitialTransition,...t}}])}const Vae=new Ne("ROUTER_FORROOT_GUARD"),p9e=[lb,{provide:e0,useClass:UM},lo,sE,{provide:uc,useFactory:function Lae(t){return t.routerState.root},deps:[lo]},T6,[]];let f9e=(()=>{class t{constructor(e){}static forRoot(e,i){return{ngModule:t,providers:[p9e,[],{provide:l0,multi:!0,useValue:e},{provide:Vae,useFactory:b9e,deps:[[lo,new Ih,new Xp]]},{provide:a0,useValue:i||{}},i?.useHash?{provide:ab,useClass:b4e}:{provide:ab,useClass:zie},{provide:D6,useFactory:()=>{const t=xe(D$e),n=xe(Lt),e=xe(a0),i=xe(rN),s=xe(e0);return e.scrollOffset&&t.setOffset(e.scrollOffset),new Fae(s,i,t,n,e)}},i?.preloadingStrategy?u9e(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?v9e(i):[],i?.bindToComponentInputs?Gh(8,[pae,{provide:JM,useExisting:pae}]).\u0275providers:[],i?.enableViewTransitions?h9e().\u0275providers:[],[{provide:zae,useFactory:Pae},{provide:DA,multi:!0,useExisting:zae}]]}}static forChild(e){return{ngModule:t,providers:[{provide:l0,multi:!0,useValue:e}]}}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Vae,8))};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({})}return t})();function b9e(t){return"guarded"}function v9e(t){return["disabled"===t.initialNavigation?Gh(3,[{provide:Ex,multi:!0,useFactory:()=>{const n=xe(lo);return()=>{n.setUpLocationChangeListener()}}},{provide:A6,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Gh(2,[{provide:A6,useValue:0},{provide:Ex,multi:!0,deps:[ci],useFactory:n=>{const e=n.get(_4e,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const s=n.get(lo),r=n.get($ae);Oae(s,()=>{i(!0)}),n.get(rN).afterPreactivation=()=>(i(!0),r.closed?Ge(void 0):r),s.initialNavigation()}))}}]).\u0275providers:[]]}const zae=new Ne("");function _f(t,n,e,i){return Sd(e)&&(i=e,e=void 0),i?_f(t,n,e).pipe(me(s=>Fc(s)?i(...s):i(s))):new Pn(s=>{Uae(t,n,function r(o){s.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},s,e)})}function Uae(t,n,e,i,s){let r;if(function S9e(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const o=t;t.addEventListener(n,e,s),r=()=>o.removeEventListener(n,e,s)}else if(function C9e(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const o=t;t.on(n,e),r=()=>o.off(n,e)}else if(function w9e(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const o=t;t.addListener(n,e),r=()=>o.removeListener(n,e)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,a=t.length;o<a;o++)Uae(t[o],n,e,i,s)}i.add(r)}const c0=new Pn(mf);function sr(...t){let n=Number.POSITIVE_INFINITY,e=null,i=t[t.length-1];return K1(i)?(e=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===e&&1===t.length&&t[0]instanceof Pn?t[0]:Q1(n)(bM(t,e))}function Gae(t,n){return function(i){let s;if(s="function"==typeof t?t:function(){return t},"function"==typeof n)return i.lift(new x9e(s,n));const r=Object.create(i,OVe);return r.source=i,r.subjectFactory=s,r}}class x9e{constructor(n,e){this.subjectFactory=n,this.selector=e}call(n,e){const{selector:i}=this,s=this.subjectFactory(),r=i(s).subscribe(n);return r.add(e.subscribe(s)),r}}class T9e extends rn{constructor(n,e){super()}schedule(n,e=0){return this}}class oN extends T9e{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){if(this.closed)return this;this.state=n;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(s,this.id,e),this}requestAsyncId(n,e,i=0){return setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let s,i=!1;try{this.work(n)}catch(r){i=!0,s=!!r&&r||new Error(r)}if(i)return this.unsubscribe(),s}_unsubscribe(){const n=this.id,e=this.scheduler,i=e.actions,s=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==s&&i.splice(s,1),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null}}let jae=(()=>{class t{constructor(e,i=t.now){this.SchedulerAction=e,this.now=i}schedule(e,i=0,s){return new this.SchedulerAction(this,e).schedule(s,i)}}return t.now=()=>Date.now(),t})();class Kd extends jae{constructor(n,e=jae.now){super(n,()=>Kd.delegate&&Kd.delegate!==this?Kd.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(n,e=0,i){return Kd.delegate&&Kd.delegate!==this?Kd.delegate.schedule(n,e,i):super.schedule(n,e,i)}flush(n){const{actions:e}=this;if(this.active)return void e.push(n);let i;this.active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this.active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}const aN=new Kd(oN);class dc{constructor(n,e,i){this.kind=n,this.value=e,this.error=i,this.hasValue="N"===n}observe(n){switch(this.kind){case"N":return n.next&&n.next(this.value);case"E":return n.error&&n.error(this.error);case"C":return n.complete&&n.complete()}}do(n,e,i){switch(this.kind){case"N":return n&&n(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}}accept(n,e,i){return n&&"function"==typeof n.next?this.observe(n):this.do(n,e,i)}toObservable(){switch(this.kind){case"N":return Ge(this.value);case"E":return zm(this.error);case"C":return BM()}throw new Error("unexpected notification kind value")}static createNext(n){return typeof n<"u"?new dc("N",n):dc.undefinedValueNotification}static createError(n){return new dc("E",void 0,n)}static createComplete(){return dc.completeNotification}}function u0(t,n=aN){const i=function I9e(t){return t instanceof Date&&!isNaN(+t)}(t)?+t-n.now():Math.abs(t);return s=>s.lift(new D9e(i,n))}dc.completeNotification=new dc("C"),dc.undefinedValueNotification=new dc("N",void 0);class D9e{constructor(n,e){this.delay=n,this.scheduler=e}call(n,e){return e.subscribe(new M6(n,this.delay,this.scheduler))}}class M6 extends Mi{constructor(n,e,i){super(n),this.delay=e,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(n){const e=n.source,i=e.queue,s=n.scheduler,r=n.destination;for(;i.length>0&&i[0].time-s.now()<=0;)i.shift().notification.observe(r);if(i.length>0){const o=Math.max(0,i[0].time-s.now());this.schedule(n,o)}else this.unsubscribe(),e.active=!1}_schedule(n){this.active=!0,this.destination.add(n.schedule(M6.dispatch,this.delay,{source:this,destination:this.destination,scheduler:n}))}scheduleNotification(n){if(!0===this.errored)return;const e=this.scheduler,i=new A9e(e.now()+this.delay,n);this.queue.push(i),!1===this.active&&this._schedule(e)}_next(n){this.scheduleNotification(dc.createNext(n))}_error(n){this.errored=!0,this.queue=[],this.destination.error(n),this.unsubscribe()}_complete(){this.scheduleNotification(dc.createComplete()),this.unsubscribe()}}class A9e{constructor(n,e){this.time=n,this.notification=e}}const uE="Service workers are disabled or not supported by this browser";class lN{constructor(n){if(this.serviceWorker=n,n){const i=_f(n,"controllerchange").pipe(me(()=>n.controller)),r=wb(Vh(()=>Ge(n.controller)),i);this.worker=r.pipe(Zt(u=>!!u)),this.registration=this.worker.pipe(Kt(()=>n.getRegistration()));const c=_f(n,"message").pipe(me(u=>u.data)).pipe(Zt(u=>u&&u.type)).pipe(function E9e(t){return t?Gae(()=>new ot,t):Gae(new ot)}());c.connect(),this.events=c}else this.worker=this.events=this.registration=function M9e(t){return Vh(()=>zm(new Error(t)))}(uE)}postMessage(n,e){return this.worker.pipe(Zn(1),gi(i=>{i.postMessage({action:n,...e})})).toPromise().then(()=>{})}postMessageWithOperation(n,e,i){const s=this.waitForOperationCompleted(i),r=this.postMessage(n,e);return Promise.all([r,s]).then(([,o])=>o)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(n){let e;return e="string"==typeof n?i=>i.type===n:i=>n.includes(i.type),this.events.pipe(Zt(e))}nextEventOfType(n){return this.eventsOfType(n).pipe(Zn(1))}waitForOperationCompleted(n){return this.eventsOfType("OPERATION_COMPLETED").pipe(Zt(e=>e.nonce===n),Zn(1),me(e=>{if(void 0!==e.result)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Hae=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,this.pushManager=null,this.subscriptionChanges=new ot,!e.isEnabled)return this.messages=c0,this.notificationClicks=c0,void(this.subscription=c0);this.messages=this.sw.eventsOfType("PUSH").pipe(me(s=>s.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(me(s=>s.data)),this.pushManager=this.sw.registration.pipe(me(s=>s.pushManager));const i=this.pushManager.pipe(Kt(s=>s.getSubscription()));this.subscription=sr(i,this.subscriptionChanges)}requestSubscription(e){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(uE));const i={userVisibleOnly:!0};let s=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),r=new Uint8Array(new ArrayBuffer(s.length));for(let o=0;o<s.length;o++)r[o]=s.charCodeAt(o);return i.applicationServerKey=r,this.pushManager.pipe(Kt(o=>o.subscribe(i)),Zn(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Zn(1),Kt(i=>{if(null===i)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(s=>{if(!s)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(uE))}decodeBase64(e){return atob(e)}static#e=this.\u0275fac=function(i){return new(i||t)(ae(lN))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})(),N6=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,!e.isEnabled)return this.versionUpdates=c0,void(this.unrecoverable=c0);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(uE));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(uE));const e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static#e=this.\u0275fac=function(i){return new(i||t)(ae(lN))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const Wae=new Ne("");function N9e(t,n,e,i){return()=>{if(!eM(i)||!("serviceWorker"in navigator)||!1===e.enabled)return;const s=t.get(Lt),r=t.get(qc);let o;if(s.runOutsideAngular(()=>{const a=navigator.serviceWorker,l=()=>a.controller?.postMessage({action:"INITIALIZE"});a.addEventListener("controllerchange",l),r.onDestroy(()=>{a.removeEventListener("controllerchange",l)})}),"function"==typeof e.registrationStrategy)o=e.registrationStrategy();else{const[a,...l]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":o=Ge(null);break;case"registerWithDelay":o=qae(+l[0]||0);break;case"registerWhenStable":const c=ao(t.get(qc).whenStable());o=l[0]?sr(c,qae(+l[0])):c;break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}s.runOutsideAngular(()=>o.pipe(Zn(1)).subscribe(()=>navigator.serviceWorker.register(n,{scope:e.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function qae(t){return Ge(null).pipe(u0(t))}function O9e(t,n){return new lN(eM(n)&&!1!==t.enabled?navigator.serviceWorker:void 0)}class O6{}function R9e(t,n={}){return jy([Hae,N6,{provide:Wae,useValue:t},{provide:O6,useValue:n},{provide:lN,useFactory:O9e,deps:[O6,Au]},{provide:Ex,useFactory:N9e,deps:[ci,Wae,O6,Au],multi:!0}])}let F9e=(()=>{class t{static register(e,i={}){return{ngModule:t,providers:[R9e(e,i)]}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:[Hae,N6]})}return t})();const $9e=new class P9e extends Kd{}(class L9e extends oN{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}schedule(n,e=0){return e>0?super.schedule(n,e):(this.delay=e,this.state=n,this.scheduler.flush(this),this)}execute(n,e){return e>0||this.closed?super.execute(n,e):this._execute(n,e)}requestAsyncId(n,e,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(n,e,i):n.flush(this)}});class cN extends Mi{constructor(n,e,i=0){super(n),this.scheduler=e,this.delay=i}static dispatch(n){const{notification:e,destination:i}=n;e.observe(i),this.unsubscribe()}scheduleMessage(n){this.destination.add(this.scheduler.schedule(cN.dispatch,this.delay,new V9e(n,this.destination)))}_next(n){this.scheduleMessage(dc.createNext(n))}_error(n){this.scheduleMessage(dc.createError(n)),this.unsubscribe()}_complete(){this.scheduleMessage(dc.createComplete()),this.unsubscribe()}}class V9e{constructor(n,e){this.notification=n,this.destination=e}}class d0 extends ot{constructor(n=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=n<1?1:n,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(n){if(!this.isStopped){const e=this._events;e.push(n),e.length>this._bufferSize&&e.shift()}super.next(n)}nextTimeWindow(n){this.isStopped||(this._events.push(new z9e(this._getNow(),n)),this._trimBufferThenGetEvents()),super.next(n)}_subscribe(n){const e=this._infiniteTimeWindow,i=e?this._events:this._trimBufferThenGetEvents(),s=this.scheduler,r=i.length;let o;if(this.closed)throw new Ed;if(this.isStopped||this.hasError?o=rn.EMPTY:(this.observers.push(n),o=new Ty(this,n)),s&&n.add(n=new cN(n,s)),e)for(let a=0;a<r&&!n.closed;a++)n.next(i[a]);else for(let a=0;a<r&&!n.closed;a++)n.next(i[a].value);return this.hasError?n.error(this.thrownError):this.isStopped&&n.complete(),o}_getNow(){return(this.scheduler||$9e).now()}_trimBufferThenGetEvents(){const n=this._getNow(),e=this._bufferSize,i=this._windowTime,s=this._events,r=s.length;let o=0;for(;o<r&&!(n-s[o].time<i);)o++;return r>e&&(o=Math.max(o,r-e)),o>0&&s.splice(0,o),s}}class z9e{constructor(n,e){this.time=n,this.value=e}}function zn(t,n,e){let i;return i=t&&"object"==typeof t?t:{bufferSize:t,windowTime:n,refCount:!1,scheduler:e},s=>s.lift(function U9e({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:n=Number.POSITIVE_INFINITY,refCount:e,scheduler:i}){let s,o,r=0,a=!1,l=!1;return function(u){let d;r++,!s||a?(a=!1,s=new d0(t,n,i),d=s.subscribe(this),o=u.subscribe({next(h){s.next(h)},error(h){a=!0,s.error(h)},complete(){l=!0,o=void 0,s.complete()}}),l&&(o=void 0)):d=s.subscribe(this),this.add(()=>{r--,d.unsubscribe(),d=void 0,o&&!l&&e&&0===r&&(o.unsubscribe(),o=void 0,s=void 0)})}}(i))}class dE{}let Kae=(()=>{class t extends dE{getTranslation(e){return Ge({})}}return t.\u0275fac=(()=>{let n;return function(i){return(n||(n=$n(t)))(i||t)}})(),t.\u0275prov=Pe({token:t,factory:t.\u0275fac}),t})();class R6{}let Xae=(()=>{class t{handle(e){return e.key}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Pe({token:t,factory:t.\u0275fac}),t})();function uN(t,n){if(t===n)return!0;if(null===t||null===n)return!1;if(t!=t&&n!=n)return!0;let s,r,o,e=typeof t;if(e==typeof n&&"object"==e){if(!Array.isArray(t)){if(Array.isArray(n))return!1;for(r in o=Object.create(null),t){if(!uN(t[r],n[r]))return!1;o[r]=!0}for(r in n)if(!(r in o)&&typeof n[r]<"u")return!1;return!0}if(!Array.isArray(n))return!1;if((s=t.length)==n.length){for(r=0;r<s;r++)if(!uN(t[r],n[r]))return!1;return!0}}return!1}function jm(t){return typeof t<"u"&&null!==t}function F6(t){return t&&"object"==typeof t&&!Array.isArray(t)}function Yae(t,n){let e=Object.assign({},t);return F6(t)&&F6(n)&&Object.keys(n).forEach(i=>{F6(n[i])?i in t?e[i]=Yae(t[i],n[i]):Object.assign(e,{[i]:n[i]}):Object.assign(e,{[i]:n[i]})}),e}class dN{}let Zae=(()=>{class t extends dN{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(e,i){let s;return s="string"==typeof e?this.interpolateString(e,i):"function"==typeof e?this.interpolateFunction(e,i):e,s}getValue(e,i){let s="string"==typeof i?i.split("."):[i];i="";do{i+=s.shift(),!jm(e)||!jm(e[i])||"object"!=typeof e[i]&&s.length?s.length?i+=".":e=void 0:(e=e[i],i="")}while(s.length);return e}interpolateFunction(e,i){return e(i)}interpolateString(e,i){return i?e.replace(this.templateMatcher,(s,r)=>{let o=this.getValue(i,r);return jm(o)?o:s}):e}}return t.\u0275fac=(()=>{let n;return function(i){return(n||(n=$n(t)))(i||t)}})(),t.\u0275prov=Pe({token:t,factory:t.\u0275fac}),t})();class hN{}let Qae=(()=>{class t extends hN{compile(e,i){return e}compileTranslations(e,i){return e}}return t.\u0275fac=(()=>{let n;return function(i){return(n||(n=$n(t)))(i||t)}})(),t.\u0275prov=Pe({token:t,factory:t.\u0275fac}),t})();class Jae{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new Ae,this.onLangChange=new Ae,this.onDefaultLangChange=new Ae}}const L6=new Ne("USE_STORE"),P6=new Ne("USE_DEFAULT_LANG"),$6=new Ne("DEFAULT_LANGUAGE"),B6=new Ne("USE_EXTEND");let z6,hE=(()=>{class t{constructor(e,i,s,r,o,a=!0,l=!1,c=!1,u){this.store=e,this.currentLoader=i,this.compiler=s,this.parser=r,this.missingTranslationHandler=o,this.useDefaultLang=a,this.isolate=l,this.extend=c,this.pending=!1,this._onTranslationChange=new Ae,this._onLangChange=new Ae,this._onDefaultLangChange=new Ae,this._langs=[],this._translations={},this._translationRequests={},u&&this.setDefaultLang(u)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(e){this.isolate?this._defaultLang=e:this.store.defaultLang=e}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(e){this.isolate?this._currentLang=e:this.store.currentLang=e}get langs(){return this.isolate?this._langs:this.store.langs}set langs(e){this.isolate?this._langs=e:this.store.langs=e}get translations(){return this.isolate?this._translations:this.store.translations}set translations(e){this.isolate?this._translations=e:this.store.translations=e}setDefaultLang(e){if(e===this.defaultLang)return;let i=this.retrieveTranslations(e);typeof i<"u"?(null==this.defaultLang&&(this.defaultLang=e),i.pipe(Zn(1)).subscribe(s=>{this.changeDefaultLang(e)})):this.changeDefaultLang(e)}getDefaultLang(){return this.defaultLang}use(e){if(e===this.currentLang)return Ge(this.translations[e]);let i=this.retrieveTranslations(e);return typeof i<"u"?(this.currentLang||(this.currentLang=e),i.pipe(Zn(1)).subscribe(s=>{this.changeLang(e)}),i):(this.changeLang(e),Ge(this.translations[e]))}retrieveTranslations(e){let i;return(typeof this.translations[e]>"u"||this.extend)&&(this._translationRequests[e]=this._translationRequests[e]||this.getTranslation(e),i=this._translationRequests[e]),i}getTranslation(e){this.pending=!0;const i=this.currentLoader.getTranslation(e).pipe(zn(1),Zn(1));return this.loadingTranslations=i.pipe(me(s=>this.compiler.compileTranslations(s,e)),zn(1),Zn(1)),this.loadingTranslations.subscribe({next:s=>{this.translations[e]=this.extend&&this.translations[e]?{...s,...this.translations[e]}:s,this.updateLangs(),this.pending=!1},error:s=>{this.pending=!1}}),i}setTranslation(e,i,s=!1){i=this.compiler.compileTranslations(i,e),this.translations[e]=(s||this.extend)&&this.translations[e]?Yae(this.translations[e],i):i,this.updateLangs(),this.onTranslationChange.emit({lang:e,translations:this.translations[e]})}getLangs(){return this.langs}addLangs(e){e.forEach(i=>{-1===this.langs.indexOf(i)&&this.langs.push(i)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(e,i,s){let r;if(i instanceof Array){let o={},a=!1;for(let l of i)o[l]=this.getParsedResult(e,l,s),Zc(o[l])&&(a=!0);return a?$m(i.map(c=>Zc(o[c])?o[c]:Ge(o[c]))).pipe(me(c=>{let u={};return c.forEach((d,h)=>{u[i[h]]=d}),u})):o}if(e&&(r=this.parser.interpolate(this.parser.getValue(e,i),s)),typeof r>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(r=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],i),s)),typeof r>"u"){let o={key:i,translateService:this};typeof s<"u"&&(o.interpolateParams=s),r=this.missingTranslationHandler.handle(o)}return typeof r<"u"?r:i}get(e,i){if(!jm(e)||!e.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(fb(s=>Zc(s=this.getParsedResult(s,e,i))?s:Ge(s)));{let s=this.getParsedResult(this.translations[this.currentLang],e,i);return Zc(s)?s:Ge(s)}}getStreamOnTranslationChange(e,i){if(!jm(e)||!e.length)throw new Error('Parameter "key" required');return wb(Vh(()=>this.get(e,i)),this.onTranslationChange.pipe(Kt(s=>{const r=this.getParsedResult(s.translations,e,i);return"function"==typeof r.subscribe?r:Ge(r)})))}stream(e,i){if(!jm(e)||!e.length)throw new Error('Parameter "key" required');return wb(Vh(()=>this.get(e,i)),this.onLangChange.pipe(Kt(s=>{const r=this.getParsedResult(s.translations,e,i);return Zc(r)?r:Ge(r)})))}instant(e,i){if(!jm(e)||!e.length)throw new Error('Parameter "key" required');let s=this.getParsedResult(this.translations[this.currentLang],e,i);if(Zc(s)){if(e instanceof Array){let r={};return e.forEach((o,a)=>{r[e[a]]=e[a]}),r}return e}return s}set(e,i,s=this.currentLang){this.translations[s][e]=this.compiler.compile(i,s),this.updateLangs(),this.onTranslationChange.emit({lang:s,translations:this.translations[s]})}changeLang(e){this.currentLang=e,this.onLangChange.emit({lang:e,translations:this.translations[e]}),null==this.defaultLang&&this.changeDefaultLang(e)}changeDefaultLang(e){this.defaultLang=e,this.onDefaultLangChange.emit({lang:e,translations:this.translations[e]})}reloadLang(e){return this.resetLang(e),this.getTranslation(e)}resetLang(e){this._translationRequests[e]=void 0,this.translations[e]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let e=window.navigator.languages?window.navigator.languages[0]:null;return e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof e>"u"?void 0:(-1!==e.indexOf("-")&&(e=e.split("-")[0]),-1!==e.indexOf("_")&&(e=e.split("_")[0]),e)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let e=window.navigator.languages?window.navigator.languages[0]:null;return e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,e}}return t.\u0275fac=function(e){return new(e||t)(ae(Jae),ae(dE),ae(hN),ae(dN),ae(R6),ae(P6),ae(L6),ae(B6),ae($6))},t.\u0275prov=Pe({token:t,factory:t.\u0275fac}),t})(),jh=(()=>{class t{constructor(e,i){this.translate=e,this._ref=i,this.value="",this.lastKey=null,this.lastParams=[]}updateValue(e,i,s){let r=o=>{this.value=void 0!==o?o:e,this.lastKey=e,this._ref.markForCheck()};if(s){let o=this.translate.getParsedResult(s,e,i);Zc(o.subscribe)?o.subscribe(r):r(o)}this.translate.get(e,i).subscribe(r)}transform(e,...i){if(!e||!e.length)return e;if(uN(e,this.lastKey)&&uN(i,this.lastParams))return this.value;let s;if(jm(i[0])&&i.length)if("string"==typeof i[0]&&i[0].length){let r=i[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{s=JSON.parse(r)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${i[0]}`)}}else"object"==typeof i[0]&&!Array.isArray(i[0])&&(s=i[0]);return this.lastKey=e,this.lastParams=i,this.updateValue(e,s),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(r=>{this.lastKey&&r.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(e,s,r.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(r=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,s,r.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,s))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return t.\u0275fac=function(e){return new(e||t)(I(hE,16),I(wi,16))},t.\u0275pipe=nr({name:"translate",type:t,pure:!1}),t.\u0275prov=Pe({token:t,factory:t.\u0275fac}),t})(),V6=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[e.loader||{provide:dE,useClass:Kae},e.compiler||{provide:hN,useClass:Qae},e.parser||{provide:dN,useClass:Zae},e.missingTranslationHandler||{provide:R6,useClass:Xae},Jae,{provide:L6,useValue:e.isolate},{provide:P6,useValue:e.useDefaultLang},{provide:B6,useValue:e.extend},{provide:$6,useValue:e.defaultLanguage},hE]}}static forChild(e={}){return{ngModule:t,providers:[e.loader||{provide:dE,useClass:Kae},e.compiler||{provide:hN,useClass:Qae},e.parser||{provide:dN,useClass:Zae},e.missingTranslationHandler||{provide:R6,useClass:Xae},{provide:L6,useValue:e.isolate},{provide:P6,useValue:e.useDefaultLang},{provide:B6,useValue:e.extend},{provide:$6,useValue:e.defaultLanguage},hE]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Nn({type:t}),t.\u0275inj=kn({}),t})();class G9e{constructor(n,e="/assets/i18n/",i=".json"){this.http=n,this.prefix=e,this.suffix=i}getTranslation(n){return this.http.get(`${this.prefix}${n}${this.suffix}`)}}try{z6=typeof Intl<"u"&&Intl.v8BreakIterator}catch{z6=!1}let h0,Ys=(()=>{class t{constructor(e){this._platformId=e,this.isBrowser=this._platformId?eM(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!z6)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Au))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const ele=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function tle(){if(h0)return h0;if("object"!=typeof document||!document)return h0=new Set(ele),h0;let t=document.createElement("input");return h0=new Set(ele.filter(n=>(t.setAttribute("type",n),t.type===n))),h0}let pE;function Hh(t){return function j9e(){if(null==pE&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>pE=!0}))}finally{pE=pE||!1}return pE}()?t:!!t.capture}var Wh=function(t){return t[t.NORMAL=0]="NORMAL",t[t.NEGATED=1]="NEGATED",t[t.INVERTED=2]="INVERTED",t}(Wh||{});let pN,Eb,U6;function nle(){if(null==Eb){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Eb=!1,Eb;if("scrollBehavior"in document.documentElement.style)Eb=!0;else{const t=Element.prototype.scrollTo;Eb=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return Eb}function fE(){if("object"!=typeof document||!document)return Wh.NORMAL;if(null==pN){const t=document.createElement("div"),n=t.style;t.dir="rtl",n.width="1px",n.overflow="auto",n.visibility="hidden",n.pointerEvents="none",n.position="absolute";const e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",t.appendChild(e),document.body.appendChild(t),pN=Wh.NORMAL,0===t.scrollLeft&&(t.scrollLeft=1,pN=0===t.scrollLeft?Wh.NEGATED:Wh.INVERTED),t.remove()}return pN}function fN(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const n=t.shadowRoot.activeElement;if(n===t)break;t=n}return t}function Xd(t){return t.composedPath?t.composedPath()[0]:t.target}function G6(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Da(t,...n){return n.length?n.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function _s(t,n=aN){return e=>e.lift(new nUe(t,n))}class nUe{constructor(n,e){this.dueTime=n,this.scheduler=e}call(n,e){return e.subscribe(new iUe(n,this.dueTime,this.scheduler))}}class iUe extends Mi{constructor(n,e,i){super(n),this.dueTime=e,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(n){this.clearDebounce(),this.lastValue=n,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(sUe,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:n}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(n)}}clearDebounce(){const n=this.debouncedSubscription;null!==n&&(this.remove(n),n.unsubscribe(),this.debouncedSubscription=null)}}function sUe(t){t.debouncedNext()}function rle(t){return n=>n.lift(new rUe(t))}class rUe{constructor(n){this.total=n}call(n,e){return e.subscribe(new oUe(n,this.total))}}class oUe extends Mi{constructor(n,e){super(n),this.total=e,this.count=0}_next(n){++this.count>this.total&&this.destination.next(n)}}function Tb(t,n){return e=>e.lift(new aUe(t,n))}class aUe{constructor(n,e){this.compare=n,this.keySelector=e}call(n,e){return e.subscribe(new lUe(n,this.compare,this.keySelector))}}class lUe extends Mi{constructor(n,e,i){super(n),this.keySelector=i,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(n,e){return n===e}_next(n){let e;try{const{keySelector:s}=this;e=s?s(n):n}catch(s){return this.destination.error(s)}let i=!1;if(this.hasKey)try{const{compare:s}=this;i=s(this.key,e)}catch(s){return this.destination.error(s)}else this.hasKey=!0;i||(this.key=e,this.destination.next(n))}}let cUe=(()=>{class t{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ale=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:[cUe]})}return t})();function p0(t){return null!=t&&"false"!=`${t}`}function qm(t,n=0){return function lle(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):2===arguments.length?n:0}function yN(t){return Array.isArray(t)?t:[t]}function Go(t){return null==t?"":"string"==typeof t?t:`${t}px`}function Km(t){return t instanceof vt?t.nativeElement:t}const cle=new Set;let Ib,uUe=(()=>{class t{constructor(e,i){this._platform=e,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):hUe}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function dUe(t,n){if(!cle.has(t))try{Ib||(Ib=document.createElement("style"),n&&Ib.setAttribute("nonce",n),Ib.setAttribute("type","text/css"),document.head.appendChild(Ib)),Ib.sheet&&(Ib.sheet.insertRule(`@media ${t} {body{ }}`,0),cle.add(t))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Ys),ae(y$,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function hUe(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let wN=(()=>{class t{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new ot}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return ule(yN(e)).some(s=>this._registerQuery(s).mql.matches)}observe(e){let r=Vt(ule(yN(e)).map(o=>this._registerQuery(o).observable));return r=wb(r.pipe(Zn(1)),r.pipe(rle(1),_s(0))),r.pipe(me(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),r={observable:new Pn(o=>{const a=l=>this._zone.run(()=>o.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Uo(i),me(({matches:o})=>({query:e,matches:o})),Ni(this._destroySubject)),mql:i};return this._queries.set(e,r),r}static#e=this.\u0275fac=function(i){return new(i||t)(ae(uUe),ae(Lt))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ule(t){return t.map(n=>n.split(",")).reduce((n,e)=>n.concat(e)).map(n=>n.trim())}const Xm_Medium="(min-width: 960px) and (max-width: 1279.98px)",Xm_Large="(min-width: 1280px) and (max-width: 1919.98px)";function CN(t,n,e){const i=SN(t,n);e=e.trim(),!i.some(s=>s.trim()===e)&&(i.push(e),t.setAttribute(n,i.join(" ")))}function f0(t,n,e){const i=SN(t,n);e=e.trim();const s=i.filter(r=>r!==e);s.length?t.setAttribute(n,s.join(" ")):t.removeAttribute(n)}function SN(t,n){return t.getAttribute(n)?.match(/\S+/g)??[]}const hle="cdk-describedby-message",xN="cdk-describedby-host";let H6=0,ple=(()=>{class t{constructor(e,i){this._platform=i,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+H6++,this._document=e,this._id=xe(Ug)+"-"+H6++}describe(e,i,s){if(!this._canBeDescribed(e,i))return;const r=W6(i,s);"string"!=typeof i?(fle(i,this._id),this._messageRegistry.set(r,{messageElement:i,referenceCount:0})):this._messageRegistry.has(r)||this._createMessageElement(i,s),this._isElementDescribedByMessage(e,r)||this._addMessageReference(e,r)}removeDescription(e,i,s){if(!i||!this._isElementNode(e))return;const r=W6(i,s);if(this._isElementDescribedByMessage(e,r)&&this._removeMessageReference(e,r),"string"==typeof i){const o=this._messageRegistry.get(r);o&&0===o.referenceCount&&this._deleteMessageElement(r)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const e=this._document.querySelectorAll(`[${xN}="${this._id}"]`);for(let i=0;i<e.length;i++)this._removeCdkDescribedByReferenceIds(e[i]),e[i].removeAttribute(xN);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,i){const s=this._document.createElement("div");fle(s,this._id),s.textContent=e,i&&s.setAttribute("role",i),this._createMessagesContainer(),this._messagesContainer.appendChild(s),this._messageRegistry.set(W6(e,i),{messageElement:s,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;const e="cdk-describedby-message-container",i=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let r=0;r<i.length;r++)i[r].remove();const s=this._document.createElement("div");s.style.visibility="hidden",s.classList.add(e),s.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&s.setAttribute("platform","server"),this._document.body.appendChild(s),this._messagesContainer=s}_removeCdkDescribedByReferenceIds(e){const i=SN(e,"aria-describedby").filter(s=>0!=s.indexOf(hle));e.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(e,i){const s=this._messageRegistry.get(i);CN(e,"aria-describedby",s.messageElement.id),e.setAttribute(xN,this._id),s.referenceCount++}_removeMessageReference(e,i){const s=this._messageRegistry.get(i);s.referenceCount--,f0(e,"aria-describedby",s.messageElement.id),e.removeAttribute(xN)}_isElementDescribedByMessage(e,i){const s=SN(e,"aria-describedby"),r=this._messageRegistry.get(i),o=r&&r.messageElement.id;return!!o&&-1!=s.indexOf(o)}_canBeDescribed(e,i){if(!this._isElementNode(e))return!1;if(i&&"object"==typeof i)return!0;const s=null==i?"":`${i}`.trim(),r=e.getAttribute("aria-label");return!(!s||r&&r.trim()===s)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Yn),ae(Ys))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function W6(t,n){return"string"==typeof t?`${n||""}/${t}`:t}function fle(t,n){t.id||(t.id=`${hle}-${n}-${H6++}`)}class mle{constructor(n,e){this._letterKeyStream=new ot,this._items=[],this._selectedItemIndex=-1,this._pressedLetters=[],this._selectedItem=new ot,this.selectedItem=this._selectedItem;const i="number"==typeof e?.debounceInterval?e.debounceInterval:200;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(n),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(n){this._selectedItemIndex=n}setItems(n){this._items=n}handleKey(n){const e=n.keyCode;n.key&&1===n.key.length?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(n){this._letterKeyStream.pipe(gi(e=>this._pressedLetters.push(e)),_s(n),Zt(()=>this._pressedLetters.length>0),me(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let i=1;i<this._items.length+1;i++){const r=this._items[(this._selectedItemIndex+i)%this._items.length];if(!this._skipPredicateFn?.(r)&&0===r.getLabel?.().toLocaleUpperCase().trim().indexOf(e)){this._selectedItem.next(r);break}}this._pressedLetters=[]})}}class _le{constructor(n,e){this._items=n,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._typeaheadSubscription=rn.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=i=>i.disabled,this.tabOut=new ot,this.change=new ot,n instanceof vm?this._itemChangesSubscription=n.changes.subscribe(i=>this._itemsChanged(i.toArray())):rA(n)&&(this._effectRef=function Pie(t,n){Dl("NgSignals"),!n?.injector&&L4();const e=n?.injector??xe(ci),i=!0!==n?.manualCleanup?e.get(AS):null,s=new h4e(e.get(c4e),t,typeof Zone>"u"?null:Zone.current,i,e,n?.allowSignalWrites??!1),r=e.get(wi,null,{optional:!0});return r&&8&r._lView[On]?(r._lView[lD]??=[]).push(s.watcher.notify):s.watcher.notify(),s}(()=>this._itemsChanged(n()),{injector:e}))}skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){this._typeaheadSubscription.unsubscribe();const e=this._getItemsArray();return this._typeahead=new mle(e,{debounceInterval:"number"==typeof n?n:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}withPageUpDown(n=!0,e=10){return this._pageUpAndDown={enabled:n,delta:e},this}setActiveItem(n){const e=this._activeItem;this.updateActiveItem(n),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(n){const e=n.keyCode,s=["altKey","ctrlKey","metaKey","shiftKey"].every(r=>!n[r]||this._allowedModifierKeys.indexOf(r)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&s){this.setNextItemActive();break}return;case 38:if(this._vertical&&s){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&s){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&s){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&s){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&s){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&s){const r=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(r>0?r:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&s){const r=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(r<o?r:o-1,-1);break}return;default:return void((s||Da(n,"shiftKey"))&&this._typeahead?.handleKey(n))}this._typeahead?.reset(),n.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){const e=this._getItemsArray(),i="number"==typeof n?n:e.indexOf(n);this._activeItem=e[i]??null,this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){const e=this._getItemsArray();for(let i=1;i<=e.length;i++){const s=(this._activeItemIndex+n*i+e.length)%e.length;if(!this._skipPredicateFn(e[s]))return void this.setActiveItem(s)}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}_setActiveItemByIndex(n,e){const i=this._getItemsArray();if(i[n]){for(;this._skipPredicateFn(i[n]);)if(!i[n+=e])return;this.setActiveItem(n)}}_getItemsArray(){return rA(this._items)?this._items():this._items instanceof vm?this._items.toArray():this._items}_itemsChanged(n){if(this._typeahead?.setItems(n),this._activeItem){const e=n.indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e,this._typeahead?.setCurrentSelectedItemIndex(e))}}}class gle extends _le{setActiveItem(n){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(n),this.activeItem&&this.activeItem.setActiveStyles()}}class ble extends _le{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(n){return this._origin=n,this}setActiveItem(n){super.setActiveItem(n),this.activeItem&&this.activeItem.focus(this._origin)}}let EN=(()=>{class t{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function bUe(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function gUe(t){try{return t.frameElement}catch{return null}}(function TUe(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(e));if(i&&(-1===Cle(i)||!this.isVisible(i)))return!1;let s=e.nodeName.toLowerCase(),r=Cle(e);return e.hasAttribute("contenteditable")?-1!==r:!("iframe"===s||"object"===s||this._platform.WEBKIT&&this._platform.IOS&&!function xUe(t){let n=t.nodeName.toLowerCase(),e="input"===n&&t.type;return"text"===e||"password"===e||"select"===n||"textarea"===n}(e))&&("audio"===s?!!e.hasAttribute("controls")&&-1!==r:"video"===s?-1!==r&&(null!==r||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function EUe(t){return!function yUe(t){return function CUe(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function vUe(t){let n=t.nodeName.toLowerCase();return"input"===n||"select"===n||"button"===n||"textarea"===n}(t)||function wUe(t){return function SUe(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||wle(t))}(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Ys))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function wle(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let n=t.getAttribute("tabindex");return!(!n||isNaN(parseInt(n,10)))}function Cle(t){if(!wle(t))return null;const n=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}class Sle{get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}constructor(n,e,i,s,r=!1,o){this._element=n,this._checker=e,this._ngZone=i,this._document=s,this._injector=o,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}destroy(){const n=this._startAnchor,e=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){const e=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return"start"==n?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return i?.focus(n),!!i}return e.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){const e=this._getRegionBoundary("start");return e&&e.focus(n),!!e}focusLastTabbableElement(n){const e=this._getRegionBoundary("end");return e&&e.focus(n),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let i=0;i<e.length;i++){const s=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(s)return s}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let i=e.length-1;i>=0;i--){const s=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(s)return s}return null}_createAnchor(){const n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,e){n?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._injector?pl(n,{injector:this._injector}):setTimeout(n)}}let TN=(()=>{class t{constructor(e,i,s){this._checker=e,this._ngZone=i,this._injector=xe(ci),this._document=s}create(e,i=!1){return new Sle(e,this._checker,this._ngZone,this._document,i,this._injector)}static#e=this.\u0275fac=function(i){return new(i||t)(ae(EN),ae(Lt),ae(Yn))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),IUe=(()=>{class t{get enabled(){return this.focusTrap?.enabled||!1}set enabled(e){this.focusTrap&&(this.focusTrap.enabled=e)}constructor(e,i,s){this._elementRef=e,this._focusTrapFactory=i,this._previouslyFocusedElement=null,xe(Ys).isBrowser&&(this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0))}ngOnDestroy(){this.focusTrap?.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap?.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap&&!this.focusTrap.hasAttached()&&this.focusTrap.attachAnchors()}ngOnChanges(e){const i=e.autoCapture;i&&!i.firstChange&&this.autoCapture&&this.focusTrap?.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=fN(),this.focusTrap?.focusInitialElementWhenReady()}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(TN),I(Yn))};static#t=this.\u0275dir=He({type:t,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:[2,"cdkTrapFocus","enabled",ft],autoCapture:[2,"cdkTrapFocusAutoCapture","autoCapture",ft]},exportAs:["cdkTrapFocus"],standalone:!0,features:[Li,Rn]})}return t})();function q6(t){return 0===t.buttons||0===t.detail}function K6(t){const n=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!n||-1!==n.identifier||null!=n.radiusX&&1!==n.radiusX||null!=n.radiusY&&1!==n.radiusY)}const kUe=new Ne("cdk-input-modality-detector-options"),DUe={ignoreKeys:[18,17,224,91,16]},m0=Hh({passive:!0,capture:!0});let AUe=(()=>{class t{get mostRecentModality(){return this._modality.value}constructor(e,i,s,r){this._platform=e,this._mostRecentTarget=null,this._modality=new at(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Xd(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(q6(o)?"keyboard":"mouse"),this._mostRecentTarget=Xd(o))},this._onTouchstart=o=>{K6(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Xd(o))},this._options={...DUe,...r},this.modalityDetected=this._modality.pipe(rle(1)),this.modalityChanged=this.modalityDetected.pipe(Tb()),e.isBrowser&&i.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,m0),s.addEventListener("mousedown",this._onMousedown,m0),s.addEventListener("touchstart",this._onTouchstart,m0)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,m0),document.removeEventListener("mousedown",this._onMousedown,m0),document.removeEventListener("touchstart",this._onTouchstart,m0))}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Ys),ae(Lt),ae(Yn),ae(kUe,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const MUe=new Ne("liveAnnouncerElement",{providedIn:"root",factory:function NUe(){return null}}),OUe=new Ne("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let RUe=0,Ele=(()=>{class t{constructor(e,i,s,r){this._ngZone=i,this._defaultOptions=r,this._document=s,this._liveElement=e||this._createLiveElement()}announce(e,...i){const s=this._defaultOptions;let r,o;return 1===i.length&&"number"==typeof i[0]?o=i[0]:[r,o]=i,this.clear(),clearTimeout(this._previousTimeout),r||(r=s&&s.politeness?s.politeness:"polite"),null==o&&s&&(o=s.duration),this._liveElement.setAttribute("aria-live",r),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",i=this._document.getElementsByClassName(e),s=this._document.createElement("div");for(let r=0;r<i.length;r++)i[r].remove();return s.classList.add(e),s.classList.add("cdk-visually-hidden"),s.setAttribute("aria-atomic","true"),s.setAttribute("aria-live","polite"),s.id="cdk-live-announcer-"+RUe++,this._document.body.appendChild(s),s}_exposeAnnouncerToModals(e){const i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let s=0;s<i.length;s++){const r=i[s],o=r.getAttribute("aria-owns");o?-1===o.indexOf(e)&&r.setAttribute("aria-owns",o+" "+e):r.setAttribute("aria-owns",e)}}static#e=this.\u0275fac=function(i){return new(i||t)(ae(MUe,8),ae(Lt),ae(Yn),ae(OUe,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var IN=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(IN||{});const FUe=new Ne("cdk-focus-monitor-default-options"),kN=Hh({passive:!0,capture:!0});let pc=(()=>{class t{constructor(e,i,s,r,o){this._ngZone=e,this._platform=i,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ot,this._rootNodeFocusAndBlurListener=a=>{for(let c=Xd(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=r,this._detectionMode=o?.detectionMode||IN.IMMEDIATE}monitor(e,i=!1){const s=Km(e);if(!this._platform.isBrowser||1!==s.nodeType)return Ge();const r=function W9e(t){if(function H9e(){if(null==U6){const t=typeof document<"u"?document.head:null;U6=!(!t||!t.createShadowRoot&&!t.attachShadow)}return U6}()){const n=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}(s)||this._getDocument(),o=this._elementInfo.get(s);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new ot,rootNode:r};return this._elementInfo.set(s,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const i=Km(e),s=this._elementInfo.get(i);s&&(s.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(s))}focusVia(e,i,s){const r=Km(e);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof r.focus&&r.focus(s))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===IN.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,this._detectionMode===IN.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const s=this._elementInfo.get(i),r=Xd(e);!s||!s.checkChildren&&i!==r||this._originChanged(i,this._getFocusOrigin(r),s)}_onBlur(e,i){const s=this._elementInfo.get(i);!s||s.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(s,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,s=this._rootNodeFocusListenerCount.get(i)||0;s||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,kN),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,kN)}),this._rootNodeFocusListenerCount.set(i,s+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ni(this._stopInputModalityDetector)).subscribe(r=>{this._setOrigin(r,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const s=this._rootNodeFocusListenerCount.get(i);s>1?this._rootNodeFocusListenerCount.set(i,s-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,kN),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,kN),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,s){this._setClasses(e,i),this._emitOrigin(s,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((s,r)=>{(r===e||s.checkChildren&&r.contains(e))&&i.push([r,s])}),i}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:i,mostRecentModality:s}=this._inputModalityDetector;if("mouse"!==s||!i||i===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const r=e.labels;if(r)for(let o=0;o<r.length;o++)if(r[o].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Lt),ae(Ys),ae(AUe),ae(Yn,8),ae(FUe,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),LUe=(()=>{class t{constructor(e,i){this._elementRef=e,this._focusMonitor=i,this._focusOrigin=null,this.cdkFocusChange=new Ae}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){const e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,1===e.nodeType&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>{this._focusOrigin=i,this.cdkFocusChange.emit(i)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(pc))};static#t=this.\u0275dir=He({type:t,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"],standalone:!0})}return t})();var kb=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(kb||{});const Tle="cdk-high-contrast-black-on-white",Ile="cdk-high-contrast-white-on-black",X6="cdk-high-contrast-active";let kle=(()=>{class t{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=xe(wN).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return kb.NONE;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,s=i&&i.getComputedStyle?i.getComputedStyle(e):null,r=(s&&s.backgroundColor||"").replace(/ /g,"");switch(e.remove(),r){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return kb.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return kb.BLACK_ON_WHITE}return kb.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(X6,Tle,Ile),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();i===kb.BLACK_ON_WHITE?e.add(X6,Tle):i===kb.WHITE_ON_BLACK&&e.add(X6,Ile)}}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Ys),ae(Yn))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Y6=(()=>{class t{constructor(e){e._applyBodyHighContrastModeCssClasses()}static#e=this.\u0275fac=function(i){return new(i||t)(ae(kle))};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[ale]})}return t})();const PUe=new Ne("cdk-dir-doc",{providedIn:"root",factory:function $Ue(){return xe(Yn)}}),BUe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let jo=(()=>{class t{constructor(e){this.value="ltr",this.change=new Ae,e&&(this.value=function VUe(t){const n=t?.toLowerCase()||"";return"auto"===n&&typeof navigator<"u"&&navigator?.language?BUe.test(navigator.language)?"rtl":"ltr":"rtl"===n?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||t)(ae(PUe,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),mE=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({})}return t})();const GUe=["text"],jUe=[[["mat-icon"]],"*"],HUe=["mat-icon","*"];function WUe(t,n){if(1&t&&q(0,"mat-pseudo-checkbox",1),2&t){const e=E();C("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function qUe(t,n){1&t&&q(0,"mat-pseudo-checkbox",3),2&t&&C("disabled",E().disabled)}function KUe(t,n){if(1&t&&(m(0,"span",4),S(1),_()),2&t){const e=E();b(),K("(",e.group.label,")")}}const XUe=["mat-internal-form-field",""],YUe=["*"];let Z6=(()=>{class t{static#e=this.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)";static#t=this.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)";static#n=this.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)";static#i=this.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)"}return t})(),Q6=(()=>{class t{static#e=this.COMPLEX="375ms";static#t=this.ENTERING="225ms";static#n=this.EXITING="195ms"}return t})();const QUe=new Ne("mat-sanity-checks",{providedIn:"root",factory:function ZUe(){return!0}});let Yi=(()=>{class t{constructor(e,i,s){this._sanityChecks=i,this._document=s,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!G6()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}static#e=this.\u0275fac=function(i){return new(i||t)(ae(kle),ae(QUe,8),ae(Yn))};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[mE,mE]})}return t})();class DN{constructor(n,e,i,s,r){this._defaultMatcher=n,this.ngControl=e,this._parentFormGroup=i,this._parentForm=s,this._stateChanges=r,this.errorState=!1}updateErrorState(){const n=this.errorState,e=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,s=this.ngControl?this.ngControl.control:null,r=i?.isErrorState(s,e)??!1;r!==n&&(this.errorState=r,this._stateChanges.next())}}class Ll{constructor(){this._localeChanges=new ot,this.localeChanges=this._localeChanges}getValidDateOrNull(n){return this.isDateInstance(n)&&this.isValid(n)?n:null}deserialize(n){return null==n||this.isDateInstance(n)&&this.isValid(n)?n:this.invalid()}setLocale(n){this.locale=n,this._localeChanges.next()}compareDate(n,e){return this.getYear(n)-this.getYear(e)||this.getMonth(n)-this.getMonth(e)||this.getDate(n)-this.getDate(e)}sameDate(n,e){if(n&&e){let i=this.isValid(n),s=this.isValid(e);return i&&s?!this.compareDate(n,e):i==s}return n==e}clampDate(n,e,i){return e&&this.compareDate(n,e)<0?e:i&&this.compareDate(n,i)>0?i:n}}const Db=new Ne("mat-date-formats");let AN=(()=>{class t{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var fc=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(fc||{});class nGe{constructor(n,e,i,s=!1){this._renderer=n,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=s,this.state=fc.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const Mle=Hh({passive:!0,capture:!0});class iGe{constructor(){this._events=new Map,this._delegateEventHandler=n=>{const e=Xd(n);e&&this._events.get(n.type)?.forEach((i,s)=>{(s===e||s.contains(e))&&i.forEach(r=>r.handleEvent(n))})}}addHandler(n,e,i,s){const r=this._events.get(e);if(r){const o=r.get(i);o?o.add(s):r.set(i,new Set([s]))}else this._events.set(e,new Map([[i,new Set([s])]])),n.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,Mle)})}removeHandler(n,e,i){const s=this._events.get(n);if(!s)return;const r=s.get(e);r&&(r.delete(i),0===r.size&&s.delete(e),0===s.size&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,Mle)))}}const Nle={enterDuration:225,exitDuration:150},Ole=Hh({passive:!0,capture:!0}),Rle=["mousedown","touchstart"],Fle=["mouseup","mouseleave","touchend","touchcancel"];class MN{static#e=this._eventManager=new iGe;constructor(n,e,i,s){this._target=n,this._ngZone=e,this._platform=s,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,s.isBrowser&&(this._containerElement=Km(i))}fadeInRipple(n,e,i={}){const s=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r={...Nle,...i.animation};i.centered&&(n=s.left+s.width/2,e=s.top+s.height/2);const o=i.radius||function rGe(t,n,e){const i=Math.max(Math.abs(t-e.left),Math.abs(t-e.right)),s=Math.max(Math.abs(n-e.top),Math.abs(n-e.bottom));return Math.sqrt(i*i+s*s)}(n,e,s),a=n-s.left,l=e-s.top,c=r.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const d=window.getComputedStyle(u),p=d.transitionDuration,f="none"===d.transitionProperty||"0s"===p||"0s, 0s"===p||0===s.width&&0===s.height,g=new nGe(this,u,i,f);u.style.transform="scale3d(1, 1, 1)",g.state=fc.FADING_IN,i.persistent||(this._mostRecentTransientRipple=g);let v=null;return!f&&(c||r.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const y=()=>{v&&(v.fallbackTimer=null),clearTimeout(x),this._finishRippleTransition(g)},w=()=>this._destroyRipple(g),x=setTimeout(w,c+100);u.addEventListener("transitionend",y),u.addEventListener("transitioncancel",w),v={onTransitionEnd:y,onTransitionCancel:w,fallbackTimer:x}}),this._activeRipples.set(g,v),(f||!c)&&this._finishRippleTransition(g),g}fadeOutRipple(n){if(n.state===fc.FADING_OUT||n.state===fc.HIDDEN)return;const e=n.element,i={...Nle,...n.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",n.state=fc.FADING_OUT,(n._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){const e=Km(n);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,Rle.forEach(i=>{MN._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Fle.forEach(e=>{this._triggerElement.addEventListener(e,this,Ole)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){n.state===fc.FADING_IN?this._startFadeOutTransition(n):n.state===fc.FADING_OUT&&this._destroyRipple(n)}_startFadeOutTransition(n){const e=n===this._mostRecentTransientRipple,{persistent:i}=n.config;n.state=fc.VISIBLE,!i&&(!e||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){const e=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=fc.HIDDEN,null!==e&&(n.element.removeEventListener("transitionend",e.onTransitionEnd),n.element.removeEventListener("transitioncancel",e.onTransitionCancel),null!==e.fallbackTimer&&clearTimeout(e.fallbackTimer)),n.element.remove()}_onMousedown(n){const e=q6(n),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!K6(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=n.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{!n.config.persistent&&(n.state===fc.VISIBLE||n.config.terminateOnPointerUp&&n.state===fc.FADING_IN)&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const n=this._triggerElement;n&&(Rle.forEach(e=>MN._eventManager.removeHandler(e,n,this)),this._pointerUpEventsRegistered&&(Fle.forEach(e=>n.removeEventListener(e,this,Ole)),this._pointerUpEventsRegistered=!1))}}const gE=new Ne("mat-ripple-global-options");let Tt=(()=>{class t{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,i,s,r,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new MN(this,i,e,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,s){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,{...this.rippleConfig,...s}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(Lt),I(Ys),I(gE,8),I(ua,8))};static#t=this.\u0275dir=He({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,s){2&i&&Oe("mat-ripple-unbounded",s.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}return t})(),Jc=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[Yi,Yi]})}return t})(),Lle=(()=>{class t{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1,this.appearance="full"}static#e=this.\u0275fac=function(i){return new(i||t)(I(ua,8))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,s){2&i&&Oe("mat-pseudo-checkbox-indeterminate","indeterminate"===s.state)("mat-pseudo-checkbox-checked","checked"===s.state)("mat-pseudo-checkbox-disabled",s.disabled)("mat-pseudo-checkbox-minimal","minimal"===s.appearance)("mat-pseudo-checkbox-full","full"===s.appearance)("_mat-animation-noopable","NoopAnimations"===s._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[Ln],decls:0,vars:0,template:function(i,s){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-app-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-app-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-app-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-app-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-app-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return t})(),oGe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[Yi]})}return t})();const NN=new Ne("MAT_OPTION_PARENT_COMPONENT"),ON=new Ne("MatOptgroup");let cGe=0;class Ple{constructor(n,e=!1){this.source=n,this.isUserInput=e}}let mr=(()=>{class t{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=e}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(e,i,s,r){this._element=e,this._changeDetectorRef=i,this._parent=s,this.group=r,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+cGe++,this.onSelectionChange=new Ae,this._stateChanges=new ot}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,i){const s=this._getHostElement();"function"==typeof s.focus&&s.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!Da(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new Ple(this,e))}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(wi),I(NN,8),I(ON,8))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-option"]],viewQuery:function(i,s){if(1&i&&Gt(GUe,7),2&i){let r;nt(r=it())&&(s._text=r.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(i,s){1&i&&P("click",function(){return s._selectViaInteraction()})("keydown",function(o){return s._handleKeydown(o)}),2&i&&(fl("id",s.id),wt("aria-selected",s.selected)("aria-disabled",s.disabled.toString()),Oe("mdc-list-item--selected",s.selected)("mat-mdc-option-multiple",s.multiple)("mat-mdc-option-active",s.active)("mdc-list-item--disabled",s.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",ft]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[Li,Ln],ngContentSelectors:HUe,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,s){1&i&&(Si(jUe),O(0,WUe,1,2,"mat-pseudo-checkbox",1),en(1),m(2,"span",2,0),en(4,1),_(),O(5,qUe,1,1,"mat-pseudo-checkbox",3)(6,KUe,2,1,"span",4),q(7,"div",5)),2&i&&(Bn(s.multiple?0:-1),b(5),Bn(s.multiple||!s.selected||s.hideSingleSelectionIndicator?-1:5),b(),Bn(s.group&&s.group._inert?6:-1),b(),C("matRippleTrigger",s._getHostElement())("matRippleDisabled",s.disabled||s.disableRipple))},dependencies:[Lle,Tt],styles:['.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-app-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-app-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-app-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-app-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-app-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-app-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color);outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-app-on-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-app-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return t})();function $le(t,n,e){if(e.length){let i=n.toArray(),s=e.toArray(),r=0;for(let o=0;o<t+1;o++)i[o].group&&i[o].group===s[r]&&r++;return r}return 0}function Ble(t,n,e,i){return t<e?t:t+n>e+i?Math.max(0,t-i+n):e}let RN=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[Jc,Yi,oGe]})}return t})();const Vle={capture:!0},zle=["focus","mousedown","mouseenter","touchstart"],J6="mat-ripple-loader-uninitialized",eV="mat-ripple-loader-class-name",Ule="mat-ripple-loader-centered",FN="mat-ripple-loader-disabled";let Gle=(()=>{class t{constructor(){this._document=xe(Yn,{optional:!0}),this._animationMode=xe(ua,{optional:!0}),this._globalRippleOptions=xe(gE,{optional:!0}),this._platform=xe(Ys),this._ngZone=xe(Lt),this._hosts=new Map,this._onInteraction=e=>{const i=Xd(e);if(i instanceof HTMLElement){const s=i.closest(`[${J6}="${this._globalRippleOptions?.namespace??""}"]`);s&&this._createRipple(s)}},this._ngZone.runOutsideAngular(()=>{for(const e of zle)this._document?.addEventListener(e,this._onInteraction,Vle)})}ngOnDestroy(){const e=this._hosts.keys();for(const i of e)this.destroyRipple(i);for(const i of zle)this._document?.removeEventListener(i,this._onInteraction,Vle)}configureRipple(e,i){e.setAttribute(J6,this._globalRippleOptions?.namespace??""),(i.className||!e.hasAttribute(eV))&&e.setAttribute(eV,i.className||""),i.centered&&e.setAttribute(Ule,""),i.disabled&&e.setAttribute(FN,"")}getRipple(e){return this._hosts.get(e)||this._createRipple(e)}setDisabled(e,i){const s=this._hosts.get(e);s?s.disabled=i:i?e.setAttribute(FN,""):e.removeAttribute(FN)}_createRipple(e){if(!this._document)return;const i=this._hosts.get(e);if(i)return i;e.querySelector(".mat-ripple")?.remove();const s=this._document.createElement("span");s.classList.add("mat-ripple",e.getAttribute(eV)),e.append(s);const r=new Tt(new vt(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return r._isInitialized=!0,r.trigger=e,r.centered=e.hasAttribute(Ule),r.disabled=e.hasAttribute(FN),this.attachRipple(e,r),r}attachRipple(e,i){e.removeAttribute(J6),this._hosts.set(e,i)}destroyRipple(e){const i=this._hosts.get(e);i&&(i.ngOnDestroy(),this._hosts.delete(e))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),tV=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Se({type:t,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(i,s){2&i&&Oe("mdc-form-field--align-end","before"===s.labelPosition)},inputs:{labelPosition:"labelPosition"},standalone:!0,features:[Ln],attrs:XUe,ngContentSelectors:YUe,decls:1,vars:0,template:function(i,s){1&i&&(Si(),en(0))},styles:[".mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}"],encapsulation:2,changeDetection:0})}return t})();const uGe=["mat-button",""],dGe=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],hGe=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],fGe=["mat-icon-button",""],mGe=["*"],_Ge=new Ne("MAT_BUTTON_CONFIG"),gGe=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}];let jle=(()=>{class t{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}constructor(e,i,s,r){this._elementRef=e,this._platform=i,this._ngZone=s,this._animationMode=r,this._focusMonitor=xe(pc),this._rippleLoader=xe(Gle),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;const o=xe(_Ge,{optional:!0}),a=e.nativeElement,l=a.classList;this.disabledInteractive=o?.disabledInteractive??!1,this.color=o?.color??null,this._rippleLoader?.configureRipple(a,{className:"mat-mdc-button-ripple"});for(const{attribute:c,mdcClasses:u}of gGe)a.hasAttribute(c)&&l.add(...u)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",i){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return null!=this.ariaDisabled?this.ariaDisabled:!(!this.disabled||!this.disabledInteractive)||null}_getDisabledAttribute(){return!(this.disabledInteractive||!this.disabled)||null}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static#e=this.\u0275fac=function(i){GS()};static#t=this.\u0275dir=He({type:t,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",ft],disabled:[2,"disabled","disabled",ft],ariaDisabled:[2,"aria-disabled","ariaDisabled",ft],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ft]},features:[Li]})}return t})(),nV=(()=>{class t extends jle{constructor(e,i,s,r){super(e,i,s,r)}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(Ys),I(Lt),I(ua,8))};static#t=this.\u0275cmp=Se({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(i,s){2&i&&(wt("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),$o(s.color?"mat-"+s.color:""),Oe("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Ze,Ln],attrs:uGe,ngContentSelectors:hGe,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,s){1&i&&(Si(dGe),q(0,"span",0),en(1),m(2,"span",1),en(3,1),_(),en(4,2),q(5,"span",2)(6,"span",3)),2&i&&Oe("mdc-button__ripple",!s._isFab)("mdc-fab__ripple",s._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 8px);height:var(--mdc-text-button-container-height);font-family:var(--mdc-text-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-app-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-filled-button-horizontal-padding, 16px);height:var(--mdc-filled-button-container-height);font-family:var(--mdc-filled-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-app-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-app-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-app-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-app-level1));height:var(--mdc-protected-button-container-height);font-family:var(--mdc-protected-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-app-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-app-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-app-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-app-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-outlined-button-horizontal-padding, 15px);height:var(--mdc-outlined-button-container-height);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-app-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-app-corner-full));border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-app-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-app-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return t})(),iV=(()=>{class t extends jle{constructor(e,i,s,r){super(e,i,s,r),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(Ys),I(Lt),I(ua,8))};static#t=this.\u0275cmp=Se({type:t,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(i,s){2&i&&(wt("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),$o(s.color?"mat-"+s.color:""),Oe("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Ze,Ln],attrs:fGe,ngContentSelectors:mGe,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,s){1&i&&(Si(),q(0,"span",0),en(1),q(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);color:var(--mdc-icon-button-icon-color, var(--mat-app-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return t})(),_0=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[Yi,Jc,Yi]})}return t})();class sV{attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;null!=n&&(this._attachedHost=null,n.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(n){this._attachedHost=n}}class Ab extends sV{constructor(n,e,i,s,r){super(),this.component=n,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=s,this.projectableNodes=r}}class Mb extends sV{constructor(n,e,i,s){super(),this.templateRef=n,this.viewContainerRef=e,this.context=i,this.injector=s}get origin(){return this.templateRef.elementRef}attach(n,e=this.context){return this.context=e,super.attach(n)}detach(){return this.context=void 0,super.detach()}}class vGe extends sV{constructor(n){super(),this.element=n instanceof vt?n.nativeElement:n}}class LN{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(n){return n instanceof Ab?(this._attachedPortal=n,this.attachComponentPortal(n)):n instanceof Mb?(this._attachedPortal=n,this.attachTemplatePortal(n)):this.attachDomPortal&&n instanceof vGe?(this._attachedPortal=n,this.attachDomPortal(n)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class yGe extends LN{constructor(n,e,i,s,r){super(),this.outletElement=n,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=s,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=r}attachComponentPortal(n){const i=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component);let s;return n.viewContainerRef?(s=n.viewContainerRef.createComponent(i,n.viewContainerRef.length,n.injector||n.viewContainerRef.injector,n.projectableNodes||void 0),this.setDisposeFn(()=>s.destroy())):(s=i.create(n.injector||this._defaultInjector||ci.NULL),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(s.hostView),s.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(s)),this._attachedPortal=n,s}attachTemplatePortal(n){let e=n.viewContainerRef,i=e.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return i.rootNodes.forEach(s=>this.outletElement.appendChild(s)),i.detectChanges(),this.setDisposeFn(()=>{let s=e.indexOf(i);-1!==s&&e.remove(s)}),this._attachedPortal=n,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}}let bE=(()=>{class t extends Mb{constructor(e,i){super(e,i)}static#e=this.\u0275fac=function(i){return new(i||t)(I(hr),I(Kr))};static#t=this.\u0275dir=He({type:t,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],standalone:!0,features:[Ze]})}return t})(),rV=(()=>{class t extends bE{static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=$n(t)))(s||t)}})();static#t=this.\u0275dir=He({type:t,selectors:[["","cdk-portal",""],["","portal",""]],exportAs:["cdkPortal"],standalone:!0,features:[bt([{provide:bE,useExisting:t}]),Ze]})}return t})(),Ym=(()=>{class t extends LN{constructor(e,i,s){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Ae,this.attachDomPortal=r=>{const o=r.element,a=this._document.createComment("dom-portal");r.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=r,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=s}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),o=i.createComponent(r,i.length,e.injector||i.injector,e.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static#e=this.\u0275fac=function(i){return new(i||t)(I(f1),I(Kr),I(Yn))};static#t=this.\u0275dir=He({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Ze]})}return t})(),qh=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({})}return t})();const SGe=new class CGe extends Kd{flush(n){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let i,s=-1,r=e.length;n=n||e.shift();do{if(i=n.execute(n.state,n.delay))break}while(++s<r&&(n=e.shift()));if(this.active=!1,i){for(;++s<r&&(n=e.shift());)n.unsubscribe();throw i}}}(class wGe extends oN{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,i=0){return null!==i&&i>0?super.requestAsyncId(n,e,i):(n.actions.push(this),n.scheduled||(n.scheduled=requestAnimationFrame(()=>n.flush(null))))}recycleAsyncId(n,e,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(n,e,i);0===n.actions.length&&(cancelAnimationFrame(e),n.scheduled=void 0)}});let xGe=1;const EGe=Promise.resolve(),PN={};function Hle(t){return t in PN&&(delete PN[t],!0)}const Wle={setImmediate(t){const n=xGe++;return PN[n]=!0,EGe.then(()=>Hle(n)&&t()),n},clearImmediate(t){Hle(t)}},oV=new class IGe extends Kd{flush(n){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let i,s=-1,r=e.length;n=n||e.shift();do{if(i=n.execute(n.state,n.delay))break}while(++s<r&&(n=e.shift()));if(this.active=!1,i){for(;++s<r&&(n=e.shift());)n.unsubscribe();throw i}}}(class TGe extends oN{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,i=0){return null!==i&&i>0?super.requestAsyncId(n,e,i):(n.actions.push(this),n.scheduled||(n.scheduled=Wle.setImmediate(n.flush.bind(n,null))))}recycleAsyncId(n,e,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(n,e,i);0===n.actions.length&&(Wle.clearImmediate(e),n.scheduled=void 0)}});class DGe{constructor(n){this.durationSelector=n}call(n,e){return e.subscribe(new AGe(n,this.durationSelector))}}class AGe extends Om{constructor(n,e){super(n),this.durationSelector=e,this.hasValue=!1}_next(n){if(this.value=n,this.hasValue=!0,!this.throttled){let e;try{const{durationSelector:s}=this;e=s(n)}catch(s){return this.destination.error(s)}const i=Rm(e,new Nm(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:n,hasValue:e,throttled:i}=this;i&&(this.remove(i),this.throttled=void 0,i.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(n))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function qle(t){return!Fc(t)&&t-parseFloat(t)+1>=0}function $N(t=0,n,e){let i=-1;return qle(n)?i=Number(n)<1?1:Number(n):K1(n)&&(e=n),K1(e)||(e=aN),new Pn(s=>{const r=qle(t)?t:+t-e.now();return e.schedule(MGe,r,{index:0,period:i,subscriber:s})})}function MGe(t){const{index:n,period:e,subscriber:i}=t;if(i.next(n),!i.closed){if(-1===e)return i.complete();t.index=n+1,this.schedule(t,e)}}function aV(t,n=aN){return function kGe(t){return function(e){return e.lift(new DGe(t))}}(()=>$N(t,n))}class OGe{call(n,e){return e.subscribe(new RGe(n))}}class RGe extends Mi{constructor(n){super(n),this.hasPrev=!1}_next(n){let e;this.hasPrev?e=[this.prev,n]:this.hasPrev=!0,this.prev=n,e&&this.destination.next(e)}}class Kle{}class FGe extends Kle{constructor(n){super(),this._data=n}connect(){return Zc(this._data)?this._data:Ge(this._data)}disconnect(){}}var bf=function(t){return t[t.REPLACED=0]="REPLACED",t[t.INSERTED=1]="INSERTED",t[t.MOVED=2]="MOVED",t[t.REMOVED=3]="REMOVED",t}(bf||{});const Nb=new Ne("_ViewRepeater");class lV{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(n,e,i,s,r){n.forEachOperation((o,a,l)=>{let c,u;null==o.previousIndex?(c=this._insertView(()=>i(o,a,l),l,e,s(o)),u=c?bf.INSERTED:bf.REPLACED):null==l?(this._detachAndCacheView(a,e),u=bf.REMOVED):(c=this._moveView(a,l,e,s(o)),u=bf.MOVED),r&&r({context:c?.context,operation:u,record:o})})}detach(){for(const n of this._viewCache)n.destroy();this._viewCache=[]}_insertView(n,e,i,s){const r=this._insertViewFromCache(e,i);if(r)return void(r.context.$implicit=s);const o=n();return i.createEmbeddedView(o.templateRef,o.context,o.index)}_detachAndCacheView(n,e){const i=e.detach(n);this._maybeCacheView(i,e)}_moveView(n,e,i,s){const r=i.get(n);return i.move(r,e),r.context.$implicit=s,r}_maybeCacheView(n,e){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(n);else{const i=e.indexOf(n);-1===i?n.destroy():e.remove(i)}}_insertViewFromCache(n,e){const i=this._viewCache.pop();return i&&e.insert(i,n),i||null}}class Yle{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(n=!1,e,i=!0,s){this._multiple=n,this._emitChanges=i,this.compareWith=s,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new ot,e&&e.length&&(n?e.forEach(r=>this._markSelected(r)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...n){this._verifyValueAssignment(n),n.forEach(i=>this._markSelected(i));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...n){this._verifyValueAssignment(n),n.forEach(i=>this._unmarkSelected(i));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...n){this._verifyValueAssignment(n);const e=this.selected,i=new Set(n);n.forEach(r=>this._markSelected(r)),e.filter(r=>!i.has(this._getConcreteValue(r,i))).forEach(r=>this._unmarkSelected(r));const s=this._hasQueuedChanges();return this._emitChangeEvent(),s}toggle(n){return this.isSelected(n)?this.deselect(n):this.select(n)}clear(n=!0){this._unmarkAll();const e=this._hasQueuedChanges();return n&&this._emitChangeEvent(),e}isSelected(n){return this._selection.has(this._getConcreteValue(n))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(n){this._multiple&&this.selected&&this._selected.sort(n)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(n){n=this._getConcreteValue(n),this.isSelected(n)||(this._multiple||this._unmarkAll(),this.isSelected(n)||this._selection.add(n),this._emitChanges&&this._selectedToEmit.push(n))}_unmarkSelected(n){n=this._getConcreteValue(n),this.isSelected(n)&&(this._selection.delete(n),this._emitChanges&&this._deselectedToEmit.push(n))}_unmarkAll(){this.isEmpty()||this._selection.forEach(n=>this._unmarkSelected(n))}_verifyValueAssignment(n){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(n,e){if(this.compareWith){e=e??this._selection;for(let i of e)if(this.compareWith(n,i))return i;return n}return n}}let LGe=(()=>{class t{constructor(){this._listeners=[]}notify(e,i){for(let s of this._listeners)s(e,i)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(i=>e!==i)}}ngOnDestroy(){this._listeners=[]}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const PGe=["contentWrapper"],$Ge=["*"],Zle=new Ne("VIRTUAL_SCROLL_STRATEGY");class BGe{constructor(n,e,i){this._scrolledIndexChange=new ot,this.scrolledIndexChange=this._scrolledIndexChange.pipe(Tb()),this._viewport=null,this._itemSize=n,this._minBufferPx=e,this._maxBufferPx=i}attach(n){this._viewport=n,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(n,e,i){this._itemSize=n,this._minBufferPx=e,this._maxBufferPx=i,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(n,e){this._viewport&&this._viewport.scrollToOffset(n*this._itemSize,e)}_updateTotalContentSize(){this._viewport&&this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;const n=this._viewport.getRenderedRange(),e={start:n.start,end:n.end},i=this._viewport.getViewportSize(),s=this._viewport.getDataLength();let r=this._viewport.measureScrollOffset(),o=this._itemSize>0?r/this._itemSize:0;if(e.end>s){const l=Math.ceil(i/this._itemSize),c=Math.max(0,Math.min(o,s-l));o!=c&&(o=c,r=c*this._itemSize,e.start=Math.floor(o)),e.end=Math.max(0,Math.min(s,e.start+l))}const a=r-e.start*this._itemSize;if(a<this._minBufferPx&&0!=e.start){const l=Math.ceil((this._maxBufferPx-a)/this._itemSize);e.start=Math.max(0,e.start-l),e.end=Math.min(s,Math.ceil(o+(i+this._minBufferPx)/this._itemSize))}else{const l=e.end*this._itemSize-(r+i);if(l<this._minBufferPx&&e.end!=s){const c=Math.ceil((this._maxBufferPx-l)/this._itemSize);c>0&&(e.end=Math.min(s,e.end+c),e.start=Math.max(0,Math.floor(o-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(e),this._viewport.setRenderedContentOffset(this._itemSize*e.start),this._scrolledIndexChange.next(Math.floor(o))}}function VGe(t){return t._scrollStrategy}let zGe=(()=>{class t{constructor(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new BGe(this.itemSize,this.minBufferPx,this.maxBufferPx)}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=qm(e)}get minBufferPx(){return this._minBufferPx}set minBufferPx(e){this._minBufferPx=qm(e)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(e){this._maxBufferPx=qm(e)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=He({type:t,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},standalone:!0,features:[bt([{provide:Zle,useFactory:VGe,deps:[wn(()=>t)]}]),Rn]})}return t})(),vE=(()=>{class t{constructor(e,i,s){this._ngZone=e,this._platform=i,this._scrolled=new ot,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Pn(i=>{this._globalSubscription||this._addGlobalListener();const s=e>0?this._scrolled.pipe(aV(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ge()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const s=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(Zt(r=>!r||s.indexOf(r)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((s,r)=>{this._scrollableContainsElement(r,e)&&i.push(r)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let s=Km(i),r=e.getElementRef().nativeElement;do{if(s==r)return!0}while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>_f(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Lt),ae(Ys),ae(Yn,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),cV=(()=>{class t{constructor(e,i,s,r){this.elementRef=e,this.scrollDispatcher=i,this.ngZone=s,this.dir=r,this._destroyed=new ot,this._elementScrolled=new Pn(o=>this.ngZone.runOutsideAngular(()=>_f(this.elementRef.nativeElement,"scroll").pipe(Ni(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const i=this.elementRef.nativeElement,s=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=s?e.end:e.start),null==e.right&&(e.right=s?e.start:e.end),null!=e.bottom&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),s&&fE()!=Wh.NORMAL?(null!=e.left&&(e.right=i.scrollWidth-i.clientWidth-e.left),fE()==Wh.INVERTED?e.left=e.right:fE()==Wh.NEGATED&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const i=this.elementRef.nativeElement;nle()?i.scrollTo(e):(null!=e.top&&(i.scrollTop=e.top),null!=e.left&&(i.scrollLeft=e.left))}measureScrollOffset(e){const i="left",s="right",r=this.elementRef.nativeElement;if("top"==e)return r.scrollTop;if("bottom"==e)return r.scrollHeight-r.clientHeight-r.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==e?e=o?s:i:"end"==e&&(e=o?i:s),o&&fE()==Wh.INVERTED?e==i?r.scrollWidth-r.clientWidth-r.scrollLeft:r.scrollLeft:o&&fE()==Wh.NEGATED?e==i?r.scrollLeft+r.scrollWidth-r.clientWidth:-r.scrollLeft:e==i?r.scrollLeft:r.scrollWidth-r.clientWidth-r.scrollLeft}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(vE),I(Lt),I(jo,8))};static#t=this.\u0275dir=He({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}return t})(),g0=(()=>{class t{constructor(e,i,s){this._platform=e,this._change=new ot,this._changeListener=r=>{this._change.next(r)},this._document=s,i.runOutsideAngular(()=>{if(e.isBrowser){const r=this._getWindow();r.addEventListener("resize",this._changeListener),r.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:s}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+s,right:e.left+i,height:s,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),s=e.documentElement,r=s.getBoundingClientRect();return{top:-r.top||e.body.scrollTop||i.scrollY||s.scrollTop||0,left:-r.left||e.body.scrollLeft||i.scrollX||s.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(aV(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Ys),ae(Lt),ae(Yn,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Qle=new Ne("VIRTUAL_SCROLLABLE");let jGe=(()=>{class t extends cV{constructor(e,i,s,r){super(e,i,s,r)}measureViewportSize(e){const i=this.elementRef.nativeElement;return"horizontal"===e?i.clientWidth:i.clientHeight}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(vE),I(Lt),I(jo,8))};static#t=this.\u0275dir=He({type:t,features:[Ze]})}return t})();const WGe=typeof requestAnimationFrame<"u"?SGe:oV;let Jle=(()=>{class t extends jGe{get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}constructor(e,i,s,r,o,a,l,c){super(e,a,s,o),this.elementRef=e,this._changeDetectorRef=i,this._scrollStrategy=r,this.scrollable=c,this._platform=xe(Ys),this._detachedSubject=new ot,this._renderedRangeSubject=new ot,this._orientation="vertical",this.appendOnly=!1,this.scrolledIndexChange=new Pn(u=>this._scrollStrategy.scrolledIndexChange.subscribe(d=>Promise.resolve().then(()=>this.ngZone.run(()=>u.next(d))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=rn.EMPTY,this._injector=xe(ci),this._isDestroyed=!1,this._viewportChanges=l.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(Uo(null),aV(0,WGe),Ni(this._destroyed)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),this._isDestroyed=!0,super.ngOnDestroy()}attach(e){this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe(Ni(this._detachedSubject)).subscribe(i=>{const s=i.length;s!==this._dataLength&&(this._dataLength=s,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(e){return this.getElementRef().nativeElement.getBoundingClientRect()[e]}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){(function HGe(t,n){return t.start==n.start&&t.end==n.end})(this._renderedRange,e)||(this.appendOnly&&(e={start:0,end:Math.max(this._renderedRange.end,e.end)}),this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,i="to-start"){e=this.appendOnly&&"to-start"===i?0:e;const r="horizontal"==this.orientation,o=r?"X":"Y";let l=`translate${o}(${Number((r&&this.dir&&"rtl"==this.dir.value?-1:1)*e)}px)`;this._renderedContentOffset=e,"to-end"===i&&(l+=` translate${o}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=l&&(this._renderedContentTransform=l,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,i="auto"){const s={behavior:i};"horizontal"===this.orientation?s.start=e:s.top=e,this.scrollable.scrollTo(s)}scrollToIndex(e,i="auto"){this._scrollStrategy.scrollToIndex(e,i)}measureScrollOffset(e){let i;return i=this.scrollable==this?s=>super.measureScrollOffset(s):s=>this.scrollable.measureScrollOffset(s),Math.max(0,i(e??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(e){let i;const s="left",r="right",o="rtl"==this.dir?.value;i="start"==e?o?r:s:"end"==e?o?s:r:e||("horizontal"===this.orientation?"left":"top");const a=this.scrollable.measureBoundingClientRectWithScrollOffset(i);return this.elementRef.nativeElement.getBoundingClientRect()[i]-a}measureRenderedContentSize(){const e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isDestroyed||this.ngZone.run(()=>{this._changeDetectorRef.markForCheck(),this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,pl(()=>{this._isChangeDetectionPending=!1;const e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const i of e)i()},{injector:this._injector})})}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(wi),I(Lt),I(Zle,8),I(jo,8),I(vE),I(g0),I(Qle,8))};static#t=this.\u0275cmp=Se({type:t,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(i,s){if(1&i&&Gt(PGe,7),2&i){let r;nt(r=it())&&(s._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(i,s){2&i&&Oe("cdk-virtual-scroll-orientation-horizontal","horizontal"===s.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==s.orientation)},inputs:{orientation:"orientation",appendOnly:[2,"appendOnly","appendOnly",ft]},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[bt([{provide:cV,useFactory:(e,i)=>e||i,deps:[[new Ih,new XX(Qle)],t]}]),Li,Ze,Ln],ngContentSelectors:$Ge,decls:4,vars:4,consts:[["contentWrapper",""],[1,"cdk-virtual-scroll-content-wrapper"],[1,"cdk-virtual-scroll-spacer"]],template:function(i,s){1&i&&(Si(),m(0,"div",1,0),en(2),_(),q(3,"div",2)),2&i&&(b(3),Hn("width",s._totalContentWidth)("height",s._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0})}return t})();function ece(t,n,e){if(!e.getBoundingClientRect)return 0;const s=e.getBoundingClientRect();return"horizontal"===t?"start"===n?s.left:s.right:"start"===n?s.top:s.bottom}let qGe=(()=>{class t{get cdkVirtualForOf(){return this._cdkVirtualForOf}set cdkVirtualForOf(e){this._cdkVirtualForOf=e,function BN(t){return t&&"function"==typeof t.connect&&!(t instanceof VM)}(e)?this._dataSourceChanges.next(e):this._dataSourceChanges.next(new FGe(Zc(e)?e:Array.from(e||[])))}get cdkVirtualForTrackBy(){return this._cdkVirtualForTrackBy}set cdkVirtualForTrackBy(e){this._needsUpdate=!0,this._cdkVirtualForTrackBy=e?(i,s)=>e(i+(this._renderedRange?this._renderedRange.start:0),s):void 0}set cdkVirtualForTemplate(e){e&&(this._needsUpdate=!0,this._template=e)}get cdkVirtualForTemplateCacheSize(){return this._viewRepeater.viewCacheSize}set cdkVirtualForTemplateCacheSize(e){this._viewRepeater.viewCacheSize=qm(e)}constructor(e,i,s,r,o,a){this._viewContainerRef=e,this._template=i,this._differs=s,this._viewRepeater=r,this._viewport=o,this.viewChange=new ot,this._dataSourceChanges=new ot,this.dataStream=this._dataSourceChanges.pipe(Uo(null),function NGe(){return t=>t.lift(new OGe)}(),Kt(([l,c])=>this._changeDataSource(l,c)),zn(1)),this._differ=null,this._needsUpdate=!1,this._destroyed=new ot,this.dataStream.subscribe(l=>{this._data=l,this._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe(Ni(this._destroyed)).subscribe(l=>{this._renderedRange=l,this.viewChange.observers.length&&a.run(()=>this.viewChange.next(this._renderedRange)),this._onRenderedDataChange()}),this._viewport.attach(this)}measureRangeSize(e,i){if(e.start>=e.end)return 0;const s=e.start-this._renderedRange.start,r=e.end-e.start;let o,a;for(let l=0;l<r;l++){const c=this._viewContainerRef.get(l+s);if(c&&c.rootNodes.length){o=a=c.rootNodes[0];break}}for(let l=r-1;l>-1;l--){const c=this._viewContainerRef.get(l+s);if(c&&c.rootNodes.length){a=c.rootNodes[c.rootNodes.length-1];break}}return o&&a?ece(i,"end",a)-ece(i,"start",o):0}ngDoCheck(){if(this._differ&&this._needsUpdate){const e=this._differ.diff(this._renderedItems);e?this._applyChanges(e):this._updateContext(),this._needsUpdate=!1}}ngOnDestroy(){this._viewport.detach(),this._dataSourceChanges.next(void 0),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete(),this._viewRepeater.detach()}_onRenderedDataChange(){this._renderedRange&&(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create((e,i)=>this.cdkVirtualForTrackBy?this.cdkVirtualForTrackBy(e,i):i)),this._needsUpdate=!0)}_changeDataSource(e,i){return e&&e.disconnect(this),this._needsUpdate=!0,i?i.connect(this):Ge()}_updateContext(){const e=this._data.length;let i=this._viewContainerRef.length;for(;i--;){const s=this._viewContainerRef.get(i);s.context.index=this._renderedRange.start+i,s.context.count=e,this._updateComputedContextProperties(s.context),s.detectChanges()}}_applyChanges(e){this._viewRepeater.applyChanges(e,this._viewContainerRef,(r,o,a)=>this._getEmbeddedViewArgs(r,a),r=>r.item),e.forEachIdentityChange(r=>{this._viewContainerRef.get(r.currentIndex).context.$implicit=r.item});const i=this._data.length;let s=this._viewContainerRef.length;for(;s--;){const r=this._viewContainerRef.get(s);r.context.index=this._renderedRange.start+s,r.context.count=i,this._updateComputedContextProperties(r.context)}}_updateComputedContextProperties(e){e.first=0===e.index,e.last=e.index===e.count-1,e.even=e.index%2==0,e.odd=!e.even}_getEmbeddedViewArgs(e,i){return{templateRef:this._template,context:{$implicit:e.item,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1},index:i}}static#e=this.\u0275fac=function(i){return new(i||t)(I(Kr),I(hr),I(rf),I(Nb),I(Jle,4),I(Lt))};static#t=this.\u0275dir=He({type:t,selectors:[["","cdkVirtualFor","","cdkVirtualForOf",""]],inputs:{cdkVirtualForOf:"cdkVirtualForOf",cdkVirtualForTrackBy:"cdkVirtualForTrackBy",cdkVirtualForTemplate:"cdkVirtualForTemplate",cdkVirtualForTemplateCacheSize:"cdkVirtualForTemplateCacheSize"},standalone:!0,features:[bt([{provide:Nb,useClass:lV}])]})}return t})(),Ob=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({})}return t})(),yE=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[mE,Ob,mE,Ob]})}return t})();function VN(t,n=!1){return e=>e.lift(new KGe(t,n))}class KGe{constructor(n,e){this.predicate=n,this.inclusive=e}call(n,e){return e.subscribe(new XGe(n,this.predicate,this.inclusive))}}class XGe extends Mi{constructor(n,e,i){super(n),this.predicate=e,this.inclusive=i,this.index=0}_next(n){const e=this.destination;let i;try{i=this.predicate(n,this.index++)}catch(s){return void e.error(s)}this.nextOrComplete(n,i)}nextOrComplete(n,e){const i=this.destination;e?i.next(n):(this.inclusive&&i.next(n),i.complete())}}const tce=nle();class YGe{constructor(n,e){this._viewportRuler=n,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=Go(-this._previousScrollPosition.left),n.style.top=Go(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const n=this._document.documentElement,i=n.style,s=this._document.body.style,r=i.scrollBehavior||"",o=s.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),tce&&(i.scrollBehavior=s.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),tce&&(i.scrollBehavior=r,s.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class ZGe{constructor(n,e,i,s){this._scrollDispatcher=n,this._ngZone=e,this._viewportRuler=i,this._config=s,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(n){this._overlayRef=n}enable(){if(this._scrollSubscription)return;const n=this._scrollDispatcher.scrolled(0).pipe(Zt(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class nce{enable(){}disable(){}attach(){}}function uV(t,n){return n.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function ice(t,n){return n.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class QGe{constructor(n,e,i,s){this._scrollDispatcher=n,this._viewportRuler=e,this._ngZone=i,this._config=s,this._scrollSubscription=null}attach(n){this._overlayRef=n}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:s}=this._viewportRuler.getViewportSize();uV(e,[{width:i,height:s,bottom:s,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let JGe=(()=>{class t{constructor(e,i,s,r){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=s,this.noop=()=>new nce,this.close=o=>new ZGe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new YGe(this._viewportRuler,this._document),this.reposition=o=>new QGe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=r}static#e=this.\u0275fac=function(i){return new(i||t)(ae(vE),ae(g0),ae(Lt),ae(Yn))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class b0{constructor(n){if(this.scrollStrategy=new nce,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,n){const e=Object.keys(n);for(const i of e)void 0!==n[i]&&(this[i]=n[i])}}}class eje{constructor(n,e){this.connectionPair=n,this.scrollableViewProperties=e}}let sce=(()=>{class t{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Yn))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),tje=(()=>{class t extends sce{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=s=>{const r=this._attachedOverlays;for(let o=r.length-1;o>-1;o--)if(r[o]._keydownEvents.observers.length>0){const a=r[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(s)):a.next(s);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Yn),ae(Lt,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),nje=(()=>{class t extends sce{constructor(e,i,s){super(e),this._platform=i,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=r=>{this._pointerDownEventTarget=Xd(r)},this._clickListener=r=>{const o=Xd(r),a="click"===r.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(rce(u.overlayElement,o)||rce(u.overlayElement,a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Yn),ae(Ys),ae(Lt,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function rce(t,n){const e=typeof ShadowRoot<"u"&&ShadowRoot;let i=n;for(;i;){if(i===t)return!0;i=e&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}let zN=(()=>{class t{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||G6()){const s=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let r=0;r<s.length;r++)s[r].remove()}const i=this._document.createElement("div");i.classList.add(e),G6()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Yn),ae(Ys))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class wE{constructor(n,e,i,s,r,o,a,l,c,u=!1,d){this._portalOutlet=n,this._host=e,this._pane=i,this._config=s,this._ngZone=r,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._injector=d,this._backdropElement=null,this._backdropClick=new ot,this._attachments=new ot,this._detachments=new ot,this._locationChanges=rn.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new ot,this._outsidePointerEvents=new ot,this._renders=new ot,s.scrollStrategy&&(this._scrollStrategy=s.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=s.positionStrategy,this._afterRenderRef=Ud(()=>L8(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(n){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(n);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),pl(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){const n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,n&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config={...this._config,...n},this._updateElementSize()}setDirection(n){this._config={...this._config,direction:n},this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){const n=this._config.direction;return n?"string"==typeof n?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const n=this._pane.style;n.width=Go(this._config.width),n.height=Go(this._config.height),n.minWidth=Go(this._config.minWidth),n.minHeight=Go(this._config.minHeight),n.maxWidth=Go(this._config.maxWidth),n.maxHeight=Go(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){const n="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(n)})}):this._backdropElement.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const n=this._backdropElement;if(n){if(this._animationsDisabled)return void this._disposeBackdrop(n);n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{n.addEventListener("transitionend",this._backdropTransitionendHandler)}),n.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(n)},500))}}_toggleClasses(n,e,i){const s=yN(e||[]).filter(r=>!!r);s.length&&(i?n.classList.add(...s):n.classList.remove(...s))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{const n=this._renders.pipe(Ni(sr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),n.unsubscribe())})})}_disposeScrollStrategy(){const n=this._scrollStrategy;n&&(n.disable(),n.detach&&n.detach())}_disposeBackdrop(n){n&&(n.removeEventListener("click",this._backdropClickHandler),n.removeEventListener("transitionend",this._backdropTransitionendHandler),n.remove(),this._backdropElement===n&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const oce="cdk-overlay-connected-position-bounding-box",ije=/([A-Za-z%]+)$/;class sje{get positions(){return this._preferredPositions}constructor(n,e,i,s,r){this._viewportRuler=e,this._document=i,this._platform=s,this._overlayContainer=r,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ot,this._resizeSubscription=rn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(n)}attach(n){this._validatePositions(),n.hostElement.classList.add(oce),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._originRect,e=this._overlayRect,i=this._viewportRect,s=this._containerRect,r=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(n,s,a),c=this._getOverlayPoint(l,e,a),u=this._getOverlayFit(c,e,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?r.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(r.length){let a=null,l=-1;for(const c of r){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Rb(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(oce),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,e)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,-1===n.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,e,i){let s,r;if("center"==i.originX)s=n.left+n.width/2;else{const o=this._isRtl()?n.right:n.left,a=this._isRtl()?n.left:n.right;s="start"==i.originX?o:a}return e.left<0&&(s-=e.left),r="center"==i.originY?n.top+n.height/2:"top"==i.originY?n.top:n.bottom,e.top<0&&(r-=e.top),{x:s,y:r}}_getOverlayPoint(n,e,i){let s,r;return s="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,r="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:n.x+s,y:n.y+r}}_getOverlayFit(n,e,i,s){const r=lce(e);let{x:o,y:a}=n,l=this._getOffset(s,"x"),c=this._getOffset(s,"y");l&&(o+=l),c&&(a+=c);let h=0-a,p=a+r.height-i.height,f=this._subtractOverflows(r.width,0-o,o+r.width-i.width),g=this._subtractOverflows(r.height,h,p),v=f*g;return{visibleArea:v,isCompletelyWithinViewport:r.width*r.height===v,fitsInViewportVertically:g===r.height,fitsInViewportHorizontally:f==r.width}}_canFitWithFlexibleDimensions(n,e,i){if(this._hasFlexibleDimensions){const s=i.bottom-e.y,r=i.right-e.x,o=ace(this._overlayRef.getConfig().minHeight),a=ace(this._overlayRef.getConfig().minWidth);return(n.fitsInViewportVertically||null!=o&&o<=s)&&(n.fitsInViewportHorizontally||null!=a&&a<=r)}return!1}_pushOverlayOnScreen(n,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};const s=lce(e),r=this._viewportRect,o=Math.max(n.x+s.width-r.width,0),a=Math.max(n.y+s.height-r.height,0),l=Math.max(r.top-i.top-n.y,0),c=Math.max(r.left-i.left-n.x,0);let u=0,d=0;return u=s.width<=r.width?c||-o:n.x<this._viewportMargin?r.left-i.left-n.x:0,d=s.height<=r.height?l||-a:n.y<this._viewportMargin?r.top-i.top-n.y:0,this._previousPushAmount={x:u,y:d},{x:n.x+u,y:n.y+d}}_applyPosition(n,e){if(this._setTransformOrigin(n),this._setOverlayElementStyles(e,n),this._setBoundingBoxStyles(e,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._positionChanges.observers.length){const i=this._getScrollVisibility();if(n!==this._lastPosition||!this._lastScrollVisibility||!function rje(t,n){return t===n||t.isOriginClipped===n.isOriginClipped&&t.isOriginOutsideView===n.isOriginOutsideView&&t.isOverlayClipped===n.isOverlayClipped&&t.isOverlayOutsideView===n.isOverlayOutsideView}(this._lastScrollVisibility,i)){const s=new eje(n,i);this._positionChanges.next(s)}this._lastScrollVisibility=i}this._lastPosition=n,this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,s=n.overlayY;i="center"===n.overlayX?"center":this._isRtl()?"start"===n.overlayX?"right":"left":"start"===n.overlayX?"left":"right";for(let r=0;r<e.length;r++)e[r].style.transformOrigin=`${i} ${s}`}_calculateBoundingBoxRect(n,e){const i=this._viewportRect,s=this._isRtl();let r,o,a,u,d,h;if("top"===e.overlayY)o=n.y,r=i.height-o+this._viewportMargin;else if("bottom"===e.overlayY)a=i.height-n.y+2*this._viewportMargin,r=i.height-a+this._viewportMargin;else{const p=Math.min(i.bottom-n.y+i.top,n.y),f=this._lastBoundingBoxSize.height;r=2*p,o=n.y-p,r>f&&!this._isInitialRender&&!this._growAfterOpen&&(o=n.y-f/2)}if("end"===e.overlayX&&!s||"start"===e.overlayX&&s)h=i.width-n.x+2*this._viewportMargin,u=n.x-this._viewportMargin;else if("start"===e.overlayX&&!s||"end"===e.overlayX&&s)d=n.x,u=i.right-n.x;else{const p=Math.min(i.right-n.x+i.left,n.x),f=this._lastBoundingBoxSize.width;u=2*p,d=n.x-p,u>f&&!this._isInitialRender&&!this._growAfterOpen&&(d=n.x-f/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:r}}_setBoundingBoxStyles(n,e){const i=this._calculateBoundingBoxRect(n,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const s={};if(this._hasExactPosition())s.top=s.left="0",s.bottom=s.right=s.maxHeight=s.maxWidth="",s.width=s.height="100%";else{const r=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;s.height=Go(i.height),s.top=Go(i.top),s.bottom=Go(i.bottom),s.width=Go(i.width),s.left=Go(i.left),s.right=Go(i.right),s.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",s.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",r&&(s.maxHeight=Go(r)),o&&(s.maxWidth=Go(o))}this._lastBoundingBoxSize=i,Rb(this._boundingBox.style,s)}_resetBoundingBoxStyles(){Rb(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Rb(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,e){const i={},s=this._hasExactPosition(),r=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(s){const u=this._viewportRuler.getViewportScrollPosition();Rb(i,this._getExactOverlayY(e,n,u)),Rb(i,this._getExactOverlayX(e,n,u))}else i.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(s?i.maxHeight=Go(o.maxHeight):r&&(i.maxHeight="")),o.maxWidth&&(s?i.maxWidth=Go(o.maxWidth):r&&(i.maxWidth="")),Rb(this._pane.style,i)}_getExactOverlayY(n,e,i){let s={top:"",bottom:""},r=this._getOverlayPoint(e,this._overlayRect,n);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,i)),"bottom"===n.overlayY?s.bottom=this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)+"px":s.top=Go(r.y),s}_getExactOverlayX(n,e,i){let o,s={left:"",right:""},r=this._getOverlayPoint(e,this._overlayRect,n);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,i)),o=this._isRtl()?"end"===n.overlayX?"left":"right":"end"===n.overlayX?"right":"left","right"===o?s.right=this._document.documentElement.clientWidth-(r.x+this._overlayRect.width)+"px":s.left=Go(r.x),s}_getScrollVisibility(){const n=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(s=>s.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:ice(n,i),isOriginOutsideView:uV(n,i),isOverlayClipped:ice(e,i),isOverlayOutsideView:uV(e,i)}}_subtractOverflows(n,...e){return e.reduce((i,s)=>i-Math.max(s,0),n)}_getNarrowedViewportRect(){const n=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+n-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:n-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,e){return"x"===e?null==n.offsetX?this._offsetX:n.offsetX:null==n.offsetY?this._offsetY:n.offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&yN(n).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){const n=this._origin;if(n instanceof vt)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();const e=n.width||0,i=n.height||0;return{top:n.y,bottom:n.y+i,left:n.x,right:n.x+e,height:i,width:e}}}function Rb(t,n){for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}function ace(t){if("number"!=typeof t&&null!=t){const[n,e]=t.split(ije);return e&&"px"!==e?null:parseFloat(n)}return t||null}function lce(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}const cce="cdk-global-overlay-wrapper";class oje{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(n){const e=n.getConfig();this._overlayRef=n,this._width&&!e.width&&n.updateSize({width:this._width}),this._height&&!e.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(cce),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:s,height:r,maxWidth:o,maxHeight:a}=i,l=!("100%"!==s&&"100vw"!==s||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==r&&"100vh"!==r||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,d=this._xOffset,h="rtl"===this._overlayRef.getConfig().direction;let p="",f="",g="";l?g="flex-start":"center"===u?(g="center",h?f=d:p=d):h?"left"===u||"end"===u?(g="flex-end",p=d):("right"===u||"start"===u)&&(g="flex-start",f=d):"left"===u||"start"===u?(g="flex-start",p=d):("right"===u||"end"===u)&&(g="flex-end",f=d),n.position=this._cssPosition,n.marginLeft=l?"0":p,n.marginTop=c?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=l?"0":f,e.justifyContent=g,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(cce),i.justifyContent=i.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}}let aje=(()=>{class t{constructor(e,i,s,r){this._viewportRuler=e,this._document=i,this._platform=s,this._overlayContainer=r}global(){return new oje}flexibleConnectedTo(e){return new sje(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||t)(ae(g0),ae(Yn),ae(Ys),ae(zN))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),lje=0,rr=(()=>{class t{constructor(e,i,s,r,o,a,l,c,u,d,h,p){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=s,this._positionBuilder=r,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h,this._animationsModuleType=p}create(e){const i=this._createHostElement(),s=this._createPaneElement(i),r=this._createPortalOutlet(s),o=new b0(e);return o.direction=o.direction||this._directionality.value,new wE(r,i,s,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType,this._injector.get(ul))}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+lje++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(qc)),new yGe(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||t)(ae(JGe),ae(zN),ae(f1),ae(aje),ae(tje),ae(ci),ae(Lt),ae(Yn),ae(jo),ae(lb),ae(nje),ae(ua,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const cje=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],uce=new Ne("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{const t=xe(rr);return()=>t.scrollStrategies.reposition()}});let UN=(()=>{class t{constructor(e){this.elementRef=e}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt))};static#t=this.\u0275dir=He({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0})}return t})(),dce=(()=>{class t{get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}constructor(e,i,s,r,o){this._overlay=e,this._dir=o,this._backdropSubscription=rn.EMPTY,this._attachSubscription=rn.EMPTY,this._detachSubscription=rn.EMPTY,this._positionSubscription=rn.EMPTY,this._disposeOnNavigation=!1,this._ngZone=xe(Lt),this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.hasBackdrop=!1,this.lockPosition=!1,this.flexibleDimensions=!1,this.growAfterOpen=!1,this.push=!1,this.backdropClick=new Ae,this.positionChange=new Ae,this.attach=new Ae,this.detach=new Ae,this.overlayKeydown=new Ae,this.overlayOutsideClick=new Ae,this._templatePortal=new Mb(i,s),this._scrollStrategyFactory=r,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=cje);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!Da(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{const s=this._getOriginElement(),r=Xd(i);(!s||s!==r&&!s.contains(r))&&this.overlayOutsideClick.next(i)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),i=new b0({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(e){const i=this.positions.map(s=>({originX:s.originX,originY:s.originY,overlayX:s.overlayX,overlayY:s.overlayY,offsetX:s.offsetX||this.offsetX,offsetY:s.offsetY||this.offsetY,panelClass:s.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof UN?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof UN?this.origin.elementRef.nativeElement:this.origin instanceof vt?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(VN(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)(I(rr),I(hr),I(Kr),I(uce),I(jo,8))};static#t=this.\u0275dir=He({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",ft],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",ft],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",ft],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",ft],push:[2,"cdkConnectedOverlayPush","push",ft],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",ft]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[Li,Rn]})}return t})();const dje={provide:uce,deps:[rr],useFactory:function uje(t){return()=>t.scrollStrategies.reposition()}};let vf=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:[rr,dje],imports:[mE,qh,yE,yE]})}return t})();function hje(t,n){if(1&t){const e=se();m(0,"div",1)(1,"button",2),P("click",function(){return B(e),V(E().action())}),S(2),_()()}if(2&t){const e=E();b(2),K(" ",e.data.action," ")}}const pje=["label"];function fje(t,n){}const mje=Math.pow(2,31)-1;class dV{constructor(n,e){this._overlayRef=e,this._afterDismissed=new ot,this._afterOpened=new ot,this._onAction=new ot,this._dismissedByAction=!1,this.containerInstance=n,n._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(n){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(n,mje))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const hce=new Ne("MatSnackBarData");class GN{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let pce=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=He({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0})}return t})(),fce=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=He({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0})}return t})(),mce=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=He({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0})}return t})(),_ce=(()=>{class t{constructor(e,i){this.snackBarRef=e,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static#e=this.\u0275fac=function(i){return new(i||t)(I(dV),I(hce))};static#t=this.\u0275cmp=Se({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[Ln],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(i,s){1&i&&(m(0,"div",0),S(1),_(),O(2,hje,3,1,"div",1)),2&i&&(b(),K(" ",s.data.message,"\n"),b(),Bn(s.hasAction?2:-1))},dependencies:[nV,pce,fce,mce],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}return t})();const _je={snackBarState:zo("state",[Xs("void, hidden",bn({transform:"scale(0.8)",opacity:0})),Xs("visible",bn({transform:"scale(1)",opacity:1})),ms("* => visible",Cs("150ms cubic-bezier(0, 0, 0.2, 1)")),ms("* => void, * => hidden",Cs("75ms cubic-bezier(0.4, 0.0, 1, 1)",bn({opacity:0})))])};let gje=0,gce=(()=>{class t extends LN{constructor(e,i,s,r,o){super(),this._ngZone=e,this._elementRef=i,this._changeDetectorRef=s,this._platform=r,this.snackBarConfig=o,this._document=xe(Yn),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new ot,this._onExit=new ot,this._onEnter=new ot,this._animationState="void",this._liveElementId="mat-snack-bar-container-live-"+gje++,this.attachDomPortal=a=>{this._assertNotAttached();const l=this._portalOutlet.attachDomPortal(a);return this._afterPortalAttached(),l},this._live="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),i}attachTemplatePortal(e){this._assertNotAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),i}onAnimationEnd(e){const{fromState:i,toState:s}=e;if(("void"===s&&"void"!==i||"hidden"===s)&&this._completeExit(),"visible"===s){const r=this._onEnter;this._ngZone.run(()=>{r.next(),r.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){const e=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(o=>e.classList.add(o)):e.classList.add(i)),this._exposeToModals();const s=this._label.nativeElement,r="mdc-snackbar__label";s.classList.toggle(r,!s.querySelector(`.${r}`))}_exposeToModals(){const e=this._liveElementId,i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let s=0;s<i.length;s++){const r=i[s],o=r.getAttribute("aria-owns");this._trackedModals.add(r),o?-1===o.indexOf(e)&&r.setAttribute("aria-owns",o+" "+e):r.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{const i=e.getAttribute("aria-owns");if(i){const s=i.replace(this._liveElementId,"").trim();s.length>0?e.setAttribute("aria-owns",s):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&i){let s=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(s=document.activeElement),e.removeAttribute("aria-hidden"),i.appendChild(e),s?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static#e=this.\u0275fac=function(i){return new(i||t)(I(Lt),I(vt),I(wi),I(Ys),I(GN))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(i,s){if(1&i&&(Gt(Ym,7),Gt(pje,7)),2&i){let r;nt(r=it())&&(s._portalOutlet=r.first),nt(r=it())&&(s._label=r.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:1,hostBindings:function(i,s){1&i&&vx("@state.done",function(o){return s.onAnimationEnd(o)}),2&i&&px("@state",s._animationState)},standalone:!0,features:[Ze,Ln],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(i,s){1&i&&(m(0,"div",1)(1,"div",2,0)(3,"div",3),O(4,fje,0,0,"ng-template",4),_(),q(5,"div"),_()()),2&i&&(b(5),wt("aria-live",s._live)("role",s._role)("id",s._liveElementId))},dependencies:[Ym],styles:[".mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}.cdk-high-contrast-active .mat-mdc-snackbar-surface{outline:solid 1px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color, var(--mat-app-inverse-on-surface));border-radius:var(--mdc-snackbar-container-shape, var(--mat-app-corner-extra-small));background-color:var(--mdc-snackbar-container-color, var(--mat-app-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font, var(--mat-app-body-medium-font));font-size:var(--mdc-snackbar-supporting-text-size, var(--mat-app-body-medium-size));font-weight:var(--mdc-snackbar-supporting-text-weight, var(--mat-app-body-medium-weight));line-height:var(--mdc-snackbar-supporting-text-line-height, var(--mat-app-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color, var(--mat-app-inverse-primary));--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}"],encapsulation:2,data:{animation:[_je.snackBarState]}})}return t})();const vje=new Ne("mat-snack-bar-default-options",{providedIn:"root",factory:function bje(){return new GN}});let bce=(()=>{class t{get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(e,i,s,r,o,a){this._overlay=e,this._live=i,this._injector=s,this._breakpointObserver=r,this._parentSnackBar=o,this._defaultConfig=a,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=_ce,this.snackBarContainerComponent=gce,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(e,i){return this._attach(e,i)}openFromTemplate(e,i){return this._attach(e,i)}open(e,i="",s){const r={...this._defaultConfig,...s};return r.data={message:e,action:i},r.announcementMessage===e&&(r.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,r)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,i){const r=ci.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:GN,useValue:i}]}),o=new Ab(this.snackBarContainerComponent,i.viewContainerRef,r),a=e.attach(o);return a.instance.snackBarConfig=i,a.instance}_attach(e,i){const s={...new GN,...this._defaultConfig,...i},r=this._createOverlay(s),o=this._attachSnackBarContainer(r,s),a=new dV(o,r);if(e instanceof hr){const l=new Mb(e,null,{$implicit:s.data,snackBarRef:a});a.instance=o.attachTemplatePortal(l)}else{const l=this._createInjector(s,a),c=new Ab(e,void 0,l),u=o.attachComponentPortal(c);a.instance=u.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Ni(r.detachments())).subscribe(l=>{r.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),s.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(s.announcementMessage,s.politeness)}),this._animateSnackBar(a,s),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(e,i){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),i.duration&&i.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(i.duration))}_createOverlay(e){const i=new b0;i.direction=e.direction;let s=this._overlay.position().global();const r="rtl"===e.direction,o="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!r||"end"===e.horizontalPosition&&r,a=!o&&"center"!==e.horizontalPosition;return o?s.left("0"):a?s.right("0"):s.centerHorizontally(),"top"===e.verticalPosition?s.top("0"):s.bottom("0"),i.positionStrategy=s,this._overlay.create(i)}_createInjector(e,i){return ci.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:dV,useValue:i},{provide:hce,useValue:e.data}]})}static#e=this.\u0275fac=function(i){return new(i||t)(ae(rr),ae(Ele),ae(ci),ae(wN),ae(t,12),ae(vje))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),yje=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:[bce],imports:[vf,qh,_0,Yi,_ce,Yi]})}return t})();class wje{constructor(n){this._box=n,this._destroyed=new ot,this._resizeSubject=new ot,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(n){return this._elementObservables.has(n)||this._elementObservables.set(n,new Pn(e=>{const i=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(n,{box:this._box}),()=>{this._resizeObserver?.unobserve(n),i.unsubscribe(),this._elementObservables.delete(n)}}).pipe(Zt(e=>e.some(i=>i.target===n)),zn({bufferSize:1,refCount:!0}),Ni(this._destroyed))),this._elementObservables.get(n)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let Cje=(()=>{class t{constructor(){this._observers=new Map,this._ngZone=xe(Lt)}ngOnDestroy(){for(const[,e]of this._observers)e.destroy();this._observers.clear()}observe(e,i){const s=i?.box||"content-box";return this._observers.has(s)||this._observers.set(s,new wje(s)),this._observers.get(s).observe(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Sje=["notch"],xje=["matFormFieldNotchedOutline",""],Eje=["*"],Tje=["textField"],Ije=["iconPrefixContainer"],kje=["textPrefixContainer"],Dje=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Aje=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function Mje(t,n){1&t&&q(0,"span",19)}function Nje(t,n){if(1&t&&(m(0,"label",18),en(1,1),O(2,Mje,1,0,"span",19),_()),2&t){const e=E(2);C("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),wt("for",e._control.disableAutomaticLabeling?null:e._control.id),b(2),Bn(!e.hideRequiredMarker&&e._control.required?2:-1)}}function Oje(t,n){1&t&&O(0,Nje,3,5,"label",18),2&t&&Bn(E()._hasFloatingLabel()?0:-1)}function Rje(t,n){1&t&&q(0,"div",5)}function Fje(t,n){}function Lje(t,n){1&t&&O(0,Fje,0,0,"ng-template",11),2&t&&(E(2),C("ngTemplateOutlet",xt(1)))}function Pje(t,n){if(1&t&&(m(0,"div",7),O(1,Lje,1,1,null,11),_()),2&t){const e=E();C("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),b(),Bn(e._forceDisplayInfixLabel()?-1:1)}}function $je(t,n){1&t&&(m(0,"div",8,2),en(2,2),_())}function Bje(t,n){1&t&&(m(0,"div",9,3),en(2,3),_())}function Vje(t,n){}function zje(t,n){1&t&&O(0,Vje,0,0,"ng-template",11),2&t&&(E(),C("ngTemplateOutlet",xt(1)))}function Uje(t,n){1&t&&(m(0,"div",12),en(1,4),_())}function Gje(t,n){1&t&&(m(0,"div",13),en(1,5),_())}function jje(t,n){1&t&&q(0,"div",14)}function Hje(t,n){1&t&&(m(0,"div",16),en(1,6),_()),2&t&&C("@transitionMessages",E()._subscriptAnimationState)}function Wje(t,n){if(1&t&&(m(0,"mat-hint",20),S(1),_()),2&t){const e=E(2);C("id",e._hintLabelId),b(),Ye(e.hintLabel)}}function qje(t,n){if(1&t&&(m(0,"div",17),O(1,Wje,2,2,"mat-hint",20),en(2,7),q(3,"div",21),en(4,8),_()),2&t){const e=E();C("@transitionMessages",e._subscriptAnimationState),b(),Bn(e.hintLabel?1:-1)}}let vce=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=He({type:t,selectors:[["mat-label"]],standalone:!0})}return t})(),Kje=0;const yce=new Ne("MatError");let Kh=(()=>{class t{constructor(e,i){this.id="mat-mdc-error-"+Kje++,e||i.nativeElement.setAttribute("aria-live","polite")}static#e=this.\u0275fac=function(i){return new(i||t)(sc("aria-live"),I(vt))};static#t=this.\u0275dir=He({type:t,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(i,s){2&i&&fl("id",s.id)},inputs:{id:"id"},standalone:!0,features:[bt([{provide:yce,useExisting:t}])]})}return t})(),Xje=0,hV=(()=>{class t{constructor(){this.align="start",this.id="mat-mdc-hint-"+Xje++}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=He({type:t,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,s){2&i&&(fl("id",s.id),wt("align",null),Oe("mat-mdc-form-field-hint-end","end"===s.align))},inputs:{align:"align",id:"id"},standalone:!0})}return t})();const wce=new Ne("MatPrefix");let Cce=(()=>{class t{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=He({type:t,selectors:[["","matPrefix",""],["","matIconPrefix",""],["","matTextPrefix",""]],inputs:{_isTextSelector:[0,"matTextPrefix","_isTextSelector"]},standalone:!0,features:[bt([{provide:wce,useExisting:t}])]})}return t})();const Sce=new Ne("MatSuffix");let CE=(()=>{class t{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=He({type:t,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:[0,"matTextSuffix","_isTextSelector"]},standalone:!0,features:[bt([{provide:Sce,useExisting:t}])]})}return t})();const xce=new Ne("FloatingLabelParent");let Ece=(()=>{class t{get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(e){this._elementRef=e,this._floating=!1,this._monitorResize=!1,this._resizeObserver=xe(Cje),this._ngZone=xe(Lt),this._parent=xe(xce),this._resizeSubscription=new rn}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function Yje(t){if(null!==t.offsetParent)return t.scrollWidth;const e=t.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const i=e.scrollWidth;return e.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt))};static#t=this.\u0275dir=He({type:t,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,s){2&i&&Oe("mdc-floating-label--float-above",s.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0})}return t})();const Tce="mdc-line-ripple--active",jN="mdc-line-ripple--deactivating";let Ice=(()=>{class t{constructor(e,i){this._elementRef=e,this._handleTransitionEnd=s=>{const r=this._elementRef.nativeElement.classList,o=r.contains(jN);"opacity"===s.propertyName&&o&&r.remove(Tce,jN)},i.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(jN),e.add(Tce)}deactivate(){this._elementRef.nativeElement.classList.add(jN)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(Lt))};static#t=this.\u0275dir=He({type:t,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0})}return t})(),kce=(()=>{class t{constructor(e,i){this._elementRef=e,this._ngZone=i,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){this._notch.nativeElement.style.width=this.open&&e?`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(Lt))};static#t=this.\u0275cmp=Se({type:t,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,s){if(1&i&&Gt(Sje,5),2&i){let r;nt(r=it())&&(s._notch=r.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,s){2&i&&Oe("mdc-notched-outline--notched",s.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[Ln],attrs:xje,ngContentSelectors:Eje,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(i,s){1&i&&(Si(),q(0,"div",1),m(1,"div",2,0),en(3),_(),q(4,"div",3))},encapsulation:2,changeDetection:0})}return t})();const Zje={transitionMessages:zo("transitionMessages",[Xs("enter",bn({opacity:1,transform:"translateY(0%)"})),ms("void => enter",[bn({opacity:0,transform:"translateY(-5px)"}),Cs("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let HN=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=He({type:t})}return t})();const v0=new Ne("MatFormField"),Qje=new Ne("MAT_FORM_FIELD_DEFAULT_OPTIONS");let Dce=0,zs=(()=>{class t{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=p0(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const i=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdate=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,i,s,r,o,a,l,c){this._elementRef=e,this._changeDetectorRef=i,this._dir=r,this._platform=o,this._defaults=a,this._animationMode=l,this._labelChild=HOe(vce),this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+Dce++,this._hintLabelId="mat-mdc-hint-"+Dce++,this._subscriptAnimationState="",this._destroyed=new ot,this._isFocused=null,this._needsOutlineLabelOffsetUpdate=!1,this._previousControl=null,this._injector=xe(ci),this.getLabelId=ob(()=>this._hasFloatingLabel()?this._labelId:null),this._hasFloatingLabel=ob(()=>!!this._labelChild()),a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._previousControl=this._control)}ngOnDestroy(){this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(e){const i=this._control,s="mat-mdc-form-field-type-";e&&this._elementRef.nativeElement.classList.remove(s+e.controlType),i.controlType&&this._elementRef.nativeElement.classList.add(s+i.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=i.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._valueChanges?.unsubscribe(),i.ngControl&&i.ngControl.valueChanges&&(this._valueChanges=i.ngControl.valueChanges.pipe(Ni(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),sr(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),L8(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(Ni(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_shouldLabelFloat(){return!!this._hasFloatingLabel()&&(this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_shouldForward(e){const i=this._control?this._control.ngControl:null;return i&&i[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(r=>"start"===r.align):null,s=this._hintChildren?this._hintChildren.find(r=>"end"===r.align):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),s&&e.push(s.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdate=!0);const i=this._iconPrefixContainer?.nativeElement,s=this._textPrefixContainer?.nativeElement,r=i?.getBoundingClientRect().width??0,o=s?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${r+o}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(wi),I(Lt),I(jo),I(Ys),I(Qje,8),I(ua,8),I(Yn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-form-field"]],contentQueries:function(i,s,r){if(1&i&&(Ute(r,s._labelChild,vce,5),Bi(r,HN,5),Bi(r,wce,5),Bi(r,Sce,5),Bi(r,yce,5),Bi(r,hV,5)),2&i){let o;(function Gte(t=1){_D(Q4()+t)})(),nt(o=it())&&(s._formFieldControl=o.first),nt(o=it())&&(s._prefixChildren=o),nt(o=it())&&(s._suffixChildren=o),nt(o=it())&&(s._errorChildren=o),nt(o=it())&&(s._hintChildren=o)}},viewQuery:function(i,s){if(1&i&&(Gt(Tje,5),Gt(Ije,5),Gt(kje,5),Gt(Ece,5),Gt(kce,5),Gt(Ice,5)),2&i){let r;nt(r=it())&&(s._textField=r.first),nt(r=it())&&(s._iconPrefixContainer=r.first),nt(r=it())&&(s._textPrefixContainer=r.first),nt(r=it())&&(s._floatingLabel=r.first),nt(r=it())&&(s._notchedOutline=r.first),nt(r=it())&&(s._lineRipple=r.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,s){2&i&&Oe("mat-mdc-form-field-label-always-float",s._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",s._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",s._hasIconSuffix)("mat-form-field-invalid",s._control.errorState)("mat-form-field-disabled",s._control.disabled)("mat-form-field-autofilled",s._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===s._animationMode)("mat-form-field-appearance-fill","fill"==s.appearance)("mat-form-field-appearance-outline","outline"==s.appearance)("mat-form-field-hide-placeholder",s._hasFloatingLabel()&&!s._shouldLabelFloat())("mat-focused",s._control.focused)("mat-primary","accent"!==s.color&&"warn"!==s.color)("mat-accent","accent"===s.color)("mat-warn","warn"===s.color)("ng-untouched",s._shouldForward("untouched"))("ng-touched",s._shouldForward("touched"))("ng-pristine",s._shouldForward("pristine"))("ng-dirty",s._shouldForward("dirty"))("ng-valid",s._shouldForward("valid"))("ng-invalid",s._shouldForward("invalid"))("ng-pending",s._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[bt([{provide:v0,useExisting:t},{provide:xce,useExisting:t}]),Ln],ngContentSelectors:Aje,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(i,s){if(1&i){const r=se();Si(Dje),O(0,Oje,1,1,"ng-template",null,0,ln),m(2,"div",4,1),P("click",function(a){return B(r),V(s._control.onContainerClick(a))}),O(4,Rje,1,0,"div",5),m(5,"div",6),O(6,Pje,2,2,"div",7)(7,$je,3,0,"div",8)(8,Bje,3,0,"div",9),m(9,"div",10),O(10,zje,1,1,null,11),en(11),_(),O(12,Uje,2,0,"div",12)(13,Gje,2,0,"div",13),_(),O(14,jje,1,0,"div",14),_(),m(15,"div",15),O(16,Hje,2,1,"div",16)(17,qje,5,2,"div",17),_()}if(2&i){let r;b(2),Oe("mdc-text-field--filled",!s._hasOutline())("mdc-text-field--outlined",s._hasOutline())("mdc-text-field--no-label",!s._hasFloatingLabel())("mdc-text-field--disabled",s._control.disabled)("mdc-text-field--invalid",s._control.errorState),b(2),Bn(s._hasOutline()||s._control.disabled?-1:4),b(2),Bn(s._hasOutline()?6:-1),b(),Bn(s._hasIconPrefix?7:-1),b(),Bn(s._hasTextPrefix?8:-1),b(2),Bn(!s._hasOutline()||s._forceDisplayInfixLabel()?10:-1),b(2),Bn(s._hasTextSuffix?12:-1),b(),Bn(s._hasIconSuffix?13:-1),b(),Bn(s._hasOutline()?-1:14),b(),Oe("mat-mdc-form-field-subscript-dynamic-size","dynamic"===s.subscriptSizing),b(),Bn("error"===(r=s._getDisplayedMessages())?16:"hint"===r?17:-1)}},dependencies:[Ece,kce,cb,Ice,hV],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-outlined-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--disabled .cdk-high-contrast-active .mdc-text-field__input{background-color:Window}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top));border-top-right-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color, var(--mat-app-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--outlined{height:56px;overflow:visible;padding-left:16px;padding-right:16px}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.cdk-high-contrast-active .mdc-text-field--disabled .mdc-floating-label{z-index:1}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-filled-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-filled-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-filled-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color, var(--mat-app-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-outlined-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-outlined-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-outlined-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color, var(--mat-app-outline));border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color, var(--mat-app-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color, var(--mat-app-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;width:12px;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 24px)}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))*2)}}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color, var(--mat-app-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color, var(--mat-app-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color, var(--mat-app-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color, var(--mat-app-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-app-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-app-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-app-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-app-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-app-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-app-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-app-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-app-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-app-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-app-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-app-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-app-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-app-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-app-body-large-weight))}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-app-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-app-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-app-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[Zje.transitionMessages]},changeDetection:0})}return t})(),Xh=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[Yi,Ka,ale,Yi]})}return t})();const Nce=Hh({passive:!0});let tHe=(()=>{class t{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return ff;const i=Km(e),s=this._monitoredElements.get(i);if(s)return s.subject;const r=new ot,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||i.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>r.next({target:l.target,isAutofilled:!1}))):(i.classList.add(o),this._ngZone.run(()=>r.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,Nce),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:r,unlisten:()=>{i.removeEventListener("animationstart",a,Nce)}}),r}stopMonitoring(e){const i=Km(e),s=this._monitoredElements.get(i);s&&(s.unlisten(),s.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Ys),ae(Lt))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),nHe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({})}return t})();const Oce=new Ne("MAT_INPUT_VALUE_ACCESSOR"),iHe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let sHe=0,eu=(()=>{class t{get disabled(){return this._disabled}set disabled(e){this._disabled=p0(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Zr.required)??!1}set required(e){this._required=p0(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&tle().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._ensureWheelDefaultBehavior()}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=p0(e)}get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}constructor(e,i,s,r,o,a,l,c,u,d){this._elementRef=e,this._platform=i,this.ngControl=s,this._autofillMonitor=c,this._ngZone=u,this._formField=d,this._uid="mat-input-"+sHe++,this._webkitBlinkWheelListenerAttached=!1,this.focused=!1,this.stateChanges=new ot,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(f=>tle().has(f)),this._iOSKeyupListener=f=>{const g=f.target;!g.value&&0===g.selectionStart&&0===g.selectionEnd&&(g.setSelectionRange(1,1),g.setSelectionRange(0,0))},this._webkitBlinkWheelListener=()=>{};const h=this._elementRef.nativeElement,p=h.nodeName.toLowerCase();this._inputValueAccessor=l||h,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&u.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new DN(a,s,o,r,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===p,this._isTextarea="textarea"===p,this._isInFormField=!!d,this._isNativeSelect&&(this.controlType=h.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener),this._webkitBlinkWheelListenerAttached&&this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=e,e?i.setAttribute("placeholder",e):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){iHe.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}_ensureWheelDefaultBehavior(){!this._webkitBlinkWheelListenerAttached&&"number"===this._type&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("wheel",this._webkitBlinkWheelListener)}),this._webkitBlinkWheelListenerAttached=!0),this._webkitBlinkWheelListenerAttached&&"number"!==this._type&&(this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener),this._webkitBlinkWheelListenerAttached=!0)}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(Ys),I(lc,10),I(Z1,8),I(pa,8),I(AN),I(Oce,10),I(tHe),I(Lt),I(v0,8))};static#t=this.\u0275dir=He({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(i,s){1&i&&P("focus",function(){return s._focusChanged(!0)})("blur",function(){return s._focusChanged(!1)})("input",function(){return s._onInput()}),2&i&&(fl("id",s.id)("disabled",s.disabled)("required",s.required),wt("name",s.name||null)("readonly",s.readonly&&!s._isNativeSelect||null)("aria-invalid",s.empty&&s.required?null:s.errorState)("aria-required",s.required)("id",s.id),Oe("mat-input-server",s._isServer)("mat-mdc-form-field-textarea-control",s._isInFormField&&s._isTextarea)("mat-mdc-form-field-input-control",s._isInFormField)("mdc-text-field__input",s._isInFormField)("mat-mdc-native-select-inline",s._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[bt([{provide:HN,useExisting:t}]),Rn]})}return t})(),Fb=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[Yi,Xh,Xh,nHe,Yi]})}return t})();function rHe(t,n){}class SE{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let pV=(()=>{class t extends LN{constructor(e,i,s,r,o,a,l,c){super(),this._elementRef=e,this._focusTrapFactory=i,this._config=r,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._platform=xe(Ys),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=xe(wi),this._injector=xe(ci),this._isDestroyed=!1,this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const d=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),d},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){const i=this._ariaLabelledByQueue.indexOf(e);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const s=()=>{e.removeEventListener("blur",s),e.removeEventListener("mousedown",s),e.removeAttribute("tabindex")};e.addEventListener("blur",s),e.addEventListener("mousedown",s)})),e.focus(i)}_focusByCssSelector(e,i){let s=this._elementRef.nativeElement.querySelector(e);s&&this._forceFocus(s,i)}_trapFocus(){this._isDestroyed||pl(()=>{const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}},{injector:this._injector})}_restoreFocus(){const e=this._config.restoreFocus;let i=null;if("string"==typeof e?i=this._document.querySelector(e):"boolean"==typeof e?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&"function"==typeof i.focus){const s=fN(),r=this._elementRef.nativeElement;(!s||s===this._document.body||s===r||r.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=fN();return e===i||e.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=fN()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(TN),I(Yn,8),I(SE),I(EN),I(Lt),I(wE),I(pc))};static#t=this.\u0275cmp=Se({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(i,s){if(1&i&&Gt(Ym,7),2&i){let r;nt(r=it())&&(s._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,s){2&i&&wt("id",s._config.id||null)("role",s._config.role)("aria-modal",s._config.ariaModal)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null)},standalone:!0,features:[Ze,Ln],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,s){1&i&&O(0,rHe,0,0,"ng-template",0)},dependencies:[Ym],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return t})();class fV{constructor(n,e){this.overlayRef=n,this.config=e,this.closed=new ot,this.disableClose=e.disableClose,this.backdropClick=n.backdropClick(),this.keydownEvents=n.keydownEvents(),this.outsidePointerEvents=n.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Da(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=n.detachments().subscribe(()=>{!1!==e.closeOnOverlayDetachments&&this.close()})}close(n,e){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(n),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(n="",e=""){return this.overlayRef.updateSize({width:n,height:e}),this}addPanelClass(n){return this.overlayRef.addPanelClass(n),this}removePanelClass(n){return this.overlayRef.removePanelClass(n),this}}const Rce=new Ne("DialogScrollStrategy",{providedIn:"root",factory:()=>{const t=xe(rr);return()=>t.scrollStrategies.block()}}),oHe=new Ne("DialogData"),aHe=new Ne("DefaultDialogConfig");let cHe=0,mV=(()=>{class t{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(e,i,s,r,o,a){this._overlay=e,this._injector=i,this._defaultOptions=s,this._parentDialog=r,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ot,this._afterOpenedAtThisLevel=new ot,this._ariaHiddenElements=new Map,this.afterAllClosed=Vh(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Uo(void 0))),this._scrollStrategy=a}open(e,i){(i={...this._defaultOptions||new SE,...i}).id=i.id||"cdk-dialog-"+cHe++,i.id&&this.getDialogById(i.id);const r=this._getOverlayConfig(i),o=this._overlay.create(r),a=new fV(o,i),l=this._attachContainer(o,a,i);return a.containerInstance=l,this._attachDialogContent(e,a,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){_V(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){_V(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),_V(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const i=new b0({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,s){const r=s.injector||s.viewContainerRef?.injector,o=[{provide:SE,useValue:s},{provide:fV,useValue:i},{provide:wE,useValue:e}];let a;s.container?"function"==typeof s.container?a=s.container:(a=s.container.type,o.push(...s.container.providers(s))):a=pV;const l=new Ab(a,s.viewContainerRef,ci.create({parent:r||this._injector,providers:o}),s.componentFactoryResolver);return e.attach(l).instance}_attachDialogContent(e,i,s,r){if(e instanceof hr){const o=this._createInjector(r,i,s,void 0);let a={$implicit:r.data,dialogRef:i};r.templateContext&&(a={...a,..."function"==typeof r.templateContext?r.templateContext():r.templateContext}),s.attachTemplatePortal(new Mb(e,null,a,o))}else{const o=this._createInjector(r,i,s,this._injector),a=s.attachComponentPortal(new Ab(e,r.viewContainerRef,o,r.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(e,i,s,r){const o=e.injector||e.viewContainerRef?.injector,a=[{provide:oHe,useValue:e.data},{provide:fV,useValue:i}];return e.providers&&("function"==typeof e.providers?a.push(...e.providers(i,e,s)):a.push(...e.providers)),e.direction&&(!o||!o.get(jo,null,{optional:!0}))&&a.push({provide:jo,useValue:{value:e.direction,change:Ge()}}),ci.create({parent:o||r,providers:a})}_removeOpenDialog(e,i){const s=this.openDialogs.indexOf(e);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,o)=>{r?o.setAttribute("aria-hidden",r):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let s=i.length-1;s>-1;s--){const r=i[s];r!==e&&"SCRIPT"!==r.nodeName&&"STYLE"!==r.nodeName&&!r.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(i){return new(i||t)(ae(rr),ae(ci),ae(aHe,8),ae(t,12),ae(zN),ae(Rce))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _V(t,n){let e=t.length;for(;e--;)n(t[e])}let Fce=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:[mV],imports:[vf,qh,Y6,qh]})}return t})();function uHe(t,n){}class gV{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const bV="mdc-dialog--open",Lce="mdc-dialog--opening",Pce="mdc-dialog--closing";let $ce=(()=>{class t extends pV{constructor(e,i,s,r,o,a,l,c,u){super(e,i,s,r,o,a,l,u),this._animationMode=c,this._animationStateChanged=new Ae,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?Vce(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?Vce(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Bce,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Lce,bV)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(bV),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(bV),this._animationsEnabled?(this._hostElement.style.setProperty(Bce,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Pce)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(Lce,Pce)}_waitForAnimationToComplete(e,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}attachComponentPortal(e){const i=super.attachComponentPortal(e);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(TN),I(Yn,8),I(gV),I(EN),I(Lt),I(wE),I(ua,8),I(pc))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,s){2&i&&(fl("id",s._config.id),wt("aria-modal",s._config.ariaModal)("role",s._config.role)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null),Oe("_mat-animation-noopable",!s._animationsEnabled)("mat-mdc-dialog-container-with-actions",s._actionSectionCount>0))},standalone:!0,features:[Ze,Ln],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,s){1&i&&(m(0,"div",0)(1,"div",1),O(2,uHe,0,0,"ng-template",2),_()())},dependencies:[Ym],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12));border-radius:var(--mdc-dialog-container-shape, var(--mat-app-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-app-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-app-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-app-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-app-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-app-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-app-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-app-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-app-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-app-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-app-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-app-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-app-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-app-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.cdk-high-contrast-active .mat-mdc-dialog-actions{border-top-color:CanvasText}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}return t})();const Bce="--mat-dialog-transition-duration";function Vce(t){return null==t?null:"number"==typeof t?t:t.endsWith("ms")?qm(t.substring(0,t.length-2)):t.endsWith("s")?1e3*qm(t.substring(0,t.length-1)):"0"===t?0:null}var WN=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(WN||{});class Xa{constructor(n,e,i){this._ref=n,this._containerInstance=i,this._afterOpened=new ot,this._beforeClosed=new ot,this._state=WN.OPEN,this.disableClose=e.disableClose,this.id=n.id,n.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(Zt(s=>"opened"===s.state),Zn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Zt(s=>"closed"===s.state),Zn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),n.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),sr(this.backdropClick(),this.keydownEvents().pipe(Zt(s=>27===s.keyCode&&!this.disableClose&&!Da(s)))).subscribe(s=>{this.disableClose||(s.preventDefault(),zce(this,"keydown"===s.type?"keyboard":"mouse"))})}close(n){this._result=n,this._containerInstance._animationStateChanged.pipe(Zt(e=>"closing"===e.state),Zn(1)).subscribe(e=>{this._beforeClosed.next(n),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=WN.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(n){let e=this._ref.config.positionStrategy;return n&&(n.left||n.right)?n.left?e.left(n.left):e.right(n.right):e.centerHorizontally(),n&&(n.top||n.bottom)?n.top?e.top(n.top):e.bottom(n.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(n="",e=""){return this._ref.updateSize(n,e),this}addPanelClass(n){return this._ref.addPanelClass(n),this}removePanelClass(n){return this._ref.removePanelClass(n),this}getState(){return this._state}_finishDialogClose(){this._state=WN.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function zce(t,n,e){return t._closeInteractionType=n,t.close(e)}const or=new Ne("MatMdcDialogData"),pHe=new Ne("mat-mdc-dialog-default-options"),Uce=new Ne("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{const t=xe(rr);return()=>t.scrollStrategies.block()}});let mHe=0,Tr=(()=>{class t{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(e,i,s,r,o,a,l,c){this._overlay=e,this._defaultOptions=r,this._scrollStrategy=o,this._parentDialog=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ot,this._afterOpenedAtThisLevel=new ot,this.dialogConfigClass=gV,this.afterAllClosed=Vh(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Uo(void 0))),this._dialog=i.get(mV),this._dialogRefConstructor=Xa,this._dialogContainerType=$ce,this._dialogDataToken=or}open(e,i){let s;(i={...this._defaultOptions||new gV,...i}).id=i.id||"mat-mdc-dialog-"+mHe++,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const r=this._dialog.open(e,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:SE,useValue:i}]},templateContext:()=>({dialogRef:s}),providers:(o,a,l)=>(s=new this._dialogRefConstructor(o,i,l),s.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:s}])});return s.componentRef=r.componentRef,s.componentInstance=r.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(s);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}static#e=this.\u0275fac=function(i){return new(i||t)(ae(rr),ae(ci),ae(lb,8),ae(pHe,8),ae(Uce),ae(t,12),ae(zN),ae(ua,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),_He=0,Ls=(()=>{class t{constructor(e,i,s){this.dialogRef=e,this._elementRef=i,this._dialog=s,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=jce(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){const i=e._matDialogClose||e._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(e){zce(this.dialogRef,0===e.screenX&&0===e.screenY?"keyboard":"mouse",this.dialogResult)}static#e=this.\u0275fac=function(i){return new(i||t)(I(Xa,8),I(vt),I(Tr))};static#t=this.\u0275dir=He({type:t,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(i,s){1&i&&P("click",function(o){return s._onButtonClick(o)}),2&i&&wt("aria-label",s.ariaLabel||null)("type",s.type)},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],type:"type",dialogResult:[0,"mat-dialog-close","dialogResult"],_matDialogClose:[0,"matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],standalone:!0,features:[Rn]})}return t})(),Gce=(()=>{class t{constructor(e,i,s){this._dialogRef=e,this._elementRef=i,this._dialog=s}ngOnInit(){this._dialogRef||(this._dialogRef=jce(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static#e=this.\u0275fac=function(i){return new(i||t)(I(Xa,8),I(vt),I(Tr))};static#t=this.\u0275dir=He({type:t,standalone:!0})}return t})(),vV=(()=>{class t extends Gce{constructor(){super(...arguments),this.id="mat-mdc-dialog-title-"+_He++}_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=$n(t)))(s||t)}})();static#t=this.\u0275dir=He({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,s){2&i&&fl("id",s.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[Ze]})}return t})();function jce(t,n){let e=t.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?n.find(i=>i.id===e.id):null}let Lb=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:[Tr],imports:[Fce,vf,qh,Yi,Yi]})}return t})();const vHe=["mat-menu-item",""],yHe=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],wHe=["mat-icon, [matMenuItemIcon]","*"];function CHe(t,n){1&t&&(ka(),m(0,"svg",2),q(1,"polygon",3),_())}const SHe=["*"];function xHe(t,n){if(1&t){const e=se();m(0,"div",0),P("keydown",function(s){return B(e),V(E()._handleKeydown(s))})("click",function(){return B(e),V(E().closed.emit("click"))})("@transformMenu.start",function(s){return B(e),V(E()._onAnimationStart(s))})("@transformMenu.done",function(s){return B(e),V(E()._onAnimationDone(s))}),m(1,"div",1),en(2),_()()}if(2&t){const e=E();$o(e._classList),C("id",e.panelId)("@transformMenu",e._panelAnimationState),wt("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const yV=new Ne("MAT_MENU_PANEL");let Yh=(()=>{class t{constructor(e,i,s,r,o){this._elementRef=e,this._document=i,this._focusMonitor=s,this._parentMenu=r,this._changeDetectorRef=o,this.role="menuitem",this.disabled=!1,this.disableRipple=!1,this._hovered=new ot,this._focused=new ot,this._highlighted=!1,this._triggersSubmenu=!1,r?.addItem?.(this)}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const e=this._elementRef.nativeElement.cloneNode(!0),i=e.querySelectorAll("mat-icon, .material-icons");for(let s=0;s<i.length;s++)i[s].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(Yn),I(pc),I(yV,8),I(wi))};static#t=this.\u0275cmp=Se({type:t,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator"],hostVars:8,hostBindings:function(i,s){1&i&&P("click",function(o){return s._checkDisabled(o)})("mouseenter",function(){return s._handleMouseEnter()}),2&i&&(wt("role",s.role)("tabindex",s._getTabIndex())("aria-disabled",s.disabled)("disabled",s.disabled||null),Oe("mat-mdc-menu-item-highlighted",s._highlighted)("mat-mdc-menu-item-submenu-trigger",s._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",ft],disableRipple:[2,"disableRipple","disableRipple",ft]},exportAs:["matMenuItem"],standalone:!0,features:[Li,Ln],attrs:vHe,ngContentSelectors:wHe,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(i,s){1&i&&(Si(yHe),en(0),m(1,"span",0),en(2,1),_(),q(3,"div",1),O(4,CHe,2,0,":svg:svg",2)),2&i&&(b(3),C("matRippleDisabled",s.disableRipple||s.disabled)("matRippleTrigger",s._getHostElement()),b(),Bn(s._triggersSubmenu?4:-1))},dependencies:[Tt],encapsulation:2,changeDetection:0})}return t})();const EHe=new Ne("MatMenuContent"),qN={transformMenu:zo("transformMenu",[Xs("void",bn({opacity:0,transform:"scale(0.8)"})),ms("void => enter",Cs("120ms cubic-bezier(0, 0, 0.2, 1)",bn({opacity:1,transform:"scale(1)"}))),ms("* => void",Cs("100ms 25ms linear",bn({opacity:0})))]),fadeInItems:zo("fadeInItems",[Xs("showing",bn({opacity:1})),ms("void => *",[bn({opacity:0}),Cs("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let THe=0;const IHe=new Ne("mat-menu-default-options",{providedIn:"root",factory:function kHe(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let Zd=(()=>{class t{get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}set panelClass(e){const i=this._previousPanelClass,s={...this._classList};i&&i.length&&i.split(" ").forEach(r=>{s[r]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(r=>{s[r]=!0}),this._elementRef.nativeElement.className=""),this._classList=s}get classList(){return this.panelClass}set classList(e){this.panelClass=e}constructor(e,i,s,r){this._elementRef=e,this._changeDetectorRef=r,this._elevationPrefix="mat-elevation-z",this._baseElevation=null,this._directDescendantItems=new vm,this._classList={},this._panelAnimationState="void",this._animationDone=new ot,this.closed=new Ae,this.close=this.closed,this.panelId="mat-menu-panel-"+THe++,this._injector=xe(ci),this.overlayPanelClass=s.overlayPanelClass||"",this._xPosition=s.xPosition,this._yPosition=s.yPosition,this.backdropClass=s.backdropClass,this.overlapTrigger=s.overlapTrigger,this.hasBackdrop=s.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new ble(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Uo(this._directDescendantItems),Kt(e=>sr(...e.map(i=>i._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{const i=this._keyManager;if("enter"===this._panelAnimationState&&i.activeItem?._hasFocus()){const s=e.toArray(),r=Math.max(0,Math.min(s.length-1,i.activeItemIndex||0));s[r]&&!s[r].disabled?i.setActiveItem(r):i.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy()}_hovered(){return this._directDescendantItems.changes.pipe(Uo(this._directDescendantItems),Kt(i=>sr(...i.map(s=>s._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const i=e.keyCode,s=this._keyManager;switch(i){case 27:Da(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===i||40===i)&&s.setFocusOrigin("keyboard"),void s.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=pl(()=>{let i=null;if(this._directDescendantItems.length&&(i=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!i||!i.contains(document.activeElement)){const s=this._keyManager;s.setFocusOrigin(e).setFirstItemActive(),!s.activeItem&&i&&i.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){if(null===this._baseElevation){const a=("function"==typeof getComputedStyle?getComputedStyle(this._elementRef.nativeElement):null)?.getPropertyValue("--mat-menu-base-elevation-level")||"8";this._baseElevation=parseInt(a)}const i=Math.min(this._baseElevation+e,24),s=`${this._elevationPrefix}${i}`,r=Object.keys(this._classList).find(o=>o.startsWith(this._elevationPrefix));if(!r||r===this._previousElevation){const o={...this._classList};this._previousElevation&&(o[this._previousElevation]=!1),o[s]=!0,this._previousElevation=s,this._classList=o}}setPositionClasses(e=this.xPosition,i=this.yPosition){this._classList={...this._classList,"mat-menu-before":"before"===e,"mat-menu-after":"after"===e,"mat-menu-above":"above"===i,"mat-menu-below":"below"===i},this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Uo(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(Lt),I(IHe),I(wi))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-menu"]],contentQueries:function(i,s,r){if(1&i&&(Bi(r,EHe,5),Bi(r,Yh,5),Bi(r,Yh,4)),2&i){let o;nt(o=it())&&(s.lazyContent=o.first),nt(o=it())&&(s._allItems=o),nt(o=it())&&(s.items=o)}},viewQuery:function(i,s){if(1&i&&Gt(hr,5),2&i){let r;nt(r=it())&&(s.templateRef=r.first)}},hostVars:3,hostBindings:function(i,s){2&i&&wt("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",ft],hasBackdrop:[2,"hasBackdrop","hasBackdrop",e=>null==e?null:ft(e)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],standalone:!0,features:[bt([{provide:yV,useExisting:t}]),Li,Ln],ngContentSelectors:SHe,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mat-mdc-elevation-specific",3,"keydown","click","id"],[1,"mat-mdc-menu-content"]],template:function(i,s){1&i&&(Si(),O(0,xHe,3,7,"ng-template"))},styles:['mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-app-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-app-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-app-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;box-sizing:border-box;outline:0;border-radius:var(--mat-menu-container-shape, var(--mat-app-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-app-surface-container));will-change:transform,opacity}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.mat-mdc-menu-panel.ng-animating:has(.mat-mdc-menu-content:empty){display:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color, var(--mat-app-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing);margin-top:var(--mat-menu-divider-top-spacing)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:var(--mat-menu-item-leading-spacing);padding-right:var(--mat-menu-item-trailing-spacing);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}[dir=rtl] .mat-mdc-menu-item{padding-right:var(--mat-menu-item-leading-spacing);padding-left:var(--mat-menu-item-trailing-spacing)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing);padding-right:var(--mat-menu-item-with-icon-trailing-spacing)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-right:var(--mat-menu-item-with-icon-leading-spacing);padding-left:var(--mat-menu-item-with-icon-trailing-spacing)}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-app-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing);height:var(--mat-menu-item-icon-size);width:var(--mat-menu-item-icon-size)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color)}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color)}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[qN.transformMenu,qN.fadeInItems]},changeDetection:0})}return t})();const Wce=new Ne("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{const t=xe(rr);return()=>t.scrollStrategies.reposition()}}),AHe={provide:Wce,deps:[rr],useFactory:function DHe(t){return()=>t.scrollStrategies.reposition()}},qce=Hh({passive:!0});let Pb=(()=>{class t{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(i=>{this._destroyMenu(i),("click"===i||"tab"===i)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(e,i,s,r,o,a,l,c,u){this._overlay=e,this._element=i,this._viewContainerRef=s,this._menuItemInstance=a,this._dir=l,this._focusMonitor=c,this._ngZone=u,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=rn.EMPTY,this._hoverSubscription=rn.EMPTY,this._menuCloseSubscription=rn.EMPTY,this._changeDetectorRef=xe(wi),this._handleTouchStart=d=>{K6(d)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new Ae,this.onMenuOpen=this.menuOpened,this.menuClosed=new Ae,this.onMenuClose=this.menuClosed,this._scrollStrategy=r,this._parentMaterialMenu=o instanceof Zd?o:void 0,i.nativeElement.addEventListener("touchstart",this._handleTouchStart,qce)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,qce),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const e=this.menu;if(this._menuOpen||!e)return;const i=this._createOverlay(e),s=i.getConfig(),r=s.positionStrategy;this._setPosition(e,r),s.hasBackdrop=null==e.hasBackdrop?!this.triggersSubmenu():e.hasBackdrop,i.attach(this._getPortal(e)),e.lazyContent&&e.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(e),e instanceof Zd&&(e._startAnimation(),e._directDescendantItems.changes.pipe(Ni(e.close)).subscribe(()=>{r.withLockedPosition(!1).reapplyLastPosition(),r.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,i):this._element.nativeElement.focus(i)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const i=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,i instanceof Zd?(i._resetAnimation(),i.lazyContent?i._animationDone.pipe(Zt(s=>"void"===s.toState),Zn(1),Ni(i.lazyContent._attached)).subscribe({next:()=>i.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),i?.lazyContent?.detach())}_initMenu(e){e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,this._setMenuElevation(e),e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(e){if(e.setElevation){let i=0,s=e.parentMenu;for(;s;)i++,s=s.parentMenu;e.setElevation(i)}}_setIsMenuOpen(e){e!==this._menuOpen&&(this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e),this._changeDetectorRef.markForCheck())}_createOverlay(e){if(!this._overlayRef){const i=this._getOverlayConfig(e);this._subscribeToPositions(e,i.positionStrategy),this._overlayRef=this._overlay.create(i),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(e){return new b0({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e,i){e.setPositionClasses&&i.positionChanges.subscribe(s=>{const r="start"===s.connectionPair.overlayX?"after":"before",o="top"===s.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>e.setPositionClasses(r,o)):e.setPositionClasses(r,o)})}_setPosition(e,i){let[s,r]="before"===e.xPosition?["end","start"]:["start","end"],[o,a]="above"===e.yPosition?["bottom","top"]:["top","bottom"],[l,c]=[o,a],[u,d]=[s,r],h=0;if(this.triggersSubmenu()){if(d=s="before"===e.xPosition?"start":"end",r=u="end"===s?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const p=this._parentMaterialMenu.items.first;this._parentInnerPadding=p?p._getHostElement().offsetTop:0}h="bottom"===o?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(l="top"===o?"bottom":"top",c="top"===a?"bottom":"top");i.withPositions([{originX:s,originY:l,overlayX:u,overlayY:o,offsetY:h},{originX:r,originY:l,overlayX:d,overlayY:o,offsetY:h},{originX:s,originY:c,overlayX:u,overlayY:a,offsetY:-h},{originX:r,originY:c,overlayX:d,overlayY:a,offsetY:-h}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),i=this._overlayRef.detachments();return sr(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:Ge(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Zt(o=>o!==this._menuItemInstance),Zt(()=>this._menuOpen)):Ge(),i)}_handleMousedown(e){q6(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const i=e.keyCode;(13===i||32===i)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===i&&"ltr"===this.dir||37===i&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Zt(e=>e===this._menuItemInstance&&!e.disabled),u0(0,oV)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Zd&&this.menu._isAnimating?this.menu._animationDone.pipe(Zn(1),u0(0,oV),Ni(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new Mb(e.templateRef,this._viewContainerRef)),this._portal}static#e=this.\u0275fac=function(i){return new(i||t)(I(rr),I(vt),I(Kr),I(Wce),I(yV,8),I(Yh,10),I(jo,8),I(pc),I(Lt))};static#t=this.\u0275dir=He({type:t,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(i,s){1&i&&P("click",function(o){return s._handleClick(o)})("mousedown",function(o){return s._handleMousedown(o)})("keydown",function(o){return s._handleKeydown(o)}),2&i&&wt("aria-haspopup",s.menu?"menu":null)("aria-expanded",s.menuOpen)("aria-controls",s.menuOpen?s.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],standalone:!0})}return t})(),wV=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:[AHe],imports:[Ka,Jc,Yi,vf,Ob,Yi]})}return t})();const MHe=["trigger"],NHe=["panel"],OHe=[[["mat-select-trigger"]],"*"],RHe=["mat-select-trigger","*"];function FHe(t,n){if(1&t&&(m(0,"span",4),S(1),_()),2&t){const e=E();b(),Ye(e.placeholder)}}function LHe(t,n){1&t&&en(0)}function PHe(t,n){if(1&t&&(m(0,"span",11),S(1),_()),2&t){const e=E(2);b(),Ye(e.triggerValue)}}function $He(t,n){if(1&t&&(m(0,"span",5),O(1,LHe,1,0)(2,PHe,2,1,"span",11),_()),2&t){const e=E();b(),Bn(e.customTrigger?1:2)}}function BHe(t,n){if(1&t){const e=se();m(0,"div",12,1),P("@transformPanel.done",function(s){return B(e),V(E()._panelDoneAnimatingStream.next(s.toState))})("keydown",function(s){return B(e),V(E()._handleKeydown(s))}),en(2,1),_()}if(2&t){const e=E();(function ste(t,n,e){Vd(Vc,$h,E1(Ue(),t,n,e),!0)})("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),C("ngClass",e.panelClass)("@transformPanel","showing"),wt("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const VHe={transformPanelWrap:zo("transformPanelWrap",[ms("* => void",W1("@transformPanel",[H1()],{optional:!0}))]),transformPanel:zo("transformPanel",[Xs("void",bn({opacity:0,transform:"scale(1, 0.8)"})),ms("void => showing",Cs("120ms cubic-bezier(0, 0, 0.2, 1)",bn({opacity:1,transform:"scale(1, 1)"}))),ms("* => void",Cs("100ms linear",bn({opacity:0})))])};let Kce=0;const Xce=new Ne("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{const t=xe(rr);return()=>t.scrollStrategies.reposition()}}),UHe=new Ne("MAT_SELECT_CONFIG"),GHe={provide:Xce,deps:[rr],useFactory:function zHe(t){return()=>t.scrollStrategies.reposition()}},jHe=new Ne("MatSelectTrigger");class HHe{constructor(n,e){this.source=n,this.value=e}}let ko=(()=>{class t{_scrollOptionIntoView(e){const i=this.options.toArray()[e];if(i){const s=this.panel.nativeElement,r=$le(e,this.options,this.optionGroups),o=i._getHostElement();s.scrollTop=0===e&&1===r?0:Ble(o.offsetTop,o.offsetHeight,s.scrollTop,s.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new HHe(this,e)}get focused(){return this._focused||this._panelOpen}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Zr.required)??!1}set required(e){this._required=e,this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=e}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}constructor(e,i,s,r,o,a,l,c,u,d,h,p,f,g){this._viewportRuler=e,this._changeDetectorRef=i,this._elementRef=o,this._dir=a,this._parentFormField=u,this.ngControl=d,this._liveAnnouncer=f,this._defaultOptions=g,this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._panelOpen=!1,this._compareWith=(v,y)=>v===y,this._uid="mat-select-"+Kce++,this._triggerAriaLabelledBy=null,this._destroy=new ot,this.stateChanges=new ot,this.disableAutomaticLabeling=!0,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+Kce++,this._panelDoneAnimatingStream=new ot,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this._multiple=!1,this.disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto",this._initialized=new ot,this.optionSelectionChanges=Vh(()=>{const v=this.options;return v?v.changes.pipe(Uo(v),Kt(()=>sr(...v.map(y=>y.onSelectionChange)))):this._initialized.pipe(Kt(()=>this.optionSelectionChanges))}),this.openedChange=new Ae,this._openedStream=this.openedChange.pipe(Zt(v=>v),me(()=>{})),this._closedStream=this.openedChange.pipe(Zt(v=>!v),me(()=>{})),this.selectionChange=new Ae,this.valueChange=new Ae,this._trackedModal=null,this._skipPredicate=v=>!this.panelOpen&&v.disabled,this.ngControl&&(this.ngControl.valueAccessor=this),null!=g?.typeaheadDebounceInterval&&(this.typeaheadDebounceInterval=g.typeaheadDebounceInterval),this._errorStateTracker=new DN(r,d,c,l,this.stateChanges),this._scrollStrategyFactory=p,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(h)||0,this.id=this.id}ngOnInit(){this._selectionModel=new Yle(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Tb(),Ni(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen)),this._viewportRuler.change().pipe(Ni(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(Ni(this._destroy)).subscribe(e=>{e.added.forEach(i=>i.select()),e.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(Uo(null),Ni(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),i=this.ngControl;if(e!==this._triggerAriaLabelledBy){const s=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?s.setAttribute("aria-labelledby",e):s.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(void 0!==this._previousControl&&null!==i.disabled&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_applyModalPanelOwnership(){const e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;const i=`${this.id}-panel`;this._trackedModal&&f0(this._trackedModal,"aria-owns",i),CN(e,"aria-owns",i),this._trackedModal=e}_clearFromModal(){this._trackedModal&&(f0(this._trackedModal,"aria-owns",`${this.id}-panel`),this._trackedModal=null)}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const i=e.keyCode,s=40===i||38===i||37===i||39===i,r=13===i||32===i,o=this._keyManager;if(!o.isTyping()&&r&&!Da(e)||(this.multiple||e.altKey)&&s)e.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;o.onKeydown(e);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){const i=this._keyManager,s=e.keyCode,r=40===s||38===s,o=i.isTyping();if(r&&e.altKey)e.preventDefault(),this.close();else if(o||13!==s&&32!==s||!i.activeItem||Da(e))if(!o&&this._multiple&&65===s&&e.ctrlKey){e.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=i.activeItemIndex;i.onKeydown(e),this._multiple&&r&&e.shiftKey&&i.activeItem&&i.activeItemIndex!==a&&i.activeItem._selectViaInteraction()}else e.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Zn(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{const i=this._selectOptionByValue(e);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const i=this.options.find(s=>{if(this._selectionModel.isSelected(s))return!1;try{return null!=s.value&&this._compareWith(s.value,e)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_getOverlayWidth(e){return"auto"===this.panelWidth?(e instanceof UN?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:null===this.panelWidth?"":this.panelWidth}_syncParentProperties(){if(this.options)for(const e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new gle(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=sr(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Ni(e)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),sr(...this.options.map(i=>i._stateChanges)).pipe(Ni(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,i){const s=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(s!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),i&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),i&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),s!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((i,s)=>this.sortComparator?this.sortComparator(i,s,e):e.indexOf(i)-e.indexOf(s)),this.stateChanges.next()}}_propagateChanges(e){let i;i=this.multiple?this.selected.map(s=>s.value):this.selected?this.selected.value:e,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let i=0;i<this.options.length;i++)if(!this.options.get(i).disabled){e=i;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let i=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(i+=" "+this.ariaLabelledby),i}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static#e=this.\u0275fac=function(i){return new(i||t)(I(g0),I(wi),I(Lt),I(AN),I(vt),I(jo,8),I(Z1,8),I(pa,8),I(v0,8),I(lc,10),sc("tabindex"),I(Xce),I(Ele),I(UHe,8))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-select"]],contentQueries:function(i,s,r){if(1&i&&(Bi(r,jHe,5),Bi(r,mr,5),Bi(r,ON,5)),2&i){let o;nt(o=it())&&(s.customTrigger=o.first),nt(o=it())&&(s.options=o),nt(o=it())&&(s.optionGroups=o)}},viewQuery:function(i,s){if(1&i&&(Gt(MHe,5),Gt(NHe,5),Gt(dce,5)),2&i){let r;nt(r=it())&&(s.trigger=r.first),nt(r=it())&&(s.panel=r.first),nt(r=it())&&(s._overlayDir=r.first)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(i,s){1&i&&P("keydown",function(o){return s._handleKeydown(o)})("focus",function(){return s._onFocus()})("blur",function(){return s._onBlur()}),2&i&&(wt("id",s.id)("tabindex",s.disabled?-1:s.tabIndex)("aria-controls",s.panelOpen?s.id+"-panel":null)("aria-expanded",s.panelOpen)("aria-label",s.ariaLabel||null)("aria-required",s.required.toString())("aria-disabled",s.disabled.toString())("aria-invalid",s.errorState)("aria-activedescendant",s._getAriaActiveDescendant()),Oe("mat-mdc-select-disabled",s.disabled)("mat-mdc-select-invalid",s.errorState)("mat-mdc-select-required",s.required)("mat-mdc-select-empty",s.empty)("mat-mdc-select-multiple",s.multiple))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",ft],disableRipple:[2,"disableRipple","disableRipple",ft],tabIndex:[2,"tabIndex","tabIndex",e=>null==e?0:Xr(e)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",ft],placeholder:"placeholder",required:[2,"required","required",ft],multiple:[2,"multiple","multiple",ft],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",ft],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",Xr],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],standalone:!0,features:[bt([{provide:HN,useExisting:t},{provide:NN,useExisting:t}]),Li,Rn,Ln],ngContentSelectors:RHe,decls:11,vars:8,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","attach","detach","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(i,s){if(1&i){const r=se();Si(OHe),m(0,"div",2,0),P("click",function(){return B(r),V(s.open())}),m(3,"div",3),O(4,FHe,2,1,"span",4)(5,$He,3,1,"span",5),_(),m(6,"div",6)(7,"div",7),ka(),m(8,"svg",8),q(9,"path",9),_()()()(),O(10,BHe,3,9,"ng-template",10),P("backdropClick",function(){return B(r),V(s.close())})("attach",function(){return B(r),V(s._onAttached())})("detach",function(){return B(r),V(s.close())})}if(2&i){const r=xt(1);b(3),wt("id",s._valueId),b(),Bn(s.empty?4:5),b(6),C("cdkConnectedOverlayPanelClass",s._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",s._scrollStrategy)("cdkConnectedOverlayOrigin",s._preferredOverlayOrigin||r)("cdkConnectedOverlayOpen",s.panelOpen)("cdkConnectedOverlayPositions",s._positions)("cdkConnectedOverlayWidth",s._overlayWidth)}},dependencies:[UN,dce,JA],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-app-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-app-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-app-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-app-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-app-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow)}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color)}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-app-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-app-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-app-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color)}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color, var(--mat-app-surface-container))}.cdk-high-contrast-active div.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-app-on-surface-variant))}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform)}'],encapsulation:2,data:{animation:[VHe.transformPanel]},changeDetection:0})}return t})(),$b=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:[GHe],imports:[Ka,vf,RN,Yi,Ob,Xh,RN,Yi]})}return t})();const WHe=["panel"],qHe=["*"];function KHe(t,n){if(1&t){const e=se();m(0,"div",1,0),P("@panelAnimation.done",function(s){return B(e),V(E()._animationDone.next(s))}),en(2),_()}if(2&t){const e=n.id,i=E();$o(i._classList),Oe("mat-mdc-autocomplete-visible",i.showPanel)("mat-mdc-autocomplete-hidden",!i.showPanel)("mat-primary","primary"===i._color)("mat-accent","accent"===i._color)("mat-warn","warn"===i._color),C("id",i.id)("@panelAnimation",i.isOpen?"visible":"hidden"),wt("aria-label",i.ariaLabel||null)("aria-labelledby",i._getPanelAriaLabelledby(e))}}const XHe=zo("panelAnimation",[Xs("void, hidden",bn({opacity:0,transform:"scaleY(0.8)"})),ms(":enter, hidden => visible",[Rx([Cs("0.03s linear",bn({opacity:1})),Cs("0.12s cubic-bezier(0, 0, 0.2, 1)",bn({transform:"scaleY(1)"}))])]),ms(":leave, visible => hidden",[Cs("0.075s linear",bn({opacity:0}))])]);let YHe=0;class ZHe{constructor(n,e){this.source=n,this.option=e}}const Yce=new Ne("mat-autocomplete-default-options",{providedIn:"root",factory:function QHe(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}});let xE=(()=>{class t{get isOpen(){return this._isOpen&&this.showPanel}_setColor(e){this._color=e,this._changeDetectorRef.markForCheck()}set classList(e){this._classList=e,this._elementRef.nativeElement.className=""}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const e of this.options)e._changeDetectorRef.markForCheck()}constructor(e,i,s,r){this._changeDetectorRef=e,this._elementRef=i,this._defaults=s,this._activeOptionChanges=rn.EMPTY,this._animationDone=new Ae,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new Ae,this.opened=new Ae,this.closed=new Ae,this.optionActivated=new Ae,this.id="mat-autocomplete-"+YHe++,this.inertGroups=r?.SAFARI||!1,this.autoActiveFirstOption=!!s.autoActiveFirstOption,this.autoSelectActiveOption=!!s.autoSelectActiveOption,this.requireSelection=!!s.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new gle(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe(),this._animationDone.complete()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){const i=new ZHe(this,e);this.optionSelected.emit(i)}_getPanelAriaLabelledby(e){return this.ariaLabel?null:this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_skipPredicate(){return!1}static#e=this.\u0275fac=function(i){return new(i||t)(I(wi),I(vt),I(Yce),I(Ys))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-autocomplete"]],contentQueries:function(i,s,r){if(1&i&&(Bi(r,mr,5),Bi(r,ON,5)),2&i){let o;nt(o=it())&&(s.options=o),nt(o=it())&&(s.optionGroups=o)}},viewQuery:function(i,s){if(1&i&&(Gt(hr,7),Gt(WHe,5)),2&i){let r;nt(r=it())&&(s.template=r.first),nt(r=it())&&(s.panel=r.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[2,"autoActiveFirstOption","autoActiveFirstOption",ft],autoSelectActiveOption:[2,"autoSelectActiveOption","autoSelectActiveOption",ft],requireSelection:[2,"requireSelection","requireSelection",ft],panelWidth:"panelWidth",disableRipple:[2,"disableRipple","disableRipple",ft],classList:[0,"class","classList"],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",ft]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],standalone:!0,features:[bt([{provide:NN,useExisting:t}]),Li,Ln],ngContentSelectors:qHe,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(i,s){1&i&&(Si(),O(0,KHe,3,16,"ng-template"))},styles:["div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:static;border-radius:var(--mat-autocomplete-container-shape, var(--mat-app-corner-extra-small));box-shadow:var(--mat-autocomplete-container-elevation-shadow);background-color:var(--mat-autocomplete-background-color, var(--mat-app-surface-container))}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[XHe]},changeDetection:0})}return t})(),Zce=(()=>{class t{constructor(e){this.elementRef=e}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt))};static#t=this.\u0275dir=He({type:t,selectors:[["","matAutocompleteOrigin",""]],exportAs:["matAutocompleteOrigin"],standalone:!0})}return t})();const JHe={provide:Ki,useExisting:wn(()=>y0),multi:!0},Qce=new Ne("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{const t=xe(rr);return()=>t.scrollStrategies.reposition()}}),tWe={provide:Qce,deps:[rr],useFactory:function eWe(t){return()=>t.scrollStrategies.reposition()}};let y0=(()=>{class t{constructor(e,i,s,r,o,a,l,c,u,d,h){this._element=e,this._overlay=i,this._viewContainerRef=s,this._zone=r,this._changeDetectorRef=o,this._dir=l,this._formField=c,this._document=u,this._viewportRuler=d,this._defaults=h,this._componentDestroyed=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=rn.EMPTY,this._breakpointObserver=xe(wN),this._handsetLandscapeSubscription=rn.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new ot,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._initialized=new ot,this._injector=xe(ci),this._aboveClass="mat-mdc-autocomplete-panel-above",this._overlayAttached=!1,this.optionSelections=Vh(()=>{const p=this.autocomplete?this.autocomplete.options:null;return p?p.changes.pipe(Uo(p),Kt(()=>sr(...p.map(f=>f.onSelectionChange)))):this._initialized.pipe(Kt(()=>this.optionSelections))}),this._handlePanelKeydown=p=>{(27===p.keyCode&&!Da(p)||38===p.keyCode&&Da(p,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),p.stopPropagation(),p.preventDefault())},this._trackedModal=null,this._scrollStrategy=a}ngAfterViewInit(){this._initialized.next(),this._initialized.complete();const e=this._getWindow();typeof e<"u"&&this._zone.runOutsideAngular(()=>e.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const e=this._getWindow();typeof e<"u"&&e.removeEventListener("blur",this._windowBlurHandler),this._handsetLandscapeSubscription.unsubscribe(),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&f0(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return sr(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(Zt(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(Zt(()=>this._overlayAttached)):Ge()).pipe(me(e=>e instanceof Ple?e:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return sr(_f(this._document,"click"),_f(this._document,"auxclick"),_f(this._document,"touchend")).pipe(Zt(e=>{const i=Xd(e),s=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,r=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&i!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!s||!s.contains(i))&&(!r||!r.contains(i))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(i)}))}writeValue(e){Promise.resolve(null).then(()=>this._assignOptionValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){const i=e.keyCode,s=Da(e);if(27===i&&!s&&e.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&13===i&&this.panelOpen&&!s)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){const r=this.autocomplete._keyManager.activeItem,o=38===i||40===i;9===i||o&&!s&&this.panelOpen?this.autocomplete._keyManager.onKeydown(e):o&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(o||this.autocomplete._keyManager.activeItem!==r)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(e){let i=e.target,s=i.value;if("number"===i.type&&(s=""==s?null:parseFloat(s)),this._previousValue!==s){if(this._previousValue=s,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(s),s){if(this.panelOpen&&!this.autocomplete.requireSelection){const r=this.autocomplete.options?.find(o=>o.selected);r&&s!==this._getDisplayValue(r.value)&&r.deselect(!1)}}else this._clearPreviousSelectedOption(null,!1);if(this._canOpen()&&this._document.activeElement===e.target){const r=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(r)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_floatLabel(e=!1){this._formField&&"auto"===this._formField.floatLabel&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){return sr(new Pn(s=>{pl(()=>{s.next()},{injector:this._injector})}),this.autocomplete.options.changes.pipe(gi(()=>this._positionStrategy.reapplyLastPosition()),u0(0))).pipe(Kt(()=>this._zone.run(()=>{const s=this.panelOpen;return this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),s!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit()),this.panelClosingActions})),Zn(1)).subscribe(s=>this._setValueAndClose(s))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(e){const i=this.autocomplete;return i&&i.displayWith?i.displayWith(e):e}_assignOptionValue(e){const i=this._getDisplayValue(e);null==e&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(i??"")}_updateNativeInputValue(e){this._formField?this._formField._control.value=e:this._element.nativeElement.value=e,this._previousValue=e}_setValueAndClose(e){const i=this.autocomplete,s=e?e.source:this._pendingAutoselectedOption;s?(this._clearPreviousSelectedOption(s),this._assignOptionValue(s.value),this._onChange(s.value),i._emitSelectEvent(s),this._element.nativeElement.focus()):i.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),i._animationDone?i._animationDone.pipe(Zn(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(e,i){this.autocomplete?.options?.forEach(s=>{s!==e&&s.selected&&s.deselect(i)})}_openPanelInternal(e=this._element.nativeElement.value){this._attachOverlay(e),this._floatLabel(),this._trackedModal&&CN(this._trackedModal,"aria-owns",this.autocomplete.id)}_attachOverlay(e){let i=this._overlayRef;i?(this._positionStrategy.setOrigin(this._getConnectedElement()),i.updateSize({width:this._getPanelWidth()})):(this._portal=new Mb(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),i=this._overlay.create(this._getOverlayConfig()),this._overlayRef=i,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&i&&i.updateSize({width:this._getPanelWidth()})}),this._handsetLandscapeSubscription=this._breakpointObserver.observe("(max-width: 959.98px) and (orientation: landscape)").subscribe(r=>{r.matches?this._positionStrategy.withFlexibleDimensions(!0).withGrowAfterOpen(!0).withViewportMargin(8):this._positionStrategy.withFlexibleDimensions(!1).withGrowAfterOpen(!1).withViewportMargin(0)})),i&&!i.hasAttached()&&(i.attach(this._portal),this._valueOnAttach=e,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());const s=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&s!==this.panelOpen&&this._emitOpened()}_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){const e=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=e.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=e.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new b0({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){const i=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],s=this._aboveClass,r=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:s},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:s}];let o;o="above"===this.position?r:"below"===this.position?i:[...i,...r],e.withPositions(o)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const e=this.autocomplete;if(e.autoActiveFirstOption){let i=-1;for(let s=0;s<e.options.length;s++)if(!e.options.get(s).disabled){i=s;break}e._keyManager.setActiveItem(i)}else e._keyManager.setActiveItem(-1)}_canOpen(){const e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this.autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(e){const i=this.autocomplete,s=$le(e,i.options,i.optionGroups);if(0===e&&1===s)i._setScrollTop(0);else if(i.panel){const r=i.options.toArray()[e];if(r){const o=r._getHostElement(),a=Ble(o.offsetTop,o.offsetHeight,i._getScrollTop(),i.panel.nativeElement.offsetHeight);i._setScrollTop(a)}}}_applyModalPanelOwnership(){const e=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;const i=this.autocomplete.id;this._trackedModal&&f0(this._trackedModal,"aria-owns",i),CN(e,"aria-owns",i),this._trackedModal=e}_clearFromModal(){this._trackedModal&&(f0(this._trackedModal,"aria-owns",this.autocomplete.id),this._trackedModal=null)}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(rr),I(Kr),I(Lt),I(wi),I(Qce),I(jo,8),I(v0,9),I(Yn,8),I(g0),I(Yce,8))};static#t=this.\u0275dir=He({type:t,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(i,s){1&i&&P("focusin",function(){return s._handleFocus()})("blur",function(){return s._onTouched()})("input",function(o){return s._handleInput(o)})("keydown",function(o){return s._handleKeydown(o)})("click",function(){return s._handleClick()}),2&i&&wt("autocomplete",s.autocompleteAttribute)("role",s.autocompleteDisabled?null:"combobox")("aria-autocomplete",s.autocompleteDisabled?null:"list")("aria-activedescendant",s.panelOpen&&s.activeOption?s.activeOption.id:null)("aria-expanded",s.autocompleteDisabled?null:s.panelOpen.toString())("aria-controls",s.autocompleteDisabled||!s.panelOpen||null==s.autocomplete?null:s.autocomplete.id)("aria-haspopup",s.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[0,"matAutocomplete","autocomplete"],position:[0,"matAutocompletePosition","position"],connectedTo:[0,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[0,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[2,"matAutocompleteDisabled","autocompleteDisabled",ft]},exportAs:["matAutocompleteTrigger"],standalone:!0,features:[bt([JHe]),Li,Rn]})}return t})(),w0=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:[tWe],imports:[vf,RN,Yi,Ka,Ob,RN,Yi]})}return t})();const nWe=["mat-calendar-body",""];function iWe(t,n){return this._trackRow(n)}const Jce=(t,n)=>n.id;function sWe(t,n){if(1&t&&(m(0,"tr",0)(1,"td",3),S(2),_()()),2&t){const e=E();b(),Hn("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),wt("colspan",e.numCols),b(),K(" ",e.label," ")}}function rWe(t,n){if(1&t&&(m(0,"td",3),S(1),_()),2&t){const e=E(2);Hn("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),wt("colspan",e._firstRowOffset),b(),K(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function oWe(t,n){if(1&t){const e=se();m(0,"td",6)(1,"button",7),P("click",function(s){const r=B(e).$implicit;return V(E(2)._cellClicked(r,s))})("focus",function(s){const r=B(e).$implicit;return V(E(2)._emitActiveDateChange(r,s))}),m(2,"span",8),S(3),_(),q(4,"span",9),_()()}if(2&t){const e=n.$implicit,i=n.$index,s=E().$index,r=E();Hn("width",r._cellWidth)("padding-top",r._cellPadding)("padding-bottom",r._cellPadding),wt("data-mat-row",s)("data-mat-col",i),b(),Oe("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",r._isActiveCell(s,i))("mat-calendar-body-range-start",r._isRangeStart(e.compareValue))("mat-calendar-body-range-end",r._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",r._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",r._isComparisonBridgeStart(e.compareValue,s,i))("mat-calendar-body-comparison-bridge-end",r._isComparisonBridgeEnd(e.compareValue,s,i))("mat-calendar-body-comparison-start",r._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",r._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",r._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",r._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",r._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",r._isInPreview(e.compareValue)),C("ngClass",e.cssClasses)("tabindex",r._isActiveCell(s,i)?0:-1),wt("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-pressed",r._isSelected(e.compareValue))("aria-current",r.todayValue===e.compareValue?"date":null)("aria-describedby",r._getDescribedby(e.compareValue)),b(),Oe("mat-calendar-body-selected",r._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",r._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",r.todayValue===e.compareValue),b(),K(" ",e.displayValue," ")}}function aWe(t,n){if(1&t&&(m(0,"tr",1),O(1,rWe,2,6,"td",4),R1(2,oWe,5,48,"td",5,Jce),_()),2&t){const e=n.$implicit,i=n.$index,s=E();b(),Bn(0===i&&s._firstRowOffset?1:-1),b(),F1(e)}}function lWe(t,n){if(1&t&&(m(0,"th",2)(1,"span",6),S(2),_(),m(3,"span",3),S(4),_()()),2&t){const e=n.$implicit;b(2),Ye(e.long),b(2),Ye(e.narrow)}}const cWe=["*"];function uWe(t,n){}function dWe(t,n){if(1&t){const e=se();m(0,"mat-month-view",4),ii("activeDateChange",function(s){B(e);const r=E();return jn(r.activeDate,s)||(r.activeDate=s),V(s)}),P("_userSelection",function(s){return B(e),V(E()._dateSelected(s))})("dragStarted",function(s){return B(e),V(E()._dragStarted(s))})("dragEnded",function(s){return B(e),V(E()._dragEnded(s))}),_()}if(2&t){const e=E();ni("activeDate",e.activeDate),C("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)("startDateAccessibleName",e.startDateAccessibleName)("endDateAccessibleName",e.endDateAccessibleName)("activeDrag",e._activeDrag)}}function hWe(t,n){if(1&t){const e=se();m(0,"mat-year-view",5),ii("activeDateChange",function(s){B(e);const r=E();return jn(r.activeDate,s)||(r.activeDate=s),V(s)}),P("monthSelected",function(s){return B(e),V(E()._monthSelectedInYearView(s))})("selectedChange",function(s){return B(e),V(E()._goToDateInView(s,"month"))}),_()}if(2&t){const e=E();ni("activeDate",e.activeDate),C("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function pWe(t,n){if(1&t){const e=se();m(0,"mat-multi-year-view",6),ii("activeDateChange",function(s){B(e);const r=E();return jn(r.activeDate,s)||(r.activeDate=s),V(s)}),P("yearSelected",function(s){return B(e),V(E()._yearSelectedInMultiYearView(s))})("selectedChange",function(s){return B(e),V(E()._goToDateInView(s,"year"))}),_()}if(2&t){const e=E();ni("activeDate",e.activeDate),C("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function fWe(t,n){}const mWe=["button"],_We=[[["","matDatepickerToggleIcon",""]]],gWe=["[matDatepickerToggleIcon]"];function bWe(t,n){1&t&&(ka(),m(0,"svg",2),q(1,"path",3),_())}let EE=(()=>{class t{constructor(){this.changes=new ot,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(e,i){return`${e} \u2013 ${i}`}formatYearRangeLabel(e,i){return`${e} to ${i}`}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),vWe=0;class CV{constructor(n,e,i,s,r={},o=n,a){this.value=n,this.displayValue=e,this.ariaLabel=i,this.enabled=s,this.cssClasses=r,this.compareValue=o,this.rawValue=a,this.id=vWe++}}let yWe=1;const eue=Hh({passive:!1,capture:!0}),Zm=Hh({passive:!0,capture:!0}),KN=Hh({passive:!0});let C0=(()=>{class t{ngAfterViewChecked(){this._focusActiveCellAfterViewChecked&&(this._focusActiveCell(),this._focusActiveCellAfterViewChecked=!1)}constructor(e,i){this._elementRef=e,this._ngZone=i,this._platform=xe(Ys),this._focusActiveCellAfterViewChecked=!1,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new Ae,this.previewChange=new Ae,this.activeDateChange=new Ae,this.dragStarted=new Ae,this.dragEnded=new Ae,this._didDragSinceMouseDown=!1,this._injector=xe(ci),this._trackRow=s=>s,this._enterHandler=s=>{if(this._skipNextFocus&&"focus"===s.type)this._skipNextFocus=!1;else if(s.target&&this.isRange){const r=this._getCellFromElement(s.target);r&&this._ngZone.run(()=>this.previewChange.emit({value:r.enabled?r:null,event:s}))}},this._touchmoveHandler=s=>{if(!this.isRange)return;const r=tue(s),o=r?this._getCellFromElement(r):null;r!==s.target&&(this._didDragSinceMouseDown=!0),xV(s.target)&&s.preventDefault(),this._ngZone.run(()=>this.previewChange.emit({value:o?.enabled?o:null,event:s}))},this._leaveHandler=s=>{null!==this.previewEnd&&this.isRange&&("blur"!==s.type&&(this._didDragSinceMouseDown=!0),s.target&&this._getCellFromElement(s.target)&&(!s.relatedTarget||!this._getCellFromElement(s.relatedTarget))&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:s})))},this._mousedownHandler=s=>{if(!this.isRange)return;this._didDragSinceMouseDown=!1;const r=s.target&&this._getCellFromElement(s.target);!r||!this._isInRange(r.compareValue)||this._ngZone.run(()=>{this.dragStarted.emit({value:r.rawValue,event:s})})},this._mouseupHandler=s=>{if(!this.isRange)return;const r=xV(s.target);r?r.closest(".mat-calendar-body")===this._elementRef.nativeElement&&this._ngZone.run(()=>{const o=this._getCellFromElement(r);this.dragEnded.emit({value:o?.rawValue??null,event:s})}):this._ngZone.run(()=>{this.dragEnded.emit({value:null,event:s})})},this._touchendHandler=s=>{const r=tue(s);r&&this._mouseupHandler({target:r})},this._id="mat-calendar-body-"+yWe++,this._startDateLabelId=`${this._id}-start-date`,this._endDateLabelId=`${this._id}-end-date`,i.runOutsideAngular(()=>{const s=e.nativeElement;s.addEventListener("touchmove",this._touchmoveHandler,eue),s.addEventListener("mouseenter",this._enterHandler,Zm),s.addEventListener("focus",this._enterHandler,Zm),s.addEventListener("mouseleave",this._leaveHandler,Zm),s.addEventListener("blur",this._leaveHandler,Zm),s.addEventListener("mousedown",this._mousedownHandler,KN),s.addEventListener("touchstart",this._mousedownHandler,KN),this._platform.isBrowser&&(window.addEventListener("mouseup",this._mouseupHandler),window.addEventListener("touchend",this._touchendHandler))})}_cellClicked(e,i){this._didDragSinceMouseDown||e.enabled&&this.selectedValueChange.emit({value:e.value,event:i})}_emitActiveDateChange(e,i){e.enabled&&this.activeDateChange.emit({value:e.value,event:i})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){const i=e.numCols,{rows:s,numCols:r}=this;(e.rows||i)&&(this._firstRowOffset=s&&s.length&&s[0].length?r-s[0].length:0),(e.cellAspectRatio||i||!this._cellPadding)&&(this._cellPadding=50*this.cellAspectRatio/r+"%"),(i||!this._cellWidth)&&(this._cellWidth=100/r+"%")}ngOnDestroy(){const e=this._elementRef.nativeElement;e.removeEventListener("touchmove",this._touchmoveHandler,eue),e.removeEventListener("mouseenter",this._enterHandler,Zm),e.removeEventListener("focus",this._enterHandler,Zm),e.removeEventListener("mouseleave",this._leaveHandler,Zm),e.removeEventListener("blur",this._leaveHandler,Zm),e.removeEventListener("mousedown",this._mousedownHandler,KN),e.removeEventListener("touchstart",this._mousedownHandler,KN),this._platform.isBrowser&&(window.removeEventListener("mouseup",this._mouseupHandler),window.removeEventListener("touchend",this._touchendHandler))}_isActiveCell(e,i){let s=e*this.numCols+i;return e&&(s-=this._firstRowOffset),s==this.activeCell}_focusActiveCell(e=!0){pl(()=>{setTimeout(()=>{const i=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");i&&(e||(this._skipNextFocus=!0),i.focus())})},{injector:this._injector})}_scheduleFocusActiveCellAfterViewChecked(){this._focusActiveCellAfterViewChecked=!0}_isRangeStart(e){return EV(e,this.startValue,this.endValue)}_isRangeEnd(e){return TV(e,this.startValue,this.endValue)}_isInRange(e){return IV(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return EV(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,i,s){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let r=this.rows[i][s-1];if(!r){const o=this.rows[i-1];r=o&&o[o.length-1]}return r&&!this._isRangeEnd(r.compareValue)}_isComparisonBridgeEnd(e,i,s){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let r=this.rows[i][s+1];if(!r){const o=this.rows[i+1];r=o&&o[0]}return r&&!this._isRangeStart(r.compareValue)}_isComparisonEnd(e){return TV(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return IV(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return EV(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return TV(e,this.previewStart,this.previewEnd)}_isInPreview(e){return IV(e,this.previewStart,this.previewEnd,this.isRange)}_getDescribedby(e){return this.isRange?this.startValue===e&&this.endValue===e?`${this._startDateLabelId} ${this._endDateLabelId}`:this.startValue===e?this._startDateLabelId:this.endValue===e?this._endDateLabelId:null:null}_getCellFromElement(e){const i=xV(e);if(i){const s=i.getAttribute("data-mat-row"),r=i.getAttribute("data-mat-col");if(s&&r)return this.rows[parseInt(s)][parseInt(r)]}return null}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(Lt))};static#t=this.\u0275cmp=Se({type:t,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange",activeDateChange:"activeDateChange",dragStarted:"dragStarted",dragEnded:"dragEnded"},exportAs:["matCalendarBody"],standalone:!0,features:[Rn,Ln],attrs:nWe,decls:7,vars:5,consts:[["aria-hidden","true"],["role","row"],[1,"mat-calendar-body-hidden-label",3,"id"],[1,"mat-calendar-body-label"],[1,"mat-calendar-body-label",3,"paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"click","focus","ngClass","tabindex"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(i,s){1&i&&(O(0,sWe,3,6,"tr",0),R1(1,aWe,4,1,"tr",1,iWe,!0),m(3,"label",2),S(4),_(),m(5,"label",2),S(6),_()),2&i&&(Bn(s._firstRowOffset<s.labelMinRequiredCells?0:-1),b(),F1(s.rows),b(2),C("id",s._startDateLabelId),b(),K(" ",s.startDateAccessibleName,"\n"),b(),C("id",s._endDateLabelId),b(),K(" ",s.endDateAccessibleName,"\n"))},dependencies:[JA],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-outline-color, var(--mat-app-primary))}.mat-calendar-body-label{height:0;line-height:0;text-align:start;padding-left:4.7142857143%;padding-right:4.7142857143%;font-size:var(--mat-datepicker-calendar-body-label-text-size, var(--mat-app-title-small-size));font-weight:var(--mat-datepicker-calendar-body-label-text-weight, var(--mat-app-title-small-weight));color:var(--mat-datepicker-calendar-body-label-text-color, var(--mat-app-on-surface))}.mat-calendar-body-hidden-label{display:none}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-app-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-app-body-medium-size))}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;display:block;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview{color:var(--mat-datepicker-calendar-date-preview-state-outline-color, var(--mat-app-primary))}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-disabled>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){color:var(--mat-datepicker-calendar-date-disabled-state-text-color)}.mat-calendar-body-disabled>.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-disabled-state-outline-color)}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px;color:var(--mat-datepicker-calendar-date-text-color, var(--mat-app-on-surface));border-color:var(--mat-datepicker-calendar-date-outline-color)}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-focus-state-background-color)}@media(hover: hover){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-hover-state-background-color)}}.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-state-background-color, var(--mat-app-primary));color:var(--mat-datepicker-calendar-date-selected-state-text-color, var(--mat-app-on-primary))}.mat-calendar-body-disabled>.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-disabled-state-background-color)}.mat-calendar-body-selected.mat-calendar-body-today{box-shadow:inset 0 0 0 1px var(--mat-datepicker-calendar-date-today-selected-state-outline-color, var(--mat-app-primary))}.mat-calendar-body-in-range::before{background:var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-app-primary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-app-tertiary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-app-tertiary-container))}.mat-calendar-body-comparison-bridge-start::before,[dir=rtl] .mat-calendar-body-comparison-bridge-end::before{background:linear-gradient(to right, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-app-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-app-tertiary-container)) 50%)}.mat-calendar-body-comparison-bridge-end::before,[dir=rtl] .mat-calendar-body-comparison-bridge-start::before{background:linear-gradient(to left, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-app-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-app-tertiary-container)) 50%)}.mat-calendar-body-in-range>.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range.mat-calendar-body-in-range::after{background:var(--mat-datepicker-calendar-date-in-overlap-range-state-background-color, var(--mat-app-secondary-container))}.mat-calendar-body-comparison-identical.mat-calendar-body-selected,.mat-calendar-body-in-comparison-range>.mat-calendar-body-selected{background:var(--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color, var(--mat-app-secondary))}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}'],encapsulation:2,changeDetection:0})}return t})();function SV(t){return"TD"===t?.nodeName}function xV(t){let n;return SV(t)?n=t:SV(t.parentNode)?n=t.parentNode:SV(t.parentNode?.parentNode)&&(n=t.parentNode.parentNode),null!=n?.getAttribute("data-mat-row")?n:null}function EV(t,n,e){return null!==e&&n!==e&&t<e&&t===n}function TV(t,n,e){return null!==n&&n!==e&&t>=n&&t===e}function IV(t,n,e,i){return i&&null!==n&&null!==e&&n!==e&&t>=n&&t<=e}function tue(t){const n=t.changedTouches[0];return document.elementFromPoint(n.clientX,n.clientY)}class Pl{constructor(n,e){this.start=n,this.end=e}}let Bb=(()=>{class t{constructor(e,i){this.selection=e,this._adapter=i,this._selectionChanged=new ot,this.selectionChanged=this._selectionChanged,this.selection=e}updateSelection(e,i){const s=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:i,oldValue:s})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}static#e=this.\u0275fac=function(i){GS()};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})(),wWe=(()=>{class t extends Bb{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return null!=this.selection&&this._isValidDateInstance(this.selection)}isComplete(){return null!=this.selection}clone(){const e=new t(this._adapter);return e.updateSelection(this.selection,this),e}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Ll))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const xWe={provide:Bb,deps:[[new Ih,new Xp,Bb],Ll],useFactory:function SWe(t,n){return t||new wWe(n)}},XN=new Ne("MAT_DATE_RANGE_SELECTION_STRATEGY");let kWe=0,nue=(()=>{class t{get activeDate(){return this._activeDate}set activeDate(e){const i=this._activeDate,s=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(s,this.minDate,this.maxDate),this._hasSameMonthAndYear(i,this._activeDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof Pl?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}constructor(e,i,s,r,o){this._changeDetectorRef=e,this._dateFormats=i,this._dateAdapter=s,this._dir=r,this._rangeStrategy=o,this._rerenderSubscription=rn.EMPTY,this.activeDrag=null,this.selectedChange=new Ae,this._userSelection=new Ae,this.dragStarted=new Ae,this.dragEnded=new Ae,this.activeDateChange=new Ae,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Uo(null)).subscribe(()=>this._init())}ngOnChanges(e){const i=e.comparisonStart||e.comparisonEnd;i&&!i.firstChange&&this._setRanges(this.selected),e.activeDrag&&!this.activeDrag&&this._clearPreview()}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){const i=e.value,s=this._getDateFromDayOfMonth(i);let r,o;this._selected instanceof Pl?(r=this._getDateInCurrentMonth(this._selected.start),o=this._getDateInCurrentMonth(this._selected.end)):r=o=this._getDateInCurrentMonth(this._selected),(r!==i||o!==i)&&this.selectedChange.emit(s),this._userSelection.emit({value:s,event:e.event}),this._clearPreview(),this._changeDetectorRef.markForCheck()}_updateActiveDate(e){const s=this._activeDate;this.activeDate=this._getDateFromDayOfMonth(e.value),this._dateAdapter.compareDate(s,this.activeDate)&&this.activeDateChange.emit(this._activeDate)}_handleCalendarBodyKeydown(e){const i=this._activeDate,s=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,s?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,s?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:return this._selectionKeyPressed=!0,void(this._canSelect(this._activeDate)&&e.preventDefault());case 27:return void(null!=this._previewEnd&&!Da(e)&&(this._clearPreview(),this.activeDrag?this.dragEnded.emit({value:null,event:e}):(this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e})),e.preventDefault(),e.stopPropagation()));default:return}this._dateAdapter.compareDate(i,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_previewChanged({event:e,value:i}){if(this._rangeStrategy){const s=i?i.rawValue:null,r=this._rangeStrategy.createPreview(s,this.selected,e);if(this._previewStart=this._getCellCompareValue(r.start),this._previewEnd=this._getCellCompareValue(r.end),this.activeDrag&&s){const o=this._rangeStrategy.createDrag?.(this.activeDrag.value,this.selected,s,e);o&&(this._previewStart=this._getCellCompareValue(o.start),this._previewEnd=this._getCellCompareValue(o.end))}this._changeDetectorRef.detectChanges()}}_dragEnded(e){if(this.activeDrag)if(e.value){const i=this._rangeStrategy?.createDrag?.(this.activeDrag.value,this.selected,e.value,e.event);this.dragEnded.emit({value:i??null,event:e.event})}else this.dragEnded.emit({value:null,event:e.event})}_getDateFromDayOfMonth(e){return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),e)}_initWeekdays(){const e=this._dateAdapter.getFirstDayOfWeek(),i=this._dateAdapter.getDayOfWeekNames("narrow");let r=this._dateAdapter.getDayOfWeekNames("long").map((o,a)=>({long:o,narrow:i[a],id:kWe++}));this._weekdays=r.slice(e).concat(r.slice(0,e))}_createWeekCells(){const e=this._dateAdapter.getNumDaysInMonth(this.activeDate),i=this._dateAdapter.getDateNames();this._weeks=[[]];for(let s=0,r=this._firstWeekOffset;s<e;s++,r++){7==r&&(this._weeks.push([]),r=0);const o=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),s+1),a=this._shouldEnableDate(o),l=this._dateAdapter.format(o,this._dateFormats.display.dateA11yLabel),c=this.dateClass?this.dateClass(o,"month"):void 0;this._weeks[this._weeks.length-1].push(new CV(s+1,i[s],l,a,c,this._getCellCompareValue(o),o))}}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,i){return!(!e||!i||this._dateAdapter.getMonth(e)!=this._dateAdapter.getMonth(i)||this._dateAdapter.getYear(e)!=this._dateAdapter.getYear(i))}_getCellCompareValue(e){if(e){const i=this._dateAdapter.getYear(e),s=this._dateAdapter.getMonth(e),r=this._dateAdapter.getDate(e);return new Date(i,s,r).getTime()}return null}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setRanges(e){e instanceof Pl?(this._rangeStart=this._getCellCompareValue(e.start),this._rangeEnd=this._getCellCompareValue(e.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(e),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(e){return!this.dateFilter||this.dateFilter(e)}_clearPreview(){this._previewStart=this._previewEnd=null}static#e=this.\u0275fac=function(i){return new(i||t)(I(wi),I(Db,8),I(Ll,8),I(jo,8),I(XN,8))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-month-view"]],viewQuery:function(i,s){if(1&i&&Gt(C0,5),2&i){let r;nt(r=it())&&(s._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName",activeDrag:"activeDrag"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",dragStarted:"dragStarted",dragEnded:"dragEnded",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],standalone:!0,features:[Rn,Ln],decls:8,vars:14,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col"],["aria-hidden","true"],["colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","previewChange","dragStarted","dragEnded","keyup","keydown","label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","startDateAccessibleName","endDateAccessibleName"],[1,"cdk-visually-hidden"]],template:function(i,s){1&i&&(m(0,"table",0)(1,"thead",1)(2,"tr"),R1(3,lWe,5,2,"th",2,Jce),_(),m(5,"tr",3),q(6,"th",4),_()(),m(7,"tbody",5),P("selectedValueChange",function(o){return s._dateSelected(o)})("activeDateChange",function(o){return s._updateActiveDate(o)})("previewChange",function(o){return s._previewChanged(o)})("dragStarted",function(o){return s.dragStarted.emit(o)})("dragEnded",function(o){return s._dragEnded(o)})("keyup",function(o){return s._handleCalendarBodyKeyup(o)})("keydown",function(o){return s._handleCalendarBodyKeydown(o)}),_()()),2&i&&(b(3),F1(s._weekdays),b(4),C("label",s._monthLabel)("rows",s._weeks)("todayValue",s._todayDate)("startValue",s._rangeStart)("endValue",s._rangeEnd)("comparisonStart",s._comparisonRangeStart)("comparisonEnd",s._comparisonRangeEnd)("previewStart",s._previewStart)("previewEnd",s._previewEnd)("isRange",s._isRange)("labelMinRequiredCells",3)("activeCell",s._dateAdapter.getDate(s.activeDate)-1)("startDateAccessibleName",s.startDateAccessibleName)("endDateAccessibleName",s.endDateAccessibleName))},dependencies:[C0],encapsulation:2,changeDetection:0})}return t})();const tu=24;let iue=(()=>{class t{get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate;const s=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(s,this.minDate,this.maxDate),sue(this._dateAdapter,i,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof Pl?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}constructor(e,i,s){this._changeDetectorRef=e,this._dateAdapter=i,this._dir=s,this._rerenderSubscription=rn.EMPTY,this.selectedChange=new Ae,this.yearSelected=new Ae,this.activeDateChange=new Ae,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Uo(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const i=this._dateAdapter.getYear(this._activeDate)-TE(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let s=0,r=[];s<tu;s++)r.push(i+s),4==r.length&&(this._years.push(r.map(o=>this._createCellForYear(o))),r=[]);this._changeDetectorRef.markForCheck()}_yearSelected(e){const i=e.value,s=this._dateAdapter.createDate(i,0,1),r=this._getDateFromYear(i);this.yearSelected.emit(s),this.selectedChange.emit(r)}_updateActiveDate(e){const s=this._activeDate;this.activeDate=this._getDateFromYear(e.value),this._dateAdapter.compareDate(s,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){const i=this._activeDate,s=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,s?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,s?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-TE(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,tu-TE(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10*-tu:-tu);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10*tu:tu);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_getActiveCell(){return TE(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getDateFromYear(e){const i=this._dateAdapter.getMonth(this.activeDate),s=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(e,i,1));return this._dateAdapter.createDate(e,i,Math.min(this._dateAdapter.getDate(this.activeDate),s))}_createCellForYear(e){const i=this._dateAdapter.createDate(e,0,1),s=this._dateAdapter.getYearName(i),r=this.dateClass?this.dateClass(i,"multi-year"):void 0;return new CV(e,s,s,this._shouldEnableYear(e),r)}_shouldEnableYear(e){if(null==e||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let s=this._dateAdapter.createDate(e,0,1);this._dateAdapter.getYear(s)==e;s=this._dateAdapter.addCalendarDays(s,1))if(this.dateFilter(s))return!0;return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedYear(e){if(this._selectedYear=null,e instanceof Pl){const i=e.start||e.end;i&&(this._selectedYear=this._dateAdapter.getYear(i))}else e&&(this._selectedYear=this._dateAdapter.getYear(e))}static#e=this.\u0275fac=function(i){return new(i||t)(I(wi),I(Ll,8),I(jo,8))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-multi-year-view"]],viewQuery:function(i,s){if(1&i&&Gt(C0,5),2&i){let r;nt(r=it())&&(s._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],standalone:!0,features:[Ln],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell"]],template:function(i,s){1&i&&(m(0,"table",0)(1,"thead",1)(2,"tr"),q(3,"th",2),_()(),m(4,"tbody",3),P("selectedValueChange",function(o){return s._yearSelected(o)})("activeDateChange",function(o){return s._updateActiveDate(o)})("keyup",function(o){return s._handleCalendarBodyKeyup(o)})("keydown",function(o){return s._handleCalendarBodyKeydown(o)}),_()()),2&i&&(b(4),C("rows",s._years)("todayValue",s._todayYear)("startValue",s._selectedYear)("endValue",s._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",s._getActiveCell()))},dependencies:[C0],encapsulation:2,changeDetection:0})}return t})();function sue(t,n,e,i,s){const r=t.getYear(n),o=t.getYear(e),a=rue(t,i,s);return Math.floor((r-a)/tu)===Math.floor((o-a)/tu)}function TE(t,n,e,i){return function DWe(t,n){return(t%n+n)%n}(t.getYear(n)-rue(t,e,i),tu)}function rue(t,n,e){let i=0;return e?i=t.getYear(e)-tu+1:n&&(i=t.getYear(n)),i}let oue=(()=>{class t{get activeDate(){return this._activeDate}set activeDate(e){let i=this._activeDate;const s=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(s,this.minDate,this.maxDate),this._dateAdapter.getYear(i)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof Pl?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}constructor(e,i,s,r){this._changeDetectorRef=e,this._dateFormats=i,this._dateAdapter=s,this._dir=r,this._rerenderSubscription=rn.EMPTY,this.selectedChange=new Ae,this.monthSelected=new Ae,this.activeDateChange=new Ae,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Uo(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){const i=e.value,s=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),i,1);this.monthSelected.emit(s);const r=this._getDateFromMonth(i);this.selectedChange.emit(r)}_updateActiveDate(e){const s=this._activeDate;this.activeDate=this._getDateFromMonth(e.value),this._dateAdapter.compareDate(s,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){const i=this._activeDate,s=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,s?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,s?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(i,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(i=>i.map(s=>this._createCellForMonth(s,e[s]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_getDateFromMonth(e){const i=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),s=this._dateAdapter.getNumDaysInMonth(i);return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,Math.min(this._dateAdapter.getDate(this.activeDate),s))}_createCellForMonth(e,i){const s=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),r=this._dateAdapter.format(s,this._dateFormats.display.monthYearA11yLabel),o=this.dateClass?this.dateClass(s,"year"):void 0;return new CV(e,i.toLocaleUpperCase(),r,this._shouldEnableMonth(e),o)}_shouldEnableMonth(e){const i=this._dateAdapter.getYear(this.activeDate);if(null==e||this._isYearAndMonthAfterMaxDate(i,e)||this._isYearAndMonthBeforeMinDate(i,e))return!1;if(!this.dateFilter)return!0;for(let r=this._dateAdapter.createDate(i,e,1);this._dateAdapter.getMonth(r)==e;r=this._dateAdapter.addCalendarDays(r,1))if(this.dateFilter(r))return!0;return!1}_isYearAndMonthAfterMaxDate(e,i){if(this.maxDate){const s=this._dateAdapter.getYear(this.maxDate),r=this._dateAdapter.getMonth(this.maxDate);return e>s||e===s&&i>r}return!1}_isYearAndMonthBeforeMinDate(e,i){if(this.minDate){const s=this._dateAdapter.getYear(this.minDate),r=this._dateAdapter.getMonth(this.minDate);return e<s||e===s&&i<r}return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedMonth(e){this._selectedMonth=e instanceof Pl?this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end):this._getMonthInCurrentYear(e)}static#e=this.\u0275fac=function(i){return new(i||t)(I(wi),I(Db,8),I(Ll,8),I(jo,8))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-year-view"]],viewQuery:function(i,s){if(1&i&&Gt(C0,5),2&i){let r;nt(r=it())&&(s._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],standalone:!0,features:[Ln],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell"]],template:function(i,s){1&i&&(m(0,"table",0)(1,"thead",1)(2,"tr"),q(3,"th",2),_()(),m(4,"tbody",3),P("selectedValueChange",function(o){return s._monthSelected(o)})("activeDateChange",function(o){return s._updateActiveDate(o)})("keyup",function(o){return s._handleCalendarBodyKeyup(o)})("keydown",function(o){return s._handleCalendarBodyKeydown(o)}),_()()),2&i&&(b(4),C("label",s._yearLabel)("rows",s._months)("todayValue",s._todayMonth)("startValue",s._selectedMonth)("endValue",s._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",s._dateAdapter.getMonth(s.activeDate)))},dependencies:[C0],encapsulation:2,changeDetection:0})}return t})(),AWe=1,aue=(()=>{class t{constructor(e,i,s,r,o){this._intl=e,this.calendar=i,this._dateAdapter=s,this._dateFormats=r,this._id="mat-calendar-header-"+AWe++,this._periodButtonLabelId=`${this._id}-period-label`,this.calendar.stateChanges.subscribe(()=>o.markForCheck())}get periodButtonText(){return"month"==this.calendar.currentView?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():"year"==this.calendar.currentView?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRange(...this._formatMinAndMaxYearLabels())}get periodButtonDescription(){return"month"==this.calendar.currentView?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():"year"==this.calendar.currentView?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRangeLabel(...this._formatMinAndMaxYearLabels())}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-tu)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:tu)}previousEnabled(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(e,i){return"month"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(i):"year"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(i):sue(this._dateAdapter,e,i,this.calendar.minDate,this.calendar.maxDate)}_formatMinAndMaxYearLabels(){const i=this._dateAdapter.getYear(this.calendar.activeDate)-TE(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),s=i+tu-1;return[this._dateAdapter.getYearName(this._dateAdapter.createDate(i,0,1)),this._dateAdapter.getYearName(this._dateAdapter.createDate(s,0,1))]}static#e=this.\u0275fac=function(i){return new(i||t)(I(EE),I(wn(()=>AV)),I(Ll,8),I(Db,8),I(wi))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],standalone:!0,features:[Ln],ngContentSelectors:cWe,decls:13,vars:11,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["aria-live","polite",1,"cdk-visually-hidden",3,"id"],["mat-button","","type","button",1,"mat-calendar-period-button",3,"click"],["aria-hidden","true"],["viewBox","0 0 10 5","focusable","false","aria-hidden","true",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"click","disabled"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"click","disabled"]],template:function(i,s){1&i&&(Si(),m(0,"div",0)(1,"div",1)(2,"label",2),S(3),_(),m(4,"button",3),P("click",function(){return s.currentPeriodClicked()}),m(5,"span",4),S(6),_(),ka(),m(7,"svg",5),q(8,"polygon",6),_()(),bm(),q(9,"div",7),en(10),m(11,"button",8),P("click",function(){return s.previousClicked()}),_(),m(12,"button",9),P("click",function(){return s.nextClicked()}),_()()()),2&i&&(b(2),C("id",s._periodButtonLabelId),b(),Ye(s.periodButtonDescription),b(),wt("aria-label",s.periodButtonLabel)("aria-describedby",s._periodButtonLabelId),b(2),Ye(s.periodButtonText),b(),Oe("mat-calendar-invert","month"!==s.calendar.currentView),b(4),C("disabled",!s.previousEnabled()),wt("aria-label",s.prevButtonLabel),b(),C("disabled",!s.nextEnabled()),wt("aria-label",s.nextButtonLabel))},dependencies:[nV,iV],encapsulation:2,changeDetection:0})}return t})(),AV=(()=>{class t{get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get selected(){return this._selected}set selected(e){this._selected=e instanceof Pl?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(e){const i=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),i&&this.viewChanged.emit(i)}constructor(e,i,s,r){this._dateAdapter=i,this._dateFormats=s,this._changeDetectorRef=r,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new Ae,this.yearSelected=new Ae,this.monthSelected=new Ae,this.viewChanged=new Ae(!0),this._userSelection=new Ae,this._userDragDrop=new Ae,this._activeDrag=null,this.stateChanges=new ot,this._intlChanges=e.changes.subscribe(()=>{r.markForCheck(),this.stateChanges.next()})}ngAfterContentInit(){this._calendarHeaderPortal=new Ab(this.headerComponent||aue),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){const i=e.minDate&&!this._dateAdapter.sameDate(e.minDate.previousValue,e.minDate.currentValue)?e.minDate:void 0,s=e.maxDate&&!this._dateAdapter.sameDate(e.maxDate.previousValue,e.maxDate.currentValue)?e.maxDate:void 0,r=i||s||e.dateFilter;if(r&&!r.firstChange){const o=this._getCurrentViewComponent();o&&(this._moveFocusOnNextTick=!0,this._changeDetectorRef.detectChanges(),o._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(e){const i=e.value;(this.selected instanceof Pl||i&&!this._dateAdapter.sameDate(i,this.selected))&&this.selectedChange.emit(i),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,i){this.activeDate=e,this.currentView=i}_dragStarted(e){this._activeDrag=e}_dragEnded(e){this._activeDrag&&(e.value&&this._userDragDrop.emit(e),this._activeDrag=null)}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}static#e=this.\u0275fac=function(i){return new(i||t)(I(EE),I(Ll,8),I(Db,8),I(wi))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-calendar"]],viewQuery:function(i,s){if(1&i&&(Gt(nue,5),Gt(oue,5),Gt(iue,5)),2&i){let r;nt(r=it())&&(s.monthView=r.first),nt(r=it())&&(s.yearView=r.first),nt(r=it())&&(s.multiYearView=r.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection",_userDragDrop:"_userDragDrop"},exportAs:["matCalendar"],standalone:!0,features:[bt([xWe]),Rn,Ln],decls:5,vars:2,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","_userSelection","dragStarted","dragEnded","activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDateChange","monthSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","yearSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"]],template:function(i,s){if(1&i&&(O(0,uWe,0,0,"ng-template",0),m(1,"div",1),O(2,dWe,1,11,"mat-month-view",2)(3,hWe,1,6,"mat-year-view",3)(4,pWe,1,6,"mat-multi-year-view",3),_()),2&i){let r;C("cdkPortalOutlet",s._calendarHeaderPortal),b(2),Bn("month"===(r=s.currentView)?2:"year"===r?3:"multi-year"===r?4:-1)}},dependencies:[Ym,LUe,nue,oue,iue],styles:['.mat-calendar{display:block;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-app-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-app-body-medium-size))}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;align-items:center;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0;margin:0 8px;font-size:var(--mat-datepicker-calendar-period-button-text-size, var(--mat-app-title-small-size));font-weight:var(--mat-datepicker-calendar-period-button-text-weight, var(--mat-app-title-small-weight));--mdc-text-button-label-text-color:var(--mat-datepicker-calendar-period-button-text-color, var(--mat-app-on-surface-variant))}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle;fill:var(--mat-datepicker-calendar-period-button-icon-color, var(--mat-app-on-surface-variant))}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.cdk-high-contrast-active .mat-calendar-arrow{fill:CanvasText}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-datepicker-content .mat-calendar-previous-button:not(.mat-mdc-button-disabled),.mat-datepicker-content .mat-calendar-next-button:not(.mat-mdc-button-disabled){color:var(--mat-datepicker-calendar-navigation-button-icon-color, var(--mat-app-on-surface-variant))}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0;color:var(--mat-datepicker-calendar-header-text-color, var(--mat-app-on-surface-variant));font-size:var(--mat-datepicker-calendar-header-text-size, var(--mat-app-title-small-size));font-weight:var(--mat-datepicker-calendar-header-text-weight, var(--mat-app-title-small-weight))}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px;background:var(--mat-datepicker-calendar-header-divider-color)}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return t})();const lue={transformPanel:zo("transformPanel",[ms("void => enter-dropdown",Cs("120ms cubic-bezier(0, 0, 0.2, 1)",j1([bn({opacity:0,transform:"scale(1, 0.8)"}),bn({opacity:1,transform:"scale(1, 1)"})]))),ms("void => enter-dialog",Cs("150ms cubic-bezier(0, 0, 0.2, 1)",j1([bn({opacity:0,transform:"scale(0.7)"}),bn({transform:"none",opacity:1})]))),ms("* => void",Cs("100ms linear",bn({opacity:0})))]),fadeInCalendar:zo("fadeInCalendar",[Xs("void",bn({opacity:0})),Xs("enter",bn({opacity:1})),ms("void => *",Cs("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])},MWe=new Ne("mat-datepicker-scroll-strategy",{providedIn:"root",factory:()=>{const t=xe(rr);return()=>t.scrollStrategies.reposition()}}),OWe={provide:MWe,deps:[rr],useFactory:function NWe(t){return()=>t.scrollStrategies.reposition()}};let RWe=(()=>{class t{constructor(e,i,s,r,o,a){this._elementRef=e,this._changeDetectorRef=i,this._globalModel=s,this._dateAdapter=r,this._rangeSelectionStrategy=o,this._subscriptions=new rn,this._animationDone=new ot,this._isAnimating=!1,this._actionsPortal=null,this._closeButtonText=a.closeCalendarLabel}ngOnInit(){this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(e){const i=this._model.selection,s=e.value,r=i instanceof Pl;if(r&&this._rangeSelectionStrategy){const o=this._rangeSelectionStrategy.selectionFinished(s,i,e.event);this._model.updateSelection(o,this)}else s&&(r||!this._dateAdapter.sameDate(s,i))&&this._model.add(s);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_handleUserDragDrop(e){this._model.updateSelection(e.value,this)}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_handleAnimationEvent(e){this._isAnimating="start"===e.phaseName,this._isAnimating||this._animationDone.next()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}_assignActions(e,i){this._model=e?this._globalModel.clone():this._globalModel,this._actionsPortal=e,i&&this._changeDetectorRef.detectChanges()}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(wi),I(Bb),I(Ll),I(XN,8),I(EE))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-datepicker-content"]],viewQuery:function(i,s){if(1&i&&Gt(AV,5),2&i){let r;nt(r=it())&&(s._calendar=r.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:5,hostBindings:function(i,s){1&i&&vx("@transformPanel.start",function(o){return s._handleAnimationEvent(o)})("@transformPanel.done",function(o){return s._handleAnimationEvent(o)}),2&i&&(px("@transformPanel",s._animationState),$o(s.color?"mat-"+s.color:""),Oe("mat-datepicker-content-touch",s.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],standalone:!0,features:[Ln],decls:5,vars:27,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"yearSelected","monthSelected","viewChanged","_userSelection","_userDragDrop","id","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"focus","blur","click","color"]],template:function(i,s){if(1&i&&(m(0,"div",0)(1,"mat-calendar",1),P("yearSelected",function(o){return s.datepicker._selectYear(o)})("monthSelected",function(o){return s.datepicker._selectMonth(o)})("viewChanged",function(o){return s.datepicker._viewChanged(o)})("_userSelection",function(o){return s._handleUserSelection(o)})("_userDragDrop",function(o){return s._handleUserDragDrop(o)}),_(),O(2,fWe,0,0,"ng-template",2),m(3,"button",3),P("focus",function(){return s._closeButtonFocused=!0})("blur",function(){return s._closeButtonFocused=!1})("click",function(){return s.datepicker.close()}),S(4),_()()),2&i){let r;Oe("mat-datepicker-content-container-with-custom-header",s.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",s._actionsPortal),wt("aria-modal",!0)("aria-labelledby",null!==(r=s._dialogLabelId)&&void 0!==r?r:void 0),b(),$o(s.datepicker.panelClass),C("id",s.datepicker.id)("startAt",s.datepicker.startAt)("startView",s.datepicker.startView)("minDate",s.datepicker._getMinDate())("maxDate",s.datepicker._getMaxDate())("dateFilter",s.datepicker._getDateFilter())("headerComponent",s.datepicker.calendarHeaderComponent)("selected",s._getSelected())("dateClass",s.datepicker.dateClass)("comparisonStart",s.comparisonStart)("comparisonEnd",s.comparisonEnd)("@fadeInCalendar","enter")("startDateAccessibleName",s.startDateAccessibleName)("endDateAccessibleName",s.endDateAccessibleName),b(),C("cdkPortalOutlet",s._actionsPortal),b(),Oe("cdk-visually-hidden",!s._closeButtonFocused),C("color",s.color||"primary"),b(),Ye(s._closeButtonText)}},dependencies:[IUe,AV,Ym,nV],styles:[".mat-datepicker-content{display:block;border-radius:4px;background-color:var(--mat-datepicker-calendar-container-background-color, var(--mat-app-surface-container-high));color:var(--mat-datepicker-calendar-container-text-color, var(--mat-app-on-surface));box-shadow:var(--mat-datepicker-calendar-container-elevation-shadow);border-radius:var(--mat-datepicker-calendar-container-shape, var(--mat-app-corner-large))}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;box-shadow:var(--mat-datepicker-calendar-container-touch-elevation-shadow);border-radius:var(--mat-datepicker-calendar-container-touch-shape, var(--mat-app-corner-extra-large));position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}"],encapsulation:2,data:{animation:[lue.transformPanel,lue.fadeInCalendar]},changeDetection:0})}return t})(),BWe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=He({type:t,selectors:[["","matDatepickerToggleIcon",""]],standalone:!0})}return t})(),VWe=(()=>{class t{get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(e){this._disabled=e}constructor(e,i,s){this._intl=e,this._changeDetectorRef=i,this._stateChanges=rn.EMPTY;const r=Number(s);this.tabIndex=r||0===r?r:null}ngOnChanges(e){e.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())}_watchStateChanges(){const e=this.datepicker?this.datepicker.stateChanges:Ge(),i=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:Ge(),s=this.datepicker?sr(this.datepicker.openedStream,this.datepicker.closedStream):Ge();this._stateChanges.unsubscribe(),this._stateChanges=sr(this._intl.changes,e,i,s).subscribe(()=>this._changeDetectorRef.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||t)(I(EE),I(wi),sc("tabindex"))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-datepicker-toggle"]],contentQueries:function(i,s,r){if(1&i&&Bi(r,BWe,5),2&i){let o;nt(o=it())&&(s._customIcon=o.first)}},viewQuery:function(i,s){if(1&i&&Gt(mWe,5),2&i){let r;nt(r=it())&&(s._button=r.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(i,s){1&i&&P("click",function(o){return s._open(o)}),2&i&&(wt("tabindex",null)("data-mat-calendar",s.datepicker?s.datepicker.id:null),Oe("mat-datepicker-toggle-active",s.datepicker&&s.datepicker.opened)("mat-accent",s.datepicker&&"accent"===s.datepicker.color)("mat-warn",s.datepicker&&"warn"===s.datepicker.color))},inputs:{datepicker:[0,"for","datepicker"],tabIndex:"tabIndex",ariaLabel:[0,"aria-label","ariaLabel"],disabled:[2,"disabled","disabled",ft],disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],standalone:!0,features:[Li,Rn,Ln],ngContentSelectors:gWe,decls:4,vars:6,consts:[["button",""],["mat-icon-button","","type","button",3,"disabled","disableRipple"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false","aria-hidden","true",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(i,s){1&i&&(Si(_We),m(0,"button",1,0),O(2,bWe,2,0,":svg:svg",2),en(3),_()),2&i&&(C("disabled",s.disabled)("disableRipple",s.disableRipple),wt("aria-haspopup",s.datepicker?"dialog":null)("aria-label",s.ariaLabel||s._intl.openCalendarLabel)("tabindex",s.disabled?-1:s.tabIndex),b(2),Bn(s._customIcon?-1:2))},dependencies:[iV],styles:[".mat-datepicker-toggle{pointer-events:auto;color:var(--mat-datepicker-toggle-icon-color, var(--mat-app-on-surface-variant))}.mat-datepicker-toggle-active{color:var(--mat-datepicker-toggle-active-state-icon-color, var(--mat-app-on-surface-variant))}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}"],encapsulation:2,changeDetection:0})}return t})(),ZN=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:[EE,OWe],imports:[Ka,_0,vf,Y6,qh,Yi,RWe,VWe,aue,Ob]})}return t})();const due=["*",[["mat-chip-avatar"],["","matChipAvatar",""]],[["mat-chip-trailing-icon"],["","matChipRemove",""],["","matChipTrailingIcon",""]]],hue=["*","mat-chip-avatar, [matChipAvatar]","mat-chip-trailing-icon,[matChipRemove],[matChipTrailingIcon]"];function GWe(t,n){1&t&&(m(0,"span",3),en(1,1),_())}function jWe(t,n){1&t&&(m(0,"span",6),en(1,2),_())}const qWe=[[["mat-chip-avatar"],["","matChipAvatar",""]],[["","matChipEditInput",""]],"*",[["mat-chip-trailing-icon"],["","matChipRemove",""],["","matChipTrailingIcon",""]]],KWe=["mat-chip-avatar, [matChipAvatar]","[matChipEditInput]","*","mat-chip-trailing-icon,[matChipRemove],[matChipTrailingIcon]"];function XWe(t,n){1&t&&q(0,"span",0)}function YWe(t,n){1&t&&(m(0,"span",2),en(1),_())}function ZWe(t,n){1&t&&en(0,1)}function QWe(t,n){1&t&&q(0,"span",7)}function JWe(t,n){1&t&&O(0,ZWe,1,0)(1,QWe,1,0,"span",7),2&t&&Bn(E().contentEditInput?0:1)}function eqe(t,n){1&t&&en(0,2)}function tqe(t,n){1&t&&(m(0,"span",5),en(1,3),_())}const NV=["*"],QN=new Ne("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})}),OV=new Ne("MatChipAvatar"),RV=new Ne("MatChipTrailingIcon"),FV=new Ne("MatChipRemove"),JN=new Ne("MatChip");let S0=(()=>{class t{get disabled(){return this._disabled||this._parentChip.disabled}set disabled(e){this._disabled=e}_getDisabledAttribute(){return this.disabled&&!this._allowFocusWhenDisabled?"":null}_getTabindex(){return this.disabled&&!this._allowFocusWhenDisabled||!this.isInteractive?null:this.tabIndex.toString()}constructor(e,i){this._elementRef=e,this._parentChip=i,this.isInteractive=!0,this._isPrimary=!0,this._disabled=!1,this.tabIndex=-1,this._allowFocusWhenDisabled=!1,"BUTTON"===e.nativeElement.nodeName&&e.nativeElement.setAttribute("type","button")}focus(){this._elementRef.nativeElement.focus()}_handleClick(e){!this.disabled&&this.isInteractive&&this._isPrimary&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!this.disabled&&this.isInteractive&&this._isPrimary&&!this._parentChip._isEditing&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(JN))};static#t=this.\u0275dir=He({type:t,selectors:[["","matChipAction",""]],hostAttrs:[1,"mdc-evolution-chip__action","mat-mdc-chip-action"],hostVars:9,hostBindings:function(i,s){1&i&&P("click",function(o){return s._handleClick(o)})("keydown",function(o){return s._handleKeydown(o)}),2&i&&(wt("tabindex",s._getTabindex())("disabled",s._getDisabledAttribute())("aria-disabled",s.disabled),Oe("mdc-evolution-chip__action--primary",s._isPrimary)("mdc-evolution-chip__action--presentational",!s.isInteractive)("mdc-evolution-chip__action--trailing",!s._isPrimary))},inputs:{isInteractive:"isInteractive",disabled:[2,"disabled","disabled",ft],tabIndex:[2,"tabIndex","tabIndex",e=>null==e?-1:Xr(e)],_allowFocusWhenDisabled:"_allowFocusWhenDisabled"},standalone:!0,features:[Li]})}return t})(),eO=(()=>{class t extends S0{constructor(){super(...arguments),this._isPrimary=!1}_handleClick(e){this.disabled||(e.stopPropagation(),e.preventDefault(),this._parentChip.remove())}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!this.disabled&&(e.stopPropagation(),e.preventDefault(),this._parentChip.remove())}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=$n(t)))(s||t)}})();static#t=this.\u0275dir=He({type:t,selectors:[["","matChipRemove",""]],hostAttrs:["role","button",1,"mat-mdc-chip-remove","mat-mdc-chip-trailing-icon","mat-mdc-focus-indicator","mdc-evolution-chip__icon","mdc-evolution-chip__icon--trailing"],hostVars:1,hostBindings:function(i,s){2&i&&wt("aria-hidden",null)},standalone:!0,features:[bt([{provide:FV,useExisting:t}]),Ze]})}return t})(),sqe=0,x0=(()=>{class t{_hasFocus(){return this._hasFocusInternal}get value(){return void 0!==this._value?this._value:this._textElement.textContent.trim()}set value(e){this._value=e}get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}constructor(e,i,s,r,o,a,l){this._changeDetectorRef=e,this._elementRef=i,this._ngZone=s,this._focusMonitor=r,this._globalRippleOptions=l,this._onFocus=new ot,this._onBlur=new ot,this.role=null,this._hasFocusInternal=!1,this.id="mat-mdc-chip-"+sqe++,this.ariaLabel=null,this.ariaDescription=null,this._ariaDescriptionId=`${this.id}-aria-description`,this.removable=!0,this.highlighted=!1,this.disableRipple=!1,this.disabled=!1,this.removed=new Ae,this.destroyed=new Ae,this.basicChipAttrName="mat-basic-chip",this._rippleLoader=xe(Gle),this._injector=xe(ci),this._document=o,this._animationsDisabled="NoopAnimations"===a,this._monitorFocus(),this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-chip-ripple",disabled:this._isRippleDisabled()})}ngOnInit(){const e=this._elementRef.nativeElement;this._isBasicChip=e.hasAttribute(this.basicChipAttrName)||e.tagName.toLowerCase()===this.basicChipAttrName}ngAfterViewInit(){this._textElement=this._elementRef.nativeElement.querySelector(".mat-mdc-chip-action-label"),this._pendingFocus&&(this._pendingFocus=!1,this.focus())}ngAfterContentInit(){this._actionChanges=sr(this._allLeadingIcons.changes,this._allTrailingIcons.changes,this._allRemoveIcons.changes).subscribe(()=>this._changeDetectorRef.markForCheck())}ngDoCheck(){this._rippleLoader.setDisabled(this._elementRef.nativeElement,this._isRippleDisabled())}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement),this._actionChanges?.unsubscribe(),this.destroyed.emit({chip:this}),this.destroyed.complete()}remove(){this.removable&&this.removed.emit({chip:this})}_isRippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||this._isBasicChip||!!this._globalRippleOptions?.disabled}_hasTrailingIcon(){return!(!this.trailingIcon&&!this.removeIcon)}_handleKeydown(e){(8===e.keyCode&&!e.repeat||46===e.keyCode)&&(e.preventDefault(),this.remove())}focus(){this.disabled||(this.primaryAction?this.primaryAction.focus():this._pendingFocus=!0)}_getSourceAction(e){return this._getActions().find(i=>{const s=i._elementRef.nativeElement;return s===e||s.contains(e)})}_getActions(){const e=[];return this.primaryAction&&e.push(this.primaryAction),this.removeIcon&&e.push(this.removeIcon),this.trailingIcon&&e.push(this.trailingIcon),e}_handlePrimaryActionInteraction(){}_monitorFocus(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{const i=null!==e;i!==this._hasFocusInternal&&(this._hasFocusInternal=i,i?this._onFocus.next({chip:this}):pl(()=>this._ngZone.run(()=>this._onBlur.next({chip:this})),{injector:this._injector}))})}static#e=this.\u0275fac=function(i){return new(i||t)(I(wi),I(vt),I(Lt),I(pc),I(Yn),I(ua,8),I(gE,8))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(i,s,r){if(1&i&&(Bi(r,OV,5),Bi(r,RV,5),Bi(r,FV,5),Bi(r,OV,5),Bi(r,RV,5),Bi(r,FV,5)),2&i){let o;nt(o=it())&&(s.leadingIcon=o.first),nt(o=it())&&(s.trailingIcon=o.first),nt(o=it())&&(s.removeIcon=o.first),nt(o=it())&&(s._allLeadingIcons=o),nt(o=it())&&(s._allTrailingIcons=o),nt(o=it())&&(s._allRemoveIcons=o)}},viewQuery:function(i,s){if(1&i&&Gt(S0,5),2&i){let r;nt(r=it())&&(s.primaryAction=r.first)}},hostAttrs:[1,"mat-mdc-chip"],hostVars:31,hostBindings:function(i,s){1&i&&P("keydown",function(o){return s._handleKeydown(o)}),2&i&&(fl("id",s.id),wt("role",s.role)("aria-label",s.ariaLabel),$o("mat-"+(s.color||"primary")),Oe("mdc-evolution-chip",!s._isBasicChip)("mdc-evolution-chip--disabled",s.disabled)("mdc-evolution-chip--with-trailing-action",s._hasTrailingIcon())("mdc-evolution-chip--with-primary-graphic",s.leadingIcon)("mdc-evolution-chip--with-primary-icon",s.leadingIcon)("mdc-evolution-chip--with-avatar",s.leadingIcon)("mat-mdc-chip-with-avatar",s.leadingIcon)("mat-mdc-chip-highlighted",s.highlighted)("mat-mdc-chip-disabled",s.disabled)("mat-mdc-basic-chip",s._isBasicChip)("mat-mdc-standard-chip",!s._isBasicChip)("mat-mdc-chip-with-trailing-icon",s._hasTrailingIcon())("_mat-animation-noopable",s._animationsDisabled))},inputs:{role:"role",id:"id",ariaLabel:[0,"aria-label","ariaLabel"],ariaDescription:[0,"aria-description","ariaDescription"],value:"value",color:"color",removable:[2,"removable","removable",ft],highlighted:[2,"highlighted","highlighted",ft],disableRipple:[2,"disableRipple","disableRipple",ft],disabled:[2,"disabled","disabled",ft]},outputs:{removed:"removed",destroyed:"destroyed"},exportAs:["matChip"],standalone:!0,features:[bt([{provide:JN,useExisting:t}]),Li,Ln],ngContentSelectors:hue,decls:8,vars:3,consts:[[1,"mat-mdc-chip-focus-overlay"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary"],["matChipAction","",3,"isInteractive"],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label"],[1,"mat-mdc-chip-primary-focus-indicator","mat-mdc-focus-indicator"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"]],template:function(i,s){1&i&&(Si(due),q(0,"span",0),m(1,"span",1)(2,"span",2),O(3,GWe,2,0,"span",3),m(4,"span",4),en(5),q(6,"span",5),_()()(),O(7,jWe,2,0,"span",6)),2&i&&(b(2),C("isInteractive",!1),b(),Bn(s.leadingIcon?3:-1),b(4),Bn(s._hasTrailingIcon()?7:-1))},dependencies:[S0],styles:['.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{flex-basis:100%;overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}.mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit;overflow-x:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-outline-width);border-radius:var(--mdc-chip-container-shape-radius);box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1;border-style:solid}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-outline-color, var(--mat-app-outline))}.mdc-evolution-chip__action--primary:not(.mdc-evolution-chip__action--presentational):not(.mdc-ripple-upgraded):focus::before{border-color:var(--mdc-chip-focus-outline-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-disabled-outline-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-basic-chip .mdc-evolution-chip__action--primary{font:inherit}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip__action--trailing{position:relative;overflow:visible}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-trailing-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-color, var(--mat-app-on-surface))}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip__text-label{-webkit-user-select:none;user-select:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__text-label{font-family:var(--mdc-chip-label-text-font, var(--mat-app-label-large-font));line-height:var(--mdc-chip-label-text-line-height, var(--mat-app-label-large-line-height));font-size:var(--mdc-chip-label-text-size, var(--mat-app-label-large-size));font-weight:var(--mdc-chip-label-text-weight, var(--mat-app-label-large-weight));letter-spacing:var(--mdc-chip-label-text-tracking, var(--mat-app-label-large-tracking))}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-label-text-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-selected-label-text-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label,.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color)}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{width:var(--mdc-chip-with-avatar-avatar-size);height:var(--mdc-chip-with-avatar-avatar-size);font-size:var(--mdc-chip-with-avatar-avatar-size)}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%;height:20px;width:20px}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-disabled-icon-color, var(--mat-app-on-surface))}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.cdk-high-contrast-active .mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove{opacity:calc(var(--mat-chip-trailing-action-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove:focus{opacity:calc(var(--mat-chip-trailing-action-focus-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mat-mdc-standard-chip{border-radius:var(--mdc-chip-container-shape-radius);height:var(--mdc-chip-container-height)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-selected-container-color, var(--mat-app-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-flat-disabled-selected-container-color)}.cdk-high-contrast-active .mat-mdc-standard-chip{outline:solid 1px}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mdc-chip-with-avatar-avatar-shape-radius);width:var(--mdc-chip-with-icon-icon-size);height:var(--mdc-chip-with-icon-icon-size);font-size:var(--mdc-chip-with-icon-icon-size)}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-disabled-icon-color, var(--mat-app-on-surface))}.mat-mdc-chip-highlighted{--mdc-chip-with-icon-icon-color:var(--mdc-chip-with-icon-selected-icon-color, var(--mat-app-on-secondary-container));--mdc-chip-elevated-container-color:var(--mdc-chip-elevated-selected-container-color, var(--mat-app-secondary-container));--mdc-chip-label-text-color:var(--mdc-chip-selected-label-text-color, var(--mat-app-on-secondary-container));--mdc-chip-outline-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-chip-selected .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color, var(--mat-app-on-secondary-container))}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-hover-state-layer-color, var(--mat-app-on-surface-variant));opacity:var(--mdc-chip-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip-focus-overlay .mat-mdc-chip-selected:hover,.mat-mdc-chip-highlighted:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-hover-state-layer-color, var(--mat-app-on-secondary-container));opacity:var(--mdc-chip-selected-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color, var(--mat-app-on-surface-variant));opacity:var(--mdc-chip-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-chip-selected.cdk-focused .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color, var(--mat-app-on-secondary-container));opacity:var(--mdc-chip-selected-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mdc-evolution-chip--disabled:not(.mdc-evolution-chip--selected) .mat-mdc-chip-avatar{opacity:var(--mdc-chip-with-avatar-disabled-avatar-opacity)}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{opacity:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity)}.mdc-evolution-chip--disabled.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{opacity:var(--mdc-chip-with-icon-disabled-icon-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:var(--mat-chip-disabled-container-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-trailing-icon-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-disabled-trailing-icon-color, var(--mat-app-on-surface))}.mat-mdc-chip-remove{opacity:var(--mat-chip-trailing-action-opacity)}.mat-mdc-chip-remove:focus{opacity:var(--mat-chip-trailing-action-focus-opacity)}.mat-mdc-chip-remove::after{background:var(--mat-chip-trailing-action-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-chip-remove:hover::after{opacity:var(--mat-chip-trailing-action-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip-remove:focus::after{opacity:var(--mat-chip-trailing-action-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-chip-selected .mat-mdc-chip-remove::after,.mat-mdc-chip-highlighted .mat-mdc-chip-remove::after{background:var(--mat-chip-selected-trailing-action-state-layer-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mat-mdc-chip-action-label{overflow:visible}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip .mat-ripple.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative;z-index:0}.mat-mdc-chip-action-label{text-align:left;z-index:1}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-chip-remove::before{margin:calc(var(--mat-mdc-focus-indicator-border-width, 3px)*-1);left:8px;right:8px}.mat-mdc-chip-remove::after{content:"";display:block;opacity:0;position:absolute;top:-2px;bottom:-2px;left:6px;right:6px;border-radius:50%}.mat-mdc-chip-remove .mat-icon{width:18px;height:18px;font-size:18px;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}.cdk-high-contrast-active .mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}.mat-mdc-chip-action:focus .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return t})(),tO=(()=>{class t{constructor(e,i){this._elementRef=e,this._document=i}initialize(e){this.getNativeElement().focus(),this.setValue(e)}getNativeElement(){return this._elementRef.nativeElement}setValue(e){this.getNativeElement().textContent=e,this._moveCursorToEndOfInput()}getValue(){return this.getNativeElement().textContent||""}_moveCursorToEndOfInput(){const e=this._document.createRange();e.selectNodeContents(this.getNativeElement()),e.collapse(!1);const i=window.getSelection();i.removeAllRanges(),i.addRange(e)}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(Yn))};static#t=this.\u0275dir=He({type:t,selectors:[["span","matChipEditInput",""]],hostAttrs:["role","textbox","tabindex","-1","contenteditable","true",1,"mat-chip-edit-input"],standalone:!0})}return t})(),IE=(()=>{class t extends x0{constructor(e,i,s,r,o,a,l,c){super(e,i,s,r,o,a,l),this.basicChipAttrName="mat-basic-chip-row",this._editStartPending=!1,this.editable=!1,this.edited=new Ae,this._isEditing=!1,this.role="row",this._onBlur.pipe(Ni(this.destroyed)).subscribe(()=>{this._isEditing&&!this._editStartPending&&this._onEditFinish()})}_hasTrailingIcon(){return!this._isEditing&&super._hasTrailingIcon()}_handleFocus(){!this._isEditing&&!this.disabled&&this.focus()}_handleKeydown(e){13!==e.keyCode||this.disabled?this._isEditing?e.stopPropagation():super._handleKeydown(e):this._isEditing?(e.preventDefault(),this._onEditFinish()):this.editable&&this._startEditing(e)}_handleDoubleclick(e){!this.disabled&&this.editable&&this._startEditing(e)}_startEditing(e){if(!this.primaryAction||this.removeIcon&&this._getSourceAction(e.target)===this.removeIcon)return;const i=this.value;this._isEditing=this._editStartPending=!0,pl(()=>{this._getEditInput().initialize(i),this._editStartPending=!1},{injector:this._injector})}_onEditFinish(){this._isEditing=this._editStartPending=!1,this.edited.emit({chip:this,value:this._getEditInput().getValue()}),(this._document.activeElement===this._getEditInput().getNativeElement()||this._document.activeElement===this._document.body)&&this.primaryAction.focus()}_isRippleDisabled(){return super._isRippleDisabled()||this._isEditing}_getEditInput(){return this.contentEditInput||this.defaultEditInput}static#e=this.\u0275fac=function(i){return new(i||t)(I(wi),I(vt),I(Lt),I(pc),I(Yn),I(ua,8),I(gE,8),sc("tabindex"))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-chip-row"],["","mat-chip-row",""],["mat-basic-chip-row"],["","mat-basic-chip-row",""]],contentQueries:function(i,s,r){if(1&i&&Bi(r,tO,5),2&i){let o;nt(o=it())&&(s.contentEditInput=o.first)}},viewQuery:function(i,s){if(1&i&&Gt(tO,5),2&i){let r;nt(r=it())&&(s.defaultEditInput=r.first)}},hostAttrs:[1,"mat-mdc-chip","mat-mdc-chip-row","mdc-evolution-chip"],hostVars:27,hostBindings:function(i,s){1&i&&P("focus",function(o){return s._handleFocus(o)})("dblclick",function(o){return s._handleDoubleclick(o)}),2&i&&(fl("id",s.id),wt("tabindex",s.disabled?null:-1)("aria-label",null)("aria-description",null)("role",s.role),Oe("mat-mdc-chip-with-avatar",s.leadingIcon)("mat-mdc-chip-disabled",s.disabled)("mat-mdc-chip-editing",s._isEditing)("mat-mdc-chip-editable",s.editable)("mdc-evolution-chip--disabled",s.disabled)("mdc-evolution-chip--with-trailing-action",s._hasTrailingIcon())("mdc-evolution-chip--with-primary-graphic",s.leadingIcon)("mdc-evolution-chip--with-primary-icon",s.leadingIcon)("mdc-evolution-chip--with-avatar",s.leadingIcon)("mat-mdc-chip-highlighted",s.highlighted)("mat-mdc-chip-with-trailing-icon",s._hasTrailingIcon()))},inputs:{editable:"editable"},outputs:{edited:"edited"},standalone:!0,features:[bt([{provide:x0,useExisting:t},{provide:JN,useExisting:t}]),Ze,Ln],ngContentSelectors:KWe,decls:10,vars:9,consts:[[1,"mat-mdc-chip-focus-overlay"],["role","gridcell","matChipAction","",1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary",3,"disabled"],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label"],["aria-hidden","true",1,"mat-mdc-chip-primary-focus-indicator","mat-mdc-focus-indicator"],["role","gridcell",1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"],[1,"cdk-visually-hidden",3,"id"],["matChipEditInput",""]],template:function(i,s){1&i&&(Si(qWe),O(0,XWe,1,0,"span",0),m(1,"span",1),O(2,YWe,2,0,"span",2),m(3,"span",3),O(4,JWe,2,1)(5,eqe,1,0),q(6,"span",4),_()(),O(7,tqe,2,0,"span",5),m(8,"span",6),S(9),_()),2&i&&(Bn(s._isEditing?-1:0),b(),C("disabled",s.disabled),wt("aria-label",s.ariaLabel)("aria-describedby",s._ariaDescriptionId),b(),Bn(s.leadingIcon?2:-1),b(2),Bn(s._isEditing?4:5),b(3),Bn(s._hasTrailingIcon()?7:-1),b(),C("id",s._ariaDescriptionId),b(),Ye(s.ariaDescription))},dependencies:[S0,tO],styles:['.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{flex-basis:100%;overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}.mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit;overflow-x:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-outline-width);border-radius:var(--mdc-chip-container-shape-radius);box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1;border-style:solid}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-outline-color, var(--mat-app-outline))}.mdc-evolution-chip__action--primary:not(.mdc-evolution-chip__action--presentational):not(.mdc-ripple-upgraded):focus::before{border-color:var(--mdc-chip-focus-outline-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-disabled-outline-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-basic-chip .mdc-evolution-chip__action--primary{font:inherit}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip__action--trailing{position:relative;overflow:visible}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-trailing-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-color, var(--mat-app-on-surface))}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip__text-label{-webkit-user-select:none;user-select:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__text-label{font-family:var(--mdc-chip-label-text-font, var(--mat-app-label-large-font));line-height:var(--mdc-chip-label-text-line-height, var(--mat-app-label-large-line-height));font-size:var(--mdc-chip-label-text-size, var(--mat-app-label-large-size));font-weight:var(--mdc-chip-label-text-weight, var(--mat-app-label-large-weight));letter-spacing:var(--mdc-chip-label-text-tracking, var(--mat-app-label-large-tracking))}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-label-text-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-selected-label-text-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label,.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color)}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{width:var(--mdc-chip-with-avatar-avatar-size);height:var(--mdc-chip-with-avatar-avatar-size);font-size:var(--mdc-chip-with-avatar-avatar-size)}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%;height:20px;width:20px}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-disabled-icon-color, var(--mat-app-on-surface))}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.cdk-high-contrast-active .mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove{opacity:calc(var(--mat-chip-trailing-action-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove:focus{opacity:calc(var(--mat-chip-trailing-action-focus-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mat-mdc-standard-chip{border-radius:var(--mdc-chip-container-shape-radius);height:var(--mdc-chip-container-height)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-selected-container-color, var(--mat-app-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-flat-disabled-selected-container-color)}.cdk-high-contrast-active .mat-mdc-standard-chip{outline:solid 1px}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mdc-chip-with-avatar-avatar-shape-radius);width:var(--mdc-chip-with-icon-icon-size);height:var(--mdc-chip-with-icon-icon-size);font-size:var(--mdc-chip-with-icon-icon-size)}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-disabled-icon-color, var(--mat-app-on-surface))}.mat-mdc-chip-highlighted{--mdc-chip-with-icon-icon-color:var(--mdc-chip-with-icon-selected-icon-color, var(--mat-app-on-secondary-container));--mdc-chip-elevated-container-color:var(--mdc-chip-elevated-selected-container-color, var(--mat-app-secondary-container));--mdc-chip-label-text-color:var(--mdc-chip-selected-label-text-color, var(--mat-app-on-secondary-container));--mdc-chip-outline-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-chip-selected .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color, var(--mat-app-on-secondary-container))}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-hover-state-layer-color, var(--mat-app-on-surface-variant));opacity:var(--mdc-chip-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip-focus-overlay .mat-mdc-chip-selected:hover,.mat-mdc-chip-highlighted:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-hover-state-layer-color, var(--mat-app-on-secondary-container));opacity:var(--mdc-chip-selected-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color, var(--mat-app-on-surface-variant));opacity:var(--mdc-chip-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-chip-selected.cdk-focused .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color, var(--mat-app-on-secondary-container));opacity:var(--mdc-chip-selected-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mdc-evolution-chip--disabled:not(.mdc-evolution-chip--selected) .mat-mdc-chip-avatar{opacity:var(--mdc-chip-with-avatar-disabled-avatar-opacity)}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{opacity:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity)}.mdc-evolution-chip--disabled.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{opacity:var(--mdc-chip-with-icon-disabled-icon-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:var(--mat-chip-disabled-container-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-trailing-icon-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-disabled-trailing-icon-color, var(--mat-app-on-surface))}.mat-mdc-chip-remove{opacity:var(--mat-chip-trailing-action-opacity)}.mat-mdc-chip-remove:focus{opacity:var(--mat-chip-trailing-action-focus-opacity)}.mat-mdc-chip-remove::after{background:var(--mat-chip-trailing-action-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-chip-remove:hover::after{opacity:var(--mat-chip-trailing-action-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip-remove:focus::after{opacity:var(--mat-chip-trailing-action-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-chip-selected .mat-mdc-chip-remove::after,.mat-mdc-chip-highlighted .mat-mdc-chip-remove::after{background:var(--mat-chip-selected-trailing-action-state-layer-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mat-mdc-chip-action-label{overflow:visible}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip .mat-ripple.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative;z-index:0}.mat-mdc-chip-action-label{text-align:left;z-index:1}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-chip-remove::before{margin:calc(var(--mat-mdc-focus-indicator-border-width, 3px)*-1);left:8px;right:8px}.mat-mdc-chip-remove::after{content:"";display:block;opacity:0;position:absolute;top:-2px;bottom:-2px;left:6px;right:6px;border-radius:50%}.mat-mdc-chip-remove .mat-icon{width:18px;height:18px;font-size:18px;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}.cdk-high-contrast-active .mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}.mat-mdc-chip-action:focus .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return t})(),LV=(()=>{class t{get chipFocusChanges(){return this._getChipStream(e=>e._onFocus)}get chipDestroyedChanges(){return this._getChipStream(e=>e.destroyed)}get chipRemovedChanges(){return this._getChipStream(e=>e.removed)}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._syncChipsState()}get empty(){return!this._chips||0===this._chips.length}get role(){return this._explicitRole?this._explicitRole:this.empty?null:this._defaultRole}set role(e){this._explicitRole=e}get focused(){return this._hasFocusedChip()}constructor(e,i,s){this._elementRef=e,this._changeDetectorRef=i,this._dir=s,this._lastDestroyedFocusedChipIndex=null,this._destroyed=new ot,this._defaultRole="presentation",this._disabled=!1,this.tabIndex=0,this._explicitRole=null,this._chipActions=new vm}ngAfterViewInit(){this._setUpFocusManagement(),this._trackChipSetChanges(),this._trackDestroyedFocusedChip()}ngOnDestroy(){this._keyManager?.destroy(),this._chipActions.destroy(),this._destroyed.next(),this._destroyed.complete()}_hasFocusedChip(){return this._chips&&this._chips.some(e=>e._hasFocus())}_syncChipsState(){this._chips&&this._chips.forEach(e=>{e.disabled=this._disabled,e._changeDetectorRef.markForCheck()})}focus(){}_handleKeydown(e){this._originatesFromChip(e)&&this._keyManager.onKeydown(e)}_isValidIndex(e){return e>=0&&e<this._chips.length}_allowFocusEscape(){if(-1!==this.tabIndex){const e=this.tabIndex;this.tabIndex=-1,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.tabIndex=e,this._changeDetectorRef.markForCheck()})}}_getChipStream(e){return this._chips.changes.pipe(Uo(null),Kt(()=>sr(...this._chips.map(e))))}_originatesFromChip(e){let i=e.target;for(;i&&i!==this._elementRef.nativeElement;){if(i.classList.contains("mat-mdc-chip"))return!0;i=i.parentElement}return!1}_setUpFocusManagement(){this._chips.changes.pipe(Uo(this._chips)).subscribe(e=>{const i=[];e.forEach(s=>s._getActions().forEach(r=>i.push(r))),this._chipActions.reset(i),this._chipActions.notifyOnChanges()}),this._keyManager=new ble(this._chipActions).withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr").withHomeAndEnd().skipPredicate(e=>this._skipPredicate(e)),this.chipFocusChanges.pipe(Ni(this._destroyed)).subscribe(({chip:e})=>{const i=e._getSourceAction(document.activeElement);i&&this._keyManager.updateActiveItem(i)}),this._dir?.change.pipe(Ni(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e))}_skipPredicate(e){return!e.isInteractive||e.disabled}_trackChipSetChanges(){this._chips.changes.pipe(Uo(null),Ni(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>this._syncChipsState()),this._redirectDestroyedChipFocus()})}_trackDestroyedFocusedChip(){this.chipDestroyedChanges.pipe(Ni(this._destroyed)).subscribe(e=>{const s=this._chips.toArray().indexOf(e.chip);this._isValidIndex(s)&&e.chip._hasFocus()&&(this._lastDestroyedFocusedChipIndex=s)})}_redirectDestroyedChipFocus(){if(null!=this._lastDestroyedFocusedChipIndex){if(this._chips.length){const e=Math.min(this._lastDestroyedFocusedChipIndex,this._chips.length-1),i=this._chips.toArray()[e];i.disabled?1===this._chips.length?this.focus():this._keyManager.setPreviousItemActive():i.focus()}else this.focus();this._lastDestroyedFocusedChipIndex=null}}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(wi),I(jo,8))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-chip-set"]],contentQueries:function(i,s,r){if(1&i&&Bi(r,x0,5),2&i){let o;nt(o=it())&&(s._chips=o)}},hostAttrs:[1,"mat-mdc-chip-set","mdc-evolution-chip-set"],hostVars:1,hostBindings:function(i,s){1&i&&P("keydown",function(o){return s._handleKeydown(o)}),2&i&&wt("role",s.role)},inputs:{disabled:[2,"disabled","disabled",ft],role:"role",tabIndex:[2,"tabIndex","tabIndex",e=>null==e?0:Xr(e)]},standalone:!0,features:[Li,Ln],ngContentSelectors:NV,decls:2,vars:0,consts:[["role","presentation",1,"mdc-evolution-chip-set__chips"]],template:function(i,s){1&i&&(Si(),m(0,"div",0),en(1),_())},styles:[".mat-mdc-chip-set{display:flex}.mat-mdc-chip-set:focus{outline:none}.mat-mdc-chip-set .mdc-evolution-chip-set__chips{min-width:100%;margin-left:-8px;margin-right:0}.mat-mdc-chip-set .mdc-evolution-chip{margin:4px 0 4px 8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip-set__chips{margin-left:0;margin-right:-8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip{margin-left:0;margin-right:8px}.mdc-evolution-chip-set__chips{display:flex;flex-flow:wrap;min-width:0}.mat-mdc-chip-set-stacked{flex-direction:column;align-items:flex-start}.mat-mdc-chip-set-stacked .mat-mdc-chip{width:100%}.mat-mdc-chip-set-stacked .mdc-evolution-chip__graphic{flex-grow:0}.mat-mdc-chip-set-stacked .mdc-evolution-chip__action--primary{flex-basis:100%;justify-content:start}input.mat-mdc-chip-input{flex:1 0 150px;margin-left:8px}[dir=rtl] input.mat-mdc-chip-input{margin-left:0;margin-right:8px}"],encapsulation:2,changeDetection:0})}return t})();class aqe{constructor(n,e){this.source=n,this.value=e}}let nO=(()=>{class t extends LV{get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=e,this._syncChipsState()}get id(){return this._chipInput.id}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this._chips||0===this._chips.length)}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get focused(){return this._chipInput.focused||this._hasFocusedChip()}get required(){return this._required??this.ngControl?.control?.hasValidator(Zr.required)??!1}set required(e){this._required=e,this.stateChanges.next()}get shouldLabelFloat(){return!this.empty||this.focused}get value(){return this._value}set value(e){this._value=e}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}get chipBlurChanges(){return this._getChipStream(e=>e._onBlur)}get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}constructor(e,i,s,r,o,a,l){super(e,i,s),this.ngControl=l,this.controlType="mat-chip-grid",this._defaultRole="grid",this._ariaDescribedbyIds=[],this._onTouched=()=>{},this._onChange=()=>{},this._value=[],this.change=new Ae,this.valueChange=new Ae,this._chips=void 0,this.stateChanges=new ot,this.ngControl&&(this.ngControl.valueAccessor=this),this._errorStateTracker=new DN(a,l,o,r,this.stateChanges)}ngAfterContentInit(){this.chipBlurChanges.pipe(Ni(this._destroyed)).subscribe(()=>{this._blur(),this.stateChanges.next()}),sr(this.chipFocusChanges,this._chips.changes).pipe(Ni(this._destroyed)).subscribe(()=>this.stateChanges.next())}ngAfterViewInit(){super.ngAfterViewInit()}ngDoCheck(){this.ngControl&&this.updateErrorState()}ngOnDestroy(){super.ngOnDestroy(),this.stateChanges.complete()}registerInput(e){this._chipInput=e,this._chipInput.setDescribedByIds(this._ariaDescribedbyIds)}onContainerClick(e){!this.disabled&&!this._originatesFromChip(e)&&this.focus()}focus(){this.disabled||this._chipInput.focused||(!this._chips.length||this._chips.first.disabled?Promise.resolve().then(()=>this._chipInput.focus()):this._chips.length&&0!==this._keyManager.activeItemIndex&&this._keyManager.setFirstItemActive(),this.stateChanges.next())}setDescribedByIds(e){this._ariaDescribedbyIds=e,this._chipInput?.setDescribedByIds(e)}writeValue(e){this._value=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this.stateChanges.next()}updateErrorState(){this._errorStateTracker.updateErrorState()}_blur(){this.disabled||setTimeout(()=>{this.focused||(this._propagateChanges(),this._markAsTouched())})}_allowFocusEscape(){this._chipInput.focused||super._allowFocusEscape()}_handleKeydown(e){const i=e.keyCode,s=this._keyManager.activeItem;if(9===i)this._chipInput.focused&&Da(e,"shiftKey")&&this._chips.length&&!this._chips.last.disabled?(e.preventDefault(),s?this._keyManager.setActiveItem(s):this._focusLastChip()):super._allowFocusEscape();else if(!this._chipInput.focused)if(38!==i&&40!==i||!s)super._handleKeydown(e);else{const r=this._chipActions.filter(l=>l._isPrimary===s._isPrimary&&!this._skipPredicate(l)),o=r.indexOf(s),a=38===e.keyCode?-1:1;e.preventDefault(),o>-1&&this._isValidIndex(o+a)&&this._keyManager.setActiveItem(r[o+a])}this.stateChanges.next()}_focusLastChip(){this._chips.length&&this._chips.last.focus()}_propagateChanges(){const e=this._chips.length?this._chips.toArray().map(i=>i.value):[];this._value=e,this.change.emit(new aqe(this,e)),this.valueChange.emit(e),this._onChange(e),this._changeDetectorRef.markForCheck()}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(wi),I(jo,8),I(Z1,8),I(pa,8),I(AN),I(lc,10))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-chip-grid"]],contentQueries:function(i,s,r){if(1&i&&Bi(r,IE,5),2&i){let o;nt(o=it())&&(s._chips=o)}},hostAttrs:[1,"mat-mdc-chip-set","mat-mdc-chip-grid","mdc-evolution-chip-set"],hostVars:10,hostBindings:function(i,s){1&i&&P("focus",function(){return s.focus()})("blur",function(){return s._blur()}),2&i&&(wt("role",s.role)("tabindex",s.disabled||s._chips&&0===s._chips.length?-1:s.tabIndex)("aria-disabled",s.disabled.toString())("aria-invalid",s.errorState),Oe("mat-mdc-chip-list-disabled",s.disabled)("mat-mdc-chip-list-invalid",s.errorState)("mat-mdc-chip-list-required",s.required))},inputs:{disabled:[2,"disabled","disabled",ft],placeholder:"placeholder",required:[2,"required","required",ft],value:"value",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},standalone:!0,features:[bt([{provide:HN,useExisting:t}]),Li,Ze,Ln],ngContentSelectors:NV,decls:2,vars:0,consts:[["role","presentation",1,"mdc-evolution-chip-set__chips"]],template:function(i,s){1&i&&(Si(),m(0,"div",0),en(1),_())},styles:[".mat-mdc-chip-set{display:flex}.mat-mdc-chip-set:focus{outline:none}.mat-mdc-chip-set .mdc-evolution-chip-set__chips{min-width:100%;margin-left:-8px;margin-right:0}.mat-mdc-chip-set .mdc-evolution-chip{margin:4px 0 4px 8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip-set__chips{margin-left:0;margin-right:-8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip{margin-left:0;margin-right:8px}.mdc-evolution-chip-set__chips{display:flex;flex-flow:wrap;min-width:0}.mat-mdc-chip-set-stacked{flex-direction:column;align-items:flex-start}.mat-mdc-chip-set-stacked .mat-mdc-chip{width:100%}.mat-mdc-chip-set-stacked .mdc-evolution-chip__graphic{flex-grow:0}.mat-mdc-chip-set-stacked .mdc-evolution-chip__action--primary{flex-basis:100%;justify-content:start}input.mat-mdc-chip-input{flex:1 0 150px;margin-left:8px}[dir=rtl] input.mat-mdc-chip-input{margin-left:0;margin-right:8px}"],encapsulation:2,changeDetection:0})}return t})(),lqe=0,iO=(()=>{class t{get chipGrid(){return this._chipGrid}set chipGrid(e){e&&(this._chipGrid=e,this._chipGrid.registerInput(this))}get disabled(){return this._disabled||this._chipGrid&&this._chipGrid.disabled}set disabled(e){this._disabled=e}get empty(){return!this.inputElement.value}constructor(e,i,s){this._elementRef=e,this.focused=!1,this.addOnBlur=!1,this.chipEnd=new Ae,this.placeholder="",this.id="mat-mdc-chip-list-input-"+lqe++,this._disabled=!1,this.inputElement=this._elementRef.nativeElement,this.separatorKeyCodes=i.separatorKeyCodes,s&&this.inputElement.classList.add("mat-mdc-form-field-input-control")}ngOnChanges(){this._chipGrid.stateChanges.next()}ngOnDestroy(){this.chipEnd.complete()}_keydown(e){this.empty&&8===e.keyCode?(e.repeat||this._chipGrid._focusLastChip(),e.preventDefault()):this._emitChipEnd(e)}_blur(){this.addOnBlur&&this._emitChipEnd(),this.focused=!1,this._chipGrid.focused||this._chipGrid._blur(),this._chipGrid.stateChanges.next()}_focus(){this.focused=!0,this._chipGrid.stateChanges.next()}_emitChipEnd(e){(!e||this._isSeparatorKey(e))&&(this.chipEnd.emit({input:this.inputElement,value:this.inputElement.value,chipInput:this}),e?.preventDefault())}_onInput(){this._chipGrid.stateChanges.next()}focus(){this.inputElement.focus()}clear(){this.inputElement.value=""}setDescribedByIds(e){const i=this._elementRef.nativeElement;e.length?i.setAttribute("aria-describedby",e.join(" ")):i.removeAttribute("aria-describedby")}_isSeparatorKey(e){return!Da(e)&&new Set(this.separatorKeyCodes).has(e.keyCode)}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(QN),I(v0,8))};static#t=this.\u0275dir=He({type:t,selectors:[["input","matChipInputFor",""]],hostAttrs:[1,"mat-mdc-chip-input","mat-mdc-input-element","mdc-text-field__input","mat-input-element"],hostVars:6,hostBindings:function(i,s){1&i&&P("keydown",function(o){return s._keydown(o)})("blur",function(){return s._blur()})("focus",function(){return s._focus()})("input",function(){return s._onInput()}),2&i&&(fl("id",s.id),wt("disabled",s.disabled||null)("placeholder",s.placeholder||null)("aria-invalid",s._chipGrid&&s._chipGrid.ngControl?s._chipGrid.ngControl.invalid:null)("aria-required",s._chipGrid&&s._chipGrid.required||null)("required",s._chipGrid&&s._chipGrid.required||null))},inputs:{chipGrid:[0,"matChipInputFor","chipGrid"],addOnBlur:[2,"matChipInputAddOnBlur","addOnBlur",ft],separatorKeyCodes:[0,"matChipInputSeparatorKeyCodes","separatorKeyCodes"],placeholder:"placeholder",id:"id",disabled:[2,"disabled","disabled",ft]},outputs:{chipEnd:"matChipInputTokenEnd"},exportAs:["matChipInput","matChipInputFor"],standalone:!0,features:[Li,Rn]})}return t})(),PV=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:[AN,{provide:QN,useValue:{separatorKeyCodes:[13]}}],imports:[Yi,Jc,Yi]})}return t})();const cqe=["determinateSpinner"];function uqe(t,n){if(1&t&&(ka(),m(0,"svg",11),q(1,"circle",12),_()),2&t){const e=E();wt("viewBox",e._viewBox()),b(),Hn("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),wt("r",e._circleRadius())}}const dqe=new Ne("mat-progress-spinner-default-options",{providedIn:"root",factory:function hqe(){return{diameter:gue}}}),gue=100;let Zs=(()=>{class t{get color(){return this._color||this._defaultColor}set color(e){this._color=e}constructor(e,i,s){this._elementRef=e,this._defaultColor="primary",this._value=0,this._diameter=gue,this._noopAnimations="NoopAnimations"===i&&!!s&&!s._forceAnimations,this.mode="mat-spinner"===e.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",s&&(s.color&&(this.color=this._defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const e=2*this._circleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(ua,8),I(dqe))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(i,s){if(1&i&&Gt(cqe,5),2&i){let r;nt(r=it())&&(s._determinateCircle=r.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(i,s){2&i&&(wt("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===s.mode?s.value:null)("mode",s.mode),$o("mat-"+s.color),Hn("width",s.diameter,"px")("height",s.diameter,"px")("--mdc-circular-progress-size",s.diameter+"px")("--mdc-circular-progress-active-indicator-width",s.diameter+"px"),Oe("_mat-animation-noopable",s._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===s.mode))},inputs:{color:"color",mode:"mode",value:[2,"value","value",Xr],diameter:[2,"diameter","diameter",Xr],strokeWidth:[2,"strokeWidth","strokeWidth",Xr]},exportAs:["matProgressSpinner"],standalone:!0,features:[Li,Ln],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(i,s){if(1&i&&(O(0,uqe,2,8,"ng-template",null,0,ln),m(2,"div",2,1),ka(),m(4,"svg",3),q(5,"circle",4),_()(),bm(),m(6,"div",5)(7,"div",6)(8,"div",7),Es(9,8),_(),m(10,"div",9),Es(11,8),_(),m(12,"div",10),Es(13,8),_()()()),2&i){const r=xt(1);b(4),wt("viewBox",s._viewBox()),b(),Hn("stroke-dasharray",s._strokeCircumference(),"px")("stroke-dashoffset",s._strokeDashOffset(),"px")("stroke-width",s._circleStrokeWidth(),"%"),wt("r",s._circleRadius()),b(4),C("ngTemplateOutlet",r),b(2),C("ngTemplateOutlet",r),b(2),C("ngTemplateOutlet",r)}},dependencies:[cb],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-app-primary))}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}return t})(),E0=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[Ka,Yi]})}return t})();class fqe{constructor(n,e){this._document=e;const i=this._textarea=this._document.createElement("textarea"),s=i.style;s.position="fixed",s.top=s.opacity="0",s.left="-999em",i.setAttribute("aria-hidden","true"),i.value=n,i.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(i)}copy(){const n=this._textarea;let e=!1;try{if(n){const i=this._document.activeElement;n.select(),n.setSelectionRange(0,n.value.length),e=this._document.execCommand("copy"),i&&i.focus()}}catch{}return e}destroy(){const n=this._textarea;n&&(n.remove(),this._textarea=void 0)}}let bue=(()=>{class t{constructor(e){this._document=e}copy(e){const i=this.beginCopy(e),s=i.copy();return i.destroy(),s}beginCopy(e){return new fqe(e,this._document)}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Yn))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$V=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({})}return t})();const mqe=["tooltip"],yue=new Ne("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{const t=xe(rr);return()=>t.scrollStrategies.reposition({scrollThrottle:20})}}),gqe={provide:yue,deps:[rr],useFactory:function _qe(t){return()=>t.scrollStrategies.reposition({scrollThrottle:20})}},vqe=new Ne("mat-tooltip-default-options",{providedIn:"root",factory:function bqe(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),wue="tooltip-panel",Cue=Hh({passive:!0});let nu=(()=>{class t{get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(e){this._positionAtOrigin=p0(e),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(e){const i=p0(e);this._disabled!==i&&(this._disabled=i,i?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=qm(e)}get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=qm(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(e){const i=this._message;this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(i)}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(e,i,s,r,o,a,l,c,u,d,h,p){this._overlay=e,this._elementRef=i,this._scrollDispatcher=s,this._viewContainerRef=r,this._ngZone=o,this._platform=a,this._ariaDescriber=l,this._focusMonitor=c,this._dir=d,this._defaultOptions=h,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._tooltipComponent=xqe,this._viewportMargin=8,this._cssClassPrefix="mat-mdc",this.touchGestures="auto",this._message="",this._passiveListeners=[],this._touchstartTimeout=null,this._destroyed=new ot,this._injector=xe(ci),this._scrollStrategy=u,this._document=p,h&&(this._showDelay=h.showDelay,this._hideDelay=h.hideDelay,h.position&&(this.position=h.position),h.positionAtOrigin&&(this.positionAtOrigin=h.positionAtOrigin),h.touchGestures&&(this.touchGestures=h.touchGestures),h.tooltipClass&&(this.tooltipClass=h.tooltipClass)),d.change.pipe(Ni(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),this._viewportMargin=8}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Ni(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const e=this._elementRef.nativeElement;this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([i,s])=>{e.removeEventListener(i,s,Cue)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay,i){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const s=this._createOverlay(i);this._detach(),this._portal=this._portal||new Ab(this._tooltipComponent,this._viewContainerRef);const r=this._tooltipInstance=s.attach(this._portal).instance;r._triggerElement=this._elementRef.nativeElement,r._mouseLeaveHideDelay=this._hideDelay,r.afterHidden().pipe(Ni(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),r.show(e)}hide(e=this.hideDelay){const i=this._tooltipInstance;i&&(i.isVisible()?i.hide(e):(i._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){const r=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!e)&&r._origin instanceof vt)return this._overlayRef;this._detach()}const i=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),s=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin&&e||this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i);return s.positionChanges.pipe(Ni(this._destroyed)).subscribe(r=>{this._updateCurrentPositionClass(r.connectionPair),this._tooltipInstance&&r.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:s,panelClass:`${this._cssClassPrefix}-${wue}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Ni(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Ni(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(Ni(this._destroyed)).subscribe(r=>{this._isTooltipVisible()&&27===r.keyCode&&!Da(r)&&(r.preventDefault(),r.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){const i=e.getConfig().positionStrategy,s=this._getOrigin(),r=this._getOverlayPosition();i.withPositions([this._addOffset({...s.main,...r.main}),this._addOffset({...s.fallback,...r.fallback})])}_addOffset(e){const s=!this._dir||"ltr"==this._dir.value;return"top"===e.originY?e.offsetY=-8:"bottom"===e.originY?e.offsetY=8:"start"===e.originX?e.offsetX=s?-8:8:"end"===e.originX&&(e.offsetX=s?8:-8),e}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,i=this.position;let s;"above"==i||"below"==i?s={originX:"center",originY:"above"==i?"top":"bottom"}:"before"==i||"left"==i&&e||"right"==i&&!e?s={originX:"start",originY:"center"}:("after"==i||"right"==i&&e||"left"==i&&!e)&&(s={originX:"end",originY:"center"});const{x:r,y:o}=this._invertPosition(s.originX,s.originY);return{main:s,fallback:{originX:r,originY:o}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,i=this.position;let s;"above"==i?s={overlayX:"center",overlayY:"bottom"}:"below"==i?s={overlayX:"center",overlayY:"top"}:"before"==i||"left"==i&&e||"right"==i&&!e?s={overlayX:"end",overlayY:"center"}:("after"==i||"right"==i&&e||"left"==i&&!e)&&(s={overlayX:"start",overlayY:"center"});const{x:r,y:o}=this._invertPosition(s.overlayX,s.overlayY);return{main:s,fallback:{overlayX:r,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),pl(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,i){return"above"===this.position||"below"===this.position?"top"===i?i="bottom":"bottom"===i&&(i="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:i}}_updateCurrentPositionClass(e){const{overlayY:i,originX:s,originY:r}=e;let o;if(o="center"===i?this._dir&&"rtl"===this._dir.value?"end"===s?"left":"right":"start"===s?"left":"right":"bottom"===i&&"top"===r?"above":"below",o!==this._currentPosition){const a=this._overlayRef;if(a){const l=`${this._cssClassPrefix}-${wue}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{let i;this._setupPointerExitEventsIfNeeded(),void 0!==e.x&&void 0!==e.y&&(i=e),this.show(void 0,i)}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{const i=e.targetTouches?.[0],s=i?{x:i.clientX,y:i.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>{this._touchstartTimeout=null,this.show(void 0,s)},this._defaultOptions.touchLongPressShowDelay??500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",i=>{const s=i.relatedTarget;(!s||!this._overlayRef?.overlayElement.contains(s))&&this.hide()}],["wheel",i=>this._wheelListener(i)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const i=()=>{this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",i],["touchcancel",i])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([i,s])=>{this._elementRef.nativeElement.addEventListener(i,s,Cue)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){const i=this._document.elementFromPoint(e.clientX,e.clientY),s=this._elementRef.nativeElement;i!==s&&!s.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){const e=this.touchGestures;if("off"!==e){const i=this._elementRef.nativeElement,s=i.style;("on"===e||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName)&&(s.userSelect=s.msUserSelect=s.webkitUserSelect=s.MozUserSelect="none"),("on"===e||!i.draggable)&&(s.webkitUserDrag="none"),s.touchAction="none",s.webkitTapHighlightColor="transparent"}}_syncAriaDescription(e){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,e,"tooltip"),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}static#e=this.\u0275fac=function(i){return new(i||t)(I(rr),I(vt),I(vE),I(Kr),I(Lt),I(Ys),I(ple),I(pc),I(yue),I(jo),I(vqe,8),I(Yn))};static#t=this.\u0275dir=He({type:t,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(i,s){2&i&&Oe("mat-mdc-tooltip-disabled",s.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"],standalone:!0})}return t})(),xqe=(()=>{class t{constructor(e,i,s){this._changeDetectorRef=e,this._elementRef=i,this._isMultiline=!1,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new ot,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide",this._animationsDisabled="NoopAnimations"===s}show(e){null!=this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){null!=this._showTimeoutId&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){const e=this._elementRef.nativeElement.getBoundingClientRect();return e.height>24&&e.width>=200}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_cancelPendingAnimations(){null!=this._showTimeoutId&&clearTimeout(this._showTimeoutId),null!=this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){const i=this._tooltip.nativeElement,s=this._showAnimation,r=this._hideAnimation;if(i.classList.remove(e?r:s),i.classList.add(e?s:r),this._isVisible!==e&&(this._isVisible=e,this._changeDetectorRef.markForCheck()),e&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const o=getComputedStyle(i);("0s"===o.getPropertyValue("animation-duration")||"none"===o.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(i.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}static#e=this.\u0275fac=function(i){return new(i||t)(I(wi),I(vt),I(ua,8))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-tooltip-component"]],viewQuery:function(i,s){if(1&i&&Gt(mqe,7),2&i){let r;nt(r=it())&&(s._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostBindings:function(i,s){1&i&&P("mouseleave",function(o){return s._handleMouseLeave(o)})},standalone:!0,features:[Ln],decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(i,s){if(1&i){const r=se();m(0,"div",1,0),P("animationend",function(a){return B(r),V(s._handleAnimationEnd(a))}),m(2,"div",2),S(3),_()()}2&i&&(Oe("mdc-tooltip--multiline",s._isMultiline),C("ngClass",s.tooltipClass),b(3),Ye(s.message))},dependencies:[JA],styles:['.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mdc-plain-tooltip-container-color, var(--mat-app-inverse-surface));color:var(--mdc-plain-tooltip-supporting-text-color, var(--mat-app-inverse-on-surface));border-radius:var(--mdc-plain-tooltip-container-shape, var(--mat-app-corner-extra-small));font-family:var(--mdc-plain-tooltip-supporting-text-font, var(--mat-app-body-small-font));font-size:var(--mdc-plain-tooltip-supporting-text-size, var(--mat-app-body-small-size));font-weight:var(--mdc-plain-tooltip-supporting-text-weight, var(--mat-app-body-small-weight));line-height:var(--mdc-plain-tooltip-supporting-text-line-height, var(--mat-app-body-small-line-height));letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, var(--mat-app-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0})}return t})(),kE=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:[gqe],imports:[Y6,Ka,vf,Yi,Yi,Ob]})}return t})();function Eqe(t,n){if(1&t&&(m(0,"mat-option",17),S(1),_()),2&t){const e=n.$implicit;C("value",e),b(),K(" ",e," ")}}function Tqe(t,n){if(1&t){const e=se();m(0,"mat-form-field",14)(1,"mat-select",16,0),P("selectionChange",function(s){return B(e),V(E(2)._changePageSize(s.value))}),R1(3,Eqe,2,2,"mat-option",17,cte),_(),m(5,"div",18),P("click",function(){return B(e),V(xt(2).open())}),_()()}if(2&t){const e=E(2);C("appearance",e._formFieldAppearance)("color",e.color),b(),C("value",e.pageSize)("disabled",e.disabled)("aria-labelledby",e._pageSizeLabelId)("panelClass",e.selectConfig.panelClass||"")("disableOptionCentering",e.selectConfig.disableOptionCentering),b(2),F1(e._displayedPageSizeOptions)}}function Iqe(t,n){if(1&t&&(m(0,"div",15),S(1),_()),2&t){const e=E(2);b(),Ye(e.pageSize)}}function kqe(t,n){if(1&t&&(m(0,"div",3)(1,"div",13),S(2),_(),O(3,Tqe,6,7,"mat-form-field",14)(4,Iqe,2,1,"div",15),_()),2&t){const e=E();b(),wt("id",e._pageSizeLabelId),b(),K(" ",e._intl.itemsPerPageLabel," "),b(),Bn(e._displayedPageSizeOptions.length>1?3:-1),b(),Bn(e._displayedPageSizeOptions.length<=1?4:-1)}}function Dqe(t,n){if(1&t){const e=se();m(0,"button",19),P("click",function(){return B(e),V(E().firstPage())}),ka(),m(1,"svg",8),q(2,"path",20),_()()}if(2&t){const e=E();C("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),wt("aria-label",e._intl.firstPageLabel)}}function Aqe(t,n){if(1&t){const e=se();m(0,"button",21),P("click",function(){return B(e),V(E().lastPage())}),ka(),m(1,"svg",8),q(2,"path",22),_()()}if(2&t){const e=E();C("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),wt("aria-label",e._intl.lastPageLabel)}}let sO=(()=>{class t{constructor(){this.changes=new ot,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,i,s)=>{if(0==s||0==i)return`0 of ${s}`;const r=e*i;return`${r+1} \u2013 ${r<(s=Math.max(s,0))?Math.min(r+i,s):r+i} of ${s}`}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Nqe={provide:sO,deps:[[new Ih,new Xp,sO]],useFactory:function Mqe(t){return t||new sO}},Rqe=new Ne("MAT_PAGINATOR_DEFAULT_OPTIONS");let Fqe=0,BV=(()=>{class t{get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(e||0,0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=e||0,this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(e||0,0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(i=>Xr(i,0)),this._updateDisplayedPageSizeOptions()}constructor(e,i,s){if(this._intl=e,this._changeDetectorRef=i,this._pageSizeLabelId="mat-paginator-page-size-label-"+Fqe++,this._isInitialized=!1,this._initializedStream=new d0(1),this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this.hidePageSize=!1,this.showFirstLastButtons=!1,this.selectConfig={},this.disabled=!1,this.page=new Ae,this.initialized=this._initializedStream,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),s){const{pageSize:r,pageSizeOptions:o,hidePageSize:a,showFirstLastButtons:l}=s;null!=r&&(this._pageSize=r),null!=o&&(this._pageSizeOptions=o),null!=a&&(this.hidePageSize=a),null!=l&&(this.showFirstLastButtons=l)}this._formFieldAppearance=s?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const e=this.getNumberOfPages()-1;return this.pageIndex<e&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){const s=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/e)||0,this.pageSize=e,this._emitPageEvent(s)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,i)=>e-i),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}static#e=this.\u0275fac=function(i){return new(i||t)(I(sO),I(wi),I(Rqe,8))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[2,"pageIndex","pageIndex",Xr],length:[2,"length","length",Xr],pageSize:[2,"pageSize","pageSize",Xr],pageSizeOptions:"pageSizeOptions",hidePageSize:[2,"hidePageSize","hidePageSize",ft],showFirstLastButtons:[2,"showFirstLastButtons","showFirstLastButtons",ft],selectConfig:"selectConfig",disabled:[2,"disabled","disabled",ft]},outputs:{page:"page"},exportAs:["matPaginator"],standalone:!0,features:[Li,Ln],decls:14,vars:14,consts:[["selectRef",""],[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],[1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],[1,"mat-mdc-paginator-touch-target",3,"click"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(i,s){1&i&&(m(0,"div",1)(1,"div",2),O(2,kqe,5,4,"div",3),m(3,"div",4)(4,"div",5),S(5),_(),O(6,Dqe,3,5,"button",6),m(7,"button",7),P("click",function(){return s.previousPage()}),ka(),m(8,"svg",8),q(9,"path",9),_()(),bm(),m(10,"button",10),P("click",function(){return s.nextPage()}),ka(),m(11,"svg",8),q(12,"path",11),_()(),O(13,Aqe,3,5,"button",12),_()()()),2&i&&(b(2),Bn(s.hidePageSize?-1:2),b(3),K(" ",s._intl.getRangeLabel(s.pageIndex,s.pageSize,s.length)," "),b(),Bn(s.showFirstLastButtons?6:-1),b(),C("matTooltip",s._intl.previousPageLabel)("matTooltipDisabled",s._previousButtonsDisabled())("matTooltipPosition","above")("disabled",s._previousButtonsDisabled()),wt("aria-label",s._intl.previousPageLabel),b(3),C("matTooltip",s._intl.nextPageLabel)("matTooltipDisabled",s._nextButtonsDisabled())("matTooltipPosition","above")("disabled",s._nextButtonsDisabled()),wt("aria-label",s._intl.nextPageLabel),b(3),Bn(s.showFirstLastButtons?13:-1))},dependencies:[zs,ko,mr,iV,nu],styles:[".mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color, var(--mat-app-on-surface));background-color:var(--mat-paginator-container-background-color, var(--mat-app-surface));font-family:var(--mat-paginator-container-text-font, var(--mat-app-body-small-font));line-height:var(--mat-paginator-container-text-line-height, var(--mat-app-body-small-line-height));font-size:var(--mat-paginator-container-text-size, var(--mat-app-body-small-size));font-weight:var(--mat-paginator-container-text-weight, var(--mat-app-body-small-weight));letter-spacing:var(--mat-paginator-container-text-tracking, var(--mat-app-body-small-tracking));--mat-form-field-container-height:var(--mat-paginator-form-field-container-height);--mat-form-field-container-vertical-padding:var(--mat-paginator-form-field-container-vertical-padding)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size, var(--mat-app-body-small-size))}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color)}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}.mat-mdc-paginator-touch-target{display:var(--mat-paginator-touch-target-display);position:absolute;top:50%;left:50%;width:84px;height:48px;background-color:rgba(0,0,0,0);transform:translate(-50%, -50%);cursor:pointer}"],encapsulation:2,changeDetection:0})}return t})(),Sue=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:[Nqe],imports:[_0,$b,kE,BV]})}return t})(),Aue=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[yE]})}return t})();const Wqe=["input"],qqe=["label"],Kqe=["*"],Xqe=new Ne("mat-checkbox-default-options",{providedIn:"root",factory:Mue});function Mue(){return{color:"accent",clickAction:"check-indeterminate",disabledInteractive:!1}}var _l=function(t){return t[t.Init=0]="Init",t[t.Checked=1]="Checked",t[t.Unchecked=2]="Unchecked",t[t.Indeterminate=3]="Indeterminate",t}(_l||{});const Yqe={provide:Ki,useExisting:wn(()=>$l),multi:!0};class Zqe{}let Qqe=0;const Nue=Mue();let $l=(()=>{class t{focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(e){const i=new Zqe;return i.source=this,i.checked=e,i}_getAnimationTargetElement(){return this._inputElement?.nativeElement}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(e,i,s,r,o,a){this._elementRef=e,this._changeDetectorRef=i,this._ngZone=s,this._animationMode=o,this._options=a,this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"},this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new Ae,this.indeterminateChange=new Ae,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=_l.Init,this._controlValueAccessorChangeFn=()=>{},this._validatorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||Nue,this.color=this._options.color||Nue.color,this.tabIndex=parseInt(r)||0,this.id=this._uniqueId="mat-mdc-checkbox-"+ ++Qqe,this.disabledInteractive=a?.disabledInteractive??!1}ngOnChanges(e){e.required&&this._validatorChangeFn()}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(e){e!=this.checked&&(this._checked=e,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){e!==this.disabled&&(this._disabled=e,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(e){const i=e!=this._indeterminate;this._indeterminate=e,i&&(this._transitionCheckState(this._indeterminate?_l.Indeterminate:this.checked?_l.Checked:_l.Unchecked),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}validate(e){return this.required&&!0!==e.value?{required:!0}:null}registerOnValidatorChange(e){this._validatorChangeFn=e}_transitionCheckState(e){let i=this._currentCheckState,s=this._getAnimationTargetElement();if(i!==e&&s&&(this._currentAnimationClass&&s.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(i,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){s.classList.add(this._currentAnimationClass);const r=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{s.classList.remove(r)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const e=this._options?.clickAction;this.disabled||"noop"===e?(this.disabled&&this.disabledInteractive||!this.disabled&&"noop"===e)&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==e&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?_l.Checked:_l.Unchecked),this._emitChangeEvent())}_onInteractionEvent(e){e.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(e,i){if("NoopAnimations"===this._animationMode)return"";switch(e){case _l.Init:if(i===_l.Checked)return this._animationClasses.uncheckedToChecked;if(i==_l.Indeterminate)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case _l.Unchecked:return i===_l.Checked?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case _l.Checked:return i===_l.Unchecked?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case _l.Indeterminate:return i===_l.Checked?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(e){const i=this._inputElement;i&&(i.nativeElement.indeterminate=e)}_onInputClick(){this._handleInputClick()}_onTouchTargetClick(){this._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(e){e.target&&this._labelElement.nativeElement.contains(e.target)&&e.stopPropagation()}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(wi),I(Lt),sc("tabindex"),I(ua,8),I(Xqe,8))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-checkbox"]],viewQuery:function(i,s){if(1&i&&(Gt(Wqe,5),Gt(qqe,5),Gt(Tt,5)),2&i){let r;nt(r=it())&&(s._inputElement=r.first),nt(r=it())&&(s._labelElement=r.first),nt(r=it())&&(s.ripple=r.first)}},hostAttrs:[1,"mat-mdc-checkbox"],hostVars:16,hostBindings:function(i,s){2&i&&(fl("id",s.id),wt("tabindex",null)("aria-label",null)("aria-labelledby",null),$o(s.color?"mat-"+s.color:"mat-accent"),Oe("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mdc-checkbox--disabled",s.disabled)("mat-mdc-checkbox-disabled",s.disabled)("mat-mdc-checkbox-checked",s.checked)("mat-mdc-checkbox-disabled-interactive",s.disabledInteractive))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],id:"id",required:[2,"required","required",ft],labelPosition:"labelPosition",name:"name",value:"value",disableRipple:[2,"disableRipple","disableRipple",ft],tabIndex:[2,"tabIndex","tabIndex",e=>null==e?void 0:Xr(e)],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",ft],checked:[2,"checked","checked",ft],disabled:[2,"disabled","disabled",ft],indeterminate:[2,"indeterminate","indeterminate",ft]},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],standalone:!0,features:[bt([Yqe,{provide:To,useExisting:t,multi:!0}]),Li,Rn,Ln],ngContentSelectors:Kqe,decls:15,vars:20,consts:[["checkbox",""],["input",""],["label",""],["mat-internal-form-field","",3,"click","labelPosition"],[1,"mdc-checkbox"],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"blur","click","change","checked","indeterminate","disabled","id","required","tabIndex"],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"]],template:function(i,s){if(1&i){const r=se();Si(),m(0,"div",3),P("click",function(a){return B(r),V(s._preventBubblingFromLabel(a))}),m(1,"div",4,0)(3,"div",5),P("click",function(){return B(r),V(s._onTouchTargetClick())}),_(),m(4,"input",6,1),P("blur",function(){return B(r),V(s._onBlur())})("click",function(){return B(r),V(s._onInputClick())})("change",function(a){return B(r),V(s._onInteractionEvent(a))}),_(),q(6,"div",7),m(7,"div",8),ka(),m(8,"svg",9),q(9,"path",10),_(),bm(),q(10,"div",11),_(),q(11,"div",12),_(),m(12,"label",13,2),en(14),_()()}if(2&i){const r=xt(2);C("labelPosition",s.labelPosition),b(4),Oe("mdc-checkbox--selected",s.checked),C("checked",s.checked)("indeterminate",s.indeterminate)("disabled",s.disabled&&!s.disabledInteractive)("id",s.inputId)("required",s.required)("tabIndex",s.disabled&&!s.disabledInteractive?-1:s.tabIndex),wt("aria-label",s.ariaLabel||null)("aria-labelledby",s.ariaLabelledby)("aria-describedby",s.ariaDescribedby)("aria-checked",s.indeterminate?"mixed":null)("aria-disabled",!(!s.disabled||!s.disabledInteractive)||null)("name",s.name)("value",s.value),b(7),C("matRippleTrigger",r)("matRippleDisabled",s.disableRipple||s.disabled)("matRippleCentered",!0),b(),C("for",s.inputId)}},dependencies:[Tt,tV],styles:['.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom;padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox:hover .mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox:hover .mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox:active .mdc-checkbox__native-control~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:active .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity));background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-app-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity));background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-app-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control~.mdc-checkbox__ripple{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;width:var(--mdc-checkbox-state-layer-size, 40px);height:var(--mdc-checkbox-state-layer-size, 40px);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.cdk-high-contrast-active .mdc-checkbox--disabled{opacity:.5}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1);-webkit-print-color-adjust:exact;color-adjust:exact;border-color:var(--mdc-checkbox-unselected-icon-color, var(--mat-app-on-surface-variant));top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2)}.mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color, var(--mat-app-primary));background-color:var(--mdc-checkbox-selected-icon-color, var(--mat-app-primary))}.mdc-checkbox--disabled .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color)}.mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color);border-color:rgba(0,0,0,0)}.mdc-checkbox:hover .mdc-checkbox__native-control:not(:checked)~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mat-app-on-surface));background-color:rgba(0,0,0,0)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-app-primary));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-app-primary))}.mdc-checkbox__native-control:focus:focus:not(:checked)~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mat-app-on-surface))}.mdc-checkbox__native-control:focus:focus:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-app-primary));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-app-primary))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox:hover .mdc-checkbox__native-control~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color)}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color);border-color:rgba(0,0,0,0)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms cubic-bezier(0.4, 0, 0.6, 1);color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-app-on-primary))}.cdk-high-contrast-active .mdc-checkbox__checkmark{color:CanvasText}.mdc-checkbox--disabled .mdc-checkbox__checkmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-app-surface))}.cdk-high-contrast-active .mdc-checkbox--disabled .mdc-checkbox__checkmark,.cdk-high-contrast-active .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:CanvasText}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);border-color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-app-on-primary))}.cdk-high-contrast-active .mdc-checkbox__mixedmark{margin:0 1px}.mdc-checkbox--disabled .mdc-checkbox__mixedmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-app-surface))}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms cubic-bezier(0, 0, 0.2, 1),transform 180ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox._mat-animation-noopable .mdc-checkbox *,.mat-mdc-checkbox._mat-animation-noopable .mdc-checkbox *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox .mat-internal-form-field{color:var(--mat-checkbox-label-text-color, var(--mat-app-on-surface));font-family:var(--mat-checkbox-label-text-font, var(--mat-app-body-medium-font));line-height:var(--mat-checkbox-label-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mat-checkbox-label-text-size, var(--mat-app-body-medium-size));letter-spacing:var(--mat-checkbox-label-text-tracking, var(--mat-app-body-medium-tracking));font-weight:var(--mat-checkbox-label-text-weight, var(--mat-app-body-medium-weight))}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive{pointer-events:auto}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive input{cursor:default}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default;color:var(--mat-checkbox-disabled-label-color)}.mat-mdc-checkbox label:empty{display:none}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-checkbox-touch-target-display)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return t})(),I0=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[$l,Yi,Yi]})}return t})();const tKe=["input"],nKe=["formField"],iKe=["*"];let Oue=0;class Rue{constructor(n,e){this.source=n,this.value=e}}const sKe={provide:Ki,useExisting:wn(()=>k0),multi:!0},Fue=new Ne("MatRadioGroup"),rKe=new Ne("mat-radio-default-options",{providedIn:"root",factory:function oKe(){return{color:"accent",disabledInteractive:!1}}});let k0=(()=>{class t{get name(){return this._name}set name(e){this._name=e,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition="before"===e?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markRadiosForCheck()}get required(){return this._required}set required(e){this._required=e,this._markRadiosForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e,this._markRadiosForCheck()}constructor(e){this._changeDetector=e,this._value=null,this._name="mat-radio-group-"+Oue++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new Ae,this._disabledInteractive=!1}ngAfterContentInit(){this._isInitialized=!0,this._buttonChanges=this._radios.changes.subscribe(()=>{this.selected&&!this._radios.find(e=>e===this.selected)&&(this._selected=null)})}ngOnDestroy(){this._buttonChanges?.unsubscribe()}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(e=>{e.name=this.name,e._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(i=>{i.checked=this.value===i.value,i.checked&&(this._selected=i)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new Rue(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(e=>e._markForCheck())}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetector.markForCheck()}static#e=this.\u0275fac=function(i){return new(i||t)(I(wi))};static#t=this.\u0275dir=He({type:t,selectors:[["mat-radio-group"]],contentQueries:function(i,s,r){if(1&i&&Bi(r,Ub,5),2&i){let o;nt(o=it())&&(s._radios=o)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:[2,"disabled","disabled",ft],required:[2,"required","required",ft],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ft]},outputs:{change:"change"},exportAs:["matRadioGroup"],standalone:!0,features:[bt([sKe,{provide:Fue,useExisting:t}]),Li]})}return t})(),Ub=(()=>{class t{get checked(){return this._checked}set checked(e){this._checked!==e&&(this._checked=e,e&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!e&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),e&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(e){this._labelPosition=e}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(e){this._setDisabled(e)}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(e){this._required=e}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._defaultOptions&&this._defaultOptions.color||"accent"}set color(e){this._color=e}get disabledInteractive(){return this._disabledInteractive||null!==this.radioGroup&&this.radioGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(e,i,s,r,o,a,l,c){this._elementRef=i,this._changeDetector=s,this._focusMonitor=r,this._radioDispatcher=o,this._defaultOptions=l,this._ngZone=xe(Lt),this._uniqueId="mat-radio-"+ ++Oue,this.id=this._uniqueId,this.disableRipple=!1,this.tabIndex=0,this.change=new Ae,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this._injector=xe(ci),this._onInputClick=u=>{this.disabled&&this.disabledInteractive&&u.preventDefault()},this.radioGroup=e,this._noopAnimations="NoopAnimations"===a,this._disabledInteractive=l?.disabledInteractive??!1,c&&(this.tabIndex=Xr(c,0))}focus(e,i){i?this._focusMonitor.focusVia(this._inputElement,i,e):this._inputElement.nativeElement.focus(e)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((e,i)=>{e!==this.id&&i===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{!e&&this.radioGroup&&this.radioGroup._touch()}),this._ngZone.runOutsideAngular(()=>{this._inputElement.nativeElement.addEventListener("click",this._onInputClick)})}ngOnDestroy(){this._inputElement?.nativeElement.removeEventListener("click",this._onInputClick),this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new Rue(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputInteraction(e){if(e.stopPropagation(),!this.checked&&!this.disabled){const i=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),i&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(e){this._onInputInteraction(e),(!this.disabled||this.disabledInteractive)&&this._inputElement?.nativeElement.focus()}_setDisabled(e){this._disabled!==e&&(this._disabled=e,this._changeDetector.markForCheck())}_updateTabIndex(){const e=this.radioGroup;let i;if(i=e&&e.selected&&!this.disabled?e.selected===this?this.tabIndex:-1:this.tabIndex,i!==this._previousTabIndex){const s=this._inputElement?.nativeElement;s&&(s.setAttribute("tabindex",i+""),this._previousTabIndex=i,pl(()=>{queueMicrotask(()=>{e&&e.selected&&e.selected!==this&&document.activeElement===s&&(e.selected?._inputElement.nativeElement.focus(),document.activeElement===s&&this._inputElement.nativeElement.blur())})},{injector:this._injector}))}}static#e=this.\u0275fac=function(i){return new(i||t)(I(Fue,8),I(vt),I(wi),I(pc),I(LGe),I(ua,8),I(rKe,8),sc("tabindex"))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-radio-button"]],viewQuery:function(i,s){if(1&i&&(Gt(tKe,5),Gt(nKe,7,vt)),2&i){let r;nt(r=it())&&(s._inputElement=r.first),nt(r=it())&&(s._rippleTrigger=r.first)}},hostAttrs:[1,"mat-mdc-radio-button"],hostVars:19,hostBindings:function(i,s){1&i&&P("focus",function(){return s._inputElement.nativeElement.focus()}),2&i&&(wt("id",s.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),Oe("mat-primary","primary"===s.color)("mat-accent","accent"===s.color)("mat-warn","warn"===s.color)("mat-mdc-radio-checked",s.checked)("mat-mdc-radio-disabled",s.disabled)("mat-mdc-radio-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable",s._noopAnimations))},inputs:{id:"id",name:"name",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],disableRipple:[2,"disableRipple","disableRipple",ft],tabIndex:[2,"tabIndex","tabIndex",e=>null==e?0:Xr(e)],checked:[2,"checked","checked",ft],value:"value",labelPosition:"labelPosition",disabled:[2,"disabled","disabled",ft],required:[2,"required","required",ft],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",ft]},outputs:{change:"change"},exportAs:["matRadioButton"],standalone:!0,features:[Li,Ln],ngContentSelectors:iKe,decls:13,vars:17,consts:[["formField",""],["input",""],["mat-internal-form-field","",3,"labelPosition"],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio",1,"mdc-radio__native-control",3,"change","id","checked","disabled","required"],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mdc-label",3,"for"]],template:function(i,s){if(1&i){const r=se();Si(),m(0,"div",2,0)(2,"div",3)(3,"div",4),P("click",function(a){return B(r),V(s._onTouchTargetClick(a))}),_(),m(4,"input",5,1),P("change",function(a){return B(r),V(s._onInputInteraction(a))}),_(),m(6,"div",6),q(7,"div",7)(8,"div",8),_(),m(9,"div",9),q(10,"div",10),_()(),m(11,"label",11),en(12),_()()}2&i&&(C("labelPosition",s.labelPosition),b(2),Oe("mdc-radio--disabled",s.disabled),b(2),C("id",s.inputId)("checked",s.checked)("disabled",s.disabled&&!s.disabledInteractive)("required",s.required),wt("name",s.name)("value",s.value)("aria-label",s.ariaLabel)("aria-labelledby",s.ariaLabelledby)("aria-describedby",s.ariaDescribedby)("aria-disabled",s.disabled&&s.disabledInteractive?"true":null),b(5),C("matRippleTrigger",s._rippleTrigger.nativeElement)("matRippleDisabled",s._isRippleDisabled())("matRippleCentered",!0),b(2),C("for",s.inputId))},dependencies:[Tt,tV],styles:['.mat-mdc-radio-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color;padding:calc((var(--mdc-radio-state-layer-size) - 20px)/2)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:not([disabled])~.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-hover-icon-color, var(--mat-app-on-surface))}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-hover-icon-color, var(--mat-app-primary))}.mat-mdc-radio-button .mdc-radio:active .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-pressed-icon-color, var(--mat-app-on-surface))}.mat-mdc-radio-button .mdc-radio:active .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:active .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-pressed-icon-color, var(--mat-app-primary))}.mat-mdc-radio-button .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-radio-button .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);width:var(--mdc-radio-state-layer-size);height:var(--mdc-radio-state-layer-size);top:calc(-1*(var(--mdc-radio-state-layer-size) - 20px)/2);left:calc(-1*(var(--mdc-radio-state-layer-size) - 20px)/2)}.mat-mdc-radio-button .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;top:0;right:0;left:0;cursor:inherit;z-index:1;width:var(--mdc-radio-state-layer-size);height:var(--mdc-radio-state-layer-size)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-app-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity)}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{cursor:default}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-app-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity)}.mat-mdc-radio-button .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-icon-color, var(--mat-app-primary))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-focus-icon-color, var(--mat-app-primary))}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transform:scale(0.5);transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled{pointer-events:auto}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-app-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-app-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity)}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-app-on-surface))}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-radio-checked-ripple-color, var(--mat-app-primary))}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-app-on-surface))}.mat-mdc-radio-button .mat-internal-form-field{color:var(--mat-radio-label-text-color, var(--mat-app-on-surface));font-family:var(--mat-radio-label-text-font, var(--mat-app-body-medium-font));line-height:var(--mat-radio-label-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mat-radio-label-text-size, var(--mat-app-body-medium-size));letter-spacing:var(--mat-radio-label-text-tracking, var(--mat-app-body-medium-tracking));font-weight:var(--mat-radio-label-text-weight, var(--mat-app-body-medium-weight))}.mat-mdc-radio-button .mdc-radio--disabled+label{color:var(--mat-radio-disabled-label-color)}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple .mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-focus-icon-color, black)}.mat-mdc-radio-button.cdk-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-radio-disabled{cursor:default;pointer-events:none}.mat-mdc-radio-disabled.mat-mdc-radio-disabled-interactive{pointer-events:auto}.mat-mdc-radio-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-radio-touch-target-display)}[dir=rtl] .mat-mdc-radio-touch-target{left:auto;right:50%;transform:translate(50%, -50%)}'],encapsulation:2,changeDetection:0})}return t})(),OE=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[Yi,Ka,Jc,Ub,Yi]})}return t})();const aKe=["knob"],lKe=["valueIndicatorContainer"];function cKe(t,n){if(1&t&&(m(0,"div",2,1)(2,"div",5)(3,"span",6),S(4),_()()()),2&t){const e=E();b(4),Ye(e.valueIndicatorText)}}const uKe=["trackActive"],dKe=["*"];function hKe(t,n){if(1&t&&q(0,"div"),2&t){const e=n.$implicit,i=n.$index,s=E(3);$o(0===e?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),Hn("transform",s._calcTickMarkTransform(i))}}function pKe(t,n){1&t&&R1(0,hKe,1,4,"div",8,lte),2&t&&F1(E(2)._tickMarks)}function fKe(t,n){if(1&t&&(m(0,"div",6,1),O(2,pKe,2,0),_()),2&t){const e=E();b(2),Bn(e._cachedWidth?2:-1)}}function mKe(t,n){if(1&t&&q(0,"mat-slider-visual-thumb",7),2&t){const e=E();C("discrete",e.discrete)("thumbPosition",1)("valueIndicatorText",e.startValueIndicatorText)}}var Qn=function(t){return t[t.START=1]="START",t[t.END=2]="END",t}(Qn||{}),D0=function(t){return t[t.ACTIVE=0]="ACTIVE",t[t.INACTIVE=1]="INACTIVE",t}(D0||{});const cO=new Ne("_MatSlider"),Lue=new Ne("_MatSliderThumb"),Pue=new Ne("_MatSliderRangeThumb"),$ue=new Ne("_MatSliderVisualThumb");let _Ke=(()=>{class t{constructor(e,i,s,r){this._cdr=e,this._ngZone=i,this._slider=r,this._isHovered=!1,this._isActive=!1,this._isValueIndicatorVisible=!1,this._platform=xe(Ys),this._onPointerMove=o=>{if(this._sliderInput._isFocused)return;const a=this._hostElement.getBoundingClientRect(),l=this._slider._isCursorOnSliderThumb(o,a);this._isHovered=l,l?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)},this._onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)},this._onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")},this._onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")},this._onDragStart=o=>{0===o.button&&(this._isActive=!0,this._showActiveRipple())},this._onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef),this._platform.SAFARI&&this._showHoverRipple()},this._hostElement=s.nativeElement}ngAfterViewInit(){this._ripple.radius=24,this._sliderInput=this._slider._getInput(this.thumbPosition),this._sliderInputEl=this._sliderInput._hostElement;const e=this._sliderInputEl;this._ngZone.runOutsideAngular(()=>{e.addEventListener("pointermove",this._onPointerMove),e.addEventListener("pointerdown",this._onDragStart),e.addEventListener("pointerup",this._onDragEnd),e.addEventListener("pointerleave",this._onMouseLeave),e.addEventListener("focus",this._onFocus),e.addEventListener("blur",this._onBlur)})}ngOnDestroy(){const e=this._sliderInputEl;e&&(e.removeEventListener("pointermove",this._onPointerMove),e.removeEventListener("pointerdown",this._onDragStart),e.removeEventListener("pointerup",this._onDragEnd),e.removeEventListener("pointerleave",this._onMouseLeave),e.removeEventListener("focus",this._onFocus),e.removeEventListener("blur",this._onBlur))}_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(e){return e?.state===fc.FADING_IN||e?.state===fc.VISIBLE}_showRipple(e,i){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(this.thumbPosition===Qn.START?Qn.END:Qn.START)._showValueIndicator(),!this._slider._globalRippleOptions?.disabled||i))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:e,centered:!0,persistent:!0})}_hideRipple(e){if(e?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();const i=this._getSibling();i._isShowingAnyRipple()||(this._hideValueIndicator(),i._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(this.thumbPosition===Qn.START?Qn.END:Qn.START)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}static#e=this.\u0275fac=function(i){return new(i||t)(I(wi),I(Lt),I(vt),I(cO))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(i,s){if(1&i&&(Gt(Tt,5),Gt(aKe,5),Gt(lKe,5)),2&i){let r;nt(r=it())&&(s._ripple=r.first),nt(r=it())&&(s._knob=r.first),nt(r=it())&&(s._valueIndicatorContainer=r.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},standalone:!0,features:[bt([{provide:$ue,useExisting:t}]),Ln],decls:4,vars:2,consts:[["knob",""],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator-container"],[1,"mdc-slider__thumb-knob"],["matRipple","",1,"mat-mdc-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(i,s){1&i&&(O(0,cKe,5,1,"div",2),q(1,"div",3,0)(3,"div",4)),2&i&&(Bn(s.discrete?0:-1),b(3),C("matRippleDisabled",!0))},dependencies:[Tt],styles:[".mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}"],encapsulation:2,changeDetection:0})}return t})(),ZV=(()=>{class t{get disabled(){return this._disabled}set disabled(e){this._disabled=e;const i=this._getInput(Qn.END),s=this._getInput(Qn.START);i&&(i.disabled=this._disabled),s&&(s.disabled=this._disabled)}get discrete(){return this._discrete}set discrete(e){this._discrete=e,this._updateValueIndicatorUIs()}get min(){return this._min}set min(e){const i=isNaN(e)?this._min:e;this._min!==i&&this._updateMin(i)}_updateMin(e){const i=this._min;this._min=e,this._isRange?this._updateMinRange({old:i,new:e}):this._updateMinNonRange(e),this._onMinMaxOrStepChange()}_updateMinRange(e){const i=this._getInput(Qn.END),s=this._getInput(Qn.START),r=i.value,o=s.value;s.min=e.new,i.min=Math.max(e.new,s.value),s.max=Math.min(i.max,i.value),s._updateWidthInactive(),i._updateWidthInactive(),e.new<e.old?this._onTranslateXChangeBySideEffect(i,s):this._onTranslateXChangeBySideEffect(s,i),r!==i.value&&this._onValueChange(i),o!==s.value&&this._onValueChange(s)}_updateMinNonRange(e){const i=this._getInput(Qn.END);if(i){const s=i.value;i.min=e,i._updateThumbUIByValue(),this._updateTrackUI(i),s!==i.value&&this._onValueChange(i)}}get max(){return this._max}set max(e){const i=isNaN(e)?this._max:e;this._max!==i&&this._updateMax(i)}_updateMax(e){const i=this._max;this._max=e,this._isRange?this._updateMaxRange({old:i,new:e}):this._updateMaxNonRange(e),this._onMinMaxOrStepChange()}_updateMaxRange(e){const i=this._getInput(Qn.END),s=this._getInput(Qn.START),r=i.value,o=s.value;i.max=e.new,s.max=Math.min(e.new,i.value),i.min=s.value,i._updateWidthInactive(),s._updateWidthInactive(),e.new>e.old?this._onTranslateXChangeBySideEffect(s,i):this._onTranslateXChangeBySideEffect(i,s),r!==i.value&&this._onValueChange(i),o!==s.value&&this._onValueChange(s)}_updateMaxNonRange(e){const i=this._getInput(Qn.END);if(i){const s=i.value;i.max=e,i._updateThumbUIByValue(),this._updateTrackUI(i),s!==i.value&&this._onValueChange(i)}}get step(){return this._step}set step(e){const i=isNaN(e)?this._step:e;this._step!==i&&this._updateStep(i)}_updateStep(e){this._step=e,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){const e=this._getInput(Qn.END),i=this._getInput(Qn.START),s=e.value,r=i.value,o=i.value;e.min=this._min,i.max=this._max,e.step=this._step,i.step=this._step,this._platform.SAFARI&&(e.value=e.value,i.value=i.value),e.min=Math.max(this._min,i.value),i.max=Math.min(this._max,e.value),i._updateWidthInactive(),e._updateWidthInactive(),e.value<o?this._onTranslateXChangeBySideEffect(i,e):this._onTranslateXChangeBySideEffect(e,i),s!==e.value&&this._onValueChange(e),r!==i.value&&this._onValueChange(i)}_updateStepNonRange(){const e=this._getInput(Qn.END);if(e){const i=e.value;e.step=this._step,this._platform.SAFARI&&(e.value=e.value),e._updateThumbUIByValue(),i!==e.value&&this._onValueChange(e)}}constructor(e,i,s,r,o,a){this._ngZone=e,this._cdr=i,this._elementRef=s,this._dir=r,this._globalRippleOptions=o,this._disabled=!1,this._discrete=!1,this.showTickMarks=!1,this._min=0,this.disableRipple=!1,this._max=100,this._step=1,this.displayWith=l=>`${l}`,this._rippleRadius=24,this.startValueIndicatorText="",this.endValueIndicatorText="",this._isRange=!1,this._isRtl=!1,this._hasViewInitialized=!1,this._tickMarkTrackWidth=0,this._hasAnimation=!1,this._resizeTimer=null,this._platform=xe(Ys),this._knobRadius=8,this._thumbsOverlap=!1,this._noopAnimations="NoopAnimations"===a,this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl="rtl"===this._dir.value}ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();const e=this._getInput(Qn.END),i=this._getInput(Qn.START);this._isRange=!!e&&!!i,this._cdr.detectChanges();const s=this._getThumb(Qn.END);this._rippleRadius=s._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._isRange?this._initUIRange(e,i):this._initUINonRange(e),this._updateTrackUI(e),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(e){e.initProps(),e.initUI(),this._updateValueIndicatorUI(e),this._hasViewInitialized=!0,e._updateThumbUIByValue()}_initUIRange(e,i){e.initProps(),e.initUI(),i.initProps(),i.initUI(),e._updateMinMax(),i._updateMinMax(),e._updateStaticStyles(),i._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,e._updateThumbUIByValue(),i._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl="rtl"===this._dir.value,this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){const e=this._getInput(Qn.END),i=this._getInput(Qn.START);e._setIsLeftThumb(),i._setIsLeftThumb(),e.translateX=e._calcTranslateXByValue(),i.translateX=i._calcTranslateXByValue(),e._updateStaticStyles(),i._updateStaticStyles(),e._updateWidthInactive(),i._updateWidthInactive(),e._updateThumbUIByValue(),i._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(Qn.END)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(Qn.START)._isActive||this._getThumb(Qn.END)._isActive}_getValue(e=Qn.END){const i=this._getInput(e);return i?i.value:this.min}_skipUpdate(){return!(!this._getInput(Qn.START)?._skipUIUpdate&&!this._getInput(Qn.END)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(e){const i=this._trackActive.nativeElement.style;i.left=e.left,i.right=e.right,i.transformOrigin=e.transformOrigin,i.transform=e.transform}_calcTickMarkTransform(e){return`translateX(${e*(this._tickMarkTrackWidth/(this._tickMarks.length-1))}px`}_onTranslateXChange(e){this._hasViewInitialized&&(this._updateThumbUI(e),this._updateTrackUI(e),this._updateOverlappingThumbUI(e))}_onTranslateXChangeBySideEffect(e,i){this._hasViewInitialized&&(e._updateThumbUIByValue(),i._updateThumbUIByValue())}_onValueChange(e){this._hasViewInitialized&&(this._updateValueIndicatorUI(e),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){const e=this._getInput(Qn.END),i=this._getInput(Qn.START);e._updateThumbUIByValue(),i._updateThumbUIByValue(),e._updateStaticStyles(),i._updateStaticStyles(),e._updateMinMax(),i._updateMinMax(),e._updateWidthInactive(),i._updateWidthInactive()}else{const e=this._getInput(Qn.END);e&&e._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_areThumbsOverlapping(){const e=this._getInput(Qn.START),i=this._getInput(Qn.END);return!(!e||!i)&&i.translateX-e.translateX<20}_updateOverlappingThumbClassNames(e){const i=e.getSibling(),s=this._getThumb(e.thumbPosition);this._getThumb(i.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),s._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(e){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(e))}_updateThumbUI(e){this._skipUpdate()||(this._getThumb(e.thumbPosition===Qn.END?Qn.END:Qn.START)._hostElement.style.transform=`translateX(${e.translateX}px)`)}_updateValueIndicatorUI(e){if(this._skipUpdate())return;const i=this.displayWith(e.value);if(this._hasViewInitialized?e._valuetext.set(i):e._hostElement.setAttribute("aria-valuetext",i),this.discrete){e.thumbPosition===Qn.START?this.startValueIndicatorText=i:this.endValueIndicatorText=i;const s=this._getThumb(e.thumbPosition);i.length<3?s._hostElement.classList.add("mdc-slider__thumb--short-value"):s._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){const e=this._getInput(Qn.END),i=this._getInput(Qn.START);e&&this._updateValueIndicatorUI(e),i&&this._updateValueIndicatorUI(i)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;const e=this._step&&this._step>0?this._step:1,s=(Math.floor(this.max/e)*e-this.min)/(this.max-this.min);this._tickMarkTrackWidth=this._cachedWidth*s-6}_updateTrackUI(e){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(e):this._updateTrackUINonRange(e))}_updateTrackUIRange(e){const i=e.getSibling();if(!i||!this._cachedWidth)return;const s=Math.abs(i.translateX-e.translateX)/this._cachedWidth;this._setTrackActiveStyles(e._isLeftThumb&&this._cachedWidth?{left:"auto",right:this._cachedWidth-i.translateX+"px",transformOrigin:"right",transform:`scaleX(${s})`}:{left:`${i.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${s})`})}_updateTrackUINonRange(e){this._setTrackActiveStyles(this._isRtl?{left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-e.fillPercentage})`}:{left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${e.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||void 0===this.step||void 0===this.min||void 0===this.max)return;const e=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(e):this._updateTickMarkUINonRange(e),this._isRtl&&this._tickMarks.reverse()}_updateTickMarkUINonRange(e){const i=this._getValue();let s=Math.max(Math.round((i-this.min)/e),0),r=Math.max(Math.round((this.max-i)/e),0);this._isRtl?s++:r++,this._tickMarks=Array(s).fill(D0.ACTIVE).concat(Array(r).fill(D0.INACTIVE))}_updateTickMarkUIRange(e){const i=this._getValue(),s=this._getValue(Qn.START),r=Math.max(Math.round((s-this.min)/e),0),o=Math.max(Math.round((i-s)/e)+1,0),a=Math.max(Math.round((this.max-i)/e),0);this._tickMarks=Array(r).fill(D0.INACTIVE).concat(Array(o).fill(D0.ACTIVE),Array(a).fill(D0.INACTIVE))}_getInput(e){return e===Qn.END&&this._input?this._input:this._inputs?.length?e===Qn.START?this._inputs.first:this._inputs.last:void 0}_getThumb(e){return e===Qn.END?this._thumbs?.last:this._thumbs?.first}_setTransition(e){this._hasAnimation=!this._platform.IOS&&e&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}_isCursorOnSliderThumb(e,i){const s=i.width/2,l=e.clientY-(i.y+s);return Math.pow(e.clientX-(i.x+s),2)+Math.pow(l,2)<Math.pow(s,2)}static#e=this.\u0275fac=function(i){return new(i||t)(I(Lt),I(wi),I(vt),I(jo,8),I(gE,8),I(ua,8))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-slider"]],contentQueries:function(i,s,r){if(1&i&&(Bi(r,Lue,5),Bi(r,Pue,4)),2&i){let o;nt(o=it())&&(s._input=o.first),nt(o=it())&&(s._inputs=o)}},viewQuery:function(i,s){if(1&i&&(Gt(uKe,5),Gt($ue,5)),2&i){let r;nt(r=it())&&(s._trackActive=r.first),nt(r=it())&&(s._thumbs=r)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:12,hostBindings:function(i,s){2&i&&($o("mat-"+(s.color||"primary")),Oe("mdc-slider--range",s._isRange)("mdc-slider--disabled",s.disabled)("mdc-slider--discrete",s.discrete)("mdc-slider--tick-marks",s.showTickMarks)("_mat-animation-noopable",s._noopAnimations))},inputs:{disabled:[2,"disabled","disabled",ft],discrete:[2,"discrete","discrete",ft],showTickMarks:[2,"showTickMarks","showTickMarks",ft],min:[2,"min","min",Xr],color:"color",disableRipple:[2,"disableRipple","disableRipple",ft],max:[2,"max","max",Xr],step:[2,"step","step",Xr],displayWith:"displayWith"},exportAs:["matSlider"],standalone:!0,features:[bt([{provide:cO,useExisting:t}]),Li,Ln],ngContentSelectors:dKe,decls:9,vars:5,consts:[["trackActive",""],["tickMarkContainer",""],[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],[1,"mdc-slider__tick-marks"],[3,"discrete","thumbPosition","valueIndicatorText"],[3,"class","transform"]],template:function(i,s){1&i&&(Si(),en(0),m(1,"div",2),q(2,"div",3),m(3,"div",4),q(4,"div",5,0),_(),O(6,fKe,3,1,"div",6),_(),O(7,mKe,1,3,"mat-slider-visual-thumb",7),q(8,"mat-slider-visual-thumb",7)),2&i&&(b(6),Bn(s.showTickMarks?6:-1),b(),Bn(s._isRange?7:-1),b(),C("discrete",s.discrete)("thumbPosition",2)("valueIndicatorText",s.endValueIndicatorText))},dependencies:[_Ke],styles:['.mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%;pointer-events:none;height:var(--mdc-slider-inactive-track-height)}.mdc-slider__track--active,.mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider__track--active{overflow:hidden;border-radius:var(--mdc-slider-active-track-shape, var(--mat-app-corner-full));height:var(--mdc-slider-active-track-height);top:calc((var(--mdc-slider-inactive-track-height) - var(--mdc-slider-active-track-height))/2)}.mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;transform-origin:left;transition:transform 80ms ease;border-color:var(--mdc-slider-active-track-color, var(--mat-app-primary));border-top-width:var(--mdc-slider-active-track-height)}.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color, var(--mat-app-on-surface))}[dir=rtl] .mdc-slider__track--active_fill{-webkit-transform-origin:right;transform-origin:right}.mdc-slider__track--inactive{left:0;top:0;opacity:.24;background-color:var(--mdc-slider-inactive-track-color, var(--mat-app-surface-variant));height:var(--mdc-slider-inactive-track-height);border-radius:var(--mdc-slider-inactive-track-shape, var(--mat-app-corner-full))}.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color, var(--mat-app-on-surface));opacity:.24}.mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.cdk-high-contrast-active .mdc-slider__track--inactive::before{border-color:CanvasText}.mdc-slider__value-indicator-container{bottom:44px;left:50%;pointer-events:none;position:absolute;transform:translateX(-50%);transform:var(--mat-slider-value-indicator-container-transform)}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider__value-indicator{display:flex;align-items:center;border-radius:4px;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom;opacity:1;transition:transform 100ms cubic-bezier(0.4, 0, 1, 1);word-break:normal;background-color:var(--mdc-slider-label-container-color, var(--mat-app-primary));color:var(--mdc-slider-label-label-text-color, var(--mat-app-on-primary));width:var(--mat-slider-value-indicator-width);height:var(--mat-slider-value-indicator-height);padding:var(--mat-slider-value-indicator-padding);opacity:var(--mat-slider-value-indicator-opacity);border-radius:var(--mat-slider-value-indicator-border-radius)}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}.mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;display:var(--mat-slider-value-indicator-caret-display);border-top-color:var(--mdc-slider-label-container-color, var(--mat-app-primary))}.mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.cdk-high-contrast-active .mdc-slider__value-indicator::after{border-color:CanvasText}.mdc-slider__value-indicator-text{text-align:center;width:var(--mat-slider-value-indicator-width);transform:var(--mat-slider-value-indicator-text-transform);font-family:var(--mdc-slider-label-label-text-font, var(--mat-app-label-medium-font));font-size:var(--mdc-slider-label-label-text-size, var(--mat-app-label-medium-size));font-weight:var(--mdc-slider-label-label-text-weight, var(--mat-app-label-medium-weight));line-height:var(--mdc-slider-label-label-text-line-height, var(--mat-app-label-medium-line-height));letter-spacing:var(--mdc-slider-label-label-text-tracking, var(--mat-app-label-medium-tracking))}.mdc-slider__thumb{-webkit-user-select:none;user-select:none;display:flex;left:-24px;outline:none;position:absolute;height:48px;width:48px;pointer-events:none}.mdc-slider--discrete .mdc-slider__thumb{transition:transform 80ms ease}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__thumb--top{z-index:1}.mdc-slider__thumb-knob{position:absolute;box-sizing:border-box;left:50%;top:50%;transform:translate(-50%, -50%);border-style:solid;width:var(--mdc-slider-handle-width);height:var(--mdc-slider-handle-height);border-width:calc(var(--mdc-slider-handle-height)/2) calc(var(--mdc-slider-handle-width)/2);box-shadow:var(--mdc-slider-handle-elevation, var(--mat-app-level1));background-color:var(--mdc-slider-handle-color, var(--mat-app-primary));border-color:var(--mdc-slider-handle-color, var(--mat-app-primary));border-radius:var(--mdc-slider-handle-shape, var(--mat-app-corner-full))}.mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color, var(--mat-app-primary));border-color:var(--mdc-slider-hover-handle-color, var(--mat-app-primary))}.mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color, var(--mat-app-primary));border-color:var(--mdc-slider-focus-handle-color, var(--mat-app-primary))}.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color, var(--mat-app-on-surface));border-color:var(--mdc-slider-disabled-handle-color, var(--mat-app-on-surface))}.mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border:solid 1px #fff;box-sizing:content-box;border-color:var(--mdc-slider-with-overlap-handle-outline-color, var(--mat-app-on-primary));border-width:var(--mdc-slider-with-overlap-handle-outline-width)}.mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider__tick-mark--active,.mdc-slider__tick-mark--inactive{width:var(--mdc-slider-with-tick-marks-container-size);height:var(--mdc-slider-with-tick-marks-container-size);border-radius:var(--mdc-slider-with-tick-marks-container-shape, var(--mat-app-corner-full))}.mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity);background-color:var(--mdc-slider-with-tick-marks-inactive-container-color, var(--mat-app-on-surface-variant))}.mdc-slider--disabled .mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity);background-color:var(--mdc-slider-with-tick-marks-disabled-container-color, var(--mat-app-on-surface))}.mdc-slider__tick-mark--active{opacity:var(--mdc-slider-with-tick-marks-active-container-opacity);background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mat-app-on-primary))}.mdc-slider__input{cursor:pointer;left:2px;margin:0;height:44px;opacity:0;position:absolute;top:2px;width:44px;box-sizing:content-box}.mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;cursor:pointer;height:48px;margin:0 8px;position:relative;touch-action:pan-y;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider.mdc-slider--disabled{cursor:auto;opacity:.38}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-slider-ripple-color, var(--mat-app-primary))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-slider-hover-state-layer-color)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-slider-focus-state-layer-color)}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-mdc-focus-indicator::before{border-radius:50%}.mdc-slider__thumb--focused .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return t})();const bKe={provide:Ki,useExisting:wn(()=>RE),multi:!0};let RE=(()=>{class t{get value(){return Xr(this._hostElement.value,0)}set value(e){const i=(e=isNaN(e)?0:e)+"";this._hasSetInitialValue?this._isActive||this._setValue(i):this._initialValue=i}_setValue(e){this._hostElement.value=e,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges(),this._slider._cdr.markForCheck()}get translateX(){return this._slider.min>=this._slider.max?(this._translateX=this._tickMarkOffset,this._translateX):(void 0===this._translateX&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(e){this._translateX=e}get min(){return Xr(this._hostElement.min,0)}set min(e){this._hostElement.min=e+"",this._cdr.detectChanges()}get max(){return Xr(this._hostElement.max,0)}set max(e){this._hostElement.max=e+"",this._cdr.detectChanges()}get step(){return Xr(this._hostElement.step,0)}set step(e){this._hostElement.step=e+"",this._cdr.detectChanges()}get disabled(){return ft(this._hostElement.disabled)}set disabled(e){this._hostElement.disabled=e,this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?0===this._translateX?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_setIsFocused(e){this._isFocused=e}constructor(e,i,s,r){this._ngZone=e,this._elementRef=i,this._cdr=s,this._slider=r,this.valueChange=new Ae,this.dragStart=new Ae,this.dragEnd=new Ae,this.thumbPosition=Qn.END,this._valuetext=xm(""),this._knobRadius=8,this._tickMarkOffset=3,this._isActive=!1,this._isFocused=!1,this._hasSetInitialValue=!1,this._destroyed=new ot,this._skipUIUpdate=!1,this._onTouchedFn=()=>{},this._isControlInitialized=!1,this._platform=xe(Ys),this._hostElement=i.nativeElement,this._ngZone.runOutsideAngular(()=>{this._hostElement.addEventListener("pointerdown",this._onPointerDown.bind(this)),this._hostElement.addEventListener("pointermove",this._onPointerMove.bind(this)),this._hostElement.addEventListener("pointerup",this._onPointerUp.bind(this))})}ngOnDestroy(){this._hostElement.removeEventListener("pointerdown",this._onPointerDown),this._hostElement.removeEventListener("pointermove",this._onPointerMove),this._hostElement.removeEventListener("pointerup",this._onPointerUp),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,void 0===this._initialValue?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._slider._setTransition(!1),this._slider._updateTrackUI(this),this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn?.(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(e){if(!this.disabled&&0===e.button){if(this._platform.IOS){const i=this._slider._isCursorOnSliderThumb(e,this._slider._getThumb(this.thumbPosition)._hostElement.getBoundingClientRect());return this._isActive=i,this._updateWidthActive(),void this._slider._updateDimensions()}this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(e,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(e),this.dragStart.emit({source:this,parent:this._slider,value:this.value}))}}_handleValueCorrection(e){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(e)},0)}_fixValue(e){const i=e.clientX-this._slider._cachedLeft,s=this._slider._cachedWidth,r=0===this._slider.step?1:this._slider.step,o=Math.floor((this._slider.max-this._slider.min)/r),c=Math.round((this._slider._isRtl?1-i/s:i/s)*o)/o*(this._slider.max-this._slider.min)+this._slider.min,u=Math.round(c/r)*r;if(u===this.value)return this._slider._onValueChange(this),void(this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation}));this.value=u,this.valueChange.emit(this.value),this._onChangeFn?.(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation})}_onPointerMove(e){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(e)}_onPointerUp(){this._isActive&&(this._isActive=!1,this._platform.SAFARI&&this._setIsFocused(!1),this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive(),this._platform.IOS?10:0))}_clamp(e){const i=this._tickMarkOffset;return Math.max(Math.min(e,this._slider._cachedWidth-this._tickMarkOffset),i)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*(this._slider._cachedWidth-2*this._tickMarkOffset)+this._tickMarkOffset:this.percentage*(this._slider._cachedWidth-2*this._tickMarkOffset)+this._tickMarkOffset}_calcTranslateXByPointerEvent(e){return e.clientX-this._slider._cachedLeft}_updateWidthActive(){}_updateWidthInactive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding-2*this._tickMarkOffset}px)`,this._hostElement.style.left=`-${this._slider._rippleRadius-this._tickMarkOffset}px`}_updateThumbUIByValue(e){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(e)}_updateThumbUIByPointerEvent(e,i){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(e)),this._updateThumbUI(i)}_updateThumbUI(e){this._slider._setTransition(!!e?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(e){(this._isControlInitialized||null!==e)&&(this.value=e)}registerOnChange(e){this._onChangeFn=e,this._isControlInitialized=!0}registerOnTouched(e){this._onTouchedFn=e}setDisabledState(e){this.disabled=e}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}static#e=this.\u0275fac=function(i){return new(i||t)(I(Lt),I(vt),I(wi),I(cO))};static#t=this.\u0275dir=He({type:t,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(i,s){1&i&&P("change",function(){return s._onChange()})("input",function(){return s._onInput()})("blur",function(){return s._onBlur()})("focus",function(){return s._onFocus()}),2&i&&wt("aria-valuetext",s._valuetext())},inputs:{value:[2,"value","value",Xr]},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],standalone:!0,features:[bt([bKe,{provide:Lue,useExisting:t}]),Li]})}return t})(),Bue=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[Yi,Jc]})}return t})();const wKe=["switch"],CKe=["*"];function SKe(t,n){1&t&&(m(0,"span",10),ka(),m(1,"svg",12),q(2,"path",13),_(),m(3,"svg",14),q(4,"path",15),_()())}const xKe=new Ne("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1,disabledInteractive:!1})}),EKe={provide:Ki,useExisting:wn(()=>uO),multi:!0};class Vue{constructor(n,e){this.source=n,this.checked=e}}let TKe=0,uO=(()=>{class t{_createChangeEvent(e){return new Vue(this,e)}get buttonId(){return`${this.id||this._uniqueId}-button`}focus(){this._switchElement.nativeElement.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(e,i,s,r,o,a){this._elementRef=e,this._focusMonitor=i,this._changeDetectorRef=s,this.defaults=o,this._onChange=l=>{},this._onTouched=()=>{},this._validatorOnChange=()=>{},this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this.change=new Ae,this.toggleChange=new Ae,this.tabIndex=parseInt(r)||0,this.color=o.color||"accent",this._noopAnimations="NoopAnimations"===a,this.id=this._uniqueId="mat-mdc-slide-toggle-"+ ++TKe,this.hideIcon=o.hideIcon??!1,this.disabledInteractive=o.disabledInteractive??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{"keyboard"===e||"program"===e?(this._focused=!0,this._changeDetectorRef.markForCheck()):e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(e){e.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}validate(e){return this.required&&!0!==e.value?{required:!0}:null}registerOnValidatorChange(e){this._validatorOnChange=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.disabled||(this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new Vue(this,this.checked))))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(pc),I(wi),sc("tabindex"),I(xKe),I(ua,8))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-slide-toggle"]],viewQuery:function(i,s){if(1&i&&Gt(wKe,5),2&i){let r;nt(r=it())&&(s._switchElement=r.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(i,s){2&i&&(fl("id",s.id),wt("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),$o(s.color?"mat-"+s.color:""),Oe("mat-mdc-slide-toggle-focused",s._focused)("mat-mdc-slide-toggle-checked",s.checked)("_mat-animation-noopable",s._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",ft],color:"color",disabled:[2,"disabled","disabled",ft],disableRipple:[2,"disableRipple","disableRipple",ft],tabIndex:[2,"tabIndex","tabIndex",e=>null==e?0:Xr(e)],checked:[2,"checked","checked",ft],hideIcon:[2,"hideIcon","hideIcon",ft],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ft]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],standalone:!0,features:[bt([EKe,{provide:To,useExisting:t,multi:!0}]),Li,Rn,Ln],ngContentSelectors:CKe,decls:13,vars:27,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(i,s){if(1&i){const r=se();Si(),m(0,"div",1)(1,"button",2,0),P("click",function(){return B(r),V(s._handleClick())}),q(3,"span",3),m(4,"span",4)(5,"span",5)(6,"span",6),q(7,"span",7),_(),m(8,"span",8),q(9,"span",9),_(),O(10,SKe,5,0,"span",10),_()()(),m(11,"label",11),P("click",function(a){return B(r),V(a.stopPropagation())}),en(12),_()()}if(2&i){const r=xt(2);C("labelPosition",s.labelPosition),b(),Oe("mdc-switch--selected",s.checked)("mdc-switch--unselected",!s.checked)("mdc-switch--checked",s.checked)("mdc-switch--disabled",s.disabled)("mat-mdc-slide-toggle-disabled-interactive",s.disabledInteractive),C("tabIndex",s.disabled&&!s.disabledInteractive?-1:s.tabIndex)("disabled",s.disabled&&!s.disabledInteractive),wt("id",s.buttonId)("name",s.name)("aria-label",s.ariaLabel)("aria-labelledby",s._getAriaLabelledBy())("aria-describedby",s.ariaDescribedby)("aria-required",s.required||null)("aria-checked",s.checked)("aria-disabled",s.disabled&&s.disabledInteractive?"true":null),b(8),C("matRippleTrigger",r)("matRippleDisabled",s.disableRipple||s.disabled)("matRippleCentered",!0),b(),Bn(s.hideIcon?-1:10),b(),C("for",s.buttonId),wt("id",s._labelId)}},dependencies:[Tt,tV],styles:['.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mdc-switch-track-width)}.mdc-switch.mdc-switch--disabled{cursor:default;pointer-events:none}.mdc-switch.mat-mdc-slide-toggle-disabled-interactive{pointer-events:auto}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mdc-switch-track-height);border-radius:var(--mdc-switch-track-shape, var(--mat-app-corner-full))}.mdc-switch--disabled.mdc-switch .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-switch-track-outline-width);border-color:var(--mat-switch-track-outline-color, var(--mat-app-outline))}.cdk-high-contrast-active .mdc-switch__track::before,.cdk-high-contrast-active .mdc-switch__track::after{border-color:currentColor}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-switch-selected-track-outline-width);border-color:var(--mat-switch-selected-track-outline-color)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-switch-disabled-unselected-track-outline-width);border-color:var(--mat-switch-disabled-unselected-track-outline-color, var(--mat-app-on-surface))}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mdc-switch-unselected-track-color, var(--mat-app-surface-variant))}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, var(--mat-app-surface-variant))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, var(--mat-app-surface-variant))}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, var(--mat-app-surface-variant))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::before,.mdc-switch.mdc-switch--disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, var(--mat-app-surface-variant))}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mdc-switch-selected-track-color, var(--mat-app-primary))}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, var(--mat-app-primary))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, var(--mat-app-primary))}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, var(--mat-app-primary))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::after,.mdc-switch.mdc-switch--disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, var(--mat-app-on-surface))}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mdc-switch-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mdc-switch-handle-width);height:var(--mdc-switch-handle-height);border-radius:var(--mdc-switch-handle-shape, var(--mat-app-corner-full))}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size);height:var(--mat-switch-unselected-handle-size);margin:var(--mat-switch-unselected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size);height:var(--mat-switch-selected-handle-size);margin:var(--mat-switch-selected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size);height:var(--mat-switch-with-icon-handle-size)}.mat-mdc-slide-toggle .mdc-switch:active:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size);height:var(--mat-switch-pressed-handle-size)}.mat-mdc-slide-toggle .mdc-switch--selected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}.cdk-high-contrast-active .mdc-switch__handle::before,.cdk-high-contrast-active .mdc-switch__handle::after{border-color:currentColor}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mat-app-on-primary))}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, var(--mat-app-primary-container))}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, var(--mat-app-primary-container))}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, var(--mat-app-primary-container))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:hover:not(:focus):not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:focus:not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:active .mdc-switch__handle::after,.mdc-switch--selected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, var(--mat-app-surface))}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, var(--mat-app-outline))}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, var(--mat-app-on-surface-variant))}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, var(--mat-app-on-surface-variant))}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, var(--mat-app-on-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, var(--mat-app-on-surface))}.mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__shadow,.mdc-switch.mdc-switch--disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mdc-switch-state-layer-size);height:var(--mdc-switch-state-layer-size)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch--disabled .mdc-switch__ripple::after{display:none}.mat-mdc-slide-toggle-disabled-interactive .mdc-switch__ripple::after{display:block}.mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:focus .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:active .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:hover:not(:focus) .mdc-switch__ripple::after,.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-focus-state-layer-color, var(--mat-app-on-surface))}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-pressed-state-layer-color, var(--mat-app-on-surface));opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-selected-hover-state-layer-color, var(--mat-app-primary))}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-selected-focus-state-layer-color, var(--mat-app-primary))}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-selected-pressed-state-layer-color, var(--mat-app-primary));opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size);fill:var(--mdc-switch-unselected-icon-color, var(--mat-app-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mat-app-surface-variant))}.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size);fill:var(--mdc-switch-selected-icon-color, var(--mat-app-on-primary-container))}.mdc-switch--selected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mat-app-on-surface))}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{-webkit-user-select:none;user-select:none;display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-switch-label-text-color, var(--mat-app-on-surface));font-family:var(--mat-switch-label-text-font, var(--mat-app-body-medium-font));line-height:var(--mat-switch-label-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mat-switch-label-text-size, var(--mat-app-body-medium-size));letter-spacing:var(--mat-switch-label-text-tracking, var(--mat-app-body-medium-tracking));font-weight:var(--mat-switch-label-text-weight, var(--mat-app-body-medium-weight))}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}'],encapsulation:2,changeDetection:0})}return t})(),QV=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[uO,Yi,Yi]})}return t})();const DKe=["button"],AKe=["*"];function MKe(t,n){1&t&&q(0,"mat-pseudo-checkbox",3),2&t&&C("disabled",E().disabled)}function NKe(t,n){1&t&&q(0,"mat-pseudo-checkbox",3),2&t&&C("disabled",E().disabled)}const zue=new Ne("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",{providedIn:"root",factory:function OKe(){return{hideSingleSelectionIndicator:!1,hideMultipleSelectionIndicator:!1,disabledInteractive:!1}}}),Uue=new Ne("MatButtonToggleGroup");let Gue=0;class jue{constructor(n,e){this.source=n,this.value=e}}let Hue=(()=>{class t{get buttonId(){return`${this.id}-button`}get tabIndex(){return this._tabIndex}set tabIndex(e){this._tabIndex=e,this._markForCheck()}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=e}get disabledInteractive(){return this._disabledInteractive||null!==this.buttonToggleGroup&&this.buttonToggleGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}constructor(e,i,s,r,o,a){this._changeDetectorRef=i,this._elementRef=s,this._focusMonitor=r,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new Ae;const l=Number(o);this.tabIndex=l||0===l?l:null,this.buttonToggleGroup=e,this.appearance=a&&a.appearance?a.appearance:"standard",this.disabledInteractive=a?.disabledInteractive??!1}ngOnInit(){const e=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+Gue++,e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){if(this.disabled)return;const e=!!this.isSingleSelector()||!this._checked;if(e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.isSingleSelector()){const i=this.buttonToggleGroup._buttonToggles.find(s=>0===s.tabIndex);i&&(i.tabIndex=-1),this.tabIndex=0}this.change.emit(new jue(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this.isSingleSelector()?this.buttonToggleGroup.name:this.name||null}isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}static#e=this.\u0275fac=function(i){return new(i||t)(I(Uue,8),I(wi),I(vt),I(pc),sc("tabindex"),I(zue,8))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-button-toggle"]],viewQuery:function(i,s){if(1&i&&Gt(DKe,5),2&i){let r;nt(r=it())&&(s._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:14,hostBindings:function(i,s){1&i&&P("focus",function(){return s.focus()}),2&i&&(wt("aria-label",null)("aria-labelledby",null)("id",s.id)("name",null),Oe("mat-button-toggle-standalone",!s.buttonToggleGroup)("mat-button-toggle-checked",s.checked)("mat-button-toggle-disabled",s.disabled)("mat-button-toggle-disabled-interactive",s.disabledInteractive)("mat-button-toggle-appearance-standard","standard"===s.appearance))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",disableRipple:[2,"disableRipple","disableRipple",ft],appearance:"appearance",checked:[2,"checked","checked",ft],disabled:[2,"disabled","disabled",ft],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ft]},outputs:{change:"change"},exportAs:["matButtonToggle"],standalone:!0,features:[Li,Ln],ngContentSelectors:AKe,decls:8,vars:14,consts:[["button",""],["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"click","id","disabled"],[1,"mat-button-toggle-label-content"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,s){if(1&i){const r=se();Si(),m(0,"button",1,0),P("click",function(){return B(r),V(s._onButtonClick())}),m(2,"span",2),O(3,MKe,1,1,"mat-pseudo-checkbox",3)(4,NKe,1,1,"mat-pseudo-checkbox",3),en(5),_()(),q(6,"span",4)(7,"span",5)}if(2&i){const r=xt(1);C("id",s.buttonId)("disabled",s.disabled&&!s.disabledInteractive||null),wt("role",s.isSingleSelector()?"radio":"button")("tabindex",s.disabled&&!s.disabledInteractive?-1:s.tabIndex)("aria-pressed",s.isSingleSelector()?null:s.checked)("aria-checked",s.isSingleSelector()?s.checked:null)("name",s._getButtonName())("aria-label",s.ariaLabel)("aria-labelledby",s.ariaLabelledby)("aria-disabled",s.disabled&&s.disabledInteractive?"true":null),b(3),Bn(s.buttonToggleGroup&&s.checked&&!s.buttonToggleGroup.multiple&&!s.buttonToggleGroup.hideSingleSelectionIndicator?3:-1),b(),Bn(s.buttonToggleGroup&&s.checked&&s.buttonToggleGroup.multiple&&!s.buttonToggleGroup.hideMultipleSelectionIndicator?4:-1),b(3),C("matRippleTrigger",r)("matRippleDisabled",s.disableRipple||s.disabled)}},dependencies:[Tt,Lle],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);border-radius:var(--mat-legacy-button-toggle-shape)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full));border:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard .mat-pseudo-checkbox,.mat-button-toggle-group-appearance-standard .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-app-on-secondary-container))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-legacy-button-toggle-text-color);font-family:var(--mat-legacy-button-toggle-label-text-font);font-size:var(--mat-legacy-button-toggle-label-text-size);line-height:var(--mat-legacy-button-toggle-label-text-line-height);font-weight:var(--mat-legacy-button-toggle-label-text-weight);letter-spacing:var(--mat-legacy-button-toggle-label-text-tracking);--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-legacy-button-toggle-selected-state-text-color)}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-legacy-button-toggle-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle .mat-pseudo-checkbox{margin-right:12px}[dir=rtl] .mat-button-toggle .mat-pseudo-checkbox{margin-right:0;margin-left:12px}.mat-button-toggle-checked{color:var(--mat-legacy-button-toggle-selected-state-text-color);background-color:var(--mat-legacy-button-toggle-selected-state-background-color)}.mat-button-toggle-disabled{pointer-events:none;color:var(--mat-legacy-button-toggle-disabled-state-text-color);background-color:var(--mat-legacy-button-toggle-disabled-state-background-color);--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-legacy-button-toggle-disabled-state-text-color)}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-legacy-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-disabled-interactive{pointer-events:auto}.mat-button-toggle-appearance-standard{color:var(--mat-standard-button-toggle-text-color, var(--mat-app-on-surface));background-color:var(--mat-standard-button-toggle-background-color);font-family:var(--mat-standard-button-toggle-label-text-font, var(--mat-app-label-large-font));font-size:var(--mat-standard-button-toggle-label-text-size, var(--mat-app-label-large-size));line-height:var(--mat-standard-button-toggle-label-text-line-height, var(--mat-app-label-large-line-height));font-weight:var(--mat-standard-button-toggle-label-text-weight, var(--mat-app-label-large-weight));letter-spacing:var(--mat-standard-button-toggle-label-text-tracking, var(--mat-app-label-large-tracking))}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-app-on-secondary-container));background-color:var(--mat-standard-button-toggle-selected-state-background-color, var(--mat-app-secondary-container))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-standard-button-toggle-disabled-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-state-background-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-standard-button-toggle-disabled-selected-state-text-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-disabled-selected-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-standard-button-toggle-state-layer-color, var(--mat-app-on-surface))}.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-button-toggle-appearance-standard.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}@media(hover: none){.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-legacy-button-toggle-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-standard-button-toggle-height)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-legacy-button-toggle-state-layer-color)}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{--mat-focus-indicator-border-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full))}.mat-button-toggle-group-appearance-standard .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full));border-bottom-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full))}.mat-button-toggle-group-appearance-standard .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full));border-bottom-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full))}"],encapsulation:2,changeDetection:0})}return t})(),Wue=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[Yi,Jc,Hue,Yi]})}return t})();function Qm(t,n,e,i){return new(e||(e=Promise))(function(r,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):function s(r){return r instanceof e?r:new e(function(o){o(r)})}(u.value).then(a,l)}c((i=i.apply(t,n||[])).next())})}function hO(t,n={}){const{selector:e}=n,i=function rXe(t,n){var e={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(t);s<i.length;s++)n.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(e[i[s]]=t[i[s]])}return e}(n,["selector"]);return new Pn(s=>{const r=new AbortController,o=r.signal;let a=!0,l=!1;const c=new rn;let u;if(c.add(()=>{l=!0,a&&r.abort()}),i){if(i.signal)if(i.signal.aborted)r.abort();else{const d=i.signal,h=()=>{o.aborted||r.abort()};d.addEventListener("abort",h),c.add(()=>d.removeEventListener("abort",h))}u=Object.assign({},i,{signal:o})}else u={signal:o};return fetch(t,u).then(d=>{e?c.add(ao(e(d)).subscribe(h=>s.next(h),h=>{a=!1,l||s.error(h)},()=>{a=!1,s.complete()})):(a=!1,s.next(d),s.complete())}).catch(d=>{a=!1,l||s.error(d)}),c})}"function"==typeof SuppressedError&&SuppressedError;class lXe{constructor(n,e){this.notifier=n,this.source=e}call(n,e){return e.subscribe(new cXe(n,this.notifier,this.source))}}class cXe extends Om{constructor(n,e,i){super(n),this.notifier=e,this.source=i}error(n){if(!this.isStopped){let e=this.errors,i=this.retries,s=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{e=new ot;try{const{notifier:r}=this;i=r(e)}catch(r){return super.error(r)}s=Rm(i,new Nm(this))}this._unsubscribeAndRecycle(),this.errors=e,this.retries=i,this.retriesSubscription=s,e.next(n)}}_unsubscribe(){const{errors:n,retriesSubscription:e}=this;n&&(n.unsubscribe(),this.errors=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}notifyNext(){const{_unsubscribe:n}=this;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=n,this.source.subscribe(this)}}var sz=ye(993),uXe=ye(299);class Do{constructor(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(n,e=!1){return this.onePassHasher.start().appendStr(n).end(e)}static hashAsciiStr(n,e=!1){return this.onePassHasher.start().appendAsciiStr(n).end(e)}static _hex(n){const e=Do.hexChars,i=Do.hexOut;let s,r,o,a;for(a=0;a<4;a+=1)for(r=8*a,s=n[a],o=0;o<8;o+=2)i[r+1+o]=e.charAt(15&s),s>>>=4,i[r+0+o]=e.charAt(15&s),s>>>=4;return i.join("")}static _md5cycle(n,e){let i=n[0],s=n[1],r=n[2],o=n[3];i+=(s&r|~s&o)+e[0]-680876936|0,i=(i<<7|i>>>25)+s|0,o+=(i&s|~i&r)+e[1]-389564586|0,o=(o<<12|o>>>20)+i|0,r+=(o&i|~o&s)+e[2]+606105819|0,r=(r<<17|r>>>15)+o|0,s+=(r&o|~r&i)+e[3]-1044525330|0,s=(s<<22|s>>>10)+r|0,i+=(s&r|~s&o)+e[4]-176418897|0,i=(i<<7|i>>>25)+s|0,o+=(i&s|~i&r)+e[5]+1200080426|0,o=(o<<12|o>>>20)+i|0,r+=(o&i|~o&s)+e[6]-1473231341|0,r=(r<<17|r>>>15)+o|0,s+=(r&o|~r&i)+e[7]-45705983|0,s=(s<<22|s>>>10)+r|0,i+=(s&r|~s&o)+e[8]+1770035416|0,i=(i<<7|i>>>25)+s|0,o+=(i&s|~i&r)+e[9]-1958414417|0,o=(o<<12|o>>>20)+i|0,r+=(o&i|~o&s)+e[10]-42063|0,r=(r<<17|r>>>15)+o|0,s+=(r&o|~r&i)+e[11]-1990404162|0,s=(s<<22|s>>>10)+r|0,i+=(s&r|~s&o)+e[12]+1804603682|0,i=(i<<7|i>>>25)+s|0,o+=(i&s|~i&r)+e[13]-40341101|0,o=(o<<12|o>>>20)+i|0,r+=(o&i|~o&s)+e[14]-1502002290|0,r=(r<<17|r>>>15)+o|0,s+=(r&o|~r&i)+e[15]+1236535329|0,s=(s<<22|s>>>10)+r|0,i+=(s&o|r&~o)+e[1]-165796510|0,i=(i<<5|i>>>27)+s|0,o+=(i&r|s&~r)+e[6]-1069501632|0,o=(o<<9|o>>>23)+i|0,r+=(o&s|i&~s)+e[11]+643717713|0,r=(r<<14|r>>>18)+o|0,s+=(r&i|o&~i)+e[0]-373897302|0,s=(s<<20|s>>>12)+r|0,i+=(s&o|r&~o)+e[5]-701558691|0,i=(i<<5|i>>>27)+s|0,o+=(i&r|s&~r)+e[10]+38016083|0,o=(o<<9|o>>>23)+i|0,r+=(o&s|i&~s)+e[15]-660478335|0,r=(r<<14|r>>>18)+o|0,s+=(r&i|o&~i)+e[4]-405537848|0,s=(s<<20|s>>>12)+r|0,i+=(s&o|r&~o)+e[9]+568446438|0,i=(i<<5|i>>>27)+s|0,o+=(i&r|s&~r)+e[14]-1019803690|0,o=(o<<9|o>>>23)+i|0,r+=(o&s|i&~s)+e[3]-187363961|0,r=(r<<14|r>>>18)+o|0,s+=(r&i|o&~i)+e[8]+1163531501|0,s=(s<<20|s>>>12)+r|0,i+=(s&o|r&~o)+e[13]-1444681467|0,i=(i<<5|i>>>27)+s|0,o+=(i&r|s&~r)+e[2]-51403784|0,o=(o<<9|o>>>23)+i|0,r+=(o&s|i&~s)+e[7]+1735328473|0,r=(r<<14|r>>>18)+o|0,s+=(r&i|o&~i)+e[12]-1926607734|0,s=(s<<20|s>>>12)+r|0,i+=(s^r^o)+e[5]-378558|0,i=(i<<4|i>>>28)+s|0,o+=(i^s^r)+e[8]-2022574463|0,o=(o<<11|o>>>21)+i|0,r+=(o^i^s)+e[11]+1839030562|0,r=(r<<16|r>>>16)+o|0,s+=(r^o^i)+e[14]-35309556|0,s=(s<<23|s>>>9)+r|0,i+=(s^r^o)+e[1]-1530992060|0,i=(i<<4|i>>>28)+s|0,o+=(i^s^r)+e[4]+1272893353|0,o=(o<<11|o>>>21)+i|0,r+=(o^i^s)+e[7]-155497632|0,r=(r<<16|r>>>16)+o|0,s+=(r^o^i)+e[10]-1094730640|0,s=(s<<23|s>>>9)+r|0,i+=(s^r^o)+e[13]+681279174|0,i=(i<<4|i>>>28)+s|0,o+=(i^s^r)+e[0]-358537222|0,o=(o<<11|o>>>21)+i|0,r+=(o^i^s)+e[3]-722521979|0,r=(r<<16|r>>>16)+o|0,s+=(r^o^i)+e[6]+76029189|0,s=(s<<23|s>>>9)+r|0,i+=(s^r^o)+e[9]-640364487|0,i=(i<<4|i>>>28)+s|0,o+=(i^s^r)+e[12]-421815835|0,o=(o<<11|o>>>21)+i|0,r+=(o^i^s)+e[15]+530742520|0,r=(r<<16|r>>>16)+o|0,s+=(r^o^i)+e[2]-995338651|0,s=(s<<23|s>>>9)+r|0,i+=(r^(s|~o))+e[0]-198630844|0,i=(i<<6|i>>>26)+s|0,o+=(s^(i|~r))+e[7]+1126891415|0,o=(o<<10|o>>>22)+i|0,r+=(i^(o|~s))+e[14]-1416354905|0,r=(r<<15|r>>>17)+o|0,s+=(o^(r|~i))+e[5]-57434055|0,s=(s<<21|s>>>11)+r|0,i+=(r^(s|~o))+e[12]+1700485571|0,i=(i<<6|i>>>26)+s|0,o+=(s^(i|~r))+e[3]-1894986606|0,o=(o<<10|o>>>22)+i|0,r+=(i^(o|~s))+e[10]-1051523|0,r=(r<<15|r>>>17)+o|0,s+=(o^(r|~i))+e[1]-2054922799|0,s=(s<<21|s>>>11)+r|0,i+=(r^(s|~o))+e[8]+1873313359|0,i=(i<<6|i>>>26)+s|0,o+=(s^(i|~r))+e[15]-30611744|0,o=(o<<10|o>>>22)+i|0,r+=(i^(o|~s))+e[6]-1560198380|0,r=(r<<15|r>>>17)+o|0,s+=(o^(r|~i))+e[13]+1309151649|0,s=(s<<21|s>>>11)+r|0,i+=(r^(s|~o))+e[4]-145523070|0,i=(i<<6|i>>>26)+s|0,o+=(s^(i|~r))+e[11]-1120210379|0,o=(o<<10|o>>>22)+i|0,r+=(i^(o|~s))+e[2]+718787259|0,r=(r<<15|r>>>17)+o|0,s+=(o^(r|~i))+e[9]-343485551|0,s=(s<<21|s>>>11)+r|0,n[0]=i+n[0]|0,n[1]=s+n[1]|0,n[2]=r+n[2]|0,n[3]=o+n[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(Do.stateIdentity),this}appendStr(n){const e=this._buffer8,i=this._buffer32;let r,o,s=this._bufferLength;for(o=0;o<n.length;o+=1){if(r=n.charCodeAt(o),r<128)e[s++]=r;else if(r<2048)e[s++]=192+(r>>>6),e[s++]=63&r|128;else if(r<55296||r>56319)e[s++]=224+(r>>>12),e[s++]=r>>>6&63|128,e[s++]=63&r|128;else{if(r=1024*(r-55296)+(n.charCodeAt(++o)-56320)+65536,r>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");e[s++]=240+(r>>>18),e[s++]=r>>>12&63|128,e[s++]=r>>>6&63|128,e[s++]=63&r|128}s>=64&&(this._dataLength+=64,Do._md5cycle(this._state,i),s-=64,i[0]=i[16])}return this._bufferLength=s,this}appendAsciiStr(n){const e=this._buffer8,i=this._buffer32;let r,s=this._bufferLength,o=0;for(;;){for(r=Math.min(n.length-o,64-s);r--;)e[s++]=n.charCodeAt(o++);if(s<64)break;this._dataLength+=64,Do._md5cycle(this._state,i),s=0}return this._bufferLength=s,this}appendByteArray(n){const e=this._buffer8,i=this._buffer32;let r,s=this._bufferLength,o=0;for(;;){for(r=Math.min(n.length-o,64-s);r--;)e[s++]=n[o++];if(s<64)break;this._dataLength+=64,Do._md5cycle(this._state,i),s=0}return this._bufferLength=s,this}getState(){const n=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[n[0],n[1],n[2],n[3]]}}setState(n){const e=n.buffer,i=n.state,s=this._state;let r;for(this._dataLength=n.length,this._bufferLength=n.buflen,s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],r=0;r<e.length;r+=1)this._buffer8[r]=e.charCodeAt(r)}end(n=!1){const e=this._bufferLength,i=this._buffer8,s=this._buffer32,r=1+(e>>2);this._dataLength+=e;const o=8*this._dataLength;if(i[e]=128,i[e+1]=i[e+2]=i[e+3]=0,s.set(Do.buffer32Identity.subarray(r),r),e>55&&(Do._md5cycle(this._state,s),s.set(Do.buffer32Identity)),o<=4294967295)s[14]=o;else{const a=o.toString(16).match(/(.*?)(.{0,8})$/);if(null===a)return;const l=parseInt(a[2],16),c=parseInt(a[1],16)||0;s[14]=l,s[15]=c}return Do._md5cycle(this._state,s),n?this._state:Do._hex(this._state)}}if(Do.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),Do.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Do.hexChars="0123456789abcdef",Do.hexOut=[],Do.onePassHasher=new Do,"5d41402abc4b2a76b9719d911017c592"!==Do.hashStr("hello"))throw new Error("Md5 self test failed.");class dXe{constructor(n,e){this._queue=[],this._ready=!0;const i=this;Worker?(i._hashWorker=new Worker(n,e),i._hashWorker.onmessage=i._recievedMessage.bind(i),i._hashWorker.onerror=s=>{i._ready=!1,console.error("Hash worker failure",s)}):(i._ready=!1,console.error("Web Workers are not supported in this browser"))}hash(n){const e=this;let i;return i=new Promise((s,r)=>{e._queue.push({blob:n,resolve:s,reject:r}),e._processNext()}),i}terminate(){this._ready=!1,this._hashWorker.terminate()}_processNext(){this._ready&&!this._processing&&this._queue.length>0&&(this._processing=this._queue.pop(),this._hashWorker.postMessage(this._processing.blob))}_recievedMessage(n){var e,i;const s=n.data;s.success?null===(e=this._processing)||void 0===e||e.resolve(s.result):null===(i=this._processing)||void 0===i||i.reject(s.result),this._processing=void 0,this._processNext()}}function an(t,n,e,i="debug",s){if(window.debug){const o=["color: #0288D1",`color:${s||"#009688"}`,"color: default"];e?Yue()?console[i](`%c[PlaceOS]%c[${t}] %c${n}`,...o,e):console[i](`[PlaceOS][${t}] ${n}`,e):Yue()?console[i](`%c[PlaceOS]%c[${t}] %c${n}`,...o):console[i](`[PlaceOS][${t}] ${n}`)}}function Yue(){return!(document.documentMode||/Edge/.test(navigator.userAgent))}function Zue(){var t,n,e,i,s,r;const o=null!==(t=window.location)&&void 0!==t&&t.hash?null===(n=window.location)||void 0===n?void 0:n.hash.slice(1):(null===(e=window.location)||void 0===e?void 0:e.href.split("#")[1])||"";let a=null!==(i=window.location)&&void 0!==i&&i.search?null===(s=window.location)||void 0===s?void 0:s.search.slice(1):(null===(r=window.location)||void 0===r?void 0:r.href.split("?")[1])||"",l={};if(o)if(o.indexOf("?")>=0){const u=o.split("?");l=A0(u[0]),a||(a=u[1])}else l=A0(o);let c={};return a&&(c=A0(a)),Object.assign(Object.assign({},l),c)}function A0(t){const n={},e=t.split("&");for(const i of e){const s=i.split("=");s[1]&&(n[decodeURIComponent(s[0])]=decodeURIComponent(s[1]))}return n}const Que="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function Gb(t){var n,e,i,s,r;const o=((null===(n=window.location)||void 0===n?void 0:n.hash)||"").replace(new RegExp(`${t}[a-zA-Z0-9_+-.%=]*&?`,"g"),"").replace(/&&/g,"&").replace(/#&/g,"#").replace(/&$/g,"#"),a=((null===(e=window.location)||void 0===e?void 0:e.search)||"").replace(new RegExp(`${t}[a-zA-Z0-9_+-.%=]*&?`,"g"),"").replace(/&&/g,"&").replace(/\?&/g,"#").replace(/&$/g,"#");null!==(i=window.history)&&void 0!==i&&i.replaceState&&(null===(s=window.history)||void 0===s||s.replaceState(null,"",`${null===(r=window.location)||void 0===r?void 0:r.pathname}${o}${a}`))}class gXe{abort(){an("Stub","Aborted")}}function LE(t){let n="";if(t)for(const e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n+=`${n?"&":""}${e}=${encodeURIComponent(t[e])}`);return n}const jb={};function Cf(t,n,e=300){if(!(t&&n&&n instanceof Function))throw new Error(t?"Cannot create named timeout without a name":"Cannot create a timeout without a callback");Hb(t),jb[t]=setTimeout(()=>{n(),delete jb[t]},e)}function Hb(t){jb[t]&&(clearTimeout(jb[t]),delete jb[t])}const bXe={id:"mock-authority",name:"localhost:4200",description:"",domain:"localhost:4200",login_url:"/login?continue={{url}}",logout_url:"/logout",session:!0,production:!1,config:{},version:"2.0.0"};function Tn(t){const n=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===n?new t.constructor(+t):"number"==typeof t||"[object Number]"===n||"string"==typeof t||"[object String]"===n?new Date(t):new Date(NaN)}function Is(t,n){return t instanceof Date?new t.constructor(n):new Date(n)}function Wb(t,n){const e=Tn(t);if(isNaN(n))return Is(t,NaN);if(!n)return e;const i=e.getDate(),s=Is(t,e.getTime());return s.setMonth(e.getMonth()+n+1,0),i>=s.getDate()?s:(e.setFullYear(s.getFullYear(),s.getMonth(),i),e)}function O0(t,n){return Wb(t,12*n)}function pO(t,n){return Is(t,+Tn(t)+n)}Math.pow(10,8);const yXe=864e5,rz=6e4,nde=36e5;function mO(t,n){return pO(t,n*nde)}function gl(t,n){return+Tn(t)<+Tn(n)}let _r,fa,Ji={};const Ri={};let gr="",qb="";const Kb=new at(""),PE=new at("");let oz="/api/engine/v2";const Sf=new at(!1),xXe=Sf.asObservable();let _O=0;function $E(){var t,n;return`${Ji.secure||(null===(t=window.location)||void 0===t?void 0:t.protocol.indexOf("https"))>=0?"https:":"http:"}//${Ji.host||(null===(n=window.location)||void 0===n?void 0:n.host)}${rde()}`}function rde(){return"ACA Engine"===Ji.version?"/control/api":oz}function ode(){return gr}function Jm(){return bO("x-api-key",!1)||""}function Ho(t=!0){if(Ji.mock)return"mock-token";if(!_r)return"";if(Jm()&&!Ji.ignore_api_key)return"x-api-key";const n=_r.getItem(`${gr}_expires_at`)||"",e=Kb.getValue();return gl(+n,new Date)&&(an("Auth","Token expired. Requesting new token..."),vO(),Ri.load_authority||(_O+=1,Cf("re-authorise",()=>cde().catch(i=>an("Auth",`Failed to get token: ${i}`)),200*Math.min(20,_O))),!t)?"":e||_r.getItem(`${gr}_access_token`)||""}function gO(){return PE.getValue()||_r.getItem(`${gr}_refresh_token`)||""}function az(){var t;return Ji.host||(null===(t=window.location)||void 0===t?void 0:t.host)}function mc(){return fa}function BE(){return!!Ji.mock}function ade(){return xXe}function lz(){return"true"===bO("trust")||"true"===bO("trusted")}function cz(){return!!Jm()&&!Ji.ignore_api_key||"true"===bO("fixed_device")}function bO(t,n=!0){let i=Zue()[t];if(_r){const s=`${ode()}_${t}`;i=i||_r.getItem(s)||_r.getItem(t)||"",n&&_r.setItem(s,`${i}`)}return i}function lde(){return an("Auth","Refreshing authorty."),fa=void 0,uz()}function vO(){an("Auth","Invalidating tokens."),_r.removeItem(`${gr}_access_token`),_r.removeItem(`${gr}_expires_at`),Kb.getValue()&&Kb.next("")}function cde(t,n=fa){return Ri.authorise||(Ri.authorise=new Promise((e,i)=>{if(!n)return delete Ri.authorise,i("Authority is not loaded");an("Auth","Authorising user...");const s=()=>{if(Ho(!1))an("Auth","Valid token found."),delete Ri.authorise,e(Ho());else{const r=[()=>{an("Auth","Successfully generated token."),e(Ho()),delete Ri.authorise},()=>{an("Auth","Failed to generate token."),i("Failed to generate token"),setTimeout(()=>delete Ri.authorise,200)}];Ji&&"password"===Ji.auth_type?(an("Auth","Logging in with credentials."),function GXe(t){return fde(function zXe(t){return`${t.token_uri||"/auth/token"}?${LE({grant_type:"password",client_id:gr,client_secret:t.client_secret,redirect_uri:t.redirect_uri,authority:fa?.id,scope:t.scope,username:t.username,password:t.password})}`}(t))}(Ji).then(...r),_O=0):qb||gO()?(an("Auth","Generating token with "+(qb?"code":"refresh token")),pde().then(...r),_O=0):n.session?(an("Auth","Users has session. Authorising application..."),function RXe(t){return Qm(this,void 0,void 0,function*(){var n;const e=function $Xe(t){const n=function jXe(){const t=function hXe(t=40){let n="";for(let e=0;e<t;e++)n+=Que.charAt(Math.floor(Math.random()*Que.length));return n}();return _r.setItem(`${gr}_nonce`,t),t}();t=t?`${n};${t}`:n;const e=!!Ji&&(Ji.auth_uri||"").indexOf("?")>=0,i=(Ji?Ji.auth_uri:null)||"/auth/oauth/authorize",s=lz()||"auth_code"===Ji.auth_type?"code":"token";let r=`${i}${e?"&":"?"}response_type=${encodeURIComponent(s)}&client_id=${encodeURIComponent(gr)}&state=${encodeURIComponent(t)}&redirect_uri=${encodeURIComponent(Ji.redirect_uri)}&scope=${encodeURIComponent(Ji.scope)}`;if("auth_code"===Ji.auth_type){const{challenge:o,verify:a}=function BXe(t=43){const n=new Array(t).fill(0).map(()=>hde[Math.floor(Math.random()*hde.length)]).join(""),e=sz.Kp(sz.Cw(n));return{challenge:n,verify:sz.if(uXe.hash(e)).split("=")[0].replace(/\//g,"_").replace(/\+/g,"-")}}();sessionStorage.setItem(`${gr}_challenge`,o),r+="&code_challenge_method=S256",r+=`&code_challenge=${a}`}return r}(t);if(Ji.use_iframe)return function FXe(t){return Ri.iframe_auth||(Ri.iframe_auth=new Promise((n,e)=>{an("Auth","Authorizing in an iFrame...");const i=document.createElement("iframe");i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.height="1px",i.style.width="1px",i.style.zIndex="-1",i.id="place-authorize",i.src=`${t}`;const s=r=>{var o;if(r.origin===(null===(o=window.location)||void 0===o?void 0:o.origin)&&"place-os"===r.data.type){const a=r.data;if(an("Auth","Received credentials from iFrame..."),document.body.removeChild(i),Hb("iframe_auth"),window.removeEventListener("message",s),delete Ri.iframe_auth,a.token)return n(),dz(Object.assign({access_token:a.token},a));qb=a.code||"",pde().then(l=>n(l),l=>e(l))}};Cf("iframe_auth",()=>{an("Auth","Unable to resolve iFrame after 15 seconds..."),e()},15e3),window.addEventListener("message",s),i.onerror=r=>{an("Auth","iFrame error.",r),delete Ri.iframe_auth,e()},document.body.appendChild(i)})),Ri.iframe_auth}(e);null===(n=window.location)||void 0===n||n.assign(e)})}(t).then(...r)):(an("Auth","No user session"),dde(n),i("No user session"),setTimeout(()=>delete Ri.authorise,200))}};(function LXe(){return Ri.check_token||(Ri.check_token=new Promise((t,n)=>Qm(this,void 0,void 0,function*(){Ho()?(an("Auth","Valid token found."),t(Ho())):(an("Auth","No token. Checking URL for auth credentials..."),(yield function PXe(){return Ri.check_params||(Ri.check_params=new Promise(t=>{an("Auth","Checking for auth parameters...");let n=Zue();if((!n||Object.keys(n).length<=0)&&sessionStorage&&(n=JSON.parse(sessionStorage.getItem("ENGINE.auth.params")||"{}")),n&&(n.code||n.access_token||n.refresh_token)){n.code&&(qb=n.code,Gb("code")),n.refresh_token&&(_r.setItem(`${gr}_refresh_token`,n.refresh_token),Gb("refresh_token"));const e=_r.getItem(`${gr}_nonce`)||"",i=(n.state||"").split(";");Gb("state"),Gb("token_type"),e===i[0]?(dz(n),t(!!n.access_token)):t(!1)}else t(!1);Cf("check_params_promise",()=>delete Ri.check_params,50)})),Ri.check_params}())?t(!0):n()),delete Ri.check_token}))),Ri.check_token})().then(s,s)})),Ri.authorise}function uz(t=0){return Ri.load_authority||(Ri.load_authority=new Promise(n=>{var e;if(Sf.next(!1),Ji.mock)return fa=bXe,an("Auth","System in mock mode"),Sf.next(!0),void n();an("Auth",`Fixed: ${cz()} | Trusted: ${lz()}`),an("Auth","Loading authority...");const i=Ji.secure||(null===(e=window.location)||void 0===e?void 0:e.protocol.indexOf("https"))>=0,s=r=>{an("Auth",`Failed to load authority(${r})`),Sf.next(!1),Cf("load_authority",()=>{delete Ri.load_authority,uz(t).then(o=>n())},300*Math.min(20,++t))};hO(`${i?"https:":"http:"}//${az()}/auth/authority`,{credentials:"same-origin"}).subscribe(r=>Qm(this,void 0,void 0,function*(){if(!r.ok)return s(yield r.text().catch(a=>a));fa=yield r.json(),oz=/[2-9]\.[0-9]+\.[0-9]+/g.test(fa.version||"")?"/api/engine/v2":"/control/api",an("Auth","Loaded authority.",[],"group"),fa&&(an("Auth",`Name: ${fa.name}`),an("Auth",`Version: ${fa.version}`),an("Auth",`Domain: ${fa.domain}`),an("Auth",`Session: ${fa.session}`),an("Auth",`Production: ${fa.production}`),an("Auth",`Config Keys: ${Object.keys(fa.config||{}).length}`)),an("Auth","",[],"groupEnd");const o=()=>{Sf.next(!0),an("Auth","Application set online."),n()};delete Ri.load_authority,cde("").then(o,o)}),s)})),Ri.load_authority}let ude=!1;function dde(t){var n,e;if(!1!==Ji.handle_login&&!ude){an("Auth","Redirecting to login page...");const i=null===(n=t.login_url)||void 0===n?void 0:n.replace("{{url}}",encodeURIComponent(null===(e=window.location)||void 0===e?void 0:e.href));throw setTimeout(()=>{var s;return null===(s=window.location)||void 0===s?void 0:s.assign(i)},300),ude=!0,new Error("Redirecting to login page...")}an("Auth","Login being handled locally."),delete Ri.authorise}const hde="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".split("");function pde(){return fde(...function VXe(){let n=(Ji.token_uri||"/auth/token")+`?client_id=${encodeURIComponent(gr)}`,e="";if(n+=`&redirect_uri=${encodeURIComponent(Ji.redirect_uri)}`,gO()){n+=`&refresh_token=${encodeURIComponent(gO())}`,n+="&grant_type=refresh_token";const i=n.split("?");n=i[0],e=i[1]}else{n+=`&code=${encodeURIComponent(qb)}`,n+="&grant_type=authorization_code";const i=sessionStorage.getItem(`${gr}_challenge`);i&&(n+=`&code_verifier=${i}`,sessionStorage.removeItem(`${gr}_challenge`)),qb=""}return[n,e]}())}function fde(t,n=""){return Ri.generate_tokens||(Ri.generate_tokens=new Promise((e,i)=>{an("Auth","Generating new token...");const s=r=>{an("Auth","Error generating new tokens.",r),_r.removeItem(`${gr}_refresh_token`),PE.next(""),i(),delete Ri.generate_tokens};hO(t,{method:"POST",body:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).subscribe(r=>Qm(this,void 0,void 0,function*(){if(!r.ok)return s(r);dz(yield r.json()),e(),delete Ri.generate_tokens}),s)})),Ri.generate_tokens}function dz(t){const n=function SXe(t,n){return pO(t,1e3*n)}(new Date,Math.max(60,parseInt(t.expires_in,10)-300));an("Auth","Tokens generated storing..."),lz()&&(t.access_token&&(_r.setItem(`${gr}_access_token`,t.access_token),Gb("access_token")),t.refresh_token&&(_r.setItem(`${gr}_refresh_token`,t.refresh_token),Gb("refresh_token"))),t.expires_in&&(_r.setItem(`${gr}_expires_at`,`${n.valueOf()}`),Gb("expires_in")),Sf.next(!0),Kb.next(t.access_token||""),PE.next(t.refresh_token||"")}const VE={};function WXe(t,n,e,i=VE){const s=function qXe(t,n,e=VE){const s=n.replace(/(http|https)?:\/\/[a-zA-Z0-9.]*:?([0-9]*)?/g,"").replace(/^\//,"").split("?")[0].split("/"),r=Object.keys(e).reduce((o,a)=>(0===a.indexOf(`${t}|`)&&o.push(e[a]),o),[]);for(const o of r)if(o.path_structure.length===s.length){let a=!0;for(let l=0;l<o.path_structure.length;l++)if(!o.path_structure[l]&&o.path_parts[l]!==s[l]){a=!1;break}if(a)return o}return null}(t,n,i);if(s){const r=function KXe(t,n,e){const i=t.replace(/(http|https):\/\/[a-zA-Z0-9.]*:?([0-9]*)?/g,"").split("?"),s=i[0].replace(/^\//g,""),o=A0(i[1]||""),a=s.split("/"),l={};for(const u of n.path_structure)u&&(l[u]=a[n.path_structure.indexOf(u)]);const c={url:t,path:n.path,method:n.method,metadata:n.metadata,route_params:l,query_params:o,body:e};return an("HTTP(M)",`MATCHED ${c.method}:`,c),c}(n,s,e);return function XXe(t,n){const e=t.callback?t.callback(n):t.metadata,i=t.delay_variance||100,s=t.delay||300,r=Math.floor(Math.random()*i-i/2)+s;return an("HTTP(M)",`RESP ${n.method}:`,[n.url,e]),ao([e]).pipe(u0(Math.max(200,r)))}(s,r)}return null}const mde={};function Aa(t,n,e=jE){return n||(n={response_type:"json"}),e("GET",t,Object.assign({response_type:"json"},n))}function Xb(t,n,e,i=jE){return e||(e={response_type:"json"}),i("POST",t,Object.assign({body:n,response_type:"json"},e))}function zE(t,n,e,i=jE){return e||(e={response_type:"json"}),i("PUT",t,Object.assign({body:n,response_type:"json"},e))}function UE(t,n,e,i=jE){return e||(e={response_type:"json"}),i("PATCH",t,Object.assign({body:n,response_type:"json"},e))}function GE(t,n,e=jE){return n||(n={response_type:"void"}),e("DELETE",t,Object.assign({response_type:"void"},n))}function ZXe(t,n){return Qm(this,arguments,void 0,function*(e,i,s=mde){if(e.headers){const r={};e.headers.forEach?e.headers.forEach((o,a)=>r[a.toLowerCase()]=o):Object.keys(e.headers).forEach(o=>r[o.toLowerCase()]=e.headers[o]),s[e.url||""]=r}switch(i){case"json":return yield e.json().catch(()=>({}));case"text":return yield e.text()}})}const _de=()=>{vO(),lde().then(()=>null,()=>setTimeout(()=>_de(),1e3))};function jE(t,n,e,i=BE,s=WXe,r=ZXe){if(i()){const o=s(t,n,e?.body);if(o)return o}return e.headers=e.headers||{},e.headers["Content-Type"]="application/json",function DXe(){return Kb.pipe(me(t=>!!function kXe(){return!!Ho()}()))}().pipe(Zt(o=>o),Zn(1),Kt(o=>("x-api-key"===Ho()?e.headers["X-API-Key"]=Jm():e.headers.Authorization=`Bearer ${Ho()}`,hO(n,Object.assign(Object.assign({},e),{body:JSON.stringify(e.body),method:t,credentials:"same-origin"})))),Kt(o=>o.ok?r(o,e.response_type):zm(o)),function aXe(t){return n=>n.lift(new lXe(t,n))}(o=>o.pipe(ml((a,l)=>511===a.status?(dde(mc()),Ge(a)):l+1>4||401!==a.status?zm(a||{}):(an("HTTP","Auth error",a),_de(),Ge(a))))))}let pz={},fz={},yO="";const wO=t=>t;function R0(t){const{query_params:n,fn:e,path:i,endpoint:s}=t,r=LE(n),o=`${s||$E()}${i?"/"+i:""}${r?"?"+r:""}`;return Aa(o).pipe(me(a=>{const l=function JXe(t,n,e){const i=function YXe(t,n=mde){return n[t]||{}}("/"===t[0]?`${location.origin}${t}`:t),s={total:0,next:null};if(i&&i["x-total-count"]){const r=+(i["x-total-count"]||0);(n.length<2||n.length<12&&n.indexOf("offset=")>=0)&&(pz[e]=r),fz[e]=r,s.total=r}return i&&i.link&&(yO=function pXe(t){if(0===t.length)throw new Error("Input must not be of zero length");const n=t.split(","),e={};for(const i of n){const s=i.split(";");if(2!==s.length)throw new Error("Section could not be split on ';'");const r=s[0].replace(/<(.*)>/,"$1").trim();e[s[1].replace(/rel="(.*)"/,"$1").trim()]=r}return e}(i.link||"").next,s.next=A0(yO.split("?")[1])),s}(o,r,i);return{total:l.total||0,next:l.next?()=>R0({query_params:l.next,fn:e,endpoint:s,path:i}):null,data:a&&a instanceof Array?a.map(c=>(e||wO)(c)):!a||a instanceof Array||!a.results?[]:a.results.map(c=>c)}}))}function CO(t){const{query_params:n,id:e,path:i,fn:s,options:r}=t,o=LE(n);return Aa(`${$E()}/${i}/${e}${o?"?"+o:""}`,r).pipe(me(l=>(s||wO)(l)))}function gde(t){const{id:n,query_params:e,form_data:i,method:s,path:r,fn:o}=t,a=LE(Object.assign(Object.assign({},e),{version:i.version||0}));return("put"===s?zE:UE)(`${$E()}/${r}/${n}${a?"?"+a:""}`,i).pipe(me(c=>(o||wO)(c)))}class Bl{constructor(n={}){this.id=n.id||"",this.name=n.name||"",this.created_at=n.created_at||0,this.updated_at=n.updated_at||0,this.version=n.version||0}toJSON(){const n=Object.assign({},this);return n.version=this.version,delete n.created_at,function M0(t,n){for(const e in t)t.hasOwnProperty(e)&&n.indexOf(t[e])>=0&&delete t[e];return t}(n,[void 0,null,""])}}var Yb=function(t){return t[t.None=0]="None",t[t.Support=1]="Support",t[t.Admin=2]="Admin",t[t.NeverDisplay=3]="NeverDisplay",t}(Yb||{});class KE extends Bl{get value(){return this.settings_string}constructor(n={}){super(n),this.parent_id=n.parent_id||"",this.updated_at=n.updated_at||Math.floor((new Date).getTime()/1e3),this.settings_string=n.settings_string||"",this.encryption_level=n.encryption_level||Yb.None,this.keys=n.keys||[],this.modified_by_id=n.modified_by_id||""}}var TO=function(t){return t[t.SSH=0]="SSH",t[t.Device=1]="Device",t[t.Service=2]="Service",t[t.Websocket=3]="Websocket",t[t.Logic=99]="Logic",t}(TO||{});class tYe extends Bl{constructor(n={}){var e;super(n),this.description=n.description||"",this.module_name=n.module_name||"",this.role=null!==(e=n.role)&&void 0!==e?e:TO.Logic,this.default_uri=n.default_uri||"",this.default_port=n.default_port||1,this.ignore_connected=n.ignore_connected||!1,this.class_name=n.class_name||"",this.repository_id=n.repository_id||"",this.file_name=n.file_name||"",this.commit=n.commit||"",this.update_available=n.update_available||!1,this.update_info=n.update_info,this.settings=n.settings||[null,null,null,null],"object"!=typeof this.settings&&(this.settings=[null,null,null,null]);for(const i in Yb)!isNaN(Number(i))&&!this.settings[i]&&(this.settings[i]=new KE({parent_id:this.id,encryption_level:+i}))}}class YE{constructor(n={}){this.id=n.id||n.parent_id||"",this.name=n.name||"",this.description=n.description||"";try{this.details=("string"==typeof n.details?JSON.parse(n.details):n.details)||{}}catch{this.details=n.details||{}}this.editors=n.editors||[],this.schema=n.schema||"",this.updated_at=1e3*(n.updated_at||0)||Date.now(),this.modified_by_id=n.modified_by_id||"",this.version=n.version||0}}class nYe extends Bl{get system_id(){return this.control_system_id}get actions(){const n=this._actions;return{functions:(n.functions||[]).map(s=>Object.assign(Object.assign({},s),{args:Object.assign({},s.args)})),mailers:(n.mailers||[]).map(s=>Object.assign(Object.assign({},s),{emails:[...s.emails]}))}}get conditions(){const n=this._conditions;return{comparisons:(n.comparisons||[]).map(s=>Object.assign(Object.assign({},s),{left:"object"==typeof s.left?Object.assign({},s.left):s.left,right:"object"==typeof s.right?Object.assign({},s.right):s.right})),time_dependents:(n.time_dependents||[]).map(s=>Object.assign({},s))}}constructor(n={}){super(n),this.description=n.description||"",this._actions=n.actions||{functions:[],mailers:[]},this._conditions=n.conditions||{comparisons:[],time_dependents:[]},this.debounce_period=n.debounce_period||0,this.important=n.important||!1,this.enabled=n.enabled||!1,this.webhook_secret=n.webhook_secret||"",this.control_system_id=n.system_id||n.control_system_id||"",this.zone_id=n.zone_id||"",this.system_name=n.system_name||(n.control_system?n.control_system.name:""),this.enable_webhook=n.enable_webhook||!1,this.exec_enabled=n.exec_enabled||!1,this.supported_methods=n.supported_methods||["POST"],this.activated_count=n.activated_count||n.trigger_count||0,this.playlists=n.playlists||[]}}class AO extends Bl{constructor(n={}){super(n),this.settings=[null,null,null,null],this.trigger_list=[],this.description=n.description||"",this.tags=n.tags||[],this.triggers=n.triggers||[],this.settings=n.settings||[null,null,null,null],this.parent_id=n.parent_id||"",this.location=n.location||"",this.display_name=n.display_name||"",this.code=n.code||"",this.type=n.type||"",this.count=n.count||0,this.capacity=n.capacity||0,this.map_id=n.map_id||"",this.timezone=n.timezone||"",this.images=n.images||[],this.playlists=n.playlists||[],"object"!=typeof this.settings&&(this.settings=[null,null,null,null]);for(const e in Yb)!isNaN(Number(e))&&!this.settings[e]&&(this.settings[e]=new KE({parent_id:this.id,encryption_level:+e}));n.trigger_data&&n.trigger_data instanceof Array&&(this.trigger_list=n.trigger_data.map(e=>new nYe(e)))}}const Qb="metadata";function ZE(t){return new YE(t)}function co(t,n,e={}){return CO({id:t,query_params:Object.assign(Object.assign({},e),{name:n}),fn:i=>ZE(i[n]),path:Qb})}class yde extends Bl{constructor(n={}){var e;super(n),this.settings=[null,null,null,null],this.module_list=[],this.display_name=n.display_name||"",this.description=n.description||"",this.email=n.email||"",this.code=n.code||"",this.capacity=n.capacity||0,this.features=n.features||[],this.bookable=n.bookable||!1,this.public=null!==(e=n.public)&&void 0!==e&&e,this.installed_ui_devices=n.installed_ui_devices||0,this.support_url=n.support_url||"",this.map_id=n.map_id||"",this.modules=n.modules||[],this.images=n.images||[],this.zones=n.zones||[],this.settings=n.settings||[null,null,null,null],this.timezone=n.timezone||"",this.signage=n.signage||!1,this.playlists=n.playlists||[],this.orientation=n.orientation||"unspecified","object"!=typeof this.settings&&(this.settings=[null,null,null,null]);for(const i in Yb)!isNaN(Number(i))&&!this.settings[i]&&(this.settings[i]=new KE({parent_id:this.id,encryption_level:+i}));n.module_data&&n.module_data instanceof Array&&(this.module_list=n.module_data.map(i=>new sYe(i)))}}class sYe extends Bl{get system_id(){return this.control_system_id}constructor(n={}){var e;super(n),this.settings=[null,null,null,null],this.driver_id=n.driver_id||n.dependency_id||"",this.control_system_id=n.control_system_id||"",this.edge_id=n.edge_id||"",this.ip=n.ip||"",this.tls=n.tls||!1,this.udp=n.udp||!1,this.port=n.port||1,this.makebreak=n.makebreak||!1,this.uri=n.uri||"",this.custom_name=n.custom_name||"",this.role=null!==(e=n.role)&&void 0!==e?e:TO.Logic,this.notes=n.notes||"",this.ignore_connected=n.ignore_connected||!1,this.connected=n.connected,this.running=n.running||!1,this.updated_at=n.updated_at||0,this.system=new yde(n.control_system||n.system),this.has_runtime_error=n.has_runtime_error||!1,this.error_timestamp=n.error_timestamp||0,this.driver=new tYe(n.dependency||n.driver),this.settings=n.settings||[null,null,null,null],"object"!=typeof this.settings&&(this.settings=[null,null,null,null]);for(const i in Yb)!isNaN(Number(i))&&!this.settings[i]&&(this.settings[i]=new KE({parent_id:this.id,encryption_level:+i}))}toJSON(n=!1){const e=super.toJSON();return(e.role!==TO.Logic&&!n||!e.control_system_id)&&delete e.control_system_id,delete e.driver,delete e.system,delete e.error_timestamp,delete e.has_runtime_error,e}}function eT(t){return new KE(t)}function rYe(t={}){return R0({query_params:t,fn:eT,path:"settings"})}const Ao="systems";function Jb(t){return new yde(t)}function tT(t={}){return R0({query_params:t,fn:Jb,path:Ao})}function Cde(t,n={}){return CO({id:t,query_params:n,fn:Jb,path:Ao})}class uYe extends Bl{constructor(n={}){super(n),this.password="",this.confirm_password="",this.authority_id=n.authority_id||"",this.email=n.email||"",this.email_digest=n.email_digest||"",this.phone=n.phone||"",this.country=n.country||"",this.building=n.building||"",this.image=n.image||"",this.metadata=n.metadata||"",this.login_name=n.login_name||"",this.staff_id=n.staff_id||"",this.first_name=n.first_name||"",this.last_name=n.last_name||"",this.support=!!n.support,this.sys_admin=!!n.sys_admin,this.ui_theme=n.ui_theme||"",this.card_number=n.card_number||"",this.groups=n.groups||[],this.department=n.department||"",this.work_preferences=n.work_preferences||[],this.work_overrides=n.work_overrides||{}}}const $0="users";function nT(t){return new uYe(t)}function _z(t={}){return R0({query_params:t,fn:nT,path:$0})}function PO(t,n={}){return CO({id:t,query_params:n,fn:nT,path:$0})}function Sde(t,n,e="patch"){return gde({id:t,form_data:n,query_params:{},method:e,fn:nT,path:$0})}function $O(t){return new AO(t)}function iT(t={}){return R0({query_params:t,fn:$O,path:"zones"})}const pYe={url:"",deserializer:t=>JSON.parse(t.data),serializer:t=>JSON.stringify(t)};class gz extends Sg{constructor(n,e){if(super(),n instanceof Pn)this.destination=e,this.source=n;else{const i=this._config=Object.assign({},pYe);if(this._output=new ot,"string"==typeof n)i.url=n;else for(let s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);if(!i.WebSocketCtor&&WebSocket)i.WebSocketCtor=WebSocket;else if(!i.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new d0}}lift(n){const e=new gz(this._config,this.destination);return e.operator=n,e.source=this,e}_resetState(){this._socket=null,this.source||(this.destination=new d0),this._output=new ot}multiplex(n,e,i){const s=this;return new Pn(r=>{try{s.next(n())}catch(a){r.error(a)}const o=s.subscribe(a=>{try{i(a)&&r.next(a)}catch(l){r.error(l)}},a=>r.error(a),()=>r.complete());return()=>{try{s.next(e())}catch(a){r.error(a)}o.unsubscribe()}})}_connectSocket(){const{WebSocketCtor:n,protocol:e,url:i,binaryType:s}=this._config,r=this._output;let o=null;try{o=e?new n(i,e):new n(i),this._socket=o,s&&(this._socket.binaryType=s)}catch(l){return void r.error(l)}const a=new rn(()=>{this._socket=null,o&&1===o.readyState&&o.close()});o.onopen=l=>{const{_socket:c}=this;if(!c)return o.close(),void this._resetState();const{openObserver:u}=this._config;u&&u.next(l);const d=this.destination;this.destination=Mi.create(h=>{if(1===o.readyState)try{const{serializer:p}=this._config;o.send(p(h))}catch(p){this.destination.error(p)}},h=>{const{closingObserver:p}=this._config;p&&p.next(void 0),h&&h.code?o.close(h.code,h.reason):r.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),this._resetState()},()=>{const{closingObserver:h}=this._config;h&&h.next(void 0),o.close(),this._resetState()}),d&&d instanceof d0&&a.add(d.subscribe(this.destination))},o.onerror=l=>{this._resetState(),r.error(l)},o.onclose=l=>{this._resetState();const{closeObserver:c}=this._config;c&&c.next(l),l.wasClean?r.complete():r.error(l)},o.onmessage=l=>{try{const{deserializer:c}=this._config;r.next(c(l))}catch(c){r.error(c)}}}_subscribe(n){const{source:e}=this;return e?e.subscribe(n):(this._socket||this._connectSocket(),this._output.subscribe(n),n.add(()=>{const{_socket:i}=this;0===this._output.observers.length&&(i&&1===i.readyState&&i.close(),this._resetState())}),n)}unsubscribe(){const{_socket:n}=this;n&&1===n.readyState&&n.close(),this._resetState(),super.unsubscribe()}}function Tde(t){return new gz(t)}var Jh=function(t){return t[t.PARSE_ERROR=0]="PARSE_ERROR",t[t.BAD_REQUEST=1]="BAD_REQUEST",t[t.ACCESS_DENIED=2]="ACCESS_DENIED",t[t.REQUEST_FAILED=3]="REQUEST_FAILED",t[t.UNKNOWN_CMD=4]="UNKNOWN_CMD",t[t.SYS_NOT_FOUND=5]="SYS_NOT_FOUND",t[t.MOD_NOT_FOUND=6]="MOD_NOT_FOUND",t[t.UNEXPECTED_FAILURE=7]="UNEXPECTED_FAILURE",t}(Jh||{}),Ide=function(t){return t.Info="info",t.Debug="debug",t.Warning="warn",t.Error="error",t.Fatal="fatal",t.Trace="trace",t}(Ide||{});const zO={},kde=15;let Na,B0=0,Dde=0;const ma={},V0={},Qd={},UO={},xf=new at(!1);Qd._place_os_status=xf.asObservable();const Ade=new at([0,0]);Qd._place_os_sync=Ade.asObservable();let tv,lT,Mde=Date.now(),GO=0,t_=null,bz=0;const cT=1e4,Nde=new ot;function vz(){return $E().indexOf("/control/")>=0?"/control/websocket":`${rde()}/systems/control`}function Ode(){return xf.getValue()}function Rde(t,n=0,e=z0){return e(Object.assign({id:++B0,cmd:"bind"},t),n)}function z0(t,n=cT,e=0){const i=`${t.cmd}|${t.sys}|${t.mod}${t.index}|${t.name}|${t.args}|${function _Xe(t=Date.now(),n=6e4){return Math.floor(t/n)}()}`;if(ma[i])an("WS","Request already in progress. Waiting...",t);else{const s=Object.assign(Object.assign({},t),{key:i});s.promise=new Promise((r,o)=>{const a=()=>{delete ma[i],ma[i]=null,z0(t,n,e).then(l=>r(l),l=>o(l))};if(Na&&Ode()){BE()&&function IYe(t,n,e){const i=`${t.sys}|${t.mod}_${t.index}|${t.name}`,s=function mYe(t){return zO[t]}(t.sys),r=s&&s[t.mod]?s[t.mod][t.index-1||0]:null;if(r){switch(t.cmd){case"bind":e[i]=r.listen(t.name).subscribe(o=>{setTimeout(()=>{n.next({type:"notify",value:o,meta:t})},Math.floor(100*Math.random()+50))});break;case"unbind":e[i]&&(e[i].unsubscribe(),delete e[i],Hb(`${i}`))}Cf(`${t.id}-response`,()=>{const o={id:t.id,type:"success",value:"exec"===t.cmd?r.call(t.name,t.args):null};n.next(o)},10)}else Cf(`${t.id}-error`,()=>n.next({id:t.id,type:"error",code:s?Jh.SYS_NOT_FOUND:Jh.MOD_NOT_FOUND}),10)}(t,Na,UO),s.resolve=r,s.reject=o;const l=`${t.sys}, ${t.mod}_${t.index}, ${t.name}`;an("WS",`[${t.cmd.toUpperCase()}](${t.id}) ${l}`,t.args),Na.next(t),n>0&&Cf(`${i}`,()=>{o("Request timed out."),delete ma[i],ma[i]=null},n)}else t_?setTimeout(()=>a(),1e3):yz().then(()=>a())}),ma[i]=s}return ma[i].promise}function Fde(t){if("pong"!==t&&t instanceof Object){if("notify"===t.type&&t.meta)!function SYe(t,n,e=V0,i=Qd){const s=`${t.sys}|${t.mod}_${t.index}|${t.name}`;e[s]||(e[s]=new at(null),i[s]=e[s].asObservable());an("WS",`[NOTIFY] ${`${t.sys}, ${t.mod}_${t.index}, ${t.name}`} changed`,[e[s].getValue(),"\u2192",n]),e[s].next(n)}(t.meta,t.value);else if("success"===t.type)!function wYe(t){const n=Object.keys(ma).map(e=>ma[e]).find(e=>e?.id===t.id);an("WS",`[SUCCESS](${t.id})`),n&&n.resolve&&(n.resolve(t.value),delete ma[n.key])}(t);else if("debug"===t.type){an("WS",`[DEBUG] ${t.mod}${t.klass||""} \u2192`,t.msg);const n=t.meta||{mod:"",index:""};Nde.next({mod_id:t.mod||"<empty>",module:`${n.mod}_${n.index}`,class_name:t.klass||"<empty>",message:t.msg||"<empty>",level:t.level||Ide.Debug,time:Math.floor((new Date).getTime()/1e3)})}else"error"===t.type?function CYe(t){let n="UNEXPECTED FAILURE";switch(t.code){case Jh.ACCESS_DENIED:n="ACCESS DENIED";break;case Jh.BAD_REQUEST:n="BAD REQUEST";break;case Jh.MOD_NOT_FOUND:n="MODULE NOT FOUND";break;case Jh.SYS_NOT_FOUND:n="SYSTEM NOT FOUND";break;case Jh.PARSE_ERROR:n="PARSE ERROR";break;case Jh.REQUEST_FAILED:n="REQUEST FAILED";break;case Jh.UNKNOWN_CMD:n="UNKNOWN COMMAND"}an("WS",`[ERROR] ${n}(${t.id}): ${t.msg}`,void 0,"error");const e=Object.keys(ma).map(i=>ma[i]).filter(i=>i).find(i=>i.id===t.id);e&&e.reject&&(e.reject(t),Hb(`${e.key}`),delete ma[e.key])}(t):t.cmd||an("WS","Invalid websocket message",t,"error");Hb(`${t.id}`)}else"pong"===t&&(bz=Date.now(),an("WS","Pong!"))}function yz(t=0){return null==t_&&(t_=new Promise(n=>{if(t>40)return location.reload();GO++,Mde=Date.now(),Na=BE()?function TYe(){const t=new ot;return t.subscribe(n=>Fde(n)),t}():function xYe(){if(!mc()||!Ho())return null;const t=function MXe(){return!!Ji.secure}()||location.protocol.indexOf("https")>=0;let n=`ws${t?"s":""}://${az()}${vz()}${cz()?"?fixed_device=true":""}`;const e=Ho();let i="x-api-key"===e?`api-key=${Jm()}`:`bearer_token=${e}`;return function EXe(){return!!Ji.token_header}()||function fXe(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}()?(an("WS","Authenticating through URL query parameter..."),n+=`${n.indexOf("?")>=0?"&":"?"}${i}`):(an("WS","Authenticating through cookie..."),i+=`;max-age=120;path=${vz()};`,i+=(t?"secure;":"")+"samesite=strict",document.cookie=i,an("WS","Cookies:",[document.cookie,i])),an("WS",`Creating websocket connection to ws${t?"s":""}://${az()}${vz()}`),Tde({url:n,serializer:s=>"object"==typeof s?JSON.stringify(s):s,deserializer:s=>{let r=s.data;if("pong"===r)return r;try{return JSON.parse(s.data)}catch{return r}}})}(),Na?(an("WS(Debug)","Authority:",[mc()]),an("WS","Connecting to websocket..."),Na.subscribe(e=>{xf.getValue()||(an("WS","Connection established."),n()),xf.next(!0),GO=0,wz(),Fde(e)},e=>{Na=void 0,t_=null,Pde(),wz(),function EYe(t){xf.next(!1),an("WS","Websocket error:",t,void 0,"error"),401===t.status&&vO(),lde(),jO()}(e)},()=>{Na=void 0,t_=null,Pde(),an("WS","Connection closed by browser."),xf.next(!1),jO()}),tv&&clearInterval(tv),bz=Date.now(),Lde(),tv=setInterval(()=>Lde(),1e3*kde),wz(),Dde+=1,lT=setTimeout(()=>{an("WS","Unhealthy connection. Reconnecting..."),xf.next(!1),t_=null,jO()},3e4)):(Na?an("WS",`Waiting on auth(${t}). Retrying in ${1e3*Math.min(10,t+1)}ms...`,[!!Ho(),!!mc()],"info"):an("WS",`Failed to create websocket(${t}). Retrying in ${1e3*Math.min(10,t+1)}ms...`,void 0,"error"),setTimeout(()=>{t_=null,yz(t).then(e=>n(e))},1e3*Math.min(10,++t)))})),t_}function jO(){Ade.next([Dde,Date.now()-Mde]),Na&&Ode()&&(Na.complete(),tv&&(clearInterval(tv),tv=void 0)),an("WS",`Reconnecting in ${Math.min(5e3,300*GO||1e3)}ms...`),Cf("reconnect",()=>yz(),Math.min(5e3,300*(GO+1)||1e3))}function Lde(){if(Date.now()-bz>4*kde*1e3)return jO();Na?.next("ping")}function wz(){lT&&(clearTimeout(lT),lT=void 0)}function Pde(){for(const t in ma)ma[t]&&delete ma[t]}Qd._place_os_debug_events=Nde.asObservable();var Jd=function(t){return t[t.NONE=0]="NONE",t[t.BIND=1]="BIND",t[t.UNBIND=2]="UNBIND",t}(Jd||{});class kYe{constructor(n,e){this._module=n,this._pending=Jd.NONE,this._binding_count=0,this._stale_bindings=0,this.name=e,function _Ye(){return Qd._place_os_status}().pipe(Tb()).subscribe(i=>{i&&(this._stale_bindings||this._pending===Jd.BIND)?(an("VAR","Re-binding to status variable",this.binding()),this.rebind()):i||(Hb(`rebind:${JSON.stringify(this.binding())}`),an("VAR","Binding dropped due to disconnection, re-binding when possible.",this.binding()),this._stale_bindings=this._binding_count||this._stale_bindings,this._binding_count=0)})}get count(){return this._binding_count}get value(){return function bYe(t,n=V0){const e=`${t.sys}|${t.mod}_${t.index}|${t.name}`;if(n[e])return n[e].getValue()}(this.binding())}listen(){return function gYe(t,n=V0,e=Qd){const i=`${t.sys}|${t.mod}_${t.index}|${t.name}`;return n[i]||(n[i]=new at(void 0),e[i]=n[i].asObservable()),e[i]}(this.binding())}bind(){return(this._binding_count<=0&&this._stale_bindings<=0||this._pending===Jd.UNBIND)&&(this._pending=Jd.BIND,Rde(this.binding()).then(()=>{this._binding_count++,this._pending=Jd.NONE}).catch(()=>null)),()=>this.unbind()}unbind(){1===this._binding_count&&this._pending===Jd.NONE?(this._pending=Jd.UNBIND,function vYe(t,n=0,e=z0){return e(Object.assign({id:++B0,cmd:"unbind"},t),n)}(this.binding()).then(()=>{this._pending===Jd.UNBIND&&(this._pending=Jd.NONE),this._binding_count--})):this._binding_count=Math.max(this._binding_count-1,0)}rebind(){return Qm(this,void 0,void 0,function*(){!this._stale_bindings&&this._pending!==Jd.BIND||Cf(`rebind:${JSON.stringify(this.binding())}`,()=>Qm(this,void 0,void 0,function*(){yield Rde(this.binding()),this._binding_count=this._stale_bindings||1,this._stale_bindings=0}),100)})}binding(){return{sys:this._module.system.id,mod:this._module.name,index:this._module.index,name:this.name}}}class DYe{constructor(n,e){this._system=n,this._id=e,this._bindings={}}get id(){return`${this.name}_${this.index}`}get system(){return this._system}get index(){const e=this._id.split("_").pop();return parseInt(e||"",10)||1}get name(){const n=this._id.split("_");return n.pop(),n.join("_")}binding(n){return this._bindings[n]||(this._bindings[n]=new kYe(this,n)),this._bindings[n]}execute(n,e,i=cT){return function yYe(t,n=cT,e=z0){return e(Object.assign({id:++B0,cmd:"exec"},t),n)}({sys:this._system.id,mod:this.name,index:this.index,name:n,args:e},i)}}class AYe{constructor(n){this._module_list={},this.id=n}module(n,e=1){if(!n)throw new Error("Invalid module ID");const i=n.split("_");i.length>1&&Number.isInteger(+i[i.length-1])&&(e=+i[i.length-1],i.pop()),e<1&&(e=1);const s=i.join("_");for(this._module_list[s]||(this._module_list[s]=[]);this._module_list[s].length<e;)this._module_list[s].push(new DYe(this,`${s}_${this._module_list[s].length+1}`));return this._module_list[s][e-1]}}const Cz={};function Qr(t,n,e=1){return function MYe(t){return Cz[t]||(Cz[t]=new AYe(t)),Cz[t]}(t).module(n,e)}let hn=(()=>{class t{constructor(){this._timers={},this._intervals={},this._subscriptions={},this._initialised=new at(!1),this.initialised=this._initialised.asObservable()}get is_initialised(){return this._initialised.getValue()}ngOnDestroy(){this.destroy()}destroy(){for(const e in this._timers)e in this._timers&&this.clearTimeout(e);for(const e in this._intervals)e in this._intervals&&this.clearInterval(e);for(const e in this._subscriptions)e in this._subscriptions&&this.unsub(e)}timeout(e,i,s=300){if(!(e&&i&&i instanceof Function))throw new Error(e?"Cannot create named timeout without a name":"Cannot create a timeout without a callback");this.clearTimeout(e),this._timers[e]=setTimeout(()=>{i(),delete this._timers[e]},s)}clearTimeout(e){this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e])}interval(e,i,s=300){if(!(e&&i&&i instanceof Function))throw new Error(e?"Cannot create named interval without a name":"Cannot create a interval without a callback");this.clearInterval(e),this._intervals[e]=setInterval(()=>i(),s)}clearInterval(e){this._intervals[e]&&(clearInterval(this._intervals[e]),delete this._intervals[e])}subscription(e,i){this.unsub(e),this._subscriptions[e]=i}hasSubscription(e){return this._subscriptions[e]instanceof rn||!!this._subscriptions[e]}unsub(e){e in this._subscriptions&&(this._subscriptions[e]instanceof rn?this._subscriptions[e].unsubscribe():this._subscriptions[e]&&this._subscriptions[e](),delete this._subscriptions[e])}unsubWith(e){const i=Object.keys(this._subscriptions).filter(s=>s.includes(e));for(const s of i)this.unsub(s)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),uT=(()=>{class t{constructor(e){this.sanitizer=e}transform(e,i="html"){switch(i){case"resource":return this.sanitizer.bypassSecurityTrustResourceUrl(e);case"url":return this.sanitizer.bypassSecurityTrustUrl(e);case"script":return this.sanitizer.bypassSecurityTrustScript(e);case"style":return this.sanitizer.bypassSecurityTrustStyle(e);default:return this.sanitizer.bypassSecurityTrustHtml(e)}}static#e=this.\u0275fac=function(i){return new(i||t)(I(oB,16))};static#t=this.\u0275pipe=nr({name:"safe",type:t,pure:!0})}return t})();const NYe=["*"];function OYe(t,n){if(1&t&&(m(0,"i"),S(1),en(2),_()),2&t){const e=E();$o((null==e.icon?null:e.icon.class)||e.className),b(),K(" ",null==e.icon?null:e.icon.content," ")}}function RYe(t,n){1&t&&(q(0,"img",3),H(1,"safe")),2&t&&C("src",At(1,1,E().icon.src,"resource"),qa)}let St=(()=>{class t{constructor(){this.className="material-icons"}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Se({type:t,selectors:[["app-icon"],["icon"]],inputs:{className:"className",icon:"icon"},ngContentSelectors:NYe,decls:3,vars:2,consts:[[1,"flex","items-center","justify-center","h-[1.25em]","w-[1.25em]"],[3,"class",4,"ngIf"],["class","h-[1em] w-[1em]",3,"src",4,"ngIf"],[1,"h-[1em]","w-[1em]",3,"src"]],template:function(i,s){1&i&&(Si(),m(0,"div",0),O(1,OYe,3,3,"i",1)(2,RYe,2,4,"img",2),_()),2&i&&(b(),C("ngIf",!s.icon||"img"!==s.icon.type),b(),C("ngIf",s.icon&&"img"===s.icon.type))},dependencies:[mt,uT],styles:["i[_ngcontent-%COMP%]{font-size:1em}"]})}return t})(),Bde="APP";function Vde(t){Bde=t}function ji(t,n,e,i="debug",s=!1,r=Bde){if(!window.jest&&(window.debug||s)){const o=["color: #E91E63","color: #3F51B5","color: default"];e?console[i](`%c[${r}]%c[${t}] %c${n}`,...o,e):console[i](`%c[${r}]%c[${t}] %c${n}`,...o)}}function U0(t,n=2,e="0"){let i=`${t}`;for(;i.length<n;)i=`${e}${i}`;return i}function nv(t,n){const e=t[0];return n&&e in n?t.length>1?nv(t.slice(1),n[e]||{}):n[e]:null}function Ss(t=[],n=""){const e=[];return t.filter(i=>{const s=n?i[n]:i,r=e.includes(s);return r||e.push(s),!r})}function n_(t,n=0){return Math.floor(Math.random()*(t-n))+n}function iv(t,n="abcdefghijklmnopqrstwvxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"){let e="";for(let i=0;i<t;i++)e+=n[n_(n.length)];return e}function Mo(t){const n=[...t],e=[];for(;n.length;){const i=n.pop();Array.isArray(i)?n.push(...i):e.push(i)}return e.reverse()}const UYe=function jYe(t){let n=1779033703^t.length;for(let e=0;e<t.length;e++)n=Math.imul(n^t.charCodeAt(e),3432918353),n=n<<13|n>>>19;return function(){return n=Math.imul(n^n>>>16,2246822507),n=Math.imul(n^n>>>13,3266489909),(n^=n>>>16)>>>0}}("PlaceOS");function dT(t,n=""){let e=[];for(const i in t.controls)t.controls[i]instanceof Rl?e=[...e,...dT(t.controls[i],`${i}.`)]:t.controls[i].valid||e.push(`${n}${i}`);return e}function zde(t){for(const n in t)(null==t[n]||""===t[n])&&delete t[n]}function HO(t){return t*(Math.PI/180)}UYe();let Gde=(()=>{class t{constructor(e){this.title=e,this.enabled=!0,this.app_name="GA_APP",this.timers={}}init(e=""){window.gtag||(window.dataLayer=window.dataLayer||[],function(i,s,r,o,a){i[o]=i[o]||[],i[o].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var l=s.getElementsByTagName(r)[0],c=s.createElement(r);c.async=!0,c.src="https://www.googletagmanager.com/gtm.js?id="+a,l.parentNode.insertBefore(c,l)}(window,document,"script","dataLayer",e),ji("Analytics","Service","Injected Google Analytics into page")),this.service=window.gtag}push(e){window.dataLayer.push(e)}load(e){if(!this.enabled)throw new Error("Google Analytics needs to be enabled before being initialised");if(!this.service)throw new Error("Google Analytics hasn't been installed on this page");ji("Analytics","Service",`Setup with tracking ID: ${e}`),this.page("")}setUser(e){if(!this.service)throw new Error("Google Analytics hasn't been installed on this page");this.enabled&&this.timeout(`user|${e}`,()=>{ji("Analytics","Service",`Set user ID: ${e}`),this.service("set","userId",e),this.event("authentication","user-id available")},100)}send(e,i){if(!this.service)throw new Error("Google Analytics hasn't been installed on this page");this.enabled&&this.timeout(`end|${e}`,()=>{this.push({...i,event:"event"})})}event(e,i,s,r){if(!this.service)throw new Error("Google Analytics hasn't been installed on this page");this.enabled&&this.timeout(`event|${e}|${i}|${s}|${r}`,()=>{ji("Analytics","Service",`Event: ${e}, ${i}${s?", "+s:""}${r?", "+r:""}`),this.push({event:"event",category:e,action:i,label:s})},100)}screen(e,i){if(!this.service)throw new Error("Google Analytics hasn't been installed on this page");e&&this.enabled&&this.timeout(`event|${e}|${i||this.app_name}`,()=>{ji("Analytics","Service",`Screen: ${e}${i?", "+i:""}`),this.push({event:"screenview",appName:i||this.app_name,screenName:e})},100)}page(e,i=!1){if(!this.service)throw new Error("Google Analytics hasn't been installed on this page");this.enabled&&(this.last_route=e||"/",this.timeout(`page|${e}`,()=>{ji("Analytics","Service",`Page: ${e}`),this.push({event:"pageview",url:`${i?location.origin:""}${e}`})},100))}timing(e,i,s,r){if(!this.service)throw new Error("Google Analytics hasn't been installed on this page");this.enabled&&this.timeout(`page|${e}|${i}|${s}|${r}`,()=>{ji("Analytics","Service",`Timing: ${e}, ${i}, ${s}${r?", "+r:""}`),this.push({event:"timing",category:e,variable:i,value:s,label:r})},100)}timeout(e,i,s=300){this.timers[e]&&(clearTimeout(this.timers[e]),delete this.timers[e]),this.timers[e]=setTimeout(()=>{i instanceof Function&&i(),delete this.timers[e]},s)}static#e=this.\u0275fac=function(i){return new(i||t)(ae(rB))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const JYe=["control","shift","alt","meta","os"];let jde=(()=>{class t{constructor(){this.keydown_states={},this.keydown_observers={},this.combo_end=[],this.registered_combos=[],this.counter=0,window.addEventListener("keydown",e=>{const i=this.mapKey((e.code||"").toLowerCase());this.last_down!==i&&(this.keydown_states[i]||(this.keydown_states[i]=new at(null),this.keydown_observers[i]=this.keydown_states[i].asObservable()),this.keydown_states[i].next(++this.counter),this.combo_end.indexOf(i)>=0&&e.preventDefault(),this.last_down=i)}),window.addEventListener("keyup",e=>{const i=this.mapKey((e.code||"").toLowerCase());this.keydown_states[i]?.next(null),this.last_down===i&&(this.last_down=null)})}listen(e,i){const s=(e=e instanceof Array?e:e.split("+")).map(r=>this.mapKey(r.toLowerCase()));if(s.length>0&&this.validCombination(s)){this.registered_combos.push(s);const r=s[s.length-1];return this.keydown_states[r]||(this.keydown_states[r]=new at(null),this.keydown_observers[r]=this.keydown_states[r].asObservable()),this.updateCombinationEndList(),this.keydown_observers[r].subscribe(o=>{if(o){const a=[];if(s.length>0){for(const c of s){const u=this.keydown_states[c];a.push(u&&u.getValue()||-1)}for(let c=0;c<s.length-1;c++)if(a[c]>a[c+1])return}a.reduce((c,u)=>c+(u>0?1:-1),0)>=s.length&&i()}})}return null}mapKey(e){return e.indexOf("alt")>=0||e.indexOf("shift")>=0||e.indexOf("control")>=0?e.replace("left","").replace("right",""):e}updateCombinationEndList(){for(const i of this.registered_combos)this.combo_end.push(i[i.length-1]);this.combo_end=Ss([])}validCombination(e){let i=0;for(const s of e)JYe.indexOf(s)<0&&i++;return i>0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ei(t){const n=Tn(t);return n.setHours(0,0,0,0),n}function eh(t,n){return+Ei(t)==+Ei(n)}const eZe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function xz(t){return(n={})=>{const e=n.width?String(n.width):t.defaultWidth;return t.formats[e]||t.formats[t.defaultWidth]}}const rZe={date:xz({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:xz({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:xz({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},oZe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function hT(t){return(n,e)=>{let s;if("formatting"===(e?.context?String(e.context):"standalone")&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=e?.width?String(e.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=e?.width?String(e.width):t.defaultWidth;s=t.values[a]||t.values[o]}return s[t.argumentCallback?t.argumentCallback(n):n]}}const fZe={ordinalNumber:(t,n)=>{const e=Number(t),i=e%100;if(i>20||i<10)switch(i%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},era:hT({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:hT({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:t=>t-1}),month:hT({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:hT({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:hT({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function pT(t){return(n,e={})=>{const i=e.width,r=n.match(i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth]);if(!r)return null;const o=r[0],a=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?function _Ze(t,n){for(let e=0;e<t.length;e++)if(n(t[e]))return e}(a,d=>d.test(o)):function mZe(t,n){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&n(t[e]))return e}(a,d=>d.test(o));let c;return c=t.valueCallback?t.valueCallback(l):l,c=e.valueCallback?e.valueCallback(c):c,{value:c,rest:n.slice(o.length)}}}const AZe={ordinalNumber:function gZe(t){return(n,e={})=>{const i=n.match(t.matchPattern);if(!i)return null;const s=i[0],r=n.match(t.parsePattern);if(!r)return null;let o=t.valueCallback?t.valueCallback(r[0]):r[0];return o=e.valueCallback?e.valueCallback(o):o,{value:o,rest:n.slice(s.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:t=>parseInt(t,10)}),era:pT({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:pT({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:t=>t+1}),month:pT({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:pT({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:pT({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},WO={code:"en-US",formatDistance:(t,n,e)=>{let i;const s=eZe[t];return i="string"==typeof s?s:1===n?s.one:s.other.replace("{{count}}",n.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+i:i+" ago":i},formatLong:rZe,formatRelative:(t,n,e,i)=>oZe[t],localize:fZe,match:AZe,options:{weekStartsOn:0,firstWeekContainsDate:1}};let Hde={};function i_(){return Hde}function G0(t){const n=Tn(t),e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),+t-+e}function Wde(t,n){const e=Ei(t),i=Ei(n),s=+e-G0(e),r=+i-G0(i);return Math.round((s-r)/yXe)}function zu(t,n){const e=i_(),i=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,s=Tn(t),r=s.getDay(),o=(r<i?7:0)+r-i;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function j0(t){return zu(t,{weekStartsOn:1})}function qde(t){const n=Tn(t),e=n.getFullYear(),i=Is(t,0);i.setFullYear(e+1,0,4),i.setHours(0,0,0,0);const s=j0(i),r=Is(t,0);r.setFullYear(e,0,4),r.setHours(0,0,0,0);const o=j0(r);return n.getTime()>=s.getTime()?e+1:n.getTime()>=o.getTime()?e:e-1}function Kde(t){const n=Tn(t),e=+j0(n)-+function OZe(t){const n=qde(t),e=Is(t,0);return e.setFullYear(n,0,4),e.setHours(0,0,0,0),j0(e)}(n);return Math.round(e/6048e5)+1}function Ez(t,n){const e=Tn(t),i=e.getFullYear(),s=i_(),r=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=Is(t,0);o.setFullYear(i+1,0,r),o.setHours(0,0,0,0);const a=zu(o,n),l=Is(t,0);l.setFullYear(i,0,r),l.setHours(0,0,0,0);const c=zu(l,n);return e.getTime()>=a.getTime()?i+1:e.getTime()>=c.getTime()?i:i-1}function Xde(t,n){const e=Tn(t),i=+zu(e,n)-+function RZe(t,n){const e=i_(),i=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,s=Ez(t,n),r=Is(t,0);return r.setFullYear(s,0,i),r.setHours(0,0,0,0),zu(r,n)}(e,n);return Math.round(i/6048e5)+1}function Qs(t,n){return(t<0?"-":"")+Math.abs(t).toString().padStart(n,"0")}const s_={y(t,n){const e=t.getFullYear(),i=e>0?e:1-e;return Qs("yy"===n?i%100:i,n.length)},M(t,n){const e=t.getMonth();return"M"===n?String(e+1):Qs(e+1,2)},d:(t,n)=>Qs(t.getDate(),n.length),a(t,n){const e=t.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];default:return"am"===e?"a.m.":"p.m."}},h:(t,n)=>Qs(t.getHours()%12||12,n.length),H:(t,n)=>Qs(t.getHours(),n.length),m:(t,n)=>Qs(t.getMinutes(),n.length),s:(t,n)=>Qs(t.getSeconds(),n.length),S(t,n){const e=n.length,i=t.getMilliseconds();return Qs(Math.trunc(i*Math.pow(10,e-3)),n.length)}},Yde={G:function(t,n,e){const i=t.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return e.era(i,{width:"abbreviated"});case"GGGGG":return e.era(i,{width:"narrow"});default:return e.era(i,{width:"wide"})}},y:function(t,n,e){if("yo"===n){const i=t.getFullYear();return e.ordinalNumber(i>0?i:1-i,{unit:"year"})}return s_.y(t,n)},Y:function(t,n,e,i){const s=Ez(t,i),r=s>0?s:1-s;return"YY"===n?Qs(r%100,2):"Yo"===n?e.ordinalNumber(r,{unit:"year"}):Qs(r,n.length)},R:function(t,n){return Qs(qde(t),n.length)},u:function(t,n){return Qs(t.getFullYear(),n.length)},Q:function(t,n,e){const i=Math.ceil((t.getMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return Qs(i,2);case"Qo":return e.ordinalNumber(i,{unit:"quarter"});case"QQQ":return e.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(i,{width:"narrow",context:"formatting"});default:return e.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,n,e){const i=Math.ceil((t.getMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return Qs(i,2);case"qo":return e.ordinalNumber(i,{unit:"quarter"});case"qqq":return e.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(i,{width:"narrow",context:"standalone"});default:return e.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,n,e){const i=t.getMonth();switch(n){case"M":case"MM":return s_.M(t,n);case"Mo":return e.ordinalNumber(i+1,{unit:"month"});case"MMM":return e.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(i,{width:"narrow",context:"formatting"});default:return e.month(i,{width:"wide",context:"formatting"})}},L:function(t,n,e){const i=t.getMonth();switch(n){case"L":return String(i+1);case"LL":return Qs(i+1,2);case"Lo":return e.ordinalNumber(i+1,{unit:"month"});case"LLL":return e.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(i,{width:"narrow",context:"standalone"});default:return e.month(i,{width:"wide",context:"standalone"})}},w:function(t,n,e,i){const s=Xde(t,i);return"wo"===n?e.ordinalNumber(s,{unit:"week"}):Qs(s,n.length)},I:function(t,n,e){const i=Kde(t);return"Io"===n?e.ordinalNumber(i,{unit:"week"}):Qs(i,n.length)},d:function(t,n,e){return"do"===n?e.ordinalNumber(t.getDate(),{unit:"date"}):s_.d(t,n)},D:function(t,n,e){const i=function NZe(t){const n=Tn(t);return Wde(n,function MZe(t){const n=Tn(t),e=Is(t,0);return e.setFullYear(n.getFullYear(),0,1),e.setHours(0,0,0,0),e}(n))+1}(t);return"Do"===n?e.ordinalNumber(i,{unit:"dayOfYear"}):Qs(i,n.length)},E:function(t,n,e){const i=t.getDay();switch(n){case"E":case"EE":case"EEE":return e.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(i,{width:"short",context:"formatting"});default:return e.day(i,{width:"wide",context:"formatting"})}},e:function(t,n,e,i){const s=t.getDay(),r=(s-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(r);case"ee":return Qs(r,2);case"eo":return e.ordinalNumber(r,{unit:"day"});case"eee":return e.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(s,{width:"short",context:"formatting"});default:return e.day(s,{width:"wide",context:"formatting"})}},c:function(t,n,e,i){const s=t.getDay(),r=(s-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(r);case"cc":return Qs(r,n.length);case"co":return e.ordinalNumber(r,{unit:"day"});case"ccc":return e.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(s,{width:"narrow",context:"standalone"});case"cccccc":return e.day(s,{width:"short",context:"standalone"});default:return e.day(s,{width:"wide",context:"standalone"})}},i:function(t,n,e){const i=t.getDay(),s=0===i?7:i;switch(n){case"i":return String(s);case"ii":return Qs(s,n.length);case"io":return e.ordinalNumber(s,{unit:"day"});case"iii":return e.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(i,{width:"short",context:"formatting"});default:return e.day(i,{width:"wide",context:"formatting"})}},a:function(t,n,e){const s=t.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(s,{width:"narrow",context:"formatting"});default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,n,e){const i=t.getHours();let s;switch(s=12===i?"noon":0===i?"midnight":i/12>=1?"pm":"am",n){case"b":case"bb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(s,{width:"narrow",context:"formatting"});default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,n,e){const i=t.getHours();let s;switch(s=i>=17?"evening":i>=12?"afternoon":i>=4?"morning":"night",n){case"B":case"BB":case"BBB":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(s,{width:"narrow",context:"formatting"});default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,n,e){if("ho"===n){let i=t.getHours()%12;return 0===i&&(i=12),e.ordinalNumber(i,{unit:"hour"})}return s_.h(t,n)},H:function(t,n,e){return"Ho"===n?e.ordinalNumber(t.getHours(),{unit:"hour"}):s_.H(t,n)},K:function(t,n,e){const i=t.getHours()%12;return"Ko"===n?e.ordinalNumber(i,{unit:"hour"}):Qs(i,n.length)},k:function(t,n,e){let i=t.getHours();return 0===i&&(i=24),"ko"===n?e.ordinalNumber(i,{unit:"hour"}):Qs(i,n.length)},m:function(t,n,e){return"mo"===n?e.ordinalNumber(t.getMinutes(),{unit:"minute"}):s_.m(t,n)},s:function(t,n,e){return"so"===n?e.ordinalNumber(t.getSeconds(),{unit:"second"}):s_.s(t,n)},S:function(t,n){return s_.S(t,n)},X:function(t,n,e){const i=t.getTimezoneOffset();if(0===i)return"Z";switch(n){case"X":return Qde(i);case"XXXX":case"XX":return sv(i);default:return sv(i,":")}},x:function(t,n,e){const i=t.getTimezoneOffset();switch(n){case"x":return Qde(i);case"xxxx":case"xx":return sv(i);default:return sv(i,":")}},O:function(t,n,e){const i=t.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Zde(i,":");default:return"GMT"+sv(i,":")}},z:function(t,n,e){const i=t.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Zde(i,":");default:return"GMT"+sv(i,":")}},t:function(t,n,e){return Qs(Math.trunc(t.getTime()/1e3),n.length)},T:function(t,n,e){return Qs(t.getTime(),n.length)}};function Zde(t,n=""){const e=t>0?"-":"+",i=Math.abs(t),s=Math.trunc(i/60),r=i%60;return 0===r?e+String(s):e+String(s)+n+Qs(r,2)}function Qde(t,n){return t%60==0?(t>0?"-":"+")+Qs(Math.abs(t)/60,2):sv(t,n)}function sv(t,n=""){const e=t>0?"-":"+",i=Math.abs(t);return e+Qs(Math.trunc(i/60),2)+n+Qs(i%60,2)}const Jde=(t,n)=>{switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});default:return n.date({width:"full"})}},ehe=(t,n)=>{switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});default:return n.time({width:"full"})}},Tz={p:ehe,P:(t,n)=>{const e=t.match(/(P+)(p+)?/)||[],i=e[1],s=e[2];if(!s)return Jde(t,n);let r;switch(i){case"P":r=n.dateTime({width:"short"});break;case"PP":r=n.dateTime({width:"medium"});break;case"PPP":r=n.dateTime({width:"long"});break;default:r=n.dateTime({width:"full"})}return r.replace("{{date}}",Jde(i,n)).replace("{{time}}",ehe(s,n))}},FZe=/^D+$/,LZe=/^Y+$/,PZe=["D","DD","YY","YYYY"];function the(t){return FZe.test(t)}function nhe(t){return LZe.test(t)}function Iz(t,n,e){const i=function $Ze(t,n,e){const i="Y"===t[0]?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${n}\`) for formatting ${i} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(t,n,e);if(console.warn(i),PZe.includes(t))throw new RangeError(i)}const zZe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,UZe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,GZe=/^'([^]*?)'?$/,jZe=/''/g,HZe=/[a-zA-Z]/;function Us(t,n,e){const i=i_(),s=e?.locale??i.locale??WO,r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,a=Tn(t);if(!function VZe(t){if(!function BZe(t){return t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)}(t)&&"number"!=typeof t)return!1;const n=Tn(t);return!isNaN(Number(n))}(a))throw new RangeError("Invalid time value");let l=n.match(UZe).map(u=>{const d=u[0];return"p"===d||"P"===d?(0,Tz[d])(u,s.formatLong):u}).join("").match(zZe).map(u=>{if("''"===u)return{isToken:!1,value:"'"};const d=u[0];if("'"===d)return{isToken:!1,value:WZe(u)};if(Yde[d])return{isToken:!0,value:u};if(d.match(HZe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return{isToken:!1,value:u}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:r,weekStartsOn:o,locale:s};return l.map(u=>{if(!u.isToken)return u.value;const d=u.value;return(!e?.useAdditionalWeekYearTokens&&nhe(d)||!e?.useAdditionalDayOfYearTokens&&the(d))&&Iz(d,n,String(t)),(0,Yde[d[0]])(a,d,s.localize,c)}).join("")}function WZe(t){const n=t.match(GZe);return n?n[1].replace(jZe,"'"):t}const ihe={debug:!0,composer:{domain:"",route:"/assistant-panel",protocol:"",port:"",use_domain:!1,local_login:!1},app:{name:"Assistant",title:"PlaceOS",description:"Assistant UI",short_name:"PlaceOS",logo:{type:"img",src:"assets/logo-light.svg"},logo_dark:{type:"img",src:"assets/logo-dark.svg"},general:{},prevent_space_init:!0}},qO={dirty:!1,raw:"53dfdc5",hash:"53dfdc5",distance:null,tag:null,semver:null,suffix:"53dfdc5",semverString:null,version:"1.12.0",time:1728350299099};class KZe{constructor(n,e){this.count=n,this.source=e}call(n,e){return e.subscribe(new XZe(n,this.count,this.source))}}class XZe extends Mi{constructor(n,e,i){super(n),this.count=e,this.source=i}error(n){if(!this.isStopped){const{source:e,count:i}=this;if(0===i)return super.error(n);i>-1&&(this.count=i-1),e.subscribe(this._unsubscribeAndRecycle())}}}let fT="@place.tech";function rhe(t){if(!t)throw Error("No user passed");const n={name:new Ke(t.name||"",[Zr.required]),email:new Ke(t.email||"",[Zr.email,Zr.required]),organisation:new Ke(t.organisation||"",Zr.required),phone:new Ke(t.phone||"",Zr.pattern(/^\+?(\d[\d\s\-\(\)]{5,13}\d)$/)),assistance_required:new Ke(t.assistance_required||!1),visit_expected:new Ke(t.visit_expected??!0)};return new Rl(n)}class Wo{constructor(n={}){this.id=n.id||n.email||`USER::${iv(8)}`,this.name=n.name||"",this.email=n.email||"",this.first_name=n.first_name||n.name||"",this.last_name=n.last_name||"",this.phone=n.phone||"",this.organisation=n.organisation||"",this.notes=n.notes||"",this.photo=n.photo||"",this.username=n.username||"",this.organizer=!!n.organizer,this.checked_in=!!n.checked_in,this.required=n.required??!0,this.resource=n.resource??!1,this.response_status=n.response_status||"";const e=n.groups||[];this.department=n.department??"",n.sys_admin&&e.push("placeos_admin"),n.support&&e.push("placeos_support"),n.department&&e.push(n.department),this.groups=e,this.extension_data=n.extension_data||{},this.extension_data.assistance_required=n.assistance_required||this.extension_data.assistance_required,this.is_external=!this.email?.endsWith(`${fT}`),this.visit_expected=n.visit_expected??!0,this.assistance_required=!!this.extension_data?.assistance_required;for(const i in n)i in this||(this.extension_data[i]=n[i])}}class mT extends Wo{constructor(n={}){super(n),this.preferred_beverage=n.preferred_beverage||"",this.accepted_terms_conditions=n.accepted_terms_conditions||!1,this.attachments=n.extension_data?.attachments||n.attachments||[],this.status=n.booking?.approved?"approved":n.booking?.rejected?"declined":n.extension_data?.status||n.status||"pending",this.booking=n.booking,this.extension_data.event=n.event_metadata}}class rv extends Wo{get location(){return this.location_time(Date.now())}work_preference(n){n||(n=Date.now());const e=new Date(n),i=e.getDay(),s=Us(e,"yyyy-MM-dd");if(this.work_overrides[s]?.blocks?.length)for(const r of this.work_overrides[s].blocks){const a=r.end_time;if(r.start_time<=e.getHours()+e.getMinutes()/60&&a>=e.getHours()+e.getMinutes()/60)return r}for(const r of this.work_preferences)if(r.day_of_week===i&&r.blocks?.length)for(const o of r.blocks)if(o.start_time<=e.getHours()+e.getMinutes()/60&&o.end_time>=e.getHours()+e.getMinutes()/60)return o}location_time(n=Date.now()){return this.work_preference(n)?.location||"wfo"}get location_name(){return this.location_name_time()}location_name_time(n=Date.now()){n||(n=Date.now());const e=this.location_time(n),i=this.in_hours_time(n);if(e.includes("w")&&!i)return"Outside working hours";switch(e){case"wfh":return"Working from Home";case"wfo":return"Working from Office";case"ooo":return"Out of Office";case"aol":return"Away on Leave";default:return"Unknown"}}outsideHours(n=Date.now()){const e=this.location_time(n),i=this.in_hours_time(n);return e.includes("w")&&!i}get in_hours(){return this.in_hours_time(Date.now())}location_icon(n){n||(n=Date.now());const e=this.location_time(n),i=this.in_hours_time(n);return"wfh"===e&&i?"home":"wfo"===e&&i?"business":"event_busy"}in_hours_time(n=Date.now()){return!!this.work_preference(n)}constructor(n={}){super(n),this.card_number=n.card_number||"",this.staff_id=n.staff_id||"",this.is_logged_in=!!n.is_logged_in,this.work_preferences=n.work_preferences||[],this.work_overrides=n.work_overrides||{}}}const ZZe=new rv,XO=new at(null),QZe=new at(0),_T=XO.asObservable();function ohe(){setTimeout(z(function*(){const t=yield PO("current").toPromise();XO.next(new rv(t))}),300)}function Qt(){return XO.getValue()||ZZe}setTimeout(()=>{try{if(jest)return}catch{}Vt([PO("current"),QZe]).pipe(u0(1e3),function qZe(t=-1){return n=>n.lift(new KZe(t,n))}(10),me(([t])=>new rv(t))).subscribe(t=>XO.next(t))},300);let nn=(()=>{class t extends hn{set overrides(e){this._overrides.next(e),this._applyCssVariables()}listen(e){return this._observables[e]||(this._subjects[e]=new at(null),this._observables[e]=this._subjects[e].asObservable()),this._observables[e]}post(e,i){this._observables[e]||(this._subjects[e]=new at(null),this._observables[e]=this._subjects[e].asObservable()),this._subjects[e].next(i)}value(e){return this._observables[e]?this._subjects[e].getValue():null}get title(){return this._title.getTitle()}set title(e){this._title.setTitle(`${e} | ${this.get("app.name")||this._app_name}`),this.get("app.analytics.tracking_id")&&this._analytics?.send("pagename",{title:e})}constructor(e,i){super(),this._title=e,this._analytics=i,this._app_name="PlaceOS",this._overrides=new at([]),this._user_settings=new at({}),this._subjects={},this._observables={},this._pending_settings={};const s=new Date,r=new Date(qO.time),o=eh(s,r)?`Today at ${Us(r,"h:mma")}`:Us(r,"do MMM yyyy, h:mma");ji("CORE",`${qO.semver}`,null,"debug",!0),ji("APP",`${qO.hash} | Built: ${o}`,null,"debug",!0),this.init()}init(){var e=this;return z(function*(){e.get("debug")&&(window.debug=!0),e.get("app")?.name&&(e._app_name=e.get("app").name),e._app_name=location.pathname.replace(/[\\\/]/g,"").trim()||e._app_name,Vde(e._app_name.split("-").join("_").toUpperCase()),ji("Settings","Successfully loaded settings"),e._initialised.next(!0),window.debug&&(window.application||(window.application={}),window.application.settings=e),e.subscription("user_settings",e._user_settings.subscribe(r=>e._applyUserSettings(r)));const i=yield _T.pipe(as(r=>!!r)).toPromise(),s=yield co(i.id,"settings").toPromise();e._user_settings.next(s.details||{}),e._initDarkMode(),e._applyTheme(),e._setFontSize()})()}get app_name(){return this._app_name}get time_format(){return this.get("app.use_24_hour_time")?"HH:mm":"h:mm a"}get(e){const i=e.split(".");if("app"!==i[0])return nv(i,this._pending_settings)??nv(i,this._user_settings.getValue())??nv(i,ihe);const s=[...this._overrides.getValue()];for(const r of s){const o=nv(i.slice(1),r);if(null!=o)return o}return nv(i,ihe)}saveUserSetting(e,i){this._pending_settings[e]=i,"dark_mode"===e&&this.setTheme(i?"dark":""),"font_size"===e&&this._setFontSize(),this.timeout("save_settings",()=>this._savePendingChanges(),5e3)}overrideCssVariable(e,i,s=!1){let r=document.getElementById(`css-var-overrides+${e}`);r||(r=document.createElement("style"),r.id=`css-var-overrides+${e}`,document.head.appendChild(r)),r.innerText=`html, body { --${e}: ${i} ${s?"!important":""}}`}setTheme(e){this.get("theme")!==e&&(this.saveUserSetting("theme",e),this._applyTheme())}_applyCssVariables(){const e=this.get("app.css_variables")||{};let i="body { ";for(const r in e)i+=`--${r}: ${e[r]}; `;i+="}";let s=document.getElementById("css-var-overrides");s||(s=document.createElement("style"),s.id="css-var-overrides",document.head.appendChild(s)),s.innerText=i}_savePendingChanges(){var e=this;return z(function*(){const i=Qt();!i?.id||!Object.keys(e._pending_settings).length||(yield function vde(t,n,e="put"){return gde({id:t,form_data:n,query_params:{},method:e,fn:ZE,path:Qb})}(i.id,{name:"settings",description:"",details:{...e._user_settings.getValue(),...e._pending_settings}}).toPromise(),e._user_settings.next({...e._user_settings.getValue(),...e._pending_settings}),e._pending_settings={})})()}_applyUserSettings(e){return z(function*(){})()}_setFontSize(){this.get("font_size")&&this.overrideCssVariable("font-size",`${this.get("font_size")}px`)}_applyTheme(){const e=this.get("theme"),i=document.body.classList.value.split(" ");for(const s of i)s.startsWith("theme-")&&document.body.classList.remove(s);e?document.body.classList.add(`theme-${e}`):document.body.classList.remove(`theme-${e}`)}_initDarkMode(){this.get("theme")}static#e=this.\u0275fac=function(i){return new(i||t)(ae(rB),ae(Gde,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class JZe{constructor(n={}){this.id=n.id||"",this.name=n.name||"",this.description=n.description||"",this.tags=n.tags||[],this.count=n.count||0,this.capacity=n.capacity||0,this.bindings=n.bindings||{},this._settings=n.settings||{}}setting(n){return nv(n.split("."),this._settings)}}let kz,W0=!1;function YO(t,n,e="OK",i,s={}){if(!kz)return!W0&&console.warn("Snackbar service hasn't been initialised");const r=kz.open(n,e,{panelClass:[t],duration:5e3,...s});e&&(i=i||(()=>r.dismiss()),r.onAction().subscribe(()=>i()))}function ep(t,n,e,i={}){!W0&&console.debug(t),"string"!=typeof t&&(t="Success"),YO("success",t,n,e,i)}function Ti(t,n,e,i={}){!W0&&console.debug(t),"string"!=typeof t&&(t=t?.error||t?.message||"An error occurred"),YO("error",t,n,e,i)}function ZO(t,n,e,i={}){!W0&&console.debug(t),YO("info",t,n,e,i)}class gT{constructor(n={}){this.settings={},this.id=n.id||"",this.parent_id=n.parent_id||"",this.name=n.name||"",this.display_name=n.display_name||"",this.map_id=n.map_id||"",this.capacity=n.capacity||0,this.location=n.location||"",this.locations=n.locations||[],this.tags=n.tags||[],this.images=n.images||[];const e=this.display_name.split(" ");this.number=((e.length>=2?e[e.length-1]:this.display_name[0])?.toUpperCase()||"").substring(0,2)}}class Dz{constructor(n={}){this.id=n.id||"",this.parent_id=n.parent_id||"",this.name=n.name||"";const e=n.settings||{};this.display_name=n.display_name,this.images=this.images||[];const i=e.discovery_info||e;this.zone_id=n.zone_id||n.zone,this.extras=(n.extras||i.extras||[]).map(r=>({id:r.extra_id||r.id,name:r.extra_name||r.name})),this.loan_items=(n.loan_items||i.loan_items||[]).map(r=>({id:r.extra_id||r.id,name:r.extra_name||r.name})),this.levels=(n.levels||i.levels||[]).map(r=>new gT({...r,building_id:this.id})),this._roles=n.roles||i.roles||{},this._lockers=n.lockers||n.locker_structure||i.locker_structure||{},this._systems=n.systems||i.systems||{},this._phone_numbers=n.phone_numbers||i.phone_numbers||{},this.location=n.location||i.location||"0,0",this.room_configurations=n.room_configurations||i.room_configurations||[],this.attributes=n.attributes||i.attributes||[];const s=[];if(n.neighbourhoods)for(const r in n.neighbourhoods)if(r in n.neighbourhoods){const o=n.neighbourhoods[r]||{};for(const a in o)a in o&&s.push({id:o[a],name:a,level_id:r})}this.bindings=n.bindings||{},this.searchables=s,this.map_id=n.map_id||"",this.timezone=n.timezone||i.timezone||e.timezone||"",this.catering_hours=n.catering_hours||i.catering_hours||e.catering_hours||{start:7,end:20},this.visitor_space=n.visitor_space||i.visitor_space||e.visitor_space||"",this.holding_bay=n.holding_bay||i.holding_bay||e.holding_bay||"",this.code=n.code||i.code||e.code||"",this.address=n.address||i.address||e.address||"",this.orientations=n.orientations||i.orientations||e.orientations||{},this.booking_details=n.booking_details||i.booking_details||e.booking_details||null,this.catering_restricted_from=n.catering_restricted_from||i.catering_restricted_from||e.catering_restricted_from||-1440,this.currency=n.currency||i.currency||e.currency||"USD"}role(n){return[...this._roles[n]||[]]}get role_names(){return Object.keys(this._roles).filter(n=>n in this._roles)}get lockers(){return{...this._lockers||{}}}get systems(){return{...this._systems||{}}}get phone_numbers(){return{...this._phone_numbers||{}}}featuresForLevel(n){return(this.searchables||[]).filter(e=>e.level_id===n)}}class lhe{constructor(n){this.id=n.id||"",this.name=n.name||"",this.display_name=n.display_name||"",this.timezone=n.timezone||"",this.images=n.images||[],this.bindings=n.bindings||{},this.address=n.address||""}}function che(t){return typeof t>"u"||null===t}var _a={isNothing:che,isObject:function tQe(t){return"object"==typeof t&&null!==t},toArray:function nQe(t){return Array.isArray(t)?t:che(t)?[]:[t]},repeat:function sQe(t,n){var i,e="";for(i=0;i<n;i+=1)e+=t;return e},isNegativeZero:function rQe(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t},extend:function iQe(t,n){var e,i,s,r;if(n)for(e=0,i=(r=Object.keys(n)).length;e<i;e+=1)t[s=r[e]]=n[s];return t}};function uhe(t,n){var e="",i=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(e+='in "'+t.mark.name+'" '),e+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!n&&t.mark.snippet&&(e+="\n\n"+t.mark.snippet),i+" "+e):i}function bT(t,n){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=n,this.message=uhe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(bT.prototype=Object.create(Error.prototype)).constructor=bT,bT.prototype.toString=function(n){return this.name+": "+uhe(this,n)};var Vl=bT;function Az(t,n,e,i,s){var r="",o="",a=Math.floor(s/2)-1;return i-n>a&&(n=i-a+(r=" ... ").length),e-i>a&&(e=i+a-(o=" ...").length),{str:r+t.slice(n,e).replace(/\t/g,"\u2192")+o,pos:i-n+r.length}}function Mz(t,n){return _a.repeat(" ",n-t.length)+t}var pQe=function hQe(t,n){if(n=Object.create(n||null),!t.buffer)return null;n.maxLength||(n.maxLength=79),"number"!=typeof n.indent&&(n.indent=1),"number"!=typeof n.linesBefore&&(n.linesBefore=3),"number"!=typeof n.linesAfter&&(n.linesAfter=2);for(var r,e=/\r?\n|\r|\0/g,i=[0],s=[],o=-1;r=e.exec(t.buffer);)s.push(r.index),i.push(r.index+r[0].length),t.position<=r.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var l,c,a="",u=Math.min(t.line+n.linesAfter,s.length).toString().length,d=n.maxLength-(n.indent+u+3);for(l=1;l<=n.linesBefore&&!(o-l<0);l++)c=Az(t.buffer,i[o-l],s[o-l],t.position-(i[o]-i[o-l]),d),a=_a.repeat(" ",n.indent)+Mz((t.line-l+1).toString(),u)+" | "+c.str+"\n"+a;for(c=Az(t.buffer,i[o],s[o],t.position,d),a+=_a.repeat(" ",n.indent)+Mz((t.line+1).toString(),u)+" | "+c.str+"\n",a+=_a.repeat("-",n.indent+u+3+c.pos)+"^\n",l=1;l<=n.linesAfter&&!(o+l>=s.length);l++)c=Az(t.buffer,i[o+l],s[o+l],t.position-(i[o]-i[o+l]),d),a+=_a.repeat(" ",n.indent)+Mz((t.line+l+1).toString(),u)+" | "+c.str+"\n";return a.replace(/\n$/,"")},fQe=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],mQe=["scalar","sequence","mapping"],Ya=function gQe(t,n){if(n=n||{},Object.keys(n).forEach(function(e){if(-1===fQe.indexOf(e))throw new Vl('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')}),this.options=n,this.tag=t,this.kind=n.kind||null,this.resolve=n.resolve||function(){return!0},this.construct=n.construct||function(e){return e},this.instanceOf=n.instanceOf||null,this.predicate=n.predicate||null,this.represent=n.represent||null,this.representName=n.representName||null,this.defaultStyle=n.defaultStyle||null,this.multi=n.multi||!1,this.styleAliases=function _Qe(t){var n={};return null!==t&&Object.keys(t).forEach(function(e){t[e].forEach(function(i){n[String(i)]=e})}),n}(n.styleAliases||null),-1===mQe.indexOf(this.kind))throw new Vl('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')};function dhe(t,n){var e=[];return t[n].forEach(function(i){var s=e.length;e.forEach(function(r,o){r.tag===i.tag&&r.kind===i.kind&&r.multi===i.multi&&(s=o)}),e[s]=i}),e}function Nz(t){return this.extend(t)}Nz.prototype.extend=function(n){var e=[],i=[];if(n instanceof Ya)i.push(n);else if(Array.isArray(n))i=i.concat(n);else{if(!n||!Array.isArray(n.implicit)&&!Array.isArray(n.explicit))throw new Vl("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.implicit&&(e=e.concat(n.implicit)),n.explicit&&(i=i.concat(n.explicit))}e.forEach(function(r){if(!(r instanceof Ya))throw new Vl("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(r.loadKind&&"scalar"!==r.loadKind)throw new Vl("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(r.multi)throw new Vl("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(r){if(!(r instanceof Ya))throw new Vl("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(Nz.prototype);return s.implicit=(this.implicit||[]).concat(e),s.explicit=(this.explicit||[]).concat(i),s.compiledImplicit=dhe(s,"implicit"),s.compiledExplicit=dhe(s,"explicit"),s.compiledTypeMap=function bQe(){var n,e,t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function i(s){s.multi?(t.multi[s.kind].push(s),t.multi.fallback.push(s)):t[s.kind][s.tag]=t.fallback[s.tag]=s}for(n=0,e=arguments.length;n<e;n+=1)arguments[n].forEach(i);return t}(s.compiledImplicit,s.compiledExplicit),s};var hhe=Nz,phe=new Ya("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),fhe=new Ya("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),mhe=new Ya("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}}),_he=new hhe({explicit:[phe,fhe,mhe]}),ghe=new Ya("tag:yaml.org,2002:null",{kind:"scalar",resolve:function vQe(t){if(null===t)return!0;var n=t.length;return 1===n&&"~"===t||4===n&&("null"===t||"Null"===t||"NULL"===t)},construct:function yQe(){return null},predicate:function wQe(t){return null===t},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),bhe=new Ya("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function CQe(t){if(null===t)return!1;var n=t.length;return 4===n&&("true"===t||"True"===t||"TRUE"===t)||5===n&&("false"===t||"False"===t||"FALSE"===t)},construct:function SQe(t){return"true"===t||"True"===t||"TRUE"===t},predicate:function xQe(t){return"[object Boolean]"===Object.prototype.toString.call(t)},represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function EQe(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function TQe(t){return 48<=t&&t<=55}function IQe(t){return 48<=t&&t<=57}var vhe=new Ya("tag:yaml.org,2002:int",{kind:"scalar",resolve:function kQe(t){if(null===t)return!1;var s,n=t.length,e=0,i=!1;if(!n)return!1;if(("-"===(s=t[e])||"+"===s)&&(s=t[++e]),"0"===s){if(e+1===n)return!0;if("b"===(s=t[++e])){for(e++;e<n;e++)if("_"!==(s=t[e])){if("0"!==s&&"1"!==s)return!1;i=!0}return i&&"_"!==s}if("x"===s){for(e++;e<n;e++)if("_"!==(s=t[e])){if(!EQe(t.charCodeAt(e)))return!1;i=!0}return i&&"_"!==s}if("o"===s){for(e++;e<n;e++)if("_"!==(s=t[e])){if(!TQe(t.charCodeAt(e)))return!1;i=!0}return i&&"_"!==s}}if("_"===s)return!1;for(;e<n;e++)if("_"!==(s=t[e])){if(!IQe(t.charCodeAt(e)))return!1;i=!0}return!(!i||"_"===s)},construct:function DQe(t){var i,n=t,e=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),("-"===(i=n[0])||"+"===i)&&("-"===i&&(e=-1),i=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===i){if("b"===n[1])return e*parseInt(n.slice(2),2);if("x"===n[1])return e*parseInt(n.slice(2),16);if("o"===n[1])return e*parseInt(n.slice(2),8)}return e*parseInt(n,10)},predicate:function AQe(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!_a.isNegativeZero(t)},represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),MQe=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),RQe=/^[-+]?[0-9]+e/,yhe=new Ya("tag:yaml.org,2002:float",{kind:"scalar",resolve:function NQe(t){return!(null===t||!MQe.test(t)||"_"===t[t.length-1])},construct:function OQe(t){var n,e;return e="-"===(n=t.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(n[0])>=0&&(n=n.slice(1)),".inf"===n?1===e?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===n?NaN:e*parseFloat(n,10)},predicate:function LQe(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||_a.isNegativeZero(t))},represent:function FQe(t,n){var e;if(isNaN(t))switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(_a.isNegativeZero(t))return"-0.0";return e=t.toString(10),RQe.test(e)?e.replace("e",".e"):e},defaultStyle:"lowercase"}),Che=_he.extend({implicit:[ghe,bhe,vhe,yhe]}),She=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),xhe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),Ehe=new Ya("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function PQe(t){return null!==t&&(null!==She.exec(t)||null!==xhe.exec(t))},construct:function $Qe(t){var n,e,i,s,r,o,a,h,l=0,c=null;if(null===(n=She.exec(t))&&(n=xhe.exec(t)),null===n)throw new Error("Date resolve error");if(e=+n[1],i=+n[2]-1,s=+n[3],!n[4])return new Date(Date.UTC(e,i,s));if(r=+n[4],o=+n[5],a=+n[6],n[7]){for(l=n[7].slice(0,3);l.length<3;)l+="0";l=+l}return n[9]&&(c=6e4*(60*+n[10]+ +(n[11]||0)),"-"===n[9]&&(c=-c)),h=new Date(Date.UTC(e,i,s,r,o,a,l)),c&&h.setTime(h.getTime()-c),h},instanceOf:Date,represent:function BQe(t){return t.toISOString()}}),The=new Ya("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function VQe(t){return"<<"===t||null===t}}),Oz="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",Ihe=new Ya("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function zQe(t){if(null===t)return!1;var n,e,i=0,s=t.length,r=Oz;for(e=0;e<s;e++)if(!((n=r.indexOf(t.charAt(e)))>64)){if(n<0)return!1;i+=6}return i%8==0},construct:function UQe(t){var n,e,i=t.replace(/[\r\n=]/g,""),s=i.length,r=Oz,o=0,a=[];for(n=0;n<s;n++)n%4==0&&n&&(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)),o=o<<6|r.indexOf(i.charAt(n));return 0==(e=s%4*6)?(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)):18===e?(a.push(o>>10&255),a.push(o>>2&255)):12===e&&a.push(o>>4&255),new Uint8Array(a)},predicate:function jQe(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)},represent:function GQe(t){var i,s,n="",e=0,r=t.length,o=Oz;for(i=0;i<r;i++)i%3==0&&i&&(n+=o[e>>18&63],n+=o[e>>12&63],n+=o[e>>6&63],n+=o[63&e]),e=(e<<8)+t[i];return 0==(s=r%3)?(n+=o[e>>18&63],n+=o[e>>12&63],n+=o[e>>6&63],n+=o[63&e]):2===s?(n+=o[e>>10&63],n+=o[e>>4&63],n+=o[e<<2&63],n+=o[64]):1===s&&(n+=o[e>>2&63],n+=o[e<<4&63],n+=o[64],n+=o[64]),n}}),HQe=Object.prototype.hasOwnProperty,WQe=Object.prototype.toString,khe=new Ya("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function qQe(t){if(null===t)return!0;var e,i,s,r,o,n=[],a=t;for(e=0,i=a.length;e<i;e+=1){if(o=!1,"[object Object]"!==WQe.call(s=a[e]))return!1;for(r in s)if(HQe.call(s,r)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==n.indexOf(r))return!1;n.push(r)}return!0},construct:function KQe(t){return null!==t?t:[]}}),XQe=Object.prototype.toString,Dhe=new Ya("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function YQe(t){if(null===t)return!0;var n,e,i,s,r,o=t;for(r=new Array(o.length),n=0,e=o.length;n<e;n+=1){if("[object Object]"!==XQe.call(i=o[n])||1!==(s=Object.keys(i)).length)return!1;r[n]=[s[0],i[s[0]]]}return!0},construct:function ZQe(t){if(null===t)return[];var n,e,i,s,r,o=t;for(r=new Array(o.length),n=0,e=o.length;n<e;n+=1)i=o[n],s=Object.keys(i),r[n]=[s[0],i[s[0]]];return r}}),QQe=Object.prototype.hasOwnProperty,Ahe=new Ya("tag:yaml.org,2002:set",{kind:"mapping",resolve:function JQe(t){if(null===t)return!0;var n,e=t;for(n in e)if(QQe.call(e,n)&&null!==e[n])return!1;return!0},construct:function eJe(t){return null!==t?t:{}}}),Rz=Che.extend({implicit:[Ehe,The],explicit:[Ihe,khe,Dhe,Ahe]}),r_=Object.prototype.hasOwnProperty,QO=1,Mhe=2,Nhe=3,JO=4,Fz=1,tJe=2,Ohe=3,nJe=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,iJe=/[\x85\u2028\u2029]/,sJe=/[,\[\]\{\}]/,Rhe=/^(?:!|!!|![a-z\-]+!)$/i,Fhe=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Lhe(t){return Object.prototype.toString.call(t)}function tp(t){return 10===t||13===t}function ov(t){return 9===t||32===t}function _c(t){return 9===t||32===t||10===t||13===t}function q0(t){return 44===t||91===t||93===t||123===t||125===t}function rJe(t){var n;return 48<=t&&t<=57?t-48:97<=(n=32|t)&&n<=102?n-97+10:-1}function oJe(t){return 120===t?2:117===t?4:85===t?8:0}function aJe(t){return 48<=t&&t<=57?t-48:-1}function Phe(t){return 48===t?"\0":97===t?"\x07":98===t?"\b":116===t||9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"\x1b":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"\x85":95===t?"\xa0":76===t?"\u2028":80===t?"\u2029":""}function lJe(t){return t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}for(var $he=new Array(256),Bhe=new Array(256),K0=0;K0<256;K0++)$he[K0]=Phe(K0)?1:0,Bhe[K0]=Phe(K0);function cJe(t,n){this.input=t,this.filename=n.filename||null,this.schema=n.schema||Rz,this.onWarning=n.onWarning||null,this.legacy=n.legacy||!1,this.json=n.json||!1,this.listener=n.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Vhe(t,n){var e={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return e.snippet=pQe(e),new Vl(n,e)}function Dn(t,n){throw Vhe(t,n)}function eR(t,n){t.onWarning&&t.onWarning.call(null,Vhe(t,n))}var zhe={YAML:function(n,e,i){var s,r,o;null!==n.version&&Dn(n,"duplication of %YAML directive"),1!==i.length&&Dn(n,"YAML directive accepts exactly one argument"),null===(s=/^([0-9]+)\.([0-9]+)$/.exec(i[0]))&&Dn(n,"ill-formed argument of the YAML directive"),r=parseInt(s[1],10),o=parseInt(s[2],10),1!==r&&Dn(n,"unacceptable YAML version of the document"),n.version=i[0],n.checkLineBreaks=o<2,1!==o&&2!==o&&eR(n,"unsupported YAML version of the document")},TAG:function(n,e,i){var s,r;2!==i.length&&Dn(n,"TAG directive accepts exactly two arguments"),r=i[1],Rhe.test(s=i[0])||Dn(n,"ill-formed tag handle (first argument) of the TAG directive"),r_.call(n.tagMap,s)&&Dn(n,'there is a previously declared suffix for "'+s+'" tag handle'),Fhe.test(r)||Dn(n,"ill-formed tag prefix (second argument) of the TAG directive");try{r=decodeURIComponent(r)}catch{Dn(n,"tag prefix is malformed: "+r)}n.tagMap[s]=r}};function o_(t,n,e,i){var s,r,o,a;if(n<e){if(a=t.input.slice(n,e),i)for(s=0,r=a.length;s<r;s+=1)9===(o=a.charCodeAt(s))||32<=o&&o<=1114111||Dn(t,"expected valid JSON character");else nJe.test(a)&&Dn(t,"the stream contains non-printable characters");t.result+=a}}function Uhe(t,n,e,i){var s,r,o,a;for(_a.isObject(e)||Dn(t,"cannot merge mappings; the provided source object is unacceptable"),o=0,a=(s=Object.keys(e)).length;o<a;o+=1)r_.call(n,r=s[o])||(n[r]=e[r],i[r]=!0)}function X0(t,n,e,i,s,r,o,a,l){var c,u;if(Array.isArray(s))for(c=0,u=(s=Array.prototype.slice.call(s)).length;c<u;c+=1)Array.isArray(s[c])&&Dn(t,"nested arrays are not supported inside keys"),"object"==typeof s&&"[object Object]"===Lhe(s[c])&&(s[c]="[object Object]");if("object"==typeof s&&"[object Object]"===Lhe(s)&&(s="[object Object]"),s=String(s),null===n&&(n={}),"tag:yaml.org,2002:merge"===i)if(Array.isArray(r))for(c=0,u=r.length;c<u;c+=1)Uhe(t,n,r[c],e);else Uhe(t,n,r,e);else!t.json&&!r_.call(e,s)&&r_.call(n,s)&&(t.line=o||t.line,t.lineStart=a||t.lineStart,t.position=l||t.position,Dn(t,"duplicated mapping key")),"__proto__"===s?Object.defineProperty(n,s,{configurable:!0,enumerable:!0,writable:!0,value:r}):n[s]=r,delete e[s];return n}function Lz(t){var n;10===(n=t.input.charCodeAt(t.position))?t.position++:13===n?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):Dn(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function qo(t,n,e){for(var i=0,s=t.input.charCodeAt(t.position);0!==s;){for(;ov(s);)9===s&&-1===t.firstTabInLine&&(t.firstTabInLine=t.position),s=t.input.charCodeAt(++t.position);if(n&&35===s)do{s=t.input.charCodeAt(++t.position)}while(10!==s&&13!==s&&0!==s);if(!tp(s))break;for(Lz(t),s=t.input.charCodeAt(t.position),i++,t.lineIndent=0;32===s;)t.lineIndent++,s=t.input.charCodeAt(++t.position)}return-1!==e&&0!==i&&t.lineIndent<e&&eR(t,"deficient indentation"),i}function tR(t){var e,n=t.position;return!(45!==(e=t.input.charCodeAt(n))&&46!==e||e!==t.input.charCodeAt(n+1)||e!==t.input.charCodeAt(n+2)||(n+=3,e=t.input.charCodeAt(n),0!==e&&!_c(e)))}function Pz(t,n){1===n?t.result+=" ":n>1&&(t.result+=_a.repeat("\n",n-1))}function Ghe(t,n){var e,l,i=t.tag,s=t.anchor,r=[],a=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=r),l=t.input.charCodeAt(t.position);0!==l&&(-1!==t.firstTabInLine&&(t.position=t.firstTabInLine,Dn(t,"tab characters must not be used in indentation")),45===l&&_c(t.input.charCodeAt(t.position+1)));)if(a=!0,t.position++,qo(t,!0,-1)&&t.lineIndent<=n)r.push(null),l=t.input.charCodeAt(t.position);else if(e=t.line,Y0(t,n,Nhe,!1,!0),r.push(t.result),qo(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===e||t.lineIndent>n)&&0!==l)Dn(t,"bad indentation of a sequence entry");else if(t.lineIndent<n)break;return!!a&&(t.tag=i,t.anchor=s,t.kind="sequence",t.result=r,!0)}function _Je(t){var n,s,r,o,e=!1,i=!1;if(33!==(o=t.input.charCodeAt(t.position)))return!1;if(null!==t.tag&&Dn(t,"duplication of a tag property"),60===(o=t.input.charCodeAt(++t.position))?(e=!0,o=t.input.charCodeAt(++t.position)):33===o?(i=!0,s="!!",o=t.input.charCodeAt(++t.position)):s="!",n=t.position,e){do{o=t.input.charCodeAt(++t.position)}while(0!==o&&62!==o);t.position<t.length?(r=t.input.slice(n,t.position),o=t.input.charCodeAt(++t.position)):Dn(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==o&&!_c(o);)33===o&&(i?Dn(t,"tag suffix cannot contain exclamation marks"):(s=t.input.slice(n-1,t.position+1),Rhe.test(s)||Dn(t,"named tag handle cannot contain such characters"),i=!0,n=t.position+1)),o=t.input.charCodeAt(++t.position);r=t.input.slice(n,t.position),sJe.test(r)&&Dn(t,"tag suffix cannot contain flow indicator characters")}r&&!Fhe.test(r)&&Dn(t,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch{Dn(t,"tag name is malformed: "+r)}return e?t.tag=r:r_.call(t.tagMap,s)?t.tag=t.tagMap[s]+r:"!"===s?t.tag="!"+r:"!!"===s?t.tag="tag:yaml.org,2002:"+r:Dn(t,'undeclared tag handle "'+s+'"'),!0}function gJe(t){var n,e;if(38!==(e=t.input.charCodeAt(t.position)))return!1;for(null!==t.anchor&&Dn(t,"duplication of an anchor property"),e=t.input.charCodeAt(++t.position),n=t.position;0!==e&&!_c(e)&&!q0(e);)e=t.input.charCodeAt(++t.position);return t.position===n&&Dn(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(n,t.position),!0}function Y0(t,n,e,i,s){var r,o,a,d,h,p,f,g,v,l=1,c=!1,u=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,r=o=a=JO===e||Nhe===e,i&&qo(t,!0,-1)&&(c=!0,t.lineIndent>n?l=1:t.lineIndent===n?l=0:t.lineIndent<n&&(l=-1)),1===l)for(;_Je(t)||gJe(t);)qo(t,!0,-1)?(c=!0,a=r,t.lineIndent>n?l=1:t.lineIndent===n?l=0:t.lineIndent<n&&(l=-1)):a=!1;if(a&&(a=c||s),(1===l||JO===e)&&(g=QO===e||Mhe===e?n:n+1,v=t.position-t.lineStart,1===l?a&&(Ghe(t,v)||function mJe(t,n,e){var i,s,r,o,a,l,w,c=t.tag,u=t.anchor,d={},h=Object.create(null),p=null,f=null,g=null,v=!1,y=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=d),w=t.input.charCodeAt(t.position);0!==w;){if(!v&&-1!==t.firstTabInLine&&(t.position=t.firstTabInLine,Dn(t,"tab characters must not be used in indentation")),i=t.input.charCodeAt(t.position+1),r=t.line,63!==w&&58!==w||!_c(i)){if(o=t.line,a=t.lineStart,l=t.position,!Y0(t,e,Mhe,!1,!0))break;if(t.line===r){for(w=t.input.charCodeAt(t.position);ov(w);)w=t.input.charCodeAt(++t.position);if(58===w)_c(w=t.input.charCodeAt(++t.position))||Dn(t,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(X0(t,d,h,p,f,null,o,a,l),p=f=g=null),y=!0,v=!1,s=!1,p=t.tag,f=t.result;else{if(!y)return t.tag=c,t.anchor=u,!0;Dn(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!y)return t.tag=c,t.anchor=u,!0;Dn(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===w?(v&&(X0(t,d,h,p,f,null,o,a,l),p=f=g=null),y=!0,v=!0,s=!0):v?(v=!1,s=!0):Dn(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,w=i;if((t.line===r||t.lineIndent>n)&&(v&&(o=t.line,a=t.lineStart,l=t.position),Y0(t,n,JO,!0,s)&&(v?f=t.result:g=t.result),v||(X0(t,d,h,p,f,g,o,a,l),p=f=g=null),qo(t,!0,-1),w=t.input.charCodeAt(t.position)),(t.line===r||t.lineIndent>n)&&0!==w)Dn(t,"bad indentation of a mapping entry");else if(t.lineIndent<n)break}return v&&X0(t,d,h,p,f,null,o,a,l),y&&(t.tag=c,t.anchor=u,t.kind="mapping",t.result=d),y}(t,v,g))||function pJe(t,n){var i,s,r,a,u,d,h,p,g,v,y,w,e=!0,o=t.tag,l=t.anchor,f=Object.create(null);if(91===(w=t.input.charCodeAt(t.position)))u=93,p=!1,a=[];else{if(123!==w)return!1;u=125,p=!0,a={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=a),w=t.input.charCodeAt(++t.position);0!==w;){if(qo(t,!0,n),(w=t.input.charCodeAt(t.position))===u)return t.position++,t.tag=o,t.anchor=l,t.kind=p?"mapping":"sequence",t.result=a,!0;e?44===w&&Dn(t,"expected the node content, but found ','"):Dn(t,"missed comma between flow collection entries"),y=null,d=h=!1,63===w&&_c(t.input.charCodeAt(t.position+1))&&(d=h=!0,t.position++,qo(t,!0,n)),i=t.line,s=t.lineStart,r=t.position,Y0(t,n,QO,!1,!0),v=t.tag,g=t.result,qo(t,!0,n),w=t.input.charCodeAt(t.position),(h||t.line===i)&&58===w&&(d=!0,w=t.input.charCodeAt(++t.position),qo(t,!0,n),Y0(t,n,QO,!1,!0),y=t.result),p?X0(t,a,f,v,g,y,i,s,r):a.push(d?X0(t,null,f,v,g,y,i,s,r):g),qo(t,!0,n),44===(w=t.input.charCodeAt(t.position))?(e=!0,w=t.input.charCodeAt(++t.position)):e=!1}Dn(t,"unexpected end of the stream within a flow collection")}(t,g)?u=!0:(o&&function fJe(t,n){var e,i,u,d,s=Fz,r=!1,o=!1,a=n,l=0,c=!1;if(124===(d=t.input.charCodeAt(t.position)))i=!1;else{if(62!==d)return!1;i=!0}for(t.kind="scalar",t.result="";0!==d;)if(43===(d=t.input.charCodeAt(++t.position))||45===d)Fz===s?s=43===d?Ohe:tJe:Dn(t,"repeat of a chomping mode identifier");else{if(!((u=aJe(d))>=0))break;0===u?Dn(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?Dn(t,"repeat of an indentation width identifier"):(a=n+u-1,o=!0)}if(ov(d)){do{d=t.input.charCodeAt(++t.position)}while(ov(d));if(35===d)do{d=t.input.charCodeAt(++t.position)}while(!tp(d)&&0!==d)}for(;0!==d;){for(Lz(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!o||t.lineIndent<a)&&32===d;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!o&&t.lineIndent>a&&(a=t.lineIndent),tp(d))l++;else{if(t.lineIndent<a){s===Ohe?t.result+=_a.repeat("\n",r?1+l:l):s===Fz&&r&&(t.result+="\n");break}for(i?ov(d)?(c=!0,t.result+=_a.repeat("\n",r?1+l:l)):c?(c=!1,t.result+=_a.repeat("\n",l+1)):0===l?r&&(t.result+=" "):t.result+=_a.repeat("\n",l):t.result+=_a.repeat("\n",r?1+l:l),r=!0,o=!0,l=0,e=t.position;!tp(d)&&0!==d;)d=t.input.charCodeAt(++t.position);o_(t,e,t.position,!1)}}return!0}(t,g)||function dJe(t,n){var e,i,s;if(39!==(e=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,i=s=t.position;0!==(e=t.input.charCodeAt(t.position));)if(39===e){if(o_(t,i,t.position,!0),39!==(e=t.input.charCodeAt(++t.position)))return!0;i=t.position,t.position++,s=t.position}else tp(e)?(o_(t,i,s,!0),Pz(t,qo(t,!1,n)),i=s=t.position):t.position===t.lineStart&&tR(t)?Dn(t,"unexpected end of the document within a single quoted scalar"):(t.position++,s=t.position);Dn(t,"unexpected end of the stream within a single quoted scalar")}(t,g)||function hJe(t,n){var e,i,s,r,o,a;if(34!==(a=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,e=i=t.position;0!==(a=t.input.charCodeAt(t.position));){if(34===a)return o_(t,e,t.position,!0),t.position++,!0;if(92===a){if(o_(t,e,t.position,!0),tp(a=t.input.charCodeAt(++t.position)))qo(t,!1,n);else if(a<256&&$he[a])t.result+=Bhe[a],t.position++;else if((o=oJe(a))>0){for(s=o,r=0;s>0;s--)(o=rJe(a=t.input.charCodeAt(++t.position)))>=0?r=(r<<4)+o:Dn(t,"expected hexadecimal character");t.result+=lJe(r),t.position++}else Dn(t,"unknown escape sequence");e=i=t.position}else tp(a)?(o_(t,e,i,!0),Pz(t,qo(t,!1,n)),e=i=t.position):t.position===t.lineStart&&tR(t)?Dn(t,"unexpected end of the document within a double quoted scalar"):(t.position++,i=t.position)}Dn(t,"unexpected end of the stream within a double quoted scalar")}(t,g)?u=!0:function bJe(t){var n,e,i;if(42!==(i=t.input.charCodeAt(t.position)))return!1;for(i=t.input.charCodeAt(++t.position),n=t.position;0!==i&&!_c(i)&&!q0(i);)i=t.input.charCodeAt(++t.position);return t.position===n&&Dn(t,"name of an alias node must contain at least one character"),e=t.input.slice(n,t.position),r_.call(t.anchorMap,e)||Dn(t,'unidentified alias "'+e+'"'),t.result=t.anchorMap[e],qo(t,!0,-1),!0}(t)?(u=!0,(null!==t.tag||null!==t.anchor)&&Dn(t,"alias node should not have any properties")):function uJe(t,n,e){var s,r,o,a,l,c,u,p,d=t.kind,h=t.result;if(_c(p=t.input.charCodeAt(t.position))||q0(p)||35===p||38===p||42===p||33===p||124===p||62===p||39===p||34===p||37===p||64===p||96===p||(63===p||45===p)&&(_c(s=t.input.charCodeAt(t.position+1))||e&&q0(s)))return!1;for(t.kind="scalar",t.result="",r=o=t.position,a=!1;0!==p;){if(58===p){if(_c(s=t.input.charCodeAt(t.position+1))||e&&q0(s))break}else if(35===p){if(_c(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&tR(t)||e&&q0(p))break;if(tp(p)){if(l=t.line,c=t.lineStart,u=t.lineIndent,qo(t,!1,-1),t.lineIndent>=n){a=!0,p=t.input.charCodeAt(t.position);continue}t.position=o,t.line=l,t.lineStart=c,t.lineIndent=u;break}}a&&(o_(t,r,o,!1),Pz(t,t.line-l),r=o=t.position,a=!1),ov(p)||(o=t.position+1),p=t.input.charCodeAt(++t.position)}return o_(t,r,o,!1),!!t.result||(t.kind=d,t.result=h,!1)}(t,g,QO===e)&&(u=!0,null===t.tag&&(t.tag="?")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===l&&(u=a&&Ghe(t,v))),null===t.tag)null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);else if("?"===t.tag){for(null!==t.result&&"scalar"!==t.kind&&Dn(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,h=t.implicitTypes.length;d<h;d+=1)if((f=t.implicitTypes[d]).resolve(t.result)){t.result=f.construct(t.result),t.tag=f.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else if("!"!==t.tag){if(r_.call(t.typeMap[t.kind||"fallback"],t.tag))f=t.typeMap[t.kind||"fallback"][t.tag];else for(f=null,d=0,h=(p=t.typeMap.multi[t.kind||"fallback"]).length;d<h;d+=1)if(t.tag.slice(0,p[d].tag.length)===p[d].tag){f=p[d];break}f||Dn(t,"unknown tag !<"+t.tag+">"),null!==t.result&&f.kind!==t.kind&&Dn(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+f.kind+'", not "'+t.kind+'"'),f.resolve(t.result,t.tag)?(t.result=f.construct(t.result,t.tag),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):Dn(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||u}function vJe(t){var e,i,s,o,n=t.position,r=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);0!==(o=t.input.charCodeAt(t.position))&&(qo(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||37!==o));){for(r=!0,o=t.input.charCodeAt(++t.position),e=t.position;0!==o&&!_c(o);)o=t.input.charCodeAt(++t.position);for(s=[],(i=t.input.slice(e,t.position)).length<1&&Dn(t,"directive name must not be less than one character in length");0!==o;){for(;ov(o);)o=t.input.charCodeAt(++t.position);if(35===o){do{o=t.input.charCodeAt(++t.position)}while(0!==o&&!tp(o));break}if(tp(o))break;for(e=t.position;0!==o&&!_c(o);)o=t.input.charCodeAt(++t.position);s.push(t.input.slice(e,t.position))}0!==o&&Lz(t),r_.call(zhe,i)?zhe[i](t,i,s):eR(t,'unknown document directive "'+i+'"')}qo(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,qo(t,!0,-1)):r&&Dn(t,"directives end mark is expected"),Y0(t,t.lineIndent-1,JO,!1,!0),qo(t,!0,-1),t.checkLineBreaks&&iJe.test(t.input.slice(n,t.position))&&eR(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&tR(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,qo(t,!0,-1)):t.position<t.length-1&&Dn(t,"end of the stream or a document separator is expected")}function jhe(t,n){n=n||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var e=new cJe(t,n),i=t.indexOf("\0");for(-1!==i&&(e.position=i,Dn(e,"null byte is not allowed in input")),e.input+="\0";32===e.input.charCodeAt(e.position);)e.lineIndent+=1,e.position+=1;for(;e.position<e.length-1;)vJe(e);return e.documents}var Hhe_load=function wJe(t,n){var e=jhe(t,n);if(0!==e.length){if(1===e.length)return e[0];throw new Vl("expected a single document in the stream, but found more")}};function Gz(t,n){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+n+" instead, which is now safe by default.")}}var dpe=Hhe_load;Gz("safeLoad","load"),Gz("safeLoadAll","loadAll"),Gz("safeDump","dump");let Sn=(()=>{class t{get settings(){return this._settings}get region_settings(){return this._region_settings}get building_settings(){return this._building_settings}regionSettings(e=""){const i=this._active_region.getValue();return!e&&i&&(e=i?.id),this._region_settings&&this._region_settings[e]||{}}buildingSettings(e=""){return!e&&this.building&&(e=this.building?.id||this.buildings[0]?.id),this._building_settings&&this._building_settings[e]||{}}get organisation(){return this._organisation}get regions(){return this._regions.getValue()}get region(){return this._active_region.getValue()}set region(e){this.setRegion(e)}setRegion(e){var i=this;return z(function*(){e&&(i._active_region.next(e),yield i.loadRegionData(e),i._setBuildingFromTimezone(),i.building?.parent_id!==e.id&&i.buildingsForRegion(e).length?i.building=i.buildingsForRegion(e)[0]:i._updateSettingOverrides())})()}get buildings(){return this._buildings.getValue()||[]}get building(){return this._active_building.getValue()}set building(e){e&&(this._active_building.next(e),this._service.get("dont_load_metadata")||this.loadBuildingData(e).then(()=>this._updateSettingOverrides()),this.regions.length&&this.region?.id!==e.parent_id&&(this.region=this.regions.find(i=>i.id===this.building.parent_id)))}get timezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone}get currency_code(){return this._service.get("app.currency")||this.building?.currency||"USD"}binding(e){return this.building?.bindings[e]||this._organisation?.bindings[e]}find(e){return this.buildings.find(i=>i.id===e)}get levels(){return this._levels.getValue()}constructor(e,i){this._service=e,this._router=i,this._initialised=new at(!1),this.initialised=this._initialised.asObservable(),this._regions=new at([]),this._active_region=new at(null),this._buildings=new at([]),this._active_building=new at(null),this._levels=new at([]),this._loaded_data=[],this.app_key=`${(this._service.app_name||"workplace").toLowerCase()}_app`,this.region_list=this._regions.asObservable(),this.building_list=this._buildings.asObservable(),this.level_list=this._levels.asObservable(),this.active_region=this._active_region.asObservable(),this.active_building=this._active_building.asObservable(),this.active_buildings=Vt([this._buildings,this._active_region]).pipe(me(([s,r])=>r?this.buildingsForRegion(r):this.buildings)),this.active_levels=Vt([this._levels,this._active_building]).pipe(me(([s,r])=>r?this.levelsForBuilding(r):[]),zn(1)),this._settings=[],this._region_settings={},this._building_settings={},ade().pipe(as(s=>s)).subscribe(()=>setTimeout(()=>this.init(),1e3)),Vt([this.active_region,this.active_building]).pipe(Zt(([s,r])=>!!r),_s(300)).subscribe(()=>this._updateSettingOverrides())}levelWithID(e){return this.levels.find(i=>e?.includes(i.id))}levelsForBuilding(e=this.building){return this.levels.filter(i=>i.parent_id&&i.parent_id===e?.id)}buildingsForRegion(e=this.region){return this.buildings.filter(i=>i.parent_id===e?.id)}levelsForRegion(e=this.region){const i=this.buildingsForRegion(e);return this.levels.filter(s=>s.parent_id&&i.find(r=>r.id===s.parent_id))}addZone(e){if(e.tags.includes("region")){const i=new lhe(e),s=this._regions.getValue().filter(r=>r.id!==i.id);s.push(i),this._regions.next(s)}else if(e.tags.includes("building")){const i=new Dz(e);let s=this._buildings.getValue().filter(r=>r.id!==i.id);s.push(i),s=s.sort((r,o)=>(r.name||"").localeCompare(o.name||"")),this._buildings.next(s)}else if(e.tags.includes("level")){const i=new gT(e);let s=this._levels.getValue().filter(r=>r.id!==i.id);s.push(i),s=s.sort((r,o)=>(r.name||"").localeCompare(o.name||"")),this._levels.next(s)}else console.warn("Unable to add zone as it is missing the required tag.",e.id)}removeZone(e){if(e.tags.includes("region")){const i=this._regions.getValue().filter(s=>s.id!==e.id);this._regions.next(i)}else if(e.tags.includes("building")){const i=this._buildings.getValue().filter(s=>s.id!==e.id);this._buildings.next(i)}else if(e.tags.includes("level")){const i=this._levels.getValue().filter(s=>s.id!==e.id);this._levels.next(i)}else console.warn("Unable to remove zone as it is missing the required tag.",e.id)}init(e=0){var i=this;return z(function*(){i._initialised.next(!1),yield i.load().catch(s=>{throw Ti("Error loading organisation data. Retrying..."),setTimeout(()=>i.init(e),Math.min(1e4,300*++e)),s}),i._initialised.next(!0),window.debug&&(window.application||(window.application={}),window.application.orgs=i)})()}load(){var e=this;return z(function*(){if(yield e.loadOrganisation(),yield e.loadRegions(),e._regions.getValue().length)for(const i of e._regions.getValue()){const s=yield e.loadBuildings(i.id);if(s.length){e._buildings.next(s);break}}else e._buildings.next(yield e.loadBuildings());yield e.loadSettings(),e._buildings.getValue()?.length||ji("ORG","Unable to find any building zones"),yield e.loadLevels(),e._updateSettingOverrides()})()}loadOrganisation(){var e=this;return z(function*(){const i=yield iT({tags:"org"}).pipe(me(s=>s.data)).toPromise();if(i.length){const s=mc(),r=i.find(l=>BE()||l.id===s?.config?.org_zone)||i[0],a=(yield(e._service.get("dont_load_metadata")?Ge({details:{}}):co(r.id,"bindings")).toPromise())?.details;e._organisation=new JZe({...r,bindings:a})}else ji("ORG","Unable to find organisation"),e._router.navigate(["/misconfigured"])})()}loadRegions(){var e=this;return z(function*(){const i=yield iT({tags:"region",parent_id:e._organisation?.id||"",limit:500}).pipe(me(s=>s.data.map(r=>new lhe(r))),Xi(()=>Ge([]))).toPromise();e._regions.next(i)})()}loadRegionData(e){var i=this;return z(function*(){if(i._loaded_data[e.id])return;const s=!i._service.get("dont_load_metadata"),r=s?co(e.id,i.app_key):Ge(new YE),o=s?co(e.id,"bindings"):Ge(new YE),[a,l,c]=yield Promise.all([r.pipe(me(u=>u?.details)).toPromise(),o.pipe(me(u=>u?.details)).toPromise(),i.loadBuildings(e.id)]);i._buildings.next(Ss([...i._buildings.getValue(),...c],"id")),i._loaded_data[e.id]=!0,e.bindings=l,i._region_settings[e.id]=a})()}loadBuildings(e=this._organisation?.id){return z(function*(){return yield iT({tags:"building",parent_id:e,limit:500}).pipe(me(s=>s.data.map(r=>new Dz(r)))).toPromise()})()}loadBuildingData(e){var i=this;return z(function*(){if(!e||i._loaded_data[e.id])return;const[s,r,o,a]=yield Promise.all([co(e.id,i.app_key).pipe(me(l=>l?.details),Xi(()=>Ge({}))).toPromise(),co(e.id,"bindings").pipe(me(l=>l?.details),Xi(()=>Ge({}))).toPromise(),co(e.id,"booking_rules").pipe(me(l=>l?.details),Xi(()=>Ge({}))).toPromise(),rYe({parent_id:e.id}).pipe(Xi(()=>Ge({data:{}})),me(l=>{try{return dpe(l?.data.find(c=>c.encryption_level===Yb.None)||{settings_string:""})}catch{return{}}})).toPromise()]);i._building_settings[e.id]={...a||{},...s||{}},e.bindings=r,e.booking_rules=o,i._loaded_data[e.id]=!0,i._updateSettingOverrides()})()}loadLevels(){var e=this;return z(function*(){let i=yield iT({tags:"level",authority_id:mc().id,limit:2500}).pipe(me(r=>r.data)).toPromise();i=i.filter(r=>r.parent_id),i?.length||e._router.navigate(["/misconfigured"]);let s=i.map(r=>new gT(r));s=s.sort((r,o)=>(r.name||"").localeCompare(o.name||"")),e._levels.next(s)})()}get available_room_configs(){return this.buildings.map(e=>[...e.room_configurations]).reduce((e,i)=>e.concat(i),[]).sort((e,i)=>e.name.localeCompare(i.name))}loadSettings(){var e=this;return z(function*(){if(e._organisation){if(!e._service.get("dont_load_metadata")){const s=(yield co(e._organisation?.id,e.app_key).toPromise())?.details,r=(yield co(e._organisation?.id,"settings").toPromise())?.details;e._settings=[r,s]}e._service.overrides=[...e._settings],yield e._initialiseActiveBuilding(),e._updateSettingOverrides()}})()}saveBuilding(e){const i=this._buildings.getValue().find(s=>s.id===e)?.parent_id;i&&i!==this._organisation.id&&sessionStorage.setItem("PLACEOS.region",i),sessionStorage.setItem("PLACEOS.building",e)}_initialiseActiveBuilding(){return new Promise(e=>{const i=sessionStorage.getItem("PLACEOS.building");if(i&&this.buildings.find(r=>r.id===i))return this.building=this.buildings.find(r=>r.id===i),e();this._service.get("app.use_geolocation")&&"geolocation"in navigator?navigator.geolocation.getCurrentPosition(r=>{const{latitude:o,longitude:a}=r.coords;let l=null;for(const c of this.buildings)if(c.location&&"0,0"!==c.location)if(l){const[u,d]=(l.location||"0,0").split(","),[h,p]=(c.location||"0,0").split(",");Math.sqrt(Math.pow(o-+h,2)+Math.pow(a-+p,2))<Math.sqrt(Math.pow(o-+u,2)+Math.pow(a-+d,2))&&(l=c)}else l=c;l&&(this.building=l),this.building?.id||this._setDefaultBuilding(),e()},()=>{this.building?.id||this._setDefaultBuilding(),e()}):this.building?.id||(this._setDefaultBuilding(),e())})}_setDefaultBuilding(){var e=this;return z(function*(){if(!e.buildings.length)return;const i=sessionStorage.getItem("PLACEOS.region");if(yield i?e.setRegion(e._regions.getValue().find(r=>r.id===i)):e._setRegionFromTimezone(),e._setBuildingFromTimezone(),e.building)return;const s=e._service.get("app.default_building");s&&(e.building=e.buildings.find(({id:r})=>r===s)),e.building||(e.building=e.buildings[0])})()}_setRegionFromTimezone(){var e=this;return z(function*(){const i=e.regions,s=e.timezone;for(const o of i)if(o.timezone===s)return yield e.setRegion(o);const r=s.split("/")[0];for(const o of i)if(o.timezone.startsWith(r))return yield e.setRegion(o)})()}_setBuildingFromTimezone(){const e=this.buildings.filter(r=>!this.region||r.parent_id===this.region?.id),i=this.timezone;for(const r of e)if(r.timezone===i)return void(this.building=r);const s=i.split("/")[0];for(const r of e)if(r.timezone.startsWith(s))return void(this.building=r)}_updateSettingOverrides(){setTimeout(()=>this._service.overrides=[this.buildingSettings(this.building?.id),this.regionSettings(this.region?.id),...this._settings],300)}static#e=this.\u0275fac=function(i){return new(i||t)(ae(nn),ae(lo))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var np=function(t){return t[t.GoogleMaps=0]="GoogleMaps",t[t.Mapbox=1]="Mapbox",t}(np||{});let a_=(()=>{class t extends hn{get map_keys(){return this._settings.get("app.maps_people.keys")||{}}get use_service(){return this._settings.get("app.maps_people.use_zones")||[]}get map_service(){return this._map_service.getValue()}get map_token(){return this._map_token.getValue()}get is_ready(){return this._ready.getValue()}constructor(e,i){super(),this._settings=e,this._org=i,this._map_service=new at(null),this._map_token=new at(""),this._ready=new at(!1),this._injected={},this._custom_zone=new at(""),this.available$=Vt([this._org.active_building,this._custom_zone,this._org.initialised]).pipe(Zt(([s])=>!!s),_s(300),gi(()=>this._injectMapsApiKeys()),me(([s,r])=>this.map_keys.mapsindoors&&(this.use_service.includes(r||s.id)||this.use_service.includes("*"))),zn(1))}setCustomZone(e){this._custom_zone.next(e)}_injectMapsApiKeys(){ji("MapsPeople","Initializing Maps API Keys"),this._ready.next(!1);const{mapsindoors:e,google:i,mapbox:s}=this.map_keys;if(e){if(e&&!this._injected.mapsindoors){const r=document.createElement("script");r.src=`https://app.mapsindoors.com/mapsindoors/js/sdk/4.35.0/mapsindoors-4.35.0.js.gz?apikey=${e}`,document.body.appendChild(r),this._injected.mapsindoors=!0}if(i&&s)return void ji("MapsPeople","Both Google and Mapbox keys provided",void 0,"error");if(i&&!this._injected.google){const r=document.createElement("script");r.src=`https://maps.googleapis.com/maps/api/js?libraries=geometry&key=${i}`,document.body.appendChild(r),this._map_service.next(np.GoogleMaps),this._injected.google=!0}else if(s&&!this._injected.mapbox){const r=document.createElement("script");r.src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js",document.body.appendChild(r);const o=document.createElement("link");o.rel="stylesheet",o.href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css",document.head.appendChild(o),this._map_service.next(np.Mapbox),this._map_token.next(s),this._injected.mapbox=!0}(i||s)&&(ji("MapsPeople","Initialized Maps API Keys for "+(i?"Google Maps":"Mapbox")),this.timeout("ready",()=>this._ready.next(!0),300))}}static#e=this.\u0275fac=function(i){return new(i||t)(ae(nn),ae(Sn))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();zo("show",[ms(":enter",[bn({opacity:0,height:0}),Cs(300,bn({opacity:1,height:"*"}))]),ms(":leave",[bn({opacity:1,height:"*"}),Cs(300,bn({opacity:0,height:0}))])]);const ppe=zo("show",[Xs("show",bn({opacity:1,height:"*"})),Xs("hide",bn({opacity:0,height:0,"pointer-events":"none"})),ms("show <=> hide",Cs("200ms ease-in"))]),Eet=[void 0,null,""];function Vr(t){let n="";if(t)for(const e in t)e in t&&!Eet.includes(t[e])&&(n+=`${n?"&":""}${e}=${encodeURIComponent(t[e])}`);return n}let ST,fpe=!1;function mpe(){return fpe}function jz(){return jz=z(function*(t){if(t.isEnabled&&(yield t.checkForUpdate())){if(ji("CACHE","Activating changes to the cache..."),!(yield t.activateUpdate()))return;fpe=!0,ZO("Newer version of the application is available","Refresh",()=>location.reload())}}),jz.apply(this,arguments)}function Hz(){return Hz=z(function*(t){const n=t.protocol||location.protocol,e=t.domain||location.hostname,i=t.port||location.port,s=t.use_domain?`${n}//${e}:${i}`:location.origin,r=(location.pathname+"/").replace("//","/"),o=t.mock||location.href.includes("mock=true")||"true"===localStorage.getItem("mock"),a={auth_type:"auth_code",scope:"public",host:`${e}${i?":"+i:""}`,auth_uri:`${s}/auth/oauth/authorize`,token_uri:`${s}/auth/oauth/token`,redirect_uri:`${location.origin}${r}oauth-resp.html`,handle_login:!t.local_login,use_iframe:!0,mock:o};return localStorage&&localStorage.setItem("mock",`${!!o&&!location.href.includes("mock=false")}`),o&&ZO("Application in mock mode."),function NXe(t){var n;return Ji=t||Ji,Ji.token_header=null!==(n=Ji.token_header)&&void 0!==n?n:function mXe(){return window.location!==window.parent.location}(),window.AbortController||(window.AbortController=gXe),_r="session"===Ji.storage?sessionStorage:localStorage,gr=Do.hashStr(Ji.redirect_uri,!1),uz()}(a)}),Hz.apply(this,arguments)}function _pe(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function gpe(t,n,e){return n&&_pe(t.prototype,n),e&&_pe(t,e),t}function th(){return th=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},th.apply(this,arguments)}function sR(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,Wz(t,n)}function Wz(t,n){return(Wz=Object.setPrototypeOf||function(e,i){return e.__proto__=i,e})(t,n)}Ss(Mo([{value:"Dateline Standard Time",abbr:"DST",offset:-12,isdst:!1,text:"(UTC-12:00) International Date Line West",utc:["Etc/GMT+12"]},{value:"UTC-11",abbr:"U",offset:-11,isdst:!1,text:"(UTC-11:00) Coordinated Universal Time-11",utc:["Etc/GMT+11","Pacific/Midway","Pacific/Niue","Pacific/Pago_Pago"]},{value:"Hawaiian Standard Time",abbr:"HST",offset:-10,isdst:!1,text:"(UTC-10:00) Hawaii",utc:["Etc/GMT+10","Pacific/Honolulu","Pacific/Johnston","Pacific/Rarotonga","Pacific/Tahiti"]},{value:"Alaskan Standard Time",abbr:"AKDT",offset:-8,isdst:!0,text:"(UTC-09:00) Alaska",utc:["America/Anchorage","America/Juneau","America/Nome","America/Sitka","America/Yakutat"]},{value:"Pacific Standard Time (Mexico)",abbr:"PDT",offset:-7,isdst:!0,text:"(UTC-08:00) Baja California",utc:["America/Santa_Isabel"]},{value:"Pacific Daylight Time",abbr:"PDT",offset:-7,isdst:!0,text:"(UTC-07:00) Pacific Time (US & Canada)",utc:["America/Dawson","America/Los_Angeles","America/Tijuana","America/Vancouver","America/Whitehorse"]},{value:"Pacific Standard Time",abbr:"PST",offset:-8,isdst:!1,text:"(UTC-08:00) Pacific Time (US & Canada)",utc:["America/Dawson","America/Los_Angeles","America/Tijuana","America/Vancouver","America/Whitehorse","PST8PDT"]},{value:"US Mountain Standard Time",abbr:"UMST",offset:-7,isdst:!1,text:"(UTC-07:00) Arizona",utc:["America/Creston","America/Dawson_Creek","America/Hermosillo","America/Phoenix","Etc/GMT+7"]},{value:"Mountain Standard Time (Mexico)",abbr:"MDT",offset:-6,isdst:!0,text:"(UTC-07:00) Chihuahua, La Paz, Mazatlan",utc:["America/Chihuahua","America/Mazatlan"]},{value:"Mountain Standard Time",abbr:"MDT",offset:-6,isdst:!0,text:"(UTC-07:00) Mountain Time (US & Canada)",utc:["America/Boise","America/Cambridge_Bay","America/Denver","America/Edmonton","America/Inuvik","America/Ojinaga","America/Yellowknife","MST7MDT"]},{value:"Central America Standard Time",abbr:"CAST",offset:-6,isdst:!1,text:"(UTC-06:00) Central America",utc:["America/Belize","America/Costa_Rica","America/El_Salvador","America/Guatemala","America/Managua","America/Tegucigalpa","Etc/GMT+6","Pacific/Galapagos"]},{value:"Central Standard Time",abbr:"CDT",offset:-5,isdst:!0,text:"(UTC-06:00) Central Time (US & Canada)",utc:["America/Chicago","America/Indiana/Knox","America/Indiana/Tell_City","America/Matamoros","America/Menominee","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Rainy_River","America/Rankin_Inlet","America/Resolute","America/Winnipeg","CST6CDT"]},{value:"Central Standard Time (Mexico)",abbr:"CDT",offset:-5,isdst:!0,text:"(UTC-06:00) Guadalajara, Mexico City, Monterrey",utc:["America/Bahia_Banderas","America/Cancun","America/Merida","America/Mexico_City","America/Monterrey"]},{value:"Canada Central Standard Time",abbr:"CCST",offset:-6,isdst:!1,text:"(UTC-06:00) Saskatchewan",utc:["America/Regina","America/Swift_Current"]},{value:"SA Pacific Standard Time",abbr:"SPST",offset:-5,isdst:!1,text:"(UTC-05:00) Bogota, Lima, Quito",utc:["America/Bogota","America/Cayman","America/Coral_Harbour","America/Eirunepe","America/Guayaquil","America/Jamaica","America/Lima","America/Panama","America/Rio_Branco","Etc/GMT+5"]},{value:"Eastern Standard Time",abbr:"EDT",offset:-4,isdst:!0,text:"(UTC-05:00) Eastern Time (US & Canada)",utc:["America/Detroit","America/Havana","America/Indiana/Petersburg","America/Indiana/Vincennes","America/Indiana/Winamac","America/Iqaluit","America/Kentucky/Monticello","America/Louisville","America/Montreal","America/Nassau","America/New_York","America/Nipigon","America/Pangnirtung","America/Port-au-Prince","America/Thunder_Bay","America/Toronto","EST5EDT"]},{value:"US Eastern Standard Time",abbr:"UEDT",offset:-4,isdst:!0,text:"(UTC-05:00) Indiana (East)",utc:["America/Indiana/Marengo","America/Indiana/Vevay","America/Indianapolis"]},{value:"Venezuela Standard Time",abbr:"VST",offset:-4.5,isdst:!1,text:"(UTC-04:30) Caracas",utc:["America/Caracas"]},{value:"Paraguay Standard Time",abbr:"PYT",offset:-4,isdst:!1,text:"(UTC-04:00) Asuncion",utc:["America/Asuncion"]},{value:"Atlantic Standard Time",abbr:"ADT",offset:-3,isdst:!0,text:"(UTC-04:00) Atlantic Time (Canada)",utc:["America/Glace_Bay","America/Goose_Bay","America/Halifax","America/Moncton","America/Thule","Atlantic/Bermuda"]},{value:"Central Brazilian Standard Time",abbr:"CBST",offset:-4,isdst:!1,text:"(UTC-04:00) Cuiaba",utc:["America/Campo_Grande","America/Cuiaba"]},{value:"SA Western Standard Time",abbr:"SWST",offset:-4,isdst:!1,text:"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan",utc:["America/Anguilla","America/Antigua","America/Aruba","America/Barbados","America/Blanc-Sablon","America/Boa_Vista","America/Curacao","America/Dominica","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guyana","America/Kralendijk","America/La_Paz","America/Lower_Princes","America/Manaus","America/Marigot","America/Martinique","America/Montserrat","America/Port_of_Spain","America/Porto_Velho","America/Puerto_Rico","America/Santo_Domingo","America/St_Barthelemy","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Tortola","Etc/GMT+4"]},{value:"Pacific SA Standard Time",abbr:"PSST",offset:-4,isdst:!1,text:"(UTC-04:00) Santiago",utc:["America/Santiago","Antarctica/Palmer"]},{value:"Newfoundland Standard Time",abbr:"NDT",offset:-2.5,isdst:!0,text:"(UTC-03:30) Newfoundland",utc:["America/St_Johns"]},{value:"E. South America Standard Time",abbr:"ESAST",offset:-3,isdst:!1,text:"(UTC-03:00) Brasilia",utc:["America/Sao_Paulo"]},{value:"Argentina Standard Time",abbr:"AST",offset:-3,isdst:!1,text:"(UTC-03:00) Buenos Aires",utc:["America/Argentina/La_Rioja","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Buenos_Aires","America/Catamarca","America/Cordoba","America/Jujuy","America/Mendoza"]},{value:"SA Eastern Standard Time",abbr:"SEST",offset:-3,isdst:!1,text:"(UTC-03:00) Cayenne, Fortaleza",utc:["America/Araguaina","America/Belem","America/Cayenne","America/Fortaleza","America/Maceio","America/Paramaribo","America/Recife","America/Santarem","Antarctica/Rothera","Atlantic/Stanley","Etc/GMT+3"]},{value:"Greenland Standard Time",abbr:"GDT",offset:-3,isdst:!0,text:"(UTC-03:00) Greenland",utc:["America/Godthab"]},{value:"Montevideo Standard Time",abbr:"MST",offset:-3,isdst:!1,text:"(UTC-03:00) Montevideo",utc:["America/Montevideo"]},{value:"Bahia Standard Time",abbr:"BST",offset:-3,isdst:!1,text:"(UTC-03:00) Salvador",utc:["America/Bahia"]},{value:"UTC-02",abbr:"U",offset:-2,isdst:!1,text:"(UTC-02:00) Coordinated Universal Time-02",utc:["America/Noronha","Atlantic/South_Georgia","Etc/GMT+2"]},{value:"Mid-Atlantic Standard Time",abbr:"MDT",offset:-1,isdst:!0,text:"(UTC-02:00) Mid-Atlantic - Old",utc:[]},{value:"Azores Standard Time",abbr:"ADT",offset:0,isdst:!0,text:"(UTC-01:00) Azores",utc:["America/Scoresbysund","Atlantic/Azores"]},{value:"Cape Verde Standard Time",abbr:"CVST",offset:-1,isdst:!1,text:"(UTC-01:00) Cape Verde Is.",utc:["Atlantic/Cape_Verde","Etc/GMT+1"]},{value:"Morocco Standard Time",abbr:"MDT",offset:1,isdst:!0,text:"(UTC) Casablanca",utc:["Africa/Casablanca","Africa/El_Aaiun"]},{value:"UTC",abbr:"UTC",offset:0,isdst:!1,text:"(UTC) Coordinated Universal Time",utc:["America/Danmarkshavn","Etc/GMT"]},{value:"GMT Standard Time",abbr:"GMT",offset:0,isdst:!1,text:"(UTC) Edinburgh, London",utc:["Europe/Isle_of_Man","Europe/Guernsey","Europe/Jersey","Europe/London"]},{value:"British Summer Time",abbr:"BST",offset:1,isdst:!0,text:"(UTC+01:00) Edinburgh, London",utc:["Europe/Isle_of_Man","Europe/Guernsey","Europe/Jersey","Europe/London"]},{value:"GMT Standard Time",abbr:"GDT",offset:1,isdst:!0,text:"(UTC) Dublin, Lisbon",utc:["Atlantic/Canary","Atlantic/Faeroe","Atlantic/Madeira","Europe/Dublin","Europe/Lisbon"]},{value:"Greenwich Standard Time",abbr:"GST",offset:0,isdst:!1,text:"(UTC) Monrovia, Reykjavik",utc:["Africa/Abidjan","Africa/Accra","Africa/Bamako","Africa/Banjul","Africa/Bissau","Africa/Conakry","Africa/Dakar","Africa/Freetown","Africa/Lome","Africa/Monrovia","Africa/Nouakchott","Africa/Ouagadougou","Africa/Sao_Tome","Atlantic/Reykjavik","Atlantic/St_Helena"]},{value:"W. Europe Standard Time",abbr:"WEDT",offset:2,isdst:!0,text:"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",utc:["Arctic/Longyearbyen","Europe/Amsterdam","Europe/Andorra","Europe/Berlin","Europe/Busingen","Europe/Gibraltar","Europe/Luxembourg","Europe/Malta","Europe/Monaco","Europe/Oslo","Europe/Rome","Europe/San_Marino","Europe/Stockholm","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Zurich"]},{value:"Central Europe Standard Time",abbr:"CEDT",offset:2,isdst:!0,text:"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague",utc:["Europe/Belgrade","Europe/Bratislava","Europe/Budapest","Europe/Ljubljana","Europe/Podgorica","Europe/Prague","Europe/Tirane"]},{value:"Romance Standard Time",abbr:"RDT",offset:2,isdst:!0,text:"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris",utc:["Africa/Ceuta","Europe/Brussels","Europe/Copenhagen","Europe/Madrid","Europe/Paris"]},{value:"Central European Standard Time",abbr:"CEDT",offset:2,isdst:!0,text:"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb",utc:["Europe/Sarajevo","Europe/Skopje","Europe/Warsaw","Europe/Zagreb"]},{value:"W. Central Africa Standard Time",abbr:"WCAST",offset:1,isdst:!1,text:"(UTC+01:00) West Central Africa",utc:["Africa/Algiers","Africa/Bangui","Africa/Brazzaville","Africa/Douala","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Luanda","Africa/Malabo","Africa/Ndjamena","Africa/Niamey","Africa/Porto-Novo","Africa/Tunis","Etc/GMT-1"]},{value:"Namibia Standard Time",abbr:"NST",offset:1,isdst:!1,text:"(UTC+01:00) Windhoek",utc:["Africa/Windhoek"]},{value:"GTB Standard Time",abbr:"GDT",offset:3,isdst:!0,text:"(UTC+02:00) Athens, Bucharest",utc:["Asia/Nicosia","Europe/Athens","Europe/Bucharest","Europe/Chisinau"]},{value:"Middle East Standard Time",abbr:"MEDT",offset:3,isdst:!0,text:"(UTC+02:00) Beirut",utc:["Asia/Beirut"]},{value:"Egypt Standard Time",abbr:"EST",offset:2,isdst:!1,text:"(UTC+02:00) Cairo",utc:["Africa/Cairo"]},{value:"Syria Standard Time",abbr:"SDT",offset:3,isdst:!0,text:"(UTC+02:00) Damascus",utc:["Asia/Damascus"]},{value:"E. Europe Standard Time",abbr:"EEDT",offset:3,isdst:!0,text:"(UTC+02:00) E. Europe",utc:["Asia/Nicosia","Europe/Athens","Europe/Bucharest","Europe/Chisinau","Europe/Helsinki","Europe/Kiev","Europe/Mariehamn","Europe/Nicosia","Europe/Riga","Europe/Sofia","Europe/Tallinn","Europe/Uzhgorod","Europe/Vilnius","Europe/Zaporozhye"]},{value:"South Africa Standard Time",abbr:"SAST",offset:2,isdst:!1,text:"(UTC+02:00) Harare, Pretoria",utc:["Africa/Blantyre","Africa/Bujumbura","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Kigali","Africa/Lubumbashi","Africa/Lusaka","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Etc/GMT-2"]},{value:"FLE Standard Time",abbr:"FDT",offset:3,isdst:!0,text:"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius",utc:["Europe/Helsinki","Europe/Kiev","Europe/Mariehamn","Europe/Riga","Europe/Sofia","Europe/Tallinn","Europe/Uzhgorod","Europe/Vilnius","Europe/Zaporozhye"]},{value:"Turkey Standard Time",abbr:"TDT",offset:3,isdst:!1,text:"(UTC+03:00) Istanbul",utc:["Europe/Istanbul"]},{value:"Israel Standard Time",abbr:"JDT",offset:3,isdst:!0,text:"(UTC+02:00) Jerusalem",utc:["Asia/Jerusalem"]},{value:"Libya Standard Time",abbr:"LST",offset:2,isdst:!1,text:"(UTC+02:00) Tripoli",utc:["Africa/Tripoli"]},{value:"Jordan Standard Time",abbr:"JST",offset:3,isdst:!1,text:"(UTC+03:00) Amman",utc:["Asia/Amman"]},{value:"Arabic Standard Time",abbr:"AST",offset:3,isdst:!1,text:"(UTC+03:00) Baghdad",utc:["Asia/Baghdad"]},{value:"Kaliningrad Standard Time",abbr:"KST",offset:3,isdst:!1,text:"(UTC+02:00) Kaliningrad",utc:["Europe/Kaliningrad"]},{value:"Arab Standard Time",abbr:"AST",offset:3,isdst:!1,text:"(UTC+03:00) Kuwait, Riyadh",utc:["Asia/Aden","Asia/Bahrain","Asia/Kuwait","Asia/Qatar","Asia/Riyadh"]},{value:"E. Africa Standard Time",abbr:"EAST",offset:3,isdst:!1,text:"(UTC+03:00) Nairobi",utc:["Africa/Addis_Ababa","Africa/Asmera","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Juba","Africa/Kampala","Africa/Khartoum","Africa/Mogadishu","Africa/Nairobi","Antarctica/Syowa","Etc/GMT-3","Indian/Antananarivo","Indian/Comoro","Indian/Mayotte"]},{value:"Moscow Standard Time",abbr:"MSK",offset:3,isdst:!1,text:"(UTC+03:00) Moscow, St. Petersburg, Volgograd, Minsk",utc:["Europe/Kirov","Europe/Moscow","Europe/Simferopol","Europe/Volgograd","Europe/Minsk"]},{value:"Samara Time",abbr:"SAMT",offset:4,isdst:!1,text:"(UTC+04:00) Samara, Ulyanovsk, Saratov",utc:["Europe/Astrakhan","Europe/Samara","Europe/Ulyanovsk"]},{value:"Iran Standard Time",abbr:"IDT",offset:4.5,isdst:!0,text:"(UTC+03:30) Tehran",utc:["Asia/Tehran"]},{value:"Arabian Standard Time",abbr:"AST",offset:4,isdst:!1,text:"(UTC+04:00) Abu Dhabi, Muscat",utc:["Asia/Dubai","Asia/Muscat","Etc/GMT-4"]},{value:"Azerbaijan Standard Time",abbr:"ADT",offset:5,isdst:!0,text:"(UTC+04:00) Baku",utc:["Asia/Baku"]},{value:"Mauritius Standard Time",abbr:"MST",offset:4,isdst:!1,text:"(UTC+04:00) Port Louis",utc:["Indian/Mahe","Indian/Mauritius","Indian/Reunion"]},{value:"Georgian Standard Time",abbr:"GET",offset:4,isdst:!1,text:"(UTC+04:00) Tbilisi",utc:["Asia/Tbilisi"]},{value:"Caucasus Standard Time",abbr:"CST",offset:4,isdst:!1,text:"(UTC+04:00) Yerevan",utc:["Asia/Yerevan"]},{value:"Afghanistan Standard Time",abbr:"AST",offset:4.5,isdst:!1,text:"(UTC+04:30) Kabul",utc:["Asia/Kabul"]},{value:"West Asia Standard Time",abbr:"WAST",offset:5,isdst:!1,text:"(UTC+05:00) Ashgabat, Tashkent",utc:["Antarctica/Mawson","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Dushanbe","Asia/Oral","Asia/Samarkand","Asia/Tashkent","Etc/GMT-5","Indian/Kerguelen","Indian/Maldives"]},{value:"Yekaterinburg Time",abbr:"YEKT",offset:5,isdst:!1,text:"(UTC+05:00) Yekaterinburg",utc:["Asia/Yekaterinburg"]},{value:"Pakistan Standard Time",abbr:"PKT",offset:5,isdst:!1,text:"(UTC+05:00) Islamabad, Karachi",utc:["Asia/Karachi"]},{value:"India Standard Time",abbr:"IST",offset:5.5,isdst:!1,text:"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",utc:["Asia/Kolkata"]},{value:"Sri Lanka Standard Time",abbr:"SLST",offset:5.5,isdst:!1,text:"(UTC+05:30) Sri Jayawardenepura",utc:["Asia/Colombo"]},{value:"Nepal Standard Time",abbr:"NST",offset:5.75,isdst:!1,text:"(UTC+05:45) Kathmandu",utc:["Asia/Kathmandu"]},{value:"Central Asia Standard Time",abbr:"CAST",offset:6,isdst:!1,text:"(UTC+06:00) Nur-Sultan (Astana)",utc:["Antarctica/Vostok","Asia/Almaty","Asia/Bishkek","Asia/Qyzylorda","Asia/Urumqi","Etc/GMT-6","Indian/Chagos"]},{value:"Bangladesh Standard Time",abbr:"BST",offset:6,isdst:!1,text:"(UTC+06:00) Dhaka",utc:["Asia/Dhaka","Asia/Thimphu"]},{value:"Myanmar Standard Time",abbr:"MST",offset:6.5,isdst:!1,text:"(UTC+06:30) Yangon (Rangoon)",utc:["Asia/Rangoon","Indian/Cocos"]},{value:"SE Asia Standard Time",abbr:"SAST",offset:7,isdst:!1,text:"(UTC+07:00) Bangkok, Hanoi, Jakarta",utc:["Antarctica/Davis","Asia/Bangkok","Asia/Hovd","Asia/Jakarta","Asia/Phnom_Penh","Asia/Pontianak","Asia/Saigon","Asia/Vientiane","Etc/GMT-7","Indian/Christmas"]},{value:"N. Central Asia Standard Time",abbr:"NCAST",offset:7,isdst:!1,text:"(UTC+07:00) Novosibirsk",utc:["Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk"]},{value:"China Standard Time",abbr:"CST",offset:8,isdst:!1,text:"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi",utc:["Asia/Hong_Kong","Asia/Macau","Asia/Shanghai"]},{value:"North Asia Standard Time",abbr:"NAST",offset:8,isdst:!1,text:"(UTC+08:00) Krasnoyarsk",utc:["Asia/Krasnoyarsk"]},{value:"Singapore Standard Time",abbr:"MPST",offset:8,isdst:!1,text:"(UTC+08:00) Kuala Lumpur, Singapore",utc:["Asia/Brunei","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Makassar","Asia/Manila","Asia/Singapore","Etc/GMT-8"]},{value:"W. Australia Standard Time",abbr:"WAST",offset:8,isdst:!1,text:"(UTC+08:00) Perth",utc:["Antarctica/Casey","Australia/Perth"]},{value:"Taipei Standard Time",abbr:"TST",offset:8,isdst:!1,text:"(UTC+08:00) Taipei",utc:["Asia/Taipei"]},{value:"Ulaanbaatar Standard Time",abbr:"UST",offset:8,isdst:!1,text:"(UTC+08:00) Ulaanbaatar",utc:["Asia/Choibalsan","Asia/Ulaanbaatar"]},{value:"North Asia East Standard Time",abbr:"NAEST",offset:8,isdst:!1,text:"(UTC+08:00) Irkutsk",utc:["Asia/Irkutsk"]},{value:"Japan Standard Time",abbr:"JST",offset:9,isdst:!1,text:"(UTC+09:00) Osaka, Sapporo, Tokyo",utc:["Asia/Dili","Asia/Jayapura","Asia/Tokyo","Etc/GMT-9","Pacific/Palau"]},{value:"Korea Standard Time",abbr:"KST",offset:9,isdst:!1,text:"(UTC+09:00) Seoul",utc:["Asia/Pyongyang","Asia/Seoul"]},{value:"Cen. Australia Standard Time",abbr:"CAST",offset:9.5,isdst:!1,text:"(UTC+09:30) Adelaide",utc:["Australia/Adelaide","Australia/Broken_Hill"]},{value:"AUS Central Standard Time",abbr:"ACST",offset:9.5,isdst:!1,text:"(UTC+09:30) Darwin",utc:["Australia/Darwin"]},{value:"E. Australia Standard Time",abbr:"EAST",offset:10,isdst:!1,text:"(UTC+10:00) Brisbane",utc:["Australia/Brisbane","Australia/Lindeman"]},{value:"AUS Eastern Standard Time",abbr:"AEST",offset:10,isdst:!1,text:"(UTC+10:00) Canberra, Melbourne, Sydney",utc:["Australia/Melbourne","Australia/Sydney"]},{value:"West Pacific Standard Time",abbr:"WPST",offset:10,isdst:!1,text:"(UTC+10:00) Guam, Port Moresby",utc:["Antarctica/DumontDUrville","Etc/GMT-10","Pacific/Guam","Pacific/Port_Moresby","Pacific/Saipan","Pacific/Truk"]},{value:"Tasmania Standard Time",abbr:"TST",offset:10,isdst:!1,text:"(UTC+10:00) Hobart",utc:["Australia/Currie","Australia/Hobart"]},{value:"Yakutsk Standard Time",abbr:"YST",offset:9,isdst:!1,text:"(UTC+09:00) Yakutsk",utc:["Asia/Chita","Asia/Khandyga","Asia/Yakutsk"]},{value:"Central Pacific Standard Time",abbr:"CPST",offset:11,isdst:!1,text:"(UTC+11:00) Solomon Is., New Caledonia",utc:["Antarctica/Macquarie","Etc/GMT-11","Pacific/Efate","Pacific/Guadalcanal","Pacific/Kosrae","Pacific/Noumea","Pacific/Ponape"]},{value:"Vladivostok Standard Time",abbr:"VST",offset:11,isdst:!1,text:"(UTC+11:00) Vladivostok",utc:["Asia/Sakhalin","Asia/Ust-Nera","Asia/Vladivostok"]},{value:"New Zealand Standard Time",abbr:"NZST",offset:12,isdst:!1,text:"(UTC+12:00) Auckland, Wellington",utc:["Antarctica/McMurdo","Pacific/Auckland"]},{value:"UTC+12",abbr:"U",offset:12,isdst:!1,text:"(UTC+12:00) Coordinated Universal Time+12",utc:["Etc/GMT-12","Pacific/Funafuti","Pacific/Kwajalein","Pacific/Majuro","Pacific/Nauru","Pacific/Tarawa","Pacific/Wake","Pacific/Wallis"]},{value:"Fiji Standard Time",abbr:"FST",offset:12,isdst:!1,text:"(UTC+12:00) Fiji",utc:["Pacific/Fiji"]},{value:"Magadan Standard Time",abbr:"MST",offset:12,isdst:!1,text:"(UTC+12:00) Magadan",utc:["Asia/Anadyr","Asia/Kamchatka","Asia/Magadan","Asia/Srednekolymsk"]},{value:"Kamchatka Standard Time",abbr:"KDT",offset:13,isdst:!0,text:"(UTC+12:00) Petropavlovsk-Kamchatsky - Old",utc:["Asia/Kamchatka"]},{value:"Tonga Standard Time",abbr:"TST",offset:13,isdst:!1,text:"(UTC+13:00) Nuku'alofa",utc:["Etc/GMT-13","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Tongatapu"]},{value:"Samoa Standard Time",abbr:"SST",offset:13,isdst:!1,text:"(UTC+13:00) Samoa",utc:["Pacific/Apia"]}].map(t=>t.utc))).sort();var bpe={},vpe="/api/engine/v2/uploads";function ype(){return vpe}function Aet(t,n){void 0===n&&(n=!1);var e=n?1e3:1024;if(t<e)return t+(n?" iB":" B");var i=Math.floor(Math.log(t)/Math.log(e)),s=(n?"kMGTPE":"KMGTPE").charAt(i-1)+(n?"iB":"B");return(t/Math.pow(e,i)).toFixed(1)+" "+s}function xT(t){var n="";t.length%2>0&&(t="0"+t);for(var e=0,i=t.length;e<i;e+=2)n+=String.fromCharCode(parseInt(t.slice(e,e+2),16));return n}function qz(t){var n="";if(t)for(var e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n+=(n?"&":"")+e+"="+encodeURIComponent(t[e]));return n}var ET="",TT="",Kz=function(){function t(e,i){var s=this;this._upload=void 0,this._endpoint=void 0,this.upload_id=void 0,this._params={},this._abort_ctrl=new AbortController,this._dispose=void 0,this._upload=e,this._endpoint=i,this._abort_ctrl.signal.addEventListener("abort",function(){return s._dispose?s._dispose():""})}t.setToken=function(e){ET=e},t.setApiKey=function(e){TT=e};var n=t.prototype;return n.initialise=function(){try{var e,i=this,s=i._abort_ctrl.signal,r=i._upload,o=r.file,a=r.mime_type;i._params.file_size=""+o.size,i._params.file_name=o.name,a&&"binary/octet-stream"!==a&&(i._params.file_mime=a),i._params=th({},i._params,i._upload.params),(null==(e=o.dir_path)?void 0:e.length)>0&&(i._params.file_path=o.dir_path);var l=i.base_request_headers,c=qz(i._params);return Promise.resolve(fetch(i._endpoint+"/new"+(c?"?"+c:""),{headers:l,signal:s})).then(function(u){return u.json()})}catch(u){return Promise.reject(u)}},n.create=function(e){try{var i=this,s=i._abort_ctrl.signal,r=i.base_request_headers;return e.file_id&&(i._params.file_id=e.file_id),i._upload.mime_type&&(i._params.file_mime=e.mime_type),e.parameters&&(i._params.parameters=e.parameters),e.permissions&&(i._params.permissions=e.permissions),e.public&&(i._params.public=e.public),e.expires&&(i._params.expires=e.expires||0),Promise.resolve(fetch(""+i._endpoint,{body:JSON.stringify(i._params),method:"POST",headers:r,signal:s})).then(function(o){return Promise.resolve(o.json()).then(function(a){return i.upload_id=a.upload_id,a})})}catch(o){return Promise.reject(o)}},n.sign=function(e,i){void 0===i&&(i="");try{var s=this;if(!s.upload_id)throw new Error("Upload resource not initialised");var r=s._abort_ctrl.signal,o=s.base_request_headers,a=new URLSearchParams;return a.set("part",e.toString()),i&&a.set("file_id",encodeURIComponent(i)),Promise.resolve(fetch(s._endpoint+"/"+s.encoded_id+"/edit?"+a.toString(),{method:"GET",headers:o,signal:r})).then(function(l){return Promise.resolve(l.json())})}catch(l){return Promise.reject(l)}},n.update=function(e){void 0===e&&(e={});try{var i=this;if(!i.upload_id)throw new Error("Upload resource not initialised");var s=i._abort_ctrl.signal,r=i.base_request_headers;return Promise.resolve(fetch(i._endpoint+"/"+i.encoded_id,{body:JSON.stringify(e),method:"PUT",headers:r,signal:s})).then(function(o){return Promise.resolve(o.json())})}catch(o){return Promise.reject(o)}},n.signedRequest=function(e){try{return Promise.resolve(fetch(e.signature.url,{body:e.data,method:e.signature.verb,headers:e.signature.headers})).then(function(i){return Promise.resolve(i.text()).then(function(s){var r={body:s,responseXML:null};try{r.responseXML=(new window.DOMParser).parseFromString(r.body,"text/xml")}catch{}return r})})}catch(i){return Promise.reject(i)}},n.signNextChunk=function(e,i,s,r){void 0===r&&(r=null);try{var o=this;if(!o.upload_id)throw new Error("Upload resource not initialised");var a=o._abort_ctrl.signal,l={part_list:s};r&&(l.part_data=r);var c=o.base_request_headers,u=qz({part:""+e,file_id:i,file_mime:o._upload.mime_type});return Promise.resolve(fetch(o._endpoint+"/"+o.encoded_id+(u?"?"+u:""),{body:JSON.stringify(l),method:Object.keys(l).length>0?"PATCH":"PUT",headers:c,signal:a})).then(function(d){return Promise.resolve(d.json())})}catch(d){return Promise.reject(d)}},n.signChunk=function(e,i){void 0===i&&(i=null);try{var s=this,r=s._abort_ctrl.signal,o=s.base_request_headers,a=qz({part:""+e,file_id:i});return Promise.resolve(fetch(s._endpoint+"/edit"+(a?"?"+a:""),{headers:o,signal:r})).then(function(l){return Promise.resolve(l.json())})}catch(l){return Promise.reject(l)}},n.updateStatus=function(e){void 0===e&&(e={});try{var i=this;if(!i.upload_id)throw new Error("Upload resource not initialised");var s=i._abort_ctrl.signal;return Promise.resolve(fetch(i._endpoint+"/"+i.encoded_id,{headers:i.base_request_headers,method:Object.keys(e).length>0?"PATCH":"PUT",body:JSON.stringify(e),signal:s})).then(function(r){return Promise.resolve(r.json())})}catch(r){return Promise.reject(r)}},n.abort=function(){this._abort_ctrl.abort()},n.destroy=function(){this.abort();var e=new Headers;if(e.append("Accept","application/json"),ET?e.append("Authorization","Bearer "+ET):TT&&e.append("X-API-Key",""+TT),this.upload_id)return fetch(this._endpoint+"/"+this.encoded_id,{headers:e,method:"DELETE"})},n.performSignedRequest=function(e,i){var s=this;return void 0===i&&(i=function(){}),new Promise(function(r,o){var a=new XMLHttpRequest;a.upload.addEventListener("progress",function(d){return i(d)}),a.addEventListener("load",function(d){i(d),a.status>=200&&a.status<300||a.status===e.expected?r(a):o(a.status+": "+a.statusText)});var l=function(d){s._upload.onError(d),o(d)};a.addEventListener("error",function(){return l(a.status+": "+(a.statusText||"unknown error"))}),a.addEventListener("abort",function(){return l(a.statusText||"browser aborted")}),a.open(e.signature.verb,e.signature.url,!0);var c=e.signature.headers;for(var u in c)u in c&&a.setRequestHeader(u,c[u]);s._dispose=function(){a.abort(),o("user aborted")},a.send(e.data||null)})},gpe(t,[{key:"encoded_id",get:function(){return encodeURIComponent(""+(this.upload_id||""))}},{key:"base_request_headers",get:function(){var e=new Headers;return e.append("Accept","application/json"),e.append("Content-Type","application/json"),ET?e.append("Authorization","Bearer "+ET):TT&&e.append("X-API-Key",""+TT),e}}]),t}(),Met=function(){function t(e,i,s,r,o){void 0===r&&(r={}),void 0===o&&(o=ype()),this.file=void 0,this.retries=void 0,this.parallel=void 0,this.params=void 0,this._endpoint=void 0,this._state=new at({status:"waiting",progress:0,uploaded:0}),this._request=void 0,this._provider=void 0,this._access_url="",this.size=void 0,this.status=this._state.asObservable(),this.mime_type="binary/octet-stream",this.metadata=void 0,this.file=e,this.retries=i,this.parallel=s,this.params=r,this._endpoint=o,this.mime_type=e?.type||this.mime_type}var n=t.prototype;return n.setAccessUrl=function(e){this._access_url=e},n.onProgress=function(e){var i=this._state.getValue();this._state.next(th({},i,{status:"uploading",uploaded:e,progress:Math.floor(e/this.file.size*1e3)/10}))},n.onComplete=function(){var e=this._state.getValue();this._state.next(th({},e,{status:"complete",progress:100}))},n.onError=function(e){var i=this._state.getValue();this._state.next(th({},i,{status:"error",error:e}))},n.resume=function(e){try{var i=this,s=i._state.getValue(),r=function(){if(!["complete","uploading","cancelled"].includes(s.status)){var o=function(){var l;null==(l=i._provider)||l.start()};e&&(i.parallel=e);var a=function(){if(!i._provider)return i._request=new Kz(i,i._endpoint),Promise.resolve(i._request.initialise()).then(function(l){var c=bpe[l.residence]||null;c?(i._provider=new c(i._request,i),i._state.next(th({},s,{status:"uploading"}))):i.onError("No provider available to upload to")})}();return a&&a.then?a.then(o):o()}}();return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(o){return Promise.reject(o)}},n.pause=function(){var e,i=this._state.getValue();"uploading"===i.status&&(null==(e=this._provider)||e.pause(),this._state.next(th({},i,{status:"paused"})))},n.cancel=function(){var e,i=this._state.getValue();["complete","cancelled"].includes(i.status)||("uploading"===i.status&&(null==(e=this._provider)||e.destroy()),this._state.next(th({},i,{status:"cancelled"})))},gpe(t,[{key:"id",get:function(){var e;return null==(e=this._request)?void 0:e.upload_id}},{key:"access_url",get:function(){return this._access_url}},{key:"waiting",get:function(){var e;return"waiting"===(null==(e=this._state.getValue())?void 0:e.status)}},{key:"in_progress",get:function(){var e;return"uploading"===(null==(e=this._state.getValue())?void 0:e.status)}},{key:"completed",get:function(){var e;return"complete"===(null==(e=this._state.getValue())?void 0:e.status)}}]),t}(),IT=[],wpe=-1;function rR(){return wpe+=1,IT[wpe%=3]}var Rr,Cpe={auto_start:!0,auto_remove:!1,remove_after:0,simultaneous:2,parallel:3,retries:4,providers:[]},uo=Cpe,su=[];function Spe(t){t.cancel(),su=su.filter(function(n){return n!==t})}function xpe(){return su.filter(function(t){return t.in_progress}).length<uo.simultaneous}!function(t){t[t.Paused=0]="Paused",t[t.Uploading=1]="Uploading",t[t.Completed=2]="Completed",t[t.Aborted=3]="Aborted"}(Rr||(Rr={}));var oR=function(){function t(e,i){this._request=void 0,this._upload=void 0,this.state=Rr.Paused,this.size=void 0,this.progress=0,this._file=void 0,this._strategy=void 0,this._finalising=void 0,this._direct_upload=void 0,this._progress={},this._current_parts=[],this._pending_parts=[],this._last_part=0,this._memoization={},this._finishing=!1,this._request=e,this._upload=i,this._file=this._upload.file,this.size=this._file.size}var n=t.prototype;return n.start=function(){this.state<Rr.Uploading&&(this._finalising?this._finalise():this._start())},n.pause=function(){for(var e in this._strategy&&this.state===Rr.Uploading&&!this._direct_upload?(this.state=Rr.Paused,this._request.abort(),this._pending_parts=this._currentParts(),this._current_parts=[]):this._strategy&&!this._direct_upload||(this.state=Rr.Paused,this._request.abort(),this._restart()),this._progress)this._progress[e].loaded!==this._progress[e].total&&(this._progress[e].loaded=0);this._updateProgress()},n.destroy=function(){void 0!==this._strategy&&this.state<Rr.Completed&&(this._request.destroy(),this._restart(),this.state=Rr.Aborted)},n._restart=function(){this._strategy=void 0,this._current_parts=[],this._pending_parts=[]},n._makeRequest=function(e,i){var s=this;return i.data=e.data,this._request.performSignedRequest(i,function(r){return s._onProgress(e.part,r)})},n._nextPartIndex=function(){return this._pending_parts.length>0?this._last_part=this._pending_parts.shift():this._last_part+=1,this._current_parts.push(this._last_part),this._last_part},n._currentParts=function(){return this._current_parts.concat(this._pending_parts)},n._completePart=function(e){this._current_parts=this._current_parts.filter(function(i){return i!==e})},n._isComplete=function(e){var i=this._progress[e]||{},s=i.loaded;return s&&s===i.total},n._onProgress=function(e,i){this._progress[e]=th({},i),this._updateProgress()},n._onError=function(e){console.error("Error:",e),this.pause(),this._upload.onError(e)},n._updateProgress=function(){var e=0;for(var i in this._progress)e+=this._progress[i].loaded||0;this._upload.onProgress(e)},n._finalise=function(){try{var e=this;return e._request.updateStatus().then(function(){return e._upload.onComplete()},function(i){return e._onError(i)}),Promise.resolve()}catch(i){return Promise.reject(i)}},n._hashPart=function(e,i,s){try{var r=this,o=r._memoization[e],a=i();return Promise.resolve(o?{data:a,md5:o.md5,part:o.part}:s(a).then(function(l){return r._memoization[e]=l,{data:a,md5:l.md5,part:l.part}}))}catch(l){return Promise.reject(l)}},n._getPartData=function(){var e=this,i=this._currentParts().filter(function(r){return"number"==typeof r}),s=[];return i.forEach(function(r){var o=e._memoization[""+r];o&&s.push(o)}),{part_list:i,part_data:s}},t}(),Epe=function(t){function n(){for(var i,s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(i=t.call.apply(t,[this].concat(r))||this)._part_size=5242880,i}sR(n,t);var e=n.prototype;return e._start=function(){try{var i=this;return Promise.resolve(function(){if(void 0===i._strategy)return i.state=Rr.Uploading,i._strategy=null,9999*i._part_size<i.size&&(i._part_size=Math.floor(i.size/9999),i._part_size>5368709120)?(i._upload.cancel(),void i._onError("file exceeds maximum size")):Promise.resolve(i._processPart(1).catch(function(s){return i._onError(s)})).then(function(s){if(s&&i.state===Rr.Uploading)return Promise.resolve(i._request.create({file_id:window.btoa(xT(s.md5))}).catch(function(r){return i._onError(r)})).then(function(r){r&&(i._strategy=r.type,r.signature&&i._upload.setAccessUrl((r.signature.url||"").split("?")[0]),"direct_upload"===r.type?i._direct(r,s):i._resume(r,s))})});i.state===Rr.Paused&&i._resume()}())}catch(s){return Promise.reject(s)}},e._processPart=function(i){var s=this;return this._hashPart(i.toString(),function(){var r,o;return s.size>s._part_size?((o=i*s._part_size)>s.size&&(o=s.size),r=s._file.slice((i-1)*s._part_size,o)):r=s._file,r},function(r){return rR().hash(r).then(function(o){return{md5:o,part:i}})})},e._resume=function(i,s){void 0===i&&(i=null),void 0===s&&(s=null);try{var r,o=this;return Promise.resolve(function(){if(i)return function(){if("parts"!==i.type)return Promise.resolve(o._request.signedRequest(i).catch(function(a){o._restart(),o._onError(a)})).then(function(a){if(a){var l=a.responseXML.getElementsByTagName("UploadId")[0].textContent;return Promise.resolve(o._request.updateStatus({resumable_id:l,file_id:window.btoa(xT(s.md5)),part:1}).catch(function(c){o._restart(),o._onError(c)})).then(function(c){if(c)for(o._nextPartIndex(),o._setPart(c,s),r=1;r<o._upload.parallel;r+=1)o._nextPart()})}});for(o._pending_parts=i.part_list,i.part_data&&(o._memoization=i.part_data),r=0;r<o._upload.parallel;r+=1)o._nextPart()}();for(r=0;r<o._upload.parallel;r+=1)o._nextPart()}())}catch(a){return Promise.reject(a)}},e._generatePartManifest=function(){var i,s,r="<CompleteMultipartUpload>";for(i=1;i<1e4&&(s=this._memoization[i]);i+=1)r+="<Part><PartNumber>"+i+'</PartNumber><ETag>"'+s.md5+'"</ETag></Part>';return r+"</CompleteMultipartUpload>"},e._nextPart=function(){var i,s=this,r=this._nextPartIndex();(r-1)*this._part_size<this.size?this._processPart(r).then(function(o){s.state===Rr.Uploading&&(i=s._getPartData(),s._request.signNextChunk(r,window.btoa(xT(o.md5)),i.part_list,i.part_data).then(function(a){return s._setPart(a,o)},function(a){return s._onError(a)}))},function(o){return s._onError(o)}):1===this._currentParts().length&&this._currentParts()[0]===r?(this._finishing=!0,this._request.sign("finish").then(function(o){o.data=s._generatePartManifest(),s._request.signedRequest(o).then(function(){return s._finalise()},function(a){return s._onError(a)})},function(o){return s._onError(o)})):this._finishing||(this._completePart(r),(i=this._getPartData()).part_update=!0,this._request.updateStatus(i))},e._setPart=function(i,s){var r=this;this._makeRequest(s,i).then(function(){r._completePart(s?.part),r._nextPart()},function(o){return r._onError(o)})},e._direct=function(i,s){var r=this,o=this._makeRequest(s,i);this._direct_upload=!0,o.then(function(){return r._finalise()},function(a){return r._onError(a)})},n}(oR);Epe.lookup="AmazonS3";var Tpe=function(t){function n(){for(var i,s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(i=t.call.apply(t,[this].concat(r))||this)._partSize=2097152,i}sR(n,t);var e=n.prototype;return e._start=function(){var i=this;if(void 0===this._strategy){if(this.state=Rr.Uploading,this._strategy=null,5e4*this._partSize<this.size&&(this._partSize=Math.floor(this.size/5e4),this._partSize>4194304))return this._upload.cancel(),void this._onError("file exceeds maximum size of 195GB");this._processPart(1).then(function(s){i.state===Rr.Uploading&&i._request.create({file_id:s.md5}).then(function(r){i._strategy=r.type,"direct_upload"===r.type?i._direct(r,s):i._resume(r,s)},i._onError.bind(i))},this._onError.bind(this))}else this.state===Rr.Paused&&this._resume()},e._processPart=function(i){var s=this;return this._hashPart(i.toString(),function(){var r,o;return s.size>s._partSize?((o=i*s._partSize)>s.size&&(o=s.size),r=s._file.slice((i-1)*s._partSize,o)):r=s._file,r},function(r){return rR().hash(r).then(function(o){return{md5:window.btoa(xT(o)),part:i}})})},e._resume=function(i,s){var r,o=this;if(void 0===i&&(i=null),void 0===s&&(s=null),i)if("parts"===i.type)for(this._pending_parts=i.part_list,r=0;r<this._upload.parallel;r+=1)this._nextPart();else this._request.updateStatus({resumable_id:"n/a",file_id:s.md5,part:1}).then(function(a){for(o._nextPartIndex(),o._setPart(a,s),r=1;r<o._upload.parallel;r+=1)o._nextPart()},function(a){this._restart(),this._onError(a)});else for(r=0;r<this._upload.parallel;r+=1)this._nextPart()},e._generatePartManifest=function(){for(var i='<?xml version="1.0" encoding="utf-8"?><BlockList>',s=0;s<5e4&&s*this._partSize<this.size;s+=1)i+="<Latest>"+window.btoa(this._pad(s+1))+"</Latest>";return i+"</BlockList>"},e._pad=function(i){for(var s=i.toString();s.length<6;)s="0"+s;return s},e._nextPart=function(){var i=this,s=this._nextPartIndex();(s-1)*this._partSize<this.size?this._processPart(s).then(function(r){i.state===Rr.Uploading&&i._request.signNextChunk(s,r.md5,i._currentParts()).then(function(o){i._setPart(o,r)},i._onError.bind(i))},this._onError.bind(this)):1===this._currentParts.length&&this._currentParts[0]===s?(this._finishing=!0,this._request.sign("finish").then(function(r){r.data=i._generatePartManifest(),i._request.signedRequest(r).then(i._finalise.bind(i),i._onError.bind(i))},this._onError.bind(this))):this._finishing||(this._completePart(s),this._request.updateStatus({part_update:!0,part_list:this._currentParts()}))},e._setPart=function(i,s){var r=this;this._makeRequest(s,i).then(function(){r._completePart(s.part),r._nextPart()},this._onError.bind(this))},e._direct=function(i,s){var r=this,o=this._makeRequest(s,i);this._direct_upload=!0,o.then(function(){return r._finalise()},this._onError.bind(this))},n}(oR);Tpe.lookup="MicrosoftAzure";var Ipe=function(t){function n(){return t.apply(this,arguments)||this}sR(n,t);var e=n.prototype;return e._start=function(){var i=this;void 0!==this._strategy&&this.state!==Rr.Paused||(this.state=Rr.Uploading,this._strategy=null,this._processPart(this._file).then(function(s){i.state===Rr.Uploading&&i._request.create({file_id:s.md5}).then(function(r){i._strategy=r.type,"direct_upload"===r.type?i._direct(r,s):i._resume(r,s)},i._onError.bind(i))},this._onError.bind(this)))},e._processPart=function(i,s){return void 0===s&&(s=0),this._hashPart(s.toString(),function(){return i},function(r){return rR().hash(r).then(function(o){return{md5:window.btoa(xT(o)),part:s}})})},e._resume=function(i,s){var r=this;this._request.signedRequest(i).then(function(o){if("status"===i.type)if(o.status===i.expected){var a=parseInt(o.getResponseHeader("Range").split("-")[1],10)+1;r._processPart(r._file.slice(a),a).then(function(l){r.state===Rr.Uploading&&r._request.signChunk(a,l.md5).then(function(c){r._performUpload(c,l)},r._onError.bind(r))},r._onError.bind(r))}else r._finalise();else r._request.updateStatus({resumable_id:r._getQueryParams(o.getResponseHeader("Location").split("?")[1]).upload_id,file_id:s.md5,part:0}).then(function(l){return r._performUpload(l,s)},function(l){this._restart(),this._onError(l)})},this._onError.bind(this))},e._performUpload=function(i,s){var r=this;this._makeRequest(s,i).then(function(){return r._finalise()},this._onError.bind(this))},e._direct=function(i,s){var r=this,o=this._makeRequest(s,i);this._direct_upload=!0,o.then(function(){r._finalise()},this._onError.bind(this))},e._getQueryParams=function(i){i=i.split("+").join(" ");for(var s,r={},o=/[?&]?([^=]+)=([^&]*)/g;s=o.exec(i);)r[decodeURIComponent(s[1])]=decodeURIComponent(s[2]);return r},n}(oR);Ipe.lookup="GoogleCloudStorage";var kpe=function(t){function n(){for(var i,s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(i=t.call.apply(t,[this].concat(r))||this)._partSize=2097152,i}sR(n,t);var e=n.prototype;return e._start=function(){var i=this;if(void 0===this._strategy){if(this.state=Rr.Uploading,this._strategy=null,1e3*this._partSize<this.size&&(this._partSize=Math.floor(this.size/1e3),this._partSize>5368709120))return this._upload.cancel(),void this._onError("file exceeds maximum size");this._processPart(1).then(function(s){i.state===Rr.Uploading&&i._request.create({file_id:s.md5}).then(function(r){i._strategy=r.type,"direct_upload"===r.type?i._direct(r,s):i._resume(r,s)},i._onError.bind(i))},this._onError.bind(this))}else this.state===Rr.Paused&&this._resume()},e._processPart=function(i){var s=this;return this._hashPart(i.toString(),function(){var r,o;return s.size>s._partSize?((o=i*s._partSize)>s.size&&(o=s.size),r=s._file.slice((i-1)*s._partSize,o)):r=s._file,r},function(r){return rR().hash(r).then(function(o){return{md5:o,part:i,size_bytes:r.size}})})},e._resume=function(i,s){var r,o=this;if(void 0===i&&(i=null),void 0===s&&(s=null),i)if("parts"===i.type){if(this._pending_parts=i.part_list,i.part_data){var a;for(var l in this._memoization=i.part_data,this._memoization)this._memoization.hasOwnProperty(l)&&((a=this._memoization[l]).path||this._pending_parts.push(a.part));this._pending_parts=this._pending_parts.sort().filter(function(c,u,d){return!u||c!==d[u-1]})}for(r=0;r<this._upload.parallel;r+=1)this._nextPart()}else this._request.updateStatus({resumable_id:"n/a",file_id:s.md5,part:1}).then(function(c){for(o._nextPartIndex(),o._memoization[1].path=c.path,o._setPart(c,s),r=1;r<o._upload.parallel;r+=1)o._nextPart()},function(c){this._restart(),this._onError(c)});else for(r=0;r<this._upload.parallel;r+=1)this._nextPart()},e._generatePartManifest=function(){for(var i,s=[],r=1;r<1e4&&(i=this._memoization[r]);r+=1)s.push({path:i.path,etag:i.md5,size_bytes:i.size_bytes});return JSON.stringify(s)},e._nextPart=function(){var i,s=this,r=this._nextPartIndex();(r-1)*this._partSize<this.size?this._processPart(r).then(function(o){s.state===Rr.Uploading&&(i=s._getPartData(),s._request.signNextChunk(r,o.md5,i.part_list,i.part_data).then(function(a){s._memoization[r].path=a.path,s._setPart(a,o)},s._onError.bind(s)))},this._onError.bind(this)):1===this._currentParts.length&&this._currentParts[0]===r?(this._finishing=!0,this._request.sign("finish").then(function(o){o.signature?(o.data=s._generatePartManifest(),s._request.signedRequest(o).then(s._finalise.bind(s),s._onError.bind(s))):s._finalise()},this._onError.bind(this))):this._finishing||(this._completePart(r),(i=this._getPartData()).part_update=!0,this._request.updateStatus(i))},e._setPart=function(i,s){var r=this;this._makeRequest(s,i).then(function(){r._completePart(s.part),r._nextPart()},this._onError.bind(this))},e._direct=function(i,s){var r=this,o=this._makeRequest(s,i);this._direct_upload=!0,o.then(function(){return r._finalise()},this._onError.bind(this))},n}(oR);function Yz(t,n){return function aR(t,n){t=t||[],"string"==typeof(n=n||{})&&(n={type:n});try{return new Blob(t,n)}catch(r){if("TypeError"!==r.name)throw r;for(var i=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),s=0;s<t.length;s+=1)i.append(t[s]);return i.getBlob(n.type)}}([t],n)}function Zz(t,n=!0,e="none"){return new Pn(i=>{const s=new FileReader;s.addEventListener("loadend",r=>{const c=function Xz(t,n){if(void 0===n&&(n={}),!ype())throw"No API endpoint set";var e=[];return t.forEach(function(i){var s=new Met(i,uo.retries,uo.parallel,n);e.push(s),su.push(s),s.metadata=uo.metadata,s.status.pipe(as(function(r){return"complete"===r.status})).subscribe(function(r){return function(o){var a=uo.auto_start,l=uo.remove_after;uo.auto_remove&&(l?setTimeout(function(){return Spe(o)},l):Spe(o));var c=su.filter(function(u){return u.waiting});a&&c.length&&xpe()&&c[0].resume(uo.parallel)}(s)}),uo.auto_start&&xpe()&&s.resume(uo.parallel)}),e}([Yz(r.target.result,t.type)],{file_name:t.name,permissions:e,public:n})[0],u={id:n_(999999999999),name:t.name,progress:0,link:"",formatted_size:Aet(t.size),size:t.size,upload:c};c.status.pipe(VN(d=>"complete"!==d.status,!0)).subscribe(d=>{c.access_url&&(u.link=n?c.access_url:`${location.origin}/api/engine/v2/uploads/${encodeURIComponent(c.id)}/url`),u.progress=d.progress,i.next(u),"error"===d.status&&i.error({...u,error:d.error}),"complete"===d.status&&i.complete()}),i.next(u)}),s.readAsArrayBuffer(t)})}function Vet(t,n,e){var i=t[n];return t[n]=(...s)=>{e(s),i.call(t,...s)},i}kpe.lookup="OpenStackSwift";let Npe=localStorage.getItem("PLACEOS.DEVICE_ID")||`DEV-${iv(8)}`,zet=(()=>{class t extends hn{setMetadata(e){}constructor(){var e;super(),e=this,this._disable_handling=!1,this._system_id=new at(""),this._events=new ot,this._event_history=this._events.pipe(zn(2e4)),this._metadata=null,this._logging_bindings=this._system_id.pipe(Zt(i=>!!i),Kt(i=>Vt([Ge(i),this._bindTo(i,"enabled")])),Zt(([i,s])=>!!s),me(([i])=>this.subscription("post_events",this._event_history.subscribe(function(){var s=z(function*(r){e._disable_handling=!0,yield Qr(i,"Logger").execute("post_event",[r]).catch(),e._disable_handling=!1});return function(r){return s.apply(this,arguments)}}())))),this.history=this._event_history,localStorage.setItem("PLACEOS.DEVICE_ID",Npe),this._patchConsoleMethods(),this._logging_bindings.subscribe(),ji("Logger","Remote logging initialised...")}setSystem(e){this._system_id.next(e)}_patchConsoleMethods(){const e=["log","debug","info","warn","error"];for(const i of e)Vet(console,i,(...s)=>this._handleEvent(i,s))}_handleEvent(e,i,s="console"){if(i.includes('"Logger"')||this._disable_handling)return;const r=[...i[0]];r[0]="string"==typeof r[0]?r[0].replace(/\%c/g,""):r[0],this._events.next({id:`${s}-${n_(9999999999)}`,device_id:Npe,type:s,subtype:e,timestamp:Date.now(),raw:i,data:r.filter(o=>"string"!=typeof o||!o.startsWith("color:")),metadata:this._metadata||null})}_bindTo(e,i,s="Logger"){const r=Qr(e,s).binding(i);return this.subscription(`bind:${i}`,r.bind()),r.listen()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Wet={year:0,month:1,day:2,hour:3,minute:4,second:5},Qz={};function Rpe(t,n,e,i,s,r,o){const a=new Date(0);return a.setUTCFullYear(t,n,e),a.setUTCHours(i,s,r,o),a}const Fpe=36e5,Yet=6e4,Jz={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function e7(t,n){const e=function Het(t,n){const e=function Xet(t){if(!Qz[t]){const n=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z"));Qz[t]="06/25/2014, 00:00:00"===n||"\u200e06\u200e/\u200e25\u200e/\u200e2014\u200e \u200e00\u200e:\u200e00\u200e:\u200e00"===n?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return Qz[t]}(n);return"formatToParts"in e?function qet(t,n){try{const e=t.formatToParts(n),i=[];for(let s=0;s<e.length;s++){const r=Wet[e[s].type];void 0!==r&&(i[r]=parseInt(e[s].value,10))}return i}catch(e){if(e instanceof RangeError)return[NaN];throw e}}(e,t):function Ket(t,n){const e=t.format(n),i=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(e);return[parseInt(i[3],10),parseInt(i[1],10),parseInt(i[2],10),parseInt(i[4],10),parseInt(i[5],10),parseInt(i[6],10)]}(e,t)}(t,n),i=Rpe(e[0],e[1]-1,e[2],e[3]%24,e[4],e[5],0).getTime();let s=t.getTime();const r=s%1e3;return s-=r>=0?r:1e3+r,i-s}function Ppe(t,n){return-23<=t&&t<=23&&(null==n||0<=n&&n<=59)}const $pe={};function Hpe(t,n){return-function Lpe(t,n,e){if(!t)return 0;let s,r,i=Jz.timezoneZ.exec(t);if(i)return 0;if(i=Jz.timezoneHH.exec(t),i)return s=parseInt(i[1],10),Ppe(s)?-s*Fpe:NaN;if(i=Jz.timezoneHHMM.exec(t),i){s=parseInt(i[2],10);const o=parseInt(i[3],10);return Ppe(s,o)?(r=Math.abs(s)*Fpe+o*Yet,"+"===i[1]?-r:r):NaN}if(function Jet(t){if($pe[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),$pe[t]=!0,!0}catch{return!1}}(t)){n=new Date(n||Date.now());const o=e?n:function Zet(t){return Rpe(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}(n),a=e7(o,t);return-(e?a:function Qet(t,n,e){let s=t.getTime()-n;const r=e7(new Date(s),e);if(n===r)return n;s-=r-n;const o=e7(new Date(s),e);return r===o?r:Math.max(r,o)}(n,a,t))}return NaN}(t,n)}const J0=Intl?.DateTimeFormat()?.resolvedOptions()?.timeZone||"Australia/Sydney",s7={};function kT(t){if(s7[t])return s7[t];const n=function r7(t,n=new Date){const r=new Intl.DateTimeFormat([],{timeZone:t,hour12:!1,timeZoneName:"short"}).formatToParts(n).find(d=>"timeZoneName"===d.type),a=(r?r.value:"GMT").match(/GMT([+-])(\d{1,2})(\d{2})?/);return a?("+"===a[1]?1:-1)*(60*parseInt(a[2],10)+(a[3]?parseInt(a[3],10):0)):0}(t),e=Math.floor(Math.abs(n)/60),i=Math.abs(n)%60,s=`${n>0?"+":"-"}${U0(e,2)}${U0(i,2)}`;return s7[t]=s,s}function fi(t,n){return pO(t,n*rz)}function nh(t,n){const e=Tn(t),i=Tn(n);return e.getTime()>i.getTime()}const ptt={month:43200,months:43200,week:10080,weeks:10080,day:1440,days:1440,hour:60,hours:60,minute:1,minutes:1},Xpe={auto_approve:!0,hidden:!1};function a7(t){const n=(t||"").split(" ");return n.length>1?+n[0]*ptt[n[1].toLowerCase()]:0}function Ype(t,n=new Date){return fi(n,a7(t))}function l7(t,n,e){return t.filter(i=>!function uR(t,n){if(!(n instanceof Array))return Xpe;for(const e of n)if(("*"===e.zone||e.zone===t.resource.zone?.id||t.resource.zones?.includes(e.zone))&&ftt(t,e))return e.rules;return Xpe}({...n,resource:i},e)?.hidden)}function ftt({date:t,duration:n,host:e,resource:i},s){const r=new Date(t);let o=0;const{conditions:a}=s;return!a||(a.groups instanceof Array&&a.groups.every(l=>e?.groups?.includes(l))&&(o+=1),a.is_before&&gl(fi(t,n),Ype(a.is_before))&&(o+=1),a.is_after&&nh(t,Ype(a.is_after))&&(o+=1),a.min_length&&a.min_length<=n&&(o+=1),a.is_between&&r.getHours()+r.getMinutes()/60>=a.is_between[0]&&r.getHours()+r.getMinutes()/60<a.is_between[1]&&(o+=1),a.is_period&&t>=a.is_period[0]&&t<a.is_period[1]&&(o+=1),a.max_length&&a.max_length>=n&&(o+=1),a.resource_ids&&a.resource_ids.includes(i.id)&&(o+=1),a.locations&&a.locations.includes(i.name)&&(o+=1),o>=Object.keys(a).length)}const mtt=(t,n,e)=>({file:t,is_public:n,permissions:e});function _tt(t,n){if(1&t){const e=se();m(0,"div",2)(1,"label"),S(2,"Permissions"),_(),m(3,"mat-form-field",3)(4,"mat-select",6),ii("ngModelChange",function(s){B(e);const r=E();return jn(r.permissions,s)||(r.permissions=s),V(s)}),m(5,"mat-option",11),S(6,"None"),_(),m(7,"mat-option",12),S(8,"Support"),_(),m(9,"mat-option",13),S(10,"Admin"),_()()()()}if(2&t){const e=E();b(4),ni("ngModel",e.permissions)}}let Zpe=(()=>{class t{constructor(e,i){this._dialog_ref=e,this._data=i,this.file=this._data.file,this.is_public=!0,this.permissions="none",this.file=this._data.file}close(){this._dialog_ref.close()}static#e=this.\u0275fac=function(i){return new(i||t)(I(Xa),I(or))};static#t=this.\u0275cmp=Se({type:t,selectors:[["upload-permissions-modal"]],decls:21,vars:8,consts:[["btn","","icon","","mat-dialog-close",""],[1,"p-4","min-w-[20rem]"],[1,"flex","flex-col","space-y-2"],["appearance","outline"],["matInput","","disabled","true","placeholder","File Name",3,"ngModel"],[1,"pb-4"],[3,"ngModelChange","ngModel"],["class","flex flex-col space-y-2",4,"ngIf"],[1,"flex","items-center","justify-end","space-x-2","px-4","py-2","border-t","border-base-200"],["btn","","mat-dialog-close","",1,"inverse","w-32"],["btn","",1,"w-32",3,"mat-dialog-close"],["value","none"],["value","support"],["value","admin"]],template:function(i,s){1&i&&(m(0,"header")(1,"h2"),S(2,"Upload File"),_(),m(3,"button",0)(4,"app-icon"),S(5,"close"),_()()(),m(6,"main",1)(7,"div",2)(8,"label"),S(9,"File Name"),_(),m(10,"mat-form-field",3),q(11,"input",4),_()(),m(12,"div",5)(13,"mat-checkbox",6),ii("ngModelChange",function(o){return jn(s.is_public,o)||(s.is_public=o),o}),S(14,"Public"),_()(),O(15,_tt,11,1,"div",7),_(),m(16,"footer",8)(17,"button",9),S(18,"Cancel"),_(),m(19,"button",10),S(20," Upload "),_()()),2&i&&(b(11),C("ngModel",s.file.name),b(2),ni("ngModel",s.is_public),b(2),C("ngIf",!s.is_public),b(4),C("mat-dialog-close",function hne(t,n,e,i,s,r){return _ne(Ue(),kl(),t,n,e,i,s,r)}(4,mtt,s.file,s.is_public,s.permissions)))},dependencies:[mt,Yr,pi,Vi,mr,zs,ko,Ls,eu,$l,St]})}return t})(),gtt=(()=>{class t{constructor(e){this._dialog=e,this._upload_list=new at([]),this.upload_list=this._upload_list.asObservable(),localStorage&&this._upload_list.next(JSON.parse(localStorage.getItem("BACKOFFICE.uploads")||"[]"))}clearList(){const e=this._upload_list.getValue().filter(i=>i.progress<100&&!i.error);this._upload_list.next(e)}uploadFileWithPermissions(e){var i=this;return new Promise((s,r)=>{this._dialog.open(Zpe,{data:{file:e}}).afterClosed().subscribe(function(){var a=z(function*(l){if(l){const c=yield i.uploadFile(l.file,l.is_public,l.permissions).catch(u=>{throw r(u),u});s(c)}else r()});return function(l){return a.apply(this,arguments)}}())})}uploadFile(e,i=!0,s="none"){return new Promise(r=>{let o=!1;const a=l=>{o||(r(l.id),o=!0),this._upload_list.next([...this._upload_list.getValue().filter(c=>c.id!==l.id),l])};Zz(e,i,s).subscribe(a,a,()=>this._updateUploadHistory())})}_updateUploadHistory(){const e=this._upload_list.getValue().filter(i=>i.progress>=100);e.forEach(i=>delete i.upload),localStorage&&localStorage.setItem("PLACEOS.uploads",JSON.stringify(e))}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Tr))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),DT=null;function d7(){return d7=z(function*(){DT&&(yield DT.release());try{DT=yield navigator.wakeLock.request("screen")}catch(t){throw t}}),d7.apply(this,arguments)}document.addEventListener("visibilitychange",z(function*(){null!==DT&&"visible"===document.visibilityState&&(DT=yield navigator.wakeLock.request("screen"))}));let Qpe=(()=>{class t extends hn{constructor(e,i){super(),this._element=e,this._renderer=i,this.sys="",this.mod="",this.index=1,this.bind="",this.exec="",this.delay=100,this.on_event="",this.params=null,this.ignore=!1,this.model=null,this.modelChange=new Ae,this._binding=!1,this._old_model=null}ngOnInit(){ade()?.pipe(as(e=>e)).subscribe(e=>this.bindVariable())}ngOnChanges(e){(e.sys||e.mod||e.bind)&&this.bindVariable(),e.model&&this._old_model!==this.model&&null!=this.model&&(this._old_model=this.model,this.execute()),e.on_event&&this.on_event&&this.subscription("on_event",this._renderer.listen(this._element.nativeElement,this.on_event,()=>this.execute()))}bindVariable(){mc()&&this.bind&&this.sys&&this.mod&&!this._binding&&this.timeout("bind",()=>{const i=Qr(this.sys,this.mod,this.index).binding(this.bind);this._binding=!0,this.subscription("binding",i.bind()),this.subscription("on_changes",i.listen().pipe(Zt(s=>null!=s)).subscribe(s=>{setTimeout(()=>{this._binding=!1,this.clearTimeout("bound"),!this.ignore&&(this.model=s,this._old_model=this.model,this.modelChange.emit(this.model))},10)})),this.timeout("bound",()=>this._binding=!1,200)},20)}execute(){mc()&&this.exec&&this.sys&&this.mod&&!this._timers.execute&&this.timeout("execute",()=>{const e=Qr(this.sys,this.mod,this.index);let i=this.params;this.bind&&(i=this.params||[this.model]),e.execute(this.exec,i||[]).then(s=>{this.bind||(this.model=s,this._old_model=this.model,this.modelChange.emit(this.model))})},this.delay)}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(Pd))};static#t=this.\u0275dir=He({type:t,selectors:[["i","bind",""],["","binding",""],["co-bind"]],inputs:{sys:"sys",mod:"mod",index:"index",bind:"bind",exec:"exec",delay:"delay",on_event:[0,"onEvent","on_event"],params:"params",ignore:"ignore",model:"model"},outputs:{modelChange:"modelChange"},features:[Ze,Rn]})}return t})();function Itt(t,n){if(1&t&&(m(0,"div",4),S(1),_()),2&t){const e=E(2);b(),K(" ",e.initials," ")}}function ktt(t,n){if(1&t&&(m(0,"div",2),O(1,Itt,2,1,"div",3),_()),2&t){const e=E(),i=xt(2);wt("user-id",e.user.id),b(),C("ngIf",!e.user.photo)("ngIfElse",i)}}function Dtt(t,n){1&t&&q(0,"img",5),2&t&&C("source",E().user.photo)}let l_=(()=>{class t{get initials(){if(!this.user)return"NA";const e=this.user.name||"",i=e.replace(/[()[\]\-+=\\/]+/gi,"").split(" ");return i.length>1?`${i[0][0]}${i[i.length-1][0]}`:e.slice(0,2)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Se({type:t,selectors:[["a-user-avatar"]],inputs:{user:"user"},decls:3,vars:1,consts:[["image_state",""],["class","flex items-center justify-center rounded-full overflow-hidden",4,"ngIf"],[1,"flex","items-center","justify-center","rounded-full","overflow-hidden"],["initials","","class","text-base-content text-opacity-80 uppercase",4,"ngIf","ngIfElse"],["initials","",1,"text-base-content","text-opacity-80","uppercase"],["auth","",1,"h-full","w-full",3,"source"]],template:function(i,s){1&i&&O(0,ktt,2,3,"div",1)(1,Dtt,1,1,"ng-template",null,0,ln),2&i&&C("ngIf",s.user)},styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{height:2.5em;width:2.5em;background-color:var(--b2);overflow:hidden;border:2px solid var(--b1)}.initials[_ngcontent-%COMP%]{font-size:1em}"]})}return t})();class Ul{constructor(n={}){this.id=n.id||"",this.name=n.name||"",this.display_name=n.display_name||"",this.email=(n.email||"").toLowerCase(),this.capacity=n.capacity||-1,this.feature_list=n.feature_list||n.features||[],this.bookable=!!n.bookable,this.zones=n.zones||[],this.support_url=n.support_url||"",this.map_id=n.map_id||"",this.images=n.images||[],this.configurations=n.configurations||[],this.features=n.features||[],this.response_status=n.response_status,this.level=n.level||new gT,this.availability=n.availability||[]}inUseAt(n,e){const i=n+60*e*1e3;return this.availability.filter(s=>s.date==n&&s.date+60*s.duration*1e3==i&&"free"!==s.status).length>0}}const AT=[],ew={},h7=new Ul({email:"empty.space@place.os"});function Jpe(t){for(const n of t)AT.find(({id:e})=>e===n.id)||AT.push(n)}setInterval(()=>{for(const t in ew)ew[t]=ew[t]-1,ew[t]<=0&&delete ew[t]},1e4);let p7,Uu=(()=>{class t{constructor(e){this._org=e}transform(e){var i=this;return z(function*(){i._org&&(yield i._org.initialised.pipe(as(a=>a)).toPromise());const s=e?.includes("@");if(!e)return h7;let r=AT.find(({id:a,email:l})=>a===e||l===e);if(r)return r;if(ew[e])return h7;if(!s){const a=yield Cde(e).toPromise().catch(l=>null);if(a)return r=new Ul({...a,level:i._org?.levelWithID([...a.zones])}),AT.push(r),r}const o=(yield function oYe(t={}){return R0({query_params:t,fn:Jb,path:`${Ao}/with_emails`})}({in:e,zone_id:i._org?.organisation.id}).toPromise()).data;return 1===o.length?(r=new Ul({...o[0],level:i._org?.levelWithID([...o[0].zones])}),AT.push(r),r):h7})()}updateSpaceList(e){Jpe(e)}static#e=this.\u0275fac=function(i){return new(i||t)(I(Sn,24))};static#t=this.\u0275pipe=nr({name:"space",type:t,pure:!0})}return t})(),f7=(()=>{class t{get space_list(){return this._list.getValue()}constructor(e,i){this._org=e,this._settings=i,this._list=new at([]),this._initialised=new at(!1),this.initialised=this._initialised.asObservable(),this.list=this._list.asObservable(),this.features=this.list.pipe(me(s=>Ss(Mo(s.map(r=>r.features))))),this._compare=s=>s.zones.includes(this._org.building.id),p7=new Uu(e),this._init()}_init(){var e=this;return z(function*(){yield e._org.initialised.pipe(as(i=>i)).toPromise(),e._settings.get("app.prevent_space_init")?e._initialised.next(!0):e.loadSpaces()})()}filter(e=this._compare){return this._list.getValue().filter(i=>e(i))}loadSpace(e){var i=this;return z(function*(){const s=yield Cde(e).toPromise(),r=new Ul({...s,level:i._org.levelWithID([...s.zones])});p7.updateSpaceList([r])})()}find(e){return this._list.getValue().find(({id:i})=>e===i)}loadSpaces(){var e=this;return z(function*(){const r=(yield tT({zone_id:e._org.organisation.id,limit:5e3}).pipe(me(o=>o.data)).toPromise()).map(o=>new Ul({...o,level:e._org.levelWithID([...o.zones])})).filter(o=>o.map_id);e._list.next(r),p7.updateSpaceList(r),e._initialised.next(!0)})()}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Sn),ae(nn))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ip=(()=>{class t extends hn{get positions(){return this._positions.getValue()}get active_level(){return this._level.getValue()}constructor(e,i,s){super(),this._org=e,this._spaces=i,this._settings=s,this._level=new at(null),this._positions=new at({zoom:1,center:{x:.5,y:.5}}),this._styles=new at({}),this._features=new at({}),this._actions=new at({}),this._labels=new at({}),this._options=new at({is_public:!1,disable:["zones","devices"]}),this._message=new at(""),this.level=this._level.asObservable(),this.message=this._message.asObservable(),this.spaces=Vt([this._level,this._org.initialised]).pipe(Zt(([r,o])=>o),Kt(([r])=>tT({zone_id:r?.id||this._org.organisation.id,limit:50}).pipe(me(({data:o})=>o.map(a=>new Ul(a))),Xi(o=>Ge([])))),zn(1)),this.map_url=this._level.pipe(me(r=>(r?r.map_id:"")||"")),this.map_positions=this._positions.asObservable(),this.map_features=Vt([this._features,this._options]).pipe(_s(200),me(([r,o])=>{let a=[];for(const l in r)o.disable?.includes(l)||o.disable_features?.includes(l)||"zones-canvas"===l&&o.disable?.includes("zones")||(a=a.concat(r[l]));return a})),this.map_actions=Vt([this._actions,this._options]).pipe(_s(200),me(([r,o])=>{let a=[];for(const l in r)o.disable?.includes(l)||o.disable_actions?.includes(l)||(a=a.concat(r[l]));return a})),this.map_labels=Vt([this._labels,this._options]).pipe(_s(200),me(([r,o])=>{let a=[];for(const l in r)o.disable?.includes(l)||o.disable_labels?.includes(l)||(a=a.concat(r[l]));return a})),this.map_styles=Vt([this._styles,this._options]).pipe(_s(200),me(([r,o])=>{let a={text:{display:"none"}};for(const l in r)o.disable?.includes(l)||o.disable_styles?.includes(l)||(a={...a,...r[l]});return o.disable?.includes("zones")&&(a["#zones"]={display:"none"},a["#Zones"]={display:"none"}),a})),this.options=this._options.asObservable(),this.init()}init(){var e=this;return z(function*(){yield e._org.initialised.pipe(as(i=>i)).toPromise(),e._org.active_levels.pipe(Zt(i=>!!i)).subscribe(i=>{const s=e._level.getValue();!i.find(o=>s?.id===o.id)&&i.length&&e.setLevel(i[0].id),e._settings.get("app.explore.disable_actions")&&e.setOptions({disable_actions:e._settings.get("app.explore.disable_actions")}),e._settings.get("app.explore.disable_labels")&&e.setOptions({disable_labels:e._settings.get("app.explore.disable_labels")}),e._settings.get("app.explore.disable_features")&&e.setOptions({disable_features:e._settings.get("app.explore.disable_features")}),e._settings.get("app.explore.disable_styles")&&e.setOptions({disable_styles:e._settings.get("app.explore.disable_styles")})})})()}setOptions(e){const i=this._options.getValue(),s=Ss([...e.disable||i.disable,...this._settings.get("app.explore.disable")||[]]);this._options.next({...this._options.getValue(),...e,disable:s})}reset(){this._styles.next({}),this._features.next({}),this._labels.next({}),this._actions.next({}),this._options.next({is_public:!1,disable:["zones","devices"]}),this.setPositions(1,{x:.5,y:.5})}setLevel(e){const i=this._org.levelWithID([e]);i&&this._level.next(i)}setStyles(e,i){const s=this._styles.getValue();s[e]=i,this._styles.next(s)}setFeatures(e,i){const s=this._features.getValue();s[e]=i,this._features.next(s)}setActions(e,i){const s=this._actions.getValue();s[e]=i,this._actions.next(s)}setLabels(e,i){const s=this._labels.getValue();s[e]=i,this._labels.next(s)}setPositions(e,i){this._positions.next({zoom:e,center:i})}has(e,i,s=[]){if("style"===e){const r=this._styles.getValue();for(const o in r){if(s.includes(o))continue;const a=r[o];if(i in a||`#${i}`in a)return!0}}else if("feature"===e){const r=this._features.getValue();for(const o in r)if(!s.includes(o))for(const a of r[o])if(a.location===i)return!0}else if("action"===e){const r=this._actions.getValue();for(const o in r)if(!s.includes(o))for(const a of r[o])if(a.id===i)return!0}else if("label"===e){const r=this._labels.getValue();for(const o in r)if(!s.includes(o))for(const a of r[o])if(a.location===i)return!0}return!1}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Sn),ae(f7),ae(nn))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const efe=["*","*"];function Att(t,n){if(1&t){const e=se();Wt(0),m(1,"map-renderer",3),ii("zoomChange",function(s){B(e);const r=E();return jn(r.zoom,s)||(r.zoom=s),V(s)}),P("zoomChange",function(s){return B(e),V(E().zoomChange.next(s))})("mapInfo",function(s){return B(e),V(E().mapInfo.next(s))}),en(2),_(),qt()}if(2&t){const e=E();b(),C("src",e.src),ni("zoom",e.zoom),C("reset",e.reset)("styles",e.styles||(null==e.metadata?null:e.metadata.styles))("features",e.features||(null==e.metadata?null:e.metadata.features))("actions",e.actions||(null==e.metadata?null:e.metadata.actions))("labels",e.labels||(null==e.metadata?null:e.metadata.labels))}}function Mtt(t,n){if(1&t){const e=se();m(0,"maps-indoors",4),P("zoneChange",function(s){return B(e),V(E().onLevelChange(s))}),ii("zoomChange",function(s){B(e);const r=E();return jn(r.zoom,s)||(r.zoom=s),V(s)}),P("zoomChange",function(s){return B(e),V(E().zoomChange.next(s))}),en(1,1),_()}if(2&t){const e=E();C("zone",e.location),ni("zoom",e.zoom),C("options",e.options)("reset",e.reset)("focus",e.focus)("metadata",e.metadata)}}function Ntt(t,n){if(1&t){const e=se();m(0,"div",5)(1,"button",6),P("click",function(){B(e);const s=E();return V(s.zoom=1.1*s.zoom)}),m(2,"app-icon"),S(3,"add"),_()(),m(4,"button",7),P("click",function(){B(e);const s=E();return V(s.zoom=s.zoom*(10/11))}),m(5,"app-icon"),S(6,"remove"),_()(),m(7,"button",8),P("click",function(){B(e);const s=E();return V(s.reset=s.reset+1)}),m(8,"app-icon"),S(9,"refresh"),_()()()}}const Za=new Ne("Data for Map Features");let gc=(()=>{class t extends hn{get location(){return this._org.levels.find(e=>e.map_id===this.src)}constructor(e,i,s){super(),this._mapspeople=e,this._org=i,this._explore=s,this.zoom=1,this.center={x:.5,y:.5},this.reset=0,this.metadata={},this.options={},this.zoomChange=new Ae,this.centerChange=new Ae,this.mapInfo=new Ae,this.use_mapsindoors$=this._mapspeople.available$}ngOnChanges(e){(e.actions||e.labels||e.styles||e.features)&&(this.metadata={actions:this.actions||[],labels:this.labels||[],styles:this.styles||{},features:this.features||[]})}onLevelChange(e){ji("Map","Level changed to:",e?.display_name||e?.name||e),this._explore.setLevel(e.id)}static#e=this.\u0275fac=function(i){return new(i||t)(I(a_),I(Sn),I(ip))};static#t=this.\u0275cmp=Se({type:t,selectors:[["interactive-map"]],inputs:{src:"src",zoom:"zoom",center:"center",reset:"reset",metadata:"metadata",styles:"styles",features:"features",labels:"labels",actions:"actions",options:"options",focus:"focus"},outputs:{zoomChange:"zoomChange",centerChange:"centerChange",mapInfo:"mapInfo"},features:[Ze,Rn],ngContentSelectors:efe,decls:5,vars:5,consts:[["mapsindoors_template",""],[4,"ngIf","ngIfElse"],["zoom","","class","absolute bottom-16 right-1 border border-base-200 divide-y divide-base-200 shadow flex flex-col bg-base-100 text-base-content rounded overflow-hidden",4,"ngIf"],[3,"zoomChange","mapInfo","src","zoom","reset","styles","features","actions","labels"],[3,"zoneChange","zoomChange","zone","zoom","options","reset","focus","metadata"],["zoom","",1,"absolute","bottom-16","right-1","border","border-base-200","divide-y","divide-base-200","shadow","flex","flex-col","bg-base-100","text-base-content","rounded","overflow-hidden"],["icon","","matRipple","","matTooltip","Zoom In","matTooltipPosition","left",1,"rounded-none",3,"click"],["icon","","matRipple","","matTooltip","Zoom Out","matTooltipPosition","left",1,"rounded-none",3,"click"],["icon","","matRipple","","matTooltip","Reset Zoom and Position","matTooltipPosition","left",1,"rounded-none",3,"click"]],template:function(i,s){if(1&i&&(Si(efe),O(0,Att,3,7,"ng-container",1),H(1,"async"),O(2,Mtt,2,6,"ng-template",null,0,ln)(4,Ntt,10,0,"div",2)),2&i){const r=xt(3);C("ngIf",!ne(1,3,s.use_mapsindoors$))("ngIfElse",r),b(4),C("ngIf",null==s.options?null:s.options.controls)}}})}return t})();const Ott=["map-pin",""];function Rtt(t,n){if(1&t&&(m(0,"div",2),S(1),_()),2&t){const e=E();b(),K(" ",e.message," ")}}function Ftt(t,n){if(1&t){const e=se();ka(),m(0,"svg",3),P("click",function(){return B(e),V(E().action())}),m(1,"g"),q(2,"path",4),_()()}if(2&t){const e=E();Oe("action",e.action),b(2),Hn("fill",e.fill)("stroke",e.stroke)}}let Gu=(()=>{class t{constructor(e){this._details=e,this.message=this._details.message,this.fill=this._details.fill||"#e53935",this.stroke=this._details.stroke||"#fff",this.action=this._details.action||null}ngOnInit(){setTimeout(()=>this.show=!0,300),setTimeout(()=>this.show_message=!0,1e3)}static#e=this.\u0275fac=function(i){return new(i||t)(I(Za))};static#t=this.\u0275cmp=Se({type:t,selectors:[["","map-pin",""]],attrs:Ott,decls:2,vars:2,consts:[["name","message","class","p-2 m-2 rounded bg-base-100 text-gray-700 shadow",4,"ngIf"],["name","pin","viewBox","0 0 380 560",3,"action","click",4,"ngIf"],["name","message",1,"p-2","m-2","rounded","bg-base-100","text-gray-700","shadow"],["name","pin","viewBox","0 0 380 560",3,"click"],["stroke-width","25","d","M182.9,551.7c0,0.1,0.2,0.3,0.2,0.3S358.3,283,358.3,194.6c0-130.1-88.8-186.7-175.4-186.9\n            C96.3,7.9,7.5,64.5,7.5,194.6c0,88.4,175.3,357.4,175.3,357.4S182.9,551.7,182.9,551.7z M122.2,187.2c0-33.6,27.2-60.8,60.8-60.8\n            c33.6,0,60.8,27.2,60.8,60.8S216.5,248,182.9,248C149.4,248,122.2,220.8,122.2,187.2z"]],template:function(i,s){1&i&&O(0,Rtt,2,1,"div",0)(1,Ftt,3,6,"svg",1),2&i&&(C("ngIf",s.message&&s.show_message),b(),C("ngIf",s.show))},dependencies:[mt],styles:["[_nghost-%COMP%]{position:absolute;bottom:50%;left:50%;width:24rem;display:flex;flex-direction:column;align-items:center;transform:translate(-50%);z-index:-1}div[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in-top 1s}.action[_ngcontent-%COMP%]{pointer-events:auto}svg[_ngcontent-%COMP%]{width:2rem;animation:_ngcontent-%COMP%_fade-in-top 1s}@keyframes _ngcontent-%COMP%_fade-in-top{0%{opacity:0;transform:translateY(-100%)}to{opacity:1;transform:translateY(0)}}"]})}return t})();function ks(t){const n=Tn(t);return n.setHours(23,59,59,999),n}function m7(t){return n=>{const i=(t?Math[t]:Math.trunc)(n);return 0===i?0:i}}var tw=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(tw||{});let ih=(()=>{class t{constructor(e){this.sanitizer=e}transform(e,i="html"){switch(i){case"resource":return this.sanitizer.sanitize(tw.RESOURCE_URL,e);case"url":return this.sanitizer.sanitize(tw.URL,e);case"script":return this.sanitizer.sanitize(tw.SCRIPT,e);case"style":return this.sanitizer.sanitize(tw.STYLE,e);default:return this.sanitizer.sanitize(tw.HTML,e)}}static#e=this.\u0275fac=function(i){return new(i||t)(I(oB,16))};static#t=this.\u0275pipe=nr({name:"sanitize",type:t,pure:!0})}return t})(),hR=(()=>{class t{constructor(){this.changes=new ot}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const ant={provide:hR,deps:[[new Ih,new Xp,hR]],useFactory:function ont(t){return t||new hR}};let rfe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:[ant],imports:[Yi]})}return t})();const Lnt=["customTooltip",""],Pnt=["*"];function $nt(t,n){1&t&&Es(0)}function Bnt(t,n){if(1&t&&(Wt(0),O(1,$nt,1,0,"ng-container",4),qt()),2&t){const e=E(2);b(),C("ngComponentOutlet",e.content)("ngComponentOutletInjector",e.injector)}}function Vnt(t,n){if(1&t&&(Wt(0),q(1,"div",5),H(2,"sanitize"),qt()),2&t){const e=E(2);b(),C("innerHTML",ne(2,1,e.content),Nu)}}function znt(t,n){1&t&&Es(0)}function Unt(t,n){if(1&t&&(Wt(0),O(1,znt,1,0,"ng-container",6),qt()),2&t){const e=E(2);b(),C("ngTemplateOutlet",e.content)("ngTemplateOutletContext",e.data)}}function Gnt(t,n){1&t&&(m(0,"div",1),O(1,Bnt,2,2,"ng-container",2)(2,Vnt,3,3,"ng-container",2)(3,Unt,2,2,"ng-container",3),_()),2&t&&(C("ngSwitch",E().type),b(),C("ngSwitchCase","component"),b(),C("ngSwitchCase","html"))}let lv=(()=>{class t{constructor(e){this.data=e.data,this.close=e.close||(()=>null)}static#e=this.\u0275fac=function(i){GS()};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})(),ju=(()=>{class t extends hn{constructor(e,i,s){super(),this._element=e,this._overlay=i,this._injector=s,this.backdrop=!0,this.hover=!1,this.delay=0,this.type="template",this._overlay_ref=null,this.onClick=()=>this.open(),this.onTouch=()=>this.open(),this.onEnter=()=>this.hover?this.open():"",this.onLeave=()=>this.hover?this.close():""}ngOnChanges(e){this._updateInjector(),this._overlay_ref&&(e.x_pos||e.y_pos||e.content)&&this.open()}ngOnDestroy(){super.ngOnDestroy(),this.close()}open(){this.content&&this.timeout("open",()=>{this.hover&&this.delay&&this.timeout("onclose",()=>this.close(),this.delay),this._updateType(),this._overlay_ref&&this.close(),this._portal&&(this._element.nativeElement.getBoundingClientRect(),this._overlay_ref=this._overlay.create({hasBackdrop:!!this.backdrop&&!this.hover,positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withPositions([{originX:this.x_pos||"end",originY:("top"===this.y_pos?"bottom":"bottom"==this.y_pos?"top":this.y_pos)||"top",overlayX:this.x_pos||"end",overlayY:this.y_pos||"top"}])}),this._overlay_ref.attach(this._portal),this.backdrop&&this.subscription("backdrop",this._overlay_ref.backdropClick().subscribe(()=>this.close())))},50)}close(){this.clearTimeout("open"),this._overlay_ref&&(this._overlay_ref.dispose(),this._overlay_ref=null)}_updateType(){this.type="string"==typeof this.content?"html":this.content instanceof hr?"template":"component"}_updateInjector(){this.injector=ci.create({providers:[{provide:lv,useValue:{data:this.data,close:()=>this.close()}}],parent:this._injector})}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(rr),I(ci))};static#t=this.\u0275cmp=Se({type:t,selectors:[["","customTooltip",""]],viewQuery:function(i,s){if(1&i&&Gt(bE,5),2&i){let r;nt(r=it())&&(s._portal=r.first)}},hostBindings:function(i,s){1&i&&P("click",function(){return s.onClick()})("touchend",function(){return s.onTouch()})("mouseenter",function(){return s.onEnter()})("mouseleave",function(){return s.onLeave()})},inputs:{x_pos:[0,"xPosition","x_pos"],y_pos:[0,"yPosition","y_pos"],content:"content",data:"data",backdrop:"backdrop",hover:"hover",delay:"delay"},features:[Ze,Rn],attrs:Lnt,ngContentSelectors:Pnt,decls:2,vars:0,consts:[["cdk-portal",""],["custom-tooltip","",1,"relative","print:hidden",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngComponentOutlet","ngComponentOutletInjector"],[3,"innerHTML"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,s){1&i&&(Si(),en(0),O(1,Gnt,4,3,"ng-template",0))},dependencies:[G5,cb,Dm,V1,z1,rV,ih],encapsulation:2})}return t})();const jnt=["keyboard",""],Hnt=["*"];function Wnt(t,n){1&t&&q(0,"div",7),2&t&&Oe("bg-success","shift"===E(4).state)}function qnt(t,n){if(1&t){const e=se();Wt(0),m(1,"div",5),P("focus",function(){return B(e),V(E(3).focusInput())})("click",function(){const s=B(e).$implicit;return V(E(3).handleKeyPress(s))}),S(2),O(3,Wnt,1,2,"div",6),_(),qt()}if(2&t){const e=n.$implicit;b(),Oe("special","{"===e[0]&&e.length>1)("space","{space}"===e),wt("key",e),b(),K(" ","{space}"===e?"Space":"{caps}"===e?"Caps Lock":"{backspace}"===e?"Backspace":e," "),b(),C("ngIf","{caps}"===e)}}function Knt(t,n){if(1&t&&(m(0,"div",3),O(1,qnt,4,7,"ng-container",4),_()),2&t){const e=n.$implicit;b(),C("ngForOf",e)}}function Xnt(t,n){if(1&t&&(m(0,"div",1),O(1,Knt,2,1,"div",2),_()),2&t){const e=E();b(),C("ngForOf",e.keyset)}}const dfe=["0123456789".split(""),"qwertyuiop".split(""),"asdfghjkl".split(""),"zxcvbnm".split(""),["{caps}","{space}","{backspace}"]];let g7=(()=>{class t extends hn{constructor(e,i){super(),this._element=e,this._overlay=i,this.keyset=dfe,this.state="normal",this._overlay_ref=null,this.onFocus=()=>{t.enabled&&(this.open(),this.clearTimeout("blur"))},this.onBlur=()=>this.timeout("blur",()=>this.close())}ngOnChanges(e){e.keyset&&(this.keyset||(this.keyset=dfe))}ngOnDestroy(){super.ngOnDestroy(),this.close()}focusInput(){this._element?.nativeElement?.blur(),this._element?.nativeElement?.focus()}open(){this._overlay_ref||this._portal&&(this._overlay_ref=this._overlay.create({positionStrategy:this._overlay.position().global().bottom().centerHorizontally()}),this._overlay_ref.attach(this._portal))}close(){this._overlay_ref&&(this._overlay_ref.dispose(),this._overlay_ref=null)}handleKeyPress(e){let i=this._element.nativeElement.selectionStart;const s=this._element.nativeElement.value||"";switch(e.toLowerCase()){case"{caps}":case"{shift}":this.state="shift";break;case"{backspace}":this._element.nativeElement.value=`${s.substr(0,i-1)}${s.substr(i,s.length)}`,i=Math.max(0,i-1);break;case"{space}":this._element.nativeElement.value=`${s.substr(0,i)} ${s.substr(i,s.length)}`,i+=1;break;default:"shift"===this.state&&(this.state="normal"),this._element.nativeElement.value=`${s.substr(0,i)}${e}${s.substr(i,s.length)}`,i+=1}this._element.nativeElement.dispatchEvent(new InputEvent("input")),this.updateKeyState(),this.timeout("focus",()=>{this.focusInput(),this._element.nativeElement.selectionStart=i,this._element.nativeElement.selectionEnd=i},50)}updateKeyState(){this.keyset=this.keyset.map(e=>e.map(i=>i.length>1?i:i["normal"!==this.state?"toUpperCase":"toLowerCase"]()))}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(rr))};static#t=this.\u0275cmp=Se({type:t,selectors:[["input","keyboard",""],["textarea","keyboard",""]],viewQuery:function(i,s){if(1&i&&Gt(bE,5),2&i){let r;nt(r=it())&&(s._portal=r.first)}},hostBindings:function(i,s){1&i&&P("focus",function(){return s.onFocus()})("blur",function(){return s.onBlur()})},inputs:{keyset:"keyset"},features:[Ze,Rn],attrs:jnt,ngContentSelectors:Hnt,decls:2,vars:0,consts:[["cdk-portal",""],["keyboard-view","",1,"w-screen","flex","flex-col","space-y-4","bg-base-200","p-2","border-t","border-base-200"],["row","","class","flex items-center justify-center space-x-2",4,"ngFor","ngForOf"],["row","",1,"flex","items-center","justify-center","space-x-2"],[4,"ngFor","ngForOf"],["tabindex","0",1,"rounded-xl","p-2","border","border-base-200","relative","cursor-pointer","bg-base-100",3,"focus","click"],["dot","","class","absolute top-2 right-2 h-2 w-2 rounded-full bg-base-200",3,"bg-success",4,"ngIf"],["dot","",1,"absolute","top-2","right-2","h-2","w-2","rounded-full","bg-base-200"]],template:function(i,s){1&i&&(Si(),en(0),O(1,Xnt,2,1,"ng-template",0))},dependencies:[on,mt,rV],styles:["[key][_ngcontent-%COMP%]{height:3.5rem;width:4rem;transition:box-shadow .2s,top .2s;box-shadow:0 4px 0 .04px #0000001a}[key].special[_ngcontent-%COMP%]{width:10rem}[key].space[_ngcontent-%COMP%]{flex:1;min-width:10rem;max-width:25rem}[key][_ngcontent-%COMP%]:hover{top:2px;box-shadow:0 2px 0 .04px #0000001a}[key][_ngcontent-%COMP%]:active{top:4px;box-shadow:0 0 0 .04px #0000001a}"]})}return t})();function Ynt(t,n){1&t&&(m(0,"div",2),S(1," Unable to reach server... Some features may not work. "),_())}function Znt(t,n){1&t&&(m(0,"div",3),q(1,"mat-spinner",4),_()),2&t&&(b(),C("diameter",64))}let hfe=(()=>{class t extends hn{get online(){return function AXe(){return Sf.getValue()}()}constructor(e,i){super(),this._org=e,this._settings=i}ngOnInit(){var e=this;return z(function*(){e.loading=!0,yield e._org.initialised.pipe(as(i=>i)).toPromise(),yield e._settings.initialised.pipe(as(i=>i)).toPromise(),e.interval("has_token",()=>{!mc()||!Ho()||(e.loading=!1,e.clearInterval("has_token"))},1e3)})()}static#e=this.\u0275fac=function(i){return new(i||t)(I(Sn),I(nn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["global-loading"]],features:[Ze],decls:2,vars:2,consts:[["class","fixed bottom-2 left-1/2 -translate-x-1/2 shadow rounded-3xl px-4 py-2 bg-error text-white text-xs",4,"ngIf"],["loader","","class","fixed inset-0 flex items-center justify-center pointer-events-auto bg-base-100",4,"ngIf"],[1,"fixed","bottom-2","left-1/2","-translate-x-1/2","shadow","rounded-3xl","px-4","py-2","bg-error","text-white","text-xs"],["loader","",1,"fixed","inset-0","flex","items-center","justify-center","pointer-events-auto","bg-base-100"],[3,"diameter"]],template:function(i,s){1&i&&O(0,Ynt,2,0,"div",0)(1,Znt,2,1,"div",1),2&i&&(C("ngIf",!s.online),b(),C("ngIf",s.loading))},dependencies:[mt,Zs],styles:["[_nghost-%COMP%]{pointer-events:none}[_nghost-%COMP%] > [loader][_ngcontent-%COMP%]{z-index:997;background-image:url(\"data:image/svg+xml,%3Csvg width='36' height='36' viewBox='0 0 36 36' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M36 0H0v36h36V0zM15.126 2H2v13.126c.367.094.714.24 1.032.428L15.554 3.032c-.188-.318-.334-.665-.428-1.032zM18 4.874V18H4.874c-.094-.367-.24-.714-.428-1.032L16.968 4.446c.318.188.665.334 1.032.428zM22.874 2h11.712L20 16.586V4.874c1.406-.362 2.512-1.468 2.874-2.874zm10.252 18H20v13.126c.367.094.714.24 1.032.428l12.522-12.522c-.188-.318-.334-.665-.428-1.032zM36 22.874V36H22.874c-.094-.367-.24-.714-.428-1.032l12.522-12.522c.318.188.665.334 1.032.428zm0-7.748V3.414L21.414 18h11.712c.362-1.406 1.468-2.512 2.874-2.874zm-18 18V21.414L3.414 36h11.712c.362-1.406 1.468-2.512 2.874-2.874zM4.874 20h11.712L2 34.586V22.874c1.406-.362 2.512-1.468 2.874-2.874z' fill='%23000000' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E\")}"]})}return t})();function eit(t,n){if(1&t){const e=se();m(0,"div",1)(1,"div",2),S(2),_(),m(3,"button",3),P("click",function(){return B(e),V(E().close())}),m(4,"app-icon"),S(5,"close"),_()()()}if(2&t){const e=E();Oe("bg-info","info"===e.banner.type||!e.banner.type)("text-info-content","info"===e.banner.type||!e.banner.type)("bg-warning","warn"===e.banner.type)("text-warning-content","warn"===e.banner.type)("bg-error","error"===e.banner.type)("text-error-content","error"===e.banner.type),b(2),Ye(null==e.banner?null:e.banner.content)}}let pfe=(()=>{class t{get has_viewed(){return!this.banner?.content||localStorage.getItem("PLACE.last_banner")===this.banner.id}get banner(){return this._settings.get("app.general.banner")}constructor(e){this._settings=e}close(){localStorage.setItem("PLACE.last_banner",this.banner?.id||"")}static#e=this.\u0275fac=function(i){return new(i||t)(I(nn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["global-banner"]],decls:1,vars:1,consts:[["class","flex items-center w-full p-4 space-x-4",3,"bg-info","text-info-content","bg-warning","text-warning-content","bg-error","text-error-content",4,"ngIf"],[1,"flex","items-center","w-full","p-4","space-x-4"],[1,"flex-1"],["icon","",3,"click"]],template:function(i,s){1&i&&O(0,eit,6,13,"div",0),2&i&&C("ngIf",!s.has_viewed)},dependencies:[mt,St],styles:["[_nghost-%COMP%]{display:block;width:100%}"]})}return t})();const tit=()=>({disable_pan:!0,disable_zoom:!0});function nit(t,n){if(1&t&&(m(0,"div",7)(1,"interactive-map",8),q(2,"mat-spinner",9),_(),m(3,"div",10),S(4),_()()),2&t){const e=E();b(),C("src",null==e.level?null:e.level.map_id)("focus",null==e.item?null:e.item.map_id)("features",e.features)("options",tn(5,tit)),b(3),K(" ",(null==e.level?null:e.level.display_name)||(null==e.level?null:e.level.name)," ")}}let MT=(()=>{class t extends hn{get level(){return this.item.level||this._org.levelWithID(this.item.zones||[])}constructor(e,i){super(),this._data=e,this._org=i,this.event=new Ae,this.item=this._data.item,this.style_map={},this.item.level?.id||delete this.item.level}ngOnInit(){this.timeout("init",()=>{this.processFeature(),this.processStyles()},1e3)}processStyles(){const e={};this.item?.map_id&&(e["#zones"]={display:"none"},e["#Zones"]={display:"none"}),this.style_map=e}processFeature(){if(!this.item)return null;this.features=[{location:this.item.map_id,track_id:"focus_item",content:Gu,data:{name:this.item.name},z_index:99,zoom:100}]}static#e=this.\u0275fac=function(i){return new(i||t)(I(or),I(Sn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["map-locate-modal"]],outputs:{event:"event"},features:[Ze],decls:10,vars:2,consts:[[1,"h-[calc(100vh-4rem)]","w-screen","sm:h-auto","sm:w-auto"],[1,"p-4"],[1,"text-2xl"],[1,"ml-2","text-xl","font-medium"],["body","","class","relative overflow-hidden h-[65vh] w-full sm:max-h-[65vh]",4,"ngIf"],[1,"w-full","border-t","border-base-200","flex","items-center","justify-center","p-2"],["btn","","matRipple","","mat-dialog-close","",1,"inverse","w-32"],["body","",1,"relative","overflow-hidden","h-[65vh]","w-full","sm:max-h-[65vh]"],[1,"pointer-events-none",3,"src","focus","features","options"],["diameter","64"],[1,"absolute","top-2","right-2","py-2","px-4","bg-base-100","rounded-3xl","shadow","border","border-base-200"]],template:function(i,s){1&i&&(m(0,"div",0)(1,"header",1)(2,"app-icon",2),S(3,"place"),_(),m(4,"h1",3),S(5),_()(),O(6,nit,5,6,"div",4),m(7,"footer",5)(8,"button",6),S(9," Close "),_()()()),2&i&&(b(5),K(" ",s.item.display_name||s.item.name," "),b(),C("ngIf",s.level))},styles:["[body][_ngcontent-%COMP%]{min-width:80vw!important}"]})}return t})();function iit(t,n){if(1&t&&q(0,"img",8),2&t){const e=E().$implicit;C("source",e.url||e)}}function sit(t,n){if(1&t&&(m(0,"div",6),O(1,iit,1,1,"img",7),_()),2&t){const e=n.$implicit;Hn("transform","translateX(-"+100*E().offset+"%)"),b(),C("ngIf",e)}}function rit(t,n){1&t&&(m(0,"div",9)(1,"app-icon",10),S(2,"image_not_supported"),_(),m(3,"p"),S(4,"No images"),_()())}function oit(t,n){if(1&t){const e=se();m(0,"button",11),P("click",function(){B(e);const s=E();return V(s.offset=s.offset-1)}),m(1,"app-icon",12),S(2,"chevron_left"),_()()}2&t&&C("disabled",0===E().offset)}function ait(t,n){if(1&t){const e=se();m(0,"button",13),P("click",function(){B(e);const s=E();return V(s.offset=s.offset+1)}),m(1,"app-icon",12),S(2,"chevron_right"),_()()}if(2&t){const e=E();C("disabled",e.offset>=(null==e.images?null:e.images.length)-1)}}function lit(t,n){if(1&t&&q(0,"button",16),2&t){const e=n.index;Oe("!bg-base-100",E(2).offset===e)}}function cit(t,n){if(1&t&&(m(0,"div",14),O(1,lit,1,2,"button",15),_()),2&t){const e=E();b(),C("ngForOf",e.images)}}let cv=(()=>{class t{constructor(){this.images=[],this.offset=0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Se({type:t,selectors:[["image-carousel"]],inputs:{images:"images"},decls:6,vars:5,consts:[[1,"h-full","w-full","relative","overflow-hidden","flex"],["image","","class","h-full min-w-full relative flex items-center justify-center overflow-hidden",3,"transform",4,"ngFor","ngForOf"],["class","h-full w-full relative flex flex-col items-center justify-center opacity-30 space-y-2",4,"ngIf"],["matRipple","","class","opacity-0 hover:opacity-30 flex items-center justify-center absolute left-0 inset-y-0 w-1/3 bg-neutral text-white",3,"disabled","click",4,"ngIf"],["matRipple","","class","opacity-0 hover:opacity-30 flex items-center justify-center absolute right-0 inset-y-0 w-1/3 bg-neutral text-white",3,"disabled","click",4,"ngIf"],["class","absolute bottom-1 left-1/2 -translate-x-1/2 text-sm opacity-30 space-x-2",4,"ngIf"],["image","",1,"h-full","min-w-full","relative","flex","items-center","justify-center","overflow-hidden"],["auth","","class","h-full object-contain",3,"source",4,"ngIf"],["auth","",1,"h-full","object-contain",3,"source"],[1,"h-full","w-full","relative","flex","flex-col","items-center","justify-center","opacity-30","space-y-2"],[1,"text-5xl"],["matRipple","",1,"opacity-0","hover:opacity-30","flex","items-center","justify-center","absolute","left-0","inset-y-0","w-1/3","bg-neutral","text-white",3,"click","disabled"],[1,"text-4xl"],["matRipple","",1,"opacity-0","hover:opacity-30","flex","items-center","justify-center","absolute","right-0","inset-y-0","w-1/3","bg-neutral","text-white",3,"click","disabled"],[1,"absolute","bottom-1","left-1/2","-translate-x-1/2","text-sm","opacity-30","space-x-2"],["matRipple","","class","h-4 w-4 rounded-full bg-base-300 shadow",3,"!bg-base-100",4,"ngFor","ngForOf"],["matRipple","",1,"h-4","w-4","rounded-full","bg-base-300","shadow"]],template:function(i,s){1&i&&(m(0,"div",0),O(1,sit,2,3,"div",1)(2,rit,5,0,"div",2)(3,oit,3,1,"button",3)(4,ait,3,1,"button",4)(5,cit,2,1,"div",5),_()),2&i&&(b(),C("ngForOf",s.images),b(),C("ngIf",!(null!=s.images&&s.images.length)),b(),C("ngIf",null==s.images?null:s.images.length),b(),C("ngIf",null==s.images?null:s.images.length),b(),C("ngIf",null==s.images?null:s.images.length))},styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%}[image][_ngcontent-%COMP%]{transition:transform .3s}"]})}return t})();const uit=["years","months","weeks","days","hours","minutes","seconds"];function u_(t,n){const e=i_(),i=n?.locale??e.locale??WO,s=n?.format??uit,r=n?.zero??!1,o=n?.delimiter??" ";return i.formatDistance?s.reduce((l,c)=>{const u=`x${c.replace(/(^.)/,h=>h.toUpperCase())}`,d=t[c];return void 0!==d&&(r||t[c])?l.concat(i.formatDistance(u,d)):l},[]).join(o):""}let ffe=(()=>{class t{transform(e,i=!1){let s=u_({hours:Math.floor(e/60),minutes:e%60});return i&&(s=s.replace("hour","h").replace("minute","m").replace(/s/gi,"")),s}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275pipe=nr({name:"duration",type:t,pure:!0})}return t})(),mfe=(()=>{class t{constructor(e){this.json=e?.data||"",this._updateFormatting()}ngOnChanges(e){e.json&&this._updateFormatting()}_updateFormatting(){this.formatted_json=JSON.stringify(this.json,void 0,4)}static#e=this.\u0275fac=function(i){return new(i||t)(I(lv,8))};static#t=this.\u0275cmp=Se({type:t,selectors:[["json-display"]],inputs:{json:"json"},features:[Rn],decls:3,vars:1,consts:[[1,"bg-base-100","shadow","rounded","overflow-auto","max-w-[80vw]","max-h-[80vh]","p-2","border","border-base-300"],[1,"font-mono","text-sm","bg-base-200","p-2","rounded","break-all","w-full"]],template:function(i,s){1&i&&(m(0,"div",0)(1,"pre",1),S(2),_()()),2&i&&(b(2),Ye(s.formatted_json))},styles:["pre[_ngcontent-%COMP%]{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}"]})}return t})();function hit(t,n){if(1&t&&(Wt(0),m(1,"a",25),H(2,"sanitize"),S(3),_(),qt()),2&t){const e=E().$implicit;b(),C("href",ne(2,2,e),qa),b(2),Ye(e)}}function pit(t,n){if(1&t&&(Wt(0),S(1," ["),m(2,"span",26),S(3,"Object"),_(),S(4,"] "),qt()),2&t){const e=E().$implicit,i=E(4);b(2),C("content",i.json_tooltip)("data",e)("hover",!0)("backdrop",!1)}}function fit(t,n){if(1&t&&(Wt(0),S(1),qt()),2&t){const e=E().$implicit;b(),Ye(e)}}function mit(t,n){if(1&t&&(m(0,"div",21),Wt(1,22),O(2,hit,4,4,"ng-container",23)(3,pit,5,4,"ng-container",23)(4,fit,2,1,"ng-container",24),qt(),_()),2&t){const e=n.$implicit,i=E(4);wt("data-type",i.type(e)),b(),C("ngSwitch",i.type(e)),b(),C("ngSwitchCase","link"),b(),C("ngSwitchCase","object")}}function _it(t,n){if(1&t&&(m(0,"div",18)(1,"div",19),S(2),H(3,"date"),_(),m(4,"div"),S(5),_(),m(6,"div"),S(7),_(),O(8,mit,5,4,"div",20),_()),2&t){const e=n.$implicit,i=E(3);b(2),K(" ",At(3,8,e.timestamp,"MMM d HH:mm:ss")," "),b(2),$o("uppercase text-xs p-1 "+i.colors[e.type]+" rounded font-mono"),b(),K(" ",e.type," "),b(),$o("capitalize text-xs p-1 "+i.colors[e.subtype]+" rounded font-mono w-16 text-center"),b(),K(" ",e.subtype," "),b(),C("ngForOf",e.data)}}function git(t,n){if(1&t&&(m(0,"cdk-virtual-scroll-viewport",15),O(1,_it,9,11,"div",16),H(2,"async"),q(3,"div",17),_()),2&t){const e=E(2);b(),C("cdkVirtualForOf",ne(2,2,e.filtered_logs))("cdkVirtualForTrackBy",e.trackByFn)}}function bit(t,n){if(1&t&&(m(0,"span",27),S(1),H(2,"async"),_()),2&t){let e;const i=E(2);b(),K(" ",(null==(e=ne(2,1,i.filtered_logs))?null:e.length)||"0"," of ")}}function vit(t,n){if(1&t){const e=se();m(0,"div",4)(1,"div",5)(2,"div",6),S(3,"Console"),_(),m(4,"button",7),P("click",function(){return B(e),V(E().show=!1)}),m(5,"app-icon"),S(6,"close"),_()()(),O(7,git,4,4,"cdk-virtual-scroll-viewport",8),H(8,"async"),m(9,"div",9),q(10,"div",10)(11,"div",11),m(12,"input",12,1),H(14,"async"),P("ngModelChange",function(s){return B(e),V(E().filter.next(s))}),_(),m(15,"div",13),O(16,bit,3,3,"span",14),H(17,"async"),S(18),H(19,"async"),_()()()}if(2&t){let e,i,s;const r=E(),o=xt(3);b(7),C("ngIf",null==(e=ne(8,5,r.filtered_logs))?null:e.length)("ngIfElse",o),b(5),C("ngModel",ne(14,7,r.filter)),b(4),C("ngIf",null==(i=ne(17,9,r.filter))?null:i.length),b(2),K(" ",null==(s=ne(19,11,r.logs))?null:s.length," ")}}function yit(t,n){if(1&t){const e=se();m(0,"button",28),P("mousedown",function(){return B(e),V(E().onStart())})("touchstart",function(){return B(e),V(E().onStart())})("mouseup",function(){return B(e),V(E().onEnd())})("touchend",function(){return B(e),V(E().onEnd())}),_()}}function wit(t,n){if(1&t&&(m(0,"div",29)(1,"div",30),S(2),_()()),2&t){const e=E();b(2),K(" No ",e.filter.getValue()?"matching":""," logs ")}}const Cit={console:"bg-success-light text-black",network:"bg-success text-success-content",dom:"bg-warning-light text-black",log:"bg-info-light text-black",info:"bg-info text-info-content",warn:"bg-warning text-warning-content",debug:"bg-base-300 text-base-content",error:"bg-error text-error-content"},Sit=["tel:","mailto:","http:","https:","ftp:","ws:","wss:"];let b7=(()=>{class t extends hn{get can_activate(){return!!this._settings.get("app.debug_console")}constructor(e,i,s,r){super(),this._org=e,this._logs=i,this._hotkey=s,this._settings=r,this.show=!1,this.colors=Cit,this.json_tooltip=mfe,this.filter=new at(""),this.logs=new at([]),this.filtered_logs=Vt([this.filter,this.logs]).pipe(me(([o,a])=>a.filter(l=>l.type.toLowerCase().includes(o.toLowerCase())||l.subtype.toLowerCase().includes(o.toLowerCase())||`${l.data}`.toLowerCase().includes(o.toLowerCase())))),this.onStart=()=>this.timeout("show",()=>this.show=!0,5e3),this.onEnd=()=>this.clearTimeout("show")}ngOnInit(){var e=this;return z(function*(){yield e._org.initialised.pipe(as(i=>i)).toPromise(),e.subscription("binding",e._org.active_building.subscribe(()=>{e._logs.setSystem(e._org.binding("remote_logger"))})),e.subscription("logs",e._logs.history.subscribe(i=>{let s=e.logs.getValue();s.length>(e._settings.get("app.log_limits")||2e4)&&s.splice(0,1),e.logs.next([...s,i])})),e.subscription("toggle",e._hotkey.listen(["Control","Backquote"],()=>e.show=!e.show)),e._logs.setSystem(e._org.binding("remote_logger"))})()}type(e){return"string"==typeof e&&Sit.find(i=>e.startsWith(i))?"link":e instanceof Object?"object":"string"}trackByFn(e,i){return i?.timestamp}static#e=this.\u0275fac=function(i){return new(i||t)(I(Sn),I(zet),I(jde),I(nn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["debug-console"]],inputs:{show:"show"},features:[Ze],decls:4,vars:2,consts:[["empty_state",""],["search_input",""],["class","absolute bottom-2 left-2 max-w-[80vw] w-[40rem] border border-base-300 bg-base-200 text-base-content shadow rounded overflow-hidden h-[24rem] max-h-[65vh] flex flex-col z-[998]",4,"ngIf"],["activation","","class","absolute bottom-0 right-0 h-12 w-12",3,"mousedown","touchstart","mouseup","touchend",4,"ngIf"],[1,"absolute","bottom-2","left-2","max-w-[80vw]","w-[40rem]","border","border-base-300","bg-base-200","text-base-content","shadow","rounded","overflow-hidden","h-[24rem]","max-h-[65vh]","flex","flex-col","z-[998]"],[1,"flex","items-center","justify-between","bg-base-100","border-b","border-base-300"],[1,"p-2"],["icon","","matRipple","",3,"click"],["itemSize","32","class","flex-1 h-[30rem] max-h-full w-full",4,"ngIf","ngIfElse"],[1,"absolute","bottom-1","right-1","rounded-lg","p-1","flex","items-center","w-[20rem]","overflow-hidden"],[1,"absolute","inset-0","bg-base-content","opacity-60","z-0"],[1,"absolute","inset-1","bg-base-content","opacity-90","rounded","z-0"],["name","log-filter","placeholder","Filter logs...",1,"relative","border-none","flex-1","text-sm","px-2","py-1","font-mono","rounded","text-base-100",3,"ngModelChange","ngModel"],[1,"relative","font-mono","text-xs","px-2","text-center","text-base-100"],["class","font-mono",4,"ngIf"],["itemSize","32",1,"flex-1","h-[30rem]","max-h-full","w-full"],["class","font-mono h-8 truncate p-2 text-sm flex items-center max-w-full hover:bg-base-100 space-x-1",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"h-8","w-full"],[1,"font-mono","h-8","truncate","p-2","text-sm","flex","items-center","max-w-full","hover:bg-base-100","space-x-1"],[1,"uppercase","text-xs","p-1","bg-base-100/10","rounded","font-mono"],["class","font-mono pl-1",4,"ngFor","ngForOf"],[1,"font-mono","pl-1"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["target","_blank","rel","noopener noreferer",1,"font-mono",3,"href"],["customTooltip","","xPosition","center","yPosition","bottom",1,"underline","font-mono","hover:text-info",3,"content","data","hover","backdrop"],[1,"font-mono"],["activation","",1,"absolute","bottom-0","right-0","h-12","w-12",3,"mousedown","touchstart","mouseup","touchend"],[1,"flex-1","flex","flex-col","items-center","justify-center","h-[30rem]","w-full"],[1,"text-2xl","opacity-30"]],template:function(i,s){1&i&&O(0,vit,20,13,"div",2)(1,yit,1,0,"button",3)(2,wit,3,1,"ng-template",null,0,ln),2&i&&(C("ngIf",s.show),b(),C("ngIf",s.can_activate))}})}return t})();let uv={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function _fe(t){uv=t}const gfe=/[&<>"']/,xit=new RegExp(gfe.source,"g"),bfe=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Eit=new RegExp(bfe.source,"g"),Tit={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vfe=t=>Tit[t];function ru(t,n){if(n){if(gfe.test(t))return t.replace(xit,vfe)}else if(bfe.test(t))return t.replace(Eit,vfe);return t}const Iit=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,Dit=/(^|[^\[])\^/g;function ar(t,n){let e="string"==typeof t?t:t.source;n=n||"";const i={replace:(s,r)=>{let o="string"==typeof r?r:r.source;return o=o.replace(Dit,"$1"),e=e.replace(s,o),i},getRegex:()=>new RegExp(e,n)};return i}function yfe(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const NT={exec:()=>null};function wfe(t,n){const i=t.replace(/\|/g,(r,o,a)=>{let l=!1,c=o;for(;--c>=0&&"\\"===a[c];)l=!l;return l?"|":" |"}).split(/ \|/);let s=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),n)if(i.length>n)i.splice(n);else for(;i.length<n;)i.push("");for(;s<i.length;s++)i[s]=i[s].trim().replace(/\\\|/g,"|");return i}function OT(t,n,e){const i=t.length;if(0===i)return"";let s=0;for(;s<i;){const r=t.charAt(i-s-1);if(r!==n||e){if(r===n||!e)break;s++}else s++}return t.slice(0,i-s)}function Cfe(t,n,e,i){const s=n.href,r=n.title?ru(n.title):null,o=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){i.state.inLink=!0;const a={type:"link",raw:e,href:s,title:r,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,a}return{type:"image",raw:e,href:s,title:r,text:ru(o)}}class pR{options;rules;lexer;constructor(n){this.options=n||uv}space(n){const e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){const e=this.rules.block.code.exec(n);if(e){const i=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?i:OT(i,"\n")}}}fences(n){const e=this.rules.block.fences.exec(n);if(e){const i=e[0],s=function Mit(t,n){const e=t.match(/^(\s+)(?:```)/);if(null===e)return n;const i=e[1];return n.split("\n").map(s=>{const r=s.match(/^\s+/);if(null===r)return s;const[o]=r;return o.length>=i.length?s.slice(i.length):s}).join("\n")}(i,e[3]||"");return{type:"code",raw:i,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:s}}}heading(n){const e=this.rules.block.heading.exec(n);if(e){let i=e[2].trim();if(/#$/.test(i)){const s=OT(i,"#");(this.options.pedantic||!s||/ $/.test(s))&&(i=s.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(n){const e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:OT(e[0],"\n")}}blockquote(n){const e=this.rules.block.blockquote.exec(n);if(e){let i=OT(e[0],"\n").split("\n"),s="",r="";const o=[];for(;i.length>0;){let a=!1;const l=[];let c;for(c=0;c<i.length;c++)if(/^ {0,3}>/.test(i[c]))l.push(i[c]),a=!0;else{if(a)break;l.push(i[c])}i=i.slice(c);const u=l.join("\n"),d=u.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1").replace(/^ {0,3}>[ \t]?/gm,"");s=s?`${s}\n${u}`:u,r=r?`${r}\n${d}`:d;const h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,o,!0),this.lexer.state.top=h,0===i.length)break;const p=o[o.length-1];if("code"===p?.type)break;if("blockquote"===p?.type){const f=p,g=f.raw+"\n"+i.join("\n"),v=this.blockquote(g);o[o.length-1]=v,s=s.substring(0,s.length-f.raw.length)+v.raw,r=r.substring(0,r.length-f.text.length)+v.text;break}if("list"!==p?.type);else{const f=p,g=f.raw+"\n"+i.join("\n"),v=this.list(g);o[o.length-1]=v,s=s.substring(0,s.length-p.raw.length)+v.raw,r=r.substring(0,r.length-f.raw.length)+v.raw,i=g.substring(o[o.length-1].raw.length).split("\n")}}return{type:"blockquote",raw:s,tokens:o,text:r}}}list(n){let e=this.rules.block.list.exec(n);if(e){let i=e[1].trim();const s=i.length>1,r={type:"list",raw:"",ordered:s,start:s?+i.slice(0,-1):"",loose:!1,items:[]};i=s?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=s?i:"[*+-]");const o=new RegExp(`^( {0,3}${i})((?:[\t ][^\\n]*)?(?:\\n|$))`);let a=!1;for(;n;){let l=!1,c="",u="";if(!(e=o.exec(n))||this.rules.block.hr.test(n))break;c=e[0],n=n.substring(c.length);let d=e[2].split("\n",1)[0].replace(/^\t+/,y=>" ".repeat(3*y.length)),h=n.split("\n",1)[0],p=!d.trim(),f=0;if(this.options.pedantic?(f=2,u=d.trimStart()):p?f=e[1].length+1:(f=e[2].search(/[^ ]/),f=f>4?1:f,u=d.slice(f),f+=e[1].length),p&&/^ *$/.test(h)&&(c+=h+"\n",n=n.substring(h.length+1),l=!0),!l){const y=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),w=new RegExp(`^ {0,${Math.min(3,f-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),x=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:\`\`\`|~~~)`),T=new RegExp(`^ {0,${Math.min(3,f-1)}}#`);for(;n;){const k=n.split("\n",1)[0];if(h=k,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),x.test(h)||T.test(h)||y.test(h)||w.test(n))break;if(h.search(/[^ ]/)>=f||!h.trim())u+="\n"+h.slice(f);else{if(p||d.search(/[^ ]/)>=4||x.test(d)||T.test(d)||w.test(d))break;u+="\n"+h}!p&&!h.trim()&&(p=!0),c+=k+"\n",n=n.substring(k.length+1),d=h.slice(f)}}r.loose||(a?r.loose=!0:/\n *\n *$/.test(c)&&(a=!0));let v,g=null;this.options.gfm&&(g=/^\[[ xX]\] /.exec(u),g&&(v="[ ] "!==g[0],u=u.replace(/^\[[ xX]\] +/,""))),r.items.push({type:"list_item",raw:c,task:!!g,checked:v,loose:!1,text:u,tokens:[]}),r.raw+=c}r.items[r.items.length-1].raw=r.items[r.items.length-1].raw.trimEnd(),r.items[r.items.length-1].text=r.items[r.items.length-1].text.trimEnd(),r.raw=r.raw.trimEnd();for(let l=0;l<r.items.length;l++)if(this.lexer.state.top=!1,r.items[l].tokens=this.lexer.blockTokens(r.items[l].text,[]),!r.loose){const c=r.items[l].tokens.filter(d=>"space"===d.type),u=c.length>0&&c.some(d=>/\n.*\n/.test(d.raw));r.loose=u}if(r.loose)for(let l=0;l<r.items.length;l++)r.items[l].loose=!0;return r}}html(n){const e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:"pre"===e[1]||"script"===e[1]||"style"===e[1],text:e[0]}}def(n){const e=this.rules.block.def.exec(n);if(e){const i=e[1].toLowerCase().replace(/\s+/g," "),s=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:i,raw:e[0],href:s,title:r}}}table(n){const e=this.rules.block.table.exec(n);if(!e||!/[:|]/.test(e[2]))return;const i=wfe(e[1]),s=e[2].replace(/^\||\| *$/g,"").split("|"),r=e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split("\n"):[],o={type:"table",raw:e[0],header:[],align:[],rows:[]};if(i.length===s.length){for(const a of s)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<i.length;a++)o.header.push({text:i[a],tokens:this.lexer.inline(i[a]),header:!0,align:o.align[a]});for(const a of r)o.rows.push(wfe(a,o.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[c]})));return o}}lheading(n){const e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){const e=this.rules.block.paragraph.exec(n);if(e){const i="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:i,tokens:this.lexer.inline(i)}}}text(n){const e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){const e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:ru(e[1])}}tag(n){const e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){const e=this.rules.inline.link.exec(n);if(e){const i=e[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=OT(i.slice(0,-1),"\\");if((i.length-o.length)%2==0)return}else{const o=function Ait(t,n){if(-1===t.indexOf(n[1]))return-1;let e=0;for(let i=0;i<t.length;i++)if("\\"===t[i])i++;else if(t[i]===n[0])e++;else if(t[i]===n[1]&&(e--,e<0))return i;return-1}(e[2],"()");if(o>-1){const l=(0===e[0].indexOf("!")?5:4)+e[1].length+o;e[2]=e[2].substring(0,o),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let s=e[2],r="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);o&&(s=o[1],r=o[3])}else r=e[3]?e[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(i)?s.slice(1):s.slice(1,-1)),Cfe(e,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer)}}reflink(n,e){let i;if((i=this.rules.inline.reflink.exec(n))||(i=this.rules.inline.nolink.exec(n))){const r=e[(i[2]||i[1]).replace(/\s+/g," ").toLowerCase()];if(!r){const o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return Cfe(i,r,i[0],this.lexer)}}emStrong(n,e,i=""){let s=this.rules.inline.emStrongLDelim.exec(n);if(!(!s||s[3]&&i.match(/[\p{L}\p{N}]/u))&&(!s[1]&&!s[2]||!i||this.rules.inline.punctuation.exec(i))){const o=[...s[0]].length-1;let a,l,c=o,u=0;const d="*"===s[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,e=e.slice(-1*n.length+o);null!=(s=d.exec(e));){if(a=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!a)continue;if(l=[...a].length,s[3]||s[4]){c+=l;continue}if((s[5]||s[6])&&o%3&&!((o+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const h=[...s[0]][0].length,p=n.slice(0,o+s.index+h+l);if(Math.min(o,l)%2){const g=p.slice(1,-1);return{type:"em",raw:p,text:g,tokens:this.lexer.inlineTokens(g)}}const f=p.slice(2,-2);return{type:"strong",raw:p,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(n){const e=this.rules.inline.code.exec(n);if(e){let i=e[2].replace(/\n/g," ");const s=/[^ ]/.test(i),r=/^ /.test(i)&&/ $/.test(i);return s&&r&&(i=i.substring(1,i.length-1)),i=ru(i,!0),{type:"codespan",raw:e[0],text:i}}}br(n){const e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){const e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){const e=this.rules.inline.autolink.exec(n);if(e){let i,s;return"@"===e[2]?(i=ru(e[1]),s="mailto:"+i):(i=ru(e[1]),s=i),{type:"link",raw:e[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}url(n){let e;if(e=this.rules.inline.url.exec(n)){let i,s;if("@"===e[2])i=ru(e[0]),s="mailto:"+i;else{let r;do{r=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??""}while(r!==e[0]);i=ru(e[0]),s="www."===e[1]?"http://"+e[0]:e[0]}return{type:"link",raw:e[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(n){const e=this.rules.inline.text.exec(n);if(e){let i;return i=this.lexer.state.inRawBlock?e[0]:ru(e[0]),{type:"text",raw:e[0],text:i}}}}const RT=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Sfe=/(?:[*+-]|\d{1,9}[.)])/,xfe=ar(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Sfe).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),y7=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,w7=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Pit=ar(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",w7).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),$it=ar(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Sfe).getRegex(),fR="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",C7=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Bit=ar("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",C7).replace("tag",fR).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Efe=ar(y7).replace("hr",RT).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fR).getRegex(),S7={blockquote:ar(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Efe).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:Pit,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:RT,html:Bit,lheading:xfe,list:$it,newline:/^(?: *(?:\n|$))+/,paragraph:Efe,table:NT,text:/^[^\n]+/},Tfe=ar("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",RT).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fR).getRegex(),Vit={...S7,table:Tfe,paragraph:ar(y7).replace("hr",RT).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Tfe).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fR).getRegex()},zit={...S7,html:ar("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",C7).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:NT,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ar(y7).replace("hr",RT).replace("heading"," *#{1,6} *[^\n]").replace("lheading",xfe).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Ife=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,kfe=/^( {2,}|\\)\n(?!\s*$)/,FT="\\p{P}\\p{S}",jit=ar(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,FT).getRegex(),Wit=ar(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,FT).getRegex(),qit=ar("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,FT).getRegex(),Kit=ar("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,FT).getRegex(),Xit=ar(/\\([punct])/,"gu").replace(/punct/g,FT).getRegex(),Yit=ar(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Zit=ar(C7).replace("(?:--\x3e|$)","--\x3e").getRegex(),Qit=ar("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Zit).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),mR=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Jit=ar(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",mR).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Dfe=ar(/^!?\[(label)\]\[(ref)\]/).replace("label",mR).replace("ref",w7).getRegex(),Afe=ar(/^!?\[(ref)\](?:\[\])?/).replace("ref",w7).getRegex(),x7={_backpedal:NT,anyPunctuation:Xit,autolink:Yit,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:kfe,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:NT,emStrongLDelim:Wit,emStrongRDelimAst:qit,emStrongRDelimUnd:Kit,escape:Ife,link:Jit,nolink:Afe,punctuation:jit,reflink:Dfe,reflinkSearch:ar("reflink|nolink(?!\\()","g").replace("reflink",Dfe).replace("nolink",Afe).getRegex(),tag:Qit,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:NT},tst={...x7,link:ar(/^!?\[(label)\]\((.*?)\)/).replace("label",mR).getRegex(),reflink:ar(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",mR).getRegex()},E7={...x7,escape:ar(Ife).replace("])","~|])").getRegex(),url:ar(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},nst={...E7,br:ar(kfe).replace("{2,}","*").getRegex(),text:ar(E7.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},_R={normal:S7,gfm:Vit,pedantic:zit},LT={normal:x7,gfm:E7,breaks:nst,pedantic:tst};class sp{tokens;options;state;tokenizer;inlineQueue;constructor(n){this.tokens=[],this.tokens.links=Object.create(null),this.options=n||uv,this.options.tokenizer=this.options.tokenizer||new pR,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:_R.normal,inline:LT.normal};this.options.pedantic?(e.block=_R.pedantic,e.inline=LT.pedantic):this.options.gfm&&(e.block=_R.gfm,e.inline=this.options.breaks?LT.breaks:LT.gfm),this.tokenizer.rules=e}static get rules(){return{block:_R,inline:LT}}static lex(n,e){return new sp(e).lex(n)}static lexInline(n,e){return new sp(e).inlineTokens(n)}lex(n){n=n.replace(/\r\n|\r/g,"\n"),this.blockTokens(n,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const i=this.inlineQueue[e];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(n,e=[],i=!1){let s,r,o;for(n=this.options.pedantic?n.replace(/\t/g,"    ").replace(/^ +$/gm,""):n.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));n;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(s=a.call({lexer:this},n,e))&&(n=n.substring(s.raw.length),e.push(s),!0)))){if(s=this.tokenizer.space(n)){n=n.substring(s.raw.length),1===s.raw.length&&e.length>0?e[e.length-1].raw+="\n":e.push(s);continue}if(s=this.tokenizer.code(n)){n=n.substring(s.raw.length),r=e[e.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?e.push(s):(r.raw+="\n"+s.raw,r.text+="\n"+s.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(s=this.tokenizer.fences(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.heading(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.hr(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.blockquote(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.list(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.html(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.def(n)){n=n.substring(s.raw.length),r=e[e.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title}):(r.raw+="\n"+s.raw,r.text+="\n"+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(s=this.tokenizer.table(n)){n=n.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.lheading(n)){n=n.substring(s.raw.length),e.push(s);continue}if(o=n,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=n.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},l),"number"==typeof c&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(o=n.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(o))){r=e[e.length-1],i&&"paragraph"===r?.type?(r.raw+="\n"+s.raw,r.text+="\n"+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(s),i=o.length!==n.length,n=n.substring(s.raw.length);continue}if(s=this.tokenizer.text(n)){n=n.substring(s.raw.length),r=e[e.length-1],r&&"text"===r.type?(r.raw+="\n"+s.raw,r.text+="\n"+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(s);continue}if(n){const a="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,e}inline(n,e=[]){return this.inlineQueue.push({src:n,tokens:e}),e}inlineTokens(n,e=[]){let i,s,r,a,l,c,o=n;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(o));)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(o));)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.anyPunctuation.exec(o));)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;n;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>!!(i=u.call({lexer:this},n,e))&&(n=n.substring(i.raw.length),e.push(i),!0)))){if(i=this.tokenizer.escape(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.tag(n)){n=n.substring(i.raw.length),s=e[e.length-1],s&&"text"===i.type&&"text"===s.type?(s.raw+=i.raw,s.text+=i.text):e.push(i);continue}if(i=this.tokenizer.link(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.reflink(n,this.tokens.links)){n=n.substring(i.raw.length),s=e[e.length-1],s&&"text"===i.type&&"text"===s.type?(s.raw+=i.raw,s.text+=i.text):e.push(i);continue}if(i=this.tokenizer.emStrong(n,o,c)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.codespan(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.br(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.del(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.autolink(n)){n=n.substring(i.raw.length),e.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(n))){n=n.substring(i.raw.length),e.push(i);continue}if(r=n,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const d=n.slice(1);let h;this.options.extensions.startInline.forEach(p=>{h=p.call({lexer:this},d),"number"==typeof h&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(r=n.substring(0,u+1))}if(i=this.tokenizer.inlineText(r)){n=n.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(c=i.raw.slice(-1)),l=!0,s=e[e.length-1],s&&"text"===s.type?(s.raw+=i.raw,s.text+=i.text):e.push(i);continue}if(n){const u="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(u);break}throw new Error(u)}}return e}}class gR{options;parser;constructor(n){this.options=n||uv}space(n){return""}code({text:n,lang:e,escaped:i}){const s=(e||"").match(/^\S*/)?.[0],r=n.replace(/\n$/,"")+"\n";return s?'<pre><code class="language-'+ru(s)+'">'+(i?r:ru(r,!0))+"</code></pre>\n":"<pre><code>"+(i?r:ru(r,!0))+"</code></pre>\n"}blockquote({tokens:n}){return`<blockquote>\n${this.parser.parse(n)}</blockquote>\n`}html({text:n}){return n}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>\n`}hr(n){return"<hr>\n"}list(n){const e=n.ordered,i=n.start;let s="";for(let a=0;a<n.items.length;a++)s+=this.listitem(n.items[a]);const r=e?"ol":"ul";return"<"+r+(e&&1!==i?' start="'+i+'"':"")+">\n"+s+"</"+r+">\n"}listitem(n){let e="";if(n.task){const i=this.checkbox({checked:!!n.checked});n.loose?n.tokens.length>0&&"paragraph"===n.tokens[0].type?(n.tokens[0].text=i+" "+n.tokens[0].text,n.tokens[0].tokens&&n.tokens[0].tokens.length>0&&"text"===n.tokens[0].tokens[0].type&&(n.tokens[0].tokens[0].text=i+" "+n.tokens[0].tokens[0].text)):n.tokens.unshift({type:"text",raw:i+" ",text:i+" "}):e+=i+" "}return e+=this.parser.parse(n.tokens,!!n.loose),`<li>${e}</li>\n`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>\n`}table(n){let e="",i="";for(let r=0;r<n.header.length;r++)i+=this.tablecell(n.header[r]);e+=this.tablerow({text:i});let s="";for(let r=0;r<n.rows.length;r++){const o=n.rows[r];i="";for(let a=0;a<o.length;a++)i+=this.tablecell(o[a]);s+=this.tablerow({text:i})}return s&&(s=`<tbody>${s}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+s+"</table>\n"}tablerow({text:n}){return`<tr>\n${n}</tr>\n`}tablecell(n){const e=this.parser.parseInline(n.tokens),i=n.header?"th":"td";return(n.align?`<${i} align="${n.align}">`:`<${i}>`)+e+`</${i}>\n`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${n}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:i}){const s=this.parser.parseInline(i),r=yfe(n);if(null===r)return s;let o='<a href="'+(n=r)+'"';return e&&(o+=' title="'+e+'"'),o+=">"+s+"</a>",o}image({href:n,title:e,text:i}){const s=yfe(n);if(null===s)return i;let r=`<img src="${n=s}" alt="${i}"`;return e&&(r+=` title="${e}"`),r+=">",r}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):n.text}}class T7{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}}class rp{options;renderer;textRenderer;constructor(n){this.options=n||uv,this.options.renderer=this.options.renderer||new gR,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new T7}static parse(n,e){return new rp(e).parse(n)}static parseInline(n,e){return new rp(e).parseInline(n)}parse(n,e=!0){let i="";for(let s=0;s<n.length;s++){const r=n[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const a=r,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(!1!==l||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){i+=l||"";continue}}const o=r;switch(o.type){case"space":i+=this.renderer.space(o);continue;case"hr":i+=this.renderer.hr(o);continue;case"heading":i+=this.renderer.heading(o);continue;case"code":i+=this.renderer.code(o);continue;case"table":i+=this.renderer.table(o);continue;case"blockquote":i+=this.renderer.blockquote(o);continue;case"list":i+=this.renderer.list(o);continue;case"html":i+=this.renderer.html(o);continue;case"paragraph":i+=this.renderer.paragraph(o);continue;case"text":{let a=o,l=this.renderer.text(a);for(;s+1<n.length&&"text"===n[s+1].type;)a=n[++s],l+="\n"+this.renderer.text(a);i+=e?this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l}]}):l;continue}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}parseInline(n,e){e=e||this.renderer;let i="";for(let s=0;s<n.length;s++){const r=n[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const a=this.options.extensions.renderers[r.type].call({parser:this},r);if(!1!==a||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){i+=a||"";continue}}const o=r;switch(o.type){case"escape":case"text":i+=e.text(o);break;case"html":i+=e.html(o);break;case"link":i+=e.link(o);break;case"image":i+=e.image(o);break;case"strong":i+=e.strong(o);break;case"em":i+=e.em(o);break;case"codespan":i+=e.codespan(o);break;case"br":i+=e.br(o);break;case"del":i+=e.del(o);break;default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}}class bR{options;constructor(n){this.options=n||uv}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}}const dv=new class ist{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#t(sp.lex,rp.parse);parseInline=this.#t(sp.lexInline,rp.parseInline);Parser=rp;Renderer=gR;TextRenderer=T7;Lexer=sp;Tokenizer=pR;Hooks=bR;constructor(...n){this.use(...n)}walkTokens(n,e){let i=[];for(const s of n)switch(i=i.concat(e.call(this,s)),s.type){case"table":{const r=s;for(const o of r.header)i=i.concat(this.walkTokens(o.tokens,e));for(const o of r.rows)for(const a of o)i=i.concat(this.walkTokens(a.tokens,e));break}case"list":i=i.concat(this.walkTokens(s.items,e));break;default:{const r=s;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(o=>{const a=r[o].flat(1/0);i=i.concat(this.walkTokens(a,e))}):r.tokens&&(i=i.concat(this.walkTokens(r.tokens,e)))}}return i}use(...n){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(i=>{const s={...i};if(s.async=this.defaults.async||s.async||!1,i.extensions&&(i.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const o=e.renderers[r.name];e.renderers[r.name]=o?function(...a){let l=r.renderer.apply(this,a);return!1===l&&(l=o.apply(this,a)),l}:r.renderer}if("tokenizer"in r){if(!r.level||"block"!==r.level&&"inline"!==r.level)throw new Error("extension level must be 'block' or 'inline'");const o=e[r.level];o?o.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&("block"===r.level?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:"inline"===r.level&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),s.extensions=e),i.renderer){const r=this.defaults.renderer||new gR(this.defaults);for(const o in i.renderer){if(!(o in r))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;const a=o;let l=i.renderer[a];i.useNewRenderer||(l=this.#e(l,a,r));const c=r[a];r[a]=(...u)=>{let d=l.apply(r,u);return!1===d&&(d=c.apply(r,u)),d||""}}s.renderer=r}if(i.tokenizer){const r=this.defaults.tokenizer||new pR(this.defaults);for(const o in i.tokenizer){if(!(o in r))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const l=i.tokenizer[o],c=r[o];r[o]=(...u)=>{let d=l.apply(r,u);return!1===d&&(d=c.apply(r,u)),d}}s.tokenizer=r}if(i.hooks){const r=this.defaults.hooks||new bR;for(const o in i.hooks){if(!(o in r))throw new Error(`hook '${o}' does not exist`);if("options"===o)continue;const l=i.hooks[o],c=r[o];r[o]=bR.passThroughHooks.has(o)?u=>{if(this.defaults.async)return Promise.resolve(l.call(r,u)).then(h=>c.call(r,h));const d=l.call(r,u);return c.call(r,d)}:(...u)=>{let d=l.apply(r,u);return!1===d&&(d=c.apply(r,u)),d}}s.hooks=r}if(i.walkTokens){const r=this.defaults.walkTokens,o=i.walkTokens;s.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),r&&(l=l.concat(r.call(this,a))),l}}this.defaults={...this.defaults,...s}}),this}#e(n,e,i){switch(e){case"heading":return function(s){return s.type&&s.type===e?n.call(this,i.parser.parseInline(s.tokens),s.depth,function kit(t){return t.replace(Iit,(n,e)=>"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):"")}(i.parser.parseInline(s.tokens,i.parser.textRenderer))):n.apply(this,arguments)};case"code":return function(s){return s.type&&s.type===e?n.call(this,s.text,s.lang,!!s.escaped):n.apply(this,arguments)};case"table":return function(s){if(!s.type||s.type!==e)return n.apply(this,arguments);let r="",o="";for(let l=0;l<s.header.length;l++)o+=this.tablecell({text:s.header[l].text,tokens:s.header[l].tokens,header:!0,align:s.align[l]});r+=this.tablerow({text:o});let a="";for(let l=0;l<s.rows.length;l++){const c=s.rows[l];o="";for(let u=0;u<c.length;u++)o+=this.tablecell({text:c[u].text,tokens:c[u].tokens,header:!1,align:s.align[u]});a+=this.tablerow({text:o})}return n.call(this,r,a)};case"blockquote":return function(s){if(!s.type||s.type!==e)return n.apply(this,arguments);const r=this.parser.parse(s.tokens);return n.call(this,r)};case"list":return function(s){if(!s.type||s.type!==e)return n.apply(this,arguments);const r=s.ordered,o=s.start,a=s.loose;let l="";for(let c=0;c<s.items.length;c++){const u=s.items[c],d=u.checked,h=u.task;let p="";if(u.task){const f=this.checkbox({checked:!!d});a?u.tokens.length>0&&"paragraph"===u.tokens[0].type?(u.tokens[0].text=f+" "+u.tokens[0].text,u.tokens[0].tokens&&u.tokens[0].tokens.length>0&&"text"===u.tokens[0].tokens[0].type&&(u.tokens[0].tokens[0].text=f+" "+u.tokens[0].tokens[0].text)):u.tokens.unshift({type:"text",text:f+" "}):p+=f+" "}p+=this.parser.parse(u.tokens,a),l+=this.listitem({type:"list_item",raw:p,text:p,task:h,checked:!!d,loose:a,tokens:u.tokens})}return n.call(this,l,r,o)};case"html":return function(s){return s.type&&s.type===e?n.call(this,s.text,s.block):n.apply(this,arguments)};case"paragraph":case"strong":case"em":case"del":return function(s){return s.type&&s.type===e?n.call(this,this.parser.parseInline(s.tokens)):n.apply(this,arguments)};case"escape":case"codespan":case"text":return function(s){return s.type&&s.type===e?n.call(this,s.text):n.apply(this,arguments)};case"link":return function(s){return s.type&&s.type===e?n.call(this,s.href,s.title,this.parser.parseInline(s.tokens)):n.apply(this,arguments)};case"image":return function(s){return s.type&&s.type===e?n.call(this,s.href,s.title,s.text):n.apply(this,arguments)}}return n}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,e){return sp.lex(n,e??this.defaults)}parser(n,e){return rp.parse(n,e??this.defaults)}#t(n,e){return(i,s)=>{const r={...s},o={...this.defaults,...r};!0===this.defaults.async&&!1===r.async&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const a=this.#n(!!o.silent,!!o.async);if(typeof i>"u"||null===i)return a(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof i)return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(i):i).then(l=>n(l,o)).then(l=>o.hooks?o.hooks.processAllTokens(l):l).then(l=>o.walkTokens?Promise.all(this.walkTokens(l,o.walkTokens)).then(()=>l):l).then(l=>e(l,o)).then(l=>o.hooks?o.hooks.postprocess(l):l).catch(a);try{o.hooks&&(i=o.hooks.preprocess(i));let l=n(i,o);o.hooks&&(l=o.hooks.processAllTokens(l)),o.walkTokens&&this.walkTokens(l,o.walkTokens);let c=e(l,o);return o.hooks&&(c=o.hooks.postprocess(c)),c}catch(l){return a(l)}}}#n(n,e){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",n){const s="<p>An error occurred:</p><pre>"+ru(i.message+"",!0)+"</pre>";return e?Promise.resolve(s):s}if(e)return Promise.reject(i);throw i}}};function Gs(t,n){return dv.parse(t,n)}Gs.options=Gs.setOptions=function(t){return dv.setOptions(t),_fe(Gs.defaults=dv.defaults),Gs},Gs.getDefaults=function v7(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},Gs.defaults=uv,Gs.use=function(...t){return dv.use(...t),_fe(Gs.defaults=dv.defaults),Gs},Gs.walkTokens=function(t,n){return dv.walkTokens(t,n)},Gs.parseInline=dv.parseInline,Gs.Parser=rp,Gs.parser=rp.parse,Gs.Renderer=gR,Gs.TextRenderer=T7,Gs.Lexer=sp,Gs.lexer=sp.lex,Gs.Tokenizer=pR,Gs.Hooks=bR,Gs.parse=Gs;const Mfe=Gs;function sst(t,n){1&t&&(q(0,"main",4),H(1,"safe")),2&t&&C("innerHTML",At(1,1,E().changelog,"html"),Nu)}function rst(t,n){1&t&&(m(0,"div",5)(1,"app-icon",6),S(2,"close"),_(),m(3,"div",7),S(4,"No changelog"),_()())}let Nfe=(()=>{class t{constructor(e){this._data=e}get changelog(){return Gs(this._data.changelog||"",{async:!1})}static#e=this.\u0275fac=function(i){return new(i||t)(I(or))};static#t=this.\u0275cmp=Se({type:t,selectors:[["changelog-modal"]],decls:9,vars:2,consts:[["empty_state",""],["mat-dialog-title",""],["icon","","mat-dialog-close",""],["class","p-4 markdown max-h-[65vh] max-w-[80vw] overflow-auto",3,"innerHTML",4,"ngIf","ngIfElse"],[1,"p-4","markdown","max-h-[65vh]","max-w-[80vw]","overflow-auto",3,"innerHTML"],[1,"flex","items-center","justify-center","flex-col","space-y-2"],[1,"text-3xl"],[1,"text"]],template:function(i,s){if(1&i&&(m(0,"header")(1,"h3",1),S(2,"Changelog"),_(),m(3,"button",2)(4,"app-icon"),S(5,"close"),_()()(),O(6,sst,2,4,"main",3)(7,rst,5,0,"ng-template",null,0,ln)),2&i){const r=xt(8);b(6),C("ngIf",s.changelog)("ngIfElse",r)}},dependencies:[mt,Ls,vV,St,uT]})}return t})(),iw=(()=>{class t{constructor(e){this._org=e}transform(e){return this._org.buildings.find(i=>e instanceof Array?e.includes(i.id):i.id===e)}static#e=this.\u0275fac=function(i){return new(i||t)(I(Sn,16))};static#t=this.\u0275pipe=nr({name:"building",type:t,pure:!0})}return t})();class lst{constructor(n,e){this.keySelector=n,this.flushes=e}call(n,e){return e.subscribe(new cst(n,this.keySelector,this.flushes))}}class cst extends Om{constructor(n,e,i){super(n),this.keySelector=e,this.values=new Set,i&&this.add(Rm(i,new Nm(this)))}notifyNext(){this.values.clear()}notifyError(n){this._error(n)}_next(n){this.keySelector?this._useKeySelector(n):this._finalizeNext(n,n)}_useKeySelector(n){let e;const{destination:i}=this;try{e=this.keySelector(n)}catch(s){return void i.error(s)}this._finalizeNext(e,n)}_finalizeNext(n,e){const{values:i}=this;i.has(n)||(i.add(n),this.destination.next(e))}}function op(){return(op=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t}).apply(this,arguments)}function Ofe(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}function sw(t,n){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=function(s){if(s){if("string"==typeof s)return Ofe(s,void 0);var o=Object.prototype.toString.call(s).slice(8,-1);return"Object"===o&&s.constructor&&(o=s.constructor.name),"Map"===o||"Set"===o?Array.from(s):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Ofe(s,void 0):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var PT={},d_={};function hv(t,n,e){if(void 0===e&&(e=300),!(t&&n&&n instanceof Function))throw new Error(t?"Cannot create named timeout without a name":"Cannot create a timeout without a callback");Rfe(t),PT[t]=setTimeout(function(){n(),delete PT[t]},e)}function Rfe(t){PT[t]&&(clearTimeout(PT[t]),delete PT[t])}function Ffe(t,n){Lfe(t),d_[t]=n}function Lfe(t){d_&&d_[t]&&(d_[t]instanceof rn?d_[t].unsubscribe():d_[t](),delete d_[t])}function sh(t,n,e,i,s,r){if(void 0===i&&(i="debug"),void 0===s&&(s=!1),void 0===r&&(r="SVG VIEWER"),window.debug||s){var o,a,l=["color: #E91E63","color: #ffb300","color: default"];e?(o=console)[i].apply(o,["%c["+r+"]%c["+t+"] %c"+n].concat(l,[e])):(a=console)[i].apply(a,["%c["+r+"]%c["+t+"] %c"+n].concat(l))}}function I7(t){for(var n,e=t.replace(/[!"#$%&'()*+,.\/;<=>?@[\\\]^`{|}~]/g,"\\$&").split(" "),i=sw(e);!(n=i()).done;){var s=n.value;e.splice(e.indexOf(s),1,[s.replace(/^\\/g,"")])}return e.join(" ")}function $T(t){return t?t instanceof MouseEvent?{x:t.clientX,y:t.clientY}:t.touches&&t.touches.length>0?{x:t.touches[0].clientX,y:t.touches[0].clientY}:{x:-1,y:-1}:{x:-1,y:-1}}function vR(t,n,e,i){var s,r;void 0===i&&(i=1);var o=null==(s=t.element)?void 0:s.querySelector(".svg-viewer__svg-overlays");if(null!=(r=t.element)&&r.querySelector("svg")&&o){var a=e||o?.getBoundingClientRect()||{};return{x:Math.max(0,Math.min(1,(n.x-a.left)/a.width*i)),y:Math.max(0,Math.min(1,(n.y-a.top)/a.height*i))}}return sh("DOM","Unable to find SVG element",void 0,"warn"),{x:-1,y:-1}}function Pfe(t,n){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function $fe(t,n,e){return{x:t.x+(n.x-t.x)*e,y:t.y+(n.y-t.y)*e}}function dst(t){if(!t)return"";var n=op({},t);for(var e in n)n[e]instanceof Object&&(n[e]=""+n[e]);return n}function yR(t){return t<26?t+65:t<52?t+71:t<62?t-4:62===t?43:63===t?47:65}var wR={top:0,left:0,bottom:0,right:0,height:0,width:0},CR=function(){function t(n){var e,i,s,r,o,a,l;if(this.id=n.id||"map-"+Math.floor(999999*Math.random()),this.url=n.url||"local-"+Do.hashAsciiStr(n.svg_data||""),this.element=n.element||null,this.labels=n.labels||[],this.features=n.features||[],this.actions=n.actions||[],this.styles=n.styles||{},this.svg_data=n.svg_data||"",this.content_ratio=n.content_ratio||{x:1,y:1},this.zoom=n.zoom||1,this.center={x:null!=(e=null==(i=n.center)?void 0:i.x)?e:.5,y:null!=(s=null==(r=n.center)?void 0:r.y)?s:.5},this.rotate=n.rotate||0,this.ratio=n.ratio||1,this.svg_ratio=n.svg_ratio||1,this.max_resolution=n.max_resolution||window.innerWidth*window.innerHeight*10,this.focus=n.focus||null,this.options=n.options||{},this.mappings=n.mappings||{},this.box={top:(n.box||wR).top,left:(n.box||wR).left,height:(n.box||wR).height,width:(n.box||wR).width},this.desired_zoom=n.desired_zoom||n.zoom||this.zoom,this.desired_center={x:(null==(o=n.desired_center)?void 0:o.x)||this.center.x,y:(null==(a=n.desired_center)?void 0:a.y)||this.center.y},this.updated_count=(n.updated_count||0)+1,this.zoom!==this.desired_zoom){var c=this.desired_zoom-this.zoom>=0?1:-1,u=Math.min(.05,Math.abs(this.desired_zoom-this.zoom)),d=Math.round(u/Math.abs(this.desired_zoom-this.zoom)*1e3)/1e3;this.zoom=.05===u?this.zoom+c*u:this.desired_zoom,this.center={x:this.center.x+(this.desired_center.x-this.center.x)*d,y:this.center.y+(this.desired_center.y-this.center.y)*d}}else if(this.desired_center.x!==this.center.x||this.desired_center.y!==this.center.y){var h=this.desired_center.x-this.center.x>=0?1:-1,p=this.desired_center.y-this.center.y>=0?1:-1,f=Math.min(.01,Math.abs(this.desired_center.x-this.center.x)),g=f/Math.abs(this.desired_center.x-this.center.x)*Math.abs(this.desired_center.y-this.center.y);this.center={x:this.center.x+h*f,y:this.center.y+p*g}}this.needs_update=this.desired_zoom!==this.zoom||this.desired_center.x!==this.center.x||this.desired_center.y!==this.center.y,this.use_gpu=null==(l=n?.use_gpu)||l}return t.prototype.contains=function(n){this.svg_data.includes('id="'+n+'"')},t}(),rw=new at([]),Bfe=new ot,hst=Bfe.pipe(Zt(function(t){return"resize"===t}));function Hu(t){return rw.getValue().find(function(n){return n.id===t})}function Tf(t,n){var e=BT();if(!((t=e.find(function(s){return s.id===(t instanceof CR?t.id:t)}))instanceof CR))return null;delete n.url;var i=new CR(op({},t,n));return zfe(i),i.needs_update&&hv(t.id+"_updating",function(){return Tf(i,{})},16),i}function Vfe(t){return rw.pipe(Zt(function(n){return!!n.find(function(e){return e.id===t})}),me(function(n){return n.find(function(e){return e.id===t})}),function ast(t,n){return e=>e.lift(new lst(t,n))}())}function zfe(t){var n=BT().filter(function(e){return e.id!==t.id});n.push(t),rw.next(n)}function BT(){return rw.getValue()}var VT,ow,SR,h_,aw,Wu,lw,Ufe=new at({}),Gfe={},zT=!1,xR=!1,pst=["click","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","mousewheel","wheel"],fst=["mousedown","mousemove","mousewheel","wheel","touchstart","touchmove"],jfe=!1;function Hfe(t,n,e){if(void 0===e&&(e=VT),!zT){xR=!0;var i=Hu(t);if(i){var s=$T(n),r={x:Math.max(0,Math.min(1,(s.x-e.x)/i.box.width/i.desired_zoom/i.svg_ratio+i.center.x)),y:Math.max(0,Math.min(1,(s.y-e.y)/i.box.height/i.desired_zoom/i.svg_ratio+i.center.y))};VT=s,Tf(i,{center:r,desired_center:r})}}}function UT(){sh("INPUT","Ending pinch/pan..."),Rfe("pan_start"),zT=!1,xR=!1,h_&&window.removeEventListener("mousemove",h_),aw&&window.removeEventListener("mouseup",aw),Wu&&window.removeEventListener("touchmove",Wu),lw&&window.removeEventListener("touchend",lw),h_=aw=Wu=lw=ow=null}window.addEventListener("blur",function(){return UT()});var Wfe=function(t){try{return Promise.resolve(new Promise(function(n){HT[t.id]||(HT[t.id]=[]),HT[t.id].push(n),hv("resize-"+t.id,function(){var e=t.element;if(!e)throw new Error("No element set on viewer");var i=e.querySelector(".svg-viewer__view-container"),s=e.querySelector(".svg-viewer__svg-overlays"),r=e.querySelector("#"+t.id),o=e.querySelector(".svg-viewer"),a=e.querySelector(".svg-viewer__svg-output"),l=e.querySelector("iframe"),c=o?.getBoundingClientRect()||{},u=i?.getBoundingClientRect()||{};if(!(s&&a&&l&&i))throw new Error("Viewer elements not ready yet.");requestAnimationFrame(function(){try{var d,h,p=c.height/c.width,f=(null==(d=a.firstElementChild)||null==(h=d.viewBox)?void 0:h.baseVal)||{},g=f.height/f.width;a.firstElementChild&&(a.firstElementChild.style.width="200%");var v=(c.width-32)*Math.min(1,p/g),y={width:v,height:v*g};s.style.width=f.width+"px",s.style.height=f.height+"px",i.style.width=f.width+"px",i.style.height=f.height+"px",l.style.width=f.width+"px",l.style.height=f.height+"px",l.width=""+f.width,l.height=""+f.height;var w=Math.min(c.height/f.height,c.width/f.width),x=r?.getBoundingClientRect(),T=s?.getBoundingClientRect(),k={x:1,y:1};x&&T&&(k={x:T.width*w*.975/x.width,y:T.height*w*.975/x.height}),jT[t.id]="";var R=Tf(t,{ratio:y.height/y.width,svg_ratio:w,box:u,content_ratio:k});return R?(t=R,Promise.resolve(Kfe(t).catch(function(N){return console.warn(N),!1})).then(function(N){N&&(HT[t.id].forEach(function(D){return D()}),HT[t.id]=[])})):Promise.resolve()}catch(N){return Promise.reject(N)}})},100)}))}catch(n){return Promise.reject(n)}},GT={},qfe={},k7={},D7={},A7={},jT={},HT={};function Kfe(t){return GT[t.id]||(GT[t.id]=new Promise(function(n){var e=requestAnimationFrame(function(){if(GT[t.id]){var i=t.element;if(!i)throw new Error("No element set on viewer");var s=i.querySelector("style"),r="",o=i.querySelector(".svg-viewer__render-container"),a="scale("+t.zoom*t.svg_ratio+")";if(!o||!s)throw new Error("Viewer is not setup yet.");var l=100*t.zoom*t.svg_ratio*(t.center.x-.5),c=100*t.zoom*t.svg_ratio*(t.center.y-.5);o.style.transform=(t.use_gpu?"translate3d("+l+"%, "+c+"%, 0)":"translate("+l+"%, "+c+"%)")+" "+a+" rotate("+t.rotate+"deg)",r+="#"+t.id+' .svg-viewer__svg-overlay-item > *:not([no-scale="true"]) { transform: rotate(-'+t.rotate+"deg) scale("+1/t.zoom*(1/t.svg_ratio)+"); }",s.innerHTML=r+="#"+t.id+" .svg-viewer__svg-overlay-item > * { transform: rotate(-"+t.rotate+"deg); height: 100%; width: 100%; }",function u(d){try{if((JSON.stringify(op({},d.styles))||"").localeCompare(jT[d.id])){var h=d.element;if(!h)throw new Error("No element set on viewer");var p=h.querySelector(".svg-viewer__iframe");if(!p)throw new Error("No iframe created for viewer");if(!p.contentWindow)return p.onload=function(){setTimeout(function(){return u(d)},50),setTimeout(function(){return u(d)},500)},Promise.resolve();var f={};f["[empty"+Math.floor(999999*Math.random())+"]"]={};var g=Xfe(op({},d.styles,f));p.contentWindow.postMessage(JSON.stringify({id:"svg-styles",content:g}),"*")}return Promise.resolve()}catch(v){return Promise.reject(v)}}(t),function(u){var d=JSON.stringify(u.focus);if(u.focus&&d!==Gfe[u.id]){var h,p=Math.max(.5,Math.min(10,u.focus.zoom_level||1));h="string"==typeof u.focus.location?function ust(t,n,e){var i,s,r=null==(i=t.element)?void 0:i.querySelector(".svg-viewer__svg-overlays"),o=null==(s=t.element)?void 0:s.querySelector("svg"),a=o?.querySelector("#"+I7(n));if(a&&o&&r){var l=e||r?.getBoundingClientRect()||{},c=a?.getBoundingClientRect()||{};return{x:(c.left+c.width/2-l.left)/l.width,y:(c.top+c.height/2-l.top)/l.height}}return sh("DOM","Unable to find element with ID "+n,void 0,"warn"),{x:-1,y:-1}}(u,u.focus.location):u.focus.location,Gfe[u.id]=d;var f={x:1-h.x,y:1-h.y};Tf(u,{center:f,desired_center:f,zoom:p,desired_zoom:p})}}(t),M7(t),delete GT[t.id],cancelAnimationFrame(e),n()}})})),GT[t.id]}function M7(t){var n,e,i=null==(n=t.element)?void 0:n.querySelector("svg");if(Object.keys(t.mappings||{}).length){var s=null==(e=t.element)?void 0:e.querySelector(".svg-viewer__svg-overlays");if(s&&i){if(!s.getBoundingClientRect().width)return hv(t.id+"|render-overlays",function(){return M7(t)},50);requestAnimationFrame(function(){(function(r){var o=r.labels.filter(function(R){return!R.zoom_level||R.zoom_level<=r.zoom}),a=JSON.stringify(o);if(a!==k7[r.id]){var l,c=null==(l=r.element)?void 0:l.querySelector(".svg-viewer__svg-overlays");if(!c)return;Array.from(c.querySelectorAll("[label]")).filter(function(R){return R.parentNode}).forEach(function(R){return c.removeChild(R)});for(var u,d=sw(o);!(u=d()).done;){var h,p,f,g=u.value,v={x:0,y:0},y="~Nothing~";"string"==typeof g.location?(v=r.mappings[g.location]||v,y="#"+g.location):(null!=(h=g.location)&&h.y||null!=(p=g.location)&&p.x)&&(y="loc-"+(v=g.location).x+"-"+v.y);var w=document.createElement("div");w.setAttribute("label","true"),w.classList.add("svg-viewer__svg-overlay-item"),w.classList.add("label"),w.style.top=100*v.y+"%",w.style.left=100*v.x+"%";var x,T=document.createElement("div"),k=document.createElement("label");k.classList.add("svg-viewer__label"),k.setAttribute("for",y),null!=(f=g.css_class)&&f.length&&(x=k.classList).add.apply(x,g.css_class),g.z_index&&(w.style.zIndex=""+g.z_index),k.textContent=g.content,T.appendChild(k),w.appendChild(T),c.appendChild(w)}sh("RENDER","Added "+r.labels.length+" labels to view."),k7[r.id]=a}})(t),function(r){var o=JSON.stringify(r.actions.map(function(g){return op({},g,{callback:""})}));if(o!==A7[r.id]){var a,l=null==(a=r.element)?void 0:a.querySelector(".svg-viewer__svg-overlays");if(!l)return;Array.from(l.querySelectorAll(".action-zone")).filter(function(g){return g.parentNode&&l.contains(g.parentNode)}).forEach(function(g){return l.removeChild(g)});for(var c,u=sw(r.actions);!(c=u()).done;){var d=c.value;if(d.action&&d.id&&"*"!==d.id&&!1!==d.zone){var h=document.createElement("button");h.id=""+d.id;var p=r.mappings[d.id]||{x:0,y:0},f=r.mappings[d.id]||{w:0,h:0};h.classList.add("svg-viewer__svg-overlay-item"),h.classList.add("action-zone"),h.style.top=100*p.y+"%",h.style.left=100*p.x+"%",(f.w||f.h)&&(h.style.width=100*f.w+"%",h.style.height=100*f.h+"%",h.style.transform="translate(-50%, -50%)"),l.appendChild(h)}}A7[r.id]=o}}(t),function(r){var o=JSON.stringify(r.features.map(function(x){return op({},x,{content:"",data:dst(x.data)})}));if(o!==D7[r.id]){var a,l=null==(a=r.element)?void 0:a.querySelector(".svg-viewer__svg-overlays");if(!l)return console.log("Unable to get overlay element.");var c=l.querySelectorAll(".feature"),u=[];window.overlay_el=l,c.forEach(function(x){if(x.parentNode){var T=x.getAttribute("track-id");"none"!==T&&r.features.find(function(k){return k.track_id===T})?u.push(x):l.removeChild(x)}});for(var d,h=sw(r.features);!(d=h()).done;){var p,f,g=d.value;if(g.content&&!u.includes(g.content)){var v={x:0,y:0},y={w:0,h:0},w=document.createElement("button");"string"==typeof g.location?(w.id=""+g.location,v=r.mappings[g.location]||v,(g.hover||g.full_size)&&(y=r.mappings[g.location]||y)):(null!=(p=g.location)&&p.y||null!=(f=g.location)&&f.x)&&(v=g.location),(v.x||v.y)&&(w.classList.add("svg-viewer__svg-overlay-item"),w.setAttribute("feature","true"),w.setAttribute("track-id",""+(g.track_id||"none")),w.classList.add("feature"),g.z_index&&(w.style.zIndex=""+g.z_index),g.hover&&w.classList.add("svg-viewer__svg-overlay-item__hover"),w.style.top=100*v.y+"%",w.style.left=100*v.x+"%",y.w||y.h?(w.style.width=100*y.w+"%",w.style.height=100*y.h+"%"):(w.style.width="1%",w.style.height=1/r.ratio+"%"),w.style.transform="translate(-50%, -50%)",g.content instanceof Node&&w.appendChild(g.content),l.appendChild(w))}}sh("RENDER","Added "+r.features.length+" features to view."),D7[r.id]=o}}(t)})}}}function Xfe(t){var n="";for(var e in t)if(t[e]){var i="";for(var s in t[e])t[e][s]&&(i+=s+": "+t[e][s]+"; ");n+="svg "+e.split(" ").map(function(r){return I7(r)}).join(" ")+" { "+i+" } "}return n}Ffe("on_resize",hst.subscribe(function(){for(var t,n=function(){var i=t.value;try{hv("resize-"+i.id,function(){return Wfe(i)})}catch(s){console.warn(s)}},e=sw(BT());!(t=e()).done;)n()}));var N7={},O7={};function R7(t,n){return Tf(t,n)}function F7(t){var n,e=Hu(t);if(e){var i,s,r,o=null==(n=e.element)?void 0:n.querySelector(".svg-viewer");o&&(e.element.removeChild(o),i=e,s=BT().filter(function(a){return a.id!==i.id}),rw.next(s),r=""+t,Object.keys(d_).filter(function(a){return a.includes(r)}).forEach(function(a){return Lfe(a)}))}}const bst=["outlet"],vst=["feature"];function yst(t,n){1&t&&q(0,"mat-spinner",7),2&t&&C("diameter",48)}function wst(t,n){if(1&t&&(Wt(0),O(1,yst,1,1,"mat-spinner",6),qt()),2&t){const e=E();b(),C("ngIf",!e.viewer||e.loading)}}function Cst(t,n){1&t&&Es(0)}function Sst(t,n){if(1&t&&(Wt(0),O(1,Cst,1,0,"ng-container",14),qt()),2&t){const e=E(2),i=e.$implicit,s=e.index,r=E(2);b(),C("ngComponentOutlet",i.content)("ngComponentOutletInjector",r.injectors[s])}}function xst(t,n){if(1&t&&(Wt(0),q(1,"div",15),H(2,"sanitize"),qt()),2&t){const e=E(2).$implicit;b(),C("innerHTML",ne(2,1,e.content),Nu)}}function Est(t,n){1&t&&Es(0)}function Tst(t,n){if(1&t&&(Wt(0),O(1,Est,1,0,"ng-container",16),qt()),2&t){const e=E(2).$implicit;b(),C("ngTemplateOutlet",e.content)("ngTemplateOutletContext",e.data)}}function Ist(t,n){if(1&t&&(m(0,"div")(1,"div",11,2),O(3,Sst,2,2,"ng-container",12)(4,xst,3,3,"ng-container",12)(5,Tst,2,2,"ng-container",13),_()()),2&t){const e=E().$implicit,i=E(2);b(),C("ngSwitch",i.type(e.content)),wt("no-scale",e.no_scale)("el-id",e.location)("track-id",e.track_id)("view-id",i.viewer),b(2),C("ngSwitchCase","component"),b(),C("ngSwitchCase","html")}}function kst(t,n){if(1&t&&(Wt(0),O(1,Ist,6,7,"div",10),qt()),2&t){const e=n.$implicit;b(),C("ngIf",e)}}function Dst(t,n){if(1&t&&(m(0,"div",8),O(1,kst,2,1,"ng-container",9),_()),2&t){const e=E();b(),C("ngForOf",e.features)("ngForTrackBy",e.trackByFn)}}function Ast(t,n){1&t&&(m(0,"div",17)(1,"div",18),S(2,"No map"),_()())}let Zfe=(()=>{class t extends hn{onResize(){this.zoom=1,this.center={x:.5,y:.5},this.updateDisplay()}type(e){return"string"==typeof e?"html":e instanceof hr?"template":"component"}constructor(e){super(),this._injector=e,this.zoom=1,this.center={x:.5,y:.5},this.reset=0,this.zoomChange=new Ae,this.centerChange=new Ae,this.mapInfo=new Ae,this.injectors=[],this.feature_list=[],this._on_changes=new at(null),this._extra_data={ratio$:this._on_changes.pipe(me(i=>i.ratio)),svg_ratio$:this._on_changes.pipe(me(i=>i.svg_ratio)),zoom$:this._on_changes.pipe(me(i=>i.zoom)),position:this._on_changes.pipe(me(i=>i.center))}}ngOnInit(){!function _st(){var t=document.getElementById("svg-viewer-global");t||((t=document.createElement("style")).id="svg-viewer-global",t.innerHTML="\n    .svg-viewer {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        overflow: hidden;\n    }\n    .svg-viewer__view-container {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n    }\n\n    .svg-viewer__render-container {\n        position: absolute;\n        top: 0%;\n        left: 0%;\n        right: 0%;\n        bottom: 0%;\n        transform-box: fill-box;\n    }\n\n    .svg-viewer__svg-output {\n        position: absolute;\n        top: -100%;\n        left: -100%;\n        right: -100%;\n        bottom: -100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transform: translateZ(0);\n        pointer-events: none;\n    }\n\n    .svg-viewer__svg-output svg {\n        opacity: 0;\n        height: auto;\n        max-width: 200%;\n        max-height: 200%;\n        width: 2000px;\n    }\n\n    .svg-viewer__svg-overlays {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        pointer-events: none;\n    }\n\n    .svg-viewer__label {\n        text-shadow: black 1px 1px;\n        color: white;\n        white-space: pre-line;\n        text-align: center;\n        min-width: 10em;\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        z-index: 1\n    }\n\n    .svg-viewer__svg-overlay-item {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 0.1%;\n        width: 0.1%;\n        position: absolute;\n        transform-origin: center;\n    }\n\n    .svg-viewer__svg-overlay-item > * {\n        will-change: transform;\n    }\n\n    .svg-viewer__svg-overlay-item__hover {\n        pointer-events: auto;\n    }\n\n    .svg-viewer__svg-overlay-item__hover > * {\n        display: none;\n    }\n\n    .svg-viewer__svg-overlay-item__hover:hover > * {\n        display: initial;\n    }\n\n    .svg-viewer__svg-overlay-item.action-zone {\n        pointer-events: auto;\n        background: none;\n        outline: none;\n        border: none;\n    }\n",document.head.appendChild(t),sh("Styles","Added global viewer styles to document"))}()}ngOnDestroy(){this.viewer&&F7(this.viewer)}ngOnChanges(e){e.src&&this.src&&this.createView().catch(i=>console.warn(i)),e.features&&this.updateInjectors(),this.viewer&&(e.focus&&this.focus?this.focusOn(this.focus):(e.zoom&&e.zoom.previousValue!=e.zoom.currentValue||e.center&&!function Mst(t,n){return t.x===n.x&&t.y===n.y}(e.center.previousValue,e.center.currentValue))&&this.updateDisplay(),(e.styles||e.features||e.labels||e.actions)&&this.timeout("update_view",()=>this.updateView())),e.reset&&e.reset.currentValue!==e.reset.previousValue&&(this.zoom=1,this.center={x:.5,y:.5},this.updateDisplay())}ngAfterViewInit(){this.createView().catch(e=>console.warn(e))}updateView(){try{if(!Hu(this.viewer)||this.loading)return this.timeout("update_view",()=>this.updateView());this.updateFeatureList(),R7(this.viewer,{styles:this.styles,features:this.feature_list,labels:this.labels,actions:this.actions,options:this.options})}catch{}}updateDisplay(){try{R7(this.viewer,{zoom:this.zoom,desired_zoom:this.zoom,center:this.center,desired_center:this.center,options:this.options})}catch{}}createView(){var e=this;return z(function*(){if(!mc())return e.timeout("create_view",()=>e.createView().catch(s=>console.warn(s)),300);const i=e.src?.toLowerCase()||"";if(i.includes("svg")||i.includes("upload"))if(e.src&&e._outlet_el?.nativeElement&&!e.loading){if(e.loading=!0,e.viewer)try{R7(e.viewer,{styles:e.styles,features:[],labels:e.labels,actions:e.actions,options:e.options}),F7(e.viewer)}catch(o){return void console.warn(o)}e.updateFeatureList();const s=Ho();if(document.cookie=`${"x-api-key"===s?"api-key="+encodeURIComponent(Jm()):"bearer_token="+encodeURIComponent(s)};max-age=30;path=/api/engine/v2/uploads;samesite=strict;${"https:"===location.protocol?"secure;":""}`,e.viewer=yield function(t){try{var n=function(s){return Ffe((e=new CR(op({},t,{svg_data:s}))).id+"-render",Vfe(e.id).subscribe(function(r){return Kfe(r).catch(function(o){return console.warn(o)})})),zfe(e),Promise.resolve(function(r){try{var o,a,l=r.element;if(!l)throw new Error("No element set on viewer");var c=document.createElement("div"),u=document.createElement("style"),d=document.createElement("div"),h=document.createElement("div"),p=document.createElement("div"),f=document.createElement("div"),g=document.createElement("iframe");h.appendChild(p),h.appendChild(f),c.appendChild(u),c.appendChild(d),d.appendChild(h),c.classList.add("svg-viewer"),c.id=r.id,u.id=r.id,g.id="svg-display",g.classList.add("svg-viewer__iframe"),d.classList.add("svg-viewer__view-container"),h.classList.add("svg-viewer__render-container"),f.classList.add("svg-viewer__svg-overlays"),p.classList.add("svg-viewer__svg-output"),p.id="svg-output",p.innerHTML=r.svg_data;var v=(null==(o=p.firstElementChild)||null==(a=o.viewBox)?void 0:a.baseVal)||{};d.style.width=v.width+"px",d.style.height=v.height+"px",f.style.width=v.width+"px",f.style.height=v.height+"px",f.appendChild(g),l.appendChild(c);var y=d?.getBoundingClientRect()||{},w=Tf(r,{box:y});return w?(r=w,Promise.resolve(function x(T){return new Promise(function(k){requestAnimationFrame(function(){var R,N=null==(R=T.element)?void 0:R.querySelector("svg");if(!N||!N.clientWidth)return hv(T.id+"-setup",function(){return x(T).then(function(F){return k()})},100);var D=qfe[T.url]||function(F){if(!F)return{};var $={},j=F?.getBoundingClientRect()||{},Q=F.querySelectorAll("[id]");return F.id="svg-viewer-root",$["svg-viewer-root"]={x:.5,y:.5,w:1,h:1},Q.forEach(function(Y){var ce=Y?.getBoundingClientRect()||{};$[Y.id]={x:Math.floor((ce.left+ce.width/2-j.left)/j.width*1e5)/1e5,y:Math.floor((ce.top+ce.height/2-j.top)/j.height*1e5)/1e5,w:Math.floor(ce.width/j.width*1e5)/1e5,h:Math.floor(ce.height/j.height*1e5)/1e5}}),$}(N);qfe[T.url]=D,Tf(T,{mappings:D}),N.style.display="none",function(F){try{var $=JSON.stringify(op({},F.styles))||"";if($.localeCompare(jT[F.id])){var j,Q,Y=F.element;if(!Y)throw new Error("No element set on viewer");var ce=Y.querySelector(".svg-viewer__iframe"),Ce=Y.querySelector(".svg-viewer__svg-output");if(!ce)throw new Error("No iframe created for viewer");var Z=(null==(j=Ce.firstElementChild)||null==(Q=j.viewBox)?void 0:Q.baseVal)||{},le=""+F.svg_data;le=/<svg[^>]*width="[^>]*>/.test(le)?le:le.replace("<svg",'<svg width="'+Z.width+'" height="'+Z.height+'" ');var te=function(be){for(var fe=2,Te="",et=be.length,We=0,Qe=0;Qe<et;Qe++)Qe>0&&4*Qe/3%76==0&&(Te+="\r\n"),We|=be[Qe]<<(16>>>(fe=Qe%3)&24),2!==fe&&be.length-Qe!=1||(Te+=String.fromCodePoint(yR(We>>>18&63),yR(We>>>12&63),yR(We>>>6&63),yR(63&We)),We=0);return Te.substr(0,Te.length-2+fe)+(2===fe?"":1===fe?"=":"==")}(function(be){for(var fe,Te,et=be.length,We=0,Qe=0;Qe<et;Qe++){var gt;(Te=null!=(gt=be.codePointAt(Qe))?gt:0)>65536&&Qe++,We+=Te<128?1:Te<2048?2:Te<65536?3:Te<2097152?4:Te<67108864?5:6}fe=new Uint8Array(We);for(var ct=0,Dt=0;ct<We;Dt++){var sn;(Te=null!=(sn=be.codePointAt(Dt))?sn:0)<128?fe[ct++]=Te:Te<2048?(fe[ct++]=192+(Te>>>6),fe[ct++]=128+(63&Te)):Te<65536?(fe[ct++]=224+(Te>>>12),fe[ct++]=128+(Te>>>6&63),fe[ct++]=128+(63&Te)):Te<2097152?(fe[ct++]=240+(Te>>>18),fe[ct++]=128+(Te>>>12&63),fe[ct++]=128+(Te>>>6&63),fe[ct++]=128+(63&Te),Dt++):Te<67108864?(fe[ct++]=248+(Te>>>24),fe[ct++]=128+(Te>>>18&63),fe[ct++]=128+(Te>>>12&63),fe[ct++]=128+(Te>>>6&63),fe[ct++]=128+(63&Te),Dt++):(fe[ct++]=252+(Te>>>30),fe[ct++]=128+(Te>>>24&63),fe[ct++]=128+(Te>>>18&63),fe[ct++]=128+(Te>>>12&63),fe[ct++]=128+(Te>>>6&63),fe[ct++]=128+(63&Te),Dt++)}return fe}('<html><head><style>*{overflow:hidden;}html,body{padding:0;margin:0;}</style><style id="style">'+Xfe(op({},F.styles,{}))+"</style>\n<script>\n    function updateStyles(evt) {\n        try {\n            var message = JSON.parse(evt.data);\n            if (message.id === 'svg-styles') {\n                const style_el = document.getElementById('style');\n                style_el.innerHTML = message.content;\n            }\n        } catch(e) {}\n    }\n\n    if (window.addEventListener) {\n        window.addEventListener(\"message\", updateStyles, false);\n    } else {\n        window.attachEvent(\"onmessage\", updateStyles);\n    }\n<\/script></head><body>"+le+"</body></html>"));ce.src="data:text/html;base64,"+te,jT[F.id]=$}Promise.resolve()}catch(be){return Promise.reject(be)}}(T),M7(T),k()})})}(r)).then(function(){(function(x,T){void 0===T&&(T=pst);var k=Ufe.getValue(),R=x.element;k[x.id]&&k[x.id].unsubscribe();for(var N,D=[],F=function(){var j=N.value;D.push(_f(R,j).pipe(me(function(Q){return{id:x.id,type:j,event:Q}})))},$=sw(T);!(N=$()).done;)F();k[x.id]=sr.apply(void 0,D).subscribe(function(j){var Q,le,te,Y=j.id,ce=j.type,Ce=j.event;switch(fst.includes(ce)&&Ce.preventDefault(),function(Z){var le,te=Z.type,be=Z.event,fe=Hu(Z.id);if(fe&&null!=(le=fe.actions)&&le.length){var Te=fe.actions.sort(function(et,We){return(We.priority||0)-(et.priority||0)}).find(function(et){var We;return et.action.includes(te)&&("*"===et.id||et.id===(null==(We=be.target)?void 0:We.id))});Te&&Te.callback(be,vR(fe,$T(be)))}}(j),ce){case"touchstart":case"mousedown":(null==(Q=Ce.touches)?void 0:Q.length)>=2?function(Z,le){sh("INPUT","Starting pinching..."),Wu&&window.removeEventListener("touchmove",Wu);var te=Hu(Z);if(zT=!0,te&&!te.options.disable_zoom){var be=[{x:le.touches[0].clientX,y:le.touches[0].clientY},{x:le.touches[1].clientX,y:le.touches[1].clientY}],fe=be.map(function(et){return vR(te,et)}),Te={x:(fe[0].x+fe[1].x)/2,y:(fe[0].y+fe[1].y)/2};ow={x:1-Te.x,y:1-Te.y},SR=Pfe(be[0],be[1]),le instanceof MouseEvent||(Wu=function(et){return et.touches.length>=2?function(We,Qe,gt){void 0===gt&&(gt=SR);var ct=Hu(We);if(ct&&!ct.options.disable_zoom){var Dt=[{x:Qe.touches[0].clientX,y:Qe.touches[0].clientY},{x:Qe.touches[1].clientX,y:Qe.touches[1].clientY}],sn=Pfe(Dt[0],Dt[1]),jt=Math.max(.5,Math.min(10,ct.zoom*sn/gt)),Fn=jt!=ct.zoom?$fe(ct.center,ow,1-ct.zoom/jt):ct.center;SR=sn,Tf(ct,{zoom:jt,center:Fn,desired_zoom:jt,desired_center:Fn})}}(Z,et,SR):""},window.addEventListener("touchmove",Wu))}}(Y,Ce):function(Z,le){if(!zT){sh("INPUT","Starting panning...");var te=Hu(Z);h_&&window.removeEventListener("mousemove",h_),h_&&window.removeEventListener("mouseup",aw),Wu&&window.removeEventListener("touchmove",Wu),Wu&&window.removeEventListener("touchend",lw),te&&!te.options.disable_pan&&(VT=$T(le),le instanceof MouseEvent?(h_=function(be){return Hfe(Z,be,VT)},aw=function(){return UT()},window.addEventListener("mousemove",h_),window.addEventListener("mouseup",aw)):(Wu=function(be){return Hfe(Z,be,VT)},lw=function(){return UT()},window.addEventListener("touchmove",Wu),window.addEventListener("touchend",lw)),hv("pan_start",function(){return xR=!0},200))}}(Y,Ce);break;case"touchend":case"mouseup":xR||zT||(le=Ce,(te=Hu(Y))&&sh("INPUT","Clicked:",vR(te,$T(le)))),UT();break;case"mousewheel":case"wheel":!function(Z,le){var te=Hu(Z);if(te){var be=Math.min(10,Math.max(.5,te.zoom*(1+(le.deltaY>=0?-.02:.02)))),fe=vR(te,$T(le));ow={x:1-fe.x,y:1-fe.y},hv("clear_action_start",function(){return ow=null});var Te=be!=te.zoom?$fe(te.center,ow,1-te.zoom/be):te.center;Tf(te,{zoom:be,center:Te,desired_zoom:be,desired_center:Te})}}(Y,Ce)}}),Ufe.next(k)})(r),jfe||(window.addEventListener("resize",function(){Bfe.next("resize")}),window.addEventListener("blur",function(){return UT()}),jfe=!0),Wfe(r)})):Promise.resolve()}catch(x){return Promise.reject(x)}}(e)).then(function(){return e.id})},e=BT().find(function(s){return s.url===t.url});if(e)return Promise.resolve(e.id);var i=t.svg_data;return Promise.resolve(i?n(i):Promise.resolve(function(s){void 0===s&&(s="");try{var r=new Headers;if(s.startsWith(location.origin)||s.startsWith("/"))for(var o in O7)r.append(o,O7[o]);return N7[s]?Promise.resolve(N7[s]):Promise.resolve(fetch(s,{headers:r}).catch(function(a){return sh("SVG VIEWER","Failed to load map",a,"error"),{text:function(){return Promise.resolve("")}}})).then(function(a){return Promise.resolve(a.text()).then(function(l){return N7[s]=l,l})})}catch(a){return Promise.reject(a)}}(t.url)).then(n))}catch(s){return Promise.reject(s)}}({element:e._outlet_el?.nativeElement,url:e.src,styles:e.styles,zoom:e.zoom,desired_zoom:e.zoom,center:e.center,features:e.feature_list,labels:e.labels,actions:e.actions,options:e.options}).catch(o=>(console.warn(o),"")),e.loading=!1,!e.viewer)return;e.loading=!1,e.subscription("view_changes",Vfe(e.viewer)?.subscribe(o=>{e._outlet_el.nativeElement.getBoundingClientRect(),e._on_changes.next({...o}),e.zoomChange.emit(o.zoom),e.centerChange.emit(o.center)}));const r=Hu(e.viewer);e.mapInfo.emit(r.mappings),e.focus&&e.focusOn(e.focus)}else(e.src&&!e._outlet_el?.nativeElement||e.loading)&&e.timeout("create_view",()=>e.createView().catch(s=>console.warn(s)))})()}focusOn(e){if(!e||!this.viewer)return;const i=Hu(this.viewer);if(!i)return;const s=i.mappings[e];s&&(this.center={x:1-(s.x+s.w/2),y:1-(s.y+s.h/4)},this.updateDisplay())}trackByFn(e,i){return i?.track_id}updateFeatureList(){this.feature_list=(this.features||[]).map((e,i)=>({...e,content:this._feature_list.toArray()[i]?.nativeElement})).filter(e=>e.content)}updateInjectors(){const e=this.injectors||[];this.injectors=(this.features||[]).map(i=>e.find(s=>s.get(Za)?.track_id&&s.get(Za)?.track_id===i.track_id)||ci.create({providers:[{provide:Za,useValue:{track_id:i.track_id,...i.data,...this._extra_data}}],parent:this._injector}))}static#e=this.\u0275fac=function(i){return new(i||t)(I(ci))};static#t=this.\u0275cmp=Se({type:t,selectors:[["map-renderer"]],viewQuery:function(i,s){if(1&i&&(Gt(bst,5),Gt(vst,5)),2&i){let r;nt(r=it())&&(s._outlet_el=r.first),nt(r=it())&&(s._feature_list=r)}},hostBindings:function(i,s){1&i&&P("resize",function(){return s.onResize()},0,Gc)},inputs:{src:"src",styles:"styles",zoom:"zoom",center:"center",features:"features",labels:"labels",actions:"actions",reset:"reset",options:"options",focus:"focus"},outputs:{zoomChange:"zoomChange",centerChange:"centerChange",mapInfo:"mapInfo"},features:[Ze,Rn],decls:6,vars:5,consts:[["outlet",""],["empty_state",""],["feature",""],["tabindex","0","role","map",1,"absolute","inset-0"],[4,"ngIf","ngIfElse"],["hidden","",4,"ngIf"],["class","absolute",3,"diameter",4,"ngIf"],[1,"absolute",3,"diameter"],["hidden",""],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"pointer-events-none",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngComponentOutlet","ngComponentOutletInjector"],[3,"innerHTML"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"absolute","inset-0","flex","items-center","justify-center"],[1,"opacity-30"]],template:function(i,s){if(1&i&&(q(0,"div",3,0),O(2,wst,2,1,"ng-container",4)(3,Dst,2,2,"div",5)(4,Ast,3,0,"ng-template",null,1,ln)),2&i){const r=xt(5);Oe("hidden",!s.src),b(2),C("ngIf",s.src)("ngIfElse",r),b(),C("ngIf",null==s.injectors?null:s.injectors.length)}},dependencies:[G5,on,mt,cb,Dm,V1,z1,Zs,ih],styles:["[_nghost-%COMP%]{height:100%;width:100%}mat-spinner[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}"]})}return t})();const Nst=["map_container"];function Ost(t,n){1&t&&q(0,"mat-spinner",6)}function Rst(t,n){if(1&t){const e=se();m(0,"button",3),P("click",function(){return B(e),V(E().toggleDirections())}),m(1,"app-icon"),S(2,"place"),_(),m(3,"div",4),S(4),_(),O(5,Ost,1,0,"mat-spinner",5),_()}if(2&t){const e=E();b(4),K(" ",e.viewing_directions?"Hide":"Show"," Directions "),b(),C("ngIf",e.loading_directions)}}const cw=18.5,ER={};let Qfe=(()=>{class t extends hn{constructor(e,i){super(),this._maps_people=e,this._org=i,this.zoom=cw,this.zoomChange=new Ae,this.zoneChange=new Ae,this.show_directions=!1,this.viewing_directions=!1,this.loading_directions=!1,this.ignore_zoom=!1,this._floor_list=[],this._added_floor_selector=!1;const s=sessionStorage.getItem("PLACEOS.mapsindoors.resources")||"{}",r=JSON.parse(s);for(const o in r)r.hasOwnProperty(o)&&(ER[o]=r[o])}ngOnInit(){this.id=iv(8),this._initialised.next(!1),this._initialiseServices()}ngOnChanges(e){if(!this.is_initialised)return this.timeout("on_changes",()=>this.ngOnChanges(e));e.zone&&this.zone&&this._centerOnZone(),e.focus&&this.focus&&this._focusOnLocation(),e.metadata&&this._updateMapStyling(),e.zoom&&this.zoom&&!this.ignore_zoom&&this._services?.map?.setZoom(this.zoom),e.reset&&(this._services?.map?.setZoom(cw),this._centerOnZone()),e.options&&this._addFloorSelector()}_setResource(e,i){ER[e]=i,this.timeout("set_resource",()=>{sessionStorage.setItem("PLACEOS.mapsindoors.resources",JSON.stringify(ER))})}_initialiseServices(){if(!this._maps_people.is_ready||!window.mapsindoors)return void this.timeout("init",()=>this._initialiseServices(),1e3);const[e,i]=(this._org.building?.location||"-33.8567844,151.2152967").split(","),s={element:this._container.nativeElement,center:{lat:parseFloat(e),lng:parseFloat(i)},zoom:cw,maxZoom:24};let r=null;switch(this._maps_people.map_service){case np.GoogleMaps:ji("MapsIndoors","Using Google Maps API"),r=new mapsindoors.mapView.GoogleMapsView(s);break;case np.Mapbox:s.accessToken=this._maps_people.map_token,ji("MapsIndoors","Using Mapbox API"),r=new mapsindoors.mapView.MapboxView(s)}if(!r)return void function ahe(t,n,e,i={}){!W0&&console.debug(t),YO("warn",t,n,e,i)}("Failed to initialise map view.");const o=this._maps_people.map_service===np.GoogleMaps?new mapsindoors.directions.GoogleMapsProvider:new mapsindoors.directions.MapboxProvider(this._maps_people.map_token),a=new mapsindoors.MapsIndoors({mapView:r});this._services={mapsindoors:a,view:r,map:r.getMap(),directions:new mapsindoors.services.DirectionsService(o),directions_renderer:new mapsindoors.directions.DirectionsRenderer({mapsIndoors:a})},this._initialised.next(!0),this.zone&&(this._services.map.setZoom(cw),this._centerOnZone()),this._addFloorSelector(),this._services.mapsindoors.addListener("building_changed",l=>this._handleBuildingChange(l)),this._services.mapsindoors.addListener("floor_changed",l=>this._handleLevelChange(l)),this._services.mapsindoors.addListener("zoom_changed",l=>this._handleZoomChange(l)),this._services.mapsindoors.addListener("click",l=>this._handleUserClick(l)),this.timeout("resize",()=>window.dispatchEvent(new Event("resize")),100),window.maps_indoors=this._services,this.timeout("focus",()=>this._focusOnLocation()),this.timeout("init_zoom",()=>this._handleZoomChange(cw))}clearDirections(){this._services.directions_renderer.setRoute(null),this.viewing_directions=!1}toggleDirections(){var e=this;return z(function*(){if(e.viewing_directions)return e.clearDirections(),void e._focusOnLocation();if(!e.focus)return;const i=yield e._search(e.focus);if(!i?.length)return void Ti(`Unable to find location "${e.focus}".`);e.loading_directions=!0;const s=i[0],r=e._org.buildings.find(c=>c.id===e.zone.parent_id),[o,a]=s.properties?.anchor?.coordinates||r?.location.split(",")||[37.8136,144.9631];navigator.geolocation.getCurrentPosition(function(){var c=z(function*(u){e._last_position=u,e.setDirectionsFromLocation({lat:u.coords.latitude,lng:u.coords.longitude},{lat:a,lng:o})});return function(u){return c.apply(this,arguments)}}(),()=>{e._last_position?e.setDirectionsFromLocation({lat:e._last_position.coords.latitude,lng:e._last_position.coords.longitude},{lat:a,lng:o}):Ti("Failed to get your current location.")},{timeout:1e4,enableHighAccuracy:!0})})()}setDirectionsFromLocation(e,i){var s=this;return z(function*(){const r=function XYe(t,n,e,i){const r=HO(e-t),o=HO(i-n);t=HO(t),e=HO(e);const a=Math.sin(r/2)*Math.sin(r/2)+Math.sin(o/2)*Math.sin(o/2)*Math.cos(t)*Math.cos(e);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*6371}(i.lat,i.lng,e.lat,e.lng),o={origin:{lat:e.lat,lng:e.lng},destination:{lat:i.lat,lng:i.lng},travelMode:r<2?"WALKING":"DRIVING"},a=yield s._services.directions.getRoute(o).catch(l=>{ji("MapsIndoors","Error fetching route: ",l.message||l,"warn");const c=l instanceof TypeError&&l.message?.includes("origin");s.loading_directions=!1,c&&Ti("Error: Origin location is outside of map area.")});a&&(s._services.directions_renderer.setRoute(a),s.viewing_directions=!0,s.loading_directions=!1)})()}_handleZoomChange(e){this.timeout("zoom_change",()=>{this.ignore_zoom=!0,this.zoom=e,this.zoomChange.emit(e),this.timeout("reset_ignore_zoom",()=>this.ignore_zoom=!1,50)},100)}_handleBuildingChange(e){const i=e.externalId||e.id;ji("MapsIndoors",`Building switched to "${i}"`);const s=e.floors||{};if(this._floor_list=Object.keys(s).map(o=>({index:o,...s[o]})),ji("MapsIndoors","Floor List:",this._floor_list),!this._services)return;const r=this._org.buildings.find(o=>o.id===i||o.map_id===i);this.timeout("set_floor",()=>{!this._setFloorFromZone()&&e.defaultFloor&&this._handleLevelChange(e.defaultFloor)}),r&&(this._org.building=r,this._last_building=r.id)}_handleLevelChange(e){var i=this;return z(function*(){ji("MapsIndoors",`Level switched to "${e}"`);const s=i._floor_list.find(l=>l.index===e),r=s?.externalId||s?.id;if(!i._services)return;const o=yield i._org.active_levels.pipe(Zn(1)).toPromise();if(!o)return;const a=o.find(l=>l.map_id===r||l.id===r);a&&(i.zone=a,i.zoneChange.emit(a))})()}_handleUserClick(e){ji("MapsIndoors","Click occurred",e);const i=e.properties?.externalId||e.properties?.roomId||e.id,s=this.metadata?.actions||[];ji("MapsIndoors","Registered Actions",s);const r=["mousedown","touchstart","enter","leave"];for(const o of s)if((o.id===i||"*"===o.id)&&!r.includes(o.action)){o.callback(e);break}}_search(e){var i=this;return z(function*(){if(i._services)return mapsindoors?.services.LocationsService.getLocations({q:e})})()}_updateMapStyling(){var e=this;return z(function*(){if(!e._services)return;const i=e.metadata?.styles||{};for(const s in i){if(!i[s].fill)continue;let r=ER[s];if(!r){const a=s.replace(/#/,""),l=yield e._search(a);if(!l.length)continue;r=l.find(c=>c.properties?.externalId===a||c.properties?.roomId===a||c.id===a),r&&e._setResource(s,r)}r&&e._services.mapsindoors.setDisplayRule(r.id,{extrusionHeight:0,extrusionVisible:!1,polygonVisible:!0,polygonFillColor:i[s].fill})}})()}_focusOnLocation(){var e=this;return z(function*(){if(!e.focus)return;const i=yield e._search(e.focus);if(e.clearDirections(),!i?.length)return void Ti(`Unable to find location ${e.focus}.`);const s=i.find(l=>l.properties?.externalId===e.focus)||i[0],r=e._org.buildings.find(l=>l.id===e.zone.parent_id),[o,a]=s.properties?.anchor?.coordinates||r?.location.split(",")||[37.8136,144.9631];e._services.map.setZoom(cw),e._services.map.setCenter({lat:a,lng:o}),e._services.mapsindoors.setFloor(s.properties?.floor),e._services.mapsindoors.highlight([s.id])})()}_centerOnZone(){!this._services||!this.zone||this.zone.parent_id===this._last_building||this.zone.id===this._last_building||this.timeout("set_center",()=>{const e=this._org.buildings.find(r=>r.id===this.zone.parent_id);if(!e)return;const[i,s]=e?.location.split(",");this.focus||this._services.map.setCenter({lat:parseFloat(i),lng:parseFloat(s)}),this._setFloorFromZone(),this._last_building=this.zone.id})}_setFloorFromZone(){if(!this.zone.map_id||!this._services)return!1;const e=this.zone.map_id,i=this._floor_list.find(s=>s.index===e||s.externalId===e||s.id===e);return!!i&&(this._services.mapsindoors.setFloor(i.index),!0)}_addFloorSelector(){if(!this.options?.controls||this._added_floor_selector)return;const e=document.createElement("div");new mapsindoors.FloorSelector(e,this._services.mapsindoors),this._maps_people.map_service===np.GoogleMaps?this._services.map.controls[google.maps.ControlPosition.RIGHT_TOP].push(e):this._services.map.addControl({onAdd:()=>e,onRemove:()=>{}}),this._added_floor_selector=!0}static#e=this.\u0275fac=function(i){return new(i||t)(I(a_),I(Sn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["maps-indoors"]],viewQuery:function(i,s){if(1&i&&Gt(Nst,7),2&i){let r;nt(r=it())&&(s._container=r.first)}},inputs:{zone:"zone",metadata:"metadata",options:"options",focus:"focus",zoom:"zoom",reset:"reset"},outputs:{zoomChange:"zoomChange",zoneChange:"zoneChange"},features:[Ze,Rn],decls:3,vars:1,consts:[["map_container",""],[1,"absolute","inset-0","z-0"],["btn","","matRipple","","class","absolute bottom-2 left-2 bg-base-100 text-base-content shadow z-10 border-base-200 space-x-2",3,"click",4,"ngIf"],["btn","","matRipple","",1,"absolute","bottom-2","left-2","bg-base-100","text-base-content","shadow","z-10","border-base-200","space-x-2",3,"click"],[1,"pr-2"],["diameter","24",4,"ngIf"],["diameter","24"]],template:function(i,s){1&i&&(q(0,"div",1,0),O(2,Rst,6,2,"button",2)),2&i&&(b(2),C("ngIf",s.focus&&!s.show_directions&&(null==s.options?null:s.options.controls)))},dependencies:[mt,Tt,Zs,St]})}return t})();const IR={};function Gl(t){const n=Tn(t);return n.setSeconds(0,0),n}function Ir(t,n){const e=Tn(t);return isNaN(n)?Is(t,NaN):(n&&e.setDate(e.getDate()+n),e)}function L7(t,n){const e=Tn(t),i=e.getFullYear(),s=e.getDate(),r=Is(t,0);r.setFullYear(i,n,15),r.setHours(0,0,0,0);const o=function nrt(t){const n=Tn(t),e=n.getFullYear(),i=n.getMonth(),s=Is(t,0);return s.setFullYear(e,i+1,0),s.setHours(0,0,0,0),s.getDate()}(r);return e.setMonth(n,Math.min(s,o)),e}function qu(t,n){let e=Tn(t);return isNaN(+e)?Is(t,NaN):(null!=n.year&&e.setFullYear(n.year),null!=n.month&&(e=L7(e,n.month)),null!=n.date&&e.setDate(n.date),null!=n.hours&&e.setHours(n.hours),null!=n.minutes&&e.setMinutes(n.minutes),null!=n.seconds&&e.setSeconds(n.seconds),null!=n.milliseconds&&e.setMilliseconds(n.milliseconds),e)}function irt(t,n){1&t&&(m(0,"button",7)(1,"app-icon"),S(2,"close"),_()())}function srt(t,n){if(1&t){const e=se();m(0,"mat-checkbox",12),ii("ngModelChange",function(s){const r=B(e).$implicit,o=E(2);return jn(o.weekdays_enabled[r.getDay()],s)||(o.weekdays_enabled[r.getDay()]=s),V(s)}),P("ngModelChange",function(s){const r=B(e).$implicit,o=E(2);return V(s&&o.initialiseDay(r.getDay()))}),S(1),H(2,"date"),_()}if(2&t){const e=n.$implicit;ni("ngModel",E(2).weekdays_enabled[e.getDay()]),b(),K(" ",At(2,2,e,"EEE")," ")}}function rrt(t,n){if(1&t&&(m(0,"mat-option",25),S(1),_()),2&t){const e=n.$implicit;C("value",e.id),b(),K(" ",e.name," ")}}function ort(t,n){if(1&t){const e=se();m(0,"div",19)(1,"a-time-field",20),P("ngModelChange",function(s){const r=B(e).$implicit,o=E(2).$implicit;return V(E(3).setStartTime(r,o.getDay(),s))}),_(),m(2,"a-time-field",20),P("ngModelChange",function(s){const r=B(e).$implicit,o=E(2).$implicit;return V(E(3).setEndTime(r,o.getDay(),s))}),_(),m(3,"mat-form-field",21)(4,"mat-select",12),ii("ngModelChange",function(s){const r=B(e).$implicit;return jn(r.location,s)||(r.location=s),V(s)}),O(5,rrt,2,2,"mat-option",22),_()(),m(6,"button",23),P("click",function(){const s=B(e).index,r=E(2).$implicit,o=E(3);return V(o.addBlock(o.settings[r.getDay()],s))}),m(7,"app-icon"),S(8,"add"),_()(),m(9,"button",24),P("click",function(){const s=B(e).index,r=E(2).$implicit,o=E(3);return V(o.removeBlock(o.settings[r.getDay()],s))}),m(10,"app-icon"),S(11,"delete"),_()()()}if(2&t){let e;const i=n.$implicit,s=n.index,r=E(2).$implicit,o=E(3);b(),C("ngModel",o.timeFrom(i.start_time))("from",o.timeFrom((s>0?null==(e=o.settings[r.getDay()].blocks[s-1])?null:e.end_time:0)||0)),b(),C("ngModel",o.timeFrom(i.end_time))("from",o.timeFrom(i.start_time+.25)),b(2),ni("ngModel",i.location),b(),C("ngForOf",o.options),b(),C("disabled",o.settings[r.getDay()].blocks.length>2),b(3),Oe("opacity-0",0===s)("pointer-events-none",0===s)}}function art(t,n){if(1&t&&(Wt(0),m(1,"div",15)(2,"label",16),S(3),H(4,"date"),_(),m(5,"div",17),O(6,ort,12,11,"div",18),_()(),qt()),2&t){const e=E().$implicit,i=E(3);b(3),K(" ",At(4,2,e,"EEE")," "),b(3),C("ngForOf",i.settings[e.getDay()].blocks)}}function lrt(t,n){if(1&t&&(Wt(0),O(1,art,7,5,"ng-container",14),qt()),2&t){const e=n.$implicit,i=E(3);b(),C("ngIf",i.weekdays_enabled[e.getDay()])}}function crt(t,n){if(1&t&&(Wt(0),O(1,lrt,2,1,"ng-container",13),qt()),2&t){const e=E(2);b(),C("ngForOf",e.days)}}function urt(t,n){1&t&&(m(0,"div",26),q(1,"img",27),m(2,"p",28),S(3," No work days are currently set for this user "),_()())}function drt(t,n){if(1&t&&(m(0,"main",8)(1,"h3"),S(2,"Working Days"),_(),m(3,"div",9),O(4,srt,3,5,"mat-checkbox",10),_(),m(5,"h3"),S(6,"Work Hours"),_(),O(7,crt,2,1,"ng-container",11)(8,urt,4,0,"ng-template",null,1,ln),_()),2&t){const e=xt(9),i=E();b(4),C("ngForOf",i.days),b(3),C("ngIf",i.has_working_days)("ngIfElse",e)}}function hrt(t,n){if(1&t){const e=se();m(0,"footer",29)(1,"button",30),P("click",function(){return B(e),V(E().saveChanges())}),S(2," Save "),_()()}}function prt(t,n){1&t&&(m(0,"div",31),q(1,"mat-spinner",32),m(2,"p",28),S(3," Saving changes to work location settings... "),_()()),2&t&&(b(),C("diameter",32))}let kR=(()=>{class t{get has_working_days(){return Object.keys(this.weekdays_enabled).some(e=>this.weekdays_enabled[e])}get option_name(){return this.options.find(e=>e.id===this.option)?.name||""}get now(){return Gl(Date.now()).getTime()}constructor(e){this._dialog_ref=e,this.options=[{id:"wfo",name:"Office"},{id:"wfh",name:"Home"},{id:"aol",name:"Leave"}],this.option=this.options[0].id,this.settings=[],this.weekdays_enabled={},this.changed=!1,this.loading=!1,this.available_weekdays=[],this.days=new Array(7).fill(0).map((i,s)=>Ir(zu(Ir(Date.now(),30)),s))}ngOnInit(){const e=Qt();this.settings=[...(e.work_preferences||[]).map(i=>({...i,blocks:[...i?.blocks||[]]}))];for(const i of this.settings)i.blocks.length&&(this.weekdays_enabled[i.day_of_week]=!0)}timeFrom(e){return Gl(qu(Ir(new Date,1),{hours:Math.floor(e),minutes:60*e%60})).getTime()}fromTime(e){const i=new Date(e);return i.getHours()+i.getMinutes()/60}initialiseDay(e){this.settings[e]||(this.settings[e]={day_of_week:e,blocks:[]}),this.settings[e].blocks||(this.settings[e].blocks=[]),0===this.settings[e].blocks.length&&this.addBlock(this.settings[e],0)}addBlock(e,i){e.blocks.splice(i+1,0,{start_time:9,end_time:17,location:"wfo"}),this.cleanupBlocks(e)}removeBlock(e,i){e.blocks.length<=1||e.blocks.splice(i,1)}setEndTime(e,i,s){setTimeout(()=>{e.end_time=this.fromTime(s),this.cleanupBlocks(this.settings[i])},50)}setStartTime(e,i,s){setTimeout(()=>{e.start_time=this.fromTime(s),this.cleanupBlocks(this.settings[i])},50)}cleanupBlocks(e){if(e?.blocks?.length)for(let i=0;i<e.blocks.length;i++){const s=e.blocks[i];i>0&&s.start_time<e.blocks[i-1].end_time&&(s.start_time=e.blocks[i-1].end_time),s.end_time<=s.start_time&&(s.end_time=s.start_time+1)}}saveChanges(e=!0){var i=this;return z(function*(){i.loading=!0,i._dialog_ref.disableClose=!0;const s=yield PO("current").toPromise(),r=new Array(7).fill(0).map((o,a)=>({day_of_week:a,blocks:[]}));for(const o of i.days){const a=o.getDay();i.weekdays_enabled[a]&&(r[a]={day_of_week:a,blocks:i.settings[a].blocks})}console.log("Update user..."),yield Sde(s.id,{...s,groups:s.groups.filter(o=>!o.startsWith("placeos_")),work_preferences:r}).toPromise().catch(o=>{throw i.loading=!1,i._dialog_ref.disableClose=!1,Ti("Unable to save user work preferences."),o}),console.log("Updated user"),i.loading=!1,i._dialog_ref.disableClose=!1,e&&(ohe(),console.log("Close WFH Modal"),i._dialog_ref.close())})()}static#e=this.\u0275fac=function(i){return new(i||t)(I(Xa))};static#t=this.\u0275cmp=Se({type:t,selectors:[["wfh-settings-modal"]],decls:8,vars:4,consts:[["load_state",""],["empty_state",""],[1,"relative","flex","items-center","justify-between"],[1,"font-medium","text-xl"],["icon","","matRipple","","mat-dialog-close","","class","bg-base-200",4,"ngIf"],["class","relative flex flex-col rounded w-[40rem] max-w-full p-4 space-y-2 max-h-[65vh] overflow-auto",4,"ngIf","ngIfElse"],["class","flex justify-end px-4 py-2 border-t border-base-200",4,"ngIf"],["icon","","matRipple","","mat-dialog-close","",1,"bg-base-200"],[1,"relative","flex","flex-col","rounded","w-[40rem]","max-w-full","p-4","space-y-2","max-h-[65vh]","overflow-auto"],[1,"flex","items-center","justify-between","w-full","pb-4","space-x-2"],[3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"flex","w-full","space-x-2","hover:bg-base-200","rounded","px-2","pt-1"],[1,"w-12","min-w-0","px-2","pt-3"],[1,"flex-1","w-1/2"],["class","flex items-center space-x-2",4,"ngFor","ngForOf"],[1,"flex","items-center","space-x-2"],[1,"flex-1","w-1/4","h-[3.25rem]",3,"ngModelChange","ngModel","from"],["appearance","outline",1,"flex-1","w-1/4","h-[3.25rem]"],[3,"value",4,"ngFor","ngForOf"],["icon","","matRipple","",3,"click","disabled"],["icon","","matRipple","",1,"text-error",3,"click"],[3,"value"],[1,"flex","flex-col","items-center","justify-center","px-8","py-16","space-y-4"],["src","assets/icons/no-results.svg",1,"m-auto"],[1,"opacity-30"],[1,"flex","justify-end","px-4","py-2","border-t","border-base-200"],["btn","","matRipple","",1,"w-48",3,"click"],["loading","",1,"relative","bg-base-100","flex","flex-col","justify-center","items-center","rounded","overflow-hidden","w-[24rem]","h-[18rem]","text-center","space-y-2"],[3,"diameter"]],template:function(i,s){if(1&i&&(m(0,"header",2)(1,"h2",3),S(2,"Working Location Settings"),_(),O(3,irt,3,0,"button",4),_(),O(4,drt,10,3,"main",5)(5,hrt,3,0,"footer",6)(6,prt,4,1,"ng-template",null,0,ln)),2&i){const r=xt(7);b(3),C("ngIf",!s.loading),b(),C("ngIf",!s.loading)("ngIfElse",r),b(),C("ngIf",!s.loading)}}})}return t})();function frt(t,n){if(1&t){const e=se();m(0,"div",9)(1,"div",10)(2,"app-icon",11),S(3,"mode_night"),_()(),m(4,"div",12),oe(5,2),_(),m(6,"mat-slide-toggle",13),P("ngModelChange",function(s){return B(e),V(E().setDarkMode(s))}),_()()}if(2&t){const e=E();b(6),C("ngModel",e.dark_mode)}}function mrt(t,n){if(1&t){const e=se();Wt(0),m(1,"div",15),oe(2,3),_(),m(3,"div",16)(4,"span",17),S(5,"A"),_(),m(6,"mat-slider",18)(7,"input",19),P("ngModelChange",function(s){return B(e),V(E().applySetting("font_size",s))}),_()(),m(8,"span",6),S(9,"A"),_(),m(10,"span",20),S(11),_()(),qt()}if(2&t){const e=E();b(6),C("min",10)("max",24)("step",2),b(),C("ngModel",e.font_size),b(4),K(" ",e.font_size,"px ")}}let eme=(()=>{class t extends hn{get dark_mode(){return"dark"===this._settings.get("theme")}get can_change_dark_mode(){return!!this._settings.get("app.general.dark_mode")}get accessible(){return!!this._settings.get("accessible")}get font_size(){return this._settings.get("font_size")||16}constructor(e,i){super(),this._data=e,this._settings=i,this.applySetting=(s,r)=>this.timeout("apply_setting",()=>this._settings.saveUserSetting(s,r),1e3),this.close=()=>this._data?.close()}setDarkMode(e){const i=this._settings.get("theme");e&&"dark"!==i?this._settings.setTheme("dark"):!e&&"dark"===i&&this._settings.setTheme("light")}static#e=this.\u0275fac=function(i){return new(i||t)(I(lv),I(nn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["accessibility-tooltip"]],features:[Ze],decls:15,vars:3,consts:()=>{let e,i,s,r;return e=$localize`:␟d22b673a92b43eabbdebd80b1539a553703c84f6␟6572705143012462182:Display & Accessibility`,i=$localize`:␟0f027c150c7e9465a5cdf64c4d07c33aca92384d␟127744830115363320:Large Accessibility Sizes`,s=$localize`:␟c943d5ecc32b916a210d7c984fe5f55771ad0b1a␟3279636347259347513:Dark Mode`,r=$localize`:␟3fc32876e34616b005d861eafe737cf4d2793184␟8609643488577372847: Adjust your preferred reading size below. `,[e,i,s,r,[1,"flex","flex-col","w-[18.5rem]","rounded","bg-base-100","shadow","relative","-top-12","-right-1","overflow-hidden"],[1,"flex","items-center","space-x-2","p-2",3,"click"],[1,"text-2xl"],[1,""],["action","","class","flex items-center space-x-2 w-full text-left h-auto px-4",4,"ngIf"],["action","",1,"flex","items-center","space-x-2","w-full","text-left","h-auto","px-4"],[1,"flex","items-center","justify-center","rounded-full","w-8","h-8","bg-base-200","my-2"],[1,"text-xl"],[1,"flex-1","text-sm"],[3,"ngModelChange","ngModel"],[4,"ngIf"],[1,"px-8","py-4","bg-base-200","text-center"],[1,"flex","items-center","px-4","space-x-4"],[1,"text-sm"],[1,"flex-1","w-1/2","text-[16px]",3,"min","max","step"],["matSliderThumb","",1,"text-[16px]",3,"ngModelChange","ngModel"],[1,"text-base","py-1","px-2","rounded","bg-base-300","text-white","my-2"]]},template:function(i,s){1&i&&(m(0,"div",4)(1,"div",5),P("click",function(){return s.close()}),m(2,"app-icon",6),S(3,"arrow_back"),_(),m(4,"div",7),oe(5,0),_()(),O(6,frt,7,1,"div",8),m(7,"div",9)(8,"div",10)(9,"app-icon",11),S(10,"playlist_add"),_()(),m(11,"div",12),oe(12,1),_(),m(13,"mat-slide-toggle",13),P("ngModelChange",function(o){return s.applySetting("accessible",o)}),_()(),O(14,mrt,12,5,"ng-container",14),_()),2&i&&(b(6),C("ngIf",s.can_change_dark_mode),b(7),C("ngModel",s.accessible),b(),C("ngIf",s.accessible))},dependencies:[mt,Yr,pi,Vi,ZV,RE,uO,St],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%] > [action][_ngcontent-%COMP%]{border-top:1px solid #ccc}"]})}return t})();function _rt(t,n){if(1&t){const e=se();m(0,"mat-radio-button",8),P("click",function(){const s=B(e).$implicit;return V(E().setBuilding(s))}),S(1),_()}if(2&t){const e=n.$implicit;C("value",e.id),b(),K(" ",e.display_name||e.name," ")}}let tme=(()=>{class t{constructor(e,i){this._data=e,this._org=i,this.buildings=this._org.active_buildings,this.building=this._org.active_building,this.setBuilding=s=>{this._org.building=s,this._org.saveBuilding(s.id),this._data?.close()},this.close=()=>this._data?.close()}static#e=this.\u0275fac=function(i){return new(i||t)(I(lv),I(Sn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["building-select"]],decls:14,vars:11,consts:()=>{let e;return e=$localize`:␟f6bc545a20f571c426f74d4d3522b71334f2b845␟4543839253815117286: Select a building location `,[e,[1,"flex","flex-col","w-[18.5rem]","rounded","bg-base-100","shadow","p-2","relative","-top-12","-right-1","overflow-auto","max-h-[65vh]",3,"click"],[1,"flex","items-center","space-x-2"],[1,"text-2xl"],[1,""],[1,"text-xs","opacity-60","mb-4","px-2"],[1,"flex","flex-col","space-y-2","px-2",3,"ngModel"],[3,"value","click",4,"ngFor","ngForOf"],[3,"click","value"]]},template:function(i,s){if(1&i&&(m(0,"div",1),P("click",function(){return s.close()}),m(1,"div",2)(2,"app-icon",3),S(3,"arrow_back"),_(),m(4,"div",4),S(5),H(6,"async"),H(7,"async"),_()(),m(8,"div",5),oe(9,0),_(),m(10,"mat-radio-group",6),H(11,"async"),O(12,_rt,2,2,"mat-radio-button",7),H(13,"async"),_()()),2&i){let r,o;b(5),K(" ",(null==(r=ne(6,3,s.building))?null:r.display_name)||(null==(r=ne(7,5,s.building))?null:r.name)," "),b(5),C("ngModel",null==(o=ne(11,7,s.building))?null:o.id),b(2),C("ngForOf",ne(13,9,s.buildings))}},dependencies:[on,pi,Vi,k0,Ub,St,xi]})}return t})();function grt(t,n){if(1&t&&(m(0,"a",6)(1,"div",7)(2,"div",8),q(3,"app-icon",9),_(),m(4,"div",10),S(5),_()()()),2&t){const e=n.$implicit;C("href",e.link,qa),b(3),C("icon",e.icon),b(2),Ye(e.name)}}let nme=(()=>{class t{get tiles(){return this._settings.get("app.help")||[]}constructor(e,i){this._data=e,this._settings=i,this.close=()=>{this._data?.close()}}static#e=this.\u0275fac=function(i){return new(i||t)(I(lv),I(nn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["help-tooltip"]],decls:7,vars:1,consts:()=>{let e;return e=$localize`:␟258586f2141d5b6c98ef28c38ac6f55a81a301b2␟7393197899734735120:Help & Support`,[e,[1,"flex","flex-col","w-[18.5rem]","rounded","bg-base-100","shadow","relative","-top-12","-right-1","divide-y","divide-base-200",3,"click"],[1,"flex","items-center","space-x-2","p-2","border-b"],[1,"text-2xl"],[1,""],["btn","","matRipple","","class","clear w-full text-left h-auto","target","_blank","ref","noreferer noopener",3,"href",4,"ngFor","ngForOf"],["btn","","matRipple","","target","_blank","ref","noreferer noopener",1,"clear","w-full","text-left","h-auto",3,"href"],[1,"flex","items-center","space-x-2","py-2","w-full"],[1,"flex","items-center","justify-center","rounded-full","w-8","h-8","bg-base-200"],[1,"text-xl",3,"icon"],[1,"flex-1"]]},template:function(i,s){1&i&&(m(0,"div",1),P("click",function(){return s.close()}),m(1,"div",2)(2,"app-icon",3),S(3,"arrow_back"),_(),m(4,"div",4),oe(5,0),_()(),O(6,grt,6,3,"a",5),_()),2&i&&(b(6),C("ngForOf",s.tiles))},dependencies:[on,Tt,St],styles:["a[_ngcontent-%COMP%]:not(:last-child){border-bottom-width:1px!important;border-bottom-style:solid!important;border-radius:0}"]})}return t})();function brt(t,n){if(1&t){const e=se();m(0,"button",6),P("click",function(){const s=B(e).$implicit;return V(E().setLocale(s.id))}),S(1),_()}if(2&t){const e=n.$implicit;b(),Os(" ",e.name," - ",e.flag," ")}}let ime=(()=>{class t{get locales(){return this._settings.get("app.locales")||[]}constructor(e,i,s){this._data=e,this._settings=i,this._translation=s,this.setLocale=r=>{this._translation.use(r),localStorage.setItem("PLACEOS.locale",r)},this.close=()=>this._data?.close()}static#e=this.\u0275fac=function(i){return new(i||t)(I(lv),I(nn),I(hE))};static#t=this.\u0275cmp=Se({type:t,selectors:[["language-select"]],decls:11,vars:7,consts:[[1,"flex","flex-col","w-[18.5rem]","rounded","bg-base-100","shadow","relative","-top-12","-right-1",3,"click"],[1,"flex","items-center","space-x-2","p-2"],[1,"text-2xl"],[1,""],[1,"text-xs","opacity-60","mb-4","px-2","p-4"],["class","w-full p-4 border-t border-base-200 text-left",3,"click",4,"ngFor","ngForOf"],[1,"w-full","p-4","border-t","border-base-200","text-left",3,"click"]],template:function(i,s){1&i&&(m(0,"div",0),P("click",function(){return s.close()}),m(1,"div",1)(2,"app-icon",2),S(3,"arrow_back"),_(),m(4,"div",3),S(5),H(6,"translate"),_()(),m(7,"div",4),S(8),H(9,"translate"),_(),O(10,brt,2,2,"button",5),_()),2&i&&(b(5),Ye(ne(6,3,"COMMON.LANGUAGE")),b(3),K(" ",ne(9,5,"COMMON.LANGUAGE_SELECT")," "),b(2),C("ngForOf",s.locales))},dependencies:[on,St,jh]})}return t})();function vrt(t,n){if(1&t){const e=se();m(0,"mat-radio-button",8),P("click",function(){const s=B(e).$implicit;return V(E().setRegion(s))}),S(1),_()}if(2&t){const e=n.$implicit;C("value",e.id),b(),K(" ",e.display_name||e.name," ")}}let sme=(()=>{class t{constructor(e,i){var s=this;this._data=e,this._org=i,this.regions=this._org.region_list,this.region=this._org.active_region,this.setRegion=function(){var r=z(function*(o){yield s._org.setRegion(o),s._org.saveBuilding(s._org.building.id),s._data?.close()});return function(o){return r.apply(this,arguments)}}(),this.close=()=>this._data?.close()}static#e=this.\u0275fac=function(i){return new(i||t)(I(lv),I(Sn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["region-select"]],decls:14,vars:11,consts:()=>{let e;return e=$localize`:␟234e996785a944c8e8c7df16179eaa04405b3446␟5361505502593902636:Select a region`,[e,[1,"flex","flex-col","w-[18.5rem]","rounded","bg-base-100","shadow","p-2","relative","-top-12","-right-1","overflow-auto","max-h-[65vh]",3,"click"],[1,"flex","items-center","space-x-2"],[1,"text-2xl"],[1,""],[1,"text-xs","opacity-60","mb-4","px-2"],[1,"flex","flex-col","space-y-2","px-2",3,"ngModel"],[3,"value","click",4,"ngFor","ngForOf"],[3,"click","value"]]},template:function(i,s){if(1&i&&(m(0,"div",1),P("click",function(){return s.close()}),m(1,"div",2)(2,"app-icon",3),S(3,"arrow_back"),_(),m(4,"div",4),S(5),H(6,"async"),H(7,"async"),_()(),m(8,"div",5),oe(9,0),_(),m(10,"mat-radio-group",6),H(11,"async"),O(12,vrt,2,2,"mat-radio-button",7),H(13,"async"),_()()),2&i){let r,o;b(5),K(" ",(null==(r=ne(6,3,s.region))?null:r.display_name)||(null==(r=ne(7,5,s.region))?null:r.name)," "),b(5),C("ngModel",null==(o=ne(11,7,s.region))?null:o.id),b(2),C("ngForOf",ne(13,9,s.regions))}},dependencies:[on,pi,Vi,k0,Ub,St,xi]})}return t})();function yrt(t,n){if(1&t&&(m(0,"mat-option",34),S(1),_()),2&t){const e=n.$implicit;C("value",e.display_name||e.name),b(),K(" ",e.display_name||e.name," ")}}function wrt(t,n){if(1&t&&(m(0,"mat-option",34),S(1),_()),2&t){const e=n.$implicit;C("value",(null==e?null:e.name)||e),b(),K(" ",e.name||e," ")}}function Crt(t,n){if(1&t&&(m(0,"div",24)(1,"label"),oe(2,9),_(),m(3,"mat-form-field",25)(4,"mat-select",35),O(5,wrt,2,2,"mat-option",27),_()()()),2&t){const e=E(2);b(5),C("ngForOf",e.support_request_types)}}function Srt(t,n){1&t&&(m(0,"mat-error",36),oe(1,10),_())}function xrt(t,n){1&t&&(m(0,"div")(1,"label",29),oe(2,11),_(),q(3,"image-list-field",37),_())}function Ert(t,n){if(1&t&&(m(0,"main",17)(1,"form",18)(2,"div",19)(3,"div",20)(4,"label"),Pi(5,2),q(6,"span"),$i(),_(),m(7,"mat-form-field",21),q(8,"input",22),m(9,"mat-error"),oe(10,3),_()()(),m(11,"div",20)(12,"label"),Pi(13,4),q(14,"span"),$i(),_(),m(15,"mat-form-field",21),q(16,"input",23),m(17,"mat-error"),oe(18,5),_()()()(),m(19,"div",24)(20,"label"),oe(21,6),_(),m(22,"mat-form-field",25)(23,"mat-select",26),O(24,yrt,2,2,"mat-option",27),H(25,"async"),_()()(),O(26,Crt,6,1,"div",28),m(27,"div")(28,"label",29),Pi(29,7),q(30,"span"),$i(),_(),q(31,"rich-text-input",30),O(32,Srt,2,0,"mat-error",31),_(),O(33,xrt,4,0,"div",32),_(),m(34,"div",33),oe(35,8),_()()),2&t){const e=E();b(),C("formGroup",e.form),b(23),C("ngForOf",ne(25,5,e.buildings)),b(2),C("ngIf",null==e.support_request_types?null:e.support_request_types.length),b(6),C("ngIf",e.desc_error),b(),C("ngIf",e.allow_images)}}function Trt(t,n){if(1&t){const e=se();m(0,"footer",38)(1,"button",39),P("click",function(){return B(e),V(E().submit())}),oe(2,12),_()()}}function Irt(t,n){1&t&&(m(0,"main",40),q(1,"mat-spinner",41),m(2,"p"),S(3,"Sending support ticket..."),_()()),2&t&&(b(),C("diameter",32))}let P7=(()=>{class t{get desc_error(){return!this.form.controls.description.valid&&this.form.controls.description.touched}get support_email(){return this._settings.get("app.support_email")||"support@place.tech"}get support_request_types(){return this._settings.get("app.support_issue_types")||[]}get allow_images(){return this._settings.get("app.allow_support_ticket_images")}constructor(e,i,s){this._dialog_ref=e,this._org=i,this._settings=s,this.loading=!1,this.form=new Rl({name:new Ke("",[Zr.required]),email:new Ke("",[Zr.required]),location:new Ke(""),description:new Ke("",[Zr.required]),issue_type:new Ke(""),images:new Ke([])}),this.buildings=this._org.building_list}ngOnInit(){const e=Qt();e&&this.form.patchValue({name:e.name,email:e.email}),this._org.building&&this.form.patchValue({location:this._org.building.display_name||this._org.building.name})}submit(){var e=this;return z(function*(){if(e.loading=!0,e.form.markAllAsTouched(),e.form.updateValueAndValidity(),e.form.valid){const i=e._org.binding("smtp");if(!i)return Ti("Mailing system not configured for application.");const s=Qr(i,"Mailer"),{name:r,email:o,location:a,description:l,images:c,issue_type:u}=e.form.value,d=e.support_request_types.find(h=>h.name===u)?.email||e.support_email;yield s.execute("send_mail",[d,"Support Ticket from Workplace Application"+(u?" - "+u:""),`${r}\n${o}\n\n${a}\n\n${l.replace(/<[^>]+>/g,"")}\n\n${c.join("\n")}`,`<p>${r}</p><p>${o}</p><p>${a}</p><p>${l}</p>${c.join("<br>")}`,[],[],[],[],null,`${o}`]),e._dialog_ref.close(),e.loading=!1,ep("Successfully submitted support ticket")}})()}static#e=this.\u0275fac=function(i){return new(i||t)(I(Xa),I(Sn),I(nn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["support-ticket-modal"]],decls:10,vars:3,consts:()=>{let e,i,s,r,o,a,l,c,u,d,h,p;return e=$localize`:␟b862b54c42ded9ebb47260f60b0f75985c5fab18␟270482714535552546:Raise a support ticket`,i=$localize`:␟84f7804a7a51f1144c5a3fda7b9b881af4212c4a␟5257092898921510014:Name${"\ufffd#6\ufffd"}:START_TAG_SPAN:*${"\ufffd/#6\ufffd"}:CLOSE_TAG_SPAN:`,s=$localize`:␟5b752f143ab30faa45a2679b5e7a28bbf3fb246d␟3833692663709091545:Name is required`,r=$localize`:␟15032ab5f5dcf10cb837008e8ff61acb42e957db␟8600249315708032613:Email${"\ufffd#14\ufffd"}:START_TAG_SPAN:*${"\ufffd/#14\ufffd"}:CLOSE_TAG_SPAN:`,o=$localize`:␟9b2fd2a81342b5821f47ce0e6f2383b1403fd659␟8552587679160911578:Email is required`,a=$localize`:␟ed31c09fd77c36238c13d83635f3fe5294c733d2␟471816275243265264:Location`,l=$localize`:␟bd571e4b6aa662ccde3593b99728c60a9c4e2722␟5204458475414246750: Issue Description${"\ufffd#30\ufffd"}:START_TAG_SPAN:*${"\ufffd/#30\ufffd"}:CLOSE_TAG_SPAN:`,c=$localize`:␟860180fb81e0877ec8059acbf30938f5d31daede␟2365971609064887430: Completing this form will raise an incident in your support management platform `,u=$localize`:␟712648c55b8f81cc494ffeff1c304f275dcafc61␟3187063371811307868:Issue Type`,d=$localize`:␟ae855fe6e11d47178c1051e1a3f9e78c5bb7fb4e␟124716140796903078: Description is required `,h=$localize`:␟b73f7f5060fb22a1e9ec462b1bb02493fa3ab866␟414887388288176527:Images`,p=$localize`:␟932802b79d36312ecbe949fc5b703fef638f41df␟1413112058430688330: Submit `,[["load_state",""],e,i,s,r,o,a,l,c,u,d,h,p,[1,"flex","items-center","justify-between"],["icon","","mat-dialog-close",""],["class","w-[32rem] max-w-[85vw]",4,"ngIf","ngIfElse"],["class","p-2 border-t border-base-200 flex items-center justify-center",4,"ngIf"],[1,"w-[32rem]","max-w-[85vw]"],[1,"p-2",3,"formGroup"],[1,"flex","items-center","sm:space-x-2","flex-wrap"],[1,"flex","flex-col","flex-1"],["appearance","outline"],["matInput","","placeholder","Name","formControlName","name"],["matInput","","placeholder","Email","formControlName","email"],[1,"flex","flex-col"],["appearance","outline",1,"w-full"],["placeholder","Location","formControlName","location"],[3,"value",4,"ngFor","ngForOf"],["class","flex flex-col",4,"ngIf"],[1,"mb-4"],["placeholder","Issue Description","formControlName","description"],["class","text-xs my-2",4,"ngIf"],[4,"ngIf"],[1,"italic","text-center","text-xs","mb-2"],[3,"value"],["placeholder","Issue Type","formControlName","issue_type"],[1,"text-xs","my-2"],["formControlName","images"],[1,"p-2","border-t","border-base-200","flex","items-center","justify-center"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"w-[32rem]","min-h-[24rem]","max-w-[100vw]","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]]},template:function(i,s){if(1&i&&(m(0,"header",13)(1,"h2"),oe(2,1),_(),m(3,"button",14)(4,"app-icon"),S(5,"close"),_()()(),O(6,Ert,36,7,"main",15)(7,Trt,3,0,"footer",16)(8,Irt,4,1,"ng-template",null,0,ln)),2&i){const r=xt(9);b(6),C("ngIf",!s.loading)("ngIfElse",r),b(),C("ngIf",!s.loading)}},styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]})}return t})();class rme{subPriority=0;validate(n,e){return!0}}class Mrt extends rme{constructor(n,e,i,s,r){super(),this.value=n,this.validateValue=e,this.setValue=i,this.priority=s,r&&(this.subPriority=r)}validate(n,e){return this.validateValue(n,this.value,e)}set(n,e,i){return this.setValue(n,e,this.value,i)}}class Nrt extends rme{priority=10;subPriority=-1;set(n,e){return e.timestampIsSet?n:Is(n,function Drt(t,n){const e=n instanceof Date?Is(n,0):new n(0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e}(n,Date))}}class Ps{run(n,e,i,s){const r=this.parse(n,e,i,s);return r?{setter:new Mrt(r.value,this.validate,this.set,this.priority,this.subPriority),rest:r.rest}:null}validate(n,e,i){return!0}}const No_month=/^(1[0-2]|0?\d)/,No_date=/^(3[0-1]|[0-2]?\d)/,No_dayOfYear=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,No_week=/^(5[0-3]|[0-4]?\d)/,No_hour23h=/^(2[0-3]|[0-1]?\d)/,No_hour24h=/^(2[0-4]|[0-1]?\d)/,No_hour11h=/^(1[0-1]|0?\d)/,No_hour12h=/^(1[0-2]|0?\d)/,No_minute=/^[0-5]?\d/,No_second=/^[0-5]?\d/,No_singleDigit=/^\d/,No_twoDigits=/^\d{1,2}/,No_threeDigits=/^\d{1,3}/,No_fourDigits=/^\d{1,4}/,No_anyDigitsSigned=/^-?\d+/,No_singleDigitSigned=/^-?\d/,No_twoDigitsSigned=/^-?\d{1,2}/,No_threeDigitsSigned=/^-?\d{1,3}/,No_fourDigitsSigned=/^-?\d{1,4}/,ap_basicOptionalMinutes=/^([+-])(\d{2})(\d{2})?|Z/,ap_basic=/^([+-])(\d{2})(\d{2})|Z/,ap_basicOptionalSeconds=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,ap_extended=/^([+-])(\d{2}):(\d{2})|Z/,ap_extendedOptionalSeconds=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function Oo(t,n){return t&&{value:n(t.value),rest:t.rest}}function Jr(t,n){const e=n.match(t);return e?{value:parseInt(e[0],10),rest:n.slice(e[0].length)}:null}function lp(t,n){const e=n.match(t);if(!e)return null;if("Z"===e[0])return{value:0,rest:n.slice(1)};const i="+"===e[1]?1:-1,s=e[2]?parseInt(e[2],10):0,r=e[3]?parseInt(e[3],10):0,o=e[5]?parseInt(e[5],10):0;return{value:i*(s*nde+r*rz+1e3*o),rest:n.slice(e[0].length)}}function ome(t){return Jr(No_anyDigitsSigned,t)}function ho(t,n){switch(t){case 1:return Jr(No_singleDigit,n);case 2:return Jr(No_twoDigits,n);case 3:return Jr(No_threeDigits,n);case 4:return Jr(No_fourDigits,n);default:return Jr(new RegExp("^\\d{1,"+t+"}"),n)}}function DR(t,n){switch(t){case 1:return Jr(No_singleDigitSigned,n);case 2:return Jr(No_twoDigitsSigned,n);case 3:return Jr(No_threeDigitsSigned,n);case 4:return Jr(No_fourDigitsSigned,n);default:return Jr(new RegExp("^-?\\d{1,"+t+"}"),n)}}function $7(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function ame(t,n){const e=n>0,i=e?n:1-n;let s;if(i<=50)s=t||100;else{const r=i+50;s=t+100*Math.trunc(r/100)-(t>=r%100?100:0)}return e?s:1-s}function lme(t){return t%400==0||t%4==0&&t%100!=0}const Wrt=[31,28,31,30,31,30,31,31,30,31,30,31],qrt=[31,29,31,30,31,30,31,31,30,31,30,31];function B7(t,n,e){const i=i_(),s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,r=Tn(t),o=r.getDay(),c=7-s;return Ir(r,n<0||n>6?n-(o+c)%7:((n%7+7)%7+c)%7-(o+c)%7)}const _ot={G:new class Ort extends Ps{priority=140;parse(n,e,i){switch(e){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,e,i){return e.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}incompatibleTokens=["R","u","t","T"]},y:new class Rrt extends Ps{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(n,e,i){const s=r=>({year:r,isTwoDigitYear:"yy"===e});switch(e){case"y":return Oo(ho(4,n),s);case"yo":return Oo(i.ordinalNumber(n,{unit:"year"}),s);default:return Oo(ho(e.length,n),s)}}validate(n,e){return e.isTwoDigitYear||e.year>0}set(n,e,i){const s=n.getFullYear();if(i.isTwoDigitYear){const o=ame(i.year,s);return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}return n.setFullYear("era"in e&&1!==e.era?1-i.year:i.year,0,1),n.setHours(0,0,0,0),n}},Y:new class Frt extends Ps{priority=130;parse(n,e,i){const s=r=>({year:r,isTwoDigitYear:"YY"===e});switch(e){case"Y":return Oo(ho(4,n),s);case"Yo":return Oo(i.ordinalNumber(n,{unit:"year"}),s);default:return Oo(ho(e.length,n),s)}}validate(n,e){return e.isTwoDigitYear||e.year>0}set(n,e,i,s){const r=Ez(n,s);if(i.isTwoDigitYear){const a=ame(i.year,r);return n.setFullYear(a,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),zu(n,s)}return n.setFullYear("era"in e&&1!==e.era?1-i.year:i.year,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),zu(n,s)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:new class Lrt extends Ps{priority=130;parse(n,e){return DR("R"===e?4:e.length,n)}set(n,e,i){const s=Is(n,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),j0(s)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:new class Prt extends Ps{priority=130;parse(n,e){return DR("u"===e?4:e.length,n)}set(n,e,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]},Q:new class $rt extends Ps{priority=120;parse(n,e,i){switch(e){case"Q":case"QQ":return ho(e.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,e){return e>=1&&e<=4}set(n,e,i){return n.setMonth(3*(i-1),1),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:new class Brt extends Ps{priority=120;parse(n,e,i){switch(e){case"q":case"qq":return ho(e.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,e){return e>=1&&e<=4}set(n,e,i){return n.setMonth(3*(i-1),1),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:new class Vrt extends Ps{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(n,e,i){const s=r=>r-1;switch(e){case"M":return Oo(Jr(No_month,n),s);case"MM":return Oo(ho(2,n),s);case"Mo":return Oo(i.ordinalNumber(n,{unit:"month"}),s);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,e){return e>=0&&e<=11}set(n,e,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}},L:new class zrt extends Ps{priority=110;parse(n,e,i){const s=r=>r-1;switch(e){case"L":return Oo(Jr(No_month,n),s);case"LL":return Oo(ho(2,n),s);case"Lo":return Oo(i.ordinalNumber(n,{unit:"month"}),s);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,e){return e>=0&&e<=11}set(n,e,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:new class Grt extends Ps{priority=100;parse(n,e,i){switch(e){case"w":return Jr(No_week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return ho(e.length,n)}}validate(n,e){return e>=1&&e<=53}set(n,e,i,s){return zu(function Urt(t,n,e){const i=Tn(t),s=Xde(i,e)-n;return i.setDate(i.getDate()-7*s),i}(n,i,s),s)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:new class Hrt extends Ps{priority=100;parse(n,e,i){switch(e){case"I":return Jr(No_week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return ho(e.length,n)}}validate(n,e){return e>=1&&e<=53}set(n,e,i){return j0(function jrt(t,n){const e=Tn(t),i=Kde(e)-n;return e.setDate(e.getDate()-7*i),e}(n,i))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:new class Krt extends Ps{priority=90;subPriority=1;parse(n,e,i){switch(e){case"d":return Jr(No_date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return ho(e.length,n)}}validate(n,e){const s=lme(n.getFullYear()),r=n.getMonth();return s?e>=1&&e<=qrt[r]:e>=1&&e<=Wrt[r]}set(n,e,i){return n.setDate(i),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:new class Xrt extends Ps{priority=90;subpriority=1;parse(n,e,i){switch(e){case"D":case"DD":return Jr(No_dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return ho(e.length,n)}}validate(n,e){return lme(n.getFullYear())?e>=1&&e<=366:e>=1&&e<=365}set(n,e,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:new class Yrt extends Ps{priority=90;parse(n,e,i){switch(e){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,e){return e>=0&&e<=6}set(n,e,i,s){return(n=B7(n,i,s)).setHours(0,0,0,0),n}incompatibleTokens=["D","i","e","c","t","T"]},e:new class Zrt extends Ps{priority=90;parse(n,e,i,s){const r=o=>{const a=7*Math.floor((o-1)/7);return(o+s.weekStartsOn+6)%7+a};switch(e){case"e":case"ee":return Oo(ho(e.length,n),r);case"eo":return Oo(i.ordinalNumber(n,{unit:"day"}),r);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,e){return e>=0&&e<=6}set(n,e,i,s){return(n=B7(n,i,s)).setHours(0,0,0,0),n}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:new class Qrt extends Ps{priority=90;parse(n,e,i,s){const r=o=>{const a=7*Math.floor((o-1)/7);return(o+s.weekStartsOn+6)%7+a};switch(e){case"c":case"cc":return Oo(ho(e.length,n),r);case"co":return Oo(i.ordinalNumber(n,{unit:"day"}),r);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,e){return e>=0&&e<=6}set(n,e,i,s){return(n=B7(n,i,s)).setHours(0,0,0,0),n}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:new class tot extends Ps{priority=90;parse(n,e,i){const s=r=>0===r?7:r;switch(e){case"i":case"ii":return ho(e.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return Oo(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiii":return Oo(i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Oo(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);default:return Oo(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s)}}validate(n,e){return e>=1&&e<=7}set(n,e,i){return(n=function eot(t,n){const e=Tn(t),i=function Jrt(t){let e=Tn(t).getDay();return 0===e&&(e=7),e}(e);return Ir(e,n-i)}(n,i)).setHours(0,0,0,0),n}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:new class not extends Ps{priority=80;parse(n,e,i){switch(e){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,e,i){return n.setHours($7(i),0,0,0),n}incompatibleTokens=["b","B","H","k","t","T"]},b:new class iot extends Ps{priority=80;parse(n,e,i){switch(e){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,e,i){return n.setHours($7(i),0,0,0),n}incompatibleTokens=["a","B","H","k","t","T"]},B:new class sot extends Ps{priority=80;parse(n,e,i){switch(e){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,e,i){return n.setHours($7(i),0,0,0),n}incompatibleTokens=["a","b","t","T"]},h:new class rot extends Ps{priority=70;parse(n,e,i){switch(e){case"h":return Jr(No_hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return ho(e.length,n)}}validate(n,e){return e>=1&&e<=12}set(n,e,i){const s=n.getHours()>=12;return n.setHours(s&&i<12?i+12:s||12!==i?i:0,0,0,0),n}incompatibleTokens=["H","K","k","t","T"]},H:new class oot extends Ps{priority=70;parse(n,e,i){switch(e){case"H":return Jr(No_hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return ho(e.length,n)}}validate(n,e){return e>=0&&e<=23}set(n,e,i){return n.setHours(i,0,0,0),n}incompatibleTokens=["a","b","h","K","k","t","T"]},K:new class aot extends Ps{priority=70;parse(n,e,i){switch(e){case"K":return Jr(No_hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return ho(e.length,n)}}validate(n,e){return e>=0&&e<=11}set(n,e,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}incompatibleTokens=["h","H","k","t","T"]},k:new class lot extends Ps{priority=70;parse(n,e,i){switch(e){case"k":return Jr(No_hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return ho(e.length,n)}}validate(n,e){return e>=1&&e<=24}set(n,e,i){return n.setHours(i<=24?i%24:i,0,0,0),n}incompatibleTokens=["a","b","h","H","K","t","T"]},m:new class cot extends Ps{priority=60;parse(n,e,i){switch(e){case"m":return Jr(No_minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return ho(e.length,n)}}validate(n,e){return e>=0&&e<=59}set(n,e,i){return n.setMinutes(i,0,0),n}incompatibleTokens=["t","T"]},s:new class uot extends Ps{priority=50;parse(n,e,i){switch(e){case"s":return Jr(No_second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return ho(e.length,n)}}validate(n,e){return e>=0&&e<=59}set(n,e,i){return n.setSeconds(i,0),n}incompatibleTokens=["t","T"]},S:new class dot extends Ps{priority=30;parse(n,e){return Oo(ho(e.length,n),s=>Math.trunc(s*Math.pow(10,3-e.length)))}set(n,e,i){return n.setMilliseconds(i),n}incompatibleTokens=["t","T"]},X:new class hot extends Ps{priority=10;parse(n,e){switch(e){case"X":return lp(ap_basicOptionalMinutes,n);case"XX":return lp(ap_basic,n);case"XXXX":return lp(ap_basicOptionalSeconds,n);case"XXXXX":return lp(ap_extendedOptionalSeconds,n);default:return lp(ap_extended,n)}}set(n,e,i){return e.timestampIsSet?n:Is(n,n.getTime()-G0(n)-i)}incompatibleTokens=["t","T","x"]},x:new class pot extends Ps{priority=10;parse(n,e){switch(e){case"x":return lp(ap_basicOptionalMinutes,n);case"xx":return lp(ap_basic,n);case"xxxx":return lp(ap_basicOptionalSeconds,n);case"xxxxx":return lp(ap_extendedOptionalSeconds,n);default:return lp(ap_extended,n)}}set(n,e,i){return e.timestampIsSet?n:Is(n,n.getTime()-G0(n)-i)}incompatibleTokens=["t","T","X"]},t:new class fot extends Ps{priority=40;parse(n){return ome(n)}set(n,e,i){return[Is(n,1e3*i),{timestampIsSet:!0}]}incompatibleTokens="*"},T:new class mot extends Ps{priority=20;parse(n){return ome(n)}set(n,e,i){return[Is(n,i),{timestampIsSet:!0}]}incompatibleTokens="*"}},got=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,bot=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vot=/^'([^]*?)'?$/,yot=/''/g,wot=/\S/,Cot=/[a-zA-Z]/;function Sot(t,n,e,i){const s=function krt(){return Object.assign({},i_())}(),r=i?.locale??s.locale??WO,o=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,a=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0;if(""===n)return""===t?Tn(e):Is(e,NaN);const l={firstWeekContainsDate:o,weekStartsOn:a,locale:r},c=[new Nrt],u=n.match(bot).map(g=>{const v=g[0];return v in Tz?(0,Tz[v])(g,r.formatLong):g}).join("").match(got),d=[];for(let g of u){!i?.useAdditionalWeekYearTokens&&nhe(g)&&Iz(g,n,t),!i?.useAdditionalDayOfYearTokens&&the(g)&&Iz(g,n,t);const v=g[0],y=_ot[v];if(y){const{incompatibleTokens:w}=y;if(Array.isArray(w)){const T=d.find(k=>w.includes(k.token)||k.token===v);if(T)throw new RangeError(`The format string mustn't contain \`${T.fullToken}\` and \`${g}\` at the same time`)}else if("*"===y.incompatibleTokens&&d.length>0)throw new RangeError(`The format string mustn't contain \`${g}\` and any other token at the same time`);d.push({token:v,fullToken:g});const x=y.run(t,g,r.match,l);if(!x)return Is(e,NaN);c.push(x.setter),t=x.rest}else{if(v.match(Cot))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");if("''"===g?g="'":"'"===v&&(g=xot(g)),0!==t.indexOf(g))return Is(e,NaN);t=t.slice(g.length)}}if(t.length>0&&wot.test(t))return Is(e,NaN);const h=c.map(g=>g.priority).sort((g,v)=>v-g).filter((g,v,y)=>y.indexOf(g)===v).map(g=>c.filter(v=>v.priority===g).sort((v,y)=>y.subPriority-v.subPriority)).map(g=>g[0]);let p=Tn(e);if(isNaN(p.getTime()))return Is(e,NaN);const f={};for(const g of h){if(!g.validate(p,l))return Is(e,NaN);const v=g.set(p,f,l);Array.isArray(v)?(p=v[0],Object.assign(f,v[1])):p=v}return Is(e,p)}function xot(t){return t.match(vot)[1].replace(yot,"'")}function Eot(t,n){if(1&t){const e=se();m(0,"button",18),P("click",function(){const s=B(e).$implicit,r=E().index;return V(E(2).setLocation(r,s.id))}),m(1,"div",19)(2,"app-icon",12),S(3),_(),m(4,"div",20),S(5),_()()()}if(2&t){const e=n.$implicit;b(3),Ye(e.icon),b(2),Ye(e.name)}}function Tot(t,n){1&t&&q(0,"div",21)}function Iot(t,n){if(1&t&&(m(0,"div",10)(1,"div",11)(2,"app-icon",12),S(3),_()(),m(4,"div",13)(5,"button",14)(6,"div"),S(7),_(),m(8,"app-icon"),S(9,"expand_more"),_()(),m(10,"mat-menu",null,1),O(12,Eot,6,2,"button",15),_(),m(13,"div",16),S(14),H(15,"date"),H(16,"date"),_()(),O(17,Tot,1,0,"div",17),_()),2&t){const e=n.$implicit,i=n.index,s=xt(11),r=E(2);Oe("opacity-30",r.now>r.timeFrom(e.end_time)),b(),Oe("bg-base-200",r.now<r.timeFrom(e.start_time)||r.now>r.timeFrom(e.end_time))("bg-info",r.now>=r.timeFrom(e.start_time)&&r.now<=r.timeFrom(e.end_time))("text-info-content",r.now>=r.timeFrom(e.start_time)&&r.now<=r.timeFrom(e.end_time)),b(2),Ye(r.location_icon(r.timeFrom(e.start_time))),b(2),C("matMenuTriggerFor",s),b(2),K(" ",r.location(r.timeFrom(e.start_time))," "),b(5),C("ngForOf",r.locations),b(2),Os(" ",At(15,15,r.timeFrom(e.start_time),"shortTime")," \u2013 ",At(16,18,r.timeFrom(e.end_time),"shortTime")," "),b(3),C("ngIf",i>0)}}function kot(t,n){if(1&t&&(m(0,"div",8),O(1,Iot,18,21,"div",9),_()),2&t){const e=E();b(),C("ngForOf",null==e.active_preference?null:e.active_preference.blocks)}}function Aot(t,n){1&t&&(m(0,"div",22)(1,"app-icon",23),S(2,"event_busy"),_(),m(3,"p",24),S(4,"No work location for today."),_(),m(5,"p",24),S(6," Click the edit button on the top right to edit your work location preferences. "),_()())}let cme=(()=>{class t{get active_preference(){const e=Us(new Date,"yyyy-MM-dd");return this.overrides[e]?this.overrides[e]:this.settings.find(i=>i.day_of_week===(new Date).getDay())}get now(){return Gl(Date.now()).getTime()}constructor(e){this._dialog=e,this.locations=[{id:"wfo",name:"Office",icon:"business"},{id:"wfh",name:"Home",icon:"home"},{id:"aol",name:"Leave",icon:"event_busy"}]}ngOnInit(){const e=Qt();this.settings=e.work_preferences,this.overrides=e.work_overrides}location_icon(e){return Qt().location_icon(e+6e4)}location(e){return Qt().location_name_time(e+6e4)}timeFrom(e){return Gl(qu(new Date,{hours:Math.floor(e),minutes:60*e%60,seconds:0,milliseconds:0})).getTime()}editSettings(){this._dialog.open(kR)}setLocation(e,i){var s=this;return z(function*(){const r=Qt(),o=s.active_preference,a=Us(Date.now(),"yyyy-MM-dd"),l={...r.work_overrides,[a]:{...o,blocks:[...o.blocks.slice(0,e),{...o.blocks[e],location:i},...o.blocks.slice(e+1)]}};for(const c in l){const u=Sot(c,"yyyy-MM-dd",new Date);(!l[c].blocks.length||gl(u,Ir(Ei(Date.now()),-1)))&&delete l[c]}s.overrides=l,yield Sde(r.id,{...r,work_overrides:l}).toPromise(),ohe()})()}static#e=this.\u0275fac=function(i){return new(i||t)(I(Tr))};static#t=this.\u0275cmp=Se({type:t,selectors:[["work-location-tooltip"]],decls:13,vars:6,consts:[["empty_state",""],["menu","matMenu"],[1,"flex","flex-col","w-[18.5rem]","rounded","bg-base-100","shadow","relative","-top-12","-right-1","overflow-hidden"],[1,"flex","items-center","justify-between","px-2"],[1,"px-2","py-4","font-medium"],["icon","","matRipple","","matTooltip","Edit Work Location Preferences","matTooltipPosition","left",1,"hover:bg-base-200",3,"click"],[1,"px-4","font-medium","text-sm"],["class","pb-2",4,"ngIf","ngIfElse"],[1,"pb-2"],["class","relative flex items-center px-4 py-2",3,"opacity-30",4,"ngFor","ngForOf"],[1,"relative","flex","items-center","px-4","py-2"],[1,"rounded-full","h-10","w-10","flex","items-center","justify-center","bg-base-200","z-20"],[1,"text-2xl"],[1,"flex-1","ml-2"],["matRipple","",1,"font-medium","flex","items-center","space-x-2","rounded","hover:bg-base-200","px-2","py-1",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"text-xs","opacity-60","px-2"],["class","absolute -top-2 left-7 h-4 w-0 border-l-2 border-dashed border-base-200 -translate-x-px",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"flex","items-center","space-x-2"],[1,"pr-8"],[1,"absolute","-top-2","left-7","h-4","w-0","border-l-2","border-dashed","border-base-200","-translate-x-px"],[1,"flex","flex-col","items-center","justify-center","p-8","space-y-2","w-full","opacity-30"],[1,"text-6xl"],[1,"text-center","text-sm"]],template:function(i,s){if(1&i){const r=se();m(0,"div",2)(1,"div",3)(2,"h3",4),S(3,"Work Location"),_(),m(4,"button",5),P("click",function(){return B(r),V(s.editSettings())}),m(5,"app-icon"),S(6,"edit_note"),_()()(),m(7,"h3",6),S(8),H(9,"date"),_(),O(10,kot,2,1,"div",7),_(),O(11,Aot,7,0,"ng-template",null,0,ln)}if(2&i){const r=xt(12);b(8),K(" ",At(9,3,s.now,"fullDate")," "),b(2),C("ngIf",null==s.active_preference||null==s.active_preference.blocks?null:s.active_preference.blocks.length)("ngIfElse",r)}},dependencies:[on,mt,Zd,Yh,Pb,Tt,nu,St,fs]})}return t})();function Mot(t,n){if(1&t&&(m(0,"div",31)(1,"button",17)(2,"div",18)(3,"div",19)(4,"app-icon"),S(5,"layers"),_()(),m(6,"div",32),S(7),H(8,"async"),H(9,"async"),_(),m(10,"app-icon",21),S(11," chevron_right "),_()()()()),2&t){let e;const i=E();C("content",i.region_select),b(7),K(" ",(null==(e=ne(8,2,i.region))?null:e.display_name)||(null==(e=ne(9,4,i.region))?null:e.name)," ")}}function Not(t,n){if(1&t&&(m(0,"div",31)(1,"button",17)(2,"div",18)(3,"div",19)(4,"app-icon"),S(5,"business"),_()(),m(6,"div",32),S(7),H(8,"async"),H(9,"async"),_(),m(10,"app-icon",21),S(11," chevron_right "),_()()()()),2&t){let e;const i=E();C("content",i.building_select),b(7),K(" ",(null==(e=ne(8,2,i.building))?null:e.display_name)||(null==(e=ne(9,4,i.building))?null:e.name)," ")}}function Oot(t,n){1&t&&(m(0,"div",16)(1,"button",17)(2,"div",18)(3,"div",19)(4,"app-icon"),S(5,"help"),_()(),m(6,"div",20),oe(7,4),_(),m(8,"app-icon",21),S(9,"chevron_right"),_()()()()),2&t&&C("content",E().help_tooltip)}function Rot(t,n){1&t&&(m(0,"div",16)(1,"button",17)(2,"div",18)(3,"div",19)(4,"app-icon"),S(5,"share_location"),_()(),m(6,"div",20),oe(7,5),_(),m(8,"app-icon",21),S(9,"chevron_right"),_()()()()),2&t&&C("content",E().work_location_tooltip)}function Fot(t,n){if(1&t&&(m(0,"div",16)(1,"button",17)(2,"div",18)(3,"div",19)(4,"app-icon"),S(5,"desk"),_()(),m(6,"div",20),oe(7,6),_(),m(8,"app-icon",21),S(9,"chevron_right"),_()()()()),2&t){const e=E(),i=xt(24);Oe("!border-b",!(null!=e.locales&&e.locales.length)),C("content",i)}}function Lot(t,n){1&t&&q(0,"desk-height-presets")}function Pot(t,n){1&t&&(m(0,"div",33)(1,"button",17)(2,"div",18)(3,"div",19)(4,"app-icon"),S(5,"mode_night"),_()(),m(6,"div",20),oe(7,7),H(8,"translate"),H(9,"translate"),_(),m(10,"app-icon",21),S(11,"chevron_right"),_()()()()),2&t&&(C("content",E().language_tooltip),b(9),Vn(ne(8,3,"COMMON.LANGUAGE_LABEL"))(ne(9,5,"COMMON.LANGUAGE")),Gn(7))}function $ot(t,n){if(1&t){const e=se();m(0,"button",34),P("click",function(){return B(e),V(E().newSupportTicket())}),m(1,"div",18)(2,"div",19)(3,"app-icon"),S(4,"support_agent"),_()(),m(5,"div",20),oe(6,8),_()()()}}function Bot(t,n){if(1&t){const e=se();m(0,"button",35),P("click",function(){return B(e),V(E().reloadPage())}),S(1," New Version "),_()}}let ume=(()=>{class t{get user(){return Qt()}get groups(){return this.user.groups.join("\n")}get version(){return qO}get features(){return this._settings.get("app.features")||[]}get locales(){return this._settings.get("app.locales")||[]}get desk_height(){return this._settings.get("app.desks.height_enabled")}get use_region(){return this._settings.get("app.use_region")}get disable_building_select(){return this._settings.get("app.disable_building_select")}get has_new_version(){return mpe()}constructor(e,i,s){this._settings=e,this._org=i,this._dialog=s,this.building=this._org.active_building,this.region=this._org.active_region,this.regions=this._org.region_list,this.region_select=sme,this.building_select=tme,this.help_tooltip=nme,this.accessibility_tooltip=eme,this.language_tooltip=ime,this.work_location_tooltip=cme}logout(){!function OXe(){const t=()=>{for(let e=0;e<_r.length;e++){const i=_r.key(e);i&&i.indexOf(gr)>=0&&_r.removeItem(i)}const n=fa?fa.logout_url:"/logout";setTimeout(()=>{var e;return null===(e=window.location)||void 0===e?void 0:e.assign(n)},300),Sf.next(!1)};(function UXe(){return Ri.revoke_token||(Ri.revoke_token=new Promise((t,n)=>{an("Auth","Revoking token...");const i=s=>{an("Auth","Error revoking token.",s),n(s),delete Ri.revoke_token};hO(`${Ji.token_uri||"/auth/token"}?token=${Ho()}`,{method:"POST"}).subscribe(s=>{if(!s.ok)return i(s);an("Auth","Successfully revoked token."),Kb.next(""),PE.next(""),_r.removeItem(`${gr}_access_token`),_r.removeItem(`${gr}_refresh_token`),t(),delete Ri.revoke_token},i)})),Ri.revoke_token})().then(t,t)}()}reloadPage(){location.reload()}newSupportTicket(){this._settings.get("app.external_support_url")?window.open(this._settings.get("app.external_support_url"),"_blank"):this._dialog.open(P7)}openWfhModal(){this._dialog.open(kR)}viewChangelog(){var e=this;return z(function*(){const i=yield(yield fetch("https://raw.githubusercontent.com/PlaceOS/user-interfaces/develop/CHANGELOG.md")).text();e._dialog.open(Nfe,{data:{changelog:i}})})()}saveSetting(e,i){this._settings.saveUserSetting(e,i)}formatLabel(e){return`${e.toFixed(1)}cm`}static#e=this.\u0275fac=function(i){return new(i||t)(I(nn),I(Sn),I(Tr))};static#t=this.\u0275cmp=Se({type:t,selectors:[["user-controls"]],decls:41,vars:26,consts:()=>{let e,i,s,r,o,a,l,c;return e=$localize`:␟d22b673a92b43eabbdebd80b1539a553703c84f6␟6572705143012462182:Display & Accessibility`,i=$localize`:␟a9bc2f36435d7979f179c544151bca38e4fe20cc␟3324363634810141643: Sign Out `,s=$localize`:␟0b1694897c27c2a5bbdf582a7f7d2bac898f3505␟6267525301152196009:Version: `,r=$localize`:␟258586f2141d5b6c98ef28c38ac6f55a81a301b2␟7393197899734735120:Help & Support`,o=$localize`:␟8ebf03c6dd7c3ad24dcc9a0f64ffad0e9588ac2e␟8897714476038526431:Work Location`,a=$localize`:␟6f3ddfacb6cc158043b77530f74c15dc406019fe␟8687640110841202898:Desk Settings`,l=$localize`:␟5a0db2e7be57ba081264f141f3ee4a8b683f1f6e␟6210988327734808594: ${"\ufffd0\ufffd"}:INTERPOLATION:: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,c=$localize`:␟b862b54c42ded9ebb47260f60b0f75985c5fab18␟270482714535552546:Raise a support ticket`,[["desk_height_tooltip",""],e,i,s,r,o,a,l,c,[1,"rounded","bg-base-100","shadow","mt-1","flex","flex-col","relative","divide-y","divide-base-200"],["avatar","",1,"flex","flex-col","items-center","p-2","w-[18rem]"],[1,"text-2xl",3,"user","matTooltip"],[1,""],[1,"text-xs","opacity-60","truncate"],["customTooltip","","class","relative",3,"content",4,"ngIf"],["customTooltip","",3,"content",4,"ngIf"],["customTooltip","",3,"content"],["btn","","matRipple","",1,"clear","w-full","text-left","h-[3.5rem]"],[1,"w-full","flex","items-center","space-x-2"],[1,"flex","items-center","justify-center","rounded-full","w-8","h-8","bg-base-200"],[1,"flex-1"],[1,"opacity-60","text-2xl"],["customTooltip","",3,"content","!border-b",4,"ngIf"],["customTooltip","","class","!border-b",3,"content",4,"ngIf"],["btn","","matRipple","","class","clear w-full text-left h-[3.5rem]",3,"click",4,"ngIf"],[1,"flex","flex-col","items-center","p-4"],[1,"flex","items-center","justify-center","space-x-2","mb-4"],["btn","","matRipple","",1,"inverse",3,"click"],["btn","","matRipple","",3,"click",4,"ngIf"],[1,"text-xs","opacity-60","w-full"],[1,"underline","p-0","m-0","bg-none","border-none","text-xs",3,"click"],["customTooltip","",1,"relative",3,"content"],[1,"flex-1","truncate","w-px"],["customTooltip","",1,"!border-b",3,"content"],["btn","","matRipple","",1,"clear","w-full","text-left","h-[3.5rem]",3,"click"],["btn","","matRipple","",3,"click"]]},template:function(i,s){if(1&i){const r=se();m(0,"div",9)(1,"div",10),q(2,"a-user-avatar",11),m(3,"div",12),S(4),_(),m(5,"div",13),S(6),_()(),O(7,Mot,12,6,"div",14),H(8,"async"),O(9,Not,12,6,"div",14)(10,Oot,10,1,"div",15)(11,Rot,10,1,"div",15),m(12,"div",16)(13,"button",17)(14,"div",18)(15,"div",19)(16,"app-icon"),S(17,"mode_night"),_()(),m(18,"div",20),oe(19,1),_(),m(20,"app-icon",21),S(21,"chevron_right"),_()()()(),O(22,Fot,10,3,"div",22)(23,Lot,1,0,"ng-template",null,0,ln)(25,Pot,12,7,"div",23)(26,$ot,7,0,"button",24),m(27,"div",25)(28,"div",26)(29,"button",27),P("click",function(){return B(r),V(s.logout())}),oe(30,2),_(),O(31,Bot,2,0,"button",28),_(),m(32,"div",29),Wt(33),oe(34,3),qt(),m(35,"button",30),P("click",function(){return B(r),V(s.viewChangelog())}),S(36),_()(),m(37,"div",29),S(38),H(39,"date"),H(40,"date"),_()()()}2&i&&(b(2),C("user",s.user)("matTooltip",s.groups),b(2),Ye(null==s.user?null:s.user.name),b(2),Ye(null==s.user?null:s.user.email),b(),C("ngIf",ne(8,18,s.regions).length),b(2),C("ngIf",!s.disable_building_select&&!s.use_region),b(),C("ngIf",s.features.includes("help")),b(),C("ngIf",s.features.includes("wfh")),b(),Oe("!border-b",!(null!=s.locales&&s.locales.length&&s.desk_height)),C("content",s.accessibility_tooltip),b(10),C("ngIf",s.desk_height),b(3),C("ngIf",null==s.locales?null:s.locales.length),b(),C("ngIf",s.features.includes("support-ticket")),b(5),C("ngIf",s.has_new_version),b(5),K(" ",s.version.hash," "),b(2),Os(" ",At(39,20,s.version.time,"longDate")," (",At(40,23,s.version.time,"shortTime"),") "))}})}return t})();const V7=new Map;let jl=(()=>{class t extends hn{constructor(e){super(),this._image_el=e}ngOnChanges(e){e.source&&this.source&&this._loadImage()}_loadImage(){var e=this;return z(function*(){if(!e._image_el||!mc())return e.timeout("load",()=>e._loadImage(),300);if(!e.source.includes("/api/engine/v2/uploads"))return void(e._image_el.nativeElement.src=e.source);if(V7.has(e.source))return void(e._image_el.nativeElement.src=V7.get(e.source));const i=Ho();document.cookie=`${"x-api-key"===i?"api-key="+encodeURIComponent(Jm()):"bearer_token="+encodeURIComponent(i)};max-age=30;path=/api/engine/v2/uploads;samesite=strict;${"https:"===location.protocol?"secure;":""}`;let s=null;try{s=yield fetch(e.source).catch(a=>null)}catch{}if(!s||!s.ok)return void console.info("Failed to load image:",e.source);const r=yield s.blob(),o=URL.createObjectURL(r);V7.set(e.source,o),e._image_el.nativeElement.src=o})()}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt))};static#t=this.\u0275dir=He({type:t,selectors:[["img","auth",""],["video","auth",""]],inputs:{source:"source"},features:[Ze,Rn]})}return t})(),dme=(()=>{class t extends hn{get connected(){return!!this._socket}constructor(e,i){super(),this._org=e,this._settings=i,this._binding=new at(""),this._chat_messages=new at([]),this._progress_message=new at(null),this._chat_system=Vt([this._org.active_building,this._binding]).pipe(Zt(([s])=>!!s),me(([s,r])=>r||this._org.binding("chat_room"))),this._chat_id="",this.chat_hint=this._chat_system.pipe(Zt(s=>!!s),Kt(s=>{const o=Qr(s,"LLM").binding("user_hint");return this.subscription("binding:LLM:user_hint",o.bind()),o.listen()}),zn(1)),this._change=new at(0),this._chat_pipe=Vt([this._chat_system,this._change]).pipe(Kt(([s])=>{const r="x-api-key"!==Ho()?`bearer_token=${encodeURIComponent(Ho())}`:`x-api-key=${Jm()}`,o=`ws${location.origin.replace("http","")}/api/engine/v2/chatgpt/chat/${encodeURIComponent(s)}?${r}${this._chat_id?"&resume="+encodeURIComponent(this._chat_id):""}`;return this._socket=Tde({url:o,serializer:a=>"object"==typeof a?JSON.stringify(a):a,deserializer:a=>{let l=a.data;try{l=JSON.parse(a.data)}catch{}return l}}),this.subscription("chat-ws",this._socket.subscribe(a=>this._onMessage(a),a=>{ji("CHAT","Connection error:",[a],"error"),this._cleanup()},()=>this._cleanup())),this._socket}),zn(1)),this.messages=this._chat_messages.asObservable(),this.progress=this._progress_message.asObservable()}setBinding(e){this._binding.next(e)}startChat(){if(!this._socket)return this._change.next(Date.now()),ji("CHAT","Starting chat connection."),this.subscription("chat",this._chat_pipe.subscribe()),()=>this.endChat()}endChat(){ji("CHAT","Dropping chat connection."),this._socket?.complete(),this._cleanup()}close(){this.endChat(),this._chat_id="",this._chat_messages.next([])}sendMessage(e){e&&(this._onMessage({chat_id:"",message:e,user_id:Qt().id}),this._socket?.next(e))}_timeoutSocket(e=55e3){this.timeout("socket",()=>{const i=this._chat_messages.getValue();if(i.length>0&&"assistant"!==i[i.length-1].user_id)return this._timeoutSocket(e);this.endChat()},e)}_cleanup(){this._socket=null,this.unsubWith("chat")}_onMessage(e){e.chat_id&&(this._chat_id=e.chat_id),"progress"===e.type?(this._progress_message.next({id:`msg-${iv(6)}`,chat_id:e.chat_id,message:e.message,content:Mfe(e.message,{async:!1}),user_id:e.user_id||"assistant",function:e.function,timestamp:Date.now()}),"task_complete"===e.function&&this._settings.post("CHAT:task_complete",e.task_id)):(this._chat_messages.next([...this._chat_messages.getValue(),{id:`msg-${iv(6)}`,chat_id:e.chat_id,message:e.message,content:Mfe(e.message,{async:!1}),user_id:e.user_id||"assistant",timestamp:Date.now()}]),"response"===e.type&&this._progress_message.next(null)),this._timeoutSocket()}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Sn),ae(nn))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function If(t,n,e){const i=function tfe(t,n){return+Tn(t)-+Tn(n)}(t,n)/rz;return m7(e?.roundingMethod)(i)}let z7=(()=>{class t{transform(e){let s=If(Date.now(),e);const r=s<0;if(s=Math.abs(s),s<1)return r?"Soon":"Now";if(1===s)return r?"In 1 min":"1 min";if(s<60)return r?`In ${s} min`:`${s} min`;if(s<1440){const o=Math.floor(s/60);return r?`In ${o} hour${1===o?"":"s"}`:Us(e,"H:mm")}return s<10080?(Math.floor(s/1440),Us(e,r?"dd MMM yyyy":"E H:mm")):s<525600?(Math.floor(s/1440),Us(e,r?"dd MMM yyyy":"LLL d H:mm")):"Just now"}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275pipe=nr({name:"dateFrom",type:t,pure:!0})}return t})();const jot=["input"],Hot=["container"];function Wot(t,n){if(1&t&&(m(0,"div",21),S(1),H(2,"async"),_()),2&t){const e=E(3);b(),K(" ",ne(2,1,e.hint)," ")}}function qot(t,n){1&t&&(m(0,"div",27),S(1," Assistant "),_())}function Kot(t,n){if(1&t){const e=se();m(0,"div",22),H(1,"async"),P("click",function(){const s=B(e).$implicit,r=E(3);return V(r.show_time[s.id]=!r.show_time[s.id])}),m(2,"div",23),O(3,qot,2,0,"div",24),m(4,"div",25),S(5),H(6,"dateFrom"),_()(),q(7,"div",26),H(8,"sanitize"),_()}if(2&t){const e=n.$implicit,i=E(3);Oe("pr-4",e.user_id!==i.user.id)("pl-4",e.user_id===i.user.id)("items-left",e.user_id!==i.user.id)("items-end",e.user_id===i.user.id)("waiting-margin",ne(1,13,i.waiting)),b(3),C("ngIf",e.user_id!==i.user.id),b(2),K(" ",ne(6,15,e.timestamp+i.offset)," "),b(2),C("innerHTML",ne(8,17,e.content),Nu)}}function Xot(t,n){1&t&&(q(0,"div",35),H(1,"async"),H(2,"sanitize")),2&t&&C("innerHTML",ne(2,3,ne(1,1,E(4).progress).content),Nu)}function Yot(t,n){if(1&t){const e=se();m(0,"div",28)(1,"button",29),P("click",function(){B(e);const s=E(3);return V(s.show_info=!s.show_info)}),m(2,"div",23)(3,"app-icon",30),S(4),H(5,"async"),_(),m(6,"p",31),S(7),H(8,"async"),H(9,"async"),_()(),m(10,"div",32),q(11,"div",33),O(12,Xot,3,5,"div",34),_()()()}if(2&t){const e=E(3);b(4),Ye(e.icons[ne(5,3,e.progress).function]||"info"),b(3),K(" ",ne(8,5,e.progress).message||ne(9,7,e.progress).function," "),b(5),C("ngIf",e.show_info)}}function Zot(t,n){1&t&&(m(0,"div",36),q(1,"div",37)(2,"div",38)(3,"div",39),m(4,"span",40),S(5,"Waiting for reply..."),_()()),2&t&&Hn("bottom",E(3).height+8+"px")}function Qot(t,n){if(1&t){const e=se();m(0,"div",6)(1,"div",7)(2,"h3",8),S(3,"Virtual Assistant"),_(),m(4,"button",9),P("click",function(){return B(e),V(E(2).toggleChat())}),m(5,"app-icon"),S(6,"close"),_()()(),m(7,"div",10,0)(9,"div",11)(10,"app-icon",12),S(11,"forum"),_(),m(12,"p",13),S(13),q(14,"br"),S(15," Welcome to the virtual assistant. "),_()(),O(16,Wot,3,3,"div",14),H(17,"async"),O(18,Kot,9,19,"div",15),H(19,"async"),O(20,Yot,13,9,"div",16),H(21,"async"),_(),O(22,Zot,6,2,"div",17),H(23,"async"),m(24,"div",18)(25,"textarea",19,1),ii("ngModelChange",function(s){B(e);const r=E(2);return jn(r.message,s)||(r.message=s),V(s)}),P("ngModelChange",function(){return B(e),V(E(2).resizeInput())})("keyup.enter",function(){return B(e),V(E(2).sendMessage())}),_(),m(27,"button",20),P("click",function(){return B(e),V(E(2).sendMessage())}),m(28,"app-icon"),S(29,"send"),_()()()()}if(2&t){const e=E(2);b(13),K(" Hi ",e.user.name,". "),b(3),C("ngIf",ne(17,9,e.hint)),b(2),C("ngForOf",ne(19,11,e.messages)),b(2),C("ngIf",ne(21,13,e.progress)),b(2),C("ngIf",ne(23,15,e.waiting)),b(3),Hn("height",e.height+"px"),ni("ngModel",e.message),b(2),C("disabled",!e.message)}}function Jot(t,n){if(1&t){const e=se();m(0,"div",3)(1,"button",4),P("click",function(){return B(e),V(E().toggleChat())}),m(2,"app-icon"),S(3,"chat"),_()(),O(4,Qot,30,17,"div",5),_()}if(2&t){const e=E();b(4),C("ngIf",e.show)}}let hme=(()=>{class t extends hn{get can_show(){return this._settings.get("app.chat.enabled")}toggleChat(){this.show=!this.show,this.show||this._chat.close()}constructor(e,i){super(),this._settings=e,this._chat=i,this.show=!1,this.show_info=!1,this.message="",this.show_time={},this.offset=0,this.height=56,this.icons={list_function_schemas:"help",call_function:"settings",task_complete:"check_circle"},this.hint=this._chat.chat_hint,this.messages=this._chat.messages,this.progress=this._chat.progress,this.waiting=this._chat.messages.pipe(me(s=>0!==s.length&&s[s.length-1]?.user_id===this.user?.id))}ngOnInit(){this.subscription("current_user",_T.subscribe(e=>this.user=e)),this.subscription("hint",this.hint.subscribe(()=>this.scrollToBottom(500))),this.subscription("messages",this.messages.subscribe(()=>this.scrollToBottom())),this.subscription("progress",this.progress.subscribe(e=>e?this.scrollToBottom():this.show_info=!1)),this.interval("offset",()=>this.offset=this.offset?0:1,2e4)}resizeInput(){this.height=Math.max(this._input_el.nativeElement.scrollHeight,56)}sendMessage(){if(this.message){if(!this._chat.connected)return this._chat.startChat(),this.timeout("send",()=>this.sendMessage(),100);this._chat.sendMessage(this.message),this.message="",this.height=56,setTimeout(()=>this._input_el.nativeElement.focus(),100)}}scrollToBottom(e=300){this.timeout("scroll",()=>{this._container_el?.nativeElement&&(this._container_el.nativeElement.scrollTop=this._container_el.nativeElement.scrollHeight)},e)}static#e=this.\u0275fac=function(i){return new(i||t)(I(nn),I(dme))};static#t=this.\u0275cmp=Se({type:t,selectors:[["global-chat"]],viewQuery:function(i,s){if(1&i&&(Gt(jot,5),Gt(Hot,5)),2&i){let r;nt(r=it())&&(s._input_el=r.first),nt(r=it())&&(s._container_el=r.first)}},features:[Ze],decls:1,vars:1,consts:[["container",""],["input",""],["class","absolute bottom-0 right-0 p-2",4,"ngIf"],[1,"absolute","bottom-0","right-0","p-2"],["icon","","matRipple","",1,"bg-base-100","rounded-full","border","border-base-300","shadow",3,"click"],["class","absolute bottom-2 right-2 bg-base-200 rounded-xl border border-base-300 shadow overflow-hidden w-[40rem] max-w-[calc(100vw-1rem)]",4,"ngIf"],[1,"absolute","bottom-2","right-2","bg-base-200","rounded-xl","border","border-base-300","shadow","overflow-hidden","w-[40rem]","max-w-[calc(100vw-1rem)]"],[1,"flex","items-center","justify-between","bg-base-100","w-full","p-2","border-b","border-base-300"],[1,"pl-4"],["icon","","matRipple","",3,"click"],[1,"h-[32rem]","max-h-[60vh]","overflow-auto"],[1,"w-full","flex","flex-col","items-center","justify-center","p-8","space-y-2"],[1,"text-8xl"],[1,"text-center","text-xl"],["class","m-2 bg-base-100 border-base-300 p-4 rounded shadow text-sm",4,"ngIf"],["class","flex flex-col m-2",3,"pr-4","pl-4","items-left","items-end","waiting-margin","click",4,"ngFor","ngForOf"],["class","p-4",4,"ngIf"],["class","absolute right-2 flex items-center justify-center space-x-2 p-1 rounded-2xl bg-base-100 border border-neutral",3,"bottom",4,"ngIf"],[1,"flex","bg-base-100","focus-within:outline","outline-info","border-t","border-base-300","max-h-[10rem]","overflow-y-auto"],["placeholder","New message...",1,"p-4","flex-1","w-1/2","focus:outline-none","resize-none","overflow-hidden",3,"ngModelChange","keyup.enter","ngModel"],["icon","","matRipple","",1,"mt-2",3,"click","disabled"],[1,"m-2","bg-base-100","border-base-300","p-4","rounded","shadow","text-sm"],[1,"flex","flex-col","m-2",3,"click"],[1,"flex","items-center","space-x-2"],["class","text-sm text-base-content opacity-60 px-2 py-1",4,"ngIf"],[1,"text-xs","text-base-content","opacity-40","px-2","py-1"],["message","",1,"bg-base-100","border-base-300","p-4","rounded","shadow","text-sm","markdown","selectable",3,"innerHTML"],[1,"text-sm","text-base-content","opacity-60","px-2","py-1"],[1,"p-4"],[1,"block","p-2","rounded","border-base-300","bg-info","text-info-content","w-full",3,"click"],[1,"text-2xl"],[1,"text-sm"],[1,"relative","overflow-hidden","w-full","rounded"],[1,"absolute","inset-0","bg-base-100","opacity-10"],["class","text-xs text-mono text-left p-2 break-words",3,"innerHTML",4,"ngIf"],[1,"text-xs","text-mono","text-left","p-2","break-words",3,"innerHTML"],[1,"absolute","right-2","flex","items-center","justify-center","space-x-2","p-1","rounded-2xl","bg-base-100","border","border-neutral"],[1,"h-2","w-2","bg-neutral","rounded-full","animate-bounce"],[1,"h-2","w-2","bg-neutral","rounded-full","animate-bounce","anim-delay-1"],[1,"h-2","w-2","bg-neutral","rounded-full","animate-bounce","anim-delay-2"],[1,"sr-only"]],template:function(i,s){1&i&&O(0,Jot,5,1,"div",2),2&i&&C("ngIf",s.can_show)},dependencies:[on,mt,Yr,pi,Vi,Tt,St,xi,ih,z7],styles:[".anim-delay-1[_ngcontent-%COMP%]{animation-delay:.25s}.anim-delay-2[_ngcontent-%COMP%]{animation-delay:.5s}.waiting-margin[_ngcontent-%COMP%]:last-child{padding-bottom:2rem}"]})}return t})();const eat=["*"];function tat(t,n){1&t&&(Wt(0),S(1," check_circle "),qt())}function nat(t,n){1&t&&(Wt(0),S(1,"cancel"),qt())}function iat(t,n){1&t&&(Wt(0),S(1,"block"),qt())}function sat(t,n){1&t&&(Wt(0),S(1,"info"),qt())}function rat(t,n){1&t&&(Wt(0),S(1,"warning"),qt())}let qT=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Se({type:t,selectors:[["status-pill"]],inputs:{status:"status"},ngContentSelectors:eat,decls:10,vars:31,consts:[[1,"flex","items-center","bg-opacity-30","rounded-full","px-2","py-1","text-base","space-x-2","font-medium","text-black"],[1,"rounded-full","h-5","w-5","flex","items-center","justify-center"],[1,"text-2xl",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(i,s){1&i&&(Si(),m(0,"div",0)(1,"div",1)(2,"app-icon",2),O(3,tat,2,0,"ng-container",3)(4,nat,2,0,"ng-container",3)(5,iat,2,0,"ng-container",3)(6,sat,2,0,"ng-container",3)(7,rat,2,0,"ng-container",4),_()(),m(8,"div"),en(9),_()()),2&i&&(Oe("bg-success-light","success"===s.status)("bg-warning-light","warning"===s.status)("bg-error-light","error"===s.status)("bg-info-light","info"===s.status)("bg-base-200","neutral"===s.status),b(),Oe("text-success","success"===s.status)("text-warning","warning"===s.status)("text-error","error"===s.status)("text-info","info"===s.status)("text-base-content","neutral"===s.status)("opacity-40","neutral"===s.status),b(),C("ngSwitch",s.status),b(),C("ngSwitchCase","success"),b(),C("ngSwitchCase","error"),b(),C("ngSwitchCase","neutral"),b(),C("ngSwitchCase","info"),b(2),Oe("opacity-40","neutral"===s.status)("text-base-content","neutral"===s.status))},dependencies:[Dm,V1,z1,St]})}return t})(),fme=(()=>{class t{constructor(e){this.url=e}static#e=this.\u0275fac=function(i){return new(i||t)(I(or))};static#t=this.\u0275cmp=Se({type:t,selectors:[["image-viewer"]],decls:5,vars:1,consts:[[1,"h-screen","w-screen","bg-base-200"],[1,"object-contain","object-center","w-full","h-full",3,"src"],["icon","","matRipple","","mat-dialog-close","",1,"absolute","top-1","right-1","bg-base-100"]],template:function(i,s){1&i&&(m(0,"div",0),q(1,"img",1),m(2,"button",2)(3,"app-icon"),S(4,"close"),_()()()),2&i&&(b(),C("src",s.url,qa))},dependencies:[Tt,Ls,St]})}return t})();function Nat(t,n){1&t&&(m(0,"div",16),S(1," Before you can set a desk height, presets must be set "),_())}function Oat(t,n){if(1&t){const e=se();m(0,"button",17),P("click",function(){return B(e),V(E().onClose())}),S(1," Save Presets "),_()}}"0123456789".split(""),"0123456789.".split(""),"abcdefghijklmnopqrstuvwxyz".split(""),"abcdefghijklmnopqrstuvwxyz0123456789".split("");let U7=(()=>{class t{constructor(e){this._settings=e,this.show_close=!1,this.close=new Ae,this.not_set=!1,this.desk_sitting_height=71,this.desk_standing_height=101}ngOnInit(){this.not_set=!this._settings.get("desk_sitting_height")&&!this._settings.get("desk_standing_height"),this.desk_sitting_height=this._settings.get("desk_sitting_height")||71,this.desk_standing_height=this._settings.get("desk_standing_height")||101}onClose(){this.saveSetting("desk_sitting_height",this.desk_sitting_height),this.saveSetting("desk_standing_height",this.desk_standing_height),this.close.emit()}formatLabel(e){return`${e.toFixed(1)}cm`}saveSetting(e,i){this._settings.saveUserSetting(e,i)}static#e=this.\u0275fac=function(i){return new(i||t)(I(nn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["desk-height-presets"]],inputs:{show_close:"show_close"},outputs:{close:"close"},decls:24,vars:8,consts:()=>{let e,i,s;return e=$localize`:␟4a9ae1d6024ac45fcd744f2b33fcc1078684204c␟1586279176802880074:Desk Height Presets`,i=$localize`:␟76aa055a2b4d990ee2773112c433cbca362d5cf3␟2517995078699734025: Desk height presets allow you to store and recall your preferred desk height when checking into a booked desk that supports height adjustment. `,s=$localize`:␟7cdb9f15155eef16ce00f29f1d835dc2360f266f␟3844660402650950250: Set your desk height for the best experience. `,[e,i,s,[1,"relative","p-4","bg-base-100","rounded","shadow","w-[20rem]"],[1,"text-lg","mb-2"],[1,"text-xs","opacity-60","mb-4"],["class","text-xs mb-4 -mx-2 p-2 rounded bg-warning text-warning-content",4,"ngIf"],[1,"flex","flex-col","mt-2"],[1,"flex","items-center","space-x-2"],["min","60","max","80","step","0.5","discrete","",1,"flex-1",3,"displayWith"],["matSliderThumb","",3,"ngModelChange","ngModel"],[1,"text-sm","w-12","text-right"],[1,"flex","items-center","space-x-2","mr-2"],["min","90","max","120","step","0.5","discrete","",1,"flex-1",3,"displayWith"],[1,"text-sm","w-12","text-right","mr-2"],["btn","","matRipple","","class","w-full mt-2",3,"click",4,"ngIf"],[1,"text-xs","mb-4","-mx-2","p-2","rounded","bg-warning","text-warning-content"],["btn","","matRipple","",1,"w-full","mt-2",3,"click"]]},template:function(i,s){1&i&&(m(0,"div",3)(1,"div",4),oe(2,0),_(),m(3,"div",5),oe(4,1),_(),O(5,Nat,2,0,"div",6),m(6,"div",5),oe(7,2),_(),m(8,"div",7)(9,"label"),S(10,"Sitting Height"),_(),m(11,"div",8)(12,"mat-slider",9)(13,"input",10),ii("ngModelChange",function(o){return jn(s.desk_sitting_height,o)||(s.desk_sitting_height=o),o}),P("ngModelChange",function(o){return s.saveSetting("desk_sitting_height",o)}),_()(),m(14,"div",11),S(15),_()(),m(16,"label"),S(17,"Standing Height"),_(),m(18,"div",12)(19,"mat-slider",13)(20,"input",10),ii("ngModelChange",function(o){return jn(s.desk_standing_height,o)||(s.desk_standing_height=o),o}),P("ngModelChange",function(o){return s.saveSetting("desk_standing_height",o)}),_()(),m(21,"div",14),S(22),_()()(),O(23,Oat,2,0,"button",15),_()),2&i&&(b(5),C("ngIf",s.not_set&&s.show_close),b(7),C("displayWith",s.formatLabel),b(),ni("ngModel",s.desk_sitting_height),b(2),K(" ",s.desk_sitting_height.toFixed(1),"cm "),b(4),C("displayWith",s.formatLabel),b(),ni("ngModel",s.desk_standing_height),b(2),K(" ",s.desk_standing_height.toFixed(1),"cm "),b(),C("ngIf",s.show_close))},dependencies:[mt,Yr,pi,Vi,Tt,ZV,RE]})}return t})();new AO;const Lat=[w0,wV,Xh,$b,Jc,w0,$b,Lb,ZN,Fb,$V,E0,PV,Sue,Aue,qh,rfe,yE,kE,I0,OE,Bue,QV,Wue];let pv=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:[{provide:Za,useValue:{}},Dre(Mre())],imports:[Ka,pf,$u,V6.forChild(),Lat,w0,wV,Xh,$b,Jc,w0,$b,Lb,ZN,Fb,$V,E0,PV,Sue,Aue,qh,rfe,yE,kE,I0,OE,Bue,QV,Wue,V6]})}return t})();Ts(l_,function(){return[mt,jl]},[]),Ts(gc,function(){return[mt,Tt,nu,St,Zfe,Qfe]},function(){return[xi]}),Ts(MT,function(){return[mt,Tt,Ls,Zs,St,gc]},[]),Ts(cv,function(){return[on,mt,Tt,St,jl]},[]),Ts(b7,function(){return[on,mt,Dm,V1,z1,Yr,pi,Vi,Tt,zGe,qGe,Jle,St,ju]},function(){return[xi,fs,ih]}),Ts(ume,function(){return[mt,Tt,nu,St,l_,ju,U7]},function(){return[xi,fs,jh]});const fv="8.28.0",cs=globalThis;function j7(t,n,e){const i=e||cs,s=i.__SENTRY__=i.__SENTRY__||{},r=s[fv]=s[fv]||{};return r[t]||(r[t]=n())}const H7="production";function uw(){return W7(cs),cs}function W7(t){const n=t.__SENTRY__=t.__SENTRY__||{};return n.version=n.version||fv,n[fv]=n[fv]||{}}const _me=Object.prototype.toString;function q7(t){switch(_me.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return kf(t,Error)}}function dw(t,n){return _me.call(t)===`[object ${n}]`}function gme(t){return dw(t,"ErrorEvent")}function bme(t){return dw(t,"DOMError")}function Ku(t){return dw(t,"String")}function K7(t){return"object"==typeof t&&null!==t&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function X7(t){return null===t||K7(t)||"object"!=typeof t&&"function"!=typeof t}function hw(t){return dw(t,"Object")}function MR(t){return typeof Event<"u"&&kf(t,Event)}function NR(t){return!(!t||!t.then||"function"!=typeof t.then)}function kf(t,n){try{return t instanceof n}catch{return!1}}function vme(t){return!("object"!=typeof t||null===t||!t.__isVue&&!t._isVue)}const pw=cs,zat=80;function Df(t,n={}){if(!t)return"<unknown>";try{let e=t;const i=5,s=[];let r=0,o=0;const a=" > ",l=a.length;let c;const u=Array.isArray(n)?n:n.keyAttrs,d=!Array.isArray(n)&&n.maxStringLength||zat;for(;e&&r++<i&&(c=Uat(e,u),!("html"===c||r>1&&o+s.length*l+c.length>=d));)s.push(c),o+=c.length,e=e.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function Uat(t,n){const e=t,i=[];if(!e||!e.tagName)return"";if(pw.HTMLElement&&e instanceof HTMLElement&&e.dataset){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}i.push(e.tagName.toLowerCase());const s=n&&n.length?n.filter(o=>e.getAttribute(o)).map(o=>[o,e.getAttribute(o)]):null;if(s&&s.length)s.forEach(o=>{i.push(`[${o[0]}="${o[1]}"]`)});else{e.id&&i.push(`#${e.id}`);const o=e.className;if(o&&Ku(o)){const a=o.split(/\s+/);for(const l of a)i.push(`.${l}`)}}const r=["aria-label","type","name","title","alt"];for(const o of r){const a=e.getAttribute(o);a&&i.push(`[${o}="${a}"]`)}return i.join("")}function yme(){try{return pw.document.location.href}catch{return""}}function wme(t){if(!pw.HTMLElement)return null;let n=t;for(let i=0;i<5;i++){if(!n)return null;if(n instanceof HTMLElement){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}n=n.parentNode}return null}const fw=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Y7=["debug","info","warn","error","log","assert","trace"],OR={};function mw(t){if(!("console"in cs))return t();const n=cs.console,e={},i=Object.keys(OR);i.forEach(s=>{const r=OR[s];e[s]=n[s],n[s]=r});try{return t()}finally{i.forEach(s=>{n[s]=e[s]})}}const kt=function Hat(){let t=!1;const n={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return Y7.forEach(fw?e=>{n[e]=(...i)=>{t&&mw(()=>{cs.console[e](`Sentry Logger [${e}]:`,...i)})}}:e=>{n[e]=()=>{}}),n}();function _w(t,n=0){return"string"!=typeof t||0===n||t.length<=n?t:`${t.slice(0,n)}...`}function Cme(t,n){if(!Array.isArray(t))return"";const e=[];for(let i=0;i<t.length;i++){const s=t[i];try{vme(s)?e.push("[VueViewModel]"):e.push(String(s))}catch{e.push("[value cannot be serialized]")}}return e.join(n)}function p_(t,n=[],e=!1){return n.some(i=>function Wat(t,n,e=!1){return!!Ku(t)&&(function Bat(t){return dw(t,"RegExp")}(n)?n.test(t):!!Ku(n)&&(e?t===n:t.includes(n)))}(t,i,e))}function bc(t,n,e){if(!(n in t))return;const i=t[n],s=e(i);"function"==typeof s&&Sme(s,i),t[n]=s}function Xu(t,n,e){try{Object.defineProperty(t,n,{value:e,writable:!0,configurable:!0})}catch{fw&&kt.log(`Failed to add non-enumerable property "${n}" to object`,t)}}function Sme(t,n){try{t.prototype=n.prototype=n.prototype||{},Xu(t,"__sentry_original__",n)}catch{}}function Z7(t){return t.__sentry_original__}function xme(t){if(q7(t))return{message:t.message,name:t.name,stack:t.stack,...Tme(t)};if(MR(t)){const n={type:t.type,target:Eme(t.target),currentTarget:Eme(t.currentTarget),...Tme(t)};return typeof CustomEvent<"u"&&kf(t,CustomEvent)&&(n.detail=t.detail),n}return t}function Eme(t){try{return function $at(t){return typeof Element<"u"&&kf(t,Element)}(t)?Df(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function Tme(t){if("object"==typeof t&&null!==t){const n={};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n}return{}}function ga(t){return Q7(t,new Map)}function Q7(t,n){if(function Xat(t){if(!hw(t))return!1;try{const n=Object.getPrototypeOf(t).constructor.name;return!n||"Object"===n}catch{return!0}}(t)){const e=n.get(t);if(void 0!==e)return e;const i={};n.set(t,i);for(const s of Object.keys(t))typeof t[s]<"u"&&(i[s]=Q7(t[s],n));return i}if(Array.isArray(t)){const e=n.get(t);if(void 0!==e)return e;const i=[];return n.set(t,i),t.forEach(s=>{i.push(Q7(s,n))}),i}return t}function zr(){const n=cs.crypto||cs.msCrypto;let e=()=>16*Math.random();try{if(n&&n.randomUUID)return n.randomUUID().replace(/-/g,"");n&&n.getRandomValues&&(e=()=>{const i=new Uint8Array(1);return n.getRandomValues(i),i[0]})}catch{}return"10000000100040008000100000000000".replace(/[018]/g,i=>(i^(15&e())>>i/4).toString(16))}function Ime(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function f_(t){const{message:n,event_id:e}=t;if(n)return n;const i=Ime(t);return i?i.type&&i.value?`${i.type}: ${i.value}`:i.type||i.value||e||"<unknown>":e||"<unknown>"}function J7(t,n,e){const i=t.exception=t.exception||{},s=i.values=i.values||[],r=s[0]=s[0]||{};r.value||(r.value=n||""),r.type||(r.type=e||"Error")}function KT(t,n){const e=Ime(t);if(!e)return;const s=e.mechanism;if(e.mechanism={type:"generic",handled:!0,...s,...n},n&&"data"in n){const r={...s&&s.data,...n.data};e.mechanism.data=r}}function kme(t){if(t&&t.__sentry_captured__)return!0;try{Xu(t,"__sentry_captured__",!0)}catch{}return!1}function Dme(t){return Array.isArray(t)?t:[t]}function RR(){return{traceId:zr(),spanId:zr().substring(16)}}const Ame=1e3;function XT(){return Date.now()/Ame}const Hl=function Zat(){const{performance:t}=cs;if(!t||!t.now)return XT;const n=Date.now()-t.now(),e=null==t.timeOrigin?n:t.timeOrigin;return()=>(e+t.now())/Ame}();let FR;const Wl=(()=>{const{performance:t}=cs;if(!t||!t.now)return void(FR="none");const n=36e5,e=t.now(),i=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+e-i):n,r=s<n,o=t.timing&&t.timing.navigationStart,l="number"==typeof o?Math.abs(o+e-i):n;return r||l<n?s<=l?(FR="timeOrigin",t.timeOrigin):(FR="navigationStart",o):(FR="dateNow",i)})();function gw(t,n={}){if(n.user&&(!t.ipAddress&&n.user.ip_address&&(t.ipAddress=n.user.ip_address),!t.did&&!n.did&&(t.did=n.user.id||n.user.email||n.user.username)),t.timestamp=n.timestamp||Hl(),n.abnormal_mechanism&&(t.abnormal_mechanism=n.abnormal_mechanism),n.ignoreDuration&&(t.ignoreDuration=n.ignoreDuration),n.sid&&(t.sid=32===n.sid.length?n.sid:zr()),void 0!==n.init&&(t.init=n.init),!t.did&&n.did&&(t.did=`${n.did}`),"number"==typeof n.started&&(t.started=n.started),t.ignoreDuration)t.duration=void 0;else if("number"==typeof n.duration)t.duration=n.duration;else{const e=t.timestamp-t.started;t.duration=e>=0?e:0}n.release&&(t.release=n.release),n.environment&&(t.environment=n.environment),!t.ipAddress&&n.ipAddress&&(t.ipAddress=n.ipAddress),!t.userAgent&&n.userAgent&&(t.userAgent=n.userAgent),"number"==typeof n.errors&&(t.errors=n.errors),n.status&&(t.status=n.status)}const t9="_sentrySpan";function YT(t,n){n?Xu(t,t9,n):delete t[t9]}function LR(t){return t[t9]}class n9{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=RR()}clone(){const n=new n9;return n._breadcrumbs=[...this._breadcrumbs],n._tags={...this._tags},n._extra={...this._extra},n._contexts={...this._contexts},n._user=this._user,n._level=this._level,n._session=this._session,n._transactionName=this._transactionName,n._fingerprint=this._fingerprint,n._eventProcessors=[...this._eventProcessors],n._requestSession=this._requestSession,n._attachments=[...this._attachments],n._sdkProcessingMetadata={...this._sdkProcessingMetadata},n._propagationContext={...this._propagationContext},n._client=this._client,n._lastEventId=this._lastEventId,YT(n,LR(this)),n}setClient(n){this._client=n}setLastEventId(n){this._lastEventId=n}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(n){this._scopeListeners.push(n)}addEventProcessor(n){return this._eventProcessors.push(n),this}setUser(n){return this._user=n||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&gw(this._session,{user:n}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(n){return this._requestSession=n,this}setTags(n){return this._tags={...this._tags,...n},this._notifyScopeListeners(),this}setTag(n,e){return this._tags={...this._tags,[n]:e},this._notifyScopeListeners(),this}setExtras(n){return this._extra={...this._extra,...n},this._notifyScopeListeners(),this}setExtra(n,e){return this._extra={...this._extra,[n]:e},this._notifyScopeListeners(),this}setFingerprint(n){return this._fingerprint=n,this._notifyScopeListeners(),this}setLevel(n){return this._level=n,this._notifyScopeListeners(),this}setTransactionName(n){return this._transactionName=n,this._notifyScopeListeners(),this}setContext(n,e){return null===e?delete this._contexts[n]:this._contexts[n]=e,this._notifyScopeListeners(),this}setSession(n){return n?this._session=n:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(n){if(!n)return this;const e="function"==typeof n?n(this):n,[i,s]=e instanceof m_?[e.getScopeData(),e.getRequestSession()]:hw(e)?[n,n.requestSession]:[],{tags:r,extra:o,user:a,contexts:l,level:c,fingerprint:u=[],propagationContext:d}=i||{};return this._tags={...this._tags,...r},this._extra={...this._extra,...o},this._contexts={...this._contexts,...l},a&&Object.keys(a).length&&(this._user=a),c&&(this._level=c),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),s&&(this._requestSession=s),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,YT(this,void 0),this._attachments=[],this._propagationContext=RR(),this._notifyScopeListeners(),this}addBreadcrumb(n,e){const i="number"==typeof e?e:100;if(i<=0)return this;const s={timestamp:XT(),...n},r=this._breadcrumbs;return r.push(s),this._breadcrumbs=r.length>i?r.slice(-i):r,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(n){return this._attachments.push(n),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:LR(this)}}setSDKProcessingMetadata(n){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...n},this}setPropagationContext(n){return this._propagationContext=n,this}getPropagationContext(){return this._propagationContext}captureException(n,e){const i=e&&e.event_id?e.event_id:zr();if(!this._client)return kt.warn("No client configured on scope - will not capture exception!"),i;const s=new Error("Sentry syntheticException");return this._client.captureException(n,{originalException:n,syntheticException:s,...e,event_id:i},this),i}captureMessage(n,e,i){const s=i&&i.event_id?i.event_id:zr();if(!this._client)return kt.warn("No client configured on scope - will not capture message!"),s;const r=new Error(n);return this._client.captureMessage(n,e,{originalException:n,syntheticException:r,...i,event_id:s},this),s}captureEvent(n,e){const i=e&&e.event_id?e.event_id:zr();return this._client?(this._client.captureEvent(n,{...e,event_id:i},this),i):(kt.warn("No client configured on scope - will not capture event!"),i)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(n=>{n(this)}),this._notifyingListeners=!1)}}const m_=n9;class slt{constructor(n,e){let i,s;i=n||new m_,s=e||new m_,this._stack=[{scope:i}],this._isolationScope=s}withScope(n){const e=this._pushScope();let i;try{i=n(e)}catch(s){throw this._popScope(),s}return NR(i)?i.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),i)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const n=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:n}),n}_popScope(){return!(this._stack.length<=1||!this._stack.pop())}}function bw(){const n=W7(uw());return n.stack=n.stack||new slt(function nlt(){return j7("defaultCurrentScope",()=>new m_)}(),function ilt(){return j7("defaultIsolationScope",()=>new m_)}())}function rlt(t){return bw().withScope(t)}function olt(t,n){const e=bw();return e.withScope(()=>(e.getStackTop().scope=t,n(t)))}function Mme(t){return bw().withScope(()=>t(bw().getIsolationScope()))}function ZT(t){const n=W7(t);return n.acs?n.acs:function alt(){return{withIsolationScope:Mme,withScope:rlt,withSetScope:olt,withSetIsolationScope:(t,n)=>Mme(n),getCurrentScope:()=>bw().getScope(),getIsolationScope:()=>bw().getIsolationScope()}}()}function br(){return ZT(uw()).getCurrentScope()}function ou(){return ZT(uw()).getIsolationScope()}function i9(...t){const e=ZT(uw());if(2===t.length){const[i,s]=t;return i?e.withSetScope(i,s):e.withScope(s)}return e.withScope(t[0])}function Zi(){return br().getClient()}const Nme=50,cp="?",Ome=/\(error: (.*)\)/,Rme=/captureMessage|captureException/;function Fme(...t){const n=t.sort((e,i)=>e[0]-i[0]).map(e=>e[1]);return(e,i=0,s=0)=>{const r=[],o=e.split("\n");for(let a=i;a<o.length;a++){const l=o[a];if(l.length>1024)continue;const c=Ome.test(l)?l.replace(Ome,"$1"):l;if(!c.match(/\S*Error: /)){for(const u of n){const d=u(c);if(d){r.push(d);break}}if(r.length>=Nme+s)break}}return function dlt(t){if(!t.length)return[];const n=Array.from(t);return/sentryWrapped/.test(PR(n).function||"")&&n.pop(),n.reverse(),Rme.test(PR(n).function||"")&&(n.pop(),Rme.test(PR(n).function||"")&&n.pop()),n.slice(0,Nme).map(e=>({...e,filename:e.filename||PR(n).filename,function:e.function||cp}))}(r.slice(s))}}function ult(t){return Array.isArray(t)?Fme(...t):t}function PR(t){return t[t.length-1]||{}}const s9="<anonymous>";function Af(t){try{return t&&"function"==typeof t&&t.name||s9}catch{return s9}}function Lme(t){const n=t.exception;if(n){const e=[];try{return n.values.forEach(i=>{i.stacktrace.frames&&e.push(...i.stacktrace.frames)}),e}catch{return}}}function up(t,n=100,e=1/0){try{return r9("",t,n,e)}catch(i){return{ERROR:`**non-serializable** (${i})`}}}function Pme(t,n=3,e=102400){const i=up(t,n);return function mlt(t){return function flt(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(t))}(i)>e?Pme(t,n-1,e):i}function r9(t,n,e=1/0,i=1/0,s=function clt(){const t="function"==typeof WeakSet,n=t?new WeakSet:[];return[function e(s){if(t)return!!n.has(s)||(n.add(s),!1);for(let r=0;r<n.length;r++)if(n[r]===s)return!0;return n.push(s),!1},function i(s){if(t)n.delete(s);else for(let r=0;r<n.length;r++)if(n[r]===s){n.splice(r,1);break}}]}()){const[r,o]=s;if(null==n||["number","boolean","string"].includes(typeof n)&&!Number.isNaN(n))return n;const a=function hlt(t,n){try{if("domain"===t&&n&&"object"==typeof n&&n._events)return"[Domain]";if("domainEmitter"===t)return"[DomainEmitter]";if(typeof global<"u"&&n===global)return"[Global]";if(typeof window<"u"&&n===window)return"[Window]";if(typeof document<"u"&&n===document)return"[Document]";if(vme(n))return"[VueViewModel]";if(function Vat(t){return hw(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}(n))return"[SyntheticEvent]";if("number"==typeof n&&n!=n)return"[NaN]";if("function"==typeof n)return`[Function: ${Af(n)}]`;if("symbol"==typeof n)return`[${String(n)}]`;if("bigint"==typeof n)return`[BigInt: ${String(n)}]`;const e=function plt(t){const n=Object.getPrototypeOf(t);return n?n.constructor.name:"null prototype"}(n);return/^HTML(\w*)Element$/.test(e)?`[HTMLElement: ${e}]`:`[object ${e}]`}catch(e){return`**non-serializable** (${e})`}}(t,n);if(!a.startsWith("[object "))return a;if(n.__sentry_skip_normalization__)return n;const l="number"==typeof n.__sentry_override_normalization_depth__?n.__sentry_override_normalization_depth__:e;if(0===l)return a.replace("object ","");if(r(n))return"[Circular ~]";const c=n;if(c&&"function"==typeof c.toJSON)try{return r9("",c.toJSON(),l-1,i,s)}catch{}const u=Array.isArray(n)?[]:{};let d=0;const h=xme(n);for(const p in h)if(Object.prototype.hasOwnProperty.call(h,p)){if(d>=i){u[p]="[MaxProperties ~]";break}u[p]=r9(p,h[p],l-1,i,s),d++}return o(n),u}var Mf;function Nf(t){return new Yu(n=>{n(t)})}function $R(t){return new Yu((n,e)=>{e(t)})}!function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"}(Mf||(Mf={}));class Yu{constructor(n){Yu.prototype.__init.call(this),Yu.prototype.__init2.call(this),Yu.prototype.__init3.call(this),Yu.prototype.__init4.call(this),this._state=Mf.PENDING,this._handlers=[];try{n(this._resolve,this._reject)}catch(e){this._reject(e)}}then(n,e){return new Yu((i,s)=>{this._handlers.push([!1,r=>{if(n)try{i(n(r))}catch(o){s(o)}else i(r)},r=>{if(e)try{i(e(r))}catch(o){s(o)}else s(r)}]),this._executeHandlers()})}catch(n){return this.then(e=>e,n)}finally(n){return new Yu((e,i)=>{let s,r;return this.then(o=>{r=!1,s=o,n&&n()},o=>{r=!0,s=o,n&&n()}).then(()=>{r?i(s):e(s)})})}__init(){this._resolve=n=>{this._setResult(Mf.RESOLVED,n)}}__init2(){this._reject=n=>{this._setResult(Mf.REJECTED,n)}}__init3(){this._setResult=(n,e)=>{if(this._state===Mf.PENDING){if(NR(e))return void e.then(this._resolve,this._reject);this._state=n,this._value=e,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===Mf.PENDING)return;const n=this._handlers.slice();this._handlers=[],n.forEach(e=>{e[0]||(this._state===Mf.RESOLVED&&e[1](this._value),this._state===Mf.REJECTED&&e[2](this._value),e[0]=!0)})}}}const Ii=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function o9(t,n,e,i=0){return new Yu((s,r)=>{const o=t[i];if(null===n||"function"!=typeof o)s(n);else{const a=o({...n},e);Ii&&o.id&&null===a&&kt.log(`Event processor "${o.id}" dropped event`),NR(a)?a.then(l=>o9(t,l,e,i+1).then(s)).then(null,r):o9(t,a,e,i+1).then(s).then(null,r)}})}const a9="baggage",$me="sentry-",_lt=/^sentry-/,glt=8192;function Bme(t){const n=function blt(t){if(t&&(Ku(t)||Array.isArray(t)))return Array.isArray(t)?t.reduce((n,e)=>{const i=zme(e);return Object.entries(i).forEach(([s,r])=>{n[s]=r}),n},{}):zme(t)}(t);if(!n)return;const e=Object.entries(n).reduce((i,[s,r])=>(s.match(_lt)&&(i[s.slice($me.length)]=r),i),{});return Object.keys(e).length>0?e:void 0}function Vme(t){if(t)return function vlt(t){if(0!==Object.keys(t).length)return Object.entries(t).reduce((n,[e,i],s)=>{const r=`${encodeURIComponent(e)}=${encodeURIComponent(i)}`,o=0===s?r:`${n},${r}`;return o.length>glt?(fw&&kt.warn(`Not adding key: ${e} with val: ${i} to baggage header due to exceeding baggage size limits.`),n):o},"")}(Object.entries(t).reduce((e,[i,s])=>(s&&(e[`${$me}${i}`]=s),e),{}))}function zme(t){return t.split(",").map(n=>n.split("=").map(e=>decodeURIComponent(e.trim()))).reduce((n,[e,i])=>(e&&i&&(n[e]=i),n),{})}const au="sentry.source",Ume="sentry.sample_rate",mv="sentry.op",Ro="sentry.origin",l9="sentry.idle_span_finish_reason",BR="sentry.measurement_unit",VR="sentry.measurement_value",c9="sentry.exclusive_time",wlt=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function u9(t=zr(),n=zr().substring(16),e){let i="";return void 0!==e&&(i=e?"-1":"-0"),`${t}-${n}${i}`}const d9="_sentryMetrics";function h9(t){const n=t[d9];if(!n)return;const e={};for(const[,[i,s]]of n)(e[i]||(e[i]=[])).push(ga(s));return e}const xlt=0,Gme=1,Oa=2;function jme(t,n){t.setAttribute("http.response.status_code",n);const e=function Elt(t){if(t<400&&t>=100)return{code:Gme};if(t>=400&&t<500)switch(t){case 401:return{code:Oa,message:"unauthenticated"};case 403:return{code:Oa,message:"permission_denied"};case 404:return{code:Oa,message:"not_found"};case 409:return{code:Oa,message:"already_exists"};case 413:return{code:Oa,message:"failed_precondition"};case 429:return{code:Oa,message:"resource_exhausted"};case 499:return{code:Oa,message:"cancelled"};default:return{code:Oa,message:"invalid_argument"}}if(t>=500&&t<600)switch(t){case 501:return{code:Oa,message:"unimplemented"};case 503:return{code:Oa,message:"unavailable"};case 504:return{code:Oa,message:"deadline_exceeded"};default:return{code:Oa,message:"internal_error"}}return{code:Oa,message:"unknown_error"}}(n);"unknown_error"!==e.message&&t.setStatus(e)}const Wme=1;function Tlt(t){const{spanId:n,traceId:e}=t.spanContext(),{data:i,op:s,parent_span_id:r,status:o,origin:a}=ts(t);return ga({parent_span_id:r,span_id:n,trace_id:e,data:i,op:s,status:o,origin:a})}function Ilt(t){const{spanId:n,traceId:e}=t.spanContext(),{parent_span_id:i}=ts(t);return ga({parent_span_id:i,span_id:n,trace_id:e})}function qme(t){const{traceId:n,spanId:e}=t.spanContext();return u9(n,e,gv(t))}function _v(t){return"number"==typeof t?Kme(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?Kme(t.getTime()):Hl()}function Kme(t){return t>9999999999?t/1e3:t}function ts(t){if(function Dlt(t){return"function"==typeof t.getSpanJSON}(t))return t.getSpanJSON();try{const{spanId:n,traceId:e}=t.spanContext();if(function klt(t){return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(t)){const{attributes:i,startTime:s,name:r,endTime:o,parentSpanId:a,status:l}=t;return ga({span_id:n,trace_id:e,data:i,description:r,parent_span_id:a,start_timestamp:_v(s),timestamp:_v(o)||void 0,status:Xme(l),op:i[mv],origin:i[Ro],_metrics_summary:h9(t)})}return{span_id:n,trace_id:e}}catch{return{}}}function gv(t){const{traceFlags:n}=t.spanContext();return n===Wme}function Xme(t){if(t&&t.code!==xlt)return t.code===Gme?"ok":t.message||"unknown_error"}const bv="_sentryChildSpans",p9="_sentryRootSpan";function Yme(t,n){Xu(n,p9,t[p9]||t),t[bv]?t[bv].add(n):Xu(t,bv,new Set([n]))}function zR(t){const n=new Set;return function e(i){if(!n.has(i)&&gv(i)){n.add(i);const s=i[bv]?Array.from(i[bv]):[];for(const r of s)e(r)}}(t),Array.from(n)}function ba(t){return t[p9]||t}function va(){const n=ZT(uw());return n.getActiveSpan?n.getActiveSpan():LR(br())}const Zme="_frozenDsc";function Qme(t,n){Xu(t,Zme,n)}function UR(t,n){const e=n.getOptions(),{publicKey:i}=n.getDsn()||{},s=ga({environment:e.environment||H7,release:e.release,public_key:i,trace_id:t});return n.emit("createDsc",s),s}function __(t){const n=Zi();if(!n)return{};const e=UR(ts(t).trace_id||"",n),i=ba(t),s=i[Zme];if(s)return s;const r=i.spanContext().traceState,o=r&&r.get("sentry.dsc"),a=o&&Bme(o);if(a)return a;const l=ts(i),c=l.data||{},u=c[Ume];null!=u&&(e.sample_rate=`${u}`);const h=l.description;return"url"!==c[au]&&h&&(e.transaction=h),e.sampled=String(gv(i)),n.emit("createDsc",e,i),e}function Jme(t,n){const{extra:e,tags:i,user:s,contexts:r,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:d,propagationContext:h,transactionName:p,span:f}=n;QT(t,"extra",e),QT(t,"tags",i),QT(t,"user",s),QT(t,"contexts",r),QT(t,"sdkProcessingMetadata",a),o&&(t.level=o),p&&(t.transactionName=p),f&&(t.span=f),l.length&&(t.breadcrumbs=[...t.breadcrumbs,...l]),c.length&&(t.fingerprint=[...t.fingerprint,...c]),u.length&&(t.eventProcessors=[...t.eventProcessors,...u]),d.length&&(t.attachments=[...t.attachments,...d]),t.propagationContext={...t.propagationContext,...h}}function QT(t,n,e){if(e&&Object.keys(e).length){t[n]={...t[n]};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[n][i]=e[i])}}function e_e(t,n,e,i,s,r){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=t,l={...n,event_id:n.event_id||e.event_id||zr(),timestamp:n.timestamp||XT()},c=e.integrations||t.integrations.map(v=>v.name);(function Plt(t,n){const{environment:e,release:i,dist:s,maxValueLength:r=250}=n;"environment"in t||(t.environment="environment"in n?e:H7),void 0===t.release&&void 0!==i&&(t.release=i),void 0===t.dist&&void 0!==s&&(t.dist=s),t.message&&(t.message=_w(t.message,r));const o=t.exception&&t.exception.values&&t.exception.values[0];o&&o.value&&(o.value=_w(o.value,r));const a=t.request;a&&a.url&&(a.url=_w(a.url,r))})(l,t),function Vlt(t,n){n.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...n])}(l,c),s&&s.emit("applyFrameMetadata",n),void 0===n.type&&function $lt(t,n){const e=cs._sentryDebugIds;if(!e)return;let i;const s=t_e.get(n);s?i=s:(i=new Map,t_e.set(n,i));const r=Object.entries(e).reduce((o,[a,l])=>{let c;const u=i.get(a);u?c=u:(c=n(a),i.set(a,c));for(let d=c.length-1;d>=0;d--){const h=c[d];if(h.filename){o[h.filename]=l;break}}return o},{});try{t.exception.values.forEach(o=>{o.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=r[a.filename])})})}catch{}}(l,t.stackParser);const u=function Ult(t,n){if(!n)return t;const e=t?t.clone():new m_;return e.update(n),e}(i,e.captureContext);e.mechanism&&KT(l,e.mechanism);const d=s?s.getEventProcessors():[],h=function llt(){return j7("globalScope",()=>new m_)}().getScopeData();r&&Jme(h,r.getScopeData()),u&&Jme(h,u.getScopeData());const p=[...e.attachments||[],...h.attachments];return p.length&&(e.attachments=p),function Mlt(t,n){const{fingerprint:e,span:i,breadcrumbs:s,sdkProcessingMetadata:r}=n;(function Nlt(t,n){const{extra:e,tags:i,user:s,contexts:r,level:o,transactionName:a}=n,l=ga(e);l&&Object.keys(l).length&&(t.extra={...l,...t.extra});const c=ga(i);c&&Object.keys(c).length&&(t.tags={...c,...t.tags});const u=ga(s);u&&Object.keys(u).length&&(t.user={...u,...t.user});const d=ga(r);d&&Object.keys(d).length&&(t.contexts={...d,...t.contexts}),o&&(t.level=o),a&&"transaction"!==t.type&&(t.transaction=a)})(t,n),i&&function Flt(t,n){t.contexts={trace:Ilt(n),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:__(n),...t.sdkProcessingMetadata};const i=ts(ba(n)).description;i&&!t.transaction&&"transaction"===t.type&&(t.transaction=i)}(t,i),function Llt(t,n){t.fingerprint=t.fingerprint?Dme(t.fingerprint):[],n&&(t.fingerprint=t.fingerprint.concat(n)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}(t,e),function Olt(t,n){const e=[...t.breadcrumbs||[],...n];t.breadcrumbs=e.length?e:void 0}(t,s),function Rlt(t,n){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...n}}(t,r)}(l,h),o9([...d,...h.eventProcessors],l,e).then(v=>(v&&function Blt(t){const n={};try{t.exception.values.forEach(i=>{i.stacktrace.frames.forEach(s=>{s.debug_id&&(s.abs_path?n[s.abs_path]=s.debug_id:s.filename&&(n[s.filename]=s.debug_id),delete s.debug_id)})})}catch{}if(0===Object.keys(n).length)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const e=t.debug_meta.images;Object.entries(n).forEach(([i,s])=>{e.push({type:"sourcemap",code_file:i,debug_id:s})})}(v),"number"==typeof o&&o>0?function zlt(t,n,e){if(!t)return null;const i={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(s=>({...s,...s.data&&{data:up(s.data,n,e)}}))},...t.user&&{user:up(t.user,n,e)},...t.contexts&&{contexts:up(t.contexts,n,e)},...t.extra&&{extra:up(t.extra,n,e)}};return t.contexts&&t.contexts.trace&&i.contexts&&(i.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(i.contexts.trace.data=up(t.contexts.trace.data,n,e))),t.spans&&(i.spans=t.spans.map(s=>({...s,...s.data&&{data:up(s.data,n,e)}}))),i}(v,o,a):v))}const t_e=new WeakMap;const Hlt=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function GR(t,n){return br().captureException(t,function Glt(t){if(t)return function jlt(t){return t instanceof m_||"function"==typeof t}(t)||function Wlt(t){return Object.keys(t).some(n=>Hlt.includes(n))}(t)?{captureContext:t}:t}(n))}function n_e(t,n){return br().captureEvent(t,n)}function i_e(t,n){ou().setContext(t,n)}function r_e(t){const n=Zi(),e=ou(),i=br(),{release:s,environment:r=H7}=n&&n.getOptions()||{},{userAgent:o}=cs.navigator||{},a=function Qat(t){const n=Hl(),e={sid:zr(),init:!0,timestamp:n,started:n,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function elt(t){return ga({sid:`${t.sid}`,init:t.init,started:new Date(1e3*t.started).toISOString(),timestamp:new Date(1e3*t.timestamp).toISOString(),status:t.status,errors:t.errors,did:"number"==typeof t.did||"string"==typeof t.did?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}(e)};return t&&gw(e,t),e}({release:s,environment:r,user:i.getUser()||e.getUser(),...o&&{userAgent:o},...t}),l=e.getSession();return l&&"ok"===l.status&&gw(l,{status:"exited"}),o_e(),e.setSession(a),i.setSession(a),a}function o_e(){const t=ou(),n=br(),e=n.getSession()||t.getSession();e&&function Jat(t,n){let e={};n?e={status:n}:"ok"===t.status&&(e={status:"exited"}),gw(t,e)}(e),a_e(),t.setSession(),n.setSession()}function a_e(){const t=ou(),n=br(),e=Zi(),i=n.getSession()||t.getSession();i&&e&&e.captureSession(i)}function l_e(t=!1){t?o_e():a_e()}const c_e=[];function Ylt(t){const n=t.defaultIntegrations||[],e=t.integrations;let i;n.forEach(o=>{o.isDefaultInstance=!0}),i=Array.isArray(e)?[...n,...e]:"function"==typeof e?Dme(e(n)):n;const s=function Xlt(t){const n={};return t.forEach(e=>{const{name:i}=e,s=n[i];s&&!s.isDefaultInstance&&e.isDefaultInstance||(n[i]=e)}),Object.values(n)}(i),r=s.findIndex(o=>"Debug"===o.name);if(r>-1){const[o]=s.splice(r,1);s.push(o)}return s}function u_e(t,n){for(const e of n)e&&e.afterAllSetup&&e.afterAllSetup(t)}function d_e(t,n,e){if(e[n.name])Ii&&kt.log(`Integration skipped because it was already installed: ${n.name}`);else{if(e[n.name]=n,-1===c_e.indexOf(n.name)&&"function"==typeof n.setupOnce&&(n.setupOnce(),c_e.push(n.name)),n.setup&&"function"==typeof n.setup&&n.setup(t),"function"==typeof n.preprocessEvent){const i=n.preprocessEvent.bind(n);t.on("preprocessEvent",(s,r)=>i(s,r,t))}if("function"==typeof n.processEvent){const i=n.processEvent.bind(n),s=Object.assign((r,o)=>i(r,o,t),{id:n.name});t.addEventProcessor(s)}Ii&&kt.log(`Integration installed: ${n.name}`)}}const Qlt=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],h_e=(t={})=>({name:"InboundFilters",processEvent(n,e,i){const s=i.getOptions(),r=function ect(t={},n={}){return{allowUrls:[...t.allowUrls||[],...n.allowUrls||[]],denyUrls:[...t.denyUrls||[],...n.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...n.ignoreErrors||[],...t.disableErrorDefaults?[]:Qlt],ignoreTransactions:[...t.ignoreTransactions||[],...n.ignoreTransactions||[]],ignoreInternal:void 0===t.ignoreInternal||t.ignoreInternal}}(t,s);return function tct(t,n){return n.ignoreInternal&&function act(t){try{return"SentryError"===t.exception.values[0].type}catch{}return!1}(t)?(Ii&&kt.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${f_(t)}`),!0):function nct(t,n){return!(t.type||!n||!n.length)&&function oct(t){const n=[];let e;t.message&&n.push(t.message);try{e=t.exception.values[t.exception.values.length-1]}catch{}return e&&e.value&&(n.push(e.value),e.type&&n.push(`${e.type}: ${e.value}`)),n}(t).some(e=>p_(e,n))}(t,n.ignoreErrors)?(Ii&&kt.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${f_(t)}`),!0):function cct(t){return!(t.type||!t.exception||!t.exception.values||0===t.exception.values.length||t.message||t.exception.values.some(n=>n.stacktrace||n.type&&"Error"!==n.type||n.value))}(t)?(Ii&&kt.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${f_(t)}`),!0):function ict(t,n){if("transaction"!==t.type||!n||!n.length)return!1;const e=t.transaction;return!!e&&p_(e,n)}(t,n.ignoreTransactions)?(Ii&&kt.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${f_(t)}`),!0):function sct(t,n){if(!n||!n.length)return!1;const e=jR(t);return!!e&&p_(e,n)}(t,n.denyUrls)?(Ii&&kt.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${f_(t)}.\nUrl: ${jR(t)}`),!0):!function rct(t,n){if(!n||!n.length)return!0;const e=jR(t);return!e||p_(e,n)}(t,n.allowUrls)&&(Ii&&kt.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${f_(t)}.\nUrl: ${jR(t)}`),!0)}(n,r)?null:n}});function jR(t){try{let n;try{n=t.exception.values[0].stacktrace.frames}catch{}return n?function lct(t=[]){for(let n=t.length-1;n>=0;n--){const e=t[n];if(e&&"<anonymous>"!==e.filename&&"[native code]"!==e.filename)return e.filename||null}return null}(n):null}catch{return Ii&&kt.error(`Cannot extract url for event ${f_(t)}`),null}}let p_e;const f_e=new WeakMap,m_e=()=>({name:"FunctionToString",setupOnce(){p_e=Function.prototype.toString;try{Function.prototype.toString=function(...t){const n=Z7(this),e=f_e.has(Zi())&&void 0!==n?n:this;return p_e.apply(e,t)}}catch{}},setup(t){f_e.set(t,!0)}}),__e=()=>{let t;return{name:"Dedupe",processEvent(n){if(n.type)return n;try{if(function hct(t,n){return!(!n||!function pct(t,n){const e=t.message,i=n.message;return!(!e&&!i||e&&!i||!e&&i||e!==i||!b_e(t,n)||!g_e(t,n))}(t,n)&&!function fct(t,n){const e=v_e(n),i=v_e(t);return!!(e&&i&&e.type===i.type&&e.value===i.value&&b_e(t,n)&&g_e(t,n))}(t,n))}(n,t))return Ii&&kt.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=n}}};function g_e(t,n){let e=Lme(t),i=Lme(n);if(!e&&!i)return!0;if(e&&!i||!e&&i||i.length!==e.length)return!1;for(let s=0;s<i.length;s++){const r=i[s],o=e[s];if(r.filename!==o.filename||r.lineno!==o.lineno||r.colno!==o.colno||r.function!==o.function)return!1}return!0}function b_e(t,n){let e=t.fingerprint,i=n.fingerprint;if(!e&&!i)return!0;if(e&&!i||!e&&i)return!1;try{return e.join("")===i.join("")}catch{return!1}}function v_e(t){return t.exception&&t.exception.values&&t.exception.values[0]}const gct=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function vw(t,n=!1){const{host:e,path:i,pass:s,port:r,projectId:o,protocol:a,publicKey:l}=t;return`${a}://${l}${n&&s?`:${s}`:""}@${e}${r?`:${r}`:""}/${i&&`${i}/`}${o}`}function y_e(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function w_e(t){const n="string"==typeof t?function vct(t){const n=gct.exec(t);if(!n)return void mw(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});const[e,i,s="",r="",o="",a=""]=n.slice(1);let l="",c=a;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const d=c.match(/^\d+/);d&&(c=d[0])}return y_e({host:r,pass:s,path:l,projectId:c,port:o,protocol:e,publicKey:i})}(t):y_e(t);if(n&&function yct(t){if(!fw)return!0;const{port:n,projectId:e,protocol:i}=t;return!(["protocol","publicKey","host","projectId"].find(o=>!t[o]&&(kt.error(`Invalid Sentry Dsn: ${o} missing`),!0))||(e.match(/^\d+$/)?function bct(t){return"http"===t||"https"===t}(i)?n&&isNaN(parseInt(n,10))&&(kt.error(`Invalid Sentry Dsn: Invalid port ${n}`),1):(kt.error(`Invalid Sentry Dsn: Invalid protocol ${i}`),1):(kt.error(`Invalid Sentry Dsn: Invalid projectId ${e}`),1)))}(n))return n}const wct="7";function C_e(t){return`${t.protocol?`${t.protocol}:`:""}//${t.host}${t.port?`:${t.port}`:""}${t.path?`/${t.path}`:""}/api/`}function xct(t,n,e){return n||`${function Cct(t){return`${C_e(t)}${t.projectId}/envelope/`}(t)}?${function Sct(t,n){return function qat(t){return Object.keys(t).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(t[n])}`).join("&")}({sentry_key:t.publicKey,sentry_version:wct,...n&&{sentry_client:`${n.name}/${n.version}`}})}(t,e)}`}const HR=cs;function _9(){if(!("fetch"in HR))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function g9(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}const yw={},S_e={};function g_(t,n){yw[t]=yw[t]||[],yw[t].push(n)}function b_(t,n){S_e[t]||(n(),S_e[t]=!0)}function Zu(t,n){const e=t&&yw[t];if(e)for(const i of e)try{i(n)}catch(s){fw&&kt.error(`Error while triggering instrumentation handler.\nType: ${t}\nName: ${Af(i)}\nError:`,s)}}const WR=cs,ui=cs;let qR;function KR(t){const n="history";g_(n,t),b_(n,kct)}function kct(){if(!function Ict(){const t=WR.chrome;return!(t&&t.app&&t.app.runtime||!("history"in WR)||!WR.history.pushState||!WR.history.replaceState)}())return;const t=ui.onpopstate;function n(e){return function(...i){const s=i.length>2?i[2]:void 0;if(s){const r=qR,o=String(s);qR=o,Zu("history",{from:r,to:o})}return e.apply(this,i)}}ui.onpopstate=function(...e){const i=ui.location.href,s=qR;if(qR=i,Zu("history",{from:s,to:i}),t)try{return t.apply(this,e)}catch{}},bc(ui.history,"pushState",n),bc(ui.history,"replaceState",n)}function vv(t,n=[]){return[t,n]}function Dct(t,n){const[e,i]=t;return[e,[...i,n]]}function b9(t,n){const e=t[1];for(const i of e)if(n(i,i[0].type))return!0;return!1}function XR(t){return cs.__SENTRY__&&cs.__SENTRY__.encodePolyfill?cs.__SENTRY__.encodePolyfill(t):(new TextEncoder).encode(t)}function Mct(t){const[n,e]=t;let i=JSON.stringify(n);function s(r){"string"==typeof i?i="string"==typeof r?i+r:[XR(i),r]:i.push("string"==typeof r?XR(r):r)}for(const r of e){const[o,a]=r;if(s(`\n${JSON.stringify(o)}\n`),"string"==typeof a||a instanceof Uint8Array)s(a);else{let l;try{l=JSON.stringify(a)}catch{l=JSON.stringify(up(a))}s(l)}}return"string"==typeof i?i:function Nct(t){const n=t.reduce((s,r)=>s+r.length,0),e=new Uint8Array(n);let i=0;for(const s of t)e.set(s,i),i+=s.length;return e}(i)}function Oct(t){return[{type:"span"},t]}function Rct(t){const n="string"==typeof t.data?XR(t.data):t.data;return[ga({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}const Fct={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function x_e(t){return Fct[t]}function v9(t){if(!t||!t.sdk)return;const{name:n,version:e}=t.sdk;return{name:n,version:e}}function E_e(t,n,e,i){const s=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:(new Date).toISOString(),...n&&{sdk:n},...!!e&&i&&{dsn:vw(i)},...s&&{trace:ga({...s})}}}class dp extends Error{constructor(n,e="warn"){super(n),this.message=n,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=e}}function YR(t){if("boolean"==typeof t)return Number(t);const n="string"==typeof t?parseFloat(t):t;if(!("number"!=typeof n||isNaN(n)||n<0||n>1))return n;Ii&&kt.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`)}const T_e="Not capturing exception because it's already been captured.";class zct{constructor(n){if(this._options=n,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],n.dsn?this._dsn=w_e(n.dsn):Ii&&kt.warn("No DSN provided, client will not send events."),this._dsn){const e=xct(this._dsn,n.tunnel,n._metadata?n._metadata.sdk:void 0);this._transport=n.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...n.transportOptions,url:e})}}captureException(n,e,i){const s=zr();if(kme(n))return Ii&&kt.log(T_e),s;const r={event_id:s,...e};return this._process(this.eventFromException(n,r).then(o=>this._captureEvent(o,r,i))),r.event_id}captureMessage(n,e,i,s){const r={event_id:zr(),...i},o=K7(n)?n:String(n),a=X7(n)?this.eventFromMessage(o,e,r):this.eventFromException(n,r);return this._process(a.then(l=>this._captureEvent(l,r,s))),r.event_id}captureEvent(n,e,i){const s=zr();if(e&&e.originalException&&kme(e.originalException))return Ii&&kt.log(T_e),s;const r={event_id:s,...e};return this._process(this._captureEvent(n,r,(n.sdkProcessingMetadata||{}).capturedSpanScope||i)),r.event_id}captureSession(n){"string"!=typeof n.release?Ii&&kt.warn("Discarded session because of missing or non-string release"):(this.sendSession(n),gw(n,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(n){const e=this._transport;return e?(this.emit("flush"),this._isClientDoneProcessing(n).then(i=>e.flush(n).then(s=>i&&s))):Nf(!0)}close(n){return this.flush(n).then(e=>(this.getOptions().enabled=!1,this.emit("close"),e))}getEventProcessors(){return this._eventProcessors}addEventProcessor(n){this._eventProcessors.push(n)}init(){(this._isEnabled()||this._options.integrations.some(({name:n})=>n.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(n){return this._integrations[n]}addIntegration(n){const e=this._integrations[n.name];d_e(this,n,this._integrations),e||u_e(this,[n])}sendEvent(n,e={}){this.emit("beforeSendEvent",n,e);let i=function Bct(t,n,e,i){const s=v9(e),r=t.type&&"replay_event"!==t.type?t.type:"event";!function Pct(t,n){n&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||n.name,t.sdk.version=t.sdk.version||n.version,t.sdk.integrations=[...t.sdk.integrations||[],...n.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...n.packages||[]])}(t,e&&e.sdk);const o=E_e(t,s,i,n);return delete t.sdkProcessingMetadata,vv(o,[[{type:r},t]])}(n,this._dsn,this._options._metadata,this._options.tunnel);for(const r of e.attachments||[])i=Dct(i,Rct(r));const s=this.sendEnvelope(i);s&&s.then(r=>this.emit("afterSendEvent",n,r),null)}sendSession(n){const e=function $ct(t,n,e,i){const s=v9(e);return vv({sent_at:(new Date).toISOString(),...s&&{sdk:s},...!!i&&n&&{dsn:vw(n)}},["aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()]])}(n,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(e)}recordDroppedEvent(n,e,i){if(this._options.sendClientReports){const s="number"==typeof i?i:1,r=`${n}:${e}`;Ii&&kt.log(`Recording outcome: "${r}"${s>1?` (${s} times)`:""}`),this._outcomes[r]=(this._outcomes[r]||0)+s}}on(n,e){const i=this._hooks[n]=this._hooks[n]||[];return i.push(e),()=>{const s=i.indexOf(e);s>-1&&i.splice(s,1)}}emit(n,...e){const i=this._hooks[n];i&&i.forEach(s=>s(...e))}sendEnvelope(n){return this.emit("beforeEnvelope",n),this._isEnabled()&&this._transport?this._transport.send(n).then(null,e=>(Ii&&kt.error("Error while sending event:",e),e)):(Ii&&kt.error("Transport disabled"),Nf({}))}_setupIntegrations(){const{integrations:n}=this._options;this._integrations=function Zlt(t,n){const e={};return n.forEach(i=>{i&&d_e(t,i,e)}),e}(this,n),u_e(this,n)}_updateSessionFromEvent(n,e){let i=!1,s=!1;const r=e.exception&&e.exception.values;if(r){s=!0;for(const l of r){const c=l.mechanism;if(c&&!1===c.handled){i=!0;break}}}const o="ok"===n.status;(o&&0===n.errors||o&&i)&&(gw(n,{...i&&{status:"crashed"},errors:n.errors||Number(s||i)}),this.captureSession(n))}_isClientDoneProcessing(n){return new Yu(e=>{let i=0;const r=setInterval(()=>{0==this._numProcessing?(clearInterval(r),e(!0)):(i+=1,n&&i>=n&&(clearInterval(r),e(!1)))},1)})}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(n,e,i,s=ou()){const r=this.getOptions(),o=Object.keys(this._integrations);return!e.integrations&&o.length>0&&(e.integrations=o),this.emit("preprocessEvent",n,e),n.type||s.setLastEventId(n.event_id||e.event_id),e_e(r,n,e,i,this,s).then(a=>{if(null===a)return a;const l={...s.getPropagationContext(),...i?i.getPropagationContext():void 0};if((!a.contexts||!a.contexts.trace)&&l){const{traceId:u,spanId:d,parentSpanId:h,dsc:p}=l;a.contexts={trace:ga({trace_id:u,span_id:d,parent_span_id:h}),...a.contexts};const f=p||UR(u,this);a.sdkProcessingMetadata={dynamicSamplingContext:f,...a.sdkProcessingMetadata}}return a})}_captureEvent(n,e={},i){return this._processEvent(n,e,i).then(s=>s.event_id,s=>{if(Ii){const r=s;"log"===r.logLevel?kt.log(r.message):kt.warn(r)}})}_processEvent(n,e,i){const s=this.getOptions(),{sampleRate:r}=s,o=k_e(n),a=I_e(n),l=n.type||"error",c=`before send for type \`${l}\``,u=typeof r>"u"?void 0:YR(r);if(a&&"number"==typeof u&&Math.random()>u)return this.recordDroppedEvent("sample_rate","error",n),$R(new dp(`Discarding event because it's not included in the random sample (sampling rate = ${r})`,"log"));const d="replay_event"===l?"replay":l;return this._prepareEvent(n,e,i,(n.sdkProcessingMetadata||{}).capturedSpanIsolationScope).then(f=>{if(null===f)throw this.recordDroppedEvent("event_processor",d,n),new dp("An event processor returned `null`, will not send event.","log");if(e.data&&!0===e.data.__sentry__)return f;const v=function Gct(t,n,e,i){const{beforeSend:s,beforeSendTransaction:r,beforeSendSpan:o}=n;if(I_e(e)&&s)return s(e,i);if(k_e(e)){if(e.spans&&o){const a=[];for(const l of e.spans){const c=o(l);c?a.push(c):t.recordDroppedEvent("before_send","span")}e.spans=a}if(r)return e.spans&&(e.sdkProcessingMetadata={...e.sdkProcessingMetadata,spanCountBeforeProcessing:e.spans.length}),r(e,i)}return e}(this,s,f,e);return function Uct(t,n){const e=`${n} must return \`null\` or a valid event.`;if(NR(t))return t.then(i=>{if(!hw(i)&&null!==i)throw new dp(e);return i},i=>{throw new dp(`${n} rejected with ${i}`)});if(!hw(t)&&null!==t)throw new dp(e);return t}(v,c)}).then(f=>{if(null===f)throw this.recordDroppedEvent("before_send",d,n),o&&this.recordDroppedEvent("before_send","span",1+(n.spans||[]).length),new dp(`${c} returned \`null\`, will not send event.`,"log");const g=i&&i.getSession();if(!o&&g&&this._updateSessionFromEvent(g,f),o){const x=(f.sdkProcessingMetadata&&f.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(f.spans?f.spans.length:0);x>0&&this.recordDroppedEvent("before_send","span",x)}const v=f.transaction_info;if(o&&v&&f.transaction!==n.transaction){const y="custom";f.transaction_info={...v,source:y}}return this.sendEvent(f,e),f}).then(null,f=>{throw f instanceof dp?f:(this.captureException(f,{data:{__sentry__:!0},originalException:f}),new dp(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${f}`))})}_process(n){this._numProcessing++,n.then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e))}_clearOutcomes(){const n=this._outcomes;return this._outcomes={},Object.entries(n).map(([e,i])=>{const[s,r]=e.split(":");return{reason:s,category:r,quantity:i}})}_flushOutcomes(){Ii&&kt.log("Flushing outcomes...");const n=this._clearOutcomes();if(0===n.length)return void(Ii&&kt.log("No outcomes to send"));if(!this._dsn)return void(Ii&&kt.log("No dsn provided, will not send outcomes"));Ii&&kt.log("Sending outcomes:",n);const e=function Lct(t,n,e){return vv(n?{dsn:n}:{},[[{type:"client_report"},{timestamp:e||XT(),discarded_events:t}]])}(n,this._options.tunnel&&vw(this._dsn));this.sendEnvelope(e)}}function I_e(t){return void 0===t.type}function k_e(t){return"transaction"===t.type}function D_e(t,n,e=[n],i="npm"){const s=t._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${n}`,packages:e.map(r=>({name:`${i}:@sentry/${r}`,version:fv})),version:fv}),t._metadata=s}const vc=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function y9(t,n){const e=C9(t,n),i={type:n&&n.name,value:Yct(n)};return e.length&&(i.stacktrace={frames:e}),void 0===i.type&&""===i.value&&(i.value="Unrecoverable error caught"),i}function w9(t,n){return{exception:{values:[y9(t,n)]}}}function C9(t,n){const e=n.stacktrace||n.stack||"",i=function Kct(t){return t&&qct.test(t.message)?1:0}(n),s=function Xct(t){return"number"==typeof t.framesToPop?t.framesToPop:0}(n);try{return t(e,i,s)}catch{}return[]}const qct=/Minified React error #\d+;/i;function Yct(t){const n=t&&t.message;return n?n.error&&"string"==typeof n.error.message?n.error.message:n:"No error message"}function S9(t,n,e,i,s){let r;if(gme(n)&&n.error)return w9(t,n.error);if(bme(n)||function Pat(t){return dw(t,"DOMException")}(n)){const o=n;if("stack"in n)r=w9(t,n);else{const a=o.name||(bme(o)?"DOMError":"DOMException"),l=o.message?`${a}: ${o.message}`:a;r=x9(t,l,e,i),J7(r,l)}return"code"in o&&(r.tags={...r.tags,"DOMException.code":`${o.code}`}),r}return q7(n)?w9(t,n):hw(n)||MR(n)?(r=function Wct(t,n,e,i){const s=Zi(),r=s&&s.getOptions().normalizeDepth,o=function tut(t){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const e=t[n];if(e instanceof Error)return e}}(n),a={__serialized__:Pme(n,r)};if(o)return{exception:{values:[y9(t,o)]},extra:a};const l={exception:{values:[{type:MR(n)?n.constructor.name:i?"UnhandledRejection":"Error",value:Jct(n,{isUnhandledRejection:i})}]},extra:a};if(e){const c=C9(t,e);c.length&&(l.exception.values[0].stacktrace={frames:c})}return l}(t,n,e,s),KT(r,{synthetic:!0}),r):(r=x9(t,n,e,i),J7(r,`${n}`,void 0),KT(r,{synthetic:!0}),r)}function x9(t,n,e,i){const s={};if(i&&e){const r=C9(t,e);r.length&&(s.exception={values:[{value:n,stacktrace:{frames:r}}]})}if(K7(n)){const{__sentry_template_string__:r,__sentry_template_values__:o}=n;return s.logentry={message:r,params:o},s}return s.message=n,s}function Jct(t,{isUnhandledRejection:n}){const e=function Kat(t,n=40){const e=Object.keys(xme(t));e.sort();const i=e[0];if(!i)return"[object has no keys]";if(i.length>=n)return _w(i,n);for(let s=e.length;s>0;s--){const r=e.slice(0,s).join(", ");if(!(r.length>n))return s===e.length?r:_w(r,n)}return""}(t),i=n?"promise rejection":"exception";return gme(t)?`Event \`ErrorEvent\` captured as ${i} with message \`${t.message}\``:MR(t)?`Event \`${function eut(t){try{const n=Object.getPrototypeOf(t);return n?n.constructor.name:void 0}catch{}}(t)}\` (type=${t.type}) captured as ${i}`:`Object captured as ${i} with keys: ${e}`}const Jn=cs;let E9=0;function A_e(){return E9>0}function ww(t,n={},e){if("function"!=typeof t)return t;try{const s=t.__sentry_wrapped__;if(s)return s;if(Z7(t))return t}catch{return t}const i=function(){const s=Array.prototype.slice.call(arguments);try{e&&"function"==typeof e&&e.apply(this,arguments);const r=s.map(o=>ww(o,n));return t.apply(this,r)}catch(r){throw function nut(){E9++,setTimeout(()=>{E9--})}(),i9(o=>{o.addEventProcessor(a=>(n.mechanism&&(J7(a,void 0,void 0),KT(a,n.mechanism)),a.extra={...a.extra,arguments:s},a)),GR(r)}),r}};try{for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s])}catch{}Sme(i,t),Xu(t,"__sentry_wrapped__",i);try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get:()=>t.name})}catch{}return i}class rut extends zct{constructor(n){const e={parentSpanIsAlwaysRootSpan:!0,...n};D_e(e,"browser",["browser"],Jn.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&Jn.document&&Jn.document.addEventListener("visibilitychange",()=>{"hidden"===Jn.document.visibilityState&&this._flushOutcomes()})}eventFromException(n,e){return function Zct(t,n,e,i){const r=S9(t,n,e&&e.syntheticException||void 0,i);return KT(r),r.level="error",e&&e.event_id&&(r.event_id=e.event_id),Nf(r)}(this._options.stackParser,n,e,this._options.attachStacktrace)}eventFromMessage(n,e="info",i){return function Qct(t,n,e="info",i,s){const o=x9(t,n,i&&i.syntheticException||void 0,s);return o.level=e,i&&i.event_id&&(o.event_id=i.event_id),Nf(o)}(this._options.stackParser,n,e,i,this._options.attachStacktrace)}captureUserFeedback(n){if(!this._isEnabled())return void(vc&&kt.warn("SDK not enabled, will not capture user feedback."));const e=function iut(t,{metadata:n,tunnel:e,dsn:i}){const s={event_id:t.event_id,sent_at:(new Date).toISOString(),...n&&n.sdk&&{sdk:{name:n.sdk.name,version:n.sdk.version}},...!!e&&!!i&&{dsn:vw(i)}},r=function sut(t){return[{type:"user_report"},t]}(t);return vv(s,[r])}(n,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(e)}_prepareEvent(n,e,i){return n.platform=n.platform||"javascript",super._prepareEvent(n,e,i)}}const out=1e3;let M_e,T9,I9;function N_e(t){g_("dom",t),b_("dom",aut)}function aut(){if(!ui.document)return;const t=Zu.bind(null,"dom"),n=O_e(t,!0);ui.document.addEventListener("click",n,!1),ui.document.addEventListener("keypress",n,!1),["EventTarget","Node"].forEach(e=>{const i=ui[e]&&ui[e].prototype;!i||!i.hasOwnProperty||!i.hasOwnProperty("addEventListener")||(bc(i,"addEventListener",function(s){return function(r,o,a){if("click"===r||"keypress"==r)try{const l=this,c=l.__sentry_instrumentation_handlers__=l.__sentry_instrumentation_handlers__||{},u=c[r]=c[r]||{refCount:0};if(!u.handler){const d=O_e(t);u.handler=d,s.call(this,r,d,a)}u.refCount++}catch{}return s.call(this,r,o,a)}}),bc(i,"removeEventListener",function(s){return function(r,o,a){if("click"===r||"keypress"==r)try{const l=this,c=l.__sentry_instrumentation_handlers__||{},u=c[r];u&&(u.refCount--,u.refCount<=0&&(s.call(this,r,u.handler,a),u.handler=void 0,delete c[r]),0===Object.keys(c).length&&delete l.__sentry_instrumentation_handlers__)}catch{}return s.call(this,r,o,a)}}))})}function O_e(t,n=!1){return e=>{if(!e||e._sentryCaptured)return;const i=function uut(t){try{return t.target}catch{return null}}(e);if(function cut(t,n){return!("keypress"!==t||n&&n.tagName&&("INPUT"===n.tagName||"TEXTAREA"===n.tagName||n.isContentEditable))}(e.type,i))return;Xu(e,"_sentryCaptured",!0),i&&!i._sentryId&&Xu(i,"_sentryId",zr());const s="keypress"===e.type?"input":e.type;(function lut(t){if(t.type!==T9)return!1;try{if(!t.target||t.target._sentryId!==I9)return!1}catch{}return!0})(e)||(t({event:e,name:s,global:n}),T9=e.type,I9=i?i._sentryId:void 0),clearTimeout(M_e),M_e=ui.setTimeout(()=>{I9=void 0,T9=void 0},out)}}const yv="__sentry_xhr_v3__";function R_e(t){g_("xhr",t),b_("xhr",dut)}function dut(){if(!ui.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(n,e,i){const s=1e3*Hl(),r=Ku(i[0])?i[0].toUpperCase():void 0,o=function hut(t){if(Ku(t))return t;try{return t.toString()}catch{}}(i[1]);if(!r||!o)return n.apply(e,i);e[yv]={method:r,url:o,request_headers:{}},"POST"===r&&o.match(/sentry_key/)&&(e.__sentry_own_request__=!0);const a=()=>{const l=e[yv];if(l&&4===e.readyState){try{l.status_code=e.status}catch{}Zu("xhr",{endTimestamp:1e3*Hl(),startTimestamp:s,xhr:e})}};return"onreadystatechange"in e&&"function"==typeof e.onreadystatechange?e.onreadystatechange=new Proxy(e.onreadystatechange,{apply:(l,c,u)=>(a(),l.apply(c,u))}):e.addEventListener("readystatechange",a),e.setRequestHeader=new Proxy(e.setRequestHeader,{apply(l,c,u){const[d,h]=u,p=c[yv];return p&&Ku(d)&&Ku(h)&&(p.request_headers[d.toLowerCase()]=h),l.apply(c,u)}}),n.apply(e,i)}}),t.send=new Proxy(t.send,{apply(n,e,i){const s=e[yv];return s?(void 0!==i[0]&&(s.body=i[0]),Zu("xhr",{startTimestamp:1e3*Hl(),xhr:e}),n.apply(e,i)):n.apply(e,i)}})}const fut=100;function v_(t,n){const e=Zi(),i=ou();if(!e)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:r=fut}=e.getOptions();if(r<=0)return;const a={timestamp:XT(),...t},l=s?mw(()=>s(a,n)):a;null!==l&&(e.emit&&e.emit("beforeAddBreadcrumb",l,n),i.addBreadcrumb(l,r))}function _ut(){"console"in cs&&Y7.forEach(function(t){t in cs.console&&bc(cs.console,t,function(n){return OR[t]=n,function(...e){Zu("console",{args:e,level:t});const s=OR[t];s&&s.apply(cs.console,e)}})})}function F_e(t,n){const e="fetch";g_(e,t),b_(e,()=>L_e(void 0,n))}function L_e(t,n=!1){n&&!function Tct(){if("string"==typeof EdgeRuntime)return!0;if(!_9())return!1;if(g9(HR.fetch))return!0;let t=!1;const n=HR.document;if(n&&"function"==typeof n.createElement)try{const e=n.createElement("iframe");e.hidden=!0,n.head.appendChild(e),e.contentWindow&&e.contentWindow.fetch&&(t=g9(e.contentWindow.fetch)),n.head.removeChild(e)}catch(e){fw&&kt.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t}()||bc(cs,"fetch",function(e){return function(...i){const{method:s,url:r}=function yut(t){if(0===t.length)return{method:"GET",url:""};if(2===t.length){const[e,i]=t;return{url:P_e(e),method:A9(i,"method")?String(i.method).toUpperCase():"GET"}}const n=t[0];return{url:P_e(n),method:A9(n,"method")?String(n.method).toUpperCase():"GET"}}(i),o={args:i,fetchData:{method:s,url:r},startTimestamp:1e3*Hl()};t||Zu("fetch",{...o});const a=(new Error).stack;return e.apply(cs,i).then(function(){var l=z(function*(c){return t?t(c):Zu("fetch",{...o,endTimestamp:1e3*Hl(),response:c}),c});return function(c){return l.apply(this,arguments)}}(),l=>{throw Zu("fetch",{...o,endTimestamp:1e3*Hl(),error:l}),q7(l)&&void 0===l.stack&&(l.stack=a,Xu(l,"framesToPop",1)),l})}})}function k9(){return k9=z(function*(t,n){if(t&&t.body&&t.body.getReader){let i=function(r){return s.apply(this,arguments)},s=function(){return s=z(function*({done:r}){if(r)return Promise.resolve();try{const o=yield Promise.race([e.read(),new Promise(a=>{setTimeout(()=>{a({done:!0})},5e3)})]);yield i(o)}catch{}}),s.apply(this,arguments)};const e=t.body.getReader();return e.read().then(i).then(n).catch(()=>{})}}),k9.apply(this,arguments)}function vut(t){return D9.apply(this,arguments)}function D9(){return D9=z(function*(t){let n;try{n=t.clone()}catch{return}yield function but(t,n){return k9.apply(this,arguments)}(n,()=>{Zu("fetch-body-resolved",{endTimestamp:1e3*Hl(),response:t})})}),D9.apply(this,arguments)}function A9(t,n){return!!t&&"object"==typeof t&&!!t[n]}function P_e(t){return"string"==typeof t?t:t?A9(t,"url")?t.url:t.toString?t.toString():"":""}const wut=["fatal","error","warning","log","info","debug"];function Cut(t){return"warn"===t?"warning":wut.includes(t)?t:"log"}function wv(t){if(!t)return{};const n=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!n)return{};const e=n[6]||"",i=n[8]||"";return{host:n[4],path:n[5],protocol:n[2],search:e,hash:i,relative:n[5]+e+i}}const $_e=(t={})=>{const n={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:"Breadcrumbs",setup(e){n.console&&function mut(t){const n="console";g_(n,t),b_(n,_ut)}(function Iut(t){return function(e){if(Zi()!==t)return;const i={category:"console",data:{arguments:e.args,logger:"console"},level:Cut(e.level),message:Cme(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;i.message=`Assertion failed: ${Cme(e.args.slice(1)," ")||"console.assert"}`,i.data.arguments=e.args.slice(1)}v_(i,{input:e.args,level:e.level})}}(e)),n.dom&&N_e(function Tut(t,n){return function(i){if(Zi()!==t)return;let s,r,o="object"==typeof n?n.serializeAttribute:void 0,a="object"==typeof n&&"number"==typeof n.maxStringLength?n.maxStringLength:void 0;a&&a>1024&&(vc&&kt.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${a} was configured. Sentry will use 1024 instead.`),a=1024),"string"==typeof o&&(o=[o]);try{const c=i.event,u=function Mut(t){return!!t&&!!t.target}(c)?c.target:c;s=Df(u,{keyAttrs:o,maxStringLength:a}),r=wme(u)}catch{s="<unknown>"}if(0===s.length)return;const l={category:`ui.${i.name}`,message:s};r&&(l.data={"ui.component_name":r}),v_(l,{event:i.event,name:i.name,global:i.global})}}(e,n.dom)),n.xhr&&R_e(function kut(t){return function(e){if(Zi()!==t)return;const{startTimestamp:i,endTimestamp:s}=e,r=e.xhr[yv];if(!i||!s||!r)return;const{method:o,url:a,status_code:l,body:c}=r;v_({category:"xhr",data:{method:o,url:a,status_code:l},type:"http"},{xhr:e.xhr,input:c,startTimestamp:i,endTimestamp:s})}}(e)),n.fetch&&F_e(function Dut(t){return function(e){if(Zi()!==t)return;const{startTimestamp:i,endTimestamp:s}=e;if(s&&(!e.fetchData.url.match(/sentry_key/)||"POST"!==e.fetchData.method))if(e.error)v_({category:"fetch",data:e.fetchData,level:"error",type:"http"},{data:e.error,input:e.args,startTimestamp:i,endTimestamp:s});else{const r=e.response;v_({category:"fetch",data:{...e.fetchData,status_code:r&&r.status},type:"http"},{input:e.args,response:r,startTimestamp:i,endTimestamp:s})}}}(e)),n.history&&KR(function Aut(t){return function(e){if(Zi()!==t)return;let i=e.from,s=e.to;const r=wv(Jn.location.href);let o=i?wv(i):void 0;const a=wv(s);(!o||!o.path)&&(o=r),r.protocol===a.protocol&&r.host===a.host&&(s=a.relative),r.protocol===o.protocol&&r.host===o.host&&(i=o.relative),v_({category:"navigation",data:{from:i,to:s}})}}(e)),n.sentry&&e.on("beforeSendEvent",function Eut(t){return function(e){Zi()===t&&v_({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:f_(e)},{event:e})}}(e))}}},Nut=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Rut=(t={})=>{const n={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:"BrowserApiErrors",setupOnce(){n.setTimeout&&bc(Jn,"setTimeout",B_e),n.setInterval&&bc(Jn,"setInterval",B_e),n.requestAnimationFrame&&bc(Jn,"requestAnimationFrame",Fut),n.XMLHttpRequest&&"XMLHttpRequest"in Jn&&bc(XMLHttpRequest.prototype,"send",Lut);const e=n.eventTarget;e&&(Array.isArray(e)?e:Nut).forEach(Put)}}};function B_e(t){return function(...n){return n[0]=ww(n[0],{mechanism:{data:{function:Af(t)},handled:!1,type:"instrument"}}),t.apply(this,n)}}function Fut(t){return function(n){return t.apply(this,[ww(n,{mechanism:{data:{function:"requestAnimationFrame",handler:Af(t)},handled:!1,type:"instrument"}})])}}function Lut(t){return function(...n){const e=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in e&&"function"==typeof e[s]&&bc(e,s,function(r){const o={mechanism:{data:{function:s,handler:Af(r)},handled:!1,type:"instrument"}},a=Z7(r);return a&&(o.mechanism.data.handler=Af(a)),ww(r,o)})}),t.apply(this,n)}}function Put(t){const e=Jn[t]&&Jn[t].prototype;!e||!e.hasOwnProperty||!e.hasOwnProperty("addEventListener")||(bc(e,"addEventListener",function(i){return function(s,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=ww(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Af(r),target:t},handled:!1,type:"instrument"}}))}catch{}return i.apply(this,[s,ww(r,{mechanism:{data:{function:"addEventListener",handler:Af(r),target:t},handled:!1,type:"instrument"}}),o])}}),bc(e,"removeEventListener",function(i){return function(s,r,o){const a=r;try{const l=a&&a.__sentry_wrapped__;l&&i.call(this,s,l,o)}catch{}return i.call(this,s,a,o)}}))}let QR=null;function V_e(t){const n="error";g_(n,t),b_(n,$ut)}function $ut(){QR=cs.onerror,cs.onerror=function(t,n,e,i,s){return Zu("error",{column:i,error:s,line:e,msg:t,url:n}),!(!QR||QR.__SENTRY_LOADER__)&&QR.apply(this,arguments)},cs.onerror.__SENTRY_INSTRUMENTED__=!0}let JR=null;function z_e(t){const n="unhandledrejection";g_(n,t),b_(n,But)}function But(){JR=cs.onunhandledrejection,cs.onunhandledrejection=function(t){return Zu("unhandledrejection",t),!(JR&&!JR.__SENTRY_LOADER__)||JR.apply(this,arguments)},cs.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const U_e=(t={})=>{const n={onerror:!0,onunhandledrejection:!0,...t};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(e){n.onerror&&(function zut(t){V_e(n=>{const{stackParser:e,attachStacktrace:i}=j_e();if(Zi()!==t||A_e())return;const{msg:s,url:r,line:o,column:a,error:l}=n,c=function Hut(t,n,e,i){const s=t.exception=t.exception||{},r=s.values=s.values||[],o=r[0]=r[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],c=isNaN(parseInt(i,10))?void 0:i,u=isNaN(parseInt(e,10))?void 0:e,d=Ku(n)&&n.length>0?n:yme();return 0===l.length&&l.push({colno:c,filename:d,function:cp,in_app:!0,lineno:u}),t}(S9(e,l||s,void 0,i,!1),r,o,a);c.level="error",n_e(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})})}(e),G_e("onerror")),n.onunhandledrejection&&(function Uut(t){z_e(n=>{const{stackParser:e,attachStacktrace:i}=j_e();if(Zi()!==t||A_e())return;const s=function Gut(t){if(X7(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}(n),r=X7(s)?function jut(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}(s):S9(e,s,void 0,i,!0);r.level="error",n_e(r,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})})}(e),G_e("onunhandledrejection"))}}};function G_e(t){vc&&kt.log(`Global Handler attached: ${t}`)}function j_e(){const t=Zi();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const H_e=()=>({name:"HttpContext",preprocessEvent(t){if(!Jn.navigator&&!Jn.location&&!Jn.document)return;const n=t.request&&t.request.url||Jn.location&&Jn.location.href,{referrer:e}=Jn.document||{},{userAgent:i}=Jn.navigator||{},s={...t.request&&t.request.headers,...e&&{Referer:e},...i&&{"User-Agent":i}},r={...t.request,...n&&{url:n},headers:s};t.request=r}});function Wut(t,n,e=250,i,s,r,o){if(!(r.exception&&r.exception.values&&o&&kf(o.originalException,Error)))return;const a=r.exception.values.length>0?r.exception.values[r.exception.values.length-1]:void 0;a&&(r.exception.values=function qut(t,n){return t.map(e=>(e.value&&(e.value=_w(e.value,n)),e))}(M9(t,n,s,o.originalException,i,r.exception.values,a,0),e))}function M9(t,n,e,i,s,r,o,a){if(r.length>=e+1)return r;let l=[...r];if(kf(i[s],Error)){W_e(o,a);const c=t(n,i[s]),u=l.length;q_e(c,s,u,a),l=M9(t,n,e,i[s],s,[c,...l],c,u)}return Array.isArray(i.errors)&&i.errors.forEach((c,u)=>{if(kf(c,Error)){W_e(o,a);const d=t(n,c),h=l.length;q_e(d,`errors[${u}]`,h,a),l=M9(t,n,e,c,s,[d,...l],d,h)}}),l}function W_e(t,n){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,..."AggregateError"===t.type&&{is_exception_group:!0},exception_id:n}}function q_e(t,n,e,i){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:n,exception_id:e,parent_id:i}}const K_e=(t={})=>{const n=t.limit||5,e=t.key||"cause";return{name:"LinkedErrors",preprocessEvent(i,s,r){const o=r.getOptions();Wut(y9,o.stackParser,o.maxValueLength,e,n,i,s)}}};function Cw(t,n,e,i){const s={filename:t,function:"<anonymous>"===n?cp:n,in_app:!0};return void 0!==e&&(s.lineno=e),void 0!==i&&(s.colno=i),s}const ndt=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,idt=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,sdt=/\((\S*)(?::(\d+))(?::(\d+))\)/,rdt=[30,t=>{const n=ndt.exec(t);if(n){const[,i,s,r]=n;return Cw(i,cp,+s,+r)}const e=idt.exec(t);if(e){if(e[2]&&0===e[2].indexOf("eval")){const o=sdt.exec(e[2]);o&&(e[2]=o[1],e[3]=o[2],e[4]=o[3])}const[s,r]=X_e(e[1]||cp,e[2]);return Cw(r,s,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}}],odt=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,adt=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,ldt=[50,t=>{const n=odt.exec(t);if(n){if(n[3]&&n[3].indexOf(" > eval")>-1){const r=adt.exec(n[3]);r&&(n[1]=n[1]||"eval",n[3]=r[1],n[4]=r[2],n[5]="")}let i=n[3],s=n[1]||cp;return[s,i]=X_e(s,i),Cw(i,s,n[4]?+n[4]:void 0,n[5]?+n[5]:void 0)}}],hdt=Fme(rdt,ldt),X_e=(t,n)=>{const e=-1!==t.indexOf("safari-extension"),i=-1!==t.indexOf("safari-web-extension");return e||i?[-1!==t.indexOf("@")?t.split("@")[0]:cp,e?`safari-extension:${n}`:`safari-web-extension:${n}`]:[t,n]},lu=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,eF={};function N9(t){const n=eF[t];if(n)return n;let e=ui[t];if(g9(e))return eF[t]=e.bind(ui);const i=ui.document;if(i&&"function"==typeof i.createElement)try{const s=i.createElement("iframe");s.hidden=!0,i.head.appendChild(s);const r=s.contentWindow;r&&r[t]&&(e=r[t]),i.head.removeChild(s)}catch(s){lu&&kt.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,s)}return e&&(eF[t]=e.bind(ui))}function Y_e(t){eF[t]=void 0}function Sw(...t){return N9("setTimeout")(...t)}const fdt=6e4;function Z_e(t,n,e=Date.now()){return function _dt(t,n){return t[n]||t.all||0}(t,n)>e}function Q_e(t,{statusCode:n,headers:e},i=Date.now()){const s={...t},r=e&&e["x-sentry-rate-limits"],o=e&&e["retry-after"];if(r)for(const a of r.trim().split(",")){const[l,c,,,u]=a.split(":",5),d=parseInt(l,10),h=1e3*(isNaN(d)?60:d);if(c)for(const p of c.split(";"))"metric_bucket"===p?(!u||u.split(";").includes("custom"))&&(s[p]=i+h):s[p]=i+h;else s.all=i+h}else o?s.all=i+function mdt(t,n=Date.now()){const e=parseInt(`${t}`,10);if(!isNaN(e))return 1e3*e;const i=Date.parse(`${t}`);return isNaN(i)?fdt:i-n}(o,i):429===n&&(s.all=i+6e4);return s}const gdt=64;function J_e(t,n){if("event"===n||"transaction"===n)return Array.isArray(t)?t[1]:void 0}function vdt(t,n=N9("fetch")){let e=0,i=0;return function bdt(t,n,e=function pdt(t){const n=[];function i(o){return n.splice(n.indexOf(o),1)[0]||Promise.resolve(void 0)}return{$:n,add:function s(o){if(!function e(){return void 0===t||n.length<t}())return $R(new dp("Not adding Promise because buffer limit was reached."));const a=o();return-1===n.indexOf(a)&&n.push(a),a.then(()=>i(a)).then(null,()=>i(a).then(null,()=>{})),a},drain:function r(o){return new Yu((a,l)=>{let c=n.length;if(!c)return a(!0);const u=setTimeout(()=>{o&&o>0&&a(!1)},o);n.forEach(d=>{Nf(d).then(()=>{--c||(clearTimeout(u),a(!0))},l)})})}}}(t.bufferSize||gdt)){let i={};return{send:function r(o){const a=[];if(b9(o,(d,h)=>{const p=x_e(h);if(Z_e(i,p)){const f=J_e(d,h);t.recordDroppedEvent("ratelimit_backoff",p,f)}else a.push(d)}),0===a.length)return Nf({});const l=vv(o[0],a),c=d=>{b9(l,(h,p)=>{const f=J_e(h,p);t.recordDroppedEvent(d,x_e(p),f)})};return e.add(()=>n({body:Mct(l)}).then(d=>(void 0!==d.statusCode&&(d.statusCode<200||d.statusCode>=300)&&Ii&&kt.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),i=Q_e(i,d),d),d=>{throw c("network_error"),d})).then(d=>d,d=>{if(d instanceof dp)return Ii&&kt.error("Skipped sending event because buffer is full."),c("queue_overflow"),Nf({});throw d})},flush:o=>e.drain(o)}}(t,function s(r){const o=r.body.length;e+=o,i++;const a={body:r.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:e<=6e4&&i<15,...t.fetchOptions};if(!n)return Y_e("fetch"),$R("No fetch implementation available");try{return n(t.url,a).then(l=>(e-=o,i--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return Y_e("fetch"),e-=o,i--,$R(l)}})}function Sdt(t={}){const n=function wdt(t={}){const n={defaultIntegrations:[h_e(),m_e(),Rut(),$_e(),U_e(),K_e(),__e(),H_e()],release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:Jn.SENTRY_RELEASE&&Jn.SENTRY_RELEASE.id?Jn.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0};return null==t.defaultIntegrations&&delete t.defaultIntegrations,{...n,...t}}(t);if(function Cdt(){const t=typeof Jn.window<"u"&&Jn;if(!t)return!1;const e=t[t.chrome?"chrome":"browser"],i=e&&e.runtime&&e.runtime.id,s=Jn.location&&Jn.location.href||"",o=!!i&&Jn===Jn.top&&["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"].some(l=>s.startsWith(`${l}//`));return!(!i||o||typeof t.nw<"u")}())return void mw(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});vc&&(_9()||kt.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const e={...n,stackParser:ult(n.stackParser||hdt),integrations:Ylt(n),transport:n.transport||vdt},i=function mct(t,n){!0===n.debug&&(Ii?kt.enable():mw(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),br().update(n.initialScope);const i=new t(n);return function _ct(t){br().setClient(t)}(i),i.init(),i}(rut,e);return n.autoSessionTracking&&function xdt(){typeof Jn.document>"u"?vc&&kt.warn("Session tracking in non-browser environment with @sentry/browser is not supported."):(r_e({ignoreDuration:!0}),l_e(),KR(({from:t,to:n})=>{void 0!==t&&t!==n&&(r_e({ignoreDuration:!0}),l_e())}))}(),i}function ege(t={}){if(!Jn.document)return void(vc&&kt.error("Global document not defined in showReportDialog call"));const n=br(),e=n.getClient(),i=e&&e.getDsn();if(!i)return void(vc&&kt.error("DSN not configured for showReportDialog call"));if(n&&(t.user={...n.getUser(),...t.user}),!t.eventId){const a=function qlt(){return ou().lastEventId()}();a&&(t.eventId=a)}const s=Jn.document.createElement("script");s.async=!0,s.crossOrigin="anonymous",s.src=function Ect(t,n){const e=w_e(t);if(!e)return"";const i=`${C_e(e)}embed/error-page/`;let s=`dsn=${vw(e)}`;for(const r in n)if("dsn"!==r&&"onClose"!==r)if("user"===r){const o=n.user;if(!o)continue;o.name&&(s+=`&name=${encodeURIComponent(o.name)}`),o.email&&(s+=`&email=${encodeURIComponent(o.email)}`)}else s+=`&${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`;return`${i}?${s}`}(i,t),t.onLoad&&(s.onload=t.onLoad);const{onClose:r}=t;if(r){const a=l=>{if("__sentry_reportdialog_closed__"===l.data)try{r()}finally{Jn.removeEventListener("message",a)}};Jn.addEventListener("message",a)}const o=Jn.document.head||Jn.document.body;o?o.appendChild(s):vc&&kt.error("Not injecting report dialog. No injection point found in HTML")}function y_(t){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const n=Zi(),e=t||n&&n.getOptions();return!!e&&(e.enableTracing||"tracesSampleRate"in e||"tracesSampler"in e)}class xw{constructor(n={}){this._traceId=n.traceId||zr(),this._spanId=n.spanId||zr().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:0}}end(n){}setAttribute(n,e){return this}setAttributes(n){return this}setStatus(n){return this}updateName(n){return this}isRecording(){return!1}addEvent(n,e,i){return this}addLink(n){return this}addLinks(n){return this}recordException(n,e){}}function tge(t){if(!t||0===t.length)return;const n={};return t.forEach(e=>{const i=e.attributes||{},s=i[BR],r=i[VR];"string"==typeof s&&"number"==typeof r&&(n[e.name]={value:r,unit:s})}),n}const nge="_sentryScope",ige="_sentryIsolationScope";function sge(t){return{scope:t[nge],isolationScope:t[ige]}}class O9{constructor(n={}){this._traceId=n.traceId||zr(),this._spanId=n.spanId||zr().substring(16),this._startTime=n.startTimestamp||Hl(),this._attributes={},this.setAttributes({[Ro]:"manual",[mv]:n.op,...n.attributes}),this._name=n.name,n.parentSpanId&&(this._parentSpanId=n.parentSpanId),"sampled"in n&&(this._sampled=n.sampled),n.endTimestamp&&(this._endTime=n.endTimestamp),this._events=[],this._isStandaloneSpan=n.isStandalone,this._endTime&&this._onSpanEnded()}addLink(n){return this}addLinks(n){return this}recordException(n,e){}spanContext(){const{_spanId:n,_traceId:e,_sampled:i}=this;return{spanId:n,traceId:e,traceFlags:i?Wme:0}}setAttribute(n,e){return void 0===e?delete this._attributes[n]:this._attributes[n]=e,this}setAttributes(n){return Object.keys(n).forEach(e=>this.setAttribute(e,n[e])),this}updateStartTime(n){this._startTime=_v(n)}setStatus(n){return this._status=n,this}updateName(n){return this._name=n,this}end(n){this._endTime||(this._endTime=_v(n),function Tdt(t){if(!Ii)return;const{description:n="< unknown name >",op:e="< unknown op >"}=ts(t),{spanId:i}=t.spanContext(),r=ba(t)===t;kt.log(`[Tracing] Finishing "${e}" ${r?"root ":""}span "${n}" with ID ${i}`)}(this),this._onSpanEnded())}getSpanJSON(){return ga({data:this._attributes,description:this._name,op:this._attributes[mv],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Xme(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Ro],_metrics_summary:h9(this),profile_id:this._attributes["sentry.profile_id"],exclusive_time:this._attributes[c9],measurements:tge(this._events),is_segment:this._isStandaloneSpan&&ba(this)===this||void 0,segment_id:this._isStandaloneSpan?ba(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(n,e,i){Ii&&kt.log("[Tracing] Adding an event to span:",n);const s=oge(e)?e:i||Hl(),r=oge(e)?{}:e||{},o={name:n,time:_v(s),attributes:r};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const n=Zi();if(n&&n.emit("spanEnd",this),!this._isStandaloneSpan&&this!==ba(this))return;if(this._isStandaloneSpan)return void(this._sampled?function Mdt(t){const n=Zi();if(!n)return;const e=t[1];if(!e||0===e.length)return void n.recordDroppedEvent("before_send","span");const i=n.getTransport();i&&i.send(t).then(null,s=>{Ii&&kt.error("Error while sending span:",s)})}(function Vct(t,n){const i=__(t[0]),s=n&&n.getDsn(),r=n&&n.getOptions().tunnel,o={sent_at:(new Date).toISOString(),...function e(u){return!!u.trace_id&&!!u.public_key}(i)&&{trace:i},...!!r&&s&&{dsn:vw(s)}},a=n&&n.getOptions().beforeSendSpan,l=a?u=>a(ts(u)):u=>ts(u),c=[];for(const u of t){const d=l(u);d&&c.push(Oct(d))}return vv(o,c)}([this],n)):(Ii&&kt.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","span")));const i=this._convertSpanToTransaction();i&&(sge(this).scope||br()).captureEvent(i)}_convertSpanToTransaction(){if(!age(ts(this)))return;this._name||(Ii&&kt.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:n,isolationScope:e}=sge(this),s=(n||br()).getClient()||Zi();if(!0!==this._sampled)return Ii&&kt.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(s&&s.recordDroppedEvent("sample_rate","transaction"));const o=zR(this).filter(d=>d!==this&&!function Adt(t){return t instanceof O9&&t.isStandaloneSpan()}(d)).map(d=>ts(d)).filter(age),a=this._attributes[au],l={contexts:{trace:Tlt(this)},spans:o.length>1e3?o.sort((d,h)=>d.start_timestamp-h.start_timestamp).slice(0,1e3):o,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:n,capturedSpanIsolationScope:e,...ga({dynamicSamplingContext:__(this)})},_metrics_summary:h9(this),...a&&{transaction_info:{source:a}}},c=tge(this._events);return c&&Object.keys(c).length&&(Ii&&kt.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),l.measurements=c),l}}function oge(t){return t&&"number"==typeof t||t instanceof Date||Array.isArray(t)}function age(t){return!!(t.start_timestamp&&t.timestamp&&t.span_id&&t.trace_id)}const R9="__SENTRY_SUPPRESS_TRACING__";function Of(t){const n=JT();if(n.startInactiveSpan)return n.startInactiveSpan(t);const e=function L9(t){const e={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const i={...e};return i.startTimestamp=_v(t.startTime),delete i.startTime,i}return e}(t),{forceTransaction:i,parentSpan:s}=t;return(t.scope?o=>i9(t.scope,o):void 0!==s?o=>tF(s,o):o=>o())(()=>{const o=br(),a=function P9(t){const n=LR(t);if(!n)return;const e=Zi();return(e?e.getOptions():{}).parentSpanIsAlwaysRootSpan?ba(n):n}(o);return t.onlyIfParent&&!a?new xw:function F9({parentSpan:t,spanArguments:n,forceTransaction:e,scope:i}){if(!y_())return new xw;const s=ou();let r;if(t&&!e)r=function Ndt(t,n,e){const{spanId:i,traceId:s}=t.spanContext(),r=!n.getScopeData().sdkProcessingMetadata[R9]&&gv(t),o=r?new O9({...e,parentSpanId:i,traceId:s,sampled:r}):new xw({traceId:s});Yme(t,o);const a=Zi();return a&&(a.emit("spanStart",o),e.endTimestamp&&a.emit("spanEnd",o)),o}(t,i,n),Yme(t,r);else if(t){const o=__(t),{traceId:a,spanId:l}=t.spanContext(),c=gv(t);r=lge({traceId:a,parentSpanId:l,...n},i,c),Qme(r,o)}else{const{traceId:o,dsc:a,parentSpanId:l,sampled:c}={...s.getPropagationContext(),...i.getPropagationContext()};r=lge({traceId:o,parentSpanId:l,...n},i,c),a&&Qme(r,a)}return function Edt(t){if(!Ii)return;const{description:n="< unknown name >",op:e="< unknown op >",parent_span_id:i}=ts(t),{spanId:s}=t.spanContext(),r=gv(t),o=ba(t),a=o===t,l=`[Tracing] Starting ${r?"sampled":"unsampled"} ${a?"root ":""}span`,c=[`op: ${e}`,`name: ${n}`,`ID: ${s}`];if(i&&c.push(`parent ID: ${i}`),!a){const{op:u,description:d}=ts(o);c.push(`root ID: ${o.spanContext().spanId}`),u&&c.push(`root op: ${u}`),d&&c.push(`root description: ${d}`)}kt.log(`${l}\n  ${c.join("\n  ")}`)}(r),function Ddt(t,n,e){t&&(Xu(t,ige,e),Xu(t,nge,n))}(r,i,s),r}({parentSpan:a,spanArguments:e,forceTransaction:i,scope:o})})}function tF(t,n){const e=JT();return e.withActiveSpan?e.withActiveSpan(t,n):i9(i=>(YT(i,t||void 0),n(i)))}function JT(){return ZT(uw())}function lge(t,n,e){const i=Zi(),s=i&&i.getOptions()||{},{name:r="",attributes:o}=t,[a,l]=n.getScopeData().sdkProcessingMetadata[R9]?[!1]:function Idt(t,n){if(!y_(t))return[!1];let e;e="function"==typeof t.tracesSampler?t.tracesSampler(n):void 0!==n.parentSampled?n.parentSampled:typeof t.tracesSampleRate<"u"?t.tracesSampleRate:1;const i=YR(e);return void 0===i?(Ii&&kt.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):i?Math.random()<i?[!0,i]:(Ii&&kt.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(e)})`),[!1,i]):(Ii&&kt.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,i])}(s,{name:r,parentSampled:e,attributes:o,transactionContext:{name:r,parentSampled:e}}),c=new O9({...t,attributes:{[au]:"custom",...t.attributes},sampled:a});return void 0!==l&&c.setAttribute(Ume,l),i&&i.emit("spanStart",c),c}function yc(t){let n,e=t[0],i=1;for(;i<t.length;){const s=t[i],r=t[i+1];if(i+=2,("optionalAccess"===s||"optionalCall"===s)&&null==e)return;"access"===s||"optionalAccess"===s?(n=e,e=r(e)):("call"===s||"optionalCall"===s)&&(e=r((...o)=>e.call(n,...o)),n=void 0)}return e}const Ew=(t,n,e,i)=>{let s,r;return o=>{n.value>=0&&(o||i)&&(r=n.value-(s||0),(r||void 0===s)&&(s=n.value,n.delta=r,n.rating=((t,n)=>t>n[1]?"poor":t>n[0]?"needs-improvement":"good")(n.value,e),t(n)))}},eI=()=>ui.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],nF=()=>{const t=eI();return t&&t.activationStart||0},Tw=(t,n)=>{const e=eI();let i="navigate";return e&&(ui.document&&ui.document.prerendering||nF()>0?i="prerender":ui.document&&ui.document.wasDiscarded?i="restore":e.type&&(i=e.type.replace(/_/g,"-"))),{name:t,value:typeof n>"u"?-1:n,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:i}},Cv=(t,n,e)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const i=new PerformanceObserver(s=>{Promise.resolve().then(()=>{n(s.getEntries())})});return i.observe(Object.assign({type:t,buffered:!0},e||{})),i}}catch{}},tI=t=>{const n=e=>{("pagehide"===e.type||ui.document&&"hidden"===ui.document.visibilityState)&&t(e)};ui.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))},$9=t=>{let n=!1;return e=>{n||(t(e),n=!0)}};let nI=-1;const iF=t=>{"hidden"===ui.document.visibilityState&&nI>-1&&(nI="visibilitychange"===t.type?t.timeStamp:0,removeEventListener("visibilitychange",iF,!0),removeEventListener("prerenderingchange",iF,!0))},sF=()=>(ui.document&&nI<0&&(nI="hidden"!==ui.document.visibilityState||ui.document.prerendering?1/0:0,addEventListener("visibilitychange",iF,!0),addEventListener("prerenderingchange",iF,!0)),{get firstHiddenTime(){return nI}}),iI=t=>{ui.document&&ui.document.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},Pdt=[1800,3e3],Bdt=[.1,.25],Vdt=(t,n={})=>{((t,n={})=>{iI(()=>{const e=sF(),i=Tw("FCP");let s;const o=Cv("paint",a=>{a.forEach(l=>{"first-contentful-paint"===l.name&&(o.disconnect(),l.startTime<e.firstHiddenTime&&(i.value=Math.max(l.startTime-nF(),0),i.entries.push(l),s(!0)))})});o&&(s=Ew(t,i,Pdt,n.reportAllChanges))})})($9(()=>{const e=Tw("CLS",0);let i,s=0,r=[];const o=l=>{l.forEach(c=>{if(!c.hadRecentInput){const u=r[0],d=r[r.length-1];s&&u&&d&&c.startTime-d.startTime<1e3&&c.startTime-u.startTime<5e3?(s+=c.value,r.push(c)):(s=c.value,r=[c])}}),s>e.value&&(e.value=s,e.entries=r,i())},a=Cv("layout-shift",o);a&&(i=Ew(t,e,Bdt,n.reportAllChanges),tI(()=>{o(a.takeRecords()),i(!0)}),setTimeout(i,0))}))},zdt=[100,300],Udt=(t,n={})=>{iI(()=>{const e=sF(),i=Tw("FID");let s;const r=l=>{l.startTime<e.firstHiddenTime&&(i.value=l.processingStart-l.startTime,i.entries.push(l),s(!0))},o=l=>{l.forEach(r)},a=Cv("first-input",o);s=Ew(t,i,zdt,n.reportAllChanges),a&&tI($9(()=>{o(a.takeRecords()),a.disconnect()}))})};let uge=0,B9=1/0,rF=0;const Gdt=t=>{t.forEach(n=>{n.interactionId&&(B9=Math.min(B9,n.interactionId),rF=Math.max(rF,n.interactionId),uge=rF?(rF-B9)/7+1:0)})};let V9;const Wdt=[200,500],dge=()=>(V9?uge:performance.interactionCount||0)-0,Rf=[],z9={},pge=t=>{const n=Rf[Rf.length-1],e=z9[t.interactionId];if(e||Rf.length<10||n&&t.duration>n.latency){if(e)e.entries.push(t),e.latency=Math.max(e.latency,t.duration);else{const i={id:t.interactionId,latency:t.duration,entries:[t]};z9[i.id]=i,Rf.push(i)}Rf.sort((i,s)=>s.latency-i.latency),Rf.splice(10).forEach(i=>{delete z9[i.id]})}},Xdt=(t,n={})=>{iI(()=>{"interactionCount"in performance||V9||(V9=Cv("event",Gdt,{type:"event",buffered:!0,durationThreshold:0}));const e=Tw("INP");let i;const s=o=>{o.forEach(l=>{l.interactionId&&pge(l),"first-input"===l.entryType&&!Rf.some(u=>u.entries.some(d=>l.duration===d.duration&&l.startTime===d.startTime))&&pge(l)});const a=(()=>{const t=Math.min(Rf.length-1,Math.floor(dge()/50));return Rf[t]})();a&&a.latency!==e.value&&(e.value=a.latency,e.entries=a.entries,i())},r=Cv("event",s,{durationThreshold:null!=n.durationThreshold?n.durationThreshold:40});i=Ew(t,e,Wdt,n.reportAllChanges),r&&("PerformanceEventTiming"in ui&&"interactionId"in PerformanceEventTiming.prototype&&r.observe({type:"first-input",buffered:!0}),tI(()=>{s(r.takeRecords()),e.value<0&&dge()>0&&(e.value=0,e.entries=[]),i(!0)}))})},Ydt=[2500,4e3],fge={},Zdt=(t,n={})=>{iI(()=>{const e=sF(),i=Tw("LCP");let s;const r=a=>{const l=a[a.length-1];l&&l.startTime<e.firstHiddenTime&&(i.value=Math.max(l.startTime-nF(),0),i.entries=[l],s())},o=Cv("largest-contentful-paint",r);if(o){s=Ew(t,i,Ydt,n.reportAllChanges);const a=$9(()=>{fge[i.id]||(r(o.takeRecords()),o.disconnect(),fge[i.id]=!0,s(!0))});["keydown","click"].forEach(l=>{ui.document&&addEventListener(l,()=>setTimeout(a,0),!0)}),tI(a)}})},Qdt=[800,1800],U9=t=>{ui.document&&ui.document.prerendering?iI(()=>U9(t)):ui.document&&"complete"!==ui.document.readyState?addEventListener("load",()=>U9(t),!0):setTimeout(t,0)},Jdt=(t,n={})=>{const e=Tw("TTFB"),i=Ew(t,e,Qdt,n.reportAllChanges);U9(()=>{const s=eI();if(s){const r=s.responseStart;if(r<=0||r>performance.now())return;e.value=Math.max(r-nF(),0),e.entries=[s],i(!0)}})},sI={},oF={};let mge,_ge,gge,bge,vge;function G9(t,n=!1){return rI("cls",t,tht,mge,n)}function yge(t,n=!1){return rI("lcp",t,iht,gge,n)}function wge(t){return rI("fid",t,nht,_ge)}function Cge(t){return rI("inp",t,rht,vge)}function Iw(t,n){return Sge(t,n),oF[t]||(function oht(t){const n={};"event"===t&&(n.durationThreshold=0),Cv(t,e=>{kw(t,{entries:e})},n)}(t),oF[t]=!0),xge(t,n)}function kw(t,n){const e=sI[t];if(e&&e.length)for(const i of e)try{i(n)}catch(s){lu&&kt.error(`Error while triggering instrumentation handler.\nType: ${t}\nName: ${Af(i)}\nError:`,s)}}function tht(){return Vdt(t=>{kw("cls",{metric:t}),mge=t},{reportAllChanges:!0})}function nht(){return Udt(t=>{kw("fid",{metric:t}),_ge=t})}function iht(){return Zdt(t=>{kw("lcp",{metric:t}),gge=t},{reportAllChanges:!0})}function sht(){return Jdt(t=>{kw("ttfb",{metric:t}),bge=t})}function rht(){return Xdt(t=>{kw("inp",{metric:t}),vge=t})}function rI(t,n,e,i,s=!1){let r;return Sge(t,n),oF[t]||(r=e(),oF[t]=!0),i&&n({metric:i}),xge(t,n,s?r:void 0)}function Sge(t,n){sI[t]=sI[t]||[],sI[t].push(n)}function xge(t,n,e){return()=>{e&&e();const i=sI[t];if(!i)return;const s=i.indexOf(n);-1!==s&&i.splice(s,1)}}function j9(t){return"number"==typeof t&&isFinite(t)}function Dw(t,n,e,{...i}){const s=ts(t).start_timestamp;return s&&s>n&&"function"==typeof t.updateStartTime&&t.updateStartTime(n),tF(t,()=>{const r=Of({startTime:n,...i});return r&&r.end(e),r})}function Ege(t){const n=Zi();if(!n)return;const{name:e,transaction:i,attributes:s,startTime:r}=t,{release:o,environment:a}=n.getOptions(),l=n.getIntegrationByName("Replay"),c=l&&l.getReplayId(),u=br(),d=u.getUser(),h=void 0!==d?d.email||d.id||d.ip_address:void 0;let p;try{p=u.getScopeData().contexts.profile.profile_id}catch{}return Of({name:e,attributes:{release:o,environment:a,user:h||void 0,profile_id:p||void 0,replay_id:c||void 0,transaction:i,"user_agent.original":ui.navigator&&ui.navigator.userAgent,...s},startTime:r,experimental:{standalone:!0}})}function H9(){return ui&&ui.addEventListener&&ui.performance}function po(t){return t/1e3}const dht=2147483647;let hp,oI,Tge=0,Qa={};function hht({recordClsStandaloneSpans:t}){const n=H9();if(n&&Wl){n.mark&&ui.performance.mark("sentry-tracing-init");const e=function bht(){return wge(({metric:t})=>{const n=t.entries[t.entries.length-1];if(!n)return;const e=po(Wl),i=po(n.startTime);lu&&kt.log("[Measurements] Adding FID"),Qa.fid={value:t.value,unit:"millisecond"},Qa["mark.fid"]={value:e+i,unit:"second"}})}(),i=function ght(){return yge(({metric:t})=>{const n=t.entries[t.entries.length-1];n&&(lu&&kt.log("[Measurements] Adding LCP"),Qa.lcp={value:t.value,unit:"millisecond"},hp=n)},!0)}(),s=function vht(){return function eht(t){return rI("ttfb",t,sht,bge)}(({metric:t})=>{t.entries[t.entries.length-1]&&(lu&&kt.log("[Measurements] Adding TTFB"),Qa.ttfb={value:t.value,unit:"millisecond"})})}(),r=t?function lht(){let n,e,t=0;if(!function uht(){try{return yc([PerformanceObserver,"access",t=>t.supportedEntryTypes,"optionalAccess",t=>t.includes,"call",t=>t("layout-shift")])}catch{return!1}}())return;let i=!1;function s(){i||(i=!0,e&&function cht(t,n,e){lu&&kt.log(`Sending CLS span (${t})`);const i=po(Wl)+(yc([n,"optionalAccess",c=>c.startTime])||0),s=po(yc([n,"optionalAccess",c=>c.duration])||0),r=br().getScopeData().transactionName,l=Ege({name:n?Df(yc([n,"access",c=>c.sources,"access",c=>c[0],"optionalAccess",c=>c.node])):"Layout shift",transaction:r,attributes:ga({[Ro]:"auto.http.browser.cls",[mv]:"ui.webvital.cls",[c9]:yc([n,"optionalAccess",c=>c.duration])||0,"sentry.pageload.span_id":e}),startTime:i});yc([l,"optionalAccess",c=>c.addEvent,"call",c=>c("cls",{[BR]:"",[VR]:t})]),yc([l,"optionalAccess",c=>c.end,"call",c=>c(i+s)])}(t,n,e),r())}const r=G9(({metric:o})=>{const a=o.entries[o.entries.length-1];a&&(t=o.value,n=a)},!0);tI(()=>{s()}),setTimeout(()=>{const a=yc([Zi(),"optionalAccess",d=>d.on,"call",d=>d("startNavigationSpan",()=>{s(),a&&a()})]),l=va(),c=l&&ba(l),u=c&&ts(c);u&&"pageload"===u.op&&(e=c.spanContext().spanId)},0)}():function _ht(){return G9(({metric:t})=>{const n=t.entries[t.entries.length-1];n&&(lu&&kt.log(`[Measurements] Adding CLS ${t.value}`),Qa.cls={value:t.value,unit:""},oI=n)},!0)}();return()=>{e(),i(),s(),r&&r()}}return()=>{}}function aF(t,n,e,i,s,r){const o=r?n[r]:n[`${e}End`],a=n[`${e}Start`];!a||!o||Dw(t,i+po(a),i+po(o),{op:"browser",name:s||e,attributes:{[Ro]:"auto.ui.browser.metrics"}})}function W9(t,n,e,i){const s=n[e];null!=s&&s<dht&&(t[i]=s)}const q9=[],lF=new Map;const Ige={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"},cF={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3};function kge(t,n={}){const e=new Map;let s,i=!1,r="externalFinish",o=!n.disableAutoFinish;const a=[],{idleTimeout:l=cF.idleTimeout,finalTimeout:c=cF.finalTimeout,childSpanTimeout:u=cF.childSpanTimeout,beforeSpanEnd:d}=n,h=Zi();if(!h||!y_())return new xw;const p=br(),f=va(),g=function Fht(t){const n=Of(t);return YT(br(),n),Ii&&kt.log("[Tracing] Started span is an idle span"),n}(t);function v(){s&&(clearTimeout(s),s=void 0)}function y(R){v(),s=setTimeout(()=>{!i&&0===e.size&&o&&(r="idleTimeout",g.end(R))},l)}function w(R){s=setTimeout(()=>{!i&&o&&(r="heartbeatFailed",g.end(R))},u)}function k(R){i=!0,e.clear(),a.forEach(Q=>Q()),YT(p,f);const N=ts(g),{start_timestamp:D}=N;if(!D)return;(N.data||{})[l9]||g.setAttribute(l9,r),kt.log(`[Tracing] Idle span "${N.op}" finished`);const $=zR(g).filter(Q=>Q!==g);let j=0;$.forEach(Q=>{Q.isRecording()&&(Q.setStatus({code:Oa,message:"cancelled"}),Q.end(R),Ii&&kt.log("[Tracing] Cancelling span since span ended early",JSON.stringify(Q,void 0,2)));const Y=ts(Q),{timestamp:ce=0,start_timestamp:Ce=0}=Y,Z=Ce<=R,te=ce-Ce<=(c+l)/1e3;if(Ii){const be=JSON.stringify(Q,void 0,2);Z?te||kt.log("[Tracing] Discarding span since it finished after idle span final timeout",be):kt.log("[Tracing] Discarding span since it happened after idle span was finished",be)}(!te||!Z)&&(function Alt(t,n){t[bv]&&t[bv].delete(n)}(g,Q),j++)}),j>0&&g.setAttribute("sentry.idle_span_discarded_spans",j)}return g.end=new Proxy(g.end,{apply(R,N,D){d&&d(g);const[F,...$]=D,Q=_v(F||Hl()),Y=zR(g).filter(te=>te!==g);if(!Y.length)return k(Q),Reflect.apply(R,N,[Q,...$]);const ce=Y.map(te=>ts(te).timestamp).filter(te=>!!te),Ce=ce.length?Math.max(...ce):void 0,Z=ts(g).start_timestamp,le=Math.min(Z?Z+c/1e3:1/0,Math.max(Z||-1/0,Math.min(Q,Ce||1/0)));return k(le),Reflect.apply(R,N,[le,...$])}}),a.push(h.on("spanStart",R=>{i||R===g||ts(R).timestamp||zR(g).includes(R)&&function x(R){v(),e.set(R,!0),w(Hl()+u/1e3)}(R.spanContext().spanId)})),a.push(h.on("spanEnd",R=>{i||function T(R){e.has(R)&&e.delete(R),0===e.size&&y(Hl()+l/1e3)}(R.spanContext().spanId)})),a.push(h.on("idleSpanEnableAutoFinish",R=>{R===g&&(o=!0,y(),e.size&&w())})),n.disableAutoFinish||y(),setTimeout(()=>{i||(g.setStatus({code:Oa,message:"deadline_exceeded"}),r="finalTimeout",g.end())},c),g}let Dge=!1;function K9(){const t=va(),n=t&&ba(t);if(n){const e="internal_error";Ii&&kt.log(`[Tracing] Root span: ${e} -> Global error occured`),n.setStatus({code:Oa,message:e})}}K9.tag="sentry_tracingErrorCallback";const Age=new WeakMap,X9=new Map,Y9={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0};function Uht(t,n){const{traceFetch:e,traceXHR:i,shouldCreateSpanForRequest:s,enableHTTPTimings:r,tracePropagationTargets:o}={traceFetch:Y9.traceFetch,traceXHR:Y9.traceXHR,...n},a="function"==typeof s?s:u=>!0,l=u=>function Wht(t,n){const e=Jn.location&&Jn.location.href;if(e){let i,s;try{i=new URL(t,e),s=new URL(e).origin}catch{return!1}const r=i.origin===s;return n?p_(i.toString(),n)||r&&p_(i.pathname,n):r}{const i=!!t.match(/^\/(?!\/)/);return n?p_(t,n):i}}(u,o),c={};e&&(t.addEventProcessor(u=>("transaction"===u.type&&u.spans&&u.spans.forEach(d=>{if("http.client"===d.op){const h=X9.get(d.span_id);h&&(d.timestamp=h/1e3,X9.delete(d.span_id))}}),u)),function gut(t){const n="fetch-body-resolved";g_(n,t),b_(n,()=>L_e(vut))}(u=>{if(u.response){const d=Age.get(u.response);d&&u.endTimestamp&&X9.set(d,u.endTimestamp)}}),F_e(u=>{const d=function $ht(t,n,e,i,s="auto.http.browser"){if(!t.fetchData)return;const r=y_()&&n(t.fetchData.url);if(t.endTimestamp&&r){const f=t.fetchData.__span;if(!f)return;const g=i[f];return void(g&&(function zht(t,n){if(n.response){jme(t,n.response.status);const e=n.response&&n.response.headers&&n.response.headers.get("content-length");if(e){const i=parseInt(e);i>0&&t.setAttribute("http.response_content_length",i)}}else n.error&&t.setStatus({code:Oa,message:"internal_error"});t.end()}(g,t),delete i[f]))}const o=br(),a=Zi(),{method:l,url:c}=t.fetchData,u=function Vht(t){try{return new URL(t).href}catch{return}}(c),d=u?wv(u).host:void 0,h=!!va(),p=r&&h?Of({name:`${l} ${c}`,attributes:{url:c,type:"fetch","http.method":l,"http.url":u,"server.address":d,[Ro]:s,[mv]:"http.client"}}):new xw;if(t.fetchData.__span=p.spanContext().spanId,i[p.spanContext().spanId]=p,e(t.fetchData.url)&&a){const f=t.args[0];t.args[1]=t.args[1]||{};const g=t.args[1];g.headers=function Bht(t,n,e,i,s){const r=ou(),{traceId:o,spanId:a,sampled:l,dsc:c}={...r.getPropagationContext(),...e.getPropagationContext()},u=s?qme(s):u9(o,a,l),d=Vme(c||(s?__(s):UR(o,n))),h=i.headers||(typeof Request<"u"&&kf(t,Request)?t.headers:void 0);if(h){if(typeof Headers<"u"&&kf(h,Headers)){const p=new Headers(h);return p.append("sentry-trace",u),d&&p.append(a9,d),p}if(Array.isArray(h)){const p=[...h,["sentry-trace",u]];return d&&p.push([a9,d]),p}{const p="baggage"in h?h.baggage:void 0,f=[];return Array.isArray(p)?f.push(...p):p&&f.push(p),d&&f.push(d),{...h,"sentry-trace":u,baggage:f.length>0?f.join(","):void 0}}}return{"sentry-trace":u,baggage:d}}(f,a,o,g,y_()&&h?p:void 0)}return p}(u,a,l,c);if(u.response&&u.fetchData.__span&&Age.set(u.response,u.fetchData.__span),d){const h=Nge(u.fetchData.url),p=h?wv(h).host:void 0;d.setAttributes({"http.url":h,"server.address":p})}r&&d&&Mge(d)})),i&&R_e(u=>{const d=function qht(t,n,e,i){const s=t.xhr,r=s&&s[yv];if(!s||s.__sentry_own_request__||!r)return;const o=y_()&&n(r.url);if(t.endTimestamp&&o){const h=s.__sentry_xhr_span_id__;if(!h)return;const p=i[h];return void(p&&void 0!==r.status_code&&(jme(p,r.status_code),p.end(),delete i[h]))}const a=Nge(r.url),l=a?wv(a).host:void 0,c=!!va(),u=o&&c?Of({name:`${r.method} ${r.url}`,attributes:{type:"xhr","http.method":r.method,"http.url":a,url:r.url,"server.address":l,[Ro]:"auto.http.browser",[mv]:"http.client"}}):new xw;s.__sentry_xhr_span_id__=u.spanContext().spanId,i[s.__sentry_xhr_span_id__]=u;const d=Zi();return s.setRequestHeader&&e(r.url)&&d&&function Kht(t,n,e){const i=br(),s=ou(),{traceId:r,spanId:o,sampled:a,dsc:l}={...s.getPropagationContext(),...i.getPropagationContext()};!function Xht(t,n,e){try{t.setRequestHeader("sentry-trace",n),e&&t.setRequestHeader(a9,e)}catch{}}(t,e&&y_()?qme(e):u9(r,o,a),Vme(l||(e?__(e):UR(r,n))))}(s,d,y_()&&c?u:void 0),u}(u,a,l,c);r&&d&&Mge(d)})}function Mge(t){const{url:n}=ts(t).data||{};if(!n||"string"!=typeof n)return;const e=Iw("resource",({entries:i})=>{i.forEach(s=>{(function Ght(t){return"resource"===t.entryType&&"initiatorType"in t&&"string"==typeof t.nextHopProtocol&&("fetch"===t.initiatorType||"xmlhttprequest"===t.initiatorType)})(s)&&s.name.endsWith(n)&&(function Hht(t){const{name:n,version:e}=function jht(t){let n="unknown",e="unknown",i="";for(const s of t){if("/"===s){[n,e]=t.split("/");break}if(!isNaN(Number(s))){n="h"===i?"http":i,e=t.split(i)[1];break}i+=s}return i===t&&(n=i),{name:n,version:e}}(t.nextHopProtocol),i=[];return i.push(["network.protocol.version",e],["network.protocol.name",n]),Wl?[...i,["http.request.redirect_start",pp(t.redirectStart)],["http.request.fetch_start",pp(t.fetchStart)],["http.request.domain_lookup_start",pp(t.domainLookupStart)],["http.request.domain_lookup_end",pp(t.domainLookupEnd)],["http.request.connect_start",pp(t.connectStart)],["http.request.secure_connection_start",pp(t.secureConnectionStart)],["http.request.connection_end",pp(t.connectEnd)],["http.request.request_start",pp(t.requestStart)],["http.request.response_start",pp(t.responseStart)],["http.request.response_end",pp(t.responseEnd)]]:i}(s).forEach(o=>t.setAttribute(...o)),setTimeout(e))})})}function pp(t=0){return((Wl||performance.timeOrigin)+t)/1e3}function Nge(t){try{return new URL(t,Jn.location.origin).href}catch{return}}const Zht={...cF,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,_experiments:{},...Y9},Qht=(t={})=>{!function Lht(){Dge||(Dge=!0,V_e(K9),z_e(K9))}();const{enableInp:n,enableLongTask:e,enableLongAnimationFrame:i,_experiments:{enableInteractions:s,enableStandaloneClsSpans:r},beforeStartSpan:o,idleTimeout:a,finalTimeout:l,childSpanTimeout:c,markBackgroundSpan:u,traceFetch:d,traceXHR:h,shouldCreateSpanForRequest:p,enableHTTPTimings:f,instrumentPageLoad:g,instrumentNavigation:v}={...Zht,...t},y=hht({recordClsStandaloneSpans:r||!1});n&&function kht(){if(H9()&&Wl){const n=function Dht(){return Cge(({metric:t})=>{if(null==t.value)return;const n=t.entries.find(f=>f.duration===t.value&&Ige[f.name]);if(!n)return;const{interactionId:e}=n,i=Ige[n.name],s=po(Wl+n.startTime),r=po(t.value),o=va(),a=o?ba(o):void 0,c=(null!=e?lF.get(e):void 0)||a,u=c?ts(c).description:br().getScopeData().transactionName,p=Ege({name:Df(n.target),transaction:u,attributes:ga({[Ro]:"auto.http.browser.inp",[mv]:`ui.interaction.${i}`,[c9]:n.duration}),startTime:s});yc([p,"optionalAccess",f=>f.addEvent,"call",f=>f("inp",{[BR]:"millisecond",[VR]:t.value})]),yc([p,"optionalAccess",f=>f.end,"call",f=>f(s+r)])})}();return()=>{n()}}return()=>{}}(),i&&cs.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?function fht(){new PerformanceObserver(n=>{if(va())for(const e of n.getEntries()){if(!e.scripts[0])continue;const i=po(Wl+e.startTime),s=po(e.duration),r={[Ro]:"auto.ui.browser.metrics"},o=e.scripts[0],{invoker:a,invokerType:l,sourceURL:c,sourceFunctionName:u,sourceCharPosition:d}=o;r["browser.script.invoker"]=a,r["browser.script.invoker_type"]=l,c&&(r["code.filepath"]=c),u&&(r["code.function"]=u),-1!==d&&(r["browser.script.source_char_position"]=d);const h=Of({name:"Main UI thread blocked",op:"ui.long-animation-frame",startTime:i,attributes:r});h&&h.end(i+s)}}).observe({type:"long-animation-frame",buffered:!0})}():e&&function pht(){Iw("longtask",({entries:t})=>{if(va())for(const n of t){const e=po(Wl+n.startTime),i=po(n.duration),s=Of({name:"Main UI thread blocked",op:"ui.long-task",startTime:e,attributes:{[Ro]:"auto.ui.browser.metrics"}});s&&s.end(e+i)}})}(),s&&function mht(){Iw("event",({entries:t})=>{if(va())for(const n of t)if("click"===n.name){const e=po(Wl+n.startTime),i=po(n.duration),s={name:Df(n.target),op:`ui.interaction.${n.name}`,startTime:e,attributes:{[Ro]:"auto.ui.browser.metrics"}},r=wme(n.target);r&&(s.attributes["ui.component_name"]=r);const o=Of(s);o&&o.end(e+i)}})}();const w={name:void 0,source:void 0};function x(T,k){const R="pageload"===k.op,N=o?o(k):k,D=N.attributes||{};k.name!==N.name&&(D[au]="custom",N.attributes=D),w.name=N.name,w.source=D[au];const F=kge(N,{idleTimeout:a,finalTimeout:l,childSpanTimeout:c,disableAutoFinish:R,beforeSpanEnd:j=>{y(),function yht(t,n){const e=H9();if(!e||!ui.performance.getEntries||!Wl)return;lu&&kt.log("[Tracing] Adding & adjusting spans using Performance API");const i=po(Wl),s=e.getEntries(),{op:r,start_timestamp:o}=ts(t);if(s.slice(Tge).forEach(a=>{const l=po(a.startTime),c=po(Math.max(0,a.duration));if(!("navigation"===r&&o&&i+l<o))switch(a.entryType){case"navigation":!function Cht(t,n,e){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(i=>{aF(t,n,i,e)}),aF(t,n,"secureConnection",e,"TLS/SSL","connectEnd"),aF(t,n,"fetch",e,"cache","domainLookupStart"),aF(t,n,"domainLookup",e,"DNS"),function Sht(t,n,e){const i=e+po(n.requestStart),s=e+po(n.responseEnd),r=e+po(n.responseStart);n.responseEnd&&(Dw(t,i,s,{op:"browser",name:"request",attributes:{[Ro]:"auto.ui.browser.metrics"}}),Dw(t,r,s,{op:"browser",name:"response",attributes:{[Ro]:"auto.ui.browser.metrics"}}))}(t,n,e)}(t,a,i);break;case"mark":case"paint":case"measure":{!function wht(t,n,e,i,s){const r=eI(),o=po(r?r.requestStart:0),a=s+Math.max(e,o),l=s+e,c=l+i,u={[Ro]:"auto.resource.browser.metrics"};a!==l&&(u["sentry.browser.measure_happened_before_request"]=!0,u["sentry.browser.measure_start_time"]=a),Dw(t,a,c,{name:n.name,op:n.entryType,attributes:u})}(t,a,l,c,i);const u=sF(),d=a.startTime<u.firstHiddenTime;"first-paint"===a.name&&d&&(lu&&kt.log("[Measurements] Adding FP"),Qa.fp={value:a.startTime,unit:"millisecond"}),"first-contentful-paint"===a.name&&d&&(lu&&kt.log("[Measurements] Adding FCP"),Qa.fcp={value:a.startTime,unit:"millisecond"});break}case"resource":!function xht(t,n,e,i,s,r){if("xmlhttprequest"===n.initiatorType||"fetch"===n.initiatorType)return;const o=wv(e),a={[Ro]:"auto.resource.browser.metrics"};W9(a,n,"transferSize","http.response_transfer_size"),W9(a,n,"encodedBodySize","http.response_content_length"),W9(a,n,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in n&&(a["resource.render_blocking_status"]=n.renderBlockingStatus),o.protocol&&(a["url.scheme"]=o.protocol.split(":").pop()),o.host&&(a["server.address"]=o.host),a["url.same_origin"]=e.includes(ui.location.origin);const l=r+i;Dw(t,l,l+s,{name:e.replace(ui.location.origin,""),op:n.initiatorType?`resource.${n.initiatorType}`:"resource.other",attributes:a})}(t,a,a.name,l,c,i)}}),Tge=Math.max(s.length-1,0),function Eht(t){const n=ui.navigator;if(!n)return;const e=n.connection;e&&(e.effectiveType&&t.setAttribute("effectiveConnectionType",e.effectiveType),e.type&&t.setAttribute("connectionType",e.type),j9(e.rtt)&&(Qa["connection.rtt"]={value:e.rtt,unit:"millisecond"})),j9(n.deviceMemory)&&t.setAttribute("deviceMemory",`${n.deviceMemory} GB`),j9(n.hardwareConcurrency)&&t.setAttribute("hardwareConcurrency",String(n.hardwareConcurrency))}(t),"pageload"===r){!function Iht(t){const n=eI();if(!n)return;const{responseStart:e,requestStart:i}=n;i<=e&&(lu&&kt.log("[Measurements] Adding TTFB Request Time"),t["ttfb.requestTime"]={value:e-i,unit:"millisecond"})}(Qa);const a=Qa["mark.fid"];a&&Qa.fid&&(Dw(t,a.value,a.value+po(Qa.fid.value),{name:"first input delay",op:"ui.action",attributes:{[Ro]:"auto.ui.browser.metrics"}}),delete Qa["mark.fid"]),(!("fcp"in Qa)||!n.recordClsOnPageloadSpan)&&delete Qa.cls,Object.entries(Qa).forEach(([l,c])=>{!function kdt(t,n,e){const i=va(),s=i&&ba(i);s&&s.addEvent(t,{[VR]:n,[BR]:e})}(l,c.value,c.unit)}),t.setAttribute("performance.timeOrigin",i),function Tht(t){hp&&(lu&&kt.log("[Measurements] Adding LCP Data"),hp.element&&t.setAttribute("lcp.element",Df(hp.element)),hp.id&&t.setAttribute("lcp.id",hp.id),hp.url&&t.setAttribute("lcp.url",hp.url.trim().slice(0,200)),t.setAttribute("lcp.size",hp.size)),oI&&oI.sources&&(lu&&kt.log("[Measurements] Adding CLS Data"),oI.sources.forEach((n,e)=>t.setAttribute(`cls.source.${e+1}`,Df(n.node))))}(t)}hp=void 0,oI=void 0,Qa={}}(j,{recordClsOnPageloadSpan:!r})}});function $(){["interactive","complete"].includes(Jn.document.readyState)&&T.emit("idleSpanEnableAutoFinish",F)}return R&&Jn.document&&(Jn.document.addEventListener("readystatechange",()=>{$()}),$()),F}return{name:"BrowserTracing",afterAllSetup(T){let k,R=Jn.location&&Jn.location.href;T.on("startNavigationSpan",N=>{Zi()===T&&(k&&!ts(k).timestamp&&(vc&&kt.log(`[Tracing] Finishing current root span with op: ${ts(k).op}`),k.end()),k=x(T,{op:"navigation",...N}))}),T.on("startPageLoadSpan",(N,D={})=>{if(Zi()!==T)return;k&&!ts(k).timestamp&&(vc&&kt.log(`[Tracing] Finishing current root span with op: ${ts(k).op}`),k.end());const j=function Slt(t,n){const e=function Clt(t){if(!t)return;const n=t.match(wlt);if(!n)return;let e;return"1"===n[3]?e=!0:"0"===n[3]&&(e=!1),{traceId:n[1],parentSampled:e,parentSpanId:n[2]}}(t),i=Bme(n),{traceId:s,parentSpanId:r,parentSampled:o}=e||{};return e?{traceId:s||zr(),parentSpanId:r||zr().substring(16),spanId:zr().substring(16),sampled:o,dsc:i||{}}:{traceId:s||zr(),spanId:zr().substring(16)}}(D.sentryTrace||Rge("sentry-trace"),D.baggage||Rge("baggage"));br().setPropagationContext(j),k=x(T,{op:"pageload",...N})}),T.on("spanEnd",N=>{const D=ts(N).op;if(N!==ba(N)||"navigation"!==D&&"pageload"!==D)return;const F=br(),$=F.getPropagationContext();F.setPropagationContext({...$,sampled:void 0!==$.sampled?$.sampled:gv(N),dsc:$.dsc||__(N)})}),Jn.location&&(g&&function Jht(t,n,e){t.emit("startPageLoadSpan",n,e),br().setTransactionName(n.name);const i=va();i&&ts(i)}(T,{name:Jn.location.pathname,startTime:Wl?Wl/1e3:void 0,attributes:{[au]:"url",[Ro]:"auto.pageload.browser"}}),v&&KR(({to:N,from:D})=>{void 0===D&&R&&-1!==R.indexOf(N)?R=void 0:D!==N&&(R=void 0,Oge(T,{name:Jn.location.pathname,attributes:{[au]:"url",[Ro]:"auto.navigation.browser"}}))})),u&&function Pht(){Jn&&Jn.document?Jn.document.addEventListener("visibilitychange",()=>{const t=va();if(!t)return;const n=ba(t);if(Jn.document.hidden&&n){const e="cancelled",{op:i,status:s}=ts(n);vc&&kt.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${i}`),s||n.setStatus({code:Oa,message:e}),n.setAttribute("sentry.cancellation_reason","document.hidden"),n.end()}}):vc&&kt.warn("[Tracing] Could not set up background tab detection due to lack of global document")}(),s&&function ept(t,n,e,i){let s;Jn.document&&addEventListener("click",()=>{const o="ui.action.click",a=va(),l=a&&ba(a);if(l){const c=ts(l).op;if(["navigation","pageload"].includes(c))return void(vc&&kt.warn(`[Tracing] Did not create ${o} span because a pageload or navigation span is in progress.`))}s&&(s.setAttribute(l9,"interactionInterrupted"),s.end(),s=void 0),i.name?s=kge({name:i.name,op:o,attributes:{[au]:i.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:e}):vc&&kt.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`)},{once:!1,capture:!0})}(a,l,c,w),n&&function Aht(){const n=({entries:e})=>{const i=va(),s=i&&ba(i);e.forEach(r=>{if(!function aht(t){return"duration"in t}(r)||!s)return;const o=r.interactionId;if(null!=o&&!lF.has(o)){if(q9.length>10){const a=q9.shift();lF.delete(a)}q9.push(o),lF.set(o,s)}})};Iw("event",n),Iw("first-input",n)}(),Uht(T,{traceFetch:d,traceXHR:h,tracePropagationTargets:T.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:p,enableHTTPTimings:f})}}};function Oge(t,n){ou().setPropagationContext(RR()),br().setPropagationContext(RR()),t.emit("startNavigationSpan",n),br().setTransactionName(n.name);const e=va();return"navigation"===(e&&ts(e).op)?e:void 0}function Rge(t){const n=function Gat(t){return pw.document&&pw.document.querySelector?pw.document.querySelector(t):null}(`meta[name=${t}]`);return n?n.getAttribute("content"):void 0}const Fge=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;const spt=typeof Zone<"u"&&Zone.root&&Zone.root.run;function Ff(t){return spt?Zone.root.run(t):t()}function Lge(t){if(t instanceof Error)return!0;if(null===t||"object"!=typeof t)return!1;const n=t;return Ku(n.name)&&Ku(n.message)&&(void 0===n.stack||Ku(n.stack))}let Pge,apt=(()=>{class t{constructor(e){this._options={logErrors:!0,...e}}ngOnDestroy(){this._removeAfterSendEventListener&&this._removeAfterSendEventListener()}handleError(e){const i=this._extractError(e)||"Handled unknown error",s=Ff(()=>GR(i,{mechanism:{type:"angular",handled:!1}}));if(this._options.logErrors&&console.error(i),this._options.showDialog){const r=Zi();r&&!this._removeAfterSendEventListener?this._removeAfterSendEventListener=r.on("afterSendEvent",o=>{!o.type&&o.event_id&&Ff(()=>{ege({...this._options.dialogOptions,eventId:o.event_id})})}):r||Ff(()=>{ege({...this._options.dialogOptions,eventId:s})})}}_extractError(e){if(this._options.extractor){const i=this._defaultExtractor.bind(this);return this._options.extractor(e,i)}return this._defaultExtractor(e)}_defaultExtractor(e){const i=function rpt(t){return t&&t.ngOriginalError?t.ngOriginalError:t}(e);return i instanceof _b?function opt(t){return Lge(t.error)?t.error:typeof ErrorEvent<"u"&&t.error instanceof ErrorEvent&&t.error.message?t.error.message:"string"==typeof t.error?`Server returned code ${t.status} with body "${t.error}"`:t.message}(i):"string"==typeof i||Lge(i)?i:null}}return t.\u0275fac=function(e){return new(e||t)(ae("errorHandlerOptions"))},t.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function lpt(t){return new apt(t)}function hpt(t={}){return!1!==t.instrumentNavigation&&(Pge=!0),Qht({...t,instrumentNavigation:!1})}let $ge=(()=>{class t{constructor(e){this._router=e,this.navStart$=this._router.events.pipe(Zt(i=>i instanceof nE),gi(i=>{if(!Pge)return void(Fge&&kt.error("Angular integration has tracing enabled, but Tracing integration is not configured"));this._routingSpan&&(this._routingSpan.end(),this._routingSpan=null);const s=Zi(),r=function Sut(t){return t.split(/[?#]/,1)[0]}(i.url);return s?(this._isPageloadOngoing()?this._pageloadOngoing=!1:Ff(()=>{Oge(s,{name:r,attributes:{[Ro]:"auto.navigation.angular",[au]:"url"}})}),void(this._routingSpan=Ff(()=>Of({name:`${i.url}`,op:"ui.angular.routing",attributes:{[Ro]:"auto.ui.angular",[au]:"url",url:r,...i.navigationTrigger&&{navigationTrigger:i.navigationTrigger}}}))||null)):void 0})),this.resEnd$=this._router.events.pipe(Zt(i=>i instanceof rae),gi(i=>{const s=function fpt(t){const n=[];let e=t&&t.firstChild;for(;e;){const s=e&&e.routeConfig&&e.routeConfig.path;if(null==s)break;n.push(s),e=e.firstChild}const i=n.filter(s=>s).join("/");return i?`/${i}/`:"/"}(i.state.root);s&&br().setTransactionName(s);const r=va();!function ppt(t,n){const e=n&&ts(n).data||{};n&&"url"===e[au]&&(n.updateName(t),n.setAttribute(au,"route"),n.setAttribute(Ro,`auto.${ts(n).op}.angular`))}(s,r&&ba(r))})),this.navEnd$=this._router.events.pipe(Zt(i=>i instanceof Bu||i instanceof Gm||i instanceof XM),gi(()=>{this._routingSpan&&(Ff(()=>{this._routingSpan.end()}),this._routingSpan=null)})),this._routingSpan=null,this._pageloadOngoing=!0,this._subscription=new rn,this._subscription.add(this.navStart$.subscribe()),this._subscription.add(this.resEnd$.subscribe()),this._subscription.add(this.navEnd$.subscribe())}ngOnDestroy(){this._subscription.unsubscribe()}_isPageloadOngoing(){if(!this._pageloadOngoing)return!1;const e=va();if(!e)return this._pageloadOngoing=!1,!1;const i=ba(e);return this._pageloadOngoing="pageload"===ts(i).op,this._pageloadOngoing}}return t.\u0275fac=function(e){return new(e||t)(ae(lo))},t.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Bge{constructor(n,e){this.backend=n,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(n){return this.data.has(n)||this.dataMover.moveData(this.backend,n),this.data.get(n)}set(n,e){this.dataIdsCount++,this.data.set(n,e)}has(n){return this.data.has(n)}delete(n){return this.dataIdsCount--,this.data.delete(n)}numDataIds(){return this.dataIdsCount}}class Z9{refCount(n){return wc("refCount")}incRef(n){return wc("incRef")}timerAvailable(){return!0}time(n){return wc("time")}read(n){return wc("read")}readSync(n){return wc("readSync")}readToGPU(n,e){return wc("readToGPU")}numDataIds(){return wc("numDataIds")}disposeData(n,e){return wc("disposeData")}write(n,e,i){return wc("write")}move(n,e,i,s,r){return wc("move")}createTensorFromGPUData(n,e,i){return wc("createTensorFromGPUData")}memory(){return wc("memory")}floatPrecision(){return wc("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return wc("dispose")}}function wc(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function Vge(t){let n=t.length,e=0;for(;n>0;)e=Math.random()*n|0,n--,w_(t,n,e)}function Sv(t,n,e){return Math.max(t,Math.min(n,e))}function Q9(t){return t%2==0?t:t+1}function w_(t,n,e){const i=t[n];t[n]=t[e],t[e]=i}function U(t,n){if(!t)throw new Error("string"==typeof n?n:n())}function Cc(t,n,e=""){U(es(t,n),()=>e+` Shapes ${t} and ${n} must match`)}function Aw(t){U(null!=t,()=>"The input to the tensor constructor must be a non-null value.")}function Le(t){if(0===t.length)return 1;let n=t[0];for(let e=1;e<t.length;e++)n*=t[e];return n}function es(t,n){if(t===n)return!0;if(null==t||null==n||t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function Mw(t){return t%1==0}function J9(t){const n=Math.ceil(Math.sqrt(t));return[n,Math.ceil(t/n)]}function Nw(t,n){return n<=t.length?t:t+" ".repeat(n-t.length)}function zge(t,n=s=>0,e,i){return new Promise((s,r)=>{let o=0;const a=()=>{if(t())return void s();o++;const l=n(o);null!=e&&o>=e?r():null!=i?i(a,l):setTimeout(a,l)};a()})}function Uge(t,n){let e=1,i=-1;for(let r=0;r<t.length;++r)if(t[r]>=0)e*=t[r];else if(-1===t[r]){if(-1!==i)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${i} and dim ${r}`);i=r}else if(t[r]<0)throw Error(`Shapes can not be < 0. Found ${t[r]} at dim ${r}`);if(-1===i){if(n>0&&n!==e)throw Error(`Size(${n}) must match the product of shape ${t}`);return t}if(0===e)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(n%e!=0)throw Error(`The implicit shape can't be a fractional number. Got ${n} / ${e}`);const s=t.slice();return s[i]=n/e,s}function zi(t,n){const e=n.length;return U((t=null==t?n.map((i,s)=>s):[].concat(t)).every(i=>i>=-e&&i<e),()=>`All values in axis param must be in range [-${e}, ${e}) but got axis ${t}`),U(t.every(i=>Mw(i)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(i=>i<0?e+i:i)}function C_(t,n){const e=[],i=[],s=null!=n&&Array.isArray(n)&&0===n.length,r=null==n||s?null:zi(n,t).sort();let o=0;for(let a=0;a<t.length;++a){if(null!=r){if(r[o]===a&&1!==t[a])throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(null==r[o]||r[o]>a)&&1===t[a]&&(e.push(t[a]),i.push(a)),r[o]<=a&&o++}1!==t[a]&&(e.push(t[a]),i.push(a))}return{newShape:e,keptDims:i}}function Ra(t,n){return fo(t,n)}function fo(t,n){let e=null;if(null==t||"float32"===t)e=new Float32Array(n);else if("int32"===t)e=new Int32Array(n);else if("bool"===t)e=new Uint8Array(n);else{if("string"!==t)throw new Error(`Unknown data type ${t}`);e=new Array(n)}return e}function Gge(t,n){return!("complex64"===n||"float32"===n&&"complex64"!==t||"int32"===n&&"float32"!==t&&"complex64"!==t||"bool"===n&&"bool"===t)}function uF(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error(`Unknown dtype ${t}`)}function aI(t){return"string"==typeof t||t instanceof String}function eU(t){return"number"==typeof t}function Ow(t){return Array.isArray(t)?Ow(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":eU(t)?"float32":aI(t)?"string":function Cpt(t){return"boolean"==typeof t}(t)?"bool":"float32"}function tU(t){return!!(t&&t.constructor&&t.call&&t.apply)}function nU(t,n){for(let e=n;e<t;++e)if(t%e==0)return e;return t}function xn(t){const n=t.length;if(n<2)return[];const e=new Array(n-1);e[n-2]=t[n-1];for(let i=n-3;i>=0;--i)e[i]=e[i+1]*t[i+1];return e}function jge(t,n,e,i=!1){const s=new Array;if(1===n.length){const r=n[0]*(i?2:1);for(let o=0;o<r;o++)s[o]=e[t+o]}else{const r=n[0],o=n.slice(1),a=o.reduce((l,c)=>l*c)*(i?2:1);for(let l=0;l<r;l++)s[l]=jge(t+l*a,o,e,i)}return s}function Qu(t,n,e=!1){if(0===t.length)return n[0];const i=t.reduce((s,r)=>s*r)*(e?2:1);if(0===i)return[];if(i!==n.length)throw new Error(`[${t}] does not match the input size ${n.length}${e?" for a complex tensor":""}.`);return jge(0,t,n,e)}function iU(t,n){const e=Ja(t,n);for(let i=0;i<e.length;i++)e[i]=1;return e}function Ja(t,n){if(null==n||"float32"===n||"complex64"===n)return new Float32Array(t);if("int32"===n)return new Int32Array(t);if("bool"===n)return new Uint8Array(t);throw new Error(`Unknown data type ${n}`)}function Hge(t,n){const e=t.reduce((i,s)=>i*s,1);if(null==n||"float32"===n)return Qu(t,new Float32Array(e));if("int32"===n)return Qu(t,new Int32Array(e));if("bool"===n)return Qu(t,new Uint8Array(e));throw new Error(`Unknown data type ${n}`)}function cu(t){t.forEach(n=>{U(Number.isInteger(n)&&n>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function fp(t,n,e){if(0===n)return 0;if(1===n)return t[0];let i=t[t.length-1];for(let s=0;s<t.length-1;++s)i+=e[s]*t[s];return i}function Rw(t,n,e){if(0===n)return[];if(1===n)return[t];const i=new Array(n);for(let s=0;s<i.length-1;++s)i[s]=Math.floor(t/e[s]),t-=i[s]*e[s];return i[i.length-1]=t,i}function S_(t){return t&&t.then&&"function"==typeof t.then}class xpt{constructor(n){this.global=n,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Ept,this.populateURLFlags()}setPlatform(n,e){null!=this.platform&&(Ie().getBool("IS_TEST")||Ie().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${n}.`)),this.platformName=n,this.platform=e}registerFlag(n,e,i){if(this.flagRegistry[n]={evaluationFn:e,setHook:i},null!=this.urlFlags[n]){const s=this.urlFlags[n];Ie().getBool("IS_TEST")||Ie().getBool("PROD")||console.warn(`Setting feature override from URL ${n}: ${s}.`),this.set(n,s)}}getAsync(n){var e=this;return z(function*(){return n in e.flags||(e.flags[n]=yield e.evaluateFlag(n)),e.flags[n]})()}get(n){if(n in this.flags)return this.flags[n];const e=this.evaluateFlag(n);if(S_(e))throw new Error(`Flag ${n} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[n]=e,this.flags[n]}getNumber(n){return this.get(n)}getBool(n){return this.get(n)}getString(n){return this.get(n)}getFlags(){return this.flags}get features(){return this.flags}set(n,e){if(null==this.flagRegistry[n])throw new Error(`Cannot set flag ${n} as it has not been registered.`);this.flags[n]=e,null!=this.flagRegistry[n].setHook&&this.flagRegistry[n].setHook(e)}evaluateFlag(n){if(null==this.flagRegistry[n])throw new Error(`Cannot evaluate flag '${n}': no evaluation function found.`);return this.flagRegistry[n].evaluationFn()}setFlags(n){this.flags=Object.assign({},n)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const n=this.getQueryParams(this.global.location.search);"tfjsflags"in n&&n.tfjsflags.split(",").forEach(i=>{const[s,r]=i.split(":");this.urlFlags[s]=function Ipt(t,n){const e=n.toLowerCase();return"true"===e||"false"===e?"true"===e:""+ +e===e?+e:n}(0,r)})}}function Ept(t){const n={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...i)=>(function Tpt(t,n,e){t[decodeURIComponent(n)]=decodeURIComponent(e||"")}(n,i[0],i[1]),i.join("="))),n}function Ie(){return qge}let sU,qge=null;function Kge(){if(null==sU){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else{if(!(typeof self<"u"))throw new Error("Could not find a global object");t=self}sU=t}return sU}function rU(t,n){const e=function Dpt(){const t=Kge();return null==t._tfGlobals&&(t._tfGlobals=new Map),t._tfGlobals}();if(e.has(t))return e.get(t);{const i=n();return e.set(t,i),e.get(t)}}const dF="Abs",lI="Acos",cI="Acosh",Fw="Add",hF="AddN",pF="ArgMax",fF="ArgMin",uI="Asin",dI="Asinh",hI="Atan",pI="Atanh",fI="Atan2",mF="AvgPool",lU="AvgPoolGrad",_F="AvgPool3D",cU="AvgPool3DGrad",gF="BatchMatMul",bF="BatchToSpaceND",uU="Bincount",vF="BitwiseAnd",dU="BroadcastArgs",mI="Cast",_I="Ceil",gI="ClipByValue",hU="Complex",yF="ComplexAbs",wF="Concat",CF="Conv2D",pU="Conv2DBackpropFilter",SF="Conv2DBackpropInput",xF="Conv3D",fU="Conv3DBackpropFilterV2",mU="Conv3DBackpropInputV2",bI="Cos",vI="Cosh",_U="Cumprod",EF="Cumsum",gU="CropAndResize",bU="DenseBincount",vU="DepthToSpace",TF="DepthwiseConv2dNative",yU="DepthwiseConv2dNativeBackpropFilter",wU="DepthwiseConv2dNativeBackpropInput",CU="Diag",IF="Dilation2D",SU="Dilation2DBackpropInput",xU="Dilation2DBackpropFilter",yI="RealDiv",TU="Einsum",wI="Elu",IU="EluGrad",CI="Erf",kF="Equal",SI="Exp",DF="ExpandDims",xI="Expm1",DU="Fill",AU="FlipLeftRight",EI="Floor",TI="FloorDiv",AF="FusedBatchNorm",MF="GatherV2",MU="GatherNd",NF="Greater",II="GreaterEqual",kI="Identity",NU="IFFT",OU="Imag",DI="IsFinite",AI="IsInf",MI="IsNan",OF="LeakyRelu",RF="Less",FF="LessEqual",RU="LinSpace",NI="Log",OI="Log1p",LF="LogicalAnd",PF="LogicalNot",$F="LogicalOr",BF="LRN",FU="LRNGrad",VF="Max",RI="Maximum",zF="MaxPool",LU="MaxPoolGrad",UF="MaxPool3D",PU="MaxPool3DGrad",$U="MaxPoolWithArgmax",GF="Mean",jF="Min",FI="Minimum",HF="MirrorPad",LI="Mod",BU="Multinomial",PI="Multiply",WF="Neg",qF="NotEqual",VU="NonMaxSuppressionV3",zU="NonMaxSuppressionV4",UU="NonMaxSuppressionV5",KF="OnesLike",XF="OneHot",YF="Pack",ZF="PadV2",$I="Pow",QF="Prelu",JF="Prod",GU="RaggedGather",jU="RaggedRange",HU="RaggedTensorToTensor",WU="Range",qU="Real",BI="Reciprocal",VI="Relu",eL="Reshape",tL="ResizeNearestNeighbor",KU="ResizeNearestNeighborGrad",nL="ResizeBilinear",XU="ResizeBilinearGrad",zI="Relu6",iL="Reverse",UI="Round",GI="Rsqrt",YU="ScatterNd",ZU="TensorScatterUpdate",QU="SearchSorted",sL="Select",jI="Selu",rL="Slice",HI="Sin",WI="Sinh",qI="Sign",KI="Sigmoid",XI="Softplus",YI="Sqrt",oL="Sum",aL="SpaceToBatchND",lL="SplitV",cL="Softmax",JU="SparseFillEmptyRows",eG="SparseReshape",tG="SparseSegmentMean",nG="SparseSegmentSum",iG="SparseToDense",ZI="SquaredDifference",sG="Square",uL="StaticRegexReplace",rG="StridedSlice",oG="StringNGrams",aG="StringSplit",lG="StringToHashBucketFast",QI="Sub",JI="Tan",e2="Tanh",t2="Tile",cG="TopK",uG="Transform",Lw="Transpose",dG="Unique",dL="Unpack",hL="UnsortedSegmentSum",pL="ZerosLike",n2="Step",hG="FromPixels",pG="RotateWithOffset",fL="_FusedMatMul",mL="FusedConv2D",_L="FusedDepthwiseConv2D";function uu(...t){Ie().getBool("IS_TEST")||Ie().getBool("PROD")||console.warn(...t)}function Npt(...t){Ie().getBool("IS_TEST")||Ie().getBool("PROD")||console.log(...t)}const Pw=rU("kernelRegistry",()=>new Map),s2=rU("gradRegistry",()=>new Map);function gL(t,n){const e=_G(t,n);return Pw.get(e)}function Xge(t){return s2.get(t)}function fG(t){const n=Pw.entries(),e=[];for(;;){const{done:i,value:s}=n.next();if(i)break;const[r,o]=s,[a]=r.split("_");a===t&&e.push(o)}return e}function mG(t){const{kernelName:n,backendName:e}=t,i=_G(n,e);Pw.has(i)&&uu(`The kernel '${n}' for backend '${e}' is already registered`),Pw.set(i,t)}function Opt(t){const{kernelName:n}=t;s2.has(n)&&Ie().getBool("DEBUG")&&uu(`Overriding the gradient for '${n}'`),s2.set(n,t)}function _G(t,n){return`${n}_${t}`}function Yge(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var Zge=ye(929);const xv=ye.n(Zge)()||Zge;function bL(t){return xv.fromString(t,!0,16)}const Qge=bL("c3a5c85c97cb3127"),Ev=bL("b492b66fbe98f273"),vl=bL("9ae16a3b2f90404f");function gG(t){return t.xor(t.shru(47))}function Jge(t,n,e){const i=t.slice(n,n+e);return xv.fromBytes(Array.from(i),!0,!0)}function vr(t,n){return Jge(t,n,8)}function ebe(t,n){return Jge(t,n,4)}function ya(t,n){return 0===n?t:t.shru(n).or(t.shl(64-n))}function x_(t,n,e=bL("9ddfea08eb382d69")){let i=t.xor(n).mul(e);i=i.xor(i.shru(47));let s=n.xor(i).mul(e);return s=s.xor(s.shru(47)),s=s.mul(e),s}function vL(t,n,e,i){return function Fpt(t,n,e,i,s,r){s=s.add(t),r=ya(r.add(s).add(i),21);const o=s;return s=(s=s.add(n)).add(e),r=r.add(ya(s,44)),[s.add(i),r.add(o)]}(vr(t,n),vr(t,n+8),vr(t,n+16),vr(t,n+24),e,i)}function Bpt(t,n=t.length){const e=xv.fromNumber(81,!0);if(n<=32)return n<=16?function Lpt(t,n=t.length){if(n>=8){const e=vl.add(2*n),i=vr(t,0).add(vl),s=vr(t,n-8);return x_(ya(s,37).mul(e).add(i),ya(i,25).add(s).mul(e),e)}if(n>=4){const e=vl.add(2*n);return x_(ebe(t,0).shl(3).add(n),ebe(t,n-4),e)}if(n>0){const o=n+(t[n-1]<<2);return gG(vl.mul(t[0]+(t[n>>1]<<8)).xor(Qge.mul(o))).mul(vl)}return vl}(t,n):function Ppt(t,n=t.length){const e=vl.add(2*n),i=vr(t,0).mul(Ev),s=vr(t,8),r=vr(t,n-8).mul(e),o=vr(t,n-16).mul(vl);return x_(ya(i.add(s),43).add(ya(r,30)).add(o),i.add(ya(s.add(vl),18)).add(r),e)}(t,n);if(n<=64)return function $pt(t,n=t.length){const e=vl.add(2*n),i=vr(t,0).mul(vl),s=vr(t,8),r=vr(t,n-8).mul(e),o=vr(t,n-16).mul(vl),a=ya(i.add(s),43).add(ya(r,30)).add(o),l=x_(a,i.add(ya(s.add(vl),18)).add(r),e),c=vr(t,16).mul(e),u=vr(t,24),d=a.add(vr(t,n-32)).mul(e),h=l.add(vr(t,n-24)).mul(e);return x_(ya(c.add(u),43).add(ya(d,30)).add(h),c.add(ya(u.add(i),18)).add(d),e)}(t,n);let i=e,s=e.mul(Ev).add(113),r=gG(s.mul(vl).add(113)).mul(vl),o=[xv.UZERO,xv.UZERO],a=[xv.UZERO,xv.UZERO];i=i.mul(vl).add(vr(t,0));let l=0;const c=64*(n-1>>6),u=c+(n-1&63)-63;do{i=ya(i.add(s).add(o[0]).add(vr(t,l+8)),37).mul(Ev),s=ya(s.add(o[1]).add(vr(t,l+48)),42).mul(Ev),i=i.xor(a[1]),s=s.add(o[0]).add(vr(t,l+40)),r=ya(r.add(a[0]),33).mul(Ev),o=vL(t,l,o[1].mul(Ev),i.add(a[0])),a=vL(t,l+32,r.add(a[1]),s.add(vr(t,l+16))),[r,i]=[i,r],l+=64}while(l!==c);const d=Ev.add(r.and(255).shl(1));return l=u,a[0]=a[0].add(n-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),i=ya(i.add(s).add(o[0]).add(vr(t,l+8)),37).mul(d),s=ya(s.add(o[1]).add(vr(t,l+48)),42).mul(d),i=i.xor(a[1].mul(9)),s=s.add(o[0].mul(9).add(vr(t,l+40))),r=ya(r.add(a[0]),33).mul(d),o=vL(t,l,o[1].mul(d),i.add(a[0])),a=vL(t,l+32,r.add(a[1]),s.add(vr(t,l+16))),[r,i]=[i,r],x_(x_(o[0],a[0],d).add(gG(s).mul(Qge)).add(r),x_(o[1],a[1],d).add(i),d)}function E_(t,n){return"string"===n?T_(t):Tv([t],n)}function Tv(t,n){if("string"===n)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Iv(t)),Ie().getBool("DEBUG")&&function vpt(t,n){for(let e=0;e<t.length;e++){const i=t[e];if(isNaN(i)||!isFinite(i))throw Error(`A tensor of type ${n} being uploaded contains ${i}.`)}}(t,n),function Vpt(t,n){return t instanceof Float32Array&&"float32"===n||t instanceof Int32Array&&"int32"===n||t instanceof Uint8Array&&"bool"===n}(t,n))return t;if(null==n||"float32"===n||"complex64"===n)return new Float32Array(t);if("int32"===n)return new Int32Array(t);if("bool"===n){const e=new Uint8Array(t.length);for(let i=0;i<e.length;++i)0!==Math.round(t[i])&&(e[i]=1);return e}throw new Error(`Unknown data type ${n}`)}function el(){return Ie().platform.now()}function T_(t,n="utf-8"){return n=n||"utf-8",Ie().platform.encode(t,n)}function I_(t,n="utf-8"){return n=n||"utf-8",Ie().platform.decode(t,n)}function du(t){return null!=Ie().platform.isTypedArray?Ie().platform.isTypedArray(t):Yge(t)}function Iv(t,n=[],e=!1){if(null==n&&(n=[]),"boolean"==typeof t||"number"==typeof t||"string"==typeof t||S_(t)||null==t||du(t)&&e)n.push(t);else if(Array.isArray(t)||du(t))for(let i=0;i<t.length;++i)Iv(t[i],n,e);else{let i=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(i=Math.max(i,Number(s)));for(let s=0;s<=i;s++)Iv(t[s],n,e)}return n}class Upt{constructor(n,e){this.backendTimer=n,this.logger=e,null==e&&(this.logger=new jpt)}profileKernel(n,e,i){let s;const r=()=>{s=i()};let o;const a=el();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(r);else{r();for(const c of s)c.dataSync();o=Promise.resolve({kernelMs:el()-a})}if(Ie().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<s.length;c++){const u=s[c];u.data().then(d=>{Gpt(d,u.dtype,n)})}return{kernelName:n,outputs:s,inputs:e,timeMs:o.then(c=>c.kernelMs),extraInfo:o.then(c=>null!=c.getExtraProfileInfo?c.getExtraProfileInfo():"")}}logKernelProfile(n){const{kernelName:e,outputs:i,timeMs:s,inputs:r,extraInfo:o}=n;i.forEach(a=>{Promise.all([a.data(),s,o]).then(l=>{this.logger.logKernelProfile(e,a,l[0],l[1],r,l[2])})})}}function Gpt(t,n,e){if("float32"!==n)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${e}'`),!0}return!1}class jpt{logKernelProfile(n,e,i,s,r,o){const a="number"==typeof s?Nw(`${s}ms`,9):s.error,l=Nw(n,25),c=e.rank,u=e.size,d=Nw(e.shape.toString(),14);let h="";for(const p in r){const f=r[p];if(null!=f){const g=f.shape||e.shape,v=g.length;h+=`${p}: ${v}D ${v>0?g:""} `}}console.log(`%c${l}\t%c${a}\t%c${c}D ${d}\t%c${u}\t%c${h}\t%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}const tbe=20,r2=3,bG=7;function qpt(t,n,e,i){const s=xn(n),r=function Kpt(t,n,e,i){const s=Le(n),r=i[i.length-1],o=new Array(r).fill(0),a=n.length,l="complex64"===e?a2(t):t;if(a>1)for(let c=0;c<s/r;c++){const u=c*r;for(let d=0;d<r;d++)o[d]=Math.max(o[d],o2(l[u+d],0,e).length)}return o}(t,n,e,s),o=n.length,a=yL(t,n,e,s,r),l=["Tensor"];return i&&(l.push(`  dtype: ${e}`),l.push(`  rank: ${o}`),l.push(`  shape: [${n}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join("\n")),l.join("\n")}function o2(t,n,e){let i;return i=Array.isArray(t)?`${parseFloat(t[0].toFixed(bG))} + ${parseFloat(t[1].toFixed(bG))}j`:aI(t)?`'${t}'`:"bool"===e?nbe(t):parseFloat(t.toFixed(bG)).toString(),Nw(i,n)}function nbe(t){return 0===t?"false":"true"}function yL(t,n,e,i,s,r=!0){const o="complex64"===e?2:1,a=n[0],l=n.length;if(0===l)return"complex64"===e?[o2(a2(t)[0],0,e)]:"bool"===e?[nbe(t[0])]:[t[0].toString()];if(1===l){if(a>tbe){let y=Array.from(t.slice(0,r2*o)),w=Array.from(t.slice((a-r2)*o,a*o));return"complex64"===e&&(y=a2(y),w=a2(w)),["["+y.map((x,T)=>o2(x,s[T],e)).join(", ")+", ..., "+w.map((x,T)=>o2(x,s[a-r2+T],e)).join(", ")+"]"]}return["["+("complex64"===e?a2(t):Array.from(t)).map((v,y)=>o2(v,s[y],e)).join(", ")+"]"]}const c=n.slice(1),u=i.slice(1),d=i[0]*o,h=[];if(a>tbe){for(let g=0;g<r2;g++){const v=g*d;h.push(...yL(t.slice(v,v+d),c,e,u,s,!1))}h.push("...");for(let g=a-r2;g<a;g++){const v=g*d;h.push(...yL(t.slice(v,v+d),c,e,u,s,g===a-1))}}else for(let g=0;g<a;g++){const v=g*d;h.push(...yL(t.slice(v,v+d),c,e,u,s,g===a-1))}const p=2===l?",":"";h[0]="["+(a>0?h[0]+p:"");for(let g=1;g<h.length-1;g++)h[g]=" "+h[g]+p;let f=",\n";for(let g=2;g<l;g++)f+="\n";return h[h.length-1]=" "+h[h.length-1]+"]"+(r?"":f),h}function a2(t){const n=[];for(let e=0;e<t.length;e+=2)n.push([t[e],t[e+1]]);return n}class Ko{constructor(n,e,i){if(this.dtype=e,this.shape=n.slice(),this.size=Le(n),null!=i){const s=i.length;U(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=i||fo(e,this.size),this.strides=xn(n)}set(n,...e){0===e.length&&(e=[0]),U(e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must match the rank (${this.rank})`);const i=this.locToIndex(e);this.values[i]=n}get(...n){0===n.length&&(n=[0]);let e=0;for(const s of n){if(s<0||s>=this.shape[e])throw new Error(`Requested out of range element at ${n}.   Buffer shape=${this.shape}`);e++}let i=n[n.length-1];for(let s=0;s<n.length-1;++s)i+=this.strides[s]*n[s];return this.values[i]}locToIndex(n){if(0===this.rank)return 0;if(1===this.rank)return n[0];let e=n[n.length-1];for(let i=0;i<n.length-1;++i)e+=this.strides[i]*n[i];return e}indexToLoc(n){if(0===this.rank)return[];if(1===this.rank)return[n];const e=new Array(this.shape.length);for(let i=0;i<e.length-1;++i)e[i]=Math.floor(n/this.strides[i]),n-=e[i]*this.strides[i];return e[e.length-1]=n,e}get rank(){return this.shape.length}toTensor(){return rh().makeTensor(this.values,this.shape,this.dtype)}}let rh=null,$w=null,ibe=null;class js{constructor(n,e,i,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=e||"float32",this.size=Le(n),this.strides=xn(n),this.dataId=i,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){var n=this;return z(function*(){const e=yield n.data();return $w.buffer(n.shape,n.dtype,e)})()}bufferSync(){return $w.buffer(this.shape,this.dtype,this.dataSync())}array(){var n=this;return z(function*(){const e=yield n.data();return Qu(n.shape,e,"complex64"===n.dtype)})()}arraySync(){return Qu(this.shape,this.dataSync(),"complex64"===this.dtype)}data(){var n=this;return z(function*(){n.throwIfDisposed();const e=rh().read(n.dataId);if("string"===n.dtype){const i=yield e;try{return i.map(s=>I_(s))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e})()}dataToGPU(n){return this.throwIfDisposed(),rh().readToGPU(this.dataId,n)}dataSync(){this.throwIfDisposed();const n=rh().readSync(this.dataId);if("string"===this.dtype)try{return n.map(e=>I_(e))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return n}bytes(){var n=this;return z(function*(){n.throwIfDisposed();const e=yield rh().read(n.dataId);return"string"===n.dtype?e:new Uint8Array(e.buffer)})()}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),rh().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(n=!1){return $w.print(this,n)}clone(){return this.throwIfDisposed(),$w.clone(this)}toString(n=!1){return qpt(this.dataSync(),this.shape,this.dtype,n)}cast(n){return this.throwIfDisposed(),$w.cast(this,n)}variable(n=!0,e,i){return this.throwIfDisposed(),rh().makeVariable(this,n,e,i)}}function $e(){return rU("Tensor",()=>js)}Object.defineProperty(js,Symbol.hasInstance,{value:t=>!!t&&null!=t.data&&null!=t.dataSync&&null!=t.throwIfDisposed}),$e();class wL extends js{constructor(n,e,i,s){super(n.shape,n.dtype,n.dataId,s),this.trainable=e,this.name=i}assign(n){if(n.dtype!==this.dtype)throw new Error(`dtype of the new value (${n.dtype}) and previous value (${this.dtype}) must match`);if(!es(n.shape,this.shape))throw new Error(`shape of the new value (${n.shape}) and previous value (${this.shape}) must match`);rh().disposeTensor(this),this.dataId=n.dataId,rh().incRef(this,null)}dispose(){rh().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(wL,Symbol.hasInstance,{value:t=>t instanceof js&&null!=t.assign&&t.assign instanceof Function});var sbe=function(t){return t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64",t}(sbe||{}),rbe=function(t){return t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64",t}(rbe||{}),obe=function(t){return t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64",t}(obe||{}),abe=function(t){return t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64",t}(abe||{});const Jpt={float32:obe,int32:sbe,bool:rbe,complex64:abe};function Sc(t,n){if("string"===t||"string"===n){if("string"===t&&"string"===n)return"string";throw new Error(`Can not upcast ${t} with ${n}`)}return Jpt[t][n]}function vG(t){return Sc(t,"int32")}function lbe(t){return null!=t&&"object"==typeof t&&"texture"in t&&t.texture instanceof WebGLTexture}function cbe(t){return typeof GPUBuffer<"u"&&null!=t&&"object"==typeof t&&"buffer"in t&&t.buffer instanceof GPUBuffer}function eo(t,n){if(t.dtype===n.dtype)return[t,n];const e=Sc(t.dtype,n.dtype);return[t.cast(e),n.cast(e)]}function k_(t){const n=[];return ube(t,n,new Set),n}function ube(t,n,e){if(null==t)return;if(t instanceof js)return void n.push(t);if(!function tft(t){return Array.isArray(t)||"object"==typeof t}(t))return;const i=t;for(const s in i){const r=i[s];e.has(r)||(e.add(r),ube(r,n,e))}}function wG(t){return null!=t.kernelName}class dbe{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(n=>n.name)))}}}dispose(){for(const n in this.registeredVariables)this.registeredVariables[n].dispose()}}let nft=(()=>{class t{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new dbe}ready(){var e=this;return z(function*(){if(null!=e.pendingBackendInit)return e.pendingBackendInit.then(()=>{});if(null!=e.backendInstance)return;const i=e.getSortedBackends();for(let s=0;s<i.length;s++){const r=i[s];if(yield e.initializeBackend(r).success)return void(yield e.setBackend(r))}throw new Error("Could not initialize any backends, all backend initializations failed.")})()}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:e,asyncInit:i}=this.initializeBackendsAndReturnBest();if(i)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:i}=this.initializeBackend(e);if(i)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,i,s=1){return e in this.registryFactory?(uu(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:i,priority:s},!0)}setBackend(e){var i=this;return z(function*(){if(null==i.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(i.backendName=e,null==i.registry[e]){i.backendInstance=null;const{success:s,asyncInit:r}=i.initializeBackend(e);if(!(r?yield s:s))return!1}return i.backendInstance=i.registry[e],i.setupRegisteredKernels(),i.profiler=new Upt(i.backendInstance),!0})()}setupRegisteredKernels(){fG(this.backendName).forEach(i=>{null!=i.setupFunc&&i.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){fG(e).forEach(s=>{null!=s.disposeFunc&&s.disposeFunc(this.registry[e])})}initializeBackend(e){const i=this.registryFactory[e];if(null==i)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const s=i.factory();if(!s||s instanceof Z9||"function"!=typeof s.then)return this.registry[e]=s,{success:!0,asyncInit:!1};{const r=++this.pendingBackendInitId,o=s.then(a=>!(r<this.pendingBackendInitId||(this.registry[e]=a,this.pendingBackendInit=null,0))).catch(a=>(r<this.pendingBackendInitId||(this.pendingBackendInit=null,uu(`Initialization of backend ${e} failed`),uu(a.stack||a.message)),!1));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}}catch(s){return uu(`Initialization of backend ${e} failed`),uu(s.stack||s.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,i)=>this.registryFactory[i].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let i=0;i<e.length;i++){const s=e[i],{success:r,asyncInit:o}=this.initializeBackend(s);if(o||r)return{name:s,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,i){const s=this.state.tensorInfo.get(i),r=s.backend,o=this.readSync(i),a=r.refCount(i);r.disposeData(i,!0),s.backend=e,e.move(i,o,s.shape,s.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,i){let r,s=null;if(null==i){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");i=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof i)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");s=e}return this.scopedRun(()=>this.startScope(s),()=>this.endScope(r),()=>(r=i(),r instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r))}scopedRun(e,i,s){e();try{const r=s();return i(),r}catch(r){throw i(),r}}nextTensorId(){return t.nextTensorId++}nextVariableId(){return t.nextVariableId++}clone(e){const i=ue.runKernel(kI,{x:e});return this.addTapeNode(this.state.activeScope.name,{x:e},[i],a=>({x:()=>ue.runKernel(mI,{x:a},{dtype:"float32"})}),[],{}),i}runKernel(e,i,s){if(null==gL(e,this.backendName))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:i,attrs:s})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,i,s){const r=this.backend.numDataIds();let o=0;s.forEach(c=>{o+="complex64"===c.dtype?3:1});const l=r-i-o-this.state.numDataMovesStack[this.state.numDataMovesStack.length-1];if(l>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${l} data ids) after running '${e}'`)}runKernelFunc(e){let i,s=[];const r=this.isTapeOn(),o=this.state.numBytes,a=this.state.numTensors;let l,c;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);const u=wG(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(wG(e)){const{kernelName:g,inputs:v,attrs:y}=e,w=gL(g,this.backendName);U(null!=w,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),l=()=>{const x=this.backend.numDataIds();c=w.kernelFunc({inputs:v,attrs:y,backend:this.backend});const T=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,x,T);const k=T.map(R=>null!=R.rank?R:this.makeTensorFromTensorInfo(R));if(r){const R=this.getTensorsForGradient(g,v,k);s=this.saveTensorsForBackwardMode(R)}return k}}else{const{forwardFunc:g}=e,v=y=>{r&&(s=y.map(w=>this.keep(this.clone(w))))};l=()=>{const y=this.backend.numDataIds();c=this.tidy(()=>g(this.backend,v));const w=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,y,w),w}}const{inputs:d,attrs:h}=e,p=wG(e)?null:e.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(f=this.profiler.profileKernel(u,d,()=>l()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),i=f.outputs):i=l()}),r&&this.addTapeNode(u,d,i,p,s,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(g=>null!=d[g]?d[g].shape:null),outputShapes:i.map(g=>g.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(c)?i:i[0]}saveTensorsForBackwardMode(e){return e.map(s=>this.keep(this.clone(s)))}getTensorsForGradient(e,i,s){const r=Xge(e);if(null!=r){const o=r.inputsToSave||[],a=r.outputsToSave||[];let l;r.saveAllInputs?(U(Array.isArray(i),()=>"saveAllInputs is true, expected inputs to be an array."),l=Object.keys(i).map(u=>i[u])):l=o.map(u=>i[u]);const c=s.filter((u,d)=>a[d]);return l.concat(c)}return[]}makeTensor(e,i,s,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");r=r||this.backend;let o=e;"string"===(s=s||"float32")&&aI(e[0])&&(o=e.map(c=>T_(c)));const a=r.write(o,i,s),l=new js(i,s,a,this.nextTensorId());if(this.trackTensor(l,r),"string"===s){const c=this.state.tensorInfo.get(a),u=function wpt(t){if(null==t)return 0;let n=0;return t.forEach(e=>n+=e.length),n}(o);this.state.numBytes+=u-c.bytes,c.bytes=u}return l}makeTensorFromDataId(e,i,s,r){return this.makeTensorFromTensorInfo({dataId:e,shape:i,dtype:s=s||"float32"},r)}makeTensorFromTensorInfo(e,i){const{dataId:s,shape:r,dtype:o}=e,a=new js(r,o,s,this.nextTensorId());return this.trackTensor(a,i),a}makeVariable(e,i=!0,s,r){s=s||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const o=new wL(e,i,s,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error(`Variable with name ${o.name} was already registered`);return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(e,i){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let s=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(s=e.size*uF(e.dtype)),this.state.numBytes+=s,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:i||this.backend,dtype:e.dtype,shape:e.shape,bytes:s})),e instanceof wL||this.track(e)}incRef(e,i){this.trackTensor(e,i),this.backend.incRef(e.dataId)}removeDataId(e,i){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===i&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const i=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=i.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const s=e.size*uF(e.dtype);this.state.numBytes-=s}i.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,i.backend)}disposeVariables(){for(const e in this.state.registeredVariables)this.disposeVariable(this.state.registeredVariables[e])}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}profile(e){var i=this;return z(function*(){i.state.profiling=!0;const s=i.state.numBytes,r=i.state.numTensors;i.state.activeProfile.kernels=[],i.state.activeProfile.result=yield e(),i.state.profiling=!1,i.state.activeProfile.peakBytes=Math.max(...i.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),i.state.activeProfile.newBytes=i.state.numBytes-s,i.state.activeProfile.newTensors=i.state.numTensors-r;for(const o of i.state.activeProfile.kernels)o.kernelTimeMs=yield o.kernelTimeMs,o.extraInfo=yield o.extraInfo;return i.state.activeProfile})()}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,i,s,r,o,a){const l={id:this.state.nextTapeNodeId++,kernelName:e,inputs:i,outputs:s,saved:o},c=Xge(e);null!=c&&(r=c.gradFunc),null!=r&&(l.gradient=u=>(u=u.map((d,h)=>{if(null==d){const p=s[h],f=Ja(p.size,p.dtype);return this.makeTensor(f,p.shape,p.dtype)}return d}),r(u.length>1?u:u[0],o,a))),this.state.activeTape.push(l)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const i={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(i.name=e),this.state.scopeStack.push(i),this.state.activeScope=i}endScope(e){const i=k_(e),s=new Set(i.map(o=>o.id));for(let o=0;o<this.state.activeScope.track.length;o++){const a=this.state.activeScope.track[o];!a.kept&&!s.has(a.id)&&a.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],i.forEach(o=>{!o.kept&&o.scopeId===r.id&&this.track(o)})}gradients(e,i,s,r=!1){if(U(i.length>0,()=>"gradients() received an empty list of xs."),null!=s&&"float32"!==s.dtype)throw new Error(`dy must have 'float32' dtype, but has '${s.dtype}'`);const o=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));U(o instanceof js,()=>"The result y returned by f() must be a tensor.");const a=function Hpt(t,n,e){const i={},s={};for(let l=0;l<n.length;l++)i[n[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const d in u){const h=u[d];let p=!1;for(let f=0;f<n.length;f++)if(i[h.id]){c.outputs.forEach(g=>i[g.id]=!0),p=!0,s[c.id]=!0;break}if(p)break}}const r={};r[e.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(r[c.outputs[d].id]){for(const h in u)r[u[h].id]=!0,o[c.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const c=t[l];if(s[c.id]&&o[c.id]){const u={};for(const h in c.inputs){const p=c.inputs[h];i[p.id]&&(u[h]=p)}const d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,a.push(d)}}return a}(this.state.activeTape,i,o);if(!r&&0===a.length&&i.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const l={};l[o.id]=s??function ift(t){const n=iU(Le(t),"float32");return ue.makeTensor(n,t,"float32")}(o.shape),function Wpt(t,n,e,i){for(let s=n.length-1;s>=0;s--){const r=n[s],o=[];if(r.outputs.forEach(l=>{const c=t[l.id];o.push(null!=c?c:null)}),null==r.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${r.kernelName}.`);const a=r.gradient(o);for(const l in r.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const c=e(()=>a[l]());if("float32"!==c.dtype)throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=r.inputs[l];if(!es(c.shape,u.shape))throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(null==t[u.id])t[u.id]=c;else{const d=t[u.id];t[u.id]=i(d,c),d.dispose()}}}}(l,a,u=>this.tidy(u),sft);const c=i.map(u=>l[u.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(u=>{for(const d of u.saved)d.dispose()}),this.state.activeTape=null),{value:o,grads:c}})}customGrad(e){return U(tU(e),()=>"The f passed in customGrad(f) must be a function."),(...i)=>{let s;U(i.every(l=>l instanceof js),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const r={};return i.forEach((l,c)=>{r[c]=l}),this.runKernelFunc({forwardFunc:(l,c)=>(s=e(...i,c),U(s.value instanceof js,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),U(tU(s.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),s.value),backwardsFunc:(l,c)=>{const u=s.gradFunc(l,c),d=Array.isArray(u)?u:[u];U(d.length===i.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),U(d.every(p=>p instanceof js),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const h={};return d.forEach((p,f)=>{h[f]=()=>p}),h},inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,i){return this.state.tensorInfo.get(e).backend.readToGPU(e,i)}time(e){var i=this;return z(function*(){const s=el(),r=yield i.backend.time(e);return r.wallMs=el()-s,r})()}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new dbe;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return t.nextTensorId=0,t.nextVariableId=0,t})();function hbe(){const t=Kge();if(null==t._tfengine){const n=new xpt(t);t._tfengine=new nft(n)}return function kpt(t){qge=t}(t._tfengine.ENV),function Xpt(t){rh=t}(()=>t._tfengine),t._tfengine}const ue=hbe();function sft(t,n){return ue.runKernel(Fw,{a:t,b:n})}function pbe(t){if(t||function rft(){return typeof navigator<"u"&&null!=navigator}()){if(t||(t=navigator),"ReactNative"===t.product)return!0;const n=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");return n?/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4)):t.userAgentData&&t.userAgentData.mobile}return!1}function fbe(){return typeof window<"u"&&null!=window.document||typeof WorkerGlobalScope<"u"}const ql=Ie();function D_(t,n){let e=t;if(du(t))return"string"===n?[]:[t.length];if(lbe(t))return[t.height,t.width*(t.channels||"RGBA").length];if(cbe(t))return[t.buffer.size/(null==n?4:uF(n))];if(!Array.isArray(t))return[];const i=[];for(;Array.isArray(e)||du(e)&&"string"!==n;)i.push(e.length),e=e[0];return Array.isArray(t)&&Ie().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&mbe(t,i,[]),i}function mbe(t,n,e){if(e=e||[],!Array.isArray(t)&&!du(t))return void U(0===n.length,()=>`Element arr[${e.join("][")}] is a primitive, but should be an array/TypedArray of ${n[0]} elements`);U(n.length>0,()=>`Element arr[${e.join("][")}] should be a primitive, but is an array of ${t.length} elements`),U(t.length===n[0],()=>`Element arr[${e.join("][")}] should have ${n[0]} elements, but has ${t.length} elements`);const i=n.slice(1);for(let s=0;s<t.length;++s)mbe(t[s],i,e.concat(s))}function _be(t,n,e,i){if("string_or_numeric"!==t){if(null==t)throw new Error("Expected dtype cannot be null.");if("numeric"!==t&&t!==n||"numeric"===t&&"string"===n)throw new Error(`Argument '${e}' passed to '${i}' must be ${t} tensor, but got ${n} tensor`)}}function G(t,n,e,i="numeric"){if(t instanceof $e())return _be(i,t.dtype,n,e),t;let s=Ow(t);if("string"!==s&&["bool","int32","float32"].indexOf(i)>=0&&(s=i),_be(i,s,n,e),null==t||!du(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error(`Argument '${n}' passed to '${e}' must be a Tensor or TensorLike, but got '${null==t?"null":t.constructor.name}'`);const r=D_(t,s);!du(t)&&!Array.isArray(t)&&(t=[t]);const a="string"!==s?Tv(t,s):Iv(t,[],!0);return ue.makeTensor(a,r,s)}function CL(t,n,e,i="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${n} passed to ${e} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((r,o)=>G(r,`${n}[${o}]`,e,i))}ql.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),ql.registerFlag("IS_BROWSER",()=>fbe()),ql.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"),ql.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),ql.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),ql.registerFlag("PROD",()=>!1),ql.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ql.getBool("DEBUG")),ql.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),ql.registerFlag("IS_TEST",()=>!1),ql.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>ql.getBool("DEBUG")),ql.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),ql.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),ql.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);const gbe="__op";function re(t){const n=Object.keys(t);if(1!==n.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${n.length} keys.`);let e=n[0];const i=t[e];e.endsWith("_")&&(e=e.substring(0,e.length-1)),e+=gbe;const s=(...r)=>{ue.startScope(e);try{const o=i(...r);return S_(o)&&console.error("Cannot return a Promise inside of tidy."),ue.endScope(o),o}catch(o){throw ue.endScope(null),o}};return Object.defineProperty(s,"name",{value:e,configurable:!0}),s}const A_=re({complex_:function oft(t,n){const e=G(t,"real","complex"),i=G(n,"imag","complex");return Cc(e.shape,i.shape,`real and imag shapes, ${e.shape} and ${i.shape}, must match in call to tf.complex().`),ue.runKernel(hU,{real:e,imag:i})}});function M_(t,n,e,i){if(null==i)i=Ow(t);else if("complex64"===i)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(cbe(t)||lbe(t)){if("float32"!==i&&"int32"!==i)throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${i}.`);return ue.backend.createTensorFromGPUData(t,n||e,i)}if(!du(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=n){cu(n);const s=Le(n),r=Le(e);U(s===r,()=>`Based on the provided shape, [${n}], the tensor should have ${s} values but has ${r}`);for(let o=0;o<e.length;++o){const l=o!==e.length-1||e[o]!==Le(n.slice(o));U(e[o]===n[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${e}) does not match the provided shape (${n}). `)}}return!du(t)&&!Array.isArray(t)&&(t=[t]),n=n||e,t="string"!==i?Tv(t,i):Iv(t,[],!0),ue.makeTensor(t,n,i)}function hu(t,n,e){return M_(t,n,D_(t,e),e)}const kv={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class oh{static join(n){return new oh(n).slice()}constructor(n){if(this.shards=[],this.previousShardIndex=0,null==n||(n instanceof Array||(n=[n]),0===(n=n.map(i=>du(i)?i.buffer:i)).length))return;this.bufferUniformSize=n[0].byteLength;let e=0;for(let i=0;i<n.length;i++){const s=n[i];i!==n.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const r=e+s.byteLength;this.shards.push({buffer:s,start:e,end:r}),e=r}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(n=0,e=this.byteLength){if(0===this.shards.length)return new ArrayBuffer(0);if(n=isNaN(Number(n))?0:n,e=isNaN(Number(e))?0:e,n=Math.max(0,n),(e=Math.min(this.byteLength,e))<=n)return new ArrayBuffer(0);const i=this.findShardForByte(n);if(-1===i)throw new Error(`Could not find start shard for byte ${n}`);const r=new ArrayBuffer(e-n),o=new Uint8Array(r);let a=0;for(let l=i;l<this.shards.length;l++){const c=this.shards[l],d=n+a-c.start,h=a,f=Math.min(e,c.end)-c.start,g=new Uint8Array(c.buffer,d,f-d);if(o.set(g,h),a+=g.length,e<c.end)break}return r}findShardForByte(n){if(0===this.shards.length||n<0||n>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(n/this.bufferUniformSize),this.previousShardIndex;function e(s){return n<s.start?-1:n>=s.end?1:0}if(0===e(this.shards[this.previousShardIndex]))return this.previousShardIndex;const i=function aft(t,n){let e=0,i=t.length;for(;e<=i;){const s=Math.floor((i-e)/2)+e,r=n(t[s]);if(0===r)return s;r<0?i=s:e=s+1}return-1}(this.shards,e);return-1===i?-1:(this.previousShardIndex=i,this.previousShardIndex)}}function mp(){return ue}function SG(){return ue.memory()}function Ee(t,n){return ue.tidy(t,n)}function ki(t){k_(t).forEach(e=>e.dispose())}function wa(t){return ue.keep(t)}function bbe(t,n,e=1){return ue.registerBackend(t,n,e)}function vbe(){return ue.backend}!function Zpt(t){ibe=t}(function lft(t){Ie().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")});const N_=4;function xG(t,n){return EG.apply(this,arguments)}function EG(){return EG=z(function*(t,n){const e=[],i=[],s=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<s.length;++o){const a=s[o],l=Array.isArray(t)?t[o].tensor:t[a];if("float32"!==l.dtype&&"int32"!==l.dtype&&"bool"!==l.dtype&&"string"!==l.dtype&&"complex64"!==l.dtype)throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const c={name:a,shape:l.shape,dtype:l.dtype};if("string"===l.dtype){const u=new Promise(function(){var d=z(function*(h){const p=yield l.bytes(),f=p.reduce((y,w)=>y+w.length,0)+N_*p.length,g=new Uint8Array(f);let v=0;for(let y=0;y<p.length;y++){const w=p[y],x=new Uint8Array(new Uint32Array([w.length]).buffer);g.set(x,v),v+=N_,g.set(w,v),v+=w.length}h(g)});return function(h){return d.apply(this,arguments)}}());i.push(u)}else i.push(l.data());null!=n&&(c.group=n),e.push(c)}return{data:pft(yield Promise.all(i)),specs:e}}),EG.apply(this,arguments)}function ybe(t,n){const e=new oh(t),i={};let s=0;for(const r of n){const o=dft(r,(a,l)=>e.slice(s+a,s+l));i[r.name]=wbe(r,e.slice(s,s+o)),s+=o}return i}function dft(t,n){const e=Le(t.shape);let i;if("quantization"in t)i=kv[t.quantization.dtype];else{if("string"===t.dtype){let s=0;for(let r=0;r<e;r++)s+=N_+new Uint32Array(n(s,s+N_))[0];return s}i=kv[t.dtype]}return e*i}function hft(t,n){return TG.apply(this,arguments)}function TG(){return TG=z(function*(t,n){const e=Le(t.shape);let i;if("quantization"in t)i=kv[t.quantization.dtype];else{if("string"===t.dtype){let s=0;for(let r=0;r<e;r++)s+=N_+new Uint32Array(yield n(s,s+N_))[0];return s}i=kv[t.dtype]}return e*i}),TG.apply(this,arguments)}function wbe(t,n){const e=t.name,i=t.dtype,s=t.shape,r=Le(s);let o,a=0;if("quantization"in t){const l=t.quantization;if("uint8"===l.dtype||"uint16"===l.dtype){if(!("min"in l)||!("scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==l.dtype)throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==i)throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${i}.`)}const c=kv[l.dtype],u="uint8"===l.dtype?new Uint8Array(n):new Uint16Array(n);if("float32"===i)if("uint8"===l.dtype||"uint16"===l.dtype){o=new Float32Array(u.length);for(let d=0;d<u.length;d++)o[d]=u[d]*l.scale+l.min}else{if("float16"!==l.dtype)throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);o=function vft(){const t=function _ft(){const t=e=>{let i=e<<13,s=0;for(;!(8388608&i);)s-=8388608,i<<=1;return i&=-8388609,s+=947912704,i|s},n=new Uint32Array(2048);n[0]=0;for(let e=1;e<1024;e++)n[e]=t(e);for(let e=1024;e<2048;e++)n[e]=939524096+(e-1024<<13);return n}(),n=function gft(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let n=1;n<31;n++)t[n]=n<<23;for(let n=33;n<63;n++)t[n]=2147483648+(n-32<<23);return t}(),e=function bft(){const t=new Uint32Array(64);for(let n=0;n<64;n++)t[n]=1024;return t[0]=t[32]=0,t}();return i=>{const s=new ArrayBuffer(4*i.length),r=new Uint32Array(s);for(let o=0;o<i.length;o++){const a=i[o];r[o]=t[e[a>>10]+(1023&a)]+n[a>>10]}return new Float32Array(s)}}()(u)}else{if("int32"!==i)throw new Error(`Unsupported dtype in weight '${e}': ${i}`);if("uint8"!==l.dtype&&"uint16"!==l.dtype)throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);o=new Int32Array(u.length);for(let d=0;d<u.length;d++)o[d]=Math.round(u[d]*l.scale+l.min)}a+=r*c}else if("string"===i){const l=Le(t.shape);o=[];for(let c=0;c<l;c++){const u=new Uint32Array(n.slice(a,a+N_))[0];a+=N_;const d=new Uint8Array(n.slice(a,a+u));o.push(d),a+=u}}else{const l=kv[i];if("float32"===i)o=new Float32Array(n);else if("int32"===i)o=new Int32Array(n);else{if("bool"!==i){if("complex64"===i){o=new Float32Array(n);const c=new Float32Array(o.length/2),u=new Float32Array(o.length/2);for(let f=0;f<c.length;f++)c[f]=o[2*f],u[f]=o[2*f+1];const d=hu(c,s,"float32"),h=hu(u,s,"float32"),p=A_(d,h);return d.dispose(),h.dispose(),p}throw new Error(`Unsupported dtype in weight '${e}': ${i}`)}o=new Uint8Array(n)}a+=r*l}return hu(o,s,i)}function Cbe(t,n,e){return IG.apply(this,arguments)}function IG(){return IG=z(function*(t,n,e){let i=new Uint8Array(n);for(;i.byteLength<e;){const{done:s,value:r}=yield t.read();if(s&&null==r)throw new Error(`Reader is done but ${e-i.byteLength} bytes are still expected`);const o=new Uint8Array(i.length+r.byteLength);o.set(i,0),o.set(new Uint8Array(r),i.length),i=o}return i.buffer}),IG.apply(this,arguments)}function Sbe(t,n){return kG.apply(this,arguments)}function kG(){return kG=z(function*(t,n){const e={},i=t.getReader();let s=new ArrayBuffer(0);for(const r of n){const o=yield hft(r,function(){var c=z(function*(u,d){return s=yield Cbe(i,s,d),s.slice(u,d)});return function(u,d){return c.apply(this,arguments)}}());s=yield Cbe(i,s,o);const a=s.slice(0,o);s=s.slice(o);const l=wbe(r,a);if(e[r.name]=l,"webgpu"===ue.backendName){const c=vbe();"uploadToGPU"in c&&Le(l.shape)>=Ie().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return e}),kG.apply(this,arguments)}function pft(t){if(null===t)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let n=0;const e=[];t.forEach(r=>{if(n+=r.byteLength,e.push(r.byteLength===r.buffer.byteLength?r:new r.constructor(r)),!(r instanceof Float32Array||r instanceof Int32Array||r instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${r.constructor.name}`)});const i=new Uint8Array(n);let s=0;return e.forEach(r=>{i.set(new Uint8Array(r.buffer),s),s+=r.byteLength}),i.buffer}const DG=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function xbe(t){return DG?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function Ebe(t){return oh.join(t)}function Tbe(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);const e=t.split("/");return e[e.length-1]}function Ibe(t,n){const e={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:n};return null!=t.signature&&(e.signature=t.signature),null!=t.userDefinedMetadata&&(e.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(e.modelInitializer=t.modelInitializer),null!=t.initializerSignature&&(e.initializerSignature=t.initializerSignature),null!=t.trainingConfig&&(e.trainingConfig=t.trainingConfig),e}function kbe(t,n,e){const i={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(null!=t.trainingConfig&&(i.trainingConfig=t.trainingConfig),null!=t.weightsManifest){if(!n)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!e)throw new Error("modelJSON has weightsManifest but weightData is null");i.weightSpecs=n,i.weightData=e}return null!=t.signature&&(i.signature=t.signature),null!=t.userDefinedMetadata&&(i.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(i.modelInitializer=t.modelInitializer),null!=t.initializerSignature&&(i.initializerSignature=t.initializerSignature),i}function AG(t,n){return MG.apply(this,arguments)}function MG(){return MG=z(function*(t,n){let e,i;return null!=t.weightsManifest&&([e,i]=yield n(t.weightsManifest)),kbe(t,e,i)}),MG.apply(this,arguments)}function l2(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:xbe(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:xbe(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:new oh(t.weightData).byteLength}}function NG(t){const n=[];for(const e of t)n.push(...e.weights);return n}class Ur{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==Ur.instance&&(Ur.instance=new Ur),Ur.instance}static registerSaveRouter(n){Ur.getInstance().saveRouters.push(n)}static registerLoadRouter(n){Ur.getInstance().loadRouters.push(n)}static getSaveHandlers(n){return Ur.getHandlers(n,"save")}static getLoadHandlers(n,e){return Ur.getHandlers(n,"load",e)}static getHandlers(n,e,i){const s=[];return("load"===e?Ur.getInstance().loadRouters:Ur.getInstance().saveRouters).forEach(o=>{const a=o(n,i);null!==a&&s.push(a)}),s}}const yft=t=>Ur.registerSaveRouter(t),wft=t=>Ur.registerLoadRouter(t),Dbe=t=>Ur.getSaveHandlers(t),Cft=(t,n)=>Ur.getLoadHandlers(t,n),SL="tensorflowjs",Dv="models_store",O_="model_info_store";function FG(){if(!Ie().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,n=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==n)throw new Error("The current browser does not appear to support IndexedDB.");return n}function LG(t){const n=t.result;n.createObjectStore(Dv,{keyPath:"modelPath"}),n.createObjectStore(O_,{keyPath:"modelPath"})}let Bw=(()=>{class t{constructor(e){if(this.indexedDB=FG(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}save(e){var i=this;return z(function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return i.databaseAction(i.modelPath,e)})()}load(){var e=this;return z(function*(){return e.databaseAction(e.modelPath)})()}databaseAction(e,i){return new Promise((s,r)=>{const o=this.indexedDB.open(SL,1);o.onupgradeneeded=()=>LG(o),o.onsuccess=()=>{const a=o.result;if(null==i){const l=a.transaction(Dv,"readonly"),u=l.objectStore(Dv).get(this.modelPath);u.onsuccess=()=>{if(null==u.result)return a.close(),r(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));s(u.result.modelArtifacts)},u.onerror=d=>(a.close(),r(u.error)),l.oncomplete=()=>a.close()}else{i.weightData=oh.join(i.weightData);const l=l2(i),c=a.transaction(O_,"readwrite");let d,h,u=c.objectStore(O_);try{d=u.put({modelPath:this.modelPath,modelArtifactsInfo:l})}catch(p){return r(p)}d.onsuccess=()=>{h=a.transaction(Dv,"readwrite");const p=h.objectStore(Dv);let f;try{f=p.put({modelPath:this.modelPath,modelArtifacts:i,modelArtifactsInfo:l})}catch(g){return r(g)}f.onsuccess=()=>s({modelArtifactsInfo:l}),f.onerror=g=>{u=c.objectStore(O_);const v=u.delete(this.modelPath);v.onsuccess=()=>(a.close(),r(f.error)),v.onerror=y=>(a.close(),r(f.error))}},d.onerror=p=>(a.close(),r(d.error)),c.oncomplete=()=>{null==h?a.close():h.oncomplete=()=>a.close()}}},o.onerror=a=>r(o.error)})}}return t.URL_SCHEME="indexeddb://",t})();const Abe=t=>Ie().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Bw.URL_SCHEME)?function Sft(t){return new Bw(t)}(t.slice(Bw.URL_SCHEME.length)):null;Ur.registerSaveRouter(Abe),Ur.registerLoadRouter(Abe);class Eft{constructor(){this.indexedDB=FG()}listModels(){var n=this;return z(function*(){return new Promise((e,i)=>{const s=n.indexedDB.open(SL,1);s.onupgradeneeded=()=>LG(s),s.onsuccess=()=>{const r=s.result,o=r.transaction(O_,"readonly"),l=o.objectStore(O_).getAll();l.onsuccess=()=>{const c={};for(const u of l.result)c[u.modelPath]=u.modelArtifactsInfo;e(c)},l.onerror=c=>(r.close(),i(l.error)),o.oncomplete=()=>r.close()},s.onerror=r=>i(s.error)})})()}removeModel(n){var e=this;return z(function*(){return n=function xft(t){return t.startsWith(Bw.URL_SCHEME)?t.slice(Bw.URL_SCHEME.length):t}(n),new Promise((i,s)=>{const r=e.indexedDB.open(SL,1);r.onupgradeneeded=()=>LG(r),r.onsuccess=()=>{const o=r.result,a=o.transaction(O_,"readwrite"),l=a.objectStore(O_),c=l.get(n);let u;c.onsuccess=()=>{if(null==c.result)return o.close(),s(new Error(`Cannot find model with path '${n}' in IndexedDB.`));{const d=l.delete(n),h=()=>{u=o.transaction(Dv,"readwrite");const f=u.objectStore(Dv).delete(n);f.onsuccess=()=>i(c.result.modelArtifactsInfo),f.onerror=g=>s(c.error)};d.onsuccess=h,d.onerror=p=>(h(),o.close(),s(c.error))}},c.onerror=d=>(o.close(),s(c.error)),a.oncomplete=()=>{null==u?o.close():u.oncomplete=()=>o.close()}},r.onerror=o=>s(r.error)})})()}}const _p="/",Av="tensorflowjs_models",Mbe="info",Tft="model_topology",Ift="weight_specs",kft="weight_data",Dft="model_metadata";function Nbe(t){return{info:[Av,t,Mbe].join(_p),topology:[Av,t,Tft].join(_p),weightSpecs:[Av,t,Ift].join(_p),weightData:[Av,t,kft].join(_p),modelMetadata:[Av,t,Dft].join(_p)}}function Obe(t){for(const n of Object.values(t))window.localStorage.removeItem(n)}function Rbe(t){const n=t.split(_p);if(n.length<3)throw new Error(`Invalid key format: ${t}`);return n.slice(1,n.length-1).join(_p)}let Vw=(()=>{class t{constructor(e){if(!Ie().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Nbe(this.modelPath)}save(e){var i=this;return z(function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const s=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=l2(e),a=oh.join(e.weightData);try{return i.LS.setItem(i.keys.info,JSON.stringify(o)),i.LS.setItem(i.keys.topology,s),i.LS.setItem(i.keys.weightSpecs,r),i.LS.setItem(i.keys.weightData,function fft(t){if(DG)return Buffer.from(t).toString("base64");const n=new Uint8Array(t);let e="";for(let i=0,s=n.length;i<s;i++)e+=String.fromCharCode(n[i]);return btoa(e)}(a)),i.LS.setItem(i.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0})),{modelArtifactsInfo:o}}catch{throw Obe(i.keys),new Error(`Failed to save model '${i.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}})()}load(){var e=this;return z(function*(){const i=JSON.parse(e.LS.getItem(e.keys.info));if(null==i)throw new Error(`In local storage, there is no model with name '${e.modelPath}'`);if("JSON"!==i.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const s={},r=JSON.parse(e.LS.getItem(e.keys.topology));if(null==r)throw new Error(`In local storage, the topology of model '${e.modelPath}' is missing.`);s.modelTopology=r;const o=JSON.parse(e.LS.getItem(e.keys.weightSpecs));if(null==o)throw new Error(`In local storage, the weight specs of model '${e.modelPath}' are missing.`);s.weightSpecs=o;const a=e.LS.getItem(e.keys.modelMetadata);if(null!=a){const c=JSON.parse(a);s.format=c.format,s.generatedBy=c.generatedBy,s.convertedBy=c.convertedBy,null!=c.signature&&(s.signature=c.signature),null!=c.userDefinedMetadata&&(s.userDefinedMetadata=c.userDefinedMetadata),null!=c.modelInitializer&&(s.modelInitializer=c.modelInitializer),null!=c.initializerSignature&&(s.initializerSignature=c.initializerSignature),null!=c.trainingConfig&&(s.trainingConfig=c.trainingConfig)}const l=e.LS.getItem(e.keys.weightData);if(null==l)throw new Error(`In local storage, the binary weight values of model '${e.modelPath}' are missing.`);return s.weightData=function mft(t){if(DG){const i=Buffer.from(t,"base64");return i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength)}const n=atob(t),e=new Uint8Array(n.length);for(let i=0;i<n.length;++i)e.set([n.charCodeAt(i)],i);return e.buffer}(l),s})()}}return t.URL_SCHEME="localstorage://",t})();const Fbe=t=>Ie().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Vw.URL_SCHEME)?function Mft(t){return new Vw(t)}(t.slice(Vw.URL_SCHEME.length)):null;Ur.registerSaveRouter(Fbe),Ur.registerLoadRouter(Fbe);class Nft{constructor(){U(Ie().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),U(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){var n=this;return z(function*(){const e={},i=Av+_p,s=_p+Mbe;for(let r=0;r<n.LS.length;++r){const o=n.LS.key(r);o.startsWith(i)&&o.endsWith(s)&&(e[Rbe(o)]=JSON.parse(n.LS.getItem(o)))}return e})()}removeModel(n){var e=this;return z(function*(){n=function Aft(t){return t.startsWith(Vw.URL_SCHEME)?t.slice(Vw.URL_SCHEME.length):t}(n);const i=Nbe(n);if(null==e.LS.getItem(i.info))throw new Error(`Cannot find model at path '${n}'`);const s=JSON.parse(e.LS.getItem(i.info));return Obe(i),s})()}}const zw="://";class yl{constructor(){this.managers={}}static getInstance(){return null==yl.instance&&(yl.instance=new yl),yl.instance}static registerManager(n,e){U(null!=n,()=>"scheme must not be undefined or null."),n.endsWith(zw)&&(n=n.slice(0,n.indexOf(zw))),U(n.length>0,()=>"scheme must not be an empty string.");const i=yl.getInstance();U(null==i.managers[n],()=>`A model store manager is already registered for scheme '${n}'.`),i.managers[n]=e}static getManager(n){const e=yl.getInstance().managers[n];if(null==e)throw new Error(`Cannot find model manager for scheme '${n}'`);return e}static getSchemes(){return Object.keys(yl.getInstance().managers)}}function xL(t){if(-1===t.indexOf(zw))throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${yl.getSchemes().join(",")}`);return{scheme:t.split(zw)[0],path:t.split(zw)[1]}}function Lbe(t,n){return PG.apply(this,arguments)}function PG(){return PG=z(function*(t,n,e=!1){U(t!==n,()=>`Old path and new path are the same: '${t}'`);const i=Ur.getLoadHandlers(t);U(i.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),U(i.length<2,()=>`Copying failed because more than one (${i.length}) load handlers for source URL ${t}.`);const s=i[0],r=Ur.getSaveHandlers(n);U(r.length>0,()=>`Copying failed because no save handler is found for destination URL ${n}.`),U(r.length<2,()=>`Copying failed because more than one (${i.length}) save handlers for destination URL ${n}.`);const o=r[0],a=xL(t).scheme,l=xL(t).path,c=a===xL(t).scheme,u=yield s.load();e&&c&&(yield yl.getManager(a).removeModel(l));const d=yield o.save(u);return e&&!c&&(yield yl.getManager(a).removeModel(l)),d.modelArtifactsInfo}),PG.apply(this,arguments)}function Oft(){return $G.apply(this,arguments)}function $G(){return $G=z(function*(){const t=yl.getSchemes(),n={};for(const e of t){const i=yield yl.getManager(e).listModels();for(const s in i)n[e+zw+s]=i[s]}return n}),$G.apply(this,arguments)}function Rft(t){return BG.apply(this,arguments)}function BG(){return BG=z(function*(t){const n=xL(t);return yl.getManager(n.scheme).removeModel(n.path)}),BG.apply(this,arguments)}function Fft(t,n){return VG.apply(this,arguments)}function VG(){return VG=z(function*(t,n){return Lbe(t,n,!1)}),VG.apply(this,arguments)}function Lft(t,n){return zG.apply(this,arguments)}function zG(){return zG=z(function*(t,n){return Lbe(t,n,!0)}),zG.apply(this,arguments)}class Pft{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(n,e){return fetch(n,e)}now(){return performance.now()}encode(n,e){if("utf-8"!==e&&"utf8"!==e)throw new Error(`Browser's encoder only supports utf-8, but got ${e}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(n)}decode(n,e){return new TextDecoder(e).decode(n)}setTimeoutCustom(n,e){typeof window>"u"||!Ie().getBool("USE_SETTIMEOUTCUSTOM")?setTimeout(n,e):(this.functionRefs.push(n),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},e),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",i=>{i.source===window&&i.data.name===this.messageName&&(i.stopPropagation(),(0,this.functionRefs[i.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0))},!0)))}isTypedArray(n){return Yge(n)}}if(Ie().get("IS_BROWSER")){Ie().setPlatform("browser",new Pft);try{yl.registerManager(Vw.URL_SCHEME,new Nft)}catch{}try{yl.registerManager(Bw.URL_SCHEME,new Eft)}catch{}}let Uw;function Di(t,n="float32",e){return n=n||"float32",cu(t),new Ko(t,n,e)}Ie().get("IS_NODE")&&!Ie().get("IS_BROWSER")&&Ie().setPlatform("node",new class Bft{constructor(){this.util=ye(590),this.textEncoder=new this.util.TextEncoder}fetch(n,e){return null!=Ie().global.fetch?Ie().global.fetch(n,e):(null==Uw&&(Uw=ye(817)),Uw(n,e))}now(){const n=process.hrtime();return 1e3*n[0]+n[1]/1e6}encode(n,e){if("utf-8"!==e&&"utf8"!==e)throw new Error(`Node built-in encoder only supports utf-8, but got ${e}`);return this.textEncoder.encode(n)}decode(n,e){return 0===n.length?"":new this.util.TextDecoder(e).decode(n)}isTypedArray(n){return this.util.types.isFloat32Array(n)||this.util.types.isInt32Array(n)||this.util.types.isUint8Array(n)||this.util.types.isUint8ClampedArray(n)}});const Rt=re({cast_:function Vft(t,n){const e=G(t,"x","cast");if(!function ypt(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}(n))throw new Error(`Failed to cast to unknown dtype ${n}`);if("string"===n&&"string"!==e.dtype||"string"!==n&&"string"===e.dtype)throw new Error("Only strings can be casted to strings");return ue.runKernel(mI,{x:e},{dtype:n})}}),Lf=re({clone_:function zft(t){const e={x:G(t,"x","clone","string_or_numeric")};return ue.runKernel(kI,e)}});function Pbe(t,n=!1){console.log(t.toString(n))}hbe(),function Ypt(t){$w=t}({buffer:Di,cast:Rt,clone:Lf,print:Pbe});const lt=re({add_:function Uft(t,n){let e=G(t,"a","add"),i=G(n,"b","add");return[e,i]=eo(e,i),ue.runKernel(Fw,{a:e,b:i})}}),UG=re({floorDiv_:function Gft(t,n){let e=G(t,"a","floorDiv"),i=G(n,"b","floorDiv");return[e,i]=eo(e,i),ue.runKernel(TI,{a:e,b:i})}}),pn=re({div_:function jft(t,n){let e=G(t,"a","div"),i=G(n,"b","div");return[e,i]=eo(e,i),"int32"===e.dtype&&"int32"===i.dtype?UG(e,i):ue.runKernel(yI,{a:e,b:i},{})}}),pe=re({mul_:function Hft(t,n){let e=G(t,"a","mul"),i=G(n,"b","mul");return[e,i]=eo(e,i),ue.runKernel(PI,{a:e,b:i})}}),Fa=re({sqrt_:function Wft(t){const e={x:G(t,"x","sqrt","float32")};return ue.runKernel(YI,e)}}),lr=re({square_:function qft(t){const n=G(t,"x","square");return ue.runKernel("Square",{x:n},{})}}),ns=re({zerosLike_:function Kft(t){const e={x:G(t,"x","zerosLike")};return ue.runKernel(pL,e)}});function Pf(t){return ue.customGrad(t)}function En(t,n){if((du(t)&&"string"!==n||Array.isArray(t))&&"complex64"!==n)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===n&&du(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return M_(t,[],[],n)}const Yft=new Map,GG=new Map;class Gw{getClassName(){return this.constructor.className}static fromConfig(n,e){return new n(e)}}class Ju{constructor(){this.classNameMap={}}static getMap(){return null==Ju.instance&&(Ju.instance=new Ju),Ju.instance}static register(n){Ju.getMap().classNameMap[n.className]=[n,n.fromConfig]}}function pt(t,n,e){U(null!=t.className,()=>"Class being registered does not have the static className property defined."),U("string"==typeof t.className,()=>"className is required to be a string, but got type "+typeof t.className),U(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof n>"u"&&(n="Custom"),typeof e>"u"&&(e=t.className);const s=n+">"+e;return Ju.register(t),Yft.set(s,t),GG.set(t,s),t}class R_ extends Gw{minimize(n,e=!1,i){const{value:s,grads:r}=this.computeGradients(n,i);if(null!=i){const o=i.map(a=>({name:a.name,tensor:r[a.name]}));this.applyGradients(o)}else this.applyGradients(r);return ki(r),e?s:(s.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(n,e){return function Xft(t,n){U(tU(t),()=>"The f passed in variableGrads(f) must be a function"),U(null==n||Array.isArray(n)&&n.every(c=>c instanceof wL),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const e=null!=n;if(!e){n=[];for(const c in ue.registeredVariables)n.push(ue.registeredVariables[c])}const i=e?n.filter(c=>!c.trainable):null,s=n.length;U((n=n.filter(c=>c.trainable)).length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const{value:o,grads:a}=ue.gradients(t,n,null,!0);U(a.some(c=>null!=c),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),U(0===o.rank,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return n.forEach((c,u)=>{null!=a[u]&&(l[c.name]=a[u])}),i?.forEach(c=>l[c.name]=null),{value:o,grads:l}}(n,e)}dispose(){null!=this.iterations_&&ki(this.iterations_)}saveIterations(){var n=this;return z(function*(){return null==n.iterations_&&(n.iterations_=0),{name:"iter",tensor:En(n.iterations_,"int32")}})()}getWeights(){return z(function*(){throw new Error("getWeights() is not implemented for this optimizer yet.")})()}setWeights(n){var e=this;return z(function*(){throw new Error(`setWeights() is not implemented for this optimizer class ${e.getClassName()}`)})()}extractIterations(n){var e=this;return z(function*(){return e.iterations_=(yield n[0].tensor.data())[0],n.slice(1)})()}}Object.defineProperty(R_,Symbol.hasInstance,{value:t=>null!=t.minimize&&null!=t.computeGradients&&null!=t.applyGradients});class $be extends R_{static get className(){return"Adadelta"}constructor(n,e,i=null){super(),this.learningRate=n,this.rho=e,this.epsilon=i,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==i&&(this.epsilon=ue.backend.epsilon())}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,s)=>{const r=ue.registeredVariables[i],o=!1;null==this.accumulatedGrads[s]&&(this.accumulatedGrads[s]={originalName:`${i}/accum_grad`,variable:Ee(()=>ns(r).variable(o))}),null==this.accumulatedUpdates[s]&&(this.accumulatedUpdates[s]={originalName:`${i}/accum_var`,variable:Ee(()=>ns(r).variable(o))});const a=Array.isArray(n)?n[s].tensor:n[i];if(null==a)return;const l=this.accumulatedGrads[s].variable,c=this.accumulatedUpdates[s].variable;Ee(()=>{const u=lt(pe(l,this.rho),pe(lr(a),1-this.rho)),d=pe(pn(Fa(lt(c,this.epsilon)),Fa(lt(l,this.epsilon))),a),h=lt(pe(c,this.rho),pe(lr(d),1-this.rho));l.assign(u),c.assign(h);const p=lt(pe(d,-this.learningRate),r);r.assign(p)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(ki(this.accumulatedGrads.map(n=>n.variable)),ki(this.accumulatedUpdates.map(n=>n.variable)))}getWeights(){var n=this;return z(function*(){const e=[...n.accumulatedGrads,...n.accumulatedUpdates];return[yield n.saveIterations()].concat(e.map(i=>({name:i.originalName,tensor:i.variable})))})()}setWeights(n){var e=this;return z(function*(){const i=(n=yield e.extractIterations(n)).length/2,s=!1;e.accumulatedGrads=n.slice(0,i).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),e.accumulatedUpdates=n.slice(i,2*i).map(r=>({originalName:r.name,variable:r.tensor.variable(s)}))})()}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(n,e){return new n(e.learningRate,e.rho,e.epsilon)}}function jw(t,n,e){return cu(t),e=e||Ow(n),ue.runKernel(DU,{},{shape:t,value:n,dtype:e})}class Bbe extends R_{static get className(){return"Adagrad"}constructor(n,e=.1){super(),this.learningRate=n,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,s)=>{const r=ue.registeredVariables[i];null==this.accumulatedGrads[s]&&(this.accumulatedGrads[s]={originalName:`${i}/accumulator`,variable:Ee(()=>jw(r.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(n)?n[s].tensor:n[i];if(null==o)return;const a=this.accumulatedGrads[s].variable;Ee(()=>{const l=lt(a,lr(o));a.assign(l);const c=lt(pe(pn(o,Fa(lt(l,ue.backend.epsilon()))),-this.learningRate),r);r.assign(c)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&ki(this.accumulatedGrads.map(n=>n.variable))}getWeights(){var n=this;return z(function*(){return[yield n.saveIterations()].concat(n.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))})()}setWeights(n){var e=this;return z(function*(){n=yield e.extractIterations(n),e.accumulatedGrads=n.map(s=>({originalName:s.name,variable:s.tensor.variable(!1)}))})()}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(n,e){return new n(e.learningRate,e.initialAccumulatorValue)}}const $f=re({pow_:function Zft(t,n){let e=G(t,"base","pow"),i=G(n,"exp","pow");return[e,i]=eo(e,i),ue.runKernel($I,{a:e,b:i})}}),Xt=re({sub_:function Qft(t,n){let e=G(t,"a","sub"),i=G(n,"b","sub");return[e,i]=eo(e,i),ue.runKernel(QI,{a:e,b:i})}});class Vbe extends R_{static get className(){return"Adam"}constructor(n,e,i,s=null){super(),this.learningRate=n,this.beta1=e,this.beta2=i,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Ee(()=>{this.accBeta1=En(e).variable(),this.accBeta2=En(i).variable()}),null==s&&(this.epsilon=ue.backend.epsilon())}applyGradients(n){const e=Array.isArray(n)?n.map(i=>i.name):Object.keys(n);Ee(()=>{const i=Xt(1,this.accBeta1),s=Xt(1,this.accBeta2);e.forEach((r,o)=>{const a=ue.registeredVariables[r],l=!1;null==this.accumulatedFirstMoment[o]&&(this.accumulatedFirstMoment[o]={originalName:`${r}/m`,variable:Ee(()=>ns(a).variable(l))}),null==this.accumulatedSecondMoment[o]&&(this.accumulatedSecondMoment[o]={originalName:`${r}/v`,variable:Ee(()=>ns(a).variable(l))});const c=Array.isArray(n)?n[o].tensor:n[r];if(null==c)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,h=lt(pe(u,this.beta1),pe(c,1-this.beta1)),p=lt(pe(d,this.beta2),pe(lr(c),1-this.beta2)),f=pn(h,i),g=pn(p,s);u.assign(h),d.assign(p);const v=lt(pe(pn(f,lt(Fa(g),this.epsilon)),-this.learningRate),a);a.assign(v)}),this.accBeta1.assign(pe(this.accBeta1,this.beta1)),this.accBeta2.assign(pe(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&ki(this.accumulatedFirstMoment.map(n=>n.variable)),null!=this.accumulatedSecondMoment&&ki(this.accumulatedSecondMoment.map(n=>n.variable))}getWeights(){var n=this;return z(function*(){const e=[...n.accumulatedFirstMoment,...n.accumulatedSecondMoment];return[yield n.saveIterations()].concat(e.map(i=>({name:i.originalName,tensor:i.variable})))})()}setWeights(n){var e=this;return z(function*(){n=yield e.extractIterations(n),Ee(()=>{e.accBeta1.assign($f(e.beta1,e.iterations_+1)),e.accBeta2.assign($f(e.beta2,e.iterations_+1))});const i=n.length/2,s=!1;e.accumulatedFirstMoment=n.slice(0,i).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),e.accumulatedSecondMoment=n.slice(i,2*i).map(r=>({originalName:r.name,variable:r.tensor.variable(s)}))})()}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(n,e){return new n(e.learningRate,e.beta1,e.beta2,e.epsilon)}}const Xo=re({abs_:function Jft(t){const n=G(t,"x","abs");return ue.runKernel("complex64"===n.dtype?yF:dF,{x:n})}});function Hw(t,n){const e=t.length,i=[];for(let s=0;s<e;s++){const r=e-1-s;(n[n.length-1-s]||1)>1&&1===(t[r]||1)&&i.unshift(r)}return i}function Yo(t,n){const e=[];for(let i=0;i<n.length;i++){const s=t[t.length-i-1],r=n.length-i-1;(null==s||1===s&&n[r]>1)&&e.unshift(r)}return e}function mi(t,n){const e=Math.max(t.length,n.length),i=new Array(e);for(let s=0;s<e;s++){let r=t[t.length-s-1];null==r&&(r=1);let o=n[n.length-s-1];if(null==o&&(o=1),1===r)i[e-s-1]=o;else if(1===o)i[e-s-1]=r;else{if(r!==o)throw Error(`Operands could not be broadcast together with shapes ${t} and ${n}.`);i[e-s-1]=r}}return i}const Bf=re({maximum_:function emt(t,n){let e=G(t,"a","maximum"),i=G(n,"b","maximum");return[e,i]=eo(e,i),"bool"===e.dtype&&(e=Rt(e,"int32"),i=Rt(i,"int32")),mi(e.shape,i.shape),ue.runKernel(RI,{a:e,b:i})}});class zbe extends R_{static get className(){return"Adamax"}constructor(n,e,i,s=null,r=0){super(),this.learningRate=n,this.beta1=e,this.beta2=i,this.epsilon=s,this.decay=r,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Ee(()=>{this.iteration=En(0).variable(),this.accBeta1=En(e).variable()}),null==s&&(this.epsilon=ue.backend.epsilon())}applyGradients(n){const e=Array.isArray(n)?n.map(i=>i.name):Object.keys(n);Ee(()=>{const i=Xt(1,this.accBeta1),s=pn(-this.learningRate,lt(pe(this.iteration,this.decay),1));e.forEach((r,o)=>{const a=ue.registeredVariables[r],l=!1;null==this.accumulatedFirstMoment[o]&&(this.accumulatedFirstMoment[o]={originalName:`${r}/m`,variable:ns(a).variable(l)}),null==this.accumulatedWeightedInfNorm[o]&&(this.accumulatedWeightedInfNorm[o]={originalName:`${r}/v`,variable:ns(a).variable(l)});const c=Array.isArray(n)?n[o].tensor:n[r];if(null==c)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,h=lt(pe(u,this.beta1),pe(c,1-this.beta1)),p=pe(d,this.beta2),f=Xo(c),g=Bf(p,f);u.assign(h),d.assign(g);const v=lt(pe(pn(s,i),pn(h,lt(g,this.epsilon))),a);a.assign(v)}),this.iteration.assign(lt(this.iteration,1)),this.accBeta1.assign(pe(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&ki(this.accumulatedFirstMoment.map(n=>n.variable)),null!=this.accumulatedWeightedInfNorm&&ki(this.accumulatedWeightedInfNorm.map(n=>n.variable))}getWeights(){return z(function*(){throw new Error("getWeights() is not implemented for Adamax yet.")})()}setWeights(n){return z(function*(){throw new Error("setWeights() is not implemented for Adamax yet.")})()}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(n,e){return new n(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)}}class jG extends R_{static get className(){return"SGD"}constructor(n){super(),this.learningRate=n,this.setLearningRate(n)}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,s)=>{const r=Array.isArray(n)?n[s].tensor:n[i];if(null==r)return;const o=ue.registeredVariables[i];Ee(()=>{const a=lt(pe(this.c,r),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(n){this.learningRate=n,null!=this.c&&this.c.dispose(),this.c=wa(En(-n))}dispose(){this.c.dispose()}getWeights(){var n=this;return z(function*(){return[yield n.saveIterations()]})()}setWeights(n){var e=this;return z(function*(){if(0!==(n=yield e.extractIterations(n)).length)throw new Error("SGD optimizer does not have settable weights.")})()}getConfig(){return{learningRate:this.learningRate}}static fromConfig(n,e){return new n(e.learningRate)}}class Ube extends jG{static get className(){return"Momentum"}constructor(n,e,i=!1){super(n),this.learningRate=n,this.momentum=e,this.useNesterov=i,this.accumulations=[],this.m=En(this.momentum)}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,s)=>{const r=ue.registeredVariables[i];null==this.accumulations[s]&&(this.accumulations[s]={originalName:`${i}/momentum`,variable:Ee(()=>ns(r).variable(!1))});const o=this.accumulations[s].variable,a=Array.isArray(n)?n[s].tensor:n[i];null!=a&&Ee(()=>{let l;const c=lt(pe(this.m,o),a);l=lt(pe(this.c,this.useNesterov?lt(a,pe(c,this.m)):c),r),o.assign(c),r.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&ki(this.accumulations.map(n=>n.variable))}setMomentum(n){this.momentum=n}getWeights(){var n=this;return z(function*(){return[yield n.saveIterations()].concat(n.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))})()}setWeights(n){var e=this;return z(function*(){n=yield e.extractIterations(n),e.accumulations=n.map(s=>({originalName:s.name,variable:s.tensor.variable(!1)}))})()}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(n,e){return new n(e.learningRate,e.momentum,e.useNesterov)}}class Gbe extends R_{static get className(){return"RMSProp"}constructor(n,e=.9,i=0,s=null,r=!1){if(super(),this.learningRate=n,this.decay=e,this.momentum=i,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,null==s&&(this.epsilon=ue.backend.epsilon()),null==n)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,s)=>{const r=ue.registeredVariables[i],o=!1;null==this.accumulatedMeanSquares[s]&&(this.accumulatedMeanSquares[s]={originalName:`${i}/rms`,variable:Ee(()=>ns(r).variable(o))}),null==this.accumulatedMoments[s]&&(this.accumulatedMoments[s]={originalName:`${i}/momentum`,variable:Ee(()=>ns(r).variable(o))}),null==this.accumulatedMeanGrads[s]&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${i}/mg`,variable:Ee(()=>ns(r).variable(o))});const a=Array.isArray(n)?n[s].tensor:n[i];if(null==a)return;const l=this.accumulatedMeanSquares[s].variable,c=this.accumulatedMoments[s].variable;Ee(()=>{const u=lt(pe(l,this.decay),pe(lr(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[s].variable,h=lt(pe(d,this.decay),pe(a,1-this.decay)),p=pn(pe(a,this.learningRate),Fa(Xt(u,lt(lr(h),this.epsilon)))),f=lt(pe(c,this.momentum),p);l.assign(u),d.assign(h),c.assign(f);const g=Xt(r,f);r.assign(g)}else{const d=lt(pe(l,this.decay),pe(lr(a),1-this.decay)),h=lt(pe(c,this.momentum),pn(pe(a,this.learningRate),Fa(lt(d,this.epsilon))));l.assign(d),c.assign(h);const p=Xt(r,h);r.assign(p)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&ki(this.accumulatedMeanSquares.map(n=>n.variable)),null!=this.accumulatedMeanGrads&&this.centered&&ki(this.accumulatedMeanGrads.map(n=>n.variable)),null!=this.accumulatedMoments&&ki(this.accumulatedMoments.map(n=>n.variable))}getWeights(){var n=this;return z(function*(){const e=[...n.accumulatedMeanSquares,...n.accumulatedMoments];return n.centered&&e.push(...n.accumulatedMeanGrads),[yield n.saveIterations()].concat(e.map(i=>({name:i.originalName,tensor:i.variable})))})()}setWeights(n){var e=this;return z(function*(){n=yield e.extractIterations(n);const i=e.centered?n.length/3:n.length/2,s=!1;e.accumulatedMeanSquares=n.slice(0,i).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),e.accumulatedMoments=n.slice(i,2*i).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})),e.centered&&(e.accumulatedMeanGrads=n.slice(2*i,3*i).map(r=>({originalName:r.name,variable:r.tensor.variable(s)})))})()}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(n,e){return new n(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)}}const tmt=[$be,Bbe,Vbe,zbe,Ube,Gbe,jG];function jbe(t){return new Promise(n=>setTimeout(n)).then(t)}let HG=(()=>{class t{constructor(e){if(!Ie().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),(null==e||0===e.length)&&(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}save(e){var i=this;return z(function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const s=oh.join(e.weightData),r=window.URL.createObjectURL(new Blob([s],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const a=Ibe(e,[{paths:["./"+i.weightDataFileName],weights:e.weightSpecs}]),l=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),c=null==i.modelJsonAnchor?document.createElement("a"):i.modelJsonAnchor;if(c.download=i.modelJsonFileName,c.href=l,yield jbe(()=>c.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){const u=null==i.weightDataAnchor?document.createElement("a"):i.weightDataAnchor;u.download=i.weightDataFileName,u.href=r,yield jbe(()=>u.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:l2(e)}}})()}}return t.URL_SCHEME="downloads://",t})();class omt{constructor(n){if(null==n||n.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${n}`);this.jsonFile=n[0],this.weightsFiles=n.slice(1)}load(){var n=this;return z(function*(){return new Promise((e,i)=>{const s=new FileReader;s.onload=r=>{const o=JSON.parse(r.target.result),a=o.modelTopology;if(null==a)return void i(new Error(`modelTopology field is missing from file ${n.jsonFile.name}`));if(null==o.weightsManifest)return void i(new Error(`weightManifest field is missing from file ${n.jsonFile.name}`));if(0===n.weightsFiles.length)return void e({modelTopology:a});const c=AG(o,u=>n.loadWeights(u));e(c)},s.onerror=r=>i(`Failed to read model topology and weights manifest JSON from file '${n.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),s.readAsText(n.jsonFile)})})()}loadWeights(n){const e=[],i=[];for(const o of n)e.push(...o.weights),i.push(...o.paths);const s=this.checkManifestAndWeightFiles(n),r=i.map(o=>this.loadWeightsFile(o,s[o]));return Promise.all(r).then(o=>[e,o])}loadWeightsFile(n,e){return new Promise((i,s)=>{const r=new FileReader;r.onload=o=>{i(o.target.result)},r.onerror=o=>s(`Failed to weights data from file of path '${n}'.`),r.readAsArrayBuffer(e)})}checkManifestAndWeightFiles(n){const e=[],i=this.weightsFiles.map(r=>Tbe(r.name)),s={};for(const r of n)r.paths.forEach(o=>{const a=Tbe(o);if(-1!==e.indexOf(a))throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(e.push(a),-1===i.indexOf(a))throw new Error(`Weight file with basename '${a}' is not provided.`);s[o]=this.weightsFiles[i.indexOf(a)]});if(e.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${e.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}function cmt(t){return new omt(t)}function Hbe(t,n,e,i){(function o(l){U(null!=l&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")})(t),function a(l,c){U(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),U(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),U(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}(e=e??0,i=i??1);let s=0;return Promise.all(t.map(l=>(l.then(c=>{const u=e+ ++s/t.length*(i-e);return n(u),c}),l)))}function Wbe(t,n){return WG.apply(this,arguments)}function WG(){return WG=z(function*(t,n){null==n&&(n={});const e=null==n.fetchFunc?Ie().platform.fetch:n.fetchFunc,i=t.map(d=>e(d,n.requestInit,{isBinary:!0})),a=(null==n.onProgress?yield Promise.all(i):yield Hbe(i,n.onProgress,0,.5)).map(d=>d.arrayBuffer());return null==n.onProgress?yield Promise.all(a):yield Hbe(a,n.onProgress,.5,1)}),WG.apply(this,arguments)}function dmt(t){return qG.apply(this,arguments)}function qG(){return qG=z(function*(t,n="",e,i){return qbe(o=>Wbe(o,{requestInit:i}))(t,n,e)}),qG.apply(this,arguments)}function qbe(t){return function(){var n=z(function*(e,i="",s){const r=e.map(()=>!1),o={},a=null!=s?s.map(()=>!1):[],l=[];if(e.forEach((f,g)=>{let v=0;f.weights.forEach(y=>{const x=kv["quantization"in y?y.quantization.dtype:y.dtype]*Le(y.shape),T=()=>{r[g]=!0,null==o[g]&&(o[g]=[]),o[g].push({manifestEntry:y,groupOffset:v,sizeBytes:x})};null!=s?s.forEach((k,R)=>{k===y.name&&(T(),a[R]=!0)}):T(),l.push(y.name),v+=x})}),!a.every(f=>f)){const f=s.filter((g,v)=>!a[v]);throw new Error(`Could not find weights in manifest with names: ${f.join(", ")}. \nManifest JSON has weights with names: ${l.join(", ")}.`)}const c=r.reduce((f,g,v)=>(g&&f.push(v),f),[]),u=[];c.forEach(f=>{e[f].paths.forEach(g=>{const v=i+(i.endsWith("/")?"":"/")+g;u.push(v)})});const d=yield t(u),h={};let p=0;return c.forEach(f=>{const g=e[f].paths.length,v=new oh(d.slice(p,p+g));o[f].forEach(w=>{const T=ybe(v.slice(w.groupOffset,w.groupOffset+w.sizeBytes),[w.manifestEntry]);for(const k in T)h[k]=T[k]}),p+=g}),h});return function(e){return n.apply(this,arguments)}}()}Ur.registerSaveRouter(t=>Ie().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(HG.URL_SCHEME)?function lmt(t="model"){return new HG(t)}(t.slice(HG.URL_SCHEME.length)):null);let Kbe=(()=>{class t{constructor(e,i){if(this.DEFAULT_METHOD="POST",null==i&&(i={}),this.weightPathPrefix=i.weightPathPrefix,this.weightUrlConverter=i.weightUrlConverter,null!=i.fetchFunc?(U("function"==typeof i.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=i.fetchFunc):this.fetch=Ie().platform.fetch,U(null!=e&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&U(2===e.length,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,null!=i.requestInit&&null!=i.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=i.requestInit||{},this.loadOptions=i}save(e){var i=this;return z(function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const s=Object.assign({method:i.DEFAULT_METHOD},i.requestInit);s.body=new FormData;const o=Ibe(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(s.body.append("model.json",new Blob([JSON.stringify(o)],{type:"application/json"}),"model.json"),null!=e.weightData){const l=oh.join(e.weightData);s.body.append("model.weights.bin",new Blob([l],{type:"application/octet-stream"}),"model.weights.bin")}const a=yield i.fetch(i.path,s);if(a.ok)return{modelArtifactsInfo:l2(e),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)})()}loadModelJSON(){var e=this;return z(function*(){const i=yield e.fetch(e.path,e.requestInit);if(!i.ok)throw new Error(`Request to ${e.path} failed with status code ${i.status}. Please verify this URL points to the model JSON of the model to load.`);let s;try{s=yield i.json()}catch{let l=`Failed to parse model JSON of response from ${e.path}.`;throw e.path.endsWith(".pb")?l+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":l+=" Please make sure the server is serving valid JSON for this request.",new Error(l)}if(null==s.modelTopology&&null==s.weightsManifest)throw new Error(`The JSON from HTTP path ${e.path} contains neither model topology or manifest for weights.`);return s})()}load(){var e=this;return z(function*(){return e.loadOptions.streamWeights?e.loadStream():AG(yield e.loadModelJSON(),s=>e.loadWeights(s))})()}loadStream(){var e=this;return z(function*(){const i=yield e.loadModelJSON(),s=yield e.getWeightUrls(i.weightsManifest),r=NG(i.weightsManifest);return Object.assign(Object.assign({},i),{weightSpecs:r,getWeightStream:()=>function umt(t,n){var e;const i=null==n.fetchFunc?Ie().platform.fetch:n.fetchFunc;let r,s=0;return null===(e=n.onProgress)||void 0===e||e.call(n,0),new ReadableStream({pull:(o=z(function*(a){for(var l;s<t.length;){r||(r=(yield i(t[s],n.requestInit,{isBinary:!0})).body.getReader());const{done:c,value:u}=yield r.read();if(!c)return void a.enqueue(u);s++,r=void 0,null===(l=n.onProgress)||void 0===l||l.call(n,s/t.length)}a.close()}),function(l){return o.apply(this,arguments)})});var o}(s,e.loadOptions)})})()}getWeightUrls(e){var i=this;return z(function*(){const s=Array.isArray(i.path)?i.path[1]:i.path,[r,o]=function fmt(t){const n=t.lastIndexOf("/"),e=t.lastIndexOf("?");return[t.substring(0,n)+"/",e>n?t.substring(e):""]}(s),a=i.weightPathPrefix||r,l=[],c=[];for(const u of e)for(const d of u.paths)null!=i.weightUrlConverter?c.push(i.weightUrlConverter(d)):l.push(a+d+o);return i.weightUrlConverter&&l.push(...yield Promise.all(c)),l})()}loadWeights(e){var i=this;return z(function*(){const s=yield i.getWeightUrls(e);return[NG(e),yield Wbe(s,i.loadOptions)]})()}}return t.URL_SCHEME_REGEX=/^https?:\/\//,t})();function KG(t){return null!=t.match(Kbe.URL_SCHEME_REGEX)}const Xbe=(t,n)=>{if(typeof fetch>"u"&&(null==n||null==n.fetchFunc))return null;{let e=!0;if(e=Array.isArray(t)?t.every(i=>KG(i)):KG(t),e)return XG(t,n)}return null};function XG(t,n){return new Kbe(t,n)}function mmt(t,n){return XG(t,n)}Ur.registerSaveRouter(Xbe),Ur.registerLoadRouter(Xbe);class YG{constructor(n){this.modelArtifacts=n}load(){return this.modelArtifacts}}class Ybe{constructor(n){this.saveHandler=n}save(n){return this.saveHandler(n)}}class _mt{constructor(n){n.load&&(this.load=()=>Promise.resolve(n.load())),n.save&&(this.save=e=>Promise.resolve(n.save(e)))}}function gmt(t,n,e,i){return new _mt(Zbe(...arguments))}function Zbe(t,n,e,i){return 1===arguments.length?null!=t.modelTopology||null!=t.weightSpecs?new YG(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new YG({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new YG({modelTopology:t,weightSpecs:n,weightData:e,trainingConfig:i}))}function bmt(t){return new Ybe(t)}function vmt(t){return new Ybe(t)}function Qbe(t,n,e){if(Aw(t),null!=n&&3!==n.length)throw new Error("tensor3d() requires shape to have three numbers");const i=D_(t,e);if(3!==i.length&&1!==i.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===i.length&&null==n)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return M_(t,n,i,e)}let Mv;const nve=re({fromPixels_:function eve(t,n=3){if(n>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let e=!1,i=!1,s=!1,r=!1,o=!1,a=!1;if(t.data instanceof Uint8Array)e=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)i=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)r=!0;else if(null!=t.getContext)o=!0;else{if(!(typeof ImageBitmap<"u"&&t instanceof ImageBitmap))throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);a=!0}if(null!=gL(hG,ue.backendName))return ue.runKernel(hG,{pixels:t},{numChannels:n});const[c,u]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let d,h;if(o)d=t.getContext("2d").getImageData(0,0,c,u).data;else if(i||e)d=t.data;else if(r||s||a){if(null==Mv)if(typeof document>"u"){if(!(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u"))throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");Mv=new OffscreenCanvas(1,1).getContext("2d")}else Mv=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Mv.canvas.width=c,Mv.canvas.height=u,Mv.drawImage(t,0,0,c,u),d=Mv.getImageData(0,0,c,u).data}if(4===n)h=new Int32Array(d);else{const f=c*u;h=new Int32Array(f*n);for(let g=0;g<f;g++)for(let v=0;v<n;++v)h[g*n+v]=d[4*g+v]}return Qbe(h,[u,c,n],"int32")}}),JG=-2,Emt=-1;function ej(t,n,e){const i=t.shape.length;U(i===n.length,()=>`Error in slice${i}D: Length of begin ${n} must match the rank of the array (${i}).`),U(i===e.length,()=>`Error in slice${i}D: Length of size ${e} must match the rank of the array (${i}).`);for(let s=0;s<i;++s)U(n[s]+e[s]<=t.shape[s],()=>`Error in slice${i}D: begin[${s}] + size[${s}] (${n[s]+e[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function Tmt(t){const n=[];let e=0;for(;t>0;)1&t&&n.push(e),t/=2,e++;return n}function tj(t,n,e){const i=[];for(let s=0;s<t.length;s++)i[s]=Math.ceil((n[s]-t[s])/e[s]);return i}function ive(t,n,e,i){const s=[...t];for(let r=s.length;r<i.length;r++)s.push(1);for(let r=0;r<e;r++)0===r?s[n]=1:(s.splice(n,0,1),s.pop());return s}function sve(t,n,e){return e<=t?e:e-(n-1)}function rve(t,n){const e=[];for(let i=0;i<t;i++)e.push(n+i);return e}function Imt(t,n,e,i,s,r,o,a,l){const c=t.length;let u=new Array(c),d=new Array(c),h=new Array(c);if(n.length&&e>0){const p=n[0],f=e+1;u=ove(o,p,f,i,t),d=ave(a,p,f,s,t),h=ive(r,p,f,t)}else for(let p=0;p<c;p++)u[p]=cve(o,i,r,t,p,l),d[p]=uve(a,s,r,t,p,l),h[p]=lve(r,p,l);return{begin:u,end:d,strides:h}}function ove(t,n,e,i,s){const r=[...s],o=rve(e,n);for(let a=0;a<r.length;a++)if(o.indexOf(a)>-1)r[a]=0;else{const l=sve(n,e,a);let c=i[l];t&1<<l&&(c=0),r[a]=c}return r}function ave(t,n,e,i,s){const r=[...s],o=rve(e,n);for(let a=0;a<r.length;a++)if(o.indexOf(a)>-1)r[a]=Number.MAX_SAFE_INTEGER;else{const l=sve(n,e,a);let c=i[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),r[a]=c}for(let a=0;a<r.length;a++)r[a]<0&&(r[a]+=s[a]),r[a]=Sv(0,r[a],s[a]);return r}function lve(t,n,e){let i=t[n];return(e&1<<n||null==i)&&(i=1),i}function cve(t,n,e,i,s,r){let o=n[s];(t&1<<s||r&1<<s||null==o)&&(o=(e[s]||1)>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const l=i[s];return o<0&&(o+=l),o=Sv(0,o,l-1),o}function uve(t,n,e,i,s,r){let o=n[s];const a=e[s]||1;(t&1<<s||r&1<<s||null==o)&&(o=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=i[s];return o<0&&(o+=l),o=a>0?Sv(0,o,l):Sv(-1,o,l-1),o}function nj(t,n,e){let i=e.length;for(let s=0;s<e.length;s++)if(e[s]>1){i=s;break}for(let s=i+1;s<e.length;s++)if(n[s]>0||e[s]!==t[s])return!1;return!0}function ij(t,n){let e=t.length>0?t[t.length-1]:1;for(let i=0;i<t.length-1;i++)e+=t[i]*n[i];return e}function TL(t,n,e){let i;const s=t.shape.length;let r;return i="number"==typeof n?[n,...new Array(s-1).fill(0)]:n.length<s?n.concat(new Array(s-n.length).fill(0)):n.slice(),i.forEach(o=>{U(-1!==o,()=>"slice() does not support negative begin indexing.")}),r=null==e?new Array(s).fill(-1):"number"==typeof e?[e,...new Array(s-1).fill(-1)]:e.length<s?e.concat(new Array(s-e.length).fill(-1)):e,r=r.map((o,a)=>o>=0?o:(U(-1===o,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-i[a])),[i,r]}function sj(t,n,e,i,s,r,o,a,l){let c;if(null==i?(c=new Array(n.length),c.fill(1)):c=i,null!=o&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:n.slice(),end:e.slice(),strides:c.slice(),beginMask:s,endMask:r,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let x=0;x<d.dims;x++)u&&1<<x&a&&d.numAddAxisAfterEllipsis++,1<<x&o&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function kmt(t,n){n.beginMask=0,n.endMask=0,n.shrinkAxisMask=0;let e=0;n.beginValid=null!=t.begin,n.endValid=null!=t.end,n.begin=new Array(n.dims),n.end=new Array(n.dims),n.strides=new Array(n.dims),n.finalShapeGatherIndices=[],n.finalShapeGatherIndicesSparse=[],n.inputShapeGatherIndicesSparse=new Array(n.dims);for(let i=0;i<t.dims;i++)if(1<<i&t.ellipsisMask){const s=Math.min(n.dims-(t.dims-i)+1+t.numAddAxisAfterEllipsis,n.dims);for(;e<s;e++)n.begin[e]=0,n.end[e]=0,n.strides[e]=1,n.beginMask|=1<<e,n.endMask|=1<<e,n.finalShapeGatherIndices.push(e),n.finalShapeGatherIndicesSparse.push(-1),n.inputShapeGatherIndicesSparse[e]=i}else if(1<<i&t.newAxisMask)n.finalShapeGatherIndices.push(JG),n.finalShapeGatherIndicesSparse.push(-1);else{if(e===n.begin.length)throw Error(`Index out of range using input dim ${e}; input has only ${n.dims} dims, ${n.begin.length}.`);null!=t.begin&&(n.begin[e]=t.begin[i]),null!=t.end&&(n.end[e]=t.end[i]),n.strides[e]=t.strides[i],t.beginMask&1<<i&&(n.beginMask|=1<<e),t.endMask&1<<i&&(n.endMask|=1<<e),t.shrinkAxisMask&1<<i?(n.finalShapeGatherIndices.push(Emt),n.finalShapeGatherIndicesSparse.push(-1),n.shrinkAxisMask|=1<<e):(n.finalShapeGatherIndices.push(e),n.finalShapeGatherIndicesSparse.push(i)),n.inputShapeGatherIndicesSparse[e]=i,e++}}(d,h);let p=!0,f=!0,g=!0;const v=[],y=[];for(let x=0;x<t.length;++x){if(0===h.strides[x])throw Error(`strides[${x}] must be non-zero`);const T=!!(h.shrinkAxisMask&1<<x),k=t[x];if(-1===k){v.push(T?1:-1);continue}const R=[h.beginMask&1<<x,h.endMask&1<<x],N=[h.strides[x]>0?0:-1,h.strides[x]>0?k:k-1];if(T&&h.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&1===h.strides[x];const D=!!(h.beginMask&1<<x&&h.endMask&1<<x);if(h.beginValid&&h.endValid){if(T){const Q=h.begin[x]<0?k+h.begin[x]:h.begin[x];if(h.begin[x]=Q,h.end[x]=h.begin[x]+1,Q<0||Q>=k)throw Error(`slice index ${h.begin[x]} of dimension ${x} out of bounds.`)}else h.begin[x]=dve(h.begin[x],0,h.strides[x],k,R,N),h.end[x]=dve(h.end[x],1,h.strides[x],k,R,N);const j=1===h.strides[x]&&0===h.begin[x]&&h.end[x]===k;p=p&&j,f=f&&(0===x&&1===h.strides[x]||j)}else p=p&&1===h.strides[x]&&D,f=f&&(0===x&&1===h.strides[x]||D);let F,$=!1;if(h.beginValid&&h.endValid?(F=h.end[x]-h.begin[x],$=!0):T?(F=1,$=!0):D&&k>=0&&(F=h.strides[x]<0?-k:k,$=!0),$){let j;j=0===F||F<0!=h.strides[x]<0?0:Math.trunc(F/h.strides[x])+(F%h.strides[x]!=0?1:0),v.push(j)}else v.push(-1)}for(let x=0;x<h.finalShapeGatherIndices.length;++x){const T=h.finalShapeGatherIndices[x];T>=0?y.push(v[T]):T===JG&&y.push(1)}return{finalShapeSparse:y.filter((x,T)=>h.finalShapeGatherIndices[T]!==JG),finalShape:y,isIdentity:p,sliceDim0:f,isSimpleSlice:g,begin:h.begin,end:h.end,strides:h.strides}}function dve(t,n,e,i,s,r){if(s[n])return e>0?r[n]:r[n+1&1];{const o=t<0?i+t:t;return o<r[0]?r[0]:o>r[1]?r[1]:o}}const hve=re({acos_:function Amt(t){const e={x:G(t,"x","acos")};return ue.runKernel(lI,e)}}),pve=re({acosh_:function Mmt(t){const e={x:G(t,"x","acosh")};return ue.runKernel(cI,e)}}),Omt=re({addN_:function Nmt(t){U(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),U(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const n=t.map((s,r)=>G(s,`tensors${r}`,"addN")),e=n[0];return n.forEach(s=>{if(s.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),n.forEach(s=>{if(!es(s.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}),ue.runKernel(hF,n)}}),rj=re({all_:function Rmt(t,n=null,e=!1){const s={x:G(t,"x","all","bool")};return ue.runKernel("All",s,{axis:n,keepDims:e})}}),IL=re({any_:function Fmt(t,n=null,e=!1){const s={x:G(t,"x","any","bool")};return ue.runKernel("Any",s,{axis:n,keepDims:e})}}),Ww=re({argMax_:function Lmt(t,n=0){const i={x:G(t,"x","argMax")};return ue.runKernel(pF,i,{axis:n})}}),fve=re({argMin_:function Pmt(t,n=0){const i={x:G(t,"x","argMin")};return ue.runKernel(fF,i,{axis:n})}}),mve=re({asin_:function $mt(t){const e={x:G(t,"x","asin")};return ue.runKernel(uI,e)}}),_ve=re({asinh_:function Bmt(t){const e={x:G(t,"x","asinh")};return ue.runKernel(dI,e)}}),gve=re({atan_:function Vmt(t){const e={x:G(t,"x","atan")};return ue.runKernel(hI,e)}}),bve=re({atan2_:function zmt(t,n){let e=G(t,"a","atan2"),i=G(n,"b","atan2");return[e,i]=eo(e,i),ue.runKernel(fI,{a:e,b:i})}}),vve=re({atanh_:function Umt(t){const e={x:G(t,"x","atanh")};return ue.runKernel(pI,e)}});function c2(t,n,e,i,s="NHWC",r){return Ca(t,[...n,t[3]],e,r,i,null,null,zf(s))}function ed(t,n,e,i,s,r,o="channelsLast"){const[a,l]=u2(n);let c;if("channelsLast"===o)c=[a,l,t[3],t[3]];else{if("channelsFirst"!==o)throw new Error(`Unknown dataFormat ${o}`);c=[a,l,t[1],t[1]]}return Ca(t,c,e,i,s,r,!1,o)}function Vf(t,n,e,i,s,r,o="NDHWC"){const[a,l,c]=aj(n);let u,d;if("NDHWC"===o)d="channelsLast",u=[a,l,c,t[4],t[4]];else{if("NCDHW"!==o)throw new Error(`Unknown dataFormat ${o}`);d="channelsFirst",u=[a,l,c,t[1],t[1]]}return F_(t,u,e,i,s,!1,d,r)}function Ca(t,n,e,i,s,r,o=!1,a="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if("channelsLast"===a)[l,c,u,d]=t;else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);[l,d,c,u]=t}const[h,p,,f]=n,[g,v]=u2(e),[y,w]=u2(i),x=qw(h,y),T=qw(p,w),{padInfo:k,outHeight:R,outWidth:N}=function Hmt(t,n,e,i,s,r,o,a,l){let c,u,d;if("number"==typeof t){c={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};const p=function Gmt(t,n,e,i,s){null==i&&(i=oj(t,n,e));const o=t[1];return[d2((t[0]-n+2*i)/e+1,s),d2((o-n+2*i)/e+1,s)]}([n,e],r,i,t,a);u=p[0],d=p[1]}else if("same"===t){u=Math.ceil(n/i),d=Math.ceil(e/s);const h=Math.max(0,(u-1)*i+r-n),p=Math.max(0,(d-1)*s+o-e),f=Math.floor(h/2),g=h-f,v=Math.floor(p/2);c={top:f,bottom:g,left:v,right:p-v,type:"SAME"}}else if("valid"===t)c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((n-r+1)/i),d=Math.ceil((e-o+1)/s);else{if("object"!=typeof t)throw Error(`Unknown padding parameter: ${t}`);{const h="channelsLast"===l?t[1][0]:t[2][0],p="channelsLast"===l?t[1][1]:t[2][1],f="channelsLast"===l?t[2][0]:t[3][0],g="channelsLast"===l?t[2][1]:t[3][1];c={top:h,bottom:p,left:f,right:g,type:0===h&&0===p&&0===f&&0===g?"VALID":"EXPLICIT"},u=d2((n-r+h+p)/i+1,a),d=d2((e-o+f+g)/s+1,a)}}return{padInfo:c,outHeight:u,outWidth:d}}(s,c,u,g,v,x,T,r,a),D=o?f*d:f;let F;return"channelsFirst"===a?F=[l,D,R,N]:"channelsLast"===a&&(F=[l,R,N,D]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:d,outHeight:R,outWidth:N,outChannels:D,padInfo:k,strideHeight:g,strideWidth:v,filterHeight:h,filterWidth:p,effectiveFilterHeight:x,effectiveFilterWidth:T,dilationHeight:y,dilationWidth:w,inShape:t,outShape:F,filterShape:n}}function F_(t,n,e,i,s,r=!1,o="channelsLast",a){let[l,c,u,d,h]=[-1,-1,-1,-1,-1];if("channelsLast"===o)[l,c,u,d,h]=t;else{if("channelsFirst"!==o)throw new Error(`Unknown dataFormat ${o}`);[l,h,c,u,d]=t}const[p,f,g,,v]=n,[y,w,x]=aj(e),[T,k,R]=aj(i),N=qw(p,T),D=qw(f,k),F=qw(g,R),{padInfo:$,outDepth:j,outHeight:Q,outWidth:Y}=function Wmt(t,n,e,i,s,r,o,a,l,c,u){let d,h,p,f;if("valid"===t&&(t=0),"number"==typeof t){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:0===t?"VALID":"NUMBER"};const v=function jmt(t,n,e,i,s,r){null==s&&(s=oj(t,n[0],i[0]));const o=[0,0,0,e];for(let a=0;a<3;a++)t[a]+2*s>=n[a]&&(o[a]=d2((t[a]-n[a]+2*s)/i[a]+1,r));return o}([n,e,i,1],[a,l,c],1,[s,r,o],t,u);h=v[0],p=v[1],f=v[2]}else{if("same"!==t)throw Error(`Unknown padding parameter: ${t}`);{h=Math.ceil(n/s),p=Math.ceil(e/r),f=Math.ceil(i/o);const g=(h-1)*s+a-n,v=(p-1)*r+l-e,y=(f-1)*o+c-i,w=Math.floor(g/2),x=g-w,T=Math.floor(v/2),k=v-T,R=Math.floor(y/2);d={top:T,bottom:k,left:R,right:y-R,front:w,back:x,type:"SAME"}}}return{padInfo:d,outDepth:h,outHeight:p,outWidth:f}}(s,c,u,d,y,w,x,N,D,F,a),ce=r?v*h:v;let Ce;return"channelsFirst"===o?Ce=[l,ce,j,Q,Y]:"channelsLast"===o&&(Ce=[l,j,Q,Y,ce]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:u,inWidth:d,inChannels:h,outDepth:j,outHeight:Q,outWidth:Y,outChannels:ce,padInfo:$,strideDepth:y,strideHeight:w,strideWidth:x,filterDepth:p,filterHeight:f,filterWidth:g,effectiveFilterDepth:N,effectiveFilterHeight:D,effectiveFilterWidth:F,dilationDepth:T,dilationHeight:k,dilationWidth:R,inShape:t,outShape:Ce,filterShape:n}}function oj(t,n,e,i=1){const s=qw(n,i);return Math.floor((t[0]*(e-1)-e+s)/2)}function u2(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function aj(t){return"number"==typeof t?[t,t,t]:t}function qw(t,n){return n<=1?t:t+(t-1)*(n-1)}function d2(t,n){if(!n)return Math.trunc(t);switch(n){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${n}`)}}function L_(t){const[n,e,i]=u2(t);return 1===n&&1===e&&1===i}function La(t,n){return L_(t)||L_(n)}function Nv(t){return u2(t).every(n=>n>0)}function zf(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function wl(t,n,e){if(null!=e){if("string"==typeof n)throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${n}.`);if("number"==typeof n)U(Mw(n),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${n}.`);else{if("object"!=typeof n)throw Error(`Error in ${t}: Unknown padding parameter: ${n}`);n.forEach(i=>{i.forEach(s=>{U(Mw(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${s}.`)})})}}}const ge=re({reshape_:function qmt(t,n){const i={x:G(t,"x","reshape","string_or_numeric")};return ue.runKernel(eL,i,{shape:n})}}),kL=re({avgPool_:function Kmt(t,n,e,i,s){const r=G(t,"x","avgPool","float32");U(La(e,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${e} and dilations '1'`);let a=r,l=!1;3===r.rank&&(l=!0,a=ge(r,[1,r.shape[0],r.shape[1],r.shape[2]])),U(4===a.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),wl("avgPool",i,s);let d=ue.runKernel(mF,{x:a},{filterSize:n,strides:e,pad:i,dimRoundingMode:s});return d=Rt(d,r.dtype),l?ge(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),yve=re({avgPool3d_:function Xmt(t,n,e,i,s,r="NDHWC"){const o=G(t,"x","avgPool3d","float32");let a=o,l=!1;4===o.rank&&(l=!0,a=ge(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),U(5===a.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),U("NDHWC"===r,()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),U("number"==typeof e&&e>0||Array.isArray(e)&&e[0]>0&&e[1]>0&&e[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${e}'`),wl("avgPool3d",i,s);let d=ue.runKernel(_F,{x:a},{filterSize:n,strides:e,pad:i,dimRoundingMode:s,dataFormat:r});return d=Rt(d,a.dtype),l?ge(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),mo=re({concat_:function Ymt(t,n=0){U(t.length>=1,()=>"Pass at least one tensor to concat");const e=CL(t,"tensors","concat","string_or_numeric");return"complex64"===e[0].dtype&&e.forEach(r=>{if("complex64"!==r.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${r.dtype}. `)}),1===e.length?Lf(e[0]):ue.runKernel(wF,e,{axis:n})}}),Hi=re({matMul_:function Zmt(t,n,e=!1,i=!1){let s=G(t,"a","matMul"),r=G(n,"b","matMul");return[s,r]=eo(s,r),ue.runKernel(gF,{a:s,b:r},{transposeA:e,transposeB:i})}}),gp=re({sigmoid_:function Qmt(t){const e={x:G(t,"x","sigmoid","float32")};return ue.runKernel(KI,e)}}),is=re({slice_:function Jmt(t,n,e){const i=G(t,"x","slice","string_or_numeric");if(0===i.rank)throw new Error("Slicing scalar is not possible");return ue.runKernel(rL,{x:i},{begin:n,size:e})}}),Ov=re({tanh_:function e_t(t){const e={x:G(t,"x","tanh","float32")};return ue.runKernel(e2,e)}}),n_t=re({basicLSTMCell_:function t_t(t,n,e,i,s,r){const o=G(t,"forgetBias","basicLSTMCell"),a=G(n,"lstmKernel","basicLSTMCell"),l=G(e,"lstmBias","basicLSTMCell"),c=G(i,"data","basicLSTMCell"),u=G(s,"c","basicLSTMCell"),d=G(r,"h","basicLSTMCell"),h=mo([c,d],1),p=Hi(h,a),f=lt(p,l),v=f.shape[1]/4,y=[f.shape[0],v],w=is(f,[0,0],y),x=is(f,[0,v],y),T=is(f,[0,2*v],y),k=is(f,[0,3*v],y),R=lt(pe(gp(w),Ov(x)),pe(u,gp(lt(o,T))));return[R,pe(Ov(R),gp(k))]}}),DL=re({batchToSpaceND_:function i_t(t,n,e){const i=G(t,"x","batchToSpaceND"),s=n.reduce((a,l)=>a*l);return U(i.rank>=1+n.length,()=>`input rank is ${i.rank} but should be > than blockShape.length ${n.length}`),U(e.length===n.length,()=>`crops.length is ${e.length} but should be equal to blockShape.length  ${n.length}`),U(i.shape[0]%s==0,()=>`input tensor batch is ${i.shape[0]} but is not divisible by the product of the elements of blockShape ${n.join(" * ")} === ${s}`),ue.runKernel(bF,{x:i},{blockShape:n,crops:e})}});function s_t(t){let n;return n=0===t.rank||1===t.rank?ge(t,[1,1,1,t.size]):2===t.rank?ge(t,[1,1,t.shape[0],t.shape[1]]):3===t.rank?ge(t,[1,t.shape[0],t.shape[1],t.shape[2]]):t,n}const h2=re({batchNorm_:function r_t(t,n,e,i,s,r){null==r&&(r=.001);const o=G(t,"x","batchNorm"),a=G(n,"mean","batchNorm"),l=G(e,"variance","batchNorm");let c,u;null!=s&&(c=G(s,"scale","batchNorm")),null!=i&&(u=G(i,"offset","batchNorm")),U(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(null==u||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(null==c||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h={x:s_t(o),scale:c,offset:u,mean:a,variance:l},f=ue.runKernel(AF,h,{varianceEpsilon:r});return ge(f,o.shape)}}),wve=re({batchNorm2d_:function o_t(t,n,e,i,s,r){const o=G(t,"x","batchNorm"),a=G(n,"mean","batchNorm"),l=G(e,"variance","batchNorm");let c,u;return null!=s&&(c=G(s,"scale","batchNorm")),null!=i&&(u=G(i,"offset","batchNorm")),U(2===o.rank,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),U(2===a.rank||1===a.rank,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),U(2===l.rank||1===l.rank,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),null!=c&&U(2===c.rank||1===c.rank,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),null!=u&&U(2===u.rank||1===u.rank,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),h2(o,a,l,u,c,r)}}),Cve=re({batchNorm3d_:function a_t(t,n,e,i,s,r){const o=G(t,"x","batchNorm"),a=G(n,"mean","batchNorm"),l=G(e,"variance","batchNorm");let c,u;return null!=s&&(c=G(s,"scale","batchNorm")),null!=i&&(u=G(i,"offset","batchNorm")),U(3===o.rank,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),U(3===a.rank||1===a.rank,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),U(3===l.rank||1===l.rank,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),null!=c&&U(3===c.rank||1===c.rank,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),null!=u&&U(3===u.rank||1===u.rank,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),h2(o,a,l,u,c,r)}}),Sve=re({batchNorm4d_:function l_t(t,n,e,i,s,r){const o=G(t,"x","batchNorm"),a=G(n,"mean","batchNorm"),l=G(e,"variance","batchNorm");let c,u;return null!=s&&(c=G(s,"scale","batchNorm")),null!=i&&(u=G(i,"offset","batchNorm")),U(4===o.rank,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),U(4===a.rank||1===a.rank,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),U(4===l.rank||1===l.rank,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),null!=c&&U(4===c.rank||1===c.rank,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),null!=u&&U(4===u.rank||1===u.rank,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),h2(o,a,l,u,c,r)}}),xve=re({bincount_:function c_t(t,n,e){const i=G(t,"x","bincount"),s=G(n,"weights","bincount");return U("int32"===i.dtype,()=>`Error in bincount: input dtype must be int32, but got ${i.dtype}`),U(e>=0,()=>`size must be non-negative, but got ${e}.`),U(s.size===i.size||0===s.size,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${i.shape}, weights shape: ${s.shape}.`),ue.runKernel(uU,{x:i,weights:s},{size:e})}}),d_t=re({bitwiseAnd_:function u_t(t,n){const e=G(t,"x","bitwiseAnd"),i=G(n,"y","bitwiseAnd");if(!es(e.shape,i.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${e.shape}, y: ${i.shape}`);if("int32"!==e.dtype||"int32"!==i.dtype)throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${e.dtype} and type of y: ${i.dtype}`);return ue.runKernel(vF,{a:e,b:i})}}),p_t=re({broadcastArgs_:function h_t(t,n){const e=G(t,"s0","broadcastArgs","int32"),i=G(n,"s1","broadcastArgs","int32");if(1!==e.rank)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${e.rank}`);if(1!==i.rank)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${i.rank}`);return ue.runKernel(dU,{s0:e,s1:i})}}),Kw=re({broadcastTo_:function f_t(t,n){let e=G(t,"broadcastTo","x");const i=e.shape;if(cu(n),n.length<e.rank)throw new Error(`broadcastTo(): shape.length=${n.length} < input.rank=${e.rank}.`);if(n.length>e.rank){const c=e.shape.slice();for(;c.length<n.length;)c.unshift(1);e=ge(e,c)}const s=e.shape,r=Array.from(n);for(let c=n.length-1;c>=0;c--)if(s[c]===n[c])r[c]=1;else if(1!==e.shape[c])throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${n}].`);return 0===r.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length?Lf(e):ue.runKernel(t2,{x:e},{reps:r})}}),Eve=re({ceil_:function m_t(t){const e={x:G(t,"x","ceil","float32")};return ue.runKernel(_I,e)}}),xc=re({clipByValue_:function __t(t,n,e){const i=G(t,"x","clipByValue");return U(n<=e,()=>`Error in clip: min (${n}) must be less than or equal to max (${e}).`),n===e?jw(i.shape,n,i.dtype):ue.runKernel(gI,{x:i},{clipValueMin:n,clipValueMax:e})}}),Tve=re({concat1d_:function g_t(t){return mo(t,0)}}),Ive=re({concat2d_:function b_t(t,n){return mo(t,n)}}),kve=re({concat3d_:function v_t(t,n){return mo(t,n)}}),Dve=re({concat4d_:function y_t(t,n){return mo(t,n)}}),P_=re({conv2d_:function w_t(t,n,e,i,s="NHWC",r=[1,1],o){const a=G(t,"x","conv2d","float32"),l=G(n,"filter","conv2d","float32");let c=a,u=!1;3===a.rank&&(u=!0,c=ge(a,[1,a.shape[0],a.shape[1],a.shape[2]])),U(4===c.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),U(4===l.rank,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),wl("conv2d",i,o);const d="NHWC"===s?c.shape[3]:c.shape[1];U(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),U(La(e,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${r}'`),U(Nv(r),()=>"Error in conv2D: Dilated rates should be larger than 0."),U(Nv(e),()=>"Error in conv2D: Strides should be larger than 0.");const f=ue.runKernel(CF,{x:c,filter:l},{strides:e,pad:i,dataFormat:s,dilations:r,dimRoundingMode:o});return u?ge(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),lj=re({conv1d_:function C_t(t,n,e,i,s="NWC",r=1,o){const a=G(t,"x","conv1d"),l=G(n,"filter","conv1d");let c=a,u=!1;2===a.rank&&(u=!0,c=ge(a,[1,a.shape[0],a.shape[1]])),U(3===c.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),U(3===l.rank,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),wl("conv1d",i,o),U(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),U(La(e,r),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${e} and dilation '${r}'`),U(Nv(r),()=>"Error in conv1D: Dilated rates should be larger than 0."),U(Nv(e),()=>"Error in conv1D: Stride should be larger than 0."),U("NWC"===s,()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const d=ge(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=ge(c,[c.shape[0],1,c.shape[1],c.shape[2]]),v=P_(h,d,[1,e],i,"NHWC",[1,r],o);return ge(v,u?[v.shape[2],v.shape[3]]:[v.shape[0],v.shape[2],v.shape[3]])}}),cj=re({conv2DBackpropInput_:function S_t(t,n,e,i,s,r="NHWC",o){U(t.length===n.rank,()=>`Length of inShape (${t.length}) and rank of dy (${n.rank}) must match`);let a=t,l=n,c=!1;3===n.rank&&(c=!0,l=ge(n,[1,n.shape[0],n.shape[1],n.shape[2]]),a=[1,t[0],t[1],t[2]]),U(4===a.length,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),U(4===l.rank,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),U(4===e.rank,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${e.rank}`);const u="NHWC"===r?a[3]:a[1],d="NHWC"===r?l.shape[3]:l.shape[1];U(u===e.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${e.shape[2]}.`),U(d===e.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${e.shape[3]}.`),wl("conv2dDerInput",s,o);const f=ue.runKernel(SF,{dy:l,filter:e},{strides:i,pad:s,dataFormat:r,dimRoundingMode:o,inputShape:a});return c?ge(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),uj=re({conv2dTranspose_:function x_t(t,n,e,i,s,r){const o=G(t,"x","conv2dTranspose"),a=G(n,"filter","conv2dTranspose");return cj(e,o,a,i,s,"NHWC",r)}}),Ave=re({conv3d_:function E_t(t,n,e,i,s="NDHWC",r=[1,1,1]){const o=G(t,"x","conv3d"),a=G(n,"filter","conv3d");let l=o,c=!1;4===o.rank&&(c=!0,l=ge(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),U(5===l.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),U(5===a.rank,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),U(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),U(La(e,r),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${e} and dilations '${r}'`),U("NDHWC"===s,()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),U(Nv(r),()=>"Error in conv3D: Dilated rates should be larger than 0."),U(Nv(e),()=>"Error in conv3D: Strides should be larger than 0.");const h=ue.runKernel(xF,{x:l,filter:a},{strides:e,pad:i,dataFormat:s,dilations:r});return c?ge(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),Mve=re({conv3DBackpropInput_:function T_t(t,n,e,i,s){U(t.length===n.rank,()=>`Length of inShape (${t.length}) and rank of dy (${n.rank}) must match`);let r=t,o=n,a=!1;4===n.rank&&(a=!0,o=ge(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]),r=[1,t[0],t[1],t[2],t[3]]);const l=r[4],c=o.shape[4];U(5===r.length,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${r.length}.`),U(5===o.rank,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),U(5===e.rank,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${e.rank}`),U(l===e.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${e.shape[3]}.`),U(c===e.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${e.shape[4]}.`);const h=ue.runKernel(mU,{dy:o,filter:e},{pad:s,strides:i,inputShape:r});return a?ge(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),Nve=re({conv3dTranspose_:function I_t(t,n,e,i,s){const r=G(t,"x","conv3dTranspose"),o=G(n,"filter","conv3dTranspose");return Mve(e,r,o,i,s)}}),AL=re({cos_:function k_t(t){const e={x:G(t,"x","cos","float32")};return ue.runKernel(bI,e)}}),dj=re({cosh_:function D_t(t){const e={x:G(t,"x","cosh","float32")};return ue.runKernel(vI,e)}}),ML=re({cumprod_:function A_t(t,n=0,e=!1,i=!1){const r={x:G(t,"x","cumprod")};return ue.runKernel(_U,r,{axis:n,exclusive:e,reverse:i})}}),hj=re({cumsum_:function M_t(t,n=0,e=!1,i=!1){const r={x:G(t,"x","cumsum")};return ue.runKernel(EF,r,{axis:n,exclusive:e,reverse:i})}}),pj=re({denseBincount_:function N_t(t,n,e,i=!1){const s=G(t,"x","denseBincount"),r=G(n,"weights","denseBincount");return U("int32"===s.dtype,()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),U(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),U(e>=0,()=>`size must be non-negative, but got ${e}.`),U(r.size===s.size||0===r.size,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${r.shape}.`),ue.runKernel(bU,{x:s,weights:r},{size:e,binaryOutput:i})}}),Ove=re({depthToSpace_:function O_t(t,n,e="NHWC"){const i=G(t,"x","depthToSpace","float32"),s="NHWC"===e?i.shape[1]:i.shape[2],r="NHWC"===e?i.shape[2]:i.shape[3],o="NHWC"===e?i.shape[3]:i.shape[1];return U(n>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${n}`),U(s*n>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${s} and ${n}  for depthToSpace with input shape\n    ${i.shape}`),U(r*n>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${r} and ${n} for depthToSpace with input shape\n        ${i.shape}`),U(o%(n*n)==0,()=>`Dimension size must be evenly divisible by ${n*n} but is ${o} for depthToSpace with input shape ${i.shape}`),ue.runKernel(vU,{x:i},{blockSize:n,dataFormat:e})}}),p2=re({depthwiseConv2d_:function R_t(t,n,e,i,s="NHWC",r=[1,1],o){const a=G(t,"x","depthwiseConv2d","float32"),l=G(n,"filter","depthwiseConv2d","float32");let c=a,u=!1;3===a.rank&&(u=!0,c=ge(a,[1,a.shape[0],a.shape[1],a.shape[2]])),U(4===c.rank,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),U(4===l.rank,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d="NHWC"===s?c.shape[3]:c.shape[1];U(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),wl("depthwiseConv2d",i,o);const f=ue.runKernel(TF,{x:c,filter:l},{strides:e,pad:i,dataFormat:s,dilations:r,dimRoundingMode:o});return u?ge(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),L_t=re({diag_:function F_t(t){const e={x:G(t,"x","diag")};return ue.runKernel(CU,e)}}),Rve=re({dilation2d_:function P_t(t,n,e,i,s=[1,1],r="NHWC"){const o=G(t,"x","dilation2d"),a=G(n,"filter","dilation2d");U(3===o.rank||4===o.rank,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),U(3===a.rank,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),U("NHWC"===r,()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${r}`);let l=o,c=!1;3===o.rank&&(l=ge(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0),U(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const h=ue.runKernel(IF,{x:l,filter:a},{strides:e,pad:i,dilations:s});return c?ge(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),ah=re({equal_:function $_t(t,n){let e=G(t,"a","equal","string_or_numeric"),i=G(n,"b","equal","string_or_numeric");return[e,i]=eo(e,i),mi(e.shape,i.shape),ue.runKernel(kF,{a:e,b:i})}}),tl=re({where_:function B_t(t,n,e){const i=G(n,"a","where"),s=G(e,"b","where"),r=G(t,"condition","where","bool"),o=mi(mi(r.shape,i.shape),s.shape),a=Kw(r,o),l=Kw(i,o),c=Kw(s,o);return ue.runKernel(sL,{condition:a,t:l,e:c})}}),Fve=re({divNoNan_:function V_t(t,n){let e=G(t,"a","div"),i=G(n,"b","div");[e,i]=eo(e,i);const s=pn(e,i),r=ns(s),o=ah(i,r);return tl(o,r,s)}}),Lve=re({dot_:function z_t(t,n){const e=G(t,"t1","dot"),i=G(n,"t2","dot");U(!(1!==e.rank&&2!==e.rank||1!==i.rank&&2!==i.rank),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${e.rank} and ${i.rank}.`);const s=1===e.rank?e.size:e.shape[1],r=1===i.rank?i.size:i.shape[0];if(U(s===r,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${r}.`),1===e.rank&&1===i.rank){const o=ge(e,[1,-1]),a=ge(i,[-1,1]),l=Hi(o,a);return ge(l,[])}if(1===e.rank&&2===i.rank){const o=ge(e,[1,-1]),a=ge(i,[i.shape[0],i.shape[1]]),l=Hi(o,a);return ge(l,[l.size])}if(2===e.rank&&1===i.rank){const o=ge(i,[-1,1]),a=Hi(e,o);return ge(a,[a.size])}{const o=ge(i,[i.shape[0],i.shape[1]]);return Hi(e,o)}}}),Xw=re({einsum_:function U_t(t,...n){const e=n.map((s,r)=>G(s,`tensors${r}`,"einsum"));return ue.runKernel(TU,e,{equation:t})}}),f2=re({elu_:function G_t(t){const e={x:G(t,"x","elu","float32")};return ue.runKernel(wI,e)}}),H_t=re({ensureShape_:function j_t(t,n){const e=G(t,"x","ensureShape","string_or_numeric");if(!function bpt(t,n){if(t===n)return!0;if(null==t||null==n||t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(null!==t[e]&&null!==n[e]&&t[e]!==n[e])return!1;return!0}(e.shape,n))throw new Error(`EnsureShape: Shape of tensor ${e.shape} is not compatible with expected shape ${n}`);return t}}),fj=re({erf_:function W_t(t){let n=G(t,"x","erf");return U("int32"===n.dtype||"float32"===n.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===n.dtype&&(n=Rt(n,"float32")),ue.runKernel(CI,{x:n})}});function mj(t,n){for(let e=0;e<t.length;++e)if(t[t.length-e-1]!==n-1-e)return!1;return!0}function Pve(t,n,e){const i=t.length+n.length,s=[];let r=0,o=0;for(let a=0;a<i;a++)-1===e.indexOf(a)?s.push(t[r++]):s.push(n[o++]);return s}function Sa(t,n){const e=[],i=t.length;for(let r=0;r<i;r++)-1===n.indexOf(r)&&e.push(t[r]);return[e,n.map(r=>t[r])]}function _o(t,n){return Pve(t,n.map(i=>1),n)}function Pa(t,n,e){U(mj(n,e),()=>`${t} supports only inner-most axes for now. Got axes ${n} and rank-${e} input.`)}function Gr(t,n){if(mj(t,n))return null;const e=[];for(let i=0;i<n;++i)-1===t.indexOf(i)&&e.push(i);return t.forEach(i=>e.push(i)),e}function $_(t){return t.map((n,e)=>[e,n]).sort((n,e)=>n[1]-e[1]).map(n=>n[0])}function go(t,n){const e=[];for(let i=n-t;i<n;++i)e.push(i);return e}const td=re({max_:function q_t(t,n=null,e=!1){const s={x:G(t,"x","max")};return ue.runKernel(VF,s,{reductionIndices:n,keepDims:e})}}),m2=re({min_:function K_t(t,n=null,e=!1){const s={x:G(t,"x","min")};return ue.runKernel(jF,s,{axis:n,keepDims:e})}}),un=re({sum_:function X_t(t,n=null,e=!1){let i=G(t,"x","sum");return"bool"===i.dtype&&(i=Rt(i,"int32")),ue.runKernel(oL,{x:i},{axis:n,keepDims:e})}});function $ve(t,n,e=null){if(0===t.rank)return Xo(t);if(1!==t.rank&&null===e)return $ve(ge(t,[-1]),n,e);if(1===t.rank||"number"==typeof e||Array.isArray(e)&&1===e.length){if(1===n)return un(Xo(t),e);if(n===1/0)return td(Xo(t),e);if(n===-1/0)return m2(Xo(t),e);if("euclidean"===n||2===n)return Fa(un($f(Xo(t),En(2,"int32")),e));throw new Error(`Error in norm: invalid ord value: ${n}`)}if(Array.isArray(e)&&2===e.length){if(1===n)return td(un(Xo(t),e[0]),e[1]-1);if(n===1/0)return td(un(Xo(t),e[1]),e[0]);if(n===-1/0)return m2(un(Xo(t),e[1]),e[0]);if("fro"===n||"euclidean"===n)return Fa(un(lr(t),e));throw new Error(`Error in norm: invalid ord value: ${n}`)}throw new Error(`Error in norm: invalid axis: ${e}`)}const _2=re({norm_:function Y_t(t,n="euclidean",e=null,i=!1){const s=$ve(t=G(t,"x","norm"),n,e);let r=s.shape;if(i){const o=zi(e,t.shape);r=_o(s.shape,o)}return ge(s,r)}}),Bve=re({euclideanNorm_:function Z_t(t,n=null,e=!1){return _2(t,"euclidean",n,e)}}),Ec=re({exp_:function Q_t(t){const e={x:G(t,"x","exp")};return ue.runKernel(SI,e)}}),nl=re({expandDims_:function J_t(t,n=0){const e=G(t,"x","expandDims","string_or_numeric");return U(n<=e.rank,()=>"Axis must be <= rank of the tensor"),ue.runKernel(DF,{input:e},{dim:n})}}),Vve=re({expm1_:function egt(t){const e={x:G(t,"x","expm1")};return ue.runKernel(xI,e)}}),nd=re({tile_:function tgt(t,n){const e=G(t,"x","tile","string_or_numeric");return U(e.rank===n.length,()=>`Error in transpose: rank of input ${e.rank} must match length of reps ${n}.`),ue.runKernel(t2,{x:e},{reps:n})}}),_j=re({eye_:function ngt(t,n,e,i="float32"){null==n&&(n=t);const s=Di([t,n],i),r=t<=n?t:n;for(let a=0;a<r;++a)s.set(1,a,a);const o=ge(s.toTensor(),[t,n]);if(null==e)return o;if(1===e.length)return nd(nl(o,0),[e[0],1,1]);if(2===e.length)return nd(nl(nl(o,0),0),[e[0],e[1],1,1]);if(3===e.length)return nd(nl(nl(nl(o,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${e.length}D.`)}}),g2=re({floor_:function igt(t){const e={x:G(t,"x","floor","float32")};return ue.runKernel(EI,e)}}),b2=re({gather_:function sgt(t,n,e=0,i=0){const s=G(t,"x","gather"),r=G(n,"indices","gather","int32");return ue.runKernel(MF,{x:s,indices:r},{axis:e,batchDims:i})}}),Tc=re({greater_:function rgt(t,n){let e=G(t,"a","greater","string_or_numeric"),i=G(n,"b","greater","string_or_numeric");return[e,i]=eo(e,i),mi(e.shape,i.shape),ue.runKernel(NF,{a:e,b:i})}}),B_=re({greaterEqual_:function ogt(t,n){let e=G(t,"a","greaterEqual","string_or_numeric"),i=G(n,"b","greaterEqual","string_or_numeric");return[e,i]=eo(e,i),mi(e.shape,i.shape),ue.runKernel(II,{a:e,b:i})}}),NL=re({imag_:function agt(t){const e={input:G(t,"input","imag")};return ue.runKernel(OU,e)}}),zve=re({isFinite_:function lgt(t){const e={x:G(t,"x","isFinite")};return ue.runKernel(DI,e)}}),Uve=re({isInf_:function cgt(t){const e={x:G(t,"x","isInf")};return ue.runKernel(AI,e)}}),Gve=re({isNaN_:function ugt(t){const e={x:G(t,"x","isNaN")};return ue.runKernel(MI,e)}}),OL=re({leakyRelu_:function dgt(t,n=.2){const i={x:G(t,"x","leakyRelu")};return ue.runKernel(OF,i,{alpha:n})}}),v2=re({less_:function hgt(t,n){let e=G(t,"a","less","string_or_numeric"),i=G(n,"b","less","string_or_numeric");return[e,i]=eo(e,i),mi(e.shape,i.shape),ue.runKernel(RF,{a:e,b:i})}}),Rv=re({lessEqual_:function pgt(t,n){let e=G(t,"a","lessEqual","string_or_numeric"),i=G(n,"b","lessEqual","string_or_numeric");return[e,i]=eo(e,i),mi(e.shape,i.shape),ue.runKernel(FF,{a:e,b:i})}});function fgt(t,n,e){if(e<=0)throw new Error("The number of values should be positive.");return ue.runKernel(RU,{},{start:t,stop:n,num:e})}const jve=re({localResponseNormalization_:function mgt(t,n=5,e=1,i=1,s=.5){const r=G(t,"x","localResponseNormalization");U(4===r.rank||3===r.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${r.rank}.`),U(Mw(n),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${n}.`);let o=r,a=!1;3===r.rank&&(a=!0,o=ge(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const u=ue.runKernel(BF,{x:o},{depthRadius:n,bias:e,alpha:i,beta:s});return a?ge(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),pu=re({log_:function _gt(t){const e={x:G(t,"x","log","float32")};return ue.runKernel(NI,e)}}),RL=re({log1p_:function ggt(t){const e={x:G(t,"x","log1p")};return ue.runKernel(OI,e)}}),kr=re({neg_:function bgt(t){const e={x:G(t,"x","neg")};return ue.runKernel(WF,e)}}),Yw=re({softplus_:function vgt(t){const e={x:G(t,"x","softplus")};return ue.runKernel(XI,e)}}),Hve=re({logSigmoid_:function ygt(t){const n=G(t,"x","logSigmoid");return Pf(i=>({value:kr(Yw(kr(i))),gradFunc:o=>pe(o,gp(kr(i)))}))(n)}}),gj=re({logSoftmax_:function wgt(t,n=-1){const e=G(t,"logits","logSoftmax");if(-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and axis was ${n}`);return Pf((s,r)=>{const a=td(s,n,!0),l=Xt(s,a),c=Xt(Rt(l,"float32"),pu(un(Ec(l),n,!0)));return r([c]),{value:c,gradFunc:(d,h)=>{const[p]=h,g=Ec(p);return Xt(d,pe(un(d,n,!0),g))}}})(e)}}),FL=re({logSumExp_:function Cgt(t,n=null,e=!1){const i=G(t,"x","logSumExp"),s=zi(n,i.shape),r=td(i,s,!0),o=Xt(i,r),a=Ec(o),l=un(a,s),c=pu(l),u=lt(ge(r,c.shape),c);if(e){const d=_o(u.shape,s);return ge(u,d)}return u}}),bp=re({logicalAnd_:function Sgt(t,n){const e=G(t,"a","logicalAnd","bool"),i=G(n,"b","logicalAnd","bool");return mi(e.shape,i.shape),ue.runKernel(LF,{a:e,b:i})}}),LL=re({logicalNot_:function xgt(t){const e={x:G(t,"x","logicalNot","bool")};return ue.runKernel(PF,e)}}),bj=re({logicalOr_:function Egt(t,n){const e=G(t,"a","logicalOr","bool"),i=G(n,"b","logicalOr","bool");return mi(e.shape,i.shape),ue.runKernel($F,{a:e,b:i})}}),Wve=re({logicalXor_:function Tgt(t,n){const e=G(t,"a","logicalXor","bool"),i=G(n,"b","logicalXor","bool");return mi(e.shape,i.shape),bp(bj(t,n),LL(bp(t,n)))}}),PL=2147483648,vj=re({searchSorted_:function Igt(t,n,e="left"){const i=G(t,"sortedSequence","searchSorted"),s=G(n,"values","searchSorted"),o=s.shape[s.shape.length-1],a=ge(i,[-1,i.shape[i.shape.length-1]]),l=ge(s,[-1,o]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Le(l.shape)>=PL)throw new Error(`values tensor size must less than ${PL}`);if(a.shape[1]>=PL)throw new Error(`trailing dim_size must less than ${PL} for int32 output type, was ${a.shape[1]}`);return ue.runKernel(QU,{sortedSequence:a,values:l},{side:e})}});function kgt(t,n){return vj(t,n,"left")}const $L=re({maxPool_:function Dgt(t,n,e,i,s){const r=G(t,"x","maxPool");let a=r,l=!1;3===r.rank&&(l=!0,a=ge(r,[1,r.shape[0],r.shape[1],r.shape[2]])),U(4===a.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),U(La(e,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${e} and dilations '1'`),wl("maxPool",i,s);const d=ue.runKernel(zF,{x:a},{filterSize:n,strides:e,pad:i,dimRoundingMode:s});return l?ge(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),qve=re({maxPool3d_:function Agt(t,n=[1,1,1],e,i,s,r="NDHWC"){const o=G(t,"x","maxPool3d");let a=o,l=!1;4===o.rank&&(l=!0,a=ge(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),U(5===a.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),U("NDHWC"===r,()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),wl("maxPool3d",i,s);const d=ue.runKernel(UF,{x:a},{filterSize:n,strides:e,pad:i,dimRoundingMode:s,dataFormat:r});return l?ge(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),Ngt=re({maxPoolWithArgmax_:function Mgt(t,n,e,i,s=!1){const o={x:G(t,"x","maxPoolWithArgmax")},l=ue.runKernel($U,o,{filterSize:n,strides:e,pad:i,includeBatchInIndex:s});return{result:l[0],indexes:l[1]}}}),to=re({mean_:function Ogt(t,n=null,e=!1){const s={x:G(t,"x","mean")};return ue.runKernel(GF,s,{axis:n,keepDims:e})}});function Zo(t,n="float32"){if(cu(t),"complex64"===n){const i=Zo(t,"float32"),s=Zo(t,"float32");return A_(i,s)}const e=Ja(Le(t),n);return ue.makeTensor(e,t,n)}function Ic(t,n="float32"){if(cu(t),"complex64"===n){const i=Ic(t,"float32"),s=Zo(t,"float32");return A_(i,s)}const e=iU(Le(t),n);return ue.makeTensor(e,t,n)}function Rgt(t,n,{indexing:e="xy"}={}){if("xy"!==e&&"ij"!==e)throw new TypeError(`${e} is not a valid third argument to meshgrid`);if(void 0===t)return[];let i=G(t,"x","meshgrid",t instanceof js?t.dtype:"float32");if(void 0===n)return[i];let s=G(n,"y","meshgrid",n instanceof js?n.dtype:"float32");const r=Le(i.shape),o=Le(s.shape);return"xy"===e?(i=ge(i,[1,-1]),s=ge(s,[-1,1]),[Hi(Ic([o,1],i.dtype),i),Hi(s,Ic([1,r],s.dtype))]):(i=ge(i,[-1,1]),s=ge(s,[1,-1]),[Hi(i,Ic([1,o],i.dtype)),Hi(Ic([r,1],s.dtype),s)])}const Fv=re({minimum_:function Fgt(t,n){let e=G(t,"a","minimum"),i=G(n,"b","minimum");return[e,i]=eo(e,i),"bool"===e.dtype&&(e=Rt(e,"int32"),i=Rt(i,"int32")),mi(e.shape,i.shape),ue.runKernel(FI,{a:e,b:i})}}),Kve=re({mirrorPad_:function Lgt(t,n,e){U("reflect"===e||"symmetric"===e,()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${e}.`);const i=G(t,"x","mirrorPad");if(0===i.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");U(n.length===i.rank,()=>`Padding doesn't match input. Must be ${i.rank}. Got ${n.length}.`);const s="reflect"===e?1:0;for(let a=0;a<i.rank;a++)U(2===n[a].length,()=>"Invalid number of paddings. Must be length of 2 each."),U(n[a][0]>=0&&n[a][0]<=i.shape[a]-s&&n[a][1]>=0&&n[a][1]<=i.shape[a]-s,()=>`Padding in dimension ${a} cannot be greater than or equal to ${i.shape[a]-s} or less than 0 for input of shape ${i.shape}`);return ue.runKernel(HF,{x:i},{paddings:n,mode:e})}}),Xve=re({mod_:function Pgt(t,n){let e=G(t,"a","mod"),i=G(n,"b","mod");return[e,i]=eo(e,i),ue.runKernel(LI,{a:e,b:i})}}),BL=re({moments_:function $gt(t,n=null,e=!1){const i=zi(n,(t=G(t,"x","moments")).shape),s=to(t,i,e);let r=s.shape;e||(r=_o(s.shape,i));const o=lr(Xt(Rt(t,"float32"),ge(s,r)));return{mean:s,variance:to(o,i,e)}}}),Vgt=re({multiRNNCell_:function Bgt(t,n,e,i){const s=G(n,"data","multiRNNCell"),r=CL(e,"c","multiRNNCell"),o=CL(i,"h","multiRNNCell");let a=s;const l=[];for(let d=0;d<t.length;d++){const h=t[d](a,r[d],o[d]);l.push(h[0]),l.push(h[1]),a=h[1]}const c=[],u=[];for(let d=0;d<l.length;d+=2)c.push(l[d]),u.push(l[d+1]);return[c,u]}}),Ugt=re({multinomial_:function zgt(t,n,e,i=!1){const s=G(t,"logits","multinomial"),r=s.size,o=s.rank;if(r<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${r}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);e=e||Math.random();const l={logits:1===o?ge(s,[1,-1]):s},u=ue.runKernel(BU,l,{numSamples:n,seed:e,normalized:i});return 1===o?ge(u,[u.size]):u}}),Zw=re({notEqual_:function Ggt(t,n){let e=G(t,"a","notEqual","string_or_numeric"),i=G(n,"b","notEqual","string_or_numeric");return[e,i]=eo(e,i),mi(e.shape,i.shape),ue.runKernel(qF,{a:e,b:i})}}),yj=re({oneHot_:function jgt(t,n,e=1,i=0,s="int32"){if(n<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${n}`);const o={indices:G(t,"indices","oneHot","int32")};return ue.runKernel(XF,o,{dtype:s,depth:n,onValue:e,offValue:i})}}),fu=re({onesLike_:function Hgt(t){const e={x:G(t,"x","onesLike")};return ue.runKernel(KF,e)}}),qgt=re({outerProduct_:function Wgt(t,n){const e=G(t,"v1","outerProduct"),i=G(n,"v2","outerProduct");U(1===e.rank&&1===i.rank,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${e.rank} and ${i.rank}.`);const s=ge(e,[-1,1]),r=ge(i,[1,-1]);return Hi(s,r)}}),V_=re({pad_:function Kgt(t,n,e=0){const i=G(t,"x","pad");if(0===i.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return ue.runKernel(ZF,{x:i},{paddings:n,constantValue:e})}}),Ygt=re({pad1d_:function Xgt(t,n,e=0){return U(2===n.length,()=>"Invalid number of paddings. Must be length of 2."),V_(t,[n],e)}}),Qgt=re({pad2d_:function Zgt(t,n,e=0){return U(2===n.length&&2===n[0].length&&2===n[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),V_(t,n,e)}}),ebt=re({pad3d_:function Jgt(t,n,e=0){return U(3===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),V_(t,n,e)}}),nbt=re({pad4d_:function tbt(t,n,e=0){return U(4===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length&&2===n[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),V_(t,n,e)}}),VL=re({spaceToBatchND_:function ibt(t,n,e){const i=G(t,"x","spaceToBatchND");return U(i.rank>=1+n.length,()=>`input rank ${i.rank} should be > than [blockShape] ${n.length}`),U(e.length===n.length,()=>`paddings.shape[0] ${e.length} must be equal to [blockShape] ${n.length}`),U(i.shape.reduce((o,a,l)=>l>0&&l<=n.length?o&&(a+e[l-1][0]+e[l-1][1])%n[l-1]==0:o,!0),()=>`input spatial dimensions ${i.shape.slice(1)} with paddings ${e.toString()} must be divisible by blockShapes ${n.toString()}`),ue.runKernel(aL,{x:i},{blockShape:n,paddings:e})}}),Yve=re({pool_:function sbt(t,n,e,i,s,r,o){null==s&&(s=[1,1]),null==r&&(r=1),0===i&&(i="valid");const a=G(t,"x","maxPool");let l=a,c=!1;3===a.rank&&(c=!0,l=ge(a,[1,a.shape[0],a.shape[1],a.shape[2]])),U(La(r,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${r} and dilations '${s}'`);const u=ed(l.shape,n,r,s,i),d=[u.dilationHeight,u.dilationWidth];let h;h="same"===i?function obt(t,n){const i=t.map((o,a)=>o+(o-1)*(n[a]-1)).map(o=>o-1),s=i.map(o=>Math.floor(o/2)),r=i.map((o,a)=>o-s[a]);return i.map((o,a)=>[s[a],r[a]])}([u.filterHeight,u.filterWidth],d):[[0,0],[0,0]];const p=1===d[0]&&1===d[1],[f,g]=function rbt(t,n,e){const i=e.map(u=>u[0]),s=e.map(u=>u[1]),r=t.concat(i,s),o=n.map((u,d)=>(u-r[d]%u)%u),a=s.map((u,d)=>u+o[d]),l=n.map((u,d)=>[i[d],a[d]]),c=n.map((u,d)=>[0,o[d]]);return[l,c]}([u.inHeight,u.inWidth],d,h),v=p?i:"valid",y=p?l:VL(l,d,f),x=("avg"===e?()=>kL(y,n,r,v,o):()=>$L(y,n,r,v,o))(),T=p?x:DL(x,d,g);return c?ge(T,[T.shape[1],T.shape[2],T.shape[3]]):T}}),zL=re({prelu_:function abt(t,n){const e=G(t,"x","prelu"),i=G(n,"alpha","prelu");return ue.runKernel(QF,{x:e,alpha:i})}}),Zve=re({prod_:function lbt(t,n=null,e=!1){let i=G(t,"x","prod");return"bool"===i.dtype&&(i=Rt(i,"int32")),ue.runKernel(JF,{x:i},{axis:n,keepDims:e})}}),ubt=re({raggedGather_:function cbt(t,n,e,i){const s=t.map((u,d)=>G(u,`tensors${d}`,"raggedGather","int32")),r=G(n,"paramsDenseValues","raggedGather"),o=G(e,"indices","raggedGather","int32"),c=ue.runKernel(GU,{paramsNestedSplits:s,paramsDenseValues:r,indices:o},{outputRaggedRank:i});return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}}),hbt=re({raggedRange_:function dbt(t,n,e){const i=G(t,"starts","raggedRange"),s=G(n,"limits","raggedRange",i.dtype),r=G(e,"deltas","raggedRange",i.dtype),a=ue.runKernel(jU,{starts:i,limits:s,deltas:r});return{rtNestedSplits:a[0],rtDenseValues:a[1]}}}),fbt=re({raggedTensorToTensor_:function pbt(t,n,e,i,s){const r=G(t,"shape","raggedTensorToTensor","int32"),o=G(n,"values","raggedTensorToTensor"),a=G(e,"defaultValue","raggedTensorToTensor",o.dtype),l=i.map((d,h)=>G(d,`tensors${h}`,"raggedTensorToTensor","int32"));return ue.runKernel(HU,{shape:r,values:o,defaultValue:a,rowPartitionTensors:l},{rowPartitionTypes:s})}}),_bt=re({rand_:function mbt(t,n,e){cu(t);const i=Le(t);let s=null;if(null==e||"float32"===e)s=new Float32Array(i);else if("int32"===e)s=new Int32Array(i);else{if("bool"!==e)throw new Error(`Unknown data type ${e}`);s=new Uint8Array(i)}for(let r=0;r<i;r++)s[r]=n();return ue.makeTensor(s,t,e)}});var Qw=ye(814);class wj{constructor(n,e,i,s,r){this.mean=n,this.stdDev=e,this.dtype=i,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=r||Math.random();this.random=Qw.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let n,e,i=!1;for(;!i;){let s,r,o;do{s=2*this.random()-1,r=2*this.random()-1,o=s*s+r*r}while(o>=1||0===o);const a=Math.sqrt(-2*Math.log(o)/o);n=this.mean+this.stdDev*s*a,e=this.mean+this.stdDev*r*a,(!this.truncated||this.isValidTruncated(n))&&(i=!0)}return(!this.truncated||this.isValidTruncated(e))&&(this.nextVal=this.convertValue(e)),this.convertValue(n)}convertValue(n){return null==this.dtype||"float32"===this.dtype?n:Math.round(n)}isValidTruncated(n){return n<=this.upper&&n>=this.lower}}class gbt{constructor(n,e,i,s){this.alpha=n,this.beta=1/e,this.dtype=i;const r=s||Math.random();this.randu=Qw.alea(r.toString()),this.randn=new wj(0,1,i,!1,this.randu()),this.d=n<1?n+2/3:n-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let n,e,i,s,r,o;for(;;){do{s=this.randn.nextValue(),o=1+this.c*s}while(o<=0);if(o*=o*o,n=s*s,e=1-.331*n*n,i=.5*n+this.d*(1-o+Math.log(o)),r=this.randu(),r<e||Math.log(r)<i)break}return o*=1/this.beta*this.d,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(n){return"float32"===this.dtype?n:Math.round(n)}}class bbt{constructor(n=0,e=1,i,s){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=n,this.range=e-n,this.dtype=i,null==s&&(s=Math.random()),"number"==typeof s&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${n} - ${e} <= 1 and dtype is not float`);this.random=Qw.alea(s)}convertValue(n){return this.canReturnFloat()?n:Math.round(n)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const Sbt=re({randomGamma_:function Cbt(t,n,e=1,i="float32",s){if(cu(t),null==e&&(e=1),null==i&&(i="float32"),"float32"!==i&&"int32"!==i)throw new Error(`Unsupported data type ${i}`);const r=new gbt(n,e,i,s),o=Di(t,i);for(let a=0;a<o.values.length;a++)o.values[a]=r.nextValue();return o.toTensor()}}),Sj=re({randomNormal_:function xbt(t,n=0,e=1,i,s){if(cu(t),null!=i&&"bool"===i)throw new Error(`Unsupported data type ${i}`);const r=new wj(n,e,i,!1,s),o=Di(t,i);for(let a=0;a<o.values.length;a++)o.values[a]=r.nextValue();return o.toTensor()}}),Tbt=re({randomStandardNormal_:function Ebt(t,n,e){if(null!=n&&"bool"===n)throw new Error(`Unsupported data type ${n}`);return Sj(t,0,1,n,e)}}),Lv=re({randomUniform_:function Ibt(t,n=0,e=1,i="float32",s){cu(t);const r=Di(t,i),o=new bbt(n,e,null,s);for(let a=0;a<r.values.length;a++)r.values[a]=o.nextValue();return r.toTensor()}}),Dbt=re({randomUniformInt_:function kbt(t,n,e,i){return Lv(t,n,e,"int32",i)}});function Jw(t,n,e=1,i="float32"){if(0===e)throw new Error("Cannot have a step of zero");return ue.runKernel(WU,{},{start:t,stop:n,step:e,dtype:i})}const y2=re({real_:function Abt(t){const e={input:G(t,"input","real")};return ue.runKernel(qU,e)}}),Qve=re({reciprocal_:function Mbt(t){const e={x:G(t,"x","reciprocal")};return ue.runKernel(BI,e)}}),vp=re({relu_:function Nbt(t){const e={x:G(t,"x","relu")};return ue.runKernel(VI,e)}}),xj=re({relu6_:function Obt(t){const e={x:G(t,"x","relu6")};return ue.runKernel(zI,e)}}),id=re({reverse_:function Rbt(t,n){const i={x:G(t,"x","reverse")};return ue.runKernel(iL,i,{dims:n})}}),Lbt=re({reverse1d_:function Fbt(t){const n=G(t,"x","reverse");return U(1===n.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${n.rank}.`),id(n,0)}}),$bt=re({reverse2d_:function Pbt(t,n){const e=G(t,"x","reverse");return U(2===e.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${e.rank}.`),id(e,n)}}),Vbt=re({reverse3d_:function Bbt(t,n){const e=G(t,"x","reverse");return U(3===e.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${e.rank}.`),id(e,n)}}),Ubt=re({reverse4d_:function zbt(t,n){const e=G(t,"x","reverse");return U(4===e.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${e.rank}.`),id(e,n)}}),Ej=re({round_:function Gbt(t){const e={x:G(t,"x","round")};return ue.runKernel(UI,e)}}),Tj=re({rsqrt_:function jbt(t){const e={x:G(t,"x","rsqrt","float32")};return ue.runKernel(GI,e)}}),Ij=re({selu_:function Hbt(t){const e={x:G(t,"x","selu")};return ue.runKernel(jI,e)}}),kj=re({separableConv2d_:function Wbt(t,n,e,i,s,r=[1,1],o="NHWC"){const a=G(t,"x","separableConv2d"),l=G(n,"depthwiseFilter","separableConv2d"),c=G(e,"pointwiseFilter","separableConv2d");let u=a,d=!1;if(3===a.rank&&(d=!0,u=ge(a,[1,a.shape[0],a.shape[1],a.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");U(4===u.rank,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),U(4===l.rank,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),U(4===c.rank,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),U(1===c.shape[0],()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),U(1===c.shape[1],()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const h=l.shape[2],p=l.shape[3];U(c.shape[2]===h*p,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*p}, but got ${c.shape[2]}.`);const f=p2(u,l,i,s,o,r),v=P_(f,c,1,"valid",o);return d?ge(v,[v.shape[1],v.shape[2],v.shape[3]]):v}});function Dj(){return Dj=z(function*(t,n){const e=G(t,"x","setdiff1d"),i=G(n,"y","setdiff1d");U(e.dtype===i.dtype,()=>`x and y should have the same dtype, but got x (${e.dtype}) and y (${i.dtype}).`),U(1===e.rank,()=>`x should be 1D tensor, but got x (${e.shape}).`),U(1===i.rank,()=>`y should be 1D tensor, but got y (${i.shape}).`);const s=yield e.data(),r=yield i.data(),o=new Set(r);let a=0;for(let u=0;u<s.length;u++)o.has(s[u])||a++;const l=new Ko([a],e.dtype),c=new Ko([a],"int32");for(let u=0,d=0;u<s.length;u++)o.has(s[u])||(l.values[d]=s[u],c.values[d]=u,d++);return[l.toTensor(),c.toTensor()]}),Dj.apply(this,arguments)}const Kbt=function qbt(t,n){return Dj.apply(this,arguments)},Jve=re({sign_:function Xbt(t){const e={x:G(t,"x","sign")};return ue.runKernel(qI,e)}}),Aj=re({sin_:function Ybt(t){const e={x:G(t,"x","sin","float32")};return ue.runKernel(HI,e)}}),Mj=re({sinh_:function Zbt(t){const e={x:G(t,"x","sinh")};return ue.runKernel(WI,e)}}),UL=re({slice1d_:function Qbt(t,n,e){const i=G(t,"x","slice1d");return U(1===i.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${i.rank} tensor`),is(i,[n],[e])}}),Nj=re({slice2d_:function Jbt(t,n,e){const i=G(t,"x","slice2d");return U(2===i.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${i.rank} tensor`),is(i,n,e)}}),GL=re({slice3d_:function evt(t,n,e){const i=G(t,"x","slice3d");return U(3===i.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${i.rank} tensor`),is(i,n,e)}}),w2=re({slice4d_:function tvt(t,n,e){const i=G(t,"x","slice4d");return U(4===i.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${i.rank} tensor`),is(i,n,e)}}),jL=re({softmax_:function nvt(t,n=-1){const e=G(t,"logits","softmax","float32");if(-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and dim was ${n}`);return ue.runKernel(cL,{logits:e},{dim:n})}}),HL=re({fft_:function ivt(t){return U("complex64"===t.dtype,()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`),ue.runKernel("FFT",{input:t})}}),C2=re({ifft_:function svt(t){return U("complex64"===t.dtype,()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`),ue.runKernel(NU,{input:t})}}),Oj=re({irfft_:function rvt(t){const n=t.shape[t.shape.length-1],e=t.size/n;let i;if(n<=2){const s=ge(t,[e,n]);i=C2(s)}else{const s=[e,2*(n-1)],r=ge(y2(t),[e,n]),o=ge(NL(t),[e,n]),a=id(is(r,[0,1],[e,n-2]),1),l=pe(id(is(o,[0,1],[e,n-2]),1),En(-1)),c=mo([r,a],1),u=mo([o,l],1),d=ge(A_(c,u),[s[0],s[1]]);i=C2(d)}if(i=y2(i),3===t.rank&&0!==t.shape[0]){const s=i,r=t.shape[0];i=ge(i,[r,i.shape[0]/r,i.shape[1]]),s.dispose()}return i}}),kc=re({split_:function ovt(t,n,e=0){const s={x:G(t,"x","split")};return ue.runKernel(lL,s,{numOrSizeSplits:n,axis:e})}}),WL=re({rfft_:function avt(t,n){U("float32"===t.dtype,()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let e=t.shape[t.shape.length-1];const i=t.size/e;let s;if(null!=n&&n<e){const f=t.shape.map(v=>0),g=t.shape.map(v=>v);g[t.shape.length-1]=n,s=is(t,f,g),e=n}else if(null!=n&&n>e){const f=t.shape.map(g=>g);f[t.shape.length-1]=n-e,s=mo([t,Zo(f)],t.shape.length-1),e=n}else s=t;const r=ns(s),o=ge(A_(s,r),[i,e]),a=HL(o),l=Math.floor(e/2)+1,c=y2(a),u=NL(a),d=kc(c,[l,e-l],c.shape.length-1),h=kc(u,[l,e-l],u.shape.length-1),p=s.shape.slice();return p[s.shape.length-1]=l,ge(A_(d[0],h[0]),p)}}),Rj=re({squaredDifference_:function lvt(t,n){let e=G(t,"a","squaredDifference"),i=G(n,"b","squaredDifference");return[e,i]=eo(e,i),mi(e.shape,i.shape),ue.runKernel(ZI,{a:e,b:i},{})}}),Pv=re({squeeze_:function cvt(t,n){const e=G(t,"x","squeeze","string_or_numeric");return ge(e,C_(e.shape,n).newShape)}}),Kl=re({stack_:function uvt(t,n=0){const e=CL(t,"tensors","stack","string_or_numeric");return U(e.length>=1,()=>"Pass at least one tensor to tf.stack"),e.length>0&&U(n<=e[0].rank,()=>"Axis must be <= rank of the tensor"),ue.runKernel(YF,e,{axis:n})}}),eC=re({step_:function dvt(t,n=0){const i={x:G(t,"x","step")};return ue.runKernel(n2,i,{alpha:n})}}),eye=re({stridedSlice_:function hvt(t,n,e,i,s=0,r=0,o=0,a=0,l=0){const u={x:G(t,"x","stridedSlice","string_or_numeric")};return ue.runKernel(rG,u,{begin:n,end:e,strides:i,beginMask:s,endMask:r,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l})}}),tye=re({tan_:function pvt(t){const e={x:G(t,"x","tan","float32")};return ue.runKernel(JI,e)}});function il(t,n){Aw(t);const e=D_(t,n);if(1!==e.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return M_(t,null,e,n)}function $v(t,n,e){if(Aw(t),null!=n&&2!==n.length)throw new Error("tensor2d() requires shape to have two numbers");const i=D_(t,e);if(2!==i.length&&1!==i.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===i.length&&null==n)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return M_(t,n,i,e)}function fvt(t,n,e){if(Aw(t),null!=n&&4!==n.length)throw new Error("tensor4d() requires shape to have four numbers");const i=D_(t,e);if(4!==i.length&&1!==i.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===i.length&&null==n)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return M_(t,n,i,e)}function mvt(t,n,e){if(Aw(t),null!=n&&5!==n.length)throw new Error("tensor5d() requires shape to have five numbers");const i=D_(t,e);if(5!==i.length&&1!==i.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===i.length&&null==n)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return M_(t,n,i,e)}function _vt(t,n,e){if(Aw(t),null!=n&&6!==n.length)throw new Error("tensor6d() requires shape to have six numbers");const i=D_(t,e);if(6!==i.length&&1!==i.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===i.length&&null==n)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return M_(t,n=n||i,i,e)}function nye(t,n,e){const i=n.rank>1?n.shape[n.rank-1]:1,s=n.rank>1?n.rank-1:1,r=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${e.shape}, indices.shape: ${n.shape}, shape: ${t}, sliceDim: ${i}, and batchDim: ${s}.`;if(e.rank<s)throw new Error(r+` update.rank < ${s}. `);if(t.length<i+(e.rank-s))throw new Error(r+` Output shape length < ${i+(e.rank-s)}`);if(e.rank!==s+t.length-i)throw new Error(r+" update.rank != "+(s+t.length-i));for(let o=0;o<s;++o)if(e.shape[o]!==n.shape[o])throw new Error(r+` updates.shape[${o}] (${e.shape[o]}) != indices.shape[${o}] (${n.shape[o]}).`);for(let o=0;o<e.rank-s;++o)if(e.shape[o+s]!==t[o+i])throw new Error(r+` updates.shape[${o+s}] (${e.shape[o+s]}) != shape[${o+s}] (${t[o+s]})`)}function Fj(t,n,e){if(n.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${n.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if("int32"!==n.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${n.dtype}`);if(e.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${e}`);if(0===e.length){if(0===n.size)throw new Error(`Indices specified for empty output. indices shape: ${n.shape}`);if(0===t.size)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}nye(e,n,t)}function Bv(t,n,e){const i=n.shape.length,s=i>1?n.shape[i-1]:1,r=e.length;let o=1;for(let d=s;d<r;++d)o*=e[d];const a=s<1?1:s;return{sliceRank:s,numUpdates:Le(n.shape)/a,sliceSize:o,strides:[...xn(e.slice(0,s)),1],outputSize:Le(e)}}const bvt=re({tensorScatterUpdate_:function gvt(t,n,e){const i=G(t,"tensor","tensorScatterupdate"),s=G(n,"indices","tensorScatterupdate","int32"),r=G(e,"updates","tensorScatterupdate");if(Fj(r,s,i.shape),i.dtype!==r.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${i.dtype} and ${r.dtype}.`);return ue.runKernel(ZU,{tensor:i,indices:s,updates:r},{})}}),iye=re({topk_:function vvt(t,n=1,e=!0){const i=G(t,"x","topk");if(0===i.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const s=i.shape[i.shape.length-1];if(n<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${n}`);if(n>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${n}`);const r={x:i},o={k:n,sorted:e},[a,l]=ue.runKernel(cG,r,o);return{values:a,indices:l}}}),Lj=re({truncatedNormal_:function yvt(t,n=0,e=1,i,s){if(cu(t),null!=i&&"bool"===i)throw new Error("Unsupported data type $ { dtype }");const r=new wj(n,e,i,!0,s),o=Di(t,i);for(let a=0;a<o.values.length;a++)o.values[a]=r.nextValue();return o.toTensor()}}),sye=re({unique_:function wvt(t,n=0){const e=G(t,"x","unique","string_or_numeric");U(e.rank>0,()=>"The input tensor must be at least 1D");const i={x:e},s={axis:n},[r,o]=ue.runKernel(dG,i,s);return{values:r,indices:o}}}),Pj=re({unsortedSegmentSum_:function Cvt(t,n,e){const i=G(t,"x","unsortedSegmentSum"),s=G(n,"segmentIds","unsortedSegmentSum","int32");return U(Mw(e),()=>"numSegments must be of dtype int"),ue.runKernel(hL,{x:i,segmentIds:s},{numSegments:e})}}),sd=re({unstack_:function Svt(t,n=0){const e=G(t,"x","unstack","string_or_numeric");return U(n>=-e.shape.length&&n<e.shape.length,()=>`Axis = ${n} is not in [-${e.shape.length}, ${e.shape.length})`),ue.runKernel(dL,{value:e},{axis:n})}});function xvt(t,n){return vj(t,n,"right")}function rye(t,n=!0,e,i){return ue.makeVariable(t,n,e,i)}function $j(t,n){const e=[];for(let r=0;r<n.length;r++)n[r]&&e.push(r);const i=Di(t,"int32"),s=Di([e.length,t.length],"int32");for(let r=0;r<e.length;r++){const o=i.indexToLoc(e[r]);s.values.set(o,r*t.length)}return s.toTensor()}function Bj(){return Bj=z(function*(t){const n=G(t,"condition","whereAsync","bool"),e=yield n.data(),i=$j(n.shape,e);return t!==n&&n.dispose(),i}),Bj.apply(this,arguments)}const oye=function Evt(t){return Bj.apply(this,arguments)};function Vj(){return Vj=z(function*(t,n,e){const i=G(t,"tensor","boolMask"),s=G(n,"mask","boolMask","bool"),r=e??0,o=s.rank,a=i.shape;U(o>0,()=>"mask cannot be scalar"),Cc(a.slice(r,r+o),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let g=r;g<r+o;g++)l*=a[g];const c=a.slice(0,r).concat([l],a.slice(r+o)),u=ge(i,c),d=ge(s,[-1]),h=yield oye(d),p=Pv(h,[1]),f=b2(u,p,r);return t!==i&&i.dispose(),n!==s&&s.dispose(),p.dispose(),u.dispose(),d.dispose(),h.dispose(),f}),Vj.apply(this,arguments)}const Ivt=function Tvt(t,n,e){return Vj.apply(this,arguments)},ss=re({transpose_:function kvt(t,n,e){const i=G(t,"x","transpose");if(null==n&&(n=i.shape.map((o,a)=>a).reverse()),U(i.rank===n.length,()=>`Error in transpose: rank of input ${i.rank} must match length of perm ${n}.`),n.forEach(o=>{U(o>=0&&o<i.rank,()=>`All entries in 'perm' must be between 0 and ${i.rank-1} but got ${n}`)}),i.rank<=1)return i.clone();const s={x:i},r={perm:n};return"complex64"===i.dtype?Ee(()=>{let o=y2(i),a=NL(i);return o=ue.runKernel(Lw,{x:o},r),a=ue.runKernel(Lw,{x:a},r),e&&(a=kr(a)),A_(o,a)}):ue.runKernel(Lw,s,r)}}),Avt=re({movingAverage_:function Dvt(t,n,e,i,s=!0){const r=G(t,"v","movingAverage"),o=G(n,"x","movingAverage"),a=G(e,"decay","movingAverage");(function eft(t,n){U(t.dtype===n.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${n.dtype}) input must match`)})(r,o),U(es(r.shape,o.shape),()=>"Shape mismatch in v and x");const l=En(1),c=Xt(l,a);let u=pe(Xt(o,r),c);if(s){U(null!=i,()=>"When using zeroDebias: true, step is required.");const d=G(i,"step","movingAverage");u=pn(u,Xt(l,$f(a,d)))}return lt(r,u)}}),Nvt=re({scatterND_:function Mvt(t,n,e){cu(e);const i=G(t,"indices","scatterND","int32"),s=G(n,"updates","scatterND");return Fj(s,i,e),ue.runKernel(YU,{indices:i,updates:s},{shape:e})}}),Fvt=re({sparseToDense_:function Rvt(t,n,e,i=0){cu(e);const s=G(t,"sparseIndices","sparseToDense","int32"),r=G(n,"sparseValues","sparseToDense","string_or_numeric"),o=G(i,"defaultValue","sparseToDense",r.dtype);return function Ovt(t,n,e,i){if("int32"!==t.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const s=t.rank>0?t.shape[0]:1,r=t.rank>1?t.shape[1]:1;if(e.length!==r)throw new Error(`outputShape has incorrect number of elements:, ${e.length}, should be: ${r}.`);if(0!==n.rank&&(1!==n.rank||n.size!==s))throw new Error(`sparseValues has incorrect shape ${n.shape}, should be [] or [${s}]`);if(n.dtype!==i.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(s,r,e,o),ue.runKernel(iG,{sparseIndices:s,sparseValues:r,defaultValue:o},{outputShape:e})}}),Pvt=re({gatherND_:function Lvt(t,n){const e=G(n,"indices","gatherND","int32"),s={params:G(t,"x","gatherND","string_or_numeric"),indices:e};return ue.runKernel(MU,s)}}),aye=re({dropout_:function Bvt(t,n,e,i){const s=G(t,"x","dropout");if(U("float32"===s.dtype,()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),U(n>=0&&n<1,()=>`rate must be a float in the range [0, 1), but got ${n}.`),0===n)return t instanceof js?s.clone():s;const r=function $vt(t,n){if(null==n)return t.shape.slice();if(es(t.shape,n))return n;if(t.shape.length===n.length){const e=[];for(let i=0;i<t.shape.length;i++)e.push(null==n[i]&&null!=t.shape[i]?t.shape[i]:n[i]);return e}return n}(s,e),o=1-n,a=pn(g2(lt(Lv(r,0,1,"float32",i),o)),o);return pe(s,a)}});function lye(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function zj(t,n,e){const i=1-t%2,s=new Float32Array(t);for(let r=0;r<t;++r){const o=2*Math.PI*r/(t+i-1);s[r]=n-e*Math.cos(o)}return il(s,"float32")}function Uj(){return Uj=z(function*(t,n,e=1){const i=G(t,"predictions","inTopK"),s=G(n,"targets","inTopK");U(i.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${i.rank}`),U(i.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${i.rank} and targets rank ${s.rank}`),Cc(i.shape.slice(0,i.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const r=i.shape[i.shape.length-1];U(e>0&&e<=r,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${r}), but got ${e}`);const o=yield i.data(),a=yield s.data(),[l,c]=[o.length/r,r],u=Ra("bool",l);for(let d=0;d<l;d++){const h=d*c,p=o.subarray(h,h+c),f=[];for(let g=0;g<p.length;g++)f.push({value:p[g],index:g});f.sort((g,v)=>v.value-g.value),u[d]=0;for(let g=0;g<e;g++)if(f[g].index===a[d]){u[d]=1;break}}return t!==i&&i.dispose(),n!==s&&s.dispose(),hu(u,s.shape,"bool")}),Uj.apply(this,arguments)}const zvt=function Vvt(t,n){return Uj.apply(this,arguments)},Gj=re({conv2DBackpropFilter_:function Uvt(t,n,e,i,s,r="NHWC",o){let a=t;3===t.rank&&(a=ge(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=n;3===l.rank&&(l=ge(n,[1,n.shape[0],n.shape[1],n.shape[2]])),U(4===a.rank,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),U(4===l.rank,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),U(4===e.length,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${e}.`);const c="NHWC"===r?a.shape[3]:a.shape[1],u="NHWC"===r?l.shape[3]:l.shape[1];return U(c===e[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${e[2]}.`),U(u===e[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${e[3]}).`),wl("conv2dDerFilter",s,o),ue.runKernel(pU,{x:a,dy:l},{strides:i,pad:s,dataFormat:r,dimRoundingMode:o,filterShape:e})}});function qL(t,n,e){if(null==e||"linear"===e)return t;if("relu"===e)return pe(t,eC(n));throw new Error(`Cannot compute gradient for fused activation ${e}.`)}function KL(t,n){let e=n;const i=Yo(t.shape,n.shape);return i.length>0&&(e=un(e,i)),ge(e,t.shape)}function XL(t,n,e,i){if("linear"===n)return t;if("relu"===n)return vp(t);if("elu"===n)return f2(t);if("relu6"===n)return xj(t);if("prelu"===n)return zL(t,e);if("leakyrelu"===n)return OL(t,i);if("sigmoid"===n)return gp(t);throw new Error(`Unknown fused activation ${n}.`)}const YL=(t,n)=>!(t>0)||"linear"===n,cye=re({fusedConv2d_:function Gvt({x:t,filter:n,strides:e,pad:i,dataFormat:s="NHWC",dilations:r=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(!1===YL(ue.state.gradientDepth,l=l||"linear")){U("NHWC"===s,()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let R=P_(t,n,e,i,s,r,o);return null!=a&&(R=lt(R,a)),XL(R,l,c,u)}const d=G(t,"x","conv2d","float32"),h=G(n,"filter","conv2d","float32");let p=d,f=!1;3===d.rank&&(f=!0,p=ge(d,[1,d.shape[0],d.shape[1],d.shape[2]])),U(4===p.rank,()=>`Error in fused conv2d: input must be rank 4, but got rank ${p.rank}.`),U(4===h.rank,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),wl("fused conv2d",i,o);const g="NHWC"===s?p.shape[3]:p.shape[1];U(h.shape[2]===g,()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${h.shape[2]}.`),U(La(e,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${r}'`);const v=Ca(p.shape,h.shape,e,r,i,o);let y,w;if(null!=a&&(y=G(a,"bias","fused conv2d"),[y]=eo(y,d),"NHWC"===s?mi(v.outShape,y.shape):(U(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),U(0===y.shape.length||y.shape[0]===v.outChannels||1===y.shape[0],()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${v.outChannels})`))),null!=c){const R=c.shape;if(U(R.length<=1||3===R.length,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${R.length}.`),1===R.length)U(1===R[0]||R[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${R}) is not compatible with the number of output channels (${v.outChannels}).`);else if(3===R.length)try{mi(R,v.outShape)}catch{throw Error(`Error in fused conv2d: PReLU activation weights (${R}) is not compatible with the output shape of the conv2d (${v.outShape}).`)}w=G(c,"prelu weights","fused conv2d")}const x=(R,N)=>{U("NHWC"===s,()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[D,F,$,j]=N,Q=qL(R,$,l);U(L_(r),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const Ce=[cj(F.shape,Q,D,e,i),Gj(F,Q,D.shape,e,i)];if(null!=j){const Z=KL(j,Q);Ce.push(Z)}return Ce},T={x:p,filter:h,bias:y,preluActivationWeights:w},k={strides:e,pad:i,dataFormat:s,dilations:r,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return null==a?Pf((N,D,F)=>{let $=ue.runKernel(mL,T,k);return F([D,N,$]),f&&($=ge($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:x}})(p,h):Pf((N,D,F,$)=>{let j=ue.runKernel(mL,T,k);return $([D,N,j,F]),f&&(j=ge(j,[j.shape[1],j.shape[2],j.shape[3]])),{value:j,gradFunc:x}})(p,h,y)}}),uye=re({depthwiseConv2dNativeBackpropFilter_:function jvt(t,n,e,i,s,r=[1,1],o){let a=t;3===t.rank&&(a=ge(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=n;return 3===l.rank&&(l=ge(n,[1,n.shape[0],n.shape[1],n.shape[2]])),ue.runKernel(yU,{x:a,dy:l},{strides:i,pad:s,dimRoundingMode:o,dilations:r,filterShape:e})}}),dye=re({depthwiseConv2dNativeBackpropInput_:function Hvt(t,n,e,i,s,r=[1,1],o){let a=n,l=!1;3===n.rank&&(l=!0,a=ge(n,[1,n.shape[0],n.shape[1],n.shape[2]]));const d=ue.runKernel(wU,{dy:a,filter:e},{strides:i,pad:s,dimRoundingMode:o,dilations:r,inputShape:t});return l?ge(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),qvt=re({fusedDepthwiseConv2d_:function Wvt({x:t,filter:n,strides:e,pad:i,dataFormat:s="NHWC",dilations:r=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(!1===YL(ue.state.gradientDepth,l)){let k=p2(t,n,e,i,s,r,o);return null!=a&&(k=lt(k,a)),XL(k,l,c,u)}const d=G(t,"x","depthwiseConv2d","float32"),h=G(n,"filter","depthwiseConv2d","float32");let p=d,f=!1;3===d.rank&&(f=!0,p=ge(d,[1,d.shape[0],d.shape[1],d.shape[2]])),U(4===p.rank,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${p.rank}.`),U(4===h.rank,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`),U(p.shape[3]===h.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${p.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`),null==r&&(r=[1,1]),U(La(e,r),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${e} and dilations '${r}'`),wl("fused depthwiseConv2d",i,o);const g=Ca(p.shape,h.shape,e,r,i,o,!0);let v,y;null!=a&&(v=G(a,"bias","fused conv2d"),[v]=eo(v,d),mi(g.outShape,v.shape)),null!=c&&(y=G(c,"prelu weights","fused depthwiseConv2d"));const w=(k,R)=>{U(L_(r),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${r}'`);const[N,D,F,$]=R,j=qL(k,F,l),Q=dye(D.shape,j,N,e,i,r,o),Y=uye(D,j,N.shape,e,i,r,o);return null!=$?[Q,Y,KL(v,j)]:[Q,Y]},x={x:p,filter:h,bias:v,preluActivationWeights:y},T={strides:e,pad:i,dataFormat:s,dilations:r,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return null==a?Pf((R,N,D)=>{let F=ue.runKernel(_L,x,T);return D([N,R,F]),f&&(F=ge(F,[F.shape[1],F.shape[2],F.shape[3]])),{value:F,gradFunc:w}})(p,h):Pf((R,N,D,F)=>{let $=ue.runKernel(_L,x,T);return F([N,R,$,D]),f&&($=ge($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:w}})(p,h,v)}}),jj=re({fusedMatMul_:function Kvt({a:t,b:n,transposeA:e=!1,transposeB:i=!1,bias:s,activation:r="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(!1===YL(ue.state.gradientDepth,r)){let j=Hi(t,n,e,i);return null!=s&&(j=lt(j,s)),XL(j,r,o,a)}let l=G(t,"a","fused matMul"),c=G(n,"b","fused matMul");[l,c]=eo(l,c);const u=e?l.shape[l.rank-2]:l.shape[l.rank-1],d=i?c.shape[c.rank-1]:c.shape[c.rank-2],h=e?l.shape[l.rank-1]:l.shape[l.rank-2],p=i?c.shape[c.rank-2]:c.shape[c.rank-1],f=l.shape.slice(0,-2),g=c.shape.slice(0,-2),v=Le(f),y=Le(g);U(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${e} and transposeB=${i} must match.`);const x=mi(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([h,p]),T=ge(l,e?[v,u,h]:[v,h,u]),k=ge(c,i?[y,p,d]:[y,d,p]);let R,N;null!=s&&(R=G(s,"bias","fused matMul"),[R]=eo(R,l),mi(x,R.shape)),null!=o&&(N=G(o,"prelu weights","fused matMul"));const D=(j,Q)=>{const[Y,ce,Ce,Z]=Q,le=qL(ge(j,Ce.shape),Ce,r);let te,be;return e||i?!e&&i?(te=Hi(le,ce,!1,!1),be=Hi(le,Y,!0,!1)):e&&!i?(te=Hi(ce,le,!1,!0),be=Hi(Y,le,!1,!1)):(te=Hi(ce,le,!0,!0),be=Hi(le,Y,!0,!0)):(te=Hi(le,ce,!1,!0),be=Hi(Y,le,!0,!1)),null!=s?[te,be,KL(Z,le)]:[te,be]},F={a:T,b:k,bias:R,preluActivationWeights:N},$={transposeA:e,transposeB:i,activation:r,leakyreluAlpha:a};return null==s?Pf((Q,Y,ce)=>{const Ce=ue.runKernel(fL,F,$);return ce([Q,Y,Ce]),{value:ge(Ce,x),gradFunc:D}})(T,k):Pf((Q,Y,ce,Ce)=>{const Z=ue.runKernel(fL,F,$);return Ce([Q,Y,Z,ce]),{value:ge(Z,x),gradFunc:D}})(T,k,R)}}),Yvt=re({hammingWindow_:function Xvt(t){return zj(t,.54,.46)}}),hye=re({hannWindow_:function Zvt(t){return zj(t,.5,.5)}}),pye=re({frame_:function Qvt(t,n,e,i=!1,s=0){let r=0;const o=[];for(;r+n<=t.size;)o.push(is(t,r,n)),r+=e;if(i)for(;r<t.size;){const a=r+n-t.size,l=mo([is(t,r,n-a),jw([a],s)]);o.push(l),r+=e}return 0===o.length?$v([],[0,n]):ge(mo(o),[o.length,n])}}),eyt=re({stft_:function Jvt(t,n,e,i,s=hye){null==i&&(i=lye(n));const r=pye(t,n,e),o=pe(r,s(n));return WL(o,i)}}),nyt=re({cropAndResize_:function tyt(t,n,e,i,s="bilinear",r=0){const o=G(t,"image","cropAndResize"),a=G(n,"boxes","cropAndResize","float32"),l=G(e,"boxInd","cropAndResize","int32"),c=a.shape[0];return U(4===o.rank,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),U(2===a.rank&&4===a.shape[1],()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),U(1===l.rank&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),U(2===i.length,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${i.length}.`),U(i[0]>=1&&i[1]>=1,()=>`cropSize must be atleast [1,1], but was ${i}`),U("bilinear"===s||"nearest"===s,()=>`method must be bilinear or nearest, but was ${s}`),ue.runKernel(gU,{image:o,boxes:a,boxInd:l},{method:s,extrapolationValue:r,cropSize:i})}}),syt=re({flipLeftRight_:function iyt(t){const n=G(t,"image","flipLeftRight","float32");return U(4===n.rank,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${n.rank}.`),ue.runKernel(AU,{image:n},{})}}),oyt=re({grayscaleToRGB_:function ryt(t){const n=G(t,"image","grayscaleToRGB"),e=n.rank-1,i=n.shape[e];U(n.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${n.rank}.`),U(1===i,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${i}.`);const s=new Array(n.rank);return s.fill(1,0,e),s[e]=3,nd(n,s)}}),lyt=re({rgbToGrayscale_:function ayt(t){const n=G(t,"image","RGBToGrayscale"),i=n.shape[n.rank-1];U(n.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${n.rank}.`),U(3===i,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${i}.`);const s=n.dtype,r=Rt(n,"float32"),o=il([.2989,.587,.114]);let a;switch(n.rank){case 2:a=Xw("ij,j->i",r,o);break;case 3:a=Xw("ijk,k->ij",r,o);break;case 4:a=Xw("ijkl,l->ijk",r,o);break;case 5:a=Xw("ijklm,m->ijkl",r,o);break;case 6:a=Xw("ijklmn,n->ijklm",r,o);break;default:throw new Error("Not a valid tensor rank.")}return a=nl(a,-1),Rt(a,s)}}),uyt=re({rotateWithOffset_:function cyt(t,n,e=0,i=.5){const s=G(t,"image","rotateWithOffset","float32");return U(4===s.rank,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`),ue.runKernel(pG,{image:s},{radians:n,fillValue:e,center:i})}});function tC(t,n,e,i,s,r){null==i&&(i=.5),null==s&&(s=Number.NEGATIVE_INFINITY),null==r&&(r=0);const o=t.shape[0];return e=Math.min(e,o),U(0<=i&&i<=1,()=>`iouThreshold must be in [0, 1], but was '${i}'`),U(2===t.rank,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),U(4===t.shape[1],()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),U(1===n.rank,()=>"scores must be a 1D tensor"),U(n.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${n.shape[0]}`),U(0<=r&&r<=1,()=>`softNmsSigma must be in [0, 1], but was '${r}'`),{maxOutputSize:e,iouThreshold:i,scoreThreshold:s,softNmsSigma:r}}const hyt=re({nonMaxSuppression_:function dyt(t,n,e,i=.5,s=Number.NEGATIVE_INFINITY){const r=G(t,"boxes","nonMaxSuppression","float32"),o=G(n,"scores","nonMaxSuppression","float32"),a=tC(r,o,e,i,s);return ue.runKernel(VU,{boxes:r,scores:o},{maxOutputSize:e=a.maxOutputSize,iouThreshold:i=a.iouThreshold,scoreThreshold:s=a.scoreThreshold})}});function pyt(t,n,e){const i=function fyt(t,n,e){return function _yt(t,n,e){let i=0,s=t.length,r=0,o=!1;for(;i<s;){r=i+(s-i>>>1);const a=e(n,t[r]);a>0?i=r+1:(s=r,o=!a)}return o?i:-i-1}(t,n,e||myt)}(t,n,e);t.splice(i<0?-(i+1):i,0,n)}function myt(t,n){return t>n?1:t<n?-1:0}function Hj(t,n,e,i,s){return Kj(t,n,e,i,s,0)}function Wj(t,n,e,i,s,r){return Kj(t,n,e,i,s,0,!1,r,!0)}function qj(t,n,e,i,s,r){return Kj(t,n,e,i,s,r,!0)}function Kj(t,n,e,i,s,r,o=!1,a=!1,l=!1){const c=[];for(let v=0;v<n.length;v++)n[v]>s&&c.push({score:n[v],boxIndex:v,suppressBeginIndex:0});c.sort(fye);const u=r>0?-.5/r:0,d=[],h=[];for(;d.length<e&&c.length>0;){const v=c.pop(),{score:y,boxIndex:w,suppressBeginIndex:x}=v;if(y<s)break;let T=!1;for(let k=d.length-1;k>=x;--k){const R=gyt(t,w,d[k]);if(R>=i){T=!0;break}if(v.score=v.score*byt(i,u,R),v.score<=s)break}v.suppressBeginIndex=d.length,T||(v.score===y?(d.push(w),h.push(v.score)):v.score>s&&pyt(c,v,fye))}const p=d.length,f=e-p;a&&f>0&&(d.push(...new Array(f).fill(0)),h.push(...new Array(f).fill(0)));const g={selectedIndices:d};return o&&(g.selectedScores=h),l&&(g.validOutputs=p),g}function gyt(t,n,e){const i=t.subarray(4*n,4*n+4),s=t.subarray(4*e,4*e+4),r=Math.min(i[0],i[2]),o=Math.min(i[1],i[3]),a=Math.max(i[0],i[2]),l=Math.max(i[1],i[3]),c=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),d=Math.max(s[0],s[2]),h=Math.max(s[1],s[3]),p=(a-r)*(l-o),f=(d-c)*(h-u);if(p<=0||f<=0)return 0;const g=Math.max(r,c),v=Math.max(o,u),y=Math.min(a,d),w=Math.min(l,h),x=Math.max(y-g,0)*Math.max(w-v,0);return x/(p+f-x)}function byt(t,n,e){const i=Math.exp(n*e*e);return e<=t?i:0}function fye(t,n){return t.score-n.score||t.score===n.score&&n.boxIndex-t.boxIndex}function Xj(){return Xj=z(function*(t,n,e,i=.5,s=Number.NEGATIVE_INFINITY){const r=G(t,"boxes","nonMaxSuppressionAsync"),o=G(n,"scores","nonMaxSuppressionAsync"),a=tC(r,o,e,i,s);e=a.maxOutputSize,i=a.iouThreshold,s=a.scoreThreshold;const l=yield Promise.all([r.data(),o.data()]),c=l[0],u=l[1],{selectedIndices:d}=Hj(c,u,e,i,s);return r!==t&&r.dispose(),o!==n&&o.dispose(),il(d,"int32")}),Xj.apply(this,arguments)}const Cyt=re({nonMaxSuppressionWithScore_:function wyt(t,n,e,i=.5,s=Number.NEGATIVE_INFINITY,r=0){const o=G(t,"boxes","nonMaxSuppression"),a=G(n,"scores","nonMaxSuppression"),l=tC(o,a,e,i,s,r),d=ue.runKernel(UU,{boxes:o,scores:a},{maxOutputSize:e=l.maxOutputSize,iouThreshold:i=l.iouThreshold,scoreThreshold:s=l.scoreThreshold,softNmsSigma:r=l.softNmsSigma});return{selectedIndices:d[0],selectedScores:d[1]}}});function Yj(){return Yj=z(function*(t,n,e,i=.5,s=Number.NEGATIVE_INFINITY,r=0){const o=G(t,"boxes","nonMaxSuppressionAsync"),a=G(n,"scores","nonMaxSuppressionAsync"),l=tC(o,a,e,i,s,r);e=l.maxOutputSize,i=l.iouThreshold,s=l.scoreThreshold,r=l.softNmsSigma;const c=yield Promise.all([o.data(),a.data()]),u=c[0],d=c[1],{selectedIndices:h,selectedScores:p}=qj(u,d,e,i,s,r);return o!==t&&o.dispose(),a!==n&&a.dispose(),{selectedIndices:il(h,"int32"),selectedScores:il(p)}}),Yj.apply(this,arguments)}const Tyt=re({nonMaxSuppressionPadded_:function Eyt(t,n,e,i=.5,s=Number.NEGATIVE_INFINITY,r=!1){const o=G(t,"boxes","nonMaxSuppression"),a=G(n,"scores","nonMaxSuppression"),l=tC(o,a,e,i,s,null),f=ue.runKernel(zU,{boxes:o,scores:a},{maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:r});return{selectedIndices:f[0],validOutputs:f[1]}}});function Zj(){return Zj=z(function*(t,n,e,i=.5,s=Number.NEGATIVE_INFINITY,r=!1){const o=G(t,"boxes","nonMaxSuppressionAsync"),a=G(n,"scores","nonMaxSuppressionAsync"),l=tC(o,a,e,i,s,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[h,p]=yield Promise.all([o.data(),a.data()]),{selectedIndices:f,validOutputs:g}=Wj(h,p,c,u,d,r);return o!==t&&o.dispose(),a!==n&&a.dispose(),{selectedIndices:il(f,"int32"),validOutputs:En(g,"int32")}}),Zj.apply(this,arguments)}const mye=re({resizeBilinear_:function Dyt(t,n,e=!1,i=!1){const s=G(t,"images","resizeBilinear");U(3===s.rank||4===s.rank,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),U(2===n.length,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${n}.`),U(!1===i||!1===e,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let r=s,o=!1;3===s.rank&&(o=!0,r=ge(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const[]=n,c=ue.runKernel(nL,{images:r},{alignCorners:e,halfPixelCenters:i,size:n});return o?ge(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),_ye=re({resizeNearestNeighbor_:function Ayt(t,n,e=!1,i=!1){const s=G(t,"images","resizeNearestNeighbor");U(3===s.rank||4===s.rank,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),U(2===n.length,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${n}.`),U("float32"===s.dtype||"int32"===s.dtype,()=>"`images` must have `int32` or `float32` as dtype"),U(!1===i||!1===e,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let r=s,o=!1;3===s.rank&&(o=!0,r=ge(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const[]=n,c=ue.runKernel(tL,{images:r},{alignCorners:e,halfPixelCenters:i,size:n});return o?ge(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),Oyt=re({threshold_:function Myt(t,n="binary",e=!1,i=.5){const s=G(t,"image","threshold"),l=s.shape[0]*s.shape[1];let u,d,h,p,c=pe(il([i]),255);if(U(3===s.rank,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),U(3===s.shape[2]||1===s.shape[2],()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),U("int32"===s.dtype||"float32"===s.dtype,()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),U("otsu"===n||"binary"===n,()=>`Method must be binary or otsu, but was ${n}`),3===s.shape[2]){[u,d,h]=kc(s,[1,1,1],-1);const v=pe(u,.2989),y=pe(d,.587),w=pe(h,.114);p=lt(lt(v,y),w)}else p=t;"otsu"===n&&(c=function Nyt(t,n){let r,o,a,l,c,u,e=il([-1]),i=il([0]),s=il([0]);for(let d=0;d<t.size-1;d++){r=is(t,0,d+1),o=is(t,d+1),c=pn(un(r),n),u=pn(un(o),n);const h=un(pe(r,Jw(0,r.size)));a=pn(h,un(r));const p=jw(o.shape,r.size),f=lt(Jw(0,o.size),p),g=pe(o,f);l=pn(un(g),un(o));const v=Xt(a,l),y=Xt(a,l),w=pe(c,u);s=pe(pe(w,v),y);const x=Tc(s,i);i=tl(x,s,i),e=tl(x,il([d]),e)}return e}(xve(Rt(Ej(p),"int32"),hu([]),256),l));const f=e?Rv(p,c):Tc(p,c);return Rt(pe(f,255),"int32")}}),Fyt=re({transform_:function Ryt(t,n,e="nearest",i="constant",s=0,r){const o=G(t,"image","transform","float32"),a=G(n,"transforms","transform","float32");return U(4===o.rank,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),U(2===a.rank&&(a.shape[0]===o.shape[0]||1===a.shape[0])&&8===a.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),U(null==r||2===r.length,()=>`Error in transform: outputShape must be [height, width] or null, but got ${r}.`),ue.runKernel(uG,{image:o,transforms:a},{interpolation:e,fillMode:i,fillValue:s,outputShape:r})}}),Pyt=re({bandPart_:function Lyt(t,n,e){const i=G(t,"a","bandPart");U(i.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${i.rank}.`);const s=i.shape,[r,o]=i.shape.slice(-2);let a,l;"number"==typeof n?(U(n%1==0,()=>`bandPart(): numLower must be an integer, got ${n}.`),U(n<=r,()=>`bandPart(): numLower (${n}) must not be greater than the number of rows (${r}).`),a=G(n<0?r:n,"numLower","bandPart")):(U("int32"===n.dtype,()=>"bandPart(): numLower's dtype must be an int32."),a=tl(v2(n,0),r,Fv(n,r))),"number"==typeof e?(U(e%1==0,()=>`bandPart(): numUpper must be an integer, got ${e}.`),U(e<=o,()=>`bandPart(): numUpper (${e}) must not be greater than the number of columns (${o}).`),l=G(e<0?o:e,"numUpper","bandPart")):(U("int32"===e.dtype,()=>"bandPart(): numUpper's dtype must be an int32."),l=tl(v2(e,0),o,Fv(e,o)));const c=ge(Jw(0,r,1,"int32"),[-1,1]),u=Jw(0,o,1,"int32"),d=Xt(c,u),h=bp(Rv(d,a),B_(d,kr(l))),p=Zo([r,o],i.dtype);return ge(Kl(sd(ge(i,[-1,r,o])).map(f=>tl(h,f,p))),s)}}),Byt=re({gramSchmidt_:function $yt(t){let n;if(Array.isArray(t)){n=!1,U(null!=t&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let r=1;r<t.length;++r)U(t[r].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[r].shape[0]} vs. ${s})`)}else n=!0,t=kc(t,t.shape[0],0).map(s=>Pv(s,[0]));U(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const e=[],i=t;for(let s=0;s<t.length;++s)e.push(ue.tidy(()=>{let r=i[s];if(s>0)for(let o=0;o<s;++o){const a=pe(un(pe(e[o],r)),e[o]);r=Xt(r,a)}return pn(r,_2(r,"euclidean"))}));return n?Kl(e,0):e}});function gye(t,n=!1){return ue.tidy(()=>{U(2===t.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const e=t.shape[0],i=t.shape[1];let s=_j(e),r=Lf(t);const o=$v([[1]],[1,1]);let a=Lf(o);const l=e>=i?i:e;for(let c=0;c<l;++c){const u=r,d=a,h=s;[a,r,s]=ue.tidy(()=>{const p=is(r,[c,c],[e-c,1]),f=_2(p),g=is(r,[c,c],[1,1]),v=tl(Tc(g,0),$v([[-1]]),$v([[1]])),y=Xt(g,pe(v,f)),w=pn(p,y);a=1===w.shape[0]?Lf(o):mo([o,is(w,[1,0],[w.shape[0]-1,w.shape[1]])],0);const x=kr(pn(Hi(v,y),f)),T=is(r,[c,0],[e-c,i]),k=pe(x,a),R=ss(a);if(0===c)r=Xt(T,Hi(k,Hi(R,T)));else{const F=Xt(T,Hi(k,Hi(R,T)));r=mo([is(r,[0,0],[c,i]),F],0)}const N=ss(k),D=is(s,[0,c],[e,s.shape[1]-c]);if(0===c)s=Xt(D,Hi(Hi(D,a),N));else{const F=Xt(D,Hi(Hi(D,a),N));s=mo([is(s,[0,0],[e,c]),F],1)}return[a,r,s]}),ki([u,d,h])}return!n&&e>i&&(s=is(s,[0,0],[e,i]),r=is(r,[0,0],[i,i])),[s,r]})}const zyt=re({qr_:function Vyt(t,n=!1){if(U(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),2===t.rank)return gye(t,n);{const e=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),i=sd(ge(t,[e,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],r=[];return i.forEach(l=>{const[c,u]=gye(l,n);s.push(c),r.push(u)}),[ge(Kl(s,0),t.shape),ge(Kl(r,0),t.shape)]}}});var Dc=function(t){return t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",t}(Dc||{});const Uf=re({computeWeightedLoss_:function Uyt(t,n,e=Dc.SUM_BY_NONZERO_WEIGHTS){const i=G(t,"losses","computeWeightedLoss");let s=null;null!=n&&(s=G(n,"weights","computeWeightedLoss"));const r=null==s?i:pe(i,s);if(e===Dc.NONE)return r;if(e===Dc.SUM)return un(r);if(e===Dc.MEAN){if(null==s)return to(r);{const o=i.size/s.size,a=pn(un(r),un(s));return o>1?pn(a,En(o)):a}}if(e===Dc.SUM_BY_NONZERO_WEIGHTS){if(null==s)return pn(un(r),En(i.size));{const o=pe(s,Ic(i.shape)),a=Rt(un(Zw(o,En(0))),"float32");return pn(un(r),a)}}throw Error(`Unknown reduction: ${e}`)}}),jyt=re({absoluteDifference_:function Gyt(t,n,e,i=Dc.SUM_BY_NONZERO_WEIGHTS){const s=G(t,"labels","absoluteDifference"),r=G(n,"predictions","absoluteDifference");let o=null;null!=e&&(o=G(e,"weights","absoluteDifference")),Cc(s.shape,r.shape,"Error in absoluteDifference: ");const a=Xo(Xt(s,r));return Uf(a,o,i)}}),Wyt=re({cosineDistance_:function Hyt(t,n,e,i,s=Dc.SUM_BY_NONZERO_WEIGHTS){const r=G(t,"labels","cosineDistance"),o=G(n,"predictions","cosineDistance");let a=null;null!=i&&(a=G(i,"weights","cosineDistance")),Cc(r.shape,o.shape,"Error in cosineDistance: ");const l=En(1),c=Xt(l,un(pe(r,o),e,!0));return Uf(c,a,s)}}),Kyt=re({hingeLoss_:function qyt(t,n,e,i=Dc.SUM_BY_NONZERO_WEIGHTS){let s=G(t,"labels","hingeLoss");const r=G(n,"predictions","hingeLoss");let o=null;null!=e&&(o=G(e,"weights","hingeLoss")),Cc(s.shape,r.shape,"Error in hingeLoss: ");const a=En(1);s=Xt(pe(En(2),s),a);const l=vp(Xt(a,pe(s,r)));return Uf(l,o,i)}}),Yyt=re({huberLoss_:function Xyt(t,n,e,i=1,s=Dc.SUM_BY_NONZERO_WEIGHTS){const r=G(t,"labels","huberLoss"),o=G(n,"predictions","huberLoss");let a=null;null!=e&&(a=G(e,"weights","huberLoss")),Cc(r.shape,o.shape,"Error in huberLoss: ");const l=En(i),c=Xo(Xt(o,r)),u=Fv(c,l),d=Xt(c,u),h=lt(pe(En(.5),lr(u)),pe(l,d));return Uf(h,a,s)}}),Qyt=re({logLoss_:function Zyt(t,n,e,i=1e-7,s=Dc.SUM_BY_NONZERO_WEIGHTS){const r=G(t,"labels","logLoss"),o=G(n,"predictions","logLoss");let a=null;null!=e&&(a=G(e,"weights","logLoss")),Cc(r.shape,o.shape,"Error in logLoss: ");const l=En(1),c=En(i),u=kr(pe(r,pu(lt(o,c)))),d=pe(Xt(l,r),pu(lt(Xt(l,o),c))),h=Xt(u,d);return Uf(h,a,s)}}),e1t=re({meanSquaredError_:function Jyt(t,n,e,i=Dc.SUM_BY_NONZERO_WEIGHTS){const s=G(t,"labels","meanSquaredError"),r=G(n,"predictions","meanSquaredError");let o=null;null!=e&&(o=G(e,"weights","meanSquaredError")),Cc(s.shape,r.shape,"Error in meanSquaredError: ");const a=Rj(s,r);return Uf(a,o,i)}}),i1t=re({sigmoidCrossEntropy_:function n1t(t,n,e,i=0,s=Dc.SUM_BY_NONZERO_WEIGHTS){let r=G(t,"multiClassLabels","sigmoidCrossEntropy");const o=G(n,"logits","sigmoidCrossEntropy");let a=null;if(null!=e&&(a=G(e,"weights","sigmoidCrossEntropy")),Cc(r.shape,o.shape,"Error in sigmoidCrossEntropy: "),i>0){const c=En(i),u=En(1),d=En(.5);r=lt(pe(r,Xt(u,c)),pe(d,c))}const l=function t1t(t,n){const e=G(t,"labels","sigmoidCrossEntropyWithLogits"),i=G(n,"logits","sigmoidCrossEntropyWithLogits");Cc(e.shape,i.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=vp(i),r=pe(i,e),o=RL(Ec(kr(Xo(i))));return lt(Xt(s,r),o)}(r,o);return Uf(l,a,s)}}),o1t=re({softmaxCrossEntropy_:function r1t(t,n,e,i=0,s=Dc.SUM_BY_NONZERO_WEIGHTS){let r=G(t,"onehotLabels","softmaxCrossEntropy");const o=G(n,"logits","softmaxCrossEntropy");let a=null;if(null!=e&&(a=G(e,"weights","softmaxCrossEntropy")),Cc(r.shape,o.shape,"Error in softmaxCrossEntropy: "),i>0){const c=En(i),u=En(1),d=En(r.shape[1]);r=lt(pe(r,Xt(u,c)),pn(c,d))}const l=function s1t(t,n,e=-1){if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${n.rank} and dim was ${e}`);return Pf((s,r,o)=>{const l=FL(r,[e],!0),c=Xt(Rt(r,"float32"),l);o([s,c]);const u=kr(pe(c,s));return{value:un(u,[e]),gradFunc:(p,f)=>{const[g,v]=f,y=_o(p.shape,[e]);return[pe(ge(p,y),Xt(Rt(g,"float32"),Ec(v))),pe(ge(p,y),Xt(Ec(v),Rt(g,"float32")))]}}})(t,n)}(r,o);return Uf(l,a,s)}}),l1t=re({sparseFillEmptyRows_:function a1t(t,n,e,i){const s=G(t,"indices","sparseFillEmptyRows","int32"),r=G(n,"values","sparseFillEmptyRows"),o=G(e,"denseShape","sparseFillEmptyRows","int32"),a=G(i,"defaultValue","sparseFillEmptyRows",r.dtype);if(2!==s.rank)throw new Error(`Indices should be Tensor2D but received shape\n        ${s.shape}`);if(1!==r.rank)throw new Error(`Values should be Tensor1D but received shape ${r.shape}`);if(1!==o.rank)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(0!==a.rank)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const c=ue.runKernel(JU,{indices:s,values:r,denseShape:o,defaultValue:a});return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}}),u1t=re({sparseReshape_:function c1t(t,n,e){const i=G(t,"inputIndices","sparseReshape","int32"),s=G(n,"inputShape","sparseReshape","int32"),r=G(e,"newShape","sparseReshape","int32");if(2!==i.rank)throw new Error(`Input indices should be Tensor2D but received shape\n        ${i.shape}`);if(1!==s.rank)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(1!==r.rank)throw new Error(`New shape should be Tensor1D but received shape ${r.shape}`);const a=ue.runKernel(eG,{inputIndices:i,inputShape:s,newShape:r});return{outputIndices:a[0],outputShape:a[1]}}}),h1t=re({sparseSegmentMean_:function d1t(t,n,e){const i=G(t,"data","sparseSegmentMean"),s=G(n,"indices","sparseSegmentMean","int32"),r=G(e,"segmentIds","sparseSegmentMean","int32");if(i.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.rank)throw new Error(`Indices should be Tensor1D but received shape\n          ${s.shape}`);if(1!==r.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n          ${r.shape}`);return ue.runKernel(tG,{data:i,indices:s,segmentIds:r})}}),f1t=re({sparseSegmentSum_:function p1t(t,n,e){const i=G(t,"data","sparseSegmentSum"),s=G(n,"indices","sparseSegmentSum","int32"),r=G(e,"segmentIds","sparseSegmentSum","int32");if(i.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.rank)throw new Error(`Indices should be Tensor1D but received shape\n         ${s.shape}`);if(1!==r.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n         ${r.shape}`);return ue.runKernel(nG,{data:i,indices:s,segmentIds:r})}}),_1t=re({stringNGrams_:function m1t(t,n,e,i,s,r,o,a){const l=G(t,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error(`Data must be a vector, saw: ${l.shape}`);const c=G(n,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");const h=ue.runKernel(oG,{data:l,dataSplits:c},{separator:e,nGramWidths:i,leftPad:s,rightPad:r,padWidth:o,preserveShortSequences:a});return{nGrams:h[0],nGramsSplits:h[1]}}}),b1t=re({stringSplit_:function g1t(t,n,e=!0){const i=G(t,"input","stringSplit","string"),s=G(n,"delimiter","stringSplit","string");if(1!==i.rank)throw new Error(`Input should be Tensor1D but received shape ${i.shape}`);if(0!==s.rank)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const a=ue.runKernel(aG,{input:i,delimiter:s},{skipEmpty:e});return{indices:a[0],values:a[1],shape:a[2]}}}),y1t=re({stringToHashBucketFast_:function v1t(t,n){const e=G(t,"input","stringToHashBucketFast","string"),i={numBuckets:n};if(n<=0)throw new Error("Number of buckets must be at least 1");return ue.runKernel(lG,{input:e},i)}}),C1t=re({staticRegexReplace_:function w1t(t,n,e,i=!0){const s=G(t,"input","staticRegexReplace","string");return ue.runKernel(uL,{x:s},{pattern:n,rewrite:e,replaceGlobal:i})}}),S1t={fft:HL,ifft:C2,rfft:WL,irfft:Oj},x1t={hammingWindow:Yvt,hannWindow:hye,frame:pye,stft:eyt},rd={flipLeftRight:syt,grayscaleToRGB:oyt,resizeNearestNeighbor:_ye,resizeBilinear:mye,rgbToGrayscale:lyt,rotateWithOffset:uyt,cropAndResize:nyt,nonMaxSuppression:hyt,nonMaxSuppressionAsync:function vyt(t,n,e){return Xj.apply(this,arguments)},nonMaxSuppressionWithScore:Cyt,nonMaxSuppressionWithScoreAsync:function Syt(t,n,e){return Yj.apply(this,arguments)},nonMaxSuppressionPadded:Tyt,nonMaxSuppressionPaddedAsync:function Iyt(t,n,e){return Zj.apply(this,arguments)},threshold:Oyt,transform:Fyt},bye={bandPart:Pyt,gramSchmidt:Byt,qr:zyt},E1t={absoluteDifference:jyt,computeWeightedLoss:Uf,cosineDistance:Wyt,hingeLoss:Kyt,huberLoss:Yyt,logLoss:Qyt,meanSquaredError:e1t,sigmoidCrossEntropy:i1t,softmaxCrossEntropy:o1t},T1t={sparseFillEmptyRows:l1t,sparseReshape:u1t,sparseSegmentMean:h1t,sparseSegmentSum:f1t},I1t={stringNGrams:_1t,stringSplit:b1t,stringToHashBucketFast:y1t,staticRegexReplace:C1t},nC=class k1t{static sgd(n){return new jG(n)}static momentum(n,e,i=!1){return new Ube(n,e,i)}static rmsprop(n,e=.9,i=0,s=null,r=!1){return new Gbe(n,e,i,s,r)}static adam(n=.001,e=.9,i=.999,s=null){return new Vbe(n,e,i,s)}static adadelta(n=.001,e=.95,i=null){return new $be(n,e,i)}static adamax(n=.002,e=.9,i=.999,s=null,r=0){return new zbe(n,e,i,s,r)}static adagrad(n,e=.1){return new Bbe(n,e)}},D1t=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function vye(){return new Promise(t=>D1t(()=>t()))}function Qj(t,n){const e=t[0].length;t.forEach((s,r)=>{U(s.length===e,()=>`Error in concat${e}D: rank of tensors[${r}] must be the same as the rank of the rest (${e})`)}),U(n>=0&&n<e,()=>`Error in concat${e}D: axis must be between 0 and ${e-1}.`);const i=t[0];t.forEach((s,r)=>{for(let o=0;o<e;o++)U(o===n||s[o]===i[o],()=>`Error in concat${e}D: Shape of tensors[${r}] (${s}) does not match the shape of the rest (${i}) along the non-concatenated axis ${r}.`)})}function yp(t,n){const e=t[0].slice();for(let i=1;i<t.length;i++)e[n]+=t[i][n];return e}var wp=function(t){return t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS",t}(wp||{});function yye(t,n,e){let i=new Array;if(null==e&&null==n)return i;if(null==n)for(;i.length<t+e.length;)i.push(-1);else i=n.slice();if(null==e)return i;if(t+e.length!==i.length)throw new Error(`rt input.shape and shape=${n} are incompatible: rt input.rank = ${t+e.length}, but shape.rank = ${i.length}`);for(let s=1;s<e.length;++s){const r=e[s],o=i[i.length-e.length+s],a=i[o];if(r>=0)if(a>=0){if(a!==r)throw new Error(`rt input.shape and shape=${n} are incompatible: rt input.shape[${s+t}] = ${r} but shape[${s+t}] = ${a}`)}else i[o]=r}return i}function wye(t){const n={FIRST_DIM_SIZE:wp.FIRST_DIM_SIZE,VALUE_ROWIDS:wp.VALUE_ROWIDS,ROW_LENGTHS:wp.ROW_LENGTHS,ROW_SPLITS:wp.ROW_SPLITS,ROW_LIMITS:wp.ROW_LIMITS,ROW_STARTS:wp.ROW_STARTS},e=[];for(const i of t){if(!(i in n))break;e.push(n[i])}return e}function Cye(t){return 0===t.length?0:t[0]===wp.FIRST_DIM_SIZE?t.length-1:t.length}function Sye(t,n){if(null==t||null==n)return;const e=t.length,i=n.length;if(e>=i)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${n}, are incompatible: defaultValue.rank = ${e} must be less than ragged tensor input flatValues.rank = ${i})`);for(let s=0;s<Math.min(e,i-1);++s){const r=t[s],o=n[s+1];if(r>=0&&o>=0&&1!==r&&r!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${n} are incompatible: defaultValue.shape[${s-t.length}] = ${r} but ragged tensor input.flatValues.shape[${s-t.length}] = ${o}`)}}const Jj=30;function ZL(t){return t<=Jj?t:nU(t,Math.floor(Math.sqrt(t)))}function eH(t,n,e){return[e*("number"==typeof t?t:t[0]),n*("number"==typeof t?t:t[1])]}function S2(t,n,e,i=!0){let s=[];if(i)s=s.concat(n.slice(0)),s.push(t[0]/e),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const r=n.length;for(let o=0;o<r;++o)s=s.concat([t[o+1]/n[o],n[o]]);s=s.concat(t.slice(r+1))}return s}function x2(t,n,e=!0){const i=[];if(e){i.push(n);for(let s=n+1;s<t;++s)s<=2*n?(i.push(s),i.push(s-(n+1))):i.push(s)}else{const s=[],r=[];for(let o=1;o<t;++o)o>=2*n+1||o%2==1?r.push(o):s.push(o);i.push(...s),i.push(0),i.push(...r)}return i}function E2(t,n,e,i=!0){const s=[];s.push(i?t[0]/e:t[0]*e);for(let r=1;r<t.length;++r)s.push(r<=n.length?i?n[r-1]*t[r]:t[r]/n[r-1]:t[r]);return s}function tH(t,n){const e=[0];for(let i=0;i<n;++i)e.push(t[i][0]);return e}function nH(t,n,e){const i=t.slice(0,1);for(let s=0;s<e;++s)i.push(t[s+1]-n[s][0]-n[s][1]);return i}function iH(t,n){const e=t.shape.length,i=n.shape.length;if(e<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${e}.`);if(i<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${i}.`);if("int32"!==n.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${n.dtype}.`);if(n.shape[i-1]>e)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${n.shape[i-1]} vs. ${e}`);if(0===Le(t.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=n.shape,r=s[s.length-1];let o=1;for(let d=0;d<s.length-1;++d)o*=s[d];const a=t.shape,l=s.slice();l.pop();let c=1;for(let d=r;d<e;++d)c*=a[d],l.push(a[d]);const u=[...xn(t.shape).map(d=>d/c),1].slice(0,r);return[l,o,c,u]}const QL=1.7580993408473768,JL=1.0507009873554805,sH=.3275911,rH=.254829592,oH=-.284496736,aH=1.421413741,lH=-1.453152027,cH=1.061405429;function Gf(t,n){if(t.length!==n.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${n.length}.`);const e=new Float32Array(2*t.length);for(let i=0;i<e.length;i+=2)e[i]=t[i/2],e[i+1]=n[i/2];return e}function xye(t){const n=new Float32Array(t.length/2),e=new Float32Array(t.length/2);for(let i=0;i<t.length;i+=2)n[i/2]=t[i],e[i/2]=t[i+1];return{real:n,imag:e}}function Eye(t){const n=Math.ceil(t.length/4),e=new Float32Array(n),i=new Float32Array(n);for(let s=0;s<t.length;s+=4)e[Math.floor(s/4)]=t[s],i[Math.floor(s/4)]=t[s+1];return{real:e,imag:i}}function Tye(t){const n=Math.floor(t.length/4),e=new Float32Array(n),i=new Float32Array(n);for(let s=2;s<t.length;s+=4)e[Math.floor(s/4)]=t[s],i[Math.floor(s/4)]=t[s+1];return{real:e,imag:i}}function uH(t,n){return{real:t[2*n],imag:t[2*n+1]}}function Iye(t,n,e,i){t[2*i]=n,t[2*i+1]=e}function kye(t,n){const e=new Float32Array(t/2),i=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const r=(n?2:-2)*Math.PI*(s/t);e[s]=Math.cos(r),i[s]=Math.sin(r)}return{real:e,imag:i}}function Dye(t,n,e){const i=(e?2:-2)*Math.PI*(t/n);return{real:Math.cos(i),imag:Math.sin(i)}}const dH="->",A1t=/->/g,Aye=",",Mye="...";function hH(t,n){const e=((t=t.replace(/\s/g,"")).length-t.replace(A1t,"").length)/dH.length;if(e<1)throw new Error("Equations without an arrow are not supported.");if(e>1)throw new Error(`Equation must contain exactly one arrow ("${dH}").`);const[i,s]=t.split(dH);U(-1===i.indexOf(Mye),()=>`The ellipsis notation ("${Mye}") is not supported yet.`);const r=i.split(Aye),o=r.length;if(n!==o)throw new Error(`Expected ${o} input tensors, received ${n}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let h=0;h<s.length;++h){const p=s[h];if(!r.some(f=>-1!==f.indexOf(p)))throw new Error(`Output subscripts contain the label ${p} not present in the input subscripts.`);-1===a.indexOf(p)&&a.push(p)}for(let h=0;h<i.length;++h){const p=i[h];-1===a.indexOf(p)&&p!==Aye&&a.push(p)}const l=new Array(r.length);for(let h=0;h<o;++h){if(new Set(r[h].split("")).size!==r[h].length)throw new Error(`Found duplicate axes in input component ${r[h]}. Support for duplicate axes in input is not implemented yet.`);l[h]=[];for(let p=0;p<r[h].length;++p)l[h].push(a.indexOf(r[h][p]))}const c=a.length,d=[];for(let h=s.length;h<c;++h)d.push(h);return{allDims:a,summedDims:d,idDims:l}}function pH(t,n){let e=new Array(t);e.fill(-1);for(let s=0;s<n.length;++s)e[n[s]]=s;const i=[];for(let s=0;s<t;++s)-1===e[s]&&i.push(s);return e=e.filter(s=>-1!==s),{permutationIndices:e,expandDims:i}}function fH(t,n,e){const i=new Array(t);for(let s=0;s<e.length;++s){const r=e[s].shape;for(let o=0;o<n[s].length;++o)void 0===i[n[s][o]]?i[n[s][o]]=r[o]:U(i[n[s][o]]===r[o],()=>`Expected dimension ${i[n[s][o]]} at axis ${o} of input shaped ${JSON.stringify(r)}, but got dimension ${r[o]}`)}}function mH(t,n){const e=t,i=[];let s=0;0===t.length&&e.push(-1),s=t.length+1;for(let o=0;o<s;++o)i.push([]);const r=[];for(let o=0;o<e.length;++o){const l=M1t(n,e[o]);for(const c of l)-1===r.indexOf(c)&&(i[o].push(c),r.push(c))}return{path:e,steps:i}}function _H(t){return t.every((n,e)=>n===e)}function M1t(t,n){const e=[];for(let i=0;i<t.length;++i)(0===t[i].length||-1!==t[i].indexOf(n)||-1===n)&&e.push(i);return e}function gH(t,n,e=0){let i=[];if("number"==typeof n)U(t.shape[e]%n==0,()=>"Number of splits must evenly divide the axis."),i=new Array(n).fill(t.shape[e]/n);else{U(n.reduce((o,a)=>(-1===a&&(o+=1),o),0)<=1,()=>"There should be only one negative value in split array.");const r=n.indexOf(-1);if(-1!==r){const o=n.reduce((a,l)=>l>0?a+l:a);n[r]=t.shape[e]-o}U(t.shape[e]===n.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),i=n}return i}function Nye(t){return`Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ${t}`}function Oye(t,n){return`indices(${t}, 0) is invalid: ${n} < 0`}function Rye(t,n,e){return`indices(${t}, 0) is invalid: ${n} >= ${e}`}function Fye(t,n){return`only one output dimension may be -1, not both ${t} and ${n}`}function Lye(t,n){return`size ${t} must be non-negative, not ${n}`}function Pye(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function $ye(t,n){return`Input to reshape is a SparseTensor with ${Le(t)}\n  dense values, but the requested shape requires a multiple of ${Le(n)}. inputShape=${t} outputShape= ${n}`}function Bye(t,n){return`Input to reshape is a tensor with ${Le(t)} dense values, but the requested shape has ${Le(n)}. inputShape=${t} outputShape=${n}`}function bH(){return"segment ids must be >= 0"}function Vye(){return"segment ids are not increasing"}function zye(t,n){return`Segment id ${t} out of range [0, ${n}), possibly because segmentIds input is not sorted.`}function Uye(t,n,e){return`Bad: indices[${t}] == ${n} out of range [0, ${e})`}function Gye(t,n){let i,e=!1;for(t<=Jj?(i=t,e=!0):i=nU(t,Math.floor(Math.sqrt(t)));!e;)i>n||i===t?e=!0:i=nU(t,i+1);return i}function jye(t,n,e){const i=[],s=t.length;for(let r=0;r<s;r++)i.push(r!==n?t[r]:e);return i}function vH(t,n,e,i){const s=n.shape.length,r=t.shape.length;if(0!==i&&(i<-s||i>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${i}`);if(i<0&&(i+=s),i>r)throw new Error(`batchDims (${i}) must be less than rank(x) (\n    ${r}).`);if(e<i)throw new Error(`batchDims (${i}) must be less than or equal to axis (${e}).`);for(let d=0;d<i;++d)if(t.shape[d]!==n.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${n.shape[d]}.`);const o=t.shape[e],a=[];let l=1,c=1,u=1;for(let d=0;d<i;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=i;d<e;d++)a.push(t.shape[d]),c*=t.shape[d];for(let d=i;d<s;d++)a.push(n.shape[d]);for(let d=e+1;d<r;d++)a.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:o,outputShape:a}}function jf(t){try{return t.map(n=>I_(n))}catch(n){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${n}`)}}function Hye(t){return t.map(n=>T_(n))}!function nmt(){for(const t of tmt)pt(t)}();const Wye={kernelName:dF,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pe(t,eC(Rt(e,"float32"),-1))}}},N1t={kernelName:lI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>{const i=lr(Rt(e,"float32")),s=Fa(Xt(En(1),i));return kr(pn(t,s))}}}},O1t={kernelName:cI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>{const i=Fa(Xt(lr(Rt(e,"float32")),1));return pn(t,i)}}}},R1t={kernelName:Fw,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n,s=mi(e.shape,i.shape);return{a:()=>{let a=t;const l=Yo(e.shape,s);return l.length>0&&(a=un(a,l)),ge(a,e.shape)},b:()=>{let a=t;const l=Yo(i.shape,s);return l.length>0&&(a=un(a,l)),ge(a,i.shape)}}}},F1t={kernelName:hF,saveAllInputs:!0,gradFunc:(t,n)=>{const e={};return n.forEach((i,s)=>{e[s]=()=>t.clone()}),e}},L1t={kernelName:pF,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>ns(e)}}},P1t={kernelName:fF,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>ns(e)}}},$1t={kernelName:uI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pn(t,Fa(Xt(En(1),lr(Rt(e,"float32")))))}}},B1t={kernelName:dI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>{const i=Fa(lt(En(1),lr(Rt(e,"float32"))));return pn(t,i)}}}},V1t={kernelName:fI,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n,s=mi(e.shape,i.shape);return{a:()=>{const a=lt(lr(e),lr(i));let l=pe(t,pn(i,a));const c=Yo(e.shape,s);return c.length>0&&(l=un(l,c)),ge(l,e.shape)},b:()=>{const a=lt(lr(e),lr(i));let l=kr(pe(t,pn(e,a)));const c=Yo(i.shape,s);return c.length>0&&(l=un(l,c)),ge(l,i.shape)}}}},z1t={kernelName:hI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pn(t,lt(lr(Rt(e,"float32")),1))}}},U1t={kernelName:pI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pn(t,Xt(En(1),lr(Rt(e,"float32"))))}}},j1t=re({avgPool3dGrad_:function G1t(t,n,e,i,s,r){const o=G(t,"dy","avgPool3dGrad"),a=G(n,"input","avgPool3dGrad");let l=o,c=a,u=!1;4===a.rank&&(u=!0,l=ge(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=ge(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),U(5===l.rank,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),U(5===c.rank,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),wl("avgPool3dGrad",s,r);const p=ue.runKernel(cU,{dy:l,input:c},{filterSize:e,strides:i,pad:s,dimRoundingMode:r});return u?ge(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),H1t={kernelName:_F,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,{filterSize:s,strides:r,pad:o,dimRoundingMode:a}=e;return{x:()=>j1t(t,i,s,r,o,a)}}},q1t=re({avgPoolGrad_:function W1t(t,n,e,i,s){const r=G(t,"dy","avgPoolGrad"),o=G(n,"input","avgPoolGrad");U(o.rank===r.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${r.rank})`);let a=o,l=r,c=!1;3===o.rank&&(c=!0,a=ge(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=ge(r,[1,r.shape[0],r.shape[1],r.shape[2]])),U(4===l.rank,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),U(4===a.rank,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const h=ue.runKernel(lU,{dy:l,input:a},{filterSize:e,strides:i,pad:s});return c?ge(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),K1t={kernelName:mF,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,{filterSize:s,strides:r,pad:o}=e;return{x:()=>q1t(t,i,s,r,o)}}},X1t={kernelName:gF,inputsToSave:["a","b"],gradFunc:(t,n,e)=>{const[i,s]=n,{transposeA:r,transposeB:o}=e;return r||o?!r&&o?{a:()=>Hi(t,s,!1,!1),b:()=>Hi(t,i,!0,!1)}:r&&!o?{a:()=>Hi(s,t,!1,!0),b:()=>Hi(i,t,!1,!1)}:{a:()=>Hi(s,t,!0,!0),b:()=>Hi(t,i,!0,!0)}:{a:()=>Hi(t,s,!1,!0),b:()=>Hi(i,t,!0,!1)}}},Y1t={kernelName:bF,gradFunc:(t,n,e)=>{const{blockShape:i,crops:s}=e;return{x:()=>VL(t,i,s)}}},Z1t={kernelName:"BroadcastTo",gradFunc:(t,n,e)=>{const s=e.inputShape,r=e.shape,o=Array.from(r);for(let l=s.length-1;l>=0;l--)if(s[l]===r[l])o[l]=1;else if(1!==s[l])throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${r}].`);const a=[];for(let l=0;l<o.length;l++)o[l]>1&&a.push(l);return{x:()=>un(t,a,!0)}}},Q1t={kernelName:mI,gradFunc:t=>({x:()=>t.clone()})},J1t={kernelName:_I,gradFunc:t=>({x:()=>ns(t)})},e0t={kernelName:gI,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,{clipValueMin:s,clipValueMax:r}=e;return{x:()=>tl(bp(B_(i,s),Rv(i,r)),t,ns(t))}}},t0t={kernelName:yF,inputsToSave:["x"],gradFunc:Wye.gradFunc},n0t={kernelName:wF,saveAllInputs:!0,gradFunc:(t,n,e)=>{const i=n.map(l=>l.shape),{axis:s}=e,r=zi(s,n[0].shape)[0],o=i.map(l=>l[r]);return kc(t,o,r).map(l=>()=>l)}},i0t={kernelName:CF,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{const[i,s]=n,{dilations:r,strides:o,pad:a,dataFormat:l}=e;return U(L_(r),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`),{x:()=>cj(i.shape,t,s,o,a,l),filter:()=>Gj(i,t,s.shape,o,a,l)}}},s0t={kernelName:SF,inputsToSave:["dy","filter"],gradFunc:(t,n,e)=>{const[i,s]=n,{strides:r,pad:o,dataFormat:a,dimRoundingMode:l}=e;return{dy:()=>P_(t,s,r,o,a,1,l),filter:()=>Gj(t,i,s.shape,r,o,a,l)}}},o0t=re({conv3DBackpropFilter_:function r0t(t,n,e,i,s){let r=t;4===t.rank&&(r=ge(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=n;return 4===o.rank&&(o=ge(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]])),U(5===r.rank,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${r.shape}.`),U(5===o.rank,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),U(5===e.length,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${e}.`),U(r.shape[4]===e[3],()=>`Error in conv3dDerFilter: depth of input ${r.shape[4]}) must match input depth in filter (${e[3]}.`),U(o.shape[4]===e[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${e[4]}).`),ue.runKernel(fU,{x:r,dy:o},{strides:i,pad:s,filterShape:e})}}),a0t={kernelName:xF,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{const{dilations:i,strides:s,pad:r}=e;U(L_(i),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const[o,a]=n;return{x:()=>Mve(o.shape,t,a,s,r),filter:()=>o0t(o,t,a.shape,s,r)}}},l0t={kernelName:bI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pe(kr(Aj(Rt(e,"float32"))),t)}}},c0t={kernelName:vI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pe(Mj(Rt(e,"float32")),t)}}},u0t={kernelName:EF,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,{axis:s,exclusive:r,reverse:o}=e;return{x:()=>{const a=Gr([s],i.rank);let l=hj(t,s,r,!o);return null!=a&&(l=ss(l,a)),l}}}},d0t={kernelName:TF,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{const{dilations:i,strides:s,pad:r,dimRoundingMode:o}=e,a=i??[1,1];U(L_(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,c]=n;return U(4===l.rank,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),U(4===c.rank,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),U(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),U(La(s,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${a}'.`),wl("depthwiseConv2d",r,o),{x:()=>dye(l.shape,t,c,s,r,a,o),filter:()=>uye(l,t,c.shape,s,r,a,o)}}},h0t={kernelName:IF,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{const[i,s]=n,r={x:i,filter:s,dy:t},o={x:i,filter:s,dy:t};return{x:()=>ue.runKernel(SU,r,e),filter:()=>ue.runKernel(xU,o,e)}}},p0t={kernelName:wI,outputsToSave:[!0],gradFunc:(t,n)=>{const[e]=n,i={dy:t,y:e};return{x:()=>ue.runKernel(IU,i)}}},f0t={kernelName:CI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n,i=pe(Ec(kr(lr(e))),2/Math.sqrt(Math.PI));return{x:()=>pe(t,i)}}},m0t={kernelName:SI,outputsToSave:[!0],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pe(t,e)}}},_0t={kernelName:DF,inputsToSave:["input"],gradFunc:(t,n)=>{const[e]=n;return{input:()=>ge(t,e.shape)}}},g0t={kernelName:xI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pe(t,Ec(e))}}},b0t={kernelName:EI,gradFunc:t=>({x:()=>ns(t)})},v0t={kernelName:TI,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n,s=mi(e.shape,i.shape);return{a:()=>{const a=pn(t,Rt(i,"float32")),l=Yo(e.shape,s);return l.length>0?ge(un(a,l),e.shape):a},b:()=>{let a=pe(t,Rt(e,"float32"));const l=Yo(i.shape,s);l.length>0&&(a=ge(un(a,l),i.shape));const c=lr(i);return kr(pn(a,Rt(c,"float32")))}}}},y0t={kernelName:AF,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,n,e)=>{const{varianceEpsilon:i}=e,[s,r,o,a]=n,l=a??En(1),c=Yo(r.shape,s.shape),u=[];if(1===r.rank){for(let T=0;T<s.shape.length-1;++T)u.push(s.shape[T]);u.push(1)}const d=Xt(s,r),h=pe(t,l),p=Tj(lt(o,En(i))),f=pe(pe(pe(p,p),p),En(-.5));return{x:()=>ge(pe(pe(t,1===r.rank?nd(ge(p,[1,1,1,r.shape[0]]),u):p),l),s.shape),mean:()=>{let T=pe(pe(p,En(-1)),h);return 1===r.rank&&(T=un(T,c)),ge(T,r.shape)},variance:()=>{let T=pe(pe(f,d),h);return 1===r.rank&&(T=un(T,c)),ge(T,r.shape)},scale:()=>{const T=pe(d,p);let k=pe(t,T);return 1===r.rank&&(k=un(k,c)),ge(k,r.shape)},offset:()=>{let T=t;return 1===r.rank&&(T=un(T,c)),ge(T,r.shape)}}}},w0t={kernelName:MF,inputsToSave:["x","indices"],gradFunc:(t,n,e)=>{const[i,s]=n,{axis:r,batchDims:o}=e,a=zi(r,i.shape)[0],l=(c,u,d)=>()=>{const h=c.shape,p=u.size,f=h.slice(0,a),g=f.length,v=h.slice(r,h.length).slice(1),y=v.length,w=qye(0,g),x=qye(g+1,g+1+y),T=Kye([f,[p],v]),k=ge(d,T),R=ge(u,[p]),N=Kye([[g],w,x]),D=ss(k,N);let F=Pj(D,R,c.shape[a]);const $=$_(N);return F=ss(F,$),F};if(1===o){const u=i.split(i.shape[0],0);return{x:()=>Kl(u.map((p,f)=>l(p,s.slice(f,1),t.slice(f,1))())).reshape(i.shape),indices:()=>s}}return{x:l(i,s,t),indices:()=>s}}};function qye(t,n){const e=[];for(let i=t;i<n;++i)e.push(i);return e}function Kye(t){const n=[];for(let e=0;e<t.length;++e)for(let i=0;i<t[e].length;++i)n.push(t[e][i]);return n}const C0t={kernelName:II,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n;return{a:()=>ns(e),b:()=>ns(i)}}},S0t={kernelName:kI,gradFunc:t=>({x:()=>Rt(t,"float32")})},x0t={kernelName:DI,gradFunc:t=>({x:()=>ns(t)})},E0t={kernelName:AI,gradFunc:t=>({x:()=>ns(t)})},T0t={kernelName:MI,gradFunc:t=>({x:()=>ns(t)})},I0t={kernelName:OF,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,{alpha:s}=e,r=Tc(i,0);return{x:()=>tl(r,t,pe(t,s))}}},k0t={kernelName:OI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pn(t,lt(e,1))}}},D0t={kernelName:NI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pn(t,Rt(e,"float32"))}}},A0t={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:(t,n,e)=>{const[i]=n,{axis:s}=e;return{logits:()=>{const o=Ec(i);return Xt(t,pe(un(t,s,!0),o))}}}},N0t=re({localResponseNormalizationBackprop_:function M0t(t,n,e,i=5,s=1,r=1,o=.5){return ue.runKernel(FU,{x:t,y:n,dy:e},{depthRadius:i,bias:s,alpha:r,beta:o})}}),O0t={kernelName:BF,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{const[i,s]=n,{depthRadius:r,bias:o,alpha:a,beta:l}=e;return{x:()=>N0t(i,s,t,r,o,a,l)}}};function Xye(t,n,e,i){return n.rank<e.rank&&(n=ge(n,_o(n.shape,i))),t.rank<e.rank&&(t=ge(t,_o(t.shape,i))),{x:()=>pe(t,Rt(ah(e,n),t.dtype))}}const Yye={kernelName:VF,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{const i=e,{reductionIndices:s}=i,r=n[0],l=Xye(t,n[1],r,zi(s,r.shape));return{x:()=>l.x()}}},R0t={kernelName:RI,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n;return{a:()=>pe(t,Rt(B_(e,i),"float32")),b:()=>pe(t,Rt(v2(e,i),"float32"))}}},L0t=re({maxPool3dGrad_:function F0t(t,n,e,i,s,r,o){const a=G(t,"dy","maxPool3dGrad"),l=G(n,"input","maxPool3dGrad"),c=G(e,"output","maxPool3dGrad");let u=a,d=l,h=c,p=!1;4===l.rank&&(p=!0,u=ge(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=ge(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=ge(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),U(5===u.rank,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),U(5===d.rank,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),U(5===h.rank,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`),wl("maxPool3dGrad",r,o);const v=ue.runKernel(PU,{dy:u,input:d,output:h},{filterSize:i,strides:s,pad:r,dimRoundingMode:o});return p?ge(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}}),P0t={kernelName:UF,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{const[i,s]=n,{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=e;return{x:()=>L0t(t,i,s,r,o,a,l)}}},B0t=re({maxPoolGrad_:function $0t(t,n,e,i,s,r,o){const a=G(t,"dy","maxPoolGrad"),l=G(n,"input","maxPoolGrad"),c=G(e,"output","maxPoolGrad");return U(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),U(4===a.rank,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),U(4===l.rank,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),wl("maxPoolGrad",r,o),ue.runKernel(LU,{dy:a,input:l,output:c},{filterSize:i,strides:s,pad:r,dimRoundingMode:o})}}),V0t={kernelName:zF,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{const[i,s]=n,{filterSize:r,strides:o,pad:a}=e;return{x:()=>B0t(t,i,s,r,o,a)}}},z0t={kernelName:GF,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,{axis:s}=e,r=zi(s,i.shape),l=Le(Sa(i.shape,r)[1]);return{x:()=>{const u=i.shape.slice();r.forEach(p=>{u[p]=1});const d=ge(t,u);return pn(pe(d,Ic(i.shape,"float32")),l)}}}},U0t={kernelName:jF,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{const i=e,{axis:s}=i,[r,o]=n,l=Xye(t,o,r,zi(s,r.shape));return{x:()=>l.x()}}},G0t={kernelName:FI,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n;return{a:()=>pe(t,Rt(Rv(e,i),"float32")),b:()=>pe(t,Rt(Tc(e,i),"float32"))}}},j0t={kernelName:HF,inputsToSave:["x"],gradFunc:(t,n,e)=>{const i=n[0],{paddings:s}=e,r=s.map(o=>o[0]);return{x:()=>is(t,r,i.shape)}}},H0t={kernelName:LI,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n,s=mi(e.shape,i.shape);return{a:()=>{const a=Yo(e.shape,s);return a.length>0?ge(un(t,a),e.shape):t},b:()=>{const a=pe(t,kr(g2(pn(e,i)))),l=Yo(i.shape,s);return l.length>0?ge(un(a,l),i.shape):a}}}},W0t={kernelName:PI,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n,s=mi(e.shape,i.shape);return{a:()=>{const a=pe(t,Rt(i,"float32")),l=Yo(e.shape,s);return l.length>0?ge(un(a,l),e.shape):a},b:()=>{const a=pe(t,Rt(e,"float32")),l=Yo(i.shape,s);return l.length>0?ge(un(a,l),i.shape):a}}}},q0t={kernelName:WF,gradFunc:t=>({x:()=>kr(t)})},X0t={kernelName:KF,gradFunc:t=>({x:()=>ns(t)})},Y0t={kernelName:YF,saveAllInputs:!0,gradFunc:(t,n,e)=>{const{axis:i}=e;return sd(t,i).map(r=>()=>r)}},Zye={kernelName:ZF,inputsToSave:["x"],gradFunc:(t,n,e)=>{const i=n[0],{paddings:s}=e,r=s.map(o=>o[0]);return{x:()=>is(t,r,i.shape)}}},Z0t={kernelName:$I,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,n)=>{const[e,i,s]=n,r=e,o=i,a=mi(r.shape,o.shape);return{a:()=>{const u=Rt(o,"float32");let d=pe(t,pe(u,$f(r,Xt(u,En(1)))));const h=Yo(r.shape,a);return h.length>0&&(d=un(d,h)),ge(d,r.shape)},b:()=>{const u=Tc(r,0),d=tl(u,pu(r),ns(r));let h=pe(t,pe(s,d));const p=Yo(o.shape,a);return p.length>0&&(h=un(h,p)),ge(h,o.shape)}}}},Q0t={kernelName:QF,inputsToSave:["x","alpha"],gradFunc:(t,n)=>{const[e,i]=n,s=Tc(e,0);return{x:()=>tl(s,t,pe(t,i)),alpha:()=>{let r=tl(s,ns(t),pe(t,e));const o=Yo(i.shape,t.shape);return o.length>0&&(r=un(r,o)),ge(r,i.shape)}}}};const twt={kernelName:JF,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,{axis:s}=e;let r=[];return r=null==s?i.shape.map((o,a)=>a):"number"==typeof s?[s]:s,{x:()=>function ewt(t,n,e){const i=t.shape.length,s=i-e.length,r=Gr(e,i);let o=t;null!=r&&(o=ss(t,r));const a=o.shape.slice(),c=a.splice(i-e.length,e.length).reduce((h,p)=>h*p,1);a.push(c);let d=function J0t(t,n,e){const i=t.shape.slice();i[e]=1;const s=ge(n,i),r=ML(t,e,!0,!1),o=ML(t,e,!0,!0),a=pe(r,o);return pe(s,a)}(o.reshape(a),n,s);if(d=d.reshape(o.shape),null!=r){const h=$_(r);d=ss(d,h)}return d}(i,t,r)}}},nwt={kernelName:yI,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n,s=mi(e.shape,i.shape);return{a:()=>{const a=pn(t,Rt(i,"float32")),l=Yo(e.shape,s);return l.length>0?ge(un(a,l),e.shape):a},b:()=>{let a=pe(t,Rt(e,"float32"));const l=Yo(i.shape,s);l.length>0&&(a=ge(un(a,l),i.shape));const c=lr(i);return kr(pn(a,Rt(c,"float32")))}}}},iwt={kernelName:BI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pn(t,kr(lr(e)))}}},swt={kernelName:zI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n,i=pe(Rv(e,6),eC(e));return{x:()=>pe(t,Rt(i,"float32"))}}},rwt={kernelName:VI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pe(t,Rt(eC(e),"float32"))}}},owt={kernelName:eL,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>ge(t,e.shape)}}},awt={kernelName:nL,inputsToSave:["images"],gradFunc:(t,n,e)=>{const[i]=n,s={dy:t,images:i};return{images:()=>ue.runKernel(XU,s,e)}}},lwt={kernelName:tL,inputsToSave:["images"],gradFunc:(t,n,e)=>{const[i]=n,s={dy:t,images:i};return{images:()=>ue.runKernel(KU,s,e)}}},cwt={kernelName:iL,gradFunc:(t,n,e)=>{const{dims:i}=e,s=zi(i,t.shape);return{x:()=>id(t,s)}}},uwt={kernelName:UI,gradFunc:t=>({x:()=>ns(t)})},dwt={kernelName:GI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>kr(pn(t,pe($f(e,1.5),2)))}}},hwt={kernelName:sL,inputsToSave:["condition"],gradFunc:(t,n)=>{const[e]=n;return{condition:()=>Rt(ns(e),"float32"),t:()=>pe(t,Rt(e,t.dtype)),e:()=>pe(t,Rt(LL(e),t.dtype))}}},pwt={kernelName:jI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>{const i=Tc(e,En(0)),s=En(QL),r=En(JL),o=pe(t,r),a=pe(pe(t,s),Ec(Rt(e,"float32")));return tl(i,o,a)}}}},fwt={kernelName:KI,outputsToSave:[!0],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pe(t,pe(e,Xt(En(1),e)))}}},mwt={kernelName:qI,gradFunc:t=>({x:()=>ns(t)})},_wt={kernelName:HI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pe(AL(Rt(e,"float32")),t)}}},gwt={kernelName:WI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pe(dj(Rt(e,"float32")),t)}}},bwt={kernelName:rL,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,{begin:s,size:r}=e,o=i.shape,[a,l]=TL(i,s,r),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],o[u]-a[u]-l[u]]);return{x:()=>V_(t,c)}}},vwt={kernelName:cL,outputsToSave:[!0],gradFunc:(t,n,e)=>{const[i]=n,{dim:s}=e,o=pe(t,i);return{logits:()=>Xt(o,pe(un(o,[s],!0),i))}}},ywt={kernelName:XI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pe(t,gp(e))}}},Qye={kernelName:aL,gradFunc:(t,n,e)=>{const{blockShape:i,paddings:s}=e;return{x:()=>DL(t,i,s)}}},Jye={kernelName:lL,gradFunc:(t,n,e)=>{const{axis:i}=e;return{x:()=>mo(t,i)}}},wwt={kernelName:YI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pn(t,pe(Fa(Rt(e,"float32")),2))}}},Cwt={kernelName:sG,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pe(t,pe(Rt(e,"float32"),2))}}},Swt={kernelName:ZI,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n,s=En(2);return{a:()=>pe(t,pe(s,Xt(e,i))),b:()=>pe(t,pe(s,Xt(i,e)))}}},xwt={kernelName:n2,gradFunc:t=>({x:()=>ns(t)})},Ewt={kernelName:QI,inputsToSave:["a","b"],gradFunc:(t,n)=>{const[e,i]=n,s=mi(e.shape,i.shape);return{a:()=>{let a=t;const l=Yo(e.shape,s);return l.length>0&&(a=un(a,l)),ge(a,e.shape)},b:()=>{let a=t;const l=Yo(i.shape,s);return l.length>0&&(a=un(a,l)),ge(kr(a),i.shape)}}}},Twt={kernelName:oL,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,s=i.shape.slice(),{axis:r}=e;zi(r,i.shape).forEach(c=>{s[c]=1});const a=ge(t,s),l=pe(a,Ic(i.shape,"float32"));return{x:()=>l}}},Iwt={kernelName:JI,inputsToSave:["x"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pn(t,lr(AL(e)))}}},kwt={kernelName:e2,outputsToSave:[!0],gradFunc:(t,n)=>{const[e]=n;return{x:()=>pe(Xt(En(1),lr(e)),t)}}},Dwt={kernelName:t2,inputsToSave:["x"],gradFunc:(t,n,e)=>{const[i]=n,{reps:s}=e;return{x:()=>{let o=ns(i);if(1===i.rank)for(let a=0;a<s[0];++a)o=lt(o,is(t,[a*i.shape[0]],[i.shape[0]]));else if(2===i.rank)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)o=lt(o,is(t,[a*i.shape[0],l*i.shape[1]],[i.shape[0],i.shape[1]]));else if(3===i.rank)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)o=lt(o,is(t,[a*i.shape[0],l*i.shape[1],c*i.shape[2]],[i.shape[0],i.shape[1],i.shape[2]]));else{if(4!==i.rank)throw new Error(`Gradient for tile operation is not implemented for rank-${i.rank} tensors yet.`);for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)for(let u=0;u<s[3];++u)o=lt(o,is(t,[a*i.shape[0],l*i.shape[1],c*i.shape[2],u*i.shape[3]],[i.shape[0],i.shape[1],i.shape[2],i.shape[3]]))}return o}}}},Awt={kernelName:Lw,gradFunc:(t,n,e)=>{const i=e,{perm:s}=i,r=$_(s);return{x:()=>ss(t,r)}}},Mwt={kernelName:dL,gradFunc:(t,n,e)=>{const i=e,{axis:s}=i;return{value:()=>Kl(t,s)}}},Nwt={kernelName:hL,inputsToSave:["segmentIds"],gradFunc:(t,n)=>{const[e]=n;return{x:()=>function Owt(t,n){const e=Bf(n,ns(n)),i=b2(t,e);let s=B_(n,En(0,"int32"));const r=i.rank-s.rank;for(let a=0;a<r;++a)s=nl(s,a+1);s=bp(s,Ic(i.shape,"bool"));const o=ns(i);return tl(s,i,o)}(t,e)}}},Rwt={kernelName:pL,gradFunc:t=>({x:()=>ns(t)})},Fwt=[Wye,N1t,O1t,R1t,F1t,L1t,P1t,$1t,B1t,V1t,z1t,U1t,H1t,K1t,X1t,Y1t,Z1t,Q1t,J1t,e0t,t0t,n0t,s0t,i0t,a0t,l0t,c0t,u0t,d0t,h0t,nwt,p0t,f0t,m0t,_0t,g0t,v0t,b0t,y0t,w0t,C0t,S0t,x0t,E0t,T0t,I0t,k0t,D0t,A0t,O0t,Yye,Yye,R0t,P0t,V0t,z0t,U0t,G0t,j0t,H0t,W0t,q0t,{kernelName:XF,inputsToSave:["indices"],gradFunc:(t,n)=>{const e=n[0];return{indices:()=>Zo(e.shape,"float32")}}},X0t,Y0t,Zye,Zye,Z0t,Q0t,twt,iwt,swt,rwt,owt,awt,lwt,cwt,uwt,dwt,hwt,pwt,fwt,mwt,_wt,gwt,bwt,vwt,ywt,Qye,Qye,Jye,Jye,wwt,Swt,Cwt,xwt,Ewt,Twt,Iwt,kwt,Dwt,Awt,Mwt,Nwt,Rwt];for(const t of Fwt)Opt(t);$e().prototype.abs=function(){return this.throwIfDisposed(),Xo(this)},$e().prototype.acos=function(){return this.throwIfDisposed(),hve(this)},$e().prototype.acosh=function(){return this.throwIfDisposed(),pve(this)},$e().prototype.add=function(t){return this.throwIfDisposed(),lt(this,t)},$e().prototype.all=function(t,n){return this.throwIfDisposed(),rj(this,t,n)},$e().prototype.any=function(t,n){return this.throwIfDisposed(),IL(this,t,n)},$e().prototype.argMax=function(t){return this.throwIfDisposed(),Ww(this,t)},$e().prototype.argMin=function(t){return this.throwIfDisposed(),fve(this,t)},$e().prototype.asScalar=function(){return this.throwIfDisposed(),U(1===this.size,()=>"The array must have only 1 element."),ge(this,[])},$e().prototype.asType=function(t){return this.throwIfDisposed(),Rt(this,t)},$e().prototype.as1D=function(){return this.throwIfDisposed(),ge(this,[this.size])},$e().prototype.as2D=function(t,n){return this.throwIfDisposed(),ge(this,[t,n])},$e().prototype.as3D=function(t,n,e){return this.throwIfDisposed(),ge(this,[t,n,e])},$e().prototype.as4D=function(t,n,e,i){return this.throwIfDisposed(),ge(this,[t,n,e,i])},$e().prototype.as5D=function(t,n,e,i,s){return this.throwIfDisposed(),ge(this,[t,n,e,i,s])},$e().prototype.asin=function(){return this.throwIfDisposed(),mve(this)},$e().prototype.asinh=function(){return this.throwIfDisposed(),_ve(this)},$e().prototype.atan=function(){return this.throwIfDisposed(),gve(this)},$e().prototype.atan2=function(t){return this.throwIfDisposed(),bve(this,t)},$e().prototype.atanh=function(){return this.throwIfDisposed(),vve(this)},$e().prototype.avgPool=function(t,n,e,i){return this.throwIfDisposed(),kL(this,t,n,e,i)},$e().prototype.batchToSpaceND=function(t,n){return this.throwIfDisposed(),DL(this,t,n)},$e().prototype.batchNorm=function(t,n,e,i,s){return this.throwIfDisposed(),h2(this,t,n,e,i,s)},$e().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Kw(this,t)},$e().prototype.cast=function(t){return this.throwIfDisposed(),Rt(this,t)},$e().prototype.ceil=function(){return this.throwIfDisposed(),Eve(this)},$e().prototype.clipByValue=function(t,n){return this.throwIfDisposed(),xc(this,t,n)},$e().prototype.concat=function(t,n){return this.throwIfDisposed(),t instanceof js&&(t=[t]),mo([this,...t],n)},$e().prototype.conv1d=function(t,n,e,i,s,r){return this.throwIfDisposed(),lj(this,t,n,e,i,s,r)},$e().prototype.conv2dTranspose=function(t,n,e,i,s){return this.throwIfDisposed(),uj(this,t,n,e,i,s)},$e().prototype.conv2d=function(t,n,e,i,s,r){return this.throwIfDisposed(),P_(this,t,n,e,i,s,r)},$e().prototype.cos=function(){return this.throwIfDisposed(),AL(this)},$e().prototype.cosh=function(){return this.throwIfDisposed(),dj(this)},$e().prototype.cumprod=function(t,n,e){return this.throwIfDisposed(),ML(this,t,n,e)},$e().prototype.cumsum=function(t,n,e){return this.throwIfDisposed(),hj(this,t,n,e)},$e().prototype.depthToSpace=function(t,n){return this.throwIfDisposed(),Ove(this,t,n)},$e().prototype.depthwiseConv2d=function(t,n,e,i,s,r){return this.throwIfDisposed(),p2(this,t,n,e,i,s,r)},$e().prototype.dilation2d=function(t,n,e,i,s){return this.throwIfDisposed(),Rve(this,t,n,e,i,s)},$e().prototype.divNoNan=function(t){return this.throwIfDisposed(),Fve(this,t)},$e().prototype.div=function(t){return this.throwIfDisposed(),pn(this,t)},$e().prototype.dot=function(t){return this.throwIfDisposed(),Lve(this,t)},$e().prototype.elu=function(){return this.throwIfDisposed(),f2(this)},$e().prototype.equal=function(t){return this.throwIfDisposed(),ah(this,t)},$e().prototype.erf=function(){return this.throwIfDisposed(),fj(this)},$e().prototype.euclideanNorm=function(t,n){return this.throwIfDisposed(),Bve(this,t,n)},$e().prototype.exp=function(){return this.throwIfDisposed(),Ec(this)},$e().prototype.expandDims=function(t){return this.throwIfDisposed(),nl(this,t)},$e().prototype.expm1=function(){return this.throwIfDisposed(),Vve(this)},$e().prototype.fft=function(){return this.throwIfDisposed(),HL(this)},$e().prototype.flatten=function(){return this.throwIfDisposed(),ge(this,[this.size])},$e().prototype.floor=function(){return this.throwIfDisposed(),g2(this)},$e().prototype.floorDiv=function(t){return this.throwIfDisposed(),UG(this,t)},$e().prototype.gather=function(t,n,e){return this.throwIfDisposed(),b2(this,t,n,e)},$e().prototype.greaterEqual=function(t){return this.throwIfDisposed(),B_(this,t)},$e().prototype.greater=function(t){return this.throwIfDisposed(),Tc(this,t)},$e().prototype.ifft=function(){return this.throwIfDisposed(),C2(this)},$e().prototype.irfft=function(){return this.throwIfDisposed(),Oj(this)},$e().prototype.isFinite=function(){return this.throwIfDisposed(),zve(this)},$e().prototype.isInf=function(){return this.throwIfDisposed(),Uve(this)},$e().prototype.isNaN=function(){return this.throwIfDisposed(),Gve(this)},$e().prototype.leakyRelu=function(t){return this.throwIfDisposed(),OL(this,t)},$e().prototype.lessEqual=function(t){return this.throwIfDisposed(),Rv(this,t)},$e().prototype.less=function(t){return this.throwIfDisposed(),v2(this,t)},$e().prototype.localResponseNormalization=function(t,n,e,i){return this.throwIfDisposed(),jve(this,t,n,e,i)},$e().prototype.logSigmoid=function(){return this.throwIfDisposed(),Hve(this)},$e().prototype.logSoftmax=function(t){return this.throwIfDisposed(),gj(this,t)},$e().prototype.logSumExp=function(t,n){return this.throwIfDisposed(),FL(this,t,n)},$e().prototype.log=function(){return this.throwIfDisposed(),pu(this)},$e().prototype.log1p=function(){return this.throwIfDisposed(),RL(this)},$e().prototype.logicalAnd=function(t){return this.throwIfDisposed(),bp(this,t)},$e().prototype.logicalNot=function(){return this.throwIfDisposed(),LL(this)},$e().prototype.logicalOr=function(t){return this.throwIfDisposed(),bj(this,t)},$e().prototype.logicalXor=function(t){return this.throwIfDisposed(),Wve(this,t)},$e().prototype.matMul=function(t,n,e){return this.throwIfDisposed(),Hi(this,t,n,e)},$e().prototype.maxPool=function(t,n,e,i){return this.throwIfDisposed(),$L(this,t,n,e,i)},$e().prototype.max=function(t,n){return this.throwIfDisposed(),td(this,t,n)},$e().prototype.maximum=function(t){return this.throwIfDisposed(),Bf(this,t)},$e().prototype.mean=function(t,n){return this.throwIfDisposed(),to(this,t,n)},$e().prototype.min=function(t,n){return this.throwIfDisposed(),m2(this,t,n)},$e().prototype.minimum=function(t){return this.throwIfDisposed(),Fv(this,t)},$e().prototype.mirrorPad=function(t,n){return this.throwIfDisposed(),Kve(this,t,n)},$e().prototype.mod=function(t){return this.throwIfDisposed(),Xve(this,t)},$e().prototype.mul=function(t){return this.throwIfDisposed(),pe(this,t)},$e().prototype.neg=function(){return this.throwIfDisposed(),kr(this)},$e().prototype.norm=function(t,n,e){return this.throwIfDisposed(),_2(this,t,n,e)},$e().prototype.notEqual=function(t){return this.throwIfDisposed(),Zw(this,t)},$e().prototype.oneHot=function(t,n=1,e=0){return this.throwIfDisposed(),yj(this,t,n,e)},$e().prototype.onesLike=function(){return this.throwIfDisposed(),fu(this)},$e().prototype.pad=function(t,n){return this.throwIfDisposed(),V_(this,t,n)},$e().prototype.pool=function(t,n,e,i,s,r){return this.throwIfDisposed(),Yve(this,t,n,e,i,s,r)},$e().prototype.pow=function(t){return this.throwIfDisposed(),$f(this,t)},$e().prototype.prelu=function(t){return this.throwIfDisposed(),zL(this,t)},$e().prototype.prod=function(t,n){return this.throwIfDisposed(),Zve(this,t,n)},$e().prototype.reciprocal=function(){return this.throwIfDisposed(),Qve(this)},$e().prototype.relu=function(){return this.throwIfDisposed(),vp(this)},$e().prototype.relu6=function(){return this.throwIfDisposed(),xj(this)},$e().prototype.reshapeAs=function(t){return this.throwIfDisposed(),ge(this,t.shape)},$e().prototype.reshape=function(t){return this.throwIfDisposed(),ge(this,t)},$e().prototype.resizeBilinear=function(t,n,e){return this.throwIfDisposed(),mye(this,t,n,e)},$e().prototype.resizeNearestNeighbor=function(t,n,e){return this.throwIfDisposed(),_ye(this,t,n,e)},$e().prototype.reverse=function(t){return this.throwIfDisposed(),id(this,t)},$e().prototype.rfft=function(){return this.throwIfDisposed(),WL(this)},$e().prototype.round=function(){return this.throwIfDisposed(),Ej(this)},$e().prototype.rsqrt=function(){return this.throwIfDisposed(),Tj(this)},$e().prototype.selu=function(){return this.throwIfDisposed(),Ij(this)},$e().prototype.separableConv2d=function(t,n,e,i,s,r){return this.throwIfDisposed(),kj(this,t,n,e,i,s,r)},$e().prototype.sigmoid=function(){return this.throwIfDisposed(),gp(this)},$e().prototype.sign=function(){return this.throwIfDisposed(),Jve(this)},$e().prototype.sin=function(){return this.throwIfDisposed(),Aj(this)},$e().prototype.sinh=function(){return this.throwIfDisposed(),Mj(this)},$e().prototype.slice=function(t,n){return this.throwIfDisposed(),is(this,t,n)},$e().prototype.softmax=function(t){return this.throwIfDisposed(),jL(this,t)},$e().prototype.softplus=function(){return this.throwIfDisposed(),Yw(this)},$e().prototype.spaceToBatchND=function(t,n){return this.throwIfDisposed(),VL(this,t,n)},$e().prototype.split=function(t,n){return this.throwIfDisposed(),kc(this,t,n)},$e().prototype.sqrt=function(){return this.throwIfDisposed(),Fa(this)},$e().prototype.square=function(){return this.throwIfDisposed(),lr(this)},$e().prototype.squaredDifference=function(t){return this.throwIfDisposed(),Rj(this,t)},$e().prototype.squeeze=function(t){return this.throwIfDisposed(),Pv(this,t)},$e().prototype.stack=function(t,n){this.throwIfDisposed();const e=t instanceof js?[this,t]:[this,...t];return Kl(e,n)},$e().prototype.step=function(t){return this.throwIfDisposed(),eC(this,t)},$e().prototype.stridedSlice=function(t,n,e,i,s,r,o,a){return this.throwIfDisposed(),eye(this,t,n,e,i,s,r,o,a)},$e().prototype.sub=function(t){return this.throwIfDisposed(),Xt(this,t)},$e().prototype.sum=function(t,n){return this.throwIfDisposed(),un(this,t,n)},$e().prototype.tan=function(){return this.throwIfDisposed(),tye(this)},$e().prototype.tanh=function(){return this.throwIfDisposed(),Ov(this)},$e().prototype.tile=function(t){return this.throwIfDisposed(),nd(this,t)},$e().prototype.toBool=function(){return this.throwIfDisposed(),Rt(this,"bool")},$e().prototype.toFloat=function(){return this.throwIfDisposed(),Rt(this,"float32")},$e().prototype.toInt=function(){return this.throwIfDisposed(),Rt(this,"int32")},$e().prototype.topk=function(t,n){return this.throwIfDisposed(),iye(this,t,n)},$e().prototype.transpose=function(t){return this.throwIfDisposed(),ss(this,t)},$e().prototype.unique=function(t){return this.throwIfDisposed(),sye(this,t)},$e().prototype.unsortedSegmentSum=function(t,n){return this.throwIfDisposed(),Pj(this,t,n)},$e().prototype.unstack=function(t){return this.throwIfDisposed(),sd(this,t)},$e().prototype.where=function(t,n){return this.throwIfDisposed(),tl(t,this,n)},$e().prototype.zerosLike=function(){return this.throwIfDisposed(),ns(this)};class Cp extends Error{constructor(n){super(n),Object.setPrototypeOf(this,Cp.prototype)}}class od extends Error{constructor(n){super(n),Object.setPrototypeOf(this,od.prototype)}}class ve extends Error{constructor(n){super(n),Object.setPrototypeOf(this,ve.prototype)}}class bi extends Error{constructor(n){super(n),Object.setPrototypeOf(this,bi.prototype)}}class yH extends Error{constructor(n){super(n),Object.setPrototypeOf(this,yH.prototype)}}Error;class t1e{constructor(n){this.maxEntries=n||100,this.cache=new Map}get(n){let e;return this.cache.has(n)&&(e=this.cache.get(n),this.cache.delete(n),this.cache.set(n,e)),e}put(n,e){if(this.cache.has(n))this.cache.delete(n);else if(this.cache.size>=this.maxEntries){const i=this.cache.keys().next().value;this.cache.delete(i)}this.cache.set(n,e)}getMaxEntries(){return this.maxEntries}setMaxEntries(n){if(n<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${n}.`);if(this.maxEntries>n)for(let e=0;e<this.maxEntries-n;e++){const i=this.cache.keys().next().value;this.cache.delete(i)}this.maxEntries=n}}function Vv(t,n){if(Array.isArray(t)){let e=[];for(let i=0;i<n;i++)e=e.concat(t);return e}{const e=new Array(n);return e.fill(t),e}}function mu(t,n){if(!t)throw new yH(n)}function n1e(t,n){let e=0;for(const i of t)i===n&&e++;return e}function Xl(t){return 1===t.length?t[0]:t}function $s(t){return Array.isArray(t)?t:[t]}function Hf(t){const e=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==e[0]?e:"private"+e}function zv(t){return t.length<=1||-1===t.indexOf("_")?t:t.replace(/[_]+(\w|$)/g,(n,e)=>e.toUpperCase())}let ad={};function wH(t){if(null==t)return null;const n={};return n.className=t.getClassName(),n.config=t.getConfig(),n}function CH(t){if(null!=t&&"object"==typeof t)if(Array.isArray(t))t.forEach(n=>CH(n));else{const n=Object.keys(t);for(const e of n){const i=t[e];null!=i&&"object"==typeof i&&(Array.isArray(i)||"ndarray"!==i.type||"number"!=typeof i.value?CH(i):t[e]=i.value)}}}function T2(t,n={},e={},i="object",s=!1){if("string"==typeof t){let o;if(t in e)o=e[t];else if(t in ad)o=ad[t];else if(o=n[t],null==o)throw new ve(`Unknown ${i}: ${t}. This may be due to one of the following reasons:\n1. The ${i} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${i} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}{const r=t;if(null==r.className||null==r.config)throw new ve(`${i}: Improper config format: ${JSON.stringify(r)}.\n'className' and 'config' must set.`);const o=r.className;let a,l;if(o in e?[a,l]=e[o]:o in ad?[a,l]=ad.className:o in n&&([a,l]=n[o]),null==a)throw new ve(`Unknown ${i}: ${o}. This may be due to one of the following reasons:\n1. The ${i} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${i} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=l){const c={};for(const p of Object.keys(ad))c[p]=ad[p];for(const p of Object.keys(e))c[p]=e[p];r.config.customObjects=c;const d=Object.assign({},ad);for(const p of Object.keys(e))ad[p]=e[p];CH(r.config);const h=l(a,r.config,e,s);return ad=Object.assign({},d),h}{const c=Object.assign({},ad);for(const d of Object.keys(e))ad[d]=e[d];const u=new a(r.config);return ad=Object.assign({},c),u}}}function e3(t,n){return-1*function Lwt(t,n){return t<n?-1:t>n?1:0}(t,n)}function z_(t){if(null==t)return t;const n=[];for(const e of t)-1===n.indexOf(e)&&n.push(e);return n}function Pwt(t){if(null==t)throw new ve(`Invalid value in obj: ${JSON.stringify(t)}`);for(const n in t)if(t.hasOwnProperty(n))return!1;return!0}function Uv(t,n,e){if(null!=e&&t.indexOf(e)<0)throw new ve(`${e} is not a valid ${n}.  Valid values are ${t} or null/undefined.`)}function SH(t,n,e=0,i=1/0){return mu(e>=0),mu(i>=e),Array.isArray(t)&&t.length>=e&&t.length<=i&&t.every(s=>typeof s===n)}function xa(t,n){Array.isArray(t)?(U(t.length>0,()=>`${n} is unexpectedly an empty array.`),t.forEach((e,i)=>xa(e,`element ${i+1} of ${n}`))):U(Number.isInteger(t)&&t>0,()=>`Expected ${n} to be a positive integer, but got ${i1e(t)}.`)}function i1e(t){return null===t?"null":Array.isArray(t)?"["+t.map(n=>i1e(n)).join(",")+"]":"string"==typeof t?`"${t}"`:`${t}`}function s1e(t){return"relu"===t?"relu":"linear"===t?"linear":"elu"===t?"elu":null}let Bwt=0;function r1e(){return Bwt++}const t3={};function n3(t=""){return t in t3||(t3[t]=0),t3[t]+=1,t+t3[t].toString()}const Vwt=["channelsFirst","channelsLast"],zwt=["nearest","bilinear"],Uwt=["valid","same","causal"],Gwt=["max","avg"],jwt=["sum","mul","concat","ave"],iC=new Map;function bo(t){Uv(Vwt,"DataFormat",t)}function _u(t){Uv(Uwt,"PaddingMode",t)}function o1e(t){Uv(Gwt,"PoolMode",t)}const I2=[];function Gv(t,n){I2.push(t);try{const e=n();return I2.pop(),e}catch(e){throw I2.pop(),e}}function l1e(t){if(!u1e(t))throw new Error("Not a valid tensor name: '"+t+"'");return function Wwt(){return 0===I2.length?"":I2.join("/")+"/"}()+t}function c1e(t){if(!u1e(t))throw new Error("Not a valid tensor name: '"+t+"'");iC.has(t)||iC.set(t,0);const n=iC.get(t);if(iC.set(t,iC.get(t)+1),n>0){const e=`${t}_${n}`;return iC.set(e,1),e}return t}const qwt=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function u1e(t){return!!t.match(qwt)}function Kwt(t){return t===parseInt(t.toString(),10)}function U_(t,n,e){null==n&&(n=0),null==e&&(e=t.length);let i=1;for(let s=n;s<e;++s)i*=t[s];return i}function sC(t){if(0===t.length)return Number.NaN;let n=Number.POSITIVE_INFINITY;for(let e=0;e<t.length;e++){const i=t[e];i<n&&(n=i)}return n}function G_(t){if(0===t.length)return Number.NaN;let n=Number.NEGATIVE_INFINITY;for(let e=0;e<t.length;e++){const i=t[e];i>n&&(n=i)}return n}function lh(t,n){if(n<t)throw new ve(`end (${n}) < begin (${t}) is forbidden.`);const e=[];for(let i=t;i<n;++i)e.push(i);return e}let s3;function Qo(){return null==s3&&(s3=vbe().epsilon()),s3}function Sp(t,n){return Rt(t,n)}function k2(t,n=-1){const e=t.shape.slice();return n<0&&(n=e.length+n+1),e.splice(n,0,1),ge(t,e)}function jv(t,n,e){return Ee(()=>{switch(t.rank){case 1:return UL(t,n,e);case 2:return Nj(t,[n,0],[e,t.shape[1]]);case 3:return GL(t,[n,0,0],[e,t.shape[1],t.shape[2]]);case 4:return w2(t,[n,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3]]);case 5:return is(t,[n,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return is(t,[n,0,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new ve(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function xH(t,n,e){return Ee(()=>{switch(t.rank){case 1:return UL(t,n,e);case 2:return Nj(t,[0,n],[t.shape[0],e]);case 3:return GL(t,[0,0,n],[t.shape[0],t.shape[1],e]);case 4:return w2(t,[0,0,0,n],[t.shape[0],t.shape[1],t.shape[2],e]);default:throw new ve(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function r3(t,n,e,i){return Ee(()=>{switch(t.rank){case 1:return UL(t,n,e);case 2:switch(i){case 1:return jv(t,n,e);case 2:return xH(t,n,e);default:throw new ve(`The axis is not within the rank of the tensor ${i}`)}case 3:switch(i){case 1:return jv(t,n,e);case 2:return GL(t,[0,n,0],[t.shape[0],e,t.shape[2]]);case 3:return xH(t,n,e);default:throw new ve(`The axis is not within the rank of the tensor ${i}`)}case 4:switch(i){case 1:return jv(t,n,e);case 2:return w2(t,[0,n,0,0],[t.shape[0],e,t.shape[2],t.shape[3]]);case 3:return w2(t,[0,0,n,0],[t.shape[0],t.shape[1],e,t.shape[3]]);case 4:return xH(t,n,e);default:throw new ve(`The axis is not within the rank of the tensor ${i}`)}default:throw new ve(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function EH(t,n=-1){let e;return n<0&&(e=t[0].rank,n=0!==e?e:0),n===t[0].rank&&(n=-1),mo(t,n)}function h1e(t,n){switch(t.rank){case 1:return Tve([t,n]);case 2:return Ive([t,n],0);case 3:return kve([t,n],0);case 4:return Dve([t,n],0);default:throw new ve(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function TH(t,n){if(Array.isArray(n)||(n=[n]),t.rank!==n.length)throw new ve(`The length of input n (${n.length}) does not match the number of dimensions in input x (${t.rank})`);return nd(t,n)}function o3(t,n=0,e=1,i,s){return Sj(t,n,e,i,s)}function xp(t,n,e,i){if(t.rank<2||n.rank<2)throw new bi(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${n.shape}`);if(n.rank>=3&&t.shape.slice(-1)[0]!==n.shape.slice(-2)[0])throw new bi(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${n.shape}`);if(2===t.rank&&2===n.rank)return jj({a:t,b:n,transposeA:!1,transposeB:!1,bias:i?IH(t.rank,i,"channelsLast"):null,activation:e});{const s=t.shape.slice(),r=s.pop();t=ge(t,[-1,r]);const o=n.shape.slice(),a=o.pop(),l=o.pop(),c=[...o,a],u=Array.from({length:n.rank},(f,g)=>0===g?n.rank-2:g<=n.rank-2?g-1:g);n=ge(ss(n,u),[l,-1]);const d=[...s,...c];return ge(jj({a:t,b:n,transposeA:!1,transposeB:!1,bias:i?IH(t.rank,i,"channelsLast"):null,activation:e}),d)}}function p1e(t,n,e){return Ee(()=>(n=Array.isArray(n)?il(n,"int32"):Rt(n,"int32"),b2(t,n,e)))}function D2(t){return pe(t,t)}function IH(t,n,e){const i=n.shape;if(1!==n.rank&&n.rank!==t)throw new ve(`Unexpected bias dimensions: ${n.rank}; expected it to be 1 or ${t}`);if(5===t){if("channelsFirst"===e)return ge(n,1===i.length?[1,i[0],1,1,1]:[1,i[3],i[0],i[1],i[2]]);if("channelsLast"===e)return ge(n,1===i.length?[1,1,1,1,i[0]]:[1].concat(i))}else if(4===t){if("channelsFirst"===e)return ge(n,1===i.length?[1,i[0],1,1]:[1,i[2],i[0],i[1]]);if("channelsLast"===e)return ge(n,1===i.length?[1,1,1,i[0]]:[1].concat(i))}else if(3===t){if("channelsFirst"===e)return ge(n,1===i.length?[1,i[0],1]:[1,i[1],i[0]]);if("channelsLast"===e)return ge(n,1===i.length?[1,1,i[0]]:[1].concat(i))}else if(t<3)return n;throw new ve(`Unsupported input rank by biasAdd: ${n.rank}`)}function uh(t,n,e){return Ee(()=>(null==e&&(e="channelsLast"),bo(e),lt(t,IH(t.rank,n,e))))}function f1e(t,n,e,i){return Ee(()=>aye(t,n,e,i))}function A2(t,n,e=!1){return e?t():n()}const iCt=["fanIn","fanOut","fanAvg"],sCt=["normal","uniform","truncatedNormal"];class ld extends Gw{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}pt((()=>{class t extends ld{apply(e,i){return Zo(e,i)}}return t.className="Zeros",t})());let m1e=(()=>{class t extends ld{apply(e,i){return Ic(e,i)}}return t.className="Ones",t})();pt(m1e),pt((()=>{class t extends ld{constructor(e){if(super(),"object"!=typeof e)throw new ve(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new ve(`config must have value set but got ${e}`);this.value=e.value}apply(e,i){return Ee(()=>pe(En(this.value),Ic(e,i)))}getConfig(){return{value:this.value}}}return t.className="Constant",t})()),pt((()=>{class t extends ld{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,i){return Lv(e,this.minval,this.maxval,i,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}return t.className="RandomUniform",t})()),pt((()=>{class t extends ld{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,i){if("float32"!==(i=i||"float32")&&"int32"!==i)throw new bi(`randomNormal does not support dType ${i}.`);return o3(e,this.mean,this.stddev,i,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="RandomNormal",t})()),pt((()=>{class t extends ld{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,i){if("float32"!==(i=i||"float32")&&"int32"!==i)throw new bi(`truncatedNormal does not support dType ${i}.`);return Lj(e,this.mean,this.stddev,i,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="TruncatedNormal",t})()),pt((()=>{class t extends ld{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,i){return Ee(()=>{if(2!==e.length||e[0]!==e[1])throw new ve("Identity matrix initializer can only be used for 2D square matrices.");return pe(this.gain,_j(e[0]))})}getConfig(){return{gain:this.gain}}}return t.className="Identity",t})());let gu=(()=>{class t extends ld{constructor(e){if(super(),e.scale<0)throw new ve(`scale must be a positive float. Got: ${e.scale}`);this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,function rCt(t){Uv(iCt,"FanMode",t)}(this.mode),this.distribution=null==e.distribution?"normal":e.distribution,function oCt(t){Uv(sCt,"Distribution",t)}(this.distribution),this.seed=e.seed}apply(e,i){const s=function aCt(t,n="channelsLast"){let e,i;if(bo(n),2===t.length)e=t[0],i=t[1];else if(-1!==[3,4,5].indexOf(t.length)){if("channelsFirst"===n){const s=U_(t,2);e=t[1]*s,i=t[0]*s}else if("channelsLast"===n){const s=U_(t,0,t.length-2);e=t[t.length-2]*s,i=t[t.length-1]*s}}else{const s=U_(t);e=Math.sqrt(s),i=Math.sqrt(s)}return[e,i]}(e),r=s[0],o=s[1];let a=this.scale;if(a/="fanIn"===this.mode?Math.max(1,r):"fanOut"===this.mode?Math.max(1,o):Math.max(1,(r+o)/2),"normal"===this.distribution){const l=Math.sqrt(a);if("float32"!==(i=i||"float32")&&"int32"!==i)throw new bi(`${this.getClassName()} does not support dType ${i}.`);return Lj(e,0,l,i,this.seed)}{const l=Math.sqrt(3*a);return Lv(e,-l,l,i,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}return t.className="VarianceScaling",t})();pt(gu);let _1e=(()=>{class t extends gu{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return gu.className}}return t.className="GlorotUniform",t})();pt(_1e);let g1e=(()=>{class t extends gu{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return gu.className}}return t.className="GlorotNormal",t})();pt(g1e);let b1e=(()=>{class t extends gu{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return gu.className}}return t.className="HeNormal",t})();pt(b1e);let v1e=(()=>{class t extends gu{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return gu.className}}return t.className="HeUniform",t})();pt(v1e);let y1e=(()=>{class t extends gu{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return gu.className}}return t.className="LeCunNormal",t})();pt(y1e);let w1e=(()=>{class t extends gu{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return gu.className}}return t.className="LeCunUniform",t})();pt(w1e),pt((()=>{class t extends ld{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,i){return Ee(()=>{if(e.length<2)throw new bi("Shape must be at least 2D.");if("int32"!==i&&"float32"!==i&&void 0!==i)throw new TypeError(`Unsupported data type ${i}.`);const s=Le(e.slice(0,-1)),r=e[e.length-1],o=s*r;o>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${o}) elements: Slowness may result.`);const l=o3([Math.max(r,s),Math.min(r,s)],0,1,i,this.seed),c=bye.qr(l,!1);let u=c[0];const h=c[1].flatten().stridedSlice([0],[Math.min(r,s)*Math.min(r,s)],[Math.min(r,s)+1]);return u=pe(u,h.sign()),s<r&&(u=u.transpose()),pe(En(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}return t.className="Orthogonal",t})());const C1e={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function S1e(t,n={}){return T2(t,Ju.getMap().classNameMap,n,"initializer")}function jr(t){return wH(t)}function Fr(t){if("string"==typeof t){const n=t in C1e?C1e[t]:t;if("GlorotNormal"===n)return new g1e;if("GlorotUniform"===n)return new _1e;if("HeNormal"===n)return new b1e;if("HeUniform"===n)return new v1e;if("LeCunNormal"===n)return new y1e;if("LeCunUniform"===n)return new w1e;{const e={};return e.className=n,e.config={},S1e(e)}}return t instanceof ld?t:S1e(t)}function kH(t){return Array.isArray(t)&&Array.isArray(t[0])}function a3(t){return 0===t.length?[]:Array.isArray(t[0])?t:[t]}function Wn(t){let n;if(Array.isArray(t)){if(1!==t.length)throw new ve(`Expected Tensor length to be 1; got ${t.length}`);n=t[0]}else n=t;return n}function gs(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(1===t.length)return t[0];throw new ve(`Expected exactly 1 Shape; got ${t.length}`)}return t}function l3(t){let n=0;for(const e of t)n+=0===e.shape.length?1:e.shape.reduce((i,s)=>i*s);return n}class Ep{constructor(n,e="float32",i="Variable",s=!0,r=null){this.dtype=e??"float32",this.shape=n.shape,this.id=r1e(),this.originalName=l1e(i=i??"Variable"),this.name=c1e(this.originalName),this.trainable_=s,this.constraint=r,this.val=rye(n,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(n){return this.assertNotDisposed(),function lCt(t,n){if(t.shape.toString()!==n.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(n.shape))}(this.val,n),this.val.id!==n.id&&(this.val.assign(n),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(n){this.trainable_=n,this.val.trainable=n}}function DH(t){return t.map(n=>n.read())}function AH(t){t.forEach(n=>{n[0].write(n[1])})}class Jo{constructor(n){this.dtype=n.dtype,this.shape=n.shape,this.ndim=null!=n.shape?n.shape.length:n.ndim,this.maxNDim=n.maxNDim,this.minNDim=n.minNDim,this.axes=n.axes||{}}}class Tp{constructor(n,e,i,s,r,o,a){this.dtype=n,this.shape=e,this.sourceLayer=i,this.inputs=s,this.callArgs=r,this.outputTensorIndex=a,this.id=r1e(),null!=o&&(this.originalName=l1e(o),this.name=c1e(this.originalName)),this.rank=e.length}}let cCt=0;class c3{constructor(n,e){this.callArgs=e,this.id=cCt++,this.outboundLayer=n.outboundLayer,this.inboundLayers=n.inboundLayers,this.nodeIndices=n.nodeIndices,this.tensorIndices=n.tensorIndices,this.inputTensors=n.inputTensors,this.outputTensors=n.outputTensors,this.inputMasks=n.inputMasks,this.outputMasks=n.outputMasks,this.inputShapes=n.inputShapes,this.outputShapes=n.outputShapes;for(const i of n.inboundLayers)i?.outboundNodes.push(this);n.outboundLayer.inboundNodes.push(this)}getConfig(){const n=[];for(const e of this.inboundLayers)n.push(null!=e?e.name:null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:n,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let uCt=0;class Ui extends Gw{constructor(n={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=uCt++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let e=n.name;if(!e){const i=this.getClassName();e=Hf(i)+"_"+n3(i)}if(this.name=e,this.trainable_=null==n.trainable||n.trainable,null!=n.inputShape||null!=n.batchInputShape){let i;if(null!=n.batchInputShape)i=n.batchInputShape;else if(null!=n.inputShape){let r=null;null!=n.batchSize&&(r=n.batchSize),i=[r].concat(n.inputShape)}this.batchInputShape=i;let s=n.dtype;null==s&&(s=n.inputDType),null==s&&(s="float32"),this.dtype=s}this.initialWeights=null!=n.weights?n.weights:null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(n,e){return n.name+"_ib-"+e.toString()}getNodeAtIndex(n,e){if(0===this.inboundNodes.length)throw new od(`The layer has never been called and thus has no defined ${e}.`);if(this.inboundNodes.length<=n)throw new ve(`Asked to get ${e} at node ${n}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[n]}getInputAt(n){return Xl(this.getNodeAtIndex(n,"input").inputTensors)}getOutputAt(n){return Xl(this.getNodeAtIndex(n,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Cp(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(0===this.inboundNodes.length)throw new Cp(`Layer ${this.name} is not connected, no input to return.`);return Xl(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new Cp(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Cp(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Xl(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(n=>n())}get updates(){return this._updates}get built(){return this._built}set built(n){this._built=n}get trainable(){return this.trainable_}set trainable(n){this._trainableWeights.forEach(e=>e.trainable=n),this.trainable_=n}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(n=>n.trainable):[]}set trainableWeights(n){this._trainableWeights=n}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(n=>!n.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(n){this._nonTrainableWeights=n}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(n){const e=$s(n);if(null==this.inputSpec||0===this.inputSpec.length)return;const i=$s(this.inputSpec);if(e.length!==i.length)throw new ve(`Layer ${this.name} expects ${i.length} inputs, but it received ${e.length} input tensors. Input received: ${n}`);for(let s=0;s<e.length;s++){const r=e[s],o=i[s];if(null==o)continue;const a=r.rank;if(null!=o.ndim&&a!==o.ndim)throw new ve(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(null!=o.maxNDim&&a>o.maxNDim)throw new ve(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(null!=o.minNDim&&a<o.minNDim)throw new ve(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(null!=o.dtype&&r.dtype!==o.dtype)throw new ve(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${r.dtype}.`);if(o.axes){const l=r.shape;for(const c in o.axes){const u=Number(c),d=o.axes[c];if(null!=d&&-1===[d,null].indexOf(u>=0?l[u]:l[l.length+u]))throw new ve(`Input ${s} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(null!=o.shape)for(let l=0;l<o.shape.length;++l){const c=o.shape[l],u=r.shape[l];if(null!=c&&null!=u&&c!==u)throw new ve(`Input ${s} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${r.shape}.`)}}}call(n,e){return n}invokeCallHook(n,e){null!=this._callHook&&this._callHook(n,e)}setCallHook(n){this._callHook=n}clearCallHook(){this._callHook=null}apply(n,e){e=e||{},this.assertNotDisposed();const i=$s(n),s=function pCt(t){let n=!0;for(const e of $s(t))if(!(e instanceof Tp)){n=!1;break}return n}(n),r=function fCt(t){let n=!0;for(const e of $s(t))if(e instanceof Tp){n=!1;break}return n}(n);if(s===r)throw new ve("Arguments to apply() must be all SymbolicTensors or all Tensors");return Gv(this.name,()=>{if(!this.built){this.assertInputCompatibility(n);const o=[];for(const a of $s(n))o.push(a.shape);this.build(Xl(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&r&&(this._refCount=1)}if(this.assertInputCompatibility(n),r){let o=this.call(n,e);this.supportsMasking&&this.setMaskMetadata(n,o);const a=$s(o),l=[];for(let c of a)-1!==i.indexOf(c)&&(c=c.clone()),l.push(c);if(o=Xl(l),null!=this.activityRegularizer)throw new bi("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}{const o=function dCt(t){t=$s(t);const n=[];for(const e of t)n.push(e.shape);return Xl(n)}(n),a=this.computeOutputShape(o);let l;const c="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(n)?o[0]:o),l=null!=a&&a.length>0&&Array.isArray(a[0])?a.map((u,d)=>new Tp(c,u,this,$s(n),e,this.name,d)):new Tp(c,a,this,$s(n),e,this.name),this.addInboundNode(n,l,null,null,o,a,e),this._refCount++,null!=this.activityRegularizer)throw new bi("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(n){if(null!=this.batchInputShape)if(n.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(n)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let e=!1;this.batchInputShape.forEach((i,s)=>{null!=i&&null!=n[s]&&n[s]!==i&&(e=!0)}),e&&console.warn(`The shape of the input tensor (${JSON.stringify(n)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new Cp(`The layer ${this.name} has never been called and thus has no defined output shape.`);const n=[];for(const e of this.inboundNodes){const i=JSON.stringify(e.outputShapes);-1===n.indexOf(i)&&n.push(i)}if(1===n.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new Cp(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new od(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return l3(this.weights)}build(n){this.built=!0}getWeights(n=!1){return DH(n?this.trainableWeights:this.weights)}setWeights(n){Ee(()=>{const e=this.weights;if(e.length!==n.length)throw new ve(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${n.length}, but the layer was expecting ${e.length} weights. Provided weights: ${n}...`);if(0===e.length)return;const i=[],s=DH(e);for(let r=0;r<s.length;++r){const o=s[r],a=e[r],l=n[r];if(!es(o.shape,l.shape))throw new ve(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);i.push([a,l])}AH(i)})}addWeight(n,e,i,s,r,o,a,l){if(-1!==this._addedWeightNames.indexOf(n))throw new ve(`Duplicate weight name ${n} for layer ${this.name}`);this._addedWeightNames.push(n),null==i&&(i="float32"),this.fastWeightInitDuringBuild&&(s=null!=l?l():Fr("zeros"));const c=s.apply(e,i),u=new Ep(c,i,n,o,a);return c.dispose(),null!=r&&this.addLoss(()=>r.apply(u.read())),null==o&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(n){this.fastWeightInitDuringBuild=n}addLoss(n){null==n||Array.isArray(n)&&0===n.length||(n=$s(n),null!=this._losses&&this.losses.push(...n))}computeOutputShape(n){return n}computeMask(n,e){if(!this.supportsMasking){if(null!=e){if(!Array.isArray(e))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);e.forEach(i=>{if(null!=i)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)})}return null}return e}setMaskMetadata(n,e,i){if(!this.supportsMasking)return;const s=this.computeMask(n,i),r=$s(e),o=$s(s);if(r.length!==o.length)throw new Error(`${this.name} outputs ${r.length} tensors but ${r.length} masks for those tensors`);for(let a=0;a<r.length;a++)r[a].kerasMask=o[a]}addInboundNode(n,e,i,s,r,o,a=null){const l=$s(n);e=$s(e),i=$s(i),s=$s(s),r=a3(r),o=a3(o);const c=[],u=[],d=[];for(const h of l)c.push(h.sourceLayer),u.push(h.nodeIndex),d.push(h.tensorIndex);new c3({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:e,inputMasks:i,outputMasks:s,inputShapes:r,outputShapes:o},a);for(let h=0;h<e.length;h++)e[h].sourceLayer=this,e[h].nodeIndex=this.inboundNodes.length-1,e[h].tensorIndex=h}getConfig(){const n={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(n.batchInputShape=this.batchInputShape),null!=this.dtype&&(n.dtype=this.dtype),n}disposeWeights(){return this.weights.forEach(n=>n.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let n=0;return 0==--this._refCount&&(n=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:n}}}function E1e(t,n,e){if((null==n||null!=e&&e>0)&&(n=t.sourceLayer,e=t.nodeIndex),0===n.inboundNodes.length)return[t];{const i=n.inboundNodes[e];if(0===i.inboundLayers.length)return i.inputTensors;{const s=[];for(let r=0;r<i.inboundLayers.length;r++){const c=E1e(i.inputTensors[r],i.inboundLayers[r],i.nodeIndices[r]);for(const u of c)-1===s.indexOf(u)&&s.push(u)}return s}}}let u3=(()=>{class t extends Ui{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:n3("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new ve("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let i=e.batchInputShape;if(null==i){if(null==e.inputShape)throw new ve("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");i=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new ve("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const s=e.dtype||"float32";this.batchInputShape=i,this.dtype=s,this.inputSpec=[{shape:i}];const r=new Tp(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new c3({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[i],outputShapes:[i]})}apply(e,i){throw new ve(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}return t.className="InputLayer",t})();pt(u3);class j_{constructor(n){if(this.id2Value={},this.id2Mask={},this.name2Id={},n instanceof j_)for(const e in n.id2Value)this.id2Value[e]=n.id2Value[e],e in n.id2Mask&&(this.id2Mask[e]=n.id2Mask[e]);else{if(null==n)return;for(const e of n)this.add(e.key,e.value)}}add(n,e,i){if(null!=this.id2Value[n.id])throw new ve(`Duplicate key: name=${n.name}, id=${n.id}`);return this.id2Value[n.id]=function _Ct(t,n){if(null==t.dtype||t.dtype===n.dtype)return n;try{return Rt(n,t.dtype)}catch{throw new ve(`The dtype of the feed (${n.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}(n,e),this.name2Id[n.name]=n.id,null!=i&&(this.id2Mask[n.id]=i),this}addFeed(n){this.add(n.key,n.value)}hasKey(n){return null!=this.id2Value[n.id]}names(){return Object.keys(this.name2Id)}getValue(n){if(n instanceof Tp){if(null==this.id2Value[n.id])throw new ve(`Nonexistent key: ${n.name}`);return this.id2Value[n.id]}{const e=this.name2Id[n];if(null==e)throw new ve(`Feed dict has no SymbolicTensor name: ${n}`);return this.id2Value[e]}}getMask(n){if(n instanceof Tp){if(null==this.id2Value[n.id])throw new ve(`Nonexistent key: ${n.name}`);return this.id2Mask[n.id]}{const e=this.name2Id[n];if(null==e)throw new ve(`Feed dict has no SymbolicTensor name: ${n}`);return this.id2Mask[e]}}disposeMasks(){null!=this.id2Mask&&ki(this.id2Mask)}}const d3=new t1e,h3=new t1e;function M2(t,n,e,i){const s=null!=e&&e.training,r=Array.isArray(t),o=r?t:[t],a=o.map(f=>f.name),l=[],c=n.names();for(const f of a)-1!==c.indexOf(f)?l.push(n.getValue(f)):l.push(null);null!=i&&(i.maxNumTensors=-1/0,i.minNumTensors=1/0);const u=a.join(",")+"|"+n.names().sort().join(",");let h,d=d3.get(u);if(null==d){const f=function bCt(t,n){U(null!=t&&t.length>0,()=>"Expected at least one fetch, got none");let e=[],i={};if(1===t.length){const s=T1e(t[0],n);e=s.sorted,i=s.recipientMap}else{const s=new Set;for(const r of t){const{sorted:o,recipientMap:a}=T1e(r,n);for(const l of o)s.has(l.name)||(e.push(l),s.add(l.name));for(const l in a)null==i[l]&&(i[l]=new Set),a[l].forEach(c=>i[l].add(c))}}return{sorted:e,recipientCounts:vCt(i)}}(o,n);d=f.sorted,h=f.recipientCounts,d3.put(u,d),h3.put(u,h)}h={},s||Object.assign(h,h3.get(u));const p=new j_(n);for(let f=0;f<d.length;++f){if(null!=i){const F=SG().numTensors;F>i.maxNumTensors&&(i.maxNumTensors=F),F<i.minNumTensors&&(i.minNumTensors=F)}const g=d[f],v=g.sourceLayer;if(v instanceof u3)continue;const y=[],w=[],x=[];let T=!1;for(const F of g.inputs){const $=p.getValue(F),j=p.getMask(F);y.push($),w.push(j),null!=j&&(T=!0),s||(h[F.name]--,0===h[F.name]&&!n.hasKey(F)&&-1===a.indexOf(F.name)&&!$.isDisposed&&!0!==F.sourceLayer.stateful&&x.push($))}T&&((e=e||{}).mask=w[0]);const k=$s(v.apply(y,e));let R=null;v.supportsMasking&&(R=v.computeMask(y,w));const N=yCt(g),D=Array.isArray(N)?N:[N];for(let F=0;F<D.length;++F){p.hasKey(D[F])||p.add(D[F],k[F],Array.isArray(R)?R[0]:R);const $=a.indexOf(D[F].name);-1!==$&&(l[$]=k[F])}s||ki(x)}return p.disposeMasks(),r?l:l[0]}function vCt(t){const n={};for(const e in t)n[e]=t[e].size;return n}function T1e(t,n){const e=new Set,i=[],s={};for(const a of n.names())e.add(a);const r=[],o=[];for(r.push(t);r.length>0;){const a=r[r.length-1];if(e.has(a.name)){r.pop();continue}const l=o[o.length-1]===r.length-1;if(0===a.inputs.length||l)r.pop(),i.push(a),e.add(a.name),l&&o.pop();else{o.push(r.length-1);for(const c of a.inputs)null==s[c.name]&&(s[c.name]=new Set),s[c.name].add(a.name),!e.has(c.name)&&r.push(c)}}return{sorted:i,recipientMap:s}}function yCt(t){let n;if(1===t.sourceLayer.inboundNodes.length)n=t.sourceLayer.output;else{let e=null;for(let i=0;i<t.sourceLayer.inboundNodes.length;++i)for(const s of t.sourceLayer.inboundNodes[i].outputTensors)if(s.id===t.id){e=i;break}n=t.sourceLayer.getOutputAt(e)}return n}function MH(t,n){return Ee(()=>Fa(un(pe(t,t),n,!0)))}Ie().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,function gCt(t){d3?.setMaxEntries(t),h3?.setMaxEntries(t)});class N2 extends Gw{getConfig(){return{}}}pt((()=>{class t extends N2{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return Ee(()=>{const i=MH(e,this.axis),s=xc(i,0,this.maxValue);return pe(e,pn(s,lt(Qo(),i)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}return t.className="MaxNorm",t})()),pt((()=>{class t extends N2{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return Ee(()=>pn(e,lt(Qo(),MH(e,this.axis))))}getConfig(){return{axis:this.axis}}}return t.className="UnitNorm",t})()),pt((()=>{class t extends N2{apply(e){return vp(e)}}return t.className="NonNeg",t})()),pt((()=>{class t extends N2{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return Ee(()=>{const i=MH(e,this.axis),s=lt(pe(this.rate,xc(i,this.minValue,this.maxValue)),pe(1-this.rate,i));return pe(e,pn(s,lt(Qo(),i)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}return t.className="MinMaxNorm",t})());const I1e={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function ea(t){return wH(t)}function k1e(t,n={}){return T2(t,Ju.getMap().classNameMap,n,"constraint")}function ta(t){return null==t?null:"string"==typeof t?k1e({className:t in I1e?I1e[t]:t,config:{}}):t instanceof N2?t:k1e(t)}function H_(t){return NH.apply(this,arguments)}function NH(){return NH=z(function*(t){if(null==t)return;const n=[],e=[],i=[];for(const s in t){const r=t[s];if("number"!=typeof r){const o=r;n.push(o.data()),e.push(s),i.push(o)}}if(n.length>0){const s=yield Promise.all(n);for(let r=0;r<s.length;++r)t[e[r]]=s[r][0];ki(i)}}),NH.apply(this,arguments)}function D1e(t){if(null!=t)for(const n in t){const e=t[n];"number"!=typeof e&&e.dispose()}}class rC{constructor(){this.validationData=null}setParams(n){this.params=n}onEpochBegin(n,e){return z(function*(){})()}onEpochEnd(n,e){return z(function*(){})()}onBatchBegin(n,e){return z(function*(){})()}onBatchEnd(n,e){return z(function*(){})()}onTrainBegin(n){return z(function*(){})()}onTrainEnd(n){return z(function*(){})()}setModel(n){}}class SCt{constructor(n,e=10){null==n&&(n=[]),this.callbacks=n,this.queueLength=e}append(n){this.callbacks.push(n)}setParams(n){for(const e of this.callbacks)e.setParams(n)}setModel(n){for(const e of this.callbacks)e.setModel(n)}onEpochBegin(n,e){var i=this;return z(function*(){null==e&&(e={});for(const s of i.callbacks)yield s.onEpochBegin(n,e)})()}onEpochEnd(n,e){var i=this;return z(function*(){null==e&&(e={});for(const s of i.callbacks)yield s.onEpochEnd(n,e)})()}onBatchBegin(n,e){var i=this;return z(function*(){null==e&&(e={});for(const s of i.callbacks)yield s.onBatchBegin(n,e)})()}onBatchEnd(n,e){var i=this;return z(function*(){null==e&&(e={});for(const s of i.callbacks)yield s.onBatchEnd(n,e)})()}onTrainBegin(n){var e=this;return z(function*(){null==n&&(n={});for(const i of e.callbacks)yield i.onTrainBegin(n)})()}onTrainEnd(n){var e=this;return z(function*(){null==n&&(n={});for(const i of e.callbacks)yield i.onTrainEnd(n)})()}}class xCt extends rC{constructor(){super()}onEpochBegin(n){var e=this;return z(function*(){e.seen=0,e.totals={}})()}onBatchEnd(n,e){var i=this;return z(function*(){null==e&&(e={});const s=null==e.size?0:e.size;i.seen+=s;for(const r in e){const o=e[r];if("number"==typeof o)i.totals.hasOwnProperty(r)||(i.totals[r]=0),i.totals[r]=i.totals[r]+o*s;else{let a;r in i.totals?a=i.totals[r]:i.totals[r]=0;const l=Ee(()=>lt(i.totals[r],pe(o,s)));i.totals[r]=l,a?.dispose()}}})()}onEpochEnd(n,e){var i=this;return z(function*(){if(null!=e)for(const s of i.params.metrics)null!=i.totals[s]&&("number"==typeof i.totals[s]?e[s]=i.totals[s]/i.seen:Ee(()=>{const r=pe(pn(1,i.seen),i.totals[s]);e[s]=r,i.totals[s].dispose(),wa(e[s])}))})()}}class ECt extends rC{onTrainBegin(n){var e=this;return z(function*(){e.epoch=[],e.history={}})()}onEpochEnd(n,e){var i=this;return z(function*(){null==e&&(e={}),i.epoch.push(n);for(const s in e)null==i.history[s]&&(i.history[s]=[]),i.history[s].push(e[s])})()}syncData(){var n=this;return z(function*(){const e=[],i=[],s=[];for(const o in n.history){const a=n.history[o];for(let l=0;l<a.length;++l)"number"!=typeof a[l]&&(e.push(a[l].data()),i.push(o),s.push(l))}const r=yield Promise.all(e);for(let o=0;o<r.length;++o)n.history[i[o]][s[o]].dispose(),n.history[i[o]][s[o]]=r[o][0]})()}}class TCt extends rC{constructor(n,e){if(super(),this.currentEpoch=0,this.nowFunc=n.nowFunc,this.nextFrameFunc=n.nextFrameFunc||vye,this.yieldEvery=e||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=n.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");eU(this.yieldEvery)&&(this.maybeWait=function $wt(t,n,e){let s,i=null!=e?e():el();return(...o)=>{const a=null!=e?e():el();return a-i<n||(i=a,s=t(...o)),s}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=n.onTrainBegin,this.trainEnd=n.onTrainEnd,this.epochBegin=n.onEpochBegin,this.epochEnd=n.onEpochEnd,this.batchBegin=n.onBatchBegin,this.batchEnd=n.onBatchEnd,this.yield=n.onYield}maybeWait(n,e,i){var s=this;return z(function*(){const r=[];null!=s.yield&&(yield H_(i),r.push(s.yield(n,e,i))),r.push(s.nextFrameFunc()),yield Promise.all(r)})()}onEpochBegin(n,e){var i=this;return z(function*(){i.currentEpoch=n,null!=i.epochBegin&&(yield H_(e),yield i.epochBegin(n,e))})()}onEpochEnd(n,e){var i=this;return z(function*(){const s=[];null!=i.epochEnd&&(yield H_(e),s.push(i.epochEnd(n,e))),"epoch"===i.yieldEvery&&s.push(i.nextFrameFunc()),yield Promise.all(s)})()}onBatchBegin(n,e){var i=this;return z(function*(){null!=i.batchBegin&&(yield H_(e),yield i.batchBegin(n,e))})()}onBatchEnd(n,e){var i=this;return z(function*(){const s=[];null!=i.batchEnd&&(yield H_(e),s.push(i.batchEnd(n,e))),"batch"===i.yieldEvery?s.push(i.nextFrameFunc()):eU(i.yieldEvery)&&s.push(i.maybeWait(i.currentEpoch,n,e)),yield Promise.all(s)})()}onTrainBegin(n){var e=this;return z(function*(){null!=e.trainBegin&&(yield H_(n),yield e.trainBegin(n))})()}onTrainEnd(n){var e=this;return z(function*(){null!=e.trainEnd&&(yield H_(n),yield e.trainEnd(n))})()}}function A1e(t,n){return null==t&&(t={}),t instanceof rC?[t]:Array.isArray(t)&&t[0]instanceof rC?t:$s(t).map(i=>new TCt(i,n))}let ICt=(()=>{class t{constructor(){}static registerCallbackConstructor(e,i){U(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),t.checkForDuplicate(i),null==t.constructors[e]&&(t.constructors[e]=[]),t.constructors[e].push(i)}static checkForDuplicate(e){for(const i in t.constructors)t.constructors[+i].forEach(r=>{if(r===e)throw new ve("Duplicate callback constructor.")})}static clear(){t.constructors={}}static createCallbacks(e){const i=[];for(const s in t.constructors){const r=+s;e>=r&&i.push(...t.constructors[r])}return i.map(s=>new s)}}return t.constructors={},t})();function M1e(t,n,e,i,s,r,o,a,l){const c=new ECt,u=[new xCt,...ICt.createCallbacks(n)];null!=t&&u.push(...t),u.push(c);const d=new SCt(u);return d.setParams({epochs:e,initialEpoch:i,samples:s,steps:r,batchSize:o,verbose:n,doValidation:a,metrics:l}),{callbackList:d,history:c}}function Wf(t,n={},e=!1){return T2(t,Ju.getMap().classNameMap,n,"layer",e)}function p3(t,n){return Ee(()=>{"float32"!==t.dtype&&(t=Rt(t,"float32"));const e=un(D2(t),n,!0),i=jw(e.shape,Qo()),s=Fa(Bf(e,i));return pn(t,s)})}function f3(t,n){return Ee(()=>to(D2(Xt(n,t)),-1))}function OH(t,n){return Ee(()=>to(Xo(Xt(n,t)),-1))}function RH(t,n){return Ee(()=>{const e=Xt(t,n),i=xc(Xo(t),Qo(),Number.MAX_VALUE),s=Xo(pn(e,i));return pe(100,to(s,-1))})}function O2(t,n,e=!1){return Ee(()=>{if(e)n=jL(n);else{const i=un(n,n.shape.length-1,!0);n=pn(n,i)}return n=xc(n,Qo(),1-Qo()),kr(un(pe(Rt(t,"float32"),pu(n)),n.shape.length-1))})}function m3(t,n,e=!1){return Ee(()=>{const i=Rt(g2(function Qwt(t){const n=[U_(t.shape)];return ge(t,n)}(t)),"int32"),s=(n=xc(n,Qo(),1-Qo())).shape;return O2(ge(yj(i,s[s.length-1]),s),n,e)})}function _3(t,n){return Ee(()=>{let e;return e=xc(n,Qo(),1-Qo()),e=pu(pn(e,Xt(1,e))),to(function OCt(t,n){if(!es(t.shape,n.shape))throw new ve(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(n.shape)}`);return Ee(()=>{const e=vp(n),i=kr(Xo(n));return lt(Xt(e,pe(n,t)),RL(Ec(i)))})}(t,e),-1)})}function N1e(t,n){return Ee(()=>{const e=p3(t,-1),i=p3(n,-1),s=pe(e,i);return kr(un(s,-1))})}const g3={meanSquaredError:f3,meanAbsoluteError:OH,meanAbsolutePercentageError:RH,meanSquaredLogarithmicError:function kCt(t,n){return Ee(()=>{const e=xc(n,Qo(),Number.MAX_VALUE),i=pu(lt(1,e)),s=xc(t,Qo(),Number.MAX_VALUE),r=pu(lt(1,s));return to(D2(Xt(i,r)),-1)})},squaredHinge:function DCt(t,n){return Ee(()=>{const e=Bf(0,Xt(1,pe(t,n)));return to(D2(e),-1)})},hinge:function ACt(t,n){return Ee(()=>{const e=Bf(0,Xt(1,pe(t,n)));return to(e,-1)})},categoricalHinge:function MCt(t,n){return Ee(()=>{const e=un(pe(t,n),-1),i=td(pe(Xt(1,t),n),-1);return Bf(0,lt(1,Xt(i,e)))})},logcosh:function NCt(t,n){return Ee(()=>{const e=Math.log(2),i=Xt(n,t),s=Xt(lt(i,Yw(pe(-2,i))),e);return to(s,-1)})},categoricalCrossentropy:O2,sparseCategoricalCrossentropy:m3,binaryCrossentropy:_3,kullbackLeiblerDivergence:function RCt(t,n){return Ee(()=>{const e=xc(t,Qo(),1),i=xc(n,Qo(),1);return un(pe(t,pu(pn(e,i))),-1)})},poisson:function FCt(t,n){return Ee(()=>{const e=pu(lt(Qo(),n));return to(Xt(n,pe(t,e)),-1)})},cosineProximity:N1e};function FH(t){if("string"==typeof t){if(t in g3)return g3[t];let n=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(n=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ve(n)}return t}function O1e(t,n){return Ee(()=>{const e=pe(.5,fu(n)),i=Sp(Tc(n,e),t.dtype);return to(ah(t,i),-1)})}function R1e(t,n){return Ee(()=>Sp(ah(Ww(t,-1),Ww(n,-1)),"float32"))}function BCt(t,n){return _3(t,n)}function VCt(t,n){return t.rank===n.rank&&(t=Pv(t,[t.rank-1])),(n=Ww(n,-1)).dtype!==t.dtype&&(n=Rt(n,t.dtype)),Rt(ah(t,n),"float32")}const L1e=O2,P1e=m3,b3={binaryAccuracy:O1e,categoricalAccuracy:R1e,precision:function $Ct(t,n){return Ee(()=>{const e=function F1e(t,n){return Ee(()=>Rt(un(bp(ah(t,1),ah(n,1))),"float32"))}(t,n),i=function PCt(t,n){return Ee(()=>Rt(un(bp(ah(t,0),ah(n,1))),"float32"))}(t,n),s=lt(e,i);return Rt(tl(Tc(s,0),pn(e,s),0),"float32")})},categoricalCrossentropy:L1e,sparseCategoricalCrossentropy:P1e,mse:f3,MSE:f3,mae:OH,MAE:OH,mape:RH,MAPE:RH,cosine:N1e};function KCt(t){if("string"==typeof t&&t in b3)return b3[t];if("string"!=typeof t&&null!=t)return t;throw new ve(`Unknown metric ${t}`)}function v3(t){if(mu(null!==t,`Unknown LossOrMetricFn ${t}`),"string"==typeof t)return t;{let n;for(const e of Object.keys(g3))if(g3[e]===t){n=e;break}if(void 0!==n)return n;for(const e of Object.keys(b3))if(b3[e]===t){n=e;break}return void 0!==n?n:t.name}}function B1e(t,n,e=!1){if(null==t||"object"!=typeof t||Object.getPrototypeOf(t)!==Object.prototype||!LH(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(e){const i=JSON.stringify(t);i.length>1048576&&console.warn(`User-defined metadata of model "${n}" is too large in size (length=${i.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function LH(t){if(null===t)return!0;if("object"==typeof t){if(Object.getPrototypeOf(t)===Object.prototype){const n=Object.keys(t);for(const e of n)if("string"!=typeof e||!LH(t[e]))return!1;return!0}if(Array.isArray(t)){for(const n of t)if(!LH(n))return!1;return!0}return!1}{const n=typeof t;return"string"===n||"number"===n||"boolean"===n}}function y3(t,n,e=console.log){let i="";for(let s=0;s<t.length;++s)s>0&&(i=i.slice(0,i.length-1)+" "),i+=t[s],i=i.slice(0,n[s]),i+=" ".repeat(n[s]-i.length);e(i)}function JCt(t,n,e){let i,s;try{s=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{s="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}y3([`${t.name} (${t.getClassName()})`,s,i,t.countParams().toString()],n,e)}function eSt(t,n,e,i){let s,r;try{r=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{r="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const o=[];for(const d of t.inboundNodes)if(!(null!=e&&e.length>0&&-1===e.indexOf(d)))for(let h=0;h<d.inboundLayers.length;++h)o.push(`${d.inboundLayers[h].name}[${d.nodeIndices[h]}][${d.tensorIndices[h]}]`);const a=t.name,l=t.getClassName(),c=0===o.length?"":o[0];y3([`${a} (${l})`,r,s,t.countParams().toString(),c],n,i);for(let d=1;d<o.length;++d)y3(["","","","",o[d]],n,i)}function V1e(t,n,e){return("inboundNodes"===t||"outputLayers"===t||"inputLayers"===t)&&0===n&&"string"==typeof e}function PH(t,n){if(null===t)return null;if("string"==typeof t)return zv(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){const e=[],i=t.length;for(let s=0;s<i;++s){const r=t[s];V1e(n,s,r)?e.push(r):e.push(PH(r,n))}return e}{const e={};for(const i of Object.keys(t)){const s=t[i];if("name"===i&&"string"==typeof s)e[i]=s;else{const r=zv(i);e[r]=PH(s,r)}}return e}}function $H(t,n){if(null==t)return null;if("string"==typeof t)return Hf(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){const e=[],i=t.length;for(let s=0;s<i;++s){const r=t[s];V1e(n,s,r)?e.push(r):e.push($H(r,n))}return e}{const e={};for(const i of Object.keys(t)){const s=t[i];e[Hf(i)]="name"!==i&&"className"!==i||"string"!=typeof s?$H(s,i):s}return e}}class dh extends Ui{constructor(n){if(super({}),this.containerNodes=new Set,this.name=n.name,null==this.name){const w=this.getClassName().toLowerCase();this.name=n3(w)}if(this.supportsMasking=!1,this.trainable_=!0,this.inputs=Array.isArray(n.inputs)?n.inputs.slice():[n.inputs],this.outputs=Array.isArray(n.outputs)?n.outputs.slice():[n.outputs],z_(this.inputs).length!==this.inputs.length)throw new ve(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(w=>w.name)}`);z_(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(w=>w.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const w of this.outputs){const T=w.nodeIndex,k=w.tensorIndex;this.outputLayers.push(w.sourceLayer),this.outputLayersNodeIndices.push(T),this.outputLayersTensorIndices.push(k)}for(const w of this.inputs){const x=w.sourceLayer,T=w.nodeIndex,k=w.tensorIndex;mu(0===T,"input layer has >1 nodes"),mu(0===k,"input layer has >1 tensors"),this.inputLayers.push(x),this.inputLayersNodeIndices.push(T),this.inputLayersTensorIndices.push(k)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let w=0;w<this.inputLayers.length;w++){const x=this.inputLayers[w];if(!(x instanceof u3))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${n.inputs}. Input ${w} (0-based) originates from layer type ${x.getClassName()}.`);this.inputNames.push(x.name),this.feedInputShapes.push(x.batchInputShape),this.feedInputNames.push(x.name)}for(const w of this.outputLayers)this.outputNames.push(w.name);this.internalInputShapes=this.inputs.map(w=>w.shape),this.internalOutputShapes=this.outputs.map(w=>w.shape);const e={},i={},s={},r={},o={},a=[],l=(w,x,T,k,R,N)=>{(null==k||null==R||null==N)&&(k=w.sourceLayer,R=w.nodeIndex,N=w.tensorIndex);const D=k.inboundNodes[R];if(-1!==T.indexOf(D))throw new od(`The tensor ${w.name} at layer "${k.name}" is part of a cycle.`);if(-1!==x.indexOf(D))return;this.containerNodes.add(dh.nodeKey(k,R)),k.id in o||(o[k.id]=Object.keys(o).length),-1===T.indexOf(D)&&T.push(D);const F=D.inboundLayers.length;for(let $=0;$<F;$++)l(D.inputTensors[$],x,T,D.inboundLayers[$],D.nodeIndices[$],D.tensorIndices[$]);for(x.push(D);T.indexOf(D)>=0;)T.splice(T.indexOf(D),1);a.push(D)},c=[],u=[];for(const w of this.outputs)l(w,c,u);const d=a.slice().reverse();for(const w of d){i[w.id]=w,w.id in e||(e[w.id]=0);let x=e[w.id];x=Math.max(x,null==s[w.outboundLayer.id]?0:s[w.outboundLayer.id]),s[w.outboundLayer.id]=x,r[w.outboundLayer.id]=w.outboundLayer,e[w.id]=x;for(let k=0;k<w.inboundLayers.length;k++){const D=w.inboundLayers[k].inboundNodes[w.nodeIndices[k]];e[D.id]=Math.max(x+1,null==e[D.id]?0:e[D.id]),i[D.id]=D}}const h={};for(const w in e){const x=e[w];x in h||(h[x]=[]),h[x].push(i[w])}const p={};for(const w in s){const x=s[w];x in p||(p[x]=[]),p[x].push(r[w])}let f=Object.keys(p).map(w=>parseInt(w,10)).sort(e3);this.layers=[];for(const w of f){const x=p[w];x.sort((T,k)=>{const R=o[T.id],N=o[k.id];return R<N?-1:R>N?1:0});for(const T of x)T instanceof dh&&this.internalContainerRefs.push(T),this.layers.push(T)}this.layersByDepth=p,f=Object.keys(h).map(w=>parseInt(w,10)).sort(e3);const g=this.inputs.slice(),v=[];for(const w of f)for(const x of h[w]){const T=x.outboundLayer;if(null!=T){for(const k of x.inputTensors)if(-1===g.indexOf(k))throw new od(`Graph disconnected: cannot obtain value for tensor ${k} at layer "${T.name}". The following previous layers were accessed without issue: ${v}`);for(const k of x.outputTensors)g.push(k);v.push(T.name)}}this.nodesByDepth=h;const y=this.layers.map(w=>w.name);for(const w of y){const x=y.filter(T=>T===w).length;if(1!==x)throw new od(`The name "${w}" is used ${x} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new c3({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(w=>null),outputMasks:this.outputs.map(w=>null),inputShapes:this.inputs.map(w=>w.shape),outputShapes:this.outputs.map(w=>w.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const n={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(const e of this.layers)n.numDisposedVariables+=e.dispose().numDisposedVariables;for(const e of this.internalContainerRefs)n.numDisposedVariables+=e.dispose().numDisposedVariables}return n.refCountAfterDispose=this._refCount,n}get trainable(){return this.trainable_}set trainable(n){this.layers.forEach(e=>{e._trainableWeights.forEach(i=>i.trainable=n)}),this.trainable_=n}get trainableWeights(){if(this._trainableWeights.length>0)throw new ve("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let n=[];for(const e of this.layers)n=n.concat(e.trainableWeights);return n}get nonTrainableWeights(){const n=[];for(const e of this.layers)n.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const i of this.layers)e.push(...i.trainableWeights);return e.concat(n)}return n}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(n,e=!0){const i={};let s=0;const r=(t=>{const n=Object.keys(t);if(0===n.length)return!1;const e=n[0].split("/");return!isNaN(parseInt(e[e.length-1],10))})(n);r&&this.parseWeights(n);for(const a of this.layers)for(const[l,c]of a.weights.entries()){const u=r?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(null!=i[u])throw new ve(`Duplicate weight name: ${u}`);i[u]=c,s++}const o=[];for(const a in n){let l=a;if(null==i[a]){const c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(null!=i[l])o.push([i[l],n[a]]);else if(e)throw new ve(`Provided weight data has no target variable: ${a}`);delete i[l]}if(e){const a=[];for(const l in i)a.push(l);if(a.length>0)throw new ve(`${a.length} of ${s} weights are not set: ${a}`)}AH(o)}parseWeights(n){for(const e in Object.keys(n)){const i=e.split("/"),s=["vars","layer_checkpoint_dependencies"],r=i.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!s.includes(o)).join("/");r!==e&&(n[r]=n[e],delete n[e])}}updatedConfig(){const n=this.getConfig(),e={};return e.className=this.getClassName(),e.config=n,e.kerasVersion="tfjs-layers 4.21.0",e.backend="TensorFlow.js",e}toJSON(n,e=!0){const i=$H(this.updatedConfig());return e?JSON.stringify(i):i}call(n,e){return Ee(()=>{n=$s(n);const i=new j_;for(let s=0;s<this.inputs.length;++s)i.add(this.inputs[s],n[s]);return M2(this.outputs,i,e)})}computeMask(n,e){return Ee(()=>{let i;return n=$s(n),i=null==e?Vv(null,n.length):$s(e),this.runInternalGraph(n,i)[1]})}computeOutputShape(n){const e=a3(n);if(e.length!==this.inputLayers.length)throw new ve(`Invalid inputShape argument ${n}: model has ${this.inputLayers.length} tensor inputs.`);const i={};for(let a=0;a<e.length;a++)i[this.inputLayers[a].name+"_0_0"]=e[a];const s=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(e3);if(s.length>1)for(const a of s){const l=this.nodesByDepth[a];for(const c of l){const u=c.outboundLayer;if(-1!==this.inputLayers.map(g=>g.id).indexOf(u.id))continue;const d=[];for(let g=0;g<c.inboundLayers.length;g++)d.push(i[`${c.inboundLayers[g].name}_${c.nodeIndices[g]}_${c.tensorIndices[g]}`]);const p=a3(u.computeOutputShape(Xl(d))),f=u.inboundNodes.indexOf(c);for(let g=0;g<p.length;g++)i[`${u.name}_${f}_${g}`]=p[g]}}const r=[],o=[];for(let a=0;a<this.outputLayers.length;a++)o.push(`${this.outputLayers[a].name}_${this.outputLayersNodeIndices[a]}_${this.outputLayersTensorIndices[a]}`);for(let a=0;a<o.length;a++){const l=o[a];mu(l in i),r.push(i[l])}return Xl(r)}runInternalGraph(n,e){null==e&&(e=Vv(null,n.length));const i={};for(let l=0;l<this.inputs.length;++l)i[this.inputs[l].id]=[n[l],e[l]];const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(e3);for(const l of s){const c=this.nodesByDepth[l];for(const u of c){const d=u.outboundLayer,h=u.inputTensors,p=u.outputTensors,f=new Array;for(const g of h)g.id in i&&f.push(i[g.id]);if(f.length===h.length){let v,y,w,x,g={};if(null!=u.callArgs&&(g=u.callArgs),1===f.length){const[T,k]=f[0];null==g.mask&&(g.mask=k),w=$s(d.call(T,g)),x=$s(d.computeMask(T,k)),v=[T],y=[k]}else v=f.map(T=>T[0]),y=f.map(T=>T[1]),null==g.mask&&(g.mask=y),w=$s(d.call(v,g)),x=$s(d.computeMask(v,y));if(d.activityRegularizer)throw new bi("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let T=0;T<p.length;++T)i[p[T].id]=[w[T],x[T]]}}}const r=[],o=[],a=[];for(const l of this.outputs){mu(l.id in i,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=i[l.id];a.push(c.shape),r.push(c),o.push(u)}return[r,o,a]}buildNodeConversionMap(n){const e={};let i;for(const s of this.layers){i=s instanceof dh?1:0;for(let r=0;r<s.inboundNodes.length;r++){const o=dh.nodeKey(s,r);this.containerNodes.has(o)&&(e[o]=i,i+=1)}}return e}getLayer(n,e){if(null!=e)return this.findLayer(e);if(null==n)throw new ve("Provide either a layer name or layer index");if("number"==typeof n)return this.findLayer(n);for(const i of this.layers)if(i.name===n)return i;throw new ve(`No such layer: ${n}`)}findLayer(n){if(this.layers.length<=n)throw new ve(`Was asked to retrieve layer at index ${n}, but model only has ${this.layers.length} layer(s).`);return this.layers[n]}calculateLosses(){return Ee(()=>{const n=[];for(const e of this.layers)for(let i=0;i<e.inboundNodes.length;++i){const s=dh.nodeKey(e,i);this.containerNodes.has(s)&&n.push(...e.calculateLosses())}return n})}getConfig(){const n={name:this.name},e=this.buildNodeConversionMap(this.layers),i=[];for(const o of this.layers){const a=o.getClassName(),l=o.getConfig(),c=[];for(let d=0;d<o.inboundNodes.length;d++){const h=o.inboundNodes[d],p=dh.nodeKey(o,d);let f={};if(this.containerNodes.has(p)){if(h.callArgs)try{JSON.stringify(h.callArgs),f=h.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${h.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),f={}}if(h.inboundLayers.length>0){const g=[];for(let v=0;v<h.inboundLayers.length;v++){const y=h.inboundLayers[v],x=h.tensorIndices[v];let k=e[dh.nodeKey(y,h.nodeIndices[v])];null==k&&(k=0),g.push([y.name,k,x,f])}c.push(g)}}}const u={};u.name=o.name,u.className=a,u.config=l,u.inboundNodes=c,i.push(u)}n.layers=i;const s=[];for(let o=0;o<this.inputLayers.length;o++){const a=this.inputLayers[o],c=dh.nodeKey(a,this.inputLayersNodeIndices[o]);if(!this.containerNodes.has(c))continue;let u=e[c];null==u&&(u=0),s.push([a.name,u,this.inputLayersTensorIndices[o]])}n.inputLayers=s;const r=[];for(let o=0;o<this.outputLayers.length;o++){const a=this.outputLayers[o],c=dh.nodeKey(a,this.outputLayersNodeIndices[o]);if(!this.containerNodes.has(c))continue;let u=e[c];null==u&&(u=0),r.push([a.name,u,this.outputLayersTensorIndices[o]])}return n.outputLayers=r,n}static fromConfig(n,e,i={},s=!1){const r={},o={};function a(v,y){v.name in o?o[v.name].push(y):o[v.name]=[y]}function l(v,y){const w=[];let x;for(const T of y){const k=T[0],R=T[1],N=T[2];if(x=null==T[3]?{}:T[3],!(k in r))return void a(v,y);const D=r[k];if(D.inboundNodes.length<=R)return void a(v,y);w.push(D.inboundNodes[R].outputTensors[N])}w.length>0&&v.apply(Xl(w),x)}function c(v){const y=v.name,w=Wf(v,null!=e.customObjects?e.customObjects:{});w.setFastWeightInitDuringBuild(s),r[y]=w,v.inboundNodes.forEach(T=>{if(!(T instanceof Array))throw new ve(`Corrupted configuration, expected array for nodeData: ${T}`);a(w,T)})}const u=e.name,d=e.layers;for(const v of d)c(v);for(;!Pwt(o);)for(const v of d){const y=r[v.name];if(y.name in o){const w=o[y.name];delete o[y.name];for(const x of w)l(y,x)}}const h=[],p=[],f=e.inputLayers;for(const v of f){const y=v[0],w=v[1],x=v[2];mu(y in r),h.push(r[y].inboundNodes[w].outputTensors[x])}const g=e.outputLayers;for(const v of g){const y=v[0],w=v[1],x=v[2];mu(y in r),p.push(r[y].inboundNodes[w].outputTensors[x])}return new n({inputs:h,outputs:p,name:u})}get stateful(){if(this._stateful)throw new ve("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const n of this.layers)if(n.stateful)return!0;return!1}resetStates(){Ee(()=>{this.layers.forEach(n=>{n.stateful&&n.resetStates()})})}}function U1e(t,n){return function z1e(t,n,e){const i=n.length;if(null==t||Array.isArray(t)&&0===t.length)return n.map(s=>null);if(1===i)return Array.isArray(t)&&1===t.length?t:"object"==typeof t&&n[0]in t?[t[n[0]]]:[t];if(Array.isArray(t)){if(t.length!==i)throw new Error(`Provided ${e} is an array of ${t.length} element(s), but the model has ${i} outputs. Make sure a set of weights is provided for each model output.`);return t}if("object"==typeof t&&Object.keys(t).length>0&&"object"==typeof t[Object.keys(t)[0]]){const s=[];return n.forEach(r=>{s.push(r in t?t[r]:null)}),s}throw new Error(`The model has multiple (${i}) outputs, so ${e} must be either an array with ${i} elements or an object with ${n} keys. Provided ${e} not understood: ${JSON.stringify(t)}`)}(t,n,"classWeight")}function G1e(t,n,e,i){return VH.apply(this,arguments)}function VH(){return VH=z(function*(t,n,e,i){if(null!=n||null!=i)throw new Error("Support sampleWeight is not implemented yet");if(null!=e){const s=Ee(()=>{if(1===t.shape.length)return Lf(t);if(2===t.shape.length){if(t.shape[1]>1)return Ww(t,1);if(1===t.shape[1])return ge(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),r=Array.from(yield s.data());ki(s);const o=[];return r.forEach(a=>{if(null==e[a])throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);o.push(e[a])}),il(o,"float32")}return null}),VH.apply(this,arguments)}function nSt(t,n){return pe(t,n)}function j1e(t,n){let e,i;e=n.xs,i=n.ys,U(null!=e&&null!=i,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${n}`);const r=H1e("input",t.inputNames,e),o=H1e("output",t.outputNames,i),a=r[0].shape[0];U(r.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${r.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),U(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<r.length;l++)U(r[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${r[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)U(o[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:r,ys:o}}function H1e(t,n,e){if(e instanceof js)return[e];if(Array.isArray(e))return U(e.length===n.length,()=>`Received an array of ${e.length} Tensors, but expected ${n.length} to match the ${t} keys ${n}.`),e;{const i=[];for(const s of n){if(null==e[s])throw new ve(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);i.push(e[s])}return i}}function zH(){return zH=z(function*(t,n,e){const i=null!=e.batchesPerEpoch;if(U(null!=t.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),U(null!=e,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),U(null!=e.epochs&&e.epochs>0&&Number.isInteger(e.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${e.epochs}`),U(!i||e.batchesPerEpoch>0&&Number.isInteger(e.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${e.batchesPerEpoch}`),U(null==e.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=null!=e.validationData;let r,o;if(s)if(W1e(e.validationData))U(null==e.validationBatches||e.validationBatches>0&&Number.isInteger(e.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${e.validationBatches}`);else{const v=function sSt(t){if(3===t.length)throw new bi("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}(e.validationData);r=v.xs,o=v.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;c=s?l.slice().concat(l.map(v=>"val_"+v)):l.slice();const u=A1e(e.callbacks,e.yieldEvery),d=null==e.verbose?1:e.verbose,{callbackList:h,history:p}=M1e(u,d,e.epochs,null,null,function oSt(t,n){let e=null;return null!=n.batchesPerEpoch?e=n.batchesPerEpoch:Number.isFinite(t.size)&&(e=t.size),e}(n,e),null,s,c);h.setModel(t),t.history=p,yield h.onTrainBegin(),t.stopTraining_=!1;let f=null==e.initialEpoch?0:e.initialEpoch,g=yield n.iterator();for(;f<e.epochs;){const v={};yield h.onEpochBegin(f);let y=0,w=0;for(i||(g=yield n.iterator());!i||y<e.batchesPerEpoch;){const x=yield g.next();if(i&&x.done){console.warn(`You provided \`batchesPerEpoch\` as ${e.batchesPerEpoch}, but your dataset iterator ran out of data after ${y} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${e.batchesPerEpoch*e.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(null!=x.value){const{xs:T,ys:k}=j1e(t,x.value),R={};R.batch=w,R.size=T[0].shape[0],yield h.onBatchBegin(w,R);const N=[];if(null!=e.classWeight){const $=U1e(e.classWeight,t.outputNames);for(let j=0;j<$.length;++j)N.push(yield G1e(k[j],null,$[j]))}const D=T.concat(k).concat(N),F=a(D);ki(D);for(let $=0;$<l.length;++$){const Q=F[$];R[l[$]]=Q,wa(Q)}yield h.onBatchEnd(w,R),D1e(R),w++,y++}if(i?y>=e.batchesPerEpoch:x.done){if(s){let T;T=W1e(e.validationData)?$s(yield t.evaluateDataset(e.validationData,{batches:e.validationBatches})):$s(t.evaluate(r,o,{batchSize:null==e.validationBatchSize?32:e.validationBatchSize,verbose:0}));for(let k=0;k<t.metricsNames.length;++k)v[`val_${t.metricsNames[k]}`]=T[k]}break}if(t.stopTraining_)break}if(yield h.onEpochEnd(f,v),f++,t.stopTraining_)break}return yield h.onTrainEnd(),yield t.history.syncData(),t.history}finally{t.isTraining=!1}}),zH.apply(this,arguments)}function W1e(t){return"function"==typeof t.iterator}function UH(){return UH=z(function*(t,n,e){const i=null!=(e=e||{}).batches,s=t.testFunction;let r=[];if(e.verbose>0)throw new bi("Verbose mode is not implemented yet.");U(!i||e.batches>0&&Number.isInteger(e.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(e.batches)}`);const o=function aSt(t){return"function"==typeof t.next}(n)?n:yield n.iterator();let a=0,l=0;for(;!i||l<e.batches;){const c=yield o.next();if(r=Ee(()=>{if(c.value){const{xs:u,ys:d}=j1e(t,c.value),h=u.concat(d),p=Ee(()=>s(h));if(ki(h),0===l)for(let g=0;g<p.length;++g)r.push(En(0));const f=h[0].shape[0];for(let g=0;g<p.length;++g){const v=p[g],y=r[g];r[g]=Ee(()=>lt(r[g],pe(f,v))),l>0&&ki(y)}ki(p),a+=f,++l}return r}),c.done){i&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${e.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<r.length;++c){const u=r[c];r[c]=pn(r[c],a),ki(u)}return Xl(r)}),UH.apply(this,arguments)}function GH(t){U(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function R2(t,n,e){return null==t?[null]:Array.isArray(t)?t.map(i=>jv(i,n,e-n)):jv(t,n,e-n)}function jH(t,n){return Ee(()=>null==t?null:Array.isArray(t)?t.map(e=>jH(e,n)):p1e(t,"int32"===n.dtype?n:Rt(n,"int32")))}function HH(t,n){const e=[];let i=0,s=null;for(;i<t;)s=i+n,s>=t&&(s=t),e.push([i,s]),i=s;return e}function q1e(t){const n=[];t instanceof js&&(t=[t]);for(let e=0;e<t.length;++e){const i=t[e];if(1===i.rank)n.push(k2(i,1));else{if(0===i.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");n.push(i)}}return n}function hh(t,n){if(null==t)return;const e=[];if(n instanceof js)e.push(n.id);else if(Array.isArray(n))n.forEach(s=>e.push(s.id));else if(null!=n)for(const s in n)e.push(n[s].id);const i=[];if(t instanceof js)-1===e.indexOf(t.id)&&i.push(t);else if(Array.isArray(t))t.forEach(s=>{-1===e.indexOf(s.id)&&i.push(s)});else if(null!=t)for(const s in t){const r=t[s];-1===e.indexOf(r.id)&&i.push(r)}i.forEach(s=>{s.isDisposed||s.dispose()})}function WH(t){return Array.isArray(t)}function K1e(t){return!function cSt(t){return t instanceof js}(t)&&!WH(t)}function X1e(t,n,e,i=!0,s=""){if(null==n||0===n.length){if(null!=t){let o=!1;if(WH(t)&&t.length>0)o=!0;else if(K1e(t)){for(const a in t)if(t.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new ve(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(null==t)return n.map(o=>null);let r;if(K1e(t)){r=[];for(const o of n){if(null==t[o])throw new ve(`No data provided for "${o}". Need data for each key in: ${n}`);r.push(t[o])}}else if(WH(t)){if(t.length!==n.length)throw new ve(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${n.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);r=t}else{if(n.length>1)throw new ve(`The model ${s} expects ${n.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);r=[t]}if(r=q1e(r),null!=e)for(let o=0;o<n.length;++o){if(null==e[o])continue;const a=r[o];if(a.shape.length!==e[o].length)throw new ve(`Error when checking ${s}: expected ${n[o]} to have ${e[o].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<e[o].length;++l){if(0===l&&!i)continue;const u=e[o][l];if(null!=u&&u>=0&&a.shape[l]!==u)throw new ve(`${s} expected a batch of elements where each example has shape [${e[o].slice(1,e[o].length)}] (i.e.,tensor shape [*,${e[o].slice(1,e[o].length)}]) but the ${s} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return r}function Y1e(t,n,e,i=!0,s=""){let r;if(Array.isArray(t)){if(t.length!==n.length)throw new ve(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${n.length} Tensor(s), but instead got ${t.length} Tensors(s).`);r=t}else{if(n.length>1)throw new ve(`The model expects ${n.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);r=[t]}if(null!=e)for(let o=0;o<n.length;++o){if(null==e[o])continue;const a=r[o];if(a.shape.length!==e[o].length)throw new ve(`Error when checking ${s}: expected ${n[o]} to have ${e[o].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<e[o].length;++l){if(0===l&&!i)continue;const u=e[o][l];if(null!=u&&u!==a.shape[l])throw new ve(`Error when checking ${s}: expected ${n[o]} to have shape ${JSON.stringify(e[o])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}let oC=(()=>{class t extends dh{constructor(e){super(e),this.isTraining=!1}summary(e,i,s=console.log){if(!this.built)throw new ve("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");!function YCt(t,n,e,i=console.log){const s=function QCt(t){let n=!0;const e=[],i=[];for(const s in t.nodesByDepth)e.push(t.nodesByDepth[s]);for(const s of e){if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){n=!1;break}i.push(...s)}if(n)for(const s of t.layers){let r=!1;for(const o of s.inboundNodes)if(-1!==i.indexOf(o)){if(r){n=!1;break}r=!0}if(!n)break}return n}(t),r=["Layer (type)","Input Shape","Output shape","Param #"];let o;if(s?(n=n||90,e=e||[.32,.61,.89,1]):(n=n||115,e=e||[.24,.48,.7,.8,1]),e[e.length-1]<=1&&(e=e.map(u=>Math.floor(n*u))),!s){r.push("Receives inputs"),o=[];for(const u in t.nodesByDepth)o.push(...t.nodesByDepth[u])}i("_".repeat(n)),y3(r,e,i),i("=".repeat(n));const a=t.layers;for(let u=0;u<a.length;++u)s?JCt(a[u],e,i):eSt(a[u],e,o,i),i((u===a.length-1?"=":"_").repeat(n));t.checkTrainableWeightsConsistency();const l=function ZCt(t){let n;return n=l3(null!=t.collectedTrainableWeights?t.collectedTrainableWeights:t.trainableWeights),n}(t),c=l3(t.nonTrainableWeights);i(`Total params: ${l+c}`),i(`Trainable params: ${l}`),i(`Non-trainable params: ${c}`),i("_".repeat(n))}(this,e,i,s)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function XCt(t){const n={Adagrad:()=>nC.adagrad(.01),Adadelta:()=>nC.adadelta(1,.95,Qo()),Adam:()=>nC.adam(.001,.9,.999,Qo()),Adamax:()=>nC.adamax(.002,.9,.999,Qo(),0),RMSProp:()=>nC.rmsprop(.001,.9,0,Qo()),SGD:()=>nC.sgd(.01)};if(n.adagrad=n.Adagrad,n.adadelta=n.Adadelta,n.adam=n.Adam,n.adamax=n.Adamax,n.rmsprop=n.RMSProp,n.sgd=n.SGD,t in n)return n[t]();throw new ve(`Unknown Optimizer ${t}`)}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof R_))throw new ve("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let i=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ve(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);i=e.loss.map(l=>FH(l))}else{const a=FH(e.loss);this.outputs.forEach(l=>{i.push(a)})}else{e.loss=e.loss;for(const a in e.loss)if(-1===this.outputNames.indexOf(a))throw new ve(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(const a of this.outputNames)null==e.loss[a]&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),i.push(FH(e.loss[a]))}this.lossFunctions=i,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const l=this.internalOutputShapes[a];this.feedOutputNames.push(this.outputNames[a]),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[a])}const s=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Gv("loss",()=>{for(let a=0;a<this.outputs.length;++a)-1===s.indexOf(a)&&this.outputs.length>1&&(this.metricsTensors.push([this.lossFunctions[a],a]),this.metricsNames.push(this.outputNames[a]+"_loss"))});const r=function hSt(t,n){if(null==t||Array.isArray(t)&&0===t.length)return n.map(i=>[]);let e;if("string"==typeof t||"function"==typeof t)e=[t];else{if(!Array.isArray(t)&&"object"!=typeof t)throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);e=t}if(Array.isArray(e))return n.map(i=>e);{const i=[];for(const s of n){let r=e.hasOwnProperty(s)?e[s]:[];Array.isArray(r)||(r=[r]),i.push(r)}return i}}(e.metrics,this.outputNames),o=(a,l,c)=>{this.outputNames.length>1&&(l=this.outputNames[a]+"_"+l),this.metricsNames.push(l),this.metricsTensors.push([c,a])};Gv("metric",()=>{for(let a=0;a<this.outputs.length;++a)-1===s.indexOf(a)&&(u=>{let h,p,f;for(const g of u){if("string"==typeof g&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(g)){const y=this.internalOutputShapes[a];let w;1===y[y.length-1]||this.lossFunctions[a]===_3?-1!==["accuracy","acc"].indexOf(g)?p=O1e:-1!==["crossentropy","ce"].indexOf(g)&&(p=BCt):this.lossFunctions[a]===m3?-1!==["accuracy","acc"].indexOf(g)?p=VCt:-1!==["crossentropy","ce"].indexOf(g)&&(p=P1e):-1!==["accuracy","acc"].indexOf(g)?p=R1e:-1!==["crossentropy","ce"].indexOf(g)&&(p=L1e),-1!==["accuracy","acc"].indexOf(g)?w="acc":-1!==["crossentropy","ce"].indexOf(g)&&(w="ce"),f=p,h=""+w}else f=KCt(g),h=""+v3(g);let v;Gv(h,()=>{v=f}),o(a,h,v)}})(r[a])}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,i,s={}){const r=null==s.batchSize?32:s.batchSize;GH(r);const a=this.standardizeUserDataXY(e,i,!0,r);try{const l=a[0].concat(a[1]);return this.makeTestFunction(),Xl(this.testLoop(this.testFunction,l,r,s.verbose,s.steps))}finally{hh(a[0],e),hh(a[1],i)}}evaluateDataset(e,i){var s=this;return z(function*(){return s.makeTestFunction(),function lSt(t,n,e){return UH.apply(this,arguments)}(s,e,i)})()}checkNumSamples(e,i,s,r="steps"){let o;if(null!=s){if(o=null,null!=i)throw new ve(`If ${r} is set, batchSize must be null or undefined.Got batchSize = ${i}`)}else{if(null==e)throw new ve(`Either the input data should have a defined shape, or ${r} shoud be specified.`);o=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return o}execute(e,i){if(Array.isArray(i)&&0===i.length)throw new ve("`outputs` is an empty Array, which is not allowed.");const s=Array.isArray(i),o=this.retrieveSymbolicTensors(s?i:[i]),a=new j_;if(e instanceof js&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ve(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let c=0;c<this.inputs.length;++c)a.add(this.inputs[c],e[c])}else for(const c of this.inputs){const u=e[c.name];if(null==u)throw new ve(`No value is provided for the model's input ${c.name}`);a.add(c,u)}const l=M2(o,a);return s?l:l[0]}retrieveSymbolicTensors(e){const i=Vv(null,e.length);let s=e.length;for(const r of this.layers){const o=Array.isArray(r.output)?r.output:[r.output],a=o.map(l=>l.name);for(let l=0;l<e.length;++l){const c=a.indexOf(e[l]);if(-1!==c&&(i[l]=o[c],s--),0===s)break}if(0===s)break}if(s>0){const r=[];throw i.forEach((o,a)=>{null==o&&r.push(e[a])}),new ve(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(r)}`)}return i}predictLoop(e,i=32,s=!1){return Ee(()=>{const r=this.checkNumSamples(e);if(s)throw new bi("Verbose predictLoop() is not implemented yet.");const o=HH(r,i),a=this.outputs.map(l=>[]);for(let l=0;l<o.length;++l)Ee(()=>{const h=R2(e,o[l][0],o[l][1]),p=[];if(Array.isArray(h))for(let g=0;g<h.length;++g)p.push({key:this.inputs[g],value:h[g]});else p.push({key:this.inputs[0],value:h});const f=new j_(p);return M2(this.outputs,f)}).forEach((u,d)=>a[d].push(u));return Xl(a.map(l=>mo(l,0)))})}predict(e,i={}){const s=q1e(e);Y1e(s,this.inputNames,this.feedInputShapes,!1);try{const r=null==i.batchSize?32:i.batchSize;return GH(r),this.predictLoop(s,r)}finally{hh(s,e)}}predictOnBatch(e){Y1e(e,this.inputNames,this.feedInputShapes,!0);const i=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,i)}standardizeUserDataXY(e,i,s=!0,r){if(null==this.optimizer_)throw new od("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const o=[];for(let a=0;a<this.feedOutputShapes.length;++a){const l=this.feedOutputShapes[a];o.push(this.feedLossFns[a]===m3?l.slice(0,l.length-1).concat([1]):l)}if(function uSt(t,n){const i=z_(t.map(r=>r.shape[0]));i.sort();const s=z_(n.map(r=>r.shape[0]));if(s.sort(),i.length>1)throw new ve(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(r=>r.shape))}`);if(s.length>1)throw new ve(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(n.map(r=>r.shape))}`);if(i.length>0&&s.length>0&&!es(i,s))throw new ve(`Input Tensors should have the same number of samples as target Tensors. Found ${i[0]} input sample(s) and ${s[0]} target sample(s).`)}(e=X1e(e,this.feedInputNames,this.feedInputShapes,!1,"input"),i=X1e(i,this.feedOutputNames,o,!1,"target")),function dSt(t,n,e){const i=[f3,_3,O2];for(let s=0;s<t.length;++s){const r=t[s],o=n[s],a=e[s];if(null!=o){if(o===O2&&1===r.shape[r.shape.length-1])throw new ve(`You are passing a target array of shape ${r.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==i.indexOf(o)){const l=r.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){const h=c[u];if(null!=h&&l[u]!==h)throw new ve(`A target Tensor with shape ${r.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}(i,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&e[0].shape[0]%r!=0)throw new ve(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${r}. Found: ${e[0].shape[0]} sample(s).`);return[e,i]}standardizeUserData(e,i,s,r,o=!0,a){var l=this;return z(function*(){const[c,u]=l.standardizeUserDataXY(e,i,o,a);if(null!=s)throw new Error("sample weight is not supported yet.");let d=null;if(null!=r){const h=U1e(r,l.outputNames);d=[];for(let p=0;p<h.length;++p)d.push(yield G1e(u[p],null,h[p]))}return[c,u,d]})()}testLoop(e,i,s,r=0,o){return Ee(()=>{const a=this.checkNumSamples(i,s,o,"steps"),l=[];if(r>0)throw new bi("Verbose mode is not implemented yet.");if(null!=o)throw new bi("steps mode in testLoop() is not implemented yet");{const c=HH(a,s),u=il(lh(0,a));for(let d=0;d<c.length;++d){const h=c[d][0],p=c[d][1],f=jv(u,h,p-h),g=jH(i,f),v=e(g);if(0===d)for(let y=0;y<v.length;++y)l.push(En(0));for(let y=0;y<v.length;++y)l[y]=lt(l[y],pe(p-h,v[y]))}for(let d=0;d<l.length;++d)l[d]=pn(l[d],a)}return l})}getDedupedMetricsNames(){const e=this.metricsNames,i=[];for(let s=0;s<e.length;++s){const r=e[s];let o=r;n1e(e,r)>1&&(o+=`_${n1e(e.slice(0,s),r)}`),i.push(o)}return i}makeTrainFunction(){return e=>{const i=[],s=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),a=[],c=this.collectedTrainableWeights.map(h=>h.read());return[this.optimizer_.minimize(()=>{const h=[];for(let v=0;v<this.inputs.length;++v)h.push({key:this.inputs[v],value:s[v]});const p=new j_(h),f=M2(this.outputs,p,{training:!0});let g;for(let v=0;v<this.lossFunctions.length;++v){let w=(0,this.lossFunctions[v])(r[v],f[v]);null!=o[v]&&(w=nSt(w,o[v]));const x=to(w);i.push(x),g=0===v?w:lt(g,w)}for(let v=0;v<this.metricsTensors.length;++v){let y;if(this.outputs.length>1&&v<this.outputs.length)y=i[v];else{const x=this.metricsTensors[v][1];y=to((0,this.metricsTensors[v][0])(r[x],f[x]))}wa(y),a.push(y)}return g=to(g),this.calculateLosses().forEach(v=>{g=lt(g,v)}),g},!0,c)].concat(a)}}makeTestFunction(){this.testFunction=e=>Ee(()=>{const i=[];let s;const r=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let u=0;u<this.inputs.length;++u)a.push({key:this.inputs[u],value:r[u]});const l=new j_(a),c=M2(this.outputs,l);for(let u=0;u<this.lossFunctions.length;++u){const h=to((0,this.lossFunctions[u])(o[u],c[u]));s=0===u?h:lt(s,h),i.push(s)}for(let u=0;u<this.metricsTensors.length;++u){const h=this.metricsTensors[u][1],p=to((0,this.metricsTensors[u][0])(o[h],c[h]));i.push(p)}return i})}fit(e,i,s={}){var r=this;return z(function*(){if(r.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let o,a,l,c,u,d,h,p,f;r.isTraining=!0;try{const g=null==s.batchSize?32:s.batchSize;GH(g);const y=yield r.standardizeUserData(e,i,s.sampleWeight,s.classWeight,!1,g);o=y[0],a=y[1],f=y[2];let x,w=!1;if(null!=s.validationData&&s.validationData.length>0){if(w=!0,2!==s.validationData.length)throw 3===s.validationData.length?new bi("validationData including sample weights is not supported yet."):new ve(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${s.validationData} is invalid.`);u=s.validationData[0],d=s.validationData[1];const Q=yield r.standardizeUserData(u,d,null,null,!0,g);h=Q[0],p=Q[1],x=h.concat(p)}else if(null!=s.validationSplit&&s.validationSplit>0&&s.validationSplit<1){w=!0;const j=Math.floor(o[0].shape[0]*(1-s.validationSplit)),Q=o[0].shape[0];h=R2(o,j,Q),l=o,o=R2(o,0,j),p=R2(a,j,Q),c=a,a=R2(a,0,j),x=h.concat(p)}else null!=s.validationSteps&&(w=!0);const T=o.concat(a).concat(f);r.checkTrainableWeightsConsistency();const k=r.makeTrainFunction(),R=r.getDedupedMetricsNames();let N,D;w?(r.makeTestFunction(),N=r.testFunction,D=R.slice().concat(R.map(j=>"val_"+j))):(N=null,x=[],D=R.slice());const F=A1e(s.callbacks,s.yieldEvery);return yield r.fitLoop(k,T,R,g,s.epochs,s.verbose,F,N,x,s.shuffle,D,s.initialEpoch,null,null)}finally{r.isTraining=!1,hh(o,e),hh(a,i),hh(l,e),hh(c,i),hh(h,u),hh(p,d),null!=f&&ki(f)}})()}fitLoop(e,i,s,r,o,a,l,c,u,d,h,p,f,g){var v=this;return z(function*(){null==r&&(r=32),null==o&&(o=1),null==d&&(d=!0),null==p&&(p=0);let y=!1;if(null!=c&&null!=u&&(y=!0),null!=g&&(y=!0,null==f))throw new ve("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const w=v.checkNumSamples(i,r,f,"steps_per_epoch");let x;null!=w&&(x=lh(0,w)),null==a&&(a=1);const{callbackList:T,history:k}=M1e(l,a,o,p,w,f,r,y,h);T.setModel(v),v.history=k,yield T.onTrainBegin(),v.stopTraining_=!1;for(let R=p;R<o;++R){yield T.onEpochBegin(R);const N={};if(null!=f)throw new bi("stepsPerEpoch mode is not implemented yet.");{if("batch"===d)throw new bi("batch shuffling is not implemneted yet");d&&Vge(x);const D=il(x),F=HH(w,r);for(let $=0;$<F.length;++$){const j={};if(yield T.onBatchBegin($,j),Ee(()=>{const Q=F[$][0],Y=F[$][1],ce=jv(D,Q,Y-Q);j.batch=$,j.size=Y-Q;const Ce=jH(i,ce),Z=e(Ce);for(let le=0;le<s.length;++le){const be=Z[le];j[s[le]]=be,wa(be)}if($===F.length-1&&y){const le=v.testLoop(c,u,r);for(let te=0;te<s.length;++te){const be=s[te],fe=le[te];wa(fe),N["val_"+be]=fe}}}),yield T.onBatchEnd($,j),D1e(j),v.stopTraining_)break}D.dispose()}if(yield T.onEpochEnd(R,N),v.stopTraining_)break}return yield T.onTrainEnd(),yield v.history.syncData(),v.history})()}fitDataset(e,i){var s=this;return z(function*(){return function rSt(t,n,e){return zH.apply(this,arguments)}(s,e,i)})()}trainOnBatch(e,i){var s=this;return z(function*(){const r=yield s.standardizeUserData(e,i),o=r[0],a=r[1],c=s.makeTrainFunction()(o.concat(a)),u=[];for(const d of c){const h=yield d.data();u.push(h[0])}return ki(c),hh(r[0],e),hh(r[1],i),Xl(u)})()}getNamedWeights(e){const i=[],s=null!=e&&e.trainableOnly,r=s?this.trainableWeights:this.weights,o=this.getWeights(s);for(let a=0;a<r.length;++a)s&&!r[a].trainable||i.push({name:r[a].originalName,tensor:o[a]});return i}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const i=SG().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=i-SG().numTensors}return e}getLossIdentifiers(){let e;if("string"==typeof this.loss)e=Hf(this.loss);else if(Array.isArray(this.loss)){for(const i of this.loss)if("string"!=typeof i)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(i=>Hf(i))}else{const i=Object.keys(this.loss);e={};const s=this.loss;for(const r of i){if("string"!=typeof s[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=Hf(s[r])}}return e}getMetricIdentifiers(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[Hf(v3(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Hf(v3(e)));{const e={};for(const i in this.metrics)e[i]=Hf(v3(this.metrics[i]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const s=Wf(PH(e.optimizer_config));let r,o;if("string"==typeof e.loss)r=zv(e.loss);else if(Array.isArray(e.loss))r=e.loss.map(a=>zv(a));else if(null!=e.loss){r={};for(const a in e.loss)r[a]=zv(e.loss[a])}if(Array.isArray(e.metrics))o=e.metrics.map(a=>zv(a));else if(null!=e.metrics){o={};for(const a in e.metrics)o[a]=zv(e.metrics[a])}this.compile({loss:r,metrics:o,optimizer:s})}save(e,i){var s=this;return z(function*(){if("string"==typeof e){const d=Dbe(e);if(0===d.length)throw new ve(`Cannot find any save handlers for URL '${e}'`);if(d.length>1)throw new ve(`Found more than one (${d.length}) save handlers for URL '${e}'`);e=d[0]}if(null==e.save)throw new ve("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=yield xG(s.getNamedWeights(i)),c={modelTopology:s.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v4.21.0",convertedBy:null};if(null!=i&&i.includeOptimizer&&null!=s.optimizer){c.trainingConfig=s.getTrainingConfig();const d="optimizer",{data:h,specs:p}=yield xG(yield s.optimizer.getWeights(),d);r.specs.push(...p),r.data=Ebe([r.data,h])}return null!=s.userDefinedMetadata&&(B1e(s.userDefinedMetadata,s.name,!0),c.userDefinedMetadata=s.userDefinedMetadata),c.weightData=r.data,c.weightSpecs=r.specs,e.save(c)})()}setUserDefinedMetadata(e){B1e(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}return t.className="Model",t})();pt(oC),pt((()=>{class t extends oC{}return t.className="Functional",t})()),pt((()=>{class t extends oC{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:n3("sequential_"),null!=e.layers)for(const i of e.layers)this.add(i)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(s=>s<0))throw new ve(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const i=e instanceof t||e instanceof oC;let s;if(i){if(s=e,1!==s.outputs.length)throw new ve("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==s.inputs.length)throw new ve("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new ve("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const r=function mCt(t){if(null==t.batchShape&&null==t.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=t.batchShape&&null!=t.shape)throw new ve("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let n=t.batchShape;null!=t.shape&&null==n&&(n=[null].concat(t.shape));let e=t.dtype;return null==e&&(e="float32"),new u3({batchInputShape:n,name:t.name,dtype:e,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(r)}if(i)this.outputs=s.outputs,this.inputs=s.inputs;else{if(1!==e.inboundNodes.length)throw new ve(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(1!==e.inboundNodes[0].outputTensors.length)throw new ve("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=E1e(this.outputs[0])}this.inboundNodes=[],new c3({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Vv(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(r=>r.shape),outputShapes:this.outputs[0].shape})}else{const r=e.apply(this.outputs[0]);if(Array.isArray(r))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[r],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,i){return null==this.model&&this.build(),this.model.call(e,i)}build(e){if(gs(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new oC({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,i,s=console.log){this.built||this.build(),super.summary(e,i,s)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,i,s={}){if(!this.built)throw new od("The model needs to be compiled before being used.");return this.model.evaluate(e,i,s)}evaluateDataset(e,i){var s=this;return z(function*(){if(!s.built)throw new od("The model needs to be compiled before being used.");return s.model.evaluateDataset(e,i)})()}predict(e,i={}){return null==this.model&&this.build(),this.model.predict(e,i)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}fit(e,i,s={}){var r=this;return z(function*(){if(!r.built)throw new od("The model needs to be compiled before being used.");return r.model.fit(e,i,s)})()}fitDataset(e,i){var s=this;return z(function*(){if(!s.built)throw new od("The model needs to be compiled before being used.");return s.model.fitDataset(e,i)})()}trainOnBatch(e,i){var s=this;return z(function*(){return s.model.trainOnBatch(e,i)})()}static fromConfig(e,i,s={},r=!1){let o,a={};if(i instanceof Array){if(null==i[0].className||"Merge"===i[0].className)throw new ve("Legacy serialization format not supported yet.");o=i}else U(null!=i.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),o=i.layers,delete i.layers,a=i;const l=new e(a);if(!(l instanceof t))throw new bi(`Sequential.fromConfig called on non-Sequential input: ${l}`);for(const c of o){const d=Wf(c,void 0,r);r&&d.setFastWeightInitDuringBuild(!0),l.add(d)}return l}set stopTraining(e){if(null==this.model)throw new ve("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new ve("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const i of this.layers){const s={};s.className=i.getClassName(),s.config=i.getConfig(),e.push(s)}return{name:this.name,layers:e}}}return t.className="Sequential",t})());class sl extends Gw{getConfig(){return{}}}pt((()=>{class t extends sl{apply(e,i=1){return function eCt(t,n=1){if(1!==n)throw new bi(`Support for alpha values other than 1 (${n}) is not implemented yet.`);return f2(t)}(e,i)}}return t.className="elu",t})()),pt((()=>{class t extends sl{apply(e){return Ij(e)}}return t.className="selu",t})()),pt((()=>{class t extends sl{apply(e){return vp(e)}}return t.className="relu",t})()),pt((()=>{class t extends sl{apply(e){return Ee(()=>Fv(6,vp(e)))}}return t.className="relu6",t})()),pt((()=>{class t extends sl{apply(e){return e}}return t.className="linear",t})()),pt((()=>{class t extends sl{apply(e){return gp(e)}}return t.className="sigmoid",t})()),pt((()=>{class t extends sl{apply(e){return function nCt(t){return Ee(()=>{const n=lt(.5,pe(.2,t));return xc(n,0,1)})}(e)}}return t.className="hardSigmoid",t})()),pt((()=>{class t extends sl{apply(e){return Yw(e)}}return t.className="softplus",t})()),pt((()=>{class t extends sl{apply(e){return function tCt(t){return Ee(()=>pn(t,lt(Xo(t),1)))}(e)}}return t.className="softsign",t})()),pt((()=>{class t extends sl{apply(e){return Ov(e)}}return t.className="tanh",t})());let Z1e=(()=>{class t extends sl{apply(e,i=-1){return jL(e,i)}}return t.className="softmax",t})();function W_(t){return t.getClassName()}function YH(t,n={}){return T2(t,Ju.getMap().classNameMap,n,"activation")}function q_(t){if(null==t){return YH({className:"linear",config:{}})}if("string"==typeof t){const n={};return n.className=t,n.config={},YH(n)}return t instanceof sl?t:YH(t)}pt(Z1e),pt((()=>{class t extends sl{apply(e,i=-1){return gj(e,i)}}return t.className="logSoftmax",t})()),pt((()=>{class t extends sl{apply(e){return Ee(()=>Ee(()=>{const i=Math.sqrt(2),s=pe(.5,lt(1,fj(pn(e,i))));return pe(e,s)}))}}return t.className="gelu",t})()),pt((()=>{class t extends sl{apply(e){return Ee(()=>pe(.5,pe(e,lt(1,Ov(pe(Fa(pn(2,Math.PI)),lt(e,pe(.044715,$f(e,3)))))))))}}return t.className="gelu_new",t})()),pt((()=>{class t extends sl{apply(e){return Ee(()=>pe(e,Ov(Yw(e))))}}return t.className="mish",t})()),pt((()=>{class t extends sl{apply(e,i=1){return Ee(()=>pe(gp(pe(e,i)),e))}}return t.className="swish",t})());class Q1e extends Gw{}let QH=(()=>{class t extends Q1e{constructor(e){super(),function ZH(t){if(null!=t&&"object"!=typeof t)throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return Ee(()=>{let i=Zo([1]);return this.hasL1&&(i=lt(i,un(pe(this.l1,Xo(e))))),this.hasL2&&(i=lt(i,un(pe(this.l2,D2(e))))),ge(i,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,i){return new e({l1:i.l1,l2:i.l2})}}return t.className="L1L2",t})();pt(QH);const J1e={l1l2:"L1L2"};function cr(t){return wH(t)}function e0e(t,n={}){return T2(t,Ju.getMap().classNameMap,n,"regularizer")}function Lr(t){return null==t?null:"string"==typeof t?e0e({className:t in J1e?J1e[t]:t,config:{}}):t instanceof Q1e?t:e0e(t)}function aC(t,n,e){if("number"==typeof t)return Vv(t,n);if(t.length!==n)throw new ve(`The ${e} argument must be an integer or tuple of ${n} integers. Received: ${t.length} elements.`);for(let i=0;i<n;++i){const s=t[i];if(!Kwt(s))throw new ve(`The ${e} argument must be an integer or tuple of ${n} integers. Received: ${JSON.stringify(t)} including a non-integer number ${s}`)}return t}function ph(t,n,e,i,s=1){if(null==t)return t;let o;return o="same"===e?t:t-(n+(n-1)*(s-1))+1,Math.floor((o+i-1)/i)}function Ip(t,n,e,i){if(null==t)return null;if("valid"===i)t=t*n+G_([e-n,0]);else{if("same"!==i)throw new ve(`Unsupport padding mode: ${i}.`);t*=n}return t}function JH(t,n){return Ee(()=>(bo(n),"channelsFirst"===n?ss(t,[0,2,3,1]):t))}function t0e(t,n){return Ee(()=>(bo(n),"channelsFirst"===n?ss(t,[0,2,3,4,1]):t))}function eW(t,n,e,i=[1,1],s="valid",r,o,a=null){return Ee(()=>{if(null==r&&(r="channelsLast"),bo(r),3!==t.rank&&4!==t.rank)throw new ve(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(3!==n.rank&&4!==n.rank)throw new ve(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=JH(t,r);if("causal"===s)throw new bi("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=cye({x:l,filter:n,strides:i,pad:"same"===s?"same":"valid",dilations:o,dataFormat:"NHWC",bias:e,activation:a}),"channelsFirst"===r&&(l=ss(l,[0,3,1,2])),l})}pt((()=>{class t extends Ui{constructor(e){super(e??{}),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,i){e=Wn(e);let s=vp(e);return null!=this.maxValue&&(s=xc(s,0,this.maxValue)),s}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},i=super.getConfig();return Object.assign(e,i),e}}return t.className="ReLU",t})()),pt((()=>{class t extends Ui{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,i){const s=Wn(e);return OL(s,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},i=super.getConfig();return Object.assign(e,i),e}}return t.className="LeakyReLU",t})()),pt((()=>{class t extends Ui{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Fr(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Lr(e.alphaRegularizer),this.alphaConstraint=ta(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new ve(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`);this.sharedAxes=[e.sharedAxes]}}build(e){const i=(e=gs(e)).slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)i[r-1]=1;this.alpha=this.addWeight("alpha",i,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const s={};if(null!=this.sharedAxes)for(let r=1;r<e.length;++r)s[r]=e[r];this.inputSpec=[new Jo({ndim:e.length,axes:s})],this.built=!0}call(e,i){return e=Wn(e),zL(e,this.alpha.read())}getConfig(){const e={alphaInitializer:jr(this.alphaInitializer),alphaRegularizer:cr(this.alphaRegularizer),alphaConstraint:ea(this.alphaConstraint),sharedAxes:this.sharedAxes},i=super.getConfig();return Object.assign(e,i),e}}return t.className="PReLU",t})()),pt((()=>{class t extends Ui{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new bi(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,i){const s=Wn(e);return f2(s)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},i=super.getConfig();return Object.assign(e,i),e}}return t.className="ELU",t})()),pt((()=>{class t extends Ui{constructor(e){super(e??{}),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,i){const s=Wn(e);return pe(s,Rt(Tc(s,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},i=super.getConfig();return Object.assign(e,i),e}}return t.className="ThresholdedReLU",t})()),pt((()=>{class t extends Ui{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new Z1e).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,i){return Ee(()=>{let s=Wn(e);const r=i.mask;if(null!=r){const o=pe(Xt(Ic(s.shape),Rt(r,s.dtype)),En(-1e9));s=lt(s,o)}return this.axis instanceof Array?this.axis.length>1?Ec(Xt(s,FL(s,this.axis,!0))):this.softmax(s,this.axis[0]):this.softmax(s,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Softmax",t})());class w3 extends Ui{constructor(n,e){if(super(e),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",w3.verifyArgs(e),this.rank=n,xa(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new bi(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=aC(e.kernelSize,n,"kernelSize"),this.strides=aC(null==e.strides?1:e.strides,n,"strides"),this.padding=null==e.padding?"valid":e.padding,_u(this.padding),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,bo(this.dataFormat),this.activation=q_(e.activation),this.useBias=null==e.useBias||e.useBias,this.biasInitializer=Fr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=ta(e.biasConstraint),this.biasRegularizer=Lr(e.biasRegularizer),this.activityRegularizer=Lr(e.activityRegularizer),this.dilationRate=aC(null==e.dilationRate?1:e.dilationRate,n,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new ve(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(2===this.rank){if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new ve(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(3===this.rank)if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new ve(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}static verifyArgs(n){if(mu("kernelSize"in n,"required key 'kernelSize' not in config"),"number"!=typeof n.kernelSize&&!SH(n.kernelSize,"number",1,3))throw new ve(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(n.kernelSize)}.`)}getConfig(){const n={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:W_(this.activation),useBias:this.useBias,biasInitializer:jr(this.biasInitializer),biasRegularizer:cr(this.biasRegularizer),activityRegularizer:cr(this.activityRegularizer),biasConstraint:ea(this.biasConstraint)},e=super.getConfig();return Object.assign(n,e),n}}class lC extends w3{constructor(n,e){super(n,e),this.kernel=null,lC.verifyArgs(e),this.filters=e.filters,xa(this.filters,"filters"),this.kernelInitializer=Fr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=ta(e.kernelConstraint),this.kernelRegularizer=Lr(e.kernelRegularizer)}build(n){n=gs(n);const e="channelsFirst"===this.dataFormat?1:n.length-1;if(null==n[e])throw new ve(`The channel dimension of the input should be defined. Found ${n[e]}`);const i=n[e],s=this.kernelSize.concat([i,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[e]:i}}],this.built=!0}call(n,e){return Ee(()=>{let i;n=Wn(n);const s=null==this.bias?null:this.bias.read(),r=s1e(this.activation.getClassName());if(null!=r&&2===this.rank)i=eW(n,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)i=function n0e(t,n,e,i=1,s="valid",r,o=1){return Ee(()=>{if(null==r&&(r="channelsLast"),bo(r),3!==t.shape.length)throw new ve(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(3!==n.shape.length)throw new ve(`The kernel for a conv1dWithBias operation should be 3, but is ${n.shape.length} instead`);if(null!=e&&1!==e.shape.length)throw new ve(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if("channelsFirst"===r&&(t=ss(t,[0,2,1])),"causal"===s)throw new bi("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=lj(t,n,i,"same"===s?"same":"valid","NWC",o);return null!=e&&(a=uh(a,e)),a})}(n,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)i=eW(n,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new bi("convolutions greater than 3D are not implemented yet.");i=function i0e(t,n,e,i=[1,1,1],s="valid",r,o){return Ee(()=>{if(null==r&&(r="channelsLast"),bo(r),4!==t.rank&&5!==t.rank)throw new ve(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(4!==n.rank&&5!==n.rank)throw new ve(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=t0e(t,r);if("causal"===s)throw new bi("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=Ave(a,n,i,"same"===s?"same":"valid","NDHWC",o),null!=e&&(a=uh(a,e)),"channelsFirst"===r&&(a=ss(a,[0,4,1,2,3])),a})}(n,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(i=this.activation.apply(i))}return i})}computeOutputShape(n){n=gs(n);const e=[],i="channelsLast"===this.dataFormat?n.slice(1,n.length-1):n.slice(2);for(let r=0;r<i.length;++r){const o=ph(i[r],this.kernelSize[r],this.padding,this.strides[r],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);e.push(o)}let s=[n[0]];return"channelsLast"===this.dataFormat?(s=s.concat(e),s.push(this.filters)):(s.push(this.filters),s=s.concat(e)),s}getConfig(){const n={filters:this.filters,kernelInitializer:jr(this.kernelInitializer),kernelRegularizer:cr(this.kernelRegularizer),kernelConstraint:ea(this.kernelConstraint)},e=super.getConfig();return Object.assign(n,e),n}static verifyArgs(n){if(!("filters"in n)||"number"!=typeof n.filters||n.filters<1)throw new ve(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(n.filters)}`)}}let s0e=(()=>{class t extends lC{constructor(e){super(2,e),t.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!SH(e.kernelSize,"number",1,2))throw new ve(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv2D",t})();pt(s0e);let r0e=(()=>{class t extends lC{constructor(e){super(3,e),t.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new ve(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv3D",t})();pt(r0e),pt((()=>{class t extends s0e{constructor(e){if(super(e),this.inputSpec=[new Jo({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new ve(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(4!==(e=gs(e)).length)throw new ve("Input should have rank 4; Received input shape: "+JSON.stringify(e));const i="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[i])throw new ve("The channel dimension of the inputs should be defined. Found `None`.");const s=e[i],r=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Jo({ndim:4,axes:{[i]:s}})],this.built=!0}call(e,i){return Ee(()=>{let s=Wn(e);if(4!==s.shape.length)throw new ve(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const r=s.shape;let a,l;"channelsFirst"===this.dataFormat?(a=2,l=3):(a=1,l=2);const u=r[l],h=this.kernelSize[1],f=this.strides[1],y=[r[0],Ip(r[a],this.strides[0],this.kernelSize[0],this.padding),Ip(u,f,h,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(s=ss(s,[0,2,3,1]));let w=uj(s,this.kernel.read(),y,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(w=ss(w,[0,3,1,2])),null!=this.bias&&(w=uh(w,this.bias.read(),this.dataFormat)),null!=this.activation&&(w=this.activation.apply(w)),w})}computeOutputShape(e){const i=(e=gs(e)).slice();let s,r,o;"channelsFirst"===this.dataFormat?(s=1,r=2,o=3):(s=3,r=1,o=2);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.strides[0],u=this.strides[1];return i[s]=this.filters,i[r]=Ip(i[r],c,a,this.padding),i[o]=Ip(i[o],u,l,this.padding),i}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}return t.className="Conv2DTranspose",t})()),pt((()=>{class t extends r0e{constructor(e){if(super(e),this.inputSpec=[new Jo({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new ve(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(5!==(e=gs(e)).length)throw new ve("Input should have rank 5; Received input shape: "+JSON.stringify(e));const i="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[i])throw new ve("The channel dimension of the inputs should be defined. Found `None`.");const s=e[i],r=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Jo({ndim:5,axes:{[i]:s}})],this.built=!0}call(e,i){return Ee(()=>{let s=Wn(e);if(5!==s.shape.length)throw new ve(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const r=s.shape;let a,l,c;"channelsFirst"===this.dataFormat?(c=2,a=3,l=4):(c=1,a=2,l=3);const d=r[a],h=r[l],f=this.kernelSize[1],g=this.kernelSize[2],y=this.strides[1],w=this.strides[2],R=[r[0],Ip(r[c],this.strides[0],this.kernelSize[0],this.padding),Ip(d,y,f,this.padding),Ip(h,w,g,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(s=ss(s,[0,2,3,4,1]));let N=Nve(s,this.kernel.read(),R,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(N=ss(N,[0,4,1,2,3])),null!==this.bias&&(N=uh(N,this.bias.read(),this.dataFormat)),null!==this.activation&&(N=this.activation.apply(N)),N})}computeOutputShape(e){const i=(e=gs(e)).slice();let s,r,o,a;"channelsFirst"===this.dataFormat?(s=1,r=2,o=3,a=4):(s=4,r=1,o=2,a=3);const l=this.kernelSize[0],c=this.kernelSize[1],u=this.kernelSize[2],d=this.strides[0],h=this.strides[1],p=this.strides[2];return i[s]=this.filters,i[r]=Ip(i[r],d,l,this.padding),i[o]=Ip(i[o],h,c,this.padding),i[a]=Ip(i[a],p,u,this.padding),i}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}return t.className="Conv3DTranspose",t})());let _St=(()=>{class t extends lC{constructor(e,i){if(super(e,i),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==i.filters)throw new ve("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=i.kernelInitializer||null!=i.kernelRegularizer||null!=i.kernelConstraint)throw new ve("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=i.padding&&"same"!==i.padding&&"valid"!==i.padding)throw new ve(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(i.padding)}`);this.depthMultiplier=null==i.depthMultiplier?1:i.depthMultiplier,this.depthwiseInitializer=Fr(i.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Lr(i.depthwiseRegularizer),this.depthwiseConstraint=ta(i.depthwiseConstraint),this.pointwiseInitializer=Fr(i.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Lr(i.pointwiseRegularizer),this.pointwiseConstraint=ta(i.pointwiseConstraint)}build(e){if((e=gs(e)).length<this.rank+2)throw new ve(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const i="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[i]||e[i]<0)throw new ve(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[i])}`);const s=e[i],r=this.kernelSize.concat([s,this.depthMultiplier]),o=[];for(let l=0;l<this.rank;++l)o.push(1);o.push(s*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",o,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):null,this.inputSpec=[new Jo({ndim:this.rank+2,axes:{[i]:s}})],this.built=!0}call(e,i){return Ee(()=>{let s;if(e=Wn(e),1===this.rank)throw new bi("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=ss(e,[0,2,3,1])),s=kj(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(s=uh(s,this.bias.read(),this.dataFormat)),null!=this.activation&&(s=this.activation.apply(s)),"channelsFirst"===this.dataFormat&&(s=ss(s,[0,3,1,2])),s})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=jr(this.depthwiseInitializer),e.pointwiseInitializer=jr(this.pointwiseInitializer),e.depthwiseRegularizer=cr(this.depthwiseRegularizer),e.pointwiseRegularizer=cr(this.pointwiseRegularizer),e.depthwiseConstraint=ea(this.depthwiseConstraint),e.pointwiseConstraint=ea(this.pointwiseConstraint),e}}return t.className="SeparableConv",t})();function o0e(t,n,e,i){if(Array.isArray(t)){if(null!=n||null!=e)throw new ve("When inputs is an array, neither initialState or constants should be provided");null!=i&&(e=t.slice(t.length-i,t.length),t=t.slice(0,t.length-i)),t.length>1&&(n=t.slice(1,t.length)),t=t[0]}function s(r){return null==r||Array.isArray(r)?r:[r]}return{inputs:t,initialState:n=s(n),constants:e=s(e)}}function a0e(t,n,e,i=!1,s,r,o=!1,a=!1){return Ee(()=>{const l=n.shape.length;if(l<3)throw new ve(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(lh(2,l));if(n=ss(n,c),null!=r)throw new bi("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=s&&((s=Rt(Rt(s,"bool"),"float32")).rank===l-1&&(s=nl(s,-1)),s=ss(s,c)),i&&(n=id(n,0),null!=s&&(s=id(s,0)));const u=[];let d,h=e;const p=n.shape[0],f=sd(n);let g,v;null!=s&&(g=sd(s));for(let y=0;y<p;++y){const w=f[y],x=Ee(()=>t(w,h));if(null==s)d=x[0],h=x[1];else{const T=Ee(()=>{const k=g[y],R=Xt(fu(k),k);return{output:lt(pe(x[0],k),pe(h[0],R)),newStates:h.map((F,$)=>lt(pe(x[1][$],k),pe(F,R)))}});d=T.output,h=T.newStates}a&&u.push(d)}return a&&(v=Kl(u,1)),[d,v,h]})}pt((()=>{class t extends _St{constructor(e){super(2,e)}}return t.className="SeparableConv2D",t})()),pt((()=>{class t extends lC{constructor(e){super(1,e),t.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!SH(e.kernelSize,"number",1,1))throw new ve(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv1D",t})()),pt((()=>{class t extends Ui{constructor(e){super(e),this.cropping="number"==typeof e.cropping?[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,i){return Ee(()=>{if(e=Wn(e),"channelsLast"===this.dataFormat){const s=r3(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return r3(s,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const s=r3(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return r3(s,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Cropping2D",t})()),pt((()=>{class t extends Ui{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,bo(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,function Hwt(t){Uv(zwt,"InterpolationFormat",t)}(this.interpolation)}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],null==e[2]?null:this.size[0]*e[2],null==e[3]?null:this.size[1]*e[3]]:[e[0],null==e[1]?null:this.size[0]*e[1],null==e[2]?null:this.size[1]*e[2],e[3]]}call(e,i){return Ee(()=>{let s=Wn(e);const r=s.shape;if("channelsFirst"===this.dataFormat){s=ss(s,[0,2,3,1]);const o=this.size[0]*r[2],a=this.size[1]*r[3],l="nearest"===this.interpolation?rd.resizeNearestNeighbor(s,[o,a]):rd.resizeBilinear(s,[o,a]);return ss(l,[0,3,1,2])}{const o=this.size[0]*r[1],a=this.size[1]*r[2];return"nearest"===this.interpolation?rd.resizeNearestNeighbor(s,[o,a]):rd.resizeBilinear(s,[o,a])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},i=super.getConfig();return Object.assign(e,i),e}}return t.className="UpSampling2D",t})()),pt((()=>{class t extends w3{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=Fr(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=ta(e.depthwiseConstraint),this.depthwiseRegularizer=Lr(e.depthwiseRegularizer)}build(e){if((e=gs(e)).length<4)throw new ve(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const i="channelsFirst"===this.dataFormat?1:3;if(null==e[i]||e[i]<0)throw new ve(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[i]}).`);const s=e[i];this.depthwiseKernel=this.addWeight("depthwise_kernel",[this.kernelSize[0],this.kernelSize[1],s,this.depthMultiplier],null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[s*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(e,i){return Ee(()=>{let s=function gSt(t,n,e=[1,1],i="valid",s,r){return Ee(()=>{null==s&&(s="channelsLast"),bo(s);let o=JH(t,s);if(4!==t.rank)throw new ve(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(4!==n.rank)throw new ve(`depthwiseKernel is required to be 4-D, but is instead ${n.rank}-D`);return o=p2(o,n,e,"same"===i?"same":"valid","NHWC",r),"channelsFirst"===s&&(o=ss(o,[0,3,1,2])),o})}(e=Wn(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(s=uh(s,this.bias.read(),this.dataFormat)),null!=this.activation&&(s=this.activation.apply(s)),s})}computeOutputShape(e){e=gs(e);const s="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,o=ph("channelsFirst"===this.dataFormat?e[2]:e[1],this.kernelSize[0],this.padding,this.strides[0]),a=ph(s,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,o,a]:[e[0],o,a,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=jr(this.depthwiseInitializer),e.depthwiseRegularizer=cr(this.depthwiseRegularizer),e.depthwiseConstraint=ea(this.depthwiseRegularizer),e}}return t.className="DepthwiseConv2D",t})());let F2=(()=>{class t extends Ui{constructor(e){let i;if(super(e),null==e.cell)throw new ve("cell property is missing for the constructor of RNN.");if(i=Array.isArray(e.cell)?new u0e({cells:e.cell}):e.cell,null==i.stateSize)throw new ve("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=i,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new Jo({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){return null==this.states_?lh(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(i=>null):this.states_}setStates(e){this.states_=e}computeOutputShape(e){kH(e)&&(e=e[0]);let i=this.cell.stateSize;Array.isArray(i)||(i=[i]);const s=i[0];let r;if(r=this.returnSequences?[e[0],e[1],s]:[e[0],s],this.returnState){const o=[];for(const a of i)o.push([e[0],a]);return[r].concat(o)}return r}computeMask(e,i){return Ee(()=>{Array.isArray(i)&&(i=i[0]);const s=this.returnSequences?i:null;if(this.returnState){const r=this.states.map(o=>null);return[s].concat(r)}return s})}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,i=[];for(let s=0;s<e;++s)i.push(null);return i}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new bi("Constants support is not implemented in RNN yet.");kH(e)&&(e=e[0]);const s=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Jo({shape:[s,null,...r]});const o=[e[0]].concat(e.slice(2));let a;if(this.cell.build(o),a=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!es(this.stateSpec.map(l=>l.shape[l.shape.length-1]),a))throw new ve(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(l=>new Jo({shape:[null,l]}));this.stateful&&this.resetStates()}resetStates(e,i=!1){Ee(()=>{if(!this.stateful)throw new Cp("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape[0];if(null==s)throw new ve("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)this.states_=Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>Zo([s,r])):[Zo([s,this.cell.stateSize])];else if(null==e)ki(this.states_),null!=this.keptStates&&(ki(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(r=>Zo([s,r])):this.states_[0]=Zo([s,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ve(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);!0===i?this.keptStates.push(this.states_.slice()):ki(this.states_);for(let r=0;r<this.states_.length;++r){const o=e[r],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[r]:this.cell.stateSize,l=[s,a];if(!es(o.shape,l))throw new ve(`State ${r} is incompatible with layer ${this.name}: expected shape=${l}, received shape=${o.shape}`);this.states_[r]=o}}this.states_=this.states_.map(r=>wa(r.clone()))})}apply(e,i){let s=null==i?null:i.initialState,r=null==i?null:i.constants;null==i&&(i={});const o=o0e(e,s,r,this.numConstants);e=o.inputs,s=o.initialState,r=o.constants;let a=[],l=[];if(null!=s){i.initialState=s,a=a.concat(s),this.stateSpec=[];for(const u of s)this.stateSpec.push(new Jo({shape:u.shape}));l=l.concat(this.stateSpec)}if(null!=r&&(i.constants=r,a=a.concat(r),this.numConstants=r.length),a[0]instanceof Tp){const u=[e].concat(a),d=this.inputSpec.concat(l),h=this.inputSpec;this.inputSpec=d;const p=super.apply(u,i);return this.inputSpec=h,p}return super.apply(e,i)}call(e,i){return Ee(()=>{const s=null==i?null:i.mask,r=null==i?null:i.training;let o=null==i?null:i.initialState;e=Wn(e),null==o&&(o=this.stateful?this.states_:this.getInitialState(e));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(o.length!==a)throw new ve(`RNN Layer has ${a} state(s) but was passed ${o.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const l={training:r},u=a0e((g,v)=>{const y=this.cell.call([g].concat(v),l);return[y[0],y.slice(1)]},e,o,this.goBackwards,s,null,this.unroll,this.returnSequences),d=u[0],h=u[1],p=u[2];this.stateful&&this.resetStates(p,r);const f=this.returnSequences?h:d;return this.returnState?[f].concat(p):f})}getInitialState(e){return Ee(()=>{let i=Zo(e.shape);return i=un(i,[1,2]),i=k2(i),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(s=>s>1?TH(i,[1,s]):i):this.cell.stateSize>1?[TH(i,[1,this.cell.stateSize])]:[i]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),i={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(i.numConstants=this.numConstants);const s=this.cell.getConfig();return this.getClassName()===t.className&&(i.cell={className:this.cell.getClassName(),config:s}),Object.assign(Object.assign(Object.assign({},s),e),i)}static fromConfig(e,i,s={}){const o=Wf(i.cell,s);return new e(Object.assign(i,{cell:o}))}}return t.className="RNN",t})();pt(F2);class C3 extends Ui{}let l0e=(()=>{class t extends C3{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,xa(this.units,"units"),this.activation=q_(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Fr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Fr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Fr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Lr(e.kernelRegularizer),this.recurrentRegularizer=Lr(e.recurrentRegularizer),this.biasRegularizer=Lr(e.biasRegularizer),this.kernelConstraint=ta(e.kernelConstraint),this.recurrentConstraint=ta(e.recurrentConstraint),this.biasConstraint=ta(e.biasConstraint),this.dropout=sC([1,G_([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=sC([1,G_([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=gs(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(e,i){return Ee(()=>{if(2!==e.length)throw new ve(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let s=e[1];e=e[0];const r=null!=i.training&&i.training;let o;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=K_({ones:()=>fu(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=K_({ones:()=>fu(s),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,l=this.recurrentDropoutMask;o=xp(null!=a?pe(e,a):e,this.kernel.read()),null!=this.bias&&(o=uh(o,this.bias.read())),null!=l&&(s=pe(s,l));let c=lt(o,xp(s,this.recurrentKernel.read()));return null!=this.activation&&(c=this.activation.apply(c)),[c,c]})}getConfig(){const e=super.getConfig(),i={units:this.units,activation:W_(this.activation),useBias:this.useBias,kernelInitializer:jr(this.kernelInitializer),recurrentInitializer:jr(this.recurrentInitializer),biasInitializer:jr(this.biasInitializer),kernelRegularizer:cr(this.kernelRegularizer),recurrentRegularizer:cr(this.recurrentRegularizer),biasRegularizer:cr(this.biasRegularizer),activityRegularizer:cr(this.activityRegularizer),kernelConstraint:ea(this.kernelConstraint),recurrentConstraint:ea(this.recurrentConstraint),biasConstraint:ea(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),i)}}return t.className="SimpleRNNCell",t})();pt(l0e),pt((()=>{class t extends F2{constructor(e){e.cell=new l0e(e),super(e)}call(e,i){return Ee(()=>(null!=this.cell.dropoutMask&&(ki(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(ki(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(e,{mask:null==i?null:i.mask,training:null==i?null:i.training,initialState:null==i?null:i.initialState})))}static fromConfig(e,i){return new e(i)}}return t.className="SimpleRNN",t})());let c0e=(()=>{class t extends C3{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ve("GRUCell does not support reset_after parameter set to true.");this.units=e.units,xa(this.units,"units"),this.activation=q_(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=q_(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Fr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Fr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Fr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Lr(e.kernelRegularizer),this.recurrentRegularizer=Lr(e.recurrentRegularizer),this.biasRegularizer=Lr(e.biasRegularizer),this.kernelConstraint=ta(e.kernelConstraint),this.recurrentConstraint=ta(e.recurrentConstraint),this.biasConstraint=ta(e.biasConstraint),this.dropout=sC([1,G_([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=sC([1,G_([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=gs(e),this.kernel=this.addWeight("kernel",[e[e.length-1],3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(e,i){return Ee(()=>{if(2!==e.length)throw new ve(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const s=null!=i.training&&i.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=K_({ones:()=>fu(e),rate:this.dropout,training:s,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=K_({ones:()=>fu(r),rate:this.recurrentDropout,training:s,count:3,dropoutFunc:this.dropoutFunc}));const a=this.recurrentDropoutMask;let l,c,u;0<this.dropout&&this.dropout<1&&(e=pe(e,this.dropoutMask[0]));let d=xp(e,this.kernel.read());this.useBias&&(d=uh(d,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=pe(r,a[0]));const h=this.recurrentKernel.read(),[p,f]=kc(h,[2*this.units,this.units],h.rank-1),g=xp(r,p),[v,y,w]=kc(d,3,d.rank-1),[x,T]=kc(g,2,g.rank-1);l=this.recurrentActivation.apply(lt(v,x)),c=this.recurrentActivation.apply(lt(y,T));const k=xp(pe(c,r),f);u=this.activation.apply(lt(w,k));const R=lt(pe(l,r),pe(lt(1,kr(l)),u));return[R,R]})}getConfig(){const e=super.getConfig(),i={units:this.units,activation:W_(this.activation),recurrentActivation:W_(this.recurrentActivation),useBias:this.useBias,kernelInitializer:jr(this.kernelInitializer),recurrentInitializer:jr(this.recurrentInitializer),biasInitializer:jr(this.biasInitializer),kernelRegularizer:cr(this.kernelRegularizer),recurrentRegularizer:cr(this.recurrentRegularizer),biasRegularizer:cr(this.biasRegularizer),activityRegularizer:cr(this.activityRegularizer),kernelConstraint:ea(this.kernelConstraint),recurrentConstraint:ea(this.recurrentConstraint),biasConstraint:ea(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),i)}}return t.className="GRUCell",t})();pt(c0e),pt((()=>{class t extends F2{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new c0e(e),super(e)}call(e,i){return Ee(()=>(null!=this.cell.dropoutMask&&(ki(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(ki(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(e,{mask:null==i?null:i.mask,training:null==i?null:i.training,initialState:null==i?null:i.initialState})))}static fromConfig(e,i){return 0===i.implmentation&&(i.implementation=1),new e(i)}}return t.className="GRU",t})());let tW=(()=>{class t extends C3{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,xa(this.units,"units"),this.activation=q_(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=q_(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Fr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Fr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Fr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Lr(e.kernelRegularizer),this.recurrentRegularizer=Lr(e.recurrentRegularizer),this.biasRegularizer=Lr(e.biasRegularizer),this.kernelConstraint=ta(e.kernelConstraint),this.recurrentConstraint=ta(e.recurrentConstraint),this.biasConstraint=ta(e.biasConstraint),this.dropout=sC([1,G_([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=sC([1,G_([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var i;let r;if(e=gs(e),this.kernel=this.addWeight("kernel",[e[e.length-1],4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const o=this.biasInitializer,a=this.units;r=new((i=class extends ld{apply(c,u){const d=o.apply([a]),h=(new m1e).apply([a]),p=o.apply([2*a]);return h1e(h1e(d,h),p)}}).className="CustomInit",i)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,i){return Ee(()=>{const s=null!=i.training&&i.training;if(3!==e.length)throw new ve(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=e[1];const o=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=K_({ones:()=>fu(e),rate:this.dropout,training:s,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=K_({ones:()=>fu(r),rate:this.recurrentDropout,training:s,count:4,dropoutFunc:this.dropoutFunc}));const l=this.recurrentDropoutMask;let c,u,d,h;0<this.dropout&&this.dropout<1&&(e=pe(e,this.dropoutMask[0]));let p=xp(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=pe(r,l[0])),p=lt(p,xp(r,this.recurrentKernel.read())),this.useBias&&(p=uh(p,this.bias.read()));const[f,g,v,y]=kc(p,4,p.rank-1);c=this.recurrentActivation.apply(f),u=this.recurrentActivation.apply(g),d=lt(pe(u,o),pe(c,this.activation.apply(v))),h=this.recurrentActivation.apply(y);const w=pe(h,this.activation.apply(d));return[w,w,d]})}getConfig(){const e=super.getConfig(),i={units:this.units,activation:W_(this.activation),recurrentActivation:W_(this.recurrentActivation),useBias:this.useBias,kernelInitializer:jr(this.kernelInitializer),recurrentInitializer:jr(this.recurrentInitializer),biasInitializer:jr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:cr(this.kernelRegularizer),recurrentRegularizer:cr(this.recurrentRegularizer),biasRegularizer:cr(this.biasRegularizer),activityRegularizer:cr(this.activityRegularizer),kernelConstraint:ea(this.kernelConstraint),recurrentConstraint:ea(this.recurrentConstraint),biasConstraint:ea(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),i)}}return t.className="LSTMCell",t})();pt(tW),pt((()=>{class t extends F2{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new tW(e),super(e)}call(e,i){return Ee(()=>(null!=this.cell.dropoutMask&&(ki(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(ki(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(e,{mask:null==i?null:i.mask,training:null==i?null:i.training,initialState:null==i?null:i.initialState})))}static fromConfig(e,i){return 0===i.implmentation&&(i.implementation=1),new e(i)}}return t.className="LSTM",t})());let u0e=(()=>{class t extends C3{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const i of this.cells.slice().reverse())Array.isArray(i.stateSize)?e.push(...i.stateSize):e.push(i.stateSize);return e}call(e,i){return Ee(()=>{let s=e.slice(1);const r=[];for(const l of this.cells.slice().reverse())Array.isArray(l.stateSize)?r.push(s.splice(0,l.stateSize.length)):r.push(s.splice(0,1));r.reverse();const o=[];let a;for(let l=0;l<this.cells.length;++l){const c=this.cells[l];s=r[l],a=0===l?[e[0]].concat(s):[a[0]].concat(s),a=c.call(a,i),o.push(a.slice(1))}s=[];for(const l of o.slice().reverse())s.push(...l);return[a[0]].concat(s)})}build(e){let i;kH(e)&&(e=e[0]),this.cells.forEach((s,r)=>{Gv(`RNNCell_${r}`,()=>{s.build(e),i=Array.isArray(s.stateSize)?s.stateSize[0]:s.stateSize,e=[e[0],i]})}),this.built=!0}getConfig(){const e=super.getConfig(),r={cells:this.cells.map(o=>({className:o.getClassName(),config:o.getConfig()}))};return Object.assign(Object.assign({},e),r)}static fromConfig(e,i,s={}){const r=[];for(const o of i.cells)r.push(Wf(o,s));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const i of this.cells)e.push(...i.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const i of this.cells)e.push(...i.nonTrainableWeights);if(!this.trainable){const i=[];for(const s of this.cells)i.push(...s.trainableWeights);return i.concat(e)}return e}getWeights(){const e=[];for(const i of this.cells)e.push(...i.weights);return DH(e)}setWeights(e){const i=[];for(const s of this.cells){const o=e.splice(s.weights.length);for(let a=0;a<s.weights.length;++a)i.push([s.weights[a],o[a]])}AH(i)}}return t.className="StackedRNNCells",t})();function K_(t){const{ones:n,rate:e,training:i=!1,count:s=1,dropoutFunc:r}=t,o=()=>null!=r?r(n(),e):f1e(n(),e),a=()=>A2(o,n,i);return!s||s<=1?wa(a().clone()):Array(s).fill(void 0).map(a).map(c=>wa(c.clone()))}pt(u0e);let vSt=(()=>{class t extends F2{constructor(e){if(e.unroll)throw new bi("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new bi("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Jo({ndim:5})]}call(e,i){return Ee(()=>{if(null!=this.cell.dropoutMask&&(ki(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(ki(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),i&&i.constants)throw new ve("ConvRNN2D cell does not support constants");return super.call(e,{mask:null==i?null:i.mask,training:null==i?null:i.training,initialState:null==i?null:i.initialState})})}computeOutputShape(e){let i=this.computeSingleOutputShape(e);return this.returnSequences||(i=[i[0],...i.slice(2)]),this.returnState&&(i=[i,...Array(2).fill([e[0],...i.slice(-3)])]),i}getInitialState(e){return Ee(()=>{const{stateSize:i}=this.cell,r=this.computeSingleOutputShape(e.shape),a=Zo([r[0],...r.slice(2)]);return Array.isArray(i)?Array(i.length).fill(a):[a]})}resetStates(e,i=!1){Ee(()=>{if(!this.stateful)throw new Cp("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape,r=this.computeSingleOutputShape(s),o=[r[0],...r.slice(2)];if(null==s[0])throw new ve("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())this.states_=Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(()=>Zo(o)):[Zo(o)];else if(null==e)ki(this.states_),null!=this.keptStates&&(ki(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Zo(o)):this.states_[0]=Zo(o);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ve(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);i?this.keptStates.push(this.states_.slice()):ki(this.states_);for(let l=0;l<this.states_.length;++l){const c=e[l],u=o;if(!es(c.shape,u))throw new ve(`State ${l} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${c.shape}`);this.states_[l]=c}}this.states_=this.states_.map(l=>wa(l.clone()))})}computeSingleOutputShape(e){const{dataFormat:i,filters:s,kernelSize:r,padding:o,strides:a,dilationRate:l}=this.cell,c="channelsFirst"===i,d=e[c?4:3],h=ph(e[c?3:2],r[0],o,a[0],l[0]),p=ph(d,r[1],o,a[1],l[1]);return[...e.slice(0,2),...c?[s,h,p]:[h,p,s]]}}return t.className="ConvRNN2D",t})(),d0e=(()=>{class t extends tW{constructor(e){const{filters:i,kernelSize:s,strides:r,padding:o,dataFormat:a,dilationRate:l}=e;super(Object.assign(Object.assign({},e),{units:i})),this.filters=i,xa(this.filters,"filters"),this.kernelSize=aC(s,2,"kernelSize"),this.kernelSize.forEach(c=>xa(c,"kernelSize")),this.strides=aC(r||1,2,"strides"),this.strides.forEach(c=>xa(c,"strides")),this.padding=o||"valid",_u(this.padding),this.dataFormat=a||"channelsLast",bo(this.dataFormat),this.dilationRate=aC(l||1,2,"dilationRate"),this.dilationRate.forEach(c=>xa(c,"dilationRate"))}build(e){var i;e=gs(e);const s="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[s])throw new ve(`The channel dimension of the input should be defined. Found ${e[s]}`);const a=this.kernelSize.concat([e[s],4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const l=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",l,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let c;if(this.unitForgetBias){const u=this.biasInitializer,d=this.filters;c=new((i=class extends ld{apply(p,f){return EH([u.apply([d]),Ic([d]),u.apply([2*d])])}}).className="CustomInit",i)}else c=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,c,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,i){return Ee(()=>{if(3!==e.length)throw new ve(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const s=i.training||!1,r=e[0],o=e[1],a=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=K_({ones:()=>fu(r),rate:this.dropout,training:s,count:4,dropoutFunc:this.dropoutFunc}));const c=this.dropoutMask,u=(Te,et,We)=>et&&et[We]?pe(et[We],Te):Te;let d=u(r,c,0),h=u(r,c,1),p=u(r,c,2),f=u(r,c,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=K_({ones:()=>fu(o),rate:this.recurrentDropout,training:s,count:4,dropoutFunc:this.dropoutFunc}));const g=this.recurrentDropoutMask;let v=u(o,g,0),y=u(o,g,1),w=u(o,g,2),x=u(o,g,3);const[k,R,N,D]=kc(this.kernel.read(),4,3),[F,$,j,Q]=this.useBias?kc(this.bias.read(),4):[null,null,null,null];d=this.inputConv(d,k,F,this.padding),h=this.inputConv(h,R,$,this.padding),p=this.inputConv(p,N,j,this.padding),f=this.inputConv(f,D,Q,this.padding);const[Y,ce,Ce,Z]=kc(this.recurrentKernel.read(),4,3);v=this.recurrentConv(v,Y),y=this.recurrentConv(y,ce),w=this.recurrentConv(w,Ce),x=this.recurrentConv(x,Z);const le=this.recurrentActivation.apply(lt(d,v)),te=this.recurrentActivation.apply(lt(h,y)),be=lt(pe(te,a),pe(le,this.activation.apply(lt(p,w)))),fe=pe(this.recurrentActivation.apply(lt(f,x)),this.activation.apply(be));return[fe,fe,be]})}getConfig(){const s=function(t,n){var e={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(t);s<i.length;s++)n.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(e[i[s]]=t[i[s]])}return e}(super.getConfig(),["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},s),r)}inputConv(e,i,s,r){const o=P_(e,i,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return s?uh(o,s,this.dataFormat):o}recurrentConv(e,i){return P_(e,i,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}return t.className="ConvLSTM2DCell",t})();pt(d0e),pt((()=>{class t extends vSt{constructor(e){const i=new d0e(e);super(Object.assign(Object.assign({},e),{cell:i}))}static fromConfig(e,i){return new e(i)}}return t.className="ConvLSTM2D",t})());let h0e=(()=>{class t extends Ui{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const i=e.shape,s=[];for(let r=0;r<this.noiseShape.length;++r)s.push(null==this.noiseShape[r]?i[r]:this.noiseShape[r]);return s}call(e,i){return Ee(()=>{this.invokeCallHook(e,i);const s=Wn(e);if(0<this.rate&&this.rate<1){const r=null!=i.training&&i.training,o=this.getNoiseShape(s);return A2(()=>f1e(s,this.rate,o,this.seed),()=>s,r)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},i=super.getConfig();return Object.assign(e,i),e}dispose(){return super.dispose()}}return t.className="Dropout",t})();pt(h0e),pt((()=>{class t extends h0e{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const i=e.shape;return[i[0],1,i[2]]}}return t.className="SpatialDropout1D",t})()),pt((()=>{class t extends Ui{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let i=null;null!=e.batchSize&&(i=e.batchSize),this.batchInputShape=[i,e.inputDim]}this.units=e.units,xa(this.units,"units"),this.activation=q_(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=Fr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Fr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=ta(e.kernelConstraint),this.biasConstraint=ta(e.biasConstraint),this.kernelRegularizer=Lr(e.kernelRegularizer),this.biasRegularizer=Lr(e.biasRegularizer),this.activityRegularizer=Lr(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const i=(e=gs(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[i,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:i}}],this.built=!0}computeOutputShape(e){const i=(e=gs(e)).slice();return i[i.length-1]=this.units,i}call(e,i){return Ee(()=>{this.invokeCallHook(e,i);const s=Wn(e),r=s1e(this.activation.getClassName());let o;return null!=r?o=xp(s,this.kernel.read(),r,this.bias?this.bias.read():null):(o=xp(s,this.kernel.read()),null!=this.bias&&(o=uh(o,this.bias.read())),null!=this.activation&&(o=this.activation.apply(o))),o})}getConfig(){const e={units:this.units,activation:W_(this.activation),useBias:this.useBias,kernelInitializer:jr(this.kernelInitializer),biasInitializer:jr(this.biasInitializer),kernelRegularizer:cr(this.kernelRegularizer),biasRegularizer:cr(this.biasRegularizer),activityRegularizer:cr(this.activityRegularizer),kernelConstraint:ea(this.kernelConstraint),biasConstraint:ea(this.biasConstraint)},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Dense",t})()),pt((()=>{class t extends Ui{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=gs(e);for(const i of e.slice(1))if(null==i)throw new ve(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],U_(e,1)]}call(e,i){return Ee(()=>{this.invokeCallHook(e,i);let s=Wn(e);if("channelsFirst"===this.dataFormat&&s.rank>1){const r=[0];for(let o=2;o<s.rank;++o)r.push(o);r.push(1),s=ss(s,r)}return function Jwt(t){if(t.rank<=1)throw new ve(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const n=[t.shape[0],U_(t.shape,1)];return ge(t,n)}(s)})}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const i=super.getConfig();return Object.assign(e,i),e}}return t.className="Flatten",t})()),pt((()=>{class t extends Ui{constructor(e){super(e),this.supportsMasking=!0,this.activation=q_(e.activation)}call(e,i){return Ee(()=>{this.invokeCallHook(e,i);const s=Wn(e);return this.activation.apply(s)})}getConfig(){const e={activation:W_(this.activation)},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Activation",t})()),pt((()=>{class t extends Ui{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,i){return Ee(()=>function Zwt(t,n){return Ee(()=>{if(2!==t.shape.length)throw new ve(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);return TH(k2(t,1),[1,n,1])})}(e=Wn(e),this.n))}getConfig(){const e={n:this.n},i=super.getConfig();return Object.assign(e,i),e}}return t.className="RepeatVector",t})()),pt((()=>{class t extends Ui{constructor(e){super(e),this.targetShape=e.targetShape;for(let i=0;i<this.targetShape.length;++i)this.isUnknown(this.targetShape[i])&&(this.targetShape[i]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,i){const s="Total size of new array must be unchanged.",r=i.slice();let o=1,a=null;for(let c=0;c<r.length;++c){const u=r[c];if(this.isUnknown(u)){if(null!==a)throw new ve("Can only specifiy one unknown dimension.");a=c}else o*=u}const l=U_(e);if(null!==a){if(0===o||l%o!=0)throw new ve(s);r[a]=l/o}else if(l!==o)throw new ve(s);return r}computeOutputShape(e){let i=!1;for(let s=0;s<e.length;++s)if(this.isUnknown(e[s])){i=!0;break}return i?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,i){return Ee(()=>{this.invokeCallHook(e,i);const s=Wn(e),r=s.shape,o=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return ge(s,o)})}getConfig(){const e={targetShape:this.targetShape},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Reshape",t})()),pt((()=>{class t extends Ui{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const i=lh(1,e.dims.length+1);if(!es(e.dims.slice().sort(),i))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Jo({ndim:this.dims.length+1})]}computeOutputShape(e){const i=(e=gs(e)).slice();return this.dims.forEach((s,r)=>{i[r+1]=e[s]}),i}call(e,i){return ss(Wn(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Permute",t})()),pt((()=>{class t extends Ui{constructor(e){super(e??{}),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),i={maskValue:this.maskValue};return Object.assign(i,e),i}computeMask(e,i){const s=Wn(e);return IL(Zw(s,this.maskValue),-1)}call(e,i){return Ee(()=>{this.invokeCallHook(e,i);const s=Wn(e),a=IL(Zw(s,this.maskValue),-1,!0);return pe(s,Rt(a,s.dtype))})}}return t.className="Masking",t})()),pt((()=>{class t extends Ui{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let i=null;null!=e.batchSize&&(i=e.batchSize),this.batchInputShape=null==e.inputLength?[i,null]:[i].concat($s(e.inputLength))}this.inputDim=e.inputDim,xa(this.inputDim,"inputDim"),this.outputDim=e.outputDim,xa(this.outputDim,"outputDim"),this.embeddingsInitializer=Fr(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Lr(e.embeddingsRegularizer),this.activityRegularizer=Lr(e.activityRegularizer),this.embeddingsConstraint=ta(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,i){return Ee(()=>this.maskZero?(e=Wn(e),Zw(e,ns(e))):null)}computeOutputShape(e){if(e=gs(e),null==this.inputLength)return[...e,this.outputDim];const i=$s(this.inputLength);if(i.length!==e.length-1)throw new ve(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let s=0;for(let r=0;r<i.length;++r){const o=i[r],a=e[r+1];if(null!=o&&null!=a&&o!==a)throw new ve(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);null==o&&(i[s]=a),s++}}return[e[0],...i,this.outputDim]}call(e,i){return Ee(()=>{this.invokeCallHook(e,i);let s=Wn(e);"int32"!==s.dtype&&(s=Sp(s,"int32"));const r=p1e(this.embeddings.read(),ge(s,[s.size]));return ge(r,gs(this.computeOutputShape(s.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:jr(this.embeddingsInitializer),embeddingsRegularizer:cr(this.embeddingsRegularizer),activityRegularizer:cr(this.activityRegularizer),embeddingsConstraint:ea(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Embedding",t})());class Hv extends Ui{constructor(n){super(n||{}),this.supportsMasking=!0}mergeFunction(n){throw new bi}computeElementwiseOpOutputShape(n,e){if(null==n||null==e)return null;if(n.length<e.length)return this.computeElementwiseOpOutputShape(e,n);if(0===e.length)return n;const i=n.slice(0,n.length-e.length);for(let s=0;s<e.length;++s){const r=n[n.length-e.length+s],o=e[s];if(null==r||null==o||r<0||o<0)i.push(null);else if(1===r)i.push(o);else if(1===o)i.push(r);else{if(r!==o)throw new ve("Operands could not be broadcast together with shapes "+JSON.stringify(n)+" "+JSON.stringify(e));i.push(r)}}return i}build(n){if(Array.isArray(n)&&!Array.isArray(n[0])&&(n=[gs(n)]),n.length<2)throw new ve(`A merge layer should be called on an Array of at least 2 inputs. Got ${n.length} input(s).`);let e=[];for(const r of n)null!=r&&null!==r[0]&&e.push(r[0]);if(e=z_(e),e.length>1)throw new ve(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(n)}.`);let i=null==n[0]?null:n[0].slice(1);for(let r=1;r<n.length;++r){const o=null==n[r]?null:n[r].slice(1);i=this.computeElementwiseOpOutputShape(i,o)}const s=n.map(r=>r.length);this.reshapeRequired=-1!==n.indexOf(null)||1!==z_(s).length}call(n,e){return Ee(()=>{if(this.reshapeRequired){const i=[],s=n.map(r=>r.rank);if(-1===s.indexOf(null)){const r=G_(s);for(let o of n){const a=o.rank;for(let l=0;l<r-a;++l)o=k2(o,1);i.push(o)}return this.mergeFunction(i)}{let r=!1;for(const l of n){const c=l.rank;if(null==c){const u=l.shape,d=u[0],h=u.slice(1).concat([d]);let p=ge(l,[d].concat(U_(u.slice(1))));p=ss(p,[1,0]),p=ge(p,h),i.push(p),r=!0}else if(c>1){const u=lh(1,c).concat([0]);i.push(ss(l,u)),r=!0}else i.push(l)}let o=this.mergeFunction(i);const a=o.rank;if(r)if(null==a){const l=o.shape,u=l[l.length-1],d=[u].concat(l.slice(0,l.length-1));o=ge(ss(ge(o,[-1,u]),[1,0]),d)}else if(a>1){const l=[a-1].concat(lh(0,a-1));o=ss(o,l)}return o}}return this.mergeFunction(n)})}computeOutputShape(n){let e;e=null==n[0]?null:n[0].slice(1);for(let s=1;s<n.length;++s){const r=null==n[s]?null:n[s].slice(1);e=this.computeElementwiseOpOutputShape(e,r)}let i=[];for(const s of n)null!=s&&null!==s[0]&&i.push(s[0]);return i=z_(i),e=1===i.length?i.concat(e):[null].concat(e),e}computeMask(n,e){return Ee(()=>{if(null==e)return null;if(!Array.isArray(e))throw new ve("`mask` should be an Array");if(!Array.isArray(n))throw new ve("`inputs` should be an Array");if(e.length!==n.length)throw new ve(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${n.length} vs ${e.length})`);if(e.every(s=>null==s))return null;let i=(e=e.map(s=>null==s?s:nl(s,0)))[0];for(let s=1;s<e.length-1;++s)i=bp(i,e[s]);return i})}}let nW=(()=>{class t extends Hv{constructor(e){super(e)}mergeFunction(e){return Ee(()=>{let i=e[0].clone();for(let s=1;s<e.length;++s)i=lt(i,e[s]);return i})}}return t.className="Add",t})();pt(nW);let iW=(()=>{class t extends Hv{constructor(e){super(e)}mergeFunction(e){return Ee(()=>{let i=e[0].clone();for(let s=1;s<e.length;++s)i=pe(i,e[s]);return i})}}return t.className="Multiply",t})();pt(iW);let sW=(()=>{class t extends Hv{constructor(e){super(e)}mergeFunction(e){return Ee(()=>{let i=e[0].clone();for(let s=1;s<e.length;++s)i=lt(i,e[s]);return pe(1/e.length,i)})}}return t.className="Average",t})();pt(sW);let rW=(()=>{class t extends Hv{constructor(e){super(e)}mergeFunction(e){return Ee(()=>{let i=e[0];for(let s=1;s<e.length;++s)i=Bf(i,e[s]);return i})}}return t.className="Maximum",t})();pt(rW);let oW=(()=>{class t extends Hv{constructor(e){super(e)}mergeFunction(e){return Ee(()=>{let i=e[0];for(let s=1;s<e.length;++s)i=Fv(i,e[s]);return i})}}return t.className="Minimum",t})();pt(oW);let aW=(()=>{class t extends Hv{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new ve("A `Concatenate` layer should be called on a list of at least 2 inputs");let i=!0;for(const r of e)if(null!=r){i=!1;break}if(i)return;const s=[];for(let r=0;r<e.length;++r){const o=e[r].slice();o.splice(this.axis,1);let a=!1;for(const l of s)if(es(l,o)){a=!0;break}a||s.push(o)}if(s.length>1)throw new ve("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Ee(()=>EH(e,this.axis))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new ve("A `Concatenate` layer should be called on a list of inputs.");const i=e,s=i[0].slice(),r=this.axis<0?s.length+this.axis:this.axis;for(const o of i.slice(1)){if(null==s[r]||null==o[r]){s[r]=null;break}s[r]+=o[r]}return s}computeMask(e,i){if(null==i)return null;if(!Array.isArray(i))throw new ve("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ve("`inputs` should be an array for Concatenate");if(i.length!==e.length)throw new ve(`Mismatch in the length of mask (${i.length}) and the legnth of inputs (${e.length})`);return Ee(()=>{let s=!0;if(i.forEach(a=>{null==a||(s=!1)}),s)return null;const r=[];for(let a=0;a<e.length;++a)r.push(null==i[a]?Rt(fu(e[a]),"bool"):i[a].rank<e[a].rank?nl(i[a],-1):i[a]);const o=mo(r,this.axis);return rj(o,-1,!1)})}getConfig(){const e={axis:this.axis},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Concatenate",t})();function L2(t,n){for(;t<0;)t+=n;return t}function P2(t,n,e,i,s,r=.001){let o;if(2===t.rank)o=wve(t,n,e,i,s,r);else if(3===t.rank)o=Cve(t,n,e,i,s,r);else{if(4!==t.rank)throw new bi(`batchNormalization is not implemented for array of rank ${t.rank} yet`);o=Sve(t,n,e,i,s,r)}return o}function S3(t,n,e,i,s,r){return Ee(()=>{let o;bo(s),o1e(r),_u(i),null==e&&(e=[1,1]),null==i&&(i="valid"),null==s&&(s="channelsLast"),null==r&&(r="max"),t=JH(t,s);const a="same"===i?"same":"valid";return o="max"===r?$L(t,n,e,a):kL(t,n,e,a),"channelsFirst"===s&&(o=ss(o,[0,3,1,2])),o})}function p0e(t,n,e,i,s,r){return Ee(()=>{let o;bo(s),o1e(r),_u(i),null==e&&(e=[1,1,1]),null==i&&(i="valid"),null==s&&(s="channelsLast"),null==r&&(r="max"),t=t0e(t,s);const a="same"===i?"same":"valid";return o="max"===r?qve(t,n,e,a):yve(t,n,e,a),"channelsFirst"===s&&(o=ss(o,[0,4,1,2,3])),o})}pt(aW),pt((()=>{class t extends Hv{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){U(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const i=e[0],s=e[1];if(i.length>3||s.length>3)throw new bi("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(i,s);if(i[r[0]]!==s[r[1]])throw new ve(`Dimension incompatibility: ${i[r[0]]} !== ${s[r[1]]}`)}mergeFunction(e){if(2!==e.length)throw new ve(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let r,i=e[0],s=e[1];return r=Array.isArray(this.axes)?this.axes.map((o,a)=>L2(o,e[a].shape.length)):[L2(this.axes,i.shape.length),L2(this.axes,s.shape.length)],this.normalize&&(i=p3(i,r[0]),s=p3(s,r[1])),function ySt(t,n,e){if(t.shape.length>3||n.shape.length>3)throw new bi("batchDot is not implemented for tensors of 4D or higher rank yet");if(U(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),U(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${n.shape.length}`),"number"==typeof e&&(e=[e,e]),"complex64"===t.dtype||"complex64"===n.dtype)throw new bi("batchDot is not implemented for complex64-type Tensors yet.");const i=t.shape.length,s=n.shape.length;null==e&&(e=[i-1,s-2]);const r=e;return Ee(()=>{let o,a;if(i>s){o=i-s;const l=[];for(let c=0;c<o;++c)l.push(1);n=ge(n,n.shape.concat(l))}else if(s>i){o=s-i;const l=[];for(let c=0;c<o;++c)l.push(1);t=ge(t,t.shape.concat(l))}else o=0;if(a=2===t.shape.length&&2===n.shape.length?r[0]===r[1]?un(pe(t,n),r[0]):un(pe(ss(t,[1,0]),n),r[1]):Hi(t,n,r[0]!==t.shape.length-1,r[1]===n.shape.length-1),o>0){let l;l=i>s?i+s-3:i-1;const c=[];for(let u=l;u<l+o;++u)c.push(u);a=Pv(a,c)}return 1===a.shape.length&&(a=nl(a,1)),a})}(i,s,r)}interpretAxes(e,i){let s;return s=Array.isArray(this.axes)?this.axes:[L2(this.axes,e.length),L2(this.axes,i.length)],s}computeOutputShape(e){U(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const i=e[0].slice(),s=e[1].slice();if(i.length>3||s.length>3)throw new bi("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(i,s);i.splice(r[0],1),s.splice(r[1],1),s.splice(0,1);const o=i.concat(s);return 1===o.length&&o.push(1),o}computeMask(e,i){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Dot",t})()),pt((()=>{class t extends Ui{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),i={stddev:this.stddev};return Object.assign(i,e),i}call(e,i){return Ee(()=>{this.invokeCallHook(e,i);const s=Wn(e);return A2(()=>lt(o3(s.shape,0,this.stddev),s),()=>s,i.training||!1)})}}return t.className="GaussianNoise",t})()),pt((()=>{class t extends Ui{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),i={rate:this.rate};return Object.assign(i,e),i}call(e,i){return Ee(()=>{this.invokeCallHook(e,i);const s=Wn(e);return this.rate>0&&this.rate<1?A2(()=>{const o=Math.sqrt(this.rate/(1-this.rate));return pe(s,o3(s.shape,1,o))},()=>s,i.training||!1):s})}}return t.className="GaussianDropout",t})()),pt((()=>{class t extends Ui{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Wn(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),i={rate:this.rate};return Object.assign(i,e),i}call(e,i){return Ee(()=>{if(this.rate<1&&this.rate>0){const s=this._getNoiseShape(e);return A2(()=>{const o=Wn(e),c=-1.7580993408473766;let u=B_(Lv(s),this.rate);u=Sp(u,"float32");const d=((1-this.rate)*(1+this.rate*c**2))**-.5,h=-d*c*this.rate,p=lt(pe(o,u),pe(lt(u,-1),c));return lt(pe(p,d),h)},()=>Wn(e),i.training||!1)}return e})}}return t.className="AlphaDropout",t})()),pt((()=>{class t extends Ui{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=Fr(e.betaInitializer||"zeros"),this.gammaInitializer=Fr(e.gammaInitializer||"ones"),this.movingMeanInitializer=Fr(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Fr(e.movingVarianceInitializer||"ones"),this.betaConstraint=ta(e.betaConstraint),this.gammaConstraint=ta(e.gammaConstraint),this.betaRegularizer=Lr(e.betaRegularizer),this.gammaRegularizer=Lr(e.gammaRegularizer)}build(e){e=gs(e);const i=this.axis>=0?this.axis:this.axis+e.length,s=e[i];if(null==s)throw new ve(`Axis ${i} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Jo({ndim:e.length,axes:{[i]:s}})];const r=[s];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,i){return Ee(()=>{const s=null!=i.training&&i.training,r=Wn(e),o=r.shape,a=o.length,l=lh(0,a),c=this.axis>=0?this.axis:this.axis+a;l.splice(c,1);const u=Vv(1,a);u[c]=o[c];const d=l.slice();d.sort();const h=!es(d,lh(0,a).slice(0,a-1));if(!s)return(()=>{if(h){const x=ge(this.movingMean.read(),u),T=ge(this.movingVariance.read(),u),k=this.center?ge(this.beta.read(),u):null,R=this.scale?ge(this.gamma.read(),u):null;return P2(r,x,T,k,R,this.epsilon)}return P2(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[f,g,v]=function SSt(t,n,e,i,s=.001){return es(i.slice().sort(),lh(0,t.rank-1))?function wSt(t,n,e,i,s=.001){return Ee(()=>{const r=BL(t,i),o=r.mean,a=r.variance;return[P2(t,o,a,e,n,s),o,a]})}(t,n,e,i,s):function CSt(t,n,e,i,s=.001){return Ee(()=>{const r=BL(t,i),o=r.mean,a=r.variance,l=[];for(const f of lh(0,t.rank))-1!==i.indexOf(f)?l.push(1):l.push(t.shape[f]);const c=ge(o,l),u=ge(a,l),d=null==n?null:ge(n,l),h=null==e?null:ge(e,l);return[P2(t,c,u,h,d,s),o,a]})}(t,n,e,i,s)}(r,this.gamma.read(),this.beta.read(),l,this.epsilon),y=(x,T,k)=>{Ee(()=>{const R=1-k,N=x.read(),D=pe(Xt(N,T),R);x.write(Xt(N,D))})};return(()=>{y(this.movingMean,g,this.momentum),y(this.movingVariance,v,this.momentum)})(),f})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:jr(this.betaInitializer),gammaInitializer:jr(this.gammaInitializer),movingMeanInitializer:jr(this.movingMeanInitializer),movingVarianceInitializer:jr(this.movingVarianceInitializer),betaRegularizer:cr(this.betaRegularizer),gammaRegularizer:cr(this.gammaRegularizer),betaConstraint:ea(this.betaConstraint),gammaConstraint:ea(this.gammaConstraint)},i=super.getConfig();return Object.assign(e,i),e}}return t.className="BatchNormalization",t})()),pt((()=>{class t extends Ui{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else{if(!Array.isArray(this.axis))throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);for(const i of this.axis)if(!Number.isInteger(i))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=Fr(e.betaInitializer||"zeros"),this.gammaInitializer=Fr(e.gammaInitializer||"ones"),this.betaRegularizer=Lr(e.betaRegularizer),this.gammaRegularizer=Lr(e.gammaRegularizer),this.supportsMasking=!0}build(e){const i=(e=gs(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let o=0;o<this.axis.length;++o)this.axis[o]<0&&(this.axis[o]+=i);for(const o of this.axis)if(o<0||o>=i)throw new Error(`Invalid axis: ${o}`);if(this.axis.length!==z_(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const s=this.axis.map(o=>e[o]),r=!0;this.gamma=this.scale?this.addWeight("gamma",s,"float32",this.gammaInitializer,this.gammaRegularizer,r):null,this.beta=this.center?this.addWeight("beta",s,"float32",this.betaInitializer,this.betaRegularizer,r):null,this.built=!0}call(e,i){const s=Wn(e),r=s.shape,o=r.length;return Ee(()=>{let{mean:l,variance:c}=BL(s,this.axis,!0);const u=Vv(1,o);for(const v of this.axis)u[v]=r[v];const d=v=>null!=v&&v.shape.length!==o?ge(v,u):v;let h=this.scale?d(this.gamma.read()):null,p=this.center?d(this.beta.read()):null;const f=[],g=[];for(let v=0;v<o;++v)-1!==this.axis.indexOf(v)?(f.push(r[v]),g.push(1)):(f.push(1),g.push(r[v]));return l=nd(l,f),c=nd(c,f),null!=h&&(h=nd(h,g)),null!=p&&(p=nd(p,g)),P2(s,l,c,p,h,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:jr(this.betaInitializer),gammaInitializer:jr(this.gammaInitializer),betaRegularizer:cr(this.betaRegularizer),gammaRegularizer:cr(this.gammaRegularizer)},i=super.getConfig();return Object.assign(e,i),e}}return t.className="LayerNormalization",t})()),pt((()=>{class t extends Ui{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new ve(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let i,s;if("number"==typeof e.padding[0])i=[e.padding[0],e.padding[0]],s=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new ve(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(i=e.padding[0],2!==e.padding[1].length)throw new ve(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);s=e.padding[1]}this.padding=[i,s]}this.inputSpec=[new Jo({ndim:4})]}computeOutputShape(e){let i,s;return e=gs(e),"channelsFirst"===this.dataFormat?(i=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,s=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],i,s]):(i=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,s=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],i,s,e[3]])}call(e,i){return Ee(()=>function xSt(t,n,e){return Ee(()=>{if(4!==t.rank)throw new ve(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new ve("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==e&&(e="channelsLast"),"channelsLast"!==e&&"channelsFirst"!==e)throw new ve(`Unknown data format: ${e}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let i;return i="channelsFirst"===e?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],V_(t,i)})}(Wn(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},i=super.getConfig();return Object.assign(e,i),e}}return t.className="ZeroPadding2D",t})());class f0e extends Ui{constructor(n){if(null==n.poolSize&&(n.poolSize=2),super(n),"number"==typeof n.poolSize)this.poolSize=[n.poolSize];else{if(!Array.isArray(n.poolSize)||1!==n.poolSize.length||"number"!=typeof n.poolSize[0])throw new ve(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(n.poolSize)}`);this.poolSize=n.poolSize}if(xa(this.poolSize,"poolSize"),null==n.strides)this.strides=this.poolSize;else if("number"==typeof n.strides)this.strides=[n.strides];else{if(!Array.isArray(n.strides)||1!==n.strides.length||"number"!=typeof n.strides[0])throw new ve(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(n.strides)}`);this.strides=n.strides}xa(this.strides,"strides"),this.padding=null==n.padding?"valid":n.padding,_u(this.padding),this.inputSpec=[new Jo({ndim:3})]}computeOutputShape(n){const e=ph((n=gs(n))[1],this.poolSize[0],this.padding,this.strides[0]);return[n[0],e,n[2]]}call(n,e){return Ee(()=>{this.invokeCallHook(n,e),n=k2(Wn(n),2);const i=this.poolingFunction(Wn(n),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Pv(i,[2])})}getConfig(){const n={poolSize:this.poolSize,padding:this.padding,strides:this.strides},e=super.getConfig();return Object.assign(n,e),n}}pt((()=>{class t extends f0e{constructor(e){super(e)}poolingFunction(e,i,s,r,o){return bo(o),_u(r),S3(e,i,s,r,o,"max")}}return t.className="MaxPooling1D",t})()),pt((()=>{class t extends f0e{constructor(e){super(e)}poolingFunction(e,i,s,r,o){return bo(o),_u(r),S3(e,i,s,r,o,"avg")}}return t.className="AveragePooling1D",t})());class m0e extends Ui{constructor(n){if(null==n.poolSize&&(n.poolSize=[2,2]),super(n),this.poolSize=Array.isArray(n.poolSize)?n.poolSize:[n.poolSize,n.poolSize],null==n.strides)this.strides=this.poolSize;else if(Array.isArray(n.strides)){if(2!==n.strides.length)throw new ve(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${n.strides.length}.`);this.strides=n.strides}else this.strides=[n.strides,n.strides];xa(this.poolSize,"poolSize"),xa(this.strides,"strides"),this.padding=null==n.padding?"valid":n.padding,this.dataFormat=null==n.dataFormat?"channelsLast":n.dataFormat,bo(this.dataFormat),_u(this.padding),this.inputSpec=[new Jo({ndim:4})]}computeOutputShape(n){n=gs(n);let e="channelsFirst"===this.dataFormat?n[2]:n[1],i="channelsFirst"===this.dataFormat?n[3]:n[2];return e=ph(e,this.poolSize[0],this.padding,this.strides[0]),i=ph(i,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[n[0],n[1],e,i]:[n[0],e,i,n[3]]}call(n,e){return Ee(()=>(this.invokeCallHook(n,e),this.poolingFunction(Wn(n),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const n={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}}pt((()=>{class t extends m0e{constructor(e){super(e)}poolingFunction(e,i,s,r,o){return bo(o),_u(r),S3(e,i,s,r,o,"max")}}return t.className="MaxPooling2D",t})()),pt((()=>{class t extends m0e{constructor(e){super(e)}poolingFunction(e,i,s,r,o){return bo(o),_u(r),S3(e,i,s,r,o,"avg")}}return t.className="AveragePooling2D",t})());class _0e extends Ui{constructor(n){if(null==n.poolSize&&(n.poolSize=[2,2,2]),super(n),this.poolSize=Array.isArray(n.poolSize)?n.poolSize:[n.poolSize,n.poolSize,n.poolSize],null==n.strides)this.strides=this.poolSize;else if(Array.isArray(n.strides)){if(3!==n.strides.length)throw new ve(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${n.strides.length}.`);this.strides=n.strides}else this.strides=[n.strides,n.strides,n.strides];xa(this.poolSize,"poolSize"),xa(this.strides,"strides"),this.padding=null==n.padding?"valid":n.padding,this.dataFormat=null==n.dataFormat?"channelsLast":n.dataFormat,bo(this.dataFormat),_u(this.padding),this.inputSpec=[new Jo({ndim:5})]}computeOutputShape(n){n=gs(n);let e="channelsFirst"===this.dataFormat?n[2]:n[1],i="channelsFirst"===this.dataFormat?n[3]:n[2],s="channelsFirst"===this.dataFormat?n[4]:n[3];return e=ph(e,this.poolSize[0],this.padding,this.strides[0]),i=ph(i,this.poolSize[1],this.padding,this.strides[1]),s=ph(s,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[n[0],n[1],e,i,s]:[n[0],e,i,s,n[4]]}call(n,e){return Ee(()=>(this.invokeCallHook(n,e),this.poolingFunction(Wn(n),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const n={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}}pt((()=>{class t extends _0e{constructor(e){super(e)}poolingFunction(e,i,s,r,o){return bo(o),_u(r),p0e(e,i,s,r,o,"max")}}return t.className="MaxPooling3D",t})()),pt((()=>{class t extends _0e{constructor(e){super(e)}poolingFunction(e,i,s,r,o){return bo(o),_u(r),p0e(e,i,s,r,o,"avg")}}return t.className="AveragePooling3D",t})());class g0e extends Ui{constructor(n){super(n),this.inputSpec=[new Jo({ndim:3})]}computeOutputShape(n){return[n[0],n[2]]}call(n,e){throw new bi}}pt((()=>{class t extends g0e{constructor(e){super(e||{})}call(e,i){return Ee(()=>{const s=Wn(e);return to(s,1)})}}return t.className="GlobalAveragePooling1D",t})()),pt((()=>{class t extends g0e{constructor(e){super(e||{})}call(e,i){return Ee(()=>{const s=Wn(e);return td(s,1)})}}return t.className="GlobalMaxPooling1D",t})());class b0e extends Ui{constructor(n){super(n),this.dataFormat=null==n.dataFormat?"channelsLast":n.dataFormat,bo(this.dataFormat),this.inputSpec=[new Jo({ndim:4})]}computeOutputShape(n){return"channelsLast"===this.dataFormat?[n[0],n[3]]:[n[0],n[1]]}call(n,e){throw new bi}getConfig(){const n={dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}}pt((()=>{class t extends b0e{call(e,i){return Ee(()=>{const s=Wn(e);return to(s,"channelsLast"===this.dataFormat?[1,2]:[2,3])})}}return t.className="GlobalAveragePooling2D",t})()),pt((()=>{class t extends b0e{call(e,i){return Ee(()=>{const s=Wn(e);return td(s,"channelsLast"===this.dataFormat?[1,2]:[2,3])})}}return t.className="GlobalMaxPooling2D",t})());class v0e extends Ui{constructor(n){super(n),this.layer=n.layer}build(n){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(n){null!=this.layer&&(this.layer.trainable=n)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(n){this.layer.setWeights(n)}getConfig(){const n={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},e=super.getConfig();return Object.assign(n,e),n}setFastWeightInitDuringBuild(n){super.setFastWeightInitDuringBuild(n),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(n)}static fromConfig(n,e,i={}){const r=Wf(e.layer,i);delete e.layer;const o={layer:r};return Object.assign(o,e),new n(o)}}pt((()=>{class t extends v0e{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=gs(e)).length<3)throw new ve(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const i=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(i),this.layer.built=!0),super.build(e)}computeOutputShape(e){const i=[(e=gs(e))[0]].concat(e.slice(2)),s=this.layer.computeOutputShape(i);return[s[0],e[1]].concat(s.slice(1))}call(e,i){return Ee(()=>a0e((a,l)=>[Wn(this.layer.call(a,i)),[]],e=Wn(e),[],!1,null,null,!1,!0)[1])}}return t.className="TimeDistributed",t})()),pt((()=>{class t extends v0e{constructor(e){super(e);const i=e.layer.getConfig(),s={};s.className=e.layer.getClassName(),s.config=i,this.forwardLayer=Wf(s),i.goBackwards=!0!==i.goBackwards;const r={};if(r.className=e.layer.getClassName(),r.config=i,this.backwardLayer=Wf(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function ESt(t){Uv(jwt,"BidirectionalMergeMode",t)}(this.mergeMode),e.weights)throw new bi("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const s=Math.floor(e.length/2);this.forwardLayer.setWeights(e.slice(0,s)),this.backwardLayer.setWeights(e.slice(s))}computeOutputShape(e){let s,r,o,i=this.forwardLayer.computeOutputShape(e);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),this.returnState&&(o=i.slice(1)),s=i[0],"concat"===this.mergeMode?(s[s.length-1]*=2,r=[s]):r=null==this.mergeMode?[s,s.slice()]:[s],this.returnState?null==this.mergeMode?r.concat(o).concat(o.slice()):[s].concat(o).concat(o.slice()):Xl(r)}apply(e,i){let s=null==i?null:i.initialState,r=null==i?null:i.constants;null==i&&(i={});const o=o0e(e,s,r,this.numConstants);if(e=o.inputs,s=o.initialState,r=o.constants,Array.isArray(e)&&(s=e.slice(1),e=e[0]),(null==s||0===s.length)&&null==r)return super.apply(e,i);const a=[],l=[];if(null!=s){const u=s.length;if(u%2>0)throw new ve("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");i.initialState=s,a.push(...s);const d=s.map(h=>new Jo({shape:h.shape}));this.forwardLayer.stateSpec=d.slice(0,u/2),this.backwardLayer.stateSpec=d.slice(u/2),l.push(...d)}if(null!=r)throw new bi("Support for constants in Bidirectional layers is not implemented yet.");const c=a[0]instanceof Tp;for(const u of a)if(u instanceof Tp!==c)throw new ve("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){const u=[e].concat(a),d=this.inputSpec.concat(l),h=this.inputSpec;this.inputSpec=d;const p=super.apply(u,i);return this.inputSpec=h,p}return super.apply(e,i)}call(e,i){return Ee(()=>{const s=i.initialState;let r,o,a,l;if(null==s)r=this.forwardLayer.call(e,i),o=this.backwardLayer.call(e,i);else{const c=s.slice(0,s.length/2),u=s.slice(s.length/2);r=this.forwardLayer.call(e,Object.assign(i,{initialState:c})),o=this.backwardLayer.call(e,Object.assign(i,{initialState:u}))}return this.returnState&&(Array.isArray(r)&&(a=r.slice(1).concat(o.slice(1))),r=r[0],o=o[0]),this.returnSequences&&(o=id(o,1)),"concat"===this.mergeMode?l=EH([r,o]):"sum"===this.mergeMode?l=lt(r,o):"ave"===this.mergeMode?l=pe(.5,lt(r,o)):"mul"===this.mergeMode?l=pe(r,o):null==this.mergeMode&&(l=[r,o]),this.returnState?null==this.mergeMode?l.concat(a):[l].concat(a):l})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Gv(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Gv(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,i){let s;if(Array.isArray(i)&&(i=i[0]),s=this.returnSequences?null==this.mergeMode?[i,i]:i:null==this.mergeMode?[null,null]:null,this.returnState){const o=this.forwardLayer.states.map(a=>null);return Array.isArray(s)?s.concat(o).concat(o):[s].concat(o).concat(o)}return s}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},i=super.getConfig();return Object.assign(e,i),e}static fromConfig(e,i){const s=Wf(i.layer);if(delete i.layer,null!=i.numConstants)throw new bi("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=i;return r.layer=s,new e(r)}}return t.className="Bidirectional",t})()),pt((()=>{class t extends Ui{constructor(e){super(e),this.scale=e.scale,this.offset=e.offset?e.offset:0}getConfig(){const e={scale:this.scale,offset:this.offset},i=super.getConfig();return Object.assign(e,i),e}call(e,i){return Ee(()=>("float32"!==(e=Wn(e)).dtype&&(e=Sp(e,"float32")),lt(pe(e,this.scale),this.offset)))}}return t.className="Rescaling",t})());const{resizeBilinear:ISt,cropAndResize:kSt}=rd;pt((()=>{class t extends Ui{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,i,s,r,o,a,l,c){return Ee(()=>{let u,d=!1;const v=[i/a,s/l,(r+i)/a,(o+s)/l],y=[];3===e.rank?(d=!0,u=Kl([e])):u=e;for(let R=0;R<u.shape[0];R++)y.push(v);const w=hu(y,[y.length,4]),x=Jw(0,y.length,1,"int32"),k=kSt(u,w,x,[r,o],"nearest");return Sp(d?Wn(sd(k)):k,c)})}upsize(e,i,s,r){return Ee(()=>Sp(ISt(e,[i,s]),r))}call(e,i){return Ee(()=>{const s=Wn(e),r=s.dtype,o=s.shape,a=o[o.length-3],l=o[o.length-2];let c=0;a!==this.height&&(c=Math.floor((a-this.height)/2));let u=0;return l!==this.width&&(u=Math.floor((l-this.width)/2),0===u&&(u=1)),c>=0&&u>=0?this.centerCrop(s,c,u,this.height,this.width,a,l,r):this.upsize(e,this.height,this.width,r)})}getConfig(){const e={height:this.height,width:this.width},i=super.getConfig();return Object.assign(e,i),e}computeOutputShape(e){const s=(e=gs(e)).length-2;return e[e.length-3]=this.height,e[s]=this.width,e}}return t.className="CenterCrop",t})()),pt((()=>{class t extends Ui{constructor(e){super(e),this.numTokens=e.numTokens,this.outputMode=e.outputMode?e.outputMode:"multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},i=super.getConfig();return Object.assign(e,i),e}computeOutputShape(e){return null==(e=gs(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,i){return Ee(()=>{let s;if("int32"!==(e=Wn(e)).dtype&&(e=Sp(e,"int32")),typeof i.countWeights<"u"){if("count"!==this.outputMode)throw new ve(`countWeights is not used when outputMode !== count.\n              Received countWeights=${i.countWeights}`);s=Wn(i.countWeights)}const r=td(e),o=m2(e),a=Tc(this.numTokens,r).bufferSync().get(0),l=B_(o,0).bufferSync().get(0);if(!a||!l)throw new ve(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return function DSt(t,n,e,i){let s=Wn(t);if("int32"!==s.dtype&&(s=Sp(s,"int32")),"int"===n)return s;const r=s.shape;if(0===s.rank&&(s=nl(s,-1)),"oneHot"===n&&1!==s.shape[s.shape.length-1]&&(s=nl(s,-1)),s.rank>2)throw new ve(`When outputMode is not int, maximum output rank is 2 Received outputMode ${n} and input shape ${r} which would result in output rank ${s.rank}.`);const o=["multiHot","oneHot"].includes(n);let l;if(l=pj(s,typeof i<"u"&&"count"===n?i:[],e,o),"tfIdf"!==n)return l;if(i)return pe(l,i);throw new ve("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,s)})}}return t.className="CategoryEncoding",t})());const y0e=new Set(["bilinear","nearest"]);pt((()=>{class t extends Ui{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!y0e.has(e.interpolation))throw new ve(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){return e=gs(e),[this.height,this.width,e[2]]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},i=super.getConfig();return Object.assign(e,i),e}call(e,i){return Ee(()=>{const s=[this.height,this.width];if("bilinear"===this.interpolation)return rd.resizeBilinear(e,s,!this.cropToAspectRatio);if("nearest"===this.interpolation)return rd.resizeNearestNeighbor(e,s,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...y0e]} are supported`)})}}return t.className="Resizing",t})());let MSt=(()=>{class t{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}}return t.className="RandomSeed",t})(),NSt=(()=>{class t extends Ui{constructor(e){super(e),this.randomGenerator=new MSt(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},i=super.getConfig();return Object.assign(e,i),e}}return t.className="BaseRandomLayer",t})();const w0e=new Set(["bilinear","nearest"]);pt((()=>{class t extends NSt{constructor(e){super(e);const{factor:i,interpolation:s="bilinear"}=e;if(this.factor=i,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new ve(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new ve(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new ve(`factor cannot have upper bound less than lower bound.\n        Got upper bound: ${this.widthUpper}.\n        Got lower bound: ${this.widthLower}\n      `);if(s){if(!w0e.has(s))throw new ve(`Invalid interpolation parameter: ${s} is not implemented`);this.interpolation=s}}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},i=super.getConfig();return Object.assign(e,i),e}computeOutputShape(e){return e=gs(e),[this.imgHeight,-1,e[2]]}call(e,i){return Ee(()=>{const s=Wn(e);this.imgHeight=s.shape[s.shape.length-3];const r=s.shape[s.shape.length-2];this.widthFactor=Lv([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let o=this.widthFactor.dataSync()[0]*r;o=Math.round(o);const a=[this.imgHeight,o];switch(this.interpolation){case"bilinear":return rd.resizeBilinear(e,a);case"nearest":return rd.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}\n          but only ${[...w0e]} are supported`)}})}}return t.className="RandomWidth",t})()),Ie().registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var T0e,bu=function(t){return t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF",t}(bu||{});!function(t){let n;var e;(e=n=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(T0e||(T0e={}));const lW={};function I0e(t){return lW[t]}function M(t,n,e,i,s){const r=n.inputParams[t];if(r&&void 0!==r.inputIndexStart){const a=r.inputIndexStart,l=0===r.inputIndexEnd?void 0:void 0===r.inputIndexEnd?a+1:r.inputIndexEnd,c=a<0?n.inputNames.length+a:a;if("tensor"===r.type)return $a(n.inputNames[c],e,i,s);if("tensors"===r.type){const h=n.inputs.slice(a,l);return n.inputNames.slice(a,l).filter((f,g)=>{var v;return"NoOp"!==(null===(v=h[g])||void 0===v?void 0:v.op)}).map(f=>$a(f,e,i,s))}const u=$a(n.inputNames[c],e,i,s),d=u.dataSync();return"number"===r.type?d[0]:Qu(u.shape,d)}const o=n.attrParams[t];return o&&o.value}function $a(t,n,e,i){const[s,r]=Ac(t,e);if(null!=i){const a=i.getHashTableHandleByName(s);if(null!=a)return a}const o=e.currentContextIds.find(a=>!!n[E3(s,a)]);return void 0!==o?n[E3(s,o)][r]:void 0}function k0e(t,n,e){return n[E3(t,e.currentContextId)]}function qf(t,n){const[e,i,s]=Ac(t,n);return[E3(e,n&&n.currentContextId),i,s]}function E3(t,n){return n?`${t}-${n}`:t}function Ac(t,n){if(""===t)return["",0,void 0];const e=null!=n&&null!=n.parseNodeNameCache;if(e){const r=n.parseNodeNameCache.get(t);if(null!=r)return r}const i=t.split(":");let s;if(1===i.length)s=[t,0,void 0];else{const o=3===i.length?i[1]:void 0;s=[i[0],Number(i[i.length-1]),o]}return e&&n.parseNodeNameCache.set(t,s),s}function T3(t,n,e){let i=M("pad",t,n,e);if("explicit"===i){i=M("explicitPaddings",t,n,e);const s=[[0,0],[0,0],[0,0],[0,0]];for(let r=0;r<4;r++)s[r][0]=i[2*r],s[r][1]=i[2*r+1];return s}return i}function Kf(t){return t.kept?t:Lf(t)}const PSt=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],$St=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],BSt=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],VSt=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],zSt=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],USt=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],GSt=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],jSt=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],HSt=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],WSt=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],qSt=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],KSt=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],XSt=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],YSt=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],ZSt=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],QSt=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],JSt=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],ext=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],txt=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];class D0e{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[tt,_t,Re,X,ke,de,ee,ie,J,De,ze,ht,Et,Ft,Ot,$t,Ht,Ut,Xe].map(i=>i.json));this.opMappers=e.reduce((i,s)=>(i[s.tfOpName]=s,i),{})}transformGraph(n,e={}){const s=[],r=[],o=[],a=n.node.reduce((g,v)=>(g[v.name]=this.mapNode(v),v.op.startsWith("Placeholder")?s.push(g[v.name]):"Const"===v.op?r.push(g[v.name]):(null==v.input||0===v.input.length)&&o.push(g[v.name]),g),{});let l=[];const c=[];let u={},d={};null!=e&&(u=this.mapSignatureEntries(e.inputs),d=this.mapSignatureEntries(e.outputs));const h=Object.keys(a);h.forEach(g=>{const v=a[g];v.inputNames.forEach((y,w)=>{const[x,,T]=qf(y),k=a[x];if(null!=k.outputs){const R=k.outputs.indexOf(T);-1!==R&&(v.inputNames[w]=`${x}:${R}`)}v.inputs.push(k),k.children.push(v)})}),0===Object.keys(d).length?h.forEach(g=>{const v=a[g];0===v.children.length&&c.push(v)}):Object.keys(d).forEach(g=>{const[v]=qf(g),y=a[v];null!=y&&(y.signatureKey=d[g],c.push(y))}),Object.keys(u).length>0?Object.keys(u).forEach(g=>{const[v]=qf(g),y=a[v];y&&(y.signatureKey=u[g],l.push(y))}):l=s;let p={};null!=n.library&&null!=n.library.function&&(p=n.library.function.reduce((g,v)=>(g[v.signature.name]=this.mapFunction(v),g),{}));const f={nodes:a,inputs:l,outputs:c,weights:r,placeholders:s,signature:e,functions:p};return o.length>0&&(f.initNodes=o),f}mapSignatureEntries(n){return Object.keys(n||{}).reduce((e,i)=>(e[n[i].name]=i,e),{})}mapNode(n){const e=I0e(n.op)||this.opMappers[n.op]||{};null==n.attr&&(n.attr={});const i={name:n.name,op:n.op,category:e.category,inputNames:(n.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:n.attr,outputs:e.outputs};return null!=e.inputs&&(i.inputParams=e.inputs.reduce((s,r)=>(s[r.name]={type:r.type,inputIndexStart:r.start,inputIndexEnd:r.end},s),{})),null!=e.attrs&&(i.attrParams=e.attrs.reduce((s,r)=>{const o=r.type;let a;switch(r.type){case"string":a=cW(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=cW(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"string[]":a=gW(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=gW(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"number":a=dW(n.attr,r.tfName,r.defaultValue||0),void 0===a&&r.tfDeprecatedName&&(a=dW(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"number[]":a=_W(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=_W(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"bool":a=uW(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=uW(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"bool[]":a=vW(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=vW(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"shape":a=mW(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=mW(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"shape[]":a=bW(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=bW(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"dtype":a=pW(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=pW(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"dtype[]":a=fW(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=fW(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"func":a=M0e(n.attr,r.tfName,r.defaultValue),void 0===a&&r.tfDeprecatedName&&(a=M0e(n.attr,r.tfDeprecatedName,r.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${r.type} for op: ${n.op}`)}return s[r.name]={value:a,type:o},s},{})),i}mapFunction(n){const e=n.nodeDef,s=[];let r={};null!=e&&(r=e.reduce((d,h)=>(d[h.name]=this.mapNode(h),"Const"===h.op&&s.push(d[h.name]),d),{}));const o=[],a=[];n.signature.inputArg.forEach(d=>{const[h]=qf(d.name),p={name:h,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:hW(d.type),type:"dtype"}},children:[]};p.signatureKey=d.name,o.push(p),r[h]=p}),Object.keys(r).forEach(d=>{const h=r[d];h.inputNames.forEach((p,f)=>{const[g,,v]=qf(p),y=r[g];if(null!=y.outputs){const w=y.outputs.indexOf(v);-1!==w&&(h.inputNames[f]=`${g}:${w}`)}h.inputs.push(y),y.children.push(h)})});const c=n.ret;n.signature.outputArg.forEach(d=>{const[h,p]=qf(c[d.name]),f=r[h];null!=f&&(f.defaultOutput=p,a.push(f))});const u=this.mapArgsToSignature(n);return{nodes:r,inputs:o,outputs:a,weights:s,placeholders:[],signature:u}}mapArgsToSignature(n){return{methodName:n.signature.name,inputs:n.signature.inputArg.reduce((e,i)=>(e[i.name]=this.mapArgToTensorInfo(i),e),{}),outputs:n.signature.outputArg.reduce((e,i)=>(e[i.name]=this.mapArgToTensorInfo(i,n.ret),e),{})}}mapArgToTensorInfo(n,e){let i=n.name;return null!=e&&(i=e[i]),{name:i,dtype:n.type}}}function A0e(t,n){const e=Array.isArray(t)?String.fromCharCode.apply(null,t):function nxt(t){const n=Ie().global;if(typeof n.atob<"u")return n.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(t);return n?e:e.toLowerCase()}function cW(t,n,e,i=!1){const s=t[n];return null!=s?A0e(s.s,i):e}function uW(t,n,e){const i=t[n];return i?i.b:e}function dW(t,n,e){const i=t[n]||{},s=null!=i.i?i.i:null!=i.f?i.f:e;return"number"==typeof s?s:parseInt(s,10)}function hW(t){switch("string"==typeof t&&(t=bu[t]),t){case bu.DT_FLOAT:case bu.DT_HALF:return"float32";case bu.DT_INT32:case bu.DT_INT64:case bu.DT_INT8:case bu.DT_UINT8:return"int32";case bu.DT_BOOL:return"bool";case bu.DT_DOUBLE:return"float32";case bu.DT_STRING:return"string";case bu.DT_COMPLEX64:case bu.DT_COMPLEX128:return"complex64";default:return null}}function M0e(t,n,e){const i=t[n];return i&&i.func?i.func.name:e}function pW(t,n,e){const i=t[n];return i&&i.type?hW(i.type):e}function fW(t,n,e){const i=t[n];return i&&i.list&&i.list.type?i.list.type.map(s=>hW(s)):e}function N0e(t){if(!t.unknownRank)return null!=t.dim?t.dim.map(n=>"number"==typeof n.size?n.size:parseInt(n.size,10)):[]}function mW(t,n,e){const i=t[n];return i&&i.shape?N0e(i.shape):e}function _W(t,n,e){const i=t[n];return i?((i.list.f&&i.list.f.length?i.list.f:i.list.i)||[]).map(s=>"number"==typeof s?s:parseInt(s,10)):e}function gW(t,n,e,i=!1){const s=t[n];return s&&s.list&&s.list.s?s.list.s.map(r=>A0e(r,i)):e}function bW(t,n,e){const i=t[n];return i&&i.list&&i.list.shape?i.list.shape.map(s=>N0e(s)):e}function vW(t,n,e){const i=t[n];return i&&i.list&&i.list.b?i.list.b:e}class ixt{constructor(n,e,i){this.node=n,this.tensorMap=e,this.context=i,this.inputs=[],this.attrs={},this.inputs=n.inputNames.map(s=>this.getInput(s)),null!=n.rawAttrs&&(this.attrs=Object.keys(n.rawAttrs).reduce((s,r)=>(s[r]=this.getAttr(r),s),{}))}getInput(n){return $a(n,this.tensorMap,this.context)}getAttr(n,e){const i=this.node.rawAttrs[n];if(null!=i.tensor)return $a(n,this.tensorMap,this.context);if(null!=i.i||null!=i.f)return dW(this.node.rawAttrs,n,e);if(null!=i.s)return cW(this.node.rawAttrs,n,e);if(null!=i.b)return uW(this.node.rawAttrs,n,e);if(null!=i.shape)return mW(this.node.rawAttrs,n,e);if(null!=i.type)return pW(this.node.rawAttrs,n,e);if(null!=i.list){if(null!=i.list.i||null!=i.list.f)return _W(this.node.rawAttrs,n,e);if(null!=i.list.s)return gW(this.node.rawAttrs,n,e);if(null!=i.list.shape)return bW(this.node.rawAttrs,n,e);if(null!=i.list.b)return vW(this.node.rawAttrs,n,e);if(null!=i.list.type)return fW(this.node.rawAttrs,n,e)}return e}}function cd(t,n,e=""){if("number"!=typeof t&&"number"!=typeof n){U(t.length===n.length,()=>e+` Shapes ${t} and ${n} must match`);for(let i=0;i<t.length;i++){const s=t[i],r=n[i];U(s<0||r<0||s===r,()=>e+` Shapes ${t} and ${n} must match`)}}}function O0e(t){return!("number"==typeof t||t.some(n=>n<0))}function $2(t,n,e){let i=yW(t,e);const s=!O0e(i);if(s&&0===n.length)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${i}`);if(s&&n.forEach(r=>{i=yW(r.shape,i)}),!O0e(i))throw new Error(`Non-fully-defined elementShape: ${i}`);return i}function yW(t,n){if("number"==typeof t)return n;if("number"==typeof n)return t;if(t.length!==n.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${n}`);const e=[];for(let i=0;i<t.length;++i){const s=t[i],r=n[i];if(s>=0&&r>=0&&s!==r)throw new Error(`Incompatible shape during merge: ${t} vs. ${n}`);e[i]=s>=0?s:r}return e}class oxt{constructor(n,e,i,s,r,o,a){this.name=n,this.dtype=e,this.maxSize=i,this.elementShape=s,this.identicalElementShapes=r,this.dynamicSize=o,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=En(0),wa(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(n){this.tensors.forEach(e=>{(null==n||!n.has(e.tensor.id))&&e.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(n<0||n>=this.size())throw new Error(`Tried to read from index ${n}, but array size is: ${this.size()}`);const e=this.tensors[n];if(e.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${n} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor}readMany(n){return n.map(e=>this.read(e))}write(n,e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(n<0||!this.dynamicSize&&n>=this.maxSize)throw new Error(`Tried to write to index ${n}, but array is not resizeable and size is: ${this.maxSize}`);const i=this.tensors[n]||{};if(e.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${n},\n          because the value dtype is ${e.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0===this.size()&&(null==this.elementShape||0===this.elementShape.length)&&(this.elementShape=e.shape),cd(this.elementShape,e.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${n}.`),i.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${n}, because it has already been read.`);if(i.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${n}, because it has already been written.`);i.tensor=e,wa(e),i.written=!0,this.tensors[n]=i}writeMany(n,e){if(n.length!==e.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${n.length} is not the same as tensors size: ${e.length}.`);n.forEach((i,s)=>this.write(i,e[s]))}gather(n,e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${e}`);if(n)n=n.slice(0,this.size());else{n=[];for(let s=0;s<this.size();s++)n.push(s)}if(0===n.length)return hu([],[0].concat(this.elementShape));const i=this.readMany(n);return cd(this.elementShape,i[0].shape,"TensorArray shape mismatch: "),Kl(i,0)}concat(n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${n}`);if(0===this.size())return hu([],[0].concat(this.elementShape));const e=[];for(let s=0;s<this.size();s++)e.push(s);const i=this.readMany(e);return cd(this.elementShape,i[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${i[0].shape})`),mo(i,0)}scatter(n,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);if(n.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${n.length} vs. ${e.shape[0]}`);const i=Math.max(...n);if(!this.dynamicSize&&i>=this.maxSize)throw new Error(`Max index must be < array size (${i}  vs. ${this.maxSize})`);this.writeMany(n,sd(e,0))}split(n,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);let i=0;const s=n.map(l=>(i+=l,i));if(i!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${i}, and tensor's shape is: ${e.shape}`);if(!this.dynamicSize&&n.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${n.length}), and the TensorArray is not marked as dynamically resizeable`);const r=0===i?0:e.size/i,o=[];Ee(()=>{e=ge(e,[1,i,r]);for(let l=0;l<n.length;++l)o[l]=ge(is(e,[0,0===l?0:s[l-1],0],[1,n[l],r]),this.elementShape);return o});const a=[];for(let l=0;l<n.length;l++)a[l]=l;this.writeMany(a,o)}}class Wv{get id(){return this.idTensor.id}constructor(n,e,i,s=-1){this.tensors=n,this.elementShape=e,this.elementDtype=i,n?.forEach(r=>{if(i!==r.dtype)throw new Error(`Invalid data types; op elements ${i}, but list elements ${r.dtype}`);cd(e,r.shape,"TensorList shape mismatch: "),wa(r)}),this.idTensor=En(0),this.maxNumElements=s,wa(this.idTensor)}copy(){return new Wv([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(n){this.tensors.forEach(e=>{(null==n||!n.has(e.id))&&e.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(n,e,i=-1){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(-1!==i&&this.tensors.length!==i)throw new Error(`Operation expected a list with ${i} elements but got a list with ${this.tensors.length} elements.`);cd(n,this.elementShape,"TensorList shape mismatch: ");const s=$2(this.elementShape,this.tensors,n);return Ee(()=>{const r=this.tensors.map(o=>ge(o,s));return Kl(r,0)})}popBack(n,e){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const i=$2(this.elementShape,this.tensors,n),s=this.tensors.pop();return s.kept=!1,cd(s.shape,n,"TensorList shape mismatch: "),ge(s,i)}pushBack(n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(cd(n.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");wa(n),this.tensors.push(n)}resize(n){if(n<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${n}`);if(-1!==this.maxNumElements&&n>this.maxNumElements)throw new Error(`TensorListResize input size ${n} is greater maxNumElement ${this.maxNumElements}.`);const e=new Wv([],this.elementShape,this.elementDtype,this.maxNumElements);e.tensors.length=n;for(let i=0;i<Math.min(this.tensors.length,n);++i)e.tensors[i]=this.tensors[i];return e}getItem(n,e,i){if(i!==this.elementDtype)throw new Error(`Invalid data types; op elements ${i}, but list elements ${this.elementDtype}`);if(n<0||n>this.tensors.length)throw new Error(`Trying to access element ${n} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[n])throw new Error(`element at index ${n} is null.`);cd(this.tensors[n].shape,e,"TensorList shape mismatch: ");const s=$2(this.elementShape,this.tensors,e);return ge(this.tensors[n],s)}setItem(n,e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(n<0||-1!==this.maxNumElements&&n>=this.maxNumElements)throw new Error(`Trying to set element ${n} in a list with max ${this.maxNumElements} elements.`);cd(this.elementShape,e.shape,"TensorList shape mismatch: "),wa(e),null!=this.tensors[n]&&(this.tensors[n].kept=!1),this.tensors[n]=e}gather(n,e,i){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);cd(this.elementShape,i,"TensorList shape mismatch: "),n=n.slice(0,this.size());const s=$2(this.elementShape,this.tensors,i);return 0===n.length?hu([],[0].concat(s)):Ee(()=>{const r=n.map(o=>ge(this.tensors[o],s));return Kl(r,0)})}concat(n,e){if(n&&n!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${n}`);cd(this.elementShape,e,"TensorList shape mismatch: ");const i=$2(this.elementShape,this.tensors,e);return 0===this.size()?hu([],[0].concat(i)):Ee(()=>{const s=this.tensors.map(r=>ge(r,i));return mo(s,0)})}}const dxt=function(){var t=z(function*(n,e,i){switch(n.op){case"If":case"StatelessIf":{const s=M("thenBranch",n,e,i),r=M("elseBranch",n,e,i),o=M("cond",n,e,i),a=M("args",n,e,i);return(yield o.data())[0]?i.functionMap[s].executeFunctionAsync(a,i.tensorArrayMap,i.tensorListMap):i.functionMap[r].executeFunctionAsync(a,i.tensorArrayMap,i.tensorListMap)}case"While":case"StatelessWhile":{const s=M("body",n,e,i),r=M("cond",n,e,i),o=M("args",n,e,i),a=yield i.functionMap[r].executeFunctionAsync(o,i.tensorArrayMap,i.tensorListMap),l=o.map(d=>d.id);let c=yield a[0].data();a.forEach(d=>{!d.kept&&-1===l.indexOf(d.id)&&d.dispose()});let u=o;for(;c[0];){const d=u;u=yield i.functionMap[s].executeFunctionAsync(u,i.tensorArrayMap,i.tensorListMap);const h=u.map(f=>f.id);d.forEach(f=>{!f.kept&&-1===l.indexOf(f.id)&&-1===h.indexOf(f.id)&&f.dispose()});const p=yield i.functionMap[r].executeFunctionAsync(u,i.tensorArrayMap,i.tensorListMap);c=yield p[0].data(),p.forEach(f=>{!f.kept&&-1===l.indexOf(f.id)&&-1===h.indexOf(f.id)&&f.dispose()})}return u}case"LoopCond":return[Kf(M("pred",n,e,i))];case"Switch":{const s=M("pred",n,e,i);let r=M("data",n,e,i);return r.kept||(r=Kf(r)),(yield s.data())[0]?[void 0,r]:[r,void 0]}case"Merge":{const s=n.inputNames.find(r=>void 0!==$a(r,e,i));return s?[Kf($a(s,e,i))]:void 0}case"Enter":{const s=M("frameName",n,e,i),r=M("tensor",n,e,i);return i.enterFrame(s),[Kf(r)]}case"Exit":{const s=M("tensor",n,e,i);return i.exitFrame(),[Kf(s)]}case"NextIteration":{const s=M("tensor",n,e,i);return i.nextIteration(),[Kf(s)]}case"TensorArrayV3":{const s=M("size",n,e,i),r=M("dtype",n,e,i),o=M("elementShape",n,e,i),a=M("dynamicSize",n,e,i),l=M("clearAfterRead",n,e,i),c=M("identicalElementShapes",n,e,i),u=M("name",n,e,i),d=new oxt(u,r,s,o,c,a,l);return i.addTensorArray(d),[d.idTensor,En(1)]}case"TensorArrayWriteV3":{const s=M("tensorArrayId",n,e,i),r=M("index",n,e,i),o=M("tensor",n,e,i),a=i.getTensorArray(s.id);return a.write(r,o),[a.idTensor]}case"TensorArrayReadV3":{const s=M("tensorArrayId",n,e,i),r=M("index",n,e,i);return[i.getTensorArray(s.id).read(r)]}case"TensorArrayGatherV3":{const s=M("tensorArrayId",n,e,i),r=M("indices",n,e,i),o=M("dtype",n,e,i);return[i.getTensorArray(s.id).gather(r,o)]}case"TensorArrayScatterV3":{const s=M("tensorArrayId",n,e,i),r=M("indices",n,e,i),o=M("tensor",n,e,i),a=i.getTensorArray(s.id);return a.scatter(r,o),[a.idTensor]}case"TensorArrayConcatV3":{const s=M("tensorArrayId",n,e,i),r=i.getTensorArray(s.id),o=M("dtype",n,e,i);return[r.concat(o)]}case"TensorArraySplitV3":{const s=M("tensorArrayId",n,e,i),r=M("tensor",n,e,i),o=M("lengths",n,e,i),a=i.getTensorArray(s.id);return a.split(o,r),[a.idTensor]}case"TensorArraySizeV3":{const s=M("tensorArrayId",n,e,i);return[En(i.getTensorArray(s.id).size(),"int32")]}case"TensorArrayCloseV3":{const s=M("tensorArrayId",n,e,i),r=i.getTensorArray(s.id);return r.clearAndClose(),[r.idTensor]}case"TensorListSetItem":{const s=M("tensorListId",n,e,i),r=M("index",n,e,i),o=M("tensor",n,e,i),a=i.getTensorList(s.id);return a.setItem(r,o),[a.idTensor]}case"TensorListGetItem":{const s=M("tensorListId",n,e,i),r=M("index",n,e,i),o=M("elementShape",n,e,i),a=M("elementDType",n,e,i);return[i.getTensorList(s.id).getItem(r,o,a)]}case"TensorListScatterV2":case"TensorListScatter":{const s=M("indices",n,e,i),l=function cxt(t,n,e,i){if(n.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${n.length} vs. ${t.shape[0]}`);const s=Math.max(...n);if(null!=i&&-1!==i&&s>=i)throw new Error(`Max index must be < array size (${s}  vs. ${i})`);const r=new Wv([],e,t.dtype,i),o=sd(t,0);return n.forEach((a,l)=>{r.setItem(a,o[l])}),r}(M("tensor",n,e,i),s,M("elementShape",n,e,i),M("numElements",n,e,i));return i.addTensorList(l),[l.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const s=M("elementShape",n,e,i),r=M("elementDType",n,e,i);let o;o="TensorListReserve"===n.op?"numElements":"maxNumElements";const a=M(o,n,e,i),c=function lxt(t,n,e,i){return new Wv([],t,n,i)}(s,r,0,"TensorListReserve"===n.op?-1:a);return i.addTensorList(c),[c.idTensor]}case"TensorListGather":{const s=M("tensorListId",n,e,i),r=M("indices",n,e,i),o=M("elementShape",n,e,i),a=M("elementDType",n,e,i);return[i.getTensorList(s.id).gather(r,a,o)]}case"TensorListStack":{const s=M("tensorListId",n,e,i),r=M("elementShape",n,e,i),o=M("elementDType",n,e,i),a=M("numElements",n,e,i);return[i.getTensorList(s.id).stack(r,o,a)]}case"TensorListFromTensor":{const a=function axt(t,n,e){const i=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==e)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${e}`);cd(t.shape.slice(1),n,"TensorList shape mismatch: ");const r=sd(t);return new Wv(r,n,i)}(M("tensor",n,e,i),M("elementShape",n,e,i),M("elementDType",n,e,i));return i.addTensorList(a),[a.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const s=M("tensorListId",n,e,i),r=i.getTensorList(s.id),o=M("dtype",n,e,i),a=M("elementShape",n,e,i);return[r.concat(o,a)]}case"TensorListPushBack":{const s=M("tensorListId",n,e,i),r=M("tensor",n,e,i),o=i.getTensorList(s.id);return o.pushBack(r),[o.idTensor]}case"TensorListPopBack":{const s=M("tensorListId",n,e,i),r=M("elementShape",n,e,i),o=M("elementDType",n,e,i);return[i.getTensorList(s.id).popBack(r,o)]}case"TensorListSplit":{const s=M("tensor",n,e,i),r=M("elementShape",n,e,i),a=function uxt(t,n,e){let i=0;const s=n.map(u=>(i+=u,i));if(i!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${i}, and tensor's shape is: ${t.shape}`);const o=yW(t.shape.slice(1),e),a=0===i?0:t.size/i,l=Ee(()=>{const u=[];t=ge(t,[1,i,a]);for(let d=0;d<n.length;++d)u[d]=ge(is(t,[0,0===d?0:s[d-1],0],[1,n[d],a]),o);return t.dispose(),u}),c=new Wv([],e,t.dtype,n.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}(s,M("lengths",n,e,i),r);return i.addTensorList(a),[a.idTensor]}case"TensorListLength":{const s=M("tensorListId",n,e,i);return[En(i.getTensorList(s.id).size(),"int32")]}case"TensorListResize":{const s=M("tensorListId",n,e,i),r=M("size",n,e,i),a=i.getTensorList(s.id).resize(r);return i.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${n.op} is not implemented`)}});return function(e,i,s){return t.apply(this,arguments)}}();function R0e(t,n,e){const[i,s]=M("fusedOps",t,n,e),r="biasadd"===i,o=!r,a="prelu"===s,l="fusedbatchnorm"===i,c=M("numArgs",t,n,e);if(r){if(a&&2!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&r&&1!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=M("strides",t,n,e),d=T3(t,n,e),h=M("dataFormat",t,n,e).toUpperCase(),p=M("dilations",t,n,e);let[f,g]=M("args",t,n,e);return o&&(g=f,f=void 0),{stride:u,pad:d,dataFormat:h,dilations:p,biasArg:f,preluArg:g,activationFunc:s,leakyreluAlpha:M("leakyreluAlpha",t,n,e)}}function wW(t,n,e){return{boxes:M("boxes",t,n,e),scores:M("scores",t,n,e),maxOutputSize:M("maxOutputSize",t,n,e),iouThreshold:M("iouThreshold",t,n,e),scoreThreshold:M("scoreThreshold",t,n,e),softNmsSigma:M("softNmsSigma",t,n,e)}}const fxt=function(){var t=z(function*(n,e,i,s,r=Me){switch(n.op){case"NonMaxSuppressionV5":{const{boxes:o,scores:a,maxOutputSize:l,iouThreshold:c,scoreThreshold:u,softNmsSigma:d}=wW(n,e,i),h=yield r.image.nonMaxSuppressionWithScoreAsync(o,a,l,c,u,d);return[h.selectedIndices,h.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:o,scores:a,maxOutputSize:l,iouThreshold:c,scoreThreshold:u}=wW(n,e,i),d=M("padToMaxOutputSize",n,e,i),h=yield r.image.nonMaxSuppressionPaddedAsync(o,a,l,c,u,d);return[h.selectedIndices,h.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:o,scores:a,maxOutputSize:l,iouThreshold:c,scoreThreshold:u}=wW(n,e,i);return[yield r.image.nonMaxSuppressionAsync(o,a,l,c,u)]}case"Where":{const o=r.cast(M("condition",n,e,i),"bool"),a=[yield r.whereAsync(o)];return o.dispose(),a}case"ListDiff":return r.setdiff1dAsync(M("x",n,e,i),M("y",n,e,i));default:throw TypeError(`Node type ${n.op} is not implemented`)}});return function(e,i,s,r){return t.apply(this,arguments)}}();class gxt{get id(){return this.handle.id}constructor(n,e){this.keyDType=n,this.valueDType=e,this.handle=En(0),this.tensorMap=new Map,wa(this.handle)}clearAndClose(){this.tensorMap.forEach(n=>n.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return En(this.size(),"int32")}import(n,e){var i=this;return z(function*(){i.checkKeyAndValueTensor(n,e);const s=yield n.data();return i.tensorMap.forEach(r=>r.dispose()),i.tensorMap.clear(),Ee(()=>{const r=sd(e),o=s.length,a=r.length;U(o===a,()=>`The number of elements doesn't match, keys has ${o} elements, the values has ${a} elements.`);for(let l=0;l<o;l++){const c=s[l],u=r[l];wa(u),i.tensorMap.set(c,u)}return i.handle})})()}find(n,e){var i=this;return z(function*(){i.checkKeyAndValueTensor(n,e);const s=yield n.data();return Ee(()=>{const r=[];for(let o=0;o<s.length;o++){const l=i.findWithDefault(s[o],e);r.push(l)}return Kl(r)})})()}findWithDefault(n,e){return this.tensorMap.get(n)??e}checkKeyAndValueTensor(n,e){if(n.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${n.dtype}`);if(e.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${e.dtype}`)}}const bxt=function(){var t=z(function*(n,e,i,s){switch(n.op){case"HashTable":case"HashTableV2":{const r=s.getHashTableHandleByName(n.name);if(null!=r)return[r];{const o=M("keyDType",n,e,i),a=M("valueDType",n,e,i),l=new gxt(o,a);return s.addHashTable(n.name,l),[l.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const r=M("tableHandle",n,e,i,s),o=M("keys",n,e,i),a=M("values",n,e,i);return[yield s.getHashTableById(r.id).import(o,a)]}case"LookupTableFind":case"LookupTableFindV2":{const r=M("tableHandle",n,e,i,s),o=M("keys",n,e,i),a=M("defaultValue",n,e,i);return[yield s.getHashTableById(r.id).find(o,a)]}case"LookupTableSize":case"LookupTableSizeV2":{const r=M("tableHandle",n,e,i,s);return[s.getHashTableById(r.id).tensorSize()]}default:throw TypeError(`Node type ${n.op} is not implemented`)}});return function(e,i,s,r){return t.apply(this,arguments)}}();function F0e(t,n,e,i,s=Ee){const r=((o,a,l)=>{switch(o.category){case"arithmetic":return s(()=>((t,n,e,i=Me)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[i.add(M("a",t,n,e),M("b",t,n,e))];case"AddN":return[i.addN(M("tensors",t,n,e))];case"FloorMod":case"Mod":return[i.mod(M("a",t,n,e),M("b",t,n,e))];case"Mul":return[i.mul(M("a",t,n,e),M("b",t,n,e))];case"RealDiv":case"Div":return[i.div(M("a",t,n,e),M("b",t,n,e))];case"DivNoNan":return[i.divNoNan(M("a",t,n,e),M("b",t,n,e))];case"FloorDiv":return[i.floorDiv(M("a",t,n,e),M("b",t,n,e))];case"Sub":return[i.sub(M("a",t,n,e),M("b",t,n,e))];case"Minimum":return[i.minimum(M("a",t,n,e),M("b",t,n,e))];case"Maximum":return[i.maximum(M("a",t,n,e),M("b",t,n,e))];case"Pow":return[i.pow(M("a",t,n,e),M("b",t,n,e))];case"SquaredDifference":return[i.squaredDifference(M("a",t,n,e),M("b",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"basic_math":return s(()=>((t,n,e,i=Me)=>{switch(t.op){case"Abs":case"ComplexAbs":return[i.abs(M("x",t,n,e))];case"Acos":return[i.acos(M("x",t,n,e))];case"Acosh":return[i.acosh(M("x",t,n,e))];case"Asin":return[i.asin(M("x",t,n,e))];case"Asinh":return[i.asinh(M("x",t,n,e))];case"Atan":return[i.atan(M("x",t,n,e))];case"Atan2":return[i.atan2(M("x",t,n,e),M("y",t,n,e))];case"Atanh":return[i.atanh(M("x",t,n,e))];case"Ceil":return[i.ceil(M("x",t,n,e))];case"Complex":return[i.complex(M("real",t,n,e),M("imag",t,n,e))];case"Cos":return[i.cos(M("x",t,n,e))];case"Cosh":return[i.cosh(M("x",t,n,e))];case"Elu":return[i.elu(M("x",t,n,e))];case"Erf":return[i.erf(M("x",t,n,e))];case"Exp":return[i.exp(M("x",t,n,e))];case"Expm1":return[i.expm1(M("x",t,n,e))];case"Floor":return[i.floor(M("x",t,n,e))];case"Log":return[i.log(M("x",t,n,e))];case"Log1p":return[i.log1p(M("x",t,n,e))];case"Imag":return[i.imag(M("x",t,n,e))];case"Neg":return[i.neg(M("x",t,n,e))];case"Reciprocal":return[i.reciprocal(M("x",t,n,e))];case"Real":return[i.real(M("x",t,n,e))];case"Relu":return[i.relu(M("x",t,n,e))];case"Round":return[i.round(M("x",t,n,e))];case"Selu":return[i.selu(M("x",t,n,e))];case"Sigmoid":return[i.sigmoid(M("x",t,n,e))];case"Sin":return[i.sin(M("x",t,n,e))];case"Sign":return[i.sign(M("x",t,n,e))];case"Sinh":return[i.sinh(M("x",t,n,e))];case"Softplus":return[i.softplus(M("x",t,n,e))];case"Sqrt":return[i.sqrt(M("x",t,n,e))];case"Square":return[i.square(M("x",t,n,e))];case"Tanh":return[i.tanh(M("x",t,n,e))];case"Tan":return[i.tan(M("x",t,n,e))];case"ClipByValue":return[i.clipByValue(M("x",t,n,e),M("clipValueMin",t,n,e),M("clipValueMax",t,n,e))];case"Relu6":return[i.relu6(M("x",t,n,e))];case"Rsqrt":return[i.rsqrt($a(t.inputNames[0],n,e))];case"LeakyRelu":return[i.leakyRelu(M("x",t,n,e),M("alpha",t,n,e))];case"Prelu":return[i.prelu(M("x",t,n,e),M("alpha",t,n,e))];case"IsNan":return[i.isNaN($a(t.inputNames[0],n,e))];case"IsInf":return[i.isInf($a(t.inputNames[0],n,e))];case"IsFinite":return[i.isFinite($a(t.inputNames[0],n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"control":return dxt(o,a,l);case"convolution":return s(()=>((t,n,e,i=Me)=>{switch(t.op){case"Conv1D":{const s=M("stride",t,n,e),r=M("pad",t,n,e),o=M("dataFormat",t,n,e).toUpperCase(),a=M("dilation",t,n,e);return[i.conv1d(M("x",t,n,e),M("filter",t,n,e),s,r,o,a)]}case"Conv2D":{const s=M("strides",t,n,e),r=T3(t,n,e),o=M("dataFormat",t,n,e).toUpperCase(),a=M("dilations",t,n,e);return[i.conv2d(M("x",t,n,e),M("filter",t,n,e),[s[1],s[2]],r,o,[a[1],a[2]])]}case"_FusedConv2D":{const{stride:s,pad:r,dataFormat:o,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=R0e(t,n,e);return[i.fused.conv2d({x:M("x",t,n,e),filter:M("filter",t,n,e),strides:[s[1],s[2]],pad:r,dataFormat:o,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:r,dataFormat:o,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=R0e(t,n,e);return[i.fused.depthwiseConv2d({x:M("x",t,n,e),filter:M("filter",t,n,e),strides:[s[1],s[2]],pad:r,dataFormat:o,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=M("outputShape",t,n,e),r=M("strides",t,n,e),o=T3(t,n,e);return[i.conv2dTranspose(M("x",t,n,e),M("filter",t,n,e),s,[r[1],r[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=M("strides",t,n,e),r=T3(t,n,e),o=M("dilations",t,n,e),a=M("dataFormat",t,n,e).toUpperCase();return[i.depthwiseConv2d(M("input",t,n,e),M("filter",t,n,e),[s[1],s[2]],r,a,[o[1],o[2]])]}case"Conv3D":{const s=M("strides",t,n,e),r=M("pad",t,n,e),o=M("dataFormat",t,n,e).toUpperCase(),a=M("dilations",t,n,e);return[i.conv3d(M("x",t,n,e),M("filter",t,n,e),[s[1],s[2],s[3]],r,o,[a[1],a[2],a[3]])]}case"AvgPool":{const s=M("strides",t,n,e),r=M("pad",t,n,e),o=M("kernelSize",t,n,e);return[i.avgPool(M("x",t,n,e),[o[1],o[2]],[s[1],s[2]],r)]}case"MaxPool":{const s=M("strides",t,n,e),r=M("pad",t,n,e),o=M("kernelSize",t,n,e);return[i.maxPool(M("x",t,n,e),[o[1],o[2]],[s[1],s[2]],r)]}case"MaxPoolWithArgmax":{const s=M("strides",t,n,e),r=M("pad",t,n,e),o=M("kernelSize",t,n,e),a=M("includeBatchInIndex",t,n,e),{result:l,indexes:c}=i.maxPoolWithArgmax(M("x",t,n,e),[o[1],o[2]],[s[1],s[2]],r,a);return[l,c]}case"AvgPool3D":{const s=M("strides",t,n,e),r=M("pad",t,n,e),o=M("kernelSize",t,n,e);return[i.avgPool3d(M("x",t,n,e),[o[1],o[2],o[3]],[s[1],s[2],s[3]],r)]}case"MaxPool3D":{const s=M("strides",t,n,e),r=M("pad",t,n,e),o=M("kernelSize",t,n,e);return[i.maxPool3d(M("x",t,n,e),[o[1],o[2],o[3]],[s[1],s[2],s[3]],r)]}case"Dilation2D":{const s=M("strides",t,n,e),r=M("pad",t,n,e),o=M("dilations",t,n,e),a=s[1],l=s[2],c=o[1],u=o[2];return[i.dilation2d(M("x",t,n,e),M("filter",t,n,e),[a,l],r,[c,u],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"creation":return s(()=>((t,n,e,i=Me)=>{switch(t.op){case"Fill":{const s=M("shape",t,n,e),r=M("dtype",t,n,e),o=M("value",t,n,e);return[i.fill(s,o,r)]}case"LinSpace":{const s=M("start",t,n,e),r=M("stop",t,n,e),o=M("num",t,n,e);return[i.linspace(s,r,o)]}case"Multinomial":{const s=M("logits",t,n,e),r=M("numSamples",t,n,e),o=M("seed",t,n,e);return[i.multinomial(s,r,o)]}case"OneHot":{const s=M("indices",t,n,e),r=M("depth",t,n,e),o=M("onValue",t,n,e),a=M("offValue",t,n,e),l=M("dtype",t,n,e);return[i.oneHot(s,r,o,a,l)]}case"Ones":return[i.ones(M("shape",t,n,e),M("dtype",t,n,e))];case"OnesLike":return[i.onesLike(M("x",t,n,e))];case"RandomStandardNormal":return[i.randomStandardNormal(M("shape",t,n,e),M("dtype",t,n,e),M("seed",t,n,e))];case"RandomUniform":return[i.randomUniform(M("shape",t,n,e),M("minval",t,n,e),M("maxval",t,n,e),M("dtype",t,n,e))];case"RandomUniformInt":return[i.randomUniformInt(M("shape",t,n,e),M("minval",t,n,e),M("maxval",t,n,e),M("seed",t,n,e))];case"Range":{const s=M("start",t,n,e),r=M("stop",t,n,e),o=M("step",t,n,e);return[i.range(s,r,o,M("dtype",t,n,e))]}case"TruncatedNormal":{const s=M("shape",t,n,e),r=M("mean",t,n,e),o=M("stdDev",t,n,e),a=M("seed",t,n,e);return[i.truncatedNormal(s,r,o,M("dtype",t,n,e),a)]}case"Zeros":return[i.zeros(M("shape",t,n,e),M("dtype",t,n,e))];case"ZerosLike":return[i.zerosLike(M("x",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"dynamic":return fxt(o,a,l);case"evaluation":return s(()=>((t,n,e,i=Me)=>{switch(t.op){case"LowerBound":{const s=M("sortedSequence",t,n,e),r=M("values",t,n,e);return[i.lowerBound(s,r)]}case"TopKV2":{const s=M("x",t,n,e),r=M("k",t,n,e),o=M("sorted",t,n,e),a=i.topk(s,r,o);return[a.values,a.indices]}case"UpperBound":{const s=M("sortedSequence",t,n,e),r=M("values",t,n,e);return[i.upperBound(s,r)]}case"Unique":{const s=M("x",t,n,e),r=i.unique(s);return[r.values,r.indices]}case"UniqueV2":{const s=M("x",t,n,e),r=M("axis",t,n,e),o=i.unique(s,r);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"image":return s(()=>((t,n,e,i=Me)=>{switch(t.op){case"ResizeBilinear":{const s=M("images",t,n,e),r=M("size",t,n,e),o=M("alignCorners",t,n,e),a=M("halfPixelCenters",t,n,e);return[i.image.resizeBilinear(s,[r[0],r[1]],o,a)]}case"ResizeNearestNeighbor":{const s=M("images",t,n,e),r=M("size",t,n,e),o=M("alignCorners",t,n,e),a=M("halfPixelCenters",t,n,e);return[i.image.resizeNearestNeighbor(s,[r[0],r[1]],o,a)]}case"CropAndResize":{const s=M("image",t,n,e),r=M("boxes",t,n,e),o=M("boxInd",t,n,e),a=M("cropSize",t,n,e),l=M("method",t,n,e),c=M("extrapolationValue",t,n,e);return[i.image.cropAndResize(s,r,o,a,l,c)]}case"ImageProjectiveTransformV3":{const s=M("images",t,n,e),r=M("transforms",t,n,e),o=M("outputShape",t,n,e),a=M("fillValue",t,n,e),l=M("interpolation",t,n,e),c=M("fillMode",t,n,e);return[i.image.transform(s,r,l.toLowerCase(),c.toLowerCase(),a,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"graph":return s(()=>((t,n,e,i=Me)=>{switch(t.op){case"Const":return n[t.name];case"PlaceholderWithDefault":const s=M("default",t,n,e);return[$a(t.name,n,e)||s];case"Placeholder":return[$a(t.name,n,e)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[Kf(M("x",t,n,e))];case"IdentityN":return M("x",t,n,e).map(u=>Kf(u));case"Shape":return[i.tensor1d(M("x",t,n,e).shape,"int32")];case"ShapeN":return M("x",t,n,e).map(u=>i.tensor1d(u.shape));case"Size":return[i.scalar(M("x",t,n,e).size,"int32")];case"Rank":return[i.scalar(M("x",t,n,e).rank,"int32")];case"NoOp":return[i.scalar(1)];case"Print":const o=M("x",t,n,e),a=M("data",t,n,e),l=M("message",t,n,e),c=M("summarize",t,n,e);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<a.length;u++)console.log(Array.prototype.slice.call(a[u].dataSync()).slice(0,c));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"logical":return s(()=>((t,n,e,i=Me)=>{switch(t.op){case"Equal":return[i.equal(M("a",t,n,e),M("b",t,n,e))];case"NotEqual":return[i.notEqual(M("a",t,n,e),M("b",t,n,e))];case"Greater":return[i.greater(M("a",t,n,e),M("b",t,n,e))];case"GreaterEqual":return[i.greaterEqual(M("a",t,n,e),M("b",t,n,e))];case"Less":return[i.less(M("a",t,n,e),M("b",t,n,e))];case"LessEqual":return[i.lessEqual(M("a",t,n,e),M("b",t,n,e))];case"LogicalAnd":return[i.logicalAnd(M("a",t,n,e),M("b",t,n,e))];case"LogicalNot":return[i.logicalNot(M("a",t,n,e))];case"LogicalOr":return[i.logicalOr(M("a",t,n,e),M("b",t,n,e))];case"Select":case"SelectV2":return[i.where(M("condition",t,n,e),M("a",t,n,e),M("b",t,n,e))];case"BitwiseAnd":return[i.bitwiseAnd(M("a",t,n,e),M("b",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"matrices":return s(()=>((t,n,e,i=Me)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[i.matMul(M("a",t,n,e),M("b",t,n,e),M("transposeA",t,n,e),M("transposeB",t,n,e))];case"Einsum":return[i.einsum(M("equation",t,n,e),...M("tensors",t,n,e))];case"Transpose":return[i.transpose(M("x",t,n,e),M("perm",t,n,e))];case"_FusedMatMul":const[s,r]=M("fusedOps",t,n,e),o="biasadd"===s,a="prelu"===r,l=M("numArgs",t,n,e),c=M("leakyreluAlpha",t,n,e);if(o){if(a&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,d]=M("args",t,n,e);return[i.fused.matMul({a:M("a",t,n,e),b:M("b",t,n,e),transposeA:M("transposeA",t,n,e),transposeB:M("transposeB",t,n,e),bias:u,activation:r,preluActivationWeights:d,leakyreluAlpha:c})];case"MatrixBandPart":return[i.linalg.bandPart(M("a",t,n,e),M("numLower",t,n,e),M("numUpper",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"normalization":return s(()=>((t,n,e,i=Me)=>{switch(t.op){case"EuclideanNorm":return[i.euclideanNorm(M("x",t,n,e),M("axis",t,n,e),M("keepDims",t,n,e))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[i.batchNorm(M("x",t,n,e),M("mean",t,n,e),M("variance",t,n,e),M("offset",t,n,e),M("scale",t,n,e),M("epsilon",t,n,e))];case"LRN":return[i.localResponseNormalization(M("x",t,n,e),M("radius",t,n,e),M("bias",t,n,e),M("alpha",t,n,e),M("beta",t,n,e))];case"Softmax":return[i.softmax(M("x",t,n,e))];case"LogSoftmax":return[i.logSoftmax(M("x",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"ragged":return s(()=>((t,n,e,i=Me)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:r}=i.raggedGather(M("paramsNestedSplits",t,n,e),M("paramsDenseValues",t,n,e),M("indices",t,n,e),M("outputRaggedRank",t,n,e));return s.concat(r)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:r}=i.raggedRange(M("starts",t,n,e),M("limits",t,n,e),M("splits",t,n,e));return[s,r]}case"RaggedTensorToTensor":return[i.raggedTensorToTensor(M("shape",t,n,e),M("values",t,n,e),M("defaultValue",t,n,e),M("rowPartitionTensors",t,n,e),M("rowPartitionTypes",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"reduction":return s(()=>((t,n,e,i=Me)=>{switch(t.op){case"Max":{const a=M("axis",t,n,e),l=M("keepDims",t,n,e);return[i.max(M("x",t,n,e),a,l)]}case"Mean":{const a=M("axis",t,n,e),l=M("keepDims",t,n,e);return[i.mean(M("x",t,n,e),a,l)]}case"Min":{const a=M("axis",t,n,e),l=M("keepDims",t,n,e);return[i.min(M("x",t,n,e),a,l)]}case"Sum":{const a=M("axis",t,n,e),l=M("keepDims",t,n,e);return[i.sum(M("x",t,n,e),a,l)]}case"All":{const a=M("axis",t,n,e),l=M("keepDims",t,n,e);return[i.all(M("x",t,n,e),a,l)]}case"Any":{const a=M("axis",t,n,e),l=M("keepDims",t,n,e);return[i.any(M("x",t,n,e),a,l)]}case"ArgMax":{const a=M("axis",t,n,e);return[i.argMax(M("x",t,n,e),a)]}case"ArgMin":{const a=M("axis",t,n,e);return[i.argMin(M("x",t,n,e),a)]}case"Prod":{const a=M("axis",t,n,e),l=M("keepDims",t,n,e);return[i.prod(M("x",t,n,e),a,l)]}case"Cumprod":{const a=M("axis",t,n,e),l=M("exclusive",t,n,e),c=M("reverse",t,n,e);return[i.cumprod(M("x",t,n,e),a,l,c)]}case"Cumsum":{const a=M("axis",t,n,e),l=M("exclusive",t,n,e),c=M("reverse",t,n,e);return[i.cumsum(M("x",t,n,e),a,l,c)]}case"Bincount":const s=M("x",t,n,e),r=M("weights",t,n,e),o=M("size",t,n,e);return[i.bincount(s,r,o)];case"DenseBincount":{const a=M("x",t,n,e),l=M("weights",t,n,e),c=M("size",t,n,e),u=M("binaryOutput",t,n,e);return[i.denseBincount(a,l,c,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"slice_join":return s(()=>((t,n,e,i=Me)=>{switch(t.op){case"ConcatV2":case"Concat":{const s=M("n",t,n,e),r=M("axis",t,n,e);let o=M("tensors",t,n,e);return o=o.slice(0,s),[i.concat(o,r)]}case"Gather":{const s=M("x",t,n,e),r=M("indices",t,n,e);return[i.gather(s,i.cast(r,"int32"),0)]}case"GatherV2":{const s=M("axis",t,n,e),r=M("batchDims",t,n,e),o=M("x",t,n,e),a=M("indices",t,n,e);return[i.gather(o,i.cast(a,"int32"),s,r)]}case"Reverse":{const s=M("dims",t,n,e),r=[];for(let a=0;a<s.length;a++)s[a]&&r.push(a);const o=M("x",t,n,e);return[i.reverse(o,r)]}case"ReverseV2":{const s=M("axis",t,n,e),r=M("x",t,n,e);return[i.reverse(r,s)]}case"Slice":{const s=M("begin",t,n,e),r=M("size",t,n,e);return[i.slice(M("x",t,n,e),s,r)]}case"StridedSlice":{const s=M("begin",t,n,e),r=M("end",t,n,e),o=M("strides",t,n,e),a=M("beginMask",t,n,e),l=M("endMask",t,n,e),c=M("ellipsisMask",t,n,e),u=M("newAxisMask",t,n,e),d=M("shrinkAxisMask",t,n,e),h=M("x",t,n,e);return[i.stridedSlice(h,s,r,o,a,l,c,u,d)]}case"Pack":return Ee(()=>{const s=M("axis",t,n,e),r=M("tensors",t,n,e),o=r[0].shape,a=i.squeeze(r[0]).shape,l=r.map(c=>{const u=es(c.shape,o);if(!u&&!es(i.squeeze(c).shape,a))throw new Error("the input tensors shape does not match");return u?c:i.reshape(c,o)});return[i.stack(l,s)]});case"Unpack":{const s=M("axis",t,n,e),r=M("tensor",t,n,e);return i.unstack(r,s)}case"Tile":{const s=M("reps",t,n,e);return[i.tile(M("x",t,n,e),s)]}case"Split":case"SplitV":{const s=M("axis",t,n,e),r=M("numOrSizeSplits",t,n,e),o=M("x",t,n,e);return i.split(o,r,s)}case"ScatterNd":{const s=M("indices",t,n,e),r=M("values",t,n,e),o=M("shape",t,n,e);return[i.scatterND(s,r,o)]}case"GatherNd":{const s=M("x",t,n,e),r=M("indices",t,n,e);return[i.gatherND(s,r)]}case"SparseToDense":{const s=M("sparseIndices",t,n,e),r=M("outputShape",t,n,e),o=M("sparseValues",t,n,e),a=M("defaultValue",t,n,e);return[i.sparseToDense(s,o,r,o.dtype===a.dtype?a:i.cast(a,o.dtype))]}case"TensorScatterUpdate":{const s=M("indices",t,n,e),r=M("values",t,n,e),o=M("tensor",t,n,e);return[i.tensorScatterUpdate(o,s,r)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"sparse":return s(()=>((t,n,e,i=Me)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:r,emptyRowIndicator:o,reverseIndexMap:a}=i.sparse.sparseFillEmptyRows(M("indices",t,n,e),M("values",t,n,e),M("denseShape",t,n,e),M("defaultValue",t,n,e));return[s,r,o,a]}case"SparseReshape":{const{outputIndices:s,outputShape:r}=i.sparse.sparseReshape(M("inputIndices",t,n,e),M("inputShape",t,n,e),M("newShape",t,n,e));return[s,r]}case"SparseSegmentMean":return[i.sparse.sparseSegmentMean(M("data",t,n,e),M("indices",t,n,e),M("segmentIds",t,n,e))];case"SparseSegmentSum":return[i.sparse.sparseSegmentSum(M("data",t,n,e),M("indices",t,n,e),M("segmentIds",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"spectral":return s(()=>((t,n,e,i=Me)=>{switch(t.op){case"FFT":return[i.fft(M("x",t,n,e))];case"IFFT":return[i.ifft(M("x",t,n,e))];case"RFFT":return[i.rfft(M("x",t,n,e))];case"IRFFT":return[i.irfft(M("x",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"string":return s(()=>((t,n,e,i=Me)=>{switch(t.op){case"StaticRegexReplace":return[i.string.staticRegexReplace(M("input",t,n,e),M("pattern",t,n,e),M("rewrite",t,n,e),M("replaceGlobal",t,n,e))];case"StringNGrams":{const{nGrams:s,nGramsSplits:r}=i.string.stringNGrams(M("data",t,n,e),M("dataSplits",t,n,e),M("separator",t,n,e),M("nGramWidths",t,n,e),M("leftPad",t,n,e),M("rightPad",t,n,e),M("padWidth",t,n,e),M("preserveShortSequences",t,n,e));return[s,r]}case"StringSplit":{const{indices:s,values:r,shape:o}=i.string.stringSplit(M("input",t,n,e),M("delimiter",t,n,e),M("skipEmpty",t,n,e));return[s,r,o]}case"StringToHashBucketFast":return[i.string.stringToHashBucketFast(M("input",t,n,e),M("numBuckets",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"transformation":return s(()=>((t,n,e,i=Me)=>{switch(t.op){case"Cast":return[i.cast(M("x",t,n,e),M("dtype",t,n,e))];case"ExpandDims":{const s=M("axis",t,n,e);return[i.expandDims(M("x",t,n,e),s)]}case"Squeeze":{const s=M("axis",t,n,e);return[i.squeeze(M("x",t,n,e),s)]}case"Reshape":return[i.reshape(M("x",t,n,e),M("shape",t,n,e))];case"EnsureShape":return[i.ensureShape(M("x",t,n,e),M("shape",t,n,e))];case"MirrorPad":return[i.mirrorPad(M("x",t,n,e),M("padding",t,n,e),M("mode",t,n,e))];case"PadV2":case"Pad":return[i.pad(M("x",t,n,e),M("padding",t,n,e),M("constantValue",t,n,e))];case"SpaceToBatchND":{const s=M("blockShape",t,n,e),r=M("paddings",t,n,e);return[i.spaceToBatchND(M("x",t,n,e),s,r)]}case"BatchToSpaceND":{const s=M("blockShape",t,n,e),r=M("crops",t,n,e);return[i.batchToSpaceND(M("x",t,n,e),s,r)]}case"DepthToSpace":{const s=M("blockSize",t,n,e),r=M("dataFormat",t,n,e).toUpperCase();return[i.depthToSpace(M("x",t,n,e),s,r)]}case"BroadcastTo":return[i.broadcastTo(M("x",t,n,e),M("shape",t,n,e))];case"BroadcastArgs":return[i.broadcastArgs(M("s0",t,n,e),M("s1",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}})(o,a,l));case"hash_table":return bxt(o,a,l,i);case"custom":const c=I0e(o.op);if(c&&c.customExecutor)return c.customExecutor(new ixt(o,a,l));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,n,e);return S_(r)?r.then(o=>[].concat(o)):[].concat(r)}class L0e{constructor(n={},e={},i={},s={},r){this.weightMap=n,this.tensorArrayMap=e,this.tensorListMap=i,this.functionMap=s,this.parseNodeNameCache=r,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(n,e){return{id:n,frameName:e,iterationId:0}}set currentContext(n){this.contexts!==n&&(this.contexts=n,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const n=[];for(let e=0;e<this.contexts.length-1;e++){const i=this.contexts.slice(0,this.contexts.length-e);n.push(this.contextIdforContexts(i))}n.push(""),this._currentContextIds=n}contextIdforContexts(n){return n?n.map(e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`).join("/"):""}enterFrame(n){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,n)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const n=Object.assign({},this.contexts[this.contexts.length-1]);n.iterationId+=1,n.id=this.lastId,this.contexts.splice(-1,1,n),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(n){return this.weightMap[n]}addTensorArray(n){this.tensorArrayMap[n.id]=n}getTensorArray(n){return this.tensorArrayMap[n]}addTensorList(n){this.tensorListMap[n.id]=n}getTensorList(n){return this.tensorListMap[n]}dispose(n){for(const e in this.tensorArrayMap)this.tensorArrayMap[e].clearAndClose(n);for(const e in this.tensorListMap)this.tensorListMap[e].clearAndClose(n)}}function P0e(t,n,e,i){const s=new Set,r=[];let o=null,a=null;const l=new Set,c=new Set(Object.keys(t).map(h=>Ac(h)[0]));i=i||[];const u=new Set(i.map(h=>Ac(h.name)[0])),d=[...n];for(;d.length>0;){const h=d.pop();if((qv(h)||Pxt(h)||$xt(h))&&null==o&&(o=h,a=o.children.map(p=>p.name).filter(p=>s.has(p))),s.add(h.name),null==e[h.name]&&!c.has(h.name)&&!u.has(h.name)){if(0===h.inputs.length){r.push(h.name);continue}h.inputs.forEach(p=>{l.has(p.name)||(l.add(p.name),d.push(p))})}}return{inputs:t,outputs:n,usedNodes:s,missingInputs:r,dynamicNode:o,syncInputs:a}}class I3 extends Error{constructor(n){super(`NodesExecutionOrderError: ${n}`)}}const Rxt=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Fxt=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),Lxt=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function qv(t){return Rxt.has(t.op)}function Pxt(t){return Fxt.has(t.op)}function $xt(t){return Lxt.has(t.op)}class k3{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(n){const e=Object.keys(n).map(i=>n[i].map(s=>s.id));this._weightIds=[].concat(...e),this._weightMap=n}set resourceManager(n){this._resourceManager=n}get inputs(){return this._inputs.map(n=>({name:n.name,shape:n.attrParams.shape?n.attrParams.shape.value:void 0,dtype:n.attrParams.dtype?n.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(n=>({name:n.name,shape:n.attrParams.shape?n.attrParams.shape.value:void 0,dtype:n.attrParams.dtype?n.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(n=>n.signatureKey||n.name)}get outputNodes(){return this._outputs.map(n=>{const e=n.signatureKey||n.name;return n.defaultOutput?`${e}:${n.defaultOutput}`:e})}get functions(){return Object.keys(this._functions).reduce((n,e)=>(n[e]=this._functions[e].signature,n),{})}constructor(n,e){this.graph=n,this.parent=e,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=n.outputs,this._inputs=n.inputs,this._initNodes=n.initNodes,this._signature=n.signature,this._functions=n.functions,null!=n.functions&&Object.keys(n.functions).forEach(i=>{this._functionExecutorMap[i]=new k3(n.functions[i],this)})}getCompilationKey(n,e){const i=n.map(r=>r.name).sort(),s=e.map(r=>r.name).sort();return i.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(n,e){const i=P0e(n,e,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:r,syncInputs:o}=i;if(null!=r)throw new Error(`This execution contains the node '${r.name}', which has the dynamic op '${r.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(s.length>0){const c=e.map(d=>d.name),u=Object.keys(n);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${u}]. Missing the following inputs: [${s}]`)}const a=function Axt(t,n){const{usedNodes:e,inputs:i}=n,o=v=>e.has("string"==typeof v?v:v.name);function a(v){return[...new Map(v.map(y=>[y.name,y])).values()]}const l=a([...Object.keys(i).map(v=>Ac(v)[0]).map(v=>t.nodes[v]),...t.weights,...t.initNodes||[]]).filter(o),c=a([...l,...Object.values(t.nodes)]).filter(o),u=new Map(c.map(v=>[v.name,v])),d={};for(const v of c){d[v.name]=d[v.name]||0;for(const y of v.children)o(y)||(d[y.name]=Number.POSITIVE_INFINITY),d[y.name]=(d[y.name]||0)+1}const h=Object.entries(d).filter(([,v])=>0===v).map(([v])=>v),p=[...h];for(;h.length>0;){const v=h.pop(),y=u.get(v);for(const w of y.children.filter(o))0==--d[w.name]&&(p.push(w.name),h.push(w.name))}const g=function Mxt(t,n){const e=new Map(t.map(o=>[o.name,o])),i=n.map(o=>o.name),s=new Set(i);for(;i.length>0;){const o=i.pop(),a=e.get(o);for(const l of a.children)!e.has(l.name)||s.has(l.name)||(s.add(l.name),i.push(l.name))}return t.filter(o=>s.has(o.name))}(p.map(v=>u.get(v)),l);return function Nxt(t,n){const e=new Map(t.map((a,l)=>[a.name,l])),i=new Set(n.map(a=>a.name)),s=a=>i.has("string"==typeof a?a:a.name),r=new Set(t.map(a=>a.name)),o=a=>r.has("string"==typeof a?a:a.name);for(const a of t){for(const l of a.children.filter(o)){if(!e.has(l.name))throw new I3(`Child ${l.name} of node ${a.name} is unreachable.`);if(e.get(a.name)>e.get(l.name))throw new I3(`Node ${a.name} is scheduled to run after its child ${l.name}.`)}if(!s(a))for(const l of a.inputs){if(!e.has(l.name))throw new I3(`Input ${l.name} of node ${a.name} is unreachable.`);if(e.get(l.name)>e.get(a.name))throw new I3(`Node ${a.name} is scheduled to run before its input ${l.name}.`)}}}(g,l),g}(this.graph,i),l=function Oxt(t){const n=new Map(t.map((a,l)=>[a.name,l])),e=Number.MAX_SAFE_INTEGER,i=t.map((a,l)=>qv(a)?e:l),s=a=>i[n.get(a.name)]??-1,r=t.map((a,l)=>a.children.map(s).reduce((c,u)=>Math.max(c,u),i[l])),o=new Map;for(let a=0;a<t.length;++a){const l=r[a];if(l===e)continue;const c=t[a],u=t[l];o.has(u.name)||o.set(u.name,[]),o.get(u.name).push(c)}return o}(a);return{orderedNodes:a,nodeLiveUntilMap:l}}cloneAndKeepTensor(n){if(null==n)return null;const e=n.clone();return wa(e),e}cloneTensorList(n){return n?n.map(i=>this.cloneAndKeepTensor(i)):null}cloneTensorMap(n){return Object.fromEntries(Object.entries(n).map(([e,i])=>[e,this.cloneTensorList(i)]))}execute(n,e){this.disposeIntermediateTensors(),n=this.mapInputs(n);const i=Object.keys(n).sort();this.checkInputs(n),this.checkInputShapeAndType(n),e=this.mapOutputs(e),this.checkOutputs(e);const s=i.map(h=>this.graph.nodes[Ac(h)[0]]),r=e.map(h=>Ac(h)[0]),o=new Set(r);let a=r.map(h=>this.graph.nodes[h]);0===a.length&&(a=this._outputs);const l=this.getCompilationKey(s,a);let c=this.compiledMap.get(l);null==c&&(c=this.compile(n,a),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=Ie().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}const u={},d={};return Ee(()=>{const h=new L0e(this.weightMap,u,d,this.functionExecutorMap,this.parseNodeNameCache),p=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(n).forEach(y=>{const[w,x]=Ac(y,h),T=[];T[x]=n[y],p[w]=T,this.keepIntermediateTensors&&(this.clonedTensorsMap[w]=this.cloneTensorList(T))});const f=this.getFrozenTensorIds(p),{orderedNodes:g,nodeLiveUntilMap:v}=c;for(const y of g){if(p[y.name])continue;const w=F0e(y,p,h,this._resourceManager);if(S_(w))throw new Error(`The execution of the op '${y.op}' returned a promise. Please use model.executeAsync() instead.`);p[y.name]=w,this.keepIntermediateTensors&&(this.clonedTensorsMap[y.name]=this.cloneTensorList(w)),this.checkTensorForDisposalWithNodeLiveUntilInfo(y,p,h,f,o,v.get(y.name))}return null==this.parent&&h.dispose(f),e.map(y=>$a(y,p,h))})}getFrozenTensorIds(n){const e=[].concat.apply([],Object.keys(n).map(i=>n[i]).map(i=>i.map(s=>s.id)));return new Set(e)}checkTensorForDisposal(n,e,i,s,r,o,a){if(!qv(e)&&!o.has(n)){for(const l of i[n])null!=l&&(a[l.id]=(a[l.id]||0)+e.children.length);for(const l of e.inputs){if(qv(l))continue;const c=k0e(l.name,i,s);if(null!=c)for(const u of c){if(!u||u.kept||r.has(u.id))continue;const d=a[u.id];1===d?(u.dispose(),delete a[u.id]):null!=d&&a[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(n,e,i,s,r,o){function a(l){return qv(l)||r.has(l.name)}if(!qv(n)&&null!=o)for(const l of o){if(a(l))continue;const c=k0e(l.name,e,i);for(const u of c)!u||u.kept||s.has(u.id)||u.dispose()}}executeAsync(n,e){var i=this;return z(function*(){return i._executeAsync(n,e)})()}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(n=>{for(const e of n)e&&!e.isDisposed&&e.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}_executeAsync(n,e,i=!1,s={},r={}){var o=this;return z(function*(){o.disposeIntermediateTensors(),i||(n=o.mapInputs(n),o.checkInputs(n),o.checkInputShapeAndType(n),e=o.mapOutputs(e),o.checkOutputs(e));try{o.keepIntermediateTensors=Ie().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){o.keepIntermediateTensors=!1,console.warn(p.message)}const a=new L0e(o.weightMap,s,r,o.functionExecutorMap,o.parseNodeNameCache);o.keepIntermediateTensors&&(o.clonedTensorsMap=o.cloneTensorMap(o.weightMap));const l=yield o.executeWithControlFlow(n,a,e,i),c=e.map(p=>$a(p,l,a)),u=c.map(p=>p.id),d=Object.keys(n).map(p=>n[p].id),h=new Set([...u,...d,...o.weightIds]);return Object.values(l).forEach(p=>{p.forEach(f=>{f&&!f.isDisposed&&!h.has(f.id)&&f.dispose()})}),null==o.parent&&a.dispose(h),c})()}executeFunctionAsync(n,e,i){var s=this;return z(function*(){const r=n.reduce((o,a,l)=>(o[s.inputs[l].name]=a,o),{});return s._executeAsync(r,s.outputNodes,!0,e,i)})()}executeWithControlFlow(n,e,i,s){var r=this;return z(function*(){const o=Object.keys(n),a=o.map(k=>r.graph.nodes[Ac(k)[0]]),l=i.map(k=>Ac(k)[0]),c=new Set(l);let u=l.map(k=>r.graph.nodes[k]);0===u.length&&(u=r._outputs);const{usedNodes:d,missingInputs:h,dynamicNode:p,syncInputs:f}=P0e(n,u,r.weightMap,r._initNodes),g=[...a,...r.graph.weights,...r._initNodes||[]].map(k=>({node:k,contexts:e.currentContext})),v=Object.assign({},r.weightMap);Object.keys(n).forEach(k=>{const[R,N]=Ac(k),D=[];D[N]=n[k],v[R]=D});const y={},w=r.getFrozenTensorIds(v),x={};for(;g.length>0;){const k=r.processStack(a,g,e,v,x,w,c,y,d);yield Promise.all(k)}null==p&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const T=u.filter(k=>!qv(k)&&!$a(k.name,v,e)).map(k=>k.name);if(T.length>0){let k="";throw null!=p&&(k=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${f}]`),new Error(`Cannot compute the outputs [${T}] from the provided inputs [${o}]. Consider providing the following inputs: [${h}]. ${k}`)}return v})()}processStack(n,e,i,s,r,o,a,l,c){const u=[];for(;e.length>0;){const d=e.pop();i.currentContext=d.contexts;let h="";if("Enter"===d.node.op&&M("isConstant",d.node,s,i)&&([h]=qf(d.node.name,i)),null==s[d.node.name]){const p=F0e(d.node,s,i,this._resourceManager);h||([h]=qf(d.node.name,i));const f=i.currentContext;S_(p)?u.push(p.then(g=>(s[h]=g,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(g)),i.currentContext=f,this.checkTensorForDisposal(h,d.node,s,i,o,a,l),this.processChildNodes(d.node,e,i,s,r,c),g))):(s[h]=p,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(p)),this.checkTensorForDisposal(h,d.node,s,i,o,a,l),this.processChildNodes(d.node,e,i,s,r,c))}else this.processChildNodes(d.node,e,i,s,r,c)}return u}processChildNodes(n,e,i,s,r,o){n.children.forEach(a=>{const[l]=qf(a.name,i);r[l]||!o.has(a.name)||("Merge"===a.op?a.inputNames.some(c=>!!$a(c,s,i))&&(r[l]=!0,e.push({contexts:i.currentContext,node:a})):a.inputNames.every(c=>!!$a(c,s,i))&&(r[l]=!0,e.push({contexts:i.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(n=>this.weightMap[n].forEach(e=>e.dispose()))}checkInputShapeAndType(n){Object.keys(n).forEach(e=>{const i=n[e],[s]=Ac(e),r=this.graph.nodes[s];if(r.attrParams.shape&&r.attrParams.shape.value){const o=r.attrParams.shape.value;U(o.length===i.shape.length&&i.shape.every((l,c)=>-1===o[c]||o[c]===l),()=>`The shape of dict['${r.name}'] provided in model.execute(dict) must be [${o}], but was [${i.shape}]`)}r.attrParams.dtype&&r.attrParams.dtype.value&&U(i.dtype===r.attrParams.dtype.value,()=>`The dtype of dict['${r.name}'] provided in model.execute(dict) must be ${r.attrParams.dtype.value}, but was ${i.dtype}`)})}mapInputs(n){var e,i;const s={};for(const r in n){const o=null===(i=null===(e=this._signature)||void 0===e?void 0:e.inputs)||void 0===i?void 0:i[r];null!=o?s[o.name]=n[r]:s[r]=n[r]}return s}checkInputs(n){const e=Object.keys(n).filter(i=>{const[s]=Ac(i);return null==this.graph.nodes[s]});if(e.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${e}] that are not part of graph`)}mapOutputs(n){return n.map(e=>{var i,s;const r=null===(s=null===(i=this._signature)||void 0===i?void 0:i.outputs)||void 0===s?void 0:s[e];return null!=r?r.name:e},{})}checkOutputs(n){n.forEach(e=>{const[i]=Ac(e);if(!this.graph.nodes[i])throw new Error(`The output '${e}' is not found in the graph`)})}}class Bxt{constructor(n={},e={}){this.hashTableNameToHandle=n,this.hashTableMap=e}addHashTable(n,e){this.hashTableNameToHandle[n]=e.handle,this.hashTableMap[e.id]=e}getHashTableHandleByName(n){return this.hashTableNameToHandle[n]}getHashTableById(n){return this.hashTableMap[n]}dispose(){for(const n in this.hashTableMap)this.hashTableMap[n].clearAndClose(),delete this.hashTableMap[n];for(const n in this.hashTableNameToHandle)this.hashTableNameToHandle[n].dispose(),delete this.hashTableNameToHandle[n]}}class $0e{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(n,e={},i=ut){this.modelUrl=n,this.loadOptions=e,this.version="n/a",this.io=i,null==e&&(this.loadOptions={}),this.resourceManager=new Bxt}findIOHandler(){const n=this.modelUrl;if(null!=n.load)this.handler=n;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(n,this.loadOptions);else{const e=this.io.getLoadHandlers(n,this.loadOptions);if(0===e.length)e.push(this.io.browserHTTPRequest(n,this.loadOptions));else if(e.length>1)throw new Error(`Found more than one (${e.length}) load handlers for URL '${[n]}'`);this.handler=e[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const n=this.handler.load();return S_(n)?n.then(e=>null==e.getWeightStream?this.loadSync(e):this.loadStreaming(e)):this.loadSync(n)}loadSync(n){const e=this.io.decodeWeights(n.weightData,n.weightSpecs);return this.loadWithWeightMap(n,e)}loadStreaming(n){var e=this;return z(function*(){if(null==n.getWeightStream)throw new Error("Model artifacts missing streamWeights function");const i=yield Sbe(n.getWeightStream(),n.weightSpecs);return e.loadWithWeightMap(n,i)})()}loadWithWeightMap(n,e){this.artifacts=n;const i=this.artifacts.modelTopology;let s=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const r=this.artifacts.userDefinedMetadata;null!=r.signature&&(s=r.signature),null!=r.structuredOutputKeys&&(this.structuredOutputKeys=r.structuredOutputKeys)}if(this.signature=s,this.version=`${i.versions.producer}.${i.versions.minConsumer}`,this.executor=new k3(D0e.Instance.transformGraph(i,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(e),this.executor.resourceManager=this.resourceManager,null!=n.modelInitializer&&null!=n.modelInitializer.node){const r=D0e.Instance.transformGraph(n.modelInitializer);this.initializer=new k3(r),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=n.initializerSignature}return!0}save(n,e){var i=this;return z(function*(){if("string"==typeof n){const s=i.io.getSaveHandlers(n);if(0===s.length)throw new Error(`Cannot find any save handlers for URL '${n}'`);if(s.length>1)throw new Error(`Found more than one (${s.length}) save handlers for URL '${n}'`);n=s[0]}if(null==n.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return n.save(i.artifacts)})()}addStructuredOutputNames(n){if(this.structuredOutputKeys){const i={};return(n instanceof js?[n]:n).forEach((s,r)=>i[this.structuredOutputKeys[r]]=s),i}return n}predict(n,e){const i=this.execute(n,this.outputNodes);return this.addStructuredOutputNames(i)}predictAsync(n,e){var i=this;return z(function*(){const s=yield i.executeAsync(n,i.outputNodes);return i.addStructuredOutputNames(s)})()}normalizeInputs(n){var e;if(!(n instanceof js||Array.isArray(n))){const r=null===(e=this.signature)||void 0===e?void 0:e.inputs;if(null!=r)for(const o in r){const a=r[o];null!=a.resourceId&&(n[o]=this.resourceIdToCapturedInput[a.resourceId])}return n}n=Array.isArray(n)?n:[n];const i=Object.keys(this.resourceIdToCapturedInput).length;if(n.length+i!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-i} non-resource placeholders, while there are ${n.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((r,o)=>{var a,l,c;const u=null===(c=null===(l=null===(a=this.signature)||void 0===a?void 0:a.inputs)||void 0===l?void 0:l[o])||void 0===c?void 0:c.resourceId;return r[o]=null!=u?this.resourceIdToCapturedInput[u]:n[s++],r},{})}normalizeOutputs(n){return n=n||this.outputNodes,Array.isArray(n)?n:[n]}executeInitializerGraph(){return null==this.initializer?[]:this.initializer.execute({},null==this.initializerSignature?[]:Object.keys(this.initializerSignature.outputs))}executeInitializerGraphAsync(){var n=this;return z(function*(){return null==n.initializer?[]:n.initializer.executeAsync({},null==n.initializerSignature?[]:Object.keys(n.initializerSignature.outputs))})()}setResourceIdToCapturedInput(n){if(this.resourceIdToCapturedInput={},this.initializerSignature){const e=this.initializerSignature.outputs,i=Object.keys(e);for(let s=0;s<i.length;s++)this.resourceIdToCapturedInput[e[i[s]].resourceId]=n[s]}}execute(n,e){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),n=this.normalizeInputs(n),e=this.normalizeOutputs(e);const i=this.executor.execute(n,e);return i.length>1?i:i[0]}executeAsync(n,e){var i=this;return z(function*(){null==i.resourceIdToCapturedInput&&i.setResourceIdToCapturedInput(yield i.executeInitializerGraphAsync()),n=i.normalizeInputs(n),e=i.normalizeOutputs(e);const s=yield i.executor.executeAsync(n,e);return s.length>1?s:s[0]})()}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(n){return Object.keys(n).reduce((e,i)=>(e[i]=[n[i]],e),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&ki(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}function CW(){return CW=z(function*(t,n={},e=ut){if(null==t)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==n&&(n={}),n.fromTFHub&&"string"==typeof t&&(t=function Gxt(t){return t.endsWith("/")||(t+="/"),`${t}model.json?tfjs-format=file`}(t));const i=new $0e(t,n,e);return yield i.load(),i}),CW.apply(this,arguments)}function dn(t,n){Array.isArray(t)||(t=[t]),t.forEach(e=>{null!=e&&U("complex64"!==e.dtype,()=>`${n} does not support complex64 tensors in the CPU backend.`)})}Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");const xEt=$j;let EEt=(()=>{class t extends Z9{nextDataId(){return t.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Bge(this,mp())}write(e,i,s){this.firstUse&&(this.firstUse=!1,Ie().get("IS_NODE")&&uu("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:s,refCount:1}),r}makeTensorInfo(e,i,s){let r;if("string"===i&&null!=s&&s.length>0&&aI(s[0])){const o=s.map(a=>T_(a));r=this.write(o,e,i)}else r=this.write(s,e,i);return{dataId:r,shape:e,dtype:i}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){this.data.get(e).refCount++}decRef(e){this.data.has(e)&&this.data.get(e).refCount--}move(e,i,s,r,o){this.data.set(e,{values:i,dtype:r,refCount:o})}numDataIds(){return this.data.numDataIds()}read(e){var i=this;return z(function*(){return i.readSync(e)})()}readSync(e){const{dtype:i,complexTensorInfos:s}=this.data.get(e);return"complex64"===i?Gf(this.readSync(s.real.dataId),this.readSync(s.imag.dataId)):function Spt(t,n){if(Array.isArray(t))return t;if("float32"===n)return t instanceof Float32Array?t:new Float32Array(t);if("int32"===n)return t instanceof Int32Array?t:new Int32Array(t);if("bool"===n||"string"===n)return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${n}`)}(this.data.get(e).values,i)}bufferSync(e){const i=this.readSync(e.dataId);if("string"===e.dtype)try{const s=i.map(r=>I_(r));return Di(e.shape,e.dtype,s)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Di(e.shape,e.dtype,i)}makeOutput(e,i,s){return mp().makeTensorFromTensorInfo(this.makeTensorInfo(i,s,e),this)}disposeData(e,i=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!i&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:s}=this.data.get(e);null!=s&&(this.disposeData(s.real.dataId,!0),this.disposeData(s.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}time(e){return z(function*(){const i=el();return e(),{kernelMs:el()-i}})()}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){dn([e],"where");const i=this.readSync(e.dataId);return xEt(e.shape,i)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}return t.nextDataId=0,t})();function kp(t){return(n,e,i)=>{const s=fo(e,n.length);for(let r=0;r<n.length;++r)s[r]=t(n[r],i);return s}}function Hs(t,n,e){return X_(t,kp(n),e)}function X_(t,n,e){return({inputs:i,attrs:s,backend:r})=>{const{x:o}=i;dn(o,t);const a=r,l=a.data.get(o.dataId).values;let c;if("string"===o.dtype){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=jf(l)}else c=l;const u=e||o.dtype,d=n(c,u,s);return a.makeTensorInfo(o.shape,u,d)}}bbe("cpu",()=>new EEt,1);const ewe=Hs(wI,t=>t>=0?t:Math.exp(t)-1),IEt={kernelName:wI,backendName:"cpu",kernelFunc:ewe};function Dp(t){const{inputs:n,backend:e}=t,{x:i}=n;return e.incRef(i.dataId),{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}const kEt={kernelName:kI,backendName:"cpu",kernelFunc:Dp};function twe(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{alpha:r}=i;dn([s],"leakyRelu");const o=Le(s.shape),a=e.data.get(s.dataId).values,l=Ra("float32",o);for(let c=0;c<a.length;c++)l[c]=a[c]<0?r*a[c]:a[c];return e.makeTensorInfo(s.shape,"float32",l)}const DEt={kernelName:OF,backendName:"cpu",kernelFunc:twe};function vo(t){return(n,e,i,s,r)=>{const o=mi(n,e),a=o.length,l=xn(o),u=Ra(r,Le(o)),d=n.length,h=e.length,p=xn(n),f=xn(e),g=Hw(n,o),v=Hw(e,o);if(g.length+v.length===0)for(let y=0;y<u.length;++y)u[y]=t(i[y%i.length],s[y%s.length]);else for(let y=0;y<u.length;++y){const w=Rw(y,a,l),x=w.slice(-d);g.forEach(N=>x[N]=0);const T=fp(x,d,p),k=w.slice(-h);v.forEach(N=>k[N]=0);const R=fp(k,h,f);u[y]=t(i[T],s[R])}return[u,o]}}const AEt=vo((t,n)=>t<0?n*t:t);function nwe(t){const{inputs:n,backend:e}=t,{x:i,alpha:s}=n;dn([i,s],"prelu");const r=e.data.get(i.dataId).values,o=e.data.get(s.dataId).values,[a,l]=AEt(i.shape,s.shape,r,o,"float32");return e.makeTensorInfo(l,"float32",a)}const MEt={kernelName:QF,backendName:"cpu",kernelFunc:nwe},iwe=Hs(VI,t=>Math.max(0,t)),NEt={kernelName:VI,backendName:"cpu",kernelFunc:iwe},swe=Hs(zI,t=>Math.min(Math.max(0,t),6)),OEt={kernelName:zI,backendName:"cpu",kernelFunc:swe},REt=kp(t=>1/(1+Math.exp(-t))),rwe=Hs(KI,t=>1/(1+Math.exp(-t))),FEt={kernelName:KI,backendName:"cpu",kernelFunc:rwe};function R3(t,n,e,i,s){if("linear"===e)return Dp({inputs:{x:n},backend:t});if("relu"===e)return iwe({inputs:{x:n},backend:t});if("elu"===e)return ewe({inputs:{x:n},backend:t});if("relu6"===e)return swe({inputs:{x:n},backend:t});if("prelu"===e)return nwe({inputs:{x:n,alpha:i},backend:t});if("leakyrelu"===e)return twe({inputs:{x:n},backend:t,attrs:{alpha:s}});if("sigmoid"===e)return rwe({inputs:{x:n},backend:t});throw new Error(`Activation ${e} has not been implemented for the CPU backend.`)}function Mc(t){const{inputs:n,backend:e}=t,{real:i,imag:s}=n,r=e.data.get(i.dataId).values,o=e.data.get(s.dataId).values,a=e.makeTensorInfo(i.shape,"complex64");return e.data.get(a.dataId).complexTensorInfos={real:e.makeTensorInfo(i.shape,"float32",r),imag:e.makeTensorInfo(s.shape,"float32",o)},a}const LEt={kernelName:hU,backendName:"cpu",kernelFunc:Mc};function F3(t,n,e="float32"){if("complex64"===e)return Mc({inputs:{real:F3(t,n,"float32"),imag:F3(t,n,"float32")},backend:t});const i=Ja(Le(n),e);return t.makeTensorInfo(n,e,i)}function Kv(t){const{inputs:n,backend:e}=t,{input:i}=n,s=e.data.get(i.dataId).complexTensorInfos.real,r=e.data.get(s.dataId).values;return e.makeTensorInfo(s.shape,s.dtype,r)}const PEt={kernelName:qU,backendName:"cpu",kernelFunc:Kv};function owe(t,n,e,i){if("int32"===i)return[n,"int32",Int32Array.from(t)];if("bool"===i){const s=Tv([0],e),[r,o]=vo((a,l)=>a!==l?1:0)(n,[],t,s,"bool");return[o,"bool",r]}throw new Error(`Error in Cast: failed to cast ${e} to ${i}`)}function Y_(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{dtype:r}=i;if("complex64"===r){if("complex64"===s.dtype)return Dp({inputs:{x:s},backend:e});const u=F3(e,s.shape,s.dtype),d=Y_({inputs:{x:s},backend:e,attrs:{dtype:"float32"}}),h=Mc({inputs:{real:d,imag:u},backend:e});return e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),h}if("complex64"===s.dtype){const u=Kv({inputs:{input:s},backend:e}),d=Y_({inputs:{x:u},backend:e,attrs:{dtype:r}});return e.disposeIntermediateTensorInfo(u),d}if(!Gge(s.dtype,r)){const u=Dp({inputs:{x:s},backend:e});return{dataId:u.dataId,shape:u.shape,dtype:r}}const o=e.data.get(s.dataId).values,[a,l,c]=owe(o,s.shape,s.dtype,r);return e.makeTensorInfo(a,l,c)}const $Et={kernelName:mI,backendName:"cpu",kernelFunc:Y_};function na(t,n,e,i){return null==e?({inputs:s,backend:r})=>{const{a:o,b:a}=s,l=r;dn([o,a],t);const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,d="string"===o.dtype?jf(c):c,h="string"===o.dtype?jf(u):u,p=i||o.dtype,[f,g]=n(o.shape,a.shape,d,h,p);return l.makeTensorInfo(g,p,f)}:({inputs:s,backend:r})=>{const{a:o,b:a}=s,l=r;if("complex64"===o.dtype||"complex64"===a.dtype){const c=Y_({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),h=u.complexTensorInfos.imag,p=l.data.get(u.complexTensorInfos.real.dataId).values,f=l.data.get(h.dataId).values,g=Y_({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),v=l.data.get(g.dataId),w=v.complexTensorInfos.imag,x=l.data.get(v.complexTensorInfos.real.dataId).values,T=l.data.get(w.dataId).values,[k,R,N]=e(o.shape,a.shape,p,f,x,T),D=l.makeTensorInfo(N,"float32",k),F=l.makeTensorInfo(N,"float32",R),$=Mc({inputs:{real:D,imag:F},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(g),l.disposeIntermediateTensorInfo(D),l.disposeIntermediateTensorInfo(F),$}{const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,d=i||o.dtype,[h,p]=n(o.shape,a.shape,c,u,d);return l.makeTensorInfo(p,d,h)}}}function AW(t){return(n,e,i,s,r,o)=>{const a=mi(n,e),l=Le(a),c=a.length,u=xn(a),d=Ra("float32",l),h=Ra("float32",l),p=Hw(n,a),f=Hw(e,a),g=Gf(i,s),v=Gf(r,o),y=n.length,w=xn(n),x=e.length,T=xn(e);if(p.length+f.length===0)for(let k=0;k<d.length;k++){const R=k%g.length,N=k%v.length,D=t(g[2*R],g[2*R+1],v[2*N],v[2*N+1]);d[k]=D.real,h[k]=D.imag}else for(let k=0;k<d.length;k++){const R=Rw(k,c,u),N=R.slice(-y);p.forEach(Q=>N[Q]=0);const D=fp(N,y,w),F=R.slice(-x);f.forEach(Q=>F[Q]=0);const $=fp(F,x,T),j=t(g[2*D],g[2*D+1],v[2*$],v[2*$+1]);d[k]=j.real,h[k]=j.imag}return[d,h,a]}}const awe=vo((t,n)=>t+n),BEt=AW((t,n,e,i)=>({real:t+e,imag:n+i})),uC=na(Fw,awe,BEt),VEt={kernelName:Fw,backendName:"cpu",kernelFunc:uC};function yr(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{shape:r}=i,o=Le(s.shape),a=Uge(r,o),l=Le(a);U(o===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${s.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),e.incRef(s.dataId);const c=e.data.get(s.dataId);if(null!=c.complexTensorInfos){const d=c.complexTensorInfos.imag;c.complexTensorInfos.real.shape=a,d.shape=a}return{dataId:s.dataId,shape:a,dtype:s.dtype}}const zEt={kernelName:eL,backendName:"cpu",kernelFunc:yr};function lwe(t){const{inputs:n,backend:e,attrs:i}=t,{a:s,b:r}=n,{transposeA:o,transposeB:a}=i;dn([s,r],"matMul");const l=s.shape.length,c=r.shape.length,u=o?s.shape[l-2]:s.shape[l-1],d=a?r.shape[c-1]:r.shape[c-2],h=o?s.shape[l-1]:s.shape[l-2],p=a?r.shape[c-2]:r.shape[c-1],f=s.shape.slice(0,-2),g=r.shape.slice(0,-2),v=Le(f),y=Le(g),x=mi(s.shape.slice(0,-2),r.shape.slice(0,-2)).concat([h,p]);U(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${s.shape} and ${r.shape} and transposeA=${o} and transposeB=${a} must match.`);const k=a?[y,p,d]:[y,d,p],R=yr({inputs:{x:s},backend:e,attrs:{shape:o?[v,u,h]:[v,h,u]}}),N=yr({inputs:{x:r},backend:e,attrs:{shape:k}}),D=o?R.shape[1]:R.shape[2],F=o?R.shape[2]:R.shape[1],$=a?N.shape[1]:N.shape[2],j=Math.max(v,y),Q=e.data.get(R.dataId).values,Y=e.data.get(N.dataId).values,ce=xn(R.shape),Ce=xn(N.shape),[Z,le,te]=o?[ce[0],1,ce[1]]:[ce[0],ce[1],1],[be,fe,Te]=a?[1,Ce[1],Ce[0]]:[Ce[1],1,Ce[0]],et=F*$,We=Di([j,F,$],R.dtype),Qe=We.values,gt=e.blockSize;for(let ct=0;ct<j;ct++){const Dt=ct%v,sn=ct%y;for(let jt=0;jt<F;jt+=gt){const Fn=Math.min(jt+gt,F);for(let ri=0;ri<$;ri+=gt){const Ds=Math.min(ri+gt,$);for(let er=0;er<D;er+=gt){const Bs=Math.min(er+gt,D);for(let ds=jt;ds<Fn;ds++)for(let xs=ri;xs<Ds;xs++){let ur=0;for(let Ws=er;Ws<Bs;Ws++)ur+=Q[Dt*Z+ds*le+Ws*te]*Y[Ws*be+xs*fe+sn*Te];Qe[ct*et+(ds*$+xs)]+=ur}}}}}return e.disposeIntermediateTensorInfo(R),e.disposeIntermediateTensorInfo(N),e.makeTensorInfo(x,We.dtype,We.values)}const UEt={kernelName:gF,backendName:"cpu",kernelFunc:lwe},jEt={kernelName:fL,backendName:"cpu",kernelFunc:function GEt(t){const{inputs:n,backend:e,attrs:i}=t,{a:s,b:r,bias:o,preluActivationWeights:a}=n,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=i;let h,p,f;const g=[];h=lwe({inputs:{a:s,b:r},attrs:{transposeA:l,transposeB:c},backend:e}),o&&(p=uC({inputs:{a:h,b:o},backend:e}),g.push(h),h=p),u&&(f=R3(e,h,u,a,d),g.push(h),h=f);for(const y of g)e.disposeIntermediateTensorInfo(y);return h}};function cwe(t){const n=new Float32Array(t.length);for(let e=0;e<t.length;++e)n[e]=Math.abs(t[e]);return n}const HEt={kernelName:dF,backendName:"cpu",kernelFunc:t=>{const{x:n}=t.inputs,e=t.backend;dn(n,"abs");let i=new Float32Array(Le(n.shape));return i=cwe(e.data.get(n.dataId).values),e.makeOutput(i,n.shape,n.dtype)}},WEt=Hs(lI,t=>Math.acos(t)),qEt={kernelName:lI,backendName:"cpu",kernelFunc:WEt},KEt=Hs(cI,t=>Math.acosh(t)),XEt={kernelName:cI,backendName:"cpu",kernelFunc:KEt},ZEt={kernelName:hF,backendName:"cpu",kernelFunc:function YEt(t){const{inputs:n,backend:e}=t,i=n;dn(n,"addN");const s=i.map(a=>e.data.get(a.dataId).values),r=Di(i[0].shape,i[0].dtype),o=r.values;for(let a=0;a<i.length;a++){const l=s[a];for(let c=0;c<o.length;c++)o[c]+=l[c]}return e.makeTensorInfo(r.shape,r.dtype,r.values)}};function MW(t,n,e,i,s){const r=n.length,o=Le(n),a=xn(n),l=xn(s),c=Ra(e,Le(s));for(let u=0;u<o;++u){const d=Rw(u,r,a),h=new Array(d.length);for(let f=0;f<h.length;f++)h[f]=d[i[f]];c[fp(h,r,l)]=t[u]}return c}function Yl(t){const{inputs:n,attrs:e,backend:i}=t,{x:s}=n,{perm:r}=e;dn(s,"transpose");const a=new Array(s.shape.length);for(let d=0;d<a.length;d++)a[d]=s.shape[r[d]];const c=MW(i.data.get(s.dataId).values,s.shape,s.dtype,r,a);return{dataId:i.write(c,a,s.dtype),shape:a,dtype:s.dtype}}const QEt={kernelName:Lw,backendName:"cpu",kernelFunc:Yl},eTt={kernelName:"All",backendName:"cpu",kernelFunc:function JEt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i;dn(s,"all");const a=zi(r,s.shape);let l=a;const c=Gr(l,s.shape.length);let u=s;null!=c&&(u=Yl({inputs:{x:s},backend:e,attrs:{perm:c}}),l=go(l.length,s.shape.length)),Pa("all",l,u.shape.length);const[d,h]=Sa(u.shape,l),p=Le(h),f=Ja(Le(d),u.dtype),g=e.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const w=y*p;let x=g[w];for(let T=0;T<p;++T)x=x&&g[w+T];f[y]=x}null!=c&&e.disposeIntermediateTensorInfo(u);const v=e.makeTensorInfo(d,u.dtype,f);if(o){const w=yr({inputs:{x:v},backend:e,attrs:{shape:_o(d,a)}});return e.disposeIntermediateTensorInfo(v),w}return v}},nTt={kernelName:"Any",backendName:"cpu",kernelFunc:function tTt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i;dn(s,"any");const a=zi(r,s.shape);let l=a;const c=Gr(l,s.shape.length);let u=s;null!=c&&(u=Yl({inputs:{x:s},backend:e,attrs:{perm:c}}),l=go(l.length,s.shape.length)),Pa("any",l,u.shape.length);const[d,h]=Sa(u.shape,l),p=Le(h),f=Ja(Le(d),u.dtype),g=e.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const w=y*p;let x=g[w];for(let T=0;T<p;++T)x=x||g[w+T];f[y]=x}null!=c&&e.disposeIntermediateTensorInfo(u);const v=e.makeTensorInfo(d,u.dtype,f);if(o){const w=yr({inputs:{x:v},backend:e,attrs:{shape:_o(d,a)}});return e.disposeIntermediateTensorInfo(v),w}return v}},sTt={kernelName:pF,backendName:"cpu",kernelFunc:function iTt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r}=i;dn(s,"argMax");let o=zi(r,s.shape);const a=Gr(o,s.shape.length);let l=s;const c=[];null!=a&&(l=Yl({inputs:{x:s},backend:e,attrs:{perm:a}}),c.push(l),o=go(o.length,l.shape.length)),o=[o[0]],Pa("argMax",o,l.shape.length);const[u,d]=Sa(l.shape,o),p=Ja(Le(u),"int32"),f=Le(d),g=e.data.get(l.dataId).values;for(let v=0;v<p.length;++v){const y=v*f;let w=g[y],x=0;for(let T=0;T<f;++T){const k=g[y+T];k>w&&(w=k,x=T)}p[v]=x}return c.forEach(v=>e.disposeIntermediateTensorInfo(v)),e.makeTensorInfo(u,"int32",p)}},oTt={kernelName:fF,backendName:"cpu",kernelFunc:function rTt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r}=i;dn(s,"argMin");let o=zi(r,s.shape);const a=Gr(o,s.shape.length);let l=s;const c=[];null!=a&&(l=Yl({inputs:{x:s},backend:e,attrs:{perm:a}}),c.push(l),o=go(o.length,l.shape.length)),o=[o[0]],Pa("argMin",o,l.shape.length);const[u,d]=Sa(l.shape,o),p=Ja(Le(u),"int32"),f=Le(d),g=e.data.get(l.dataId).values;for(let v=0;v<p.length;++v){const y=v*f;let w=g[y],x=0;for(let T=0;T<f;++T){const k=g[y+T];k<w&&(w=k,x=T)}p[v]=x}return c.forEach(v=>e.disposeIntermediateTensorInfo(v)),e.makeTensorInfo(u,"int32",p)}},aTt=Hs(uI,t=>Math.asin(t)),lTt={kernelName:uI,backendName:"cpu",kernelFunc:aTt},cTt=Hs(dI,t=>Math.asinh(t)),uTt={kernelName:dI,backendName:"cpu",kernelFunc:cTt},dTt=Hs(hI,t=>Math.atan(t)),hTt={kernelName:hI,backendName:"cpu",kernelFunc:dTt},pTt=vo((t,n)=>Math.atan2(t,n)),fTt=na(fI,pTt),mTt={kernelName:fI,backendName:"cpu",kernelFunc:fTt},_Tt=Hs(pI,t=>Math.atanh(t)),gTt={kernelName:pI,backendName:"cpu",kernelFunc:_Tt};function NW(t,n,e,i,s,r){const o=s.strideHeight,a=s.strideWidth,l=s.dilationHeight,c=s.dilationWidth,u=s.effectiveFilterHeight,d=s.effectiveFilterWidth,h=s.padInfo.top,p=s.padInfo.left,f="max"===r?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=Di(s.outShape,e),v=g.values,y=s.outShape[1]*s.outShape[2]*s.outShape[3],w=s.outShape[2]*s.outShape[3],x=s.outShape[3];for(let T=0;T<s.batchSize;++T){const k=T*y,R=T*i[0];for(let N=0;N<s.inChannels;++N)for(let D=0;D<s.outHeight;++D){const F=D*o-h,$=Math.max(0,F),j=Math.min(s.inHeight,u+F),Q=k+D*w;for(let Y=0;Y<s.outWidth;++Y){const ce=Y*a-p,Ce=Math.max(0,ce),Z=Math.min(s.inWidth,d+ce);let le=f,te=0,be=0;for(let Te=$;Te<j;Te+=l){const et=R+Te*i[1];for(let We=Ce;We<Z;We+=c){const gt=t[et+We*i[2]+N];"max"===r&&gt>le?le=gt:"avg"===r&&(te+=gt,be++)}if(isNaN(le))break}v[Q+Y*x+N]="avg"===r?te/be:le}}}return g}function uwe(t,n,e,i,s=!1,r=!1){const o=Di(i.outShape,"int32"),a=i.strideHeight,l=i.strideWidth,c=i.dilationHeight,u=i.dilationWidth,d=i.effectiveFilterHeight,h=i.effectiveFilterWidth,p=i.padInfo.top,f=i.padInfo.left,g=Di(n,e,t);for(let v=0;v<i.batchSize;++v)for(let y=0;y<i.inChannels;++y)for(let w=0;w<i.outHeight;++w){const x=w*a-p;let T=x;for(;T<0;)T+=c;const k=Math.min(i.inHeight,d+x);for(let R=0;R<i.outWidth;++R){const N=R*l-f;let D=N;for(;D<0;)D+=u;const F=Math.min(i.inWidth,h+N);let $=Number.NEGATIVE_INFINITY,j=-1;for(let Q=T;Q<k;Q+=c){const Y=Q-x;for(let ce=D;ce<F;ce+=u){const Ce=ce-N,Z=g.get(v,Q,ce,y);Z>$&&($=Z,j=s?r?((v*i.inHeight+Q)*i.inWidth+ce)*i.inChannels+y:(Q*i.inWidth+ce)*i.inChannels+y:Y*h+Ce)}}o.set(j,v,w,R,y)}}return o}function dwe(t,n,e,i,s,r){const o=s.strideDepth,a=s.strideHeight,l=s.strideWidth,c=s.dilationDepth,u=s.dilationHeight,d=s.dilationWidth,h=s.effectiveFilterDepth,p=s.effectiveFilterHeight,f=s.effectiveFilterWidth,g=s.padInfo.front,v=s.padInfo.top,y=s.padInfo.left,w="max"===r?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=Di(s.outShape,e),T=x.values,k=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],R=s.outShape[2]*s.outShape[3]*s.outShape[4],N=s.outShape[3]*s.outShape[4],D=s.outShape[4];for(let F=0;F<s.batchSize;++F){const $=F*k,j=F*i[0];for(let Q=0;Q<s.inChannels;++Q)for(let Y=0;Y<s.outDepth;++Y){const ce=Y*o-g;let Ce=ce;for(;Ce<0;)Ce+=c;const Z=Math.min(s.inDepth,h+ce),le=$+Y*R;for(let te=0;te<s.outHeight;++te){const be=te*a-v;let fe=be;for(;fe<0;)fe+=u;const Te=Math.min(s.inHeight,p+be),et=le+te*N;for(let We=0;We<s.outWidth;++We){const Qe=We*l-y;let gt=Qe;for(;gt<0;)gt+=d;const ct=Math.min(s.inWidth,f+Qe),Dt=et+We*D;let sn=w,jt=0,Fn=0;for(let Ds=Ce;Ds<Z;Ds+=c){const er=j+Ds*i[1];for(let Bs=fe;Bs<Te;Bs+=u){const ds=er+Bs*i[2];for(let xs=gt;xs<ct;xs+=d){const Ws=t[ds+xs*i[3]+Q];if("max"===r&&Ws>sn?sn=Ws:"avg"===r&&(jt+=Ws,Fn++),isNaN(sn))break}if(isNaN(sn))break}if(isNaN(sn))break}T[Dt+Q]="avg"===r?jt/Math.max(Fn,1):sn}}}}return x}const yTt={kernelName:mF,backendName:"cpu",kernelFunc:function vTt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n;dn(s,"avgPool");const{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=i;U(La(o,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`);const u=ed(s.shape,r,o,1,a,l);let d;if(1===u.filterWidth&&1===u.filterHeight&&es(u.inShape,u.outShape))d=Dp({inputs:{x:s},backend:e});else{const h=e.data.get(s.dataId).values,p=xn(s.shape),f=NW(h,0,s.dtype,p,u,"avg");d=e.makeTensorInfo(u.outShape,s.dtype,f.values)}return d}},CTt={kernelName:_F,backendName:"cpu",kernelFunc:function wTt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{filterSize:r,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=i;dn(s,"avgPool3d");const u=Vf(s.shape,r,o,1,a,l,c),h=dwe(e.data.get(s.dataId).values,0,s.dtype,xn(s.shape),u,"avg");return e.makeTensorInfo(h.shape,"float32",h.values)}},xTt={kernelName:cU,backendName:"cpu",kernelFunc:function STt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,input:r}=n,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=i;dn([s,r],"avgPool3DGrad");const u=Vf(r.shape,o,a,1,l,c),d=u.strideDepth,h=u.strideHeight,p=u.strideWidth,f=u.filterDepth,g=u.filterHeight,v=u.filterWidth,y=u.dilationDepth,w=u.dilationHeight,x=u.dilationWidth,T=u.effectiveFilterDepth,k=u.effectiveFilterHeight,R=u.effectiveFilterWidth,N=T-1-u.padInfo.front,D=R-1-u.padInfo.left,F=k-1-u.padInfo.top,$=Di(r.shape,"float32"),j=1/(f*g*v),Q=e.bufferSync(s);for(let Y=0;Y<u.batchSize;++Y)for(let ce=0;ce<u.inChannels;++ce)for(let Ce=0;Ce<u.inDepth;++Ce)for(let Z=0;Z<u.inHeight;++Z)for(let le=0;le<u.inWidth;++le){const te=Ce-N,be=Z-F,fe=le-D;let Te=0;for(let et=0;et<T;et+=y){const We=(te+et)/d;if(!(We<0||We>=u.outDepth||Math.floor(We)!==We))for(let Qe=0;Qe<k;Qe+=w){const gt=(be+Qe)/h;if(!(gt<0||gt>=u.outHeight||Math.floor(gt)!==gt))for(let ct=0;ct<R;ct+=x){const Dt=(fe+ct)/p;Dt<0||Dt>=u.outWidth||Math.floor(Dt)!==Dt||(Te+=Q.get(Y,We,gt,Dt,ce))}}}$.set(Te*j,Y,Ce,Z,le,ce)}return e.makeTensorInfo($.shape,$.dtype,$.values)}},TTt={kernelName:lU,backendName:"cpu",kernelFunc:function ETt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,input:r}=n,o=r;dn([s,r],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=i,u=ed(o.shape,a,l,1,c),d=u.strideHeight,h=u.strideWidth,p=u.filterHeight,f=u.filterWidth,g=u.dilationHeight,v=u.dilationWidth,y=u.effectiveFilterHeight,w=u.effectiveFilterWidth,x=w-1-u.padInfo.left,T=y-1-u.padInfo.top,k=Di(o.shape,"float32"),R=1/(p*f),N=e.data.get(s.dataId).values,D=Di(s.shape,"float32",N);for(let F=0;F<u.batchSize;++F)for(let $=0;$<u.inChannels;++$)for(let j=0;j<u.inHeight;++j)for(let Q=0;Q<u.inWidth;++Q){const Y=j-T,ce=Q-x;let Ce=0;for(let Z=0;Z<y;Z+=g){const le=(Y+Z)/d;if(!(le<0||le>=u.outHeight||Math.floor(le)!==le))for(let te=0;te<w;te+=v){const be=(ce+te)/h;be<0||be>=u.outWidth||Math.floor(be)!==be||(Ce+=D.get(F,le,be,$))}}k.set(Ce*R,F,j,Q,$)}return e.makeTensorInfo(k.shape,k.dtype,k.values)}},kTt={kernelName:AF,backendName:"cpu",kernelFunc:function ITt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,scale:r,offset:o,mean:a,variance:l}=n;U(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(null==o||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(null==r||a.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),dn([s,a,l,r,o],"batchNorm");let{varianceEpsilon:c}=i;null==c&&(c=.001);const u=e.data.get(s.dataId).values,d=e.data.get(a.dataId).values,h=e.data.get(l.dataId).values,p=r?e.data.get(r.dataId).values:new Float32Array([1]),f=o?e.data.get(o.dataId).values:new Float32Array([0]),g=new Float32Array(u.length),v=f.length,y=p.length,w=h.length,x=d.length;let T=0,k=0,R=0,N=0;for(let D=0;D<u.length;++D)g[D]=f[T++]+(u[D]-d[k++])*p[R++]/Math.sqrt(h[N++]+c),T>=v&&(T=0),k>=x&&(k=0),R>=y&&(R=0),N>=w&&(N=0);return e.makeTensorInfo(s.shape,s.dtype,g)}};function hwe(t,n,e,i,s){const r=nj(i,n,e),o=Le(e),a=xn(i);if(r){const d=ij(n,a);return"string"===s?t.slice(d,d+o):t.subarray(d,d+o)}const c=Di(i,s,"string"===s?jf(t):t),u=Di(e,s);for(let d=0;d<u.size;++d){const h=u.indexToLoc(d),p=h.map((f,g)=>f+n[g]);u.set(c.get(...p),...h)}return"string"===s?Hye(u.values):u.values}function Xv(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{begin:r,size:o}=i;dn(s,"slice");const[a,l]=TL(s,r,o);ej(s,a,l);const u=hwe(e.data.get(s.dataId).values,a,l,s.shape,s.dtype);return e.makeTensorInfo(l,s.dtype,u)}const DTt={kernelName:rL,backendName:"cpu",kernelFunc:Xv},MTt={kernelName:bF,backendName:"cpu",kernelFunc:function ATt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{blockShape:r,crops:o}=i;dn([s],"batchToSpaceND");const a=r.reduce((y,w)=>y*w),l=S2(s.shape,r,a),c=x2(l.length,r.length),u=E2(s.shape,r,a),d=tH(o,r.length),h=nH(u,o,r.length),p=yr({inputs:{x:s},backend:e,attrs:{shape:l}}),f=Yl({inputs:{x:p},backend:e,attrs:{perm:c}}),g=yr({inputs:{x:f},backend:e,attrs:{shape:u}}),v=Xv({inputs:{x:g},backend:e,attrs:{begin:d,size:h}});return e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(g),v}};function OW(t,n,e,i,s){const r=Le(i),o=Ja(s,e);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(o[l]+=r>0?n[a]:1)}return o}function pwe(t,n,e,i=!1){const s=t.shape[0],r=t.shape[1],o=Di([s,e],n.dtype);for(let a=0;a<s;a++)for(let l=0;l<r;l++){const c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=e||o.set(i?1:n.size>0?o.get(a,c)+n.get(a,l):o.get(a,c)+1,a,c)}return o}const OTt={kernelName:uU,backendName:"cpu",kernelFunc:function NTt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,weights:r}=n,{size:o}=i,c=OW(e.data.get(s.dataId).values,e.data.get(r.dataId).values,r.dtype,r.shape,o);return e.makeTensorInfo([o],r.dtype,c)}},fwe=vo((t,n)=>t&n),RTt=na(vF,fwe),FTt={kernelName:vF,backendName:"cpu",kernelFunc:RTt},PTt={kernelName:dU,backendName:"cpu",kernelFunc:function LTt(t){const{inputs:n,backend:e}=t,{s0:i,s1:s}=n,r=e.data.get(i.dataId).values,o=e.data.get(s.dataId).values,a=mi(Array.from(r),Array.from(o));return e.makeTensorInfo([a.length],"int32",Int32Array.from(a))}},mwe=kp(t=>Math.ceil(t)),$Tt=X_(_I,mwe),BTt={kernelName:_I,backendName:"cpu",kernelFunc:$Tt},VTt=Hs(gI,(t,n)=>t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t),zTt={kernelName:gI,backendName:"cpu",kernelFunc:VTt},UTt={kernelName:yF,backendName:"cpu",kernelFunc:t=>{const{x:n}=t.inputs,e=t.backend,i=new Float32Array(Le(n.shape)),s=e.data.get(n.dataId),o=s.complexTensorInfos.imag,a=e.data.get(s.complexTensorInfos.real.dataId).values,l=e.data.get(o.dataId).values;for(let c=0;c<a.length;c++)i[c]=Math.hypot(a[c],l[c]);return e.makeOutput(i,n.shape,"float32")}};function _we(t,n,e,i){const s=fo(e,Le(n));if(i&&"string"!==e){let r=0;t.forEach(o=>{const a=Le(o.shape);s.set(o.vals,r),r+=a})}else{let r=0;t.forEach(o=>{const a="string"===e?jf(o.vals):o.vals;let l=0;for(let c=0;c<o.shape[0];++c){const u=c*n[1]+r;for(let d=0;d<o.shape[1];++d)s[u+d]=a[l++]}r+=o.shape[1]})}return s}function dC(t){const{inputs:n,backend:e}=t,{input:i}=n,s=e.data.get(i.dataId).complexTensorInfos.imag,r=e.data.get(s.dataId).values;return e.makeTensorInfo(s.shape,s.dtype,r)}const GTt={kernelName:OU,backendName:"cpu",kernelFunc:dC};function hC(t){const{inputs:n,backend:e,attrs:i}=t,{axis:s}=i,r=zi(s,n[0].shape)[0];Qj(n.map(g=>g.shape),r);let a=yp(n.map(g=>g.shape),r);if(0===Le(a))return e.makeTensorInfo(a,n[0].dtype,[]);const l=n.filter(g=>Le(g.shape)>0);if(1===l.length)return Dp({inputs:{x:l[0]},backend:e});if("complex64"===l[0].dtype){const g=l.map(T=>Kv({inputs:{input:T},backend:e})),v=l.map(T=>dC({inputs:{input:T},backend:e})),y=hC({inputs:g,backend:e,attrs:{axis:r}}),w=hC({inputs:v,backend:e,attrs:{axis:r}}),x=Mc({inputs:{real:y,imag:w},backend:e});return g.forEach(T=>e.disposeIntermediateTensorInfo(T)),v.forEach(T=>e.disposeIntermediateTensorInfo(T)),e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(w),x}const c=l.map(g=>{const y=[-1,Le(g.shape.slice(r))];return yr({inputs:{x:g},backend:e,attrs:{shape:y}})}),u=c.map(g=>({vals:e.data.get(g.dataId).values,shape:g.shape}));a=yp(c.map(g=>g.shape),1);const h=_we(u,a,n[0].dtype,1===c[0].shape[0]),p=yp(l.map(g=>g.shape),r),f=e.makeTensorInfo(p,n[0].dtype,h);return c.forEach(g=>e.disposeIntermediateTensorInfo(g)),f}const jTt={kernelName:wF,backendName:"cpu",kernelFunc:hC};function gwe(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r}=n,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=i;dn([s,r],"conv2d");const d=zf(l),h=Ca(s.shape,r.shape,o,c,a,u,!1,d),p=h.filterHeight,f=h.filterWidth,g=h.dilationHeight,v=h.dilationWidth,y=h.padInfo.left,w=h.padInfo.top,x="channelsLast"===h.dataFormat,T=new Ko(h.outShape,s.dtype),k=xn(s.shape),R=xn(r.shape),N=k[0],D=x?k[1]:k[2],F=x?k[2]:1,$=x?1:k[1],j=T.strides[0],Q=x?T.strides[1]:T.strides[2],Y=x?T.strides[2]:1,ce=x?1:T.strides[1],Ce=e.data.get(s.dataId).values,Z=e.data.get(r.dataId).values,le=T.values;for(let te=0;te<h.batchSize;++te){const be=te*N,fe=te*j;for(let Te=0;Te<h.outHeight;++Te){const et=fe+Te*Q,We=Te*h.strideHeight-w;for(let Qe=0;Qe<p;++Qe){const gt=We+Qe*g;if(gt<0||gt>=h.inHeight)continue;const ct=Qe*R[0],Dt=be+gt*D;for(let sn=0;sn<h.outWidth;++sn){const jt=et+sn*Y,Fn=sn*h.strideWidth-y;for(let ri=0;ri<f;++ri){const Ds=Fn+ri*v;if(Ds<0||Ds>=h.inWidth)continue;const Bs=Dt+Ds*F;let ds=ct+ri*R[1];for(let xs=0;xs<h.inChannels;++xs){const ur=Ce[Bs+xs*$];for(let Ws=0;Ws<h.outChannels;++Ws)le[jt+Ws*ce]+=ur*Z[ds+Ws];ds+=h.outChannels}}}}}}return e.makeTensorInfo(T.shape,T.dtype,le)}const HTt={kernelName:CF,backendName:"cpu",kernelFunc:gwe},qTt={kernelName:pU,backendName:"cpu",kernelFunc:function WTt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,dy:r}=n,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=i;dn([s,r],"conv2dBackpropFilter");const d=zf(l),h=Ca(s.shape,u,o,1,a,c,!1,d),{strideHeight:p,strideWidth:f,filterHeight:g,filterWidth:v}=h,y="channelsLast"===h.dataFormat,w=new Ko(h.filterShape,"float32"),x=h.padInfo.left,T=h.padInfo.top,k=e.data.get(s.dataId).values,R=e.data.get(r.dataId).values,N=new Ko(s.shape,s.dtype,k),D=new Ko(r.shape,r.dtype,R);for(let F=0;F<g;++F){const $=Math.max(0,Math.ceil((T-F)/p)),j=Math.min(h.outHeight,(h.inHeight+T-F)/p);for(let Q=0;Q<v;++Q){const Y=Math.max(0,Math.ceil((x-Q)/f)),ce=Math.min(h.outWidth,(h.inWidth+x-Q)/f);for(let Ce=0;Ce<h.inChannels;++Ce)for(let Z=0;Z<h.outChannels;++Z){let le=0;for(let te=0;te<h.batchSize;++te)for(let be=$;be<j;++be){const fe=F+be*p-T;for(let Te=Y;Te<ce;++Te){const et=Q+Te*f-x;le+=y?N.get(te,fe,et,Ce)*D.get(te,be,Te,Z):N.get(te,Ce,fe,et)*D.get(te,Z,be,Te)}}w.set(le,F,Q,Ce,Z)}}}return e.makeTensorInfo(w.shape,w.dtype,w.values)}},XTt={kernelName:SF,backendName:"cpu",kernelFunc:function KTt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,filter:r}=n,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=i;dn([s,r],"conv2dBackpropInput");const d=xn(r.shape),h=xn(s.shape);let p=zf(c);const f=Ca(o,r.shape,a,1,l,u,!1,p),g=new Ko(f.inShape,"float32"),v=g.values,y=e.data.get(s.dataId).values,w=e.data.get(r.dataId).values,[x,T,k]=d,{batchSize:R,filterHeight:N,filterWidth:D,inChannels:F,inHeight:$,inWidth:j,outChannels:Q,outHeight:Y,outWidth:ce,strideHeight:Ce,strideWidth:Z}=f;p=f.dataFormat;const le=N-1-f.padInfo.top,te=D-1-f.padInfo.left,be="channelsLast"===p,fe=g.strides[0],Te=be?g.strides[1]:g.strides[2],et=be?g.strides[2]:1,We=be?1:g.strides[1],Qe=h[0],gt=be?h[1]:h[2],ct=be?h[2]:1,Dt=be?1:h[1];for(let sn=0;sn<R;++sn)for(let jt=0;jt<F;++jt)for(let Fn=0;Fn<$;++Fn){const ri=Fn-le,Ds=Math.max(0,Math.ceil(ri/Ce)),er=Math.min(Y,(N+ri)/Ce);for(let Bs=0;Bs<j;++Bs){const ds=Bs-te,xs=Math.max(0,Math.ceil(ds/Z)),ur=Math.min(ce,(D+ds)/Z);let Ws=0;for(let Kn=Ds;Kn<er;++Kn){const ia=Kn*Ce-ri;for(let oi=xs;oi<ur;++oi){const Ci=Qe*sn+gt*Kn+ct*oi,ll=x*(N-1-ia)+T*(D-1-(oi*Z-ds))+k*jt;for(let Lp=0;Lp<Q;++Lp)Ws+=y[Ci+Dt*Lp]*w[ll+Lp]}}v[fe*sn+Te*Fn+et*Bs+We*jt]=Ws}}return e.makeTensorInfo(g.shape,g.dtype,g.values)}},ZTt={kernelName:xF,backendName:"cpu",kernelFunc:function YTt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r}=n,{strides:o,pad:a,dilations:l}=i;dn([s,r],"conv3d");const c=F_(s.shape,r.shape,o,l,a),{filterDepth:u,filterHeight:d,filterWidth:h,dilationDepth:p,dilationHeight:f,dilationWidth:g,padInfo:v}=c,y=v.front,w=v.left,x=v.top,T=new Ko(c.outShape,s.dtype),k=e.data.get(s.dataId).values,R=e.data.get(r.dataId).values,N=T.values,D=xn(s.shape),F=xn(r.shape);for(let $=0;$<c.batchSize;++$){const j=$*D[0],Q=$*T.strides[0];for(let Y=0;Y<c.outDepth;++Y){const ce=Q+Y*T.strides[1],Ce=Y*c.strideDepth-y;for(let Z=0;Z<u;++Z){const le=Ce+Z*p;if(le<0||le>=c.inDepth)continue;const te=Z*F[0],be=j+le*D[1];for(let fe=0;fe<c.outHeight;++fe){const Te=ce+fe*T.strides[2],et=fe*c.strideHeight-x;for(let We=0;We<d;++We){const Qe=et+We*f;if(Qe<0||Qe>=c.inHeight)continue;const gt=te+We*F[1],ct=be+Qe*D[2];for(let Dt=0;Dt<c.outWidth;++Dt){const sn=Te+Dt*c.outChannels,jt=Dt*c.strideWidth-w;for(let Fn=0;Fn<h;++Fn){const ri=jt+Fn*g;if(ri<0||ri>=c.inWidth)continue;const er=ct+ri*c.inChannels;let Bs=gt+Fn*F[2];for(let ds=0;ds<c.inChannels;++ds){const xs=k[er+ds];for(let ur=0;ur<c.outChannels;++ur)N[sn+ur]+=xs*R[Bs+ur];Bs+=c.outChannels}}}}}}}}return e.makeTensorInfo(T.shape,T.dtype,T.values)}},JTt={kernelName:fU,backendName:"cpu",kernelFunc:function QTt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,dy:r}=n,{strides:o,pad:a,filterShape:l}=i;dn([s,r],"conv3dBackpropFilterV2");const c=xn(s.shape),u=xn(r.shape),d=F_(s.shape,l,o,1,a),h=d.strideDepth,p=d.strideHeight,f=d.strideWidth,g=d.filterDepth,v=d.filterHeight,y=d.filterWidth,w=new Ko(d.filterShape,"float32"),x=w.values,[T,k,R,N]=w.strides,D=e.data.get(r.dataId).values,[F,$,j,Q]=u,Y=e.data.get(s.dataId).values,[ce,Ce,Z,le]=c,te=d.padInfo.front,be=d.padInfo.left,fe=d.padInfo.top;for(let Te=0;Te<g;++Te){const et=Math.max(0,Math.ceil((te-Te)/h)),We=Math.min(d.outDepth,(d.inDepth+te-Te)/h),Qe=Te*T;for(let gt=0;gt<v;++gt){const ct=Math.max(0,Math.ceil((fe-gt)/p)),Dt=Math.min(d.outHeight,(d.inHeight+fe-gt)/p),sn=gt*k+Qe;for(let jt=0;jt<y;++jt){const Fn=Math.max(0,Math.ceil((be-jt)/f)),ri=Math.min(d.outWidth,(d.inWidth+be-jt)/f),Ds=jt*R+sn;for(let er=0;er<d.inChannels;++er){const Bs=er*N+Ds;for(let ds=0;ds<d.outChannels;++ds){let xs=0;for(let ur=0;ur<d.batchSize;++ur){const Ws=ur*ce,Su=ur*F;for(let Kn=et;Kn<We;++Kn){const oi=(Te+Kn*h-te)*Ce+Ws,Vs=Kn*$+Su;for(let Ci=ct;Ci<Dt;++Ci){const Lp=(gt+Ci*p-fe)*Z+oi,_g=Ci*j+Vs;for(let gg=Fn;gg<ri;++gg)xs+=Y[(jt+gg*f-be)*le+Lp+er]*D[gg*Q+_g+ds]}}}x[Bs+ds]=xs}}}}}return e.makeTensorInfo(w.shape,w.dtype,w.values)}},tIt={kernelName:mU,backendName:"cpu",kernelFunc:function eIt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,filter:r}=n,{pad:o,strides:a,inputShape:l}=i;dn([s],"conv3dBackpropInputV2");const c=xn(s.shape),u=xn(r.shape),d=F_(l,r.shape,a,1,o),h=new Ko(d.inShape,"float32"),p=h.values,[f,g,v,y]=h.strides,w=e.data.get(s.dataId).values,[x,T,k,R]=c,N=e.data.get(r.dataId).values,[D,F,$,j]=u,{batchSize:Q,filterDepth:Y,filterHeight:ce,filterWidth:Ce,inChannels:Z,inDepth:le,inHeight:te,inWidth:be,outChannels:fe,outDepth:Te,outHeight:et,outWidth:We,strideDepth:Qe,strideHeight:gt,strideWidth:ct}=d,Dt=Y-1-d.padInfo.front,sn=ce-1-d.padInfo.top,jt=Ce-1-d.padInfo.left;for(let Fn=0;Fn<Q;++Fn)for(let ri=0;ri<Z;++ri)for(let Ds=0;Ds<le;++Ds){const er=Ds-Dt,Bs=Math.max(0,Math.ceil(er/Qe)),ds=Math.min(Te,(Y+er)/Qe);for(let xs=0;xs<te;++xs){const ur=xs-sn,Ws=Math.max(0,Math.ceil(ur/gt)),Su=Math.min(et,(ce+ur)/gt);for(let Kn=0;Kn<be;++Kn){const ia=Kn-jt,oi=Math.max(0,Math.ceil(ia/ct)),Vs=Math.min(We,(Ce+ia)/ct);let Ci=0;for(let ll=Bs;ll<ds;++ll){const Lp=ll*Qe-er;for(let _g=Ws;_g<Su;++_g){const gg=_g*gt-ur;for(let Nk=oi;Nk<Vs;++Nk){const IX=x*Fn+T*ll+k*_g+R*Nk,prn=D*(Y-1-Lp)+F*(ce-1-gg)+$*(Ce-1-(Nk*ct-ia))+j*ri;for(let r4=0;r4<fe;++r4)Ci+=w[IX+r4]*N[prn+r4]}}}p[f*Fn+g*Ds+v*xs+y*Kn+ri]=Ci}}}return e.makeTensorInfo(h.shape,h.dtype,h.values)}},nIt=Hs(bI,t=>Math.cos(t)),iIt={kernelName:bI,backendName:"cpu",kernelFunc:nIt},sIt=Hs(vI,t=>Math.cosh(t)),rIt={kernelName:vI,backendName:"cpu",kernelFunc:sIt},aIt={kernelName:gU,backendName:"cpu",kernelFunc:function oIt(t){const{inputs:n,backend:e,attrs:i}=t,{image:s,boxes:r,boxInd:o}=n,{cropSize:a,method:l,extrapolationValue:c}=i,[u,d,h,p]=s.shape,f=r.shape[0],[g,v]=a,y=Di([f,g,v,p],"float32"),w=e.data.get(r.dataId).values,x=e.data.get(o.dataId).values,T=e.data.get(s.dataId).values,k=xn(s.shape),R=xn(y.shape);for(let N=0;N<f;N++){const D=4*N,F=w[D],$=w[D+1],j=w[D+2],Q=w[D+3],Y=x[N];if(Y>=u)continue;const ce=g>1?(j-F)*(d-1)/(g-1):0,Ce=v>1?(Q-$)*(h-1)/(v-1):0;for(let Z=0;Z<g;Z++){const le=g>1?F*(d-1)+Z*ce:.5*(F+j)*(d-1);if(le<0||le>d-1)for(let te=0;te<v;te++)for(let be=0;be<p;be++)y.values[be+te*R[2]+Z*R[1]+N*R[0]]=c;else if("bilinear"===l){const te=Math.floor(le),be=Math.ceil(le),fe=le-te;for(let Te=0;Te<v;Te++){const et=v>1?$*(h-1)+Te*Ce:.5*($+Q)*(h-1);if(et<0||et>h-1){for(let ct=0;ct<p;ct++)y.values[ct+Te*R[2]+Z*R[1]+N*R[0]]=c;continue}const We=Math.floor(et),Qe=Math.ceil(et),gt=et-We;for(let ct=0;ct<p;ct++){let Dt=ct+We*k[2]+te*k[1]+Y*k[0];const sn=T[Dt];Dt=ct+Qe*k[2]+te*k[1]+Y*k[0];const jt=T[Dt];Dt=ct+We*k[2]+be*k[1]+Y*k[0];const Fn=T[Dt];Dt=ct+Qe*k[2]+be*k[1]+Y*k[0];const ri=T[Dt],Ds=sn+(jt-sn)*gt;Dt=ct+Te*R[2]+Z*R[1]+N*R[0],y.values[Dt]=Ds+(Fn+(ri-Fn)*gt-Ds)*fe}}}else for(let te=0;te<v;++te){const be=v>1?$*(h-1)+te*Ce:.5*($+Q)*(h-1);if(be<0||be>h-1){for(let et=0;et<p;et++)y.values[et+te*R[2]+Z*R[1]+N*R[0]]=c;continue}const fe=Math.round(be),Te=Math.round(le);for(let et=0;et<p;et++)y.values[et+te*R[2]+Z*R[1]+N*R[0]]=T[et+fe*k[2]+Te*k[1]+Y*k[0]]}}}return e.makeTensorInfo(y.shape,y.dtype,y.values)}},cIt={kernelName:_U,backendName:"cpu",kernelFunc:function lIt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,exclusive:o,reverse:a}=i;dn(s,"cumprod");const l=Gr([r],s.shape.length);let c=s;null!=l&&(c=Yl({inputs:{x:s},backend:e,attrs:{perm:l}}));const u=go(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=Sc(c.dtype,"int32"),h=iU(Le(c.shape),d),p=e.data.get(c.dataId).values,f=c.shape[c.shape.length-1],g=a?(y,w)=>y+f-w-1:(y,w)=>y+w;for(let y=0;y<p.length;y+=f)for(let w=0;w<f;w++){const x=g(y,w);if(0===w)h[x]=o?1:p[x];else{const T=g(y,w-1);h[x]=o?p[T]*h[T]:p[x]*h[T]}}const v=e.makeTensorInfo(c.shape,d,h);if(null!=l){const w=Yl({inputs:{x:v},backend:e,attrs:{perm:$_(l)}});return e.disposeIntermediateTensorInfo(v),e.disposeIntermediateTensorInfo(c),w}return v}},dIt={kernelName:EF,backendName:"cpu",kernelFunc:function uIt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,exclusive:o,reverse:a}=i;dn(s,"cumsum");const l=Gr([r],s.shape.length);let c=s;null!=l&&(c=Yl({inputs:{x:s},backend:e,attrs:{perm:l}}));const u=go(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=Sc(c.dtype,"int32"),h=Ja(Le(c.shape),d),p=e.data.get(c.dataId).values,f=c.shape[c.shape.length-1],g=a?(y,w)=>y+f-w-1:(y,w)=>y+w;for(let y=0;y<p.length;y+=f)for(let w=0;w<f;w++){const x=g(y,w);if(0===w)h[x]=o?0:p[x];else{const T=g(y,w-1);h[x]=o?p[T]+h[T]:p[x]+h[T]}}const v=e.makeTensorInfo(c.shape,d,h);if(null!=l){const w=Yl({inputs:{x:v},backend:e,attrs:{perm:$_(l)}});return e.disposeIntermediateTensorInfo(v),e.disposeIntermediateTensorInfo(c),w}return v}},pIt={kernelName:bU,backendName:"cpu",kernelFunc:function hIt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,weights:r}=n,{size:o,binaryOutput:a}=i;if(1===s.shape.length){const u=OW(e.data.get(s.dataId).values,e.data.get(r.dataId).values,r.dtype,r.shape,o);return e.makeTensorInfo([o],r.dtype,u)}if(2===s.shape.length){const u=pwe(e.bufferSync(s),e.bufferSync(r),o,a);return e.makeTensorInfo(u.shape,r.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}},mIt={kernelName:vU,backendName:"cpu",kernelFunc:function fIt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{blockSize:r,dataFormat:o}=i;U("NHWC"===o,()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const a=s.shape[0],l=s.shape[1],c=s.shape[2],u=s.shape[3],d=l*r,h=c*r,p=u/(r*r),f=e.data.get(s.dataId).values,g=new Float32Array(a*d*h*p);let v=0;for(let y=0;y<a;++y)for(let w=0;w<d;++w){const x=Math.floor(w/r),T=w%r;for(let k=0;k<h;++k){const R=Math.floor(k/r),D=(T*r+k%r)*p;for(let F=0;F<p;++F)g[v++]=f[F+D+u*(R+c*(x+l*y))]}}return e.makeTensorInfo([a,d,h,p],s.dtype,g)}};function bwe(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r}=n,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=i;dn([s,r],"depthwiseConv2DNative");const u=xn(s.shape),d=xn(r.shape);let h=l;null==h&&(h=[1,1]),U(La(o,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${h}'`);const p=Ca(s.shape,r.shape,o,h,a,c,!0),{filterHeight:f,filterWidth:g,dilationHeight:v,dilationWidth:y,padInfo:w}=p,x=w.left,T=w.top,k=p.outChannels/p.inChannels,R=new Ko(p.outShape,s.dtype),N=e.data.get(s.dataId).values,D=e.data.get(r.dataId).values,F=R.values;for(let $=0;$<p.batchSize;++$){const j=$*u[0],Q=$*R.strides[0];for(let Y=0;Y<p.outHeight;++Y){const ce=Q+Y*R.strides[1],Ce=Y*p.strideHeight-T;for(let Z=0;Z<f;++Z){const le=Ce+Z*v;if(le<0||le>=p.inHeight)continue;const te=Z*d[0],be=j+le*u[1];for(let fe=0;fe<p.outWidth;++fe){const Te=ce+fe*R.strides[2],et=fe*p.strideWidth-x;for(let We=0;We<g;++We){const Qe=et+We*y;if(Qe<0||Qe>=p.inWidth)continue;const ct=be+Qe*p.inChannels;let Dt=Te,sn=te+We*d[1];for(let jt=0;jt<p.inChannels;++jt){const Fn=N[ct+jt];for(let ri=0;ri<k;++ri)F[Dt+ri]+=Fn*D[sn+ri];Dt+=k,sn+=k}}}}}}return e.makeTensorInfo(R.shape,R.dtype,R.values)}const _It={kernelName:TF,backendName:"cpu",kernelFunc:bwe},bIt={kernelName:yU,backendName:"cpu",kernelFunc:function gIt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,dy:r}=n,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=i;dn([s,r],"depthwiseConv2dNativeBackpropFilter");const d=Ca(s.shape,u,o,a,l,c,!0),{strideHeight:h,strideWidth:p,filterHeight:f,filterWidth:g}=d,v=new Ko(d.filterShape,"float32"),y=d.padInfo.left,w=d.padInfo.top,x=d.outChannels/d.inChannels,T=e.data.get(s.dataId).values,k=new Ko(s.shape,s.dtype,T),R=e.data.get(r.dataId).values,N=new Ko(r.shape,r.dtype,R);for(let D=0;D<f;++D){const F=Math.max(0,Math.ceil((w-D)/h)),$=Math.min(d.outHeight,(d.inHeight+w-D)/h);for(let j=0;j<g;++j){const Q=Math.max(0,Math.ceil((y-j)/p)),Y=Math.min(d.outWidth,(d.inWidth+y-j)/p);for(let ce=0;ce<d.outChannels;++ce){const Ce=Math.trunc(ce/x),Z=ce%x;let le=0;for(let te=0;te<d.batchSize;++te)for(let be=F;be<$;++be){const fe=D+be*h-w;for(let Te=Q;Te<Y;++Te)le+=k.get(te,fe,j+Te*p-y,Ce)*N.get(te,be,Te,ce)}v.set(le,D,j,Ce,Z)}}}return e.makeTensorInfo(v.shape,v.dtype,v.values)}},yIt={kernelName:wU,backendName:"cpu",kernelFunc:function vIt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,filter:r}=n,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=i;dn([s,r],"depthwiseConv2DNativeBackpropInput");const d=xn(s.shape),h=xn(r.shape),p=Ca(u,r.shape,o,a,l,c,!0),f=new Ko(p.inShape,"float32"),g=f.values,[v,y,w]=f.strides,x=e.data.get(s.dataId).values,[T,k,R]=d,N=e.data.get(r.dataId).values,[D,F,$]=h,{batchSize:j,filterHeight:Q,filterWidth:Y,inChannels:ce,inHeight:Ce,inWidth:Z,outChannels:le,outHeight:te,outWidth:be,strideHeight:fe,strideWidth:Te}=p,et=Q-1-p.padInfo.top,We=Y-1-p.padInfo.left,Qe=le/ce;for(let gt=0;gt<j;++gt)for(let ct=0;ct<ce;++ct)for(let Dt=0;Dt<Ce;++Dt){const sn=Dt-et,jt=Math.max(0,Math.ceil(sn/fe)),Fn=Math.min(te,(Q+sn)/fe);for(let ri=0;ri<Z;++ri){const Ds=ri-We,er=Math.max(0,Math.ceil(Ds/Te)),Bs=Math.min(be,(Y+Ds)/Te);let ds=0;for(let xs=jt;xs<Fn;++xs){const ur=xs*fe-sn;for(let Ws=er;Ws<Bs;++Ws){const Kn=T*gt+k*xs+R*Ws,ia=D*(Q-1-ur)+F*(Y-1-(Ws*Te-Ds))+$*ct;for(let oi=0;oi<Qe;++oi)ds+=x[Kn+(ct*Qe+oi)]*N[ia+oi]}}g[v*gt+y*Dt+w*ri+ct]=ds}}return e.makeTensorInfo(f.shape,f.dtype,f.values)}},CIt={kernelName:CU,backendName:"cpu",kernelFunc:function wIt(t){const{inputs:n,backend:e}=t,{x:i}=n,s=Le(i.shape),r=e.data.get(i.dataId).values,o=Di([s,s],i.dtype),a=o.values;for(let c=0;c<r.length;c++)a[c*s+c]=r[c];const l=[...i.shape,...i.shape];return e.makeTensorInfo(l,o.dtype,o.values)}},SIt={kernelName:IF,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{const{x:i,filter:s}=t,{strides:r,pad:o,dilations:a}=e,l=n,c=l.data.get(i.dataId).values,u=i.shape.length,d=l.data.get(s.dataId).values,h=s.shape.length,{batchSize:p,inHeight:f,inWidth:g,inChannels:v,outHeight:y,outWidth:w,padInfo:x,strideHeight:T,strideWidth:k,filterHeight:R,filterWidth:N,dilationHeight:D,dilationWidth:F,outShape:$}=c2(i.shape,s.shape,r,o,"NHWC",a),j=Le($),Q=$.length,Y=fo(i.dtype,j);for(let Ce=0;Ce<p;++Ce)for(let Z=0;Z<y;++Z){const le=Z*T-x.top;for(let te=0;te<w;++te){const be=te*k-x.left;for(let fe=0;fe<v;++fe){let Te=Number.MIN_SAFE_INTEGER;for(let We=0;We<R;++We){const Qe=le+We*D;if(Qe>=0&&Qe<f)for(let gt=0;gt<N;++gt){const ct=be+gt*F;if(ct>=0&&ct<g){const Dt=fp([Ce,Qe,ct,fe],u,xn(i.shape)),sn=fp([We,gt,fe],h,xn(s.shape)),jt=c[Dt]+d[sn];jt>Te&&(Te=jt)}}}Y[fp([Ce,Z,te,fe],Q,xn($))]=Te}}}return{dataId:l.write(Tv(Y,i.dtype),$,i.dtype),shape:$,dtype:i.dtype}}},xIt={kernelName:xU,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{const{x:i,filter:s,dy:r}=t,{strides:o,pad:a,dilations:l}=e,c=n,u=Qu(i.shape,c.data.get(i.dataId).values),d=Qu(s.shape,c.data.get(s.dataId).values),{batchSize:h,inHeight:p,inWidth:f,inChannels:g,outHeight:v,outWidth:y,padInfo:w,strideHeight:x,strideWidth:T,filterHeight:k,filterWidth:R,dilationHeight:N,dilationWidth:D,outShape:F}=c2(i.shape,s.shape,o,a,"NHWC",l);U(r.rank===F.length,()=>`Error in ${xU}, dy must have the same rank as output ${F.length}, but got ${r.rank}`);const $=Qu(F,c.data.get(r.dataId).values),j=Hge(s.shape,s.dtype);for(let Y=0;Y<h;++Y)for(let ce=0;ce<v;++ce){const Ce=ce*x-w.top;for(let Z=0;Z<y;++Z){const le=Z*T-w.left;for(let te=0;te<g;++te){let be=Number.MIN_SAFE_INTEGER,fe=0,Te=0;for(let et=0;et<k;++et){const We=Ce+et*N;if(We>=0&&We<p)for(let Qe=0;Qe<R;++Qe){const gt=le+Qe*D;if(gt>=0&&gt<f){const ct=u[Y][We][gt][te]+d[et][Qe][te];ct>be&&(be=ct,fe=et,Te=Qe)}}}j[fe][Te][te]+=$[Y][ce][Z][te]}}}return{dataId:c.write(Tv(j,i.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}},EIt={kernelName:SU,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{const{x:i,filter:s,dy:r}=t,{strides:o,pad:a,dilations:l}=e,c=n,u=Qu(i.shape,c.data.get(i.dataId).values),d=Qu(s.shape,c.data.get(s.dataId).values),{batchSize:h,inHeight:p,inWidth:f,inChannels:g,outHeight:v,outWidth:y,padInfo:w,strideHeight:x,strideWidth:T,filterHeight:k,filterWidth:R,dilationHeight:N,dilationWidth:D,outShape:F}=c2(i.shape,s.shape,o,a,"NHWC",l);U(r.rank===F.length,()=>`Error in ${SU}, dy must have the same rank as output ${F.length}, but got ${r.rank}`);const $=Qu(F,c.data.get(r.dataId).values),j=Hge(i.shape,i.dtype);for(let Y=0;Y<h;++Y)for(let ce=0;ce<v;++ce){const Ce=ce*x-w.top;for(let Z=0;Z<y;++Z){const le=Z*T-w.left;for(let te=0;te<g;++te){let be=Number.MIN_SAFE_INTEGER,fe=Ce<0?0:Ce,Te=le<0?0:le;for(let et=0;et<k;++et){const We=Ce+et*N;if(We>=0&&We<p)for(let Qe=0;Qe<R;++Qe){const gt=le+Qe*D;if(gt>=0&&gt<f){const ct=u[Y][We][gt][te]+d[et][Qe][te];ct>be&&(be=ct,fe=We,Te=gt)}}}j[Y][fe][Te][te]+=$[Y][ce][Z][te]}}}return{dataId:c.write(Tv(j,i.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},IIt={kernelName:"Draw",backendName:"cpu",kernelFunc:function TIt(t){const{inputs:n,backend:e,attrs:i}=t,{image:s}=n,{canvas:r,options:o}=i,{contextOptions:a,imageOptions:l}=o||{},c=l?.alpha||1,u=a?.contextType||"2d";if("2d"!==u)throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=r.getContext(u,a?.contextAttributes||{});if(null==d)throw new Error(`Could not get the context with ${u} type.`);const[h,p]=s.shape.slice(0,2),f=2===s.shape.length?1:s.shape[2],g=e.data.get(s.dataId).values,v="float32"===s.dtype?255:1,y=new Uint8ClampedArray(p*h*4);for(let x=0;x<h*p;++x){const T=[0,0,0,255*c];for(let R=0;R<f;R++){const N=g[x*f+R];if("float32"===s.dtype){if(N<0||N>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${N}.`)}else if("int32"===s.dtype&&(N<0||N>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${N}.`);1===f?(T[0]=N*v,T[1]=N*v,T[2]=N*v):T[R]=N*v}const k=4*x;y[k+0]=Math.round(T[0]),y[k+1]=Math.round(T[1]),y[k+2]=Math.round(T[2]),y[k+3]=Math.round(T[3])}r.width=p,r.height=h;const w=new ImageData(y,p,h);return d.putImageData(w,0,0),s}},RW=vo((t,n)=>t*n),kIt=AW((t,n,e,i)=>({real:t*e-n*i,imag:t*i+n*e})),L3=na(PI,RW,kIt),DIt={kernelName:PI,backendName:"cpu",kernelFunc:L3};function V2(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i;let a;dn(s,"sum"),a="bool"===s.dtype?Y_({inputs:{x:s},backend:e,attrs:{dtype:"int32"}}):Dp({inputs:{x:s},backend:e});const l=a.shape.length,c=zi(r,a.shape),u=Gr(c,l);let d=c,h=a;null!=u&&(h=Yl({inputs:{x:a},backend:e,attrs:{perm:u}}),d=go(d.length,l)),Pa("sum",d,h.shape.length);const[p,f]=Sa(h.shape,d);let v=F3(e,p,Sc(h.dtype,"int32"));const y=Le(f),w=e.data.get(v.dataId).values,x=e.data.get(h.dataId).values;for(let T=0;T<w.length;++T){const k=T*y;let R=0;for(let N=0;N<y;++N)R+=x[k+N];w[T]=R}if(o){const k=v;v=yr({inputs:{x:v},backend:e,attrs:{shape:_o(v.shape,c)}}),e.disposeIntermediateTensorInfo(k)}return e.disposeIntermediateTensorInfo(a),null!=u&&e.disposeIntermediateTensorInfo(h),v}const AIt={kernelName:oL,backendName:"cpu",kernelFunc:V2},NIt={kernelName:TU,backendName:"cpu",kernelFunc:function MIt(t){const{inputs:n,backend:e,attrs:i}=t,{equation:s}=i,r=n,{allDims:o,summedDims:a,idDims:l}=hH(s,r.length);fH(o.length,l,r);const{path:c,steps:u}=mH(a,l),d=u.length;let h=null,p=o.length;const f=[];for(let g=0;g<d;++g){for(const v of u[g]){const{permutationIndices:y,expandDims:w}=pH(p,l[v]);let x;_H(y)?x=r[v]:(x=Yl({inputs:{x:r[v]},backend:e,attrs:{perm:y}}),f.push(x));const T=x.shape.slice();for(let k=0;k<w.length;++k)T.splice(w[k],0,1);es(x.shape,T)||(x=yr({inputs:{x},backend:e,attrs:{shape:T}}),f.push(x)),null===h?h=x:(h=L3({inputs:{a:x,b:h},backend:e}),f.push(h))}g<d-1&&(c[g]>=0&&(h=V2({inputs:{x:h},backend:e,attrs:{axis:c[g]-(o.length-p),keepDims:!1}}),f.push(h)),p--)}for(const g of f)g!==h&&e.disposeIntermediateTensorInfo(g);return h}},RIt={kernelName:IU,backendName:"cpu",kernelFunc:function OIt(t){const{inputs:n,backend:e}=t,{dy:i,y:s}=n;dn([i,s],"eluGrad");const r=new Float32Array(Le(s.shape)),o=e.data.get(s.dataId).values,a=e.data.get(i.dataId).values;for(let l=0;l<o.length;++l){const c=o[l];r[l]=c>=0?a[l]:a[l]*(c+1)}return e.makeTensorInfo(s.shape,"float32",r)}},vwe=vo((t,n)=>t===n?1:0),ywe=na(kF,vwe,null,"bool"),FIt={kernelName:kF,backendName:"cpu",kernelFunc:ywe},LIt=sH,PIt=rH,$It=oH,BIt=aH,VIt=lH,zIt=cH,UIt=Hs(CI,t=>{const n=Math.sign(t),e=Math.abs(t),i=1/(1+LIt*e);return n*(1-((((zIt*i+VIt)*i+BIt)*i+$It)*i+PIt)*i*Math.exp(-e*e))}),GIt={kernelName:CI,backendName:"cpu",kernelFunc:UIt},wwe=kp(t=>Math.exp(t)),Cwe=X_(SI,wwe,"float32"),jIt={kernelName:SI,backendName:"cpu",kernelFunc:Cwe};function P3(t){const{inputs:n,backend:e,attrs:i}=t,{input:s}=n,{dim:r}=i,o=s.shape.length,a=s.shape.slice();let l=r;return r<0&&(U(-(o+1)<=r,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+r+1),a.splice(l,0,1),yr({inputs:{x:s},backend:e,attrs:{shape:a}})}const HIt={kernelName:DF,backendName:"cpu",kernelFunc:P3},Swe=kp(t=>Math.expm1(t)),WIt=X_(xI,Swe),qIt={kernelName:xI,backendName:"cpu",kernelFunc:WIt},KIt=vo((t,n)=>t/n),FW=na(yI,KIt),LW={kernelName:yI,backendName:"cpu",kernelFunc:FW},xwe=vo((t,n)=>t-n),XIt=AW((t,n,e,i)=>({real:t-e,imag:n-i})),PW=na(QI,xwe,XIt),YIt={kernelName:QI,backendName:"cpu",kernelFunc:PW};function Ewe(t,n,e){const i=t.shape,s=i[0],r=i[1],o=e.data.get(t.dataId),a=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,c=[s,r],u=Le(c),d=Ra("float32",u),h=Ra("float32",u);for(let v=0;v<s;v++){const y=Xv({inputs:{x:a},backend:e,attrs:{begin:[v,0],size:[1,r]}}),w=Xv({inputs:{x:l},backend:e,attrs:{begin:[v,0],size:[1,r]}}),x=Mc({inputs:{real:y,imag:w},backend:e}),{real:T,imag:k}=ZIt(x,n,e),R=Gf(T,k);for(let N=0;N<r;N++){const D=uH(R,N);d[v*r+N]=D.real,h[v*r+N]=D.imag}e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(w),e.disposeIntermediateTensorInfo(x)}const p=e.makeTensorInfo(c,"float32",d),f=e.makeTensorInfo(c,"float32",h),g=Mc({inputs:{real:p,imag:f},backend:e});return e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(f),g}function ZIt(t,n,e){const i=Le(t.shape),s=e.data.get(t.dataId),r=e.data.get(s.complexTensorInfos.real.dataId).values,o=e.data.get(s.complexTensorInfos.imag.dataId).values;if(function QIt(t){return!(t&t-1)}(i)){const a=$W(r,o,i,n,e),l=[t.shape[0],t.shape[1]];if(n){const c=e.makeTensorInfo(l,"float32",a.real),u=e.makeTensorInfo(l,"float32",a.imag),d=e.makeTensorInfo([],"float32",E_(i,"float32")),h=Dp({inputs:{x:d},backend:e}),p=LW.kernelFunc({inputs:{a:c,b:d},backend:e}),f=LW.kernelFunc({inputs:{a:u,b:h},backend:e}),g=e.data.get(p.dataId).values,v=e.data.get(f.dataId).values;return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(f),{real:g,imag:v}}return a}{const l=function JIt(t,n,e){const i=new Float32Array(2*n);for(let s=0;s<n;s++){let r=0,o=0;for(let a=0;a<n;a++){const l=Dye(s*a,n,e),c=uH(t,a);r+=c.real*l.real-c.imag*l.imag,o+=c.real*l.imag+c.imag*l.real}e&&(r/=n,o/=n),Iye(i,r,o,s)}return i}(Gf(r,o),i,n);return xye(l)}}function $W(t,n,e,i,s){if(1===e)return{real:t,imag:n};const r=Gf(t,n),o=e/2,a=Eye(r),l=a.real,c=a.imag,u=[l.length],d=s.makeTensorInfo(u,"float32",l),h=s.makeTensorInfo(u,"float32",c),p=Mc({inputs:{real:d,imag:h},backend:s}),f=Tye(r),g=f.real,v=f.imag,y=[g.length],w=s.makeTensorInfo(y,"float32",g),x=s.makeTensorInfo(y,"float32",v),T=Mc({inputs:{real:w,imag:x},backend:s}),k=$W(l,c,o,i,s),R=k.real,N=k.imag,D=[R.length],F=s.makeTensorInfo(D,"float32",R),$=s.makeTensorInfo(D,"float32",N),j=Mc({inputs:{real:F,imag:$},backend:s}),Q=$W(g,v,o,i,s),Y=Q.real,ce=Q.imag,Ce=[Y.length],Z=s.makeTensorInfo(Ce,"float32",Y),le=s.makeTensorInfo(Ce,"float32",ce),te=Mc({inputs:{real:Z,imag:le},backend:s}),be=kye(e,i),fe=[be.real.length],Te=s.makeTensorInfo(fe,"float32",be.real),et=s.makeTensorInfo(fe,"float32",be.imag),We=Mc({inputs:{real:Te,imag:et},backend:s}),Qe=L3({inputs:{a:We,b:te},backend:s}),gt=uC({inputs:{a:j,b:Qe},backend:s}),ct=PW({inputs:{a:j,b:Qe},backend:s}),Dt=Kv({inputs:{input:gt},backend:s}),sn=Kv({inputs:{input:ct},backend:s}),jt=dC({inputs:{input:gt},backend:s}),Fn=dC({inputs:{input:ct},backend:s}),ri=hC({inputs:[Dt,sn],backend:s,attrs:{axis:0}}),Ds=hC({inputs:[jt,Fn],backend:s,attrs:{axis:0}}),er=s.data.get(ri.dataId).values,Bs=s.data.get(Ds.dataId).values;return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(p),s.disposeIntermediateTensorInfo(w),s.disposeIntermediateTensorInfo(x),s.disposeIntermediateTensorInfo(T),s.disposeIntermediateTensorInfo(F),s.disposeIntermediateTensorInfo($),s.disposeIntermediateTensorInfo(j),s.disposeIntermediateTensorInfo(Z),s.disposeIntermediateTensorInfo(le),s.disposeIntermediateTensorInfo(te),s.disposeIntermediateTensorInfo(Te),s.disposeIntermediateTensorInfo(et),s.disposeIntermediateTensorInfo(We),s.disposeIntermediateTensorInfo(Qe),s.disposeIntermediateTensorInfo(gt),s.disposeIntermediateTensorInfo(ct),s.disposeIntermediateTensorInfo(Dt),s.disposeIntermediateTensorInfo(jt),s.disposeIntermediateTensorInfo(sn),s.disposeIntermediateTensorInfo(Fn),s.disposeIntermediateTensorInfo(ri),s.disposeIntermediateTensorInfo(Ds),{real:er,imag:Bs}}const t2t={kernelName:"FFT",backendName:"cpu",kernelFunc:function e2t(t){const{inputs:n,backend:e}=t,{input:i}=n,s=Le(i.shape),r=i.shape[i.shape.length-1],a=yr({inputs:{x:i},backend:e,attrs:{shape:[s/r,r]}}),l=Ewe(a,!1,e),c=yr({inputs:{x:l},backend:e,attrs:{shape:i.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(l),c}};function BW(t){const{backend:n,attrs:e}=t,{shape:i,value:s,dtype:r}=e,o=r||Ow(s),a=fo(o,Le(i));return function i2t(t,n){t.fill(n)}(a,s),n.makeTensorInfo(i,o,a)}const n2t={kernelName:DU,backendName:"cpu",kernelFunc:BW},s2t={kernelName:AU,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{image:i}=t,s=e,r=Ra(i.dtype,Le(i.shape)),[o,a,l,c]=i.shape,u=s.data.get(i.dataId).values;for(let h=0;h<o;h++){const p=h*l*a*c;for(let f=0;f<a;f++){const g=f*(l*c);for(let v=0;v<l;v++){const y=v*c;for(let w=0;w<c;w++){const x=Math.round(l-v-1),T=p+g+y+w;let k=u[T];x>=0&&x<l&&(k=u[p+g+x*c+w]),r[T]=k}}}}return{dataId:s.write(r,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},Twe=kp(t=>Math.floor(t)),r2t=X_(EI,Twe),o2t={kernelName:EI,backendName:"cpu",kernelFunc:r2t},a2t=vo((t,n)=>Math.floor(t/n)),l2t=na(TI,a2t,null,"int32"),c2t={kernelName:TI,backendName:"cpu",kernelFunc:l2t},d2t={kernelName:mL,backendName:"cpu",kernelFunc:function u2t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r,bias:o,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=i;let g=gwe({inputs:{x:s,filter:r},backend:e,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(o){const v=g;if("NCHW"===u&&1===o.shape.length&&1!==o.shape[0]){const y=yr({inputs:{x:o},backend:e,attrs:{shape:[o.shape[0],1,1]}});g=uC({inputs:{a:g,b:y},backend:e}),e.disposeIntermediateTensorInfo(y)}else g=uC({inputs:{a:g,b:o},backend:e});e.disposeIntermediateTensorInfo(v)}if(p){const v=g;if("NCHW"===u&&"prelu"===p&&1===a.shape.length&&1!==a.shape[0]){const y=yr({inputs:{x:a},backend:e,attrs:{shape:[a.shape[0],1,1]}});g=R3(e,g,p,y,f),e.disposeIntermediateTensorInfo(y)}else g=R3(e,g,p,a,f);e.disposeIntermediateTensorInfo(v)}return g}},p2t={kernelName:_L,backendName:"cpu",kernelFunc:function h2t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r,bias:o,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=i;let g=bwe({inputs:{x:s,filter:r},backend:e,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(o){const v=g;g=uC({inputs:{a:g,b:o},backend:e}),e.disposeIntermediateTensorInfo(v)}if(p){const v=g;g=R3(e,g,p,a,f),e.disposeIntermediateTensorInfo(v)}return g}};function Iwe(t,n,e,i,s,r,o,a,l){const c=Di([i,r],e);for(let u=0;u<i;u++){const d=[];let h=0;for(let p=0;p<s;p++){const f=t[u*s+p];h+=f*o[p],d.push(f)}if(h<0||h>=l/r)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let p=0;p<r;p++)c.values[u*r+p]=n.get(...n.indexToLoc(h*r+p))}return c}const m2t={kernelName:MU,backendName:"cpu",kernelFunc:function f2t(t){const{inputs:n,backend:e}=t,{params:i,indices:s}=n,r=Le(i.shape),o=s.shape,a=o[o.length-1],[l,c,u,d]=iH(i,s);if(0===c)return e.makeTensorInfo(l,i.dtype,[]);const f=Iwe(e.data.get(s.dataId).values,e.bufferSync(i),i.dtype,c,a,u,d,i.shape,r);return e.makeTensorInfo(l,i.dtype,f.values)}};function kwe(t,n,e){const i=Di(e,t.dtype);for(let s=0;s<i.size;++s){const o=i.indexToLoc(s).slice(),c=n.locToIndex([o[0],o[2]]);o[2]=n.values[c];const u=t.locToIndex(o);0<=u&&u<t.values.length&&(i.values[s]=t.values[u])}return i}const g2t={kernelName:MF,backendName:"cpu",kernelFunc:function _2t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,indices:r}=n,{axis:o,batchDims:a}=i;dn([s,r],"gatherV2");const l=zi(o,s.shape)[0],c=e.data.get(r.dataId).values,u=s.shape[l];for(let T=0;T<c.length;++T){const k=c[T];U(k<=u-1&&k>=0,()=>`GatherV2: the index value ${k} is not in [0, ${u-1}]`)}let d=a;null==a&&(d=0);const h=Le(r.shape),p=vH(s,r,l,d),f=yr({inputs:{x:s},backend:e,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),g=yr({inputs:{x:r},backend:e,attrs:{shape:[p.batchSize,h/p.batchSize]}}),v=[p.batchSize,p.outerSize,h/p.batchSize,p.sliceSize],y=e.bufferSync(g),x=kwe(e.bufferSync(f),y,v);return e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(g),e.makeTensorInfo(p.outputShape,x.dtype,x.values)}},Dwe=vo((t,n)=>t>n?1:0),b2t=na(NF,Dwe,null,"bool"),v2t={kernelName:NF,backendName:"cpu",kernelFunc:b2t},Awe=vo((t,n)=>t>=n?1:0),y2t=na(II,Awe,null,"bool"),w2t={kernelName:II,backendName:"cpu",kernelFunc:y2t},S2t={kernelName:NU,backendName:"cpu",kernelFunc:function C2t(t){const{inputs:n,backend:e}=t,{input:i}=n,s=Le(i.shape),r=i.shape[i.shape.length-1],a=yr({inputs:{x:i},backend:e,attrs:{shape:[s/r,r]}}),l=Ewe(a,!0,e),c=yr({inputs:{x:l},backend:e,attrs:{shape:i.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(l),c}},x2t=Hs(DI,t=>Number.isFinite(t)?1:0,"bool"),E2t={kernelName:DI,backendName:"cpu",kernelFunc:x2t},T2t=Hs(AI,t=>Math.abs(t)===1/0?1:0,"bool"),I2t={kernelName:AI,backendName:"cpu",kernelFunc:T2t},k2t=Hs(MI,t=>Number.isNaN(t)?1:0,"bool"),D2t={kernelName:MI,backendName:"cpu",kernelFunc:k2t},Mwe=vo((t,n)=>t<n?1:0),A2t=na(RF,Mwe,null,"bool"),M2t={kernelName:RF,backendName:"cpu",kernelFunc:A2t},Nwe=vo((t,n)=>t<=n?1:0),N2t=na(FF,Nwe,null,"bool"),O2t={kernelName:FF,backendName:"cpu",kernelFunc:N2t};function Owe(t,n,e){const i=(n-t)/(e-1),s=Ja(e,"float32");s[0]=t;for(let r=1;r<s.length;r++)s[r]=s[r-1]+i;return s}const F2t={kernelName:RU,backendName:"cpu",kernelFunc:function R2t(t){const{backend:n,attrs:e}=t,{start:i,stop:s,num:r}=e,o=Owe(i,s,r);return n.makeTensorInfo([o.length],"float32",o)}},Rwe=kp(t=>Math.log(t)),L2t=X_(NI,Rwe),P2t={kernelName:NI,backendName:"cpu",kernelFunc:L2t},$2t=Hs(OI,t=>Math.log1p(t)),B2t={kernelName:OI,backendName:"cpu",kernelFunc:$2t},V2t=vo((t,n)=>t&&n),z2t=na(LF,V2t,null,"bool"),U2t={kernelName:LF,backendName:"cpu",kernelFunc:z2t},G2t=Hs(PF,t=>t?0:1,"bool"),j2t={kernelName:PF,backendName:"cpu",kernelFunc:G2t},H2t=vo((t,n)=>t||n),W2t=na($F,H2t,null,"bool"),q2t={kernelName:$F,backendName:"cpu",kernelFunc:W2t},X2t={kernelName:BF,backendName:"cpu",kernelFunc:function K2t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{depthRadius:r,bias:o,alpha:a,beta:l}=i;dn(s,"LRN");const c=s.shape[3],u=c-1,d=e.data.get(s.dataId).values,h=Le(s.shape),p=new Float32Array(h);function f(g){const v=g%c;let y=g-v+Math.max(0,v-r);const w=g-v+Math.min(v+r,u);let x=0;for(;y<=w;y++){const T=d[y];x+=T*T}return x}for(let g=0;g<h;g++){const v=f(g),y=d[g]*Math.pow(o+a*v,-l);p[g]=y}return e.makeTensorInfo(s.shape,s.dtype,p)}},Z2t={kernelName:FU,backendName:"cpu",kernelFunc:function Y2t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,y:r,dy:o}=n,{depthRadius:a,bias:l,alpha:c,beta:u}=i;dn(o,"LRNGrad");const d=Le(o.shape),h=o.shape[3],p=e.data.get(o.dataId).values,f=e.data.get(s.dataId).values,g=e.data.get(r.dataId).values,v=new Float32Array(d),y=d;for(let w=0;w<y;w++){const x=w%h,T=w-x+Math.max(0,x-a),k=w-x+Math.min(h,x+a+1);let R=0;for(let N=T;N<k;N++)R+=Math.pow(f[N],2);R=c*R+l;for(let N=T;N<k;N++){let D=-2*c*u*f[N]*g[w]/R;w===N&&(D+=Math.pow(R,-u)),D*=p[w],v[N]+=D}}return e.makeTensorInfo(o.shape,s.dtype,v)}};function Fwe(t,n,e,i){const s=Ra(i,Le(e));for(let r=0;r<s.length;++r){const o=r*n;let a=t[o];for(let l=0;l<n;++l){const c=t[o+l];(Number.isNaN(c)||c>a)&&(a=c)}s[r]=a}return s}function Lwe(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{reductionIndices:r,keepDims:o}=i,a=e;let l=s.shape;const c=l.length,u=zi(r,l);let d=u;const h=Gr(d,c);let p=a.data.get(s.dataId).values;if(null!=h){const T=new Array(c);for(let k=0;k<T.length;k++)T[k]=l[h[k]];p=MW(p,l,s.dtype,h,T),d=go(d.length,c),l=T}dn(s,"max"),Pa("max",d,c);const[f,g]=Sa(l,d),y=Fwe(p,Le(g),f,s.dtype),w=a.write(y,f,s.dtype);let x=f;return o&&(x=_o(f,u)),{dataId:w,shape:x,dtype:s.dtype}}const Q2t={kernelName:VF,backendName:"cpu",kernelFunc:Lwe},Pwe=vo((t,n)=>Math.max(t,n)),J2t=na(RI,Pwe),ekt={kernelName:RI,backendName:"cpu",kernelFunc:J2t},nkt={kernelName:zF,backendName:"cpu",kernelFunc:function tkt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n;dn(s,"maxPool");const{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=i;U(La(o,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`);const u=ed(s.shape,r,o,1,a,l);let d;if(1===u.filterWidth&&1===u.filterHeight&&es(u.inShape,u.outShape))d=Dp({inputs:{x:s},backend:e});else{const h=e.data.get(s.dataId).values,p=xn(s.shape),f=NW(h,0,s.dtype,p,u,"max");d=e.makeTensorInfo(u.outShape,s.dtype,f.values)}return d}},skt={kernelName:UF,backendName:"cpu",kernelFunc:function ikt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{filterSize:r,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=i;dn(s,"maxPool3d");const u=Vf(s.shape,r,o,1,a,l,c),h=dwe(e.data.get(s.dataId).values,0,s.dtype,xn(s.shape),u,"max");return e.makeTensorInfo(h.shape,"float32",h.values)}},okt={kernelName:PU,backendName:"cpu",kernelFunc:function rkt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,input:r}=n,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=i;dn([s,r],"maxPool3DGrad");const u=Vf(r.shape,o,a,1,l,c),h=function bTt(t,n){const e=Di(n.outShape,"int32"),i=n.strideDepth,s=n.strideHeight,r=n.strideWidth,o=n.dilationDepth,a=n.dilationHeight,l=n.dilationWidth,c=n.effectiveFilterDepth,u=n.effectiveFilterHeight,d=n.effectiveFilterWidth,h=n.padInfo.front,p=n.padInfo.top,f=n.padInfo.left;for(let g=0;g<n.batchSize;++g)for(let v=0;v<n.inChannels;++v)for(let y=0;y<n.outDepth;++y){const w=y*i-h;let x=w;for(;x<0;)x+=o;const T=Math.min(n.inDepth,c+w);for(let k=0;k<n.outHeight;++k){const R=k*s-p;let N=R;for(;N<0;)N+=a;const D=Math.min(n.inHeight,u+R);for(let F=0;F<n.outWidth;++F){const $=F*r-f;let j=$;for(;j<0;)j+=l;const Q=Math.min(n.inWidth,d+$);let Y=Number.NEGATIVE_INFINITY,ce=-1;for(let Ce=x;Ce<T;Ce+=o){const Z=Ce-w;for(let le=N;le<D;le+=a){const te=le-R;for(let be=j;be<Q;be+=l){const fe=be-$,Te=t.get(g,Ce,le,be,v);Te>=Y&&(Y=Te,ce=Z*u*d+te*u+fe)}}}e.set(ce,g,y,k,F,v)}}}return e}(e.bufferSync(r),u),p=u.strideDepth,f=u.strideHeight,g=u.strideWidth,v=u.dilationDepth,y=u.dilationHeight,w=u.dilationWidth,x=u.effectiveFilterDepth,T=u.effectiveFilterHeight,k=u.effectiveFilterWidth,R=x-1-u.padInfo.front,N=k-1-u.padInfo.left,D=T-1-u.padInfo.top,F=Di(r.shape,"float32"),$=e.bufferSync(s);for(let j=0;j<u.batchSize;++j)for(let Q=0;Q<u.inChannels;++Q)for(let Y=0;Y<u.inDepth;++Y)for(let ce=0;ce<u.inHeight;++ce)for(let Ce=0;Ce<u.inWidth;++Ce){const Z=Y-R,le=ce-D,te=Ce-N;let be=0;for(let fe=0;fe<x;fe+=v){const Te=(Z+fe)/p;if(!(Te<0||Te>=u.outDepth||Math.floor(Te)!==Te))for(let et=0;et<T;et+=y){const We=(le+et)/f;if(!(We<0||We>=u.outHeight||Math.floor(We)!==We))for(let Qe=0;Qe<k;Qe+=w){const gt=(te+Qe)/g;if(gt<0||gt>=u.outWidth||Math.floor(gt)!==gt)continue;const sn=x*T*k-1-h.get(j,Te,We,gt,Q)===fe*T*k+et*k+Qe?1:0;0!==sn&&(be+=$.get(j,Te,We,gt,Q)*sn)}}}F.set(be,j,Y,ce,Ce,Q)}return e.makeTensorInfo(F.shape,F.dtype,F.values)}},lkt={kernelName:LU,backendName:"cpu",kernelFunc:function akt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,input:r,output:o}=n,a=r;dn([r,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=i,h=ed(a.shape,l,c,1,u,d),p=e.data.get(a.dataId).values,f=Di(h.outShape,a.dtype,uwe(p,a.shape,a.dtype,h).values),g=h.strideHeight,v=h.strideWidth,y=h.dilationHeight,w=h.dilationWidth,x=h.effectiveFilterHeight,T=h.effectiveFilterWidth,k=T-1-h.padInfo.left,R=x-1-h.padInfo.top,N=Di(a.shape,"float32"),D=e.data.get(s.dataId).values,F=Di(s.shape,"float32",D);for(let $=0;$<h.batchSize;++$)for(let j=0;j<h.inChannels;++j)for(let Q=0;Q<h.inHeight;++Q)for(let Y=0;Y<h.inWidth;++Y){const ce=Q-R,Ce=Y-k;let Z=0;for(let le=0;le<x;le+=y){const te=(ce+le)/g;if(!(te<0||te>=h.outHeight||Math.floor(te)!==te))for(let be=0;be<T;be+=w){const fe=(Ce+be)/v;if(fe<0||fe>=h.outWidth||Math.floor(fe)!==fe)continue;const We=x*T-1-f.get($,te,fe,j)===le*T+be?1:0;0!==We&&(Z+=F.get($,te,fe,j)*We)}}N.set(Z,$,Q,Y,j)}return e.makeTensorInfo(N.shape,N.dtype,N.values)}},ukt={kernelName:$U,backendName:"cpu",kernelFunc:({inputs:t,attrs:n,backend:e})=>{const{x:i}=t,{filterSize:s,strides:r,pad:o,includeBatchInIndex:a}=n,l=e;dn(i,"MaxPoolWithArgmax");const c=l.data.get(i.dataId).values,u=ed(i.shape,s,r,[1,1],o),[d,h]=function ckt(t,n,e,i,s){const o=NW(t,0,e,xn(n),s,"max"),a=uwe(t,n,e,s,!0,i);return[o.values,a.values]}(c,i.shape,i.dtype,a,u),p=l.write(d,u.outShape,i.dtype),f=l.write(h,u.outShape,i.dtype);return[{dataId:p,shape:u.outShape,dtype:i.dtype},{dataId:f,shape:u.outShape,dtype:"int32"}]}},hkt={kernelName:GF,backendName:"cpu",kernelFunc:function dkt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i,a=zi(r,s.shape),u=Le(Sa(s.shape,a)[1]),d=[],h=e.makeTensorInfo([],"float32",new Float32Array([u]));d.push(h);const p=Y_({inputs:{x:s},backend:e,attrs:{dtype:"float32"}});d.push(p);const f=FW({inputs:{a:p,b:h},backend:e});d.push(f);const g=V2({inputs:{x:f},backend:e,attrs:{axis:r,keepDims:o}});return d.forEach(v=>e.disposeIntermediateTensorInfo(v)),g}},fkt={kernelName:jF,backendName:"cpu",kernelFunc:function pkt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i;dn(s,"min");const a=zi(r,s.shape);let l=a;const c=Gr(l,s.shape.length);let u=s;null!=c&&(u=Yl({inputs:{x:s},backend:e,attrs:{perm:c}}),l=go(l.length,s.shape.length)),Pa("min",l,u.shape.length);const[d,h]=Sa(u.shape,l),p=Le(h),f=Ja(Le(d),u.dtype),g=e.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const w=y*p;let x=g[w];for(let T=0;T<p;++T){const k=g[w+T];(Number.isNaN(k)||k<x)&&(x=k)}f[y]=x}null!=c&&e.disposeIntermediateTensorInfo(u);const v=e.makeTensorInfo(d,u.dtype,f);if(o){const w=yr({inputs:{x:v},backend:e,attrs:{shape:_o(d,a)}});return e.disposeIntermediateTensorInfo(v),w}return v}},$we=vo((t,n)=>Math.min(t,n)),mkt=na(FI,$we),_kt={kernelName:FI,backendName:"cpu",kernelFunc:mkt},bkt={kernelName:HF,backendName:"cpu",kernelFunc:function gkt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{paddings:r,mode:o}=i;dn(s,"mirrorPad");const a=r.map((x,T)=>x[0]+s.shape[T]+x[1]),l=r.map(x=>x[0]),c=r.map((x,T)=>x[0]+s.shape[T]),u="reflect"===o?0:1,d=e.data.get(s.dataId).values,h=s.shape.length,p=xn(s.shape),f=Le(a),g=a.length,v=xn(a),y=Ra(s.dtype,f);for(let x=0;x<f;x++){let T=Rw(x,g,v);for(let R=0;R<g;R++)T[R]<l[R]?T[R]=2*l[R]-T[R]-u:T[R]>=c[R]&&(T[R]=2*(c[R]-1)-T[R]+u);T=T.map((R,N)=>R-l[N]);const k=fp(T,h,p);y[x]=d[k]}return{dataId:e.write(y,a,s.dtype),shape:a,dtype:s.dtype}}},vkt=vo((t,n)=>{const e=t%n;return t<0&&n<0||t>=0&&n>=0?e:(e+n)%n}),ykt=na(LI,vkt),wkt={kernelName:LI,backendName:"cpu",kernelFunc:ykt};function Bwe(t){const{inputs:n,backend:e,attrs:i}=t,{logits:s}=n,{dim:r}=i,o=s.shape.length;let a=r;if(-1===a&&(a=o-1),a!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${a}`);const l=zi([a],s.shape),c=Lwe({inputs:{x:s},backend:e,attrs:{reductionIndices:l,keepDims:!1}}),u=_o(c.shape,l),d=yr({inputs:{x:c},backend:e,attrs:{shape:u}}),h=PW({inputs:{a:s,b:d},backend:e}),p=Cwe({inputs:{x:h},backend:e}),f=V2({inputs:{x:p},backend:e,attrs:{axis:l,keepDims:!1}}),g=yr({inputs:{x:f},backend:e,attrs:{shape:u}}),v=FW({inputs:{a:p,b:g},backend:e});return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(g),v}const Ckt={kernelName:cL,backendName:"cpu",kernelFunc:Bwe},xkt={kernelName:BU,backendName:"cpu",kernelFunc:function Skt(t){const{inputs:n,backend:e,attrs:i}=t,{logits:s}=n,{numSamples:r,seed:o,normalized:a}=i;dn(s,"multinomial");const l=a?s:Bwe({inputs:{logits:s},backend:e,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=e.data.get(l.dataId).values,h=[c,r],p=Ja(Le(h),"int32");for(let f=0;f<c;++f){const g=f*u,v=new Float32Array(u-1);v[0]=d[g];for(let x=1;x<v.length;++x)v[x]=v[x-1]+d[g+x];const y=Qw.alea(o.toString()),w=f*r;for(let x=0;x<r;++x){const T=y();p[w+x]=v.length;for(let k=0;k<v.length;k++)if(T<v[k]){p[w+x]=k;break}}}return a||e.disposeIntermediateTensorInfo(l),e.makeTensorInfo(h,"int32",p)}};function Vwe(t,n,e){const i=E_(-1,e);return RW([],n,i,t,e)}const Tkt={kernelName:WF,backendName:"cpu",kernelFunc:function Ekt(t){const{inputs:n,backend:e}=t,{x:i}=n;dn(i,"neg");const s=e.data.get(i.dataId).values,[r,o]=Vwe(s,i.shape,i.dtype);return e.makeTensorInfo(o,i.dtype,r)}},Ikt=Hj,Dkt={kernelName:VU,backendName:"cpu",kernelFunc:function kkt(t){const{inputs:n,backend:e,attrs:i}=t,{boxes:s,scores:r}=n,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=i;dn(s,"NonMaxSuppression");const c=e.data.get(s.dataId).values,u=e.data.get(r.dataId).values,{selectedIndices:d}=Ikt(c,u,o,a,l);return e.makeTensorInfo([d.length],"int32",new Int32Array(d))}},Akt=Wj,Nkt={kernelName:zU,backendName:"cpu",kernelFunc:function Mkt(t){const{inputs:n,backend:e,attrs:i}=t,{boxes:s,scores:r}=n,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=i;dn(s,"NonMaxSuppressionPadded");const u=e.data.get(s.dataId).values,d=e.data.get(r.dataId).values,{selectedIndices:h,validOutputs:p}=Akt(u,d,o,a,l,c);return[e.makeTensorInfo([h.length],"int32",new Int32Array(h)),e.makeTensorInfo([],"int32",new Int32Array([p]))]}},Okt=qj,Fkt={kernelName:UU,backendName:"cpu",kernelFunc:function Rkt(t){const{inputs:n,backend:e,attrs:i}=t,{boxes:s,scores:r}=n,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=i;dn(s,"NonMaxSuppressionWithScore");const u=e.data.get(s.dataId).values,d=e.data.get(r.dataId).values,h=o,p=a,f=l,g=c,{selectedIndices:v,selectedScores:y}=Okt(u,d,h,p,f,g);return[e.makeTensorInfo([v.length],"int32",new Int32Array(v)),e.makeTensorInfo([y.length],"float32",new Float32Array(y))]}},zwe=vo((t,n)=>t!==n?1:0),Lkt=na(qF,zwe,null,"bool"),Pkt={kernelName:qF,backendName:"cpu",kernelFunc:Lkt},Bkt={kernelName:XF,backendName:"cpu",kernelFunc:function $kt(t){const{inputs:n,backend:e,attrs:i}=t,{indices:s}=n,{dtype:r,depth:o,onValue:a,offValue:l}=i;dn(s,"oneHot");const c=Le(s.shape),u=new Float32Array(c*o);u.fill(l);const d=e.data.get(s.dataId).values;for(let h=0;h<c;++h)d[h]>=0&&d[h]<o&&(u[h*o+d[h]]=a);return e.makeTensorInfo([...s.shape,o],r,u)}};function $3(t){const{inputs:n,backend:e}=t,{x:i}=n;if("string"===i.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===i.dtype){const s=Kv({inputs:{input:i},backend:e}),r=$3({inputs:{x:s},backend:e}),o=dC({inputs:{input:i},backend:e}),a=$3({inputs:{x:o},backend:e}),l=Mc({inputs:{real:r,imag:a},backend:e});return e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(a),l}return BW({backend:e,attrs:{shape:i.shape,value:0,dtype:i.dtype}})}const Vkt={kernelName:pL,backendName:"cpu",kernelFunc:$3},zkt={kernelName:KF,backendName:"cpu",kernelFunc:function Uwe(t){const{inputs:n,backend:e}=t,{x:i}=n;if("string"===i.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===i.dtype){const s=Kv({inputs:{input:i},backend:e}),r=Uwe({inputs:{x:s},backend:e}),o=dC({inputs:{input:i},backend:e}),a=$3({inputs:{x:o},backend:e}),l=Mc({inputs:{real:r,imag:a},backend:e});return e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(a),l}return BW({backend:e,attrs:{shape:i.shape,value:1,dtype:i.dtype}})}};function Gwe(t){const{inputs:n,backend:e,attrs:i}=t,{axis:s}=i;if(1===n.length)return P3({inputs:{input:n[0]},backend:e,attrs:{dim:s}});const r=n[0].shape,o=n[0].dtype;n.forEach(u=>{Cc(r,u.shape,"All tensors passed to stack must have matching shapes"),U(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],c=hC({inputs:n.map(u=>{const d=P3({inputs:{input:u},backend:e,attrs:{dim:s}});return a.push(d),d}),backend:e,attrs:{axis:s}});return a.forEach(u=>e.disposeIntermediateTensorInfo(u)),c}const Ukt={kernelName:YF,backendName:"cpu",kernelFunc:Gwe},jwe={kernelName:ZF,backendName:"cpu",kernelFunc:function Gkt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{paddings:r,constantValue:o}=i;dn(s,"pad");const a=r.map((w,x)=>w[0]+s.shape[x]+w[1]),l=r.map(w=>w[0]),c=e.data.get(s.dataId).values,u=Le(s.shape),d=s.shape.length,h=xn(s.shape),p=Le(a),f=a.length,g=xn(a),v=Ra(s.dtype,p);0!==o&&v.fill(o);for(let w=0;w<u;w++)v[fp(Rw(w,d,h).map((R,N)=>R+l[N]),f,g)]=c[w];return{dataId:e.write(v,a,s.dtype),shape:a,dtype:s.dtype}}},jkt=vo((t,n)=>Math.pow(t,n)),Hkt=na($I,jkt),Wkt={kernelName:$I,backendName:"cpu",kernelFunc:Hkt};function Hwe(t,n,e,i){const[s,r]=Sa(t,i),o=Sc(n,"int32"),a=Ja(Le(s),o),l=Le(r);for(let c=0;c<a.length;++c){const u=c*l;let d=1;for(let h=0;h<l;++h)d*=e[u+h];a[c]=d}return{outVals:a,outShape:s,outDtype:o}}const Kkt={kernelName:JF,backendName:"cpu",kernelFunc:function qkt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i;dn(s,"prod");const a=s.shape.length,l=zi(r,s.shape),c=Gr(l,a);let u=l,d=s;const h=[];null!=c&&(d=Yl({inputs:{x:s},backend:e,attrs:{perm:c}}),h.push(d),u=go(u.length,a));const p=e.data.get(d.dataId).values,{outVals:f,outShape:g,outDtype:v}=Hwe(d.shape,d.dtype,p,u);let y=g;return o&&(y=_o(g,l)),h.forEach(w=>e.disposeIntermediateTensorInfo(w)),e.makeTensorInfo(y,v,f)}};function Wwe(t,n){const e=t.slice(0,n);for(;e.length<n;)e.push(1);for(let i=n;i<t.length;i++)e[n-1]*=t[i];return e}function qwe(t,n,e,i,s,r,o,a){if(0===t.length)throw new Error("paramsNestedSplits must be non empty");if(0===n[0].length)throw new Error("Split tensors must not be scalars");if(function Xkt(t,n,e){t.forEach((i,s)=>{if(i<0||i>=e){const r=Rw(s,n.length,xn(n)).join(",");throw new Error(`indices[${r}] = ${i} is not in [0, ${e})`)}})}(r,o,n[0][0]-1),0===i.length)throw new Error("params.rank must be nonzero");const c=i[0],{outSplits:u,valueSlices:d,numValues:h}=function Zkt(t,n,e,i){const s=[];let r=0;const a=new Array(n.length-1+e.length).fill(null).map(()=>[0]);!function Ykt(t,n){for(let e=0;e<t.length;++e){const i=t[e],s=e===t.length-1?n:t[e+1].length;if(0===i.length)throw new Error("Ragged splits may not be empty");if(i[0]<0)throw new Error("Ragged splits must be non-negative");if(i[i.length-1]>s)throw new Error("Ragged splits must not point past values");for(let r=1;r<i.length;++r)if(i[r-1]>i[r])throw new Error("Ragged splits must be sorted in ascending order")}}(e,i);let l=1;for(let c=0;c<n.length-1;++c){l*=n[c];const u=n[c+1];for(let d=1;d<l+1;++d)a[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let h=0;h<e.length;++h){const p=e[h],f=h+n.length-1;if(f>=0){const g=a[f],v=g[g.length-1]-p[u];for(let y=u;y<d;++y)a[f].push(p[y+1]+v)}u=p[u],d=p[d]}d!==u&&(s.push([u,d]),r+=d-u)}return{outSplits:a,valueSlices:s,numValues:r}}(r,o,t,c),p=function Qkt(t){const n=[];for(let e=0;e<t.length;++e){const s=fo("int32",t[e].length);n.push(s),t[e].forEach((r,o)=>s[o]=r)}return n}(u),f=function eDt(t,n,e,i,s){const r=n.slice();r[0]=s;const o=fo(e,Le(r)),a=t.length;return function Jkt(t,n,e,i,s,r){const o=Wwe(n,2)[1],a=Wwe(r,2)[1];let l=0;for(const c of e)for(let u=c[0];u<c[1];++u){for(let d=0;d<i;++d)s[l*a+d]=t[u*o+d];++l}}(t,n,i,0===a?0:a/n[0],o,r),[o,r]}(e,i,s,d,h);return[p,f[0],f[1]]}const nDt={kernelName:GU,backendName:"cpu",kernelFunc:function tDt(t){const{inputs:n,backend:e,attrs:i}=t,{paramsNestedSplits:s,paramsDenseValues:r,indices:o}=n,l=s.map(y=>e.data.get(y.dataId).values),c=s.map(y=>y.shape),u=e.data.get(r.dataId).values,d=e.data.get(o.dataId).values,[h,p,f]=qwe(l,c,u,r.shape,r.dtype,d,o.shape),g=h.map(y=>e.makeTensorInfo([y.length],"int32",y)),v=e.makeTensorInfo(f,r.dtype,p);return g.concat([v])}},Kwe=2147483647;function Xwe(t,n,e,i,s,r,o){if(n.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=0===n.length,l=0===s.length,c=0===o.length,u=[];a||u.push(n[0]),l||u.push(s[0]),c||u.push(o[0]);for(let v=1;v<u.length;++v)if(u[v]!==u[v-1])throw new Error("starts, limits, and deltas must have the same shape");const d=0===u.length?1:u[0],h=fo("int32",d+1);h[0]=0;for(let v=0;v<d;++v){const y=a?t[0]:t[v],w=l?i[0]:i[v],x=c?r[0]:r[v];if(0===x)throw new Error("Requires delta != 0");let T;if(x>0&&w<y||x<0&&w>y)T=0;else if(T=Math.ceil(Math.abs((w-y)/x)),T>Kwe)throw new Error(`Requires ((limit - start) / delta) <= ${Kwe}`);h[v+1]=h[v]+T}const f=fo(e,h[d]);let g=0;for(let v=0;v<d;++v){const y=h[v+1]-h[v];let w=a?t[0]:t[v];const x=c?r[0]:r[v];for(let T=0;T<y;++T)f[g++]=w,w+=x}return[h,f]}const sDt={kernelName:jU,backendName:"cpu",kernelFunc:function iDt(t){const{inputs:n,backend:e}=t,{starts:i,limits:s,deltas:r}=n,o=e.data.get(i.dataId).values,a=e.data.get(s.dataId).values,l=e.data.get(r.dataId).values,[c,u]=Xwe(o,i.shape,i.dtype,a,s.shape,l,r.shape);return[e.makeTensorInfo([c.length],"int32",c),e.makeTensorInfo([u.length],i.dtype,u)]}};var dd=wp;class B3{constructor(n,e,i,s,r,o,a,l,c,u){this.shape=n,this.shapeShape=e,this.values=i,this.valuesShape=s,this.valuesDType=r,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=wye(u),this.raggedRank=Cye(this.rowPartitionTypes)}getRowPartitionTypeByDimension(n){return this.rowPartitionTypes[0]===dd.FIRST_DIM_SIZE?this.rowPartitionTypes[n+1]:this.rowPartitionTypes[n]}getRowPartitionTensor(n){return this.rowPartitionTypes[0]===dd.FIRST_DIM_SIZE?this.rowPartitionValues[n+1]:this.rowPartitionValues[n]}getMaxWidth(n){const e=this.getRowPartitionTensor(n-1);switch(this.getRowPartitionTypeByDimension(n-1)){case dd.VALUE_ROWIDS:return B3.getMaxWidthValueRowID(e);case dd.ROW_SPLITS:return B3.getMaxWidthRowSplit(e);default:throw new Error(`Cannot handle partition type ${dd[this.getRowPartitionTypeByDimension(n-1)]}`)}}static getMaxWidthRowSplit(n){const e=n.length;if(0===e||1===e)return 0;let i=0;for(let s=0;s<e-1;++s){const r=n[s+1]-n[s];r>i&&(i=r)}return i}static getMaxWidthValueRowID(n){const e=n.length;if(0===e)return 0;let i=0,s=n[0],r=0;for(let o=1;o<e;++o){const a=n[o];a!==s&&(s=a,r=Math.max(o-i,r),i=o)}return Math.max(e-i,r)}tensorShapeFromTensor(n,e,i=!0){if(0===e.length){if(-1===n[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Zwe(n,i)}calculateOutputSize(n){const e=this.valuesShape;Sye(this.defaultValueShape,e);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=yye(this.raggedRank,s,e);o[0]<0&&(o[0]=n);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(n,e,i){const s=Math.min(n,i),r=[];let o=0;for(let a=0;a<s;++a,o+=e)r.push(o);for(let a=s;a<n;++a)r.push(-1);return U(r.length===n,()=>"Final length of result must be equal to firstDimension."),r}calculateOutputIndexRowSplit(n,e,i,s){const r=n.length,o=[];for(let a=0;a<r-1;++a){const l=n[a+1]-n[a];let c=Math.min(s,l),u=e[a];-1===u&&(c=0);for(let d=0;d<c;++d)o.push(u),u+=i;for(let d=0;d<l-c;++d)o.push(-1)}if(r>0&&o.length!==n[r-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(n,e,i,s){const r=n.length,o=[];if(0===r)return[];let a=0,l=n[0];if(l>=e.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${e.length}`);let c=e[l];o.push(c);for(let u=1;u<r;++u){const d=n[u];if(d===l)c>=0&&(++a,a<s?c+=i:c=-1);else{if(a=0,l=d,d>=e.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${e.length}`);c=e[d]}o.push(c)}if(o.length!==n.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(n,e,i,s){const r=this.getRowPartitionTensor(n),o=this.getRowPartitionTypeByDimension(n);switch(o){case dd.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(r,e,i,s);case dd.ROW_SPLITS:if(r.length-1>e.length)throw new Error(`Row partition size is greater than output size: ${r.length-1} > ${e.length}`);return this.calculateOutputIndexRowSplit(r,e,i,s);default:throw new Error(`Unsupported partition type: ${dd[o]}`)}}getFirstDimensionSize(){const n=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const e=this.rowPartitionTypes[0];switch(e){case dd.FIRST_DIM_SIZE:return n[0];case dd.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case dd.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${dd[e]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),i=this.calculateOutputSize(e),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*i[l+1];const r=Zwe(i,!1),o=fo(this.valuesDType,Le(r));if(s[0]*i[0]>0){let l=this.calculateFirstParentOutputIndex(e,s[0],i[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,s[c],i[c]);this.setOutput(this.raggedRank,l,o,r)}return[r,o]}setOutput(n,e,i,s){if(0===i.length)return;const r=this.values,o=i;let a=s.slice();a=a.slice(n+1);const l=Le(a),c=e.length;let u=this.defaultValue;if(u.length!==l&&1!==u.length){const f=this.defaultValueShape;Ee(()=>{const g=ge(u,f);u=Kw(g,a).dataSync()})}let d=0,h=0,p=0;for(let f=0;f<=c;++f){let g=f<c?e[f]:-1;if(g!==p){if(h<p){const v=r.subarray(d*l);Ywe(o.subarray(h*l),v,(p-h)*l)}if(f>=c&&(g=Math.floor(i.length/l)),g>p)if(1===this.defaultValue.length)o.subarray(p*l,g*l).fill(this.defaultValue[0]),p=g;else for(;g>p;)Ywe(o.slice(p*l),u,l),++p;g<0?(d=f+1,h=p):(d=f,h=p,p=h+1)}else++p}}}function Ywe(t,n,e){for(let i=0;i<e;i++)t[i]=n[i]}function Zwe(t,n){const e=[];for(let i of t){if(i<0){if(!n)throw new Error(`Dimension ${i} must be >= 0`);if(i<-1)throw new Error(`Dimension ${i} must be >= -1`);i=-1}e.push(i)}return e}function Qwe(t,n,e,i,s,r,o,a,l,c){return new B3(t,n,e,i,s,r,o,a,l,c).compute()}const oDt={kernelName:HU,backendName:"cpu",kernelFunc:function rDt(t){const{inputs:n,backend:e,attrs:i}=t,{shape:s,values:r,defaultValue:o,rowPartitionTensors:a}=n,{rowPartitionTypes:l}=i,c=e.data.get(s.dataId).values,u=e.data.get(r.dataId).values,d=e.data.get(o.dataId).values,h=a.map(v=>e.data.get(v.dataId).values),p=a.map(v=>v.shape),[f,g]=Qwe(c,s.shape,u,r.shape,r.dtype,d,o.shape,h,p,l);return e.makeTensorInfo(f,r.dtype,g)}};function Jwe(t,n,e,i){if(t===n||t<n&&e<0||n<t&&e>1)return Ja(0,i);const l=Ja(Math.abs(Math.ceil((n-t)/e)),i);n<t&&1===e&&(e=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+e;return l}const lDt={kernelName:WU,backendName:"cpu",kernelFunc:function aDt(t){const{backend:n,attrs:e}=t,{start:i,stop:s,dtype:r,step:o}=e,a=Jwe(i,s,o,r);return n.makeTensorInfo([a.length],r,a)}},cDt=Hs(BI,t=>1/t),uDt={kernelName:BI,backendName:"cpu",kernelFunc:cDt},hDt={kernelName:nL,backendName:"cpu",kernelFunc:function dDt(t){const{inputs:n,backend:e,attrs:i}=t,{images:s}=n,{alignCorners:r,halfPixelCenters:o,size:a}=i;dn(s,"resizeBilinear");const l=xn(s.shape),[c,u]=a,[d,h,p,f]=s.shape,g=e.data.get(s.dataId).values,v=new Float32Array(Le([d,c,u,f])),y=[r&&c>1?h-1:h,r&&u>1?p-1:p],w=[r&&c>1?c-1:c,r&&u>1?u-1:u];let x=0;const T=y[0]/w[0],k=y[1]/w[1];for(let R=0;R<d;R++)for(let N=0;N<c;N++){let D;D=o?T*(N+.5)-.5:T*N;const F=Math.max(0,Math.floor(D)),$=D-F,j=Math.min(h-1,Math.ceil(D)),Q=R*l[0]+F*l[1],Y=R*l[0]+j*l[1];for(let ce=0;ce<u;ce++){let Ce;Ce=o?k*(ce+.5)-.5:k*ce;const Z=Math.max(0,Math.floor(Ce)),le=Ce-Z,te=Math.min(p-1,Math.ceil(Ce)),be=Q+Z*l[2],fe=Y+Z*l[2],Te=Q+te*l[2],et=Y+te*l[2];for(let We=0;We<f;We++){const Qe=g[be+We],gt=g[fe+We],sn=Qe+(g[Te+We]-Qe)*le;v[x++]=sn+(gt+(g[et+We]-gt)*le-sn)*$}}}return e.makeTensorInfo([d,c,u,f],"float32",v)}},fDt={kernelName:XU,backendName:"cpu",kernelFunc:function pDt(t){const{inputs:n,backend:e,attrs:i}=t,{images:s,dy:r}=n,{alignCorners:o}=i;dn([r,s],"resizeBilinearGrad");const a=xn(s.shape),[l,c,u,d]=s.shape,[,h,p]=r.shape,f=new Float32Array(l*c*u*d),g=[o&&h>1?c-1:c,o&&p>1?u-1:u],v=[o&&h>1?h-1:h,o&&p>1?p-1:p],y=g[0]/v[0],w=g[1]/v[1],x=e.data.get(r.dataId).values;let T=0;for(let k=0;k<l;k++){const R=k*a[0];for(let N=0;N<h;N++){const D=N*y,F=Math.floor(D),$=Math.min(Math.ceil(D),c-1),j=R+F*a[1],Q=R+$*a[1],Y=D-F,ce=1-Y;for(let Ce=0;Ce<p;Ce++){const Z=Ce*w,le=Math.floor(Z),te=Math.min(Math.ceil(Z),u-1),be=Z-le,fe=1-be,Te=j+le*a[2],et=j+te*a[2],We=Q+le*a[2],Qe=Q+te*a[2],gt=ce*fe,ct=ce*be,Dt=Y*fe,sn=Y*be;for(let jt=0;jt<d;jt++){const Fn=x[T++];f[Te+jt]+=Fn*gt,f[et+jt]+=Fn*ct,f[We+jt]+=Fn*Dt,f[Qe+jt]+=Fn*sn}}}}return e.makeTensorInfo([l,u,c,d],"float32",f)}},_Dt={kernelName:tL,backendName:"cpu",kernelFunc:function mDt(t){const{inputs:n,backend:e,attrs:i}=t,{images:s}=n,{alignCorners:r,halfPixelCenters:o,size:a}=i;dn(s,"resizeNearestNeighbor");const l=xn(s.shape),[c,u]=a,[d,h,p,f]=s.shape,g=e.data.get(s.dataId).values,v=new Float32Array(d*c*u*f),y=[r&&c>1?h-1:h,r&&u>1?p-1:p],w=[r&&c>1?c-1:c,r&&u>1?u-1:u],x=y[0]/w[0],T=y[1]/w[1];let k=0;for(let R=0;R<d;R++){const N=R*l[0];for(let D=0;D<c;D++){const F=o?x*(D+.5):x*D;let $=Math.min(h-1,r?Math.round(F):Math.floor(F));o&&($=Math.max(0,$));const j=N+$*l[1];for(let Q=0;Q<u;Q++){const Y=o?T*(Q+.5):T*Q;let ce=Math.min(p-1,r?Math.round(Y):Math.floor(Y));o&&(ce=Math.max(0,ce));const Ce=j+ce*l[2];for(let Z=0;Z<f;Z++)v[k++]=g[Ce+Z]}}}return e.makeTensorInfo([d,c,u,f],s.dtype,v)}},bDt={kernelName:KU,backendName:"cpu",kernelFunc:function gDt(t){const{inputs:n,backend:e,attrs:i}=t,{images:s,dy:r}=n,{alignCorners:o}=i;dn([r,s],"resizeNearestNeighborGrad");const a=xn(s.shape),l=xn(r.shape),[c,u,d,h]=s.shape,[,p,f]=r.shape,g=new Float32Array(c*u*d*h),v=e.data.get(r.dataId).values,y=[o&&p>1?u-1:u,o&&f>1?d-1:d],w=[o&&p>1?p-1:p,o&&f>1?f-1:f],x=y[0]/w[0],T=y[1]/w[1],k=1/x,R=1/T,N=2*Math.ceil(k)+2,D=2*Math.ceil(R)+2;for(let F=0;F<c;F++){const $=F*a[0];for(let j=0;j<u;j++){const Q=$+j*a[1],Y=Math.floor(j*k),ce=Math.floor(Y-N/2);for(let Ce=0;Ce<d;Ce++){const Z=Q+Ce*a[2],le=Math.floor(Ce*R),te=Math.floor(le-D/2);for(let be=0;be<h;be++){let fe=0;for(let Te=0;Te<N;Te++){const et=Te+ce;if(et<0||et>=p)continue;const We=$+et*l[1],Qe=et*x;if(j===Math.min(u-1,o?Math.round(Qe):Math.floor(Qe)))for(let ct=0;ct<D;ct++){const Dt=ct+te;if(Dt<0||Dt>=f)continue;const sn=We+Dt*l[2],jt=Dt*T;Ce===Math.min(d-1,o?Math.round(jt):Math.floor(jt))&&(fe+=v[sn+be])}}g[Z+be]=fe}}}}return e.makeTensorInfo(s.shape,s.dtype,g)}},yDt={kernelName:iL,backendName:"cpu",kernelFunc:function vDt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{dims:r}=i;dn(s,"reverse");const o=s.shape.length,a=zi(r,s.shape);if(0===o)return Dp({inputs:{x:s},backend:e});const l=new Ko(s.shape,s.dtype),c=e.bufferSync(s);for(let u=0;u<l.size;u++){const d=l.indexToLoc(u),h=d.slice();a.forEach(p=>h[p]=s.shape[p]-1-h[p]),l.set(c.get(...h),...d)}return e.makeTensorInfo(l.shape,l.dtype,l.values)}},wDt={kernelName:pG,backendName:"cpu",kernelFunc:({inputs:t,attrs:n,backend:e})=>{const{image:i}=t,{radians:s,fillValue:r,center:o}=n,a=e,l=Ra(i.dtype,Le(i.shape)),[c,u,d,h]=i.shape,[p,f]=eH(o,u,d),v=Math.sin(s),y=Math.cos(s),w=a.data.get(i.dataId).values;for(let T=0;T<c;T++){const k=T*d*u*h;for(let R=0;R<u;R++){const N=R*(d*h);for(let D=0;D<d;D++){const F=D*h;for(let $=0;$<h;$++){const j=[c,R,D,$],Q=j[2],Y=j[1];let ce=(Q-p)*y-(Y-f)*v,Ce=(Q-p)*v+(Y-f)*y;ce=Math.round(ce+p),Ce=Math.round(Ce+f);let Z=r;"number"!=typeof r&&(Z=3===$?255:r[$]),ce>=0&&ce<d&&Ce>=0&&Ce<u&&(Z=w[k+Ce*(d*h)+ce*h+$]),l[k+N+F+$]=Z}}}}return{dataId:a.write(l,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},CDt=Hs(UI,t=>{const n=Math.floor(t);return t-n<.5?Math.floor(t):t-n>.5?Math.ceil(t):n%2==0?n:n+1}),SDt={kernelName:UI,backendName:"cpu",kernelFunc:CDt},eCe=kp(t=>1/Math.sqrt(t)),xDt=X_(GI,eCe),EDt={kernelName:GI,backendName:"cpu",kernelFunc:xDt};function Yv(t,n,e,i,s,r,o,a,l,c){const u=[i/s,s],d=t.values,h=n.values;if(0===i)return Di(e,n.dtype);const p=l instanceof Ko?l:Di(u,n.dtype);"string"==typeof l||"number"==typeof l?p.values.fill(l):"boolean"==typeof l&&p.values.fill(+l);for(let f=0;f<r;f++){const g=[];let v=0;for(let y=0;y<o;y++){const w=d[f*o+y];g.push(w),v+=w*a[y]}if(v<0||v>=i/s)throw new Error(`Invalid indices: ${g} does not index into ${e}`);for(let y=0;y<s;y++)c?p.values[v*s+y]+=h[f*s+y]:p.values[v*s+y]=0===n.rank?h[0]:h[f*s+y]}return p}const IDt={kernelName:YU,backendName:"cpu",kernelFunc:function TDt(t){const{inputs:n,backend:e,attrs:i}=t,{indices:s,updates:r}=n,{shape:o}=i,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Bv(0,s,o),g=Yv(e.bufferSync(s),e.bufferSync(r),o,d,c,l,a,u,0,!0);return e.makeTensorInfo(o,g.dtype,g.values)}};function kDt(t,n){let e=0,i=t.length,s=0;for(;e<i;)s=Math.floor((e+i)/2),t[s]<n?e=s+1:i=s;return i}function DDt(t,n){let e=0,i=t.length,s=0;for(;e<i;)s=Math.floor((e+i)/2),t[s]<=n?e=s+1:i=s;return i}const NDt={kernelName:QU,backendName:"cpu",kernelFunc:function MDt(t){const{inputs:n,backend:e,attrs:i}=t,{sortedSequence:s,values:r}=n,{side:o}=i,c=function ADt(t,n,e,i,s,r){const o=fo("int32",e*s);for(let a=0;a<e;++a){const l=t.slice(a*i,(a+1)*i),c=a*s;for(let u=0;u<s;++u)o[c+u]="left"===r?kDt(l,n[u+c]):DDt(l,n[u+c])}return o}(e.data.get(s.dataId).values,e.data.get(r.dataId).values,s.shape[0],s.shape[1],r.shape[1],o);return e.makeTensorInfo(r.shape,"int32",c)}},RDt={kernelName:sL,backendName:"cpu",kernelFunc:function ODt(t){const{inputs:n,backend:e}=t,{condition:i,t:s,e:r}=n;dn([i,s,r],"select");const o=i.shape.length,a=e.data.get(i.dataId).values,l=e.data.get(s.dataId).values,c=e.data.get(r.dataId).values,u=Sc(s.dtype,r.dtype),d=Ja(Le(s.shape),u);let h=0;const p=0===o||o>1||1===s.shape.length?1:Le(s.shape.slice(1));for(let f=0;f<a.length;f++)for(let g=0;g<p;g++)d[h++]=1===a[f]?l[f]:c[f];return e.makeTensorInfo(s.shape,u,d)}},FDt=QL,LDt=JL,PDt=Hs(jI,t=>t>=0?LDt*t:FDt*(Math.exp(t)-1)),$Dt={kernelName:jI,backendName:"cpu",kernelFunc:PDt},BDt=Hs(qI,t=>t<0?-1:t>0?1:0),VDt={kernelName:qI,backendName:"cpu",kernelFunc:BDt},zDt=Hs(HI,t=>Math.sin(t)),UDt={kernelName:HI,backendName:"cpu",kernelFunc:zDt},GDt=Hs(WI,t=>Math.sinh(t)),jDt={kernelName:WI,backendName:"cpu",kernelFunc:GDt},tCe=Math.log(1.1920928955078125e-7)+2,HDt=Hs(XI,t=>{const n=t>-tCe,e=t<tCe,i=Math.exp(t);let s;return s=e?i:n?t:Math.log(1+i),s}),WDt={kernelName:XI,backendName:"cpu",kernelFunc:HDt},KDt={kernelName:aL,backendName:"cpu",kernelFunc:function qDt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{blockShape:r,paddings:o}=i;dn([s],"spaceToBatchND");const a=Le(r),l=[[0,0]];l.push(...o);for(let R=1+r.length;R<s.shape.length;++R)l.push([0,0]);const c=jwe.kernelFunc({inputs:{x:s},backend:e,attrs:{paddings:l,constantValue:0}}),u=S2(c.shape,r,a,!1),d=x2(u.length,r.length,!1),h=E2(c.shape,r,a,!1),g=yr({inputs:{x:c},backend:e,attrs:{shape:u}}),w=Yl({inputs:{x:g},backend:e,attrs:{perm:d}}),k=yr({inputs:{x:w},backend:e,attrs:{shape:h}});return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(w),k}};function nCe(t,n,e,i,s,r,o){const a=n[0],l=r[0],c=new Array(l),u=new Array(a),d=n[1];if(0===l){if(0!==a)throw new Error(Nye(a));return[fo(e,0),[0,d],fo(s,0),c,u]}let h=!0,p=0;const f=new Array(l).fill(0);for(let v=0;v<a;++v){const y=t[v*d];if(y<0)throw new Error(Oye(v,y));if(y>=l)throw new Error(Rye(v,y,l));++f[y],h=h&&y>=p,p=y}let g=!0;for(let v=0;v<l;++v){const y=0===f[v];c[v]=y,g=g&&!y,f[v]=Math.max(f[v],1),v>0&&(f[v]+=f[v-1])}if(g&&h){const v=t,y=i;for(let w=0;w<a;++w)u[w]=w;return[v,[a,d],y,c,u]}{const v=f[l-1],y=fo(e,v*d),w=fo(s,v),x=new Array(l).fill(0);for(let T=0;T<a;++T){const k=t[T*d],N=(0===k?0:f[k-1])+x[k];x[k]++;for(let D=0;D<d;++D)y[N*d+D]=t[T*d+D];w[N]=i[T],u[T]=N}for(let T=0;T<l;++T)if(0===x[T]){const R=0===T?0:f[T-1];y[R*d+0]=T;for(let N=1;N<d;++N)y[R*d+N]=0;w[R]=o}return[y,[v,d],w,c,u]}}const YDt={kernelName:JU,backendName:"cpu",kernelFunc:function XDt(t){const{inputs:n,backend:e}=t,{indices:i,values:s,denseShape:r,defaultValue:o}=n;if(1!==r.shape.length)throw new Error(`Dense shape must be a vector, saw:\n        ${r.shape}`);if(2!==i.shape.length)throw new Error(`Indices must be a matrix, saw:\n        ${i.shape}`);if(1!==s.shape.length)throw new Error(`Values must be a vector, saw:\n        ${s.shape}`);if(0!==o.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${o.shape}`);const a=e.data.get(i.dataId).values,l=e.data.get(s.dataId).values,c=e.data.get(r.dataId).values,u=e.data.get(o.dataId).values[0],[d,h,p,f,g]=nCe(a,i.shape,i.dtype,l,s.dtype,c,u);return[e.makeTensorInfo(h,i.dtype,d),e.makeTensorInfo([h[0]],s.dtype,p),e.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(v=>Number(v)))),e.makeTensorInfo([g.length],i.dtype,new Int32Array(g))]}};function iCe(t,n,e,i,s){const r=Le(i),o=n[0],a=s.length,l=[];let c=1,u=-1;for(let v=0;v<a;++v){const y=s[v];if(-1===y){if(-1!==u)throw new Error(Fye(u,v));u=v,l.push(1)}else{if(y<0)throw new Error(Lye(v,y));c*=y,l.push(y)}}if(-1!==u){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const v=Math.trunc(r/c);if(c*v!==r)throw new Error($ye(i,l));l[u]=v}if(Le(l)!==r)throw new Error(Bye(i,l));const h=i.length,p=[];if(h>0){p[h-1]=1;for(let v=h-2;v>=0;--v)p[v]=p[v+1]*i[v+1]}const f=[];if(a>0){f[a-1]=1;for(let v=a-2;v>=0;--v)f[v]=f[v+1]*l[v+1]}const g=fo(e,o*a);for(let v=0;v<o;++v){let y=0;for(let w=0;w<h;++w)y+=t[v*h+w]*p[w];for(let w=0;w<a;++w)g[v*a+w]=Math.trunc(y/f[w]),y%=f[w]}return[g,[o,a],l]}const QDt={kernelName:eG,backendName:"cpu",kernelFunc:function ZDt(t){const{inputs:n,backend:e}=t,{inputIndices:i,inputShape:s,newShape:r}=n;if(2!==i.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${i.shape}`);if(1!==s.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${s.shape}`);if(1!==r.shape.length)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const o=Array.from(e.data.get(s.dataId).values),a=e.data.get(i.dataId).values,l=Array.from(e.data.get(r.dataId).values),[c,u,d]=iCe(a,i.shape,i.dtype,o,l);return[e.makeTensorInfo(u,i.dtype,c),e.makeTensorInfo([d.length],r.dtype,new Int32Array(d))]}};function VW(t,n,e,i,s,r=!1,o=0){const a=i.length,l=[n[0],t.length/n[0]],c=l[1],d=a>0?s[a-1]+1:0;if(d<0)throw new Error("segment ids must be >= 0");const h=n.slice();h[0]=d;const f=fo(e,h.reduce((x,T)=>x*T,1));if(0===a)return d>0&&f.fill(o),[f,h];if(d<=0)throw new Error("segment ids must be >= 0");let g=0,v=1,y=0,w=s[g];for(;;){let x=0;if(v<a){if(x=s[v],w===x){++v;continue}if(w>=x)throw new Error("segment ids are not increasing")}if(w<0||w>=d)throw new Error(zye(w,d));w>y&&f.fill(o,y*c,w*c);for(let T=g;T<v;++T){const k=i[T];if(k<0||k>=l[0])throw new Error(Uye(T,i[T],l[0]));for(let R=0;R<c;R++)f[w*c+R]+=t[k*c+R]}if(r)for(let T=0;T<c;T++)f[w*c+T]/=v-g;if(g=v,++v,y=w+1,w=x,v>a)break}return y<d&&f.fill(o,y*c,d*c),[f,h]}const eAt={kernelName:tG,backendName:"cpu",kernelFunc:function JDt(t){const{inputs:n,backend:e}=t,{data:i,indices:s,segmentIds:r}=n;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.shape.length)throw new Error(`Indices should be a vector but received shape\n          ${s.shape}`);if(1!==r.shape.length)throw new Error(`Segment ids should be a vector but received shape\n          ${r.shape}`);if(s.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const o=e.data.get(i.dataId).values,a=e.data.get(s.dataId).values,l=e.data.get(r.dataId).values,[c,u]=VW(o,i.shape,i.dtype,a,l,!0);return e.makeTensorInfo(u,i.dtype,c)}},nAt={kernelName:nG,backendName:"cpu",kernelFunc:function tAt(t){const{inputs:n,backend:e}=t,{data:i,indices:s,segmentIds:r}=n;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.shape.length)throw new Error(`Indices should be a vector but received shape\n         ${s.shape}`);if(1!==r.shape.length)throw new Error(`Segment ids should be a vector but received shape\n         ${r.shape}`);if(s.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const o=e.data.get(i.dataId).values,a=e.data.get(s.dataId).values,l=e.data.get(r.dataId).values,[c,u]=VW(o,i.shape,i.dtype,a,l);return e.makeTensorInfo(u,i.dtype,c)}},sAt={kernelName:iG,backendName:"cpu",kernelFunc:function iAt(t){const{inputs:n,backend:e,attrs:i}=t,{sparseIndices:s,sparseValues:r,defaultValue:o}=n,{outputShape:a}=i,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=Bv(0,s,a),p=!1,f=e.bufferSync(s);let g;switch(r.dtype){case"bool":g=Yv(f,e.bufferSync(r),a,h,u,c,l,d,!!e.data.get(o.dataId).values[0],p);break;case"float32":case"int32":g=Yv(f,e.bufferSync(r),a,h,u,c,l,d,e.data.get(o.dataId).values[0],p);break;case"string":g=Yv(f,e.bufferSync(r),a,h,u,c,l,d,I_(e.data.get(o.dataId).values[0]),p);break;default:throw new Error(`Unsupported type ${r.dtype}`)}return e.makeTensorInfo(a,g.dtype,g.values)}},oAt={kernelName:lL,backendName:"cpu",kernelFunc:function rAt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{numOrSizeSplits:r,axis:o}=i,a=zi(o,s.shape)[0],l=gH(s,r,a),c=new Array(s.shape.length).fill(0),u=s.shape.slice();return l.map(d=>{const h=[...u];h[a]=d;const p=Xv({inputs:{x:s},backend:e,attrs:{begin:c,size:h}});return c[a]+=d,p})}},aAt=kp(t=>Math.sqrt(t)),lAt=Hs(YI,t=>Math.sqrt(t)),cAt={kernelName:YI,backendName:"cpu",kernelFunc:lAt},uAt={kernelName:sG,backendName:"cpu",kernelFunc:({inputs:t,backend:n})=>{const{x:e}=t,i=n;dn(e,"square");const s=i.data.get(e.dataId).values,r=new Float32Array(s.length);for(let a=0;a<s.length;++a){const l=s[a];r[a]=l*l}return{dataId:i.write(r,e.shape,e.dtype),shape:e.shape,dtype:e.dtype}}},dAt=vo((t,n)=>{const e=t-n;return e*e}),hAt=na(ZI,dAt),pAt={kernelName:ZI,backendName:"cpu",kernelFunc:hAt},sCe=kp((t,n)=>{const{pattern:e,replaceGlobal:i,rewrite:s}=n;return t.replace(new RegExp(e,i?"g":""),s)}),fAt=X_(uL,sCe),mAt={kernelName:uL,backendName:"cpu",kernelFunc:fAt},_At=Hs(n2,(t,n)=>{const e=n;return isNaN(t)?NaN:t>0?1:e.alpha}),gAt={kernelName:n2,backendName:"cpu",kernelFunc:_At};function rCe(t,n,e,i){const s=Di(t,n.dtype);for(let r=0;r<s.size;r++){const o=s.indexToLoc(r),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*e[l]+i[l];s.set(n.get(...a),...o)}return s}const vAt={kernelName:rG,backendName:"cpu",kernelFunc:function bAt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{begin:r,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=i;dn(s,"stridedSlice");const{finalShapeSparse:p,finalShape:f,isIdentity:g,sliceDim0:v,isSimpleSlice:y,begin:w,end:x,strides:T}=sj(s.shape,r,o,a,l,c,u,d,h);let k;if(g)k=yr({inputs:{x:s},backend:e,attrs:{shape:f}});else if(v||y){U(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const R=tj(w,x,T),N=Xv({inputs:{x:s},backend:e,attrs:{begin:w,size:R}});k=yr({inputs:{x:N},backend:e,attrs:{shape:f}}),e.disposeIntermediateTensorInfo(N)}else{const N=rCe(p,e.bufferSync(s),T,w);k=e.makeTensorInfo(f,N.dtype,N.values)}return k}};class yAt{constructor(n,e,i,s,r,o){this.separator=T_(n),this.nGramWidths=e,this.leftPad=T_(i),this.rightPad=T_(s),this.padWidth=r,this.preserveShort=o}getPadWidth(n){return Math.min(this.padWidth<0?n-1:this.padWidth,n-1)}getNumNGrams(n,e){const i=this.getPadWidth(e);return Math.max(0,n+2*i-e+1)}createNGrams(n,e,i,s,r,o){for(let a=0;a<r;++a){const l=this.getPadWidth(o),c=Math.max(0,l-a),u=Math.max(0,l-(r-(a+1))),d=o-(c+u),h=e+(c>0?0:a-l);let p=0;p+=c*this.leftPad.length;for(let w=0;w<d;++w)p+=n[h+w].length;p+=u*this.rightPad.length,p+=(c+u+d-1)*this.separator.length,i[s+a]=new Uint8Array(p);const g=i[s+a];let v=0;const y=w=>w.forEach(x=>g[v++]=x);for(let w=0;w<c;++w)y(this.leftPad),y(this.separator);for(let w=0;w<d-1;++w)y(n[h+w]),y(this.separator);if(d>0){y(n[h+d-1]);for(let w=0;w<u;++w)y(this.separator),y(this.rightPad)}else{for(let w=0;w<u-1;++w)y(this.rightPad),y(this.separator);y(this.rightPad)}}}compute(n,e){const i=n.length,s=e.length;if(s>0){let l=e[0];if(0!==l)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<s;++c){let u=e[c]>=l;if(u=u&&e[c]<=i,!u)throw new Error(`Invalid split value ${e[c]}, must be in [${l}, ${i}]`);l=e[c]}if(l!==i)throw new Error(`Last split value must be data size. Expected ${i}, got ${l}`)}const r=s-1,o=fo("int32",s);if(0===i||0===s){const l=new Array(i);for(let c=0;c<=r;++c)o[c]=0;return[l,o]}o[0]=0;for(let l=1;l<=r;++l){const c=e[l]-e[l-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&0===u&&(u=1),o[l]=o[l-1]+u}const a=new Array(o[r]);for(let l=0;l<r;++l){const c=e[l];let u=o[l];if(this.nGramWidths.forEach(d=>{const p=this.getNumNGrams(e[l+1]-e[l],d);this.createNGrams(n,c,a,u,p,d),u+=p}),this.preserveShort&&u===o[l]){const d=e[l+1]-e[l];if(0===d)continue;this.createNGrams(n,c,a,u,1,d+2*this.padWidth)}}return[a,o]}}function oCe(t,n,e,i,s,r,o,a){return new yAt(e,i,s,r,o,a).compute(t,n)}const CAt={kernelName:oG,backendName:"cpu",kernelFunc:function wAt(t){const{inputs:n,backend:e,attrs:i}=t,{separator:s,nGramWidths:r,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=i,{data:u,dataSplits:d}=n,h=e.data.get(u.dataId).values,p=e.data.get(d.dataId).values,[f,g]=oCe(h,p,s,r,o,a,l,c);return[e.makeTensorInfo([f.length],"string",f),e.makeTensorInfo(d.shape,"int32",g)]}};function SAt(t,n,e,i){if(!t.length)return;if(0===n.length){for(let r=0;r<t.length;++r)i.push(t.subarray(r,r+1));return}if(1===n.length){const r=n[0];let o=t.indexOf(r);for(;-1!==o;){const a=t.subarray(0,o);(!e||0!==a.length)&&i.push(a),o=(t=t.subarray(o+1)).indexOf(r)}return void((!e||0!==t.length)&&i.push(t))}let s=0;for(let r=0;r<t.length+1;r++)if(r===t.length||-1!==n.indexOf(t[r])){const o=t.subarray(s,r);(!e||0!==o.length)&&i.push(o),s=r+1}}function aCe(t,n,e){const i=t.length,s=[];let r=0,o=0;const a=new Array(i);for(let h=0;h<i;++h){const p=s.length;SAt(t[h],n,e,s);const f=s.length-p;a[h]=f,r+=f,o=Math.max(o,f)}const l=fo("int32",2*r),c=new Array(r),u=[i,o];let d=0;for(let h=0;h<i;++h)for(let p=0;p<a[h];++p)l[2*d]=h,l[2*d+1]=p,c[d]=s[d],++d;return[l,c,u]}const EAt={kernelName:aG,backendName:"cpu",kernelFunc:function xAt(t){const{inputs:n,backend:e,attrs:i}=t,{skipEmpty:s}=i,{input:r,delimiter:o}=n;if("string"!==r.dtype)throw new Error("Input must be of datatype string");if(1!==r.shape.length)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(0!==o.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values[0],[c,u,d]=aCe(a,l,s),h=u.length;return[e.makeTensorInfo([h,2],"int32",c),e.makeTensorInfo([h],"string",u),e.makeTensorInfo([2],"int32",new Int32Array(d))]}};function lCe(t,n){const e=fo("int32",t.length);for(let i=0;i<t.length;++i)e[i]=Bpt(t[i]).modulo(n).getLowBitsUnsigned();return e}const IAt={kernelName:lG,backendName:"cpu",kernelFunc:function TAt(t){const{inputs:n,backend:e,attrs:i}=t,{numBuckets:s}=i,{input:r}=n;if("string"!==r.dtype)throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const a=lCe(e.data.get(r.dataId).values,s);return e.makeTensorInfo(r.shape,"int32",a)}},kAt=Hs(JI,t=>Math.tan(t)),DAt={kernelName:JI,backendName:"cpu",kernelFunc:kAt},AAt=Hs(e2,t=>Math.tanh(t)),OAt={kernelName:ZU,backendName:"cpu",kernelFunc:function NAt(t){const{inputs:n,backend:e}=t,{tensor:i,indices:s,updates:r}=n,{sliceRank:o,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=Bv(0,s,i.shape),h=e.bufferSync(s),p=e.bufferSync(r),f=e.bufferSync(i),g=Yv(h,p,i.shape,u,l,a,o,c,f,!1);return e.makeTensorInfo(i.shape,g.dtype,g.values)}};function cCe(t,n){const e=new Array(t.rank);for(let s=0;s<e.length;s++)e[s]=t.shape[s]*n[s];const i=Di(e,t.dtype);for(let s=0;s<i.values.length;++s){const r=i.indexToLoc(s),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=r[l]%t.shape[l];const a=t.locToIndex(o);i.values[s]=t.values[a]}return i}const FAt={kernelName:t2,backendName:"cpu",kernelFunc:function RAt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{reps:r}=i;dn(s,"tile");const o=cCe(e.bufferSync(s),r);return e.makeTensorInfo(o.shape,o.dtype,o.values)}},z2=(t,n)=>{const e=n.value-t.value;return 0===e?t.index-n.index:e};function uCe(t,n,e=0,i=t.length-1){for(;i>e;){if(i-e>600){const a=i-e+1,l=n-e+1,c=Math.log(a),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2);uCe(t,n,Math.max(e,Math.floor(n-l*u/a+d)),Math.min(i,Math.floor(n+(a-l)*u/a+d)))}const s=t[n];let r=e,o=i;for(w_(t,e,n),z2(t[i],s)>0&&w_(t,e,i);r<o;){for(w_(t,r,o),r++,o--;z2(t[r],s)<0;)r+=1;for(;z2(t[o],s)>0;)o-=1}0===z2(t[e],s)?w_(t,e,o):(o+=1,w_(t,o,i)),o<=n&&(e=o+1),n<=o&&(i=o-1)}}function dCe(t,n,e,i,s){const r=n[n.length-1],[o,a]=[t.length/r,r],l=Ra(e,o*i),c=Ra("int32",o*i);for(let d=0;d<o;d++){const h=d*a,p=t.subarray(h,h+a);let f=new Array(p.length);p.forEach((w,x)=>f[x]={value:w,index:x}),i<f.length&&(uCe(f,i),f=f.slice(0,i)),s&&f.sort(z2);const g=d*i,v=l.subarray(g,g+i),y=c.subarray(g,g+i);for(let w=0;w<i;w++)v[w]=f[w].value,y[w]=f[w].index}const u=n.slice();return u[u.length-1]=i,[Di(u,e,l),Di(u,"int32",c)]}const PAt={kernelName:cG,backendName:"cpu",kernelFunc:function LAt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{k:r,sorted:o}=i;dn(s,"topk");const a=e.data.get(s.dataId).values,[l,c]=dCe(a,s.shape,s.dtype,r,o);return[e.makeTensorInfo(l.shape,l.dtype,l.values),e.makeTensorInfo(c.shape,c.dtype,c.values)]}},BAt={kernelName:uG,backendName:"cpu",kernelFunc:function $At(t){const{inputs:n,attrs:e,backend:i}=t,{image:s,transforms:r}=n,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=e,[u,d,h,p]=s.shape,[f,g]=c??[d,h],v=[u,f,g,p],y=xn(s.shape),w=y[0],x=y[1],T=y[2],k=xn(v),R=k[0],N=k[1],D=k[2],F=Ra(s.dtype,Le(v));F.fill(l);const $=i.data.get(s.dataId).values,j=i.data.get(r.dataId).values;for(let Y=0;Y<u;++Y){const ce=1===r.shape[0]?j:j.subarray(8*Y,8*Y+8);for(let Ce=0;Ce<f;++Ce)for(let Z=0;Z<g;++Z)for(let le=0;le<p;++le){let te;const be=ce[6]*Z+ce[7]*Ce+1;if(0===be)continue;const Te=(ce[3]*Z+ce[4]*Ce+ce[5])/be,et=hCe((ce[0]*Z+ce[1]*Ce+ce[2])/be,h,a),We=hCe(Te,d,a);switch(o){case"nearest":te=jAt($,d,h,w,x,T,Y,We,et,le,l);break;case"bilinear":te=HAt($,d,h,w,x,T,Y,We,et,le,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}F[Y*R+Ce*N+Z*D+le]=te}return i.makeTensorInfo(v,s.dtype,F)}return{dataId:i.write(F,v,s.dtype),shape:s.shape,dtype:s.dtype}}};function hCe(t,n,e){switch(e){case"reflect":return function VAt(t,n){let e=t;if(e<0)if(n<=1)e=0;else{const i=2*n;e<i&&(e=i*Math.trunc(-e/i)+e),e=e<-n?e+i:-e-1}else if(e>n-1)if(n<=1)e=0;else{const i=2*n;e-=i*Math.trunc(e/i),e>=n&&(e=i-e-1)}return Sv(0,e,n-1)}(t,n);case"wrap":return function zAt(t,n){let e=t;return e<0?n<=1?e=0:e+=n*(Math.trunc(-e/(n-1))+1):e>n-1&&(n<=1?e=0:e-=n*Math.trunc(e/(n-1))),Sv(0,e,n-1)}(t,n);case"nearest":return function GAt(t,n){return Sv(0,t,n-1)}(t,n);default:return function UAt(t){return t}(t)}}function U2(t,n,e,i,s,r,o,a,l,c,u){return 0<=a&&a<n&&0<=l&&l<e?t[o*i+a*s+l*r+c]:u}function jAt(t,n,e,i,s,r,o,a,l,c,u){return U2(t,n,e,i,s,r,o,Math.round(a),Math.round(l),c,u)}function HAt(t,n,e,i,s,r,o,a,l,c,u){const d=Math.floor(a),h=Math.floor(l),p=d+1,f=h+1;return(p-a)*((f-l)*U2(t,n,e,i,s,r,o,d,h,c,u)+(l-h)*U2(t,n,e,i,s,r,o,d,f,c,u))+(a-d)*((f-l)*U2(t,n,e,i,s,r,o,p,h,c,u)+(l-h)*U2(t,n,e,i,s,r,o,p,f,c,u))}function pCe(t,n,e,i){const s=zi(n,e)[0],r=[1,e[0],1];for(let f=0;f<s;f++)r[0]*=e[f];r[1]=e[s];for(let f=s+1;f<e.length;f++)r[2]*=e[f];const o=new Map,a=new Int32Array(e[s]),l=new Ko(r,i,t),c=[],u=1===r[0]&&1===r[2];for(let f=0;f<e[s];f++){let g;if(u)g=t[f].toString();else{const y=[];for(let w=0;w<r[0];w++)for(let x=0;x<r[2];x++)y.push(l.get(w,f,x));g=y.join(",")}const v=o.get(g);if(null!=v)a[f]=v;else{const y=o.size;o.set(g,y),a[f]=y,c.push(f)}}const d=r.slice();d[1]=o.size;const h=new Ko(d,i);c.forEach((f,g)=>{for(let v=0;v<r[0];v++)for(let y=0;y<r[2];y++)h.set(l.get(v,f,y),v,g,y)});const p=e.slice();return p[s]=d[1],{outputValues:h.values,outputShape:p,indices:a}}const qAt={kernelName:dG,backendName:"cpu",kernelFunc:function WAt(t){const{inputs:n,attrs:e,backend:i}=t,{axis:s}=e,{x:r}=n;dn(r,"unique");const o=i.data.get(r.dataId).values,{outputValues:a,outputShape:l,indices:c}=pCe(o,s,r.shape,r.dtype);return[i.makeTensorInfo(l,r.dtype,a),i.makeTensorInfo([c.length],"int32",c)]}},XAt={kernelName:dL,backendName:"cpu",kernelFunc:function KAt(t){const{inputs:n,backend:e,attrs:i}=t,{value:s}=n;let{axis:r}=i;r<0&&(r+=s.shape.length);const o=s.shape.length,a=s.shape[r],l=new Array(o-1);let c=0;for(let p=0;p<o;p++)p!==r&&(l[c++]=s.shape[p]);const u=new Array(o).fill(0),d=s.shape.slice();d[r]=1;const h=new Array(a);for(let p=0;p<h.length;p++){u[r]=p;const f=Xv({inputs:{x:s},backend:e,attrs:{begin:u,size:d}});h[p]=yr({inputs:{x:f},backend:e,attrs:{shape:l}}),e.disposeIntermediateTensorInfo(f)}return h}},ZAt={kernelName:hL,backendName:"cpu",kernelFunc:function YAt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,segmentIds:r}=n,{numSegments:o}=i;dn(s,"unsortedSegmentSum");const c=[],u=[],d=s.shape.length-r.shape.length;let h=r;for(let f=0;f<d;++f){const g=P3({inputs:{input:h},backend:e,attrs:{dim:f+1}});h=g,u.push(g)}for(let f=0;f<o;++f){const g=E_(f,"int32"),v=e.makeTensorInfo([],"int32",g),y=ywe({inputs:{a:v,b:h},backend:e}),w=Y_({inputs:{x:y},backend:e,attrs:{dtype:"float32"}}),x=L3({inputs:{a:w,b:s},backend:e}),T=V2({inputs:{x},backend:e,attrs:{axis:0,keepDims:!1}});c.push(T),u.push(v),u.push(y),u.push(w),u.push(x),u.push(T)}const p=Gwe({inputs:c,backend:e,attrs:{axis:0}});return u.forEach(f=>e.disposeIntermediateTensorInfo(f)),p}},QAt=[jEt,HEt,qEt,XEt,VEt,ZEt,eTt,nTt,sTt,oTt,lTt,uTt,hTt,mTt,gTt,yTt,CTt,xTt,TTt,UEt,kTt,MTt,OTt,FTt,PTt,$Et,BTt,zTt,LEt,UTt,jTt,HTt,qTt,XTt,ZTt,JTt,tIt,iIt,rIt,aIt,cIt,dIt,pIt,mIt,_It,bIt,yIt,CIt,SIt,xIt,EIt,IIt,NIt,IEt,RIt,FIt,GIt,jIt,HIt,qIt,t2t,n2t,s2t,o2t,c2t,d2t,p2t,m2t,g2t,v2t,w2t,kEt,S2t,GTt,E2t,I2t,D2t,DEt,M2t,O2t,F2t,P2t,B2t,U2t,j2t,q2t,X2t,Z2t,Q2t,ekt,nkt,skt,okt,lkt,ukt,hkt,fkt,_kt,bkt,wkt,xkt,DIt,Tkt,Dkt,Nkt,Fkt,Pkt,Bkt,zkt,Ukt,jwe,Wkt,MEt,Kkt,nDt,sDt,oDt,lDt,PEt,LW,uDt,NEt,OEt,zEt,hDt,fDt,_Dt,bDt,yDt,wDt,SDt,EDt,IDt,NDt,RDt,$Dt,FEt,VDt,UDt,jDt,DTt,Ckt,WDt,KDt,YDt,QDt,eAt,nAt,sAt,oAt,cAt,uAt,pAt,mAt,gAt,vAt,CAt,EAt,IAt,YIt,AIt,DAt,{kernelName:e2,backendName:"cpu",kernelFunc:AAt},OAt,FAt,PAt,BAt,QEt,qAt,XAt,ZAt,Vkt];for(const t of QAt)mG(t);const Z_={},V3={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function fh(t,n){if(!(t in Z_)||null!=n){const i=function tMt(t,n){if(1!==t&&2!==t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const e=n??function eMt(t){if(!Ie().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&2===t)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return e.addEventListener("webglcontextlost",i=>{i.preventDefault(),delete Z_[t]},!1),Ie().getBool("SOFTWARE_WEBGL_ENABLED")&&(V3.failIfMajorPerformanceCaveat=!1),1===t?e.getContext("webgl",V3)||e.getContext("experimental-webgl",V3):e.getContext("webgl2",V3)}(t,n);if(null===i)return console.log("Could not get context for WebGL version",t),null;Z_[t]=i}const e=Z_[t];return null==e||e.isContextLost()?(delete Z_[t],fh(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Z_[t])}var z3=function(t){return t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH",t}(z3||{}),hd=function(t){return t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD",t}(hd||{}),rl=function(t){return t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16",t}(rl||{});function G2(t,n){return[n,t]}function U3(t){const n=Le(t);return J9(Math.ceil(n/4))}function pC(t,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(t/2))]}function zW(t,n){const e=t;let i,s,r,o,a,l,c,u,d,h;return 2===Ie().getNumber("WEBGL_VERSION")?(i=e.R32F,s=e.R16F,r=e.RGBA16F,o=e.RGBA32F,a=e.RED,c=4,u=1,d=e.HALF_FLOAT,h=e.FLOAT,l=e.RGBA8):(i=t.RGBA,s=t.RGBA,r=t.RGBA,o=e.RGBA,a=t.RGBA,c=4,u=4,d=null!=n?n.HALF_FLOAT_OES:null,h=t.FLOAT,l=t.RGBA),{internalFormatFloat:i,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:r,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:h}}function Bt(t,n){const e=n();return Ie().getBool("DEBUG")&&function sMt(t){const n=t.getError();if(n!==t.NO_ERROR)throw new Error("WebGL Error: "+function lMt(t,n){switch(n){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${n}`}}(t,n))}(t),e}function aMt(t){return!!(Ie().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===t||5.96e-8<Math.abs(t)&&Math.abs(t)<65504)}function G3(t,n){return Xf(t,()=>t.getExtension(n),'Extension "'+n+'" not supported on this browser.')}const dMt=/ERROR: [0-9]+:([0-9]+):/g;function fCe(t,n){const e=dMt.exec(n);if(null==e)return console.log(`Couldn't parse line number in error: ${n}`),void console.log(t);const i=+e[1],s=t.split("\n"),r=s.length.toString().length+2,o=s.map((d,h)=>Nw((h+1).toString(),r)+d);let a=0;for(let d=0;d<o.length;d++)a=Math.max(o[d].length,a);const l=o.slice(0,i-1),c=o.slice(i-1,i),u=o.slice(i);console.log(l.join("\n")),console.log(n.split("\n")[0]),console.log(`%c ${Nw(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function UW(t,n){if(Bt(t,()=>t.validateProgram(n)),!1===t.getProgramParameter(n,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function mCe(t,n,e,i,s,r,o){const a=t.getAttribLocation(n,e);return-1!==a&&(Bt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,i)),Bt(t,()=>t.vertexAttribPointer(a,s,t.FLOAT,!1,r,o)),Bt(t,()=>t.enableVertexAttribArray(a)),!0)}function CMt(t,n,e,i){Bt(t,()=>function vMt(t,n,e){(function gCe(t,n){const e=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,i=n+t.TEXTURE0;if(i<t.TEXTURE0||i>e)throw new Error(`textureUnit must be in [gl.TEXTURE0, gl.TEXTURE${e}].`)})(t,e),Bt(t,()=>t.activeTexture(t.TEXTURE0+e)),Bt(t,()=>t.bindTexture(t.TEXTURE_2D,n))}(t,n,i)),Bt(t,()=>t.uniform1i(e,i))}function GW(t,n,e){Bt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Bt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0))}function _Ce(t,n){Bt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Bt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function j3(t){const n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function SMt(t,n){switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${n}`}}(t,n))}function Xf(t,n,e){const i=Bt(t,()=>n());if(null==i)throw new Error(e);return i}function fC(t,n=2){return Le(t.slice(0,t.length-n))}function mC(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function H3(t){let n=[1,1,1];return 0===t.length||1===t.length&&1===t[0]||(n=[fC(t),...mC(t)]),n}function W3(t){return t%2==0}function q3(t,n){if(es(t=t.slice(-2),n=n.slice(-2))||!t.length||!n.length||0===t[0]||0===t[1]||0===n[0]||0===n[1])return!0;if(t.length!==n.length){const e=t[t.length-1],i=n[n.length-1];if(e===i||W3(e)&&W3(i)&&(1===t[0]||1===n[0]))return!0}return t[1]===n[1]&&W3(t[0])&&W3(n[0])}let K3,X3;function pd(t,n){return null!=t.getExtension(n)}function bCe(t){try{if(null!=fh(t))return!0}catch(n){return console.log("Error when getting WebGL context: ",n),!1}return!1}function jW(t){const n=zW(t),e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(r),o}function j2(t,n){Array.isArray(t)||(t=[t]),t.forEach(e=>{null!=e&&U("complex64"!==e.dtype,()=>`${n} does not support complex64 tensors in the WebGL backend.`)})}const fn=Ie();function Cl(){let t,n,e,i,s,r,o,a,l,c;return 2===Ie().getNumber("WEBGL_VERSION")?(t="#version 300 es",n="in",e="out",i="in",s="texture",r="outputColor",o="out vec4 outputColor;",a=Ie().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",n="attribute",e="varying",i="varying",s="texture2D",r="gl_FragColor",o="",a="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:n,varyingVs:e,varyingFs:i,texture2D:s,output:r,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}function Zv(t,n,e="index"){const i=xn(n);return i.map((s,r)=>`int ${t[r]} = ${e} / ${s}; ${r===i.length-1?`int ${t[r+1]} = ${e} - ${t[r]} * ${s}`:`index -= ${t[r]} * ${s}`};`).join("")}function Y3(t,n,e="index"){const i=xn(n);return i.map((s,r)=>`int ${t[r]} = ${e} / outShapeStrides[${r}]; ${r===i.length-1?`int ${t[r+1]} = ${e} - ${t[r]} * outShapeStrides[${r}]`:`index -= ${t[r]} * outShapeStrides[${r}]`};`).join("")}function HW(t){const n=xn(t).map(e=>e.toString());return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${n[0]} + coords.y * ${n[1]} + coords.z;\n  }\n`}fn.registerFlag("HAS_WEBGL",()=>fn.getNumber("WEBGL_VERSION")>0),fn.registerFlag("WEBGL_VERSION",()=>bCe(2)?2:bCe(1)?1:0),fn.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),fn.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===fn.get("WEBGL_VERSION")),fn.registerFlag("WEBGL_CPU_FORWARD",()=>!0),fn.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),fn.registerFlag("WEBGL_PACK",()=>fn.getBool("HAS_WEBGL")),fn.registerFlag("WEBGL_PACK_NORMALIZATION",()=>fn.getBool("WEBGL_PACK")),fn.registerFlag("WEBGL_PACK_CLIP",()=>fn.getBool("WEBGL_PACK")),fn.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>fn.getBool("WEBGL_PACK")),fn.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>fn.getBool("WEBGL_PACK")),fn.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>fn.getBool("WEBGL_PACK")),fn.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>fn.getBool("WEBGL_PACK")),fn.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>fn.getBool("WEBGL_PACK")),fn.registerFlag("WEBGL_PACK_REDUCE",()=>fn.getBool("WEBGL_PACK")),fn.registerFlag("WEBGL_LAZILY_UNPACK",()=>fn.getBool("WEBGL_PACK")),fn.registerFlag("WEBGL_CONV_IM2COL",()=>fn.getBool("WEBGL_PACK")),fn.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>fn.getBool("WEBGL_PACK")),fn.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>function EMt(t){if(null==K3){const n=fh(t);K3=n.getParameter(n.MAX_TEXTURE_SIZE)}return K3}(fn.getNumber("WEBGL_VERSION"))),fn.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>function TMt(t){if(null==X3){const n=fh(t);X3=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,X3)}(fn.getNumber("WEBGL_VERSION"))),fn.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=fn.getNumber("WEBGL_VERSION");return 0===t?0:function IMt(t){if(0===t)return 0;let n;const e=fh(t);return n=pd(e,"EXT_disjoint_timer_query_webgl2")&&2===t?2:pd(e,"EXT_disjoint_timer_query")?1:0,n}(t)}),fn.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>fn.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!pbe()),fn.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>function kMt(t){if(0===t)return!1;const n=fh(t);if(1===t){if(!pd(n,"OES_texture_float"))return!1}else if(!pd(n,"EXT_color_buffer_float"))return!1;return jW(n)}(fn.getNumber("WEBGL_VERSION"))),fn.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!fn.getBool("WEBGL_FORCE_F16_TEXTURES")&&fn.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),fn.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>function DMt(t){if(0===t)return!1;const n=fh(t);if(1!==t){if(pd(n,"EXT_color_buffer_float"))return jW(n);const i="EXT_color_buffer_half_float";if(pd(n,i)){const s=n.getExtension(i);return function AMt(t,n){const e=zW(t,n),i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatHalfFloat,1,1,0,e.textureFormatFloat,e.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(i),t.deleteFramebuffer(o),a}(n,s)}return!1}return!(!pd(n,"OES_texture_float")||!pd(n,"WEBGL_color_buffer_float"))&&jW(n)}(fn.getNumber("WEBGL_VERSION"))),fn.registerFlag("WEBGL_FENCE_API_ENABLED",()=>function MMt(t){return 2===t&&null!=fh(t).fenceSync}(fn.getNumber("WEBGL_VERSION"))),fn.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>fn.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),fn.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if("number"!=typeof t)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&-1!==t)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)}),fn.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>pbe()?1:-1,t=>{if("number"!=typeof t)throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&-1!==t)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)}),fn.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),fn.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),fn.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),fn.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),fn.registerFlag("WEBGL_EXP_CONV",()=>!1),fn.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>fn.getBool("IS_TEST")),fn.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),fn.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),fn.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1),fn.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);const vCe="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:yCe}=dt;function RMt(t,n,e){const i=[];if(t.forEach(p=>{const f=Le(p.shapeInfo.logicalShape);if(p.shapeInfo.isUniform?i.push(`uniform float ${p.name}${f>1?`[${f}]`:""};`):(i.push(`uniform sampler2D ${p.name};`),i.push(`uniform int offset${p.name};`)),e.enableShapeUniforms){const{uniformShape:g}=qW(e.packedInputs,p.shapeInfo.logicalShape,p.shapeInfo.texShape);switch(g.length){case 1:i.push(`uniform int ${p.name}Shape;`);break;case 2:i.push(`uniform ivec2 ${p.name}Shape;`);break;case 3:i.push(`uniform ivec3 ${p.name}Shape;`);break;case 4:i.push(`uniform ivec4 ${p.name}Shape;`)}i.push(`uniform ivec2 ${p.name}TexShape;`)}}),e.enableShapeUniforms){switch(n.logicalShape.length){case 1:i.push("uniform int outShape;");break;case 2:i.push("uniform ivec2 outShape;"),i.push("uniform int outShapeStrides;");break;case 3:i.push("uniform ivec3 outShape;"),i.push("uniform ivec2 outShapeStrides;");break;case 4:i.push("uniform ivec4 outShape;"),i.push("uniform ivec3 outShapeStrides;")}i.push("uniform ivec2 outTexShape;")}e.customUniforms&&e.customUniforms.forEach(p=>{i.push(`uniform ${p.type} ${p.name}${p.arrayIndex?`[${p.arrayIndex}]`:""};`)});const s=i.join("\n"),r=t.map(p=>function FMt(t,n,e=!1,i){let s="";s+=e?wCe(t,i):_C(t,i);return t.shapeInfo.logicalShape.length<=n.logicalShape.length&&(s+=e?function fNt(t,n){const e=t.name,i=e.charAt(0).toUpperCase()+e.slice(1),s="get"+i+"AtOutCoords",r=t.shapeInfo.logicalShape.length,o=n.logicalShape.length,a=yCe(t.shapeInfo.logicalShape,n.logicalShape),l=Js(o),c=o-r;let u;const d=["x","y","z","w","u","v"];u=0===r?"":o<2&&a.length>=1?"coords = 0;":a.map(w=>`coords.${d[w+c]} = 0;`).join("\n");let h="";h=o<2&&r>0?"coords":t.shapeInfo.logicalShape.map((w,x)=>`coords.${d[x+c]}`).join(", ");let p="return outputValue;";const g=1===Le(t.shapeInfo.logicalShape),y=1===Le(n.logicalShape);if(1!==r||g||y){if(g&&!y)p=1===o?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(a.length){const w=r-2,x=r-1;a.indexOf(w)>-1&&a.indexOf(x)>-1?p="return vec4(outputValue.x);":a.indexOf(w)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(x)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${s}() {\n      ${l} coords = getOutputCoords();\n      ${u}\n      vec4 outputValue = get${i}(${h});\n      ${p}\n    }\n  `}(t,n):function mNt(t,n){const e=t.name,i=e.charAt(0).toUpperCase()+e.slice(1),s="get"+i+"AtOutCoords",a=t.shapeInfo.logicalShape.length,l=n.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&null==t.shapeInfo.flatOffset&&es(t.shapeInfo.texShape,n.texShape))return`\n      float ${s}() {\n        return sampleTexture(${e}, resultUV);\n      }\n    `;const c=Js(l),u=yCe(t.shapeInfo.logicalShape,n.logicalShape),d=l-a;let h;const p=["x","y","z","w","u","v"];h=0===a?"":l<2&&u.length>=1?"coords = 0;":u.map(g=>`coords.${p[g+d]} = 0;`).join("\n");let f="";return f=l<2&&a>0?"coords":t.shapeInfo.logicalShape.map((g,v)=>`coords.${p[v+d]}`).join(", "),`\n    float ${s}() {\n      ${c} coords = getOutputCoords();\n      ${h}\n      return get${i}(${f});\n    }\n  `}(t,n)),s}(p,n,e.packedInputs,e.enableShapeUniforms)).join("\n"),o=n.texShape,a=Cl(),l=function $Mt(t){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${t.texture2D}(textureSampler, uv).r;\n    }\n  `}(a);let c,u,d=function zMt(t){return`${t.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${t.varyingFs} vec2 resultUV;\n    ${t.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${t.defineSpecialNaN}\n    ${t.defineSpecialInf}\n    ${t.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${UMt}\n    ${GMt}\n    ${jMt}\n  `}(a);return n.isPacked?(c=function LMt(t,n,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function WMt(t,n,e){const i=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];return 1===i[0]?e?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${i[1]}.0);\n      }\n    `:1===i[1]?e?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${i[0]}.0);\n      }\n    `:e?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${i[0]}, ${i[1]}));\n      return 2 * (resTexRC.x * ${i[1]} + resTexRC.y);\n    }\n  `}(0,n,e);case 2:return function eNt(t,n,e){const i=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];if(es(t,n))return e?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${i[0]}, ${i[1]}));\n      }\n    `;const s=Math.ceil(t[1]/2);return e?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${i[0]}, ${i[1]}));\n\n      int index = resTexRC.x * ${i[1]} + resTexRC.y;\n      int r = 2 * (index / ${s});\n      int c = imod(index, ${s}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(t,n,e);case 3:return function KMt(t,n,e){if(e)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const i=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],s=Math.ceil(t[2]/2),r=s*Math.ceil(t[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${i[0]}, ${i[1]}));\n      int index = resTexRC.x * ${i[1]} + resTexRC.y;\n\n      int b = index / ${r};\n      index -= b * ${r};\n\n      int r = 2 * (index / ${s});\n      int c = imod(index, ${s}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(t,n,e);default:return function YMt(t,n,e){if(e)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const i=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],s=Math.ceil(t[t.length-1]/2),r=s*Math.ceil(t[t.length-2]/2);let o=r,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)o*=t[t.length-c-1],a=`\n      int b${c} = index / ${o};\n      index -= b${c} * ${o};\n    `+a,l=`b${c}, `+l;return`\n    ivec${t.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${i[0]}, ${i[1]}));\n      int index = resTexRC.x * ${i[1]} + resTexRC.y;\n\n      ${a}\n\n      int b = index / ${r};\n      index -= b * ${r};\n\n      int r = 2 * (index / ${s});\n      int c = imod(index, ${s}) * 2;\n\n      return ivec${t.length}(${l});\n    }\n  `}(t,n,e)}}(n.logicalShape,o,e.enableShapeUniforms),u=function VMt(t){return`\n    void setOutput(vec4 val) {\n      ${t.output} = val;\n    }\n  `}(a)):(c=function PMt(t,n,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function qMt(t,n,e){return 1===n[0]?e?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?e?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${n[0]}.0);\n      }\n    `:e?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return resTexRC.x * ${n[1]} + resTexRC.y;\n    }\n  `}(0,n,e);case 2:return function tNt(t,n,e){return es(t,n)?e?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));\n      }\n    `:1===t[1]?e?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${n[0]}, ${n[1]}));\n        int index = resTexRC.x * ${n[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===t[0]?e?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${n[0]}, ${n[1]}));\n        int index = resTexRC.x * ${n[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:e?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      int r = index / ${t[1]};\n      int c = index - r * ${t[1]};\n      return ivec2(r, c);\n    }\n  `}(t,n,e);case 3:return function XMt(t,n,e){if(e)return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${Y3(["r","c","d"],t)}\n    return ivec3(r, c, d);\n  }\n`;const i=Zv(["r","c","d"],t);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      ${i}\n      return ivec3(r, c, d);\n    }\n  `}(t,n,e);case 4:return function ZMt(t,n,e){if(e)return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${Y3(["r","c","d","d2"],t)}\n      return ivec4(r, c, d, d2);\n    }\n  `;const i=Zv(["r","c","d","d2"],t);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      ${i}\n      return ivec4(r, c, d, d2);\n    }\n  `}(t,n,e);case 5:return function QMt(t,n){const e=Zv(["r","c","d","d2","d3"],t);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${n[0]},\n                             ${n[1]}));\n\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${e}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(t,n);case 6:return function JMt(t,n){const e=Zv(["r","c","d","d2","d3","d4"],t);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${e}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(t,n);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}(n.logicalShape,o,e.enableShapeUniforms),u=function BMt(t){return`\n    void setOutput(float val) {\n      ${t.output} = vec4(val, 0, 0, 0);\n    }\n  `}(a)),e.packedInputs&&(d+=HMt),[d,l,u,s,c,r,e.userCode].join("\n")}function _C(t,n=!1){const e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function iNt(t,n){const e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`float ${i}() {return ${e};}`;const[s,r]=t.shapeInfo.texShape;if(1===s&&1===r)return`\n      float ${i}() {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const o=Qv(e);if(n)return`\n    float ${i}() {\n      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], ${o});\n      return sampleTexture(${e}, uv);\n    }\n  `;const[a,l]=t.shapeInfo.texShape;return`\n    float ${i}() {\n      vec2 uv = uvFromFlat(${a}, ${l}, ${o});\n      return sampleTexture(${e}, uv);\n    }\n  `}(t,n);case 1:return function rNt(t,n){const e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`\n      float ${i}(int index) {\n        ${gC(t)}\n      }\n    `;const s=t.shapeInfo.texShape,r=s[0],o=s[1];if(1===o&&1===r)return`\n      float ${i}(int index) {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const a=Qv(e);return 1===o?n?`\n      float ${i}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${e}TexShape[0]));\n        return sampleTexture(${e}, uv);\n      }\n    `:`\n      float ${i}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${r}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `:1===r?n?`\n      float ${i}(int index) {\n        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${e}TexShape[1]), 0.5);\n        return sampleTexture(${e}, uv);\n      }\n    `:`\n      float ${i}(int index) {\n        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);\n        return sampleTexture(${e}, uv);\n      }\n    `:n?`\n    float ${i}(int index) {\n      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], index + ${a});\n      return sampleTexture(${e}, uv);\n    }\n  `:`\n    float ${i}(int index) {\n      vec2 uv = uvFromFlat(${r}, ${o}, index + ${a});\n      return sampleTexture(${e}, uv);\n    }\n  `}(t,n);case 2:return function aNt(t,n){const e=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),r=t.shapeInfo.texShape;if(null!=r&&es(e,r))return n?`\n      float ${s}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n    float ${s}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${r[1]}.0, ${r[0]}.0);\n      return sampleTexture(${i}, uv);\n    }\n  `;const{newShape:o,keptDims:a}=C_(e);if(o.length<e.length){const p=["row","col"];return`\n      ${_C(bC(t,o),n)}\n      float ${s}(int row, int col) {\n        return ${s}(${vC(p,a)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${s}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${e[1]}, 1)));\n        ${gC(t)}\n      }\n    `;const c=r[0],u=r[1],d=Qv(i);return 1===u?n?`\n      float ${s}(int row, int col) {\n        float index = dot(vec3(row, col, ${d}), vec3(${i}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${i}TexShape[0]));\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n    float ${s}(int row, int col) {\n      float index = dot(vec3(row, col, ${d}), vec3(${e[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);\n      return sampleTexture(${i}, uv);\n    }\n  `:1===c?n?`\n      float ${s}(int row, int col) {\n        float index = dot(vec3(row, col, ${d}), vec3(${i}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${i}TexShape[1]), 0.5);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n    float ${s}(int row, int col) {\n      float index = dot(vec3(row, col, ${d}), vec3(${e[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);\n      return sampleTexture(${i}, uv);\n    }\n  `:n?`\n      float ${s}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${i}Shape[1] + col + ${d};\n        vec2 uv = uvFromFlat(${i}TexShape[0], ${i}TexShape[1], index);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n  float ${s}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${e[1]} + col + ${d};\n    vec2 uv = uvFromFlat(${c}, ${u}, index);\n    return sampleTexture(${i}, uv);\n  }\n`}(t,n);case 3:return function cNt(t,n){const e=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),r=e[1]*e[2],o=e[2],{newShape:a,keptDims:l}=C_(e);if(a.length<e.length){const v=["row","col","depth"];return`\n        ${_C(bC(t,a),n)}\n        float ${s}(int row, int col, int depth) {\n          return ${s}(${vC(v,l)});\n        }\n      `}if(t.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${r}, ${o}, 1)));\n        ${gC(t)}\n      }\n    `;const u=t.shapeInfo.texShape,d=u[0],h=u[1],p=t.shapeInfo.flatOffset;if(h===r&&null==p)return n?`\n      float ${s}(int row, int col, int depth) {\n        int stride1 = ${i}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${i}TexShape[1], ${i}TexShape[0]);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n        float ${s}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${o}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${h}.0, ${d}.0);\n          return sampleTexture(${i}, uv);\n        }\n      `;if(h===o&&null==p)return n?`\n      float ${s}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${i}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n    float ${s}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${e[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${d}.0);\n      return sampleTexture(${i}, uv);\n    }\n  `;const f=Qv(i);return n?`\n    float ${s}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${i}Shape[1] * ${i}Shape[2];\n      int stride1 = ${i}Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ${f};\n      vec2 uv = uvFromFlat(${i}TexShape[0], ${i}TexShape[1], index);\n      return sampleTexture(${i}, uv);\n    }\n    `:`\n      float ${s}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${r} + col * ${o} + depth + ${f};\n        vec2 uv = uvFromFlat(${d}, ${h}, index);\n        return sampleTexture(${i}, uv);\n      }\n  `}(t,n);case 4:return function dNt(t,n){const e=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),r=e[3],o=e[2]*r,a=e[1]*o,{newShape:l,keptDims:c}=C_(e);if(l.length<e.length){const x=["row","col","depth","depth2"];return`\n      ${_C(bC(t,l),n)}\n      float ${s}(int row, int col, int depth, int depth2) {\n        return ${s}(${vC(x,c)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${a}, ${o}, ${r}, 1)));\n        ${gC(t)}\n      }\n    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],p=d[1],f=`int stride2 = ${i}Shape[3];`,g=`int stride1 = ${i}Shape[2] * stride2;`,v=`int stride0 = ${i}Shape[1] * stride1;`;if(p===a&&null==u)return n?`\n      float ${s}(int row, int col, int depth, int depth2) {\n        ${f}\n        ${g}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${i}TexShape[1], ${i}TexShape[0]);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n      float ${s}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${o}, ${r}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${h}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `;if(p===r&&null==u)return n?`\n      float ${s}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${i}Shape[1] * ${i}Shape[2], ${i}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${i}TexShape[1], ${i}TexShape[0]);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n      float ${s}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${e[1]*e[2]}, ${e[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${h}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `;const y=Qv(i);return n?`\n    float ${s}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${f}\n      ${g}\n      ${v}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${i}TexShape[0], ${i}TexShape[1], index + ${y});\n      return sampleTexture(${i}, uv);\n    }\n  `:`\n    float ${s}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${a} + col * ${o} +\n          depth * ${r} + depth2;\n      vec2 uv = uvFromFlat(${h}, ${p}, index + ${y});\n      return sampleTexture(${i}, uv);\n    }\n  `}(t,n);case 5:return function hNt(t){const n=t.shapeInfo.logicalShape,e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1),s=n[4],r=n[3]*s,o=n[2]*r,a=n[1]*o,{newShape:l,keptDims:c}=C_(n);if(l.length<n.length){const v=["row","col","depth","depth2","depth3"];return`\n      ${_C(bC(t,l))}\n      float ${i}(int row, int col, int depth, int depth2, int depth3) {\n        return ${i}(${vC(v,c)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${a}, ${o}, ${r}, ${s})) +\n          depth3;\n        ${gC(t)}\n      }\n    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],p=d[1];if(p===a&&null==u)return`\n      float ${i}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${o}, ${r}, ${s}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${h}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `;if(p===s&&null==u)return`\n      float ${i}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${n[1]*n[2]*n[3]},\n               ${n[2]*n[3]}, ${n[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${h}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `;return`\n    float ${i}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${a} + col * ${o} + depth * ${r} +\n          depth2 * ${s} + depth3 + ${Qv(e)};\n      vec2 uv = uvFromFlat(${h}, ${p}, index);\n      return sampleTexture(${e}, uv);\n    }\n  `}(t);case 6:return function pNt(t){const n=t.shapeInfo.logicalShape,e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1),{newShape:s,keptDims:r}=C_(n);if(s.length<n.length){const y=["row","col","depth","depth2","depth3","depth4"];return`\n      ${_C(bC(t,s))}\n      float ${i}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${i}(${vC(y,r)});\n      }\n    `}const o=n[5],a=n[4]*o,l=n[3]*a,c=n[2]*l,u=n[1]*c;if(t.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${u}, ${c}, ${l}, ${a})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${o}, 1)));\n        ${gC(t)}\n      }\n    `;const d=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,p=h[0],f=h[1];if(f===u&&null==d)return`\n      float ${i}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${c}, ${l}, ${a}, ${o})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${p}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `;if(f===o&&null==d)return`\n      float ${i}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${n[1]*n[2]*n[3]*n[4]},\n               ${n[2]*n[3]*n[4]},\n               ${n[3]*n[4]},\n               ${n[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${p}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `;return`\n    float ${i}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${u} + col * ${c} + depth * ${l} +\n          depth2 * ${a} + depth3 * ${o} + depth4 + ${Qv(e)};\n      vec2 uv = uvFromFlat(${p}, ${f}, index);\n      return sampleTexture(${e}, uv);\n    }\n  `}(t);default:throw new Error(`${e.length}-D input sampling is not yet supported`)}}function wCe(t,n){switch(t.shapeInfo.logicalShape.length){case 0:return function nNt(t){const n=t.name;return`\n    vec4 ${"get"+n.charAt(0).toUpperCase()+n.slice(1)}() {\n      return ${Cl().texture2D}(${n}, halfCR);\n    }\n  `}(t);case 1:return function sNt(t,n){const e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1),s=t.shapeInfo.texShape,r=Cl();if(n)return`\n    vec4 ${i}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${r.texture2D}(${e}, uv);\n    }\n  `;const o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`\n    vec4 ${i}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${o[0]}, ${o[1]}, index);\n      return ${r.texture2D}(${e}, uv);\n    }\n  `}(t,n);case 2:return function oNt(t,n){const e=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),r=t.shapeInfo.texShape,o=r[0],a=r[1],l=Cl();if(null!=r&&es(e,r))return n?`\n      vec4 ${s}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);\n\n        return ${l.texture2D}(${i}, uv);\n      }\n    `:`\n      vec4 ${s}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);\n\n        return ${l.texture2D}(${i}, uv);\n      }\n    `;if(n)return`\n    vec4 ${s}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${i}TexShape[0]) / 2.0), ceil(float(${i}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${i}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${l.texture2D}(${i}, uv);\n    }\n  `;const c=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];return`\n    vec4 ${s}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${Math.ceil(e[1]/2)}, ${c[0]}, ${c[1]}, row, col);\n      return ${l.texture2D}(${i}, uv);\n    }\n  `}(t,n);case 3:return function lNt(t,n){const e=t.shapeInfo.logicalShape,i=t.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),r=t.shapeInfo.texShape,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];if(1===e[0]){const p=[1,2],g=["b","row","col"];return`\n        ${wCe(bC(t,e.slice(1)),n)}\n        vec4 ${s}(int b, int row, int col) {\n          return ${s}(${vC(g,p)});\n        }\n      `}const a=Cl();if(n)return`\n    vec4 ${s}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${i}TexShape[0]) / 2.0), ceil(float(${i}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${i}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${i}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${a.texture2D}(${i}, uv);\n    }\n  `;const l=o[0],c=o[1],u=Math.ceil(e[2]/2);return`\n    vec4 ${s}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${l}, ${c}, ${u*Math.ceil(e[1]/2)}, ${u}, b, row, col);\n      return ${a.texture2D}(${i}, uv);\n    }\n  `}(t,n);default:return function uNt(t,n){const e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1),s=Cl();if(n)return`\n    vec4 ${i}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${e}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${e}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${e}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${e}, uv);\n    }\n  `;const r=t.shapeInfo.logicalShape,o=r.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],d=Math.ceil(r[o-1]/2);let h=d*Math.ceil(r[o-2]/2),p="int b, int row, int col",f=`b * ${h} + (row / 2) * ${d} + (col / 2)`;for(let g=2;g<o-1;g++)p=`int b${g}, `+p,h*=r[o-g-1],f=`b${g} * ${h} + `+f;return`\n    vec4 ${i}(${p}) {\n      int index = ${f};\n      int texR = index / ${u};\n      int texC = index - texR * ${u};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});\n      return ${s.texture2D}(${e}, uv);\n    }\n  `}(t,n)}}const UMt="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",GMt="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",jMt="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",HMt="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Qv(t){return`offset${t}`}function gC(t){const n=t.name,e=Le(t.shapeInfo.logicalShape);return e<2?`return ${n};`:`\n    for (int i = 0; i < ${e}; i++) {\n      if (i == index) {\n        return ${n}[i];\n      }\n    }\n  `}function Js(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function qW(t,n,e){const{newShape:i,keptDims:s}=C_(n),r=n.length,o=t&&3===r&&1===n[0],a=o?n.slice(1):i,l=!t&&r>1&&!es(n,e)&&i.length<r||o;return{useSqueezeShape:l,uniformShape:l?a:n,keptDims:s}}function bC(t,n){const e=JSON.parse(JSON.stringify(t));return e.shapeInfo.logicalShape=n,e}function vC(t,n){return n.map(e=>t[e]).join(", ")}function SCe(t,n,e){const i=[],s=[];let r,o,a,l=null,c=null;c=t.getUniformLocation(e,"NAN",!1),1===Ie().getNumber("WEBGL_VERSION")&&(l=t.getUniformLocation(e,"INFINITY",!1));const u=!1;for(const d of n.variableNames){const h={name:d,uniform:t.getUniformLocation(e,d,u),offset:t.getUniformLocation(e,`offset${d}`,u)};n.enableShapeUniforms&&(h.shape=t.getUniformLocation(e,`${d}Shape`,u),h.texShape=t.getUniformLocation(e,`${d}TexShape`,u)),i.push(h)}if(n.enableShapeUniforms&&(r=t.getUniformLocation(e,"outShape",u),a=t.getUniformLocation(e,"outShapeStrides",u),o=t.getUniformLocation(e,"outTexShape",u)),n.customUniforms)for(const d of n.customUniforms)s.push(t.getUniformLocation(e,d.name,u));return{variablesLocations:i,customUniformLocations:s,infLoc:l,nanLoc:c,outShapeLocation:r,outShapeStridesLocation:a,outTexShapeLocation:o}}function xCe(t,n){if(t.length!==n.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${n.length} inputs`);t.forEach((e,i)=>{const s=e.logicalShape,r=n[i],o=r.shape;if(!es(s,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${o} must match`);if(e.isUniform&&r.isUniform)return;const a=e.texShape,l=r.isUniform?null:r.texData.texShape;if(!es(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function ol(t){return Ie().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}class vNt{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=z3.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const e=Cl();this.outputShape=n,this.enableShapeUniforms=ol(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?Y3(["r","c","d"],n):Zv(["r","c","d"],n)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${e.output} = result;\n      }\n    `}}class yNt{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=z3.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const e=Cl();this.outputShape=n,this.enableShapeUniforms=ol(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?Y3(["r","c","d"],n):Zv(["r","c","d"],n)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${e.output} = result;\n      }\n    `}}class wNt{constructor(n){this.variableNames=["A"],this.outTexUsage=hd.DOWNLOAD;const e=Cl();this.outputShape=n,this.userCode=`\n      ${vCe}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${e.output} = encode_float(x);\n      }\n    `}}class CNt{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=hd.DOWNLOAD;const e=Cl();this.outputShape=n,this.userCode=`\n      ${vCe}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${e.output} = encode_float(x);\n      }\n    `}}const SNt={R:0,G:1,B:2,A:3};class ECe{constructor(n,e=!1,i="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Cl();this.outputShape=n,this.enableShapeUniforms=ol(this.outputShape.length);let r="result";e&&(r="floor(result * 255. + 0.5)");let o="";for(let a=0;a<i.length;a++)o+=`\n          if(offset == ${a}) {\n            result = values[${SNt[i[a]]}];\n          }`;this.userCode=`\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":HW(n)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ${i.length});\n\n        flatIndex = idiv(flatIndex, ${i.length}, 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ${s.texture2D}(A, uv);\n          ${o}\n        }\n        ${s.output} = vec4(${r}, 0., 0., 0.);\n      }\n    `}}class xNt{constructor(n,e=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=Cl();this.outputShape=n,this.enableShapeUniforms=ol(this.outputShape.length);let s="",r="result";e&&(r="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=2*o+a;s+=`\n          localCoords = coords;\n          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${n[2]}`}) {\n          localCoords[2] += ${a};\n          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${n[1]}`}) {\n            localCoords[1] += ${o};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${i.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${l}] = values[0];\n            } else if (offset == 1) {\n              result[${l}] = values[1];\n            } else if (offset == 2) {\n              result[${l}] = values[2];\n            } else {\n              result[${l}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":HW(n)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${s}\n\n          ${i.output} = ${r};\n        }\n    `}}function H2(t,n,e,i,s,r){!function gMt(t,n){const e=Ie().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||n<=0)throw new Error(`Requested texture size [${t}x${n}] is invalid.`);if(t>e||n>e)throw new Error(`Requested texture size [${t}x${n}] greater than WebGL maximum on this browser / GPU [${e}x${e}].`)}(n,e);const o=function _Mt(t){return Xf(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}(t),a=t.TEXTURE_2D;return Bt(t,()=>t.bindTexture(a,o)),Bt(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Bt(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Bt(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Bt(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),1===Ie().getNumber("WEBGL_VERSION")?Bt(t,()=>t.texImage2D(a,0,i,n,e,0,s,r,null)):Bt(t,()=>t.texStorage2D(a,1,i,n,e)),Bt(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[e,n]}}function TCe(t){return t.internalFormatFloat}function ICe(t){return t.internalFormatHalfFloat}function kCe(t){return t.downloadTextureFormat}function DCe(t){return t.internalFormatPackedFloat}function ACe(t){return t.internalFormatPackedHalfFloat}class KW{constructor(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const e=Ie().getNumber("WEBGL_VERSION");if(null!=n?(this.gl=n,function JAt(t,n){Z_[t]=n}(e,n)):this.gl=fh(e),n=this.gl,2===Ie().getNumber("WEBGL_VERSION")){const r=n;this.createVertexArray=()=>Bt(r,()=>r.createVertexArray()),this.bindVertexArray=o=>Bt(r,()=>r.bindVertexArray(o)),this.deleteVertexArray=o=>Bt(r,()=>r.deleteVertexArray(o)),this.getVertexArray=()=>Bt(r,()=>r.getParameter(r.VERTEX_ARRAY_BINDING))}else if(null!=n){const r=n.getExtension("OES_vertex_array_object");if(null==r)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Bt(n,()=>r.createVertexArrayOES()),this.bindVertexArray=o=>Bt(n,()=>r.bindVertexArrayOES(o)),this.deleteVertexArray=o=>Bt(n,()=>r.deleteVertexArrayOES(o)),this.getVertexArray=()=>Bt(n,()=>n.getParameter(r.VERTEX_ARRAY_BINDING_OES))}let i="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===Ie().getNumber("WEBGL_VERSION")){const o="OES_texture_half_float";if(this.textureFloatExtension=G3(this.gl,"OES_texture_float"),pd(this.gl,o))this.textureHalfFloatExtension=G3(this.gl,o);else if(Ie().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(i),pd(this.gl,s))this.colorBufferHalfFloatExtension=G3(this.gl,s);else if(Ie().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(i="EXT_color_buffer_float",pd(this.gl,i))this.colorBufferFloatExtension=this.gl.getExtension(i);else{if(!pd(this.gl,s))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(s)}this.vertexBuffer=function TNt(t){return function fMt(t,n){const e=Xf(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Bt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,e)),Bt(t,()=>t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)),e}(t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}(this.gl),this.indexBuffer=function INt(t){return function mMt(t,n){const e=Xf(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Bt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e)),Bt(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)),e}(t,new Uint16Array([0,1,2,2,1,3]))}(this.gl),this.framebuffer=function bMt(t){return Xf(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=zW(this.gl,this.textureHalfFloatExtension)}get debug(){return Ie().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const n=this.gl;Bt(n,()=>n.finish()),Bt(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,null)),Bt(n,()=>n.deleteFramebuffer(this.framebuffer)),Bt(n,()=>n.bindBuffer(n.ARRAY_BUFFER,null)),Bt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)),Bt(n,()=>n.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(n,e){return this.throwIfDisposed(),function kNt(t,n,e,i){const[s,r]=G2(n,e);return H2(t,s,r,TCe(i),i.textureFormatFloat,t.FLOAT)}(this.gl,n,e,this.textureConfig)}createFloat16MatrixTexture(n,e){return this.throwIfDisposed(),function DNt(t,n,e,i){const[s,r]=G2(n,e);return H2(t,s,r,ICe(i),i.textureFormatFloat,i.textureTypeHalfFloat)}(this.gl,n,e,this.textureConfig)}createUnsignedBytesMatrixTexture(n,e){return this.throwIfDisposed(),function ANt(t,n,e,i){const[s,r]=G2(n,e);return H2(t,s,r,kCe(i),t.RGBA,t.UNSIGNED_BYTE)}(this.gl,n,e,this.textureConfig)}uploadPixelDataToTexture(n,e){this.throwIfDisposed(),function FNt(t,n,e){Bt(t,()=>t.bindTexture(t.TEXTURE_2D,n)),e.data instanceof Uint8Array?2===Ie().getNumber("WEBGL_VERSION")?Bt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,e.data)):Bt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,e.data)):2===Ie().getNumber("WEBGL_VERSION")?Bt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,e)):Bt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)),Bt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}(this.gl,n,e)}uploadDenseMatrixToTexture(n,e,i,s){this.throwIfDisposed(),function RNt(t,n,e,i,s,r){let o,a,l;Bt(t,()=>t.bindTexture(t.TEXTURE_2D,n)),s instanceof Uint8Array?(o=new Uint8Array(e*i*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(e*i*4),a=t.FLOAT,l=r.internalFormatPackedFloat),o.set(s),2===Ie().getNumber("WEBGL_VERSION")?Bt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,e,i,t.RGBA,a,o)):Bt(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,e,i,0,t.RGBA,a,o)),Bt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}(this.gl,n,e,i,s,this.textureConfig)}createFloat16PackedMatrixTexture(n,e){return this.throwIfDisposed(),function NNt(t,n,e,i){const[s,r]=pC(n,e);return H2(t,s,r,ACe(i),t.RGBA,i.textureTypeHalfFloat)}(this.gl,n,e,this.textureConfig)}createPackedMatrixTexture(n,e){return this.throwIfDisposed(),function MNt(t,n,e,i){const[s,r]=pC(n,e);return H2(t,s,r,DCe(i),t.RGBA,t.FLOAT)}(this.gl,n,e,this.textureConfig)}deleteMatrixTexture(n){this.throwIfDisposed(),this.outputTexture===n&&(_Ce(this.gl,this.framebuffer),this.outputTexture=null),Bt(this.gl,()=>this.gl.deleteTexture(n))}downloadByteEncodedFloatMatrixFromOutputTexture(n,e,i){return this.downloadMatrixDriver(n,()=>function $Nt(t,n,e,i){const[s,r]=G2(n,e),a=new Uint8Array(function nMt(t,n){return t*n}(n*e,4));return Bt(t,()=>t.readPixels(0,0,s,r,i.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}(this.gl,e,i,this.textureConfig))}downloadPackedMatrixFromBuffer(n,e,i,s,r,o){return function BNt(t,n,e,i,s,r,o,a){const l=t,c=new Float32Array(function iMt(t,n){const[e,i]=pC(t,n);return e*i*4}(r,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,n),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}(this.gl,n,0,0,0,r,o)}downloadFloat32MatrixFromBuffer(n,e){return function PNt(t,n,e){const i=t,s=new Float32Array(e);return i.bindBuffer(i.PIXEL_PACK_BUFFER,n),i.getBufferSubData(i.PIXEL_PACK_BUFFER,0,s),i.bindBuffer(i.PIXEL_PACK_BUFFER,null),s}(this.gl,n,e)}createBufferFromTexture(n,e,i){this.bindTextureToFrameBuffer(n);const s=function LNt(t,n,e){const s=t.createBuffer();Bt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const a=16*n*e;return Bt(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Bt(t,()=>t.readPixels(0,0,e,n,t.RGBA,t.FLOAT,0)),Bt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}(this.gl,e,i);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const n=this.createFence(this.gl);return this.pollFence(n)}createFence(n){let e,i;if(Ie().getBool("WEBGL_FENCE_API_ENABLED")){const s=n,r=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),i=()=>{const o=s.clientWaitSync(r,0,0);return o===s.ALREADY_SIGNALED||o===s.CONDITION_SATISFIED},e=r}else Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),i=()=>this.isQueryAvailable(e,Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):i=()=>!0;return{query:e,isFencePassed:i}}downloadMatrixFromPackedTexture(n,e,i){return this.downloadMatrixDriver(n,()=>function VNt(t,n,e){const i=new Float32Array(n*e*4);return Bt(t,()=>t.readPixels(0,0,e,n,t.RGBA,t.FLOAT,i)),i}(this.gl,e,i))}createProgram(n){this.throwIfDisposed();const e=this.gl;null==this.vertexShader&&(this.vertexShader=function ENt(t){const n=Cl();return function cMt(t,n){const e=Xf(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Bt(t,()=>t.shaderSource(e,n)),Bt(t,()=>t.compileShader(e)),!1===t.getShaderParameter(e,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(e)),new Error("Failed to compile vertex shader.");return e}(t,`${n.version}\n    precision highp float;\n    ${n.attribute} vec3 clipSpacePos;\n    ${n.attribute} vec2 uv;\n    ${n.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}(e));const i=function hMt(t){return Xf(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}(e);Bt(e,()=>e.attachShader(i,this.vertexShader)),Bt(e,()=>e.attachShader(i,n)),function pMt(t,n){if(Bt(t,()=>t.linkProgram(n)),!Ie().get("ENGINE_COMPILE_ONLY")&&!1===t.getProgramParameter(n,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}(e,i);const s=Object.assign(i,{vao:this.createVertexArray()});return this.debug&&UW(e,s),s}buildVao(n){this.setProgram(n),this.bindVertexArray(n.vao);const e=this.gl;Bt(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),function ONt(t,n,e){Bt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,e)),mCe(t,n,"clipSpacePos",e,3,20,0)&&mCe(t,n,"uv",e,2,20,12)}(e,n,this.vertexBuffer)}deleteProgram(n){this.throwIfDisposed(),n===this.program&&(this.program=null),null!=n&&(Bt(this.gl,()=>this.gl.deleteProgram(n)),this.deleteVertexArray(n.vao))}setProgram(n){this.throwIfDisposed(),this.program=n,null!=this.program&&this.debug&&UW(this.gl,this.program),Bt(this.gl,()=>this.gl.useProgram(n))}getUniformLocation(n,e,i=!0){return this.throwIfDisposed(),i?function yMt(t,n,e){return Xf(t,()=>t.getUniformLocation(n,e),'uniform "'+e+'" not present in program.')}(this.gl,n,e):function wMt(t,n,e){return t.getUniformLocation(n,e)}(this.gl,n,e)}getAttributeLocation(n,e){return this.throwIfDisposed(),Bt(this.gl,()=>this.gl.getAttribLocation(n,e))}getUniformLocationNoThrow(n,e){return this.throwIfDisposed(),this.gl.getUniformLocation(n,e)}setInputMatrixTexture(n,e,i){this.throwIfDisposed(),this.throwIfNoProgram(),CMt(this.gl,n,e,i)}setOutputMatrixTexture(n,e,i){this.setOutputMatrixTextureDriver(n,i,e)}setOutputPackedMatrixTexture(n,e,i){this.throwIfDisposed();const[s,r]=pC(e,i);this.setOutputMatrixTextureDriver(n,s,r)}setOutputMatrixWriteRegion(n,e,i,s){this.setOutputMatrixWriteRegionDriver(i,n,s,e)}setOutputPackedMatrixWriteRegion(n,e,i,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&UW(this.gl,this.program),j3(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const n=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Bt(n,()=>n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Bt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=G3(this.gl,2===Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const i=this.gl,s=this.getQueryTimerExtensionWebGL2(),r=i.createQuery();return i.beginQuery(s.TIME_ELAPSED_EXT,r),r}const n=this.getQueryTimerExtensionWebGL1(),e=n.createQueryEXT();return n.beginQueryEXT(n.TIME_ELAPSED_EXT,e),e}endQuery(){if(2===Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,i=this.getQueryTimerExtensionWebGL2();return void e.endQuery(i.TIME_ELAPSED_EXT)}const n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}waitForQueryAndGetTime(n){var e=this;return z(function*(){return yield zge(()=>e.disposed||e.isQueryAvailable(n,Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),e.getQueryTime(n,Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})()}getQueryTime(n,e){if(0===e)return null;if(2===e){const i=this.gl;return i.getQueryParameter(n,i.QUERY_RESULT)/1e6}{const i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(n,e){if(0===e)return!0;if(2===e){const i=this.gl,s=this.getQueryTimerExtensionWebGL2(),r=i.getQueryParameter(n,i.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const i=this.getQueryTimerExtensionWebGL1(),s=i.getQueryObjectEXT(n,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(n){return new Promise(e=>{this.addItemToPoll(()=>n.isFencePassed(),()=>e())})}pollItems(){const n=function zNt(t){let n=0;for(;n<t.length&&t[n]();++n);return n-1}(this.itemsToPoll.map(e=>e.isDoneFn));for(let e=0;e<=n;++e){const{resolveFn:i}=this.itemsToPoll[e];i()}this.itemsToPoll=this.itemsToPoll.slice(n+1)}addItemToPoll(n,e){if(this.itemsToPoll.push({isDoneFn:n,resolveFn:e}),this.itemsToPoll.length>1)return;let i;"setTimeoutCustom"in Ie().platform&&(i=Ie().platform.setTimeoutCustom.bind(Ie().platform)),zge(()=>(this.pollItems(),0===this.itemsToPoll.length),()=>0,null,i)}bindTextureToFrameBuffer(n){this.throwIfDisposed(),GW(this.gl,n,this.framebuffer),this.debug&&j3(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(GW(this.gl,this.outputTexture,this.framebuffer),this.debug&&j3(this.gl)):_Ce(this.gl,this.framebuffer)}downloadMatrixDriver(n,e){this.bindTextureToFrameBuffer(n);const i=e();return this.unbindTextureToFrameBuffer(),i}setOutputMatrixTextureDriver(n,e,i){this.throwIfDisposed();const s=this.gl;GW(s,n,this.framebuffer),this.debug&&j3(s),this.outputTexture=n,Bt(s,()=>s.viewport(0,0,e,i)),Bt(s,()=>s.scissor(0,0,e,i))}setOutputMatrixWriteRegionDriver(n,e,i,s){this.throwIfDisposed(),Bt(this.gl,()=>this.gl.scissor(n,e,i,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{mx:UNt,XI:MCe,Nk:GNt,f6:jNt,ct:HNt,YG:WNt,hH:qNt,z3:KNt,sG:XNt,uM:YNt,vS:ZNt,qB:QNt,GG:JNt,rq:eOt,lg:tOt,WR:nOt,cu:iOt,GE:sOt,px:rOt,jC:oOt,He:aOt,hE:lOt,BF:cOt,Dk:uOt,cl:dOt,_B:hOt,ub:pOt,_f:fOt,Ku:mOt,qy:_Ot,Zy:gOt,bu:bOt,zv:vOt,dH:NCe,HS:yOt,yH:wOt,l3:COt,z9:OCe,x6:SOt,_m:xOt,eW:EOt,GK:TOt,SP:IOt,yr:kOt,dl:DOt,Dw:AOt,xT:MOt,_X:XW,wz:NOt}=L;function RCe(t,n){return["x","y","z","w","u","v"].slice(0,n).map(e=>`${t}.${e}`)}function Sl(t,n){return 1===n?[t]:RCe(t,n)}class ROt{constructor(n){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n,this.rank=n.length,this.enableShapeUniforms=ol(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=Sl("rc",this.rank),i=Js(this.rank),s=this.getOutOfBoundsCondition(e),r=this.getSetup(e),o=this.getOutput(e);this.userCode=`\n        void main() {\n          ${i} rc = getOutputCoords();\n\n          if(${s}) {\n            setOutput(vec4(0));\n          } else {\n            ${r}\n\n            setOutput(vec4(${o}));\n          }\n        }\n      `}}getSourceCoordsArr(n){const e=[];for(let i=0;i<=1;i++)for(let s=0;s<=1;s++){let r=`${0===i?"r":"rp1"}, ${0===s?"c":"cp1"}`;for(let o=2;o<this.rank;o++)r=`${n[n.length-1-o]},`+r;e.push(r)}return e}getOutOfBoundsCondition(n){if(1===this.rank)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let e="";for(let i=this.rank-2;i<this.rank;i++)e+=`${n[i]} >= ${this.enableShapeUniforms?`outShape[${i}]`:this.outputShape[i]}`,i<this.rank-1&&(e+="||");return e}getSetup(n){if(1===this.rank)return"";const e=n.slice(-2);return`\n      int r = ${e[0]};\n      int c = ${e[1]};\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ${this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1]};\n      bool rEdge = rp1 >= ${this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2]};\n    `}getOutput(n){const e=this.getSourceCoordsArr(n);return 1===this.rank?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${e[0]}),\n            cEdge ? 0. : getA(${e[1]}),\n            rEdge ? 0. : getA(${e[2]}),\n            rEdge || cEdge ? 0. : getA(${e[3]})`}}class FCe{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=n,this.enableShapeUniforms=ol(this.outputShape.length);let i="";for(let s=0;s<4;s++){let r="thisRC = rc;";s%2==1&&(r+="thisRC.z += 1;"),s>1&&(r+="thisRC.y += 1;"),i+=`\n        ${r}\n        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${s}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${s>0?"}":""}\n      `}this.userCode=`\n      ${function FOt(t,n){return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${n?function OMt(t,n,e="index"){const s=function NMt(t,n){const e=t.length,i=t.map(r=>`${n}[${r}]`),s=new Array(e-1);s[e-2]=i[e-1];for(let r=e-3;r>=0;--r)s[r]=`(${s[r+1]} * ${i[r+1]})`;return s}(t.map((r,o)=>o),n);return s.map((r,o)=>`int ${t[o]} = ${e} / ${s[o]}; ${o===s.length-1?`int ${t[o+1]} = ${e} - ${t[o]} * ${s[o]}`:`index -= ${t[o]} * ${s[o]}`};`).join("")}(["r","c","d"],"inputShape"):Zv(["r","c","d"],t)}\n      return ivec3(r, c, d);\n    }\n  `}(e,this.enableShapeUniforms)}\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":HW(n)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":n[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":n[2]};\n\n        ${i}\n\n        setOutput(result);\n      }\n    `}}class LOt{constructor(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(n,e,i){const s=PCe(e,i),r=$Ce(n,s,i);r in this.freeTextures||(this.freeTextures[r]=[]),r in this.usedTextures||(this.usedTextures[r]=[]);const o=LCe(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,i);if(this.freeTextures[r].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[r].pop();return this.usedTextures[r].push(l),l}let a;return s===rl.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):s===rl.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):s===rl.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):s===rl.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):s===rl.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[r].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(n,e,i,s){if(null==this.freeTextures)return;const r=PCe(i,s),o=$Ce(e,r,s);o in this.freeTextures||(this.freeTextures[o]=[]);const a=LCe(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=Ie().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==l&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(n.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(n),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[o],u=c&&c.indexOf(n);if(null==u||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${this.numFreeTextures+this.numUsedTextures})`);const e=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*e)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const n in this.freeTextures)this.freeTextures[n].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(const n in this.usedTextures)this.usedTextures[n].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function LCe(t,n,e,i,s){const r=function $Ot(t,n){switch(t){case rl.PACKED_2X2_FLOAT32:return DCe(n);case rl.PACKED_2X2_FLOAT16:return ACe(n);case rl.UNPACKED_FLOAT32:return TCe(n);case rl.UNPACKED_FLOAT16:return ICe(n);case rl.PACKED_4X1_UNSIGNED_BYTE:return kCe(n);default:throw new Error(`Unknown physical texture type ${t}`)}}(n,i);let o;if(s){const[l,c]=pC(t[0],t[1]);o=l*c}else{const[l,c]=G2(t[0],t[1]);o=l*c}const a=function POt(t,n){if(n===t.R32F)return 4;if(n===t.R16F)return 2;if(n===t.RGBA32F)return 16;if(n===t.RGBA)return 16;if(n===t.RGBA16F)return 8;if(n===t.RGBA8)return 4;throw new Error(`Unknown internal format ${n}`)}(e,r);return o*a}function PCe(t,n){if(t===hd.UPLOAD)return rl.PACKED_2X2_FLOAT32;if(t===hd.RENDER||null==t)return function BOt(t){return Ie().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?rl.PACKED_2X2_FLOAT32:rl.UNPACKED_FLOAT32:t?rl.PACKED_2X2_FLOAT16:rl.UNPACKED_FLOAT16}(n);if(t===hd.DOWNLOAD||t===hd.PIXELS)return rl.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function $Ce(t,n,e){return`${t[0]}_${t[1]}_${n}_${e}`}class Ap{constructor(n,e){this.variableNames=["A"],this.outputShape=n,this.enableShapeUniforms=ol(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${e}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const vu="if (isnan(x)) return x;",VOt="return x;",BCe="return abs(x);",zOt="return (x >= 0.0) ? x : (exp(x) - 1.0);",UOt=vu+"\n  return (x < 0.0) ? 0.0 : x;\n",GOt=vu+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Q_="return x;",jOt="return 1.0 / (1.0 + exp(-1.0 * x));",HOt="return x;",WOt="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",qOt="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",KOt="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",XOt="return 1.0 / (1.0 + exp(-1.0 * x));";class J_{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=ol(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${e}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}class YOt{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=n,this.enableShapeUniforms=ol(this.outputShape.length);const e=n.length,i=Sl("rc",e),s=Js(e),r=function OOt(t,n){if(1===t)return"rc";let e="";for(let i=0;i<t;i++)e+=n[i],i<t-1&&(e+=",");return e}(e,i),o=i.slice(-2),a=e<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`\n      void main() {\n        ${s} rc = getOutputCoords();\n        vec4 packedInput = getA(${r});\n\n        setOutput(getChannel(packedInput, ${a}));\n      }\n    `}}const ZOt=$j,Q3={},tRt=Ie().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");let sRt=(()=>{class t extends Z9{nextDataId(){return t.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Ie().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let i;if(null!=e){if(e instanceof KW)i=e;else{const s=fh(Ie().getNumber("WEBGL_VERSION"),e);i=new KW(s)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const s=fh(Ie().getNumber("WEBGL_VERSION"));i=new KW(s),this.binaryCache=function eRt(t){return t in Q3||(Q3[t]={}),Q3[t]}(Ie().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=i,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new LOt(this.gpgpu),this.numMBBeforeWarning=function iRt(){return null==Ie().global.screen?1024:Ie().global.screen.height*Ie().global.screen.width*window.devicePixelRatio*600/1024/1024}(),this.texData=new Bge(this,mp())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,i,s,r,o,a){const l=this.makeTensorInfo(i,s),c=this.texData.get(l.dataId);c.isPacked=!1,c.texture={texture:e,texShape:[r,o]},c.texShape=[r,o];const u=H3(i),d=new ECe(u,!1,a),h=this.runWebGLProgram(d,[l],s,[[r,o]]);return h.shape=i,c.texture=null,this.disposeIntermediateTensorInfo(l),h.dataId}write(e,i,s){if((Ie().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Ie().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===s&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:i,dtype:s,values:e,usage:hd.UPLOAD,refCount:1}),r}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){this.texData.get(e).refCount++}decRef(e){this.texData.has(e)&&this.texData.get(e).refCount--}move(e,i,s,r,o){if(Ie().getBool("DEBUG")&&this.checkNumericalProblems(i),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:s,dtype:r,values:i,usage:hd.UPLOAD,refCount:o})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const i=this.texData.get(e),{values:s,dtype:r,complexTensorInfos:o,slice:a,shape:l,isPacked:c}=i;if(null!=a){let p;p=c?new J_(l,Q_):new Ap(l,Q_);const f=this.runWebGLProgram(p,[{dataId:e,shape:l,dtype:r}],r),g=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),g}if(null!=s)return this.convertAndCacheOnCPU(e);if("string"===r)return s;const u=null!=this.activeTimers;let d,h;return u&&(d=el()),h="complex64"===r?Gf(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.getValuesFromTexture(e),u&&(this.downloadWaitMs+=el()-d),this.convertAndCacheOnCPU(e,h)}read(e){var i=this;return z(function*(){if(i.pendingRead.has(e)){const v=i.pendingRead.get(e);return new Promise(y=>v.push(y))}const s=i.texData.get(e),{values:r,shape:o,slice:a,dtype:l,complexTensorInfos:c,isPacked:u}=s;if(null!=a){let v;v=u?new J_(o,Q_):new Ap(o,Q_);const y=i.runWebGLProgram(v,[{dataId:e,shape:o,dtype:l}],l),w=i.read(y.dataId);return i.disposeIntermediateTensorInfo(y),w}if(null!=r)return i.convertAndCacheOnCPU(e);if(Ie().getBool("DEBUG")&&!Ie().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Ie().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let h,p,d=null;if("complex64"!==l&&Ie().get("WEBGL_BUFFER_SUPPORTED")){h=i.decode(e);const v=i.texData.get(h.dataId);d=i.gpgpu.createBufferFromTexture(v.texture.texture,...U3(o))}if(i.pendingRead.set(e,[]),"complex64"!==l&&(yield i.gpgpu.createAndWaitForFence()),"complex64"===l){const v=yield Promise.all([i.read(c.real.dataId),i.read(c.imag.dataId)]);p=Gf(v[0],v[1])}else if(null==d)p=i.getValuesFromTexture(e);else{const v=Le(o);p=i.gpgpu.downloadFloat32MatrixFromBuffer(d,v)}if(null!=h&&i.disposeIntermediateTensorInfo(h),null!=d){const v=i.gpgpu.gl;Bt(v,()=>v.deleteBuffer(d))}const f=i.convertAndCacheOnCPU(e,p),g=i.pendingRead.get(e);return i.pendingRead.delete(e),g.forEach(v=>v(f)),i.pendingDisposal.has(e)&&(i.pendingDisposal.delete(e),i.disposeData(e)&&mp().removeDataId(e,i),i.pendingDeletes--),f})()}readToGPU(e,i={}){const s=this.texData.get(e),{values:r,shape:o,slice:a,dtype:l,isPacked:c,texture:u}=s;if("complex64"===l)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=a){let f;f=c?new J_(o,Q_):new Ap(o,Q_);const g=this.runWebGLProgram(f,[{dataId:e,shape:o,dtype:l}],l),v=this.readToGPU(g,i);return this.disposeIntermediateTensorInfo(g),v}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const d=this.decode(e,i.customTexShape),h=mp().makeTensorFromTensorInfo(d),p=this.texData.get(d.dataId);return Object.assign({tensorRef:h},p.texture)}bufferSync(e){const i=this.readSync(e.dataId);if("string"===e.dtype)try{const s=i.map(r=>I_(r));return Di(e.shape,e.dtype,s)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Di(e.shape,e.dtype,i)}checkNumericalProblems(e){if(null!=e)for(let i=0;i<e.length;i++){const s=e[i];if(!aMt(s))throw Ie().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${s} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${s} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:i,dtype:s,isPacked:r}=this.texData.get(e),o=Le(i);if(Ie().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const p=this.decode(e),f=this.texData.get(p.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...U3(i)).subarray(0,o);return this.disposeIntermediateTensorInfo(p),g}const a=Ie().getBool("WEBGL_PACK")&&!0===r,l=a?H3(i):i,c=a?new CNt(l):new wNt(l),u=this.runWebGLProgram(c,[{shape:l,dtype:s,dataId:e}],"float32"),d=this.texData.get(u.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(u),h}timerAvailable(){return Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){var i=this;const s=this.activeTimers,r=[];let o=!1;null==this.programTimersStack?(this.programTimersStack=r,o=!0):this.activeTimers.push(r),this.activeTimers=r,e();const a=Iv(this.activeTimers.map(u=>u.query)).filter(u=>null!=u),l=Iv(this.activeTimers.map(u=>u.name)).filter(u=>null!=u);this.activeTimers=s,o&&(this.programTimersStack=null);const c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return z(function*(){if(Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const u=yield Promise.all(a);c.kernelMs=function gpt(t){let n=0;for(let e=0;e<t.length;e++)n+=t[e];return n}(u),c.getExtraProfileInfo=()=>u.map((d,h)=>({name:l[h],ms:d})).map(d=>`${d.name}: ${d.ms}`).join(", ")}else c.kernelMs={error:"WebGL query timers are not supported in this environment."};return i.uploadWaitMs=0,i.downloadWaitMs=0,c})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:el(),endMs:null}}endTimer(e){return Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=el(),e)}getQueryTime(e){var i=this;return z(function*(){return Ie().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?i.gpgpu.waitForQueryAndGetTime(e):e.endMs-e.startMs})()}disposeData(e,i=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(i?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!i&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:s}=this.texData.get(e);return null!=s&&(this.disposeData(s.real.dataId,i),this.disposeData(s.imag.dataId,i)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:i,dtype:s,texShape:r,usage:o,isPacked:a,slice:l}=this.texData.get(e),c=l&&l.origDataId||e,u=this.dataRefCount.get(c);u>1?this.dataRefCount.set(c,u-1):(this.dataRefCount.delete(c),null!=i&&(this.numBytesInGPU-=this.computeBytes(r,s),this.textureManager.releaseTexture(i,r,o,a)));const d=this.texData.get(e);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,i=tRt){return Ie().getBool("WEBGL_CPU_FORWARD")&&e.every(s=>null==this.texData.get(s.dataId).texture&&Le(s.shape)<i)}getGPGPUContext(){return this.gpgpu}where(e){uu("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const i=e.dataSync();return ZOt(e.shape,i)}packedUnaryOp(e,i,s){const r=new J_(e.shape,i),o=this.compileAndRun(r,[e],s);return mp().makeTensorFromTensorInfo(o)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const r=NCe(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,r)}if(Ie().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,BCe,e.dtype);const i=new Ap(e.shape,BCe),s=this.compileAndRun(i,[e]);return mp().makeTensorFromTensorInfo(s)}makeTensorInfo(e,i,s){let r;if("string"===i&&null!=s&&s.length>0&&aI(s[0])){const o=s.map(a=>T_(a));r=this.write(o,e,i)}else r=this.write(s,e,i);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:i}}makeOutput(e,i,s){return mp().makeTensorFromTensorInfo(this.makeTensorInfo(e,i,s),this)}unpackTensor(e){const i=new YOt(e.shape);return this.runWebGLProgram(i,[e],e.dtype)}packTensor(e){const i=new ROt(e.shape);return this.runWebGLProgram(i,[e],e.dtype,null,!0)}packedReshape(e,i){const s=[fC(e.shape),...mC(e.shape)],r={dtype:e.dtype,shape:s,dataId:e.dataId},o=[fC(i),...mC(i)],a=new FCe(o,s),u=this.runWebGLProgram(a,[r],e.dtype,[s],!0);return{dataId:u.dataId,shape:i,dtype:u.dtype}}decode(e,i){const s=this.texData.get(e),{isPacked:r,shape:o,dtype:a}=s;null!=i&&U(Le(o)<=i[0]*i[1]*4,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.");const l=H3(o);let c;c=r?new yNt(l):new vNt(l);const d=[i??U3(l)];return{dtype:a,shape:o,dataId:this.runWebGLProgram(c,[{shape:l,dtype:a,dataId:e}],a,d,!0,i).dataId}}runWebGLProgram(e,i,s,r,o=!1,a){const l=this.makeTensorInfo(e.outputShape,s),c=this.texData.get(l.dataId);if(e.packedOutput&&(c.isPacked=!0),e.outPackingScheme===z3.DENSE){const w=a??U3(e.outputShape);c.texShape=w.map(x=>2*x)}if(null!=e.outTexUsage&&(c.usage=e.outTexUsage),0===Le(l.shape))return c.values=Ra(l.dtype,0),l;const u=[],d=i.map(w=>{if("complex64"===w.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let x=this.texData.get(w.dataId);if(null==x.texture){if(!e.packedInputs&&Le(w.shape)<=Ie().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:x.values};e.packedInputs&&(x.isPacked=!0,x.shape=w.shape)}if(this.uploadToGPU(w.dataId),!!x.isPacked!=!!e.packedInputs)w=x.isPacked?this.unpackTensor(w):this.packTensor(w),u.push(w),x=this.texData.get(w.dataId);else if(x.isPacked&&!q3(x.shape,w.shape)){const T=w,k=w.shape;w.shape=x.shape,w=this.packedReshape(w,k),u.push(w),x=this.texData.get(w.dataId),T.shape=k}return{shape:w.shape,texData:x,isUniform:!1}});this.uploadToGPU(l.dataId);const h={shape:l.shape,texData:c,isUniform:!1},p=function bNt(t,n,e){let i="";n.concat(e).forEach(o=>{const a=null!=o.texData&&null!=o.texData.slice&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=qW(t.packedInputs,o.shape,l);let h="",p="",f="";if(1===u.length&&t.packedInputs){const k=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];h=`${k[0]>1}_${k[1]>1}`}else if(2!==u.length||t.packedInputs){if(u.length>2&&!t.packedInputs){const k=xn(u);f=`${k[0]===l[1]}_${k[k.length-1]===l[1]}`}}else p=`${u[0]>1}_${u[1]>1}`;const g=o.shape.length,v=2===u.length&&es(o.shape,l),y=1===Le(o.shape),w=Hw(o.shape,e.shape),x=!t.packedInputs&&g===e.shape.length&&es(l,e.texData.texShape);i+=`${g}_${x}_${c?d:""}_${u.length}_${y}_${w}_${v}_${h}_${p}_${f}_${t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`}_${a}`}else i+=`${o.shape}_${o.isUniform?"uniform":o.texData.texShape}_${a}`});let r=t.constructor.name;return r+="_"+i+"_"+t.userCode+`${Ie().getNumber("WEBGL_VERSION")}`,r}(e,d,h),f=this.getAndSaveBinary(p,()=>function _Nt(t,n,e,i){const s=e.map((u,d)=>{const h={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:!u.isUniform&&u.texData.isPacked,flatOffset:null};return null!=u.texData&&null!=u.texData.slice&&u.texData.slice.flatOffset>0&&(h.flatOffset=u.texData.slice.flatOffset),{name:n.variableNames[d],shapeInfo:h}}),r=s.map(u=>u.shapeInfo),o={logicalShape:i.shape,texShape:i.texData.texShape,isUniform:!1,isPacked:i.texData.isPacked,flatOffset:null},a=RMt(s,o,n),l=function uMt(t,n){const e=Xf(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Bt(t,()=>t.shaderSource(e,n)),Bt(t,()=>t.compileShader(e)),Ie().get("ENGINE_COMPILE_ONLY"))return e;if(!1===t.getShaderParameter(e,t.COMPILE_STATUS))throw fCe(n,t.getShaderInfoLog(e)),new Error("Failed to compile fragment shader.");return e}(t.gl,a),c=t.createProgram(l);return Ie().get("ENGINE_COMPILE_ONLY")?{program:n,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:r,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:n,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:r,outShapeInfo:o},SCe(t,n,c)))}(this.gpgpu,e,d,h)),g=null!=this.activeTimers;let v;g&&(v=this.startTimer()),Ie().get("ENGINE_COMPILE_ONLY")||function gNt(t,n,e,i,s){n.program.enableShapeUniforms||(xCe(n.inShapeInfos,e),xCe([n.outShapeInfo],[i]));const r=i.texData.texture,o=i.texData.texShape;i.texData.isPacked?t.setOutputPackedMatrixTexture(r.texture,o[0],o[1]):t.setOutputMatrixTexture(r.texture,o[0],o[1]),t.setProgram(n.webGLProgram),t.bindVertexArray(n.webGLProgram.vao),1===Ie().getNumber("WEBGL_VERSION")&&null!==n.infLoc&&t.gl.uniform1f(n.infLoc,1/0),null!==n.nanLoc&&t.gl.uniform1f(n.nanLoc,NaN);for(let l=0;l<e.length;++l){const c=e[l],{uniform:u,offset:d,shape:h,texShape:p}=n.variablesLocations[l];if(h){const{uniformShape:f}=qW(n.program.packedInputs,c.shape,c.texData.texShape);switch(f.length){case 1:t.gl.uniform1iv(h,new Int32Array(f));break;case 2:t.gl.uniform2iv(h,new Int32Array(f));break;case 3:t.gl.uniform3iv(h,new Int32Array(f));break;case 4:t.gl.uniform4iv(h,new Int32Array(f))}}if(p&&t.gl.uniform2i(p,c.texData.texShape[0],c.texData.texShape[1]),null!=u){if(c.isUniform){if(Le(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let f=c.uniformValues;f instanceof Float32Array||(f=new Float32Array(f)),t.gl.uniform1fv(u,f)}continue}null!=c.texData.slice&&null!=d&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const a=n.outShapeLocation;if(a)switch(i.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(i.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(i.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(i.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(i.shape))}if(n.outShapeStridesLocation){const l=xn(i.shape);switch(i.shape.length){case 2:t.gl.uniform1iv(n.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(n.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(n.outShapeStridesLocation,new Int32Array(l))}}if(n.outTexShapeLocation&&t.gl.uniform2i(n.outTexShapeLocation,i.texData.texShape[0],i.texData.texShape[1]),n.program.customUniforms&&s)for(let l=0;l<n.program.customUniforms.length;++l){const c=n.program.customUniforms[l],u=n.customUniformLocations[l],d=s[l];if("float"===c.type)t.gl.uniform1fv(u,d);else if("vec2"===c.type)t.gl.uniform2fv(u,d);else if("vec3"===c.type)t.gl.uniform3fv(u,d);else if("vec4"===c.type)t.gl.uniform4fv(u,d);else if("int"===c.type)t.gl.uniform1iv(u,d);else if("ivec2"===c.type)t.gl.uniform2iv(u,d);else if("ivec3"===c.type)t.gl.uniform3iv(u,d);else{if("ivec4"!==c.type)throw Error(`uniform type ${c.type} is not supported yet.`);t.gl.uniform4iv(u,d)}}t.executeProgram()}(this.gpgpu,f,d,h,r),u.forEach(w=>this.disposeIntermediateTensorInfo(w)),g&&(v=this.endTimer(v),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(v)}));const y=Ie().getNumber("WEBGL_FLUSH_THRESHOLD");if(y>0){const w=el();w-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=w)}if(!Ie().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&!1===o){const w=this.unpackTensor(l);return this.disposeIntermediateTensorInfo(l),w}return l}compileAndRun(e,i,s,r,o=!1){return this.runWebGLProgram(e,i,s=s||i[0].dtype,r,o)}getAndSaveBinary(e,i){return e in this.binaryCache||(this.binaryCache[e]=i()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Ie().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(i=>{this.gpgpu.deleteProgram(this.binaryCache[i].webGLProgram),delete this.binaryCache[i]}),this.textureManager.dispose(),null!=this.canvas&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Ee(()=>{if(!Ie().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Ie().getBool("DEBUG");Ie().set("DEBUG",!1);const i=this.abs(En(1e-8)).dataSync()[0];if(Ie().set("DEBUG",e),i>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const i=this.texData.get(e),{shape:s,dtype:r,values:o,texture:a,usage:l,isPacked:c}=i;if(null!=a)return;const u=null!=this.activeTimers;let d;u&&(d=el());let h=i.texShape;if(null==h&&(h=function xMt(t,n=!1){let e=Ie().getNumber("WEBGL_MAX_TEXTURE_SIZE"),i=Ie().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");i===1/0&&Ie().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(i=e/2),n&&(e*=2,i*=2,1===(t=t.map((a,l)=>l>=t.length-2?Q9(t[l]):t[l])).length&&(t=[2,t[0]])),2!==t.length&&(t=C_(t).newShape);let s=Le(t),r=null;t.length<=1&&s<=e?r=[1,s]:2===t.length&&t[0]<=e&&t[1]<=e?r=t:3===t.length&&t[0]*t[1]<=e&&t[2]<=e?r=[t[0]*t[1],t[2]]:3===t.length&&t[0]<=e&&t[1]*t[2]<=e?r=[t[0],t[1]*t[2]]:4===t.length&&t[0]*t[1]*t[2]<=e&&t[3]<=e?r=[t[0]*t[1]*t[2],t[3]]:4===t.length&&t[0]<=e&&t[1]*t[2]*t[3]<=e&&(r=[t[0],t[1]*t[2]*t[3]]);const o=null!=r&&Math.max(...r)>i&&Math.min(...r)<=(n?2:1)&&Math.min(...r)>0;if(null==r||o)if(n){const a=fC(t);let l=2,c=2;t.length&&([l,c]=mC(t)),s=a*(l/2)*(c/2),r=J9(s).map(u=>2*u)}else r=J9(s);return r}(s,c),i.texShape=h),null!=o){const p=H3(s);let f,g=h[1],v=h[0];const y=o instanceof Uint8Array||o instanceof Uint8ClampedArray;(c||!y)&&([g,v]=pC(h[0],h[1])),f=c?new xNt(p,y):new ECe(p,y);const w=y?[v,g]:h,x=this.makeTensorInfo(w,r),T=this.texData.get(x.dataId);T.usage=y?hd.PIXELS:hd.UPLOAD,T.texShape=w,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),g,v,o);const N=this.runWebGLProgram(f,[x],r,[[v,g]],!0),D=this.texData.get(N.dataId);i.texShape=D.texShape,i.isPacked=D.isPacked,i.usage=D.usage,Ie().get("ENGINE_COMPILE_ONLY")?this.disposeData(N.dataId):(i.texture=D.texture,i.values=null,this.texData.delete(N.dataId)),this.disposeIntermediateTensorInfo(x),u&&(this.uploadWaitMs+=el()-d)}else{const p=this.acquireTexture(h,l,r,c);i.texture=p}}convertAndCacheOnCPU(e,i){const s=this.texData.get(e),{dtype:r}=s;return null!=i&&(s.values=function rRt(t,n){if("float32"===n||"complex64"===n)return t;if("int32"===n||"bool"===n){const e="int32"===n?new Int32Array(t.length):new Uint8Array(t.length);for(let i=0;i<e.length;++i)e[i]=Math.round(t[i]);return e}throw new Error(`Unknown dtype ${n}`)}(i,r)),s.values}acquireTexture(e,i,s,r){if(this.numBytesInGPU+=this.computeBytes(e,s),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${o} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,i,r)}computeBytes(e,i){return e[0]*e[1]*uF(i)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}checkCompileCompletionAsync(){var e=this;return z(function*(){const i=[];if(e.gpgpu.parallelCompilationExtension){for(const[,s]of Object.entries(e.binaryCache))i.push(e.checkCompletionAsync_(s));return Promise.all(i)}for(const[,s]of Object.entries(e.binaryCache)){const r=new Promise(o=>{try{e.checkCompletion_(s),o(!0)}catch(a){throw a}});i.push(r)}return Promise.all(i)})()}checkCompletionAsync_(e){var i=this;return z(function*(){return i.gpgpu.gl.getProgramParameter(e.webGLProgram,i.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?i.checkCompletion_(e):(yield vye(),i.checkCompletionAsync_(e))})()}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS))throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)?(fCe(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:i,customUniformLocations:s,infLoc:r,nanLoc:o,outShapeLocation:a,outShapeStridesLocation:l,outTexShapeLocation:c}=SCe(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=i,e.customUniformLocations=s,e.infLoc=r,e.nanLoc=o,e.outShapeLocation=a,e.outShapeStridesLocation=l,e.outTexShapeLocation=c}}createTensorFromGPUData(e,i,s){e.channels=e.channels||"RGBA";const{texture:r,height:o,width:a,channels:l}=e,c=mp().backend;if(!c.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=c.writeTexture(r,i,s,o,a,l);return mp().makeTensorFromDataId(u,i,s,c)}}return t.nextDataId=0,t})();fbe()&&bbe("webgl",()=>new sRt,2);const YW="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class Jv{constructor(n,e,i){this.variableNames=["A","B"],this.outputShape=mi(e,i),this.enableShapeUniforms=ol(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${n}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}const ey="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class yC{constructor(n,e,i,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=mi(e,i);const r=this.outputShape.length;this.enableShapeUniforms=ol(r);let o="";if(s)if(0===r||1===Le(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(o=`\n          ${Js(r)} coords = getOutputCoords();\n        `,1===r)o+=this.enableShapeUniforms?"\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const l=Sl("coords",r);o+=this.enableShapeUniforms?`\n            bool nextRowOutOfBounds =\n              (${l[r-2]} + 1) >= outShape[${r} - 2];\n            bool nextColOutOfBounds =\n              (${l[r-1]} + 1) >= outShape[${r} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:`\n            bool nextRowOutOfBounds =\n              (${l[r-2]} + 1) >= ${this.outputShape[r-2]};\n            bool nextColOutOfBounds =\n              (${l[r-1]} + 1) >= ${this.outputShape[r-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${n}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${o}\n\n        setOutput(result);\n      }\n    `}}function Nc(t){const{inputs:n,backend:e}=t,{x:i}=n;return e.incRef(i.dataId),{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}const lRt={kernelName:kI,backendName:"webgl",kernelFunc:Nc};function eg(t){const{inputs:n,backend:e}=t,{real:i,imag:s}=n,r=e.makeTensorInfo(i.shape,"complex64"),o=e.texData.get(r.dataId),a=Nc({inputs:{x:i},backend:e}),l=Nc({inputs:{x:s},backend:e});return o.complexTensorInfos={real:a,imag:l},r}const cRt={kernelName:hU,backendName:"webgl",kernelFunc:eg},VCe="return (a < 0.) ? b * a : a;",zCe="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",dRt={kernelName:OF,backendName:"webgl",kernelFunc:function uRt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{alpha:r}=i,o=e.makeTensorInfo([],"float32",E_(r,"float32")),a=Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yC(zCe,s.shape,o.shape):new Jv(VCe,s.shape,o.shape),l=e.runWebGLProgram(a,[s,o],"float32");return e.disposeIntermediateTensorInfo(o),l}},UCe="return (a < 0.) ? b * a : a;",GCe="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",pRt={kernelName:QF,backendName:"webgl",kernelFunc:function hRt(t){const{inputs:n,backend:e}=t,{x:i,alpha:s}=n,r=Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yC(GCe,i.shape,s.shape):new Jv(UCe,i.shape,s.shape);return e.runWebGLProgram(r,[i,s],"float32")}},wC="if (isnan(x)) return x;";function us({opSnippet:t,packedOpSnippet:n,cpuKernelImpl:e,dtype:i}){return({inputs:s,backend:r})=>{const{x:o}=s,a=r,l=i||o.dtype;if(a.shouldExecuteOnCPU([o])&&null!=e){const d=a.texData.get(o.dataId),h=e(d.values,l);return a.makeTensorInfo(o.shape,l,h)}let u;return u=Ie().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new J_(o.shape,n):new Ap(o.shape,t),a.runWebGLProgram(u,[o],l)}}function Ba({opSnippet:t,packedOpSnippet:n,checkOutOfBounds:e=!1,supportsComplex:i=!1,cpuKernelImpl:s,dtype:r}){return({inputs:o,backend:a})=>{const{a:l,b:c}=o,u=a;if(i&&"complex64"===l.dtype){const f=u.texData.get(l.dataId),g=u.texData.get(c.dataId),[v,y]=[[f.complexTensorInfos.real,g.complexTensorInfos.real],[f.complexTensorInfos.imag,g.complexTensorInfos.imag]].map(x=>{const[T,k]=x,R={dataId:T.dataId,dtype:T.dtype,shape:l.shape},N={dataId:k.dataId,dtype:k.dtype,shape:c.shape},D=new Jv(t,l.shape,c.shape);return u.runWebGLProgram(D,[R,N],Sc(T.dtype,k.dtype))}),w=eg({inputs:{real:v,imag:y},backend:u});return u.disposeIntermediateTensorInfo(v),u.disposeIntermediateTensorInfo(y),w}const d=r||Sc(l.dtype,c.dtype);if(("string"===l.dtype||"string"===c.dtype||u.shouldExecuteOnCPU([l,c]))&&null!=s){const f=u.texData.get(l.dataId).values,g=u.texData.get(c.dataId).values,v="string"===l.dtype?jf(f):f,y="string"===l.dtype?jf(g):g,[w,x]=s(l.shape,c.shape,v,y,d),T=u.makeTensorInfo(x,d);return u.texData.get(T.dataId).values=w,T}let p;return p=Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new yC(n,l.shape,c.shape,e):new Jv(t,l.shape,c.shape),u.runWebGLProgram(p,[l,c],d)}}function W2(t,n=!1){if("linear"===t)return n?HOt:VOt;if("relu"===t)return n?qOt:UOt;if("elu"===t)return n?WOt:zOt;if("relu6"===t)return n?KOt:GOt;if("prelu"===t)return n?GCe:UCe;if("leakyrelu"===t)return n?zCe:VCe;if("sigmoid"===t)return n?XOt:jOt;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}class jCe{constructor(n,e,i,s=!1,r=!1,o=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i,this.enableShapeUniforms=ol(this.outputShape.length);const d=Math.ceil((s?n[1]:n[2])/2),h=s?"i * 2, rc.y":"rc.y, i * 2",p=r?"rc.z, i * 2":"i * 2, rc.z",f=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],g=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let v="",y="";a&&(v=l?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${a}\n        }`:c?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${a}\n        }`:`vec4 activation(vec4 x) {\n          ${a}\n        }`,y="result = activation(result);");const w=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let x="rc.x",T="rc.x";n[0]<e[0]?x=`imod(rc.x, ${n[0]})`:e[0]<n[0]&&(T=`imod(rc.x, ${e[0]})`),this.userCode=`\n      ${v}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${d}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ${x};\n        int batchB = ${T};\n        for (int i = 0; i < ${d}; i++) {\n          vec4 a = getMatrixA(batchA, ${h});\n          vec4 b = getMatrixB(batchB, ${p});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${f[0]} * ${g[0]});\n          result += (${f[1]} * ${g[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${w}\n\n        ${y}\n\n        setOutput(result);\n      }\n    `}}const HCe={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class WCe{constructor(n,e,i){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=mi(e,i),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${n}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}const qCe="return a * b;";function ZW(t){const{inputs:n,backend:e}=t,{a:i,b:s}=n,r=Sc(i.dtype,s.dtype);if("complex64"===i.dtype){const a=e.texData.get(i.dataId),l=e.texData.get(s.dataId),c=new WCe(HCe.REAL,i.shape,s.shape),u=new WCe(HCe.IMAG,i.shape,s.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:i.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:i.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],h=e.runWebGLProgram(c,d,"float32"),p=e.runWebGLProgram(u,d,"float32"),f=eg({inputs:{real:h,imag:p},backend:e});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(p),f}if(e.shouldExecuteOnCPU([i,s])){const a=e.texData.get(i.dataId),l=e.texData.get(s.dataId),[c,u]=cOt(i.shape,s.shape,a.values,l.values,r),d=e.makeTensorInfo(u,r);return e.texData.get(d.dataId).values=c,d}let o;return o=Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yC(qCe,i.shape,s.shape):new Jv(qCe,i.shape,s.shape),e.runWebGLProgram(o,[i,s],r)}const fRt={kernelName:PI,backendName:"webgl",kernelFunc:ZW};function Pt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{shape:r}=i,o=e,a=Le(s.shape),l=Uge(r,a),c=Le(l);U(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const u=o.texData.get(s.dataId);return!u.isPacked||q3(s.shape,l)||null!==u.texture&&q3(u.shape,l)?(o.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype}):function mRt(t,n,e){const i=[fC(t.shape),...mC(t.shape)],s={dtype:t.dtype,shape:i,dataId:t.dataId},r=[fC(n),...mC(n)],o=new FCe(r,i),c=e.runWebGLProgram(o,[s],t.dtype,[i],!0);return{dataId:c.dataId,shape:n,dtype:c.dtype}}(s,l,o)}const _Rt={kernelName:eL,backendName:"webgl",kernelFunc:Pt};class KCe{constructor(n,e){this.variableNames=["x"];const{windowSize:i,batchSize:s,inSize:r,outSize:o}=n;this.outputShape=[s,o];const a=4*Math.floor(i/4),l=i%4;let c="sumValue += dot(values, ones);";if(null!=e){const d=1/e;c=`sumValue += dot(values * ${Mw(d)?d.toPrecision(2):d}, ones);`}let u="";r%i>0&&(u=`\n        if (inIdx < 0 || inIdx >= ${r}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${u}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${i};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${a}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${c}\n        }\n\n        int inIdx = inOffset + ${a};\n        if (${1===l}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${c}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${c}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${c}\n        }\n        setOutput(sumValue);\n      }\n    `}}class gRt{constructor(n,e){this.variableNames=["x"];const{windowSize:i,batchSize:s,inSize:r,outSize:o}=n;this.outputShape=[s,o];let a="0.0",l="";"prod"===e?a="1.0":"min"===e?(a="1.0 / 1e-20",l="min"):"max"===e&&(a="-1.0 / 1e-20",l="max");let c=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===e?c="sumValue":"prod"===e?c="prodValue":"all"===e?c="allValue":"any"===e&&(c="anyValue");const u=4*Math.floor(i/4),d=i%4;let h=`\n      if (${"sum"===e}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===e}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${l}(values, minMaxValue);\n        if (${"min"===e} || ${"max"===e}) {\n          minMaxValue = ${l}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,p="vec4";"all"===e?(a="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===e&&(a="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");let f="";r%i>0&&(f=`\n        if (inIdx < 0 || inIdx >= ${r}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${a};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${f}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${i};\n\n        vec4 minMaxValue = vec4(${a});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${h}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===d}) {\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${2===d}) {\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${3===d}) {\n          ${p} values = ${p}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${h}\n        }\n        setOutput(${c});\n      }\n    `}}function ty(t,n,e,i){const s=function bRt(t){const n=[];for(;0===n.length||1!==n[n.length-1].outSize;){const e=n.length?n[n.length-1].outSize:t[1],i=ZL(e);n.push({inSize:e,windowSize:i,outSize:Math.ceil(e/i)})}return n}(t.shape);let r=t;for(let o=0;o<s.length;o++){const{inSize:a,windowSize:l,outSize:c}=s[o];let u,d;u="mean"===e?0===o?new KCe({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new KCe({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):new gRt({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},e),d=r,r=i.runWebGLProgram(u,[r],n),d.dataId!==t.dataId&&i.disposeIntermediateTensorInfo(d)}return r}class vRt{constructor(n,e){this.variableNames=["A"];const i=new Array(n.length);for(let o=0;o<i.length;o++)i[o]=n[e[o]];this.outputShape=i,this.rank=i.length;const s=Js(this.rank),r=function yRt(t){const n=t.length;if(n>6)throw Error(`Transpose for rank ${n} is not yet supported`);const e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],i=new Array(n);for(let s=0;s<t.length;s++)i[t[s]]=e[s];return i.join()}(e);this.userCode=`\n    void main() {\n      ${s} resRC = getOutputCoords();\n      setOutput(getA(${r}));\n    }\n    `}}class wRt{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const i=new Array(n.length);for(let u=0;u<i.length;u++)i[u]=n[e[u]];if(this.outputShape=i,this.rank=i.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=Js(this.rank),r=RCe("rc",this.rank),o=new Array(this.rank);for(let u=0;u<e.length;u++)o[e[u]]=r[u];const a=`vec2(${o.slice(-2).join()})`,l=`++${r[this.rank-1]} < ${i[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`\n    void main() {\n      ${s} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${c};\n      if(${l}) {\n        result[1] = ${c};\n      }\n      --${r[this.rank-1]};\n      if(++${r[this.rank-2]} < ${i[this.rank-2]}) {\n        result[2] = ${c};\n        if(${l}) {\n          result[3] = ${c};\n        }\n      }\n      setOutput(result);\n    }\n    `}}function J3(t,n,e){const i=Ie().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new wRt(t.shape,n):new vRt(t.shape,n);return e.runWebGLProgram(i,[t],t.dtype)}function eP(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i;return function CRt(t,n,e,i){const r=t.shape.length,o=zi(n,t.shape);let a=o;const l=Gr(a,r),c=null!=l;let u=t;c&&(u=J3(t,l,i),a=go(a.length,r)),Pa("sum",a,r);const[d,h]=Sa(u.shape,a);let p=d;e&&(p=_o(d,o));const f=Le(h),y=Pt({inputs:{x:u},attrs:{shape:[Le(t.shape)/f,f]},backend:i}),x=ty(y,vG(t.dtype),"sum",i),T=Pt({inputs:{x},attrs:{shape:p},backend:i});return i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(x),c&&i.disposeIntermediateTensorInfo(u),T}(s,r,o,e)}const SRt={kernelName:oL,backendName:"webgl",kernelFunc:eP};function xl(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{perm:r}=i,o=e,l=new Array(s.shape.length);for(let u=0;u<l.length;u++)l[u]=s.shape[r[u]];let c;if(o.shouldExecuteOnCPU([s])){const d=o.texData.get(s.dataId).values,h=XW(d,s.shape,s.dtype,r,l);c=o.makeTensorInfo(l,s.dtype),o.texData.get(c.dataId).values=h}else c=J3(s,r,o);return c}const xRt={kernelName:Lw,backendName:"webgl",kernelFunc:xl},XCe=1e3;function tP({a:t,b:n,transposeA:e,transposeB:i,backend:s,bias:r=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape.length,u=n.shape.length,d=e?t.shape[c-2]:t.shape[c-1],h=i?n.shape[u-1]:n.shape[u-2],p=e?t.shape[c-1]:t.shape[c-2],f=i?n.shape[u-2]:n.shape[u-1],g=t.shape.slice(0,-2),v=n.shape.slice(0,-2),y=Le(g),w=Le(v),T=mi(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([p,f]);U(d===h,()=>`Error in matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${t.shape} and ${n.shape} and transposeA=${e} and transposeB=${i} must match.`);const k=e?[y,d,p]:[y,p,d],R=i?[w,f,h]:[w,h,f],N=Pt({inputs:{x:t},backend:s,attrs:{shape:k}}),D=Pt({inputs:{x:n},backend:s,attrs:{shape:R}}),F=[N,D],$=Math.max(y,w),j=e?N.shape[1]:N.shape[2],Q=null!=r,Y=null!=o,ce="leakyrelu"===l,Ce=null!=l?W2(l,!0):null;let le;if((1===p||1===f)&&j>XCe&&!1===(Q||Y||ce||null!=Ce)){let be=N,fe=D;e&&(be=xl({inputs:{x:N},backend:s,attrs:{perm:[0,2,1]}}),F.push(be)),i&&(fe=xl({inputs:{x:D},backend:s,attrs:{perm:[0,2,1]}}),F.push(fe));const et=1===f;let We=be;1!==f&&(We=Pt({inputs:{x:be},backend:s,attrs:{shape:[$,j,1]}}),F.push(We));const Qe=1===f?2:1;let gt=fe;et&&(gt=Pt({inputs:{x:fe},backend:s,attrs:{shape:[$,1,j]}}),F.push(gt));const ct=ZW({inputs:{a:We,b:gt},backend:s});le=eP({inputs:{x:ct},backend:s,attrs:{axis:Qe,keepDims:!0}}),F.push(ct)}else{const be=Sc(t.dtype,n.dtype),fe=new jCe(k,R,[$,p,f],e,i,Q,Ce,Y,ce),Te=[N,D];if(null!=r&&Te.push(r),Y&&Te.push(o),ce){const et=s.makeTensorInfo([],"float32",E_(a,"float32"));Te.push(et),F.push(et)}le=s.runWebGLProgram(fe,Te,be)}const te=Pt({inputs:{x:le},backend:s,attrs:{shape:T}});F.push(le);for(const be of F)s.disposeIntermediateTensorInfo(be);return te}const TRt={kernelName:fL,backendName:"webgl",kernelFunc:function ERt(t){const{inputs:n,backend:e,attrs:i}=t,{a:s,b:r,bias:o,preluActivationWeights:a}=n,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=i;return tP({a:s,b:r,transposeA:l,transposeB:c,backend:e,bias:o,preluActivationWeights:a,leakyreluAlpha:d,activation:u})}},YCe="return abs(x);",kRt={kernelName:dF,backendName:"webgl",kernelFunc:function IRt(t){const{inputs:n,backend:e}=t,{x:i}=n;if(e.shouldExecuteOnCPU([i])&&"complex64"!==i.dtype){const r=e.texData.get(i.dataId),o=NCe(r.values);return e.makeTensorInfo(i.shape,i.dtype,o)}let s;return s=Ie().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new J_(i.shape,YCe):new Ap(i.shape,YCe),e.runWebGLProgram(s,[i],i.dtype)}},ARt=us({opSnippet:vu+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),MRt={kernelName:lI,backendName:"webgl",kernelFunc:ARt},ORt=us({opSnippet:vu+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),RRt={kernelName:cI,backendName:"webgl",kernelFunc:ORt},ZCe="return a + b;",FRt=Ba({opSnippet:ZCe,packedOpSnippet:ZCe,supportsComplex:!0,cpuKernelImpl:UNt}),LRt={kernelName:Fw,backendName:"webgl",kernelFunc:FRt};class PRt{constructor(n,e){this.outputShape=[],this.outputShape=n,this.variableNames=e.map((r,o)=>`T${o}`);const i=[];this.variableNames.forEach(r=>{i.push(`float v${r} = get${r}AtOutCoords();`)});const s=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`\n      void main() {\n        ${i.join("\n        ")}\n\n        float result = ${s};\n        setOutput(result);\n      }\n    `}}class $Rt{constructor(n,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.variableNames=e.map((r,o)=>`T${o}`);const i=[];this.variableNames.forEach(r=>{i.push(`vec4 v${r} = get${r}AtOutCoords();`)});const s=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`\n      void main() {\n        ${i.join("\n        ")}\n\n        vec4 result = ${s};\n        setOutput(result);\n      }\n    `}}const BRt={kernelName:hF,backendName:"webgl",kernelFunc:function nP(t){const{inputs:n,backend:e}=t,i=n;if(1===i.length)return Nc({inputs:{x:i[0]},backend:e});if(i.length>Ie().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(i.length/2),c=nP({inputs:i.slice(0,l),backend:e}),u=nP({inputs:i.slice(l),backend:e});return nP({inputs:[c,u],backend:e})}const s=i.map(l=>l.dtype).reduce((l,c)=>Sc(l,c)),r=i.map(l=>l.shape),a=Ie().getBool("WEBGL_PACK")?new $Rt(i[0].shape,r):new PRt(i[0].shape,r);return e.runWebGLProgram(a,i,s)}},zRt={kernelName:"All",backendName:"webgl",kernelFunc:function VRt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i,a=s.shape.length,l=zi(r,s.shape);let c=l;const u=Gr(c,a);let d=s;null!=u&&(d=xl({inputs:{x:s},backend:e,attrs:{perm:u}}),c=go(c.length,a)),Pa("all",c,a);const[h,p]=Sa(d.shape,c),g=Pt({inputs:{x:d},backend:e,attrs:{shape:[-1,Le(p)]}}),v=ty(g,g.dtype,"all",e);let y;return y=Pt(o?{inputs:{x:v},backend:e,attrs:{shape:_o(h,l)}}:{inputs:{x:v},backend:e,attrs:{shape:h}}),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(v),null!=u&&e.disposeIntermediateTensorInfo(d),y}},GRt={kernelName:"Any",backendName:"webgl",kernelFunc:function URt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i,a=s.shape.length,l=zi(r,s.shape);let c=l;const u=Gr(c,a);let d=s;null!=u&&(d=xl({inputs:{x:s},backend:e,attrs:{perm:u}}),c=go(c.length,a)),Pa("any",c,a);const[h,p]=Sa(d.shape,c),g=Pt({inputs:{x:d},backend:e,attrs:{shape:[-1,Le(p)]}}),v=ty(g,g.dtype,"any",e);let y;return y=Pt(o?{inputs:{x:v},backend:e,attrs:{shape:_o(h,l)}}:{inputs:{x:v},backend:e,attrs:{shape:h}}),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(v),null!=u&&e.disposeIntermediateTensorInfo(d),y}};class jRt{constructor(n,e,i){this.variableNames=["A"];const{windowSize:s,batchSize:r,outSize:o}=n;i||this.variableNames.push("bestIndicesA"),this.outputShape=[r,o],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${s};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${s}; i++) {\n          int inIdx = ${i?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));"};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${"max"===e?">":"<"} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}class HRt{constructor(n,e,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,U(n.length>2,()=>`Packed arg${i.charAt(0).toUpperCase()+i.slice(1)} supports only inputs with rank above 2.`);const o=Math.ceil(n[n.length-1]/e);this.outputShape=n.slice(0,-1),o>1&&this.outputShape.push(o),s||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=Js(l),u=Sl("coords",l);let d,h;if(1===o){h=l+1;const D=Js(h);d=`\n        ${D} sourceLocR = ${D}(${u.join()}, 0);\n        ++${u[l-1]};\n        ${D} sourceLocG = ${D}(${u.join()}, 0);\n        ++${u[l-2]};\n        ${D} sourceLocA = ${D}(${u.join()}, 0);\n        --${u[l-1]};\n        ${D} sourceLocB = ${D}(${u.join()}, 0);\n        --${u[l-2]};`}else h=l,d=`\n        ${c} sourceLocR = coords;\n        ++${u[l-1]};\n        ${c} sourceLocG = coords;\n        ++${u[l-2]};\n        ${c} sourceLocA = coords;\n        --${u[l-1]};\n        ${c} sourceLocB = coords;\n        --${u[l-2]};`;const p=["x","y","z","w","u","v"].slice(0,h),f="."+p[h-1],g=p.map(D=>"int "+D),v=Sl("sourceLocR",h-1).concat("inIdx.r"),y=Sl("sourceLocG",h-1).concat("inIdx.g"),w=Sl("sourceLocB",h-1).concat("inIdx.b"),x=Sl("sourceLocA",h-1).concat("inIdx.a"),T="max"===i?"greaterThan":"lessThan",k=s?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${v.join()}),\n                             getBestIndicesAChannel(${y.join()}),\n                             getBestIndicesAChannel(${w.join()}),\n                             getBestIndicesAChannel(${x.join()})));`,R=`vec4(\n            getAChannel(${v.join()}),\n            hasNextCol ? getAChannel(${y.join()}) : 0.,\n            hasNextRow ? getAChannel(${w.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${x.join()}) : 0.)`,N=s?"":`\n      float getBestIndicesAChannel(${g.join()}) {\n        return getChannel(getBestIndicesA(${p.join()}),\n                                          vec2(${p.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${g.join()}) {\n        return getChannel(getA(${p.join()}),\n                               vec2(${p.slice(-2).join()}));\n      }\n      ${N}\n      void main() {\n        ${c} coords = getOutputCoords();\n        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};\n        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};\n        ${d}\n        ivec4 srcIdx = ivec4(sourceLocR${f}, sourceLocG${f},\n          sourceLocB${f}, sourceLocA${f}) * ${e};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${R};\n\n        for (int i = 0; i < ${e}; i++) {\n          inIdx = srcIdx;\n          ${k}\n          vec4 candidate = ${R};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${T}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}function QCe(t,n,e,i=null){let s=n.shape[0],r=n.shape[1];null!=i&&(s=i.shape[0],r=i.shape[1]);const o=ZL(r),a={windowSize:o,inSize:r,batchSize:s,outSize:Math.ceil(r/o)},l=new jRt(a,e,null==i),c=[n];null!=i&&c.push(i);const u=t.runWebGLProgram(l,c,"int32");if(1===u.shape[1])return u;const d=QCe(t,n,e,u);return t.disposeIntermediateTensorInfo(u),d}function JCe(t,n,e,i=null){const s=null!=i?i.shape:n.shape,o=ZL(s[s.length-1]),a=new HRt(s,o,e,null==i),c=t.runWebGLProgram(a,null==i?[n]:[n,i],"int32");if(c.shape.length===n.shape.length){const u=JCe(t,n,e,c);return t.disposeIntermediateTensorInfo(c),u}return c}function eSe(t,n,e,i){const s=[e];if(Pa("arg"+i.charAt(0).toUpperCase()+i.slice(1),s,n.shape.length),!Ie().getBool("WEBGL_PACK_REDUCE")||n.shape.length<=2){const r=[],o=t.texData.get(n.dataId);let l=n;null!==o&&o.isPacked&&(l=t.unpackTensor(n),r.push(l));const[c,u]=Sa(l.shape,s),d=Le(u),h=Pt({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});r.push(h);const p=QCe(t,h,i);r.push(p);const f=Pt({inputs:{x:p},backend:t,attrs:{shape:c}});return r.forEach(g=>t.disposeIntermediateTensorInfo(g)),f}return JCe(t,n,i)}const qRt={kernelName:pF,backendName:"webgl",kernelFunc:function WRt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r}=i;let o=zi(r,s.shape);const a=Gr(o,s.shape.length);let l=s;const c=[];null!=a&&(l=xl({inputs:{x:s},backend:e,attrs:{perm:a}}),c.push(l),o=go(o.length,l.shape.length)),Pa("argMax",[o[0]],l.shape.length);const u=eSe(e,l,o[0],"max");return c.forEach(d=>e.disposeIntermediateTensorInfo(d)),u}},XRt={kernelName:fF,backendName:"webgl",kernelFunc:function KRt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r}=i;let o=zi(r,s.shape);const a=Gr(o,s.shape.length);let l=s;const c=[];null!=a&&(l=xl({inputs:{x:s},backend:e,attrs:{perm:a}}),c.push(l),o=go(o.length,l.shape.length)),Pa("argMin",[o[0]],l.shape.length);const u=eSe(e,l,o[0],"min");return c.forEach(d=>e.disposeIntermediateTensorInfo(d)),u}},ZRt=us({opSnippet:vu+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),QRt={kernelName:uI,backendName:"webgl",kernelFunc:ZRt},eFt=us({opSnippet:vu+"return log(x + sqrt(x * x + 1.0));"}),tFt={kernelName:dI,backendName:"webgl",kernelFunc:eFt},iFt=us({opSnippet:vu+"\n  return atan(x);\n"}),sFt={kernelName:hI,backendName:"webgl",kernelFunc:iFt},aFt=Ba({opSnippet:YW+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+ey+"\n  return result;\n"}),lFt={kernelName:fI,backendName:"webgl",kernelFunc:aFt},uFt=us({opSnippet:vu+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),dFt={kernelName:pI,backendName:"webgl",kernelFunc:uFt};class q2{constructor(n,e,i,s=!1,r=!1){if(this.variableNames=["x"],"avg"===e&&i)throw new Error("Cannot compute positions for average pool.");const o=n.filterWidth,a=n.strideHeight,l=n.strideWidth,c=n.dilationHeight,u=n.dilationWidth,d=n.effectiveFilterHeight,h=n.effectiveFilterWidth,p=n.padInfo.top,f=n.padInfo.left;this.outputShape=n.outShape;const g="avg"===e;let w="0.0";if(g||(w="-1.0 / 1e-20"),i)return void(this.userCode=`\n        const ivec2 strides = ivec2(${a}, ${l});\n        const ivec2 pads = ivec2(${p}, ${f});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${d};\n              wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${h};\n                wC += ${u}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${s?r?`((batch  * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + d`:`(xR * ${n.inWidth} + xC) * ${n.inChannels} + d`:`wR * ${h} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let T=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===e&&(T="avgValue / max(count, 1.0)");const k=4*Math.floor(o/4),R=o%4,N=`\n      if (${g}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${a}, ${l});\n      const ivec2 pads = ivec2(${p}, ${f});\n      const float initializationValue = ${w};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${n.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${w});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${d};\n            wR += ${c}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${n.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${k}; wC += 4) {\n            int xC = xCCorner + wC * ${u};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              getValue(batch, xR, xC + 3 * ${u}, d)\n            );\n\n            ${N}\n          }\n\n          int xC = xCCorner + ${k};\n          if (${1===R}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${N}\n          } else if (${2===R}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${N}\n          } else if (${3===R}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              initializationValue\n            );\n\n            ${N}\n          }\n        }\n        setOutput(${T});\n      }\n    `}}class QW{constructor(n,e,i,s=!1,r=!1){if(this.variableNames=["x"],"avg"===e&&i)throw new Error("Cannot compute positions for average pool.");const o=n.filterWidth,a=n.strideDepth,l=n.strideHeight,c=n.strideWidth,u=n.dilationDepth,d=n.dilationHeight,h=n.dilationWidth,p=n.effectiveFilterDepth,f=n.effectiveFilterHeight,g=n.effectiveFilterWidth,v=n.padInfo.front,y=n.padInfo.top,w=n.padInfo.left;this.outputShape=n.outShape;const x="avg"===e;let T="0.0";if(x||(T="-1.0 / 1e-20"),i)return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${a}, ${l}, ${c});\n        const ivec3 pads = ivec3(${v}, ${y}, ${w});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${p};\n              wD += ${u}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${n.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${f};\n                wR += ${d}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${n.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${g};\n                  wC += ${h}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${n.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${s?r?`(((batch * ${n.inDepth} + xD) * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`((xD * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`wD * ${f} * ${g} +\n                      wR * ${g} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let R=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===e&&(R="avgValue / max(count, 1.0)");const N=4*Math.floor(o/4),D=o%4,F=`\n      if (${x}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${a}, ${l}, ${c});\n      const ivec3 pads = ivec3(${v}, ${y}, ${w});\n      const float initializationValue = ${T};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${n.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${T});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${p};\n            wD += ${u}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${n.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${f};\n            wR += ${d}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${N}; wC += 4) {\n              int xC = xCCorner + wC * ${h};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${h}, ch)\n              );\n\n              ${F}\n            }\n\n            int xC = xCCorner + ${N};\n            if (${1===D}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${F}\n            } else if (${2===D}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${F}\n            } else if (${3===D}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                initializationValue\n              );\n\n              ${F}\n            }\n          }\n        }\n        setOutput(${R});\n      }\n    `}}const pFt={kernelName:mF,backendName:"webgl",kernelFunc:function hFt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n;j2(s,"avgPool");const{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=i;U(La(o,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`);const u=ed(s.shape,r,o,1,a,l);if(1===u.filterWidth&&1===u.filterHeight&&es(u.inShape,u.outShape))return Nc({inputs:{x:s},backend:e});const d=new q2(u,"avg",!1);return e.runWebGLProgram(d,[s],"float32")}},mFt={kernelName:_F,backendName:"webgl",kernelFunc:function fFt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{filterSize:r,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=i,d=Vf(s.shape,r,o,[1,1,1],a,l,c),h=new QW(d,"avg",!1);return e.runWebGLProgram(h,[s],"float32")}};class _Ft{constructor(n){this.variableNames=["dy"],this.outputShape=n.inShape;const l=n.effectiveFilterHeight,c=n.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${l-1-n.padInfo.top}, ${c-1-n.padInfo.left});\n      const float avgMultiplier = float(${1/(n.filterHeight*n.filterWidth)});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${l};\n            wR += ${n.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${c};\n            wC+= ${n.dilationWidth}) {\n            float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class gFt{constructor(n){this.variableNames=["dy"],this.outputShape=n.inShape;const d=n.effectiveFilterDepth,h=n.effectiveFilterHeight,p=n.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${d-1-n.padInfo.front}, ${h-1-n.padInfo.top}, ${p-1-n.padInfo.left});\n      const float avgMultiplier = float(${1/(n.filterDepth*n.filterHeight*n.filterWidth)});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${d};\n            wD += ${n.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${n.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${n.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${h};\n              wR += ${n.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${p};\n                wC += ${n.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const vFt={kernelName:cU,backendName:"webgl",kernelFunc:function bFt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,input:r}=n,o=r,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=i,h=Vf(o.shape,a,l,[1,1,1],c,u),p=new gFt(h);return e.runWebGLProgram(p,[s],o.dtype)}},wFt={kernelName:lU,backendName:"webgl",kernelFunc:function yFt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,input:r}=n,o=r;j2([s,r],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=i,u=ed(o.shape,a,l,1,c),d=new _Ft(u);return e.runWebGLProgram(d,[s],o.dtype)}},SFt={kernelName:gF,backendName:"webgl",kernelFunc:function CFt(t){const{inputs:n,backend:e,attrs:i}=t,{a:s,b:r}=n,{transposeA:o,transposeB:a}=i;return tP({a:s,b:r,transposeA:o,transposeB:a,backend:e})}};class xFt{constructor(n,e,i,s,r,o){this.outputShape=[],this.variableNames=["x","mean","variance"],mi(n,e),mi(n,i);let a="0.0";null!=s&&(mi(n,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";null!=r&&(mi(n,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${a};\n        float scale = ${l};\n        float inv = scale * inversesqrt(variance + float(${o}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}class EFt{constructor(n,e,i,s,r,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],mi(n,e),mi(n,i);let a="vec4(0.0)";null!=s&&(mi(n,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";null!=r&&(mi(n,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`\n      void main() {\n        vec4 offset = ${a};\n        vec4 scale = ${l};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${o}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}const TFt={kernelName:AF,backendName:"webgl",kernelFunc:({inputs:t,backend:n,attrs:e})=>{const{x:i,mean:s,variance:r,offset:o,scale:a}=t;U(s.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(null==o||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(null==a||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=e;null==l&&(l=.001);const c=[i,s,r];let u=null;null!=o&&(u=o.shape,c.push(o));let d=null;null!=a&&(d=a.shape,c.push(a));const h=Ie().getBool("WEBGL_PACK_NORMALIZATION")?new EFt(i.shape,s.shape,r.shape,u,d,l):new xFt(i.shape,s.shape,r.shape,u,d,l);return n.runWebGLProgram(h,c,c[0].dtype)}};class IFt{constructor(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;const e=Js(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const i=function kFt(t){if(1===t)return"sourceLoc";if(t<=6)return JW.slice(0,t).map(n=>"sourceLoc."+n).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}(this.rank);let s;s=`\n        ${e} sourceLoc;\n        ${e} coords = getOutputCoords();\n        ${n.map((o,a)=>`sourceLoc.${JW[a]} = start[${a}] + coords.${JW[a]};`).join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${s}\n        setOutput(getSource(${i}));\n      }\n    `}}const JW=["x","y","z","w","u","v"];class DFt{constructor(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const e=Js(this.rank),i=Sl("coords",this.rank),s=Sl("sourceLoc",this.rank),r=1===this.rank?"sourceLoc":`vec2(${s.slice(-2).join()})`,o=`getChannel(getSource(${s.join()}), ${r})`,a=`\n      result.x = ${o};\n      if (++${i[this.rank-1]} < ${n[this.rank-1]}) {\n        ++${s[this.rank-1]};\n        result.y = ${o};\n        --${s[this.rank-1]};\n      }\n    `,l=1===this.rank?"":`\n      --${i[this.rank-1]};\n      if (++${i[this.rank-2]} < ${n[this.rank-2]}) {\n        ++${s[this.rank-2]};\n        result.z = ${o};\n        if (++${i[this.rank-1]} < ${n[this.rank-1]}) {\n          ++${s[this.rank-1]};\n          result.w = ${o};\n        }\n      }\n    `,c=this.rank<=4?`sourceLoc = coords +\n            ${e}(${n.map((u,d)=>`start[${d}]`).join()});`:n.map((u,d)=>`${s[d]} = ${i[d]} + start[${d}];`).join("\n");this.userCode=`\n      void main() {\n        ${e} coords = getOutputCoords();\n        ${e} sourceLoc;\n        ${c}\n        vec4 result = vec4(0.);\n        ${a}\n        ${l}\n        setOutput(result);\n      }\n    `}}function CC(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{begin:r,size:o}=i,[a,l]=TL(s,r,o);if(ej(s,a,l),0===Le(l))return e.makeTensorInfo(l,s.dtype,[]);if(e.shouldExecuteOnCPU([s])||"string"===s.dtype){const d=e.texData.get(s.dataId),h=yOt(d.values,a,l,s.shape,s.dtype);return e.makeTensorInfo(l,s.dtype,h)}const{isPacked:c}=e.texData.get(s.dataId),u=nj(s.shape,a,l);if(c||!u){const d=Ie().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new DFt(l):new IFt(l);return e.runWebGLProgram(d,[s],s.dtype,[a])}return e.uploadToGPU(s.dataId),function AFt(t,n,e,i){const s=i.texData.get(t.dataId),r=i.makeTensorInfo(e,t.dtype),o=i.texData.get(r.dataId);Object.assign(o,s),o.refCount=1,o.shape=e,o.dtype=t.dtype;let a=ij(n,xn(t.shape));s.slice&&(a+=s.slice.flatOffset),o.slice={flatOffset:a,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=i.dataRefCount.get(o.slice.origDataId)||1;return i.dataRefCount.set(o.slice.origDataId,l+1),r}(s,a,l,e)}const MFt={kernelName:rL,backendName:"webgl",kernelFunc:CC},NFt={kernelName:bF,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{blockShape:r,crops:o}=i;U(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce((w,x)=>w*x),l=S2(s.shape,r,a),c=x2(l.length,r.length),u=E2(s.shape,r,a),d=tH(o,r.length),h=nH(u,o,r.length),p=[],f=Pt({inputs:{x:s},backend:e,attrs:{shape:l}}),g=xl({inputs:{x:f},backend:e,attrs:{perm:c}}),v=Pt({inputs:{x:g},backend:e,attrs:{shape:u}}),y=CC({inputs:{x:v},backend:e,attrs:{begin:d,size:h}});return p.push(f),p.push(g),p.push(v),p.forEach(w=>e.disposeIntermediateTensorInfo(w)),y}},RFt={kernelName:uU,backendName:"webgl",kernelFunc:function OFt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,weights:r}=n,{size:o}=i,a=e.readSync(s.dataId),l=e.readSync(r.dataId),c=MCe(a,l,r.dtype,r.shape,o);return e.makeTensorInfo([o],r.dtype,c)}},$Ft={kernelName:vF,backendName:"webgl",kernelFunc:function PFt(t){const{inputs:n,backend:e}=t,{a:i,b:s}=n,r=Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=Ie().getNumber("WEBGL_VERSION");if(e.shouldExecuteOnCPU([i,s])||1===o){const l=e.texData.get(i.dataId).values,c=e.texData.get(s.dataId).values,[u,d]=jNt(i.shape,s.shape,l,c,i.dtype),h=e.makeTensorInfo(d,i.dtype);return e.texData.get(h.dataId).values=u,h}let a;return a=r?new yC("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",i.shape,s.shape,!1):new Jv("\n  return float(int(a.r) & int(b.r));\n",i.shape,s.shape),e.runWebGLProgram(a,[i,s],i.dtype)}},VFt={kernelName:dU,backendName:"webgl",kernelFunc:function BFt(t){const{inputs:n,backend:e}=t,{s0:i,s1:s}=n,r=e.readSync(i.dataId),o=e.readSync(s.dataId),a=mi(Array.from(r),Array.from(o));return e.makeTensorInfo([a.length],"int32",Int32Array.from(a))}},tSe=Ba({opSnippet:"return float(a != b);",cpuKernelImpl:dOt,dtype:"bool"}),zFt={kernelName:qF,backendName:"webgl",kernelFunc:tSe};function K2(t){const{inputs:n,backend:e}=t,{input:i}=n;return Nc({inputs:{x:e.texData.get(i.dataId).complexTensorInfos.real},backend:e})}const UFt={kernelName:qU,backendName:"webgl",kernelFunc:K2},HFt={kernelName:mI,backendName:"webgl",kernelFunc:function eq(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{dtype:r}=i;if("complex64"===r){if("complex64"===s.dtype)return Nc({inputs:{x:s},backend:e});const o=Zo(s.shape),a=eq({inputs:{x:s},backend:e,attrs:{dtype:"float32"}}),l=eg({inputs:{real:a,imag:o},backend:e});return o.dispose(),e.disposeIntermediateTensorInfo(a),l}if("complex64"===s.dtype){const o=K2({inputs:{input:s},backend:e}),a=eq({inputs:{x:o},backend:e,attrs:{dtype:r}});return e.disposeIntermediateTensorInfo(o),a}if(!Gge(s.dtype,r)){const o=Nc({inputs:{x:s},backend:e});return{dataId:o.dataId,shape:o.shape,dtype:r}}if(e.shouldExecuteOnCPU([s])){const o=e.texData.get(s.dataId).values,[a,l,c]=HNt(o,s.shape,s.dtype,r);return e.makeTensorInfo(a,l,c)}if("int32"===r)return function jFt(t,n){const e=new Ap(t.shape,"return float(int(x));"),i=n.runWebGLProgram(e,[t],"int32");return{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}(s,e);if("bool"===r){const o=e.makeTensorInfo([],"bool",Ra("bool",1)),l=tSe({inputs:{a:s,b:o},backend:e});return e.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${r}`)}},nSe="return ceil(x);",WFt=us({opSnippet:nSe,packedOpSnippet:nSe,cpuKernelImpl:WNt}),qFt={kernelName:_I,backendName:"webgl",kernelFunc:WFt};class KFt{constructor(n){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=n,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class XFt{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=n,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const ZFt={kernelName:gI,backendName:"webgl",kernelFunc:function YFt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{clipValueMin:r,clipValueMax:o}=i;let a;return a=Ie().getBool("WEBGL_PACK_CLIP")?new XFt(s.shape):new KFt(s.shape),e.runWebGLProgram(a,[s],s.dtype,[[r],[o]])}};class QFt{constructor(n){this.variableNames=["real","imag"],this.outputShape=n,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function iSe(t,n){return{dataId:n.dataId,dtype:n.dtype,shape:t.shape}}const eLt={kernelName:yF,backendName:"webgl",kernelFunc:function JFt(t){const{inputs:n,backend:e}=t,{x:i}=n,s=e.texData.get(i.dataId),r=new QFt(i.shape),o=[iSe(i,s.complexTensorInfos.real),iSe(i,s.complexTensorInfos.imag)];return e.runWebGLProgram(r,o,o[0].dtype)}};class tLt{constructor(n){this.outputShape=[],this.outputShape=yp(n,1),this.variableNames=n.map((o,a)=>`T${a}`);const e=new Array(n.length-1);e[0]=n[0][1];for(let o=1;o<e.length;o++)e[o]=e[o-1]+n[o][1];const i=[`if (yC < ${e[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<e.length;o++)i.push(`else if (yC < ${e[o]}) setOutput(getT${o}(yR, yC-${e[o-1]}));`);i.push(`else setOutput(getT${e.length}(yR, yC-${e[e.length-1]}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${i.join("\n        ")}\n      }\n    `}}class nLt{constructor(n,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=yp(n,e);const i=this.outputShape,s=i.length,r=Js(s),o=Sl("coords",s),a=["x","y","z","w","u","v"].slice(0,s);this.variableNames=n.map((g,v)=>`T${v}`);const l=new Array(n.length-1);l[0]=n[0][e];for(let g=1;g<l.length;g++)l[g]=l[g-1]+n[g][e];const c=a[e],u=a.slice(-2),d=a.join();let h=`if (${c} < ${l[0]}) {\n        return getChannel(\n            getT0(${d}), vec2(${u.join()}));\n        }`;for(let g=1;g<l.length;g++){const v=l[g-1];h+=`\n        if (${c} < ${l[g]}  && ${c} >= ${l[g-1]}) {\n          return getChannel(\n            getT${g}(${iP(a,c,v)}),\n            vec2(${iP(u,c,v)}));\n        }`}const f=l[l.length-1];h+=`\n        return getChannel(\n          getT${l.length}(${iP(a,c,f)}),\n          vec2(${iP(u,c,f)}));`,this.userCode=`\n      float getValue(${a.map(g=>"int "+g)}) {\n        ${h}\n      }\n\n      void main() {\n        ${r} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${o}), 0., 0., 0.);\n\n        ${o[s-1]} = ${o[s-1]} + 1;\n        if (${o[s-1]} < ${i[s-1]}) {\n          result.g = getValue(${o});\n        }\n\n        ${o[s-2]} = ${o[s-2]} + 1;\n        if (${o[s-2]} < ${i[s-2]}) {\n          result.a = getValue(${o});\n        }\n\n        ${o[s-1]} = ${o[s-1]} - 1;\n        if (${o[s-2]} < ${i[s-2]} &&\n            ${o[s-1]} < ${i[s-1]}) {\n          result.b = getValue(${o});\n        }\n        setOutput(result);\n      }\n    `}}function iP(t,n,e){const i=t.indexOf(n);return t.map((r,o)=>o===i?`${r} - ${e}`:r).join()}function sP(t){const{inputs:n,backend:e}=t,{input:i}=n;return Nc({inputs:{x:e.texData.get(i.dataId).complexTensorInfos.imag},backend:e})}const iLt={kernelName:OU,backendName:"webgl",kernelFunc:sP};function X2(t,n,e){const i=t[0].dtype;if("complex64"===i){const p=t.map(w=>K2({inputs:{input:w},backend:e})),f=t.map(w=>sP({inputs:{input:w},backend:e})),g=X2(p,n,e),v=X2(f,n,e),y=eg({inputs:{real:g,imag:v},backend:e});return p.forEach(w=>e.disposeIntermediateTensorInfo(w)),f.forEach(w=>e.disposeIntermediateTensorInfo(w)),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(v),y}let s=e.shouldExecuteOnCPU(t);if("string"===i&&(s=!0),s){const p=t.map(T=>{const R=[-1,Le(T.shape.slice(n))];return Pt({inputs:{x:T},backend:e,attrs:{shape:R}})}),f=p.map(T=>({vals:e.readSync(T.dataId),shape:T.shape})),g=yp(p.map(T=>T.shape),1),y=qNt(f,g,i,1===p[0].shape[0]),w=yp(t.map(T=>T.shape),n),x=e.makeTensorInfo(w,i,y);return p.forEach(T=>e.disposeIntermediateTensorInfo(T)),x}const r=t.filter(p=>Le(p.shape)>0),o=Ie().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&r[0].shape.length>1;if(1===r.length){const p=o?new Ap(t[0].shape,Q_):new J_(t[0].shape,Q_);return e.runWebGLProgram(p,t,i)}const a=Ie().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(r.length>a){const p=[];for(let g=0;g<r.length;g+=a){const v=r.slice(g,g+a);p.push(X2(v,n,e))}const f=X2(p,n,e);for(const g of p)e.disposeIntermediateTensorInfo(g);return f}if(o){const p=new nLt(r.map(f=>f.shape),n);return e.runWebGLProgram(p,r,i)}const{tensors2D:l,outShape:c}=function sLt(t,n,e){const i=yp(t.map(r=>r.shape),n);return{tensors2D:t.map(r=>Pt({inputs:{x:r},attrs:{shape:[-1,Le(r.shape.slice(n))]},backend:e})),outShape:i}}(r,n,e),u=new tLt(l.map(p=>p.shape)),d=e.runWebGLProgram(u,l,i);l.forEach(p=>e.disposeIntermediateTensorInfo(p));const h=Pt({inputs:{x:d},attrs:{shape:c},backend:e});return e.disposeIntermediateTensorInfo(d),h}function sSe(t){const{inputs:n,backend:e,attrs:i}=t,{axis:s}=i,r=zi(s,n[0].shape)[0];Qj(n.map(c=>c.shape),r);const a=yp(n.map(c=>c.shape),r);if(0===Le(a))return e.makeTensorInfo(a,n[0].dtype,[]);const l=n.filter(c=>Le(c.shape)>0);return 1===l.length?Nc({inputs:{x:l[0]},backend:e}):X2(l,r,e)}const rLt={kernelName:wF,backendName:"webgl",kernelFunc:sSe};class rSe{constructor(n,e=!1,i=null,s=!1,r=!1){this.variableNames=["x","W"],this.outputShape=n.outShape;const o=n.padInfo.top,a=n.padInfo.left,l=n.strideHeight,c=n.strideWidth,u=n.dilationHeight,d=n.dilationWidth,h=n.filterHeight,p=n.filterWidth,f=4*Math.floor(n.inChannels/4),g=n.inChannels%4,v="channelsLast"===n.dataFormat,y=v?1:2,w=v?2:3,x=v?3:1;let T="",k="";i&&(T=s?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${i}\n        }`:r?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${i}\n        }`:`\n          float activation(float x) {\n            ${i}\n          }\n        `,k="result = activation(result);");const R=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${T}\n\n      const ivec2 strides = ivec2(${l}, ${c});\n      const ivec2 pads = ivec2(${o}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${x}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${y}], coords[${w}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${h}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${n.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${p}; wC++) {\n            int xC = xCCorner + wC * ${d};\n\n            if (xC < 0 || xC >= ${n.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${f}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${v}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===g}) {\n\n              if (${v}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${f}) *\n                    getW(wR, wC, ${f}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${f}, xR, xC) *\n                    getW(wR, wC, ${f}, d2);\n              }\n\n            } else if (${2===g}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${f}, d2),\n                getW(wR, wC, ${f} + 1, d2)\n              );\n\n              if (${v}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${f}),\n                  getX(batch, xR, xC, ${f} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${f}, xR, xC),\n                  getX(batch, ${f} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===g}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${f}, d2),\n                getW(wR, wC, ${f} + 1, d2),\n                getW(wR, wC, ${f} + 2, d2)\n              );\n\n              if (${v}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${f}),\n                  getX(batch, xR, xC, ${f} + 1),\n                  getX(batch, xR, xC, ${f} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${f}, xR, xC),\n                  getX(batch, ${f} + 1, xR, xC),\n                  getX(batch, ${f} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${R}\n        ${k}\n        setOutput(result);\n      }\n    `}}class oLt{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;const e=n.padInfo.front,i=n.padInfo.top,s=n.padInfo.left,r=n.strideDepth,o=n.strideHeight,a=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,u=n.dilationWidth,d=n.filterDepth,h=n.filterHeight,p=n.filterWidth,f=4*Math.floor(n.inChannels/4),g=n.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${r}, ${o}, ${a});\n      const ivec3 pads = ivec3(${e}, ${i}, ${s});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${d}; wF++) {\n          int xF = xFCorner + wF * ${l};\n\n          if (xF < 0 || xF >= ${n.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${h}; wR++) {\n            int xR = xRCorner + wR * ${c};\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${p}; wC++) {\n              int xC = xCCorner + wC * ${u};\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${f}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===g}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${f}) *\n                  getW(wF, wR, wC, ${f}, d2);\n              } else if (${2===g}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${f}),\n                  getX(batch, xF, xR, xC, ${f} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${f}, d2),\n                  getW(wF, wR, wC, ${f} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===g}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${f}),\n                  getX(batch, xF, xR, xC, ${f} + 1),\n                  getX(batch, xF, xR, xC, ${f} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${f}, d2),\n                  getW(wF, wR, wC, ${f} + 1, d2),\n                  getW(wF, wR, wC, ${f} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class oSe{constructor(n,e=!1,i=null,s=!1,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=ol(this.outputShape.length);const o=n.padInfo.left,a=n.strideWidth,l=n.dilationWidth,c=n.filterHeight,u=n.filterWidth,d=u;let h="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let v=0;v<u;v++)h+=`\n           vec4 xTexelC${2*v};\n           int xTexelC${2*v}Ready;\n           vec4 xTexelC${2*v+1};\n           int xTexelC${2*v+1}Ready;\n           vec4 xC${v};`;h+=`\n     for (int r = 0; r < ${c}; r++) {\n      for (int d1 = 0; d1 < ${n.inChannels}; d1 += 2) {\n       `;for(let v=0;v<u;v++)h+=`\n           xTexelC${2*v} = vec4(0.0);\n           xTexelC${2*v}Ready = 0;\n           xTexelC${2*v+1} = vec4(0.0);\n           xTexelC${2*v+1}Ready = 0;\n           xC${v} = vec4(0.0);`;h+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let v=0;v<(d+1)/2;v++){const y=2*v;if(h+=`\n           xC = xCCorner + ${y*l};\n           `,1===a){if(y<u&&(o%2==1?(h+=`\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {\n                   xTexelC${y} = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${y}.zw = vec2(0.0);\n                   }\n                   xTexelC${y}Ready = 1;\n                 }\n               `,h+=1===l&&y>0?`\n                 xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);\n                 `:`\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC${y} = vec4(previous.zw, xTexelC${y}.xy);\n                   } else {\n                     xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);\n                   }\n                   `):h+=`\n                 if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {\n                   xTexelC${y} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${y}.zw = vec2(0.0);\n                   }\n                   xTexelC${y}Ready = 1;\n                 }\n\n                 xC${y} = xTexelC${y};\n                 `,y+1<u)){const w=o%2==0?Q9(l):l;l%2==0&&o%2==1||l%2!=0&&o%2!=1?(h+=`\n                   xCOffset = xC + imod(pads[1], 2) + ${w};\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {\n                     xTexelC${y+1} = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC${y+1}.zw = vec2(0.0);\n                     }\n                     xTexelC${y+1}Ready = 1;\n                   }\n                   `,h+=l>1?`\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);\n                     } else {\n                      xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);\n                     }\n                     `:`\n                     xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);\n                     `):h+=1===w?`\n                     xC${y+1} = xTexelC${y};\n                     `:`\n                     xCOffset = xC + ${w};\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {\n                       xTexelC${y+1} = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC${y+1}.zw = vec2(0.0);\n                       }\n                       xTexelC${y+1}Ready = 1;\n                     }\n\n                     xC${y+1} = xTexelC${y+1};\n                     `}}else y<u&&(o%2==1?(h+=`\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {\n                   xTexelC${y} = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${y}.zw = vec2(0.0);\n                   }\n                   xTexelC${y}Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {\n                   xTexelC${y+1} = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC${y+1}.zw = vec2(0.0);\n                   }\n                   xTexelC${y+1}Ready = 1;\n                 }\n\n                 xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);\n               `,y+1<u&&(h+=`\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);\n                 `)):(h+=`\n                 if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {\n                   xTexelC${y} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${y}.zw = vec2(0.0);\n                   }\n                   xTexelC${y}Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {\n                   xTexelC${y+1} = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${y+1}.zw = vec2(0.);\n                   }\n                   xTexelC${y+1}Ready = 1;\n                 }\n\n                 xC${y} = vec4(\n                   xTexelC${y}.xy, xTexelC${y+1}.xy);\n               `,y+1<u&&(h+=`\n                   xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);\n                 `)));y<u&&(h+=`\n             wTexel = getW(r, ${y}, d1, d2);\n             dotProd += xC${y}.xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ${n.inChannels}) {\n               dotProd += xC${y}.yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           `,y+1<u&&(h+=`\n               wTexel = getW(r, ${y+1}, d1, d2);\n               dotProd += xC${y+1}.xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ${n.inChannels}) {\n                 dotProd += xC${y+1}.yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             `))}h+="\n     }\n   ",h+="\n     }\n   ",h+="\n     }\n   ";let p="",f="";i&&(p=s?`vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ${i}\n         }`:r?`vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ${i}\n         }`:`vec4 activation(vec4 x) {\n           ${i}\n         }`,f="result = activation(result);");const g=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n       ${p}\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ${h}\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ${g}\n         ${f}\n         setOutput(result);\n       }\n     `}}class aLt{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=n,this.enableShapeUniforms=ol(this.outputShape.length);const{dataFormat:i}=e,s=Cl(),r="channelsLast"===i,o=r?1:2,a=r?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${n[2]} && pos < ${n[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`\n          blockIndex = rc.z + ${d};\n          pos = rc.y + ${u};\n\n          ${l}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${o}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${a}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${r}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*u+d}] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*u+d}] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${c}\n\n        ${s.output} = result;\n      }\n    `}}function rP(t,n){const e=t.length;return e>=3?n?[...t.slice(0,-3),t[e-3]*t[e-2],t[e-1]]:[...t.slice(0,-3),t[e-3],t[e-2]*t[e-1]]:!n&&1===e&&t[0]>1?[t[0],1]:null}function aSe({x:t,filter:n,convInfo:e,backend:i,bias:s=null,preluActivationWeights:r=null,leakyreluAlpha:o=0,activation:a=null}){const l=t.shape,c=i.texData.get(t.dataId),u=e.inChannels,d=l[0]*l[1]*l[2],h=e.outChannels,p="channelsLast"===e.dataFormat,g=!1;let v;const y=[];if(null!=r){const T=rP(r.shape,p);null!=T&&(r=Pt({inputs:{x:r},backend:i,attrs:{shape:T}}),y.push(r))}if(null!=s){const T=rP(s.shape,p);null!=T&&(s=Pt({inputs:{x:s},backend:i,attrs:{shape:T}}),y.push(s))}if((1!==d&&1!==h||!(u>XCe))&&c.isPacked&&p&&null!=c.texture&&l[2]%2!=0&&es(c.shape.slice(-3),l.slice(-3))){const k={dataId:t.dataId,shape:[1,l[0]*l[1]*(l[2]+1),e.inChannels],dtype:t.dtype},R=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,U(q3(c.shape,k.shape),()=>`packed reshape ${c.shape} to ${k.shape} isn't free`);const N=Pt({inputs:{x:n},backend:i,attrs:{shape:[1,e.inChannels,e.outChannels]}});y.push(N);const D=tP({a:k,b:N,backend:i,transposeA:!1,transposeB:g,bias:s,activation:a,preluActivationWeights:r,leakyreluAlpha:o}),F=i.texData.get(D.dataId);U(F.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=R,F.shape=e.outShape,v=Nc({inputs:{x:D},backend:i}),v.shape=e.outShape,y.push(D)}else{const T=e.outHeight*e.outWidth,k=Pt({inputs:{x:t},backend:i,attrs:{shape:p?[e.batchSize,T,e.inChannels]:[e.batchSize,e.inChannels,T]}}),R=Pt({inputs:{x:n},backend:i,attrs:{shape:[1,e.inChannels,e.outChannels]}}),N=tP({a:p?k:R,b:p?R:k,transposeA:!p,transposeB:g,backend:i,bias:s,activation:a,preluActivationWeights:r,leakyreluAlpha:o});v=Pt({inputs:{x:N},backend:i,attrs:{shape:e.outShape}}),y.push(k),y.push(R),y.push(N)}for(const T of y)i.disposeIntermediateTensorInfo(T);return v}function lSe({x:t,filter:n,convInfo:e,backend:i,bias:s=null,preluActivationWeights:r=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:h,dataFormat:p}=e,f="channelsLast"===p,g=l*c*u,v=h*d,y=[e.batchSize,g,v],T=[];if(null!=r){const te=rP(r.shape,f);null!=te&&(r=Pt({inputs:{x:r},backend:i,attrs:{shape:te}}),T.push(r))}if(null!=s){const te=rP(s.shape,f);null!=te&&(s=Pt({inputs:{x:s},backend:i,attrs:{shape:te}}),T.push(s))}const k=Pt({inputs:{x:n},backend:i,attrs:{shape:[1,g,Le(n.shape)/g]}});T.push(k);const R=new aLt(y,e),D=i.runWebGLProgram(R,[t],"float32",[t.shape,[e.padInfo.top,e.padInfo.left],[e.strideHeight,e.strideWidth],[e.dilationHeight,e.dilationWidth],[e.inChannels],[e.filterWidth*e.inChannels],[e.outWidth]]),F=Pt({inputs:{x:D},backend:i,attrs:{shape:y}});T.push(D),T.push(F);const $=null!=s,j=null!=r,Q="leakyrelu"===a,Y=a?W2(a,!0):null,ce=new jCe(f?F.shape:k.shape,f?k.shape:F.shape,f?[e.batchSize,v,e.outChannels]:[e.batchSize,e.outChannels,v],!0,!1,$,Y,j,Q),Ce=f?[F,k]:[k,F];if(s&&Ce.push(s),j&&Ce.push(r),Q){const te=i.makeTensorInfo([],"float32",E_(o,"float32"));Ce.push(te),T.push(te)}const Z=i.runWebGLProgram(ce,Ce,"float32"),le=Pt({inputs:{x:Z},backend:i,attrs:{shape:e.outShape}});T.push(Z);for(const te of T)i.disposeIntermediateTensorInfo(te);return le}const cLt={kernelName:CF,backendName:"webgl",kernelFunc:function lLt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r}=n,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=i,d=zf(l),h=Ca(s.shape,r.shape,o,c,a,u,!1,d);let p;if(1!==h.filterHeight||1!==h.filterWidth||1!==h.dilationHeight||1!==h.dilationWidth||1!==h.strideHeight||1!==h.strideWidth||"SAME"!==h.padInfo.type&&"VALID"!==h.padInfo.type)if(h.strideWidth<=2&&"channelsLast"===d&&Ie().getBool("WEBGL_EXP_CONV")){const g=new oSe(h);p=e.runWebGLProgram(g,[s,r],"float32",[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]])}else if(Ie().getBool("WEBGL_CONV_IM2COL"))p=lSe({x:s,filter:r,convInfo:h,backend:e});else{const g=new rSe(h);p=e.runWebGLProgram(g,[s,r],"float32")}else p=aSe({x:s,filter:r,convInfo:h,backend:e});const f=Pt({inputs:{x:p},backend:e,attrs:{shape:h.outShape}});return e.disposeIntermediateTensorInfo(p),f}};class uLt{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${n.batchSize}; b++) {\n          for (int yR = 0; yR < ${n.outHeight}; yR++) {\n            int xR = wR + yR * ${n.strideHeight} - ${n.padInfo.top};\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${n.outWidth}; yC++) {\n              int xC = wC + yC * ${n.strideWidth} - ${n.padInfo.left};\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              ${"channelsLast"===n.dataFormat?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);"}\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class dLt{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;const e=n.filterHeight,i=n.filterWidth,o="channelsLast"===n.dataFormat;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-n.padInfo.top}, ${i-1-n.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${o?3:1}];\n\n        ivec2 dyCorner = ivec2(coords[${o?1:2}], coords[${o?2:3}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${i}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${i} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${n.outChannels}; d2++) {\n\n              if (${o}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class hLt{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape,this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${n.batchSize}; b++) {\n          for (int yF = 0; yF < ${n.outDepth}; yF++) {\n            int xF = wF + yF * ${n.strideDepth} - ${n.padInfo.front};\n\n            if (xF < 0 || xF >= ${n.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${n.outHeight}; yR++) {\n              int xR = wR + yR * ${n.strideHeight} - ${n.padInfo.top};\n\n              if (xR < 0 || xR >= ${n.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${n.outWidth}; yC++) {\n                int xC = wC + yC * ${n.strideWidth} - ${n.padInfo.left};\n\n                if (xC < 0 || xC >= ${n.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class pLt{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;const e=n.filterDepth,i=n.filterHeight,s=n.filterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${e-1-n.padInfo.front}, ${i-1-n.padInfo.top}, ${s-1-n.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${e}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${n.strideDepth}.0;\n\n          if (dyF < 0.0 || dyF >= ${n.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${e} - 1 - wF;\n\n          for (int wR = 0; wR < ${i}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${i} - 1 - wR;\n\n            for (int wC = 0; wC < ${s}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${s} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${n.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const mLt={kernelName:pU,backendName:"webgl",kernelFunc:function fLt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,dy:r}=n,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=i,d=zf(l),h=Ca(s.shape,u,o,1,a,c,!1,d),p=new uLt(h);return e.runWebGLProgram(p,[s,r],"float32")}};class _Lt{constructor(n){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=n.inShape,this.enableShapeUniforms=ol(this.outputShape.length);const e=n.filterHeight,i=n.filterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-n.padInfo.top}, ${i-1-n.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${i}; wC++) {\n            int wCPerm = ${i} - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ${n.outWidth}.0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${n.outWidth}.0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    `}}const bLt={kernelName:SF,backendName:"webgl",kernelFunc:function gLt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,filter:r}=n,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=i,d=zf(c),h=Ca(o,r.shape,a,1,l,u,!1,d);if(Ie().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===d){const p=[[h.strideHeight,h.strideWidth]],f=new _Lt(h);return e.runWebGLProgram(f,[s,r],"float32",p)}{const p=new dLt(h);return e.runWebGLProgram(p,[s,r],"float32")}}},yLt={kernelName:xF,backendName:"webgl",kernelFunc:function vLt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r}=n,{strides:o,pad:a,dilations:l}=i,c=F_(s.shape,r.shape,o,l,a),u=new oLt(c);return e.runWebGLProgram(u,[s,r],"float32")}},CLt={kernelName:fU,backendName:"webgl",kernelFunc:function wLt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,dy:r}=n,{strides:o,pad:a,filterShape:l}=i,c=F_(s.shape,l,o,1,a),u=new hLt(c);return e.runWebGLProgram(u,[s,r],"float32")}},xLt={kernelName:mU,backendName:"webgl",kernelFunc:function SLt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,filter:r}=n,{pad:o,strides:a,inputShape:l}=i,c=F_(l,r.shape,a,1,o),u=new pLt(c);return e.runWebGLProgram(u,[s,r],"float32")}},ILt=us({opSnippet:wC+"\n  return cos(x);\n",packedOpSnippet:`\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ${ey}\n  return result;\n`}),kLt={kernelName:bI,backendName:"webgl",kernelFunc:ILt},DLt=us({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),ALt={kernelName:vI,backendName:"webgl",kernelFunc:DLt};class MLt{constructor(n,e,i,s,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,c]=n,[u]=e,[d,h]=i;this.outputShape=[u,d,h,c];const p="bilinear"===s?1:0,[f,g]=[a-1+".0",l-1+".0"],[v,y,w]=d>1?[""+(a-1)/(d-1),"(y2-y1) * height_ratio",`y1*${f} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${f}`],[x,T,k]=h>1?[""+(l-1)/(h-1),"(x2-x1) * width_ratio",`x1*${g} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${g}`];this.userCode=`\n      const float height_ratio = float(${v});\n      const float width_ratio = float(${x});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${o}) {\n          return;\n        }\n\n        float height_scale = ${y};\n        float width_scale = ${T};\n\n        float in_y = ${w};\n        if( in_y < 0.0 || in_y > ${f} ) {\n          setOutput(float(${r}));\n          return;\n        }\n        float in_x = ${k};\n        if( in_x < 0.0 || in_x > ${g} ) {\n          setOutput(float(${r}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${p} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}const NLt={kernelName:gU,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e,attrs:i}=t,{image:s,boxes:r,boxInd:o}=n,{cropSize:a,method:l,extrapolationValue:c}=i,u=new MLt(s.shape,r.shape,a,l,c);return e.runWebGLProgram(u,[s,r,o],"float32")}};var oP=function(t){return t.Prod="*",t.Sum="+",t}(oP||{});class cSe{constructor(n,e,i,s){this.op=n,this.outputShape=e,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const r=this.outputShape.length,a=i?this.op===oP.Prod?"1.0":"0.0":`getX(${uSe(r,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";i?(c=s?"end != "+(l-1):"end != 0",u=s?"end + 1":"end - 1"):(c=s?`end + pow2 < ${l}`:"end >= pow2",u=s?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${Js(r)} coords = getOutputCoords();\n        int end = ${dSe(r,"coords",this.op)};\n        float val = ${a};\n        int pow2 = int(pow(2.0, index));\n        if (${c}) {\n          int idx = ${u};\n          ${dSe(r,"coords",this.op)} = idx;\n          val ${this.op}= getX(${uSe(r,"coords",this.op)});\n        }\n        setOutput(val);\n      }\n    `}}function uSe(t,n,e){if(1===t)return`${n}`;if(2===t)return`${n}.x, ${n}.y`;if(3===t)return`${n}.x, ${n}.y, ${n}.z`;if(4===t)return`${n}.x, ${n}.y, ${n}.z, ${n}.w`;throw new Error(`Cumulative ${e} for rank ${t} is not yet supported`)}function dSe(t,n,e){if(1===t)return`${n}`;if(2===t)return`${n}.y`;if(3===t)return`${n}.z`;if(4===t)return`${n}.w`;throw new Error(`Cumulative ${e} for rank ${t} is not yet supported`)}function hSe(t,n,e,i,s,r){const o=n.shape.length,a=Gr([i],o);let l=n;null!=a&&(l=xl({inputs:{x:n},backend:e,attrs:{perm:a}}));const c=go(1,o)[0];if(c!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${n.shape.length-1} but got axis=${i}`);const u=l.shape[c];let d=Nc({inputs:{x:l},backend:e});for(let h=0;h<=Math.ceil(Math.log2(u))-1;h++){const p=new cSe(t,l.shape,!1,r),g=d;d=e.runWebGLProgram(p,[d],d.dtype,[[h]]),e.disposeIntermediateTensorInfo(g)}if(s){const h=new cSe(t,l.shape,s,r),p=d;d=e.runWebGLProgram(h,[d],d.dtype),e.disposeIntermediateTensorInfo(p)}if(null!=a){const p=xl({inputs:{x:d},backend:e,attrs:{perm:$_(a)}});return e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(l),p}return d}const RLt={kernelName:_U,backendName:"webgl",kernelFunc:function OLt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,exclusive:o,reverse:a}=i;return hSe(oP.Prod,s,e,r,o,a)}},LLt={kernelName:EF,backendName:"webgl",kernelFunc:function FLt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,exclusive:o,reverse:a}=i;return hSe(oP.Sum,s,e,r,o,a)}},$Lt={kernelName:bU,backendName:"webgl",kernelFunc:function PLt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,weights:r}=n,{size:o,binaryOutput:a}=i;if(1===s.shape.length){const l=e.readSync(s.dataId),c=e.readSync(r.dataId),u=MCe(l,c,r.dtype,r.shape,o);return e.makeTensorInfo([o],r.dtype,u)}if(2===s.shape.length){const l=e.bufferSync(s),c=e.bufferSync(r),u=GNt(l,c,o,a);return e.makeTensorInfo(u.shape,r.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}};class BLt{constructor(n,e,i){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=e,this.dataFormat=i,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${e};\n      int offset_h = imod(h, ${e});\n      int in_w = w / ${e};\n      int offset_w = imod(w, ${e});\n      int offset_d = (offset_h * ${e} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const zLt={kernelName:vU,backendName:"webgl",kernelFunc:function VLt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{blockSize:r,dataFormat:o}=i,a=s.shape[0],d=("NHWC"===o?s.shape[1]:s.shape[2])*r,h=("NHWC"===o?s.shape[2]:s.shape[3])*r,p=("NHWC"===o?s.shape[3]:s.shape[1])/(r*r),g=new BLt("NHWC"===o?[a,d,h,p]:[a,p,d,h],r,o);return e.runWebGLProgram(g,[s],s.dtype)}};class pSe{constructor(n,e=!1,i=null,s=!1,r=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=ol(this.outputShape.length);const o=n.filterHeight,a=n.filterWidth,l=n.outChannels/n.inChannels;let c="",u="";i&&(c=s?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${i}\n        }`:r?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${i}\n        }`:`\n          float activation(float x) {\n            ${i}\n          }\n        `,u="result = activation(result);");const d=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${c}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${l};\n        int q = d2 - d1 * ${l};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${o}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${a}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${d}\n        ${u}\n        setOutput(result);\n      }\n    `}}class fSe{constructor(n,e=!1,i=null,s=!1,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=ol(this.outputShape.length);const o=n.outChannels/n.inChannels,a=n.padInfo.left,l=n.strideWidth,c=n.dilationWidth,u=n.filterHeight,d=n.filterWidth,h=d;let p="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let y=0;y<d;y++)p+=`\n          vec4 xTexelC${2*y};\n          int xTexelC${2*y}Ready;\n          vec4 xTexelC${2*y+1};\n          int xTexelC${2*y+1}Ready;\n          vec4 xC${y};`;p+=`\n    for (int r = 0; r < ${u}; r++) {\n      `;for(let y=0;y<d;y++)p+=`\n          xTexelC${2*y} = vec4(0.0);\n          xTexelC${2*y}Ready = 0;\n          xTexelC${2*y+1} = vec4(0.0);\n          xTexelC${2*y+1}Ready = 0;\n          xC${y} = vec4(0.0);`;p+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let y=0;y<(h+1)/2;y++){const w=2*y;if(p+=`\n          xC = xCCorner + ${w*c};\n          `,1===l){if(w<d&&(a%2==1?(p+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {\n                  xTexelC${w} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${w}.zw = vec2(0.0);\n                  }\n                  xTexelC${w}Ready = 1;\n                }\n              `,p+=1===c&&w>0?`\n                xC${w} = vec4(xTexelC${w-2}.zw, xTexelC${w}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${w} = vec4(previous.zw, xTexelC${w}.xy);\n                  } else {\n                    xC${w} = vec4(0.0, 0.0, xTexelC${w}.xy);\n                  }\n                  `):p+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {\n                  xTexelC${w} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${w}.zw = vec2(0.0);\n                  }\n                  xTexelC${w}Ready = 1;\n                }\n\n                xC${w} = xTexelC${w};\n                `,w+1<d)){const x=a%2==0?Q9(c):c;c%2==0&&a%2==1||c%2!=0&&a%2!=1?(p+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${x};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {\n                    xTexelC${w+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${w+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${w+1}Ready = 1;\n                  }\n                  `,p+=c>1?`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC${w+1} = vec4(previous.zw, xTexelC${w+1}.xy);\n                    } else {\n                     xC${w+1} = vec4(0.0, 0.0, xTexelC${w+1}.xy);\n                    }\n                    `:`\n                    xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.xy);\n                    `):p+=1===x?`\n                    xC${w+1} = xTexelC${w};\n                    `:`\n                    xCOffset = xC + ${x};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {\n                      xTexelC${w+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${w+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${w+1}Ready = 1;\n                    }\n\n                    xC${w+1} = xTexelC${w+1};\n                    `}}else w<d&&(a%2==1?(p+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {\n                  xTexelC${w} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${w}.zw = vec2(0.0);\n                  }\n                  xTexelC${w}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${w+1}Ready == 0) {\n                  xTexelC${w+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${w+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${w+1}Ready = 1;\n                }\n\n                xC${w} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);\n              `,w+1<d&&(p+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${w+1} = vec4(xTexelC${w+1}.xy, final.xy);\n                `)):(p+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {\n                  xTexelC${w} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${w}.zw = vec2(0.0);\n                  }\n                  xTexelC${w}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {\n                  xTexelC${w+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${w+1}.zw = vec2(0.);\n                  }\n                  xTexelC${w+1}Ready = 1;\n                }\n\n                xC${w} = vec4(\n                  xTexelC${w}.xy, xTexelC${w+1}.xy);\n              `,w+1<d&&(p+=`\n                  xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);\n                `)));w<d&&(p+=`\n            wTexel = getW(r, ${w}, d1, q);\n            dotProd += xC${w} * vec4(wTexel.xz, wTexel.xz);\n          `,w+1<d&&(p+=`\n              wTexel = getW(r, ${w+1}, d1, q);\n              dotProd += xC${w+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}p+="\n    }\n  ",p+="\n      }\n    ";let f="",g="";i&&(f=s?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${i}\n        }`:r?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${i}\n        }`:`vec4 activation(vec4 x) {\n          ${i}\n        }`,g="result = activation(result);");const v=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${f}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${o};\n        int q = d2 - d1 * ${o};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${p}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${v}\n        ${g}\n        setOutput(result);\n      }\n    `}}const GLt={kernelName:TF,backendName:"webgl",kernelFunc:function ULt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r}=n,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=i;let u=l;null==u&&(u=[1,1]),U(La(o,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const d=Ca(s.shape,r.shape,o,u,a,c,!0);let h;return h=Ie().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels==1?new fSe(d):new pSe(d),e.runWebGLProgram(h,[s,r],"float32",[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]])}};class jLt{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${n.outChannels/n.inChannels} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${n.batchSize}; b++) {\n          for (int yR = 0; yR < ${n.outHeight}; yR++) {\n            int xR = wR + yR * ${n.strideHeight} - ${n.padInfo.top};\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${n.outWidth}; yC++) {\n              int xC = wC + yC * ${n.strideWidth} - ${n.padInfo.left};\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class HLt{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;const e=n.filterHeight,i=n.filterWidth,l=n.outChannels/n.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-n.padInfo.top}, ${i-1-n.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${i}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${i} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${l}; dm++) {\n              int d2 = d1 * ${l} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const qLt={kernelName:yU,backendName:"webgl",kernelFunc:function WLt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,dy:r}=n,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=i,d=Ca(s.shape,u,o,a,l,c,!0),h=new jLt(d);return e.runWebGLProgram(h,[s,r],"float32")}},XLt={kernelName:wU,backendName:"webgl",kernelFunc:function KLt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,filter:r}=n,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=i,d=Ca(u,r.shape,o,a,l,c,!0),h=new HLt(d);return e.runWebGLProgram(h,[s,r],"float32")}};class YLt{constructor(n){this.variableNames=["X"],this.outputShape=[n,n],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const QLt={kernelName:CU,backendName:"webgl",kernelFunc:function ZLt(t){const{inputs:n,backend:e}=t,{x:i}=n,s=[...i.shape,...i.shape],r=Le(i.shape),o=Pt({inputs:{x:i},backend:e,attrs:{shape:[r]}}),a=new YLt(r),l=e.runWebGLProgram(a,[o],o.dtype),c=Pt({inputs:{x:l},backend:e,attrs:{shape:s}});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(l),c}};class JLt{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;const{inHeight:e,inWidth:i,padInfo:s,strideHeight:r,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=n,{top:d,left:h}=s;this.userCode=`\n      const ivec2 strides = ivec2(${r}, ${o});\n      const ivec2 pads = ivec2(${d}, ${h});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${a}; h++) {\n          int hIn = hBeg + h * ${c};\n\n          if (hIn >= 0 && hIn < ${e}) {\n            for (int w = 0; w < ${l}; w++) {\n              int wIn = wBeg + w * ${u};\n\n              if (wIn >= 0 && wIn < ${i}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}const t3t={kernelName:IF,backendName:"webgl",kernelFunc:function e3t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r}=n,{strides:o,pad:a,dilations:l}=i,c=c2(s.shape,r.shape,o,a,"NHWC",l);let u;const d=new JLt(c);u=e.runWebGLProgram(d,[s,r],"float32");const h=Pt({inputs:{x:u},backend:e,attrs:{shape:c.outShape}});return e.disposeIntermediateTensorInfo(u),h}},i3t={kernelName:TU,backendName:"webgl",kernelFunc:function n3t(t){const{inputs:n,backend:e,attrs:i}=t,{equation:s}=i,r=n,{allDims:o,summedDims:a,idDims:l}=hH(s,r.length);fH(o.length,l,r);const{path:c,steps:u}=mH(a,l),d=u.length;let h=null,p=o.length;const f=[];for(let g=0;g<d;++g){for(const v of u[g]){const{permutationIndices:y,expandDims:w}=pH(p,l[v]);let x;_H(y)?x=r[v]:(x=xl({inputs:{x:r[v]},backend:e,attrs:{perm:y}}),f.push(x));const T=x.shape.slice();for(let k=0;k<w.length;++k)T.splice(w[k],0,1);es(x.shape,T)||(x=Pt({inputs:{x},backend:e,attrs:{shape:T}}),f.push(x)),null===h?h=x:(h=ZW({inputs:{a:x,b:h},backend:e}),f.push(h))}g<d-1&&(c[g]>=0&&(h=eP({inputs:{x:h},backend:e,attrs:{axis:c[g]-(o.length-p),keepDims:!1}}),f.push(h)),p--)}for(const g of f)g!==h&&e.disposeIntermediateTensorInfo(g);return h}},s3t=us({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),r3t={kernelName:wI,backendName:"webgl",kernelFunc:s3t},l3t={kernelName:IU,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e}=t,{dy:i,y:s}=n,r=Ie().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new yC("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",i.shape,s.shape):new Jv("return (b >= 0.0) ? a : a * (b + 1.0);",i.shape,s.shape);return e.runWebGLProgram(r,[i,s],i.dtype)}},c3t=Ba({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:KNt}),u3t={kernelName:kF,backendName:"webgl",kernelFunc:c3t},h3t=us({opSnippet:`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${sH};\n  float a1 = ${rH};\n  float a2 = ${oH};\n  float a3 = ${aH};\n  float a4 = ${lH};\n  float a5 = ${cH};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`}),p3t={kernelName:CI,backendName:"webgl",kernelFunc:h3t},mSe=us({opSnippet:wC+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:XNt,dtype:"float32"}),m3t={kernelName:SI,backendName:"webgl",kernelFunc:mSe};function tq(t){const{inputs:n,attrs:e,backend:i}=t,{dim:s}=e,{input:r}=n,o=r.shape.length,a=r.shape.slice();let l=s;return s<0&&(U(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),a.splice(l,0,1),Pt({inputs:{x:r},backend:i,attrs:{shape:a}})}const _3t={kernelName:DF,backendName:"webgl",kernelFunc:tq},_Se="return exp(x) - 1.0;",g3t=us({opSnippet:_Se,packedOpSnippet:_Se,cpuKernelImpl:YNt}),b3t={kernelName:xI,backendName:"webgl",kernelFunc:g3t};class gSe{constructor(n,e,i){this.variableNames=["real","imag"];const s=e[1];this.outputShape=e;const r=i?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=i?`${s}.0`:"1.0";let a;if("real"===n)a="return real * expR - imag * expI;";else{if("imag"!==n)throw new Error(`FFT component must be either "real" or "imag", got ${n}.`);a="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${r};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${a}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${s});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${s}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${o};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}function bSe(t,n,e){const i=e.texData.get(t.dataId),s=Le(t.shape),r=t.shape[t.shape.length-1],a=Pt({inputs:{x:t},backend:e,attrs:{shape:[s/r,r]}}),l=a.shape,c=new gSe("real",l,n),u=new gSe("imag",l,n),d=[{dataId:i.complexTensorInfos.real.dataId,dtype:i.complexTensorInfos.real.dtype,shape:l},{dataId:i.complexTensorInfos.imag.dataId,dtype:i.complexTensorInfos.imag.dtype,shape:l}],h=e.runWebGLProgram(c,d,"float32"),p=e.runWebGLProgram(u,d,"float32"),f=eg({inputs:{real:h,imag:p},backend:e});e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(p);const g=Pt({inputs:{x:f},backend:e,attrs:{shape:t.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(f),g}const y3t={kernelName:"FFT",backendName:"webgl",kernelFunc:function v3t(t){const{inputs:n,backend:e}=t,{input:i}=n;return bSe(i,!1,e)}};class w3t{constructor(n,e){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=n,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function Y2(t){const{backend:n,attrs:e}=t,{shape:i,value:s}=e;let{dtype:r}=e;if(r=r||Ow(s),"string"===r){const o=fo(r,Le(i));return o.fill(s),n.makeTensorInfo(i,r,o)}{const o=new w3t(i,s);return n.runWebGLProgram(o,[],r,[[s]])}}const C3t={kernelName:DU,backendName:"webgl",kernelFunc:Y2};class S3t{constructor(n){this.variableNames=["Image"],this.outputShape=[];const e=n[2];this.outputShape=n,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${e} - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${e}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const x3t={kernelName:AU,backendName:"webgl",kernelFunc:({inputs:t,backend:n})=>{const{image:e}=t,i=n,s=new S3t(e.shape);return i.runWebGLProgram(s,[e],e.dtype)}},vSe="return floor(x);",E3t=us({opSnippet:vSe,packedOpSnippet:vSe,cpuKernelImpl:ZNt}),T3t={kernelName:EI,backendName:"webgl",kernelFunc:E3t},I3t=Ba({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),k3t={kernelName:TI,backendName:"webgl",kernelFunc:I3t};class D3t{constructor(n){this.variableNames=["A"];const e=Cl(),[i,s]=n;this.outputShape=n,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${i}.0);\n\n        vec4 values = ${e.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}class A3t{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const e=Cl(),[i,s]=n;this.outputShape=n,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${s}.0, ${i}.0);\n            vec4 values = ${e.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${e.output} = result;\n      }\n    `}}const M3t={kernelName:hG,backendName:"webgl",kernelFunc:function N3t(t){const{inputs:n,backend:e,attrs:i}=t;let{pixels:s}=n;const{numChannels:r}=i,o=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,c]=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],u=[c,l],d=[c,l,r];if(a||o){const g=Ie().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(null==SC||g!==nq)&&(nq=g,SC=document.createElement("canvas").getContext("2d",{willReadFrequently:nq})),SC.canvas.width=l,SC.canvas.height=c,SC.drawImage(s,0,0,l,c),s=SC.canvas}const h=e.makeTensorInfo(u,"int32");e.texData.get(h.dataId).usage=hd.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(h.dataId),s);const p=Ie().getBool("WEBGL_PACK")?new A3t(d):new D3t(d),f=e.runWebGLProgram(p,[h],"int32");return e.disposeData(h.dataId),f}};let SC,nq=Ie().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const R3t={kernelName:mL,backendName:"webgl",kernelFunc:function O3t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r,bias:o,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=i,g=zf(u),v=Ca(s.shape,r.shape,l,d,c,h,!1,g);let y;const w=[],x=null!=o,T=null!=a,k="leakyrelu"===p,R=()=>{const D=[s,r],F=($,j)=>{if("NCHW"===j&&1===$.shape.length&&1!==$.shape[0]){const Q=Pt({inputs:{x:$},backend:e,attrs:{shape:[$.shape[0],1,1]}});return w.push(Q),Q}return $};if(x&&D.push(F(o,u)),T&&D.push(F(a,u)),k){const $=e.makeTensorInfo([],"float32",E_(f,"float32"));D.push($),w.push($)}return D};if(1!==v.filterHeight||1!==v.filterWidth||1!==v.dilationHeight||1!==v.dilationWidth||1!==v.strideHeight||1!==v.strideWidth||"SAME"!==v.padInfo.type&&"VALID"!==v.padInfo.type)if(v.strideWidth<=2&&"channelsLast"===g&&Ie().getBool("WEBGL_EXP_CONV")){const D=p?W2(p,!0):null,F=new oSe(v,x,D,T,k),$=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],j=R();y=e.runWebGLProgram(F,j,"float32",$)}else if(Ie().getBool("WEBGL_CONV_IM2COL"))y=lSe({x:s,filter:r,convInfo:v,backend:e,bias:o,activation:p,preluActivationWeights:a,leakyreluAlpha:f});else{const D=p?W2(p,!1):null,F=new rSe(v,x,D,T,k),$=R();y=e.runWebGLProgram(F,$,"float32")}else y=aSe({x:s,filter:r,convInfo:v,backend:e,bias:o,activation:p,preluActivationWeights:a,leakyreluAlpha:f});const N=Pt({inputs:{x:y},backend:e,attrs:{shape:v.outShape}});return w.push(y),w.forEach(D=>e.disposeIntermediateTensorInfo(D)),N}},L3t={kernelName:_L,backendName:"webgl",kernelFunc:function F3t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,filter:r,bias:o,preluActivationWeights:a}=n,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=i,f=[];let g=u;null==g&&(g=[1,1]),U(La(l,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${g}'`);const v=Ca(s.shape,r.shape,l,g,c,d,!0),y=Ie().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels==1,w=h?W2(h,y):null,x=[s,r],T=null!=o,k=null!=a,R="leakyrelu"===h;if(T&&x.push(o),k&&x.push(a),R){const $=e.makeTensorInfo([],"float32",E_(p,"float32"));x.push($),f.push($)}let N;N=y?new fSe(v,T,w,k,R):new pSe(v,T,w,k,R);const F=e.runWebGLProgram(N,x,"float32",[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]]);return f.forEach($=>e.disposeIntermediateTensorInfo($)),F}};class P3t{constructor(n,e,i,s){this.sliceDim=n,this.strides=e,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=i;const r=Js(i.length);let o="\n    int index;";for(let a=0;a<this.sliceDim;a++)o+=`\n          index = round(getIndices(coords[0], ${a}));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};\n          flattenIndex += index * ${this.strides[a]};`;this.userCode=`\n         void main() {\n          ${r} coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ${o}\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      `}}const B3t={kernelName:MU,backendName:"webgl",kernelFunc:function $3t(t){const{inputs:n,backend:e}=t,{params:i,indices:s}=n,r=s.shape,o=r[r.length-1],a=Le(i.shape),[l,c,u,d]=iH(i,s),h=Pt({inputs:{x:s},backend:e,attrs:{shape:[c,o]}}),p=Pt({inputs:{x:i},backend:e,attrs:{shape:[Le(i.shape)/u,u]}});if(e.shouldExecuteOnCPU([i,s])||"string"===i.dtype){const y=e.readSync(s.dataId),w=e.bufferSync(i),x=QNt(y,w,i.dtype,c,o,u,d,i.shape,a);return e.makeTensorInfo(l,i.dtype,x.values)}const f=new P3t(o,d,[c,u],i.shape),g=e.runWebGLProgram(f,[p,h],p.dtype),v=Pt({inputs:{x:g},backend:e,attrs:{shape:l}});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(g),v}};class V3t{constructor(n,e){this.variableNames=["A","indices"],this.outputShape=e,this.rank=e.length;const i=Js(this.rank),s=function z3t(t){const e=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[];for(let s=0;s<t.length;s++)i.push(2===s?"index":`${e[s]}`);return i.join()}(n);this.userCode=`\n      void main() {\n        ${i} resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ${n[2]}) ? 1.0 : 0.0;\n        setOutput(inBounds * getA(${s}));\n      }\n    `}}function ySe(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,indices:r}=n,{axis:o,batchDims:a}=i,l=zi(o,s.shape)[0];if(Ie().get("DEBUG")){const w=e.readSync(r.dataId),x=s.shape[l];for(let T=0;T<w.length;++T){const k=w[T];U(k<=x-1&&k>=0,()=>`GatherV2: the index value ${k} is not in [0, ${x-1}]`)}}const c=vH(s,r,l,a),u=Le(r.shape),d=[],h=Pt({inputs:{x:s},backend:e,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=Pt({inputs:{x:r},backend:e,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(h),d.push(p);const f=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(e.shouldExecuteOnCPU([s,r])||"string"===s.dtype){const w=e.bufferSync(p),x=e.bufferSync(h),T=JNt(x,w,f);return d.forEach(k=>e.disposeIntermediateTensorInfo(k)),e.makeTensorInfo(c.outputShape,T.dtype,T.values)}const g=new V3t(h.shape,f),v=e.runWebGLProgram(g,[h,p],h.dtype);d.push(v);const y=Pt({inputs:{x:v},backend:e,attrs:{shape:c.outputShape}});return d.forEach(w=>e.disposeIntermediateTensorInfo(w)),y}const U3t={kernelName:MF,backendName:"webgl",kernelFunc:ySe},G3t=Ba({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:eOt,dtype:"bool"}),j3t={kernelName:NF,backendName:"webgl",kernelFunc:G3t},H3t=Ba({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:tOt}),W3t={kernelName:II,backendName:"webgl",kernelFunc:H3t},K3t={kernelName:NU,backendName:"webgl",kernelFunc:function q3t(t){const{inputs:n,backend:e}=t,{input:i}=n;return bSe(i,!0,e)}},X3t=us({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),Y3t={kernelName:DI,backendName:"webgl",kernelFunc:X3t},Z3t=us({opSnippet:"return float(isinf(x));",dtype:"bool"}),Q3t={kernelName:AI,backendName:"webgl",kernelFunc:Z3t},J3t=us({opSnippet:"return float(isnan(x));",dtype:"bool"}),ePt={kernelName:MI,backendName:"webgl",kernelFunc:J3t},tPt=Ba({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:nOt,dtype:"bool"}),nPt={kernelName:RF,backendName:"webgl",kernelFunc:tPt},iPt=Ba({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:iOt,dtype:"bool"}),sPt={kernelName:FF,backendName:"webgl",kernelFunc:iPt},oPt={kernelName:RU,backendName:"webgl",kernelFunc:function rPt(t){const{backend:n,attrs:e}=t,{start:i,stop:s,num:r}=e,o=sOt(i,s,r);return n.makeTensorInfo([o.length],"float32",o)}},lPt=us({opSnippet:wC+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:rOt}),cPt={kernelName:NI,backendName:"webgl",kernelFunc:lPt},dPt=us({opSnippet:wC+"\n  return log(1.0 + x);\n"}),hPt={kernelName:OI,backendName:"webgl",kernelFunc:dPt},pPt=Ba({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),fPt={kernelName:LF,backendName:"webgl",kernelFunc:pPt},mPt=us({opSnippet:"return float(!(x >= 1.0));"}),_Pt={kernelName:PF,backendName:"webgl",kernelFunc:mPt},gPt=Ba({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),bPt={kernelName:$F,backendName:"webgl",kernelFunc:gPt};class vPt{constructor(n,e,i,s,r){this.variableNames=["x"],this.outputShape=[];const o=e,a=n[3]-1;let l;this.outputShape=n;const c=`float(${i}) + float(${s}) * sum`;l=.5===r?`inversesqrt(${c})`:1===r?`1.0/(${c})`:`exp(log(${c}) * float(-${r}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${o}; j <= ${o}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${a}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${l};\n        setOutput(val);\n      }\n    `}}class yPt{constructor(n,e,i,s,r){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=e,a=n[3]-1;let l;this.outputShape=n;const c=`float(${i}) + float(${s}) * sum`;l=.5===r?`inversesqrt(${c})`:1===r?`1.0/(${c})`:`exp(log(${c}) * float(-${r}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${o};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${o}; j <= ${o}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${l};\n        setOutput(result);\n      }\n    `}}const wPt={kernelName:BF,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{depthRadius:r,bias:o,alpha:a,beta:l}=i,c=Ie().getBool("WEBGL_PACK_NORMALIZATION")?new yPt(s.shape,r,o,a,l):new vPt(s.shape,r,o,a,l);return e.runWebGLProgram(c,[s],s.dtype)}};class CPt{constructor(n,e,i,s,r){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=e,this.bias=i,this.alpha=s,this.beta=r,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${e})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${e} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${s}) * norm + float(${i});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${s})\n                * float(${r})\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${r});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}const SPt={kernelName:FU,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e,attrs:i}=t,{x:s,y:r,dy:o}=n,{depthRadius:a,bias:l,alpha:c,beta:u}=i,d=new CPt(s.shape,a,l,c,u);return e.runWebGLProgram(d,[s,r,o],s.dtype)}};function wSe(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{reductionIndices:r,keepDims:o}=i,a=s.shape.length,l=zi(r,s.shape);let c=l;const u=Gr(c,a),d=null!=u,h=e.shouldExecuteOnCPU([s]);let p=s;if(d){if(h){const x=e.texData.get(p.dataId).values,T=new Array(a);for(let N=0;N<T.length;N++)T[N]=s.shape[u[N]];const k=XW(x,s.shape,s.dtype,u,T);p=e.makeTensorInfo(T,s.dtype),e.texData.get(p.dataId).values=k}else p=J3(s,u,e);c=go(c.length,a)}Pa("max",c,a);const[f,g]=Sa(p.shape,c);let y,v=f;if(o&&(v=_o(f,l)),h){const x=e.texData.get(p.dataId).values,T=oOt(x,Le(g),v,s.dtype);y=e.makeTensorInfo(v,s.dtype),e.texData.get(y.dataId).values=T}else y=function xPt(t,n,e,i){const s=Le(n),a=Pt({inputs:{x:t},attrs:{shape:[Le(t.shape)/s,s]},backend:i}),l=ty(a,t.dtype,"max",i),c=Pt({inputs:{x:l},attrs:{shape:e},backend:i});return i.disposeIntermediateTensorInfo(a),i.disposeIntermediateTensorInfo(l),c}(p,g,v,e);return d&&e.disposeIntermediateTensorInfo(p),y}const EPt={kernelName:VF,backendName:"webgl",kernelFunc:wSe},kPt=Ba({opSnippet:YW+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+ey+"\n  return result;\n",cpuKernelImpl:aOt}),DPt={kernelName:RI,backendName:"webgl",kernelFunc:kPt},MPt={kernelName:zF,backendName:"webgl",kernelFunc:function APt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n;j2(s,"maxPool");const{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=i;U(La(o,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`);const u=ed(s.shape,r,o,1,a,l);if(1===u.filterWidth&&1===u.filterHeight&&es(u.inShape,u.outShape))return Nc({inputs:{x:s},backend:e});const d=new q2(u,"max",!1);return e.runWebGLProgram(d,[s],s.dtype)}},OPt={kernelName:UF,backendName:"webgl",kernelFunc:function NPt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{filterSize:r,strides:o,pad:a,dataFormat:l,dimRoundingMode:c}=i,d=Vf(s.shape,r,o,[1,1,1],a,c,l),h=new QW(d,"max",!1);return e.runWebGLProgram(h,[s],s.dtype)}};class RPt{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;const r=n.effectiveFilterHeight,o=n.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${r-1-n.padInfo.top}, ${o-1-n.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${r};\n          wR += ${n.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${r*o-1} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${o} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class FPt{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;const l=n.effectiveFilterDepth,c=n.effectiveFilterHeight,u=n.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${l-1-n.padInfo.front}, ${c-1-n.padInfo.top}, ${u-1-n.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${l};\n           wD += ${n.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${n.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${n.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${c};\n              wR += ${n.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${n.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${u};\n                wC += ${n.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${n.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${l*c*u-1} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${c} * ${u} +\n                  wR * ${u} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const PPt={kernelName:PU,backendName:"webgl",kernelFunc:function LPt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,input:r}=n,o=r,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=i,h=Vf(o.shape,a,l,[1,1,1],c,u),p=new QW(h,"max",!0),f=e.runWebGLProgram(p,[o],o.dtype),g=new FPt(h),v=e.runWebGLProgram(g,[s,f],o.dtype);return e.disposeIntermediateTensorInfo(f),v}},BPt={kernelName:LU,backendName:"webgl",kernelFunc:function $Pt(t){const{inputs:n,backend:e,attrs:i}=t,{dy:s,input:r,output:o}=n,a=r;j2([r,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=i,h=ed(a.shape,l,c,1,u,d),f=new q2(h,"max",!0),g=e.runWebGLProgram(f,[a],a.dtype),v=new RPt(h),y=e.runWebGLProgram(v,[s,g],a.dtype);return e.disposeIntermediateTensorInfo(g),y}},zPt={kernelName:$U,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{const{x:i}=t,{filterSize:s,strides:r,pad:o,includeBatchInIndex:a}=n,l=e;U(4===i.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${i.shape.length}.`);const c=[1,1];U(La(r,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${r} and dilations '${c}'`);const u=ed(i.shape,s,r,c,o),[d,h]=function VPt(t,n,e,i){let s=new q2(e,"max",!1);const r=i.runWebGLProgram(s,[t],"float32");return s=new q2(e,"max",!0,!0,n),[r,i.runWebGLProgram(s,[t],"float32")]}(i,a,u,l);return[d,h]}},GPt={kernelName:GF,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{const{x:i}=t,{keepDims:s,axis:r}=n,o=e,a=i.shape.length,l=zi(r,i.shape);let c=l;const u=Gr(c,a),d=null!=u,h=o.shouldExecuteOnCPU([i]),p=[];let f=i;if(d){if(h){const T=o.texData.get(f.dataId).values,k=new Array(a);for(let D=0;D<k.length;D++)k[D]=i.shape[u[D]];const R=XW(T,i.shape,i.dtype,u,k);f=o.makeTensorInfo(k,i.dtype),o.texData.get(f.dataId).values=R}else f=J3(i,u,o);p.push(f),c=go(c.length,a)}Pa("sum",c,a);const[g,v]=Sa(f.shape,c);let y=g;s&&(y=_o(g,l));const w=function UPt(t,n,e,i){const s=Le(n),a=Pt({inputs:{x:t},attrs:{shape:[Le(t.shape)/s,s]},backend:i}),l=ty(a,"float32","mean",i),c=Pt({inputs:{x:l},attrs:{shape:e},backend:i});return i.disposeIntermediateTensorInfo(a),i.disposeIntermediateTensorInfo(l),c}(f,v,y,o);for(const x of p)o.disposeIntermediateTensorInfo(x);return w}},HPt={kernelName:jF,backendName:"webgl",kernelFunc:function jPt(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i,a=s.shape.length,l=zi(r,s.shape);let c=l;const u=Gr(c,a);let d=s;null!=u&&(d=xl({inputs:{x:s},backend:e,attrs:{perm:u}}),c=go(c.length,s.shape.length)),Pa("min",c,a);const[h,p]=Sa(d.shape,c),g=Pt({inputs:{x:d},backend:e,attrs:{shape:[-1,Le(p)]}}),v=ty(g,g.dtype,"min",e);let y;return y=Pt(o?{inputs:{x:v},backend:e,attrs:{shape:_o(h,l)}}:{inputs:{x:v},backend:e,attrs:{shape:h}}),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(v),null!=u&&e.disposeIntermediateTensorInfo(d),y}},KPt=Ba({opSnippet:YW+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+ey+"\n  return result;\n",cpuKernelImpl:lOt}),XPt={kernelName:FI,backendName:"webgl",kernelFunc:KPt};class YPt{constructor(n,e,i){this.variableNames=["x"],this.outputShape=e.map((u,d)=>u[0]+n[d]+u[1]);const s=n.length,r=Js(s),o=e.map(u=>u[0]).join(","),a=e.map((u,d)=>u[0]+n[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),c="reflect"===i?0:1;this.userCode=1!==s?`\n      ${r} start = ${r}(${o});\n      ${r} end = ${r}(${a});\n\n      void main() {\n        ${r} outC = getOutputCoords();\n        for (int i = 0; i < ${s}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${c};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};\n          }\n        }\n        ${r} coords = outC - start;\n        setOutput(getX(${l}));\n      }\n    `:`\n        int start = ${o};\n        int end = ${a};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${c};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${c};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}class ZPt{constructor(n,e,i){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((f,g)=>f[0]+n[g]+f[1]);const s=n.length,r=Js(s),o=e.map(f=>f[0]).join(","),a=e.map((f,g)=>f[0]+n[g]).join(","),l=Sl("rc",s),c=Sl("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,d=1===s?"source":`vec2(${c.slice(-2).join()})`,h="reflect"===i?0:1;let p="";if(1===s){const f=`\n        ${r} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${h};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${h};\n        }\n        source -= start;\n      `;p=`\n        ${r} rc = outputLoc;\n        ${f}\n        result[0] = getChannel(getX(${c.join()}), ${d});\n        ${l[s-1]} += 1;\n        if(${u}) {\n          ${f}\n          result[1] = getChannel(getX(${c.join()}), ${d});\n        }\n      `}else{const f=`\n        ${r} source = rc;\n        ${r} lt = ${r}(lessThan(source, start));\n        ${r} gte = ${r}(greaterThanEqual(source, end));\n        ${r} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${h}) +\n                gte * ((end - 1) * 2 - source + ${h});\n        source -= start;\n      `;p=`\n        ${r} rc = outputLoc;\n        ${f}\n        result[0] = getChannel(getX(${c.join()}), ${d});\n        ${l[s-1]} += 1;\n        if(${u}) {\n          ${f}\n          result[1] = getChannel(getX(${c.join()}), ${d});\n        }\n        rc = outputLoc;\n        ${l[s-2]} += 1;\n        if(${l[s-2]} < ${this.outputShape[s-2]}) {\n          ${f}\n          result[2] = getChannel(getX(${c.join()}), ${d});\n          ${l[s-1]} += 1;\n          if(${u}) {\n            ${f}\n            result[3] = getChannel(getX(${c.join()}), ${d});\n          }\n        }\n      `}this.userCode=`\n      const ${r} start = ${r}(${o});\n      const ${r} end = ${r}(${a});\n\n      void main() {\n        ${r} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}}const QPt={kernelName:HF,backendName:"webgl",kernelFunc:({inputs:t,backend:n,attrs:e})=>{const{x:i}=t,{paddings:s,mode:r}=e,o=Ie().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ZPt(i.shape,s,r):new YPt(i.shape,s,r);return n.runWebGLProgram(o,[i],i.dtype)}},t4t=Ba({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+ey+"\n  return result;\n"}),n4t={kernelName:LI,backendName:"webgl",kernelFunc:t4t};class i4t{constructor(n,e,i){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[n,i],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${e-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${e-1}));\n      }\n    `}}const CSe=Ba({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),s4t={kernelName:yI,backendName:"webgl",kernelFunc:CSe},SSe="return a - b;",xSe=Ba({opSnippet:SSe,packedOpSnippet:SSe,supportsComplex:!0,cpuKernelImpl:DOt}),r4t={kernelName:QI,backendName:"webgl",kernelFunc:xSe};function ESe(t){const{inputs:n,backend:e,attrs:i}=t,{logits:s}=n,{dim:r}=i,o=zi([r],s.shape),a=wSe({inputs:{x:s},backend:e,attrs:{reductionIndices:o,keepDims:!1}}),l=_o(a.shape,o),c=Pt({inputs:{x:a},backend:e,attrs:{shape:l}}),u=xSe({inputs:{a:s,b:c},backend:e}),d=mSe({inputs:{x:u},backend:e}),h=eP({inputs:{x:d},backend:e,attrs:{axis:o,keepDims:!1}}),p=Pt({inputs:{x:h},backend:e,attrs:{shape:l}}),f=CSe({inputs:{a:d,b:p},backend:e});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(p),f}const o4t={kernelName:cL,backendName:"webgl",kernelFunc:ESe},l4t={kernelName:BU,backendName:"webgl",kernelFunc:function a4t(t){const{inputs:n,backend:e,attrs:i}=t,{logits:s}=n,{numSamples:r,seed:o,normalized:a}=i,l=a?s:ESe({inputs:{logits:s},backend:e,attrs:{dim:s.shape.length-1}}),d=new i4t(l.shape[0],l.shape[1],r),p=e.runWebGLProgram(d,[l],"int32",[[o]]);return a||e.disposeIntermediateTensorInfo(l),p}},c4t=vu+"\n  return -x;\n",h4t={kernelName:WF,backendName:"webgl",kernelFunc:function d4t(t){const{inputs:n,backend:e}=t,{x:i}=n;if(e.shouldExecuteOnCPU([i])){const r=e.texData.get(i.dataId),[o,a]=uOt(r.values,i.shape,i.dtype);return e.makeTensorInfo(a,i.dtype,o)}let s;return s=Ie().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new J_(i.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new Ap(i.shape,c4t),e.runWebGLProgram(s,[i],i.dtype)}},p4t=Hj,m4t={kernelName:VU,backendName:"webgl",kernelFunc:function f4t(t){uu("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:n,backend:e,attrs:i}=t,{boxes:s,scores:r}=n,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=i,c=e.readSync(s.dataId),u=e.readSync(r.dataId),{selectedIndices:d}=p4t(c,u,o,a,l);return e.makeTensorInfo([d.length],"int32",new Int32Array(d))}},_4t=Wj,b4t={kernelName:zU,backendName:"webgl",kernelFunc:function g4t(t){uu("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:n,backend:e,attrs:i}=t,{boxes:s,scores:r}=n,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=i,u=e.readSync(s.dataId),d=e.readSync(r.dataId),{selectedIndices:h,validOutputs:p}=_4t(u,d,o,a,l,c);return[e.makeTensorInfo([h.length],"int32",new Int32Array(h)),e.makeTensorInfo([],"int32",new Int32Array([p]))]}},v4t=qj,w4t={kernelName:UU,backendName:"webgl",kernelFunc:function y4t(t){uu("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:n,backend:e,attrs:i}=t,{boxes:s,scores:r}=n,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=i,u=e.readSync(s.dataId),d=e.readSync(r.dataId),h=o,p=a,f=l,g=c,{selectedIndices:v,selectedScores:y}=v4t(u,d,h,p,f,g);return[e.makeTensorInfo([v.length],"int32",new Int32Array(v)),e.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};class C4t{constructor(n,e,i,s){this.variableNames=["indices"],this.outputShape=[n,e],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${s}), float(${i}),\n                      float(index == coords.y)));\n      }\n    `}}const S4t={kernelName:XF,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e,attrs:i}=t,{indices:s}=n,{dtype:r,depth:o,onValue:a,offValue:l}=i,c=Le(s.shape),u=new C4t(c,o,a,l),d=Pt({inputs:{x:s},backend:e,attrs:{shape:[c]}}),h=e.runWebGLProgram(u,[d],r);e.disposeIntermediateTensorInfo(d);const f=Pt({inputs:{x:h},backend:e,attrs:{shape:[...s.shape,o]}});return e.disposeIntermediateTensorInfo(h),f}};function aP(t){const{inputs:n,backend:e}=t,{x:i}=n;if("complex64"===i.dtype){const s=K2({inputs:{input:i},backend:e}),r=aP({inputs:{x:s},backend:e}),o=sP({inputs:{input:i},backend:e}),a=aP({inputs:{x:o},backend:e}),l=eg({inputs:{real:r,imag:a},backend:e});return e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(a),l}return Y2({attrs:{shape:i.shape,dtype:i.dtype,value:"string"===i.dtype?"":0},backend:e})}const x4t={kernelName:pL,backendName:"webgl",kernelFunc:aP},E4t={kernelName:KF,backendName:"webgl",kernelFunc:function TSe(t){const{inputs:n,backend:e}=t,{x:i}=n;if("string"===i.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===i.dtype){const s=K2({inputs:{input:i},backend:e}),r=TSe({inputs:{x:s},backend:e}),o=sP({inputs:{input:i},backend:e}),a=aP({inputs:{x:o},backend:e}),l=eg({inputs:{real:r,imag:a},backend:e});return e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(a),l}return Y2({attrs:{shape:i.shape,dtype:i.dtype,value:1},backend:e})}},I4t={kernelName:YF,backendName:"webgl",kernelFunc:function T4t(t){const{inputs:n,backend:e,attrs:i}=t,{axis:s}=i;if(1===n.length)return tq({inputs:{input:n[0]},backend:e,attrs:{dim:s}});const r=n[0].shape,o=n[0].dtype;n.forEach(u=>{Cc(r,u.shape,"All tensors passed to stack must have matching shapes"),U(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],c=sSe({inputs:n.map(u=>{const d=tq({inputs:{input:u},backend:e,attrs:{dim:s}});return a.push(d),d}),backend:e,attrs:{axis:s}});return a.forEach(u=>e.disposeIntermediateTensorInfo(u)),c}};class k4t{constructor(n,e,i){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((c,u)=>c[0]+n[u]+c[1]);const s=n.length,r=Js(s),o=e.map(c=>c[0]).join(","),a=e.map((c,u)=>c[0]+n[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);this.userCode=1!==s?`\n      ${r} start = ${r}(${o});\n      ${r} end = ${r}(${a});\n\n      void main() {\n        ${r} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${r} coords = outC - start;\n          setOutput(getX(${l}));\n        }\n      }\n    `:`\n        int start = ${o};\n        int end = ${a};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}class D4t{constructor(n,e,i){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((g,v)=>g[0]+n[v]+g[1]);const s=n.length,r=Js(s),o=e.map(g=>g[0]).join(","),a=e.map((g,v)=>g[0]+n[v]).join(","),l=Sl("rc",s),c=Sl("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,d=1===s?"source":`vec2(${c.slice(-2).join()})`,h=[`${r} rc = outputLoc;`,`${l[s-1]} += 1;\n       if(${u}) {\n      `,1===s?"":`}\n       rc = outputLoc;\n       ${l[s-2]} += 1;\n       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,1===s?"":`  ${l[s-1]} += 1;\n         if(${u}) {`],p=1===s?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let f="";for(let g=0,v=1===s?2:4;g<v;g++)f+=`\n        ${h[g]}\n        if (${p}) {\n          result[${g}] = float(value);\n        } else {\n          ${r} source = rc - start;\n          result[${g}] = getChannel(getX(${c.join()}), ${d});\n        }\n      `;f+=1===s?"} ":"}}",this.userCode=`\n      const ${r} start = ${r}(${o});\n      const ${r} end = ${r}(${a});\n\n      void main() {\n        ${r} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${f}\n        setOutput(result);\n      }\n    `}}const ISe=t=>{const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{paddings:r,constantValue:o}=i;if(0===Le(s.shape))return Y2({backend:e,attrs:{shape:r.map((u,d)=>u[0]+s.shape[d]+u[1]),value:o,dtype:s.dtype}});const a=Ie().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new D4t(s.shape,r,o):new k4t(s.shape,r,o);return e.runWebGLProgram(a,[s],s.dtype,[[o]])},A4t={kernelName:ZF,backendName:"webgl",kernelFunc:ISe},O4t=Ba({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+ey+"\n  return result;\n"}),R4t={kernelName:$I,backendName:"webgl",kernelFunc:O4t},L4t={kernelName:JF,backendName:"webgl",kernelFunc:function F4t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{axis:r,keepDims:o}=i,a=s.shape.length,l=[],c=zi(r,s.shape);let u=c;const d=Gr(u,a);let p,h=s;if(null!=d&&(h=xl({inputs:{x:s},backend:e,attrs:{perm:d}}),u=go(u.length,a),l.push(h)),Pa("prod",u,a),e.shouldExecuteOnCPU([h])){const f=e.texData.get(h.dataId).values,{outVals:g,outShape:v,outDtype:y}=hOt(h.shape,h.dtype,f,u);p=e.makeTensorInfo(v,y,g)}else{const[f,g]=Sa(h.shape,u),v=Le(g),y=Pt({inputs:{x:h},backend:e,attrs:{shape:[-1,v]}}),x=ty(y,vG(s.dtype),"prod",e);p=Pt({inputs:{x},backend:e,attrs:{shape:f}}),l.push(y),l.push(x)}if(o){l.push(p);const f=_o(p.shape,c);p=Pt({inputs:{x:p},backend:e,attrs:{shape:f}})}return l.forEach(f=>e.disposeIntermediateTensorInfo(f)),p}},$4t={kernelName:GU,backendName:"webgl",kernelFunc:function P4t(t){const{inputs:n,backend:e,attrs:i}=t,{paramsNestedSplits:s,paramsDenseValues:r,indices:o}=n,{outputRaggedRank:a}=i,l=s.map(y=>e.readSync(y.dataId)),c=s.map(y=>y.shape),u=e.readSync(r.dataId),d=e.readSync(o.dataId),[h,p,f]=pOt(l,c,u,r.shape,r.dtype,d,o.shape,a),g=h.map(y=>e.makeTensorInfo([y.length],"int32",y)),v=e.makeTensorInfo(f,r.dtype,p);return g.concat([v])}},V4t={kernelName:jU,backendName:"webgl",kernelFunc:function B4t(t){const{inputs:n,backend:e}=t,{starts:i,limits:s,deltas:r}=n,o=e.readSync(i.dataId),a=e.readSync(s.dataId),l=e.readSync(r.dataId),[c,u]=fOt(o,i.shape,i.dtype,a,s.shape,l,r.shape);return[e.makeTensorInfo([c.length],"int32",c),e.makeTensorInfo([u.length],i.dtype,u)]}},U4t={kernelName:HU,backendName:"webgl",kernelFunc:function z4t(t){const{inputs:n,backend:e,attrs:i}=t,{shape:s,values:r,defaultValue:o,rowPartitionTensors:a}=n,{rowPartitionTypes:l}=i,c=e.readSync(s.dataId),u=e.readSync(r.dataId),d=e.readSync(o.dataId),h=a.map(v=>e.readSync(v.dataId)),p=a.map(v=>v.shape),[f,g]=mOt(c,s.shape,u,r.shape,r.dtype,d,o.shape,h,p,l);return e.makeTensorInfo(f,r.dtype,g)}},kSe=t=>{const{backend:n,attrs:e}=t,{start:i,stop:s,step:r,dtype:o}=e,a=_Ot(i,s,r,o);return n.makeTensorInfo([a.length],o,a)},G4t={kernelName:WU,backendName:"webgl",kernelFunc:kSe},j4t=us({opSnippet:"return 1.0 / x;"}),H4t={kernelName:BI,backendName:"webgl",kernelFunc:j4t},q4t=us({opSnippet:vu+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),K4t={kernelName:VI,backendName:"webgl",kernelFunc:q4t},Y4t=us({opSnippet:vu+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),Z4t={kernelName:zI,backendName:"webgl",kernelFunc:Y4t};class Q4t{constructor(n,e,i,s,r){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=n;this.outputShape=[o,e,i,c];const u=[s&&e>1?a-1:a,s&&i>1?l-1:l],d=[s&&e>1?e-1:e,s&&i>1?i-1:i];let h;h=r?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/d[0]},\n          ${u[1]/d[1]});\n      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${h};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}class J4t{constructor(n,e,i,s,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=n;this.outputShape=[o,e,i,c];const u=[s&&e>1?a-1:a,s&&i>1?l-1:l],d=[s&&e>1?e-1:e,s&&i>1?i-1:i];let h;h=r?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/d[0]},\n          ${u[1]/d[1]},\n          ${u[1]/d[1]});\n      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,\n                                     ${l}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${h};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${c-1};\n        bool hasNextRow = coords.z < ${i-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}const t$t={kernelName:nL,backendName:"webgl",kernelFunc:function e$t(t){const{inputs:n,backend:e,attrs:i}=t,{images:s}=n,{alignCorners:r,halfPixelCenters:o,size:a}=i,[l,c]=a,u=Ie().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new J4t(s.shape,l,c,r,o):new Q4t(s.shape,l,c,r,o);return e.runWebGLProgram(u,[s],"float32")}};class n$t{constructor(n,e,i){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;const[,s,r]=e,[,o,a]=n,l=[i&&o>1?s-1:s,i&&a>1?r-1:r],c=[i&&o>1?o-1:o,i&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],h=1/u,p=1/d,f=2*Math.ceil(h)+2,g=2*Math.ceil(p)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${d});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${p});\n\n        const int winHeight = int(${f});\n        const int winWidth = int(${g});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${a}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${r-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const s$t={kernelName:XU,backendName:"webgl",kernelFunc:function i$t(t){const{inputs:n,backend:e,attrs:i}=t,{images:s,dy:r}=n,{alignCorners:o}=i,a=new n$t(r.shape,s.shape,o);return e.runWebGLProgram(a,[r],r.dtype)}};class r$t{constructor(n,e,i,s,r){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=n;this.outputShape=[o,e,i,c];const u=[s&&e>1?a-1:a,s&&i>1?l-1:l],d=[s&&e>1?e-1:e,s&&i>1?i-1:i];let p;p=r?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/d[0]},\n          ${u[1]/d[1]});\n      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${p};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${s?"0.5":"0.0"})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}class o$t{constructor(n,e,i,s,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=n;this.outputShape=[o,e,i,c];const u=[s&&e>1?a-1:a,s&&i>1?l-1:l],d=[s&&e>1?e-1:e,s&&i>1?i-1:i];let p;p=r?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/d[0]},\n          ${u[1]/d[1]},\n          ${u[1]/d[1]});\n      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,\n                                     ${l}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${p};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${s?"0.5":"0.0"})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${c-1};\n        bool hasNextRow = coords.z < ${i-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}const l$t={kernelName:tL,backendName:"webgl",kernelFunc:function a$t(t){const{inputs:n,backend:e,attrs:i}=t,{images:s}=n,{alignCorners:r,halfPixelCenters:o,size:a}=i,[l,c]=a,u=Ie().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new o$t(s.shape,l,c,r,o):new r$t(s.shape,l,c,r,o);return e.runWebGLProgram(u,[s],s.dtype)}};class c$t{constructor(n,e,i){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;const[,s,r]=e,[,o,a]=n,l=[i&&o>1?s-1:s,i&&a>1?r-1:r],c=[i&&o>1?o-1:o,i&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],h=1/u,p=1/d,f=2*Math.ceil(h)+2,g=2*Math.ceil(p)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${d});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${p});\n\n        const int winHeight = int(${f});\n        const int winWidth = int(${g});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${a}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${l[0]}) *\n                (float(dyR) / float(${c[0]}));\n\n            float sourceFracCol =\n                float(${l[1]}) *\n                  (float(dyC) / float(${c[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${s}) - 1),\n                ${i} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${r}) - 1),\n                ${i} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const d$t={kernelName:KU,backendName:"webgl",kernelFunc:function u$t(t){const{inputs:n,backend:e,attrs:i}=t,{images:s,dy:r}=n,{alignCorners:o}=i,a=new c$t(r.shape,s.shape,o);return e.runWebGLProgram(a,[r],r.dtype)}};class h$t{constructor(n,e){this.variableNames=["x"];const i=n.length;if(i>4)throw new Error(`WebGL backend: Reverse of rank-${i} tensor is not yet supported`);if(this.outputShape=n,1===i)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${n[0]} - coord - 1));\n        }\n      `);const r=n.map((a,l)=>(a=>-1!==e.indexOf(a)&&1!==n[a]?`${n[a]} - coords[${a}] - 1`:`coords[${a}]`)(l)).join(","),o=Js(i);this.userCode=`\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${r}));\n      }\n    `}}class p$t{constructor(n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const i=n.length;if(i>4)throw new Error(`WebGL backend: Reverse of rank-${i} tensor is not yet supported`);this.outputShape=n;const s=Sl("rc",i),r=`${s[i-1]} + 1 < ${this.outputShape[i-1]}`,o=`${s[i-2]} + 1 < ${this.outputShape[i-2]}`,a=Js(i);function h(f){const g=n.map((w,x)=>function p(f,g){return-1!==e.indexOf(f)&&1!==n[f]?`${n[f]} - ${g[f]} - 1`:`${g[f]}`}(x,f));return`getChannel(getX(${g.join(",")}), vec2(${g.slice(-2).join(",")}))`}this.userCode=1===i?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${n[0]} - rc - 1),\n            ${n[0]} - rc - 1);\n          if(${r}){\n              result.g = getChannel(getX(${n[0]} - (rc  + 1) - 1),\n                ${n[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${a} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function l(f){return h(f)}(s.slice())};\n          if(${r}){\n            result.g = ${function c(f){return f[i-1]="("+f[i-1]+" + 1)",h(f)}(s.slice())};\n          }\n          if(${o}) {\n            result.b = ${function u(f){return f[i-2]="("+f[i-2]+" + 1)",h(f)}(s.slice())};\n            if(${r}) {\n              result.a = ${function d(f){return f[i-1]="("+f[i-1]+" + 1)",f[i-2]="("+f[i-2]+" + 1)",h(f)}(s.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}const m$t={kernelName:iL,backendName:"webgl",kernelFunc:function f$t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{dims:r}=i,o=s.shape.length,a=zi(r,s.shape);if(0===o)return Nc({inputs:{x:s},backend:e});const l=Ie().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new p$t(s.shape,a):new h$t(s.shape,a);return e.runWebGLProgram(l,[s],s.dtype)}};class _$t{constructor(n,e){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const i=n[1],s=n[2];this.outputShape=n;let r="";r="number"==typeof e?`float outputValue = ${e.toFixed(2)};`:`\n        vec3 fill = vec3(${e.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${r}\n          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${i}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const g$t={kernelName:pG,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{const{image:i}=t,{radians:s,fillValue:r,center:o}=n,a=e,l=new _$t(i.shape,r),[c,u]=eH(o,i.shape[1],i.shape[2]),d=[[c,u,Math.sin(s),Math.cos(s)]];return a.runWebGLProgram(l,[i],i.dtype,d)}},b$t=us({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),v$t={kernelName:UI,backendName:"webgl",kernelFunc:b$t},y$t=us({opSnippet:"return inversesqrt(x);",cpuKernelImpl:gOt}),w$t={kernelName:GI,backendName:"webgl",kernelFunc:y$t};class iq{constructor(n,e,i,s,r,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const c=Js(r.length),u=Js(o.length);let d="";1===i?d="i":2===i&&(d="i, j");let p="";1===s?p="i":2===s&&(p="i, coords[1]");let g="";l&&(g="coords[0], coords[1]"),this.userCode=`\n        ${c} strides = ${c}(${r});\n\n        void main() {\n          ${u} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${n}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${e}; j++) {\n              int index = round(getIndices(${d}));\n              flattenedIndex += index * ${e>1?"strides[j]":"strides"};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += getUpdates(${p});\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(${g}), sum, float(found)));\n        }\n      `}}class C$t{constructor(n,e,i,s,r,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const c=Js(r.length),u=Js(o.length);let d="";1===i?d="i":2===i&&(d="i, j");let p="";1===s?p="i":2===s&&(p="i, coords[1]");let g="";l&&(g="coords[0], coords[1]"),this.userCode=`\n        ${c} strides = ${c}(${r});\n\n        void main() {\n          ${u} coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ${n}; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ${e}; j+=2) {\n              ivec4 index = round(getIndices(${d}));\n              flattenedIndex += index.xz * ${e>1?"strides[j]":"strides"};\n              if (j + 1 < ${e}) {\n                flattenedIndex += index.yw * ${e>1?"strides[j + 1]":"strides"};\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = getUpdates(${p});\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(getDefaultValue(${g}), sum, found));\n        }\n      `}}const x$t={kernelName:YU,backendName:"webgl",kernelFunc:function S$t(t){const{inputs:n,backend:e,attrs:i}=t,{indices:s,updates:r}=n,{shape:o}=i,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Bv(0,s,o),h=[d/c,c];if(0===d)return e.makeTensorInfo(o,s.dtype);const p=Pt({inputs:{x:s},backend:e,attrs:{shape:[l,a]}}),f=Pt({inputs:{x:r},backend:e,attrs:{shape:[l,c]}}),g=e.makeTensorInfo([],"float32",new Float32Array([0]));let v;v=Ie().getBool("WEBGL_PACK")?new C$t(l,a,p.shape.length,f.shape.length,u,h):new iq(l,a,p.shape.length,f.shape.length,u,h);const y=e.runWebGLProgram(v,[f,p,g],f.dtype),w=Pt({inputs:{x:y},backend:e,attrs:{shape:o}});return e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(g),w}};class E$t{constructor(n,e,i,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[n,i];const o=`for (int i = 0; i < ${Math.ceil(Math.log2(e+1))}; ++i) { if (left >= right) break;`,a=2===Ie().getNumber("WEBGL_VERSION")?"while (left < right) {":o;this.userCode=`\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ${a}\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ${"left"===s?"<":"<="} value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     `}}const I$t={kernelName:QU,backendName:"webgl",kernelFunc:function T$t(t){const{inputs:n,backend:e,attrs:i}=t,{sortedSequence:s,values:r}=n,{side:o}=i,a=new E$t(s.shape[0],s.shape[1],r.shape[1],o);return e.runWebGLProgram(a,[s,r],"int32",[[s.shape[1]]])}};class k$t{constructor(n,e,i){let s,r;if(this.variableNames=["c","a","b"],this.outputShape=e,i>4)throw Error(`Where for rank ${i} is not yet supported`);if(1===i)r="resRC",s="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<e.length;u++)c.push(`${a[u]}`),u<n&&l.push(`${a[u]}`);s=l.join(),r=c.join()}const o=Js(i);this.userCode=`\n      void main() {\n        ${o} resRC = getOutputCoords();\n        float cVal = getC(${s});\n        if (cVal >= 1.0) {\n          setOutput(getA(${r}));\n        } else {\n          setOutput(getB(${r}));\n        }\n      }\n    `}}const A$t={kernelName:sL,backendName:"webgl",kernelFunc:function D$t(t){const{inputs:n,backend:e}=t,{condition:i,t:s,e:r}=n,o=new k$t(i.shape.length,s.shape,s.shape.length);return e.runWebGLProgram(o,[i,s,r],Sc(s.dtype,r.dtype))}},N$t=us({opSnippet:`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${QL};\n  float scale = ${JL};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`}),O$t={kernelName:jI,backendName:"webgl",kernelFunc:N$t},F$t=us({opSnippet:wC+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:vOt}),L$t={kernelName:KI,backendName:"webgl",kernelFunc:F$t},P$t=us({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),$$t={kernelName:qI,backendName:"webgl",kernelFunc:P$t},z$t=us({opSnippet:wC+"\n  return sin(x);\n",packedOpSnippet:`\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ${ey}\n  return result;\n`}),U$t={kernelName:HI,backendName:"webgl",kernelFunc:z$t},G$t=us({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),j$t={kernelName:WI,backendName:"webgl",kernelFunc:G$t},H$t=us({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),W$t={kernelName:XI,backendName:"webgl",kernelFunc:H$t},q$t={kernelName:aL,backendName:"webgl",kernelFunc:t=>{const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{blockShape:r,paddings:o}=i;U(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce((y,w)=>y*w),l=[[0,0]];l.push(...o);for(let y=1+r.length;y<s.shape.length;++y)l.push([0,0]);const c=[],u=ISe({inputs:{x:s},backend:e,attrs:{paddings:l,constantValue:0}}),d=S2(u.shape,r,a,!1),h=x2(d.length,r.length,!1),p=E2(u.shape,r,a,!1),f=Pt({inputs:{x:u},backend:e,attrs:{shape:d}}),g=xl({inputs:{x:f},backend:e,attrs:{perm:h}}),v=Pt({inputs:{x:g},backend:e,attrs:{shape:p}});return c.push(u),c.push(f),c.push(g),c.forEach(y=>e.disposeIntermediateTensorInfo(y)),v}},X$t={kernelName:JU,backendName:"webgl",kernelFunc:function K$t(t){const{inputs:n,backend:e}=t,{indices:i,values:s,denseShape:r,defaultValue:o}=n;if(1!==r.shape.length)throw new Error(`Dense shape must be a vector, saw:\n         ${r.shape}`);if(2!==i.shape.length)throw new Error(`Indices must be a matrix, saw:\n         ${i.shape}`);if(1!==s.shape.length)throw new Error(`Values must be a vector, saw:\n         ${s.shape}`);if(0!==o.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${o.shape}`);const a=e.readSync(i.dataId),l=e.readSync(s.dataId),c=e.readSync(r.dataId),u=e.readSync(o.dataId)[0],[d,h,p,f,g]=wOt(a,i.shape,i.dtype,l,s.dtype,c,u);return[e.makeTensorInfo(h,i.dtype,d),e.makeTensorInfo([h[0]],s.dtype,p),e.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(v=>Number(v)))),e.makeTensorInfo([g.length],i.dtype,new Int32Array(g))]}},Z$t={kernelName:eG,backendName:"webgl",kernelFunc:function Y$t(t){const{inputs:n,backend:e}=t,{inputIndices:i,inputShape:s,newShape:r}=n;if(2!==i.shape.length)throw new Error(`Input indices should be a matrix but received shape ${i.shape}`);if(1!==s.shape.length)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(1!==r.shape.length)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const o=Array.from(e.readSync(s.dataId)),a=e.readSync(i.dataId),l=Array.from(e.readSync(r.dataId)),[c,u,d]=COt(a,i.shape,i.dtype,o,l);return[e.makeTensorInfo(u,i.dtype,c),e.makeTensorInfo([d.length],r.dtype,new Int32Array(d))]}},J$t={kernelName:tG,backendName:"webgl",kernelFunc:function Q$t(t){const{inputs:n,backend:e}=t,{data:i,indices:s,segmentIds:r}=n;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.shape.length)throw new Error(`Indices should be a vector but received shape\n              ${s.shape}`);if(1!==r.shape.length)throw new Error(`Segment ids should be a vector but received shape\n              ${r.shape}`);const o=e.readSync(i.dataId),a=e.readSync(s.dataId),l=e.readSync(r.dataId),[c,u]=OCe(o,i.shape,i.dtype,a,l,!0);return e.makeTensorInfo(u,i.dtype,c)}},t8t={kernelName:nG,backendName:"webgl",kernelFunc:function e8t(t){const{inputs:n,backend:e}=t,{data:i,indices:s,segmentIds:r}=n;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==s.shape.length)throw new Error(`Indices should be a vector but received shape\n             ${s.shape}`);if(1!==r.shape.length)throw new Error(`Segment ids should be a vector but received shape\n             ${r.shape}`);const o=e.readSync(i.dataId),a=e.readSync(s.dataId),l=e.readSync(r.dataId),[c,u]=OCe(o,i.shape,i.dtype,a,l);return e.makeTensorInfo(u,i.dtype,c)}},i8t={kernelName:iG,backendName:"webgl",kernelFunc:function n8t(t){const{inputs:n,backend:e,attrs:i}=t,{sparseIndices:s,sparseValues:r,defaultValue:o}=n,{outputShape:a}=i,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=Bv(0,s,a),p=!1;if("string"===r.dtype){const y=e.bufferSync(s),w=e.bufferSync(r),x=I_(e.readSync(o.dataId)[0]),T=bOt(y,w,a,h,u,c,l,d,x,p);return e.makeTensorInfo(a,T.dtype,T.values)}const f=new iq(c,l,s.shape.length,r.shape.length,d,[h,1],p),g=e.runWebGLProgram(f,[r,s,o],r.dtype),v=Pt({inputs:{x:g},backend:e,attrs:{shape:a}});return e.disposeIntermediateTensorInfo(g),v}},r8t={kernelName:lL,backendName:"webgl",kernelFunc:function s8t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{numOrSizeSplits:r,axis:o}=i,a=zi(o,s.shape)[0],l=gH(s,r,a),u=new Array(s.shape.length).fill(0),d=s.shape.slice();return l.map(h=>{const p=[...d];p[a]=h;const f=CC({inputs:{x:s},backend:e,attrs:{begin:u,size:p}});return u[a]+=h,f})}},DSe="return sqrt(x);",o8t=us({opSnippet:DSe,packedOpSnippet:DSe,cpuKernelImpl:SOt}),a8t={kernelName:YI,backendName:"webgl",kernelFunc:o8t},c8t={kernelName:sG,backendName:"webgl",kernelFunc:us({opSnippet:"return x * x;"})},ASe="return (a - b) * (a - b);",u8t=Ba({opSnippet:ASe,packedOpSnippet:ASe}),d8t={kernelName:ZI,backendName:"webgl",kernelFunc:u8t},p8t={kernelName:uL,backendName:"webgl",kernelFunc:function h8t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n;if("string"!==s.dtype)throw new Error("Input must be of datatype string");const o=jf(e.readSync(s.dataId)),a=xOt(o,"string",i);return e.makeTensorInfo(s.shape,"string",a)}},m8t={kernelName:n2,backendName:"webgl",kernelFunc:function f8t({inputs:t,attrs:n,backend:e}){const{x:i}=t,r=new Ap(i.shape,vu+`\n    return x > 0.0 ? 1.0 : float(${n.alpha});\n  `);return e.runWebGLProgram(r,[i],i.dtype)}};class _8t{constructor(n,e,i){this.variableNames=["x"],this.outputShape=i;const s=i.length,r=Js(i.length),o=Js(i.length);let a="";if(1===s)a="coords * strides + begin";else{let l=0;a=i.map((c,u)=>(l++,1===i.length?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`\n      ${r} begin = ${r}(${n});\n      ${r} strides = ${r}(${e});\n\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${a}));\n      }\n    `}}const b8t={kernelName:rG,backendName:"webgl",kernelFunc:function g8t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{begin:r,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=i,{finalShapeSparse:p,finalShape:f,isIdentity:g,sliceDim0:v,isSimpleSlice:y,begin:w,end:x,strides:T}=sj(s.shape,r,o,a,l,c,u,d,h);let k;if(g)k=Pt({inputs:{x:s},backend:e,attrs:{shape:f}});else if(v||y){U(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const N=tj(w,x,T),D=CC({inputs:{x:s},backend:e,attrs:{begin:w,size:N}});k=Pt({inputs:{x:D},backend:e,attrs:{shape:f}}),e.disposeIntermediateTensorInfo(D)}else if(e.shouldExecuteOnCPU([s])){const D=e.readSync(s.dataId),F=Di(s.shape,s.dtype,D),$=EOt(p,F,T,w);k=e.makeTensorInfo(f,s.dtype,$.values)}else{const D=new _8t(w,T,p);k=e.runWebGLProgram(D,[s],s.dtype)}const R=Pt({inputs:{x:k},backend:e,attrs:{shape:f}});return e.disposeIntermediateTensorInfo(k),R}},y8t={kernelName:oG,backendName:"webgl",kernelFunc:function v8t(t){const{inputs:n,backend:e,attrs:i}=t,{separator:s,nGramWidths:r,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=i,{data:u,dataSplits:d}=n,h=e.readSync(u.dataId),p=e.readSync(d.dataId),[f,g]=TOt(h,p,s,r,o,a,l,c);return[e.makeTensorInfo([f.length],"string",f),e.makeTensorInfo(d.shape,"int32",g)]}},C8t={kernelName:aG,backendName:"webgl",kernelFunc:function w8t(t){const{inputs:n,backend:e,attrs:i}=t,{skipEmpty:s}=i,{input:r,delimiter:o}=n;if("string"!==r.dtype)throw new Error("Input must be of datatype string");if(1!==r.shape.length)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(0!==o.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=e.readSync(r.dataId),l=e.readSync(o.dataId)[0],[c,u,d]=IOt(a,l,s),h=u.length;return[e.makeTensorInfo([h,2],"int32",c),e.makeTensorInfo([h],"string",u),e.makeTensorInfo([2],"int32",new Int32Array(d))]}},x8t={kernelName:lG,backendName:"webgl",kernelFunc:function S8t(t){const{inputs:n,backend:e,attrs:i}=t,{numBuckets:s}=i,{input:r}=n;if("string"!==r.dtype)throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=e.readSync(r.dataId),a=kOt(o,s);return e.makeTensorInfo(r.shape,"int32",a)}},E8t=us({opSnippet:"return tan(x);"}),T8t={kernelName:JI,backendName:"webgl",kernelFunc:E8t},I8t=us({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),k8t={kernelName:e2,backendName:"webgl",kernelFunc:I8t},A8t={kernelName:ZU,backendName:"webgl",kernelFunc:function D8t(t){const{inputs:n,backend:e}=t,{tensor:s,indices:r,updates:o}=n,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Bv(0,r,s.shape),h=[d/c,c];if(0===d)return e.makeTensorInfo(s.shape,r.dtype);const p=Pt({inputs:{x:r},backend:e,attrs:{shape:[l,a]}}),f=Pt({inputs:{x:o},backend:e,attrs:{shape:[l,c]}}),g=Pt({inputs:{x:s},backend:e,attrs:{shape:h}}),v=new iq(l,a,p.shape.length,f.shape.length,u,h,!1,!0),y=e.runWebGLProgram(v,[f,p,g],g.dtype),w=Pt({inputs:{x:y},backend:e,attrs:{shape:s.shape}});return e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(y),w}};class M8t{constructor(n,e){this.variableNames=["A"];const i=new Array(n.length);for(let o=0;o<i.length;o++)i[o]=n[o]*e[o];this.outputShape=i,this.rank=i.length;const s=Js(this.rank),r=function N8t(t){const n=t.length;if(n>5)throw Error(`Tile for rank ${n} is not yet supported`);if(1===n)return`imod(resRC, ${t[0]})`;const e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],i=[];for(let s=0;s<t.length;s++)i.push(`imod(${e[s]}, ${t[s]})`);return i.join()}(n);this.userCode=`\n      void main() {\n        ${s} resRC = getOutputCoords();\n        setOutput(getA(${r}));\n      }\n    `}}function MSe(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{reps:r}=i;if("string"===s.dtype||s.shape.length>5){const l=e.readSync(s.dataId),c="string"===s.dtype?l.map(h=>I_(h)):l,u=Di(s.shape,s.dtype,c),d=AOt(u,r);return e.makeTensorInfo(d.shape,d.dtype,d.values)}const o=new M8t(s.shape,r);return e.runWebGLProgram(o,[s],s.dtype)}const O8t={kernelName:t2,backendName:"webgl",kernelFunc:MSe};class R8t{constructor(n){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=n,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class F8t{constructor(n){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=n,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function ny(t,n){null!==n&&t.disposeIntermediateTensorInfo(n)}function NSe(t){let n=1;for(;n<t;)n*=2;return n}const P8t={kernelName:cG,backendName:"webgl",kernelFunc:function L8t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s}=n,{k:r,sorted:o}=i,a=Ie().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Ie().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=s.shape,u=c[c.length-1];if(e.shouldExecuteOnCPU([s])||u<a||r>l){const $=e.readSync(s.dataId),[j,Q]=MOt($,c,s.dtype,r,o);return[e.makeTensorInfo(j.shape,j.dtype,j.values),e.makeTensorInfo(Q.shape,Q.dtype,Q.values)]}if(0===r)return c[c.length-1]=0,[e.makeTensorInfo(c,s.dtype,[]),e.makeTensorInfo(c,"int32",[])];if(1===u)return[s,Y2({attrs:{shape:c,dtype:"int32",value:0},backend:e})];const d=e.texData.get(s.dataId),h=null!==d&&d.isPacked,p=h?e.unpackTensor(s):s,g=Le(c)/u,v=Pt({inputs:{x:p},attrs:{shape:[g,u]},backend:e});h&&ny(e,p);const y=NSe(r),w=NSe(u);let x=null;const T=()=>null===x?[v,v]:[v,x],k=($,j,Q)=>{const Y=T(),ce=new R8t(Q),le=x;x=e.runWebGLProgram(ce,Y,"int32",[[u],[null===x?1:0],[Number.NEGATIVE_INFINITY],[$],[j]]),ny(e,le)};for(let $=1;$<y;$*=2){const j=2*$;for(let Q=$;Q>=1;Q/=2)k(j,Q,[g,w])}for(let $=w;$>y;$/=2){const j=T(),Q=new F8t([g,$/2]),Ce=x;x=e.runWebGLProgram(Q,j,"int32",[[u],[null===x?1:0],[y]]),ny(e,Ce);const Z=y/2,le=2*Z;for(let te=Z;te>=1;te/=2)k(le,te,x.shape)}let R=x;x=CC({inputs:{x},backend:e,attrs:{begin:0,size:[g,r]}}),ny(e,R);let N=ySe({inputs:{x:v,indices:x},backend:e,attrs:{axis:1,batchDims:1}});ny(e,v);const D=c.slice(0,-1);D.push(r),R=x,x=Pt({inputs:{x},attrs:{shape:D},backend:e}),ny(e,R);const F=N;return N=Pt({inputs:{x:N},attrs:{shape:D},backend:e}),ny(e,F),[N,x]}};class $8t{constructor(n,e,i,s,r,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a="nearest"===i?1:2;let l;switch(s){case"constant":default:l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${l} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${l} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${l} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${n} && 0 <= coordX && coordX < ${e}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${r});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${r});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${e}));\n                float mapY = mapCoord(inY, float(${n}));\n\n                if (${a} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}const V8t={kernelName:uG,backendName:"webgl",kernelFunc:function B8t(t){const{inputs:n,backend:e,attrs:i}=t,{image:s,transforms:r}=n,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=i,[u,d,h,p]=s.shape,[f,g]=c??[d,h],y=new $8t(d,h,o,a,l,[u,f,g,p]);return e.runWebGLProgram(y,[s,r],"float32")}},U8t={kernelName:dG,backendName:"webgl",kernelFunc:function z8t(t){const{inputs:n,attrs:e,backend:i}=t,{axis:s}=e,{x:r}=n;j2(r,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=i.readSync(r.dataId),{outputValues:a,outputShape:l,indices:c}=NOt(o,s,r.shape,r.dtype);return[i.makeTensorInfo(l,r.dtype,a),i.makeTensorInfo([c.length],"int32",c)]}},j8t={kernelName:dL,backendName:"webgl",kernelFunc:function G8t(t){const{inputs:n,backend:e,attrs:i}=t,{value:s}=n;let{axis:r}=i;r<0&&(r+=s.shape.length);const o=s,a=o.shape.length,l=s.shape[r],c=new Array(a-1);let u=0;for(let g=0;g<a;g++)g!==r&&(c[u++]=o.shape[g]);const d=[],h=new Array(a).fill(0),p=o.shape.slice();p[r]=1;const f=new Array(l);for(let g=0;g<f.length;g++){h[r]=g;const v=CC({inputs:{x:o},backend:e,attrs:{begin:h,size:p}}),y=Pt({inputs:{x:v},backend:e,attrs:{shape:c}});f[g]=y,d.push(v)}return d.forEach(g=>e.disposeIntermediateTensorInfo(g)),f}};class H8t{constructor(n,e){this.variableNames=["x","segmentIds"];const i=n.windowSize,s=n.batchSize,r=n.inSize,o=n.numSegments,a=o*Math.ceil(r/i);this.outputShape=[s,a];const u=4*Math.floor(i/4),d=i%4,h="\n        sumValue += dot(values, segFilter);\n    ";let p="";r%i>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${r}) {\n          return initializationValue;\n        }\n      `);let f="";r%i>0&&(f=`\n        if (inIdx < 0 || inIdx >= ${r}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${p}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${f}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${o})) * float(${i}));\n        int currentSeg = int(mod(float(outIdx), float(${o})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${h}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===d}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${h}\n        } else if (${2===d}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${h}\n        } else if (${3===d}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${h}\n        }\n        setOutput(sumValue);\n      }\n    `}}const q8t={kernelName:hL,backendName:"webgl",kernelFunc:function W8t(t){const{inputs:n,backend:e,attrs:i}=t,{x:s,segmentIds:r}=n,{numSegments:o}=i,a=s.shape.length,l=[];let c=0;const u=Gr([c],a);let d=s;null!=u&&(d=xl({inputs:{x:s},backend:e,attrs:{perm:u}}),l.push(d),c=go(1,a)[0]);const h=jye(d.shape,c,o),p=Le([d.shape[c]]),f=Pt({inputs:{x:d},backend:e,attrs:{shape:[-1,p]}});l.push(f);const g=vG(s.dtype),v=(T,k,R,N,D)=>{const F=T.shape[0],$=T.shape[1],j=Gye($,D),Y=new H8t({windowSize:j,inSize:$,batchSize:F,numSegments:D},k),ce=e.compileAndRun(Y,[T,R],N);if(l.push(ce),ce.shape[1]===D)return ce;const Ce=kSe({backend:e,attrs:{start:0,stop:D,step:1,dtype:"float32"}}),Z=MSe({inputs:{x:Ce},backend:e,attrs:{reps:[$/j]}});return l.push(Ce),l.push(Z),v(ce,k,Z,N,D)},w=Pt({inputs:{x:v(f,"unsortedSegmentSum",r,g,o)},backend:e,attrs:{shape:h}});let x=w;if(null!=u){l.push(w);const T=$_(u);x=xl({inputs:{x},backend:e,attrs:{perm:T}})}return l.forEach(T=>e.disposeIntermediateTensorInfo(T)),x}},K8t=[TRt,kRt,MRt,RRt,LRt,BRt,zRt,GRt,qRt,XRt,QRt,tFt,sFt,lFt,dFt,pFt,mFt,vFt,wFt,SFt,TFt,NFt,RFt,$Ft,VFt,HFt,qFt,ZFt,cRt,eLt,rLt,cLt,mLt,bLt,yLt,CLt,xLt,kLt,ALt,NLt,RLt,LLt,$Lt,zLt,GLt,qLt,XLt,QLt,t3t,i3t,r3t,l3t,u3t,p3t,m3t,_3t,b3t,y3t,C3t,x3t,T3t,k3t,M3t,R3t,L3t,B3t,U3t,j3t,W3t,lRt,K3t,iLt,Y3t,Q3t,ePt,dRt,nPt,sPt,oPt,cPt,hPt,fPt,_Pt,bPt,wPt,SPt,EPt,DPt,MPt,OPt,PPt,BPt,zPt,GPt,HPt,XPt,QPt,n4t,l4t,fRt,h4t,m4t,b4t,w4t,zFt,S4t,E4t,I4t,A4t,R4t,pRt,L4t,$4t,V4t,U4t,G4t,UFt,s4t,H4t,K4t,Z4t,_Rt,t$t,s$t,l$t,d$t,m$t,g$t,v$t,w$t,x$t,I$t,A$t,O$t,L$t,$$t,U$t,j$t,MFt,o4t,W$t,q$t,X$t,Z$t,J$t,t8t,i8t,r8t,a8t,c8t,d8t,p8t,m8t,b8t,y8t,C8t,x8t,r4t,SRt,T8t,k8t,A8t,O8t,P8t,V8t,xRt,U8t,j8t,q8t,x4t];for(const t of K8t)mG(t);const Y8t=["video"],Z8t=["canvas"],Q8t=["message_element"],J8t=["waveform_canvas"],e5t=(t,n)=>({name:t,photo:n});function t5t(t,n){1&t&&(m(0,"div",24),S(1," Speech Recognition is not supported "),_())}function n5t(t,n){1&t&&(m(0,"div",24),S(1," Speech Synthesis is not supported "),_())}function i5t(t,n){if(1&t&&(m(0,"div",22),O(1,t5t,2,0,"div",23)(2,n5t,2,0,"div",23),_()),2&t){const e=E();b(),C("ngIf",e.error.speech_recognition),b(),C("ngIf",e.error.speech_synthesis)}}function s5t(t,n){1&t&&(m(0,"div",25)(1,"app-icon",26),S(2,"mic"),_()())}function r5t(t,n){1&t&&(m(0,"div",27),q(1,"img",28),m(2,"p",29),S(3),H(4,"translate"),_()()),2&t&&(b(3),K(" ",ne(4,1,"PANEL.NO_MESSAGES")," "))}function o5t(t,n){if(1&t){const e=se();m(0,"div",30),H(1,"async"),P("click",function(){const s=B(e).$implicit,r=E();return V(r.show_time[s.id]=!r.show_time[s.id])}),q(2,"a-user-avatar",31),m(3,"div",32)(4,"div",33)(5,"div"),S(6),_(),m(7,"div",34),S(8),H(9,"dateFrom"),_()(),q(10,"div",35),H(11,"sanitize"),_()()}if(2&t){const e=n.$implicit,i=E();Oe("waiting-margin",ne(1,6,i.waiting)),b(2),C("user",function dne(t,n,e,i,s){return mne(Ue(),kl(),t,n,e,i,s)}(12,e5t,e.user_name||"",e.user_id!==i.user.id?"assets/icons/ai-avatar.jpg":"assets/icons/user-avatar.jpg")),b(4),K(" ",e.user_id!==i.user.id?"Assistant":"You"," "),b(2),K(" ",ne(9,8,e.timestamp+i.offset)," "),b(2),C("innerHTML",ne(11,10,e.content),Nu)}}function a5t(t,n){1&t&&(q(0,"div",42),H(1,"async"),H(2,"sanitize")),2&t&&C("innerHTML",ne(2,3,ne(1,1,E(2).progress).content),Nu)}function l5t(t,n){if(1&t){const e=se();m(0,"div",36)(1,"button",37),P("click",function(){B(e);const s=E();return V(s.show_info=!s.show_info)}),m(2,"div",38)(3,"app-icon",26),S(4),H(5,"async"),_(),m(6,"p",8),S(7),H(8,"async"),H(9,"async"),_()(),m(10,"div",39),q(11,"div",40),O(12,a5t,3,5,"div",41),_()()()}if(2&t){const e=E();b(4),Ye(e.icons[ne(5,3,e.progress).function]||"info"),b(3),K(" ",ne(8,5,e.progress).message||ne(9,7,e.progress).function," "),b(5),C("ngIf",e.show_info)}}function c5t(t,n){1&t&&(m(0,"div",43),q(1,"div",44)(2,"div",45)(3,"div",46),m(4,"span",47),S(5,"Waiting for reply..."),_()()),2&t&&Hn("bottom","8px")}function u5t(t,n){if(1&t){const e=se();m(0,"button",48),P("click",function(){return B(e),V(E().endService())}),m(1,"app-icon",26),S(2,"call_end"),_()()}}function d5t(t,n){if(1&t){const e=se();m(0,"button",49),P("click",function(){return B(e),V(E().setup=!0)}),m(1,"h2",50),S(2,"Touch to Start"),_()()}}let h5t=(()=>{class t extends hn{get user(){return Qt()}constructor(e,i,s){super(),this._route=e,this._chat=i,this._org=s,this.scale=1,this.current_text="",this.last_text="",this.listening=!1,this.person_in_view=!1,this.debug=!0,this.setup=!1,this.error={},this._time=0,this._last_message="",this._previous_message="",this.icons={list_function_schemas:"help",call_function:"settings",task_complete:"check_circle"},this.messages=this._chat.messages,this.progress=this._chat.progress.pipe(gi(()=>this._scrollToBottom())),this.waiting=this._chat.messages.pipe(me(r=>0!==r.length&&r[r.length-1]?.user_id===this.user?.id)),this._spoken=!1,this._last_text="",this._frame_count=0}ngOnInit(){var e=this;return z(function*(){yield e._org.initialised.pipe(as(s=>!!s)).toPromise();const i=()=>{e._setupVoiceRecognition(),window.removeEventListener("click",i)};window.addEventListener("click",i),e._context=e._canvas_el.nativeElement.getContext("2d",{willReadFrequently:!0}),e._setupWebcam(),e._chat.startChat(),e.subscription("chat.messages",e._chat.messages.subscribe(s=>{e._scrollToBottom();const r=s.filter(a=>a.user_id!==e.user?.id),o=r[r.length-1];r.length<1||e._last_message===o.id||(e._last_message=o.id,e._speakText(o.message))})),e.interval("process_frame",()=>e._processWebcamFrame(),500),e.subscription("route.query",e._route.queryParamMap.subscribe(s=>{s.has("debug")&&(e.debug="true"===s.get("debug"))})),e._listen()})()}startListening(){this.listening||!this.person_in_view||(this._recognition.start(),this.listening=!0)}endService(){this.setup=!1,this._recognition.stop(),this.listening=!1,this._last_text="",this._spoken=!1,this._chat.close()}_loadModel(){var e=this;return z(function*(){(function cft(t){ue.setBackend(t)})("webgl"),e._model=yield function Uxt(t){return CW.apply(this,arguments)}(`${location.origin}${location.pathname}assets/yolov8x_web_model/model.json`)})()}_processWebcamFrame(){var e=this;return z(function*(){e.setup&&(e._model||(yield e._loadModel()),Ee(()=>{const i=e._webcamToTensor(),s=e._model.predict(i),r=e._processPredictions(s,{0:"person"}),o=e.person_in_view;e.person_in_view=!1;for(const{label:l}of r)if("person"===l)return e.person_in_view=!0,void(e.setup&&!e._spoken&&(e._speakText("Hello, how may I help you?"),e._spoken=!0,e.clearTimeout("clean_chat")));o!==e.person_in_view&&e._recognition&&(e.person_in_view?(e._recognition.start(),e.listening=!0):(e._recognition.stop(),e.listening=!1,e._last_text="",e._spoken=!1,e.timeout("clean_chat",()=>e._chat.close(),15e3)))}))})()}_webcamToTensor(){this._context.drawImage(this._video_el.nativeElement,0,0,640,640);const i=this._context.getImageData(0,0,640,640),s=nve(i);return Rt(s,"float32").div(En(255)).expandDims(0)}_processPredictions(e,i){return Ee(()=>{const s=e.transpose([0,2,1]),r=this._calculateBoundingBoxes(s),o=s.slice([0,0,4],[-1,-1,Object.keys(i).length]).squeeze(0),[a,l]=[o.max(1),o.argMax(1)];return rd.nonMaxSuppression(r,a,e.shape[2],.45,.2).arraySync().map(u=>{const d=r.slice([u,0],[1,-1]).squeeze().arraySync(),h=l.slice([u],[1]).arraySync()[0];return{box:d,label:i[h]}})})}_calculateBoundingBoxes(e){const[i,s,r,o]=[e.slice([0,0,0],[-1,-1,1]),e.slice([0,0,1],[-1,-1,1]),e.slice([0,0,2],[-1,-1,1]),e.slice([0,0,3],[-1,-1,1])],a=Xt(i,pn(r,2)),l=Xt(s,pn(o,2));return mo([a,l,r,o],2).squeeze()}_setupWebcam(){var e=this;return z(function*(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const i=yield navigator.mediaDevices.getUserMedia({video:!0});e._video_el.nativeElement.srcObject=i}else console.error("getUserMedia is not supported")})()}_setupVoiceRecognition(){var e=this;return z(function*(){if(!loadVosklet)return e.timeout("loadVosklet",()=>e._setupVoiceRecognition());const s=new(window.SpeechRecognition||window.webkitSpeechRecognition);s.interimResults=!0,s.lang="en-US",s.onresult=r=>{const{transcript:o}=r.results[0][0];e.current_text=o,e.timeout("on_end",()=>e._handleEnd(),3e3)},s.onerror=r=>{if(console.warn("Speech Recognition Error:",r),"no-speech"===r.error)return e.current_text="",void(e.listening=!1);e.error.speech_recognition=!0},s.onend=r=>{e._handleEnd(),e.listening=!1},e._recognition=s,s.start(),e.setup=!0,e.listening=!0,e.interval("check_listening",()=>e.startListening(),500)})()}_speakText(e){if(this._last_text===e)return;if(!("speechSynthesis"in window)||!("SpeechSynthesisUtterance"in window))return void(this.error.speech_synthesis=!0);this._last_text=e,window.speechSynthesis.cancel();const i=new SpeechSynthesisUtterance(e);i.rate=1,i.pitch=1,new Promise(r=>{const o=window.speechSynthesis.getVoices();if(o.length>0){const a=o.find(l=>"Karen"===l.voiceURI);a&&(i.voice=a),r()}else window.speechSynthesis.onvoiceschanged=()=>{const l=window.speechSynthesis.getVoices().find(c=>"Karen"===c.voiceURI);l&&(i.voice=l),r()}}).then(()=>{window.speechSynthesis.speak(i)})}_handleEnd(){this.setup&&(this.last_text=this.current_text,this.current_text="",this.clearInterval("scale"),this.scale=1,!(this.last_text.length<=3)&&this.last_text!==this._previous_message&&(this._chat.startChat(),this._chat.sendMessage(this.last_text),this._previous_message=this.last_text,this.last_text=""))}_scrollToBottom(){this.timeout("scroll_to_bottom",()=>{const e=this._message_el.nativeElement;e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},50)}_listen(){var e=this;return z(function*(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return;const i=yield navigator.mediaDevices.getUserMedia({audio:!0}),s=window.AudioContext||window.webkitAudioContext;e._audio_context=new s,e._analyser=e._audio_context.createAnalyser(),e._audio_bytes=new Uint8Array(e._analyser.frequencyBinCount),e._audio_source=e._audio_context.createMediaStreamSource(i),e._audio_source.connect(e._analyser),e._frame_id=requestAnimationFrame(()=>e._processWaveform())})()}_processWaveform(){this._frame_count%2==0&&(this._analyser.getByteTimeDomainData(this._audio_bytes),this._drawWaveform()),this._frame_count+=1,this._frame_id=requestAnimationFrame(()=>this._processWaveform())}_drawWaveform(){if(!this.setup)return;const e=this._waveform_canvas_el.nativeElement,i=e.height,s=e.width,r=e.getContext("2d");let o=0;const a=1*s/this._audio_bytes.length;r.lineWidth=2,r.strokeStyle="#000000",r.clearRect(0,0,s,i),r.beginPath(),r.moveTo(0,i/2);for(const l of this._audio_bytes)r.lineTo(o,l/255*i),o+=a;r.lineTo(o,i/2),r.stroke()}static#e=this.\u0275fac=function(i){return new(i||t)(I(uc),I(dme),I(Sn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["app-panel-view"]],viewQuery:function(i,s){if(1&i&&(Gt(Y8t,7),Gt(Z8t,7),Gt(Q8t,7),Gt(J8t,7)),2&i){let r;nt(r=it())&&(s._video_el=r.first),nt(r=it())&&(s._canvas_el=r.first),nt(r=it())&&(s._message_el=r.first),nt(r=it())&&(s._waveform_canvas_el=r.first)}},features:[Ze],decls:27,vars:23,consts:[["waveform_canvas",""],["video",""],["canvas",""],["message_element",""],[1,"flex","items-center","justify-center","h-full","w-full"],[1,"relative","flex","items-center","justify-center","flex-1","h-full","bg-base-300","p-8",3,"click"],["width","256","height","128",1,"w-64","h-32"],[1,"absolute","top-0","inset-x-0","p-8","text-center"],[1,"text-sm"],[1,"absolute","bottom-0","inset-x-0","p-4","text-center"],["class","absolute top-2 left-1/2 -translate-x-1/2 px-4 py-2 text-center rounded-3xl bg-error text-error-content text-xs",4,"ngIf"],["autoplay","","playsinline","",1,"absolute","bottom-4","left-4","w-48","h-48","object-cover","rounded-xl","bg-base-200","border-[0.25rem]"],["class","absolute bottom-4 right-4 bg-success text-success-content h-12 w-12 rounded-full flex items-center justify-center",4,"ngIf"],["width","640","height","640",1,"absolute","opacity-0","pointer-events-none"],[1,"relative","w-[24rem]","h-full","overflow-auto","bg-base-100","flex","flex-col","justify-end"],["class","absolute inset-0 flex flex-col items-center justify-center space-y-4",4,"ngIf"],[1,"max-h-full","overflow-auto","w-full"],["class","my-2 p-2 flex space-x-4 hover:bg-base-200",3,"waiting-margin","click",4,"ngFor","ngForOf"],["class","p-4",4,"ngIf"],["class","absolute right-2 flex items-center justify-center space-x-2 p-1 rounded-2xl bg-base-100 border border-neutral",3,"bottom",4,"ngIf"],["icon","","matRipple","","class","absolute top-2 left-2 bg-error text-error-content shadow h-12 w-12",3,"click",4,"ngIf"],["splash","","matRipple","","class","absolute inset-0 text-white flex flex-col items-center justify-center z-20",3,"click",4,"ngIf"],[1,"absolute","top-2","left-1/2","-translate-x-1/2","px-4","py-2","text-center","rounded-3xl","bg-error","text-error-content","text-xs"],["class","flex items-center justify-center w-full h-full",4,"ngIf"],[1,"flex","items-center","justify-center","w-full","h-full"],[1,"absolute","bottom-4","right-4","bg-success","text-success-content","h-12","w-12","rounded-full","flex","items-center","justify-center"],[1,"text-2xl"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-4"],["src","assets/icons/no-pending.svg",1,"h-32","w-32","object-contain"],[1,"opacity-30"],[1,"my-2","p-2","flex","space-x-4","hover:bg-base-200",3,"click"],[1,"text-xl",3,"user"],[1,"flex","flex-1","flex-col","space-y-1"],[1,"flex","items-center","space-x-4"],[1,"text-xs","text-base-content","opacity-40","px-2","py-1","w-full","text-right"],["message","",1,"markdown","selectable","text-sm",3,"innerHTML"],[1,"p-4"],[1,"block","p-2","rounded","border-base-300","bg-info","text-info-content","w-full",3,"click"],[1,"flex","items-center","space-x-2"],[1,"relative","overflow-hidden","w-full","rounded"],[1,"absolute","inset-0","bg-base-100","opacity-10"],["class","text-xs text-mono text-left p-2 break-words",3,"innerHTML",4,"ngIf"],[1,"text-xs","text-mono","text-left","p-2","break-words",3,"innerHTML"],[1,"absolute","right-2","flex","items-center","justify-center","space-x-2","p-1","rounded-2xl","bg-base-100","border","border-neutral"],[1,"h-2","w-2","bg-neutral","rounded-full","animate-bounce"],[1,"h-2","w-2","bg-neutral","rounded-full","animate-bounce","anim-delay-1"],[1,"h-2","w-2","bg-neutral","rounded-full","animate-bounce","anim-delay-2"],[1,"sr-only"],["icon","","matRipple","",1,"absolute","top-2","left-2","bg-error","text-error-content","shadow","h-12","w-12",3,"click"],["splash","","matRipple","",1,"absolute","inset-0","text-white","flex","flex-col","items-center","justify-center","z-20",3,"click"],[1,"font-light","text-4xl","mb-4"]],template:function(i,s){if(1&i){const r=se();m(0,"div",4)(1,"button",5),P("click",function(){return B(r),V(s.startListening())}),q(2,"canvas",6,0),m(4,"div",7)(5,"div",8),S(6),_()(),q(7,"div",9),O(8,i5t,3,2,"div",10),q(9,"video",11,1),O(11,s5t,3,0,"div",12),q(12,"canvas",13,2),_(),m(14,"div",14),O(15,r5t,5,3,"div",15),H(16,"async"),m(17,"div",16,3),O(19,o5t,12,15,"div",17),H(20,"async"),O(21,l5t,13,9,"div",18),H(22,"async"),O(23,c5t,6,2,"div",19),H(24,"async"),_()()(),O(25,u5t,3,0,"button",20)(26,d5t,3,0,"button",21)}if(2&i){let r;b(6),Ye(s.current_text||s.last_text),b(2),C("ngIf",s.error.speech_recognition||s.error.speech_synthesis),b(),Oe("opacity-0",!s.debug)("border-success",s.person_in_view)("border-base-200",!s.person_in_view),b(2),C("ngIf",s.listening),b(4),C("ngIf",!(null!=(r=ne(16,15,s.messages))&&r.length)),b(4),C("ngForOf",ne(20,17,s.messages)),b(2),C("ngIf",ne(22,19,s.progress)),b(2),C("ngIf",ne(24,21,s.waiting)),b(2),C("ngIf",s.setup),b(),C("ngIf",!s.setup)}},dependencies:[on,mt,St,l_,Tt,xi,ih,z7,jh],styles:["[splash][_ngcontent-%COMP%]{animation:crossfade 10s linear;animation-iteration-count:infinite}"]})}return t})();function p5t(t,n){}const f5t={bottomSheetState:zo("state",[Xs("void, hidden",bn({transform:"translateY(100%)"})),Xs("visible",bn({transform:"translateY(0%)"})),ms("visible => void, visible => hidden",Rx([Cs(`${Q6.COMPLEX} ${Z6.ACCELERATION_CURVE}`),W1("@*",H1(),{optional:!0})])),ms("void => visible",Rx([Cs(`${Q6.EXITING} ${Z6.DECELERATION_CURVE}`),W1("@*",H1(),{optional:!0})]))])};let m5t=(()=>{class t extends pV{constructor(e,i,s,r,o,a,l,c,u){super(e,i,s,r,o,a,l,u),this._animationState="void",this._animationStateChanged=new Ae,this._breakpointSubscription=c.observe([Xm_Medium,Xm_Large,"(min-width: 1920px)"]).subscribe(()=>{const d=this._elementRef.nativeElement.classList;d.toggle("mat-bottom-sheet-container-medium",c.isMatched(Xm_Medium)),d.toggle("mat-bottom-sheet-container-large",c.isMatched(Xm_Large)),d.toggle("mat-bottom-sheet-container-xlarge",c.isMatched("(min-width: 1920px)"))})}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges())}exit(){this._destroyed||(this._animationState="hidden",this._changeDetectorRef.markForCheck())}ngOnDestroy(){super.ngOnDestroy(),this._breakpointSubscription.unsubscribe(),this._destroyed=!0}_onAnimationDone(e){"visible"===e.toState&&this._trapFocus(),this._animationStateChanged.emit(e)}_onAnimationStart(e){this._animationStateChanged.emit(e)}_captureInitialFocus(){}static#e=this.\u0275fac=function(i){return new(i||t)(I(vt),I(TN),I(Yn,8),I(SE),I(EN),I(Lt),I(wE),I(wN),I(pc))};static#t=this.\u0275cmp=Se({type:t,selectors:[["mat-bottom-sheet-container"]],hostAttrs:["tabindex","-1",1,"mat-bottom-sheet-container"],hostVars:4,hostBindings:function(i,s){1&i&&vx("@state.start",function(o){return s._onAnimationStart(o)})("@state.done",function(o){return s._onAnimationDone(o)}),2&i&&(px("@state",s._animationState),wt("role",s._config.role)("aria-modal",s._config.ariaModal)("aria-label",s._config.ariaLabel))},standalone:!0,features:[Ze,Ln],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,s){1&i&&O(0,p5t,0,0,"ng-template",0)},dependencies:[Ym],styles:[".mat-bottom-sheet-container{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2), 0px 16px 24px 2px rgba(0, 0, 0, 0.14), 0px 6px 30px 5px rgba(0, 0, 0, 0.12);padding:8px 16px;min-width:100vw;box-sizing:border-box;display:block;outline:0;max-height:80vh;overflow:auto;background:var(--mat-bottom-sheet-container-background-color, var(--mat-app-surface-container-low));color:var(--mat-bottom-sheet-container-text-color, var(--mat-app-on-surface));font-family:var(--mat-bottom-sheet-container-text-font, var(--mat-app-body-large-font));font-size:var(--mat-bottom-sheet-container-text-size, var(--mat-app-body-large-size));line-height:var(--mat-bottom-sheet-container-text-line-height, var(--mat-app-body-large-line-height));font-weight:var(--mat-bottom-sheet-container-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mat-bottom-sheet-container-text-tracking, var(--mat-app-body-large-tracking))}.cdk-high-contrast-active .mat-bottom-sheet-container{outline:1px solid}.mat-bottom-sheet-container-xlarge,.mat-bottom-sheet-container-large,.mat-bottom-sheet-container-medium{border-top-left-radius:var(--mat-bottom-sheet-container-shape);border-top-right-radius:var(--mat-bottom-sheet-container-shape)}.mat-bottom-sheet-container-medium{min-width:384px;max-width:calc(100vw - 128px)}.mat-bottom-sheet-container-large{min-width:512px;max-width:calc(100vw - 256px)}.mat-bottom-sheet-container-xlarge{min-width:576px;max-width:calc(100vw - 384px)}"],encapsulation:2,data:{animation:[f5t.bottomSheetState]}})}return t})();const _5t=new Ne("MatBottomSheetData");class g5t{constructor(){this.data=null,this.hasBackdrop=!0,this.disableClose=!1,this.ariaLabel=null,this.ariaModal=!0,this.closeOnNavigation=!0,this.autoFocus="dialog",this.restoreFocus=!0}}class xC{get instance(){return this._ref.componentInstance}get componentRef(){return this._ref.componentRef}constructor(n,e,i){this._ref=n,this._afterOpened=new ot,this.containerInstance=i,this.disableClose=e.disableClose,i._animationStateChanged.pipe(Zt(s=>"done"===s.phaseName&&"visible"===s.toState),Zn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Zt(s=>"done"===s.phaseName&&"hidden"===s.toState),Zn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._ref.close(this._result)}),n.overlayRef.detachments().subscribe(()=>{this._ref.close(this._result)}),sr(this.backdropClick(),this.keydownEvents().pipe(Zt(s=>27===s.keyCode))).subscribe(s=>{!this.disableClose&&("keydown"!==s.type||!Da(s))&&(s.preventDefault(),this.dismiss())})}dismiss(n){this.containerInstance&&(this.containerInstance._animationStateChanged.pipe(Zt(e=>"start"===e.phaseName),Zn(1)).subscribe(e=>{this._closeFallbackTimeout=setTimeout(()=>{this._ref.close(this._result)},e.totalTime+100),this._ref.overlayRef.detachBackdrop()}),this._result=n,this.containerInstance.exit(),this.containerInstance=null)}afterDismissed(){return this._ref.closed}afterOpened(){return this._afterOpened}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}}const b5t=new Ne("mat-bottom-sheet-default-options");let Z2=(()=>{class t{get _openedBottomSheetRef(){const e=this._parentBottomSheet;return e?e._openedBottomSheetRef:this._bottomSheetRefAtThisLevel}set _openedBottomSheetRef(e){this._parentBottomSheet?this._parentBottomSheet._openedBottomSheetRef=e:this._bottomSheetRefAtThisLevel=e}constructor(e,i,s,r){this._overlay=e,this._parentBottomSheet=s,this._defaultOptions=r,this._bottomSheetRefAtThisLevel=null,this._dialog=i.get(mV)}open(e,i){const s={...this._defaultOptions||new g5t,...i};let r;return this._dialog.open(e,{...s,disableClose:!0,closeOnOverlayDetachments:!1,maxWidth:"100%",container:m5t,scrollStrategy:s.scrollStrategy||this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().global().centerHorizontally().bottom("0"),templateContext:()=>({bottomSheetRef:r}),providers:(o,a,l)=>(r=new xC(o,s,l),[{provide:xC,useValue:r},{provide:_5t,useValue:s.data}])}),r.afterDismissed().subscribe(()=>{this._openedBottomSheetRef===r&&(this._openedBottomSheetRef=null)}),this._openedBottomSheetRef?(this._openedBottomSheetRef.afterDismissed().subscribe(()=>r.containerInstance?.enter()),this._openedBottomSheetRef.dismiss()):r.containerInstance.enter(),this._openedBottomSheetRef=r,r}dismiss(e){this._openedBottomSheetRef&&this._openedBottomSheetRef.dismiss(e)}ngOnDestroy(){this._bottomSheetRefAtThisLevel&&this._bottomSheetRefAtThisLevel.dismiss()}static#e=this.\u0275fac=function(i){return new(i||t)(ae(rr),ae(ci),ae(t,12),ae(b5t,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),v5t=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:[Z2],imports:[Fce,Yi,qh,Yi]})}return t})();const x5t=["*"];function E5t(t,n){if(1&t&&(S(0),H(1,"date")),2&t){const e=E();K(" ",At(1,1,e.date,e.date_format)," ")}}function T5t(t,n){1&t&&(m(0,"span",4),S(1,"No Date Selected"),_())}function I5t(t,n){if(1&t&&(m(0,"span"),S(1),_()),2&t){const e=E(2);b(),Ye(e.start_of_day)}}function k5t(t,n){1&t&&(m(0,"span"),S(1," - "),_())}function D5t(t,n){if(1&t&&(m(0,"span"),S(1),_()),2&t){const e=E(2);b(),Ye(e.end_of_day)}}function A5t(t,n){if(1&t&&(m(0,"div",9),O(1,I5t,2,1,"span",8)(2,k5t,2,0,"span",8)(3,D5t,2,1,"span",8),_()),2&t){const e=E();b(),C("ngIf",2!==e.range),b(),C("ngIf",0===e.range),b(),C("ngIf",1!==e.range)}}function M5t(t,n){1&t&&(m(0,"span"),en(1),_())}function N5t(t,n){if(1&t){const e=se();m(0,"div",10)(1,"date-calendar",11),P("ngModelChange",function(s){return B(e),V(E().setValue(s))}),_()()}if(2&t){const e=E();b(),C("ngModel",e.date||e.now)("from",e.from)("to",e.until)("offset_weekday",e.week_start)}}var OSe=function(t){return t[t.Both=0]="Both",t[t.Start=1]="Start",t[t.End=2]="End",t}(OSe||{});let fd=(()=>{class t extends hn{get date_format(){return this.short?"MMM d, yyyy":"MMMM d, yyyy"}get time_format(){return this.use_24hr?"HH : mm":"h : mm a"}get start_of_day(){const e=Ei(this.date).valueOf();return this._date_pipe.transform(e,`MMM d, ${this.time_format}${1===this.range?" (z)":""}`,this.tz)}get end_of_day(){const e=ks(this.date).valueOf();return this._date_pipe.transform(e,`MMM d, ${this.time_format}${1===this.range?" (z)":""}`,this.tz)}get has_error(){return this._control?.invalid&&this._control?.touched}get tz(){const e=this.timezone;return e?kT(e):""}constructor(e){super(),this._injector=e,this.from_date=Ei(Date.now()).valueOf(),this.week_start=0,this.use_24hr=!1,this.short=!1,this.timezone="",this.range=OSe.Both,this.now=Date.now(),this._date_pipe=new fs("en")}get from(){return new Date(this.from_date)||Ei(new Date)}get until(){return new Date(this.to_date)||O0(ks(new Date),1)}ngOnInit(){this._control=this._injector.get(lc),this.date=Date.now()}setValue(e){const i=new Date(this.date);let s=qu(e,{hours:i.getHours(),minutes:i.getMinutes()}).valueOf();s<this.from.valueOf()&&(s=this.from.valueOf()),this.date=s,this._onChange&&this._onChange(s),this._tooltip?.close()}writeValue(e){this.date=e,this._tooltip?.close()}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouch=e}setDisabledState(e){this.disabled=e}static#e=this.\u0275fac=function(i){return new(i||t)(I(ci))};static#t=this.\u0275cmp=Se({type:t,selectors:[["a-date-field"]],viewQuery:function(i,s){if(1&i&&Gt(ju,5),2&i){let r;nt(r=it())&&(s._tooltip=r.first)}},inputs:{from_date:[0,"from","from_date"],to_date:[0,"to","to_date"],week_start:"week_start",use_24hr:"use_24hr",disabled:"disabled",short:"short",timezone:"timezone",range:"range"},features:[bt([{provide:Ki,useExisting:wn(()=>t),multi:!0}]),Ze],ngContentSelectors:x5t,decls:13,vars:7,consts:[["calendar_picker",""],["customTooltip","","yPosition","top","matRipple","",1,"flex","items-center","justify-between","border","border-neutral","rounded","h-12","w-full",3,"content","disabled"],[1,"flex","flex-col","px-4","py-2","flex-1","truncate","w-1/2","text-left","leading-tight"],[1,"font-normal","text-base"],[1,"opacity-30"],["class","text-xs opacity-30 truncate",4,"ngIf"],[1,"h-10","w-10","flex","items-center","justify-center","text-2xl"],[1,"error","h-5","p-1","text-xs","text-error"],[4,"ngIf"],[1,"text-xs","opacity-30","truncate"],[1,"relative","w-[18rem]","rounded","bg-base-100","px-2","py-4"],[3,"ngModelChange","ngModel","from","to","offset_weekday"]],template:function(i,s){if(1&i&&(Si(),m(0,"button",1)(1,"div",2)(2,"div",3),O(3,E5t,2,4)(4,T5t,2,0,"span",4),_(),O(5,A5t,4,3,"div",5),_(),m(6,"div",6)(7,"app-icon"),S(8,"today"),_()()(),m(9,"div",7),O(10,M5t,2,0,"span",8),_(),O(11,N5t,2,4,"ng-template",null,0,ln)),2&i){const r=xt(12);Oe("opacity-30",s.disabled),C("content",r)("disabled",s.disabled),b(3),Bn(s.date?3:4),b(2),C("ngIf",s.timezone),b(5),C("ngIf",s.has_error)}}})}return t})();const O5t=["*"];function R5t(t,n){if(1&t&&(m(0,"div",8),S(1),H(2,"date"),_()),2&t){const e=E();b(),K(" ",zd(2,1,null==e.selected?null:e.selected.date,e.time_format+" (z)",e.tz)," ")}}function F5t(t,n){if(1&t&&(m(0,"div",8),S(1),H(2,"date"),_()),2&t){const e=E(2).$implicit,i=E();b(),K(" ",zd(2,1,e.date,i.time_format+" (z)",i.tz)," ")}}function L5t(t,n){if(1&t&&(Wt(0),m(1,"div",13)(2,"div",3),S(3),H(4,"date"),_(),O(5,F5t,3,5,"div",4),_(),qt()),2&t){const e=E().$implicit,i=E();b(3),ib(" ",e.date?At(4,4,e.date,e.id>=1440?"mediumDate":i.time_format)+" (":"","",e.name,"",e.date?")":""," "),b(2),C("ngIf",i.timezone)}}function P5t(t,n){1&t&&(m(0,"app-icon",14),S(1," done "),_())}function $5t(t,n){if(1&t){const e=se();m(0,"button",9),P("click",function(){const s=B(e).$implicit;return V(E().setValue(s.id))}),m(1,"div",10),O(2,L5t,6,7,"ng-container",11),m(3,"div"),S(4),_(),O(5,P5t,2,0,"app-icon",12),_()()}if(2&t){const e=n.$implicit,i=E();b(2),C("ngIf",!i.force),b(2),Ye(i.force),b(),C("ngIf",(null==i.selected?null:i.selected.id)===e.id)}}let Mp=(()=>{class t{constructor(){this.max=240,this.min=30,this.step=15,this.custom_options=[],this.use_24hr=!1,this.timezone="",this.duration=60,this.duration_options=[]}get time_format(){return this.use_24hr?"HH : mm":"h : mm a"}get selected(){return this.duration_options.find(e=>e.id===this.duration)}get tz(){const e=this.timezone;return e?kT(e):""}ngOnInit(){this.duration_options=this.generateDurationOptions(this.max,this.min,this.step),this._updateOption()}ngOnChanges(e){(e.max||e.min||e.step||e.time||e.custom_options)&&(this.duration_options=this.generateDurationOptions(this.max,this.min,this.step),this._updateOption())}setValue(e){this.duration=e,this._onChange&&this._onChange(+e)}writeValue(e){this.duration=e,this._updateOption()}setDisabledState(e){this.disabled=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouch=e}generateDurationOptions(e,i,s){const r=[];let o=i;const a=this.time?this.time:null;for(const l of this.custom_options)r.push({id:l,date:a?fi(a,l).valueOf():void 0,name:l>=1440?`${u_({days:Math.floor(l/1440)})}`:`${u_({hours:Math.floor(l/60),minutes:l%60})}`});for(;o<=e;)r.push({id:o,date:a?fi(a,o).valueOf():void 0,name:0===o?u_({minutes:0},{zero:!0}):o>=1440?`${u_({days:Math.floor(o/1440)})}`:`${u_({hours:Math.floor(o/60),minutes:o%60})}`}),o+=s;return r.sort((l,c)=>l.id-c.id),r}_updateOption(){this.duration_options?.length&&this.duration_options.findIndex(i=>i.id===this.duration)<0&&this.setValue(this.min)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Se({type:t,selectors:[["a-duration-field"]],inputs:{max:"max",min:"min",step:"step",time:"time",disabled:"disabled",custom_options:"custom_options",force:"force",use_24hr:"use_24hr",timezone:"timezone"},features:[bt([{provide:Ki,useExisting:wn(()=>t),multi:!0}]),Rn],ngContentSelectors:O5t,decls:13,vars:12,consts:[["menu","matMenu"],["matRipple","",1,"flex","items-center","justify-between","border","border-neutral","rounded","h-12","w-full","px-2",3,"disabled","matMenuTriggerFor"],[1,"flex","flex-col","leading-tight","px-2","text-left","flex-1","w-1/2"],[1,"truncate"],["class","text-xs opacity-30 truncate",4,"ngIf"],[1,"text-2xl"],[1,"max-h-[15rem]","min-w-[18rem]"],["mat-menu-item","","class","text-left",3,"click",4,"ngFor","ngForOf"],[1,"text-xs","opacity-30","truncate"],["mat-menu-item","",1,"text-left",3,"click"],[1,"flex","items-center","justify-between"],[4,"ngIf"],["class","text-2xl ml-2",4,"ngIf"],[1,"flex","flex-col","leading-tight"],[1,"text-2xl","ml-2"]],template:function(i,s){if(1&i&&(Si(),m(0,"button",1)(1,"div",2)(2,"div",3),S(3),H(4,"date"),_(),O(5,R5t,3,5,"div",4),_(),m(6,"app-icon",5),S(7,"arrow_drop_down"),_()(),m(8,"mat-menu",6,0),O(10,$5t,6,3,"button",7),_(),m(11,"mat-error"),en(12),_()),2&i){const r=xt(9);Oe("opacity-30",s.disabled),C("disabled",s.disabled)("matMenuTriggerFor",r),b(3),ib(" ",null!=s.selected&&s.selected.date?At(4,9,null==s.selected?null:s.selected.date,s.selected.id>=1440?"mediumDate":s.time_format)+" (":"","",null==s.selected?null:s.selected.name,"",null!=s.selected&&s.selected.date?")":""," "),b(2),C("ngIf",s.timezone),b(5),C("ngForOf",s.duration_options)}},dependencies:[on,mt,Tt,Kh,St,Zd,Yh,Pb,fs],styles:["[_nghost-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]{width:100%}"]})}return t})();function md(t,n){const e=n?.nearestTo??1;if(e<1||e>30)return Is(t,NaN);const i=Tn(t),s=i.getSeconds()/60,r=i.getMilliseconds()/1e3/60,o=i.getMinutes()+s+r,c=m7(n?.roundingMethod??"round")(o/e)*e,u=Is(t,i);return u.setMinutes(c,0,0),u}const B5t=["select"],V5t=["*"];function z5t(t,n){if(1&t&&(m(0,"div",9),S(1),H(2,"date"),_()),2&t){const e=E();b(),K(" ",zd(2,1,e.active_time,e.time_format+" (z)",e.tz)," ")}}function U5t(t,n){if(1&t&&(m(0,"div",16),S(1),H(2,"date"),_()),2&t){const e=E(2);b(),K(" ",zd(2,1,e.force_time,e.time_format+" (z)",e.tz)," ")}}function G5t(t,n){1&t&&(m(0,"app-icon",17),S(1," done "),_())}function j5t(t,n){if(1&t){const e=se();m(0,"button",10),P("click",function(){B(e);const s=E();return V(s.setValue(s.force_time))}),m(1,"div",11)(2,"div",12)(3,"div",13),S(4),H(5,"date"),_(),O(6,U5t,3,5,"div",14),_(),O(7,G5t,2,0,"app-icon",15),_()()}if(2&t){const e=E();C("value",e.force_time),b(4),K(" ",At(5,4,e.force_time,e.time_format)," "),b(2),C("ngIf",e.timezone),b(),C("ngIf",e.active_time===e.force_time)}}function H5t(t,n){if(1&t&&(m(0,"div",16),S(1),H(2,"date"),_()),2&t){const e=E().$implicit,i=E();b(),K(" ",zd(2,1,e.date,i.time_format+" (z)",i.tz)," ")}}function W5t(t,n){1&t&&(m(0,"app-icon",17),S(1," done "),_())}function q5t(t,n){if(1&t){const e=se();m(0,"button",10),P("click",function(){const s=B(e).$implicit;return V(E().setValue(s.id))}),m(1,"div",11)(2,"div",12)(3,"div",13),S(4),H(5,"date"),_(),O(6,H5t,3,5,"div",14),_(),O(7,W5t,2,0,"app-icon",15),_()()}if(2&t){const e=n.$implicit,i=E();C("value",e.id),b(4),Os(" ",At(5,5,e.date,i.time_format)," ",i.extra_info_fn(e.date)," "),b(2),C("ngIf",i.timezone),b(),C("ngIf",i.active_time===e.date)}}let tg=(()=>{class t extends hn{constructor(){super(...arguments),this.step=15,this.no_past_times=!0,this.use_24hr=!1,this.extra_info_fn=e=>"",this.from=Ei(Date.now()).valueOf(),this.timezone="",this.date=(new Date).valueOf(),this.time=Us(new Date,"HH:mm"),this.active_time=Date.now()}get time_format(){return this.use_24hr?"HH : mm":"h : mm a"}get tz(){const e=this.timezone;return e?kT(e):""}ngOnInit(){this.show_select=!0,this._time_options=this.generateAvailableTimes(this.date,!this.no_past_times,this.step),this.timeout("hide",()=>this.show_select=!1),this.active_time=this._time_options.find(e=>e.id===Us(this.date,"HH:mm"))?.date||this.active_time}ngOnChanges(e){(e.no_past_times||e.step||e.from)&&(this._time_options=this.generateAvailableTimes(this.date,!this.no_past_times,this.step))}get time_options(){const e=(this.time||"00:00").split(":"),i=qu(this.date,{hours:+e[0],minutes:+e[1]});return i.getMinutes()%15!=0&&!this._time_options.find(s=>s.id===Us(i,"HH:mm"))&&(this._time_options.push({date:i,id:Us(i,"HH:mm")}),this._time_options.sort((s,r)=>`${s.id}`.localeCompare(`${r.id}`))),this._time_options}setValue(e){if(this.time=e,this._onChange){const r=(this.time||"00:00").split(":"),o=Gl(qu(this.date,{hours:+r[0],minutes:+r[1]}));this._onChange(o.valueOf())}const i=this.force_time||this.time,s=Gl(qu(this.date,{hours:+i[0],minutes:+i[1]}));this.active_time=this._time_options.find(r=>r.id===i)?.date||s}writeValue(e){this.date=e||this.date;let i=Gl(this.date);i=md(i,{nearestTo:5}),this.time=Us(i,"HH:mm"),this._time_options=this.generateAvailableTimes(this.date,!this.no_past_times,this.step);const s=this.force_time||this.time;this.active_time=this._time_options.find(r=>r.id===s)?.date||i}setDisabledState(e){this.disabled=e,this._time_options=this.generateAvailableTimes(this.date,!this.no_past_times||e,this.step)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouch=e}showSelect(){this.show_select=!0,this.timeout("on_shown",()=>{this.select_field&&(this.select_field.focus(),this.select_field.open(),this.subscription("listen_close",this.select_field.openedChange.subscribe(e=>{e||(this.show_select=!1)})))})}generateAvailableTimes(e,i,s=15){const r=new Date(Math.max(this.from,Date.now()));let o=new Date(e);const a=[];i||!eh(o,r)&&nh(o,r)?o=Ei(o):nh(o,r)&&(o=new Date(r)),o=md(o,{nearestTo:s});const l=ks(o);for(;nh(l,o);)a.push({date:o.valueOf(),id:Us(o,"HH:mm")}),o=fi(o,s);return a}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=$n(t)))(s||t)}})();static#t=this.\u0275cmp=Se({type:t,selectors:[["a-time-field"]],viewQuery:function(i,s){if(1&i&&Gt(B5t,5),2&i){let r;nt(r=it())&&(s.select_field=r.first)}},inputs:{step:"step",disabled:"disabled",no_past_times:"no_past_times",use_24hr:"use_24hr",force_time:"force_time",extra_info_fn:"extra_info_fn",from:"from",timezone:"timezone"},features:[bt([{provide:Ki,useExisting:wn(()=>t),multi:!0}]),Ze,Rn],ngContentSelectors:V5t,decls:14,vars:11,consts:[["menu","matMenu"],["matRipple","",1,"flex","items-center","justify-between","border","border-neutral","rounded","h-12","w-full","px-2",3,"disabled","matMenuTriggerFor"],[1,"flex","flex-col","leading-tight","px-2","text-left","flex-1","w-1/2"],[1,"truncate"],["class","text-xs opacity-30 truncate",4,"ngIf"],[1,"text-2xl"],[1,"max-h-[15rem]","min-w-[18rem]"],["mat-menu-item","","class","text-left",3,"value","click",4,"ngIf"],["mat-menu-item","","class","text-left",3,"value","click",4,"ngFor","ngForOf"],[1,"text-xs","opacity-30","truncate"],["mat-menu-item","",1,"text-left",3,"click","value"],[1,"flex","items-center","justify-between"],[1,"flex","flex-col","leading-tight"],[1,""],["class","text-xs opacity-30",4,"ngIf"],["class","text-2xl ml-2",4,"ngIf"],[1,"text-xs","opacity-30"],[1,"text-2xl","ml-2"]],template:function(i,s){if(1&i&&(Si(),m(0,"button",1)(1,"div",2)(2,"div",3),S(3),H(4,"date"),_(),O(5,z5t,3,5,"div",4),_(),m(6,"app-icon",5),S(7,"arrow_drop_down"),_()(),m(8,"mat-menu",6,0),O(10,j5t,8,7,"button",7)(11,q5t,8,8,"button",8),_(),m(12,"mat-error"),en(13),_()),2&i){const r=xt(9);Oe("opacity-30",s.disabled),C("disabled",s.disabled)("matMenuTriggerFor",r),b(3),K(" ",At(4,8,s.active_time,s.time_format)," "),b(2),C("ngIf",s.timezone),b(5),C("ngIf",s.force_time),b(),C("ngForOf",s.time_options)}},dependencies:[on,mt,Tt,Kh,St,Zd,Yh,Pb,fs],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]})}return t})();function K5t(t,n){if(1&t&&(m(0,"div",3)(1,"label",4),S(2," Name"),m(3,"span"),S(4,"*"),_(),S(5,": "),_(),m(6,"mat-form-field",5),q(7,"input",6),m(8,"mat-error"),S(9,"Name is required"),_()()()),2&t){const e=E(2);b(),Oe("error",e.hasError("name"))}}function X5t(t,n){if(1&t&&(m(0,"div",3)(1,"label",7),S(2," Email"),m(3,"span"),S(4,"*"),_(),S(5,": "),_(),m(6,"mat-form-field",5),q(7,"input",8),m(8,"mat-error"),S(9,"A valid email is required"),_()()()),2&t){const e=E(2);b(),Oe("error",e.hasError("email"))}}function Y5t(t,n){if(1&t&&(m(0,"div",3)(1,"label",9),S(2),H(3,"translate"),m(4,"span"),S(5,"*"),_(),S(6,": "),_(),m(7,"mat-form-field",5),q(8,"input",10),m(9,"mat-error"),S(10),H(11,"translate"),_()()()),2&t){const e=E(2);b(),Oe("error",e.hasError("organisation")),b(),K(" ",ne(3,4,"COMMON.ORGANISATION"),""),b(8),K(" ",ne(11,6,"COMMON.ORGANISATION")," is required ")}}function Z5t(t,n){if(1&t&&(m(0,"div",3)(1,"label",11),S(2," Phone: "),_(),m(3,"mat-form-field",5),q(4,"input",12),m(5,"mat-error"),S(6,"Phone format is invalid"),_()()()),2&t){const e=E(2);b(),Oe("error",e.hasError("phone"))}}function Q5t(t,n){1&t&&(m(0,"div",3)(1,"mat-checkbox",13),S(2," Assistance required "),_()())}function J5t(t,n){1&t&&(m(0,"div",3)(1,"mat-checkbox",14),S(2," Visit expected "),_()())}function eBt(t,n){if(1&t&&(m(0,"form",1),O(1,K5t,10,2,"div",2)(2,X5t,10,2,"div",2)(3,Y5t,12,8,"div",2)(4,Z5t,7,2,"div",2)(5,Q5t,3,0,"div",2)(6,J5t,3,0,"div",2),_()),2&t){const e=E();C("formGroup",e.form),b(),C("ngIf",e.form.controls.name),b(),C("ngIf",e.form.controls.email),b(),C("ngIf",e.form.controls.organisation),b(),C("ngIf",e.form.controls.phone),b(),C("ngIf",e.form.controls.assistance_required),b(),C("ngIf",e.form.controls.visit_expected)}}let RSe=(()=>{class t{hasError(e){const{invalid:i,touched:s}=this.form?.controls[e]||{};return i&&s}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Se({type:t,selectors:[["user-form"]],inputs:{form:"form"},decls:1,vars:1,consts:[["user-form","","class","w-full",3,"formGroup",4,"ngIf"],["user-form","",1,"w-full",3,"formGroup"],["class","flex flex-col w-full",4,"ngIf"],[1,"flex","flex-col","w-full"],["for","name"],["appearance","outline"],["matInput","","name","name","placeholder","Name","formControlName","name"],["for","email"],["matInput","","name","email","placeholder","Email Address","formControlName","email"],["for","org"],["matInput","","name","org","placeholder","e.g. Conteso","formControlName","organisation"],["for","phone"],["matInput","","name","phone","type","tel","placeholder","Phone","formControlName","phone"],["name","assistance-required","color","primary","formControlName","assistance_required"],["name","visit-expected","color","primary","formControlName","visit_expected"]],template:function(i,s){1&i&&O(0,eBt,7,7,"form",0),2&i&&C("ngIf",s.form)},dependencies:[mt,hf,Yr,pi,cc,pa,Fl,zs,Kh,eu,$l,jh],styles:["[_nghost-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}"]})}return t})();function tBt(t,n){if(1&t&&(m(0,"main",6),q(1,"user-form",7),_()),2&t){const e=E();b(),C("form",e.form)}}function nBt(t,n){if(1&t){const e=se();m(0,"footer",8)(1,"button",9),S(2," Cancel "),_(),m(3,"button",10),P("click",function(){return B(e),V(E().saveChanges())}),S(4,"Save"),_()()}}function iBt(t,n){1&t&&(m(0,"main",11),q(1,"mat-spinner",12),m(2,"p"),S(3,"Saving attendee..."),_()())}let FSe=(()=>{class t extends hn{constructor(e){super(),this._data=e,this.event=new Ae,this.form=rhe(this.user||new Wo),this.loading=!1,this.user=this._data.user||{},this.form=rhe(this.user)}ngOnInit(){}saveChanges(){if(this.form&&(this.form.markAllAsTouched(),this.form.valid)){const e=new Wo({...this.form.value,is_external:!0});this.event.emit({reason:"done",metadata:e})}}static#e=this.\u0275fac=function(i){return new(i||t)(I(or))};static#t=this.\u0275cmp=Se({type:t,selectors:[["new-user-modal"]],outputs:{event:"event"},features:[Ze],decls:11,vars:4,consts:[["load_state",""],["mat-dialog-title","",1,"heading"],[1,"flex-1"],["icon","","mat-dialog-close",""],["class","flex flex-col items-center w-full p-2",4,"ngIf","ngIfElse"],["class","flex items-center justify-center w-full p-2 border-t border-base-200 space-x-2",4,"ngIf"],[1,"flex","flex-col","items-center","w-full","p-2"],[3,"form"],[1,"flex","items-center","justify-center","w-full","p-2","border-t","border-base-200","space-x-2"],["btn","","matRipple","","mat-dialog-close","",1,"inverse"],["btn","","matRipple","",3,"click"],[1,"flex","flex-col","items-center","w-full","p-2","space-y-2"],["diameter","32"]],template:function(i,s){if(1&i&&(m(0,"header")(1,"div",1),S(2),_(),q(3,"div",2),m(4,"button",3)(5,"app-icon"),S(6,"close"),_()()(),O(7,tBt,2,1,"main",4)(8,nBt,5,0,"footer",5)(9,iBt,4,0,"ng-template",null,0,ln)),2&i){const r=xt(10);b(2),K(" ",null!=s.user&&s.user.id?"Edit":"Add"," External Attendee "),b(5),C("ngIf",!s.loading)("ngIfElse",r),b(),C("ngIf",!s.loading)}},dependencies:[mt,Ls,vV,St,Tt,Zs,RSe],styles:["main[_ngcontent-%COMP%]{min-height:20em!important;width:100%}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:8em}"]})}return t})();function Ai(t){return Math.trunc(+Tn(t)/1e3)}function iy(t,n){const{years:e=0,months:i=0,weeks:s=0,days:r=0,hours:o=0,minutes:a=0,seconds:l=0}=n,c=Tn(t),u=i||e?Wb(c,i+12*e):c,f=1e3*(l+60*(a+60*o));return Is(t,(r||s?Ir(u,r+7*s):u).getTime()+f)}class LSe{get custom_id(){const n=this.option_list.map(e=>e.id).join("+");return`${this.id}[${n}]${this.in_order?"":"menu"}`}constructor(n={}){this.id=n.id||"",this.name=n.name||n.id||"",this.category=n.category||"",this.unit_price=n.unit_price||0,this.description=n.description||"",this.quantity=n.quantity||0,this.discount_cap=n.discount_cap||0,this.accept_points=!!n.accept_points,this.tags=n.tags||[],this.images=n.images||[],this.options=n.options||[];const e=this.options.some(i=>!0===i.active);this.option_list=(e?this.options.filter(i=>!0===i.active):n.option_list)||[],this.hide_for_zones=n.hide_for_zones||[],this.unit_price_with_options=this.unit_price+this.option_list.map(i=>i.unit_price||0).reduce((i,s)=>i+s,0),this.total_cost=this.unit_price_with_options*this.quantity,this.options_string=this.options?.map(i=>i.id||"").sort((i,s)=>i.localeCompare(s)).join(",")||"",this.in_order=n.in_order??!1}}function PSe(t){let n=t.event?.date||t._time;return t.deliver_time&&(n=qu(n,{hours:Math.floor(t.deliver_time),minutes:t.deliver_time%1*60}).valueOf()),(t.deliver_day_offset>0||t.event?.all_day)&&(n=Ir(Ei(n),t.deliver_day_offset).valueOf()),fi(n,t.deliver_offset).valueOf()}class $Se{get deliver_at(){return PSe(this)}get status(){return this._status}set status(n){this._status=n,this[`${this.event_id}_status`]=n}constructor(n={}){this._time=Gl(Date.now()).valueOf(),this.id=n.id||`order-${n_(9999999,1e6)}`,this.system_id=n.system_id||"",this.event_id=n.event_id||n.event?.id||"",this.items=(n.items||[]).map(e=>e instanceof LSe?e:new LSe(e)),this.item_count=this.items.reduce((e,i)=>e+i.quantity,0),this.total_cost=this.items.reduce((e,i)=>e+(i.total_cost||0),0),this.charge_code=n.charge_code||"",this.status=n[`${this.event_id}_status`]||n.status||"accepted",this.invoice_number=n.invoice_number||"",this.event=n.event||null,this.notes=n.notes||"",this.deliver_time=n.deliver_time||void 0,this.deliver_offset=n.deliver_offset||0,this.deliver_day_offset=n.deliver_day_offset||0,this.deliver_at_time=PSe(this)}}function sBt(t,n){return+Gl(t)==+Gl(n)}const rBt=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function zSe(t){let n=t.event?.date||t._time;return t.deliver_time&&(n=qu(n,{hours:Math.floor(t.deliver_time),minutes:t.deliver_time%1*60}).valueOf()),(t.deliver_day_offset>0||t.event?.all_day)&&(n=Ir(Ei(n),t.deliver_day_offset).valueOf()),fi(n,t.deliver_offset).valueOf()}class _d{get deliver_at(){return zSe(this)}get status(){return this._status}set status(n){this._status=n,this[`${this.event_id}_status`]=n}constructor(n={}){this.conflict=!1,this._changed=!1,this._time=Gl(Date.now()).valueOf(),this.id=n.id||`order-${n_(9999999,1e6)}`,this.event_id=n.event_id||n.parent_id||"",this.items=n.items||n.asset_ids?.map(i=>({id:i,quantity:1}))||[],this.item_count=this.items.reduce((i,s)=>i+s.quantity,0),this._status=n[`${this.event_id}_status`]||n.status||(n.extension_data||{})[`${this.event_id}_status`]||n.extension_data?.status||"in_storage",this.event=n.event||n||null;const e=this.event?.linked_bookings?.find(i=>i.extension_data.request_id===this.id);this._booking=e||n.booking||null,this._changed=!!n._changed||!e,this.notes=n.notes||n.description||"",this.deliver_time=n.deliver_time||n.extension_data?.deliver_time||void 0,this.deliver_offset=n.deliver_offset||n.extension_data?.deliver_offset||0,this.deliver_day_offset=n.deliver_day_offset||n.extension_data?.deliver_day_offset||0,this.deliver_at_time=zSe(this),this.conflict=!!n.conflict,this.ref_id=`${this.deliver_at_time}|${this.items.map(i=>`${i.id}:${i.quantity}`).join("|")}`}toJSON(){const n={...this};return delete n.event,delete n._changed,delete n._status,delete n._time,delete n.deliver_at_time,delete n.deliver_at,n.items=n.items.map(e=>({id:e.id,category_id:e.category_id,quantity:e.quantity,name:e.name,item_ids:e.item_ids})),n}}let sq={id:"default",name:"Default User"};const dBt=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];class Ta{get images(){return this.extension_data.images||[]}get is_all_day(){return this.all_day||this.duration>=720}get view_access(){return this.extension_data.view_access||"PRIVATE"}ext(n){return this.extension_data[n]}constructor(n={}){this._valid_asset_cache=[],this._valid_cache_expiry=0,this.id=n.event_id||n.id||"",this.event_start=n.event_start||Ai(n.date||md(fi(new Date,3),{nearestTo:5})),this.event_end=n.event_end||Ai(fi(1e3*this.event_start,n.duration||30)),this.calendar=n.calendar||"",this.creator=(n.creator||sq.email)?.toLowerCase()||"",this.host=(n.host||this.creator||n.host_email||sq.email||"").toLowerCase();const e=n.attendees||[];this.attendees=e.filter(c=>!c.resource).map(c=>new Wo(c)),this.resources=Ss(n.resources||e.filter(c=>c.resource).map(c=>new Ul(c)),"email")||[],this.title=n.title,this.body=n.body||"",this.private=!!n.private,this.all_day=!!n.all_day,this.date=1e3*this.event_start||this.date,this.date_end=1e3*this.event_end||this.date_end,this.duration=If(this.date_end,this.date),this.all_day&&(this.date=Ei(this.date).getTime(),this.duration=Math.max(1439,this.duration-1),this.date_end=ks(fi(this.date,this.duration).valueOf()-1).getTime());const i=this.body.match(/\[ID\|([^\]]+)\]/),s=i?i[1]:null;this.timezone=n.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone,this.meeting_url=n.meeting_url||n.online_meeting_url||"",this.meeting_id=s||n.meeting_id||n.online_meeting_id||"",this.meeting_provider=n.meeting_provider||n.online_meeting_provider||"",this.recurring=!!n.recurring,this.recurring_event_id=n.recurring_event_id||"",this.organiser=this.attendees.find(c=>c.email===this.host),this.from_bookings=n.from_bookings??!1,this.master=n.master?new Ta(n.master):null,this.mailbox=n.mailbox||"",this.ical_uid=n.ical_uid,this.linked_bookings=n.linked_bookings||[],this.update_master=n.update_master??!1,this.recurrence=n.recurring?{start:1e3*this.event_start||new Date(1e3*n.recurrence.range_start).valueOf(),end:n.recurrence.end||new Date(1e3*n.recurrence.range_end).valueOf(),interval:n.recurrence.interval,pattern:n.recurrence.pattern,occurrences:n.recurrence.occurrences,days_of_week:n.recurrence.days_of_week?.map(c=>"number"==typeof c?c:dBt.indexOf(c))||[]}:{};const r=n.system;r?.email&&!this.resources.find(c=>c.email===r.email)&&this.resources.push(new Ul(r)),this.system=r||this.resources[0]||null,!r&&n.system_id&&(this.system={id:n.system_id}),this.old_system=n.old_system||n.system,this.is_system_event=this.body.includes("main_event_id"),this.attachments=n.attachments||[],this.extension_data=n.extension_data||{},this.status=function oBt(t){return"cancelled"===t.status?"declined":t.resources?.length?t.resources.every(n=>"accepted"===n.response_status||t.approved)?"approved":t.resources.some(n=>"tentative"===n.response_status||"needsAction"===n.response_status)?"tentative":"declined":"approved"}({...n,...this})||"none",this.location=n.location||this.space?.display_name||this.space?.name||"",this.setup_time=n.setup_time||0,this.breakdown_time=n.breakdown_time||0,this.type="declined"===this.status?"cancelled":this.attendees.find(c=>c.is_external)?"external":"internal";for(const c in n)c in this||(this.extension_data[c]=n[c]||this.extension_data[c]);const o={date:this.date,duration:this.duration,date_end:this.date_end,all_day:this.all_day,space:this.space,organiser:this.organiser};this.extension_data.catering=(this.extension_data.catering||[]).map(c=>new $Se({...c,event:o}));const a=this.linked_bookings.filter(c=>"asset-request"===c.booking_type).map(c=>c.extension_data?.request).filter(c=>!!c),l=(a.length?a:this.extension_data.assets)||[];this.extension_data.images=this.extension_data.images||n.images||[],this.extension_data.assets=l.map(c=>new _d({...c,event:o}))}get guests(){return this.attendees.filter(n=>!!n.is_external)}get space(){return this.resources[0]||null}get is_today(){return eh(this.date,Date.now())}get valid_catering(){return(this.ext("catering")||[]).filter(n=>n.deliver_at<this.date_end)}get valid_assets(){if(this._valid_cache_expiry>Date.now()&&this._valid_asset_cache.length)return this._valid_asset_cache;const n=this.linked_bookings;return this._valid_asset_cache=(this.ext("assets")||[]).map(e=>new _d({...e,event:this})).filter(e=>e.deliver_at<this.date_end).map(e=>{const i=n.find(s=>s.extension_data.request_id===e.id);return i&&(e.state=i.approved?"approved":i.rejected?"rejected":"pending"),e}),this._valid_cache_expiry=fi(Date.now(),5).valueOf(),this._valid_asset_cache}toJSON(){const n={...this},e=this.all_day?Ei(this.date):this.date,i=this.all_day?ks(this.date_end).valueOf()+1:this.date_end;n.event_start=Ai(e),n.event_end=Ai(i);const s=this.attendees;this.recurring=this.recurrence?.pattern&&"none"!==this.recurrence._pattern,this.recurring&&(n.recurrence=function aBt(t){let n=t.start||1e3*t.range_start,e=t.end||t.range_end;if(t.occurrences>1)switch(t.pattern){case"daily":e=Ir(n||Date.now(),(t.occurrences-1)*t.interval).valueOf();break;case"weekly":e=function BSe(t,n){return Ir(t,7*n)}(n||Date.now(),(t.occurrences-1)*t.interval).valueOf();break;case"month_day":case"monthly":e=Wb(n||Date.now(),(t.occurrences-1)*t.interval).valueOf(),e=Ir(e,7).valueOf();break;case"yearly":e=O0(n||Date.now(),(t.occurrences-1)*t.interval).valueOf()}return{range_start:Ai(Ei(n)),range_end:Ai(ks(e)),interval:t.interval,pattern:t.pattern,days_of_week:t.days_of_week?.map(i=>"number"==typeof i?rBt[i]:i)||[]}}({...this.recurrence,start:this.date}),delete n.recurrence.start,delete n.recurrence.end),n.recurrence=n.recurrence&&Object.keys(n.recurrence).length?n.recurrence:null,n.attendees=Ss([...s,...this.resources.map(r=>({...r,resource:!0}))],"email"),this.all_day&&(n.setup_time=0,n.breakdown_time=0,n.extension_data.all_day_date=Us(e,"yyyy-MM-dd")),n.extension_data.catering=n.extension_data.catering.map(r=>new $Se({...r,event:null})),n.extension_data.assets=n.extension_data.assets.map(r=>new _d({...r,event:null})),n.system_id=this.system?.id;for(const r of["catering","date","date_end","duration","status","linked_bookings","_valid_asset_cache","_valid_cache_expiry","type"])r in n&&delete n[r];return n.update_master||delete n.recurring_event_id,zde(n),n}get state(){const n=new Date,e=this.date;return gl(n,iy(e,{minutes:-15}))?"future":gl(n,e)?"upcoming":gl(n,iy(e,{minutes:15}))?"started":gl(n,iy(e,{minutes:this.duration}))?"in_progress":"done"}get can_check_in(){const n=new Date;return this.is_today||nh(n,fi(this.date,-5))&&gl(n,fi(this.date,this.duration))}}function USe(t){const n=Vr({q:t});return Aa("/api/staff/v1/guests"+(t?"?"+n:"")).pipe(me(e=>e.map(i=>new mT(i))))}function lP(t){const n=Vr({q:t,fields:["id","name","email","username","organisation","department"].join(",")});return Aa("/api/staff/v1/people"+(t?"?"+n:"")).pipe(me(e=>e.map(i=>new rv(i))))}const pBt=["search_field"];function fBt(t,n){if(1&t&&(m(0,"app-icon",22),H(1,"placeuser"),H(2,"async"),S(3),H(4,"placeuser"),H(5,"async"),_()),2&t){let e,i;const s=E().$implicit,r=E();C("matTooltip",null==(e=ne(2,4,ne(1,2,null==s?null:s.email)))?null:e.location_name_time(r.time)),b(3),K(" ",null==(i=ne(5,8,ne(4,6,null==s?null:s.email)))?null:i.location_icon(r.time)," ")}}function mBt(t,n){if(1&t){const e=se();m(0,"mat-chip-row",18),P("removed",function(){const s=B(e).$implicit;return V(E().removeUser(s))}),m(1,"div",19)(2,"div"),S(3),_(),O(4,fBt,6,10,"app-icon",20),_(),m(5,"button",21)(6,"app-icon"),S(7,"cancel"),_()()()}if(2&t){const e=n.$implicit;Oe("bg-warning",e.is_external),b(3),Ye(e.name||e.email),b(),C("ngIf",!e.is_external),b(),wt("aria-label","Remove "+(e.name||e.email))}}function _Bt(t,n){1&t&&q(0,"mat-spinner",23)}function gBt(t,n){if(1&t){const e=se();m(0,"mat-option",24),P("click",function(){return B(e),V(E().addUserFromEmail())}),oe(1,4),_()}if(2&t){const e=E();b(),Vn(e.search$.getValue()),Gn(1)}}function bBt(t,n){if(1&t){const e=se();m(0,"mat-option",25),P("click",function(){const s=B(e).$implicit;return V(E().addUser(s))}),S(1),q(2,"br"),m(3,"span",26),S(4),_()()}if(2&t){const e=n.$implicit;b(),K(" ",e.name,""),b(3),Ye(e.email)}}function vBt(t,n){if(1&t){const e=se();m(0,"div",27)(1,"button",28),P("click",function(){return B(e),V(E().openNewUserModal())}),Pi(2,5),m(3,"div",29),q(4,"span",30),_(),$i(),_(),m(5,"button",31),Pi(6,6),m(7,"div",29),q(8,"span",30),_(),m(9,"input",32),P("change",function(s){return B(e),V(E().addUsersFromFile(s))}),_(),$i(),_(),m(10,"button",33),P("click",function(){B(e);const s=E();return s.downloadCSVTemplate(),V(s.download.emit())}),Pi(11,7),m(12,"div",29),q(13,"span",30),_(),$i(),_()()}}function aq(t){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}const yBt=["text/csv","text/plain"],wBt=["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];let lq=(()=>{class t extends hn{searchStaff(e){return this._settings.get("app.basic_user_search")?_z({q:e,authority_id:mc()?.id}).pipe(me(i=>i.data.map(s=>new Wo(s)))):lP(e)}get search_valid_email(){return aq(this.search$.getValue())}constructor(e,i){super(),this._dialog=e,this._settings=i,this.time=Date.now(),this.limit=3,this.guests=!1,this.guests_only=!1,this.hide_actions=!1,this.custom_template=!1,this.new_user=new Ae,this.download=new Ae,this.separatorKeysCodes=[13,188],this.loading=!1,this.search$=new at(""),this.user_list$=this.search$.pipe(_s(300),Kt(s=>(this.loading=!0,(s?this.guests?Vt([this.searchStaff(s),USe(s)]).pipe(me(([r,o])=>{this.guests_only&&(r=[]);const a=[],l=this._settings.get("visitor-invitees")||[];for(const c of l){const[u,d,h]=c.split("|");a.push({email:u,name:d,company:h})}return Ss(r.concat(o).concat(a),"email")})):this.searchStaff(s):Ge([])).pipe(Xi(r=>Ge([]))))),gi(s=>this.loading=!1)),this.active_list=[],this.validFn=s=>aq(s),this.emptyClick=()=>this.openNewUserModal(new Wo)}updateSearch(e=""){this.timeout("search",()=>this.search$.next(e))}addUserFromEmail(e=""){if(e||(e=this.search$.getValue()),!aq(e))return;const i=new Wo({id:e,email:e,name:e.split("@")[0]});this.addUser(i);const{name:s,organisation:r}=i,o=`${e}|${s}|${r}`,a=this._settings.get("visitor-invitees")||[];this._settings.saveUserSetting("visitor-invitees",[...a.filter(l=>!l.includes(e)),o]),this.timeout("clear_search",()=>{this.search$.next(""),this._search_el.nativeElement.value=""},100)}addUser(e){const i=this.active_list?.filter(s=>s.id!==e.id)||[];this.setValue([...i,new Wo({...e,id:e.id||e.email,visit_expected:(e.id||!0===e.is_external?null:e.visit_expected)??!0})]),this.timeout("clear_search",()=>{this.search$.next(""),this._search_el.nativeElement.value=""},100)}removeUser(e){const i=this.active_list.filter(s=>s.id!==e.id);this.setValue(i)}addUsersFromFile(e){if(e.target){const i=e.target.files[0];if(i){if(!yBt.includes(i.type)||wBt.includes(i.type))return void Ti("Only CSV files are supported");const s=new FileReader;s.readAsText(i,"UTF-8"),s.addEventListener("load",r=>{this.processCsvData(r.srcElement.result),e.target.value=""}),s.addEventListener("error",r=>Ti("Error reading file."))}}}processCsvData(e){const i=function VYe(t){const e=new RegExp('(\\,|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^\\,\\r\\n]*))',"gi");let i=null;const s=[[]];for(;i=e.exec(t);)i[1].length&&","!==i[1]&&s.push([]),s[s.length-1].push(i[2]?i[2]?.replace(new RegExp('""',"g"),'"'):i[3]);const r=s.splice(0,1)[0];return s.map(a=>{const l={};for(let c=0;c<a.length;c++){const u=(r[c]||"").split(" ").join("_").toLowerCase();try{l[u]=JSON.parse(a[c]?.replace("|",","))}catch{l[u]=a[c]||""}("TRUE"===l[u]||"FALSE"===l[u])&&(l[u]="TRUE"===l[u])}return l})}(e)||[],s=Qt()?.staff_id||"unknown";for(const r of i){r.name=r.name||`${r.first_name} ${r.last_name}`;const o=(r.name||`${Math.floor(99999999*Math.random())}`).split(" ").join("_").toLowerCase();r.email||(r.email=`${o}+${s}@guest.${fT}`);const a=this._settings.get("app.bookings.internal_emails")||["place.tech"];r.visit_expected=r.visit_expected??!a.find(l=>r.email.endsWith(l)),r.phone=""+r.phone,this.addUser(new Wo(r))}}downloadCSVTemplate(){this.custom_template||function zYe(t,n){const e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),e.setAttribute("download",t),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}("template.csv","Organisation,First Name,Last Name,Email,Phone,Assistance Required,Visit Expected\nFake Org,John,Smith,john.smith@example.com,01234567898,false,true")}setValue(e){this.active_list=e,this._onChange&&this._onChange(e)}writeValue(e){this.active_list=e}setDisabledState(e){this.disabled=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouch=e}displayFn(e){return e?.name||""}openNewUserModal(e=new Wo){const i=this._dialog.open(FSe,{width:"auto",height:"auto",data:{user:e}});i.componentInstance?.event.pipe(as(s=>"done"===s.reason)).subscribe(s=>{this.addUser(s.metadata),i.close()})}static#e=this.\u0275fac=function(i){return new(i||t)(I(Tr),I(nn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["a-user-list-field"]],viewQuery:function(i,s){if(1&i&&Gt(pBt,5),2&i){let r;nt(r=it())&&(s._search_el=r.first)}},inputs:{time:"time",disabled:"disabled",limit:"limit",guests:"guests",guests_only:"guests_only",hide_actions:"hide_actions",custom_template:"custom_template",filter:"filter"},outputs:{new_user:"new_user",download:"download"},features:[bt([{provide:Ki,useExisting:wn(()=>t),multi:!0}]),Ze],decls:17,vars:14,consts:()=>{let e,i,s,r,o;return e=$localize`:␟5ecf84665fa441ea616e171804e6652d010c9ed2␟5361968336322693258:Type a name or email`,i=$localize`:␟8ddbc311625de88f24142f65336765837378c1ca␟2206723750290169400: Add external user with email "${"\ufffd0\ufffd"}:INTERPOLATION:" `,s=$localize`:Add new external attendee␟afa9063944169ae2cd6bd8c0d5e943468ab77e90␟145038058737617323:${"\ufffd#3\ufffd"}:START_TAG_DIV: Add ${"\ufffd#4\ufffd"}:START_TAG_SPAN:External${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#3\ufffd"}:CLOSE_TAG_DIV:`,r=$localize`:Upload attendee list from CSV file␟0115abeee77902eeda78bb11be738c011e8be933␟4462048288204440387:${"\ufffd#7\ufffd"}:START_TAG_DIV: Upload ${"\ufffd#8\ufffd"}:START_TAG_SPAN:CSV${"\ufffd/#8\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd/#7\ufffd"}:CLOSE_TAG_DIV:${"\ufffd#9\ufffd\ufffd/#9\ufffd"}:TAG_INPUT:`,o=$localize`:Download template CSV file␟f761a83c085b86f026cdf949cf8015ee62d8ca8c␟6030611805365927572:${"\ufffd#12\ufffd"}:START_TAG_DIV:${"\ufffd#13\ufffd"}:START_TAG_SPAN:CSV${"\ufffd/#13\ufffd"}:CLOSE_TAG_SPAN: Template ${"\ufffd/#12\ufffd"}:CLOSE_TAG_DIV:`,[["origin","matAutocompleteOrigin"],["chipList",""],["search_field",""],["auto","matAutocomplete"],i,s,r,o,["form-field","",1,"mb-4"],["search",""],["appearance","outline","matAutocompleteOrigin","",1,"w-full"],["aria-label","User Seleciom"],["user","",3,"bg-warning","removed",4,"ngFor","ngForOf"],["placeholder",e,"name","user_email",3,"ngModelChange","matChipInputTokenEnd","ngModel","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes"],["diameter","24","matSuffix","",4,"ngIf"],[3,"click",4,"ngIf"],["class","leading-tight",3,"click",4,"ngFor","ngForOf"],["class","flex items-center space-x-2 -mt-4","actions","",4,"ngIf"],["user","",3,"removed"],[1,"flex","items-center","space-x-2"],[3,"matTooltip",4,"ngIf"],["matChipRemove","","remove",""],[3,"matTooltip"],["diameter","24","matSuffix",""],[3,"click"],[1,"leading-tight",3,"click"],[1,"text-xs"],["actions","",1,"flex","items-center","space-x-2","-mt-4"],["btn","","matRipple","","type","button","name","new-contact",1,"inverse","flex-1","sm:flex-none",3,"click"],[1,"flex","items-center","justify-center"],[1,"hidden","sm:inline"],["btn","","matRipple","","type","button","name","upload-csv",1,"relative","inverse","flex-1","sm:flex-none"],["type","file",1,"opacity-0","absolute","inset-0",3,"change"],["btn","","matRipple","","type","button","name","download-template",1,"inverse","flex-1","sm:flex-none",3,"click"]]},template:function(i,s){if(1&i){const r=se();m(0,"div",8)(1,"div",9)(2,"mat-form-field",10,0)(4,"mat-chip-grid",11,1),O(6,mBt,8,5,"mat-chip-row",12),_(),m(7,"input",13,2),H(9,"async"),P("ngModelChange",function(a){return B(r),V(s.updateSearch(a))})("matChipInputTokenEnd",function(a){return B(r),V(s.addUserFromEmail(a.value))}),_(),O(10,_Bt,1,0,"mat-spinner",14),_(),m(11,"mat-autocomplete",null,3),O(13,gBt,2,1,"mat-option",15)(14,bBt,5,2,"mat-option",16),H(15,"async"),_()(),O(16,vBt,14,0,"div",17),_()}if(2&i){const r=xt(5),o=xt(12);wt("disabled",s.disabled),b(6),C("ngForOf",s.active_list),b(),C("ngModel",ne(9,10,s.search$))("matAutocomplete",o)("matChipInputFor",r)("matChipInputSeparatorKeyCodes",s.separatorKeysCodes),b(3),C("ngIf",s.loading),b(3),C("ngIf",s.search_valid_email),b(),C("ngForOf",ne(15,12,s.user_list$)),b(2),C("ngIf",!s.hide_actions)}}})}return t})();const CBt=["input"];function SBt(t,n){1&t&&q(0,"mat-spinner",11)}function xBt(t,n){if(1&t){const e=se();m(0,"mat-option",12),P("click",function(){const s=B(e).$implicit,r=E();return r.setValue(s),V(r.blurInput())}),m(1,"div",13),S(2),_(),m(3,"div",14),S(4),_()()}if(2&t){const e=n.$implicit;b(2),Ye(e.name),b(2),K(" ",e.email," ")}}function EBt(t,n){if(1&t){const e=se();m(0,"mat-option",15)(1,"div",16),P("mousedown",function(s){return B(e),s.stopPropagation(),V(s.preventDefault())})("touchstart",function(s){return B(e),s.stopPropagation(),V(s.preventDefault())})("click",function(s){B(e);const r=E();return r.setValue(r.search_str),s.stopPropagation(),V(s.preventDefault())}),m(2,"div",17),oe(3,2),_()()()}if(2&t){const e=E();b(3),Vn(e.search_str),Gn(3)}}function TBt(t,n){if(1&t){const e=se();m(0,"mat-option",18),P("click",function(){return B(e),V(E().empty_fn())}),S(1),_()}if(2&t){const e=E();C("disabled",!e.empty_fn),b(),Os(" ",e.search_str?"No users found.":""," ",e.error," ")}}let sy=(()=>{class t extends hn{constructor(e){super(),this._settings=e,this.error="",this.query_fn=i=>this._settings.get("app.basic_user_search")?_z({q:i,authority_id:mc()?.id}).pipe(me(s=>s.data.map(r=>new Wo(r)))):lP(i),this.search$=new ot,this.search_results$=this.search$.pipe(_s(400),Tb(),Kt(i=>(this.loading=!0,this.options&&this.options.length>0?Ge(this.options):i.length>=3?this.guests?$m([lP(i),USe(i)]):this.query_fn(i):Ge([]))),Xi(i=>Ge([])),me(i=>{this.loading=!1,i=Mo(i);const s=(this.search_str||"").toLowerCase();return i.filter(r=>!this.filter||this.filter(r,s))})),this.cancelReset=()=>this.clearTimeout("reset"),this.blurInput=()=>{this.timeout("blur",()=>this._input_el?.nativeElement?.blur())}}ngOnInit(){this.subscription("search_results",this.search_results$.subscribe(e=>this.user_list=e)),this.resetSearchString()}resetSearchString(){this.timeout("reset",()=>this.search_str=this.active_user?.name||"",100)}setValue(e,i){if(!e)return;"string"==typeof e&&e===this.search_str&&(e=new Wo({name:(this.search_str||i||"").split("@")[0],email:this.search_str||i||""}));const s=e;!("name"in s)&&!("email"in s)||(this.active_user=s,this._onChange&&this._onChange(s),this.resetSearchString())}writeValue(e){this.active_user=e,this.resetSearchString()}setDisabledState(e){this.disabled=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouch=e}static#e=this.\u0275fac=function(i){return new(i||t)(I(nn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["a-user-search-field"]],viewQuery:function(i,s){if(1&i&&Gt(CBt,5,vt),2&i){let r;nt(r=it())&&(s._input_el=r.first)}},inputs:{disabled:"disabled",placeholder:"placeholder",options:"options",guests:"guests",error:"error",validate:"validate",empty_fn:"empty_fn",filter:"filter",query_fn:"query_fn"},features:[bt([{provide:Ki,useExisting:wn(()=>t),multi:!0}]),Ze],decls:11,vars:8,consts:()=>{let e;return e=$localize`:␟bda749fab8de2e52f25203a840d2aca70b8e5b4d␟1390235508766899631: Add external attendee "${"\ufffd0\ufffd"}:INTERPOLATION:" `,[["input",""],["auto","matAutocomplete"],e,["appearance","outline",1,"w-full","no-subscript"],["matInput","","keyboard","","name","user-search",3,"ngModelChange","keyup.enter","blur","focus","ngModel","disabled","placeholder","matAutocomplete"],["matPrefix","",1,"text-2xl","relative"],["matSuffix","","diameter","16",4,"ngIf"],[3,"optionSelected"],[3,"click",4,"ngFor","ngForOf"],["class","relative pointer-events-none",4,"ngIf"],[3,"disabled","click",4,"ngIf"],["matSuffix","","diameter","16"],[3,"click"],[1,"leading-tight"],[1,"text-xs","opacity-60"],[1,"relative","pointer-events-none"],[1,"absolute","inset-0","px-4","pointer-events-auto",3,"mousedown","touchstart","click"],[1,"pointer-events-none"],[3,"click","disabled"]]},template:function(i,s){if(1&i){const r=se();m(0,"mat-form-field",3)(1,"input",4,0),ii("ngModelChange",function(a){return B(r),jn(s.search_str,a)||(s.search_str=a),V(a)}),P("ngModelChange",function(a){return B(r),V(s.search$.next(a||""))})("keyup.enter",function(){return B(r),V(s.validate&&s.validate(s.search_str)?s.setValue(s.search_str):"")})("blur",function(){return B(r),V(s.resetSearchString())})("focus",function(){return B(r),V(s.cancelReset())}),_(),m(3,"app-icon",5),S(4,"search"),_(),O(5,SBt,1,0,"mat-spinner",6),_(),m(6,"mat-autocomplete",7,1),P("optionSelected",function(a){return B(r),V(s.setValue(a.option.value))}),O(8,xBt,5,2,"mat-option",8)(9,EBt,4,1,"mat-option",9)(10,TBt,2,3,"mat-option",10),_()}if(2&i){const r=xt(7);b(),ni("ngModel",s.search_str),C("disabled",s.disabled)("placeholder",s.placeholder||"Search for user...")("matAutocomplete",r),b(4),C("ngIf",s.loading),b(3),C("ngForOf",s.user_list),b(),C("ngIf",s.search_str&&s.validate&&s.validate(s.search_str)),b(),C("ngIf",!(null!=s.user_list&&s.user_list.length)&&(s.search_str||s.error))}},styles:["[_nghost-%COMP%]{display:block}app-icon[_ngcontent-%COMP%]{top:.15em;left:-.15em}"]})}return t})();function IBt(t,n){if(1&t){const e=se();m(0,"mat-chip-row",5),P("removed",function(){const s=B(e).$implicit;return V(E().remove(s))}),m(1,"span",6),S(2),_(),m(3,"button",7)(4,"app-icon"),S(5,"cancel"),_()()()}if(2&t){const e=n.$implicit;b(2),Ye(e),b(),wt("aria-label","Remove "+e)}}let GSe=(()=>{class t{constructor(){this.separators=[13,188],this.placeholder="",this.value=[],this.add=e=>function kBt(t,n){if(!t)return;const e=n.input,i=n.value,s=t.value;if(i.includes(",")){const r=i.split(",");for(const o of r)(o||"").trim()&&(s.push(o.trim()),t.setValue(s))}else(i||"").trim()&&(s.push(i.trim()),t.setValue(s));e&&(e.value="")}({value:this.value,setValue:i=>this.setValue(i)},e),this.remove=e=>function DBt(t,n){if(!t)return;const e=t.value,i=e.indexOf(n);i>=0&&(e.splice(i,1),t.setValue(e))}({value:this.value,setValue:i=>this.setValue(i)},e)}setValue(e){this.value=e,this._onChange&&this._onChange(e)}writeValue(e){this.value=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouch=e}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Se({type:t,selectors:[["item-list-field"]],inputs:{separators:"separators",placeholder:"placeholder"},features:[bt([{provide:Ki,useExisting:wn(()=>t),multi:!0}])],decls:5,vars:5,consts:[["chipList",""],["appearance","outline",1,"w-full"],["aria-label","Zone Tags"],[3,"removed",4,"ngFor","ngForOf"],[3,"matChipInputTokenEnd","placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],[3,"removed"],[1,"truncate","max-w-md"],["matChipRemove",""]],template:function(i,s){if(1&i){const r=se();m(0,"mat-form-field",1)(1,"mat-chip-grid",2,0),O(3,IBt,6,2,"mat-chip-row",3),_(),m(4,"input",4),P("matChipInputTokenEnd",function(a){return B(r),V(s.add(a))}),_()()}if(2&i){const r=xt(2);b(3),C("ngForOf",s.value),b(),C("placeholder",s.placeholder||"User groups...")("matChipInputFor",r)("matChipInputSeparatorKeyCodes",s.separators)("matChipInputAddOnBlur",!0)}},dependencies:[on,zs,nO,iO,eO,IE,St]})}return t})();function cP(t,n){return Tb((e,i)=>n?n(e[t],i[t]):e[t]===i[t])}function jSe(t,n){const e=t.getFullYear()-n.getFullYear()||t.getMonth()-n.getMonth()||t.getDate()-n.getDate()||t.getHours()-n.getHours()||t.getMinutes()-n.getMinutes()||t.getSeconds()-n.getSeconds()||t.getMilliseconds()-n.getMilliseconds();return e<0?-1:e>0?1:e}const UBt=["user","booked_by","resources","assets","members"];class Va{get group(){return this.extension_data.group||""}get is_all_day(){return this.all_day||this.duration>=720}get valid_assets(){if(this._valid_cache_expiry>Date.now()&&this._valid_asset_cache.length)return this._valid_asset_cache;const n=this.linked_bookings;return this._valid_asset_cache=(this.extension_data.assets||[]).map(e=>new _d({...e,event:this})).filter(e=>e.deliver_at<this.date_end).map(e=>{const i=n.find(s=>s.extension_data.request_id===e.id);return i&&(e.state=i.approved?"approved":i.rejected?"rejected":"pending"),e}),this._valid_cache_expiry=fi(Date.now(),5).valueOf(),this._valid_asset_cache}constructor(n={}){this._valid_asset_cache=[],this._valid_cache_expiry=0,this.id=n.id||"",this.parent_id=n.parent_id||"",this.asset_id=n.asset_id||"",this.asset_ids=n.asset_ids||[n.asset_id].filter(e=>e),this.asset_name=n.asset_name||n.extension_data?.asset_name||n.description||n.asset_id||"",this.zones=n.zones||[],this.booking_start=Math.floor(n.date/1e3)||n.booking_start||Ai(md(fi(Date.now(),5),{nearestTo:5})),this.booking_end=Math.floor(n.date/1e3)+60*n.duration||n.booking_end||Ai(fi(1e3*this.booking_start,n.duration||60)),this.booking_type=n.booking_type||" ",this.type=n.type||n.booking_type||"booking",this.date=n.date||1e3*this.booking_start||Date.now(),this.duration=n.duration||Math.abs(If(1e3*this.booking_start,1e3*this.booking_end))||60,this.date_end=1e3*this.booking_end||this.date+60*this.duration*1e3,this.timezone=n.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone,this.user_email=n.user_email||"",this.user_id=n.user_id||"",this.user_name=n.user_name||"",this.title=n.title??(this.booking_type?`${function qYe(t){return`${t[0].toUpperCase()}${t.substring(1)}`}(this.booking_type)} Booking`.trim():""),this.description=n.description||"",this.checked_in=!!n.checked_in,this.rejected=!!n.rejected,this.approved=!!n.approved,this.deleted=!!n.deleted,this.booked_by_id=n.booked_by_id||"",this.booked_by_name=n.booked_by_name||"",this.booked_by_email=n.booked_by_email||"",this.approver_id=n.approver_id||"",this.approver_email=n.approver_email||"",this.approver_name=n.approver_name||"",this.extension_data=n.extension_data||{},this.access=!!n.extension_data?.access,this.event_id=n.event_id,this.permission=(n.permission||"PRIVATE").toUpperCase(),this.attendees=n.attendees||n.guests||n.members||[],this.tags=n.tags||n.extension_data?.tags||[],this.images=n.images||[],this.all_day=n.all_day||this.duration>=1440,this.induction=n.induction||void 0,this.all_day&&(this.date=Ei(this.date).getTime(),this.duration=Math.max(1439,this.duration-(this.duration%24*60==0?1:0)),this.date_end=ks(fi(this.date,this.duration-1).valueOf()).getTime()),this.checked_out_at=n.checked_out_at,this.checked_in_at=n.checked_in_at,this.linked_event=n.linked_event||null,this.linked_bookings=n.linked_bookings||[],this.images=n.images||[],this.status=this.checked_out_at>0?"ended":this.rejected||this.deleted?"declined":this.approved?"approved":"tentative",this.process_state=n.process_state||"pending",this.recurrence_type=n.recurrence_type||"none",this.recurrence_days=n.recurrence_days,this.recurrence_nth_of_month=n.recurrence_nth_of_month,this.recurrence_interval=n.recurrence_interval,this.recurrence_end=n.recurrence_end,this.instance=n.instance;for(const e in n)!(e in this)&&!UBt.includes(e)&&n[e]&&(this.extension_data[e]=n[e]||this.extension_data[e]);this.extension_data.assets=(this.extension_data.assets||[]).map(e=>new _d({...e,event:this,date:this.date})),this.extension_data.tags=n.tags||[],this.extension_data.request&&(this.extension_data.request=new _d({...this.extension_data.request,event:this,date:this.date}))}toJSON(){const n={...this};return this.id||delete n.id,n.extension_data.assets=n.extension_data.assets.map(e=>new _d({...e,event:null})),n.extension_data.request&&(n.extension_data.request=new _d({...n.extension_data.request,event:null})),n.parent_id||delete n.parent_id,n.zones=n.zones.filter(e=>e),delete n.date,delete n.duration,zde(n),n}get location(){return this.extension_data?.location||this.description}get is_today(){return eh(this.date,new Date)}get is_done(){const n=new Date,e=this.all_day?mO(this.date,24):fi(this.date,this.duration),i=1e3*(this.checked_out_at||this.extension_data.checked_out_at||0);let s=e.getTime();return!!(i&&Date.now()>i)||nh(n,new Date(s))}get state(){const n=new Date,e=this.date;return gl(n,iy(e,{minutes:-15}))?"future":gl(n,e)?"upcoming":gl(n,iy(e,{minutes:15}))?"started":gl(n,iy(e,{minutes:this.duration}))?"in_progress":"done"}}const no="/api/staff/v1/bookings";function gd(t){const n=Vr(t);return Aa(`${no}${n?"?"+n:""}`).pipe(me(e=>e.map(i=>new Va(i))),Xi(e=>Ge([])))}function cq(t,n){const e=Vr(n);return Xb(`${no}${e?"?"+e:""}`,t).pipe(me(i=>new Va(i)))}function uq(t,n={}){return n.instance?function KBt(t,n){return GE(`${no}/${encodeURIComponent(t)}/instance/${n}`,{response_type:"void"})}(t,n.start_time):GE(`${no}/${encodeURIComponent(t)}`,{response_type:"void"})}function WSe(t,n,e,i,s="room",r=[0,0]){return gd({type:s,period_start:Ai(n),period_end:Ai(fi(n,e))}).pipe(me(o=>t.map(a=>!o.find(l=>l.asset_id===a&&(!i||i!==l.id)))))}function dq(){return dq=z(function*(t,n,e){const i=yield gd({type:n,period_start:Ai(t.date),period_end:Ai(fi(t.date,t.duration))}).pipe(me(r=>r.filter(o=>o.parent_id===t.id))).toPromise();yield Promise.all(i.map(r=>uq(r.id).toPromise())),yield Promise.all(t.linked_bookings.filter(r=>r.booking_type===n).map(r=>uq(r.id).toPromise()));const s=t.system?.zones||Ss(Mo(t.resources.map(r=>r.zones)))||[];yield Promise.all(e.map(r=>{const o=i.find(a=>a.asset_ids.find(l=>r.items?.find(c=>c.item_ids.includes(l))));return cq(new Va({type:n,booking_type:n,date:t.date,duration:t.duration,description:t.title,user_email:t.host,asset_id:r.email,asset_name:r.name,title:r.name,attendees:[r],approved:o?.approved&&!r._changed,rejected:o?.rejected&&!r._changed,extension_data:{parent_id:t.id,name:r.name,location_id:t.location},zones:s}),{ical_uid:t.ical_uid,event_id:t.id}).toPromise()}))}),dq.apply(this,arguments)}class hq{constructor(n={}){this.id=n.id||"",this.name=n.name||"",this.primary=!!n.primary,this.summary=n.summary||"",this.can_edit=!!n.can_edit,this.resource=new Ul(n.resource||n.system),this.availability=(n.availability||[]).map(({starts_at:e,ends_at:i,date:s,duration:r,status:o})=>({date:new Date(s||1e3*e).valueOf(),duration:r||If(1e3*i,1e3*e),status:o})),this.hidden=!!n.hidden}}const uP="/api/staff/v1/calendars";function qSe(t){const n=Vr(t);return Aa(`${uP}/availability${n?"?"+n:""}`).pipe(me(e=>e.map(i=>new hq(i))))}const KSe=t=>me(n=>n.filter(e=>!!e.resource).map(e=>new Ul({...e.resource,level:t?.levelWithID(e.resource.zones),availability:e.availability})).filter(e=>e.bookable));function e6t(t,n){const e=Vr(t);return Aa(`${uP}/free_busy${e?"?"+e:""}`).pipe(me(i=>i.map(s=>new hq(s))),KSe(n))}const Zl="/api/staff/v1/events";function XSe(t,n={}){const e=Vr(n);return Aa(`${Zl}/${encodeURIComponent(t)}${e?"?"+e:""}`).pipe(me(i=>new Ta(i)))}const YSe=(t,n)=>{const e=t.update_master&&t.recurring_event_id||t.id;return delete t?.status,e?function i6t(t,n,e={},i="patch"){const s=Vr(e);return("patch"===i?UE:zE)(`${Zl}/${encodeURIComponent(t)}${s?"?"+s:""}`,new Ta(n).toJSON()).pipe(me(r=>new Ta(r)))}(e,{...t,id:e},n):function n6t(t){return Xb(`${Zl}`,new Ta(t).toJSON()).pipe(me(n=>new Ta(n)))}(t)};function ZSe(t,n,e={}){const i=Vr(e);return Xb(`${Zl}/${encodeURIComponent(t)}/attendee${i?"?"+i:""}`,n).pipe(me(s=>new mT(s)))}function QSe(t,n,e,i,s,r=[0,0]){const o=fi(n,e).valueOf();return Vt([qSe({system_ids:t.join(),period_start:Ai(n),period_end:Ai(o)}).pipe(Xi(a=>Ge([]))),i&&t.includes(i)?e6t({period_start:Ai(n),period_end:Ai(o),system_ids:i}):Ge([])]).pipe(me(([a,l])=>{const c=t.map(u=>!!a.find(d=>d.id===u||d.resource?.id===u));for(const u of l){if(!t.includes(u.id))continue;const d=u.availability.filter(h=>!(h.date===r[0]&&h.duration===r[1]));c[t.indexOf(u.id)]=!d.find(h=>"free"!==h.status)}return c}))}function pq(t,n){const e=Tn(t);return e.setHours(n),e}const JSe=t=>{const n=t.parent?.get("date");return n&&nh(Date.now(),fi(n.value,t.value))?{duration:!0}:null};iy(function c6t(t,n){const e=Tn(t);return e.setMinutes(n),e}(pq(new Date,6),0),{days:-1});const d6t=t=>n=>t.value?.length&&!n.value?{catering_field:"Catering sub-fields are required"}:null;function b6t(t,n){if(1&t&&(Pi(0,3,1),Es(1),H(2,"date"),H(3,"date"),$i()),2&t){const e=E(3);b(3),Vn(At(2,2,e.details.date,"shortTime"))(At(3,5,e.details.date+60*e.details.duration*1e3,"shortTime")),Gn(0)}}function v6t(t,n){if(1&t){const e=se();Wt(0),m(1,"main",14)(2,"h2",15),oe(3,2),_(),q(4,"img",16),m(5,"p",17),Pi(6,3),H(7,"date"),O(8,b6t,4,8,"ng-container",18),$i(),_(),m(9,"p",19),oe(10,4),_(),m(11,"p",20)(12,"strong"),S(13),H(14,"currency"),_()(),m(15,"card-input-field",21),ii("ngModelChange",function(s){B(e);const r=E(2);return jn(r.card_details,s)||(r.card_details=s),V(s)}),_()(),m(16,"footer",22)(17,"button",23),P("click",function(){return B(e),V(E(2).processPayment())}),oe(18,5),_()(),m(19,"button",24)(20,"i",25),S(21,"close"),_()(),qt()}if(2&t){const e=E(2);b(8),C("ngIf",!e.details.all_day),Vn(e.details.type)(e.details.resource_name)(At(7,6,e.details.date,"mediumDate")),Gn(6),b(5),Ye(At(14,9,e.details.amount/100,e.code)),b(2),ni("ngModel",e.card_details)}}function y6t(t,n){if(1&t&&(m(0,"div",12),O(1,v6t,22,12,"ng-container",13),_()),2&t){const e=E(),i=xt(5);b(),C("ngIf",!e.success)("ngIfElse",i)}}function w6t(t,n){if(1&t&&(m(0,"div",26),q(1,"mat-spinner",27),m(2,"p"),S(3),H(4,"async"),_()()),2&t){const e=E();b(3),Ye(ne(4,1,e.loading))}}function C6t(t,n){if(1&t&&(m(0,"main",28)(1,"h2",15),oe(2,6),_(),m(3,"h3",29),S(4),_(),m(5,"p"),oe(6,7),H(7,"currency"),_(),m(8,"p"),oe(9,8),_(),m(10,"p"),S(11),H(12,"date"),_(),m(13,"p"),oe(14,9),H(15,"date"),H(16,"date"),_()(),q(17,"img",30),m(18,"footer",31)(19,"button",32),oe(20,10),_()()),2&t){const e=E();b(4),K(" Ref #",e.transaction_id," "),b(3),Vn(At(7,6,e.details.amount/100,e.code)),Gn(6),b(2),Vn(e.details.resource_name),Gn(9),b(2),Ye(At(12,9,e.details.date,"mediumDate")),b(5),Vn(At(15,12,e.details.date,"shortTime"))(At(16,15,e.details.date+60*e.details.duration*1e3,"shortTime")),Gn(14)}}let mq=(()=>{class t{get code(){return this._org.currency_code}constructor(e,i){this._data=e,this._org=i,this.event=new Ae,this.details=this._data,this.loading=this._data.loading,this.success=!1,this.transaction_id="12345678"}processPayment(){var e=this;return z(function*(){!e.card_details||!e._validCardDetails()||(e.event.emit(e.card_details),yield e._data.makePayment(e.card_details),e.success=!0)})()}_validCardDetails(){return(this.card_details?.cardholder.length||0)>0&&(this.card_details?.cvv.length||0)>=3}static#e=this.\u0275fac=function(i){return new(i||t)(I(or),I(Sn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["payment-modal"]],outputs:{event:"event"},decls:6,vars:4,consts:()=>{let e,i,s,r,o,a,l,c,u;return e=$localize`:␟4d64c520c43eead598939b50c326e665c6e88fa4␟7177958266181561076:Booking Payment`,i=$localize`:␟00a4b4852357812c8f53bb8e5c7598d479bea113␟6612380128469929872: You are requesting a ${"\ufffd0\ufffd"}:INTERPOLATION: booking in ${"\ufffd1\ufffd"}:INTERPOLATION_1: for ${"\ufffd2\ufffd"}:INTERPOLATION_2: ${"\ufffd*8:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER: between ${"\ufffd0:1\ufffd"}:INTERPOLATION_3: and ${"\ufffd1:1\ufffd"}:INTERPOLATION_4: ${"\ufffd/#1:1\ufffd\ufffd/*8:1\ufffd"}:CLOSE_TAG_NG_CONTAINER:`,s=$localize`:␟7a9510cbfdcb53b8dcac3f0bd7958196958333ff␟2305336913310307878:You booking will cost:`,r=$localize`:␟9069fc3477fe6107249755afedd9fe14140bb201␟8427617350792373644: Make Payment `,o=$localize`:␟dbbd5277093a2dbc265472510779d835afc39f45␟8206804611071524488:Payment Successful`,a=$localize`:␟bb02e353442d9b1ec8fc7d9875465cafb134f7e4␟2765198892596811562:${"\ufffd0\ufffd"}:INTERPOLATION: paid.`,l=$localize`:␟931d5e8e4e517671212210e9d716fa2721c9e67c␟6374111499070607459:${"\ufffd0\ufffd"}:INTERPOLATION: booked.`,c=$localize`:␟e2ddd0e2db3568ac26e9f86a9e366f864a4e6e94␟783447026381975793: ${"\ufffd0\ufffd"}:INTERPOLATION: and ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,u=$localize`:␟001127b263e7132960af8fa70cce4c2635980fbc␟8163835392610431386: Great, thanks. `,[["load_state",""],["success_state",""],e,i,s,r,o,a,l,c,u,["class","relative max-h-[100vh] overflow-auto",4,"ngIf","ngIfElse"],[1,"relative","max-h-[100vh]","overflow-auto"],[4,"ngIf","ngIfElse"],[1,"px-4","pt-8","w-[24rem]","space-y-2","flex","flex-col","items-center","relative"],[1,"text-2xl","font-medium"],["src","assets/icons/cost.svg",1,"w-1/2"],[1,"text-sm","text-center","pb-2"],[4,"ngIf"],[1,"text-sm"],[1,"text-lg","font-medium","text-center"],[1,"w-full",3,"ngModelChange","ngModel"],[1,"p-4"],["matRipple","",1,"w-full",3,"click"],["icon","","matRipple","","mat-dialog-close","",1,"absolute","top-1","left-1"],[1,"material-icons","text-2xl"],[1,"w-full","h-full","flex","flex-col","items-center","justify-center","p-8"],["diameter","32"],[1,"px-8","pt-8","w-[24rem]","flex","flex-col","relative"],[1,"text-xl","font-medium","mb-2"],["src","assets/icons/payment-confirmed.svg",1,"w-full"],[1,"p-4","border-t","border-base-200"],["btn","","matRipple","","mat-dialog-close","",1,"w-full"]]},template:function(i,s){if(1&i&&(O(0,y6t,2,2,"div",11),H(1,"async"),O(2,w6t,5,3,"ng-template",null,0,ln)(4,C6t,21,18,"ng-template",null,1,ln)),2&i){const r=xt(3);C("ngIf",!ne(1,2,s.loading))("ngIfElse",r)}}})}return t})();const Q2="Payment";let exe=(()=>{class t{get payment_module(){return this._org.binding("payments")}constructor(e,i,s){this._org=e,this._settings=i,this._dialog=s,this._loading=new at(""),this._active_card=new at(""),this.loading=this._loading.asObservable(),this.payment_sources=Ge(1).pipe(Kt(()=>{const r=Qr(this.payment_module,Q2);return r?r.execute("list_payment_methods",["card"]):Ge([])}),gi(r=>r[0]?this._active_card.next(r[0].id):""),zn(1))}makePayment(e){var i=this;return z(function*(){if(!i.payment_module)throw"Payments not enabled";const[s,r]=yield i._getCostOfProduct(e?.type).catch(h=>[0,60]);if(console.log("Cost:",s,r),s<=0)return;let o=i._settings.get("STRIPE_Customer_ID");o||(o=yield i._newCustomerID()),i._settings.saveUserSetting("STRIPE_Customer_ID",o);const a=s*(e.duration/r);let l;const c=function(){var h=z(function*(p){l=yield i._processPayment(a,o,p).catch(f=>{throw i._loading.next(""),f})});return function(f){return h.apply(this,arguments)}}(),u={...e,rate:`$${(s/100).toFixed(2)} per hour`,amount:a,makePayment:c,loading:i.loading};return yield i._dialog.open(mq,{data:u}).afterClosed().toPromise(),l})()}_addPaymentMethod(e){var i=this;return z(function*(){const s=Qr(i.payment_module,Q2);if(!s)throw"Unable to load module";const r=yield s.execute("add_payment_method",["card",null,null,null,null,null,null,null,null,null,null,null,e]);return r.id||r})()}_getCostOfProduct(e){var i=this;return z(function*(){let s=[0,60];const r=Qr(i.payment_module,Q2);if(!r)return s;const o=yield r.execute("get_product_prices",[null,null,e]);return o.length?o:s})()}_processPayment(e,i,s){var r=this;return z(function*(){r._loading.next("Checking payment method..."),console.log("Getting payment method...");const o=s?yield r._addPaymentMethod(s):r._active_card.getValue();if(!o)throw"No payment source selected";r._loading.next("Processing payment..."),console.log("Processing payment...");const a=Qr(r.payment_module,Q2);if(!a)throw"Unable to load module";const l=yield a.execute("create_payment_intent",[e,r._org.building.currency||"USD",null,null,i,null,null,null,Qt()?.email]);if(!l)throw"Failed to create payment";return console.log("Confirming payment..."),yield a.execute("confirm_payment_intent",[l,o]),r._loading.next(""),{success:!0,state:"approved",invoice_id:l,amount:e,created_at:Date.now(),updated_at:Date.now()}})()}_newCustomerID(){var e=this;return z(function*(){const i=Qr(e.payment_module,Q2);if(!i)throw"Unable to load module";const s=Qt();return yield i.execute("create_customer",[0,null,null,null,`${s.id}|${s.name}|FromPlaceOS`,s.email])})()}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Sn),ae(nn),ae(Tr))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function S6t(t){const n=function htt(t,n=J0){return pO(t,Hpe(n)-Hpe(J0)).valueOf()}(t,"UTC");return`${Us(n,"yyyyMMdd")}T${Us(n,"HHmmss")}Z`}function x6t(t){return`${Us(t,"yyyyMMdd")}`}function sxe(t){return t.replace(/,/gm,",").replace(/;/gm,";").replace(/\r\n/gm,"\n").replace(/\n/gm,"\\n").replace(/(\\n)[\s\t]+/gm,"\\n")}let rxe=(()=>{class t{constructor(e,i){this._event=e,this._dialog=i,this.outlook_link=function ixe(t,n="office"){t.date||(t.date=Date.now());const e={path:"/calendar/action/compose",rru:"addevent",startdt:new Date(t.date).toISOString(),enddt:fi(t.date,t.duration??60).toISOString(),subject:t.title,body:`${t.body||""}${t.id?"\n\n[ID|"+t.id+"]":""}`,location:t.location,allday:t.all_day??!1};t.all_day&&delete e.enddt;const i=(t.attendees||[]).map(r=>r.email||r),s=((t.resources?.length?t.resources:null)||[t.system]).map(r=>r?.email||r);return(i.length||s.length)&&(e.to=Ss([...i,...s]).join()),"office"===n?`https://outlook.office.com/calendar/0/action/compose?${Vr(e)}`:`https://outlook.live.com/calendar/0/action/compose?${Vr(e)}`}(this._event),this.google_link=function nxe(t){const n=t.all_day?x6t:S6t,e={action:"TEMPLATE",text:t.title,details:`${t.body||""}${t.id?"\n\n[ID|"+t.id+"]":""}`,location:t.location,trp:!1,dates:`${n(t.date)}/${n(fi(t.date,t.duration??60))}`},i=(t.attendees||[]).map(r=>r.email||r),s=((t.resources?.length?t.resources:null)||[t.system]).map(r=>r?.email||r);return(i.length||s.length)&&(e.add=Ss([...i,...s]).join()),`https://calendar.google.com/calendar/render?${Vr(e)}`}(this._event),this.ical_link=function txe(t){const n=[],e=sxe(`${t.body||""}${t.id?"\n\n[ID|"+t.id+"]":""}`),i=sxe(`${t.location}`);n.push(["BEGIN","VCALENDAR"]),n.push(["VERSION","2.0"]),n.push(["BEGIN","VEVENT"]),n.push(["URL",`${t.meeting_url}`]),n.push(["DTSTART",`${new Date(t.all_day?Gl(qu(t.date,{hours:6,minutes:0})):t.date).toISOString()}`]),n.push(["DTEND",`${t.all_day?Gl(qu(t.date,{hours:18,minutes:0})).toISOString():fi(t.date,t.duration??60).toISOString()}`]),n.push(["SUMMARY",`${t.title}`]),n.push(["DESCRIPTION",e]),n.push(["LOCATION",i]);const s=t.organiser?.name||t.host?.split("@")||t.user_name||"User";return n.push(["ORGANIZER",`CN=${s}:MAILTO:${t.host||t.user_email}`]),`data:text/calendar;charset=utf8,${n.map(([o,a])=>`${o}:${encodeURIComponent(a)}`).join("\n")}`}(this._event),this.has_actioned=!1}close(){if(!this.has_actioned)return Ti("You need to select a calendar option to finish creating this booking");this._dialog.close(!0)}static#e=this.\u0275fac=function(i){return new(i||t)(I(or),I(Xa))};static#t=this.\u0275cmp=Se({type:t,selectors:[["event-link-modal"]],decls:24,vars:13,consts:()=>{let e,i,s,r,o;return e=$localize`:␟29e3480e3d010232704522cde3ca29d23cc7725f␟5139383754155835256:Add event to your calendar`,i=$localize`:␟34c16b14ad0e33db574c8bea543e66e766aa3a01␟4015832758698516701:Create in Outlook`,s=$localize`:␟f745484670e6b6bbb8a1c327c222e665fb25b863␟3788591245559456526:Create in Google Calendar`,r=$localize`:␟1af54061e7f4bcfb1048ffaa05c9b8f7c4b41679␟4894641609416495396:Download iCal File`,o=$localize`:␟4dc1e9a4bbd21cf153990984cd4ecb4444117098␟6327967827692127661: Close `,[e,i,s,r,o,[1,"p-4","w-full","pb-2"],[1,"flex","flex-col","items-center","space-y-4","p-4","relative"],["btn","","matRipple","","target","_blank","rel","noopener noreferer",1,"flex","items-center","p-2","space-x-2","pr-4","w-64","rounded","inverse",3,"click","href"],["src","assets/icons/outlook.svg",1,"w-6"],["src","assets/icons/gcal.svg",1,"w-6"],[1,"text-xl"],["btn","","matRipple","",1,"w-64",3,"click"],["icon","","matRipple","",1,"absolute","top-2","right-0",3,"mat-dialog-close"]]},template:function(i,s){1&i&&(m(0,"div",5),oe(1,0),_(),m(2,"div",6)(3,"a",7),H(4,"sanitize"),P("click",function(){return s.has_actioned=!0}),q(5,"img",8),m(6,"span"),oe(7,1),_()(),m(8,"a",7),H(9,"sanitize"),P("click",function(){return s.has_actioned=!0}),q(10,"img",9),m(11,"span"),oe(12,2),_()(),m(13,"a",7),H(14,"safe"),P("click",function(){return s.has_actioned=!0}),m(15,"app-icon",10),S(16,"download"),_(),m(17,"span"),oe(18,3),_()(),m(19,"button",11),P("click",function(){return s.close()}),oe(20,4),_()(),m(21,"button",12)(22,"app-icon"),S(23,"close"),_()()),2&i&&(b(3),C("href",At(4,4,s.outlook_link,"url"),qa),b(5),C("href",At(9,7,s.google_link,"url"),qa),b(5),C("href",At(14,10,s.ical_link,"url"),qa),b(8),C("mat-dialog-close",s.has_actioned))},dependencies:[Ls,St,Tt,uT,ih],styles:["[_nghost-%COMP%]{position:relative}"]})}return t})();const Hr="/api/engine/v2";const dP=new Map;function k6t(t={}){const n=Vr(t);return dP.has(t.zones)?Ge(dP.get(t.zones)):Aa(`${Hr}/asset_types${n?"?"+n:""}`).pipe(me(e=>e),Kt(e=>$m(e.map(i=>hP({limit:200,...t,type_id:i.id}).pipe(me(s=>({...i,assets:s})))))),gi(e=>{dP.set(t.zones,e),setTimeout(()=>dP.delete(t.zones),3e5)}))}function hP(t={}){const n=Vr(t);return Aa(`${Hr}/assets${n?"?"+n:""}`).pipe(me(e=>e))}function axe(t,n){return t.type="asset-request",Vt([k6t(t),gd(t)]).pipe(me(([e,i])=>(i=i.filter(s=>"declined"!==s.status&&"cancelled"!==s.status),e.map(s=>({...s,assets:s.assets.filter(r=>n?.includes(r.id)||!i.find(o=>!n.includes(o.id)&&(o.asset_id===r.id||o.asset_ids?.includes(r.id))))})))))}function gq(){return gq=z(function*({id:t,ical_uid:n,from_booking:e},{date:i,duration:s,all_day:r,host:o,location_name:a,location_id:l,zones:c,reset_state:u},d=[],h=!1){const p=yield gd({period_start:Ai(r?Ei(i):i),period_end:Ai(r?ks(fi(i,s)):fi(i,s)),type:"asset-request",zones:c.join(",")}).toPromise(),f=t&&n?yield gd({period_start:Ai(Ei(i)),period_end:Ai(ks(i)),type:"asset-request",email:o,event_id:e?"":t,booking_id:e?t:"",ical_uid:n}).toPromise():[],g=f.map(D=>[D.id,new _d(D.extension_data.request)]);d?.forEach(D=>D.conflict=!1);let v=h?d.map(D=>D.id):function B6t(t,n){if((!t||t?.length<=0)&&n?.length)return[];if(!n)return[];const i=[];for(const s of t){const r=n.find(o=>o.id===s.id);(!r||r.ref_id!==s.ref_id)&&i.push(s.id)}return i}(d,g.map(([D,F])=>F),u);if(u){const D=f.filter(F=>F.approved||F.rejected);v=Ss([...v,...D.map(F=>F.extension_data.request_id)])}const y=g.filter(([D,F])=>!v.includes(F.id)),w=g.filter(([D,{id:F}])=>v.includes(F)),x=d.filter(({id:D})=>v.includes(D));let k=Mo(p.filter(D=>!D.rejected&&(!f.find(F=>F.id===D.id)||y.find(([F])=>D.event_id===F))).map(D=>D.asset_ids));for(const[D,F]of y)k=[...k,...Mo(F.items.map($=>$.item_ids))];const R=yield axe({period_start:Ai(r?Ei(i):i),period_end:Ai(r?ks(fi(i,s)):fi(i,s)),type:"asset-request"},f.map(D=>D.id)).toPromise(),N=x.map(D=>{let F=Mo(D.items.map(({id:Q,item_ids:Y,quantity:ce})=>{const Ce=R.find(le=>le.id===Q)?.assets;if(!Ce)return Y;const Z=[];return new Array(ce).fill(0).map((le,te)=>{const be=k.includes(Y[te])||Z.includes(Y[te])||!Y[te]?Ce?.find(({id:fe})=>!k.includes(fe)&&!Z.includes(fe))?.id:Y[te];if(!be)throw D.conflict=!0,"Unable to find available asset for request";return Z.push(be),be})}));const $=f.find(Q=>Q.asset_ids.find(Y=>D.items?.find(ce=>ce.item_ids.includes(Y))));k=[...k,...F];const j={type:"asset-request",booking_type:"asset-request",date:i,duration:s,all_day:r,description:a,user_email:o,asset_id:F[0],asset_ids:F,asset_name:D.items.map(Q=>Q.name).join(", "),title:D.items.map(Q=>Q.name).join(", "),approved:!u&&$?.approved&&!D._changed,rejected:!u&&$?.rejected&&!D._changed,extension_data:{parent_id:t,request_id:D.id,location_id:l,request:new _d({...D,event:null})},zones:c||[]};return e&&(j.parent_id=t),cq(new Va(j),{ical_uid:n,event_id:e?"":t})});return z(function*(){yield Promise.all(w.map(([D])=>uq(D).toPromise())),yield Promise.all(N.map(D=>D.toPromise()))})}),gq.apply(this,arguments)}function cxe(t){const n=Tn(t);return n.setSeconds(59,999),n}const uxe=[];function dxe(t,n){return mO(t,-n)}new class V6t{constructor(n){this.images=[],Object.assign(this,n)}};const bq={};let hxe=(()=>{class t{constructor(e){this._org=e,this._options=new at({date:Date.now()}),this._search=new at(""),this._category=new at([]),this._loading=new at(""),this.search=this._search.asObservable(),this.category=this._category.asObservable(),this.options=this._options.asObservable(),this.loading=this._loading.asObservable(),this.rules=Vt([this._options,this._org.active_building]).pipe(Zt(([i,s])=>!!s),_s(300),Kt(([i,s])=>(this._loading.next(this._loading.getValue()+"[Rules]"),function U6t(t,n=!1){return t?((!bq[t]||n)&&(bq[t]=co(t,"assets_config").pipe(me(e=>e.details instanceof Array?e.details:[]),Xi(e=>Ge([])))),bq[t]):Ge([])}(s.id||i.zone||""))),gi(i=>this._loading.next(this._loading.getValue().replace(/\[Rules\]/g,""))),zn(1)),this.asset_list=Ge(0).pipe(Kt(()=>(this._loading.next(this._loading.getValue()+"[Assets]"),hP())),gi(i=>this._loading.next(this._loading.getValue().replace(/\[Assets\]/g,""))),zn(1)),this.asset_bookings=this._options.pipe(_s(300),Kt(({zone:i,date:s})=>(this._loading.next(this._loading.getValue()+"[Bookings]"),gd({zones:i||"",period_start:Ai(Ei(s)),period_end:Ai(ks(s)),type:"asset-request"}))),gi(i=>this._loading.next(this._loading.getValue().replace(/\[Bookings\]/g,""))),zn(1)),this.available_groups=Vt([this._options,this._org.active_building]).pipe(_s(300),Kt(([{zone:i,date:s,duration:r,ignore:o},a])=>axe({zones:a.id||i||"",period_start:Ai(Gl(s)),period_end:Ai(cxe(fi(s,r||30))),type:"asset-request",rejected:!1},o).pipe(Xi(()=>Ge([])))),me(i=>i.sort((s,r)=>s.name.localeCompare(r.name))),gi(i=>function z6t(t){for(const n of t)uxe.find(({id:e})=>e===n.id)||uxe.push(n)}(i)),zn(1)),this.category_list=this._org.active_building.pipe(Kt(i=>function oxe(t={}){const n=Vr(t);return Aa(`${Hr}/asset_categories${n?"?"+n:""}`).pipe(me(e=>e))}({zone_id:i.id})),me(i=>i.sort((s,r)=>s.name.localeCompare(r.name))),zn(1)),this.filtered_assets=Vt([this._search,this._category,this.available_groups,this.rules]).pipe(me(([i,s,r,o])=>{const a=i.toLowerCase();return r.filter(c=>c.assets?.length&&(!s.length||s.includes(c.category_id))&&(c.name.toLowerCase().includes(a)||c.description.toLowerCase().includes(a))&&function G6t(t,n,e){const i=Date.now(),s=new Date(e.date),r=a=>t.name===a.name||t.category.name.includes(a.name)||e.resources.some(l=>l.zones.includes(a.name))||e.space?.zones.includes(a.name)||"*"===a.name,o=a=>a.rules.reduce((l,c)=>{switch(c[0]){case"is_before":return l+(gl(i,dxe(s,c[1]))?1:0);case"within_hours":return l+(nh(i,dxe(s,c[1]))?1:0);case"after_hour":return l+(nh(s,pq(s,c[1]))?1:0);case"before_hour":return l+(gl(s,pq(s,c[1]))?1:0);case"min_length":return l+(e.duration>=a7(c[1])?1:0);case"max_length":return l+(e.duration<=a7(c[1])?1:0);case"visitor_type":return l+(e.ext("visitor_type")===c[1]?1:0);default:return l+1}},0);for(const a of n)if(r(a)&&o(a)<a.rules.length)return!1;return!0}(c,o,this._options.getValue()))}),zn(1)),this.settings=Vt([this._org.active_building]).pipe(Zt(([i])=>!!i),Kt(([i])=>co(i.id,"assets-settings").pipe(Xi(s=>Ge({})))),me(i=>i.details||{}),zn(1)),this.disabled_rooms=this.settings.pipe(me(i=>i.disabled_rooms||[]))}setSearch(e){this._search.next(`${e}`)}toggleCategory(e){const i=this._category.getValue();i.includes(e)?this._category.next(i.filter(s=>s!==e)):this._category.next([...i,e])}getOptions(){return this._options.getValue()}setOptions(e){this._options.next({...this._options.value,...e})}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Sn))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const j6t=["book/rooms","book/spaces","book/meeting","schedule/view","confirm/success","upcoming"];let ng=(()=>{class t extends hn{get options_value(){return this._options.getValue()}get is_multiday(){return this._event.getValue()?.duration>1440}get view(){return this._view.getValue()}get form(){return this._form}get event(){return this._event.getValue()}get favorite_spaces(){return this._settings.get("favourite_spaces")||[]}get has_calendar(){return!0!==this._settings.get("app.events.use_bookings")}constructor(e,i,s,r,o,a){super(),this._org=e,this._router=i,this._payments=s,this._settings=r,this._assets=o,this._dialog=a,this._view=new at("form"),this._options=new at({zone_ids:[],features:[]}),this._form=function h6t(t=new Ta,n){t||(t=new Ta);const e=new Rl({id:new Ke(t.id),ical_uid:new Ke(t.ical_uid),host:new Ke(t.host||t.organiser?.email||Qt()?.email||"",[Zr.required]),organiser:new Ke(t.organiser||new Wo({email:t.host||""})),creator:new Ke(t.creator||Qt()?.email),calendar:new Ke(t.calendar),attendees:new Ke(t.attendees||[]),resources:new Ke(t.resources||[]),title:new Ke(t.title),body:new Ke(t.body),private:new Ke(t.private),date:new Ke(t.date,[Zr.required]),duration:new Ke(t.duration,[JSe]),all_day:new Ke(t.all_day),date_end:new Ke(t.date_end),recurring:new Ke(t.recurring),recurrence:new Ke(t.recurrence),recurring_event_id:new Ke(t.recurring_event_id),master:new Ke(t.master),attachments:new Ke(t.attachments),catering:new Ke(t.extension_data?.catering),catering_notes:new Ke(t.extension_data?.catering[0]?.notes||""),catering_charge_code:new Ke(t.extension_data?.catering[0]?.charge_code||""),setup_time:new Ke(t.setup_time||0),breakdown_time:new Ke(t.breakdown_time||0),assets:new Ke(t.extension_data?.assets),visitor_type:new Ke(t.extension_data?.visitor_type),location:new Ke(t.location),needs_space:new Ke(!0),needs_parking:new Ke(t.extension_data?.needs_parking||!1),event_type:new Ke(t.extension_data?.event_type||""),category:new Ke(t.extension_data?.category||""),tags:new Ke(t.extension_data?.tags||[]),update_master:new Ke(!1),system:new Ke(t.system),attendance_type:new Ke(t.extension_data?.attendance_type||"ONSITE"),timezone:new Ke(t.timezone||J0),shared_event:new Ke(t.extension_data?.shared_event||!1),view_access:new Ke(t.extension_data?.view_access||"PRIVATE"),images:new Ke(t.extension_data?.images||[]),featured:new Ke(t.extension_data?.featured||!1)});e.get("organiser").valueChanges.subscribe(s=>e.controls.host.setValue(s?.email)),e.get("resources").valueChanges.subscribe(s=>{e.controls.system.setValue(s?.length?s[0]:null),e.controls.assets[s?.length?"enable":"disable"]()});const i=()=>{!e.value.catering?.length||!e.getRawValue().date||e.patchValue({catering:e.value.catering.map(s=>({...s,event:{date:e.value.all_day?Ei(e.getRawValue().date):e.getRawValue().date,duration:e.value.all_day?1440:e.value.duration}}))},{emitEvent:!1})};return e.valueChanges.subscribe(s=>{e.getRawValue().date<Date.now()&&e.value.id?e.get("date")?.disable({emitEvent:!1}):e.get("date")?.enable({emitEvent:!1}),(s.date||s.duration||s.all_day)&&i()}),e.controls.duration.valueChanges.subscribe(s=>{e.patchValue({date_end:md(fi(e.getRawValue().date,s),{nearestTo:5,roundingMethod:"ceil"}).valueOf()},{emitEvent:!1}),i()}),e.controls.date_end.valueChanges.subscribe(s=>{s<fi(e.getRawValue().date,30).valueOf()?e.patchValue({date_end:md(fi(e.getRawValue().date,30),{nearestTo:5,roundingMethod:"ceil"}).valueOf(),duration:30},{emitEvent:!1}):e.patchValue({duration:If(s,e.getRawValue().date)},{emitEvent:!1}),i()}),e.controls.date.valueChanges.subscribe(s=>{e.patchValue({date_end:md(fi(s,e.value.duration),{nearestTo:5,roundingMethod:"ceil"}).valueOf()},{emitEvent:!1}),s<Date.now()&&!e.value.id&&e.patchValue({date:md(Date.now(),{nearestTo:5,roundingMethod:"ceil"}).valueOf()},{emitEvent:!1}),"custom_display"!==e.value.recurrence?._pattern&&"none"!==e.value.recurrence?._pattern&&e.patchValue({recurrence:{...e.value.recurrence,days_of_week:[new Date(s).getDay()]}}),i()}),e.controls.catering.valueChanges.subscribe(s=>{(e.getRawValue().catering||[])?.length&&(n?.get("app.events.catering_notes_required")||n.value("require_catering_notes"))?(e.get("catering_notes")?.setValidators([Zr.required]),e.get("catering_notes").patchValue(e.value.catering_notes)):(e.get("catering_notes")?.clearValidators(),e.get("catering_notes").setErrors(null)),e.updateValueAndValidity()}),e.get("catering_charge_code").setValidators([d6t(e.get("catering"))]),t.id&&(e.get("host").disable(),e.get("organiser").disable()),"started"===t.state&&e.get("date").disable(),e}(void 0,this._settings),this._date=new at(Date.now()),this._event=new at(null),this._loading=new at(""),this._changed=new at(0),this.last_success=new Ta(JSON.parse(sessionStorage.getItem("PLACEOS.last_booked_event")||"{}")),this.loading=this._loading.asObservable(),this.options=this._options.asObservable(),this.booking_rules=this._org.building_list.pipe(Kt(c=>Promise.all(c.map(u=>co(u.id,"room_booking_rules").toPromise()))),me(c=>{const u={};for(const d of c)u[d.id]=d.details instanceof Array?d.details:[];return u}),zn(1)),this.spaces=Vt([this._options.pipe(cP("zone_ids")),this._org.active_region.pipe(Zt(c=>!!c),cP("id")),this._org.active_building.pipe(Zt(c=>!!c),cP("id"))]).pipe(_s(300),gi(c=>this.unsubWith("bind:")),Kt(([{zone_ids:c}])=>{this._loading.next("Loading space list for location...");const u=this._settings.get("app.use_region");return c?.length||(c=[(u?this._org.region?.id:this._org.building?.id)||this._org.building?.id]),$m(c.map(d=>function Jfe(t){return t?(IR[t]||(IR[t]=tT({zone_id:t,limit:500}).pipe(me(n=>(n.data||[]).map(e=>new Ul(e))),gi(n=>Jpe(n)),zn(1))),IR[t]):Ge([])}(d).pipe(Xi(()=>Ge([])))))}),me(c=>Mo(c)),gi(c=>this._loading.next("")),zn(1)),this.features=this.spaces.pipe(me(c=>Ss(Mo(c.map(u=>u.features))))),this.filtered_spaces=Vt([this.spaces,this.options]).pipe(me(([c,{show_fav:u,features:d,capacity:h}])=>c.filter(p=>{const f=(Qt()?.email||"@").split("@")[1],g=(this._settings.get("app.events.restrict_spaces")||{})[f],v=this._settings.get("app.events.limit_spaces")||{},y=Object.keys(v),w=p.zones.find(x=>y.includes(x));return p.bookable&&(!g||p.zones.includes(g))&&(!w||v[w]===f)&&(!u||this.favorite_spaces.includes(p.id))&&d.every(x=>p.features.includes(x))&&p.capacity>=Math.max(0,h||0)}).slice(0,Math.min(100,c.length))),zn(1)),this._space_bookings=Vt([this.spaces,this.filtered_spaces]).pipe(Tb(([c],[u])=>c!==u),Kt(([c,u])=>Vt((u||[]).map(d=>{const h=Qr(d.id,"Bookings").binding("bookings"),p=h.listen().pipe(me(f=>(f||[]).map(g=>new Ta(g))));return this.hasSubscription(`bind:${d.id}`)||this.subscription(`bind:${d.id}`,h.bind()),p}))),zn(1)),this.current_available_spaces=Vt([this.filtered_spaces,this._space_bookings,this.booking_rules,sr(this.form.valueChanges,$N(1e3)),this._changed]).pipe(_s(300),me(([c,u,d])=>{this._loading.next("Updating available spaces...");let{ical_uid:h,date:p,duration:f,all_day:g}=this._form.getRawValue();return((c=l7(c,{date:p,duration:f,resource:null,host:Qt()},d[this._org.building?.id]||[]))||[]).filter((v,y)=>{const w=g?Ei(p).valueOf():p,x=w+6e4*(g?Math.max(1440,f):f);let T=u[y]||[];return this.last_success?.system?.id===v.id&&(T=[...T,this.last_success]),function cBt(t,n,e,i=29){const s=function VSe(t,n=29){let e=new Date(0);const i=[];t.sort((r,o)=>r.date-o.date);for(const r of t){const o=new Date(fi(r.date,-r.extension_data?.setup_time||0)),a=fi(r.date,r.duration+(r.extension_data?.breakdown_time||0));nh(r.date,e)?(Math.abs(If(o,e))>=n&&i.push({start:e.valueOf(),end:r.date}),e=a):sBt(e,r.date)&&(e=a)}const s=e.valueOf();return i.push({start:s,end:10*(s||Date.now())}),i}(e,i);for(const r of s)if(t>=r.start&&t<r.end&&n>r.start&&n<=r.end)return!0;return!1}(w,x,T.filter(k=>k.ical_uid!==h))}).sort((v,y)=>v.capacity-y.capacity)}),gi(c=>this._loading.next("")),zn(1)),this.future_available_spaces=Vt([this.filtered_spaces,this.booking_rules,this.form.valueChanges.pipe(_s(400),Uo({}))]).pipe(Zt(()=>!this._loading.getValue()),_s(500),Kt(([c,u])=>{if(!c.length)return Ge([]);this._loading.next("Retrieving available spaces...");let{date:d,duration:h,all_day:p}=this._form.getRawValue();return(this.has_calendar?QSe:WSe)((c=l7(c,{date:d,duration:h,resource:null,host:Qt()},u[this._org.building?.id]||[])).map(({id:g})=>g),p?Ei(d).valueOf():d,p?Math.max(1440,h):h,this?.event?.resources[0]?.id||this.event?.system?.id||this.event?.id||void 0,void 0,[this.event?.date,this.event?.duration]).pipe(me(g=>{var v=c.filter((y,w)=>g[w]);return l7(v,{date:d,duration:h,resource:null,host:Qt()},u[this._org.building?.id]||[])}),Xi(g=>[]))}),gi(c=>this._loading.next("")),zn(1)),this.available_spaces=this._date.pipe(Kt(c=>{const u=Math.abs(function zBt(t,n){const e=Tn(t),i=Tn(n),s=jSe(e,i),r=Math.abs(Wde(e,i));e.setDate(e.getDate()-s*r);const a=s*(r-+(jSe(e,i)===-s));return 0===a?0:a}(c,Date.now()));return u<(this._settings.get("app.events.cache_duration_in_days")||14)?this.current_available_spaces:this.future_available_spaces}),zn(1)),this.cancelPostForm=()=>this.unsub("post-event-form"),this._space_pipe=new Uu(this._org),this.subscription("router.events",this._router.events.subscribe(c=>{c instanceof Bu&&!j6t.some(u=>c.url.includes(u))&&this.clearForm()}));const l={};this.subscription("form_change",this._form.valueChanges.subscribe(({date:c,duration:u})=>{(c&&c!==l.date||u&&u!==l.duration)&&(this._assets.setOptions({date:this.form.value.date,duration:this.form.value.duration}),l.date=c,l.duration=u),c&&c!==this._date.getValue()&&this._date.next(c),this.storeForm()}))}listenForStatusChanges(){this.subscription("status:rooms",this.available_spaces.subscribe())}setView(e){this.timeout("set_view",()=>this._view.next(e),50)}setOptions(e){this._options.next({...this._options.getValue(),...e})}newForm(e=new Ta({all_day:this._settings.get("app.events.all_day_default")})){var i=this;return z(function*(){if(i._event.next(e),e.recurring_event_id){const s=yield XSe(e.recurring_event_id).toPromise().catch(r=>null);s&&(i._event.getValue().recurrence={...s.recurrence,_pattern:s.recurrence.pattern})}i._assets.setOptions({ignore:Mo(e.linked_bookings?.map(s=>s.asset_ids||[s.asset_id])||[])});for(const s in e.resources){const r=e.resources[s];e.resources[s]=yield i._space_pipe.transform(r.id||r.email)}i._date.next(e.date),i.timeout("post-event-form",()=>{i._form.patchValue({date:e.date||i._form.value.date})},1e3),i.resetForm()})()}resetForm(){this._form.reset();const e=this._event.getValue()||{extension_data:{}};this._assets.setOptions({ignore:Mo(e.linked_bookings?.map(s=>s.asset_ids||[s.asset_id])||[])});const i=!!e.extension_data.catering[0];this._form.patchValue({...e.extension_data,...e,duration:e.duration>=720?30:e.duration,organiser:e?.organiser||Qt()||new Wo({email:e?.host}),catering_charge_code:e.extension_data.catering[0]?.charge_code||(e.id&&i?" ":""),assets:(e.extension_data.assets||[]).map(s=>new _d({...s,event:e}))}),this._form.patchValue({date:e.date||this._form.value.date,date_end:e.date_end||this._form.value.date_end}),this._options.next({features:[]}),this.storeForm()}clearForm(){sessionStorage.removeItem("PLACEOS.event_form"),this.unsubWith("status:"),this.unsubWith("bind:"),this.newForm()}storeForm(){sessionStorage.setItem("PLACEOS.event_form",JSON.stringify(this._form.getRawValue()||{}))}loadForm(){if(!sessionStorage.getItem("PLACEOS.event_form"))return this.newForm();const e=JSON.parse(sessionStorage.getItem("PLACEOS.event_form")||"{}");e.id&&e.id!==this._event.getValue()?.id&&XSe(e.id).subscribe(i=>{this._event.next(i),this._assets.setOptions({ignore:Mo(i.linked_bookings?.map(s=>s.asset_ids||[s.asset_id])||[])})}),this._form.patchValue({...e})}openEventLinkModal(e=!1){const i=this._form;if(i.markAllAsTouched(),!i.valid&&!e)return;const s=new Ta({...i.getRawValue(),assets:[]});this._dialog.open(rxe,{data:s}).afterClosed().subscribe(o=>o?this._router.navigate(["/"]):"")}postForm(e=!1,i=[],s=!1){var r=this;return new Promise(function(){var o=z(function*(a,l){r._loading.next("Creating event...");const c=r._form;c.markAllAsTouched();const u=r.event||new Ta;if(!c.valid&&!e)return r._loading.next(""),l(`Some form fields are invalid. [${dT(c).join(", ")}]`);const d=r.event?.ical_uid;let h=r._form.getRawValue(),{id:p,host:f,date:g,duration:v,creator:y,all_day:w,assets:x,recurrence:T}=h,k=c.get("resources")?.value||[];i.length&&(k=k.filter(fe=>!i.includes(fe.email)&&!i.includes(fe.id)));let R=c.get("catering")?.value||[];T?._pattern&&"none"!==T?._pattern&&(r.form.patchValue({recurring:!0}),h=r._form.getRawValue());let N=!1,D=k.some(fe=>!u.resources?.find(Te=>Te.id===fe.id));(!p||g!==u.date||v!==u.duration)&&k.length&&(N=!0,yield r.checkSelectedSpacesAreAvailable(k,w?Ei(g).valueOf():g,w?Math.max(1440,v):v,d||p||"").catch(fe=>{throw r._loading.next(""),l(fe),fe})),k=c.get("resources")?.value||[];const F=f===Qt()?.email||y===Qt()?.email;if(!k.length&&r._settings.get("app.events.no_space_resource")){const fe=yield r._space_pipe.transform(r._settings.get("app.events.no_space_resource"));k.push(fe)}const $=Ss([...h.attendees,h.organiser||Qt()],"email");if(!k.length&&$.find(fe=>fe.is_external)){r._loading.next("");const fe="External attendees require a space to be booked";throw l(fe),fe}const j=k[0]?.id,Q=p?{system_id:r.event?.resources[0]?.id||r.event?.system?.id||j}:{};if(F&&!s&&(Q.calendar=f||y),r._payments.payment_module&&k.length){const fe=yield r._payments.makePayment({type:"space",resource_name:k[0].display_name||k[0].name,date:g,duration:v,all_day:w});if(!fe?.success)return r._loading.next("");h.extension_data={invoice:fe,invoice_id:fe.invoice_id}}const Y=h.date;for(const fe of R)fe.notes=h.catering_notes,fe.charge_code=h.catering_charge_code;if(k.length){let[fe,Te]=[0,0];for(const et of k){const We=r._settings.get(`app.events.overflow.${et.id}`);We?.setup&&(fe=Math.max(fe,We.setup)),We?.breakdown&&(Te=Math.max(Te,We.breakdown))}h.setup=h.setup_time||fe,h.breakdown=h.breakdown_time||Te,h.setup_time=h.setup_time||fe,h.breakdown_time=h.breakdown_time||Te}const ce=(x||[]).map(fe=>new _d(fe).toJSON()),Ce=yield r._makeBooking(new Ta({...h,old_system:r.event?.system,host:r._settings.get("app.events.force_host")||(r._settings.get("app.events.room_as_host")?h.resources[0].email:"")||h.host,title:h.title||"Space Booking",attendees:$.map(fe=>{const Te={...fe};return delete Te.visit_expected,Te}),date:Y,catering:R,assets:ce,extension_data:r._settings.get("app.events.force_host")||r._settings.get("app.events.room_as_host")?{host_override:h.host,department:h.organiser?.department||Qt()?.department}:{department:h.organiser?.department||Qt()?.department}}),Q).catch(fe=>{throw l(fe),r._loading.next(""),fe}),Z=(Qt()?.email||"@").split("@")[1],le=$.filter(fe=>fe.is_external&&fe.email!==u.host&&!fe.email.includes(Z)&&fe.visit_expected);let te=!1;const be=function(){var fe=z(function*(Te){if(r.form.value.id){if(te)return void Ti(`Unable to update all asset requests for event.\n${Te}`)}else yield function s6t(t,n={}){const e=Vr(n);return GE(`${Zl}/${encodeURIComponent(t)}${e?"?"+e:""}`,{response_type:"void"})}(Ce.id,k.length?{calendar:r.form.value.host||Qt()?.email,system_id:k[0].id}:{}).toPromise(),console.warn("Couldn't update asset requests",Te),Ti(409===Te?.status?"Some assets are already booked for the selected time":"Unable to book the selected assets.");throw r._loading.next(""),Te});return function(et){return fe.apply(this,arguments)}}();if(le.length&&(yield function ZBt(t,n,e){return dq.apply(this,arguments)}(Ce,"visitor",le).catch(be)),x?.length||u.extension_data.assets?.length){te=!0;const fe=yield function lxe(t,n){return gq.apply(this,arguments)}(Ce,{date:g,duration:v,host:f,all_day:w,location_name:k[0]?.display_name||k[0]?.name||"",location_id:k[0]?.id||"",zones:Ss([r._org.organisation.id,r._org.region?.id,r._org.building?.id,...k[0]?.zones]).filter(Te=>!!Te),reset_state:N},x,D||N).catch(be);if(!fe)throw"Unable to validate asset requests";yield fe(),te=!1}r.clearForm(),r.last_success=Ce,sessionStorage.setItem("PLACEOS.last_booked_event",JSON.stringify(Ce)),r.setView("success"),r.timeout("post_finshed",()=>r._changed.next(Date.now())),a(Ce),r._loading.next("")});return function(a,l){return o.apply(this,arguments)}}())}_makeBooking(e,i){var s=this;return z(function*(){return s._updateVisitorList(e.attendees),(s.has_calendar?YSe(e,i):((t,n)=>{const e=t.id;delete t.id;const i=n?.instance;return n&&delete n.instance,e?i?function qBt(t,n,e,i="patch"){return("patch"===i?UE:zE)(`${no}/${encodeURIComponent(t)}/instance/${n}`,e).pipe(me(s=>new Va(s)))}(e,t.instance,t):function WBt(t,n,e="patch"){return("patch"===e?UE:zE)(`${no}/${encodeURIComponent(t)}`,n).pipe(me(i=>new Va(i)))}(e,t):cq(t,n)})(function g6t(t){return new Va({id:t.id,user_email:t.host,asset_id:t.system?.id,asset_name:t.system?.display_name||t.system?.name,booking_type:"room",approved:"approved"===t.status,extension_data:{...t}})}({...e.toJSON(),status:s._settings.get("app.bookings.no_approval")?"approved":"tentative"})).pipe(me(r=>function p6t(t){let n=[{id:t.user_id,name:t.user_name,email:t.user_email,organizer:!0}];return"visitor"===t.booking_type&&n.push(new Wo({name:t.asset_name||t.description,email:t.asset_id,checked_in:t.checked_in})),n=n.concat(t.attendees),new Ta({...t,...t.extension_data,attendees:n,id:t.id||t.extension_data.id,host:t.user_email,from_bookings:!0})}(r)))).toPromise()})()}checkSelectedSpacesAreAvailable(e,i,s,r){var o=this;return z(function*(){if(!e?.length)return!0;if(o.has_calendar){if(!(yield QSe(e.map(({id:l})=>l),i,s,o?.event?.resources[0]?.id||o.event?.system?.id||o.event?.id||void 0,0,[o.event?.date,o.event?.duration]).toPromise()).every(l=>l))throw(e.length>1?"The selected space":"Some of the selected spaces")+" is not available at the selected time"}else if(!(yield WSe(e.map(l=>l.id),i,s,r).toPromise()).every(l=>l))throw(e.length>1?"The selected space":"Some of the selected spaces")+" are not available at the selected time";return!0})()}_updateVisitorList(e){const i=e.filter(r=>r.is_external);if(!i?.length)return;const s=this._settings.get("visitor-invitees")||[];this._settings.saveUserSetting("visitor-invitees",Ss([...s.filter(r=>!r.includes(r.email)),...i.map(r=>`${r.email}|${r.name}|${r.organisation}`)]))}static#e=this.\u0275fac=function(i){return new(i||t)(ae(Sn),ae(lo),ae(exe),ae(nn),ae(hxe),ae(Tr))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function W6t(t,n){if(1&t){const e=se();m(0,"space-list",29),P("toggleFav",function(s){return B(e),V(E().toggleFavourite(s))})("onSelect",function(s){return B(e),V(E().displayed=s)}),_()}if(2&t){const e=E();C("active",null==e.displayed?null:e.displayed.id)("selected",e.selected_ids)("favorites",e.favorites)}}function q6t(t,n){if(1&t){const e=se();m(0,"button",30),P("click",function(){return B(e),V(E().displayed=null)}),oe(1,5),_()}}function K6t(t,n){if(1&t){const e=se();m(0,"space-map",31),P("onSelect",function(s){return B(e),V(E().displayed=s)}),_()}if(2&t){const e=E();C("selected",e.selected_ids)("is_displayed",!!e.displayed)("active",null==e.displayed?null:e.displayed.id)}}let vq=(()=>{class t{get selected_ids(){return this.selected.map(e=>e.id).join(",")}get favorites(){return this._settings.get("favourite_spaces")||[]}constructor(e,i,s,r){this._dialog_ref=e,this._settings=i,this._event_form=s,this._data=r,this.selected=[],this.view="list",this.multiday=!!this._data.multiday,this.selected=[...r.spaces||[]],this._event_form.setOptions(r.options)}isSelected(e){return e&&this.selected_ids.includes(e)}setSelected(e,i){const s=this.selected.filter(r=>r.id!==e.id);i&&s.push(e),this.selected=s,!this._settings.get("app.events.allow_multiple_spaces")&&i&&(this.selected=[e],this._dialog_ref.close([e]))}toggleFavourite(e){const i=this.favorites;i.includes(e.id)?this._settings.saveUserSetting("favourite_spaces",i.filter(r=>r!==e.id)):this._settings.saveUserSetting("favourite_spaces",[...i,e.id])}static#e=this.\u0275fac=function(i){return new(i||t)(I(Xa),I(nn),I(ng),I(or))};static#t=this.\u0275cmp=Se({type:t,selectors:[["new-space-select-modal"]],decls:39,vars:29,consts:()=>{let e,i,s,r,o;return e=$localize`:␟2a8f5812e693119f28847362c97c1924c4b5e2ad␟3245405487284732016:Find Space`,i=$localize`:␟30d3439b0e0095fe69503245f3bd7a2e9498be7c␟8443571736703532556: View List `,s=$localize`:␟18843b85d1a4f17fefafd07bc5cde636dca44295␟819716823718458903:Back to form`,r=$localize`:␟7651117c4dcb18eb274657230a366a428c9a113b␟8164592885301950366: ${"\ufffd0\ufffd"}:INTERPOLATION: room(s) added `,o=$localize`:␟ccda1d41ca79703a85a3a598c1d97e040a32b766␟874721418273731876: Back `,[["map_view",""],e,i,s,r,o,[1,"w-[100vw]","h-[100vh]","sm:relative","sm:w-auto","sm:h-auto","flex","flex-col","bg-base-100"],[1,"flex","items-center","space-x-4","w-full"],["icon","","matRipple","","mat-dialog-close","",1,"bg-base-200"],[1,"hidden","sm:flex","items-center","justify-end","flex-1"],["btn","","matRipple","","map","",1,"rounded-l","rounded-r-none",3,"click"],["btn","","matRipple","","list","",1,"rounded-r","rounded-l-none",3,"click"],[1,"flex-1","flex","items-center","divide-x","divide-base-200","min-h-[65vh]","h-[65vh]","sm:max-h-[65vh]","sm:max-w-[95vw]","w-full","overflow-hidden"],[1,"h-full","hidden","sm:flex","max-w-[20rem]","sm:h-[65vh]","sm:max-h-full",3,"multiday","hide_levels","viewing_map"],[1,"flex","flex-col","items-center","flex-1","w-1/2","h-full","sm:h-[65vh]"],[1,"w-full","border-b","border-base-200",3,"viewChange","view"],["class","flex-1 h-1/2 bg-base-200",3,"active","selected","favorites","toggleFav","onSelect",4,"ngIf","ngIfElse"],[1,"h-full","w-full","sm:h-[65vh]","absolute","sm:relative","flex","sm:flex-col","sm:max-w-[20rem]","z-20","bg-base-100",3,"activeChange","toggleFav","close","space","hide_map","active","fav"],[1,"flex","sm:hidden","flex-col-reverse","items-center","justify-end","px-2","pt-2","pb-[5.5rem]","border-t","border-base-200","w-full"],["btn","","matRipple","","name","spaces-return","class","inverse sm:hidden w-full",3,"click",4,"ngIf"],["btn","","matRipple","","name","save-spaces",1,"w-full","sm:w-32","sm:mb-0",3,"mat-dialog-close"],[1,"hidden","sm:flex","items-center","justify-between","p-2","border-t","border-base-200","w-full"],["btn","","matRipple","","name","spaces-return",1,"clear","text-secondary",3,"mat-dialog-close"],[1,"flex","items-center"],[1,"text-xl"],[1,"mr-1","underline"],[1,"opacity-60","text-sm"],["btn","","matRipple","","name","toggle-space",3,"click","disabled"],[1,"mr-1"],[1,"flex-1","h-1/2","bg-base-200",3,"toggleFav","onSelect","active","selected","favorites"],["btn","","matRipple","","name","spaces-return",1,"inverse","sm:hidden","w-full",3,"click"],[1,"flex-1","h-1/2","w-full",3,"onSelect","selected","is_displayed","active"]]},template:function(i,s){if(1&i){const r=se();m(0,"div",6)(1,"header",7)(2,"button",8)(3,"app-icon"),S(4,"close"),_()(),m(5,"h3"),oe(6,1),_(),m(7,"div",9)(8,"button",10),P("click",function(){return B(r),V(s.view="map")}),S(9," Map "),_(),m(10,"button",11),P("click",function(){return B(r),V(s.view="list")}),S(11," List "),_()()(),m(12,"main",12),q(13,"space-filters",13),m(14,"div",14)(15,"space-filters-display",15),ii("viewChange",function(a){return B(r),jn(s.view,a)||(s.view=a),V(a)}),_(),O(16,W6t,1,3,"space-list",16),_(),m(17,"space-details",17),P("activeChange",function(a){return B(r),V(s.setSelected(s.displayed,a))})("toggleFav",function(){return B(r),V(s.toggleFavourite(s.displayed))})("close",function(){return B(r),V(s.displayed=null)}),_()(),m(18,"footer",18),O(19,q6t,2,0,"button",19),m(20,"button",20),oe(21,2),_()(),m(22,"footer",21)(23,"button",22)(24,"div",23)(25,"app-icon",24),S(26,"arrow_back"),_(),m(27,"div",25),oe(28,3),_()()(),m(29,"p",26),oe(30,4),_(),m(31,"button",27),P("click",function(){return B(r),V(s.setSelected(s.displayed,!s.isSelected(null==s.displayed?null:s.displayed.id)))}),m(32,"div",23)(33,"app-icon",24),S(34),_(),m(35,"div",28),S(36),_()()()()(),O(37,K6t,1,3,"ng-template",null,0,ln)}if(2&i){const r=xt(38);b(8),Oe("inverse","map"!==s.view),b(2),Oe("inverse","list"!==s.view),b(3),C("multiday",s.multiday)("hide_levels","list"!==s.view)("viewing_map","map"===s.view),b(2),ni("view",s.view),b(),C("ngIf","list"===s.view)("ngIfElse",r),b(),Oe("hidden",!s.displayed)("inset-0",s.displayed),C("space",s.displayed)("hide_map","map"===s.view)("active",s.selected_ids.includes(null==s.displayed?null:s.displayed.id))("fav",s.displayed&&s.favorites.includes(null==s.displayed?null:s.displayed.id)),b(2),C("ngIf",s.displayed),b(),Oe("mb-2",s.displayed),C("mat-dialog-close",s.selected),b(3),C("mat-dialog-close",s.selected),b(7),Vn(s.selected.length),Gn(30),b(),Oe("inverse",s.isSelected(null==s.displayed?null:s.displayed.id)),C("disabled",!s.displayed),b(3),Ye(s.isSelected(null==s.displayed?null:s.displayed.id)?"remove":"add"),b(2),K(" ",s.isSelected(null==s.displayed?null:s.displayed.id)?"Remove from Booking":"Add to booking"," ")}}})}return t})();const X6t=()=>({standalone:!0});function Y6t(t,n){1&t&&q(0,"img",30),2&t&&C("source",E().$implicit.images[0])}function Z6t(t,n){1&t&&q(0,"img",31)}function Q6t(t,n){if(1&t){const e=se();m(0,"div",18)(1,"div",19),O(2,Y6t,1,1,"img",20)(3,Z6t,1,0,"ng-template",null,0,ln),_(),m(5,"div",21)(6,"div",22),S(7),_(),m(8,"div",23)(9,"app-icon",24),S(10,"place"),_(),m(11,"p"),S(12),_()(),m(13,"div",23)(14,"app-icon",24),S(15,"people"),_(),m(16,"p"),oe(17,6),_()(),m(18,"div",25)(19,"button",26),P("click",function(){const s=B(e).$implicit;return V(E().changeSpaces(s))}),m(20,"div",27),Pi(21,7),q(22,"app-icon"),$i(),_()(),m(23,"button",28),P("click",function(){const s=B(e).$implicit;return V(E().removeSpace(s))}),m(24,"div",27),Pi(25,8),q(26,"app-icon"),$i(),_()()()(),m(27,"button",29),P("click",function(){const s=B(e).$implicit;return V(E().toggleFavourite(s))}),m(28,"app-icon"),S(29),_()()()}if(2&t){let e;const i=n.$implicit,s=xt(4),r=E();b(2),C("ngIf",null==i.images?null:i.images.length)("ngIfElse",s),b(5),K(" ",i.display_name||i.name||"Meeting Space"," "),b(5),K(" ",i.location||(null==(e=r.level(i.zones))?null:e.display_name)||(null==(e=r.level(i.zones))?null:e.name)," "),b(5),Vn(i.capacity<1?2:i.capacity)(i.capacity),Gn(17),b(10),Oe("text-blue-400",r.favorites.includes(null==i?null:i.id)),b(2),Ye(r.favorites.includes(null==i?null:i.id)?"favorite":"favorite_border")}}const J6t=[];let pxe=(()=>{class t{get favorites(){return this._settings.get("favourite_spaces")||J6t}constructor(e,i,s){this._settings=e,this._org=i,this._dialog=s,this.multiday=!1,this.room_size=4,this.spaces=new at([]),this.space_list=this.spaces.pipe(_s(300)),this.disabled=!1,this.registerOnChange=r=>this._onChange=r,this.registerOnTouched=r=>this._onTouch=r,this.setDisabledState=r=>this.disabled=r}ngOnDestroy(){this._dialog_ref&&this._dialog_ref.close()}level(e){return this._org.levelWithID(e)}changeSpaces(){this._dialog_ref=this._dialog.open(vq,{data:{spaces:this.spaces.getValue(),options:{capacity:this.room_size},multiday:this.multiday}}),this._dialog_ref.afterClosed().subscribe(()=>{this.setValue(this._dialog_ref?.componentInstance?.selected),this._dialog_ref=void 0})}removeSpace(e){this.setValue(this.spaces.getValue().filter(i=>i.id!==e.id))}setValue(e){this.spaces.next(e||[]),this._onChange&&this._onChange(e||[])}writeValue(e){this.spaces.next(e||[])}toggleFavourite(e){if(!e?.id)return;const i=this.favorites;i.includes(e.id)?this._settings.saveUserSetting("favourite_spaces",i.filter(r=>r!==e.id)):this._settings.saveUserSetting("favourite_spaces",[...i,e.id])}static#e=this.\u0275fac=function(i){return new(i||t)(I(nn),I(Sn),I(Tr))};static#t=this.\u0275cmp=Se({type:t,selectors:[["space-list-field"]],inputs:{multiday:"multiday"},features:[bt([{provide:Ki,useExisting:wn(()=>t),multi:!0}])],decls:23,vars:9,consts:()=>{let e,i,s,r,o,a,l,c,u;return e=$localize`:␟1b75f93ee5764eaf4e3e5b35f9142aa730286aba␟2378084019110582405:Select Room Size${"\ufffd#5\ufffd"}:START_TAG_SPAN:*${"\ufffd/#5\ufffd"}:CLOSE_TAG_SPAN:`,i=$localize`:␟9a4b4695fcd5f591ff27d32d69654210c1edbce8␟5941148565596549711: Min. 2 People `,s=$localize`:␟c08792b3fa94dc973ac18033a872580a83beded9␟5844713600133557099: Min. 4 People `,r=$localize`:␟94d037a05d336158339e193309f967a769878040␟694015482067564775: Min. 10 People `,o=$localize`:␟2a4f48e169dc20ba9ed88d3bfe38f47ecc9204e6␟4961016996305563664:Add Space`,a=$localize`:␟ed210c8c0f2511082633f06a2c94b8410f6cd9bf␟426413428618668868:{VAR_PLURAL, plural, =1 {Person } other {People
                            }}`,a=nb(a,{VAR_PLURAL:"\ufffd1\ufffd"}),l=$localize`:␟ddc17cbb67fd49c13c14733c877b09fb9bd86d87␟686822217414553756: ${"\ufffd0\ufffd"}:INTERPOLATION: ${a}:ICU: `,c=$localize`:␟ca9092fdbbb85e5828de77fdf85c49b918cec128␟559636443235347532:${"\ufffd#22\ufffd"}:START_TAG_APP_ICON:edit${"\ufffd/#22\ufffd"}:CLOSE_TAG_APP_ICON: Change `,u=$localize`:␟a386ba350cdee69beeb12a908d96f0724ddc2054␟2582674642057285571:${"\ufffd#26\ufffd"}:START_TAG_APP_ICON:close${"\ufffd/#26\ufffd"}:CLOSE_TAG_APP_ICON: Remove `,[["placeholder",""],e,i,s,r,o,l,c,u,[1,"flex","items-center","flex-wrap","sm:space-x-2","mb-2"],[1,"flex-1","min-w-[256px]","space-y-2"],[1,"flex","items-center"],["aria-label","Select Room Size",1,"space-x-4",3,"ngModelChange","ngModel","ngModelOptions"],[3,"value"],["list","",1,"space-y-2"],["space","","class","relative p-2 rounded-lg w-full flex items-center shadow border border-base-200",4,"ngFor","ngForOf"],["btn","","matRipple","","name","add-space",1,"w-full","inverse","mt-2",3,"click"],[1,"flex","items-center","justify-center","space-x-2"],["space","",1,"relative","p-2","rounded-lg","w-full","flex","items-center","shadow","border","border-base-200"],[1,"w-24","h-24","rounded-xl","bg-base-200","mr-4","overflow-hidden","flex","items-center","justify-center"],["auth","","class","min-h-full object-cover",3,"source",4,"ngIf","ngIfElse"],[1,"sm:space-y-2","pb-4"],[1,"font-medium"],[1,"flex","items-center","text-sm","space-x-2"],[1,"text-blue-500"],[1,"absolute","bottom-0","right-0","flex","items-center","justify-end","text-xs"],["btn","","matRipple","","name","edit-space",1,"clear",3,"click"],[1,"flex","items-center","space-x-2"],["btn","","matRipple","","name","remove-space",1,"clear",3,"click"],["icon","","matRipple","","name","toggle-space-favourite",1,"absolute","top-1","right-1",3,"click"],["auth","",1,"min-h-full","object-cover",3,"source"],["src","assets/icons/room-placeholder.svg",1,"m-auto"]]},template:function(i,s){1&i&&(m(0,"div")(1,"div",9)(2,"div",10)(3,"label"),Pi(4,1),q(5,"span"),$i(),_(),m(6,"div",11)(7,"mat-radio-group",12),ii("ngModelChange",function(o){return jn(s.room_size,o)||(s.room_size=o),o}),m(8,"mat-radio-button",13),oe(9,2),_(),m(10,"mat-radio-button",13),oe(11,3),_(),m(12,"mat-radio-button",13),oe(13,4),_()()()()()(),m(14,"div",14),O(15,Q6t,30,9,"div",15),H(16,"async"),_(),m(17,"button",16),P("click",function(){return s.changeSpaces()}),m(18,"div",17)(19,"app-icon"),S(20,"search"),_(),m(21,"span"),oe(22,5),_()()()),2&i&&(b(7),ni("ngModel",s.room_size),C("ngModelOptions",tn(8,X6t)),b(),C("value",1),b(2),C("value",4),b(2),C("value",10),b(3),C("ngForOf",ne(16,6,s.space_list)))}})}return t})();const J2=function nVt(t,n){return t===n||t!=t&&n!=n},pP=function iVt(t,n){for(var e=t.length;e--;)if(J2(t[e][0],n))return e;return-1};var rVt=Array.prototype.splice;function TC(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}TC.prototype.clear=function eVt(){this.__data__=[],this.size=0},TC.prototype.delete=function oVt(t){var n=this.__data__,e=pP(n,t);return!(e<0||(e==n.length-1?n.pop():rVt.call(n,e,1),--this.size,0))},TC.prototype.get=function lVt(t){var n=this.__data__,e=pP(n,t);return e<0?void 0:n[e][1]},TC.prototype.has=function uVt(t){return pP(this.__data__,t)>-1},TC.prototype.set=function hVt(t,n){var e=this.__data__,i=pP(e,t);return i<0?(++this.size,e.push([t,n])):e[i][1]=n,this};const fP=TC,fxe="object"==typeof global&&global&&global.Object===Object&&global;var SVt="object"==typeof self&&self&&self.Object===Object&&self;const Np=fxe||SVt||Function("return this")(),ig=Np.Symbol;var mxe=Object.prototype,TVt=mxe.hasOwnProperty,IVt=mxe.toString,ek=ig?ig.toStringTag:void 0;var MVt=Object.prototype.toString;var _xe=ig?ig.toStringTag:void 0;const IC=function LVt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":_xe&&_xe in Object(t)?function kVt(t){var n=TVt.call(t,ek),e=t[ek];try{t[ek]=void 0;var i=!0}catch{}var s=IVt.call(t);return i&&(n?t[ek]=e:delete t[ek]),s}(t):function NVt(t){return MVt.call(t)}(t)},sg=function PVt(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)},yq=function UVt(t){if(!sg(t))return!1;var n=IC(t);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n},wq=Np["__core-js_shared__"];var gxe=function(){var t=/[^.]+$/.exec(wq&&wq.keys&&wq.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var qVt=Function.prototype.toString;const ry=function KVt(t){if(null!=t){try{return qVt.call(t)}catch{}try{return t+""}catch{}}return""};var YVt=/^\[object .+?Constructor\]$/,tzt=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const izt=function nzt(t){return!(!sg(t)||function jVt(t){return!!gxe&&gxe in t}(t))&&(yq(t)?tzt:YVt).test(ry(t))},oy=function ozt(t,n){var e=function szt(t,n){return t?.[n]}(t,n);return izt(e)?e:void 0},tk=oy(Np,"Map"),nk=oy(Object,"create");var mzt=Object.prototype.hasOwnProperty;var vzt=Object.prototype.hasOwnProperty;function kC(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}kC.prototype.clear=function czt(){this.__data__=nk?nk(null):{},this.size=0},kC.prototype.delete=function dzt(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n},kC.prototype.get=function _zt(t){var n=this.__data__;if(nk){var e=n[t];return"__lodash_hash_undefined__"===e?void 0:e}return mzt.call(n,t)?n[t]:void 0},kC.prototype.has=function yzt(t){var n=this.__data__;return nk?void 0!==n[t]:vzt.call(n,t)},kC.prototype.set=function Szt(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=nk&&void 0===n?"__lodash_hash_undefined__":n,this};const bxe=kC,mP=function Dzt(t,n){var e=t.__data__;return function Izt(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}(n)?e["string"==typeof n?"string":"hash"]:e.map};function DC(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var i=t[n];this.set(i[0],i[1])}}DC.prototype.clear=function Ezt(){this.size=0,this.__data__={hash:new bxe,map:new(tk||fP),string:new bxe}},DC.prototype.delete=function Azt(t){var n=mP(this,t).delete(t);return this.size-=n?1:0,n},DC.prototype.get=function Nzt(t){return mP(this,t).get(t)},DC.prototype.has=function Rzt(t){return mP(this,t).has(t)},DC.prototype.set=function Lzt(t,n){var e=mP(this,t),i=e.size;return e.set(t,n),this.size+=e.size==i?0:1,this};const vxe=DC;function AC(t){var n=this.__data__=new fP(t);this.size=n.size}AC.prototype.clear=function fVt(){this.__data__=new fP,this.size=0},AC.prototype.delete=function _Vt(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e},AC.prototype.get=function bVt(t){return this.__data__.get(t)},AC.prototype.has=function yVt(t){return this.__data__.has(t)},AC.prototype.set=function Bzt(t,n){var e=this.__data__;if(e instanceof fP){var i=e.__data__;if(!tk||i.length<199)return i.push([t,n]),this.size=++e.size,this;e=this.__data__=new vxe(i)}return e.set(t,n),this.size=e.size,this};const ik=AC;var zzt=function(){try{var t=oy(Object,"defineProperty");return t({},"",{}),t}catch{}}();const _P=zzt,Cq=function Uzt(t,n,e){"__proto__"==n&&_P?_P(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e},Sq=function Gzt(t,n,e){(void 0!==e&&!J2(t[n],e)||void 0===e&&!(n in t))&&Cq(t,n,e)};var Hzt=function jzt(t){return function(n,e,i){for(var s=-1,r=Object(n),o=i(n),a=o.length;a--;){var l=o[t?a:++s];if(!1===e(r[l],l,r))break}return n}}();const Wzt=Hzt;var yxe="object"==typeof exports&&exports&&!exports.nodeType&&exports,wxe=yxe&&"object"==typeof module&&module&&!module.nodeType&&module,Cxe=wxe&&wxe.exports===yxe?Np.Buffer:void 0,Sxe=Cxe?Cxe.allocUnsafe:void 0;const xxe=function Kzt(t,n){if(n)return t.slice();var e=t.length,i=Sxe?Sxe(e):new t.constructor(e);return t.copy(i),i},gP=Np.Uint8Array,xq=function Yzt(t){var n=new t.constructor(t.byteLength);return new gP(n).set(new gP(t)),n},Exe=function Zzt(t,n){var e=n?xq(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)},Txe=function Qzt(t,n){var e=-1,i=t.length;for(n||(n=Array(i));++e<i;)n[e]=t[e];return n};var Ixe=Object.create,Jzt=function(){function t(){}return function(n){if(!sg(n))return{};if(Ixe)return Ixe(n);t.prototype=n;var e=new t;return t.prototype=void 0,e}}();const e7t=Jzt,kxe=function t7t(t,n){return function(e){return t(n(e))}},Eq=kxe(Object.getPrototypeOf,Object);var i7t=Object.prototype;const Tq=function s7t(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||i7t)},Dxe=function r7t(t){return"function"!=typeof t.constructor||Tq(t)?{}:e7t(Eq(t))},Yf=function o7t(t){return null!=t&&"object"==typeof t},Axe=function l7t(t){return Yf(t)&&"[object Arguments]"==IC(t)};var Mxe=Object.prototype,c7t=Mxe.hasOwnProperty,u7t=Mxe.propertyIsEnumerable,d7t=Axe(function(){return arguments}())?Axe:function(t){return Yf(t)&&c7t.call(t,"callee")&&!u7t.call(t,"callee")};const Iq=d7t,ay=Array.isArray,Nxe=function f7t(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},bP=function m7t(t){return null!=t&&Nxe(t.length)&&!yq(t)};var Oxe="object"==typeof exports&&exports&&!exports.nodeType&&exports,Rxe=Oxe&&"object"==typeof module&&module&&!module.nodeType&&module,Fxe=Rxe&&Rxe.exports===Oxe?Np.Buffer:void 0;const sk=(Fxe?Fxe.isBuffer:void 0)||function b7t(){return!1};var Lxe=Function.prototype.toString,T7t=Object.prototype.hasOwnProperty,I7t=Lxe.call(Object);var Pr={};Pr["[object Float32Array]"]=Pr["[object Float64Array]"]=Pr["[object Int8Array]"]=Pr["[object Int16Array]"]=Pr["[object Int32Array]"]=Pr["[object Uint8Array]"]=Pr["[object Uint8ClampedArray]"]=Pr["[object Uint16Array]"]=Pr["[object Uint32Array]"]=!0,Pr["[object Arguments]"]=Pr["[object Array]"]=Pr["[object ArrayBuffer]"]=Pr["[object Boolean]"]=Pr["[object DataView]"]=Pr["[object Date]"]=Pr["[object Error]"]=Pr["[object Function]"]=Pr["[object Map]"]=Pr["[object Number]"]=Pr["[object Object]"]=Pr["[object RegExp]"]=Pr["[object Set]"]=Pr["[object String]"]=Pr["[object WeakMap]"]=!1;const kq=function n9t(t){return function(n){return t(n)}};var Pxe="object"==typeof exports&&exports&&!exports.nodeType&&exports,rk=Pxe&&"object"==typeof module&&module&&!module.nodeType&&module,Dq=rk&&rk.exports===Pxe&&fxe.process;const MC=function(){try{return rk&&rk.require&&rk.require("util").types||Dq&&Dq.binding&&Dq.binding("util")}catch{}}();var $xe=MC&&MC.isTypedArray;const Aq=$xe?kq($xe):function e9t(t){return Yf(t)&&Nxe(t.length)&&!!Pr[IC(t)]},Mq=function o9t(t,n){if(("constructor"!==n||"function"!=typeof t[n])&&"__proto__"!=n)return t[n]};var l9t=Object.prototype.hasOwnProperty;const Bxe=function c9t(t,n,e){var i=t[n];(!l9t.call(t,n)||!J2(i,e)||void 0===e&&!(n in t))&&Cq(t,n,e)},ok=function u9t(t,n,e,i){var s=!e;e||(e={});for(var r=-1,o=n.length;++r<o;){var a=n[r],l=i?i(e[a],t[a],a,e,t):void 0;void 0===l&&(l=t[a]),s?Cq(e,a,l):Bxe(e,a,l)}return e};var f9t=/^(?:0|[1-9]\d*)$/;const Vxe=function m9t(t,n){var e=typeof t;return!!(n=n??9007199254740991)&&("number"==e||"symbol"!=e&&f9t.test(t))&&t>-1&&t%1==0&&t<n};var g9t=Object.prototype.hasOwnProperty;const zxe=function b9t(t,n){var e=ay(t),i=!e&&Iq(t),s=!e&&!i&&sk(t),r=!e&&!i&&!s&&Aq(t),o=e||i||s||r,a=o?function d9t(t,n){for(var e=-1,i=Array(t);++e<t;)i[e]=n(e);return i}(t.length,String):[],l=a.length;for(var c in t)(n||g9t.call(t,c))&&(!o||!("length"==c||s&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Vxe(c,l)))&&a.push(c);return a};var C9t=Object.prototype.hasOwnProperty;const x9t=function S9t(t){if(!sg(t))return function v9t(t){var n=[];if(null!=t)for(var e in Object(t))n.push(e);return n}(t);var n=Tq(t),e=[];for(var i in t)"constructor"==i&&(n||!C9t.call(t,i))||e.push(i);return e},ak=function E9t(t){return bP(t)?zxe(t,!0):x9t(t)},D9t=function k9t(t,n,e,i,s,r,o){var a=Mq(t,e),l=Mq(n,e),c=o.get(l);if(c)Sq(t,e,c);else{var u=r?r(a,l,e+"",t,n,o):void 0,d=void 0===u;if(d){var h=ay(l),p=!h&&sk(l),f=!h&&!p&&Aq(l);u=l,h||p||f?ay(a)?u=a:function _7t(t){return Yf(t)&&bP(t)}(a)?u=Txe(a):p?(d=!1,u=xxe(l,!0)):f?(d=!1,u=Exe(l,!0)):u=[]:function k7t(t){if(!Yf(t)||"[object Object]"!=IC(t))return!1;var n=Eq(t);if(null===n)return!0;var e=T7t.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e instanceof e&&Lxe.call(e)==I7t}(l)||Iq(l)?(u=a,Iq(a)?u=function T9t(t){return ok(t,ak(t))}(a):(!sg(a)||yq(a))&&(u=Dxe(l))):d=!1}d&&(o.set(l,u),s(u,l,i,r,o),o.delete(l)),Sq(t,e,u)}},A9t=function Uxe(t,n,e,i,s){t!==n&&Wzt(n,function(r,o){if(s||(s=new ik),sg(r))D9t(t,n,o,e,Uxe,i,s);else{var a=i?i(Mq(t,o),r,o+"",t,n,s):void 0;void 0===a&&(a=r),Sq(t,o,a)}},ak)},Gxe=function M9t(t){return t};var jxe=Math.max;const P9t=function L9t(t){return function(){return t}};var $9t=_P?function(t,n){return _P(t,"toString",{configurable:!0,enumerable:!1,value:P9t(n),writable:!0})}:Gxe,U9t=Date.now,j9t=function G9t(t){var n=0,e=0;return function(){var i=U9t(),s=16-(i-e);if(e=i,s>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}($9t);const H9t=j9t,q9t=function W9t(t,n){return H9t(function R9t(t,n,e){return n=jxe(void 0===n?t.length-1:n,0),function(){for(var i=arguments,s=-1,r=jxe(i.length-n,0),o=Array(r);++s<r;)o[s]=i[n+s];s=-1;for(var a=Array(n+1);++s<n;)a[s]=i[s];return a[n]=e(o),function N9t(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}(t,this,a)}}(t,n,Gxe),t+"")};var Z9t=function Y9t(t){return q9t(function(n,e){var i=-1,s=e.length,r=s>1?e[s-1]:void 0,o=s>2?e[2]:void 0;for(r=t.length>3&&"function"==typeof r?(s--,r):void 0,o&&function K9t(t,n,e){if(!sg(e))return!1;var i=typeof n;return!!("number"==i?bP(e)&&Vxe(n,e.length):"string"==i&&n in e)&&J2(e[n],t)}(e[0],e[1],o)&&(r=s<3?void 0:r,s=1),n=Object(n);++i<s;){var a=e[i];a&&t(n,a,i,r)}return n})}(function(t,n,e){A9t(t,n,e)});const rg=Z9t;var vn=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(vn||{});class Op{constructor(n,e,i={}){this.attrName=n,this.keyName=e,this.scope=null!=i.scope?i.scope&vn.LEVEL|vn.TYPE&vn.ATTRIBUTE:vn.ATTRIBUTE,null!=i.whitelist&&(this.whitelist=i.whitelist)}static keys(n){return Array.from(n.attributes).map(e=>e.name)}add(n,e){return!!this.canAdd(n,e)&&(n.setAttribute(this.keyName,e),!0)}canAdd(n,e){return null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1)}remove(n){n.removeAttribute(this.keyName)}value(n){const e=n.getAttribute(this.keyName);return this.canAdd(n,e)&&e?e:""}}class NC extends Error{constructor(n){super(n="[Parchment] "+n),this.message=n,this.name=this.constructor.name}}let OC=(()=>{let t=class kX{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,i=!1){if(null==e)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(i){let s=null;try{s=e.parentNode}catch{return null}return this.find(s,i)}return null}create(e,i,s){const r=this.query(i);if(null==r)throw new NC(`Unable to create ${i} blot`);const o=r,a=i instanceof Node||i.nodeType===Node.TEXT_NODE?i:o.create(s),l=new o(e,a,s);return kX.blots.set(l.domNode,l),l}find(e,i=!1){return kX.find(e,i)}query(e,i=vn.ANY){let s;return"string"==typeof e?s=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?s=this.types.text:"number"==typeof e?e&vn.LEVEL&vn.BLOCK?s=this.types.block:e&vn.LEVEL&vn.INLINE&&(s=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(r=>(s=this.classes[r],!!s)),s=s||this.tags[e.tagName]),null==s?null:"scope"in s&&i&vn.LEVEL&s.scope&&i&vn.TYPE&s.scope?s:null}register(...e){return e.map(i=>{const s="blotName"in i,r="attrName"in i;if(!s&&!r)throw new NC("Invalid definition");if(s&&"abstract"===i.blotName)throw new NC("Cannot register abstract class");return this.types[s?i.blotName:r?i.attrName:void 0]=i,r?"string"==typeof i.keyName&&(this.attributes[i.keyName]=i):s&&(i.className&&(this.classes[i.className]=i),i.tagName&&(i.tagName=Array.isArray(i.tagName)?i.tagName.map(a=>a.toUpperCase()):i.tagName.toUpperCase(),(Array.isArray(i.tagName)?i.tagName:[i.tagName]).forEach(a=>{(null==this.tags[a]||null==i.className)&&(this.tags[a]=i)}))),i})}};return t.blots=new WeakMap,t})();function Hxe(t,n){return(t.getAttribute("class")||"").split(/\s+/).filter(e=>0===e.indexOf(`${n}-`))}const mh=class Q9t extends Op{static keys(n){return(n.getAttribute("class")||"").split(/\s+/).map(e=>e.split("-").slice(0,-1).join("-"))}add(n,e){return!!this.canAdd(n,e)&&(this.remove(n),n.classList.add(`${this.keyName}-${e}`),!0)}remove(n){Hxe(n,this.keyName).forEach(e=>{n.classList.remove(e)}),0===n.classList.length&&n.removeAttribute("class")}value(n){const e=(Hxe(n,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(n,e)?e:""}};function Nq(t){const n=t.split("-"),e=n.slice(1).map(i=>i[0].toUpperCase()+i.slice(1)).join("");return n[0]+e}const og=class J9t extends Op{static keys(n){return(n.getAttribute("style")||"").split(";").map(e=>e.split(":")[0].trim())}add(n,e){return!!this.canAdd(n,e)&&(n.style[Nq(this.keyName)]=e,!0)}remove(n){n.style[Nq(this.keyName)]="",n.getAttribute("style")||n.removeAttribute("style")}value(n){const e=n.style[Nq(this.keyName)];return this.canAdd(n,e)?e:""}},vP=class eUt{constructor(n){this.attributes={},this.domNode=n,this.build()}attribute(n,e){e?n.add(this.domNode,e)&&(null!=n.value(this.domNode)?this.attributes[n.attrName]=n:delete this.attributes[n.attrName]):(n.remove(this.domNode),delete this.attributes[n.attrName])}build(){this.attributes={};const n=OC.find(this.domNode);if(null==n)return;const e=Op.keys(this.domNode),i=mh.keys(this.domNode),s=og.keys(this.domNode);e.concat(i).concat(s).forEach(r=>{const o=n.scroll.query(r,vn.ATTRIBUTE);o instanceof Op&&(this.attributes[o.attrName]=o)})}copy(n){Object.keys(this.attributes).forEach(e=>{const i=this.attributes[e].value(this.domNode);n.format(e,i)})}move(n){this.copy(n),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((n,e)=>(n[e]=this.attributes[e].value(this.domNode),n),{})}},Wxe=class{constructor(n,e){this.scroll=n,this.domNode=e,OC.blots.set(e,this),this.prev=null,this.next=null}static create(n){if(null==this.tagName)throw new NC("Blot definition missing tagName");let e,i;return Array.isArray(this.tagName)?("string"==typeof n?(i=n.toUpperCase(),parseInt(i,10).toString()===i&&(i=parseInt(i,10))):"number"==typeof n&&(i=n),e="number"==typeof i?document.createElement(this.tagName[i-1]):i&&this.tagName.indexOf(i)>-1?document.createElement(i):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const n=this.domNode.cloneNode(!1);return this.scroll.create(n)}detach(){null!=this.parent&&this.parent.removeChild(this),OC.blots.delete(this.domNode)}deleteAt(n,e){this.isolate(n,e).remove()}formatAt(n,e,i,s){const r=this.isolate(n,e);if(null!=this.scroll.query(i,vn.BLOT)&&s)r.wrap(i,s);else if(null!=this.scroll.query(i,vn.ATTRIBUTE)){const o=this.scroll.create(this.statics.scope);r.wrap(o),o.format(i,s)}}insertAt(n,e,i){const s=null==i?this.scroll.create("text",e):this.scroll.create(e,i),r=this.split(n);this.parent.insertBefore(s,r||void 0)}isolate(n,e){const i=this.split(n);if(null==i)throw new Error("Attempt to isolate at end");return i.split(e),i}length(){return 1}offset(n=this.parent){return null==this.parent||this===n?0:this.parent.children.offset(this)+this.parent.offset(n)}optimize(n){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(n,e){const i="string"==typeof n?this.scroll.create(n,e):n;return null!=this.parent&&(this.parent.insertBefore(i,this.next||void 0),this.remove()),i}split(n,e){return 0===n?this:this.next}update(n,e){}wrap(n,e){const i="string"==typeof n?this.scroll.create(n,e):n;if(null!=this.parent&&this.parent.insertBefore(i,this.next||void 0),"function"!=typeof i.appendChild)throw new NC(`Cannot wrap ${n}`);return i.appendChild(this),i}};Wxe.blotName="abstract";let qxe=Wxe;const Kxe=class extends qxe{static value(n){return!0}index(n,e){return this.domNode===n||this.domNode.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(n,e){let i=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return n>0&&(i+=1),[this.parent.domNode,i]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Kxe.scope=vn.INLINE_BLOT;const El=Kxe;class tUt{constructor(){this.head=null,this.tail=null,this.length=0}append(...n){if(this.insertBefore(n[0],null),n.length>1){const e=n.slice(1);this.append(...e)}}at(n){const e=this.iterator();let i=e();for(;i&&n>0;)n-=1,i=e();return i}contains(n){const e=this.iterator();let i=e();for(;i;){if(i===n)return!0;i=e()}return!1}indexOf(n){const e=this.iterator();let i=e(),s=0;for(;i;){if(i===n)return s;s+=1,i=e()}return-1}insertBefore(n,e){null!=n&&(this.remove(n),n.next=e,null!=e?(n.prev=e.prev,null!=e.prev&&(e.prev.next=n),e.prev=n,e===this.head&&(this.head=n)):null!=this.tail?(this.tail.next=n,n.prev=this.tail,this.tail=n):(n.prev=null,this.head=this.tail=n),this.length+=1)}offset(n){let e=0,i=this.head;for(;null!=i;){if(i===n)return e;e+=i.length(),i=i.next}return-1}remove(n){this.contains(n)&&(null!=n.prev&&(n.prev.next=n.next),null!=n.next&&(n.next.prev=n.prev),n===this.head&&(this.head=n.next),n===this.tail&&(this.tail=n.prev),this.length-=1)}iterator(n=this.head){return()=>{const e=n;return null!=n&&(n=n.next),e}}find(n,e=!1){const i=this.iterator();let s=i();for(;s;){const r=s.length();if(n<r||e&&n===r&&(null==s.next||0!==s.next.length()))return[s,n];n-=r,s=i()}return[null,0]}forEach(n){const e=this.iterator();let i=e();for(;i;)n(i),i=e()}forEachAt(n,e,i){if(e<=0)return;const[s,r]=this.find(n);let o=n-r;const a=this.iterator(s);let l=a();for(;l&&o<n+e;){const c=l.length();n>o?i(l,n-o,Math.min(e,o+c-n)):i(l,0,Math.min(c,n+e-o)),o+=c,l=a()}}map(n){return this.reduce((e,i)=>(e.push(n(i)),e),[])}reduce(n,e){const i=this.iterator();let s=i();for(;s;)e=n(e,s),s=i();return e}}function Xxe(t,n){const e=n.find(t);if(e)return e;try{return n.create(t)}catch{const i=n.create(vn.INLINE);return Array.from(t.childNodes).forEach(s=>{i.domNode.appendChild(s)}),t.parentNode&&t.parentNode.replaceChild(i.domNode,t),i.attach(),i}}const _h=(()=>{let t=class bg extends qxe{constructor(e,i){super(e,i),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=e,bg.uiClass&&this.uiNode.classList.add(bg.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new tUt,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const i=Xxe(e,this.scroll);this.insertBefore(i,this.children.head||void 0)}catch(i){if(i instanceof NC)return;throw i}})}deleteAt(e,i){if(0===e&&i===this.length())return this.remove();this.children.forEachAt(e,i,(s,r,o)=>{s.deleteAt(r,o)})}descendant(e,i=0){const[s,r]=this.children.find(i);return null==e.blotName&&e(s)||null!=e.blotName&&s instanceof e?[s,r]:s instanceof bg?s.descendant(e,r):[null,-1]}descendants(e,i=0,s=Number.MAX_VALUE){let r=[],o=s;return this.children.forEachAt(i,s,(a,l,c)=>{(null==e.blotName&&e(a)||null!=e.blotName&&a instanceof e)&&r.push(a),a instanceof bg&&(r=r.concat(a.descendants(e,l,o))),o-=c}),r}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(i=>{e||this.statics.allowedChildren.some(s=>i instanceof s)||(i.statics.scope===vn.BLOCK_BLOT?(null!=i.next&&this.splitAfter(i),null!=i.prev&&this.splitAfter(i.prev),i.parent.unwrap(),e=!0):i instanceof bg?i.unwrap():i.remove())})}formatAt(e,i,s,r){this.children.forEachAt(e,i,(o,a,l)=>{o.formatAt(a,l,s,r)})}insertAt(e,i,s){const[r,o]=this.children.find(e);if(r)r.insertAt(o,i,s);else{const a=null==s?this.scroll.create("text",i):this.scroll.create(i,s);this.appendChild(a)}}insertBefore(e,i){null!=e.parent&&e.parent.children.remove(e);let s=null;this.children.insertBefore(e,i||null),e.parent=this,null!=i&&(s=i.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==s)&&this.domNode.insertBefore(e.domNode,s),e.attach()}length(){return this.children.reduce((e,i)=>e+i.length(),0)}moveChildren(e,i){this.children.forEach(s=>{e.insertBefore(s,i)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){const i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i)}else this.remove()}path(e,i=!1){const[s,r]=this.children.find(e,i),o=[[this,e]];return s instanceof bg?o.concat(s.path(r,i)):(null!=s&&o.push([s,r]),o)}removeChild(e){this.children.remove(e)}replaceWith(e,i){const s="string"==typeof e?this.scroll.create(e,i):e;return s instanceof bg&&this.moveChildren(s),super.replaceWith(s)}split(e,i=!1){if(!i){if(0===e)return this;if(e===this.length())return this.next}const s=this.clone();return this.parent&&this.parent.insertBefore(s,this.next||void 0),this.children.forEachAt(e,this.length(),(r,o,a)=>{const l=r.split(o,i);null!=l&&s.appendChild(l)}),s}splitAfter(e){const i=this.clone();for(;null!=e.next;)i.appendChild(e.next);return this.parent&&this.parent.insertBefore(i,this.next||void 0),i}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,i){const s=[],r=[];e.forEach(o=>{o.target===this.domNode&&"childList"===o.type&&(s.push(...o.addedNodes),r.push(...o.removedNodes))}),r.forEach(o=>{if(null!=o.parentNode&&"IFRAME"!==o.tagName&&document.body.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const a=this.scroll.find(o);null!=a&&(null==a.domNode.parentNode||a.domNode.parentNode===this.domNode)&&a.detach()}),s.filter(o=>o.parentNode===this.domNode&&o!==this.uiNode).sort((o,a)=>o===a?0:o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(o=>{let a=null;null!=o.nextSibling&&(a=this.scroll.find(o.nextSibling));const l=Xxe(o,this.scroll);(l.next!==a||null==l.next)&&(null!=l.parent&&l.parent.removeChild(this),this.insertBefore(l,a||void 0))}),this.enforceAllowedChildren()}};return t.uiClass="",t})(),RC=class QC extends _h{static create(n){return super.create(n)}static formats(n,e){const i=e.query(QC.blotName);if(null==i||n.tagName!==i.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return n.tagName.toLowerCase()}}constructor(n,e){super(n,e),this.attributes=new vP(this.domNode)}format(n,e){if(n!==this.statics.blotName||e){const i=this.scroll.query(n,vn.INLINE);if(null==i)return;i instanceof Op?this.attributes.attribute(i,e):e&&(n!==this.statics.blotName||this.formats()[n]!==e)&&this.replaceWith(n,e)}else this.children.forEach(i=>{i instanceof QC||(i=i.wrap(QC.blotName,!0)),this.attributes.copy(i)}),this.unwrap()}formats(){const n=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(n[this.statics.blotName]=e),n}formatAt(n,e,i,s){null!=this.formats()[i]||this.scroll.query(i,vn.ATTRIBUTE)?this.isolate(n,e).format(i,s):super.formatAt(n,e,i,s)}optimize(n){super.optimize(n);const e=this.formats();if(0===Object.keys(e).length)return this.unwrap();const i=this.next;i instanceof QC&&i.prev===this&&function nUt(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const e in t)if(t[e]!==n[e])return!1;return!0}(e,i.formats())&&(i.moveChildren(this),i.remove())}replaceWith(n,e){const i=super.replaceWith(n,e);return this.attributes.copy(i),i}update(n,e){super.update(n,e),n.some(i=>i.target===this.domNode&&"attributes"===i.type)&&this.attributes.build()}wrap(n,e){const i=super.wrap(n,e);return i instanceof QC&&this.attributes.move(i),i}};RC.allowedChildren=[RC,El],RC.blotName="inline",RC.scope=vn.INLINE_BLOT,RC.tagName="SPAN";const Oq=RC,FC=class DX extends _h{static create(n){return super.create(n)}static formats(n,e){const i=e.query(DX.blotName);if(null==i||n.tagName!==i.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return n.tagName.toLowerCase()}}constructor(n,e){super(n,e),this.attributes=new vP(this.domNode)}format(n,e){const i=this.scroll.query(n,vn.BLOCK);null!=i&&(i instanceof Op?this.attributes.attribute(i,e):n!==this.statics.blotName||e?e&&(n!==this.statics.blotName||this.formats()[n]!==e)&&this.replaceWith(n,e):this.replaceWith(DX.blotName))}formats(){const n=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(n[this.statics.blotName]=e),n}formatAt(n,e,i,s){null!=this.scroll.query(i,vn.BLOCK)?this.format(i,s):super.formatAt(n,e,i,s)}insertAt(n,e,i){if(null==i||null!=this.scroll.query(e,vn.INLINE))super.insertAt(n,e,i);else{const s=this.split(n);if(null==s)throw new Error("Attempt to insertAt after block boundaries");{const r=this.scroll.create(e,i);s.parent.insertBefore(r,s)}}}replaceWith(n,e){const i=super.replaceWith(n,e);return this.attributes.copy(i),i}update(n,e){super.update(n,e),n.some(i=>i.target===this.domNode&&"attributes"===i.type)&&this.attributes.build()}};FC.blotName="block",FC.scope=vn.BLOCK_BLOT,FC.tagName="P",FC.allowedChildren=[Oq,FC,El];const lk=FC,Rq=class extends _h{checkMerge(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName}deleteAt(n,e){super.deleteAt(n,e),this.enforceAllowedChildren()}formatAt(n,e,i,s){super.formatAt(n,e,i,s),this.enforceAllowedChildren()}insertAt(n,e,i){super.insertAt(n,e,i),this.enforceAllowedChildren()}optimize(n){super.optimize(n),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Rq.blotName="container",Rq.scope=vn.BLOCK_BLOT;const yP=Rq,yu=class iUt extends El{static formats(n,e){}format(n,e){super.formatAt(0,this.length(),n,e)}formatAt(n,e,i,s){0===n&&e===this.length()?this.format(i,s):super.formatAt(n,e,i,s)}formats(){return this.statics.formats(this.domNode,this.scroll)}},sUt={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},LC=class extends _h{constructor(n,e){super(null,e),this.registry=n,this.scroll=this,this.build(),this.observer=new MutationObserver(i=>{this.update(i)}),this.observer.observe(this.domNode,sUt),this.attach()}create(n,e){return this.registry.create(this,n,e)}find(n,e=!1){const i=this.registry.find(n,e);return i?i.scroll===this?i:e?this.find(i.scroll.domNode.parentNode,!0):null:null}query(n,e=vn.ANY){return this.registry.query(n,e)}register(...n){return this.registry.register(...n)}build(){null!=this.scroll&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(n,e){this.update(),0===n&&e===this.length()?this.children.forEach(i=>{i.remove()}):super.deleteAt(n,e)}formatAt(n,e,i,s){this.update(),super.formatAt(n,e,i,s)}insertAt(n,e,i){this.update(),super.insertAt(n,e,i)}optimize(n=[],e={}){super.optimize(e);const i=e.mutationsMap||new WeakMap;let s=Array.from(this.observer.takeRecords());for(;s.length>0;)n.push(s.pop());const r=(l,c=!0)=>{null==l||l===this||null!=l.domNode.parentNode&&(i.has(l.domNode)||i.set(l.domNode,[]),c&&r(l.parent))},o=l=>{i.has(l.domNode)&&(l instanceof _h&&l.children.forEach(o),i.delete(l.domNode),l.optimize(e))};let a=n;for(let l=0;a.length>0;l+=1){if(l>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(a.forEach(c=>{const u=this.find(c.target,!0);null!=u&&(u.domNode===c.target&&("childList"===c.type?(r(this.find(c.previousSibling,!1)),Array.from(c.addedNodes).forEach(d=>{const h=this.find(d,!1);r(h,!1),h instanceof _h&&h.children.forEach(p=>{r(p,!1)})})):"attributes"===c.type&&r(u.prev)),r(u))}),this.children.forEach(o),a=Array.from(this.observer.takeRecords()),s=a.slice();s.length>0;)n.push(s.pop())}}update(n,e={}){n=n||this.observer.takeRecords();const i=new WeakMap;n.map(s=>{const r=this.find(s.target,!0);return null==r?null:i.has(r.domNode)?(i.get(r.domNode).push(s),null):(i.set(r.domNode,[s]),r)}).forEach(s=>{null!=s&&s!==this&&i.has(s.domNode)&&s.update(i.get(s.domNode)||[],e)}),e.mutationsMap=i,i.has(this.domNode)&&super.update(i.get(this.domNode),e),this.optimize(n,e)}};LC.blotName="scroll",LC.defaultChild=lk,LC.allowedChildren=[lk,yP],LC.scope=vn.BLOCK_BLOT,LC.tagName="DIV";const Fq=LC,Lq=class D2e extends El{static create(n){return document.createTextNode(n)}static value(n){return n.data}constructor(n,e){super(n,e),this.text=this.statics.value(this.domNode)}deleteAt(n,e){this.domNode.data=this.text=this.text.slice(0,n)+this.text.slice(n+e)}index(n,e){return this.domNode===n?e:-1}insertAt(n,e,i){null==i?(this.text=this.text.slice(0,n)+e+this.text.slice(n),this.domNode.data=this.text):super.insertAt(n,e,i)}length(){return this.text.length}optimize(n){super.optimize(n),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof D2e&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(n,e=!1){return[this.domNode,n]}split(n,e=!1){if(!e){if(0===n)return this;if(n===this.length())return this.next}const i=this.scroll.create(this.domNode.splitText(n));return this.parent.insertBefore(i,this.next||void 0),this.text=this.statics.value(this.domNode),i}update(n,e){n.some(i=>"characterData"===i.type&&i.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Lq.blotName="text",Lq.scope=vn.INLINE_BLOT;const wP=Lq;var Yt=ye(577);const cUt=kxe(Object.keys,Object);var dUt=Object.prototype.hasOwnProperty;const Pq=function fUt(t){return bP(t)?zxe(t):function hUt(t){if(!Tq(t))return cUt(t);var n=[];for(var e in Object(t))dUt.call(t,e)&&"constructor"!=e&&n.push(e);return n}(t)},Yxe=function wUt(){return[]};var SUt=Object.prototype.propertyIsEnumerable,Zxe=Object.getOwnPropertySymbols,xUt=Zxe?function(t){return null==t?[]:(t=Object(t),function vUt(t,n){for(var e=-1,i=null==t?0:t.length,s=0,r=[];++e<i;){var o=t[e];n(o,e,t)&&(r[s++]=o)}return r}(Zxe(t),function(n){return SUt.call(t,n)}))}:Yxe;const $q=xUt,Qxe=function IUt(t,n){for(var e=-1,i=n.length,s=t.length;++e<i;)t[s+e]=n[e];return t};var DUt=Object.getOwnPropertySymbols?function(t){for(var n=[];t;)Qxe(n,$q(t)),t=Eq(t);return n}:Yxe;const Jxe=DUt,eEe=function NUt(t,n,e){var i=n(t);return ay(t)?i:Qxe(i,e(t))},Bq=function OUt(t){return eEe(t,Pq,$q)},FUt=function RUt(t){return eEe(t,ak,Jxe)},Vq=oy(Np,"DataView"),zq=oy(Np,"Promise"),Uq=oy(Np,"Set"),Gq=oy(Np,"WeakMap");var tEe="[object Map]",nEe="[object Promise]",iEe="[object Set]",sEe="[object WeakMap]",rEe="[object DataView]",zUt=ry(Vq),UUt=ry(tk),GUt=ry(zq),jUt=ry(Uq),HUt=ry(Gq),ly=IC;(Vq&&ly(new Vq(new ArrayBuffer(1)))!=rEe||tk&&ly(new tk)!=tEe||zq&&ly(zq.resolve())!=nEe||Uq&&ly(new Uq)!=iEe||Gq&&ly(new Gq)!=sEe)&&(ly=function(t){var n=IC(t),e="[object Object]"==n?t.constructor:void 0,i=e?ry(e):"";if(i)switch(i){case zUt:return rEe;case UUt:return tEe;case GUt:return nEe;case jUt:return iEe;case HUt:return sEe}return n});const ck=ly;var qUt=Object.prototype.hasOwnProperty;var QUt=/\w*$/;var oEe=ig?ig.prototype:void 0,aEe=oEe?oEe.valueOf:void 0;const SGt=function CGt(t,n,e){var i=t.constructor;switch(n){case"[object ArrayBuffer]":return xq(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return function YUt(t,n){var e=n?xq(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Exe(t,e);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return function JUt(t){var n=new t.constructor(t.source,QUt.exec(t));return n.lastIndex=t.lastIndex,n}(t);case"[object Symbol]":return function tGt(t){return aEe?Object(aEe.call(t)):{}}(t)}};var lEe=MC&&MC.isMap;const kGt=lEe?kq(lEe):function EGt(t){return Yf(t)&&"[object Map]"==ck(t)};var cEe=MC&&MC.isSet;const OGt=cEe?kq(cEe):function AGt(t){return Yf(t)&&"[object Set]"==ck(t)};var uEe="[object Arguments]",dEe="[object Function]",hEe="[object Object]",Dr={};Dr[uEe]=Dr["[object Array]"]=Dr["[object ArrayBuffer]"]=Dr["[object DataView]"]=Dr["[object Boolean]"]=Dr["[object Date]"]=Dr["[object Float32Array]"]=Dr["[object Float64Array]"]=Dr["[object Int8Array]"]=Dr["[object Int16Array]"]=Dr["[object Int32Array]"]=Dr["[object Map]"]=Dr["[object Number]"]=Dr[hEe]=Dr["[object RegExp]"]=Dr["[object Set]"]=Dr["[object String]"]=Dr["[object Symbol]"]=Dr["[object Uint8Array]"]=Dr["[object Uint8ClampedArray]"]=Dr["[object Uint16Array]"]=Dr["[object Uint32Array]"]=!0,Dr["[object Error]"]=Dr[dEe]=Dr["[object WeakMap]"]=!1;const ojt=function CP(t,n,e,i,s,r){var o,a=1&n,l=2&n,c=4&n;if(e&&(o=s?e(t,i,s,r):e(t)),void 0!==o)return o;if(!sg(t))return t;var u=ay(t);if(u){if(o=function KUt(t){var n=t.length,e=new t.constructor(n);return n&&"string"==typeof t[0]&&qUt.call(t,"index")&&(e.index=t.index,e.input=t.input),e}(t),!a)return Txe(t,o)}else{var d=ck(t),h=d==dEe||"[object GeneratorFunction]"==d;if(sk(t))return xxe(t,a);if(d==hEe||d==uEe||h&&!s){if(o=l||h?{}:Dxe(t),!a)return l?function AUt(t,n){return ok(t,Jxe(t),n)}(t,function gUt(t,n){return t&&ok(n,ak(n),t)}(o,t)):function EUt(t,n){return ok(t,$q(t),n)}(t,function mUt(t,n){return t&&ok(n,Pq(n),t)}(o,t))}else{if(!Dr[d])return s?t:{};o=SGt(t,d,a)}}r||(r=new ik);var p=r.get(t);if(p)return p;r.set(t,o),OGt(t)?t.forEach(function(v){o.add(CP(v,n,e,v,t,r))}):kGt(t)&&t.forEach(function(v,y){o.set(y,CP(v,n,e,y,t,r))});var g=u?void 0:(c?l?FUt:Bq:l?ak:Pq)(t);return function oUt(t,n){for(var e=-1,i=null==t?0:t.length;++e<i&&!1!==n(t[e],e,t););}(g||t,function(v,y){g&&(v=t[y=v]),Bxe(o,y,CP(v,n,e,y,t,r))}),o},PC=function cjt(t){return ojt(t,5)};function SP(t){var n=-1,e=null==t?0:t.length;for(this.__data__=new vxe;++n<e;)this.add(t[n])}SP.prototype.add=SP.prototype.push=function djt(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},SP.prototype.has=function pjt(t){return this.__data__.has(t)};const mjt=SP,gjt=function _jt(t,n){for(var e=-1,i=null==t?0:t.length;++e<i;)if(n(t[e],e,t))return!0;return!1},vjt=function bjt(t,n){return t.has(n)},pEe=function Cjt(t,n,e,i,s,r){var o=1&e,a=t.length,l=n.length;if(a!=l&&!(o&&l>a))return!1;var c=r.get(t),u=r.get(n);if(c&&u)return c==n&&u==t;var d=-1,h=!0,p=2&e?new mjt:void 0;for(r.set(t,n),r.set(n,t);++d<a;){var f=t[d],g=n[d];if(i)var v=o?i(g,f,d,n,t,r):i(f,g,d,t,n,r);if(void 0!==v){if(v)continue;h=!1;break}if(p){if(!gjt(n,function(y,w){if(!vjt(p,w)&&(f===y||s(f,y,e,i,r)))return p.push(w)})){h=!1;break}}else if(f!==g&&!s(f,g,e,i,r)){h=!1;break}}return r.delete(t),r.delete(n),h},xjt=function Sjt(t){var n=-1,e=Array(t.size);return t.forEach(function(i,s){e[++n]=[s,i]}),e},Tjt=function Ejt(t){var n=-1,e=Array(t.size);return t.forEach(function(i){e[++n]=i}),e};var fEe=ig?ig.prototype:void 0,jq=fEe?fEe.valueOf:void 0;var jjt=Object.prototype.hasOwnProperty;var mEe="[object Arguments]",_Ee="[object Array]",xP="[object Object]",gEe=Object.prototype.hasOwnProperty;const Yjt=function Xjt(t,n,e,i,s,r){var o=ay(t),a=ay(n),l=o?_Ee:ck(t),c=a?_Ee:ck(n),u=(l=l==mEe?xP:l)==xP,d=(c=c==mEe?xP:c)==xP,h=l==c;if(h&&sk(t)){if(!sk(n))return!1;o=!0,u=!1}if(h&&!u)return r||(r=new ik),o||Aq(t)?pEe(t,n,e,i,s,r):function Vjt(t,n,e,i,s,r,o){switch(e){case"[object DataView]":if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=n.byteLength||!r(new gP(t),new gP(n)));case"[object Boolean]":case"[object Date]":case"[object Number]":return J2(+t,+n);case"[object Error]":return t.name==n.name&&t.message==n.message;case"[object RegExp]":case"[object String]":return t==n+"";case"[object Map]":var a=xjt;case"[object Set]":if(a||(a=Tjt),t.size!=n.size&&!(1&i))return!1;var c=o.get(t);if(c)return c==n;i|=2,o.set(t,n);var u=pEe(a(t),a(n),i,s,r,o);return o.delete(t),u;case"[object Symbol]":if(jq)return jq.call(t)==jq.call(n)}return!1}(t,n,l,e,i,s,r);if(!(1&e)){var p=u&&gEe.call(t,"__wrapped__"),f=d&&gEe.call(n,"__wrapped__");if(p||f){var g=p?t.value():t,v=f?n.value():n;return r||(r=new ik),s(g,v,e,i,r)}}return!!h&&(r||(r=new ik),function Hjt(t,n,e,i,s,r){var o=1&e,a=Bq(t),l=a.length;if(l!=Bq(n).length&&!o)return!1;for(var d=l;d--;){var h=a[d];if(!(o?h in n:jjt.call(n,h)))return!1}var p=r.get(t),f=r.get(n);if(p&&f)return p==n&&f==t;var g=!0;r.set(t,n),r.set(n,t);for(var v=o;++d<l;){var y=t[h=a[d]],w=n[h];if(i)var x=o?i(w,y,h,n,t,r):i(y,w,h,t,n,r);if(!(void 0===x?y===w||s(y,w,e,i,r):x)){g=!1;break}v||(v="constructor"==h)}if(g&&!v){var T=t.constructor,k=n.constructor;T!=k&&"constructor"in t&&"constructor"in n&&!("function"==typeof T&&T instanceof T&&"function"==typeof k&&k instanceof k)&&(g=!1)}return r.delete(t),r.delete(n),g}(t,n,e,i,s,r))},Zjt=function bEe(t,n,e,i,s){return t===n||(null==t||null==n||!Yf(t)&&!Yf(n)?t!=t&&n!=n:Yjt(t,n,e,i,bEe,s))},Hq=function Qjt(t,n){return Zjt(t,n)},Zf=(()=>{class t extends yu{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}return t.blotName="break",t.tagName="BR",t})();class gh extends wP{}function EP(t){return t.replace(/[&<>"']/g,n=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[n]))}const ag=(()=>{class t extends Oq{static allowedChildren=[t,Zf,yu,gh];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,i){const s=t.order.indexOf(e),r=t.order.indexOf(i);return s>=0||r>=0?s-r:e===i?0:e<i?-1:1}formatAt(e,i,s,r){if(t.compare(this.statics.blotName,s)<0&&this.scroll.query(s,vn.BLOT)){const o=this.isolate(e,i);r&&o.wrap(s,r)}else super.formatAt(e,i,s,r)}optimize(e){if(super.optimize(e),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){const i=this.parent.isolate(this.offset(),this.length());this.moveChildren(i),i.wrap(this)}}}return t})();let wu=(()=>{class t extends lk{cache={};delta(){return null==this.cache.delta&&(this.cache.delta=yEe(this)),this.cache.delta}deleteAt(e,i){super.deleteAt(e,i),this.cache={}}formatAt(e,i,s,r){i<=0||(this.scroll.query(s,vn.BLOCK)?e+i===this.length()&&this.format(s,r):super.formatAt(e,Math.min(i,this.length()-e-1),s,r),this.cache={})}insertAt(e,i,s){if(null!=s)return super.insertAt(e,i,s),void(this.cache={});if(0===i.length)return;const r=i.split("\n"),o=r.shift();o.length>0&&(e<this.length()-1||null==this.children.tail?super.insertAt(Math.min(e,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});let a=this;r.reduce((l,c)=>(a=a.split(l,!0),a.insertAt(0,c),c.length),e+o.length)}insertBefore(e,i){const{head:s}=this.children;super.insertBefore(e,i),s instanceof Zf&&s.remove(),this.cache={}}length(){return null==this.cache.length&&(this.cache.length=super.length()+1),this.cache.length}moveChildren(e,i){super.moveChildren(e,i),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(i&&(0===e||e>=this.length()-1)){const r=this.clone();return 0===e?(this.parent.insertBefore(r,this),this):(this.parent.insertBefore(r,this.next),r)}const s=super.split(e,i);return this.cache={},s}}return t.blotName="block",t.tagName="P",t.defaultChild=Zf,t.allowedChildren=[Zf,ag,yu,gh],t})();class bd extends yu{attach(){super.attach(),this.attributes=new vP(this.domNode)}delta(){return(new Yt).insert(this.value(),{...this.formats(),...this.attributes.values()})}format(n,e){const i=this.scroll.query(n,vn.BLOCK_ATTRIBUTE);null!=i&&this.attributes.attribute(i,e)}formatAt(n,e,i,s){this.format(i,s)}insertAt(n,e,i){if(null!=i)return void super.insertAt(n,e,i);const s=e.split("\n"),r=s.pop(),o=s.map(l=>{const c=this.scroll.create(wu.blotName);return c.insertAt(0,l),c}),a=this.split(n);o.forEach(l=>{this.parent.insertBefore(l,a)}),r&&this.parent.insertBefore(this.scroll.create("text",r),a)}}function yEe(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.descendants(El).reduce((e,i)=>0===i.length()?e:e.insert(i.value(),vd(i,{},n)),new Yt).insert("\n",vd(t))}function vd(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null==t||("formats"in t&&"function"==typeof t.formats&&(n={...n,...t.formats()},e&&delete n["code-token"]),null==t.parent||"scroll"===t.parent.statics.blotName||t.parent.statics.scope!==t.statics.scope)?n:vd(t.parent,n,e)}bd.scope=vn.BLOCK_BLOT;const TP=(()=>{class t extends yu{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\ufeff";static value(){}constructor(e,i,s){super(e,i),this.selection=s,this.textNode=document.createTextNode(t.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){null!=this.parent&&this.parent.removeChild(this)}format(e,i){if(0!==this.savedLength)return void super.format(e,i);let s=this,r=0;for(;null!=s&&s.statics.scope!==vn.BLOCK_BLOT;)r+=s.offset(s.parent),s=s.parent;null!=s&&(this.savedLength=t.CONTENTS.length,s.optimize(),s.formatAt(r,t.CONTENTS.length,e,i),this.savedLength=0)}index(e,i){return e===this.textNode?0:super.index(e,i)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||null==this.parent)return null;const e=this.selection.getNativeRange();for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const i=this.prev instanceof gh?this.prev:null,s=i?i.length():0,r=this.next instanceof gh?this.next:null,o=r?r.text:"",{textNode:a}=this,l=a.data.split(t.CONTENTS).join("");let c;if(a.data=t.CONTENTS,i)c=i,(l||r)&&(i.insertAt(i.length(),l+o),r&&r.remove());else if(r)c=r,r.insertAt(0,l);else{const u=document.createTextNode(l);c=this.scroll.create(u),this.parent.insertBefore(c,this)}if(this.remove(),e){const u=(p,f)=>i&&p===i.domNode?f:p===a?s+f-1:r&&p===r.domNode?s+l.length+f:null,d=u(e.start.node,e.start.offset),h=u(e.end.node,e.end.offset);if(null!==d&&null!==h)return{startNode:c.domNode,startOffset:d,endNode:c.domNode,endOffset:h}}return null}update(e,i){if(e.some(s=>"characterData"===s.type&&s.target===this.textNode)){const s=this.restore();s&&(i.range=s)}}optimize(e){super.optimize(e);let{parent:i}=this;for(;i;){if("A"===i.domNode.tagName){this.savedLength=t.CONTENTS.length,i.isolate(this.offset(i),this.length()).unwrap(),this.savedLength=0;break}i=i.parent}}value(){return""}}return t})();var Jjt=ye(280);const Wq=new WeakMap,qq=["error","warn","log","info"];let Kq="warn";function wEe(t){if(Kq&&qq.indexOf(t)<=qq.indexOf(Kq)){for(var n=arguments.length,e=new Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];console[t](...e)}}function Xq(t){return qq.reduce((n,e)=>(n[e]=wEe.bind(console,e,t),n),{})}Xq.level=t=>{Kq=t},wEe.level=Xq.level;const cy=Xq,Yq=cy("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(t=>{document.addEventListener(t,function(){for(var n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];Array.from(document.querySelectorAll(".ql-container")).forEach(s=>{const r=Wq.get(s);r&&r.emitter&&r.emitter.handleDOM(...e)})})});const mn=(()=>class t extends Jjt{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",Yq.error)}emit(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return Yq.log.call(Yq,...i),super.emit(...i)}handleDOM(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];(this.domListeners[e.type]||[]).forEach(o=>{let{node:a,handler:l}=o;(e.target===a||a.contains(e.target))&&l(e,...s)})}listenDOM(e,i,s){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:i,handler:s})}})(),Zq=cy("quill:selection");class uy{constructor(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.index=n,this.length=e}}function Qq(t,n){return t.contains(n)}const tHt=class eHt{constructor(n,e){this.emitter=e,this.scroll=n,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new uy(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,mn.sources.USER),1)}),this.emitter.on(mn.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const i=this.getNativeRange();null!=i&&i.start.node!==this.cursor.textNode&&this.emitter.once(mn.events.SCROLL_UPDATE,(s,r)=>{try{this.root.contains(i.start.node)&&this.root.contains(i.end.node)&&this.setNativeRange(i.start.node,i.start.offset,i.end.node,i.end.offset);const o=r.some(a=>"characterData"===a.type||"childList"===a.type||"attributes"===a.type&&a.target===this.root);this.update(o?mn.sources.SILENT:s)}catch{}})}),this.emitter.on(mn.events.SCROLL_OPTIMIZE,(i,s)=>{if(s.range){const{startNode:r,startOffset:o,endNode:a,endOffset:l}=s.range;this.setNativeRange(r,o,a,l),this.update(mn.sources.SILENT)}}),this.update(mn.sources.SILENT)}handleComposition(){this.emitter.on(mn.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(mn.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const n=this.cursor.restore();if(!n)return;setTimeout(()=>{this.setNativeRange(n.startNode,n.startOffset,n.endNode,n.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(mn.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(n,e){this.scroll.update();const i=this.getNativeRange();if(null!=i&&i.native.collapsed&&!this.scroll.query(n,vn.BLOCK)){if(i.start.node!==this.cursor.textNode){const s=this.scroll.find(i.start.node,!1);if(null==s)return;if(s instanceof El){const r=s.split(i.start.offset);s.parent.insertBefore(this.cursor,r)}else s.insertBefore(this.cursor,i.start.node);this.cursor.attach()}this.cursor.format(n,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.scroll.length();n=Math.min(n,i-1),e=Math.min(n+e,i-1)-n;let s,[r,o]=this.scroll.leaf(n);if(null==r)return null;if(e>0&&o===r.length()){const[u]=this.scroll.leaf(n+1);if(u){const[d]=this.scroll.line(n),[h]=this.scroll.line(n+1);d===h&&(r=u,o=0)}}[s,o]=r.position(o,!0);const a=document.createRange();if(e>0)return a.setStart(s,o),[r,o]=this.scroll.leaf(n+e),null==r?null:([s,o]=r.position(o,!0),a.setEnd(s,o),a.getBoundingClientRect());let c,l="left";if(s instanceof Text){if(!s.data.length)return null;o<s.data.length?(a.setStart(s,o),a.setEnd(s,o+1)):(a.setStart(s,o-1),a.setEnd(s,o),l="right"),c=a.getBoundingClientRect()}else{if(!(r.domNode instanceof Element))return null;c=r.domNode.getBoundingClientRect(),o>0&&(l="right")}return{bottom:c.top+c.height,height:c.height,left:c[l],right:c[l],top:c.top,width:0}}getNativeRange(){const n=document.getSelection();if(null==n||n.rangeCount<=0)return null;const e=n.getRangeAt(0);if(null==e)return null;const i=this.normalizeNative(e);return Zq.info("getNativeRange",i),i}getRange(){const n=this.scroll.domNode;if("isConnected"in n&&!n.isConnected)return[null,null];const e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||null!=document.activeElement&&Qq(this.root,document.activeElement)}normalizedToRange(n){const e=[[n.start.node,n.start.offset]];n.native.collapsed||e.push([n.end.node,n.end.offset]);const i=e.map(o=>{const[a,l]=o,c=this.scroll.find(a,!0),u=c.offset(this.scroll);return 0===l?u:c instanceof El?u+c.index(a,l):u+c.length()}),s=Math.min(Math.max(...i),this.scroll.length()-1),r=Math.min(s,...i);return new uy(r,s-r)}normalizeNative(n){if(!Qq(this.root,n.startContainer)||!n.collapsed&&!Qq(this.root,n.endContainer))return null;const e={start:{node:n.startContainer,offset:n.startOffset},end:{node:n.endContainer,offset:n.endOffset},native:n};return[e.start,e.end].forEach(i=>{let{node:s,offset:r}=i;for(;!(s instanceof Text)&&s.childNodes.length>0;)if(s.childNodes.length>r)s=s.childNodes[r],r=0;else{if(s.childNodes.length!==r)break;s=s.lastChild,r=s instanceof Text?s.data.length:s.childNodes.length>0?s.childNodes.length:s.childNodes.length+1}i.node=s,i.offset=r}),e}rangeToNative(n){const e=this.scroll.length(),i=(s,r)=>{s=Math.min(e-1,s);const[o,a]=this.scroll.leaf(s);return o?o.position(a,r):[null,-1]};return[...i(n.index,!1),...i(n.index+n.length,!0)]}setNativeRange(n,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Zq.info("setNativeRange",n,e,i,s),null!=n&&(null==this.root.parentNode||null==n.parentNode||null==i.parentNode))return;const o=document.getSelection();if(null!=o)if(null!=n){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:a}=this.getNativeRange()||{};if(null==a||r||n!==a.startContainer||e!==a.startOffset||i!==a.endContainer||s!==a.endOffset){n instanceof Element&&"BR"===n.tagName&&(e=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode),i instanceof Element&&"BR"===i.tagName&&(s=Array.from(i.parentNode.childNodes).indexOf(i),i=i.parentNode);const l=document.createRange();l.setStart(n,e),l.setEnd(i,s),o.removeAllRanges(),o.addRange(l)}}else o.removeAllRanges(),this.root.blur()}setRange(n){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mn.sources.API;if("string"==typeof e&&(i=e,e=!1),Zq.info("setRange",n),null!=n){const s=this.rangeToNative(n);this.setNativeRange(...s,e)}else this.setNativeRange(null);this.update(i)}update(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn.sources.USER;const e=this.lastRange,[i,s]=this.getRange();if(this.lastRange=i,this.lastNative=s,null!=this.lastRange&&(this.savedRange=this.lastRange),!Hq(e,this.lastRange)){if(!this.composing&&null!=s&&s.native.collapsed&&s.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const r=[mn.events.SELECTION_CHANGE,PC(this.lastRange),PC(e),n];this.emitter.emit(mn.events.EDITOR_CHANGE,...r),n!==mn.sources.SILENT&&this.emitter.emit(...r)}}},nHt=/^[ -~]*$/;function $C(t,n,e){if(0===t.length){const[p]=Jq(e.pop());return n<=0?`</li></${p}>`:`</li></${p}>${$C([],n-1,e)}`}const[{child:i,offset:s,length:r,indent:o,type:a},...l]=t,[c,u]=Jq(a);if(o>n)return e.push(a),o===n+1?`<${c}><li${u}>${uk(i,s,r)}${$C(l,o,e)}`:`<${c}><li>${$C(t,n+1,e)}`;if(o===n&&a===e[e.length-1])return`</li><li${u}>${uk(i,s,r)}${$C(l,o,e)}`;const[h]=Jq(e.pop());return`</li></${h}>${$C(t,n-1,e)}`}function uk(t,n,e){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("html"in t&&"function"==typeof t.html)return t.html(n,e);if(t instanceof gh)return EP(t.value().slice(n,n+e));if(t instanceof _h){if("list-container"===t.statics.blotName){const c=[];return t.children.forEachAt(n,e,(u,d,h)=>{const p="formats"in u&&"function"==typeof u.formats?u.formats():{};c.push({child:u,offset:d,length:h,indent:p.indent||0,type:p.list})}),$C(c,-1,[])}const s=[];if(t.children.forEachAt(n,e,(c,u,d)=>{s.push(uk(c,u,d))}),i||"list"===t.statics.blotName)return s.join("");const{outerHTML:r,innerHTML:o}=t.domNode,[a,l]=r.split(`>${o}<`);return"<table"===a?`<table style="border: 1px solid #000;">${s.join("")}<${l}`:`${a}>${s.join("")}<${l}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function sHt(t,n){return Object.keys(n).reduce((e,i)=>{if(null==t[i])return e;const s=n[i];return e[i]=s===t[i]?s:Array.isArray(s)?s.indexOf(t[i])<0?s.concat([t[i]]):s:[s,t[i]],e},{})}function Jq(t){const n="ordered"===t?"ol":"ul";switch(t){case"checked":return[n,' data-list="checked"'];case"unchecked":return[n,' data-list="unchecked"'];default:return[n,""]}}function CEe(t){return t.reduce((n,e)=>{if("string"==typeof e.insert){const i=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return n.insert(i,e.attributes)}return n.push(e)},new Yt)}function SEe(t,n){let{index:e,length:i}=t;return new uy(e+n,i)}const oHt=class iHt{constructor(n){this.scroll=n,this.delta=this.getDelta()}applyDelta(n){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const i=CEe(n),s=new Yt;return function rHt(t){const n=[];return t.forEach(e=>{"string"==typeof e.insert?e.insert.split("\n").forEach((s,r)=>{r&&n.push({insert:"\n",attributes:e.attributes}),s&&n.push({insert:s,attributes:e.attributes})}):n.push(e)}),n}(i.ops.slice()).reduce((o,a)=>{const l=Yt.Op.length(a);let c=a.attributes||{},u=!1,d=!1;if(null!=a.insert){if(s.retain(l),"string"==typeof a.insert){const f=a.insert;d=!f.endsWith("\n")&&(e<=o||!!this.scroll.descendant(bd,o)[0]),this.scroll.insertAt(o,f);const[g,v]=this.scroll.line(o);let y=rg({},vd(g));if(g instanceof wu){const[w]=g.descendant(El,v);w&&(y=rg(y,vd(w)))}c=Yt.AttributeMap.diff(y,c)||{}}else if("object"==typeof a.insert){const f=Object.keys(a.insert)[0];if(null==f)return o;const g=null!=this.scroll.query(f,vn.INLINE);if(g)(e<=o||this.scroll.descendant(bd,o)[0])&&(d=!0);else if(o>0){const[v,y]=this.scroll.descendant(El,o-1);v instanceof gh?"\n"!==v.value()[y]&&(u=!0):v instanceof yu&&v.statics.scope===vn.INLINE_BLOT&&(u=!0)}if(this.scroll.insertAt(o,f,a.insert[f]),g){const[v]=this.scroll.descendant(El,o);if(v){const y=rg({},vd(v));c=Yt.AttributeMap.diff(y,c)||{}}}}e+=l}else if(s.push(a),null!==a.retain&&"object"==typeof a.retain){const f=Object.keys(a.retain)[0];if(null==f)return o;this.scroll.updateEmbedAt(o,f,a.retain[f])}Object.keys(c).forEach(f=>{this.scroll.formatAt(o,l,f,c[f])});const h=u?1:0,p=d?1:0;return e+=h+p,s.retain(h),s.delete(p),o+l+h+p},0),s.reduce((o,a)=>"number"==typeof a.delete?(this.scroll.deleteAt(o,a.delete),o):o+Yt.Op.length(a),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(i)}deleteText(n,e){return this.scroll.deleteAt(n,e),this.update((new Yt).retain(n).delete(e))}formatLine(n,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scroll.update(),Object.keys(i).forEach(r=>{this.scroll.lines(n,Math.max(e,1)).forEach(o=>{o.format(r,i[r])})}),this.scroll.optimize();const s=(new Yt).retain(n).retain(e,PC(i));return this.update(s)}formatText(n,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.keys(i).forEach(r=>{this.scroll.formatAt(n,e,r,i[r])});const s=(new Yt).retain(n).retain(e,PC(i));return this.update(s)}getContents(n,e){return this.delta.slice(n,n+e)}getDelta(){return this.scroll.lines().reduce((n,e)=>n.concat(e.delta()),new Yt)}getFormat(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=[],s=[];0===e?this.scroll.path(n).forEach(a=>{const[l]=a;l instanceof wu?i.push(l):l instanceof El&&s.push(l)}):(i=this.scroll.lines(n,e),s=this.scroll.descendants(El,n,e));const[r,o]=[i,s].map(a=>{const l=a.shift();if(null==l)return{};let c=vd(l);for(;Object.keys(c).length>0;){const u=a.shift();if(null==u)return c;c=sHt(vd(u),c)}return c});return{...r,...o}}getHTML(n,e){const[i,s]=this.scroll.line(n);if(i){const r=i.length();return i.length()>=s+e&&(0!==s||e!==r)?uk(i,s,e,!0):uk(this.scroll,n,e,!0)}return""}getText(n,e){return this.getContents(n,e).filter(i=>"string"==typeof i.insert).map(i=>i.insert).join("")}insertContents(n,e){const i=CEe(e),s=(new Yt).retain(n).concat(i);return this.scroll.insertContents(n,i),this.update(s)}insertEmbed(n,e,i){return this.scroll.insertAt(n,e,i),this.update((new Yt).retain(n).insert({[e]:i}))}insertText(n,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(n,e),Object.keys(i).forEach(s=>{this.scroll.formatAt(n,e.length,s,i[s])}),this.update((new Yt).retain(n).insert(e,PC(i)))}isBlank(){if(0===this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;const n=this.scroll.children.head;return n?.statics.blotName===wu.blotName&&(!(n.children.length>1)&&n.children.head instanceof Zf)}removeFormat(n,e){const i=this.getText(n,e),[s,r]=this.scroll.line(n+e);let o=0,a=new Yt;null!=s&&(o=s.length()-r,a=s.delta().slice(r,r+o-1).insert("\n"));const c=this.getContents(n,e+o).diff((new Yt).insert(i).concat(a)),u=(new Yt).retain(n).concat(c);return this.applyDelta(u)}update(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const s=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(nHt)&&this.scroll.find(e[0].target)){const r=this.scroll.find(e[0].target),o=vd(r),a=r.offset(this.scroll),l=e[0].oldValue.replace(TP.CONTENTS,""),c=(new Yt).insert(l),u=(new Yt).insert(r.value()),d=i&&{oldRange:SEe(i.oldRange,-a),newRange:SEe(i.newRange,-a)};n=(new Yt).retain(a).concat(c.diff(u,d)).reduce((p,f)=>f.insert?p.insert(f.insert,o):p.push(f),new Yt),this.delta=s.compose(n)}else this.delta=this.getDelta(),(!n||!Hq(s.compose(n),this.delta))&&(n=s.diff(this.delta,i));return n}},Rp=(()=>class t{static DEFAULTS={};constructor(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.quill=e,this.options=i}})(),eK=class aHt extends yu{constructor(n,e){super(n,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(i=>{this.contentNode.appendChild(i)}),this.leftGuard=document.createTextNode("\ufeff"),this.rightGuard=document.createTextNode("\ufeff"),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(n,e){return n===this.leftGuard?0:n===this.rightGuard?1:super.index(n,e)}restore(n){let i,e=null;const s=n.data.split("\ufeff").join("");if(n===this.leftGuard)if(this.prev instanceof gh){const r=this.prev.length();this.prev.insertAt(r,s),e={startNode:this.prev.domNode,startOffset:r+s.length}}else i=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(i),this),e={startNode:i,startOffset:s.length};else n===this.rightGuard&&(this.next instanceof gh?(this.next.insertAt(0,s),e={startNode:this.next.domNode,startOffset:s.length}):(i=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(i),this.next),e={startNode:i,startOffset:s.length}));return n.data="\ufeff",e}update(n,e){n.forEach(i=>{if("characterData"===i.type&&(i.target===this.leftGuard||i.target===this.rightGuard)){const s=this.restore(i.target);s&&(e.range=s)}})}},cHt=class lHt{isComposing=!1;constructor(n,e){this.scroll=n,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",n=>{this.isComposing||this.handleCompositionStart(n)}),this.scroll.domNode.addEventListener("compositionend",n=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(n)})})}handleCompositionStart(n){const e=n.target instanceof Node?this.scroll.find(n.target,!0):null;e&&!(e instanceof eK)&&(this.emitter.emit(mn.events.COMPOSITION_BEFORE_START,n),this.scroll.batchStart(),this.emitter.emit(mn.events.COMPOSITION_START,n),this.isComposing=!0)}handleCompositionEnd(n){this.emitter.emit(mn.events.COMPOSITION_BEFORE_END,n),this.scroll.batchEnd(),this.emitter.emit(mn.events.COMPOSITION_END,n),this.isComposing=!1}},kP=(()=>{class t{static DEFAULTS={modules:{}};static themes={default:t};modules={};constructor(e,i){this.quill=e,this.options=i}init(){Object.keys(this.options.modules).forEach(e=>{null==this.modules[e]&&this.addModule(e)})}addModule(e){const i=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new i(this.quill,this.options.modules[e]||{}),this.modules[e]}}return t})(),uHt=t=>t.parentElement||t.getRootNode().host||null,dHt=t=>{const n=t.getBoundingClientRect(),e="offsetWidth"in t&&Math.abs(n.width)/t.offsetWidth||1,i="offsetHeight"in t&&Math.abs(n.height)/t.offsetHeight||1;return{top:n.top,right:n.left+t.clientWidth*e,bottom:n.top+t.clientHeight*i,left:n.left}},DP=t=>{const n=parseInt(t,10);return Number.isNaN(n)?0:n},xEe=(t,n,e,i,s,r)=>t<e&&n>i?0:t<e?-(e-t+s):n>i?n-t>i-e?t+s-e:n-i+r:0,fHt=["block","break","cursor","inline","scroll","text"],BC=cy("quill"),AP=new OC;_h.uiClass="ql-ui";class st{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:AP,theme:"default"};static events=mn.events;static sources=mn.sources;static version="2.0.2";static imports={delta:Yt,parchment:we,"core/module":Rp,"core/theme":kP};static debug(n){!0===n&&(n="log"),cy.level(n)}static find(n){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Wq.get(n)||AP.find(n,e)}static import(n){return null==this.imports[n]&&BC.error(`Cannot import ${n}. Are you sure it was registered?`),this.imports[n]}static register(){if("string"!=typeof(arguments.length<=0?void 0:arguments[0])){const n=arguments.length<=0?void 0:arguments[0],e=!(arguments.length<=1||!arguments[1]),i="attrName"in n?n.attrName:n.blotName;"string"==typeof i?this.register(`formats/${i}`,n,e):Object.keys(n).forEach(s=>{this.register(s,n[s],e)})}else{const n=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1];null!=this.imports[n]&&!(!(arguments.length<=2)&&arguments[2])&&BC.warn(`Overwriting ${n} with`,e),this.imports[n]=e,(n.startsWith("blots/")||n.startsWith("formats/"))&&e&&"boolean"!=typeof e&&"abstract"!==e.blotName&&AP.register(e),"function"==typeof e.register&&e.register(AP)}}constructor(n){if(this.options=function _Ht(t,n){const e=EEe(t);if(!e)throw new Error("Invalid Quill container");const s=n.theme&&n.theme!==st.DEFAULTS.theme?st.import(`themes/${n.theme}`):kP;if(!s)throw new Error(`Invalid theme ${n.theme}. Did you register it?`);const{modules:r,...o}=st.DEFAULTS,{modules:a,...l}=s.DEFAULTS;let c=tK(n.modules);null!=c&&c.toolbar&&c.toolbar.constructor!==Object&&(c={...c,toolbar:{container:c.toolbar}});const u=rg({},tK(r),tK(a),c),d={...o,...TEe(l),...TEe(n)};let h=n.registry;return h?n.formats&&BC.warn('Ignoring "formats" option because "registry" is specified'):h=n.formats?((t,n,e)=>{const i=new OC;return fHt.forEach(s=>{const r=n.query(s);r&&i.register(r)}),t.forEach(s=>{let r=n.query(s);r||e.error(`Cannot register "${s}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;r;)if(i.register(r),r="blotName"in r?r.requiredContainer??null:null,o+=1,o>100){e.error(`Cycle detected in registering blot requiredContainer: "${s}"`);break}}),i})(n.formats,d.registry,BC):d.registry,{...d,registry:h,container:e,theme:s,modules:Object.entries(u).reduce((p,f)=>{let[g,v]=f;if(!v)return p;const y=st.import(`modules/${g}`);return null==y?(BC.error(`Cannot load ${g} module. Are you sure you registered it?`),p):{...p,[g]:rg({},y.DEFAULTS||{},v)}},{}),bounds:EEe(d.bounds)}}(n,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.container=this.options.container,null==this.container)return void BC.error("Invalid Quill container",n);this.options.debug&&st.debug(this.options.debug);const i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Wq.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new mn;const s=Fq.blotName,r=this.options.registry.query(s);if(!r||!("blotName"in r))throw new Error(`Cannot initialize Quill without "${s}" blot`);if(this.scroll=new r(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new oHt(this.scroll),this.selection=new tHt(this.scroll,this.emitter),this.composition=new cHt(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(mn.events.EDITOR_CHANGE,o=>{o===mn.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(mn.events.SCROLL_UPDATE,(o,a)=>{const l=this.selection.lastRange,[c]=this.selection.getRange(),u=l&&c?{oldRange:l,newRange:c}:void 0;bh.call(this,()=>this.editor.update(null,a,u),o)}),this.emitter.on(mn.events.SCROLL_EMBED_UPDATE,(o,a)=>{const l=this.selection.lastRange,[c]=this.selection.getRange(),u=l&&c?{oldRange:l,newRange:c}:void 0;bh.call(this,()=>{const d=(new Yt).retain(o.offset(this)).retain({[o.statics.blotName]:a});return this.editor.update(d,[],u)},st.sources.USER)}),i){const o=this.clipboard.convert({html:`${i}<p><br></p>`,text:"\n"});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof n){const i=n;(n=document.createElement("div")).classList.add(i)}return this.container.insertBefore(n,e),n}blur(){this.selection.setRange(null)}deleteText(n,e,i){return[n,e,,i]=Qf(n,e,i),bh.call(this,()=>this.editor.deleteText(n,e),i,n,-1*e)}disable(){this.enable(!1)}editReadOnly(n){this.allowReadOnlyEdits=!0;const e=n();return this.allowReadOnlyEdits=!1,e}enable(){let n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(n),this.container.classList.toggle("ql-disabled",!n)}focus(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.selection.focus(),n.preventScroll||this.scrollSelectionIntoView()}format(n,e){return bh.call(this,()=>{const s=this.getSelection(!0);let r=new Yt;if(null==s)return r;if(this.scroll.query(n,vn.BLOCK))r=this.editor.formatLine(s.index,s.length,{[n]:e});else{if(0===s.length)return this.selection.format(n,e),r;r=this.editor.formatText(s.index,s.length,{[n]:e})}return this.setSelection(s,mn.sources.SILENT),r},arguments.length>2&&void 0!==arguments[2]?arguments[2]:mn.sources.API)}formatLine(n,e,i,s,r){let o;return[n,e,o,r]=Qf(n,e,i,s,r),bh.call(this,()=>this.editor.formatLine(n,e,o),r,n,0)}formatText(n,e,i,s,r){let o;return[n,e,o,r]=Qf(n,e,i,s,r),bh.call(this,()=>this.editor.formatText(n,e,o),r,n,0)}getBounds(n){let i=null;if(i="number"==typeof n?this.selection.getBounds(n,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.selection.getBounds(n.index,n.length),!i)return null;const s=this.container.getBoundingClientRect();return{bottom:i.bottom-s.top,height:i.height,left:i.left-s.left,right:i.right-s.left,top:i.top-s.top,width:i.width}}getContents(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-n;return[n,e]=Qf(n,e),this.editor.getContents(n,e)}getFormat(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0);return"number"==typeof n?this.editor.getFormat(n,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.editor.getFormat(n.index,n.length)}getIndex(n){return n.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(n){return this.scroll.leaf(n)}getLine(n){return this.scroll.line(n)}getLines(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof n?this.scroll.lines(n.index,n.length):this.scroll.lines(n,e)}getModule(n){return this.theme.modules[n]}getSelection(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return"number"==typeof n&&(e=e??this.getLength()-n),[n,e]=Qf(n,e),this.editor.getHTML(n,e)}getText(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return"number"==typeof n&&(e=e??this.getLength()-n),[n,e]=Qf(n,e),this.editor.getText(n,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(n,e,i){return bh.call(this,()=>this.editor.insertEmbed(n,e,i),arguments.length>3&&void 0!==arguments[3]?arguments[3]:st.sources.API,n)}insertText(n,e,i,s,r){let o;return[n,,o,r]=Qf(n,0,i,s,r),bh.call(this,()=>this.editor.insertText(n,e,o),r,n,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(n,e,i){return[n,e,,i]=Qf(n,e,i),bh.call(this,()=>this.editor.removeFormat(n,e),i,n)}scrollRectIntoView(n){((t,n)=>{const e=t.ownerDocument;let i=n,s=t;for(;s;){const r=s===e.body,o=r?{top:0,right:window.visualViewport?.width??e.documentElement.clientWidth,bottom:window.visualViewport?.height??e.documentElement.clientHeight,left:0}:dHt(s),a=getComputedStyle(s),l=xEe(i.left,i.right,o.left,o.right,DP(a.scrollPaddingLeft),DP(a.scrollPaddingRight)),c=xEe(i.top,i.bottom,o.top,o.bottom,DP(a.scrollPaddingTop),DP(a.scrollPaddingBottom));if(l||c)if(r)e.defaultView?.scrollBy(l,c);else{const{scrollLeft:u,scrollTop:d}=s;c&&(s.scrollTop+=c),l&&(s.scrollLeft+=l);const h=s.scrollLeft-u,p=s.scrollTop-d;i={left:i.left-h,top:i.top-p,right:i.right-h,bottom:i.bottom-p}}s=r||"fixed"===a.position?null:uHt(s)}})(this.root,n)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const n=this.selection.lastRange,e=n&&this.selection.getBounds(n.index,n.length);e&&this.scrollRectIntoView(e)}setContents(n){return bh.call(this,()=>{n=new Yt(n);const i=this.getLength(),s=this.editor.deleteText(0,i),r=this.editor.insertContents(0,n),o=this.editor.deleteText(this.getLength()-1,1);return s.compose(r).compose(o)},arguments.length>1&&void 0!==arguments[1]?arguments[1]:mn.sources.API)}setSelection(n,e,i){null==n?this.selection.setRange(null,e||st.sources.API):([n,e,,i]=Qf(n,e,i),this.selection.setRange(new uy(Math.max(0,n),e),i),i!==mn.sources.SILENT&&this.scrollSelectionIntoView())}setText(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mn.sources.API;const i=(new Yt).insert(n);return this.setContents(i,e)}update(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn.sources.USER;const e=this.scroll.update(n);return this.selection.update(n),e}updateContents(n){return bh.call(this,()=>(n=new Yt(n),this.editor.applyDelta(n)),arguments.length>1&&void 0!==arguments[1]?arguments[1]:mn.sources.API,!0)}}function EEe(t){return"string"==typeof t?document.querySelector(t):t}function tK(t){return Object.entries(t??{}).reduce((n,e)=>{let[i,s]=e;return{...n,[i]:!0===s?{}:s}},{})}function TEe(t){return Object.fromEntries(Object.entries(t).filter(n=>void 0!==n[1]))}function bh(t,n,e,i){if(!this.isEnabled()&&n===mn.sources.USER&&!this.allowReadOnlyEdits)return new Yt;let s=null==e?null:this.getSelection();const r=this.editor.delta,o=t();if(null!=s&&(!0===e&&(e=s.index),null==i?s=IEe(s,o,n):0!==i&&(s=IEe(s,e,i,n)),this.setSelection(s,mn.sources.SILENT)),o.length()>0){const a=[mn.events.TEXT_CHANGE,o,r,n];this.emitter.emit(mn.events.EDITOR_CHANGE,...a),n!==mn.sources.SILENT&&this.emitter.emit(...a)}return o}function Qf(t,n,e,i,s){let r={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof n?(s=i,i=e,e=n,n=t.length,t=t.index):(n=t.length,t=t.index):"number"!=typeof n&&(s=i,i=e,e=n,n=0),"object"==typeof e?(r=e,s=i):"string"==typeof e&&(null!=i?r[e]=i:s=e),[t,n,r,s=s||mn.sources.API]}function IEe(t,n,e,i){const s="number"==typeof e?e:0;if(null==t)return null;let r,o;return[r,o]=[t.index,t.index+t.length].map(n&&"function"==typeof n.transformPosition?a=>n.transformPosition(a,i!==mn.sources.USER):a=>a<n||a===n&&i===mn.sources.USER?a:s>=0?a+s:Math.max(n,a+s)),new uy(r,o-r)}const dy=class gHt extends yP{};function kEe(t){return t instanceof wu||t instanceof bd}function DEe(t){return"function"==typeof t.updateContent}function nK(t,n,e){e.reduce((i,s)=>{const r=Yt.Op.length(s);let o=s.attributes||{};if(null!=s.insert)if("string"==typeof s.insert){t.insertAt(i,s.insert);const[l]=t.descendant(El,i),c=vd(l);o=Yt.AttributeMap.diff(c,o)||{}}else if("object"==typeof s.insert){const a=Object.keys(s.insert)[0];if(null==a)return i;if(t.insertAt(i,a,s.insert[a]),null!=t.scroll.query(a,vn.INLINE)){const[c]=t.descendant(El,i),u=vd(c);o=Yt.AttributeMap.diff(u,o)||{}}}return Object.keys(o).forEach(a=>{t.formatAt(i,r,a,o[a])}),i+r},n)}const vHt=(()=>class t extends Fq{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=wu;static allowedChildren=[wu,bd,dy];constructor(e,i,s){let{emitter:r}=s;super(e,i),this.emitter=r,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",o=>this.handleDragStart(o))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(mn.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(mn.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,i){this.emitter.emit(mn.events.SCROLL_EMBED_UPDATE,e,i)}deleteAt(e,i){const[s,r]=this.line(e),[o]=this.line(e+i);if(super.deleteAt(e,i),null!=o&&s!==o&&r>0){if(s instanceof bd||o instanceof bd)return void this.optimize();s.moveChildren(o,o.children.head instanceof Zf?null:o.children.head),s.remove()}this.optimize()}enable(){this.domNode.setAttribute("contenteditable",arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?"false":"true")}formatAt(e,i,s,r){super.formatAt(e,i,s,r),this.optimize()}insertAt(e,i,s){if(e>=this.length())if(null==s||null==this.scroll.query(i,vn.BLOCK)){const r=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(r),null==s&&i.endsWith("\n")?r.insertAt(0,i.slice(0,-1),s):r.insertAt(0,i,s)}else{const r=this.scroll.create(i,s);this.appendChild(r)}else super.insertAt(e,i,s);this.optimize()}insertBefore(e,i){if(e.statics.scope===vn.INLINE_BLOT){const s=this.scroll.create(this.statics.defaultChild.blotName);s.appendChild(e),super.insertBefore(s,i)}else super.insertBefore(e,i)}insertContents(e,i){const s=this.deltaToRenderBlocks(i.concat((new Yt).insert("\n"))),r=s.pop();if(null==r)return;this.batchStart();const o=s.shift();if(o){const c="block"===o.type&&(0===o.delta.length()||!this.descendant(bd,e)[0]&&e<this.length()),u="block"===o.type?o.delta:(new Yt).insert({[o.key]:o.value});nK(this,e,u);const d="block"===o.type?1:0,h=e+u.length()+d;c&&this.insertAt(h-1,"\n");const p=vd(this.line(e)[0]),f=Yt.AttributeMap.diff(p,o.attributes)||{};Object.keys(f).forEach(g=>{this.formatAt(h-1,1,g,f[g])}),e=h}let[a,l]=this.children.find(e);s.length&&(a&&(a=a.split(l),l=0),s.forEach(c=>{if("block"===c.type)nK(this.createBlock(c.attributes,a||void 0),0,c.delta);else{const u=this.create(c.key,c.value);this.insertBefore(u,a||void 0),Object.keys(c.attributes).forEach(d=>{u.format(d,c.attributes[d])})}})),"block"===r.type&&r.delta.length()&&nK(this,a?a.offset(a.scroll)+l:this.length(),r.delta),this.batchEnd(),this.optimize()}isEnabled(){return"true"===this.domNode.getAttribute("contenteditable")}leaf(e){const i=this.path(e).pop();if(!i)return[null,-1];const[s,r]=i;return s instanceof El?[s,r]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(kEe,e)}lines(){const s=(r,o,a)=>{let l=[],c=a;return r.children.forEachAt(o,a,(u,d,h)=>{kEe(u)?l.push(u):u instanceof yP&&(l=l.concat(s(u,d,c))),c-=h}),l};return s(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}optimize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.batch||(super.optimize(e,i),e.length>0&&this.emitter.emit(mn.events.SCROLL_OPTIMIZE,e,i))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch)return void(Array.isArray(e)&&(this.batch=this.batch.concat(e)));let i=mn.sources.USER;"string"==typeof e&&(i=e),Array.isArray(e)||(e=this.observer.takeRecords()),(e=e.filter(s=>{let{target:r}=s;const o=this.find(r,!0);return o&&!DEe(o)})).length>0&&this.emitter.emit(mn.events.SCROLL_BEFORE_UPDATE,i,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(mn.events.SCROLL_UPDATE,i,e)}updateEmbedAt(e,i,s){const[r]=this.descendant(o=>o instanceof bd,e);r&&r.statics.blotName===i&&DEe(r)&&r.updateContent(s)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const i=[];let s=new Yt;return e.forEach(r=>{const o=r?.insert;if(o)if("string"==typeof o){const a=o.split("\n");a.slice(0,-1).forEach(c=>{s.insert(c,r.attributes),i.push({type:"block",delta:s,attributes:r.attributes??{}}),s=new Yt});const l=a[a.length-1];l&&s.insert(l,r.attributes)}else{const a=Object.keys(o)[0];if(!a)return;this.query(a,vn.INLINE)?s.push(r):(s.length()&&i.push({type:"block",delta:s,attributes:{}}),s=new Yt,i.push({type:"blockEmbed",key:a,value:o[a],attributes:r.attributes??{}}))}}),s.length()&&i.push({type:"block",delta:s,attributes:{}}),i}createBlock(e,i){let s;const r={};Object.entries(e).forEach(l=>{let[c,u]=l;null!=this.query(c,vn.BLOCK&vn.BLOT)?s=c:r[c]=u});const o=this.create(s||this.statics.defaultChild.blotName,s?e[s]:void 0);this.insertBefore(o,i||void 0);const a=o.length();return Object.entries(r).forEach(l=>{let[c,u]=l;o.formatAt(0,a,c,u)}),o}})(),iK={scope:vn.BLOCK,whitelist:["right","center","justify"]},yHt=new Op("align","align",iK),AEe=new mh("align","ql-align",iK),MEe=new og("align","text-align",iK);class NEe extends og{value(n){let e=super.value(n);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map(s=>`00${parseInt(s,10).toString(16)}`.slice(-2)).join("")}`):e}}const wHt=new mh("color","ql-color",{scope:vn.INLINE}),sK=new NEe("color","color",{scope:vn.INLINE}),CHt=new mh("background","ql-bg",{scope:vn.INLINE}),rK=new NEe("background","background-color",{scope:vn.INLINE});class hy extends dy{static create(n){const e=super.create(n);return e.setAttribute("spellcheck","false"),e}code(n,e){return this.children.map(i=>i.length()<=1?"":i.domNode.innerText).join("\n").slice(n,n+e)}html(n,e){return`<pre>\n${EP(this.code(n,e))}\n</pre>`}}let Ql=(()=>class t extends wu{static TAB="  ";static register(){st.register(hy)}})(),SHt=(()=>{class t extends ag{}return t.blotName="code",t.tagName="CODE",t})();Ql.blotName="code-block",Ql.className="ql-code-block",Ql.tagName="DIV",hy.blotName="code-block-container",hy.className="ql-code-block-container",hy.tagName="DIV",hy.allowedChildren=[Ql],Ql.allowedChildren=[gh,Zf,TP],Ql.requiredContainer=hy;const oK={scope:vn.BLOCK,whitelist:["rtl"]},OEe=new Op("direction","dir",oK),REe=new mh("direction","ql-direction",oK),FEe=new og("direction","direction",oK),LEe={scope:vn.INLINE,whitelist:["serif","monospace"]},PEe=new mh("font","ql-font",LEe),$Ee=new class xHt extends og{value(n){return super.value(n).replace(/["']/g,"")}}("font","font-family",LEe),BEe=new mh("size","ql-size",{scope:vn.INLINE,whitelist:["small","large","huge"]}),VEe=new og("size","font-size",{scope:vn.INLINE,whitelist:["10px","18px","32px"]}),EHt=cy("quill:keyboard"),THt=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class MP extends Rp{static match(n,e){return!["altKey","ctrlKey","metaKey","shiftKey"].some(i=>!!e[i]!==n[i]&&null!==e[i])&&(e.key===n.key||e.key===n.which)}constructor(n,e){super(n,e),this.bindings={},Object.keys(this.options.bindings).forEach(i=>{this.options.bindings[i]&&this.addBinding(this.options.bindings[i])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=function kHt(t){if("string"==typeof t||"number"==typeof t)t={key:t};else{if("object"!=typeof t)return null;t=PC(t)}return t.shortKey&&(t[THt]=t.shortKey,delete t.shortKey),t}(n);null!=s?("function"==typeof e&&(e={handler:e}),"function"==typeof i&&(i={handler:i}),(Array.isArray(s.key)?s.key:[s.key]).forEach(o=>{const a={...s,key:o,...e,...i};this.bindings[a.key]=this.bindings[a.key]||[],this.bindings[a.key].push(a)})):EHt.warn("Attempted to add invalid keyboard binding",s)}listen(){this.quill.root.addEventListener("keydown",n=>{if(n.defaultPrevented||n.isComposing||229===n.keyCode&&("Enter"===n.key||"Backspace"===n.key))return;const s=(this.bindings[n.key]||[]).concat(this.bindings[n.which]||[]).filter(y=>MP.match(n,y));if(0===s.length)return;const r=st.find(n.target,!0);if(r&&r.scroll!==this.quill.scroll)return;const o=this.quill.getSelection();if(null==o||!this.quill.hasFocus())return;const[a,l]=this.quill.getLine(o.index),[c,u]=this.quill.getLeaf(o.index),[d,h]=0===o.length?[c,u]:this.quill.getLeaf(o.index+o.length),p=c instanceof wP?c.value().slice(0,u):"",f=d instanceof wP?d.value().slice(h):"",g={collapsed:0===o.length,empty:0===o.length&&a.length()<=1,format:this.quill.getFormat(o),line:a,offset:l,prefix:p,suffix:f,event:n};s.some(y=>{if(null!=y.collapsed&&y.collapsed!==g.collapsed||null!=y.empty&&y.empty!==g.empty||null!=y.offset&&y.offset!==g.offset)return!1;if(Array.isArray(y.format)){if(y.format.every(w=>null==g.format[w]))return!1}else if("object"==typeof y.format&&!Object.keys(y.format).every(w=>!0===y.format[w]?null!=g.format[w]:!1===y.format[w]?null==g.format[w]:Hq(y.format[w],g.format[w])))return!1;return!(null!=y.prefix&&!y.prefix.test(g.prefix)||null!=y.suffix&&!y.suffix.test(g.suffix))&&!0!==y.handler.call(this,o,g,y)})&&n.preventDefault()})}handleBackspace(n,e){const i=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(0===n.index||this.quill.getLength()<=1)return;let s={};const[r]=this.quill.getLine(n.index);let o=(new Yt).retain(n.index-i).delete(i);if(0===e.offset){const[a]=this.quill.getLine(n.index-1);if(a&&!("block"===a.statics.blotName&&a.length()<=1)){const c=r.formats(),u=this.quill.getFormat(n.index-1,1);if(s=Yt.AttributeMap.diff(c,u)||{},Object.keys(s).length>0){const d=(new Yt).retain(n.index+r.length()-2).retain(1,s);o=o.compose(d)}}}this.quill.updateContents(o,st.sources.USER),this.quill.focus()}handleDelete(n,e){const i=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(n.index>=this.quill.getLength()-i)return;let s={};const[r]=this.quill.getLine(n.index);let o=(new Yt).retain(n.index).delete(i);if(e.offset>=r.length()-1){const[a]=this.quill.getLine(n.index+1);if(a){const l=r.formats(),c=this.quill.getFormat(n.index,1);s=Yt.AttributeMap.diff(l,c)||{},Object.keys(s).length>0&&(o=o.retain(a.length()-1).retain(1,s))}}this.quill.updateContents(o,st.sources.USER),this.quill.focus()}handleDeleteRange(n){lK({range:n,quill:this.quill}),this.quill.focus()}handleEnter(n,e){const i=Object.keys(e.format).reduce((r,o)=>(this.quill.scroll.query(o,vn.BLOCK)&&!Array.isArray(e.format[o])&&(r[o]=e.format[o]),r),{}),s=(new Yt).retain(n.index).delete(n.length).insert("\n",i);this.quill.updateContents(s,st.sources.USER),this.quill.setSelection(n.index+1,st.sources.SILENT),this.quill.focus()}}const IHt={bindings:{bold:aK("bold"),italic:aK("italic"),underline:aK("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,n){return!(!n.collapsed||0===n.offset)||(this.quill.format("indent","+1",st.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,n){return!(!n.collapsed||0===n.offset)||(this.quill.format("indent","-1",st.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,n){null!=n.format.indent?this.quill.format("indent","-1",st.sources.USER):null!=n.format.list&&this.quill.format("list",!1,st.sources.USER)}},"indent code-block":zEe(!0),"outdent code-block":zEe(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,st.sources.USER)}},tab:{key:"Tab",handler(t,n){if(n.format.table)return!0;this.quill.history.cutoff();const e=(new Yt).retain(t.index).delete(t.length).insert("\t");return this.quill.updateContents(e,st.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,st.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,st.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,n){const e={list:!1};n.format.indent&&(e.indent=!1),this.quill.formatLine(t.index,t.length,e,st.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[n,e]=this.quill.getLine(t.index),i={...n.formats(),list:"checked"},s=(new Yt).retain(t.index).insert("\n",i).retain(n.length()-e-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,st.sources.USER),this.quill.setSelection(t.index+1,st.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,n){const[e,i]=this.quill.getLine(t.index),s=(new Yt).retain(t.index).insert("\n",n.format).retain(e.length()-i-1).retain(1,{header:null});this.quill.updateContents(s,st.sources.USER),this.quill.setSelection(t.index+1,st.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const n=this.quill.getModule("table");if(n){const[e,i,s,r]=n.getTable(t),o=function DHt(t,n,e,i){return null==n.prev&&null==n.next?null==e.prev&&null==e.next?0===i?-1:1:null==e.prev?-1:1:null==n.prev?-1:null==n.next?1:null}(0,i,s,r);if(null==o)return;let a=e.offset();if(o<0){const l=(new Yt).retain(a).insert("\n");this.quill.updateContents(l,st.sources.USER),this.quill.setSelection(t.index+1,t.length,st.sources.SILENT)}else if(o>0){a+=e.length();const l=(new Yt).retain(a).insert("\n");this.quill.updateContents(l,st.sources.USER),this.quill.setSelection(a,st.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,n){const{event:e,line:i}=n,s=i.offset(this.quill.scroll);this.quill.setSelection(e.shiftKey?s-1:s+i.length(),st.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,n){if(null==this.quill.scroll.query("list"))return!0;const{length:e}=n.prefix,[i,s]=this.quill.getLine(t.index);if(s>e)return!0;let r;switch(n.prefix.trim()){case"[]":case"[ ]":r="unchecked";break;case"[x]":r="checked";break;case"-":case"*":r="bullet";break;default:r="ordered"}this.quill.insertText(t.index," ",st.sources.USER),this.quill.history.cutoff();const o=(new Yt).retain(t.index-s).delete(e+1).retain(i.length()-2-s).retain(1,{list:r});return this.quill.updateContents(o,st.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-e,st.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[n,e]=this.quill.getLine(t.index);let i=2,s=n;for(;null!=s&&s.length()<=1&&s.formats()["code-block"];)if(s=s.prev,i-=1,i<=0){const r=(new Yt).retain(t.index+n.length()-e-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(r,st.sources.USER),this.quill.setSelection(t.index-1,st.sources.SILENT),!1}return!0}},"embed left":NP("ArrowLeft",!1),"embed left shift":NP("ArrowLeft",!0),"embed right":NP("ArrowRight",!1),"embed right shift":NP("ArrowRight",!0),"table down":UEe(!1),"table up":UEe(!0)}};function zEe(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(n,e){let{event:i}=e;const s=this.quill.scroll.query("code-block"),{TAB:r}=s;if(0===n.length&&!i.shiftKey)return this.quill.insertText(n.index,r,st.sources.USER),void this.quill.setSelection(n.index+r.length,st.sources.SILENT);const o=0===n.length?this.quill.getLines(n.index,1):this.quill.getLines(n);let{index:a,length:l}=n;o.forEach((c,u)=>{t?(c.insertAt(0,r),0===u?a+=r.length:l+=r.length):c.domNode.textContent.startsWith(r)&&(c.deleteAt(0,r.length),0===u?a-=r.length:l-=r.length)}),this.quill.update(st.sources.USER),this.quill.setSelection(a,l,st.sources.SILENT)}}}function NP(t,n){return{key:t,shiftKey:n,altKey:null,["ArrowLeft"===t?"prefix":"suffix"]:/^$/,handler(i){let{index:s}=i;"ArrowRight"===t&&(s+=i.length+1);const[r]=this.quill.getLeaf(s);return!(r instanceof yu&&("ArrowLeft"===t?n?this.quill.setSelection(i.index-1,i.length+1,st.sources.USER):this.quill.setSelection(i.index-1,st.sources.USER):n?this.quill.setSelection(i.index,i.length+1,st.sources.USER):this.quill.setSelection(i.index+i.length+1,st.sources.USER),1))}}}function aK(t){return{key:t[0],shortKey:!0,handler(n,e){this.quill.format(t,!e.format[t],st.sources.USER)}}}function UEe(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(n,e){const i=t?"prev":"next",s=e.line,r=s.parent[i];if(null!=r){if("table-row"===r.statics.blotName){let o=r.children.head,a=s;for(;null!=a.prev;)a=a.prev,o=o.next;const l=o.offset(this.quill.scroll)+Math.min(e.offset,o.length()-1);this.quill.setSelection(l,0,st.sources.USER)}}else{const o=s.table()[i];null!=o&&this.quill.setSelection(t?o.offset(this.quill.scroll)+o.length()-1:o.offset(this.quill.scroll),0,st.sources.USER)}return!1}}}function lK(t){let{quill:n,range:e}=t;const i=n.getLines(e);let s={};if(i.length>1){const r=i[0].formats(),o=i[i.length-1].formats();s=Yt.AttributeMap.diff(o,r)||{}}n.deleteText(e,st.sources.USER),Object.keys(s).length>0&&n.formatLine(e.index,1,s,st.sources.USER),n.setSelection(e.index,st.sources.SILENT)}MP.DEFAULTS=IHt;const AHt=/font-weight:\s*normal/,MHt=["P","OL","UL"],GEe=t=>t&&MHt.includes(t.tagName),FHt=/\bmso-list:[^;]*ignore/i,LHt=/\bmso-list:[^;]*\bl(\d+)/i,PHt=/\bmso-list:[^;]*\blevel(\d+)/i,zHt=[function VHt(t){"urn:schemas-microsoft-com:office:word"===t.documentElement.getAttribute("xmlns:w")&&(t=>{const n=Array.from(t.querySelectorAll("[style*=mso-list]")),e=[],i=[];n.forEach(o=>{(o.getAttribute("style")||"").match(FHt)?e.push(o):i.push(o)}),e.forEach(o=>o.parentNode?.removeChild(o));const s=t.documentElement.innerHTML,r=i.map(o=>((t,n)=>{const e=t.getAttribute("style"),i=e?.match(LHt);if(!i)return null;const s=Number(i[1]),r=e?.match(PHt),o=r?Number(r[1]):1,a=new RegExp(`@list l${s}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=n.match(a);return{id:s,indent:o,type:l&&"bullet"===l[1]?"bullet":"ordered",element:t}})(o,s)).filter(o=>o);for(;r.length;){const o=[];let a=r.shift();for(;a;)o.push(a),a=r.length&&r[0]?.element===a.element.nextElementSibling&&r[0].id===a.id?r.shift():null;const l=document.createElement("ul");o.forEach(d=>{const h=document.createElement("li");h.setAttribute("data-list",d.type),d.indent>1&&h.setAttribute("class","ql-indent-"+(d.indent-1)),h.innerHTML=d.element.innerHTML,l.appendChild(h)});const c=o[0]?.element,{parentNode:u}=c??{};c&&u?.replaceChild(l,c),o.slice(1).forEach(d=>{let{element:h}=d;u?.removeChild(h)})}})(t)},function RHt(t){t.querySelector('[id^="docs-internal-guid-"]')&&((t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(n=>n.getAttribute("style")?.match(AHt)).forEach(n=>{const e=t.createDocumentFragment();e.append(...n.childNodes),n.parentNode?.replaceChild(e,n)})})(t),(t=>{Array.from(t.querySelectorAll("br")).filter(n=>GEe(n.previousElementSibling)&&GEe(n.nextElementSibling)).forEach(n=>{n.parentNode?.removeChild(n)})})(t))}],GHt=cy("quill:clipboard"),jHt=[[Node.TEXT_NODE,function iWt(t,n,e){let i=t.data;if("O:P"===t.parentElement?.tagName)return n.insert(i.trim());if(!HEe(t)){if(0===i.trim().length&&i.includes("\n")&&!function qHt(t,n){return t.previousElementSibling&&t.nextElementSibling&&!lg(t.previousElementSibling,n)&&!lg(t.nextElementSibling,n)}(t,e))return n;const s=(r,o)=>{const a=o.replace(/[^\u00a0]/g,"");return a.length<1&&r?" ":a};i=i.replace(/\r\n/g," ").replace(/\n/g," "),i=i.replace(/\s\s+/g,s.bind(s,!0)),(null==t.previousSibling&&null!=t.parentElement&&lg(t.parentElement,e)||t.previousSibling instanceof Element&&lg(t.previousSibling,e))&&(i=i.replace(/^\s+/,s.bind(s,!1))),(null==t.nextSibling&&null!=t.parentElement&&lg(t.parentElement,e)||t.nextSibling instanceof Element&&lg(t.nextSibling,e))&&(i=i.replace(/\s+$/,s.bind(s,!1)))}return n.insert(i)}],[Node.TEXT_NODE,WEe],["br",function YHt(t,n){return dk(n,"\n")||n.insert("\n"),n}],[Node.ELEMENT_NODE,WEe],[Node.ELEMENT_NODE,function XHt(t,n,e){const i=e.query(t);if(null==i)return n;if(i.prototype instanceof yu){const s={},r=i.value(t);if(null!=r)return s[i.blotName]=r,(new Yt).insert(s,i.formats(t,e))}else if(i.prototype instanceof lk&&!dk(n,"\n")&&n.insert("\n"),"blotName"in i&&"formats"in i&&"function"==typeof i.formats)return py(n,i.blotName,i.formats(t,e),e);return n}],[Node.ELEMENT_NODE,function KHt(t,n,e){const i=Op.keys(t),s=mh.keys(t),r=og.keys(t),o={};return i.concat(s).concat(r).forEach(a=>{let l=e.query(a,vn.ATTRIBUTE);null!=l&&(o[l.attrName]=l.value(t),o[l.attrName])||(l=HHt[a],null!=l&&(l.attrName===a||l.keyName===a)&&(o[l.attrName]=l.value(t)||void 0),l=jEe[a],null!=l&&(l.attrName===a||l.keyName===a)&&(l=jEe[a],o[l.attrName]=l.value(t)||void 0))}),Object.entries(o).reduce((a,l)=>{let[c,u]=l;return py(a,c,u,e)},n)}],[Node.ELEMENT_NODE,function tWt(t,n,e){const i={},s=t.style||{};return"italic"===s.fontStyle&&(i.italic=!0),"underline"===s.textDecoration&&(i.underline=!0),"line-through"===s.textDecoration&&(i.strike=!0),(s.fontWeight?.startsWith("bold")||parseInt(s.fontWeight,10)>=700)&&(i.bold=!0),n=Object.entries(i).reduce((r,o)=>{let[a,l]=o;return py(r,a,l,e)},n),parseFloat(s.textIndent||0)>0?(new Yt).insert("\t").concat(n):n}],["li",function JHt(t,n,e){const i=e.query(t);if(null==i||"list"!==i.blotName||!dk(n,"\n"))return n;let s=-1,r=t.parentNode;for(;null!=r;)["OL","UL"].includes(r.tagName)&&(s+=1),r=r.parentNode;return s<=0?n:n.reduce((o,a)=>a.insert?a.attributes&&"number"==typeof a.attributes.indent?o.push(a):o.insert(a.insert,{indent:s,...a.attributes||{}}):o,new Yt)}],["ol, ul",function eWt(t,n,e){let s="OL"===t.tagName?"ordered":"bullet";const r=t.getAttribute("data-checked");return r&&(s="true"===r?"checked":"unchecked"),py(n,"list",s,e)}],["pre",function ZHt(t,n,e){const i=e.query("code-block");return py(n,"code-block",!i||!("formats"in i)||"function"!=typeof i.formats||i.formats(t,e),e)}],["tr",function nWt(t,n,e){const i="TABLE"===t.parentElement?.tagName?t.parentElement:t.parentElement?.parentElement;return null!=i?py(n,"table",Array.from(i.querySelectorAll("tr")).indexOf(t)+1,e):n}],["b",uK("bold")],["i",uK("italic")],["strike",uK("strike")],["style",function QHt(){return new Yt}]],HHt=[yHt,OEe].reduce((t,n)=>(t[n.keyName]=n,t),{}),jEe=[MEe,rK,sK,FEe,$Ee,VEe].reduce((t,n)=>(t[n.keyName]=n,t),{});let WHt=(()=>class t extends Rp{static DEFAULTS={matchers:[]};constructor(e,i){super(e,i),this.quill.root.addEventListener("copy",s=>this.onCaptureCopy(s,!1)),this.quill.root.addEventListener("cut",s=>this.onCaptureCopy(s,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],jHt.concat(this.options.matchers??[]).forEach(s=>{let[r,o]=s;this.addMatcher(r,o)})}addMatcher(e,i){this.matchers.push([e,i])}convert(e){let{html:i,text:s}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r[Ql.blotName])return(new Yt).insert(s||"",{[Ql.blotName]:r[Ql.blotName]});if(!i)return(new Yt).insert(s||"",r);const o=this.convertHTML(i);return dk(o,"\n")&&(null==o.ops[o.ops.length-1].attributes||r.table)?o.compose((new Yt).retain(o.length()-1).delete(1)):o}normalizeHTML(e){(t=>{t.documentElement&&zHt.forEach(n=>{n(t)})})(e)}convertHTML(e){const i=(new DOMParser).parseFromString(e,"text/html");this.normalizeHTML(i);const s=i.body,r=new WeakMap,[o,a]=this.prepareMatching(s,r);return cK(this.quill.scroll,s,o,a,r)}dangerouslyPasteHTML(e,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:st.sources.API;if("string"==typeof e){const r=this.convert({html:e,text:""});this.quill.setContents(r,i),this.quill.setSelection(0,st.sources.SILENT)}else{const r=this.convert({html:i,text:""});this.quill.updateContents((new Yt).retain(e).concat(r),s),this.quill.setSelection(e+r.length(),st.sources.SILENT)}}onCaptureCopy(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.defaultPrevented)return;e.preventDefault();const[s]=this.quill.selection.getRange();if(null==s)return;const{html:r,text:o}=this.onCopy(s,i);e.clipboardData?.setData("text/plain",o),e.clipboardData?.setData("text/html",r),i&&lK({range:s,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(i=>"#"!==i[0]).join("\n")}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const i=this.quill.getSelection(!0);if(null==i)return;const s=e.clipboardData?.getData("text/html");let r=e.clipboardData?.getData("text/plain");if(!s&&!r){const a=e.clipboardData?.getData("text/uri-list");a&&(r=this.normalizeURIList(a))}const o=Array.from(e.clipboardData?.files||[]);if(!s&&o.length>0)this.quill.uploader.upload(i,o);else{if(s&&o.length>0){const a=(new DOMParser).parseFromString(s,"text/html");if(1===a.body.childElementCount&&"IMG"===a.body.firstElementChild?.tagName)return void this.quill.uploader.upload(i,o)}this.onPaste(i,{html:s,text:r})}}onCopy(e){const i=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:i}}onPaste(e,i){let{text:s,html:r}=i;const o=this.quill.getFormat(e.index),a=this.convert({text:s,html:r},o);GHt.log("onPaste",a,{text:s,html:r});const l=(new Yt).retain(e.index).delete(e.length).concat(a);this.quill.updateContents(l,st.sources.USER),this.quill.setSelection(l.length()-e.length,st.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,i){const s=[],r=[];return this.matchers.forEach(o=>{const[a,l]=o;switch(a){case Node.TEXT_NODE:r.push(l);break;case Node.ELEMENT_NODE:s.push(l);break;default:Array.from(e.querySelectorAll(a)).forEach(c=>{i.has(c)?i.get(c)?.push(l):i.set(c,[l])})}}),[s,r]}})();function py(t,n,e,i){return i.query(n)?t.reduce((s,r)=>r.insert?r.attributes&&r.attributes[n]?s.push(r):s.insert(r.insert,{...e?{[n]:e}:{},...r.attributes}):s,new Yt):t}function dk(t,n){let e="";for(let i=t.ops.length-1;i>=0&&e.length<n.length;--i){const s=t.ops[i];if("string"!=typeof s.insert)break;e=s.insert+e}return e.slice(-1*n.length)===n}function lg(t,n){if(!(t instanceof Element))return!1;const e=n.query(t);return!(e&&e.prototype instanceof yu)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}const OP=new WeakMap;function HEe(t){return null!=t&&(OP.has(t)||OP.set(t,"PRE"===t.tagName||HEe(t.parentNode)),OP.get(t))}function cK(t,n,e,i,s){return n.nodeType===n.TEXT_NODE?i.reduce((r,o)=>o(n,r,t),new Yt):n.nodeType===n.ELEMENT_NODE?Array.from(n.childNodes||[]).reduce((r,o)=>{let a=cK(t,o,e,i,s);return o.nodeType===n.ELEMENT_NODE&&(a=e.reduce((l,c)=>c(o,l,t),a),a=(s.get(o)||[]).reduce((l,c)=>c(o,l,t),a)),r.concat(a)},new Yt):new Yt}function uK(t){return(n,e,i)=>py(e,t,!0,i)}function WEe(t,n,e){if(!dk(n,"\n")){if(lg(t,e)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return n.insert("\n");if(n.length()>0&&t.nextSibling){let i=t.nextSibling;for(;null!=i;){if(lg(i,e))return n.insert("\n");const s=e.query(i);if(s&&s.prototype instanceof bd)return n.insert("\n");i=i.firstChild}}}return n}let sWt=(()=>class t extends Rp{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,i){super(e,i),this.quill.on(st.events.EDITOR_CHANGE,(s,r,o,a)=>{s===st.events.SELECTION_CHANGE?r&&a!==st.sources.SILENT&&(this.currentRange=r):s===st.events.TEXT_CHANGE&&(this.ignoreChange||(this.options.userOnly&&a!==st.sources.USER?this.transform(r):this.record(r,o)),this.currentRange=dK(this.currentRange,r))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{"historyUndo"===s.inputType?(this.undo(),s.preventDefault()):"historyRedo"===s.inputType&&(this.redo(),s.preventDefault())})}change(e,i){if(0===this.stack[e].length)return;const s=this.stack[e].pop();if(!s)return;const r=this.quill.getContents(),o=s.delta.invert(r);this.stack[i].push({delta:o,range:dK(s.range,o)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,st.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,i){if(0===e.ops.length)return;this.stack.redo=[];let s=e.invert(i),r=this.currentRange;const o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){const a=this.stack.undo.pop();a&&(s=s.compose(a.delta),r=a.range)}else this.lastRecorded=o;0!==s.length()&&(this.stack.undo.push({delta:s,range:r}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){qEe(this.stack.undo,e),qEe(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,st.sources.USER);else{const i=function oWt(t,n){const e=n.reduce((s,r)=>s+(r.delete||0),0);let i=n.length()-e;return function rWt(t,n){const e=n.ops[n.ops.length-1];return null!=e&&(null!=e.insert?"string"==typeof e.insert&&e.insert.endsWith("\n"):null!=e.attributes&&Object.keys(e.attributes).some(i=>null!=t.query(i,vn.BLOCK)))}(t,n)&&(i-=1),i}(this.quill.scroll,e.delta);this.quill.setSelection(i,st.sources.USER)}}})();function qEe(t,n){let e=n;for(let i=t.length-1;i>=0;i-=1){const s=t[i];t[i]={delta:e.transform(s.delta,!0),range:s.range&&dK(s.range,e)},e=s.delta.transform(e),0===t[i].delta.length()&&t.splice(i,1)}}function dK(t,n){if(!t)return t;const e=n.transformPosition(t.index);return{index:e,length:n.transformPosition(t.index+t.length)-e}}const aWt=(()=>{class t extends Rp{constructor(e,i){super(e,i),e.root.addEventListener("drop",s=>{s.preventDefault();let r=null;if(document.caretRangeFromPoint)r=document.caretRangeFromPoint(s.clientX,s.clientY);else if(document.caretPositionFromPoint){const a=document.caretPositionFromPoint(s.clientX,s.clientY);r=document.createRange(),r.setStart(a.offsetNode,a.offset),r.setEnd(a.offsetNode,a.offset)}const o=r&&e.selection.normalizeNative(r);if(o){const a=e.selection.normalizedToRange(o);s.dataTransfer?.files&&this.upload(a,s.dataTransfer.files)}})}upload(e,i){const s=[];Array.from(i).forEach(r=>{r&&this.options.mimetypes?.includes(r.type)&&s.push(r)}),s.length>0&&this.options.handler.call(this,e,s)}}return t.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(n,e){if(!this.quill.scroll.query("image"))return;const i=e.map(s=>new Promise(r=>{const o=new FileReader;o.onload=()=>{r(o.result)},o.readAsDataURL(s)}));Promise.all(i).then(s=>{const r=s.reduce((o,a)=>o.insert({image:a}),(new Yt).retain(n.index).delete(n.length));this.quill.updateContents(r,mn.sources.USER),this.quill.setSelection(n.index+s.length,mn.sources.SILENT)})}},t})(),lWt=["insertText","insertReplacementText"],hWt=/Mac/i.test(navigator.platform);st.register({"blots/block":wu,"blots/block/embed":bd,"blots/break":Zf,"blots/container":dy,"blots/cursor":TP,"blots/embed":eK,"blots/inline":ag,"blots/scroll":vHt,"blots/text":gh,"modules/clipboard":WHt,"modules/history":sWt,"modules/keyboard":MP,"modules/uploader":aWt,"modules/input":class cWt extends Rp{constructor(n,e){super(n,e),n.root.addEventListener("beforeinput",i=>{this.handleBeforeInput(i)}),/Android/i.test(navigator.userAgent)||n.on(st.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(n){lK({range:n,quill:this.quill})}replaceText(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(0===n.length)return!1;if(e){const i=this.quill.getFormat(n.index,1);this.deleteRange(n),this.quill.updateContents((new Yt).retain(n.index).insert(e,i),st.sources.USER)}else this.deleteRange(n);return this.quill.setSelection(n.index+e.length,0,st.sources.SILENT),!0}handleBeforeInput(n){if(this.quill.composition.isComposing||n.defaultPrevented||!lWt.includes(n.inputType))return;const e=n.getTargetRanges?n.getTargetRanges()[0]:null;if(!e||!0===e.collapsed)return;const i=function uWt(t){return"string"==typeof t.data?t.data:t.dataTransfer?.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}(n);if(null==i)return;const s=this.quill.selection.normalizeNative(e),r=s?this.quill.selection.normalizedToRange(s):null;r&&this.replaceText(r,i)&&n.preventDefault()}handleCompositionStart(){const n=this.quill.getSelection();n&&this.replaceText(n)}},"modules/uiNode":class mWt extends Rp{isListening=!1;selectionChangeDeadline=0;constructor(n,e){super(n,e),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(n,e){let{line:i,event:s}=e;if(!(i instanceof _h&&i.uiNode))return!0;const r="rtl"===getComputedStyle(i.domNode).direction;return!!(r&&"ArrowRight"!==s.key||!r&&"ArrowLeft"!==s.key)||(this.quill.setSelection(n.index-1,n.length+(s.shiftKey?1:0),st.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",n=>{!n.defaultPrevented&&(t=>!!("ArrowLeft"===t.key||"ArrowRight"===t.key||"ArrowUp"===t.key||"ArrowDown"===t.key||"Home"===t.key||hWt&&"a"===t.key&&!0===t.ctrlKey))(n)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){this.selectionChangeDeadline=Date.now()+100,this.isListening||(this.isListening=!0,document.addEventListener("selectionchange",()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()},{once:!0}))}handleSelectionChange(){const n=document.getSelection();if(!n)return;const e=n.getRangeAt(0);if(!0!==e.collapsed||0!==e.startOffset)return;const i=this.quill.scroll.find(e.startContainer);if(!(i instanceof _h&&i.uiNode))return;const s=document.createRange();s.setStartAfter(i.uiNode),s.setEndAfter(i.uiNode),n.removeAllRanges(),n.addRange(s)}}});const hK=st,bWt=new class gWt extends mh{add(n,e){let i=0;if("+1"===e||"-1"===e){const s=this.value(n)||0;i="+1"===e?s+1:s-1}else"number"==typeof e&&(i=e);return 0===i?(this.remove(n),!0):super.add(n,i.toString())}canAdd(n,e){return super.canAdd(n,e)||super.canAdd(n,parseInt(e,10))}value(n){return parseInt(super.value(n),10)||void 0}}("indent","ql-indent",{scope:vn.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),vWt=(()=>class t extends wu{static blotName="blockquote";static tagName="blockquote"})(),yWt=(()=>class t extends wu{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}})();let pK=(()=>{class t extends dy{}return t.blotName="list-container",t.tagName="OL",t})(),fK=(()=>{class t extends wu{static create(e){const i=super.create();return i.setAttribute("data-list",e),i}static formats(e){return e.getAttribute("data-list")||void 0}static register(){st.register(pK)}constructor(e,i){super(e,i);const s=i.ownerDocument.createElement("span"),r=o=>{if(!e.isEnabled())return;const a=this.statics.formats(i,e);"checked"===a?(this.format("list","unchecked"),o.preventDefault()):"unchecked"===a&&(this.format("list","checked"),o.preventDefault())};s.addEventListener("mousedown",r),s.addEventListener("touchstart",r),this.attachUI(s)}format(e,i){e===this.statics.blotName&&i?this.domNode.setAttribute("data-list",i):super.format(e,i)}}return t.blotName="list",t.tagName="LI",t})();pK.allowedChildren=[fK],fK.requiredContainer=pK;const mK=(()=>class t extends ag{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}})(),wWt=(()=>class t extends mK{static blotName="italic";static tagName=["EM","I"]})();let RP=(()=>class t extends ag{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const i=super.create(e);return i.setAttribute("href",this.sanitize(e)),i.setAttribute("rel","noopener noreferrer"),i.setAttribute("target","_blank"),i}static formats(e){return e.getAttribute("href")}static sanitize(e){return KEe(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,i){e===this.statics.blotName&&i?this.domNode.setAttribute("href",this.constructor.sanitize(i)):super.format(e,i)}})();function KEe(t,n){const e=document.createElement("a");e.href=t;const i=e.href.slice(0,e.href.indexOf(":"));return n.indexOf(i)>-1}const CWt=(()=>class t extends ag{static blotName="script";static tagName=["SUB","SUP"];static create(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):super.create(e)}static formats(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}})(),SWt=(()=>class t extends mK{static blotName="strike";static tagName=["S","STRIKE"]})(),xWt=(()=>class t extends ag{static blotName="underline";static tagName="U"})(),EWt=(()=>class t extends eK{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(null==window.katex)throw new Error("Formula module requires KaTeX.");const i=super.create(e);return"string"==typeof e&&(window.katex.render(e,i,{throwOnError:!1,errorColor:"#f00"}),i.setAttribute("data-value",e)),i}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}})(),XEe=["alt","height","width"],TWt=(()=>class t extends yu{static blotName="image";static tagName="IMG";static create(e){const i=super.create(e);return"string"==typeof e&&i.setAttribute("src",this.sanitize(e)),i}static formats(e){return XEe.reduce((i,s)=>(e.hasAttribute(s)&&(i[s]=e.getAttribute(s)),i),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return KEe(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,i){XEe.indexOf(e)>-1?i?this.domNode.setAttribute(e,i):this.domNode.removeAttribute(e):super.format(e,i)}})(),YEe=["height","width"],IWt=(()=>class t extends bd{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const i=super.create(e);return i.setAttribute("frameborder","0"),i.setAttribute("allowfullscreen","true"),i.setAttribute("src",this.sanitize(e)),i}static formats(e){return YEe.reduce((i,s)=>(e.hasAttribute(s)&&(i[s]=e.getAttribute(s)),i),{})}static sanitize(e){return RP.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,i){YEe.indexOf(e)>-1?i?this.domNode.setAttribute(e,i):this.domNode.removeAttribute(e):super.format(e,i)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}})(),hk=new mh("code-token","hljs",{scope:vn.INLINE});let pk=(()=>{class t extends ag{static formats(e,i){for(;null!=e&&e!==i.domNode;){if(e.classList&&e.classList.contains(Ql.className))return super.formats(e,i);e=e.parentNode}}constructor(e,i,s){super(e,i,s),hk.add(this.domNode,s)}format(e,i){e!==t.blotName?super.format(e,i):i?hk.add(this.domNode,i):(hk.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),hk.value(this.domNode)||this.unwrap()}}return t.blotName="code-token",t.className="ql-token",t})();class yd extends Ql{static create(n){const e=super.create(n);return"string"==typeof n&&e.setAttribute("data-language",n),e}static formats(n){return n.getAttribute("data-language")||"plain"}static register(){}format(n,e){n===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(n,e)}replaceWith(n,e){return this.formatAt(0,this.length(),pk.blotName,!1),super.replaceWith(n,e)}}let FP=(()=>{class t extends hy{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,i){e===yd.blotName&&(this.forceNext=!0,this.children.forEach(s=>{s.format(e,i)}))}formatAt(e,i,s,r){s===yd.blotName&&(this.forceNext=!0),super.formatAt(e,i,s,r)}highlight(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==this.children.head)return;const r=`${Array.from(this.domNode.childNodes).filter(a=>a!==this.uiNode).map(a=>a.textContent).join("\n")}\n`,o=yd.formats(this.children.head.domNode);if(i||this.forceNext||this.cachedText!==r){if(r.trim().length>0||null==this.cachedText){const a=this.children.reduce((c,u)=>c.concat(yEe(u,!1)),new Yt),l=e(r,o);a.diff(l).reduce((c,u)=>{let{retain:d,attributes:h}=u;return d?(h&&Object.keys(h).forEach(p=>{[yd.blotName,pk.blotName].includes(p)&&this.formatAt(c,d,p,h[p])}),c+d):c},0)}this.cachedText=r,this.forceNext=!1}}html(e,i){const[s]=this.children.find(e);return`<pre data-language="${s?yd.formats(s.domNode):"plain"}">\n${EP(this.code(e,i))}\n</pre>`}optimize(e){if(super.optimize(e),null!=this.parent&&null!=this.children.head&&null!=this.uiNode){const i=yd.formats(this.children.head.domNode);i!==this.uiNode.value&&(this.uiNode.value=i)}}}return t.allowedChildren=[yd],t})();yd.requiredContainer=FP,yd.allowedChildren=[pk,TP,gh,Zf];class ZEe extends Rp{static register(){st.register(pk,!0),st.register(yd,!0),st.register(FP,!0)}constructor(n,e){if(super(n,e),null==this.options.hljs)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((i,s)=>{let{key:r}=s;return i[r]=!0,i},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(st.events.SCROLL_BLOT_MOUNT,n=>{if(!(n instanceof FP))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(i=>{let{key:s,label:r}=i;const o=e.ownerDocument.createElement("option");o.textContent=r,o.setAttribute("value",s),e.appendChild(o)}),e.addEventListener("change",()=>{n.format(yd.blotName,e.value),this.quill.root.focus(),this.highlight(n,!0)}),null==n.uiNode&&(n.attachUI(e),n.children.head&&(e.value=yd.formats(n.children.head.domNode)))})}initTimer(){let n=null;this.quill.on(st.events.SCROLL_OPTIMIZE,()=>{n&&clearTimeout(n),n=setTimeout(()=>{this.highlight(),n=null},this.options.interval)})}highlight(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.quill.selection.composing)return;this.quill.update(st.sources.USER);const i=this.quill.getSelection();(null==n?this.quill.scroll.descendants(FP):[n]).forEach(r=>{r.highlight(this.highlightBlot,e)}),this.quill.update(st.sources.SILENT),null!=i&&this.quill.setSelection(i,st.sources.SILENT)}highlightBlot(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plain";if(e=this.languages[e]?e:"plain","plain"===e)return EP(n).split("\n").reduce((s,r,o)=>(0!==o&&s.insert("\n",{[Ql.blotName]:e}),s.insert(r)),new Yt);const i=this.quill.root.ownerDocument.createElement("div");return i.classList.add(Ql.className),i.innerHTML=((t,n,e)=>{if("string"==typeof t.versionString){const i=t.versionString.split(".")[0];if(parseInt(i,10)>=11)return t.highlight(e,{language:n}).value}return t.highlight(n,e).value})(this.options.hljs,e,n),cK(this.quill.scroll,i,[(s,r)=>{const o=hk.value(s);return o?r.compose((new Yt).retain(r.length(),{[pk.blotName]:o})):r}],[(s,r)=>s.data.split("\n").reduce((o,a,l)=>(0!==l&&o.insert("\n",{[Ql.blotName]:e}),o.insert(a)),r)],new WeakMap)}}ZEe.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};let Jf=(()=>{class t extends wu{static blotName="table";static tagName="TD";static create(e){const i=super.create();return i.setAttribute("data-row",e||gK()),i}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,i){e===t.blotName&&i?this.domNode.setAttribute("data-row",i):super.format(e,i)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}return t})(),fy=(()=>class t extends dy{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&null!=this.next.children.head){const e=this.children.head.formats(),i=this.children.tail.formats(),s=this.next.children.head.formats(),r=this.next.children.tail.formats();return e.table===i.table&&e.table===s.table&&e.table===r.table}return!1}optimize(e){super.optimize(e),this.children.forEach(i=>{if(null==i.next)return;const s=i.formats(),r=i.next.formats();if(s.table!==r.table){const o=this.splitAfter(i);o&&o.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}})(),cg=(()=>class t extends dy{static blotName="table-body";static tagName="TBODY"})(),_K=(()=>{class t extends dy{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(fy),i=e.reduce((s,r)=>Math.max(r.children.length,s),0);e.forEach(s=>{new Array(i-s.children.length).fill(0).forEach(()=>{let r;null!=s.children.head&&(r=Jf.formats(s.children.head.domNode));const o=this.scroll.create(Jf.blotName,r);s.appendChild(o),o.optimize()})})}cells(e){return this.rows().map(i=>i.children.at(e))}deleteColumn(e){const[i]=this.descendant(cg);null==i||null==i.children.head||i.children.forEach(s=>{const r=s.children.at(e);r?.remove()})}insertColumn(e){const[i]=this.descendant(cg);null==i||null==i.children.head||i.children.forEach(s=>{const r=s.children.at(e),o=Jf.formats(s.children.head.domNode),a=this.scroll.create(Jf.blotName,o);s.insertBefore(a,r)})}insertRow(e){const[i]=this.descendant(cg);if(null==i||null==i.children.head)return;const s=gK(),r=this.scroll.create(fy.blotName);i.children.head.children.forEach(()=>{const a=this.scroll.create(Jf.blotName,s);r.appendChild(a)});const o=i.children.at(e);i.insertBefore(r,o)}rows(){const e=this.children.head;return null==e?[]:e.children.map(i=>i)}}return t.allowedChildren=[cg],t})();function gK(){return`row-${Math.random().toString(36).slice(2,6)}`}cg.requiredContainer=_K,cg.allowedChildren=[fy],fy.requiredContainer=cg,fy.allowedChildren=[Jf],Jf.requiredContainer=fy;const QEe=cy("quill:toolbar");let JEe=(()=>{class t extends Rp{constructor(e,i){if(super(e,i),Array.isArray(this.options.container)){const s=document.createElement("div");s.setAttribute("role","toolbar"),function MWt(t,n){Array.isArray(n[0])||(n=[n]),n.forEach(e=>{const i=document.createElement("span");i.classList.add("ql-formats"),e.forEach(s=>{if("string"==typeof s)eTe(i,s);else{const r=Object.keys(s)[0],o=s[r];Array.isArray(o)?function NWt(t,n,e){const i=document.createElement("select");i.classList.add(`ql-${n}`),e.forEach(s=>{const r=document.createElement("option");!1!==s?r.setAttribute("value",String(s)):r.setAttribute("selected","selected"),i.appendChild(r)}),t.appendChild(i)}(i,r,o):eTe(i,r,o)}}),t.appendChild(i)})}(s,this.options.container),e.container?.parentNode?.insertBefore(s,e.container),this.container=s}else this.container="string"==typeof this.options.container?document.querySelector(this.options.container):this.options.container;this.container instanceof HTMLElement?(this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{const r=this.options.handlers?.[s];r&&this.addHandler(s,r)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(st.events.EDITOR_CHANGE,()=>{const[s]=this.quill.selection.getRange();this.update(s)})):QEe.error("Container required for toolbar",this.options)}addHandler(e,i){this.handlers[e]=i}attach(e){let i=Array.from(e.classList).find(r=>0===r.indexOf("ql-"));i&&(i=i.slice(3),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null!=this.handlers[i]||null!=this.quill.scroll.query(i)?(e.addEventListener("SELECT"===e.tagName?"change":"click",r=>{let o;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;const l=e.options[e.selectedIndex];o=!l.hasAttribute("selected")&&(l.value||!1)}else o=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),r.preventDefault();this.quill.focus();const[a]=this.quill.selection.getRange();if(null!=this.handlers[i])this.handlers[i].call(this,o);else if(this.quill.scroll.query(i).prototype instanceof yu){if(o=prompt(`Enter ${i}`),!o)return;this.quill.updateContents((new Yt).retain(a.index).delete(a.length).insert({[i]:o}),st.sources.USER)}else this.quill.format(i,o,st.sources.USER);this.update(a)}),this.controls.push([i,e])):QEe.warn("ignoring attaching to nonexistent format",i,e))}update(e){const i=null==e?{}:this.quill.getFormat(e);this.controls.forEach(s=>{const[r,o]=s;if("SELECT"===o.tagName){let a=null;if(null==e)a=null;else if(null==i[r])a=o.querySelector("option[selected]");else if(!Array.isArray(i[r])){let l=i[r];"string"==typeof l&&(l=l.replace(/"/g,'\\"')),a=o.querySelector(`option[value="${l}"]`)}null==a?(o.value="",o.selectedIndex=-1):a.selected=!0}else if(null==e)o.classList.remove("ql-active"),o.setAttribute("aria-pressed","false");else if(o.hasAttribute("value")){const a=i[r],l=a===o.getAttribute("value")||null!=a&&a.toString()===o.getAttribute("value")||null==a&&!o.getAttribute("value");o.classList.toggle("ql-active",l),o.setAttribute("aria-pressed",l.toString())}else{const a=null!=i[r];o.classList.toggle("ql-active",a),o.setAttribute("aria-pressed",a.toString())}})}}return t.DEFAULTS={},t})();function eTe(t,n,e){const i=document.createElement("button");i.setAttribute("type","button"),i.classList.add(`ql-${n}`),i.setAttribute("aria-pressed","false"),null!=e?(i.value=e,i.setAttribute("aria-label",`${n}: ${e}`)):i.setAttribute("aria-label",n),t.appendChild(i)}JEe.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(null!=t)if(0===t.length){const n=this.quill.getFormat();Object.keys(n).forEach(e=>{null!=this.quill.scroll.query(e,vn.INLINE)&&this.quill.format(e,!1,st.sources.USER)})}else this.quill.removeFormat(t.index,t.length,st.sources.USER)},direction(t){const{align:n}=this.quill.getFormat();"rtl"===t&&null==n?this.quill.format("align","right",st.sources.USER):!t&&"right"===n&&this.quill.format("align",!1,st.sources.USER),this.quill.format("direction",t,st.sources.USER)},indent(t){const n=this.quill.getSelection(),e=this.quill.getFormat(n),i=parseInt(e.indent||0,10);if("+1"===t||"-1"===t){let s="+1"===t?1:-1;"rtl"===e.direction&&(s*=-1),this.quill.format("indent",i+s,st.sources.USER)}},link(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,st.sources.USER)},list(t){const n=this.quill.getSelection(),e=this.quill.getFormat(n);this.quill.format("list","check"===t?"checked"!==e.list&&"unchecked"!==e.list&&"unchecked":t,st.sources.USER)}}};const tTe='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',fk={align:{"":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',center:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',right:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',justify:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>'},background:'<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',blockquote:'<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',bold:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',clean:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',code:tTe,"code-block":tTe,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',3:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',4:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',5:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',6:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'};let nTe=0;function iTe(t,n){t.setAttribute(n,`${"true"!==t.getAttribute(n)}`)}const LP=class UWt{constructor(n){this.select=n,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),e.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),iTe(this.label,"aria-expanded"),iTe(this.options,"aria-hidden")}buildItem(n){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const i=n.getAttribute("value");return i&&e.setAttribute("data-value",i),n.textContent&&e.setAttribute("data-label",n.textContent),e.addEventListener("click",()=>{this.selectItem(e,!0)}),e.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.selectItem(e,!0),s.preventDefault();break;case"Escape":this.escape(),s.preventDefault()}}),e}buildLabel(){const n=document.createElement("span");return n.classList.add("ql-picker-label"),n.innerHTML='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',n.tabIndex="0",n.setAttribute("role","button"),n.setAttribute("aria-expanded","false"),this.container.appendChild(n),n}buildOptions(){const n=document.createElement("span");n.classList.add("ql-picker-options"),n.setAttribute("aria-hidden","true"),n.tabIndex="-1",n.id=`ql-picker-options-${nTe}`,nTe+=1,this.label.setAttribute("aria-controls",n.id),this.options=n,Array.from(this.select.options).forEach(e=>{const i=this.buildItem(e);n.appendChild(i),!0===e.selected&&this.selectItem(i)}),this.container.appendChild(n)}buildPicker(){Array.from(this.select.attributes).forEach(n=>{this.container.setAttribute(n.name,n.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(n){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.container.querySelector(".ql-selected");n!==i&&(i?.classList.remove("ql-selected"),null!=n&&(n.classList.add("ql-selected"),this.select.selectedIndex=Array.from(n.parentNode.children).indexOf(n),n.hasAttribute("data-value")?this.label.setAttribute("data-value",n.getAttribute("data-value")):this.label.removeAttribute("data-value"),n.hasAttribute("data-label")?this.label.setAttribute("data-label",n.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let n;if(this.select.selectedIndex>-1){const i=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];n=this.select.options[this.select.selectedIndex],this.selectItem(i)}else this.selectItem(null);const e=null!=n&&n!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}},sTe=class GWt extends LP{constructor(n,e){super(n),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(i=>{i.classList.add("ql-primary")})}buildItem(n){const e=super.buildItem(n);return e.style.backgroundColor=n.getAttribute("value")||"",e}selectItem(n,e){super.selectItem(n,e);const i=this.label.querySelector(".ql-color-label"),s=n&&n.getAttribute("data-value")||"";i&&("line"===i.tagName?i.style.stroke=s:i.style.fill=s)}},rTe=class jWt extends LP{constructor(n,e){super(n),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(i=>{i.innerHTML=e[i.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(n,e){super.selectItem(n,e);const i=n||this.defaultItem;if(null!=i){if(this.label.innerHTML===i.innerHTML)return;this.label.innerHTML=i.innerHTML}}},oTe=class WWt{constructor(n,e){this.quill=n,this.boundsContainer=e||document.body,this.root=n.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,(t=>{const{overflowY:n}=getComputedStyle(t,null);return"visible"!==n&&"clip"!==n})(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=-1*this.quill.root.scrollTop+"px"}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(n){const e=n.left+n.width/2-this.root.offsetWidth/2,i=n.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${i}px`,this.root.classList.remove("ql-flip");const s=this.boundsContainer.getBoundingClientRect(),r=this.root.getBoundingClientRect();let o=0;return r.right>s.right&&(o=s.right-r.right,this.root.style.left=`${e+o}px`),r.left<s.left&&(o=s.left-r.left,this.root.style.left=`${e+o}px`),r.bottom>s.bottom&&(this.root.style.top=i-(n.bottom-n.top+(r.bottom-r.top))+"px",this.root.classList.add("ql-flip")),o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},qWt=[!1,"center","right","justify"],KWt=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],XWt=[!1,"serif","monospace"],YWt=["1","2","3",!1],ZWt=["small",!1,"large","huge"];class mk extends kP{constructor(n,e){super(n,e);const i=s=>{document.body.contains(n.root)?(null!=this.tooltip&&!this.tooltip.root.contains(s.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),null!=this.pickers&&this.pickers.forEach(r=>{r.container.contains(s.target)||r.close()})):document.body.removeEventListener("click",i)};n.emitter.listenDOM("click",document.body,i)}addModule(n){const e=super.addModule(n);return"toolbar"===n&&this.extendToolbar(e),e}buildButtons(n,e){Array.from(n).forEach(i=>{(i.getAttribute("class")||"").split(/\s+/).forEach(r=>{if(r.startsWith("ql-")&&(r=r.slice(3),null!=e[r]))if("direction"===r)i.innerHTML=e[r][""]+e[r].rtl;else if("string"==typeof e[r])i.innerHTML=e[r];else{const o=i.value||"";null!=o&&e[r][o]&&(i.innerHTML=e[r][o])}})})}buildPickers(n,e){this.pickers=Array.from(n).map(s=>{if(s.classList.contains("ql-align")&&(null==s.querySelector("option")&&_k(s,qWt),"object"==typeof e.align))return new rTe(s,e.align);if(s.classList.contains("ql-background")||s.classList.contains("ql-color")){const r=s.classList.contains("ql-background")?"background":"color";return null==s.querySelector("option")&&_k(s,KWt,"background"===r?"#ffffff":"#000000"),new sTe(s,e[r])}return null==s.querySelector("option")&&(s.classList.contains("ql-font")?_k(s,XWt):s.classList.contains("ql-header")?_k(s,YWt):s.classList.contains("ql-size")&&_k(s,ZWt)),new LP(s)}),this.quill.on(mn.events.EDITOR_CHANGE,()=>{this.pickers.forEach(s=>{s.update()})})}}mk.DEFAULTS=rg({},kP.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");null==t&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const n=this.quill.getSelection(!0);this.quill.uploader.upload(n,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class aTe extends oTe{constructor(n,e){super(n,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",n=>{"Enter"===n.key?(this.save(),n.preventDefault()):"Escape"===n.key&&(this.cancel(),n.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null==this.textbox)return;null!=e?this.textbox.value=e:n!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const i=this.quill.getBounds(this.quill.selection.savedRange);null!=i&&this.position(i),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${n}`)||""),this.root.setAttribute("data-mode",n)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:n}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",n,mn.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",n,mn.sources.USER)),this.quill.root.scrollTop=e;break}case"video":n=function QWt(t){let n=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return n?`${n[1]||"https"}://www.youtube.com/embed/${n[2]}?showinfo=0`:(n=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${n[1]||"https"}://player.vimeo.com/video/${n[2]}/`:t}(n);case"formula":{if(!n)break;const e=this.quill.getSelection(!0);if(null!=e){const i=e.index+e.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),n,mn.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(i+1," ",mn.sources.USER),this.quill.setSelection(i+2,mn.sources.USER)}break}}this.textbox.value="",this.hide()}}function _k(t,n){let e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.forEach(i=>{const s=document.createElement("option");i===e?s.setAttribute("selected","selected"):s.setAttribute("value",String(i)),t.appendChild(s)})}const JWt=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class eqt extends aTe{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(n,e){super(n,e),this.quill.on(mn.events.EDITOR_CHANGE,(i,s,r,o)=>{if(i===mn.events.SELECTION_CHANGE)if(null!=s&&s.length>0&&o===mn.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const a=this.quill.getLines(s.index,s.length);if(1===a.length){const l=this.quill.getBounds(s);null!=l&&this.position(l)}else{const l=a[a.length-1],c=this.quill.getIndex(l),u=Math.min(l.length()-1,s.index+s.length-c),d=this.quill.getBounds(new uy(c,u));null!=d&&this.position(d)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(mn.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const n=this.quill.getSelection();if(null!=n){const e=this.quill.getBounds(n);null!=e&&this.position(e)}},1)})}cancel(){this.show()}position(n){const e=super.position(n),i=this.root.querySelector(".ql-tooltip-arrow");return i.style.marginLeft="",0!==e&&(i.style.marginLeft=-1*e-i.offsetWidth/2+"px"),e}}class lTe extends mk{constructor(n,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=JWt),super(n,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(n){this.tooltip=new eqt(this.quill,this.options.bounds),null!=n.container&&(this.tooltip.root.appendChild(n.container),this.buildButtons(n.container.querySelectorAll("button"),fk),this.buildPickers(n.container.querySelectorAll("select"),fk))}}lTe.DEFAULTS=rg({},mk.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,st.sources.USER)}}}}});const tqt=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class nqt extends aTe{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",n=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),n.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",n=>{if(null!=this.linkRange){const e=this.linkRange;this.restoreFocus(),this.quill.formatText(e,"link",!1,mn.sources.USER),delete this.linkRange}n.preventDefault(),this.hide()}),this.quill.on(mn.events.SELECTION_CHANGE,(n,e,i)=>{if(null!=n){if(0===n.length&&i===mn.sources.USER){const[s,r]=this.quill.scroll.descendant(RP,n.index);if(null!=s){this.linkRange=new uy(n.index-r,s.length());const o=RP.formats(s.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const a=this.quill.getBounds(this.linkRange);return void(null!=a&&this.position(a))}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class cTe extends mk{constructor(n,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=tqt),super(n,e),this.quill.container.classList.add("ql-snow")}extendToolbar(n){null!=n.container&&(n.container.classList.add("ql-snow"),this.buildButtons(n.container.querySelectorAll("button"),fk),this.buildPickers(n.container.querySelectorAll("select"),fk),this.tooltip=new nqt(this.quill,this.options.bounds),n.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(e,i)=>{n.handlers.link.call(n,!i.format.link)}))}}cTe.DEFAULTS=rg({},mk.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const n=this.quill.getSelection();if(null==n||0===n.length)return;let e=this.quill.getText(n);/^\S+@\S+\.\S+$/.test(e)&&0!==e.indexOf("mailto:")&&(e=`mailto:${e}`);const{tooltip:i}=this.quill.theme;i.edit("link",e)}else this.quill.format("link",!1,st.sources.USER)}}}}});const iqt=cTe;hK.register({"attributors/attribute/direction":OEe,"attributors/class/align":AEe,"attributors/class/background":CHt,"attributors/class/color":wHt,"attributors/class/direction":REe,"attributors/class/font":PEe,"attributors/class/size":BEe,"attributors/style/align":MEe,"attributors/style/background":rK,"attributors/style/color":sK,"attributors/style/direction":FEe,"attributors/style/font":$Ee,"attributors/style/size":VEe},!0),hK.register({"formats/align":AEe,"formats/direction":REe,"formats/indent":bWt,"formats/background":rK,"formats/color":sK,"formats/font":PEe,"formats/size":BEe,"formats/blockquote":vWt,"formats/code-block":Ql,"formats/header":yWt,"formats/list":fK,"formats/bold":mK,"formats/code":SHt,"formats/italic":wWt,"formats/link":RP,"formats/script":CWt,"formats/strike":SWt,"formats/underline":xWt,"formats/formula":EWt,"formats/image":TWt,"formats/video":IWt,"modules/syntax":ZEe,"modules/table":class DWt extends Rp{static register(){st.register(Jf),st.register(fy),st.register(cg),st.register(_K)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(_K).forEach(n=>{n.balanceCells()})}deleteColumn(){const[n,,e]=this.getTable();null!=e&&(n.deleteColumn(e.cellOffset()),this.quill.update(st.sources.USER))}deleteRow(){const[,n]=this.getTable();null!=n&&(n.remove(),this.quill.update(st.sources.USER))}deleteTable(){const[n]=this.getTable();if(null==n)return;const e=n.offset();n.remove(),this.quill.update(st.sources.USER),this.quill.setSelection(e,st.sources.SILENT)}getTable(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(null==n)return[null,null,null,-1];const[e,i]=this.quill.getLine(n.index);if(null==e||e.statics.blotName!==Jf.blotName)return[null,null,null,-1];const s=e.parent;return[s.parent.parent,s,e,i]}insertColumn(n){const e=this.quill.getSelection();if(!e)return;const[i,s,r]=this.getTable(e);if(null==r)return;const o=r.cellOffset();i.insertColumn(o+n),this.quill.update(st.sources.USER);let a=s.rowOffset();0===n&&(a+=1),this.quill.setSelection(e.index+a,e.length,st.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(n){const e=this.quill.getSelection();if(!e)return;const[i,s,r]=this.getTable(e);if(null==r)return;const o=s.rowOffset();i.insertRow(o+n),this.quill.update(st.sources.USER),n>0?this.quill.setSelection(e,st.sources.SILENT):this.quill.setSelection(e.index+s.children.length,e.length,st.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(n,e){const i=this.quill.getSelection();if(null==i)return;const s=new Array(n).fill(0).reduce(r=>{const o=new Array(e).fill("\n").join("");return r.insert(o,{table:gK()})},(new Yt).retain(i.index));this.quill.updateContents(s,st.sources.USER),this.quill.setSelection(i.index,st.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(st.events.SCROLL_OPTIMIZE,n=>{n.some(e=>!!["TD","TR","TBODY","TABLE"].includes(e.target.tagName)&&(this.quill.once(st.events.TEXT_CHANGE,(i,s,r)=>{r===st.sources.USER&&this.balanceTables()}),!0))})}},"modules/toolbar":JEe,"themes/bubble":lTe,"themes/snow":iqt,"ui/icons":fk,"ui/picker":LP,"ui/icon-picker":rTe,"ui/color-picker":sTe,"ui/tooltip":oTe},!0);const sqt=hK,rqt=["container"],oqt=["editor"];let uTe=(()=>{class t extends hn{constructor(){super(...arguments),this.placeholder="",this.readonly=!1,this.images_allowed=!1,this._updateFn=()=>this.setValue(this._editor.root.innerHTML),this.registerOnChange=e=>this._onChange=e,this.registerOnTouched=e=>this._onTouch=e}ngOnChanges(e){e.images_allowed&&this.timeout("init",()=>this._initialiseEditor())}ngAfterViewInit(){this.timeout("init",()=>this._initialiseEditor())}setValue(e){this._onChange&&this._onChange(e)}writeValue(e){this.timeout("write",()=>{if(this._editor){const i=this._editor.clipboard.convert({html:e});this._editor.setContents(i,"silent")}else this.timeout("write",()=>this.writeValue(e))})}_initialiseEditor(){if(!this._editor_el?.nativeElement||!this._container_el?.nativeElement)return this.timeout("init",()=>this._initialiseEditor());const e=[[{font:[]}],[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{align:[]}]];this.images_allowed&&e.push(["image","link"]),this._editor&&(this.unsub("changes"),this._editor_el.nativeElement.innerHTML="",delete this._editor),this._editor=new sqt(this._editor_el.nativeElement,{bounds:this._container_el.nativeElement,placeholder:this.placeholder,modules:{toolbar:{container:e,handlers:{image:()=>this._embedImage(),link:()=>this._embedAttachment()}}},readOnly:this.readonly,theme:"snow"}),this._editor.on("text-change",this._updateFn),this.subscription("changes",()=>this._editor.off("text-change",this._updateFn))}_embedImage(){if(!this._editor)return;const e=this._editor.getSelection();if(!e)return;const{index:i}=e;var s=document.createElement("input");s.setAttribute("type","file"),s.setAttribute("accept","image/*"),s.click(),s.onchange=()=>{Zz(s.files[0],!0).subscribe(({link:o,progress:a})=>{!o||100!==a||this._editor.insertEmbed(i,"image",o)})}}_embedAttachment(){if(!this._editor)return;const e=this._editor.getSelection();if(e){var s=document.createElement("input");s.setAttribute("type","file"),s.click(),s.onchange=()=>{var r=s.files[0];Zz(r,!0).subscribe(({link:o,progress:a})=>{!o||100!==a||(this._editor.insertText(e.index,r.name,"link",o),this._editor.setSelection(e.index+r.name.length))})}}}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=$n(t)))(s||t)}})();static#t=this.\u0275cmp=Se({type:t,selectors:[["rich-text-input"]],viewQuery:function(i,s){if(1&i&&(Gt(rqt,5),Gt(oqt,5)),2&i){let r;nt(r=it())&&(s._container_el=r.first),nt(r=it())&&(s._editor_el=r.first)}},inputs:{placeholder:"placeholder",readonly:"readonly",images_allowed:"images_allowed"},features:[bt([{provide:Ki,useExisting:wn(()=>t),multi:!0}]),Ze,Rn],decls:4,vars:0,consts:[["container",""],["editor",""],[1,"absolute","inset-0"],[1,"h-full"]],template:function(i,s){1&i&&(m(0,"div",2,0),q(2,"div",3,1),_())},styles:["[_nghost-%COMP%]{display:block;position:relative;min-height:8rem;margin-bottom:4rem}"]})}return t})();const _qt=["image_list"],gqt=["file_input"];function bqt(t,n){if(1&t){const e=se();m(0,"div",17),q(1,"img",18),m(2,"div",19),q(3,"div",20),m(4,"div",21)(5,"button",22),P("click",function(){const s=B(e).$implicit;return V(E().copyLink(s))}),m(6,"app-icon"),S(7,"link"),_()(),m(8,"button",22),P("click",function(){const s=B(e).$implicit;return V(E().viewImage(s))}),m(9,"app-icon"),S(10,"visibility"),_()(),m(11,"button",22),P("click",function(){const s=B(e).$implicit;return V(E().removeImage(s))}),m(12,"app-icon"),S(13,"close"),_()()()()()}if(2&t){const e=n.$implicit;Hn("transform","translate(-"+E().offset+"00%)"),b(),C("source",e)}}function vqt(t,n){1&t&&q(0,"mat-progress-spinner",27),2&t&&C("value",E().$implicit.progress)("diameter",64)}function yqt(t,n){1&t&&(m(0,"app-icon",28),S(1,"warning"),_())}function wqt(t,n){1&t&&(m(0,"div",29)(1,"app-icon",30),S(2,"refresh"),_()())}function Cqt(t,n){if(1&t){const e=se();m(0,"div",23),P("click",function(){const s=B(e).$implicit;return V(E().retryUpload(s))}),O(1,vqt,1,2,"mat-progress-spinner",24)(2,yqt,2,0,"app-icon",25)(3,wqt,3,0,"div",26),_()}if(2&t){const e=n.$implicit;Hn("transform","translate(-"+E().offset+"00%)"),C("matTooltip",e.error),b(),C("ngIf",!e.error),b(),C("ngIf",e.error),b(),C("ngIf",e.error)}}function Sqt(t,n){if(1&t){const e=se();m(0,"button",31),P("click",function(){B(e);const s=E();return V(s.offset=s.offset-1)}),m(1,"app-icon"),S(2,"chevron_left"),_()()}2&t&&C("disabled",0===E().offset)}function xqt(t,n){if(1&t){const e=se();m(0,"button",32),P("click",function(){B(e);const s=E();return V(s.offset=s.offset+1)}),m(1,"app-icon"),S(2,"chevron_right"),_()()}if(2&t){const e=E();C("disabled",e.offset>=e.length-e.view_space)}}function Eqt(t,n){if(1&t){const e=se();m(0,"mat-chip-row",33),P("removed",function(){const s=B(e).$implicit;return V(E().removeImage(s))}),m(1,"div",34),S(2),_(),m(3,"button",35)(4,"app-icon"),S(5,"cancel"),_()()()}if(2&t){const e=n.$implicit;b(2),Ye(e),b(),wt("aria-label","Remove "+e)}}let bK=(()=>{class t extends hn{get length(){return this.list.length+this._upload_list.getValue().length+1}constructor(e,i,s){super(),this._clipboard=e,this._uploads=i,this._dialog=s,this.list=[],this.upload_ids=new at([]),this._upload_list=new at([]),this.upload_list=this._upload_list.asObservable(),this.offset=0,this.view_space=0,this.separators=[188,13],this.uploads=Vt([this.upload_list,this.upload_ids]).pipe(me(([r,o])=>r.filter(a=>o.includes(a.id)))),this.registerOnChange=r=>this._onChange=r,this.registerOnTouched=r=>this._onTouch=r}ngAfterViewInit(){this.timeout("init_view_space",()=>{const e=this._list_el.nativeElement.getBoundingClientRect();this.view_space=Math.floor(e.width/152)},100),this.subscription("upload_changes",this.upload_list.subscribe(e=>{const i=this.upload_ids.getValue();for(const s of i){const r=e.find(o=>o.id===s);r&&r.progress>=100&&(this.addImageUrl(r.link),this.upload_ids.next(this.upload_ids.getValue().filter(o=>o!==s)))}}))}copyLink(e){this._clipboard.copy(e),ZO("Copied image URL to clipboard")}viewImage(e){this._dialog.open(fme,{data:e})}removeImage(e){this.setValue(this.list.filter(i=>i!==e))}addImage(e){e.value&&(this.setValue(Ss([...this.list,e.value])),e.chipInput.inputElement.value="")}addImageUrl(e){this.setValue(Ss([...this.list,e]))}retryUpload(e){e.error&&(e.error=null,e.upload.resume())}uploadImages(e){var i=this;return z(function*(){const s=e.target;if(s?.files){const r=s.files;if(r.length){i.interval("update_status",()=>i._updateUploadHistory());for(let o=0;o<r.length;o++){const a=yield i._uploads.uploadFileWithPermissions(r[o]);i.upload_ids.next([...i.upload_ids.getValue(),a]),i._file_input.nativeElement.value=""}}}})()}setValue(e){this.list=e,this._onChange&&this._onChange(e)}writeValue(e){this.list=e||[]}_updateUploadHistory(){var e=this;return z(function*(){const i=e.upload_ids.getValue();if(0===i.length)return;const r=(yield e._uploads.upload_list.pipe(Zn(1)).toPromise()).filter(a=>i.find(l=>l===a.id)),o=r.filter(a=>a.progress>=100);e._upload_list.next(r),o.forEach(a=>delete a.upload),o.length>=i.length&&e.clearInterval("update_status")})()}static#e=this.\u0275fac=function(i){return new(i||t)(I(bue),I(gtt),I(Tr))};static#t=this.\u0275cmp=Se({type:t,selectors:[["image-list-field"]],viewQuery:function(i,s){if(1&i&&(Gt(_qt,5),Gt(gqt,5)),2&i){let r;nt(r=it())&&(s._list_el=r.first),nt(r=it())&&(s._file_input=r.first)}},features:[bt([{provide:Ki,useExisting:wn(()=>t),multi:!0}]),Ze],decls:19,vars:12,consts:()=>{let e,i;return e=$localize`:␟dc952a36d53a7092578b8706e3c6e28fd59866bf␟7586116958417863153:Add image via URL`,i=$localize`:␟3f0243e1118dafecaa05696a3dffcbfb83295f9b␟889671581456916004:Upload Image(s)`,[["image_list",""],["file_input",""],["chipList",""],i,["images","",1,"space-x-2","py-2","overflow-hidden","mb-2","w-full","flex","items-center","relative",3,"resize"],["image","",1,"relative","rounded","border-2","border-base-200","border-dashed","flex-shrink-0","flex","flex-col","items-center","justify-center","h-32","w-36","hover:bg-base-content/10",":bg-base-100/10","cursor-pointer"],[1,"text-4xl","opacity-60"],[1,"opacity-60"],["type","file",1,"absolute","inset-0","opacity-0","h-32","w-32","cursor-pointer",3,"change"],["image","","class","bg-center bg-cover h-32 w-36 relative rounded overflow-hidden flex-shrink-0 bg-base-200",3,"transform",4,"ngFor","ngForOf"],["image","","class","bg-center bg-cover h-32 w-36 rounded border border-base-content/10 /5 bg-base-200  flex items-center justify-center flex-shrink-0",3,"transform","matTooltip","click",4,"ngFor","ngForOf"],["icon","","matRipple","","class","absolute top-1/2 left-0 transform -translate-y-1/2 bg-base-100",3,"disabled","click",4,"ngIf"],["icon","","matRipple","","class","absolute top-1/2 right-0 transform -translate-y-1/2 bg-base-100",3,"disabled","click",4,"ngIf"],["appearance","outline",1,"w-full"],["aria-label","Image List"],[3,"removed",4,"ngFor","ngForOf"],["placeholder",e,3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],["image","",1,"bg-center","bg-cover","h-32","w-36","relative","rounded","overflow-hidden","flex-shrink-0","bg-base-200"],["auth","",1,"object-contain","absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","z-10","pointer-events-none",3,"source"],["overlay","",1,"absolute","inset-0","text-base-100","z-20"],["bg","",1,"absolute","inset-0","opacity-0","bg-black"],["actions","",1,"absolute","top-0","left-0","right-0","flex","items-center","justify-center","space-x-2","opacity-0"],["icon","",3,"click"],["image","",1,"bg-center","bg-cover","h-32","w-36","rounded","border","border-base-content/10","/5","bg-base-200","flex","items-center","justify-center","flex-shrink-0",3,"click","matTooltip"],["mode","determinate",3,"value","diameter",4,"ngIf"],["class","text-error text-6xl",4,"ngIf"],["overlay","","class","absolute inset-0 hover:bg-base-content hover:bg-opacity-50 text-base-100 flex items-center justify-center",4,"ngIf"],["mode","determinate",3,"value","diameter"],[1,"text-error","text-6xl"],["overlay","",1,"absolute","inset-0","hover:bg-base-content","hover:bg-opacity-50","text-base-100","flex","items-center","justify-center"],[1,"text-3xl","opacity-0"],["icon","","matRipple","",1,"absolute","top-1/2","left-0","transform","-translate-y-1/2","bg-base-100",3,"click","disabled"],["icon","","matRipple","",1,"absolute","top-1/2","right-0","transform","-translate-y-1/2","bg-base-100",3,"click","disabled"],[3,"removed"],[1,"truncate","max-w-md"],["matChipRemove",""]]},template:function(i,s){if(1&i){const r=se();m(0,"div",4,0),P("resize",function(){return B(r),V(s.ngAfterViewInit())},0,Gc),m(2,"div",5)(3,"app-icon",6),S(4,"add"),_(),m(5,"p",7),oe(6,3),_(),m(7,"input",8,1),P("change",function(a){return B(r),V(s.uploadImages(a))}),_()(),O(9,bqt,14,3,"div",9)(10,Cqt,4,6,"div",10),H(11,"async"),O(12,Sqt,3,1,"button",11)(13,xqt,3,1,"button",12),_(),m(14,"mat-form-field",13)(15,"mat-chip-grid",14,2),O(17,Eqt,6,2,"mat-chip-row",15),_(),m(18,"input",16),P("matChipInputTokenEnd",function(a){return B(r),V(s.addImage(a))}),_()()}if(2&i){const r=xt(16);b(2),Hn("transform","translate(-"+s.offset+"00%)"),b(7),C("ngForOf",s.list),b(),C("ngForOf",ne(11,10,s.uploads)),b(2),C("ngIf",s.length>s.view_space),b(),C("ngIf",s.length>s.view_space),b(4),C("ngForOf",s.list),b(),C("matChipInputFor",r)("matChipInputSeparatorKeyCodes",s.separators)("matChipInputAddOnBlur",!0)}},styles:["[_nghost-%COMP%]{width:100%}[overlay][_ngcontent-%COMP%]{transition:background .2s}[image][_ngcontent-%COMP%]:hover   [actions][_ngcontent-%COMP%], [image][_ngcontent-%COMP%]:hover > app-icon[_ngcontent-%COMP%]{opacity:1!important}[image][_ngcontent-%COMP%]:hover   [bg][_ngcontent-%COMP%]{opacity:.4!important}[actions][_ngcontent-%COMP%], [image][_ngcontent-%COMP%] > app-icon[_ngcontent-%COMP%]{transition:opacity .2s}[image][_ngcontent-%COMP%]{transition:transform .2s}"]})}return t})();function Tqt(t,n){1&t&&(m(0,"h2",24),S(1," Repeat on "),_())}function Iqt(t,n){if(1&t){const e=se();m(0,"div",25)(1,"button",26),P("click",function(){return B(e),V(E().toggleDayOfWeek(0))}),S(2," S "),_(),m(3,"button",26),P("click",function(){return B(e),V(E().toggleDayOfWeek(1))}),S(4," M "),_(),m(5,"button",26),P("click",function(){return B(e),V(E().toggleDayOfWeek(2))}),S(6," T "),_(),m(7,"button",26),P("click",function(){return B(e),V(E().toggleDayOfWeek(3))}),S(8," W "),_(),m(9,"button",26),P("click",function(){return B(e),V(E().toggleDayOfWeek(4))}),S(10," T "),_(),m(11,"button",26),P("click",function(){return B(e),V(E().toggleDayOfWeek(5))}),S(12," F "),_(),m(13,"button",26),P("click",function(){return B(e),V(E().toggleDayOfWeek(6))}),S(14," S "),_()()}if(2&t){const e=E();b(),Oe("inverse",!(null!=e.data.days_of_week&&e.data.days_of_week.includes(0))),b(2),Oe("inverse",!(null!=e.data.days_of_week&&e.data.days_of_week.includes(1))),b(2),Oe("inverse",!(null!=e.data.days_of_week&&e.data.days_of_week.includes(2))),b(2),Oe("inverse",!(null!=e.data.days_of_week&&e.data.days_of_week.includes(3))),b(2),Oe("inverse",!(null!=e.data.days_of_week&&e.data.days_of_week.includes(4))),b(2),Oe("inverse",!(null!=e.data.days_of_week&&e.data.days_of_week.includes(5))),b(2),Oe("inverse",!(null!=e.data.days_of_week&&e.data.days_of_week.includes(6)))}}let vK=(()=>{class t{constructor(e){this._data=e,this.data={...this._data.value,end:this._data.value.end||Ir(new Date,7).valueOf(),interval:this._data.value.interval||1,pattern:this._data.value.pattern?this._data.value.pattern:"weekly",occurrences:this._data.value.occurrences||1},this.ends_key="never"}toggleDayOfWeek(e){this.data.days_of_week||(this.data.days_of_week=[]),this.data.days_of_week.includes(e)?this.data.days_of_week=this.data.days_of_week.filter(i=>i!==e):this.data.days_of_week.push(e)}static#e=this.\u0275fac=function(i){return new(i||t)(I(or))};static#t=this.\u0275cmp=Se({type:t,selectors:[["recurrence-modal"]],decls:42,vars:13,consts:[["btn","","icon","","mat-dialog-close","","matRipple",""],[1,"p-4"],[1,"flex","items-center","space-x-2","mb-4"],["appearance","outline",1,"w-16"],["matInput","","type","number",3,"ngModelChange","ngModel"],["appearance","outline"],[3,"ngModelChange","ngModel"],["value","daily"],["value","weekly"],["value","month_day"],["for","repeat-on","class","mb-2",4,"ngIf"],["class","flex items-center space-x-2 mb-4","name","repeat-on",4,"ngIf"],["for","ends-at"],["name","ends-at",3,"ngModelChange","ngModel"],[1,"flex","items-center"],["value","never",3,"click"],[1,"flex","items-center","space-x-2"],["value","on"],[3,"ngModelChange","ngModel","disabled"],["value","after"],["matInput","","type","number",3,"ngModelChange","ngModel","disabled"],["matSuffix",""],[1,"px-4","py-2","flex","items-center","justify-end","border-t","border-base-200"],["btn","","matRipple","",1,"w-32",3,"click","mat-dialog-close"],["for","repeat-on",1,"mb-2"],["name","repeat-on",1,"flex","items-center","space-x-2","mb-4"],["btn","","matRipple","",1,"w-12",3,"click"]],template:function(i,s){1&i&&(m(0,"header")(1,"h2"),S(2,"Custom Recurrence"),_(),m(3,"button",0)(4,"app-icon"),S(5,"close"),_()()(),m(6,"main",1)(7,"div",2)(8,"div"),S(9,"Repeat every"),_(),m(10,"mat-form-field",3)(11,"input",4),ii("ngModelChange",function(o){return jn(s.data.interval,o)||(s.data.interval=o),o}),_()(),m(12,"mat-form-field",5)(13,"mat-select",6),ii("ngModelChange",function(o){return jn(s.data.pattern,o)||(s.data.pattern=o),o}),m(14,"mat-option",7),S(15),_(),m(16,"mat-option",8),S(17),_(),m(18,"mat-option",9),S(19),_()()()(),O(20,Tqt,2,0,"h2",10)(21,Iqt,15,14,"div",11),m(22,"h2",12),S(23,"Ends"),_(),m(24,"mat-radio-group",13),ii("ngModelChange",function(o){return jn(s.ends_key,o)||(s.ends_key=o),o}),m(25,"div",14)(26,"mat-radio-button",15),P("click",function(){return s.data.occurrences=0}),S(27," Never "),_()(),m(28,"div",16)(29,"mat-radio-button",17),S(30,"On"),_(),m(31,"a-date-field",18),ii("ngModelChange",function(o){return jn(s.data.end,o)||(s.data.end=o),o}),_()(),m(32,"div",16)(33,"mat-radio-button",19),S(34,"After"),_(),m(35,"mat-form-field",5)(36,"input",20),ii("ngModelChange",function(o){return jn(s.data.occurrences,o)||(s.data.occurrences=o),o}),_(),m(37,"span",21),S(38,"occurences"),_()()()()(),m(39,"footer",22)(40,"button",23),P("click",function(){return s.data.occurrences="never"===s.ends_key?0:s.data.occurrences}),S(41," Save "),_()()),2&i&&(b(11),ni("ngModel",s.data.interval),b(2),ni("ngModel",s.data.pattern),b(2),K(" day",1===s.data.interval?"":"s"," "),b(2),K(" week",1===s.data.interval?"":"s"," "),b(2),K(" month",1===s.data.interval?"":"s"," "),b(),C("ngIf","weekly"===s.data.pattern),b(),C("ngIf","weekly"===s.data.pattern),b(3),ni("ngModel",s.ends_key),b(7),ni("ngModel",s.data.end),C("disabled","on"!==s.ends_key),b(5),ni("ngModel",s.data.occurrences),C("disabled","after"!==s.ends_key),b(4),C("mat-dialog-close",s.data))},styles:["mat-form-field[_ngcontent-%COMP%], a-date-field[_ngcontent-%COMP%]{height:3.25rem}mat-radio-button[_ngcontent-%COMP%]{width:8rem}"]})}return t})();function dTe(t){const n=Tn(t);return n.setDate(1),n.setHours(0,0,0,0),n}function hTe(t,n){const e=Tn(t),i=Tn(n);return e.getFullYear()===i.getFullYear()&&e.getMonth()===i.getMonth()}function Aqt(t,n){if(1&t&&(m(0,"div",10),S(1),H(2,"date"),_()),2&t){const e=n.$implicit;b(),K(" ",At(2,1,null==e?null:e.id,"EE")," ")}}function Mqt(t,n){1&t&&q(0,"div",14)}function Nqt(t,n){if(1&t){const e=se();m(0,"button",11),P("click",function(){const s=B(e).$implicit;return V(E().setValue(s.id))}),S(1),H(2,"date"),O(3,Mqt,1,0,"div",12),q(4,"div",13),_()}if(2&t){const e=n.$implicit,i=E();Oe("hover:bg-base-100",e.id!==i.active_date)("!text-base-300",!e.is_month)("text-secondary-content",e.id===i.active_date)("text-base-content",e.id!==i.active_date)("bg-secondary",e.id===i.active_date)("font-normal",e.id!==i.active_date),C("disabled",e.id<i.from||e.id>i.to),b(),K(" ",At(2,15,e.id,"d")," "),b(2),C("ngIf",i.today===e.id)}}let pTe=(()=>{class t extends hn{constructor(e){super(),this._settings=e,this.from=0,this.to=10*Date.now(),this.offset_weekday=0,this.today=Ei(Date.now()).valueOf(),this.date=Date.now(),this.active_date=Ei(Date.now()).valueOf(),this.offset=0,this.date_list=[],this.registerOnChange=i=>this._onChange=i,this.registerOnTouched=i=>this._onTouch=i}ngOnInit(){this.generateDates()}ngOnChanges(e){e.offset_weekday&&this.generateDates()}setValue(e){if(e<this.from||e>=this.to)return;const i=new Date(e);this.date=qu(this.date,{date:i.getDate(),month:i.getMonth(),year:i.getFullYear()}).valueOf(),this.active_date=Ei(this.date).valueOf(),this._onChange&&this._onChange(e)}writeValue(e){this.date=e,this.active_date=Ei(e).valueOf(),this.offset=0,this.generateDates()}changeMonth(e){this.offset+=e,this.generateDates()}generateDates(){const e=this._settings.get("app.week_start")||this.offset_weekday,i=Wb(this.date,this.offset);let s=zu(dTe(i),{weekStartsOn:e});const r=Ei(Date.now()),o=[];for(;o.length<42;)o.push({id:s.valueOf(),is_past:gl(s,r),is_month:hTe(s,i)}),s=Ir(s,1);this.date_list=o}static#e=this.\u0275fac=function(i){return new(i||t)(I(nn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["date-calendar"]],inputs:{from:"from",to:"to",offset_weekday:"offset_weekday"},features:[bt([{provide:Ki,useExisting:wn(()=>t),multi:!0}]),Ze,Rn],decls:17,vars:12,consts:[[1,"p-2"],[1,"flex","items-center","justify-between"],[1,"pl-1.5","pr-2","font-medium"],[1,"flex","items-center"],["icon","","matRipple","","name","schedule-next-month",3,"click","disabled"],["icon","","matRipple","","name","schedule-previous-month",3,"click","disabled"],[1,"flex","items-center","text-sm","mb-2","pb-2","border-b","border-base-200"],["class","flex-1 opacity-60 text-center",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","flex-wrap"],["icon","","name","schedule-set-date","class","min-w-[14%] w-9 h-9 relative overflow-visible my-0.5",3,"hover:bg-base-100","!text-base-300","text-secondary-content","text-base-content","bg-secondary","font-normal","disabled","click",4,"ngFor","ngForOf"],[1,"flex-1","opacity-60","text-center"],["icon","","name","schedule-set-date",1,"min-w-[14%]","w-9","h-9","relative","overflow-visible","my-0.5",3,"click","disabled"],["class","absolute -inset-[2px] border border-secondary rounded-full overflow-hidden","matRipple","",4,"ngIf"],["matRipple","",1,"absolute","inset-0","overflow-hidden","rounded-full"],["matRipple","",1,"absolute","-inset-[2px]","border","border-secondary","rounded-full","overflow-hidden"]],template:function(i,s){1&i&&(m(0,"div",0)(1,"div",1)(2,"div",2),S(3),H(4,"date"),_(),m(5,"div",3)(6,"button",4),P("click",function(){return s.changeMonth(-1)}),m(7,"app-icon"),S(8,"chevron_left"),_()(),m(9,"button",5),P("click",function(){return s.changeMonth(1)}),m(10,"app-icon"),S(11,"chevron_right"),_()()()(),m(12,"div",6),O(13,Aqt,3,4,"div",7),H(14,"slice"),_(),m(15,"div",8),O(16,Nqt,5,18,"button",9),_()()),2&i&&(b(3),K(" ",At(4,5,(null==s.date_list[6]?null:s.date_list[6].id)||s.date,"LLLL YYYY")," "),b(3),C("disabled",(null==s.date_list[0]?null:s.date_list[0].id)<s.from),b(3),C("disabled",(null==s.date_list[34]?null:s.date_list[34].id)>s.to),b(4),C("ngForOf",zd(14,8,s.date_list,0,7)),b(3),C("ngForOf",s.date_list))},dependencies:[on,mt,Tt,St,U1,fs]})}return t})();const gk=()=>({standalone:!0});function Oqt(t,n){if(1&t&&(m(0,"mat-option",26),S(1),_()),2&t){const e=n.$implicit;C("value",e.id),b(),K(" ",e.display_name||e.name," ")}}function Rqt(t,n){1&t&&(m(0,"mat-checkbox",27),S(1," Auto Approve Bookings "),_())}function Fqt(t,n){if(1&t&&(m(0,"div",28)(1,"label",29),S(2),_(),q(3,"item-list-field",30),_()),2&t){const e=E();b(2),K("",e.form.value.rules.hidden?"Prevent":"Allow"," Booking for Groups:")}}function Lqt(t,n){1&t&&(m(0,"div",28)(1,"label",31),S(2,"Locations:"),_(),q(3,"item-list-field",32),_())}function Pqt(t,n){if(1&t&&(m(0,"div",2)(1,"label",35),S(2),_(),q(3,"a-duration-field",36),_()),2&t){const e=E(2);b(2),K("",e.form.value.rules.hidden?"Prevent":"Allow"," booking with a minimum length of:"),b(),C("min",15)("max",1440)("step",15)}}function $qt(t,n){if(1&t&&(m(0,"div",2)(1,"label",37),S(2),_(),q(3,"a-duration-field",38),_()),2&t){const e=E(2);b(2),K("",e.form.value.rules.hidden?"Prevent":"Allow"," booking with a maximum length up to:"),b(),C("min",e.form.value.conditions.min_length||15)("max",1440)("step",15)}}function Bqt(t,n){if(1&t&&(m(0,"div",33),O(1,Pqt,4,4,"div",34)(2,$qt,4,4,"div",34),_()),2&t){const e=E();b(),C("ngIf",e.available_conditions.includes("min_length")),b(),C("ngIf",e.available_conditions.includes("max_length"))}}function Vqt(t,n){if(1&t&&(m(0,"mat-option",26),S(1),_()),2&t){const e=n.$implicit;C("value",e),b(),K(" ",e," ")}}function zqt(t,n){if(1&t&&(m(0,"div",28)(1,"label",39),S(2),_(),m(3,"mat-form-field",40)(4,"mat-select",41),O(5,Vqt,2,2,"mat-option",7),_(),m(6,"mat-error"),S(7,"A valid time is required"),_()()()),2&t){const e=E();b(2),K("",e.form.value.rules.hidden?"Prevent":"Allow"," booking before:"),b(3),C("ngForOf",e.duration_blocks)}}function Uqt(t,n){if(1&t&&(m(0,"mat-option",26),S(1),_()),2&t){const e=n.$implicit;C("value",e),b(),K(" ",e," ")}}function Gqt(t,n){if(1&t&&(m(0,"div",28)(1,"label",42),S(2),_(),m(3,"mat-form-field",40)(4,"mat-select",43),O(5,Uqt,2,2,"mat-option",7),_(),m(6,"mat-error"),S(7,"A valid time is required"),_()()()),2&t){const e=E();b(2),K("",e.form.value.rules.hidden?"Prevent":"Allow"," booking after:"),b(3),C("ngForOf",e.duration_blocks)}}function jqt(t,n){if(1&t){const e=se();m(0,"div",28)(1,"label",42),S(2),_(),m(3,"div",1)(4,"a-date-field",44),P("ngModelChange",function(s){B(e);const r=E();return V(r.setIsPeriod(s,r.form.value.conditions.is_period[1]))}),_(),m(5,"a-date-field",45),P("ngModelChange",function(s){B(e);const r=E();return V(r.setIsPeriod(r.form.value.conditions.is_period[0],s))}),_()()()}if(2&t){const e=E();b(2),K("",e.form.value.rules.hidden?"Prevent":"Allow"," booking between dates:"),b(2),C("ngModel",e.form.value.conditions.is_period[0])("ngModelOptions",tn(6,gk)),b(),C("from",e.form.value.conditions.is_period[0])("ngModel",e.form.value.conditions.is_period[1])("ngModelOptions",tn(7,gk))}}function Hqt(t,n){if(1&t&&(m(0,"mat-option",26),S(1),H(2,"date"),_()),2&t){const e=n.$implicit,i=E(2);C("value",e.id),b(),K(" ",At(2,2,e.value,i.time_format)," ")}}function Wqt(t,n){if(1&t&&(m(0,"mat-option",26),S(1),H(2,"date"),_()),2&t){const e=E().$implicit,i=E(2);C("value",e.id),b(),K(" ",At(2,2,e.value,i.time_format)," ")}}function qqt(t,n){if(1&t&&(Wt(0),O(1,Wqt,3,5,"mat-option",51),qt()),2&t){const e=n.$implicit,i=E(2);b(),C("ngIf",e.id>(i.form.value.conditions.is_between[0]||6))}}function Kqt(t,n){if(1&t){const e=se();m(0,"div",28)(1,"label",46),S(2),_(),m(3,"div",47)(4,"mat-form-field",40)(5,"mat-select",48),P("ngModelChange",function(s){B(e);const r=E();return V(r.setIsBetween(s,r.form.value.conditions.is_between[1]))}),O(6,Hqt,3,5,"mat-option",7),_()(),m(7,"mat-form-field",40)(8,"mat-select",49),P("ngModelChange",function(s){B(e);const r=E();return V(r.setIsBetween(r.form.value.conditions.is_between[0],s))}),O(9,qqt,2,1,"ng-container",50),_(),m(10,"mat-error"),S(11,"A valid end time is required"),_()()()()}if(2&t){const e=E();b(2),K("",e.form.value.rules.hidden?"Prevent":"Allow"," booking between:"),b(3),C("ngModel",e.form.value.conditions.is_between[0]||6)("ngModelOptions",tn(7,gk)),b(),C("ngForOf",e.time_blocks),b(2),C("ngModel",e.form.value.conditions.is_between[1]||18)("ngModelOptions",tn(8,gk)),b(),C("ngForOf",e.time_blocks)}}function Xqt(t,n){if(1&t&&(m(0,"div",28)(1,"label",52),S(2),_(),q(3,"item-list-field",53),_()),2&t){const e=E();b(2),K(" ",e.form.value.rules.hidden?"Prevent":"Allow"," booking these resources: ")}}let fTe=(()=>{class t{get time_format(){return this._settings.time_format}constructor(e,i){this._org=e,this._settings=i,this.save=!1,this.rulesetChange=new Ae,this.available_conditions=[],this.building_zones=this._org.active_building.pipe(Zt(s=>!!s),Kt(s=>iT({parent_id:s.id}).pipe(Xi(()=>Ge({data:[]})))),me(s=>s.data),zn(1)),this.time_blocks=new Array(96).fill(0).map((s,r)=>{const o=Math.floor(r/4),a=r%4*15;return{id:o+a/60,value:qu(new Date,{hours:o,minutes:a})}}),this.duration_blocks=["1 Day","2 Days","3 Days","4 Days","5 Days","1 Week","2 Weeks","3 Weeks","4 Weeks","1 Month","2 Months","3 Months","4 Months","5 Months","6 Months"],this.form=new Rl({id:new Ke(`ruleset-${iv(8)}`),zone:new Ke("*",Zr.required),name:new Ke("",Zr.required),rules:new Rl({auto_approve:new Ke(!1),hidden:new Ke(!1)}),conditions:new Rl({groups:new Ke([]),locations:new Ke([]),min_length:new Ke(0),max_length:new Ke(1440),is_before:new Ke("1 Week"),is_after:new Ke("1 Day"),is_between:new Ke([6,18]),is_period:new Ke([Ei(Date.now()).valueOf(),ks(Date.now()).valueOf()]),resource_ids:new Ke([])})})}ngOnChanges(e){e.ruleset&&this.ruleset&&(this.available_conditions=Object.keys(this.ruleset.conditions||{}),this.form.patchValue(this.ruleset)),e.save&&this.save!==e.save.previousValue&&!e.save.firstChange&&this.post()}setIsBetween(e,i){!e||!i||(e>i&&(i=e+.25),this.form.patchValue({conditions:{is_between:[e,i]}}))}setIsPeriod(e,i){!e||!i||(e>i&&(i=e),this.form.patchValue({conditions:{is_period:[Ei(e).valueOf(),ks(i).valueOf()]}}))}post(){if(!this.form.valid)return Ti(`Some form fields are invalid. [${dT(this.form).join(", ")}]`);const e=this.form.getRawValue(),i=Object.keys(e.conditions);for(const s of i)this.available_conditions.includes(s)||delete e.conditions[s];this.rulesetChange.emit(e)}static#e=this.\u0275fac=function(i){return new(i||t)(I(Sn),I(nn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["booking-rules-form"]],inputs:{ruleset:"ruleset",save:"save"},outputs:{rulesetChange:"rulesetChange"},features:[Rn],decls:65,vars:16,consts:[[1,"flex","flex-col","space-y-2",3,"formGroup"],[1,"flex","items-center","space-x-2"],[1,"flex","flex-col","flex-1"],["for","zone"],["appearance","outline"],["name","zone","formControlName","zone"],["value","*"],[3,"value",4,"ngFor","ngForOf"],["for","name"],["matInput","","name","name","formControlName","name","placeholder","Ruleset Name"],["formGroupName","rules",1,"flex","items-center","space-x-2"],["name","hidden","formControlName","hidden","matTooltip","Prevent user from booking the resource if the conditions match"],["name","auto_approve","formControlName","auto_approve","matTooltip","Whether resource should be auto-approved when booking if the conditions match",4,"ngIf"],[1,"flex","flex-col"],["name","zone","multiple","","placeholder","No Conditions. Match all resources in zone",3,"ngModelChange","ngModel","ngModelOptions"],["value","groups"],["value","locations"],["value","min_length"],["value","max_length"],["value","is_before"],["value","is_after"],["value","is_between"],["value","is_period"],["value","resource_ids"],["class","flex flex-col","formGroupName","conditions",4,"ngIf"],["class","flex items-center space-x-2","formGroupName","conditions",4,"ngIf"],[3,"value"],["name","auto_approve","formControlName","auto_approve","matTooltip","Whether resource should be auto-approved when booking if the conditions match"],["formGroupName","conditions",1,"flex","flex-col"],["for","groups"],["name","groups","formControlName","groups","placeholder","User groups"],["for","locations"],["name","locations","formControlName","locations","placeholder","Locations"],["formGroupName","conditions",1,"flex","items-center","space-x-2"],["class","flex flex-col flex-1",4,"ngIf"],["for","min_length"],["name","min_length","formControlName","min_length",3,"min","max","step"],["for","max_length"],["name","max_length","formControlName","max_length",3,"min","max","step"],["for","is-before"],["appearance","outline",1,"flex-1"],["name","is-before","formControlName","is_before"],["for","is-after"],["name","is-after","formControlName","is_after"],[1,"flex-1",3,"ngModelChange","ngModel","ngModelOptions"],[1,"flex-1",3,"ngModelChange","from","ngModel","ngModelOptions"],["for","is_between"],[1,"flex","items-center","space-x-2","w-full"],["name","start-time",3,"ngModelChange","ngModel","ngModelOptions"],["name","end-time",3,"ngModelChange","ngModel","ngModelOptions"],[4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["for","resource_ids"],["name","resource_ids","formControlName","resource_ids","placeholder","Resource IDs"]],template:function(i,s){1&i&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),S(4,"Zone"),m(5,"span"),S(6,"*"),_(),S(7,":"),_(),m(8,"mat-form-field",4)(9,"mat-select",5)(10,"mat-option",6),S(11,"Any Zone"),_(),O(12,Oqt,2,2,"mat-option",7),H(13,"async"),_(),m(14,"mat-error"),S(15,"A valid zone is required"),_()()(),m(16,"div",2)(17,"label",8),S(18,"Name"),m(19,"span"),S(20,"*"),_(),S(21,":"),_(),m(22,"mat-form-field",4),q(23,"input",9),m(24,"mat-error"),S(25,"A valid name is required"),_()()()(),m(26,"div",10)(27,"div",2)(28,"mat-checkbox",11),S(29," Prevent Bookings "),_()(),m(30,"div",2),O(31,Rqt,2,0,"mat-checkbox",12),_()(),m(32,"div",13)(33,"label",3),S(34,"Rule Conditions:"),_(),m(35,"mat-form-field",4)(36,"mat-select",14),ii("ngModelChange",function(o){return jn(s.available_conditions,o)||(s.available_conditions=o),o}),m(37,"mat-option",15),S(38,"Groups"),_(),m(39,"mat-option",16),S(40,"Locations"),_(),m(41,"mat-option",17),S(42," Minimum Length "),_(),m(43,"mat-option",18),S(44," Maximum Length "),_(),m(45,"mat-option",19),S(46," Is Within Days "),_(),m(47,"mat-option",20),S(48," Is After Days "),_(),m(49,"mat-option",21),S(50," Is Between Hours "),_(),m(51,"mat-option",22),S(52," Between Dates "),_(),m(53,"mat-option",23),S(54,"Resources"),_()(),m(55,"mat-error"),S(56,"A valid zone is required"),_()()(),O(57,Fqt,4,1,"div",24)(58,Lqt,4,0,"div",24)(59,Bqt,3,2,"div",25)(60,zqt,8,2,"div",24)(61,Gqt,8,2,"div",24)(62,jqt,6,8,"div",24)(63,Kqt,12,9,"div",24)(64,Xqt,4,1,"div",24),_()),2&i&&(C("formGroup",s.form),b(12),C("ngForOf",ne(13,13,s.building_zones)),b(19),C("ngIf",!s.form.value.rules.hidden),b(5),ni("ngModel",s.available_conditions),C("ngModelOptions",tn(15,gk)),b(21),C("ngIf",s.available_conditions.includes("groups")),b(),C("ngIf",s.available_conditions.includes("locations")),b(),C("ngIf",s.available_conditions.includes("min_length")||s.available_conditions.includes("max_length")),b(),C("ngIf",s.available_conditions.includes("is_before")),b(),C("ngIf",s.available_conditions.includes("is_after")),b(),C("ngIf",s.available_conditions.includes("is_period")),b(),C("ngIf",s.available_conditions.includes("is_between")),b(),C("ngIf",s.available_conditions.includes("resource_ids")))},styles:["[_nghost-%COMP%]{display:block;padding:.5rem}"]})}return t})();const mTe=[],_Te=new rv;let gTe=(()=>{class t{transform(e){return z(function*(){if(!e)return _Te;let i=mTe.find(({id:s,email:r})=>s===e||r===e);return i||(i=yield PO(e).toPromise().catch(()=>null),i?(i=new rv(i),mTe.push(i),i):_Te)})()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275pipe=nr({name:"placeuser",type:t,pure:!0})}return t})();const Yqt=["startDate"],Zqt=["endDate"],Qqt=[[["input","startDate",""]],[["input","endDate",""]]],Jqt=["input[startDate]","input[endDate]"];function eKt(t,n){if(1&t){const e=se();m(0,"div",5)(1,"date-range-calendar",6),P("startChange",function(s){return B(e),V(E().setStartDate(s))})("endChange",function(s){return B(e),V(E().setEndDate(s))}),_()()}if(2&t){const e=E();b(),C("month",(null==e.start_date||null==e.start_date.control?null:e.start_date.control.value)||e.now)("from",e.from)("to",e.until)("offset_weekday",e.week_start)}}let bTe=(()=>{class t extends hn{constructor(){super(...arguments),this.from_date=Ei(Date.now()).valueOf(),this.week_start=0,this.disabled=!1,this.short=!1,this.now=Date.now()}setStartDate(e){this.start_date&&this.start_date.control.setValue(e)}setEndDate(e){this._tooltip?.close(),this.end_date&&this.end_date.control.setValue(e)}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=$n(t)))(s||t)}})();static#t=this.\u0275cmp=Se({type:t,selectors:[["date-range-field"]],contentQueries:function(i,s,r){if(1&i&&(Bi(r,Yqt,5,lc),Bi(r,Zqt,5,lc)),2&i){let o;nt(o=it())&&(s.start_date=o.first),nt(o=it())&&(s.end_date=o.first)}},viewQuery:function(i,s){if(1&i&&Gt(ju,5),2&i){let r;nt(r=it())&&(s._tooltip=r.first)}},inputs:{from_date:[0,"from","from_date"],to_date:[0,"to","to_date"],week_start:"week_start",disabled:"disabled",short:"short"},features:[Ze],ngContentSelectors:Jqt,decls:16,vars:12,consts:[["calendar_picker",""],["matRipple","","type","button","role","date-picker","customTooltip","","yPosition","top",1,"flex","items-center","rounded","px-4","py-2","border","border-neutral","hover:border-base-content","focus:outline-2","outline-base-content","space-x-2","min-w-max",3,"content","disabled"],[1,"flex-1","whitespace-nowrap"],[1,"text-2xl"],[1,"hidden"],[1,"relative","w-[18.25rem]","rounded","bg-base-100","px-2","py-4"],[3,"startChange","endChange","month","from","to","offset_weekday"]],template:function(i,s){if(1&i&&(Si(Qqt),m(0,"button",1)(1,"div",2),S(2),H(3,"date"),_(),m(4,"div"),S(5,"\u2013"),_(),m(6,"div",2),S(7),H(8,"date"),_(),m(9,"app-icon",3),S(10,"today"),_()(),m(11,"div",4),en(12),en(13,1),_(),O(14,eKt,2,4,"ng-template",null,0,ln)),2&i){const r=xt(15);Oe("opacity-30",s.disabled),C("content",r)("disabled",s.disabled),b(2),K(" ",At(3,6,(null==s.start_date?null:s.start_date.value)||s.now,"MMM d, yyyy")," "),b(5),K(" ",At(8,9,(null==s.end_date?null:s.end_date.value)||s.now,"MMM d, yyyy")," ")}}})}return t})();function tKt(t,n){if(1&t&&(m(0,"div",8),S(1),H(2,"date"),_()),2&t){const e=n.$implicit;b(),K(" ",At(2,1,e,"EEE")," ")}}function nKt(t,n){1&t&&q(0,"div",16)}function iKt(t,n){1&t&&q(0,"div",17)}function sKt(t,n){1&t&&q(0,"div",18)}function rKt(t,n){1&t&&q(0,"div",19)}function oKt(t,n){1&t&&q(0,"div",20)}function aKt(t,n){if(1&t){const e=se();m(0,"button",9),P("click",function(){const s=B(e).$implicit;return V(E().selectDate(s.id))})("mouseenter",function(){const s=B(e).$implicit;return V(E().setHoveredDate(s.id))}),O(1,nKt,1,0,"div",10)(2,iKt,1,0,"div",11)(3,sKt,1,0,"div",12)(4,rKt,1,0,"div",13),m(5,"div",14),S(6),H(7,"date"),_(),O(8,oKt,1,0,"div",15),_()}if(2&t){const e=n.$implicit,i=E();Oe("text-secondary-content",e.is_start||e.is_end),C("disabled",e.disabled),b(),C("ngIf",e.is_selected&&!e.is_start&&!e.is_end),b(),C("ngIf",e.is_start&&i.end_after_start),b(),C("ngIf",e.is_end&&i.end_after_start),b(),C("ngIf",e.is_start||e.is_end),b(),Oe("opacity-30",!e.is_month),b(),K(" ",At(7,11,e.id,"d")," "),b(2),C("ngIf",e.is_today)}}let vTe=(()=>{class t{constructor(){this.from_date=Ei(Date.now()).valueOf(),this.offset_weekday=0,this.month=Ei(Date.now()).valueOf(),this.startChange=new Ae,this.endChange=new Ae,this.hovered_date=null,this.weekdays=[],this.month_days=[]}get end_after_start(){return this.end&&this.end>this.start&&!eh(this.end,this.start)}ngOnInit(){this._setWeekdays(),this._setMonthDays()}ngOnChanges(e){e.offset_weekday&&(this._setWeekdays(),this._setMonthDays()),e.start&&(this._setMonthDays(),this.month=this.start||Date.now()),e.month&&this._setMonthDays(),e.end&&this._setMonthDays()}selectDate(e){!this.start||e<this.start?(this.start=e,this.startChange.emit(e)):(this.end=e,this.endChange.emit(e)),this._setMonthDays()}setHoveredDate(e){this.start&&(this.end=e,this._setMonthDays())}trackByFn(e,i){return i.id}nextMonth(){this.month=Wb(this.month,1).valueOf(),this._setMonthDays()}previousMonth(){this.month=Wb(this.month,-1).valueOf(),this._setMonthDays()}_setMonthDays(){const e=zu(dTe(this.month),{weekStartsOn:this.offset_weekday});this.month_days=Array.from(Array(42).keys()).map(i=>{const s=Ir(e,i).valueOf();return{id:s,disabled:this.from_date&&gl(s,this.from_date)||this.to_date&&nh(s,this.to_date),is_today:eh(s,Date.now()),is_start:eh(s,this.start),is_end:eh(s,this.end),is_month:hTe(s,this.month),is_selected:this.end&&s>=Ei(this.start).valueOf()&&s<=ks(this.end).valueOf()}})}_setWeekdays(){const e=zu(Date.now(),{weekStartsOn:this.offset_weekday});this.weekdays=Array.from(Array(7).keys()).map(i=>Ir(e,i))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Se({type:t,selectors:[["date-range-calendar"]],inputs:{from_date:[0,"from","from_date"],to_date:[0,"to","to_date"],offset_weekday:"offset_weekday",start:"start",end:"end",month:"month"},outputs:{startChange:"startChange",endChange:"endChange"},features:[Rn],decls:15,vars:7,consts:[[1,"flex","items-center","justify-between"],["month","",1,"font-medium","px-2"],[1,"flex","items-center","space-x-2"],["icon","","matRipple","",3,"click"],[1,"grid","grid-cols-7","grid-rows-7","gap-1","w-[17.25rem]","h-[17.25rem]"],[1,"col-span-full","grid","grid-cols-7","border-b","border-base-200"],["weekday","","class","relative flex items-center justify-center text-sm opacity-60",4,"ngFor","ngForOf"],["class","relative h-9 w-9 hover:bg-base-200 rounded-full",3,"text-secondary-content","disabled","click","mouseenter",4,"ngFor","ngForOf","ngForTrackBy"],["weekday","",1,"relative","flex","items-center","justify-center","text-sm","opacity-60"],[1,"relative","h-9","w-9","hover:bg-base-200","rounded-full",3,"click","mouseenter","disabled"],["class","absolute inset-y-0 -inset-x-0.5 border-y border-base-content border-dashed bg-base-200",4,"ngIf"],["class","absolute inset-y-0 -right-0.5 w-[calc(50%+2px)] border-y border-base-content border-dashed bg-base-200",4,"ngIf"],["class","absolute inset-y-0 -left-0.5 w-[calc(50%+2px)] border-y border-base-content border-dashed bg-base-200",4,"ngIf"],["class","absolute inset-0 flex items-center justify-center bg-secondary rounded-full z-10",4,"ngIf"],["matRipple","",1,"absolute","inset-0","flex","items-center","justify-center","rounded-full","z-20"],["class","absolute -inset-[3px] flex items-center justify-center border border-secondary rounded-full z-10",4,"ngIf"],[1,"absolute","inset-y-0","-inset-x-0.5","border-y","border-base-content","border-dashed","bg-base-200"],[1,"absolute","inset-y-0","-right-0.5","w-[calc(50%+2px)]","border-y","border-base-content","border-dashed","bg-base-200"],[1,"absolute","inset-y-0","-left-0.5","w-[calc(50%+2px)]","border-y","border-base-content","border-dashed","bg-base-200"],[1,"absolute","inset-0","flex","items-center","justify-center","bg-secondary","rounded-full","z-10"],[1,"absolute","-inset-[3px]","flex","items-center","justify-center","border","border-secondary","rounded-full","z-10"]],template:function(i,s){1&i&&(m(0,"div",0)(1,"div",1),S(2),H(3,"date"),_(),m(4,"div",2)(5,"button",3),P("click",function(){return s.previousMonth()}),m(6,"app-icon"),S(7,"chevron_left"),_()(),m(8,"button",3),P("click",function(){return s.nextMonth()}),m(9,"app-icon"),S(10,"chevron_right"),_()()()(),m(11,"div",4)(12,"div",5),O(13,tKt,3,4,"div",6),_(),O(14,aKt,9,14,"button",7),_()),2&i&&(b(2),K(" ",At(3,4,s.month,"MMMM yyyy")," "),b(11),C("ngForOf",s.weekdays),b(),C("ngForOf",s.month_days)("ngForTrackBy",s.trackByFn))},dependencies:[on,mt,Tt,St,fs]})}return t})(),bk=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[Ka,pf,$u,Jc,$u,Xh,Fb,$b,w0,kE,I0,OE,PV,$V,pv]})}return t})();Ts(fd,[mt,pi,Vi,Tt,St,ju,pTe],[fs]),Ts(bTe,[Tt,St,ju,vTe],[fs]),Ts(lq,[on,mt,Yr,pi,Vi,Tt,zs,CE,mr,xE,y0,Zce,nu,nO,iO,eO,IE,St,Zs],[xi,gTe]),Ts(sy,[on,mt,Yr,pi,Vi,zs,Cce,CE,eu,mr,xE,y0,St,g7,Zs],[]),Ts(pxe,[on,mt,pi,Vi,Tt,k0,Ub,St,jl],[xi]),Ts(bK,[on,mt,Tt,zs,nu,nO,iO,eO,IE,St,jl,Zs],[xi]),Ts(P7,[on,mt,hf,Yr,pi,cc,pa,Fl,Tt,zs,Kh,eu,ko,mr,St,Ls,Zs,uTe,bK],[xi]),Ts(vK,[mt,Yr,e6,pi,Vi,Tt,zs,CE,eu,ko,mr,k0,Ub,St,Ls,fd],[]),Ts(fTe,[on,mt,Yr,pi,cc,Vi,pa,Fl,FM,zs,Kh,eu,ko,mr,nu,$l,fd,Mp,GSe],[xi,fs]);const lKt=()=>({disable_pan:!0,disable_zoom:!0});function cKt(t,n){1&t&&q(0,"image-carousel",23),2&t&&C("images",E(2).space.images)}function uKt(t,n){if(1&t&&(m(0,"div",16)(1,"p"),oe(2,4),_()()),2&t){const e=n.$implicit;b(2),Vn(e),Gn(2)}}function dKt(t,n){if(1&t&&(m(0,"section",24)(1,"h2",15),oe(2,3),_(),O(3,uKt,3,1,"div",25),_()),2&t){const e=E(2);b(3),C("ngForOf",e.space.features)}}function hKt(t,n){if(1&t&&(m(0,"section",26),q(1,"interactive-map",27),_()),2&t){const e=E(2);b(),C("src",e.map_url)("focus",e.space.map_id)("features",e.features)("options",tn(4,lKt))}}function pKt(t,n){if(1&t){const e=se();Wt(0),m(1,"section",7),O(2,cKt,1,1,"image-carousel",8),m(3,"button",9),P("click",function(){return B(e),V(E().close.emit())}),m(4,"app-icon"),S(5,"arrow_back"),_()(),m(6,"button",10),P("click",function(){return B(e),V(E().toggleFav.emit())}),m(7,"app-icon"),S(8),_()()(),m(9,"div",11)(10,"section",12)(11,"h2",13),S(12),_()(),q(13,"hr"),m(14,"section",14)(15,"h2",15),oe(16,1),_(),m(17,"div",16)(18,"app-icon"),S(19,"people"),_(),m(20,"p"),oe(21,2),_()(),m(22,"div",16)(23,"app-icon"),S(24,"meeting_room"),_(),m(25,"p"),S(26),_()(),m(27,"div",16)(28,"app-icon"),S(29,"place"),_(),m(30,"p"),S(31),_()()(),q(32,"hr"),O(33,dKt,4,1,"section",17)(34,hKt,2,5,"section",18),_(),m(35,"div",19)(36,"button",20),P("click",function(){B(e);const s=E();return s.active=!s.active,V(s.activeChange.emit(s.active))}),m(37,"div",21)(38,"app-icon",22),S(39),_(),m(40,"p"),S(41),_()()()(),qt()}if(2&t){const e=E();b(),Oe("sm:h-64",null==e.space.images?null:e.space.images.length)("h-40",null==e.space.images?null:e.space.images.length)("sm:h-0",!(null!=e.space.images&&e.space.images.length))("h-12",!(null!=e.space.images&&e.space.images.length))("!bg-transparent",!(null!=e.space.images&&e.space.images.length)),b(),C("ngIf",null==e.space.images?null:e.space.images.length),b(4),Oe("text-white",!e.fav)("text-blue-400",e.fav),b(2),Ye(e.fav?"favorite":"favorite_border"),b(4),K(" ",e.space.display_name||e.space.name," "),b(9),Vn(e.space.capacity),Gn(21),b(5),K(" ",(null==e.level?null:e.level.display_name)||(null==e.level?null:e.level.name)," "),b(5),K(" ",(null==e.building?null:e.building.address)||(null==e.building?null:e.building.display_name)||(null==e.building?null:e.building.name)," "),b(2),C("ngIf",null==e.space.features?null:e.space.features.length),b(),C("ngIf",!e.hide_map),b(2),Oe("inverse",e.active),b(3),Ye(e.active?"remove":"add"),b(2),K(" ",e.active?"Remove this room":"Add this room"," ")}}function fKt(t,n){1&t&&(m(0,"div",28)(1,"p",29),oe(2,5),_()())}let yK=(()=>{class t{get level(){return this._org.levelWithID(this.space?.zones)||this.space?.level}get building(){return this._org.buildings.find(e=>this.space?.zones.includes(e.id))}constructor(e){this._org=e,this.fav=!1,this.active=!1,this.hide_map=!1,this.activeChange=new Ae,this.close=new Ae,this.toggleFav=new Ae,this.map_url="",this.features=[]}ngOnChanges(e){e.space&&this.space&&this._updateFeature()}_updateFeature(){this.map_url=this.level?.map_id,this.features=[{location:this.space?.map_id,content:Gu}]}static#e=this.\u0275fac=function(i){return new(i||t)(I(Sn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["space-details"]],inputs:{space:"space",fav:"fav",active:"active",hide_map:"hide_map"},outputs:{activeChange:"activeChange",close:"close",toggleFav:"toggleFav"},features:[Rn],decls:3,vars:2,consts:()=>{let e,i,s,r,o;return e=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,i=$localize`:␟2fe5caca246424da5e7fcee12a1fe341335e1286␟2731085793954892186:${"\ufffd0\ufffd"}:INTERPOLATION: People`,s=$localize`:␟45b5b90d7df8adeb648858761739fa700117c0d5␟3223773701700202859:Room Facilities`,r=$localize`:␟9a6f64944a2acf1f8315f9ffac43e3fe58bac31f␟1353747351482281557:${"\ufffd0\ufffd"}:INTERPOLATION:`,o=$localize`:␟02434c6ff0f41cc7f311ace51ce0787ae315e5fb␟5676660199414904214: Select a room to view it's details `,[["empty_state",""],e,i,s,r,o,[4,"ngIf","ngIfElse"],["image","",1,"relative","w-full","bg-neutral"],["class","absolute inset-0",3,"images",4,"ngIf"],["icon","","matRipple","","name","close-space-details",1,"absolute","top-2","left-2","bg-neutral","sm:hidden","text-white",3,"click"],["icon","","matRipple","","name","toggle-space-favourite-details",1,"absolute","top-2","right-2","bg-neutral",3,"click"],[1,"p-2","space-y-2","flex-1","h-1/2","overflow-auto"],["actions","",1,"z-0"],[1,"text-xl","font-medium","mb-2","mt-4"],["details","",1,"space-y-2"],[1,"text-xl","font-medium"],[1,"flex","items-center","space-x-2"],["facilities","","class","space-y-2",4,"ngIf"],["map","","class","w-full mx-auto h-64 sm:h-48 relative border border-base-200 overflow-hidden rounded",4,"ngIf"],[1,"px-2","pt-2","pb-[5.5rem]","border-t","border-base-200","shadow","sm:hidden"],["btn","","matRipple","","name","toggle-space-details",1,"w-full",3,"click"],[1,"flex","items-center","justify-center"],[1,"text-2xl"],[1,"absolute","inset-0",3,"images"],["facilities","",1,"space-y-2"],["class","flex items-center space-x-2",4,"ngFor","ngForOf"],["map","",1,"w-full","mx-auto","h-64","sm:h-48","relative","border","border-base-200","overflow-hidden","rounded"],[1,"pointer-events-none",3,"src","focus","features","options"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"]]},template:function(i,s){if(1&i&&O(0,pKt,42,26,"ng-container",6)(1,fKt,3,0,"ng-template",null,0,ln),2&i){const r=xt(2);C("ngIf",s.space)("ngIfElse",r)}},styles:["[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column;width:30%;min-width:20rem;height:100%;min-height:65vh}"]})}return t})();function mKt(t,n){1&t&&(m(0,"div",24)(1,"app-icon"),S(2,"done"),_()())}function _Kt(t,n){1&t&&q(0,"img",25),2&t&&C("source",E().$implicit.images[0])}function gKt(t,n){1&t&&q(0,"img",26)}function bKt(t,n){if(1&t){const e=se();m(0,"li",13)(1,"button",14),P("click",function(){const s=B(e).$implicit;return V(E(3).selectSpace(s))}),m(2,"div",15),O(3,mKt,3,0,"div",16)(4,_Kt,1,1,"img",17)(5,gKt,1,0,"ng-template",null,2,ln),_(),m(7,"div",18)(8,"div",19),S(9),_(),m(10,"div",20)(11,"app-icon",21),S(12,"place"),_(),m(13,"p",22),S(14),_()(),m(15,"div",20)(16,"app-icon",21),S(17,"people"),_(),m(18,"p"),oe(19,4),_()()()(),m(20,"button",23),P("click",function(){const s=B(e).$implicit;return V(E(3).toggleFav.emit(s))}),m(21,"app-icon"),S(22),_()()()}if(2&t){let e;const i=n.$implicit,s=xt(6),r=E(3);Oe("!border-info",r.active===i.id),b(3),C("ngIf",r.selected.includes(i.id)),b(),C("ngIf",null==i.images?null:i.images.length)("ngIfElse",s),b(5),K(" ",i.display_name||i.name||"Meeting Space"," "),b(5),K(" ",i.location||(null==(e=r.level(i.zones))?null:e.display_name)||(null==(e=r.level(i.zones))?null:e.name)," "),b(5),Vn(i.capacity<1?2:i.capacity),Gn(19),b(),Oe("text-info",r.isFavourite(i.id)),b(2),Ye(r.isFavourite(i.id)?"favorite":"favorite_border")}}function vKt(t,n){if(1&t&&(m(0,"ul",11),O(1,bKt,23,11,"li",12),H(2,"async"),_()),2&t){const e=E(2);b(),C("ngForOf",ne(2,1,e.available_spaces))}}function yKt(t,n){if(1&t&&(Wt(0),O(1,vKt,3,3,"ul",10),H(2,"async"),qt()),2&t){let e;const i=E(),s=xt(8);b(),C("ngIf",null==(e=ne(2,2,i.available_spaces))?null:e.length)("ngIfElse",s)}}function wKt(t,n){1&t&&(m(0,"div",27)(1,"p",28),oe(2,5),_()())}function CKt(t,n){1&t&&(m(0,"div",29),q(1,"mat-spinner",30),m(2,"p",31),oe(3,6),_()()),2&t&&(b(),C("diameter",32))}let wK=(()=>{class t{constructor(e,i){this._event_form=e,this._org=i,this.active="",this.selected="",this.favorites=[],this.onSelect=new Ae,this.toggleFav=new Ae,this.loading=this._event_form.loading,this.available_spaces=this._event_form.available_spaces}level(e){return this._org.levelWithID(e)}ngOnInit(){this._event_form.setView("find")}isFavourite(e){return this.favorites.includes(e)}selectSpace(e){this.onSelect.emit(e)}static#e=this.\u0275fac=function(i){return new(i||t)(I(ng),I(Sn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["space-list"]],inputs:{active:"active",selected:"selected",favorites:"favorites"},outputs:{onSelect:"onSelect",toggleFav:"toggleFav"},decls:11,vars:7,consts:()=>{let e,i,s,r;return e=$localize`:␟f3733dfad4477862079351d9f8cf60c7964cc3e3␟2290177789691483092: ${"\ufffd0\ufffd"}:INTERPOLATION: result(s) found `,i=$localize`:␟08719ea79f574b595da7d187fda2fa8c491b5de7␟4552898751936658514: ${"\ufffd0\ufffd"}:INTERPOLATION: People `,s=$localize`:␟027c29534f5dc45741b226edfebb3f7f578384b0␟3831747985282777621: No available spaces for selected time and/or filters `,r=$localize`:␟8dad32dda6491a1051df9156e98031c0e634b413␟126579492602011343:Finding available spaces...`,[["empty_state",""],["load_state",""],["space_placeholder",""],e,i,s,r,[1,"font-bold"],["count","",1,"text-sm","opacity-60","mb-4"],[4,"ngIf","ngIfElse"],["class","list-style-none space-y-2",4,"ngIf","ngIfElse"],[1,"list-style-none","space-y-2"],["space","","class","relative p-2 rounded-lg w-full shadow border bg-base-100 border-base-200",3,"!border-info",4,"ngFor","ngForOf"],["space","",1,"relative","p-2","rounded-lg","w-full","shadow","border","bg-base-100","border-base-200"],["matRipple","","name","select-space",1,"w-full","h-full","flex","items-center",3,"click"],[1,"relative","min-w-[5rem]","w-20","h-20","rounded-xl","bg-base-200","mr-4","overflow-hidden","flex","items-center","justify-center"],["class","absolute top-1 left-1 border border-neutral bg-base-200 rounded-full h-6 w-6 flex items-center justify-center text-white",4,"ngIf"],["auth","","class","object-cover h-full",3,"source",4,"ngIf","ngIfElse"],[1,"space-y-2"],[1,"font-medium","truncate","mr-10"],[1,"flex","items-center","text-sm","space-x-2"],[1,"text-info"],[1,"truncate"],["icon","","matRipple","","name","toggle-space-favourite",1,"absolute","top-1","right-1",3,"click"],[1,"absolute","top-1","left-1","border","border-neutral","bg-base-200","rounded-full","h-6","w-6","flex","items-center","justify-center","text-white"],["auth","",1,"object-cover","h-full",3,"source"],["src","assets/icons/room-placeholder.svg",1,"m-auto"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"],["loading","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"],[1,"opacity-30"]]},template:function(i,s){if(1&i&&(m(0,"h3",7),S(1,"Results"),_(),m(2,"p",8),oe(3,3),H(4,"async"),_(),O(5,yKt,3,4,"ng-container",9),H(6,"async"),O(7,wKt,3,0,"ng-template",null,0,ln)(9,CKt,4,1,"ng-template",null,1,ln)),2&i){let r;const o=xt(10);b(4),Vn((null==(r=ne(4,3,s.available_spaces))?null:r.length)||0),Gn(3),b(),C("ngIf",!ne(6,5,s.loading))("ngIfElse",o)}},styles:["[_nghost-%COMP%]{width:100%;height:100%;padding:.5rem;overflow:auto}"]})}return t})();const em=()=>({standalone:!0});function SKt(t,n){if(1&t){const e=se();m(0,"button",32),P("click",function(){return B(e),V(E().close())}),m(1,"app-icon"),S(2,"keyboard_arrow_left"),_()()}}function xKt(t,n){if(1&t&&(m(0,"mat-option",36),S(1),_()),2&t){const e=n.$implicit;C("value",e),b(),K(" ",e.display_name||e.name," ")}}function EKt(t,n){if(1&t){const e=se();m(0,"mat-form-field",33)(1,"mat-select",34),P("ngModelChange",function(s){return B(e),V(E().setRegion(s))}),O(2,xKt,2,2,"mat-option",35),H(3,"async"),_()()}if(2&t){const e=E();b(),C("ngModel",e.region)("ngModelOptions",tn(5,em)),b(),C("ngForOf",ne(3,3,e.regions))}}function TKt(t,n){if(1&t&&(m(0,"mat-option",36),S(1),_()),2&t){const e=n.$implicit;C("value",e),b(),K(" ",e.display_name||e.name," ")}}function IKt(t,n){if(1&t){const e=se();m(0,"mat-form-field",33)(1,"mat-select",37),H(2,"async"),H(3,"async"),H(4,"async"),P("ngModelChange",function(s){return B(e),V(E().setBuilding(s))}),O(5,TKt,2,2,"mat-option",35),H(6,"async"),_()()}if(2&t){let e;const i=E();b(),C("ngModel",ne(2,4,i.building))("ngModelOptions",tn(12,em))("placeholder",(null==(e=ne(3,6,i.building))?null:e.display_name)||(null==(e=ne(4,8,i.building))?null:e.name)),b(4),C("ngForOf",ne(6,10,i.buildings))}}function kKt(t,n){if(1&t&&(m(0,"div",41),S(1),H(2,"building"),m(3,"span",42),S(4," - "),_()()),2&t){let e;const i=E().$implicit;b(),K(" ",null==(e=ne(2,1,i.parent_id))?null:e.display_name," ")}}function DKt(t,n){if(1&t&&(m(0,"mat-option",36)(1,"div",39),O(2,kKt,5,3,"div",40),m(3,"div"),S(4),_()()()),2&t){const e=n.$implicit,i=E(2);C("value",e.id),b(2),C("ngIf",i.use_region),b(2),K(" ",e.display_name||e.name," ")}}function AKt(t,n){if(1&t){const e=se();m(0,"mat-form-field",33)(1,"mat-select",38),H(2,"async"),P("ngModelChange",function(s){return B(e),V(E().setOptions({zone_ids:s}))}),O(3,DKt,5,3,"mat-option",35),H(4,"async"),_()()}if(2&t){let e;const i=E();b(),C("ngModel",null==(e=ne(2,4,i.options))?null:e.zone_ids)("ngModelOptions",tn(8,em))("multiple",!0),b(2),C("ngForOf",ne(4,6,i.levels))}}function MKt(t,n){if(1&t){const e=se();m(0,"div",43)(1,"label",24),S(2),H(3,"translate"),m(4,"span"),S(5,"*"),_()(),m(6,"a-date-field",44),P("ngModelChange",function(s){return B(e),V(E().form.patchValue({date_end:s}))}),S(7),H(8,"translate"),_()()}if(2&t){const e=E();b(2),K(" ",ne(3,9,"FORM.END_DATE"),""),b(4),C("ngModel",e.form.getRawValue().date_end)("ngModelOptions",tn(13,em))("from",e.start_date)("to",e.end_date)("short",!0)("timezone",e.timezone)("range",2),b(),K(" ",ne(8,11,"FORM.DATE_ERROR")," ")}}function NKt(t,n){1&t&&(m(0,"div",45)(1,"mat-checkbox",46),oe(2,5),_()())}function OKt(t,n){if(1&t){const e=se();m(0,"div",48)(1,"label",52),S(2),H(3,"translate"),m(4,"span"),S(5,"*"),_()(),m(6,"a-time-field",53),P("ngModelChange",function(s){return B(e),V(E(2).form.patchValue({date_end:s}))}),_()()}if(2&t){let e;const i=E(2);b(2),K(" ",ne(3,6,"FORM.END_TIME"),""),b(4),C("ngModel",i.form.value.date_end)("ngModelOptions",tn(8,em))("from",null==i.form||null==(e=i.form.getRawValue())?null:e.date)("use_24hr",i.use_24hr)("timezone",i.timezone)}}function RKt(t,n){if(1&t&&(m(0,"div",48)(1,"label",52),S(2),H(3,"translate"),m(4,"span"),S(5,"*"),_()(),q(6,"a-duration-field",54),_()),2&t){let e;const i=E(2);b(2),K(" ",ne(3,5,"FORM.END_TIME"),""),b(4),C("time",null==i.form||null==(e=i.form.getRawValue())?null:e.date)("max",i.max_duration)("use_24hr",i.use_24hr)("timezone",i.timezone)}}function FKt(t,n){if(1&t){const e=se();m(0,"div",47)(1,"div",48)(2,"label",49),Pi(3,6),q(4,"span"),$i(),_(),m(5,"a-time-field",50),P("ngModelChange",function(s){return B(e),V(E().form.patchValue({date:s}))}),_()(),O(6,OKt,7,9,"div",51)(7,RKt,7,7,"div",51),_()}if(2&t){const e=E();b(5),C("ngModel",e.form.getRawValue().date)("ngModelOptions",tn(6,em))("use_24hr",e.use_24hr)("timezone",e.timezone),b(),C("ngIf",e.multiday),b(),C("ngIf",!e.multiday)}}function LKt(t,n){if(1&t){const e=se();m(0,"section",55)(1,"h2",56),oe(2,7),H(3,"translate"),_(),m(4,"div",57)(5,"div",58),oe(6,8),H(7,"translate"),_(),m(8,"mat-checkbox",59),H(9,"async"),P("ngModelChange",function(s){return B(e),V(E().setOptions({show_fav:s}))}),_()()()}if(2&t){let e;const i=E();b(3),Vn(ne(3,4,"COMMON.FAVOURITES")),Gn(2),b(4),Vn(ne(7,6,"ROOMS.SHOW_FAVOURITES")),Gn(6),b(),C("ngModel",null==(e=ne(9,8,i.options))?null:e.show_fav)("ngModelOptions",tn(10,em))}}function PKt(t,n){if(1&t){const e=se();m(0,"div",57)(1,"div",63),S(2),_(),m(3,"mat-checkbox",64),H(4,"async"),P("ngModelChange",function(s){B(e);const r=E().$implicit;return V(E(2).toggleFeature(r,s))}),_()()}if(2&t){let e;const i=E().$implicit,s=E(2);b(2),K(" ",s.feature_display[i]||i," "),b(),C("ngModel",null==(e=ne(4,3,s.options))||null==e.features?null:e.features.includes(i))("ngModelOptions",tn(5,em))}}function $Kt(t,n){if(1&t&&(Wt(0),O(1,PKt,5,6,"div",62),qt()),2&t){const e=n.$implicit,i=E(2);b(),C("ngIf",!i.hide_features.includes(e))}}function BKt(t,n){if(1&t&&(m(0,"section",60)(1,"h2",56),oe(2,9),_(),O(3,$Kt,2,1,"ng-container",61),H(4,"async"),_()),2&t){const e=E();b(3),C("ngForOf",ne(4,1,e.features))}}function VKt(t,n){if(1&t){const e=se();m(0,"div",65)(1,"button",66),P("click",function(){return B(e),V(E().close())}),oe(2,10),_()()}}let PP=(()=>{class t{get allow_all_day(){return!!this._settings.get("app.events.allow_all_day")}get use_region(){return!!this._settings.get("app.use_region")}get timezone(){return this._settings.get("app.events.use_building_timezone")?this._org.building.timezone:""}get bld(){return this._org.building}get region(){return this._org.region}get form(){return this._event_form.form}get max_duration(){return this._settings.get("app.events.max_duration")||480}get feature_display(){return this._settings.get("app.events.feature_decriptions")||{}}get hide_features(){return this._settings.get("app.events.hide_features")||[]}get use_24hr(){return this._settings.get("app.use_24_hour_time")}get start_date(){return Ei(this.form.getRawValue().date).valueOf()}get end_date(){return ks(Ir(Date.now(),this._settings.get("app.events.allowed_future_days")||180))}constructor(e,i,s,r,o,a){this._bsheet_ref=e,this._settings=i,this._event_form=s,this._org=r,this._spaces=o,this._mapspeople=a,this.can_close=!1,this.options=this._event_form.options,this.building=this._org.active_building,this.buildings=this._org.active_buildings,this.levels=Vt([this._org.active_region,this._org.active_building]).pipe(me(([l,c])=>(this.use_region?this._org.levelsForRegion(l):this._org.levelsForBuilding(c)).filter(h=>!h.tags.includes("parking")).sort((h,p)=>h.parent_id.localeCompare(p.parent_id)||(h.display_name||"").localeCompare(p.display_name||"")))),this.regions=this._org.region_list,this.using_mapspeople=this._mapspeople.available$,this.features=Vt([this._spaces.features,this._event_form.available_spaces]).pipe(me(([l,c])=>Ss(l.concat(Mo(c.map(u=>u.features)))))),this.close=()=>this._bsheet_ref.dismiss(),this.setOptions=l=>this._event_form.setOptions(l),this.can_close=!!this._bsheet_ref}setBuilding(e){this._org.building=e}setRegion(e){this._org.region=e}toggleFeature(e,i){var s=this;return z(function*(){const{features:r}=yield s.options.pipe(Zn(1)).toPromise(),o=(r||[]).filter(a=>e!==a);i&&o.push(e),s.setOptions({features:o})})()}static#e=this.\u0275fac=function(i){return new(i||t)(I(xC,8),I(nn),I(ng),I(Sn),I(f7),I(a_))};static#t=this.\u0275cmp=Se({type:t,selectors:[["space-filters"]],inputs:{multiday:"multiday",hide_levels:"hide_levels",viewing_map:"viewing_map"},decls:35,vars:31,consts:()=>{let e,i,s,r,o,a,l,c,u,d,h,p,f;return e=$localize`:␟36173168a4643aa78634e9242a63f3a40862f166␟7173310086383878456:Space Filters`,i=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,s=$localize`:␟ed31c09fd77c36238c13d83635f3fe5294c733d2␟471816275243265264:Location`,r=$localize`:␟04cfb5fd033651743bc4b9408bd52ba4ee894070␟3158758063619980932:Date${"\ufffd#22\ufffd"}:START_TAG_SPAN:*${"\ufffd/#22\ufffd"}:CLOSE_TAG_SPAN:`,o=$localize`:␟beead5a3a21b1ca4abe67610030f8a520995de4e␟3894192522062036998: ${"\ufffd0\ufffd"}:INTERPOLATION: `,a=$localize`:␟130845b58eba8e50c98f3fba117a0168cdba4f31␟8264413387051126615:Any Region`,l=$localize`:␟50407595967bf29832e873b41f9de3502d5c3e03␟7323982518822503502:Any Level`,c=$localize`:␟d7f43e20f3a729fa3de32bc7a1f709ccd722eae5␟835486935962207481: All Day `,u=$localize`:␟02d39ddac5bbf95c424df03d5f0d22cc257556bd␟4735431816432396893: Start Time${"\ufffd#4\ufffd"}:START_TAG_SPAN:*${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:`,d=$localize`:␟bde3d9fd949ba4c6014b8e64c1362753bca1cf0c␟5010873675481014004: ${"\ufffd0\ufffd"}:INTERPOLATION: `,h=$localize`:␟210742da6591a33630e0bfba757b95e6a1d99b20␟1614226322496100282: ${"\ufffd0\ufffd"}:INTERPOLATION: `,p=$localize`:␟bf10c600bd861cfd0a23f4759562ee0ae9dbe19f␟1551920764795208868:Facilities`,f=$localize`:␟c17e2cc448524a39eb83b2937cea3235a2e8bf37␟2296888311792137027: Apply Filters `,[e,i,s,r,o,c,u,d,h,p,f,[1,"flex","items-center","border-b","border-base-200","pb-2","sm:hidden"],[1,"flex-1","pl-2"],["icon","","matRipple","","name","close-space-filters",3,"click",4,"ngIf"],[1,"font-medium","flex-2","text-center"],[1,"flex-1"],[1,"max-h-[65vh]","p-2","overflow-y-auto","overflow-x-hidden","divide-y","divide-base-200","w-full","max-w-[100vw]",3,"formGroup"],["details",""],[1,"text-lg","font-medium","mb-1"],[1,"flex-1","min-w-[8rem]","flex","flex-col"],["for","location"],["appearance","outline","class","w-full",4,"ngIf"],[1,"flex","items-center","flex-wrap","sm:space-x-2"],[1,"flex-1","min-w-[8rem]"],["for","date"],["name","date",3,"ngModelChange","ngModel","ngModelOptions","to","short","timezone","range"],["class","flex-1 min-w-[8rem] relative",4,"ngIf"],["class","flex justify-end -mt-2 mb-2",4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],["favs","","class","space-y-2 pb-4",4,"ngIf"],["features","","class","space-y-2",4,"ngIf"],["class","px-2 pt-2 w-full border-t border-base-200",4,"ngIf"],["icon","","matRipple","","name","close-space-filters",3,"click"],["appearance","outline",1,"w-full"],["name","region","placeholder",a,3,"ngModelChange","ngModel","ngModelOptions"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["name","building",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],["name","location","placeholder",l,3,"ngModelChange","ngModel","ngModelOptions","multiple"],[1,"flex","flex-col-reverse"],["class","opacity-30 text-xs",4,"ngIf"],[1,"opacity-30","text-xs"],[1,"opacity-0"],[1,"flex-1","min-w-[8rem]","relative"],["name","date",3,"ngModelChange","ngModel","ngModelOptions","from","to","short","timezone","range"],[1,"flex","justify-end","-mt-2","mb-2"],["formControlName","all_day"],[1,"flex","items-center","space-x-2"],[1,"flex-1","w-1/3"],["for","start-time"],["name","start-time",3,"ngModelChange","ngModel","ngModelOptions","use_24hr","timezone"],["class","flex-1 w-1/3",4,"ngIf"],["for","end-time"],["name","end-time",3,"ngModelChange","ngModel","ngModelOptions","from","use_24hr","timezone"],["name","end-time","formControlName","duration",3,"time","max","use_24hr","timezone"],["favs","",1,"space-y-2","pb-4"],[1,"text-lg","font-medium"],[1,"flex","items-center"],["for","fav",1,"flex-1","w-1/2"],["name","fav",3,"ngModelChange","ngModel","ngModelOptions"],["features","",1,"space-y-2"],[4,"ngFor","ngForOf"],["class","flex items-center",4,"ngIf"],["for","feat",1,"flex-1","w-1/2"],["name","feat",3,"ngModelChange","ngModel","ngModelOptions"],[1,"px-2","pt-2","w-full","border-t","border-base-200"],["btn","","matRipple","","name","apply-space-filters",1,"w-full",3,"click"]]},template:function(i,s){if(1&i&&(m(0,"div",11)(1,"div",12),O(2,SKt,3,0,"button",13),_(),m(3,"h3",14),oe(4,0),_(),q(5,"div",15),_(),m(6,"form",16)(7,"section",17)(8,"h2",18),oe(9,1),_(),m(10,"div",19)(11,"label",20),oe(12,2),_(),O(13,EKt,4,6,"mat-form-field",21),H(14,"async"),O(15,IKt,7,13,"mat-form-field",21),H(16,"async"),O(17,AKt,5,9,"mat-form-field",21),_(),m(18,"div",22)(19,"div",23)(20,"label",24),Pi(21,3),q(22,"span"),$i(),_(),m(23,"a-date-field",25),P("ngModelChange",function(o){return s.form.patchValue({date:o})}),oe(24,4),H(25,"translate"),_()(),O(26,MKt,9,14,"div",26),_(),O(27,NKt,3,0,"div",27)(28,FKt,8,7,"div",28),_(),O(29,LKt,10,11,"section",29),H(30,"async"),O(31,BKt,5,3,"section",30),H(32,"async"),H(33,"async"),_(),O(34,VKt,3,0,"div",31)),2&i){let r,o,a;b(2),C("ngIf",s.can_close),b(4),C("formGroup",s.form),b(7),C("ngIf",s.use_region&&(null==(r=ne(14,18,s.regions))?null:r.length)),b(2),C("ngIf",!s.use_region&&(null==(o=ne(16,20,s.buildings))?null:o.length)>1),b(2),C("ngIf",!s.hide_levels),b(6),C("ngModel",s.form.getRawValue().date)("ngModelOptions",tn(30,em))("to",s.end_date)("short",!0)("timezone",s.timezone)("range",s.multiday?1:0),b(2),Vn(ne(25,22,"FORM.DATE_ERROR")),Gn(24),b(),C("ngIf",s.multiday),b(),C("ngIf",s.allow_all_day),b(),C("ngIf",!s.form.value.all_day),b(),C("ngIf",!s.viewing_map||!ne(30,24,s.using_mapspeople)),b(2),C("ngIf",(null==(a=ne(32,26,s.features))?null:a.length)&&(!s.viewing_map||!ne(33,28,s.using_mapspeople))),b(3),C("ngIf",s.can_close)}},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:100vw}"]})}return t})();function zKt(t,n){if(1&t){const e=se();m(0,"button",17),P("click",function(){return B(e),V(E().removeAllFeatures())}),S(1," Clear Filters "),_()}}function UKt(t,n){if(1&t&&(m(0,"div",18),S(1),_()),2&t){const e=E();b(),K(" ",e.location," ")}}function GKt(t,n){if(1&t&&(Wt(0),S(1),H(2,"date"),H(3,"date"),qt()),2&t){const e=E();b(),Os(" ",At(2,2,e.start,e.time_format)," \u2014 ",At(3,5,e.end,e.time_format)," ")}}function jKt(t,n){1&t&&(Wt(0),S(1,"All Day"),qt())}function HKt(t,n){if(1&t){const e=se();m(0,"div",19)(1,"p",20),S(2),_(),m(3,"button",21),P("click",function(){const s=B(e).$implicit;return V(E().removeFeature(s))}),m(4,"app-icon"),S(5,"close"),_()()()}if(2&t){const e=n.$implicit;b(2),Ye(e)}}let yTe=(()=>{class t extends hn{get all_day(){return this._event_form.form.value.all_day}get start(){return this._event_form.form.value.date}get end(){const{date:e,duration:i}=this._event_form.form.value;return e+60*i*1e3}get time_format(){return this._settings.time_format}constructor(e,i,s,r){super(),this._bsheet=e,this._event_form=i,this._org=s,this._settings=r,this.view="list",this.viewChange=new Ae,this.options=this._event_form.options,this.location="",this.editFilters=()=>this._bsheet.open(PP)}ngOnInit(){this.subscription("opts",this.options.subscribe(({zone_ids:e})=>this._updateLocation(e)))}removeFeature(e){var i=this;return z(function*(){const s=yield i._event_form.options.pipe(Zn(1)).toPromise();i._event_form.setOptions({...s,features:(s.features||[]).filter(r=>r!==e)})})()}removeAllFeatures(){var e=this;return z(function*(){const i=yield e._event_form.options.pipe(Zn(1)).toPromise();e._event_form.setOptions({...i,features:[]})})()}_updateLocation(e=[]){const s=this._org.levelWithID(e)||this._org.building;this.location=s?.display_name||s?.name||""}static#e=this.\u0275fac=function(i){return new(i||t)(I(Z2),I(ng),I(Sn),I(nn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["space-filters-display"]],inputs:{view:"view"},outputs:{viewChange:"viewChange"},features:[Ze],decls:23,vars:20,consts:()=>{let e,i,s,r;return e=$localize`:␟19eaa5cd51d70d9ea957eecac78cfd811e9b93d8␟5208858215712453646: Filters `,i=$localize`:␟992a9a6a193a56c5b8846dc972c5e1977ee5f1aa␟8553228906889869186: Map `,s=$localize`:␟4b286e90831dd637c5cd3eb20544664ee7112669␟7787942140742011951: List `,r=$localize`:␟dfdd3d7879401ba6edca2e5198df414f15c112c2␟5300384898733875729: Min. ${"\ufffd0\ufffd"}:INTERPOLATION: People `,[e,i,s,r,["actions","",1,"sm:hidden","space-x-2","flex","items-center","p-2"],["btn","","matRipple","","name","edit-space-filters",1,"flex-1","w-1/2",3,"click"],[1,"flex","items-center"],["btn","","matRipple","","name","view-space-map",1,"rounded-l","rounded-r-none",3,"click"],["btn","","matRipple","","name","view-space-list",1,"rounded-r","rounded-l-none",3,"click"],["filters","",1,"flex","items-center","flex-wrap","p-2","w-[35rem]","max-w-full","sm:max-w-[35rem]"],["btn","","matRipple","","name","clear-space-filters","class","min-h-[2rem] mb-2 mr-2",3,"click",4,"ngIf"],["filter-item","","zone","","class","dark:border-base-200-500",4,"ngIf"],["filter-item","","date","",1,"dark:border-base-200-500"],["filter-item","","time","",1,"dark:border-base-200-500"],[4,"ngIf"],["filter-item","","count","",1,"dark:border-base-200-500"],["filter-item","",4,"ngFor","ngForOf"],["btn","","matRipple","","name","clear-space-filters",1,"min-h-[2rem]","mb-2","mr-2",3,"click"],["filter-item","","zone","",1,"dark:border-base-200-500"],["filter-item",""],[1,"truncate"],["icon","","matRipple","","name","remove-space-filter",1,"-mr-4",3,"click"]]},template:function(i,s){if(1&i&&(m(0,"section",4)(1,"button",5),P("click",function(){return s.editFilters()}),oe(2,0),_(),m(3,"div",6)(4,"button",7),P("click",function(){return s.view="map",s.viewChange.emit(s.view)}),oe(5,1),_(),m(6,"button",8),P("click",function(){return s.view="list",s.viewChange.emit(s.view)}),oe(7,2),_()()(),m(8,"section",9),O(9,zKt,2,0,"button",10),H(10,"async"),O(11,UKt,2,1,"div",11),m(12,"div",12),S(13),H(14,"date"),_(),m(15,"div",13),O(16,GKt,4,8,"ng-container",14)(17,jKt,2,0,"ng-container",14),_(),m(18,"div",15),oe(19,3),H(20,"async"),_(),O(21,HKt,6,1,"div",16),H(22,"async"),_()),2&i){let r,o,a;b(4),Oe("inverse","map"!==s.view),b(2),Oe("inverse","list"!==s.view),b(3),C("ngIf",(null==(r=ne(10,11,s.options))||null==r.features?null:r.features.length)>1),b(2),C("ngIf",s.location),b(2),K(" ",At(14,13,s.start,"mediumDate")," "),b(3),C("ngIf",!s.all_day),b(),C("ngIf",s.all_day),b(3),Vn((null==(o=ne(20,16,s.options))?null:o.capacity)||2),Gn(19),b(),C("ngForOf",null==(a=ne(22,18,s.options))?null:a.features)}},dependencies:[on,mt,St,Tt,xi,fs],styles:["[filter-item][_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 1rem;min-height:2rem;font-size:.875rem;border:1px solid rgba(0,0,0,.2);border-radius:1.25rem;margin-right:.5rem;margin-bottom:.5rem;max-width:100%;text-align:center}[filter-item][_ngcontent-%COMP%]:hover{background:#0000001a}[filter-item][_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:.5rem}"]})}return t})();function WKt(t,n){1&t&&q(0,"img",18),2&t&&C("source",E(2).space.images[0])}function qKt(t,n){1&t&&q(0,"div",19)}function KKt(t,n){if(1&t&&(m(0,"div",20),S(1),_()),2&t){const e=E(2);b(),K(" ",e.available_until," ")}}function XKt(t,n){if(1&t&&(m(0,"div",21)(1,"span"),oe(2,3),_(),S(3),_()),2&t){const e=E(2);b(3),Os("",e.space.capacity," ",1===e.space.capacity?"person":"people"," ")}}function YKt(t,n){if(1&t&&(m(0,"li",24),S(1),_()),2&t){const e=n.$implicit;b(),K(" ",e," ")}}function ZKt(t,n){if(1&t&&(m(0,"ul",22),O(1,YKt,2,1,"li",23),_()),2&t){const e=E(2);b(),C("ngForOf",e.space.features)}}function QKt(t,n){if(1&t&&(m(0,"div",5),q(1,"div",6),m(2,"div",7)(3,"div",8),O(4,WKt,1,1,"img",9)(5,qKt,1,0,"div",10),_(),m(6,"div",11)(7,"div",12),S(8," "),oe(9,2),S(10," "),_(),O(11,KKt,2,1,"div",13),_(),m(12,"div",14)(13,"h4",15),S(14),_(),O(15,XKt,4,2,"div",16)(16,ZKt,2,1,"ul",17),_()()()),2&t){const e=E();Oe("-translate-x-full","end"===e.x_pos)("-translate-y-full","bottom"===e.y_pos),C("id",null==e.space?null:e.space.id),b(3),Oe("bg-neutral",e.space.images[0])("h-32",e.space.images[0])("h-8",!e.space.images[0]),b(),C("ngIf",e.space.images[0]),b(),C("ngIf",e.space.images[0]),b(2),$o("capitalize rounded p-1 px-2 text-light border border-white shadow "+e.status),b(2),Vn(e.status),Gn(9),b(2),C("ngIf","not-bookable"!==e.status),b(3),K(" ",e.space.display_name||e.space.name," "),b(),C("ngIf",e.space.capacity>=0),b(),C("ngIf",(null==e.space.features?null:e.space.features.length)>0&&e.show_features)}}let CK=(()=>{class t{get show_features(){return!this._settings.get("app.spaces.hide_features")}constructor(e,i,s){this._details=e,this._settings=i,this._element=s,this.space=this._details.space,this.events=this._details.events,this.status=this._details.status}ngOnInit(){setTimeout(()=>this.updateOffset(),200)}updateOffset(){const e=this._element.nativeElement.getBoundingClientRect();this.x_pos=e.x<document.body.clientWidth/2?"start":"end",this.y_pos=e.y<document.body.clientHeight/2?"top":"bottom"}get available_until(){return""}static#e=this.\u0275fac=function(i){return new(i||t)(I(Za),I(nn),I(vt))};static#t=this.\u0275cmp=Se({type:t,selectors:[["explore-space-info"]],decls:4,vars:7,consts:()=>{let e,i;return e=$localize`:␟86e6b3a473ea3e05830d2aef91c81199de1b9d33␟3658078071800974217:{VAR_SELECT, select, free {Free } busy {Busy } pending {Pending } reserved {Reserved } other {Not Bookable }}`,e=nb(e,{VAR_SELECT:"\ufffd0\ufffd"}),i=$localize`:␟36c2a5db33c6cfc9e239e589f975f5492bbb0550␟2292396409867038415:Capacity: `,[["tooltip",""],["space_tooltip",""],e,i,["customTooltip","",1,"h-full","w-full","pointer-events-auto","relative","hidden","sm:block","cursor-pointer",3,"mouseenter","content","backdrop","xPosition","yPosition","hover","delay"],["name","space-info",1,"absolute","rounded","bg-base-100","top-0","left-0","transform","shadow","pointer-events-none","overflow-hidden",3,"id"],[1,"arrow"],[1,"relative"],[1,"w-full","overflow-hidden","flex","items-center","justify-center","relative","bg-opacity-20"],["auth","","class","object-cover min-h-full min-w-full",3,"source",4,"ngIf"],["class","absolute inset-0 bg-neutral",4,"ngIf"],[1,"absolute","top-2","left-2","flex","flex-wrap","text-sm"],["status",""],["available-until","",4,"ngIf"],[1,"flex","flex-col","py-4","px-2"],[1,"font-medium","text-xl","mb-2","px-2"],["capacity","","class","text-base px-2 mb-2",4,"ngIf"],["class","flex flex-wrap",4,"ngIf"],["auth","",1,"object-cover","min-h-full","min-w-full",3,"source"],[1,"absolute","inset-0","bg-neutral"],["available-until",""],["capacity","",1,"text-base","px-2","mb-2"],[1,"flex","flex-wrap"],["class","text-xs px-2 py-1 m-1 rounded-2xl bg-base-200 font-medium",4,"ngFor","ngForOf"],[1,"text-xs","px-2","py-1","m-1","rounded-2xl","bg-base-200","font-medium"]]},template:function(i,s){if(1&i){const r=se();m(0,"div",4,0),P("mouseenter",function(){return B(r),V(s.updateOffset())}),_(),O(2,QKt,17,20,"ng-template",null,1,ln)}2&i&&(C("content",xt(3))("backdrop",!1)("xPosition","center")("yPosition","center")("hover",!0)("delay",3e3),wt("id",(null==s.space?null:s.space.map_id)||(null==s.space?null:s.space.id)))},styles:["[name=space-info][_ngcontent-%COMP%]{width:16rem}[status][_ngcontent-%COMP%]{background-color:#43a047;font-weight:500}[status].busy[_ngcontent-%COMP%]{background-color:#e53935}[status].pending[_ngcontent-%COMP%]{background-color:#ffb300}[status].not-bookable[_ngcontent-%COMP%]{background-color:#757575}"]})}return t})();function JKt(t,n){1&t&&(m(0,"button",10)(1,"app-icon"),S(2,"close"),_()())}function eXt(t,n){1&t&&(m(0,"div",15)(1,"label",24),S(2,"Host"),m(3,"span"),S(4,"*"),_(),S(5,":"),_(),q(6,"a-user-search-field",25),_())}function tXt(t,n){if(1&t&&(m(0,"div",26)(1,"label"),oe(2,5),_(),m(3,"div",27),S(4),H(5,"date"),H(6,"date"),_()()),2&t){const e=E(3);b(4),Os(" ",At(5,2,e.form.value.date,"mediumDate")," at ",At(6,5,e.form.value.date,e.time_format)," ")}}function nXt(t,n){if(1&t&&(m(0,"div",28)(1,"label"),oe(2,6),_(),q(3,"a-duration-field",29),_()),2&t){const e=E(3);b(3),C("time",e.form.value.date)("max",e.max_duration)("use_24hr",e.use_24hr_time)}}function iXt(t,n){if(1&t&&(m(0,"main",14)(1,"div",15)(2,"label",16),S(3,"Title"),m(4,"span"),S(5,"*"),_(),S(6,":"),_(),m(7,"mat-form-field",17),q(8,"input",18),m(9,"mat-error"),oe(10,3),_()()(),O(11,eXt,7,0,"div",19),m(12,"div",15)(13,"label"),oe(14,4),_(),m(15,"div",20),S(16),_()(),m(17,"div",21),O(18,tXt,7,8,"div",22)(19,nXt,4,3,"div",23),_()()),2&t){const e=E(2);C("formGroup",e.form),b(11),C("ngIf",e.can_book_for_others),b(5),K(" ",(null==e.form.controls.resources||null==e.form.controls.resources.value[0]?null:e.form.controls.resources.value[0].display_name)||(null==e.form.controls.resources||null==e.form.controls.resources.value[0]?null:e.form.controls.resources.value[0].name)," "),b(2),C("ngIf",e.form.controls.date),b(),C("ngIf",e.form.controls.duration)}}function sXt(t,n){if(1&t){const e=se();Wt(0),O(1,iXt,20,5,"main",11),m(2,"footer",12)(3,"button",13),P("click",function(){return B(e),V(E().save())}),oe(4,2),_()(),qt()}if(2&t){const e=E();b(),C("ngIf",e.form)}}function rXt(t,n){if(1&t&&(m(0,"div",30),q(1,"mat-spinner",31),m(2,"p"),S(3),H(4,"async"),_()()),2&t){const e=E();b(),C("diameter",48),b(2),Ye(ne(4,2,e.loading))}}let SK=(()=>{class t{get form(){return this._event_form.form}get max_duration(){return this._settings.get("app.events.max_duration")||240}get can_book_for_others(){return this._settings.get("app.events.can_book_for_others")}get use_24hr_time(){return this._settings.get("app.use_24_hour_time")}get time_format(){return this._settings.time_format}constructor(e,i,s,r,o){this._data=e,this._settings=i,this._event_form=s,this._dialog_ref=r,this._router=o,this.loading=this._event_form.loading}ngOnInit(){this._event_form.newForm(),this.form.patchValue({resources:[this._data.space],host:Qt().email,organiser:Qt()})}save(){var e=this;return z(function*(){yield e._event_form.postForm().catch(i=>{throw Ti(i),i}),e._settings.app_name.toLowerCase().includes("workplace")?e._router.navigate(["/book","meeting","success"]):ep("Successfully booked room."),e._dialog_ref.close()})()}static#e=this.\u0275fac=function(i){return new(i||t)(I(or),I(nn),I(ng),I(Xa),I(lo))};static#t=this.\u0275cmp=Se({type:t,selectors:[["explore-booking-modal"]],decls:10,vars:7,consts:()=>{let e,i,s,r,o,a,l;return e=$localize`:␟bd532c9813cc0577fcc3ff32640a61afef2bf40a␟6464057252608386690:New Booking`,i=$localize`:␟2fa313c798ad138557539ba3c6a3bfdc426eaaa2␟2367152680379951719: Save `,s=$localize`:␟5cf0071757dd8065e052662e4d191a210c766579␟2997066279074525950:Booking Title`,r=$localize`:␟35a900d9fa8e824539ca4b0d1a10bd2f7f8c1172␟8953173802652113530:Booking title is required`,o=$localize`:␟0f342dcd63b8732a5599eb91ce166b55335dbbc4␟1329943553963489238:Space:`,a=$localize`:␟05fa0bded36de6e73a1fa44838b627349dace044␟6899410641137821757:Date:`,l=$localize`:␟e17a1d75189da843f541f7764f188f2b19a97df2␟4220765745195024064:Duration:`,[["load_state",""],e,i,r,o,a,l,[1,"flex-1"],["icon","","matRipple","","mat-dialog-close","",4,"ngIf"],[4,"ngIf","ngIfElse"],["icon","","matRipple","","mat-dialog-close",""],["class","p-4 max-w-[85vw]",3,"formGroup",4,"ngIf"],[1,"flex","justify-center","p-2","border-t","border-base-200"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"p-4","max-w-[85vw]",3,"formGroup"],[1,"flex","flex-col"],["for","title"],["appearance","outline"],["matInput","","name","title","formControlName","title","placeholder",s],["class","flex flex-col",4,"ngIf"],["name","space",1,"px-4","py-3","border","border-base-200","rounded","w-full","mb-4"],[1,"flex","sm:space-x-4","flex-wrap"],["class","flex flex-col flex-1 w-full sm:w-auto",4,"ngIf"],["class","flex flex-col w-full sm:w-auto",4,"ngIf"],["for","host"],["name","host","formControlName","organiser",1,"mb-4"],[1,"flex","flex-col","flex-1","w-full","sm:w-auto"],[1,"px-4","py-3","border","border-base-200","rounded","w-full","mb-4"],[1,"flex","flex-col","w-full","sm:w-auto"],["formControlName","duration",1,"w-full",3,"time","max","use_24hr"],["load","",1,"h-64","flex","flex-col","items-center","justify-center"],[1,"m-4",3,"diameter"]]},template:function(i,s){if(1&i&&(m(0,"header")(1,"h2"),oe(2,1),_(),q(3,"div",7),O(4,JKt,3,0,"button",8),H(5,"async"),_(),O(6,sXt,5,1,"ng-container",9),H(7,"async"),O(8,rXt,5,4,"ng-template",null,0,ln)),2&i){const r=xt(9);b(4),C("ngIf",!ne(5,3,s.loading)),b(2),C("ngIf",!ne(7,5,s.loading))("ngIfElse",r)}},styles:["header[_ngcontent-%COMP%]{max-width:calc(100vw + 100%)}[load][_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem)}"]})}return t})();function Wr(t){var n=this;t="object"==typeof t?t:{},n.revision=3,n.imageTypes={bmp:"image/bmp",gif:"image/gif",jpeg:"image/jpeg",jpg:"image/jpg",png:"image/png","svg+xml":"image/svg+xml",tiff:"image/tiff",webp:"image/webp","x-icon":"image/x-icon"},n.toTable=t.toTable,n.domElement=n.toTable?document.createElement("div"):document.createElement("canvas"),n.url=t.url||"",n.size=t.size||280,n.qrc=!1,n.colorLight=t.colorLight||"#fff",n.colorDark=t.colorDark||"#000",n.ecclevel=t.ecclevel||1,n.noBorder=t.noBorder,n.borderSize=t.borderSize||4;var e,i,s,r,o,a,l,c=[],u=[],d=[],h=[],p=[],f=[],g=function(N,D){var F;N>D&&(F=N,N=D,D=F),F=D,F*=D,F+=D,F>>=1,h[F+=N]=1},v=function(N,D){var F;for(d[N+s*D]=1,F=-2;F<2;F++)d[N+F+s*(D-2)]=1,d[N-2+s*(D+F+1)]=1,d[N+2+s*(D+F)]=1,d[N+F+1+s*(D+2)]=1;for(F=0;F<2;F++)g(N-1,D+F),g(N+1,D-F),g(N-F,D-1),g(N+F,D+1)},y=function(N){for(;N>=255;)N=((N-=255)>>8)+(255&N);return N},w=function(N,D,F,$){var j,Q,Y,ce=Wr.gexp,Ce=Wr.glog;for(j=0;j<$;j++)c[F+j]=0;for(j=0;j<D;j++){if(255!=(Y=Ce[c[N+j]^c[F]]))for(Q=1;Q<$;Q++)c[F+Q-1]=c[F+Q]^ce[y(Y+f[$-Q])];else for(Q=F;Q<F+$;Q++)c[Q]=c[Q+1];c[F+$-1]=255==Y?0:ce[y(Y+f[0])]}},x=function(N,D){var F;return N>D&&(F=N,N=D,D=F),F=D,F+=D*D,F>>=1,h[F+=N]},T=function(N){var D,F,$,j;switch(N){case 0:for(F=0;F<s;F++)for(D=0;D<s;D++)D+F&1||x(D,F)||(d[D+F*s]^=1);break;case 1:for(F=0;F<s;F++)for(D=0;D<s;D++)1&F||x(D,F)||(d[D+F*s]^=1);break;case 2:for(F=0;F<s;F++)for($=0,D=0;D<s;D++,$++)3==$&&($=0),$||x(D,F)||(d[D+F*s]^=1);break;case 3:for(j=0,F=0;F<s;F++,j++)for(3==j&&(j=0),$=j,D=0;D<s;D++,$++)3==$&&($=0),$||x(D,F)||(d[D+F*s]^=1);break;case 4:for(F=0;F<s;F++)for($=0,j=F>>1&1,D=0;D<s;D++,$++)3==$&&($=0,j=!j),j||x(D,F)||(d[D+F*s]^=1);break;case 5:for(j=0,F=0;F<s;F++,j++)for(3==j&&(j=0),$=0,D=0;D<s;D++,$++)3==$&&($=0),(D&F&1)+!(!$|!j)||x(D,F)||(d[D+F*s]^=1);break;case 6:for(j=0,F=0;F<s;F++,j++)for(3==j&&(j=0),$=0,D=0;D<s;D++,$++)3==$&&($=0),(D&F&1)+($&&$==j)&1||x(D,F)||(d[D+F*s]^=1);break;case 7:for(j=0,F=0;F<s;F++,j++)for(3==j&&(j=0),$=0,D=0;D<s;D++,$++)3==$&&($=0),($&&$==j)+(D+F&1)&1||x(D,F)||(d[D+F*s]^=1)}},k=function(N){var D,F=0;for(D=0;D<=N;D++)p[D]>=5&&(F+=Wr.N1+p[D]-5);for(D=3;D<N-1;D+=2)p[D-2]==p[D+2]&&p[D+2]==p[D-1]&&p[D-1]==p[D+1]&&3*p[D-1]==p[D]&&(0==p[D-3]||D+3>N||3*p[D-3]>=4*p[D]||3*p[D+3]>=4*p[D])&&(F+=Wr.N3);return F},R=function(){var N,D,F,$,j,Q=0,Y=0;for(D=0;D<s-1;D++)for(N=0;N<s-1;N++)(d[N+s*D]&&d[N+1+s*D]&&d[N+s*(D+1)]&&d[N+1+s*(D+1)]||!(d[N+s*D]||d[N+1+s*D]||d[N+s*(D+1)]||d[N+1+s*(D+1)]))&&(Q+=Wr.N2);for(D=0;D<s;D++){for(p[0]=0,F=$=N=0;N<s;N++)(j=d[N+s*D])==$?p[F]++:p[++F]=1,Y+=($=j)?1:-1;Q+=k(F)}Y<0&&(Y=-Y);var ce=Y,Ce=0;for(ce+=ce<<2,ce<<=1;ce>s*s;)ce-=s*s,Ce++;for(Q+=Ce*Wr.N4,N=0;N<s;N++){for(p[0]=0,F=$=D=0;D<s;D++)(j=d[N+s*D])==$?p[F]++:p[++F]=1,$=j;Q+=k(F)}return Q};n.genframe=function(N){var D,F,$,j,Q,Y,ce,Ce,Z=Wr.eccblocks,le=Wr.gexp,te=Wr.glog;j=N.length,i=0;do{if(i++,$=4*(e-1)+16*(i-1),r=Z[$++],o=Z[$++],a=Z[$++],l=Z[$],j<=($=a*(r+o)+o-3+(i<=9)))break}while(i<40);for(s=17+4*i,Q=a+(a+l)*(r+o)+o,j=0;j<Q;j++)u[j]=0;for(c=N.slice(0),j=0;j<s*s;j++)d[j]=0;for(j=0;j<(s*(s+1)+1)/2;j++)h[j]=0;for(j=0;j<3;j++){for($=0,F=0,1==j&&($=s-7),2==j&&(F=s-7),d[F+3+s*($+3)]=1,D=0;D<6;D++)d[F+D+s*$]=1,d[F+s*($+D+1)]=1,d[F+6+s*($+D)]=1,d[F+D+1+s*($+6)]=1;for(D=1;D<5;D++)g(F+D,$+1),g(F+1,$+D+1),g(F+5,$+D),g(F+D+1,$+5);for(D=2;D<4;D++)d[F+D+s*($+2)]=1,d[F+2+s*($+D+1)]=1,d[F+4+s*($+D)]=1,d[F+D+1+s*($+4)]=1}if(i>1)for(j=Wr.adelta[i],F=s-7;;){for(D=s-7;D>j-3&&(v(D,F),!(D<j));)D-=j;if(F<=j+9)break;v(6,F-=j),v(F,6)}for(d[8+s*(s-8)]=1,F=0;F<7;F++)g(7,F),g(s-8,F),g(7,F+s-7);for(D=0;D<8;D++)g(D,7),g(D+s-8,7),g(D,s-8);for(D=0;D<9;D++)g(D,8);for(D=0;D<8;D++)g(D+s-8,8),g(8,D);for(F=0;F<7;F++)g(8,F+s-7);for(D=0;D<s-14;D++)1&D?(g(8+D,6),g(6,8+D)):(d[8+D+6*s]=1,d[6+s*(8+D)]=1);if(i>6)for(j=Wr.vpat[i-7],$=17,D=0;D<6;D++)for(F=0;F<3;F++,$--)1&($>11?i>>$-12:j>>$)?(d[5-D+s*(2-F+s-11)]=1,d[2-F+s-11+s*(5-D)]=1):(g(5-D,2-F+s-11),g(2-F+s-11,5-D));for(F=0;F<s;F++)for(D=0;D<=F;D++)d[D+s*F]&&g(D,F);for(Q=c.length,Y=0;Y<Q;Y++)u[Y]=c.charCodeAt(Y);if(c=u.slice(0),Q>=(D=a*(r+o)+o)-2&&(Q=D-2,i>9&&Q--),Y=Q,i>9){for(c[Y+2]=0,c[Y+3]=0;Y--;)c[Y+3]|=255&(j=c[Y])<<4,c[Y+2]=j>>4;c[2]|=255&Q<<4,c[1]=Q>>4,c[0]=64|Q>>12}else{for(c[Y+1]=0,c[Y+2]=0;Y--;)c[Y+2]|=255&(j=c[Y])<<4,c[Y+1]=j>>4;c[1]|=255&Q<<4,c[0]=64|Q>>4}for(Y=Q+3-(i<10);Y<D;)c[Y++]=236,c[Y++]=17;for(f[0]=1,Y=0;Y<l;Y++){for(f[Y+1]=1,ce=Y;ce>0;ce--)f[ce]=f[ce]?f[ce-1]^le[y(te[f[ce]]+Y)]:f[ce-1];f[0]=le[y(te[f[0]]+Y)]}for(Y=0;Y<=l;Y++)f[Y]=te[f[Y]];for($=D,F=0,Y=0;Y<r;Y++)w(F,a,$,l),F+=a,$+=l;for(Y=0;Y<o;Y++)w(F,a+1,$,l),F+=a+1,$+=l;for(F=0,Y=0;Y<a;Y++){for(ce=0;ce<r;ce++)u[F++]=c[Y+ce*a];for(ce=0;ce<o;ce++)u[F++]=c[r*a+Y+ce*(a+1)]}for(ce=0;ce<o;ce++)u[F++]=c[r*a+Y+ce*(a+1)];for(Y=0;Y<l;Y++)for(ce=0;ce<r+o;ce++)u[F++]=c[D+Y+ce*l];for(c=u,D=F=s-1,$=Q=1,Ce=(a+l)*(r+o)+o,Y=0;Y<Ce;Y++)for(j=c[Y],ce=0;ce<8;ce++,j<<=1){128&j&&(d[D+s*F]=1);do{Q?D--:(D++,$?0!=F?F--:($=!$,6==(D-=2)&&(D--,F=9)):F!=s-1?F++:($=!$,6==(D-=2)&&(D--,F-=8))),Q=!Q}while(x(D,F))}for(c=d.slice(0),j=0,F=3e4,$=0;$<8&&(T($),(D=R())<F&&(F=D,j=$),7!=j);$++)d=c.slice(0);for(j!=$&&T(j),F=Wr.fmtword[j+(e-1<<3)],$=0;$<8;$++,F>>=1)1&F&&(d[s-1-$+8*s]=1,$<6?d[8+s*$]=1:d[8+s*($+1)]=1);for($=0;$<7;$++,F>>=1)1&F&&(d[8+s*(s-7+$)]=1,$?d[6-$+8*s]=1:d[7+8*s]=1);return d},n.init=function(){e=n.ecclevel;var N=n.genframe(n.url);n.toTable?n.tableWrite(N,s):n.canvasWrite(N,s)},n.init()}Wr.prototype={canvasWrite:function(t,n){if(!this.qrc&&(this.qrc=this.getContext(this.domElement),!this.qrc))return this.toTable=!0,this.domElement=document.createElement("div"),void this.tableWrite(t,n);var e=this.size,i=this.qrc;i.lineWidth=1;var s=e;s/=n+10,s=Math.round(s-.5);var r=4;this.noBorder?(i.canvas.width=i.canvas.height=s*n,r=0):i.canvas.width=i.canvas.height=e,i.clearRect(0,0,e,e),i.fillStyle=this.colorLight,i.fillRect(0,0,s*(n+8),s*(n+8)),i.fillStyle=this.colorDark;for(var o=0;o<n;o++)for(var a=0;a<n;a++)t[a*n+o]&&i.fillRect(s*(r+o),s*(r+a),s,s)},tableWrite:function(t,n){var e=this,i=Math.round(this.size/n-3.5)+"px",s=n+(e.noBorder?0:2*e.borderSize),r=e.borderSize,o="width:"+i+";height:"+i+";",a=e.colorLight,l=e.colorDark,c=document.createElement("table");c.style.cssText="border:0;border-collapse:collapse;";for(var u,d=document.createElement("tr"),h=document.createElement("td"),p=function(){return h.cloneNode()},f=function(){var k=p();return k.style.cssText=o+"background:"+a,k},g=function(k){for(var R=k.firstChild,N=0;N<r;N++)k.insertBefore(f(),R),k.appendChild(f())},v=0;v<n;v++){var y=d.cloneNode();c.appendChild(y);for(var w=0;w<n;w++)if(1===t[v*n+w]){var x=(u=void 0,(u=p()).style.cssText=o+"background:"+l,u);y.appendChild(x)}else{var T=f();y.appendChild(T)}e.noBorder||g(y)}e.noBorder||function(k){for(var R=k.firstChild,N=0;N<e.borderSize;N++){for(var D=d.cloneNode(),F=0;F<s;F++){var $=f();D.appendChild($)}k.appendChild(D),k.insertBefore(D.cloneNode(!0),R)}}(c),e.domElement.innerHTML="",e.domElement.appendChild(c)},getContext:function(t){return t.getContext&&t.getContext("2d")?t.getContext("2d"):(console.log("Browser does not have 2d Canvas support"),!1)},toImage:function(t){if(this.qrc){var n=this.imageTypes[t];if(!n)throw new Error(t+" is not a valid image type ");var e=new Image;return e.src=this.domElement.toDataURL(n),e}}},Wr.adelta=[0,11,15,19,23,27,31,16,18,20,22,24,26,28,20,22,24,24,26,28,28,22,24,24,26,26,28,28,24,24,26,26,26,28,28,24,26,26,26,28,28],Wr.vpat=[3220,1468,2713,1235,3062,1890,2119,1549,2344,2936,1117,2583,1330,2470,1667,2249,2028,3780,481,4011,142,3098,831,3445,592,2517,1776,2234,1951,2827,1070,2660,1345,3177],Wr.fmtword=[30660,29427,32170,30877,26159,25368,27713,26998,21522,20773,24188,23371,17913,16590,20375,19104,13663,12392,16177,14854,9396,8579,11994,11245,5769,5054,7399,6608,1890,597,3340,2107],Wr.eccblocks=[1,0,19,7,1,0,16,10,1,0,13,13,1,0,9,17,1,0,34,10,1,0,28,16,1,0,22,22,1,0,16,28,1,0,55,15,1,0,44,26,2,0,17,18,2,0,13,22,1,0,80,20,2,0,32,18,2,0,24,26,4,0,9,16,1,0,108,26,2,0,43,24,2,2,15,18,2,2,11,22,2,0,68,18,4,0,27,16,4,0,19,24,4,0,15,28,2,0,78,20,4,0,31,18,2,4,14,18,4,1,13,26,2,0,97,24,2,2,38,22,4,2,18,22,4,2,14,26,2,0,116,30,3,2,36,22,4,4,16,20,4,4,12,24,2,2,68,18,4,1,43,26,6,2,19,24,6,2,15,28,4,0,81,20,1,4,50,30,4,4,22,28,3,8,12,24,2,2,92,24,6,2,36,22,4,6,20,26,7,4,14,28,4,0,107,26,8,1,37,22,8,4,20,24,12,4,11,22,3,1,115,30,4,5,40,24,11,5,16,20,11,5,12,24,5,1,87,22,5,5,41,24,5,7,24,30,11,7,12,24,5,1,98,24,7,3,45,28,15,2,19,24,3,13,15,30,1,5,107,28,10,1,46,28,1,15,22,28,2,17,14,28,5,1,120,30,9,4,43,26,17,1,22,28,2,19,14,28,3,4,113,28,3,11,44,26,17,4,21,26,9,16,13,26,3,5,107,28,3,13,41,26,15,5,24,30,15,10,15,28,4,4,116,28,17,0,42,26,17,6,22,28,19,6,16,30,2,7,111,28,17,0,46,28,7,16,24,30,34,0,13,24,4,5,121,30,4,14,47,28,11,14,24,30,16,14,15,30,6,4,117,30,6,14,45,28,11,16,24,30,30,2,16,30,8,4,106,26,8,13,47,28,7,22,24,30,22,13,15,30,10,2,114,28,19,4,46,28,28,6,22,28,33,4,16,30,8,4,122,30,22,3,45,28,8,26,23,30,12,28,15,30,3,10,117,30,3,23,45,28,4,31,24,30,11,31,15,30,7,7,116,30,21,7,45,28,1,37,23,30,19,26,15,30,5,10,115,30,19,10,47,28,15,25,24,30,23,25,15,30,13,3,115,30,2,29,46,28,42,1,24,30,23,28,15,30,17,0,115,30,10,23,46,28,10,35,24,30,19,35,15,30,17,1,115,30,14,21,46,28,29,19,24,30,11,46,15,30,13,6,115,30,14,23,46,28,44,7,24,30,59,1,16,30,12,7,121,30,12,26,47,28,39,14,24,30,22,41,15,30,6,14,121,30,6,34,47,28,46,10,24,30,2,64,15,30,17,4,122,30,29,14,46,28,49,10,24,30,24,46,15,30,4,18,122,30,13,32,46,28,48,14,24,30,42,32,15,30,20,4,117,30,40,7,47,28,43,22,24,30,10,67,15,30,19,6,118,30,18,31,47,28,34,34,24,30,20,61,15,30],Wr.glog=[255,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175],Wr.gexp=[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,0],Wr.N1=3,Wr.N2=3,Wr.N3=40,Wr.N4=10;const tm={free:"#43a047",pending:"#ffb300",reserved:"#e65100",busy:"#e53935","signs-of-life":"#1565c0","not-bookable":"#757575",unknown:"#757575"};function lXt(t,n){1&t&&q(0,"div",16)}function cXt(t,n){1&t&&(m(0,"app-icon",17),S(1," done "),_())}let STe=(()=>{class t{get color(){return this.active?"#F4511E":this.selected?"#D32F2F":"#309251"}constructor(e){this._data=e,this.selected=!0===this._data.selected,this.active=!0===this._data.active}static#e=this.\u0275fac=function(i){return new(i||t)(I(Za))};static#t=this.\u0275cmp=Se({type:t,selectors:[["space-location-pin"]],decls:17,vars:3,consts:[[1,"absolute","bottom-0","left-1/2","-translate-x-1/2"],["width","44","height","60","viewBox","0 0 66 80","fill","none","xmlns","http://www.w3.org/2000/svg"],["filter","url(#filter0_d_1065_10313)"],["d","M19.724 53.0408C25.0871 60.3435 30.5582 65.8583 31.0184 66.3178C31.4558 66.755 32.0489 67.0007 32.6674 67.0008H32.6678C33.2863 67.0007 33.8795 66.755 34.3169 66.3178C34.7771 65.8583 40.2481 60.3435 45.6112 53.0408C48.2928 49.3894 50.963 45.2701 52.9663 41.0957C54.9629 36.935 56.3331 32.6459 56.3342 28.6724C56.364 25.5564 55.7725 22.4657 54.5941 19.5809C53.415 16.6946 51.6722 14.0724 49.4675 11.8677C47.2629 9.66308 44.6407 7.92024 41.7544 6.74121C38.8711 5.5634 35.782 4.97184 32.6676 5.00103C29.5533 4.97184 26.4642 5.5634 23.5809 6.74121C20.6946 7.92024 18.0724 9.66308 15.8677 11.8677C13.6631 14.0724 11.9202 16.6946 10.7412 19.5809C9.56278 22.4657 8.97122 25.5565 9.00108 28.6726C9.0022 32.646 10.3724 36.9351 12.369 41.0957C14.3723 45.2701 17.0425 49.3894 19.724 53.0408Z","stroke","#0B421D","stroke-width","2"],["id","filter0_d_1065_10313","x","0","y","0","width","65.3353","height","80.001","filterUnits","userSpaceOnUse","color-interpolation-filters","sRGB"],["flood-opacity","0","result","BackgroundImageFix"],["in","SourceAlpha","type","matrix","values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0","result","hardAlpha"],["dy","4"],["stdDeviation","4"],["in2","hardAlpha","operator","out"],["type","matrix","values","0 0 0 0 0.0196078 0 0 0 0 0.109804 0 0 0 0 0.172549 0 0 0 0.2 0"],["mode","normal","in2","BackgroundImageFix","result","effect1_dropShadow_1065_10313"],["mode","normal","in","SourceGraphic","in2","effect1_dropShadow_1065_10313","result","shape"],[1,"absolute","top-0","left-0","w-full","h-3/4","flex","items-center","justify-center"],["class","relative z-10 h-4 w-4 rounded-full bg-base-100 border-2 border-[#0B421D]",4,"ngIf"],["class","relative text-white z-10 text-2xl",4,"ngIf"],[1,"relative","z-10","h-4","w-4","rounded-full","bg-base-100","border-2","border-[#0B421D]"],[1,"relative","text-white","z-10","text-2xl"]],template:function(i,s){1&i&&(m(0,"div",0),ka(),m(1,"svg",1)(2,"g",2),q(3,"path",3),_(),m(4,"defs")(5,"filter",4),q(6,"feFlood",5)(7,"feColorMatrix",6)(8,"feOffset",7)(9,"feGaussianBlur",8)(10,"feComposite",9)(11,"feColorMatrix",10)(12,"feBlend",11)(13,"feBlend",12),_()()(),bm(),m(14,"div",13),O(15,lXt,1,0,"div",14)(16,cXt,2,0,"app-icon",15),_()()),2&i&&(b(3),wt("fill",s.color),b(12),C("ngIf",!s.selected),b(),C("ngIf",s.selected))},dependencies:[mt,St],encapsulation:2})}return t})();const uXt=()=>({controls:!0}),dXt=()=>({standalone:!0});function hXt(t,n){if(1&t&&(m(0,"div",10),S(1),H(2,"building"),m(3,"span",11),S(4," - "),_()()),2&t){let e;const i=E().$implicit;b(),K(" ",null==(e=ne(2,1,i.parent_id))?null:e.display_name," ")}}function pXt(t,n){if(1&t&&(m(0,"mat-option",7)(1,"div",8),O(2,hXt,5,3,"div",9),m(3,"div"),S(4),_()()()),2&t){const e=n.$implicit,i=E(2);C("value",e),b(2),C("ngIf",i.use_region),b(2),K(" ",e.display_name||e.name," ")}}function fXt(t,n){if(1&t){const e=se();m(0,"mat-form-field",4)(1,"mat-select",5),ii("ngModelChange",function(s){B(e);const r=E();return jn(r.level,s)||(r.level=s),V(s)}),P("ngModelChange",function(s){return B(e),V(E().setOptions({zone_ids:[s.id]}))}),O(2,pXt,5,3,"mat-option",6),H(3,"async"),_()()}if(2&t){const e=E();b(),ni("ngModel",e.level),C("ngModelOptions",tn(5,dXt)),b(),C("ngForOf",ne(3,3,e.levels))}}let EK=(()=>{class t extends hn{get map_url(){return this.level?.map_id||""}get use_region(){return!!this._settings.get("app.use_region")}constructor(e,i,s){super(),this._event_form=e,this._org=i,this._settings=s,this.selected=[],this.is_displayed=!1,this.onSelect=new Ae,this.zoom=1,this.center={x:.5,y:.5},this.coordinates=void 0,this._seletedSpace=r=>()=>{this.onSelect.emit(r),this._change.next(Date.now())},this.level=null,this._change=new at(0),this.levels=Vt([this._org.active_region,this._org.active_building]).pipe(me(([r,o])=>(this.use_region?this._org.levelsForRegion(r):this._org.levelsForBuilding(o)).filter(c=>!c.tags.includes("parking")).sort((c,u)=>c.parent_id.localeCompare(u.parent_id)||(c.display_name||"").localeCompare(u.display_name||"")))),this.setOptions=r=>this._event_form.setOptions(r),this.features=Vt([this._event_form.available_spaces,this._change]).pipe(_s(300),me(([r])=>r.map(o=>({location:o.map_id,content:STe,data:{...o,active:this.active===o.id,selected:this.selected.includes(o.id)}})))),this.actions=this._event_form.available_spaces.pipe(me(r=>r.map(o=>({id:o.map_id,action:["touchend","mouseup"],callback:this._seletedSpace(o)})))),this.styles=Vt([this._event_form.spaces,this._event_form.available_spaces]).pipe(me(([r,o])=>r.reduce((a,l)=>{const c=this._settings.get("app.explore.colors")||{},u=o.find(d=>d.id===l.id)?"free":"busy";return a[`#${l.map_id||l.id}`]={fill:c[`space-${u}`]||c[`${u}`]||tm[`${u}`]},a},{})))}ngOnInit(){this.subscription("levels_update",this._event_form.options.subscribe(({zone_ids:e})=>{const i=this._org.levelWithID(e);i&&(this.level=i)}))}setLevel(e){this.setOptions({zone_ids:[e?.id]});const i=this._org.buildings.find(s=>s.id===e?.parent_id);if(i){const[s,r]=(e.location||i.location).split(",").map(o=>parseFloat(o));this.coordinates={latitude:s,longitude:r}}this.level=e}setZoom(e){this.zoom=Math.max(.5,Math.min(10,e))}resetMap(){this.zoom=1,this.center={x:.5,y:.5}}static#e=this.\u0275fac=function(i){return new(i||t)(I(ng),I(Sn),I(nn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["space-map"]],inputs:{selected:"selected",active:"active",is_displayed:"is_displayed"},outputs:{onSelect:"onSelect"},features:[Ze],decls:8,vars:17,consts:()=>{let e;return e=$localize`:␟50407595967bf29832e873b41f9de3502d5c3e03␟7323982518822503502:Any Level`,[[1,"bg-base-100","p-2","border-b","border-base-200","w-full"],["appearance","outline","class","w-full",4,"ngIf"],[1,"relative","flex-1","w-full"],[3,"zoomChange","centerChange","src","zoom","center","styles","features","actions","options"],["appearance","outline",1,"w-full"],["name","location","placeholder",e,3,"ngModelChange","ngModel","ngModelOptions"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex","flex-col-reverse"],["class","opacity-30 text-xs",4,"ngIf"],[1,"opacity-30","text-xs"],[1,"opacity-0"]]},template:function(i,s){if(1&i&&(m(0,"div",0),O(1,fXt,4,6,"mat-form-field",1),H(2,"async"),_(),m(3,"div",2)(4,"interactive-map",3),H(5,"async"),H(6,"async"),H(7,"async"),ii("zoomChange",function(o){return jn(s.zoom,o)||(s.zoom=o),o})("centerChange",function(o){return jn(s.center,o)||(s.center=o),o}),_()()),2&i){let r;b(),C("ngIf",null==(r=ne(2,8,s.levels))?null:r.length),b(3),C("src",s.map_url),ni("zoom",s.zoom)("center",s.center),C("styles",ne(5,10,s.styles))("features",ne(6,12,s.features))("actions",ne(7,14,s.actions))("options",tn(16,uXt))}},styles:["[_nghost-%COMP%]{position:relative;background:#0000000d;display:flex;flex-direction:column}button[_ngcontent-%COMP%]{border-radius:0}"]})}return t})(),xTe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[Ka,Lb,pv,bk,v5t,I0,pf,$u]})}return t})();function mXt(t,n){1&t&&q(0,"mat-spinner",18),2&t&&C("diameter",32)}function _Xt(t,n){if(1&t&&(m(0,"mat-option",19)(1,"div",20)(2,"div",21),S(3),_(),m(4,"div",22),S(5),_()()()),2&t){const e=n.$implicit;C("value",e.id),b(3),Ye(e.name),b(2),K(" ",e.id," ")}}function gXt(t,n){1&t&&(m(0,"mat-option",23),S(1),H(2,"translate"),_()),2&t&&(b(),K(" ",ne(2,1,"PANEL.BOOTSTRAP_INPUT_PLACEHOLDER")," "))}function bXt(t,n){if(1&t){const e=se();m(0,"main",10)(1,"label",11),oe(2,2),H(3,"translate"),_(),m(4,"mat-form-field",12)(5,"input",13),H(6,"async"),P("ngModelChange",function(s){return B(e),V(E().system_id$.next(s))}),_(),O(7,mXt,1,1,"mat-spinner",14),m(8,"mat-hint",15),S(9," Select the system to connect to for Assistant functionality "),_()(),m(10,"mat-autocomplete",null,1),O(12,_Xt,6,3,"mat-option",16),H(13,"async"),O(14,gXt,3,3,"mat-option",17),H(15,"async"),_()()}if(2&t){let e;const i=xt(11),s=E();b(3),Vn(ne(3,6,"PANEL.BOOTSTRAP_LABEL")),Gn(2),b(2),C("ngModel",ne(6,8,s.system_id$))("matAutocomplete",i),b(2),C("ngIf","search"===s.loading),b(5),C("ngForOf",ne(13,10,s.space_list)),b(2),C("ngIf",(null==(e=s.system_id$.getValue())?null:e.length)<2&&!(null!=(e=ne(15,12,s.space_list))&&e.length))}}function vXt(t,n){if(1&t){const e=se();m(0,"footer",24)(1,"button",25),P("click",function(){return B(e),V(E().bootstrap())}),oe(2,3),H(3,"translate"),_()()}if(2&t){const e=E();b(),C("disabled",!e.system_id$.getValue()),b(2),Vn(ne(3,2,"COMMON.CONTINUE")),Gn(2)}}function yXt(t,n){if(1&t&&(m(0,"main",26),q(1,"mat-spinner",27),m(2,"p"),S(3),_()()),2&t){const e=E();b(),C("diameter",48),b(2),Ye(e.loading)}}Ts(vq,[mt,Ls,St,Tt,yK,wK,PP,yTe,EK],[]),Ts(yK,[on,mt,St,gc,cv,Tt],[]),Ts(wK,[on,mt,St,jl,Tt,Zs],[xi]),Ts(PP,[on,mt,St,mr,zs,ko,Tt,$l,fd,Mp,tg,hf,pi,cc,Vi,pa,Fl],[xi,iw,jh]),Ts(EK,[on,mt,gc,mr,zs,ko,pi,Vi],[xi,iw]);const TK="PLACEOS.ASSISTANT.system",wXt=[{path:"bootstrap",component:(()=>{class t extends hn{constructor(e,i,s){super(),this._org=e,this._router=i,this._route=s,this.loading="",this.system_id$=new at(""),this.space_list=Vt([this.system_id$,this._org.initialised]).pipe(_s(300),Kt(([r])=>r.length<2?Ge({data:[]}):tT({q:r,limit:20,zone_id:this._org.organisation.id})),me(r=>r.data.map(o=>new Ul(o))),zn(1)),this.bootstrap=()=>this.configure(this.system_id$.getValue()),this.clearBootstrap=()=>localStorage.removeItem(TK)}ngOnInit(){var e=this;return z(function*(){e.subscription("route.query",e._route.queryParamMap.subscribe(i=>{i.has("clear")&&i.get("clear")&&e.clearBootstrap(),(i.has("system_id")||i.has("sys_id"))&&(e.system_id$.next(i.get("system_id")||i.get("sys_id")),e.bootstrap())})),e.checkBootstrapped()})()}configure(e){this.loading="Setup",localStorage&&(localStorage.setItem(TK,e),localStorage.setItem("trust","true"),localStorage.setItem("fixed_device","true")),this._router.navigate(["/panel",e],{queryParamsHandling:"preserve"}),this.loading=""}checkBootstrapped(){if(this.loading="Checks",localStorage){const e=localStorage.getItem(TK);if(e)return void this._router.navigate(["/panel",e],{queryParamsHandling:"preserve"})}this.loading=""}static#e=this.\u0275fac=function(i){return new(i||t)(I(Sn),I(lo),I(uc))};static#t=this.\u0275cmp=Se({type:t,selectors:[["app-bootstrap"]],features:[Ze],decls:11,vars:3,consts:()=>{let e,i;return e=$localize`:@@systemLabel␟9b3a160554e554d4fcec2148b50e6f0c6e2eddb0␟9062463336269443550: ${"\ufffd0\ufffd"}:INTERPOLATION: `,i=$localize`:␟e4d1adb72d6327b354b9020c7ade28f1096fad0d␟7975869307745796677: ${"\ufffd0\ufffd"}:INTERPOLATION: `,[["load_state",""],["auto","matAutocomplete"],e,i,[1,"absolute","inset-0","bg-base-200","z-0"],[1,"relative","bg-base-100","mx-auto","my-8","border","border-base-300","rounded-lg","w-[28rem]","z-10","overflow-hidden"],[1,"px-4","py-3","bg-secondary","text-secondary-content","text-xl","font-medium","flex","items-center","justify-between","w-full"],[1,"px-2","py-1","rounded","text-sm","font-mono"],["class","p-4 w-full flex flex-col space-y-2",4,"ngIf","ngIfElse"],["class","w-full px-4 py-2 flex items-center justify-end border-t border-base-300",4,"ngIf"],[1,"p-4","w-full","flex","flex-col","space-y-2"],["for","system-id"],["appearance","outline",1,"w-full"],["matInput","","placeholder","System ID",3,"ngModelChange","ngModel","matAutocomplete"],["matSuffix","",3,"diameter",4,"ngIf"],[1,"-mx-4"],[3,"value",4,"ngFor","ngForOf"],["class","pointer-events-none opacity-60",4,"ngIf"],["matSuffix","",3,"diameter"],[3,"value"],[1,"leading-tight"],[1,"name"],[1,"text-xs","text-dark-fade"],[1,"pointer-events-none","opacity-60"],[1,"w-full","px-4","py-2","flex","items-center","justify-end","border-t","border-base-300"],["btn","","matRipple","",1,"w-32",3,"click","disabled"],[1,"flex","flex-col","items-center","justify-center","p-8","w-full"],[3,"diameter"]]},template:function(i,s){if(1&i&&(q(0,"div",4),m(1,"div",5)(2,"header",6)(3,"div"),S(4,"Assistant Panel"),_(),m(5,"div",7),S(6,"SETUP"),_()(),O(7,bXt,16,14,"main",8)(8,vXt,4,4,"footer",9),_(),O(9,yXt,4,2,"ng-template",null,0,ln)),2&i){const r=xt(10);b(7),C("ngIf",!s.loading)("ngIfElse",r),b(),C("ngIf",!s.loading)}},dependencies:[on,mt,Yr,pi,Vi,xE,mr,y0,zs,hV,CE,Tt,eu,Zs,xi,jh],encapsulation:2})}return t})()},{path:"panel/:system_id",component:h5t},{path:"**",redirectTo:"bootstrap"}];function ETe(t){return"/"===t[t.length-1]?t.slice(0,-1):t}function TTe(){return typeof window<"u"&&(!function TXt(){return!function jct(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}()&&"[object process]"===Object.prototype.toString.call(typeof process<"u"?process:0)}()||function IXt(){return void 0!==cs.process&&"renderer"===cs.process.type}())}const Ar=cs,DK="sentryReplaySession",kXt="replay_event",AK="Unable to send Replay",RXt=5e3,FXt=3,ITe=15e4,$P=5e3,MK=2e7;function NK(t,n){return t??n()}function vk(t){let n,e=t[0],i=1;for(;i<t.length;){const s=t[i],r=t[i+1];if(i+=2,("optionalAccess"===s||"optionalCall"===s)&&null==e)return;"access"===s||"optionalAccess"===s?(n=e,e=r(e)):("call"===s||"optionalCall"===s)&&(e=r((...o)=>e.call(n,...o)),n=void 0)}return e}var za=function(t){return t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment",t}(za||{});function yk(t){const n=vk([t,"optionalAccess",e=>e.host]);return vk([n,"optionalAccess",e=>e.shadowRoot])===t}function wk(t){return"[object ShadowRoot]"===Object.prototype.toString.call(t)}function BP(t){try{const n=t.rules||t.cssRules;return n?function zXt(t){return t.includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t}(Array.from(n,DTe).join("")):null}catch{return null}}function DTe(t){let n;if(function jXt(t){return"styleSheet"in t}(t))try{n=BP(t.styleSheet)||function UXt(t){const{cssText:n}=t;if(n.split('"').length<3)return n;const e=["@import",`url(${JSON.stringify(t.href)})`];return""===t.layerName?e.push("layer"):t.layerName&&e.push(`layer(${t.layerName})`),t.supportsText&&e.push(`supports(${t.supportsText})`),t.media.length&&e.push(t.media.mediaText),e.join(" ")+";"}(t)}catch{}else if(function HXt(t){return"selectorText"in t}(t)&&t.selectorText.includes(":"))return function GXt(t){return t.replace(/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,"$1\\$2")}(t.cssText);return n||t.cssText}class ATe{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(n){return n?NK(vk([this,"access",i=>i.getMeta,"call",i=>i(n),"optionalAccess",i=>i.id]),()=>-1):-1}getNode(n){return this.idNodeMap.get(n)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(n){return this.nodeMetaMap.get(n)||null}removeNodeFromMap(n){const e=this.getId(n);this.idNodeMap.delete(e),n.childNodes&&n.childNodes.forEach(i=>this.removeNodeFromMap(i))}has(n){return this.idNodeMap.has(n)}hasNode(n){return this.nodeMetaMap.has(n)}add(n,e){this.idNodeMap.set(e.id,n),this.nodeMetaMap.set(n,e)}replace(n,e){const i=this.getNode(n);if(i){const s=this.nodeMetaMap.get(i);s&&this.nodeMetaMap.set(e,s)}this.idNodeMap.set(n,e)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function VP({maskInputOptions:t,tagName:n,type:e}){return"OPTION"===n&&(n="SELECT"),!!(t[n.toLowerCase()]||e&&t[e]||"password"===e||"INPUT"===n&&!e&&t.text)}function Ck({isMasked:t,element:n,value:e,maskInputFn:i}){let s=e||"";return t?(i&&(s=i(s,n)),"*".repeat(s.length)):s}function VC(t){return t.toLowerCase()}function OK(t){return t.toUpperCase()}const MTe="__rrweb_original__";function RK(t){const n=t.type;return t.hasAttribute("data-rr-is-password")?"password":n?VC(n):null}function zP(t,n,e){return"INPUT"!==n||"radio"!==e&&"checkbox"!==e?t.value:t.getAttribute("value")||""}function NTe(t,n){let e;try{e=new URL(t,NK(n,()=>window.location.href))}catch{return null}return NK(vk([e.pathname.match(/\.([0-9a-z]+)(?:$)/i),"optionalAccess",r=>r[1]]),()=>null)}const OTe={};function RTe(t){const n=OTe[t];if(n)return n;const e=window.document;let i=window[t];if(e&&"function"==typeof e.createElement)try{const s=e.createElement("iframe");s.hidden=!0,e.head.appendChild(s);const r=s.contentWindow;r&&r[t]&&(i=r[t]),e.head.removeChild(s)}catch{}return OTe[t]=i.bind(window)}function FK(...t){return RTe("setTimeout")(...t)}function FTe(...t){return RTe("clearTimeout")(...t)}let KXt=1;const XXt=new RegExp("[^a-z0-9-_:]"),Sk=-2;function LK(){return KXt++}let zC,LTe;const QXt=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,JXt=/^(?:[a-z+]+:)?\/\//i,eYt=/^www\..*/i,tYt=/^(data:)([^,]*),(.*)/i;function UP(t,n){return(t||"").replace(QXt,(e,i,s,r,o,a)=>{const l=s||o||a,c=i||r||"";if(!l)return e;if(JXt.test(l)||eYt.test(l))return`url(${c}${l}${c})`;if(tYt.test(l))return`url(${c}${l}${c})`;if("/"===l[0])return`url(${c}${function ZXt(t){let n="";return n=t.indexOf("//")>-1?t.split("/").slice(0,3).join("/"):t.split("/")[0],n=n.split("?")[0],n}(n)+l}${c})`;const u=n.split("/"),d=l.split("/");u.pop();for(const h of d)"."!==h&&(".."===h?u.pop():u.push(h));return`url(${c}${u.join("/")}${c})`})}const nYt=/^[^ \t\n\r\u000c]+/,iYt=/^[, \t\n\r\u000c]+/;function UC(t,n){if(!n||""===n.trim())return n;const e=t.createElement("a");return e.href=n,e.href}function rYt(t){return!("svg"!==t.tagName&&!t.ownerSVGElement)}function PK(){const t=document.createElement("a");return t.href="",t.href}function PTe(t,n,e,i,s,r){return i&&("src"===e||"href"===e&&("use"!==n||"#"!==i[0])||"xlink:href"===e&&"#"!==i[0]||"background"===e&&("table"===n||"td"===n||"th"===n)?UC(t,i):"srcset"===e?function sYt(t,n){if(""===n.trim())return n;let e=0;function i(r){let o;const a=r.exec(n.substring(e));return a?(o=a[0],e+=o.length,o):""}const s=[];for(;i(iYt),!(e>=n.length);){let r=i(nYt);if(","===r.slice(-1))r=UC(t,r.substring(0,r.length-1)),s.push(r);else{let o="";r=UC(t,r);let a=!1;for(;;){const l=n.charAt(e);if(""===l){s.push((r+o).trim());break}if(a)")"===l&&(a=!1);else{if(","===l){e+=1,s.push((r+o).trim());break}"("===l&&(a=!0)}o+=l,e+=1}}}return s.join(", ")}(t,i):"style"===e?UP(i,PK()):"object"===n&&"data"===e?UC(t,i):"function"==typeof r?r(e,i,s):i)}function $Te(t,n,e){return("video"===t||"audio"===t)&&"autoplay"===n}function my(t,n,e=1/0,i=0){return!t||t.nodeType!==t.ELEMENT_NODE||i>e?-1:n(t)?i:my(t.parentNode,n,e,i+1)}function GC(t,n){return e=>{const i=e;if(null===i)return!1;try{if(t)if("string"==typeof t){if(i.matches(`.${t}`))return!0}else if(function aYt(t,n){for(let e=t.classList.length;e--;)if(n.test(t.classList[e]))return!0;return!1}(i,t))return!0;return!(!n||!i.matches(n))}catch{return!1}}}function jC(t,n,e,i,s,r){try{const o=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(null===o)return!1;if("INPUT"===o.tagName){const c=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(c))return!0}let a=-1,l=-1;if(r){if(l=my(o,GC(i,s)),l<0)return!0;a=my(o,GC(n,e),l>=0?l:1/0)}else{if(a=my(o,GC(n,e)),a<0)return!1;l=my(o,GC(i,s),a>=0?a:1/0)}return a>=0?!(l>=0)||a<=l:!(l>=0||!r)}catch{}return!!r}function Mr(t){return null==t?"":t.toLowerCase()}function HC(t,n){const{doc:e,mirror:i,blockClass:s,blockSelector:r,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:h=!1,inlineStylesheet:p=!0,maskInputOptions:f={},maskAttributeFn:g,maskTextFn:v,maskInputFn:y,slimDOMOptions:w,dataURLOptions:x={},inlineImages:T=!1,recordCanvas:k=!1,onSerialize:R,onIframeLoad:N,iframeLoadTimeout:D=5e3,onStylesheetLoad:F,stylesheetLoadTimeout:$=5e3,keepIframeSrcFn:j=()=>!1,newlyAddedElement:Q=!1}=n;let{preserveWhiteSpace:Y=!0}=n;const ce=function uYt(t,n){const{doc:e,mirror:i,blockClass:s,blockSelector:r,unblockSelector:o,maskAllText:a,maskAttributeFn:l,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:h,inlineStylesheet:p,maskInputOptions:f={},maskTextFn:g,maskInputFn:v,dataURLOptions:y={},inlineImages:w,recordCanvas:x,keepIframeSrcFn:T,newlyAddedElement:k=!1}=n,R=function dYt(t,n){if(!n.hasNode(t))return;const e=n.getId(t);return 1===e?void 0:e}(e,i);switch(t.nodeType){case t.DOCUMENT_NODE:return"CSS1Compat"!==t.compatMode?{type:za.Document,childNodes:[],compatMode:t.compatMode}:{type:za.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:za.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:R};case t.ELEMENT_NODE:return function pYt(t,n){const{doc:e,blockClass:i,blockSelector:s,unblockSelector:r,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:l,maskInputFn:c,dataURLOptions:u={},inlineImages:d,recordCanvas:h,keepIframeSrcFn:p,newlyAddedElement:f=!1,rootId:g,maskTextClass:y,unmaskTextClass:w,maskTextSelector:x,unmaskTextSelector:T}=n,k=function oYt(t,n,e,i){try{if(i&&t.matches(i))return!1;if("string"==typeof n){if(t.classList.contains(n))return!0}else for(let s=t.classList.length;s--;)if(n.test(t.classList[s]))return!0;if(e)return t.matches(e)}catch{}return!1}(t,i,s,r),R=function YXt(t){if(t instanceof HTMLFormElement)return"form";const n=VC(t.tagName);return XXt.test(n)?"div":n}(t);let N={};const D=t.attributes.length;for(let $=0;$<D;$++){const j=t.attributes[$];j.name&&!$Te(R,j.name)&&(N[j.name]=PTe(e,R,VC(j.name),j.value,t,l))}if("link"===R&&o){const $=Array.from(e.styleSheets).find(Q=>Q.href===t.href);let j=null;$&&(j=BP($)),j&&(delete N.rel,delete N.href,N._cssText=UP(j,$.href))}if("style"===R&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){const $=BP(t.sheet);$&&(N._cssText=UP($,PK()))}if("input"===R||"textarea"===R||"select"===R||"option"===R){const $=t,j=RK($),Q=zP($,OK(R),j),Y=$.checked;if("submit"!==j&&"button"!==j&&Q){const ce=jC($,y,x,w,T,VP({type:j,tagName:OK(R),maskInputOptions:a}));N.value=Ck({isMasked:ce,element:$,value:Q,maskInputFn:c})}Y&&(N.checked=Y)}if("option"===R&&(t.selected&&!a.select?N.selected=!0:delete N.selected),"canvas"===R&&h)if("2d"===t.__context)(function qXt(t){const n=t.getContext("2d");if(!n)return!0;for(let i=0;i<t.width;i+=50)for(let s=0;s<t.height;s+=50){const r=n.getImageData;if(new Uint32Array((MTe in r?r[MTe]:r).call(n,i,s,Math.min(50,t.width-i),Math.min(50,t.height-s)).data.buffer).some(l=>0!==l))return!1}return!0})(t)||(N.rr_dataURL=t.toDataURL(u.type,u.quality));else if(!("__context"in t)){const $=t.toDataURL(u.type,u.quality),j=document.createElement("canvas");j.width=t.width,j.height=t.height,$!==j.toDataURL(u.type,u.quality)&&(N.rr_dataURL=$)}if("img"===R&&d){zC||(zC=e.createElement("canvas"),LTe=zC.getContext("2d"));const $=t,j=$.crossOrigin;$.crossOrigin="anonymous";const Q=()=>{$.removeEventListener("load",Q);try{zC.width=$.naturalWidth,zC.height=$.naturalHeight,LTe.drawImage($,0,0),N.rr_dataURL=zC.toDataURL(u.type,u.quality)}catch(Y){console.warn(`Cannot inline img src=${$.currentSrc}! Error: ${Y}`)}j?N.crossOrigin=j:$.removeAttribute("crossorigin")};$.complete&&0!==$.naturalWidth?Q():$.addEventListener("load",Q)}if(("audio"===R||"video"===R)&&(N.rr_mediaState=t.paused?"paused":"played",N.rr_mediaCurrentTime=t.currentTime),f||(t.scrollLeft&&(N.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(N.rr_scrollTop=t.scrollTop)),k){const{width:$,height:j}=t.getBoundingClientRect();N={class:N.class,rr_width:`${$}px`,rr_height:`${j}px`}}let F;"iframe"===R&&!p(N.src)&&(!k&&!t.contentDocument&&(N.rr_src=N.src),delete N.src);try{customElements.get(R)&&(F=!0)}catch{}return{type:za.Element,tagName:R,attributes:N,childNodes:[],isSVG:rYt(t)||void 0,needBlock:k,rootId:g,isCustom:F}}(t,{doc:e,blockClass:s,blockSelector:r,unblockSelector:o,inlineStylesheet:p,maskAttributeFn:l,maskInputOptions:f,maskInputFn:v,dataURLOptions:y,inlineImages:w,recordCanvas:x,keepIframeSrcFn:T,newlyAddedElement:k,rootId:R,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:h});case t.TEXT_NODE:return function hYt(t,n){const{maskAllText:e,maskTextClass:i,unmaskTextClass:s,maskTextSelector:r,unmaskTextSelector:o,maskTextFn:a,maskInputOptions:l,maskInputFn:c,rootId:u}=n,d=t.parentNode&&t.parentNode.tagName;let h=t.textContent;const p="STYLE"===d||void 0,f="SCRIPT"===d||void 0,g="TEXTAREA"===d||void 0;if(p&&h){try{t.nextSibling||t.previousSibling||vk([t,"access",y=>y.parentNode,"access",y=>y.sheet,"optionalAccess",y=>y.cssRules])&&(h=BP(t.parentNode.sheet))}catch(y){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${y}`,t)}h=UP(h,PK())}f&&(h="SCRIPT_PLACEHOLDER");const v=jC(t,i,r,s,o,e);return!p&&!f&&!g&&h&&v&&(h=a?a(h,t.parentElement):h.replace(/[\S]/g,"*")),g&&h&&(l.textarea||v)&&(h=c?c(h,t.parentNode):h.replace(/[\S]/g,"*")),"OPTION"===d&&h&&(h=Ck({isMasked:jC(t,i,r,s,o,VP({type:null,tagName:d,maskInputOptions:l})),element:t,value:h,maskInputFn:c})),{type:za.Text,textContent:h||"",isStyle:p,rootId:u}}(t,{maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:h,maskTextFn:g,maskInputOptions:f,maskInputFn:v,rootId:R});case t.CDATA_SECTION_NODE:return{type:za.CDATA,textContent:"",rootId:R};case t.COMMENT_NODE:return{type:za.Comment,textContent:t.textContent||"",rootId:R};default:return!1}}(t,{doc:e,mirror:i,blockClass:s,blockSelector:r,maskAllText:a,unblockSelector:o,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:g,maskTextFn:v,maskInputFn:y,dataURLOptions:x,inlineImages:T,recordCanvas:k,keepIframeSrcFn:j,newlyAddedElement:Q});if(!ce)return console.warn(t,"not serialized"),null;let Ce;Ce=i.hasNode(t)?i.getId(t):function fYt(t,n){if(n.comment&&t.type===za.Comment)return!0;if(t.type===za.Element){if(n.script&&("script"===t.tagName||"link"===t.tagName&&("preload"===t.attributes.rel||"modulepreload"===t.attributes.rel)&&"script"===t.attributes.as||"link"===t.tagName&&"prefetch"===t.attributes.rel&&"string"==typeof t.attributes.href&&"js"===NTe(t.attributes.href)))return!0;if(n.headFavicon&&("link"===t.tagName&&"shortcut icon"===t.attributes.rel||"meta"===t.tagName&&(Mr(t.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Mr(t.attributes.name)||"icon"===Mr(t.attributes.rel)||"apple-touch-icon"===Mr(t.attributes.rel)||"shortcut icon"===Mr(t.attributes.rel))))return!0;if("meta"===t.tagName){if(n.headMetaDescKeywords&&Mr(t.attributes.name).match(/^description|keywords$/))return!0;if(n.headMetaSocial&&(Mr(t.attributes.property).match(/^(og|twitter|fb):/)||Mr(t.attributes.name).match(/^(og|twitter):/)||"pinterest"===Mr(t.attributes.name)))return!0;if(n.headMetaRobots&&("robots"===Mr(t.attributes.name)||"googlebot"===Mr(t.attributes.name)||"bingbot"===Mr(t.attributes.name)))return!0;if(n.headMetaHttpEquiv&&void 0!==t.attributes["http-equiv"])return!0;if(n.headMetaAuthorship&&("author"===Mr(t.attributes.name)||"generator"===Mr(t.attributes.name)||"framework"===Mr(t.attributes.name)||"publisher"===Mr(t.attributes.name)||"progid"===Mr(t.attributes.name)||Mr(t.attributes.property).match(/^article:/)||Mr(t.attributes.property).match(/^product:/)))return!0;if(n.headMetaVerification&&("google-site-verification"===Mr(t.attributes.name)||"yandex-verification"===Mr(t.attributes.name)||"csrf-token"===Mr(t.attributes.name)||"p:domain_verify"===Mr(t.attributes.name)||"verify-v1"===Mr(t.attributes.name)||"verification"===Mr(t.attributes.name)||"shopify-checkout-api-token"===Mr(t.attributes.name)))return!0}}return!1}(ce,w)||!Y&&ce.type===za.Text&&!ce.isStyle&&!ce.textContent.replace(/^\s+|\s+$/gm,"").length?Sk:LK();const Z=Object.assign(ce,{id:Ce});if(i.add(t,Z),Ce===Sk)return null;R&&R(t);let le=!h;if(Z.type===za.Element){le=le&&!Z.needBlock,delete Z.needBlock;const te=t.shadowRoot;te&&wk(te)&&(Z.isShadowHost=!0)}if((Z.type===za.Document||Z.type===za.Element)&&le){w.headWhitespace&&Z.type===za.Element&&"head"===Z.tagName&&(Y=!1);const te={doc:e,mirror:i,blockClass:s,blockSelector:r,maskAllText:a,unblockSelector:o,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:h,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:g,maskTextFn:v,maskInputFn:y,slimDOMOptions:w,dataURLOptions:x,inlineImages:T,recordCanvas:k,preserveWhiteSpace:Y,onSerialize:R,onIframeLoad:N,iframeLoadTimeout:D,onStylesheetLoad:F,stylesheetLoadTimeout:$,keepIframeSrcFn:j};for(const be of Array.from(t.childNodes)){const fe=HC(be,te);fe&&Z.childNodes.push(fe)}if(function VXt(t){return t.nodeType===t.ELEMENT_NODE}(t)&&t.shadowRoot)for(const be of Array.from(t.shadowRoot.childNodes)){const fe=HC(be,te);fe&&(wk(t.shadowRoot)&&(fe.isShadow=!0),Z.childNodes.push(fe))}}return t.parentNode&&yk(t.parentNode)&&wk(t.parentNode)&&(Z.isShadow=!0),Z.type===za.Element&&"iframe"===Z.tagName&&function lYt(t,n,e){const i=t.contentWindow;if(!i)return;let r,s=!1;try{r=i.document.readyState}catch{return}if("complete"!==r){const a=FK(()=>{s||(n(),s=!0)},e);return void t.addEventListener("load",()=>{FTe(a),s=!0,n()})}const o="about:blank";if(i.location.href!==o||t.src===o||""===t.src)return FK(n,0),t.addEventListener("load",n);t.addEventListener("load",n)}(t,()=>{const te=t.contentDocument;if(te&&N){const be=HC(te,{doc:te,mirror:i,blockClass:s,blockSelector:r,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:g,maskTextFn:v,maskInputFn:y,slimDOMOptions:w,dataURLOptions:x,inlineImages:T,recordCanvas:k,preserveWhiteSpace:Y,onSerialize:R,onIframeLoad:N,iframeLoadTimeout:D,onStylesheetLoad:F,stylesheetLoadTimeout:$,keepIframeSrcFn:j});be&&N(t,be)}},D),Z.type===za.Element&&"link"===Z.tagName&&"string"==typeof Z.attributes.rel&&("stylesheet"===Z.attributes.rel||"preload"===Z.attributes.rel&&"string"==typeof Z.attributes.href&&"css"===NTe(Z.attributes.href))&&function cYt(t,n,e){let s,i=!1;try{s=t.sheet}catch{return}if(s)return;const r=FK(()=>{i||(n(),i=!0)},e);t.addEventListener("load",()=>{FTe(r),i=!0,n()})}(t,()=>{if(F){const te=HC(t,{doc:e,mirror:i,blockClass:s,blockSelector:r,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:g,maskTextFn:v,maskInputFn:y,slimDOMOptions:w,dataURLOptions:x,inlineImages:T,recordCanvas:k,preserveWhiteSpace:Y,onSerialize:R,onIframeLoad:N,iframeLoadTimeout:D,onStylesheetLoad:F,stylesheetLoadTimeout:$,keepIframeSrcFn:j});te&&F(t,te)}},$),Z}function ug(t){let n,e=t[0],i=1;for(;i<t.length;){const s=t[i],r=t[i+1];if(i+=2,("optionalAccess"===s||"optionalCall"===s)&&null==e)return;"access"===s||"optionalAccess"===s?(n=e,e=r(e)):("call"===s||"optionalCall"===s)&&(e=r((...o)=>e.call(n,...o)),n=void 0)}return e}function Jl(t,n,e=document){const i={capture:!0,passive:!0};return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}const WC="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let BTe={map:{},getId:()=>(console.error(WC),-1),getNode:()=>(console.error(WC),null),removeNodeFromMap(){console.error(WC)},has:()=>(console.error(WC),!1),reset(){console.error(WC)}};function xk(t,n,e={}){let i=null,s=0;return function(...r){const o=Date.now();!s&&!1===e.leading&&(s=o);const a=n-(o-s),l=this;a<=0||a>n?(i&&(function CYt(...t){UK("clearTimeout")(...t)}(i),i=null),s=o,t.apply(l,r)):!i&&!1!==e.trailing&&(i=jP(()=>{s=!1===e.leading?0:Date.now(),i=null,t.apply(l,r)},a))}}function VTe(t,n,e,i,s=window){const r=s.Object.getOwnPropertyDescriptor(t,n);return s.Object.defineProperty(t,n,i?e:{set(o){jP(()=>{e.set.call(this,o)},0),r&&r.set&&r.set.call(this,o)}}),()=>VTe(t,n,r||{},!0)}function $K(t,n,e){try{if(!(n in t))return()=>{};const i=t[n],s=e(i);return"function"==typeof s&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:i}})),t[n]=s,()=>{t[n]=i}}catch{return()=>{}}}typeof window<"u"&&window.Proxy&&window.Reflect&&(BTe=new Proxy(BTe,{get:(t,n,e)=>("map"===n&&console.error(WC),Reflect.get(t,n,e))}));let GP=Date.now;function zTe(t){const n=t.document;return{left:n.scrollingElement?n.scrollingElement.scrollLeft:void 0!==t.pageXOffset?t.pageXOffset:ug([n,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||ug([n,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||ug([n,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:n.scrollingElement?n.scrollingElement.scrollTop:void 0!==t.pageYOffset?t.pageYOffset:ug([n,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||ug([n,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||ug([n,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function UTe(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function GTe(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function jTe(t){return t?t.nodeType===t.ELEMENT_NODE?t:t.parentElement:null}function Cu(t,n,e,i,s){if(!t)return!1;const r=jTe(t);if(!r)return!1;const o=GC(n,e);if(!s){const c=i&&r.matches(i);return o(r)&&!c}const a=my(r,o);let l=-1;return!(a<0)&&(i&&(l=my(r,GC(null,i))),a>-1&&l<0||a<l)}function BK(t,n){return n.getId(t)===Sk}function HTe(t,n){if(yk(t))return!1;const e=n.getId(t);return!n.has(e)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||HTe(t.parentNode,n))}function VK(t){return!!t.changedTouches}function WTe(t,n){return!("IFRAME"!==t.nodeName||!n.getMeta(t))}function qTe(t,n){return!("LINK"!==t.nodeName||t.nodeType!==t.ELEMENT_NODE||!t.getAttribute||"stylesheet"!==t.getAttribute("rel")||!n.getMeta(t))}function zK(t){return!!ug([t,"optionalAccess",n=>n.shadowRoot])}/[1-9][0-9]{12}/.test(Date.now().toString())||(GP=()=>(new Date).getTime());class bYt{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(n){return function CXt(t,n){return t??n()}(this.styleIDMap.get(n),()=>-1)}has(n){return this.styleIDMap.has(n)}add(n,e){if(this.has(n))return this.getId(n);let i;return i=void 0===e?this.id++:e,this.styleIDMap.set(n,i),this.idStyleMap.set(i,n),i}getStyle(n){return this.idStyleMap.get(n)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function KTe(t){let n=null;return ug([t,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(n=t.getRootNode().host),n}function XTe(t){const n=t.ownerDocument;return!!n&&(n.contains(t)||function yYt(t){const n=t.ownerDocument;if(!n)return!1;const e=function vYt(t){let e,n=t;for(;e=KTe(n);)n=e;return n}(t);return n.contains(e)}(t))}const YTe={};function UK(t){const n=YTe[t];if(n)return n;const e=window.document;let i=window[t];if(e&&"function"==typeof e.createElement)try{const s=e.createElement("iframe");s.hidden=!0,e.head.appendChild(s);const r=s.contentWindow;r&&r[t]&&(i=r[t]),e.head.removeChild(s)}catch{}return YTe[t]=i.bind(window)}function jP(...t){return UK("setTimeout")(...t)}var Wi=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(Wi||{}),_i=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(_i||{}),ec=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(ec||{}),nm=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(nm||{});function SYt(t){let n,e=t[0],i=1;for(;i<t.length;){const s=t[i],r=t[i+1];if(i+=2,("optionalAccess"===s||"optionalCall"===s)&&null==e)return;"access"===s||"optionalAccess"===s?(n=e,e=r(e)):("call"===s||"optionalCall"===s)&&(e=r((...o)=>e.call(n,...o)),n=void 0)}return e}function ZTe(t){return"__ln"in t}class xYt{constructor(){this.length=0,this.head=null,this.tail=null}get(n){if(n>=this.length)throw new Error("Position outside of list range");let e=this.head;for(let i=0;i<n;i++)e=SYt([e,"optionalAccess",s=>s.next])||null;return e}addNode(n){const e={value:n,previous:null,next:null};if(n.__ln=e,n.previousSibling&&ZTe(n.previousSibling)){const i=n.previousSibling.__ln.next;e.next=i,e.previous=n.previousSibling.__ln,n.previousSibling.__ln.next=e,i&&(i.previous=e)}else if(n.nextSibling&&ZTe(n.nextSibling)&&n.nextSibling.__ln.previous){const i=n.nextSibling.__ln.previous;e.previous=i,e.next=n.nextSibling.__ln,n.nextSibling.__ln.previous=e,i&&(i.next=e)}else this.head&&(this.head.previous=e),e.next=this.head,this.head=e;null===e.next&&(this.tail=e),this.length++}removeNode(n){const e=n.__ln;this.head&&(e.previous?(e.previous.next=e.next,e.next?e.next.previous=e.previous:this.tail=e.previous):(this.head=e.next,this.head?this.head.previous=null:this.tail=null),n.__ln&&delete n.__ln,this.length--)}}const QTe=(t,n)=>`${t}@${n}`;class EYt{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=n=>{n.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const n=[],e=new Set,i=new xYt,s=l=>{let c=l,u=Sk;for(;u===Sk;)c=c&&c.nextSibling,u=c&&this.mirror.getId(c);return u},r=l=>{if(!l.parentNode||!XTe(l))return;const c=yk(l.parentNode)?this.mirror.getId(KTe(l)):this.mirror.getId(l.parentNode),u=s(l);if(-1===c||-1===u)return i.addNode(l);const d=HC(l,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:h=>{WTe(h,this.mirror)&&!Cu(h,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(h),qTe(h,this.mirror)&&this.stylesheetManager.trackLinkElement(h),zK(l)&&this.shadowDomManager.addShadowRoot(l.shadowRoot,this.doc)},onIframeLoad:(h,p)=>{Cu(h,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(h,p),h.contentWindow&&this.canvasManager.addWindow(h.contentWindow),this.shadowDomManager.observeAttachShadow(h))},onStylesheetLoad:(h,p)=>{this.stylesheetManager.attachLinkElement(h,p)}});d&&(n.push({parentId:c,nextId:u,node:d}),e.add(d.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const l of this.movedSet)JTe(this.removes,l,this.mirror)&&!this.movedSet.has(l.parentNode)||r(l);for(const l of this.addedSet)!tIe(this.droppedSet,l)&&!JTe(this.removes,l,this.mirror)||tIe(this.movedSet,l)?r(l):this.droppedSet.add(l);let o=null;for(;i.length;){let l=null;if(o){const c=this.mirror.getId(o.value.parentNode),u=s(o.value);-1!==c&&-1!==u&&(l=o)}if(!l){let c=i.tail;for(;c;){const u=c;if(c=c.previous,u){const d=this.mirror.getId(u.value.parentNode);if(-1===s(u.value))continue;if(-1!==d){l=u;break}{const p=u.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&-1!==this.mirror.getId(p.parentNode.host)){l=u;break}}}}}if(!l){for(;i.head;)i.removeNode(i.head.value);break}o=l.previous,i.removeNode(l.value),r(l.value)}const a={texts:this.texts.map(l=>({id:this.mirror.getId(l.node),value:l.value})).filter(l=>!e.has(l.id)).filter(l=>this.mirror.has(l.id)),attributes:this.attributes.map(l=>{const{attributes:c}=l;if("string"==typeof c.style){const u=JSON.stringify(l.styleDiff),d=JSON.stringify(l._unchangedStyles);u.length<c.style.length&&(u+d).split("var(").length===c.style.split("var(").length&&(c.style=l.styleDiff)}return{id:this.mirror.getId(l.node),attributes:c}}).filter(l=>!e.has(l.id)).filter(l=>this.mirror.has(l.id)),removes:this.removes,adds:n};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=n=>{if(!BK(n.target,this.mirror))switch(n.type){case"characterData":{const e=n.target.textContent;!Cu(n.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&e!==n.oldValue&&this.texts.push({value:jC(n.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&e?this.maskTextFn?this.maskTextFn(e,jTe(n.target)):e.replace(/[\S]/g,"*"):e,node:n.target});break}case"attributes":{const e=n.target;let i=n.attributeName,s=n.target.getAttribute(i);if("value"===i){const o=RK(e),a=e.tagName;s=zP(e,a,o);const l=VP({maskInputOptions:this.maskInputOptions,tagName:a,type:o});s=Ck({isMasked:jC(n.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,l),element:e,value:s,maskInputFn:this.maskInputFn})}if(Cu(n.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===n.oldValue)return;let r=this.attributeMap.get(n.target);if("IFRAME"===e.tagName&&"src"===i&&!this.keepIframeSrcFn(s)){if(e.contentDocument)return;i="rr_src"}if(r||(r={node:n.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(r),this.attributeMap.set(n.target,r)),"type"===i&&"INPUT"===e.tagName&&"password"===(n.oldValue||"").toLowerCase()&&e.setAttribute("data-rr-is-password","true"),!$Te(e.tagName,i)&&(r.attributes[i]=PTe(this.doc,VC(e.tagName),VC(i),s,e,this.maskAttributeFn),"style"===i)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const o=this.unattachedDoc.createElement("span");n.oldValue&&o.setAttribute("style",n.oldValue);for(const a of Array.from(e.style)){const l=e.style.getPropertyValue(a),c=e.style.getPropertyPriority(a);l!==o.style.getPropertyValue(a)||c!==o.style.getPropertyPriority(a)?r.styleDiff[a]=""===c?l:[l,c]:r._unchangedStyles[a]=[l,c]}for(const a of Array.from(o.style))""===e.style.getPropertyValue(a)&&(r.styleDiff[a]=!1)}break}case"childList":if(Cu(n.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;n.addedNodes.forEach(e=>this.genAdds(e,n.target)),n.removedNodes.forEach(e=>{const i=this.mirror.getId(e),s=yk(n.target)?this.mirror.getId(n.target.host):this.mirror.getId(n.target);Cu(n.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||BK(e,this.mirror)||!function _Yt(t,n){return-1!==n.getId(t)}(e,this.mirror)||(this.addedSet.has(e)?(GK(this.addedSet,e),this.droppedSet.add(e)):this.addedSet.has(n.target)&&-1===i||HTe(n.target,this.mirror)||(this.movedSet.has(e)&&this.movedMap[QTe(i,s)]?GK(this.movedSet,e):this.removes.push({parentId:s,id:i,isShadow:!(!yk(n.target)||!wk(n.target))||void 0})),this.mapRemoves.push(e))})}},this.genAdds=(n,e)=>{if(!this.processedNodeManager.inOtherBuffer(n,this)&&!this.addedSet.has(n)&&!this.movedSet.has(n)){if(this.mirror.hasNode(n)){if(BK(n,this.mirror))return;this.movedSet.add(n);let i=null;e&&this.mirror.hasNode(e)&&(i=this.mirror.getId(e)),i&&-1!==i&&(this.movedMap[QTe(this.mirror.getId(n),i)]=!0)}else this.addedSet.add(n),this.droppedSet.delete(n);Cu(n,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(n.childNodes.forEach(i=>this.genAdds(i)),zK(n)&&n.shadowRoot.childNodes.forEach(i=>{this.processedNodeManager.add(i,this),this.genAdds(i,n)}))}}}init(n){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(e=>{this[e]=n[e]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function GK(t,n){t.delete(n),n.childNodes.forEach(e=>GK(t,e))}function JTe(t,n,e){return 0!==t.length&&eIe(t,n,e)}function eIe(t,n,e){const{parentNode:i}=n;if(!i)return!1;const s=e.getId(i);return!!t.some(r=>r.id===s)||eIe(t,i,e)}function tIe(t,n){return 0!==t.size&&nIe(t,n)}function nIe(t,n){const{parentNode:e}=n;return!!e&&(!!t.has(e)||nIe(t,e))}let Ek;const bs=t=>Ek?(...e)=>{try{return t(...e)}catch(i){if(Ek&&!0===Ek(i))return()=>{};throw i}}:t;function vh(t){let n,e=t[0],i=1;for(;i<t.length;){const s=t[i],r=t[i+1];if(i+=2,("optionalAccess"===s||"optionalCall"===s)&&null==e)return;"access"===s||"optionalAccess"===s?(n=e,e=r(e)):("call"===s||"optionalCall"===s)&&(e=r((...o)=>e.call(n,...o)),n=void 0)}return e}const qC=[];function Tk(t){try{if("composedPath"in t){const n=t.composedPath();if(n.length)return n[0]}else if("path"in t&&t.path.length)return t.path[0]}catch{}return t&&t.target}function iIe(t,n){const e=new EYt;qC.push(e),e.init(t);let i=window.MutationObserver||window.__rrMutationObserver;const s=vh([window,"optionalAccess",o=>o.Zone,"optionalAccess",o=>o.__symbol__,"optionalCall",o=>o("MutationObserver")]);s&&window[s]&&(i=window[s]);const r=new i(bs(o=>{t.onMutation&&!1===t.onMutation(o)||e.processMutations.bind(e)(o)}));return r.observe(n,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),r}function sIe({scrollCb:t,doc:n,mirror:e,blockClass:i,blockSelector:s,unblockSelector:r,sampling:o}){return Jl("scroll",bs(xk(bs(l=>{const c=Tk(l);if(!c||Cu(c,i,s,r,!0))return;const u=e.getId(c);if(c===n&&n.defaultView){const d=zTe(n.defaultView);t({id:u,x:d.left,y:d.top})}else t({id:u,x:c.scrollLeft,y:c.scrollTop})}),o.scroll||100)),n)}const MYt=["INPUT","TEXTAREA","SELECT"],rIe=new WeakMap;function NYt({inputCb:t,doc:n,mirror:e,blockClass:i,blockSelector:s,unblockSelector:r,ignoreClass:o,ignoreSelector:a,maskInputOptions:l,maskInputFn:c,sampling:u,userTriggeredOnInput:d,maskTextClass:h,unmaskTextClass:p,maskTextSelector:f,unmaskTextSelector:g}){function v(N){let D=Tk(N);const F=N.isTrusted,$=D&&OK(D.tagName);if("OPTION"===$&&(D=D.parentElement),!D||!$||MYt.indexOf($)<0||Cu(D,i,s,r,!0))return;const j=D;if(j.classList.contains(o)||a&&j.matches(a))return;const Q=RK(D);let Y=zP(j,$,Q),ce=!1;const Ce=VP({maskInputOptions:l,tagName:$,type:Q}),Z=jC(D,h,f,p,g,Ce);("radio"===Q||"checkbox"===Q)&&(ce=D.checked),Y=Ck({isMasked:Z,element:D,value:Y,maskInputFn:c}),y(D,d?{text:Y,isChecked:ce,userTriggered:F}:{text:Y,isChecked:ce});const le=D.name;"radio"===Q&&le&&ce&&n.querySelectorAll(`input[type="radio"][name="${le}"]`).forEach(te=>{if(te!==D){const be=Ck({isMasked:Z,element:te,value:zP(te,$,Q),maskInputFn:c});y(te,d?{text:be,isChecked:!ce,userTriggered:!1}:{text:be,isChecked:!ce})}})}function y(N,D){const F=rIe.get(N);if(!F||F.text!==D.text||F.isChecked!==D.isChecked){rIe.set(N,D);const $=e.getId(N);bs(t)({...D,id:$})}}const x=("last"===u.input?["change"]:["input","change"]).map(N=>Jl(N,bs(v),n)),T=n.defaultView;if(!T)return()=>{x.forEach(N=>N())};const k=T.Object.getOwnPropertyDescriptor(T.HTMLInputElement.prototype,"value");return k&&k.set&&x.push(...[[T.HTMLInputElement.prototype,"value"],[T.HTMLInputElement.prototype,"checked"],[T.HTMLSelectElement.prototype,"value"],[T.HTMLTextAreaElement.prototype,"value"],[T.HTMLSelectElement.prototype,"selectedIndex"],[T.HTMLOptionElement.prototype,"selected"]].map(N=>VTe(N[0],N[1],{set(){bs(v)({target:this,isTrusted:!1})}},!1,T))),bs(()=>{x.forEach(N=>N())})}function HP(t){return function e(i,s){if(WP("CSSGroupingRule")&&i.parentRule instanceof CSSGroupingRule||WP("CSSMediaRule")&&i.parentRule instanceof CSSMediaRule||WP("CSSSupportsRule")&&i.parentRule instanceof CSSSupportsRule||WP("CSSConditionRule")&&i.parentRule instanceof CSSConditionRule){const o=Array.from(i.parentRule.cssRules).indexOf(i);s.unshift(o)}else if(i.parentStyleSheet){const o=Array.from(i.parentStyleSheet.cssRules).indexOf(i);s.unshift(o)}return s}(t,[])}function dg(t,n,e){let i,s;return t?(t.ownerNode?i=n.getId(t.ownerNode):s=e.getId(t),{styleId:s,id:i}):{}}function oIe({mirror:t,stylesheetManager:n},e){let i=null;i=t.getId("#document"===e.nodeName?e:e.host);const s=vh("#document"===e.nodeName?[e,"access",o=>o.defaultView,"optionalAccess",o=>o.Document]:[e,"access",o=>o.ownerDocument,"optionalAccess",o=>o.defaultView,"optionalAccess",o=>o.ShadowRoot]),r=vh([s,"optionalAccess",o=>o.prototype])?Object.getOwnPropertyDescriptor(vh([s,"optionalAccess",o=>o.prototype]),"adoptedStyleSheets"):void 0;return null!==i&&-1!==i&&s&&r?(Object.defineProperty(e,"adoptedStyleSheets",{configurable:r.configurable,enumerable:r.enumerable,get(){return vh([r,"access",o=>o.get,"optionalAccess",o=>o.call,"call",o=>o(this)])},set(o){const a=vh([r,"access",l=>l.set,"optionalAccess",l=>l.call,"call",l=>l(this,o)]);if(null!==i&&-1!==i)try{n.adoptStyleSheets(o,i)}catch{}return a}}),bs(()=>{Object.defineProperty(e,"adoptedStyleSheets",{configurable:r.configurable,enumerable:r.enumerable,get:r.get,set:r.set})})):()=>{}}function BYt(t,n={}){const e=t.doc.defaultView;if(!e)return()=>{};let i;t.recordDOM&&(i=iIe(t,t.doc));const s=function kYt({mousemoveCb:t,sampling:n,doc:e,mirror:i}){if(!1===n.mousemove)return()=>{};const s="number"==typeof n.mousemove?n.mousemove:50,r="number"==typeof n.mousemoveCallback?n.mousemoveCallback:500;let a,o=[];const l=xk(bs(d=>{const h=Date.now()-a;t(o.map(p=>(p.timeOffset-=h,p)),d),o=[],a=null}),r),c=bs(xk(bs(d=>{const h=Tk(d),{clientX:p,clientY:f}=VK(d)?d.changedTouches[0]:d;a||(a=GP()),o.push({x:p,y:f,id:i.getId(h),timeOffset:GP()-a}),l(typeof DragEvent<"u"&&d instanceof DragEvent?_i.Drag:d instanceof MouseEvent?_i.MouseMove:_i.TouchMove)}),s,{trailing:!1})),u=[Jl("mousemove",c,e),Jl("touchmove",c,e),Jl("drag",c,e)];return bs(()=>{u.forEach(d=>d())})}(t),r=function DYt({mouseInteractionCb:t,doc:n,mirror:e,blockClass:i,blockSelector:s,unblockSelector:r,sampling:o}){if(!1===o.mouseInteraction)return()=>{};const a=!0===o.mouseInteraction||void 0===o.mouseInteraction?{}:o.mouseInteraction,l=[];let c=null;return Object.keys(ec).filter(d=>Number.isNaN(Number(d))&&!d.endsWith("_Departed")&&!1!==a[d]).forEach(d=>{let h=VC(d);const p=(d=>h=>{const p=Tk(h);if(Cu(p,i,s,r,!0))return;let f=null,g=d;if("pointerType"in h){switch(h.pointerType){case"mouse":f=nm.Mouse;break;case"touch":f=nm.Touch;break;case"pen":f=nm.Pen}f===nm.Touch&&(ec[d]===ec.MouseDown?g="TouchStart":ec[d]===ec.MouseUp&&(g="TouchEnd"))}else VK(h)&&(f=nm.Touch);null!==f?(c=f,(g.startsWith("Touch")&&f===nm.Touch||g.startsWith("Mouse")&&f===nm.Mouse)&&(f=null)):ec[d]===ec.Click&&(f=c,c=null);const v=VK(h)?h.changedTouches[0]:h;if(!v)return;const y=e.getId(p),{clientX:w,clientY:x}=v;bs(t)({type:ec[g],id:y,x:w,y:x,...null!==f&&{pointerType:f}})})(d);if(window.PointerEvent)switch(ec[d]){case ec.MouseDown:case ec.MouseUp:h=h.replace("mouse","pointer");break;case ec.TouchStart:case ec.TouchEnd:return}l.push(Jl(h,p,n))}),bs(()=>{l.forEach(d=>d())})}(t),o=sIe(t),a=function AYt({viewportResizeCb:t},{win:n}){let e=-1,i=-1;return Jl("resize",bs(xk(bs(()=>{const r=UTe(),o=GTe();(e!==r||i!==o)&&(t({width:Number(o),height:Number(r)}),e=r,i=o)}),200)),n)}(t,{win:e}),l=NYt(t),c=function FYt({mediaInteractionCb:t,blockClass:n,blockSelector:e,unblockSelector:i,mirror:s,sampling:r,doc:o}){const a=bs(c=>xk(bs(u=>{const d=Tk(u);if(!d||Cu(d,n,e,i,!0))return;const{currentTime:h,volume:p,muted:f,playbackRate:g}=d;t({type:c,id:s.getId(d),currentTime:h,volume:p,muted:f,playbackRate:g})}),r.media||500)),l=[Jl("play",a(0),o),Jl("pause",a(1),o),Jl("seeked",a(2),o),Jl("volumechange",a(3),o),Jl("ratechange",a(4),o)];return bs(()=>{l.forEach(c=>c())})}(t);let u=()=>{},d=()=>{},h=()=>{},p=()=>{};t.recordDOM&&(u=function OYt({styleSheetRuleCb:t,mirror:n,stylesheetManager:e},{win:i}){if(!i.CSSStyleSheet||!i.CSSStyleSheet.prototype)return()=>{};const s=i.CSSStyleSheet.prototype.insertRule;i.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:bs((u,d,h)=>{const[p,f]=h,{id:g,styleId:v}=dg(d,n,e.styleMirror);return(g&&-1!==g||v&&-1!==v)&&t({id:g,styleId:v,adds:[{rule:p,index:f}]}),u.apply(d,h)})});const r=i.CSSStyleSheet.prototype.deleteRule;let o,a;i.CSSStyleSheet.prototype.deleteRule=new Proxy(r,{apply:bs((u,d,h)=>{const[p]=h,{id:f,styleId:g}=dg(d,n,e.styleMirror);return(f&&-1!==f||g&&-1!==g)&&t({id:f,styleId:g,removes:[{index:p}]}),u.apply(d,h)})}),i.CSSStyleSheet.prototype.replace&&(o=i.CSSStyleSheet.prototype.replace,i.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:bs((u,d,h)=>{const[p]=h,{id:f,styleId:g}=dg(d,n,e.styleMirror);return(f&&-1!==f||g&&-1!==g)&&t({id:f,styleId:g,replace:p}),u.apply(d,h)})})),i.CSSStyleSheet.prototype.replaceSync&&(a=i.CSSStyleSheet.prototype.replaceSync,i.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:bs((u,d,h)=>{const[p]=h,{id:f,styleId:g}=dg(d,n,e.styleMirror);return(f&&-1!==f||g&&-1!==g)&&t({id:f,styleId:g,replaceSync:p}),u.apply(d,h)})}));const l={};qP("CSSGroupingRule")?l.CSSGroupingRule=i.CSSGroupingRule:(qP("CSSMediaRule")&&(l.CSSMediaRule=i.CSSMediaRule),qP("CSSConditionRule")&&(l.CSSConditionRule=i.CSSConditionRule),qP("CSSSupportsRule")&&(l.CSSSupportsRule=i.CSSSupportsRule));const c={};return Object.entries(l).forEach(([u,d])=>{c[u]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(c[u].insertRule,{apply:bs((h,p,f)=>{const[g,v]=f,{id:y,styleId:w}=dg(p.parentStyleSheet,n,e.styleMirror);return(y&&-1!==y||w&&-1!==w)&&t({id:y,styleId:w,adds:[{rule:g,index:[...HP(p),v||0]}]}),h.apply(p,f)})}),d.prototype.deleteRule=new Proxy(c[u].deleteRule,{apply:bs((h,p,f)=>{const[g]=f,{id:v,styleId:y}=dg(p.parentStyleSheet,n,e.styleMirror);return(v&&-1!==v||y&&-1!==y)&&t({id:v,styleId:y,removes:[{index:[...HP(p),g]}]}),h.apply(p,f)})})}),bs(()=>{i.CSSStyleSheet.prototype.insertRule=s,i.CSSStyleSheet.prototype.deleteRule=r,o&&(i.CSSStyleSheet.prototype.replace=o),a&&(i.CSSStyleSheet.prototype.replaceSync=a),Object.entries(l).forEach(([u,d])=>{d.prototype.insertRule=c[u].insertRule,d.prototype.deleteRule=c[u].deleteRule})})}(t,{win:e}),d=oIe(t,t.doc),h=function RYt({styleDeclarationCb:t,mirror:n,ignoreCSSAttributes:e,stylesheetManager:i},{win:s}){const r=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(r,{apply:bs((a,l,c)=>{const[u,d,h]=c;if(e.has(u))return r.apply(l,[u,d,h]);const{id:p,styleId:f}=dg(vh([l,"access",g=>g.parentRule,"optionalAccess",g=>g.parentStyleSheet]),n,i.styleMirror);return(p&&-1!==p||f&&-1!==f)&&t({id:p,styleId:f,set:{property:u,value:d,priority:h},index:HP(l.parentRule)}),a.apply(l,c)})});const o=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:bs((a,l,c)=>{const[u]=c;if(e.has(u))return o.apply(l,[u]);const{id:d,styleId:h}=dg(vh([l,"access",p=>p.parentRule,"optionalAccess",p=>p.parentStyleSheet]),n,i.styleMirror);return(d&&-1!==d||h&&-1!==h)&&t({id:d,styleId:h,remove:{property:u},index:HP(l.parentRule)}),a.apply(l,c)})}),bs(()=>{s.CSSStyleDeclaration.prototype.setProperty=r,s.CSSStyleDeclaration.prototype.removeProperty=o})}(t,{win:e}),t.collectFonts&&(p=function LYt({fontCb:t,doc:n}){const e=n.defaultView;if(!e)return()=>{};const i=[],s=new WeakMap,r=e.FontFace;e.FontFace=function(l,c,u){const d=new r(l,c,u);return s.set(d,{family:l,buffer:"string"!=typeof c,descriptors:u,fontSource:"string"==typeof c?c:JSON.stringify(Array.from(new Uint8Array(c)))}),d};const o=$K(n.fonts,"add",function(a){return function(l){return jP(bs(()=>{const c=s.get(l);c&&(t(c),s.delete(l))}),0),a.apply(this,[l])}});return i.push(()=>{e.FontFace=r}),i.push(o),bs(()=>{i.forEach(a=>a())})}(t)));const f=function PYt(t){const{doc:n,mirror:e,blockClass:i,blockSelector:s,unblockSelector:r,selectionCb:o}=t;let a=!0;const l=bs(()=>{const c=n.getSelection();if(!c||a&&vh([c,"optionalAccess",h=>h.isCollapsed]))return;a=c.isCollapsed||!1;const u=[],d=c.rangeCount||0;for(let h=0;h<d;h++){const p=c.getRangeAt(h),{startContainer:f,startOffset:g,endContainer:v,endOffset:y}=p;Cu(f,i,s,r,!0)||Cu(v,i,s,r,!0)||u.push({start:e.getId(f),startOffset:g,end:e.getId(v),endOffset:y})}o({ranges:u})});return l(),Jl("selectionchange",l)}(t),g=function $Yt({doc:t,customElementCb:n}){const e=t.defaultView;return e&&e.customElements?$K(e.customElements,"define",function(s){return function(r,o,a){try{n({define:{name:r}})}catch{}return s.apply(this,[r,o,a])}}):()=>{}}(t),v=[];for(const y of t.plugins)v.push(y.observer(y.callback,e,y.options));return bs(()=>{qC.forEach(y=>y.reset()),vh([i,"optionalAccess",y=>y.disconnect,"call",y=>y()]),s(),r(),o(),a(),l(),c(),u(),d(),h(),p(),f(),g(),v.forEach(y=>y())})}function WP(t){return typeof window[t]<"u"}function qP(t){return!!(typeof window[t]<"u"&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class jK{constructor(n){this.generateIdFn=n,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(n,e,i,s){const r=i||this.getIdToRemoteIdMap(n),o=s||this.getRemoteIdToIdMap(n);let a=r.get(e);return a||(a=this.generateIdFn(),r.set(e,a),o.set(a,e)),a}getIds(n,e){const i=this.getIdToRemoteIdMap(n),s=this.getRemoteIdToIdMap(n);return e.map(r=>this.getId(n,r,i,s))}getRemoteId(n,e,i){const s=i||this.getRemoteIdToIdMap(n);return"number"!=typeof e?e:s.get(e)||-1}getRemoteIds(n,e){const i=this.getRemoteIdToIdMap(n);return e.map(s=>this.getRemoteId(n,s,i))}reset(n){if(!n)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(n),this.iframeRemoteIdToIdMap.delete(n)}getIdToRemoteIdMap(n){let e=this.iframeIdToRemoteIdMap.get(n);return e||(e=new Map,this.iframeIdToRemoteIdMap.set(n,e)),e}getRemoteIdToIdMap(n){let e=this.iframeRemoteIdToIdMap.get(n);return e||(e=new Map,this.iframeRemoteIdToIdMap.set(n,e)),e}}function aIe(t){let n,e=t[0],i=1;for(;i<t.length;){const s=t[i],r=t[i+1];if(i+=2,("optionalAccess"===s||"optionalCall"===s)&&null==e)return;"access"===s||"optionalAccess"===s?(n=e,e=r(e)):("call"===s||"optionalCall"===s)&&(e=r((...o)=>e.call(n,...o)),n=void 0)}return e}class VYt{constructor(){this.crossOriginIframeMirror=new jK(LK),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class zYt{constructor(n){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new jK(LK),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=n.mutationCb,this.wrappedEmit=n.wrappedEmit,this.stylesheetManager=n.stylesheetManager,this.recordCrossOriginIframes=n.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new jK(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=n.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(n){this.iframes.set(n,!0),n.contentWindow&&this.crossOriginIframeMap.set(n.contentWindow,n)}addLoadListener(n){this.loadListener=n}attachIframe(n,e){this.mutationCb({adds:[{parentId:this.mirror.getId(n),nextId:null,node:e}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),aIe([this,"access",i=>i.loadListener,"optionalCall",i=>i(n)]),n.contentDocument&&n.contentDocument.adoptedStyleSheets&&n.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(n.contentDocument.adoptedStyleSheets,this.mirror.getId(n.contentDocument))}handleMessage(n){const e=n;if("rrweb"!==e.data.type||e.origin!==e.data.origin||!n.source)return;const s=this.crossOriginIframeMap.get(n.source);if(!s)return;const r=this.transformCrossOriginEvent(s,e.data.event);r&&this.wrappedEmit(r,e.data.isCheckout)}transformCrossOriginEvent(n,e){switch(e.type){case Wi.FullSnapshot:{this.crossOriginIframeMirror.reset(n),this.crossOriginIframeStyleMirror.reset(n),this.replaceIdOnNode(e.data.node,n);const i=e.data.node.id;return this.crossOriginIframeRootIdMap.set(n,i),this.patchRootIdOnNode(e.data.node,i),{timestamp:e.timestamp,type:Wi.IncrementalSnapshot,data:{source:_i.Mutation,adds:[{parentId:this.mirror.getId(n),nextId:null,node:e.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Wi.Meta:case Wi.Load:case Wi.DomContentLoaded:return!1;case Wi.Plugin:return e;case Wi.Custom:return this.replaceIds(e.data.payload,n,["id","parentId","previousId","nextId"]),e;case Wi.IncrementalSnapshot:switch(e.data.source){case _i.Mutation:return e.data.adds.forEach(i=>{this.replaceIds(i,n,["parentId","nextId","previousId"]),this.replaceIdOnNode(i.node,n);const s=this.crossOriginIframeRootIdMap.get(n);s&&this.patchRootIdOnNode(i.node,s)}),e.data.removes.forEach(i=>{this.replaceIds(i,n,["parentId","id"])}),e.data.attributes.forEach(i=>{this.replaceIds(i,n,["id"])}),e.data.texts.forEach(i=>{this.replaceIds(i,n,["id"])}),e;case _i.Drag:case _i.TouchMove:case _i.MouseMove:return e.data.positions.forEach(i=>{this.replaceIds(i,n,["id"])}),e;case _i.ViewportResize:return!1;case _i.MediaInteraction:case _i.MouseInteraction:case _i.Scroll:case _i.CanvasMutation:case _i.Input:return this.replaceIds(e.data,n,["id"]),e;case _i.StyleSheetRule:case _i.StyleDeclaration:return this.replaceIds(e.data,n,["id"]),this.replaceStyleIds(e.data,n,["styleId"]),e;case _i.Font:return e;case _i.Selection:return e.data.ranges.forEach(i=>{this.replaceIds(i,n,["start","end"])}),e;case _i.AdoptedStyleSheet:return this.replaceIds(e.data,n,["id"]),this.replaceStyleIds(e.data,n,["styleIds"]),aIe([e,"access",i=>i.data,"access",i=>i.styles,"optionalAccess",i=>i.forEach,"call",i=>i(s=>{this.replaceStyleIds(s,n,["styleId"])})]),e}}return!1}replace(n,e,i,s){for(const r of s)!Array.isArray(e[r])&&"number"!=typeof e[r]||(e[r]=Array.isArray(e[r])?n.getIds(i,e[r]):n.getId(i,e[r]));return e}replaceIds(n,e,i){return this.replace(this.crossOriginIframeMirror,n,e,i)}replaceStyleIds(n,e,i){return this.replace(this.crossOriginIframeStyleMirror,n,e,i)}replaceIdOnNode(n,e){this.replaceIds(n,e,["id","rootId"]),"childNodes"in n&&n.childNodes.forEach(i=>{this.replaceIdOnNode(i,e)})}patchRootIdOnNode(n,e){n.type!==za.Document&&!n.rootId&&(n.rootId=e),"childNodes"in n&&n.childNodes.forEach(i=>{this.patchRootIdOnNode(i,e)})}}class UYt{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class GYt{constructor(n){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=n.mutationCb,this.scrollCb=n.scrollCb,this.bypassOptions=n.bypassOptions,this.mirror=n.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(n,e){if(!wk(n)||this.shadowDoms.has(n))return;this.shadowDoms.add(n),this.bypassOptions.canvasManager.addShadowRoot(n);const i=iIe({...this.bypassOptions,doc:e,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},n);this.restoreHandlers.push(()=>i.disconnect()),this.restoreHandlers.push(sIe({...this.bypassOptions,scrollCb:this.scrollCb,doc:n,mirror:this.mirror})),jP(()=>{n.adoptedStyleSheets&&n.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(n.adoptedStyleSheets,this.mirror.getId(n.host)),this.restoreHandlers.push(oIe({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},n))},0)}observeAttachShadow(n){!n.contentWindow||!n.contentDocument||this.patchAttachShadow(n.contentWindow.Element,n.contentDocument)}patchAttachShadow(n,e){const i=this;this.restoreHandlers.push($K(n.prototype,"attachShadow",function(s){return function(r){const o=s.call(this,r);return this.shadowRoot&&XTe(this)&&i.addShadowRoot(this.shadowRoot,e),o}}))}reset(){this.restoreHandlers.forEach(n=>{try{n()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}class lIe{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class jYt{constructor(n){this.trackedLinkElements=new WeakSet,this.styleMirror=new bYt,this.mutationCb=n.mutationCb,this.adoptedStyleSheetCb=n.adoptedStyleSheetCb}attachLinkElement(n,e){"_cssText"in e.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:e.id,attributes:e.attributes}]}),this.trackLinkElement(n)}trackLinkElement(n){this.trackedLinkElements.has(n)||(this.trackedLinkElements.add(n),this.trackStylesheetInLinkElement(n))}adoptStyleSheets(n,e){if(0===n.length)return;const i={id:e,styleIds:[]},s=[];for(const r of n){let o;this.styleMirror.has(r)?o=this.styleMirror.getId(r):(o=this.styleMirror.add(r),s.push({styleId:o,rules:Array.from(r.rules||CSSRule,(a,l)=>({rule:DTe(a),index:l}))})),i.styleIds.push(o)}s.length>0&&(i.styles=s),this.adoptedStyleSheetCb(i)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(n){}}class HYt{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){!function wYt(...t){UK("requestAnimationFrame")(...t)}(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(n,e){const i=this.nodeMap.get(n);return i&&Array.from(i).some(s=>s!==e)}add(n,e){this.nodeMap.set(n,(this.nodeMap.get(n)||new Set).add(e))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let yo,KP;try{if(2!==Array.from([1],t=>2*t)[0]){const t=document.createElement("iframe");document.body.appendChild(t),Array.from=yc([t,"access",n=>n.contentWindow,"optionalAccess",n=>n.Array,"access",n=>n.from])||Array.from,document.body.removeChild(t)}}catch(t){console.debug("Unable to override Array.from",t)}const yh=function WXt(){return new ATe}();function im(t={}){const{emit:n,checkoutEveryNms:e,checkoutEveryNth:i,blockClass:s="rr-block",blockSelector:r=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:l=null,maskAllText:c=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:h=null,unmaskTextSelector:p=null,inlineStylesheet:f=!0,maskAllInputs:g,maskInputOptions:v,slimDOMOptions:y,maskAttributeFn:w,maskInputFn:x,maskTextFn:T,maxCanvasSize:k=null,packFn:R,sampling:N={},dataURLOptions:D={},mousemoveWait:F,recordDOM:$=!0,recordCanvas:j=!1,recordCrossOriginIframes:Q=!1,recordAfter:Y=("DOMContentLoaded"===t.recordAfter?t.recordAfter:"load"),userTriggeredOnInput:ce=!1,collectFonts:Ce=!1,inlineImages:Z=!1,plugins:le,keepIframeSrcFn:te=()=>!1,ignoreCSSAttributes:be=new Set([]),errorHandler:fe,onMutation:Te,getCanvasManager:et}=t;!function TYt(t){Ek=t}(fe);const We=!Q||window.parent===window;let Qe=!1;if(!We)try{window.parent.document&&(Qe=!1)}catch{Qe=!0}if(We&&!n)throw new Error("emit function is required");void 0!==F&&void 0===N.mousemove&&(N.mousemove=F),yh.reset();const gt=!0===g?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==v?v:{},ct=!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===y,headMetaDescKeywords:"all"===y}:y||{};!function gYt(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...n)=>{let e=n[0];if(!(0 in n))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1})}();let Dt,sn=0;const jt=Kn=>{for(const ia of le||[])ia.eventProcessor&&(Kn=ia.eventProcessor(Kn));return R&&!Qe&&(Kn=R(Kn)),Kn};yo=(Kn,ia)=>{const oi=Kn;if(oi.timestamp=GP(),yc([qC,"access",Vs=>Vs[0],"optionalAccess",Vs=>Vs.isFrozen,"call",Vs=>Vs()])&&oi.type!==Wi.FullSnapshot&&!(oi.type===Wi.IncrementalSnapshot&&oi.data.source===_i.Mutation)&&qC.forEach(Vs=>Vs.unfreeze()),We)yc([n,"optionalCall",Vs=>Vs(jt(oi),ia)]);else if(Qe){const Vs={type:"rrweb",event:jt(oi),origin:window.location.origin,isCheckout:ia};window.parent.postMessage(Vs,"*")}if(oi.type===Wi.FullSnapshot)Dt=oi,sn=0;else if(oi.type===Wi.IncrementalSnapshot){if(oi.data.source===_i.Mutation&&oi.data.isAttachIframe)return;sn++,(i&&sn>=i||e&&Dt&&oi.timestamp-Dt.timestamp>e)&&Su(!0)}};const Fn=Kn=>{yo({type:Wi.IncrementalSnapshot,data:{source:_i.Mutation,...Kn}})},ri=Kn=>yo({type:Wi.IncrementalSnapshot,data:{source:_i.Scroll,...Kn}}),Ds=Kn=>yo({type:Wi.IncrementalSnapshot,data:{source:_i.CanvasMutation,...Kn}}),Bs=new jYt({mutationCb:Fn,adoptedStyleSheetCb:Kn=>yo({type:Wi.IncrementalSnapshot,data:{source:_i.AdoptedStyleSheet,...Kn}})}),ds="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new VYt:new zYt({mirror:yh,mutationCb:Fn,stylesheetManager:Bs,recordCrossOriginIframes:Q,wrappedEmit:yo});for(const Kn of le||[])Kn.getMirror&&Kn.getMirror({nodeMirror:yh,crossOriginIframeMirror:ds.crossOriginIframeMirror,crossOriginIframeStyleMirror:ds.crossOriginIframeStyleMirror});const xs=new HYt,ur=function qYt(t,n){try{return t?t(n):new lIe}catch{return console.warn("Unable to initialize CanvasManager"),new lIe}}(et,{mirror:yh,win:window,mutationCb:Kn=>yo({type:Wi.IncrementalSnapshot,data:{source:_i.CanvasMutation,...Kn}}),recordCanvas:j,blockClass:s,blockSelector:r,unblockSelector:o,maxCanvasSize:k,sampling:N.canvas,dataURLOptions:D,errorHandler:fe}),Ws="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new UYt:new GYt({mutationCb:Fn,scrollCb:ri,bypassOptions:{onMutation:Te,blockClass:s,blockSelector:r,unblockSelector:o,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:h,unmaskTextSelector:p,inlineStylesheet:f,maskInputOptions:gt,dataURLOptions:D,maskAttributeFn:w,maskTextFn:T,maskInputFn:x,recordCanvas:j,inlineImages:Z,sampling:N,slimDOMOptions:ct,iframeManager:ds,stylesheetManager:Bs,canvasManager:ur,keepIframeSrcFn:te,processedNodeManager:xs},mirror:yh}),Su=(Kn=!1)=>{if(!$)return;yo({type:Wi.Meta,data:{href:window.location.href,width:GTe(),height:UTe()}},Kn),Bs.reset(),Ws.init(),qC.forEach(oi=>oi.lock());const ia=function mYt(t,n){const{mirror:e=new ATe,blockClass:i="rr-block",blockSelector:s=null,unblockSelector:r=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:l=null,maskTextSelector:c=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:h=!1,recordCanvas:p=!1,maskAllInputs:f=!1,maskAttributeFn:g,maskTextFn:v,maskInputFn:y,slimDOM:w=!1,dataURLOptions:x,preserveWhiteSpace:T,onSerialize:k,onIframeLoad:R,iframeLoadTimeout:N,onStylesheetLoad:D,stylesheetLoadTimeout:F,keepIframeSrcFn:$=()=>!1}=n||{};return HC(t,{doc:t,mirror:e,blockClass:i,blockSelector:s,unblockSelector:r,maskAllText:o,maskTextClass:a,unmaskTextClass:l,maskTextSelector:c,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===f?{}:f,maskAttributeFn:g,maskTextFn:v,maskInputFn:y,slimDOMOptions:!0===w||"all"===w?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===w,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===w?{}:w,dataURLOptions:x,inlineImages:h,recordCanvas:p,preserveWhiteSpace:T,onSerialize:k,onIframeLoad:R,iframeLoadTimeout:N,onStylesheetLoad:D,stylesheetLoadTimeout:F,keepIframeSrcFn:$,newlyAddedElement:!1})}(document,{mirror:yh,blockClass:s,blockSelector:r,unblockSelector:o,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:h,unmaskTextSelector:p,inlineStylesheet:f,maskAllInputs:gt,maskAttributeFn:w,maskInputFn:x,maskTextFn:T,slimDOM:ct,dataURLOptions:D,recordCanvas:j,inlineImages:Z,onSerialize:oi=>{WTe(oi,yh)&&ds.addIframe(oi),qTe(oi,yh)&&Bs.trackLinkElement(oi),zK(oi)&&Ws.addShadowRoot(oi.shadowRoot,document)},onIframeLoad:(oi,Vs)=>{ds.attachIframe(oi,Vs),oi.contentWindow&&ur.addWindow(oi.contentWindow),Ws.observeAttachShadow(oi)},onStylesheetLoad:(oi,Vs)=>{Bs.attachLinkElement(oi,Vs)},keepIframeSrcFn:te});if(!ia)return console.warn("Failed to snapshot the document");yo({type:Wi.FullSnapshot,data:{node:ia,initialOffset:zTe(window)}}),qC.forEach(oi=>oi.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Bs.adoptStyleSheets(document.adoptedStyleSheets,yh.getId(document))};KP=Su;try{const Kn=[],ia=Vs=>bs(BYt)({onMutation:Te,mutationCb:Fn,mousemoveCb:(Ci,ll)=>yo({type:Wi.IncrementalSnapshot,data:{source:ll,positions:Ci}}),mouseInteractionCb:Ci=>yo({type:Wi.IncrementalSnapshot,data:{source:_i.MouseInteraction,...Ci}}),scrollCb:ri,viewportResizeCb:Ci=>yo({type:Wi.IncrementalSnapshot,data:{source:_i.ViewportResize,...Ci}}),inputCb:Ci=>yo({type:Wi.IncrementalSnapshot,data:{source:_i.Input,...Ci}}),mediaInteractionCb:Ci=>yo({type:Wi.IncrementalSnapshot,data:{source:_i.MediaInteraction,...Ci}}),styleSheetRuleCb:Ci=>yo({type:Wi.IncrementalSnapshot,data:{source:_i.StyleSheetRule,...Ci}}),styleDeclarationCb:Ci=>yo({type:Wi.IncrementalSnapshot,data:{source:_i.StyleDeclaration,...Ci}}),canvasMutationCb:Ds,fontCb:Ci=>yo({type:Wi.IncrementalSnapshot,data:{source:_i.Font,...Ci}}),selectionCb:Ci=>{yo({type:Wi.IncrementalSnapshot,data:{source:_i.Selection,...Ci}})},customElementCb:Ci=>{yo({type:Wi.IncrementalSnapshot,data:{source:_i.CustomElement,...Ci}})},blockClass:s,ignoreClass:a,ignoreSelector:l,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:h,unmaskTextSelector:p,maskInputOptions:gt,inlineStylesheet:f,sampling:N,recordDOM:$,recordCanvas:j,inlineImages:Z,userTriggeredOnInput:ce,collectFonts:Ce,doc:Vs,maskAttributeFn:w,maskInputFn:x,maskTextFn:T,keepIframeSrcFn:te,blockSelector:r,unblockSelector:o,slimDOMOptions:ct,dataURLOptions:D,mirror:yh,iframeManager:ds,stylesheetManager:Bs,shadowDomManager:Ws,processedNodeManager:xs,canvasManager:ur,ignoreCSSAttributes:be,plugins:yc([le,"optionalAccess",Ci=>Ci.filter,"call",Ci=>Ci(ll=>ll.observer),"optionalAccess",Ci=>Ci.map,"call",Ci=>Ci(ll=>({observer:ll.observer,options:ll.options,callback:Lp=>yo({type:Wi.Plugin,data:{plugin:ll.name,payload:Lp}})}))])||[]},{});ds.addLoadListener(Vs=>{try{Kn.push(ia(Vs.contentDocument))}catch(Ci){console.warn(Ci)}});const oi=()=>{Su(),Kn.push(ia(document))};return"interactive"===document.readyState||"complete"===document.readyState?oi():(Kn.push(Jl("DOMContentLoaded",()=>{yo({type:Wi.DomContentLoaded,data:{}}),"DOMContentLoaded"===Y&&oi()})),Kn.push(Jl("load",()=>{yo({type:Wi.Load,data:{}}),"load"===Y&&oi()},window))),()=>{Kn.forEach(Vs=>Vs()),xs.destroy(),KP=void 0,function IYt(){Ek=void 0}()}}catch(Kn){console.warn(Kn)}}im.mirror=yh,im.takeFullSnapshot=function WYt(t){if(!KP)throw new Error("please take full snapshot after start recording");KP(t)};const qn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,cIe=["info","warn","error","log"],XP="[Replay] ";function HK(t,n="info"){v_({category:"console",data:{logger:"replay"},level:n,message:`${XP}${t}`},{level:n})}const ai=function KYt(){let t=!1,n=!1;const e={exception:()=>{},infoTick:()=>{},setConfig:i=>{t=i.captureExceptions,n=i.traceInternals}};return qn?(cIe.forEach(i=>{e[i]=(...s)=>{kt[i](XP,...s),n&&HK(s[0])}}),e.exception=(i,...s)=>{e.error&&e.error(...s),kt.error(XP,i),t?GR(i):n&&HK(i)},e.infoTick=(...i)=>{kt.info(XP,...i),n&&setTimeout(()=>HK(i[0]),0)}):cIe.forEach(i=>{e[i]=()=>{}}),e}(),XYt=3;function WK(t){return t>9999999999?t:1e3*t}function qK(t){return t>9999999999?t/1e3:t}function Ik(t,n){"sentry.transaction"!==n.category&&(["ui.click","ui.input"].includes(n.category)?t.triggerUserActivity():t.checkAndHandleExpiredSession(),t.addUpdate(()=>(t.throttledAddEvent({type:Wi.Custom,timestamp:1e3*(n.timestamp||0),data:{tag:"breadcrumb",payload:up(n,10,1e3)}}),"console"===n.category)))}const ZYt="button,a";function uIe(t){return t.closest(ZYt)||t}function dIe(t){const n=hIe(t);return n&&n instanceof Element?uIe(n):n}function hIe(t){return function QYt(t){return"object"==typeof t&&!!t&&"target"in t}(t)?t.target:t}let hg;const tZt=new Set([_i.Mutation,_i.StyleSheetRule,_i.StyleDeclaration,_i.AdoptedStyleSheet,_i.CanvasMutation,_i.Selection,_i.MediaInteraction]);class iZt{constructor(n,e,i=Ik){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=e.timeout/1e3,this._threshold=e.threshold/1e3,this._scollTimeout=e.scrollTimeout/1e3,this._replay=n,this._ignoreSelector=e.ignoreSelector,this._addBreadcrumbEvent=i}addListeners(){const n=function JYt(t){return hg||(hg=[],function eZt(){bc(Ar,"open",function(t){return function(...n){if(hg)try{hg.forEach(e=>e())}catch{}return t.apply(Ar,n)}})}()),hg.push(t),()=>{const n=hg?hg.indexOf(t):-1;n>-1&&hg.splice(n,1)}}(()=>{this._lastMutation=pIe()});this._teardown=()=>{n(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(n,e){if(function rZt(t,n){return!!(!sZt.includes(t.tagName)||"INPUT"===t.tagName&&!["submit","button"].includes(t.getAttribute("type")||"")||"A"===t.tagName&&(t.hasAttribute("download")||t.hasAttribute("target")&&"_self"!==t.getAttribute("target"))||n&&t.matches(n))}(e,this._ignoreSelector)||!function oZt(t){return!(!t.data||"number"!=typeof t.data.nodeId||!t.timestamp)}(n))return;const i={timestamp:qK(n.timestamp),clickBreadcrumb:n,clickCount:0,node:e};this._clicks.some(s=>s.node===i.node&&Math.abs(s.timestamp-i.timestamp)<1)||(this._clicks.push(i),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(n=Date.now()){this._lastMutation=qK(n)}registerScroll(n=Date.now()){this._lastScroll=qK(n)}registerClick(n){const e=uIe(n);this._handleMultiClick(e)}_handleMultiClick(n){this._getClicks(n).forEach(e=>{e.clickCount++})}_getClicks(n){return this._clicks.filter(e=>e.node===n)}_checkClicks(){const n=[],e=pIe();this._clicks.forEach(i=>{!i.mutationAfter&&this._lastMutation&&(i.mutationAfter=i.timestamp<=this._lastMutation?this._lastMutation-i.timestamp:void 0),!i.scrollAfter&&this._lastScroll&&(i.scrollAfter=i.timestamp<=this._lastScroll?this._lastScroll-i.timestamp:void 0),i.timestamp+this._timeout<=e&&n.push(i)});for(const i of n){const s=this._clicks.indexOf(i);s>-1&&(this._generateBreadcrumbs(i),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(n){const e=this._replay,r=!(n.scrollAfter&&n.scrollAfter<=this._scollTimeout||n.mutationAfter&&n.mutationAfter<=this._threshold),{clickCount:o,clickBreadcrumb:a}=n;if(r){const l=1e3*Math.min(n.mutationAfter||this._timeout,this._timeout),c=l<1e3*this._timeout?"mutation":"timeout",u={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:Ar.location.href,route:e.getCurrentRoute(),timeAfterClickMs:l,endReason:c,clickCount:o||1}};this._addBreadcrumbEvent(e,u)}else if(o>1){const l={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:Ar.location.href,route:e.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(e,l)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Sw(()=>this._checkClicks(),1e3)}}const sZt=["A","BUTTON","INPUT"];function pIe(){return Date.now()/1e3}function Fp(t){return{timestamp:Date.now()/1e3,type:"default",...t}}var KK=function(t){return t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment",t}(KK||{});const uZt=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function dZt(t){const n={};!t["data-sentry-component"]&&t["data-sentry-element"]&&(t["data-sentry-component"]=t["data-sentry-element"]);for(const e in t)if(uZt.has(e)){let i=e;("data-testid"===e||"data-test-id"===e)&&(i="testId"),n[i]=t[e]}return n}function fIe(t,n){const e=im.mirror.getId(t),i=e&&im.mirror.getNode(e),s=i&&im.mirror.getMeta(i),r=s&&function mZt(t){return t.type===KK.Element}(s)?s:null;return{message:n,data:r?{nodeId:e,node:{id:e,tagName:r.tagName,textContent:Array.from(r.childNodes).map(o=>o.type===KK.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:dZt(r.attributes)}}:{}}}const vZt={resource:function xZt(t){const{entryType:n,initiatorType:e,name:i,responseEnd:s,startTime:r,decodedBodySize:o,encodedBodySize:a,responseStatus:l,transferSize:c}=t;return["fetch","xmlhttprequest"].includes(e)?null:{type:`${n}.${e}`,start:KC(r),end:KC(s),name:i,data:{size:c,statusCode:l,decodedBodySize:o,encodedBodySize:a}}},paint:function CZt(t){const{duration:n,entryType:e,name:i,startTime:s}=t,r=KC(s);return{type:e,name:i,start:r,end:r+n,data:void 0}},navigation:function SZt(t){const{entryType:n,name:e,decodedBodySize:i,duration:s,domComplete:r,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,domInteractive:c,loadEventStart:u,loadEventEnd:d,redirectCount:h,startTime:p,transferSize:f,type:g}=t;return 0===s?null:{type:`${n}.${g}`,start:KC(p),end:KC(r),name:e,data:{size:f,decodedBodySize:i,encodedBodySize:o,duration:s,domInteractive:c,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,loadEventStart:u,loadEventEnd:d,domComplete:r,redirectCount:h}}}};function YP(t,n){return({metric:e})=>{n.replayPerformanceEntries.push(t(e))}}function wZt(t){const n=vZt[t.entryType];return n?n(t):null}function KC(t){return((Wl||Ar.performance.timeOrigin)+t)/1e3}function EZt(t){const n=t.entries[t.entries.length-1];return ZP(t,"largest-contentful-paint",n&&n.element?[n.element]:void 0)}function TZt(t){return void 0!==t.sources}function IZt(t){const n=[],e=[];for(const i of t.entries)if(TZt(i)){const s=[];for(const r of i.sources)if(r.node){e.push(r.node);const o=im.mirror.getId(r.node);o&&s.push(o)}n.push({value:i.value,nodeIds:s})}return ZP(t,"cumulative-layout-shift",e,n)}function kZt(t){const n=t.entries[t.entries.length-1];return ZP(t,"first-input-delay",n&&n.target?[n.target]:void 0)}function DZt(t){const n=t.entries[t.entries.length-1];return ZP(t,"interaction-to-next-paint",n&&n.target?[n.target]:void 0)}function ZP(t,n,e,i){const s=t.value,r=t.rating,o=KC(s);return{type:"web-vital",name:n,start:o,end:o,data:{value:s,size:s,rating:r,nodeIds:e?e.map(l=>im.mirror.getId(l)):void 0,attributions:i}}}class XK extends Error{constructor(){super(`Event buffer exceeded maximum size of ${MK}.`)}}class mIe{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}addEvent(n){var e=this;return z(function*(){const i=JSON.stringify(n).length;if(e._totalSize+=i,e._totalSize>MK)throw new XK;e.events.push(n)})()}finish(){return new Promise(n=>{const e=this.events;this.clear(),n(JSON.stringify(e))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const n=this.events.map(e=>e.timestamp).sort()[0];return n?WK(n):null}}class OZt{constructor(n){this._worker=n,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise((n,e)=>{this._worker.addEventListener("message",({data:i})=>{i.success?n():e()},{once:!0}),this._worker.addEventListener("error",i=>{e(i)},{once:!0})})),this._ensureReadyPromise}destroy(){qn&&ai.info("Destroying compression worker"),this._worker.terminate()}postMessage(n,e){const i=this._getAndIncrementId();return new Promise((s,r)=>{const o=({data:a})=>{const l=a;if(l.method===n&&l.id===i){if(this._worker.removeEventListener("message",o),!l.success)return qn&&ai.error("Error in compression worker: ",l.response),void r(new Error("Error in compression worker"));s(l.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:i,method:n,arg:e})})}_getAndIncrementId(){return this._id++}}class RZt{constructor(n){this._worker=new OZt(n),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(n){const e=WK(n.timestamp);(!this._earliestTimestamp||e<this._earliestTimestamp)&&(this._earliestTimestamp=e);const i=JSON.stringify(n);return this._totalSize+=i.length,this._totalSize>MK?Promise.reject(new XK):this._sendEventToWorker(i)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,n=>{qn&&ai.exception(n,'Sending "clear" message to worker failed',n)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(n){return this._worker.postMessage("addEvent",n)}_finishRequest(){var n=this;return z(function*(){const e=yield n._worker.postMessage("finish");return n._earliestTimestamp=null,n._totalSize=0,e})()}}class FZt{constructor(n){this._fallback=new mIe,this._compression=new RZt(n),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(n){this._used.hasCheckout=n}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(n){return this._used.addEvent(n)}finish(){var n=this;return z(function*(){return yield n.ensureWorkerIsLoaded(),n._used.finish()})()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}_ensureWorkerIsLoaded(){var n=this;return z(function*(){try{yield n._compression.ensureReady()}catch(e){return void(qn&&ai.exception(e,"Failed to load the compression worker, falling back to simple buffer"))}yield n._switchToCompressionWorker()})()}_switchToCompressionWorker(){var n=this;return z(function*(){const{events:e,hasCheckout:i}=n._fallback,s=[];for(const r of e)s.push(n._compression.addEvent(r));n._compression.hasCheckout=i,n._used=n._compression;try{yield Promise.all(s)}catch(r){qn&&ai.exception(r,"Failed to add events when switching buffers.")}})()}}function YK(){try{return"sessionStorage"in Ar&&!!Ar.sessionStorage}catch{return!1}}function _Ie(t){return void 0!==t&&Math.random()<t}function gIe(t){const n=Date.now();return{id:t.id||zr(),started:t.started||n,lastActivity:t.lastActivity||n,segmentId:t.segmentId||0,sampled:t.sampled,previousSessionId:t.previousSessionId}}function ZK(t){if(YK())try{Ar.sessionStorage.setItem(DK,JSON.stringify(t))}catch{}}function bIe({sessionSampleRate:t,allowBuffering:n,stickySession:e=!1},{previousSessionId:i}={}){const s=function zZt(t,n){return _Ie(t)?"session":!!n&&"buffer"}(t,n),r=gIe({sampled:s,previousSessionId:i});return e&&ZK(r),r}function QK(t,n,e=+new Date){return null===t||void 0===n||n<0||0!==n&&t+n<=e}function vIe(t,{maxReplayDuration:n,sessionIdleExpire:e,targetTime:i=Date.now()}){return QK(t.started,n,i)||QK(t.lastActivity,e,i)}function yIe(t,{sessionIdleExpire:n,maxReplayDuration:e}){return!(!vIe(t,{sessionIdleExpire:n,maxReplayDuration:e})||"buffer"===t.sampled&&0===t.segmentId)}function JK({sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:e},i){const s=i.stickySession&&function UZt(){if(!YK())return null;try{const t=Ar.sessionStorage.getItem(DK);if(!t)return null;const n=JSON.parse(t);return qn&&ai.infoTick("Loading existing session"),gIe(n)}catch{return null}}();return s?yIe(s,{sessionIdleExpire:t,maxReplayDuration:n})?(qn&&ai.infoTick("Session in sessionStorage is expired, creating new one..."),bIe(i,{previousSessionId:s.id})):s:(qn&&ai.infoTick("Creating new session"),bIe(i,{previousSessionId:e}))}function eX(t,n,e){return!!CIe(t,n)&&(wIe(t,n,e),!0)}function wIe(t,n,e){return tX.apply(this,arguments)}function tX(){return tX=z(function*(t,n,e){if(!t.eventBuffer)return null;try{e&&"buffer"===t.recordingMode&&t.eventBuffer.clear(),e&&(t.eventBuffer.hasCheckout=!0);const s=function HZt(t,n){try{if("function"==typeof n&&function GZt(t){return t.type===Wi.Custom}(t))return n(t)}catch(e){return qn&&ai.exception(e,"An error occured in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return t}(n,t.getOptions().beforeAddRecordingEvent);return s?yield t.eventBuffer.addEvent(s):void 0}catch(i){const s=i&&i instanceof XK?"addEventSizeExceeded":"addEvent";t.handleException(i),yield t.stop({reason:s});const r=Zi();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}),tX.apply(this,arguments)}function CIe(t,n){if(!t.eventBuffer||t.isPaused()||!t.isEnabled())return!1;const e=WK(n.timestamp);return!(e+t.timeouts.sessionIdlePause<Date.now()||e>t.getContext().initialTimestamp+t.getOptions().maxReplayDuration&&(qn&&ai.infoTick(`Skipping event with timestamp ${e} because it is after maxReplayDuration`),1))}function nX(t){return!t.type}function iX(t){return"transaction"===t.type}function SIe(t){return"feedback"===t.type}function xIe(t){return!!t.category}function QP(t,n){return n.map(({type:e,start:i,end:s,name:r,data:o})=>{const a=t.throttledAddEvent({type:Wi.Custom,timestamp:i,data:{tag:"performanceSpan",payload:{op:e,description:r,startTimestamp:i,endTimestamp:s,data:o}}});return"string"==typeof a?Promise.resolve(null):a})}function EIe(t,n){t.isEnabled()&&null!==n&&(function lQt(t,n){return(!qn||!t.getOptions()._experiments.traceInternals)&&function SXt(t,n){const e=n&&n.getDsn(),i=n&&n.getOptions().tunnel;return function EXt(t,n){return!!n&&t.includes(n.host)}(t,e)||function xXt(t,n){return!!n&&ETe(t)===ETe(n)}(t,i)}(n,Zi())}(t,n.name)||t.addUpdate(()=>(QP(t,[n]),!0)))}function JP(t){if(!t)return;const n=new TextEncoder;try{if("string"==typeof t)return n.encode(t).length;if(t instanceof URLSearchParams)return n.encode(t.toString()).length;if(t instanceof FormData){const e=DIe(t);return n.encode(e).length}if(t instanceof Blob)return t.size;if(t instanceof ArrayBuffer)return t.byteLength}catch{}}function TIe(t){if(!t)return;const n=parseInt(t,10);return isNaN(n)?void 0:n}function IIe(t){try{if("string"==typeof t)return[t];if(t instanceof URLSearchParams)return[t.toString()];if(t instanceof FormData)return[DIe(t)];if(!t)return[void 0]}catch(n){return qn&&ai.exception(n,"Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return qn&&ai.info("Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function e4(t,n){if(!t)return{headers:{},size:void 0,_meta:{warnings:[n]}};const e={...t._meta};return e.warnings=[...e.warnings||[],n],t._meta=e,t}function kIe(t,n){if(!n)return null;const{startTimestamp:e,endTimestamp:i,url:s,method:r,statusCode:o,request:a,response:l}=n;return{type:t,start:e/1e3,end:i/1e3,name:s,data:ga({method:r,statusCode:o,request:a,response:l})}}function kk(t){return{headers:{},size:t,_meta:{warnings:["URL_SKIPPED"]}}}function pg(t,n,e){if(!n&&0===Object.keys(t).length)return;if(!n)return{headers:t};if(!e)return{headers:t,size:n};const i={headers:t,size:n},{body:s,warnings:r}=function cQt(t){if(!t||"string"!=typeof t)return{body:t};const n=t.length>ITe,e=function uQt(t){const n=t[0],e=t[t.length-1];return"["===n&&"]"===e||"{"===n&&"}"===e}(t);if(n){const i=t.slice(0,ITe);return e?{body:i,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${i}\u2026`,warnings:["TEXT_TRUNCATED"]}}if(e)try{return{body:JSON.parse(t)}}catch{}return{body:t}}(e);return i.body=s,r&&r.length>0&&(i._meta={warnings:r}),i}function sX(t,n){return Object.entries(t).reduce((e,[i,s])=>{const r=i.toLowerCase();return n.includes(r)&&t[i]&&(e[r]=s),e},{})}function DIe(t){return new URLSearchParams(t).toString()}function t4(t,n){const e=function dQt(t,n=Ar.document.baseURI){if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith(Ar.location.origin))return t;const e=new URL(t,n);if(e.origin!==new URL(n).origin)return t;const i=e.href;return!t.endsWith("/")&&i.endsWith("/")?i.slice(0,-1):i}(t);return p_(e,n)}function rX(){return rX=z(function*(t,n,e){try{const i=yield function fQt(t,n,e){return oX.apply(this,arguments)}(t,n,e),s=kIe("resource.fetch",i);EIe(e.replay,s)}catch(i){qn&&ai.exception(i,"Failed to capture fetch breadcrumb")}}),rX.apply(this,arguments)}function oX(){return oX=z(function*(t,n,e){const i=Date.now(),{startTimestamp:s=i,endTimestamp:r=i}=n,{url:o,method:a,status_code:l=0,request_body_size:c,response_body_size:u}=t.data,d=t4(o,e.networkDetailAllowUrls)&&!t4(o,e.networkDetailDenyUrls),h=d?function mQt({networkCaptureBodies:t,networkRequestHeaders:n},e,i){const s=e?function vQt(t,n){return 1===t.length&&"string"!=typeof t[0]?NIe(t[0],n):2===t.length?NIe(t[1],n):{}}(e,n):{};if(!t)return pg(s,i,void 0);const r=AIe(e),[o,a]=IIe(r),l=pg(s,i,o);return a?e4(l,a):l}(e,n.input,c):kk(c),p=yield function _Qt(t,n,e,i){return aX.apply(this,arguments)}(d,e,n.response,u);return{startTimestamp:s,endTimestamp:r,url:o,method:a,statusCode:l,request:h,response:p}}),oX.apply(this,arguments)}function aX(){return aX=z(function*(t,{networkCaptureBodies:n,networkResponseHeaders:e},i,s){if(!t&&void 0!==s)return kk(s);const r=i?MIe(i.headers,e):{};if(!i||!n&&void 0!==s)return pg(r,s,void 0);const[o,a]=yield function bQt(t){return lX.apply(this,arguments)}(i),l=function gQt(t,{networkCaptureBodies:n,responseBodySize:e,captureDetails:i,headers:s}){try{const r=t&&t.length&&void 0===e?JP(t):e;return i?pg(s,r,n?t:void 0):kk(r)}catch(r){return qn&&ai.exception(r,"Failed to serialize response body"),pg(s,e,void 0)}}(o,{networkCaptureBodies:n,responseBodySize:s,captureDetails:t,headers:r});return a?e4(l,a):l}),aX.apply(this,arguments)}function lX(){return lX=z(function*(t){const n=function yQt(t){try{return t.clone()}catch(n){qn&&ai.exception(n,"Failed to clone response body")}}(t);if(!n)return[void 0,"BODY_PARSE_ERROR"];try{return[yield wQt(n)]}catch(e){return qn&&ai.exception(e,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"]}}),lX.apply(this,arguments)}function AIe(t=[]){if(2===t.length&&"object"==typeof t[1])return t[1].body}function MIe(t,n){const e={};return n.forEach(i=>{t.get(i)&&(e[i]=t.get(i))}),e}function NIe(t,n){if(!t)return{};const e=t.headers;return e?e instanceof Headers?MIe(e,n):Array.isArray(e)?{}:sX(e,n):{}}function wQt(t){return new Promise((n,e)=>{const i=Sw(()=>e(new Error("Timeout while trying to read response body")),500);(function CQt(t){return cX.apply(this,arguments)})(t).then(s=>n(s),s=>e(s)).finally(()=>clearTimeout(i))})}function cX(){return cX=z(function*(t){return yield t.text()}),cX.apply(this,arguments)}function uX(){return uX=z(function*(t,n,e){try{const i=function EQt(t,n,e){const i=Date.now(),{startTimestamp:s=i,endTimestamp:r=i,input:o,xhr:a}=n,{url:l,method:c,status_code:u=0,request_body_size:d,response_body_size:h}=t.data;if(!l)return null;if(!a||!t4(l,e.networkDetailAllowUrls)||t4(l,e.networkDetailDenyUrls))return{startTimestamp:s,endTimestamp:r,url:l,method:c,statusCode:u,request:kk(d),response:kk(h)};const p=a[yv],f=p?sX(p.request_headers,e.networkRequestHeaders):{},g=sX(function TQt(t){const n=t.getAllResponseHeaders();return n?n.split("\r\n").reduce((e,i)=>{const[s,r]=i.split(": ");return r&&(e[s.toLowerCase()]=r),e},{}):{}}(a),e.networkResponseHeaders),[v,y]=e.networkCaptureBodies?IIe(o):[void 0],[w,x]=e.networkCaptureBodies?function IQt(t){const n=[];try{return[t.responseText]}catch(e){n.push(e)}try{return function kQt(t,n){try{if("string"==typeof t)return[t];if(t instanceof Document)return[t.body.outerHTML];if("json"===n&&t&&"object"==typeof t)return[JSON.stringify(t)];if(!t)return[void 0]}catch(e){return qn&&ai.exception(e,"Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return qn&&ai.info("Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}(t.response,t.responseType)}catch(e){n.push(e)}return qn&&ai.warn("Failed to get xhr response body",...n),[void 0]}(a):[void 0],T=pg(f,d,v),k=pg(g,h,w);return{startTimestamp:s,endTimestamp:r,url:l,method:c,statusCode:u,request:y?e4(T,y):T,response:x?e4(k,x):k}}(t,n,e),s=kIe("resource.xhr",i);EIe(e.replay,s)}catch(i){qn&&ai.exception(i,"Failed to capture xhr breadcrumb")}}),uX.apply(this,arguments)}function AQt(t){const n=Zi();try{const{networkDetailAllowUrls:e,networkDetailDenyUrls:i,networkCaptureBodies:s,networkRequestHeaders:r,networkResponseHeaders:o}=t.getOptions(),a={replay:t,networkDetailAllowUrls:e,networkDetailDenyUrls:i,networkCaptureBodies:s,networkRequestHeaders:r,networkResponseHeaders:o};n&&n.on("beforeAddBreadcrumb",(l,c)=>function MQt(t,n,e){if(n.data)try{(function NQt(t){return"xhr"===t.category})(n)&&function RQt(t){return t&&t.xhr}(e)&&(function xQt(t,n){const{xhr:e,input:i}=n;if(!e)return;const s=JP(i),r=e.getResponseHeader("content-length")?TIe(e.getResponseHeader("content-length")):function DQt(t,n){try{return JP("json"===n&&t&&"object"==typeof t?JSON.stringify(t):t)}catch{return}}(e.response,e.responseType);void 0!==s&&(t.data.request_body_size=s),void 0!==r&&(t.data.response_body_size=r)}(n,e),function SQt(t,n,e){uX.apply(this,arguments)}(n,e,t)),function OQt(t){return"fetch"===t.category}(n)&&function FQt(t){return t&&t.response}(e)&&(function pQt(t,n){const{input:e,response:i}=n,r=JP(e?AIe(e):void 0),o=i?TIe(i.headers.get("content-length")):void 0;void 0!==r&&(t.data.request_body_size=r),void 0!==o&&(t.data.response_body_size=o)}(n,e),function hQt(t,n,e){rX.apply(this,arguments)}(n,e,t))}catch(i){qn&&ai.exception(i,"Error when enriching network breadcrumb")}}(a,l,c))}catch{}}function LQt(t){const n=Zi();N_e((t=>n=>{if(!t.isEnabled())return;const e=function pZt(t){const{target:n,message:e}=function fZt(t){const n="click"===t.name;let e,i=null;try{i=n?dIe(t.event):hIe(t.event),e=Df(i,{maxStringLength:200})||"<unknown>"}catch{e="<unknown>"}return{target:i,message:e}}(t);return Fp({category:`ui.${t.name}`,...fIe(n,e)})}(n);if(!e)return;const i="click"===n.name,s=i?n.event:void 0;i&&t.clickDetector&&s&&s.target&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&function nZt(t,n,e){t.handleClick(n,e)}(t.clickDetector,e,dIe(n.event)),Ik(t,e)})(t)),KR(function aQt(t){return n=>{if(!t.isEnabled())return;const e=function oQt(t){const{from:n,to:e}=t,i=Date.now()/1e3;return{type:"navigation.push",start:i,end:i,name:e,data:{previous:n}}}(n);null!==e&&(t.getContext().urls.push(e.name),t.triggerUserActivity(),t.addUpdate(()=>(QP(t,[e]),!1)))}}(t)),function QZt(t){const n=Zi();n&&n.on("beforeAddBreadcrumb",e=>function JZt(t,n){if(!t.isEnabled()||!xIe(n))return;const e=function eQt(t){return!xIe(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui.")?null:"console"===t.category?function tQt(t){const n=t.data&&t.data.arguments;if(!Array.isArray(n)||0===n.length)return Fp(t);let e=!1;const i=n.map(s=>{if(!s)return s;if("string"==typeof s)return s.length>$P?(e=!0,`${s.slice(0,$P)}\u2026`):s;if("object"==typeof s)try{const r=up(s,7);return JSON.stringify(r).length>$P?(e=!0,`${JSON.stringify(r,null,2).slice(0,$P)}\u2026`):r}catch{}return s});return Fp({...t,data:{...t.data,arguments:i,...e?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(t):Fp(t)}(n);e&&Ik(t,e)}(t,e))}(t),AQt(t),function Klt(t){ou().addEventProcessor(t)}(function rQt(t){return Object.assign((n,e)=>t.isEnabled()?function WZt(t){return"replay_event"===t.type}(n)?(delete n.breadcrumbs,n):(nX(n)||iX(n)||SIe(n))&&t.checkAndHandleExpiredSession()?SIe(n)?(t.flush(),n.contexts.feedback.replay_id=t.getSessionId(),function iQt(t,n){t.triggerUserActivity(),t.addUpdate(()=>!n.timestamp||(t.throttledAddEvent({type:Wi.Custom,timestamp:1e3*n.timestamp,data:{tag:"breadcrumb",payload:{timestamp:n.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:n.event_id}}}}),!1))}(t,n),n):function nQt(t,n){return!(t.type||!t.exception||!t.exception.values||!t.exception.values.length||!n.originalException||!n.originalException.__rrweb__)}(n,e)&&!t.getOptions()._experiments.captureExceptions?(qn&&ai.log("Ignoring error from rrweb internals",n),null):((function sQt(t,n){return!("buffer"!==t.recordingMode||n.message===AK||!n.exception||n.type)&&_Ie(t.getOptions().errorSampleRate)}(t,n)||"session"===t.recordingMode)&&(n.tags={...n.tags,replayId:t.getSessionId()}),n):n:n,{id:"Replay"})}(t)),n&&(n.on("beforeSendEvent",function YZt(t){return n=>{!t.isEnabled()||!nX(n)||function ZZt(t,n){const e=n.exception&&n.exception.values&&n.exception.values[0]&&n.exception.values[0].value;"string"==typeof e&&(e.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||e.match(/(does not match server-rendered HTML|Hydration failed because)/i))&&Ik(t,Fp({category:"replay.hydrate-error",data:{url:yme()}}))}(t,n)}}(t)),n.on("afterSendEvent",function qZt(t){return(n,e)=>{if(!t.isEnabled()||!nX(n)&&!iX(n))return;const i=e&&e.statusCode;if(!(!i||i<200||i>=300)){if(iX(n))return void function KZt(t,n){const e=t.getContext();n.contexts&&n.contexts.trace&&n.contexts.trace.trace_id&&e.traceIds.size<100&&e.traceIds.add(n.contexts.trace.trace_id)}(t,n);!function XZt(t,n){const e=t.getContext();if(n.event_id&&e.errorIds.size<100&&e.errorIds.add(n.event_id),"buffer"!==t.recordingMode||!n.tags||!n.tags.replayId)return;const{beforeErrorSampling:i}=t.getOptions();"function"==typeof i&&!i(n)||Sw(()=>{t.sendBufferedReplayOrFlush()})}(t,n)}}}(t)),n.on("createDsc",i=>{const s=t.getSessionId();s&&t.isEnabled()&&"session"===t.recordingMode&&t.checkAndHandleExpiredSession()&&(i.replay_id=s)}),n.on("spanStart",i=>{t.lastActiveSpan=i}),n.on("spanEnd",i=>{t.lastActiveSpan=i}),n.on("beforeSendFeedback",(i,s)=>{const r=t.getSessionId();s&&s.includeReplay&&t.isEnabled()&&r&&i.contexts&&i.contexts.feedback&&(i.contexts.feedback.replay_id=r)}))}function dX(){return dX=z(function*(t){try{return Promise.all(QP(t,[$Qt(Ar.performance.memory)]))}catch{return[]}}),dX.apply(this,arguments)}function $Qt(t){const{jsHeapSizeLimit:n,totalJSHeapSize:e,usedJSHeapSize:i}=t,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:n,totalJSHeapSize:e,usedJSHeapSize:i}}}}function VQt(t){let n=!1;return(e,i)=>{if(!t.checkAndHandleExpiredSession())return void(qn&&ai.warn("Received replay event after session expired."));const s=i||!n;n=!0,t.clickDetector&&function aZt(t,n){try{if(!function lZt(t){return t.type===XYt}(n))return;const{source:e}=n.data;if(tZt.has(e)&&t.registerMutation(n.timestamp),e===_i.Scroll&&t.registerScroll(n.timestamp),function cZt(t){return t.data.source===_i.MouseInteraction}(n)){const{type:i,id:s}=n.data,r=im.mirror.getNode(s);r instanceof HTMLElement&&i===ec.Click&&t.registerClick(r)}}catch{}}(t.clickDetector,e),t.addUpdate(()=>{if("buffer"===t.recordingMode&&s&&t.setInitialState(),!eX(t,e,s))return!0;if(!s)return!1;if(function UQt(t,n){!n||!t.session||0!==t.session.segmentId||eX(t,function zQt(t){const n=t.getOptions();return{type:Wi.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:t.isRecordingCanvas(),sessionSampleRate:n.sessionSampleRate,errorSampleRate:n.errorSampleRate,useCompressionOption:n.useCompression,blockAllMedia:n.blockAllMedia,maskAllText:n.maskAllText,maskAllInputs:n.maskAllInputs,useCompression:!!t.eventBuffer&&"worker"===t.eventBuffer.type,networkDetailHasUrls:n.networkDetailAllowUrls.length>0,networkCaptureBodies:n.networkCaptureBodies,networkRequestHasHeaders:n.networkRequestHeaders.length>0,networkResponseHasHeaders:n.networkResponseHeaders.length>0}}}}(t),!1)}(t,s),t.session&&t.session.previousSessionId)return!0;if("buffer"===t.recordingMode&&t.session&&t.eventBuffer){const r=t.eventBuffer.getEarliestTimestamp();r&&(qn&&ai.info(`Updating session start time to earliest event in buffer to ${new Date(r)}`),t.session.started=r,t.getOptions().stickySession&&ZK(t.session))}return"session"===t.recordingMode&&t.flush(),!0})}}function hX(){return hX=z(function*({client:t,scope:n,replayId:e,event:i}){const r={event_id:e,integrations:"object"!=typeof t._integrations||null===t._integrations||Array.isArray(t._integrations)?void 0:Object.keys(t._integrations)};t.emit("preprocessEvent",i,r);const o=yield e_e(t.getOptions(),i,r,n,t,ou());if(!o)return null;o.platform=o.platform||"javascript";const a=t.getSdkMetadata(),{name:l,version:c}=a&&a.sdk||{};return o.sdk={...o.sdk,name:l||"sentry.javascript.unknown",version:c||"0.0.0"},o}),hX.apply(this,arguments)}function pX(){return pX=z(function*({recordingData:t,replayId:n,segmentId:e,eventContext:i,timestamp:s,session:r}){const o=function jQt({recordingData:t,headers:n}){let e;const i=`${JSON.stringify(n)}\n`;if("string"==typeof t)e=`${i}${t}`;else{const r=(new TextEncoder).encode(i);e=new Uint8Array(r.length+t.length),e.set(r),e.set(t,r.length)}return e}({recordingData:t,headers:{segment_id:e}}),{urls:a,errorIds:l,traceIds:c,initialTimestamp:u}=i,d=Zi(),h=br(),p=d&&d.getTransport(),f=d&&d.getDsn();if(!(d&&p&&f&&r.sampled))return Nf({});const g={type:kXt,replay_start_timestamp:u/1e3,timestamp:s/1e3,error_ids:l,trace_ids:c,urls:a,replay_id:n,segment_id:e,replay_type:r.sampled},v=yield function HQt(t){return hX.apply(this,arguments)}({scope:h,client:d,replayId:n,event:g});if(!v)return d.recordDroppedEvent("event_processor","replay",g),qn&&ai.info("An event processor returned `null`, will not send event."),Nf({});delete v.sdkProcessingMetadata;const y=function GQt(t,n,e,i){return vv(E_e(t,v9(t),i,e),[[{type:"replay_event"},t],[{type:"replay_recording",length:"string"==typeof n?(new TextEncoder).encode(n).length:n.length},n]])}(v,o,f,d.getOptions().tunnel);let w;try{w=yield p.send(y)}catch(T){const k=new Error(AK);try{k.cause=T}catch{}throw k}if("number"==typeof w.statusCode&&(w.statusCode<200||w.statusCode>=300))throw new OIe(w.statusCode);const x=Q_e({},w);if(Z_e(x,"replay"))throw new RIe(x);return w}),pX.apply(this,arguments)}class OIe extends Error{constructor(n){super(`Transport returned status code ${n}`)}}class RIe extends Error{constructor(n){super("Rate limit hit"),this.rateLimits=n}}function FIe(t){return fX.apply(this,arguments)}function fX(){return fX=z(function*(t,n={count:0,interval:RXt}){const{recordingData:e,options:i}=t;if(e.length)try{return yield function WQt(t){return pX.apply(this,arguments)}(t),!0}catch(s){if(s instanceof OIe||s instanceof RIe)throw s;if(i_e("Replays",{_retryCount:n.count}),qn&&i._experiments&&i._experiments.captureExceptions&&GR(s),n.count>=FXt){const r=new Error(`${AK} - max retries exceeded`);try{r.cause=s}catch{}throw r}return n.interval*=++n.count,new Promise((r,o)=>{Sw(z(function*(){try{yield FIe(t,n),r(!0)}catch(a){o(a)}}),n.interval)})}}),fX.apply(this,arguments)}const LIe="__THROTTLED";class fg{constructor({options:n,recordingOptions:e}){fg.prototype.__init.call(this),fg.prototype.__init2.call(this),fg.prototype.__init3.call(this),fg.prototype.__init4.call(this),fg.prototype.__init5.call(this),fg.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=e,this._options=n,this._debouncedFlush=function BQt(t,n,e){let i,s,r;const o=e&&e.maxWait?Math.max(e.maxWait,n):0;function a(){return l(),i=t(),i}function l(){void 0!==s&&clearTimeout(s),void 0!==r&&clearTimeout(r),s=r=void 0}function u(){return s&&clearTimeout(s),s=Sw(a,n),o&&void 0===r&&(r=Sw(a,o)),i}return u.cancel=l,u.flush=function c(){return void 0!==s||void 0!==r?a():i},u}(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=function KQt(t,n,e){const i=new Map;let o=!1;return(...a)=>{const l=Math.floor(Date.now()/1e3);if((a=>{const l=a-e;i.forEach((c,u)=>{u<l&&i.delete(u)})})(l),[...i.values()].reduce((a,l)=>a+l,0)>=n){const u=o;return o=!0,u?"__SKIPPED":LIe}o=!1;const c=i.get(l)||0;return i.set(l,c+1),t(...a)}}((o,a)=>function jZt(t,n,e){return CIe(t,n)?wIe(t,n,e):Promise.resolve(null)}(this,o,a),300,5);const{slowClickTimeout:i,slowClickIgnoreSelectors:s}=this.getOptions(),r=i?{threshold:Math.min(3e3,i),timeout:i,scrollTimeout:300,ignoreSelector:s?s.join(","):""}:void 0;if(r&&(this.clickDetector=new iZt(this,r)),qn){const o=n._experiments;ai.setConfig({captureExceptions:!!o.captureExceptions,traceInternals:!!o.traceInternals})}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(n){qn&&ai.exception(n)}initializeSampling(n){const{errorSampleRate:e,sessionSampleRate:i}=this._options,s=e<=0&&i<=0;if(this._requiresManualStart=s,!s){if(this._initializeSessionForSampling(n),!this.session)return void(qn&&ai.exception(new Error("Unable to initialize and create session")));!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",qn&&ai.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&"session"===this.recordingMode)return void(qn&&ai.info("Recording is already in progress"));if(this._isEnabled&&"buffer"===this.recordingMode)return void(qn&&ai.info("Buffering is in progress, call `flush()` to save the replay"));qn&&ai.infoTick("Starting replay in session mode"),this._updateUserActivity();const n=JK({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=n,this._initializeRecording()}startBuffering(){if(this._isEnabled)return void(qn&&ai.info("Buffering is in progress, call `flush()` to save the replay"));qn&&ai.infoTick("Starting replay in buffer mode");const n=JK({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=n,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const n=this._canvas;this._stopRecording=im({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:VQt(this),onMutation:this._onMutationHandler,...n?{recordCanvas:n.recordCanvas,getCanvasManager:n.getCanvasManager,sampling:n.sampling,dataURLOptions:n.dataURLOptions}:{}})}catch(n){this.handleException(n)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(n){return this.handleException(n),!1}}stop({forceFlush:n=!1,reason:e}={}){var i=this;return z(function*(){if(i._isEnabled){i._isEnabled=!1;try{qn&&ai.info("Stopping Replay"+(e?` triggered by ${e}`:"")),i._removeListeners(),i.stopRecording(),i._debouncedFlush.cancel(),n&&(yield i._flush({force:!0})),i.eventBuffer&&i.eventBuffer.destroy(),i.eventBuffer=null,function BZt(t){(function VZt(){if(YK())try{Ar.sessionStorage.removeItem(DK)}catch{}})(),t.session=void 0}(i)}catch(s){i.handleException(s)}}})()}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),qn&&ai.info("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),qn&&ai.info("Resuming replay"))}sendBufferedReplayOrFlush({continueRecording:n=!0}={}){var e=this;return z(function*(){if("session"===e.recordingMode)return e.flushImmediate();const i=Date.now();qn&&ai.info("Converting buffer to session"),yield e.flushImmediate();const s=e.stopRecording();!n||!s||"session"!==e.recordingMode&&(e.recordingMode="session",e.session&&(e._updateUserActivity(i),e._updateSessionActivity(i),e._maybeSaveSession()),e.startRecording())})()}addUpdate(n){const e=n();"buffer"!==this.recordingMode&&!0!==e&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&QK(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${Ar.location.origin}${Ar.location.pathname}${Ar.location.hash}${Ar.location.search}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=e,this._context.initialTimestamp=Date.now(),this._context.urls.push(e)}throttledAddEvent(n,e){const i=this._throttledAddEvent(n,e);if(i===LIe){const s=Fp({category:"replay.throttled"});this.addUpdate(()=>!eX(this,{type:5,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return i}getCurrentRoute(){const n=this.lastActiveSpan||va(),e=n&&ba(n),s=(e&&ts(e).data||{})[au];if(e&&s&&["route","custom"].includes(s))return ts(e).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=function LZt({useCompression:t,workerUrl:n}){if(t&&window.Worker){const e=function PZt(t){try{const n=t||function $Zt(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?function NZt(){const t=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(J)return J.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(t)}():""}();if(!n)return;qn&&ai.info("Using compression worker"+(t?` from ${t}`:""));const e=new Worker(n);return new FZt(e)}catch(n){qn&&ai.exception(n,"Failed to create compression worker")}}(n);if(e)return e}return qn&&ai.info("Using simple buffer"),new mIe}({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(n){const i=JK({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:n},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:this._options.errorSampleRate>0});this.session=i}_checkSession(){if(!this.session)return!1;const n=this.session;return!yIe(n,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(n),!1)}_refreshSession(n){var e=this;return z(function*(){e._isEnabled&&(yield e.stop({reason:"refresh session"}),e.initializeSampling(n.id))})()}_addListeners(){try{Ar.document.addEventListener("visibilitychange",this._handleVisibilityChange),Ar.addEventListener("blur",this._handleWindowBlur),Ar.addEventListener("focus",this._handleWindowFocus),Ar.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(LQt(this),this._hasInitializedCoreListeners=!0)}catch(n){this.handleException(n)}this._performanceCleanupCallback=function AZt(t){function n(s){t.performanceEntries.includes(s)||t.performanceEntries.push(s)}function e({entries:s}){s.forEach(n)}const i=[];return["navigation","paint","resource"].forEach(s=>{i.push(Iw(s,e))}),i.push(yge(YP(EZt,t)),G9(YP(IZt,t)),wge(YP(kZt,t)),Cge(YP(DZt,t))),()=>{i.forEach(s=>s())}}(this)}_removeListeners(){try{Ar.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Ar.removeEventListener("blur",this._handleWindowBlur),Ar.removeEventListener("focus",this._handleWindowFocus),Ar.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(n){this.handleException(n)}}__init(){this._handleVisibilityChange=()=>{"visible"===Ar.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const n=Fp({category:"ui.blur"});this._doChangeToBackgroundTasks(n)}}__init3(){this._handleWindowFocus=()=>{const n=Fp({category:"ui.focus"});this._doChangeToForegroundTasks(n)}}__init4(){this._handleKeyboardEvent=n=>{!function _Zt(t,n){if(!t.isEnabled())return;t.updateUserActivity();const e=function gZt(t){const{metaKey:n,shiftKey:e,ctrlKey:i,altKey:s,key:r,target:o}=t;if(!o||function bZt(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable}(o)||!r)return null;if(!(n||i||s)&&1===r.length)return null;const c=Df(o,{maxStringLength:200})||"<unknown>";return Fp({category:"ui.keyDown",message:c,data:{...fIe(o,c).data,metaKey:n,shiftKey:e,ctrlKey:i,altKey:s,key:r}})}(n);e&&Ik(t,e)}(this,n)}}_doChangeToBackgroundTasks(n){!this.session||vIe(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(n&&this._createCustomBreadcrumb(n),this.conditionalFlush())}_doChangeToForegroundTasks(n){this.session&&(this.checkAndHandleExpiredSession()?n&&this._createCustomBreadcrumb(n):qn&&ai.info("Document has become active, but session has expired"))}_updateUserActivity(n=Date.now()){this._lastActivity=n}_updateSessionActivity(n=Date.now()){this.session&&(this.session.lastActivity=n,this._maybeSaveSession())}_createCustomBreadcrumb(n){this.addUpdate(()=>{this.throttledAddEvent({type:Wi.Custom,timestamp:n.timestamp||0,data:{tag:"breadcrumb",payload:n}})})}_addPerformanceEntries(){const n=function yZt(t){return t.map(wZt).filter(Boolean)}(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(QP(this,n))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:n,eventBuffer:e}=this;if(!n||!e||this._requiresManualStart||n.segmentId)return;const i=e.getEarliestTimestamp();i&&i<this._context.initialTimestamp&&(this._context.initialTimestamp=i)}_popEventContext(){const n={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),n}_runFlush(){var n=this;return z(function*(){const e=n.getSessionId();if(n.session&&n.eventBuffer&&e){if(yield n._addPerformanceEntries(),n.eventBuffer&&n.eventBuffer.hasEvents&&(yield function PQt(t){return dX.apply(this,arguments)}(n),n.eventBuffer&&e===n.getSessionId()))try{n._updateInitialTimestampFromEventBuffer();const i=Date.now();if(i-n._context.initialTimestamp>n._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const s=n._popEventContext(),r=n.session.segmentId++;n._maybeSaveSession();const o=yield n.eventBuffer.finish();yield FIe({replayId:e,recordingData:o,segmentId:r,eventContext:s,session:n.session,options:n.getOptions(),timestamp:i})}catch(i){n.handleException(i),n.stop({reason:"sendReplay"});const s=Zi();s&&s.recordDroppedEvent("send_error","replay")}}else qn&&ai.error("No session or eventBuffer found to flush.")})()}__init5(){var n=this;this._flush=z(function*({force:e=!1}={}){if(!n._isEnabled&&!e)return;if(!n.checkAndHandleExpiredSession())return void(qn&&ai.error("Attempting to finish replay event after session expired."));if(!n.session)return;const i=n.session.started,r=Date.now()-i;n._debouncedFlush.cancel();const o=r<n._options.minReplayDuration;if(o||r>n._options.maxReplayDuration+5e3)return qn&&ai.info(`Session duration (${Math.floor(r/1e3)}s) is too ${o?"short":"long"}, not sending replay.`),void(o&&n._debouncedFlush());const l=n.eventBuffer;if(l&&0===n.session.segmentId&&!l.hasCheckout&&qn&&ai.info("Flushing initial segment without checkout."),!n._flushLock)return n._flushLock=n._runFlush(),yield n._flushLock,void(n._flushLock=void 0);try{yield n._flushLock}catch(c){qn&&ai.error(c)}finally{n._debouncedFlush()}})}_maybeSaveSession(){this.session&&this._options.stickySession&&ZK(this.session)}__init6(){this._onMutationHandler=n=>{const e=n.length,i=this._options.mutationLimit,r=i&&e>i;if(e>this._options.mutationBreadcrumbLimit||r){const o=Fp({category:"replay.mutations",data:{count:e,limit:r}});this._createCustomBreadcrumb(o)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function Dk(t,n){return[...t,...n].join(",")}const PIe='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',ZQt=["content-length","content-type","accept"];let $Ie=!1;const QQt=t=>new n4(t);class n4{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:n=5e3,flushMaxDelay:e=5500,minReplayDuration:i=4999,maxReplayDuration:s=36e5,stickySession:r=!0,useCompression:o=!0,workerUrl:a,_experiments:l={},maskAllText:c=!0,maskAllInputs:u=!0,blockAllMedia:d=!0,mutationBreadcrumbLimit:h=750,mutationLimit:p=1e4,slowClickTimeout:f=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:v=[],networkDetailDenyUrls:y=[],networkCaptureBodies:w=!0,networkRequestHeaders:x=[],networkResponseHeaders:T=[],mask:k=[],maskAttributes:R=["title","placeholder"],unmask:N=[],block:D=[],unblock:F=[],ignore:$=[],maskFn:j,beforeAddRecordingEvent:Q,beforeErrorSampling:Y}={}){this.name=n4.id;const ce=function XQt({mask:t,unmask:n,block:e,unblock:i,ignore:s}){return{maskTextSelector:Dk(t,[".sentry-mask","[data-sentry-mask]"]),unmaskTextSelector:Dk(n,[]),blockSelector:Dk(e,[".sentry-block","[data-sentry-block]",'base[href="/"]']),unblockSelector:Dk(i,[]),ignoreSelector:Dk(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}({mask:k,unmask:N,block:D,unblock:F,ignore:$});if(this._recordingOptions={maskAllInputs:u,maskAllText:c,maskInputOptions:{password:!0},maskTextFn:j,maskInputFn:j,maskAttributeFn:(Ce,Z,le)=>function YQt({el:t,key:n,maskAttributes:e,maskAllText:i,privacyOptions:s,value:r}){return!i||s.unmaskTextSelector&&t.matches(s.unmaskTextSelector)?r:e.includes(n)||"value"===n&&"INPUT"===t.tagName&&["submit","button"].includes(t.getAttribute("type")||"")?r.replace(/[\S]/g,"*"):r}({maskAttributes:R,maskAllText:c,privacyOptions:ce,key:Ce,value:Z,el:le}),...ce,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:Ce=>{try{Ce.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:n,flushMaxDelay:e,minReplayDuration:Math.min(i,15e3),maxReplayDuration:Math.min(s,36e5),stickySession:r,useCompression:o,workerUrl:a,blockAllMedia:d,maskAllInputs:u,maskAllText:c,mutationBreadcrumbLimit:h,mutationLimit:p,slowClickTimeout:f,slowClickIgnoreSelectors:g,networkDetailAllowUrls:v,networkDetailDenyUrls:y,networkCaptureBodies:w,networkRequestHeaders:BIe(x),networkResponseHeaders:BIe(T),beforeAddRecordingEvent:Q,beforeErrorSampling:Y,_experiments:l},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${PIe}`:PIe),this._isInitialized&&TTe())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return $Ie}set _isInitialized(n){$Ie=n}afterAllSetup(n){!TTe()||this._replay||(this._setup(n),this._initialize(n))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(n){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(n):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(n){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(n),this._replay.initializeSampling())}_setup(n){const e=function JQt(t,n){const e=n.getOptions(),i={sessionSampleRate:0,errorSampleRate:0,...ga(t)},s=YR(e.replaysSessionSampleRate),r=YR(e.replaysOnErrorSampleRate);return null==s&&null==r&&mw(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),null!=s&&(i.sessionSampleRate=s),null!=r&&(i.errorSampleRate=r),i}(this._initialOptions,n);this._replay=new fg({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(n){try{const e=n.getIntegrationByName("ReplayCanvas");if(!e)return;this._replay._canvas=e.getOptions()}catch{}}}function BIe(t){return[...ZQt,...t.map(n=>n.toLowerCase())]}n4.__initStatic();const eJt={};function tJt(t,n){1&t&&q(0,"global-chat")}function nJt(t,n){1&t&&q(0,"debug-console")}const VIe=location.search;window.global=window;let sJt=(()=>{class t extends hn{get debug(){return window.debug&&!0===this._settings.get("app.allow_debugging")}get has_chat(){return this._settings.get("app.chat.enabled")}constructor(e,i,s,r,o,a,l,c,u,d,h){super(),this._analytics=e,this._settings=i,this._org=s,this._cache=r,this._snackbar=o,this._hotkey=a,this._clipboard=l,this._route=c,this._router=u,this._maps=d,this._translate=h}ngOnInit(){var e=this;return z(function*(){ji("APP","MOCKS:",eJt),e._hotkey.listen(["Control","Alt","Shift","KeyM"],()=>{localStorage.setItem("mock",`${"true"!==localStorage.getItem("mock")}`),location.reload()}),e._hotkey.listen(["Control","Alt","Shift","KeyD"],()=>{e._settings.saveUserSetting("dark_mode",!e._settings.get("dark_mode")),ep("Toggled dark mode.")}),e._hotkey.listen(["Control","Alt","Shift","KeyC"],()=>{e._clipboard.copy(`${Ho()}|${gO()}`),ep("Successfully copied token.")}),e._hotkey.listen(["Control","Alt","Shift","KeyV"],()=>{navigator.clipboard?.readText().then(s=>e._pasteToken(s))}),window.pasteToken=s=>e._pasteToken(s),e._route.queryParamMap.subscribe(s=>{if(s.has("hide_nav")&&localStorage.setItem("PlaceOS.hide_nav","true"),s.has("lang")){const r=s.get("lang");e._translate?.use(r),localStorage.setItem("PLACEOS.locale",r)}s.has("x-api-key")&&function TXe(t,n=!0){_r.setItem(`${gr}_x-api-key`,`${t}`),_r.setItem("trusted",`${n}`),function IXe(t,n=mO(new Date,2).valueOf()){Ji.ignore_api_key&&"x-api-key"===t||(_r.setItem(`${gr}_expires_at`,`${n}`),_r.setItem(`${gr}_access_token`,t))}("x-api-key",O0(new Date,5).valueOf())}(s.get("x-api-key"))}),function eQe(t,n=!1){kz=t,W0=n}(e._snackbar),yield e._settings.initialised.pipe(as(s=>s)).toPromise(),Vde(e._settings.get("app.short_name"));const i=e._settings.get("composer")||{};if(i.mock=!!e._settings.get("mock")||location.origin.includes("demo.place.tech"),VIe){const s=A0(VIe.substring(1));e._router.navigate([],{relativeTo:e._route,queryParams:s})}yield function ket(t){return Hz.apply(this,arguments)}(i).catch(s=>console.error(s)),yield e._org.initialised.pipe(as(s=>s)).toPromise(),function Tet(t,n=3e5){t.isEnabled&&(ST&&clearInterval(ST),ST=setInterval(()=>{ji("CACHE","Checking for updates..."),function Iet(t){jz.apply(this,arguments)}(t)},n))}(e._cache),i.local_login||e.timeout("wait_for_user",()=>e.onInitError(),3e4),yield _T.pipe(as(s=>!!s)).toPromise(),e.clearTimeout("wait_for_user"),e._initLocale(),function YZe(t){fT=t}(e._settings.get("app.general.internal_user_domain")||`@${Qt()?.email?.split("@")[1]}`),e._initAnalytics(),function iJt(t,n=.1){t&&function npt(t){const n={defaultIntegrations:[h_e(),m_e(),$_e(),U_e(),K_e(),__e(),H_e()],...t};return D_e(n,"angular"),function ipt(){const n=f5&&f5.major?parseInt(f5.major,10):void 0;n&&(n<14&&Fge&&kt.warn(`This Sentry SDK does not officially support Angular ${n}.`,"This SDK only supports Angular 14 and above.","If you're using lower Angular versions, check the Angular Version Compatibility table in our docs: https://docs.sentry.io/platforms/javascript/guides/angular/#angular-version-compatibility.","Otherwise, please consider upgrading your Angular version."),i_e("angular",{version:n}))}(),Sdt(n)}({dsn:t,integrations:[hpt(),QQt({maskAllText:!1,blockAllMedia:!1})],tracesSampleRate:1,tracePropagationTargets:["localhost",/^https:\/\/[a-zA-Z0-9_\-]*\.[a-zA-Z0-9]*\/api/,/^https:\/\/[a-zA-Z0-9_\-]*\.placeos\.run*\/api/],replaysSessionSampleRate:n,replaysOnErrorSampleRate:1})}(e._settings.get("app.sentry_dsn"));try{const s=Ho();(function KYe(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document})()&&function mst(t){for(var n in t)O7[n.toLowerCase()]=t[n]}("x-api-key"===s?{"x-api-key":Jm()}:{Authorization:`Bearer ${s}`}),e._settings.get("app.has_uploads")&&e.timeout("init_uploads",()=>{!function Net(t){void 0===t&&(t={}),(uo=th({},Cpe,t)).endpoint&&(vpe=uo.endpoint),function(n,e){var i;void 0===n&&(n="/node_modules/ts-md5/dist/md5_worker.js"),(null==(i=IT)?void 0:i.length)>0&&IT.forEach(function(r){return r.terminate()}),IT=[];for(var s=0;s<3;s+=1)IT.push(new dXe(n,e))}(uo.worker_url,uo.worker_options),uo.token&&Kz.setToken(uo.token),uo.api_key&&Kz.setApiKey(uo.api_key),function Oet(t){t.forEach(function(n){return function Det(t,n){bpe[t]=n}(n.lookup,n)})}(uo.providers)}({auto_start:!0,token:Ho(),endpoint:"/api/engine/v2/uploads",worker_url:"assets/md5_worker.js",providers:[Epe,Tpe,Ipe,kpe]})}),cz()&&(e.interval("auto-update-version",()=>e._checkReload(),15e3),yield function ytt(){return d7.apply(this,arguments)}())}catch{}})()}onInitError(){BE()||Qt()?.is_logged_in||(vO(),location.reload())}_initAnalytics(){const e=this._settings.get("app.analytics.tracking_id");e&&(this._analytics.init(e),this._analytics.load(e),this._analytics.setUser(Qt().id))}_initLocale(){try{let e=localStorage.getItem("PLACEOS.locale");const i=this._settings.get("app.locales")||[];if(this._translate?.addLangs(i.map(s=>s.id)),e)this._translate?.use(e);else{const s=navigator.languages;for(const r of s)if(e=i.find(o=>o.id===r),e||(e=i.find(o=>r.includes(o.id))),e){this._translate?.use(r),localStorage.setItem("PLACEOS.locale",r);break}}}catch{}}_pasteToken(e){const i=e.split("|"),s=ode();localStorage.setItem(`${s}_access_token`,`${i[0]}`),localStorage.setItem(`${s}_refresh_token`,`${i[1]}`),localStorage.setItem(`${s}_expires_at`,`${mO(new Date,6).valueOf()}`),ep("Successfully pasted token."),setTimeout(()=>location.reload(),2e3)}_checkReload(){mpe()&&(location.reload(),this.timeout("reload",()=>location.href=`${location.origin}${location.pathname}`))}static#e=this.\u0275fac=function(i){return new(i||t)(I(Gde),I(nn),I(Sn),I(N6),I(bce),I(jde),I(bue),I(uc),I(lo),I(a_),I(hE,8))};static#t=this.\u0275cmp=Se({type:t,selectors:[["app-root"]],features:[Ze],decls:6,vars:2,consts:[[1,"flex-1","w-full","relative","h-1/2"],[4,"ngIf"]],template:function(i,s){1&i&&(q(0,"global-banner"),m(1,"div",0),q(2,"router-outlet"),_(),O(3,tJt,1,0,"global-chat",1),q(4,"global-loading"),O(5,nJt,1,0,"debug-console",1)),2&i&&(b(3),C("ngIf",s.has_chat),b(2),C("ngIf",s.debug))},dependencies:[mt,v6,hfe,pfe,b7,hme],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}"]})}return t})();function rJt(t,n){if(1&t){const e=se();m(0,"button",8),P("click",function(){return B(e),V(E().close.emit())}),m(1,"app-icon"),S(2,"arrow_back"),_()()}}function oJt(t,n){1&t&&q(0,"div",9)}function aJt(t,n){1&t&&(m(0,"div",18),S(1," Host "),_())}function lJt(t,n){if(1&t&&(m(0,"div",11),q(1,"a-user-avatar",12),m(2,"div",13)(3,"div",14),S(4),_(),O(5,aJt,2,0,"div",15),_(),m(6,"div",16),q(7,"div",17),_()()),2&t){const e=E().$implicit,i=E();b(),C("user",e),b(3),Ye(e.name),b(),C("ngIf",i.host===e.email),b(2),Oe("bg-success",e.checked_in)("bg-pending",!e.checked_in),C("matTooltip",e.checked_in?"Checked in":"Not checked in")}}function cJt(t,n){if(1&t&&(Wt(0),O(1,lJt,8,8,"div",10),qt()),2&t){const e=n.$implicit,i=E();b(),C("ngIf",!e.resource&&(i.host!==e.email||i.show_host))}}let s4=(()=>{class t{constructor(){this.host="",this.show_host=!0,this.list=[],this.hide_close=!1,this.custom_title="",this.close=new Ae}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Se({type:t,selectors:[["attendee-list"]],inputs:{host:"host",show_host:"show_host",list:"list",hide_close:"hide_close",custom_title:"custom_title"},outputs:{close:"close"},decls:8,vars:5,consts:()=>{let e;return e=$localize`:␟c68a77fe1aa97a8e5588bafc6b5cb8ced3e3d288␟5922903057904788374: ${"\ufffd0\ufffd"}:INTERPOLATION: ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,[e,[1,"w-full","h-full","overflow-hidden","flex","flex-col","bg-base-100"],[1,"flex","items-center","border-b","border-base-200","p-2","min-h-12"],["close","","icon","","matRipple","",3,"click",4,"ngIf"],[1,"flex-1","text-center","font-medium"],["class","w-12",4,"ngIf"],[1,"flex-1","w-full","overflow-auto"],[4,"ngFor","ngForOf"],["close","","icon","","matRipple","",3,"click"],[1,"w-12"],["attendee","","class","flex items-center p-2 space-x-2 hover:bg-base-200",4,"ngIf"],["attendee","",1,"flex","items-center","p-2","space-x-2","hover:bg-base-200"],[3,"user"],[1,"flex-1","w-1/2"],[1,"truncate"],["class","opacity-60 text-sm",4,"ngIf"],[1,"p-2"],[1,"h-3","w-3","rounded-full",3,"matTooltip"],[1,"opacity-60","text-sm"]]},template:function(i,s){1&i&&(m(0,"div",1)(1,"div",2),O(2,rJt,3,0,"button",3),m(3,"div",4),oe(4,0),_(),O(5,oJt,1,0,"div",5),_(),m(6,"div",6),O(7,cJt,2,1,"ng-container",7),_()()),2&i&&(b(2),C("ngIf",!s.hide_close),b(2),Vn(s.list.length)(s.custom_title?s.custom_title:1===s.list.length?"Attendee":"Attendees"),Gn(4),b(),C("ngIf",!s.hide_close),b(2),C("ngForOf",s.list))}})}return t})();const uJt=()=>({disable_pan:!0,disable_zoom:!0});function dJt(t,n){1&t&&q(0,"div",58)}function hJt(t,n){if(1&t&&(m(0,"div",59),q(1,"image-carousel",60),_()),2&t){const e=E();b(),C("images",null==e.event||null==e.event.system?null:e.event.system.images)}}function pJt(t,n){if(1&t&&(m(0,"div",61),S(1),_()),2&t){const e=E();b(),K(" ",e.period_tz," ")}}function fJt(t,n){if(1&t){const e=se();m(0,"button",65),P("click",function(){return B(e),V(E(2).checkin())}),m(1,"div",66)(2,"app-icon",67),S(3),_(),m(4,"div",68),oe(5,9),_()()()}if(2&t){const e=E(2);Oe("bg-success","pending"!==e.room_status)("border-none","pending"!==e.room_status)("pointer-events-none","pending"!==e.room_status),b(3),Ye("pending"===e.room_status?"arrow_back":"done"),b(2),Vn("pending"===e.room_status?"Check in":"Checked in"),Gn(5)}}function mJt(t,n){1&t&&(m(0,"button",69)(1,"app-icon"),S(2,"more_horiz"),_()()),2&t&&(E(2),C("matMenuTriggerFor",xt(80)))}function _Jt(t,n){if(1&t&&(m(0,"div",62),O(1,fJt,6,8,"button",63)(2,mJt,3,1,"button",64),_()),2&t){const e=E();b(),C("ngIf",e.room_status&&(null==e.event?null:e.event.can_check_in)&&"free"!==e.room_status),b(),C("ngIf",e.allow_edit)}}function gJt(t,n){if(1&t&&(m(0,"div",61),S(1),_()),2&t){const e=E();b(),K(" ",e.period_tz," ")}}function bJt(t,n){if(1&t&&(Wt(0),S(1),qt()),2&t){const e=E();b(),K(" ",(null==e.level?null:e.level.display_name)||(null==e.level?null:e.level.name),", ")}}function vJt(t,n){if(1&t&&(m(0,"div",31)(1,"app-icon"),S(2,"place"),_(),m(3,"div"),S(4),_()()),2&t){const e=E();b(4),Os(" ",(null==e.building?null:e.building.display_name)||(null==e.building?null:e.building.name),", ",null==e.building?null:e.building.address," ")}}function yJt(t,n){if(1&t&&(m(0,"span",86),S(1),_()),2&t){const e=E().$implicit;C("matTooltip",E(3).optionList(e)),b(),K(" ",(null==e.option_list?null:e.option_list.length)||"0"," option(s) ")}}function wJt(t,n){if(1&t&&(m(0,"div",81)(1,"div",82)(2,"span",76),S(3),_(),O(4,yJt,2,2,"span",83),_(),m(5,"div",84),S(6),_(),m(7,"div",85),S(8),H(9,"currency"),_()()),2&t){const e=n.$implicit,i=E(3);b(3),Ye(e.name||"Item"),b(),C("ngIf",null==e.option_list?null:e.option_list.length),b(2),K(" x",e.quantity," "),b(2),K(" ",At(9,4,e.unit_price_with_options/100,i.currency_code)," ea ")}}function CJt(t,n){if(1&t){const e=se();m(0,"div",73)(1,"div",74)(2,"div",75)(3,"div",76),S(4),H(5,"date"),_(),m(6,"div",77),S(7),H(8,"currency"),_()(),m(9,"button",78),P("click",function(){const s=B(e).$implicit,r=E(2);return V(r.show_order[s.id]=!r.show_order[s.id])}),m(10,"app-icon"),S(11),_()()(),m(12,"div",79),O(13,wJt,10,7,"div",80),_()()}if(2&t){const e=n.$implicit,i=E(2);b(4),K(" Order at ",At(5,7,e.deliver_at,"MMM d, "+i.time_format)," "),b(3),Os(" ",e.item_count," item(s) for ",At(8,10,e.total_cost/100,i.currency_code)," "),b(2),C("matTooltip",i.show_order[e.id]?"Hide order items":"Show order items"),b(2),K(" ",i.show_order[e.id]?"expand_less":"expand_more"," "),b(),C("@show",i.show_order[e.id]?"show":"hide"),b(),C("ngForOf",e.items)}}function SJt(t,n){if(1&t&&(Wt(0),m(1,"div",34)(2,"h3",70),oe(3,10),_(),m(4,"div",71),O(5,CJt,14,13,"div",72),_()(),qt()),2&t){const e=E();b(5),C("ngForOf",e.event.valid_catering)}}function xJt(t,n){if(1&t&&(Wt(0),q(1,"interactive-map",87),qt()),2&t){const e=E();b(),C("src",null==e.level?null:e.level.map_id)("features",e.features)("options",tn(3,uJt))}}function EJt(t,n){1&t&&(q(0,"div",90),H(1,"sanitize")),2&t&&C("innerHTML",ne(1,1,E(2).body)||"Unable to sanitize notes contents",Nu)}function TJt(t,n){if(1&t&&(m(0,"div",34)(1,"h3",88),oe(2,11),_(),O(3,EJt,2,3,"div",89),_()),2&t){const e=E();b(3),C("ngIf",e.body)}}function IJt(t,n){if(1&t&&(m(0,"div",81)(1,"div",82)(2,"span",76),S(3),_()(),m(4,"div",84),S(5),_()()),2&t){const e=n.$implicit;b(3),Ye(e.name||"Item"),b(2),K(" x",e.quantity," ")}}function kJt(t,n){if(1&t){const e=se();m(0,"div",93)(1,"button",94),P("click",function(){const s=B(e).$implicit,r=E(2);return V(r.show_request[s.id]=!r.show_request[s.id])}),m(2,"div",95)(3,"div",76),S(4),H(5,"date"),_()(),m(6,"div",96)(7,"app-icon"),S(8),_()(),m(9,"div",97)(10,"app-icon",67),S(11),_()()(),m(12,"div",79),O(13,IJt,6,2,"div",80),_()()}if(2&t){const e=n.$implicit,i=E(2);b(4),K(" Requested for ",At(5,18,e.deliver_at,"MMM d, "+i.time_format)," "),b(2),Oe("bg-success","approved"===e.state)("text-success-content","approved"===e.state)("bg-warning","approved"!==e.state&&"rejected"!==e.state)("text-warning-content","approved"!==e.state&&"rejected"!==e.state)("bg-error","rejected"===e.state)("text-error-content","rejected"===e.state),C("matTooltip",e.state||"Tentative"),b(2),K(" ","approved"===e.state?"done":"rejected"===e.state?"close":"schedule"," "),b(3),K(" ",i.show_request[e.id]?"expand_less":"expand_more"," "),b(),C("@show",i.show_request[e.id]?"show":"hide"),b(),C("ngForOf",e.items)}}function DJt(t,n){if(1&t&&(Wt(0),m(1,"div",34)(2,"h3",91),oe(3,12),_(),m(4,"div",71),O(5,kJt,14,21,"div",92),_()(),qt()),2&t){const e=E();b(3),Vn((null==e.event.valid_assets?null:e.event.valid_assets.length)||0),Gn(3),b(2),C("ngForOf",e.event.valid_assets)}}function AJt(t,n){if(1&t){const e=se();m(0,"div",98)(1,"attendee-list",99),P("click",function(){return B(e),V(E().show_attendees=!1)}),_()()}if(2&t){const e=E();b(),C("list",e.event.attendees)("host",e.event.host)}}function MJt(t,n){if(1&t){const e=se();m(0,"button",100),P("click",function(){B(e);const s=E();return V(s.edit.emit(s.space))}),m(1,"div",54)(2,"app-icon",67),S(3,"edit"),_(),m(4,"div"),oe(5,13),_()()()}if(2&t){const e=E();C("matTooltip",e.can_edit?"":e.no_edit_message)("disabled",!e.can_edit)}}function NJt(t,n){if(1&t){const e=se();m(0,"button",53),P("click",function(){return B(e),V(E().remove.emit(!0))}),m(1,"div",54)(2,"app-icon",55),S(3,"delete"),_(),m(4,"div"),oe(5,14),_()()()}}function OJt(t,n){if(1&t){const e=se();m(0,"button",53),P("click",function(){const s=B(e).$implicit;return V(E().action.emit(s.id))}),m(1,"div",54)(2,"app-icon",67),S(3),_(),m(4,"div"),oe(5,15),_()()()}if(2&t){const e=n.$implicit;b(3),Ye(e.icon),b(2),Vn(e.name),Gn(5)}}const RJt=[];let mX=(()=>{class t{get can_edit(){return!0}get timezone(){return this._settings.get("app.events.use_building_timezone")?this._org.building.timezone:""}get tz(){const e=this.timezone;return e?kT(e):""}get body(){return this.event.body.replace(/\\n\\n\[ID\|.*\]/gm,"")}get allow_edit(){return!this._settings.get("app.events.booking_unavailable")}get custom_actions(){return this._settings.get("app.events.custom_actions")||RJt}get time_format(){return this._settings.time_format}get event_status(){return"done"===this.event?.state?"neutral":"approved"===this.event?.status?"success":"tentative"===this.event?.status?"warning":"declined"===this.event?.status?"error":"warning"}constructor(e,i,s,r,o){this._event=e,this._org=i,this._space_pipe=s,this._settings=r,this._dialog=o,this.action=new Ae,this.edit=new Ae,this.remove=new Ae,this.show_order={},this.show_request={},this.room_status="",this.hide_map=!1,this.hide_edit=!1,this.show_attendees=!1,this.event=this._event,this.no_edit_message="Editing bookings long than \n a day is not available",this.features=[{location:this.event?.system?.map_id,content:Gu}],this.has_catering=this.event?.ext("catering")?.length>0,this.has_assets=!!this.event?.linked_bookings?.find(a=>"asset-request"===a.booking_type),this.level=new gT,this.building=new Dz,this.space=new Ul,this.accept_count=this._event.attendees.reduce((a,l)=>a+("accepted"===l.response_status?1:0),0),this.declined_count=this._event.attendees.reduce((a,l)=>a+("declined"===l.response_status?1:0),0),this.pending_count=this._event.attendees.reduce((a,l)=>a+("tentative"===l.response_status||"needsAction"===l.response_status?1:0),0),this._date=new fs("en"),this._load().then(),console.log("Timezone:",this.timezone)}get period(){return this.event?.all_day?"All Day":this.formattedTime()}get period_tz(){return this.formattedTime(this.tz)}formattedTime(e){const i=this.event.date,s=this.event.date_end,r=this.event.all_day,o=this._date.transform(i,"z",e),a=this._date.transform(i,"MMM d",e),l=this._date.transform(i,this.time_format,e),c=this._date.transform(s,"MMM d",e),u=this._date.transform(s,this.time_format,e);return this.event?.duration>1440?`${a}${r?"":", "+l} - ${c}${r?"":", "+u}`:r?"All Day":`${l} - ${u} ${"("+o+")"}`}optionList(e){return e.option_list?.map(i=>i.name).join("\n")}checkin(){var e=this;return z(function*(){const i=Qr(e.space?.id,"Bookings");i&&(yield i.execute("checkin",[Ai(e.event.date)]).catch(s=>Ti(`Error checking in booking. ${s}`)),e.room_status="busy")})()}_load(){var e=this;return z(function*(){if(e.space=yield e._space_pipe.transform(e._event.system?.id||e._event.system?.email),e.level=e._org.levelWithID(e.space.zones),e.building=e._org.buildings.find(s=>e.space.zones.includes(s.id)),e.features=[{location:e.space.map_id,content:Gu}],e.event.extension_data.catering?.length||e.event.extension_data.assets?.length)return;const i=yield function a6t(t,n,e={}){const i=Vr({...e});return Aa(`${Zl}/${encodeURIComponent(t)}/metadata/${encodeURIComponent(n)}${i?"?"+i:""}`).pipe(me(s=>s))}(e._event.id,e.space.id).toPromise();i&&(e._event=new Ta({...e._event,extension_data:{...e._event.extension_data,...i}}))})()}status(e){const i=this.event.linked_bookings.find(s=>s.asset_id===e);return i.status?i.status:i?i.approved?"approved":i.rejected?"rejected":"pending":"pending"}viewLocation(){this.hide_map=!0,this._dialog.open(MT,{maxWidth:"95vw",maxHeight:"95vh",data:{item:this.space}}).afterClosed().subscribe(()=>{this.hide_map=!1})}static#e=this.\u0275fac=function(i){return new(i||t)(I(or),I(Sn),I(Uu),I(nn),I(Tr))};static#t=this.\u0275cmp=Se({type:t,selectors:[["event-details-modal"]],outputs:{action:"action",edit:"edit",remove:"remove"},features:[bt([Uu])],decls:90,vars:37,consts:()=>{let e,i,s,r,o,a,l,c,u,d,h,p,f,g,v;return e=$localize`:␟2c8ce65c566300dc9063f69c615fda2e3a6b896a␟2102851380219026584: Details `,i=$localize`:␟dc34e61df786db36347c8dc09510fa3d5d4c6253␟8291262399353359697:Attendees`,s=$localize`:␟8ee85ef5a3693fb53511af55f66b8543941a5968␟5528514721268144968: See All `,r=$localize`:␟4f20f2d5a6882190892e58b85f6ccbedfa737952␟2807800733729323332:Yes`,o=$localize`:␟3d3ae7deebc5949b0c1c78b9847886a94321d9fd␟3542042671420335679:No`,a=$localize`:␟e6a27066251ca1e04c5be86ad758380856df2506␟4416413576346763682:Pending`,l=$localize`:␟01072150a2c93fe7032783804ebfa5a1e41f3685␟6139423482037031714: Host `,c=$localize`:␟e634daa29c58868c9c9c4d9fcc7ba1c016fac86b␟4014175048517775632:Delete event`,u=$localize`:␟e00cf812605b14c9c2390da404d3cd3ea67f19a6␟3151361020738293834: ${"\ufffd0\ufffd"}:INTERPOLATION: `,d=$localize`:␟ef2612559c447d8f4c218c06bb66af9de8edf365␟6975755512274629403: Catering `,h=$localize`:␟195b2f1c65301b0700459c9d0ae2ce407ed9c7bf␟4484880822148672471: Notes `,p=$localize`:␟e30ee857e7399db3f72ec7aa8aa9b56ce76fca96␟3391582008093299175: Assets (${"\ufffd0\ufffd"}:INTERPOLATION:) `,f=$localize`:␟56c74224d22c7379fdbf9d0a00c8bf519a9ee661␟2772374745622574688:Edit event`,g=$localize`:␟ecb2e91e2775870da0ea8e51b4951994493672fb␟3974228098480354844:Delete Series`,v=$localize`:␟8fcf89a6df3c02c129a41d4b202221a4013f107c␟941732683947462971:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["menu","matMenu"],e,i,s,r,o,a,l,c,u,d,h,p,f,g,v,[1,"w-[100vw]","h-[100vh]","sm:relative","sm:inset-auto","sm:w-[51rem]","sm:h-auto","sm:max-h-[80vh]","bg-base-100","sm:bg-base-200","sm:dark:bg-neutral-600","sm:rounded","overflow-auto","space-y-2","pb-2"],[1,"sm:flex","flex-col","items-center","pb-4","max-h-screen","sm:max-h-[80vh]","sm:px-16","sm:border-b","bg-base-100","border-base-200"],["binding","","mod","Bookings","bind","status",3,"modelChange","model","sys"],["class","h-8 w-full sm:hidden block",4,"ngIf"],["class","bg-neutral w-full h-64 sm:rounded-b overflow-hidden",4,"ngIf"],["title","",1,"px-3","mt-2","text-xl","font-medium","w-full"],[1,"sm:flex","items-center","justify-between","w-full"],[1,"flex","m-2"],[3,"status"],[1,"flex","flex-col","leading-tight"],["class","opacity-30 text-xs",4,"ngIf"],["actions","","class","flex items-center space-x-2 px-2",4,"ngIf"],[1,"sm:flex","flex-wrap","sm:px-12"],[1,"sm:p-4","sm:bg-base-100","sm:dark:bg-neutral-700","rounded","sm:m-2","sm:border","border-base-200","flex-grow-[3]","min-w-1/3","sm:w-[16rem]","space-y-2"],[1,"px-3","mt-2","text-lg","font-medium","mb-2"],[1,"flex","items-center","px-2","space-x-2"],[4,"ngIf"],["class","flex items-center px-2 space-x-2",4,"ngIf"],[1,"mt-4","sm:p-4","sm:bg-base-100","sm:dark:bg-neutral-700","rounded","sm:m-2","sm:border","border-base-200","flex-grow-[3]","min-w-1/3","sm:w-[16rem]"],[1,"mx-3","border-t","border-base-200","sm:border-none","flex","items-center","justify-between"],[1,"text-lg","font-medium"],["matRipple","","show-attendees","",1,"clear","text-xs","underline",3,"click"],[1,"flex","items-center","p-1"],[1,"flex","flex-col","flex-1","items-center","justify-center","space-y-1"],[1,"text-lg"],[1,"text-sm","uppercase"],[1,"mx-3","mt-2","pt-2","text-lg","font-medium","border-t","border-base-200"],["host","",1,"px-2","flex","items-center","space-x-2"],[3,"user"],[1,"text-sm","flex-1","w-px"],[1,"opacity-60","truncate","w-full",3,"title"],["map","",1,"mt-4","sm:mt-2","h-64","sm:h-48","relative","border","border-base-200","overflow-hidden","rounded","sm:bg-base-100","sm:dark:bg-neutral-700","m-2","flex-grow-[3]","min-w-1/3","p-2","w-[calc(100%-1rem)]","sm:w-[16rem]",3,"click"],["class","mt-4 sm:p-4 sm:bg-base-100 sm:dark:bg-neutral-700 rounded sm:m-2 sm:border border-base-200 flex-grow-[3] min-w-1/3 sm:w-[16rem]",4,"ngIf"],["icon","","matRipple","","mat-dialog-close","",1,"absolute","top-2","left-2","bg-neutral","text-white"],["class","absolute inset-0 z-50",4,"ngIf"],["xPosition","before"],["mat-menu-item","","mat-dialog-close","",3,"matTooltip","disabled","click",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"flex","items-center","space-x-2","text-base","pr-2"],[1,"text-2xl","text-error"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"h-8","w-full","sm:hidden","block"],[1,"bg-neutral","w-full","h-64","sm:rounded-b","overflow-hidden"],[1,"w-full","h-64",3,"images"],[1,"opacity-30","text-xs"],["actions","",1,"flex","items-center","space-x-2","px-2"],["btn","","matRipple","","class","flex-1 h-10",3,"bg-success","border-none","pointer-events-none","click",4,"ngIf"],["icon","","matRipple","","class","bg-secondary rounded text-white h-12 w-12",3,"matMenuTriggerFor",4,"ngIf"],["btn","","matRipple","",1,"flex-1","h-10",3,"click"],[1,"flex","items-center","space-x-2","justify-center"],[1,"text-2xl"],[1,"pr-4"],["icon","","matRipple","",1,"bg-secondary","rounded","text-white","h-12","w-12",3,"matMenuTriggerFor"],[1,"mx-3","my-2","text-lg","font-medium"],[1,"flex","flex-col","space-y-2"],["order","","class","border border-base-300 bg-base-100 rounded-xl overflow-hidden",4,"ngFor","ngForOf"],["order","",1,"border","border-base-300","bg-base-100","rounded-xl","overflow-hidden"],[1,"flex","items-center","space-x-2","p-3"],[1,"flex-1"],[1,"text-sm"],[1,"text-xs","opacity-60"],["icon","","matRipple","",3,"click","matTooltip"],[1,"flex","flex-col","bg-base-200","divide-y","divide-base-100"],["class","flex items-center px-3 py-1 space-x-2 hover:opacity-90",4,"ngFor","ngForOf"],[1,"flex","items-center","px-3","py-1","space-x-2","hover:opacity-90"],[1,"flex","items-center","flex-1"],["class","text-xs opacity-60 ml-4 font-normal",3,"matTooltip",4,"ngIf"],[1,"rounded","bg-success","text-success-content","text-xs","px-2","py-1"],[1,"rounded","bg-info","text-info-content","text-xs","px-2","py-1"],[1,"text-xs","opacity-60","ml-4","font-normal",3,"matTooltip"],[1,"pointer-events-none",3,"src","features","options"],[1,"mx-3","text-lg","font-medium","border-t","sm:border-none","border-base-200"],["notes","","class","mx-4 overflow-hidden max-w-full",3,"innerHTML",4,"ngIf"],["notes","",1,"mx-4","overflow-hidden","max-w-full",3,"innerHTML"],[1,"mx-3","pt-2","text-lg","font-medium"],["request","","class","border border-base-300 bg-base-100 rounded-xl overflow-hidden",4,"ngFor","ngForOf"],["request","",1,"border","border-base-300","bg-base-100","rounded-xl","overflow-hidden"],["matRipple","",1,"flex","items-center","space-x-2","p-3","w-full",3,"click"],[1,"flex-1","text-left"],[1,"flex","items-center","justify-center","rounded-full","w-8","h-8",3,"matTooltip"],[1,"flex","items-center","justify-center","rounded-full","w-8","h-8"],[1,"absolute","inset-0","z-50"],[3,"click","list","host"],["mat-menu-item","","mat-dialog-close","",3,"click","matTooltip","disabled"]]},template:function(i,s){if(1&i){const r=se();m(0,"div",16)(1,"div",17)(2,"i",18),ii("modelChange",function(a){return B(r),jn(s.room_status,a)||(s.room_status=a),V(a)}),_(),O(3,dJt,1,0,"div",19)(4,hJt,2,1,"div",20),m(5,"h3",21),S(6),_(),m(7,"div",22)(8,"div",23)(9,"status-pill",24)(10,"div",25)(11,"div"),S(12),_(),O(13,pJt,2,1,"div",26),_()()(),O(14,_Jt,3,2,"div",27),_()(),m(15,"div",28)(16,"div",29)(17,"h3",30),oe(18,1),_(),m(19,"div",31)(20,"app-icon"),S(21,"event"),_(),m(22,"div"),S(23),H(24,"date"),_()(),m(25,"div",31)(26,"app-icon"),S(27,"schedule"),_(),m(28,"div",25)(29,"div"),S(30),_(),O(31,gJt,2,1,"div",26),_()(),m(32,"div",31)(33,"app-icon"),S(34,"map"),_(),m(35,"div"),O(36,bJt,2,1,"ng-container",32),S(37),_()(),O(38,vJt,5,2,"div",33),_(),m(39,"div",34)(40,"div",35)(41,"h3",36),oe(42,2),_(),m(43,"button",37),P("click",function(){return B(r),V(s.show_attendees=!0)}),oe(44,3),_()(),m(45,"div",38)(46,"div",39)(47,"div",40),S(48),_(),m(49,"div",41),oe(50,4),_()(),m(51,"div",39)(52,"div",40),S(53),_(),m(54,"div",41),oe(55,5),_()(),m(56,"div",39)(57,"div",40),S(58),_(),m(59,"div",41),oe(60,6),_()()(),m(61,"h3",42),oe(62,7),_(),m(63,"div",43),q(64,"a-user-avatar",44),m(65,"div",45)(66,"div"),S(67),_(),m(68,"div",46),S(69),_()()()(),O(70,SJt,6,1,"ng-container",32),m(71,"button",47),P("click",function(){return B(r),V(s.viewLocation())}),O(72,xJt,2,4,"ng-container",32),_(),O(73,TJt,4,1,"div",48)(74,DJt,6,2,"ng-container",32),m(75,"button",49)(76,"app-icon"),S(77,"close"),_()(),O(78,AJt,2,2,"div",50),_(),m(79,"mat-menu",51,0),O(81,MJt,6,2,"button",52),m(82,"button",53),P("click",function(){return B(r),V(s.remove.emit())}),m(83,"div",54)(84,"app-icon",55),S(85,"delete"),_(),m(86,"div"),oe(87,8),_()()(),O(88,NJt,6,0,"button",56)(89,OJt,6,2,"button",57),_()()}2&i&&(b(2),ni("model",s.room_status),C("sys",null==s.space?null:s.space.id),b(),C("ngIf",!(null!=s.event&&null!=s.event.system&&null!=s.event.system.images&&s.event.system.images.length)),b(),C("ngIf",null==s.event||null==s.event.system||null==s.event.system.images?null:s.event.system.images.length),b(),Oe("pt-4",!(null!=s.event&&null!=s.event.system&&null!=s.event.system.images&&s.event.system.images.length)),b(),K(" ",s.event.title," "),b(3),C("status",s.event_status),b(),Oe("pr-4",s.timezone),b(2),Ye(s.period),b(),C("ngIf",s.timezone),b(),C("ngIf","done"!==s.event.state),b(9),K(" ",At(24,34,s.event.date,"EEEE, dd LLLL y")," "),b(7),Ye(s.period),b(),C("ngIf",s.timezone),b(5),C("ngIf",s.level),b(),K(" ",(null==s.event||null==s.event.system?null:s.event.system.display_name)||(null==s.event||null==s.event.system?null:s.event.system.name)||(null==s.event?null:s.event.location)," "),b(),C("ngIf",s.building),b(10),Ye(s.accept_count||0),b(5),Ye(s.declined_count||0),b(5),Ye(s.pending_count||0),b(6),C("user",s.event.organiser),b(3),Ye(null==s.event.organiser?null:s.event.organiser.name),b(),C("title",s.event.host),b(),K(" ",s.event.host," "),b(),C("ngIf",s.has_catering),b(2),C("ngIf",!s.hide_map),b(),C("ngIf",s.body),b(),C("ngIf",s.has_assets),b(4),C("ngIf",s.show_attendees),b(3),C("ngIf",!s.hide_edit),b(7),C("ngIf",s.event.recurring_event_id),b(),C("ngForOf",s.custom_actions))},data:{animation:[ppe]}})}return t})();function FJt(t,n){if(1&t&&q(0,"img",36),2&t){const e=E();C("source",null==e.event.extension_data?null:e.event.extension_data.images[0])}}function LJt(t,n){1&t&&(m(0,"div",37)(1,"app-icon",38),S(2,"star"),_(),m(3,"div",39),S(4,"Featured"),_()())}function PJt(t,n){if(1&t&&(Wt(0),m(1,"div",40)(2,"app-icon"),S(3,"star"),_(),m(4,"div",41),S(5),_()(),m(6,"div",40)(7,"app-icon"),S(8,"help"),_(),m(9,"div",41),S(10),_()(),qt()),2&t){const e=E();b(),Oe("bg-base-200",!e.is_interested)("text-base-content",!e.is_interested)("opacity-30",!e.is_interested)("bg-success",e.is_interested)("text-success-content",e.is_interested)("opacity-100",e.is_interested),b(4),K(" ",e.is_interested?"":"Not ","Interested "),b(),Oe("bg-base-200",!e.is_going)("text-base-content",!e.is_going)("opacity-30",!e.is_going)("bg-success",e.is_going)("text-success-content",e.is_going)("opacity-100",e.is_going),b(4),K(" ",e.is_going?"":"Not ","Going ")}}function $Jt(t,n){if(1&t&&(m(0,"div"),S(1),H(2,"space"),H(3,"async"),_()),2&t){let e;const i=E();b(),K(" ",null==(e=ne(3,3,ne(2,1,i.system_id)))?null:e.display_name," ")}}function BJt(t,n){1&t&&(m(0,"div",42),S(1," Room to be confirmed "),_())}function VJt(t,n){if(1&t&&(m(0,"div",42),S(1),_()),2&t){const e=E();b(),K(" ",e.is_onsite?"Can be attended online":"Remote Event"," ")}}function zJt(t,n){1&t&&(m(0,"span",42),S(1," No description "),_())}function UJt(t,n){if(1&t&&q(0,"interactive-map",50),2&t){const e=E(2);C("src",null==e.level?null:e.level.map_id)("features",e.features)("styles",e.styles)}}function GJt(t,n){if(1&t&&(m(0,"div"),S(1),H(2,"space"),H(3,"async"),_()),2&t){let e;const i=E(2);b(),K(" ",null==(e=ne(3,3,ne(2,1,i.system_id)))?null:e.display_name," ")}}function jJt(t,n){1&t&&(m(0,"div",42),S(1," Room to be confirmed "),_())}function HJt(t,n){if(1&t&&(m(0,"span"),S(1),_()),2&t){const e=E(2);b(),Os(" ",e.building.display_name||e.building.name,", ",(null==e.level?null:e.level.display_name)||(null==e.level?null:e.level.name)," ")}}function WJt(t,n){1&t&&(m(0,"span",42),S(1," No location set for this event "),_())}function qJt(t,n){if(1&t&&(m(0,"a",51),S(1),_()),2&t){const e=E(2);Oe("underline",e.event.meeting_url),C("href",e.event.meeting_url,qa),b(),K(" ",e.is_onsite?"Can be attended online":"Remote Event"," ")}}function KJt(t,n){if(1&t){const e=se();m(0,"div",43)(1,"div",44)(2,"button",45),P("click",function(){return B(e),V(E().viewLocation())}),O(3,UJt,1,3,"interactive-map",46),_(),m(4,"div",47),O(5,GJt,4,5,"div",12)(6,jJt,2,0,"div",30),m(7,"div",48),O(8,HJt,2,2,"span",12)(9,WJt,2,0,"span",30),_(),O(10,qJt,2,4,"a",49),_()()()}if(2&t){const e=E();b(3),C("ngIf",!e.showing_map),b(2),C("ngIf",e.is_onsite&&e.has_space),b(),C("ngIf",e.is_onsite&&!e.has_space),b(2),C("ngIf",e.building&&e.level),b(),C("ngIf",!e.building||!e.level),b(),C("ngIf",e.is_online)}}function XJt(t,n){if(1&t){const e=se();m(0,"div",52)(1,"button",53),P("click",function(){return B(e),V(E().show_attendees=!1)}),_(),m(2,"div",54)(3,"attendee-list",55),P("click",function(){return B(e),V(E().show_attendees=!1)}),_()()()}if(2&t){const e=E();b(3),C("show_host",!1)("list",e.event.attendees)("host",e.event.user_email)}}let Ak=(()=>{class t{get time_format(){return this._settings.time_format}get featured(){return this.event.featured||this.event.extension_data?.featured}get is_onsite(){return"ONLINE"!==this.event.extension_data.attendance_type}get has_space(){return!!this.space?.id}get is_online(){return!this.is_onsite||"ANY"===this.event.extension_data.attendance_type}get body(){if(this.is_online)return this.event.body;let e=this.event.body;const i=['<div style="margin-bottom:24px; overflow:hidden; white-space:nowrap">________________________________________________________________________________</div>',"<p>________________________________________________________________________________</p>"];for(const s of i){const r=e.indexOf(s),o=e.lastIndexOf(s);e=e.substring(0,r)+e.substring(o)}for(const s of i)e=e.replace(s,"");return e}get attendance(){return this.event.attendees?.filter(e=>e.checked_in)?.length||0}get is_interested(){return!!this.guest_details}get is_going(){return this.guest_details?.checked_in}get system_id(){return this.space?.id}get guest_details(){const e=Qt();return this.event.attendees?.find(i=>i.email===e.email)}get group_event_calendar(){return this._settings.get("app.group_events_calendar")}constructor(e,i,s,r,o){this._data=e,this._org=i,this._settings=s,this._dialog=r,this._dialog_ref=o,this.edit=new Ae,this.remove=new Ae,this.event=this._data.event,this.concierge=this._data.concierge,this.features=[],this.locate="",this.showing_map=!1,this.show_attendees=!1,this.styles={},this.raw_description=""}ngOnInit(){var e=this;return z(function*(){const i=new Uu(e._org),s=e.event.resources.find(l=>l.email!==e.group_event_calendar);e.space=yield i.transform(s?.id||s?.email);const r=e.event.extension_data?.map_id,o=e.space?.map_id||r;o&&(e.styles[`#${o}`]={fill:"green"},e.features=[{location:o,content:Gu,data:{}}]);const a=e.space?.zones||[];e.level=e._org.levelWithID(a),e.building=e._org.buildings.find(l=>a.includes(l.id))||e._org.building,e.locate=r||"",e.raw_description=e.removeHtmlTags(e.event.body)})()}removeHtmlTags(e){return((new DOMParser).parseFromString(e,"text/html").body.textContent||"").trim()}viewLocation(){if(!this.space?.map_id)return ZO("Unable to locate space on map.");this.showing_map=!0,this._dialog.open(MT,{maxWidth:"95vw",maxHeight:"95vh",data:{item:this.space}}).afterClosed().subscribe(()=>{this.showing_map=!1})}toggleInterest(){var e=this;return z(function*(){let i=e.guest_details;e.is_interested&&i?(yield function o6t(t,n,e={}){const i=Vr(e);return GE(`${Zl}/${encodeURIComponent(t)}/attendee/${encodeURIComponent(n.email)}${i?"?"+i:""}`).pipe(me(s=>new mT(s)))}(e.event.id,Qt(),{system_id:e.event.system?.id}).toPromise(),e.event.attendees=(e.event.attendees||[]).filter(s=>s.email!==i.email)):(i=yield ZSe(e.event.id,Qt(),{system_id:e.event.system?.id}).toPromise(),e.event.attendees=Ss([...e.event.attendees||[],i],"email"))})()}toggleAttendance(){var e=this;return z(function*(){let i=e.guest_details;if(i||(i=yield ZSe(e.event.id,Qt(),{system_id:e.event.system?.id}).toPromise(),e.event.attendees=Ss([...e.event.attendees||[],i],"email")),i={...Qt(),...i||{}},!i.email)return;yield function r6t(t,n,e,i={}){const s=Vr({...i,state:e});return Xb(`${Zl}/${encodeURIComponent(t)}/guests/${n}/checkin${s?"?"+s:""}`,"").pipe(me(r=>new mT(r)))}(e.event.id,i.email,!e.is_going,{system_id:e.event.system?.id}).toPromise();const s=e.event.attendees.find(r=>r.email===i.email);s&&(s.checked_in=!e.is_going)})()}static#e=this.\u0275fac=function(i){return new(i||t)(I(or),I(Sn),I(nn),I(Tr),I(Xa))};static#t=this.\u0275cmp=Se({type:t,selectors:[["group-event-details-modal"]],outputs:{edit:"edit",remove:"remove"},decls:101,vars:38,consts:[["concierge_menu","matMenu"],["menu","matMenu"],[1,"relative","w-[48rem]","max-w-[calc(100vw-1rem)]","max-h-[80vh]","overflow-hidden"],[1,"relative","flex","items-center","justify-between","h-52","w-full","bg-base-200","overflow-hidden"],["auth","","class","absolute top-1/2 left-1/2 min-h-full min-w-full object-cover -translate-x-1/2 -translate-y-1/2",3,"source",4,"ngIf"],["class","absolute top-0 left-0 rounded-br py-2 pl-2 pr-4 space-x-2 bg-info text-info-content flex items-center text-sm",4,"ngIf"],["icon","","mat-dialog-close","",1,"absolute","top-1","right-1","overflow-hidden"],[1,"absolute","inset-0","bg-base-100","opacity-30","z-0"],[1,"z-10"],[1,"flex","items-center","justify-between","py-4","px-8","border-b","border-base-200"],[1,"text-left","text-xl"],[1,"flex","items-center","space-x-2"],[4,"ngIf"],["btn","","matRipple","",1,"clear","bg-base-200","text-base-content","w-[2.75rem]",3,"disabled","matMenuTriggerFor"],[1,"text-2xl"],["mat-menu-item","",3,"disabled"],[1,"mr-2"],["mat-menu-item","","mat-dialog-close","",3,"click"],["mat-menu-item","",3,"click"],[1,"text-2xl","text-error"],["mat-menu-item","",1,"flex","items-center","space-x-2",3,"click"],[1,"flex","flex-1","max-h-[calc(80vh-18rem)]","overflow-y-auto","overflow-x-hidden","p-8","space-x-6"],[1,"flex","flex-1","flex-col","space-y-2","w-1/3"],[1,"flex","items-center","space-x-4"],[1,"flex","items-center","justify-center","w-10","h-10","bg-base-200","rounded-full"],[1,"font-medium","pt-4"],[1,"flex","flex-col"],[1,"text-sm"],[1,"text-sm","opacity-30"],[1,"flex","flex-col","text-sm"],["class","opacity-30",4,"ngIf"],["matRipple","",1,"flex","items-center","space-x-4","rounded","min-h-12",3,"click"],[1,"text-sm","pb-4"],["event-details","",3,"innerHTML"],["class","flex w-[20rem]",4,"ngIf"],["class","absolute inset-0 z-50",4,"ngIf"],["auth","",1,"absolute","top-1/2","left-1/2","min-h-full","min-w-full","object-cover","-translate-x-1/2","-translate-y-1/2",3,"source"],[1,"absolute","top-0","left-0","rounded-br","py-2","pl-2","pr-4","space-x-2","bg-info","text-info-content","flex","items-center","text-sm"],[1,"text-base"],[1,"uppercase"],["btn","",1,"flex","items-center","px-4","h-10","rounded","space-x-2"],[1,"pr-2"],[1,"opacity-30"],[1,"flex","w-[20rem]"],[1,"border","border-base-300","w-full"],["matRipple","",1,"relative","w-full","h-40","bg-base-200",3,"click"],[3,"src","features","styles",4,"ngIf"],[1,"p-4","space-y-2"],[1,"opacity-30","text-sm","!mt-0"],["class","opacity-30 mt-4","target","_blank","rel","noopener noreferrer",3,"underline","href",4,"ngIf"],[3,"src","features","styles"],["target","_blank","rel","noopener noreferrer",1,"opacity-30","mt-4",3,"href"],[1,"absolute","inset-0","z-50"],[1,"absolute","inset-0","bg-base-content","opacity-60",3,"click"],[1,"absolute","left-1/2","-translate-x-1/2","w-[24rem]","inset-y-8","rounded","shadow","overflow-hidden"],[3,"click","show_host","list","host"]],template:function(i,s){if(1&i){const r=se();m(0,"div",2)(1,"div",3),O(2,FJt,1,1,"img",4),_(),O(3,LJt,5,0,"div",5),m(4,"button",6),q(5,"div",7),m(6,"app-icon",8),S(7,"close"),_()(),m(8,"div",9)(9,"h3",10),S(10),_(),m(11,"div",11),O(12,PJt,11,26,"ng-container",12),m(13,"button",13)(14,"app-icon",14),S(15,"more_horiz"),_()(),m(16,"mat-menu",null,0)(18,"button",15)(19,"div",11)(20,"app-icon",14),S(21," confirmation_number "),_(),m(22,"div",16),S(23,"Promote Event"),_()()(),m(24,"button",17),P("click",function(){return B(r),V(s.edit.emit())}),m(25,"div",11)(26,"app-icon",14),S(27,"edit"),_(),m(28,"div",16),S(29,"Edit Event"),_()()(),m(30,"button",15)(31,"div",11)(32,"app-icon",14),S(33,"content_copy"),_(),m(34,"div",16),S(35,"Copy URL"),_()()(),m(36,"button",18),P("click",function(){return B(r),V(s.remove.emit())}),m(37,"div",11)(38,"app-icon",19),S(39," delete "),_(),m(40,"div",16),S(41,"Delete Event"),_()()()(),m(42,"mat-menu",null,1)(44,"button",20),P("click",function(){return B(r),V(s.toggleInterest())}),m(45,"div",11)(46,"app-icon"),S(47," star "),_(),m(48,"span"),S(49),_()()(),m(50,"button",18),P("click",function(){return B(r),V(s.toggleAttendance())}),m(51,"div",11)(52,"app-icon"),S(53," help "),_(),m(54,"span"),S(55),_()()()()()(),m(56,"div",21)(57,"div",22)(58,"div",23)(59,"div",24)(60,"app-icon"),S(61,"person"),_()(),m(62,"div"),S(63),_()(),m(64,"h3",25),S(65,"When and where"),_(),m(66,"div",23)(67,"div",24)(68,"app-icon"),S(69,"calendar_today"),_()(),m(70,"div",26)(71,"div",27),S(72,"Date and Time"),_(),m(73,"div",28),S(74),H(75,"date"),H(76,"date"),H(77,"date"),_()()(),m(78,"div",23)(79,"div",24)(80,"app-icon"),S(81,"place"),_()(),m(82,"div",29),O(83,$Jt,4,5,"div",12)(84,BJt,2,0,"div",30)(85,VJt,2,1,"div",30),_()(),m(86,"button",31),P("click",function(){return B(r),V(s.show_attendees=!0)}),m(87,"div",24)(88,"app-icon"),S(89,"person"),_()(),m(90,"div"),S(91),_()(),m(92,"h3",25),S(93,"About this event"),_(),m(94,"div",32),q(95,"span",33),H(96,"sanitize"),O(97,zJt,2,0,"span",30),_()(),m(98,"div"),O(99,KJt,11,6,"div",34),_()()(),O(100,XJt,4,3,"div",35)}if(2&i){const r=xt(17),o=xt(43);b(2),C("ngIf",null==s.event.extension_data||null==s.event.extension_data.images?null:s.event.extension_data.images.length),b(),C("ngIf",s.featured),b(7),K(" ",s.event.title," "),b(2),C("ngIf",!s.concierge),b(),C("disabled","done"===s.event.state)("matMenuTriggerFor",s.concierge?r:o),b(5),C("disabled",!0),b(12),C("disabled",!0),b(16),Oe("text-error",s.is_interested),b(3),K(" ",s.is_interested?"Revoke":"Indicate"," Interest "),b(3),Oe("text-error",s.is_going),b(3),K(" ",s.is_going?"Revoke":"Indicate"," Going "),b(8),K(" Event by ",(null==s.event.organiser?null:s.event.organiser.name)||s.event.host," "),b(11),ib(" ",At(75,27,s.event.date,"EEEE, d MMMM, yyyy")," . ",At(76,30,s.event.date,s.time_format)," - ",At(77,33,s.event.date+60*s.event.duration*1e3,s.time_format)," "),b(9),C("ngIf",s.is_onsite&&s.has_space),b(),C("ngIf",s.is_onsite&&!s.has_space),b(),C("ngIf",s.is_online),b(6),Os(" ",s.attendance," going, ",null==s.event.attendees?null:s.event.attendees.length," interested "),b(4),C("innerHTML",ne(96,36,s.body),Nu),b(2),C("ngIf",!s.raw_description.trim()),b(2),C("ngIf",s.level),b(),C("ngIf",s.show_attendees)}}})}return t})();const YJt=()=>["./"],ZJt=t=>({event:t});function QJt(t,n){if(1&t&&(m(0,"span",5),S(1),_()),2&t){const e=E(2);b(),K("",e.day,",\xa0")}}function JJt(t,n){if(1&t&&(m(0,"h4",2),O(1,QJt,2,1,"span",3),S(2),H(3,"date"),m(4,"span",4),S(5),H(6,"date"),_()()),2&t){const e=E();b(),C("ngIf",e.show_day),b(),K(" ",At(3,3,null==e.event?null:e.event.date,e.time_format)," "),b(3),K("(",At(6,6,null==e.event?null:e.event.date,"z"),")")}}function een(t,n){if(1&t&&(m(0,"div",20),S(1),_()),2&t){const e=E(2);b(),K(" ",e.period_tz," ")}}function ten(t,n){1&t&&(m(0,"div",14)(1,"app-icon"),S(2,"restaurant"),_(),m(3,"div",16),S(4,"Catered"),_()())}function nen(t,n){if(1&t&&(m(0,"div",24),q(1,"a-user-avatar",25),_()),2&t){const e=n.$implicit;b(),C("user",e)}}function ien(t,n){if(1&t&&(m(0,"div",24)(1,"div",26),S(2),_()()),2&t){const e=E(3);b(2),K(" +",(null==e.event||null==e.event.attendees?null:e.event.attendees.length)-5," ")}}function sen(t,n){if(1&t&&(m(0,"div",21),O(1,nen,2,1,"div",22),H(2,"slice"),O(3,ien,3,1,"div",23),_()),2&t){const e=E(2);b(),C("ngForOf",zd(2,2,null==e.event?null:e.event.attendees,0,6===(null==e.event||null==e.event.attendees?null:e.event.attendees.length)?6:5)),b(2),C("ngIf",(null==e.event||null==e.event.attendees?null:e.event.attendees.length)>6)}}function ren(t,n){if(1&t){const e=se();m(0,"a",6),P("click",function(){return B(e),V(E().viewDetails())}),m(1,"div",7)(2,"h4",8),S(3),_(),m(4,"div",9)(5,"status-pill",10)(6,"div",11)(7,"div"),S(8),_(),O(9,een,2,1,"div",12),_()()(),m(10,"div",13)(11,"div",14)(12,"app-icon"),S(13,"meeting_room"),_(),m(14,"div",15),S(15),_()(),m(16,"div",14)(17,"app-icon"),S(18,"person_outline"),_(),m(19,"div",16),S(20),_()(),O(21,ten,5,0,"div",17),m(22,"div",14)(23,"app-icon"),S(24,"people"),_(),m(25,"div",16),S(26),_()()(),m(27,"app-icon",18),S(28," chevron_right "),_(),O(29,sen,4,6,"div",19),_()()}if(2&t){let e;const i=E();C("routerLink",tn(14,YJt))("queryParams",function EA(t,n,e,i){return fne(Ue(),kl(),t,n,e,i)}(15,ZJt,null==i.event?null:i.event.id)),b(3),Ye(null==i.event?null:i.event.title),b(2),C("status",i.status),b(),Oe("pr-4",i.timezone),b(2),Ye(i.period),b(),C("ngIf",i.timezone),b(6),K(" ",i.location," "),b(5),K(" ",(null==i.event||null==i.event.organiser?null:i.event.organiser.name)||(null==i.event||null==i.event.organiser?null:i.event.organiser.email)," "),b(),C("ngIf",null==i.event||null==(e=i.event.ext("catering"))?null:e.length),b(5),Os(" ",null==i.event||null==i.event.attendees?null:i.event.attendees.length," ",1===(null==i.event||null==i.event.attendees?null:i.event.attendees.length)?"Person":"People"," "),b(3),C("ngIf",null==i.event||null==i.event.attendees?null:i.event.attendees.length)}}let zIe=(()=>{class t extends hn{get timezone(){return this._settings.get("app.events.use_building_timezone")?this._org.building.timezone:""}get tz(){const e=this.timezone;return e?kT(e):""}get time_format(){return this._settings.time_format}get period(){return this.event?.all_day?"All Day":this.formattedTime()}get period_tz(){return this.formattedTime(this.tz)}formattedTime(e){const i=this.event.date,s=this.event.date_end,r=this.event.all_day,o=this._date.transform(i,"z",e),a=this._date.transform(i,"MMM d",e),l=this._date.transform(i,this.time_format,e),c=this._date.transform(s,"MMM d",e),u=this._date.transform(s,this.time_format,e);return this.event?.duration>1440?`${a}${r?"":", "+l} - ${c}${r?"":", "+u}`:r?"All Day":`${l} - ${u} ${"("+o+")"}`}get status(){return"done"===this.event?.state?"neutral":"approved"===this.event?.status?"success":"tentative"===this.event?.status?"warning":"declined"===this.event?.status?"error":"warning"}constructor(e,i,s,r,o){super(),this._dialog=e,this._route=i,this._org=s,this._space_pipe=r,this._settings=o,this.show_day=!1,this.edit=new Ae,this.remove=new Ae,this.location="",this._date=new fs("en")}ngOnInit(){var e=this;return z(function*(){e.subscription("route.query",e._route.queryParamMap.subscribe(i=>i.has("event")&&e.event?.id===i.get("event")?e.viewDetails():"")),e.location=yield e.getLocationString()})()}ngOnChanges(e){var i=this;return z(function*(){e.event&&i.event&&(i.location=yield i.getLocationString())})()}get day(){const e=this.event?.date||Date.now();return`${eh(Date.now(),e)?"Today":Us(e,"EEEE")}`}getLocationString(){var e=this;return z(function*(){const i=e.event?.resources[0]||e.event?.system||e.event?.space||{},s=yield e._space_pipe.transform(i.id||i.email),r=s?.zones||[],o=e._org.levelWithID(r)||e._org.buildings.find(a=>r.includes(a.id));return`${o?(o.display_name||o.name)+", ":""} ${s?.display_name||s?.name}`})()}viewDetails(){this.event&&this.timeout("open",()=>{if(this.event.extension_data?.shared_event)return void this._dialog.open(Ak,{data:{event:this.event,concierge:!1}});const e=this._dialog.open(mX,{data:this.event});this.subscription("edit",e.componentInstance.edit.subscribe(()=>this.edit.emit())),this.subscription("remove",e.componentInstance.remove.subscribe(i=>this.remove.emit(i)))})}static#e=this.\u0275fac=function(i){return new(i||t)(I(Tr),I(uc),I(Sn),I(Uu),I(nn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["event-card"]],inputs:{event:"event",show_day:"show_day"},outputs:{edit:"edit",remove:"remove"},features:[bt([Uu]),Ze,Rn],decls:2,vars:2,consts:[["class","mb-2 flex items-center","date","",4,"ngIf"],["name","view-event-details","class","w-full cursor-pointer relative",3,"routerLink","queryParams","click",4,"ngIf"],["date","",1,"mb-2","flex","items-center"],["day","",4,"ngIf"],[1,"text-xs","px-2"],["day",""],["name","view-event-details",1,"w-full","cursor-pointer","relative",3,"click","routerLink","queryParams"],[1,"w-full","bg-base-100","border","border-base-300","rounded-xl","shadow","py-4","relative"],[1,"px-4","text-lg"],[1,"flex","mx-4","my-2"],[3,"status"],[1,"flex","flex-col","leading-tight"],["class","opacity-30 text-xs",4,"ngIf"],[1,"flex","flex-wrap","flex-col","sm:flex-row","sm:divide-x","divide-base-200-500","py-2","space-y-2","sm:space-y-0"],[1,"flex","items-center","px-4"],[1,"mx-2","truncate"],[1,"mx-2"],["class","flex items-center px-4",4,"ngIf"],[1,"absolute","top-1/2","right-1","text-4xl","-translate-y-1/2"],["class","absolute bottom-2 right-2 sm:bottom-auto sm:top-2 text-sm sm:text-base flex items-center pr-4",4,"ngIf"],[1,"opacity-30","text-xs"],[1,"absolute","bottom-2","right-2","sm:bottom-auto","sm:top-2","text-sm","sm:text-base","flex","items-center","pr-4"],["class","h-10 w-6",4,"ngFor","ngForOf"],["class","h-10 w-6",4,"ngIf"],[1,"h-10","w-6"],[3,"user"],[1,"bg-secondary","rounded-full","h-10","w-10","border-2","border-base-100","flex","items-center","justify-center","text-secondary-content"]],template:function(i,s){1&i&&O(0,JJt,7,9,"h4",0)(1,ren,30,17,"a",1),2&i&&(C("ngIf",s.event),b(),C("ngIf",s.event))},styles:["[_nghost-%COMP%]{display:block;width:100%}"]})}return t})();const UIe=()=>[5,10];function oen(t,n){1&t&&(m(0,"button",5)(1,"app-icon"),S(2,"close"),_()())}function aen(t,n){1&t&&(m(0,"main",6)(1,"div",7)(2,"label",8),S(3,"Setup Duration"),_(),q(4,"a-duration-field",9),_(),m(5,"div",7)(6,"label",10),S(7,"Breakdown Duration"),_(),q(8,"a-duration-field",11),_()()),2&t&&(C("formGroup",E().form),b(4),C("min",0)("custom_options",tn(5,UIe)),b(4),C("min",0)("custom_options",tn(6,UIe)))}function len(t,n){if(1&t){const e=se();m(0,"footer",12)(1,"button",13),P("click",function(){return B(e),V(E().save())}),S(2,"Save Changes"),_()()}}function cen(t,n){1&t&&(m(0,"div",14),q(1,"mat-spinner",15),m(2,"p",16),S(3," Saving setup and breakdown durations... "),_()()),2&t&&(b(),C("diameter",32))}let GIe=(()=>{class t{constructor(e,i){this._event=e,this._dialog_ref=i,this.loading=!1,this.form=new Rl({setup:new Ke(this._event.setup_time||0),breakdown:new Ke(this._event.breakdown_time||0)})}save(){var e=this;return z(function*(){e.loading=!0,e._dialog_ref.disableClose=!0;const r={system_id:e._event?.resources[0]?.id||e._event?.system?.id,ical_uid:e._event?.ical_uid};let o=yield YSe(new Ta({...e._event,setup_time:e.form.value.setup,breakdown_time:e.form.value.breakdown}).toJSON(),r).toPromise().catch(a=>null);if(o||(o=yield function l6t(t,n,e,i={}){const s=Vr({...i});return UE(`${Zl}/${encodeURIComponent(t)}/metadata/${encodeURIComponent(n)}${s?"?"+s:""}`,e).pipe(me(r=>r))}(e._event.id,r.system_id,{...e._event.extension_data,setup_time:e.form.value.setup,breakdown_time:e.form.value.breakdown,setup:e.form.value.setup,breakdown:e.form.value.breakdown}).toPromise().catch(a=>null)),!o)return e.loading=!1,e._dialog_ref.disableClose=!1,void Ti("Error updating setup and breakdown.");ep("Succesfully updated setup and breakdown period."),e._dialog_ref.disableClose=!1,e.loading=!1,e._dialog_ref.close(o)})()}static#e=this.\u0275fac=function(i){return new(i||t)(I(or),I(Xa))};static#t=this.\u0275cmp=Se({type:t,selectors:[["setup-breakdown-modal"]],decls:8,vars:4,consts:[["load_state",""],[1,"space-x-4","min-h-16"],["btn","","icon","","mat-dialog-close","","matRipple","",4,"ngIf"],["class","p-4 min-w-[20rem] w-full",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex justify-end px-4 py-2 border-t border-base-200",4,"ngIf"],["btn","","icon","","mat-dialog-close","","matRipple",""],[1,"p-4","min-w-[20rem]","w-full",3,"formGroup"],[1,"flex","flex-col","space-y-2"],["for","setup"],["name","setup","formControlName","setup",3,"min","custom_options"],["for","breakdown"],["name","breakdown","formControlName","breakdown",3,"min","custom_options"],[1,"flex","justify-end","px-4","py-2","border-t","border-base-200"],["btn","","matRipple","",3,"click"],[1,"flex","flex-col","items-center","justify-center","h-64","w-64"],[3,"diameter"],[1,"text-center","p-4"]],template:function(i,s){if(1&i&&(m(0,"header",1)(1,"h2"),S(2,"Set Event's Setup and Breakdown"),_(),O(3,oen,3,0,"button",2),_(),O(4,aen,9,7,"main",3)(5,len,3,0,"footer",4)(6,cen,4,1,"ng-template",null,0,ln)),2&i){const r=xt(7);b(3),C("ngIf",!s.loading),b(),C("ngIf",!s.loading)("ngIfElse",r),b(),C("ngIf",!s.loading)}}})}return t})();function uen(t,n){1&t&&q(0,"img",15),2&t&&C("source",E(2).event.images[0])}function den(t,n){1&t&&(m(0,"p",16),S(1," No description "),_())}function hen(t,n){if(1&t&&(m(0,"div"),S(1),_()),2&t){const e=E(2);b(),K(" ",e.space.display_name||e.space.name||""," ")}}function pen(t,n){1&t&&(m(0,"div",16),S(1," Room to be confirmed "),_())}function fen(t,n){1&t&&(m(0,"div",16),S(1," Remote event "),_())}function men(t,n){if(1&t){const e=se();m(0,"button",2),P("click",function(){return B(e),V(E().viewDetails())}),m(1,"div",3),O(2,uen,1,1,"img",4),_(),m(3,"div",5)(4,"div",6),S(5),H(6,"date"),H(7,"date"),_(),m(8,"h2",7),S(9),_(),m(10,"div",8)(11,"p",9),S(12),_(),O(13,den,2,0,"p",10),_(),m(14,"div",11)(15,"app-icon",12),S(16,"place"),_(),O(17,hen,2,1,"div",13)(18,pen,2,0,"div",10)(19,fen,2,0,"div",10),_(),m(20,"div",11)(21,"app-icon",12),S(22,"people"),_(),m(23,"div",14),S(24),_()()()()}if(2&t){const e=E();b(2),C("ngIf",null==e.event.images?null:e.event.images.length),b(3),Os(" ",At(6,11,e.event.date,"EEE d MMM"),", ",At(7,14,e.event.date,e.time_format)," "),b(3),C("title",e.event.title),b(),K(" ",e.event.title," "),b(3),Ye(e.raw_description),b(),C("ngIf",!e.raw_description.trim()),b(4),C("ngIf",e.is_onsite&&e.has_space),b(),C("ngIf",e.is_onsite&&!e.has_space),b(),C("ngIf",!e.is_onsite),b(5),K(" ",(null==e.event.attendees?null:e.event.attendees.length)||"0"," attending ")}}function _en(t,n){1&t&&q(0,"img",15),2&t&&C("source",E(2).event.images[0])}function gen(t,n){1&t&&(m(0,"p",16),S(1," No description "),_())}function ben(t,n){if(1&t&&(m(0,"div"),S(1),_()),2&t){const e=E(2);b(),K(" ",e.space.display_name||e.space.name||""," ")}}function ven(t,n){1&t&&(m(0,"div",16),S(1," Room to be confirmed "),_())}function yen(t,n){1&t&&(m(0,"div",16),S(1," Remote event "),_())}function wen(t,n){if(1&t){const e=se();m(0,"button",17),P("click",function(){return B(e),V(E().viewDetails())}),m(1,"div",18),O(2,_en,1,1,"img",4),_(),m(3,"div",19)(4,"app-icon",20),S(5,"star"),_(),m(6,"div",21),S(7,"Featured"),_()(),m(8,"div",22)(9,"div",23)(10,"div",24),S(11),H(12,"date"),_(),m(13,"div",25),S(14),H(15,"date"),_()(),m(16,"div",26)(17,"h3",27),S(18),_(),m(19,"div",28),S(20),H(21,"date"),H(22,"date"),H(23,"date"),_(),m(24,"div",29)(25,"p",30),S(26),_(),O(27,gen,2,0,"p",10),_(),m(28,"div",11)(29,"app-icon",12),S(30,"place"),_(),O(31,ben,2,1,"div",13)(32,ven,2,0,"div",10)(33,yen,2,0,"div",10),_(),m(34,"div",11)(35,"app-icon",12),S(36,"people"),_(),m(37,"div",14),S(38),_()()()(),m(39,"div",31),S(40," View Details "),_()()}if(2&t){const e=E();b(2),C("ngIf",null==e.event.images?null:e.event.images.length),b(9),K(" ",At(12,13,e.event.date,"MMM")," "),b(3),Ye(At(15,16,e.event.date,"d")),b(4),Ye(e.event.title),b(2),ib(" ",At(21,19,e.event.date,"EEEE")," ",At(22,22,e.event.date,e.time_format)," - ",At(23,25,e.event.date+60*e.event.duration*1e3,e.time_format)," "),b(6),Ye(e.raw_description),b(),C("ngIf",!e.raw_description.trim()),b(4),C("ngIf",e.is_onsite&&e.has_space),b(),C("ngIf",e.is_onsite&&!e.has_space),b(),C("ngIf",!e.is_onsite),b(5),K(" ",(null==e.event.attendees?null:e.event.attendees.length)||"0"," attending ")}}let jIe=(()=>{class t{get time_format(){return this._settings.time_format}get is_onsite(){return"ONLINE"!==this.event?.extension_data.attendance_type}get has_space(){return!!this.space?.id}get is_online(){return!this.is_onsite||"ANY"===this.event?.extension_data.attendance_type}get group_event_calendar(){return this._settings.get("app.group_events_calendar")}constructor(e,i,s){this._settings=e,this._dialog=i,this._org=s,this.raw_description=""}ngOnInit(){var e=this;return z(function*(){const i=new Uu(e._org),s=e.event.resources.find(r=>r.email!==e.group_event_calendar);e.space=yield i.transform(s?.id||s?.email),e.raw_description=e.removeHtmlTags(e.event.body)})()}removeHtmlTags(e){return(new DOMParser).parseFromString(e,"text/html").body.textContent||""}viewDetails(){this._dialog.open(Ak,{data:{event:this.event,concierge:!1}})}static#e=this.\u0275fac=function(i){return new(i||t)(I(nn),I(Tr),I(Sn))};static#t=this.\u0275cmp=Se({type:t,selectors:[["group-event-card"]],inputs:{event:"event",featured:"featured"},decls:3,vars:2,consts:[["featured_card",""],["matRipple","","class","border border-base-300 hover:border-info flex flex-col bg-base-100 rounded-xl shadow hover:shadow-2xl overflow-hidden w-60 h-[20rem]",3,"click",4,"ngIf","ngIfElse"],["matRipple","",1,"border","border-base-300","hover:border-info","flex","flex-col","bg-base-100","rounded-xl","shadow","hover:shadow-2xl","overflow-hidden","w-60","h-[20rem]",3,"click"],[1,"relative","flex","items-center","justify-between","h-28","min-h-28","w-full","bg-base-200","overflow-hidden","border-b","border-base-200"],["auth","","class","absolute top-0 left-0 h-full w-full object-center object-cover",3,"source",4,"ngIf"],[1,"p-4","flex-1","h-1/2","w-full"],[1,"opacity-60","text-sm","text-left"],[1,"text-xl","mb-2","text-left","truncate","w-full",3,"title"],[1,"opacity-60","text-xs","flex-1","overflow-hidden","h-[4.5rem]","mb-2","text-left"],[1,"line-clamp-4"],["class","opacity-30",4,"ngIf"],[1,"flex","items-center","space-x-2","text-sm"],[1,"text-info"],[4,"ngIf"],[1,""],["auth","",1,"absolute","top-0","left-0","h-full","w-full","object-center","object-cover",3,"source"],[1,"opacity-30"],["matRipple","",1,"border","border-base-300","hover:border-info","flex","bg-base-100","rounded-xl","shadow","hover:shadow-2xl","overflow-hidden","w-[63rem]","max-w-full","h-56","mx-auto",3,"click"],[1,"relative","flex","items-center","justify-between","h-full","min-w-56","w-1/2","max-w-[20rem]","bg-base-200","overflow-hidden","border-r","border-base-200"],[1,"absolute","top-0","left-0","rounded-br-xl","py-2","pl-2","pr-4","space-x-2","bg-info","text-info-content","flex","items-center","text-sm"],[1,"text-base"],[1,"uppercase"],["details","",1,"flex","px-8","py-4","space-x-4"],[1,"flex","flex-col","items-center"],[1,"text-sm","opacity-30"],[1,"text-lg"],[1,"flex","flex-col","space-y-2"],[1,"text-left"],["time","",1,"text-sm","opacity-30","text-left"],[1,"h-20","overflow-hidden","text-left"],[1,"line-clamp-3"],[1,"absolute","top-4","right-4","bg-secondary","text-secondary-content","rounded","px-4","py-2","w-32","text-center","truncate"]],template:function(i,s){if(1&i&&O(0,men,25,17,"button",1)(1,wen,41,28,"ng-template",null,0,ln),2&i){const r=xt(2);C("ngIf",!s.featured)("ngIfElse",r)}},styles:["button[_ngcontent-%COMP%]{transition:box-shadow .3s,border .2s}"]})}return t})(),Cen=(()=>{class t{ngOnInit(){return z(function*(){yield _T.pipe(as(e=>!!e)).toPromise(),function uBt(t){t&&(sq=t)}(Qt())})()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:[$u],imports:[Ka,pf,$u,OE,Fb,Xh,ZN,_0,Lb,E0,bk,pv,Jc,xTe]})}return t})();function gX(t){return Tn(1e3*t)}Ts(mX,[on,mt,Ls,St,l_,gc,cv,qT,Qpe,Zd,Yh,Pb,Tt,nu,s4],[H5,fs,ih]),Ts(s4,[on,mt,St,l_,Tt,nu],[]),Ts(zIe,[on,mt,St,l_,qT],[U1,fs]),Ts(GIe,[mt,pi,cc,pa,Fl,Ls,Zs,Mp,St,Tt],[]),Ts(Ak,[mt,Ls,St,gc,jl,Zd,Yh,Pb,Tt,s4],[xi,fs,ih,Uu]),Ts(jIe,[mt,St,jl,Tt],[fs]),new Wo;const xen=["container"],WIe=()=>[];function Een(t,n){if(1&t&&(m(0,"div",32),S(1),_()),2&t){const e=n.index,i=E();Hn("left",-i.offset_x+"px"),wt("disabled",i.today&&i.current_hour>e),b(),Os(" ",e%12==0?"12":e%12,"",e>=12?"pm":"am"," ")}}function Ten(t,n){if(1&t){const e=se();m(0,"div",33),q(1,"a-user-avatar",12),m(2,"div",34),S(3),_(),m(4,"button",35),P("click",function(){const s=B(e).$implicit;return V(E().removeUser(s))}),m(5,"app-icon"),S(6,"close"),_()()()}if(2&t){const e=n.$implicit,i=E();Hn("top",-i.offset_y+"px"),b(),C("user",e),b(2),K(" ",e.name||i.host.email," ")}}function Ien(t,n){if(1&t&&q(0,"div",36),2&t){const e=n.index,i=E();Hn("left",-(i.offset_x+1)+"px"),wt("disabled",i.today&&i.current_hour>e)}}function ken(t,n){if(1&t&&(m(0,"div",37),S(1),H(2,"date"),_()),2&t){const e=E();b(),K(" ",At(2,1,e.date,"shortTime")," ")}}function Den(t,n){if(1&t&&(q(0,"user-availability-list",25),H(1,"async"),H(2,"async")),2&t){const e=n.$implicit,i=E();C("user",e)("date",i.date)("availability",ne(1,3,i.availability)?ne(2,5,i.availability)[e.email.toLowerCase()]:tn(7,WIe))}}let qIe=(()=>{class t extends hn{get today(){return eh(this.date,Date.now())}get current_hour(){return(new Date).getHours()}get selection_left(){const e=new Date(this.date);return 5*(e.getHours()+e.getMinutes()/60)}get selection_width(){return this.duration/60*5}constructor(e,i,s){super(),this._data=e,this._renderer=i,this._dialog_ref=s,this.users=new at([]),this.search="",this.date=this._data.date||Date.now(),this.duration=this._data.duration||60,this.offset_y=0,this.offset_x=0,this.host=this._data.host,this.hours=new Array(24).fill(0),this.on_change=new at(0),this.availability=Vt([this.users,this.on_change]).pipe(_s(300),Kt(([r])=>function JBt(t){const n=Vr(t);return Aa(`${uP}/free_busy${n?"?"+n:""}`).pipe(me(e=>e))}({calendars:[this.host.email,...r.map(o=>o.email.toLowerCase())].join(","),period_start:Ai(Ei(this.date)),period_end:Ai(ks(this.date))}).pipe(Xi(()=>Ge([])))),me(r=>{const o={};for(const a of r)o[a.id.toLowerCase()]=a.availability.filter(l=>"busy"===l.status).map(l=>{const c=gX(l.starts_at),u=If(gX(l.ends_at),gX(l.starts_at));return{date:c,duration:u,start:(c.getHours()+c.getMinutes()/60)/24*100,size:u/60/24*100}});return o}),Xx({}),zn(1)),this.move_time=!1,this._start_time=0,this._move_last=0,this._move_size=1920,this.users.next([...this._data.users])}addUser(e){this.users.next([...this.users.getValue().filter(i=>i.email!==e.email),e]),this.user=null}removeUser(e){this.users.next(this.users.getValue().filter(i=>i.email!==e.email)),this.user=null}closeAndUpdate(){this._dialog_ref.close(!0)}ngAfterViewInit(){const e=new Date(this.date);this.timeout("init",()=>{const i=this._container_el.nativeElement.querySelector(`[hour="${e.getHours()}"]`);if(i){const s=this._container_el.nativeElement.getBoundingClientRect(),r=i.getBoundingClientRect();this._container_el.nativeElement.scrollTo(r.left-128-s.left,0)}this.onScroll()},300)}onScroll(){this.offset_x=this._container_el.nativeElement.scrollLeft,this.offset_y=this._container_el.nativeElement.scrollTop}startMovePeriod(e){e.preventDefault(),e.stopPropagation(),this._move_last=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,this.move_time=!0,this._start_time=this.date,e instanceof MouseEvent?this.subscription("on_move",this._renderer.listen("window","mousemove",i=>this._onMovePeriod(i))):this.subscription("on_move",this._renderer.listen("window","touchmove",i=>this._onMovePeriod(i))),e instanceof MouseEvent?this.subscription("on_move_end",this._renderer.listen("window","mouseup",()=>this._onMoveEnd())):this.subscription("on_move_end",this._renderer.listen("window","touchend",()=>this._onMoveEnd()))}startMoveDuration(e){e.preventDefault(),e.stopPropagation(),this._move_last=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,this._start_time=this.duration,e instanceof MouseEvent?this.subscription("on_move",this._renderer.listen("window","mousemove",i=>this._onMoveDuration(i))):this.subscription("on_move",this._renderer.listen("window","touchmove",i=>this._onMoveDuration(i))),e instanceof MouseEvent?this.subscription("on_move_end",this._renderer.listen("window","mouseup",()=>this._onMoveEnd())):this.subscription("on_move_end",this._renderer.listen("window","touchend",()=>this._onMoveEnd()))}_onMovePeriod(e){const i=this._move_last-(e instanceof MouseEvent?e.clientX:e.touches[0].clientX),r=(i>0?-1:1)*Math.floor(Math.abs(i/this._move_size*24*60)/5)*5;if(r){const o=this.date;this.date=fi(this._start_time,r).valueOf(),this.date<Date.now()&&(this.date=o)}}_onMoveDuration(e){const i=this._move_last-(e instanceof MouseEvent?e.clientX:e.touches[0].clientX),r=(i>0?-1:1)*Math.floor(Math.abs(i/this._move_size*24*60)/5)*5;r&&(this.duration=Math.max(30,this._start_time+r))}_onMoveEnd(){this.unsub("on_move"),this.unsub("on_move_end"),this._move_last=0,this.move_time=!1}static#e=this.\u0275fac=function(i){return new(i||t)(I(or),I(Pd),I(Xa))};static#t=this.\u0275cmp=Se({type:t,selectors:[["find-availability-modal"]],viewQuery:function(i,s){if(1&i&&Gt(xen,7),2&i){let r;nt(r=it())&&(s._container_el=r.first)}},features:[Ze],decls:45,vars:31,consts:[["container",""],[1,"relative","flex","items-center","justify-center","p-4"],[1,"text-center"],["icon","","matRipple","","mat-dialog-close","",1,"absolute","top-1/2","left-1","-translate-y-1/2"],[1,"flex","flex-col","h-[calc(100vh-7rem)]","sm:h-[65vh]","overflow-hidden"],[1,"w-full","flex","flex-col","sm:flex-row","space-y-2","sm:space-y-0","sm:space-x-2","p-2"],[1,"max-h-[3.25rem]","flex-1",3,"ngModelChange","ngModel"],[1,"grid","flex-1","h-1/2","w-full","border-t","border-base-200","relative","overflow-hidden","divide-x","divide-y","divide-base-200","max-w-[100vw]","sm:max-w-[80vw]"],["times","",1,"col-start-2","h-10","flex","overflow-hidden","border-l","border-base-200"],["hour","","class","relative border-r border-base-200 h-10 min-w-[5rem] p-2",3,"left",4,"ngFor","ngForOf"],["users","",1,"row-start-2","w-24","overflow-hidden"],["host","",1,"flex","flex-col","items-center","justify-center","h-32","w-24","relative","border-b","border-base-200","py-2"],[1,"text-2xl",3,"user"],[1,"text-xs","break-words","overflow-hidden","max-w-full","px-2","text-center"],["person","","class","flex flex-col items-center justify-center h-32 w-24 relative border-b border-base-200 py-2",3,"top",4,"ngFor","ngForOf"],["blocks","",1,"relative","row-start-2","overflow-hidden"],["fixed","",1,"absolute","inset-0","flex","overflow-hidden"],["divider","","class","relative h-full min-w-[5rem] border-l border-base-200",3,"left",4,"ngFor","ngForOf"],["selection","",1,"absolute","inset-y-0","!border-x-2","!border-info","z-20","cursor-grab","active:cursor-grabbing",3,"mousedown","touchstart"],[1,"absolute","inset-0","bg-info","opacity-30"],["handle","",1,"absolute","top-1/2","-left-px","-translate-x-1/2","-translate-y-1/2","h-3","w-3","rounded-full","bg-info"],["handle","",1,"absolute","top-1/2","-right-px","translate-x-1/2","-translate-y-1/2","h-3","w-3","rounded-full","bg-info","hover:h-4","hover:w-4","active:bg-secondary",3,"mousedown","touchstart"],[1,"bg-base-100","border","border-base-200","p-2","absolute","top-2","left-1/2","-translate-x-1/2","shadow","text-xs","whitespace-nowrap","rounded"],["class","bg-base-100 border border-base-200 p-2 absolute top-12 left-1/2 -translate-x-1/2 shadow text-xs whitespace-nowrap rounded",4,"ngIf"],["scroll","",1,"absolute","inset-0","overflow-auto",3,"scroll"],[1,"pointer-events-none",3,"user","date","availability"],["class","pointer-events-none",3,"user","date","availability",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","p-2","border-t","border-base-200","w-full"],["btn","","matRipple","",1,"clear","text-secondary",3,"mat-dialog-close"],[1,"flex","items-center"],[1,"text-xl"],[1,"mr-1","underline"],["hour","",1,"relative","border-r","border-base-200","h-10","min-w-[5rem]","p-2"],["person","",1,"flex","flex-col","items-center","justify-center","h-32","w-24","relative","border-b","border-base-200","py-2"],[1,"text-xs","break-words","max-w-full","px-2","text-center"],["icon","",1,"absolute","-top-1","-left-1",3,"click"],["divider","",1,"relative","h-full","min-w-[5rem]","border-l","border-base-200"],[1,"bg-base-100","border","border-base-200","p-2","absolute","top-12","left-1/2","-translate-x-1/2","shadow","text-xs","whitespace-nowrap","rounded"]],template:function(i,s){if(1&i){const r=se();m(0,"header",1)(1,"h2",2),S(2,"Find Availability"),_(),m(3,"button",3)(4,"app-icon"),S(5,"close"),_()()(),m(6,"main",4)(7,"div",5)(8,"a-date-field",6),ii("ngModelChange",function(a){return B(r),jn(s.date,a)||(s.date=a),V(a)}),P("ngModelChange",function(){return B(r),V(s.on_change.next(s.on_change.getValue()+1))}),_(),m(9,"a-user-search-field",6),ii("ngModelChange",function(a){return B(r),jn(s.user,a)||(s.user=a),V(a)}),P("ngModelChange",function(a){return B(r),V(s.addUser(a))}),_()(),m(10,"div",7)(11,"div",8),O(12,Een,2,5,"div",9),_(),m(13,"div",10)(14,"div",11),q(15,"a-user-avatar",12),m(16,"div",13),S(17),_()(),O(18,Ten,7,4,"div",14),H(19,"async"),_(),m(20,"div",15)(21,"div",16),O(22,Ien,1,3,"div",17),m(23,"div",18),P("mousedown",function(a){return B(r),V(s.startMovePeriod(a))})("touchstart",function(a){return B(r),V(s.startMovePeriod(a))}),q(24,"div",19)(25,"div",20),m(26,"div",21),P("mousedown",function(a){return B(r),V(s.startMoveDuration(a))})("touchstart",function(a){return B(r),V(s.startMoveDuration(a))}),_(),m(27,"div",22),S(28),H(29,"duration"),_(),O(30,ken,3,4,"div",23),_()(),m(31,"div",24,0),P("scroll",function(){return B(r),V(s.onScroll())}),q(33,"user-availability-list",25),H(34,"async"),H(35,"async"),O(36,Den,3,8,"user-availability-list",26),H(37,"async"),_()()()(),m(38,"footer",27)(39,"button",28)(40,"div",29)(41,"app-icon",30),S(42,"arrow_back"),_(),m(43,"div",31),S(44,"Back to form"),_()()()()}2&i&&(b(8),ni("ngModel",s.date),b(),ni("ngModel",s.user),b(3),C("ngForOf",s.hours),b(2),Hn("top",-s.offset_y+"px"),b(),C("user",s.host),b(2),K(" ",s.host.name||s.host.email," "),b(),C("ngForOf",ne(19,20,s.users)),b(4),C("ngForOf",s.hours),b(),Hn("left","calc("+s.selection_left+"rem - "+s.offset_x+"px)")("width",s.selection_width+"rem"),b(5),K(" ",ne(29,22,s.duration)," "),b(2),C("ngIf",s.move_time),b(3),C("user",s.host)("date",s.date)("availability",ne(34,24,s.availability)?ne(35,26,s.availability)[s.host.email]:tn(30,WIe)),b(3),C("ngForOf",ne(37,28,s.users)),b(3),C("mat-dialog-close",!0))},styles:[".grid[_ngcontent-%COMP%]{grid-template-columns:6rem 1fr;grid-template-rows:2.5rem minmax(0,1fr)}[disabled=true][_ngcontent-%COMP%], [disabled=true][_ngcontent-%COMP%]   [header][_ngcontent-%COMP%]{background:var(--b3)!important;pointer-events:none}[disabled=true][_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.3}"]})}return t})();function Aen(t,n){if(1&t&&(m(0,"div",2)(1,"div",3),S(2),H(3,"date"),H(4,"date"),_()()),2&t){const e=n.$implicit;Hn("left",e.start+"%")("width",e.size+"%"),b(2),Os(" ",At(3,6,e.date,"shortTime")," - ",At(4,9,e.date.valueOf()+60*e.duration*1e3,"shortTime")," ")}}let KIe=(()=>{class t{constructor(){this.availability=[],this.date=Date.now()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=Se({type:t,selectors:[["user-availability-list"]],inputs:{user:"user",availability:"availability",date:"date"},decls:2,vars:1,consts:[[1,"relative","w-[120rem]","h-32","inset-y-0","border-b","border-base-200"],["event","","class","absolute inset-y-0 bg-error text-white p-2 overflow-hidden border border-red-700 rounded",3,"left","width",4,"ngFor","ngForOf"],["event","",1,"absolute","inset-y-0","bg-error","text-white","p-2","overflow-hidden","border","border-red-700","rounded"],[1,"text-xs","max-w-full"]],template:function(i,s){1&i&&(m(0,"div",0),O(1,Aen,5,12,"div",1),_()),2&i&&(b(),C("ngForOf",s.availability))},dependencies:[on,fs],styles:["[_nghost-%COMP%]{display:block}"]})}return t})(),Men=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[Ka,pf,$u,Lb,bk,pv,I0,E0,wV]})}return t})();Ts(kR,[on,mt,pi,Vi,Ls,tg,St,mr,zs,ko,Tt,Zs,$l],[fs]),Ts(qIe,[on,mt,pi,Vi,Ls,fd,sy,St,l_,Tt,KIe],[xi,fs,ffe]);let gsn=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({providers:[$u],imports:[Ka,pf,$u,OE,Fb,Xh,ZN,_0,Lb,E0,I0,w0,bk,pv,Jc,kE,xTe,Cen,Men]})}return t})(),irn=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[Ka,pv,pf,$u,QV,vf,qh,bk,gsn]})}return t})();Ts(CK,[on,mt,ju,jl],[]),Ts(SK,[mt,St,zs,Kh,Tt,Ls,eu,Zs,Yr,pi,cc,pa,Fl,Mp,sy],[xi,fs]);const srn=["input"];function rrn(t,n){1&t&&q(0,"img",27),2&t&&C("src","assets/icons/"+E().card_type+".svg",qa)}function orn(t,n){if(1&t&&(m(0,"mat-option",28),S(1),_()),2&t){const e=n.$implicit;C("value",e[0]),b(),Os(" ",e[1]," (",e[0],") ")}}function arn(t,n){if(1&t&&(m(0,"mat-option",28),S(1),_()),2&t){const e=n.$implicit;C("value",e),b(),Ye(e)}}const lrn={card_number:"                ",cardholder:"",cvv:""},EX=new fs("en-us","");let k2e=(()=>{class t extends hn{constructor(){super(...arguments),this.details=new Rl({card_number:new Ke(Array(16).fill("X").join()),cardholder:new Ke(""),exp_month:new Ke(""),exp_year:new Ke(""),cvv:new Ke("",[Zr.minLength(3),Zr.maxLength(4)])}),this.disabled=!1,this.months=Array(12).fill(0).map((e,i)=>[EX.transform(L7(Date.now(),i),"MM"),EX.transform(L7(Date.now(),i),"MMM")]),this.years=Array(12).fill(0).map((e,i)=>EX.transform(O0(Date.now(),i),"yyyy")),this.digits=Array(16).fill(0),this._index=0,this.registerOnChange=e=>this._onChange=e,this.registerOnTouched=e=>this._onTouch=e,this.setDisabledState=e=>this.disabled=e}get is_amex(){return(this.details.value?.card_number||"").startsWith("3")}get card_type(){const e=this.details.value?.card_number||"";return e.startsWith("3")?"amex":e.startsWith("4")?"visa":e.startsWith("5")?"mastercard":""}get card_display(){let e=this.details.value?.card_number||"";return this.card_focused&&(e=e.substring(0,this._index)+"\u2bd0"+e.substring(this._index+1)),this.is_amex?`${e.substring(0,4)}-${e.substring(4,10)}-${e.substring(10)}`:`${e.substring(0,4)}-${e.substring(4,8)}-${e.substring(8,12)}-${e.substring(12)}`}get card_focused(){return document.activeElement===this._input_el.nativeElement||document.activeElement===this._input_el.nativeElement.parentElement}ngOnInit(){this.subscription("changes",this.details.valueChanges.subscribe(e=>this.timeout("update",()=>this.setValue(this.details.getRawValue()))))}focusInput(){this._input_el.nativeElement.focus(),this._index=this._input_el.nativeElement.selectionStart||0}onInput(e){if(!e||!this.card_focused)return;const i=this._index;if(i<0||i>16)return;let s=this.details.value.card_number;if((e.code.startsWith("Digit")||e.code.startsWith("Numpad"))&&i<(this.is_amex?15:16))s=s.substring(0,i)+e.key+s.substring(i+1),this.details.patchValue({card_number:s}),this._focusChange(i,1);else if("Backspace"===e.code&&i>0){let r=this.details.value.card_number;r=r.substring(0,i)+" "+r.substring(i+1),this.details.patchValue({card_number:r}),this._focusChange(i,-1)}else"ArrowLeft"===e.code?this._focusChange(i,-1):"ArrowRight"===e.code&&" "!==s[i]&&this._focusChange(i,1)}_focusChange(e,i){this._index=Math.min(16,Math.max(0,e+i))}setValue(e){this._onChange&&this._onChange(e)}writeValue(e){this.details.patchValue(e||lrn)}static#e=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=$n(t)))(s||t)}})();static#t=this.\u0275cmp=Se({type:t,selectors:[["card-input-field"]],viewQuery:function(i,s){if(1&i&&Gt(srn,7),2&i){let r;nt(r=it())&&(s._input_el=r.first)}},features:[bt([{provide:Ki,useExisting:wn(()=>t),multi:!0}]),Ze],decls:41,vars:6,consts:()=>{let e,i,s,r,o,a,l;return e=$localize`:␟c51ae86488666fc691751bf76d88811b37505c00␟1085309836704157602:Card Number`,i=$localize`:␟cc927e92ada1f250e8c5ea7884d0b1294be56635␟4148395957159016439:Name on Card`,s=$localize`:␟6402e768a1ac6a5f86edf0daccf05b3d9d63f465␟598947732489453783:Cardholder name is required`,r=$localize`:␟48b5a0234304bd29aeaab8f2793b8245517a7102␟7043163776563263056:Expiry Month`,o=$localize`:␟28b0c8359cc099ef3dcaddac4c1357d45751ac9d␟1539914853150581191:Expiry month is required`,a=$localize`:␟84a41ff903da0de49f3172fef0d0528701065d6e␟6698859483517525075:Expiry year is required`,l=$localize`:␟11a0ab2762b4af425c3d20aa211a751e4785e04e␟203544573091191988:Invalid security code`,[["input",""],e,i,s,r,o,a,l,[3,"keyup","formGroup"],[1,"flex","flex-col"],["for","card-number"],["tabindex","0",1,"border","border-base-200","p-2","h-12","mb-4","focus-within:shadow","focus-within:border-base-200","flex","items-center","font-mono","w-full","rounded","relative",3,"focus"],[1,"flex-1"],["type","tel","maxlength","17",1,"hidden","absolute",3,"keydown","value"],["class","h-8",3,"src",4,"ngIf"],[1,"flex","flex-col","flex-1"],["for","cardholder"],["appearance","outline"],["name","cardholder","matInput","","placeholder","Mr John Smith","formControlName","cardholder"],[1,"flex","items-center","space-x-2"],[1,"flex","flex-col","flex-1","w-1/4"],["placeholder","MM","formControlName","exp_month"],[3,"value",4,"ngFor","ngForOf"],["placeholder","YYYY","formControlName","exp_year"],["for","cvv"],["appearance","outline",1,"w-20"],["name","cvv","matInput","","formControlName","cvv","maxlength","4"],[1,"h-8",3,"src"],[3,"value"]]},template:function(i,s){if(1&i){const r=se();m(0,"form",8),P("keyup",function(a){return B(r),V(s.onInput(a))},0,Gc),m(1,"div",9)(2,"label",10),oe(3,1),_(),m(4,"div",11),P("focus",function(){return B(r),V(s.focusInput())}),m(5,"pre",12),S(6),_(),m(7,"input",13,0),P("keydown",function(){return B(r),V(!1)}),_(),O(9,rrn,1,1,"img",14),_()(),m(10,"div",15)(11,"label",16),oe(12,2),_(),m(13,"mat-form-field",17),q(14,"input",18),m(15,"mat-error"),oe(16,3),_()()(),m(17,"div",19)(18,"div",20)(19,"label",16),oe(20,4),_(),m(21,"mat-form-field",17)(22,"mat-select",21),O(23,orn,2,3,"mat-option",22),_(),m(24,"mat-error"),oe(25,5),_()()(),m(26,"div",20)(27,"label",16),S(28,"Expiry Year"),_(),m(29,"mat-form-field",17)(30,"mat-select",23),O(31,arn,2,2,"mat-option",22),_(),m(32,"mat-error"),oe(33,6),_()()(),m(34,"div",9)(35,"label",24),S(36,"CVV"),_(),m(37,"mat-form-field",25),q(38,"input",26),m(39,"mat-error"),oe(40,7),_()()()()()}2&i&&(C("formGroup",s.details),b(6),Ye(s.card_display),b(),C("value",null==s.details.value.card_number?null:s.details.value.card_number.trim()),b(2),C("ngIf",s.card_type),b(14),C("ngForOf",s.months),b(8),C("ngForOf",s.years))},dependencies:[on,mt,hf,Yr,pi,cc,r6,pa,Fl,zs,Kh,eu,ko,mr],styles:["mat-form-field[_ngcontent-%COMP%]{height:3.25rem}"]})}return t})(),crn=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t});static#n=this.\u0275inj=kn({imports:[Ka,pf,$u,Xh,Fb,Lb,_0,$b,E0]})}return t})();function urn(t){return new G9e(t,"./assets/locale/",".json")}Ts(mq,[mt,pi,Vi,Ls,Zs,k2e],[xi,H5,fs]);const drn=[Xh,Fb,yje,Jc];let hrn=(()=>{class t{constructor(){console.log("Production:",!0)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=Nn({type:t,bootstrap:[sJt]});static#n=this.\u0275inj=kn({providers:[{provide:Ld,useValue:lpt({showDialog:!1})},{provide:$ge,deps:[lo]},{provide:Ex,useFactory:()=>()=>{},deps:[$ge],multi:!0},Dre(Mre())],imports:[Ise,TBe,f9e.forRoot(wXt,{useHash:!0}),pf,$u,pv,drn,V6.forRoot({defaultLanguage:"en",loader:{provide:dE,useFactory:urn,deps:[bre]}}),F9e.register("ngsw-worker.js",{enabled:true}),irn,crn]})}return t})();I8e().bootstrapModule(hrn).catch(t=>console.error(t))},993:(cn,Nt)=>{"use strict";Nt.if=Mt,Nt.Kp=function dt(Re){if(Re.length%4!=0)throw new Error("Unable to parse base64 string.");var X=Re.indexOf("=");if(-1!==X&&X<Re.length-2)throw new Error("Unable to parse base64 string.");for(var ie,ke=Re.endsWith("==")?2:Re.endsWith("=")?1:0,de=Re.length,ee=new Uint8Array(de/4*3),J=0,De=0;J<de;J+=4,De+=3)ie=It(Re.charCodeAt(J))<<18|It(Re.charCodeAt(J+1))<<12|It(Re.charCodeAt(J+2))<<6|It(Re.charCodeAt(J+3)),ee[De]=ie>>16,ee[De+1]=ie>>8&255,ee[De+2]=255&ie;return ee.subarray(0,ee.length-ke)},Nt.Cw=function tt(Re){return Mt((arguments.length>1&&void 0!==arguments[1]?arguments[1]:new TextEncoder).encode(Re))};var ut=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],_n=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];function It(Re){if(Re>=_n.length)throw new Error("Unable to parse base64 string.");var X=_n[Re];if(255===X)throw new Error("Unable to parse base64 string.");return X}function Mt(Re){var ke,X="",de=Re.length;for(ke=2;ke<de;ke+=3)X+=ut[Re[ke-2]>>2],X+=ut[(3&Re[ke-2])<<4|Re[ke-1]>>4],X+=ut[(15&Re[ke-1])<<2|Re[ke]>>6],X+=ut[63&Re[ke]];return ke===de+1&&(X+=ut[Re[ke-2]>>2],X+=ut[(3&Re[ke-2])<<4],X+="=="),ke===de&&(X+=ut[Re[ke-2]>>2],X+=ut[(3&Re[ke-2])<<4|Re[ke-1]>>4],X+=ut[(15&Re[ke-1])<<2],X+="="),X}},655:cn=>{var Nt=-1,ye=1,ut=0;function _n(L,we,_e,Ve,qe){if(L===we)return L?[[ut,L]]:[];if(null!=_e){var Be=function Xe(L,we,_e){var Ve="number"==typeof _e?{index:_e,length:0}:_e.oldRange,qe="number"==typeof _e?null:_e.newRange,Be=L.length,rt=we.length;if(0===Ve.length&&(null===qe||0===qe.length)){var Je=Ve.index,zt=L.slice(0,Je),Ct=L.slice(Je),An=qe?qe.index:null,Jt=Je+rt-Be;if(!(null!==An&&An!==Jt||Jt<0||Jt>rt)){var Mn=we.slice(0,Jt);if((vi=we.slice(Jt))===Ct){var In=Math.min(Je,Jt);if((tr=zt.slice(0,In))===(dr=Mn.slice(0,In)))return Ut(tr,zt.slice(In),Mn.slice(In),Ct)}}if(null===An||An===Je){var os=Je,vi=(Mn=we.slice(0,os),we.slice(os));if(Mn===zt){var hs=Math.min(Be-os,rt-os);if((vs=Ct.slice(Ct.length-hs))===(As=vi.slice(vi.length-hs)))return Ut(zt,Ct.slice(0,Ct.length-hs),vi.slice(0,vi.length-hs),vs)}}}if(Ve.length>0&&qe&&0===qe.length){var tr=L.slice(0,Ve.index),vs=L.slice(Ve.index+Ve.length);if(!(rt<(In=tr.length)+(hs=vs.length))){var dr=we.slice(0,In),As=we.slice(rt-hs);if(tr===dr&&vs===As)return Ut(tr,L.slice(In,Be-hs),we.slice(In,rt-hs),vs)}}return null}(L,we,_e);if(Be)return Be}var rt=tt(L,we),Je=L.substring(0,rt);rt=Re(L=L.substring(rt),we=we.substring(rt));var zt=L.substring(L.length-rt),Ct=function It(L,we){var _e;if(!L)return[[ye,we]];if(!we)return[[Nt,L]];var Ve=L.length>we.length?L:we,qe=L.length>we.length?we:L,Be=Ve.indexOf(qe);if(-1!==Be)return _e=[[ye,Ve.substring(0,Be)],[ut,qe],[ye,Ve.substring(Be+qe.length)]],L.length>we.length&&(_e[0][0]=_e[2][0]=Nt),_e;if(1===qe.length)return[[Nt,L],[ye,we]];var rt=function X(L,we){var _e=L.length>we.length?L:we,Ve=L.length>we.length?we:L;if(_e.length<4||2*Ve.length<_e.length)return null;function qe(vi,In,tr){for(var os,hs,vs,As,dr=vi.substring(tr,tr+Math.floor(vi.length/4)),yi=-1,rs="";-1!==(yi=In.indexOf(dr,yi+1));){var Nr=tt(vi.substring(tr),In.substring(yi)),so=Re(vi.substring(0,tr),In.substring(0,yi));rs.length<so+Nr&&(rs=In.substring(yi-so,yi)+In.substring(yi,yi+Nr),os=vi.substring(0,tr-so),hs=vi.substring(tr+Nr),vs=In.substring(0,yi-so),As=In.substring(yi+Nr))}return 2*rs.length>=vi.length?[os,hs,vs,As,rs]:null}var Je,zt,Ct,An,Jt,Be=qe(_e,Ve,Math.ceil(_e.length/4)),rt=qe(_e,Ve,Math.ceil(_e.length/2));return Be||rt?(Je=rt?Be&&Be[4].length>rt[4].length?Be:rt:Be,L.length>we.length?(zt=Je[0],Ct=Je[1],An=Je[2],Jt=Je[3]):(An=Je[0],Jt=Je[1],zt=Je[2],Ct=Je[3]),[zt,Ct,An,Jt,Je[4]]):null}(L,we);if(rt){var zt=rt[1],An=rt[3],Jt=rt[4],Mn=_n(rt[0],rt[2]),vi=_n(zt,An);return Mn.concat([[ut,Jt]],vi)}return function Mt(L,we){for(var _e=L.length,Ve=we.length,qe=Math.ceil((_e+Ve)/2),Be=qe,rt=2*qe,Je=new Array(rt),zt=new Array(rt),Ct=0;Ct<rt;Ct++)Je[Ct]=-1,zt[Ct]=-1;Je[Be+1]=0,zt[Be+1]=0;for(var An=_e-Ve,Jt=An%2!=0,Mn=0,vi=0,In=0,tr=0,dr=0;dr<qe;dr++){for(var yi=-dr+Mn;yi<=dr-vi;yi+=2){for(var rs=Be+yi,hs=(os=yi===-dr||yi!==dr&&Je[rs-1]<Je[rs+1]?Je[rs+1]:Je[rs-1]+1)-yi;os<_e&&hs<Ve&&L.charAt(os)===we.charAt(hs);)os++,hs++;if(Je[rs]=os,os>_e)vi+=2;else if(hs>Ve)Mn+=2;else if(Jt&&(vs=Be+An-yi)>=0&&vs<rt&&-1!==zt[vs]&&os>=(As=_e-zt[vs]))return dt(L,we,os,hs)}for(var Nr=-dr+In;Nr<=dr-tr;Nr+=2){for(var As,vs=Be+Nr,so=(As=Nr===-dr||Nr!==dr&&zt[vs-1]<zt[vs+1]?zt[vs+1]:zt[vs-1]+1)-Nr;As<_e&&so<Ve&&L.charAt(_e-As-1)===we.charAt(Ve-so-1);)As++,so++;if(zt[vs]=As,As>_e)tr+=2;else if(so>Ve)In+=2;else if(!Jt){var os;if((rs=Be+An-Nr)>=0&&rs<rt&&-1!==Je[rs])if(hs=Be+(os=Je[rs])-rs,os>=(As=_e-As))return dt(L,we,os,hs)}}}return[[Nt,L],[ye,we]]}(L,we)}(L=L.substring(0,L.length-rt),we=we.substring(0,we.length-rt));return Je&&Ct.unshift([ut,Je]),zt&&Ct.push([ut,zt]),ht(Ct,qe),Ve&&function ke(L){for(var we=!1,_e=[],Ve=0,qe=null,Be=0,rt=0,Je=0,zt=0,Ct=0;Be<L.length;)L[Be][0]==ut?(_e[Ve++]=Be,rt=zt,Je=Ct,zt=0,Ct=0,qe=L[Be][1]):(L[Be][0]==ye?zt+=L[Be][1].length:Ct+=L[Be][1].length,qe&&qe.length<=Math.max(rt,Je)&&qe.length<=Math.max(zt,Ct)&&(L.splice(_e[Ve-1],0,[Nt,qe]),L[_e[Ve-1]+1][0]=ye,Ve--,Be=--Ve>0?_e[Ve-1]:-1,rt=0,Je=0,zt=0,Ct=0,qe=null,we=!0)),Be++;for(we&&ht(L),function ze(L){function we(vi,In){if(!vi||!In)return 6;var tr=vi.charAt(vi.length-1),dr=In.charAt(0),yi=tr.match(de),rs=dr.match(de),os=yi&&tr.match(ee),hs=rs&&dr.match(ee),vs=os&&tr.match(ie),As=hs&&dr.match(ie),Nr=vs&&vi.match(J),so=As&&In.match(De);return Nr||so?5:vs||As?4:yi&&!os&&hs?3:os||hs?2:yi||rs?1:0}for(var _e=1;_e<L.length-1;){if(L[_e-1][0]==ut&&L[_e+1][0]==ut){var Ve=L[_e-1][1],qe=L[_e][1],Be=L[_e+1][1],rt=Re(Ve,qe);if(rt){var Je=qe.substring(qe.length-rt);Ve=Ve.substring(0,Ve.length-rt),qe=Je+qe.substring(0,qe.length-rt),Be=Je+Be}for(var zt=Ve,Ct=qe,An=Be,Jt=we(Ve,qe)+we(qe,Be);qe.charAt(0)===Be.charAt(0);){Ve+=qe.charAt(0),qe=qe.substring(1)+Be.charAt(0),Be=Be.substring(1);var Mn=we(Ve,qe)+we(qe,Be);Mn>=Jt&&(Jt=Mn,zt=Ve,Ct=qe,An=Be)}L[_e-1][1]!=zt&&(zt?L[_e-1][1]=zt:(L.splice(_e-1,1),_e--),L[_e][1]=Ct,An?L[_e+1][1]=An:(L.splice(_e+1,1),_e--))}_e++}}(L),Be=1;Be<L.length;){if(L[Be-1][0]==Nt&&L[Be][0]==ye){var An=L[Be-1][1],Jt=L[Be][1],Mn=_t(An,Jt),vi=_t(Jt,An);Mn>=vi?(Mn>=An.length/2||Mn>=Jt.length/2)&&(L.splice(Be,0,[ut,Jt.substring(0,Mn)]),L[Be-1][1]=An.substring(0,An.length-Mn),L[Be+1][1]=Jt.substring(Mn),Be++):(vi>=An.length/2||vi>=Jt.length/2)&&(L.splice(Be,0,[ut,An.substring(0,vi)]),L[Be-1][0]=ye,L[Be-1][1]=Jt.substring(0,Jt.length-vi),L[Be+1][0]=Nt,L[Be+1][1]=An.substring(vi),Be++),Be++}Be++}}(Ct),Ct}function dt(L,we,_e,Ve){var qe=L.substring(0,_e),Be=we.substring(0,Ve),rt=L.substring(_e),Je=we.substring(Ve),zt=_n(qe,Be),Ct=_n(rt,Je);return zt.concat(Ct)}function tt(L,we){if(!L||!we||L.charAt(0)!==we.charAt(0))return 0;for(var _e=0,Ve=Math.min(L.length,we.length),qe=Ve,Be=0;_e<qe;)L.substring(Be,qe)==we.substring(Be,qe)?Be=_e=qe:Ve=qe,qe=Math.floor((Ve-_e)/2+_e);return Et(L.charCodeAt(qe-1))&&qe--,qe}function _t(L,we){var _e=L.length,Ve=we.length;if(0==_e||0==Ve)return 0;_e>Ve?L=L.substring(_e-Ve):_e<Ve&&(we=we.substring(0,_e));var qe=Math.min(_e,Ve);if(L==we)return qe;for(var Be=0,rt=1;;){var Je=L.substring(qe-rt),zt=we.indexOf(Je);if(-1==zt)return Be;rt+=zt,(0==zt||L.substring(qe-rt)==we.substring(0,rt))&&(Be=rt,rt++)}}function Re(L,we){if(!L||!we||L.slice(-1)!==we.slice(-1))return 0;for(var _e=0,Ve=Math.min(L.length,we.length),qe=Ve,Be=0;_e<qe;)L.substring(L.length-qe,L.length-Be)==we.substring(we.length-qe,we.length-Be)?Be=_e=qe:Ve=qe,qe=Math.floor((Ve-_e)/2+_e);return Ft(L.charCodeAt(L.length-qe))&&qe--,qe}var de=/[^a-zA-Z0-9]/,ee=/\s/,ie=/[\r\n]/,J=/\n\r?\n$/,De=/^\r?\n\r?\n/;function ht(L,we){L.push([ut,""]);for(var Je,_e=0,Ve=0,qe=0,Be="",rt="";_e<L.length;)if(_e<L.length-1&&!L[_e][1])L.splice(_e,1);else switch(L[_e][0]){case ye:qe++,rt+=L[_e][1],_e++;break;case Nt:Ve++,Be+=L[_e][1],_e++;break;case ut:var zt=_e-qe-Ve-1;if(we){if(zt>=0&&$t(L[zt][1])){var Ct=L[zt][1].slice(-1);if(L[zt][1]=L[zt][1].slice(0,-1),Be=Ct+Be,rt=Ct+rt,!L[zt][1]){L.splice(zt,1),_e--;var An=zt-1;L[An]&&L[An][0]===ye&&(qe++,rt=L[An][1]+rt,An--),L[An]&&L[An][0]===Nt&&(Ve++,Be=L[An][1]+Be,An--),zt=An}}Ot(L[_e][1])&&(Ct=L[_e][1].charAt(0),L[_e][1]=L[_e][1].slice(1),Be+=Ct,rt+=Ct)}if(_e<L.length-1&&!L[_e][1]){L.splice(_e,1);break}if(Be.length>0||rt.length>0){Be.length>0&&rt.length>0&&(0!==(Je=tt(rt,Be))&&(zt>=0?L[zt][1]+=rt.substring(0,Je):(L.splice(0,0,[ut,rt.substring(0,Je)]),_e++),rt=rt.substring(Je),Be=Be.substring(Je)),0!==(Je=Re(rt,Be))&&(L[_e][1]=rt.substring(rt.length-Je)+L[_e][1],rt=rt.substring(0,rt.length-Je),Be=Be.substring(0,Be.length-Je)));var Jt=qe+Ve;0===Be.length&&0===rt.length?(L.splice(_e-Jt,Jt),_e-=Jt):0===Be.length?(L.splice(_e-Jt,Jt,[ye,rt]),_e=_e-Jt+1):0===rt.length?(L.splice(_e-Jt,Jt,[Nt,Be]),_e=_e-Jt+1):(L.splice(_e-Jt,Jt,[Nt,Be],[ye,rt]),_e=_e-Jt+2)}0!==_e&&L[_e-1][0]===ut?(L[_e-1][1]+=L[_e][1],L.splice(_e,1)):_e++,qe=0,Ve=0,Be="",rt=""}""===L[L.length-1][1]&&L.pop();var Mn=!1;for(_e=1;_e<L.length-1;)L[_e-1][0]===ut&&L[_e+1][0]===ut&&(L[_e][1].substring(L[_e][1].length-L[_e-1][1].length)===L[_e-1][1]?(L[_e][1]=L[_e-1][1]+L[_e][1].substring(0,L[_e][1].length-L[_e-1][1].length),L[_e+1][1]=L[_e-1][1]+L[_e+1][1],L.splice(_e-1,1),Mn=!0):L[_e][1].substring(0,L[_e+1][1].length)==L[_e+1][1]&&(L[_e-1][1]+=L[_e+1][1],L[_e][1]=L[_e][1].substring(L[_e+1][1].length)+L[_e+1][1],L.splice(_e+1,1),Mn=!0)),_e++;Mn&&ht(L,we)}function Et(L){return L>=55296&&L<=56319}function Ft(L){return L>=56320&&L<=57343}function Ot(L){return Ft(L.charCodeAt(0))}function $t(L){return Et(L.charCodeAt(L.length-1))}function Ut(L,we,_e,Ve){return $t(L)||Ot(Ve)?null:function Ht(L){for(var we=[],_e=0;_e<L.length;_e++)L[_e][1].length>0&&we.push(L[_e]);return we}([[ut,L],[Nt,we],[ye,_e],[ut,Ve]])}function Me(L,we,_e,Ve){return _n(L,we,_e,Ve,!0)}Me.INSERT=ye,Me.DELETE=Nt,Me.EQUAL=ut,cn.exports=Me},299:function(cn,Nt,ye){var ut;!function(){var Mt={};!function(_n){"use strict";_n.__esModule=!0,_n.digestLength=32,_n.blockSize=64;var It=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function Mt(ie,J,De,ze,ht){for(var Et,Ft,Ot,$t,Ht,Ut,Xe,Me,L,we,_e,Ve,qe;ht>=64;){for(Et=J[0],Ft=J[1],Ot=J[2],$t=J[3],Ht=J[4],Ut=J[5],Xe=J[6],Me=J[7],we=0;we<16;we++)ie[we]=(255&De[_e=ze+4*we])<<24|(255&De[_e+1])<<16|(255&De[_e+2])<<8|255&De[_e+3];for(we=16;we<64;we++)ie[we]=((Ve=((L=ie[we-2])>>>17|L<<15)^(L>>>19|L<<13)^L>>>10)+ie[we-7]|0)+((qe=((L=ie[we-15])>>>7|L<<25)^(L>>>18|L<<14)^L>>>3)+ie[we-16]|0);for(we=0;we<64;we++)Ve=(((Ht>>>6|Ht<<26)^(Ht>>>11|Ht<<21)^(Ht>>>25|Ht<<7))+(Ht&Ut^~Ht&Xe)|0)+(Me+(It[we]+ie[we]|0)|0)|0,qe=((Et>>>2|Et<<30)^(Et>>>13|Et<<19)^(Et>>>22|Et<<10))+(Et&Ft^Et&Ot^Ft&Ot)|0,Me=Xe,Xe=Ut,Ut=Ht,Ht=$t+Ve|0,$t=Ot,Ot=Ft,Ft=Et,Et=Ve+qe|0;J[0]+=Et,J[1]+=Ft,J[2]+=Ot,J[3]+=$t,J[4]+=Ht,J[5]+=Ut,J[6]+=Xe,J[7]+=Me,ze+=64,ht-=64}return ze}var dt=function(){function ie(){this.digestLength=_n.digestLength,this.blockSize=_n.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return ie.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},ie.prototype.clean=function(){for(var J=0;J<this.buffer.length;J++)this.buffer[J]=0;for(J=0;J<this.temp.length;J++)this.temp[J]=0;this.reset()},ie.prototype.update=function(J,De){if(void 0===De&&(De=J.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var ze=0;if(this.bytesHashed+=De,this.bufferLength>0){for(;this.bufferLength<64&&De>0;)this.buffer[this.bufferLength++]=J[ze++],De--;64===this.bufferLength&&(Mt(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(De>=64&&(ze=Mt(this.temp,this.state,J,ze,De),De%=64);De>0;)this.buffer[this.bufferLength++]=J[ze++],De--;return this},ie.prototype.finish=function(J){if(!this.finished){var De=this.bytesHashed,ze=this.bufferLength,ht=De/536870912|0,Et=De<<3,Ft=De%64<56?64:128;this.buffer[ze]=128;for(var Ot=ze+1;Ot<Ft-8;Ot++)this.buffer[Ot]=0;this.buffer[Ft-8]=ht>>>24&255,this.buffer[Ft-7]=ht>>>16&255,this.buffer[Ft-6]=ht>>>8&255,this.buffer[Ft-5]=ht>>>0&255,this.buffer[Ft-4]=Et>>>24&255,this.buffer[Ft-3]=Et>>>16&255,this.buffer[Ft-2]=Et>>>8&255,this.buffer[Ft-1]=Et>>>0&255,Mt(this.temp,this.state,this.buffer,0,Ft),this.finished=!0}for(Ot=0;Ot<8;Ot++)J[4*Ot+0]=this.state[Ot]>>>24&255,J[4*Ot+1]=this.state[Ot]>>>16&255,J[4*Ot+2]=this.state[Ot]>>>8&255,J[4*Ot+3]=this.state[Ot]>>>0&255;return this},ie.prototype.digest=function(){var J=new Uint8Array(this.digestLength);return this.finish(J),J},ie.prototype._saveState=function(J){for(var De=0;De<this.state.length;De++)J[De]=this.state[De]},ie.prototype._restoreState=function(J,De){for(var ze=0;ze<this.state.length;ze++)this.state[ze]=J[ze];this.bytesHashed=De,this.finished=!1,this.bufferLength=0},ie}();_n.Hash=dt;var tt=function(){function ie(J){this.inner=new dt,this.outer=new dt,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var De=new Uint8Array(this.blockSize);if(J.length>this.blockSize)(new dt).update(J).finish(De).clean();else for(var ze=0;ze<J.length;ze++)De[ze]=J[ze];for(ze=0;ze<De.length;ze++)De[ze]^=54;for(this.inner.update(De),ze=0;ze<De.length;ze++)De[ze]^=106;for(this.outer.update(De),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate),ze=0;ze<De.length;ze++)De[ze]=0}return ie.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},ie.prototype.clean=function(){for(var J=0;J<this.istate.length;J++)this.ostate[J]=this.istate[J]=0;this.inner.clean(),this.outer.clean()},ie.prototype.update=function(J){return this.inner.update(J),this},ie.prototype.finish=function(J){return this.outer.finished?this.outer.finish(J):(this.inner.finish(J),this.outer.update(J,this.digestLength).finish(J)),this},ie.prototype.digest=function(){var J=new Uint8Array(this.digestLength);return this.finish(J),J},ie}();function _t(ie){var J=(new dt).update(ie),De=J.digest();return J.clean(),De}function Re(ie,J){var De=new tt(ie).update(J),ze=De.digest();return De.clean(),ze}function X(ie,J,De,ze){var ht=ze[0];if(0===ht)throw new Error("hkdf: cannot expand more");J.reset(),ht>1&&J.update(ie),De&&J.update(De),J.update(ze),J.finish(ie),ze[0]++}_n.HMAC=tt,_n.hash=_t,_n.default=_t,_n.hmac=Re;var ke=new Uint8Array(_n.digestLength);_n.hkdf=function de(ie,J,De,ze){void 0===J&&(J=ke),void 0===ze&&(ze=32);for(var ht=new Uint8Array([1]),Et=Re(J,ie),Ft=new tt(Et),Ot=new Uint8Array(Ft.digestLength),$t=Ot.length,Ht=new Uint8Array(ze),Ut=0;Ut<ze;Ut++)$t===Ot.length&&(X(Ot,Ft,De,ht),$t=0),Ht[Ut]=Ot[$t++];return Ft.clean(),Ot.fill(0),ht.fill(0),Ht},_n.pbkdf2=function ee(ie,J,De,ze){for(var ht=new tt(ie),Et=ht.digestLength,Ft=new Uint8Array(4),Ot=new Uint8Array(Et),$t=new Uint8Array(Et),Ht=new Uint8Array(ze),Ut=0;Ut*Et<ze;Ut++){var Xe=Ut+1;Ft[0]=Xe>>>24&255,Ft[1]=Xe>>>16&255,Ft[2]=Xe>>>8&255,Ft[3]=Xe>>>0&255,ht.reset(),ht.update(J),ht.update(Ft),ht.finish($t);for(var Me=0;Me<Et;Me++)Ot[Me]=$t[Me];for(Me=2;Me<=De;Me++){ht.reset(),ht.update($t).finish($t);for(var L=0;L<Et;L++)Ot[L]^=$t[L]}for(Me=0;Me<Et&&Ut*Et+Me<ze;Me++)Ht[Ut*Et+Me]=Ot[Me]}for(Ut=0;Ut<Et;Ut++)Ot[Ut]=$t[Ut]=0;for(Ut=0;Ut<4;Ut++)Ft[Ut]=0;return ht.clean(),Ht}}(Mt);var dt=Mt.default;for(var tt in Mt)dt[tt]=Mt[tt];"object"==typeof cn.exports?cn.exports=dt:void 0!==(ut=function(){return dt}.call(Mt,ye,Mt,cn))&&(cn.exports=ut)}()},328:(cn,Nt,ye)=>{cn=ye.nmd(cn);var _n="__lodash_hash_undefined__",It=9007199254740991,Mt="[object Arguments]",tt="[object Boolean]",_t="[object Date]",X="[object Function]",ke="[object GeneratorFunction]",de="[object Map]",ee="[object Number]",ie="[object Object]",J="[object Promise]",De="[object RegExp]",ze="[object Set]",ht="[object String]",Et="[object Symbol]",Ft="[object WeakMap]",Ot="[object ArrayBuffer]",$t="[object DataView]",Ht="[object Float32Array]",Ut="[object Float64Array]",Xe="[object Int8Array]",Me="[object Int16Array]",L="[object Int32Array]",we="[object Uint8Array]",_e="[object Uint8ClampedArray]",Ve="[object Uint16Array]",qe="[object Uint32Array]",rt=/\w*$/,Je=/^\[object .+?Constructor\]$/,zt=/^(?:0|[1-9]\d*)$/,Ct={};Ct[Mt]=Ct["[object Array]"]=Ct[Ot]=Ct[$t]=Ct[tt]=Ct[_t]=Ct[Ht]=Ct[Ut]=Ct[Xe]=Ct[Me]=Ct[L]=Ct[de]=Ct[ee]=Ct[ie]=Ct[De]=Ct[ze]=Ct[ht]=Ct[Et]=Ct[we]=Ct[_e]=Ct[Ve]=Ct[qe]=!0,Ct["[object Error]"]=Ct[X]=Ct[Ft]=!1;var An="object"==typeof global&&global&&global.Object===Object&&global,Jt="object"==typeof self&&self&&self.Object===Object&&self,Mn=An||Jt||Function("return this")(),vi=Nt&&!Nt.nodeType&&Nt,In=vi&&cn&&!cn.nodeType&&cn,tr=In&&In.exports===vi;function dr(A,W){return A.set(W[0],W[1]),A}function yi(A,W){return A.add(W),A}function hs(A,W,he,je){var li=-1,yn=A?A.length:0;for(je&&yn&&(he=A[++li]);++li<yn;)he=W(he,A[li],li,A);return he}function Nr(A){var W=!1;if(null!=A&&"function"!=typeof A.toString)try{W=!!(A+"")}catch{}return W}function so(A){var W=-1,he=Array(A.size);return A.forEach(function(je,li){he[++W]=[li,je]}),he}function wh(A,W){return function(he){return A(W(he))}}function vg(A){var W=-1,he=Array(A.size);return A.forEach(function(je){he[++W]=je}),he}var A,gy=Array.prototype,by=Function.prototype,Ch=Object.prototype,Pp=Mn["__core-js_shared__"],$p=(A=/[^.]+$/.exec(Pp&&Pp.keys&&Pp.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"",vy=by.toString,xu=Ch.hasOwnProperty,Bp=Ch.toString,yy=RegExp("^"+vy.call(xu).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vp=tr?Mn.Buffer:void 0,wd=Mn.Symbol,yg=Mn.Uint8Array,Oc=wh(Object.getPrototypeOf,Object),JC=Object.create,wg=Ch.propertyIsEnumerable,eS=gy.splice,wy=Object.getOwnPropertySymbols,sm=Vp?Vp.isBuffer:void 0,Cy=wh(Object.keys,Object),rm=Eu(Mn,"DataView"),Cd=Eu(Mn,"Map"),Rc=Eu(Mn,"Promise"),Cg=Eu(Mn,"Set"),Sd=Eu(Mn,"WeakMap"),xd=Eu(Object,"create"),Ua=Ga(rm),tc=Ga(Cd),Sh=Ga(Rc),Fc=Ga(Cg),zp=Ga(Sd),Up=wd?wd.prototype:void 0,Gp=Up?Up.valueOf:void 0;function rn(A){var W=-1,he=A?A.length:0;for(this.clear();++W<he;){var je=A[W];this.set(je[0],je[1])}}function sa(A){var W=-1,he=A?A.length:0;for(this.clear();++W<he;){var je=A[W];this.set(je[0],je[1])}}function Pn(A){var W=-1,he=A?A.length:0;for(this.clear();++W<he;){var je=A[W];this.set(je[0],je[1])}}function ot(A){this.__data__=new sa(A)}function xh(A,W,he){var je=A[W];(!xu.call(A,W)||!hS(je,he)||void 0===he&&!(W in A))&&(A[W]=he)}function Hp(A,W){for(var he=A.length;he--;)if(hS(A[he][0],W))return he;return-1}function um(A,W,he,je,li,yn,Qi){var ps;if(je&&(ps=yn?je(A,li,yn,Qi):je(A)),void 0!==ps)return ps;if(!Id(A))return A;var ro=Dg(A);if(ro){if(ps=function kg(A){var W=A.length,he=A.constructor(W);return W&&"string"==typeof A[0]&&xu.call(A,"index")&&(he.index=A.index,he.input=A.input),he}(A),!W)return function $k(A,W){var he=-1,je=A.length;for(W||(W=Array(je));++he<je;)W[he]=A[he];return W}(A,ps)}else{var Ms=Pc(A),Ia=Ms==X||Ms==ke;if(Ay(A))return function Eg(A,W){if(W)return A.slice();var he=new A.constructor(A.length);return A.copy(he),he}(A,W);if(Ms==ie||Ms==Mt||Ia&&!yn){if(Nr(A))return yn?A:{};if(ps=function Tu(A){return"function"!=typeof A.constructor||Dy(A)?{}:function xg(A){return Id(A)?JC(A):{}}(Oc(A))}(Ia?{}:A),!W)return function Bk(A,W){return wr(A,Td(A),W)}(A,function Lc(A,W){return A&&wr(W,Mg(W),A)}(ps,A))}else{if(!Ct[Ms])return yn?A:{};ps=function cS(A,W,he,je){var li=A.constructor;switch(W){case Ot:return Tg(A);case tt:case _t:return new li(+A);case $t:return function Eh(A,W){var he=W?Tg(A.buffer):A.buffer;return new A.constructor(he,A.byteOffset,A.byteLength)}(A,je);case Ht:case Ut:case Xe:case Me:case L:case we:case _e:case Ve:case qe:return function Pk(A,W){var he=W?Tg(A.buffer):A.buffer;return new A.constructor(he,A.byteOffset,A.length)}(A,je);case de:return function Ig(A,W,he){return hs(W?he(so(A),!0):so(A),dr,new A.constructor)}(A,je,he);case ee:case ht:return new li(A);case De:return function ky(A){var W=new A.constructor(A.source,rt.exec(A));return W.lastIndex=A.lastIndex,W}(A);case ze:return function aS(A,W,he){return hs(W?he(vg(A),!0):vg(A),yi,new A.constructor)}(A,je,he);case Et:return function Lk(A){return Gp?Object(Gp.call(A)):{}}(A)}}(A,Ms,um,W)}}Qi||(Qi=new ot);var qr=Qi.get(A);if(qr)return qr;if(Qi.set(A,ps),!ro)var oo=he?function lS(A){return function rS(A,W,he){var je=W(A);return Dg(A)?je:function os(A,W){for(var he=-1,je=W.length,li=A.length;++he<je;)A[li+he]=W[he];return A}(je,he(A))}(A,Mg,Td)}(A):Mg(A);return function rs(A,W){for(var he=-1,je=A?A.length:0;++he<je&&!1!==W(A[he],he,A););}(oo||A,function(wo,Fo){oo&&(wo=A[Fo=wo]),xh(ps,Fo,um(wo,W,he,je,Fo,A,Qi))}),ps}function Tg(A){var W=new A.constructor(A.byteLength);return new yg(W).set(new yg(A)),W}function wr(A,W,he,je){he||(he={});for(var li=-1,yn=W.length;++li<yn;){var Qi=W[li],ps=je?je(he[Qi],A[Qi],Qi,he,A):void 0;xh(he,Qi,void 0===ps?A[Qi]:ps)}return he}function Wp(A,W){var he=A.__data__;return function Vk(A){var W=typeof A;return"string"==W||"number"==W||"symbol"==W||"boolean"==W?"__proto__"!==A:null===A}(W)?he["string"==typeof W?"string":"hash"]:he.map}function Eu(A,W){var he=function As(A,W){return A?.[W]}(A,W);return function Fk(A){return!(!Id(A)||function zk(A){return!!$p&&$p in A}(A))&&(Ag(A)||Nr(A)?yy:Je).test(Ga(A))}(he)?he:void 0}rn.prototype.clear=function Sy(){this.__data__=xd?xd(null):{}},rn.prototype.delete=function om(A){return this.has(A)&&delete this.__data__[A]},rn.prototype.get=function Ok(A){var W=this.__data__;if(xd){var he=W[A];return he===_n?void 0:he}return xu.call(W,A)?W[A]:void 0},rn.prototype.has=function Mi(A){var W=this.__data__;return xd?void 0!==W[A]:xu.call(W,A)},rn.prototype.set=function am(A,W){return this.__data__[A]=xd&&void 0===W?_n:W,this},sa.prototype.clear=function tS(){this.__data__=[]},sa.prototype.delete=function jp(A){var W=this.__data__,he=Hp(W,A);return!(he<0||(he==W.length-1?W.pop():eS.call(W,he,1),0))},sa.prototype.get=function lm(A){var W=this.__data__,he=Hp(W,A);return he<0?void 0:W[he][1]},sa.prototype.has=function nS(A){return Hp(this.__data__,A)>-1},sa.prototype.set=function xy(A,W){var he=this.__data__,je=Hp(he,A);return je<0?he.push([A,W]):he[je][1]=W,this},Pn.prototype.clear=function Ey(){this.__data__={hash:new rn,map:new(Cd||sa),string:new rn}},Pn.prototype.delete=function Rk(A){return Wp(this,A).delete(A)},Pn.prototype.get=function Ed(A){return Wp(this,A).get(A)},Pn.prototype.has=function Ty(A){return Wp(this,A).has(A)},Pn.prototype.set=function Iy(A,W){return Wp(this,A).set(A,W),this},ot.prototype.clear=function Sg(){this.__data__=new sa},ot.prototype.delete=function at(A){return this.__data__.delete(A)},ot.prototype.get=function me(A){return this.__data__.get(A)},ot.prototype.has=function iS(A){return this.__data__.has(A)},ot.prototype.set=function sS(A,W){var he=this.__data__;if(he instanceof sa){var je=he.__data__;if(!Cd||je.length<199)return je.push([A,W]),this;he=this.__data__=new Pn(je)}return he.set(A,W),this};var Td=wy?wh(wy,Object):function pS(){return[]},Pc=function oS(A){return Bp.call(A)};function uS(A,W){return!!(W=W??It)&&("number"==typeof A||zt.test(A))&&A>-1&&A%1==0&&A<W}function Dy(A){var W=A&&A.constructor;return A===("function"==typeof W&&W.prototype||Ch)}function Ga(A){if(null!=A){try{return vy.call(A)}catch{}try{return A+""}catch{}}return""}function hS(A,W){return A===W||A!=A&&W!=W}(rm&&Pc(new rm(new ArrayBuffer(1)))!=$t||Cd&&Pc(new Cd)!=de||Rc&&Pc(Rc.resolve())!=J||Cg&&Pc(new Cg)!=ze||Sd&&Pc(new Sd)!=Ft)&&(Pc=function(A){var W=Bp.call(A),he=W==ie?A.constructor:void 0,je=he?Ga(he):void 0;if(je)switch(je){case Ua:return $t;case tc:return de;case Sh:return J;case Fc:return ze;case zp:return Ft}return W});var Dg=Array.isArray;function hm(A){return null!=A&&function My(A){return"number"==typeof A&&A>-1&&A%1==0&&A<=It}(A.length)&&!Ag(A)}var Ay=sm||function Oy(){return!1};function Ag(A){var W=Id(A)?Bp.call(A):"";return W==X||W==ke}function Id(A){var W=typeof A;return!!A&&("object"==W||"function"==W)}function Mg(A){return hm(A)?function cm(A,W){var he=Dg(A)||function dm(A){return function Uk(A){return function Ny(A){return!!A&&"object"==typeof A}(A)&&hm(A)}(A)&&xu.call(A,"callee")&&(!wg.call(A,"callee")||Bp.call(A)==Mt)}(A)?function vs(A,W){for(var he=-1,je=Array(A);++he<A;)je[he]=W(he);return je}(A.length,String):[],je=he.length,li=!!je;for(var yn in A)(W||xu.call(A,yn))&&(!li||"length"!=yn&&!uS(yn,je))&&he.push(yn);return he}(A):function Cn(A){if(!Dy(A))return Cy(A);var W=[];for(var he in Object(A))xu.call(A,he)&&"constructor"!=he&&W.push(he);return W}(A)}cn.exports=function dS(A){return um(A,!0,!0)}},667:(cn,Nt,ye)=>{cn=ye.nmd(cn);var _n="__lodash_hash_undefined__",It=1,Mt=2,dt=9007199254740991,tt="[object Arguments]",_t="[object Array]",Re="[object AsyncFunction]",X="[object Boolean]",ke="[object Date]",de="[object Error]",ee="[object Function]",ie="[object GeneratorFunction]",J="[object Map]",De="[object Number]",ze="[object Null]",ht="[object Object]",Et="[object Promise]",Ft="[object Proxy]",Ot="[object RegExp]",$t="[object Set]",Ht="[object String]",Xe="[object Undefined]",Me="[object WeakMap]",L="[object ArrayBuffer]",we="[object DataView]",Mn=/^\[object .+?Constructor\]$/,vi=/^(?:0|[1-9]\d*)$/,In={};In["[object Float32Array]"]=In["[object Float64Array]"]=In["[object Int8Array]"]=In["[object Int16Array]"]=In["[object Int32Array]"]=In["[object Uint8Array]"]=In["[object Uint8ClampedArray]"]=In["[object Uint16Array]"]=In["[object Uint32Array]"]=!0,In[tt]=In[_t]=In[L]=In[X]=In[we]=In[ke]=In[de]=In[ee]=In[J]=In[De]=In[ht]=In[Ot]=In[$t]=In[Ht]=In[Me]=!1;var tr="object"==typeof global&&global&&global.Object===Object&&global,dr="object"==typeof self&&self&&self.Object===Object&&self,yi=tr||dr||Function("return this")(),rs=Nt&&!Nt.nodeType&&Nt,os=rs&&cn&&!cn.nodeType&&cn,hs=os&&os.exports===rs,vs=hs&&tr.process,As=function(){try{return vs&&vs.binding&&vs.binding("util")}catch{}}(),Nr=As&&As.isTypedArray;function vg(A,W){for(var he=-1,je=null==A?0:A.length;++he<je;)if(W(A[he],he,A))return!0;return!1}function Ch(A,W){return A.has(W)}function $p(A){var W=-1,he=Array(A.size);return A.forEach(function(je,li){he[++W]=[li,je]}),he}function xu(A){var W=-1,he=Array(A.size);return A.forEach(function(je){he[++W]=je}),he}var A,Bp=Array.prototype,Vp=Object.prototype,wd=yi["__core-js_shared__"],yg=Function.prototype.toString,Oc=Vp.hasOwnProperty,JC=(A=/[^.]+$/.exec(wd&&wd.keys&&wd.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"",wg=Vp.toString,eS=RegExp("^"+yg.call(Oc).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wy=hs?yi.Buffer:void 0,sm=yi.Symbol,Cy=yi.Uint8Array,rm=Vp.propertyIsEnumerable,Cd=Bp.splice,Rc=sm?sm.toStringTag:void 0,Cg=Object.getOwnPropertySymbols,Sd=wy?wy.isBuffer:void 0,xd=function vy(A,W){return function(he){return A(W(he))}}(Object.keys,Object),Ua=Td(yi,"DataView"),tc=Td(yi,"Map"),Sh=Td(yi,"Promise"),Fc=Td(yi,"Set"),zp=Td(yi,"WeakMap"),Up=Td(Object,"create"),Gp=Ga(Ua),rn=Ga(tc),Sy=Ga(Sh),om=Ga(Fc),Ok=Ga(zp),Mi=sm?sm.prototype:void 0,am=Mi?Mi.valueOf:void 0;function sa(A){var W=-1,he=null==A?0:A.length;for(this.clear();++W<he;){var je=A[W];this.set(je[0],je[1])}}function Pn(A){var W=-1,he=null==A?0:A.length;for(this.clear();++W<he;){var je=A[W];this.set(je[0],je[1])}}function ot(A){var W=-1,he=null==A?0:A.length;for(this.clear();++W<he;){var je=A[W];this.set(je[0],je[1])}}function cm(A){var W=-1,he=null==A?0:A.length;for(this.__data__=new ot;++W<he;)this.add(A[W])}function Lc(A){var W=this.__data__=new Pn(A);this.size=W.size}function Eg(A,W){for(var he=A.length;he--;)if(dS(A[he][0],W))return he;return-1}function Eh(A){return null==A?void 0===A?Xe:ze:Rc&&Rc in Object(A)?function Pc(A){var W=Oc.call(A,Rc),he=A[Rc];try{A[Rc]=void 0;var je=!0}catch{}var li=wg.call(A);return je&&(W?A[Rc]=he:delete A[Rc]),li}(A):function Dy(A){return wg.call(A)}(A)}function Ig(A){return Id(A)&&Eh(A)==tt}function ky(A,W,he,je,li){return A===W||(null==A||null==W||!Id(A)&&!Id(W)?A!=A&&W!=W:function aS(A,W,he,je,li,yn){var Qi=dm(A),ps=dm(W),ro=Qi?_t:Tu(A),Ms=ps?_t:Tu(W),Ia=(ro=ro==tt?ht:ro)==ht,qr=(Ms=Ms==tt?ht:Ms)==ht,oo=ro==Ms;if(oo&&hm(A)){if(!hm(W))return!1;Qi=!0,Ia=!1}if(oo&&!Ia)return yn||(yn=new Lc),Qi||Ny(A)?wr(A,W,he,je,li,yn):function Bk(A,W,he,je,li,yn,Qi){switch(he){case we:if(A.byteLength!=W.byteLength||A.byteOffset!=W.byteOffset)return!1;A=A.buffer,W=W.buffer;case L:return!(A.byteLength!=W.byteLength||!yn(new Cy(A),new Cy(W)));case X:case ke:case De:return dS(+A,+W);case de:return A.name==W.name&&A.message==W.message;case Ot:case Ht:return A==W+"";case J:var ps=$p;case $t:if(ps||(ps=xu),A.size!=W.size&&!(je&It))return!1;var Ms=Qi.get(A);if(Ms)return Ms==W;je|=Mt,Qi.set(A,W);var Ia=wr(ps(A),ps(W),je,li,yn,Qi);return Qi.delete(A),Ia;case"[object Symbol]":if(am)return am.call(A)==am.call(W)}return!1}(A,W,ro,he,je,li,yn);if(!(he&It)){var wo=Ia&&Oc.call(A,"__wrapped__"),Fo=qr&&Oc.call(W,"__wrapped__");if(wo||Fo){var kd=wo?A.value():A,Iu=Fo?W.value():W;return yn||(yn=new Lc),li(kd,Iu,he,je,yn)}}return!!oo&&(yn||(yn=new Lc),function lS(A,W,he,je,li,yn){var Qi=he&It,ps=Wp(A),ro=ps.length;if(ro!=Wp(W).length&&!Qi)return!1;for(var qr=ro;qr--;){var oo=ps[qr];if(!(Qi?oo in W:Oc.call(W,oo)))return!1}var wo=yn.get(A);if(wo&&yn.get(W))return wo==W;var Fo=!0;yn.set(A,W),yn.set(W,A);for(var kd=Qi;++qr<ro;){var Iu=A[oo=ps[qr]],Th=W[oo];if(je)var Gk=Qi?je(Th,Iu,oo,W,A,yn):je(Iu,Th,oo,A,W,yn);if(!(void 0===Gk?Iu===Th||li(Iu,Th,he,je,yn):Gk)){Fo=!1;break}kd||(kd="constructor"==oo)}if(Fo&&!kd){var Ry=A.constructor,Fy=W.constructor;Ry!=Fy&&"constructor"in A&&"constructor"in W&&!("function"==typeof Ry&&Ry instanceof Ry&&"function"==typeof Fy&&Fy instanceof Fy)&&(Fo=!1)}return yn.delete(A),yn.delete(W),Fo}(A,W,he,je,li,yn))}(A,W,he,je,ky,li))}function wr(A,W,he,je,li,yn){var Qi=he&It,ps=A.length,ro=W.length;if(ps!=ro&&!(Qi&&ro>ps))return!1;var Ms=yn.get(A);if(Ms&&yn.get(W))return Ms==W;var Ia=-1,qr=!0,oo=he&Mt?new cm:void 0;for(yn.set(A,W),yn.set(W,A);++Ia<ps;){var wo=A[Ia],Fo=W[Ia];if(je)var kd=Qi?je(Fo,wo,Ia,W,A,yn):je(wo,Fo,Ia,A,W,yn);if(void 0!==kd){if(kd)continue;qr=!1;break}if(oo){if(!vg(W,function(Iu,Th){if(!Ch(oo,Th)&&(wo===Iu||li(wo,Iu,he,je,yn)))return oo.push(Th)})){qr=!1;break}}else if(wo!==Fo&&!li(wo,Fo,he,je,yn)){qr=!1;break}}return yn.delete(A),yn.delete(W),qr}function Wp(A){return function Tg(A,W,he){var je=W(A);return dm(A)?je:function wh(A,W){for(var he=-1,je=W.length,li=A.length;++he<je;)A[li+he]=W[he];return A}(je,he(A))}(A,Mg,kg)}function Eu(A,W){var he=A.__data__;return function uS(A){var W=typeof A;return"string"==W||"number"==W||"symbol"==W||"boolean"==W?"__proto__"!==A:null===A}(W)?he["string"==typeof W?"string":"hash"]:he.map}function Td(A,W){var he=function Pp(A,W){return A?.[W]}(A,W);return function Lk(A){return!(!My(A)||function Vk(A){return!!JC&&JC in A}(A))&&(Ay(A)?eS:Mn).test(Ga(A))}(he)?he:void 0}sa.prototype.clear=function tS(){this.__data__=Up?Up(null):{},this.size=0},sa.prototype.delete=function jp(A){var W=this.has(A)&&delete this.__data__[A];return this.size-=W?1:0,W},sa.prototype.get=function lm(A){var W=this.__data__;if(Up){var he=W[A];return he===_n?void 0:he}return Oc.call(W,A)?W[A]:void 0},sa.prototype.has=function nS(A){var W=this.__data__;return Up?void 0!==W[A]:Oc.call(W,A)},sa.prototype.set=function xy(A,W){var he=this.__data__;return this.size+=this.has(A)?0:1,he[A]=Up&&void 0===W?_n:W,this},Pn.prototype.clear=function Ey(){this.__data__=[],this.size=0},Pn.prototype.delete=function Rk(A){var W=this.__data__,he=Eg(W,A);return!(he<0||(he==W.length-1?W.pop():Cd.call(W,he,1),--this.size,0))},Pn.prototype.get=function Ed(A){var W=this.__data__,he=Eg(W,A);return he<0?void 0:W[he][1]},Pn.prototype.has=function Ty(A){return Eg(this.__data__,A)>-1},Pn.prototype.set=function Iy(A,W){var he=this.__data__,je=Eg(he,A);return je<0?(++this.size,he.push([A,W])):he[je][1]=W,this},ot.prototype.clear=function Sg(){this.size=0,this.__data__={hash:new sa,map:new(tc||Pn),string:new sa}},ot.prototype.delete=function at(A){var W=Eu(this,A).delete(A);return this.size-=W?1:0,W},ot.prototype.get=function me(A){return Eu(this,A).get(A)},ot.prototype.has=function iS(A){return Eu(this,A).has(A)},ot.prototype.set=function sS(A,W){var he=Eu(this,A),je=he.size;return he.set(A,W),this.size+=he.size==je?0:1,this},cm.prototype.add=cm.prototype.push=function xh(A){return this.__data__.set(A,_n),this},cm.prototype.has=function Hp(A){return this.__data__.has(A)},Lc.prototype.clear=function um(){this.__data__=new Pn,this.size=0},Lc.prototype.delete=function xg(A){var W=this.__data__,he=W.delete(A);return this.size=W.size,he},Lc.prototype.get=function rS(A){return this.__data__.get(A)},Lc.prototype.has=function oS(A){return this.__data__.has(A)},Lc.prototype.set=function Fk(A,W){var he=this.__data__;if(he instanceof Pn){var je=he.__data__;if(!tc||je.length<199)return je.push([A,W]),this.size=++he.size,this;he=this.__data__=new ot(je)}return he.set(A,W),this.size=he.size,this};var kg=Cg?function(A){return null==A?[]:(A=Object(A),function so(A,W){for(var he=-1,je=null==A?0:A.length,li=0,yn=[];++he<je;){var Qi=A[he];W(Qi,he,A)&&(yn[li++]=Qi)}return yn}(Cg(A),function(W){return rm.call(A,W)}))}:function pS(){return[]},Tu=Eh;function cS(A,W){return!!(W=W??dt)&&("number"==typeof A||vi.test(A))&&A>-1&&A%1==0&&A<W}function Ga(A){if(null!=A){try{return yg.call(A)}catch{}try{return A+""}catch{}}return""}function dS(A,W){return A===W||A!=A&&W!=W}(Ua&&Tu(new Ua(new ArrayBuffer(1)))!=we||tc&&Tu(new tc)!=J||Sh&&Tu(Sh.resolve())!=Et||Fc&&Tu(new Fc)!=$t||zp&&Tu(new zp)!=Me)&&(Tu=function(A){var W=Eh(A),he=W==ht?A.constructor:void 0,je=he?Ga(he):"";if(je)switch(je){case Gp:return we;case rn:return J;case Sy:return Et;case om:return $t;case Ok:return Me}return W});var hS=Ig(function(){return arguments}())?Ig:function(A){return Id(A)&&Oc.call(A,"callee")&&!rm.call(A,"callee")},dm=Array.isArray,hm=Sd||function Oy(){return!1};function Ay(A){if(!My(A))return!1;var W=Eh(A);return W==ee||W==ie||W==Re||W==Ft}function Ag(A){return"number"==typeof A&&A>-1&&A%1==0&&A<=dt}function My(A){var W=typeof A;return null!=A&&("object"==W||"function"==W)}function Id(A){return null!=A&&"object"==typeof A}var Ny=Nr?function by(A){return function(W){return A(W)}}(Nr):function Pk(A){return Id(A)&&Ag(A.length)&&!!In[Eh(A)]};function Mg(A){return function Dg(A){return null!=A&&Ag(A.length)&&!Ay(A)}(A)?function Cn(A,W){var he=dm(A),je=!he&&hS(A),li=!he&&!je&&hm(A),yn=!he&&!je&&!li&&Ny(A),Qi=he||je||li||yn,ps=Qi?function gy(A,W){for(var he=-1,je=Array(A);++he<A;)je[he]=W(he);return je}(A.length,String):[],ro=ps.length;for(var Ms in A)(W||Oc.call(A,Ms))&&(!Qi||!("length"==Ms||li&&("offset"==Ms||"parent"==Ms)||yn&&("buffer"==Ms||"byteLength"==Ms||"byteOffset"==Ms)||cS(Ms,ro)))&&ps.push(Ms);return ps}(A):function $k(A){if(!function zk(A){var W=A&&A.constructor;return A===("function"==typeof W&&W.prototype||Vp)}(A))return xd(A);var W=[];for(var he in Object(A))Oc.call(A,he)&&"constructor"!=he&&W.push(he);return W}(A)}cn.exports=function Uk(A,W){return ky(A,W)}},929:cn=>{cn.exports=ye;var Nt=null;try{Nt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function ye(Me,L,we){this.low=0|Me,this.high=0|L,this.unsigned=!!we}function ut(Me){return!0===(Me&&Me.__isLong__)}Object.defineProperty(ye.prototype,"__isLong__",{value:!0}),ye.isLong=ut;var _n={},It={};function Mt(Me,L){var we,_e,Ve;return L?(Ve=0<=(Me>>>=0)&&Me<256)&&(_e=It[Me])?_e:(we=tt(Me,(0|Me)<0?-1:0,!0),Ve&&(It[Me]=we),we):(Ve=-128<=(Me|=0)&&Me<128)&&(_e=_n[Me])?_e:(we=tt(Me,Me<0?-1:0,!1),Ve&&(_n[Me]=we),we)}function dt(Me,L){if(isNaN(Me))return L?ht:ze;if(L){if(Me<0)return ht;if(Me>=ie)return Ht}else{if(Me<=-J)return Ut;if(Me+1>=J)return $t}return Me<0?dt(-Me,L).neg():tt(Me%ee|0,Me/ee|0,L)}function tt(Me,L,we){return new ye(Me,L,we)}ye.fromInt=Mt,ye.fromNumber=dt,ye.fromBits=tt;var _t=Math.pow;function Re(Me,L,we){if(0===Me.length)throw Error("empty string");if("NaN"===Me||"Infinity"===Me||"+Infinity"===Me||"-Infinity"===Me)return ze;if("number"==typeof L?(we=L,L=!1):L=!!L,(we=we||10)<2||36<we)throw RangeError("radix");var _e;if((_e=Me.indexOf("-"))>0)throw Error("interior hyphen");if(0===_e)return Re(Me.substring(1),L,we).neg();for(var Ve=dt(_t(we,8)),qe=ze,Be=0;Be<Me.length;Be+=8){var rt=Math.min(8,Me.length-Be),Je=parseInt(Me.substring(Be,Be+rt),we);if(rt<8){var zt=dt(_t(we,rt));qe=qe.mul(zt).add(dt(Je))}else qe=(qe=qe.mul(Ve)).add(dt(Je))}return qe.unsigned=L,qe}function X(Me,L){return"number"==typeof Me?dt(Me,L):"string"==typeof Me?Re(Me,L):tt(Me.low,Me.high,"boolean"==typeof L?L:Me.unsigned)}ye.fromString=Re,ye.fromValue=X;var ee=4294967296,ie=ee*ee,J=ie/2,De=Mt(1<<24),ze=Mt(0);ye.ZERO=ze;var ht=Mt(0,!0);ye.UZERO=ht;var Et=Mt(1);ye.ONE=Et;var Ft=Mt(1,!0);ye.UONE=Ft;var Ot=Mt(-1);ye.NEG_ONE=Ot;var $t=tt(-1,2147483647,!1);ye.MAX_VALUE=$t;var Ht=tt(-1,-1,!0);ye.MAX_UNSIGNED_VALUE=Ht;var Ut=tt(0,-2147483648,!1);ye.MIN_VALUE=Ut;var Xe=ye.prototype;Xe.toInt=function(){return this.unsigned?this.low>>>0:this.low},Xe.toNumber=function(){return this.unsigned?(this.high>>>0)*ee+(this.low>>>0):this.high*ee+(this.low>>>0)},Xe.toString=function(L){if((L=L||10)<2||36<L)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(Ut)){var we=dt(L),_e=this.div(we),Ve=_e.mul(we).sub(this);return _e.toString(L)+Ve.toInt().toString(L)}return"-"+this.neg().toString(L)}for(var qe=dt(_t(L,6),this.unsigned),Be=this,rt="";;){var Je=Be.div(qe),Ct=(Be.sub(Je.mul(qe)).toInt()>>>0).toString(L);if((Be=Je).isZero())return Ct+rt;for(;Ct.length<6;)Ct="0"+Ct;rt=""+Ct+rt}},Xe.getHighBits=function(){return this.high},Xe.getHighBitsUnsigned=function(){return this.high>>>0},Xe.getLowBits=function(){return this.low},Xe.getLowBitsUnsigned=function(){return this.low>>>0},Xe.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ut)?64:this.neg().getNumBitsAbs();for(var L=0!=this.high?this.high:this.low,we=31;we>0&&!(L&1<<we);we--);return 0!=this.high?we+33:we+1},Xe.isZero=function(){return 0===this.high&&0===this.low},Xe.eqz=Xe.isZero,Xe.isNegative=function(){return!this.unsigned&&this.high<0},Xe.isPositive=function(){return this.unsigned||this.high>=0},Xe.isOdd=function(){return!(1&~this.low)},Xe.isEven=function(){return!(1&this.low)},Xe.equals=function(L){return ut(L)||(L=X(L)),(this.unsigned===L.unsigned||this.high>>>31!=1||L.high>>>31!=1)&&this.high===L.high&&this.low===L.low},Xe.eq=Xe.equals,Xe.notEquals=function(L){return!this.eq(L)},Xe.neq=Xe.notEquals,Xe.ne=Xe.notEquals,Xe.lessThan=function(L){return this.comp(L)<0},Xe.lt=Xe.lessThan,Xe.lessThanOrEqual=function(L){return this.comp(L)<=0},Xe.lte=Xe.lessThanOrEqual,Xe.le=Xe.lessThanOrEqual,Xe.greaterThan=function(L){return this.comp(L)>0},Xe.gt=Xe.greaterThan,Xe.greaterThanOrEqual=function(L){return this.comp(L)>=0},Xe.gte=Xe.greaterThanOrEqual,Xe.ge=Xe.greaterThanOrEqual,Xe.compare=function(L){if(ut(L)||(L=X(L)),this.eq(L))return 0;var we=this.isNegative(),_e=L.isNegative();return we&&!_e?-1:!we&&_e?1:this.unsigned?L.high>>>0>this.high>>>0||L.high===this.high&&L.low>>>0>this.low>>>0?-1:1:this.sub(L).isNegative()?-1:1},Xe.comp=Xe.compare,Xe.negate=function(){return!this.unsigned&&this.eq(Ut)?Ut:this.not().add(Et)},Xe.neg=Xe.negate,Xe.add=function(L){ut(L)||(L=X(L));var Ct=0,An=0,Jt=0,Mn=0;return Jt+=(Mn+=(65535&this.low)+(65535&L.low))>>>16,An+=(Jt+=(this.low>>>16)+(L.low>>>16))>>>16,Ct+=(An+=(65535&this.high)+(65535&L.high))>>>16,Ct+=(this.high>>>16)+(L.high>>>16),tt((Jt&=65535)<<16|(Mn&=65535),(Ct&=65535)<<16|(An&=65535),this.unsigned)},Xe.subtract=function(L){return ut(L)||(L=X(L)),this.add(L.neg())},Xe.sub=Xe.subtract,Xe.multiply=function(L){if(this.isZero())return ze;if(ut(L)||(L=X(L)),Nt)return tt(Nt.mul(this.low,this.high,L.low,L.high),Nt.get_high(),this.unsigned);if(L.isZero())return ze;if(this.eq(Ut))return L.isOdd()?Ut:ze;if(L.eq(Ut))return this.isOdd()?Ut:ze;if(this.isNegative())return L.isNegative()?this.neg().mul(L.neg()):this.neg().mul(L).neg();if(L.isNegative())return this.mul(L.neg()).neg();if(this.lt(De)&&L.lt(De))return dt(this.toNumber()*L.toNumber(),this.unsigned);var Ve=65535&this.high,qe=this.low>>>16,Be=65535&this.low,Je=65535&L.high,zt=L.low>>>16,Ct=65535&L.low,An=0,Jt=0,Mn=0,vi=0;return Mn+=(vi+=Be*Ct)>>>16,Jt+=(Mn+=qe*Ct)>>>16,Mn&=65535,Jt+=(Mn+=Be*zt)>>>16,An+=(Jt+=Ve*Ct)>>>16,Jt&=65535,An+=(Jt+=qe*zt)>>>16,Jt&=65535,An+=(Jt+=Be*Je)>>>16,An+=(this.high>>>16)*Ct+Ve*zt+qe*Je+Be*(L.high>>>16),tt((Mn&=65535)<<16|(vi&=65535),(An&=65535)<<16|(Jt&=65535),this.unsigned)},Xe.mul=Xe.multiply,Xe.divide=function(L){if(ut(L)||(L=X(L)),L.isZero())throw Error("division by zero");var _e,Ve,qe;if(Nt)return this.unsigned||-2147483648!==this.high||-1!==L.low||-1!==L.high?tt((this.unsigned?Nt.div_u:Nt.div_s)(this.low,this.high,L.low,L.high),Nt.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?ht:ze;if(this.unsigned){if(L.unsigned||(L=L.toUnsigned()),L.gt(this))return ht;if(L.gt(this.shru(1)))return Ft;qe=ht}else{if(this.eq(Ut))return L.eq(Et)||L.eq(Ot)?Ut:L.eq(Ut)?Et:(_e=this.shr(1).div(L).shl(1)).eq(ze)?L.isNegative()?Et:Ot:(Ve=this.sub(L.mul(_e)),qe=_e.add(Ve.div(L)));if(L.eq(Ut))return this.unsigned?ht:ze;if(this.isNegative())return L.isNegative()?this.neg().div(L.neg()):this.neg().div(L).neg();if(L.isNegative())return this.div(L.neg()).neg();qe=ze}for(Ve=this;Ve.gte(L);){_e=Math.max(1,Math.floor(Ve.toNumber()/L.toNumber()));for(var rt=Math.ceil(Math.log(_e)/Math.LN2),Je=rt<=48?1:_t(2,rt-48),zt=dt(_e),Ct=zt.mul(L);Ct.isNegative()||Ct.gt(Ve);)Ct=(zt=dt(_e-=Je,this.unsigned)).mul(L);zt.isZero()&&(zt=Et),qe=qe.add(zt),Ve=Ve.sub(Ct)}return qe},Xe.div=Xe.divide,Xe.modulo=function(L){return ut(L)||(L=X(L)),Nt?tt((this.unsigned?Nt.rem_u:Nt.rem_s)(this.low,this.high,L.low,L.high),Nt.get_high(),this.unsigned):this.sub(this.div(L).mul(L))},Xe.mod=Xe.modulo,Xe.rem=Xe.modulo,Xe.not=function(){return tt(~this.low,~this.high,this.unsigned)},Xe.and=function(L){return ut(L)||(L=X(L)),tt(this.low&L.low,this.high&L.high,this.unsigned)},Xe.or=function(L){return ut(L)||(L=X(L)),tt(this.low|L.low,this.high|L.high,this.unsigned)},Xe.xor=function(L){return ut(L)||(L=X(L)),tt(this.low^L.low,this.high^L.high,this.unsigned)},Xe.shiftLeft=function(L){return ut(L)&&(L=L.toInt()),0==(L&=63)?this:L<32?tt(this.low<<L,this.high<<L|this.low>>>32-L,this.unsigned):tt(0,this.low<<L-32,this.unsigned)},Xe.shl=Xe.shiftLeft,Xe.shiftRight=function(L){return ut(L)&&(L=L.toInt()),0==(L&=63)?this:L<32?tt(this.low>>>L|this.high<<32-L,this.high>>L,this.unsigned):tt(this.high>>L-32,this.high>=0?0:-1,this.unsigned)},Xe.shr=Xe.shiftRight,Xe.shiftRightUnsigned=function(L){if(ut(L)&&(L=L.toInt()),0==(L&=63))return this;var we=this.high;return L<32?tt(this.low>>>L|we<<32-L,we>>>L,this.unsigned):tt(32===L?we:we>>>L-32,0,this.unsigned)},Xe.shru=Xe.shiftRightUnsigned,Xe.shr_u=Xe.shiftRightUnsigned,Xe.toSigned=function(){return this.unsigned?tt(this.low,this.high,!1):this},Xe.toUnsigned=function(){return this.unsigned?this:tt(this.low,this.high,!0)},Xe.toBytes=function(L){return L?this.toBytesLE():this.toBytesBE()},Xe.toBytesLE=function(){var L=this.high,we=this.low;return[255&we,we>>>8&255,we>>>16&255,we>>>24,255&L,L>>>8&255,L>>>16&255,L>>>24]},Xe.toBytesBE=function(){var L=this.high,we=this.low;return[L>>>24,L>>>16&255,L>>>8&255,255&L,we>>>24,we>>>16&255,we>>>8&255,255&we]},ye.fromBytes=function(L,we,_e){return _e?ye.fromBytesLE(L,we):ye.fromBytesBE(L,we)},ye.fromBytesLE=function(L,we){return new ye(L[0]|L[1]<<8|L[2]<<16|L[3]<<24,L[4]|L[5]<<8|L[6]<<16|L[7]<<24,we)},ye.fromBytesBE=function(L,we){return new ye(L[4]<<24|L[5]<<16|L[6]<<8|L[7],L[0]<<24|L[1]<<16|L[2]<<8|L[3],we)}},561:(cn,Nt,ye)=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});const ut=ye(328),_n=ye(667);var It,Mt;(Mt=It||(It={})).compose=function dt(X={},ke={},de=!1){"object"!=typeof X&&(X={}),"object"!=typeof ke&&(ke={});let ee=ut(ke);de||(ee=Object.keys(ee).reduce((ie,J)=>(null!=ee[J]&&(ie[J]=ee[J]),ie),{}));for(const ie in X)void 0!==X[ie]&&void 0===ke[ie]&&(ee[ie]=X[ie]);return Object.keys(ee).length>0?ee:void 0},Mt.diff=function tt(X={},ke={}){"object"!=typeof X&&(X={}),"object"!=typeof ke&&(ke={});const de=Object.keys(X).concat(Object.keys(ke)).reduce((ee,ie)=>(_n(X[ie],ke[ie])||(ee[ie]=void 0===ke[ie]?null:ke[ie]),ee),{});return Object.keys(de).length>0?de:void 0},Mt.invert=function _t(X={},ke={}){X=X||{};const de=Object.keys(ke).reduce((ee,ie)=>(ke[ie]!==X[ie]&&void 0!==X[ie]&&(ee[ie]=ke[ie]),ee),{});return Object.keys(X).reduce((ee,ie)=>(X[ie]!==ke[ie]&&void 0===ke[ie]&&(ee[ie]=null),ee),de)},Mt.transform=function Re(X,ke,de=!1){if("object"!=typeof X)return ke;if("object"!=typeof ke)return;if(!de)return ke;const ee=Object.keys(ke).reduce((ie,J)=>(void 0===X[J]&&(ie[J]=ke[J]),ie),{});return Object.keys(ee).length>0?ee:void 0},Nt.default=It},577:(cn,Nt,ye)=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.AttributeMap=Nt.OpIterator=Nt.Op=void 0;const ut=ye(655),_n=ye(328),It=ye(667),Mt=ye(561);Nt.AttributeMap=Mt.default;const dt=ye(964);Nt.Op=dt.default;const tt=ye(366);Nt.OpIterator=tt.default;const Re=(ke,de)=>{if("object"!=typeof ke||null===ke)throw new Error("cannot retain a "+typeof ke);if("object"!=typeof de||null===de)throw new Error("cannot retain a "+typeof de);const ee=Object.keys(ke)[0];if(!ee||ee!==Object.keys(de)[0])throw new Error(`embed types not matched: ${ee} != ${Object.keys(de)[0]}`);return[ee,ke[ee],de[ee]]};class X{constructor(de){this.ops=Array.isArray(de)?de:null!=de&&Array.isArray(de.ops)?de.ops:[]}static registerEmbed(de,ee){this.handlers[de]=ee}static unregisterEmbed(de){delete this.handlers[de]}static getHandler(de){const ee=this.handlers[de];if(!ee)throw new Error(`no handlers for embed type "${de}"`);return ee}insert(de,ee){const ie={};return"string"==typeof de&&0===de.length?this:(ie.insert=de,null!=ee&&"object"==typeof ee&&Object.keys(ee).length>0&&(ie.attributes=ee),this.push(ie))}delete(de){return de<=0?this:this.push({delete:de})}retain(de,ee){if("number"==typeof de&&de<=0)return this;const ie={retain:de};return null!=ee&&"object"==typeof ee&&Object.keys(ee).length>0&&(ie.attributes=ee),this.push(ie)}push(de){let ee=this.ops.length,ie=this.ops[ee-1];if(de=_n(de),"object"==typeof ie){if("number"==typeof de.delete&&"number"==typeof ie.delete)return this.ops[ee-1]={delete:ie.delete+de.delete},this;if("number"==typeof ie.delete&&null!=de.insert&&(ee-=1,ie=this.ops[ee-1],"object"!=typeof ie))return this.ops.unshift(de),this;if(It(de.attributes,ie.attributes)){if("string"==typeof de.insert&&"string"==typeof ie.insert)return this.ops[ee-1]={insert:ie.insert+de.insert},"object"==typeof de.attributes&&(this.ops[ee-1].attributes=de.attributes),this;if("number"==typeof de.retain&&"number"==typeof ie.retain)return this.ops[ee-1]={retain:ie.retain+de.retain},"object"==typeof de.attributes&&(this.ops[ee-1].attributes=de.attributes),this}}return ee===this.ops.length?this.ops.push(de):this.ops.splice(ee,0,de),this}chop(){const de=this.ops[this.ops.length-1];return de&&"number"==typeof de.retain&&!de.attributes&&this.ops.pop(),this}filter(de){return this.ops.filter(de)}forEach(de){this.ops.forEach(de)}map(de){return this.ops.map(de)}partition(de){const ee=[],ie=[];return this.forEach(J=>{(de(J)?ee:ie).push(J)}),[ee,ie]}reduce(de,ee){return this.ops.reduce(de,ee)}changeLength(){return this.reduce((de,ee)=>ee.insert?de+dt.default.length(ee):ee.delete?de-ee.delete:de,0)}length(){return this.reduce((de,ee)=>de+dt.default.length(ee),0)}slice(de=0,ee=1/0){const ie=[],J=new tt.default(this.ops);let De=0;for(;De<ee&&J.hasNext();){let ze;De<de?ze=J.next(de-De):(ze=J.next(ee-De),ie.push(ze)),De+=dt.default.length(ze)}return new X(ie)}compose(de){const ee=new tt.default(this.ops),ie=new tt.default(de.ops),J=[],De=ie.peek();if(null!=De&&"number"==typeof De.retain&&null==De.attributes){let ht=De.retain;for(;"insert"===ee.peekType()&&ee.peekLength()<=ht;)ht-=ee.peekLength(),J.push(ee.next());De.retain-ht>0&&ie.next(De.retain-ht)}const ze=new X(J);for(;ee.hasNext()||ie.hasNext();)if("insert"===ie.peekType())ze.push(ie.next());else if("delete"===ee.peekType())ze.push(ee.next());else{const ht=Math.min(ee.peekLength(),ie.peekLength()),Et=ee.next(ht),Ft=ie.next(ht);if(Ft.retain){const Ot={};if("number"==typeof Et.retain)Ot.retain="number"==typeof Ft.retain?ht:Ft.retain;else if("number"==typeof Ft.retain)null==Et.retain?Ot.insert=Et.insert:Ot.retain=Et.retain;else{const Ht=null==Et.retain?"insert":"retain",[Ut,Xe,Me]=Re(Et[Ht],Ft.retain),L=X.getHandler(Ut);Ot[Ht]={[Ut]:L.compose(Xe,Me,"retain"===Ht)}}const $t=Mt.default.compose(Et.attributes,Ft.attributes,"number"==typeof Et.retain);if($t&&(Ot.attributes=$t),ze.push(Ot),!ie.hasNext()&&It(ze.ops[ze.ops.length-1],Ot)){const Ht=new X(ee.rest());return ze.concat(Ht).chop()}}else"number"==typeof Ft.delete&&("number"==typeof Et.retain||"object"==typeof Et.retain&&null!==Et.retain)&&ze.push(Ft)}return ze.chop()}concat(de){const ee=new X(this.ops.slice());return de.ops.length>0&&(ee.push(de.ops[0]),ee.ops=ee.ops.concat(de.ops.slice(1))),ee}diff(de,ee){if(this.ops===de.ops)return new X;const ie=[this,de].map(Et=>Et.map(Ft=>{if(null!=Ft.insert)return"string"==typeof Ft.insert?Ft.insert:"\0";throw new Error("diff() called "+(Et===de?"on":"with")+" non-document")}).join("")),J=new X,De=ut(ie[0],ie[1],ee,!0),ze=new tt.default(this.ops),ht=new tt.default(de.ops);return De.forEach(Et=>{let Ft=Et[1].length;for(;Ft>0;){let Ot=0;switch(Et[0]){case ut.INSERT:Ot=Math.min(ht.peekLength(),Ft),J.push(ht.next(Ot));break;case ut.DELETE:Ot=Math.min(Ft,ze.peekLength()),ze.next(Ot),J.delete(Ot);break;case ut.EQUAL:Ot=Math.min(ze.peekLength(),ht.peekLength(),Ft);const $t=ze.next(Ot),Ht=ht.next(Ot);It($t.insert,Ht.insert)?J.retain(Ot,Mt.default.diff($t.attributes,Ht.attributes)):J.push(Ht).delete(Ot)}Ft-=Ot}}),J.chop()}eachLine(de,ee="\n"){const ie=new tt.default(this.ops);let J=new X,De=0;for(;ie.hasNext();){if("insert"!==ie.peekType())return;const ze=ie.peek(),ht=dt.default.length(ze)-ie.peekLength(),Et="string"==typeof ze.insert?ze.insert.indexOf(ee,ht)-ht:-1;if(Et<0)J.push(ie.next());else if(Et>0)J.push(ie.next(Et));else{if(!1===de(J,ie.next(1).attributes||{},De))return;De+=1,J=new X}}J.length()>0&&de(J,{},De)}invert(de){const ee=new X;return this.reduce((ie,J)=>{if(J.insert)ee.delete(dt.default.length(J));else{if("number"==typeof J.retain&&null==J.attributes)return ee.retain(J.retain),ie+J.retain;if(J.delete||"number"==typeof J.retain){const De=J.delete||J.retain;return de.slice(ie,ie+De).forEach(ht=>{J.delete?ee.push(ht):J.retain&&J.attributes&&ee.retain(dt.default.length(ht),Mt.default.invert(J.attributes,ht.attributes))}),ie+De}if("object"==typeof J.retain&&null!==J.retain){const De=de.slice(ie,ie+1),ze=new tt.default(De.ops).next(),[ht,Et,Ft]=Re(J.retain,ze.insert),Ot=X.getHandler(ht);return ee.retain({[ht]:Ot.invert(Et,Ft)},Mt.default.invert(J.attributes,ze.attributes)),ie+1}}return ie},0),ee.chop()}transform(de,ee=!1){if(ee=!!ee,"number"==typeof de)return this.transformPosition(de,ee);const ie=de,J=new tt.default(this.ops),De=new tt.default(ie.ops),ze=new X;for(;J.hasNext()||De.hasNext();)if("insert"!==J.peekType()||!ee&&"insert"===De.peekType())if("insert"===De.peekType())ze.push(De.next());else{const ht=Math.min(J.peekLength(),De.peekLength()),Et=J.next(ht),Ft=De.next(ht);if(Et.delete)continue;if(Ft.delete)ze.push(Ft);else{const Ot=Et.retain,$t=Ft.retain;let Ht="object"==typeof $t&&null!==$t?$t:ht;if("object"==typeof Ot&&null!==Ot&&"object"==typeof $t&&null!==$t){const Ut=Object.keys(Ot)[0];if(Ut===Object.keys($t)[0]){const Xe=X.getHandler(Ut);Xe&&(Ht={[Ut]:Xe.transform(Ot[Ut],$t[Ut],ee)})}}ze.retain(Ht,Mt.default.transform(Et.attributes,Ft.attributes,ee))}}else ze.retain(dt.default.length(J.next()));return ze.chop()}transformPosition(de,ee=!1){ee=!!ee;const ie=new tt.default(this.ops);let J=0;for(;ie.hasNext()&&J<=de;){const De=ie.peekLength(),ze=ie.peekType();ie.next(),"delete"!==ze?("insert"===ze&&(J<de||!ee)&&(de+=De),J+=De):de-=Math.min(De,de-J)}return de}}X.Op=dt.default,X.OpIterator=tt.default,X.AttributeMap=Mt.default,X.handlers={},Nt.default=X,cn.exports=X,cn.exports.default=X},964:(cn,Nt)=>{"use strict";var ye;Object.defineProperty(Nt,"__esModule",{value:!0}),(ye||(ye={})).length=function _n(It){return"number"==typeof It.delete?It.delete:"number"==typeof It.retain?It.retain:"object"==typeof It.retain&&null!==It.retain?1:"string"==typeof It.insert?It.insert.length:1},Nt.default=ye},366:(cn,Nt,ye)=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});const ut=ye(964);Nt.default=class _n{constructor(Mt){this.ops=Mt,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(Mt){Mt||(Mt=1/0);const dt=this.ops[this.index];if(dt){const tt=this.offset,_t=ut.default.length(dt);if(Mt>=_t-tt?(Mt=_t-tt,this.index+=1,this.offset=0):this.offset+=Mt,"number"==typeof dt.delete)return{delete:Mt};{const Re={};return dt.attributes&&(Re.attributes=dt.attributes),"number"==typeof dt.retain?Re.retain=Mt:"object"==typeof dt.retain&&null!==dt.retain?Re.retain=dt.retain:Re.insert="string"==typeof dt.insert?dt.insert.substr(tt,Mt):dt.insert,Re}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?ut.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const Mt=this.ops[this.index];return Mt?"number"==typeof Mt.delete?"delete":"number"==typeof Mt.retain||"object"==typeof Mt.retain&&null!==Mt.retain?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);{const Mt=this.offset,dt=this.index,tt=this.next(),_t=this.ops.slice(this.index);return this.offset=Mt,this.index=dt,[tt].concat(_t)}}return[]}}},280:cn=>{"use strict";var Nt=Object.prototype.hasOwnProperty,ye="~";function ut(){}function _n(tt,_t,Re){this.fn=tt,this.context=_t,this.once=Re||!1}function It(tt,_t,Re,X,ke){if("function"!=typeof Re)throw new TypeError("The listener must be a function");var de=new _n(Re,X||tt,ke),ee=ye?ye+_t:_t;return tt._events[ee]?tt._events[ee].fn?tt._events[ee]=[tt._events[ee],de]:tt._events[ee].push(de):(tt._events[ee]=de,tt._eventsCount++),tt}function Mt(tt,_t){0==--tt._eventsCount?tt._events=new ut:delete tt._events[_t]}function dt(){this._events=new ut,this._eventsCount=0}Object.create&&(ut.prototype=Object.create(null),(new ut).__proto__||(ye=!1)),dt.prototype.eventNames=function(){var Re,X,_t=[];if(0===this._eventsCount)return _t;for(X in Re=this._events)Nt.call(Re,X)&&_t.push(ye?X.slice(1):X);return Object.getOwnPropertySymbols?_t.concat(Object.getOwnPropertySymbols(Re)):_t},dt.prototype.listeners=function(_t){var X=this._events[ye?ye+_t:_t];if(!X)return[];if(X.fn)return[X.fn];for(var ke=0,de=X.length,ee=new Array(de);ke<de;ke++)ee[ke]=X[ke].fn;return ee},dt.prototype.listenerCount=function(_t){var X=this._events[ye?ye+_t:_t];return X?X.fn?1:X.length:0},dt.prototype.emit=function(_t,Re,X,ke,de,ee){var ie=ye?ye+_t:_t;if(!this._events[ie])return!1;var ze,ht,J=this._events[ie],De=arguments.length;if(J.fn){switch(J.once&&this.removeListener(_t,J.fn,void 0,!0),De){case 1:return J.fn.call(J.context),!0;case 2:return J.fn.call(J.context,Re),!0;case 3:return J.fn.call(J.context,Re,X),!0;case 4:return J.fn.call(J.context,Re,X,ke),!0;case 5:return J.fn.call(J.context,Re,X,ke,de),!0;case 6:return J.fn.call(J.context,Re,X,ke,de,ee),!0}for(ht=1,ze=new Array(De-1);ht<De;ht++)ze[ht-1]=arguments[ht];J.fn.apply(J.context,ze)}else{var Ft,Et=J.length;for(ht=0;ht<Et;ht++)switch(J[ht].once&&this.removeListener(_t,J[ht].fn,void 0,!0),De){case 1:J[ht].fn.call(J[ht].context);break;case 2:J[ht].fn.call(J[ht].context,Re);break;case 3:J[ht].fn.call(J[ht].context,Re,X);break;case 4:J[ht].fn.call(J[ht].context,Re,X,ke);break;default:if(!ze)for(Ft=1,ze=new Array(De-1);Ft<De;Ft++)ze[Ft-1]=arguments[Ft];J[ht].fn.apply(J[ht].context,ze)}}return!0},dt.prototype.on=function(_t,Re,X){return It(this,_t,Re,X,!1)},dt.prototype.once=function(_t,Re,X){return It(this,_t,Re,X,!0)},dt.prototype.removeListener=function(_t,Re,X,ke){var de=ye?ye+_t:_t;if(!this._events[de])return this;if(!Re)return Mt(this,de),this;var ee=this._events[de];if(ee.fn)ee.fn===Re&&(!ke||ee.once)&&(!X||ee.context===X)&&Mt(this,de);else{for(var ie=0,J=[],De=ee.length;ie<De;ie++)(ee[ie].fn!==Re||ke&&!ee[ie].once||X&&ee[ie].context!==X)&&J.push(ee[ie]);J.length?this._events[de]=1===J.length?J[0]:J:Mt(this,de)}return this},dt.prototype.removeAllListeners=function(_t){var Re;return _t?this._events[Re=ye?ye+_t:_t]&&Mt(this,Re):(this._events=new ut,this._eventsCount=0),this},dt.prototype.off=dt.prototype.removeListener,dt.prototype.addListener=dt.prototype.on,dt.prefixed=ye,dt.EventEmitter=dt,cn.exports=dt},814:(cn,Nt,ye)=>{var ut=ye(495),_n=ye(850),It=ye(704),Mt=ye(114),dt=ye(40),tt=ye(478),_t=ye(454);_t.alea=ut,_t.xor128=_n,_t.xorwow=It,_t.xorshift7=Mt,_t.xor4096=dt,_t.tychei=tt,cn.exports=_t},495:function(cn,Nt,ye){var ut;!function(_n,It){function dt(X){var ke=this,de=function Re(){var X=4022871197;return function(de){de=String(de);for(var ee=0;ee<de.length;ee++){var ie=.02519603282416938*(X+=de.charCodeAt(ee));ie-=X=ie>>>0,X=(ie*=X)>>>0,X+=4294967296*(ie-=X)}return 2.3283064365386963e-10*(X>>>0)}}();ke.next=function(){var ee=2091639*ke.s0+2.3283064365386963e-10*ke.c;return ke.s0=ke.s1,ke.s1=ke.s2,ke.s2=ee-(ke.c=0|ee)},ke.c=1,ke.s0=de(" "),ke.s1=de(" "),ke.s2=de(" "),ke.s0-=de(X),ke.s0<0&&(ke.s0+=1),ke.s1-=de(X),ke.s1<0&&(ke.s1+=1),ke.s2-=de(X),ke.s2<0&&(ke.s2+=1),de=null}function tt(X,ke){return ke.c=X.c,ke.s0=X.s0,ke.s1=X.s1,ke.s2=X.s2,ke}function _t(X,ke){var de=new dt(X),ee=ke&&ke.state,ie=de.next;return ie.int32=function(){return 4294967296*de.next()|0},ie.double=function(){return ie()+11102230246251565e-32*(2097152*ie()|0)},ie.quick=ie,ee&&("object"==typeof ee&&tt(ee,de),ie.state=function(){return tt(de,{})}),ie}It&&It.exports?It.exports=_t:ye.amdD&&ye.amdO?void 0!==(ut=function(){return _t}.call(Nt,ye,Nt,It))&&(It.exports=ut):this.alea=_t}(0,cn=ye.nmd(cn))},478:function(cn,Nt,ye){var ut;!function(_n,It){function dt(Re){var X=this,ke="";X.next=function(){var ee=X.b,ie=X.c,J=X.d,De=X.a;return ee=ee<<25^ee>>>7^ie,ie=ie-J|0,J=J<<24^J>>>8^De,De=De-ee|0,X.b=ee=ee<<20^ee>>>12^ie,X.c=ie=ie-J|0,X.d=J<<16^ie>>>16^De,X.a=De-ee|0},X.a=0,X.b=0,X.c=-1640531527,X.d=1367130551,Re===Math.floor(Re)?(X.a=Re/4294967296|0,X.b=0|Re):ke+=Re;for(var de=0;de<ke.length+20;de++)X.b^=0|ke.charCodeAt(de),X.next()}function tt(Re,X){return X.a=Re.a,X.b=Re.b,X.c=Re.c,X.d=Re.d,X}function _t(Re,X){var ke=new dt(Re),de=X&&X.state,ee=function(){return(ke.next()>>>0)/4294967296};return ee.double=function(){do{var De=((ke.next()>>>11)+(ke.next()>>>0)/4294967296)/(1<<21)}while(0===De);return De},ee.int32=ke.next,ee.quick=ee,de&&("object"==typeof de&&tt(de,ke),ee.state=function(){return tt(ke,{})}),ee}It&&It.exports?It.exports=_t:ye.amdD&&ye.amdO?void 0!==(ut=function(){return _t}.call(Nt,ye,Nt,It))&&(It.exports=ut):this.tychei=_t}(0,cn=ye.nmd(cn))},850:function(cn,Nt,ye){var ut;!function(_n,It){function dt(Re){var X=this,ke="";X.x=0,X.y=0,X.z=0,X.w=0,X.next=function(){var ee=X.x^X.x<<11;return X.x=X.y,X.y=X.z,X.z=X.w,X.w^=X.w>>>19^ee^ee>>>8},Re===(0|Re)?X.x=Re:ke+=Re;for(var de=0;de<ke.length+64;de++)X.x^=0|ke.charCodeAt(de),X.next()}function tt(Re,X){return X.x=Re.x,X.y=Re.y,X.z=Re.z,X.w=Re.w,X}function _t(Re,X){var ke=new dt(Re),de=X&&X.state,ee=function(){return(ke.next()>>>0)/4294967296};return ee.double=function(){do{var De=((ke.next()>>>11)+(ke.next()>>>0)/4294967296)/(1<<21)}while(0===De);return De},ee.int32=ke.next,ee.quick=ee,de&&("object"==typeof de&&tt(de,ke),ee.state=function(){return tt(ke,{})}),ee}It&&It.exports?It.exports=_t:ye.amdD&&ye.amdO?void 0!==(ut=function(){return _t}.call(Nt,ye,Nt,It))&&(It.exports=ut):this.xor128=_t}(0,cn=ye.nmd(cn))},40:function(cn,Nt,ye){var ut;!function(_n,It){function dt(Re){var X=this;X.next=function(){var J,De,de=X.w,ee=X.X,ie=X.i;return X.w=de=de+1640531527|0,De=ee[ie+34&127],J=ee[ie=ie+1&127],De^=De<<13,J^=J<<17,De=ee[ie]=(De^=De>>>15)^(J^=J>>>12),X.i=ie,De+(de^de>>>16)|0},function ke(de,ee){var ie,J,De,ze,ht,Et=[],Ft=128;for(ee===(0|ee)?(J=ee,ee=null):(ee+="\0",J=0,Ft=Math.max(Ft,ee.length)),De=0,ze=-32;ze<Ft;++ze)ee&&(J^=ee.charCodeAt((ze+32)%ee.length)),0===ze&&(ht=J),J^=J<<10,J^=J>>>15,J^=J<<4,J^=J>>>13,ze>=0&&(De=0==(ie=Et[127&ze]^=J+(ht=ht+1640531527|0))?De+1:0);for(De>=128&&(Et[127&(ee&&ee.length||0)]=-1),De=127,ze=512;ze>0;--ze)J=Et[De+34&127],ie=Et[De=De+1&127],J^=J<<13,ie^=ie<<17,Et[De]=(J^=J>>>15)^(ie^=ie>>>12);de.w=ht,de.X=Et,de.i=De}(X,Re)}function tt(Re,X){return X.i=Re.i,X.w=Re.w,X.X=Re.X.slice(),X}function _t(Re,X){null==Re&&(Re=+new Date);var ke=new dt(Re),de=X&&X.state,ee=function(){return(ke.next()>>>0)/4294967296};return ee.double=function(){do{var De=((ke.next()>>>11)+(ke.next()>>>0)/4294967296)/(1<<21)}while(0===De);return De},ee.int32=ke.next,ee.quick=ee,de&&(de.X&&tt(de,ke),ee.state=function(){return tt(ke,{})}),ee}It&&It.exports?It.exports=_t:ye.amdD&&ye.amdO?void 0!==(ut=function(){return _t}.call(Nt,ye,Nt,It))&&(It.exports=ut):this.xor4096=_t}(0,cn=ye.nmd(cn))},114:function(cn,Nt,ye){var ut;!function(_n,It){function dt(Re){var X=this;X.next=function(){var ie,J,de=X.x,ee=X.i;return ie=de[ee],J=(ie^=ie>>>7)^ie<<24,J^=(ie=de[ee+1&7])^ie>>>10,J^=(ie=de[ee+3&7])^ie>>>3,J^=(ie=de[ee+4&7])^ie<<7,ie=de[ee+7&7],de[ee]=J^=(ie^=ie<<13)^ie<<9,X.i=ee+1&7,J},function ke(de,ee){var ie,De=[];if(ee===(0|ee))De[0]=ee;else for(ee=""+ee,ie=0;ie<ee.length;++ie)De[7&ie]=De[7&ie]<<15^ee.charCodeAt(ie)+De[ie+1&7]<<13;for(;De.length<8;)De.push(0);for(ie=0;ie<8&&0===De[ie];++ie);for(8==ie&&(De[7]=-1),de.x=De,de.i=0,ie=256;ie>0;--ie)de.next()}(X,Re)}function tt(Re,X){return X.x=Re.x.slice(),X.i=Re.i,X}function _t(Re,X){null==Re&&(Re=+new Date);var ke=new dt(Re),de=X&&X.state,ee=function(){return(ke.next()>>>0)/4294967296};return ee.double=function(){do{var De=((ke.next()>>>11)+(ke.next()>>>0)/4294967296)/(1<<21)}while(0===De);return De},ee.int32=ke.next,ee.quick=ee,de&&(de.x&&tt(de,ke),ee.state=function(){return tt(ke,{})}),ee}It&&It.exports?It.exports=_t:ye.amdD&&ye.amdO?void 0!==(ut=function(){return _t}.call(Nt,ye,Nt,It))&&(It.exports=ut):this.xorshift7=_t}(0,cn=ye.nmd(cn))},704:function(cn,Nt,ye){var ut;!function(_n,It){function dt(Re){var X=this,ke="";X.next=function(){var ee=X.x^X.x>>>2;return X.x=X.y,X.y=X.z,X.z=X.w,X.w=X.v,(X.d=X.d+362437|0)+(X.v=X.v^X.v<<4^ee^ee<<1)|0},X.x=0,X.y=0,X.z=0,X.w=0,X.v=0,Re===(0|Re)?X.x=Re:ke+=Re;for(var de=0;de<ke.length+64;de++)X.x^=0|ke.charCodeAt(de),de==ke.length&&(X.d=X.x<<10^X.x>>>4),X.next()}function tt(Re,X){return X.x=Re.x,X.y=Re.y,X.z=Re.z,X.w=Re.w,X.v=Re.v,X.d=Re.d,X}function _t(Re,X){var ke=new dt(Re),de=X&&X.state,ee=function(){return(ke.next()>>>0)/4294967296};return ee.double=function(){do{var De=((ke.next()>>>11)+(ke.next()>>>0)/4294967296)/(1<<21)}while(0===De);return De},ee.int32=ke.next,ee.quick=ee,de&&("object"==typeof de&&tt(de,ke),ee.state=function(){return tt(ke,{})}),ee}It&&It.exports?It.exports=_t:ye.amdD&&ye.amdO?void 0!==(ut=function(){return _t}.call(Nt,ye,Nt,It))&&(It.exports=ut):this.xorwow=_t}(0,cn=ye.nmd(cn))},454:function(cn,Nt,ye){var ut;!function(_n,It,Mt){var ie,dt=256,X=Mt.pow(dt,6),ke=Mt.pow(2,52),de=2*ke,ee=dt-1;function J($t,Ht,Ut){var Xe=[],Me=Et(ht((Ht=1==Ht?{entropy:!0}:Ht||{}).entropy?[$t,Ot(It)]:$t??function Ft(){try{var $t;return ie&&($t=ie.randomBytes)?$t=$t(dt):($t=new Uint8Array(dt),(_n.crypto||_n.msCrypto).getRandomValues($t)),Ot($t)}catch{var Ht=_n.navigator,Ut=Ht&&Ht.plugins;return[+new Date,_n,Ut,_n.screen,Ot(It)]}}(),3),Xe),L=new De(Xe),we=function(){for(var _e=L.g(6),Ve=X,qe=0;_e<ke;)_e=(_e+qe)*dt,Ve*=dt,qe=L.g(1);for(;_e>=de;)_e/=2,Ve/=2,qe>>>=1;return(_e+qe)/Ve};return we.int32=function(){return 0|L.g(4)},we.quick=function(){return L.g(4)/4294967296},we.double=we,Et(Ot(L.S),It),(Ht.pass||Ut||function(_e,Ve,qe,Be){return Be&&(Be.S&&ze(Be,L),_e.state=function(){return ze(L,{})}),qe?(Mt.random=_e,Ve):_e})(we,Me,"global"in Ht?Ht.global:this==Mt,Ht.state)}function De($t){var Ht,Ut=$t.length,Xe=this,Me=0,L=Xe.i=Xe.j=0,we=Xe.S=[];for(Ut||($t=[Ut++]);Me<dt;)we[Me]=Me++;for(Me=0;Me<dt;Me++)we[Me]=we[L=ee&L+$t[Me%Ut]+(Ht=we[Me])],we[L]=Ht;(Xe.g=function(_e){for(var Ve,qe=0,Be=Xe.i,rt=Xe.j,Je=Xe.S;_e--;)Ve=Je[Be=ee&Be+1],qe=qe*dt+Je[ee&(Je[Be]=Je[rt=ee&rt+Ve])+(Je[rt]=Ve)];return Xe.i=Be,Xe.j=rt,qe})(dt)}function ze($t,Ht){return Ht.i=$t.i,Ht.j=$t.j,Ht.S=$t.S.slice(),Ht}function ht($t,Ht){var Me,Ut=[],Xe=typeof $t;if(Ht&&"object"==Xe)for(Me in $t)try{Ut.push(ht($t[Me],Ht-1))}catch{}return Ut.length?Ut:"string"==Xe?$t:$t+"\0"}function Et($t,Ht){for(var Xe,Ut=$t+"",Me=0;Me<Ut.length;)Ht[ee&Me]=ee&(Xe^=19*Ht[ee&Me])+Ut.charCodeAt(Me++);return Ot(Ht)}function Ot($t){return String.fromCharCode.apply(0,$t)}if(Et(Mt.random(),It),cn.exports){cn.exports=J;try{ie=ye(234)}catch{}}else void 0!==(ut=function(){return J}.call(Nt,ye,Nt,cn))&&(cn.exports=ut)}(typeof self<"u"?self:this,[],Math)},817:()=>{},590:()=>{},530:()=>{},108:()=>{},551:()=>{},234:()=>{}},cn=>{cn(cn.s=785)}]);