{"version":3,"file":"apps_concierge_src_app_visitors_visitors_module_ts.js","mappings":"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","names":["VisitorInductionModalComponent","induction_details","this","_settings","get","is_enabled","constructor","agree","static","t","i0","i1","core","VBU","selectors","decls","vars","consts","template","rf","ctx","$event","VisitorsStateService","AsyncHandler","search","_search","getValue","time_format","_dialog","_org","super","_poll","BehaviorSubject","_filters","_loading","loading","asObservable","filters","bookings","combineLatest","active_building","pipe","filter","building","debounceTime","switchMap","bld","next","date","Date","start","startOfDay","end","addDays","period","queryBookings","type","period_start","getUnixTime","period_end","zones","join","id","include_checked_out","limit","catchError","_","of","tap","shareReplay","filtered_bookings","map","guest_list","toLowerCase","asset_name","includes","user_name","user_email","asset_id","sort","a","b","setFilters","setSearchString","poll","now","startPolling","delay","interval","stopPolling","clearInterval","setExt","guest","field","value","_this","_asyncToGenerator","extension_data","updateGuest","toPromise","approveVisitor","item","_this2","details","openConfirmModal","title","content","icon","reason","close","approveBooking","catch","e","notifyError","message","error","notifySuccess","declineVisitor","_this3","rejectBooking","requestInduction","_this4","result","open","data","afterClosed","setBookingState","setCheckinState","state","_this5","rejected","approved","checkinBooking","setCheckinStateForEvent","event_id","_this6","event_bookings","take","parent_id","linked_event","length","Promise","all","downloadVisitorsList","_this7","list","Name","Email","checked_in","Host","Status","status","format","jsonToCsv","downloadFile","i2","i3","jDH","factory","ɵfac","providedIn","level_r1","display_name","name","VisitorsTopbarComponent","_state","_route","_router","levels","active_levels","setDate","setSearch","str","updateZones","navigate","relativeTo","queryParams","zone_ids","ngOnInit","initialised","first","subscription","queryParamMap","subscribe","params","has","split","level","levelWithID","buildings","find","zone","lvl","push","features","VisitorsTopbarComponent_mat_option_3_Template","tmp_2_0","row_r1","checked_out_at","ctx_r1","GuestListingComponent_ng_template_4_div_0_Template","GuestListingComponent_ng_template_4_div_1_Template","GuestListingComponent_ng_template_4_div_2_Template","row_r3","host","row_r4","id_confirmed","_r5","row","id_data","url","GuestListingComponent_ng_template_8_button_1_Template","GuestListingComponent_ng_template_8_ng_template_2_Template","id_confirmation_r6","GuestListingComponent_ng_template_10_div_0_Template","GuestListingComponent_ng_template_10_div_1_Template","GuestListingComponent_ng_template_10_div_2_Template","row_r7","induction","process_state","GuestListingComponent_ng_template_12_app_icon_4_Template","row_r9","_r8","menu_r10","row_r11","tmp_9_0","item_r14","row_r13","_r12","checkinAllVisitors","checkoutAllVisitors","GuestListingComponent_ng_template_16_a_23_Template","remote","checkin","checkout","printQRCode","checkin_menu_r15","attachments","menu_r16","can_print","_r17","downloadVisitorList","GuestListingComponent","columns","_inductions_enabled","display_columns","fields","actions","column_sizes","guests","console","log","u","f","v","_ref","_x","apply","arguments","_ref2","_x2","_ref3","visitor_kiosk_app","metadata","showMetadata","induction_enabled","_x3","GuestListingComponent_ng_template_4_Template","GuestListingComponent_ng_template_6_Template","GuestListingComponent_ng_template_8_Template","GuestListingComponent_ng_template_10_Template","GuestListingComponent_ng_template_12_Template","GuestListingComponent_ng_template_14_Template","GuestListingComponent_ng_template_16_Template","GuestListingComponent_button_18_Template","_c0","state_template_r18","status_template_r22","date_template_r23","host_template_r19","id_template_r20","action_template_r24","boolean_template_r21","tmp_14_0","VisitorsComponent","ngOnDestroy","attrs","VisitorsComponent_mat_progress_bar_4_Template","InviteVisitorModalComponent","_dialog_ref","onDone","tmp_3_0","NewVisitorsComponent_mat_option_15_div_2_Template","use_region","ROUTES","path","component","NewVisitorsComponent","active_region","region","levelsForRegion","levelsForBuilding","inviteVisitor","i4","i5","NewVisitorsComponent_mat_option_15_Template","NewVisitorsComponent_mat_progress_bar_21_Template","tmp_0_0","VisitorsModule","$C","G2t","CommonModule","FormsModule","UIModule","SharedBookingsModule","RouterModule","forChild","MapLocation","_data","location","position","map_id","x","map_width","y","map_height","variance","last_seen","at_location","coordinates_from"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./apps/concierge/src/app/visitors/visitor-induction-modal.component.ts","./apps/concierge/src/app/visitors/visitors-state.service.ts","./apps/concierge/src/app/visitors/visitors-topbar.component.ts","./apps/concierge/src/app/visitors/guest-listing.component.ts","./apps/concierge/src/app/visitors/visitors.component.ts","./apps/concierge/src/app/visitors/invite-visitor-modal.component.ts","./apps/concierge/src/app/visitors/new-visitors.component.ts","./apps/concierge/src/app/visitors/visitors.module.ts","./libs/users/src/lib/location.class.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { SettingsService } from '@placeos/common';\n\n@Component({\n    selector: 'visitor-induction-modal',\n    template: `\n        <div\n            class=\"relative bg-base-100 rounded shadow overflow-hidden flex flex-col items-center w-[32rem] p-4\"\n        >\n            <p class=\"my-4\">\n                Please read the induction information below before proceeding\n            </p>\n            <div\n                class=\"rounded border border-base-300 w-full p-4 opacity-60 text-sm overflow-y-auto overflow-x-hidden max-h-[50vh] whitespace-pre-wrap\"\n            >\n                {{ induction_details }}\n            </div>\n            <mat-checkbox [(ngModel)]=\"agree\" class=\"my-4\">\n                I agree\n            </mat-checkbox>\n            <div class=\"flex items-center justify-center space-x-2\">\n                <button\n                    btn\n                    matRipple\n                    class=\"w-32 clear underline\"\n                    [mat-dialog-close]=\"false\"\n                >\n                    Decline\n                </button>\n                <button\n                    btn\n                    matRipple\n                    class=\"w-32\"\n                    [disabled]=\"!agree\"\n                    [mat-dialog-close]=\"true\"\n                >\n                    Accept\n                </button>\n            </div>\n        </div>\n    `,\n    styles: [``],\n})\nexport class VisitorInductionModalComponent {\n    public agree = false;\n\n    public get induction_details() {\n        return this._settings.get('app.induction_details');\n    }\n\n    public get is_enabled() {\n        return (\n            this._settings.get('app.induction_enabled') &&\n            this._settings.get('app.induction_details')\n        );\n    }\n\n    constructor(private _settings: SettingsService) {}\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, combineLatest, of } from 'rxjs';\nimport {\n    catchError,\n    debounceTime,\n    filter,\n    map,\n    shareReplay,\n    switchMap,\n    take,\n    tap,\n} from 'rxjs/operators';\nimport { startOfDay, getUnixTime, addDays, format } from 'date-fns';\n\nimport {\n    AsyncHandler,\n    SettingsService,\n    downloadFile,\n    jsonToCsv,\n    notifyError,\n    notifySuccess,\n    openConfirmModal,\n} from '@placeos/common';\nimport { GuestUser, updateGuest } from '@placeos/users';\nimport { MatDialog } from '@angular/material/dialog';\nimport {\n    Booking,\n    approveBooking,\n    checkinBooking,\n    queryBookings,\n    rejectBooking,\n    setBookingState,\n} from '@placeos/bookings';\nimport { OrganisationService } from '@placeos/organisation';\nimport { SpacePipe } from '@placeos/spaces';\nimport { VisitorInductionModalComponent } from './visitor-induction-modal.component';\n\nexport interface VisitorFilters {\n    date?: number;\n    zones?: string[];\n    all_bookings?: boolean;\n    period?: number;\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class VisitorsStateService extends AsyncHandler {\n    private _poll = new BehaviorSubject<number>(0);\n\n    private _filters = new BehaviorSubject<VisitorFilters>({});\n\n    private _search = new BehaviorSubject<string>('');\n\n    private _loading = new BehaviorSubject<boolean>(false);\n\n    public readonly loading = this._loading.asObservable();\n\n    public readonly filters = this._filters.asObservable();\n\n    public readonly bookings = combineLatest([\n        this._org.active_building,\n        this._filters,\n        this._poll,\n    ]).pipe(\n        filter(([building]) => !!building),\n        debounceTime(150),\n        switchMap(([bld, filters]) => {\n            this._loading.next(true);\n            const date = filters.date ? new Date(filters.date) : new Date();\n            const start = startOfDay(date);\n            const end = addDays(start, filters.period || 1);\n            return queryBookings({\n                type: 'visitor',\n                period_start: getUnixTime(start),\n                period_end: getUnixTime(end),\n                zones: (filters.zones || []).join(',') || bld.id,\n                include_checked_out: true,\n                limit: 1000,\n            }).pipe(catchError((_) => of([] as Booking[])));\n        }),\n        tap(() => this._loading.next(false)),\n        shareReplay(1)\n    );\n\n    public readonly filtered_bookings = combineLatest([\n        this._search,\n        this.bookings,\n    ]).pipe(\n        map(([search, guest_list]) => {\n            const filter = search.toLowerCase();\n            const out = guest_list\n                .filter(\n                    (_) =>\n                        _.asset_name?.toLowerCase().includes(filter) ||\n                        _.user_name?.toLowerCase().includes(filter) ||\n                        _.user_email?.toLowerCase().includes(filter) ||\n                        _.asset_id?.toLowerCase().includes(filter)\n                )\n                .sort((a, b) => a.date - b.date);\n            return out;\n        })\n    );\n\n    public get search() {\n        return this._search.getValue();\n    }\n\n    public get time_format() {\n        return this._settings.time_format;\n    }\n\n    constructor(\n        private _dialog: MatDialog,\n        private _org: OrganisationService,\n        private _settings: SettingsService\n    ) {\n        super();\n    }\n\n    public setFilters(filters: VisitorFilters) {\n        this._filters.next({ ...this._filters.getValue(), ...filters });\n    }\n\n    public setSearchString(search: string) {\n        this._search.next(search);\n    }\n\n    public poll() {\n        this._poll.next(Date.now());\n    }\n\n    public startPolling(delay: number = 30 * 1000) {\n        this.interval('poll', () => this._poll.next(Date.now()), delay);\n    }\n\n    public stopPolling() {\n        this.clearInterval('poll');\n    }\n\n    public async setExt<T = any>(guest: GuestUser, field: string, value: T) {\n        const extension_data = { ...guest.extension_data };\n        extension_data[field] = value;\n        await updateGuest(guest.id, { ...guest, extension_data }).toPromise();\n        this._poll.next(Date.now());\n    }\n\n    public async approveVisitor(item: Booking) {\n        const details = await openConfirmModal(\n            {\n                title: 'Approve Visitor',\n                content: `Approve attendance of ${\n                    item.asset_name || item.asset_id\n                } to their meeting?`,\n                icon: { content: 'event_available' },\n            },\n            this._dialog\n        );\n        if (details.reason !== 'done') return details.close();\n        details.loading('Updating guest details');\n        await (approveBooking(item.id) as any).toPromise().catch((e) => {\n            notifyError(\n                `Error approving visitor: ${e.message || e.error || e}`\n            );\n            details.close();\n            throw e;\n        });\n        notifySuccess(`Successfully approved visitor`);\n        this._poll.next(Date.now());\n        details.close();\n    }\n\n    public async declineVisitor(item: Booking) {\n        const details = await openConfirmModal(\n            {\n                title: 'Decline Visitor',\n                content: `Decline attendance of ${\n                    item.asset_name || item.asset_id\n                } to their meeting?`,\n                icon: { content: 'event_available' },\n            },\n            this._dialog\n        );\n        if (details.reason !== 'done') return details.close();\n        details.loading('Updating guest details');\n        await rejectBooking(item.id)\n            .toPromise()\n            .catch((e) => {\n                notifyError(\n                    `Error declining visitor: ${e.message || e.error || e}`\n                );\n                details.close();\n                throw e;\n            });\n        notifySuccess(`Successfully declining visitor`);\n        this._poll.next(Date.now());\n        details.close();\n    }\n\n    public async requestInduction(item: Booking) {\n        const ref = this._dialog.open(VisitorInductionModalComponent, {\n            data: { item },\n        });\n        const result = await ref.afterClosed().toPromise();\n        if (!result) {\n            if (result === false) {\n                await setBookingState(\n                    item.id,\n                    'declined_induction'\n                ).toPromise();\n            }\n            throw 'User declined';\n        }\n        await setBookingState(item.id, 'inducted').toPromise();\n    }\n\n    public async setCheckinState(item: Booking, state = true) {\n        if (item.rejected) throw 'You cannot check in a rejected meeting';\n        if (state === true) {\n            await this.requestInduction(item);\n        }\n        if (!item.approved && state === true) {\n            await approveBooking(item.id).toPromise();\n        }\n        const new_user = await checkinBooking(item.id, state)\n            .toPromise()\n            .catch((e) => {\n                notifyError(\n                    `Error checking ${state ? 'in' : 'out'} ${\n                        item.asset_name || item.asset_id\n                    } for ${item.user_name}'s meeting`\n                );\n                throw e;\n            });\n        notifySuccess(\n            `Successfully checked ${state ? 'in' : 'out'} ${\n                item.asset_name || item.asset_id\n            } from ${item.user_name}'s meeting`\n        );\n    }\n\n    public async setCheckinStateForEvent(event_id: string, state = true) {\n        if (!event_id) return;\n        const bookings = await this.bookings.pipe(take(1)).toPromise();\n        const event_bookings = bookings.filter(\n            (_) =>\n                _.parent_id === event_id ||\n                _.extension_data.parent_id === event_id ||\n                _.linked_event?.id === event_id ||\n                _.linked_event?.event_id === event_id\n        );\n        if (!event_bookings.length) return;\n        await Promise.all(\n            event_bookings.map((_) =>\n                checkinBooking(_.id, state)\n                    .toPromise()\n                    .catch((e) => {\n                        notifyError(\n                            `Error checking ${state ? 'in' : 'out'} ${\n                                _.asset_name || _.asset_id\n                            } for ${_.user_name}'s meeting`\n                        );\n                        throw e;\n                    })\n            )\n        );\n        notifySuccess(\n            `Successfully checked ${state ? 'in' : 'out'} all visitors from ${\n                event_bookings[0].user_name\n            }'s meeting`\n        );\n        this._poll.next(Date.now());\n    }\n\n    public async downloadVisitorsList() {\n        const bookings = await this.filtered_bookings.pipe(take(1)).toPromise();\n        if (!bookings.length) return;\n        const { date } = this._filters.getValue();\n        const list = bookings.map((_) => ({\n            Name: _.asset_name,\n            Email: _.asset_id,\n            'Checked In': _.checked_in,\n            Host: _.user_email || '',\n            Status: _.status,\n            Date: format(_.date, 'dd MMM ' + this.time_format),\n        }));\n        const data = jsonToCsv(list);\n        downloadFile(\n            `visitor-list-${format(date || Date.now(), 'MMM-dd')}.csv`,\n            data\n        );\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { first } from 'rxjs/operators';\n\nimport { AsyncHandler } from '@placeos/common';\nimport { OrganisationService } from '@placeos/organisation';\nimport { VisitorsStateService } from './visitors-state.service';\n\n@Component({\n    selector: 'visitors-topbar',\n    template: `\n        <div\n            class=\"flex items-center bg-base-100 h-20 px-4 border-b border-base-200 space-x-2\"\n        >\n            <mat-form-field appearance=\"outline\">\n                <mat-select\n                    multiple\n                    [(ngModel)]=\"zones\"\n                    (ngModelChange)=\"updateZones($event)\"\n                    placeholder=\"All Levels\"\n                >\n                    <mat-option\n                        *ngFor=\"let level of levels | async\"\n                        [value]=\"level.id\"\n                    >\n                        {{ level.display_name || level.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field appearance=\"outline\">\n                <mat-select\n                    [ngModel]=\"(filters | async)?.period || 1\"\n                    (ngModelChange)=\"setFilters({ period: $event })\"\n                    placeholder=\"Viewing Period\"\n                >\n                    <mat-option [value]=\"1\">Show Day</mat-option>\n                    <mat-option [value]=\"7\">Show Week</mat-option>\n                    <mat-option [value]=\"30\">Show Month</mat-option>\n                </mat-select>\n            </mat-form-field>\n            <div class=\"flex-1 w-2\"></div>\n            <searchbar\n                class=\"mr-2\"\n                (modelChange)=\"setSearch($event)\"\n            ></searchbar>\n            <date-options (dateChange)=\"setDate($event)\"></date-options>\n        </div>\n    `,\n    styles: [\n        `\n            mat-form-field {\n                height: 3.25em;\n                width: 8em;\n            }\n        `,\n    ],\n})\nexport class VisitorsTopbarComponent extends AsyncHandler implements OnInit {\n    /** List of selected levels */\n    public zones: string[] = [];\n    /** List of levels for the active building */\n    public readonly levels = this._org.active_levels;\n\n    public readonly filters = this._state.filters;\n    /** Set filtered date */\n    public readonly setDate = (date) => this._state.setFilters({ date });\n    /** Set filtered date */\n    public readonly setFilters = (filters) => this._state.setFilters(filters);\n    /** Set filter string */\n    public readonly setSearch = (str) => this._state.setSearchString(str);\n    /** Update active zones for desks */\n    public readonly updateZones = (zones) => {\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: { zone_ids: zones.join(',') },\n        });\n        this._state.setFilters({ zones });\n    };\n\n    constructor(\n        private _state: VisitorsStateService,\n        private _org: OrganisationService,\n        private _route: ActivatedRoute,\n        private _router: Router\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe((params) => {\n                if (params.has('zone_ids')) {\n                    const zones = params.get('zone_ids').split(',');\n                    if (zones.length) {\n                        const level = this._org.levelWithID(zones);\n                        this.zones = zones;\n                        if (!level) return;\n                        this._org.building = this._org.buildings.find(\n                            (bld) => bld.id === level.parent_id\n                        );\n                    }\n                }\n            })\n        );\n        this.subscription(\n            'levels',\n            this._org.active_levels.subscribe((levels) => {\n                this.zones = this.zones.filter((zone) =>\n                    levels.find((lvl) => lvl.id === zone)\n                );\n                if (!this.zones.length && levels.length) {\n                    this.zones.push(levels[0].id);\n                }\n                this.updateZones(this.zones);\n            })\n        );\n        this.setSearch('');\n    }\n}\n","import { Component } from '@angular/core';\nimport { AsyncHandler, SettingsService, notifyError } from '@placeos/common';\nimport { VisitorsStateService } from './visitors-state.service';\nimport { Booking } from '@placeos/bookings';\nimport { showMetadata } from '@placeos/ts-client';\nimport { OrganisationService } from '@placeos/organisation';\nimport { tap } from 'rxjs/operators';\n\n@Component({\n    selector: 'guest-listings',\n    template: `\n        <div\n            class=\"w-full flex flex-col flex-1 text-sm h-full overflow-auto pb-20\"\n        >\n            <custom-table\n                class=\"min-w-[80rem]\"\n                [dataSource]=\"guests\"\n                [filter]=\"search | async\"\n                [columns]=\"columns\"\n                [display_column]=\"display_columns\"\n                [column_size]=\"column_sizes\"\n                [template]=\"{\n                    state: state_template,\n                    status: status_template,\n                    date: date_template,\n                    host: host_template,\n                    id_data: id_template,\n                    actions: action_template,\n                    induction: boolean_template\n                }\"\n                [empty]=\"\n                    (search | async)\n                        ? 'No matching visitors'\n                        : 'There are visitors for the currently selected date.'\n                \"\n            ></custom-table>\n        </div>\n        <ng-template #state_template let-row=\"row\">\n            <div\n                *ngIf=\"!row?.checked_in && row.checked_out_at\"\n                class=\"rounded h-8 w-8 flex items-center justify-center text-2xl bg-base-400 text-neutral-content mx-auto\"\n                [matTooltip]=\"\n                    'Checked out at ' + (row.checked_out_at | date: time_format)\n                \"\n                matTooltipPosition=\"right\"\n            >\n                <app-icon>done</app-icon>\n            </div>\n            <div\n                *ngIf=\"!row?.checked_in && !row.checked_out_at\"\n                class=\"rounded h-8 w-8 flex items-center justify-center text-2xl bg-warning text-warning-content mx-auto\"\n                matTooltip=\"Not checked in\"\n                matTooltipPosition=\"right\"\n            >\n                <app-icon>question_mark</app-icon>\n            </div>\n            <div\n                *ngIf=\"row?.checked_in\"\n                class=\"rounded h-8 w-8 flex items-center justify-center text-2xl bg-success text-success-content mx-auto\"\n                matTooltip=\"Checked In\"\n                matTooltipPosition=\"right\"\n            >\n                <app-icon>done</app-icon>\n            </div>\n        </ng-template>\n        <ng-template #host_template let-row=\"row\">\n            {{ row.extension_data?.host }}\n        </ng-template>\n        <ng-template #id_template let-row=\"row\">\n            <div customTooltip [content]=\"id_confirmation\">\n                <button\n                    matRipple\n                    *ngIf=\"row.extension_data?.id_data?.url\"\n                    class=\"bg-success rounded-3xl px-4 py-2 text-white\"\n                >\n                    {{\n                        row.extension_data?.id_confirmed\n                            ? 'Confirmed'\n                            : row.extension_data?.id_confirmed === false\n                            ? 'Rejected'\n                            : 'Submitted'\n                    }}\n                </button>\n            </div>\n            <ng-template #id_confirmation>\n                <div\n                    class=\"bg-base-100 rounded p-2 flex flex-col space-y-2 my-2 w-[20rem]\"\n                >\n                    <img\n                        [src]=\"row.extension_data?.id_data?.url\"\n                        class=\"max-w-[20rem] max-h-[20rem] object-contain\"\n                    />\n                    <button\n                        matRipple\n                        (click)=\"setExt(row, 'id_confirmed', true)\"\n                    >\n                        Confirm ID\n                    </button>\n                    <button\n                        matRipple\n                        class=\"inverse mt-2\"\n                        (click)=\"setExt(row, 'id_confirmed', false)\"\n                    >\n                        Reject ID\n                    </button>\n                </div>\n            </ng-template>\n        </ng-template>\n        <ng-template #boolean_template let-row=\"row\">\n            <div\n                *ngIf=\"row.induction\"\n                class=\"rounded h-8 w-8 flex items-center justify-center text-2xl bg-success text-success-content mx-auto\"\n            >\n                <app-icon>done</app-icon>\n            </div>\n            <div\n                *ngIf=\"\n                    !row.induction && !row.process_state.includes('declined')\n                \"\n                class=\"rounded h-8 w-8 flex items-center justify-center text-2xl bg-warning text-warning-content mx-auto\"\n            >\n                <app-icon>question_mark</app-icon>\n            </div>\n            <div\n                *ngIf=\"!row.induction && row.process_state.includes('declined')\"\n                class=\"rounded h-8 w-8 flex items-center justify-center text-2xl bg-error text-error-content mx-auto\"\n            >\n                <app-icon>close</app-icon>\n            </div>\n        </ng-template>\n        <ng-template #status_template let-row=\"row\">\n            <button\n                matRipple\n                class=\"rounded-3xl bg-warning text-warning-content border-none h-8 w-28\"\n                [class.!text-success-content]=\"row?.status === 'approved'\"\n                [class.!bg-success]=\"row?.status === 'approved'\"\n                [class.!text-error-content]=\"row?.status === 'declined'\"\n                [class.!bg-error]=\"row?.status === 'declined'\"\n                [class.!text-neutral-content]=\"row?.status === 'ended'\"\n                [class.!bg-neutral]=\"row?.status === 'ended'\"\n                [class.opacity-60]=\"row?.status === 'ended'\"\n                [matMenuTriggerFor]=\"menu\"\n                [disabled]=\"\n                    row?.status === 'ended' ||\n                    (row.checked_in && !row.checked_out_at)\n                \"\n            >\n                <div class=\"flex items-center px-2\">\n                    <div class=\"mx-2 flex-1 text-left\">\n                        {{\n                            row?.status === 'ended'\n                                ? 'Ended'\n                                : row?.status === 'approved'\n                                ? 'Approved'\n                                : row?.status === 'declined'\n                                ? 'Declined'\n                                : 'Pending'\n                        }}\n                    </div>\n                    <app-icon\n                        class=\"text-2xl\"\n                        *ngIf=\"\n                            !(\n                                row?.status === 'ended' ||\n                                (row.checked_in && !row.checked_out_at)\n                            )\n                        \"\n                        >arrow_drop_down</app-icon\n                    >\n                </div>\n            </button>\n            <mat-menu #menu=\"matMenu\">\n                <button\n                    mat-menu-item\n                    class=\"flex items-center\"\n                    (click)=\"approveVisitor(row)\"\n                >\n                    <div class=\"flex items-center space-x-2 pr-2\">\n                        <app-icon class=\"text-2xl\">event_available</app-icon>\n                        <div>Approve Visitor</div>\n                    </div>\n                </button>\n                <button\n                    mat-menu-item\n                    class=\"flex items-center\"\n                    (click)=\"declineVisitor(row)\"\n                >\n                    <div class=\"flex items-center space-x-2 pr-2\">\n                        <app-icon class=\"text-2xl text-error\">\n                            event_busy\n                        </app-icon>\n                        <div>Decline Visitor</div>\n                    </div>\n                </button>\n            </mat-menu>\n        </ng-template>\n        <ng-template #date_template let-row=\"row\">\n            {{\n                row.date\n                    | date\n                        : ((filters | async)?.period > 1\n                              ? 'MMM d, ' + time_format\n                              : time_format)\n            }}\n        </ng-template>\n        <ng-template #action_template let-row=\"row\">\n            <div class=\"flex items-center justify-end\">\n                <button\n                    icon\n                    matRipple\n                    [class.pointer-events-none]=\"!row.linked_event\"\n                    [matMenuTriggerFor]=\"checkin_menu\"\n                >\n                    <app-icon\n                        class=\"text-2xl\"\n                        [class.opacity-0]=\"!row.linked_event\"\n                    >\n                        event\n                    </app-icon>\n                </button>\n                <mat-menu #checkin_menu=\"matMenu\">\n                    <button mat-menu-item (click)=\"checkinAllVisitors(row)\">\n                        <div class=\"flex items-center space-x-2\">\n                            <app-icon class=\"text-2xl\">\n                                event_available\n                            </app-icon>\n                            <div>Checkin All for Booking</div>\n                        </div>\n                    </button>\n                    <button mat-menu-item (click)=\"checkoutAllVisitors(row)\">\n                        <div class=\"flex items-center space-x-2\">\n                            <app-icon class=\"text-2xl\">event_busy</app-icon>\n                            <div>Checkout All for Booking</div>\n                        </div>\n                    </button>\n                </mat-menu>\n                <button\n                    icon\n                    matRipple\n                    [disabled]=\"!row.attachments?.length\"\n                    title=\"\"\n                    matTooltip=\"View Attachments\"\n                    [matMenuTriggerFor]=\"menu\"\n                >\n                    <app-icon>attachment</app-icon>\n                </button>\n                <mat-menu #menu=\"matMenu\">\n                    <a\n                        *ngFor=\"let item of row.attachments\"\n                        [href]=\"item.url\"\n                        mat-menu-item\n                        >{{ item.name }}</a\n                    >\n                </mat-menu>\n                <action-icon\n                    remote\n                    [matTooltip]=\"\n                        row.extension_data.remote\n                            ? 'Set as In-Person Visitor'\n                            : 'Set as Remote Visitior'\n                    \"\n                    [loading]=\"loading === 'remote'\"\n                    [content]=\"\n                        row.extension_data.remote ? 'tap_and_play' : 'business'\n                    \"\n                    (click)=\"setExt(row, 'remote', !row.extension_data.remote)\"\n                >\n                </action-icon>\n                <action-icon\n                    checkin\n                    matTooltip=\"Checkin Guest\"\n                    [loading]=\"loading === 'checkin'\"\n                    [state]=\"row?.checked_in ? 'success' : ''\"\n                    content=\"event_available\"\n                    (click)=\"checkin(row)\"\n                >\n                </action-icon>\n                <action-icon\n                    checkout\n                    matTooltip=\"Checkout Guest\"\n                    [loading]=\"loading === 'checkout'\"\n                    content=\"event_busy\"\n                    (click)=\"checkout(row)\"\n                >\n                </action-icon>\n                <a\n                    [href]=\"'mailto:' + row?.asset_id\"\n                    icon\n                    matRipple\n                    [matTooltip]=\"\n                        row?.user_email === row?.asset_id\n                            ? 'Email Host'\n                            : 'Email Guest'\n                    \"\n                >\n                    <app-icon>email</app-icon>\n                </a>\n                <action-icon\n                    matTooltip=\"Print QR Code\"\n                    [loading]=\"loading === 'printing'\"\n                    content=\"event_busy\"\n                    (click)=\"printQRCode()\"\n                    [class.invisible]=\"!can_print\"\n                >\n                </action-icon>\n            </div>\n        </ng-template>\n        <button\n            class=\"bg-secondary hover:shadow-lg shadow absolute bottom-4 right-4 text-white h-12 w-12\"\n            matTooltip=\"Download Visitor List\"\n            matTooltipPosition=\"left\"\n            icon\n            matRipple\n            *ngIf=\"(guests | async)?.length\"\n            (click)=\"downloadVisitorList()\"\n        >\n            <app-icon>download</app-icon>\n        </button>\n    `,\n    styles: [``],\n})\nexport class GuestListingComponent extends AsyncHandler {\n    public readonly guests = this._state.filtered_bookings.pipe(\n        tap((_: any) => console.log(_))\n    );\n    public readonly search = this._state.search;\n    public readonly filters = this._state.filters;\n    private _inductions_enabled = false;\n\n    public readonly downloadVisitorList = () =>\n        this._state.downloadVisitorsList();\n\n    public readonly approveVisitor = (u) => this._state.approveVisitor(u);\n    public readonly declineVisitor = (u) => this._state.declineVisitor(u);\n    public readonly checkinAllVisitors = (u) =>\n        this._state.setCheckinStateForEvent(u.linked_event?.id, true);\n    public readonly checkoutAllVisitors = (u) =>\n        this._state.setCheckinStateForEvent(u.linked_event?.id, false);\n    public readonly setExt = (u, f, v) => this._state.setExt(u, f, v);\n\n    public readonly checkin = async (item: Booking) => {\n        await this._state.setCheckinState(item, true).catch((e) => {\n            notifyError(e);\n            throw e;\n        });\n        this._state.poll();\n    };\n\n    public readonly checkout = async (item: Booking) => {\n        await this._state.setCheckinState(item, false);\n        this._state.poll();\n    };\n\n    public get columns() {\n        return this._inductions_enabled\n            ? [\n                  'state',\n                  'date',\n                  'asset_name',\n                  'user_name',\n                  'asset_id',\n                  'status',\n                  'induction',\n                  'actions',\n              ]\n            : [\n                  'state',\n                  'date',\n                  'asset_name',\n                  'user_name',\n                  'asset_id',\n                  'status',\n                  'actions',\n              ];\n    }\n\n    public get display_columns() {\n        const fields = {\n            state: 'Checked In',\n            date: 'Time',\n            asset_name: 'Person',\n            user_name: 'Host',\n            asset_id: 'Email',\n            id_data: 'ID',\n            status: 'State',\n            induction: 'Inducted',\n            actions: ' ',\n        };\n        return this.columns.map((_) => fields[_] || _);\n    }\n\n    public get column_sizes() {\n        const fields = {\n            state: '4.5r',\n            date: '8r',\n            asset_name: '12r',\n            user_name: '12r',\n            asset_id: 'flex',\n            id_data: '8r',\n            status: '10r',\n            actions: '16r',\n            induction: '5r',\n        };\n        return this.columns.map((_) => fields[_] || _);\n    }\n\n    public get time_format() {\n        return this._settings.time_format;\n    }\n\n    constructor(\n        private _state: VisitorsStateService,\n        private _settings: SettingsService,\n        private _org: OrganisationService\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'building',\n            this._org.active_building.subscribe(async (bld) => {\n                if (!bld) return;\n                const visitor_kiosk_app =\n                    this._settings.get('app.visitor_kiosk_app') ||\n                    'visitor-kiosk_app';\n                const metadata: any = await showMetadata(\n                    bld.id,\n                    visitor_kiosk_app\n                ).toPromise();\n                this._inductions_enabled =\n                    metadata.details?.induction_enabled &&\n                    metadata.details?.induction_details;\n            })\n        );\n    }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { VisitorsStateService } from './visitors-state.service';\n\n@Component({\n    selector: '[app-visitors]',\n    template: `\n        <sidebar></sidebar>\n        <main class=\"relative w-full flex flex-col bg-base-200\">\n            <visitors-topbar class=\"w-full\"></visitors-topbar>\n            <guest-listings class=\"w-full flex-1 h-0\"></guest-listings>\n            <mat-progress-bar\n                class=\"w-full\"\n                *ngIf=\"loading | async\"\n                mode=\"indeterminate\"\n            ></mat-progress-bar>\n        </main>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                height: 100%;\n                width: 100%;\n            }\n        `,\n    ],\n})\nexport class VisitorsComponent implements OnInit, OnDestroy {\n    public readonly loading = this._state.loading;\n    public readonly filters = this._state.filters;\n\n    constructor(private _state: VisitorsStateService) {}\n\n    public ngOnInit() {\n        this._state.startPolling();\n    }\n\n    public ngOnDestroy() {\n        this._state.stopPolling();\n    }\n}\n","import { Component } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\n\n@Component({\n    selector: 'invite-visitor-modal',\n    template: `\n        <main class=\"relative min-w-[40rem] min-h-[40rem]\">\n            <invite-visitor-form (done)=\"onDone()\"></invite-visitor-form>\n        </main>\n    `,\n    styles: [``],\n})\nexport class InviteVisitorModalComponent {\n    constructor(\n        private _dialog_ref: MatDialogRef<InviteVisitorModalComponent>\n    ) {}\n\n    public onDone() {\n        this._dialog_ref.close();\n    }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { VisitorsStateService } from './visitors-state.service';\nimport { OrganisationService } from '@placeos/organisation';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { MatDialog } from '@angular/material/dialog';\nimport { InviteVisitorModalComponent } from './invite-visitor-modal.component';\nimport { combineLatest } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { SettingsService } from '@placeos/common';\n\n@Component({\n    selector: '[app-new-visitors]',\n    template: `\n        <app-topbar></app-topbar>\n        <div class=\"flex flex-1 h-px\">\n            <app-sidebar></app-sidebar>\n            <main class=\"flex flex-col flex-1 w-1/2 h-full\">\n                <div class=\"flex items-center px-8 py-4 space-x-2\">\n                    <h2 class=\"text-2xl font-medium\">Visitors</h2>\n                    <div class=\"flex-1 w-2\"></div>\n                    <searchbar\n                        class=\"mr-2\"\n                        (modelChange)=\"setSearch($event)\"\n                    ></searchbar>\n                    <button btn matRipple (click)=\"inviteVisitor()\">\n                        Invite Visitor\n                    </button>\n                </div>\n                <div class=\"flex items-center px-8 pb-4\">\n                    <mat-form-field\n                        appearance=\"outline\"\n                        class=\"no-subscript w-60\"\n                    >\n                        <mat-select\n                            [ngModel]=\"(filters | async)?.zones\"\n                            (ngModelChange)=\"updateZones($event)\"\n                            placeholder=\"All Levels\"\n                            multiple\n                        >\n                            <mat-option\n                                *ngFor=\"let level of levels | async\"\n                                [value]=\"level.id\"\n                            >\n                                <div class=\"flex flex-col-reverse\">\n                                    <div\n                                        class=\"text-xs opacity-30\"\n                                        *ngIf=\"use_region\"\n                                    >\n                                        {{\n                                            (level.parent_id | building)\n                                                ?.display_name\n                                        }}\n                                        <span class=\"opacity-0\"> - </span>\n                                    </div>\n                                    <div>\n                                        {{ level.display_name || level.name }}\n                                    </div>\n                                </div>\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n                    <div class=\"flex-1 w-2\"></div>\n                    <date-options (dateChange)=\"setDate($event)\"></date-options>\n                </div>\n                <div class=\"px-8\">\n                    <guest-listings class=\"w-full flex-1 h-0\"></guest-listings>\n                </div>\n                <mat-progress-bar\n                    class=\"w-full\"\n                    *ngIf=\"loading | async\"\n                    mode=\"indeterminate\"\n                ></mat-progress-bar>\n            </main>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n                background-color: var(--b1);\n            }\n        `,\n    ],\n})\nexport class NewVisitorsComponent implements OnInit, OnDestroy {\n    public readonly loading = this._state.loading;\n    public readonly filters = this._state.filters;\n    /** List of selected levels */\n    public zones: string[] = [];\n    /** List of levels for the active building */\n    public readonly levels = combineLatest([\n        this._org.active_building,\n        this._org.active_region,\n    ]).pipe(\n        map(([bld, region]) =>\n            this._settings.get('app.use_region')\n                ? this._org.levelsForRegion(region)\n                : this._org.levelsForBuilding(bld)\n        )\n    );\n    /** Set filtered date */\n    public readonly setDate = (date) => this._state.setFilters({ date });\n    /** Set filtered date */\n    public readonly setFilters = (filters) => this._state.setFilters(filters);\n    /** Set filter string */\n    public readonly setSearch = (str) => this._state.setSearchString(str);\n    /** Update active zones for desks */\n    public readonly updateZones = (zones) => {\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: { zone_ids: zones.join(',') },\n        });\n        this._state.setFilters({ zones });\n    };\n\n    public get use_region() {\n        return !!this._settings.get('app.use_region');\n    }\n\n    constructor(\n        private _state: VisitorsStateService,\n        private _org: OrganisationService,\n        private _router: Router,\n        private _route: ActivatedRoute,\n        private _dialog: MatDialog,\n        private _settings: SettingsService\n    ) {}\n\n    public inviteVisitor() {\n        this._dialog.open(InviteVisitorModalComponent);\n    }\n\n    public ngOnInit() {\n        this._state.startPolling();\n    }\n\n    public ngOnDestroy() {\n        this._state.stopPolling();\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Route } from '@angular/router';\n\nimport { UIModule } from '../ui/ui.module';\n\nimport { VisitorsComponent } from './visitors.component';\nimport { VisitorsTopbarComponent } from './visitors-topbar.component';\nimport { GuestListingComponent } from './guest-listing.component';\nimport { NewVisitorsComponent } from './new-visitors.component';\nimport { InviteVisitorModalComponent } from './invite-visitor-modal.component';\nimport { SharedBookingsModule } from '@placeos/bookings';\nimport { VisitorInductionModalComponent } from './visitor-induction-modal.component';\n\nconst ROUTES: Route[] = [\n    { path: '', component: VisitorsComponent },\n    { path: 'new', component: NewVisitorsComponent },\n];\n\n@NgModule({\n    declarations: [\n        NewVisitorsComponent,\n        VisitorsComponent,\n        VisitorsTopbarComponent,\n        GuestListingComponent,\n        InviteVisitorModalComponent,\n        VisitorInductionModalComponent,\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        UIModule,\n        SharedBookingsModule,\n        RouterModule.forChild(ROUTES),\n    ],\n})\nexport class VisitorsModule {}\n\n/**\nzone_ids: zone-EmWVhHG3Bhz\nperiod_start: 1604926800\nperiod_end: 1605013199\n\nperiod_start: 1605013200\nperiod_end: 1605099599\nzones: zone-EmWVhHG3Bhz\n\n*/\n","import { HashMap } from '@placeos/common';\nimport { getUnixTime } from 'date-fns';\n\nexport class MapLocation {\n    /** Source that the location was generated */\n    public type: 'desk' | 'wireless' | 'meeting' | 'other';\n    /** Details of the location */\n    public position: string | { x: number, y: number };\n    /** Accuracy of the location data */\n    public variance: number;\n    /** Unix epoch in seconds that the data was last updated */\n    public last_seen: number;\n    /** ID of the level associated with the location */\n    public level: string;\n    /** ID of the building associated with the location */\n    public building: string;\n    /** Whether user is currently at the location if fixed */\n    public at_location: boolean;\n    /**  */\n    public coordinates_from:\n        | 'top-left'\n        | 'top-right'\n        | 'bottom-left'\n        | 'bottom-right';\n\n    constructor(_data: HashMap = {}) {\n        this.type = _data.type || _data.location || 'other';\n        this.position = _data.position ||\n            _data.map_id || _data.asset_id || {\n                x: _data.x / _data.map_width || 0,\n                y: _data.y / _data.map_height || 0,\n            };\n        this.variance = _data.variance || 0;\n        this.last_seen = _data.last_seen || getUnixTime(new Date());\n        this.level = _data.level;\n        this.building = _data.building;\n        this.at_location = !!_data.at_location;\n        this.coordinates_from = _data.coordinates_from || 'top-left';\n    }\n}\n"],"x_google_ignoreList":[]}