{"version":3,"file":"apps_concierge_src_app_visitors_visitors_module_ts.js","mappings":"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","names":["VisitorInductionModalComponent","induction_details","this","_settings","get","is_enabled","constructor","agree","static","__ngFactoryType__","i0","i1","core","VBU","selectors","decls","vars","consts","template","rf","ctx","$event","_r1","ctx_r1","notes","_r3","save","VisitorNotesModalComponent","_data","_dialog_ref","item","extension_data","loading","_this","_asyncToGenerator","disableClose","updateBooking","id","toJSON","toPromise","catch","_","notifyError","notifySuccess","close","MAT_DIALOG_DATA","VisitorNotesModalComponent_button_5_Template","VisitorNotesModalComponent_main_6_Template","VisitorNotesModalComponent_footer_7_Template","VisitorNotesModalComponent_ng_template_8_Template","asset_name","loading_template_r4","VisitorsStateService","AsyncHandler","search","_search","getValue","time_format","_dialog","_org","super","_poll","BehaviorSubject","_filters","_loading","asObservable","filters","bookings","combineLatest","active_building","pipe","filter","building","debounceTime","switchMap","bld","next","date","Date","start","startOfDay","end","addDays","period","queryBookings","type","period_start","getUnixTime","period_end","zones","join","include_checked_out","limit","catchError","of","tap","shareReplay","filtered_bookings","map","guest_list","toLowerCase","includes","user_name","user_email","asset_id","sort","a","b","setFilters","setSearchString","poll","now","startPolling","delay","interval","stopPolling","clearInterval","setExt","guest","field","value","approveVisitor","_this2","details","openConfirmModal","title","content","icon","reason","approveBooking","e","message","error","declineVisitor","_this3","rejectBooking","requestInduction","_this4","result","open","data","afterClosed","updateBookingInductionStatus","setCheckinState","state","_this5","rejected","approved","checkinBooking","setCheckinStateForEvent","event_id","_this6","event_bookings","take","parent_id","linked_event","length","Promise","all","downloadVisitorsList","_this7","list","Name","Email","checked_in","Host","Status","status","format","jsonToCsv","downloadFile","editVisitorNotes","subscribe","i2","i3","jDH","factory","ɵfac","providedIn","level_r1","display_name","name","VisitorsTopbarComponent","_state","_route","_router","levels","active_levels","setDate","setSearch","str","updateZones","navigate","relativeTo","queryParams","zone_ids","ngOnInit","initialised","first","subscription","queryParamMap","params","has","split","level","levelWithID","buildings","find","zone","lvl","push","features","VisitorsTopbarComponent_mat_option_3_Template","tmp_2_0","row_r1","checked_out_at","tz","checked_in_at","GuestListingComponent_ng_template_2_div_0_Template","GuestListingComponent_ng_template_2_div_1_Template","GuestListingComponent_ng_template_2_div_2_Template","row_r3","GuestListingComponent_ng_template_4_div_3_Template","row_r4","GuestListingComponent_ng_template_6_div_3_Template","row_r5","id_confirmed","_r6","row","id_data","url","GuestListingComponent_ng_template_8_button_1_Template","GuestListingComponent_ng_template_8_ng_template_2_Template","id_confirmation_r7","GuestListingComponent_ng_template_10_div_0_Template","parking_booking_id","data_r9","GuestListingComponent_ng_template_14_app_icon_5_Template","row_r11","_r10","menu_r12","row_r13","GuestListingComponent_ng_template_16_span_4_Template","tmp_12_0","timezone","_r15","row_r16","reserveParking","item_r17","_r18","printQRCode","_r19","checkout","checkin","_r20","checkinAllVisitors","checkoutAllVisitors","GuestListingComponent_ng_template_18_button_12_Template","GuestListingComponent_ng_template_18_a_15_Template","_r14","GuestListingComponent_ng_template_18_button_22_Template","GuestListingComponent_ng_template_18_button_29_Template","GuestListingComponent_ng_template_18_ng_container_30_Template","guest_menu_r21","attachment","attachment_menu","has_parking","attachments","remote","can_print","row_r23","_r22","GuestListingComponent_ng_template_20_div_4_Template","_r24","downloadVisitorList","GuestListingComponent","use_tz","bld_tz","Intl","DateTimeFormat","resolvedOptions","timeZone","getTimezoneOffsetString","inducted","process_state","induction","_parking","guests","inductions_enabled","u","f","v","_ref","_x","apply","arguments","_ref2","_x2","_ref3","visitor_kiosk_app","metadata","showMetadata","induction_enabled","_x3","editReservation","undefined","user","User","email","link_id","external_user","saveBooking","Booking","i4","GuestListingComponent_ng_template_2_Template","GuestListingComponent_ng_template_4_Template","GuestListingComponent_ng_template_6_Template","GuestListingComponent_ng_template_8_Template","GuestListingComponent_ng_template_10_Template","GuestListingComponent_ng_template_12_Template","GuestListingComponent_ng_template_14_Template","GuestListingComponent_ng_template_16_Template","GuestListingComponent_ng_template_18_Template","GuestListingComponent_ng_template_20_Template","GuestListingComponent_button_22_Template","_c9","_c0","state_template_r25","_c1","date_template_r31","_c2","person_template_r26","_c3","host_template_r27","_c4","status_template_r30","_c5","induction_template_r29","_c6","parking_template_r28","_c7","notes_template_r33","_c8","action_template_r32","tmp_14_0","VisitorsComponent","ngOnDestroy","attrs","VisitorsComponent_mat_progress_bar_4_Template","InviteVisitorModalComponent","onDone","tmp_3_0","NewVisitorsComponent_mat_option_15_div_2_Template","use_region","ROUTES","path","component","NewVisitorsComponent","active_region","region","levelsForRegion","levelsForBuilding","inviteVisitor","i5","NewVisitorsComponent_mat_option_15_Template","NewVisitorsComponent_mat_progress_bar_21_Template","tmp_0_0","VisitorsModule","$C","G2t","CommonModule","FormsModule","UIModule","SharedBookingsModule","RouterModule","forChild","MapLocation","location","position","map_id","x","map_width","y","map_height","variance","last_seen","at_location","coordinates_from"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./apps/concierge/src/app/visitors/visitor-induction-modal.component.ts","./apps/concierge/src/app/visitors/visitor-notes-modal.component.ts","./apps/concierge/src/app/visitors/visitors-state.service.ts","./apps/concierge/src/app/visitors/visitors-topbar.component.ts","./apps/concierge/src/app/visitors/guest-listing.component.ts","./apps/concierge/src/app/visitors/visitors.component.ts","./apps/concierge/src/app/visitors/invite-visitor-modal.component.ts","./apps/concierge/src/app/visitors/new-visitors.component.ts","./apps/concierge/src/app/visitors/visitors.module.ts","./libs/users/src/lib/location.class.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { SettingsService } from '@placeos/common';\n\n@Component({\n    selector: 'visitor-induction-modal',\n    template: `\n        <div\n            class=\"relative bg-base-100 rounded shadow overflow-hidden flex flex-col items-center w-[32rem] p-4\"\n        >\n            <p class=\"my-4\">\n                Please read the induction information below before proceeding\n            </p>\n            <div\n                class=\"rounded border border-base-300 w-full p-4 opacity-60 text-sm overflow-y-auto overflow-x-hidden max-h-[50vh] whitespace-pre-wrap\"\n            >\n                {{ induction_details }}\n            </div>\n            <mat-checkbox [(ngModel)]=\"agree\" class=\"my-4\">\n                I agree\n            </mat-checkbox>\n            <div class=\"flex items-center justify-center space-x-2\">\n                <button\n                    btn\n                    matRipple\n                    class=\"w-32 clear underline\"\n                    [mat-dialog-close]=\"false\"\n                >\n                    Decline\n                </button>\n                <button\n                    btn\n                    matRipple\n                    class=\"w-32\"\n                    [disabled]=\"!agree\"\n                    [mat-dialog-close]=\"true\"\n                >\n                    Accept\n                </button>\n            </div>\n        </div>\n    `,\n    styles: [``],\n})\nexport class VisitorInductionModalComponent {\n    public agree = false;\n\n    public get induction_details() {\n        return this._settings.get('app.induction_details');\n    }\n\n    public get is_enabled() {\n        return (\n            this._settings.get('app.induction_enabled') &&\n            this._settings.get('app.induction_details')\n        );\n    }\n\n    constructor(private _settings: SettingsService) {}\n}\n","import { Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { Booking, BookingFormService, updateBooking } from '@placeos/bookings';\nimport { notifyError, notifySuccess } from '@placeos/common';\n\n@Component({\n    selector: 'visitor-notes-modal',\n    template: `\n        <header>\n            <h2>\n                Notes for Visitor\n                <span\n                    class=\"font-medium px-2 py-1 text-sm bg-base-200 rounded ml-2\"\n                >\n                    {{ item?.asset_name }}\n                </span>\n            </h2>\n            <button icon mat-dialog-close *ngIf=\"!loading\">\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main\n            class=\"p-4 w-[36rem] max-h-[65vh] overflow-auto\"\n            *ngIf=\"!loading; else loading_template\"\n        >\n            <mat-form-field appearance=\"outline\" class=\"w-full no-subscript\">\n                <textarea\n                    matInput\n                    [(ngModel)]=\"notes\"\n                    class=\"resize-none h-[60vh] max-h-[64rem]\"\n                    placeholder=\"Notes for visitor\"\n                ></textarea>\n            </mat-form-field>\n        </main>\n        <footer\n            class=\"flex justify-end space-x-2 p-2 border-t border-base-200\"\n            *ngIf=\"!loading\"\n        >\n            <button btn matRipple class=\"w-32\" (click)=\"save()\">Save</button>\n        </footer>\n        <ng-template #loading_template>\n            <div\n                loading\n                class=\"absolute inset-0 bg-base-100 flex flex-col items-center justify-center space-y-2\"\n            >\n                <mat-spinner [diameter]=\"32\"></mat-spinner>\n                <p>Saving visitor notes...</p>\n            </div>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class VisitorNotesModalComponent {\n    public item: Booking = this._data.item;\n    public notes = this.item.extension_data?.notes || '';\n    public loading = '';\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA) private _data: { item: Booking },\n        private _dialog_ref: MatDialogRef<VisitorNotesModalComponent>,\n    ) {\n        this.item = _data.item;\n    }\n\n    public async save() {\n        this.loading = 'Saving...';\n        this._dialog_ref.disableClose = true;\n        await updateBooking(this.item.id, {\n            ...this.item.toJSON(),\n            extension_data: {\n                ...this.item.extension_data,\n                notes: this.notes,\n            },\n        })\n            .toPromise()\n            .catch((_) => {\n                notifyError('Error saving visitor notes');\n                this._dialog_ref.disableClose = false;\n                this.loading = '';\n                throw _;\n            });\n        this.loading = '';\n        notifySuccess('Successfully saved visitor notes');\n        this._dialog_ref.close();\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, combineLatest, of } from 'rxjs';\nimport {\n    catchError,\n    debounceTime,\n    filter,\n    map,\n    shareReplay,\n    switchMap,\n    take,\n    tap,\n} from 'rxjs/operators';\nimport { startOfDay, getUnixTime, addDays, format } from 'date-fns';\n\nimport {\n    AsyncHandler,\n    SettingsService,\n    downloadFile,\n    jsonToCsv,\n    notifyError,\n    notifySuccess,\n    openConfirmModal,\n} from '@placeos/common';\nimport { GuestUser, updateGuest } from '@placeos/users';\nimport { MatDialog } from '@angular/material/dialog';\nimport {\n    Booking,\n    approveBooking,\n    checkinBooking,\n    queryBookings,\n    rejectBooking,\n    updateBooking,\n    updateBookingInductionStatus,\n} from '@placeos/bookings';\nimport { OrganisationService } from '@placeos/organisation';\nimport { VisitorInductionModalComponent } from './visitor-induction-modal.component';\nimport { VisitorNotesModalComponent } from './visitor-notes-modal.component';\n\nexport interface VisitorFilters {\n    date?: number;\n    zones?: string[];\n    all_bookings?: boolean;\n    period?: number;\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class VisitorsStateService extends AsyncHandler {\n    private _poll = new BehaviorSubject<number>(0);\n\n    private _filters = new BehaviorSubject<VisitorFilters>({});\n\n    private _search = new BehaviorSubject<string>('');\n\n    private _loading = new BehaviorSubject<boolean>(false);\n\n    public readonly loading = this._loading.asObservable();\n\n    public readonly filters = this._filters.asObservable();\n\n    public readonly bookings = combineLatest([\n        this._org.active_building,\n        this._filters,\n        this._poll,\n    ]).pipe(\n        filter(([building]) => !!building),\n        debounceTime(150),\n        switchMap(([bld, filters]) => {\n            this._loading.next(true);\n            const date = filters.date ? new Date(filters.date) : new Date();\n            const start = startOfDay(date);\n            const end = addDays(start, filters.period || 1);\n            return queryBookings({\n                type: 'visitor',\n                period_start: getUnixTime(start),\n                period_end: getUnixTime(end),\n                zones: (filters.zones || []).join(',') || bld.id,\n                include_checked_out: true,\n                limit: 1000,\n            }).pipe(catchError((_) => of([] as Booking[])));\n        }),\n        tap(() => this._loading.next(false)),\n        shareReplay(1),\n    );\n\n    public readonly filtered_bookings = combineLatest([\n        this._search,\n        this.bookings,\n    ]).pipe(\n        map(([search, guest_list]) => {\n            const filter = search.toLowerCase();\n            const out = guest_list\n                .filter(\n                    (_) =>\n                        _.asset_name?.toLowerCase().includes(filter) ||\n                        _.user_name?.toLowerCase().includes(filter) ||\n                        _.user_email?.toLowerCase().includes(filter) ||\n                        _.asset_id?.toLowerCase().includes(filter),\n                )\n                .sort((a, b) => a.date - b.date);\n            return out;\n        }),\n    );\n\n    public get search() {\n        return this._search.getValue();\n    }\n\n    public get time_format() {\n        return this._settings.time_format;\n    }\n\n    constructor(\n        private _dialog: MatDialog,\n        private _org: OrganisationService,\n        private _settings: SettingsService,\n    ) {\n        super();\n    }\n\n    public setFilters(filters: VisitorFilters) {\n        this._filters.next({ ...this._filters.getValue(), ...filters });\n    }\n\n    public setSearchString(search: string) {\n        this._search.next(search);\n    }\n\n    public poll() {\n        this._poll.next(Date.now());\n    }\n\n    public startPolling(delay: number = 30 * 1000) {\n        this.interval('poll', () => this._poll.next(Date.now()), delay);\n    }\n\n    public stopPolling() {\n        this.clearInterval('poll');\n    }\n\n    public async setExt<T = any>(guest: Booking, field: string, value: T) {\n        const extension_data = { ...guest.extension_data };\n        extension_data[field] = value;\n        await updateBooking(guest.id, {\n            ...guest.toJSON(),\n            extension_data,\n        }).toPromise();\n        this._poll.next(Date.now());\n    }\n\n    public async approveVisitor(item: Booking) {\n        const details = await openConfirmModal(\n            {\n                title: 'Approve Visitor',\n                content: `Approve attendance of ${\n                    item.asset_name || item.asset_id\n                } to their meeting?`,\n                icon: { content: 'event_available' },\n            },\n            this._dialog,\n        );\n        if (details.reason !== 'done') return details.close();\n        details.loading('Updating guest details');\n        await (approveBooking(item.id) as any).toPromise().catch((e) => {\n            notifyError(\n                `Error approving visitor: ${e.message || e.error || e}`,\n            );\n            details.close();\n            throw e;\n        });\n        notifySuccess(`Successfully approved visitor`);\n        this._poll.next(Date.now());\n        details.close();\n    }\n\n    public async declineVisitor(item: Booking) {\n        const details = await openConfirmModal(\n            {\n                title: 'Decline Visitor',\n                content: `Decline attendance of ${\n                    item.asset_name || item.asset_id\n                } to their meeting?`,\n                icon: { content: 'event_available' },\n            },\n            this._dialog,\n        );\n        if (details.reason !== 'done') return details.close();\n        details.loading('Updating guest details');\n        await rejectBooking(item.id)\n            .toPromise()\n            .catch((e) => {\n                notifyError(\n                    `Error declining visitor: ${e.message || e.error || e}`,\n                );\n                details.close();\n                throw e;\n            });\n        notifySuccess(`Successfully declining visitor`);\n        this._poll.next(Date.now());\n        details.close();\n    }\n\n    public async requestInduction(item: Booking) {\n        const ref = this._dialog.open(VisitorInductionModalComponent, {\n            data: { item },\n        });\n        const result = await ref.afterClosed().toPromise();\n        if (result === false) {\n            await updateBookingInductionStatus(item.id, 'declined').toPromise();\n        }\n        if (!result) throw 'User declined';\n        await updateBookingInductionStatus(item.id, 'accepted').toPromise();\n        return true;\n    }\n\n    public async setCheckinState(item: Booking, state = true) {\n        if (item.rejected) throw 'You cannot check-in a rejected meeting';\n        if (state === true) await this.requestInduction(item);\n        if (!item.approved && state === true) {\n            await approveBooking(item.id).toPromise();\n        }\n        const new_user = await checkinBooking(item.id, state)\n            .toPromise()\n            .catch((e) => {\n                notifyError(\n                    `Error checking ${state ? 'in' : 'out'} ${\n                        item.asset_name || item.asset_id\n                    } for ${item.user_name}'s meeting`,\n                );\n                throw e;\n            });\n        notifySuccess(\n            `Successfully checked ${state ? 'in' : 'out'} ${\n                item.asset_name || item.asset_id\n            } from ${item.user_name}'s meeting`,\n        );\n    }\n\n    public async setCheckinStateForEvent(event_id: string, state = true) {\n        if (!event_id) return;\n        const bookings = await this.bookings.pipe(take(1)).toPromise();\n        const event_bookings = bookings.filter(\n            (_) =>\n                _.parent_id === event_id ||\n                _.extension_data.parent_id === event_id ||\n                _.linked_event?.id === event_id ||\n                _.linked_event?.event_id === event_id,\n        );\n        if (!event_bookings.length) return;\n        await Promise.all(\n            event_bookings.map((_) =>\n                checkinBooking(_.id, state)\n                    .toPromise()\n                    .catch((e) => {\n                        notifyError(\n                            `Error checking ${state ? 'in' : 'out'} ${\n                                _.asset_name || _.asset_id\n                            } for ${_.user_name}'s meeting`,\n                        );\n                        throw e;\n                    }),\n            ),\n        );\n        notifySuccess(\n            `Successfully checked ${state ? 'in' : 'out'} all visitors from ${\n                event_bookings[0].user_name\n            }'s meeting`,\n        );\n        this._poll.next(Date.now());\n    }\n\n    public async downloadVisitorsList() {\n        const bookings = await this.filtered_bookings.pipe(take(1)).toPromise();\n        if (!bookings.length) return;\n        const { date } = this._filters.getValue();\n        const list = bookings.map((_) => ({\n            Name: _.asset_name,\n            Email: _.asset_id,\n            'Checked In': _.checked_in,\n            Host: _.user_email || '',\n            Status: _.status,\n            Date: format(_.date, 'dd MMM ' + this.time_format),\n        }));\n        const data = jsonToCsv(list);\n        downloadFile(\n            `visitor-list-${format(date || Date.now(), 'MMM-dd')}.csv`,\n            data,\n        );\n    }\n\n    public editVisitorNotes(item: Booking) {\n        const ref = this._dialog.open(VisitorNotesModalComponent, {\n            data: { item },\n        });\n        ref.afterClosed().subscribe(() => this.poll());\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { first } from 'rxjs/operators';\n\nimport { AsyncHandler } from '@placeos/common';\nimport { OrganisationService } from '@placeos/organisation';\nimport { VisitorsStateService } from './visitors-state.service';\n\n@Component({\n    selector: 'visitors-topbar',\n    template: `\n        <div\n            class=\"flex items-center bg-base-100 h-20 px-4 border-b border-base-200 space-x-2\"\n        >\n            <mat-form-field appearance=\"outline\">\n                <mat-select\n                    multiple\n                    [(ngModel)]=\"zones\"\n                    (ngModelChange)=\"updateZones($event)\"\n                    placeholder=\"All Levels\"\n                >\n                    <mat-option\n                        *ngFor=\"let level of levels | async\"\n                        [value]=\"level.id\"\n                    >\n                        {{ level.display_name || level.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field appearance=\"outline\">\n                <mat-select\n                    [ngModel]=\"(filters | async)?.period || 1\"\n                    (ngModelChange)=\"setFilters({ period: $event })\"\n                    placeholder=\"Viewing Period\"\n                >\n                    <mat-option [value]=\"1\">Show Day</mat-option>\n                    <mat-option [value]=\"7\">Show Week</mat-option>\n                    <mat-option [value]=\"30\">Show Month</mat-option>\n                </mat-select>\n            </mat-form-field>\n            <div class=\"flex-1 w-2\"></div>\n            <searchbar\n                class=\"mr-2\"\n                (modelChange)=\"setSearch($event)\"\n            ></searchbar>\n            <date-options (dateChange)=\"setDate($event)\"></date-options>\n        </div>\n    `,\n    styles: [\n        `\n            mat-form-field {\n                height: 3.25em;\n                width: 8em;\n            }\n        `,\n    ],\n})\nexport class VisitorsTopbarComponent extends AsyncHandler implements OnInit {\n    /** List of selected levels */\n    public zones: string[] = [];\n    /** List of levels for the active building */\n    public readonly levels = this._org.active_levels;\n\n    public readonly filters = this._state.filters;\n    /** Set filtered date */\n    public readonly setDate = (date) => this._state.setFilters({ date });\n    /** Set filtered date */\n    public readonly setFilters = (filters) => this._state.setFilters(filters);\n    /** Set filter string */\n    public readonly setSearch = (str) => this._state.setSearchString(str);\n    /** Update active zones for desks */\n    public readonly updateZones = (zones) => {\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: { zone_ids: zones.join(',') },\n        });\n        this._state.setFilters({ zones });\n    };\n\n    constructor(\n        private _state: VisitorsStateService,\n        private _org: OrganisationService,\n        private _route: ActivatedRoute,\n        private _router: Router\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe((params) => {\n                if (params.has('zone_ids')) {\n                    const zones = params.get('zone_ids').split(',');\n                    if (zones.length) {\n                        const level = this._org.levelWithID(zones);\n                        this.zones = zones;\n                        if (!level) return;\n                        this._org.building = this._org.buildings.find(\n                            (bld) => bld.id === level.parent_id\n                        );\n                    }\n                }\n            })\n        );\n        this.subscription(\n            'levels',\n            this._org.active_levels.subscribe((levels) => {\n                this.zones = this.zones.filter((zone) =>\n                    levels.find((lvl) => lvl.id === zone)\n                );\n                if (!this.zones.length && levels.length) {\n                    this.zones.push(levels[0].id);\n                }\n                this.updateZones(this.zones);\n            })\n        );\n        this.setSearch('');\n    }\n}\n","import { Component } from '@angular/core';\nimport {\n    AsyncHandler,\n    SettingsService,\n    getTimezoneOffsetInMinutes,\n    getTimezoneOffsetString,\n    notifyError,\n    padLength,\n} from '@placeos/common';\nimport { VisitorsStateService } from './visitors-state.service';\nimport { Booking, saveBooking } from '@placeos/bookings';\nimport { showMetadata } from '@placeos/ts-client';\nimport { OrganisationService } from '@placeos/organisation';\nimport { ParkingStateService } from '../parking/parking-state.service';\nimport { User } from '@placeos/users';\n\n@Component({\n    selector: 'guest-listings',\n    template: `\n        <simple-table\n            class=\"min-w-[72rem] block text-sm z-0\"\n            [data]=\"guests\"\n            [columns]=\"[\n                {\n                    key: 'state',\n                    name: 'Checked In',\n                    content: state_template,\n                    size: '6.5rem',\n                    sortable: false,\n                },\n                {\n                    key: 'date',\n                    name: 'Time',\n                    content: date_template,\n                    size: '6rem',\n                },\n                {\n                    key: 'asset_name',\n                    name: 'Visitor',\n                    content: person_template,\n                },\n                { key: 'user_name', name: 'Host', content: host_template },\n                {\n                    key: 'status',\n                    name: 'State',\n                    content: status_template,\n                    size: '9.5rem',\n                },\n                {\n                    key: 'induction',\n                    name: 'Inducted',\n                    content: induction_template,\n                    show: !!inductions_enabled,\n                    size: '5.5rem',\n                },\n                {\n                    key: 'parking_space',\n                    name: 'Parking',\n                    content: parking_template,\n                    show: !!has_parking,\n                    size: '5.5rem',\n                },\n                {\n                    key: 'notes',\n                    name: 'Notes',\n                    content: notes_template,\n                    sortable: false,\n                    size: '4.5rem',\n                },\n                {\n                    key: 'actions',\n                    name: ' ',\n                    content: action_template,\n                    size: '3.25rem',\n                    sortable: false,\n                },\n            ]\"\n            [filter]=\"search | async\"\n            [sortable]=\"true\"\n        ></simple-table>\n        <ng-template #state_template let-row=\"row\">\n            <div\n                *ngIf=\"!row?.checked_in && row.checked_out_at\"\n                class=\"rounded h-8 w-8 flex items-center justify-center text-2xl bg-base-400 text-neutral-content mx-auto\"\n                [matTooltip]=\"\n                    'Checked out at:\n' + (row.checked_out_at * 1000 | date: time_format : tz)\n                \"\n                matTooltipPosition=\"right\"\n            >\n                <app-icon>done</app-icon>\n            </div>\n            <div\n                *ngIf=\"!row?.checked_in && !row.checked_out_at\"\n                class=\"rounded h-8 w-8 flex items-center justify-center text-2xl bg-warning text-warning-content mx-auto\"\n                matTooltip=\"Not checked in\"\n                matTooltipPosition=\"right\"\n            >\n                <app-icon>question_mark</app-icon>\n            </div>\n            <div\n                *ngIf=\"row?.checked_in\"\n                class=\"rounded h-8 w-8 flex items-center justify-center text-2xl bg-success text-success-content mx-auto\"\n                [matTooltip]=\"\n                    'Checked in at:\n' + (row.checked_in_at * 1000 | date: time_format : tz)\n                \"\n                matTooltipPosition=\"right\"\n            >\n                <app-icon>done</app-icon>\n            </div>\n        </ng-template>\n        <ng-template #person_template let-row=\"row\">\n            <div class=\"px-4 py-2\">\n                <div>{{ row.asset_name || row.asset_id }}</div>\n                <div\n                    *ngIf=\"row.asset_name && row.asset_id\"\n                    class=\"opacity-30 text-xs\"\n                >\n                    {{ row.asset_id }}\n                </div>\n            </div>\n        </ng-template>\n        <ng-template #host_template let-row=\"row\">\n            <div class=\"px-4 py-2\">\n                <div>{{ row.user_name || row.user_email }}</div>\n                <div\n                    *ngIf=\"row.user_name && row.user_email\"\n                    class=\"opacity-30 text-xs\"\n                >\n                    {{ row.user_email }}\n                </div>\n            </div>\n        </ng-template>\n        <ng-template #id_template let-row=\"row\">\n            <div customTooltip [content]=\"id_confirmation\">\n                <button\n                    matRipple\n                    *ngIf=\"row.extension_data?.id_data?.url\"\n                    class=\"bg-success rounded-3xl px-4 py-2 text-white\"\n                >\n                    {{\n                        row.extension_data?.id_confirmed\n                            ? 'Confirmed'\n                            : row.extension_data?.id_confirmed === false\n                              ? 'Rejected'\n                              : 'Submitted'\n                    }}\n                </button>\n            </div>\n            <ng-template #id_confirmation>\n                <div\n                    class=\"bg-base-100 rounded p-2 flex flex-col space-y-2 my-2 w-[20rem]\"\n                >\n                    <img\n                        [src]=\"row.extension_data?.id_data?.url\"\n                        class=\"max-w-[20rem] max-h-[20rem] object-contain\"\n                    />\n                    <button\n                        matRipple\n                        (click)=\"setExt(row, 'id_confirmed', true)\"\n                    >\n                        Confirm ID\n                    </button>\n                    <button\n                        matRipple\n                        class=\"inverse mt-2\"\n                        (click)=\"setExt(row, 'id_confirmed', false)\"\n                    >\n                        Reject ID\n                    </button>\n                </div>\n            </ng-template>\n        </ng-template>\n        <ng-template #parking_template let-row=\"row\">\n            <div\n                *ngIf=\"row.extension_data.parking_booking_id\"\n                class=\"rounded h-8 w-8 flex items-center justify-center text-2xl bg-success text-success-content mx-auto\"\n            >\n                <app-icon>done</app-icon>\n            </div>\n        </ng-template>\n        <ng-template #induction_template let-data=\"data\">\n            <div\n                class=\"rounded h-8 w-8 flex items-center justify-center text-2xl mx-auto\"\n                [class.bg-success]=\"data === 'accepted'\"\n                [class.text-success-content]=\"data === 'accepted'\"\n                [class.bg-warning]=\"data !== 'accepted' && data !== 'declined'\"\n                [class.text-warning-content]=\"\n                    data !== 'accepted' && data !== 'declined'\n                \"\n                [class.bg-error]=\"data === 'declined'\"\n                [class.text-error-content]=\"data === 'declined'\"\n            >\n                <app-icon>\n                    {{\n                        data === 'accepted'\n                            ? 'done'\n                            : data === 'declined'\n                              ? 'close'\n                              : 'question_mark'\n                    }}\n                </app-icon>\n            </div>\n        </ng-template>\n        <ng-template #status_template let-row=\"row\">\n            <div class=\"px-4\">\n                <button\n                    matRipple\n                    class=\"rounded-3xl border-none w-[7.5rem] h-10\"\n                    [class.text-success-content]=\"row?.status === 'approved'\"\n                    [class.bg-success]=\"row?.status === 'approved'\"\n                    [class.text-error-content]=\"row?.status === 'declined'\"\n                    [class.bg-error]=\"row?.status === 'declined'\"\n                    [class.text-neutral-content]=\"row?.status === 'ended'\"\n                    [class.bg-neutral]=\"row?.status === 'ended'\"\n                    [class.text-warning-content]=\"\n                        row?.status !== 'ended' &&\n                        row?.status !== 'approved' &&\n                        row?.status !== 'declined'\n                    \"\n                    [class.bg-warning]=\"\n                        row?.status !== 'ended' &&\n                        row?.status !== 'approved' &&\n                        row?.status !== 'declined'\n                    \"\n                    [class.opacity-30]=\"row?.status === 'ended'\"\n                    [matMenuTriggerFor]=\"menu\"\n                    [disabled]=\"\n                        row?.status === 'ended' ||\n                        (row.checked_in && !row.checked_out_at)\n                    \"\n                >\n                    <div class=\"flex items-center pl-4 pr-2 space-x-2\">\n                        <div class=\"flex-1 text-left\">\n                            {{\n                                row?.status === 'ended'\n                                    ? 'Ended'\n                                    : row?.status === 'approved'\n                                      ? 'Approved'\n                                      : row?.status === 'declined'\n                                        ? 'Declined'\n                                        : 'Pending'\n                            }}\n                        </div>\n                        <app-icon\n                            class=\"text-2xl\"\n                            *ngIf=\"\n                                !(\n                                    row?.status === 'ended' ||\n                                    (row.checked_in && !row.checked_out_at)\n                                )\n                            \"\n                        >\n                            arrow_drop_down\n                        </app-icon>\n                    </div>\n                </button>\n            </div>\n            <mat-menu #menu=\"matMenu\">\n                <button mat-menu-item (click)=\"approveVisitor(row)\">\n                    <div class=\"flex items-center space-x-2\">\n                        <app-icon class=\"text-2xl\">event_available</app-icon>\n                        <div class=\"pr-2\">Approve Visitor</div>\n                    </div>\n                </button>\n                <button mat-menu-item (click)=\"declineVisitor(row)\">\n                    <div class=\"flex items-center space-x-2\">\n                        <app-icon class=\"text-2xl text-error\">\n                            event_busy\n                        </app-icon>\n                        <div class=\"pr-2\">Decline Visitor</div>\n                    </div>\n                </button>\n            </mat-menu>\n        </ng-template>\n        <ng-template #date_template let-row=\"row\">\n            <div class=\"px-4\">\n                {{\n                    row.date\n                        | date\n                            : ((filters | async)?.period > 1\n                                  ? 'MMM d, ' + time_format\n                                  : time_format)\n                            : tz\n                }}\n                <span class=\"text-xs opacity-30\" *ngIf=\"timezone\">\n                    {{ row.date | date: 'z' : tz }}\n                </span>\n            </div>\n        </ng-template>\n        <ng-template #action_template let-row=\"row\">\n            <div class=\"flex items-center justify-end px-2\">\n                <button icon matRipple [matMenuTriggerFor]=\"guest_menu\">\n                    <app-icon>more_horiz</app-icon>\n                </button>\n                <mat-menu #guest_menu=\"matMenu\">\n                    <button\n                        mat-menu-item\n                        [disabled]=\"!row.attachment?.length\"\n                        [matMenuTriggerFor]=\"attachment_menu\"\n                    >\n                        <div class=\"flex items-center space-x-2\">\n                            <app-icon class=\"text-2xl\">attachment</app-icon>\n                            <div>View Attachments</div>\n                        </div>\n                    </button>\n                    <button\n                        mat-menu-item\n                        *ngIf=\"\n                            has_parking &&\n                            !row.extension_data.parking_booking_id\n                        \"\n                        (click)=\"reserveParking(row)\"\n                    >\n                        <div class=\"flex items-center space-x-2\">\n                            <app-icon class=\"text-2xl\">directions_car</app-icon>\n                            <div>Reserve Parking Space</div>\n                        </div>\n                    </button>\n                    <mat-menu #menu=\"matMenu\">\n                        <a\n                            *ngFor=\"let item of row.attachments\"\n                            [href]=\"item.url\"\n                            mat-menu-item\n                        >\n                            {{ item.name }}\n                        </a>\n                    </mat-menu>\n                    <button mat-menu-item (click)=\"setExt(row, 'remote', true)\">\n                        <div class=\"flex items-center space-x-2\">\n                            <app-icon class=\"text-2xl\">\n                                {{\n                                    row.extension_data.remote\n                                        ? 'business'\n                                        : 'laptop'\n                                }}\n                            </app-icon>\n                            <div>\n                                Set as\n                                {{\n                                    row.extension_data.remote\n                                        ? 'Onsite'\n                                        : 'Remote'\n                                }}\n                                Visitor\n                            </div>\n                        </div>\n                    </button>\n                    <button\n                        mat-menu-item\n                        *ngIf=\"can_print\"\n                        (click)=\"printQRCode()\"\n                    >\n                        <div class=\"flex items-center space-x-2\">\n                            <app-icon class=\"text-2xl\">print</app-icon>\n                            <div>Print QR Code</div>\n                        </div>\n                    </button>\n                    <a mat-menu-item [href]=\"'mailto:' + row?.asset_id\">\n                        <div class=\"flex items-center space-x-2\">\n                            <app-icon class=\"text-2xl\">email</app-icon>\n                            <div>\n                                Email\n                                {{\n                                    row?.user_email === row?.asset_id\n                                        ? 'Host'\n                                        : 'Guest'\n                                }}\n                            </div>\n                        </div>\n                    </a>\n                    <button\n                        mat-menu-item\n                        (click)=\"row.checked_in ? checkout(row) : checkin(row)\"\n                        *ngIf=\"!row.checked_out_at\"\n                    >\n                        <div class=\"flex items-center space-x-2\">\n                            <app-icon class=\"text-2xl\">\n                                {{\n                                    row.checked_in\n                                        ? 'event_busy'\n                                        : 'event_available'\n                                }}\n                            </app-icon>\n                            <div>\n                                {{ row.checked_in ? 'Checkout' : 'Checkin' }}\n                                Guest\n                            </div>\n                        </div>\n                    </button>\n                    <ng-container *ngIf=\"row.linked_event\">\n                        <button mat-menu-item (click)=\"checkinAllVisitors(row)\">\n                            <div class=\"flex items-center space-x-2\">\n                                <app-icon class=\"text-2xl\">\n                                    event_available\n                                </app-icon>\n                                <div>Checkin all for Meeting</div>\n                            </div>\n                        </button>\n                        <button\n                            mat-menu-item\n                            (click)=\"checkoutAllVisitors(row)\"\n                        >\n                            <div class=\"flex items-center space-x-2\">\n                                <app-icon class=\"text-2xl text-error\">\n                                    event_busy\n                                </app-icon>\n                                <div>Checkout all for Meeting</div>\n                            </div>\n                        </button>\n                    </ng-container>\n                </mat-menu>\n            </div>\n        </ng-template>\n        <ng-template #notes_template let-row=\"row\">\n            <div class=\"relative p-4 mx-auto\">\n                <button\n                    matTooltip=\"Edit Visitor Notes\"\n                    matTooltipPosition=\"left\"\n                    icon\n                    matRipple\n                    (click)=\"editVisitorNotes(row)\"\n                >\n                    <app-icon class=\"text-2xl\">edit_square</app-icon>\n                </button>\n                <div\n                    class=\"absolute top-1 right-1 bg-info text-info-content rounded-full h-4 w-4 flex items-center justify-center\"\n                    *ngIf=\"row.extension_data?.notes?.length\"\n                    matTooltip=\"Visitor Notes Available\"\n                >\n                    <app-icon\n                        className=\"material-symbols-rounded\"\n                        class=\"text-sm\"\n                    >\n                        info_i\n                    </app-icon>\n                </div>\n            </div>\n        </ng-template>\n        <button\n            class=\"bg-secondary hover:shadow-lg shadow absolute bottom-4 right-4 text-white h-12 w-12 z-20\"\n            matTooltip=\"Download Visitor List\"\n            matTooltipPosition=\"left\"\n            icon\n            matRipple\n            *ngIf=\"(guests | async)?.length\"\n            (click)=\"downloadVisitorList()\"\n        >\n            <app-icon>download</app-icon>\n        </button>\n        <div class=\"w-full h-8\"></div>\n    `,\n    styles: [``],\n})\nexport class GuestListingComponent extends AsyncHandler {\n    public readonly guests = this._state.filtered_bookings;\n    public readonly search = this._state.search;\n    public readonly filters = this._state.filters;\n    public inductions_enabled = false;\n\n    public get timezone() {\n        const use_tz = this._settings.get('app.bookings.use_building_timezone');\n        const bld_tz = this._org.building.timezone;\n        return use_tz &&\n            bld_tz !== Intl.DateTimeFormat().resolvedOptions().timeZone\n            ? bld_tz\n            : '';\n    }\n\n    public get tz() {\n        const tz = this.timezone;\n        if (!tz) return '';\n        return getTimezoneOffsetString(tz);\n    }\n\n    public readonly downloadVisitorList = () =>\n        this._state.downloadVisitorsList();\n\n    public readonly approveVisitor = (u) => this._state.approveVisitor(u);\n    public readonly declineVisitor = (u) => this._state.declineVisitor(u);\n    public readonly checkinAllVisitors = (u) =>\n        this._state.setCheckinStateForEvent(u.linked_event?.id, true);\n    public readonly checkoutAllVisitors = (u) =>\n        this._state.setCheckinStateForEvent(u.linked_event?.id, false);\n    public readonly setExt = (u, f, v) => this._state.setExt(u, f, v);\n    public readonly editVisitorNotes = (u) => this._state.editVisitorNotes(u);\n\n    public readonly checkin = async (item: Booking) => {\n        await this._state.setCheckinState(item, true).catch((e) => {\n            if (e !== 'User declined') notifyError(e);\n        });\n        this._state.poll();\n    };\n\n    public readonly checkout = async (item: Booking) => {\n        await this._state.setCheckinState(item, false).catch((_) => null);\n        this._state.poll();\n    };\n\n    public get has_parking() {\n        return (\n            this._settings.get('app.features')?.includes('parking') &&\n            this._settings.get('app.visitors.has_parking')\n        );\n    }\n\n    public get time_format() {\n        return this._settings.time_format;\n    }\n\n    public inducted(item: Booking) {\n        if (item.checked_in) return true;\n        return item.process_state.includes('declined')\n            ? false\n            : item.process_state.includes('inducted') || item.induction\n              ? true\n              : null;\n    }\n\n    constructor(\n        private _state: VisitorsStateService,\n        private _parking: ParkingStateService,\n        private _settings: SettingsService,\n        private _org: OrganisationService,\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'building',\n            this._org.active_building.subscribe(async (bld) => {\n                if (!bld) return;\n                const visitor_kiosk_app =\n                    this._settings.get('app.visitor_kiosk_app') ||\n                    'visitor-kiosk_app';\n                const metadata: any = await showMetadata(\n                    bld.id,\n                    visitor_kiosk_app,\n                ).toPromise();\n                this.inductions_enabled =\n                    metadata.details?.induction_enabled &&\n                    metadata.details?.induction_details;\n            }),\n        );\n    }\n\n    public async reserveParking(item: Booking) {\n        const id = await this._parking.editReservation(undefined, {\n            user: new User({ email: item.asset_id, name: item.asset_name }),\n            link_id: item.id,\n            date: item.date,\n            external_user: true,\n        });\n        if (id) {\n            await saveBooking(\n                new Booking({ ...item, parking_booking_id: id } as any),\n            ).toPromise();\n            this._state.poll();\n        }\n    }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { VisitorsStateService } from './visitors-state.service';\n\n@Component({\n    selector: '[app-visitors]',\n    template: `\n        <sidebar></sidebar>\n        <main class=\"relative w-full flex flex-col bg-base-200\">\n            <visitors-topbar class=\"w-full\"></visitors-topbar>\n            <guest-listings class=\"w-full flex-1 h-0\"></guest-listings>\n            <mat-progress-bar\n                class=\"w-full\"\n                *ngIf=\"loading | async\"\n                mode=\"indeterminate\"\n            ></mat-progress-bar>\n        </main>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                height: 100%;\n                width: 100%;\n            }\n        `,\n    ],\n})\nexport class VisitorsComponent implements OnInit, OnDestroy {\n    public readonly loading = this._state.loading;\n    public readonly filters = this._state.filters;\n\n    constructor(private _state: VisitorsStateService) {}\n\n    public ngOnInit() {\n        this._state.startPolling();\n    }\n\n    public ngOnDestroy() {\n        this._state.stopPolling();\n    }\n}\n","import { Component } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\n\n@Component({\n    selector: 'invite-visitor-modal',\n    template: `\n        <main class=\"relative min-w-[40rem] min-h-[40rem]\">\n            <invite-visitor-form (done)=\"onDone()\"></invite-visitor-form>\n        </main>\n    `,\n    styles: [``],\n})\nexport class InviteVisitorModalComponent {\n    constructor(\n        private _dialog_ref: MatDialogRef<InviteVisitorModalComponent>\n    ) {}\n\n    public onDone() {\n        this._dialog_ref.close();\n    }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { VisitorsStateService } from './visitors-state.service';\nimport { OrganisationService } from '@placeos/organisation';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { MatDialog } from '@angular/material/dialog';\nimport { InviteVisitorModalComponent } from './invite-visitor-modal.component';\nimport { combineLatest } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { SettingsService } from '@placeos/common';\n\n@Component({\n    selector: '[app-new-visitors]',\n    template: `\n        <app-topbar></app-topbar>\n        <div class=\"flex flex-1 h-px\">\n            <app-sidebar></app-sidebar>\n            <main class=\"flex flex-col flex-1 w-1/2 h-full\">\n                <div class=\"flex items-center px-8 py-4 space-x-2\">\n                    <h2 class=\"text-2xl font-medium\">Visitors</h2>\n                    <div class=\"flex-1 w-2\"></div>\n                    <searchbar\n                        class=\"mr-2\"\n                        (modelChange)=\"setSearch($event)\"\n                    ></searchbar>\n                    <button btn matRipple (click)=\"inviteVisitor()\">\n                        Invite Visitor\n                    </button>\n                </div>\n                <div class=\"flex items-center px-8 pb-4\">\n                    <mat-form-field\n                        appearance=\"outline\"\n                        class=\"no-subscript w-60\"\n                    >\n                        <mat-select\n                            [ngModel]=\"(filters | async)?.zones\"\n                            (ngModelChange)=\"updateZones($event)\"\n                            placeholder=\"All Levels\"\n                            multiple\n                        >\n                            <mat-option\n                                *ngFor=\"let level of levels | async\"\n                                [value]=\"level.id\"\n                            >\n                                <div class=\"flex flex-col-reverse\">\n                                    <div\n                                        class=\"text-xs opacity-30\"\n                                        *ngIf=\"use_region\"\n                                    >\n                                        {{\n                                            (level.parent_id | building)\n                                                ?.display_name\n                                        }}\n                                        <span class=\"opacity-0\"> - </span>\n                                    </div>\n                                    <div>\n                                        {{ level.display_name || level.name }}\n                                    </div>\n                                </div>\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n                    <div class=\"flex-1 w-2\"></div>\n                    <date-options (dateChange)=\"setDate($event)\"></date-options>\n                </div>\n                <div class=\"mx-8 flex-1 h-1/2 overflow-auto\">\n                    <guest-listings></guest-listings>\n                </div>\n                <mat-progress-bar\n                    class=\"w-full\"\n                    *ngIf=\"loading | async\"\n                    mode=\"indeterminate\"\n                ></mat-progress-bar>\n            </main>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n                background-color: var(--b1);\n            }\n        `,\n    ],\n})\nexport class NewVisitorsComponent implements OnInit, OnDestroy {\n    public readonly loading = this._state.loading;\n    public readonly filters = this._state.filters;\n    /** List of selected levels */\n    public zones: string[] = [];\n    /** List of levels for the active building */\n    public readonly levels = combineLatest([\n        this._org.active_building,\n        this._org.active_region,\n    ]).pipe(\n        map(([bld, region]) =>\n            this._settings.get('app.use_region')\n                ? this._org.levelsForRegion(region)\n                : this._org.levelsForBuilding(bld)\n        )\n    );\n    /** Set filtered date */\n    public readonly setDate = (date) => this._state.setFilters({ date });\n    /** Set filtered date */\n    public readonly setFilters = (filters) => this._state.setFilters(filters);\n    /** Set filter string */\n    public readonly setSearch = (str) => this._state.setSearchString(str);\n    /** Update active zones for desks */\n    public readonly updateZones = (zones) => {\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: { zone_ids: zones.join(',') },\n        });\n        this._state.setFilters({ zones });\n    };\n\n    public get use_region() {\n        return !!this._settings.get('app.use_region');\n    }\n\n    constructor(\n        private _state: VisitorsStateService,\n        private _org: OrganisationService,\n        private _router: Router,\n        private _route: ActivatedRoute,\n        private _dialog: MatDialog,\n        private _settings: SettingsService\n    ) {}\n\n    public inviteVisitor() {\n        this._dialog.open(InviteVisitorModalComponent);\n    }\n\n    public ngOnInit() {\n        this._state.startPolling();\n    }\n\n    public ngOnDestroy() {\n        this._state.stopPolling();\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Route } from '@angular/router';\n\nimport { UIModule } from '../ui/ui.module';\n\nimport { VisitorsComponent } from './visitors.component';\nimport { VisitorsTopbarComponent } from './visitors-topbar.component';\nimport { GuestListingComponent } from './guest-listing.component';\nimport { NewVisitorsComponent } from './new-visitors.component';\nimport { InviteVisitorModalComponent } from './invite-visitor-modal.component';\nimport { SharedBookingsModule } from '@placeos/bookings';\nimport { VisitorInductionModalComponent } from './visitor-induction-modal.component';\nimport { VisitorNotesModalComponent } from './visitor-notes-modal.component';\n\nconst ROUTES: Route[] = [\n    { path: '', component: VisitorsComponent },\n    { path: 'new', component: NewVisitorsComponent },\n];\n\n@NgModule({\n    declarations: [\n        NewVisitorsComponent,\n        VisitorsComponent,\n        VisitorsTopbarComponent,\n        GuestListingComponent,\n        InviteVisitorModalComponent,\n        VisitorInductionModalComponent,\n        VisitorNotesModalComponent,\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        UIModule,\n        SharedBookingsModule,\n        RouterModule.forChild(ROUTES),\n    ],\n})\nexport class VisitorsModule {}\n\n/**\nzone_ids: zone-EmWVhHG3Bhz\nperiod_start: 1604926800\nperiod_end: 1605013199\n\nperiod_start: 1605013200\nperiod_end: 1605099599\nzones: zone-EmWVhHG3Bhz\n\n*/\n","import { HashMap } from '@placeos/common';\nimport { getUnixTime } from 'date-fns';\n\nexport class MapLocation {\n    /** Source that the location was generated */\n    public type: 'desk' | 'wireless' | 'meeting' | 'other';\n    /** Details of the location */\n    public position: string | { x: number, y: number };\n    /** Accuracy of the location data */\n    public variance: number;\n    /** Unix epoch in seconds that the data was last updated */\n    public last_seen: number;\n    /** ID of the level associated with the location */\n    public level: string;\n    /** ID of the building associated with the location */\n    public building: string;\n    /** Whether user is currently at the location if fixed */\n    public at_location: boolean;\n    /**  */\n    public coordinates_from:\n        | 'top-left'\n        | 'top-right'\n        | 'bottom-left'\n        | 'bottom-right';\n\n    constructor(_data: HashMap = {}) {\n        this.type = _data.type || _data.location || 'other';\n        this.position = _data.position ||\n            _data.map_id || _data.asset_id || {\n                x: _data.x / _data.map_width || 0,\n                y: _data.y / _data.map_height || 0,\n            };\n        this.variance = _data.variance || 0;\n        this.last_seen = _data.last_seen || getUnixTime(new Date());\n        this.level = _data.level;\n        this.building = _data.building;\n        this.at_location = !!_data.at_location;\n        this.coordinates_from = _data.coordinates_from || 'top-left';\n    }\n}\n"],"x_google_ignoreList":[]}