(self.webpackChunkplaceos=self.webpackChunkplaceos||[]).push([["apps_concierge_src_app_facilities_facilities_module_ts"],{9816:(e,t,s)=>{"use strict";s.r(t),s.d(t,{FacilitiesModule:()=>w});var i=s(1511),n=s(6073),o=s(7629),l=s(787),a=s(1572),r=s(1490),c=s(4762),d=s(3530),p=s(6687),u=s(7731),h=s(1496),g=s(6283),f=s(4786),m=s(2319),_=s(1522);function Z(e,t){if(1&e&&(a.TgZ(0,"mat-option",6),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.Q6J("value",e.id),a.xp6(1),a.hij(" ",e.display_name||e.name," ")}}function x(e,t){if(1&e&&(a.TgZ(0,"mat-option",6),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.Q6J("value",e.id),a.xp6(1),a.hij(" ",e.name," ")}}let v=(()=>{class e extends p.KG{constructor(e,t,s,i){super(),this._state=e,this._org=t,this._route=s,this._router=i,this.zones=[],this.types=[{id:"internal",name:"Internal"},{id:"external",name:"External"},{id:"cancelled",name:"Cancelled"}],this.type_list=this.types.map(e=>`${e.id}`),this.setDate=e=>this._state.setDate(e),this.levels=this._org.active_levels,this.updateZones=e=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_ids:e.join(",")}}),this._state.setZones(e)},this.updateTypes=e=>this._state.setFilters({hide_type:this.types.reduce((t,s)=>(!e.includes(s.id)&&t.push(s),t),[])})}ngOnInit(){return(0,c.mG)(this,void 0,void 0,function*(){yield this._org.initialised.pipe((0,d.P)(e=>e)).toPromise(),this.subscription("route.query",this._route.queryParamMap.subscribe(e=>{if(e.has("zone_ids")){const t=e.get("zone_ids").split(",");if(t.length){const e=this._org.levelWithID(t);if(!e)return;this._org.building=this._org.buildings.find(t=>t.id===e.parent_id),this.zones=t}}})),this.subscription("levels",this._org.active_levels.subscribe(e=>{this.zones=this.zones.filter(t=>e.find(e=>e.id===t)),!this.zones.length&&e.length&&this.zones.push(e[0].id),this.updateZones(this.zones)})),this.updateTypes(this.type_list)})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(u.Y),a.Y36(h.w7),a.Y36(o.gz),a.Y36(o.F0))},e.\u0275cmp=a.Xpm({type:e,selectors:[["facilities-topbar"]],features:[a.qOj],decls:11,vars:6,consts:[["appearance","outline"],["multiple","","placeholder","All Levels",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["multiple","","placeholder","No Events",3,"ngModel","ngModelChange"],[1,"flex-full"],[1,"mr-2"],[3,"value"]],template:function(e,t){1&e&&(a.TgZ(0,"mat-form-field",0),a.TgZ(1,"mat-select",1),a.NdJ("ngModelChange",function(e){return t.zones=e})("ngModelChange",function(e){return t.updateZones(e)}),a.YNc(2,Z,2,2,"mat-option",2),a.ALo(3,"async"),a.qZA(),a.qZA(),a.TgZ(4,"mat-form-field",0),a.TgZ(5,"mat-select",3),a.NdJ("ngModelChange",function(e){return t.type_list=e})("ngModelChange",function(e){return t.updateTypes(e)}),a.TgZ(6,"mat-select-trigger"),a._uU(7,"Legend"),a.qZA(),a.YNc(8,x,2,2,"mat-option",2),a.qZA(),a.qZA(),a._UZ(9,"div",4),a._UZ(10,"searchbar",5)),2&e&&(a.xp6(1),a.Q6J("ngModel",t.zones),a.xp6(1),a.Q6J("ngForOf",a.lcZ(3,4,t.levels)),a.xp6(3),a.Q6J("ngModel",t.type_list),a.xp6(3),a.Q6J("ngForOf",t.types))},directives:[g.KE,f.gD,n.JJ,n.On,i.sg,f.$L,m.U,_.ey],pipes:[i.Ov],styles:["[_nghost-%COMP%]{display:flex;align-items:center;background-color:#fff;height:5em;padding:0 2em}.flex-full[_ngcontent-%COMP%]{flex:1;width:.5em}mat-form-field[_ngcontent-%COMP%]{height:3.25em;width:8em;margin-left:1em}"]}),e})();var b=s(8870),y=s(7256),A=s(2571);let M=(()=>{class e extends p.KG{constructor(e,t){super(),this._explore=e,this._state=t,this.url=this._explore.map_url,this.styles=this._explore.map_styles,this.positions=this._explore.map_positions,this.features=this._explore.map_features,this.actions=this._explore.map_actions}ngOnInit(){this.subscription("active_zone",this._state.zones.subscribe(e=>this._explore.setLevel(e[0])))}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(b.ck),a.Y36(u.Y))},e.\u0275cmp=a.Xpm({type:e,selectors:[["facilities-map"]],features:[a.qOj],decls:8,vars:18,consts:[[3,"src","zoom","center","styles","features","actions"],[1,"absolute","bottom-0","right-0"]],template:function(e,t){1&e&&(a._UZ(0,"i-map",0),a.ALo(1,"async"),a.ALo(2,"async"),a.ALo(3,"async"),a.ALo(4,"async"),a.ALo(5,"async"),a.ALo(6,"async"),a._UZ(7,"explore-zoom-controls",1)),2&e&&a.Q6J("src",a.lcZ(1,6,t.url))("zoom",a.lcZ(2,8,t.positions).zoom)("center",a.lcZ(3,10,t.positions).center)("styles",a.lcZ(4,12,t.styles))("features",a.lcZ(5,14,t.features))("actions",a.lcZ(6,16,t.actions))},directives:[y.p,A.s],pipes:[i.Ov],styles:["[_nghost-%COMP%]{position:relative;height:100%;width:100%}"]}),e})();var q=s(1548);const O=function(){return{class:"material-icons",content:"account_circle"}},C=function(){return{class:"material-icons",content:"sentiment_very_satisfied"}};let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Xpm({type:e,selectors:[["facilities-status"]],decls:23,vars:8,consts:[[1,"rounded-lg","flex-1","w-full","shadow-sm","p-6"],[1,"mt-0","mb-4"],[1,"w-full","flex","items-center","border","mb-2","rounded-lg"],["name","status",1,"rounded-full"],[3,"icon"],[1,"flex-1","text-bold","text-xs"],[1,"text-bold","p-4"],[1,"text-right","text-bold","mr-4"],[1,"rounded","w-full","shadow-sm","p-6"],[1,"mt-0","mb-2"],["name","mood",1,"flex","items-center","w-full","border","rounded-lg","overflow-hidden"],[1,"bg-light","text-2xl","px-1",3,"icon"],[1,"px-4","text-sm","text-bold"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"h3",1),a._uU(2,"People Count"),a.qZA(),a.TgZ(3,"div",2),a.TgZ(4,"div",3),a._UZ(5,"app-icon",4),a.qZA(),a.TgZ(6,"div",5),a._uU(7),a.qZA(),a.TgZ(8,"div",6),a._uU(9),a.qZA(),a.qZA(),a.TgZ(10,"div",7),a._uU(11),a.qZA(),a.qZA(),a.TgZ(12,"div",8),a.TgZ(13,"h3",9),a._uU(14,"Mood"),a.qZA(),a.TgZ(15,"div",10),a._UZ(16,"app-icon",11),a.TgZ(17,"div",12),a._uU(18,"4/5 Satisfied"),a.qZA(),a.qZA(),a.TgZ(19,"h4"),a._uU(20,"Feedback:"),a.qZA(),a.TgZ(21,"p"),a._uU(22),a.qZA(),a.qZA()),2&e&&(a.xp6(5),a.Q6J("icon",a.DdM(6,O)),a.xp6(2),a.Oqu("Admin Services"),a.xp6(2),a.Oqu("24"),a.xp6(2),a.hij("Total: ",t.total||0,""),a.xp6(5),a.Q6J("icon",a.DdM(7,C)),a.xp6(6),a.Oqu(t.feedback))},directives:[q.o],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;background-color:#f8f8f8;width:20em;padding:2em}.border[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1)}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{background-color:#fff}.bg-light[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.05)}[name=status][_ngcontent-%COMP%]{margin:.5em;border:4px solid #21a453;border-radius:100%}"]}),e})();const P=["app-facilities",""],U=[{path:"",component:(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Xpm({type:e,selectors:[["","app-facilities",""]],attrs:P,decls:6,vars:0,consts:[[1,"relative"],[1,"flex","flex-1"],[1,"flex-1","h-full"],[1,"h-full","space-y-4"]],template:function(e,t){1&e&&(a._UZ(0,"sidebar"),a.TgZ(1,"main",0),a._UZ(2,"facilities-topbar"),a.TgZ(3,"div",1),a._UZ(4,"facilities-map",2),a._UZ(5,"facilities-status",3),a.qZA(),a.qZA())},directives:[r.k,v,M,T],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%;background:var(--bg)}main[_ngcontent-%COMP%], sidebar[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}facilities-map[_ngcontent-%COMP%], main[_ngcontent-%COMP%]{min-width:50%}"]}),e})()}];let w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[i.ez,n.u5,l.v,b.P2,o.Bz.forChild(U)]]}),e})()}}]);
//# sourceMappingURL=apps_concierge_src_app_facilities_facilities_module_ts.js.map