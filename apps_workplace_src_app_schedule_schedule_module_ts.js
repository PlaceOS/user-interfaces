"use strict";(self.webpackChunkworkplace=self.webpackChunkworkplace||[]).push([["apps_workplace_src_app_schedule_schedule_module_ts"],{1671:(Te,F,o)=>{o.r(F),o.d(F,{AppScheduleModule:()=>$e});var h=o(4053),c=o(316),g=o(4456),p=o(9805),G=o(8390),C=o(6591),m=o(9204),u=o(1157),V=o(6337),w=o(1257),D=o(8797),b=o(5443),y=o(3602),M=o(9184),e=o(8559),_=o(9434),f=o(5060),E=o(1034),I=o(4950),Y=o(5175),k=o(1977),L=o(7984),X=o(6354),v=o(7915),R=o(1543),N=o(2011);const U=["schedule-list-item",""],B=(i,a)=>["/schedule","view",i,a];function O(i,a){if(1&i&&(e.j41(0,"div",7),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" No events for ",e.i5U(2,1,t.item.date,"longDate")," ")}}function A(i,a){if(1&i&&(e.j41(0,"div",4)(1,"div",5),e.EFF(2),e.nI1(3,"date"),e.k0s(),e.DNE(4,O,3,4,"div",6),e.k0s()),2&i){const t=e.XpG(2);e.R7$(2),e.Lme(" ",e.i5U(3,3,t.item.date,"longDate")," (",t.item.duration,") "),e.R7$(2),e.Y8G("ngIf",!t.item.duration)}}function P(i,a){if(1&i&&(e.j41(0,"div",17)(1,"app-icon",18),e.EFF(2,"place"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.nI1(5,"slice"),e.k0s()()),2&i){const t=e.XpG(3);e.R7$(4),e.SpI(" ",e.brH(5,1,(null==t.item?null:t.item.location)||(null==t.item?null:t.item.description),0,255)," ")}}function J(i,a){if(1&i&&(e.j41(0,"a",8),e.nI1(1,"space"),e.nI1(2,"async"),e.nI1(3,"space"),e.nI1(4,"async"),e.j41(5,"div",9)(6,"div",10),e.nrm(7,"app-icon",11),e.j41(8,"div",12),e.EFF(9),e.nI1(10,"date"),e.k0s(),e.j41(11,"div",13),e.EFF(12),e.k0s()(),e.j41(13,"div",14)(14,"div",15),e.EFF(15),e.k0s(),e.DNE(16,P,6,5,"div",16),e.k0s()()()),2&i){let t;const n=e.XpG(2);e.AVh("opacity-50",n.has_ended),e.Y8G("routerLink",e.l_i(25,B,(null==n.item?null:n.item.id)+(null!=(t=e.bMT(2,16,e.bMT(1,14,null==n.item||null==n.item.system?null:n.item.system.email)))&&t.id?"|"+(null==(t=e.bMT(4,20,e.bMT(3,18,null==n.item||null==n.item.system?null:n.item.system.email)))?null:t.id):""),n.type)),e.R7$(6),e.AVh("bg-success","approved"===n.status)("bg-warning","tentative"===n.status)("bg-error","declined"===n.status),e.R7$(),e.Y8G("icon",n.icon),e.R7$(2),e.SpI(" ",null!=n.item&&n.item.all_day?"All Day":e.i5U(10,22,null==n.item?null:n.item.date,"shortTime")," "),e.R7$(3),e.SpI(" (",n.status,") "),e.R7$(3),e.SpI(" ",(null==n.item?null:n.item.title)||"Untitled Event"," "),e.R7$(),e.Y8G("ngIf",(null==n.item?null:n.item.location)||(null==n.item?null:n.item.description))}}function H(i,a){if(1&i&&(e.qex(0,1),e.DNE(1,A,5,6,"div",2)(2,J,17,28,"a",3),e.bVm()),2&i){const t=e.XpG();e.Y8G("ngSwitch",null==t.item?null:t.item.id),e.R7$(),e.Y8G("ngSwitchCase","date")}}let z=(()=>{class i{get type(){return this.item instanceof v.Qr?"booking":"event"}get has_ended(){return!this.item||"date"===this.item.id||(0,R.d)(new Date,this.item.date+60*this.item.duration*1e3)}get icon(){if("declined"===this.status)return"event_busy";if(this.item.asset_id)switch(this.item.booking_type){case"room":return{content:"meeting_room"};case"desk":return{type:"img",src:"assets/img/desk.svg"};case"parking":return{content:"local_parking"}}return{content:"event"}}get status(){return this.item&&"date"!==this.item.id?this.item.status:"declined"}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["","schedule-list-item",""]],inputs:{item:"item"},attrs:U,decls:1,vars:1,consts:[[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["date","",4,"ngSwitchCase"],["btn","","matRipple","","item","","class","rounded-none my-1 mx-4 w-[calc(100%-2rem)] h-20 bg-base-100 hover:shadow p-0",3,"opacity-50","routerLink",4,"ngSwitchDefault"],["date",""],[1,"mx-4","w-full","h-12","text-xl","flex","items-center"],["class","mx-4 w-full h-10 text-lg text-center font-normal opacity-60",4,"ngIf"],[1,"mx-4","w-full","h-10","text-lg","text-center","font-normal","opacity-60"],["btn","","matRipple","","item","",1,"rounded-none","my-1","mx-4","w-[calc(100%-2rem)]","h-20","bg-base-100","hover:shadow","p-0",3,"routerLink"],[1,"flex","items-center","border","border-base-200"],["status","",1,"h-20","w-20","flex","flex-col","items-center","justify-center","text-white","leading-tight"],[1,"text-2xl",3,"icon"],[1,"font-normal"],[1,"capitalize","text-xs","font-medium"],[1,"flex-1","flex","flex-col","text-left","p-2"],[1,"text-xl","pl-1"],["class","flex items-center font-normal",4,"ngIf"],[1,"flex","items-center","font-normal"],[1,"text-lg","mr-1"]],template:function(n,s){1&n&&e.DNE(0,H,3,2,"ng-container",0),2&n&&e.Y8G("ngIf",s.item)},dependencies:[c.bT,c.ux,c.e1,c.fG,_.R,f.r6,p.Wk,c.Jj,c.P9,c.vh,N.J],encapsulation:2})}return i})();var W=o(9577);function Q(i,a){if(1&i&&(e.j41(0,"mat-option",21),e.EFF(1),e.nI1(2,"user"),e.nI1(3,"async"),e.k0s()),2&i){let t;const n=a.$implicit;e.Y8G("value",n.id),e.R7$(),e.JRh((null==(t=e.bMT(3,4,e.bMT(2,2,n.id)))?null:t.name)||n.id)}}function Z(i,a){1&i&&e.nrm(0,"div",22),2&i&&e.Y8G("item",a.$implicit)}function K(i,a){1&i&&e.nrm(0,"mat-progress-bar",23)}let q=(()=>{class i{get user(){return(0,u.Ny)()}constructor(t){this._state=t,this.today=new Date,this.max_date=(0,V.P)(this.today,4),this.options=this._state.options,this.loading=this._state.loading,this.calendars=this._state.calendars,this.date=this.options.pipe((0,b.T)(n=>new Date(n.start))),this.setOptions=n=>this._state.setOptions(n),this.event_list=this._state.events.pipe((0,b.T)(n=>{let s=[],l=new Date(this.today);for(;l<this.max_date;){const r=n.filter(d=>(0,w.r)(l,d.date));s=r.length?[...s,{id:"date",date:l.valueOf(),duration:r.length},...r]:[...s,{id:"date",date:l.valueOf(),duration:0}],l=(0,D.f)(l,1)}return s}))}ngOnInit(){this._state.startPolling()}ngOnDestroy(){this._state.stopPolling()}setDate(t){this._state.setOptions({start:t.valueOf()})}updateDate(t){var n=this;return(0,m.A)(function*(){const l=((yield n.event_list.pipe((0,y.s)(1)).toPromise())||[])[t]||{};l&&n.setDate(l.date)})()}scrollTo(t){var n=this;return(0,m.A)(function*(){const s=yield n.event_list.pipe((0,y.s)(1)).toPromise(),l=s.findIndex(r=>"date"===r.id&&(0,w.r)(r.date,t));if(l>=0&&n._viewport){let r=0;for(let d=0;d<s.length&&d<l;d++)r+=1;n._viewport.scrollTo({top:Math.round(88*r),behavior:"smooth"})}n.setDate(t)})()}trackByFn(t,n){return n?`${n.id}|${n.date}`:void 0}static#e=this.\u0275fac=function(n){return new(n||i)(e.rXU(M.y))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["schedule-list"]],viewQuery:function(n,s){if(1&n&&e.GBs(h.d6,7),2&n){let l;e.mGM(l=e.lsd())&&(s._viewport=l.first)}},decls:35,vars:22,consts:[["dateMenu",""],["picker",""],["legend","matMenu"],[1,"w-full","h-16","flex","items-center","justify-between","bg-base-100","border-b","border-base-200","shadow","p-2"],["appearance","outline",1,"h-[3.25rem]"],[3,"ngModelChange","ngModel","placeholder"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","items-center","space-x-2"],["matRipple","",1,"clear","underline",3,"matMenuTriggerFor"],["icon","",1,"relative"],["matInput","",1,"opacity-0","absolute","inset-0",3,"ngModelChange","ngModel","matDatepicker","min","max"],["matSuffix","",1,"opacity-0","absolute","inset-0",3,"for"],[1,"w-full","flex-1","overflow-hidden","bg-base-200"],["itemSize","88",1,"h-full","w-full",3,"scrolledIndexChange"],["schedule-list-item","",3,"item",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["mode","indeterminate","class","w-full",4,"ngIf"],["xPosition","before"],[1,"flex","items-center","px-4","py-2","hover:bg-neutral"],[1,"bg-success","h-2","w-2","rounded-full","mr-4"],[1,"bg-warning","h-2","w-2","rounded-full","mr-4"],[1,"bg-error","h-2","w-2","rounded-full","mr-4"],[3,"value"],["schedule-list-item","",3,"item"],["mode","indeterminate",1,"w-full"]],template:function(n,s){if(1&n){const l=e.RV6();e.j41(0,"div",3)(1,"mat-form-field",4)(2,"mat-select",5),e.nI1(3,"async"),e.bIt("ngModelChange",function(d){return e.eBV(l),e.Njj(s.setOptions({calendar:d}))}),e.DNE(4,Q,4,6,"mat-option",6),e.nI1(5,"async"),e.k0s()(),e.j41(6,"div",7)(7,"button",8),e.EFF(8," Legend "),e.k0s(),e.j41(9,"button",9,0)(11,"app-icon"),e.EFF(12,"event"),e.k0s(),e.j41(13,"input",10),e.nI1(14,"async"),e.bIt("ngModelChange",function(d){return e.eBV(l),e.Njj(s.scrollTo(d))}),e.k0s(),e.nrm(15,"mat-datepicker-toggle",11),e.k0s(),e.nrm(16,"mat-datepicker",null,1),e.k0s()(),e.j41(18,"div",12)(19,"cdk-virtual-scroll-viewport",13),e.bIt("scrolledIndexChange",function(d){return e.eBV(l),e.Njj(s.updateDate(d))}),e.DNE(20,Z,1,1,"div",14),e.nI1(21,"async"),e.k0s()(),e.DNE(22,K,1,0,"mat-progress-bar",15),e.nI1(23,"async"),e.j41(24,"mat-menu",16,2)(26,"div",17),e.nrm(27,"div",18),e.EFF(28," Approved "),e.k0s(),e.j41(29,"div",17),e.nrm(30,"div",19),e.EFF(31," Tentative "),e.k0s(),e.j41(32,"div",17),e.nrm(33,"div",20),e.EFF(34," Declined "),e.k0s()()}if(2&n){let l;const r=e.sdS(17),d=e.sdS(25);e.R7$(2),e.Y8G("ngModel",null==(l=e.bMT(3,12,s.options))?null:l.calendar)("placeholder",null==s.user?null:s.user.name),e.R7$(2),e.Y8G("ngForOf",e.bMT(5,14,s.calendars)),e.R7$(3),e.Y8G("matMenuTriggerFor",d),e.R7$(6),e.Y8G("ngModel",e.bMT(14,16,s.date))("matDatepicker",r)("min",s.today)("max",s.max_date),e.R7$(2),e.Y8G("for",r),e.R7$(5),e.Y8G("cdkVirtualForOf",e.bMT(21,18,s.event_list))("cdkVirtualForTrackBy",s.trackByFn),e.R7$(2),e.Y8G("ngIf",e.bMT(23,20,s.loading))}},dependencies:[c.Sq,c.bT,g.me,g.BC,g.vS,_.R,f.wT,E.kk,E.Cp,I.rl,I.yw,Y.VO,f.r6,k.Vh,k.bZ,k.bU,L.fg,h.yg,h.E$,h.d6,X.HM,z,c.Jj,W.a],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}\n\n/*# sourceMappingURL=schedule-list.component.ts-angular-inline--131.css.map*/"]})}return i})();var j=o(9134),ee=o(9675),S=o(4351),$=o(2587),T=o(1134);const te=()=>["/schedule"];function ne(i,a){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"date"),e.nI1(3,"date"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Lme(" at ",e.i5U(2,2,t.event.date,"shortTime")," ~ ",e.i5U(3,5,t.event.date+60*t.event.duration*1e3,"shortTime")," ")}}function ie(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",18),e.bIt("click",function(){e.eBV(t);const s=e.XpG(3);return e.Njj(s.viewLocation())}),e.EFF(1," Map "),e.k0s()}}function se(i,a){if(1&i&&(e.j41(0,"div",14)(1,"div",11)(2,"app-icon"),e.EFF(3,"menu_book"),e.k0s()(),e.j41(4,"div",12),e.EFF(5),e.k0s(),e.DNE(6,ie,2,0,"button",17),e.k0s()),2&i){const t=e.XpG(2);e.R7$(5),e.SpI(" ",t.event.description||"<No Asset>"," "),e.R7$(),e.Y8G("ngIf",t.event.extension_data.map_id&&t.can_view_location)}}function oe(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",19)(1,"button",20),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.confirmDelete())}),e.EFF(2),e.k0s()()}if(2&i){const t=e.XpG(2);e.R7$(),e.Y8G("disabled",t.loading),e.R7$(),e.SpI(" ",t.is_host?"Delete":"Decline"," Event ")}}function le(i,a){if(1&i&&(e.j41(0,"div",8)(1,"h2",9),e.EFF(2),e.k0s(),e.j41(3,"div",10)(4,"div",11)(5,"app-icon"),e.EFF(6,"event"),e.k0s()(),e.j41(7,"div",12),e.EFF(8),e.nI1(9,"date"),e.DNE(10,ne,4,8,"span",13),e.k0s()(),e.j41(11,"div",14)(12,"div",11)(13,"app-icon"),e.EFF(14,"schedule"),e.k0s()(),e.j41(15,"div",12),e.EFF(16),e.k0s()(),e.DNE(17,se,7,2,"div",15)(18,oe,3,2,"div",16),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.SpI(" ",t.event.title," "),e.R7$(6),e.SpI(" ",e.i5U(9,6,t.event.date,"longDate")," "),e.R7$(2),e.Y8G("ngIf",!t.event.all_day&&t.event.duration<720),e.R7$(6),e.SpI(" ",!t.event.all_day&&t.event.duration<720?t.duration:"All Day"," "),e.R7$(),e.Y8G("ngIf",t.event.asset_id),e.R7$(),e.Y8G("ngIf",!t.has_ended&&t.is_host)}}function ae(i,a){1&i&&(e.j41(0,"div",21),e.nrm(1,"mat-spinner",22),e.j41(2,"p"),e.EFF(3,"Loading booking data..."),e.k0s()()),2&i&&(e.R7$(),e.Y8G("diameter",32))}let re=(()=>{class i extends u.Tv{get is_host(){return this.event?.user_email===(0,u.Ny)()?.email}get can_view_location(){return!this._settings.get("app.no_maps")}get duration(){return this.event.all_day||this.event.duration>=720?"All Day":(0,j.a)({hours:Math.floor(this.event?.duration/60),minutes:this.event?.duration%60})}get has_ended(){return this.event&&(0,R.d)(new Date,(0,ee.z)(this.event.date,this.event.duration))}constructor(t,n,s,l,r){super(),this._route=t,this._router=n,this._dialog=s,this._bookings=l,this._settings=r}ngOnInit(){var t=this;this.subscription("route.params",this._route.paramMap.subscribe(function(){var n=(0,m.A)(function*(s){s.has("id")&&(t.event=yield(0,v.DO)(s.get("id")).toPromise().catch(()=>null))});return function(s){return n.apply(this,arguments)}}())),this.timeout("return",()=>this.event?"":this._router.navigate(["/schedule"]),8e3)}viewLocation(){this._dialog.open(S.VJ,{maxWidth:"95vw",maxHeight:"95vh",data:{item:{id:this.event.asset_id,map_id:this.event.extension_data.map_id,name:this.event.description,zones:this.event.zones}}})}editEvent(){this._bookings.newForm(this.event),this._router.navigate(["/book","desks","form"])}confirmDelete(){var t=this;return(0,m.A)(function*(){const n=yield(0,u.GE)({title:(t.is_host?"Delete":"Decline")+" event",content:`Are you sure you wish to ${t.is_host?"delete":"decline"} this event?`,icon:{content:t.is_host?"delete":"event_busy"}},t._dialog);"done"===n.reason&&(n.loading("Removing booking..."),yield(0,v.vB)(t.event.id).toPromise().catch(s=>{throw n.loading(""),(0,u.UG)(`Error removing booking. ${s}`),s}),(0,u.VX)("Successfully removed booking."),t._router.navigate(["/schedule"]),n.close())})()}static#e=this.\u0275fac=function(n){return new(n||i)(e.rXU(p.nX),e.rXU(p.Ix),e.rXU($.bZ),e.rXU(v.nx),e.rXU(u.h$))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["schedule-view-booking"]],inputs:{event:"event"},features:[e.Vt3],decls:11,vars:4,consts:[["load_state",""],["topbar","",1,""],["btn","","matRipple","",1,"clear","h-[2.75rem]","text-white",3,"routerLink"],[1,"flex","items-center","justify-center","h-full"],[1,"text-xl"],[1,"ml-2","mx-4"],[1,"flex-1","w-full","flex","flex-col","items-center","bg-base-200","p-4","overflow-auto"],["class","max-w-full w-[28rem] bg-base-100 border border-base-200 px-4 pb-4 divide-y divide-base-200",4,"ngIf","ngIfElse"],[1,"max-w-full","w-[28rem]","bg-base-100","border","border-base-200","px-4","pb-4","divide-y","divide-base-200"],[1,"text-xl","uppercase","font-medium","w-full","my-4"],[1,"flex","items-center","py-2","space-x-2","w-full","!border-none"],[1,"p-2","rounded-full","bg-base-200","mr-2"],[1,"flex-1","truncate"],[4,"ngIf"],[1,"flex","items-center","py-2","space-x-2","w-full"],["class","flex items-center py-2 space-x-2 w-full",4,"ngIf"],["class","flex items-center justify-center space-x-2 mt-4 !border-none",4,"ngIf"],["matRipple","","locate","","class","bg-transparent border-none underline text-black",3,"click",4,"ngIf"],["matRipple","","locate","",1,"bg-transparent","border-none","underline","text-black",3,"click"],[1,"flex","items-center","justify-center","space-x-2","mt-4","!border-none"],["matRipple","","remove","",1,"w-32","error","inverse",3,"click","disabled"],[1,"h-full","w-full","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]],template:function(n,s){if(1&n&&(e.j41(0,"div",1)(1,"a",2)(2,"div",3)(3,"app-icon",4),e.EFF(4,"arrow_back"),e.k0s(),e.j41(5,"span",5),e.EFF(6,"Back"),e.k0s()()()(),e.j41(7,"div",6),e.DNE(8,le,19,9,"div",7),e.k0s(),e.DNE(9,ae,4,1,"ng-template",null,0,e.C5r)),2&n){const l=e.sdS(10);e.R7$(),e.Y8G("routerLink",e.lJ4(3,te)),e.R7$(7),e.Y8G("ngIf",s.event)("ngIfElse",l)}},dependencies:[c.bT,_.R,f.r6,T.LG,p.Wk,c.vh],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[topbar][_ngcontent-%COMP%]{background-color:#00539f}[list][_ngcontent-%COMP%]{transition:height .2s}\n\n/*# sourceMappingURL=schedule-view-booking.component.ts-angular-inline--132.css.map*/"]})}return i})();var x=o(8113),ce=o(2168),de=o(3574),ue=o(640),pe=o(4616);const me=()=>["/schedule"];function ve(i,a){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"date"),e.nI1(3,"date"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Lme("at ",e.i5U(2,2,t.event.date,"shortTime")," ~ ",e.i5U(3,5,t.event.date+60*t.event.duration*1e3,"shortTime"),"")}}function he(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",27),e.bIt("click",function(){e.eBV(t);const s=e.XpG().$implicit,l=e.XpG(2);return e.Njj(l.viewLocation(s))}),e.EFF(1," Map "),e.k0s()}}function fe(i,a){if(1&i&&(e.j41(0,"div",24)(1,"span",12),e.EFF(2),e.k0s(),e.nrm(3,"span",25),e.DNE(4,he,2,0,"button",26),e.k0s()),2&i){const t=a.$implicit,n=e.XpG(2);e.R7$(2),e.Lme(" ",t.display_name||t.name," [",(null==t.level?null:t.level.display_name)||(null==t.level?null:t.level.name),"] "),e.R7$(),e.AVh("bg-success","accepted"===t.response_status)("bg-warning","tentative"===t.response_status)("bg-error","declined"===t.response_status),e.R7$(),e.Y8G("ngIf",n.can_view_location)}}function ge(i,a){if(1&i&&(e.j41(0,"div",28),e.nrm(1,"a-user-avatar",29),e.j41(2,"span",12),e.EFF(3),e.k0s(),e.nrm(4,"span",30),e.k0s()),2&i){const t=a.$implicit;e.R7$(),e.Y8G("user",t),e.R7$(2),e.JRh(t.name||t.email),e.R7$(),e.AVh("bg-success","accepted"===t.response_status)("bg-warning","tentative"===t.response_status)("bg-error","declined"===t.response_status)}}function _e(i,a){if(1&i&&(e.j41(0,"div",39),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit,n=e.XpG(3);e.Y8G("matTooltip",n.optionsFor(t)),e.R7$(),e.Lme(" ",t.options.length," option",1===t.options.length?"":"s"," selected ")}}function xe(i,a){if(1&i&&(e.j41(0,"div",34)(1,"div",35)(2,"div",35),e.EFF(3),e.k0s(),e.DNE(4,_e,2,3,"div",36),e.k0s(),e.j41(5,"div",37),e.EFF(6),e.nI1(7,"currency"),e.k0s(),e.j41(8,"div",38),e.EFF(9),e.k0s()()),2&i){const t=a.$implicit;e.R7$(3),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngIf",t.options.length),e.R7$(2),e.SpI(" ",e.bMT(7,4,t.total_cost/100)," "),e.R7$(3),e.SpI(" ",t.quantity," ")}}function be(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",15)(1,"div",31)(2,"div",16)(3,"div",11)(4,"app-icon"),e.EFF(5,"group"),e.k0s()(),e.j41(6,"div",12),e.EFF(7),e.k0s(),e.j41(8,"button",32),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.show_catering=!s.show_catering)}),e.EFF(9),e.k0s()(),e.j41(10,"div",18),e.DNE(11,xe,10,6,"div",33),e.k0s()()()}if(2&i){const t=e.XpG(2);e.R7$(7),e.SpI(" ",(null==t.event.extension_data.catering[0]?null:t.event.extension_data.catering[0].item_count)||0," Catering Item(s) "),e.R7$(2),e.SpI(" ",t.show_people?"Hide":"Show"," "),e.R7$(),e.xc7("height",t.show_catering?3*(null==t.event.extension_data.catering[0]?null:t.event.extension_data.catering[0].items.length)+"rem":"0"),e.R7$(),e.Y8G("ngForOf",null==t.event.extension_data.catering[0]?null:t.event.extension_data.catering[0].items)}}function ke(i,a){if(1&i&&(e.j41(0,"div",14)(1,"div",11)(2,"app-icon"),e.EFF(3,"event_note"),e.k0s()(),e.nrm(4,"div",40),e.nI1(5,"sanitize"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(4),e.Y8G("innerHTML",e.bMT(5,1,t.event.body),e.npT)}}function Fe(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",44),e.bIt("click",function(){e.eBV(t);const s=e.XpG(3);return e.Njj(s.editEvent())}),e.EFF(1," Edit Event "),e.k0s()}if(2&i){const t=e.XpG(3);e.Y8G("disabled",t.loading)}}function we(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",41),e.DNE(1,Fe,2,1,"button",42),e.j41(2,"button",43),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.confirmDelete())}),e.EFF(3),e.k0s()()}if(2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.is_host),e.R7$(),e.Y8G("disabled",t.loading),e.R7$(),e.SpI(" ",t.is_host?"Delete":"Decline"," Event ")}}function ye(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",8)(1,"h2",9),e.EFF(2),e.k0s(),e.j41(3,"div",10)(4,"div",11)(5,"app-icon"),e.EFF(6,"event"),e.k0s()(),e.j41(7,"div",12),e.EFF(8),e.nI1(9,"date"),e.DNE(10,ve,4,8,"span",13),e.k0s()(),e.j41(11,"div",14)(12,"div",11)(13,"app-icon"),e.EFF(14,"schedule"),e.k0s()(),e.j41(15,"div",12),e.EFF(16),e.k0s()(),e.j41(17,"div",15)(18,"div",16)(19,"div",11)(20,"app-icon"),e.EFF(21,"place"),e.k0s()(),e.j41(22,"div",12),e.EFF(23),e.k0s(),e.j41(24,"button",17),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.show_spaces=!s.show_spaces)}),e.EFF(25),e.k0s()(),e.j41(26,"div",18),e.DNE(27,fe,5,9,"div",19),e.k0s()(),e.j41(28,"div",15)(29,"div",16)(30,"div",11)(31,"app-icon"),e.EFF(32,"group"),e.k0s()(),e.j41(33,"div",12),e.EFF(34),e.k0s(),e.j41(35,"button",17),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.show_people=!s.show_people)}),e.EFF(36),e.k0s()(),e.j41(37,"div",18),e.DNE(38,ge,5,8,"div",20),e.k0s()(),e.DNE(39,be,12,5,"div",21),e.j41(40,"div",15),e.DNE(41,ke,6,3,"div",22),e.k0s(),e.DNE(42,we,4,3,"div",23),e.k0s()}if(2&i){const t=e.XpG();e.R7$(2),e.SpI(" ",t.event.title," "),e.R7$(6),e.SpI(" ",e.i5U(9,19,t.event.date,"longDate")," "),e.R7$(2),e.Y8G("ngIf",!t.event.all_day),e.R7$(6),e.JRh(t.duration),e.R7$(7),e.SpI(" ",null==t.event.resources?null:t.event.resources.length," Space(s) "),e.R7$(),e.Y8G("disabled",!(null!=t.event.resources&&t.event.resources.length)),e.R7$(),e.SpI(" ",t.show_spaces?"Hide":"Show"," "),e.R7$(),e.xc7("height",t.show_spaces?2.5*(null==t.event.resources?null:t.event.resources.length)+"rem":"0"),e.R7$(),e.Y8G("ngForOf",t.event.resources),e.R7$(7),e.SpI(" ",(null==t.event.attendees?null:t.event.attendees.length)||0," Attendee(s) "),e.R7$(),e.Y8G("disabled",!(null!=t.event.attendees&&t.event.attendees.length)),e.R7$(),e.SpI(" ",t.show_people?"Hide":"Show"," "),e.R7$(),e.xc7("height",t.show_people?3*t.event.attendees.length+"rem":"0"),e.R7$(),e.Y8G("ngForOf",t.event.attendees),e.R7$(),e.Y8G("ngIf",null==t.event.extension_data.catering?null:t.event.extension_data.catering.length),e.R7$(2),e.Y8G("ngIf",t.event.body),e.R7$(),e.Y8G("ngIf","done"!==t.event.state)}}function Ee(i,a){1&i&&(e.j41(0,"div",45),e.nrm(1,"mat-spinner",46),e.j41(2,"p"),e.EFF(3,"Loading event data..."),e.k0s()()),2&i&&(e.R7$(),e.Y8G("diameter",32))}let Ie=(()=>{class i extends u.Tv{get is_host(){return this.event?.host}get can_view_location(){return!this._settings.get("app.no_maps")}get duration(){return this.event.all_day?"All Day":(0,j.a)({hours:Math.floor(this.event?.duration/60),minutes:this.event?.duration%60})}constructor(t,n,s,l,r,d){super(),this._route=t,this._router=n,this._dialog=s,this._events=l,this._spaces=r,this._settings=d}ngOnInit(){var t=this;this.subscription("route.params",this._route.paramMap.subscribe(function(){var n=(0,m.A)(function*(s){if(s.has("id")){const l=s.get("id").split("|");t.event=t._settings.get("app.events.use_bookings")?yield(0,v.DO)(l[0]).pipe((0,b.T)(r=>(0,x.Uv)(r))).toPromise():yield(0,x.ue)(l[0],{system_id:l[1]}).toPromise()}});return function(s){return n.apply(this,arguments)}}())),this.timeout("return",()=>this.event?"":this._router.navigate(["/schedule"]),8e3)}optionsFor(t){return t.options.map(n=>n.name).join("\n")}viewLocation(t){t=this._spaces.find(t.id||t.email)||t,this._dialog.open(S.VJ,{maxWidth:"95vw",maxHeight:"95vh",data:{item:t}})}editEvent(){"event_start"in this.event&&(this._events.newForm(this.event),this._router.navigate(["/book","spaces","form"]))}confirmDelete(){var t=this;return(0,m.A)(function*(){const n=yield(0,u.GE)({title:(t.is_host?"Delete":"Decline")+" event",content:`Are you sure you wish to ${t.is_host?"delete":"decline"} this event?`,icon:{content:t.is_host?"delete":"event_busy"}},t._dialog);"done"===n.reason&&(n.loading("Removing event..."),yield(t._settings.get("app.events.use_bookings")?v.UN:x.Nn)(t.event.id).toPromise().catch(s=>{throw n.loading(""),(0,u.UG)(`Error removing event. ${s}`),s}),(0,u.VX)("Successfully removed event."),t._router.navigate(["/schedule"]),n.close())})()}static#e=this.\u0275fac=function(n){return new(n||i)(e.rXU(p.nX),e.rXU(p.Ix),e.rXU($.bZ),e.rXU(x.Ws),e.rXU(ce.bh),e.rXU(u.h$))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["schedule-view-event"]],inputs:{event:"event"},features:[e.Vt3],decls:11,vars:4,consts:[["load_state",""],["topbar","",1,""],["btn","","matRipple","",1,"clear","h-[2.75rem]","text-white",3,"routerLink"],[1,"flex","items-center","justify-center","h-full"],[1,"text-xl"],[1,"ml-2","mx-4"],[1,"flex-1","w-full","flex","flex-col","items-center","bg-base-200","p-4","overflow-auto"],["class","max-w-full w-[28rem] bg-base-100 border border-base-200 px-4 pb-4 divide-y divide-base-200",4,"ngIf","ngIfElse"],[1,"max-w-full","w-[28rem]","bg-base-100","border","border-base-200","px-4","pb-4","divide-y","divide-base-200"],[1,"text-xl","uppercase","font-medium","w-full","my-4"],[1,"flex","items-center","py-2","space-x-2","w-full","!border-none"],[1,"p-2","rounded-full","bg-base-200","mr-2"],[1,"flex-1","truncate"],[4,"ngIf"],[1,"flex","items-center","py-2","space-x-2","w-full"],[1,"w-full"],[1,"flex","items-center","py-2","space-x-2"],["matRipple","",1,"clear","bg-transparent","border-none","underline",3,"click","disabled"],["list","",1,"overflow-hidden"],["class","flex items-center h-10 pl-12",4,"ngFor","ngForOf"],["class","flex items-center h-12 pl-12 pr-2 space-x-2",4,"ngFor","ngForOf"],["class","w-full",4,"ngIf"],["class","flex items-center py-2 space-x-2 w-full",4,"ngIf"],["class","flex items-center justify-center space-x-2 mt-4 !border-none",4,"ngIf"],[1,"flex","items-center","h-10","pl-12"],[1,"h-2","w-2","rounded","mr-2"],["matRipple","","locate","","class","bg-transparent border-none underline text-black",3,"click",4,"ngIf"],["matRipple","","locate","",1,"bg-transparent","border-none","underline","text-black",3,"click"],[1,"flex","items-center","h-12","pl-12","pr-2","space-x-2"],[1,"text-sm",3,"user"],[1,"h-2","w-2","rounded","mr-4"],[1,"border-b","border-base-200","w-full"],["matRipple","",1,"clear","bg-transparent","border-none","underline",3,"click"],["class","flex items-center h-12 pl-12 space-x-2",4,"ngFor","ngForOf"],[1,"flex","items-center","h-12","pl-12","space-x-2"],[1,"flex-1","w-1/2"],["class","text-xs underline",3,"matTooltip",4,"ngIf"],[1,"bg-primary","text-xs","rounded","px-4","py-2","mx-2","text-white","font-medium"],[1,"m-2","bg-neutral-500","text-white","h-8","w-8","rounded-full","flex","items-center","justify-center","text-sm"],[1,"text-xs","underline",3,"matTooltip"],["notes","",1,"flex-1","w-1/2","overflow-auto",3,"innerHTML"],[1,"flex","items-center","justify-center","space-x-2","mt-4","!border-none"],["matRipple","","edit","","class","w-32",3,"disabled","click",4,"ngIf"],["matRipple","","remove","",1,"w-32","error","inverse",3,"click","disabled"],["matRipple","","edit","",1,"w-32",3,"click","disabled"],[1,"h-full","w-full","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"]],template:function(n,s){if(1&n&&(e.j41(0,"div",1)(1,"a",2)(2,"div",3)(3,"app-icon",4),e.EFF(4,"arrow_back"),e.k0s(),e.j41(5,"span",5),e.EFF(6,"Back"),e.k0s()()()(),e.j41(7,"div",6),e.DNE(8,ye,43,22,"div",7),e.k0s(),e.DNE(9,Ee,4,1,"ng-template",null,0,e.C5r)),2&n){const l=e.sdS(10);e.R7$(),e.Y8G("routerLink",e.lJ4(3,me)),e.R7$(7),e.Y8G("ngIf",s.event)("ngIfElse",l)}},dependencies:[c.Sq,c.bT,_.R,de.a,f.r6,T.LG,ue.oV,p.Wk,c.oe,c.vh,pe.a],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[topbar][_ngcontent-%COMP%]{background-color:#00539f}[list][_ngcontent-%COMP%]{transition:height .2s}\n\n/*# sourceMappingURL=schedule-view-event.component.ts-angular-inline--133.css.map*/"]})}return i})();var Re=o(7434),je=o(895);const Se=[{path:"",component:(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["schedule"]],decls:5,vars:0,consts:[[1,"flex-1","flex","sm:flex-row","flex-col-reverse","h-1/2"],[1,"relative","flex","flex-col","flex-1","h-1/2","sm:h-auto","overflow-hidden"]],template:function(n,s){1&n&&(e.nrm(0,"topbar"),e.j41(1,"div",0)(2,"main",1),e.nrm(3,"router-outlet"),e.k0s()(),e.nrm(4,"footer-menu"))},dependencies:[Re.G,je.e,p.n3],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}\n\n/*# sourceMappingURL=schedule.component.ts-angular-inline--134.css.map*/"]})}return i})(),children:[{path:"",component:q},{path:"view/:id/booking",component:re},{path:"view/:id/event",component:Ie}]},{path:"*",redirectTo:""}];let $e=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.$C({type:i});static#n=this.\u0275inj=e.G2t({imports:[c.MD,g.YN,C.p,G.kR,h.E9,p.iI.forChild(Se)]})}return i})()}}]);
//# sourceMappingURL=apps_workplace_src_app_schedule_schedule_module_ts.js.map