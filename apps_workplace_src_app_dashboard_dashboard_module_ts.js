(self.webpackChunkplaceos=self.webpackChunkplaceos||[]).push([["apps_workplace_src_app_dashboard_dashboard_module_ts"],{4368:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DashboardModule:()=>_e});var i=n(1511),s=n(6073),o=n(6898),a=n(2619),r=n(3730),c=n(4892),l=n(4762),u=n(6817),d=n(8512),p=n(878),m=n(7701),g=n(4689),f=n(7727),h=n(8303),_=n(3530),v=n(3835),Z=n(9996),b=n(8125),x=n(4266),A=n(4587),y=n(3743),w=n(1496);let q=(()=>{class e extends r.KG{constructor(e,t){super(),this._calendar=e,this._org=t,this._options=new d.X({}),this._free_spaces=new d.X([]),this._upcoming_events=new d.X([]),this._contacts=new d.X([]),this._level_occupancy=new d.X([]),this.free_spaces=this._free_spaces.asObservable(),this.upcoming_events=this._upcoming_events.asObservable(),this.contacts=this._contacts.asObservable(),this.options=this._options.asObservable(),this.search_results=this._options.pipe((0,m.b)(500),(0,g.w)(({search:e})=>e?(0,A.VE)(e):(0,p.of)([])),(0,f.K)(e=>[]),(0,h.d)(1)),this.level_occupancy=this._level_occupancy.asObservable(),this.init()}init(){return(0,l.mG)(this,void 0,void 0,function*(){if(yield this._org.initialised.pipe((0,_.P)(e=>e)).toPromise(),this.subscription("building",this._org.active_building.pipe((0,v.h)(e=>!!e)).subscribe(()=>this.updateBuildingMetadata())),!this._org.organisation.bindings.area_management)return;const e=(0,u.rTZ)(this._org.organisation.bindings.area_management,"AreaManagement").binding("overview");e.listen().subscribe(e=>this.updateOccupancy(e||{})),e.bind()})}setOptions(e){this._options.next(Object.assign(Object.assign({},this._options.getValue()),e))}pollFreeSpaces(e=1e4){this.updateFreeSpaces(),this.interval("free_spaces",()=>this.updateFreeSpaces(),e)}stopPollingFreeSpaces(){this.clearInterval("free_spaces")}pollUpcomingEvents(e=1e4){this.updateUpcomingEvents(),this.interval("upcoming_events",()=>this.updateUpcomingEvents(),e)}stopPollingUpcomingEvents(){this.clearInterval("upcoming_events")}updateContacts(){return(0,l.mG)(this,void 0,void 0,function*(){const e=yield(0,u.rlq)((0,r.ar)().id,"contacts").toPromise();this._contacts.next((e.details instanceof Array?e.details:[]).map(e=>new A.n5(e)))})}addContact(e){return(0,l.mG)(this,void 0,void 0,function*(){let t=[...this._contacts.getValue()];t.push(e),t=(0,r.Tw)(t,"email");const n=yield(0,u.Ymr)((0,r.ar)().id,{name:"contacts",description:"Contacts for the User",details:t}).toPromise();this._contacts.next((n.details instanceof Array?n.details:[]).map(e=>new A.n5(e)))})}removeContact(e){return(0,l.mG)(this,void 0,void 0,function*(){let t=[...this._contacts.getValue()];t=t.filter(t=>t.email!==e.email);const n=yield(0,u.Ymr)((0,r.ar)().id,{name:"contacts",description:"Contacts for the User",details:t}).toPromise();this._contacts.next((n.details instanceof Array?n.details:[]).map(e=>new A.n5(e)))})}updateOccupancy(e){return(0,l.mG)(this,void 0,void 0,function*(){const t=[...this._org.levels];t.sort((t,n)=>{var i,s;return(null===(i=e[t.id])||void 0===i?void 0:i.recommendation)-(null===(s=e[n.id])||void 0===s?void 0:s.recommendation)}),this._level_occupancy.next(t)})}updateFreeSpaces(){return(0,l.mG)(this,void 0,void 0,function*(){if(!this._org.building)return;const e=Math.floor((new Date).valueOf()/1e3),t=Math.floor((0,b.Z)(new Date).valueOf()/1e3),n=yield this._calendar.freeBusy({period_start:e,period_end:t,zone_ids:this._org.building.id}).pipe((0,Z.U)(e=>e.filter(e=>!e.availability.length||e.availability.find(e=>"busy"!==e.status)))).toPromise();n.sort((e,t)=>e.capacity-t.capacity),this._free_spaces.next(n)})}updateUpcomingEvents(){return(0,l.mG)(this,void 0,void 0,function*(){const e=Math.floor((new Date).valueOf()/1e3),t=Math.floor((0,b.Z)(new Date).valueOf()/1e3),n=yield(0,x.u$)({period_start:e,period_end:t,calendars:(0,r.ar)().email}).toPromise();this._upcoming_events.next(n)})}updateBuildingMetadata(){return(0,l.mG)(this,void 0,void 0,function*(){const e=this._org.building,t=yield(0,u.rlq)(e.id,"bindings").toPromise();if(!t.details.occupancy)return;const n=t.details.occupancy,i=(0,u.rTZ)(n.sys,n.module,n.index);i&&(this._occupancy_binding&&this._occupancy_binding.unbind(),this._occupancy_binding=i.binding("occupancy"),this._occupancy_binding.bind(),this.subscription("occupancy_binding",this._occupancy_binding.listen().subscribe(e=>{const t=Object.keys(e).map(t=>Object.assign({id:t},e[t]));t.sort((e,t)=>e.recommendation_factor-t.recommendation_factor),this._level_occupancy.next(t.map(e=>this._org.levelWithID([e.id])))})))})}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(y.ot),a.LFG(w.w7))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var T=n(5980);const U=function(){return["/explore"]},O=function(e){return{level:e}};function C(e,t){if(1&e&&(a.TgZ(0,"a",8),a.TgZ(1,"div",9),a._uU(2),a.qZA(),a.qZA()),2&e){const e=t.$implicit;a.Q6J("routerLink",a.DdM(3,U))("queryParams",a.VKq(4,O,e.id)),a.xp6(2),a.hij(" ",e.display_name||e.name,"\n")}}function M(e,t){1&e&&(a.TgZ(0,"span",10),a._uU(1,"No free spaces"),a.qZA())}const k=function(e){return{space:e}};function N(e,t){if(1&e&&(a.TgZ(0,"a",8),a.TgZ(1,"div",9),a._uU(2),a.qZA(),a.qZA()),2&e){const e=t.$implicit;a.Q6J("routerLink",a.DdM(3,U))("queryParams",a.VKq(4,k,e.id)),a.xp6(2),a.hij(" ",e.display_name||e.name," ")}}function P(e,t){1&e&&(a.TgZ(0,"span",10),a._uU(1,"No free rooms"),a.qZA())}let J=(()=>{class e{constructor(e){this._state=e,this.space_list=this._state.free_spaces,this.levels_free=this._state.level_occupancy}ngOnInit(){return(0,l.mG)(this,void 0,void 0,function*(){this._state.pollFreeSpaces()})}ngOnDestroy(){this._state.stopPollingFreeSpaces()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(q))},e.\u0275cmp=a.Xpm({type:e,selectors:[["a-dashboard-availability"]],decls:22,vars:20,consts:[[1,"m-0","font-medium","text-xl"],[1,"flex","flex-col","items-center","p-2","bg-white","shadow","my-4","rounded-lg"],[1,"flex","items-center","w-full","mb-2"],["free-levels","",1,"items","space-y-2","w-full"],["button","","mat-button","","class","w-full",3,"routerLink","queryParams",4,"ngFor","ngForOf"],["class","text-dark-fade text-sm mb-2",4,"ngIf"],["free-spaces","",1,"flex","items-center","flex-col","rounded-lg","bg-white","shadow","my-4","p-2"],[1,"items","space-y-2","w-full"],["button","","mat-button","",1,"w-full",3,"routerLink","queryParams"],[1,"max-w-full","truncate"],[1,"text-dark-fade","text-sm","mb-2"]],template:function(e,t){1&e&&(a.TgZ(0,"h3",0),a._uU(1,"Available Now"),a.qZA(),a.TgZ(2,"div",1),a.TgZ(3,"div",2),a.TgZ(4,"div"),a._uU(5,"Spaces"),a.qZA(),a.qZA(),a.TgZ(6,"div",3),a.YNc(7,C,3,6,"a",4),a.ALo(8,"slice"),a.ALo(9,"async"),a.YNc(10,M,2,0,"span",5),a.ALo(11,"async"),a.qZA(),a.qZA(),a.TgZ(12,"div",6),a.TgZ(13,"div",2),a.TgZ(14,"div"),a._uU(15,"Rooms"),a.qZA(),a.qZA(),a.TgZ(16,"div",7),a.YNc(17,N,3,6,"a",4),a.ALo(18,"slice"),a.ALo(19,"async"),a.YNc(20,P,2,0,"span",5),a.ALo(21,"async"),a.qZA(),a.qZA()),2&e&&(a.xp6(7),a.Q6J("ngForOf",a.Dn7(8,4,a.lcZ(9,8,t.levels_free),0,2)),a.xp6(3),a.Q6J("ngIf",!a.lcZ(11,10,t.levels_free).length),a.xp6(7),a.Q6J("ngForOf",a.Dn7(18,12,a.lcZ(19,16,t.space_list),0,3)),a.xp6(3),a.Q6J("ngIf",!a.lcZ(21,18,t.space_list).length))},directives:[i.sg,i.O5,T.zs,o.yS],pipes:[i.OU,i.Ov],styles:["[_nghost-%COMP%]{padding:1em;min-width:16rem}"]}),e})();var F=n(8282),I=n(4608),D=n(1548),Q=n(6828),L=n(5969);function Y(e,t){1&e&&a._UZ(0,"a-user-avatar",15),2&e&&a.Q6J("user",t.$implicit)}function j(e,t){if(1&e&&(a.TgZ(0,"a",16),a._uU(1,"Join Call"),a.qZA()),2&e){const e=a.oxw().$implicit;a.Q6J("href",e.meeting_link,a.LSH)}}const S=function(){return{class:"material-icons",content:"room"}},G=function(){return{class:"material-icons",content:"group"}};function E(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",3),a._UZ(1,"div",4),a.TgZ(2,"div",5),a.TgZ(3,"div",6),a._uU(4),a.ALo(5,"date"),a.qZA(),a.TgZ(6,"div",7),a._uU(7),a.qZA(),a.TgZ(8,"div",8),a._UZ(9,"app-icon",9),a.TgZ(10,"a",10),a.NdJ("click",function(){const t=a.CHM(e).$implicit,n=a.oxw();return t.space?n.locateSpace(t.space):""}),a._uU(11),a.qZA(),a.qZA(),a.TgZ(12,"div",11),a._UZ(13,"app-icon",9),a._uU(14),a.qZA(),a.TgZ(15,"div",12),a.YNc(16,Y,1,1,"a-user-avatar",13),a.qZA(),a.qZA(),a.YNc(17,j,2,1,"a",14),a.qZA()}if(2&e){const e=t.$implicit;a.xp6(4),a.hij(" ",a.xi3(5,13,e.date,"shortTime")," "),a.xp6(3),a.hij(" ",e.title," "),a.xp6(2),a.Q6J("icon",a.DdM(16,S)),a.xp6(1),a.ekj("underline",!!e.space),a.Q6J("matTooltip",e.space?"Locate Space":""),a.xp6(1),a.AsE(" ",(null==e.space?null:e.space.display_name)||(null==e.space?null:e.space.name)||"<No Location>"," ",null!=e.space&&null!=e.space.level&&e.space.level.display_name||null!=e.space&&null!=e.space.level&&e.space.level.name?", "+e.space.level.display_name||0:""," "),a.xp6(2),a.Q6J("icon",a.DdM(17,G)),a.xp6(1),a.AsE(" ",e.guests.length," Guest",1===e.guests.length?"":"s"," "),a.xp6(2),a.Q6J("ngForOf",e.guests),a.xp6(1),a.Q6J("ngIf",e.meeting_link)}}function X(e,t){1&e&&(a.TgZ(0,"p",17),a._uU(1," No upcoming events for today "),a.qZA())}let $=(()=>{class e{constructor(e,t){this._state=e,this._dialog=t,this.upcoming_events=this._state.upcoming_events}ngOnInit(){this._state.pollUpcomingEvents()}ngOnDestroy(){this._state.stopPollingUpcomingEvents()}locateSpace(e){this._dialog.open(F.p,{data:{item:Object.assign(Object.assign({},e),{level:null})}})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(q),a.Y36(I.uw))},e.\u0275cmp=a.Xpm({type:e,selectors:[["a-dashboard-upcoming"]],decls:7,vars:10,consts:[[1,"m-0","mb-4","font-medium","text-xl"],["name","event","class","flex bg-white shadow rounded-lg relative overflow-hidden mb-4",4,"ngFor","ngForOf"],["class","text-dark-fade text-center w-full",4,"ngIf"],["name","event",1,"flex","bg-white","shadow","rounded-lg","relative","overflow-hidden","mb-4"],["name","status",1,"absolute","rounded-lg"],["name","details",1,"flex-1","mr-2"],["name","time",1,"text-sm","text-bold","mb-2"],["name","title",1,"text-sm","text-bold","mb-2"],["name","space",1,"text-xs","flex","items-center","mb-2"],[1,"mr-2",3,"icon"],[1,"text-black",3,"matTooltip","click"],["name","attendees",1,"text-xs","flex","items-center","mb-2"],["name","guests",1,"flex","space-x-2","text-sm"],[3,"user",4,"ngFor","ngForOf"],["button","","mat-button","","class","uppercase h-12",3,"href",4,"ngIf"],[3,"user"],["button","","mat-button","",1,"uppercase","h-12",3,"href"],[1,"text-dark-fade","text-center","w-full"]],template:function(e,t){1&e&&(a.TgZ(0,"h3",0),a._uU(1,"Your Bookings"),a.qZA(),a.YNc(2,E,18,18,"div",1),a.ALo(3,"slice"),a.ALo(4,"async"),a.YNc(5,X,2,0,"p",2),a.ALo(6,"async")),2&e&&(a.xp6(2),a.Q6J("ngForOf",a.Dn7(3,2,a.lcZ(4,6,t.upcoming_events),0,3)),a.xp6(3),a.Q6J("ngIf",!a.lcZ(6,8,t.upcoming_events).length))},directives:[i.sg,i.O5,D.o,Q.gM,L.k,T.zs],pipes:[i.OU,i.Ov,i.uU],styles:["[_nghost-%COMP%]{padding:1em;min-width:16rem}[name=time][_ngcontent-%COMP%]{color:#00529b}[name=event][_ngcontent-%COMP%]{padding:1rem 1rem 1rem 2rem}[name=status][_ngcontent-%COMP%]{top:1rem;left:-.8rem;height:2.5rem;width:1.6rem;background-color:#00529b}button[_ngcontent-%COMP%]{height:3em}app-icon[_ngcontent-%COMP%]{margin-left:-.25rem}"]}),e})();var V=n(9676),H=n(8055),z=n(6283),B=n(6756),K=n(4786),R=n(1522);let W=(()=>{class e{constructor(){this.events=new a.vpe,this.form=new s.cw({name:new s.NI("",[s.kI.required]),description:new s.NI(""),sender:new s.NI(""),priority:new s.NI("")})}register(){this.form.markAllAsTouched(),this.form.valid&&this.events.emit({reason:"done",metadata:this.form.value})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Xpm({type:e,selectors:[["dashboard-delivery-modal"]],outputs:{events:"events"},decls:47,vars:1,consts:[[1,"flex","items-center","justify-between"],["mat-icon-button","","mat-dialog-close",""],[1,"p-2","w-[24rem]",3,"formGroup"],["appearance","outline",1,"w-full"],["matInput","","placeholder","Name of items being delivered","formControlName","name"],["matInput","","placeholder","Description of items being delivered","formControlName","description"],["matInput","","placeholder","Name of sender","formControlName","sender"],["placeholder","Low","formControlName","priority"],[1,"p-2","flex","items-center","justify-center","border-t","border-gray-100"],["mat-button","",1,"w-32",3,"click"]],template:function(e,t){1&e&&(a.TgZ(0,"header",0),a.TgZ(1,"h3"),a._uU(2,"Register Delivery"),a.qZA(),a.TgZ(3,"button",1),a.TgZ(4,"app-icon"),a._uU(5,"close"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"main",2),a.TgZ(7,"div"),a.TgZ(8,"label"),a._uU(9,"Name"),a.TgZ(10,"span"),a._uU(11,"*"),a.qZA(),a._uU(12,":"),a.qZA(),a.TgZ(13,"mat-form-field",3),a._UZ(14,"input",4),a.TgZ(15,"mat-error"),a._uU(16,"Name is required"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(17,"div"),a.TgZ(18,"label"),a._uU(19,"Description:"),a.qZA(),a.TgZ(20,"mat-form-field",3),a._UZ(21,"textarea",5),a.qZA(),a.qZA(),a.TgZ(22,"div"),a.TgZ(23,"label"),a._uU(24,"Sender:"),a.qZA(),a.TgZ(25,"mat-form-field",3),a._UZ(26,"input",6),a.TgZ(27,"mat-error"),a._uU(28,"Sender is required"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(29,"div"),a.TgZ(30,"label"),a._uU(31,"Priority:"),a.qZA(),a.TgZ(32,"mat-form-field",3),a.TgZ(33,"mat-select",7),a.TgZ(34,"mat-option"),a._uU(35,"Very Low"),a.qZA(),a.TgZ(36,"mat-option"),a._uU(37,"Low"),a.qZA(),a.TgZ(38,"mat-option"),a._uU(39,"Normal"),a.qZA(),a.TgZ(40,"mat-option"),a._uU(41,"High"),a.qZA(),a.TgZ(42,"mat-option"),a._uU(43,"Very Height"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(44,"footer",8),a.TgZ(45,"button",9),a.NdJ("click",function(){return t.register()}),a._uU(46," Register "),a.qZA(),a.qZA()),2&e&&(a.xp6(6),a.Q6J("formGroup",t.form))},directives:[T.lW,I.ZT,D.o,s.JL,s.sg,z.KE,B.Nt,s.Fj,s.JJ,s.u,z.TO,K.gD,R.ey],styles:[""]}),e})();function ee(e,t){if(1&e&&(a.TgZ(0,"div",7),a.TgZ(1,"div",8),a.TgZ(2,"div",9),a._uU(3),a.qZA(),a.TgZ(4,"div",10),a._uU(5),a.ALo(6,"date"),a.qZA(),a.qZA(),a._UZ(7,"div",11),a.qZA()),2&e){const e=t.$implicit;a.xp6(3),a.hij(" ",(null==e?null:e.name)||"Untitled Delivery"," "),a.xp6(2),a.hij(" ",e&&e.received?a.xi3(6,6,e.received,"medium"):"Not received"," "),a.xp6(2),a.ekj("bg-pending",!e.received)("bg-success",e.received)}}function te(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",4),a.YNc(1,ee,8,9,"div",5),a.TgZ(2,"button",6),a.NdJ("click",function(){return a.CHM(e),a.oxw().registerDelivery()}),a._uU(3," Register Delivery "),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(1),a.Q6J("ngForOf",e.deliveries)}}function ne(e,t){1&e&&(a.TgZ(0,"div",12),a._uU(1," No registered deliveries "),a.qZA())}let ie=(()=>{class e{constructor(e){this._dialog=e,this.deliveries=[{name:"USB-C Cables",received:Date.now()},{name:"Desk Fan"}]}registerDelivery(){return(0,l.mG)(this,void 0,void 0,function*(){const e=this._dialog.open(W),t=yield Promise.race([e.componentInstance.events.pipe((0,_.P)(e=>"done"===e.reason)).toPromise(),e.afterClosed().toPromise()]);"done"===t.reason&&(this.deliveries.push(t.metadata),e.close())})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(I.uw))},e.\u0275cmp=a.Xpm({type:e,selectors:[["dashboard-deliveries"]],decls:6,vars:2,consts:[[1,"m-0","my-2","font-medium","text-xl"],[1,"bg-white","shadow","p-2","rounded"],["class","divide-y",4,"ngIf","ngIfElse"],["empty_state",""],[1,"divide-y"],["class","flex items-center py-2",4,"ngFor","ngForOf"],["mat-button","",1,"w-full","mt-2",3,"click"],[1,"flex","items-center","py-2"],[1,"flex-1","pl-2"],[1,""],[1,"text-xs","opacity-60"],[1,"m-4","h-2","w-2","rounded-full"],[1,"p-8","flex","items-center","justify-center","opacity-40"]],template:function(e,t){if(1&e&&(a.TgZ(0,"h3",0),a._uU(1,"Deliveries"),a.qZA(),a.TgZ(2,"div",1),a.YNc(3,te,4,1,"div",2),a.qZA(),a.YNc(4,ne,2,0,"ng-template",null,3,a.W1O)),2&e){const e=a.MAs(5);a.xp6(3),a.Q6J("ngIf",null==t.deliveries?null:t.deliveries.length)("ngIfElse",e)}},directives:[i.O5,i.sg,T.lW],pipes:[i.uU],styles:[""]}),e})();const se=["input"],oe=function(){return{class:"material-icons",content:"close"}};function ae(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",15),a._UZ(1,"a-user-avatar",16),a.TgZ(2,"div",17),a._uU(3),a.qZA(),a.TgZ(4,"div",18),a._UZ(5,"div",19),a._uU(6," Level 12 "),a.qZA(),a.TgZ(7,"button",20),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().removeUser(t)}),a._UZ(8,"app-icon",21),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit;a.xp6(1),a.Q6J("user",e),a.xp6(2),a.hij(" ",e.name," "),a.xp6(5),a.Q6J("icon",a.DdM(3,oe))}}function re(e,t){if(1&e&&(a.TgZ(0,"button",22),a._uU(1),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.hij(" ",e.search_str?'No matches for "'+e.search_str+'"':"Type to search for users..."," ")}}function ce(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"button",23),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().addUser(t)}),a.TgZ(1,"div",24),a._UZ(2,"a-user-avatar",25),a.TgZ(3,"div",26),a.TgZ(4,"div"),a._uU(5),a.qZA(),a.TgZ(6,"div",27),a._uU(7),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit;a.xp6(2),a.Q6J("user",e),a.xp6(3),a.Oqu(e.name),a.xp6(2),a.hij(" ",e.email," ")}}function le(e,t){1&e&&a._UZ(0,"dashboard-deliveries")}const ue=function(){return{class:"material-icons",content:"person_add"}};let de=(()=>{class e extends r.KG{constructor(e,t){super(),this._state=e,this._settings=t,this.contacts=this._state.contacts,this.search_results=this._state.search_results,this.addUser=e=>this._state.addContact(e),this.removeUser=e=>this._state.removeContact(e),this.updateSearch=e=>this._state.setOptions({search:e}),this.search_str=""}get can_deliver(){return!!this._settings.get("app.can_deliver")}ngOnInit(){this._state.updateContacts()}focusInput(){this.timeout("focus",()=>{this._input_el&&this._input_el.nativeElement.focus()})}clearInput(){this.search_str="",this._state.setOptions({search:""})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(q),a.Y36(r.gb))},e.\u0275cmp=a.Xpm({type:e,selectors:[["a-dashboard-contacts"]],viewQuery:function(e,t){if(1&e&&a.Gf(se,5),2&e){let e;a.iGM(e=a.CRH())&&(t._input_el=e.first)}},features:[a.qOj],decls:21,vars:18,consts:[[1,"m-0","mb-2","font-medium","text-xl"],["name","contact-list",1,"bg-gray-400","shadow","rounded-lg","p-2","pl-0","space-y-2","flex","flex-wrap"],["name","contact","class","bg-white rounded-lg flex-1 flex flex-col items-center p-2 relative",4,"ngFor","ngForOf"],["name","contact","mat-button","",1,"rounded-lg","flex-1","w-full",3,"matMenuTriggerFor","menuOpened","menuClosed"],[1,"flex","flex-col","items-center","p-4","text-black","w-full"],[1,"text-2xl",3,"icon"],[1,"w-full","leading-tight","whitespace-normal"],["xPosition","before"],["menu","matMenu"],["mat-menu-item","",1,"p-0",3,"click"],["placeholder","Search for user...",1,"w-full","p-2","text-base",3,"ngModel","ngModelChange"],["input",""],["mat-menu-item","",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["name","contact",1,"bg-white","rounded-lg","flex-1","flex","flex-col","items-center","p-2","relative"],[1,"text-2xl","mb-2",3,"user"],["name","contact-name",1,"text-sm","mb-2"],["name","location",1,"flex","items-center","text-sm"],["name","dot",1,"mr-2"],["mat-icon-button","","name","close",3,"click"],[3,"icon"],["mat-menu-item",""],["mat-menu-item","",3,"click"],[1,"flex","items-center","leading-tight"],[1,"text-xl","mr-2",3,"user"],[1,"flex-1"],[1,"text-xs","text-dark-fade"]],template:function(e,t){if(1&e&&(a.TgZ(0,"h3",0),a._uU(1,"Colleagues"),a.qZA(),a.TgZ(2,"div",1),a.YNc(3,ae,9,4,"div",2),a.ALo(4,"async"),a.TgZ(5,"button",3),a.NdJ("menuOpened",function(){return t.focusInput()})("menuClosed",function(){return t.clearInput()}),a.TgZ(6,"div",4),a._UZ(7,"app-icon",5),a.TgZ(8,"span",6),a._uU(9,"Click to add a person to contacts"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(10,"mat-menu",7,8),a.TgZ(12,"div",9),a.NdJ("click",function(e){return e.stopPropagation(),e.preventDefault()}),a.TgZ(13,"input",10,11),a.NdJ("ngModelChange",function(e){return t.search_str=e})("ngModelChange",function(){return t.updateSearch(t.search_str)}),a.qZA(),a.qZA(),a.YNc(15,re,2,1,"button",12),a.ALo(16,"async"),a.YNc(17,ce,8,3,"button",13),a.ALo(18,"slice"),a.ALo(19,"async"),a.qZA(),a.YNc(20,le,1,0,"dashboard-deliveries",14)),2&e){const e=a.MAs(11);let n;a.xp6(3),a.Q6J("ngForOf",a.lcZ(4,7,t.contacts)),a.xp6(2),a.Q6J("matMenuTriggerFor",e),a.xp6(2),a.Q6J("icon",a.DdM(17,ue)),a.xp6(6),a.Q6J("ngModel",t.search_str),a.xp6(2),a.Q6J("ngIf",!(null!=(n=a.lcZ(16,9,t.search_results))&&n.length)),a.xp6(2),a.Q6J("ngForOf",a.Dn7(18,11,a.lcZ(19,15,t.search_results),0,8)),a.xp6(3),a.Q6J("ngIf",t.can_deliver)}},directives:[i.sg,T.lW,H.p6,D.o,H.VK,H.OP,s.Fj,s.JJ,s.On,i.O5,L.k,ie],pipes:[i.Ov,i.OU],styles:["[_nghost-%COMP%]{padding:1em;min-width:16rem}[name=contact-list][_ngcontent-%COMP%]{padding:0 .5rem .5rem 0}[name=contact][_ngcontent-%COMP%]{min-width:8rem;width:8rem;margin-left:.5rem;margin-top:.5rem}[name=contact-name][_ngcontent-%COMP%]{font-weight:400}[name=dot][_ngcontent-%COMP%]{height:8px;width:8px;border-radius:8px;background-color:#22992e}button[name=close][_ngcontent-%COMP%]{position:absolute;display:none;top:.25rem;right:.25rem}[name=contact][_ngcontent-%COMP%]:hover   button[name=close][_ngcontent-%COMP%]{display:initial}button[name=contact][_ngcontent-%COMP%]{background-color:#f0f0f0;border:none;min-width:calc(100% - .5rem)!important}"]}),e})();const pe=["dashboard",""];function me(e,t){1&e&&a._UZ(0,"a-dashboard-contacts",3)}let ge=(()=>{class e{constructor(e){this._settings=e}get hide_contacts(){return!1!==this._settings.get("app.hide_contacts")}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(r.gb))},e.\u0275cmp=a.Xpm({type:e,selectors:[["","dashboard",""]],attrs:pe,decls:8,vars:1,consts:[[1,"flex-1","flex","sm:flex-row","flex-col-reverse","h-1/2","bg-gray-200"],[1,"relative","z-0","flex","flex-col","flex-1","h-1/2","sm:h-auto","overflow-hidden"],[1,"flex","flex-1","px-0","sm:px-8","flex-wrap","overflow-auto","h-px","sm:h-auto"],[1,"flex-1","min-w-64"],["class","flex-1 min-w-64",4,"ngIf"]],template:function(e,t){1&e&&(a._UZ(0,"topbar"),a.TgZ(1,"div",0),a.TgZ(2,"div",1),a.TgZ(3,"main",2),a._UZ(4,"a-dashboard-availability",3),a._UZ(5,"a-dashboard-upcoming",3),a.YNc(6,me,1,0,"a-dashboard-contacts",4),a.qZA(),a.qZA(),a.qZA(),a._UZ(7,"footer-menu")),2&e&&(a.xp6(6),a.Q6J("ngIf",!t.hide_contacts))},directives:[c.o,J,$,i.O5,V.i,de],styles:["[_nghost-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;display:flex;flex-direction:column}main[_ngcontent-%COMP%]{min-height:50%}.top[_ngcontent-%COMP%]{background-color:#007ac8}a[button].tile[_ngcontent-%COMP%]{flex:1;border-radius:0;background-color:#fff;color:rgba(0,0,0,.85);border:none;border-right:1px solid #ccc}a[button].tile[_ngcontent-%COMP%]:last-child{border:none}"]}),e})();var fe=n(1781);const he=[{path:"",component:ge}];let _e=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[i.ez,s.u5,fe.v,s.UX,o.Bz.forChild(he)]]}),e})()}}]);
//# sourceMappingURL=apps_workplace_src_app_dashboard_dashboard_module_ts.js.map